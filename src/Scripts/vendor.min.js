!function(e,t,n){"use strict";function r(e,t){return t=t||Error,function(){var n,r,i=arguments[0],a="["+(e?e+":":"")+i+"] ",o=arguments[1],s=arguments,u=function(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e};for(n=a+o.replace(/\{\d+\}/g,function(e){var t,n=+e.slice(1,-1);return n+2<s.length?(t=s[n+2],"function"==typeof t?t.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?U(t):t):e}),n=n+"\nhttp://errors.angularjs.org/1.3.0-rc.2/"+(e?e+"/":"")+i,r=2;r<arguments.length;r++)n=n+(2==r?"?":"&")+"p"+(r-2)+"="+encodeURIComponent(u(arguments[r]));return new t(n)}}function i(e){if(null==e||S(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:b(e)||Qr(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function a(e,t,n){var r,o;if(e)if(k(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r,e);else if(Qr(e)||i(e)){var s="object"!=typeof e;for(r=0,o=e.length;o>r;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==a)e.forEach(t,n,e);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);return e}function o(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function s(e,t,n){for(var r=o(e),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function u(e){return function(t,n){e(n,t)}}function l(){return++Kr}function c(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function f(e){for(var t=e.$$hashKey,n=1,r=arguments.length;r>n;n++){var i=arguments[n];if(i)for(var a=Object.keys(i),o=0,s=a.length;s>o;o++){var u=a[o];e[u]=i[u]}}return c(e,t),e}function d(e){return parseInt(e,10)}function p(e,t){return f(new(f(function(){},{prototype:e})),t)}function h(){}function $(e){return e}function g(e){return function(){return e}}function m(e){return"undefined"==typeof e}function v(e){return"undefined"!=typeof e}function y(e){return null!==e&&"object"==typeof e}function b(e){return"string"==typeof e}function w(e){return"number"==typeof e}function x(e){return"[object Date]"===zr.call(e)}function k(e){return"function"==typeof e}function C(e){return"[object RegExp]"===zr.call(e)}function S(e){return e&&e.window===e}function D(e){return e&&e.$evalAsync&&e.$watch}function A(e){return"[object File]"===zr.call(e)}function E(e){return"[object Blob]"===zr.call(e)}function T(e){return"boolean"==typeof e}function M(e){return e&&k(e.then)}function O(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function V(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function _(e){return Nr(e.nodeName||e[0].nodeName)}function N(e,t,n){var r=[];return a(e,function(e,i,a){r.push(t.call(n,e,i,a))}),r}function F(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),t}function I(e,t,n,r){if(S(e)||D(e))throw Wr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw Wr("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],y(e)){var i=n.indexOf(e);if(-1!==i)return r[i];n.push(e),r.push(t)}var o;if(Qr(e)){t.length=0;for(var s=0;s<e.length;s++)o=I(e[s],null,n,r),y(e[s])&&(n.push(e[s]),r.push(o)),t.push(o)}else{var u=t.$$hashKey;Qr(t)?t.length=0:a(t,function(e,n){delete t[n]});for(var l in e)e.hasOwnProperty(l)&&(o=I(e[l],null,n,r),y(e[l])&&(n.push(e[l]),r.push(o)),t[l]=o);c(t,u)}}else if(t=e,e)if(Qr(e))t=I(e,[],n,r);else if(x(e))t=new Date(e.getTime());else if(C(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(y(e)){var f=Object.create(Object.getPrototypeOf(e));t=I(e,f,n,r)}return t}function j(e,t){if(Qr(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(y(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function P(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,i,a,o=typeof e,s=typeof t;if(o==s&&"object"==o){if(!Qr(e)){if(x(e))return x(t)?P(e.getTime(),t.getTime()):!1;if(C(e)&&C(t))return e.toString()==t.toString();if(D(e)||D(t)||S(e)||S(t)||Qr(t))return!1;a={};for(i in e)if("$"!==i.charAt(0)&&!k(e[i])){if(!P(e[i],t[i]))return!1;a[i]=!0}for(i in t)if(!a.hasOwnProperty(i)&&"$"!==i.charAt(0)&&t[i]!==n&&!k(t[i]))return!1;return!0}if(!Qr(t))return!1;if((r=e.length)==t.length){for(i=0;r>i;i++)if(!P(e[i],t[i]))return!1;return!0}}return!1}function R(e,t,n){return e.concat(Ur.call(t,n))}function q(e,t){return Ur.call(e,t||0)}function H(e,t){var n=arguments.length>2?q(arguments,2):[];return!k(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat(Ur.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function L(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=n:S(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":D(r)&&(i="$SCOPE"),i}function U(e,t){return"undefined"==typeof e?n:JSON.stringify(e,L,t?"  ":null)}function B(e){return b(e)?JSON.parse(e):e}function z(e){e=qr(e).clone();try{e.empty()}catch(t){}var n=3,r=qr("<div>").append(e).html();try{return e[0].nodeType===n?Nr(r):r.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Nr(t)})}catch(t){return Nr(r)}}function W(e){try{return decodeURIComponent(e)}catch(t){}}function Y(e){var t,n,r={};return a((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=W(t[0]),v(n))){var i=v(t[1])?W(t[1]):!0;Fr.call(r,n)?Qr(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function K(e){var t=[];return a(e,function(e,n){Qr(e)?a(e,function(e){t.push(Q(n,!0)+(e===!0?"":"="+Q(e,!0)))}):t.push(Q(n,!0)+(e===!0?"":"="+Q(e,!0)))}),t.length?t.join("&"):""}function G(e){return Q(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Q(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function J(e,t){var n,r,i=Zr.length;for(e=qr(e),r=0;i>r;++r)if(n=Zr[r]+t,b(n=e.attr(n)))return n;return null}function X(e,t){var n,r,i={};a(Zr,function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))}),a(Zr,function(t){var i,a=t+"app";!n&&(i=e.querySelector("["+a.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(a))}),n&&(i.strictDi=null!==J(n,"strict-di"),t(n,r?[r]:[],i))}function Z(n,r,i){y(i)||(i={});var o={strictDi:!1};i=f(o,i);var s=function(){if(n=qr(n),n.injector()){var e=n[0]===t?"document":z(n);throw Wr("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var a=qt(r,i.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),a},u=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&u.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(u,"")),e&&!l.test(e.name)?s():(e.name=e.name.replace(l,""),void(Yr.resumeBootstrap=function(e){a(e,function(e){r.push(e)}),s()}))}function et(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function tt(e){return Yr.element(e).injector().get("$$testability")}function nt(e,t){return t=t||"_",e.replace(ei,function(e,n){return(n?t:"")+e.toLowerCase()})}function rt(){var t;ti||(Hr=e.jQuery,Hr&&Hr.fn.on?(qr=Hr,f(Hr.fn,{scope:gi.scope,isolateScope:gi.isolateScope,controller:gi.controller,injector:gi.injector,inheritedData:gi.inheritedData}),t=Hr.cleanData,Hr.cleanData=function(e){var n;if(Gr)Gr=!1;else for(var r,i=0;null!=(r=e[i]);i++)n=Hr._data(r,"events"),n&&n.$destroy&&Hr(r).triggerHandler("$destroy");t(e)}):qr=vt,Yr.element=qr,ti=!0)}function it(e,t,n){if(!e)throw Wr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function at(e,t,n){return n&&Qr(e)&&(e=e[e.length-1]),it(k(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function ot(e,t){if("hasOwnProperty"===e)throw Wr("badname","hasOwnProperty is not a valid {0} name",t)}function st(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;o>s;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&k(e)?H(a,e):e}function ut(e){var t=e[0],n=e[e.length-1],r=[t];do{if(t=t.nextSibling,!t)break;r.push(t)}while(t!==n);return qr(r)}function lt(){return Object.create(null)}function ct(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),a=t(e,"angular",Object);return a.$$minErr=a.$$minErr||r,t(a,"module",function(){var e={};return function(r,a,o){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(r,"module"),a&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),l}}if(!a)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],s=[],u=e("$injector","invoke","push",i),l={_invokeQueue:t,_configBlocks:i,_runBlocks:s,requires:a,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:u,run:function(e){return s.push(e),this}};return o&&u(o),l})}})}function ft(t){f(t,{bootstrap:Z,copy:I,extend:f,equals:P,element:qr,forEach:a,injector:qt,noop:h,bind:H,toJson:U,fromJson:B,identity:$,isUndefined:m,isDefined:v,isString:b,isFunction:k,isObject:y,isNumber:w,isElement:O,isArray:Qr,version:ni,isDate:x,lowercase:Nr,uppercase:Ir,callbacks:{counter:0},getTestability:tt,$$minErr:r,$$csp:Xr,reloadWithDebugInfo:et,$$hasClass:St}),Lr=ct(e);try{Lr("ngLocale")}catch(n){Lr("ngLocale",[]).provider("$locale",cn)}Lr("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Pn}),e.provider("$compile",Yt).directive({a:Zi,input:va,textarea:va,form:ia,script:so,select:co,style:po,option:fo,ngBind:ja,ngBindHtml:Ra,ngBindTemplate:Pa,ngClass:qa,ngClassEven:La,ngClassOdd:Ha,ngCloak:Ua,ngController:Ba,ngForm:aa,ngHide:to,ngIf:Ya,ngInclude:Ka,ngInit:Qa,ngNonBindable:Ja,ngPluralize:Xa,ngRepeat:Za,ngShow:eo,ngStyle:no,ngSwitch:ro,ngSwitchWhen:io,ngSwitchDefault:ao,ngOptions:lo,ngTransclude:oo,ngModel:Aa,ngList:_a,ngChange:Ea,pattern:Ma,ngPattern:Ma,required:Ta,ngRequired:Ta,minlength:Va,ngMinlength:Va,maxlength:Oa,ngMaxlength:Oa,ngValue:Fa,ngModelOptions:Ia}).directive({ngInclude:Ga}).directive(ea).directive(za),e.provider({$anchorScroll:Ht,$animate:Di,$browser:Bt,$cacheFactory:zt,$controller:Qt,$document:Jt,$exceptionHandler:Xt,$filter:Jn,$interpolate:un,$interval:ln,$http:rn,$httpBackend:on,$location:kn,$log:Cn,$parse:Vn,$rootScope:jn,$q:_n,$$q:Nn,$sce:Un,$sceDelegate:Ln,$sniffer:Bn,$templateCache:Wt,$templateRequest:zn,$$testability:Wn,$timeout:Yn,$window:Qn,$$rAF:In,$$asyncCallback:Lt})}])}function dt(){return++ii}function pt(e){return e.replace(si,function(e,t,n,r){return r?n.toUpperCase():n}).replace(ui,"Moz$1")}function ht(e){return!di.test(e)}function $t(e){var t=e.nodeType;return 1===t||!t||9===t}function gt(e,t){var n,r,i,o,s=t.createDocumentFragment(),u=[];if(ht(e))u.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),r=(pi.exec(e)||["",""])[1].toLowerCase(),i=$i[r]||$i._default,n.innerHTML=i[1]+e.replace(hi,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;u=R(u,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",a(u,function(e){s.appendChild(e)}),s}function mt(e,n){n=n||t;var r;return(r=fi.exec(e))?[n.createElement(r[1])]:(r=gt(e,n))?r.childNodes:[]}function vt(e){if(e instanceof vt)return e;var t;if(b(e)&&(e=Jr(e),t=!0),!(this instanceof vt)){if(t&&"<"!=e.charAt(0))throw ci("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new vt(e)}t?Et(this,mt(e)):Et(this,e)}function yt(e){return e.cloneNode(!0)}function bt(e,t){if(t||xt(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;i>r;r++)xt(n[r])}function wt(e,t,n,r){if(v(r))throw ci("offargs","jqLite#off() does not support the `selector` argument");var i=kt(e),o=i&&i.events,s=i&&i.handle;if(s)if(t)a(t.split(" "),function(t){m(n)?(oi(e,t,o[t]),delete o[t]):F(o[t]||[],n)});else for(t in o)"$destroy"!==t&&oi(e,t,o[t]),delete o[t]}function xt(e,t){var r=e.ng339,i=r&&ri[r];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),wt(e)),delete ri[r],e.ng339=n}}function kt(e,t){var r=e.ng339,i=r&&ri[r];return t&&!i&&(e.ng339=r=dt(),i=ri[r]={events:{},data:{},handle:n}),i}function Ct(e,t,n){if($t(e)){var r=v(n),i=!r&&t&&!y(t),a=!t,o=kt(e,!i),s=o&&o.data;if(r)s[t]=n;else{if(a)return s;if(i)return s&&s[t];f(s,t)}}}function St(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Dt(e,t){t&&e.setAttribute&&a(t.split(" "),function(t){e.setAttribute("class",Jr((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Jr(t)+" "," ")))})}function At(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");a(t.split(" "),function(e){e=Jr(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Jr(n))}}function Et(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Tt(e,t){return Mt(e,"$"+(t||"ngController")+"Controller")}function Mt(e,t,r){9==e.nodeType&&(e=e.documentElement);for(var i=Qr(t)?t:[t];e;){for(var a=0,o=i.length;o>a;a++)if((r=qr.data(e,i[a]))!==n)return r;e=e.parentNode||11===e.nodeType&&e.host}}function Ot(e){for(bt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Vt(e,t){t||bt(e);var n=e.parentNode;n&&n.removeChild(e)}function _t(e,t){var n=mi[t.toLowerCase()];return n&&vi[_(e)]&&n}function Nt(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&yi[t]}function Ft(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],a=i?i.length:0;if(a){if(m(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},a>1&&(i=j(i));for(var s=0;a>s;s++)n.isImmediatePropagationStopped()||i[s].call(e,n)}};return n.elem=e,n}function It(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||l)():r+":"+e}function jt(e,t){if(t){var n=0;this.nextUid=function(){return++n}}a(e,this.put,this)}function Pt(e){var t=e.toString().replace(ki,""),n=t.match(bi);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Rt(e,t,n){var r,i,o,s;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw b(n)&&n||(n=e.name||Pt(e)),Ci("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=e.toString().replace(ki,""),o=i.match(bi),a(o[1].split(wi),function(e){e.replace(xi,function(e,t,n){r.push(n)})})}e.$inject=r}}else Qr(e)?(s=e.length-1,at(e[s],"fn"),r=e.slice(0,s)):at(e,"fn",!0);return r}function qt(e,t){function r(e){return function(t,n){return y(t)?void a(t,u(e)):e(t,n)}}function i(e,t){if(ot(e,"service"),(k(t)||Qr(t))&&(t=C.instantiate(t)),!t.$get)throw Ci("pget","Provider '{0}' must define $get factory method.",e);return x[e+m]=t}function o(e,t){return i(e,{$get:t})}function s(e,t){return o(e,["$injector",function(e){return e.instantiate(t)}])}function l(e,t){return o(e,g(t))}function c(e,t){ot(e,"constant"),x[e]=t,S[e]=t}function f(e,t){var n=C.get(e+m),r=n.$get;n.$get=function(){var e=D.invoke(r,n);return D.invoke(t,null,{$delegate:e})}}function d(e){var t,n=[];return a(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],i=C.get(r[0]);i[r[1]].apply(i,r[2])}}if(!w.get(e)){w.put(e,!0);try{b(e)?(t=Lr(e),n=n.concat(d(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):k(e)?n.push(C.invoke(e)):Qr(e)?n.push(C.invoke(e)):at(e,"module")}catch(i){throw Qr(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Ci("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function p(e,n){function r(t){if(e.hasOwnProperty(t)){if(e[t]===$)throw Ci("cdep","Circular dependency found: {0}",t+" <- "+v.join(" <- "));return e[t]}try{return v.unshift(t),e[t]=$,e[t]=n(t)}catch(r){throw e[t]===$&&delete e[t],r}finally{v.shift()}}function i(e,n,i,a){"string"==typeof i&&(a=i,i=null);var o,s,u,l=[],c=Rt(e,t,a);for(s=0,o=c.length;o>s;s++){if(u=c[s],"string"!=typeof u)throw Ci("itkn","Incorrect injection token! Expected service name as string, got {0}",u);l.push(i&&i.hasOwnProperty(u)?i[u]:r(u))}return Qr(e)&&(e=e[o]),e.apply(n,l)}function a(e,t,n){var r,a,o=function(){};return o.prototype=(Qr(e)?e[e.length-1]:e).prototype,r=new o,a=i(e,r,t,n),y(a)||k(a)?a:r}return{invoke:i,instantiate:a,get:r,annotate:Rt,has:function(t){return x.hasOwnProperty(t+m)||e.hasOwnProperty(t)}}}t=t===!0;var $={},m="Provider",v=[],w=new jt([],!0),x={$provide:{provider:r(i),factory:r(o),service:r(s),value:r(l),constant:r(c),decorator:f}},C=x.$injector=p(x,function(){throw Ci("unpr","Unknown provider: {0}",v.join(" <- "))}),S={},D=S.$injector=p(S,function(e){var t=C.get(e+m);return D.invoke(t.$get,t,n,e)});return a(d(e),function(e){D.invoke(e||h)}),D}function Ht(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return a(e,function(e){t||"a"!==_(e)||(t=e)}),t}function o(){var e,r=n.hash();r?(e=s.getElementById(r))?e.scrollIntoView():(e=i(s.getElementsByName(r)))?e.scrollIntoView():"top"===r&&t.scrollTo(0,0):t.scrollTo(0,0)}var s=t.document;return e&&r.$watch(function(){return n.hash()},function(){r.$evalAsync(o)}),o}]}function Lt(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Ut(e,t,r,i){function o(e){try{e.apply(null,q(arguments,1))}finally{if(v--,0===v)for(;y.length;)try{y.pop()()}catch(t){r.error(t)}}}function s(e,t){!function n(){a(x,function(e){e()}),w=t(n,e)}()}function u(){S=null,k!=l.url()&&(k=l.url(),a(D,function(e){e(l.url())}))}var l=this,c=t[0],f=e.location,d=e.history,p=e.setTimeout,$=e.clearTimeout,g={};l.isMock=!1;var v=0,y=[];l.$$completeOutstandingRequest=o,l.$$incOutstandingRequestCount=function(){v++},l.notifyWhenNoOutstandingRequests=function(e){a(x,function(e){e()}),0===v?e():y.push(e)};var w,x=[];l.addPollFn=function(e){return m(w)&&s(100,p),x.push(e),e};var k=f.href,C=t.find("base"),S=null;l.url=function(t,n){if(f!==e.location&&(f=e.location),d!==e.history&&(d=e.history),t){if(k==t)return;return k=t,i.history?n?d.replaceState(null,"",t):(d.pushState(null,"",t),C.attr("href",C.attr("href"))):(S=t,n?f.replace(t):f.href=t),l}return S||f.href.replace(/%27/g,"'")};var D=[],A=!1;l.onUrlChange=function(t){return A||(i.history&&qr(e).on("popstate",u),i.hashchange?qr(e).on("hashchange",u):l.addPollFn(u),A=!0),D.push(t),t},l.$$checkUrlChange=u,l.baseHref=function(){var e=C.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var E={},T="",M=l.baseHref();l.cookies=function(e,t){var i,a,o,s,u;if(!e){if(c.cookie!==T)for(T=c.cookie,a=T.split("; "),E={},s=0;s<a.length;s++)o=a[s],u=o.indexOf("="),u>0&&(e=decodeURIComponent(o.substring(0,u)),E[e]===n&&(E[e]=decodeURIComponent(o.substring(u+1))));return E}t===n?c.cookie=encodeURIComponent(e)+"=;path="+M+";expires=Thu, 01 Jan 1970 00:00:00 GMT":b(t)&&(i=(c.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+M).length+1,i>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},l.defer=function(e,t){var n;return v++,n=p(function(){delete g[n],o(e)},t||0),g[n]=!0,n},l.defer.cancel=function(e){return g[e]?(delete g[e],$(e),o(h),!0):!1}}function Bt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new Ut(e,r,t,n)}]}function zt(){this.$get=function(){function e(e,n){function i(e){e!=d&&(p?p==e&&(p=e.n):p=e,a(e.n,e.p),a(e,d),d=e,d.n=null)}function a(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var o=0,s=f({},n,{id:e}),u={},l=n&&n.capacity||Number.MAX_VALUE,c={},d=null,p=null;return t[e]={put:function(e,t){if(l<Number.MAX_VALUE){var n=c[e]||(c[e]={key:e});i(n)}if(!m(t))return e in u||o++,u[e]=t,o>l&&this.remove(p.key),t},get:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;i(t)}return u[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;t==d&&(d=t.p),t==p&&(p=t.n),a(t.n,t.p),delete c[e]}delete u[e],o--},removeAll:function(){u={},o=0,c={},d=p=null},destroy:function(){u=null,s=null,c=null,delete t[e]},info:function(){return f({},s,{size:o})}}}var t={};return e.info=function(){var e={};return a(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Wt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Yt(e,r){function i(e,t){var n=/^\s*([@=&])(\??)\s*(\w*)\s*$/,r={};return a(e,function(e,i){var a=e.match(n);if(!a)throw Ai("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,i,e);r[i]={attrName:a[3]||i,mode:a[1],optional:"?"===a[2]}}),r}var o={},s="Directive",l=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,c=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,d=V("ngSrc,ngSrcset,src,srcset"),m=/^(on[a-z]+|formaction)$/;this.directive=function x(t,n){return ot(t,"directive"),b(t)?(it(n,"directiveFactory"),o.hasOwnProperty(t)||(o[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var r=[];return a(o[t],function(a,o){try{var s=e.invoke(a);k(s)?s={compile:g(s)}:!s.compile&&s.link&&(s.compile=g(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",y(s.scope)&&(s.$$isolateBindings=i(s.scope,s.name)),r.push(s)}catch(u){n(u)}}),r}])),o[t].push(n)):a(t,u(x)),this},this.aHrefSanitizationWhitelist=function(e){return v(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return v(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var w=!0;this.debugInfoEnabled=function(e){return v(e)?(w=e,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,i,u,g,v,x,C,S,A,E){function T(e,t){try{e.addClass(t)}catch(n){}}function M(e,t,n,r,i){e instanceof qr||(e=qr(e)),a(e,function(t,n){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(e[n]=qr(t).wrap("<span></span>").parent()[0])});var o=V(e,t,e,n,r,i);M.$$addScopeClass(e);var s,u=null,l=e;return function(t,n,r,i,a){it(t,"scope"),u||(u=O(a)),"html"!==u&&e[0]!==s&&(l=qr(J(u,qr("<div>").append(e).html()))),s=e[0];var c=n?gi.clone.call(l):l;if(r)for(var f in r)c.data("$"+f+"Controller",r[f].instance);return M.$$addScopeInfo(c,t),n&&n(c,t),o&&o(t,c,c,i),c}}function O(e){var t=e&&e[0];return t&&"foreignobject"!==_(t)&&t.toString().match(/SVG/)?"svg":"html"}function V(e,t,r,i,a,o){function s(e,r,i,a){var o,s,u,l,c,f,d,p,g;if(h){var m=r.length;for(g=new Array(m),c=0;c<$.length;c+=3)d=$[c],g[d]=r[d]}else g=r;for(c=0,f=$.length;f>c;)u=g[$[c++]],o=$[c++],s=$[c++],o?(o.scope?(l=e.$new(),M.$$addScopeInfo(qr(u),l)):l=e,p=o.transcludeOnThisElement?N(e,o.transclude,a,o.elementTranscludeOnThisElement):!o.templateOnThisElement&&a?a:!a&&t?N(e,t):null,o(s,l,u,i,p)):s&&s(e,u.childNodes,n,a)}for(var u,l,c,f,d,p,h,$=[],g=0;g<e.length;g++)u=new at,l=I(e[g],[],u,0===g?i:n,a),c=l.length?H(l,e[g],u,t,r,null,[],[],o):null,c&&c.scope&&M.$$addScopeClass(u.$$element),d=c&&c.terminal||!(f=e[g].childNodes)||!f.length?null:V(f,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),(c||d)&&($.push(g,c,d),p=!0,h=h||c),o=null;return p?s:null}function N(e,t,n,r){var i=function(i,a,o,s){var u=!1;i||(i=e.$new(),i.$$transcluded=!0,u=!0);var l=t(i,a,o,n,s);return u&&!r&&l.on("$destroy",function(){i.$destroy()}),l};return i}function I(e,t,n,r,i){var a,o,s=e.nodeType,u=n.$attr;switch(s){case 1:U(t,Kt(_(e)),"E",r,i);for(var f,d,p,h,$,g,m=e.attributes,v=0,y=m&&m.length;y>v;v++){var w=!1,x=!1;if(f=m[v],!Rr||Rr>=8||f.specified){d=f.name,$=Jr(f.value),h=Kt(d),(g=lt.test(h))&&(d=nt(h.substr(6),"-"));var k=h.replace(/(Start|End)$/,"");B(k)&&h===k+"Start"&&(w=d,x=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),p=Kt(d.toLowerCase()),u[p]=d,(g||!n.hasOwnProperty(p))&&(n[p]=$,_t(e,p)&&(n[p]=!0)),Z(e,t,$,p,g),U(t,p,"A",r,i,w,x)}}if(o=e.className,b(o)&&""!==o)for(;a=c.exec(o);)p=Kt(a[2]),U(t,p,"C",r,i)&&(n[p]=Jr(a[3])),o=o.substr(a.index+a[0].length);break;case 3:Q(t,e.nodeValue);break;case 8:try{a=l.exec(e.nodeValue),a&&(p=Kt(a[1]),U(t,p,"M",r,i)&&(n[p]=Jr(a[2])))}catch(C){}}return t.sort(K),t}function j(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Ai("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1==e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return qr(r)}function R(e,t,n){return function(r,i,a,o,s){return i=j(i[0],t,n),e(r,i,a,o,s)}}function H(e,o,s,u,l,c,f,d,p){function h(e,t,n,r){e&&(n&&(e=R(e,n,r)),e.require=C.require,e.directiveName=S,(_===C||C.$$isolateScope)&&(e=tt(e,{isolateScope:!0})),f.push(e)),t&&(n&&(t=R(t,n,r)),t.require=C.require,t.directiveName=S,(_===C||C.$$isolateScope)&&(t=tt(t,{isolateScope:!0})),d.push(t))}function $(e,t,n,r){var i,o="data",s=!1;if(b(t)){for(;"^"==(i=t.charAt(0))||"?"==i;)t=t.substr(1),"^"==i&&(o="inheritedData"),s=s||"?"==i;if(i=null,r&&"data"===o&&(i=r[t])&&(i=i.instance),i=i||n[o]("$"+t+"Controller"),!i&&!s)throw Ai("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i}return Qr(t)&&(i=[],a(t,function(t){i.push($(e,t,n,r))})),i}function m(e,t,i,u,l){function c(e,t,r){var i;return D(e)||(r=t,t=e,e=n),B&&(i=w),r||(r=B?C.parent():C),l(e,t,i,r)}var p,h,m,y,b,w,k,C,S;if(o===i?(S=s,C=s.$$element):(C=qr(i),S=new at(C,s)),_&&(b=t.$new(!0)),k=l&&c,V&&(x={},w={},a(V,function(e){var n,r={$scope:e===_||e.$$isolateScope?b:t,$element:C,$attrs:S,$transclude:k};y=e.controller,"@"==y&&(y=S[e.name]),n=v(y,r,!0,e.controllerAs),w[e.name]=n,B||C.data("$"+e.name+"Controller",n.instance),x[e.name]=n})),_){M.$$addScopeInfo(C,b,!0,!(N&&(N===_||N===_.$$originalDirective))),M.$$addScopeClass(C,!0);var A=x&&x[_.name],E=b;A&&A.identifier&&_.bindToController===!0&&(E=A.instance),a(b.$$isolateBindings=_.$$isolateBindings,function(e,n){var i,a,o,s,u=e.attrName,l=e.optional,c=e.mode;switch(c){case"@":S.$observe(u,function(e){E[n]=e}),S.$$observers[u].$$scope=t,S[u]&&(E[n]=r(S[u])(t));break;case"=":if(l&&!S[u])return;a=g(S[u]),s=a.literal?P:function(e,t){return e===t||e!==e&&t!==t},o=a.assign||function(){throw i=E[n]=a(t),Ai("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",S[u],_.name)},i=E[n]=a(t);var f=function(e){return s(e,E[n])||(s(e,i)?o(t,e=E[n]):E[n]=e),i=e};f.$stateful=!0;var d=t.$watch(g(S[u],f),null,a.literal);b.$on("$destroy",d);break;case"&":a=g(S[u]),E[n]=function(e){return a(t,e)}}})}for(x&&(a(x,function(e){e()}),x=null),p=0,h=f.length;h>p;p++)m=f[p],rt(m,m.isolateScope?b:t,C,S,m.require&&$(m.directiveName,m.require,C,w),k);var T=t;for(_&&(_.template||null===_.templateUrl)&&(T=b),e&&e(T,i.childNodes,n,l),p=d.length-1;p>=0;p--)m=d[p],rt(m,m.isolateScope?b:t,C,S,m.require&&$(m.directiveName,m.require,C,w),k)}p=p||{};for(var w,x,C,S,A,E,T,O=-Number.MAX_VALUE,V=p.controllerDirectives,_=p.newIsolateScopeDirective,N=p.templateDirective,F=p.nonTlbTranscludeDirective,H=!1,U=!1,B=p.hasElementTranscludeDirective,K=s.$$element=qr(o),Q=c,X=u,Z=0,nt=e.length;nt>Z;Z++){C=e[Z];var it=C.$$start,ot=C.$$end;if(it&&(K=j(o,it,ot)),A=n,O>C.priority)break;if((T=C.scope)&&(C.templateUrl||(y(T)?(G("new/isolated scope",_||w,C,K),_=C):G("new/isolated scope",_,C,K)),w=w||C),S=C.name,!C.templateUrl&&C.controller&&(T=C.controller,V=V||{},G("'"+S+"' controller",V[S],C,K),V[S]=C),(T=C.transclude)&&(H=!0,C.$$tlb||(G("transclusion",F,C,K),F=C),"element"==T?(B=!0,O=C.priority,A=K,K=s.$$element=qr(t.createComment(" "+S+": "+s[S]+" ")),o=K[0],et(l,q(A),o),X=M(A,u,O,Q&&Q.name,{nonTlbTranscludeDirective:F})):(A=qr(yt(o)).contents(),K.empty(),X=M(A,u))),C.template)if(U=!0,G("template",N,C,K),N=C,T=k(C.template)?C.template(K,s):C.template,T=ut(T),C.replace){if(Q=C,A=ht(T)?[]:qr(J(C.templateNamespace,Jr(T))),o=A[0],1!=A.length||1!==o.nodeType)throw Ai("tplrt","Template for directive '{0}' must have exactly one root element. {1}",S,"");et(l,K,o);var st={$attr:{}},lt=I(o,[],st),ct=e.splice(Z+1,e.length-(Z+1));_&&L(lt),e=e.concat(lt).concat(ct),W(s,st),nt=e.length}else K.html(T);if(C.templateUrl)U=!0,G("template",N,C,K),N=C,C.replace&&(Q=C),m=Y(e.splice(Z,e.length-Z),K,s,l,H&&X,f,d,{controllerDirectives:V,newIsolateScopeDirective:_,templateDirective:N,nonTlbTranscludeDirective:F}),nt=e.length;else if(C.compile)try{E=C.compile(K,s,X),k(E)?h(null,E,it,ot):E&&h(E.pre,E.post,it,ot)}catch(ft){i(ft,z(K))}C.terminal&&(m.terminal=!0,O=Math.max(O,C.priority))}return m.scope=w&&w.scope===!0,m.transcludeOnThisElement=H,m.elementTranscludeOnThisElement=B,m.templateOnThisElement=U,m.transclude=X,p.hasElementTranscludeDirective=B,m}function L(e){for(var t=0,n=e.length;n>t;t++)e[t]=p(e[t],{$$isolateScope:!0})}function U(t,r,a,u,l,c,f){if(r===l)return null;var d=null;if(o.hasOwnProperty(r))for(var h,$=e.get(r+s),g=0,m=$.length;m>g;g++)try{h=$[g],(u===n||u>h.priority)&&-1!=h.restrict.indexOf(a)&&(c&&(h=p(h,{$$start:c,$$end:f})),t.push(h),d=h)}catch(v){i(v)}return d}function B(t){if(o.hasOwnProperty(t))for(var n,r=e.get(t+s),i=0,a=r.length;a>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function W(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;a(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),a(t,function(t,a){"class"==a?(T(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==a?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==a.charAt(0)||e.hasOwnProperty(a)||(e[a]=t,r[a]=n[a])})}function Y(e,t,n,r,i,o,s,l){var c,d,p=[],h=t[0],$=e.shift(),g=f({},$,{templateUrl:null,transclude:null,replace:null,$$originalDirective:$}),m=k($.templateUrl)?$.templateUrl(t,n):$.templateUrl,v=$.templateNamespace;return t.empty(),u(S.getTrustedResourceUrl(m)).then(function(u){var f,b,w,x;if(u=ut(u),$.replace){if(w=ht(u)?[]:qr(J(v,Jr(u))),f=w[0],1!=w.length||1!==f.nodeType)throw Ai("tplrt","Template for directive '{0}' must have exactly one root element. {1}",$.name,m);b={$attr:{}},et(r,t,f);var k=I(f,[],b);y($.scope)&&L(k),e=k.concat(e),W(n,b)}else f=h,t.html(u);for(e.unshift(g),c=H(e,f,n,i,t,$,o,s,l),a(r,function(e,n){e==f&&(r[n]=t[0])}),d=V(t[0].childNodes,i);p.length;){var C=p.shift(),S=p.shift(),D=p.shift(),A=p.shift(),E=t[0];if(S!==h){var M=S.className;l.hasElementTranscludeDirective&&$.replace||(E=yt(f)),et(D,qr(S),E),T(qr(E),M)}x=c.transcludeOnThisElement?N(C,c.transclude,A):A,c(d,C,E,r,x)}p=null}),function(e,t,n,r,i){var a=i;p?(p.push(t),p.push(n),p.push(r),p.push(a)):(c.transcludeOnThisElement&&(a=N(t,c.transclude,i)),c(d,t,n,r,a))}}function K(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index
}function G(e,t,n,r){if(t)throw Ai("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,z(r))}function Q(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&M.$$addBindingClass(t),function(e,t){var i=t.parent();r||M.$$addBindingClass(i),M.$$addBindingInfo(i,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function J(e,n){switch(e=Nr(e||"html")){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function X(e,t){if("srcdoc"==t)return S.HTML;var n=_(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?S.RESOURCE_URL:void 0}function Z(e,t,n,i,a){var o=r(n,!0);if(o){if("multiple"===i&&"select"===_(e))throw Ai("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",z(e));t.push({priority:100,compile:function(){return{pre:function(t,n,s){var u=s.$$observers||(s.$$observers={});if(m.test(i))throw Ai("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");o=r(s[i],!0,X(e,i),d[i]||a),o&&(s[i]=o(t),(u[i]||(u[i]=[])).$$inter=!0,(s.$$observers&&s.$$observers[i].$$scope||t).$watch(o,function(e,t){"class"===i&&e!=t?s.$updateClass(e,t):s.$set(i,e)}))}}}})}}function et(e,n,r){var i,a,o=n[0],s=n.length,u=o.parentNode;if(e)for(i=0,a=e.length;a>i;i++)if(e[i]==o){e[i++]=r;for(var l=i,c=l+s-1,f=e.length;f>l;l++,c++)f>c?e[l]=e[c]:delete e[l];e.length-=s-1,e.context===o&&(e.context=r);break}u&&u.replaceChild(r,o);var d=t.createDocumentFragment();d.appendChild(o),qr(r).data(qr(o).data()),Hr?(Gr=!0,Hr.cleanData([o])):delete qr.cache[o[qr.expando]];for(var p=1,h=n.length;h>p;p++){var $=n[p];qr($).remove(),d.appendChild($),delete n[p]}n[0]=r,n.length=1}function tt(e,t){return f(function(){return e.apply(null,arguments)},e,t)}function rt(e,t,n,r,a,o){try{e(t,n,r,a,o)}catch(s){i(s,z(n))}}var at=function(e,t){if(t){var n,r,i,a=Object.keys(t);for(n=0,r=a.length;r>n;n++)i=a[n],this[i]=t[i]}else this.$attr={};this.$$element=e};at.prototype={$normalize:Kt,$addClass:function(e){e&&e.length>0&&A.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&A.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Gt(e,t);n&&n.length&&A.addClass(this.$$element,n);var r=Gt(t,e);r&&r.length&&A.removeClass(this.$$element,r)},$set:function(e,t,r,o){var s,u=this.$$element[0],l=_t(u,e),c=Nt(u,e),f=e;l?(this.$$element.prop(e,t),o=l):c&&(this[c]=t,f=c),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=nt(e,"-"))),s=_(this.$$element),("a"===s&&"href"===e||"img"===s&&"src"===e)&&(this[e]=t=E(t,"src"===e)),r!==!1&&(null===t||t===n?this.$$element.removeAttr(o):this.$$element.attr(o,t));var d=this.$$observers;d&&a(d[f],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers={}),i=r[e]||(r[e]=[]);return i.push(t),x.$evalAsync(function(){i.$$inter||t(n[e])}),function(){F(i,t)}}};var ot=r.startSymbol(),st=r.endSymbol(),ut="{{"==ot||"}}"==st?$:function(e){return e.replace(/\{\{/g,ot).replace(/}}/g,st)},lt=/^ngAttr[A-Z]/;return M.$$addBindingInfo=w?function(e,t){var n=e.data("$binding")||[];Qr(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:h,M.$$addBindingClass=w?function(e){T(e,"ng-binding")}:h,M.$$addScopeInfo=w?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:h,M.$$addScopeClass=w?function(e,t){T(e,t?"ng-isolate-scope":"ng-scope")}:h,M}]}function Kt(e){return pt(e.replace(Ei,""))}function Gt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o==i[s])continue e;n+=(n.length>0?" ":"")+o}return n}function Qt(){var e={},t=!1,i=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){ot(t,"controller"),y(t)?f(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(a,o){function s(e,t,n,i){if(!e||!y(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,u,l,c){var d,p,h,$;if(l=l===!0,c&&b(c)&&($=c),b(r)&&(p=r.match(i),h=p[1],$=$||p[3],r=e.hasOwnProperty(h)?e[h]:st(u.$scope,h,!0)||(t?st(o,h,!0):n),at(r,h,!0)),l){var g=function(){};return g.prototype=(Qr(r)?r[r.length-1]:r).prototype,d=new g,$&&s(u,$,d,h||r.name),f(function(){return a.invoke(r,d,u,h),d},{instance:d,identifier:$})}return d=a.instantiate(r,u,h),$&&s(u,$,d,h||r.name),d}}]}function Jt(){this.$get=["$window",function(e){return qr(e.document)}]}function Xt(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function Zt(e){var t,n,r,i={};return e?(a(e.split("\n"),function(e){r=e.indexOf(":"),t=Nr(Jr(e.substr(0,r))),n=Jr(e.substr(r+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}function en(e){var t=y(e)?e:n;return function(n){return t||(t=Zt(e)),n?t[Nr(n)]||null:t}}function tn(e,t,n){return k(n)?n(e,t):(a(n,function(n){e=n(e,t)}),e)}function nn(e){return e>=200&&300>e}function rn(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,r=/^\)\]\}',?\n/,i={"Content-Type":"application/json;charset=utf-8"},o=this.defaults={transformResponse:[function(n){return b(n)&&(n=n.replace(r,""),e.test(n)&&t.test(n)&&(n=B(n))),n}],transformRequest:[function(e){return!y(e)||A(e)||E(e)?e:U(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:j(i),put:j(i),patch:j(i)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},u=!1;this.useApplyAsync=function(e){return v(e)?(u=!!e,this):u};var l=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,r,i,c,d){function p(e){function t(e){var t=f({},e,{data:tn(e.data,e.headers,i.transformResponse)});return nn(e.status)?t:c.reject(t)}function r(e){function t(e){var t;a(e,function(n,r){k(n)&&(t=n(),null!=t?e[r]=t:delete e[r])})}var n,r,i,s=o.headers,u=f({},e.headers);s=f({},s.common,s[Nr(e.method)]);e:for(n in s){r=Nr(n);for(i in u)if(Nr(i)===r)continue e;u[n]=s[n]}return t(u),u}var i={method:"get",transformRequest:o.transformRequest,transformResponse:o.transformResponse},s=r(e);f(i,e),i.headers=s,i.method=Ir(i.method);var u=function(e){s=e.headers;var n=tn(e.data,en(s),e.transformRequest);return m(n)&&a(s,function(e,t){"content-type"===Nr(t)&&delete s[t]}),m(e.withCredentials)&&!m(o.withCredentials)&&(e.withCredentials=o.withCredentials),g(e,n,s).then(t,t)},l=[u,n],d=c.when(i);for(a(S,function(e){(e.request||e.requestError)&&l.unshift(e.request,e.requestError),(e.response||e.responseError)&&l.push(e.response,e.responseError)});l.length;){var p=l.shift(),h=l.shift();d=d.then(p,h)}return d.success=function(e){return d.then(function(t){e(t.data,t.status,t.headers,i)}),d},d.error=function(e){return d.then(null,function(t){e(t.data,t.status,t.headers,i)}),d},d}function h(){a(arguments,function(e){p[e]=function(t,n){return p(f(n||{},{method:e,url:t}))}})}function $(){a(arguments,function(e){p[e]=function(t,n,r){return p(f(r||{},{method:e,url:t,data:n}))}})}function g(r,a,s){function l(e,t,n,r){function a(){f(t,e,n,r)}h&&(nn(e)?h.put(x,[e,t,Zt(n),r]):h.remove(x)),u?i.$applyAsync(a):(a(),i.$$phase||i.$apply())}function f(e,t,n,i){t=Math.max(t,0),(nn(t)?g.resolve:g.reject)({data:e,status:t,headers:en(n),config:r,statusText:i})}function d(){var e=p.pendingRequests.indexOf(r);-1!==e&&p.pendingRequests.splice(e,1)}var h,$,g=c.defer(),b=g.promise,x=w(r.url,r.params);if(p.pendingRequests.push(r),b.then(d,d),!r.cache&&!o.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(h=y(r.cache)?r.cache:y(o.cache)?o.cache:C),h)if($=h.get(x),v($)){if(M($))return $.then(d,d),$;Qr($)?f($[1],$[0],j($[2]),$[3]):f($,200,{},"OK")}else h.put(x,b);if(m($)){var k=Gn(r.url)?t.cookies()[r.xsrfCookieName||o.xsrfCookieName]:n;k&&(s[r.xsrfHeaderName||o.xsrfHeaderName]=k),e(r.method,x,a,l,s,r.timeout,r.withCredentials,r.responseType)}return b}function w(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||m(e)||(Qr(e)||(e=[e]),a(e,function(e){y(e)&&(e=x(e)?e.toISOString():U(e)),n.push(Q(t)+"="+Q(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var C=r("$http"),S=[];return a(l,function(e){S.unshift(b(e)?d.get(e):d.invoke(e))}),p.pendingRequests=[],h("get","delete","head","jsonp"),$("post","put","patch"),p.defaults=o,p}]}function an(t){if(8>=Rr&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!e.XMLHttpRequest))return new e.ActiveXObject("Microsoft.XMLHTTP");if(e.XMLHttpRequest)return new e.XMLHttpRequest;throw r("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function on(){this.$get=["$browser","$window","$document",function(e,t,n){return sn(e,an,e.defer,t.angular.callbacks,n[0])}]}function sn(e,t,n,r,i){function o(e,t,n){var a=i.createElement("script"),o=null;return a.type="text/javascript",a.src=e,a.async=!0,o=function(e){oi(a,"load",o),oi(a,"error",o),i.body.removeChild(a),a=null;var s=-1,u="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},ai(a,"load",o),ai(a,"error",o),i.body.appendChild(a),o}var s=-1;return function(i,u,l,c,f,d,p,$){function g(){y=s,w&&w(),x&&x.abort()}function m(t,r,i,a,o){C&&n.cancel(C),w=x=null,0===r&&(r=i?200:"file"==Kn(u).protocol?404:0),r=1223===r?204:r,o=o||"",t(r,i,a,o),e.$$completeOutstandingRequest(h)}var y;if(e.$$incOutstandingRequestCount(),u=u||e.url(),"jsonp"==Nr(i)){var b="_"+(r.counter++).toString(36);r[b]=function(e){r[b].data=e,r[b].called=!0};var w=o(u.replace("JSON_CALLBACK","angular.callbacks."+b),b,function(e,t){m(c,e,r[b].data,"",t),r[b]=h})}else{var x=t(i);if(x.open(i,u,!0),a(f,function(e,t){v(e)&&x.setRequestHeader(t,e)}),x.onreadystatechange=function(){if(x&&4==x.readyState){var e=null,t=null,n="";y!==s&&(e=x.getAllResponseHeaders(),t="response"in x?x.response:x.responseText),y===s&&10>Rr||(n=x.statusText),m(c,y||x.status,t,e,n)}},p&&(x.withCredentials=!0),$)try{x.responseType=$}catch(k){if("json"!==$)throw k}x.send(l||null)}if(d>0)var C=n(g,d);else M(d)&&d.then(g)}}function un(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function a(e){return"\\\\\\"+e}function o(a,o,d,p){function h(n){return n.replace(l,e).replace(c,t)}function $(e){try{return T(E(e))}catch(t){var n=Ti("interr","Can't interpolate: {0}\n{1}",a,t.toString());r(n)}}p=!!p;for(var g,v,y,b=0,w=[],x=[],C=a.length,S=[],D=[];C>b;){if(-1==(g=a.indexOf(e,b))||-1==(v=a.indexOf(t,g+s))){b!==C&&S.push(h(a.substring(b)));break}b!==g&&S.push(h(a.substring(b,g))),y=a.substring(g+s,v),w.push(y),x.push(n(y,$)),b=v+u,D.push(S.length),S.push("")}if(d&&S.length>1)throw Ti("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a);if(!o||w.length){var A=function(e){for(var t=0,n=w.length;n>t;t++){if(p&&m(e[t]))return;S[D[t]]=e[t]}return S.join("")},E=function(e){return d?i.getTrusted(d,e):i.valueOf(e)},T=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=U(e)}return e};return f(function(e){var t=0,n=w.length,i=new Array(n);try{for(;n>t;t++)i[t]=x[t](e);return A(i)}catch(o){var s=Ti("interr","Can't interpolate: {0}\n{1}",a,o.toString());r(s)}},{exp:a,expressions:w,$$watchDelegate:function(e,t,n){var r;return e.$watchGroup(x,function(n,i){var a=A(n);k(t)&&t.call(this,a,n!==i?r:a,e),r=a},n)}})}}var s=e.length,u=t.length,l=new RegExp(e.replace(/./g,a),"g"),c=new RegExp(t.replace(/./g,a),"g");return o.startSymbol=function(){return e},o.endSymbol=function(){return t},o}]}function ln(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function i(i,o,s,u){var l=t.setInterval,c=t.clearInterval,f=0,d=v(u)&&!u,p=(d?r:n).defer(),h=p.promise;return s=v(s)?s:0,h.then(null,null,i),h.$$intervalId=l(function(){p.notify(f++),s>0&&f>=s&&(p.resolve(f),c(h.$$intervalId),delete a[h.$$intervalId]),d||e.$apply()},o),a[h.$$intervalId]=p,h}var a={};return i.cancel=function(e){return e&&e.$$intervalId in a?(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0):!1},i}]}function cn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function fn(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=G(t[n]);return t.join("/")}function dn(e,t,n){var r=Kn(e,n);t.$$protocol=r.protocol,t.$$host=r.hostname,t.$$port=d(r.port)||Oi[r.protocol]||null}function pn(e,t,n){var r="/"!==e.charAt(0);r&&(e="/"+e);var i=Kn(e,n);t.$$path=decodeURIComponent(r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=Y(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function hn(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function $n(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function gn(e){return e.substr(0,$n(e).lastIndexOf("/")+1)}function mn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function vn(e,t){this.$$html5=!0,t=t||"";var r=gn(e);dn(e,this,e),this.$$parse=function(t){var n=hn(r,t);if(!b(n))throw Vi("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,r);pn(n,this,e),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=K(this.$$search),t=this.$$hash?"#"+G(this.$$hash):"";this.$$url=fn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,a){if(a&&"#"===a[0])return this.hash(a.slice(1)),!0;var o,s,u;return(o=hn(e,i))!==n?(s=o,u=(o=hn(t,o))!==n?r+(hn("/",o)||o):e+s):(o=hn(r,i))!==n?u=r+o:r==i+"/"&&(u=r),u&&this.$$parse(u),!!u}}function yn(e,t){var n=gn(e);dn(e,this,e),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var a=hn(e,r)||hn(n,r),o="#"==a.charAt(0)?hn(t,a):this.$$html5?a:"";if(!b(o))throw Vi("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',r,t);pn(o,this,e),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var n=K(this.$$search),r=this.$$hash?"#"+G(this.$$hash):"";this.$$url=fn(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t){return $n(e)==$n(t)?(this.$$parse(t),!0):!1}}function bn(e,t){this.$$html5=!0,yn.apply(this,arguments);var n=gn(e);this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,o;return e==$n(r)?a=r:(o=hn(n,r))?a=e+t+o:n===r+"/"&&(a=n),a&&this.$$parse(a),!!a},this.$$compose=function(){var n=K(this.$$search),r=this.$$hash?"#"+G(this.$$hash):"";this.$$url=fn(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+t+this.$$url}}function wn(e){return function(){return this[e]}}function xn(e,t){return function(n){return m(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function kn(){var t="",n=!1;this.hashPrefix=function(e){return v(e)?(t=e,this):t},this.html5Mode=function(e){return v(e)?(n=e,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(r,i,a,o){function s(e){r.$broadcast("$locationChangeSuccess",u.absUrl(),e)}var u,l,c,f=i.baseHref(),d=i.url();if(n){if(!f)throw Vi("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=mn(d)+(f||"/"),l=a.history?vn:bn}else c=$n(d),l=yn;u=new l(c,"#"+t),u.$$parseLinkUrl(d,d);var p=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var n=qr(t.target);"a"!==_(n[0]);)if(n[0]===o[0]||!(n=n.parent())[0])return;var a=n.prop("href"),s=n.attr("href")||n.attr("xlink:href");y(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=Kn(a.animVal).href),p.test(a)||!a||n.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(a,s)&&(t.preventDefault(),u.absUrl()!=i.url()&&(r.$apply(),e.angular["ff-684208-preventDefault"]=!0))}}),u.absUrl()!=d&&i.url(u.absUrl(),!0),i.onUrlChange(function(e){u.absUrl()!=e&&(r.$evalAsync(function(){var t=u.absUrl();u.$$parse(e),r.$broadcast("$locationChangeStart",e,t).defaultPrevented?(u.$$parse(t),i.url(t)):s(t)}),r.$$phase||r.$digest())});var h=0;return r.$watch(function(){var e=i.url(),t=u.$$replace;return h&&e==u.absUrl()||(h++,r.$evalAsync(function(){r.$broadcast("$locationChangeStart",u.absUrl(),e).defaultPrevented?u.$$parse(e):(i.url(u.absUrl(),t),s(e))})),u.$$replace=!1,h}),u}]}function Cn(){var e=!0,t=this;this.debugEnabled=function(t){return v(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||h,o=!1;try{o=!!i.apply}catch(s){}return o?function(){var e=[];return a(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Sn(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw _i("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Dn(e,t){if(e){if(e.constructor===e)throw _i("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw _i("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw _i("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw _i("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function An(e,t){if(e){if(e.constructor===e)throw _i("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Ni||e===Fi||e===Ii)throw _i("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function En(e){return e.constant}function Tn(e,t,n,r){Dn(e,r);for(var i,a=t.split("."),o=0;a.length>1;o++){i=Sn(a.shift(),r);var s=Dn(e[i],r);s||(s={},e[i]=s),e=s}return i=Sn(a.shift(),r),Dn(e[i],r),e[i]=n,n}function Mn(e,t,r,i,a,o){return Sn(e,o),Sn(t,o),Sn(r,o),Sn(i,o),Sn(a,o),function(o,s){var u=s&&s.hasOwnProperty(e)?s:o;return null==u?u:(u=u[e],t?null==u?n:(u=u[t],r?null==u?n:(u=u[r],i?null==u?n:(u=u[i],a?null==u?n:u=u[a]:u):u):u):u)}}function On(e,t,r){var i=Li[e];if(i)return i;var o=e.split("."),s=o.length;if(t.csp)i=6>s?Mn(o[0],o[1],o[2],o[3],o[4],r):function(e,t){var i,a=0;do i=Mn(o[a++],o[a++],o[a++],o[a++],o[a++],r)(e,t),t=n,e=i;while(s>a);return i};else{var u="";a(o,function(e,t){Sn(e,r),u+="if(s == null) return undefined;\ns="+(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e+";\n"}),u+="return s;";var l=new Function("s","l",u);l.toString=g(u),i=l}return i.sharedGetter=!0,i.assign=function(t,n){return Tn(t,e,n,e)},Li[e]=i,i}function Vn(){var e=lt(),t={csp:!1};this.$get=["$filter","$sniffer",function(n,r){function i(e){var t=e;return e.sharedGetter&&(t=function(t,n){return e(t,n)},t.literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}function o(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n];i.constant||(i.inputs?o(i.inputs,t):-1===t.indexOf(i)&&t.push(i))}return t}function s(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=e.valueOf(),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function u(e,t,n,r){var i,a=r.$$inputs||(r.$$inputs=o(r.inputs,[]));if(1===a.length){var u=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,u)||(i=r(e),u=t&&t.valueOf()),i},t,n)}for(var l=[],c=0,f=a.length;f>c;c++)l[c]=s;return e.$watch(function(e){for(var t=!1,n=0,o=a.length;o>n;n++){var u=a[n](e);(t||(t=!s(u,l[n])))&&(l[n]=u&&u.valueOf())}return t&&(i=r(e)),i},t,n)}function l(e,t,n,r){var i,a;return i=e.$watch(function(e){return r(e)},function(e,n,r){a=e,k(t)&&t.apply(this,arguments),v(e)&&r.$$postDigest(function(){v(a)&&i()})},n)}function c(e,t,n,r){function i(e){var t=!0;return a(e,function(e){v(e)||(t=!1)}),t}var o;return o=e.$watch(function(e){return r(e)},function(e,n,r){k(t)&&t.call(this,e,n,r),i(e)&&r.$$postDigest(function(){i(e)&&o()})},n)}function f(e,t,n,r){var i;return i=e.$watch(function(e){return r(e)},function(){k(t)&&t.apply(this,arguments),i()},n)}function d(e,t){if(!t)return e;var n=function(n,r){var i=e(n,r),a=t(i,n,r);return v(i)?a:i};return e.$$watchDelegate&&e.$$watchDelegate!==u?n.$$watchDelegate=e.$$watchDelegate:t.$stateful||(n.$$watchDelegate=u,n.inputs=[e]),n}return t.csp=r.csp,function(r,a){var o,s,p;switch(typeof r){case"string":if(p=r=r.trim(),o=e[p],!o){":"===r.charAt(0)&&":"===r.charAt(1)&&(s=!0,r=r.substring(2));var $=new qi(t),g=new Hi($,n,t);o=g.parse(r),o.constant?o.$$watchDelegate=f:s?(o=i(o),o.$$watchDelegate=o.literal?c:l):o.inputs&&(o.$$watchDelegate=u),e[p]=o}return d(o,a);case"function":return d(r,a);default:return d(h,a)}}}]}function _n(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Fn(function(t){e.$evalAsync(t)},t)}]}function Nn(){this.$get=["$browser","$exceptionHandler",function(e,t){return Fn(function(t){e.defer(t)},t)}]}function Fn(e,t){function i(e,t,n){function r(t){return function(n){i||(i=!0,t.call(e,n))}}var i=!1;return[r(t),r(n)]}function o(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function u(e){var r,i,a;a=e.pending,e.processScheduled=!1,e.pending=n;for(var o=0,s=a.length;s>o;++o){i=a[o][0],r=a[o][e.status];try{k(r)?i.resolve(r(e.value)):1===e.status?i.resolve(e.value):i.reject(e.value)}catch(u){i.reject(u),t(u)}}}function l(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){u(t)}))}function c(){this.promise=new o,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function f(e){var t=new c,n=0,r=Qr(e)?[]:{};return a(e,function(e,i){n++,m(e).then(function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}var d=r("$q",TypeError),p=function(){return new c};o.prototype={then:function(e,t,n){var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return g(t,!0,e)},function(t){return g(t,!1,e)},t)}},c.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(d("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(y(e)||k(e))&&(n=e&&e.then),k(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(a){r[1](a),t(a)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,a=0,o=r.length;o>a;a++){i=r[a][0],e=r[a][3];try{i.notify(k(e)?e(n):n)}catch(s){t(s)}}})}};var h=function(e){var t=new c;return t.reject(e),t.promise},$=function(e,t){var n=new c;return t?n.resolve(e):n.reject(e),n.promise},g=function(e,t,n){var r=null;try{k(n)&&(r=n())}catch(i){return $(i,!1)}return M(r)?r.then(function(){return $(e,t)},function(e){return $(e,!1)}):$(e,t)},m=function(e,t,n,r){var i=new c;return i.resolve(e),i.promise.then(t,n,r)},v=function b(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!k(e))throw d("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof b))return new b(e);var r=new c;return e(t,n),r.promise};return v.defer=p,v.reject=h,v.when=m,v.all=f,v}function In(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=i,a}]}function jn(){var e=10,t=r("$rootScope"),n=null,o=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,s,u,c){function f(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null,this.$$applyAsyncQueue=[]}function d(e){if(b.$$phase)throw t("inprog","{0} already in progress",b.$$phase);b.$$phase=e}function p(){b.$$phase=null}function $(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function g(){}function m(){for(var e=b.$$applyAsyncQueue;e.length;)try{e.shift()()}catch(t){s(t)}o=null}function v(){null===o&&(o=c.defer(function(){b.$apply(m)}))}f.prototype={constructor:f,$new:function(e){var t;return e?(t=new f,t.$root=this.$root,t.$$asyncQueue=this.$$asyncQueue,t.$$postDigestQueue=this.$$postDigestQueue):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=l(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),t=new this.$$ChildScope),t["this"]=t,t.$parent=this,t.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=t,this.$$childTail=t):this.$$childHead=this.$$childTail=t,t},$watch:function(e,t,r){var i=u(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,r,i);var a=this,o=a.$$watchers,s={fn:t,last:g,get:i,exp:e,eq:!!r};return n=null,k(t)||(s.fn=h),o||(o=a.$$watchers=[]),o.unshift(s),function(){F(o,s),n=null}},$watchGroup:function(e,t){function n(){u=!1,l?(l=!1,t(i,i,s)):t(i,r,s)}var r=new Array(e.length),i=new Array(e.length),o=[],s=this,u=!1,l=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(i,i,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,a){i[0]=e,r[0]=n,t(i,e===n?i:r,a)}):(a(e,function(e,t){var a=s.$watch(e,function(e,a){i[t]=e,r[t]=a,u||(u=!0,s.$evalAsync(n))});o.push(a)}),function(){for(;o.length;)o.shift()()})},$watchCollection:function(e,t){function n(e){a=e;var t,n,r,s,u;if(y(a))if(i(a)){o!==p&&(o=p,g=o.length=0,f++),t=a.length,g!==t&&(f++,o.length=g=t);for(var l=0;t>l;l++)u=o[l],s=a[l],r=u!==u&&s!==s,r||u===s||(f++,o[l]=s)}else{o!==h&&(o=h={},g=0,f++),t=0;for(n in a)a.hasOwnProperty(n)&&(t++,s=a[n],u=o[n],n in o?(r=u!==u&&s!==s,r||u===s||(f++,o[n]=s)):(g++,o[n]=s,f++));if(g>t){f++;for(n in o)a.hasOwnProperty(n)||(g--,delete o[n])}}else o!==a&&(o=a,f++);return f}function r(){if($?($=!1,t(a,a,l)):t(a,s,l),c)if(y(a))if(i(a)){s=new Array(a.length);for(var e=0;e<a.length;e++)s[e]=a[e]}else{s={};for(var n in a)Fr.call(a,n)&&(s[n]=a[n])}else s=a}n.$stateful=!0;var a,o,s,l=this,c=t.length>1,f=0,d=u(e,n),p=[],h={},$=!0,g=0;return this.$watch(d,r)},$digest:function(){var r,i,a,u,l,f,h,$,v,y,w,x=this.$$asyncQueue,C=this.$$postDigestQueue,S=e,D=this,A=[];d("$digest"),c.$$checkUrlChange(),this===b&&null!==o&&(c.defer.cancel(o),m()),n=null;do{for(f=!1,$=D;x.length;){try{w=x.shift(),w.scope.$eval(w.expression)}catch(E){s(E)}n=null}e:do{if(u=$.$$watchers)for(l=u.length;l--;)try{if(r=u[l])if((i=r.get($))===(a=r.last)||(r.eq?P(i,a):"number"==typeof i&&"number"==typeof a&&isNaN(i)&&isNaN(a))){if(r===n){f=!1;break e}}else f=!0,n=r,r.last=r.eq?I(i,null):i,r.fn(i,a===g?i:a,$),5>S&&(v=4-S,A[v]||(A[v]=[]),y=k(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,y+="; newVal: "+U(i)+"; oldVal: "+U(a),A[v].push(y))}catch(E){s(E)}if(!(h=$.$$childHead||$!==D&&$.$$nextSibling))for(;$!==D&&!(h=$.$$nextSibling);)$=$.$parent}while($=h);if((f||x.length)&&!S--)throw p(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,U(A))}while(f||x.length);for(p();C.length;)try{C.shift()()}catch(E){s(E)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==b){for(var t in this.$$listenerCount)$(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=h,this.$on=this.$watch=this.$watchGroup=function(){return h}}}},$eval:function(e,t){return u(e)(this,t)},$evalAsync:function(e){b.$$phase||b.$$asyncQueue.length||c.defer(function(){b.$$asyncQueue.length&&b.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return d("$apply"),this.$eval(e)}catch(t){s(t)}finally{p();try{b.$digest()}catch(t){throw s(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&b.$$applyAsyncQueue.push(t),v()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){n[n.indexOf(t)]=null,$(i,1,e)}},$emit:function(e){var t,n,r,i=[],a=this,o=!1,u={name:e,targetScope:a,stopPropagation:function(){o=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=R([u],arguments,1);do{for(t=a.$$listeners[e]||i,u.currentScope=a,n=0,r=t.length;r>n;n++)if(t[n])try{t[n].apply(null,l)}catch(c){s(c)}else t.splice(n,1),n--,r--;if(o)return u.currentScope=null,u;a=a.$parent}while(a);return u.currentScope=null,u},$broadcast:function(e){var t=this,n=t,r=t,i={name:e,targetScope:t,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!t.$$listenerCount[e])return i;for(var a,o,u,l=R([i],arguments,1);n=r;){for(i.currentScope=n,a=n.$$listeners[e]||[],o=0,u=a.length;u>o;o++)if(a[o])try{a[o].apply(null,l)}catch(c){s(c)}else a.splice(o,1),o--,u--;if(!(r=n.$$listenerCount[e]&&n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var b=new f;return b}]}function Pn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return v(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return v(e)?(t=e,this):t
},this.$get=function(){return function(n,r){var i,a=r?t:e;return Rr&&!(Rr>=8)||(i=Kn(n).href,""===i||i.match(a))?n:"unsafe:"+i}}}function Rn(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function qn(e){if("self"===e)return e;if(b(e)){if(e.indexOf("***")>-1)throw Ui("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Rn(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(C(e))return new RegExp("^"+e.source+"$");throw Ui("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Hn(e){var t=[];return v(e)&&a(e,function(e){t.push(qn(e))}),t}function Ln(){this.SCE_CONTEXTS=Bi;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Hn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Hn(e)),t},this.$get=["$injector",function(r){function i(e,t){return"self"===e?Gn(t):!!e.exec(t.href)}function a(n){var r,a,o=Kn(n.toString()),s=!1;for(r=0,a=e.length;a>r;r++)if(i(e[r],o)){s=!0;break}if(s)for(r=0,a=t.length;a>r;r++)if(i(t[r],o)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var r=d.hasOwnProperty(e)?d[e]:null;if(!r)throw Ui("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw Ui("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function u(e){return e instanceof f?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||t===n||""===t)return t;var r=d.hasOwnProperty(e)?d[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===Bi.RESOURCE_URL){if(a(t))return t;throw Ui("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Bi.HTML)return c(t);throw Ui("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(){throw Ui("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(c=r.get("$sanitize"));var f=o(),d={};return d[Bi.HTML]=o(f),d[Bi.CSS]=o(f),d[Bi.URL]=o(f),d[Bi.JS]=o(f),d[Bi.RESOURCE_URL]=o(d[Bi.URL]),{trustAs:s,getTrusted:l,valueOf:u}}]}function Un(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sniffer","$sceDelegate",function(t,n,r){if(e&&n.msie&&n.msieDocumentMode<8)throw Ui("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=j(Bi);i.isEnabled=function(){return e},i.trustAs=r.trustAs,i.getTrusted=r.getTrusted,i.valueOf=r.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=$),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var o=i.parseAs,s=i.getTrusted,u=i.trustAs;return a(Bi,function(e,t){var n=Nr(t);i[pt("parse_as_"+n)]=function(t){return o(e,t)},i[pt("get_trusted_"+n)]=function(t){return s(e,t)},i[pt("trust_as_"+n)]=function(t){return u(e,t)}}),i}]}function Bn(){this.$get=["$window","$document",function(e,t){var n,r,i={},a=d((/android (\d+)/.exec(Nr((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=s.documentMode,l=/^(Moz|webkit|O|ms)(?=[A-Z])/,c=s.body&&s.body.style,f=!1,p=!1;if(c){for(var h in c)if(r=l.exec(h)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),f=!!("transition"in c||n+"Transition"in c),p=!!("animation"in c||n+"Animation"in c),!a||f&&p||(f=b(s.body.style.webkitTransition),p=b(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>a||o),hashchange:"onhashchange"in e&&(!u||u>7),hasEvent:function(e){if("input"==e&&9==Rr)return!1;if(m(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:Xr(),vendorPrefix:n,transitions:f,animations:p,android:a,msie:Rr,msieDocumentMode:u}}]}function zn(){this.$get=["$templateCache","$http","$q",function(e,t,n){function r(i,a){function o(){if(s.totalPendingRequests--,!a)throw Ai("tpload","Failed to load template: {0}",i);return n.reject()}var s=r;return s.totalPendingRequests++,t.get(i,{cache:e}).then(function(t){var n=t.data;return n&&0!==n.length?(s.totalPendingRequests--,e.put(i,n),n):o()},o)}return r.totalPendingRequests=0,r}]}function Wn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return a(r,function(e){var r=Yr.element(e).data("$binding");r&&a(r,function(r){if(n){var a=new RegExp("(^|\\s)"+t+"(\\s|\\||$)");a.test(r)&&i.push(e)}else-1!=r.indexOf(t)&&i.push(e)})}),i},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a=n?"=":"*=",o="["+r[i]+"model"+a+'"'+t+'"]',s=e.querySelectorAll(o);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function Yn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function a(a,s,u){var l,c=v(u)&&!u,f=(c?r:n).defer(),d=f.promise;return l=t.defer(function(){try{f.resolve(a())}catch(t){f.reject(t),i(t)}finally{delete o[d.$$timeoutId]}c||e.$apply()},s),d.$$timeoutId=l,o[l]=f,d}var o={};return a.cancel=function(e){return e&&e.$$timeoutId in o?(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},a}]}function Kn(e){var t=e;return Rr&&(zi.setAttribute("href",t),t=zi.href),zi.setAttribute("href",t),{href:zi.href,protocol:zi.protocol?zi.protocol.replace(/:$/,""):"",host:zi.host,search:zi.search?zi.search.replace(/^\?/,""):"",hash:zi.hash?zi.hash.replace(/^#/,""):"",hostname:zi.hostname,port:zi.port,pathname:"/"===zi.pathname.charAt(0)?zi.pathname:"/"+zi.pathname}}function Gn(e){var t=b(e)?Kn(e):e;return t.protocol===Wi.protocol&&t.host===Wi.host}function Qn(){this.$get=g(e)}function Jn(e){function t(r,i){if(y(r)){var o={};return a(r,function(e,n){o[n]=t(n,e)}),o}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Zn),t("date",cr),t("filter",Xn),t("json",fr),t("limitTo",dr),t("lowercase",Ji),t("number",er),t("orderBy",pr),t("uppercase",Xi)}function Xn(){return function(e,t,n){if(!Qr(e))return e;var r=typeof n,i=[];i.check=function(e,t){for(var n=0;n<i.length;n++)if(!i[n](e,t))return!1;return!0},"function"!==r&&(n="boolean"===r&&n?function(e,t){return Yr.equals(e,t)}:function(e,t){if(e&&t&&"object"==typeof e&&"object"==typeof t){for(var r in e)if("$"!==r.charAt(0)&&Fr.call(e,r)&&n(e[r],t[r]))return!0;return!1}return t=(""+t).toLowerCase(),(""+e).toLowerCase().indexOf(t)>-1});var a=function(e,t){if("string"==typeof t&&"!"===t.charAt(0))return!a(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return n(e,t);case"object":switch(typeof t){case"object":return n(e,t);default:for(var r in e)if("$"!==r.charAt(0)&&a(e[r],t))return!0}return!1;case"array":for(var i=0;i<e.length;i++)if(a(e[i],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var o in t)!function(e){"undefined"!=typeof t[e]&&i.push(function(n){return a("$"==e?n:n&&n[e],t[e])})}(o);break;case"function":i.push(t);break;default:return e}for(var s=[],u=0;u<e.length;u++){var l=e[u];i.check(l,u)&&s.push(l)}return s}}function Zn(e){var t=e.NUMBER_FORMATS;return function(e,n){return m(n)&&(n=t.CURRENCY_SYM),null==e?e:tr(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function er(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:tr(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function tr(e,t,n,r,i){if(!isFinite(e)||y(e))return"";var a=0>e;e=Math.abs(e);var o=e+"",s="",u=[],l=!1;if(-1!==o.indexOf("e")){var c=o.match(/([\d\.]+)e(-?)(\d+)/);c&&"-"==c[2]&&c[3]>i+1?(o="0",e=0):(s=o,l=!0)}if(l)i>0&&e>-1&&1>e&&(s=e.toFixed(i));else{var f=(o.split(Yi)[1]||"").length;m(i)&&(i=Math.min(Math.max(t.minFrac,f),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i),0===e&&(a=!1);var d=(""+e).split(Yi),p=d[0];d=d[1]||"";var h,$=0,g=t.lgSize,v=t.gSize;if(p.length>=g+v)for($=p.length-g,h=0;$>h;h++)($-h)%v===0&&0!==h&&(s+=n),s+=p.charAt(h);for(h=$;h<p.length;h++)(p.length-h)%g===0&&0!==h&&(s+=n),s+=p.charAt(h);for(;d.length<i;)d+="0";i&&"0"!==i&&(s+=r+d.substr(0,i))}return u.push(a?t.negPre:t.posPre),u.push(s),u.push(a?t.negSuf:t.posSuf),u.join("")}function nr(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function rr(e,t,n,r){return n=n||0,function(i){var a=i["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),nr(a,t,r)}}function ir(e,t){return function(n,r){var i=n["get"+e](),a=Ir(t?"SHORT"+e:e);return r[a][i]}}function ar(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=nr(Math[t>0?"floor":"ceil"](t/60),2)+nr(Math.abs(t%60),2)}function or(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function sr(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function ur(e){return function(t){var n=or(t.getFullYear()),r=sr(t),i=+r-+n,a=1+Math.round(i/6048e5);return nr(a,e)}}function lr(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function cr(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,a=0,o=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=d(t[9]+t[10]),a=d(t[9]+t[11])),o.call(r,d(t[1]),d(t[2])-1,d(t[3]));var u=d(t[4]||0)-i,l=d(t[5]||0)-a,c=d(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,u,l,c,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,s,u="",l=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,b(n)&&(n=Qi.test(n)?d(n):t(n)),w(n)&&(n=new Date(n)),!x(n))return n;for(;r;)s=Gi.exec(r),s?(l=R(l,s,1),r=l.pop()):(l.push(r),r=null);return i&&"UTC"===i&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),a(l,function(t){o=Ki[t],u+=o?o(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function fr(){return function(e){return U(e,!0)}}function dr(){return function(e,t){if(w(e)&&(e=e.toString()),!Qr(e)&&!b(e))return e;if(t=1/0===Math.abs(Number(t))?Number(t):d(t),b(e))return t?t>=0?e.slice(0,t):e.slice(t,e.length):"";var n,r,i=[];for(t>e.length?t=e.length:t<-e.length&&(t=-e.length),t>0?(n=0,r=t):(n=e.length+t,r=e.length);r>n;n++)i.push(e[n]);return i}}function pr(e){return function(t,n,r){function a(e,t){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(0!==i)return i}return 0}function o(e,t){return t?function(t,n){return e(n,t)}:e}function s(e,t){var n=typeof e,r=typeof t;return n==r?(x(e)&&x(t)&&(e=e.valueOf(),t=t.valueOf()),"string"==n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):r>n?-1:1}if(!i(t))return t;if(!n)return t;n=Qr(n)?n:[n],n=N(n,function(t){var n=!1,r=t||$;if(b(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),r=e(t),r.constant)){var i=r();return o(function(e,t){return s(e[i],t[i])},n)}return o(function(e,t){return s(r(e),r(t))},n)});for(var u=[],l=0;l<t.length;l++)u.push(t[l]);return u.sort(o(a,r))}}function hr(e){return k(e)&&(e={link:e}),e.restrict=e.restrict||"AC",g(e)}function $r(e,t,r,i){var o=this,s=e.parent().controller("form")||ta,u=[];o.$error={},o.$$success={},o.$pending=n,o.$name=t.name||t.ngForm,o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,s.$addControl(o),e.addClass(wa),o.$rollbackViewValue=function(){a(u,function(e){e.$rollbackViewValue()})},o.$commitViewValue=function(){a(u,function(e){e.$commitViewValue()})},o.$addControl=function(e){ot(e.$name,"input"),u.push(e),e.$name&&(o[e.$name]=e)},o.$removeControl=function(e){e.$name&&o[e.$name]===e&&delete o[e.$name],a(o.$pending,function(t,n){o.$setValidity(n,null,e)}),a(o.$error,function(t,n){o.$setValidity(n,null,e)}),F(u,e)},Tr({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(F(r,n),0===r.length&&delete e[t])},parentForm:s,$animate:i}),o.$setDirty=function(){i.removeClass(e,wa),i.addClass(e,xa),o.$dirty=!0,o.$pristine=!1,s.$setDirty()},o.$setPristine=function(){i.setClass(e,wa,xa+" "+na),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,a(u,function(e){e.$setPristine()})},o.$setSubmitted=function(){i.addClass(e,na),o.$submitted=!0,s.$setSubmitted()}}function gr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function mr(e,t,n,r,i,a){vr(e,t,n,r,i,a),gr(r)}function vr(e,t,n,r,i,a){var o=(t.prop(_r),t[0].placeholder),s={},u=Nr(t[0].type);if(!i.android){var l=!1;t.on("compositionstart",function(){l=!0}),t.on("compositionend",function(){l=!1,c()})}var c=function(e){if(!l){var i=t.val(),a=e&&e.type;if(Rr&&"input"===(e||s).type&&t[0].placeholder!==o)return void(o=t[0].placeholder);"password"===u||n.ngTrim&&"false"===n.ngTrim||(i=Jr(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,a)}};if(i.hasEvent("input"))t.on("input",c);else{var f,d=function(e){f||(f=a.defer(function(){c(e),f=null}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||d(e)}),i.hasEvent("paste")&&t.on("paste cut",d)}t.on("change",c),r.$render=function(){t.val(r.$isEmpty(r.$modelValue)?"":r.$viewValue)}}function yr(e,t){if(x(e))return e;if(b(e)){da.lastIndex=0;var n=da.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,u=0,l=or(r),c=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds()),new Date(r,0,l.getDate()+c,a,o,s,u)}}return 0/0}function br(e,t){return function(n,r){var i,o;if(x(n))return n;if(b(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),oa.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},a(i,function(e,n){n<t.length&&(o[t[n]]=+e)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,o.sss||0)}return 0/0}}function wr(e,t,r,i){return function(a,o,s,u,l,c,f){function d(e){return v(e)?x(e)?e:r(e):n}xr(a,o,s,u),vr(a,o,s,u,l,c);var p=u&&u.$options&&u.$options.timezone;if(u.$$parserName=e,u.$parsers.push(function(e){if(u.$isEmpty(e))return null;if(t.test(e)){var i=u.$modelValue;if(i&&"UTC"===p){var a=6e4*i.getTimezoneOffset();i=new Date(i.getTime()+a)}var o=r(e,i);return"UTC"===p&&o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),o}return n}),u.$formatters.push(function(e){return x(e)?f("date")(e,i,p):""}),v(s.min)||s.ngMin){var h;u.$validators.min=function(e){return u.$isEmpty(e)||m(h)||r(e)>=h},s.$observe("min",function(e){h=d(e),u.$validate()})}if(v(s.max)||s.ngMax){var $;u.$validators.max=function(e){return u.$isEmpty(e)||m($)||r(e)<=$},s.$observe("max",function(e){$=d(e),u.$validate()})}}}function xr(e,t,r,i){var a=t[0],o=i.$$hasNativeValidators=y(a.validity);o&&i.$parsers.push(function(e){var r=t.prop(_r)||{};return r.badInput&&!r.typeMismatch?n:e})}function kr(e,t,r,i,a,o){if(xr(e,t,r,i),vr(e,t,r,i,a,o),i.$$parserName="number",i.$parsers.push(function(e){return i.$isEmpty(e)?null:la.test(e)?parseFloat(e):n}),i.$formatters.push(function(e){if(!i.$isEmpty(e)){if(!w(e))throw ga("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),r.min||r.ngMin){var s;i.$validators.min=function(e){return i.$isEmpty(e)||m(s)||e>=s},r.$observe("min",function(e){v(e)&&!w(e)&&(e=parseFloat(e,10)),s=w(e)&&!isNaN(e)?e:n,i.$validate()})}if(r.max||r.ngMax){var u;i.$validators.max=function(e){return i.$isEmpty(e)||m(u)||u>=e},r.$observe("max",function(e){v(e)&&!w(e)&&(e=parseFloat(e,10)),u=w(e)&&!isNaN(e)?e:n,i.$validate()})}}function Cr(e,t,n,r,i,a){vr(e,t,n,r,i,a),gr(r),r.$$parserName="url",r.$validators.url=function(e){return r.$isEmpty(e)||sa.test(e)}}function Sr(e,t,n,r,i,a){vr(e,t,n,r,i,a),gr(r),r.$$parserName="email",r.$validators.email=function(e){return r.$isEmpty(e)||ua.test(e)}}function Dr(e,t,n,r){m(n.name)&&t.attr("name",l());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function Ar(e,t,n,i,a){var o;if(v(i)){if(o=e(i),!o.constant)throw r("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(t)}return a}function Er(e,t,n,r,i,a,o,s){var u=Ar(s,e,"ngTrueValue",n.ngTrueValue,!0),l=Ar(s,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e!==u},r.$formatters.push(function(e){return P(e,u)}),r.$parsers.push(function(e){return e?u:l})}function Tr(e){function t(e,t,u){t===n?r("$pending",e,u):i("$pending",e,u),T(t)?t?(f(s.$error,e,u),c(s.$$success,e,u)):(c(s.$error,e,u),f(s.$$success,e,u)):(f(s.$error,e,u),f(s.$$success,e,u)),s.$pending?(a(Sa,!0),s.$valid=s.$invalid=n,o("",null)):(a(Sa,!1),s.$valid=Mr(s.$error),s.$invalid=!s.$valid,o("",s.$valid));var l;l=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,o(e,l),d.$setValidity(e,l,s)}function r(e,t,n){s[e]||(s[e]={}),c(s[e],t,n)}function i(e,t,r){s[e]&&f(s[e],t,r),Mr(s[e])&&(s[e]=n)}function a(e,t){t&&!l[e]?(p.addClass(u,e),l[e]=!0):!t&&l[e]&&(p.removeClass(u,e),l[e]=!1)}function o(e,t){e=e?"-"+nt(e,"-"):"",a(ya+e,t===!0),a(ba+e,t===!1)}var s=e.ctrl,u=e.$element,l={},c=e.set,f=e.unset,d=e.parentForm,p=e.$animate;s.$setValidity=t,o("",!0)}function Mr(e){if(e)for(var t in e)return!1;return!0}function Or(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i==t[a])continue e;n.push(i)}return n}function i(e){if(Qr(e))return e;if(b(e))return e.split(" ");if(y(e)){var t=[];return a(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(o,s,u){function l(e){var t=f(e,1);u.$addClass(t)}function c(e){var t=f(e,-1);u.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||{},r=[];return a(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function d(e,t){var i=r(t,e),a=r(e,t);i=f(i,1),a=f(a,-1),i&&i.length&&n.addClass(s,i),a&&a.length&&n.removeClass(s,a)}function p(e){if(t===!0||o.$index%2===t){var n=i(e||[]);if(h){if(!P(e,h)){var r=i(h);d(r,n)}}else l(n)}h=j(e)}var h;o.$watch(u[e],p,!0),u.$observe("class",function(){p(o.$eval(u[e]))}),"ngClass"!==e&&o.$watch("$index",function(n,r){var a=1&n;if(a!==(1&r)){var s=i(o.$eval(u[e]));a===t?l(s):c(s)}})}}}]}var Vr=/^\/(.+)\/([a-z]*)$/,_r="validity",Nr=function(e){return b(e)?e.toLowerCase():e},Fr=Object.prototype.hasOwnProperty,Ir=function(e){return b(e)?e.toUpperCase():e},jr=function(e){return b(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Pr=function(e){return b(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Nr=jr,Ir=Pr);var Rr,qr,Hr,Lr,Ur=[].slice,Br=[].push,zr=Object.prototype.toString,Wr=r("ng"),Yr=e.angular||(e.angular={}),Kr=0;Rr=d((/msie (\d+)/.exec(Nr(navigator.userAgent))||[])[1]),isNaN(Rr)&&(Rr=d((/trident\/.*; rv:(\d+)/.exec(Nr(navigator.userAgent))||[])[1])),h.$inject=[],$.$inject=[];var Gr,Qr=Array.isArray,Jr=function(e){return b(e)?e.trim():e},Xr=function(){if(v(Xr.isActive_))return Xr.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return Xr.isActive_=e},Zr=["ng-","data-ng-","ng:","x-ng-"],ei=/[A-Z]/g,ti=!1,ni={full:"1.3.0-rc.2",major:1,minor:3,dot:0,codeName:"tactile-perception"};vt.expando="ng339";var ri=vt.cache={},ii=1,ai=function(e,t,n){e.addEventListener(t,n,!1)},oi=function(e,t,n){e.removeEventListener(t,n,!1)};vt._data=function(e){return this.cache[e[this.expando]]||{}};var si=/([\:\-\_]+(.))/g,ui=/^moz([A-Z])/,li={mouseleave:"mouseout",mouseenter:"mouseover"},ci=r("jqLite"),fi=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,di=/<|&#?\w+;/,pi=/<([\w:]+)/,hi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$i={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$i.optgroup=$i.option,$i.tbody=$i.tfoot=$i.colgroup=$i.caption=$i.thead,$i.th=$i.td;var gi=vt.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),vt(e).on("load",r),this.on("DOMContentLoaded",r))},toString:function(){var e=[];return a(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return qr(e>=0?this[e]:this[this.length+e])},length:0,push:Br,sort:[].sort,splice:[].splice},mi={};a("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){mi[Nr(e)]=e});var vi={};a("input,select,option,textarea,button,form,details".split(","),function(e){vi[e]=!0});var yi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};a({data:Ct,removeData:xt},function(e,t){vt[t]=e}),a({data:Ct,inheritedData:Mt,scope:function(e){return qr.data(e,"$scope")||Mt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return qr.data(e,"$isolateScope")||qr.data(e,"$isolateScopeNoTemplate")},controller:Tt,injector:function(e){return Mt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:St,css:function(e,t,n){return t=pt(t),v(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,r){var i=Nr(t);if(mi[i]){if(!v(r))return e[t]||(e.attributes.getNamedItem(t)||h).specified?i:n;r?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(v(r))e.setAttribute(t,r);else if(e.getAttribute){var a=e.getAttribute(t,2);return null===a?n:a}},prop:function(e,t,n){return v(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(m(t)){var n=e.nodeType;return 1===n||3===n?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(m(t)){if(e.multiple&&"select"===_(e)){var n=[];return a(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return m(t)?e.innerHTML:(bt(e,!0),void(e.innerHTML=t))},empty:Ot},function(e,t){vt.prototype[t]=function(t,r){var i,a,o=this.length;if(e!==Ot&&(2==e.length&&e!==St&&e!==Tt?t:r)===n){if(y(t)){for(i=0;o>i;i++)if(e===Ct)e(this[i],t);else for(a in t)e(this[i],a,t[a]);return this}for(var s=e.$dv,u=s===n?Math.min(o,1):o,l=0;u>l;l++){var c=e(this[l],t,r);s=s?s+c:c}return s}for(i=0;o>i;i++)e(this[i],t,r);return this}}),a({removeData:xt,on:function ho(e,t,n,r){if(v(r))throw ci("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if($t(e)){var i=kt(e,!0),a=i.events,o=i.handle;o||(o=i.handle=Ft(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],u=s.length;u--;){t=s[u];var l=a[t];l||(a[t]=[],"mouseenter"===t||"mouseleave"===t?ho(e,li[t],function(e){var n=this,r=e.relatedTarget;(!r||r!==n&&!n.contains(r))&&o(e,t)}):"$destroy"!==t&&ai(e,t,o),l=a[t]),l.push(n)}}},off:wt,one:function(e,t,n){e=qr(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;bt(e),a(new vt(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return a(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(1===n||11===n){t=new vt(t);for(var r=0,i=t.length;i>r;r++){var a=t[r];e.appendChild(a)}}},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;a(new vt(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=qr(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:Vt,detach:function(e){Vt(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new vt(t);for(var i=0,a=t.length;a>i;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:At,removeClass:Dt,toggleClass:function(e,t,n){t&&a(t.split(" "),function(t){var r=n;m(r)&&(r=!St(e,t)),(r?At:Dt)(e,t)})},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:yt,triggerHandler:function(e,t,n){var r,i,o,s=t.type||t,u=kt(e),l=u&&u.events,c=l&&l[s];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:h,type:s,target:e},t.type&&(r=f(r,t)),i=j(c),o=n?[r].concat(n):[r],a(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){vt.prototype[t]=function(t,n,r){for(var i,a=0,o=this.length;o>a;a++)m(i)?(i=e(this[a],t,n,r),v(i)&&(i=qr(i))):Et(i,e(this[a],t,n,r));return v(i)?i:this},vt.prototype.bind=vt.prototype.on,vt.prototype.unbind=vt.prototype.off}),jt.prototype={put:function(e,t){this[It(e,this.nextUid)]=t},get:function(e){return this[It(e,this.nextUid)]},remove:function(e){var t=this[e=It(e,this.nextUid)];return delete this[e],t}};var bi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,wi=/,/,xi=/^\s*(_?)(\S+?)\1\s*$/,ki=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ci=r("$injector");qt.$$annotate=Rt;var Si=r("$animate"),Di=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var r=t+"-animation";if(t&&"."!=t.charAt(0))throw Si("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=r,e.factory(r,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback",function(e,t){function n(){return r||(r=e.defer(),t(function(){r.resolve(),r=null})),r.promise}var r;return{enter:function(e,t,r){return r?r.after(e):t.prepend(e),n()},leave:function(e){return e.remove(),n()},move:function(e,t,n){return this.enter(e,t,n)},addClass:function(e,t){return t=b(t)?t:Qr(t)?t.join(" "):"",a(e,function(e){At(e,t)}),n()},removeClass:function(e,t){return t=b(t)?t:Qr(t)?t.join(" "):"",a(e,function(e){Dt(e,t)}),n()},setClass:function(e,t,r){return this.addClass(e,t),this.removeClass(e,r),n()},enabled:h,cancel:h}}]}],Ai=r("$compile");Yt.$inject=["$provide","$$sanitizeUriProvider"];var Ei=/^(x[\:\-_]|data[\:\-_])/i,Ti=r("$interpolate"),Mi=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Oi={http:80,https:443,ftp:21},Vi=r("$location");bn.prototype=yn.prototype=vn.prototype={$$html5:!1,$$replace:!1,absUrl:wn("$$absUrl"),url:function(e){if(m(e))return this.$$url;var t=Mi.exec(e);return t[1]&&this.path(decodeURIComponent(t[1])),(t[2]||t[1])&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:wn("$$protocol"),host:wn("$$host"),port:wn("$$port"),path:xn("$$path",function(e){return e=e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(b(e)||w(e))e=e.toString(),this.$$search=Y(e);else{if(!y(e))throw Vi("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:m(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:xn("$$hash",function(e){return e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};var _i=r("$parse"),Ni=Function.prototype.call,Fi=Function.prototype.apply,Ii=Function.prototype.bind,ji=lt();a({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,ji[t]=e});var Pi=f(lt(),{"+":function(e,t,r,i){return r=r(e,t),i=i(e,t),v(r)?v(i)?r+i:r:v(i)?i:n},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),(v(n)?n:0)-(v(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"^":function(e,t,n,r){return n(e,t)^r(e,t)},"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"&":function(e,t,n,r){return n(e,t)&r(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),Ri={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},qi=function(e){this.options=e};qi.prototype={constructor:qi,lex:function(e){for(this.text=e,this.index=0,this.ch=n,this.tokens=[];this.index<this.text.length;)if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else if(this.isWhitespace(this.ch))this.index++;else{var t=this.ch+this.peek(),r=t+this.peek(2),i=Pi[this.ch],a=Pi[t],o=Pi[r];o?(this.tokens.push({index:this.index,text:r,fn:o}),this.index+=3):a?(this.tokens.push({index:this.index,text:t,fn:a}),this.index+=2):i?(this.tokens.push({index:this.index,text:this.ch,fn:i}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(e){return-1!==e.indexOf(this.ch)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=v(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw _i("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Nr(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}e=1*e,this.tokens.push({index:t,text:e,constant:!0,fn:function(){return e}})},readIdent:function(){for(var e,t,r,i,a=this.text,o="",s=this.index;this.index<this.text.length&&(i=this.text.charAt(this.index),"."===i||this.isIdent(i)||this.isNumber(i));)"."===i&&(e=this.index),o+=i,this.index++;if(e&&"."===o[o.length-1]&&(this.index--,o=o.slice(0,-1),e=o.lastIndexOf("."),-1===e&&(e=n)),e)for(t=this.index;t<this.text.length;){if(i=this.text.charAt(t),"("===i){r=o.substr(e-s+1),o=o.substr(0,e-s),this.index=t;break}if(!this.isWhitespace(i))break;
t++}this.tokens.push({index:s,text:o,fn:ji[o]||On(o,this.options,a)}),r&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:r}))},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var s=Ri[a];n+=s||a}i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,string:n,constant:!0,fn:function(){return n}});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var Hi=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};Hi.ZERO=f(function(){return 0},{sharedGetter:!0,constant:!0}),Hi.prototype={constructor:Hi,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var t=this.expect();e=t.fn,e||this.throwError("not a primary expression",t),t.constant&&(e.constant=!0,e.literal=!0)}for(var n,r;n=this.expect("(","[",".");)"("===n.text?(e=this.functionCall(e,r),r=null):"["===n.text?(r=e,e=this.objectIndex(e)):"."===n.text?(r=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw _i("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw _i("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){if(this.tokens.length>0){var i=this.tokens[0],a=i.text;if(a===e||a===t||a===n||a===r||!e&&!t&&!n&&!r)return i}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(e,t){return f(function(n,r){return e(n,r,t)},{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,n,r){return f(function(r,i){return t(r,i,e,n)},{constant:e.constant&&n.constant,inputs:!r&&[e,n]})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var r,i=0,a=e.length;a>i;i++)r=e[i](t,n);return r}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},filter:function(e){var t,r,i=this.expect(),a=this.$filter(i.text);if(this.peek(":"))for(t=[],r=[];this.expect(":");)t.push(this.expression());var o=[e].concat(t||[]);return f(function(i,o){var s=e(i,o);if(r){r[0]=s;for(var u=t.length;u--;)r[u+1]=t[u](i,o);return a.apply(n,r)}return a(s)},{constant:!a.$stateful&&o.every(En),inputs:!a.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),f(function(t,r){return n.assign(t,e(t,r),r)},{inputs:[n,e]})):n},ternary:function(){var e,t,n=this.logicalOR();if(t=this.expect("?")){if(e=this.assignment(),t=this.expect(":")){var r=this.assignment();return f(function(t,i){return n(t,i)?e(t,i):r(t,i)},{constant:n.constant&&e.constant&&r.constant})}this.throwError("expected :",t)}return n},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.fn,this.logicalAND(),!0);return t},logicalAND:function(){var e,t=this.equality();return(e=this.expect("&&"))&&(t=this.binaryFn(t,e.fn,this.logicalAND(),!0)),t},equality:function(){var e,t=this.relational();return(e=this.expect("==","!=","===","!=="))&&(t=this.binaryFn(t,e.fn,this.equality())),t},relational:function(){var e,t=this.additive();return(e=this.expect("<",">","<=",">="))&&(t=this.binaryFn(t,e.fn,this.relational())),t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.fn,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.fn,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(Hi.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(e){var t=this.text,n=this.expect().text,r=On(n,this.options,t);return f(function(t,n,i){return r(i||e(t,n))},{assign:function(r,i,a){var o=e(r,a);return o||e.assign(r,o={}),Tn(o,n,i,t)}})},objectIndex:function(e){var t=this.text,r=this.expression();return this.consume("]"),f(function(i,a){var o,s=e(i,a),u=r(i,a);return Sn(u,t),s?o=Dn(s[u],t):n},{assign:function(n,i,a){var o=Sn(r(n,a),t),s=Dn(e(n,a),t);return s||e.assign(n,s={}),s[o]=i}})},functionCall:function(e,t){var n=[];if(")"!==this.peekToken().text)do n.push(this.expression());while(this.expect(","));this.consume(")");var r=this.text,i=n.length?[]:null;return function(a,o){var s=t?t(a,o):a,u=e(a,o,s)||h;if(i)for(var l=n.length;l--;)i[l]=Dn(n[l](a,o),r);Dn(s,r),An(u,r);var c=u.apply?u.apply(s,i):u(i[0],i[1],i[2],i[3],i[4]);return Dn(c,r)}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var t=this.expression();e.push(t)}while(this.expect(","));return this.consume("]"),f(function(t,n){for(var r=[],i=0,a=e.length;a>i;i++)r.push(e[i](t,n));return r},{literal:!0,constant:e.every(En),inputs:e})},object:function(){var e=[],t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.expect();e.push(n.string||n.text),this.consume(":");var r=this.expression();t.push(r)}while(this.expect(","));return this.consume("}"),f(function(n,r){for(var i={},a=0,o=t.length;o>a;a++)i[e[a]]=t[a](n,r);return i},{literal:!0,constant:t.every(En),inputs:t})}};var Li=lt(),Ui=r("$sce"),Bi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ai=r("$compile"),zi=t.createElement("a"),Wi=Kn(e.location.href,!0);Jn.$inject=["$provide"],Zn.$inject=["$locale"],er.$inject=["$locale"];var Yi=".",Ki={yyyy:rr("FullYear",4),yy:rr("FullYear",2,0,!0),y:rr("FullYear",1),MMMM:ir("Month"),MMM:ir("Month",!0),MM:rr("Month",2,1),M:rr("Month",1,1),dd:rr("Date",2),d:rr("Date",1),HH:rr("Hours",2),H:rr("Hours",1),hh:rr("Hours",2,-12),h:rr("Hours",1,-12),mm:rr("Minutes",2),m:rr("Minutes",1),ss:rr("Seconds",2),s:rr("Seconds",1),sss:rr("Milliseconds",3),EEEE:ir("Day"),EEE:ir("Day",!0),a:lr,Z:ar,ww:ur(2),w:ur(1)},Gi=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Qi=/^\-?\d+$/;cr.$inject=["$locale"];var Ji=g(Nr),Xi=g(Ir);pr.$inject=["$parse"];var Zi=g({restrict:"E",compile:function(e,n){return 8>=Rr&&(n.href||n.name||n.$set("href",""),e.append(t.createComment("IE fix"))),n.href||n.xlinkHref||n.name?void 0:function(e,t){var n="[object SVGAnimatedString]"===zr.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),ea={};a(mi,function(e,t){if("multiple"!=e){var n=Kt("ng-"+t);ea[n]=function(){return{restrict:"A",priority:100,link:function(e,r,i){e.$watch(i[n],function(e){i.$set(t,!!e)})}}}}}),a(yi,function(e,t){ea[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(Vr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),a(["src","srcset","href"],function(e){var t=Kt("ng-"+e);ea[t]=function(){return{priority:99,link:function(n,r,i){var a=e,o=e;"href"===e&&"[object SVGAnimatedString]"===zr.call(r.prop("href"))&&(o="xlinkHref",i.$attr[o]="xlink:href",a=null),i.$observe(t,function(t){return t?(i.$set(o,t),void(Rr&&a&&r.prop(a,i[o]))):void("href"===e&&i.$set(o,null))})}}}});var ta={$addControl:h,$removeControl:h,$setValidity:h,$$setPending:h,$setDirty:h,$setPristine:h,$setSubmitted:h,$$clearControlValidity:h},na="ng-submitted";$r.$inject=["$element","$attrs","$scope","$animate"];var ra=function(e){return["$timeout",function(t){var r={name:"form",restrict:e?"EAC":"E",controller:$r,compile:function(){return{pre:function(e,r,i,a){if(!i.action){var o=function(t){e.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),t.preventDefault?t.preventDefault():t.returnValue=!1};ai(r[0],"submit",o),r.on("$destroy",function(){t(function(){oi(r[0],"submit",o)},0,!1)})}var s=r.parent().controller("form"),u=i.name||i.ngForm;u&&Tn(e,u,a,u),s&&r.on("$destroy",function(){s.$removeControl(a),u&&Tn(e,u,n,u),f(a,ta)})}}}};return r}]},ia=ra(),aa=ra(!0),oa=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,sa=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ua=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,la=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,ca=/^(\d{4})-(\d{2})-(\d{2})$/,fa=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d))?$/,da=/^(\d{4})-W(\d\d)$/,pa=/^(\d{4})-(\d\d)$/,ha=/^(\d\d):(\d\d)(?::(\d\d))?$/,$a=/(\s+|^)default(\s+|$)/,ga=new r("ngModel"),ma={text:mr,date:wr("date",ca,br(ca,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":wr("datetimelocal",fa,br(fa,["yyyy","MM","dd","HH","mm","ss"]),"yyyy-MM-ddTHH:mm:ss"),time:wr("time",ha,br(ha,["HH","mm","ss"]),"HH:mm:ss"),week:wr("week",da,yr,"yyyy-Www"),month:wr("month",pa,br(pa,["yyyy","MM"]),"yyyy-MM"),number:kr,url:Cr,email:Sr,radio:Dr,checkbox:Er,hidden:h,button:h,submit:h,reset:h,file:h},va=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:function(i,a,o,s){s[0]&&(ma[Nr(o.type)]||ma.text)(i,a,o,s[0],t,e,n,r)}}}],ya="ng-valid",ba="ng-invalid",wa="ng-pristine",xa="ng-dirty",ka="ng-untouched",Ca="ng-touched",Sa="ng-pending",Da=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q",function(e,t,r,i,o,s,u,l,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=r.name;var f=o(r.ngModel),d=null,p=this,$=function(){var t=f(e);return p.$options&&p.$options.getterSetter&&k(t)&&(t=t()),t},g=function(){var t;p.$options&&p.$options.getterSetter&&k(t=f(e))?t(p.$modelValue):f.assign(e,p.$modelValue)};this.$$setOptions=function(e){if(p.$options=e,!(f.assign||e&&e.getterSetter))throw ga("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,z(i))},this.$render=h,this.$isEmpty=function(e){return m(e)||""===e||null===e||e!==e};var y=i.inheritedData("$formController")||ta,b=0;i.addClass(wa).addClass(ka),Tr({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:y,$animate:s}),this.$setPristine=function(){p.$dirty=!1,p.$pristine=!0,s.removeClass(i,xa),s.addClass(i,wa)},this.$setUntouched=function(){p.$touched=!1,p.$untouched=!0,s.setClass(i,ka,Ca)},this.$setTouched=function(){p.$touched=!0,p.$untouched=!1,s.setClass(i,Ca,ka)},this.$rollbackViewValue=function(){u.cancel(d),p.$viewValue=p.$$lastCommittedViewValue,p.$render()},this.$validate=function(){w(p.$modelValue)&&isNaN(p.$modelValue)||this.$$parseAndValidate()},this.$$runValidators=function(e,t,r,i){function o(e){var t=p.$$parserName||"parse";if(e===n)l(t,null);else if(l(t,e),!e)return a(p.$validators,function(e,t){l(t,null)}),a(p.$asyncValidators,function(e,t){l(t,null)}),!1;return!0}function s(){var e=!0;return a(p.$validators,function(n,i){var a=n(t,r);e=e&&a,l(i,a)}),e?!0:(a(p.$asyncValidators,function(e,t){l(t,null)}),!1)}function u(){var e=[],i=!0;a(p.$asyncValidators,function(a,o){var s=a(t,r);if(!M(s))throw ga("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);l(o,n),e.push(s.then(function(){l(o,!0)},function(){i=!1,l(o,!1)}))}),e.length?c.all(e).then(function(){f(i)},h):f(!0)}function l(e,t){d===b&&p.$setValidity(e,t)}function f(e){d===b&&i(e)}b++;var d=b;return o(e)&&s()?void u():void f(!1)},this.$commitViewValue=function(){var e=p.$viewValue;u.cancel(d),(p.$$lastCommittedViewValue!==e||""===e&&p.$$hasNativeValidators)&&(p.$$lastCommittedViewValue=e,p.$pristine&&(p.$dirty=!0,p.$pristine=!1,s.removeClass(i,wa),s.addClass(i,xa),y.$setDirty()),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){p.$modelValue!==o&&p.$$writeModelToScope()}for(var t=!0,r=p.$$lastCommittedViewValue,i=r,a=0;a<p.$parsers.length;a++)if(i=p.$parsers[a](i),m(i)){t=!1;break}w(p.$modelValue)&&isNaN(p.$modelValue)&&(p.$modelValue=$());var o=p.$modelValue,s=p.$options&&p.$options.allowInvalid;s&&(p.$modelValue=i,e()),p.$$runValidators(t,i,r,function(t){s||(p.$modelValue=t?i:n,e())})},this.$$writeModelToScope=function(){g(p.$modelValue),a(p.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){p.$viewValue=e,(!p.$options||p.$options.updateOnDefault)&&p.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=p.$options;i&&v(i.debounce)&&(n=i.debounce,w(n)?r=n:w(n[t])?r=n[t]:w(n["default"])&&(r=n["default"])),u.cancel(d),r?d=u(function(){p.$commitViewValue()},r):l.$$phase?p.$commitViewValue():e.$apply(function(){p.$commitViewValue()})},e.$watch(function(){var e=$();if(e!==p.$modelValue){p.$modelValue=e;for(var t=p.$formatters,r=t.length,i=e;r--;)i=t[r](i);p.$viewValue!==i&&(p.$viewValue=p.$$lastCommittedViewValue=i,p.$render(),p.$$runValidators(n,e,i,h))}return e})}],Aa=function(){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Da,link:{pre:function(e,t,n,r){var i=r[0],a=r[1]||ta;i.$$setOptions(r[2]&&r[2].$options),a.$addControl(i),e.$on("$destroy",function(){a.$removeControl(i)})},post:function(e,t,n,r){var i=r[0];i.$options&&i.$options.updateOn&&t.on(i.$options.updateOn,function(e){i.$$debounceViewValueCommit(e&&e.type)}),t.on("blur",function(){i.$touched||e.$apply(function(){i.$setTouched()})})}}}},Ea=g({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Ta=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},Ma=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,a){if(a){var o,s=i.ngPattern||i.pattern;i.$observe("pattern",function(e){if(b(e)&&e.length>0&&(e=new RegExp(e)),e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,z(t));o=e||n,a.$validate()}),a.$validators.pattern=function(e){return a.$isEmpty(e)||m(o)||o.test(e)}}}}},Oa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("maxlength",function(e){i=d(e)||0,r.$validate()}),r.$validators.maxlength=function(e,t){return r.$isEmpty(e)||t.length<=i}}}}},Va=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=d(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(e)||t.length>=i}}}}},_a=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var o=t.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,u=s?Jr(o):o,l=function(e){if(!m(e)){var t=[];return e&&a(e.split(u),function(e){e&&t.push(s?Jr(e):e)}),t}};i.$parsers.push(l),i.$formatters.push(function(e){return Qr(e)?e.join(o):n}),i.$isEmpty=function(e){return!e||!e.length}}}},Na=/^(true|false|\d+)$/,Fa=function(){return{restrict:"A",priority:100,compile:function(e,t){return Na.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Ia=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var r=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=Jr(this.$options.updateOn.replace($a,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ja=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,r,i){e.$$addBindingInfo(r,i.ngBind),t.$watch(i.ngBind,function(e){r.text(e==n?"":e)})}}}}],Pa=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var a=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,a.expressions),i.$observe("ngBindTemplate",function(e){r.text(e)})}}}}],Ra=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var a=t(i.ngBindHtml),o=t(i.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(o,function(){r.html(e.getTrustedHtml(a(t))||"")})}}}}],qa=Or("",!0),Ha=Or("Odd",0),La=Or("Even",1),Ua=hr({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Ba=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],za={},Wa={blur:!0,focus:!0};a("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Kt("ng-"+e);za[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,a){var o=n(a[t]);return function(t,n){n.on(e,function(n){var i=function(){o(t,{$event:n})};Wa[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var Ya=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,u,l;n.$watch(i.ngIf,function(n){n?u||o(function(n,a){u=a,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=ut(s.clone),e.leave(l).then(function(){l=null}),s=null))})}}}],Ka=["$templateRequest","$anchorScroll","$animate","$sce",function(e,t,n,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Yr.noop,compile:function(i,a){var o=a.ngInclude||a.src,s=a.onload||"",u=a.autoscroll;return function(i,a,l,c,f){var d,p,h,$=0,g=function(){p&&(p.remove(),p=null),d&&(d.$destroy(),d=null),h&&(n.leave(h).then(function(){p=null}),p=h,h=null)};i.$watch(r.parseAsResourceUrl(o),function(r){var o=function(){!v(u)||u&&!i.$eval(u)||t()},l=++$;r?(e(r,!0).then(function(e){if(l===$){var t=i.$new();c.template=e;var u=f(t,function(e){g(),n.enter(e,null,a).then(o)});d=t,h=u,d.$emit("$includeContentLoaded",r),i.$eval(s)}},function(){l===$&&(g(),i.$emit("$includeContentError",r))}),i.$emit("$includeContentRequested",r)):(g(),c.template=null)})}}}}],Ga=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(r,i,a,o){return/SVG/.test(i[0].toString())?(i.empty(),void e(gt(o.template,t).childNodes)(r,function(e){i.append(e)},n,n,i)):(i.html(o.template),void e(i.contents())(r))}}}],Qa=hr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ja=hr({terminal:!0,priority:1e3}),Xa=["$locale","$interpolate",function(e,t){var n=/{}/g;return{restrict:"EA",link:function(r,i,o){var s=o.count,u=o.$attr.when&&i.attr(o.$attr.when),l=o.offset||0,c=r.$eval(u)||{},f={},d=t.startSymbol(),p=t.endSymbol(),h=/^when(Minus)?(.+)$/;a(o,function(e,t){h.test(t)&&(c[Nr(t.replace("when","").replace("Minus","-"))]=i.attr(o.$attr[t]))}),a(c,function(e,r){f[r]=t(e.replace(n,d+s+"-"+l+p))}),r.$watch(function(){var t=parseFloat(r.$eval(s));return isNaN(t)?"":(t in c||(t=e.pluralCat(t-l)),f[t](r))},function(e){i.text(e)})}}}],Za=["$parse","$animate",function(e,o){var s="$$NG_REMOVED",u=r("ngRepeat"),l=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},c=function(e){return e.clone[0]},f=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,d){var p=d.ngRepeat,h=t.createComment(" end ngRepeat: "+p+" "),$=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!$)throw u("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var g=$[1],m=$[2],v=$[3],y=$[4];if($=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!$)throw u("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var b=$[3]||$[1],w=$[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(v)))throw u("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var x,k,C,S,D={$id:It};return y?x=e(y):(C=function(e,t){return It(t)},S=function(e){return e}),function(e,t,r,d,$){x&&(k=function(t,n,r){return w&&(D[w]=t),D[b]=n,D.$index=r,x(e,D)});var g=lt();e.$watchCollection(m,function(r){var d,m,y,x,D,A,E,T,M,O,V,_,N=t[0],F=lt();if(v&&(e[v]=r),i(r))M=r,T=k||C;else{T=k||S,M=[];for(var I in r)r.hasOwnProperty(I)&&"$"!=I.charAt(0)&&M.push(I);M.sort()}for(x=M.length,V=new Array(x),d=0;x>d;d++)if(D=r===M?d:M[d],A=r[D],E=T(D,A,d),g[E])O=g[E],delete g[E],F[E]=O,V[d]=O;else{if(F[E])throw a(V,function(e){e&&e.scope&&(g[e.id]=e)}),u("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,E,U(A));V[d]={id:E,scope:n,clone:n},F[E]=!0}for(var j in g){if(O=g[j],_=ut(O.clone),o.leave(_),_[0].parentNode)for(d=0,m=_.length;m>d;d++)_[d][s]=!0;O.scope.$destroy()}for(d=0;x>d;d++)if(D=r===M?d:M[d],A=r[D],O=V[d],O.scope){y=N;do y=y.nextSibling;while(y&&y[s]);c(O)!=y&&o.move(ut(O.clone),null,qr(N)),N=f(O),l(O.scope,d,b,A,w,D,x)}else $(function(e,t){O.scope=t;var n=h.cloneNode(!1);e[e.length++]=n,o.enter(e,null,qr(N)),N=n,O.clone=e,F[O.id]=O,l(O.scope,d,b,A,w,D,x)});g=F})}}}}],eo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,"ng-hide")})}}}],to=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,"ng-hide")})}}}],no=hr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&a(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),ro=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var s=i.ngSwitch||i.on,u=[],l=[],c=[],f=[],d=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var r,i;for(r=0,i=c.length;i>r;++r)e.cancel(c[r]);for(c.length=0,r=0,i=f.length;i>r;++r){var s=ut(l[r].clone);f[r].$destroy();var p=c[r]=e.leave(s);p.then(d(c,r))}l.length=0,f.length=0,(u=o.cases["!"+n]||o.cases["?"])&&a(u,function(n){n.transclude(function(r,i){f.push(i);var a=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:r};l.push(o),e.enter(r,a.parent(),a)})})})}}}],io=hr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),ao=hr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),oo=hr({restrict:"EAC",link:function(e,t,n,i,a){if(!a)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",z(t));a(function(e){t.empty(),t.append(e)})}}),so=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],uo=r("ngOptions"),lo=g({restrict:"A",terminal:!0}),co=["$compile","$parse",function(e,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:h};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r,i,a=this,o={},u=s;a.databound=n.ngModel,a.init=function(e,t,n){u=e,r=t,i=n},a.addOption=function(t,n){ot(t,'"option value"'),o[t]=!0,u.$viewValue==t&&(e.val(t),i.parent()&&i.remove()),n[0].hasAttribute("selected")&&(n[0].selected=!0)},a.removeOption=function(e){this.hasOption(e)&&(delete o[e],u.$viewValue==e&&this.renderUnknownOption(e))},a.renderUnknownOption=function(t){var n="? "+It(t)+" ?";i.val(n),e.prepend(i),e.val(n),i.prop("selected",!0)},a.hasOption=function(e){return o.hasOwnProperty(e)},t.$on("$destroy",function(){a.renderUnknownOption=h})}],link:function(s,u,l,c){function f(e,t,n,r){n.$render=function(){var e=n.$viewValue;r.hasOption(e)?(S.parent()&&S.remove(),t.val(e),""===e&&h.prop("selected",!0)):m(e)&&h?t.val(""):r.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){S.parent()&&S.remove(),n.$setViewValue(t.val())})})}function d(e,t,n){var r;n.$render=function(){var e=new jt(n.$viewValue);a(t.find("option"),function(t){t.selected=v(e.get(t.value))})},e.$watch(function(){P(r,n.$viewValue)||(r=j(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];a(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function p(t,a,s){function u(){var e=!1;if(y){var n=s.$modelValue;if(D&&Qr(n)){e=new jt([]);for(var r={},i=0;i<n.length;i++)r[p]=n[i],e.put(D(t,r),n[i])}else e=new jt(n)}return e}function l(){x||(t.$$postDigest(c),x=!0)}function c(){x=!1;var e,n,r,i,l,c,f,b,S,E,T,M,O,V,_,N={"":[]},F=[""],I=s.$modelValue,j=m(t)||[],P=h?o(j):j,R={},q=u();for(T=0;S=P.length,S>T;T++){if(f=T,h){if(f=P[T],"$"===f.charAt(0))continue;R[h]=f}if(R[p]=j[f],e=$(t,R)||"",(n=N[e])||(n=N[e]=[],F.push(e)),y)M=v(q.remove(D?D(t,R):g(t,R)));else{if(D){var H={};H[p]=I,M=D(t,H)===D(t,R)}else M=I===g(t,R);q=q||M}_=d(t,R),_=v(_)?_:"",n.push({id:D?D(t,R):h?P[T]:T,label:_,selected:M})}for(y||(w||null===I?N[""].unshift({id:"",label:"",selected:!q}):q||N[""].unshift({id:"?",label:"",selected:!0})),E=0,b=F.length;b>E;E++){for(e=F[E],n=N[e],A.length<=E?(i={element:C.clone().attr("label",e),label:n.label},l=[i],A.push(l),a.append(i.element)):(l=A[E],i=l[0],i.label!=e&&i.element.attr("label",i.label=e)),O=null,T=0,S=n.length;S>T;T++)r=n[T],(c=l[T+1])?(O=c.element,c.label!==r.label&&O.text(c.label=r.label),c.id!==r.id&&O.val(c.id=r.id),O[0].selected!==r.selected&&(O.prop("selected",c.selected=r.selected),Rr&&O.prop("selected",c.selected))):(""===r.id&&w?V=w:(V=k.clone()).val(r.id).prop("selected",r.selected).attr("selected",r.selected).text(r.label),l.push(c={element:V,label:r.label,id:r.id,selected:r.selected}),O?O.after(V):i.element.append(V),O=V);for(T++;l.length>T;)l.pop().element.remove()}for(;A.length>E;)A.pop()[0].element.remove()}var f;if(!(f=b.match(i)))throw uo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",b,z(a));var d=r(f[2]||f[1]),p=f[4]||f[6],h=f[5],$=r(f[3]||""),g=r(f[2]?f[1]:p),m=r(f[7]),S=f[8],D=S?r(f[8]):null,A=[[{element:a,label:""}]];w&&(e(w)(t),w.removeClass("ng-scope"),w.remove()),a.empty(),a.on("change",function(){t.$apply(function(){var e,r,i,o,u,l,f,d,$,v=m(t)||[],b={};if(y){for(i=[],l=0,d=A.length;d>l;l++)for(e=A[l],u=1,f=e.length;f>u;u++)if((o=e[u].element)[0].selected){if(r=o.val(),h&&(b[h]=r),D)for($=0;$<v.length&&(b[p]=v[$],D(t,b)!=r);$++);else b[p]=v[r];i.push(g(t,b))}}else if(r=a.val(),"?"==r)i=n;else if(""===r)i=null;else if(D){for($=0;$<v.length;$++)if(b[p]=v[$],D(t,b)==r){i=g(t,b);break}}else b[p]=v[r],h&&(b[h]=r),i=g(t,b);s.$setViewValue(i),c()})}),s.$render=c,t.$watchCollection(m,l),t.$watchCollection(function(){var e={},n=m(t);if(n){for(var r=new Array(n.length),i=0,a=n.length;a>i;i++)e[p]=n[i],r[i]=d(t,e);return r}},l),y&&t.$watchCollection(function(){return s.$modelValue},l)}if(c[1]){for(var h,$=c[0],g=c[1],y=l.multiple,b=l.ngOptions,w=!1,x=!1,k=qr(t.createElement("option")),C=qr(t.createElement("optgroup")),S=k.clone(),D=0,A=u.children(),E=A.length;E>D;D++)if(""===A[D].value){h=w=A.eq(D);break}$.init(g,w,S),y&&(g.$isEmpty=function(e){return!e||0===e.length}),b?p(s,u,g):y?d(s,u,g):f(s,u,g,$)}}}}],fo=["$interpolate",function(e){var t={addOption:h,removeOption:h};return{restrict:"E",priority:100,compile:function(n,r){if(m(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var a="$selectController",o=n.parent(),s=o.data(a)||o.parent().data(a);s&&s.databound?n.prop("selected",!1):s=t,i?e.$watch(i,function(e,t){r.$set("value",e),t!==e&&s.removeOption(t),s.addOption(e,n)}):s.addOption(r.value,n),n.on("$destroy",function(){s.removeOption(r.value)})}}}}],po=g({restrict:"E",terminal:!1});return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(rt(),ft(Yr),void qr(t).ready(function(){X(t,Z)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(e,t,n){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var e="$$ngAnimateChildren";return function(n,r,i){var a=i.ngAnimateChildren;t.isString(a)&&0===a.length?r.data(e,!0):n.$watch(a,function(t){r.data(e,!!t)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e(function(){n.offsetWidth+1;t()})}}]).config(["$provide","$animateProvider",function(r,i){function a(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==p)return n}}function o(e){return e&&t.element(e)}function s(e){return t.element(a(e))}function u(e,t){return a(e)==a(t)}var l=t.noop,c=t.forEach,f=i.$$selectors,d=t.isArray,p=1,h="$$ngAnimateState",$="$$ngAnimateChildren",g="ng-animate",m={running:!0};r.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest",function(e,n,r,p,v,y,b,w,x){function k(e,t){var n=e.data(h)||{};return t&&(n.running=!0,n.structural=!0,e.data(h,n)),n.disabled||n.running&&n.structural}function C(e){var t,r=n.defer();return r.promise.$$cancelFn=function(){t&&t()},b.$$postDigest(function(){t=e(function(){r.resolve()})}),r.promise}function S(e,n,r){r=r||{};var i={};c(n.add,function(e){e&&e.length&&(i[e]=i[e]||0,i[e]++)}),c(n.remove,function(e){e&&e.length&&(i[e]=i[e]||0,i[e]--)});var a=[];c(r,function(e,t){c(t.split(" "),function(t){a[t]=e})});var o=[],s=[];return c(i,function(n,r){var i=t.$$hasClass(e[0],r),u=a[r]||{};0>n?(i||"addClass"==u.event)&&s.push(r):n>0&&(i&&"removeClass"!=u.event||o.push(r))}),o.length+s.length>0&&[o.join(" "),s.join(" ")]}function D(e){if(e){var t=[],n={},i=e.substr(1).split(".");(p.transitions||p.animations)&&t.push(r.get(f[""]));for(var a=0;a<i.length;a++){var o=i[a],s=f[o];s&&!n[o]&&(t.push(r.get(s)),n[o]=!0)}return t}}function A(e,t,n){function r(e,t){var n=e[t],r=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];return n||r?("leave"==t&&(r=n,n=null),b.push({event:t,fn:n}),m.push({event:t,fn:r}),!0):void 0
}function i(t,r,i){function a(e){if(r){if((r[e]||l)(),++f<u.length)return;r=null}i()}var u=[];c(t,function(e){e.fn&&u.push(e)});var f=0;c(u,function(t,i){var u=function(){a(i)};switch(t.event){case"setClass":r.push(t.fn(e,o,s,u));break;case"addClass":r.push(t.fn(e,o||n,u));break;case"removeClass":r.push(t.fn(e,s||n,u));break;default:r.push(t.fn(e,u))}}),r&&0===r.length&&i()}var a=e[0];if(a){var o,s;d(n)&&(o=n[0],s=n[1],o?s?n=o+" "+s:(n=o,t="addClass"):(n=s,t="removeClass"));var u="setClass"==t,f=u||"addClass"==t||"removeClass"==t,p=e.attr("class"),h=p+" "+n;if(F(h)){var $=l,g=[],m=[],v=l,y=[],b=[],w=(" "+h).replace(/\s+/g,".");return c(D(w),function(e){var n=r(e,t);!n&&u&&(r(e,"addClass"),r(e,"removeClass"))}),{node:a,event:t,className:n,isClassBased:f,isSetClassOperation:u,before:function(e){$=e,i(m,g,function(){$=l,e()})},after:function(e){v=e,i(b,y,function(){v=l,e()})},cancel:function(){g&&(c(g,function(e){(e||l)(!0)}),$(!0)),y&&(c(y,function(e){(e||l)(!0)}),v(!0))}}}}}function E(e,n,r,i,a,o,s){function u(t){var i="$animate:"+t;w&&w[i]&&w[i].length>0&&y(function(){r.triggerHandler(i,{event:e,className:n})})}function f(){u("before")}function d(){u("after")}function p(){u("close"),s()}function $(){$.hasBeenRun||($.hasBeenRun=!0,o())}function m(){if(!m.hasBeenRun){m.hasBeenRun=!0;var t=r.data(h);t&&(b&&b.isClassBased?M(r,n):(y(function(){var t=r.data(h)||{};N==t.index&&M(r,n,e)}),r.data(h,t))),p()}}var v=l,b=A(r,e,n);if(!b)return $(),f(),d(),m(),v;e=b.event,n=b.className;var w=t.element._data(b.node);if(w=w&&w.events,i||(i=a?a.parent():r.parent()),O(r,i))return $(),f(),d(),m(),v;var x=r.data(h)||{},k=x.active||{},C=x.totalActive||0,S=x.last,D=!1;if(C>0){var E=[];if(b.isClassBased){if("setClass"==S.event)E.push(S),M(r,n);else if(k[n]){var T=k[n];T.event==e?D=!0:(E.push(T),M(r,n))}}else if("leave"==e&&k["ng-leave"])D=!0;else{for(var V in k)E.push(k[V]);x={},M(r,!0)}E.length>0&&c(E,function(e){e.cancel()})}if(!b.isClassBased||b.isSetClassOperation||D||(D="addClass"==e==r.hasClass(n)),D)return $(),f(),d(),p(),v;k=x.active||{},C=x.totalActive||0,"leave"==e&&r.one("$destroy",function(){var e=t.element(this),n=e.data(h);if(n){var r=n.active["ng-leave"];r&&(r.cancel(),M(e,"ng-leave"))}}),r.addClass(g);var N=_++;return C++,k[n]=b,r.data(h,{last:b,active:k,index:N,totalActive:C}),f(),b.before(function(t){var i=r.data(h);t=t||!i||!i.active[n]||b.isClassBased&&i.active[n].event!=e,$(),t===!0?m():(d(),b.after(m))}),b.cancel}function T(e){var n=a(e);if(n){var r=t.isFunction(n.getElementsByClassName)?n.getElementsByClassName(g):n.querySelectorAll("."+g);c(r,function(e){e=t.element(e);var n=e.data(h);n&&n.active&&c(n.active,function(e){e.cancel()})})}}function M(e,t){if(u(e,v))m.disabled||(m.running=!1,m.structural=!1);else if(t){var n=e.data(h)||{},r=t===!0;!r&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),(r||!n.totalActive)&&(e.removeClass(g),e.removeData(h))}}function O(e,n){if(m.disabled)return!0;if(u(e,v))return m.running;var r,i,a;do{if(0===n.length)break;var o=u(n,v),s=o?m:n.data(h)||{};if(s.disabled)return!0;if(o&&(a=!0),r!==!1){var l=n.data($);t.isDefined(l)&&(r=l)}i=i||s.running||s.last&&!s.last.isClassBased}while(n=n.parent());return!a||!r&&i}v.data(h,m);var V=b.$watch(function(){return x.totalPendingRequests},function(e){0===e&&(V(),b.$$postDigest(function(){b.$$postDigest(function(){m.running=!1})}))}),_=0,N=i.classNameFilter(),F=N?function(e){return N.test(e)}:function(){return!0};return{enter:function(n,r,i){return n=t.element(n),r=o(r),i=o(i),k(n,!0),e.enter(n,r,i),C(function(e){return E("enter","ng-enter",s(n),r,i,l,e)})},leave:function(n){return n=t.element(n),T(n),k(n,!0),this.enabled(!1,n),C(function(t){return E("leave","ng-leave",s(n),null,null,function(){e.leave(n)},t)})},move:function(n,r,i){return n=t.element(n),r=o(r),i=o(i),T(n),k(n,!0),e.move(n,r,i),C(function(e){return E("move","ng-move",s(n),r,i,l,e)})},addClass:function(e,t){return this.setClass(e,t,[])},removeClass:function(e,t){return this.setClass(e,[],t)},setClass:function(n,r,i){var a="$$animateClasses";if(n=t.element(n),n=s(n),k(n))return e.setClass(n,r,i);r=d(r)?r:r.split(" "),i=d(i)?i:i.split(" ");var o=n.data(a);return o?(o.add=o.add.concat(r),o.remove=o.remove.concat(i),o.promise):(n.data(a,o={add:r,remove:i}),o.promise=C(function(t){var r=n.data(a);n.removeData(a);var i=n.data(h)||{},o=S(n,r,i.active);return o?E("setClass",o,n,null,null,function(){e.setClass(n,o[0],o[1])},t):t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)M(t);else{var n=t.data(h)||{};n.disabled=!0,t.data(h,n)}break;case 1:m.disabled=!e;break;default:e=!m.disabled}return!!e}}}]),i.register("",["$window","$sniffer","$timeout","$$animateReflow",function(r,i,o,s){function u(e,t){V&&V(),z.push(t),V=s(function(){c(z,function(e){e()}),z=[],V=null,U={}})}function f(e,n){var r=a(e);e=t.element(r),K.push(e);var i=Date.now()+n;Y>=i||(o.cancel(W),Y=i,W=o(function(){h(K),K=[]},n,!1))}function h(e){c(e,function(e){var t=e.data(R);t&&c(t.closeAnimationFns,function(e){e()})})}function $(e,t){var n=t?U[t]:null;if(!n){var i=0,a=0,o=0,s=0;c(e,function(e){if(e.nodeType==p){var t=r.getComputedStyle(e)||{},n=t[A+_];i=Math.max(g(n),i);var u=t[A+F];a=Math.max(g(u),a);{t[T+F]}s=Math.max(g(t[T+F]),s);var l=g(t[T+_]);l>0&&(l*=parseInt(t[T+I],10)||1),o=Math.max(l,o)}}),n={total:0,transitionDelay:a,transitionDuration:i,animationDelay:s,animationDuration:o},t&&(U[t]=n)}return n}function g(e){var n=0,r=t.isString(e)?e.split(/\s*,\s*/):[];return c(r,function(e){n=Math.max(parseFloat(e)||0,n)}),n}function m(e){var t=e.parent(),n=t.data(P);return n||(t.data(P,++B),n=B),n+"-"+a(e).getAttribute("class")}function v(e,t,n){var r=["ng-enter","ng-leave","ng-move"].indexOf(n)>=0,i=m(t),o=i+" "+n,s=U[o]?++U[o].total:0,u={};if(s>0){var l=n+"-stagger",c=i+" "+l,f=!U[c];f&&t.addClass(l),u=$(t,c),f&&t.removeClass(l)}t.addClass(n);var d=t.data(R)||{},p=$(t,o),h=p.transitionDuration,g=p.animationDuration;if(r&&0===h&&0===g)return t.removeClass(n),!1;var v=r&&h>0,y=g>0&&u.animationDelay>0&&0===u.animationDuration,x=d.closeAnimationFns||[];t.data(R,{stagger:u,cacheKey:o,running:d.running||0,itemIndex:s,blockTransition:v,closeAnimationFns:x});var k=a(t);return v&&b(k,!0),y&&w(k,!0),!0}function y(e,t,n,r){function i(){t.off(I,s),t.removeClass(d),t.removeClass(p),N&&o.cancel(N),S(t,n);var e=a(t);for(var r in g)e.style.removeProperty(g[r])}function s(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(q));Math.max(n-F,0)>=V&&i>=A&&r()}var u=a(t),l=t.data(R);if(-1==u.getAttribute("class").indexOf(n)||!l)return void r();l.blockTransition&&b(u,!1);var d="",p="";c(n.split(" "),function(e,t){var n=(t>0?" ":"")+e;d+=n+"-active",p+=n+"-pending"});var h="",g=[],m=l.itemIndex,v=l.stagger,y=0;if(m>0){var x=0;v.transitionDelay>0&&0===v.transitionDuration&&(x=v.transitionDelay*m);var k=0;v.animationDelay>0&&0===v.animationDuration&&(k=v.animationDelay*m,g.push(O+"animation-play-state")),y=Math.round(100*Math.max(x,k))/100}y||t.addClass(d);var C=l.cacheKey+" "+d,D=$(t,C),A=Math.max(D.transitionDuration,D.animationDuration);if(0===A)return t.removeClass(d),S(t,n),void r();var T=Math.max(D.transitionDelay,D.animationDelay),V=T*L;if(g.length>0){var _=u.getAttribute("style")||"";";"!==_.charAt(_.length-1)&&(_+=";"),u.setAttribute("style",_+" "+h)}var N,F=Date.now(),I=M+" "+E,j=(T+A)*H,P=(y+j)*L;return y>0&&(t.addClass(p),N=o(function(){N=null,t.addClass(d),t.removeClass(p),D.animationDuration>0&&w(u,!1)},y*L,!1)),t.on(I,s),l.closeAnimationFns.push(function(){i(),r()}),l.running++,f(t,P),i}function b(e,t){e.style[A+N]=t?"none":""}function w(e,t){e.style[T+j]=t?"paused":""}function x(e,t,n,r){return v(e,t,n,r)?function(e){e&&S(t,n)}:void 0}function k(e,t,n,r){return t.data(R)?y(e,t,n,r):(S(t,n),void r())}function C(e,t,n,r){var i=x(e,t,n);if(!i)return void r();var a=i;return u(t,function(){a=k(e,t,n,r)}),function(e){(a||l)(e)}}function S(e,t){e.removeClass(t);var n=e.data(R);n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData(R))}function D(e,t){var n="";return e=d(e)?e:e.split(/\s+/),c(e,function(e,r){e&&e.length>0&&(n+=(r>0?" ":"")+e+t)}),n}var A,E,T,M,O="";e.ontransitionend===n&&e.onwebkittransitionend!==n?(O="-webkit-",A="WebkitTransition",E="webkitTransitionEnd transitionend"):(A="transition",E="transitionend"),e.onanimationend===n&&e.onwebkitanimationend!==n?(O="-webkit-",T="WebkitAnimation",M="webkitAnimationEnd animationend"):(T="animation",M="animationend");var V,_="Duration",N="Property",F="Delay",I="IterationCount",j="PlayState",P="$$ngAnimateKey",R="$$ngAnimateCSS3Data",q=3,H=1.5,L=1e3,U={},B=0,z=[],W=null,Y=0,K=[];return{enter:function(e,t){return C("enter",e,"ng-enter",t)},leave:function(e,t){return C("leave",e,"ng-leave",t)},move:function(e,t){return C("move",e,"ng-move",t)},beforeSetClass:function(e,t,n,r){var i=D(n,"-remove")+" "+D(t,"-add"),a=x("setClass",e,i);return a?(u(e,r),a):void r()},beforeAddClass:function(e,t,n){var r=x("addClass",e,D(t,"-add"));return r?(u(e,n),r):void n()},beforeRemoveClass:function(e,t,n){var r=x("removeClass",e,D(t,"-remove"));return r?(u(e,n),r):void n()},setClass:function(e,t,n,r){n=D(n,"-remove"),t=D(t,"-add");var i=n+" "+t;return k("setClass",e,i,r)},addClass:function(e,t,n){return k("addClass",e,D(t,"-add"),n)},removeClass:function(e,t,n){return k("removeClass",e,D(t,"-remove"),n)}}}])}])}(window,window.angular),function(e,t){"use strict";angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.modal","mgcrea.ngStrap.aside","mgcrea.ngStrap.alert","mgcrea.ngStrap.button","mgcrea.ngStrap.select","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker","mgcrea.ngStrap.navbar","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","mgcrea.ngStrap.dropdown","mgcrea.ngStrap.typeahead","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.affix","mgcrea.ngStrap.tab","mgcrea.ngStrap.collapse"]),angular.module("mgcrea.ngStrap.affix",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.debounce"]).provider("$affix",function(){var e=this.defaults={offsetTop:"auto"};this.$get=["$window","debounce","dimensions",function(t,n,r){function i(i,s){function u(e,t,n){var r=l(),i=c();return m>=r?"top":null!==e&&r+e<=t.top?"middle":null!==v&&t.top+n+$>=i-v?"bottom":"middle"}function l(){return p[0]===t?t.pageYOffset:p[0].scrollTop}function c(){return p[0]===t?t.document.body.scrollHeight:p[0].scrollHeight}var f={},d=angular.extend({},e,s),p=d.target,h="affix affix-top affix-bottom",$=0,g=0,m=0,v=0,y=null,b=null,w=i.parent();if(d.offsetParent)if(d.offsetParent.match(/^\d+$/))for(var x=0;x<1*d.offsetParent-1;x++)w=w.parent();else w=angular.element(d.offsetParent);return f.init=function(){f.$parseOffsets(),g=r.offset(i[0]).top+$,p.on("scroll",f.checkPosition),p.on("click",f.checkPositionWithEventLoop),o.on("resize",f.$debouncedOnResize),f.checkPosition(),f.checkPositionWithEventLoop()},f.destroy=function(){p.off("scroll",f.checkPosition),p.off("click",f.checkPositionWithEventLoop),o.off("resize",f.$debouncedOnResize)},f.checkPositionWithEventLoop=function(){setTimeout(f.checkPosition,1)},f.checkPosition=function(){var e=l(),t=r.offset(i[0]),n=r.height(i[0]),o=u(b,t,n);y!==o&&(y=o,i.removeClass(h).addClass("affix"+("middle"!==o?"-"+o:"")),"top"===o?(b=null,i.css("position",d.offsetParent?"":"relative"),i.css("top","")):"bottom"===o?(b=d.offsetUnpin?-(1*d.offsetUnpin):t.top-e,i.css("position",d.offsetParent?"":"relative"),i.css("top",d.offsetParent?"":a[0].offsetHeight-v-n-g+"px")):(b=null,i.css("position","fixed"),i.css("top",$+"px")))},f.$onResize=function(){f.$parseOffsets(),f.checkPosition()},f.$debouncedOnResize=n(f.$onResize,50),f.$parseOffsets=function(){i.css("position",d.offsetParent?"":"relative"),d.offsetTop&&("auto"===d.offsetTop&&(d.offsetTop="+0"),d.offsetTop.match(/^[-+]\d+$/)?($=1*-d.offsetTop,m=d.offsetParent?r.offset(w[0]).top+1*d.offsetTop:r.offset(i[0]).top-r.css(i[0],"marginTop",!0)+1*d.offsetTop):m=1*d.offsetTop),d.offsetBottom&&(v=d.offsetParent&&d.offsetBottom.match(/^[-+]\d+$/)?c()-(r.offset(w[0]).top+r.height(w[0]))+1*d.offsetBottom+1:1*d.offsetBottom)},f.init(),f}var a=angular.element(t.document.body),o=angular.element(t);return i}]}).directive("bsAffix",["$affix","$window",function(e,t){return{restrict:"EAC",require:"^?bsAffixTarget",link:function(n,r,i,a){var o={scope:n,offsetTop:"auto",target:a?a.$element:angular.element(t)};angular.forEach(["offsetTop","offsetBottom","offsetParent","offsetUnpin"],function(e){angular.isDefined(i[e])&&(o[e]=i[e])});var s=e(r,o);n.$on("$destroy",function(){s&&s.destroy(),o=null,s=null})}}}]).directive("bsAffixTarget",function(){return{controller:["$element",function(e){this.$element=e}]}}),angular.module("mgcrea.ngStrap.aside",["mgcrea.ngStrap.modal"]).provider("$aside",function(){var e=this.defaults={animation:"am-fade-and-slide-right",prefixClass:"aside",placement:"right",template:"aside/aside.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$modal",function(t){function n(n){var r={},i=angular.extend({},e,n);return r=t(i)}return n}]}).directive("bsAside",["$window","$sce","$aside",function(e,t,n){e.requestAnimationFrame||e.setTimeout;return{restrict:"EAC",scope:!0,link:function(e,r,i){var a={scope:e,element:r,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(e){angular.isDefined(i[e])&&(a[e]=i[e])}),angular.forEach(["title","content"],function(n){i[n]&&i.$observe(n,function(r){e[n]=t.trustAsHtml(r)})}),i.bsAside&&e.$watch(i.bsAside,function(t){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var o=n(a);r.on(i.trigger||"click",o.toggle),e.$on("$destroy",function(){o&&o.destroy(),a=null,o=null})}}}]),angular.module("mgcrea.ngStrap.alert",["mgcrea.ngStrap.modal"]).provider("$alert",function(){var e=this.defaults={animation:"am-fade",prefixClass:"alert",placement:null,template:"alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1,dismissable:!0};this.$get=["$modal","$timeout",function(t,n){function r(r){var i={},a=angular.extend({},e,r);i=t(a),i.$scope.dismissable=!!a.dismissable,a.type&&(i.$scope.type=a.type);var o=i.show;return a.duration&&(i.show=function(){o(),n(function(){i.hide()},1e3*a.duration)}),i}return r}]}).directive("bsAlert",["$window","$sce","$alert",function(e,t,n){e.requestAnimationFrame||e.setTimeout;return{restrict:"EAC",scope:!0,link:function(e,r,i){var a={scope:e,element:r,show:!1};angular.forEach(["template","placement","keyboard","html","container","animation","duration","dismissable"],function(e){angular.isDefined(i[e])&&(a[e]=i[e])}),angular.forEach(["title","content","type"],function(n){i[n]&&i.$observe(n,function(r){e[n]=t.trustAsHtml(r)})}),i.bsAlert&&e.$watch(i.bsAlert,function(t){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var o=n(a);r.on(i.trigger||"click",o.toggle),e.$on("$destroy",function(){o&&o.destroy(),a=null,o=null})}}}]),angular.module("mgcrea.ngStrap.button",[]).provider("$button",function(){var e=this.defaults={activeClass:"active",toggleEvent:"click"};this.$get=function(){return{defaults:e}}}).directive("bsCheckboxGroup",function(){return{restrict:"A",require:"ngModel",compile:function(e,t){e.attr("data-toggle","buttons"),e.removeAttr("ng-model");var n=e[0].querySelectorAll('input[type="checkbox"]');angular.forEach(n,function(e){var n=angular.element(e);n.attr("bs-checkbox",""),n.attr("ng-model",t.ngModel+"."+n.attr("value"))})}}}).directive("bsCheckbox",["$button","$$rAF",function(e,t){var n=e.defaults,r=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(e,i,a,o){var s=n,u="INPUT"===i[0].nodeName,l=u?i.parent():i,c=angular.isDefined(a.trueValue)?a.trueValue:!0;r.test(a.trueValue)&&(c=e.$eval(a.trueValue));var f=angular.isDefined(a.falseValue)?a.falseValue:!1;r.test(a.falseValue)&&(f=e.$eval(a.falseValue));var d="boolean"!=typeof c||"boolean"!=typeof f;d&&(o.$parsers.push(function(e){return e?c:f}),e.$watch(a.ngModel,function(){o.$render()})),o.$render=function(){var e=angular.equals(o.$modelValue,c);t(function(){u&&(i[0].checked=e),l.toggleClass(s.activeClass,e)})},i.bind(s.toggleEvent,function(){e.$apply(function(){u||o.$setViewValue(!l.hasClass("active")),d||o.$render()})})}}}]).directive("bsRadioGroup",function(){return{restrict:"A",require:"ngModel",compile:function(e,t){e.attr("data-toggle","buttons"),e.removeAttr("ng-model");var n=e[0].querySelectorAll('input[type="radio"]');angular.forEach(n,function(e){angular.element(e).attr("bs-radio",""),angular.element(e).attr("ng-model",t.ngModel)})}}}).directive("bsRadio",["$button","$$rAF",function(e,t){var n=e.defaults,r=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(e,i,a,o){var s=n,u="INPUT"===i[0].nodeName,l=u?i.parent():i,c=r.test(a.value)?e.$eval(a.value):a.value;o.$render=function(){var e=angular.equals(o.$modelValue,c);t(function(){u&&(i[0].checked=e),l.toggleClass(s.activeClass,e)})},i.bind(s.toggleEvent,function(){e.$apply(function(){o.$setViewValue(c),o.$render()})})}}}]),angular.module("mgcrea.ngStrap.collapse",[]).provider("$collapse",function(){var e=this.defaults={animation:"am-collapse",disallowToggle:!1,activeClass:"in"},t=this.controller=function(t,n,r){var i=this;i.$options=angular.copy(e),angular.forEach(["animation","disallowToggle","activeClass"],function(e){angular.isDefined(r[e])&&(i.$options[e]=r[e])}),i.$toggles=[],i.$targets=[],i.$viewChangeListeners=[],i.$registerToggle=function(e){i.$toggles.push(e)},i.$registerTarget=function(e){i.$targets.push(e)},i.$targets.$active=0,i.$setActive=t.$setActive=function(e){i.$targets.$active=i.$options.disallowToggle?e:i.$targets.$active===e?-1:e,i.$viewChangeListeners.forEach(function(e){e()})}};this.$get=function(){var n={};return n.defaults=e,n.controller=t,n}}).directive("bsCollapse",["$window","$animate","$collapse",function(e,t,n){n.defaults;return{require:["?ngModel","bsCollapse"],controller:["$scope","$element","$attrs",n.controller],link:function(e,t,n,r){var i=r[0],a=r[1];i&&(a.$viewChangeListeners.push(function(){i.$setViewValue(a.$targets.$active)}),i.$formatters.push(function(e){return a.$setActive(1*e),e}))}}}]).directive("bsCollapseToggle",function(){return{require:["^?ngModel","^bsCollapse"],link:function(e,t,n,r){var i=(r[0],r[1]);t.attr("data-toggle","collapse"),i.$registerToggle(t),t.on("click",function(){var r=n.bsCollapseToggle||i.$toggles.indexOf(t);i.$setActive(1*r),e.$apply()})}}}).directive("bsCollapseTarget",["$animate",function(e){return{require:["^?ngModel","^bsCollapse"],link:function(t,n,r,i){function a(){var t=o.$targets.indexOf(n),r=o.$targets.$active;e[t===r?"addClass":"removeClass"](n,o.$options.activeClass)}var o=(i[0],i[1]);n.addClass("collapse"),o.$options.animation&&n.addClass(o.$options.animation),o.$registerTarget(n),o.$viewChangeListeners.push(function(){a()}),a()}}}]),angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var e=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",template:"datepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",modelDateFormat:null,dayFormat:"dd",strictFormat:!1,autoclose:!1,minDate:-1/0,maxDate:+1/0,startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$locale","dateFilter","datepickerViews","$tooltip",function(t,n,r,i,a,o,s,u){function l(t,n,r){function i(e){e.selected=o.$isSelected(e.date)}function a(){t[0].focus()}var o=u(t,angular.extend({},e,r)),l=r.scope,d=o.$options,p=o.$scope;d.startView&&(d.startView-=d.minView);var h=s(o);o.$views=h.views;var $=h.viewDate;p.$mode=d.startView,p.$iconLeft=d.iconLeft,p.$iconRight=d.iconRight;var g=o.$views[p.$mode];p.$select=function(e){o.select(e)},p.$selectPane=function(e){o.$selectPane(e)},p.$toggleMode=function(){o.setMode((p.$mode+1)%o.$views.length)},o.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())&&(o.$date=e,g.update.call(g,e)),o.$build(!0)},o.updateDisabledDates=function(e){d.disabledDateRanges=e;for(var t=0,n=p.rows.length;n>t;t++)angular.forEach(p.rows[t],o.$setDisabledEl)},o.select=function(e,t){angular.isDate(n.$dateValue)||(n.$dateValue=new Date(e)),!p.$mode||t?(n.$setViewValue(angular.copy(e)),n.$render(),d.autoclose&&!t&&o.hide(!0)):(angular.extend($,{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}),o.setMode(p.$mode-1),o.$build())},o.setMode=function(e){p.$mode=e,g=o.$views[p.$mode],o.$build()},o.$build=function(e){e===!0&&g.built||(e!==!1||g.built)&&g.build.call(g)},o.$updateSelected=function(){for(var e=0,t=p.rows.length;t>e;e++)angular.forEach(p.rows[e],i)},o.$isSelected=function(e){return g.isSelected(e)},o.$setDisabledEl=function(e){e.disabled=g.isDisabled(e.date)},o.$selectPane=function(e){var t=g.steps,n=new Date(Date.UTC($.year+(t.year||0)*e,$.month+(t.month||0)*e,$.date+(t.day||0)*e));angular.extend($,{year:n.getUTCFullYear(),month:n.getUTCMonth(),date:n.getUTCDate()}),o.$build()},o.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),f){var t=angular.element(e.target);"button"!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler("click")}},o.$onKeyDown=function(e){if(/(38|37|39|40|13)/.test(e.keyCode)&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),e.stopPropagation(),13===e.keyCode)return p.$mode?p.$apply(function(){o.setMode(p.$mode-1)}):o.hide(!0);g.onKeyDown(e),l.$digest()}};var m=o.init;o.init=function(){return c&&d.useNative?(t.prop("type","date"),void t.css("-webkit-appearance","textfield")):(f&&(t.prop("type","text"),t.attr("readonly","true"),t.on("click",a)),void m())};var v=o.destroy;o.destroy=function(){c&&d.useNative&&t.off("click",a),v()};var y=o.show;o.show=function(){y(),setTimeout(function(){o.$element.on(f?"touchstart":"mousedown",o.$onMouseDown),d.keyboard&&t.on("keydown",o.$onKeyDown)})};var b=o.hide;return o.hide=function(e){o.$element.off(f?"touchstart":"mousedown",o.$onMouseDown),d.keyboard&&t.off("keydown",o.$onKeyDown),b(e)},o}var c=(angular.element(t.document.body),/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent)),f="createTouch"in t.document&&c;return e.lang||(e.lang=a.id),l.defaults=e,l}]}).directive("bsDatepicker",["$window","$parse","$q","$locale","dateFilter","$datepicker","$dateParser","$timeout",function(e,t,n,r,i,a,o){var s=(a.defaults,/(ip(a|o)d|iphone|android)/gi.test(e.navigator.userAgent)),u=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return{restrict:"EAC",require:"ngModel",link:function(e,t,n,r){function l(e){return e&&e.length?e:null}var c={scope:e,controller:r};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","dateType","dateFormat","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled"],function(e){angular.isDefined(n[e])&&(c[e]=n[e])}),n.bsShow&&e.$watch(n.bsShow,function(e){f&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(",?(datepicker),?")),e===!0?f.show():f.hide())});var f=a(t,r,c);c=f.$options,s&&c.useNative&&(c.dateFormat="yyyy-MM-dd"),angular.forEach(["minDate","maxDate"],function(e){angular.isDefined(n[e])&&n.$observe(e,function(t){if("today"===t){var n=new Date;f.$options[e]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()+("maxDate"===e?1:0),0,0,0,"minDate"===e?0:-1)}else f.$options[e]=angular.isString(t)&&t.match(/^".+"$/)?+new Date(t.substr(1,t.length-2)):u(t)?+new Date(parseInt(t,10)):angular.isString(t)&&0===t.length?"maxDate"===e?+1/0:-1/0:+new Date(t);!isNaN(f.$options[e])&&f.$build(!1)})}),e.$watch(n.ngModel,function(){f.update(r.$dateValue)},!0),angular.isDefined(n.disabledDates)&&e.$watch(n.disabledDates,function(e,t){e=l(e),t=l(t),e!==t&&f.updateDisabledDates(e)});var d=o({format:c.dateFormat,lang:c.lang,strict:c.strictFormat});r.$parsers.unshift(function(e){if(!e)return void r.$setValidity("date",!0);var t=d.parse(e,r.$dateValue);if(!t||isNaN(t.getTime()))return void r.$setValidity("date",!1);var n=isNaN(f.$options.minDate)||t.getTime()>=f.$options.minDate,a=isNaN(f.$options.maxDate)||t.getTime()<=f.$options.maxDate,o=n&&a;return r.$setValidity("date",o),r.$setValidity("min",n),r.$setValidity("max",a),o&&(r.$dateValue=t),"string"===c.dateType?i(t,c.modelDateFormat||c.dateFormat):"number"===c.dateType?r.$dateValue.getTime():"iso"===c.dateType?r.$dateValue.toISOString():new Date(r.$dateValue)}),r.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?0/0:angular.isDate(e)?e:"string"===c.dateType?d.parse(e,null,c.modelDateFormat):new Date(e),r.$dateValue=t,r.$dateValue}),r.$render=function(){t.val(!r.$dateValue||isNaN(r.$dateValue.getTime())?"":i(r.$dateValue,c.dateFormat))},e.$on("$destroy",function(){f&&f.destroy(),c=null,f=null})}}}]).provider("datepickerViews",function(){function e(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n}function t(e,t){return(e%t+t)%t}this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$locale","$sce","dateFilter",function(n,r,i){return function(a){var o=a.$scope,s=a.$options,u=n.DATETIME_FORMATS.SHORTDAY,l=u.slice(s.startWeek).concat(u.slice(0,s.startWeek)),c=r.trustAsHtml('<th class="dow text-center">'+l.join('</th><th class="dow text-center">')+"</th>"),f=a.$date||(s.startDate?new Date(s.startDate):new Date),d={year:f.getFullYear(),month:f.getMonth(),date:f.getDate()},p=(6e4*f.getTimezoneOffset(),[{format:s.dayFormat,split:7,steps:{month:1},update:function(e,t){!this.built||t||e.getFullYear()!==d.year||e.getMonth()!==d.month?(angular.extend(d,{year:a.$date.getFullYear(),month:a.$date.getMonth(),date:a.$date.getDate()}),a.$build()):e.getDate()!==d.date&&(d.date=a.$date.getDate(),a.$updateSelected())},build:function(){var n=new Date(d.year,d.month,1),r=n.getTimezoneOffset(),u=new Date(+n-864e5*t(n.getDay()-s.startWeek,7)),l=u.getTimezoneOffset(),f=(new Date).toDateString();l!==r&&(u=new Date(+u+6e4*(l-r)));for(var p,h=[],$=0;42>$;$++)p=new Date(u.getFullYear(),u.getMonth(),u.getDate()+$),h.push({date:p,isToday:p.toDateString()===f,label:i(p,this.format),selected:a.$date&&this.isSelected(p),muted:p.getMonth()!==d.month,disabled:this.isDisabled(p)});o.title=i(n,"MMMM yyyy"),o.showLabels=!0,o.labels=c,o.rows=e(h,this.split),this.built=!0},isSelected:function(e){return a.$date&&e.getFullYear()===a.$date.getFullYear()&&e.getMonth()===a.$date.getMonth()&&e.getDate()===a.$date.getDate()},isDisabled:function(e){var t=e.getTime();if(t<s.minDate||t>s.maxDate)return!0;if(-1!==s.daysOfWeekDisabled.indexOf(e.getDay()))return!0;if(s.disabledDateRanges)for(var n=0;n<s.disabledDateRanges.length;n++)if(t>=s.disabledDateRanges[n].start)return t<=s.disabledDateRanges[n].end?!0:!1;return!1},onKeyDown:function(e){var t,n=a.$date.getTime();37===e.keyCode?t=new Date(n-864e5):38===e.keyCode?t=new Date(n-6048e5):39===e.keyCode?t=new Date(n+864e5):40===e.keyCode&&(t=new Date(n+6048e5)),this.isDisabled(t)||a.select(t,!0)}},{name:"month",format:"MMM",split:4,steps:{year:1},update:function(e){this.built&&e.getFullYear()===d.year?e.getMonth()!==d.month&&(angular.extend(d,{month:a.$date.getMonth(),date:a.$date.getDate()}),a.$updateSelected()):(angular.extend(d,{year:a.$date.getFullYear(),month:a.$date.getMonth(),date:a.$date.getDate()}),a.$build())},build:function(){for(var t,n=(new Date(d.year,0,1),[]),r=0;12>r;r++)t=new Date(d.year,r,1),n.push({date:t,label:i(t,this.format),selected:a.$isSelected(t),disabled:this.isDisabled(t)});o.title=i(t,"yyyy"),o.showLabels=!1,o.rows=e(n,this.split),this.built=!0},isSelected:function(e){return a.$date&&e.getFullYear()===a.$date.getFullYear()&&e.getMonth()===a.$date.getMonth()},isDisabled:function(e){var t=+new Date(e.getFullYear(),e.getMonth()+1,0);return t<s.minDate||e.getTime()>s.maxDate},onKeyDown:function(e){var t=a.$date.getMonth(),n=new Date(a.$date);37===e.keyCode?n.setMonth(t-1):38===e.keyCode?n.setMonth(t-4):39===e.keyCode?n.setMonth(t+1):40===e.keyCode&&n.setMonth(t+4),this.isDisabled(n)||a.select(n,!0)}},{name:"year",format:"yyyy",split:4,steps:{year:12},update:function(e,t){!this.built||t||parseInt(e.getFullYear()/20,10)!==parseInt(d.year/20,10)?(angular.extend(d,{year:a.$date.getFullYear(),month:a.$date.getMonth(),date:a.$date.getDate()}),a.$build()):e.getFullYear()!==d.year&&(angular.extend(d,{year:a.$date.getFullYear(),month:a.$date.getMonth(),date:a.$date.getDate()}),a.$updateSelected())},build:function(){for(var t,n=d.year-d.year%(3*this.split),r=[],s=0;12>s;s++)t=new Date(n+s,0,1),r.push({date:t,label:i(t,this.format),selected:a.$isSelected(t),disabled:this.isDisabled(t)});o.title=r[0].label+"-"+r[r.length-1].label,o.showLabels=!1,o.rows=e(r,this.split),this.built=!0},isSelected:function(e){return a.$date&&e.getFullYear()===a.$date.getFullYear()},isDisabled:function(e){var t=+new Date(e.getFullYear()+1,0,0);return t<s.minDate||e.getTime()>s.maxDate},onKeyDown:function(e){var t=a.$date.getFullYear(),n=new Date(a.$date);37===e.keyCode?n.setYear(t-1):38===e.keyCode?n.setYear(t-4):39===e.keyCode?n.setYear(t+1):40===e.keyCode&&n.setYear(t+4),this.isDisabled(n)||a.select(n,!0)}}]);return{views:s.minView?Array.prototype.slice.call(p,s.minView):p,viewDate:d}}}]}),angular.module("mgcrea.ngStrap.dropdown",["mgcrea.ngStrap.tooltip"]).provider("$dropdown",function(){var e=this.defaults={animation:"am-fade",prefixClass:"dropdown",placement:"bottom-left",template:"dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!1,delay:0};this.$get=["$window","$rootScope","$tooltip",function(t,n,r){function i(t,i){function s(e){return e.target!==t[0]?e.target!==t[0]&&u.hide():void 0}{var u={},l=angular.extend({},e,i);u.$scope=l.scope&&l.scope.$new()||n.$new()}u=r(t,l);var c=t.parent();u.$onKeyDown=function(e){if(/(38|40)/.test(e.keyCode)){e.preventDefault(),e.stopPropagation();var t=angular.element(u.$element[0].querySelectorAll("li:not(.divider) a"));if(t.length){var n;angular.forEach(t,function(e,t){o&&o.call(e,":focus")&&(n=t)}),38===e.keyCode&&n>0?n--:40===e.keyCode&&n<t.length-1?n++:angular.isUndefined(n)&&(n=0),t.eq(n)[0].focus()}}};var f=u.show;u.show=function(){f(),setTimeout(function(){l.keyboard&&u.$element.on("keydown",u.$onKeyDown),a.on("click",s)}),c.hasClass("dropdown")&&c.addClass("open")};var d=u.hide;return u.hide=function(){l.keyboard&&u.$element.off("keydown",u.$onKeyDown),a.off("click",s),c.hasClass("dropdown")&&c.removeClass("open"),d()},u}var a=angular.element(t.document.body),o=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return i}]}).directive("bsDropdown",["$window","$sce","$dropdown",function(e,t,n){return{restrict:"EAC",scope:!0,link:function(e,t,r){var i={scope:e};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template"],function(e){angular.isDefined(r[e])&&(i[e]=r[e])}),r.bsDropdown&&e.$watch(r.bsDropdown,function(t){e.content=t},!0),r.bsShow&&e.$watch(r.bsShow,function(e){a&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(",?(dropdown),?")),e===!0?a.show():a.hide())});var a=n(t,i);e.$on("$destroy",function(){a&&a.destroy(),i=null,a=null})}}}]),angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function(){function e(){}var t=Date.prototype,n=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function(r,i){var a=function(a){function o(e){var t,n=Object.keys(h),r=[],i=[],a=e;for(t=0;t<n.length;t++)if(e.split(n[t]).length>1){var o=a.search(n[t]);e=e.split(n[t]).join(""),h[n[t]]&&(r[o]=h[n[t]])}return angular.forEach(r,function(e){e&&i.push(e)
}),i}function s(e){return e.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function u(e){var t,n=Object.keys(p),r=e;for(t=0;t<n.length;t++)r=r.split(n[t]).join("${"+t+"}");for(t=0;t<n.length;t++)r=r.split("${"+t+"}").join("("+p[n[t]]+")");return e=s(e),new RegExp("^"+r+"$",["i"])}var l,c,f=angular.extend({},n,a),d={},p={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:f.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:f.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:f.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:f.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:r.DATETIME_FORMATS.DAY.join("|"),EEE:r.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:f.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:r.DATETIME_FORMATS.MONTH.join("|"),MMM:r.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:f.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:f.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},h={sss:t.setMilliseconds,ss:t.setSeconds,s:t.setSeconds,mm:t.setMinutes,m:t.setMinutes,HH:t.setHours,H:t.setHours,hh:t.setHours,h:t.setHours,EEEE:e,EEE:e,dd:t.setDate,d:t.setDate,a:function(e){var t=this.getHours();return this.setHours(e.match(/pm/i)?t+12:t)},MMMM:function(e){return this.setMonth(r.DATETIME_FORMATS.MONTH.indexOf(e))},MMM:function(e){return this.setMonth(r.DATETIME_FORMATS.SHORTMONTH.indexOf(e))},MM:function(e){return this.setMonth(1*e-1)},M:function(e){return this.setMonth(1*e-1)},yyyy:t.setFullYear,yy:function(e){return this.setFullYear(2e3+1*e)},y:t.setFullYear};return d.init=function(){d.$format=r.DATETIME_FORMATS[f.format]||f.format,l=u(d.$format),c=o(d.$format)},d.isValid=function(e){return angular.isDate(e)?!isNaN(e.getTime()):l.test(e)},d.parse=function(e,t,n){angular.isDate(e)&&(e=i(e,n||d.$format));var r=n?u(n):l,a=n?o(n):c,s=r.exec(e);if(!s)return!1;for(var f=t||new Date(0,0,1),p=0;p<s.length-1;p++)a[p]&&a[p].call(f,s[p+1]);return f},d.init(),d};return a}]}]),angular.module("mgcrea.ngStrap.helpers.debounce",[]).constant("debounce",function(e,t,n){var r,i,a,o,s;return function(){a=this,i=arguments,o=new Date;var u=function(){var l=new Date-o;t>l?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i)))},l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i)),s}}).constant("throttle",function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:new Date,o=null,a=e.apply(r,i)};return function(){var l=new Date;s||n.leading!==!1||(s=l);var c=t-(l-s);return r=this,i=arguments,0>=c?(clearTimeout(o),o=null,s=l,a=e.apply(r,i)):o||n.trailing===!1||(o=setTimeout(u,c)),a}}),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(){var t=(angular.element,{}),n=t.nodeName=function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()};t.css=function(t,n,r){var i;return i=t.currentStyle?t.currentStyle[n]:e.getComputedStyle?e.getComputedStyle(t)[n]:t.style[n],r===!0?parseFloat(i)||0:i},t.offset=function(t){var n=t.getBoundingClientRect(),r=t.ownerDocument;return{width:n.width||t.offsetWidth,height:n.height||t.offsetHeight,top:n.top+(e.pageYOffset||r.documentElement.scrollTop)-(r.documentElement.clientTop||0),left:n.left+(e.pageXOffset||r.documentElement.scrollLeft)-(r.documentElement.clientLeft||0)}},t.position=function(e){var i,a,o={top:0,left:0};return"fixed"===t.css(e,"position")?a=e.getBoundingClientRect():(i=r(e),a=t.offset(e),a=t.offset(e),n(i,"html")||(o=t.offset(i)),o.top+=t.css(i,"borderTopWidth",!0),o.left+=t.css(i,"borderLeftWidth",!0)),{width:e.offsetWidth,height:e.offsetHeight,top:a.top-o.top-t.css(e,"marginTop",!0),left:a.left-o.left-t.css(e,"marginLeft",!0)}};var r=function(e){var r=e.ownerDocument,i=e.offsetParent||r;if(n(i,"#document"))return r.documentElement;for(;i&&!n(i,"html")&&"static"===t.css(i,"position");)i=i.offsetParent;return i||r.documentElement};return t.height=function(e,n){var r=e.offsetHeight;return n?r+=t.css(e,"marginTop",!0)+t.css(e,"marginBottom",!0):r-=t.css(e,"paddingTop",!0)+t.css(e,"paddingBottom",!0)+t.css(e,"borderTopWidth",!0)+t.css(e,"borderBottomWidth",!0),r},t.width=function(e,n){var r=e.offsetWidth;return n?r+=t.css(e,"marginLeft",!0)+t.css(e,"marginRight",!0):r-=t.css(e,"paddingLeft",!0)+t.css(e,"paddingRight",!0)+t.css(e,"borderLeftWidth",!0)+t.css(e,"borderRightWidth",!0),r},t}]),angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var e=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(t,n){function r(r,i){function a(e,t){return e.map(function(e,n){var r,i,a={};return a[c]=e,r=l(t,a),i=p(t,a)||n,{label:r,value:i}})}var o={},s=angular.extend({},e,i);o.$values=[];var u,l,c,f,d,p,h;return o.init=function(){o.$match=u=r.match(s.regexp),l=t(u[2]||u[1]),c=u[4]||u[6],f=u[5],d=t(u[3]||""),p=t(u[2]?u[1]:c),h=t(u[7])},o.valuesFn=function(e,t){return n.when(h(e,t)).then(function(t){return o.$values=t?a(t,e):{},o.$values})},o.init(),o}return r}]}),angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=i,a}]),angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var e=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",prefixEvent:"modal",placement:"top",template:"modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","$sce","dimensions",function(n,r,i,a,o,s,u,l,c){function f(t){function n(e){e.target===e.currentTarget&&("static"===o.backdrop?a.focus():a.hide())}var a={},o=a.$options=angular.extend({},e,t);a.$promise=p(o.template);var s=a.$scope=o.scope&&o.scope.$new()||r.$new();o.element||o.container||(o.container="body"),h(["title","content"],function(e){o[e]&&(s[e]=c.trustAsHtml(o[e]))}),s.$hide=function(){s.$$postDigest(function(){a.hide()})},s.$show=function(){s.$$postDigest(function(){a.show()})},s.$toggle=function(){s.$$postDigest(function(){a.toggle()})},o.contentTemplate&&(a.$promise=a.$promise.then(function(e){var n=angular.element(e);return p(o.contentTemplate).then(function(e){var r=d('[ng-bind="content"]',n[0]).removeAttr("ng-bind").html(e);return t.template||r.next().remove(),n[0].outerHTML})}));var l,f,y=angular.element('<div class="'+o.prefixClass+'-backdrop"/>');return a.$promise.then(function(e){angular.isObject(e)&&(e=e.data),o.html&&(e=e.replace(v,'ng-bind-html="')),e=$.apply(e),l=i(e),a.init()}),a.init=function(){o.show&&s.$$postDigest(function(){a.show()})},a.destroy=function(){f&&(f.remove(),f=null),y&&(y.remove(),y=null),s.$destroy()},a.show=function(){s.$emit(o.prefixEvent+".show.before",a);var e;e=angular.isElement(o.container)?o.container:o.container?d(o.container):null;var t=o.container?null:o.element;f=a.$element=l(s,function(){}),f.css({display:"block"}).addClass(o.placement),o.animation&&(o.backdrop&&y.addClass(o.backdropAnimation),f.addClass(o.animation)),o.backdrop&&u.enter(y,m,null,function(){}),u.enter(f,e,t,function(){s.$emit(o.prefixEvent+".show",a)}),s.$isShown=!0,s.$$phase||s.$root&&s.$root.$$phase||s.$digest();var r=f[0];g(function(){r.focus()}),m.addClass(o.prefixClass+"-open"),o.animation&&m.addClass(o.prefixClass+"-with-"+o.animation),o.backdrop&&(f.on("click",n),y.on("click",n)),o.keyboard&&f.on("keyup",a.$onKeyUp)},a.hide=function(){s.$emit(o.prefixEvent+".hide.before",a),u.leave(f,function(){s.$emit(o.prefixEvent+".hide",a),m.removeClass(o.prefixClass+"-open"),o.animation&&m.removeClass(o.prefixClass+"-with-"+o.animation)}),o.backdrop&&u.leave(y,function(){}),s.$isShown=!1,s.$$phase||s.$root&&s.$root.$$phase||s.$digest(),o.backdrop&&(f.off("click",n),y.off("click",n)),o.keyboard&&f.off("keyup",a.$onKeyUp)},a.toggle=function(){s.$isShown?a.hide():a.show()},a.focus=function(){f[0].focus()},a.$onKeyUp=function(e){27===e.which&&s.$isShown&&(a.hide(),e.stopPropagation())},a}function d(e,n){return angular.element((n||t).querySelectorAll(e))}function p(e){return a.when(o.get(e)||s.get(e)).then(function(t){return angular.isObject(t)?(o.put(e,t.data),t.data):t})}var h=angular.forEach,$=String.prototype.trim,g=n.requestAnimationFrame||n.setTimeout,m=angular.element(n.document.body),v=/ng-bind="/gi;return f}]}).directive("bsModal",["$window","$sce","$modal",function(e,t,n){return{restrict:"EAC",scope:!0,link:function(e,r,i){var a={scope:e,element:r,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(e){angular.isDefined(i[e])&&(a[e]=i[e])}),angular.forEach(["title","content"],function(n){i[n]&&i.$observe(n,function(r){e[n]=t.trustAsHtml(r)})}),i.bsModal&&e.$watch(i.bsModal,function(t){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var o=n(a);r.on(i.trigger||"click",o.toggle),e.$on("$destroy",function(){o&&o.destroy(),a=null,o=null})}}}]),angular.module("mgcrea.ngStrap.navbar",[]).provider("$navbar",function(){var e=this.defaults={activeClass:"active",routeAttr:"data-match-route",strict:!1};this.$get=function(){return{defaults:e}}}).directive("bsNavbar",["$window","$location","$navbar",function(e,t,n){var r=n.defaults;return{restrict:"A",link:function(e,n,i){var a=angular.copy(r);angular.forEach(Object.keys(r),function(e){angular.isDefined(i[e])&&(a[e]=i[e])}),e.$watch(function(){return t.path()},function(e){var t=n[0].querySelectorAll("li["+a.routeAttr+"]");angular.forEach(t,function(t){var n=angular.element(t),r=n.attr(a.routeAttr).replace("/","\\/");a.strict&&(r="^"+r+"$");var i=new RegExp(r,["i"]);i.test(e)?n.addClass(a.activeClass):n.removeClass(a.activeClass)})})}}}]),angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("$popover",function(){var e=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",template:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0};this.$get=["$tooltip",function(t){function n(n,r){var i=angular.extend({},e,r),a=t(n,i);return i.content&&(a.$scope.content=i.content),a}return n}]}).directive("bsPopover",["$window","$sce","$popover",function(e,t,n){var r=e.requestAnimationFrame||e.setTimeout;return{restrict:"EAC",scope:!0,link:function(e,i,a){var o={scope:e};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","customClass"],function(e){angular.isDefined(a[e])&&(o[e]=a[e])}),angular.forEach(["title","content"],function(n){a[n]&&a.$observe(n,function(i,a){e[n]=t.trustAsHtml(i),angular.isDefined(a)&&r(function(){s&&s.$applyPlacement()})})}),a.bsPopover&&e.$watch(a.bsPopover,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t,angular.isDefined(n)&&r(function(){s&&s.$applyPlacement()})},!0),a.bsShow&&e.$watch(a.bsShow,function(e){s&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(",?(popover),?")),e===!0?s.show():s.hide())});var s=n(i,o);e.$on("$destroy",function(){s&&s.destroy(),o=null,s=null})}}}]),angular.module("mgcrea.ngStrap.scrollspy",["mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions"]).provider("$scrollspy",function(){var e=this.$$spies={},n=this.defaults={debounce:150,throttle:100,offset:100};this.$get=["$window","$document","$rootScope","dimensions","debounce","throttle",function(r,i,a,o,s,u){function l(e,t){return e[0].nodeName&&e[0].nodeName.toLowerCase()===t.toLowerCase()}function c(i){var c=angular.extend({},n,i);c.element||(c.element=p);var h=l(c.element,"body"),$=h?f:c.element,g=h?"window":c.id;if(e[g])return e[g].$$count++,e[g];var m,v,y,b,w,x,k,C,S={},D=S.$trackedElements=[],A=[];return S.init=function(){this.$$count=1,b=s(this.checkPosition,c.debounce),w=u(this.checkPosition,c.throttle),$.on("click",this.checkPositionWithEventLoop),f.on("resize",b),$.on("scroll",w),x=s(this.checkOffsets,c.debounce),m=a.$on("$viewContentLoaded",x),v=a.$on("$includeContentLoaded",x),x(),g&&(e[g]=S)},S.destroy=function(){this.$$count--,this.$$count>0||($.off("click",this.checkPositionWithEventLoop),f.off("resize",b),$.off("scroll",b),m(),v(),g&&delete e[g])},S.checkPosition=function(){if(A.length){if(C=(h?r.pageYOffset:$.prop("scrollTop"))||0,k=Math.max(r.innerHeight,d.prop("clientHeight")),C<A[0].offsetTop&&y!==A[0].target)return S.$activateElement(A[0]);for(var e=A.length;e--;)if(!angular.isUndefined(A[e].offsetTop)&&null!==A[e].offsetTop&&y!==A[e].target&&!(C<A[e].offsetTop||A[e+1]&&C>A[e+1].offsetTop))return S.$activateElement(A[e])}},S.checkPositionWithEventLoop=function(){setTimeout(this.checkPosition,1)},S.$activateElement=function(e){if(y){var t=S.$getTrackedElement(y);t&&(t.source.removeClass("active"),l(t.source,"li")&&l(t.source.parent().parent(),"li")&&t.source.parent().parent().removeClass("active"))}y=e.target,e.source.addClass("active"),l(e.source,"li")&&l(e.source.parent().parent(),"li")&&e.source.parent().parent().addClass("active")},S.$getTrackedElement=function(e){return D.filter(function(t){return t.target===e})[0]},S.checkOffsets=function(){angular.forEach(D,function(e){var n=t.querySelector(e.target);e.offsetTop=n?o.offset(n).top:null,c.offset&&null!==e.offsetTop&&(e.offsetTop-=1*c.offset)}),A=D.filter(function(e){return null!==e.offsetTop}).sort(function(e,t){return e.offsetTop-t.offsetTop}),b()},S.trackElement=function(e,t){D.push({target:e,source:t})},S.untrackElement=function(e,t){for(var n,r=D.length;r--;)if(D[r].target===e&&D[r].source===t){n=r;break}D=D.splice(n,1)},S.activate=function(e){D[e].addClass("active")},S.init(),S}var f=angular.element(r),d=angular.element(i.prop("documentElement")),p=angular.element(r.document.body);return c}]}).directive("bsScrollspy",["$rootScope","debounce","dimensions","$scrollspy",function(e,t,n,r){return{restrict:"EAC",link:function(e,t,n){var i={scope:e};angular.forEach(["offset","target"],function(e){angular.isDefined(n[e])&&(i[e]=n[e])});var a=r(i);a.trackElement(i.target,t),e.$on("$destroy",function(){a&&(a.untrackElement(i.target,t),a.destroy()),i=null,a=null})}}}]).directive("bsScrollspyList",["$rootScope","debounce","dimensions","$scrollspy",function(){return{restrict:"A",compile:function(e){var t=e[0].querySelectorAll("li > a[href]");angular.forEach(t,function(e){var t=angular.element(e);t.parent().attr("bs-scrollspy","").attr("data-target",t.attr("href"))})}}}]),angular.module("mgcrea.ngStrap.select",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$select",function(){var e=this.defaults={animation:"am-fade",prefixClass:"select",prefixEvent:"$select",placement:"bottom-left",template:"select/select.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:"Choose among the following...",maxLength:3,maxLengthHtml:"selected",iconCheckmark:"glyphicon glyphicon-ok"};this.$get=["$window","$document","$rootScope","$tooltip",function(t,n,r,i){function a(t,n,r){var a={},o=angular.extend({},e,r);a=i(t,o);var u=a.$scope;u.$matches=[],u.$activeIndex=0,u.$isMultiple=o.multiple,u.$showAllNoneButtons=o.allNoneButtons&&o.multiple,u.$iconCheckmark=o.iconCheckmark,u.$activate=function(e){u.$$postDigest(function(){a.activate(e)})},u.$select=function(e){u.$$postDigest(function(){a.select(e)})},u.$isVisible=function(){return a.$isVisible()},u.$isActive=function(e){return a.$isActive(e)},u.$selectAll=function(){for(var e=0;e<u.$matches.length;e++)u.$isActive(e)||u.$select(e)},u.$selectNone=function(){for(var e=0;e<u.$matches.length;e++)u.$isActive(e)&&u.$select(e)},a.update=function(e){u.$matches=e,a.$updateActiveIndex()},a.activate=function(e){return o.multiple?(u.$activeIndex.sort(),a.$isActive(e)?u.$activeIndex.splice(u.$activeIndex.indexOf(e),1):u.$activeIndex.push(e),o.sort&&u.$activeIndex.sort()):u.$activeIndex=e,u.$activeIndex},a.select=function(e){var t=u.$matches[e].value;u.$apply(function(){a.activate(e),o.multiple?n.$setViewValue(u.$activeIndex.map(function(e){return u.$matches[e].value})):(n.$setViewValue(t),a.hide())}),u.$emit(o.prefixEvent+".select",t,e)},a.$updateActiveIndex=function(){n.$modelValue&&u.$matches.length?u.$activeIndex=o.multiple&&angular.isArray(n.$modelValue)?n.$modelValue.map(function(e){return a.$getIndex(e)}):a.$getIndex(n.$modelValue):u.$activeIndex>=u.$matches.length&&(u.$activeIndex=o.multiple?[]:0)},a.$isVisible=function(){return o.minLength&&n?u.$matches.length&&n.$viewValue.length>=o.minLength:u.$matches.length},a.$isActive=function(e){return o.multiple?-1!==u.$activeIndex.indexOf(e):u.$activeIndex===e},a.$getIndex=function(e){var t=u.$matches.length,n=t;if(t){for(n=t;n--&&u.$matches[n].value!==e;);if(!(0>n))return n}},a.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),s){var t=angular.element(e.target);t.triggerHandler("click")}},a.$onKeyDown=function(e){if(/(9|13|38|40)/.test(e.keyCode)){if(e.preventDefault(),e.stopPropagation(),!o.multiple&&(13===e.keyCode||9===e.keyCode))return a.select(u.$activeIndex);38===e.keyCode&&u.$activeIndex>0?u.$activeIndex--:40===e.keyCode&&u.$activeIndex<u.$matches.length-1?u.$activeIndex++:angular.isUndefined(u.$activeIndex)&&(u.$activeIndex=0),u.$digest()}};var l=a.show;a.show=function(){l(),o.multiple&&a.$element.addClass("select-multiple"),setTimeout(function(){a.$element.on(s?"touchstart":"mousedown",a.$onMouseDown),o.keyboard&&t.on("keydown",a.$onKeyDown)})};var c=a.hide;return a.hide=function(){a.$element.off(s?"touchstart":"mousedown",a.$onMouseDown),o.keyboard&&t.off("keydown",a.$onKeyDown),c(!0)},a}var o=(angular.element(t.document.body),/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent)),s="createTouch"in t.document&&o;return a.defaults=e,a}]}).directive("bsSelect",["$window","$parse","$q","$select","$parseOptions",function(e,t,n,r,i){var a=r.defaults;return{restrict:"EAC",require:"ngModel",link:function(e,t,n,o){var s={scope:e};if(angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","placeholder","multiple","allNoneButtons","maxLength","maxLengthHtml"],function(e){angular.isDefined(n[e])&&(s[e]=n[e])}),"select"===t[0].nodeName.toLowerCase()){var u=t;u.css("display","none"),t=angular.element('<button type="button" class="btn btn-default"></button>'),u.after(t)}var l=i(n.ngOptions),c=r(t,o,s),f=l.$match[7].replace(/\|.+/,"").trim();e.$watch(f,function(){l.valuesFn(e,o).then(function(e){c.update(e),o.$render()})},!0),e.$watch(n.ngModel,function(){c.$updateActiveIndex(),o.$render()},!0),o.$render=function(){var e,r;s.multiple&&angular.isArray(o.$modelValue)?(e=o.$modelValue.map(function(e){return r=c.$getIndex(e),angular.isDefined(r)?c.$scope.$matches[r].label:!1}).filter(angular.isDefined),e=e.length>(s.maxLength||a.maxLength)?e.length+" "+(s.maxLengthHtml||a.maxLengthHtml):e.join(", ")):(r=c.$getIndex(o.$modelValue),e=angular.isDefined(r)?c.$scope.$matches[r].label:!1),t.html((e?e:n.placeholder||a.placeholder)+a.caretHtml)},e.$on("$destroy",function(){c&&c.destroy(),s=null,c=null})}}}]),angular.module("mgcrea.ngStrap.tab",[]).provider("$tab",function(){var e=this.defaults={animation:"am-fade",template:"tab/tab.tpl.html",navClass:"nav-tabs",activeClass:"active"},t=this.controller=function(t,n,r){var i=this;i.$options=angular.copy(e),angular.forEach(["animation","navClass","activeClass"],function(e){angular.isDefined(r[e])&&(i.$options[e]=r[e])}),t.$navClass=i.$options.navClass,t.$activeClass=i.$options.activeClass,i.$panes=t.$panes=[],i.$viewChangeListeners=[],i.$push=function(e){i.$panes.push(e)},i.$panes.$active=0,i.$setActive=t.$setActive=function(e){i.$panes.$active=e,i.$viewChangeListeners.forEach(function(e){e()})}};this.$get=function(){var n={};return n.defaults=e,n.controller=t,n}}).directive("bsTabs",["$window","$animate","$tab",function(e,t,n){var r=n.defaults;return{require:["?ngModel","bsTabs"],transclude:!0,scope:!0,controller:["$scope","$element","$attrs",n.controller],templateUrl:function(e,t){return t.template||r.template},link:function(e,t,n,r){var i=r[0],a=r[1];i&&(a.$viewChangeListeners.push(function(){i.$setViewValue(a.$panes.$active)}),i.$formatters.push(function(e){return a.$setActive(1*e),e}))}}}]).directive("bsPane",["$window","$animate","$sce",function(e,t,n){return{require:["^?ngModel","^bsTabs"],scope:!0,link:function(e,r,i,a){function o(){var n=s.$panes.indexOf(e),i=s.$panes.$active;t[n===i?"addClass":"removeClass"](r,s.$options.activeClass)}var s=(a[0],a[1]);r.addClass("tab-pane"),i.$observe("title",function(t){e.title=n.trustAsHtml(t)}),s.$options.animation&&r.addClass(s.$options.animation),s.$push(e),s.$viewChangeListeners.push(function(){o()}),o()}}}]),angular.module("mgcrea.ngStrap.timepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.tooltip"]).provider("$timepicker",function(){var e=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",template:"timepicker/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",modelTimeFormat:null,autoclose:!1,minTime:-1/0,maxTime:+1/0,length:5,hourStep:1,minuteStep:5,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$locale","dateFilter","$tooltip",function(t,n,r,i,a,o,s){function u(t,n,r){function i(e,n){if(t[0].createTextRange){var r=t[0].createTextRange();r.collapse(!0),r.moveStart("character",e),r.moveEnd("character",n),r.select()}else t[0].setSelectionRange?t[0].setSelectionRange(e,n):angular.isUndefined(t[0].selectionStart)&&(t[0].selectionStart=e,t[0].selectionEnd=n)}function u(){t[0].focus()}var f=s(t,angular.extend({},e,r)),d=r.scope,p=f.$options,h=f.$scope,$=0,g=n.$dateValue||new Date,m={hour:g.getHours(),meridian:g.getHours()<12,minute:g.getMinutes(),second:g.getSeconds(),millisecond:g.getMilliseconds()},v=a.DATETIME_FORMATS[p.timeFormat]||p.timeFormat,y=/(h+)([:\.])?(m+)[ ]?(a?)/i.exec(v).slice(1);h.$iconUp=p.iconUp,h.$iconDown=p.iconDown,h.$select=function(e,t){f.select(e,t)},h.$moveIndex=function(e,t){f.$moveIndex(e,t)},h.$switchMeridian=function(e){f.switchMeridian(e)},f.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())?(f.$date=e,angular.extend(m,{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}),f.$build()):f.$isBuilt||f.$build()},f.select=function(e,t,r){(!n.$dateValue||isNaN(n.$dateValue.getTime()))&&(n.$dateValue=new Date(1970,0,1)),angular.isDate(e)||(e=new Date(e)),0===t?n.$dateValue.setHours(e.getHours()):1===t&&n.$dateValue.setMinutes(e.getMinutes()),n.$setViewValue(n.$dateValue),n.$render(),p.autoclose&&!r&&f.hide(!0)},f.switchMeridian=function(e){var t=(e||n.$dateValue).getHours();n.$dateValue.setHours(12>t?t+12:t-12),n.$setViewValue(n.$dateValue),n.$render()},f.$build=function(){var e,t,n=h.midIndex=parseInt(p.length/2,10),r=[];for(e=0;e<p.length;e++)t=new Date(1970,0,1,m.hour-(n-e)*p.hourStep),r.push({date:t,label:o(t,y[0]),selected:f.$date&&f.$isSelected(t,0),disabled:f.$isDisabled(t,0)});var i,a=[];for(e=0;e<p.length;e++)i=new Date(1970,0,1,0,m.minute-(n-e)*p.minuteStep),a.push({date:i,label:o(i,y[2]),selected:f.$date&&f.$isSelected(i,1),disabled:f.$isDisabled(i,1)});var s=[];for(e=0;e<p.length;e++)s.push([r[e],a[e]]);h.rows=s,h.showAM=!!y[3],h.isAM=(f.$date||r[n].date).getHours()<12,h.timeSeparator=y[1],f.$isBuilt=!0},f.$isSelected=function(e,t){return f.$date?0===t?e.getHours()===f.$date.getHours():1===t?e.getMinutes()===f.$date.getMinutes():void 0:!1},f.$isDisabled=function(e,t){var n;return 0===t?n=e.getTime()+6e4*m.minute:1===t&&(n=e.getTime()+36e5*m.hour),n<1*p.minTime||n>1*p.maxTime},h.$arrowAction=function(e,t){"picker"===p.arrowBehavior?f.$setTimeByStep(e,t):f.$moveIndex(e,t)},f.$setTimeByStep=function(e,t){{var n=new Date(f.$date),r=n.getHours(),i=(o(n,"h").length,n.getMinutes());o(n,"mm").length}0===t?n.setHours(r-parseInt(p.hourStep,10)*e):n.setMinutes(i-parseInt(p.minuteStep,10)*e),f.select(n,t,!0),d.$digest()},f.$moveIndex=function(e,t){var n;0===t?(n=new Date(1970,0,1,m.hour+e*p.length,m.minute),angular.extend(m,{hour:n.getHours()})):1===t&&(n=new Date(1970,0,1,m.hour,m.minute+e*p.length*p.minuteStep),angular.extend(m,{minute:n.getMinutes()})),f.$build()},f.$onMouseDown=function(e){if("input"!==e.target.nodeName.toLowerCase()&&e.preventDefault(),e.stopPropagation(),c){var t=angular.element(e.target);"button"!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler("click")}},f.$onKeyDown=function(e){if(/(38|37|39|40|13)/.test(e.keyCode)&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),e.stopPropagation(),13===e.keyCode)return f.hide(!0);var t=new Date(f.$date),n=t.getHours(),r=o(t,"h").length,a=t.getMinutes(),s=o(t,"mm").length,u=/(37|39)/.test(e.keyCode),l=2+1*!!y[3];u&&(37===e.keyCode?$=1>$?l-1:$-1:39===e.keyCode&&($=l-1>$?$+1:0));var c=[0,r];0===$?(38===e.keyCode?t.setHours(n-parseInt(p.hourStep,10)):40===e.keyCode&&t.setHours(n+parseInt(p.hourStep,10)),c=[0,r]):1===$?(38===e.keyCode?t.setMinutes(a-parseInt(p.minuteStep,10)):40===e.keyCode&&t.setMinutes(a+parseInt(p.minuteStep,10)),c=[r+1,r+1+s]):2===$&&(u||f.switchMeridian(),c=[r+1+s+1,r+1+s+3]),f.select(t,$,!0),i(c[0],c[1]),d.$digest()}};var b=f.init;f.init=function(){return l&&p.useNative?(t.prop("type","time"),void t.css("-webkit-appearance","textfield")):(c&&(t.prop("type","text"),t.attr("readonly","true"),t.on("click",u)),void b())};var w=f.destroy;f.destroy=function(){l&&p.useNative&&t.off("click",u),w()};var x=f.show;f.show=function(){x(),setTimeout(function(){f.$element.on(c?"touchstart":"mousedown",f.$onMouseDown),p.keyboard&&t.on("keydown",f.$onKeyDown)})};var k=f.hide;return f.hide=function(e){f.$element.off(c?"touchstart":"mousedown",f.$onMouseDown),p.keyboard&&t.off("keydown",f.$onKeyDown),k(e)},f}var l=(angular.element(t.document.body),/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent)),c="createTouch"in t.document&&l;return e.lang||(e.lang=a.id),u.defaults=e,u}]}).directive("bsTimepicker",["$window","$parse","$q","$locale","dateFilter","$timepicker","$dateParser","$timeout",function(e,t,n,r,i,a,o){{var s=a.defaults,u=/(ip(a|o)d|iphone|android)/gi.test(e.navigator.userAgent);e.requestAnimationFrame||e.setTimeout}return{restrict:"EAC",require:"ngModel",link:function(e,t,n,r){var l={scope:e,controller:r};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","timeType","timeFormat","modelTimeFormat","useNative","hourStep","minuteStep","length","arrowBehavior"],function(e){angular.isDefined(n[e])&&(l[e]=n[e])}),n.bsShow&&e.$watch(n.bsShow,function(e){c&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(",?(timepicker),?")),e===!0?c.show():c.hide())}),u&&(l.useNative||s.useNative)&&(l.timeFormat="HH:mm");var c=a(t,r,l);l=c.$options;var f=o({format:l.timeFormat,lang:l.lang});angular.forEach(["minTime","maxTime"],function(e){angular.isDefined(n[e])&&n.$observe(e,function(t){c.$options[e]="now"===t?(new Date).setFullYear(1970,0,1):angular.isString(t)&&t.match(/^".+"$/)?+new Date(t.substr(1,t.length-2)):f.parse(t,new Date(1970,0,1,0)),!isNaN(c.$options[e])&&c.$build()})}),e.$watch(n.ngModel,function(){c.update(r.$dateValue)},!0),r.$parsers.unshift(function(e){if(!e)return void r.$setValidity("date",!0);var t=angular.isDate(e)?e:f.parse(e,r.$dateValue);if(!t||isNaN(t.getTime()))r.$setValidity("date",!1);else{var n=t.getTime()>=l.minTime&&t.getTime()<=l.maxTime;r.$setValidity("date",n),n&&(r.$dateValue=t)}return"string"===l.timeType?i(t,l.modelTimeFormat||l.timeFormat):"number"===l.timeType?r.$dateValue.getTime():"iso"===l.timeType?r.$dateValue.toISOString():new Date(r.$dateValue)}),r.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?0/0:angular.isDate(e)?e:"string"===l.timeType?f.parse(e,null,l.modelTimeFormat):new Date(e),r.$dateValue=t,r.$dateValue}),r.$render=function(){t.val(!r.$dateValue||isNaN(r.$dateValue.getTime())?"":i(r.$dateValue,l.timeFormat))},e.$on("$destroy",function(){c&&c.destroy(),l=null,c=null})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var e=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF",function(n,r,i,a,o,s,u,l,c){function f(t,n){function a(){return"body"===m.container?l.offset(m.target[0]||t[0]):l.position(m.target[0]||t[0])}function o(e,t,n,r){var i,a=e.split("-");switch(a[0]){case"right":i={top:t.top+t.height/2-r/2,left:t.left+t.width};break;case"bottom":i={top:t.top+t.height,left:t.left+t.width/2-n/2};break;case"left":i={top:t.top+t.height/2-r/2,left:t.left-n};break;default:i={top:t.top-r,left:t.left+t.width/2-n/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=t.left;break;case"right":i.left=t.left+t.width-n}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=t.top-r;break;case"bottom":i.top=t.top+t.height}return i}var s={},f=t[0].nodeName.toLowerCase(),m=s.$options=angular.extend({},e,n);s.$promise=p(m.template);var v=s.$scope=m.scope&&m.scope.$new()||r.$new();m.delay&&angular.isString(m.delay)&&(m.delay=parseFloat(m.delay)),m.title&&(s.$scope.title=m.title),v.$hide=function(){v.$$postDigest(function(){s.hide()})},v.$show=function(){v.$$postDigest(function(){s.show()})},v.$toggle=function(){v.$$postDigest(function(){s.toggle()})},s.$isShown=v.$isShown=!1;var y,b;m.contentTemplate&&(s.$promise=s.$promise.then(function(e){var t=angular.element(e);return p(m.contentTemplate).then(function(e){var n=d('[ng-bind="content"]',t[0]);return n.length||(n=d('[ng-bind="title"]',t[0])),n.removeAttr("ng-bind").html(e),t[0].outerHTML})}));var w,x,k,C;return s.$promise.then(function(e){angular.isObject(e)&&(e=e.data),m.html&&(e=e.replace(g,'ng-bind-html="')),e=h.apply(e),k=e,w=i(e),s.init()}),s.init=function(){m.delay&&angular.isNumber(m.delay)&&(m.delay={show:m.delay,hide:m.delay}),"self"===m.container?C=t:angular.isElement(m.container)?C=m.container:m.container&&(C=d(m.container));var e=m.trigger.split(" ");angular.forEach(e,function(e){"click"===e?t.on("click",s.toggle):"manual"!==e&&(t.on("hover"===e?"mouseenter":"focus",s.enter),t.on("hover"===e?"mouseleave":"blur",s.leave),"button"===f&&"hover"!==e&&t.on($?"touchstart":"mousedown",s.$onFocusElementMouseDown))}),m.target&&(m.target=angular.isElement(m.target)?m.target:d(m.target)),m.show&&v.$$postDigest(function(){"focus"===m.trigger?t[0].focus():s.show()})},s.destroy=function(){for(var e=m.trigger.split(" "),n=e.length;n--;){var r=e[n];"click"===r?t.off("click",s.toggle):"manual"!==r&&(t.off("hover"===r?"mouseenter":"focus",s.enter),t.off("hover"===r?"mouseleave":"blur",s.leave),"button"===f&&"hover"!==r&&t.off($?"touchstart":"mousedown",s.$onFocusElementMouseDown))}x&&(x.remove(),x=null),clearTimeout(y),v.$destroy()},s.enter=function(){return clearTimeout(y),b="in",m.delay&&m.delay.show?void(y=setTimeout(function(){"in"===b&&s.show()},m.delay.show)):s.show()},s.show=function(){v.$emit(m.prefixEvent+".show.before",s);
var e=m.container?C:null,n=m.container?null:t;x&&x.remove(),x=s.$element=w(v,function(){}),x.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(m.placement),m.animation&&x.addClass(m.animation),m.type&&x.addClass(m.prefixClass+"-"+m.type),m.customClass&&x.addClass(m.customClass),u.enter(x,e,n,function(){v.$emit(m.prefixEvent+".show",s)}),s.$isShown=v.$isShown=!0,v.$$phase||v.$root&&v.$root.$$phase||v.$digest(),c(function(){s.$applyPlacement(),x.css({visibility:"visible"})}),m.keyboard&&("focus"!==m.trigger?(s.focus(),x.on("keyup",s.$onKeyUp)):t.on("keyup",s.$onFocusKeyUp))},s.leave=function(){return clearTimeout(y),b="out",m.delay&&m.delay.hide?void(y=setTimeout(function(){"out"===b&&s.hide()},m.delay.hide)):s.hide()},s.hide=function(e){s.$isShown&&(v.$emit(m.prefixEvent+".hide.before",s),u.leave(x,function(){return v.$emit(m.prefixEvent+".hide",s),e&&"focus"===m.trigger?t[0].blur():void 0}),s.$isShown=v.$isShown=!1,v.$$phase||v.$root&&v.$root.$$phase||v.$digest(),m.keyboard&&null!==x&&x.off("keyup",s.$onKeyUp))},s.toggle=function(){s.$isShown?s.leave():s.enter()},s.focus=function(){x[0].focus()},s.$applyPlacement=function(){if(x){var e=a(),t=x.prop("offsetWidth"),n=x.prop("offsetHeight"),r=o(m.placement,e,t,n);r.top+="px",r.left+="px",x.css(r)}},s.$onKeyUp=function(e){27===e.which&&s.$isShown&&(s.hide(),e.stopPropagation())},s.$onFocusKeyUp=function(e){27===e.which&&(t[0].blur(),e.stopPropagation())},s.$onFocusElementMouseDown=function(e){e.preventDefault(),e.stopPropagation(),s.$isShown?t[0].blur():t[0].focus()},s}function d(e,n){return angular.element((n||t).querySelectorAll(e))}function p(e){return a.when(o.get(e)||s.get(e)).then(function(t){return angular.isObject(t)?(o.put(e,t.data),t.data):t})}var h=String.prototype.trim,$="createTouch"in n.document,g=/ng-bind="/gi;return f}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(e,t,n,r,i){return{restrict:"EAC",scope:!0,link:function(e,t,a){var o={scope:e};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(e){angular.isDefined(a[e])&&(o[e]=a[e])}),angular.forEach(["title"],function(t){a.$observe(t,function(r,a){e[t]=n.trustAsHtml(r),angular.isDefined(a)&&i(function(){s&&s.$applyPlacement()})})}),a.bsTooltip&&e.$watch(a.bsTooltip,function(t,n){angular.isObject(t)?angular.extend(e,t):e.title=t,angular.isDefined(n)&&i(function(){s&&s.$applyPlacement()})},!0),a.bsShow&&e.$watch(a.bsShow,function(e){s&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(",?(tooltip),?")),e===!0?s.show():s.hide())});var s=r(t,o);e.$on("$destroy",function(){s&&s.destroy(),o=null,s=null})}}}]),angular.module("mgcrea.ngStrap.typeahead",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var e=this.defaults={animation:"am-fade",prefixClass:"typeahead",prefixEvent:"$typeahead",placement:"bottom-left",template:"typeahead/typeahead.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,filter:"filter",limit:6};this.$get=["$window","$rootScope","$tooltip",function(t,n,r){function i(t,n,i){var a={},o=angular.extend({},e,i);a=r(t,o);var s=i.scope,u=a.$scope;u.$resetMatches=function(){u.$matches=[],u.$activeIndex=0},u.$resetMatches(),u.$activate=function(e){u.$$postDigest(function(){a.activate(e)})},u.$select=function(e){u.$$postDigest(function(){a.select(e)})},u.$isVisible=function(){return a.$isVisible()},a.update=function(e){u.$matches=e,u.$activeIndex>=e.length&&(u.$activeIndex=0)},a.activate=function(e){u.$activeIndex=e},a.select=function(e){var t=u.$matches[e].value;n.$setViewValue(t),n.$render(),u.$resetMatches(),s&&s.$digest(),u.$emit(o.prefixEvent+".select",t,e)},a.$isVisible=function(){return o.minLength&&n?u.$matches.length&&angular.isString(n.$viewValue)&&n.$viewValue.length>=o.minLength:!!u.$matches.length},a.$getIndex=function(e){var t=u.$matches.length,n=t;if(t){for(n=t;n--&&u.$matches[n].value!==e;);if(!(0>n))return n}},a.$onMouseDown=function(e){e.preventDefault(),e.stopPropagation()},a.$onKeyDown=function(e){/(38|40|13)/.test(e.keyCode)&&(a.$isVisible()&&(e.preventDefault(),e.stopPropagation()),13===e.keyCode&&u.$matches.length?a.select(u.$activeIndex):38===e.keyCode&&u.$activeIndex>0?u.$activeIndex--:40===e.keyCode&&u.$activeIndex<u.$matches.length-1?u.$activeIndex++:angular.isUndefined(u.$activeIndex)&&(u.$activeIndex=0),u.$digest())};var l=a.show;a.show=function(){l(),setTimeout(function(){a.$element.on("mousedown",a.$onMouseDown),o.keyboard&&t.on("keydown",a.$onKeyDown)})};var c=a.hide;return a.hide=function(){a.$element.off("mousedown",a.$onMouseDown),o.keyboard&&t.off("keydown",a.$onKeyDown),c()},a}angular.element(t.document.body);return i.defaults=e,i}]}).directive("bsTypeahead",["$window","$parse","$q","$typeahead","$parseOptions",function(e,t,n,r,i){var a=r.defaults;return{restrict:"EAC",require:"ngModel",link:function(e,t,n,o){var s={scope:e};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","filter","limit","minLength","watchOptions","selectMode"],function(e){angular.isDefined(n[e])&&(s[e]=n[e])});var u=s.filter||a.filter,l=s.limit||a.limit,c=n.ngOptions;u&&(c+=" | "+u+":$viewValue"),l&&(c+=" | limitTo:"+l);var f=i(c),d=r(t,o,s);if(s.watchOptions){var p=f.$match[7].replace(/\|.+/,"").replace(/\(.*\)/g,"").trim();e.$watch(p,function(){f.valuesFn(e,o).then(function(e){d.update(e),o.$render()})},!0)}e.$watch(n.ngModel,function(t){e.$modelValue=t,f.valuesFn(e,o).then(function(e){if(s.selectMode&&!e.length&&t.length>0)return void o.$setViewValue(o.$viewValue.substring(0,o.$viewValue.length-1));e.length>l&&(e=e.slice(0,l));var n=d.$isVisible();n&&d.update(e),(1!==e.length||e[0].value!==t)&&(!n&&d.update(e),o.$render())})}),o.$render=function(){if(o.$isEmpty(o.$viewValue))return t.val("");var e=d.$getIndex(o.$modelValue),n=angular.isDefined(e)?d.$scope.$matches[e].label:o.$viewValue;n=angular.isObject(n)?n.label:n,t.val(n.replace(/<(?:.|\n)*?>/gm,"").trim())},e.$on("$destroy",function(){d&&d.destroy(),s=null,d=null})}}}])}(window,document),function(){"use strict";angular.module("mgcrea.ngStrap.alert").run(["$templateCache",function(e){e.put("alert/alert.tpl.html",'<div class="alert" tabindex="-1" ng-class="[type ? \'alert-\' + type : null]"><button type="button" class="close" ng-if="dismissable" ng-click="$hide()">&times;</button> <strong ng-bind="title"></strong>&nbsp;<span ng-bind-html="content"></span></div>')}]),angular.module("mgcrea.ngStrap.aside").run(["$templateCache",function(e){e.put("aside/aside.tpl.html",'<div class="aside" tabindex="-1" role="dialog"><div class="aside-dialog"><div class="aside-content"><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ng-bind="content"></div><div class="aside-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function(e){e.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{{$iconLeft}}"></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{{$iconRight}}"></i></button></th></tr><tr ng-show="showLabels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>')}]),angular.module("mgcrea.ngStrap.dropdown").run(["$templateCache",function(e){e.put("dropdown/dropdown.tpl.html",'<ul tabindex="-1" class="dropdown-menu" role="menu"><li role="presentation" ng-class="{divider: item.divider}" ng-repeat="item in content"><a role="menuitem" tabindex="-1" ng-href="{{item.href}}" ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind="item.text"></a> <a role="menuitem" tabindex="-1" href="javascript:void(0)" ng-if="!item.divider && item.click" ng-click="$eval(item.click);$hide()" ng-bind="item.text"></a></li></ul>')}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(e){e.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.popover").run(["$templateCache",function(e){e.put("popover/popover.tpl.html",'<div class="popover"><div class="arrow"></div><h3 class="popover-title" ng-bind="title" ng-show="title"></h3><div class="popover-content" ng-bind="content"></div></div>')}]),angular.module("mgcrea.ngStrap.select").run(["$templateCache",function(e){e.put("select/select.tpl.html",'<ul tabindex="-1" class="select dropdown-menu" ng-show="$isVisible()" role="select"><li ng-if="$showAllNoneButtons"><div class="btn-group" style="margin-bottom: 5px; margin-left: 5px"><button class="btn btn-default btn-xs" ng-click="$selectAll()">All</button> <button class="btn btn-default btn-xs" ng-click="$selectNone()">None</button></div></li><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default" role="menuitem" tabindex="-1" ng-click="$select($index, $event)"><span ng-bind="match.label"></span> <i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i></a></li></ul>')}]),angular.module("mgcrea.ngStrap.tab").run(["$templateCache",function(e){e.put("tab/tab.tpl.html",'<ul class="nav" ng-class="$navClass" role="tablist"><li ng-repeat="$pane in $panes" ng-class="$index == $panes.$active ? $activeClass : \'\'"><a role="tab" data-toggle="tab" ng-click="$setActive($index)" data-index="{{ $index }}" ng-bind-html="$pane.title"></a></li></ul><div ng-transclude class="tab-content"></div>')}]),angular.module("mgcrea.ngStrap.timepicker").run(["$templateCache",function(e){e.put("timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto"><table height="100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"></i></button></th></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td class="text-center"><button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled"><span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class="text-center"><button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled"><span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span></button></td><td ng-if="showAM">&nbsp;</td><td ng-if="showAM"><button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM</button> <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM</button></td></tr></tbody><tfoot><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"></i></button></th></tr></tfoot></table></div>')}]),angular.module("mgcrea.ngStrap.typeahead").run(["$templateCache",function(e){e.put("typeahead/typeahead.tpl.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select"><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"></a></li></ul>')}]),angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function(e){e.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}])}(window,document),function(){function e(e,t,n){for(var r=(n||0)-1,i=e?e.length:0;++r<i;)if(e[r]===t)return r;return-1}function t(t,n){var r=typeof n;if(t=t.cache,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:m+n;return t=(t=t[r])&&t[i],"object"==r?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:m+e,i=t[n]||(t[n]={});"object"==n?(i[r]||(i[r]=[])).push(e):i[r]=!0}}function r(e){return e.charCodeAt(0)}function i(e,t){for(var n=e.criteria,r=t.criteria,i=-1,a=n.length;++i<a;){var o=n[i],s=r[i];if(o!==s){if(o>s||"undefined"==typeof o)return 1;if(s>o||"undefined"==typeof s)return-1}}return e.index-t.index}function a(e){var t=-1,r=e.length,i=e[0],a=e[r/2|0],o=e[r-1];if(i&&"object"==typeof i&&a&&"object"==typeof a&&o&&"object"==typeof o)return!1;var s=u();s["false"]=s["null"]=s["true"]=s.undefined=!1;var l=u();for(l.array=e,l.cache=s,l.push=n;++t<r;)l.push(e[t]);return l}function o(e){return"\\"+Y[e]}function s(){return h.pop()||[]}function u(){return $.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(e){e.length=0,h.length<y&&h.push(e)}function c(e){var t=e.cache;t&&c(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,$.length<y&&$.push(e)}function f(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,a=Array(0>i?0:i);++r<i;)a[r]=e[t+r];return a}function d(n){function h(e){return e&&"object"==typeof e&&!Xr(e)&&Nr.call(e,"__wrapped__")?e:new $(e)}function $(e,t){this.__chain__=!!t,this.__wrapped__=e}function y(e){function t(){if(r){var e=f(r);Fr.apply(e,arguments)}if(this instanceof t){var a=G(n.prototype),o=n.apply(a,e||arguments);return Mt(o)?o:a}return n.apply(i,e||arguments)}var n=e[0],r=e[2],i=e[4];return Jr(t,e),t}function Y(e,t,n,r,i){if(n){var a=n(e);if("undefined"!=typeof a)return a}var o=Mt(e);if(!o)return e;var u=Ar.call(e);if(!U[u])return e;var c=Gr[u];switch(u){case I:case j:return new c(+e);case R:case L:return new c(e);case H:return a=c(e.source,S.exec(e)),a.lastIndex=e.lastIndex,a}var d=Xr(e);if(t){var p=!r;r||(r=s()),i||(i=s());for(var h=r.length;h--;)if(r[h]==e)return i[h];a=d?c(e.length):{}}else a=d?f(e):ai({},e);return d&&(Nr.call(e,"index")&&(a.index=e.index),Nr.call(e,"input")&&(a.input=e.input)),t?(r.push(e),i.push(a),(d?Qt:ui)(e,function(e,o){a[o]=Y(e,t,n,r,i)}),p&&(l(r),l(i)),a):a}function G(e){return Mt(e)?qr(e):{}}function Q(e,t,n){if("function"!=typeof e)return Xn;if("undefined"==typeof t||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(Qr.funcNames&&(r=!e.name),r=r||!Qr.funcDecomp,!r)){var i=Vr.call(e);Qr.funcNames||(r=!D.test(i)),r||(r=M.test(i),Jr(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return Fn(e,t)}function J(e){function t(){var e=u?o:this;if(i){var h=f(i);Fr.apply(h,arguments)}if((a||c)&&(h||(h=f(arguments)),a&&Fr.apply(h,a),c&&h.length<s))return r|=16,J([n,d?r:-4&r,h,null,o,s]);if(h||(h=arguments),l&&(n=e[p]),this instanceof t){e=G(n.prototype);var $=n.apply(e,h);return Mt($)?$:e}return n.apply(e,h)}var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=1&r,l=2&r,c=4&r,d=8&r,p=n;return Jr(t,e),t}function X(n,r){var i=-1,o=ut(),s=n?n.length:0,u=s>=v&&o===e,l=[];if(u){var f=a(r);f?(o=t,r=f):u=!1}for(;++i<s;){var d=n[i];o(r,d)<0&&l.push(d)}return u&&c(r),l}function et(e,t,n,r){for(var i=(r||0)-1,a=e?e.length:0,o=[];++i<a;){var s=e[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Xr(s)||dt(s))){t||(s=et(s,t,n));var u=-1,l=s.length,c=o.length;for(o.length+=l;++u<l;)o[c++]=s[u]}else n||o.push(s)}return o}function tt(e,t,n,r,i,a){if(n){var o=n(e,t);if("undefined"!=typeof o)return!!o}if(e===t)return 0!==e||1/e==1/t;var u=typeof e,c=typeof t;if(!(e!==e||e&&W[u]||t&&W[c]))return!1;if(null==e||null==t)return e===t;var f=Ar.call(e),d=Ar.call(t);if(f==N&&(f=q),d==N&&(d=q),f!=d)return!1;switch(f){case I:case j:return+e==+t;case R:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case H:case L:return e==xr(t)}var p=f==F;if(!p){var h=Nr.call(e,"__wrapped__"),$=Nr.call(t,"__wrapped__");if(h||$)return tt(h?e.__wrapped__:e,$?t.__wrapped__:t,n,r,i,a);if(f!=q)return!1;var g=e.constructor,m=t.constructor;if(g!=m&&!(Tt(g)&&g instanceof g&&Tt(m)&&m instanceof m)&&"constructor"in e&&"constructor"in t)return!1}var v=!i;i||(i=s()),a||(a=s());for(var y=i.length;y--;)if(i[y]==e)return a[y]==t;var b=0;if(o=!0,i.push(e),a.push(t),p){if(y=e.length,b=t.length,o=b==y,o||r)for(;b--;){var w=y,x=t[b];if(r)for(;w--&&!(o=tt(e[w],x,n,r,i,a)););else if(!(o=tt(e[b],x,n,r,i,a)))break}}else si(t,function(t,s,u){return Nr.call(u,s)?(b++,o=Nr.call(e,s)&&tt(e[s],t,n,r,i,a)):void 0}),o&&!r&&si(e,function(e,t,n){return Nr.call(n,t)?o=--b>-1:void 0});return i.pop(),a.pop(),v&&(l(i),l(a)),o}function nt(e,t,n,r,i){(Xr(t)?Qt:ui)(t,function(t,a){var o,s,u=t,l=e[a];if(t&&((s=Xr(t))||li(t))){for(var c=r.length;c--;)if(o=r[c]==t){l=i[c];break}if(!o){var f;n&&(u=n(l,t),(f="undefined"!=typeof u)&&(l=u)),f||(l=s?Xr(l)?l:[]:li(l)?l:{}),r.push(t),i.push(l),f||nt(l,t,n,r,i)}}else n&&(u=n(l,t),"undefined"==typeof u&&(u=t)),"undefined"!=typeof u&&(l=u);e[a]=l})}function rt(e,t){return e+Or(Kr()*(t-e+1))}function it(n,r,i){var o=-1,u=ut(),f=n?n.length:0,d=[],p=!r&&f>=v&&u===e,h=i||p?s():d;if(p){var $=a(h);u=t,h=$}for(;++o<f;){var g=n[o],m=i?i(g,o,n):g;(r?!o||h[h.length-1]!==m:u(h,m)<0)&&((i||p)&&h.push(m),d.push(g))}return p?(l(h.array),c(h)):i&&l(h),d}function at(e){return function(t,n,r){var i={};n=h.createCallback(n,r,3);var a=-1,o=t?t.length:0;if("number"==typeof o)for(;++a<o;){var s=t[a];e(i,s,n(s,a,t),t)}else ui(t,function(t,r,a){e(i,t,n(t,r,a),a)});return i}}function ot(e,t,n,r,i,a){var o=1&t,s=2&t,u=4&t,l=16&t,c=32&t;if(!s&&!Tt(e))throw new kr;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var d=e&&e.__bindData__;if(d&&d!==!0)return d=f(d),d[2]&&(d[2]=f(d[2])),d[3]&&(d[3]=f(d[3])),!o||1&d[1]||(d[4]=i),!o&&1&d[1]&&(t|=8),!u||4&d[1]||(d[5]=a),l&&Fr.apply(d[2]||(d[2]=[]),n),c&&Pr.apply(d[3]||(d[3]=[]),r),d[1]|=t,ot.apply(null,d);var p=1==t||17===t?y:J;return p([e,t,n,r,i,a])}function st(e){return ti[e]}function ut(){var t=(t=h.indexOf)===vn?e:t;return t}function lt(e){return"function"==typeof e&&Er.test(e)}function ct(e){var t,n;return e&&Ar.call(e)==q&&(t=e.constructor,!Tt(t)||t instanceof t)?(si(e,function(e,t){n=t}),"undefined"==typeof n||Nr.call(e,n)):!1}function ft(e){return ni[e]}function dt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ar.call(e)==N||!1}function pt(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),Y(e,t,"function"==typeof n&&Q(n,r,1))}function ht(e,t,n){return Y(e,!0,"function"==typeof t&&Q(t,n,1))}function $t(e,t){var n=G(e);return t?ai(n,t):n}function gt(e,t,n){var r;return t=h.createCallback(t,n,3),ui(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function mt(e,t,n){var r;return t=h.createCallback(t,n,3),yt(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function vt(e,t,n){var r=[];si(e,function(e,t){r.push(t,e)});var i=r.length;for(t=Q(t,n,3);i--&&t(r[i--],r[i],e)!==!1;);return e}function yt(e,t,n){var r=ei(e),i=r.length;for(t=Q(t,n,3);i--;){var a=r[i];if(t(e[a],a,e)===!1)break}return e}function bt(e){var t=[];return si(e,function(e,n){Tt(e)&&t.push(n)}),t.sort()}function wt(e,t){return e?Nr.call(e,t):!1}function xt(e){for(var t=-1,n=ei(e),r=n.length,i={};++t<r;){var a=n[t];i[e[a]]=a}return i}function kt(e){return e===!0||e===!1||e&&"object"==typeof e&&Ar.call(e)==I||!1}function Ct(e){return e&&"object"==typeof e&&Ar.call(e)==j||!1}function St(e){return e&&1===e.nodeType||!1}function Dt(e){var t=!0;if(!e)return t;var n=Ar.call(e),r=e.length;return n==F||n==L||n==N||n==q&&"number"==typeof r&&Tt(e.splice)?!r:(ui(e,function(){return t=!1}),t)}function At(e,t,n,r){return tt(e,t,"function"==typeof n&&Q(n,r,2))}function Et(e){return Lr(e)&&!Ur(parseFloat(e))}function Tt(e){return"function"==typeof e}function Mt(e){return!(!e||!W[typeof e])}function Ot(e){return _t(e)&&e!=+e}function Vt(e){return null===e}function _t(e){return"number"==typeof e||e&&"object"==typeof e&&Ar.call(e)==R||!1}function Nt(e){return e&&"object"==typeof e&&Ar.call(e)==H||!1}function Ft(e){return"string"==typeof e||e&&"object"==typeof e&&Ar.call(e)==L||!1}function It(e){return"undefined"==typeof e}function jt(e,t,n){var r={};return t=h.createCallback(t,n,3),ui(e,function(e,n,i){r[n]=t(e,n,i)}),r}function Pt(e){var t=arguments,n=2;if(!Mt(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var r=Q(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(r=t[--n]);for(var i=f(arguments,1,n),a=-1,o=s(),u=s();++a<n;)nt(e,i[a],r,o,u);return l(o),l(u),e}function Rt(e,t,n){var r={};if("function"!=typeof t){var i=[];si(e,function(e,t){i.push(t)}),i=X(i,et(arguments,!0,!1,1));for(var a=-1,o=i.length;++a<o;){var s=i[a];r[s]=e[s]}}else t=h.createCallback(t,n,3),si(e,function(e,n,i){t(e,n,i)||(r[n]=e)});return r}function qt(e){for(var t=-1,n=ei(e),r=n.length,i=hr(r);++t<r;){var a=n[t];i[t]=[a,e[a]]}return i}function Ht(e,t,n){var r={};if("function"!=typeof t)for(var i=-1,a=et(arguments,!0,!1,1),o=Mt(e)?a.length:0;++i<o;){var s=a[i];s in e&&(r[s]=e[s])}else t=h.createCallback(t,n,3),si(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function Lt(e,t,n,r){var i=Xr(e);if(null==n)if(i)n=[];else{var a=e&&e.constructor,o=a&&a.prototype;n=G(o)}return t&&(t=h.createCallback(t,r,4),(i?Qt:ui)(e,function(e,r,i){return t(n,e,r,i)})),n}function Ut(e){for(var t=-1,n=ei(e),r=n.length,i=hr(r);++t<r;)i[t]=e[n[t]];return i}function Bt(e){for(var t=arguments,n=-1,r=et(t,!0,!1,1),i=t[2]&&t[2][t[1]]===e?1:r.length,a=hr(i);++n<i;)a[n]=e[r[n]];return a}function zt(e,t,n){var r=-1,i=ut(),a=e?e.length:0,o=!1;return n=(0>n?zr(0,a+n):n)||0,Xr(e)?o=i(e,t,n)>-1:"number"==typeof a?o=(Ft(e)?e.indexOf(t,n):i(e,t,n))>-1:ui(e,function(e){return++r>=n?!(o=e===t):void 0}),o}function Wt(e,t,n){var r=!0;t=h.createCallback(t,n,3);var i=-1,a=e?e.length:0;if("number"==typeof a)for(;++i<a&&(r=!!t(e[i],i,e)););else ui(e,function(e,n,i){return r=!!t(e,n,i)});return r}function Yt(e,t,n){var r=[];t=h.createCallback(t,n,3);var i=-1,a=e?e.length:0;if("number"==typeof a)for(;++i<a;){var o=e[i];t(o,i,e)&&r.push(o)}else ui(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Kt(e,t,n){t=h.createCallback(t,n,3);var r=-1,i=e?e.length:0;if("number"!=typeof i){var a;return ui(e,function(e,n,r){return t(e,n,r)?(a=e,!1):void 0}),a}for(;++r<i;){var o=e[r];if(t(o,r,e))return o}}function Gt(e,t,n){var r;return t=h.createCallback(t,n,3),Jt(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r}function Qt(e,t,n){var r=-1,i=e?e.length:0;if(t=t&&"undefined"==typeof n?t:Q(t,n,3),"number"==typeof i)for(;++r<i&&t(e[r],r,e)!==!1;);else ui(e,t);return e}function Jt(e,t,n){var r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:Q(t,n,3),"number"==typeof r)for(;r--&&t(e[r],r,e)!==!1;);else{var i=ei(e);r=i.length,ui(e,function(e,n,a){return n=i?i[--r]:--r,t(a[n],n,a)})}return e}function Xt(e,t){var n=f(arguments,2),r=-1,i="function"==typeof t,a=e?e.length:0,o=hr("number"==typeof a?a:0);return Qt(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o}function Zt(e,t,n){var r=-1,i=e?e.length:0;if(t=h.createCallback(t,n,3),"number"==typeof i)for(var a=hr(i);++r<i;)a[r]=t(e[r],r,e);else a=[],ui(e,function(e,n,i){a[++r]=t(e,n,i)});return a}function en(e,t,n){var i=-1/0,a=i;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Xr(e))for(var o=-1,s=e.length;++o<s;){var u=e[o];u>a&&(a=u)}else t=null==t&&Ft(e)?r:h.createCallback(t,n,3),Qt(e,function(e,n,r){var o=t(e,n,r);o>i&&(i=o,a=e)});return a}function tn(e,t,n){var i=1/0,a=i;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Xr(e))for(var o=-1,s=e.length;++o<s;){var u=e[o];a>u&&(a=u)}else t=null==t&&Ft(e)?r:h.createCallback(t,n,3),Qt(e,function(e,n,r){var o=t(e,n,r);i>o&&(i=o,a=e)});return a}function nn(e,t,n,r){if(!e)return n;var i=arguments.length<3;t=h.createCallback(t,r,4);var a=-1,o=e.length;if("number"==typeof o)for(i&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);else ui(e,function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)});return n}function rn(e,t,n,r){var i=arguments.length<3;return t=h.createCallback(t,r,4),Jt(e,function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)}),n}function an(e,t,n){return t=h.createCallback(t,n,3),Yt(e,function(e,n,r){return!t(e,n,r)})}function on(e,t,n){if(e&&"number"!=typeof e.length&&(e=Ut(e)),null==t||n)return e?e[rt(0,e.length-1)]:p;var r=sn(e);return r.length=Wr(zr(0,t),r.length),r}function sn(e){var t=-1,n=e?e.length:0,r=hr("number"==typeof n?n:0);return Qt(e,function(e){var n=rt(0,++t);r[t]=r[n],r[n]=e}),r}function un(e){var t=e?e.length:0;return"number"==typeof t?t:ei(e).length}function ln(e,t,n){var r;t=h.createCallback(t,n,3);var i=-1,a=e?e.length:0;if("number"==typeof a)for(;++i<a&&!(r=t(e[i],i,e)););else ui(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function cn(e,t,n){var r=-1,a=Xr(t),o=e?e.length:0,f=hr("number"==typeof o?o:0);for(a||(t=h.createCallback(t,n,3)),Qt(e,function(e,n,i){var o=f[++r]=u();a?o.criteria=Zt(t,function(t){return e[t]}):(o.criteria=s())[0]=t(e,n,i),o.index=r,o.value=e}),o=f.length,f.sort(i);o--;){var d=f[o];f[o]=d.value,a||l(d.criteria),c(d)}return f}function fn(e){return e&&"number"==typeof e.length?f(e):Ut(e)}function dn(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}function pn(e){return X(e,et(arguments,!0,!0,1))}function hn(e,t,n){var r=-1,i=e?e.length:0;for(t=h.createCallback(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1}function $n(e,t,n){var r=e?e.length:0;for(t=h.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1}function gn(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var a=-1;for(t=h.createCallback(t,n,3);++a<i&&t(e[a],a,e);)r++}else if(r=t,null==r||n)return e?e[0]:p;return f(e,0,Wr(zr(0,r),i))}function mn(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(e=Zt(e,n,r)),et(e,t)}function vn(t,n,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?zr(0,i+r):r||0}else if(r){var a=An(t,n);return t[a]===n?a:-1}return e(t,n,r)}function yn(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var a=i;for(t=h.createCallback(t,n,3);a--&&t(e[a],a,e);)r++}else r=null==t||n?1:t||r;return f(e,0,Wr(zr(0,i-r),i))}function bn(){for(var n=[],r=-1,i=arguments.length,o=s(),u=ut(),f=u===e,d=s();++r<i;){var p=arguments[r];(Xr(p)||dt(p))&&(n.push(p),o.push(f&&p.length>=v&&a(r?n[r]:d)))}var h=n[0],$=-1,g=h?h.length:0,m=[];e:for(;++$<g;){var y=o[0];if(p=h[$],(y?t(y,p):u(d,p))<0){for(r=i,(y||d).push(p);--r;)if(y=o[r],(y?t(y,p):u(n[r],p))<0)continue e;m.push(p)}}for(;i--;)y=o[i],y&&c(y);return l(o),l(d),m}function wn(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var a=i;for(t=h.createCallback(t,n,3);a--&&t(e[a],a,e);)r++}else if(r=t,null==r||n)return e?e[i-1]:p;return f(e,zr(0,i-r))}function xn(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?zr(0,r+n):Wr(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function kn(e){for(var t=arguments,n=0,r=t.length,i=e?e.length:0;++n<r;)for(var a=-1,o=t[n];++a<i;)e[a]===o&&(jr.call(e,a--,1),i--);return e}function Cn(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var r=-1,i=zr(0,Tr((t-e)/(n||1))),a=hr(i);++r<i;)a[r]=e,e+=n;return a}function Sn(e,t,n){var r=-1,i=e?e.length:0,a=[];for(t=h.createCallback(t,n,3);++r<i;){var o=e[r];t(o,r,e)&&(a.push(o),jr.call(e,r--,1),i--)}return a}function Dn(e,t,n){if("number"!=typeof t&&null!=t){var r=0,i=-1,a=e?e.length:0;for(t=h.createCallback(t,n,3);++i<a&&t(e[i],i,e);)r++}else r=null==t||n?1:zr(0,t);return f(e,r)}function An(e,t,n,r){var i=0,a=e?e.length:i;for(n=n?h.createCallback(n,r,1):Xn,t=n(t);a>i;){var o=i+a>>>1;n(e[o])<t?i=o+1:a=o}return i}function En(){return it(et(arguments,!0,!0))}function Tn(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=h.createCallback(n,r,3)),it(e,t,n)}function Mn(e){return X(e,f(arguments,1))}function On(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Xr(n)||dt(n))var r=r?it(X(r,n).concat(X(n,r))):n}return r||[]}function Vn(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?en(pi(e,"length")):0,r=hr(0>n?0:n);++t<n;)r[t]=pi(e,t);return r}function _n(e,t){var n=-1,r=e?e.length:0,i={};for(t||!r||Xr(e[0])||(t=[]);++n<r;){var a=e[n];t?i[a]=t[n]:a&&(i[a[0]]=a[1])}return i}function Nn(e,t){if(!Tt(t))throw new kr;return function(){return--e<1?t.apply(this,arguments):void 0}}function Fn(e,t){return arguments.length>2?ot(e,17,f(arguments,2),null,t):ot(e,1,null,null,t)}function In(e){for(var t=arguments.length>1?et(arguments,!0,!1,1):bt(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=ot(e[i],1,null,null,e)}return e}function jn(e,t){return arguments.length>2?ot(t,19,f(arguments,2),null,e):ot(t,3,null,null,e)}function Pn(){for(var e=arguments,t=e.length;t--;)if(!Tt(e[t]))throw new kr;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Rn(e,t){return t="number"==typeof t?t:+t||e.length,ot(e,4,null,null,null,t)}function qn(e,t,n){var r,i,a,o,s,u,l,c=0,f=!1,d=!0;if(!Tt(e))throw new kr;if(t=zr(0,t)||0,n===!0){var h=!0;d=!1}else Mt(n)&&(h=n.leading,f="maxWait"in n&&(zr(t,n.maxWait)||0),d="trailing"in n?n.trailing:d);var $=function(){var n=t-($i()-o);if(0>=n){i&&Mr(i);var f=l;i=u=l=p,f&&(c=$i(),a=e.apply(s,r),u||i||(r=s=null))}else u=Ir($,n)},g=function(){u&&Mr(u),i=u=l=p,(d||f!==t)&&(c=$i(),a=e.apply(s,r),u||i||(r=s=null))};return function(){if(r=arguments,o=$i(),s=this,l=d&&(u||!h),f===!1)var n=h&&!u;else{i||h||(c=o);var p=f-(o-c),m=0>=p;m?(i&&(i=Mr(i)),c=o,a=e.apply(s,r)):i||(i=Ir(g,p))}return m&&u?u=Mr(u):u||t===f||(u=Ir($,t)),n&&(m=!0,a=e.apply(s,r)),!m||u||i||(r=s=null),a
}}function Hn(e){if(!Tt(e))throw new kr;var t=f(arguments,1);return Ir(function(){e.apply(p,t)},1)}function Ln(e,t){if(!Tt(e))throw new kr;var n=f(arguments,2);return Ir(function(){e.apply(p,n)},t)}function Un(e,t){if(!Tt(e))throw new kr;var n=function(){var r=n.cache,i=t?t.apply(this,arguments):m+arguments[0];return Nr.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return n.cache={},n}function Bn(e){var t,n;if(!Tt(e))throw new kr;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function zn(e){return ot(e,16,f(arguments,1))}function Wn(e){return ot(e,32,null,f(arguments,1))}function Yn(e,t,n){var r=!0,i=!0;if(!Tt(e))throw new kr;return n===!1?r=!1:Mt(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),B.leading=r,B.maxWait=t,B.trailing=i,qn(e,t,B)}function Kn(e,t){return ot(t,16,[e])}function Gn(e){return function(){return e}}function Qn(e,t,n){var r=typeof e;if(null==e||"function"==r)return Q(e,t,n);if("object"!=r)return nr(e);var i=ei(e),a=i[0],o=e[a];return 1!=i.length||o!==o||Mt(o)?function(t){for(var n=i.length,r=!1;n--&&(r=tt(t[i[n]],e[i[n]],null,!0)););return r}:function(e){var t=e[a];return o===t&&(0!==o||1/o==1/t)}}function Jn(e){return null==e?"":xr(e).replace(ii,st)}function Xn(e){return e}function Zn(e,t,n){var r=!0,i=t&&bt(t);t&&(n||i.length)||(null==n&&(n=t),a=$,t=e,e=h,i=bt(t)),n===!1?r=!1:Mt(n)&&"chain"in n&&(r=n.chain);var a=e,o=Tt(a);Qt(i,function(n){var i=e[n]=t[n];o&&(a.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,o=[n];Fr.apply(o,arguments);var s=i.apply(e,o);if(r||t){if(n===s&&Mt(s))return this;s=new a(s),s.__chain__=t}return s})})}function er(){return n._=Dr,this}function tr(){}function nr(e){return function(t){return t[e]}}function rr(e,t,n){var r=null==e,i=null==t;if(null==n&&("boolean"==typeof e&&i?(n=e,e=1):i||"boolean"!=typeof t||(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var a=Kr();return Wr(e+a*(t-e+parseFloat("1e-"+((a+"").length-1))),t)}return rt(e,t)}function ir(e,t){if(e){var n=e[t];return Tt(n)?e[t]():n}}function ar(e,t,n){var r=h.templateSettings;e=xr(e||""),n=oi({},n,r);var i,a=oi({},n.imports,r.imports),s=ei(a),u=Ut(a),l=0,c=n.interpolate||T,f="__p += '",d=wr((n.escape||T).source+"|"+c.source+"|"+(c===A?C:T).source+"|"+(n.evaluate||T).source+"|$","g");e.replace(d,function(t,n,r,a,s,u){return r||(r=a),f+=e.slice(l,u).replace(O,o),n&&(f+="' +\n__e("+n+") +\n'"),s&&(i=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),f+="';\n";var $=n.variable,g=$;g||($="obj",f="with ("+$+") {\n"+f+"\n}\n"),f=(i?f.replace(w,""):f).replace(x,"$1").replace(k,"$1;"),f="function("+$+") {\n"+(g?"":$+" || ("+$+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+_++ +"]")+"\n*/";try{var v=mr(s,"return "+f+m).apply(p,u)}catch(y){throw y.source=f,y}return t?v(t):(v.source=f,v)}function or(e,t,n){e=(e=+e)>-1?e:0;var r=-1,i=hr(e);for(t=Q(t,n,1);++r<e;)i[r]=t(r);return i}function sr(e){return null==e?"":xr(e).replace(ri,ft)}function ur(e){var t=++g;return xr(null==e?"":e)+t}function lr(e){return e=new $(e),e.__chain__=!0,e}function cr(e,t){return t(e),e}function fr(){return this.__chain__=!0,this}function dr(){return xr(this.__wrapped__)}function pr(){return this.__wrapped__}n=n?Z.defaults(K.Object(),n,Z.pick(K,V)):K;var hr=n.Array,$r=n.Boolean,gr=n.Date,mr=n.Function,vr=n.Math,yr=n.Number,br=n.Object,wr=n.RegExp,xr=n.String,kr=n.TypeError,Cr=[],Sr=br.prototype,Dr=n._,Ar=Sr.toString,Er=wr("^"+xr(Ar).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Tr=vr.ceil,Mr=n.clearTimeout,Or=vr.floor,Vr=mr.prototype.toString,_r=lt(_r=br.getPrototypeOf)&&_r,Nr=Sr.hasOwnProperty,Fr=Cr.push,Ir=n.setTimeout,jr=Cr.splice,Pr=Cr.unshift,Rr=function(){try{var e={},t=lt(t=br.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),qr=lt(qr=br.create)&&qr,Hr=lt(Hr=hr.isArray)&&Hr,Lr=n.isFinite,Ur=n.isNaN,Br=lt(Br=br.keys)&&Br,zr=vr.max,Wr=vr.min,Yr=n.parseInt,Kr=vr.random,Gr={};Gr[F]=hr,Gr[I]=$r,Gr[j]=gr,Gr[P]=mr,Gr[q]=br,Gr[R]=yr,Gr[H]=wr,Gr[L]=xr,$.prototype=h.prototype;var Qr=h.support={};Qr.funcDecomp=!lt(n.WinRTError)&&M.test(d),Qr.funcNames="string"==typeof mr.name,h.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:A,variable:"",imports:{_:h}},qr||(G=function(){function e(){}return function(t){if(Mt(t)){e.prototype=t;var r=new e;e.prototype=null}return r||n.Object()}}());var Jr=Rr?function(e,t){z.value=t,Rr(e,"__bindData__",z)}:tr,Xr=Hr||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ar.call(e)==F||!1},Zr=function(e){var t,n=e,r=[];if(!n)return r;if(!W[typeof e])return r;for(t in n)Nr.call(n,t)&&r.push(t);return r},ei=Br?function(e){return Mt(e)?Br(e):[]}:Zr,ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ni=xt(ti),ri=wr("("+ei(ni).join("|")+")","g"),ii=wr("["+ei(ti).join("")+"]","g"),ai=function(e,t,n){var r,i=e,a=i;if(!i)return a;var o=arguments,s=0,u="number"==typeof n?2:o.length;if(u>3&&"function"==typeof o[u-2])var l=Q(o[--u-1],o[u--],2);else u>2&&"function"==typeof o[u-1]&&(l=o[--u]);for(;++s<u;)if(i=o[s],i&&W[typeof i])for(var c=-1,f=W[typeof i]&&ei(i),d=f?f.length:0;++c<d;)r=f[c],a[r]=l?l(a[r],i[r]):i[r];return a},oi=function(e,t,n){var r,i=e,a=i;if(!i)return a;for(var o=arguments,s=0,u="number"==typeof n?2:o.length;++s<u;)if(i=o[s],i&&W[typeof i])for(var l=-1,c=W[typeof i]&&ei(i),f=c?c.length:0;++l<f;)r=c[l],"undefined"==typeof a[r]&&(a[r]=i[r]);return a},si=function(e,t,n){var r,i=e,a=i;if(!i)return a;if(!W[typeof i])return a;t=t&&"undefined"==typeof n?t:Q(t,n,3);for(r in i)if(t(i[r],r,e)===!1)return a;return a},ui=function(e,t,n){var r,i=e,a=i;if(!i)return a;if(!W[typeof i])return a;t=t&&"undefined"==typeof n?t:Q(t,n,3);for(var o=-1,s=W[typeof i]&&ei(i),u=s?s.length:0;++o<u;)if(r=s[o],t(i[r],r,e)===!1)return a;return a},li=_r?function(e){if(!e||Ar.call(e)!=q)return!1;var t=e.valueOf,n=lt(t)&&(n=_r(t))&&_r(n);return n?e==n||_r(e)==n:ct(e)}:ct,ci=at(function(e,t,n){Nr.call(e,n)?e[n]++:e[n]=1}),fi=at(function(e,t,n){(Nr.call(e,n)?e[n]:e[n]=[]).push(t)}),di=at(function(e,t,n){e[n]=t}),pi=Zt,hi=Yt,$i=lt($i=gr.now)&&$i||function(){return(new gr).getTime()},gi=8==Yr(b+"08")?Yr:function(e,t){return Yr(Ft(e)?e.replace(E,""):e,t||0)};return h.after=Nn,h.assign=ai,h.at=Bt,h.bind=Fn,h.bindAll=In,h.bindKey=jn,h.chain=lr,h.compact=dn,h.compose=Pn,h.constant=Gn,h.countBy=ci,h.create=$t,h.createCallback=Qn,h.curry=Rn,h.debounce=qn,h.defaults=oi,h.defer=Hn,h.delay=Ln,h.difference=pn,h.filter=Yt,h.flatten=mn,h.forEach=Qt,h.forEachRight=Jt,h.forIn=si,h.forInRight=vt,h.forOwn=ui,h.forOwnRight=yt,h.functions=bt,h.groupBy=fi,h.indexBy=di,h.initial=yn,h.intersection=bn,h.invert=xt,h.invoke=Xt,h.keys=ei,h.map=Zt,h.mapValues=jt,h.max=en,h.memoize=Un,h.merge=Pt,h.min=tn,h.omit=Rt,h.once=Bn,h.pairs=qt,h.partial=zn,h.partialRight=Wn,h.pick=Ht,h.pluck=pi,h.property=nr,h.pull=kn,h.range=Cn,h.reject=an,h.remove=Sn,h.rest=Dn,h.shuffle=sn,h.sortBy=cn,h.tap=cr,h.throttle=Yn,h.times=or,h.toArray=fn,h.transform=Lt,h.union=En,h.uniq=Tn,h.values=Ut,h.where=hi,h.without=Mn,h.wrap=Kn,h.xor=On,h.zip=Vn,h.zipObject=_n,h.collect=Zt,h.drop=Dn,h.each=Qt,h.eachRight=Jt,h.extend=ai,h.methods=bt,h.object=_n,h.select=Yt,h.tail=Dn,h.unique=Tn,h.unzip=Vn,Zn(h),h.clone=pt,h.cloneDeep=ht,h.contains=zt,h.escape=Jn,h.every=Wt,h.find=Kt,h.findIndex=hn,h.findKey=gt,h.findLast=Gt,h.findLastIndex=$n,h.findLastKey=mt,h.has=wt,h.identity=Xn,h.indexOf=vn,h.isArguments=dt,h.isArray=Xr,h.isBoolean=kt,h.isDate=Ct,h.isElement=St,h.isEmpty=Dt,h.isEqual=At,h.isFinite=Et,h.isFunction=Tt,h.isNaN=Ot,h.isNull=Vt,h.isNumber=_t,h.isObject=Mt,h.isPlainObject=li,h.isRegExp=Nt,h.isString=Ft,h.isUndefined=It,h.lastIndexOf=xn,h.mixin=Zn,h.noConflict=er,h.noop=tr,h.now=$i,h.parseInt=gi,h.random=rr,h.reduce=nn,h.reduceRight=rn,h.result=ir,h.runInContext=d,h.size=un,h.some=ln,h.sortedIndex=An,h.template=ar,h.unescape=sr,h.uniqueId=ur,h.all=Wt,h.any=ln,h.detect=Kt,h.findWhere=Kt,h.foldl=nn,h.foldr=rn,h.include=zt,h.inject=nn,Zn(function(){var e={};return ui(h,function(t,n){h.prototype[n]||(e[n]=t)}),e}(),!1),h.first=gn,h.last=wn,h.sample=on,h.take=gn,h.head=gn,ui(h,function(e,t){var n="sample"!==t;h.prototype[t]||(h.prototype[t]=function(t,r){var i=this.__chain__,a=e(this.__wrapped__,t,r);return i||null!=t&&(!r||n&&"function"==typeof t)?new $(a,i):a})}),h.VERSION="2.4.1",h.prototype.chain=fr,h.prototype.toString=dr,h.prototype.value=pr,h.prototype.valueOf=pr,Qt(["join","pop","shift"],function(e){var t=Cr[e];h.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new $(n,e):n}}),Qt(["push","reverse","sort","unshift"],function(e){var t=Cr[e];h.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),Qt(["concat","slice","splice"],function(e){var t=Cr[e];h.prototype[e]=function(){return new $(t.apply(this.__wrapped__,arguments),this.__chain__)}}),h}var p,h=[],$=[],g=0,m=+new Date+"",v=75,y=40,b=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",w=/\b__p \+= '';/g,x=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,D=/^\s*function[ \n\r\t]+\w/,A=/<%=([\s\S]+?)%>/g,E=RegExp("^["+b+"]*0+(?=.$)"),T=/($^)/,M=/\bthis\b/,O=/['\n\r\t\u2028\u2029\\]/g,V=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],_=0,N="[object Arguments]",F="[object Array]",I="[object Boolean]",j="[object Date]",P="[object Function]",R="[object Number]",q="[object Object]",H="[object RegExp]",L="[object String]",U={};U[P]=!1,U[N]=U[F]=U[I]=U[j]=U[R]=U[q]=U[H]=U[L]=!0;var B={leading:!1,maxWait:0,trailing:!1},z={configurable:!1,enumerable:!1,value:null,writable:!1},W={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},K=W[typeof window]&&window||this,G=W[typeof exports]&&exports&&!exports.nodeType&&exports,Q=W[typeof module]&&module&&!module.nodeType&&module,J=Q&&Q.exports===G&&G,X=W[typeof global]&&global;!X||X.global!==X&&X.window!==X||(K=X);var Z=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(K._=Z,define(function(){return Z})):G&&Q?J?(Q.exports=Z)._=Z:G._=Z:K._=Z}.call(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXIuanMiLCJhbmd1bGFyLWFuaW1hdGUuanMiLCJhbmd1bGFyLXN0cmFwLmpzIiwiYW5ndWxhci1zdHJhcC50cGwuanMiLCJsb2Rhc2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBS0EsU0FBQSxFQUFBLEVBQUEsR0FBQSxZQWdDQSxTQUFBLEdBQUEsRUFBQSxHQUVBLE1BREEsR0FBQSxHQUFBLE1BQ0EsV0FDQSxHQWNBLEdBQUEsRUFkQSxFQUFBLFVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsSUFBQSxFQUFBLEtBQ0EsRUFBQSxVQUFBLEdBQ0EsRUFBQSxVQUNBLEVBQUEsU0FBQSxHQUNBLE1BQUEsa0JBQUEsR0FDQSxFQUFBLFdBQUEsUUFBQSxjQUFBLElBQ0EsbUJBQUEsR0FDQSxZQUNBLGdCQUFBLEdBQ0EsS0FBQSxVQUFBLEdBRUEsRUF1QkEsS0FuQkEsRUFBQSxFQUFBLEVBQUEsUUFBQSxXQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxHQUVBLE9BQUEsR0FBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLGtCQUFBLEdBQ0EsRUFBQSxXQUFBLFFBQUEsZUFBQSxJQUNBLG1CQUFBLEdBQ0EsWUFDQSxnQkFBQSxHQUNBLEVBQUEsR0FFQSxHQUVBLElBR0EsRUFBQSxFQUFBLDZDQUNBLEVBQUEsRUFBQSxJQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxVQUFBLE9BQUEsSUFDQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsS0FBQSxLQUFBLEVBQUEsR0FBQSxJQUNBLG1CQUFBLEVBQUEsVUFBQSxJQUVBLE9BQUEsSUFBQSxHQUFBLElBK0xBLFFBQUEsR0FBQSxHQUNBLEdBQUEsTUFBQSxHQUFBLEVBQUEsR0FDQSxPQUFBLENBR0EsSUFBQSxHQUFBLEVBQUEsTUFFQSxPQUFBLEtBQUEsRUFBQSxVQUFBLEdBQ0EsRUFHQSxFQUFBLElBQUEsR0FBQSxJQUFBLElBQUEsR0FDQSxnQkFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsR0FpQ0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxDQUNBLElBQUEsRUFDQSxHQUFBLEVBQUEsR0FDQSxJQUFBLElBQUEsR0FHQSxhQUFBLEdBQUEsVUFBQSxHQUFBLFFBQUEsR0FBQSxFQUFBLGlCQUFBLEVBQUEsZUFBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE9BR0EsSUFBQSxHQUFBLElBQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLGdCQUFBLEVBQ0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEtBQ0EsR0FBQSxJQUFBLEtBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsT0FHQSxJQUFBLEVBQUEsU0FBQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFFBQUEsRUFBQSxFQUFBLE9BRUEsS0FBQSxJQUFBLEdBQ0EsRUFBQSxlQUFBLElBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFLQSxPQUFBLEdBR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxLQUNBLEtBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxlQUFBLElBQ0EsRUFBQSxLQUFBLEVBR0EsT0FBQSxHQUFBLE9BR0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUVBLElBQUEsR0FEQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEdBRUEsT0FBQSxHQVNBLFFBQUEsR0FBQSxHQUNBLE1BQUEsVUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLElBYUEsUUFBQSxLQUNBLFFBQUEsR0FTQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEVBQ0EsRUFBQSxVQUFBLFFBR0EsR0FBQSxVQWtCQSxRQUFBLEdBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxFQUFBLFVBRUEsRUFBQSxFQUFBLEVBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLFVBQUEsRUFDQSxJQUFBLEVBRUEsSUFBQSxHQURBLEdBQUEsT0FBQSxLQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEdBQUEsRUFBQSxJQU1BLE1BREEsR0FBQSxFQUFBLEdBQ0EsRUFHQSxRQUFBLEdBQUEsR0FDQSxNQUFBLFVBQUEsRUFBQSxJQUlBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLElBQUEsRUFBQSxjQUFBLFVBQUEsS0FBQSxHQW1CQSxRQUFBLE1Bb0JBLFFBQUEsR0FBQSxHQUFBLE1BQUEsR0FJQSxRQUFBLEdBQUEsR0FBQSxNQUFBLFlBQUEsTUFBQSxJQWNBLFFBQUEsR0FBQSxHQUFBLE1BQUEsbUJBQUEsR0FlQSxRQUFBLEdBQUEsR0FBQSxNQUFBLG1CQUFBLEdBZ0JBLFFBQUEsR0FBQSxHQUVBLE1BQUEsUUFBQSxHQUFBLGdCQUFBLEdBZ0JBLFFBQUEsR0FBQSxHQUFBLE1BQUEsZ0JBQUEsR0FlQSxRQUFBLEdBQUEsR0FBQSxNQUFBLGdCQUFBLEdBZUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxrQkFBQSxHQUFBLEtBQUEsR0E4QkEsUUFBQSxHQUFBLEdBQUEsTUFBQSxrQkFBQSxHQVVBLFFBQUEsR0FBQSxHQUNBLE1BQUEsb0JBQUEsR0FBQSxLQUFBLEdBV0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSxJQUFBLEVBQUEsU0FBQSxFQUlBLFFBQUEsR0FBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLFlBQUEsRUFBQSxPQUlBLFFBQUEsR0FBQSxHQUNBLE1BQUEsa0JBQUEsR0FBQSxLQUFBLEdBSUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxrQkFBQSxHQUFBLEtBQUEsR0FJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLGlCQUFBLEdBSUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxJQUFBLEVBQUEsRUFBQSxNQXFCQSxRQUFBLEdBQUEsR0FDQSxTQUFBLEtBQ0EsRUFBQSxVQUNBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxPQU9BLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxNQUFBLElBQ0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEVBQUEsS0FBQSxDQUNBLE9BQUEsR0FJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxVQUFBLEVBQUEsR0FBQSxVQUlBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEtBSUEsT0FIQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLE1BRUEsRUFtQ0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxRQUFBLEVBR0EsT0FGQSxJQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsR0FDQSxFQXlFQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEdBQ0EsS0FBQSxJQUFBLE9BQ0EsMkVBR0EsSUFBQSxFQWVBLENBQ0EsR0FBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLE1BQ0Esb0RBS0EsSUFIQSxFQUFBLE1BQ0EsRUFBQSxNQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFFBQUEsRUFDQSxJQUFBLEtBQUEsRUFBQSxNQUFBLEdBQUEsRUFFQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FHQSxHQUFBLEVBQ0EsSUFBQSxHQUFBLEdBQUEsQ0FDQSxFQUFBLE9BQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFDQSxFQUFBLEtBQUEsRUFBQSxJQUNBLEVBQUEsS0FBQSxJQUVBLEVBQUEsS0FBQSxPQUVBLENBQ0EsR0FBQSxHQUFBLEVBQUEsU0FDQSxJQUFBLEdBQ0EsRUFBQSxPQUFBLEVBRUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEdBQUEsSUFHQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsZUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxLQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsSUFFQSxFQUFBLEdBQUEsRUFHQSxHQUFBLEVBQUEsUUExREEsSUFEQSxFQUFBLEVBQ0EsRUFDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsS0FBQSxFQUFBLE9BQ0EsSUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxlQUNBLElBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLFdBQUEsTUFBQSxXQUFBLElBQ0EsRUFBQSxVQUFBLEVBQUEsY0FDQSxJQUFBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxPQUFBLE9BQUEsT0FBQSxlQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBb0RBLE1BQUEsR0FRQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLENBQ0EsRUFBQSxLQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxHQUFBLEVBQUEsT0FFQSxJQUFBLEVBQUEsR0FBQSxDQUNBLEVBQUEsS0FFQSxLQUFBLEdBQUEsS0FBQSxJQUNBLE1BQUEsRUFBQSxPQUFBLElBQUEsTUFBQSxFQUFBLE9BQUEsTUFDQSxFQUFBLEdBQUEsRUFBQSxJQUtBLE1BQUEsSUFBQSxFQWlDQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUFBLE9BQUEsQ0FDQSxJQUFBLE9BQUEsR0FBQSxPQUFBLEVBQUEsT0FBQSxDQUNBLElBQUEsSUFBQSxHQUFBLElBQUEsRUFBQSxPQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxRQUFBLEdBQUEsUUFBQSxFQUNBLElBQUEsR0FBQSxHQUNBLFVBQUEsRUFBQSxDQUNBLElBQUEsR0FBQSxHQVFBLENBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxZQURBLENBRUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxZQUFBLEVBQUEsVUFFQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsT0FBQSxDQUNBLEtBQ0EsS0FBQSxJQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsT0FBQSxDQUNBLEdBQUEsSUFBQSxFQUVBLElBQUEsSUFBQSxHQUNBLElBQUEsRUFBQSxlQUFBLElBQ0EsTUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEtBQUEsSUFDQSxFQUFBLEVBQUEsSUFBQSxPQUFBLENBRUEsUUFBQSxFQTFCQSxJQUFBLEdBQUEsR0FBQSxPQUFBLENBQ0EsS0FBQSxFQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsQ0FDQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxJQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxPQUFBLENBRUEsUUFBQSxHQXlCQSxPQUFBLEVBd0JBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxHQUFBLEtBQUEsRUFBQSxJQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsRUFBQSxHQUFBLEdBdUJBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEVBQUEsVUFBQSxLQUNBLFFBQUEsRUFBQSxJQUFBLFlBQUEsUUFjQSxFQWJBLEVBQUEsT0FDQSxXQUNBLE1BQUEsV0FBQSxPQUNBLEVBQUEsTUFBQSxFQUFBLEVBQUEsT0FBQSxHQUFBLEtBQUEsVUFBQSxLQUNBLEVBQUEsTUFBQSxFQUFBLElBRUEsV0FDQSxNQUFBLFdBQUEsT0FDQSxFQUFBLE1BQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxJQVNBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLENBWUEsT0FWQSxnQkFBQSxJQUFBLE1BQUEsRUFBQSxPQUFBLElBQUEsTUFBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxHQUNBLEVBQUEsVUFDQSxHQUFBLElBQUEsRUFDQSxFQUFBLFlBQ0EsRUFBQSxLQUNBLEVBQUEsVUFHQSxFQWtCQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsbUJBQUEsR0FBQSxFQUNBLEtBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE1BZ0JBLFFBQUEsR0FBQSxHQUNBLE1BQUEsR0FBQSxHQUNBLEtBQUEsTUFBQSxHQUNBLEVBT0EsUUFBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQUEsT0FDQSxLQUdBLEVBQUEsUUFDQSxNQUFBLElBRUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLFNBQUEsT0FBQSxHQUFBLE1BQ0EsS0FDQSxNQUFBLEdBQUEsR0FBQSxXQUFBLEVBQUEsR0FBQSxHQUNBLEVBQ0EsTUFBQSxjQUFBLEdBQ0EsUUFBQSxjQUFBLFNBQUEsRUFBQSxHQUFBLE1BQUEsSUFBQSxHQUFBLEtBQ0EsTUFBQSxHQUNBLE1BQUEsSUFBQSxJQWdCQSxRQUFBLEdBQUEsR0FDQSxJQUNBLE1BQUEsb0JBQUEsR0FDQSxNQUFBLEtBVUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsSUFpQkEsT0FoQkEsSUFBQSxHQUFBLElBQUEsTUFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLElBQ0EsRUFBQSxFQUFBLFFBQUEsTUFBQSxPQUFBLE1BQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FBQSxDQUNBLElBQUEsS0FBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLElBQ0EsRUFBQSxHQUFBLEtBQUEsR0FFQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBSkEsRUFBQSxHQUFBLEtBU0EsRUFHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEtBWUEsT0FYQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUNBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxJQUNBLEtBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxHQUFBLE9BR0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxJQUNBLEtBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxHQUFBLE9BR0EsRUFBQSxPQUFBLEVBQUEsS0FBQSxLQUFBLEdBZUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsR0FDQSxRQUFBLFFBQUEsS0FDQSxRQUFBLFFBQUEsS0FDQSxRQUFBLFFBQUEsS0FlQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsb0JBQUEsR0FDQSxRQUFBLFFBQUEsS0FDQSxRQUFBLFFBQUEsS0FDQSxRQUFBLE9BQUEsS0FDQSxRQUFBLFFBQUEsS0FDQSxRQUFBLFFBQUEsS0FDQSxRQUFBLE9BQUEsRUFBQSxNQUFBLEtBS0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsTUFFQSxLQURBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFFQSxHQURBLEVBQUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxJQUNBLE1BQUEsRUFHQSxPQUFBLE1Ba0lBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUNBLEVBQ0EsSUFHQSxHQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE9BRUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxhQUFBLEtBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxhQUFBLE1BR0EsRUFBQSxHQUFBLFNBQUEsR0FDQSxHQUNBLEdBREEsRUFBQSxFQUFBLE9BR0EsSUFBQSxFQUFBLEVBQUEsY0FBQSxJQUFBLEVBQUEsUUFBQSxJQUFBLE9BQUEsUUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLGFBQUEsTUFHQSxJQUNBLEVBQUEsU0FBQSxPQUFBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxHQUFBLE1BQUEsSUFzREEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxLQUNBLElBQUEsSUFDQSxVQUFBLEVBRUEsR0FBQSxFQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsV0FHQSxHQUZBLEVBQUEsR0FBQSxHQUVBLEVBQUEsV0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxXQUFBLEVBQUEsRUFFQSxNQUFBLElBQ0EsVUFDQSxtREFDQSxFQUFBLFFBQUEsSUFBQSxRQUFBLFFBQUEsSUFBQSxTQUdBLEVBQUEsTUFDQSxFQUFBLFNBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLGVBQUEsTUFHQSxFQUFBLGtCQUVBLEVBQUEsTUFBQSxtQkFBQSxTQUFBLEdBQ0EsRUFBQSxrQkFBQSxNQUlBLEVBQUEsUUFBQSxLQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxTQVNBLE9BUkEsR0FBQSxRQUFBLGFBQUEsZUFBQSxXQUFBLFlBQ0EsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsRUFBQSxHQUFBLFFBSUEsR0FHQSxFQUFBLHlCQUNBLEVBQUEsc0JBT0EsT0FMQSxJQUFBLEVBQUEsS0FBQSxFQUFBLFFBQ0EsRUFBQSxrQkFBQSxFQUNBLEVBQUEsS0FBQSxFQUFBLEtBQUEsUUFBQSxFQUFBLEtBR0EsSUFBQSxFQUFBLEtBQUEsRUFBQSxNQUNBLEtBR0EsRUFBQSxLQUFBLEVBQUEsS0FBQSxRQUFBLEVBQUEsU0FDQSxHQUFBLGdCQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxLQUVBLE9BY0EsUUFBQSxNQUNBLEVBQUEsS0FBQSx3QkFBQSxFQUFBLEtBQ0EsRUFBQSxTQUFBLFNBV0EsUUFBQSxJQUFBLEdBQ0EsTUFBQSxJQUFBLFFBQUEsR0FBQSxXQUFBLElBQUEsaUJBSUEsUUFBQSxJQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsR0FBQSxJQUNBLEVBQUEsUUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE9BQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxnQkFNQSxRQUFBLE1BQ0EsR0FBQSxFQUVBLE1BS0EsR0FBQSxFQUFBLE9BS0EsSUFBQSxHQUFBLEdBQUEsSUFDQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLElBQ0EsTUFBQSxHQUFBLE1BQ0EsYUFBQSxHQUFBLGFBQ0EsV0FBQSxHQUFBLFdBQ0EsU0FBQSxHQUFBLFNBQ0EsY0FBQSxHQUFBLGdCQU1BLEVBQUEsR0FBQSxVQUNBLEdBQUEsVUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsR0FRQSxJQUFBLE1BUEEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsSUFDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLFVBQ0EsR0FBQSxFQUFBLFVBQ0EsR0FBQSxHQUFBLGVBQUEsV0FNQSxHQUFBLEtBR0EsR0FBQSxHQUdBLEdBQUEsUUFBQSxHQUdBLElBQUEsR0FNQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsSUFBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLHdCQUFBLEdBQUEsSUFBQSxHQUFBLFdBRUEsT0FBQSxHQUdBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FPQSxNQU5BLElBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFHQSxHQUFBLEVBQUEsR0FBQSxFQUFBLHdCQUNBLEdBQUEsZ0JBQUEsR0FBQSxFQUFBLFlBQUEsTUFBQSxlQUFBLEtBQ0EsRUFRQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsbUJBQUEsRUFDQSxLQUFBLElBQUEsVUFBQSx5Q0FBQSxHQVlBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsTUFBQSxFQU1BLEtBQUEsR0FKQSxHQURBLEVBQUEsRUFBQSxNQUFBLEtBRUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxPQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsR0FDQSxJQUNBLEdBQUEsRUFBQSxHQUFBLEdBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FFQSxFQVFBLFFBQUEsSUFBQSxHQUdBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxHQUNBLEdBQUEsRUFFQSxHQUFBLENBRUEsR0FEQSxFQUFBLEVBQUEsYUFDQSxFQUFBLEtBQ0EsR0FBQSxLQUFBLFNBQ0EsSUFBQSxFQUVBLE9BQUEsSUFBQSxHQWVBLFFBQUEsTUFDQSxNQUFBLFFBQUEsT0FBQSxNQVlBLFFBQUEsSUFBQSxHQUtBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEdBQUEsS0FKQSxHQUFBLEdBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxNQU1BLEVBQUEsRUFBQSxFQUFBLFVBQUEsT0FLQSxPQUZBLEdBQUEsU0FBQSxFQUFBLFVBQUEsRUFFQSxFQUFBLEVBQUEsU0FBQSxXQUVBLEdBQUEsS0FxREEsT0FBQSxVQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLG1CQUFBLEVBQ0EsS0FBQSxHQUFBLFVBQUEseUNBQUEsR0FRQSxPQUpBLEdBQUEsRUFBQSxVQUNBLEdBQUEsRUFBQSxlQUFBLEtBQ0EsRUFBQSxHQUFBLE1BRUEsRUFBQSxFQUFBLEVBQUEsV0F1TkEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsTUFEQSxLQUFBLEVBQUEsR0FDQSxXQUVBLE1BREEsR0FBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLFlBQ0EsR0ExTkEsSUFBQSxFQUNBLEtBQUEsR0FBQSxRQUFBLHNMQUVBLEVBSUEsSUFBQSxNQUdBLEtBR0EsS0FFQSxFQUFBLEVBQUEsWUFBQSxTQUFBLE9BQUEsR0FHQSxHQUVBLGFBQUEsRUFDQSxjQUFBLEVBQ0EsV0FBQSxFQVdBLFNBQUEsRUFVQSxLQUFBLEVBYUEsU0FBQSxFQUFBLFdBQUEsWUFXQSxRQUFBLEVBQUEsV0FBQSxXQVdBLFFBQUEsRUFBQSxXQUFBLFdBV0EsTUFBQSxFQUFBLFdBQUEsU0FZQSxTQUFBLEVBQUEsV0FBQSxXQUFBLFdBa0NBLFVBQUEsRUFBQSxtQkFBQSxZQVdBLE9BQUEsRUFBQSxrQkFBQSxZQVlBLFdBQUEsRUFBQSxzQkFBQSxZQWFBLFVBQUEsRUFBQSxtQkFBQSxhQWFBLE9BQUEsRUFZQSxJQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsS0FBQSxHQUNBLE1BUUEsT0FKQSxJQUNBLEVBQUEsR0FHQSxPQW1JQSxRQUFBLElBQUEsR0FDQSxFQUFBLEdBQ0EsVUFBQSxFQUNBLEtBQUEsRUFDQSxPQUFBLEVBQ0EsT0FBQSxFQUNBLFFBQUEsR0FDQSxRQUFBLEVBQ0EsU0FBQSxHQUNBLEtBQUEsRUFDQSxLQUFBLEVBQ0EsT0FBQSxFQUNBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsWUFBQSxFQUNBLFVBQUEsRUFDQSxTQUFBLEVBQ0EsV0FBQSxFQUNBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsVUFBQSxFQUNBLFFBQUEsR0FDQSxRQUFBLEdBQ0EsT0FBQSxFQUNBLFVBQUEsR0FDQSxVQUFBLEdBQ0EsV0FBQSxRQUFBLEdBQ0EsZUFBQSxHQUNBLFNBQUEsRUFDQSxNQUFBLEdBQ0Esb0JBQUEsR0FDQSxXQUFBLEtBR0EsR0FBQSxHQUFBLEVBQ0EsS0FDQSxHQUFBLFlBQ0EsTUFBQSxHQUNBLEdBQUEsZUFBQSxTQUFBLFVBQUEsSUFHQSxHQUFBLE1BQUEsYUFBQSxXQUNBLFNBQUEsR0FFQSxFQUFBLFVBQ0EsY0FBQSxLQUVBLEVBQUEsU0FBQSxXQUFBLElBQ0EsV0FDQSxFQUFBLEdBQ0EsTUFBQSxHQUNBLFNBQUEsR0FDQSxLQUFBLEdBQ0EsT0FBQSxHQUNBLE9BQUEsR0FDQSxNQUFBLEdBQ0EsT0FBQSxHQUNBLE9BQUEsR0FDQSxXQUFBLEdBQ0EsZUFBQSxHQUNBLFFBQUEsR0FDQSxZQUFBLEdBQ0EsV0FBQSxHQUNBLFFBQUEsR0FDQSxhQUFBLEdBQ0EsT0FBQSxHQUNBLE9BQUEsR0FDQSxLQUFBLEdBQ0EsVUFBQSxHQUNBLE9BQUEsR0FDQSxjQUFBLEdBQ0EsWUFBQSxHQUNBLFNBQUEsR0FDQSxPQUFBLEdBQ0EsUUFBQSxHQUNBLFNBQUEsR0FDQSxhQUFBLEdBQ0EsZ0JBQUEsR0FDQSxVQUFBLEdBQ0EsYUFBQSxHQUNBLFFBQUEsR0FDQSxPQUFBLEdBQ0EsU0FBQSxHQUNBLFFBQUEsR0FDQSxVQUFBLEdBQ0EsU0FBQSxHQUNBLFdBQUEsR0FDQSxVQUFBLEdBQ0EsWUFBQSxHQUNBLFVBQUEsR0FDQSxZQUFBLEdBQ0EsUUFBQSxHQUNBLGVBQUEsS0FFQSxXQUNBLFVBQUEsS0FFQSxVQUFBLElBQ0EsVUFBQSxJQUNBLEVBQUEsVUFDQSxjQUFBLEdBQ0EsU0FBQSxHQUNBLFNBQUEsR0FDQSxjQUFBLEdBQ0EsWUFBQSxHQUNBLFVBQUEsR0FDQSxrQkFBQSxHQUNBLFFBQUEsR0FDQSxhQUFBLEdBQ0EsVUFBQSxHQUNBLE1BQUEsR0FDQSxhQUFBLEdBQ0EsVUFBQSxHQUNBLEtBQUEsR0FDQSxPQUFBLEdBQ0EsV0FBQSxHQUNBLEdBQUEsR0FDQSxJQUFBLEdBQ0EsS0FBQSxHQUNBLGFBQUEsR0FDQSxTQUFBLEdBQ0EsZUFBQSxHQUNBLGlCQUFBLEdBQ0EsY0FBQSxHQUNBLFNBQUEsR0FDQSxRQUFBLEdBQ0EsTUFBQSxHQUNBLGdCQUFBLFFBMkhBLFFBQUEsTUFBQSxRQUFBLEdBYUEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxHQUNBLFFBQUEsR0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsY0FBQSxJQUVBLFFBQUEsR0FBQSxTQXVCQSxRQUFBLElBQUEsR0FDQSxPQUFBLEdBQUEsS0FBQSxHQUdBLFFBQUEsSUFBQSxHQUdBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsT0FBQSxLQUFBLElBQUEsR0FBQSxJQUFBLEVBR0EsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUVBLEVBREEsRUFBQSxFQUFBLHlCQUNBLElBRUEsSUFBQSxHQUFBLEdBRUEsRUFBQSxLQUFBLEVBQUEsZUFBQSxRQUNBLENBU0EsSUFQQSxFQUFBLEdBQUEsRUFBQSxZQUFBLEVBQUEsY0FBQSxRQUNBLEdBQUEsR0FBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsY0FDQSxFQUFBLEdBQUEsSUFBQSxHQUFBLFNBQ0EsRUFBQSxVQUFBLEVBQUEsR0FBQSxFQUFBLFFBQUEsR0FBQSxhQUFBLEVBQUEsR0FHQSxFQUFBLEVBQUEsR0FDQSxLQUNBLEVBQUEsRUFBQSxTQUdBLEdBQUEsRUFBQSxFQUFBLEVBQUEsWUFFQSxFQUFBLEVBQUEsV0FDQSxFQUFBLFlBQUEsR0FVQSxNQU5BLEdBQUEsWUFBQSxHQUNBLEVBQUEsVUFBQSxHQUNBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLEtBR0EsRUFHQSxRQUFBLElBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxDQUNBLElBQUEsRUFFQSxRQUFBLEVBQUEsR0FBQSxLQUFBLEtBQ0EsRUFBQSxjQUFBLEVBQUEsTUFHQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsY0FPQSxRQUFBLElBQUEsR0FDQSxHQUFBLFlBQUEsSUFDQSxNQUFBLEVBR0EsSUFBQSxFQU1BLElBSkEsRUFBQSxLQUNBLEVBQUEsR0FBQSxHQUNBLEdBQUEsS0FFQSxlQUFBLEtBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxFQUFBLE9BQUEsR0FDQSxLQUFBLElBQUEsUUFBQSxtSEFFQSxPQUFBLElBQUEsSUFBQSxHQUdBLEVBQ0EsR0FBQSxLQUFBLEdBQUEsSUFFQSxHQUFBLEtBQUEsR0FJQSxRQUFBLElBQUEsR0FDQSxNQUFBLEdBQUEsV0FBQSxHQUdBLFFBQUEsSUFBQSxFQUFBLEdBR0EsR0FGQSxHQUFBLEdBQUEsR0FFQSxFQUFBLGlCQUVBLElBQUEsR0FEQSxHQUFBLEVBQUEsaUJBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxFQUFBLElBS0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLFVBQUEsd0RBRUEsSUFBQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxPQUNBLEVBQUEsR0FBQSxFQUFBLE1BRUEsSUFBQSxFQUVBLEdBQUEsRUFRQSxFQUFBLEVBQUEsTUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLElBQ0EsR0FBQSxFQUFBLEVBQUEsRUFBQSxVQUNBLEdBQUEsSUFFQSxFQUFBLEVBQUEsT0FBQSxTQVpBLEtBQUEsSUFBQSxHQUNBLGFBQUEsR0FDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFVBRUEsR0FBQSxHQWNBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEdBQUEsR0FBQSxFQUVBLElBQUEsRUFBQSxDQUNBLEdBQUEsRUFFQSxrQkFEQSxHQUFBLEtBQUEsRUFJQSxHQUFBLFNBQ0EsRUFBQSxPQUFBLFVBQ0EsRUFBQSxVQUFBLFlBRUEsR0FBQSxVQUVBLElBQUEsR0FDQSxFQUFBLE1BQUEsR0FLQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUFBLEdBQUEsRUFPQSxPQUxBLEtBQUEsSUFDQSxFQUFBLE1BQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxJQUFBLFVBQUEsUUFBQSxPQUFBLElBR0EsRUFJQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsQ0FFQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxJQUVBLElBQUEsRUFDQSxFQUFBLEdBQUEsTUFDQSxDQUNBLEdBQUEsRUFDQSxNQUFBLEVBRUEsSUFBQSxFQUVBLE1BQUEsSUFBQSxFQUFBLEVBRUEsR0FBQSxFQUFBLEtBT0EsUUFBQSxJQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsY0FDQSxLQUFBLEVBQUEsYUFBQSxVQUFBLElBQUEsS0FBQSxRQUFBLFVBQUEsS0FDQSxRQUFBLElBQUEsRUFBQSxLQUFBLElBRkEsRUFLQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxjQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsYUFBQSxRQUFBLElBQ0EsS0FBQSxFQUFBLGFBQUEsVUFBQSxJQUFBLEtBQ0EsUUFBQSxVQUFBLEtBQ0EsUUFBQSxJQUFBLEdBQUEsR0FBQSxJQUFBLFNBTUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxhQUFBLENBQ0EsR0FBQSxJQUFBLEtBQUEsRUFBQSxhQUFBLFVBQUEsSUFBQSxLQUNBLFFBQUEsVUFBQSxJQUVBLEdBQUEsRUFBQSxNQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxHQUNBLEtBQUEsRUFBQSxRQUFBLElBQUEsRUFBQSxPQUNBLEdBQUEsRUFBQSxPQUlBLEVBQUEsYUFBQSxRQUFBLEdBQUEsS0FLQSxRQUFBLElBQUEsRUFBQSxHQUdBLEdBQUEsRUFHQSxHQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsVUFBQSxNQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsTUFHQSxJQUFBLGdCQUFBLElBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxPQUlBLEdBQUEsRUFBQSxVQUFBLEdBT0EsUUFBQSxJQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxLQUFBLEdBQUEsZ0JBQUEsY0FHQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBR0EsR0FBQSxFQUFBLFdBQ0EsRUFBQSxFQUFBLGdCQUlBLEtBRkEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBRUEsR0FBQSxDQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFNQSxHQUFBLEVBQUEsWUFBQSxLQUFBLEVBQUEsVUFBQSxFQUFBLE1BSUEsUUFBQSxJQUFBLEdBRUEsSUFEQSxHQUFBLEdBQUEsR0FDQSxFQUFBLFlBQ0EsRUFBQSxZQUFBLEVBQUEsWUFJQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLElBQUEsR0FBQSxFQUFBLFVBQ0EsSUFBQSxFQUFBLFlBQUEsR0FpRUEsUUFBQSxJQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsR0FBQSxFQUFBLGNBR0EsT0FBQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBR0EsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLFFBQUEsVUFBQSxHQUFBLGFBQUEsSUFBQSxHQUFBLEdBMktBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsbUJBQUEsV0FDQSxNQUFBLEdBQUEsaUJBR0EsSUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxDQUVBLElBQUEsRUFBQSxDQUVBLEdBQUEsRUFBQSxFQUFBLDZCQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsd0JBQ0EsR0FBQSx5QkFBQSxXQUNBLEVBQUEsNkJBQUEsRUFFQSxFQUFBLGlCQUNBLEVBQUEsa0JBR0EsR0FDQSxFQUFBLEtBQUEsSUFLQSxFQUFBLDhCQUFBLFdBQ0EsTUFBQSxHQUFBLCtCQUFBLEdBSUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUdBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxpQ0FDQSxFQUFBLEdBQUEsS0FBQSxFQUFBLElBUUEsT0FEQSxHQUFBLEtBQUEsRUFDQSxFQW1RQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsU0FFQSxJQUFBLEVBSUEsTUFIQSxrQkFBQSxLQUNBLEVBQUEsRUFBQSxhQUVBLENBR0EsSUFBQSxTQUFBLEVBT0EsT0FMQSxHQURBLFlBQUEsR0FBQSxVQUFBLEdBQUEsT0FBQSxFQUNBLEVBQUEsVUFBQSxFQUFBLEtBQUEsR0FBQSxLQUVBLEVBQUEsSUFBQSxFQVNBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLENBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxHQUdBLEVBQUEsRUFBQSxLQUFBLElBQUEsTUFrR0EsUUFBQSxJQUFBLEdBR0EsR0FBQSxHQUFBLEVBQUEsV0FBQSxRQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsTUFBQSxHQUNBLE9BQUEsR0FDQSxhQUFBLEVBQUEsSUFBQSxJQUFBLFFBQUEsWUFBQSxLQUFBLElBRUEsS0FHQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUNBLEVBQ0EsRUFDQSxDQUVBLElBQUEsa0JBQUEsSUFDQSxLQUFBLEVBQUEsRUFBQSxTQUFBLENBRUEsR0FEQSxLQUNBLEVBQUEsT0FBQSxDQUNBLEdBQUEsRUFJQSxLQUhBLEdBQUEsSUFBQSxJQUNBLEVBQUEsRUFBQSxNQUFBLEdBQUEsSUFFQSxHQUFBLFdBQ0EsNEVBQUEsRUFFQSxHQUFBLEVBQUEsV0FBQSxRQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsTUFBQSxJQUNBLEVBQUEsRUFBQSxHQUFBLE1BQUEsSUFBQSxTQUFBLEdBQ0EsRUFBQSxRQUFBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsT0FJQSxFQUFBLFFBQUEsT0FFQSxJQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsRUFDQSxHQUFBLEVBQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsSUFFQSxHQUFBLEVBQUEsTUFBQSxFQUVBLE9BQUEsR0E4ZUEsUUFBQSxJQUFBLEVBQUEsR0FvQ0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FDQSxHQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxJQUtBLFFBQUEsR0FBQSxFQUFBLEdBS0EsR0FKQSxHQUFBLEVBQUEsWUFDQSxFQUFBLElBQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxZQUFBLEtBRUEsRUFBQSxLQUNBLEtBQUEsSUFBQSxPQUFBLGtEQUFBLEVBRUEsT0FBQSxHQUFBLEVBQUEsR0FBQSxFQUdBLFFBQUEsR0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxJQUVBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFlBQUEsTUFJQSxRQUFBLEdBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxFQUFBLEVBQUEsSUFFQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxZQUNBLEVBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxFQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLElBRUEsR0FBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLE9BQUEsRUFBQSxNQUFBLFVBQUEsS0FPQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsSUE0Q0EsT0EzQ0EsR0FBQSxFQUFBLFNBQUEsR0FJQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsQ0FDQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLElBQUEsRUFBQSxHQUVBLEdBQUEsRUFBQSxJQUFBLE1BQUEsRUFBQSxFQUFBLEtBVEEsSUFBQSxFQUFBLElBQUEsR0FBQSxDQUNBLEVBQUEsSUFBQSxHQUFBLEVBWUEsS0FDQSxFQUFBLElBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFdBQUEsT0FBQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLGdCQUNBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxPQUFBLElBQ0EsR0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE9BQUEsSUFFQSxHQUFBLEVBQUEsVUFFQSxNQUFBLEdBWUEsS0FYQSxJQUFBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUVBLEVBQUEsU0FBQSxFQUFBLE9BQUEsSUFBQSxFQUFBLE1BQUEsUUFBQSxFQUFBLFdBTUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxFQUFBLE9BRUEsR0FBQSxXQUFBLGdEQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxPQUdBLEVBT0EsUUFBQSxHQUFBLEVBQUEsR0FFQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEVBQUEsZUFBQSxHQUFBLENBQ0EsR0FBQSxFQUFBLEtBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSxpQ0FDQSxFQUFBLE9BQUEsRUFBQSxLQUFBLFFBRUEsT0FBQSxHQUFBLEdBRUEsSUFHQSxNQUZBLEdBQUEsUUFBQSxHQUNBLEVBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUlBLEtBSEEsR0FBQSxLQUFBLFNBQ0EsR0FBQSxHQUVBLEVBQ0EsUUFDQSxFQUFBLFNBS0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsZ0JBQUEsS0FDQSxFQUFBLEVBQ0EsRUFBQSxLQUdBLElBRUEsR0FBQSxFQUNBLEVBSEEsS0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBSUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsQ0FFQSxHQURBLEVBQUEsRUFBQSxHQUNBLGdCQUFBLEdBQ0EsS0FBQSxJQUFBLE9BQ0Esc0VBQUEsRUFFQSxHQUFBLEtBQ0EsR0FBQSxFQUFBLGVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxJQVNBLE1BTkEsSUFBQSxLQUNBLEVBQUEsRUFBQSxJQUtBLEVBQUEsTUFBQSxFQUFBLEdBR0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEdBQ0EsR0FBQSxFQURBLEVBQUEsWUFTQSxPQUpBLEdBQUEsV0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxHQUFBLFVBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEVBR0EsT0FDQSxPQUFBLEVBQ0EsWUFBQSxFQUNBLElBQUEsRUFDQSxTQUFBLEdBQ0EsSUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLGVBQUEsRUFBQSxJQUFBLEVBQUEsZUFBQSxLQXJOQSxFQUFBLEtBQUEsQ0FDQSxJQUFBLE1BQ0EsRUFBQSxXQUNBLEtBQ0EsRUFBQSxHQUFBLFFBQUEsR0FDQSxHQUNBLFVBQ0EsU0FBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLEdBQ0EsTUFBQSxFQUFBLEdBQ0EsU0FBQSxFQUFBLEdBQ0EsVUFBQSxJQUdBLEVBQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxXQUNBLEtBQUEsSUFBQSxPQUFBLHdCQUFBLEVBQUEsS0FBQSxXQUVBLEtBQ0EsRUFBQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsRUFDQSxPQUFBLEdBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLElBTUEsT0FGQSxHQUFBLEVBQUEsR0FBQSxTQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsS0FFQSxFQW1QQSxRQUFBLE1BRUEsR0FBQSxJQUFBLENBRUEsTUFBQSxxQkFBQSxXQUNBLEdBQUEsR0FHQSxLQUFBLE1BQUEsVUFBQSxZQUFBLGFBQUEsU0FBQSxFQUFBLEVBQUEsR0FPQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsSUFJQSxPQUhBLEdBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLEtBRUEsRUFHQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxNQUdBLElBR0EsRUFBQSxFQUFBLGVBQUEsSUFBQSxFQUFBLGtCQUdBLEVBQUEsRUFBQSxFQUFBLGtCQUFBLEtBQUEsRUFBQSxpQkFHQSxRQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsR0FUQSxFQUFBLFNBQUEsRUFBQSxHQWxCQSxHQUFBLEdBQUEsRUFBQSxRQXVDQSxPQVBBLElBQ0EsRUFBQSxPQUFBLFdBQUEsTUFBQSxHQUFBLFFBQ0EsV0FDQSxFQUFBLFdBQUEsS0FJQSxJQXVQQSxRQUFBLE1BQ0EsS0FBQSxNQUFBLFFBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsVUFDQSxTQUFBLEdBQUEsTUFBQSxHQUFBLElBQ0EsU0FBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEdBQUEsTUEyQkEsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBc0JBLFFBQUEsR0FBQSxHQUNBLElBQ0EsRUFBQSxNQUFBLEtBQUEsRUFBQSxVQUFBLElBQ0EsUUFFQSxHQURBLElBQ0EsSUFBQSxFQUNBLEtBQUEsRUFBQSxRQUNBLElBQ0EsRUFBQSxRQUNBLE1BQUEsR0FDQSxFQUFBLE1BQUEsS0F5REEsUUFBQSxHQUFBLEVBQUEsSUFDQSxRQUFBLEtBQ0EsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLE1Bb0VBLFFBQUEsS0FDQSxFQUFBLEtBQ0EsR0FBQSxFQUFBLFFBRUEsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsVUFyS0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFdBQ0EsRUFBQSxFQUFBLGFBQ0EsSUFFQSxHQUFBLFFBQUEsQ0FFQSxJQUFBLEdBQUEsRUFDQSxJQUdBLEdBQUEsNkJBQUEsRUFDQSxFQUFBLDZCQUFBLFdBQUEsS0E2QkEsRUFBQSxnQ0FBQSxTQUFBLEdBSUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUVBLElBQUEsRUFDQSxJQUVBLEVBQUEsS0FBQSxHQU9BLElBQ0EsR0FEQSxJQWNBLEdBQUEsVUFBQSxTQUFBLEdBR0EsTUFGQSxHQUFBLElBQUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFzQkEsSUFBQSxHQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsS0FBQSxRQUNBLEVBQUEsSUFxQkEsR0FBQSxJQUFBLFNBQUEsRUFBQSxHQU1BLEdBSkEsSUFBQSxFQUFBLFdBQUEsRUFBQSxFQUFBLFVBQ0EsSUFBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLFNBR0EsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLE1BaUJBLE9BaEJBLEdBQUEsRUFDQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLGFBQUEsS0FBQSxHQUFBLElBRUEsRUFBQSxVQUFBLEtBQUEsR0FBQSxHQUVBLEVBQUEsS0FBQSxPQUFBLEVBQUEsS0FBQSxXQUdBLEVBQUEsRUFDQSxFQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxHQUdBLEVBTUEsTUFBQSxJQUFBLEVBQUEsS0FBQSxRQUFBLE9BQUEsS0FJQSxJQUFBLE1BQ0EsR0FBQSxDQWlDQSxHQUFBLFlBQUEsU0FBQSxHQWtCQSxNQWhCQSxLQU1BLEVBQUEsU0FBQSxHQUFBLEdBQUEsR0FBQSxXQUFBLEdBRUEsRUFBQSxXQUFBLEdBQUEsR0FBQSxHQUFBLGFBQUEsR0FFQSxFQUFBLFVBQUEsR0FFQSxHQUFBLEdBR0EsRUFBQSxLQUFBLEdBQ0EsR0FRQSxFQUFBLGlCQUFBLEVBZUEsRUFBQSxTQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxPQUNBLE9BQUEsR0FBQSxFQUFBLFFBQUEseUJBQUEsSUFBQSxHQU1BLElBQUEsTUFDQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFVBc0JBLEdBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsQ0FFQSxLQUFBLEVBb0JBLENBQ0EsR0FBQSxFQUFBLFNBQUEsRUFLQSxJQUpBLEVBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxNQUFBLE1BQ0EsS0FFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsUUFBQSxLQUNBLEVBQUEsSUFDQSxFQUFBLG1CQUFBLEVBQUEsVUFBQSxFQUFBLElBSUEsRUFBQSxLQUFBLElBQ0EsRUFBQSxHQUFBLG1CQUFBLEVBQUEsVUFBQSxFQUFBLEtBS0EsT0FBQSxHQXZDQSxJQUFBLEVBQ0EsRUFBQSxPQUFBLG1CQUFBLEdBQUEsVUFBQSxFQUNBLHlDQUVBLEVBQUEsS0FDQSxHQUFBLEVBQUEsT0FBQSxtQkFBQSxHQUFBLElBQUEsbUJBQUEsR0FDQSxTQUFBLEdBQUEsT0FBQSxFQU1BLEVBQUEsTUFDQSxFQUFBLEtBQUEsV0FBQSxFQUNBLDhEQUNBLEVBQUEscUJBMkNBLEVBQUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEVBT0EsT0FOQSxLQUNBLEVBQUEsRUFBQSxpQkFDQSxHQUFBLEdBQ0EsRUFBQSxJQUNBLEdBQUEsR0FDQSxFQUFBLElBQUEsRUFDQSxHQWNBLEVBQUEsTUFBQSxPQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsVUFDQSxHQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsSUFDQSxJQUVBLEdBS0EsUUFBQSxNQUNBLEtBQUEsTUFBQSxVQUFBLE9BQUEsV0FBQSxZQUNBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxLQXFGQSxRQUFBLE1BRUEsS0FBQSxLQUFBLFdBR0EsUUFBQSxHQUFBLEVBQUEsR0F3TUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxJQUNBLEVBRUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxHQUZBLEVBQUEsRUFLQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxNQVFBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUNBLElBQUEsRUFBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLEVBQUEsSUE3TkEsR0FBQSxJQUFBLEdBQ0EsS0FBQSxHQUFBLGlCQUFBLE1BQUEsa0NBQUEsRUFHQSxJQUFBLEdBQUEsRUFDQSxFQUFBLEtBQUEsR0FBQSxHQUFBLElBQ0EsS0FDQSxFQUFBLEdBQUEsRUFBQSxVQUFBLE9BQUEsVUFDQSxLQUNBLEVBQUEsS0FDQSxFQUFBLElBeUNBLE9BQUEsR0FBQSxJQW9CQSxJQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxPQUFBLFVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxJQUFBLEdBRUEsR0FBQSxHQUdBLElBQUEsRUFBQSxHQVFBLE1BUEEsS0FBQSxJQUFBLElBQ0EsRUFBQSxHQUFBLEVBRUEsRUFBQSxHQUNBLEtBQUEsT0FBQSxFQUFBLEtBR0EsR0FjQSxJQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsT0FBQSxVQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFFQSxLQUFBLEVBQUEsTUFFQSxHQUFBLEdBR0EsTUFBQSxHQUFBLElBY0EsT0FBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLE9BQUEsVUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBRUEsS0FBQSxFQUFBLE1BRUEsSUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBRUEsR0FBQSxTQUdBLEdBQUEsR0FDQSxLQVlBLFVBQUEsV0FDQSxLQUNBLEVBQUEsRUFDQSxLQUNBLEVBQUEsRUFBQSxNQWFBLFFBQUEsV0FDQSxFQUFBLEtBQ0EsRUFBQSxLQUNBLEVBQUEsV0FDQSxHQUFBLElBb0JBLEtBQUEsV0FDQSxNQUFBLE1BQUEsR0FBQSxLQUFBLE1BbE1BLEdBQUEsS0F1UUEsT0F4QkEsR0FBQSxLQUFBLFdBQ0EsR0FBQSxLQUlBLE9BSEEsR0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLFNBRUEsR0FjQSxFQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUlBLEdBOENBLFFBQUEsTUFDQSxLQUFBLE1BQUEsZ0JBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxlQXNqQkEsUUFBQSxJQUFBLEVBQUEsR0FZQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSwrQkFFQSxJQW1CQSxPQWpCQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxFQUVBLEtBQUEsRUFDQSxLQUFBLElBQUEsT0FDQSx5RkFFQSxFQUFBLEVBQUEsRUFHQSxHQUFBLElBQ0EsU0FBQSxFQUFBLElBQUEsRUFDQSxLQUFBLEVBQUEsR0FDQSxTQUFBLE1BQUEsRUFBQSxNQUlBLEVBakNBLEdBQUEsTUFDQSxFQUFBLFlBQ0EsRUFBQSx5Q0FDQSxFQUFBLGlDQUNBLEVBQUEsRUFBQSw2QkFLQSxFQUFBLHlCQTBDQSxNQUFBLFVBQUEsUUFBQSxHQUFBLEVBQUEsR0FxQ0EsTUFwQ0EsSUFBQSxFQUFBLGFBQ0EsRUFBQSxJQUNBLEdBQUEsRUFBQSxvQkFDQSxFQUFBLGVBQUEsS0FDQSxFQUFBLE1BQ0EsRUFBQSxRQUFBLEVBQUEsR0FBQSxZQUFBLG9CQUNBLFNBQUEsRUFBQSxHQUNBLEdBQUEsS0FzQkEsT0FyQkEsR0FBQSxFQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsSUFDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEVBQ0EsR0FBQSxHQUNBLEdBQUEsUUFBQSxFQUFBLEtBQ0EsRUFBQSxTQUFBLEVBQUEsT0FDQSxFQUFBLFFBQUEsRUFBQSxFQUFBLE9BRUEsRUFBQSxTQUFBLEVBQUEsVUFBQSxFQUNBLEVBQUEsTUFBQSxFQUNBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFDQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsWUFBQSxFQUFBLEtBQ0EsRUFBQSxTQUFBLEVBQUEsVUFBQSxLQUNBLEVBQUEsRUFBQSxTQUNBLEVBQUEsa0JBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxPQUVBLEVBQUEsS0FBQSxHQUNBLE1BQUEsR0FDQSxFQUFBLE1BR0EsTUFHQSxFQUFBLEdBQUEsS0FBQSxJQUVBLEVBQUEsRUFBQSxFQUFBLElBRUEsTUF3QkEsS0FBQSwyQkFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSwyQkFBQSxHQUNBLE1BRUEsRUFBQSw4QkF5QkEsS0FBQSw0QkFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSw0QkFBQSxHQUNBLE1BRUEsRUFBQSw4QkEwQkEsSUFBQSxJQUFBLENBQ0EsTUFBQSxpQkFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUNBLE1BRUEsR0FHQSxLQUFBLE1BQ0EsWUFBQSxlQUFBLG9CQUFBLG1CQUFBLFNBQ0EsY0FBQSxhQUFBLFlBQUEsT0FBQSxXQUFBLGdCQUNBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQTJMQSxRQUFBLEdBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxTQUFBLEdBQ0EsTUFBQSxLQTZDQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxHQUNBLFlBQUEsTUFHQSxFQUFBLEdBQUEsSUFJQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLFVBQUEsRUFBQSxVQUFBLE1BQUEsU0FDQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEtBQUEsaUJBQUEsU0FBQSxLQUdBLElBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUNBLEdBQUEsZ0JBQUEsRUFDQSxJQUVBLEdBRkEsRUFBQSxLQUNBLEVBQUEsQ0FFQSxPQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxTQUNBLElBQ0EsRUFBQSxFQUFBLElBRUEsU0FBQSxHQUFBLEVBQUEsS0FBQSxJQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxTQUFBLE9BQUEsR0FBQSxVQUtBLEVBQUEsRUFBQSxFQUlBLElBQUEsR0FBQSxFQUNBLEdBQUEsTUFBQSxLQUFBLEdBQ0EsQ0FFQSxJQUFBLEVBQ0EsSUFBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLGFBQUEsRUFBQSxHQUFBLFNBUUEsT0FKQSxHQUFBLGVBQUEsRUFBQSxHQUVBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FJQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxJQUdBLGtCQUFBLEVBQUEsSUFBQSxFQUFBLFdBQUEsTUFBQSxPQUFBLE1BRkEsT0FxQkEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxHQTBDQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxDQUdBLElBQUEsRUFBQSxDQUdBLEdBQUEsR0FBQSxFQUFBLE1BSUEsS0FIQSxFQUFBLEdBQUEsT0FBQSxHQUdBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsT0FHQSxHQUFBLENBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLEtBRUEsR0FDQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxlQUFBLEdBQUEsR0FBQSxJQUVBLEVBQUEsRUFJQSxFQURBLEVBQUEsd0JBQ0EsRUFDQSxFQUFBLEVBQUEsV0FBQSxFQUNBLEVBQUEsaUNBRUEsRUFBQSx1QkFBQSxFQUNBLEdBRUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxHQUdBLEtBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBRUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsR0F6RkEsSUFBQSxHQUZBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBREEsS0FHQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEdBQUEsSUFHQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFDQSxHQUVBLEVBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQ0EsV0FBQSxHQUNBLEtBRUEsR0FBQSxFQUFBLE9BQ0EsRUFBQSxnQkFBQSxFQUFBLFdBR0EsRUFBQSxHQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsR0FBQSxjQUNBLEVBQUEsT0FDQSxLQUNBLEVBQUEsRUFDQSxHQUNBLEVBQUEsMEJBQUEsRUFBQSx3QkFDQSxFQUFBLFdBQUEsSUFFQSxHQUFBLEtBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFDQSxFQUFBLEdBQUEsR0FJQSxFQUFBLElBSUEsT0FBQSxHQUFBLEVBQUEsS0EyREEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsQ0FFQSxLQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsZUFBQSxFQUNBLEdBQUEsRUFHQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBSUEsT0FIQSxLQUFBLEdBQ0EsRUFBQSxHQUFBLFdBQUEsV0FBQSxFQUFBLGFBRUEsRUFHQSxPQUFBLEdBYUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUVBLEdBQ0EsRUFIQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsS0FJQSxRQUFBLEdBQ0EsSUFBQSxHQUVBLEVBQUEsRUFDQSxHQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsRUFHQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFdBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLElBQUEsRUFDQSxHQUFBLENBR0EsSUFEQSxFQUFBLEVBQUEsSUFDQSxJQUFBLElBQUEsR0FBQSxFQUFBLFVBQUEsQ0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsRUFBQSxPQUdBLEVBQUEsR0FBQSxJQUNBLEVBQUEsR0FBQSxLQUFBLE1BQ0EsRUFBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEtBR0EsSUFBQSxHQUFBLEVBQUEsUUFBQSxlQUFBLEdBQ0EsR0FBQSxJQUNBLElBQUEsRUFBQSxVQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsSUFJQSxFQUFBLEdBQUEsRUFBQSxlQUNBLEVBQUEsR0FBQSxHQUNBLElBQUEsRUFBQSxlQUFBLE1BQ0EsRUFBQSxHQUFBLEVBQ0EsR0FBQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLElBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFDQSxJQU1BLEdBREEsRUFBQSxFQUFBLFVBQ0EsRUFBQSxJQUFBLEtBQUEsRUFDQSxLQUFBLEVBQUEsRUFBQSxLQUFBLElBQ0EsRUFBQSxHQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEtBRUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxPQUdBLE1BQ0EsS0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFVBQ0EsTUFDQSxLQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsS0FBQSxFQUFBLFdBQ0EsSUFDQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxHQUFBLEVBQUEsTUFHQSxNQUFBLEtBU0EsTUFEQSxHQUFBLEtBQUEsR0FDQSxFQVdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLE1BQ0EsRUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxhQUFBLEdBQUEsQ0FFQSxFQUFBLENBQ0EsSUFBQSxFQUNBLEtBQUEsSUFBQSxVQUNBLG1FQUNBLEVBQUEsRUFFQSxJQUFBLEVBQUEsV0FDQSxFQUFBLGFBQUEsSUFBQSxJQUNBLEVBQUEsYUFBQSxJQUFBLEtBRUEsRUFBQSxLQUFBLEdBQ0EsRUFBQSxFQUFBLGtCQUNBLEVBQUEsT0FFQSxHQUFBLEtBQUEsRUFHQSxPQUFBLElBQUEsR0FXQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQTJCQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEdBaU5BLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLElBQ0EsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGNBQUEsR0FDQSxJQUFBLEdBQUEsRUFBQSxrQkFDQSxFQUFBLEdBQUEsR0FBQSxjQUFBLEtBRUEsRUFBQSxLQUFBLElBRUEsSUFDQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLFFBQUEsRUFBQSxRQUNBLEVBQUEsY0FBQSxHQUNBLElBQUEsR0FBQSxFQUFBLGtCQUNBLEVBQUEsR0FBQSxHQUFBLGNBQUEsS0FFQSxFQUFBLEtBQUEsSUFLQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsQ0FDQSxJQUFBLEVBQUEsR0FBQSxDQUNBLEtBQUEsTUFBQSxFQUFBLEVBQUEsT0FBQSxLQUFBLEtBQUEsR0FDQSxFQUFBLEVBQUEsT0FBQSxHQUNBLEtBQUEsSUFDQSxFQUFBLGlCQUVBLEVBQUEsR0FBQSxLQUFBLENBV0EsSUFUQSxFQUFBLEtBRUEsR0FBQSxTQUFBLElBQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLFVBR0EsRUFBQSxHQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsZUFFQSxJQUFBLEVBQ0EsS0FBQSxJQUFBLFFBQ0EsaUVBQ0EsRUFBQSxFQUVBLE9BQUEsR0FPQSxNQU5BLElBQUEsS0FDQSxLQUNBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FHQSxFQUlBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBNEtBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBZUEsT0FaQSxHQUFBLEtBQ0EsRUFBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEdBR0EsSUFDQSxFQUFBLEdBRUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQTNMQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxDQWdEQSxJQTlDQSxJQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxZQUVBLEVBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxJQUFBLEVBQUEsSUFHQSxJQUNBLEVBQUEsRUFBQSxNQUFBLElBR0EsRUFBQSxHQUFBLEVBQ0EsSUFFQSxLQUNBLEtBQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxHQUtBLEdBTEEsR0FDQSxPQUFBLElBQUEsR0FBQSxFQUFBLGVBQUEsRUFBQSxFQUNBLFNBQUEsRUFDQSxPQUFBLEVBQ0EsWUFBQSxFQUdBLEdBQUEsRUFBQSxXQUNBLEtBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxPQUdBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLGNBT0EsRUFBQSxFQUFBLE1BQUEsRUFDQSxHQUNBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxhQUFBLEVBQUEsVUFHQSxFQUFBLEVBQUEsTUFBQSxLQUlBLEVBQUEsQ0FHQSxFQUFBLGVBQUEsRUFBQSxHQUFBLElBQUEsSUFBQSxJQUFBLEdBQ0EsSUFBQSxFQUFBLHVCQUNBLEVBQUEsZ0JBQUEsR0FBQSxFQUVBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxNQUNBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsWUFDQSxFQUFBLG9CQUFBLElBQ0EsRUFBQSxFQUFBLFVBR0EsRUFBQSxFQUFBLGtCQUFBLEVBQUEsa0JBQUEsU0FBQSxFQUFBLEdBQ0EsR0FHQSxHQUNBLEVBQUEsRUFBQSxFQUpBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxJQUlBLFFBQUEsR0FFQSxJQUFBLElBQ0EsRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxJQUVBLEVBQUEsWUFBQSxHQUFBLFFBQUEsRUFDQSxFQUFBLEtBR0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEdBRUEsTUFFQSxLQUFBLElBQ0EsR0FBQSxJQUFBLEVBQUEsR0FDQSxNQUVBLEdBQUEsRUFBQSxFQUFBLElBRUEsRUFEQSxFQUFBLFFBQ0EsRUFFQSxTQUFBLEVBQUEsR0FBQSxNQUFBLEtBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxHQUVBLEVBQUEsRUFBQSxRQUFBLFdBR0EsS0FEQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxZQUNBLGdFQUNBLEVBQUEsR0FBQSxFQUFBLE9BRUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxTQUFBLEdBV0EsTUFWQSxHQUFBLEVBQUEsRUFBQSxNQUVBLEVBQUEsRUFBQSxHQUtBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFIQSxFQUFBLEdBQUEsR0FNQSxFQUFBLEVBRUEsR0FBQSxXQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEtBQUEsRUFBQSxRQUNBLEdBQUEsSUFBQSxXQUFBLEVBQ0EsTUFFQSxLQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLE9BY0EsSUFSQSxJQUNBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsTUFFQSxFQUFBLE1BSUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFDQSxFQUFBLGFBQUEsRUFBQSxFQUNBLEVBQ0EsRUFDQSxFQUFBLFNBQUEsRUFBQSxFQUFBLGNBQUEsRUFBQSxRQUFBLEVBQUEsR0FDQSxFQU9BLElBQUEsR0FBQSxDQU9BLEtBTkEsSUFBQSxFQUFBLFVBQUEsT0FBQSxFQUFBLGVBQ0EsRUFBQSxHQUVBLEdBQUEsRUFBQSxFQUFBLEVBQUEsV0FBQSxFQUFBLEdBR0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQUEsRUFDQSxFQUNBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsRUFBQSxjQUFBLEVBQUEsUUFBQSxFQUFBLEdBQ0EsR0EvYUEsRUFBQSxLQXNCQSxLQUFBLEdBbkJBLEdBRUEsRUFRQSxFQUNBLEVBQ0EsRUFHQSxFQUNBLEVBakJBLEdBQUEsT0FBQSxVQUVBLEVBQUEsRUFBQSxxQkFFQSxFQUFBLEVBQUEseUJBQ0EsRUFBQSxFQUFBLGtCQUNBLEVBQUEsRUFBQSwwQkFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSw4QkFDQSxFQUFBLEVBQUEsVUFBQSxHQUFBLEdBSUEsRUFBQSxFQUNBLEVBQUEsRUFLQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxFQUFBLEVBQUEsRUFDQSxJQUFBLElBQUEsRUFBQSxRQUNBLEdBQUEsRUFBQSxLQVFBLElBTEEsS0FDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEtBRUEsRUFBQSxFQUVBLEVBQUEsRUFBQSxTQUNBLEtBMEVBLEtBdkVBLEVBQUEsRUFBQSxTQUlBLEVBQUEsY0FDQSxFQUFBLElBR0EsRUFBQSxxQkFBQSxHQUFBLEVBQ0EsRUFBQSxHQUNBLEVBQUEsR0FJQSxFQUFBLHFCQUFBLEVBQUEsRUFDQSxJQUlBLEVBQUEsR0FBQSxHQUdBLEVBQUEsRUFBQSxNQUVBLEVBQUEsYUFBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLFdBQ0EsRUFBQSxNQUNBLEVBQUEsSUFBQSxFQUFBLGVBQ0EsRUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsSUFHQSxFQUFBLEVBQUEsY0FDQSxHQUFBLEVBS0EsRUFBQSxRQUNBLEVBQUEsZUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBR0EsV0FBQSxHQUNBLEdBQUEsRUFDQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFVBQ0EsR0FBQSxFQUFBLGNBQUEsSUFBQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxHQUFBLEVBQUEsTUFRQSwwQkFBQSxNQUdBLEVBQUEsR0FBQSxHQUFBLElBQUEsV0FDQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsS0FJQSxFQUFBLFNBV0EsR0FWQSxHQUFBLEVBQ0EsRUFBQSxXQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFFQSxFQUFBLEVBQUEsRUFBQSxVQUNBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUVBLEVBQUEsR0FBQSxHQUVBLEVBQUEsUUFBQSxDQVNBLEdBUkEsRUFBQSxFQUVBLEVBREEsR0FBQSxNQUdBLEdBQUEsRUFBQSxFQUFBLGtCQUFBLEdBQUEsS0FFQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsUUFBQSxJQUFBLEVBQUEsU0FDQSxLQUFBLElBQUEsUUFDQSx1RUFDQSxFQUFBLEdBR0EsSUFBQSxFQUFBLEVBQUEsRUFFQSxJQUFBLEtBQUEsVUFPQSxHQUFBLEVBQUEsS0FBQSxJQUNBLEdBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxHQUVBLElBQ0EsRUFBQSxJQUVBLEVBQUEsRUFBQSxPQUFBLElBQUEsT0FBQSxJQUNBLEVBQUEsRUFBQSxJQUVBLEdBQUEsRUFBQSxXQUVBLEdBQUEsS0FBQSxFQUlBLElBQUEsRUFBQSxZQUNBLEdBQUEsRUFDQSxFQUFBLFdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUVBLEVBQUEsVUFDQSxFQUFBLEdBR0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EscUJBQUEsRUFDQSx5QkFBQSxFQUNBLGtCQUFBLEVBQ0EsMEJBQUEsSUFFQSxHQUFBLEVBQUEsV0FDQSxJQUFBLEVBQUEsUUFDQSxJQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLElBQ0EsR0FDQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsR0FBQSxJQUVBLE1BQUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxJQUlBLEVBQUEsV0FDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsV0FjQSxNQVRBLEdBQUEsTUFBQSxHQUFBLEVBQUEsU0FBQSxFQUNBLEVBQUEsd0JBQUEsRUFDQSxFQUFBLCtCQUFBLEVBQ0EsRUFBQSxzQkFBQSxFQUNBLEVBQUEsV0FBQSxFQUVBLEVBQUEsOEJBQUEsRUFHQSxFQThQQSxRQUFBLEdBQUEsR0FFQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxnQkFBQSxJQWtCQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsR0FDQSxHQUFBLElBQUEsRUFBQSxNQUFBLEtBQ0EsSUFBQSxHQUFBLElBQ0EsSUFBQSxFQUFBLGVBQUEsR0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLElBQ0EsRUFBQSxFQUFBLElBQ0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxXQUNBLElBQUEsRUFBQSxTQUFBLFFBQUEsS0FDQSxJQUNBLEVBQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxNQUFBLEtBRUEsRUFBQSxLQUFBLEdBQ0EsRUFBQSxHQUVBLE1BQUEsR0FBQSxFQUFBLEdBR0EsTUFBQSxHQVlBLFFBQUEsR0FBQSxHQUNBLEdBQUEsRUFBQSxlQUFBLEdBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFFQSxHQURBLEVBQUEsRUFBQSxHQUNBLEVBQUEsYUFDQSxPQUFBLENBSUEsUUFBQSxFQVdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsU0FHQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxFQUFBLE9BQUEsS0FDQSxFQUFBLElBQUEsRUFBQSxLQUFBLElBQ0EsSUFBQSxVQUFBLEVBQUEsSUFBQSxLQUFBLEVBQUEsSUFFQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxPQUtBLEVBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsSUFBQSxJQUFBLEdBQ0EsU0FBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLEVBQUEsS0FBQSxTQUFBLElBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxJQUFBLElBQUEsR0FJQSxLQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsZUFBQSxLQUNBLEVBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxFQUFBLE1BTUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUNBLEdBQ0EsRUFGQSxLQUdBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxRQUVBLEVBQUEsS0FBQSxHQUNBLFlBQUEsS0FBQSxXQUFBLEtBQUEsUUFBQSxLQUFBLG9CQUFBLElBRUEsRUFBQSxFQUFBLEVBQUEsYUFDQSxFQUFBLFlBQUEsRUFBQSxHQUNBLEVBQUEsWUFDQSxFQUFBLEVBQUEsaUJBaUZBLE9BL0VBLEdBQUEsUUFFQSxFQUFBLEVBQUEsc0JBQUEsSUFDQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBSUEsSUFGQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFFBQUEsQ0FRQSxHQU5BLEVBREEsR0FBQSxNQUdBLEdBQUEsRUFBQSxFQUFBLEdBQUEsS0FFQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsUUFBQSxJQUFBLEVBQUEsU0FDQSxLQUFBLElBQUEsUUFDQSx1RUFDQSxFQUFBLEtBQUEsRUFHQSxJQUFBLFVBQ0EsR0FBQSxFQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBRUEsR0FBQSxFQUFBLFFBQ0EsRUFBQSxHQUVBLEVBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxFQUFBLE9BRUEsR0FBQSxFQUNBLEVBQUEsS0FBQSxFQWVBLEtBWkEsRUFBQSxRQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxHQUNBLEVBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLElBQ0EsRUFBQSxHQUFBLEVBQUEsTUFHQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFdBQUEsR0FFQSxFQUFBLFFBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxFQUVBLElBQUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsU0FFQSxHQUFBLCtCQUNBLEVBQUEsVUFFQSxFQUFBLEdBQUEsSUFFQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBR0EsRUFBQSxHQUFBLEdBQUEsR0FHQSxFQURBLEVBQUEsd0JBQ0EsRUFBQSxFQUFBLEVBQUEsV0FBQSxHQUVBLEVBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEdBRUEsRUFBQSxPQUdBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxDQUNBLElBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLEtBRUEsRUFBQSwwQkFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFdBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsS0FTQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxRQUNBLE9BQUEsS0FBQSxFQUFBLEVBQ0EsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEdBQUEsRUFDQSxFQUFBLE1BQUEsRUFBQTtDQUlBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFDQSxLQUFBLElBQUEsV0FBQSx3REFDQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxJQUtBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUNBLElBQ0EsRUFBQSxNQUNBLFNBQUEsRUFDQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUNBLElBQUEsRUFBQSxNQU1BLE9BRkEsSUFBQSxFQUFBLGtCQUFBLEdBRUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxJQUFBLEVBQUEsa0JBQUEsR0FDQSxFQUFBLGlCQUFBLEVBQUEsRUFBQSxhQUNBLEVBQUEsT0FBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEdBQUEsVUFBQSxRQVNBLFFBQUEsR0FBQSxFQUFBLEdBRUEsT0FEQSxFQUFBLEdBQUEsR0FBQSxTQUVBLElBQUEsTUFDQSxJQUFBLE9BQ0EsR0FBQSxHQUFBLEVBQUEsY0FBQSxNQUVBLE9BREEsR0FBQSxVQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLElBQ0EsRUFBQSxXQUFBLEdBQUEsVUFDQSxTQUNBLE1BQUEsSUFLQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsVUFBQSxFQUNBLE1BQUEsR0FBQSxJQUVBLElBQUEsR0FBQSxFQUFBLEVBRUEsT0FBQSxhQUFBLEdBQ0EsUUFBQSxHQUFBLFVBQUEsR0FDQSxPQUFBLElBQUEsT0FBQSxHQUNBLFNBQUEsR0FDQSxFQUFBLGFBSkEsT0FTQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFHQSxJQUFBLEVBQUEsQ0FHQSxHQUFBLGFBQUEsR0FBQSxXQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsV0FDQSxxRUFDQSxFQUFBLEdBR0EsR0FBQSxNQUNBLFNBQUEsSUFDQSxRQUFBLFdBQ0EsT0FDQSxJQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLGVBRUEsSUFBQSxFQUFBLEtBQUEsR0FDQSxLQUFBLElBQUEsY0FDQSwySUFNQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLEdBSUEsSUFLQSxFQUFBLEdBQUEsRUFBQSxJQUVBLEVBQUEsS0FBQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsYUFBQSxFQUFBLFlBQUEsR0FBQSxTQUFBLEdBQ0EsT0FBQSxFQUFBLFNBQUEsRUFBQSxHQU9BLFVBQUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsRUFBQSxZQW9CQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FHQSxHQUFBLEVBSEEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLFVBR0EsSUFBQSxFQUNBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEdBQUEsRUFBQSxJQUFBLEVBQUEsQ0FDQSxFQUFBLEtBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLElBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxHQUFBLEVBQUEsU0FFQSxHQUFBLEVBR0EsR0FBQSxRQUFBLEVBQUEsRUFLQSxFQUFBLFVBQUEsSUFDQSxFQUFBLFFBQUEsRUFFQSxPQUtBLEdBQ0EsRUFBQSxhQUFBLEVBQUEsRUFJQSxJQUFBLEdBQUEsRUFBQSx3QkFDQSxHQUFBLFlBQUEsR0FLQSxHQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsUUFLQSxJQVVBLElBQUEsRUFDQSxHQUFBLFdBQUEsV0FWQSxJQUFBLE1BQUEsRUFBQSxHQUFBLFNBYUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLFNBQ0EsRUFBQSxZQUFBLFNBQ0EsR0FBQSxHQUdBLEVBQUEsR0FBQSxFQUNBLEVBQUEsT0FBQSxFQUlBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLFdBQUEsTUFBQSxHQUFBLE1BQUEsS0FBQSxZQUFBLEVBQUEsR0FJQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsS0ExK0NBLEdBQUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsQ0FDQSxHQUNBLEdBQUEsRUFBQSxFQURBLEVBQUEsT0FBQSxLQUFBLEVBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEVBQUEsT0FHQSxNQUFBLFFBR0EsTUFBQSxVQUFBLEVBR0EsSUFBQSxXQUNBLFdBQUEsR0FjQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLFVBQUEsSUFlQSxhQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsWUFBQSxLQUFBLFVBQUEsSUFnQkEsYUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLEtBQUEsVUFBQSxFQUdBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFDQSxJQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsS0FBQSxVQUFBLElBYUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBS0EsR0FLQSxHQUxBLEVBQUEsS0FBQSxVQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsQ0FJQSxJQUNBLEtBQUEsVUFBQSxLQUFBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsSUFDQSxLQUFBLEdBQUEsRUFDQSxFQUFBLEdBR0EsS0FBQSxHQUFBLEVBR0EsRUFDQSxLQUFBLE1BQUEsR0FBQSxHQUVBLEVBQUEsS0FBQSxNQUFBLEdBQ0EsSUFDQSxLQUFBLE1BQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxPQUlBLEVBQUEsRUFBQSxLQUFBLFlBR0EsTUFBQSxHQUFBLFNBQUEsR0FDQSxRQUFBLEdBQUEsUUFBQSxLQUNBLEtBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxRQUFBLElBR0EsS0FBQSxJQUNBLE9BQUEsR0FBQSxJQUFBLEVBQ0EsS0FBQSxVQUFBLFdBQUEsR0FFQSxLQUFBLFVBQUEsS0FBQSxFQUFBLEdBS0EsSUFBQSxHQUFBLEtBQUEsV0FDQSxJQUFBLEVBQUEsRUFBQSxHQUFBLFNBQUEsR0FDQSxJQUNBLEVBQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxPQXdCQSxTQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxjQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLEtBQUEsRUFBQSxNQVVBLE9BUkEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxXQUFBLFdBQ0EsRUFBQSxTQUVBLEVBQUEsRUFBQSxNQUlBLFdBQ0EsRUFBQSxFQUFBLEtBZ0JBLElBQUEsSUFBQSxFQUFBLGNBQ0EsR0FBQSxFQUFBLFlBQ0EsR0FBQSxNQUFBLElBQUEsTUFBQSxHQUNBLEVBQ0EsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUFBLFFBQUEsSUFBQSxRQUFBLE1BQUEsS0FFQSxHQUFBLGNBMkJBLE9BekJBLEdBQUEsaUJBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLGVBRUEsSUFBQSxHQUNBLEVBQUEsRUFBQSxPQUFBLEdBRUEsRUFBQSxLQUFBLEdBR0EsRUFBQSxLQUFBLFdBQUEsSUFDQSxFQUVBLEVBQUEsa0JBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLGVBQ0EsRUFFQSxFQUFBLGVBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSwwQkFBQSxnQkFBQSxRQUNBLEdBQUEsS0FBQSxFQUFBLElBQ0EsRUFFQSxFQUFBLGdCQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsbUJBQUEsYUFDQSxFQUVBLElBdXhDQSxRQUFBLElBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxRQUFBLEdBQUEsS0ErREEsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxPQUNBLEVBQUEsRUFBQSxNQUFBLE1BRUEsR0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsQ0FFQSxJQUFBLEdBREEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLEVBRUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxJQUFBLElBQUEsRUFFQSxNQUFBLEdBYUEsUUFBQSxNQUNBLEdBQUEsTUFDQSxHQUFBLEVBQ0EsRUFBQSx5QkFXQSxNQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLGNBQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUVBLEVBQUEsR0FBQSxHQVNBLEtBQUEsYUFBQSxXQUNBLEdBQUEsR0FJQSxLQUFBLE1BQUEsWUFBQSxVQUFBLFNBQUEsRUFBQSxHQXdGQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLElBQUEsRUFBQSxFQUFBLFFBQ0EsS0FBQSxHQUFBLGVBQUEsUUFDQSxtRkFDQSxFQUFBLEVBR0EsR0FBQSxPQUFBLEdBQUEsRUF0RUEsTUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEdBUUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxDQWtCQSxJQWpCQSxFQUFBLEtBQUEsRUFDQSxHQUFBLEVBQUEsS0FDQSxFQUFBLEdBR0EsRUFBQSxLQUNBLEVBQUEsRUFBQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsZUFBQSxHQUNBLEVBQUEsR0FDQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBRUEsR0FBQSxFQUFBLEdBQUEsSUFHQSxFQUFBLENBVUEsR0FBQSxHQUFBLFlBU0EsT0FSQSxHQUFBLFdBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxPQUFBLEdBQUEsR0FBQSxVQUNBLEVBQUEsR0FBQSxHQUVBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsTUFHQSxFQUFBLFdBRUEsTUFEQSxHQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxJQUVBLFNBQUEsRUFDQSxXQUFBLElBVUEsTUFOQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsR0FFQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE1BR0EsS0F3Q0EsUUFBQSxNQUNBLEtBQUEsTUFBQSxVQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxZQW9DQSxRQUFBLE1BQ0EsS0FBQSxNQUFBLE9BQUEsU0FBQSxHQUNBLE1BQUEsWUFDQSxFQUFBLE1BQUEsTUFBQSxFQUFBLGNBV0EsUUFBQSxJQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxJQUVBLE9BQUEsSUFFQSxFQUFBLEVBQUEsTUFBQSxNQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsUUFBQSxLQUNBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLElBRUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsS0FJQSxHQVpBLEVBNEJBLFFBQUEsSUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxDQUVBLE9BQUEsVUFBQSxHQUdBLE1BRkEsS0FBQSxFQUFBLEdBQUEsSUFFQSxFQUNBLEVBQUEsR0FBQSxLQUFBLEtBR0EsR0FlQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLElBRUEsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxLQUdBLEdBSUEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsSUFBQSxFQVVBLFFBQUEsTUFDQSxHQUFBLEdBQUEsbUJBQ0EsRUFBQSxhQUNBLEVBQUEsZUFDQSxHQUFBLGVBQUEsa0NBdUJBLEVBQUEsS0FBQSxVQUVBLG1CQUFBLFNBQUEsR0FPQSxNQU5BLEdBQUEsS0FFQSxFQUFBLEVBQUEsUUFBQSxFQUFBLElBQ0EsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLEtBQ0EsRUFBQSxFQUFBLEtBRUEsSUFJQSxrQkFBQSxTQUFBLEdBQ0EsT0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsS0FJQSxTQUNBLFFBQ0EsT0FBQSxxQ0FFQSxLQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsR0FDQSxNQUFBLEVBQUEsSUFHQSxlQUFBLGFBQ0EsZUFBQSxnQkFHQSxHQUFBLENBb0JBLE1BQUEsY0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsSUFBQSxFQUNBLE1BRUEsRUFPQSxJQUFBLEdBQUEsS0FBQSxlQUVBLE1BQUEsTUFBQSxlQUFBLFdBQUEsZ0JBQUEsYUFBQSxLQUFBLFlBQ0EsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FxZkEsUUFBQSxHQUFBLEdBcUVBLFFBQUEsR0FBQSxHQUVBLEdBQUEsR0FBQSxLQUFBLEdBQ0EsS0FBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxvQkFFQSxPQUFBLElBQUEsRUFBQSxRQUNBLEVBQ0EsRUFBQSxPQUFBLEdBR0EsUUFBQSxHQUFBLEdBeUJBLFFBQUEsR0FBQSxHQUNBLEdBQUEsRUFFQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLEVBQUEsSUFDQSxNQUFBLEVBQ0EsRUFBQSxHQUFBLFFBRUEsR0FBQSxNQWpDQSxHQUVBLEdBQUEsRUFBQSxFQUZBLEVBQUEsRUFBQSxRQUNBLEVBQUEsS0FBQSxFQUFBLFFBR0EsR0FBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxTQUdBLEdBQ0EsSUFBQSxJQUFBLEdBQUEsQ0FDQSxFQUFBLEdBQUEsRUFFQSxLQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxFQUNBLFFBQUEsRUFJQSxHQUFBLEdBQUEsRUFBQSxHQUtBLE1BREEsR0FBQSxHQUNBLEVBckdBLEdBQUEsSUFDQSxPQUFBLE1BQ0EsaUJBQUEsRUFBQSxpQkFDQSxrQkFBQSxFQUFBLG1CQUVBLEVBQUEsRUFBQSxFQUVBLEdBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsT0FBQSxHQUFBLEVBQUEsT0FFQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxPQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxpQkFnQkEsT0FiQSxHQUFBLElBQ0EsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLGlCQUFBLEdBQUEsVUFDQSxHQUFBLEtBS0EsRUFBQSxFQUFBLG1CQUFBLEVBQUEsRUFBQSxtQkFDQSxFQUFBLGdCQUFBLEVBQUEsaUJBSUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsSUFHQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsS0FBQSxFQVlBLEtBVEEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFNBQUEsRUFBQSxlQUNBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxlQUVBLEVBQUEsVUFBQSxFQUFBLGdCQUNBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxpQkFJQSxFQUFBLFFBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxPQUVBLEdBQUEsRUFBQSxLQUFBLEVBQUEsR0FpQkEsTUFkQSxHQUFBLFFBQUEsU0FBQSxHQUlBLE1BSEEsR0FBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEtBRUEsR0FHQSxFQUFBLE1BQUEsU0FBQSxHQUlBLE1BSEEsR0FBQSxLQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLFFBQUEsS0FFQSxHQUdBLEVBa0tBLFFBQUEsS0FDQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxPQUNBLE9BQUEsRUFDQSxJQUFBLFFBT0EsUUFBQSxLQUNBLEVBQUEsVUFBQSxTQUFBLEdBQ0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsT0FDQSxPQUFBLEVBQ0EsSUFBQSxFQUNBLEtBQUEsUUFhQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBK0RBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQVVBLFFBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBVkEsSUFDQSxHQUFBLEdBQ0EsRUFBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxJQUdBLEVBQUEsT0FBQSxJQVFBLEVBQ0EsRUFBQSxZQUFBLElBRUEsSUFDQSxFQUFBLFNBQUEsRUFBQSxVQVFBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxJQUFBLEVBQUEsSUFFQSxHQUFBLEdBQUEsRUFBQSxRQUFBLEVBQUEsU0FDQSxLQUFBLEVBQ0EsT0FBQSxFQUNBLFFBQUEsR0FBQSxHQUNBLE9BQUEsRUFDQSxXQUFBLElBS0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLGdCQUFBLFFBQUEsRUFDQSxNQUFBLEdBQUEsRUFBQSxnQkFBQSxPQUFBLEVBQUEsR0F4R0EsR0FFQSxHQUNBLEVBSEEsRUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFFBR0EsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLE9BYUEsSUFYQSxFQUFBLGdCQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxJQUdBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLEdBQ0EsUUFBQSxFQUFBLFFBQUEsVUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxNQUNBLEdBR0EsRUFFQSxHQURBLEVBQUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxHQUFBLENBQ0EsR0FBQSxFQUFBLEdBR0EsTUFEQSxHQUFBLEtBQUEsRUFBQSxHQUNBLENBR0EsSUFBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLElBRUEsRUFBQSxFQUFBLE9BQUEsVUFLQSxHQUFBLElBQUEsRUFBQSxFQU9BLElBQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxLQUNBLEVBQUEsVUFBQSxFQUFBLGdCQUFBLEVBQUEsZ0JBQ0EsQ0FDQSxLQUNBLEVBQUEsRUFBQSxnQkFBQSxFQUFBLGdCQUFBLEdBR0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsRUFBQSxnQkFBQSxFQUFBLGNBR0EsTUFBQSxHQXdEQSxRQUFBLEdBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxNQUFBLEVBQ0EsSUFBQSxLQW9CQSxPQW5CQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEVBQUEsS0FDQSxHQUFBLEtBQUEsR0FBQSxJQUVBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUVBLEVBREEsRUFBQSxHQUNBLEVBQUEsY0FFQSxFQUFBLElBR0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxJQUNBLEVBQUEsU0FHQSxFQUFBLE9BQUEsSUFDQSxJQUFBLElBQUEsRUFBQSxRQUFBLEtBQUEsSUFBQSxLQUFBLEVBQUEsS0FBQSxNQUVBLEVBMzNCQSxHQUFBLEdBQUEsRUFBQSxTQU9BLElBOHNCQSxPQTVzQkEsR0FBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxHQUFBLEVBQUEsT0FBQSxNQWltQkEsRUFBQSxtQkFrREEsRUFBQSxNQUFBLFNBQUEsT0FBQSxTQXdDQSxFQUFBLE9BQUEsTUFBQSxTQVlBLEVBQUEsU0FBQSxFQUdBLElBMktBLFFBQUEsSUFBQSxHQUlBLEdBQUEsR0FBQSxNQUFBLEVBQUEsTUFBQSwyQ0FDQSxFQUFBLGdCQUNBLE1BQUEsSUFBQSxHQUFBLGNBQUEsb0JBQ0EsSUFBQSxFQUFBLGVBQ0EsTUFBQSxJQUFBLEdBQUEsY0FHQSxNQUFBLEdBQUEsZ0JBQUEsUUFBQSxpREFtQkEsUUFBQSxNQUNBLEtBQUEsTUFBQSxXQUFBLFVBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsUUFBQSxVQUFBLEVBQUEsTUFJQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQWdJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBSUEsR0FBQSxHQUFBLEVBQUEsY0FBQSxVQUFBLEVBQUEsSUE2QkEsT0E1QkEsR0FBQSxLQUFBLGtCQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsT0FBQSxFQUVBLEVBQUEsU0FBQSxHQUNBLEdBQUEsRUFBQSxPQUFBLEdBQ0EsR0FBQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEtBQUEsWUFBQSxHQUNBLEVBQUEsSUFDQSxJQUFBLEdBQUEsR0FDQSxFQUFBLFNBRUEsS0FDQSxTQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsU0FDQSxHQUFBLEtBQUEsVUFFQSxFQUFBLEVBQUEsS0FDQSxFQUFBLFVBQUEsRUFBQSxLQUFBLElBQUEsS0FHQSxHQUNBLEVBQUEsRUFBQSxJQUlBLEdBQUEsRUFBQSxPQUFBLEdBQ0EsR0FBQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEtBQUEsWUFBQSxHQUNBLEVBaEtBLEdBQUEsR0FBQSxFQUdBLE9BQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBaUdBLFFBQUEsS0FDQSxFQUFBLEVBQ0EsR0FBQSxJQUNBLEdBQUEsRUFBQSxRQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsS0FLQSxJQUFBLElBQ0EsRUFBQSxFQUFBLElBQUEsUUFBQSxHQUFBLEdBQUEsU0FBQSxJQUFBLEdBSUEsRUFBQSxPQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsR0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLDZCQUFBLEdBdkhBLEdBQUEsRUFJQSxJQUhBLEVBQUEsK0JBQ0EsRUFBQSxHQUFBLEVBQUEsTUFFQSxTQUFBLEdBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLEdBQUEsS0FBQSxFQUNBLEVBQUEsR0FBQSxRQUFBLEVBR0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxRQUFBLGdCQUFBLHFCQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLFFBRUEsQ0FFQSxHQUFBLEdBQUEsRUFBQSxFQW1EQSxJQWpEQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLGlCQUFBLEVBQUEsS0FPQSxFQUFBLG1CQUFBLFdBUUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxXQUFBLENBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxLQUNBLEVBQUEsRUFFQSxLQUFBLElBQ0EsRUFBQSxFQUFBLHdCQUlBLEVBQUEsWUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLGNBS0EsSUFBQSxHQUFBLEdBQUEsS0FDQSxFQUFBLEVBQUEsWUFHQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLE9BQ0EsRUFDQSxFQUNBLEtBSUEsSUFDQSxFQUFBLGlCQUFBLEdBR0EsRUFDQSxJQUNBLEVBQUEsYUFBQSxFQUNBLE1BQUEsR0FRQSxHQUFBLFNBQUEsRUFDQSxLQUFBLEdBS0EsRUFBQSxLQUFBLEdBQUEsTUFHQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE9BQ0EsR0FBQSxJQUNBLEVBQUEsS0FBQSxJQXlHQSxRQUFBLE1BQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxJQVdBLE1BQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUNBLEVBQUEsRUFDQSxNQUVBLEdBYUEsS0FBQSxVQUFBLFNBQUEsR0FDQSxNQUFBLElBQ0EsRUFBQSxFQUNBLE1BRUEsR0FLQSxLQUFBLE1BQUEsU0FBQSxvQkFBQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEdBTUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxTQUFBLEVBaUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQW1IQSxRQUFBLEdBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLEdBR0EsUUFBQSxHQUFBLEdBQ0EsSUFDQSxNQUFBLEdBQUEsRUFBQSxJQUNBLE1BQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxTQUFBLDhCQUFBLEVBQ0EsRUFBQSxXQUNBLEdBQUEsSUE3SEEsSUFBQSxDQVdBLEtBVkEsR0FBQSxHQUNBLEVBS0EsRUFKQSxFQUFBLEVBQ0EsS0FDQSxLQUNBLEVBQUEsRUFBQSxPQUVBLEtBQ0EsS0FFQSxFQUFBLEdBQUEsQ0FDQSxHQUFBLEtBQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLElBVUEsQ0FFQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxVQUFBLElBRUEsT0FkQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxVQUFBLEVBQUEsS0FFQSxFQUFBLEVBQUEsVUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsSUFnQkEsR0FBQSxHQUFBLEVBQUEsT0FBQSxFQUNBLEtBQUEsSUFBQSxXQUNBLHlNQUVBLEVBR0EsS0FBQSxHQUFBLEVBQUEsT0FBQSxDQUNBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxNQUNBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FFQSxNQUFBLEdBQUEsS0FBQSxLQUdBLEVBQUEsU0FBQSxHQUNBLE1BQUEsR0FDQSxFQUFBLFdBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxJQUdBLEVBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUNBLE1BQUEsRUFFQSxjQUFBLElBQ0EsSUFBQSxTQUNBLEtBRUEsS0FBQSxTQUNBLEVBQUEsR0FBQSxDQUNBLE1BRUEsU0FDQSxFQUFBLEVBQUEsR0FJQSxNQUFBLEdBR0EsT0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsT0FBQSxFQUVBLEtBQ0EsS0FBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBR0EsT0FBQSxHQUFBLEdBQ0EsTUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLFNBQUEsOEJBQUEsRUFDQSxFQUFBLFdBQ0EsR0FBQSxNQUtBLElBQUEsRUFDQSxZQUFBLEVBQ0EsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQ0EsT0FBQSxHQUFBLFlBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsSUFDQSxFQUFBLEtBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEdBQ0EsT0FyTkEsR0FBQSxHQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFFBQUEsS0FBQSxHQUFBLEtBQ0EsRUFBQSxHQUFBLFFBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxJQXVRQSxPQXBCQSxHQUFBLFlBQUEsV0FDQSxNQUFBLElBZUEsRUFBQSxVQUFBLFdBQ0EsTUFBQSxJQUdBLElBSUEsUUFBQSxNQUNBLEtBQUEsTUFBQSxhQUFBLFVBQUEsS0FBQSxNQUNBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FnSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsY0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsRUFDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQ0EsRUFBQSxFQUFBLE9BcUJBLE9BbkJBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFFQSxFQUFBLEtBQUEsS0FBQSxLQUFBLEdBRUEsRUFBQSxhQUFBLEVBQUEsV0FDQSxFQUFBLE9BQUEsS0FFQSxFQUFBLEdBQUEsR0FBQSxJQUNBLEVBQUEsUUFBQSxHQUNBLEVBQUEsRUFBQSxvQkFDQSxHQUFBLEVBQUEsZUFHQSxHQUFBLEVBQUEsVUFFQSxHQUVBLEVBQUEsRUFBQSxjQUFBLEVBRUEsRUExSkEsR0FBQSxLQWtMQSxPQVZBLEdBQUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEVBQUEsZUFBQSxJQUNBLEVBQUEsRUFBQSxjQUFBLE9BQUEsWUFDQSxFQUFBLGNBQUEsRUFBQSxvQkFDQSxHQUFBLEVBQUEsZUFDQSxJQUVBLEdBR0EsSUFjQSxRQUFBLE1BQ0EsS0FBQSxLQUFBLFdBQ0EsT0FDQSxHQUFBLFFBRUEsZ0JBQ0EsWUFBQSxJQUNBLFVBQUEsSUFDQSxXQUVBLE9BQUEsRUFDQSxRQUFBLEVBQ0EsUUFBQSxFQUNBLE9BQUEsR0FDQSxPQUFBLEdBQ0EsT0FBQSxJQUNBLE9BQUEsR0FDQSxNQUFBLEVBQ0EsT0FBQSxJQUVBLE9BQUEsRUFDQSxRQUFBLEVBQ0EsUUFBQSxFQUNBLE9BQUEsSUFDQSxPQUFBLEdBQ0EsT0FBQSxLQUNBLE9BQUEsSUFDQSxNQUFBLEVBQ0EsT0FBQSxJQUdBLGFBQUEsS0FHQSxrQkFDQSxNQUNBLHdGQUNBLE1BQUEsS0FDQSxXQUFBLGtEQUFBLE1BQUEsS0FDQSxJQUFBLDJEQUFBLE1BQUEsS0FDQSxTQUFBLDhCQUFBLE1BQUEsS0FDQSxPQUFBLEtBQUEsTUFDQSxPQUFBLHFCQUNBLFFBQUEsZ0JBQ0EsU0FBQSxrQkFDQSxTQUFBLFlBQ0EsV0FBQSxXQUNBLFVBQUEsU0FDQSxXQUFBLFlBQ0EsVUFBQSxVQUdBLFVBQUEsU0FBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLE1BRUEsV0FpQkEsUUFBQSxJQUFBLEdBSUEsSUFIQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQ0EsRUFBQSxFQUFBLE9BRUEsS0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBR0EsT0FBQSxHQUFBLEtBQUEsS0FHQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxFQUVBLEdBQUEsV0FBQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEVBQUEsU0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFdBQUEsS0FJQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLE1BQUEsRUFBQSxPQUFBLEVBQ0EsS0FDQSxFQUFBLElBQUEsRUFFQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLG1CQUFBLEdBQUEsTUFBQSxFQUFBLFNBQUEsT0FBQSxHQUNBLEVBQUEsU0FBQSxVQUFBLEdBQUEsRUFBQSxVQUNBLEVBQUEsU0FBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsbUJBQUEsRUFBQSxNQUdBLEVBQUEsUUFBQSxLQUFBLEVBQUEsT0FBQSxPQUFBLEtBQ0EsRUFBQSxPQUFBLElBQUEsRUFBQSxRQVlBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsUUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLFFBREEsT0FNQSxRQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxRQUFBLElBQ0EsT0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUlBLFFBQUEsSUFBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLEVBQUEsR0FBQSxHQUFBLFlBQUEsS0FBQSxHQUlBLFFBQUEsSUFBQSxHQUNBLE1BQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsRUFBQSxRQUFBLE1BQUEsSUFZQSxRQUFBLElBQUEsRUFBQSxHQUNBLEtBQUEsU0FBQSxFQUNBLEVBQUEsR0FBQSxFQUNBLElBQUEsR0FBQSxHQUFBLEVBQ0EsSUFBQSxFQUFBLEtBQUEsR0FRQSxLQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsRUFDQSxLQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsV0FBQSxnREFBQSxFQUNBLEVBR0EsSUFBQSxFQUFBLEtBQUEsR0FFQSxLQUFBLFNBQ0EsS0FBQSxPQUFBLEtBR0EsS0FBQSxhQU9BLEtBQUEsVUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsVUFDQSxFQUFBLEtBQUEsT0FBQSxJQUFBLEVBQUEsS0FBQSxRQUFBLEVBRUEsTUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFDQSxLQUFBLFNBQUEsRUFBQSxLQUFBLE1BQUEsT0FBQSxJQUdBLEtBQUEsZUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEdBSUEsTUFEQSxNQUFBLEtBQUEsRUFBQSxNQUFBLEtBQ0EsQ0FFQSxJQUFBLEdBQUEsRUFDQSxDQWlCQSxRQWZBLEVBQUEsR0FBQSxFQUFBLE1BQUEsR0FDQSxFQUFBLEVBRUEsR0FEQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQ0EsR0FBQSxHQUFBLElBQUEsSUFBQSxHQUVBLEVBQUEsSUFFQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUVBLEdBQ0EsS0FBQSxRQUFBLEtBRUEsR0FjQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBRUEsSUFBQSxFQUFBLEtBQUEsR0FRQSxLQUFBLFFBQUEsU0FBQSxHQTZCQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBS0EsR0FFQSxHQUZBLEVBQUEsaUJBVUEsT0FMQSxLQUFBLEVBQUEsUUFBQSxLQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsS0FJQSxFQUFBLEtBQUEsR0FDQSxHQUdBLEVBQUEsRUFBQSxLQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsR0FoREEsR0FBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE9BQUEsR0FDQSxHQUFBLEVBQUEsR0FDQSxLQUFBLFFBQ0EsRUFDQSxFQUVBLEtBQUEsRUFBQSxHQUNBLEtBQUEsSUFBQSxXQUFBLGdEQUFBLEVBQ0EsRUFFQSxJQUFBLEVBQUEsS0FBQSxHQUVBLEtBQUEsT0FBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEdBRUEsS0FBQSxhQXlDQSxLQUFBLFVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLFVBQ0EsRUFBQSxLQUFBLE9BQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxFQUVBLE1BQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQ0EsS0FBQSxTQUFBLEdBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEtBR0EsS0FBQSxlQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsSUFBQSxHQUFBLElBQ0EsS0FBQSxRQUFBLElBQ0EsSUFFQSxHQWNBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsS0FBQSxTQUFBLEVBQ0EsR0FBQSxNQUFBLEtBQUEsVUFFQSxJQUFBLEdBQUEsR0FBQSxFQUVBLE1BQUEsZUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEdBSUEsTUFEQSxNQUFBLEtBQUEsRUFBQSxNQUFBLEtBQ0EsQ0FHQSxJQUFBLEdBQ0EsQ0FZQSxPQVZBLElBQUEsR0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLE1BQ0EsRUFBQSxHQUVBLEdBQ0EsS0FBQSxRQUFBLEtBRUEsR0FHQSxLQUFBLFVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLFVBQ0EsRUFBQSxLQUFBLE9BQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxFQUVBLE1BQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBRUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxLQUFBLE9BeU9BLFFBQUEsSUFBQSxHQUNBLE1BQUEsWUFDQSxNQUFBLE1BQUEsSUFLQSxRQUFBLElBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLE1BQUEsR0FBQSxHQUNBLEtBQUEsSUFFQSxLQUFBLEdBQUEsRUFBQSxHQUNBLEtBQUEsWUFFQSxPQXFDQSxRQUFBLE1BQ0EsR0FBQSxHQUFBLEdBQ0EsR0FBQSxDQVNBLE1BQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUNBLE1BRUEsR0FXQSxLQUFBLFVBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFDQSxNQUVBLEdBK0JBLEtBQUEsTUFBQSxhQUFBLFdBQUEsV0FBQSxlQUNBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FrSEEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxXQUFBLHlCQUFBLEVBQUEsU0FBQSxHQWxIQSxHQUFBLEdBQ0EsRUFHQSxFQUZBLEVBQUEsRUFBQSxXQUNBLEVBQUEsRUFBQSxLQUdBLElBQUEsRUFBQSxDQUNBLElBQUEsRUFDQSxLQUFBLElBQUEsU0FDQSwrREFFQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLFFBQUEsR0FBQSxPQUVBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFFQSxHQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsR0FDQSxFQUFBLGVBQUEsRUFBQSxFQUVBLElBQUEsR0FBQSwyQkFFQSxHQUFBLEdBQUEsUUFBQSxTQUFBLEdBSUEsSUFBQSxFQUFBLFVBQUEsRUFBQSxTQUFBLEdBQUEsRUFBQSxNQUFBLENBS0EsSUFIQSxHQUFBLEdBQUEsR0FBQSxFQUFBLFFBR0EsTUFBQSxFQUFBLEVBQUEsS0FFQSxHQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLFVBQUEsR0FBQSxNQUdBLElBQUEsR0FBQSxFQUFBLEtBQUEsUUFHQSxFQUFBLEVBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxhQUVBLEdBQUEsSUFBQSwrQkFBQSxFQUFBLGFBR0EsRUFBQSxHQUFBLEVBQUEsU0FBQSxNQUlBLEVBQUEsS0FBQSxLQUVBLEdBQUEsRUFBQSxLQUFBLFdBQUEsRUFBQSxzQkFDQSxFQUFBLGVBQUEsRUFBQSxLQUNBLEVBQUEsaUJBRUEsRUFBQSxVQUFBLEVBQUEsUUFDQSxFQUFBLFNBRUEsRUFBQSxRQUFBLDZCQUFBLE9BUUEsRUFBQSxVQUFBLEdBQ0EsRUFBQSxJQUFBLEVBQUEsVUFBQSxHQUlBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLElBQ0EsRUFBQSxXQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsUUFFQSxHQUFBLFFBQUEsR0FDQSxFQUFBLFdBQUEsdUJBQUEsRUFDQSxHQUFBLGtCQUNBLEVBQUEsUUFBQSxHQUNBLEVBQUEsSUFBQSxJQUVBLEVBQUEsS0FHQSxFQUFBLFNBQUEsRUFBQSxZQUtBLElBQUEsR0FBQSxDQXNCQSxPQXJCQSxHQUFBLE9BQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxTQWdCQSxPQWRBLElBQUEsR0FBQSxFQUFBLFdBQ0EsSUFDQSxFQUFBLFdBQUEsV0FDQSxFQUFBLFdBQUEsdUJBQUEsRUFBQSxTQUFBLEdBQ0EsaUJBQ0EsRUFBQSxRQUFBLElBRUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsT0FJQSxFQUFBLFdBQUEsRUFFQSxJQUdBLElBbURBLFFBQUEsTUFDQSxHQUFBLElBQUEsRUFDQSxFQUFBLElBU0EsTUFBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLEVBQ0EsTUFFQSxHQUlBLEtBQUEsTUFBQSxVQUFBLFNBQUEsR0F3REEsUUFBQSxHQUFBLEdBVUEsTUFUQSxhQUFBLFNBQ0EsRUFBQSxNQUNBLEVBQUEsRUFBQSxTQUFBLEtBQUEsRUFBQSxNQUFBLFFBQUEsRUFBQSxTQUNBLFVBQUEsRUFBQSxRQUFBLEtBQUEsRUFBQSxNQUNBLEVBQUEsTUFDQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxFQUFBLFVBQUEsSUFBQSxFQUFBLE9BR0EsRUFHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxZQUNBLEVBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUNBLEdBQUEsQ0FJQSxLQUNBLElBQUEsRUFBQSxNQUNBLE1BQUEsSUFFQSxNQUFBLEdBQ0EsV0FDQSxHQUFBLEtBSUEsT0FIQSxHQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE1BRUEsRUFBQSxNQUFBLEVBQUEsSUFNQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsSUE1RkEsT0FRQSxJQUFBLEVBQUEsT0FTQSxLQUFBLEVBQUEsUUFTQSxLQUFBLEVBQUEsUUFTQSxNQUFBLEVBQUEsU0FTQSxNQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsUUFFQSxPQUFBLFlBQ0EsR0FDQSxFQUFBLE1BQUEsRUFBQSxrQkF5RUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLHFCQUFBLEdBQUEscUJBQUEsR0FDQSxxQkFBQSxHQUFBLHFCQUFBLEdBQ0EsY0FBQSxFQUNBLEtBQUEsSUFBQSxVQUNBLGtGQUNBLEVBRUEsT0FBQSxHQUdBLFFBQUEsSUFBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxFQUFBLGNBQUEsRUFDQSxLQUFBLElBQUEsU0FDQSw2RUFDQSxFQUNBLElBQ0EsRUFBQSxTQUFBLEVBQ0EsS0FBQSxJQUFBLGFBQ0EsK0VBQ0EsRUFDQSxJQUNBLEVBQUEsV0FBQSxFQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQ0EsS0FBQSxJQUFBLFVBQ0EsOEVBQ0EsRUFDQSxJQUNBLElBQUEsT0FDQSxLQUFBLElBQUEsVUFDQSwyRUFDQSxHQUdBLE1BQUEsR0FPQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxDQUNBLEdBQUEsRUFBQSxjQUFBLEVBQ0EsS0FBQSxJQUFBLFNBQ0EsNkVBQ0EsRUFDQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxHQUNBLEtBQUEsSUFBQSxTQUNBLHdGQUNBLElBNlNBLFFBQUEsSUFBQSxHQUNBLE1BQUEsR0FBQSxTQXVjQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsRUFHQSxLQUFBLEdBREEsR0FBQSxFQUFBLEVBQUEsTUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxJQUFBLENBQ0EsRUFBQSxHQUFBLEVBQUEsUUFBQSxFQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUNBLEtBQ0EsS0FDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLEVBS0EsTUFIQSxHQUFBLEdBQUEsRUFBQSxRQUFBLEdBQ0EsR0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsRUFDQSxFQVVBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FPQSxNQU5BLElBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxHQUVBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsZUFBQSxHQUFBLEVBQUEsQ0FFQSxPQUFBLE9BQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUVBLEVBQ0EsTUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBRUEsRUFDQSxNQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FFQSxFQUNBLE1BQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUVBLEVBQ0EsTUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEdBRkEsR0FKQSxHQUpBLEdBSkEsSUFvQkEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBRUEsSUFBQSxFQUFBLE1BQUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEtBQ0EsRUFBQSxFQUFBLE1BR0EsSUFBQSxFQUFBLElBRUEsRUFEQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBRUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FDQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxLQUFBLEdBQUEsRUFBQSxHQUVBLEVBQUEsRUFDQSxFQUFBLFFBQ0EsRUFBQSxFQUNBLE9BQUEsUUFHQSxDQUNBLEdBQUEsR0FBQSxFQUNBLEdBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsR0FDQSxHQUFBLHVDQUNBLEVBRUEsSUFFQSwwQkFBQSxFQUFBLFlBQUEsSUFBQSxFQUFBLFFBRUEsR0FBQSxXQUdBLElBQUEsR0FBQSxHQUFBLFVBQUEsSUFBQSxJQUFBLEVBRUEsR0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLEVBUUEsTUFMQSxHQUFBLGNBQUEsRUFDQSxFQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBRUEsR0FBQSxHQUFBLEVBQ0EsRUFzREEsUUFBQSxNQUNBLEdBQUEsR0FBQSxLQUVBLEdBQ0EsS0FBQSxFQUlBLE1BQUEsTUFBQSxVQUFBLFdBQUEsU0FBQSxFQUFBLEdBR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLENBV0EsT0FUQSxHQUFBLGVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxJQUVBLEVBQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLE9BQUEsRUFBQSxRQUdBLEVBOENBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxXQUNBLEVBQUEsT0FDQSxFQUFBLEVBQUEsT0FBQSxHQUNBLEtBQUEsRUFBQSxRQUFBLElBQ0EsRUFBQSxLQUFBLElBS0EsTUFBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEdBRUEsTUFBQSxPQUFBLEdBQUEsTUFBQSxFQUNBLElBQUEsRUFHQSxnQkFBQSxLQUtBLEVBQUEsRUFBQSxVQUVBLGdCQUFBLEtBRUEsRUFPQSxJQUFBLEdBQUEsSUFBQSxHQUFBLElBQUEsRUFHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUdBLEdBSEEsRUFBQSxFQUFBLFdBQ0EsRUFBQSxTQUFBLEVBQUEsRUFBQSxXQUlBLElBQUEsSUFBQSxFQUFBLE9BQUEsQ0FDQSxHQUFBLEdBQUEsQ0FFQSxPQURBLEdBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFLQSxPQUpBLEdBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLFdBRUEsR0FDQSxFQUFBLEdBSUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsR0FBQSxDQUdBLE9BQUEsR0FBQSxPQUFBLFNBQUEsR0FHQSxJQUFBLEdBRkEsSUFBQSxFQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsSUFDQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEdBQUEsR0FBQSxFQUFBLFdBUUEsTUFKQSxLQUNBLEVBQUEsRUFBQSxJQUdBLEdBQ0EsRUFBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxDQUNBLE9BQUEsR0FBQSxFQUFBLE9BQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsSUFDQSxFQUFBLE1BQUEsS0FBQSxXQUVBLEVBQUEsSUFDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLElBQ0EsT0FJQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQWVBLFFBQUEsR0FBQSxHQUNBLEdBQUEsSUFBQSxDQUlBLE9BSEEsR0FBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsR0FBQSxLQUVBLEVBbkJBLEdBQUEsRUFDQSxPQUFBLEdBQUEsRUFBQSxPQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLElBQ0EsRUFBQSxhQUFBLFdBQ0EsRUFBQSxJQUFBLE9BR0EsR0FXQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQ0EsT0FBQSxHQUFBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsV0FDQSxFQUFBLElBQ0EsRUFBQSxNQUFBLEtBQUEsV0FFQSxLQUNBLEdBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsTUFBQSxFQUVBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUdBLE9BQUEsR0FBQSxHQUFBLEVBQUEsRUFjQSxPQVZBLEdBQUEsaUJBQ0EsRUFBQSxrQkFBQSxFQUNBLEVBQUEsZ0JBQUEsRUFBQSxnQkFDQSxFQUFBLFlBR0EsRUFBQSxnQkFBQSxFQUNBLEVBQUEsUUFBQSxJQUdBLEVBMU1BLE1BakJBLEdBQUEsSUFBQSxFQUFBLElBaUJBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLENBRUEsY0FBQSxJQUNBLElBQUEsU0FLQSxHQUpBLEVBQUEsRUFBQSxFQUFBLE9BRUEsRUFBQSxFQUFBLElBRUEsRUFBQSxDQUNBLE1BQUEsRUFBQSxPQUFBLElBQUEsTUFBQSxFQUFBLE9BQUEsS0FDQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLFVBQUEsR0FHQSxJQUFBLEdBQUEsR0FBQSxJQUFBLEdBQ0EsRUFBQSxHQUFBLElBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLE1BQUEsR0FFQSxFQUFBLFNBQ0EsRUFBQSxnQkFBQSxFQUNBLEdBR0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxnQkFBQSxFQUFBLFFBQ0EsRUFBQSxHQUNBLEVBQUEsU0FDQSxFQUFBLGdCQUFBLEdBR0EsRUFBQSxHQUFBLEVBRUEsTUFBQSxHQUFBLEVBQUEsRUFFQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLEVBQUEsRUFFQSxTQUNBLE1BQUEsR0FBQSxFQUFBLE9BeVhBLFFBQUEsTUFFQSxLQUFBLE1BQUEsYUFBQSxvQkFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsU0FBQSxHQUNBLEVBQUEsV0FBQSxJQUNBLEtBSUEsUUFBQSxNQUNBLEtBQUEsTUFBQSxXQUFBLG9CQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLElBQ0EsS0FZQSxRQUFBLElBQUEsRUFBQSxHQUVBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FFQSxRQUFBLEdBQUEsR0FDQSxNQUFBLFVBQUEsR0FDQSxJQUNBLEdBQUEsRUFDQSxFQUFBLEtBQUEsRUFBQSxLQUxBLEdBQUEsSUFBQSxDQVNBLFFBQUEsRUFBQSxHQUFBLEVBQUEsSUFpQkEsUUFBQSxLQUNBLEtBQUEsU0FBQSxPQUFBLEdBNEJBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsSUFJQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxDQUVBLEdBQUEsRUFBQSxRQUNBLEVBQUEsa0JBQUEsRUFDQSxFQUFBLFFBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsSUFBQSxFQUFBLENBQ0EsRUFBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE9BQ0EsS0FDQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLEVBQUEsRUFBQSxRQUNBLElBQUEsRUFBQSxPQUNBLEVBQUEsUUFBQSxFQUFBLE9BRUEsRUFBQSxPQUFBLEVBQUEsT0FFQSxNQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxLQUtBLFFBQUEsR0FBQSxJQUNBLEVBQUEsa0JBQUEsRUFBQSxVQUNBLEVBQUEsa0JBQUEsRUFDQSxFQUFBLFdBQUEsRUFBQSxNQUdBLFFBQUEsS0FDQSxLQUFBLFFBQUEsR0FBQSxHQUVBLEtBQUEsUUFBQSxFQUFBLEtBQUEsS0FBQSxTQUNBLEtBQUEsT0FBQSxFQUFBLEtBQUEsS0FBQSxRQUNBLEtBQUEsT0FBQSxFQUFBLEtBQUEsS0FBQSxRQWdMQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLEdBQUEsUUFrQkEsT0FoQkEsR0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsZUFBQSxLQUNBLEVBQUEsR0FBQSxJQUNBLEdBQUEsRUFBQSxRQUFBLEtBQ0EsU0FBQSxHQUNBLEVBQUEsZUFBQSxJQUNBLEVBQUEsT0FBQSxPQUlBLElBQUEsR0FDQSxFQUFBLFFBQUEsR0FHQSxFQUFBLFFBdlNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsV0F3QkEsRUFBQSxXQUNBLE1BQUEsSUFBQSxHQU9BLEdBQUEsV0FDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFNQSxPQUpBLE1BQUEsUUFBQSxRQUFBLEtBQUEsUUFBQSxZQUNBLEtBQUEsUUFBQSxRQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLFFBQUEsT0FBQSxHQUFBLEVBQUEsS0FBQSxTQUVBLEVBQUEsU0FHQSxRQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsS0FBQSxLQUFBLElBR0EsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUNBLFNBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQ0EsS0FpREEsRUFBQSxXQUNBLFFBQUEsU0FBQSxHQUNBLEtBQUEsUUFBQSxRQUFBLFNBQ0EsSUFBQSxLQUFBLFFBQ0EsS0FBQSxTQUFBLEVBQ0EsU0FDQSxxRUFDQSxJQUdBLEtBQUEsVUFBQSxLQUtBLFVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLEdBQUEsRUFBQSxLQUFBLEtBQUEsVUFBQSxLQUFBLFNBQ0EsTUFDQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxJQUNBLEtBQUEsUUFBQSxRQUFBLE9BQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsVUFFQSxLQUFBLFFBQUEsUUFBQSxNQUFBLEVBQ0EsS0FBQSxRQUFBLFFBQUEsT0FBQSxFQUNBLEVBQUEsS0FBQSxRQUFBLFVBRUEsTUFBQSxHQUNBLEVBQUEsR0FBQSxHQUNBLEVBQUEsS0FJQSxPQUFBLFNBQUEsR0FDQSxLQUFBLFFBQUEsUUFBQSxRQUNBLEtBQUEsU0FBQSxJQUdBLFNBQUEsU0FBQSxHQUNBLEtBQUEsUUFBQSxRQUFBLE1BQUEsRUFDQSxLQUFBLFFBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxLQUFBLFFBQUEsVUFHQSxPQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxRQUFBLFFBQUEsT0FFQSxNQUFBLFFBQUEsUUFBQSxRQUFBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsRUFBQSxXQUVBLElBQUEsR0FEQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsRUFBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEtBQ0EsRUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxRQTRDQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBRUEsT0FEQSxHQUFBLE9BQUEsR0FDQSxFQUFBLFNBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQU1BLE9BTEEsR0FDQSxFQUFBLFFBQUEsR0FFQSxFQUFBLE9BQUEsR0FFQSxFQUFBLFNBR0EsRUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxJQUNBLEtBQ0EsRUFBQSxLQUFBLEVBQUEsS0FDQSxNQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsR0FFQSxNQUFBLEdBQUEsR0FDQSxFQUFBLEtBQUEsV0FDQSxNQUFBLEdBQUEsRUFBQSxJQUNBLFNBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxLQUdBLEVBQUEsRUFBQSxJQW1CQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUVBLE9BREEsR0FBQSxRQUFBLEdBQ0EsRUFBQSxRQUFBLEtBQUEsRUFBQSxFQUFBLElBMkNBLEVBQUEsUUFBQSxHQUFBLEdBWUEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxRQUFBLEdBR0EsUUFBQSxHQUFBLEdBQ0EsRUFBQSxPQUFBLEdBaEJBLElBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxVQUFBLGlDQUFBLEVBR0EsTUFBQSxlQUFBLElBRUEsTUFBQSxJQUFBLEdBQUEsRUFHQSxJQUFBLEdBQUEsR0FBQSxFQVlBLE9BRkEsR0FBQSxFQUFBLEdBRUEsRUFBQSxRQVFBLE9BTEEsR0FBQSxNQUFBLEVBQ0EsRUFBQSxPQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQ0EsRUFBQSxJQUFBLEVBRUEsRUFHQSxRQUFBLE1BQ0EsS0FBQSxNQUFBLFVBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSx1QkFDQSxFQUFBLDZCQUNBLEVBQUEseUJBRUEsRUFBQSxFQUFBLHNCQUNBLEVBQUEsNEJBQ0EsRUFBQSx5QkFDQSxFQUFBLGtDQUVBLElBQUEsRUFDQSxFQUFBLEVBQ0EsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxZQUNBLEVBQUEsS0FHQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxPQUFBLEVBQ0EsT0FBQSxZQUNBLEVBQUEsT0FBQSxJQU1BLE9BRkEsR0FBQSxVQUFBLEVBRUEsSUF1RUEsUUFBQSxNQUNBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxjQUNBLEVBQUEsS0FDQSxFQUFBLElBRUEsTUFBQSxVQUFBLFNBQUEsR0FJQSxNQUhBLFdBQUEsU0FDQSxFQUFBLEdBRUEsR0FHQSxLQUFBLE1BQUEsWUFBQSxvQkFBQSxTQUFBLFdBQ0EsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQTBDQSxRQUFBLEtBQ0EsS0FBQSxJQUFBLElBQ0EsS0FBQSxRQUFBLEtBQUEsUUFBQSxLQUFBLFdBQ0EsS0FBQSxjQUFBLEtBQUEsY0FDQSxLQUFBLFlBQUEsS0FBQSxZQUFBLEtBQ0EsS0FBQSxRQUFBLEtBQUEsTUFBQSxLQUNBLEtBQUEsYUFBQSxFQUNBLEtBQUEsZ0JBQ0EsS0FBQSxxQkFDQSxLQUFBLGVBQ0EsS0FBQSxtQkFDQSxLQUFBLGtCQUFBLEtBQ0EsS0FBQSxxQkFpbUNBLFFBQUEsR0FBQSxHQUNBLEdBQUEsRUFBQSxRQUNBLEtBQUEsR0FBQSxTQUFBLDBCQUFBLEVBQUEsUUFHQSxHQUFBLFFBQUEsRUFHQSxRQUFBLEtBQ0EsRUFBQSxRQUFBLEtBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEVBQ0EsR0FBQSxnQkFBQSxJQUFBLEVBRUEsSUFBQSxFQUFBLGdCQUFBLFVBQ0EsR0FBQSxnQkFBQSxTQUVBLEVBQUEsRUFBQSxTQU9BLFFBQUEsTUFFQSxRQUFBLEtBRUEsSUFEQSxHQUFBLEdBQUEsRUFBQSxrQkFDQSxFQUFBLFFBQ0EsSUFDQSxFQUFBLFVBQ0EsTUFBQSxHQUNBLEVBQUEsR0FHQSxFQUFBLEtBR0EsUUFBQSxLQUNBLE9BQUEsSUFDQSxFQUFBLEVBQUEsTUFBQSxXQUNBLEVBQUEsT0FBQSxNQWxuQ0EsRUFBQSxXQUNBLFlBQUEsRUF3QkEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxFQWlDQSxPQS9CQSxJQUNBLEVBQUEsR0FBQSxHQUNBLEVBQUEsTUFBQSxLQUFBLE1BRUEsRUFBQSxhQUFBLEtBQUEsYUFDQSxFQUFBLGtCQUFBLEtBQUEsb0JBSUEsS0FBQSxlQUNBLEtBQUEsYUFBQSxXQUNBLEtBQUEsV0FBQSxLQUFBLGNBQ0EsS0FBQSxZQUFBLEtBQUEsWUFBQSxLQUNBLEtBQUEsZUFDQSxLQUFBLG1CQUNBLEtBQUEsSUFBQSxJQUNBLEtBQUEsYUFBQSxNQUVBLEtBQUEsYUFBQSxVQUFBLE1BRUEsRUFBQSxHQUFBLE1BQUEsY0FFQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFFBQUEsS0FDQSxFQUFBLGNBQUEsS0FBQSxZQUNBLEtBQUEsYUFDQSxLQUFBLFlBQUEsY0FBQSxFQUNBLEtBQUEsWUFBQSxHQUVBLEtBQUEsWUFBQSxLQUFBLFlBQUEsRUFFQSxHQXVIQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFFQSxJQUFBLEVBQUEsZ0JBQ0EsTUFBQSxHQUFBLGdCQUFBLEtBQUEsRUFBQSxFQUFBLEVBRUEsSUFBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLFdBQ0EsR0FDQSxHQUFBLEVBQ0EsS0FBQSxFQUNBLElBQUEsRUFDQSxJQUFBLEVBQ0EsS0FBQSxFQWdCQSxPQWJBLEdBQUEsS0FFQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLEdBR0EsSUFDQSxFQUFBLEVBQUEsZUFJQSxFQUFBLFFBQUEsR0FFQSxXQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0E2QkEsWUFBQSxTQUFBLEVBQUEsR0F3Q0EsUUFBQSxLQUNBLEdBQUEsRUFFQSxHQUNBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxFQUFBLEdBOUNBLEdBQUEsR0FBQSxHQUFBLE9BQUEsRUFBQSxRQUNBLEVBQUEsR0FBQSxPQUFBLEVBQUEsUUFDQSxLQUNBLEVBQUEsS0FDQSxHQUFBLEVBQ0EsR0FBQSxDQUVBLEtBQUEsRUFBQSxPQUFBLENBRUEsR0FBQSxJQUFBLENBSUEsT0FIQSxHQUFBLFdBQUEsV0FDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEtBRUEsV0FDQSxHQUFBLEdBSUEsTUFBQSxLQUFBLEVBQUEsT0FFQSxLQUFBLE9BQUEsRUFBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsTUFJQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxFQUNBLElBQ0EsR0FBQSxFQUNBLEVBQUEsV0FBQSxLQUdBLEdBQUEsS0FBQSxLQWNBLFdBQ0EsS0FBQSxFQUFBLFFBQ0EsRUFBQSxhQTZEQSxpQkFBQSxTQUFBLEVBQUEsR0FvQkEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxDQUVBLElBQUEsRUFBQSxHQUtBLEdBQUEsRUFBQSxHQUFBLENBQ0EsSUFBQSxJQUVBLEVBQUEsRUFDQSxFQUFBLEVBQUEsT0FBQSxFQUNBLEtBR0EsRUFBQSxFQUFBLE9BRUEsSUFBQSxJQUVBLElBQ0EsRUFBQSxPQUFBLEVBQUEsRUFHQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUVBLEVBQUEsSUFBQSxHQUFBLElBQUEsRUFDQSxHQUFBLElBQUEsSUFDQSxJQUNBLEVBQUEsR0FBQSxPQUdBLENBQ0EsSUFBQSxJQUVBLEVBQUEsS0FDQSxFQUFBLEVBQ0EsS0FHQSxFQUFBLENBQ0EsS0FBQSxJQUFBLEdBQ0EsRUFBQSxlQUFBLEtBQ0EsSUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FFQSxJQUFBLElBQ0EsRUFBQSxJQUFBLEdBQUEsSUFBQSxFQUNBLEdBQUEsSUFBQSxJQUNBLElBQ0EsRUFBQSxHQUFBLEtBR0EsSUFDQSxFQUFBLEdBQUEsRUFDQSxLQUlBLElBQUEsRUFBQSxFQUFBLENBRUEsR0FDQSxLQUFBLElBQUEsR0FDQSxFQUFBLGVBQUEsS0FDQSxVQUNBLEdBQUEsU0FoRUEsS0FBQSxJQUNBLEVBQUEsRUFDQSxJQW1FQSxPQUFBLEdBR0EsUUFBQSxLQVNBLEdBUkEsR0FDQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxHQUlBLEVBQ0EsR0FBQSxFQUFBLEdBR0EsR0FBQSxFQUFBLEdBQUEsQ0FDQSxFQUFBLEdBQUEsT0FBQSxFQUFBLE9BQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsR0FBQSxFQUFBLE9BRUEsQ0FDQSxJQUNBLEtBQUEsR0FBQSxLQUFBLEdBQ0EsR0FBQSxLQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsRUFBQSxRQVZBLEdBQUEsRUE1R0EsRUFBQSxXQUFBLENBRUEsSUFFQSxHQUdBLEVBRUEsRUFQQSxFQUFBLEtBU0EsRUFBQSxFQUFBLE9BQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsR0FDQSxLQUNBLEtBQ0EsR0FBQSxFQUNBLEVBQUEsQ0E0R0EsT0FBQSxNQUFBLE9BQUEsRUFBQSxJQXNEQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxFQUdBLEVBQ0EsRUFDQSxFQUFBLEVBRUEsRUFBQSxFQUFBLEVBTkEsRUFBQSxLQUFBLGFBQ0EsRUFBQSxLQUFBLGtCQUVBLEVBQUEsRUFDQSxFQUFBLEtBQ0EsSUFHQSxHQUFBLFdBRUEsRUFBQSxtQkFFQSxPQUFBLEdBQUEsT0FBQSxJQUdBLEVBQUEsTUFBQSxPQUFBLEdBQ0EsS0FHQSxFQUFBLElBRUEsR0FBQSxDQUlBLElBSEEsR0FBQSxFQUNBLEVBQUEsRUFFQSxFQUFBLFFBQUEsQ0FDQSxJQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsTUFBQSxNQUFBLEVBQUEsWUFDQSxNQUFBLEdBQ0EsRUFBQSxHQUVBLEVBQUEsS0FHQSxFQUNBLEVBQUEsQ0FDQSxHQUFBLEVBQUEsRUFBQSxXQUdBLElBREEsRUFBQSxFQUFBLE9BQ0EsS0FDQSxJQUlBLEdBSEEsRUFBQSxFQUFBLEdBSUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxRQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxnQkFBQSxJQUFBLGdCQUFBLElBQ0EsTUFBQSxJQUFBLE1BQUEsS0FjQSxHQUFBLElBQUEsRUFBQSxDQUdBLEdBQUEsQ0FDQSxNQUFBLFFBakJBLElBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxFQUNBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxLQUNBLFFBQUEsRUFBQSxJQUFBLE1BQUEsRUFBQSxJQUFBLFlBQ0EsRUFBQSxJQUNBLEdBQUEsYUFBQSxFQUFBLEdBQUEsYUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEtBQUEsSUFTQSxNQUFBLEdBQ0EsRUFBQSxHQVFBLEtBQUEsRUFBQSxFQUFBLGFBQ0EsSUFBQSxHQUFBLEVBQUEsZUFDQSxLQUFBLElBQUEsS0FBQSxFQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLGNBR0EsRUFBQSxFQUlBLEtBQUEsR0FBQSxFQUFBLFVBQUEsSUFFQSxLQURBLEtBQ0EsRUFBQSxTQUNBLDRGQUVBLEVBQUEsRUFBQSxVQUdBLEdBQUEsRUFBQSxPQUlBLEtBRkEsSUFFQSxFQUFBLFFBQ0EsSUFDQSxFQUFBLFVBQ0EsTUFBQSxHQUNBLEVBQUEsS0F3Q0EsU0FBQSxXQUVBLElBQUEsS0FBQSxZQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsT0FJQSxJQUZBLEtBQUEsV0FBQSxZQUNBLEtBQUEsYUFBQSxFQUNBLE9BQUEsRUFBQSxDQUVBLElBQUEsR0FBQSxLQUFBLE1BQUEsZ0JBQ0EsRUFBQSxLQUFBLEtBQUEsZ0JBQUEsR0FBQSxFQUtBLEdBQUEsYUFBQSxPQUFBLEVBQUEsWUFBQSxLQUFBLGVBQ0EsRUFBQSxhQUFBLE9BQUEsRUFBQSxZQUFBLEtBQUEsZUFDQSxLQUFBLGdCQUFBLEtBQUEsY0FBQSxjQUFBLEtBQUEsZUFDQSxLQUFBLGdCQUFBLEtBQUEsY0FBQSxjQUFBLEtBQUEsZUFXQSxLQUFBLFFBQUEsS0FBQSxjQUFBLEtBQUEsY0FBQSxLQUFBLFlBQ0EsS0FBQSxZQUFBLEtBQUEsTUFBQSxLQUdBLEtBQUEsZUFDQSxLQUFBLFdBQUEsS0FBQSxhQUFBLEtBQUEscUJBR0EsS0FBQSxTQUFBLEtBQUEsUUFBQSxLQUFBLE9BQUEsRUFDQSxLQUFBLElBQUEsS0FBQSxPQUFBLEtBQUEsWUFBQSxXQUFBLE1BQUEsT0ErQkEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxLQUFBLElBZ0NBLFdBQUEsU0FBQSxHQUdBLEVBQUEsU0FBQSxFQUFBLGFBQUEsUUFDQSxFQUFBLE1BQUEsV0FDQSxFQUFBLGFBQUEsUUFDQSxFQUFBLFlBS0EsS0FBQSxhQUFBLE1BQUEsTUFBQSxLQUFBLFdBQUEsS0FHQSxhQUFBLFNBQUEsR0FDQSxLQUFBLGtCQUFBLEtBQUEsSUFnREEsT0FBQSxTQUFBLEdBQ0EsSUFFQSxNQURBLEdBQUEsVUFDQSxLQUFBLE1BQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxHQUNBLFFBQ0EsR0FDQSxLQUNBLEVBQUEsVUFDQSxNQUFBLEdBRUEsS0FEQSxHQUFBLEdBQ0EsS0FzQkEsWUFBQSxTQUFBLEdBS0EsUUFBQSxLQUNBLEVBQUEsTUFBQSxHQUxBLEdBQUEsR0FBQSxJQUNBLElBQUEsRUFBQSxrQkFBQSxLQUFBLEdBQ0EsS0FrQ0EsSUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxZQUFBLEVBQ0EsS0FDQSxLQUFBLFlBQUEsR0FBQSxNQUVBLEVBQUEsS0FBQSxFQUVBLElBQUEsR0FBQSxJQUNBLEdBQ0EsR0FBQSxnQkFBQSxLQUNBLEVBQUEsZ0JBQUEsR0FBQSxHQUVBLEVBQUEsZ0JBQUEsV0FDQSxFQUFBLEVBQUEsUUFFQSxJQUFBLEdBQUEsSUFDQSxPQUFBLFlBQ0EsRUFBQSxFQUFBLFFBQUEsSUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEtBMkJBLE1BQUEsU0FBQSxHQUNBLEdBQ0EsR0FhQSxFQUFBLEVBZEEsS0FFQSxFQUFBLEtBQ0EsR0FBQSxFQUNBLEdBQ0EsS0FBQSxFQUNBLFlBQUEsRUFDQSxnQkFBQSxXQUFBLEdBQUEsR0FDQSxlQUFBLFdBQ0EsRUFBQSxrQkFBQSxHQUVBLGtCQUFBLEdBRUEsRUFBQSxHQUFBLEdBQUEsVUFBQSxFQUdBLEdBQUEsQ0FHQSxJQUZBLEVBQUEsRUFBQSxZQUFBLElBQUEsRUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBR0EsR0FBQSxFQUFBLEdBTUEsSUFFQSxFQUFBLEdBQUEsTUFBQSxLQUFBLEdBQ0EsTUFBQSxHQUNBLEVBQUEsT0FUQSxHQUFBLE9BQUEsRUFBQSxHQUNBLElBQ0EsR0FXQSxJQUFBLEVBRUEsTUFEQSxHQUFBLGFBQUEsS0FDQSxDQUdBLEdBQUEsRUFBQSxjQUNBLEVBSUEsT0FGQSxHQUFBLGFBQUEsS0FFQSxHQXlCQSxXQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEdBQ0EsS0FBQSxFQUNBLFlBQUEsRUFDQSxlQUFBLFdBQ0EsRUFBQSxrQkFBQSxHQUVBLGtCQUFBLEVBR0EsS0FBQSxFQUFBLGdCQUFBLEdBQUEsTUFBQSxFQU1BLEtBSkEsR0FDQSxHQUFBLEVBQUEsRUFEQSxFQUFBLEdBQUEsR0FBQSxVQUFBLEdBSUEsRUFBQSxHQUFBLENBR0EsSUFGQSxFQUFBLGFBQUEsRUFDQSxFQUFBLEVBQUEsWUFBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFFQSxHQUFBLEVBQUEsR0FPQSxJQUNBLEVBQUEsR0FBQSxNQUFBLEtBQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxPQVRBLEdBQUEsT0FBQSxFQUFBLEdBQ0EsSUFDQSxHQWVBLE1BQUEsRUFBQSxFQUFBLGdCQUFBLElBQUEsRUFBQSxhQUNBLElBQUEsR0FBQSxFQUFBLGVBQ0EsS0FBQSxJQUFBLEtBQUEsRUFBQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxRQU1BLE1BREEsR0FBQSxhQUFBLEtBQ0EsR0FJQSxJQUFBLEdBQUEsR0FBQSxFQUVBLE9BQUEsS0EwREEsUUFBQSxNQUNBLEdBQUEsR0FBQSxvQ0FDQSxFQUFBLDRDQWtCQSxNQUFBLDJCQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLEVBQ0EsTUFFQSxHQW9CQSxLQUFBLDRCQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLEVBQ0EsTUFFQTtFQUdBLEtBQUEsS0FBQSxXQUNBLE1BQUEsVUFBQSxFQUFBLEdBQ0EsR0FDQSxHQURBLEVBQUEsRUFBQSxFQUFBLENBR0EsT0FBQSxPQUFBLElBQUEsS0FDQSxFQUFBLEdBQUEsR0FBQSxLQUNBLEtBQUEsR0FBQSxFQUFBLE1BQUEsSUFJQSxFQUhBLFVBQUEsSUF5QkEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsZ0NBQUEsUUFDQSxRQUFBLFFBQUEsU0FJQSxRQUFBLElBQUEsR0FDQSxHQUFBLFNBQUEsRUFDQSxNQUFBLEVBQ0EsSUFBQSxFQUFBLEdBQUEsQ0FLQSxHQUFBLEVBQUEsUUFBQSxPQUFBLEdBQ0EsS0FBQSxJQUFBLFNBQ0EsdURBQUEsRUFLQSxPQUhBLEdBQUEsR0FBQSxHQUNBLFFBQUEsU0FBQSxNQUNBLFFBQUEsTUFBQSxjQUNBLEdBQUEsUUFBQSxJQUFBLEVBQUEsS0FDQSxHQUFBLEVBQUEsR0FJQSxNQUFBLElBQUEsUUFBQSxJQUFBLEVBQUEsT0FBQSxJQUVBLE1BQUEsSUFBQSxXQUNBLGtFQUtBLFFBQUEsSUFBQSxHQUNBLEdBQUEsS0FNQSxPQUxBLEdBQUEsSUFDQSxFQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxHQUFBLE1BR0EsRUF1RUEsUUFBQSxNQUNBLEtBQUEsYUFBQSxFQUdBLElBQUEsSUFBQSxRQUNBLElBd0JBLE1BQUEscUJBQUEsU0FBQSxHQUlBLE1BSEEsV0FBQSxTQUNBLEVBQUEsR0FBQSxJQUVBLEdBOEJBLEtBQUEscUJBQUEsU0FBQSxHQUlBLE1BSEEsV0FBQSxTQUNBLEVBQUEsR0FBQSxJQUVBLEdBR0EsS0FBQSxNQUFBLFlBQUEsU0FBQSxHQVdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxTQUFBLEVBQ0EsR0FBQSxLQUdBLEVBQUEsS0FBQSxFQUFBLE1BSUEsUUFBQSxHQUFBLEdBQ0EsR0FDQSxHQUFBLEVBREEsRUFBQSxHQUFBLEVBQUEsWUFDQSxHQUFBLENBRUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLENBQ0EsR0FBQSxDQUNBLE9BR0EsR0FBQSxFQUVBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxDQUNBLEdBQUEsQ0FDQSxPQUlBLE1BQUEsR0FHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxHQUNBLEtBQUEscUJBQUEsV0FDQSxNQUFBLElBWUEsT0FUQSxLQUNBLEVBQUEsVUFBQSxHQUFBLElBRUEsRUFBQSxVQUFBLFFBQUEsV0FDQSxNQUFBLE1BQUEsd0JBRUEsRUFBQSxVQUFBLFNBQUEsV0FDQSxNQUFBLE1BQUEsdUJBQUEsWUFFQSxFQTZCQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLGVBQUEsR0FBQSxFQUFBLEdBQUEsSUFDQSxLQUFBLEVBQ0EsS0FBQSxJQUFBLFdBQ0EsMEVBQ0EsRUFBQSxFQUVBLElBQUEsT0FBQSxHQUFBLElBQUEsR0FBQSxLQUFBLEVBQ0EsTUFBQSxFQUlBLElBQUEsZ0JBQUEsR0FDQSxLQUFBLElBQUEsUUFDQSxzRkFDQSxFQUVBLE9BQUEsSUFBQSxHQUFBLEdBcUJBLFFBQUEsR0FBQSxHQUNBLE1BQUEsYUFBQSxHQUNBLEVBQUEsdUJBRUEsRUFtQkEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLE9BQUEsR0FBQSxJQUFBLEdBQUEsS0FBQSxFQUNBLE1BQUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxlQUFBLEdBQUEsRUFBQSxHQUFBLElBQ0EsSUFBQSxHQUFBLFlBQUEsR0FDQSxNQUFBLEdBQUEsc0JBS0EsSUFBQSxJQUFBLEdBQUEsYUFBQSxDQUNBLEdBQUEsRUFBQSxHQUNBLE1BQUEsRUFFQSxNQUFBLElBQUEsV0FDQSxrRkFDQSxFQUFBLFlBRUEsR0FBQSxJQUFBLEdBQUEsS0FDQSxNQUFBLEdBQUEsRUFFQSxNQUFBLElBQUEsU0FBQSx3REF2S0EsR0FBQSxHQUFBLFdBQ0EsS0FBQSxJQUFBLFNBQUEsd0RBR0EsR0FBQSxJQUFBLGVBQ0EsRUFBQSxFQUFBLElBQUEsYUFxREEsSUFBQSxHQUFBLElBQ0EsSUErR0EsT0E3R0EsR0FBQSxHQUFBLE1BQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxLQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLElBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxjQUFBLEVBQUEsRUFBQSxHQUFBLE9BeUdBLFFBQUEsRUFDQSxXQUFBLEVBQ0EsUUFBQSxLQThSQSxRQUFBLE1BQ0EsR0FBQSxJQUFBLENBYUEsTUFBQSxRQUFBLFNBQUEsR0FJQSxNQUhBLFdBQUEsU0FDQSxJQUFBLEdBRUEsR0FrREEsS0FBQSxNQUFBLFNBQUEsV0FBQSxlQUFBLFNBQ0EsRUFBQSxFQUFBLEdBR0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLGlCQUFBLEVBQ0EsS0FBQSxJQUFBLFdBQ0Esb1BBS0EsSUFBQSxHQUFBLEVBQUEsR0FhQSxHQUFBLFVBQUEsV0FDQSxNQUFBLElBRUEsRUFBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLFdBQUEsRUFBQSxXQUNBLEVBQUEsUUFBQSxFQUFBLFFBRUEsSUFDQSxFQUFBLFFBQUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUFBLE1BQUEsSUFDQSxFQUFBLFFBQUEsR0FzQkEsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxTQUNBLEVBRUEsRUFBQSxFQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsV0FBQSxFQUFBLEtBd1BBLElBQUEsR0FBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFdBQ0EsRUFBQSxFQUFBLE9BZUEsT0FiQSxHQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFDQSxHQUFBLEdBQUEsWUFBQSxJQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxJQUVBLEVBQUEsR0FBQSxlQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLElBRUEsRUFBQSxHQUFBLFlBQUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsTUFJQSxJQW1CQSxRQUFBLE1BQ0EsS0FBQSxNQUFBLFVBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQU1BLEdBS0EsRUFYQSxLQUNBLEVBQ0EsR0FBQSxnQkFBQSxLQUFBLElBQUEsRUFBQSxlQUFBLGlCQUFBLElBQ0EsRUFBQSxTQUFBLE1BQUEsRUFBQSxlQUFBLFdBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLGFBRUEsRUFBQSw4QkFDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEVBQ0EsR0FBQSxDQUdBLElBQUEsRUFBQSxDQUNBLElBQUEsR0FBQSxLQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsS0FBQSxHQUFBLENBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLGNBQUEsRUFBQSxPQUFBLEVBQ0EsT0FJQSxJQUNBLEVBQUEsaUJBQUEsSUFBQSxVQUdBLEtBQUEsY0FBQSxJQUFBLEVBQUEsY0FBQSxJQUNBLEtBQUEsYUFBQSxJQUFBLEVBQUEsYUFBQSxLQUVBLEdBQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLEtBQUEsTUFBQSxrQkFDQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE1BQUEsa0JBS0EsT0FVQSxXQUFBLEVBQUEsVUFBQSxFQUFBLFFBQUEsV0FBQSxFQUFBLEdBQUEsR0FFQSxXQUFBLGdCQUFBLE1BRUEsR0FBQSxFQUFBLEdBQ0EsU0FBQSxTQUFBLEdBSUEsR0FBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLE9BQUEsQ0FFQSxJQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsY0FBQSxNQUNBLEdBQUEsR0FBQSxLQUFBLElBQUEsR0FHQSxNQUFBLEdBQUEsSUFFQSxJQUFBLEtBQ0EsYUFBQSxFQUNBLFlBQUEsRUFDQSxXQUFBLEVBQ0EsUUFBQSxFQUNBLEtBQUEsR0FDQSxpQkFBQSxLQXdCQSxRQUFBLE1BQ0EsS0FBQSxNQUFBLGlCQUFBLFFBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLFFBQUEsR0FBQSxFQUFBLEdBZ0JBLFFBQUEsS0FFQSxHQURBLEVBQUEsd0JBQ0EsRUFDQSxLQUFBLElBQUEsU0FBQSwrQkFBQSxFQUVBLE9BQUEsR0FBQSxTQXBCQSxHQUFBLEdBQUEsQ0FHQSxPQUZBLEdBQUEsdUJBRUEsRUFBQSxJQUFBLEdBQUEsTUFBQSxJQUNBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLElBQ0EsT0FBQSxJQUFBLElBQUEsRUFBQSxRQUlBLEVBQUEsdUJBQ0EsRUFBQSxJQUFBLEVBQUEsR0FDQSxHQUxBLEtBTUEsR0FhQSxNQUZBLEdBQUEscUJBQUEsRUFFQSxJQUlBLFFBQUEsTUFDQSxLQUFBLE1BQUEsYUFBQSxXQUFBLFlBQ0EsU0FBQSxFQUFBLEVBQUEsR0FTQSxHQUFBLEtBb0dBLE9BdEZBLEdBQUEsYUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLHVCQUFBLGNBQ0EsSUFrQkEsT0FqQkEsR0FBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxRQUFBLEdBQUEsS0FBQSxXQUNBLElBQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxRQUFBLFVBQUEsRUFBQSxjQUNBLEdBQUEsS0FBQSxJQUNBLEVBQUEsS0FBQSxPQUdBLElBQUEsRUFBQSxRQUFBLElBQ0EsRUFBQSxLQUFBLE9BTUEsR0FlQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxJQUFBLEdBREEsSUFBQSxNQUFBLFdBQUEsU0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLElBQUEsS0FDQSxFQUFBLElBQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxJQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsaUJBQUEsRUFDQSxJQUFBLEVBQUEsT0FDQSxNQUFBLEtBWUEsRUFBQSxZQUFBLFdBQ0EsTUFBQSxHQUFBLE9BWUEsRUFBQSxZQUFBLFNBQUEsR0FDQSxJQUFBLEVBQUEsUUFDQSxFQUFBLElBQUEsR0FDQSxFQUFBLFlBWUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLGdDQUFBLElBR0EsSUFJQSxRQUFBLE1BQ0EsS0FBQSxNQUFBLGFBQUEsV0FBQSxLQUFBLE1BQUEsb0JBQ0EsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBNkJBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxHQUdBLEdBSEEsRUFBQSxFQUFBLEtBQUEsRUFDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQ0EsRUFBQSxFQUFBLE9Bb0JBLE9BakJBLEdBQUEsRUFBQSxNQUFBLFdBQ0EsSUFDQSxFQUFBLFFBQUEsS0FDQSxNQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxHQUVBLGNBQ0EsR0FBQSxFQUFBLGFBR0EsR0FBQSxFQUFBLFVBQ0EsR0FFQSxFQUFBLFlBQUEsRUFDQSxFQUFBLEdBQUEsRUFFQSxFQW5EQSxHQUFBLEtBNEVBLE9BVEEsR0FBQSxPQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxjQUFBLElBQ0EsRUFBQSxFQUFBLGFBQUEsT0FBQSxrQkFDQSxHQUFBLEVBQUEsYUFDQSxFQUFBLE1BQUEsT0FBQSxFQUFBLGVBRUEsR0FHQSxJQW1FQSxRQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsQ0FZQSxPQVZBLE1BR0EsR0FBQSxhQUFBLE9BQUEsR0FDQSxFQUFBLEdBQUEsTUFHQSxHQUFBLGFBQUEsT0FBQSxJQUlBLEtBQUEsR0FBQSxLQUNBLFNBQUEsR0FBQSxTQUFBLEdBQUEsU0FBQSxRQUFBLEtBQUEsSUFBQSxHQUNBLEtBQUEsR0FBQSxLQUNBLE9BQUEsR0FBQSxPQUFBLEdBQUEsT0FBQSxRQUFBLE1BQUEsSUFBQSxHQUNBLEtBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQSxRQUFBLEtBQUEsSUFBQSxHQUNBLFNBQUEsR0FBQSxTQUNBLEtBQUEsR0FBQSxLQUNBLFNBQUEsTUFBQSxHQUFBLFNBQUEsT0FBQSxHQUNBLEdBQUEsU0FDQSxJQUFBLEdBQUEsVUFXQSxRQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxDQUNBLE9BQUEsR0FBQSxXQUFBLEdBQUEsVUFDQSxFQUFBLE9BQUEsR0FBQSxLQTRDQSxRQUFBLE1BQ0EsS0FBQSxLQUFBLEVBQUEsR0FnR0EsUUFBQSxJQUFBLEdBV0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsR0FBQSxDQUNBLEdBQUEsS0FJQSxPQUhBLEdBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEtBRUEsRUFFQSxNQUFBLEdBQUEsUUFBQSxFQUFBLEVBQUEsR0FsQkEsR0FBQSxHQUFBLFFBcUJBLE1BQUEsU0FBQSxFQUVBLEtBQUEsTUFBQSxZQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FDQSxNQUFBLEdBQUEsSUFBQSxFQUFBLE1Ba0JBLEVBQUEsV0FBQSxJQUNBLEVBQUEsT0FBQSxJQUNBLEVBQUEsU0FBQSxJQUNBLEVBQUEsT0FBQSxJQUNBLEVBQUEsVUFBQSxJQUNBLEVBQUEsWUFBQSxJQUNBLEVBQUEsU0FBQSxJQUNBLEVBQUEsVUFBQSxJQUNBLEVBQUEsWUFBQSxJQXNIQSxRQUFBLE1BQ0EsTUFBQSxVQUFBLEVBQUEsRUFBQSxHQUNBLElBQUEsR0FBQSxHQUFBLE1BQUEsRUFFQSxJQUFBLFNBQUEsR0FDQSxJQUVBLEdBQUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsSUFBQSxFQUFBLEdBQUEsRUFBQSxHQUNBLE9BQUEsQ0FHQSxRQUFBLEdBR0EsYUFBQSxJQUVBLEVBREEsWUFBQSxHQUFBLEVBQ0EsU0FBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLE9BQUEsRUFBQSxJQUdBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLGdCQUFBLElBQUEsZ0JBQUEsR0FBQSxDQUNBLElBQUEsR0FBQSxLQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsT0FBQSxJQUFBLEdBQUEsS0FBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLE9BQUEsQ0FHQSxRQUFBLEVBR0EsTUFEQSxJQUFBLEdBQUEsR0FBQSxlQUNBLEdBQUEsR0FBQSxjQUFBLFFBQUEsR0FBQSxJQUtBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLGdCQUFBLElBQUEsTUFBQSxFQUFBLE9BQUEsR0FDQSxPQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FFQSxjQUFBLElBQ0EsSUFBQSxVQUNBLElBQUEsU0FDQSxJQUFBLFNBQ0EsTUFBQSxHQUFBLEVBQUEsRUFDQSxLQUFBLFNBQ0EsYUFBQSxJQUNBLElBQUEsU0FDQSxNQUFBLEdBQUEsRUFBQSxFQUNBLFNBQ0EsSUFBQSxHQUFBLEtBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsR0FDQSxPQUFBLEVBS0EsT0FBQSxDQUNBLEtBQUEsUUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUNBLE9BQUEsQ0FHQSxRQUFBLENBQ0EsU0FDQSxPQUFBLEdBR0EsY0FBQSxJQUNBLElBQUEsVUFDQSxJQUFBLFNBQ0EsSUFBQSxTQUVBLEdBQUEsRUFBQSxFQUVBLEtBQUEsU0FFQSxJQUFBLEdBQUEsS0FBQSxJQUNBLFNBQUEsR0FDQSxtQkFBQSxHQUFBLElBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxPQUVBLEVBRUEsTUFDQSxLQUFBLFdBQ0EsRUFBQSxLQUFBLEVBQ0EsTUFDQSxTQUNBLE1BQUEsR0FHQSxJQUFBLEdBREEsTUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxNQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsR0FHQSxNQUFBLElBcURBLFFBQUEsSUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLGNBQ0EsT0FBQSxVQUFBLEVBQUEsR0FJQSxNQUhBLEdBQUEsS0FBQSxFQUFBLEVBQUEsY0FHQSxNQUFBLEVBQ0EsRUFDQSxHQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsWUFBQSxHQUNBLFFBQUEsVUFBQSxJQXdEQSxRQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxjQUNBLE9BQUEsVUFBQSxFQUFBLEdBR0EsTUFBQSxPQUFBLEVBQ0EsRUFDQSxHQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsWUFDQSxJQUtBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsSUFBQSxTQUFBLElBQUEsRUFBQSxHQUFBLE1BQUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxDQUNBLEdBQUEsS0FBQSxJQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsS0FFQSxHQUFBLENBQ0EsSUFBQSxLQUFBLEVBQUEsUUFBQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxzQkFDQSxJQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxJQUNBLEVBQUEsSUFFQSxFQUFBLEVBQ0EsR0FBQSxHQUlBLEdBQUEsRUFrREEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLFFBQUEsUUFuREEsQ0FDQSxHQUFBLElBQUEsRUFBQSxNQUFBLElBQUEsSUFBQSxJQUFBLE1BR0EsR0FBQSxLQUNBLEVBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLFFBQUEsR0FBQSxFQUFBLFVBTUEsSUFBQSxLQUFBLFFBQUEsRUFBQSxXQUFBLElBQUEsSUFBQSxXQUFBLEtBQUEsR0FFQSxJQUFBLElBQ0EsR0FBQSxFQUdBLElBQUEsSUFBQSxHQUFBLEdBQUEsTUFBQSxJQUNBLEVBQUEsRUFBQSxFQUNBLEdBQUEsRUFBQSxJQUFBLEVBRUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsS0FFQSxJQUFBLEVBQUEsUUFBQSxFQUFBLEVBRUEsSUFEQSxFQUFBLEVBQUEsT0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsSUFBQSxHQUFBLElBQUEsSUFDQSxHQUFBLEdBRUEsR0FBQSxFQUFBLE9BQUEsRUFJQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxLQUNBLEVBQUEsT0FBQSxHQUFBLElBQUEsR0FBQSxJQUFBLElBQ0EsR0FBQSxHQUVBLEdBQUEsRUFBQSxPQUFBLEVBSUEsTUFBQSxFQUFBLE9BQUEsR0FDQSxHQUFBLEdBR0EsSUFBQSxNQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLElBV0EsTUFIQSxHQUFBLEtBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxRQUNBLEVBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLElBR0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQU1BLEtBTEEsRUFBQSxJQUNBLEVBQUEsSUFDQSxHQUFBLEdBRUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxPQUFBLEdBQUEsRUFBQSxJQUFBLENBR0EsT0FGQSxLQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsRUFJQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsR0FBQSxFQUNBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLElBSUEsUUFIQSxFQUFBLEdBQUEsR0FBQSxLQUNBLEdBQUEsR0FDQSxJQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsSUFDQSxHQUFBLEVBQUEsRUFBQSxJQUlBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsUUFBQSxFQUFBLEVBRUEsT0FBQSxHQUFBLEdBQUEsSUFJQSxRQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLG9CQUNBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFLQSxPQUhBLElBQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxRQUFBLFFBQUEsRUFBQSxJQUFBLEdBQ0EsR0FBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEdBS0EsUUFBQSxJQUFBLEdBRUEsR0FBQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEVBQUEsR0FBQSxRQUdBLE9BQUEsSUFBQSxNQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEdBR0EsUUFBQSxJQUFBLEdBQ0EsTUFBQSxJQUFBLE1BQUEsRUFBQSxjQUFBLEVBQUEsV0FFQSxFQUFBLFdBQUEsRUFBQSxFQUFBLFdBR0EsUUFBQSxJQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxlQUNBLEVBQUEsR0FBQSxHQUVBLEdBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxPQUVBLE9BQUEsSUFBQSxFQUFBLElBSUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsV0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEVBQUEsTUFBQSxHQTZIQSxRQUFBLElBQUEsR0FLQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEVBQ0EsSUFBQSxFQUFBLEVBQUEsTUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEdBQUEsTUFBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxlQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxRQUVBLEdBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsTUFFQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsSUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsSUFBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLElBQUEsV0FBQSxNQUFBLEVBQUEsSUFBQSxJQUVBLE9BREEsR0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUVBLE1BQUEsR0F2QkEsR0FBQSxHQUFBLHNHQTJCQSxPQUFBLFVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FFQSxHQUFBLEVBRkEsRUFBQSxHQUNBLElBYUEsSUFWQSxFQUFBLEdBQUEsYUFDQSxFQUFBLEVBQUEsaUJBQUEsSUFBQSxFQUNBLEVBQUEsS0FDQSxFQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBR0EsRUFBQSxLQUNBLEVBQUEsR0FBQSxNQUFBLEtBR0EsRUFBQSxHQUNBLE1BQUEsRUFHQSxNQUFBLEdBQ0EsRUFBQSxHQUFBLEtBQUEsR0FDQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsUUFFQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBY0EsT0FWQSxJQUFBLFFBQUEsSUFDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLFdBQ0EsRUFBQSxXQUFBLEVBQUEsYUFBQSxFQUFBLHNCQUVBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLGtCQUNBLEVBQUEsUUFBQSxXQUFBLElBQUEsUUFBQSxNQUFBLE9BR0EsR0FpQ0EsUUFBQSxNQUNBLE1BQUEsVUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLElBK0dBLFFBQUEsTUFDQSxNQUFBLFVBQUEsRUFBQSxHQUVBLEdBREEsRUFBQSxLQUFBLEVBQUEsRUFBQSxhQUNBLEdBQUEsS0FBQSxFQUFBLEdBQUEsTUFBQSxFQVFBLElBTEEsRUFEQSxNQUFBLEtBQUEsSUFBQSxPQUFBLElBQ0EsT0FBQSxHQUVBLEVBQUEsR0FHQSxFQUFBLEdBRUEsTUFBQSxHQUNBLEdBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsUUFFQSxFQUlBLElBQ0EsR0FBQSxFQURBLElBaUJBLEtBYkEsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLE9BQ0EsR0FBQSxFQUFBLFNBQ0EsR0FBQSxFQUFBLFFBRUEsRUFBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLElBRUEsRUFBQSxFQUFBLE9BQUEsRUFDQSxFQUFBLEVBQUEsUUFHQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxHQUdBLE9BQUEsSUFxSEEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsRUFBQSxHQTJCQSxRQUFBLEdBQUEsRUFBQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUNBLElBQUEsSUFBQSxFQUFBLE1BQUEsR0FFQSxNQUFBLEdBRUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEdBQ0EsU0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEVBQUEsSUFDQSxFQUVBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxTQUFBLEdBQ0EsUUFBQSxFQUNBLE9BQUEsSUFBQSxHQUNBLEVBQUEsSUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLFdBRUEsVUFBQSxJQUNBLEVBQUEsRUFBQSxjQUNBLEVBQUEsRUFBQSxlQUVBLElBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEdBQUEsRUFyREEsSUFBQSxFQUFBLEdBQUEsTUFBQSxFQUNBLEtBQUEsRUFBQSxNQUFBLEVBQ0EsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsQ0FDQSxJQUFBLEVBQUEsTUFDQSxLQUFBLEVBQUEsT0FBQSxJQUFBLEtBQUEsRUFBQSxPQUFBLE1BQ0EsRUFBQSxLQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsRUFBQSxVQUFBLElBRUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLENBQ0EsR0FBQSxHQUFBLEdBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxLQUNBLEdBR0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxLQUNBLElBR0EsS0FBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsR0FDQSxPQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsS0FtQ0EsUUFBQSxJQUFBLEdBT0EsTUFOQSxHQUFBLEtBQ0EsR0FDQSxLQUFBLElBR0EsRUFBQSxTQUFBLEVBQUEsVUFBQSxLQUNBLEVBQUEsR0ErZ0JBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxTQUFBLFdBQUEsU0FBQSxHQUNBLElBR0EsR0FBQSxVQUNBLEVBQUEsYUFDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFdBQUEsRUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFlBQUEsRUFFQSxFQUFBLFlBQUEsR0FHQSxFQUFBLFNBQUEsSUFhQSxFQUFBLG1CQUFBLFdBQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLHdCQWVBLEVBQUEsaUJBQUEsV0FDQSxFQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsc0JBYUEsRUFBQSxZQUFBLFNBQUEsR0FHQSxHQUFBLEVBQUEsTUFBQSxTQUNBLEVBQUEsS0FBQSxHQUVBLEVBQUEsUUFDQSxFQUFBLEVBQUEsT0FBQSxJQWFBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLFNBQ0EsR0FBQSxFQUFBLE9BRUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxhQUFBLEVBQUEsS0FBQSxLQUVBLEVBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsYUFBQSxFQUFBLEtBQUEsS0FHQSxFQUFBLEVBQUEsSUFhQSxJQUNBLEtBQUEsS0FDQSxTQUFBLEVBQ0EsSUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxFQUVBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFBQSxFQUNBLE1BQUEsR0FDQSxFQUFBLEtBQUEsT0FKQSxHQUFBLElBQUEsSUFRQSxNQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxLQUdBLEVBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxjQUNBLEdBQUEsS0FHQSxXQUFBLEVBQ0EsU0FBQSxJQWFBLEVBQUEsVUFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLElBQ0EsRUFBQSxTQUFBLEVBQUEsSUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFdBQUEsRUFDQSxFQUFBLGFBaUJBLEVBQUEsYUFBQSxXQUNBLEVBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxXQUFBLEVBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLGtCQVdBLEVBQUEsY0FBQSxXQUNBLEVBQUEsU0FBQSxFQUFBLElBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxpQkFnbkNBLFFBQUEsSUFBQSxHQUNBLEVBQUEsWUFBQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxHQUFBLEVBQUEsRUFBQSxhQUlBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FHQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FDQSxJQURBLEVBQUEsS0FBQSxJQUNBLEVBQUEsR0FBQSxhQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsR0FBQSxLQUtBLEtBQUEsRUFBQSxRQUFBLENBQ0EsR0FBQSxJQUFBLENBRUEsR0FBQSxHQUFBLG1CQUFBLFdBQ0EsR0FBQSxJQUdBLEVBQUEsR0FBQSxpQkFBQSxXQUNBLEdBQUEsRUFDQSxNQUlBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEdBQUEsRUFBQSxJQU1BLElBQUEsSUFBQSxXQUFBLEdBQUEsR0FBQSxNQUFBLEVBQUEsR0FBQSxjQUFBLEVBRUEsWUFEQSxFQUFBLEVBQUEsR0FBQSxZQU9BLGNBQUEsR0FBQSxFQUFBLFFBQUEsVUFBQSxFQUFBLFNBQ0EsRUFBQSxHQUFBLEtBTUEsRUFBQSxhQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsd0JBQ0EsRUFBQSxjQUFBLEVBQUEsSUFNQSxJQUFBLEVBQUEsU0FBQSxTQUNBLEVBQUEsR0FBQSxRQUFBLE9BQ0EsQ0FDQSxHQUFBLEdBRUEsRUFBQSxTQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsTUFBQSxXQUNBLEVBQUEsR0FDQSxFQUFBLFFBS0EsR0FBQSxHQUFBLFVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE9BSUEsTUFBQSxHQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxJQUFBLElBQUEsR0FFQSxFQUFBLEtBSUEsRUFBQSxTQUFBLFVBQ0EsRUFBQSxHQUFBLFlBQUEsR0FNQSxFQUFBLEdBQUEsU0FBQSxHQUVBLEVBQUEsUUFBQSxXQUNBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxhQUFBLEdBQUEsRUFBQSxhQUlBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEdBQ0EsTUFBQSxFQUdBLElBQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxVQUFBLENBQ0EsSUFBQSxHQUFBLEdBQUEsS0FBQSxFQUNBLElBQUEsRUFBQSxDQUNBLEdBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBU0EsT0FQQSxLQUNBLEVBQUEsRUFBQSxXQUNBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxtQkFHQSxHQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsTUFBQSxLQUdBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsQ0FFQSxJQUFBLEVBQUEsR0FDQSxNQUFBLEVBR0EsSUFBQSxFQUFBLEdBQUEsQ0FPQSxHQUhBLEtBQUEsRUFBQSxPQUFBLElBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEtBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLE9BQUEsSUFFQSxHQUFBLEtBQUEsR0FDQSxNQUFBLElBQUEsTUFBQSxFQUtBLElBSEEsRUFBQSxVQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsR0F1QkEsTUFwQkEsR0FBQSxRQUVBLEVBREEsR0FFQSxLQUFBLEVBQUEsY0FDQSxHQUFBLEVBQUEsV0FBQSxFQUNBLEdBQUEsRUFBQSxVQUNBLEdBQUEsRUFBQSxXQUNBLEdBQUEsRUFBQSxhQUNBLEdBQUEsRUFBQSxhQUNBLElBQUEsRUFBQSxvQkFHQSxLQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEdBR0EsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxLQUFBLEtBR0EsR0FBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBQUEsR0FJQSxNQUFBLE1BSUEsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBb0RBLFFBQUEsR0FBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQXBEQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxTQUFBLFFBMkJBLElBekJBLEVBQUEsYUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsS0FDQSxJQUFBLEVBQUEsS0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsV0FDQSxJQUFBLEdBQUEsUUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLElBQUEsRUFBQSxtQkFDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLFVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBSUEsT0FIQSxRQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEsYUFBQSxFQUFBLHFCQUVBLEVBRUEsTUFBQSxLQUdBLEVBQUEsWUFBQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxFQUFBLEdBRUEsS0FHQSxFQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEVBQ0EsR0FBQSxZQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxHQUVBLEVBQUEsU0FBQSxNQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGNBSUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEVBQ0EsR0FBQSxZQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxHQUVBLEVBQUEsU0FBQSxNQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGdCQVVBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLHNCQUFBLEVBQUEsRUFBQSxTQUNBLElBQ0EsRUFBQSxTQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsT0FLQSxPQUFBLEdBQUEsV0FBQSxFQUFBLGFBQUEsRUFBQSxJQUtBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FxQkEsR0FwQkEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxhQUFBLFNBQ0EsRUFBQSxTQUFBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLEdBQUEsS0FDQSxHQUFBLEtBQUEsR0FBQSxXQUFBLEdBQ0EsSUFHQSxFQUFBLFlBQUEsS0FBQSxTQUFBLEdBQ0EsSUFBQSxFQUFBLFNBQUEsR0FBQSxDQUNBLElBQUEsRUFBQSxHQUNBLEtBQUEsSUFBQSxTQUFBLGdDQUFBLEVBRUEsR0FBQSxFQUFBLFdBRUEsTUFBQSxLQUdBLEVBQUEsS0FBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEVBQ0EsR0FBQSxZQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLElBQUEsRUFBQSxJQUFBLEdBQUEsR0FHQSxFQUFBLFNBQUEsTUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsS0FDQSxFQUFBLFdBQUEsRUFBQSxLQUVBLEVBQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLEVBRUEsRUFBQSxjQUlBLEdBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxDQUNBLEdBQUEsRUFDQSxHQUFBLFlBQUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQUEsSUFBQSxFQUFBLElBQUEsR0FBQSxHQUdBLEVBQUEsU0FBQSxNQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsV0FBQSxFQUFBLEtBRUEsRUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsRUFFQSxFQUFBLGVBS0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUdBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUVBLEVBQUEsYUFBQSxNQUNBLEVBQUEsWUFBQSxJQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxJQUlBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FHQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FFQSxFQUFBLGFBQUEsUUFDQSxFQUFBLFlBQUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsSUFJQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsT0FBQSxJQUdBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxHQUFBLFNBQ0EsRUFBQSxjQUFBLEVBQUEsTUFBQSxHQUFBLEVBQUEsTUFJQSxHQUFBLEdBQUEsUUFBQSxHQUVBLEVBQUEsUUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEtBQ0EsR0FBQSxHQUFBLFFBQUEsR0FBQSxFQUFBLFlBR0EsRUFBQSxTQUFBLFFBQUEsRUFBQSxTQUdBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsRUFBQSxHQUFBLENBRUEsR0FEQSxFQUFBLEVBQUEsSUFDQSxFQUFBLFNBQ0EsS0FBQSxHQUFBLFdBQUEsWUFBQSx5REFDQSxFQUFBLEVBRUEsT0FBQSxHQUFBLEdBRUEsTUFBQSxHQUdBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGNBQUEsRUFBQSxhQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxlQUFBLEVBQUEsY0FBQSxHQUVBLEVBQUEsU0FBQSxHQUNBLEVBQUEsY0FBQSxFQUFBLEdBQUEsUUFBQSxHQUFBLEVBQUEsTUFHQSxHQUFBLEdBQUEsUUFBQSxHQUVBLEVBQUEsUUFBQSxXQUNBLEVBQUEsR0FBQSxRQUFBLEVBQUEsWUFJQSxFQUFBLFNBQUEsU0FBQSxHQUNBLE1BQUEsS0FBQSxHQUdBLEVBQUEsWUFBQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxLQUdBLEVBQUEsU0FBQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxJQXVuREEsUUFBQSxJQUFBLEdBWUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLElBQUEsRUFDQSxFQUFBLFdBQUEsRUFBQSxHQUVBLEVBQUEsV0FBQSxFQUFBLEdBRUEsRUFBQSxHQUlBLEdBQ0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxVQUFBLEVBQUEsS0FFQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxLQVJBLEVBQUEsRUFBQSxPQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsVUFBQSxFQUFBLElBVUEsRUFBQSxVQUNBLEVBQUEsSUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFDQSxFQUFBLEdBQUEsUUFFQSxFQUFBLElBQUEsR0FDQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFFBQ0EsRUFBQSxVQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsRUFBQSxRQU9BLElBQUEsRUFFQSxHQURBLEVBQUEsVUFBQSxFQUFBLFNBQUEsR0FDQSxFQUNBLEVBQUEsT0FBQSxJQUNBLEVBQ0EsRUFBQSxVQUFBLElBQ0EsRUFFQSxLQUVBLEVBQUEsRUFBQSxHQUNBLEVBQUEsYUFBQSxFQUFBLEVBQUEsR0FHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLEVBQUEsT0FFQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBR0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUFBLEdBSUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsSUFDQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxJQUNBLEdBQUEsRUFBQSxLQUNBLEVBQUEsWUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLEdBSUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSxHQUFBLEVBQUEsS0FBQSxHQUVBLEVBQUEsR0FBQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxLQUFBLEdBeEZBLEdBQUEsR0FBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLFNBQ0EsS0FDQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsV0FDQSxFQUFBLEVBQUEsUUFFQSxHQUFBLGFBQUEsRUFDQSxFQUFBLElBQUEsR0FtRkEsUUFBQSxJQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsR0FBQSxLQUFBLEdBQ0EsT0FBQSxDQUdBLFFBQUEsRUFnTkEsUUFBQSxJQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsVUFBQSxHQUNBLFdBQUEsU0FBQSxHQStFQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsS0FFQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUVBLElBQUEsR0FEQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLFFBQUEsRUFFQSxHQUFBLEtBQUEsR0FFQSxNQUFBLEdBR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsTUFBQSxFQUNBLElBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLElBQ0EsSUFBQSxFQUFBLEdBQUEsQ0FDQSxHQUFBLEtBTUEsT0FMQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsU0FHQSxFQUVBLE1BQUEsR0ExR0EsT0FDQSxTQUFBLEtBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQXVCQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxVQUFBLEdBR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsYUFBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxvQkFDQSxJQVVBLE9BVEEsR0FBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsSUFBQSxFQUFBLElBQUEsR0FBQSxFQUNBLEVBQUEsT0FBQSxFQUFBLElBQ0EsRUFBQSxLQUFBLE1BSUEsRUFBQSxLQUFBLGVBQUEsR0FDQSxFQUFBLEtBQUEsS0FHQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsSUFDQSxHQUFBLEVBQUEsUUFDQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEdBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLEdBSUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxLQUFBLEdBQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsSUFBQSxHQUVBLElBQUEsRUFBQSxFQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsRUFBQSxRQUhBLEdBQUEsR0FNQSxFQUFBLEVBQUEsR0F0RUEsR0FBQSxFQUVBLEdBQUEsT0FBQSxFQUFBLEdBQUEsR0FBQSxHQUVBLEVBQUEsU0FBQSxRQUFBLFdBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxPQUlBLFlBQUEsR0FDQSxFQUFBLE9BQUEsU0FBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxDQUNBLElBQUEsS0FBQSxFQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxJQUNBLEtBQUEsRUFDQSxFQUFBLEdBQ0EsRUFBQSxVQTN0b0JBLEdBQUEsSUFBQSxxQkFJQSxHQUFBLFdBWUEsR0FBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxjQUFBLEdBQ0EsR0FBQSxPQUFBLFVBQUEsZUFZQSxHQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsR0FBQSxFQUFBLGNBQUEsR0FHQSxHQUFBLFNBQUEsR0FFQSxNQUFBLEdBQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxTQUFBLEdBQUEsTUFBQSxRQUFBLGFBQUEsR0FBQSxFQUFBLFdBQUEsTUFDQSxHQUVBLEdBQUEsU0FBQSxHQUVBLE1BQUEsR0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLFNBQUEsR0FBQSxNQUFBLFFBQUEsYUFBQSxJQUFBLEVBQUEsV0FBQSxNQUNBLEVBT0EsT0FBQSxJQUFBLGdCQUNBLEdBQUEsR0FDQSxHQUFBLEdBSUEsSUFDQSxJQUNBLEdBQ0EsR0FRQSxHQVBBLE1BQUEsTUFDQSxNQUFBLEtBQ0EsR0FBQSxPQUFBLFVBQUEsU0FDQSxHQUFBLEVBQUEsTUFHQSxHQUFBLEVBQUEsVUFBQSxFQUFBLFlBRUEsR0FBQSxDQU1BLElBQUEsR0FBQSxhQUFBLEtBQUEsR0FBQSxVQUFBLGlCQUFBLElBQ0EsTUFBQSxNQUNBLEdBQUEsR0FBQSx3QkFBQSxLQUFBLEdBQUEsVUFBQSxpQkFBQSxLQXlNQSxFQUFBLFdBb0JBLEVBQUEsVUFpSEEsSUFvOEJBLElBcDhCQSxHQUFBLE1BQUEsUUFrRUEsR0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBcVVBLEdBQUEsV0FDQSxHQUFBLEVBQUEsR0FBQSxXQUFBLE1BQUEsSUFBQSxTQUVBLElBQUEsTUFBQSxFQUFBLGNBQUEsY0FDQSxFQUFBLGNBQUEsaUJBRUEsS0FBQSxFQUNBLElBRUEsR0FBQSxVQUFBLElBRUEsTUFBQSxHQUNBLEdBQUEsRUFJQSxNQUFBLElBQUEsVUFBQSxHQTRPQSxJQUFBLE1BQUEsV0FBQSxNQUFBLFNBdVRBLEdBQUEsU0FRQSxJQUFBLEVBc2pCQSxJQUNBLEtBQUEsYUFDQSxNQUFBLEVBQ0EsTUFBQSxFQUNBLElBQUEsRUFDQSxTQUFBLHFCQTJPQSxJQUFBLFFBQUEsT0FFQSxJQUFBLElBQUEsR0FBQSxTQUNBLEdBQUEsRUFDQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxpQkFBQSxFQUFBLEdBQUEsSUFFQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxvQkFBQSxFQUFBLEdBQUEsR0FNQSxJQUFBLE1BQUEsU0FBQSxHQUVBLE1BQUEsTUFBQSxNQUFBLEVBQUEsS0FBQSxjQU1BLElBQUEsSUFBQSxrQkFDQSxHQUFBLGNBQ0EsSUFBQSxXQUFBLFdBQUEsV0FBQSxhQUNBLEdBQUEsRUFBQSxVQWVBLEdBQUEsNkJBQ0EsR0FBQSxZQUNBLEdBQUEsWUFDQSxHQUFBLDBFQUVBLElBQ0EsUUFBQSxFQUFBLCtCQUFBLGFBRUEsT0FBQSxFQUFBLFVBQUEsWUFDQSxLQUFBLEVBQUEsb0JBQUEsdUJBQ0EsSUFBQSxFQUFBLGlCQUFBLG9CQUNBLElBQUEsRUFBQSxxQkFBQSx5QkFDQSxVQUFBLEVBQUEsR0FBQSxJQUdBLElBQUEsU0FBQSxHQUFBLE9BQ0EsR0FBQSxNQUFBLEdBQUEsTUFBQSxHQUFBLFNBQUEsR0FBQSxRQUFBLEdBQUEsTUFDQSxHQUFBLEdBQUEsR0FBQSxFQXlTQSxJQUFBLElBQUEsR0FBQSxXQUNBLE1BQUEsU0FBQSxHQUdBLFFBQUEsS0FDQSxJQUNBLEdBQUEsRUFDQSxLQUxBLEdBQUEsSUFBQSxDQVNBLGNBQUEsRUFBQSxXQUNBLFdBQUEsSUFFQSxLQUFBLEdBQUEsbUJBQUEsR0FHQSxHQUFBLEdBQUEsR0FBQSxPQUFBLEdBRUEsS0FBQSxHQUFBLG1CQUFBLEtBR0EsU0FBQSxXQUNBLEdBQUEsS0FFQSxPQURBLEdBQUEsS0FBQSxTQUFBLEdBQUEsRUFBQSxLQUFBLEdBQUEsS0FDQSxJQUFBLEVBQUEsS0FBQSxNQUFBLEtBR0EsR0FBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEdBQUEsS0FBQSxLQUFBLE9BQUEsS0FHQSxPQUFBLEVBQ0EsS0FBQSxHQUNBLFFBQUEsS0FDQSxVQUFBLFFBUUEsS0FDQSxHQUFBLDREQUFBLE1BQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLElBQUEsR0FFQSxJQUFBLE1BQ0EsR0FBQSxtREFBQSxNQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxHQUVBLElBQUEsS0FDQSxZQUFBLFlBQ0EsWUFBQSxZQUNBLE1BQUEsTUFDQSxNQUFBLE1BQ0EsVUFBQSxVQWdCQSxJQUNBLEtBQUEsR0FDQSxXQUFBLElBQ0EsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBR0EsR0FDQSxLQUFBLEdBQ0EsY0FBQSxHQUVBLE1BQUEsU0FBQSxHQUVBLE1BQUEsSUFBQSxLQUFBLEVBQUEsV0FBQSxHQUFBLEVBQUEsWUFBQSxHQUFBLGdCQUFBLFlBR0EsYUFBQSxTQUFBLEdBRUEsTUFBQSxJQUFBLEtBQUEsRUFBQSxrQkFBQSxHQUFBLEtBQUEsRUFBQSw0QkFHQSxXQUFBLEdBRUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEVBQUEsY0FHQSxXQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsZ0JBQUEsSUFHQSxTQUFBLEdBRUEsSUFBQSxTQUFBLEVBQUEsRUFBQSxHQUdBLE1BRkEsR0FBQSxHQUFBLEdBRUEsRUFBQSxRQUNBLEVBQUEsTUFBQSxHQUFBLEdBRUEsRUFBQSxNQUFBLElBSUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsSUFBQSxHQUFBLEdBQUEsQ0FDQSxJQUFBLEVBQUEsR0FTQSxNQUFBLEdBQUEsS0FDQSxFQUFBLFdBQUEsYUFBQSxJQUFBLEdBQUEsVUFDQSxFQUNBLENBWEEsSUFDQSxFQUFBLElBQUEsRUFDQSxFQUFBLGFBQUEsRUFBQSxLQUVBLEVBQUEsSUFBQSxFQUNBLEVBQUEsZ0JBQUEsUUFRQSxJQUFBLEVBQUEsR0FDQSxFQUFBLGFBQUEsRUFBQSxPQUNBLElBQUEsRUFBQSxhQUFBLENBR0EsR0FBQSxHQUFBLEVBQUEsYUFBQSxFQUFBLEVBRUEsT0FBQSxRQUFBLEVBQUEsRUFBQSxJQUlBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsUUFDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLElBSUEsS0FBQSxXQUlBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLE9BQUEsS0FBQSxHQUFBLElBQUEsRUFBQSxFQUFBLFlBQUEsR0FFQSxFQUFBLFlBQUEsRUFQQSxNQURBLEdBQUEsSUFBQSxHQUNBLEtBV0EsSUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsR0FBQSxDQUNBLEdBQUEsRUFBQSxVQUFBLFdBQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxLQU1BLE9BTEEsR0FBQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsVUFDQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsUUFHQSxJQUFBLEVBQUEsT0FBQSxLQUFBLEVBRUEsTUFBQSxHQUFBLE1BRUEsRUFBQSxNQUFBLEdBR0EsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FDQSxFQUFBLFdBRUEsR0FBQSxHQUFBLFFBQ0EsRUFBQSxVQUFBLEtBR0EsTUFBQSxJQUNBLFNBQUEsRUFBQSxHQUlBLEdBQUEsVUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsS0FBQSxNQUtBLElBQUEsSUFBQSxLQUNBLEdBQUEsRUFBQSxRQUFBLElBQUEsSUFBQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsQ0FDQSxHQUFBLEVBQUEsR0FBQSxDQUdBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEdBQUEsSUFBQSxHQUVBLEVBQUEsS0FBQSxHQUFBLE9BRUEsS0FBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBS0EsT0FBQSxNQU9BLElBQUEsR0FIQSxHQUFBLEVBQUEsSUFFQSxFQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBRUEsTUFBQSxHQUlBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsS0FBQSxHQUFBLEVBQUEsRUFHQSxPQUFBLFNBMkRBLEdBQ0EsV0FBQSxHQUVBLEdBQUEsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLFNBQUEsd0VBR0EsSUFBQSxHQUFBLEdBQUEsQ0FJQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLE1BRUEsS0FDQSxFQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsR0FPQSxLQUhBLEdBQUEsR0FBQSxFQUFBLFFBQUEsTUFBQSxFQUFBLEVBQUEsTUFBQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLE9BRUEsS0FBQSxDQUNBLEVBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLEVBRUEsS0FDQSxFQUFBLE1BRUEsZUFBQSxHQUFBLGVBQUEsRUFLQSxHQUFBLEVBQUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsZ0JBR0EsR0FBQSxJQUFBLElBQUEsRUFBQSxTQUFBLEtBQ0EsRUFBQSxFQUFBLEtBS0EsYUFBQSxHQUNBLEdBQUEsRUFBQSxFQUFBLEdBR0EsRUFBQSxFQUFBLElBRUEsRUFBQSxLQUFBLE1BSUEsSUFBQSxHQUVBLElBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsR0FLQSxFQUFBLEdBQUEsRUFBQSxRQUFBLEtBQ0EsRUFBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxLQUVBLEVBQUEsR0FBQSxFQUFBLElBR0EsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFVBQ0EsSUFBQSxHQUNBLEVBQUEsR0FBQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQ0EsRUFBQSxhQUFBLEVBQUEsRUFBQSxhQUVBLEVBQUEsYUFBQSxFQUFBLEdBRUEsRUFBQSxLQUlBLFNBQUEsU0FBQSxHQUNBLEdBQUEsS0FLQSxPQUpBLEdBQUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxJQUFBLEVBQUEsVUFDQSxFQUFBLEtBQUEsS0FFQSxHQUdBLFNBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxpQkFBQSxFQUFBLGdCQUdBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxJQUFBLElBQUEsR0FBQSxLQUFBLEVBQUEsQ0FFQSxFQUFBLEdBQUEsSUFBQSxFQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsWUFBQSxNQUlBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLEVBQUEsU0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxHQUFBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxhQUFBLEVBQUEsT0FLQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxRQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsVUFDQSxJQUNBLEVBQUEsYUFBQSxFQUFBLEdBRUEsRUFBQSxZQUFBLElBR0EsT0FBQSxHQUVBLE9BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxJQUdBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFVBQ0EsR0FBQSxHQUFBLElBQUEsRUFFQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLGFBQUEsRUFBQSxFQUFBLGFBQ0EsRUFBQSxJQUlBLFNBQUEsR0FDQSxZQUFBLEdBRUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBQ0EsR0FBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLEtBRUEsRUFBQSxHQUFBLElBQUEsRUFBQSxNQUtBLE9BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFVBQ0EsT0FBQSxJQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsTUFHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsb0JBR0EsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEscUJBQ0EsRUFBQSxxQkFBQSxPQU1BLE1BQUEsR0FFQSxlQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsTUFBQSxFQUNBLEVBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLE9BQ0EsRUFBQSxHQUFBLEVBQUEsRUFFQSxLQUVBLEdBQ0EsZUFBQSxXQUFBLEtBQUEsa0JBQUEsR0FDQSxtQkFBQSxXQUFBLE1BQUEsTUFBQSxvQkFBQSxHQUNBLHlCQUFBLFdBQUEsS0FBQSw2QkFBQSxHQUNBLDhCQUFBLFdBQUEsTUFBQSxNQUFBLCtCQUFBLEdBQ0EsZ0JBQUEsRUFDQSxLQUFBLEVBQ0EsT0FBQSxHQUlBLEVBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxJQUlBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxHQUFBLE9BQUEsSUFBQSxHQUVBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxpQ0FDQSxFQUFBLE1BQUEsRUFBQSxRQUtBLFNBQUEsRUFBQSxHQUlBLEdBQUEsVUFBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBR0EsSUFBQSxHQUZBLEdBRUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsSUFDQSxFQUFBLEVBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FFQSxFQUFBLEdBQUEsS0FHQSxHQUFBLEVBQUEsRUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBR0EsT0FBQSxHQUFBLEdBQUEsRUFBQSxNQUlBLEdBQUEsVUFBQSxLQUFBLEdBQUEsVUFBQSxHQUNBLEdBQUEsVUFBQSxPQUFBLEdBQUEsVUFBQSxNQStDQSxHQUFBLFdBTUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLEdBQUEsRUFBQSxLQUFBLFVBQUEsR0FPQSxJQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsR0FBQSxFQUFBLEtBQUEsV0FPQSxPQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLFNBRUEsY0FEQSxNQUFBLEdBQ0EsR0FpRUEsSUFBQSxJQUFBLHFDQUNBLEdBQUEsSUFDQSxHQUFBLHVCQUNBLEdBQUEsbUNBQ0EsR0FBQSxFQUFBLFlBeXZCQSxJQUFBLFdBQUEsRUF5R0EsSUFBQSxJQUFBLEVBQUEsWUFlQSxJQUFBLFdBQUEsU0FBQSxHQUdBLEtBQUEsZUFrQ0EsS0FBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFlBQ0EsSUFBQSxHQUFBLEtBQUEsRUFBQSxPQUFBLEdBQUEsS0FBQSxJQUFBLFVBQ0Esd0RBQUEsRUFDQSxNQUFBLFlBQUEsRUFBQSxPQUFBLElBQUEsRUFDQSxFQUFBLFFBQUEsRUFBQSxJQWlCQSxLQUFBLGdCQUFBLFNBQUEsR0FJQSxNQUhBLEtBQUEsVUFBQSxTQUNBLEtBQUEsa0JBQUEsWUFBQSxRQUFBLEVBQUEsTUFFQSxLQUFBLG1CQUdBLEtBQUEsTUFBQSxNQUFBLGtCQUFBLFNBQUEsRUFBQSxHQUdBLFFBQUEsS0FTQSxNQVBBLEtBQ0EsRUFBQSxFQUFBLFFBQ0EsRUFBQSxXQUNBLEVBQUEsVUFDQSxFQUFBLFFBR0EsRUFBQSxRQVZBLEdBQUEsRUE4QkEsUUFpQkEsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQUdBLE1BRkEsR0FBQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxLQWFBLE1BQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxTQUNBLEtBb0JBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FHQSxNQUFBLE1BQUEsTUFBQSxFQUFBLEVBQUEsSUFlQSxTQUFBLFNBQUEsRUFBQSxHQU9BLE1BTkEsR0FBQSxFQUFBLEdBRUEsRUFEQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsR0FFQSxFQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsRUFBQSxLQUVBLEtBZUEsWUFBQSxTQUFBLEVBQUEsR0FPQSxNQU5BLEdBQUEsRUFBQSxHQUVBLEVBREEsR0FBQSxHQUFBLEVBQUEsS0FBQSxLQUFBLEdBRUEsRUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsS0FFQSxLQWdCQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEdBR0EsTUFGQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsWUFBQSxFQUFBLEdBQ0EsS0FHQSxRQUFBLEVBQ0EsT0FBQSxPQTQwQ0EsR0FBQSxFQUFBLFdBUUEsSUFBQSxTQUFBLFdBQUEsd0JBOHFEQSxJQUFBLElBQUEsMkJBK2lEQSxHQUFBLEVBQUEsZ0JBOGxCQSxHQUFBLGtDQUNBLElBQUEsS0FBQSxHQUFBLE1BQUEsSUFBQSxJQUFBLElBQ0EsR0FBQSxFQUFBLFlBNlNBLElBQUEsVUFDQSxHQUFBLFVBQ0EsR0FBQSxXQU1BLFNBQUEsRUFNQSxXQUFBLEVBY0EsT0FBQSxHQUFBLFlBZ0JBLElBQUEsU0FBQSxHQUNBLEdBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxLQUVBLElBQUEsR0FBQSxHQUFBLEtBQUEsRUFLQSxPQUpBLEdBQUEsSUFBQSxLQUFBLEtBQUEsbUJBQUEsRUFBQSxNQUNBLEVBQUEsSUFBQSxFQUFBLEtBQUEsS0FBQSxPQUFBLEVBQUEsSUFBQSxJQUNBLEtBQUEsS0FBQSxFQUFBLElBQUEsSUFFQSxNQWNBLFNBQUEsR0FBQSxjQWFBLEtBQUEsR0FBQSxVQWFBLEtBQUEsR0FBQSxVQW1CQSxLQUFBLEdBQUEsU0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEVBQUEsRUFBQSxXQUFBLEdBQ0EsS0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsSUFpREEsT0FBQSxTQUFBLEVBQUEsR0FDQSxPQUFBLFVBQUEsUUFDQSxJQUFBLEdBQ0EsTUFBQSxNQUFBLFFBQ0EsS0FBQSxHQUNBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsV0FDQSxLQUFBLFNBQUEsRUFBQSxPQUNBLENBQUEsSUFBQSxFQUFBLEdBUUEsS0FBQSxJQUFBLFdBQ0EscUZBUEEsR0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsU0FBQSxHQUFBLEtBR0EsS0FBQSxTQUFBLEVBS0EsS0FDQSxTQUNBLEVBQUEsSUFBQSxPQUFBLFFBQ0EsTUFBQSxTQUFBLEdBRUEsS0FBQSxTQUFBLEdBQUEsRUFLQSxNQURBLE1BQUEsWUFDQSxNQWlCQSxLQUFBLEdBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsV0FBQSxLQVdBLFFBQUEsV0FFQSxNQURBLE1BQUEsV0FBQSxFQUNBLE1Ba1pBLElBQUEsSUFBQSxFQUFBLFVBOERBLEdBQUEsU0FBQSxVQUFBLEtBQ0EsR0FBQSxTQUFBLFVBQUEsTUFDQSxHQUFBLFNBQUEsVUFBQSxLQWlCQSxHQUFBLElBQ0EsSUFDQSxPQUFBLFdBQUEsTUFBQSxPQUNBLE9BQUEsV0FBQSxPQUFBLEdBQ0EsUUFBQSxXQUFBLE9BQUEsR0FDQSxVQUFBLGNBQ0EsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLGNBQUEsRUFDQSxHQUFBLEdBQUEsR0FJQSxJQUFBLElBQUEsRUFBQSxNQUVBLElBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLE1BREEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUVBLEVBRUEsRUFBQSxHQUFBLEVBQUEsR0FDQSxJQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBRUEsSUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxJQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxJQUNBLElBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxNQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxJQUNBLE1BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxJQUNBLElBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxJQUNBLElBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxTQUFBLEVBQUEsRUFBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLElBR0EsS0FBQSxFQUNBLEtBQUEsSUFHQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsS0FTQSxHQUFBLFNBQUEsR0FDQSxLQUFBLFFBQUEsRUFHQSxJQUFBLFdBQ0EsWUFBQSxHQUVBLElBQUEsU0FBQSxHQU1BLElBTEEsS0FBQSxLQUFBLEVBQ0EsS0FBQSxNQUFBLEVBQ0EsS0FBQSxHQUFBLEVBQ0EsS0FBQSxVQUVBLEtBQUEsTUFBQSxLQUFBLEtBQUEsUUFFQSxHQURBLEtBQUEsR0FBQSxLQUFBLEtBQUEsT0FBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLE9BQ0EsS0FBQSxXQUFBLEtBQUEsUUFDQSxJQUFBLEtBQUEsU0FBQSxLQUFBLEtBQUEsS0FBQSxHQUFBLE1BQUEsS0FBQSxTQUFBLEtBQUEsUUFDQSxLQUFBLGlCQUNBLElBQUEsS0FBQSxRQUFBLEtBQUEsSUFDQSxLQUFBLGdCQUNBLElBQUEsS0FBQSxHQUFBLGVBQ0EsS0FBQSxPQUFBLE1BQ0EsTUFBQSxLQUFBLE1BQ0EsS0FBQSxLQUFBLEtBRUEsS0FBQSxZQUNBLElBQUEsS0FBQSxhQUFBLEtBQUEsSUFDQSxLQUFBLFlBQ0EsQ0FDQSxHQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUEsT0FDQSxFQUFBLEVBQUEsS0FBQSxLQUFBLEdBQ0EsRUFBQSxHQUFBLEtBQUEsSUFDQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsRUFDQSxJQUNBLEtBQUEsT0FBQSxNQUFBLE1BQUEsS0FBQSxNQUFBLEtBQUEsRUFBQSxHQUFBLElBQ0EsS0FBQSxPQUFBLEdBQ0EsR0FDQSxLQUFBLE9BQUEsTUFBQSxNQUFBLEtBQUEsTUFBQSxLQUFBLEVBQUEsR0FBQSxJQUNBLEtBQUEsT0FBQSxHQUNBLEdBQ0EsS0FBQSxPQUFBLE1BQ0EsTUFBQSxLQUFBLE1BQ0EsS0FBQSxLQUFBLEdBQ0EsR0FBQSxJQUVBLEtBQUEsT0FBQSxHQUVBLEtBQUEsV0FBQSw2QkFBQSxLQUFBLE1BQUEsS0FBQSxNQUFBLEdBSUEsTUFBQSxNQUFBLFFBR0EsR0FBQSxTQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsUUFBQSxLQUFBLEtBR0EsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsQ0FDQSxPQUFBLE1BQUEsTUFBQSxFQUFBLEtBQUEsS0FBQSxPQUFBLEtBQUEsS0FBQSxPQUFBLEtBQUEsTUFBQSxJQUFBLEdBR0EsU0FBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsS0FBQSxHQUdBLGFBQUEsU0FBQSxHQUVBLE1BQUEsTUFBQSxHQUFBLE9BQUEsR0FBQSxNQUFBLEdBQ0EsT0FBQSxHQUFBLE1BQUEsR0FBQSxNQUFBLEdBR0EsUUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsS0FBQSxHQUNBLEdBQUEsS0FBQSxLQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQUEsR0FHQSxjQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBR0EsV0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxLQUFBLEtBQ0EsSUFBQSxHQUFBLEVBQUEsR0FDQSxLQUFBLEVBQUEsSUFBQSxLQUFBLE1BQUEsS0FBQSxLQUFBLEtBQUEsVUFBQSxFQUFBLEdBQUEsSUFDQSxJQUFBLENBQ0EsTUFBQSxJQUFBLFNBQUEscURBQ0EsRUFBQSxFQUFBLEtBQUEsT0FHQSxXQUFBLFdBR0EsSUFGQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEtBQUEsTUFDQSxLQUFBLE1BQUEsS0FBQSxLQUFBLFFBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxLQUFBLEtBQUEsT0FBQSxLQUFBLE9BQ0EsSUFBQSxLQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxNQUNBLENBQ0EsR0FBQSxHQUFBLEtBQUEsTUFDQSxJQUFBLEtBQUEsR0FBQSxLQUFBLGNBQUEsR0FDQSxHQUFBLE1BQ0EsSUFBQSxLQUFBLGNBQUEsSUFDQSxHQUFBLEtBQUEsU0FBQSxJQUNBLEtBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxHQUNBLEdBQUEsTUFDQSxDQUFBLElBQUEsS0FBQSxjQUFBLElBQ0EsR0FBQSxLQUFBLFNBQUEsSUFDQSxLQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsR0FHQSxLQUZBLE1BQUEsV0FBQSxxQkFLQSxLQUFBLFFBRUEsRUFBQSxFQUFBLEVBQ0EsS0FBQSxPQUFBLE1BQ0EsTUFBQSxFQUNBLEtBQUEsRUFDQSxVQUFBLEVBQ0EsR0FBQSxXQUFBLE1BQUEsT0FJQSxVQUFBLFdBUUEsSUFQQSxHQUtBLEdBQUEsRUFBQSxFQUFBLEVBTEEsRUFBQSxLQUFBLEtBRUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxNQUlBLEtBQUEsTUFBQSxLQUFBLEtBQUEsU0FDQSxFQUFBLEtBQUEsS0FBQSxPQUFBLEtBQUEsT0FDQSxNQUFBLEdBQUEsS0FBQSxRQUFBLElBQUEsS0FBQSxTQUFBLEtBQ0EsTUFBQSxJQUFBLEVBQUEsS0FBQSxPQUNBLEdBQUEsRUFJQSxLQUFBLE9BY0EsSUFWQSxHQUFBLE1BQUEsRUFBQSxFQUFBLE9BQUEsS0FDQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxZQUFBLEtBQ0EsS0FBQSxJQUNBLEVBQUEsSUFLQSxFQUVBLElBREEsRUFBQSxLQUFBLE1BQ0EsRUFBQSxLQUFBLEtBQUEsUUFBQSxDQUVBLEdBREEsRUFBQSxLQUFBLEtBQUEsT0FBQSxHQUNBLE1BQUEsRUFBQSxDQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxHQUNBLEtBQUEsTUFBQSxDQUNBLE9BRUEsSUFBQSxLQUFBLGFBQUEsR0FHQSxLQUZBO0lBT0EsS0FBQSxPQUFBLE1BQ0EsTUFBQSxFQUNBLEtBQUEsRUFDQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEVBQUEsS0FBQSxRQUFBLEtBR0EsSUFDQSxLQUFBLE9BQUEsTUFDQSxNQUFBLEVBQ0EsS0FBQSxNQUVBLEtBQUEsT0FBQSxNQUNBLE1BQUEsRUFBQSxFQUNBLEtBQUEsTUFLQSxXQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxLQUNBLE1BQUEsT0FJQSxLQUhBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFDQSxHQUFBLEVBQ0EsS0FBQSxNQUFBLEtBQUEsS0FBQSxRQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsS0FBQSxPQUFBLEtBQUEsTUFFQSxJQURBLEdBQUEsRUFDQSxFQUFBLENBQ0EsR0FBQSxNQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxLQUFBLFVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEVBQ0EsR0FBQSxNQUFBLGdCQUNBLEtBQUEsV0FBQSw4QkFBQSxFQUFBLEtBQ0EsS0FBQSxPQUFBLEVBQ0EsR0FBQSxPQUFBLGFBQUEsU0FBQSxFQUFBLFNBQ0EsQ0FDQSxHQUFBLEdBQUEsR0FBQSxFQUNBLElBQUEsR0FBQSxFQUVBLEdBQUEsTUFDQSxJQUFBLE9BQUEsRUFDQSxHQUFBLE1BQ0EsQ0FBQSxHQUFBLElBQUEsRUFTQSxNQVJBLE1BQUEsWUFDQSxNQUFBLE9BQUEsTUFDQSxNQUFBLEVBQ0EsS0FBQSxFQUNBLE9BQUEsRUFDQSxVQUFBLEVBQ0EsR0FBQSxXQUFBLE1BQUEsS0FJQSxJQUFBLEVBRUEsS0FBQSxRQUVBLEtBQUEsV0FBQSxxQkFBQSxJQVlBLElBQUEsSUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEtBQUEsTUFBQSxFQUNBLEtBQUEsUUFBQSxFQUNBLEtBQUEsUUFBQSxFQUdBLElBQUEsS0FBQSxFQUFBLFdBQ0EsTUFBQSxLQUVBLGNBQUEsRUFDQSxVQUFBLElBR0EsR0FBQSxXQUNBLFlBQUEsR0FFQSxNQUFBLFNBQUEsR0FDQSxLQUFBLEtBQUEsRUFDQSxLQUFBLE9BQUEsS0FBQSxNQUFBLElBQUEsRUFFQSxJQUFBLEdBQUEsS0FBQSxZQVNBLE9BUEEsS0FBQSxLQUFBLE9BQUEsUUFDQSxLQUFBLFdBQUEseUJBQUEsS0FBQSxPQUFBLElBR0EsRUFBQSxVQUFBLEVBQUEsUUFDQSxFQUFBLFdBQUEsRUFBQSxTQUVBLEdBR0EsUUFBQSxXQUNBLEdBQUEsRUFDQSxJQUFBLEtBQUEsT0FBQSxLQUNBLEVBQUEsS0FBQSxjQUNBLEtBQUEsUUFBQSxTQUNBLElBQUEsS0FBQSxPQUFBLEtBQ0EsRUFBQSxLQUFBLHVCQUNBLElBQUEsS0FBQSxPQUFBLEtBQ0EsRUFBQSxLQUFBLGFBQ0EsQ0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsRUFBQSxHQUNBLEdBQ0EsS0FBQSxXQUFBLDJCQUFBLEdBRUEsRUFBQSxXQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEsU0FBQSxHQUtBLElBREEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLE9BQUEsSUFBQSxJQUFBLE1BQ0EsTUFBQSxFQUFBLE1BQ0EsRUFBQSxLQUFBLGFBQUEsRUFBQSxHQUNBLEVBQUEsTUFDQSxNQUFBLEVBQUEsTUFDQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLFlBQUEsSUFDQSxNQUFBLEVBQUEsTUFDQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLFlBQUEsSUFFQSxLQUFBLFdBQUEsYUFHQSxPQUFBLElBR0EsV0FBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsU0FDQSx5RkFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEtBQUEsS0FBQSxLQUFBLFVBQUEsRUFBQSxTQUdBLFVBQUEsV0FDQSxHQUFBLElBQUEsS0FBQSxPQUFBLE9BQ0EsS0FBQSxJQUFBLE9BQUEsb0NBQUEsS0FBQSxLQUNBLE9BQUEsTUFBQSxPQUFBLElBR0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxLQUFBLE9BQUEsT0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsT0FBQSxHQUNBLEVBQUEsRUFBQSxJQUNBLElBQUEsSUFBQSxHQUFBLElBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxJQUNBLElBQUEsSUFBQSxJQUFBLEVBQ0EsTUFBQSxHQUdBLE9BQUEsR0FHQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsT0FBQSxJQUNBLEtBQUEsT0FBQSxRQUNBLElBRUEsR0FHQSxRQUFBLFNBQUEsR0FDQSxLQUFBLE9BQUEsSUFDQSxLQUFBLFdBQUEsNkJBQUEsRUFBQSxJQUFBLEtBQUEsU0FJQSxRQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxFQUFBLEtBRUEsU0FBQSxFQUFBLFNBQ0EsUUFBQSxNQUlBLFNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsS0FFQSxTQUFBLEVBQUEsVUFBQSxFQUFBLFNBQ0EsUUFBQSxJQUFBLEVBQUEsTUFJQSxXQUFBLFdBRUEsSUFEQSxHQUFBLFFBSUEsR0FGQSxLQUFBLE9BQUEsT0FBQSxJQUFBLEtBQUEsS0FBQSxJQUFBLElBQUEsSUFBQSxNQUNBLEVBQUEsS0FBQSxLQUFBLGdCQUNBLEtBQUEsT0FBQSxLQUdBLE1BQUEsS0FBQSxFQUFBLE9BQ0EsRUFBQSxHQUNBLFNBQUEsRUFBQSxHQUVBLElBQUEsR0FEQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBRUEsT0FBQSxLQU1BLFlBQUEsV0FHQSxJQUZBLEdBQ0EsR0FEQSxFQUFBLEtBQUEsYUFFQSxFQUFBLEtBQUEsT0FBQSxNQUNBLEVBQUEsS0FBQSxPQUFBLEVBRUEsT0FBQSxJQUdBLE9BQUEsU0FBQSxHQUNBLEdBRUEsR0FDQSxFQUhBLEVBQUEsS0FBQSxTQUNBLEVBQUEsS0FBQSxRQUFBLEVBQUEsS0FJQSxJQUFBLEtBQUEsS0FBQSxLQUdBLElBRkEsS0FDQSxLQUNBLEtBQUEsT0FBQSxNQUNBLEVBQUEsS0FBQSxLQUFBLGFBSUEsSUFBQSxJQUFBLEdBQUEsT0FBQSxNQUVBLE9BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLENBQ0EsRUFBQSxHQUFBLENBR0EsS0FEQSxHQUFBLEdBQUEsRUFBQSxPQUNBLEtBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFHQSxPQUFBLEdBQUEsTUFBQSxFQUFBLEdBR0EsTUFBQSxHQUFBLEtBRUEsVUFBQSxFQUFBLFdBQUEsRUFBQSxNQUFBLElBQ0EsUUFBQSxFQUFBLFdBQUEsS0FJQSxXQUFBLFdBQ0EsTUFBQSxNQUFBLGNBR0EsV0FBQSxXQUNBLEdBQ0EsR0FDQSxFQUZBLEVBQUEsS0FBQSxTQUdBLFFBQUEsRUFBQSxLQUFBLE9BQUEsT0FDQSxFQUFBLFFBQ0EsS0FBQSxXQUFBLDJCQUNBLEtBQUEsS0FBQSxVQUFBLEVBQUEsRUFBQSxPQUFBLDJCQUFBLEdBRUEsRUFBQSxLQUFBLFVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEtBRUEsUUFBQSxFQUFBLE1BR0EsR0FHQSxRQUFBLFdBQ0EsR0FDQSxHQUNBLEVBRkEsRUFBQSxLQUFBLFdBR0EsSUFBQSxFQUFBLEtBQUEsT0FBQSxLQUFBLENBRUEsR0FEQSxFQUFBLEtBQUEsYUFDQSxFQUFBLEtBQUEsT0FBQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsWUFFQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsS0FFQSxTQUFBLEVBQUEsVUFBQSxFQUFBLFVBQUEsRUFBQSxXQUlBLEtBQUEsV0FBQSxhQUFBLEdBSUEsTUFBQSxJQUdBLFVBQUEsV0FHQSxJQUZBLEdBQ0EsR0FEQSxFQUFBLEtBQUEsYUFFQSxFQUFBLEtBQUEsT0FBQSxPQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsY0FBQSxFQUVBLE9BQUEsSUFHQSxXQUFBLFdBQ0EsR0FDQSxHQURBLEVBQUEsS0FBQSxVQUtBLFFBSEEsRUFBQSxLQUFBLE9BQUEsU0FDQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLGNBQUEsSUFFQSxHQUdBLFNBQUEsV0FDQSxHQUNBLEdBREEsRUFBQSxLQUFBLFlBS0EsUUFIQSxFQUFBLEtBQUEsT0FBQSxLQUFBLEtBQUEsTUFBQSxVQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsYUFFQSxHQUdBLFdBQUEsV0FDQSxHQUNBLEdBREEsRUFBQSxLQUFBLFVBS0EsUUFIQSxFQUFBLEtBQUEsT0FBQSxJQUFBLElBQUEsS0FBQSxTQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsZUFFQSxHQUdBLFNBQUEsV0FHQSxJQUZBLEdBQ0EsR0FEQSxFQUFBLEtBQUEsaUJBRUEsRUFBQSxLQUFBLE9BQUEsSUFBQSxNQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsaUJBRUEsT0FBQSxJQUdBLGVBQUEsV0FHQSxJQUZBLEdBQ0EsR0FEQSxFQUFBLEtBQUEsUUFFQSxFQUFBLEtBQUEsT0FBQSxJQUFBLElBQUEsTUFDQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLFFBRUEsT0FBQSxJQUdBLE1BQUEsV0FDQSxHQUFBLEVBQ0EsT0FBQSxNQUFBLE9BQUEsS0FDQSxLQUFBLFdBQ0EsRUFBQSxLQUFBLE9BQUEsTUFDQSxLQUFBLFNBQUEsR0FBQSxLQUFBLEVBQUEsR0FBQSxLQUFBLFVBQ0EsRUFBQSxLQUFBLE9BQUEsTUFDQSxLQUFBLFFBQUEsRUFBQSxHQUFBLEtBQUEsU0FFQSxLQUFBLFdBSUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsS0FDQSxFQUFBLEtBQUEsU0FBQSxLQUNBLEVBQUEsR0FBQSxFQUFBLEtBQUEsUUFBQSxFQUVBLE9BQUEsR0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxNQUVBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBRUEsT0FEQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE1BQ0EsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUtBLFlBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLEtBRUEsRUFBQSxLQUFBLFlBR0EsT0FGQSxNQUFBLFFBQUEsS0FFQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBRUEsR0FGQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBSUEsT0FEQSxJQUFBLEVBQUEsR0FDQSxFQUNBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FEQSxJQUlBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUVBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUVBLE9BREEsSUFBQSxFQUFBLE9BQUEsRUFBQSxNQUNBLEVBQUEsR0FBQSxNQUtBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxLQUNBLElBQUEsTUFBQSxLQUFBLFlBQUEsS0FDQSxFQUNBLEdBQUEsS0FBQSxLQUFBLG9CQUNBLEtBQUEsT0FBQSxLQUVBLE1BQUEsUUFBQSxJQUVBLElBQUEsR0FBQSxLQUFBLEtBRUEsRUFBQSxFQUFBLFVBQUEsSUFFQSxPQUFBLFVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLENBRUEsSUFBQSxFQUVBLElBREEsR0FBQSxHQUFBLEVBQUEsT0FDQSxLQUNBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFJQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsRUFHQSxJQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUVBLE9BQUEsSUFBQSxFQUFBLEtBS0EsaUJBQUEsV0FDQSxHQUFBLEtBQ0EsSUFBQSxNQUFBLEtBQUEsWUFBQSxLQUNBLEVBQUEsQ0FDQSxHQUFBLEtBQUEsS0FBQSxLQUVBLEtBRUEsSUFBQSxHQUFBLEtBQUEsWUFDQSxHQUFBLEtBQUEsU0FDQSxLQUFBLE9BQUEsS0FJQSxPQUZBLE1BQUEsUUFBQSxLQUVBLEVBQUEsU0FBQSxFQUFBLEdBRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxHQUVBLE9BQUEsS0FFQSxTQUFBLEVBQ0EsU0FBQSxFQUFBLE1BQUEsSUFDQSxPQUFBLEtBSUEsT0FBQSxXQUNBLEdBQUEsTUFBQSxJQUNBLElBQUEsTUFBQSxLQUFBLFlBQUEsS0FDQSxFQUFBLENBQ0EsR0FBQSxLQUFBLEtBQUEsS0FFQSxLQUVBLElBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLE1BQ0EsS0FBQSxRQUFBLElBQ0EsSUFBQSxHQUFBLEtBQUEsWUFDQSxHQUFBLEtBQUEsU0FDQSxLQUFBLE9BQUEsS0FJQSxPQUZBLE1BQUEsUUFBQSxLQUVBLEVBQUEsU0FBQSxFQUFBLEdBRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEVBRUEsT0FBQSxLQUVBLFNBQUEsRUFDQSxTQUFBLEVBQUEsTUFBQSxJQUNBLE9BQUEsS0E2QkEsSUFBQSxJQUFBLEtBb3pFQSxHQUFBLEVBQUEsUUFFQSxJQUNBLEtBQUEsT0FDQSxJQUFBLE1BQ0EsSUFBQSxNQUdBLGFBQUEsY0FDQSxHQUFBLE1Bb25DQSxHQUFBLEVBQUEsWUFpUUEsR0FBQSxFQUFBLGNBQUEsS0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLE1BQUEsRUF3T0EsSUFBQSxTQUFBLFlBcVVBLEdBQUEsU0FBQSxXQWlFQSxHQUFBLFNBQUEsVUFhQSxJQUFBLElBQUEsSUE2SkEsSUFDQSxLQUFBLEdBQUEsV0FBQSxHQUNBLEdBQUEsR0FBQSxXQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxXQUFBLEdBQ0EsS0FBQSxHQUFBLFNBQ0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLFFBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxPQUFBLEdBQ0EsRUFBQSxHQUFBLE9BQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxHQUNBLEVBQUEsR0FBQSxRQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxRQUFBLEVBQUEsS0FDQSxHQUFBLEdBQUEsVUFBQSxHQUNBLEVBQUEsR0FBQSxVQUFBLEdBQ0EsR0FBQSxHQUFBLFVBQUEsR0FDQSxFQUFBLEdBQUEsVUFBQSxHQUdBLElBQUEsR0FBQSxlQUFBLEdBQ0EsS0FBQSxHQUFBLE9BQ0EsSUFBQSxHQUFBLE9BQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxJQUdBLEdBQUEsbUZBQ0EsR0FBQSxVQTJGQSxJQUFBLFNBQUEsVUF1SEEsSUFBQSxJQUFBLEVBQUEsSUFXQSxHQUFBLEVBQUEsR0FvUEEsSUFBQSxTQUFBLFNBcUZBLElBQUEsSUFBQSxHQUNBLFNBQUEsSUFDQSxRQUFBLFNBQUEsRUFBQSxHQWlCQSxNQWZBLElBQUEsS0FJQSxFQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsS0FBQSxPQUFBLElBT0EsRUFBQSxPQUFBLEVBQUEsY0FBQSxZQUdBLEVBQUEsTUFBQSxFQUFBLFdBQUEsRUFBQSxLQUFBLE9BQ0EsU0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLCtCQUFBLEdBQUEsS0FBQSxFQUFBLEtBQUEsU0FDQSxhQUFBLE1BQ0EsR0FBQSxHQUFBLFFBQUEsU0FBQSxHQUVBLEVBQUEsS0FBQSxJQUNBLEVBQUEsdUJBNFZBLEtBSUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEdBQUEsWUFBQSxFQUFBLENBRUEsR0FBQSxHQUFBLEdBQUEsTUFBQSxFQUNBLElBQUEsR0FBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsSUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLElBQUEsV0FRQSxFQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUdBLEdBQUEsY0FBQSxHQUFBLEtBQUEsRUFBQSxVQUFBLE9BQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFVBQUEsTUFBQSxHQUNBLElBQUEsRUFFQSxXQURBLEdBQUEsS0FBQSxZQUFBLEdBQUEsUUFBQSxFQUFBLEdBQUEsRUFBQSxLQUtBLEVBQUEsT0FBQSxFQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLFVBUUEsR0FBQSxNQUFBLFNBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsTUFBQSxFQUNBLElBQUEsR0FBQSxXQUNBLE9BQ0EsU0FBQSxHQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLENBRUEsVUFBQSxHQUNBLCtCQUFBLEdBQUEsS0FBQSxFQUFBLEtBQUEsV0FDQSxFQUFBLFlBQ0EsRUFBQSxNQUFBLEdBQUEsYUFDQSxFQUFBLE1BR0EsRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLE1BQUEsSUFPQSxFQUFBLEtBQUEsRUFBQSxRQU1BLElBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFdBWkEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLGFBb0JBLElBQUEsS0FDQSxZQUFBLEVBQ0EsZUFBQSxFQUNBLGFBQUEsRUFDQSxhQUFBLEVBQ0EsVUFBQSxFQUNBLGFBQUEsRUFDQSxjQUFBLEVBQ0EsdUJBQUEsR0FFQSxHQUFBLGNBdUNBLElBQUEsU0FBQSxXQUFBLFNBQUEsU0FBQSxXQXNXQSxJQUFBLElBQUEsU0FBQSxHQUNBLE9BQUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxJQUNBLEtBQUEsT0FDQSxTQUFBLEVBQUEsTUFBQSxJQUNBLFdBQUEsR0FDQSxRQUFBLFdBQ0EsT0FDQSxJQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsT0FBQSxDQU9BLEdBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLFdBQ0EsRUFBQSxtQkFDQSxFQUFBLGtCQUdBLEVBQUEsZUFDQSxFQUFBLGlCQUNBLEVBQUEsYUFBQSxFQUdBLElBQUEsRUFBQSxHQUFBLFNBQUEsR0FJQSxFQUFBLEdBQUEsV0FBQSxXQUNBLEVBQUEsV0FDQSxHQUFBLEVBQUEsR0FBQSxTQUFBLElBQ0EsR0FBQSxLQUlBLEdBQUEsR0FBQSxFQUFBLFNBQUEsV0FBQSxRQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsTUFFQSxJQUNBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUNBLEVBQUEsR0FBQSxXQUFBLFdBQ0EsRUFBQSxlQUFBLEdBQ0EsR0FDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxFQUFBLFNBUUEsT0FBQSxNQUlBLEdBQUEsS0FDQSxHQUFBLElBQUEsR0FXQSxHQUFBLDJFQUNBLEdBQUEsc0ZBQ0EsR0FBQSxvR0FDQSxHQUFBLHFDQUNBLEdBQUEsNEJBQ0EsR0FBQSxvREFDQSxHQUFBLG9CQUNBLEdBQUEsbUJBQ0EsR0FBQSw4QkFDQSxHQUFBLHdCQUVBLEdBQUEsR0FBQSxHQUFBLFdBRUEsSUFrRkEsS0FBQSxHQXdGQSxLQUFBLEdBQUEsT0FBQSxHQUNBLEdBQUEsSUFBQSxPQUFBLEtBQUEsT0FDQSxjQXNGQSxpQkFBQSxHQUFBLGdCQUFBLEdBQ0EsR0FBQSxJQUFBLE9BQUEsS0FBQSxLQUFBLEtBQUEsS0FBQSxPQUNBLHVCQXVGQSxLQUFBLEdBQUEsT0FBQSxHQUNBLEdBQUEsSUFBQSxLQUFBLEtBQUEsT0FDQSxZQXNGQSxLQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsWUF1RkEsTUFBQSxHQUFBLFFBQUEsR0FDQSxHQUFBLElBQUEsT0FBQSxPQUNBLFdBNkVBLE9BQUEsR0E2RUEsSUFBQSxHQTRFQSxNQUFBLEdBb0RBLE1BQUEsR0FvREEsU0FBQSxHQUVBLE9BQUEsRUFDQSxPQUFBLEVBQ0EsT0FBQSxFQUNBLE1BQUEsRUFDQSxLQUFBLEdBaWpCQSxJQUFBLFdBQUEsV0FBQSxVQUFBLFNBQ0EsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsWUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsUUFBQSxHQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLE9BTUEsR0FBQSxXQUNBLEdBQUEsYUFDQSxHQUFBLGNBQ0EsR0FBQSxXQUNBLEdBQUEsZUFDQSxHQUFBLGFBQ0EsR0FBQSxhQThMQSxJQUFBLFNBQUEsb0JBQUEsU0FBQSxXQUFBLFNBQUEsV0FBQSxXQUFBLGFBQUEsS0FDQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEtBQUEsV0FBQSxPQUFBLElBQ0EsS0FBQSxZQUFBLE9BQUEsSUFDQSxLQUFBLGVBQ0EsS0FBQSxvQkFDQSxLQUFBLFlBQ0EsS0FBQSxlQUNBLEtBQUEsd0JBQ0EsS0FBQSxZQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxXQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxVQUNBLEtBQUEsYUFDQSxLQUFBLFNBQUEsRUFDQSxLQUFBLE1BQUEsRUFBQSxJQUdBLElBQUEsR0FBQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEtBQ0EsRUFBQSxLQUVBLEVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxFQUlBLE9BSEEsR0FBQSxVQUFBLEVBQUEsU0FBQSxjQUFBLEVBQUEsS0FDQSxFQUFBLEtBRUEsR0FHQSxFQUFBLFdBQ0EsR0FBQSxFQUNBLEdBQUEsVUFBQSxFQUFBLFNBQUEsY0FDQSxFQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxhQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsYUFJQSxNQUFBLGFBQUEsU0FBQSxHQUdBLEdBRkEsRUFBQSxTQUFBLElBRUEsRUFBQSxRQUFBLEdBQUEsRUFBQSxjQUNBLEtBQUEsSUFBQSxZQUFBLG1EQUNBLEVBQUEsUUFBQSxFQUFBLEtBd0JBLEtBQUEsUUFBQSxFQW1CQSxLQUFBLFNBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUFBLEtBQUEsR0FBQSxPQUFBLEdBQUEsSUFBQSxFQUdBLElBQUEsR0FBQSxFQUFBLGNBQUEsb0JBQUEsR0FDQSxFQUFBLENBR0EsR0FDQSxTQUFBLElBQ0EsU0FBQSxJQXFCQSxJQUNBLEtBQUEsS0FDQSxTQUFBLEVBQ0EsSUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsR0FFQSxNQUFBLFNBQUEsRUFBQSxTQUNBLEdBQUEsSUFFQSxXQUFBLEVBQ0EsU0FBQSxJQWNBLEtBQUEsYUFBQSxXQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsV0FBQSxFQUNBLEVBQUEsWUFBQSxFQUFBLElBQ0EsRUFBQSxTQUFBLEVBQUEsS0FlQSxLQUFBLGNBQUEsV0FDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEtBZUEsS0FBQSxZQUFBLFdBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxLQThEQSxLQUFBLG1CQUFBLFdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEseUJBQ0EsRUFBQSxXQVVBLEtBQUEsVUFBQSxXQUVBLEVBQUEsRUFBQSxjQUFBLE1BQUEsRUFBQSxjQUdBLEtBQUEsc0JBR0EsS0FBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBZUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsY0FBQSxPQUNBLElBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxVQUdBLElBREEsRUFBQSxFQUFBLElBQ0EsRUFPQSxNQU5BLEdBQUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxRQUVBLEVBQUEsRUFBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsU0FFQSxDQUdBLFFBQUEsRUFHQSxRQUFBLEtBQ0EsR0FBQSxJQUFBLENBTUEsT0FMQSxHQUFBLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEtBRUEsR0FNQSxHQUxBLEVBQUEsRUFBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsU0FFQSxHQUtBLFFBQUEsS0FDQSxHQUFBLE1BQ0EsR0FBQSxDQUNBLEdBQUEsRUFBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQ0EsS0FBQSxJQUFBLG1CQUNBLDZFQUFBLEVBRUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsS0FBQSxXQUNBLEVBQUEsR0FBQSxJQUNBLFdBQ0EsR0FBQSxFQUNBLEVBQUEsR0FBQSxRQUdBLEVBQUEsT0FHQSxFQUFBLElBQUEsR0FBQSxLQUFBLFdBQ0EsRUFBQSxJQUNBLEdBSkEsR0FBQSxHQVFBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsSUFBQSxHQUNBLEVBQUEsYUFBQSxFQUFBLEdBSUEsUUFBQSxHQUFBLEdBQ0EsSUFBQSxHQUVBLEVBQUEsR0FwRkEsR0FDQSxJQUFBLEdBQUEsQ0FHQSxPQUFBLEdBQUEsSUFJQSxRQUlBLFNBUEEsSUFBQSxJQStGQSxLQUFBLGlCQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFFQSxHQUFBLE9BQUEsSUFLQSxFQUFBLDJCQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEseUJBR0EsRUFBQSx5QkFBQSxFQUdBLEVBQUEsWUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFdBQUEsRUFDQSxFQUFBLFlBQUEsRUFBQSxJQUNBLEVBQUEsU0FBQSxFQUFBLElBQ0EsRUFBQSxhQUVBLEtBQUEsdUJBR0EsS0FBQSxtQkFBQSxXQWdDQSxRQUFBLEtBQ0EsRUFBQSxjQUFBLEdBQ0EsRUFBQSxzQkE5QkEsSUFBQSxHQUhBLElBQUEsRUFDQSxFQUFBLEVBQUEseUJBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBRUEsR0FEQSxFQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLENBQ0EsR0FBQSxDQUNBLE9BR0EsRUFBQSxFQUFBLGNBQUEsTUFBQSxFQUFBLGVBRUEsRUFBQSxZQUFBLElBRUEsSUFBQSxHQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsVUFBQSxFQUFBLFNBQUEsWUFDQSxLQUNBLEVBQUEsWUFBQSxFQUNBLEtBRUEsRUFBQSxnQkFBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsSUFLQSxFQUFBLFlBQUEsRUFBQSxFQUFBLEVBQ0EsUUFXQSxLQUFBLG9CQUFBLFdBQ0EsRUFBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLHFCQUFBLFNBQUEsR0FDQSxJQUNBLElBQ0EsTUFBQSxHQUNBLEVBQUEsT0E2Q0EsS0FBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsV0FBQSxJQUNBLEVBQUEsVUFBQSxFQUFBLFNBQUEsa0JBQ0EsRUFBQSwwQkFBQSxJQUlBLEtBQUEsMEJBQUEsU0FBQSxHQUNBLEdBRUEsR0FGQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFFBR0EsSUFBQSxFQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxjQUNBLEVBQUEsRUFBQSxhQUlBLEVBQUEsT0FBQSxHQUNBLEVBQ0EsRUFBQSxFQUFBLFdBQ0EsRUFBQSxvQkFDQSxHQUNBLEVBQUEsUUFDQSxFQUFBLG1CQUVBLEVBQUEsT0FBQSxXQUNBLEVBQUEsc0JBYUEsRUFBQSxPQUFBLFdBQ0EsR0FBQSxHQUFBLEdBSUEsSUFBQSxJQUFBLEVBQUEsWUFBQSxDQUNBLEVBQUEsWUFBQSxDQU1BLEtBSkEsR0FBQSxHQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsT0FFQSxFQUFBLEVBQ0EsS0FDQSxFQUFBLEVBQUEsR0FBQSxFQUVBLEdBQUEsYUFBQSxJQUNBLEVBQUEsV0FBQSxFQUFBLHlCQUFBLEVBQ0EsRUFBQSxVQUVBLEVBQUEsZ0JBQUEsRUFBQSxFQUFBLEVBQUEsSUFJQSxNQUFBLE9Ba0tBLEdBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLFVBQUEsU0FBQSxvQkFDQSxXQUFBLEdBQ0EsTUFDQSxJQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxJQUFBLEVBRUEsR0FBQSxhQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsVUFHQSxFQUFBLFlBQUEsR0FFQSxFQUFBLElBQUEsV0FBQSxXQUNBLEVBQUEsZUFBQSxNQUdBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxVQUFBLEVBQUEsU0FBQSxVQUNBLEVBQUEsR0FBQSxFQUFBLFNBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSwwQkFBQSxHQUFBLEVBQUEsUUFJQSxFQUFBLEdBQUEsT0FBQSxXQUNBLEVBQUEsVUFFQSxFQUFBLE9BQUEsV0FDQSxFQUFBLHNCQTRFQSxHQUFBLEdBQ0EsU0FBQSxJQUNBLFFBQUEsVUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLHFCQUFBLEtBQUEsV0FDQSxFQUFBLE1BQUEsRUFBQSxlQU1BLEdBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLFVBQUEsRUFFQSxFQUFBLFlBQUEsU0FBQSxTQUFBLEdBQ0EsT0FBQSxFQUFBLFdBQUEsRUFBQSxTQUFBLElBR0EsRUFBQSxTQUFBLFdBQUEsV0FDQSxFQUFBLGtCQU9BLEdBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsT0FDQSxHQUFBLFNBQUEsVUFBQSxTQUFBLEdBS0EsR0FKQSxFQUFBLElBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxHQUFBLFFBQUEsSUFHQSxJQUFBLEVBQUEsS0FDQSxLQUFBLEdBQUEsYUFBQSxXQUNBLHdEQUFBLEVBQ0EsRUFBQSxFQUFBLEdBR0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxjQUdBLEVBQUEsWUFBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsUUFPQSxHQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsUUFBQSxXQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxDQUNBLEdBQUEsU0FBQSxZQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsY0FFQSxFQUFBLFlBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxJQUFBLEVBQUEsUUFBQSxPQU1BLEdBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLENBRUEsR0FBQSxHQUFBLENBQ0EsR0FBQSxTQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxJQUFBLEVBQ0EsRUFBQSxjQUVBLEVBQUEsWUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLElBQUEsRUFBQSxRQUFBLE9BeUZBLEdBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUdBLEdBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLFNBQUEsS0FDQSxFQUFBLFVBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFFQSxFQUFBLFNBQUEsR0FFQSxJQUFBLEVBQUEsR0FBQSxDQUVBLEdBQUEsS0FRQSxPQU5BLElBQ0EsRUFBQSxFQUFBLE1BQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEdBQUEsS0FJQSxHQUdBLEdBQUEsU0FBQSxLQUFBLEdBQ0EsRUFBQSxZQUFBLEtBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxHQUNBLEVBQUEsS0FBQSxHQUdBLElBSUEsRUFBQSxTQUFBLFNBQUEsR0FDQSxPQUFBLElBQUEsRUFBQSxXQU9BLEdBQUEscUJBcURBLEdBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLElBQ0EsUUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxFQUFBLFNBQ0EsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQSxXQUdBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsU0E4SkEsR0FBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFlBQUEsU0FBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxJQUNBLE1BQUEsU0FBQSxFQUFBLE1BQUEsRUFBQSxnQkFFQSxLQUFBLFNBQUEsV0FBQSxHQUNBLEtBQUEsU0FBQSxpQkFBQSxFQUVBLEtBQUEsU0FBQSxTQUFBLEdBQUEsS0FBQSxTQUFBLFNBQUEsUUFBQSxHQUFBLFdBRUEsTUFEQSxHQUFBLFNBQUEsaUJBQUEsRUFDQSxRQUdBLEtBQUEsU0FBQSxpQkFBQSxNQWdLQSxJQUFBLFdBQUEsU0FBQSxHQUNBLE9BQ0EsU0FBQSxLQUNBLFFBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxrQkFBQSxHQUNBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxpQkFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsRUFBQSxPQUFBLFNBQUEsR0FJQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsVUEyREEsSUFBQSxlQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsT0FDQSxRQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsa0JBQUEsR0FDQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsZ0JBQ0EsR0FBQSxpQkFBQSxFQUFBLEVBQUEsYUFDQSxFQUFBLFNBQUEsaUJBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxVQXFEQSxJQUFBLE9BQUEsU0FBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsT0FDQSxTQUFBLElBQ0EsUUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsT0FBQSxHQUFBLElBQUEsWUFJQSxPQUZBLEdBQUEsa0JBQUEsR0FFQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsaUJBQUEsRUFBQSxFQUFBLFlBRUEsRUFBQSxPQUFBLEVBQUEsV0FHQSxFQUFBLEtBQUEsRUFBQSxlQUFBLEVBQUEsS0FBQSxXQXlRQSxHQUFBLEdBQUEsSUFBQSxHQWdEQSxHQUFBLEdBQUEsTUFBQSxHQWdEQSxHQUFBLEdBQUEsT0FBQSxHQTBEQSxHQUFBLElBQ0EsUUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsWUFBQSxlQXFPQSxJQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLFdBQUEsSUFDQSxTQUFBLE9BaUdBLE1BS0EsSUFDQSxNQUFBLEVBQ0EsT0FBQSxFQUVBLEdBQ0EsOElBQUEsTUFBQSxLQUNBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxNQUFBLEVBQ0EsSUFBQSxJQUFBLFNBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxPQUFBLFVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsV0FDQSxFQUFBLEdBQUEsT0FBQSxJQUVBLElBQUEsSUFBQSxFQUFBLFFBQ0EsRUFBQSxXQUFBLEdBRUEsRUFBQSxPQUFBLFdBOGVBLElBQUEsS0FBQSxXQUFBLFNBQUEsR0FDQSxPQUNBLGNBQUEsRUFDQSxXQUFBLFVBQ0EsU0FBQSxJQUNBLFVBQUEsRUFDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLE9BQUEsRUFBQSxLQUFBLFNBQUEsR0FFQSxFQUNBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxjQUFBLGNBQUEsRUFBQSxLQUFBLEtBSUEsR0FDQSxNQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxTQUFBLE1BSUEsSUFDQSxFQUFBLFNBQ0EsRUFBQSxNQUVBLElBQ0EsRUFBQSxXQUNBLEVBQUEsTUFFQSxJQUNBLEVBQUEsR0FBQSxFQUFBLE9BQ0EsRUFBQSxNQUFBLEdBQUEsS0FBQSxXQUNBLEVBQUEsT0FFQSxFQUFBLGFBMExBLElBQUEsbUJBQUEsZ0JBQUEsV0FBQSxPQUNBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxPQUNBLFNBQUEsTUFDQSxTQUFBLElBQ0EsVUFBQSxFQUNBLFdBQUEsVUFDQSxXQUFBLEdBQUEsS0FDQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFdBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxRQUFBLEdBQ0EsRUFBQSxFQUFBLFVBRUEsT0FBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUNBLEdBQ0EsRUFDQSxFQUhBLEVBQUEsRUFLQSxFQUFBLFdBQ0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxNQUVBLElBQ0EsRUFBQSxXQUNBLEVBQUEsTUFFQSxJQUNBLEVBQUEsTUFBQSxHQUFBLEtBQUEsV0FDQSxFQUFBLE9BRUEsRUFBQSxFQUNBLEVBQUEsTUFJQSxHQUFBLE9BQUEsRUFBQSxtQkFBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsWUFDQSxFQUFBLElBQUEsSUFBQSxFQUFBLE1BQUEsSUFDQSxLQUdBLElBQUEsQ0FFQSxJQUdBLEVBQUEsR0FBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxHQUFBLFNBQUEsQ0FRQSxJQUFBLEdBQUEsRUFBQSxFQUFBLFNBQUEsR0FDQSxJQUNBLEVBQUEsTUFBQSxFQUFBLEtBQUEsR0FBQSxLQUFBLElBR0EsR0FBQSxFQUNBLEVBQUEsRUFFQSxFQUFBLE1BQUEsd0JBQUEsR0FDQSxFQUFBLE1BQUEsS0FDQSxXQUNBLElBQUEsSUFDQSxJQUNBLEVBQUEsTUFBQSx1QkFBQSxNQUdBLEVBQUEsTUFBQSwyQkFBQSxLQUVBLElBQ0EsRUFBQSxTQUFBLGFBYUEsSUFBQSxXQUNBLFNBQUEsR0FDQSxPQUNBLFNBQUEsTUFDQSxTQUFBLEtBQ0EsUUFBQSxZQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxLQUFBLEVBQUEsR0FBQSxhQUlBLEVBQUEsWUFDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsWUFBQSxFQUNBLFNBQUEsR0FDQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEVBQUEsS0FJQSxFQUFBLEtBQUEsRUFBQSxjQUNBLEdBQUEsRUFBQSxZQUFBLFFBNkRBLEdBQUEsSUFDQSxTQUFBLElBQ0EsUUFBQSxXQUNBLE9BQ0EsSUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLGFBc0NBLEdBQUEsSUFBQSxVQUFBLEVBQUEsU0FBQSxNQThLQSxJQUFBLFVBQUEsZUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FDQSxRQUNBLFNBQUEsS0FDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsTUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLE9BQ0EsS0FDQSxFQUFBLEVBQUEsY0FDQSxFQUFBLEVBQUEsWUFDQSxFQUFBLG9CQUVBLEdBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsS0FDQSxFQUFBLEdBQUEsRUFBQSxRQUFBLE9BQUEsSUFBQSxRQUFBLFFBQUEsT0FDQSxFQUFBLEtBQUEsRUFBQSxNQUFBLE9BR0EsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsTUFHQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEdBQUEsV0FBQSxFQUFBLE1BQUEsR0FFQSxPQUFBLE9BQUEsR0FNQSxJQUhBLElBQUEsS0FBQSxFQUFBLEVBQUEsVUFBQSxFQUFBLElBQ0EsRUFBQSxHQUFBLEtBSUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxTQXNOQSxJQUFBLFNBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsZUFDQSxFQUFBLEVBQUEsWUFFQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEdBQUEsRUFDQSxJQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsT0FBQSxFQUNBLEVBQUEsT0FBQSxJQUFBLEVBQ0EsRUFBQSxNQUFBLElBQUEsRUFBQSxFQUNBLEVBQUEsVUFBQSxFQUFBLFFBQUEsRUFBQSxPQUVBLEVBQUEsT0FBQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEtBSUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQUEsSUFHQSxFQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxFQUFBLE1BQUEsT0FBQSxHQUlBLFFBQ0EsU0FBQSxJQUNBLGNBQUEsRUFDQSxXQUFBLFVBQ0EsU0FBQSxJQUNBLFVBQUEsRUFDQSxPQUFBLEVBQ0EsUUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxjQUFBLGtCQUFBLEVBQUEsS0FFQSxFQUFBLEVBQUEsTUFBQSw2RkFFQSxLQUFBLEVBQ0EsS0FBQSxHQUFBLE9BQUEseUZBQ0EsRUFHQSxJQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUlBLElBRkEsRUFBQSxFQUFBLE1BQUEsa0RBRUEsRUFDQSxLQUFBLEdBQUEsU0FBQSxnSEFDQSxFQUVBLElBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUVBLElBQUEsS0FBQSw2QkFBQSxLQUFBLElBQ0EsZ0ZBQUEsS0FBQSxJQUNBLEtBQUEsR0FBQSxXQUFBLHlGQUNBLEVBR0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsSUFBQSxHQWFBLE9BWEEsR0FDQSxFQUFBLEVBQUEsSUFFQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxJQUVBLEVBQUEsU0FBQSxHQUNBLE1BQUEsS0FJQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxJQUNBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FLQSxNQUhBLEtBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQ0EsRUFBQSxPQUFBLEVBQ0EsRUFBQSxFQUFBLElBWUEsSUFBQSxHQUFBLElBR0EsR0FBQSxpQkFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFHQSxFQUlBLEVBQ0EsRUFBQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQWJBLEVBQUEsRUFBQSxHQUtBLEVBQUEsSUFjQSxJQUpBLElBQ0EsRUFBQSxHQUFBLEdBR0EsRUFBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLEdBQUEsTUFDQSxDQUNBLEVBQUEsR0FBQSxFQUVBLElBQ0EsS0FBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLGVBQUEsSUFBQSxLQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxFQUdBLEdBQUEsT0FPQSxJQUpBLEVBQUEsRUFBQSxPQUNBLEVBQUEsR0FBQSxPQUFBLEdBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUlBLEdBSEEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FFQSxFQUFBLEVBQUEsU0FDQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLE1BQ0EsQ0FBQSxHQUFBLEVBQUEsR0FLQSxLQUhBLEdBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLElBQUEsS0FFQSxFQUFBLFFBQ0Esc0pBQ0EsRUFBQSxFQUFBLEVBQUEsR0FHQSxHQUFBLElBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEdBQ0EsRUFBQSxJQUFBLEVBS0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxDQUlBLEdBSEEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsT0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLEdBQUEsV0FHQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEdBQUEsSUFBQSxDQUdBLEdBQUEsTUFBQSxXQUlBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUtBLEdBSkEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLENBSUEsRUFBQSxDQUdBLEdBQ0EsR0FBQSxFQUFBLGtCQUNBLEdBQUEsRUFBQSxHQUVBLEdBQUEsSUFBQSxHQUVBLEVBQUEsS0FBQSxHQUFBLEVBQUEsT0FBQSxLQUFBLEdBQUEsSUFFQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FHQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxDQUVBLElBQUEsR0FBQSxFQUFBLFdBQUEsRUFDQSxHQUFBLEVBQUEsVUFBQSxFQUdBLEVBQUEsTUFBQSxFQUFBLEtBQUEsR0FBQSxJQUNBLEVBQUEsRUFJQSxFQUFBLE1BQUEsRUFDQSxFQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUlBLEdBQUEsU0FrS0EsSUFBQSxXQUFBLFNBQUEsR0FDQSxPQUNBLFNBQUEsSUFDQSxjQUFBLEVBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLE9BQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxjQUFBLFlBQUEsRUFBQSxpQkFxSkEsSUFBQSxXQUFBLFNBQUEsR0FDQSxPQUNBLFNBQUEsSUFDQSxjQUFBLEVBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLE9BQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxXQUFBLGVBQUEsRUFBQSxpQkFvREEsR0FBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsR0FDQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFFQSxHQUFBLEVBQUEsSUFBQSxLQUNBLEtBbUlBLElBQUEsV0FBQSxTQUFBLEdBQ0EsT0FDQSxTQUFBLEtBQ0EsUUFBQSxXQUdBLFlBQUEsU0FBQSxXQUNBLEtBQUEsV0FFQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsR0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUVBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxZQUFBLEVBQUEsT0FBQSxFQUFBLElBR0EsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUNBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsT0FBQSxFQUFBLEdBSUEsS0FGQSxFQUFBLE9BQUEsRUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsTUFDQSxHQUFBLEdBQUEsVUFDQSxJQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUNBLEdBQUEsS0FBQSxFQUFBLEVBQUEsSUFHQSxFQUFBLE9BQUEsRUFDQSxFQUFBLE9BQUEsR0FFQSxFQUFBLEVBQUEsTUFBQSxJQUFBLElBQUEsRUFBQSxNQUFBLE9BQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsT0FDQSxHQUFBLEVBQUEsVUFBQSxFQUFBLGNBQUEsc0JBQ0EsSUFBQSxJQUFBLE1BQUEsRUFFQSxHQUFBLEtBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxFQUFBLFNBQUEsYUFTQSxHQUFBLElBQ0EsV0FBQSxVQUNBLFNBQUEsS0FDQSxRQUFBLFlBQ0EsY0FBQSxFQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLElBQUEsRUFBQSxjQUFBLEVBQUEsTUFBQSxJQUFBLEVBQUEsa0JBQ0EsRUFBQSxNQUFBLElBQUEsRUFBQSxjQUFBLE1BQUEsV0FBQSxFQUFBLFFBQUEsT0FJQSxHQUFBLElBQ0EsV0FBQSxVQUNBLFNBQUEsS0FDQSxRQUFBLFlBQ0EsY0FBQSxFQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEtBQUEsRUFBQSxNQUFBLFNBQ0EsRUFBQSxNQUFBLEtBQUEsTUFBQSxXQUFBLEVBQUEsUUFBQSxPQTBEQSxHQUFBLElBQ0EsU0FBQSxNQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsSUFBQSxFQUNBLEtBQUEsR0FBQSxnQkFBQSxTQUNBLDhIQUdBLEVBQUEsR0FHQSxHQUFBLFNBQUEsR0FDQSxFQUFBLFFBQ0EsRUFBQSxPQUFBLFFBc0NBLElBQUEsaUJBQUEsU0FBQSxHQUNBLE9BQ0EsU0FBQSxJQUNBLFVBQUEsRUFDQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsb0JBQUEsRUFBQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FFQSxFQUFBLEVBQUEsR0FBQSxJQUVBLEdBQUEsSUFBQSxFQUFBLFFBTUEsR0FBQSxFQUFBLGFBdUlBLEdBQUEsR0FDQSxTQUFBLElBQ0EsVUFBQSxJQUlBLElBQUEsV0FBQSxTQUFBLFNBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSx5TUFDQSxHQUFBLGNBQUEsRUFHQSxRQUNBLFNBQUEsSUFDQSxTQUFBLFNBQUEsWUFDQSxZQUFBLFdBQUEsU0FBQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FHQSxHQUNBLEVBSkEsRUFBQSxLQUNBLEtBQ0EsRUFBQSxDQUtBLEdBQUEsVUFBQSxFQUFBLFFBR0EsRUFBQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEdBSUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxrQkFDQSxFQUFBLElBQUEsRUFFQSxFQUFBLFlBQUEsSUFDQSxFQUFBLElBQUEsR0FDQSxFQUFBLFVBQUEsRUFBQSxVQUtBLEVBQUEsR0FBQSxhQUFBLGNBQ0EsRUFBQSxHQUFBLFVBQUEsSUFLQSxFQUFBLGFBQUEsU0FBQSxHQUNBLEtBQUEsVUFBQSxXQUNBLEdBQUEsR0FDQSxFQUFBLFlBQUEsR0FDQSxLQUFBLG9CQUFBLEtBTUEsRUFBQSxvQkFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsR0FBQSxHQUFBLElBQ0EsR0FBQSxJQUFBLEdBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLFlBQUEsSUFJQSxFQUFBLFVBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxlQUFBLElBR0EsRUFBQSxJQUFBLFdBQUEsV0FFQSxFQUFBLG9CQUFBLE1BSUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBMkNBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLFVBRUEsR0FBQSxVQUFBLElBQ0EsRUFBQSxVQUFBLEVBQUEsU0FDQSxFQUFBLElBQUEsR0FDQSxLQUFBLEdBQUEsRUFBQSxLQUFBLFlBQUEsSUFFQSxFQUFBLElBQUEsRUFDQSxFQUFBLElBQUEsSUFFQSxFQUFBLG9CQUFBLElBS0EsRUFBQSxHQUFBLFNBQUEsV0FDQSxFQUFBLE9BQUEsV0FDQSxFQUFBLFVBQUEsRUFBQSxTQUNBLEVBQUEsY0FBQSxFQUFBLFdBS0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFDQSxHQUFBLFFBQUEsV0FDQSxHQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsV0FDQSxHQUFBLEVBQUEsS0FBQSxVQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxXQU1BLEVBQUEsT0FBQSxXQUNBLEVBQUEsRUFBQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLEVBQUEsWUFDQSxFQUFBLGFBSUEsRUFBQSxHQUFBLFNBQUEsV0FDQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEtBQ0EsR0FBQSxFQUFBLEtBQUEsVUFBQSxTQUFBLEdBQ0EsRUFBQSxVQUNBLEVBQUEsS0FBQSxFQUFBLFNBR0EsRUFBQSxjQUFBLE9BS0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQXdIQSxRQUFBLEtBQ0EsR0FBQSxJQUFBLENBQ0EsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsV0FDQSxJQUFBLEdBQUEsR0FBQSxHQUFBLENBQ0EsRUFBQSxHQUFBLE9BRUEsS0FBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxRQUdBLEdBQUEsR0FBQSxJQUFBLEdBR0EsTUFBQSxHQUlBLFFBQUEsS0FDQSxJQUNBLEVBQUEsYUFBQSxHQUNBLEdBQUEsR0FLQSxRQUFBLEtBQ0EsR0FBQSxDQUdBLElBRUEsR0FDQSxFQUNBLEVBQ0EsRUFBQSxFQUFBLEVBSUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUVBLEVBRUEsRUFDQSxFQUNBLEVBakJBLEdBQUEsT0FDQSxHQUFBLElBS0EsRUFBQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUlBLEtBRUEsRUFBQSxHQU9BLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLENBR0EsR0FEQSxFQUFBLEVBQ0EsRUFBQSxDQUVBLEdBREEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQUEsR0FBQSxRQUNBLEdBQUEsR0FBQSxFQVVBLEdBUEEsRUFBQSxHQUFBLEVBQUEsR0FFQSxFQUFBLEVBQUEsRUFBQSxJQUFBLElBQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxLQUFBLElBRUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLFNBRUEsQ0FDQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsT0FFQSxHQUFBLElBQUEsRUFBQSxFQUFBLEVBRUEsR0FBQSxHQUFBLEVBRUEsRUFBQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUVBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLE1BQUEsRUFDQSxTQUFBLElBY0EsSUFYQSxJQUNBLEdBQUEsT0FBQSxFQUVBLEVBQUEsSUFBQSxTQUFBLEdBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxJQUNBLEdBRUEsRUFBQSxJQUFBLFNBQUEsR0FBQSxJQUFBLE1BQUEsR0FBQSxVQUFBLEtBS0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUNBLEVBQUEsRUFDQSxJQUFBLENBMkJBLElBekJBLEVBQUEsRUFBQSxHQUdBLEVBQUEsRUFBQSxHQUVBLEVBQUEsUUFBQSxHQUVBLEdBQ0EsUUFBQSxFQUFBLFFBQUEsS0FBQSxRQUFBLEdBQ0EsTUFBQSxFQUFBLE9BRUEsR0FBQSxHQUNBLEVBQUEsS0FBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLFdBRUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBR0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxRQUFBLEtBQUEsUUFBQSxFQUFBLE1BQUEsSUFJQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLEtBRUEsRUFBQSxFQUFBLFFBQ0EsRUFBQSxRQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsT0FFQSxFQUFBLEtBQUEsRUFBQSxJQUNBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxJQUdBLEVBQUEsR0FBQSxXQUFBLEVBQUEsV0FDQSxFQUFBLEtBQUEsV0FBQSxFQUFBLFNBQUEsRUFBQSxVQUNBLElBSUEsRUFBQSxLQUFBLFdBQUEsRUFBQSxhQU9BLEtBQUEsRUFBQSxJQUFBLEVBRUEsRUFBQSxHQUtBLEVBQUEsRUFBQSxTQUNBLElBQUEsRUFBQSxJQUNBLEtBQUEsV0FBQSxFQUFBLFVBQ0EsS0FBQSxXQUFBLEVBQUEsVUFDQSxLQUFBLEVBQUEsT0FHQSxFQUFBLEtBQUEsR0FDQSxRQUFBLEVBQ0EsTUFBQSxFQUFBLE1BQ0EsR0FBQSxFQUFBLEdBQ0EsU0FBQSxFQUFBLFdBRUEsRUFDQSxFQUFBLE1BQUEsR0FFQSxFQUFBLFFBQUEsT0FBQSxHQUVBLEVBQUEsRUFLQSxLQURBLElBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxNQUFBLFFBQUEsU0FJQSxLQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsTUFBQSxHQUFBLFFBQUEsU0F6VEEsR0FBQSxFQUVBLE1BQUEsRUFBQSxFQUFBLE1BQUEsSUFDQSxLQUFBLElBQUEsT0FDQSwySEFHQSxFQUFBLEVBQUEsR0FHQSxJQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxJQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxLQUtBLEtBQUEsUUFBQSxFQUFBLE1BQUEsS0FFQSxLQUVBLEVBQUEsR0FBQSxHQUlBLEVBQUEsWUFBQSxZQUlBLEVBQUEsVUFJQSxFQUFBLFFBRUEsRUFBQSxHQUFBLFNBQUEsV0FDQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEdBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUZBLEVBQUEsRUFBQSxPQUNBLElBR0EsSUFBQSxHQUVBLElBREEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUNBLElBSUEsSUFGQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxFQUFBLEVBQUEsR0FBQSxTQUFBLEdBQUEsU0FBQSxDQUdBLEdBRkEsRUFBQSxFQUFBLE1BQ0EsSUFBQSxFQUFBLEdBQUEsR0FDQSxFQUNBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxTQUNBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLElBQUEsR0FGQSxTQUtBLEdBQUEsR0FBQSxFQUFBLEVBRUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxTQU1BLElBREEsRUFBQSxFQUFBLE1BQ0EsS0FBQSxFQUNBLEVBQUEsTUFDQSxJQUFBLEtBQUEsRUFDQSxFQUFBLFNBRUEsSUFBQSxHQUNBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBRUEsR0FEQSxFQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxJQUFBLEVBQUEsQ0FDQSxFQUFBLEVBQUEsRUFBQSxFQUNBLFlBSUEsR0FBQSxHQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBSUEsR0FBQSxjQUFBLEdBQ0EsUUFJQSxFQUFBLFFBQUEsRUFFQSxFQUFBLGlCQUFBLEVBQUEsR0FDQSxFQUFBLGlCQUFBLFdBQ0EsR0FBQSxNQUNBLEVBQUEsRUFBQSxFQUNBLElBQUEsRUFBQSxDQUVBLElBQUEsR0FEQSxHQUFBLEdBQUEsT0FBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUVBLE9BQUEsS0FFQSxHQUVBLEdBQ0EsRUFBQSxpQkFBQSxXQUFBLE1BQUEsR0FBQSxhQUFBLEdBck5BLEdBQUEsRUFBQSxHQUFBLENBZ0JBLElBQUEsR0FUQSxHQUxBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxVQUNBLEdBQUEsRUFFQSxHQUFBLEVBR0EsRUFBQSxHQUFBLEVBQUEsY0FBQSxXQUNBLEVBQUEsR0FBQSxFQUFBLGNBQUEsYUFDQSxFQUFBLEVBQUEsUUFHQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFdBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxLQUFBLEVBQUEsR0FBQSxNQUFBLENBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLE9BSUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxHQUdBLElBQ0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxPQUFBLEdBQUEsSUFBQSxFQUFBLFNBSUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFFBaVlBLElBQUEsZUFBQSxTQUFBLEdBQ0EsR0FBQSxJQUNBLFVBQUEsRUFDQSxhQUFBLEVBR0EsUUFDQSxTQUFBLElBQ0EsU0FBQSxJQUNBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsT0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsUUFBQSxFQUNBLElBQ0EsRUFBQSxLQUFBLFFBQUEsRUFBQSxRQUlBLE1BQUEsVUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsb0JBQ0EsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLEtBQUEsSUFDQSxFQUFBLFNBQUEsS0FBQSxFQUVBLElBQUEsRUFBQSxVQUdBLEVBQUEsS0FBQSxZQUFBLEdBRUEsRUFBQSxFQUdBLEVBQ0EsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsR0FDQSxJQUFBLEdBQ0EsRUFBQSxhQUFBLEdBRUEsRUFBQSxVQUFBLEVBQUEsS0FHQSxFQUFBLFVBQUEsRUFBQSxNQUFBLEdBR0EsRUFBQSxHQUFBLFdBQUEsV0FDQSxFQUFBLGFBQUEsRUFBQSxjQU9BLEdBQUEsR0FDQSxTQUFBLElBQ0EsVUFBQSxHQUdBLE9BQUEsR0FBQSxRQUFBLGNBRUEsU0FBQSxJQUFBLG1EQU1BLEtBRUEsR0FBQSxRQUVBLElBQUEsR0FBQSxNQUFBLFdBQ0EsRUFBQSxFQUFBLE9BR0EsT0FBQSxXQUVBLE9BQUEsUUFBQSxTQUFBLE9BQUEsUUFBQSxRQUFBLFVBQUEsS0FBQSxRQUFBLFFBQUEsMk1DeGp3QkEsU0FBQSxFQUFBLEVBQUEsR0FBQSxZQXFVQSxHQUFBLE9BQUEsYUFBQSxPQWdCQSxVQUFBLG9CQUFBLFdBQ0EsR0FBQSxHQUFBLHFCQUNBLE9BQUEsVUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxpQkFDQSxHQUFBLFNBQUEsSUFBQSxJQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsR0FBQSxHQUVBLEVBQUEsT0FBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxRQVVBLFFBQUEsbUJBQUEsUUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsSUFDQSxPQUFBLFVBQUEsR0FFQSxNQUFBLEdBQUEsV0FNQSxFQUFBLFlBQUEsQ0FDQSxXQUtBLFFBQUEsV0FBQSxtQkFBQSxTQUFBLEVBQUEsR0FZQSxRQUFBLEdBQUEsR0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLElBQUEsRUFBQSxVQUFBLEVBQ0EsTUFBQSxJQUtBLFFBQUEsR0FBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLFFBQUEsR0FHQSxRQUFBLEdBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxFQUFBLElBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsSUFBQSxFQUFBLEdBN0JBLEdBQUEsR0FBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLFFBRUEsRUFBQSxFQUNBLEVBQUEsbUJBQ0EsRUFBQSxzQkFDQSxFQUFBLGFBQ0EsR0FBQSxTQUFBLEVBdUJBLEdBQUEsVUFBQSxZQUNBLFlBQUEsTUFBQSxZQUFBLFdBQUEsZUFBQSxrQkFBQSxhQUFBLFlBQUEsbUJBQ0EsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FxQ0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLE1BTUEsT0FMQSxLQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsS0FBQSxFQUFBLElBRUEsRUFBQSxVQUFBLEVBQUEsU0FBQSxFQUFBLFdBR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxPQVNBLE9BUkEsR0FBQSxRQUFBLFdBQUEsV0FDQSxHQUFBLEtBRUEsRUFBQSxhQUFBLFdBQ0EsRUFBQSxFQUFBLFdBQ0EsRUFBQSxjQUdBLEVBQUEsUUFHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLElBQUEsS0FFQSxHQUFBLEVBQUEsSUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLFNBQ0EsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsUUFJQSxFQUFBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLFNBQ0EsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsT0FJQSxJQUFBLEtBQ0EsR0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxLQUlBLElBQUEsTUFBQSxJQTBCQSxPQXpCQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsV0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsTUFVQSxHQUFBLEdBRUEsR0FBQSxZQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsR0FFQSxFQUFBLElBRUEsR0FBQSxlQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsTUFLQSxFQUFBLE9BQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxLQUFBLEtBQUEsRUFBQSxLQUFBLE1BR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxFQUFBLENBQ0EsR0FBQSxNQUNBLEtBQ0EsRUFBQSxFQUFBLE9BQUEsR0FBQSxNQUFBLE1BVUEsRUFBQSxhQUFBLEVBQUEsYUFDQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsS0FHQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUNBLEtBQUEsRUFBQSxLQUNBLEVBQUEsS0FBQSxFQUFBLElBQUEsSUFDQSxFQUFBLElBQUEsR0FHQSxNQUFBLElBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQW1EQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFNBQUEsRUFBQSxPQUFBLEdBQUEsY0FBQSxFQUFBLE9BQUEsR0FDQSxPQUFBLElBQUEsR0FDQSxTQUFBLElBQ0EsRUFBQSxFQUVBLEVBQUEsTUFFQSxFQUFBLE1BQ0EsTUFBQSxFQUFBLEdBQUEsSUFFQSxFQUFBLE1BQ0EsTUFBQSxFQUFBLEdBQUEsS0FFQSxHQVpBO0NBZ0JBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FPQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEVBQUEsQ0FFQSxJQURBLEVBQUEsSUFBQSxPQUNBLEVBQUEsRUFBQSxPQUFBLE1BQ0EsR0FBQSxLQUVBLElBWkEsR0FBQSxLQUNBLEdBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxJQUdBLElBQUEsR0FBQSxDQWFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsV0FDQSxFQUFBLEdBRUEsUUFBQSxFQUFBLE9BQ0EsSUFBQSxXQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUNBLEtBQUEsV0FDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsTUFDQSxLQUFBLGNBQ0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUNBLE1BQ0EsU0FDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsT0FLQSxHQUFBLElBQUEsRUFBQSxRQUNBLElBM0dBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLENBSUEsR0FBQSxHQUNBLENBQ0EsR0FBQSxLQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBR0EsRUFJQSxFQUFBLEVBQUEsSUFBQSxHQUhBLEVBQUEsRUFDQSxFQUFBLGFBSkEsRUFBQSxFQUNBLEVBQUEsZUFTQSxJQUFBLEdBQUEsWUFBQSxFQUNBLEVBQUEsR0FDQSxZQUFBLEdBQ0EsZUFBQSxFQUVBLEVBQUEsRUFBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLElBQUEsQ0FDQSxJQUFBLEVBQUEsR0FBQSxDQUlBLEdBQUEsR0FBQSxFQUNBLEtBQ0EsS0FDQSxFQUFBLEVBQ0EsS0FDQSxLQUVBLEdBQUEsSUFBQSxHQUFBLFFBQUEsT0FBQSxJQXdFQSxPQXZFQSxHQUFBLEVBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxJQUNBLEdBQUEsSUFDQSxFQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsbUJBb0VBLEtBQUEsRUFDQSxNQUFBLEVBQ0EsVUFBQSxFQUNBLGFBQUEsRUFDQSxvQkFBQSxFQUNBLE9BQUEsU0FBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxXQUNBLEVBQUEsRUFDQSxPQUdBLE1BQUEsU0FBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxXQUNBLEVBQUEsRUFDQSxPQUdBLE9BQUEsV0FDQSxJQUNBLEVBQUEsRUFBQSxTQUFBLElBQ0EsR0FBQSxJQUFBLEtBRUEsR0FBQSxJQUVBLElBQ0EsRUFBQSxFQUFBLFNBQUEsSUFDQSxHQUFBLElBQUEsS0FFQSxHQUFBLFFBc1lBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQTRJQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsWUFBQSxDQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxPQUFBLEdBQ0EsRUFBQSxXQUNBLEVBQUEsZUFBQSxHQUNBLE1BQUEsRUFDQSxVQUFBLE1BTUEsUUFBQSxLQUNBLEVBQUEsVUFHQSxRQUFBLEtBQ0EsRUFBQSxTQUdBLFFBQUEsS0FDQSxFQUFBLFNBQ0EsSUFLQSxRQUFBLEtBQ0EsRUFBQSxhQUNBLEVBQUEsWUFBQSxFQUNBLEtBSUEsUUFBQSxLQUNBLElBQUEsRUFBQSxXQUFBLENBQ0EsRUFBQSxZQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsS0FBQSxFQUNBLEtBS0EsR0FBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLElBRUEsRUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsTUFDQSxJQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsS0FBQSxFQUFBLEtBR0EsS0FqTUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEtBQUEsRUFLQSxNQUpBLEtBQ0EsSUFDQSxJQUNBLElBQ0EsQ0FHQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsU0FDQSxJQUFBLEdBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxLQVdBLElBVkEsRUFBQSxHQUFBLEVBQUEsT0FFQSxJQUNBLEVBQUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxVQU9BLEVBQUEsRUFBQSxHQUtBLE1BSkEsS0FDQSxJQUNBLElBQ0EsSUFDQSxDQUdBLElBQUEsR0FBQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEVBQUEsV0FDQSxFQUFBLEVBQUEsYUFBQSxFQUNBLEVBQUEsRUFBQSxLQUNBLEdBQUEsQ0FFQSxJQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsS0FDQSxJQUFBLEVBQUEsY0FXQSxHQUFBLFlBQUEsRUFBQSxNQUNBLEVBQUEsS0FBQSxHQUNBLEVBQUEsRUFBQSxPQUVBLElBQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsRUFDQSxHQUFBLEdBRUEsRUFBQSxLQUFBLEdBQ0EsRUFBQSxFQUFBLFNBcEJBLElBQUEsU0FBQSxHQUFBLEVBQUEsWUFDQSxHQUFBLE1BQ0EsQ0FFQSxJQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEdBRUEsTUFDQSxFQUFBLEdBQUEsR0FnQkEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFdBU0EsSUFKQSxFQUFBLGNBQUEsRUFBQSxxQkFBQSxJQUNBLEVBQUEsWUFBQSxHQUFBLEVBQUEsU0FBQSxJQUdBLEVBS0EsTUFKQSxLQUNBLElBQ0EsSUFDQSxJQUNBLENBR0EsR0FBQSxFQUFBLFdBQ0EsRUFBQSxFQUFBLGFBQUEsRUFFQSxTQUFBLEdBSUEsRUFBQSxJQUFBLFdBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxRQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQUEsRUFDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLFdBQ0EsS0FDQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLGdCQVFBLEVBQUEsU0FBQSxFQUVBLElBQUEsR0FBQSxHQTZCQSxPQTVCQSxLQUNBLEVBQUEsR0FBQSxFQUVBLEVBQUEsS0FBQSxHQUNBLEtBQUEsRUFDQSxPQUFBLEVBQ0EsTUFBQSxFQUNBLFlBQUEsSUFLQSxJQUNBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxFQUNBLEdBQUEsSUFDQSxJQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsY0FBQSxFQUFBLE9BQUEsR0FBQSxPQUFBLEVBRUEsSUFDQSxLQUFBLEVBQ0EsS0FFQSxJQUNBLEVBQUEsTUFBQSxNQUlBLEVBQUEsT0E4REEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxXQUFBLEVBQUEsd0JBQ0EsRUFBQSx1QkFBQSxHQUNBLEVBQUEsaUJBQUEsSUFBQSxFQUNBLEdBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLFFBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBQ0EsSUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLE9BQUEsU0FBQSxHQUNBLEVBQUEsY0FPQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxXQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsWUFBQSxPQUVBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsT0FFQSxFQUFBLEtBQUEsR0FDQSxHQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsS0FDQSxFQUFBLG9CQUNBLEdBQUEsT0FBQSxLQUdBLElBQUEsRUFBQSxlQUNBLEVBQUEsWUFBQSxHQUNBLEVBQUEsV0FBQSxLQUtBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLFNBQ0EsT0FBQSxDQUdBLElBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE9BR0EsSUFBQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLENBSUEsR0FBQSxJQUFBLEVBQUEsT0FBQSxLQUVBLElBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsTUFDQSxJQUFBLEVBQUEsU0FDQSxPQUFBLENBV0EsSUFOQSxJQUNBLEdBQUEsR0FLQSxLQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEVBQ0EsR0FBQSxVQUFBLEtBQ0EsRUFBQSxHQUlBLEVBQUEsR0FDQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEVBQUEsS0FBQSxtQkFFQSxFQUFBLEVBQUEsU0FFQSxRQUFBLElBQUEsR0FBQSxFQWg4QkEsRUFBQSxLQUFBLEVBQUEsRUFNQSxJQUFBLEdBQUEsRUFBQSxPQUNBLFdBQUEsTUFBQSxHQUFBLHNCQUNBLFNBQUEsR0FDQSxJQUFBLElBQ0EsSUFTQSxFQUFBLGFBQUEsV0FDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLFNBQUEsU0FNQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLGtCQUNBLEVBQUEsRUFFQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsSUFGQSxXQUFBLE9BQUEsRUFrVUEsUUFpQ0EsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQU9BLE1BTkEsR0FBQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEdBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsV0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsTUFrQ0EsTUFBQSxTQUFBLEdBTUEsTUFMQSxHQUFBLEVBQUEsUUFBQSxHQUVBLEVBQUEsR0FDQSxFQUFBLEdBQUEsR0FDQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUFBLFdBQUEsRUFBQSxHQUFBLEtBQUEsS0FBQSxXQUNBLEVBQUEsTUFBQSxJQUNBLE1BcUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FRQSxNQVBBLEdBQUEsRUFBQSxRQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBRUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxVQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxNQWlDQSxTQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxTQUFBLEVBQUEsT0FnQ0EsWUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsU0FBQSxLQUFBLElBOEJBLFNBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsa0JBSUEsSUFIQSxFQUFBLEVBQUEsUUFBQSxHQUNBLEVBQUEsRUFBQSxHQUVBLEVBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEVBQUEsRUFHQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxLQUNBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxNQUFBLElBRUEsSUFBQSxHQUFBLEVBQUEsS0FBQSxFQUNBLE9BQUEsSUFDQSxFQUFBLElBQUEsRUFBQSxJQUFBLE9BQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxPQUFBLE9BQUEsR0FHQSxFQUFBLFVBRUEsRUFBQSxLQUFBLEVBQUEsR0FDQSxJQUFBLEVBQ0EsT0FBQSxJQUlBLEVBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEVBQ0EsR0FBQSxXQUFBLEVBRUEsSUFBQSxHQUFBLEVBQUEsS0FBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUNBLE9BQUEsR0FFQSxFQUFBLFdBQUEsRUFBQSxFQUFBLEtBQUEsS0FBQSxXQUNBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEtBQ0EsR0FIQSxRQWlCQSxPQUFBLFNBQUEsR0FDQSxFQUFBLGNBZ0JBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsT0FBQSxVQUFBLFFBQ0EsSUFBQSxHQUNBLEdBQUEsRUFDQSxFQUFBLE9BQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxVQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQUEsR0FFQSxLQUVBLEtBQUEsR0FDQSxFQUFBLFVBQUEsQ0FDQSxNQUVBLFNBQ0EsR0FBQSxFQUFBLFNBR0EsUUFBQSxPQTBTQSxFQUFBLFNBQUEsSUFBQSxVQUFBLFdBQUEsV0FBQSxrQkFDQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBNkNBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FDQSxJQUVBLEVBQUEsS0FBQSxHQUNBLEVBQUEsRUFBQSxXQUNBLEVBQUEsRUFBQSxTQUFBLEdBQ0EsTUFHQSxLQUNBLEVBQUEsS0FDQSxPQU9BLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEVBQUEsUUFBQSxHQUlBLEVBQUEsS0FBQSxFQUlBLElBQUEsR0FBQSxLQUFBLE1BQUEsQ0FDQSxJQUFBLElBSUEsRUFBQSxPQUFBLEdBRUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxXQUNBLEVBQUEsR0FDQSxNQUNBLEdBQUEsSUFHQSxRQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsRUFDQSxJQUNBLEVBQUEsRUFBQSxrQkFBQSxTQUFBLEdBQ0EsUUFNQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxJQUNBLEtBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxDQUdBLEdBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLFVBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGlCQUFBLE9BRUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEdBQUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxLQUFBLElBQUEsRUFBQSxHQUFBLEVBRUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBRUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxJQUNBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEdBRUEsRUFBQSxLQUFBLElBQUEsRUFBQSxNQUdBLEdBQ0EsTUFBQSxFQUNBLGdCQUFBLEVBQ0EsbUJBQUEsRUFDQSxlQUFBLEVBQ0Esa0JBQUEsR0FFQSxJQUNBLEVBQUEsR0FBQSxHQUdBLE1BQUEsR0FHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxhQUtBLE9BSEEsR0FBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxXQUFBLElBQUEsRUFBQSxLQUVBLEVBR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsS0FBQSxFQUtBLE9BSkEsS0FDQSxFQUFBLEtBQUEsSUFBQSxHQUNBLEVBQUEsR0FFQSxFQUFBLElBQUEsRUFBQSxHQUFBLGFBQUEsU0FHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLFdBQUEsV0FBQSxXQUFBLFFBQUEsSUFBQSxFQUVBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLE1BQUEsRUFFQSxJQUNBLElBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsV0FDQSxFQUFBLEVBQUEsSUFBQSxFQUNBLEdBQUEsRUFBQSxFQUVBLElBQUEsRUFBQSxTQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsWUFBQSxHQUdBLEVBQUEsU0FBQSxFQUVBLElBQUEsR0FBQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxtQkFDQSxFQUFBLEVBQUEsaUJBRUEsSUFBQSxHQUFBLElBQUEsR0FBQSxJQUFBLEVBRUEsTUFEQSxHQUFBLFlBQUEsSUFDQSxDQUdBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGVBQUEsR0FDQSxJQUFBLEVBQUEsa0JBRUEsRUFBQSxFQUFBLHFCQUNBLEdBQUEsS0FBQSxHQUNBLFFBQUEsRUFDQSxTQUFBLEVBQ0EsUUFBQSxFQUFBLFNBQUEsRUFDQSxVQUFBLEVBQ0EsZ0JBQUEsRUFDQSxrQkFBQSxHQUdBLElBQUEsR0FBQSxFQUFBLEVBVUEsT0FSQSxJQUNBLEVBQUEsR0FBQSxHQUdBLEdBQ0EsRUFBQSxHQUFBLElBR0EsRUFHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FtR0EsUUFBQSxLQUNBLEVBQUEsSUFBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQ0EsR0FDQSxFQUFBLE9BQUEsR0FFQSxFQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxFQUNBLEtBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxNQUFBLGVBQUEsRUFBQSxJQUlBLFFBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQ0EsSUFBQSxHQUFBLEVBQUEsZUFBQSxFQUNBLEVBQUEsRUFBQSxrQkFBQSxFQUFBLFdBQUEsS0FBQSxNQUlBLEVBQUEsV0FBQSxFQUFBLFlBQUEsUUFBQSxHQVNBLE1BQUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsR0FDQSxJQWpJQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUFBLEVBQ0EsSUFBQSxJQUFBLEVBQUEsYUFBQSxTQUFBLFFBQUEsS0FBQSxFQUVBLFdBREEsSUFJQSxHQUFBLGlCQUNBLEVBQUEsR0FBQSxFQUdBLElBQUEsR0FBQSxHQUNBLEVBQUEsRUFDQSxHQUFBLEVBQUEsTUFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxJQUFBLENBQ0EsSUFBQSxFQUFBLFVBQ0EsR0FBQSxFQUFBLFlBR0EsSUFBQSxHQUFBLEdBQ0EsS0FDQSxFQUFBLEVBQUEsVUFDQSxFQUFBLEVBQUEsUUFDQSxFQUFBLENBQ0EsSUFBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsQ0FDQSxHQUFBLGdCQUFBLEdBQUEsSUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxnQkFBQSxFQUdBLElBQUEsR0FBQSxDQUNBLEdBQUEsZUFBQSxHQUFBLElBQUEsRUFBQSxvQkFDQSxFQUFBLEVBQUEsZUFBQSxFQUNBLEVBQUEsS0FBQSxFQUFBLHlCQUdBLEVBQUEsS0FBQSxNQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxJQUdBLEdBQ0EsRUFBQSxTQUFBLEVBR0EsSUFBQSxHQUFBLEVBQUEsU0FBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLG1CQUFBLEVBQUEsa0JBQ0EsSUFBQSxJQUFBLEVBSUEsTUFIQSxHQUFBLFlBQUEsR0FDQSxFQUFBLEVBQUEsT0FDQSxJQUlBLElBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxnQkFBQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxDQUVBLElBQUEsRUFBQSxPQUFBLEVBQUEsQ0FJQSxHQUFBLEdBQUEsRUFBQSxhQUFBLFVBQUEsRUFDQSxPQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsS0FDQSxHQUFBLEtBRUEsRUFBQSxhQUFBLFFBQUEsRUFBQSxJQUFBLEdBR0EsR0FLQSxHQUxBLEVBQUEsS0FBQSxNQUNBLEVBQUEsRUFBQSxJQUFBLEVBQ0EsR0FBQSxFQUFBLEdBQUEsRUFDQSxHQUFBLEVBQUEsR0FBQSxDQXVCQSxPQXBCQSxHQUFBLElBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLFdBQ0EsRUFBQSxLQUNBLEVBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxHQUNBLEVBQUEsa0JBQUEsR0FDQSxFQUFBLEdBQUEsSUFFQSxFQUFBLEdBQUEsSUFHQSxFQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsa0JBQUEsS0FBQSxXQUNBLElBQ0EsTUFHQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLEdBQ0EsRUF5Q0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLFNBQUEsR0FHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsSUFGQSxPQU9BLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxPQUNBLE1BSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBSUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsS0FBQSxFQUVBLFdBREEsSUFTQSxJQUFBLEdBQUEsQ0FRQSxPQVBBLEdBQUEsRUFBQSxXQUlBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxLQUdBLFNBQUEsSUFDQSxHQUFBLEdBQUEsSUFJQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsWUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLEtBQUEsRUFDQSxLQUNBLEVBQUEsU0FDQSxFQUFBLFVBRUEsRUFBQSxTQUFBLElBQUEsRUFBQSxTQUNBLEVBQUEsV0FBQSxJQStEQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQU9BLE9BTkEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLE1BQUEsT0FDQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLE9BQUEsSUFDQSxJQUFBLEVBQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxLQUdBLEVBemVBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBVUEsR0FBQSxrQkFBQSxHQUFBLEVBQUEsd0JBQUEsR0FDQSxFQUFBLFdBQ0EsRUFBQSxtQkFDQSxFQUFBLHNDQUVBLEVBQUEsYUFDQSxFQUFBLGlCQUdBLEVBQUEsaUJBQUEsR0FBQSxFQUFBLHVCQUFBLEdBQ0EsRUFBQSxXQUNBLEVBQUEsa0JBQ0EsRUFBQSxvQ0FFQSxFQUFBLFlBQ0EsRUFBQSxlQUdBLElBY0EsR0FkQSxFQUFBLFdBQ0EsRUFBQSxXQUNBLEVBQUEsUUFDQSxFQUFBLGlCQUNBLEVBQUEsWUFDQSxFQUFBLGlCQUNBLEVBQUEsc0JBQ0EsRUFBQSxFQUNBLEVBQUEsSUFDQSxFQUFBLElBRUEsS0FDQSxFQUFBLEVBQ0EsS0FrQkEsRUFBQSxLQUNBLEVBQUEsRUFDQSxJQTBXQSxRQUNBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsRUFBQSxXQUFBLElBR0EsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxFQUFBLFdBQUEsSUFHQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLEVBQUEsVUFBQSxJQUdBLGVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsV0FBQSxJQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxXQUFBLEVBQUEsRUFDQSxPQUFBLElBQ0EsRUFBQSxFQUFBLEdBQ0EsT0FFQSxNQUdBLGVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxXQUFBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsT0FBQSxJQUNBLEVBQUEsRUFBQSxHQUNBLE9BRUEsTUFHQSxrQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxFQUFBLEVBQUEsV0FDQSxPQUFBLElBQ0EsRUFBQSxFQUFBLEdBQ0EsT0FFQSxNQUdBLFNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FDQSxJQUFBLEdBQUEsRUFBQSxJQUFBLENBQ0EsT0FBQSxHQUFBLFdBQUEsRUFBQSxFQUFBLElBR0EsU0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxXQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsSUFHQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLGNBQUEsRUFBQSxFQUFBLEVBQUEsV0FBQSxZQWtCQSxPQUFBLE9BQUEsU0NoMURBLFNBQUEsRUFBQSxHQUNBLFlBRUEsU0FBQSxPQUFBLGtCQUNBLHVCQUNBLHVCQUNBLHVCQUNBLHdCQUNBLHdCQUNBLDRCQUNBLDRCQUNBLHdCQUNBLHlCQUNBLHlCQUNBLDBCQUNBLDJCQUNBLDJCQUNBLHVCQUNBLHFCQUNBLDRCQUlBLFFBQUEsT0FBQSx3QkFBQSxvQ0FBQSxvQ0FFQSxTQUFBLFNBQUEsV0FFQSxHQUFBLEdBQUEsS0FBQSxVQUNBLFVBQUEsT0FHQSxNQUFBLE1BQUEsVUFBQSxXQUFBLGFBQUEsU0FBQSxFQUFBLEVBQUEsR0FLQSxRQUFBLEdBQUEsRUFBQSxHQWlKQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLElBQ0EsRUFBQSxHQUVBLE9BQUEsSUFBQSxFQUNBLE1BQ0EsT0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsU0FDQSxPQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEVBQ0EsU0FFQSxTQUtBLFFBQUEsS0FDQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsWUFBQSxFQUFBLEdBQUEsVUFHQSxRQUFBLEtBQ0EsTUFBQSxHQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsS0FBQSxhQUFBLEVBQUEsR0FBQSxhQXJLQSxHQUFBLE1BR0EsRUFBQSxRQUFBLFVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxPQUdBLEVBQUEsK0JBQ0EsRUFBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsS0FDQSxFQUFBLEtBRUEsRUFBQSxFQUFBLFFBRUEsSUFBQSxFQUFBLGFBQ0EsR0FBQSxFQUFBLGFBQUEsTUFBQSxTQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsYUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLGFBSUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxhQWlKQSxPQTdJQSxHQUFBLEtBQUEsV0FFQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsSUFBQSxJQUFBLEVBR0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxlQUNBLEVBQUEsR0FBQSxRQUFBLEVBQUEsNEJBQ0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxvQkFJQSxFQUFBLGdCQUNBLEVBQUEsOEJBSUEsRUFBQSxRQUFBLFdBR0EsRUFBQSxJQUFBLFNBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLEVBQUEsNEJBQ0EsRUFBQSxJQUFBLFNBQUEsRUFBQSxxQkFJQSxFQUFBLDJCQUFBLFdBRUEsV0FBQSxFQUFBLGNBQUEsSUFJQSxFQUFBLGNBQUEsV0FHQSxHQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxJQUdBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFHQSxLQUFBLElBQ0EsRUFBQSxFQUdBLEVBQUEsWUFBQSxHQUFBLFNBQUEsU0FBQSxXQUFBLEVBQUEsSUFBQSxFQUFBLEtBRUEsUUFBQSxHQUNBLEVBQUEsS0FDQSxFQUFBLElBQUEsV0FBQSxFQUFBLGFBQUEsR0FBQSxZQUNBLEVBQUEsSUFBQSxNQUFBLEtBQ0EsV0FBQSxHQUVBLEVBREEsRUFBQSxjQUNBLEVBQUEsRUFBQSxhQUtBLEVBQUEsSUFBQSxFQUVBLEVBQUEsSUFBQSxXQUFBLEVBQUEsYUFBQSxHQUFBLFlBQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxhQUFBLEdBQUEsRUFBQSxHQUFBLGFBQUEsRUFBQSxFQUFBLEVBQUEsUUFFQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLFdBQUEsU0FDQSxFQUFBLElBQUEsTUFBQSxFQUFBLFNBS0EsRUFBQSxVQUFBLFdBQ0EsRUFBQSxnQkFDQSxFQUFBLGlCQUVBLEVBQUEsbUJBQUEsRUFBQSxFQUFBLFVBQUEsSUFFQSxFQUFBLGNBQUEsV0FHQSxFQUFBLElBQUEsV0FBQSxFQUFBLGFBQUEsR0FBQSxZQUVBLEVBQUEsWUFDQSxTQUFBLEVBQUEsWUFDQSxFQUFBLFVBQUEsTUFFQSxFQUFBLFVBQUEsTUFBQSxjQUNBLEVBQUEsR0FBQSxFQUFBLFVBRUEsRUFEQSxFQUFBLGFBQ0EsRUFBQSxPQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsRUFBQSxVQUdBLEVBQUEsT0FBQSxFQUFBLElBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLGFBQUEsR0FBQSxFQUFBLEVBQUEsV0FJQSxFQUFBLEVBQUEsRUFBQSxXQUlBLEVBQUEsZUFHQSxFQUZBLEVBQUEsY0FBQSxFQUFBLGFBQUEsTUFBQSxhQUVBLEtBQUEsRUFBQSxPQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLGFBQUEsRUFHQSxFQUFBLEVBQUEsZUFpQ0EsRUFBQSxPQUNBLEVBOUtBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxRQUFBLFFBQUEsRUFpTEEsT0FBQSxPQU1BLFVBQUEsV0FBQSxTQUFBLFVBQUEsU0FBQSxFQUFBLEdBRUEsT0FDQSxTQUFBLE1BQ0EsUUFBQSxrQkFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLElBQUEsTUFBQSxFQUFBLFVBQUEsT0FBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLFFBQUEsUUFBQSxHQUNBLFNBQUEsU0FBQSxZQUFBLGVBQUEsZUFBQSxlQUFBLFNBQUEsR0FDQSxRQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLEtBR0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsSUFBQSxXQUFBLFdBQ0EsR0FBQSxFQUFBLFVBQ0EsRUFBQSxLQUNBLEVBQUEsWUFRQSxVQUFBLGdCQUFBLFdBQ0EsT0FDQSxZQUFBLFdBQUEsU0FBQSxHQUNBLEtBQUEsU0FBQSxPQU1BLFFBQUEsT0FBQSx3QkFBQSx5QkFFQSxTQUFBLFNBQUEsV0FFQSxHQUFBLEdBQUEsS0FBQSxVQUNBLFVBQUEsMEJBQ0EsWUFBQSxRQUNBLFVBQUEsUUFDQSxTQUFBLHVCQUNBLGlCQUFBLEVBQ0EsV0FBQSxFQUNBLFFBQUEsS0FDQSxVQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBR0EsTUFBQSxNQUFBLFNBQUEsU0FBQSxHQUVBLFFBQUEsR0FBQSxHQUVBLEdBQUEsTUFHQSxFQUFBLFFBQUEsVUFBQSxFQUFBLEVBSUEsT0FGQSxHQUFBLEVBQUEsR0FNQSxNQUFBLE9BTUEsVUFBQSxXQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSx1QkFBQSxFQUFBLFVBRUEsUUFDQSxTQUFBLE1BQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLElBQUEsTUFBQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEVBQ0EsU0FBQSxTQUFBLFdBQUEsa0JBQUEsWUFBQSxXQUFBLFdBQUEsT0FBQSxZQUFBLGFBQUEsU0FBQSxHQUNBLFFBQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsTUFJQSxRQUFBLFNBQUEsUUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLFlBQUEsT0FLQSxFQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxPQUFBLEVBQUEsR0FFQSxFQUFBLFFBQUEsSUFFQSxFQUdBLElBQUEsR0FBQSxFQUFBLEVBR0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxRQUFBLEVBQUEsUUFHQSxFQUFBLElBQUEsV0FBQSxXQUNBLEdBQUEsRUFBQSxVQUNBLEVBQUEsS0FDQSxFQUFBLFlBYUEsUUFBQSxPQUFBLHdCQUFBLHlCQUVBLFNBQUEsU0FBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsVUFBQSxVQUNBLFlBQUEsUUFDQSxVQUFBLEtBQ0EsU0FBQSx1QkFDQSxXQUFBLEVBQ0EsUUFBQSxLQUNBLFVBQUEsRUFDQSxVQUFBLEVBQ0EsTUFBQSxFQUVBLFVBQUEsRUFDQSxNQUFBLEVBQ0EsYUFBQSxFQUdBLE1BQUEsTUFBQSxTQUFBLFdBQUEsU0FBQSxFQUFBLEdBRUEsUUFBQSxHQUFBLEdBRUEsR0FBQSxNQUdBLEVBQUEsUUFBQSxVQUFBLEVBQUEsRUFFQSxHQUFBLEVBQUEsR0FHQSxFQUFBLE9BQUEsY0FBQSxFQUFBLFlBQ0EsRUFBQSxPQUNBLEVBQUEsT0FBQSxLQUFBLEVBQUEsS0FJQSxJQUFBLEdBQUEsRUFBQSxJQVVBLE9BVEEsR0FBQSxXQUNBLEVBQUEsS0FBQSxXQUNBLElBQ0EsRUFBQSxXQUNBLEVBQUEsUUFDQSxJQUFBLEVBQUEsWUFJQSxFQUlBLE1BQUEsT0FNQSxVQUFBLFdBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLHVCQUFBLEVBQUEsVUFFQSxRQUNBLFNBQUEsTUFDQSxPQUFBLEVBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUdBLEdBQUEsSUFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBLE1BQUEsRUFDQSxTQUFBLFNBQUEsV0FBQSxZQUFBLFdBQUEsT0FBQSxZQUFBLFlBQUEsV0FBQSxlQUFBLFNBQUEsR0FDQSxRQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLE1BSUEsUUFBQSxTQUFBLFFBQUEsVUFBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLFlBQUEsT0FLQSxFQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxPQUFBLEVBQUEsR0FFQSxFQUFBLFFBQUEsSUFFQSxFQUdBLElBQUEsR0FBQSxFQUFBLEVBR0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxRQUFBLEVBQUEsUUFHQSxFQUFBLElBQUEsV0FBQSxXQUNBLEdBQUEsRUFBQSxVQUNBLEVBQUEsS0FDQSxFQUFBLFlBU0EsUUFBQSxPQUFBLDRCQUVBLFNBQUEsVUFBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsWUFBQSxTQUNBLFlBQUEsUUFHQSxNQUFBLEtBQUEsV0FDQSxPQUFBLFNBQUEsTUFLQSxVQUFBLGtCQUFBLFdBRUEsT0FDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLGNBQUEsV0FDQSxFQUFBLFdBQUEsV0FDQSxJQUFBLEdBQUEsRUFBQSxHQUFBLGlCQUFBLHlCQUNBLFNBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQ0EsR0FBQSxLQUFBLGNBQUEsSUFDQSxFQUFBLEtBQUEsV0FBQSxFQUFBLFFBQUEsSUFBQSxFQUFBLEtBQUEsZ0JBUUEsVUFBQSxjQUFBLFVBQUEsUUFBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxTQUNBLEVBQUEsb0JBRUEsUUFDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxFQUdBLEVBQUEsVUFBQSxFQUFBLEdBQUEsU0FDQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEVBRUEsRUFBQSxRQUFBLFVBQUEsRUFBQSxXQUFBLEVBQUEsV0FBQSxDQUNBLEdBQUEsS0FBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxXQUVBLElBQUEsR0FBQSxRQUFBLFVBQUEsRUFBQSxZQUFBLEVBQUEsWUFBQSxDQUNBLEdBQUEsS0FBQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxZQUlBLElBQUEsR0FBQSxpQkFBQSxJQUFBLGlCQUFBLEVBQ0EsS0FDQSxFQUFBLFNBQUEsS0FBQSxTQUFBLEdBRUEsTUFBQSxHQUFBLEVBQUEsSUFHQSxFQUFBLE9BQUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxhQUtBLEVBQUEsUUFBQSxXQUVBLEdBQUEsR0FBQSxRQUFBLE9BQUEsRUFBQSxZQUFBLEVBQ0EsR0FBQSxXQUNBLElBQUEsRUFBQSxHQUFBLFFBQUEsR0FDQSxFQUFBLFlBQUEsRUFBQSxZQUFBLE1BS0EsRUFBQSxLQUFBLEVBQUEsWUFBQSxXQUNBLEVBQUEsT0FBQSxXQUVBLEdBQ0EsRUFBQSxlQUFBLEVBQUEsU0FBQSxXQUVBLEdBQ0EsRUFBQSxtQkFXQSxVQUFBLGVBQUEsV0FFQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFVBQ0EsUUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsY0FBQSxXQUNBLEVBQUEsV0FBQSxXQUNBLElBQUEsR0FBQSxFQUFBLEdBQUEsaUJBQUEsc0JBQ0EsU0FBQSxRQUFBLEVBQUEsU0FBQSxHQUNBLFFBQUEsUUFBQSxHQUFBLEtBQUEsV0FBQSxJQUNBLFFBQUEsUUFBQSxHQUFBLEtBQUEsV0FBQSxFQUFBLGVBUUEsVUFBQSxXQUFBLFVBQUEsUUFBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxTQUNBLEVBQUEsb0JBRUEsUUFDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxFQUdBLEVBQUEsVUFBQSxFQUFBLEdBQUEsU0FDQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEVBRUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxLQUdBLEdBQUEsUUFBQSxXQUVBLEdBQUEsR0FBQSxRQUFBLE9BQUEsRUFBQSxZQUFBLEVBQ0EsR0FBQSxXQUNBLElBQUEsRUFBQSxHQUFBLFFBQUEsR0FDQSxFQUFBLFlBQUEsRUFBQSxZQUFBLE1BS0EsRUFBQSxLQUFBLEVBQUEsWUFBQSxXQUNBLEVBQUEsT0FBQSxXQUVBLEVBQUEsY0FBQSxHQUNBLEVBQUEsbUJBV0EsUUFBQSxPQUFBLDhCQUVBLFNBQUEsWUFBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsVUFBQSxjQUNBLGdCQUFBLEVBQ0EsWUFBQSxNQUdBLEVBQUEsS0FBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBR0EsR0FBQSxTQUFBLFFBQUEsS0FBQSxHQUNBLFFBQUEsU0FBQSxZQUFBLGlCQUFBLGVBQUEsU0FBQSxHQUNBLFFBQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxTQUFBLEdBQUEsRUFBQSxNQUdBLEVBQUEsWUFDQSxFQUFBLFlBRUEsRUFBQSx3QkFFQSxFQUFBLGdCQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsS0FBQSxJQUVBLEVBQUEsZ0JBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLElBR0EsRUFBQSxTQUFBLFFBQUEsRUFDQSxFQUFBLFdBQUEsRUFBQSxXQUFBLFNBQUEsR0FJQSxFQUFBLFNBQUEsUUFIQSxFQUFBLFNBQUEsZUFHQSxFQUZBLEVBQUEsU0FBQSxVQUFBLEVBQUEsR0FBQSxFQUlBLEVBQUEscUJBQUEsUUFBQSxTQUFBLEdBQ0EsT0FNQSxNQUFBLEtBQUEsV0FDQSxHQUFBLEtBR0EsT0FGQSxHQUFBLFNBQUEsRUFDQSxFQUFBLFdBQUEsRUFDQSxLQUtBLFVBQUEsY0FBQSxVQUFBLFdBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsUUFFQSxRQUNBLFNBQUEsV0FBQSxjQUNBLFlBQUEsU0FBQSxXQUFBLFNBQUEsRUFBQSxZQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBRUEsS0FHQSxFQUFBLHFCQUFBLEtBQUEsV0FDQSxFQUFBLGNBQUEsRUFBQSxTQUFBLFdBSUEsRUFBQSxZQUFBLEtBQUEsU0FBQSxHQUdBLE1BREEsR0FBQSxXQUFBLEVBQUEsR0FDQSxVQVVBLFVBQUEsbUJBQUEsV0FFQSxPQUNBLFNBQUEsWUFBQSxlQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQ0EsSUFEQSxFQUFBLEdBQ0EsRUFBQSxHQUdBLEdBQUEsS0FBQSxjQUFBLFlBR0EsRUFBQSxnQkFBQSxHQUNBLEVBQUEsR0FBQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsa0JBQUEsRUFBQSxTQUFBLFFBQUEsRUFDQSxHQUFBLFdBQUEsRUFBQSxHQUNBLEVBQUEsZUFRQSxVQUFBLG9CQUFBLFdBQUEsU0FBQSxHQUVBLE9BQ0EsU0FBQSxZQUFBLGVBRUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBZ0JBLFFBQUEsS0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLFFBQUEsR0FDQSxFQUFBLEVBQUEsU0FBQSxPQUNBLEdBQUEsSUFBQSxFQUFBLFdBQUEsZUFBQSxFQUFBLEVBQUEsU0FBQSxhQWpCQSxHQUNBLElBREEsRUFBQSxHQUNBLEVBQUEsR0FHQSxHQUFBLFNBQUEsWUFHQSxFQUFBLFNBQUEsV0FDQSxFQUFBLFNBQUEsRUFBQSxTQUFBLFdBSUEsRUFBQSxnQkFBQSxHQVFBLEVBQUEscUJBQUEsS0FBQSxXQUNBLE1BRUEsU0FRQSxRQUFBLE9BQUEsNkJBQUEsb0NBQUEsMkJBRUEsU0FBQSxjQUFBLFdBRUEsR0FBQSxHQUFBLEtBQUEsVUFDQSxVQUFBLFVBQ0EsWUFBQSxhQUNBLFVBQUEsY0FDQSxTQUFBLGlDQUNBLFFBQUEsUUFDQSxXQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBRUEsV0FBQSxFQUNBLFNBQUEsT0FDQSxXQUFBLFlBQ0EsZ0JBQUEsS0FDQSxVQUFBLEtBQ0EsY0FBQSxFQUNBLFdBQUEsRUFDQSxTQUFBLElBQ0EsU0FBQSxJQUNBLFVBQUEsRUFDQSxRQUFBLEVBQ0EsVUFBQSxFQUNBLG1CQUFBLEdBQ0EsU0FBQSxtQ0FDQSxVQUFBLG9DQUdBLE1BQUEsTUFBQSxVQUFBLFlBQUEsYUFBQSxPQUFBLFVBQUEsYUFBQSxrQkFBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQU9BLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0F3SUEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsWUFBQSxFQUFBLE1BR0EsUUFBQSxLQUNBLEVBQUEsR0FBQSxRQTNJQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFFBQUEsVUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLE1BQ0EsR0FBQSxZQUFBLEVBQUEsV0FBQSxFQUFBLFFBSUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsRUFBQSxLQUNBLElBQUEsR0FBQSxFQUFBLFFBQ0EsR0FBQSxNQUFBLEVBQUEsVUFDQSxFQUFBLFVBQUEsRUFBQSxTQUNBLEVBQUEsV0FBQSxFQUFBLFNBQ0EsSUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLE1BSUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLE9BQUEsSUFFQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxJQUVBLEVBQUEsWUFBQSxXQUNBLEVBQUEsU0FBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLE9BQUEsU0FLQSxFQUFBLE9BQUEsU0FBQSxHQUVBLFFBQUEsT0FBQSxLQUFBLE1BQUEsRUFBQSxhQUNBLEVBQUEsTUFBQSxFQUNBLEVBQUEsT0FBQSxLQUFBLEVBQUEsSUFHQSxFQUFBLFFBQUEsSUFHQSxFQUFBLG9CQUFBLFNBQUEsR0FDQSxFQUFBLG1CQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLFFBQUEsUUFBQSxFQUFBLEtBQUEsR0FBQSxFQUFBLGlCQUlBLEVBQUEsT0FBQSxTQUFBLEVBQUEsR0FFQSxRQUFBLE9BQUEsRUFBQSxjQUFBLEVBQUEsV0FBQSxHQUFBLE1BQUEsS0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLGNBQUEsUUFBQSxLQUFBLElBQ0EsRUFBQSxVQUNBLEVBQUEsWUFBQSxHQUNBLEVBQUEsTUFBQSxLQUdBLFFBQUEsT0FBQSxHQUFBLEtBQUEsRUFBQSxjQUFBLE1BQUEsRUFBQSxXQUFBLEtBQUEsRUFBQSxZQUNBLEVBQUEsUUFBQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFdBSUEsRUFBQSxRQUFBLFNBQUEsR0FFQSxFQUFBLE1BQUEsRUFDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLE9BQ0EsRUFBQSxVQUtBLEVBQUEsT0FBQSxTQUFBLEdBRUEsS0FBQSxHQUFBLEVBQUEsUUFDQSxLQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsTUFBQSxLQUFBLElBR0EsRUFBQSxnQkFBQSxXQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxRQUFBLFFBQUEsRUFBQSxLQUFBLEdBQUEsSUFJQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxXQUFBLElBR0EsRUFBQSxlQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxXQUFBLEVBQUEsT0FHQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUFBLE1BQUEsS0FBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsR0FBQSxHQUNBLFNBQUEsT0FBQSxHQUFBLEtBQUEsRUFBQSxpQkFBQSxNQUFBLEVBQUEsY0FBQSxLQUFBLEVBQUEsZUFDQSxFQUFBLFVBR0EsRUFBQSxhQUFBLFNBQUEsR0FLQSxHQUhBLEVBQUEsaUJBQ0EsRUFBQSxrQkFFQSxFQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLE9BQ0EsWUFBQSxFQUFBLEdBQUEsU0FBQSxnQkFDQSxFQUFBLEVBQUEsVUFFQSxFQUFBLGVBQUEsV0FJQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEdBQUEsbUJBQUEsS0FBQSxFQUFBLFdBQUEsRUFBQSxXQUFBLEVBQUEsT0FBQSxDQUlBLEdBSEEsRUFBQSxpQkFDQSxFQUFBLGtCQUVBLEtBQUEsRUFBQSxRQUNBLE1BQUEsR0FBQSxNQUdBLEVBQUEsT0FBQSxXQUFBLEVBQUEsUUFBQSxFQUFBLE1BQUEsS0FGQSxFQUFBLE1BQUEsRUFPQSxHQUFBLFVBQUEsR0FDQSxFQUFBLFdBZUEsSUFBQSxHQUFBLEVBQUEsSUFDQSxHQUFBLEtBQUEsV0FDQSxNQUFBLElBQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxPQUFBLFlBQ0EsR0FBQSxJQUFBLHFCQUFBLGVBRUEsSUFDQSxFQUFBLEtBQUEsT0FBQSxRQUNBLEVBQUEsS0FBQSxXQUFBLFFBQ0EsRUFBQSxHQUFBLFFBQUEsUUFFQSxNQUdBLElBQUEsR0FBQSxFQUFBLE9BQ0EsR0FBQSxRQUFBLFdBQ0EsR0FBQSxFQUFBLFdBQ0EsRUFBQSxJQUFBLFFBQUEsR0FFQSxJQUdBLElBQUEsR0FBQSxFQUFBLElBQ0EsR0FBQSxLQUFBLFdBQ0EsSUFDQSxXQUFBLFdBQ0EsRUFBQSxTQUFBLEdBQUEsRUFBQSxhQUFBLFlBQUEsRUFBQSxjQUNBLEVBQUEsVUFDQSxFQUFBLEdBQUEsVUFBQSxFQUFBLGNBS0EsSUFBQSxHQUFBLEVBQUEsSUFTQSxPQVJBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLElBQUEsRUFBQSxhQUFBLFlBQUEsRUFBQSxjQUNBLEVBQUEsVUFDQSxFQUFBLElBQUEsVUFBQSxFQUFBLFlBRUEsRUFBQSxJQUdBLEVBak1BLEdBQ0EsSUFEQSxRQUFBLFFBQUEsRUFBQSxTQUFBLE1BQ0EsOEJBQUEsS0FBQSxFQUFBLFVBQUEsWUFDQSxFQUFBLGVBQUEsR0FBQSxVQUFBLENBb01BLE9Bbk1BLEdBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxJQWtNQSxFQUFBLFNBQUEsRUFDQSxNQU1BLFVBQUEsZ0JBQUEsVUFBQSxTQUFBLEtBQUEsVUFBQSxhQUFBLGNBQUEsY0FBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUNBLElBREEsRUFBQSxTQUNBLDhCQUFBLEtBQUEsRUFBQSxVQUFBLFlBQ0EsRUFBQSxTQUFBLEdBQ0EsT0FBQSxNQUFBLFdBQUEsS0FBQSxTQUFBLEdBR0EsUUFDQSxTQUFBLE1BQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQWtEQSxRQUFBLEdBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxPQUNBLEVBREEsS0FoREEsR0FBQSxJQUFBLE1BQUEsRUFBQSxXQUFBLEVBQ0EsU0FBQSxTQUFBLFlBQUEsWUFBQSxRQUFBLFVBQUEsV0FBQSxPQUFBLFlBQUEsV0FBQSxZQUFBLFdBQUEsYUFBQSxrQkFBQSxZQUFBLGVBQUEsWUFBQSxZQUFBLFlBQUEsT0FBQSxZQUFBLFVBQUEsV0FBQSxZQUFBLHNCQUFBLFNBQUEsR0FDQSxRQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLE1BSUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsU0FBQSxHQUNBLEdBQUEsUUFBQSxVQUFBLEtBQ0EsUUFBQSxTQUFBLEtBQUEsSUFBQSxFQUFBLE1BQUEscUJBQ0EsS0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLFNBSUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLFNBRUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxXQUFBLGNBR0EsUUFBQSxTQUFBLFVBQUEsV0FBQSxTQUFBLEdBRUEsUUFBQSxVQUFBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEdBRUEsR0FBQSxVQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxLQUNBLEdBQUEsU0FBQSxJQUFBLEdBQUEsTUFBQSxFQUFBLGNBQUEsRUFBQSxXQUFBLEVBQUEsV0FBQSxZQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLFFBRUEsR0FBQSxTQUFBLEdBREEsUUFBQSxTQUFBLElBQUEsRUFBQSxNQUFBLFdBQ0EsR0FBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsSUFDQSxHQUFBLE1BQUEsU0FBQSxFQUFBLEtBQ0EsUUFBQSxTQUFBLElBQUEsSUFBQSxFQUFBLE9BQ0EsWUFBQSxHQUFBLEtBQUEsS0FFQSxHQUFBLE1BQUEsSUFHQSxNQUFBLEVBQUEsU0FBQSxLQUFBLEVBQUEsUUFBQSxPQUtBLEVBQUEsT0FBQSxFQUFBLFFBQUEsV0FDQSxFQUFBLE9BQUEsRUFBQSxjQUNBLEdBU0EsUUFBQSxVQUFBLEVBQUEsZ0JBQ0EsRUFBQSxPQUFBLEVBQUEsY0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FFQSxJQUFBLEdBQ0EsRUFBQSxvQkFBQSxJQUtBLElBQUEsR0FBQSxHQUFBLE9BQUEsRUFBQSxXQUFBLEtBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxjQUdBLEdBQUEsU0FBQSxRQUFBLFNBQUEsR0FHQSxJQUFBLEVBRUEsV0FEQSxHQUFBLGFBQUEsUUFBQSxFQUdBLElBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLFdBQ0EsS0FBQSxHQUFBLE1BQUEsRUFBQSxXQUVBLFdBREEsR0FBQSxhQUFBLFFBQUEsRUFHQSxJQUFBLEdBQUEsTUFBQSxFQUFBLFNBQUEsVUFBQSxFQUFBLFdBQUEsRUFBQSxTQUFBLFFBQ0EsRUFBQSxNQUFBLEVBQUEsU0FBQSxVQUFBLEVBQUEsV0FBQSxFQUFBLFNBQUEsUUFDQSxFQUFBLEdBQUEsQ0FPQSxPQU5BLEdBQUEsYUFBQSxPQUFBLEdBQ0EsRUFBQSxhQUFBLE1BQUEsR0FDQSxFQUFBLGFBQUEsTUFBQSxHQUVBLElBQUEsRUFBQSxXQUFBLEdBRUEsV0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsaUJBQUEsRUFBQSxZQUNBLFdBQUEsRUFBQSxTQUNBLEVBQUEsV0FBQSxVQUNBLFFBQUEsRUFBQSxTQUNBLEVBQUEsV0FBQSxjQUVBLEdBQUEsTUFBQSxFQUFBLGNBS0EsRUFBQSxZQUFBLEtBQUEsU0FBQSxHQUVBLEdBQUEsRUFnQkEsT0FkQSxHQURBLFFBQUEsWUFBQSxJQUFBLE9BQUEsRUFDQSxJQUNBLFFBQUEsT0FBQSxHQUNBLEVBQ0EsV0FBQSxFQUFBLFNBQ0EsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLGlCQUVBLEdBQUEsTUFBQSxHQU9BLEVBQUEsV0FBQSxFQUNBLEVBQUEsYUFJQSxFQUFBLFFBQUEsV0FFQSxFQUFBLEtBQUEsRUFBQSxZQUFBLE1BQUEsRUFBQSxXQUFBLFdBQUEsR0FBQSxFQUFBLEVBQUEsV0FBQSxFQUFBLGNBSUEsRUFBQSxJQUFBLFdBQUEsV0FDQSxHQUFBLEVBQUEsVUFDQSxFQUFBLEtBQ0EsRUFBQSxZQVFBLFNBQUEsa0JBQUEsV0FRQSxRQUFBLEdBQUEsRUFBQSxHQUVBLElBREEsR0FBQSxNQUNBLEVBQUEsT0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxHQUVBLE9BQUEsR0FJQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE9BQUEsRUFBQSxFQUFBLEdBQUEsRUFoQkEsS0FBQSxVQUNBLFVBQUEsS0FDQSxTQUFBLEVBaUJBLE1BQUEsTUFBQSxVQUFBLE9BQUEsYUFBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLE1BQUEsVUFBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLFNBRUEsRUFBQSxFQUFBLGlCQUFBLFNBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxXQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxZQUNBLEVBQUEsRUFBQSxZQUFBLCtCQUFBLEVBQUEsS0FBQSxxQ0FBQSxTQUVBLEVBQUEsRUFBQSxRQUFBLEVBQUEsVUFBQSxHQUFBLE1BQUEsRUFBQSxXQUFBLEdBQUEsT0FDQSxHQUFBLEtBQUEsRUFBQSxjQUFBLE1BQUEsRUFBQSxXQUFBLEtBQUEsRUFBQSxXQUdBLEdBRkEsSUFBQSxFQUFBLHNCQUdBLE9BQUEsRUFBQSxVQUNBLE1BQUEsRUFDQSxPQUFBLE1BQUEsR0FDQSxPQUFBLFNBQUEsRUFBQSxJQUNBLEtBQUEsT0FBQSxHQUFBLEVBQUEsZ0JBQUEsRUFBQSxNQUFBLEVBQUEsYUFBQSxFQUFBLE9BQ0EsUUFBQSxPQUFBLEdBQUEsS0FBQSxFQUFBLE1BQUEsY0FBQSxNQUFBLEVBQUEsTUFBQSxXQUFBLEtBQUEsRUFBQSxNQUFBLFlBQ0EsRUFBQSxVQUNBLEVBQUEsWUFBQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLEVBQUEsTUFBQSxVQUNBLEVBQUEsb0JBR0EsTUFBQSxXQUNBLEdBQUEsR0FBQSxHQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxHQUFBLEVBQUEsRUFBQSxvQkFDQSxFQUFBLEdBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxVQUFBLElBQUEsRUFBQSxFQUFBLG9CQUNBLEdBQUEsR0FBQSxPQUFBLGNBRUEsS0FBQSxJQUFBLEVBQUEsR0FBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLElBRUEsS0FBQSxHQURBLEdBQUEsS0FDQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxjQUFBLEVBQUEsV0FBQSxFQUFBLFVBQUEsR0FDQSxFQUFBLE1BQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxpQkFBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEtBQUEsUUFBQSxTQUFBLEVBQUEsT0FBQSxLQUFBLFdBQUEsR0FBQSxNQUFBLEVBQUEsYUFBQSxFQUFBLE1BQUEsU0FBQSxLQUFBLFdBQUEsSUFFQSxHQUFBLE1BQUEsRUFBQSxFQUFBLGFBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxPQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxLQUFBLE9BQ0EsS0FBQSxPQUFBLEdBRUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE9BQUEsRUFBQSxnQkFBQSxFQUFBLE1BQUEsZUFBQSxFQUFBLGFBQUEsRUFBQSxNQUFBLFlBQUEsRUFBQSxZQUFBLEVBQUEsTUFBQSxXQUVBLFdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFNBR0EsSUFBQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsUUFBQSxPQUFBLENBR0EsSUFBQSxLQUFBLEVBQUEsbUJBQUEsUUFBQSxFQUFBLFVBQUEsT0FBQSxDQUdBLElBQUEsRUFBQSxtQkFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxtQkFBQSxPQUFBLElBQ0EsR0FBQSxHQUFBLEVBQUEsbUJBQUEsR0FBQSxNQUNBLE1BQUEsSUFBQSxFQUFBLG1CQUFBLEdBQUEsS0FBQSxHQUlBLENBS0EsUUFBQSxHQUVBLFVBQUEsU0FBQSxHQUNBLEdBQ0EsR0FEQSxFQUFBLEVBQUEsTUFBQSxTQUdBLE1BQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxNQUFBLEVBQUEsT0FDQSxLQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsTUFBQSxFQUFBLFFBQ0EsS0FBQSxFQUFBLFFBQUEsRUFBQSxHQUFBLE1BQUEsRUFBQSxPQUNBLEtBQUEsRUFBQSxVQUFBLEVBQUEsR0FBQSxNQUFBLEVBQUEsU0FFQSxLQUFBLFdBQUEsSUFBQSxFQUFBLE9BQUEsR0FBQSxNQUdBLEtBQUEsUUFDQSxPQUFBLE1BQ0EsTUFBQSxFQUNBLE9BQUEsS0FBQSxHQUNBLE9BQUEsU0FBQSxHQUNBLEtBQUEsT0FBQSxFQUFBLGdCQUFBLEVBQUEsS0FHQSxFQUFBLGFBQUEsRUFBQSxRQUNBLFFBQUEsT0FBQSxHQUFBLE1BQUEsRUFBQSxNQUFBLFdBQUEsS0FBQSxFQUFBLE1BQUEsWUFDQSxFQUFBLG9CQUpBLFFBQUEsT0FBQSxHQUFBLEtBQUEsRUFBQSxNQUFBLGNBQUEsTUFBQSxFQUFBLE1BQUEsV0FBQSxLQUFBLEVBQUEsTUFBQSxZQUNBLEVBQUEsV0FNQSxNQUFBLFdBR0EsSUFBQSxHQURBLEdBQUEsR0FEQSxHQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsT0FFQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEtBQUEsUUFBQSxTQUFBLEVBQUEsWUFBQSxHQUFBLFNBQUEsS0FBQSxXQUFBLElBRUEsR0FBQSxNQUFBLEVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsS0FBQSxPQUNBLEtBQUEsT0FBQSxHQUVBLFdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLEVBQUEsZ0JBQUEsRUFBQSxNQUFBLGVBQUEsRUFBQSxhQUFBLEVBQUEsTUFBQSxZQUVBLFdBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxHQUFBLE1BQUEsRUFBQSxjQUFBLEVBQUEsV0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLFVBQUEsRUFBQSxTQUVBLFVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsV0FDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLE1BRUEsTUFBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLEVBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsRUFBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsR0FFQSxLQUFBLFdBQUEsSUFBQSxFQUFBLE9BQUEsR0FBQSxNQUdBLEtBQUEsT0FDQSxPQUFBLE9BQ0EsTUFBQSxFQUNBLE9BQUEsS0FBQSxJQUNBLE9BQUEsU0FBQSxFQUFBLElBQ0EsS0FBQSxPQUFBLEdBQUEsU0FBQSxFQUFBLGNBQUEsR0FBQSxNQUFBLFNBQUEsRUFBQSxLQUFBLEdBQUEsS0FDQSxRQUFBLE9BQUEsR0FBQSxLQUFBLEVBQUEsTUFBQSxjQUFBLE1BQUEsRUFBQSxNQUFBLFdBQUEsS0FBQSxFQUFBLE1BQUEsWUFDQSxFQUFBLFVBQ0EsRUFBQSxnQkFBQSxFQUFBLE9BQ0EsUUFBQSxPQUFBLEdBQUEsS0FBQSxFQUFBLE1BQUEsY0FBQSxNQUFBLEVBQUEsTUFBQSxXQUFBLEtBQUEsRUFBQSxNQUFBLFlBQ0EsRUFBQSxvQkFHQSxNQUFBLFdBR0EsSUFBQSxHQURBLEdBREEsRUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxPQUNBLEtBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsR0FBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxLQUFBLFFBQUEsU0FBQSxFQUFBLFlBQUEsR0FBQSxTQUFBLEtBQUEsV0FBQSxJQUVBLEdBQUEsTUFBQSxFQUFBLEdBQUEsTUFBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEdBQUEsTUFDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEtBQUEsT0FDQSxLQUFBLE9BQUEsR0FFQSxXQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxFQUFBLGdCQUFBLEVBQUEsTUFBQSxlQUVBLFdBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxHQUFBLE1BQUEsRUFBQSxjQUFBLEVBQUEsRUFBQSxFQUNBLE9BQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxVQUFBLEVBQUEsU0FFQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLGNBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxNQUVBLE1BQUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBLEdBQ0EsS0FBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLEVBQUEsR0FDQSxLQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxHQUNBLEtBQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLEdBRUEsS0FBQSxXQUFBLElBQUEsRUFBQSxPQUFBLEdBQUEsTUFJQSxRQUNBLE1BQUEsRUFBQSxRQUFBLE1BQUEsVUFBQSxNQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsRUFDQSxTQUFBLFFBVUEsUUFBQSxPQUFBLDJCQUFBLDJCQUVBLFNBQUEsWUFBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsVUFBQSxVQUNBLFlBQUEsV0FDQSxVQUFBLGNBQ0EsU0FBQSw2QkFDQSxRQUFBLFFBQ0EsV0FBQSxFQUNBLFVBQUEsRUFDQSxNQUFBLEVBQ0EsTUFBQSxFQUdBLE1BQUEsTUFBQSxVQUFBLGFBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxHQUtBLFFBQUEsR0FBQSxFQUFBLEdBd0RBLFFBQUEsR0FBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxJQUFBLEVBQUEsT0FEQSxPQXZEQSxDQUFBLEdBQUEsTUFHQSxFQUFBLFFBQUEsVUFBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsUUFBQSxFQUFBLE9BRUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxRQUlBLEdBQUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxVQUFBLEtBQUEsRUFBQSxTQUFBLENBQ0EsRUFBQSxpQkFDQSxFQUFBLGlCQUdBLElBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxTQUFBLEdBQUEsaUJBQUEsc0JBQ0EsSUFBQSxFQUFBLE9BQUEsQ0FDQSxHQUFBLEVBQ0EsU0FBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsS0FJQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLElBQ0EsUUFBQSxZQUFBLEtBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxHQUFBLEdBQUEsVUFNQSxJQUFBLEdBQUEsRUFBQSxJQUNBLEdBQUEsS0FBQSxXQUNBLElBQ0EsV0FBQSxXQUNBLEVBQUEsVUFBQSxFQUFBLFNBQUEsR0FBQSxVQUFBLEVBQUEsWUFDQSxFQUFBLEdBQUEsUUFBQSxLQUVBLEVBQUEsU0FBQSxhQUFBLEVBQUEsU0FBQSxRQUdBLElBQUEsR0FBQSxFQUFBLElBZUEsT0FkQSxHQUFBLEtBQUEsV0FDQSxFQUFBLFVBQUEsRUFBQSxTQUFBLElBQUEsVUFBQSxFQUFBLFlBQ0EsRUFBQSxJQUFBLFFBQUEsR0FDQSxFQUFBLFNBQUEsYUFBQSxFQUFBLFlBQUEsUUFDQSxLQVVBLEVBaEVBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxRQUFBLFVBQUEsaUJBQUEsUUFBQSxVQUFBLHVCQUFBLFFBQUEsVUFBQSxvQkFBQSxRQUFBLFVBQUEsbUJBQUEsUUFBQSxVQUFBLGdCQW1FQSxPQUFBLE9BTUEsVUFBQSxjQUFBLFVBQUEsT0FBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsT0FDQSxTQUFBLE1BQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FHQSxHQUFBLElBQUEsTUFBQSxFQUNBLFNBQUEsU0FBQSxZQUFBLFlBQUEsUUFBQSxVQUFBLFdBQUEsT0FBQSxZQUFBLFlBQUEsU0FBQSxHQUNBLFFBQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsTUFJQSxFQUFBLFlBQUEsRUFBQSxPQUFBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxRQUFBLElBQ0EsR0FHQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxRQUFBLFVBQUEsS0FDQSxRQUFBLFNBQUEsS0FBQSxJQUFBLEVBQUEsTUFBQSxtQkFDQSxLQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsU0FJQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBR0EsR0FBQSxJQUFBLFdBQUEsV0FDQSxHQUFBLEVBQUEsVUFDQSxFQUFBLEtBQ0EsRUFBQSxZQVNBLFFBQUEsT0FBQSx3Q0FFQSxTQUFBLGVBQUEsa0JBQUEsV0FJQSxRQUFBLE1BRkEsR0FBQSxHQUFBLEtBQUEsVUFTQSxFQUFBLEtBQUEsVUFDQSxPQUFBLFlBQ0EsUUFBQSxFQUdBLE1BQUEsTUFBQSxVQUFBLGFBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsR0FrRkEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FBQSxLQUFBLEdBQ0EsS0FBQSxLQUVBLEVBQUEsQ0FDQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEdBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxPQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsS0FBQSxJQUNBLEVBQUEsRUFBQSxNQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsS0FVQSxNQUxBLFNBQUEsUUFBQSxFQUFBLFNBQUEsR0FHQSxHQUFBLEVBQUEsS0FBQTtHQUVBLEVBR0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsTUFBQSxTQUFBLFFBQUEsT0FBQSxPQUFBLFFBQUEsTUFBQSxPQUFBLFFBQUEsT0FBQSxTQUdBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE9BQUEsS0FBQSxHQUVBLEVBQUEsQ0FFQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxLQUFBLEtBQUEsRUFBQSxJQUdBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEtBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxJQUFBLElBSUEsT0FGQSxHQUFBLEVBQUEsR0FFQSxHQUFBLFFBQUEsSUFBQSxFQUFBLEtBQUEsTUF6SEEsR0FvREEsR0FBQSxFQXBEQSxFQUFBLFFBQUEsVUFBQSxFQUFBLEdBRUEsS0FFQSxHQUNBLElBQUEsV0FDQSxHQUFBLGFBQ0EsRUFBQSxFQUFBLE9BQUEsY0FBQSxtQkFDQSxHQUFBLGFBQ0EsRUFBQSxFQUFBLE9BQUEsY0FBQSxtQkFDQSxHQUFBLG1CQUNBLEVBQUEsRUFBQSxPQUFBLGlCQUFBLG9CQUNBLEdBQUEsb0JBQ0EsRUFBQSxFQUFBLE9BQUEsZUFBQSxpQkFDQSxFQUFBLFFBQ0EsS0FBQSxFQUFBLGlCQUFBLElBQUEsS0FBQSxLQUNBLElBQUEsRUFBQSxpQkFBQSxTQUFBLEtBQUEsS0FDQSxHQUFBLHlCQUNBLEVBQUEsRUFBQSxPQUFBLHlCQUFBLDJCQUNBLEtBQUEsRUFBQSxpQkFBQSxNQUFBLEtBQUEsS0FDQSxJQUFBLEVBQUEsaUJBQUEsV0FBQSxLQUFBLEtBQ0EsR0FBQSxnQkFDQSxFQUFBLEVBQUEsT0FBQSxlQUFBLGlCQUNBLEtBQUEsZ0NBQ0EsR0FBQSxXQUNBLEVBQUEsRUFBQSxPQUFBLHdCQUFBLGtCQUdBLEdBQ0EsSUFBQSxFQUFBLGdCQUNBLEdBQUEsRUFBQSxXQUNBLEVBQUEsRUFBQSxXQUNBLEdBQUEsRUFBQSxXQUNBLEVBQUEsRUFBQSxXQUNBLEdBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxTQUNBLEdBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxTQUNBLEtBQUEsRUFDQSxJQUFBLEVBQ0EsR0FBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEtBQUEsVUFBQSxPQUFBLE1BQUEsU0FBQSxFQUFBLE1BQUEsT0FBQSxFQUFBLEdBQUEsSUFDQSxLQUFBLFNBQUEsR0FBQSxNQUFBLE1BQUEsU0FBQSxFQUFBLGlCQUFBLE1BQUEsUUFBQSxLQUNBLElBQUEsU0FBQSxHQUFBLE1BQUEsTUFBQSxTQUFBLEVBQUEsaUJBQUEsV0FBQSxRQUFBLEtBQ0EsR0FBQSxTQUFBLEdBQUEsTUFBQSxNQUFBLFNBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxTQUFBLEdBQUEsTUFBQSxNQUFBLFNBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxFQUFBLFlBQ0EsR0FBQSxTQUFBLEdBQUEsTUFBQSxNQUFBLFlBQUEsSUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLFlBNEVBLE9BdkVBLEdBQUEsS0FBQSxXQUNBLEVBQUEsUUFBQSxFQUFBLGlCQUFBLEVBQUEsU0FBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsRUFBQSxVQUdBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxTQUFBLE9BQUEsSUFBQSxNQUFBLEVBQUEsV0FDQSxFQUFBLEtBQUEsSUFHQSxFQUFBLE1BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxRQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsU0FDQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsRUFDQSxLQUFBLEVBQUEsT0FBQSxDQUVBLEtBQUEsR0FEQSxHQUFBLEdBQUEsR0FBQSxNQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLElBQ0EsRUFBQSxJQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsT0FBQSxJQWlEQSxFQUFBLE9BQ0EsRUFJQSxPQUFBLFFBT0EsUUFBQSxPQUFBLHNDQUlBLFNBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxDQUNBLE9BQUEsWUFDQSxFQUFBLEtBQ0EsRUFBQSxVQUNBLEVBQUEsR0FBQSxLQUNBLElBQUEsR0FBQSxXQUNBLEdBQUEsR0FBQSxHQUFBLE1BQUEsQ0FDQSxHQUFBLEVBQ0EsRUFBQSxXQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsS0FDQSxJQUFBLEVBQUEsRUFBQSxNQUFBLEVBQUEsTUFHQSxFQUFBLElBQUEsQ0FLQSxPQUpBLEtBQ0EsRUFBQSxXQUFBLEVBQUEsSUFFQSxJQUFBLEVBQUEsRUFBQSxNQUFBLEVBQUEsSUFDQSxLQU9BLFNBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsRUFBQSxLQUNBLEVBQUEsQ0FDQSxLQUFBLEtBQ0EsSUFBQSxHQUFBLFdBQ0EsRUFBQSxFQUFBLFdBQUEsRUFBQSxFQUFBLEdBQUEsTUFDQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxHQUVBLE9BQUEsWUFDQSxHQUFBLEdBQUEsR0FBQSxLQUNBLElBQUEsRUFBQSxXQUFBLElBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFXQSxPQVZBLEdBQUEsS0FDQSxFQUFBLFVBQ0EsR0FBQSxHQUNBLGFBQUEsR0FDQSxFQUFBLEtBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsSUFDQSxHQUFBLEVBQUEsWUFBQSxJQUNBLEVBQUEsV0FBQSxFQUFBLElBRUEsS0FLQSxRQUFBLE9BQUEsd0NBRUEsUUFBQSxjQUFBLFlBQUEsVUFBQSxXQUVBLEdBQ0EsSUFEQSxRQUFBLFlBUUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLFVBQUEsRUFBQSxTQUFBLGdCQUFBLEVBQUEsY0FTQSxHQUFBLElBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBUUEsT0FOQSxHQURBLEVBQUEsYUFDQSxFQUFBLGFBQUEsR0FDQSxFQUFBLGlCQUNBLEVBQUEsaUJBQUEsR0FBQSxHQUVBLEVBQUEsTUFBQSxHQUVBLEtBQUEsRUFBQSxXQUFBLElBQUEsRUFBQSxHQVNBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsd0JBQ0EsRUFBQSxFQUFBLGFBQ0EsUUFDQSxNQUFBLEVBQUEsT0FBQSxFQUFBLFlBQ0EsT0FBQSxFQUFBLFFBQUEsRUFBQSxhQUNBLElBQUEsRUFBQSxLQUFBLEVBQUEsYUFBQSxFQUFBLGdCQUFBLFlBQUEsRUFBQSxnQkFBQSxXQUFBLEdBQ0EsS0FBQSxFQUFBLE1BQUEsRUFBQSxhQUFBLEVBQUEsZ0JBQUEsYUFBQSxFQUFBLGdCQUFBLFlBQUEsS0FVQSxFQUFBLFNBQUEsU0FBQSxHQUVBLEdBQ0EsR0FDQSxFQUZBLEdBQUEsSUFBQSxFQUFBLEtBQUEsRUE0QkEsT0F2QkEsVUFBQSxFQUFBLElBQUEsRUFBQSxZQUdBLEVBQUEsRUFBQSx5QkFLQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsT0FBQSxHQUdBLEVBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLE9BQUEsSUFJQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsa0JBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsbUJBQUEsS0FLQSxNQUFBLEVBQUEsWUFDQSxPQUFBLEVBQUEsYUFDQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsYUFBQSxHQUNBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxjQUFBLElBVUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxjQUNBLEVBQUEsRUFBQSxjQUFBLENBQ0EsSUFBQSxFQUFBLEVBQUEsYUFBQSxNQUFBLEdBQUEsZUFDQSxNQUFBLElBQUEsRUFBQSxFQUFBLFNBQUEsV0FBQSxFQUFBLElBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxZQUVBLE9BQUEsSUFBQSxFQUFBLGdCQXFDQSxPQTNCQSxHQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsWUFNQSxPQUxBLEdBQ0EsR0FBQSxFQUFBLElBQUEsRUFBQSxhQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsZ0JBQUEsR0FFQSxHQUFBLEVBQUEsSUFBQSxFQUFBLGNBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxpQkFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLGtCQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEscUJBQUEsR0FFQSxHQVVBLEVBQUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxXQU1BLE9BTEEsR0FDQSxHQUFBLEVBQUEsSUFBQSxFQUFBLGNBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxlQUFBLEdBRUEsR0FBQSxFQUFBLElBQUEsRUFBQSxlQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsZ0JBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxtQkFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLG9CQUFBLEdBRUEsR0FHQSxLQUtBLFFBQUEsT0FBQSwwQ0FFQSxTQUFBLGdCQUFBLFdBRUEsR0FBQSxHQUFBLEtBQUEsVUFDQSxPQUFBLCtLQUdBLE1BQUEsTUFBQSxTQUFBLEtBQUEsU0FBQSxFQUFBLEdBRUEsUUFBQSxHQUFBLEVBQUEsR0ErQkEsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxJQUlBLE9BSEEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEdBQ0EsTUFBQSxFQUFBLE1BQUEsS0FuQ0EsR0FBQSxNQUdBLEVBQUEsUUFBQSxVQUFBLEVBQUEsRUFDQSxHQUFBLFVBR0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQWlDQSxPQS9CQSxHQUFBLEtBQUEsV0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxJQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxNQUNBLEVBQUEsV0FnQkEsRUFBQSxPQUNBLEVBSUEsTUFBQSxPQU9BLFFBQUEsUUFBQSxNQUFBLEdBQUEsUUFBQSxRQUFBLElBQUEsSUFBQSxRQUFBLE9BQUEsTUFFQSxRQUFBLFNBQUEsVUFBQSxXQUFBLFNBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLHVCQUNBLEVBQUEsNkJBQ0EsRUFBQSx5QkFFQSxFQUFBLEVBQUEsc0JBQ0EsRUFBQSw0QkFDQSxFQUFBLHlCQUNBLEVBQUEsa0NBRUEsSUFBQSxFQUNBLEVBQUEsRUFDQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLFlBQ0EsRUFBQSxLQUdBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE9BQUEsRUFDQSxPQUFBLFlBQ0EsRUFBQSxPQUFBLElBTUEsT0FGQSxHQUFBLFVBQUEsRUFFQSxLQXdCQSxRQUFBLE9BQUEsd0JBQUEsc0NBRUEsU0FBQSxTQUFBLFdBRUEsR0FBQSxHQUFBLEtBQUEsVUFDQSxVQUFBLFVBQ0Esa0JBQUEsVUFDQSxZQUFBLFFBQ0EsWUFBQSxRQUNBLFVBQUEsTUFDQSxTQUFBLHVCQUNBLGlCQUFBLEVBQ0EsV0FBQSxFQUNBLFFBQUEsS0FDQSxVQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBR0EsTUFBQSxNQUFBLFVBQUEsYUFBQSxXQUFBLEtBQUEsaUJBQUEsUUFBQSxXQUFBLFdBQUEsT0FBQSxhQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBUUEsUUFBQSxHQUFBLEdBK0xBLFFBQUEsR0FBQSxHQUNBLEVBQUEsU0FBQSxFQUFBLGdCQUNBLFdBQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLFFBL0xBLEdBQUEsTUFHQSxFQUFBLEVBQUEsU0FBQSxRQUFBLFVBQUEsRUFBQSxFQUNBLEdBQUEsU0FBQSxFQUFBLEVBQUEsU0FDQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsUUFBQSxFQUFBLE1BQ0EsR0FBQSxTQUFBLEVBQUEsWUFDQSxFQUFBLFVBQUEsUUFJQSxHQUFBLFFBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxPQUlBLEVBQUEsTUFBQSxXQUNBLEVBQUEsYUFBQSxXQUNBLEVBQUEsVUFHQSxFQUFBLE1BQUEsV0FDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLFVBR0EsRUFBQSxRQUFBLFdBQ0EsRUFBQSxhQUFBLFdBQ0EsRUFBQSxZQUtBLEVBQUEsa0JBQ0EsRUFBQSxTQUFBLEVBQUEsU0FBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQ0EsT0FBQSxHQUFBLEVBQUEsaUJBQ0EsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsc0JBQUEsRUFBQSxJQUFBLFdBQUEsV0FBQSxLQUFBLEVBR0EsT0FEQSxHQUFBLFVBQUEsRUFBQSxPQUFBLFNBQ0EsRUFBQSxHQUFBLGNBTUEsSUFBQSxHQUFBLEVBQ0EsRUFBQSxRQUFBLFFBQUEsZUFBQSxFQUFBLFlBQUEsZUFrSkEsT0FqSkEsR0FBQSxTQUFBLEtBQUEsU0FBQSxHQUNBLFFBQUEsU0FBQSxLQUFBLEVBQUEsRUFBQSxNQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLG1CQUNBLEVBQUEsRUFBQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxTQUdBLEVBQUEsS0FBQSxXQUdBLEVBQUEsTUFDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLFVBTUEsRUFBQSxRQUFBLFdBR0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxNQUVBLElBQ0EsRUFBQSxTQUNBLEVBQUEsTUFJQSxFQUFBLFlBSUEsRUFBQSxLQUFBLFdBRUEsRUFBQSxNQUFBLEVBQUEsWUFBQSxlQUFBLEVBQ0EsSUFBQSxFQUVBLEdBREEsUUFBQSxVQUFBLEVBQUEsV0FDQSxFQUFBLFVBRUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxXQUFBLElBRUEsSUFBQSxHQUFBLEVBQUEsVUFBQSxLQUFBLEVBQUEsT0FHQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsY0FHQSxFQUFBLEtBQUEsUUFBQSxVQUFBLFNBQUEsRUFBQSxXQUdBLEVBQUEsWUFDQSxFQUFBLFVBQ0EsRUFBQSxTQUFBLEVBQUEsbUJBRUEsRUFBQSxTQUFBLEVBQUEsWUFHQSxFQUFBLFVBQ0EsRUFBQSxNQUFBLEVBQUEsRUFBQSxLQUFBLGNBRUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLFdBQ0EsRUFBQSxNQUFBLEVBQUEsWUFBQSxRQUFBLEtBRUEsRUFBQSxVQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsU0FBQSxFQUFBLFNBR0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLFdBQ0EsRUFBQSxVQUdBLEVBQUEsU0FBQSxFQUFBLFlBQUEsU0FDQSxFQUFBLFdBQ0EsRUFBQSxTQUFBLEVBQUEsWUFBQSxTQUFBLEVBQUEsV0FJQSxFQUFBLFdBQ0EsRUFBQSxHQUFBLFFBQUEsR0FDQSxFQUFBLEdBQUEsUUFBQSxJQUVBLEVBQUEsVUFDQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFdBSUEsRUFBQSxLQUFBLFdBRUEsRUFBQSxNQUFBLEVBQUEsWUFBQSxlQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsV0FDQSxFQUFBLE1BQUEsRUFBQSxZQUFBLFFBQUEsR0FDQSxFQUFBLFlBQUEsRUFBQSxZQUFBLFNBQ0EsRUFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLFlBQUEsU0FBQSxFQUFBLGFBR0EsRUFBQSxVQUNBLEVBQUEsTUFBQSxFQUFBLGNBRUEsRUFBQSxVQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsU0FBQSxFQUFBLFVBR0EsRUFBQSxXQUNBLEVBQUEsSUFBQSxRQUFBLEdBQ0EsRUFBQSxJQUFBLFFBQUEsSUFFQSxFQUFBLFVBQ0EsRUFBQSxJQUFBLFFBQUEsRUFBQSxXQUlBLEVBQUEsT0FBQSxXQUVBLEVBQUEsU0FBQSxFQUFBLE9BQUEsRUFBQSxRQUlBLEVBQUEsTUFBQSxXQUNBLEVBQUEsR0FBQSxTQUtBLEVBQUEsU0FBQSxTQUFBLEdBRUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxXQUNBLEVBQUEsT0FDQSxFQUFBLG9CQVlBLEVBTUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUEsaUJBQUEsSUFHQSxRQUFBLEdBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxFQUFBLElBQUEsSUFBQSxFQUFBLElBQUEsSUFDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLFNBQUEsU0FBQSxJQUNBLEVBQUEsSUFBQSxFQUFBLEVBQUEsTUFDQSxFQUFBLE1BRUEsSUEzTkEsR0FBQSxHQUFBLFFBQUEsUUFDQSxFQUFBLE9BQUEsVUFBQSxLQUNBLEVBQUEsRUFBQSx1QkFBQSxFQUFBLFdBQ0EsRUFBQSxRQUFBLFFBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxhQTJOQSxPQUFBLE9BTUEsVUFBQSxXQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsT0FDQSxTQUFBLE1BQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FHQSxHQUFBLElBQUEsTUFBQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEVBQ0EsU0FBQSxTQUFBLFdBQUEsa0JBQUEsWUFBQSxXQUFBLFdBQUEsT0FBQSxZQUFBLGFBQUEsU0FBQSxHQUNBLFFBQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsTUFJQSxRQUFBLFNBQUEsUUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLFlBQUEsT0FLQSxFQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxPQUFBLEVBQUEsR0FFQSxFQUFBLFFBQUEsSUFFQSxFQUdBLElBQUEsR0FBQSxFQUFBLEVBR0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxRQUFBLEVBQUEsUUFHQSxFQUFBLElBQUEsV0FBQSxXQUNBLEdBQUEsRUFBQSxVQUNBLEVBQUEsS0FDQSxFQUFBLFlBU0EsUUFBQSxPQUFBLDRCQUVBLFNBQUEsVUFBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsWUFBQSxTQUNBLFVBQUEsbUJBQ0EsUUFBQSxFQUdBLE1BQUEsS0FBQSxXQUNBLE9BQUEsU0FBQSxNQUtBLFVBQUEsWUFBQSxVQUFBLFlBQUEsVUFBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLFFBRUEsUUFDQSxTQUFBLElBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUdBLEdBQUEsR0FBQSxRQUFBLEtBQUEsRUFDQSxTQUFBLFFBQUEsT0FBQSxLQUFBLEdBQUEsU0FBQSxHQUNBLFFBQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsTUFJQSxFQUFBLE9BQUEsV0FFQSxNQUFBLEdBQUEsUUFFQSxTQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxpQkFBQSxNQUFBLEVBQUEsVUFBQSxJQUVBLFNBQUEsUUFBQSxFQUFBLFNBQUEsR0FFQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEdBQ0EsRUFBQSxFQUFBLEtBQUEsRUFBQSxXQUFBLFFBQUEsSUFBQSxNQUNBLEdBQUEsU0FDQSxFQUFBLElBQUEsRUFBQSxJQUVBLElBQUEsR0FBQSxHQUFBLFFBQUEsR0FBQSxLQUVBLEdBQUEsS0FBQSxHQUNBLEVBQUEsU0FBQSxFQUFBLGFBRUEsRUFBQSxZQUFBLEVBQUEsc0JBY0EsUUFBQSxPQUFBLDBCQUFBLDJCQUVBLFNBQUEsV0FBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsVUFBQSxVQUNBLFlBQUEsR0FDQSxXQUFBLEVBQ0EsUUFBQSxFQUNBLFVBQUEsUUFDQSxTQUFBLDJCQUNBLGlCQUFBLEVBQ0EsUUFBQSxRQUNBLFVBQUEsRUFDQSxNQUFBLEVBQ0EsTUFBQSxHQUNBLFFBQUEsR0FDQSxNQUFBLEVBR0EsTUFBQSxNQUFBLFdBQUEsU0FBQSxHQUVBLFFBQUEsR0FBQSxFQUFBLEdBR0EsR0FBQSxHQUFBLFFBQUEsVUFBQSxFQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFPQSxPQUpBLEdBQUEsVUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFNBR0EsRUFJQSxNQUFBLE9BTUEsVUFBQSxhQUFBLFVBQUEsT0FBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsdUJBQUEsRUFBQSxVQUVBLFFBQ0EsU0FBQSxNQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBR0EsR0FBQSxJQUFBLE1BQUEsRUFDQSxTQUFBLFNBQUEsV0FBQSxrQkFBQSxZQUFBLFlBQUEsU0FBQSxRQUFBLFVBQUEsV0FBQSxPQUFBLFlBQUEsZUFBQSxTQUFBLEdBQ0EsUUFBQSxVQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsRUFBQSxNQUlBLFFBQUEsU0FBQSxRQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxZQUFBLEdBQ0EsUUFBQSxVQUFBLElBQUEsRUFBQSxXQUNBLEdBQUEsRUFBQSx3QkFNQSxFQUFBLFdBQUEsRUFBQSxPQUFBLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLE9BQUEsRUFBQSxHQUVBLEVBQUEsUUFBQSxFQUVBLFFBQUEsVUFBQSxJQUFBLEVBQUEsV0FDQSxHQUFBLEVBQUEsc0JBRUEsR0FHQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxRQUFBLFVBQUEsS0FDQSxRQUFBLFNBQUEsS0FBQSxJQUFBLEVBQUEsTUFBQSxrQkFDQSxLQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsU0FJQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBR0EsR0FBQSxJQUFBLFdBQUEsV0FDQSxHQUFBLEVBQUEsVUFDQSxFQUFBLEtBQ0EsRUFBQSxZQVNBLFFBQUEsT0FBQSw0QkFBQSxrQ0FBQSxzQ0FFQSxTQUFBLGFBQUEsV0FHQSxHQUFBLEdBQUEsS0FBQSxXQUVBLEVBQUEsS0FBQSxVQUNBLFNBQUEsSUFDQSxTQUFBLElBQ0EsT0FBQSxJQUdBLE1BQUEsTUFBQSxVQUFBLFlBQUEsYUFBQSxhQUFBLFdBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQVFBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsVUFBQSxFQUFBLEdBQUEsU0FBQSxnQkFBQSxFQUFBLGNBR0EsUUFBQSxHQUFBLEdBR0EsR0FBQSxHQUFBLFFBQUEsVUFBQSxFQUFBLEVBQ0EsR0FBQSxVQUFBLEVBQUEsUUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLEVBQUEsUUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEVBR0EsSUFBQSxFQUFBLEdBRUEsTUFEQSxHQUFBLEdBQUEsVUFDQSxFQUFBLEVBR0EsSUFHQSxHQUFBLEVBR0EsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBWEEsS0FJQSxFQUFBLEVBQUEsb0JBQ0EsSUF1SkEsT0EvSUEsR0FBQSxLQUFBLFdBR0EsS0FBQSxRQUFBLEVBR0EsRUFBQSxFQUFBLEtBQUEsY0FBQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLEtBQUEsY0FBQSxFQUFBLFVBQ0EsRUFBQSxHQUFBLFFBQUEsS0FBQSw0QkFDQSxFQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxTQUFBLEdBRUEsRUFBQSxFQUFBLEtBQUEsYUFBQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLElBQUEscUJBQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSx3QkFBQSxHQUNBLElBR0EsSUFDQSxFQUFBLEdBQUEsSUFLQSxFQUFBLFFBQUEsV0FHQSxLQUFBLFVBQ0EsS0FBQSxRQUFBLElBS0EsRUFBQSxJQUFBLFFBQUEsS0FBQSw0QkFDQSxFQUFBLElBQUEsU0FBQSxHQUNBLEVBQUEsSUFBQSxTQUFBLEdBQ0EsSUFDQSxJQUNBLFNBQ0EsR0FBQSxLQUlBLEVBQUEsY0FBQSxXQUdBLEdBQUEsRUFBQSxPQUFBLENBU0EsR0FOQSxHQUFBLEVBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxlQUFBLEVBR0EsRUFBQSxLQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxpQkFHQSxFQUFBLEVBQUEsR0FBQSxXQUFBLElBQUEsRUFBQSxHQUFBLE9BQ0EsTUFBQSxHQUFBLGlCQUFBLEVBQUEsR0FJQSxLQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsS0FDQSxJQUFBLFFBQUEsWUFBQSxFQUFBLEdBQUEsWUFBQSxPQUFBLEVBQUEsR0FBQSxXQUNBLElBQUEsRUFBQSxHQUFBLFVBQ0EsRUFBQSxFQUFBLEdBQUEsV0FDQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLGlCQUFBLEVBQUEsTUFLQSxFQUFBLDJCQUFBLFdBQ0EsV0FBQSxLQUFBLGNBQUEsSUFLQSxFQUFBLGlCQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxtQkFBQSxFQUNBLEtBQ0EsRUFBQSxPQUFBLFlBQUEsVUFDQSxFQUFBLEVBQUEsT0FBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLFNBQUEsU0FBQSxPQUNBLEVBQUEsT0FBQSxTQUFBLFNBQUEsWUFBQSxXQUlBLEVBQUEsRUFBQSxPQUNBLEVBQUEsT0FBQSxTQUFBLFVBQ0EsRUFBQSxFQUFBLE9BQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxTQUFBLFNBQUEsT0FDQSxFQUFBLE9BQUEsU0FBQSxTQUFBLFNBQUEsV0FJQSxFQUFBLG1CQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQUEsSUFDQSxJQUtBLEVBQUEsYUFBQSxXQUVBLFFBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxjQUFBLEVBQUEsT0FDQSxHQUFBLFVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxJQUFBLEtBQ0EsRUFBQSxRQUFBLE9BQUEsRUFBQSxZQUFBLEVBQUEsV0FBQSxFQUFBLEVBQUEsVUFHQSxFQUFBLEVBQ0EsT0FBQSxTQUFBLEdBQ0EsTUFBQSxRQUFBLEVBQUEsWUFFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxVQUFBLEVBQUEsWUFHQSxLQUlBLEVBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsT0FBQSxFQUFBLE9BQUEsS0FHQSxFQUFBLGVBQUEsU0FBQSxFQUFBLEdBRUEsSUFBQSxHQURBLEdBQ0EsRUFBQSxFQUFBLE9BQUEsS0FDQSxHQUFBLEVBQUEsR0FBQSxTQUFBLEdBQUEsRUFBQSxHQUFBLFNBQUEsRUFBQSxDQUNBLEVBQUEsQ0FDQSxPQUdBLEVBQUEsRUFBQSxPQUFBLEVBQUEsSUFHQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxTQUFBLFdBS0EsRUFBQSxPQUNBLEVBckxBLEdBQUEsR0FBQSxRQUFBLFFBQUEsR0FDQSxFQUFBLFFBQUEsUUFBQSxFQUFBLEtBQUEsb0JBQ0EsRUFBQSxRQUFBLFFBQUEsRUFBQSxTQUFBLEtBdUxBLE9BQUEsT0FNQSxVQUFBLGVBQUEsYUFBQSxXQUFBLGFBQUEsYUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsT0FDQSxTQUFBLE1BQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsSUFBQSxNQUFBLEVBQ0EsU0FBQSxTQUFBLFNBQUEsVUFBQSxTQUFBLEdBQ0EsUUFBQSxVQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsRUFBQSxLQUdBLElBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxhQUFBLEVBQUEsT0FBQSxHQUVBLEVBQUEsSUFBQSxXQUFBLFdBQ0EsSUFDQSxFQUFBLGVBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxXQUVBLEVBQUEsS0FDQSxFQUFBLFlBU0EsVUFBQSxtQkFBQSxhQUFBLFdBQUEsYUFBQSxhQUFBLFdBRUEsT0FDQSxTQUFBLElBQ0EsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxpQkFBQSxlQUNBLFNBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQ0EsR0FBQSxTQUFBLEtBQUEsZUFBQSxJQUFBLEtBQUEsY0FBQSxFQUFBLEtBQUEsZ0JBU0EsUUFBQSxPQUFBLHlCQUFBLHlCQUFBLHdDQUVBLFNBQUEsVUFBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsVUFBQSxVQUNBLFlBQUEsU0FDQSxZQUFBLFVBQ0EsVUFBQSxjQUNBLFNBQUEseUJBQ0EsUUFBQSxRQUNBLFdBQUEsRUFDQSxVQUFBLEVBQ0EsTUFBQSxFQUNBLE1BQUEsRUFDQSxVQUFBLEVBQ0EsZ0JBQUEsRUFDQSxNQUFBLEVBQ0EsVUFBQSxvQ0FDQSxZQUFBLGdDQUNBLFVBQUEsRUFDQSxjQUFBLFdBQ0EsY0FBQSx5QkFHQSxNQUFBLE1BQUEsVUFBQSxZQUFBLGFBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBTUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsTUFHQSxFQUFBLFFBQUEsVUFBQSxFQUFBLEVBRUEsR0FBQSxFQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxNQUVBLEdBQUEsWUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLFlBQUEsRUFBQSxTQUNBLEVBQUEsb0JBQUEsRUFBQSxnQkFBQSxFQUFBLFNBQ0EsRUFBQSxlQUFBLEVBQUEsY0FFQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsYUFBQSxXQUNBLEVBQUEsU0FBQSxNQUlBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxhQUFBLFdBQ0EsRUFBQSxPQUFBLE1BSUEsRUFBQSxXQUFBLFdBQ0EsTUFBQSxHQUFBLGNBR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsVUFBQSxJQUdBLEVBQUEsV0FBQSxXQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsVUFBQSxJQUNBLEVBQUEsUUFBQSxJQUtBLEVBQUEsWUFBQSxXQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsVUFBQSxJQUNBLEVBQUEsUUFBQSxJQU9BLEVBQUEsT0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxzQkFHQSxFQUFBLFNBQUEsU0FBQSxHQVFBLE1BUEEsR0FBQSxVQUNBLEVBQUEsYUFBQSxPQUNBLEVBQUEsVUFBQSxHQUFBLEVBQUEsYUFBQSxPQUFBLEVBQUEsYUFBQSxRQUFBLEdBQUEsR0FBQSxFQUFBLGFBQUEsS0FBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLGFBQUEsUUFFQSxFQUFBLGFBQUEsRUFFQSxFQUFBLGNBR0EsRUFBQSxPQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsS0FDQSxHQUFBLE9BQUEsV0FDQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFNBQ0EsRUFBQSxjQUFBLEVBQUEsYUFBQSxJQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxHQUFBLFVBR0EsRUFBQSxjQUFBLEdBRUEsRUFBQSxVQUlBLEVBQUEsTUFBQSxFQUFBLFlBQUEsVUFBQSxFQUFBLElBS0EsRUFBQSxtQkFBQSxXQUNBLEVBQUEsYUFBQSxFQUFBLFNBQUEsT0FFQSxFQUFBLGFBREEsRUFBQSxVQUFBLFFBQUEsUUFBQSxFQUFBLGFBQ0EsRUFBQSxZQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxVQUFBLEtBR0EsRUFBQSxVQUFBLEVBQUEsYUFFQSxFQUFBLGNBQUEsRUFBQSxTQUFBLFNBQ0EsRUFBQSxhQUFBLEVBQUEsWUFBQSxJQUlBLEVBQUEsV0FBQSxXQUNBLE1BQUEsR0FBQSxXQUFBLEVBSUEsRUFBQSxTQUFBLFFBQUEsRUFBQSxXQUFBLFFBQUEsRUFBQSxVQUhBLEVBQUEsU0FBQSxRQU1BLEVBQUEsVUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQ0EsS0FBQSxFQUFBLGFBQUEsUUFBQSxHQUVBLEVBQUEsZUFBQSxHQUlBLEVBQUEsVUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsRUFBQSxLQUNBLEVBQUEsU0FBQSxHQUFBLFFBQUEsSUFFQSxLQUFBLEVBQUEsR0FDQSxNQUFBLEtBR0EsRUFBQSxhQUFBLFNBQUEsR0FLQSxHQUhBLEVBQUEsaUJBQ0EsRUFBQSxrQkFFQSxFQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLE9BQ0EsR0FBQSxlQUFBLFdBSUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxHQUFBLGVBQUEsS0FBQSxFQUFBLFNBQUEsQ0FLQSxHQUpBLEVBQUEsaUJBQ0EsRUFBQSxtQkFHQSxFQUFBLFdBQUEsS0FBQSxFQUFBLFNBQUEsSUFBQSxFQUFBLFNBQ0EsTUFBQSxHQUFBLE9BQUEsRUFBQSxhQUlBLE1BQUEsRUFBQSxTQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsZUFDQSxLQUFBLEVBQUEsU0FBQSxFQUFBLGFBQUEsRUFBQSxTQUFBLE9BQUEsRUFBQSxFQUFBLGVBQ0EsUUFBQSxZQUFBLEVBQUEsZ0JBQUEsRUFBQSxhQUFBLEdBQ0EsRUFBQSxXQUtBLElBQUEsR0FBQSxFQUFBLElBQ0EsR0FBQSxLQUFBLFdBQ0EsSUFDQSxFQUFBLFVBQ0EsRUFBQSxTQUFBLFNBQUEsbUJBRUEsV0FBQSxXQUNBLEVBQUEsU0FBQSxHQUFBLEVBQUEsYUFBQSxZQUFBLEVBQUEsY0FDQSxFQUFBLFVBQ0EsRUFBQSxHQUFBLFVBQUEsRUFBQSxjQUtBLElBQUEsR0FBQSxFQUFBLElBU0EsT0FSQSxHQUFBLEtBQUEsV0FDQSxFQUFBLFNBQUEsSUFBQSxFQUFBLGFBQUEsWUFBQSxFQUFBLGNBQ0EsRUFBQSxVQUNBLEVBQUEsSUFBQSxVQUFBLEVBQUEsWUFFQSxHQUFBLElBR0EsRUEzTEEsR0FDQSxJQURBLFFBQUEsUUFBQSxFQUFBLFNBQUEsTUFDQSw4QkFBQSxLQUFBLEVBQUEsVUFBQSxZQUNBLEVBQUEsZUFBQSxHQUFBLFVBQUEsQ0E4TEEsT0FEQSxHQUFBLFNBQUEsRUFDQSxNQU1BLFVBQUEsWUFBQSxVQUFBLFNBQUEsS0FBQSxVQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLFFBRUEsUUFDQSxTQUFBLE1BQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUdBLEdBQUEsSUFBQSxNQUFBLEVBTUEsSUFMQSxRQUFBLFNBQUEsWUFBQSxZQUFBLFFBQUEsVUFBQSxXQUFBLE9BQUEsWUFBQSxXQUFBLGNBQUEsV0FBQSxpQkFBQSxZQUFBLGlCQUFBLFNBQUEsR0FDQSxRQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLE1BSUEsV0FBQSxFQUFBLEdBQUEsU0FBQSxjQUFBLENBQ0EsR0FBQSxHQUFBLENBQ0EsR0FBQSxJQUFBLFVBQUEsUUFDQSxFQUFBLFFBQUEsUUFBQSwyREFDQSxFQUFBLE1BQUEsR0FJQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFdBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUdBLEVBQUEsRUFBQSxPQUFBLEdBQUEsUUFBQSxPQUFBLElBQUEsTUFDQSxHQUFBLE9BQUEsRUFBQSxXQUVBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxjQUVBLEdBR0EsRUFBQSxPQUFBLEVBQUEsUUFBQSxXQUVBLEVBQUEscUJBQ0EsRUFBQSxZQUNBLEdBR0EsRUFBQSxRQUFBLFdBRUEsR0FBQSxHQUFBLENBQ0EsR0FBQSxVQUFBLFFBQUEsUUFBQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLFlBQUEsSUFBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEVBQUEsVUFBQSxHQUNBLFFBQUEsVUFBQSxHQUFBLEVBQUEsT0FBQSxTQUFBLEdBQUEsT0FBQSxJQUNBLE9BQUEsUUFBQSxXQUVBLEVBREEsRUFBQSxRQUFBLEVBQUEsV0FBQSxFQUFBLFdBQ0EsRUFBQSxPQUFBLEtBQUEsRUFBQSxlQUFBLEVBQUEsZUFFQSxFQUFBLEtBQUEsUUFHQSxFQUFBLEVBQUEsVUFBQSxFQUFBLGFBQ0EsRUFBQSxRQUFBLFVBQUEsR0FBQSxFQUFBLE9BQUEsU0FBQSxHQUFBLE9BQUEsR0FFQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsYUFBQSxFQUFBLGFBQUEsRUFBQSxZQUlBLEVBQUEsSUFBQSxXQUFBLFdBQ0EsR0FBQSxFQUFBLFVBQ0EsRUFBQSxLQUNBLEVBQUEsWUFTQSxRQUFBLE9BQUEseUJBRUEsU0FBQSxPQUFBLFdBRUEsR0FBQSxHQUFBLEtBQUEsVUFDQSxVQUFBLFVBQ0EsU0FBQSxtQkFDQSxTQUFBLFdBQ0EsWUFBQSxVQUdBLEVBQUEsS0FBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBR0EsR0FBQSxTQUFBLFFBQUEsS0FBQSxHQUNBLFFBQUEsU0FBQSxZQUFBLFdBQUEsZUFBQSxTQUFBLEdBQ0EsUUFBQSxVQUFBLEVBQUEsTUFBQSxFQUFBLFNBQUEsR0FBQSxFQUFBLE1BSUEsRUFBQSxVQUFBLEVBQUEsU0FBQSxTQUNBLEVBQUEsYUFBQSxFQUFBLFNBQUEsWUFFQSxFQUFBLE9BQUEsRUFBQSxVQUVBLEVBQUEsd0JBRUEsRUFBQSxNQUFBLFNBQUEsR0FDQSxFQUFBLE9BQUEsS0FBQSxJQUdBLEVBQUEsT0FBQSxRQUFBLEVBQ0EsRUFBQSxXQUFBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLFFBQUEsRUFDQSxFQUFBLHFCQUFBLFFBQUEsU0FBQSxHQUNBLE9BTUEsTUFBQSxLQUFBLFdBQ0EsR0FBQSxLQUdBLE9BRkEsR0FBQSxTQUFBLEVBQ0EsRUFBQSxXQUFBLEVBQ0EsS0FLQSxVQUFBLFVBQUEsVUFBQSxXQUFBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxRQUVBLFFBQ0EsU0FBQSxXQUFBLFVBQ0EsWUFBQSxFQUNBLE9BQUEsRUFDQSxZQUFBLFNBQUEsV0FBQSxTQUFBLEVBQUEsWUFDQSxZQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxVQUFBLEVBQUEsVUFFQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUVBLEtBR0EsRUFBQSxxQkFBQSxLQUFBLFdBQ0EsRUFBQSxjQUFBLEVBQUEsT0FBQSxXQUlBLEVBQUEsWUFBQSxLQUFBLFNBQUEsR0FHQSxNQURBLEdBQUEsV0FBQSxFQUFBLEdBQ0EsVUFVQSxVQUFBLFVBQUEsVUFBQSxXQUFBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxPQUNBLFNBQUEsWUFBQSxXQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FxQkEsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLE9BQUEsUUFBQSxHQUNBLEVBQUEsRUFBQSxPQUFBLE9BQ0EsR0FBQSxJQUFBLEVBQUEsV0FBQSxlQUFBLEVBQUEsRUFBQSxTQUFBLGFBdEJBLEdBQ0EsSUFEQSxFQUFBLEdBQ0EsRUFBQSxHQUdBLEdBQUEsU0FBQSxZQUdBLEVBQUEsU0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxZQUFBLEtBSUEsRUFBQSxTQUFBLFdBQ0EsRUFBQSxTQUFBLEVBQUEsU0FBQSxXQUlBLEVBQUEsTUFBQSxHQVFBLEVBQUEscUJBQUEsS0FBQSxXQUNBLE1BRUEsU0FRQSxRQUFBLE9BQUEsNkJBQUEsb0NBQUEsMkJBRUEsU0FBQSxjQUFBLFdBRUEsR0FBQSxHQUFBLEtBQUEsVUFDQSxVQUFBLFVBQ0EsWUFBQSxhQUNBLFVBQUEsY0FDQSxTQUFBLGlDQUNBLFFBQUEsUUFDQSxXQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBRUEsV0FBQSxFQUNBLFNBQUEsT0FDQSxXQUFBLFlBQ0EsZ0JBQUEsS0FDQSxXQUFBLEVBQ0EsU0FBQSxJQUNBLFNBQUEsSUFDQSxPQUFBLEVBQ0EsU0FBQSxFQUNBLFdBQUEsRUFDQSxPQUFBLGlDQUNBLFNBQUEsbUNBQ0EsY0FBQSxRQUdBLE1BQUEsTUFBQSxVQUFBLFlBQUEsYUFBQSxPQUFBLFVBQUEsYUFBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FPQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBdU1BLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEdBQUEsZ0JBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLGlCQUNBLEdBQUEsVUFBQSxHQUNBLEVBQUEsVUFBQSxZQUFBLEdBQ0EsRUFBQSxRQUFBLFlBQUEsR0FDQSxFQUFBLGFBQ0EsR0FBQSxHQUFBLGtCQUNBLEVBQUEsR0FBQSxrQkFBQSxFQUFBLEdBQ0EsUUFBQSxZQUFBLEVBQUEsR0FBQSxrQkFDQSxFQUFBLEdBQUEsZUFBQSxFQUNBLEVBQUEsR0FBQSxhQUFBLEdBSUEsUUFBQSxLQUNBLEVBQUEsR0FBQSxRQXJOQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFFBQUEsVUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLE9BSUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxZQUFBLEdBQUEsTUFDQSxHQUFBLEtBQUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxXQUFBLEdBQUEsT0FBQSxFQUFBLGFBQUEsT0FBQSxFQUFBLGFBQUEsWUFBQSxFQUFBLG1CQUVBLEVBQUEsRUFBQSxpQkFBQSxFQUFBLGFBQUEsRUFBQSxXQUNBLEVBQUEsNEJBQUEsS0FBQSxHQUFBLE1BQUEsRUFDQSxHQUFBLFFBQUEsRUFBQSxPQUNBLEVBQUEsVUFBQSxFQUFBLFNBSUEsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLElBRUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsV0FBQSxFQUFBLElBRUEsRUFBQSxnQkFBQSxTQUFBLEdBQ0EsRUFBQSxlQUFBLElBS0EsRUFBQSxPQUFBLFNBQUEsR0FFQSxRQUFBLE9BQUEsS0FBQSxNQUFBLEVBQUEsWUFDQSxFQUFBLE1BQUEsRUFDQSxRQUFBLE9BQUEsR0FBQSxLQUFBLEVBQUEsV0FBQSxPQUFBLEVBQUEsYUFBQSxPQUFBLEVBQUEsYUFBQSxZQUFBLEVBQUEsb0JBQ0EsRUFBQSxVQUNBLEVBQUEsVUFDQSxFQUFBLFVBSUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEtBRUEsRUFBQSxZQUFBLE1BQUEsRUFBQSxXQUFBLGNBQUEsRUFBQSxXQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsSUFDQSxRQUFBLE9BQUEsS0FBQSxFQUFBLEdBQUEsTUFBQSxJQUNBLElBQUEsRUFBQSxFQUFBLFdBQUEsU0FBQSxFQUFBLFlBQ0EsSUFBQSxHQUFBLEVBQUEsV0FBQSxXQUFBLEVBQUEsY0FDQSxFQUFBLGNBQUEsRUFBQSxZQUNBLEVBQUEsVUFDQSxFQUFBLFlBQUEsR0FDQSxFQUFBLE1BQUEsSUFJQSxFQUFBLGVBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxHQUFBLEVBQUEsWUFBQSxVQUNBLEdBQUEsV0FBQSxTQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsY0FBQSxFQUFBLFlBQ0EsRUFBQSxXQUtBLEVBQUEsT0FBQSxXQUVBLEdBQUEsR0FDQSxFQURBLEVBQUEsRUFBQSxTQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsSUFDQSxJQUNBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxHQUFBLE1BQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLFVBQ0EsRUFBQSxNQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsU0FBQSxFQUFBLE9BQUEsRUFBQSxZQUFBLEVBQUEsR0FBQSxTQUFBLEVBQUEsWUFBQSxFQUFBLElBRUEsSUFBQSxHQUFBLElBQ0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsRUFBQSxZQUNBLEVBQUEsTUFBQSxLQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsWUFBQSxFQUFBLEdBQUEsU0FBQSxFQUFBLFlBQUEsRUFBQSxJQUdBLElBQUEsS0FDQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLEdBQUEsRUFBQSxJQUVBLEdBQUEsS0FBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxXQUFBLEdBQ0EsRUFBQSxjQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsSUFBQSxFQUNBLEVBQUEsYUFBQSxFQUFBLE1BQUEsV0FDQSxJQUFBLEVBQ0EsRUFBQSxlQUFBLEVBQUEsTUFBQSxhQURBLFFBSEEsR0FRQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQU1BLE9BTEEsS0FBQSxFQUNBLEVBQUEsRUFBQSxVQUFBLElBQUEsRUFBQSxPQUNBLElBQUEsSUFDQSxFQUFBLEVBQUEsVUFBQSxLQUFBLEVBQUEsTUFFQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLFNBR0EsRUFBQSxhQUFBLFNBQUEsRUFBQSxHQUNBLFdBQUEsRUFBQSxjQUNBLEVBQUEsZUFBQSxFQUFBLEdBRUEsRUFBQSxXQUFBLEVBQUEsSUFJQSxFQUFBLGVBQUEsU0FBQSxFQUFBLEdBQ0EsQ0FBQSxHQUFBLEdBQUEsR0FBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsV0FDQSxHQURBLEVBQUEsRUFBQSxLQUFBLE9BQ0EsRUFBQSxhQUFBLEdBQUEsRUFBQSxNQUFBLE9BQ0EsSUFBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLElBQUEsR0FHQSxFQUFBLFdBQUEsRUFBQSxTQUFBLEVBQUEsV0FBQSxJQUFBLEdBRUEsRUFBQSxPQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsV0FHQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUNBLEtBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxRQUNBLFFBQUEsT0FBQSxHQUFBLEtBQUEsRUFBQSxjQUNBLElBQUEsSUFDQSxFQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsWUFDQSxRQUFBLE9BQUEsR0FBQSxPQUFBLEVBQUEsZ0JBRUEsRUFBQSxVQUdBLEVBQUEsYUFBQSxTQUFBLEdBS0EsR0FIQSxVQUFBLEVBQUEsT0FBQSxTQUFBLGVBQUEsRUFBQSxpQkFDQSxFQUFBLGtCQUVBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsT0FDQSxZQUFBLEVBQUEsR0FBQSxTQUFBLGdCQUNBLEVBQUEsRUFBQSxVQUVBLEVBQUEsZUFBQSxXQUlBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxtQkFBQSxLQUFBLEVBQUEsV0FBQSxFQUFBLFdBQUEsRUFBQSxPQUFBLENBS0EsR0FKQSxFQUFBLGlCQUNBLEVBQUEsa0JBR0EsS0FBQSxFQUFBLFFBQUEsTUFBQSxHQUFBLE1BQUEsRUFHQSxJQUFBLEdBQUEsR0FBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsV0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQ0EsRUFBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxPQUNBLEVBQUEsVUFBQSxLQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBR0EsS0FDQSxLQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEtBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBSUEsSUFBQSxJQUFBLEVBQUEsRUFDQSxLQUFBLEdBQ0EsS0FBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsS0FDQSxLQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxLQUNBLEdBQUEsRUFBQSxJQUNBLElBQUEsR0FDQSxLQUFBLEVBQUEsUUFBQSxFQUFBLFdBQUEsRUFBQSxTQUFBLEVBQUEsV0FBQSxLQUNBLEtBQUEsRUFBQSxTQUFBLEVBQUEsV0FBQSxFQUFBLFNBQUEsRUFBQSxXQUFBLEtBQ0EsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxJQUNBLEdBQUEsRUFBQSxpQkFDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFFQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsV0EwQkEsSUFBQSxHQUFBLEVBQUEsSUFDQSxHQUFBLEtBQUEsV0FDQSxNQUFBLElBQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxPQUFBLFlBQ0EsR0FBQSxJQUFBLHFCQUFBLGVBRUEsSUFDQSxFQUFBLEtBQUEsT0FBQSxRQUNBLEVBQUEsS0FBQSxXQUFBLFFBQ0EsRUFBQSxHQUFBLFFBQUEsUUFFQSxNQUdBLElBQUEsR0FBQSxFQUFBLE9BQ0EsR0FBQSxRQUFBLFdBQ0EsR0FBQSxFQUFBLFdBQ0EsRUFBQSxJQUFBLFFBQUEsR0FFQSxJQUdBLElBQUEsR0FBQSxFQUFBLElBQ0EsR0FBQSxLQUFBLFdBQ0EsSUFDQSxXQUFBLFdBQ0EsRUFBQSxTQUFBLEdBQUEsRUFBQSxhQUFBLFlBQUEsRUFBQSxjQUNBLEVBQUEsVUFDQSxFQUFBLEdBQUEsVUFBQSxFQUFBLGNBS0EsSUFBQSxHQUFBLEVBQUEsSUFTQSxPQVJBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLElBQUEsRUFBQSxhQUFBLFlBQUEsRUFBQSxjQUNBLEVBQUEsVUFDQSxFQUFBLElBQUEsVUFBQSxFQUFBLFlBRUEsRUFBQSxJQUdBLEVBM1FBLEdBQ0EsSUFEQSxRQUFBLFFBQUEsRUFBQSxTQUFBLE1BQ0EsOEJBQUEsS0FBQSxFQUFBLFVBQUEsWUFDQSxFQUFBLGVBQUEsR0FBQSxVQUFBLENBOFFBLE9BN1FBLEdBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxJQTRRQSxFQUFBLFNBQUEsRUFDQSxNQU9BLFVBQUEsZ0JBQUEsVUFBQSxTQUFBLEtBQUEsVUFBQSxhQUFBLGNBQUEsY0FBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxDQUFBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsRUFBQSw4QkFBQSxLQUFBLEVBQUEsVUFBQSxVQUNBLEdBQUEsdUJBQUEsRUFBQSxXQUVBLE9BQ0EsU0FBQSxNQUNBLFFBQUEsVUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FHQSxHQUFBLElBQUEsTUFBQSxFQUFBLFdBQUEsRUFDQSxTQUFBLFNBQUEsWUFBQSxZQUFBLFFBQUEsVUFBQSxXQUFBLE9BQUEsWUFBQSxXQUFBLFlBQUEsV0FBQSxhQUFBLGtCQUFBLFlBQUEsV0FBQSxhQUFBLFNBQUEsaUJBQUEsU0FBQSxHQUNBLFFBQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsTUFJQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxRQUFBLFVBQUEsS0FDQSxRQUFBLFNBQUEsS0FBQSxJQUFBLEVBQUEsTUFBQSxxQkFDQSxLQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsVUFJQSxJQUFBLEVBQUEsV0FBQSxFQUFBLGFBQUEsRUFBQSxXQUFBLFFBQ0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLFFBR0EsSUFBQSxHQUFBLEdBQUEsT0FBQSxFQUFBLFdBQUEsS0FBQSxFQUFBLE1BR0EsU0FBQSxTQUFBLFVBQUEsV0FBQSxTQUFBLEdBRUEsUUFBQSxVQUFBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEdBRUEsRUFBQSxTQUFBLEdBREEsUUFBQSxHQUNBLEdBQUEsT0FBQSxZQUFBLEtBQUEsRUFBQSxHQUNBLFFBQUEsU0FBQSxJQUFBLEVBQUEsTUFBQSxXQUNBLEdBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsSUFFQSxFQUFBLE1BQUEsRUFBQSxHQUFBLE1BQUEsS0FBQSxFQUFBLEVBQUEsS0FFQSxNQUFBLEVBQUEsU0FBQSxLQUFBLEVBQUEsYUFLQSxFQUFBLE9BQUEsRUFBQSxRQUFBLFdBRUEsRUFBQSxPQUFBLEVBQUEsY0FDQSxHQUdBLEVBQUEsU0FBQSxRQUFBLFNBQUEsR0FHQSxJQUFBLEVBRUEsV0FEQSxHQUFBLGFBQUEsUUFBQSxFQUdBLElBQUEsR0FBQSxRQUFBLE9BQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsV0FDQSxLQUFBLEdBQUEsTUFBQSxFQUFBLFdBQ0EsRUFBQSxhQUFBLFFBQUEsT0FDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFdBQUEsRUFBQSxTQUFBLEVBQUEsV0FBQSxFQUFBLE9BQ0EsR0FBQSxhQUFBLE9BQUEsR0FFQSxJQUFBLEVBQUEsV0FBQSxHQUVBLE1BQUEsV0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsaUJBQUEsRUFBQSxZQUNBLFdBQUEsRUFBQSxTQUNBLEVBQUEsV0FBQSxVQUNBLFFBQUEsRUFBQSxTQUNBLEVBQUEsV0FBQSxjQUVBLEdBQUEsTUFBQSxFQUFBLGNBS0EsRUFBQSxZQUFBLEtBQUEsU0FBQSxHQUVBLEdBQUEsRUFhQSxPQVhBLEdBREEsUUFBQSxZQUFBLElBQUEsT0FBQSxFQUNBLElBQ0EsUUFBQSxPQUFBLEdBQ0EsRUFDQSxXQUFBLEVBQUEsU0FDQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsaUJBRUEsR0FBQSxNQUFBLEdBSUEsRUFBQSxXQUFBLEVBQ0EsRUFBQSxhQUlBLEVBQUEsUUFBQSxXQUVBLEVBQUEsS0FBQSxFQUFBLFlBQUEsTUFBQSxFQUFBLFdBQUEsV0FBQSxHQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsY0FJQSxFQUFBLElBQUEsV0FBQSxXQUNBLEdBQUEsRUFBQSxVQUNBLEVBQUEsS0FDQSxFQUFBLFlBU0EsUUFBQSxPQUFBLDBCQUFBLHNDQUVBLFNBQUEsV0FBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsVUFBQSxVQUNBLFlBQUEsR0FDQSxZQUFBLFVBQ0EsWUFBQSxVQUNBLFdBQUEsRUFDQSxRQUFBLEVBQ0EsVUFBQSxNQUNBLFNBQUEsMkJBQ0EsaUJBQUEsRUFDQSxRQUFBLGNBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBQ0EsTUFBQSxHQUNBLEtBQUEsR0FDQSxNQUFBLEVBR0EsTUFBQSxNQUFBLFVBQUEsYUFBQSxXQUFBLEtBQUEsaUJBQUEsUUFBQSxXQUFBLGFBQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQU1BLFFBQUEsR0FBQSxFQUFBLEdBdVNBLFFBQUEsS0FDQSxNQUFBLFNBQUEsRUFBQSxVQUNBLEVBQUEsT0FBQSxFQUFBLE9BQUEsSUFBQSxFQUFBLElBRUEsRUFBQSxTQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsSUFJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQUEsSUFFQSxRQUFBLEVBQUEsSUFDQSxJQUFBLFFBQ0EsR0FDQSxJQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxNQUVBLE1BQ0EsS0FBQSxTQUNBLEdBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxPQUNBLEtBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFFQSxNQUNBLEtBQUEsT0FDQSxHQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFDQSxLQUFBLEVBQUEsS0FBQSxFQUVBLE1BQ0EsU0FDQSxHQUNBLElBQUEsRUFBQSxJQUFBLEVBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxHQUtBLElBQUEsRUFBQSxHQUNBLE1BQUEsRUFJQSxJQUFBLFFBQUEsRUFBQSxJQUFBLFdBQUEsRUFBQSxHQUNBLE9BQUEsRUFBQSxJQUNBLElBQUEsT0FDQSxFQUFBLEtBQUEsRUFBQSxJQUNBLE1BQ0EsS0FBQSxRQUNBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLE1BRUEsSUFBQSxTQUFBLEVBQUEsSUFBQSxVQUFBLEVBQUEsR0FDQSxPQUFBLEVBQUEsSUFDQSxJQUFBLE1BQ0EsRUFBQSxJQUFBLEVBQUEsSUFBQSxDQUNBLE1BQ0EsS0FBQSxTQUNBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxPQUlBLE1BQUEsR0FuV0EsR0FBQSxNQUdBLEVBQUEsRUFBQSxHQUFBLFNBQUEsY0FDQSxFQUFBLEVBQUEsU0FBQSxRQUFBLFVBQUEsRUFBQSxFQUNBLEdBQUEsU0FBQSxFQUFBLEVBQUEsU0FDQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsUUFBQSxFQUFBLE1BQ0EsR0FBQSxPQUFBLFFBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxRQUlBLEVBQUEsUUFDQSxFQUFBLE9BQUEsTUFBQSxFQUFBLE9BSUEsRUFBQSxNQUFBLFdBQ0EsRUFBQSxhQUFBLFdBQ0EsRUFBQSxVQUdBLEVBQUEsTUFBQSxXQUNBLEVBQUEsYUFBQSxXQUNBLEVBQUEsVUFHQSxFQUFBLFFBQUEsV0FDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLFlBR0EsRUFBQSxTQUFBLEVBQUEsVUFBQSxDQUdBLElBQUEsR0FBQSxDQUdBLEdBQUEsa0JBQ0EsRUFBQSxTQUFBLEVBQUEsU0FBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQ0EsT0FBQSxHQUFBLEVBQUEsaUJBQ0EsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsc0JBQUEsRUFBQSxHQUdBLE9BRkEsR0FBQSxTQUFBLEVBQUEsRUFBQSxvQkFBQSxFQUFBLEtBQ0EsRUFBQSxXQUFBLFdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxjQU1BLElBQUEsR0FBQSxFQUFBLEVBQUEsQ0FrVEEsT0FqVEEsR0FBQSxTQUFBLEtBQUEsU0FBQSxHQUNBLFFBQUEsU0FBQSxLQUFBLEVBQUEsRUFBQSxNQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLG1CQUNBLEVBQUEsRUFBQSxNQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsU0FHQSxFQUFBLEtBQUEsV0FHQSxFQUFBLE9BQUEsUUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLE9BQ0EsS0FBQSxFQUFBLE1BQ0EsS0FBQSxFQUFBLFFBVUEsU0FBQSxFQUFBLFVBQ0EsRUFBQSxFQUNBLFFBQUEsVUFBQSxFQUFBLFdBQ0EsRUFBQSxFQUFBLFVBQ0EsRUFBQSxZQUNBLEVBQUEsRUFBQSxFQUFBLFdBSUEsSUFBQSxHQUFBLEVBQUEsUUFBQSxNQUFBLElBQ0EsU0FBQSxRQUFBLEVBQUEsU0FBQSxHQUNBLFVBQUEsRUFDQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFFBQ0EsV0FBQSxJQUNBLEVBQUEsR0FBQSxVQUFBLEVBQUEsYUFBQSxRQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsVUFBQSxFQUFBLGFBQUEsT0FBQSxFQUFBLE9BQ0EsV0FBQSxHQUFBLFVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxhQUFBLFlBQUEsRUFBQSw2QkFLQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLFFBQUEsVUFBQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUlBLEVBQUEsTUFDQSxFQUFBLGFBQUEsV0FDQSxVQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFVBTUEsRUFBQSxRQUFBLFdBSUEsSUFBQSxHQURBLEdBQUEsRUFBQSxRQUFBLE1BQUEsS0FDQSxFQUFBLEVBQUEsT0FBQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxXQUFBLEVBQ0EsRUFBQSxJQUFBLFFBQUEsRUFBQSxRQUNBLFdBQUEsSUFDQSxFQUFBLElBQUEsVUFBQSxFQUFBLGFBQUEsUUFBQSxFQUFBLE9BQ0EsRUFBQSxJQUFBLFVBQUEsRUFBQSxhQUFBLE9BQUEsRUFBQSxPQUNBLFdBQUEsR0FBQSxVQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsYUFBQSxZQUFBLEVBQUEsMkJBS0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxNQUlBLGFBQUEsR0FHQSxFQUFBLFlBSUEsRUFBQSxNQUFBLFdBSUEsTUFGQSxjQUFBLEdBQ0EsRUFBQSxLQUNBLEVBQUEsT0FBQSxFQUFBLE1BQUEsVUFJQSxFQUFBLFdBQUEsV0FDQSxPQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsTUFBQSxPQUxBLEVBQUEsUUFTQSxFQUFBLEtBQUEsV0FFQSxFQUFBLE1BQUEsRUFBQSxZQUFBLGVBQUEsRUFDQTtHQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsVUFBQSxLQUFBLENBR0EsSUFBQSxFQUFBLFNBRUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLGNBSUEsRUFBQSxLQUFBLElBQUEsVUFBQSxLQUFBLFVBQUEsUUFBQSxRQUFBLFdBQUEsV0FBQSxTQUFBLEVBQUEsV0FHQSxFQUFBLFdBQUEsRUFBQSxTQUFBLEVBQUEsV0FFQSxFQUFBLE1BQUEsRUFBQSxTQUFBLEVBQUEsWUFBQSxJQUFBLEVBQUEsTUFFQSxFQUFBLGFBQUEsRUFBQSxTQUFBLEVBQUEsYUFFQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsV0FDQSxFQUFBLE1BQUEsRUFBQSxZQUFBLFFBQUEsS0FFQSxFQUFBLFNBQUEsRUFBQSxVQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsU0FBQSxFQUFBLFVBQ0EsRUFBQSxXQUNBLEVBQUEsa0JBR0EsRUFBQSxLQUFBLFdBQUEsY0FJQSxFQUFBLFdBQ0EsVUFBQSxFQUFBLFNBQ0EsRUFBQSxRQUNBLEVBQUEsR0FBQSxRQUFBLEVBQUEsV0FFQSxFQUFBLEdBQUEsUUFBQSxFQUFBLGlCQU1BLEVBQUEsTUFBQSxXQUlBLE1BRkEsY0FBQSxHQUNBLEVBQUEsTUFDQSxFQUFBLE9BQUEsRUFBQSxNQUFBLFVBR0EsRUFBQSxXQUFBLFdBQ0EsUUFBQSxHQUNBLEVBQUEsUUFFQSxFQUFBLE1BQUEsT0FOQSxFQUFBLFFBVUEsRUFBQSxLQUFBLFNBQUEsR0FFQSxFQUFBLFdBQ0EsRUFBQSxNQUFBLEVBQUEsWUFBQSxlQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsV0FJQSxNQUhBLEdBQUEsTUFBQSxFQUFBLFlBQUEsUUFBQSxHQUdBLEdBQUEsVUFBQSxFQUFBLFFBQ0EsRUFBQSxHQUFBLE9BREEsU0FLQSxFQUFBLFNBQUEsRUFBQSxVQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsU0FBQSxFQUFBLFVBR0EsRUFBQSxVQUFBLE9BQUEsR0FDQSxFQUFBLElBQUEsUUFBQSxFQUFBLFlBS0EsRUFBQSxPQUFBLFdBQ0EsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLFNBR0EsRUFBQSxNQUFBLFdBQ0EsRUFBQSxHQUFBLFNBS0EsRUFBQSxnQkFBQSxXQUNBLEdBQUEsRUFBQSxDQUdBLEdBQUEsR0FBQSxJQUdBLEVBQUEsRUFBQSxLQUFBLGVBQ0EsRUFBQSxFQUFBLEtBQUEsZ0JBR0EsRUFBQSxFQUFBLEVBQUEsVUFBQSxFQUFBLEVBQUEsRUFHQSxHQUFBLEtBQUEsS0FDQSxFQUFBLE1BQUEsS0FDQSxFQUFBLElBQUEsS0FJQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEtBQUEsRUFBQSxPQUFBLEVBQUEsV0FDQSxFQUFBLE9BQ0EsRUFBQSxvQkFJQSxFQUFBLGNBQUEsU0FBQSxHQUNBLEtBQUEsRUFBQSxRQUNBLEVBQUEsR0FBQSxPQUNBLEVBQUEsb0JBSUEsRUFBQSx5QkFBQSxTQUFBLEdBQ0EsRUFBQSxpQkFDQSxFQUFBLGtCQUVBLEVBQUEsU0FBQSxFQUFBLEdBQUEsT0FBQSxFQUFBLEdBQUEsU0FzRUEsRUFNQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsU0FBQSxTQUFBLEdBQUEsR0FBQSxpQkFBQSxJQUdBLFFBQUEsR0FBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsSUFBQSxJQUNBLEtBQUEsU0FBQSxHQUNBLE1BQUEsU0FBQSxTQUFBLElBQ0EsRUFBQSxJQUFBLEVBQUEsRUFBQSxNQUNBLEVBQUEsTUFFQSxJQTdYQSxHQUFBLEdBQUEsT0FBQSxVQUFBLEtBQ0EsRUFBQSxlQUFBLEdBQUEsU0FDQSxFQUFBLGFBK1hBLE9BQUEsT0FNQSxVQUFBLGFBQUEsVUFBQSxZQUFBLE9BQUEsV0FBQSxRQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLE9BQ0EsU0FBQSxNQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBR0EsR0FBQSxJQUFBLE1BQUEsRUFDQSxTQUFBLFNBQUEsV0FBQSxrQkFBQSxZQUFBLFlBQUEsU0FBQSxRQUFBLFVBQUEsV0FBQSxPQUFBLFlBQUEsT0FBQSxlQUFBLFNBQUEsR0FDQSxRQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLE1BSUEsUUFBQSxTQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLFlBQUEsR0FDQSxRQUFBLFVBQUEsSUFBQSxFQUFBLFdBQ0EsR0FBQSxFQUFBLHdCQU1BLEVBQUEsV0FBQSxFQUFBLE9BQUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsT0FBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBRUEsUUFBQSxVQUFBLElBQUEsRUFBQSxXQUNBLEdBQUEsRUFBQSxzQkFFQSxHQUdBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLFNBQUEsR0FDQSxHQUFBLFFBQUEsVUFBQSxLQUNBLFFBQUEsU0FBQSxLQUFBLElBQUEsRUFBQSxNQUFBLGtCQUNBLEtBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxTQUlBLElBQUEsR0FBQSxFQUFBLEVBQUEsRUFHQSxHQUFBLElBQUEsV0FBQSxXQUNBLEdBQUEsRUFBQSxVQUNBLEVBQUEsS0FDQSxFQUFBLFlBU0EsUUFBQSxPQUFBLDRCQUFBLHlCQUFBLHdDQUVBLFNBQUEsYUFBQSxXQUVBLEdBQUEsR0FBQSxLQUFBLFVBQ0EsVUFBQSxVQUNBLFlBQUEsWUFDQSxZQUFBLGFBQ0EsVUFBQSxjQUNBLFNBQUEsK0JBQ0EsUUFBQSxRQUNBLFdBQUEsRUFDQSxVQUFBLEVBQ0EsTUFBQSxFQUNBLE1BQUEsRUFDQSxVQUFBLEVBQ0EsT0FBQSxTQUNBLE1BQUEsRUFHQSxNQUFBLE1BQUEsVUFBQSxhQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsR0FJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxNQUdBLEVBQUEsUUFBQSxVQUFBLEVBQUEsRUFFQSxHQUFBLEVBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLE1BRUEsR0FBQSxjQUFBLFdBQ0EsRUFBQSxZQUNBLEVBQUEsYUFBQSxHQUVBLEVBQUEsZ0JBRUEsRUFBQSxVQUFBLFNBQUEsR0FDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLFNBQUEsTUFJQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsYUFBQSxXQUNBLEVBQUEsT0FBQSxNQUlBLEVBQUEsV0FBQSxXQUNBLE1BQUEsR0FBQSxjQUtBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxjQUFBLEVBQUEsU0FDQSxFQUFBLGFBQUEsSUFJQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsYUFBQSxHQUdBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEtBQ0EsR0FBQSxjQUFBLEdBQ0EsRUFBQSxVQUNBLEVBQUEsZ0JBQ0EsR0FBQSxFQUFBLFVBRUEsRUFBQSxNQUFBLEVBQUEsWUFBQSxVQUFBLEVBQUEsSUFLQSxFQUFBLFdBQUEsV0FDQSxNQUFBLEdBQUEsV0FBQSxFQUlBLEVBQUEsU0FBQSxRQUFBLFFBQUEsU0FBQSxFQUFBLGFBQUEsRUFBQSxXQUFBLFFBQUEsRUFBQSxZQUhBLEVBQUEsU0FBQSxRQU1BLEVBQUEsVUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsRUFBQSxLQUNBLEVBQUEsU0FBQSxHQUFBLFFBQUEsSUFFQSxLQUFBLEVBQUEsR0FDQSxNQUFBLEtBR0EsRUFBQSxhQUFBLFNBQUEsR0FFQSxFQUFBLGlCQUNBLEVBQUEsbUJBR0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxhQUFBLEtBQUEsRUFBQSxXQUdBLEVBQUEsZUFDQSxFQUFBLGlCQUNBLEVBQUEsbUJBSUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLE9BQ0EsRUFBQSxPQUFBLEVBQUEsY0FJQSxLQUFBLEVBQUEsU0FBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLGVBQ0EsS0FBQSxFQUFBLFNBQUEsRUFBQSxhQUFBLEVBQUEsU0FBQSxPQUFBLEVBQUEsRUFBQSxlQUNBLFFBQUEsWUFBQSxFQUFBLGdCQUFBLEVBQUEsYUFBQSxHQUNBLEVBQUEsV0FLQSxJQUFBLEdBQUEsRUFBQSxJQUNBLEdBQUEsS0FBQSxXQUNBLElBQ0EsV0FBQSxXQUNBLEVBQUEsU0FBQSxHQUFBLFlBQUEsRUFBQSxjQUNBLEVBQUEsVUFDQSxFQUFBLEdBQUEsVUFBQSxFQUFBLGNBS0EsSUFBQSxHQUFBLEVBQUEsSUFTQSxPQVJBLEdBQUEsS0FBQSxXQUNBLEVBQUEsU0FBQSxJQUFBLFlBQUEsRUFBQSxjQUNBLEVBQUEsVUFDQSxFQUFBLElBQUEsVUFBQSxFQUFBLFlBRUEsS0FHQSxFQS9IQSxRQUFBLFFBQUEsRUFBQSxTQUFBLEtBb0lBLE9BREEsR0FBQSxTQUFBLEVBQ0EsTUFNQSxVQUFBLGVBQUEsVUFBQSxTQUFBLEtBQUEsYUFBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxRQUVBLFFBQ0EsU0FBQSxNQUNBLFFBQUEsVUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FHQSxHQUFBLElBQUEsTUFBQSxFQUNBLFNBQUEsU0FBQSxZQUFBLFlBQUEsUUFBQSxVQUFBLFdBQUEsT0FBQSxZQUFBLFdBQUEsU0FBQSxRQUFBLFlBQUEsZUFBQSxjQUFBLFNBQUEsR0FDQSxRQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLEtBSUEsSUFBQSxHQUFBLEVBQUEsUUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxTQUNBLEtBQUEsR0FBQSxNQUFBLEVBQUEsZUFDQSxJQUFBLEdBQUEsY0FBQSxFQUNBLElBQUEsR0FBQSxFQUFBLEdBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUdBLElBQUEsRUFBQSxhQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLFFBQUEsT0FBQSxJQUFBLFFBQUEsVUFBQSxJQUFBLE1BQ0EsR0FBQSxPQUFBLEVBQUEsV0FFQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxHQUNBLEVBQUEsY0FFQSxHQUlBLEVBQUEsT0FBQSxFQUFBLFFBQUEsU0FBQSxHQUVBLEVBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxTQUFBLEdBR0EsR0FBQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUVBLFdBREEsR0FBQSxjQUFBLEVBQUEsV0FBQSxVQUFBLEVBQUEsRUFBQSxXQUFBLE9BQUEsR0FHQSxHQUFBLE9BQUEsSUFBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEdBQ0EsSUFBQSxHQUFBLEVBQUEsWUFDQSxJQUFBLEVBQUEsT0FBQSxJQUVBLElBQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxRQUFBLE1BQ0EsR0FBQSxFQUFBLE9BQUEsR0FFQSxFQUFBLGVBS0EsRUFBQSxRQUFBLFdBRUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxZQUFBLE1BQUEsR0FBQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLGFBQ0EsRUFBQSxRQUFBLFVBQUEsR0FBQSxFQUFBLE9BQUEsU0FBQSxHQUFBLE1BQUEsRUFBQSxVQUNBLEdBQUEsUUFBQSxTQUFBLEdBQUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsUUFBQSxpQkFBQSxJQUFBLFNBSUEsRUFBQSxJQUFBLFdBQUEsV0FDQSxHQUFBLEVBQUEsVUFDQSxFQUFBLEtBQ0EsRUFBQSxhQVFBLE9BQUEsVUM3cklBLFdBQ0EsWUFHQSxTQUFBLE9BQUEsd0JBQUEsS0FBQSxpQkFBQSxTQUFBLEdBRUEsRUFBQSxJQUFBLHVCQUFBLGtRQUtBLFFBQUEsT0FBQSx3QkFBQSxLQUFBLGlCQUFBLFNBQUEsR0FFQSxFQUFBLElBQUEsdUJBQUEsZ2NBS0EsUUFBQSxPQUFBLDZCQUFBLEtBQUEsaUJBQUEsU0FBQSxHQUVBLEVBQUEsSUFBQSxpQ0FBQSxrdUNBS0EsUUFBQSxPQUFBLDJCQUFBLEtBQUEsaUJBQUEsU0FBQSxHQUVBLEVBQUEsSUFBQSw2QkFBQSw4Y0FLQSxRQUFBLE9BQUEsd0JBQUEsS0FBQSxpQkFBQSxTQUFBLEdBRUEsRUFBQSxJQUFBLHVCQUFBLGdjQUtBLFFBQUEsT0FBQSwwQkFBQSxLQUFBLGlCQUFBLFNBQUEsR0FFQSxFQUFBLElBQUEsMkJBQUEsK0tBS0EsUUFBQSxPQUFBLHlCQUFBLEtBQUEsaUJBQUEsU0FBQSxHQUVBLEVBQUEsSUFBQSx5QkFBQSxvcUJBS0EsUUFBQSxPQUFBLHNCQUFBLEtBQUEsaUJBQUEsU0FBQSxHQUVBLEVBQUEsSUFBQSxtQkFBQSxtVUFLQSxRQUFBLE9BQUEsNkJBQUEsS0FBQSxpQkFBQSxTQUFBLEdBRUEsRUFBQSxJQUFBLGlDQUFBLGdpRUFLQSxRQUFBLE9BQUEsNEJBQUEsS0FBQSxpQkFBQSxTQUFBLEdBRUEsRUFBQSxJQUFBLCtCQUFBLHdTQUtBLFFBQUEsT0FBQSwwQkFBQSxLQUFBLGlCQUFBLFNBQUEsR0FFQSxFQUFBLElBQUEsMkJBQUEsd0lBS0EsT0FBQSxVQzlFQSxXQWlLQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBSUEsSUFIQSxHQUFBLElBQUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUVBLEVBQUEsR0FDQSxHQUFBLEVBQUEsS0FBQSxFQUNBLE1BQUEsRUFHQSxPQUFBLEdBYUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLFNBQUEsRUFHQSxJQUZBLEVBQUEsRUFBQSxNQUVBLFdBQUEsR0FBQSxNQUFBLEVBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxFQUVBLFdBQUEsR0FBQSxVQUFBLElBQ0EsRUFBQSxTQUVBLElBQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLENBR0EsT0FGQSxJQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsR0FFQSxVQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FVQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxNQUNBLFFBQUEsRUFFQSxJQUFBLFdBQUEsR0FBQSxNQUFBLEVBQ0EsRUFBQSxJQUFBLE1BQ0EsQ0FDQSxVQUFBLEdBQUEsVUFBQSxJQUNBLEVBQUEsU0FFQSxJQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxLQUFBLEVBQUEsTUFFQSxXQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsUUFBQSxLQUFBLEdBRUEsRUFBQSxJQUFBLEdBY0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSxHQUFBLFdBQUEsR0FhQSxRQUFBLEdBQUEsRUFBQSxHQU1BLElBTEEsR0FBQSxHQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFNBRUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFFQSxJQUFBLElBQUEsRUFBQSxDQUNBLEdBQUEsRUFBQSxHQUFBLG1CQUFBLEdBQ0EsTUFBQSxFQUVBLElBQUEsRUFBQSxHQUFBLG1CQUFBLEdBQ0EsTUFBQSxJQVVBLE1BQUEsR0FBQSxNQUFBLEVBQUEsTUFXQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsZ0JBQUEsSUFDQSxHQUFBLGdCQUFBLElBQUEsR0FBQSxnQkFBQSxHQUNBLE9BQUEsQ0FFQSxJQUFBLEdBQUEsR0FDQSxHQUFBLFNBQUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBLFdBQUEsQ0FFQSxJQUFBLEdBQUEsR0FLQSxLQUpBLEVBQUEsTUFBQSxFQUNBLEVBQUEsTUFBQSxFQUNBLEVBQUEsS0FBQSxJQUVBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxHQUVBLE9BQUEsR0FZQSxRQUFBLEdBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxHQVVBLFFBQUEsS0FDQSxNQUFBLEdBQUEsVUFVQSxRQUFBLEtBQ0EsTUFBQSxHQUFBLFFBQ0EsTUFBQSxLQUNBLE1BQUEsS0FDQSxTQUFBLEtBQ0EsU0FBQSxFQUNBLE1BQUEsRUFDQSxRQUFBLEVBQ0EsT0FBQSxLQUNBLE9BQUEsS0FDQSxLQUFBLEtBQ0EsT0FBQSxLQUNBLFFBQUEsRUFDQSxXQUFBLEVBQ0EsTUFBQSxNQVdBLFFBQUEsR0FBQSxHQUNBLEVBQUEsT0FBQSxFQUNBLEVBQUEsT0FBQSxHQUNBLEVBQUEsS0FBQSxHQVdBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQ0EsSUFDQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEtBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxLQUFBLEdBa0JBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsR0FDQSxtQkFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFNQSxLQUpBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLEtBRUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFFQSxPQUFBLEdBZUEsUUFBQSxHQUFBLEdBNEpBLFFBQUEsR0FBQSxHQUVBLE1BQUEsSUFBQSxnQkFBQSxLQUFBLEdBQUEsSUFBQSxHQUFBLEtBQUEsRUFBQSxlQUFBLEVBQUEsR0FBQSxHQUFBLEdBWUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxLQUFBLFlBQUEsRUFDQSxLQUFBLFlBQUEsRUF1R0EsUUFBQSxHQUFBLEdBS0EsUUFBQSxLQUdBLEdBQUEsRUFBQSxDQUlBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxNQUFBLEVBQUEsV0FJQSxHQUFBLGVBQUEsR0FBQSxDQUVBLEdBQUEsR0FBQSxFQUFBLEVBQUEsV0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsVUFDQSxPQUFBLElBQUEsR0FBQSxFQUFBLEVBRUEsTUFBQSxHQUFBLE1BQUEsRUFBQSxHQUFBLFdBdEJBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBdUJBLE9BREEsSUFBQSxFQUFBLEdBQ0EsRUFnQkEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLElBQUEsbUJBQUEsR0FDQSxNQUFBLEdBSUEsR0FBQSxHQUFBLEdBQUEsRUFDQSxLQUFBLEVBcUJBLE1BQUEsRUFwQkEsSUFBQSxHQUFBLEdBQUEsS0FBQSxFQUNBLEtBQUEsRUFBQSxHQUNBLE1BQUEsRUFFQSxJQUFBLEdBQUEsR0FBQSxFQUNBLFFBQUEsR0FDQSxJQUFBLEdBQ0EsSUFBQSxHQUNBLE1BQUEsSUFBQSxJQUFBLEVBRUEsS0FBQSxHQUNBLElBQUEsR0FDQSxNQUFBLElBQUEsR0FBQSxFQUVBLEtBQUEsR0FHQSxNQUZBLEdBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLElBQ0EsRUFBQSxVQUFBLEVBQUEsVUFDQSxFQUtBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsSUFBQSxFQUFBLENBRUEsR0FBQSxJQUFBLENBQ0EsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBR0EsS0FEQSxHQUFBLEdBQUEsRUFBQSxPQUNBLEtBQ0EsR0FBQSxFQUFBLElBQUEsRUFDQSxNQUFBLEdBQUEsRUFHQSxHQUFBLEVBQUEsRUFBQSxFQUFBLGVBRUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEVBWUEsT0FUQSxLQUNBLEdBQUEsS0FBQSxFQUFBLFdBQ0EsRUFBQSxNQUFBLEVBQUEsT0FFQSxHQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsTUFBQSxFQUFBLFFBSUEsR0FLQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsSUFHQSxFQUFBLEdBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsS0FHQSxJQUNBLEVBQUEsR0FDQSxFQUFBLElBRUEsR0FoQkEsRUE0QkEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxJQUFBLEdBQUEsR0FBQSxNQTRCQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxrQkFBQSxHQUNBLE1BQUEsR0FHQSxJQUFBLG1CQUFBLE1BQUEsYUFBQSxJQUNBLE1BQUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxZQUNBLElBQUEsbUJBQUEsS0FDQSxHQUFBLFlBQ0EsR0FBQSxFQUFBLE1BRUEsRUFBQSxJQUFBLEdBQUEsWUFDQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEdBQUEsS0FBQSxFQUNBLElBQUEsWUFDQSxHQUFBLEVBQUEsS0FBQSxJQUVBLElBRUEsRUFBQSxFQUFBLEtBQUEsR0FDQSxHQUFBLEVBQUEsSUFLQSxHQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxFQUVBLFFBQUEsR0FDQSxJQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsRUFBQSxHQUVBLEtBQUEsR0FDQSxNQUFBLFVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxHQUVBLEtBQUEsR0FDQSxNQUFBLFVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxLQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUdBLE1BQUEsSUFBQSxFQUFBLEdBWUEsUUFBQSxHQUFBLEdBY0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLElBQUEsTUFBQSxFQUFBLFdBRUEsSUFBQSxHQUFBLEtBQ0EsSUFBQSxFQUFBLEVBQUEsWUFDQSxHQUNBLEdBQUEsTUFBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLE9BQUEsR0FFQSxNQURBLElBQUEsR0FDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxHQU9BLElBSkEsSUFBQSxFQUFBLFdBQ0EsSUFDQSxFQUFBLEVBQUEsSUFFQSxlQUFBLEdBQUEsQ0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLElBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxFQUNBLE9BQUEsSUFBQSxHQUFBLEVBQUEsRUFFQSxNQUFBLEdBQUEsTUFBQSxFQUFBLEdBdENBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBRUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxDQThCQSxPQURBLElBQUEsRUFBQSxHQUNBLEVBYUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUNBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFDQSxJQUVBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFDQSxFQUFBLEVBQ0EsRUFBQSxHQUVBLEdBQUEsRUFHQSxPQUFBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEtBQUEsR0FNQSxNQUhBLElBQ0EsRUFBQSxHQUVBLEVBZUEsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBS0EsSUFKQSxHQUFBLElBQUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUNBLE9BRUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsZ0JBQUEsSUFBQSxnQkFBQSxHQUFBLFNBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxDQUVBLElBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUVBLElBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxNQUdBLEtBREEsRUFBQSxRQUFBLElBQ0EsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE9BRUEsSUFDQSxFQUFBLEtBQUEsR0FHQSxNQUFBLEdBaUJBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQ0EsSUFBQSxtQkFBQSxHQUNBLFFBQUEsRUFJQSxHQUFBLElBQUEsRUFFQSxNQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxDQUVBLElBQUEsU0FBQSxHQUNBLFFBQUEsRUFHQSxNQUFBLElBQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxHQUFBLEVBQUEsSUFDQSxPQUFBLENBSUEsSUFBQSxNQUFBLEdBQUEsTUFBQSxFQUNBLE1BQUEsS0FBQSxDQUdBLElBQUEsR0FBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEdBQUEsS0FBQSxFQVFBLElBTkEsR0FBQSxJQUNBLEVBQUEsR0FFQSxHQUFBLElBQ0EsRUFBQSxHQUVBLEdBQUEsRUFDQSxPQUFBLENBRUEsUUFBQSxHQUNBLElBQUEsR0FDQSxJQUFBLEdBR0EsT0FBQSxJQUFBLENBRUEsS0FBQSxHQUVBLE1BQUEsS0FBQSxFQUFBLElBQUEsRUFFQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLENBRUEsS0FBQSxHQUNBLElBQUEsR0FHQSxNQUFBLElBQUEsR0FBQSxHQUVBLEdBQUEsR0FBQSxHQUFBLENBQ0EsS0FBQSxFQUFBLENBRUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLGVBQ0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxjQUVBLElBQUEsR0FBQSxFQUNBLE1BQUEsSUFBQSxFQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFHQSxJQUFBLEdBQUEsRUFDQSxPQUFBLENBR0EsSUFBQSxHQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsV0FHQSxJQUFBLEdBQUEsS0FBQSxHQUFBLElBQUEsWUFBQSxJQUFBLEdBQUEsSUFBQSxZQUFBLEtBQ0EsZUFBQSxJQUFBLGVBQUEsR0FFQSxPQUFBLEVBTUEsR0FBQSxJQUFBLENBQ0EsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBR0EsS0FEQSxHQUFBLEdBQUEsRUFBQSxPQUNBLEtBQ0EsR0FBQSxFQUFBLElBQUEsRUFDQSxNQUFBLEdBQUEsSUFBQSxDQUdBLElBQUEsR0FBQSxDQVFBLElBUEEsR0FBQSxFQUdBLEVBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxHQUdBLEdBTUEsR0FKQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsRUFFQSxHQUFBLEVBRUEsS0FBQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBRUEsSUFBQSxFQUNBLEtBQUEsT0FDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsVUFJQSxNQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLFdBT0EsSUFBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsRUFBQSxJQUVBLElBRUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxJQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFKQSxTQVFBLElBQUEsR0FFQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxFQUFBLEdBRUEsSUFBQSxFQUFBLEdBRkEsUUFjQSxPQVBBLEdBQUEsTUFDQSxFQUFBLE1BRUEsSUFDQSxFQUFBLEdBQ0EsRUFBQSxJQUVBLEVBZUEsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxHQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUNBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUVBLElBQUEsS0FBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLElBQUEsQ0FHQSxJQURBLEdBQUEsR0FBQSxFQUFBLE9BQ0EsS0FDQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsQ0FDQSxFQUFBLEVBQUEsRUFDQSxPQUdBLElBQUEsRUFBQSxDQUNBLEdBQUEsRUFDQSxLQUNBLEVBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxtQkFBQSxNQUNBLEVBQUEsSUFHQSxJQUNBLEVBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsTUFHQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FHQSxHQUNBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxRQUlBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsR0FDQSxtQkFBQSxLQUNBLEVBQUEsSUFHQSxtQkFBQSxLQUNBLEVBQUEsRUFHQSxHQUFBLEdBQUEsSUFjQSxRQUFBLElBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLE1BQUEsRUFBQSxFQUFBLElBY0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUNBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQ0EsS0FFQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBQUEsRUFDQSxFQUFBLEdBQUEsRUFBQSxJQUFBLENBRUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEVBQ0EsRUFBQSxFQUVBLE9BQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFDQSxHQUFBLElBQ0EsRUFBQSxLQUFBLEdBRUEsRUFBQSxLQUFBLElBU0EsTUFOQSxJQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsSUFDQSxHQUNBLEVBQUEsR0FFQSxFQWNBLFFBQUEsSUFBQSxHQUNBLE1BQUEsVUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEtBQ0EsR0FBQSxFQUFBLGVBQUEsRUFBQSxFQUFBLEVBRUEsSUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxDQUVBLElBQUEsZ0JBQUEsR0FDQSxPQUFBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxPQUdBLElBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsSUFHQSxPQUFBLElBMkJBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUVBLEVBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxDQUVBLEtBQUEsSUFBQSxHQUFBLEdBQ0EsS0FBQSxJQUFBLEdBRUEsS0FBQSxFQUFBLFNBQ0EsR0FBQSxJQUNBLEVBQUEsR0FBQSxHQUVBLElBQUEsRUFBQSxTQUNBLEdBQUEsSUFDQSxFQUFBLEdBQUEsRUFFQSxJQUFBLEdBQUEsR0FBQSxFQUFBLFlBQ0EsSUFBQSxHQUFBLEtBQUEsRUErQkEsTUE3QkEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsS0FFQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxNQUdBLEdBQUEsRUFBQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLElBR0EsR0FBQSxFQUFBLEVBQUEsS0FDQSxHQUFBLElBR0EsR0FBQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsR0FHQSxHQUNBLEdBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEdBR0EsR0FDQSxHQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsT0FBQSxHQUdBLEVBQUEsSUFBQSxFQUNBLEdBQUEsTUFBQSxLQUFBLEVBR0EsSUFBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxDQUNBLE9BQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFXQSxRQUFBLElBQUEsR0FDQSxNQUFBLElBQUEsR0FZQSxRQUFBLE1BQ0EsR0FBQSxJQUFBLEVBQUEsRUFBQSxXQUFBLEdBQUEsRUFBQSxDQUNBLE9BQUEsR0FXQSxRQUFBLElBQUEsR0FDQSxNQUFBLGtCQUFBLElBQUEsR0FBQSxLQUFBLEdBMEJBLFFBQUEsSUFBQSxHQUNBLEdBQUEsR0FDQSxDQUdBLE9BQUEsSUFBQSxHQUFBLEtBQUEsSUFBQSxJQUNBLEVBQUEsRUFBQSxhQUFBLEdBQUEsSUFBQSxZQUFBLEtBTUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsSUFFQSxtQkFBQSxJQUFBLEdBQUEsS0FBQSxFQUFBLEtBUkEsRUFtQkEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxJQUFBLEdBc0JBLFFBQUEsSUFBQSxHQUNBLE1BQUEsSUFBQSxnQkFBQSxJQUFBLGdCQUFBLEdBQUEsUUFDQSxHQUFBLEtBQUEsSUFBQSxJQUFBLEVBK0xBLFFBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQVFBLE1BTEEsaUJBQUEsSUFBQSxNQUFBLElBQ0EsRUFBQSxFQUNBLEVBQUEsRUFDQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsa0JBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxJQTZDQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxrQkFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBbUNBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUF3RkEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFRQSxPQVBBLEdBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEdBQ0EsR0FGQSxTQUtBLEVBNkNBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBUUEsT0FQQSxHQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxHQUNBLEdBRkEsU0FLQSxFQTJFQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxLQUVBLElBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxJQUdBLElBQUEsR0FBQSxFQUFBLE1BRUEsS0FEQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsS0FDQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsTUFBQSxJQUlBLE1BQUEsR0E0REEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE1BR0EsS0FEQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsS0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFDQSxNQUdBLE1BQUEsR0FtQkEsUUFBQSxJQUFBLEdBQ0EsR0FBQSxLQU1BLE9BTEEsSUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsSUFDQSxFQUFBLEtBQUEsS0FHQSxFQUFBLE9BbUJBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLElBQUEsRUFpQkEsUUFBQSxJQUFBLEdBTUEsSUFMQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsT0FDQSxPQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLElBQUEsRUFFQSxNQUFBLEdBaUJBLFFBQUEsSUFBQSxHQUNBLE1BQUEsTUFBQSxHQUFBLEtBQUEsR0FDQSxHQUFBLGdCQUFBLElBQUEsR0FBQSxLQUFBLElBQUEsSUFBQSxFQWlCQSxRQUFBLElBQUEsR0FDQSxNQUFBLElBQUEsZ0JBQUEsSUFBQSxHQUFBLEtBQUEsSUFBQSxJQUFBLEVBaUJBLFFBQUEsSUFBQSxHQUNBLE1BQUEsSUFBQSxJQUFBLEVBQUEsV0FBQSxFQXlCQSxRQUFBLElBQUEsR0FDQSxHQUFBLElBQUEsQ0FDQSxLQUFBLEVBQ0EsTUFBQSxFQUVBLElBQUEsR0FBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEVBQUEsTUFFQSxPQUFBLElBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxnQkFBQSxJQUFBLEdBQUEsRUFBQSxTQUNBLEdBRUEsR0FBQSxFQUFBLFdBQ0EsTUFBQSxJQUFBLElBRUEsR0EwQ0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLEVBQUEsRUFBQSxrQkFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBZ0NBLFFBQUEsSUFBQSxHQUNBLE1BQUEsSUFBQSxLQUFBLEdBQUEsV0FBQSxJQWlCQSxRQUFBLElBQUEsR0FDQSxNQUFBLGtCQUFBLEdBd0JBLFFBQUEsSUFBQSxHQUtBLFNBQUEsSUFBQSxRQUFBLEtBNkJBLFFBQUEsSUFBQSxHQUdBLE1BQUEsSUFBQSxJQUFBLElBQUEsRUFvQkEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxRQUFBLEVBbUJBLFFBQUEsSUFBQSxHQUNBLE1BQUEsZ0JBQUEsSUFDQSxHQUFBLGdCQUFBLElBQUEsR0FBQSxLQUFBLElBQUEsSUFBQSxFQW1EQSxRQUFBLElBQUEsR0FDQSxNQUFBLElBQUEsZ0JBQUEsSUFBQSxHQUFBLEtBQUEsSUFBQSxJQUFBLEVBaUJBLFFBQUEsSUFBQSxHQUNBLE1BQUEsZ0JBQUEsSUFDQSxHQUFBLGdCQUFBLElBQUEsR0FBQSxLQUFBLElBQUEsSUFBQSxFQWlCQSxRQUFBLElBQUEsR0FDQSxNQUFBLG1CQUFBLEdBd0NBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEtBTUEsT0FMQSxHQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsS0FFQSxFQXVEQSxRQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsVUFDQSxFQUFBLENBRUEsS0FBQSxHQUFBLEdBQ0EsTUFBQSxFQU9BLElBSEEsZ0JBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxRQUVBLEVBQUEsR0FBQSxrQkFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsT0FDQSxHQUFBLEdBQUEsa0JBQUEsR0FBQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLEdBT0EsS0FMQSxHQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxJQUNBLEVBQUEsTUFFQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFJQSxPQUZBLEdBQUEsR0FDQSxFQUFBLEdBQ0EsRUE4QkEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsS0FDQSxJQUFBLGtCQUFBLEdBQUEsQ0FDQSxHQUFBLEtBQ0EsSUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxLQUVBLEVBQUEsRUFBQSxFQUFBLEdBQUEsV0FBQSxHQUFBLEVBQUEsR0FLQSxLQUhBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxTQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxHQUFBLEVBQUEsUUFHQSxHQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxJQUlBLE9BQUEsR0FrQkEsUUFBQSxJQUFBLEdBTUEsSUFMQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsS0FFQSxFQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsSUFBQSxFQUFBLEVBQUEsSUFFQSxNQUFBLEdBK0JBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEtBQ0EsSUFBQSxrQkFBQSxHQUtBLElBSkEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLFdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLElBRUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxLQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsUUFJQSxHQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxJQUlBLE9BQUEsR0FtQ0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFDQSxJQUFBLE1BQUEsRUFDQSxHQUFBLEVBQ0EsU0FDQSxDQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsWUFDQSxFQUFBLEdBQUEsRUFBQSxTQUVBLEdBQUEsRUFBQSxHQVNBLE1BTkEsS0FDQSxFQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEdBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE1BR0EsRUFpQkEsUUFBQSxJQUFBLEdBTUEsSUFMQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsS0FFQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUVBLE9BQUEsR0EyQkEsUUFBQSxJQUFBLEdBT0EsSUFOQSxHQUFBLEdBQUEsVUFDQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxPQUNBLEVBQUEsR0FBQSxLQUVBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBRUEsT0FBQSxHQStCQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsRUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFDQSxHQUFBLENBY0EsT0FaQSxJQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLElBQUEsRUFDQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQ0EsZ0JBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsR0FFQSxHQUFBLEVBQUEsU0FBQSxHQUNBLFFBQUEsR0FBQSxJQUNBLEVBQUEsSUFBQSxHQURBLFNBS0EsRUFtRkEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxDQUNBLEdBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxFQUVBLElBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsQ0FFQSxJQUFBLGdCQUFBLEdBQ0EsT0FBQSxFQUFBLElBQ0EsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLFVBS0EsSUFBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLElBR0EsT0FBQSxHQTRDQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxLQUNBLEdBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxFQUVBLElBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsQ0FFQSxJQUFBLGdCQUFBLEdBQ0EsT0FBQSxFQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxLQUFBLE9BSUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsSUFJQSxPQUFBLEdBK0NBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLENBRUEsSUFBQSxnQkFBQSxHQU9BLENBQ0EsR0FBQSxFQU9BLE9BTkEsSUFBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsR0FDQSxHQUZBLFNBS0EsRUFkQSxPQUFBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsSUFvQ0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFRQSxPQVBBLEdBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEdBQ0EsR0FGQSxTQUtBLEVBOEJBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLENBR0EsSUFEQSxFQUFBLEdBQUEsbUJBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsZ0JBQUEsR0FDQSxPQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsUUFLQSxJQUFBLEVBQUEsRUFFQSxPQUFBLEdBcUJBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE9BQUEsQ0FFQSxJQURBLEVBQUEsR0FBQSxtQkFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxnQkFBQSxHQUNBLEtBQUEsS0FDQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsUUFJQSxDQUNBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsR0FBQSxFQUFBLE9BQ0EsR0FBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsTUFEQSxHQUFBLEVBQUEsSUFBQSxLQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxLQUdBLE1BQUEsR0E0R0EsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxVQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsa0JBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQ0EsRUFBQSxHQUFBLGdCQUFBLEdBQUEsRUFBQSxFQUtBLE9BSEEsSUFBQSxFQUFBLFNBQUEsR0FDQSxJQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxNQUFBLEVBQUEsS0FFQSxFQTJDQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxDQUdBLElBREEsRUFBQSxFQUFBLGVBQUEsRUFBQSxFQUFBLEdBQ0EsZ0JBQUEsR0FFQSxJQURBLEdBQUEsR0FBQSxHQUFBLEtBQ0EsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE9BR0EsTUFDQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsSUFHQSxPQUFBLEdBNENBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsSUFDQSxFQUFBLENBT0EsSUFIQSxrQkFBQSxJQUFBLEdBQUEsRUFBQSxLQUFBLElBQ0EsRUFBQSxNQUVBLE1BQUEsR0FBQSxHQUFBLEdBSUEsSUFIQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsU0FFQSxFQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsSUFDQSxFQUFBLE9BSUEsR0FBQSxNQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxJQUlBLE9BQUEsR0E0Q0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxJQUNBLEVBQUEsQ0FPQSxJQUhBLGtCQUFBLElBQUEsR0FBQSxFQUFBLEtBQUEsSUFDQSxFQUFBLE1BRUEsTUFBQSxHQUFBLEdBQUEsR0FJQSxJQUhBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxTQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxJQUNBLEVBQUEsT0FJQSxHQUFBLE1BQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLElBSUEsT0FBQSxHQXdEQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsTUFBQSxFQUNBLElBQUEsR0FBQSxVQUFBLE9BQUEsQ0FDQSxHQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsTUFFQSxJQUFBLGdCQUFBLEdBSUEsSUFIQSxJQUNBLEVBQUEsSUFBQSxNQUVBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxPQUdBLElBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBR0EsT0FBQSxHQXVCQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsVUFBQSxPQUFBLENBS0EsT0FKQSxHQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxLQUVBLEVBMENBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE9BQUEsRUFBQSxFQUFBLEVBQUEsS0F3QkEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUlBLEdBSEEsR0FBQSxnQkFBQSxHQUFBLFNBQ0EsRUFBQSxHQUFBLElBRUEsTUFBQSxHQUFBLEVBQ0EsTUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLENBRUEsSUFBQSxHQUFBLEdBQUEsRUFFQSxPQURBLEdBQUEsT0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsUUFDQSxFQWtCQSxRQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQ0EsRUFBQSxHQUFBLGdCQUFBLEdBQUEsRUFBQSxFQU9BLE9BTEEsSUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxJQUFBLEVBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsSUFFQSxFQXdCQSxRQUFBLElBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE9BQUEsQ0FDQSxPQUFBLGdCQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsT0E4Q0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFDQSxHQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLENBRUEsSUFBQSxnQkFBQSxHQUNBLE9BQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxVQUtBLElBQUEsRUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxLQUdBLFNBQUEsRUFxREEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFDQSxFQUFBLEdBQUEsZ0JBQUEsR0FBQSxFQUFBLEVBb0JBLEtBbEJBLElBQ0EsRUFBQSxFQUFBLGVBQUEsRUFBQSxFQUFBLElBRUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBQUEsR0FBQSxHQUNBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BR0EsRUFBQSxTQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsTUFBQSxFQUNBLEVBQUEsTUFBQSxJQUdBLEVBQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxHQUNBLEtBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsR0FDQSxFQUFBLEVBQUEsVUFFQSxFQUFBLEdBRUEsTUFBQSxHQWlCQSxRQUFBLElBQUEsR0FDQSxNQUFBLElBQUEsZ0JBQUEsR0FBQSxPQUNBLEVBQUEsR0FFQSxHQUFBLEdBK0NBLFFBQUEsSUFBQSxHQUtBLElBSkEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUNBLE9BRUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxJQUNBLEVBQUEsS0FBQSxHQUdBLE1BQUEsR0FtQkEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsR0FBQSxXQUFBLEdBQUEsRUFBQSxJQTZDQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxDQUdBLEtBREEsRUFBQSxFQUFBLGVBQUEsRUFBQSxFQUFBLEtBQ0EsRUFBQSxHQUNBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsRUFHQSxPQUFBLEdBNkNBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE9BQUEsQ0FFQSxLQURBLEVBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxHQUNBLEtBQ0EsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxFQUdBLE9BQUEsR0F1REEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsQ0FFQSxJQUFBLGdCQUFBLElBQUEsTUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBRUEsS0FEQSxFQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLFFBSUEsSUFEQSxFQUFBLEVBQ0EsTUFBQSxHQUFBLEVBQ0EsTUFBQSxHQUFBLEVBQUEsR0FBQSxDQUdBLE9BQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxJQTZDQSxRQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FVQSxNQVJBLGlCQUFBLElBQUEsTUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLGtCQUFBLElBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQ0EsR0FBQSxHQUVBLE1BQUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLElBRUEsR0FBQSxFQUFBLEdBNEJBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLGdCQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE9BQUEsQ0FDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsTUFDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLEtBQUEsRUFBQSxFQUFBLEdBRUEsTUFBQSxHQUFBLEVBQUEsRUFBQSxHQXNEQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxDQUVBLElBQUEsZ0JBQUEsSUFBQSxNQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsQ0FFQSxLQURBLEVBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxHQUNBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLFFBR0EsR0FBQSxNQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsQ0FFQSxPQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxJQWtCQSxRQUFBLE1BU0EsSUFSQSxHQUFBLE1BQ0EsRUFBQSxHQUNBLEVBQUEsVUFBQSxPQUNBLEVBQUEsSUFDQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLEVBQ0EsRUFBQSxNQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxVQUFBLElBQ0EsR0FBQSxJQUFBLEdBQUEsTUFDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FBQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEtBR0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUNBLElBRUEsR0FBQSxPQUFBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBR0EsSUFGQSxFQUFBLEVBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsQ0FHQSxJQUZBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxLQUNBLEdBRUEsR0FEQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLElBQUEsRUFDQSxRQUFBLEVBR0EsR0FBQSxLQUFBLElBR0EsS0FBQSxLQUNBLEVBQUEsRUFBQSxHQUNBLEdBQ0EsRUFBQSxFQUtBLE9BRkEsR0FBQSxHQUNBLEVBQUEsR0FDQSxFQXNEQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxDQUVBLElBQUEsZ0JBQUEsSUFBQSxNQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsQ0FFQSxLQURBLEVBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxHQUNBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLFFBSUEsSUFEQSxFQUFBLEVBQ0EsTUFBQSxHQUFBLEVBQ0EsTUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLENBR0EsT0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUErQkEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxDQUlBLEtBSEEsZ0JBQUEsS0FDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsR0FFQSxLQUNBLEdBQUEsRUFBQSxLQUFBLEVBQ0EsTUFBQSxFQUdBLE9BQUEsR0FxQkEsUUFBQSxJQUFBLEdBTUEsSUFMQSxHQUFBLEdBQUEsVUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUVBLEVBQUEsR0FHQSxJQUZBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxLQUNBLEVBQUEsR0FDQSxFQUFBLEtBQUEsSUFDQSxHQUFBLEtBQUEsRUFBQSxJQUFBLEdBQ0EsSUFJQSxPQUFBLEdBb0NBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLGdCQUFBLEdBQUEsR0FBQSxHQUFBLEVBRUEsTUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLEVBUUEsS0FKQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxHQUFBLEtBQ0EsRUFBQSxHQUFBLEtBRUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUNBLEdBQUEsQ0FFQSxPQUFBLEdBb0NBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQ0EsSUFHQSxLQURBLEVBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEtBQUEsR0FDQSxHQUFBLEtBQUEsRUFBQSxJQUFBLEdBQ0EsS0FHQSxNQUFBLEdBd0RBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLGdCQUFBLElBQUEsTUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsQ0FHQSxLQURBLEVBQUEsRUFBQSxlQUFBLEVBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsUUFHQSxHQUFBLE1BQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBRUEsT0FBQSxHQUFBLEVBQUEsR0FvREEsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxDQU1BLEtBSEEsRUFBQSxFQUFBLEVBQUEsZUFBQSxFQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFFQSxNQUFBLEdBa0JBLFFBQUEsTUFDQSxNQUFBLElBQUEsR0FBQSxXQUFBLEdBQUEsSUFnREEsUUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBVUEsTUFSQSxpQkFBQSxJQUFBLE1BQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxrQkFBQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUNBLEdBQUEsR0FFQSxNQUFBLElBQ0EsRUFBQSxFQUFBLGVBQUEsRUFBQSxFQUFBLElBRUEsR0FBQSxFQUFBLEVBQUEsR0FtQkEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsRUFBQSxVQUFBLElBcUJBLFFBQUEsTUFJQSxJQUhBLEdBQUEsR0FBQSxHQUNBLEVBQUEsVUFBQSxTQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxVQUFBLEVBQ0EsSUFBQSxHQUFBLElBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxFQUFBLEVBQUEsS0FBQSxFQUdBLE1BQUEsT0FvQkEsUUFBQSxNQU1BLElBTEEsR0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLFVBQUEsVUFBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsV0FBQSxFQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxLQUVBLEVBQUEsR0FDQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEVBRUEsT0FBQSxHQXNCQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFDQSxJQUtBLEtBSEEsSUFBQSxHQUFBLEdBQUEsRUFBQSxNQUNBLFFBRUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsSUFBQSxFQUFBLElBR0EsTUFBQSxHQThCQSxRQUFBLElBQUEsRUFBQSxHQUNBLElBQUEsR0FBQSxHQUNBLEtBQUEsSUFBQSxHQUVBLE9BQUEsWUFDQSxRQUFBLEVBQUEsRUFDQSxFQUFBLE1BQUEsS0FBQSxXQURBLFFBNkJBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxXQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLFVBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxLQUFBLEdBNEJBLFFBQUEsSUFBQSxHQUtBLElBSkEsR0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQUEsV0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxTQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxLQUFBLEdBRUEsTUFBQSxHQXNDQSxRQUFBLElBQUEsRUFBQSxHQUNBLE1BQUEsV0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxVQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsS0FBQSxHQWtDQSxRQUFBLE1BSUEsSUFIQSxHQUFBLEdBQUEsVUFDQSxFQUFBLEVBQUEsT0FFQSxLQUNBLElBQUEsR0FBQSxFQUFBLElBQ0EsS0FBQSxJQUFBLEdBR0EsT0FBQSxZQUlBLElBSEEsR0FBQSxHQUFBLFVBQ0EsRUFBQSxFQUFBLE9BRUEsS0FDQSxHQUFBLEVBQUEsR0FBQSxNQUFBLEtBQUEsR0FFQSxPQUFBLEdBQUEsSUFpQ0EsUUFBQSxJQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsZ0JBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxPQUNBLEdBQUEsRUFBQSxFQUFBLEtBQUEsS0FBQSxLQUFBLEdBMkNBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLENBRUEsS0FBQSxHQUFBLEdBQ0EsS0FBQSxJQUFBLEdBR0EsSUFEQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQ0EsS0FBQSxFQUFBLENBQ0EsR0FBQSxJQUFBLENBQ0EsSUFBQSxNQUNBLElBQUEsS0FDQSxFQUFBLEVBQUEsUUFDQSxFQUFBLFdBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxVQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQUEsRUFBQSxTQUFBLEVBRUEsSUFBQSxHQUFBLFdBQ0EsR0FBQSxHQUFBLEdBQUEsS0FBQSxFQUNBLElBQUEsR0FBQSxFQUFBLENBQ0EsR0FDQSxHQUFBLEVBRUEsSUFBQSxHQUFBLENBQ0EsR0FBQSxFQUFBLEVBQUEsRUFDQSxJQUNBLEVBQUEsS0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEdBQ0EsR0FBQSxJQUNBLEVBQUEsRUFBQSxXQUlBLEdBQUEsR0FBQSxFQUFBLElBSUEsRUFBQSxXQUNBLEdBQ0EsR0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLEtBQ0EsRUFBQSxLQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsR0FDQSxHQUFBLElBQ0EsRUFBQSxFQUFBLE9BS0EsT0FBQSxZQU1BLEdBTEEsRUFBQSxVQUNBLEVBQUEsS0FDQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLElBQUEsR0FFQSxLQUFBLEVBQ0EsR0FBQSxHQUFBLElBQUEsTUFDQSxDQUNBLEdBQUEsSUFDQSxFQUFBLEVBRUEsSUFBQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxDQUVBLElBQ0EsSUFDQSxFQUFBLEdBQUEsSUFFQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxJQUNBLElBQ0EsRUFBQSxHQUFBLEVBQUEsSUFlQSxNQVpBLElBQUEsRUFDQSxFQUFBLEdBQUEsR0FDQSxHQUFBLElBQUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxJQUVBLElBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsS0FFQSxHQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsTUFFQTtFQW9CQSxRQUFBLElBQUEsR0FDQSxJQUFBLEdBQUEsR0FDQSxLQUFBLElBQUEsR0FFQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQ0EsT0FBQSxJQUFBLFdBQ0EsRUFBQSxNQUFBLEVBQUEsSUFDQSxHQW9CQSxRQUFBLElBQUEsRUFBQSxHQUNBLElBQUEsR0FBQSxHQUNBLEtBQUEsSUFBQSxHQUVBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFDQSxPQUFBLElBQUEsV0FDQSxFQUFBLE1BQUEsRUFBQSxJQUNBLEdBeUNBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsSUFBQSxHQUFBLEdBQ0EsS0FBQSxJQUFBLEdBRUEsSUFBQSxHQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEtBQUEsV0FBQSxFQUFBLFVBQUEsRUFFQSxPQUFBLElBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxXQUdBLE9BREEsR0FBQSxTQUNBLEVBcUJBLFFBQUEsSUFBQSxHQUNBLEdBQUEsR0FDQSxDQUVBLEtBQUEsR0FBQSxHQUNBLEtBQUEsSUFBQSxHQUVBLE9BQUEsWUFDQSxNQUFBLEdBQ0EsR0FFQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxXQUdBLEVBQUEsS0FDQSxJQXVCQSxRQUFBLElBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsVUFBQSxJQStCQSxRQUFBLElBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxVQUFBLElBbUNBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsRUFDQSxHQUFBLENBRUEsS0FBQSxHQUFBLEdBQ0EsS0FBQSxJQUFBLEdBWUEsT0FWQSxNQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsS0FDQSxFQUFBLFdBQUEsR0FBQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFNBQUEsR0FFQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFNBQUEsRUFFQSxHQUFBLEVBQUEsRUFBQSxHQXlCQSxRQUFBLElBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLElBQUEsSUFxQkEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxZQUNBLE1BQUEsSUFvQ0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsU0FBQSxFQUNBLElBQUEsTUFBQSxHQUFBLFlBQUEsRUFDQSxNQUFBLEdBQUEsRUFBQSxFQUFBLEVBR0EsSUFBQSxVQUFBLEVBQ0EsTUFBQSxJQUFBLEVBRUEsSUFBQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFHQSxPQUFBLElBQUEsRUFBQSxRQUFBLElBQUEsR0FBQSxHQUFBLEdBUUEsU0FBQSxHQUlBLElBSEEsR0FBQSxHQUFBLEVBQUEsT0FDQSxHQUFBLEVBRUEsTUFDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLElBQUEsTUFBQSxNQUlBLE1BQUEsSUFkQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEtBQUEsSUFBQSxJQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsSUErQkEsUUFBQSxJQUFBLEdBQ0EsTUFBQSxPQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsUUFBQSxHQUFBLElBa0JBLFFBQUEsSUFBQSxHQUNBLE1BQUEsR0FnQ0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsR0FBQSxHQUFBLEVBRUEsS0FBQSxHQUFBLEVBQUEsVUFDQSxNQUFBLElBQ0EsRUFBQSxHQUVBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsR0FBQSxJQUVBLEtBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxJQUFBLFNBQUEsS0FDQSxFQUFBLEVBQUEsTUFFQSxJQUFBLEdBQUEsRUFDQSxFQUFBLEdBQUEsRUFFQSxJQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUNBLEtBQ0EsRUFBQSxVQUFBLEdBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxVQUNBLEVBQUEsS0FBQSxZQUNBLEdBQUEsRUFFQSxJQUFBLE1BQUEsRUFBQSxVQUNBLElBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxJQUFBLEdBQUEsR0FBQSxHQUNBLE1BQUEsS0FFQSxHQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsVUFBQSxFQUVBLE1BQUEsT0FtQkEsUUFBQSxNQUVBLE1BREEsR0FBQSxFQUFBLEdBQ0EsS0FnQkEsUUFBQSxPQXNFQSxRQUFBLElBQUEsR0FDQSxNQUFBLFVBQUEsR0FDQSxNQUFBLEdBQUEsSUFnQ0EsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxNQUFBLEVBQ0EsRUFBQSxNQUFBLENBcUJBLElBbkJBLE1BQUEsSUFDQSxpQkFBQSxJQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsR0FDQSxHQUFBLGlCQUFBLEtBQ0EsRUFBQSxFQUNBLEdBQUEsSUFHQSxHQUFBLElBQ0EsRUFBQSxHQUVBLEdBQUEsR0FBQSxFQUNBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFFQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsSUFDQSxPQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxXQUFBLFFBQUEsRUFBQSxJQUFBLE9BQUEsS0FBQSxHQUVBLE1BQUEsSUFBQSxFQUFBLEdBK0JBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLElBQUEsR0FBQSxFQUFBLEtBQUEsR0EyRkEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUtBLEdBQUEsR0FBQSxFQUFBLGdCQUNBLEdBQUEsR0FBQSxHQUFBLElBR0EsRUFBQSxNQUFBLEVBQUEsRUFFQSxJQUlBLEdBSkEsRUFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBLFNBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEdBR0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxhQUFBLEVBQ0EsRUFBQSxXQUdBLEVBQUEsSUFDQSxFQUFBLFFBQUEsR0FBQSxPQUFBLElBQ0EsRUFBQSxPQUFBLEtBQ0EsSUFBQSxFQUFBLEVBQUEsR0FBQSxPQUFBLEtBQ0EsRUFBQSxVQUFBLEdBQUEsT0FBQSxLQUFBLElBRUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FxQkEsTUFwQkEsS0FBQSxFQUFBLEdBR0EsR0FBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxHQUdBLElBQ0EsR0FBQSxZQUFBLEVBQUEsVUFFQSxJQUNBLEdBQUEsRUFDQSxHQUFBLE9BQUEsRUFBQSxlQUVBLElBQ0EsR0FBQSxpQkFBQSxFQUFBLCtCQUVBLEVBQUEsRUFBQSxFQUFBLE9BSUEsSUFHQSxHQUFBLE1BSUEsSUFBQSxHQUFBLEVBQUEsU0FDQSxFQUFBLENBRUEsS0FDQSxFQUFBLE1BQ0EsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLFNBR0EsR0FBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLElBQUEsR0FDQSxRQUFBLEVBQUEsTUFDQSxRQUFBLEVBQUEsT0FHQSxFQUFBLFlBQUEsRUFBQSxTQUNBLEVBQUEsR0FBQSxFQUFBLFFBQUEsRUFBQSxhQUNBLHFDQUNBLEVBQUEsdUZBQ0EsT0FFQSxFQUNBLGVBSUEsSUFBQSxHQUFBLHdCQUFBLEVBQUEsV0FBQSwyQkFBQSxLQUFBLEtBQUEsTUFFQSxLQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEdBQUEsTUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUVBLEtBREEsR0FBQSxPQUFBLEVBQ0EsRUFFQSxNQUFBLEdBQ0EsRUFBQSxJQUtBLEVBQUEsT0FBQSxFQUNBLEdBMkJBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsQ0FDQSxJQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsRUFHQSxLQURBLEVBQUEsRUFBQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFFQSxPQUFBLEdBbUJBLFFBQUEsSUFBQSxHQUNBLE1BQUEsT0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLFFBQUEsR0FBQSxJQW9CQSxRQUFBLElBQUEsR0FDQSxHQUFBLEtBQUEsQ0FDQSxPQUFBLElBQUEsTUFBQSxFQUFBLEdBQUEsR0FBQSxFQThCQSxRQUFBLElBQUEsR0FHQSxNQUZBLEdBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQ0EsRUF3QkEsUUFBQSxJQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsR0FDQSxFQTZCQSxRQUFBLE1BRUEsTUFEQSxNQUFBLFdBQUEsRUFDQSxLQWdCQSxRQUFBLE1BQ0EsTUFBQSxJQUFBLEtBQUEsYUFpQkEsUUFBQSxNQUNBLE1BQUEsTUFBQSxZQWppTUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLENBR0EsSUFBQSxJQUFBLEVBQUEsTUFDQSxHQUFBLEVBQUEsUUFDQSxHQUFBLEVBQUEsS0FDQSxHQUFBLEVBQUEsU0FDQSxHQUFBLEVBQUEsS0FDQSxHQUFBLEVBQUEsT0FDQSxHQUFBLEVBQUEsT0FDQSxHQUFBLEVBQUEsT0FDQSxHQUFBLEVBQUEsT0FDQSxHQUFBLEVBQUEsVUFRQSxNQUdBLEdBQUEsR0FBQSxVQUdBLEdBQUEsRUFBQSxFQUdBLEdBQUEsR0FBQSxTQUdBLEdBQUEsR0FBQSxJQUNBLEdBQUEsSUFDQSxRQUFBLHNCQUFBLFFBQ0EsUUFBQSx3QkFBQSxPQUFBLEtBSUEsR0FBQSxHQUFBLEtBQ0EsR0FBQSxFQUFBLGFBQ0EsR0FBQSxHQUFBLE1BQ0EsR0FBQSxHQUFBLFVBQUEsU0FDQSxHQUFBLEdBQUEsR0FBQSxHQUFBLGlCQUFBLEdBQ0EsR0FBQSxHQUFBLGVBQ0EsR0FBQSxHQUFBLEtBQ0EsR0FBQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLE9BQ0EsR0FBQSxHQUFBLFFBR0EsR0FBQSxXQUVBLElBQ0EsR0FBQSxNQUNBLEVBQUEsR0FBQSxFQUFBLEdBQUEsaUJBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFDQSxNQUFBLElBQ0EsTUFBQSxNQUlBLEdBQUEsR0FBQSxHQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEdBQUEsVUFBQSxHQUNBLEdBQUEsRUFBQSxTQUNBLEdBQUEsRUFBQSxNQUNBLEdBQUEsR0FBQSxHQUFBLEdBQUEsT0FBQSxHQUNBLEdBQUEsR0FBQSxJQUNBLEdBQUEsR0FBQSxJQUNBLEdBQUEsRUFBQSxTQUNBLEdBQUEsR0FBQSxPQUdBLEtBQ0EsSUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBeUZBLEVBQUEsVUFBQSxFQUFBLFNBU0EsSUFBQSxJQUFBLEVBQUEsVUFTQSxJQUFBLFlBQUEsR0FBQSxFQUFBLGFBQUEsRUFBQSxLQUFBLEdBUUEsR0FBQSxVQUFBLGdCQUFBLElBQUEsS0FXQSxFQUFBLGtCQVFBLE9BQUEsbUJBUUEsU0FBQSxrQkFRQSxZQUFBLEVBUUEsU0FBQSxHQVFBLFNBUUEsRUFBQSxJQXFKQSxLQUNBLEVBQUEsV0FDQSxRQUFBLE1BQ0EsTUFBQSxVQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsQ0FDQSxFQUFBLFVBQUEsQ0FDQSxJQUFBLEdBQUEsR0FBQSxFQUNBLEdBQUEsVUFBQSxLQUVBLE1BQUEsSUFBQSxFQUFBLGFBMm9CQSxJQUFBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsRUFDQSxHQUFBLEVBQUEsZUFBQSxJQUZBLEdBdUZBLEdBQUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLGdCQUFBLElBQUEsZ0JBQUEsR0FBQSxRQUNBLEdBQUEsS0FBQSxJQUFBLElBQUEsR0FZQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLElBQ0EsS0FBQSxFQUFBLE1BQUEsRUFDQSxLQUFBLFFBQUEsSUFBQSxNQUFBLEVBQ0EsS0FBQSxJQUFBLEdBQ0EsR0FBQSxLQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsRUFHQSxPQUFBLElBZ0JBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEdBR0EsR0FBQSxPQUpBLEdBZUEsSUFDQSxJQUFBLFFBQ0EsSUFBQSxPQUNBLElBQUEsT0FDQSxJQUFBLFNBQ0EsSUFBQSxTQUlBLEdBQUEsR0FBQSxJQUdBLEdBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxLQUFBLEtBQUEsSUFBQSxLQUNBLEdBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxLQUFBLElBQUEsSUFBQSxLQWtDQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxFQUFBLENBQ0EsS0FBQSxFQUFBLE1BQUEsRUFDQSxJQUFBLEdBQUEsVUFDQSxFQUFBLEVBQ0EsRUFBQSxnQkFBQSxHQUFBLEVBQUEsRUFBQSxNQUNBLElBQUEsRUFBQSxHQUFBLGtCQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxPQUNBLEdBQUEsR0FBQSxrQkFBQSxHQUFBLEVBQUEsS0FDQSxFQUFBLElBQUEsR0FFQSxRQUFBLEVBQUEsR0FFQSxHQURBLEVBQUEsRUFBQSxHQUNBLEdBQUEsUUFBQSxJQUtBLElBSkEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxRQUFBLEtBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFFQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsRUFJQSxPQUFBLElBOEpBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEVBQUEsQ0FDQSxLQUFBLEVBQUEsTUFBQSxFQUlBLEtBSEEsR0FBQSxHQUFBLFVBQ0EsRUFBQSxFQUNBLEVBQUEsZ0JBQUEsR0FBQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEdBRUEsR0FEQSxFQUFBLEVBQUEsR0FDQSxHQUFBLFFBQUEsSUFLQSxJQUpBLEdBQUEsR0FBQSxHQUNBLEVBQUEsUUFBQSxLQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBRUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLG1CQUFBLEdBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxHQUlBLE9BQUEsSUE4SUEsR0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsRUFBQSxDQUNBLEtBQUEsRUFBQSxNQUFBLEVBQ0EsS0FBQSxRQUFBLElBQUEsTUFBQSxFQUNBLEdBQUEsR0FBQSxtQkFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxLQUFBLElBQUEsR0FDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFFQSxPQUFBLElBc0VBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEVBQUEsQ0FDQSxLQUFBLEVBQUEsTUFBQSxFQUNBLEtBQUEsUUFBQSxJQUFBLE1BQUEsRUFDQSxHQUFBLEdBQUEsbUJBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBS0EsS0FKQSxHQUFBLEdBQUEsR0FDQSxFQUFBLFFBQUEsS0FBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUVBLEVBQUEsR0FFQSxHQURBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFFQSxPQUFBLElBeWFBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsSUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEVBQ0EsT0FBQSxDQUVBLElBQUEsR0FBQSxFQUFBLFFBQ0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxFQUVBLE9BQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxJQVBBLEdBK2dCQSxHQUFBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsSUE4VkEsR0FBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEtBQUEsS0EwQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLElBMFFBLEdBQUEsR0E0WkEsR0FBQSxHQXE0REEsR0FBQSxHQUFBLEdBQUEsR0FBQSxNQUFBLElBQUEsV0FDQSxPQUFBLEdBQUEsS0FBQSxXQXNCQSxHQUFBLEdBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FFQSxNQUFBLElBQUEsR0FBQSxHQUFBLEVBQUEsUUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBd3VCQSxPQW5PQSxHQUFBLE1BQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLGVBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFdBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLGFBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFdBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFlBQUEsR0FDQSxFQUFBLFVBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLGFBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLElBQUEsR0FDQSxFQUFBLFVBQUEsR0FDQSxFQUFBLElBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLElBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLGFBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLElBQUEsR0FDQSxFQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFVBQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLElBQUEsR0FDQSxFQUFBLElBQUEsR0FDQSxFQUFBLFVBQUEsR0FHQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFVBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLE1BQUEsR0FHQSxHQUFBLEdBS0EsRUFBQSxNQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxNQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxjQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQ0EsRUFBQSxJQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxXQUFBLEdBQ0EsRUFBQSxNQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxjQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQ0EsRUFBQSxNQUFBLEdBQ0EsRUFBQSxXQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxJQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxZQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBR0EsRUFBQSxJQUFBLEdBQ0EsRUFBQSxJQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQ0EsRUFBQSxNQUFBLEdBQ0EsRUFBQSxNQUFBLEdBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxPQUFBLEdBRUEsR0FBQSxXQUNBLEdBQUEsS0FNQSxPQUxBLElBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsS0FDQSxFQUFBLEdBQUEsS0FHQSxNQUNBLEdBS0EsRUFBQSxNQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxPQUFBLEdBR0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLEdBRUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxXQUFBLENBQ0EsR0FBQSxVQUFBLEtBQ0EsRUFBQSxVQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsVUFDQSxFQUFBLEVBQUEsS0FBQSxZQUFBLEVBQUEsRUFFQSxPQUFBLElBQUEsTUFBQSxLQUFBLEdBQUEsR0FBQSxrQkFBQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsTUFjQSxFQUFBLFFBQUEsUUFHQSxFQUFBLFVBQUEsTUFBQSxHQUNBLEVBQUEsVUFBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLE1BQUEsR0FDQSxFQUFBLFVBQUEsUUFBQSxHQUdBLElBQUEsT0FBQSxNQUFBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsR0FBQSxVQUFBLEdBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxVQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsWUFBQSxVQUVBLE9BQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBS0EsSUFBQSxPQUFBLFVBQUEsT0FBQSxXQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUNBLEdBQUEsVUFBQSxHQUFBLFdBRUEsTUFEQSxHQUFBLE1BQUEsS0FBQSxZQUFBLFdBQ0EsUUFLQSxJQUFBLFNBQUEsUUFBQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUNBLEdBQUEsVUFBQSxHQUFBLFdBQ0EsTUFBQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsWUFBQSxXQUFBLEtBQUEsY0FJQSxFQTdyTkEsR0FBQSxHQUdBLEtBQ0EsS0FHQSxFQUFBLEVBR0EsR0FBQSxHQUFBLE1BQUEsR0FHQSxFQUFBLEdBR0EsRUFBQSxHQUdBLEVBQUEsMENBWUEsRUFBQSxpQkFDQSxFQUFBLHFCQUNBLEVBQUEsZ0NBTUEsRUFBQSxrQ0FHQSxFQUFBLE9BR0EsRUFBQSwyQkFHQSxFQUFBLG1CQUdBLEVBQUEsT0FBQSxLQUFBLEVBQUEsY0FHQSxFQUFBLE9BR0EsRUFBQSxXQUdBLEVBQUEsMkJBR0EsR0FDQSxRQUFBLFVBQUEsT0FBQSxXQUFBLE9BQUEsU0FBQSxTQUNBLFNBQUEsU0FBQSxJQUFBLGNBQUEsZUFBQSxXQUFBLFFBQ0EsV0FBQSxjQUlBLEVBQUEsRUFHQSxFQUFBLHFCQUNBLEVBQUEsaUJBQ0EsRUFBQSxtQkFDQSxFQUFBLGdCQUNBLEVBQUEsb0JBQ0EsRUFBQSxrQkFDQSxFQUFBLGtCQUNBLEVBQUEsa0JBQ0EsRUFBQSxrQkFHQSxJQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLElBQUEsQ0FHQSxJQUFBLElBQ0EsU0FBQSxFQUNBLFFBQUEsRUFDQSxVQUFBLEdBSUEsR0FDQSxjQUFBLEVBQ0EsWUFBQSxFQUNBLE1BQUEsS0FDQSxVQUFBLEdBSUEsR0FDQSxXQUFBLEVBQ0EsWUFBQSxFQUNBLFFBQUEsRUFDQSxRQUFBLEVBQ0EsUUFBQSxFQUNBLFdBQUEsR0FJQSxHQUNBLEtBQUEsS0FDQSxJQUFBLElBQ0EsS0FBQSxJQUNBLEtBQUEsSUFDQSxJQUFBLElBQ0EsU0FBQSxRQUNBLFNBQUEsU0FJQSxFQUFBLFFBQUEsVUFBQSxRQUFBLEtBR0EsRUFBQSxRQUFBLFdBQUEsVUFBQSxRQUFBLFVBQUEsUUFHQSxFQUFBLFFBQUEsVUFBQSxTQUFBLE9BQUEsVUFBQSxPQUdBLEVBQUEsR0FBQSxFQUFBLFVBQUEsR0FBQSxFQUdBLEVBQUEsUUFBQSxVQUFBLFFBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLEVBcWpOQSxJQUFBLEdBQUEsR0FHQSxtQkFBQSxTQUFBLGdCQUFBLFFBQUEsS0FBQSxPQUFBLEtBSUEsRUFBQSxFQUFBLEVBSUEsT0FBQSxXQUNBLE1BQUEsTUFJQSxHQUFBLEVBRUEsR0FDQSxFQUFBLFFBQUEsR0FBQSxFQUFBLEVBSUEsRUFBQSxFQUFBLEVBSUEsRUFBQSxFQUFBLEdBRUEsS0FBQSIsImZpbGUiOiJ2ZW5kb3IubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS4zLjAtcmMuMlxyXG4gKiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xyXG4gKiBMaWNlbnNlOiBNSVRcclxuICovXHJcbihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHsndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFRoaXMgb2JqZWN0IHByb3ZpZGVzIGEgdXRpbGl0eSBmb3IgcHJvZHVjaW5nIHJpY2ggRXJyb3IgbWVzc2FnZXMgd2l0aGluXHJcbiAqIEFuZ3VsYXIuIEl0IGNhbiBiZSBjYWxsZWQgYXMgZm9sbG93czpcclxuICpcclxuICogdmFyIGV4YW1wbGVNaW5FcnIgPSBtaW5FcnIoJ2V4YW1wbGUnKTtcclxuICogdGhyb3cgZXhhbXBsZU1pbkVycignb25lJywgJ1RoaXMgezB9IGlzIHsxfScsIGZvbywgYmFyKTtcclxuICpcclxuICogVGhlIGFib3ZlIGNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgbWluRXJyIGluIHRoZSBleGFtcGxlIG5hbWVzcGFjZS4gVGhlXHJcbiAqIHJlc3VsdGluZyBlcnJvciB3aWxsIGhhdmUgYSBuYW1lc3BhY2VkIGVycm9yIGNvZGUgb2YgZXhhbXBsZS5vbmUuICBUaGVcclxuICogcmVzdWx0aW5nIGVycm9yIHdpbGwgcmVwbGFjZSB7MH0gd2l0aCB0aGUgdmFsdWUgb2YgZm9vLCBhbmQgezF9IHdpdGggdGhlXHJcbiAqIHZhbHVlIG9mIGJhci4gVGhlIG9iamVjdCBpcyBub3QgcmVzdHJpY3RlZCBpbiB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBpdCBjYW5cclxuICogdGFrZS5cclxuICpcclxuICogSWYgZmV3ZXIgYXJndW1lbnRzIGFyZSBzcGVjaWZpZWQgdGhhbiBuZWNlc3NhcnkgZm9yIGludGVycG9sYXRpb24sIHRoZSBleHRyYVxyXG4gKiBpbnRlcnBvbGF0aW9uIG1hcmtlcnMgd2lsbCBiZSBwcmVzZXJ2ZWQgaW4gdGhlIGZpbmFsIHN0cmluZy5cclxuICpcclxuICogU2luY2UgZGF0YSB3aWxsIGJlIHBhcnNlZCBzdGF0aWNhbGx5IGR1cmluZyBhIGJ1aWxkIHN0ZXAsIHNvbWUgcmVzdHJpY3Rpb25zXHJcbiAqIGFyZSBhcHBsaWVkIHdpdGggcmVzcGVjdCB0byBob3cgbWluRXJyIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhbmQgY2FsbGVkLlxyXG4gKiBJbnN0YW5jZXMgc2hvdWxkIGhhdmUgbmFtZXMgb2YgdGhlIGZvcm0gbmFtZXNwYWNlTWluRXJyIGZvciBhIG1pbkVyciBjcmVhdGVkXHJcbiAqIHVzaW5nIG1pbkVycignbmFtZXNwYWNlJykgLiBFcnJvciBjb2RlcywgbmFtZXNwYWNlcyBhbmQgdGVtcGxhdGUgc3RyaW5nc1xyXG4gKiBzaG91bGQgYWxsIGJlIHN0YXRpYyBzdHJpbmdzLCBub3QgdmFyaWFibGVzIG9yIGdlbmVyYWwgZXhwcmVzc2lvbnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGUgVGhlIG5hbWVzcGFjZSB0byB1c2UgZm9yIHRoZSBuZXcgbWluRXJyIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBFcnJvckNvbnN0cnVjdG9yIEN1c3RvbSBlcnJvciBjb25zdHJ1Y3RvciB0byBiZSBpbnN0YW50aWF0ZWQgd2hlbiByZXR1cm5pbmdcclxuICogICBlcnJvciBmcm9tIHJldHVybmVkIGZ1bmN0aW9uLCBmb3IgY2FzZXMgd2hlbiBhIHBhcnRpY3VsYXIgdHlwZSBvZiBlcnJvciBpcyB1c2VmdWwuXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihjb2RlOnN0cmluZywgdGVtcGxhdGU6c3RyaW5nLCAuLi50ZW1wbGF0ZUFyZ3MpOiBFcnJvcn0gbWluRXJyIGluc3RhbmNlXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gbWluRXJyKG1vZHVsZSwgRXJyb3JDb25zdHJ1Y3Rvcikge1xyXG4gIEVycm9yQ29uc3RydWN0b3IgPSBFcnJvckNvbnN0cnVjdG9yIHx8IEVycm9yO1xyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgY29kZSA9IGFyZ3VtZW50c1swXSxcclxuICAgICAgcHJlZml4ID0gJ1snICsgKG1vZHVsZSA/IG1vZHVsZSArICc6JyA6ICcnKSArIGNvZGUgKyAnXSAnLFxyXG4gICAgICB0ZW1wbGF0ZSA9IGFyZ3VtZW50c1sxXSxcclxuICAgICAgdGVtcGxhdGVBcmdzID0gYXJndW1lbnRzLFxyXG4gICAgICBzdHJpbmdpZnkgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHJldHVybiBvYmoudG9TdHJpbmcoKS5yZXBsYWNlKC8gXFx7W1xcc1xcU10qJC8sICcnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgIH0sXHJcbiAgICAgIG1lc3NhZ2UsIGk7XHJcblxyXG4gICAgbWVzc2FnZSA9IHByZWZpeCArIHRlbXBsYXRlLnJlcGxhY2UoL1xce1xcZCtcXH0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XHJcbiAgICAgIHZhciBpbmRleCA9ICttYXRjaC5zbGljZSgxLCAtMSksIGFyZztcclxuXHJcbiAgICAgIGlmIChpbmRleCArIDIgPCB0ZW1wbGF0ZUFyZ3MubGVuZ3RoKSB7XHJcbiAgICAgICAgYXJnID0gdGVtcGxhdGVBcmdzW2luZGV4ICsgMl07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKS5yZXBsYWNlKC8gP1xce1tcXHNcXFNdKiQvLCAnJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgcmV0dXJuICd1bmRlZmluZWQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgIHJldHVybiB0b0pzb24oYXJnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbWF0Y2g7XHJcbiAgICB9KTtcclxuXHJcbiAgICBtZXNzYWdlID0gbWVzc2FnZSArICdcXG5odHRwOi8vZXJyb3JzLmFuZ3VsYXJqcy5vcmcvMS4zLjAtcmMuMi8nICtcclxuICAgICAgKG1vZHVsZSA/IG1vZHVsZSArICcvJyA6ICcnKSArIGNvZGU7XHJcbiAgICBmb3IgKGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgKGkgPT0gMiA/ICc/JyA6ICcmJykgKyAncCcgKyAoaS0yKSArICc9JyArXHJcbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeShhcmd1bWVudHNbaV0pKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgRXJyb3JDb25zdHJ1Y3RvcihtZXNzYWdlKTtcclxuICB9O1xyXG59XHJcblxyXG4vKiBXZSBuZWVkIHRvIHRlbGwganNoaW50IHdoYXQgdmFyaWFibGVzIGFyZSBiZWluZyBleHBvcnRlZCAqL1xyXG4vKiBnbG9iYWwgYW5ndWxhcjogdHJ1ZSxcclxuICBtc2llOiB0cnVlLFxyXG4gIGpxTGl0ZTogdHJ1ZSxcclxuICBqUXVlcnk6IHRydWUsXHJcbiAgc2xpY2U6IHRydWUsXHJcbiAgcHVzaDogdHJ1ZSxcclxuICB0b1N0cmluZzogdHJ1ZSxcclxuICBuZ01pbkVycjogdHJ1ZSxcclxuICBhbmd1bGFyTW9kdWxlOiB0cnVlLFxyXG4gIHVpZDogdHJ1ZSxcclxuICBSRUdFWF9TVFJJTkdfUkVHRVhQOiB0cnVlLFxyXG4gIFZBTElESVRZX1NUQVRFX1BST1BFUlRZOiB0cnVlLFxyXG5cclxuICBsb3dlcmNhc2U6IHRydWUsXHJcbiAgdXBwZXJjYXNlOiB0cnVlLFxyXG4gIG1hbnVhbExvd2VyY2FzZTogdHJ1ZSxcclxuICBtYW51YWxVcHBlcmNhc2U6IHRydWUsXHJcbiAgbm9kZU5hbWVfOiB0cnVlLFxyXG4gIGlzQXJyYXlMaWtlOiB0cnVlLFxyXG4gIGZvckVhY2g6IHRydWUsXHJcbiAgc29ydGVkS2V5czogdHJ1ZSxcclxuICBmb3JFYWNoU29ydGVkOiB0cnVlLFxyXG4gIHJldmVyc2VQYXJhbXM6IHRydWUsXHJcbiAgbmV4dFVpZDogdHJ1ZSxcclxuICBzZXRIYXNoS2V5OiB0cnVlLFxyXG4gIGV4dGVuZDogdHJ1ZSxcclxuICBpbnQ6IHRydWUsXHJcbiAgaW5oZXJpdDogdHJ1ZSxcclxuICBub29wOiB0cnVlLFxyXG4gIGlkZW50aXR5OiB0cnVlLFxyXG4gIHZhbHVlRm46IHRydWUsXHJcbiAgaXNVbmRlZmluZWQ6IHRydWUsXHJcbiAgaXNEZWZpbmVkOiB0cnVlLFxyXG4gIGlzT2JqZWN0OiB0cnVlLFxyXG4gIGlzU3RyaW5nOiB0cnVlLFxyXG4gIGlzTnVtYmVyOiB0cnVlLFxyXG4gIGlzRGF0ZTogdHJ1ZSxcclxuICBpc0FycmF5OiB0cnVlLFxyXG4gIGlzRnVuY3Rpb246IHRydWUsXHJcbiAgaXNSZWdFeHA6IHRydWUsXHJcbiAgaXNXaW5kb3c6IHRydWUsXHJcbiAgaXNTY29wZTogdHJ1ZSxcclxuICBpc0ZpbGU6IHRydWUsXHJcbiAgaXNCbG9iOiB0cnVlLFxyXG4gIGlzQm9vbGVhbjogdHJ1ZSxcclxuICBpc1Byb21pc2VMaWtlOiB0cnVlLFxyXG4gIHRyaW06IHRydWUsXHJcbiAgaXNFbGVtZW50OiB0cnVlLFxyXG4gIG1ha2VNYXA6IHRydWUsXHJcbiAgbWFwOiB0cnVlLFxyXG4gIHNpemU6IHRydWUsXHJcbiAgaW5jbHVkZXM6IHRydWUsXHJcbiAgYXJyYXlSZW1vdmU6IHRydWUsXHJcbiAgaXNMZWFmTm9kZTogdHJ1ZSxcclxuICBjb3B5OiB0cnVlLFxyXG4gIHNoYWxsb3dDb3B5OiB0cnVlLFxyXG4gIGVxdWFsczogdHJ1ZSxcclxuICBjc3A6IHRydWUsXHJcbiAgY29uY2F0OiB0cnVlLFxyXG4gIHNsaWNlQXJnczogdHJ1ZSxcclxuICBiaW5kOiB0cnVlLFxyXG4gIHRvSnNvblJlcGxhY2VyOiB0cnVlLFxyXG4gIHRvSnNvbjogdHJ1ZSxcclxuICBmcm9tSnNvbjogdHJ1ZSxcclxuICBzdGFydGluZ1RhZzogdHJ1ZSxcclxuICB0cnlEZWNvZGVVUklDb21wb25lbnQ6IHRydWUsXHJcbiAgcGFyc2VLZXlWYWx1ZTogdHJ1ZSxcclxuICB0b0tleVZhbHVlOiB0cnVlLFxyXG4gIGVuY29kZVVyaVNlZ21lbnQ6IHRydWUsXHJcbiAgZW5jb2RlVXJpUXVlcnk6IHRydWUsXHJcbiAgYW5ndWxhckluaXQ6IHRydWUsXHJcbiAgYm9vdHN0cmFwOiB0cnVlLFxyXG4gIGdldFRlc3RhYmlsaXR5OiB0cnVlLFxyXG4gIHNuYWtlX2Nhc2U6IHRydWUsXHJcbiAgYmluZEpRdWVyeTogdHJ1ZSxcclxuICBhc3NlcnRBcmc6IHRydWUsXHJcbiAgYXNzZXJ0QXJnRm46IHRydWUsXHJcbiAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHk6IHRydWUsXHJcbiAgZ2V0dGVyOiB0cnVlLFxyXG4gIGdldEJsb2NrTm9kZXM6IHRydWUsXHJcbiAgaGFzT3duUHJvcGVydHk6IHRydWUsXHJcbiAgY3JlYXRlTWFwOiB0cnVlLFxyXG4qL1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1vZHVsZVxyXG4gKiBAbmFtZSBuZ1xyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiAjIG5nIChjb3JlIG1vZHVsZSlcclxuICogVGhlIG5nIG1vZHVsZSBpcyBsb2FkZWQgYnkgZGVmYXVsdCB3aGVuIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiBpcyBzdGFydGVkLiBUaGUgbW9kdWxlIGl0c2VsZlxyXG4gKiBjb250YWlucyB0aGUgZXNzZW50aWFsIGNvbXBvbmVudHMgZm9yIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiB0byBmdW5jdGlvbi4gVGhlIHRhYmxlIGJlbG93XHJcbiAqIGxpc3RzIGEgaGlnaCBsZXZlbCBicmVha2Rvd24gb2YgZWFjaCBvZiB0aGUgc2VydmljZXMvZmFjdG9yaWVzLCBmaWx0ZXJzLCBkaXJlY3RpdmVzIGFuZCB0ZXN0aW5nXHJcbiAqIGNvbXBvbmVudHMgYXZhaWxhYmxlIHdpdGhpbiB0aGlzIGNvcmUgbW9kdWxlLlxyXG4gKlxyXG4gKiA8ZGl2IGRvYy1tb2R1bGUtY29tcG9uZW50cz1cIm5nXCI+PC9kaXY+XHJcbiAqL1xyXG5cclxudmFyIFJFR0VYX1NUUklOR19SRUdFWFAgPSAvXlxcLyguKylcXC8oW2Etel0qKSQvO1xyXG5cclxuLy8gVGhlIG5hbWUgb2YgYSBmb3JtIGNvbnRyb2wncyBWYWxpZGl0eVN0YXRlIHByb3BlcnR5LlxyXG4vLyBUaGlzIGlzIHVzZWQgc28gdGhhdCBpdCdzIHBvc3NpYmxlIGZvciBpbnRlcm5hbCB0ZXN0cyB0byBjcmVhdGUgbW9jayBWYWxpZGl0eVN0YXRlcy5cclxudmFyIFZBTElESVRZX1NUQVRFX1BST1BFUlRZID0gJ3ZhbGlkaXR5JztcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5sb3dlcmNhc2VcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb24gQ29udmVydHMgdGhlIHNwZWNpZmllZCBzdHJpbmcgdG8gbG93ZXJjYXNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZyB0byBiZSBjb252ZXJ0ZWQgdG8gbG93ZXJjYXNlLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBMb3dlcmNhc2VkIHN0cmluZy5cclxuICovXHJcbnZhciBsb3dlcmNhc2UgPSBmdW5jdGlvbihzdHJpbmcpe3JldHVybiBpc1N0cmluZyhzdHJpbmcpID8gc3RyaW5nLnRvTG93ZXJDYXNlKCkgOiBzdHJpbmc7fTtcclxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci51cHBlcmNhc2VcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb24gQ29udmVydHMgdGhlIHNwZWNpZmllZCBzdHJpbmcgdG8gdXBwZXJjYXNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZyB0byBiZSBjb252ZXJ0ZWQgdG8gdXBwZXJjYXNlLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBVcHBlcmNhc2VkIHN0cmluZy5cclxuICovXHJcbnZhciB1cHBlcmNhc2UgPSBmdW5jdGlvbihzdHJpbmcpe3JldHVybiBpc1N0cmluZyhzdHJpbmcpID8gc3RyaW5nLnRvVXBwZXJDYXNlKCkgOiBzdHJpbmc7fTtcclxuXHJcblxyXG52YXIgbWFudWFsTG93ZXJjYXNlID0gZnVuY3Rpb24ocykge1xyXG4gIC8qIGpzaGludCBiaXR3aXNlOiBmYWxzZSAqL1xyXG4gIHJldHVybiBpc1N0cmluZyhzKVxyXG4gICAgICA/IHMucmVwbGFjZSgvW0EtWl0vZywgZnVuY3Rpb24oY2gpIHtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaC5jaGFyQ29kZUF0KDApIHwgMzIpO30pXHJcbiAgICAgIDogcztcclxufTtcclxudmFyIG1hbnVhbFVwcGVyY2FzZSA9IGZ1bmN0aW9uKHMpIHtcclxuICAvKiBqc2hpbnQgYml0d2lzZTogZmFsc2UgKi9cclxuICByZXR1cm4gaXNTdHJpbmcocylcclxuICAgICAgPyBzLnJlcGxhY2UoL1thLXpdL2csIGZ1bmN0aW9uKGNoKSB7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2guY2hhckNvZGVBdCgwKSAmIH4zMik7fSlcclxuICAgICAgOiBzO1xyXG59O1xyXG5cclxuXHJcbi8vIFN0cmluZyN0b0xvd2VyQ2FzZSBhbmQgU3RyaW5nI3RvVXBwZXJDYXNlIGRvbid0IHByb2R1Y2UgY29ycmVjdCByZXN1bHRzIGluIGJyb3dzZXJzIHdpdGggVHVya2lzaFxyXG4vLyBsb2NhbGUsIGZvciB0aGlzIHJlYXNvbiB3ZSBuZWVkIHRvIGRldGVjdCB0aGlzIGNhc2UgYW5kIHJlZGVmaW5lIGxvd2VyY2FzZS91cHBlcmNhc2UgbWV0aG9kc1xyXG4vLyB3aXRoIGNvcnJlY3QgYnV0IHNsb3dlciBhbHRlcm5hdGl2ZXMuXHJcbmlmICgnaScgIT09ICdJJy50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgbG93ZXJjYXNlID0gbWFudWFsTG93ZXJjYXNlO1xyXG4gIHVwcGVyY2FzZSA9IG1hbnVhbFVwcGVyY2FzZTtcclxufVxyXG5cclxuXHJcbnZhciAvKiogaG9sZHMgbWFqb3IgdmVyc2lvbiBudW1iZXIgZm9yIElFIG9yIE5hTiBmb3IgcmVhbCBicm93c2VycyAqL1xyXG4gICAgbXNpZSxcclxuICAgIGpxTGl0ZSwgICAgICAgICAgIC8vIGRlbGF5IGJpbmRpbmcgc2luY2UgalF1ZXJ5IGNvdWxkIGJlIGxvYWRlZCBhZnRlciB1cy5cclxuICAgIGpRdWVyeSwgICAgICAgICAgIC8vIGRlbGF5IGJpbmRpbmdcclxuICAgIHNsaWNlICAgICAgICAgICAgID0gW10uc2xpY2UsXHJcbiAgICBwdXNoICAgICAgICAgICAgICA9IFtdLnB1c2gsXHJcbiAgICB0b1N0cmluZyAgICAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsXHJcbiAgICBuZ01pbkVyciAgICAgICAgICA9IG1pbkVycignbmcnKSxcclxuXHJcbiAgICAvKiogQG5hbWUgYW5ndWxhciAqL1xyXG4gICAgYW5ndWxhciAgICAgICAgICAgPSB3aW5kb3cuYW5ndWxhciB8fCAod2luZG93LmFuZ3VsYXIgPSB7fSksXHJcbiAgICBhbmd1bGFyTW9kdWxlLFxyXG4gICAgdWlkICAgICAgICAgICAgICAgPSAwO1xyXG5cclxuLyoqXHJcbiAqIElFIDExIGNoYW5nZWQgdGhlIGZvcm1hdCBvZiB0aGUgVXNlckFnZW50IHN0cmluZy5cclxuICogU2VlIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNzUwMy5hc3B4XHJcbiAqL1xyXG5tc2llID0gaW50KCgvbXNpZSAoXFxkKykvLmV4ZWMobG93ZXJjYXNlKG5hdmlnYXRvci51c2VyQWdlbnQpKSB8fCBbXSlbMV0pO1xyXG5pZiAoaXNOYU4obXNpZSkpIHtcclxuICBtc2llID0gaW50KCgvdHJpZGVudFxcLy4qOyBydjooXFxkKykvLmV4ZWMobG93ZXJjYXNlKG5hdmlnYXRvci51c2VyQWdlbnQpKSB8fCBbXSlbMV0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBwYXJhbSB7Kn0gb2JqXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBgb2JqYCBpcyBhbiBhcnJheSBvciBhcnJheS1saWtlIG9iamVjdCAoTm9kZUxpc3QsIEFyZ3VtZW50cyxcclxuICogICAgICAgICAgICAgICAgICAgU3RyaW5nIC4uLilcclxuICovXHJcbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKG9iaikge1xyXG4gIGlmIChvYmogPT0gbnVsbCB8fCBpc1dpbmRvdyhvYmopKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aDtcclxuXHJcbiAgaWYgKG9iai5ub2RlVHlwZSA9PT0gMSAmJiBsZW5ndGgpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGlzU3RyaW5nKG9iaikgfHwgaXNBcnJheShvYmopIHx8IGxlbmd0aCA9PT0gMCB8fFxyXG4gICAgICAgICB0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJyAmJiBsZW5ndGggPiAwICYmIChsZW5ndGggLSAxKSBpbiBvYmo7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5mb3JFYWNoXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEludm9rZXMgdGhlIGBpdGVyYXRvcmAgZnVuY3Rpb24gb25jZSBmb3IgZWFjaCBpdGVtIGluIGBvYmpgIGNvbGxlY3Rpb24sIHdoaWNoIGNhbiBiZSBlaXRoZXIgYW5cclxuICogb2JqZWN0IG9yIGFuIGFycmF5LiBUaGUgYGl0ZXJhdG9yYCBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGggYGl0ZXJhdG9yKHZhbHVlLCBrZXksIG9iailgLCB3aGVyZSBgdmFsdWVgXHJcbiAqIGlzIHRoZSB2YWx1ZSBvZiBhbiBvYmplY3QgcHJvcGVydHkgb3IgYW4gYXJyYXkgZWxlbWVudCwgYGtleWAgaXMgdGhlIG9iamVjdCBwcm9wZXJ0eSBrZXkgb3JcclxuICogYXJyYXkgZWxlbWVudCBpbmRleCBhbmQgb2JqIGlzIHRoZSBgb2JqYCBpdHNlbGYuIFNwZWNpZnlpbmcgYSBgY29udGV4dGAgZm9yIHRoZSBmdW5jdGlvbiBpcyBvcHRpb25hbC5cclxuICpcclxuICogSXQgaXMgd29ydGggbm90aW5nIHRoYXQgYC5mb3JFYWNoYCBkb2VzIG5vdCBpdGVyYXRlIG92ZXIgaW5oZXJpdGVkIHByb3BlcnRpZXMgYmVjYXVzZSBpdCBmaWx0ZXJzXHJcbiAqIHVzaW5nIHRoZSBgaGFzT3duUHJvcGVydHlgIG1ldGhvZC5cclxuICpcclxuICAgYGBganNcclxuICAgICB2YXIgdmFsdWVzID0ge25hbWU6ICdtaXNrbycsIGdlbmRlcjogJ21hbGUnfTtcclxuICAgICB2YXIgbG9nID0gW107XHJcbiAgICAgYW5ndWxhci5mb3JFYWNoKHZhbHVlcywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgdGhpcy5wdXNoKGtleSArICc6ICcgKyB2YWx1ZSk7XHJcbiAgICAgfSwgbG9nKTtcclxuICAgICBleHBlY3QobG9nKS50b0VxdWFsKFsnbmFtZTogbWlza28nLCAnZ2VuZGVyOiBtYWxlJ10pO1xyXG4gICBgYGBcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBPYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRvciBJdGVyYXRvciBmdW5jdGlvbi5cclxuICogQHBhcmFtIHtPYmplY3Q9fSBjb250ZXh0IE9iamVjdCB0byBiZWNvbWUgY29udGV4dCAoYHRoaXNgKSBmb3IgdGhlIGl0ZXJhdG9yIGZ1bmN0aW9uLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fEFycmF5fSBSZWZlcmVuY2UgdG8gYG9iamAuXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gZm9yRWFjaChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XHJcbiAgdmFyIGtleSwgbGVuZ3RoO1xyXG4gIGlmIChvYmopIHtcclxuICAgIGlmIChpc0Z1bmN0aW9uKG9iaikpIHtcclxuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgLy8gTmVlZCB0byBjaGVjayBpZiBoYXNPd25Qcm9wZXJ0eSBleGlzdHMsXHJcbiAgICAgICAgLy8gYXMgb24gSUU4IHRoZSByZXN1bHQgb2YgcXVlcnlTZWxlY3RvckFsbCBpcyBhbiBvYmplY3Qgd2l0aG91dCBhIGhhc093blByb3BlcnR5IGZ1bmN0aW9uXHJcbiAgICAgICAgaWYgKGtleSAhPSAncHJvdG90eXBlJyAmJiBrZXkgIT0gJ2xlbmd0aCcgJiYga2V5ICE9ICduYW1lJyAmJiAoIW9iai5oYXNPd25Qcm9wZXJ0eSB8fCBvYmouaGFzT3duUHJvcGVydHkoa2V5KSkpIHtcclxuICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmopIHx8IGlzQXJyYXlMaWtlKG9iaikpIHtcclxuICAgICAgdmFyIGlzUHJpbWl0aXZlID0gdHlwZW9mIG9iaiAhPT0gJ29iamVjdCc7XHJcbiAgICAgIGZvciAoa2V5ID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsga2V5IDwgbGVuZ3RoOyBrZXkrKykge1xyXG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSB8fCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG9iai5mb3JFYWNoICYmIG9iai5mb3JFYWNoICE9PSBmb3JFYWNoKSB7XHJcbiAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQsIG9iaik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IgKGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuZnVuY3Rpb24gc29ydGVkS2V5cyhvYmopIHtcclxuICB2YXIga2V5cyA9IFtdO1xyXG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICBrZXlzLnB1c2goa2V5KTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGtleXMuc29ydCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JFYWNoU29ydGVkKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcclxuICB2YXIga2V5cyA9IHNvcnRlZEtleXMob2JqKTtcclxuICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXlzW2ldXSwga2V5c1tpXSk7XHJcbiAgfVxyXG4gIHJldHVybiBrZXlzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIHdoZW4gdXNpbmcgZm9yRWFjaCB0aGUgcGFyYW1zIGFyZSB2YWx1ZSwga2V5LCBidXQgaXQgaXMgb2Z0ZW4gdXNlZnVsIHRvIGhhdmUga2V5LCB2YWx1ZS5cclxuICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcsICopfSBpdGVyYXRvckZuXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigqLCBzdHJpbmcpfVxyXG4gKi9cclxuZnVuY3Rpb24gcmV2ZXJzZVBhcmFtcyhpdGVyYXRvckZuKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHsgaXRlcmF0b3JGbihrZXksIHZhbHVlKTsgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgY29uc2lzdGVudCB3YXkgb2YgY3JlYXRpbmcgdW5pcXVlIElEcyBpbiBhbmd1bGFyLlxyXG4gKlxyXG4gKiBVc2luZyBzaW1wbGUgbnVtYmVycyBhbGxvd3MgdXMgdG8gZ2VuZXJhdGUgMjguNiBtaWxsaW9uIHVuaXF1ZSBpZHMgcGVyIHNlY29uZCBmb3IgMTAgeWVhcnMgYmVmb3JlXHJcbiAqIHdlIGhpdCBudW1iZXIgcHJlY2lzaW9uIGlzc3VlcyBpbiBKYXZhU2NyaXB0LlxyXG4gKlxyXG4gKiBNYXRoLnBvdygyLDUzKSAvIDYwIC8gNjAgLyAyNCAvIDM2NSAvIDEwID0gMjguNk1cclxuICpcclxuICogQHJldHVybnMge251bWJlcn0gYW4gdW5pcXVlIGFscGhhLW51bWVyaWMgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBuZXh0VWlkKCkge1xyXG4gIHJldHVybiArK3VpZDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgb3IgY2xlYXIgdGhlIGhhc2hrZXkgZm9yIGFuIG9iamVjdC5cclxuICogQHBhcmFtIG9iaiBvYmplY3RcclxuICogQHBhcmFtIGggdGhlIGhhc2hrZXkgKCF0cnV0aHkgdG8gZGVsZXRlIHRoZSBoYXNoa2V5KVxyXG4gKi9cclxuZnVuY3Rpb24gc2V0SGFzaEtleShvYmosIGgpIHtcclxuICBpZiAoaCkge1xyXG4gICAgb2JqLiQkaGFzaEtleSA9IGg7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgZGVsZXRlIG9iai4kJGhhc2hLZXk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZXh0ZW5kXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEV4dGVuZHMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBgZHN0YCBieSBjb3B5aW5nIGFsbCBvZiB0aGUgcHJvcGVydGllcyBmcm9tIHRoZSBgc3JjYCBvYmplY3QocylcclxuICogdG8gYGRzdGAuIFlvdSBjYW4gc3BlY2lmeSBtdWx0aXBsZSBgc3JjYCBvYmplY3RzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZHN0IERlc3RpbmF0aW9uIG9iamVjdC5cclxuICogQHBhcmFtIHsuLi5PYmplY3R9IHNyYyBTb3VyY2Ugb2JqZWN0KHMpLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZWZlcmVuY2UgdG8gYGRzdGAuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRlbmQoZHN0KSB7XHJcbiAgdmFyIGggPSBkc3QuJCRoYXNoS2V5O1xyXG5cclxuICBmb3IgKHZhciBpID0gMSwgaWkgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tpXTtcclxuICAgIGlmIChvYmopIHtcclxuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xyXG4gICAgICBmb3IgKHZhciBqID0gMCwgamogPSBrZXlzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcclxuICAgICAgICB2YXIga2V5ID0ga2V5c1tqXTtcclxuICAgICAgICBkc3Rba2V5XSA9IG9ialtrZXldO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRIYXNoS2V5KGRzdCwgaCk7XHJcbiAgcmV0dXJuIGRzdDtcclxufVxyXG5cclxuZnVuY3Rpb24gaW50KHN0cikge1xyXG4gIHJldHVybiBwYXJzZUludChzdHIsIDEwKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGluaGVyaXQocGFyZW50LCBleHRyYSkge1xyXG4gIHJldHVybiBleHRlbmQobmV3IChleHRlbmQoZnVuY3Rpb24oKSB7fSwge3Byb3RvdHlwZTpwYXJlbnR9KSkoKSwgZXh0cmEpO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIubm9vcFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgbm8gb3BlcmF0aW9ucy4gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZnVsIHdoZW4gd3JpdGluZyBjb2RlIGluIHRoZVxyXG4gKiBmdW5jdGlvbmFsIHN0eWxlLlxyXG4gICBgYGBqc1xyXG4gICAgIGZ1bmN0aW9uIGZvbyhjYWxsYmFjaykge1xyXG4gICAgICAgdmFyIHJlc3VsdCA9IGNhbGN1bGF0ZVJlc3VsdCgpO1xyXG4gICAgICAgKGNhbGxiYWNrIHx8IGFuZ3VsYXIubm9vcCkocmVzdWx0KTtcclxuICAgICB9XHJcbiAgIGBgYFxyXG4gKi9cclxuZnVuY3Rpb24gbm9vcCgpIHt9XHJcbm5vb3AuJGluamVjdCA9IFtdO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pZGVudGl0eVxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBpdHMgZmlyc3QgYXJndW1lbnQuIFRoaXMgZnVuY3Rpb24gaXMgdXNlZnVsIHdoZW4gd3JpdGluZyBjb2RlIGluIHRoZVxyXG4gKiBmdW5jdGlvbmFsIHN0eWxlLlxyXG4gKlxyXG4gICBgYGBqc1xyXG4gICAgIGZ1bmN0aW9uIHRyYW5zZm9ybWVyKHRyYW5zZm9ybWF0aW9uRm4sIHZhbHVlKSB7XHJcbiAgICAgICByZXR1cm4gKHRyYW5zZm9ybWF0aW9uRm4gfHwgYW5ndWxhci5pZGVudGl0eSkodmFsdWUpO1xyXG4gICAgIH07XHJcbiAgIGBgYFxyXG4gKi9cclxuZnVuY3Rpb24gaWRlbnRpdHkoJCkge3JldHVybiAkO31cclxuaWRlbnRpdHkuJGluamVjdCA9IFtdO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHZhbHVlRm4odmFsdWUpIHtyZXR1cm4gZnVuY3Rpb24oKSB7cmV0dXJuIHZhbHVlO307fVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzVW5kZWZpbmVkXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgdW5kZWZpbmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyB1bmRlZmluZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCc7fVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc0RlZmluZWRcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBkZWZpbmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBkZWZpbmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJzt9XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzT2JqZWN0XHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYW4gYE9iamVjdGAuIFVubGlrZSBgdHlwZW9mYCBpbiBKYXZhU2NyaXB0LCBgbnVsbGBzIGFyZSBub3RcclxuICogY29uc2lkZXJlZCB0byBiZSBvYmplY3RzLiBOb3RlIHRoYXQgSmF2YVNjcmlwdCBhcnJheXMgYXJlIG9iamVjdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBPYmplY3RgIGJ1dCBub3QgYG51bGxgLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpe1xyXG4gIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2lzb2JqZWN0NFxyXG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzU3RyaW5nXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgU3RyaW5nYC5cclxuICpcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgU3RyaW5nYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJzt9XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzTnVtYmVyXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgTnVtYmVyYC5cclxuICpcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgTnVtYmVyYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJzt9XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzRGF0ZVxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgdmFsdWUgaXMgYSBkYXRlLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBEYXRlYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xyXG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzQXJyYXlcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgQXJyYXlgLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgQXJyYXlgLlxyXG4gKi9cclxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzRnVuY3Rpb25cclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIGBGdW5jdGlvbmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYEZ1bmN0aW9uYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7fVxyXG5cclxuXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgdmFsdWUgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24gb2JqZWN0LlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBSZWdFeHBgLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWdFeHAodmFsdWUpIHtcclxuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBgb2JqYCBpcyBhIHdpbmRvdyBvYmplY3QuXHJcbiAqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBwYXJhbSB7Kn0gb2JqIE9iamVjdCB0byBjaGVja1xyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqYCBpcyBhIHdpbmRvdyBvYmouXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1dpbmRvdyhvYmopIHtcclxuICByZXR1cm4gb2JqICYmIG9iai53aW5kb3cgPT09IG9iajtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlzU2NvcGUob2JqKSB7XHJcbiAgcmV0dXJuIG9iaiAmJiBvYmouJGV2YWxBc3luYyAmJiBvYmouJHdhdGNoO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNGaWxlKG9iaikge1xyXG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEZpbGVdJztcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlzQmxvYihvYmopIHtcclxuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBCbG9iXSc7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcclxuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc1Byb21pc2VMaWtlKG9iaikge1xyXG4gIHJldHVybiBvYmogJiYgaXNGdW5jdGlvbihvYmoudGhlbik7XHJcbn1cclxuXHJcblxyXG52YXIgdHJpbSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgcmV0dXJuIGlzU3RyaW5nKHZhbHVlKSA/IHZhbHVlLnRyaW0oKSA6IHZhbHVlO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc0VsZW1lbnRcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIERPTSBlbGVtZW50IChvciB3cmFwcGVkIGpRdWVyeSBlbGVtZW50KS5cclxuICpcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudCAob3Igd3JhcHBlZCBqUXVlcnkgZWxlbWVudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZSkge1xyXG4gIHJldHVybiAhIShub2RlICYmXHJcbiAgICAobm9kZS5ub2RlTmFtZSAgLy8gd2UgYXJlIGEgZGlyZWN0IGVsZW1lbnRcclxuICAgIHx8IChub2RlLnByb3AgJiYgbm9kZS5hdHRyICYmIG5vZGUuZmluZCkpKTsgIC8vIHdlIGhhdmUgYW4gb24gYW5kIGZpbmQgbWV0aG9kIHBhcnQgb2YgalF1ZXJ5IEFQSVxyXG59XHJcblxyXG4vKipcclxuICogQHBhcmFtIHN0ciAna2V5MSxrZXkyLC4uLidcclxuICogQHJldHVybnMge29iamVjdH0gaW4gdGhlIGZvcm0gb2Yge2tleTE6dHJ1ZSwga2V5Mjp0cnVlLCAuLi59XHJcbiAqL1xyXG5mdW5jdGlvbiBtYWtlTWFwKHN0cikge1xyXG4gIHZhciBvYmogPSB7fSwgaXRlbXMgPSBzdHIuc3BsaXQoXCIsXCIpLCBpO1xyXG4gIGZvciAoIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKysgKVxyXG4gICAgb2JqWyBpdGVtc1tpXSBdID0gdHJ1ZTtcclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gbm9kZU5hbWVfKGVsZW1lbnQpIHtcclxuICByZXR1cm4gbG93ZXJjYXNlKGVsZW1lbnQubm9kZU5hbWUgfHwgZWxlbWVudFswXS5ub2RlTmFtZSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBtYXAob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xyXG4gIHZhciByZXN1bHRzID0gW107XHJcbiAgZm9yRWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xyXG4gICAgcmVzdWx0cy5wdXNoKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3VsdHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBhcnJheSwgdGhlIG51bWJlciBvZiBwcm9wZXJ0aWVzIGFuIG9iamVjdCBoYXMsIG9yXHJcbiAqIHRoZSBsZW5ndGggb2YgYSBzdHJpbmcuXHJcbiAqXHJcbiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdWdtZW50IHRoZSBPYmplY3QgdHlwZSBpbiBBbmd1bGFyIGV4cHJlc3Npb25zLiBTZWVcclxuICoge0BsaW5rIGFuZ3VsYXIuT2JqZWN0fSBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBBbmd1bGFyIGFycmF5cy5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl8c3RyaW5nfSBvYmogT2JqZWN0LCBhcnJheSwgb3Igc3RyaW5nIHRvIGluc3BlY3QuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW293blByb3BzT25seT1mYWxzZV0gQ291bnQgb25seSBcIm93blwiIHByb3BlcnRpZXMgaW4gYW4gb2JqZWN0XHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBzaXplIG9mIGBvYmpgIG9yIGAwYCBpZiBgb2JqYCBpcyBuZWl0aGVyIGFuIG9iamVjdCBub3IgYW4gYXJyYXkuXHJcbiAqL1xyXG5mdW5jdGlvbiBzaXplKG9iaiwgb3duUHJvcHNPbmx5KSB7XHJcbiAgdmFyIGNvdW50ID0gMCwga2V5O1xyXG5cclxuICBpZiAoaXNBcnJheShvYmopIHx8IGlzU3RyaW5nKG9iaikpIHtcclxuICAgIHJldHVybiBvYmoubGVuZ3RoO1xyXG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qob2JqKSkge1xyXG4gICAgZm9yIChrZXkgaW4gb2JqKVxyXG4gICAgICBpZiAoIW93blByb3BzT25seSB8fCBvYmouaGFzT3duUHJvcGVydHkoa2V5KSlcclxuICAgICAgICBjb3VudCsrO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNvdW50O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaW5jbHVkZXMoYXJyYXksIG9iaikge1xyXG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFycmF5LCBvYmopICE9IC0xO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcnJheVJlbW92ZShhcnJheSwgdmFsdWUpIHtcclxuICB2YXIgaW5kZXggPSBhcnJheS5pbmRleE9mKHZhbHVlKTtcclxuICBpZiAoaW5kZXggPj0wKVxyXG4gICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzTGVhZk5vZGUgKG5vZGUpIHtcclxuICBpZiAobm9kZSkge1xyXG4gICAgc3dpdGNoIChub2RlTmFtZV8obm9kZSkpIHtcclxuICAgIGNhc2UgXCJvcHRpb25cIjpcclxuICAgIGNhc2UgXCJwcmVcIjpcclxuICAgIGNhc2UgXCJ0aXRsZVwiOlxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuY29weVxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLCB3aGljaCBzaG91bGQgYmUgYW4gb2JqZWN0IG9yIGFuIGFycmF5LlxyXG4gKlxyXG4gKiAqIElmIG5vIGRlc3RpbmF0aW9uIGlzIHN1cHBsaWVkLCBhIGNvcHkgb2YgdGhlIG9iamVjdCBvciBhcnJheSBpcyBjcmVhdGVkLlxyXG4gKiAqIElmIGEgZGVzdGluYXRpb24gaXMgcHJvdmlkZWQsIGFsbCBvZiBpdHMgZWxlbWVudHMgKGZvciBhcnJheSkgb3IgcHJvcGVydGllcyAoZm9yIG9iamVjdHMpXHJcbiAqICAgYXJlIGRlbGV0ZWQgYW5kIHRoZW4gYWxsIGVsZW1lbnRzL3Byb3BlcnRpZXMgZnJvbSB0aGUgc291cmNlIGFyZSBjb3BpZWQgdG8gaXQuXHJcbiAqICogSWYgYHNvdXJjZWAgaXMgbm90IGFuIG9iamVjdCBvciBhcnJheSAoaW5jLiBgbnVsbGAgYW5kIGB1bmRlZmluZWRgKSwgYHNvdXJjZWAgaXMgcmV0dXJuZWQuXHJcbiAqICogSWYgYHNvdXJjZWAgaXMgaWRlbnRpY2FsIHRvICdkZXN0aW5hdGlvbicgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBUaGUgc291cmNlIHRoYXQgd2lsbCBiZSB1c2VkIHRvIG1ha2UgYSBjb3B5LlxyXG4gKiAgICAgICAgICAgICAgICAgICBDYW4gYmUgYW55IHR5cGUsIGluY2x1ZGluZyBwcmltaXRpdmVzLCBgbnVsbGAsIGFuZCBgdW5kZWZpbmVkYC5cclxuICogQHBhcmFtIHsoT2JqZWN0fEFycmF5KT19IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIGludG8gd2hpY2ggdGhlIHNvdXJjZSBpcyBjb3BpZWQuIElmXHJcbiAqICAgICBwcm92aWRlZCwgbXVzdCBiZSBvZiB0aGUgc2FtZSB0eXBlIGFzIGBzb3VyY2VgLlxyXG4gKiBAcmV0dXJucyB7Kn0gVGhlIGNvcHkgb3IgdXBkYXRlZCBgZGVzdGluYXRpb25gLCBpZiBgZGVzdGluYXRpb25gIHdhcyBzcGVjaWZpZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiA8ZXhhbXBsZSBtb2R1bGU9XCJjb3B5RXhhbXBsZVwiPlxyXG4gPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiA8Zm9ybSBub3ZhbGlkYXRlIGNsYXNzPVwic2ltcGxlLWZvcm1cIj5cclxuIE5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidXNlci5uYW1lXCIgLz48YnIgLz5cclxuIEUtbWFpbDogPGlucHV0IHR5cGU9XCJlbWFpbFwiIG5nLW1vZGVsPVwidXNlci5lbWFpbFwiIC8+PGJyIC8+XHJcbiBHZW5kZXI6IDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cInVzZXIuZ2VuZGVyXCIgdmFsdWU9XCJtYWxlXCIgLz5tYWxlXHJcbiA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJ1c2VyLmdlbmRlclwiIHZhbHVlPVwiZmVtYWxlXCIgLz5mZW1hbGU8YnIgLz5cclxuIDxidXR0b24gbmctY2xpY2s9XCJyZXNldCgpXCI+UkVTRVQ8L2J1dHRvbj5cclxuIDxidXR0b24gbmctY2xpY2s9XCJ1cGRhdGUodXNlcilcIj5TQVZFPC9idXR0b24+XHJcbiA8L2Zvcm0+XHJcbiA8cHJlPmZvcm0gPSB7e3VzZXIgfCBqc29ufX08L3ByZT5cclxuIDxwcmU+bWFzdGVyID0ge3ttYXN0ZXIgfCBqc29ufX08L3ByZT5cclxuIDwvZGl2PlxyXG5cclxuIDxzY3JpcHQ+XHJcbiAgYW5ndWxhci5tb2R1bGUoJ2NvcHlFeGFtcGxlJywgW10pXHJcbiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAkc2NvcGUubWFzdGVyPSB7fTtcclxuXHJcbiAgICAgICRzY29wZS51cGRhdGUgPSBmdW5jdGlvbih1c2VyKSB7XHJcbiAgICAgICAgLy8gRXhhbXBsZSB3aXRoIDEgYXJndW1lbnRcclxuICAgICAgICAkc2NvcGUubWFzdGVyPSBhbmd1bGFyLmNvcHkodXNlcik7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBFeGFtcGxlIHdpdGggMiBhcmd1bWVudHNcclxuICAgICAgICBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3RlciwgJHNjb3BlLnVzZXIpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJHNjb3BlLnJlc2V0KCk7XHJcbiAgICB9XSk7XHJcbiA8L3NjcmlwdD5cclxuIDwvZmlsZT5cclxuIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uIGNvcHkoc291cmNlLCBkZXN0aW5hdGlvbiwgc3RhY2tTb3VyY2UsIHN0YWNrRGVzdCkge1xyXG4gIGlmIChpc1dpbmRvdyhzb3VyY2UpIHx8IGlzU2NvcGUoc291cmNlKSkge1xyXG4gICAgdGhyb3cgbmdNaW5FcnIoJ2Nwd3MnLFxyXG4gICAgICBcIkNhbid0IGNvcHkhIE1ha2luZyBjb3BpZXMgb2YgV2luZG93IG9yIFNjb3BlIGluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLlwiKTtcclxuICB9XHJcblxyXG4gIGlmICghZGVzdGluYXRpb24pIHtcclxuICAgIGRlc3RpbmF0aW9uID0gc291cmNlO1xyXG4gICAgaWYgKHNvdXJjZSkge1xyXG4gICAgICBpZiAoaXNBcnJheShzb3VyY2UpKSB7XHJcbiAgICAgICAgZGVzdGluYXRpb24gPSBjb3B5KHNvdXJjZSwgW10sIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzRGF0ZShzb3VyY2UpKSB7XHJcbiAgICAgICAgZGVzdGluYXRpb24gPSBuZXcgRGF0ZShzb3VyY2UuZ2V0VGltZSgpKTtcclxuICAgICAgfSBlbHNlIGlmIChpc1JlZ0V4cChzb3VyY2UpKSB7XHJcbiAgICAgICAgZGVzdGluYXRpb24gPSBuZXcgUmVnRXhwKHNvdXJjZS5zb3VyY2UsIHNvdXJjZS50b1N0cmluZygpLm1hdGNoKC9bXlxcL10qJC8pWzBdKTtcclxuICAgICAgICBkZXN0aW5hdGlvbi5sYXN0SW5kZXggPSBzb3VyY2UubGFzdEluZGV4O1xyXG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcclxuICAgICAgICB2YXIgZW1wdHlPYmplY3QgPSBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihzb3VyY2UpKTtcclxuICAgICAgICBkZXN0aW5hdGlvbiA9IGNvcHkoc291cmNlLCBlbXB0eU9iamVjdCwgc3RhY2tTb3VyY2UsIHN0YWNrRGVzdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKHNvdXJjZSA9PT0gZGVzdGluYXRpb24pIHRocm93IG5nTWluRXJyKCdjcGknLFxyXG4gICAgICBcIkNhbid0IGNvcHkhIFNvdXJjZSBhbmQgZGVzdGluYXRpb24gYXJlIGlkZW50aWNhbC5cIik7XHJcblxyXG4gICAgc3RhY2tTb3VyY2UgPSBzdGFja1NvdXJjZSB8fCBbXTtcclxuICAgIHN0YWNrRGVzdCA9IHN0YWNrRGVzdCB8fCBbXTtcclxuXHJcbiAgICBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xyXG4gICAgICB2YXIgaW5kZXggPSBzdGFja1NvdXJjZS5pbmRleE9mKHNvdXJjZSk7XHJcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHJldHVybiBzdGFja0Rlc3RbaW5kZXhdO1xyXG5cclxuICAgICAgc3RhY2tTb3VyY2UucHVzaChzb3VyY2UpO1xyXG4gICAgICBzdGFja0Rlc3QucHVzaChkZXN0aW5hdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJlc3VsdDtcclxuICAgIGlmIChpc0FycmF5KHNvdXJjZSkpIHtcclxuICAgICAgZGVzdGluYXRpb24ubGVuZ3RoID0gMDtcclxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gY29weShzb3VyY2VbaV0sIG51bGwsIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xyXG4gICAgICAgIGlmIChpc09iamVjdChzb3VyY2VbaV0pKSB7XHJcbiAgICAgICAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZVtpXSk7XHJcbiAgICAgICAgICBzdGFja0Rlc3QucHVzaChyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZXN0aW5hdGlvbi5wdXNoKHJlc3VsdCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBoID0gZGVzdGluYXRpb24uJCRoYXNoS2V5O1xyXG4gICAgICBpZiAoaXNBcnJheShkZXN0aW5hdGlvbikpIHtcclxuICAgICAgICBkZXN0aW5hdGlvbi5sZW5ndGggPSAwO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvckVhY2goZGVzdGluYXRpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgIGRlbGV0ZSBkZXN0aW5hdGlvbltrZXldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAoIHZhciBrZXkgaW4gc291cmNlKSB7XHJcbiAgICAgICAgaWYoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgIHJlc3VsdCA9IGNvcHkoc291cmNlW2tleV0sIG51bGwsIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xyXG4gICAgICAgICAgaWYgKGlzT2JqZWN0KHNvdXJjZVtrZXldKSkge1xyXG4gICAgICAgICAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZVtrZXldKTtcclxuICAgICAgICAgICAgc3RhY2tEZXN0LnB1c2gocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRlc3RpbmF0aW9uW2tleV0gPSByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNldEhhc2hLZXkoZGVzdGluYXRpb24saCk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICByZXR1cm4gZGVzdGluYXRpb247XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2hhbGxvdyBjb3B5IG9mIGFuIG9iamVjdCwgYW4gYXJyYXkgb3IgYSBwcmltaXRpdmUuXHJcbiAqXHJcbiAqIEFzc3VtZXMgdGhhdCB0aGVyZSBhcmUgbm8gcHJvdG8gcHJvcGVydGllcyBmb3Igb2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KHNyYywgZHN0KSB7XHJcbiAgaWYgKGlzQXJyYXkoc3JjKSkge1xyXG4gICAgZHN0ID0gZHN0IHx8IFtdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHNyYy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgIGRzdFtpXSA9IHNyY1tpXTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNyYykpIHtcclxuICAgIGRzdCA9IGRzdCB8fCB7fTtcclxuXHJcbiAgICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XHJcbiAgICAgIGlmICghKGtleS5jaGFyQXQoMCkgPT09ICckJyAmJiBrZXkuY2hhckF0KDEpID09PSAnJCcpKSB7XHJcbiAgICAgICAgZHN0W2tleV0gPSBzcmNba2V5XTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRzdCB8fCBzcmM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZXF1YWxzXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgdHdvIG9iamVjdHMgb3IgdHdvIHZhbHVlcyBhcmUgZXF1aXZhbGVudC4gU3VwcG9ydHMgdmFsdWUgdHlwZXMsIHJlZ3VsYXJcclxuICogZXhwcmVzc2lvbnMsIGFycmF5cyBhbmQgb2JqZWN0cy5cclxuICpcclxuICogVHdvIG9iamVjdHMgb3IgdmFsdWVzIGFyZSBjb25zaWRlcmVkIGVxdWl2YWxlbnQgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBmb2xsb3dpbmcgaXMgdHJ1ZTpcclxuICpcclxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIHBhc3MgYD09PWAgY29tcGFyaXNvbi5cclxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIGFyZSBvZiB0aGUgc2FtZSB0eXBlIGFuZCBhbGwgb2YgdGhlaXIgcHJvcGVydGllcyBhcmUgZXF1YWwgYnlcclxuICogICBjb21wYXJpbmcgdGhlbSB3aXRoIGBhbmd1bGFyLmVxdWFsc2AuXHJcbiAqICogQm90aCB2YWx1ZXMgYXJlIE5hTi4gKEluIEphdmFTY3JpcHQsIE5hTiA9PSBOYU4gPT4gZmFsc2UuIEJ1dCB3ZSBjb25zaWRlciB0d28gTmFOIGFzIGVxdWFsKVxyXG4gKiAqIEJvdGggdmFsdWVzIHJlcHJlc2VudCB0aGUgc2FtZSByZWd1bGFyIGV4cHJlc3Npb24gKEluIEphdmFTY3JpcHQsXHJcbiAqICAgL2FiYy8gPT0gL2FiYy8gPT4gZmFsc2UuIEJ1dCB3ZSBjb25zaWRlciB0d28gcmVndWxhciBleHByZXNzaW9ucyBhcyBlcXVhbCB3aGVuIHRoZWlyIHRleHR1YWxcclxuICogICByZXByZXNlbnRhdGlvbiBtYXRjaGVzKS5cclxuICpcclxuICogRHVyaW5nIGEgcHJvcGVydHkgY29tcGFyaXNvbiwgcHJvcGVydGllcyBvZiBgZnVuY3Rpb25gIHR5cGUgYW5kIHByb3BlcnRpZXMgd2l0aCBuYW1lc1xyXG4gKiB0aGF0IGJlZ2luIHdpdGggYCRgIGFyZSBpZ25vcmVkLlxyXG4gKlxyXG4gKiBTY29wZSBhbmQgRE9NV2luZG93IG9iamVjdHMgYXJlIGJlaW5nIGNvbXBhcmVkIG9ubHkgYnkgaWRlbnRpZnkgKGA9PT1gKS5cclxuICpcclxuICogQHBhcmFtIHsqfSBvMSBPYmplY3Qgb3IgdmFsdWUgdG8gY29tcGFyZS5cclxuICogQHBhcmFtIHsqfSBvMiBPYmplY3Qgb3IgdmFsdWUgdG8gY29tcGFyZS5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYXJndW1lbnRzIGFyZSBlcXVhbC5cclxuICovXHJcbmZ1bmN0aW9uIGVxdWFscyhvMSwgbzIpIHtcclxuICBpZiAobzEgPT09IG8yKSByZXR1cm4gdHJ1ZTtcclxuICBpZiAobzEgPT09IG51bGwgfHwgbzIgPT09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICBpZiAobzEgIT09IG8xICYmIG8yICE9PSBvMikgcmV0dXJuIHRydWU7IC8vIE5hTiA9PT0gTmFOXHJcbiAgdmFyIHQxID0gdHlwZW9mIG8xLCB0MiA9IHR5cGVvZiBvMiwgbGVuZ3RoLCBrZXksIGtleVNldDtcclxuICBpZiAodDEgPT0gdDIpIHtcclxuICAgIGlmICh0MSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICBpZiAoaXNBcnJheShvMSkpIHtcclxuICAgICAgICBpZiAoIWlzQXJyYXkobzIpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKChsZW5ndGggPSBvMS5sZW5ndGgpID09IG8yLmxlbmd0aCkge1xyXG4gICAgICAgICAgZm9yKGtleT0wOyBrZXk8bGVuZ3RoOyBrZXkrKykge1xyXG4gICAgICAgICAgICBpZiAoIWVxdWFscyhvMVtrZXldLCBvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGlzRGF0ZShvMSkpIHtcclxuICAgICAgICBpZiAoIWlzRGF0ZShvMikpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gZXF1YWxzKG8xLmdldFRpbWUoKSwgbzIuZ2V0VGltZSgpKTtcclxuICAgICAgfSBlbHNlIGlmIChpc1JlZ0V4cChvMSkgJiYgaXNSZWdFeHAobzIpKSB7XHJcbiAgICAgICAgcmV0dXJuIG8xLnRvU3RyaW5nKCkgPT0gbzIudG9TdHJpbmcoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoaXNTY29wZShvMSkgfHwgaXNTY29wZShvMikgfHwgaXNXaW5kb3cobzEpIHx8IGlzV2luZG93KG8yKSB8fCBpc0FycmF5KG8yKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGtleVNldCA9IHt9O1xyXG4gICAgICAgIGZvcihrZXkgaW4gbzEpIHtcclxuICAgICAgICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnJCcgfHwgaXNGdW5jdGlvbihvMVtrZXldKSkgY29udGludWU7XHJcbiAgICAgICAgICBpZiAoIWVxdWFscyhvMVtrZXldLCBvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAga2V5U2V0W2tleV0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3Ioa2V5IGluIG8yKSB7XHJcbiAgICAgICAgICBpZiAoIWtleVNldC5oYXNPd25Qcm9wZXJ0eShrZXkpICYmXHJcbiAgICAgICAgICAgICAga2V5LmNoYXJBdCgwKSAhPT0gJyQnICYmXHJcbiAgICAgICAgICAgICAgbzJba2V5XSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgIWlzRnVuY3Rpb24obzJba2V5XSkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG52YXIgY3NwID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKGlzRGVmaW5lZChjc3AuaXNBY3RpdmVfKSkgcmV0dXJuIGNzcC5pc0FjdGl2ZV87XHJcblxyXG4gIHZhciBhY3RpdmUgPSAhIShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmctY3NwXScpIHx8XHJcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5nLWNzcF0nKSk7XHJcblxyXG4gIGlmICghYWN0aXZlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvKiBqc2hpbnQgLVcwMzEsIC1XMDU0ICovXHJcbiAgICAgIG5ldyBGdW5jdGlvbignJyk7XHJcbiAgICAgIC8qIGpzaGludCArVzAzMSwgK1cwNTQgKi9cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgYWN0aXZlID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiAoY3NwLmlzQWN0aXZlXyA9IGFjdGl2ZSk7XHJcbn07XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGNvbmNhdChhcnJheTEsIGFycmF5MiwgaW5kZXgpIHtcclxuICByZXR1cm4gYXJyYXkxLmNvbmNhdChzbGljZS5jYWxsKGFycmF5MiwgaW5kZXgpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2xpY2VBcmdzKGFyZ3MsIHN0YXJ0SW5kZXgpIHtcclxuICByZXR1cm4gc2xpY2UuY2FsbChhcmdzLCBzdGFydEluZGV4IHx8IDApO1xyXG59XHJcblxyXG5cclxuLyoganNoaW50IC1XMTAxICovXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5iaW5kXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBjYWxscyBmdW5jdGlvbiBgZm5gIGJvdW5kIHRvIGBzZWxmYCAoYHNlbGZgIGJlY29tZXMgdGhlIGB0aGlzYCBmb3JcclxuICogYGZuYCkuIFlvdSBjYW4gc3VwcGx5IG9wdGlvbmFsIGBhcmdzYCB0aGF0IGFyZSBwcmVib3VuZCB0byB0aGUgZnVuY3Rpb24uIFRoaXMgZmVhdHVyZSBpcyBhbHNvXHJcbiAqIGtub3duIGFzIFtwYXJ0aWFsIGFwcGxpY2F0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BhcnRpYWxfYXBwbGljYXRpb24pLCBhc1xyXG4gKiBkaXN0aW5ndWlzaGVkIGZyb20gW2Z1bmN0aW9uIGN1cnJ5aW5nXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0N1cnJ5aW5nI0NvbnRyYXN0X3dpdGhfcGFydGlhbF9mdW5jdGlvbl9hcHBsaWNhdGlvbikuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZWxmIENvbnRleHQgd2hpY2ggYGZuYCBzaG91bGQgYmUgZXZhbHVhdGVkIGluLlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIEZ1bmN0aW9uIHRvIGJlIGJvdW5kLlxyXG4gKiBAcGFyYW0gey4uLip9IGFyZ3MgT3B0aW9uYWwgYXJndW1lbnRzIHRvIGJlIHByZWJvdW5kIHRvIHRoZSBgZm5gIGZ1bmN0aW9uIGNhbGwuXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBGdW5jdGlvbiB0aGF0IHdyYXBzIHRoZSBgZm5gIHdpdGggYWxsIHRoZSBzcGVjaWZpZWQgYmluZGluZ3MuXHJcbiAqL1xyXG4vKiBqc2hpbnQgK1cxMDEgKi9cclxuZnVuY3Rpb24gYmluZChzZWxmLCBmbikge1xyXG4gIHZhciBjdXJyeUFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IHNsaWNlQXJncyhhcmd1bWVudHMsIDIpIDogW107XHJcbiAgaWYgKGlzRnVuY3Rpb24oZm4pICYmICEoZm4gaW5zdGFuY2VvZiBSZWdFeHApKSB7XHJcbiAgICByZXR1cm4gY3VycnlBcmdzLmxlbmd0aFxyXG4gICAgICA/IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcclxuICAgICAgICAgICAgPyBmbi5hcHBseShzZWxmLCBjdXJyeUFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSkpXHJcbiAgICAgICAgICAgIDogZm4uYXBwbHkoc2VsZiwgY3VycnlBcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgIDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxyXG4gICAgICAgICAgICA/IGZuLmFwcGx5KHNlbGYsIGFyZ3VtZW50cylcclxuICAgICAgICAgICAgOiBmbi5jYWxsKHNlbGYpO1xyXG4gICAgICAgIH07XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIGluIElFLCBuYXRpdmUgbWV0aG9kcyBhcmUgbm90IGZ1bmN0aW9ucyBzbyB0aGV5IGNhbm5vdCBiZSBib3VuZCAobm90ZTogdGhleSBkb24ndCBuZWVkIHRvIGJlKVxyXG4gICAgcmV0dXJuIGZuO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHRvSnNvblJlcGxhY2VyKGtleSwgdmFsdWUpIHtcclxuICB2YXIgdmFsID0gdmFsdWU7XHJcblxyXG4gIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXkuY2hhckF0KDApID09PSAnJCcgJiYga2V5LmNoYXJBdCgxKSA9PT0gJyQnKSB7XHJcbiAgICB2YWwgPSB1bmRlZmluZWQ7XHJcbiAgfSBlbHNlIGlmIChpc1dpbmRvdyh2YWx1ZSkpIHtcclxuICAgIHZhbCA9ICckV0lORE9XJztcclxuICB9IGVsc2UgaWYgKHZhbHVlICYmICBkb2N1bWVudCA9PT0gdmFsdWUpIHtcclxuICAgIHZhbCA9ICckRE9DVU1FTlQnO1xyXG4gIH0gZWxzZSBpZiAoaXNTY29wZSh2YWx1ZSkpIHtcclxuICAgIHZhbCA9ICckU0NPUEUnO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHZhbDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci50b0pzb25cclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU2VyaWFsaXplcyBpbnB1dCBpbnRvIGEgSlNPTi1mb3JtYXR0ZWQgc3RyaW5nLiBQcm9wZXJ0aWVzIHdpdGggbGVhZGluZyAkJCBjaGFyYWN0ZXJzIHdpbGwgYmVcclxuICogc3RyaXBwZWQgc2luY2UgYW5ndWxhciB1c2VzIHRoaXMgbm90YXRpb24gaW50ZXJuYWxseS5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl8RGF0ZXxzdHJpbmd8bnVtYmVyfSBvYmogSW5wdXQgdG8gYmUgc2VyaWFsaXplZCBpbnRvIEpTT04uXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IHByZXR0eSBJZiBzZXQgdG8gdHJ1ZSwgdGhlIEpTT04gb3V0cHV0IHdpbGwgY29udGFpbiBuZXdsaW5lcyBhbmQgd2hpdGVzcGFjZS5cclxuICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IEpTT04taWZpZWQgc3RyaW5nIHJlcHJlc2VudGluZyBgb2JqYC5cclxuICovXHJcbmZ1bmN0aW9uIHRvSnNvbihvYmosIHByZXR0eSkge1xyXG4gIGlmICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVuZGVmaW5lZDtcclxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCB0b0pzb25SZXBsYWNlciwgcHJldHR5ID8gJyAgJyA6IG51bGwpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmZyb21Kc29uXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERlc2VyaWFsaXplcyBhIEpTT04gc3RyaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30ganNvbiBKU09OIHN0cmluZyB0byBkZXNlcmlhbGl6ZS5cclxuICogQHJldHVybnMge09iamVjdHxBcnJheXxzdHJpbmd8bnVtYmVyfSBEZXNlcmlhbGl6ZWQgdGhpbmd5LlxyXG4gKi9cclxuZnVuY3Rpb24gZnJvbUpzb24oanNvbikge1xyXG4gIHJldHVybiBpc1N0cmluZyhqc29uKVxyXG4gICAgICA/IEpTT04ucGFyc2UoanNvbilcclxuICAgICAgOiBqc29uO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZWxlbWVudC5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0aW5nVGFnKGVsZW1lbnQpIHtcclxuICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpLmNsb25lKCk7XHJcbiAgdHJ5IHtcclxuICAgIC8vIHR1cm5zIG91dCBJRSBkb2VzIG5vdCBsZXQgeW91IHNldCAuaHRtbCgpIG9uIGVsZW1lbnRzIHdoaWNoXHJcbiAgICAvLyBhcmUgbm90IGFsbG93ZWQgdG8gaGF2ZSBjaGlsZHJlbi4gU28gd2UganVzdCBpZ25vcmUgaXQuXHJcbiAgICBlbGVtZW50LmVtcHR5KCk7XHJcbiAgfSBjYXRjaChlKSB7fVxyXG4gIC8vIEFzIFBlciBET00gU3RhbmRhcmRzXHJcbiAgdmFyIFRFWFRfTk9ERSA9IDM7XHJcbiAgdmFyIGVsZW1IdG1sID0ganFMaXRlKCc8ZGl2PicpLmFwcGVuZChlbGVtZW50KS5odG1sKCk7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBlbGVtZW50WzBdLm5vZGVUeXBlID09PSBURVhUX05PREUgPyBsb3dlcmNhc2UoZWxlbUh0bWwpIDpcclxuICAgICAgICBlbGVtSHRtbC5cclxuICAgICAgICAgIG1hdGNoKC9eKDxbXj5dKz4pLylbMV0uXHJcbiAgICAgICAgICByZXBsYWNlKC9ePChbXFx3XFwtXSspLywgZnVuY3Rpb24obWF0Y2gsIG5vZGVOYW1lKSB7IHJldHVybiAnPCcgKyBsb3dlcmNhc2Uobm9kZU5hbWUpOyB9KTtcclxuICB9IGNhdGNoKGUpIHtcclxuICAgIHJldHVybiBsb3dlcmNhc2UoZWxlbUh0bWwpO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vKipcclxuICogVHJpZXMgdG8gZGVjb2RlIHRoZSBVUkkgY29tcG9uZW50IHdpdGhvdXQgdGhyb3dpbmcgYW4gZXhjZXB0aW9uLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0gc3RyIHZhbHVlIHBvdGVudGlhbCBVUkkgY29tcG9uZW50IHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGNhbiBiZSBkZWNvZGVkXHJcbiAqIHdpdGggdGhlIGRlY29kZVVSSUNvbXBvbmVudCBmdW5jdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkge1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICB9IGNhdGNoKGUpIHtcclxuICAgIC8vIElnbm9yZSBhbnkgaW52YWxpZCB1cmkgY29tcG9uZW50XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBhbiBlc2NhcGVkIHVybCBxdWVyeSBzdHJpbmcgaW50byBrZXktdmFsdWUgcGFpcnMuXHJcbiAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZyxib29sZWFufEFycmF5Pn1cclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlS2V5VmFsdWUoLyoqc3RyaW5nKi9rZXlWYWx1ZSkge1xyXG4gIHZhciBvYmogPSB7fSwga2V5X3ZhbHVlLCBrZXk7XHJcbiAgZm9yRWFjaCgoa2V5VmFsdWUgfHwgXCJcIikuc3BsaXQoJyYnKSwgZnVuY3Rpb24oa2V5VmFsdWUpIHtcclxuICAgIGlmICgga2V5VmFsdWUgKSB7XHJcbiAgICAgIGtleV92YWx1ZSA9IGtleVZhbHVlLnJlcGxhY2UoL1xcKy9nLCclMjAnKS5zcGxpdCgnPScpO1xyXG4gICAgICBrZXkgPSB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5X3ZhbHVlWzBdKTtcclxuICAgICAgaWYgKCBpc0RlZmluZWQoa2V5KSApIHtcclxuICAgICAgICB2YXIgdmFsID0gaXNEZWZpbmVkKGtleV92YWx1ZVsxXSkgPyB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5X3ZhbHVlWzFdKSA6IHRydWU7XHJcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgb2JqW2tleV0gPSB2YWw7XHJcbiAgICAgICAgfSBlbHNlIGlmKGlzQXJyYXkob2JqW2tleV0pKSB7XHJcbiAgICAgICAgICBvYmpba2V5XS5wdXNoKHZhbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG9ialtrZXldID0gW29ialtrZXldLHZhbF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9LZXlWYWx1ZShvYmopIHtcclxuICB2YXIgcGFydHMgPSBbXTtcclxuICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIGZvckVhY2godmFsdWUsIGZ1bmN0aW9uKGFycmF5VmFsdWUpIHtcclxuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSkgK1xyXG4gICAgICAgICAgICAgICAgICAgKGFycmF5VmFsdWUgPT09IHRydWUgPyAnJyA6ICc9JyArIGVuY29kZVVyaVF1ZXJ5KGFycmF5VmFsdWUsIHRydWUpKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgIHBhcnRzLnB1c2goZW5jb2RlVXJpUXVlcnkoa2V5LCB0cnVlKSArXHJcbiAgICAgICAgICAgICAgICh2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogJz0nICsgZW5jb2RlVXJpUXVlcnkodmFsdWUsIHRydWUpKSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHBhcnRzLmxlbmd0aCA/IHBhcnRzLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFdlIG5lZWQgb3VyIGN1c3RvbSBtZXRob2QgYmVjYXVzZSBlbmNvZGVVUklDb21wb25lbnQgaXMgdG9vIGFnZ3Jlc3NpdmUgYW5kIGRvZXNuJ3QgZm9sbG93XHJcbiAqIGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzM5ODYudHh0IHdpdGggcmVnYXJkcyB0byB0aGUgY2hhcmFjdGVyIHNldCAocGNoYXIpIGFsbG93ZWQgaW4gcGF0aFxyXG4gKiBzZWdtZW50czpcclxuICogICAgc2VnbWVudCAgICAgICA9ICpwY2hhclxyXG4gKiAgICBwY2hhciAgICAgICAgID0gdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvIFwiOlwiIC8gXCJAXCJcclxuICogICAgcGN0LWVuY29kZWQgICA9IFwiJVwiIEhFWERJRyBIRVhESUdcclxuICogICAgdW5yZXNlcnZlZCAgICA9IEFMUEhBIC8gRElHSVQgLyBcIi1cIiAvIFwiLlwiIC8gXCJfXCIgLyBcIn5cIlxyXG4gKiAgICBzdWItZGVsaW1zICAgID0gXCIhXCIgLyBcIiRcIiAvIFwiJlwiIC8gXCInXCIgLyBcIihcIiAvIFwiKVwiXHJcbiAqICAgICAgICAgICAgICAgICAgICAgLyBcIipcIiAvIFwiK1wiIC8gXCIsXCIgLyBcIjtcIiAvIFwiPVwiXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVVcmlTZWdtZW50KHZhbCkge1xyXG4gIHJldHVybiBlbmNvZGVVcmlRdWVyeSh2YWwsIHRydWUpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTI2L2dpLCAnJicpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNEL2dpLCAnPScpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTJCL2dpLCAnKycpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIGZvciBlbmNvZGluZyAqa2V5KiBvciAqdmFsdWUqIHBhcnRzIG9mIHF1ZXJ5IGNvbXBvbmVudC4gV2UgbmVlZCBhIGN1c3RvbVxyXG4gKiBtZXRob2QgYmVjYXVzZSBlbmNvZGVVUklDb21wb25lbnQgaXMgdG9vIGFnZ3Jlc3NpdmUgYW5kIGVuY29kZXMgc3R1ZmYgdGhhdCBkb2Vzbid0IGhhdmUgdG8gYmVcclxuICogZW5jb2RlZCBwZXIgaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NjpcclxuICogICAgcXVlcnkgICAgICAgPSAqKCBwY2hhciAvIFwiL1wiIC8gXCI/XCIgKVxyXG4gKiAgICBwY2hhciAgICAgICAgID0gdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvIFwiOlwiIC8gXCJAXCJcclxuICogICAgdW5yZXNlcnZlZCAgICA9IEFMUEhBIC8gRElHSVQgLyBcIi1cIiAvIFwiLlwiIC8gXCJfXCIgLyBcIn5cIlxyXG4gKiAgICBwY3QtZW5jb2RlZCAgID0gXCIlXCIgSEVYRElHIEhFWERJR1xyXG4gKiAgICBzdWItZGVsaW1zICAgID0gXCIhXCIgLyBcIiRcIiAvIFwiJlwiIC8gXCInXCIgLyBcIihcIiAvIFwiKVwiXHJcbiAqICAgICAgICAgICAgICAgICAgICAgLyBcIipcIiAvIFwiK1wiIC8gXCIsXCIgLyBcIjtcIiAvIFwiPVwiXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVVcmlRdWVyeSh2YWwsIHBjdEVuY29kZVNwYWNlcykge1xyXG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNCL2dpLCAnOycpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTIwL2csIChwY3RFbmNvZGVTcGFjZXMgPyAnJTIwJyA6ICcrJykpO1xyXG59XHJcblxyXG52YXIgbmdBdHRyUHJlZml4ZXMgPSBbJ25nLScsICdkYXRhLW5nLScsICduZzonLCAneC1uZy0nXTtcclxuXHJcbmZ1bmN0aW9uIGdldE5nQXR0cmlidXRlKGVsZW1lbnQsIG5nQXR0cikge1xyXG4gIHZhciBhdHRyLCBpLCBpaSA9IG5nQXR0clByZWZpeGVzLmxlbmd0aDtcclxuICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xyXG4gIGZvciAoaT0wOyBpPGlpOyArK2kpIHtcclxuICAgIGF0dHIgPSBuZ0F0dHJQcmVmaXhlc1tpXSArIG5nQXR0cjtcclxuICAgIGlmIChpc1N0cmluZyhhdHRyID0gZWxlbWVudC5hdHRyKGF0dHIpKSkge1xyXG4gICAgICByZXR1cm4gYXR0cjtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQXBwXHJcbiAqIEBtb2R1bGUgbmdcclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7YW5ndWxhci5Nb2R1bGV9IG5nQXBwIGFuIG9wdGlvbmFsIGFwcGxpY2F0aW9uXHJcbiAqICAge0BsaW5rIGFuZ3VsYXIubW9kdWxlIG1vZHVsZX0gbmFtZSB0byBsb2FkLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBuZ1N0cmljdERpIGlmIHRoaXMgYXR0cmlidXRlIGlzIHByZXNlbnQgb24gdGhlIGFwcCBlbGVtZW50LCB0aGUgaW5qZWN0b3Igd2lsbCBiZVxyXG4gKiAgIGNyZWF0ZWQgaW4gXCJzdHJpY3QtZGlcIiBtb2RlLiBUaGlzIG1lYW5zIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHdpbGwgZmFpbCB0byBpbnZva2UgZnVuY3Rpb25zIHdoaWNoXHJcbiAqICAgZG8gbm90IHVzZSBleHBsaWNpdCBmdW5jdGlvbiBhbm5vdGF0aW9uIChhbmQgYXJlIHRodXMgdW5zdWl0YWJsZSBmb3IgbWluaWZpY2F0aW9uKSwgYXMgZGVzY3JpYmVkXHJcbiAqICAgaW4ge0BsaW5rIGd1aWRlL2RpIHRoZSBEZXBlbmRlbmN5IEluamVjdGlvbiBndWlkZX0sIGFuZCB1c2VmdWwgZGVidWdnaW5nIGluZm8gd2lsbCBhc3Npc3QgaW5cclxuICogICB0cmFja2luZyBkb3duIHRoZSByb290IG9mIHRoZXNlIGJ1Z3MuXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBVc2UgdGhpcyBkaXJlY3RpdmUgdG8gKiphdXRvLWJvb3RzdHJhcCoqIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi4gVGhlIGBuZ0FwcGAgZGlyZWN0aXZlXHJcbiAqIGRlc2lnbmF0ZXMgdGhlICoqcm9vdCBlbGVtZW50Kiogb2YgdGhlIGFwcGxpY2F0aW9uIGFuZCBpcyB0eXBpY2FsbHkgcGxhY2VkIG5lYXIgdGhlIHJvb3QgZWxlbWVudFxyXG4gKiBvZiB0aGUgcGFnZSAtIGUuZy4gb24gdGhlIGA8Ym9keT5gIG9yIGA8aHRtbD5gIHRhZ3MuXHJcbiAqXHJcbiAqIE9ubHkgb25lIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiBjYW4gYmUgYXV0by1ib290c3RyYXBwZWQgcGVyIEhUTUwgZG9jdW1lbnQuIFRoZSBmaXJzdCBgbmdBcHBgXHJcbiAqIGZvdW5kIGluIHRoZSBkb2N1bWVudCB3aWxsIGJlIHVzZWQgdG8gZGVmaW5lIHRoZSByb290IGVsZW1lbnQgdG8gYXV0by1ib290c3RyYXAgYXMgYW5cclxuICogYXBwbGljYXRpb24uIFRvIHJ1biBtdWx0aXBsZSBhcHBsaWNhdGlvbnMgaW4gYW4gSFRNTCBkb2N1bWVudCB5b3UgbXVzdCBtYW51YWxseSBib290c3RyYXAgdGhlbSB1c2luZ1xyXG4gKiB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IGluc3RlYWQuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbnMgY2Fubm90IGJlIG5lc3RlZCB3aXRoaW4gZWFjaCBvdGhlci5cclxuICpcclxuICogWW91IGNhbiBzcGVjaWZ5IGFuICoqQW5ndWxhckpTIG1vZHVsZSoqIHRvIGJlIHVzZWQgYXMgdGhlIHJvb3QgbW9kdWxlIGZvciB0aGUgYXBwbGljYXRpb24uICBUaGlzXHJcbiAqIG1vZHVsZSB3aWxsIGJlIGxvYWRlZCBpbnRvIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3J9IHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGJvb3RzdHJhcHBlZCBhbmRcclxuICogc2hvdWxkIGNvbnRhaW4gdGhlIGFwcGxpY2F0aW9uIGNvZGUgbmVlZGVkIG9yIGhhdmUgZGVwZW5kZW5jaWVzIG9uIG90aGVyIG1vZHVsZXMgdGhhdCB3aWxsXHJcbiAqIGNvbnRhaW4gdGhlIGNvZGUuIFNlZSB7QGxpbmsgYW5ndWxhci5tb2R1bGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxyXG4gKlxyXG4gKiBJbiB0aGUgZXhhbXBsZSBiZWxvdyBpZiB0aGUgYG5nQXBwYCBkaXJlY3RpdmUgd2VyZSBub3QgcGxhY2VkIG9uIHRoZSBgaHRtbGAgZWxlbWVudCB0aGVuIHRoZVxyXG4gKiBkb2N1bWVudCB3b3VsZCBub3QgYmUgY29tcGlsZWQsIHRoZSBgQXBwQ29udHJvbGxlcmAgd291bGQgbm90IGJlIGluc3RhbnRpYXRlZCBhbmQgdGhlIGB7eyBhK2IgfX1gXHJcbiAqIHdvdWxkIG5vdCBiZSByZXNvbHZlZCB0byBgM2AuXHJcbiAqXHJcbiAqIGBuZ0FwcGAgaXMgdGhlIGVhc2llc3QsIGFuZCBtb3N0IGNvbW1vbiwgd2F5IHRvIGJvb3RzdHJhcCBhbiBhcHBsaWNhdGlvbi5cclxuICpcclxuIDxleGFtcGxlIG1vZHVsZT1cIm5nQXBwRGVtb1wiPlxyXG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJuZ0FwcERlbW9Db250cm9sbGVyXCI+XHJcbiAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxyXG4gICA8L2Rpdj5cclxuICAgPC9maWxlPlxyXG4gICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgIGFuZ3VsYXIubW9kdWxlKCduZ0FwcERlbW8nLCBbXSkuY29udHJvbGxlcignbmdBcHBEZW1vQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICRzY29wZS5hID0gMTtcclxuICAgICAkc2NvcGUuYiA9IDI7XHJcbiAgIH0pO1xyXG4gICA8L2ZpbGU+XHJcbiA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIFVzaW5nIGBuZ1N0cmljdERpYCwgeW91IHdvdWxkIHNlZSBzb21ldGhpbmcgbGlrZSB0aGlzOlxyXG4gKlxyXG4gPGV4YW1wbGUgbmctYXBwLWluY2x1ZGVkPVwidHJ1ZVwiPlxyXG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICA8ZGl2IG5nLWFwcD1cIm5nQXBwU3RyaWN0RGVtb1wiIG5nLXN0cmljdC1kaT5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkdvb2RDb250cm9sbGVyMVwiPlxyXG4gICAgICAgICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cclxuXHJcbiAgICAgICAgICAgPHA+VGhpcyByZW5kZXJzIGJlY2F1c2UgdGhlIGNvbnRyb2xsZXIgZG9lcyBub3QgZmFpbCB0b1xyXG4gICAgICAgICAgICAgIGluc3RhbnRpYXRlLCBieSB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9uIHN0eWxlIChzZWVcclxuICAgICAgICAgICAgICBzY3JpcHQuanMgZm9yIGRldGFpbHMpXHJcbiAgICAgICAgICAgPC9wPlxyXG4gICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiR29vZENvbnRyb2xsZXIyXCI+XHJcbiAgICAgICAgICAgTmFtZTogPGlucHV0IG5nLW1vZGVsPVwibmFtZVwiPjxiciAvPlxyXG4gICAgICAgICAgIEhlbGxvLCB7e25hbWV9fSFcclxuXHJcbiAgICAgICAgICAgPHA+VGhpcyByZW5kZXJzIGJlY2F1c2UgdGhlIGNvbnRyb2xsZXIgZG9lcyBub3QgZmFpbCB0b1xyXG4gICAgICAgICAgICAgIGluc3RhbnRpYXRlLCBieSB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9uIHN0eWxlXHJcbiAgICAgICAgICAgICAgKHNlZSBzY3JpcHQuanMgZm9yIGRldGFpbHMpXHJcbiAgICAgICAgICAgPC9wPlxyXG4gICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQmFkQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cclxuXHJcbiAgICAgICAgICAgPHA+VGhlIGNvbnRyb2xsZXIgY291bGQgbm90IGJlIGluc3RhbnRpYXRlZCwgZHVlIHRvIHJlbHlpbmdcclxuICAgICAgICAgICAgICBvbiBhdXRvbWF0aWMgZnVuY3Rpb24gYW5ub3RhdGlvbnMgKHdoaWNoIGFyZSBkaXNhYmxlZCBpblxyXG4gICAgICAgICAgICAgIHN0cmljdCBtb2RlKS4gQXMgc3VjaCwgdGhlIGNvbnRlbnQgb2YgdGhpcyBzZWN0aW9uIGlzIG5vdFxyXG4gICAgICAgICAgICAgIGludGVycG9sYXRlZCwgYW5kIHRoZXJlIHNob3VsZCBiZSBhbiBlcnJvciBpbiB5b3VyIHdlYiBjb25zb2xlLlxyXG4gICAgICAgICAgIDwvcD5cclxuICAgICAgIDwvZGl2PlxyXG4gICA8L2Rpdj5cclxuICAgPC9maWxlPlxyXG4gICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgIGFuZ3VsYXIubW9kdWxlKCduZ0FwcFN0cmljdERlbW8nLCBbXSlcclxuICAgICAvLyBCYWRDb250cm9sbGVyIHdpbGwgZmFpbCB0byBpbnN0YW50aWF0ZSwgZHVlIHRvIHJlbHlpbmcgb24gYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb24sXHJcbiAgICAgLy8gcmF0aGVyIHRoYW4gYW4gZXhwbGljaXQgYW5ub3RhdGlvblxyXG4gICAgIC5jb250cm9sbGVyKCdCYWRDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAkc2NvcGUuYSA9IDE7XHJcbiAgICAgICAkc2NvcGUuYiA9IDI7XHJcbiAgICAgfSlcclxuICAgICAvLyBVbmxpa2UgQmFkQ29udHJvbGxlciwgR29vZENvbnRyb2xsZXIxIGFuZCBHb29kQ29udHJvbGxlcjIgd2lsbCBub3QgZmFpbCB0byBiZSBpbnN0YW50aWF0ZWQsXHJcbiAgICAgLy8gZHVlIHRvIHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb25zIHVzaW5nIHRoZSBhcnJheSBzdHlsZSBhbmQgJGluamVjdCBwcm9wZXJ0eSwgcmVzcGVjdGl2ZWx5LlxyXG4gICAgIC5jb250cm9sbGVyKCdHb29kQ29udHJvbGxlcjEnLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgJHNjb3BlLmEgPSAxO1xyXG4gICAgICAgJHNjb3BlLmIgPSAyO1xyXG4gICAgIH1dKVxyXG4gICAgIC5jb250cm9sbGVyKCdHb29kQ29udHJvbGxlcjInLCBHb29kQ29udHJvbGxlcjIpO1xyXG4gICAgIGZ1bmN0aW9uIEdvb2RDb250cm9sbGVyMigkc2NvcGUpIHtcclxuICAgICAgICRzY29wZS5uYW1lID0gXCJXb3JsZFwiO1xyXG4gICAgIH1cclxuICAgICBHb29kQ29udHJvbGxlcjIuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcbiAgIDwvZmlsZT5cclxuICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICBkaXZbbmctY29udHJvbGxlcl0ge1xyXG4gICAgICAgbWFyZ2luLWJvdHRvbTogMWVtO1xyXG4gICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICBib3JkZXI6IDFweCBzb2xpZDtcclxuICAgICAgIHBhZGRpbmc6IC41ZW07XHJcbiAgIH1cclxuICAgZGl2W25nLWNvbnRyb2xsZXJePUdvb2RdIHtcclxuICAgICAgIGJvcmRlci1jb2xvcjogI2Q2ZTljNjtcclxuICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkZmYwZDg7XHJcbiAgICAgICBjb2xvcjogIzNjNzYzZDtcclxuICAgfVxyXG4gICBkaXZbbmctY29udHJvbGxlcl49QmFkXSB7XHJcbiAgICAgICBib3JkZXItY29sb3I6ICNlYmNjZDE7XHJcbiAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJkZWRlO1xyXG4gICAgICAgY29sb3I6ICNhOTQ0NDI7XHJcbiAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xyXG4gICB9XHJcbiAgIDwvZmlsZT5cclxuIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uIGFuZ3VsYXJJbml0KGVsZW1lbnQsIGJvb3RzdHJhcCkge1xyXG4gIHZhciBhcHBFbGVtZW50LFxyXG4gICAgICBtb2R1bGUsXHJcbiAgICAgIGNvbmZpZyA9IHt9O1xyXG5cclxuICAvLyBUaGUgZWxlbWVudCBgZWxlbWVudGAgaGFzIHByaW9yaXR5IG92ZXIgYW55IG90aGVyIGVsZW1lbnRcclxuICBmb3JFYWNoKG5nQXR0clByZWZpeGVzLCBmdW5jdGlvbihwcmVmaXgpIHtcclxuICAgIHZhciBuYW1lID0gcHJlZml4ICsgJ2FwcCc7XHJcblxyXG4gICAgaWYgKCFhcHBFbGVtZW50ICYmIGVsZW1lbnQuaGFzQXR0cmlidXRlICYmIGVsZW1lbnQuaGFzQXR0cmlidXRlKG5hbWUpKSB7XHJcbiAgICAgIGFwcEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICBtb2R1bGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTtcclxuICAgIH1cclxuICB9KTtcclxuICBmb3JFYWNoKG5nQXR0clByZWZpeGVzLCBmdW5jdGlvbihwcmVmaXgpIHtcclxuICAgIHZhciBuYW1lID0gcHJlZml4ICsgJ2FwcCc7XHJcbiAgICB2YXIgY2FuZGlkYXRlO1xyXG5cclxuICAgIGlmICghYXBwRWxlbWVudCAmJiAoY2FuZGlkYXRlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbJyArIG5hbWUucmVwbGFjZSgnOicsICdcXFxcOicpICsgJ10nKSkpIHtcclxuICAgICAgYXBwRWxlbWVudCA9IGNhbmRpZGF0ZTtcclxuICAgICAgbW9kdWxlID0gY2FuZGlkYXRlLmdldEF0dHJpYnV0ZShuYW1lKTtcclxuICAgIH1cclxuICB9KTtcclxuICBpZiAoYXBwRWxlbWVudCkge1xyXG4gICAgY29uZmlnLnN0cmljdERpID0gZ2V0TmdBdHRyaWJ1dGUoYXBwRWxlbWVudCwgXCJzdHJpY3QtZGlcIikgIT09IG51bGw7XHJcbiAgICBib290c3RyYXAoYXBwRWxlbWVudCwgbW9kdWxlID8gW21vZHVsZV0gOiBbXSwgY29uZmlnKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5ib290c3RyYXBcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVXNlIHRoaXMgZnVuY3Rpb24gdG8gbWFudWFsbHkgc3RhcnQgdXAgYW5ndWxhciBhcHBsaWNhdGlvbi5cclxuICpcclxuICogU2VlOiB7QGxpbmsgZ3VpZGUvYm9vdHN0cmFwIEJvb3RzdHJhcH1cclxuICpcclxuICogTm90ZSB0aGF0IFByb3RyYWN0b3IgYmFzZWQgZW5kLXRvLWVuZCB0ZXN0cyBjYW5ub3QgdXNlIHRoaXMgZnVuY3Rpb24gdG8gYm9vdHN0cmFwIG1hbnVhbGx5LlxyXG4gKiBUaGV5IG11c3QgdXNlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9LlxyXG4gKlxyXG4gKiBBbmd1bGFyIHdpbGwgZGV0ZWN0IGlmIGl0IGhhcyBiZWVuIGxvYWRlZCBpbnRvIHRoZSBicm93c2VyIG1vcmUgdGhhbiBvbmNlIGFuZCBvbmx5IGFsbG93IHRoZVxyXG4gKiBmaXJzdCBsb2FkZWQgc2NyaXB0IHRvIGJlIGJvb3RzdHJhcHBlZCBhbmQgd2lsbCByZXBvcnQgYSB3YXJuaW5nIHRvIHRoZSBicm93c2VyIGNvbnNvbGUgZm9yXHJcbiAqIGVhY2ggb2YgdGhlIHN1YnNlcXVlbnQgc2NyaXB0cy4gVGhpcyBwcmV2ZW50cyBzdHJhbmdlIHJlc3VsdHMgaW4gYXBwbGljYXRpb25zLCB3aGVyZSBvdGhlcndpc2VcclxuICogbXVsdGlwbGUgaW5zdGFuY2VzIG9mIEFuZ3VsYXIgdHJ5IHRvIHdvcmsgb24gdGhlIERPTS5cclxuICpcclxuICogYGBgaHRtbFxyXG4gKiA8IWRvY3R5cGUgaHRtbD5cclxuICogPGh0bWw+XHJcbiAqIDxib2R5PlxyXG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJXZWxjb21lQ29udHJvbGxlclwiPlxyXG4gKiAgIHt7Z3JlZXRpbmd9fVxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogPHNjcmlwdCBzcmM9XCJhbmd1bGFyLmpzXCI+PC9zY3JpcHQ+XHJcbiAqIDxzY3JpcHQ+XHJcbiAqICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdkZW1vJywgW10pXHJcbiAqICAgLmNvbnRyb2xsZXIoJ1dlbGNvbWVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAqICAgICAgICRzY29wZS5ncmVldGluZyA9ICdXZWxjb21lISc7XHJcbiAqICAgfSk7XHJcbiAqICAgYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsnZGVtbyddKTtcclxuICogPC9zY3JpcHQ+XHJcbiAqIDwvYm9keT5cclxuICogPC9odG1sPlxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IERPTSBlbGVtZW50IHdoaWNoIGlzIHRoZSByb290IG9mIGFuZ3VsYXIgYXBwbGljYXRpb24uXHJcbiAqIEBwYXJhbSB7QXJyYXk8U3RyaW5nfEZ1bmN0aW9ufEFycmF5Pj19IG1vZHVsZXMgYW4gYXJyYXkgb2YgbW9kdWxlcyB0byBsb2FkIGludG8gdGhlIGFwcGxpY2F0aW9uLlxyXG4gKiAgICAgRWFjaCBpdGVtIGluIHRoZSBhcnJheSBzaG91bGQgYmUgdGhlIG5hbWUgb2YgYSBwcmVkZWZpbmVkIG1vZHVsZSBvciBhIChESSBhbm5vdGF0ZWQpXHJcbiAqICAgICBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCBieSB0aGUgaW5qZWN0b3IgYXMgYSBydW4gYmxvY2suXHJcbiAqICAgICBTZWU6IHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfVxyXG4gKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBhbiBvYmplY3QgZm9yIGRlZmluaW5nIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIGFwcGxpY2F0aW9uLiBUaGVcclxuICogICAgIGZvbGxvd2luZyBrZXlzIGFyZSBzdXBwb3J0ZWQ6XHJcbiAqXHJcbiAqICAgICAtIGBzdHJpY3REaWA6IGRpc2FibGUgYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb24gZm9yIHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBpcyBtZWFudCB0b1xyXG4gKiAgICAgICBhc3Npc3QgaW4gZmluZGluZyBidWdzIHdoaWNoIGJyZWFrIG1pbmlmaWVkIGNvZGUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHthdXRvLiRpbmplY3Rvcn0gUmV0dXJucyB0aGUgbmV3bHkgY3JlYXRlZCBpbmplY3RvciBmb3IgdGhpcyBhcHAuXHJcbiAqL1xyXG5mdW5jdGlvbiBib290c3RyYXAoZWxlbWVudCwgbW9kdWxlcywgY29uZmlnKSB7XHJcbiAgaWYgKCFpc09iamVjdChjb25maWcpKSBjb25maWcgPSB7fTtcclxuICB2YXIgZGVmYXVsdENvbmZpZyA9IHtcclxuICAgIHN0cmljdERpOiBmYWxzZVxyXG4gIH07XHJcbiAgY29uZmlnID0gZXh0ZW5kKGRlZmF1bHRDb25maWcsIGNvbmZpZyk7XHJcbiAgdmFyIGRvQm9vdHN0cmFwID0gZnVuY3Rpb24oKSB7XHJcbiAgICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xyXG5cclxuICAgIGlmIChlbGVtZW50LmluamVjdG9yKCkpIHtcclxuICAgICAgdmFyIHRhZyA9IChlbGVtZW50WzBdID09PSBkb2N1bWVudCkgPyAnZG9jdW1lbnQnIDogc3RhcnRpbmdUYWcoZWxlbWVudCk7XHJcbiAgICAgIC8vRW5jb2RlIGFuZ2xlIGJyYWNrZXRzIHRvIHByZXZlbnQgaW5wdXQgZnJvbSBiZWluZyBzYW5pdGl6ZWQgdG8gZW1wdHkgc3RyaW5nICM4NjgzXHJcbiAgICAgIHRocm93IG5nTWluRXJyKFxyXG4gICAgICAgICAgJ2J0c3RycGQnLFxyXG4gICAgICAgICAgXCJBcHAgQWxyZWFkeSBCb290c3RyYXBwZWQgd2l0aCB0aGlzIEVsZW1lbnQgJ3swfSdcIixcclxuICAgICAgICAgIHRhZy5yZXBsYWNlKC88LywnJmx0OycpLnJlcGxhY2UoLz4vLCcmZ3Q7JykpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZXMgPSBtb2R1bGVzIHx8IFtdO1xyXG4gICAgbW9kdWxlcy51bnNoaWZ0KFsnJHByb3ZpZGUnLCBmdW5jdGlvbigkcHJvdmlkZSkge1xyXG4gICAgICAkcHJvdmlkZS52YWx1ZSgnJHJvb3RFbGVtZW50JywgZWxlbWVudCk7XHJcbiAgICB9XSk7XHJcblxyXG4gICAgaWYgKGNvbmZpZy5kZWJ1Z0luZm9FbmFibGVkKSB7XHJcbiAgICAgIC8vIFB1c2hpbmcgc28gdGhhdCB0aGlzIG92ZXJyaWRlcyBgZGVidWdJbmZvRW5hYmxlZGAgc2V0dGluZyBkZWZpbmVkIGluIHVzZXIncyBgbW9kdWxlc2AuXHJcbiAgICAgIG1vZHVsZXMucHVzaChbJyRjb21waWxlUHJvdmlkZXInLCBmdW5jdGlvbigkY29tcGlsZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKHRydWUpO1xyXG4gICAgICB9XSk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlcy51bnNoaWZ0KCduZycpO1xyXG4gICAgdmFyIGluamVjdG9yID0gY3JlYXRlSW5qZWN0b3IobW9kdWxlcywgY29uZmlnLnN0cmljdERpKTtcclxuICAgIGluamVjdG9yLmludm9rZShbJyRyb290U2NvcGUnLCAnJHJvb3RFbGVtZW50JywgJyRjb21waWxlJywgJyRpbmplY3RvcicsXHJcbiAgICAgICBmdW5jdGlvbiBib290c3RyYXBBcHBseShzY29wZSwgZWxlbWVudCwgY29tcGlsZSwgaW5qZWN0b3IpIHtcclxuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBlbGVtZW50LmRhdGEoJyRpbmplY3RvcicsIGluamVjdG9yKTtcclxuICAgICAgICAgIGNvbXBpbGUoZWxlbWVudCkoc2NvcGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XVxyXG4gICAgKTtcclxuICAgIHJldHVybiBpbmplY3RvcjtcclxuICB9O1xyXG5cclxuICB2YXIgTkdfRU5BQkxFX0RFQlVHX0lORk8gPSAvXk5HX0VOQUJMRV9ERUJVR19JTkZPIS87XHJcbiAgdmFyIE5HX0RFRkVSX0JPT1RTVFJBUCA9IC9eTkdfREVGRVJfQk9PVFNUUkFQIS87XHJcblxyXG4gIGlmICh3aW5kb3cgJiYgTkdfRU5BQkxFX0RFQlVHX0lORk8udGVzdCh3aW5kb3cubmFtZSkpIHtcclxuICAgIGNvbmZpZy5kZWJ1Z0luZm9FbmFibGVkID0gdHJ1ZTtcclxuICAgIHdpbmRvdy5uYW1lID0gd2luZG93Lm5hbWUucmVwbGFjZShOR19FTkFCTEVfREVCVUdfSU5GTywgJycpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHdpbmRvdyAmJiAhTkdfREVGRVJfQk9PVFNUUkFQLnRlc3Qod2luZG93Lm5hbWUpKSB7XHJcbiAgICByZXR1cm4gZG9Cb290c3RyYXAoKTtcclxuICB9XHJcblxyXG4gIHdpbmRvdy5uYW1lID0gd2luZG93Lm5hbWUucmVwbGFjZShOR19ERUZFUl9CT09UU1RSQVAsICcnKTtcclxuICBhbmd1bGFyLnJlc3VtZUJvb3RzdHJhcCA9IGZ1bmN0aW9uKGV4dHJhTW9kdWxlcykge1xyXG4gICAgZm9yRWFjaChleHRyYU1vZHVsZXMsIGZ1bmN0aW9uKG1vZHVsZSkge1xyXG4gICAgICBtb2R1bGVzLnB1c2gobW9kdWxlKTtcclxuICAgIH0pO1xyXG4gICAgZG9Cb290c3RyYXAoKTtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIucmVsb2FkV2l0aERlYnVnSW5mb1xyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBVc2UgdGhpcyBmdW5jdGlvbiB0byByZWxvYWQgdGhlIGN1cnJlbnQgYXBwbGljYXRpb24gd2l0aCBkZWJ1ZyBpbmZvcm1hdGlvbiB0dXJuZWQgb24uXHJcbiAqIFRoaXMgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGEgY2FsbCB0byBgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKGZhbHNlKWAuXHJcbiAqXHJcbiAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkZWJ1Z0luZm9FbmFibGVkfSBmb3IgbW9yZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlbG9hZFdpdGhEZWJ1Z0luZm8oKSB7XHJcbiAgd2luZG93Lm5hbWUgPSAnTkdfRU5BQkxFX0RFQlVHX0lORk8hJyArIHdpbmRvdy5uYW1lO1xyXG4gIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZ2V0VGVzdGFiaWxpdHlcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICogR2V0IHRoZSB0ZXN0YWJpbGl0eSBzZXJ2aWNlIGZvciB0aGUgaW5zdGFuY2Ugb2YgQW5ndWxhciBvbiB0aGUgZ2l2ZW5cclxuICogZWxlbWVudC5cclxuICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IERPTSBlbGVtZW50IHdoaWNoIGlzIHRoZSByb290IG9mIGFuZ3VsYXIgYXBwbGljYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRUZXN0YWJpbGl0eShyb290RWxlbWVudCkge1xyXG4gIHJldHVybiBhbmd1bGFyLmVsZW1lbnQocm9vdEVsZW1lbnQpLmluamVjdG9yKCkuZ2V0KCckJHRlc3RhYmlsaXR5Jyk7XHJcbn1cclxuXHJcbnZhciBTTkFLRV9DQVNFX1JFR0VYUCA9IC9bQS1aXS9nO1xyXG5mdW5jdGlvbiBzbmFrZV9jYXNlKG5hbWUsIHNlcGFyYXRvcikge1xyXG4gIHNlcGFyYXRvciA9IHNlcGFyYXRvciB8fCAnXyc7XHJcbiAgcmV0dXJuIG5hbWUucmVwbGFjZShTTkFLRV9DQVNFX1JFR0VYUCwgZnVuY3Rpb24obGV0dGVyLCBwb3MpIHtcclxuICAgIHJldHVybiAocG9zID8gc2VwYXJhdG9yIDogJycpICsgbGV0dGVyLnRvTG93ZXJDYXNlKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbnZhciBiaW5kSlF1ZXJ5RmlyZWQgPSBmYWxzZTtcclxudmFyIHNraXBEZXN0cm95T25OZXh0SlF1ZXJ5Q2xlYW5EYXRhO1xyXG5mdW5jdGlvbiBiaW5kSlF1ZXJ5KCkge1xyXG4gIHZhciBvcmlnaW5hbENsZWFuRGF0YTtcclxuXHJcbiAgaWYgKGJpbmRKUXVlcnlGaXJlZCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gYmluZCB0byBqUXVlcnkgaWYgcHJlc2VudDtcclxuICBqUXVlcnkgPSB3aW5kb3cualF1ZXJ5O1xyXG4gIC8vIFVzZSBqUXVlcnkgaWYgaXQgZXhpc3RzIHdpdGggcHJvcGVyIGZ1bmN0aW9uYWxpdHksIG90aGVyd2lzZSBkZWZhdWx0IHRvIHVzLlxyXG4gIC8vIEFuZ3VsYXIgMS4yKyByZXF1aXJlcyBqUXVlcnkgMS43KyBmb3Igb24oKS9vZmYoKSBzdXBwb3J0LlxyXG4gIC8vIEFuZ3VsYXIgMS4zKyB0ZWNobmljYWxseSByZXF1aXJlcyBhdCBsZWFzdCBqUXVlcnkgMi4xKyBidXQgaXQgbWF5IHdvcmsgd2l0aCBvbGRlclxyXG4gIC8vIHZlcnNpb25zLiBJdCB3aWxsIG5vdCB3b3JrIGZvciBzdXJlIHdpdGggalF1ZXJ5IDwxLjcsIHRob3VnaC5cclxuICBpZiAoalF1ZXJ5ICYmIGpRdWVyeS5mbi5vbikge1xyXG4gICAganFMaXRlID0galF1ZXJ5O1xyXG4gICAgZXh0ZW5kKGpRdWVyeS5mbiwge1xyXG4gICAgICBzY29wZTogSlFMaXRlUHJvdG90eXBlLnNjb3BlLFxyXG4gICAgICBpc29sYXRlU2NvcGU6IEpRTGl0ZVByb3RvdHlwZS5pc29sYXRlU2NvcGUsXHJcbiAgICAgIGNvbnRyb2xsZXI6IEpRTGl0ZVByb3RvdHlwZS5jb250cm9sbGVyLFxyXG4gICAgICBpbmplY3RvcjogSlFMaXRlUHJvdG90eXBlLmluamVjdG9yLFxyXG4gICAgICBpbmhlcml0ZWREYXRhOiBKUUxpdGVQcm90b3R5cGUuaW5oZXJpdGVkRGF0YVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQWxsIG5vZGVzIHJlbW92ZWQgZnJvbSB0aGUgRE9NIHZpYSB2YXJpb3VzIGpRdWVyeSBBUElzIGxpa2UgLnJlbW92ZSgpXHJcbiAgICAvLyBhcmUgcGFzc2VkIHRocm91Z2ggalF1ZXJ5LmNsZWFuRGF0YS4gTW9ua2V5LXBhdGNoIHRoaXMgbWV0aG9kIHRvIGZpcmVcclxuICAgIC8vIHRoZSAkZGVzdHJveSBldmVudCBvbiBhbGwgcmVtb3ZlZCBub2Rlcy5cclxuICAgIG9yaWdpbmFsQ2xlYW5EYXRhID0galF1ZXJ5LmNsZWFuRGF0YTtcclxuICAgIGpRdWVyeS5jbGVhbkRhdGEgPSBmdW5jdGlvbihlbGVtcykge1xyXG4gICAgICB2YXIgZXZlbnRzO1xyXG4gICAgICBpZiAoIXNraXBEZXN0cm95T25OZXh0SlF1ZXJ5Q2xlYW5EYXRhKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGVsZW07IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKykge1xyXG4gICAgICAgICAgZXZlbnRzID0galF1ZXJ5Ll9kYXRhKGVsZW0sIFwiZXZlbnRzXCIpO1xyXG4gICAgICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHMuJGRlc3Ryb3kpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KGVsZW0pLnRyaWdnZXJIYW5kbGVyKCckZGVzdHJveScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBza2lwRGVzdHJveU9uTmV4dEpRdWVyeUNsZWFuRGF0YSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIG9yaWdpbmFsQ2xlYW5EYXRhKGVsZW1zKTtcclxuICAgIH07XHJcbiAgfSBlbHNlIHtcclxuICAgIGpxTGl0ZSA9IEpRTGl0ZTtcclxuICB9XHJcblxyXG4gIGFuZ3VsYXIuZWxlbWVudCA9IGpxTGl0ZTtcclxuXHJcbiAgLy8gUHJldmVudCBkb3VibGUtcHJveHlpbmcuXHJcbiAgYmluZEpRdWVyeUZpcmVkID0gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHRocm93IGVycm9yIGlmIHRoZSBhcmd1bWVudCBpcyBmYWxzeS5cclxuICovXHJcbmZ1bmN0aW9uIGFzc2VydEFyZyhhcmcsIG5hbWUsIHJlYXNvbikge1xyXG4gIGlmICghYXJnKSB7XHJcbiAgICB0aHJvdyBuZ01pbkVycignYXJlcScsIFwiQXJndW1lbnQgJ3swfScgaXMgezF9XCIsIChuYW1lIHx8ICc/JyksIChyZWFzb24gfHwgXCJyZXF1aXJlZFwiKSk7XHJcbiAgfVxyXG4gIHJldHVybiBhcmc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFzc2VydEFyZ0ZuKGFyZywgbmFtZSwgYWNjZXB0QXJyYXlBbm5vdGF0aW9uKSB7XHJcbiAgaWYgKGFjY2VwdEFycmF5QW5ub3RhdGlvbiAmJiBpc0FycmF5KGFyZykpIHtcclxuICAgICAgYXJnID0gYXJnW2FyZy5sZW5ndGggLSAxXTtcclxuICB9XHJcblxyXG4gIGFzc2VydEFyZyhpc0Z1bmN0aW9uKGFyZyksIG5hbWUsICdub3QgYSBmdW5jdGlvbiwgZ290ICcgK1xyXG4gICAgICAoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnID8gYXJnLmNvbnN0cnVjdG9yLm5hbWUgfHwgJ09iamVjdCcgOiB0eXBlb2YgYXJnKSk7XHJcbiAgcmV0dXJuIGFyZztcclxufVxyXG5cclxuLyoqXHJcbiAqIHRocm93IGVycm9yIGlmIHRoZSBuYW1lIGdpdmVuIGlzIGhhc093blByb3BlcnR5XHJcbiAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSAgICB0aGUgbmFtZSB0byB0ZXN0XHJcbiAqIEBwYXJhbSAge1N0cmluZ30gY29udGV4dCB0aGUgY29udGV4dCBpbiB3aGljaCB0aGUgbmFtZSBpcyB1c2VkLCBzdWNoIGFzIG1vZHVsZSBvciBkaXJlY3RpdmVcclxuICovXHJcbmZ1bmN0aW9uIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsIGNvbnRleHQpIHtcclxuICBpZiAobmFtZSA9PT0gJ2hhc093blByb3BlcnR5Jykge1xyXG4gICAgdGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCBcImhhc093blByb3BlcnR5IGlzIG5vdCBhIHZhbGlkIHswfSBuYW1lXCIsIGNvbnRleHQpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiB0aGUgdmFsdWUgYWNjZXNzaWJsZSBmcm9tIHRoZSBvYmplY3QgYnkgcGF0aC4gQW55IHVuZGVmaW5lZCB0cmF2ZXJzYWxzIGFyZSBpZ25vcmVkXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogc3RhcnRpbmcgb2JqZWN0XHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoIHBhdGggdG8gdHJhdmVyc2VcclxuICogQHBhcmFtIHtib29sZWFufSBbYmluZEZuVG9TY29wZT10cnVlXVxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB2YWx1ZSBhcyBhY2Nlc3NpYmxlIGJ5IHBhdGhcclxuICovXHJcbi8vVE9ETyhtaXNrbyk6IHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmVtb3ZlZFxyXG5mdW5jdGlvbiBnZXR0ZXIob2JqLCBwYXRoLCBiaW5kRm5Ub1Njb3BlKSB7XHJcbiAgaWYgKCFwYXRoKSByZXR1cm4gb2JqO1xyXG4gIHZhciBrZXlzID0gcGF0aC5zcGxpdCgnLicpO1xyXG4gIHZhciBrZXk7XHJcbiAgdmFyIGxhc3RJbnN0YW5jZSA9IG9iajtcclxuICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgIGtleSA9IGtleXNbaV07XHJcbiAgICBpZiAob2JqKSB7XHJcbiAgICAgIG9iaiA9IChsYXN0SW5zdGFuY2UgPSBvYmopW2tleV07XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmICghYmluZEZuVG9TY29wZSAmJiBpc0Z1bmN0aW9uKG9iaikpIHtcclxuICAgIHJldHVybiBiaW5kKGxhc3RJbnN0YW5jZSwgb2JqKTtcclxuICB9XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiB0aGUgRE9NIHNpYmxpbmdzIGJldHdlZW4gdGhlIGZpcnN0IGFuZCBsYXN0IG5vZGUgaW4gdGhlIGdpdmVuIGFycmF5LlxyXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBsaWtlIG9iamVjdFxyXG4gKiBAcmV0dXJucyB7anFMaXRlfSBqcUxpdGUgY29sbGVjdGlvbiBjb250YWluaW5nIHRoZSBub2Rlc1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QmxvY2tOb2Rlcyhub2Rlcykge1xyXG4gIC8vIFRPRE8ocGVyZik6IGp1c3QgY2hlY2sgaWYgYWxsIGl0ZW1zIGluIGBub2Rlc2AgYXJlIHNpYmxpbmdzIGFuZCBpZiB0aGV5IGFyZSByZXR1cm4gdGhlIG9yaWdpbmFsXHJcbiAgLy8gICAgICAgICAgICAgY29sbGVjdGlvbiwgb3RoZXJ3aXNlIHVwZGF0ZSB0aGUgb3JpZ2luYWwgY29sbGVjdGlvbi5cclxuICB2YXIgbm9kZSA9IG5vZGVzWzBdO1xyXG4gIHZhciBlbmROb2RlID0gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV07XHJcbiAgdmFyIGJsb2NrTm9kZXMgPSBbbm9kZV07XHJcblxyXG4gIGRvIHtcclxuICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xyXG4gICAgaWYgKCFub2RlKSBicmVhaztcclxuICAgIGJsb2NrTm9kZXMucHVzaChub2RlKTtcclxuICB9IHdoaWxlIChub2RlICE9PSBlbmROb2RlKTtcclxuXHJcbiAgcmV0dXJuIGpxTGl0ZShibG9ja05vZGVzKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IG9iamVjdCB3aXRob3V0IGEgcHJvdG90eXBlLiBUaGlzIG9iamVjdCBpcyB1c2VmdWwgZm9yIGxvb2t1cCB3aXRob3V0IGhhdmluZyB0b1xyXG4gKiBndWFyZCBhZ2FpbnN0IHByb3RvdHlwaWNhbGx5IGluaGVyaXRlZCBwcm9wZXJ0aWVzIHZpYSBoYXNPd25Qcm9wZXJ0eS5cclxuICpcclxuICogUmVsYXRlZCBtaWNyby1iZW5jaG1hcmtzOlxyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL29iamVjdC1jcmVhdGUyXHJcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vcHJvdG8tbWFwLWxvb2t1cC8yXHJcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vZm9yLWluLXZzLW9iamVjdC1rZXlzMlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTWFwKCkge1xyXG4gIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIHR5cGVcclxuICogQG5hbWUgYW5ndWxhci5Nb2R1bGVcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogSW50ZXJmYWNlIGZvciBjb25maWd1cmluZyBhbmd1bGFyIHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfS5cclxuICovXHJcblxyXG5mdW5jdGlvbiBzZXR1cE1vZHVsZUxvYWRlcih3aW5kb3cpIHtcclxuXHJcbiAgdmFyICRpbmplY3Rvck1pbkVyciA9IG1pbkVycignJGluamVjdG9yJyk7XHJcbiAgdmFyIG5nTWluRXJyID0gbWluRXJyKCduZycpO1xyXG5cclxuICBmdW5jdGlvbiBlbnN1cmUob2JqLCBuYW1lLCBmYWN0b3J5KSB7XHJcbiAgICByZXR1cm4gb2JqW25hbWVdIHx8IChvYmpbbmFtZV0gPSBmYWN0b3J5KCkpO1xyXG4gIH1cclxuXHJcbiAgdmFyIGFuZ3VsYXIgPSBlbnN1cmUod2luZG93LCAnYW5ndWxhcicsIE9iamVjdCk7XHJcblxyXG4gIC8vIFdlIG5lZWQgdG8gZXhwb3NlIGBhbmd1bGFyLiQkbWluRXJyYCB0byBtb2R1bGVzIHN1Y2ggYXMgYG5nUmVzb3VyY2VgIHRoYXQgcmVmZXJlbmNlIGl0IGR1cmluZyBib290c3RyYXBcclxuICBhbmd1bGFyLiQkbWluRXJyID0gYW5ndWxhci4kJG1pbkVyciB8fCBtaW5FcnI7XHJcblxyXG4gIHJldHVybiBlbnN1cmUoYW5ndWxhciwgJ21vZHVsZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgLyoqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgYW5ndWxhci5Nb2R1bGU+fSAqL1xyXG4gICAgdmFyIG1vZHVsZXMgPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gICAgICogQG5hbWUgYW5ndWxhci5tb2R1bGVcclxuICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIFRoZSBgYW5ndWxhci5tb2R1bGVgIGlzIGEgZ2xvYmFsIHBsYWNlIGZvciBjcmVhdGluZywgcmVnaXN0ZXJpbmcgYW5kIHJldHJpZXZpbmcgQW5ndWxhclxyXG4gICAgICogbW9kdWxlcy5cclxuICAgICAqIEFsbCBtb2R1bGVzIChhbmd1bGFyIGNvcmUgb3IgM3JkIHBhcnR5KSB0aGF0IHNob3VsZCBiZSBhdmFpbGFibGUgdG8gYW4gYXBwbGljYXRpb24gbXVzdCBiZVxyXG4gICAgICogcmVnaXN0ZXJlZCB1c2luZyB0aGlzIG1lY2hhbmlzbS5cclxuICAgICAqXHJcbiAgICAgKiBXaGVuIHBhc3NlZCB0d28gb3IgbW9yZSBhcmd1bWVudHMsIGEgbmV3IG1vZHVsZSBpcyBjcmVhdGVkLiAgSWYgcGFzc2VkIG9ubHkgb25lIGFyZ3VtZW50LCBhblxyXG4gICAgICogZXhpc3RpbmcgbW9kdWxlICh0aGUgbmFtZSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBtb2R1bGVgKSBpcyByZXRyaWV2ZWQuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICMgTW9kdWxlXHJcbiAgICAgKlxyXG4gICAgICogQSBtb2R1bGUgaXMgYSBjb2xsZWN0aW9uIG9mIHNlcnZpY2VzLCBkaXJlY3RpdmVzLCBjb250cm9sbGVycywgZmlsdGVycywgYW5kIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24uXHJcbiAgICAgKiBgYW5ndWxhci5tb2R1bGVgIGlzIHVzZWQgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZVxyXG4gICAgICogdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ215TW9kdWxlJywgW10pO1xyXG4gICAgICpcclxuICAgICAqIC8vIHJlZ2lzdGVyIGEgbmV3IHNlcnZpY2VcclxuICAgICAqIG15TW9kdWxlLnZhbHVlKCdhcHBOYW1lJywgJ015Q29vbEFwcCcpO1xyXG4gICAgICpcclxuICAgICAqIC8vIGNvbmZpZ3VyZSBleGlzdGluZyBzZXJ2aWNlcyBpbnNpZGUgaW5pdGlhbGl6YXRpb24gYmxvY2tzLlxyXG4gICAgICogbXlNb2R1bGUuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gICAgICogICAvLyBDb25maWd1cmUgZXhpc3RpbmcgcHJvdmlkZXJzXHJcbiAgICAgKiAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJyEnKTtcclxuICAgICAqIH1dKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoZW4geW91IGNhbiBjcmVhdGUgYW4gaW5qZWN0b3IgYW5kIGxvYWQgeW91ciBtb2R1bGVzIGxpa2UgdGhpczpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogdmFyIGluamVjdG9yID0gYW5ndWxhci5pbmplY3RvcihbJ25nJywgJ215TW9kdWxlJ10pXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBIb3dldmVyIGl0J3MgbW9yZSBsaWtlbHkgdGhhdCB5b3UnbGwganVzdCB1c2VcclxuICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9IG9yXHJcbiAgICAgKiB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IHRvIHNpbXBsaWZ5IHRoaXMgcHJvY2VzcyBmb3IgeW91LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgbW9kdWxlIHRvIGNyZWF0ZSBvciByZXRyaWV2ZS5cclxuICAgICAqIEBwYXJhbSB7IUFycmF5LjxzdHJpbmc+PX0gcmVxdWlyZXMgSWYgc3BlY2lmaWVkIHRoZW4gbmV3IG1vZHVsZSBpcyBiZWluZyBjcmVhdGVkLiBJZlxyXG4gICAgICogICAgICAgIHVuc3BlY2lmaWVkIHRoZW4gdGhlIG1vZHVsZSBpcyBiZWluZyByZXRyaWV2ZWQgZm9yIGZ1cnRoZXIgY29uZmlndXJhdGlvbi5cclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb249fSBjb25maWdGbiBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGUgbW9kdWxlLiBTYW1lIGFzXHJcbiAgICAgKiAgICAgICAge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZyBNb2R1bGUjY29uZmlnKCl9LlxyXG4gICAgICogQHJldHVybnMge21vZHVsZX0gbmV3IG1vZHVsZSB3aXRoIHRoZSB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9IGFwaS5cclxuICAgICAqL1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1vZHVsZShuYW1lLCByZXF1aXJlcywgY29uZmlnRm4pIHtcclxuICAgICAgdmFyIGFzc2VydE5vdEhhc093blByb3BlcnR5ID0gZnVuY3Rpb24obmFtZSwgY29udGV4dCkge1xyXG4gICAgICAgIGlmIChuYW1lID09PSAnaGFzT3duUHJvcGVydHknKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZ01pbkVycignYmFkbmFtZScsICdoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZScsIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdtb2R1bGUnKTtcclxuICAgICAgaWYgKHJlcXVpcmVzICYmIG1vZHVsZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICBtb2R1bGVzW25hbWVdID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZW5zdXJlKG1vZHVsZXMsIG5hbWUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghcmVxdWlyZXMpIHtcclxuICAgICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycignbm9tb2QnLCBcIk1vZHVsZSAnezB9JyBpcyBub3QgYXZhaWxhYmxlISBZb3UgZWl0aGVyIG1pc3NwZWxsZWQgXCIgK1xyXG4gICAgICAgICAgICAgXCJ0aGUgbW9kdWxlIG5hbWUgb3IgZm9yZ290IHRvIGxvYWQgaXQuIElmIHJlZ2lzdGVyaW5nIGEgbW9kdWxlIGVuc3VyZSB0aGF0IHlvdSBcIiArXHJcbiAgICAgICAgICAgICBcInNwZWNpZnkgdGhlIGRlcGVuZGVuY2llcyBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlwiLCBuYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5LjxBcnJheS48Kj4+fSAqL1xyXG4gICAgICAgIHZhciBpbnZva2VRdWV1ZSA9IFtdO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUgeyFBcnJheS48RnVuY3Rpb24+fSAqL1xyXG4gICAgICAgIHZhciBjb25maWdCbG9ja3MgPSBbXTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXkuPEZ1bmN0aW9uPn0gKi9cclxuICAgICAgICB2YXIgcnVuQmxvY2tzID0gW107XHJcblxyXG4gICAgICAgIHZhciBjb25maWcgPSBpbnZva2VMYXRlcignJGluamVjdG9yJywgJ2ludm9rZScsICdwdXNoJywgY29uZmlnQmxvY2tzKTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHthbmd1bGFyLk1vZHVsZX0gKi9cclxuICAgICAgICB2YXIgbW9kdWxlSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgICAvLyBQcml2YXRlIHN0YXRlXHJcbiAgICAgICAgICBfaW52b2tlUXVldWU6IGludm9rZVF1ZXVlLFxyXG4gICAgICAgICAgX2NvbmZpZ0Jsb2NrczogY29uZmlnQmxvY2tzLFxyXG4gICAgICAgICAgX3J1bkJsb2NrczogcnVuQmxvY2tzLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNyZXF1aXJlc1xyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogSG9sZHMgdGhlIGxpc3Qgb2YgbW9kdWxlcyB3aGljaCB0aGUgaW5qZWN0b3Igd2lsbCBsb2FkIGJlZm9yZSB0aGUgY3VycmVudCBtb2R1bGUgaXNcclxuICAgICAgICAgICAqIGxvYWRlZC5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgcmVxdWlyZXM6IHJlcXVpcmVzLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNuYW1lXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBOYW1lIG9mIHRoZSBtb2R1bGUuXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcblxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjcHJvdmlkZXJcclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdmlkZXJUeXBlIENvbnN0cnVjdGlvbiBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIHRoZVxyXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2UuXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNwcm92aWRlciAkcHJvdmlkZS5wcm92aWRlcigpfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgcHJvdmlkZXI6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICdwcm92aWRlcicpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjZmFjdG9yeVxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm92aWRlckZ1bmN0aW9uIEZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2YgdGhlIHNlcnZpY2UuXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIGZhY3Rvcnk6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICdmYWN0b3J5JyksXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNzZXJ2aWNlXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbnN0cnVjdG9yIEEgY29uc3RydWN0b3IgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGluc3RhbnRpYXRlZC5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2UgJHByb3ZpZGUuc2VydmljZSgpfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgc2VydmljZTogaW52b2tlTGF0ZXIoJyRwcm92aWRlJywgJ3NlcnZpY2UnKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3ZhbHVlXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcclxuICAgICAgICAgICAqIEBwYXJhbSB7Kn0gb2JqZWN0IFNlcnZpY2UgaW5zdGFuY2Ugb2JqZWN0LlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgJHByb3ZpZGUudmFsdWUoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIHZhbHVlOiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAndmFsdWUnKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbnN0YW50XHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBjb25zdGFudCBuYW1lXHJcbiAgICAgICAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBDb25zdGFudCB2YWx1ZS5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogQmVjYXVzZSB0aGUgY29uc3RhbnQgYXJlIGZpeGVkLCB0aGV5IGdldCBhcHBsaWVkIGJlZm9yZSBvdGhlciBwcm92aWRlIG1ldGhvZHMuXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjY29uc3RhbnQgJHByb3ZpZGUuY29uc3RhbnQoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIGNvbnN0YW50OiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAnY29uc3RhbnQnLCAndW5zaGlmdCcpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjYW5pbWF0aW9uXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBhbmltYXRpb24gbmFtZVxyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYW5pbWF0aW9uRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2YgYW5cclxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogKipOT1RFKio6IGFuaW1hdGlvbnMgdGFrZSBlZmZlY3Qgb25seSBpZiB0aGUgKipuZ0FuaW1hdGUqKiBtb2R1bGUgaXMgbG9hZGVkLlxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqXHJcbiAgICAgICAgICAgKiBEZWZpbmVzIGFuIGFuaW1hdGlvbiBob29rIHRoYXQgY2FuIGJlIGxhdGVyIHVzZWQgd2l0aFxyXG4gICAgICAgICAgICoge0BsaW5rIG5nQW5pbWF0ZS4kYW5pbWF0ZSAkYW5pbWF0ZX0gc2VydmljZSBhbmQgZGlyZWN0aXZlcyB0aGF0IHVzZSB0aGlzIHNlcnZpY2UuXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogYGBganNcclxuICAgICAgICAgICAqIG1vZHVsZS5hbmltYXRpb24oJy5hbmltYXRpb24tbmFtZScsIGZ1bmN0aW9uKCRpbmplY3QxLCAkaW5qZWN0Mikge1xyXG4gICAgICAgICAgICogICByZXR1cm4ge1xyXG4gICAgICAgICAgICogICAgIGV2ZW50TmFtZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHtcclxuICAgICAgICAgICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgICogICAgICAgLy9vbmNlIGNvbXBsZXRlLCB0aGVuIHJ1biBkb25lKClcclxuICAgICAgICAgICAqICAgICAgIHJldHVybiBmdW5jdGlvbiBjYW5jZWxsYXRpb25GdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgKiAgICAgICAgIC8vY29kZSB0byBjYW5jZWwgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgICogICAgICAgfVxyXG4gICAgICAgICAgICogICAgIH1cclxuICAgICAgICAgICAqICAgfVxyXG4gICAgICAgICAgICogfSlcclxuICAgICAgICAgICAqIGBgYFxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmdBbmltYXRlLiRhbmltYXRlUHJvdmlkZXIjcmVnaXN0ZXIgJGFuaW1hdGVQcm92aWRlci5yZWdpc3RlcigpfSBhbmRcclxuICAgICAgICAgICAqIHtAbGluayBuZ0FuaW1hdGUgbmdBbmltYXRlIG1vZHVsZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIGFuaW1hdGlvbjogaW52b2tlTGF0ZXIoJyRhbmltYXRlUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2ZpbHRlclxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRmlsdGVyIG5hbWUuXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmaWx0ZXJGYWN0b3J5IEZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiBmaWx0ZXIuXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGZpbHRlclByb3ZpZGVyI3JlZ2lzdGVyICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcigpfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgZmlsdGVyOiBpbnZva2VMYXRlcignJGZpbHRlclByb3ZpZGVyJywgJ3JlZ2lzdGVyJyksXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNjb250cm9sbGVyXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgQ29udHJvbGxlciBuYW1lLCBvciBhbiBvYmplY3QgbWFwIG9mIGNvbnRyb2xsZXJzIHdoZXJlIHRoZVxyXG4gICAgICAgICAgICogICAga2V5cyBhcmUgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29uc3RydWN0b3JzLlxyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uc3RydWN0b3IgQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogU2VlIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyICRjb250cm9sbGVyUHJvdmlkZXIucmVnaXN0ZXIoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIGNvbnRyb2xsZXI6IGludm9rZUxhdGVyKCckY29udHJvbGxlclByb3ZpZGVyJywgJ3JlZ2lzdGVyJyksXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNkaXJlY3RpdmVcclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBEaXJlY3RpdmUgbmFtZSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBkaXJlY3RpdmVzIHdoZXJlIHRoZVxyXG4gICAgICAgICAgICogICAga2V5cyBhcmUgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgZmFjdG9yaWVzLlxyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGlyZWN0aXZlRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2ZcclxuICAgICAgICAgICAqIGRpcmVjdGl2ZXMuXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIGRpcmVjdGl2ZTogaW52b2tlTGF0ZXIoJyRjb21waWxlUHJvdmlkZXInLCAnZGlyZWN0aXZlJyksXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNjb25maWdcclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmZpZ0ZuIEV4ZWN1dGUgdGhpcyBmdW5jdGlvbiBvbiBtb2R1bGUgbG9hZC4gVXNlZnVsIGZvciBzZXJ2aWNlXHJcbiAgICAgICAgICAgKiAgICBjb25maWd1cmF0aW9uLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgd29yayB3aGljaCBuZWVkcyB0byBiZSBwZXJmb3JtZWQgb24gbW9kdWxlIGxvYWRpbmcuXHJcbiAgICAgICAgICAgKiBGb3IgbW9yZSBhYm91dCBob3cgdG8gY29uZmlndXJlIHNlcnZpY2VzLCBzZWVcclxuICAgICAgICAgICAqIHtAbGluayBwcm92aWRlcnMjcHJvdmlkZXJzX3Byb3ZpZGVyLXJlY2lwZSBQcm92aWRlciBSZWNpcGV9LlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBjb25maWc6IGNvbmZpZyxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3J1blxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW5pdGlhbGl6YXRpb25GbiBFeGVjdXRlIHRoaXMgZnVuY3Rpb24gYWZ0ZXIgaW5qZWN0b3IgY3JlYXRpb24uXHJcbiAgICAgICAgICAgKiAgICBVc2VmdWwgZm9yIGFwcGxpY2F0aW9uIGluaXRpYWxpemF0aW9uLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgd29yayB3aGljaCBzaG91bGQgYmUgcGVyZm9ybWVkIHdoZW4gdGhlIGluamVjdG9yIGlzIGRvbmVcclxuICAgICAgICAgICAqIGxvYWRpbmcgYWxsIG1vZHVsZXMuXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIHJ1bjogZnVuY3Rpb24oYmxvY2spIHtcclxuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2goYmxvY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoY29uZmlnRm4pIHtcclxuICAgICAgICAgIGNvbmZpZyhjb25maWdGbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gIG1vZHVsZUluc3RhbmNlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvdmlkZXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmc9fSBpbnNlcnRNZXRob2RcclxuICAgICAgICAgKiBAcmV0dXJucyB7YW5ndWxhci5Nb2R1bGV9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTGF0ZXIocHJvdmlkZXIsIG1ldGhvZCwgaW5zZXJ0TWV0aG9kLCBxdWV1ZSkge1xyXG4gICAgICAgICAgaWYgKCFxdWV1ZSkgcXVldWUgPSBpbnZva2VRdWV1ZTtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcXVldWVbaW5zZXJ0TWV0aG9kIHx8ICdwdXNoJ10oW3Byb3ZpZGVyLCBtZXRob2QsIGFyZ3VtZW50c10pO1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlSW5zdGFuY2U7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuLyogZ2xvYmFsIGFuZ3VsYXJNb2R1bGU6IHRydWUsXHJcbiAgdmVyc2lvbjogdHJ1ZSxcclxuXHJcbiAgJExvY2FsZVByb3ZpZGVyLFxyXG4gICRDb21waWxlUHJvdmlkZXIsXHJcblxyXG4gIGh0bWxBbmNob3JEaXJlY3RpdmUsXHJcbiAgaW5wdXREaXJlY3RpdmUsXHJcbiAgaW5wdXREaXJlY3RpdmUsXHJcbiAgZm9ybURpcmVjdGl2ZSxcclxuICBzY3JpcHREaXJlY3RpdmUsXHJcbiAgc2VsZWN0RGlyZWN0aXZlLFxyXG4gIHN0eWxlRGlyZWN0aXZlLFxyXG4gIG9wdGlvbkRpcmVjdGl2ZSxcclxuICBuZ0JpbmREaXJlY3RpdmUsXHJcbiAgbmdCaW5kSHRtbERpcmVjdGl2ZSxcclxuICBuZ0JpbmRUZW1wbGF0ZURpcmVjdGl2ZSxcclxuICBuZ0NsYXNzRGlyZWN0aXZlLFxyXG4gIG5nQ2xhc3NFdmVuRGlyZWN0aXZlLFxyXG4gIG5nQ2xhc3NPZGREaXJlY3RpdmUsXHJcbiAgbmdDc3BEaXJlY3RpdmUsXHJcbiAgbmdDbG9ha0RpcmVjdGl2ZSxcclxuICBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUsXHJcbiAgbmdGb3JtRGlyZWN0aXZlLFxyXG4gIG5nSGlkZURpcmVjdGl2ZSxcclxuICBuZ0lmRGlyZWN0aXZlLFxyXG4gIG5nSW5jbHVkZURpcmVjdGl2ZSxcclxuICBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZSxcclxuICBuZ0luaXREaXJlY3RpdmUsXHJcbiAgbmdOb25CaW5kYWJsZURpcmVjdGl2ZSxcclxuICBuZ1BsdXJhbGl6ZURpcmVjdGl2ZSxcclxuICBuZ1JlcGVhdERpcmVjdGl2ZSxcclxuICBuZ1Nob3dEaXJlY3RpdmUsXHJcbiAgbmdTdHlsZURpcmVjdGl2ZSxcclxuICBuZ1N3aXRjaERpcmVjdGl2ZSxcclxuICBuZ1N3aXRjaFdoZW5EaXJlY3RpdmUsXHJcbiAgbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlLFxyXG4gIG5nT3B0aW9uc0RpcmVjdGl2ZSxcclxuICBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUsXHJcbiAgbmdNb2RlbERpcmVjdGl2ZSxcclxuICBuZ0xpc3REaXJlY3RpdmUsXHJcbiAgbmdDaGFuZ2VEaXJlY3RpdmUsXHJcbiAgcGF0dGVybkRpcmVjdGl2ZSxcclxuICBwYXR0ZXJuRGlyZWN0aXZlLFxyXG4gIHJlcXVpcmVkRGlyZWN0aXZlLFxyXG4gIHJlcXVpcmVkRGlyZWN0aXZlLFxyXG4gIG1pbmxlbmd0aERpcmVjdGl2ZSxcclxuICBtaW5sZW5ndGhEaXJlY3RpdmUsXHJcbiAgbWF4bGVuZ3RoRGlyZWN0aXZlLFxyXG4gIG1heGxlbmd0aERpcmVjdGl2ZSxcclxuICBuZ1ZhbHVlRGlyZWN0aXZlLFxyXG4gIG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlLFxyXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzLFxyXG4gIG5nRXZlbnREaXJlY3RpdmVzLFxyXG5cclxuICAkQW5jaG9yU2Nyb2xsUHJvdmlkZXIsXHJcbiAgJEFuaW1hdGVQcm92aWRlcixcclxuICAkQnJvd3NlclByb3ZpZGVyLFxyXG4gICRDYWNoZUZhY3RvcnlQcm92aWRlcixcclxuICAkQ29udHJvbGxlclByb3ZpZGVyLFxyXG4gICREb2N1bWVudFByb3ZpZGVyLFxyXG4gICRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsXHJcbiAgJEZpbHRlclByb3ZpZGVyLFxyXG4gICRJbnRlcnBvbGF0ZVByb3ZpZGVyLFxyXG4gICRJbnRlcnZhbFByb3ZpZGVyLFxyXG4gICRIdHRwUHJvdmlkZXIsXHJcbiAgJEh0dHBCYWNrZW5kUHJvdmlkZXIsXHJcbiAgJExvY2F0aW9uUHJvdmlkZXIsXHJcbiAgJExvZ1Byb3ZpZGVyLFxyXG4gICRQYXJzZVByb3ZpZGVyLFxyXG4gICRSb290U2NvcGVQcm92aWRlcixcclxuICAkUVByb3ZpZGVyLFxyXG4gICQkUVByb3ZpZGVyLFxyXG4gICQkU2FuaXRpemVVcmlQcm92aWRlcixcclxuICAkU2NlUHJvdmlkZXIsXHJcbiAgJFNjZURlbGVnYXRlUHJvdmlkZXIsXHJcbiAgJFNuaWZmZXJQcm92aWRlcixcclxuICAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyLFxyXG4gICRUZW1wbGF0ZVJlcXVlc3RQcm92aWRlcixcclxuICAkJFRlc3RhYmlsaXR5UHJvdmlkZXIsXHJcbiAgJFRpbWVvdXRQcm92aWRlcixcclxuICAkJFJBRlByb3ZpZGVyLFxyXG4gICQkQXN5bmNDYWxsYmFja1Byb3ZpZGVyLFxyXG4gICRXaW5kb3dQcm92aWRlclxyXG4qL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgb2JqZWN0XHJcbiAqIEBuYW1lIGFuZ3VsYXIudmVyc2lvblxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBbiBvYmplY3QgdGhhdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudCBBbmd1bGFySlMgdmVyc2lvbi4gVGhpcyBvYmplY3QgaGFzIHRoZVxyXG4gKiBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICpcclxuICogLSBgZnVsbGAg4oCTIGB7c3RyaW5nfWAg4oCTIEZ1bGwgdmVyc2lvbiBzdHJpbmcsIHN1Y2ggYXMgXCIwLjkuMThcIi5cclxuICogLSBgbWFqb3JgIOKAkyBge251bWJlcn1gIOKAkyBNYWpvciB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjBcIi5cclxuICogLSBgbWlub3JgIOKAkyBge251bWJlcn1gIOKAkyBNaW5vciB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjlcIi5cclxuICogLSBgZG90YCDigJMgYHtudW1iZXJ9YCDigJMgRG90IHZlcnNpb24gbnVtYmVyLCBzdWNoIGFzIFwiMThcIi5cclxuICogLSBgY29kZU5hbWVgIOKAkyBge3N0cmluZ31gIOKAkyBDb2RlIG5hbWUgb2YgdGhlIHJlbGVhc2UsIHN1Y2ggYXMgXCJqaWdnbGluZy1hcm1mYXRcIi5cclxuICovXHJcbnZhciB2ZXJzaW9uID0ge1xyXG4gIGZ1bGw6ICcxLjMuMC1yYy4yJywgICAgLy8gYWxsIG9mIHRoZXNlIHBsYWNlaG9sZGVyIHN0cmluZ3Mgd2lsbCBiZSByZXBsYWNlZCBieSBncnVudCdzXHJcbiAgbWFqb3I6IDEsICAgIC8vIHBhY2thZ2UgdGFza1xyXG4gIG1pbm9yOiAzLFxyXG4gIGRvdDogMCxcclxuICBjb2RlTmFtZTogJ3RhY3RpbGUtcGVyY2VwdGlvbidcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiBwdWJsaXNoRXh0ZXJuYWxBUEkoYW5ndWxhcil7XHJcbiAgZXh0ZW5kKGFuZ3VsYXIsIHtcclxuICAgICdib290c3RyYXAnOiBib290c3RyYXAsXHJcbiAgICAnY29weSc6IGNvcHksXHJcbiAgICAnZXh0ZW5kJzogZXh0ZW5kLFxyXG4gICAgJ2VxdWFscyc6IGVxdWFscyxcclxuICAgICdlbGVtZW50JzoganFMaXRlLFxyXG4gICAgJ2ZvckVhY2gnOiBmb3JFYWNoLFxyXG4gICAgJ2luamVjdG9yJzogY3JlYXRlSW5qZWN0b3IsXHJcbiAgICAnbm9vcCc6IG5vb3AsXHJcbiAgICAnYmluZCc6IGJpbmQsXHJcbiAgICAndG9Kc29uJzogdG9Kc29uLFxyXG4gICAgJ2Zyb21Kc29uJzogZnJvbUpzb24sXHJcbiAgICAnaWRlbnRpdHknOiBpZGVudGl0eSxcclxuICAgICdpc1VuZGVmaW5lZCc6IGlzVW5kZWZpbmVkLFxyXG4gICAgJ2lzRGVmaW5lZCc6IGlzRGVmaW5lZCxcclxuICAgICdpc1N0cmluZyc6IGlzU3RyaW5nLFxyXG4gICAgJ2lzRnVuY3Rpb24nOiBpc0Z1bmN0aW9uLFxyXG4gICAgJ2lzT2JqZWN0JzogaXNPYmplY3QsXHJcbiAgICAnaXNOdW1iZXInOiBpc051bWJlcixcclxuICAgICdpc0VsZW1lbnQnOiBpc0VsZW1lbnQsXHJcbiAgICAnaXNBcnJheSc6IGlzQXJyYXksXHJcbiAgICAndmVyc2lvbic6IHZlcnNpb24sXHJcbiAgICAnaXNEYXRlJzogaXNEYXRlLFxyXG4gICAgJ2xvd2VyY2FzZSc6IGxvd2VyY2FzZSxcclxuICAgICd1cHBlcmNhc2UnOiB1cHBlcmNhc2UsXHJcbiAgICAnY2FsbGJhY2tzJzoge2NvdW50ZXI6IDB9LFxyXG4gICAgJ2dldFRlc3RhYmlsaXR5JzogZ2V0VGVzdGFiaWxpdHksXHJcbiAgICAnJCRtaW5FcnInOiBtaW5FcnIsXHJcbiAgICAnJCRjc3AnOiBjc3AsXHJcbiAgICAncmVsb2FkV2l0aERlYnVnSW5mbyc6IHJlbG9hZFdpdGhEZWJ1Z0luZm8sXHJcbiAgICAnJCRoYXNDbGFzcyc6IGpxTGl0ZUhhc0NsYXNzXHJcbiAgfSk7XHJcblxyXG4gIGFuZ3VsYXJNb2R1bGUgPSBzZXR1cE1vZHVsZUxvYWRlcih3aW5kb3cpO1xyXG4gIHRyeSB7XHJcbiAgICBhbmd1bGFyTW9kdWxlKCduZ0xvY2FsZScpO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGFuZ3VsYXJNb2R1bGUoJ25nTG9jYWxlJywgW10pLnByb3ZpZGVyKCckbG9jYWxlJywgJExvY2FsZVByb3ZpZGVyKTtcclxuICB9XHJcblxyXG4gIGFuZ3VsYXJNb2R1bGUoJ25nJywgWyduZ0xvY2FsZSddLCBbJyRwcm92aWRlJyxcclxuICAgIGZ1bmN0aW9uIG5nTW9kdWxlKCRwcm92aWRlKSB7XHJcbiAgICAgIC8vICQkc2FuaXRpemVVcmlQcm92aWRlciBuZWVkcyB0byBiZSBiZWZvcmUgJGNvbXBpbGVQcm92aWRlciBhcyBpdCBpcyB1c2VkIGJ5IGl0LlxyXG4gICAgICAkcHJvdmlkZS5wcm92aWRlcih7XHJcbiAgICAgICAgJCRzYW5pdGl6ZVVyaTogJCRTYW5pdGl6ZVVyaVByb3ZpZGVyXHJcbiAgICAgIH0pO1xyXG4gICAgICAkcHJvdmlkZS5wcm92aWRlcignJGNvbXBpbGUnLCAkQ29tcGlsZVByb3ZpZGVyKS5cclxuICAgICAgICBkaXJlY3RpdmUoe1xyXG4gICAgICAgICAgICBhOiBodG1sQW5jaG9yRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBpbnB1dDogaW5wdXREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIHRleHRhcmVhOiBpbnB1dERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgZm9ybTogZm9ybURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgc2NyaXB0OiBzY3JpcHREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIHNlbGVjdDogc2VsZWN0RGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBzdHlsZTogc3R5bGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG9wdGlvbjogb3B0aW9uRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0JpbmQ6IG5nQmluZERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdCaW5kSHRtbDogbmdCaW5kSHRtbERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdCaW5kVGVtcGxhdGU6IG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0NsYXNzOiBuZ0NsYXNzRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0NsYXNzRXZlbjogbmdDbGFzc0V2ZW5EaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQ2xhc3NPZGQ6IG5nQ2xhc3NPZGREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQ2xvYWs6IG5nQ2xvYWtEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQ29udHJvbGxlcjogbmdDb250cm9sbGVyRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0Zvcm06IG5nRm9ybURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdIaWRlOiBuZ0hpZGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nSWY6IG5nSWZEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nSW5jbHVkZTogbmdJbmNsdWRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0luaXQ6IG5nSW5pdERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdOb25CaW5kYWJsZTogbmdOb25CaW5kYWJsZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdQbHVyYWxpemU6IG5nUGx1cmFsaXplRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1JlcGVhdDogbmdSZXBlYXREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nU2hvdzogbmdTaG93RGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1N0eWxlOiBuZ1N0eWxlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1N3aXRjaDogbmdTd2l0Y2hEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nU3dpdGNoV2hlbjogbmdTd2l0Y2hXaGVuRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1N3aXRjaERlZmF1bHQ6IG5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdPcHRpb25zOiBuZ09wdGlvbnNEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nVHJhbnNjbHVkZTogbmdUcmFuc2NsdWRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ01vZGVsOiBuZ01vZGVsRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0xpc3Q6IG5nTGlzdERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdDaGFuZ2U6IG5nQ2hhbmdlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBwYXR0ZXJuOiBwYXR0ZXJuRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1BhdHRlcm46IHBhdHRlcm5EaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdSZXF1aXJlZDogcmVxdWlyZWREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG1pbmxlbmd0aDogbWlubGVuZ3RoRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ01pbmxlbmd0aDogbWlubGVuZ3RoRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBtYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdNYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdWYWx1ZTogbmdWYWx1ZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdNb2RlbE9wdGlvbnM6IG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgZGlyZWN0aXZlKHtcclxuICAgICAgICAgIG5nSW5jbHVkZTogbmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmVcclxuICAgICAgICB9KS5cclxuICAgICAgICBkaXJlY3RpdmUobmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXMpLlxyXG4gICAgICAgIGRpcmVjdGl2ZShuZ0V2ZW50RGlyZWN0aXZlcyk7XHJcbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKHtcclxuICAgICAgICAkYW5jaG9yU2Nyb2xsOiAkQW5jaG9yU2Nyb2xsUHJvdmlkZXIsXHJcbiAgICAgICAgJGFuaW1hdGU6ICRBbmltYXRlUHJvdmlkZXIsXHJcbiAgICAgICAgJGJyb3dzZXI6ICRCcm93c2VyUHJvdmlkZXIsXHJcbiAgICAgICAgJGNhY2hlRmFjdG9yeTogJENhY2hlRmFjdG9yeVByb3ZpZGVyLFxyXG4gICAgICAgICRjb250cm9sbGVyOiAkQ29udHJvbGxlclByb3ZpZGVyLFxyXG4gICAgICAgICRkb2N1bWVudDogJERvY3VtZW50UHJvdmlkZXIsXHJcbiAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXI6ICRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsXHJcbiAgICAgICAgJGZpbHRlcjogJEZpbHRlclByb3ZpZGVyLFxyXG4gICAgICAgICRpbnRlcnBvbGF0ZTogJEludGVycG9sYXRlUHJvdmlkZXIsXHJcbiAgICAgICAgJGludGVydmFsOiAkSW50ZXJ2YWxQcm92aWRlcixcclxuICAgICAgICAkaHR0cDogJEh0dHBQcm92aWRlcixcclxuICAgICAgICAkaHR0cEJhY2tlbmQ6ICRIdHRwQmFja2VuZFByb3ZpZGVyLFxyXG4gICAgICAgICRsb2NhdGlvbjogJExvY2F0aW9uUHJvdmlkZXIsXHJcbiAgICAgICAgJGxvZzogJExvZ1Byb3ZpZGVyLFxyXG4gICAgICAgICRwYXJzZTogJFBhcnNlUHJvdmlkZXIsXHJcbiAgICAgICAgJHJvb3RTY29wZTogJFJvb3RTY29wZVByb3ZpZGVyLFxyXG4gICAgICAgICRxOiAkUVByb3ZpZGVyLFxyXG4gICAgICAgICQkcTogJCRRUHJvdmlkZXIsXHJcbiAgICAgICAgJHNjZTogJFNjZVByb3ZpZGVyLFxyXG4gICAgICAgICRzY2VEZWxlZ2F0ZTogJFNjZURlbGVnYXRlUHJvdmlkZXIsXHJcbiAgICAgICAgJHNuaWZmZXI6ICRTbmlmZmVyUHJvdmlkZXIsXHJcbiAgICAgICAgJHRlbXBsYXRlQ2FjaGU6ICRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIsXHJcbiAgICAgICAgJHRlbXBsYXRlUmVxdWVzdDogJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyLFxyXG4gICAgICAgICQkdGVzdGFiaWxpdHk6ICQkVGVzdGFiaWxpdHlQcm92aWRlcixcclxuICAgICAgICAkdGltZW91dDogJFRpbWVvdXRQcm92aWRlcixcclxuICAgICAgICAkd2luZG93OiAkV2luZG93UHJvdmlkZXIsXHJcbiAgICAgICAgJCRyQUY6ICQkUkFGUHJvdmlkZXIsXHJcbiAgICAgICAgJCRhc3luY0NhbGxiYWNrIDogJCRBc3luY0NhbGxiYWNrUHJvdmlkZXJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXSk7XHJcbn1cclxuXHJcbi8qIGdsb2JhbCBKUUxpdGVQcm90b3R5cGU6IHRydWUsXHJcbiAgYWRkRXZlbnRMaXN0ZW5lckZuOiB0cnVlLFxyXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJGbjogdHJ1ZSxcclxuICBCT09MRUFOX0FUVFI6IHRydWUsXHJcbiAgQUxJQVNFRF9BVFRSOiB0cnVlLFxyXG4qL1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vL0pRTGl0ZVxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZWxlbWVudFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBXcmFwcyBhIHJhdyBET00gZWxlbWVudCBvciBIVE1MIHN0cmluZyBhcyBhIFtqUXVlcnldKGh0dHA6Ly9qcXVlcnkuY29tKSBlbGVtZW50LlxyXG4gKlxyXG4gKiBJZiBqUXVlcnkgaXMgYXZhaWxhYmxlLCBgYW5ndWxhci5lbGVtZW50YCBpcyBhbiBhbGlhcyBmb3IgdGhlXHJcbiAqIFtqUXVlcnldKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qUXVlcnkvKSBmdW5jdGlvbi4gSWYgalF1ZXJ5IGlzIG5vdCBhdmFpbGFibGUsIGBhbmd1bGFyLmVsZW1lbnRgXHJcbiAqIGRlbGVnYXRlcyB0byBBbmd1bGFyJ3MgYnVpbHQtaW4gc3Vic2V0IG9mIGpRdWVyeSwgY2FsbGVkIFwialF1ZXJ5IGxpdGVcIiBvciBcImpxTGl0ZS5cIlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPmpxTGl0ZSBpcyBhIHRpbnksIEFQSS1jb21wYXRpYmxlIHN1YnNldCBvZiBqUXVlcnkgdGhhdCBhbGxvd3NcclxuICogQW5ndWxhciB0byBtYW5pcHVsYXRlIHRoZSBET00gaW4gYSBjcm9zcy1icm93c2VyIGNvbXBhdGlibGUgd2F5LiAqKmpxTGl0ZSoqIGltcGxlbWVudHMgb25seSB0aGUgbW9zdFxyXG4gKiBjb21tb25seSBuZWVkZWQgZnVuY3Rpb25hbGl0eSB3aXRoIHRoZSBnb2FsIG9mIGhhdmluZyBhIHZlcnkgc21hbGwgZm9vdHByaW50LjwvZGl2PlxyXG4gKlxyXG4gKiBUbyB1c2UgalF1ZXJ5LCBzaW1wbHkgbG9hZCBpdCBiZWZvcmUgYERPTUNvbnRlbnRMb2FkZWRgIGV2ZW50IGZpcmVkLlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnRcIj4qKk5vdGU6KiogYWxsIGVsZW1lbnQgcmVmZXJlbmNlcyBpbiBBbmd1bGFyIGFyZSBhbHdheXMgd3JhcHBlZCB3aXRoIGpRdWVyeSBvclxyXG4gKiBqcUxpdGU7IHRoZXkgYXJlIG5ldmVyIHJhdyBET00gcmVmZXJlbmNlcy48L2Rpdj5cclxuICpcclxuICogIyMgQW5ndWxhcidzIGpxTGl0ZVxyXG4gKiBqcUxpdGUgcHJvdmlkZXMgb25seSB0aGUgZm9sbG93aW5nIGpRdWVyeSBtZXRob2RzOlxyXG4gKlxyXG4gKiAtIFtgYWRkQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9hZGRDbGFzcy8pXHJcbiAqIC0gW2BhZnRlcigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FmdGVyLylcclxuICogLSBbYGFwcGVuZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FwcGVuZC8pXHJcbiAqIC0gW2BhdHRyKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYXR0ci8pXHJcbiAqIC0gW2BiaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYmluZC8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzLCBzZWxlY3RvcnMgb3IgZXZlbnREYXRhXHJcbiAqIC0gW2BjaGlsZHJlbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NoaWxkcmVuLykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xyXG4gKiAtIFtgY2xvbmUoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jbG9uZS8pXHJcbiAqIC0gW2Bjb250ZW50cygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NvbnRlbnRzLylcclxuICogLSBbYGNzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2Nzcy8pXHJcbiAqIC0gW2BkYXRhKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZGF0YS8pXHJcbiAqIC0gW2BkZXRhY2goKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9kZXRhY2gvKVxyXG4gKiAtIFtgZW1wdHkoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lbXB0eS8pXHJcbiAqIC0gW2BlcSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2VxLylcclxuICogLSBbYGZpbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9maW5kLykgLSBMaW1pdGVkIHRvIGxvb2t1cHMgYnkgdGFnIG5hbWVcclxuICogLSBbYGhhc0NsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vaGFzQ2xhc3MvKVxyXG4gKiAtIFtgaHRtbCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2h0bWwvKVxyXG4gKiAtIFtgbmV4dCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL25leHQvKSAtIERvZXMgbm90IHN1cHBvcnQgc2VsZWN0b3JzXHJcbiAqIC0gW2BvbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29uLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMsIHNlbGVjdG9ycyBvciBldmVudERhdGFcclxuICogLSBbYG9mZigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29mZi8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzIG9yIHNlbGVjdG9yc1xyXG4gKiAtIFtgb25lKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vb25lLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMgb3Igc2VsZWN0b3JzXHJcbiAqIC0gW2BwYXJlbnQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wYXJlbnQvKSAtIERvZXMgbm90IHN1cHBvcnQgc2VsZWN0b3JzXHJcbiAqIC0gW2BwcmVwZW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcHJlcGVuZC8pXHJcbiAqIC0gW2Bwcm9wKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcHJvcC8pXHJcbiAqIC0gW2ByZWFkeSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlYWR5LylcclxuICogLSBbYHJlbW92ZSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZS8pXHJcbiAqIC0gW2ByZW1vdmVBdHRyKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlQXR0ci8pXHJcbiAqIC0gW2ByZW1vdmVDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZUNsYXNzLylcclxuICogLSBbYHJlbW92ZURhdGEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmVEYXRhLylcclxuICogLSBbYHJlcGxhY2VXaXRoKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVwbGFjZVdpdGgvKVxyXG4gKiAtIFtgdGV4dCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3RleHQvKVxyXG4gKiAtIFtgdG9nZ2xlQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90b2dnbGVDbGFzcy8pXHJcbiAqIC0gW2B0cmlnZ2VySGFuZGxlcigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3RyaWdnZXJIYW5kbGVyLykgLSBQYXNzZXMgYSBkdW1teSBldmVudCBvYmplY3QgdG8gaGFuZGxlcnMuXHJcbiAqIC0gW2B1bmJpbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS91bmJpbmQvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlc1xyXG4gKiAtIFtgdmFsKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdmFsLylcclxuICogLSBbYHdyYXAoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS93cmFwLylcclxuICpcclxuICogIyMgalF1ZXJ5L2pxTGl0ZSBFeHRyYXNcclxuICogQW5ndWxhciBhbHNvIHByb3ZpZGVzIHRoZSBmb2xsb3dpbmcgYWRkaXRpb25hbCBtZXRob2RzIGFuZCBldmVudHMgdG8gYm90aCBqUXVlcnkgYW5kIGpxTGl0ZTpcclxuICpcclxuICogIyMjIEV2ZW50c1xyXG4gKiAtIGAkZGVzdHJveWAgLSBBbmd1bGFySlMgaW50ZXJjZXB0cyBhbGwganFMaXRlL2pRdWVyeSdzIERPTSBkZXN0cnVjdGlvbiBhcGlzIGFuZCBmaXJlcyB0aGlzIGV2ZW50XHJcbiAqICAgIG9uIGFsbCBET00gbm9kZXMgYmVpbmcgcmVtb3ZlZC4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gY2xlYW4gdXAgYW55IDNyZCBwYXJ0eSBiaW5kaW5ncyB0byB0aGUgRE9NXHJcbiAqICAgIGVsZW1lbnQgYmVmb3JlIGl0IGlzIHJlbW92ZWQuXHJcbiAqXHJcbiAqICMjIyBNZXRob2RzXHJcbiAqIC0gYGNvbnRyb2xsZXIobmFtZSlgIC0gcmV0cmlldmVzIHRoZSBjb250cm9sbGVyIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC4gQnkgZGVmYXVsdFxyXG4gKiAgIHJldHJpZXZlcyBjb250cm9sbGVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlLiBJZiBgbmFtZWAgaXMgcHJvdmlkZWQgYXNcclxuICogICBjYW1lbENhc2UgZGlyZWN0aXZlIG5hbWUsIHRoZW4gdGhlIGNvbnRyb2xsZXIgZm9yIHRoaXMgZGlyZWN0aXZlIHdpbGwgYmUgcmV0cmlldmVkIChlLmcuXHJcbiAqICAgYCduZ01vZGVsJ2ApLlxyXG4gKiAtIGBpbmplY3RvcigpYCAtIHJldHJpZXZlcyB0aGUgaW5qZWN0b3Igb2YgdGhlIGN1cnJlbnQgZWxlbWVudCBvciBpdHMgcGFyZW50LlxyXG4gKiAtIGBzY29wZSgpYCAtIHJldHJpZXZlcyB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9IG9mIHRoZSBjdXJyZW50XHJcbiAqICAgZWxlbWVudCBvciBpdHMgcGFyZW50LlxyXG4gKiAtIGBpc29sYXRlU2NvcGUoKWAgLSByZXRyaWV2ZXMgYW4gaXNvbGF0ZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0gaWYgb25lIGlzIGF0dGFjaGVkIGRpcmVjdGx5IHRvIHRoZVxyXG4gKiAgIGN1cnJlbnQgZWxlbWVudC4gVGhpcyBnZXR0ZXIgc2hvdWxkIGJlIHVzZWQgb25seSBvbiBlbGVtZW50cyB0aGF0IGNvbnRhaW4gYSBkaXJlY3RpdmUgd2hpY2ggc3RhcnRzIGEgbmV3IGlzb2xhdGVcclxuICogICBzY29wZS4gQ2FsbGluZyBgc2NvcGUoKWAgb24gdGhpcyBlbGVtZW50IGFsd2F5cyByZXR1cm5zIHRoZSBvcmlnaW5hbCBub24taXNvbGF0ZSBzY29wZS5cclxuICogLSBgaW5oZXJpdGVkRGF0YSgpYCAtIHNhbWUgYXMgYGRhdGEoKWAsIGJ1dCB3YWxrcyB1cCB0aGUgRE9NIHVudGlsIGEgdmFsdWUgaXMgZm91bmQgb3IgdGhlIHRvcFxyXG4gKiAgIHBhcmVudCBlbGVtZW50IGlzIHJlYWNoZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfERPTUVsZW1lbnR9IGVsZW1lbnQgSFRNTCBzdHJpbmcgb3IgRE9NRWxlbWVudCB0byBiZSB3cmFwcGVkIGludG8galF1ZXJ5LlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBqUXVlcnkgb2JqZWN0LlxyXG4gKi9cclxuXHJcbkpRTGl0ZS5leHBhbmRvID0gJ25nMzM5JztcclxuXHJcbnZhciBqcUNhY2hlID0gSlFMaXRlLmNhY2hlID0ge30sXHJcbiAgICBqcUlkID0gMSxcclxuICAgIGFkZEV2ZW50TGlzdGVuZXJGbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHR5cGUsIGZuKSB7XHJcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgZmFsc2UpO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHR5cGUsIGZuKSB7XHJcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcbi8qXHJcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBmdW5jdGlvbiAhISFcclxuICovXHJcbkpRTGl0ZS5fZGF0YSA9IGZ1bmN0aW9uKG5vZGUpIHtcclxuICAvL2pRdWVyeSBhbHdheXMgcmV0dXJucyBhbiBvYmplY3Qgb24gY2FjaGUgbWlzc1xyXG4gIHJldHVybiB0aGlzLmNhY2hlW25vZGVbdGhpcy5leHBhbmRvXV0gfHwge307XHJcbn07XHJcblxyXG5mdW5jdGlvbiBqcU5leHRJZCgpIHsgcmV0dXJuICsranFJZDsgfVxyXG5cclxuXHJcbnZhciBTUEVDSUFMX0NIQVJTX1JFR0VYUCA9IC8oW1xcOlxcLVxcX10rKC4pKS9nO1xyXG52YXIgTU9aX0hBQ0tfUkVHRVhQID0gL15tb3ooW0EtWl0pLztcclxudmFyIE1PVVNFX0VWRU5UX01BUD0geyBtb3VzZWxlYXZlIDogXCJtb3VzZW91dFwiLCBtb3VzZWVudGVyIDogXCJtb3VzZW92ZXJcIn07XHJcbnZhciBqcUxpdGVNaW5FcnIgPSBtaW5FcnIoJ2pxTGl0ZScpO1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnRzIHNuYWtlX2Nhc2UgdG8gY2FtZWxDYXNlLlxyXG4gKiBBbHNvIHRoZXJlIGlzIHNwZWNpYWwgY2FzZSBmb3IgTW96IHByZWZpeCBzdGFydGluZyB3aXRoIHVwcGVyIGNhc2UgbGV0dGVyLlxyXG4gKiBAcGFyYW0gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxyXG4gKi9cclxuZnVuY3Rpb24gY2FtZWxDYXNlKG5hbWUpIHtcclxuICByZXR1cm4gbmFtZS5cclxuICAgIHJlcGxhY2UoU1BFQ0lBTF9DSEFSU19SRUdFWFAsIGZ1bmN0aW9uKF8sIHNlcGFyYXRvciwgbGV0dGVyLCBvZmZzZXQpIHtcclxuICAgICAgcmV0dXJuIG9mZnNldCA/IGxldHRlci50b1VwcGVyQ2FzZSgpIDogbGV0dGVyO1xyXG4gICAgfSkuXHJcbiAgICByZXBsYWNlKE1PWl9IQUNLX1JFR0VYUCwgJ01veiQxJyk7XHJcbn1cclxuXHJcbnZhciBTSU5HTEVfVEFHX1JFR0VYUCA9IC9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLztcclxudmFyIEhUTUxfUkVHRVhQID0gLzx8JiM/XFx3KzsvO1xyXG52YXIgVEFHX05BTUVfUkVHRVhQID0gLzwoW1xcdzpdKykvO1xyXG52YXIgWEhUTUxfVEFHX1JFR0VYUCA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naTtcclxuXHJcbnZhciB3cmFwTWFwID0ge1xyXG4gICdvcHRpb24nOiBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXSxcclxuXHJcbiAgJ3RoZWFkJzogWzEsICc8dGFibGU+JywgJzwvdGFibGU+J10sXHJcbiAgJ2NvbCc6IFsyLCAnPHRhYmxlPjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddLFxyXG4gICd0cic6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxyXG4gICd0ZCc6IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddLFxyXG4gICdfZGVmYXVsdCc6IFswLCBcIlwiLCBcIlwiXVxyXG59O1xyXG5cclxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xyXG53cmFwTWFwLnRib2R5ID0gd3JhcE1hcC50Zm9vdCA9IHdyYXBNYXAuY29sZ3JvdXAgPSB3cmFwTWFwLmNhcHRpb24gPSB3cmFwTWFwLnRoZWFkO1xyXG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcclxuXHJcblxyXG5mdW5jdGlvbiBqcUxpdGVJc1RleHROb2RlKGh0bWwpIHtcclxuICByZXR1cm4gIUhUTUxfUkVHRVhQLnRlc3QoaHRtbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUFjY2VwdHNEYXRhKG5vZGUpIHtcclxuICAvLyBUaGUgd2luZG93IG9iamVjdCBjYW4gYWNjZXB0IGRhdGEgYnV0IGhhcyBubyBub2RlVHlwZVxyXG4gIC8vIE90aGVyd2lzZSB3ZSBhcmUgb25seSBpbnRlcmVzdGVkIGluIGVsZW1lbnRzICgxKSBhbmQgZG9jdW1lbnRzICg5KVxyXG4gIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGU7XHJcbiAgcmV0dXJuIG5vZGVUeXBlID09PSAxIHx8ICFub2RlVHlwZSB8fCBub2RlVHlwZSA9PT0gOTtcclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSB7XHJcbiAgdmFyIHRtcCwgdGFnLCB3cmFwLFxyXG4gICAgICBmcmFnbWVudCA9IGNvbnRleHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxyXG4gICAgICBub2RlcyA9IFtdLCBpO1xyXG5cclxuICBpZiAoanFMaXRlSXNUZXh0Tm9kZShodG1sKSkge1xyXG4gICAgLy8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXHJcbiAgICBub2Rlcy5wdXNoKGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoaHRtbCkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcclxuICAgIHRtcCA9IHRtcCB8fCBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZXh0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xyXG4gICAgdGFnID0gKFRBR19OQU1FX1JFR0VYUC5leGVjKGh0bWwpIHx8IFtcIlwiLCBcIlwiXSlbMV0udG9Mb3dlckNhc2UoKTtcclxuICAgIHdyYXAgPSB3cmFwTWFwW3RhZ10gfHwgd3JhcE1hcC5fZGVmYXVsdDtcclxuICAgIHRtcC5pbm5lckhUTUwgPSB3cmFwWzFdICsgaHRtbC5yZXBsYWNlKFhIVE1MX1RBR19SRUdFWFAsIFwiPCQxPjwvJDI+XCIpICsgd3JhcFsyXTtcclxuXHJcbiAgICAvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcclxuICAgIGkgPSB3cmFwWzBdO1xyXG4gICAgd2hpbGUgKGktLSkge1xyXG4gICAgICB0bXAgPSB0bXAubGFzdENoaWxkO1xyXG4gICAgfVxyXG5cclxuICAgIG5vZGVzID0gY29uY2F0KG5vZGVzLCB0bXAuY2hpbGROb2Rlcyk7XHJcblxyXG4gICAgdG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcclxuICAgIHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XHJcbiAgZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIGZyYWdtZW50LmlubmVySFRNTCA9IFwiXCI7IC8vIENsZWFyIGlubmVyIEhUTUxcclxuICBmb3JFYWNoKG5vZGVzLCBmdW5jdGlvbihub2RlKSB7XHJcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGZyYWdtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVQYXJzZUhUTUwoaHRtbCwgY29udGV4dCkge1xyXG4gIGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xyXG4gIHZhciBwYXJzZWQ7XHJcblxyXG4gIGlmICgocGFyc2VkID0gU0lOR0xFX1RBR19SRUdFWFAuZXhlYyhodG1sKSkpIHtcclxuICAgIHJldHVybiBbY29udGV4dC5jcmVhdGVFbGVtZW50KHBhcnNlZFsxXSldO1xyXG4gIH1cclxuXHJcbiAgaWYgKChwYXJzZWQgPSBqcUxpdGVCdWlsZEZyYWdtZW50KGh0bWwsIGNvbnRleHQpKSkge1xyXG4gICAgcmV0dXJuIHBhcnNlZC5jaGlsZE5vZGVzO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIFtdO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZnVuY3Rpb24gSlFMaXRlKGVsZW1lbnQpIHtcclxuICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEpRTGl0ZSkge1xyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICB2YXIgYXJnSXNTdHJpbmc7XHJcblxyXG4gIGlmIChpc1N0cmluZyhlbGVtZW50KSkge1xyXG4gICAgZWxlbWVudCA9IHRyaW0oZWxlbWVudCk7XHJcbiAgICBhcmdJc1N0cmluZyA9IHRydWU7XHJcbiAgfVxyXG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBKUUxpdGUpKSB7XHJcbiAgICBpZiAoYXJnSXNTdHJpbmcgJiYgZWxlbWVudC5jaGFyQXQoMCkgIT0gJzwnKSB7XHJcbiAgICAgIHRocm93IGpxTGl0ZU1pbkVycignbm9zZWwnLCAnTG9va2luZyB1cCBlbGVtZW50cyB2aWEgc2VsZWN0b3JzIGlzIG5vdCBzdXBwb3J0ZWQgYnkganFMaXRlISBTZWU6IGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2FuZ3VsYXIuZWxlbWVudCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBKUUxpdGUoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBpZiAoYXJnSXNTdHJpbmcpIHtcclxuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGpxTGl0ZVBhcnNlSFRNTChlbGVtZW50KSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlQ2xvbmUoZWxlbWVudCkge1xyXG4gIHJldHVybiBlbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlRGVhbG9jKGVsZW1lbnQsIG9ubHlEZXNjZW5kYW50cyl7XHJcbiAgaWYgKCFvbmx5RGVzY2VuZGFudHMpIGpxTGl0ZVJlbW92ZURhdGEoZWxlbWVudCk7XHJcblxyXG4gIGlmIChlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwpIHtcclxuICAgIHZhciBkZXNjZW5kYW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkZXNjZW5kYW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAganFMaXRlUmVtb3ZlRGF0YShkZXNjZW5kYW50c1tpXSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVPZmYoZWxlbWVudCwgdHlwZSwgZm4sIHVuc3VwcG9ydGVkKSB7XHJcbiAgaWYgKGlzRGVmaW5lZCh1bnN1cHBvcnRlZCkpIHRocm93IGpxTGl0ZU1pbkVycignb2ZmYXJncycsICdqcUxpdGUjb2ZmKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBhcmd1bWVudCcpO1xyXG5cclxuICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQpO1xyXG4gIHZhciBldmVudHMgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmV2ZW50cztcclxuICB2YXIgaGFuZGxlID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5oYW5kbGU7XHJcblxyXG4gIGlmICghaGFuZGxlKSByZXR1cm47IC8vbm8gbGlzdGVuZXJzIHJlZ2lzdGVyZWRcclxuXHJcbiAgaWYgKCF0eXBlKSB7XHJcbiAgICBmb3IgKHR5cGUgaW4gZXZlbnRzKSB7XHJcbiAgICAgIGlmICh0eXBlICE9PSAnJGRlc3Ryb3knKSB7XHJcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lckZuKGVsZW1lbnQsIHR5cGUsIGV2ZW50c1t0eXBlXSk7XHJcbiAgICAgIH1cclxuICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgZm9yRWFjaCh0eXBlLnNwbGl0KCcgJyksIGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgICAgaWYgKGlzVW5kZWZpbmVkKGZuKSkge1xyXG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihlbGVtZW50LCB0eXBlLCBldmVudHNbdHlwZV0pO1xyXG4gICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXJyYXlSZW1vdmUoZXZlbnRzW3R5cGVdIHx8IFtdLCBmbik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlRGF0YShlbGVtZW50LCBuYW1lKSB7XHJcbiAgdmFyIGV4cGFuZG9JZCA9IGVsZW1lbnQubmczMzk7XHJcbiAgdmFyIGV4cGFuZG9TdG9yZSA9IGV4cGFuZG9JZCAmJiBqcUNhY2hlW2V4cGFuZG9JZF07XHJcblxyXG4gIGlmIChleHBhbmRvU3RvcmUpIHtcclxuICAgIGlmIChuYW1lKSB7XHJcbiAgICAgIGRlbGV0ZSBleHBhbmRvU3RvcmUuZGF0YVtuYW1lXTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChleHBhbmRvU3RvcmUuaGFuZGxlKSB7XHJcbiAgICAgIGlmIChleHBhbmRvU3RvcmUuZXZlbnRzLiRkZXN0cm95KSB7XHJcbiAgICAgICAgZXhwYW5kb1N0b3JlLmhhbmRsZSh7fSwgJyRkZXN0cm95Jyk7XHJcbiAgICAgIH1cclxuICAgICAganFMaXRlT2ZmKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlIGpxQ2FjaGVbZXhwYW5kb0lkXTtcclxuICAgIGVsZW1lbnQubmczMzkgPSB1bmRlZmluZWQ7IC8vIGRvbid0IGRlbGV0ZSBET00gZXhwYW5kb3MuIElFIGFuZCBDaHJvbWUgZG9uJ3QgbGlrZSBpdFxyXG4gIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCBjcmVhdGVJZk5lY2Vzc2FyeSkge1xyXG4gIHZhciBleHBhbmRvSWQgPSBlbGVtZW50Lm5nMzM5LFxyXG4gICAgICBleHBhbmRvU3RvcmUgPSBleHBhbmRvSWQgJiYganFDYWNoZVtleHBhbmRvSWRdO1xyXG5cclxuICBpZiAoY3JlYXRlSWZOZWNlc3NhcnkgJiYgIWV4cGFuZG9TdG9yZSkge1xyXG4gICAgZWxlbWVudC5uZzMzOSA9IGV4cGFuZG9JZCA9IGpxTmV4dElkKCk7XHJcbiAgICBleHBhbmRvU3RvcmUgPSBqcUNhY2hlW2V4cGFuZG9JZF0gPSB7ZXZlbnRzOiB7fSwgZGF0YToge30sIGhhbmRsZTogdW5kZWZpbmVkfTtcclxuICB9XHJcblxyXG4gIHJldHVybiBleHBhbmRvU3RvcmU7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBqcUxpdGVEYXRhKGVsZW1lbnQsIGtleSwgdmFsdWUpIHtcclxuICBpZiAoanFMaXRlQWNjZXB0c0RhdGEoZWxlbWVudCkpIHtcclxuXHJcbiAgICB2YXIgaXNTaW1wbGVTZXR0ZXIgPSBpc0RlZmluZWQodmFsdWUpO1xyXG4gICAgdmFyIGlzU2ltcGxlR2V0dGVyID0gIWlzU2ltcGxlU2V0dGVyICYmIGtleSAmJiAhaXNPYmplY3Qoa2V5KTtcclxuICAgIHZhciBtYXNzR2V0dGVyID0gIWtleTtcclxuICAgIHZhciBleHBhbmRvU3RvcmUgPSBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwgIWlzU2ltcGxlR2V0dGVyKTtcclxuICAgIHZhciBkYXRhID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5kYXRhO1xyXG5cclxuICAgIGlmIChpc1NpbXBsZVNldHRlcikgeyAvLyBkYXRhKCdrZXknLCB2YWx1ZSlcclxuICAgICAgZGF0YVtrZXldID0gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAobWFzc0dldHRlcikgeyAgLy8gZGF0YSgpXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGlzU2ltcGxlR2V0dGVyKSB7IC8vIGRhdGEoJ2tleScpXHJcbiAgICAgICAgICAvLyBkb24ndCBmb3JjZSBjcmVhdGlvbiBvZiBleHBhbmRvU3RvcmUgaWYgaXQgZG9lc24ndCBleGlzdCB5ZXRcclxuICAgICAgICAgIHJldHVybiBkYXRhICYmIGRhdGFba2V5XTtcclxuICAgICAgICB9IGVsc2UgeyAvLyBtYXNzLXNldHRlcjogZGF0YSh7a2V5MTogdmFsMSwga2V5MjogdmFsMn0pXHJcbiAgICAgICAgICBleHRlbmQoZGF0YSwga2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsIHNlbGVjdG9yKSB7XHJcbiAgaWYgKCFlbGVtZW50LmdldEF0dHJpYnV0ZSkgcmV0dXJuIGZhbHNlO1xyXG4gIHJldHVybiAoKFwiIFwiICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCBcIiBcIikuXHJcbiAgICAgIGluZGV4T2YoIFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIiApID4gLTEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmVDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XHJcbiAgaWYgKGNzc0NsYXNzZXMgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcclxuICAgIGZvckVhY2goY3NzQ2xhc3Nlcy5zcGxpdCgnICcpLCBmdW5jdGlvbihjc3NDbGFzcykge1xyXG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB0cmltKFxyXG4gICAgICAgICAgKFwiIFwiICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiKVxyXG4gICAgICAgICAgLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKVxyXG4gICAgICAgICAgLnJlcGxhY2UoXCIgXCIgKyB0cmltKGNzc0NsYXNzKSArIFwiIFwiLCBcIiBcIikpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUFkZENsYXNzKGVsZW1lbnQsIGNzc0NsYXNzZXMpIHtcclxuICBpZiAoY3NzQ2xhc3NlcyAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSkge1xyXG4gICAgdmFyIGV4aXN0aW5nQ2xhc3NlcyA9ICgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKTtcclxuXHJcbiAgICBmb3JFYWNoKGNzc0NsYXNzZXMuc3BsaXQoJyAnKSwgZnVuY3Rpb24oY3NzQ2xhc3MpIHtcclxuICAgICAgY3NzQ2xhc3MgPSB0cmltKGNzc0NsYXNzKTtcclxuICAgICAgaWYgKGV4aXN0aW5nQ2xhc3Nlcy5pbmRleE9mKCcgJyArIGNzc0NsYXNzICsgJyAnKSA9PT0gLTEpIHtcclxuICAgICAgICBleGlzdGluZ0NsYXNzZXMgKz0gY3NzQ2xhc3MgKyAnICc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRyaW0oZXhpc3RpbmdDbGFzc2VzKSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24ganFMaXRlQWRkTm9kZXMocm9vdCwgZWxlbWVudHMpIHtcclxuICAvLyBUSElTIENPREUgSVMgVkVSWSBIT1QuIERvbid0IG1ha2UgY2hhbmdlcyB3aXRob3V0IGJlbmNobWFya2luZy5cclxuXHJcbiAgaWYgKGVsZW1lbnRzKSB7XHJcblxyXG4gICAgLy8gaWYgYSBOb2RlICh0aGUgbW9zdCBjb21tb24gY2FzZSlcclxuICAgIGlmIChlbGVtZW50cy5ub2RlVHlwZSkge1xyXG4gICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xyXG5cclxuICAgICAgLy8gaWYgYW4gQXJyYXkgb3IgTm9kZUxpc3QgYW5kIG5vdCBhIFdpbmRvd1xyXG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgJiYgZWxlbWVudHMud2luZG93ICE9PSBlbGVtZW50cykge1xyXG4gICAgICAgIGlmIChsZW5ndGgpIHtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcm9vdFtyb290Lmxlbmd0aCsrXSA9IGVsZW1lbnRzW2ldO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBqcUxpdGVDb250cm9sbGVyKGVsZW1lbnQsIG5hbWUpIHtcclxuICByZXR1cm4ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCAnJCcgKyAobmFtZSB8fCAnbmdDb250cm9sbGVyJyApICsgJ0NvbnRyb2xsZXInKTtcclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xyXG4gIC8vIGlmIGVsZW1lbnQgaXMgdGhlIGRvY3VtZW50IG9iamVjdCB3b3JrIHdpdGggdGhlIGh0bWwgZWxlbWVudCBpbnN0ZWFkXHJcbiAgLy8gdGhpcyBtYWtlcyAkKGRvY3VtZW50KS5zY29wZSgpIHBvc3NpYmxlXHJcbiAgaWYoZWxlbWVudC5ub2RlVHlwZSA9PSA5KSB7XHJcbiAgICBlbGVtZW50ID0gZWxlbWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgfVxyXG4gIHZhciBuYW1lcyA9IGlzQXJyYXkobmFtZSkgPyBuYW1lIDogW25hbWVdO1xyXG5cclxuICB3aGlsZSAoZWxlbWVudCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICBpZiAoKHZhbHVlID0ganFMaXRlLmRhdGEoZWxlbWVudCwgbmFtZXNbaV0pKSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgZGVhbGluZyB3aXRoIGEgZG9jdW1lbnQgZnJhZ21lbnQgbm9kZSB3aXRoIGEgaG9zdCBlbGVtZW50LCBhbmQgbm8gcGFyZW50LCB1c2UgdGhlIGhvc3RcclxuICAgIC8vIGVsZW1lbnQgYXMgdGhlIHBhcmVudC4gVGhpcyBlbmFibGVzIGRpcmVjdGl2ZXMgd2l0aGluIGEgU2hhZG93IERPTSBvciBwb2x5ZmlsbGVkIFNoYWRvdyBET01cclxuICAgIC8vIHRvIGxvb2t1cCBwYXJlbnQgY29udHJvbGxlcnMuXHJcbiAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlIHx8IChlbGVtZW50Lm5vZGVUeXBlID09PSAxMSAmJiBlbGVtZW50Lmhvc3QpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlRW1wdHkoZWxlbWVudCkge1xyXG4gIGpxTGl0ZURlYWxvYyhlbGVtZW50LCB0cnVlKTtcclxuICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmUoZWxlbWVudCwga2VlcERhdGEpIHtcclxuICBpZiAoIWtlZXBEYXRhKSBqcUxpdGVEZWFsb2MoZWxlbWVudCk7XHJcbiAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBGdW5jdGlvbnMgd2hpY2ggYXJlIGRlY2xhcmVkIGRpcmVjdGx5LlxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxudmFyIEpRTGl0ZVByb3RvdHlwZSA9IEpRTGl0ZS5wcm90b3R5cGUgPSB7XHJcbiAgcmVhZHk6IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICB2YXIgZmlyZWQgPSBmYWxzZTtcclxuXHJcbiAgICBmdW5jdGlvbiB0cmlnZ2VyKCkge1xyXG4gICAgICBpZiAoZmlyZWQpIHJldHVybjtcclxuICAgICAgZmlyZWQgPSB0cnVlO1xyXG4gICAgICBmbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIGlmIGRvY3VtZW50IGlzIGFscmVhZHkgbG9hZGVkXHJcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJyl7XHJcbiAgICAgIHNldFRpbWVvdXQodHJpZ2dlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9uKCdET01Db250ZW50TG9hZGVkJywgdHJpZ2dlcik7IC8vIHdvcmtzIGZvciBtb2Rlcm4gYnJvd3NlcnMgYW5kIElFOVxyXG4gICAgICAvLyB3ZSBjYW4gbm90IHVzZSBqcUxpdGUgc2luY2Ugd2UgYXJlIG5vdCBkb25lIGxvYWRpbmcgYW5kIGpRdWVyeSBjb3VsZCBiZSBsb2FkZWQgbGF0ZXIuXHJcbiAgICAgIC8vIGpzaGludCAtVzA2NFxyXG4gICAgICBKUUxpdGUod2luZG93KS5vbignbG9hZCcsIHRyaWdnZXIpOyAvLyBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkIGZvciBvdGhlcnNcclxuICAgICAgLy8ganNoaW50ICtXMDY0XHJcbiAgICAgIHRoaXMub24oJ0RPTUNvbnRlbnRMb2FkZWQnLCB0cmlnZ2VyKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciB2YWx1ZSA9IFtdO1xyXG4gICAgZm9yRWFjaCh0aGlzLCBmdW5jdGlvbihlKXsgdmFsdWUucHVzaCgnJyArIGUpO30pO1xyXG4gICAgcmV0dXJuICdbJyArIHZhbHVlLmpvaW4oJywgJykgKyAnXSc7XHJcbiAgfSxcclxuXHJcbiAgZXE6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgIHJldHVybiAoaW5kZXggPj0gMCkgPyBqcUxpdGUodGhpc1tpbmRleF0pIDoganFMaXRlKHRoaXNbdGhpcy5sZW5ndGggKyBpbmRleF0pO1xyXG4gIH0sXHJcblxyXG4gIGxlbmd0aDogMCxcclxuICBwdXNoOiBwdXNoLFxyXG4gIHNvcnQ6IFtdLnNvcnQsXHJcbiAgc3BsaWNlOiBbXS5zcGxpY2VcclxufTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBGdW5jdGlvbnMgaXRlcmF0aW5nIGdldHRlci9zZXR0ZXJzLlxyXG4vLyB0aGVzZSBmdW5jdGlvbnMgcmV0dXJuIHNlbGYgb24gc2V0dGVyIGFuZFxyXG4vLyB2YWx1ZSBvbiBnZXQuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG52YXIgQk9PTEVBTl9BVFRSID0ge307XHJcbmZvckVhY2goJ211bHRpcGxlLHNlbGVjdGVkLGNoZWNrZWQsZGlzYWJsZWQscmVhZE9ubHkscmVxdWlyZWQsb3Blbicuc3BsaXQoJywnKSwgZnVuY3Rpb24odmFsdWUpIHtcclxuICBCT09MRUFOX0FUVFJbbG93ZXJjYXNlKHZhbHVlKV0gPSB2YWx1ZTtcclxufSk7XHJcbnZhciBCT09MRUFOX0VMRU1FTlRTID0ge307XHJcbmZvckVhY2goJ2lucHV0LHNlbGVjdCxvcHRpb24sdGV4dGFyZWEsYnV0dG9uLGZvcm0sZGV0YWlscycuc3BsaXQoJywnKSwgZnVuY3Rpb24odmFsdWUpIHtcclxuICBCT09MRUFOX0VMRU1FTlRTW3ZhbHVlXSA9IHRydWU7XHJcbn0pO1xyXG52YXIgQUxJQVNFRF9BVFRSID0ge1xyXG4gICduZ01pbmxlbmd0aCcgOiAnbWlubGVuZ3RoJyxcclxuICAnbmdNYXhsZW5ndGgnIDogJ21heGxlbmd0aCcsXHJcbiAgJ25nTWluJyA6ICdtaW4nLFxyXG4gICduZ01heCcgOiAnbWF4JyxcclxuICAnbmdQYXR0ZXJuJyA6ICdwYXR0ZXJuJ1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0Qm9vbGVhbkF0dHJOYW1lKGVsZW1lbnQsIG5hbWUpIHtcclxuICAvLyBjaGVjayBkb20gbGFzdCBzaW5jZSB3ZSB3aWxsIG1vc3QgbGlrZWx5IGZhaWwgb24gbmFtZVxyXG4gIHZhciBib29sZWFuQXR0ciA9IEJPT0xFQU5fQVRUUltuYW1lLnRvTG93ZXJDYXNlKCldO1xyXG5cclxuICAvLyBib29sZWFuQXR0ciBpcyBoZXJlIHR3aWNlIHRvIG1pbmltaXplIERPTSBhY2Nlc3NcclxuICByZXR1cm4gYm9vbGVhbkF0dHIgJiYgQk9PTEVBTl9FTEVNRU5UU1tub2RlTmFtZV8oZWxlbWVudCldICYmIGJvb2xlYW5BdHRyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRBbGlhc2VkQXR0ck5hbWUoZWxlbWVudCwgbmFtZSkge1xyXG4gIHZhciBub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWU7XHJcbiAgcmV0dXJuIChub2RlTmFtZSA9PT0gJ0lOUFVUJyB8fCBub2RlTmFtZSA9PT0gJ1RFWFRBUkVBJykgJiYgQUxJQVNFRF9BVFRSW25hbWVdO1xyXG59XHJcblxyXG5mb3JFYWNoKHtcclxuICBkYXRhOiBqcUxpdGVEYXRhLFxyXG4gIHJlbW92ZURhdGE6IGpxTGl0ZVJlbW92ZURhdGFcclxufSwgZnVuY3Rpb24oZm4sIG5hbWUpIHtcclxuICBKUUxpdGVbbmFtZV0gPSBmbjtcclxufSk7XHJcblxyXG5mb3JFYWNoKHtcclxuICBkYXRhOiBqcUxpdGVEYXRhLFxyXG4gIGluaGVyaXRlZERhdGE6IGpxTGl0ZUluaGVyaXRlZERhdGEsXHJcblxyXG4gIHNjb3BlOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAvLyBDYW4ndCB1c2UganFMaXRlRGF0YSBoZXJlIGRpcmVjdGx5IHNvIHdlIHN0YXkgY29tcGF0aWJsZSB3aXRoIGpRdWVyeSFcclxuICAgIHJldHVybiBqcUxpdGUuZGF0YShlbGVtZW50LCAnJHNjb3BlJykgfHwganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LnBhcmVudE5vZGUgfHwgZWxlbWVudCwgWyckaXNvbGF0ZVNjb3BlJywgJyRzY29wZSddKTtcclxuICB9LFxyXG5cclxuICBpc29sYXRlU2NvcGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIC8vIENhbid0IHVzZSBqcUxpdGVEYXRhIGhlcmUgZGlyZWN0bHkgc28gd2Ugc3RheSBjb21wYXRpYmxlIHdpdGggalF1ZXJ5IVxyXG4gICAgcmV0dXJuIGpxTGl0ZS5kYXRhKGVsZW1lbnQsICckaXNvbGF0ZVNjb3BlJykgfHwganFMaXRlLmRhdGEoZWxlbWVudCwgJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyk7XHJcbiAgfSxcclxuXHJcbiAgY29udHJvbGxlcjoganFMaXRlQ29udHJvbGxlcixcclxuXHJcbiAgaW5qZWN0b3I6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIHJldHVybiBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQsICckaW5qZWN0b3InKTtcclxuICB9LFxyXG5cclxuICByZW1vdmVBdHRyOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lKSB7XHJcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcclxuICB9LFxyXG5cclxuICBoYXNDbGFzczoganFMaXRlSGFzQ2xhc3MsXHJcblxyXG4gIGNzczogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcclxuICAgIG5hbWUgPSBjYW1lbENhc2UobmFtZSk7XHJcblxyXG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgZWxlbWVudC5zdHlsZVtuYW1lXSA9IHZhbHVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbbmFtZV07XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgYXR0cjogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSwgdmFsdWUpe1xyXG4gICAgdmFyIGxvd2VyY2FzZWROYW1lID0gbG93ZXJjYXNlKG5hbWUpO1xyXG4gICAgaWYgKEJPT0xFQU5fQVRUUltsb3dlcmNhc2VkTmFtZV0pIHtcclxuICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICBpZiAoISF2YWx1ZSkge1xyXG4gICAgICAgICAgZWxlbWVudFtuYW1lXSA9IHRydWU7XHJcbiAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCBsb3dlcmNhc2VkTmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGVsZW1lbnRbbmFtZV0gPSBmYWxzZTtcclxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGxvd2VyY2FzZWROYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIChlbGVtZW50W25hbWVdIHx8XHJcbiAgICAgICAgICAgICAgICAgKGVsZW1lbnQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0obmFtZSl8fCBub29wKS5zcGVjaWZpZWQpXHJcbiAgICAgICAgICAgICAgID8gbG93ZXJjYXNlZE5hbWVcclxuICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKSB7XHJcbiAgICAgIC8vIHRoZSBleHRyYSBhcmd1bWVudCBcIjJcIiBpcyB0byBnZXQgdGhlIHJpZ2h0IHRoaW5nIGZvciBhLmhyZWYgaW4gSUUsIHNlZSBqUXVlcnkgY29kZVxyXG4gICAgICAvLyBzb21lIGVsZW1lbnRzIChlLmcuIERvY3VtZW50KSBkb24ndCBoYXZlIGdldCBhdHRyaWJ1dGUsIHNvIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgdmFyIHJldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUsIDIpO1xyXG4gICAgICAvLyBub3JtYWxpemUgbm9uLWV4aXN0aW5nIGF0dHJpYnV0ZXMgdG8gdW5kZWZpbmVkIChhcyBqUXVlcnkpXHJcbiAgICAgIHJldHVybiByZXQgPT09IG51bGwgPyB1bmRlZmluZWQgOiByZXQ7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgcHJvcDogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcclxuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgIGVsZW1lbnRbbmFtZV0gPSB2YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50W25hbWVdO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHRleHQ6IChmdW5jdGlvbigpIHtcclxuICAgIGdldFRleHQuJGR2ID0gJyc7XHJcbiAgICByZXR1cm4gZ2V0VGV4dDtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRUZXh0KGVsZW1lbnQsIHZhbHVlKSB7XHJcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICB2YXIgbm9kZVR5cGUgPSBlbGVtZW50Lm5vZGVUeXBlO1xyXG4gICAgICAgIHJldHVybiAobm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDMpID8gZWxlbWVudC50ZXh0Q29udGVudCA6ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZTtcclxuICAgIH1cclxuICB9KSgpLFxyXG5cclxuICB2YWw6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgIGlmIChlbGVtZW50Lm11bHRpcGxlICYmIG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ3NlbGVjdCcpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgZm9yRWFjaChlbGVtZW50Lm9wdGlvbnMsIGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2gob3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA9PT0gMCA/IG51bGwgOiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XHJcbiAgICB9XHJcbiAgICBlbGVtZW50LnZhbHVlID0gdmFsdWU7XHJcbiAgfSxcclxuXHJcbiAgaHRtbDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUpIHtcclxuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQuaW5uZXJIVE1MO1xyXG4gICAgfVxyXG4gICAganFMaXRlRGVhbG9jKGVsZW1lbnQsIHRydWUpO1xyXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICB9LFxyXG5cclxuICBlbXB0eToganFMaXRlRW1wdHlcclxufSwgZnVuY3Rpb24oZm4sIG5hbWUpe1xyXG4gIC8qKlxyXG4gICAqIFByb3BlcnRpZXM6IHdyaXRlcyByZXR1cm4gc2VsZWN0aW9uLCByZWFkcyByZXR1cm4gZmlyc3QgdmFsdWVcclxuICAgKi9cclxuICBKUUxpdGUucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xyXG4gICAgdmFyIGksIGtleTtcclxuICAgIHZhciBub2RlQ291bnQgPSB0aGlzLmxlbmd0aDtcclxuXHJcbiAgICAvLyBqcUxpdGVIYXNDbGFzcyBoYXMgb25seSB0d28gYXJndW1lbnRzLCBidXQgaXMgYSBnZXR0ZXItb25seSBmbiwgc28gd2UgbmVlZCB0byBzcGVjaWFsLWNhc2UgaXRcclxuICAgIC8vIGluIGEgd2F5IHRoYXQgc3Vydml2ZXMgbWluaWZpY2F0aW9uLlxyXG4gICAgLy8ganFMaXRlRW1wdHkgdGFrZXMgbm8gYXJndW1lbnRzIGJ1dCBpcyBhIHNldHRlci5cclxuICAgIGlmIChmbiAhPT0ganFMaXRlRW1wdHkgJiZcclxuICAgICAgICAoKChmbi5sZW5ndGggPT0gMiAmJiAoZm4gIT09IGpxTGl0ZUhhc0NsYXNzICYmIGZuICE9PSBqcUxpdGVDb250cm9sbGVyKSkgPyBhcmcxIDogYXJnMikgPT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgaWYgKGlzT2JqZWN0KGFyZzEpKSB7XHJcblxyXG4gICAgICAgIC8vIHdlIGFyZSBhIHdyaXRlLCBidXQgdGhlIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSB0aGUga2V5L3ZhbHVlc1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGZuID09PSBqcUxpdGVEYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIGRhdGEoKSB0YWtlcyB0aGUgd2hvbGUgb2JqZWN0IGluIGpRdWVyeVxyXG4gICAgICAgICAgICBmbih0aGlzW2ldLCBhcmcxKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoa2V5IGluIGFyZzEpIHtcclxuICAgICAgICAgICAgICBmbih0aGlzW2ldLCBrZXksIGFyZzFba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmV0dXJuIHNlbGYgZm9yIGNoYWluaW5nXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gd2UgYXJlIGEgcmVhZCwgc28gcmVhZCB0aGUgZmlyc3QgY2hpbGQuXHJcbiAgICAgICAgLy8gVE9ETzogZG8gd2Ugc3RpbGwgbmVlZCB0aGlzP1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGZuLiRkdjtcclxuICAgICAgICAvLyBPbmx5IGlmIHdlIGhhdmUgJGR2IGRvIHdlIGl0ZXJhdGUgb3ZlciBhbGwsIG90aGVyd2lzZSBpdCBpcyBqdXN0IHRoZSBmaXJzdCBlbGVtZW50LlxyXG4gICAgICAgIHZhciBqaiA9ICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IE1hdGgubWluKG5vZGVDb3VudCwgMSkgOiBub2RlQ291bnQ7XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgICB2YXIgbm9kZVZhbHVlID0gZm4odGhpc1tqXSwgYXJnMSwgYXJnMik7XHJcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlID8gdmFsdWUgKyBub2RlVmFsdWUgOiBub2RlVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gd2UgYXJlIGEgd3JpdGUsIHNvIGFwcGx5IHRvIGFsbCBjaGlsZHJlblxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpKyspIHtcclxuICAgICAgICBmbih0aGlzW2ldLCBhcmcxLCBhcmcyKTtcclxuICAgICAgfVxyXG4gICAgICAvLyByZXR1cm4gc2VsZiBmb3IgY2hhaW5pbmdcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgfTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFdmVudEhhbmRsZXIoZWxlbWVudCwgZXZlbnRzKSB7XHJcbiAgdmFyIGV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCwgdHlwZSkge1xyXG4gICAgLy8galF1ZXJ5IHNwZWNpZmljIGFwaVxyXG4gICAgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBldmVudC5kZWZhdWx0UHJldmVudGVkO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZXZlbnRGbnMgPSBldmVudHNbdHlwZSB8fCBldmVudC50eXBlXTtcclxuICAgIHZhciBldmVudEZuc0xlbmd0aCA9IGV2ZW50Rm5zID8gZXZlbnRGbnMubGVuZ3RoIDogMDtcclxuXHJcbiAgICBpZiAoIWV2ZW50Rm5zTGVuZ3RoKSByZXR1cm47XHJcblxyXG4gICAgaWYgKGlzVW5kZWZpbmVkKGV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCkpIHtcclxuICAgICAgdmFyIG9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO1xyXG4gICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBldmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvcmlnaW5hbFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgb3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24uY2FsbChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBldmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPT09IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIENvcHkgZXZlbnQgaGFuZGxlcnMgaW4gY2FzZSBldmVudCBoYW5kbGVycyBhcnJheSBpcyBtb2RpZmllZCBkdXJpbmcgZXhlY3V0aW9uLlxyXG4gICAgaWYgKChldmVudEZuc0xlbmd0aCA+IDEpKSB7XHJcbiAgICAgIGV2ZW50Rm5zID0gc2hhbGxvd0NvcHkoZXZlbnRGbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRGbnNMZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcclxuICAgICAgICBldmVudEZuc1tpXS5jYWxsKGVsZW1lbnQsIGV2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFRPRE86IHRoaXMgaXMgYSBoYWNrIGZvciBhbmd1bGFyTW9ja3MvY2xlYXJEYXRhQ2FjaGUgdGhhdCBtYWtlcyBpdCBwb3NzaWJsZSB0byBkZXJlZ2lzdGVyIGFsbFxyXG4gIC8vICAgICAgIGV2ZW50cyBvbiBgZWxlbWVudGBcclxuICBldmVudEhhbmRsZXIuZWxlbSA9IGVsZW1lbnQ7XHJcbiAgcmV0dXJuIGV2ZW50SGFuZGxlcjtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIEZ1bmN0aW9ucyBpdGVyYXRpbmcgdHJhdmVyc2FsLlxyXG4vLyBUaGVzZSBmdW5jdGlvbnMgY2hhaW4gcmVzdWx0cyBpbnRvIGEgc2luZ2xlXHJcbi8vIHNlbGVjdG9yLlxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZm9yRWFjaCh7XHJcbiAgcmVtb3ZlRGF0YToganFMaXRlUmVtb3ZlRGF0YSxcclxuXHJcbiAgb246IGZ1bmN0aW9uIGpxTGl0ZU9uKGVsZW1lbnQsIHR5cGUsIGZuLCB1bnN1cHBvcnRlZCl7XHJcbiAgICBpZiAoaXNEZWZpbmVkKHVuc3VwcG9ydGVkKSkgdGhyb3cganFMaXRlTWluRXJyKCdvbmFyZ3MnLCAnanFMaXRlI29uKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBvciBgZXZlbnREYXRhYCBwYXJhbWV0ZXJzJyk7XHJcblxyXG4gICAgLy8gRG8gbm90IGFkZCBldmVudCBoYW5kbGVycyB0byBub24tZWxlbWVudHMgYmVjYXVzZSB0aGV5IHdpbGwgbm90IGJlIGNsZWFuZWQgdXAuXHJcbiAgICBpZiAoIWpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsIHRydWUpO1xyXG4gICAgdmFyIGV2ZW50cyA9IGV4cGFuZG9TdG9yZS5ldmVudHM7XHJcbiAgICB2YXIgaGFuZGxlID0gZXhwYW5kb1N0b3JlLmhhbmRsZTtcclxuXHJcbiAgICBpZiAoIWhhbmRsZSkge1xyXG4gICAgICBoYW5kbGUgPSBleHBhbmRvU3RvcmUuaGFuZGxlID0gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vc3RyaW5nLWluZGV4b2YtdnMtc3BsaXRcclxuICAgIHZhciB0eXBlcyA9IHR5cGUuaW5kZXhPZignICcpID49IDAgPyB0eXBlLnNwbGl0KCcgJykgOiBbdHlwZV07XHJcbiAgICB2YXIgaSA9IHR5cGVzLmxlbmd0aDtcclxuXHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIHR5cGUgPSB0eXBlc1tpXTtcclxuICAgICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdO1xyXG5cclxuICAgICAgaWYgKCFldmVudEZucykge1xyXG4gICAgICAgIGV2ZW50c1t0eXBlXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ21vdXNlZW50ZXInIHx8IHR5cGUgPT09ICdtb3VzZWxlYXZlJykge1xyXG4gICAgICAgICAgLy8gUmVmZXIgdG8galF1ZXJ5J3MgaW1wbGVtZW50YXRpb24gb2YgbW91c2VlbnRlciAmIG1vdXNlbGVhdmVcclxuICAgICAgICAgIC8vIFJlYWQgYWJvdXQgbW91c2VlbnRlciBhbmQgbW91c2VsZWF2ZTpcclxuICAgICAgICAgIC8vIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX21vdXNlLmh0bWwjbGluazhcclxuXHJcbiAgICAgICAgICBqcUxpdGVPbihlbGVtZW50LCBNT1VTRV9FVkVOVF9NQVBbdHlwZV0sIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLCByZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldDtcclxuICAgICAgICAgICAgLy8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICAvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xyXG4gICAgICAgICAgICBpZiAoICFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0YXJnZXQgJiYgIXRhcmdldC5jb250YWlucyhyZWxhdGVkKSkgKXtcclxuICAgICAgICAgICAgICBoYW5kbGUoZXZlbnQsIHR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0eXBlICE9PSAnJGRlc3Ryb3knKSB7XHJcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXJGbihlbGVtZW50LCB0eXBlLCBoYW5kbGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudEZucyA9IGV2ZW50c1t0eXBlXTtcclxuICAgICAgfVxyXG4gICAgICBldmVudEZucy5wdXNoKGZuKTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBvZmY6IGpxTGl0ZU9mZixcclxuXHJcbiAgb25lOiBmdW5jdGlvbihlbGVtZW50LCB0eXBlLCBmbikge1xyXG4gICAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KTtcclxuXHJcbiAgICAvL2FkZCB0aGUgbGlzdGVuZXIgdHdpY2Ugc28gdGhhdCB3aGVuIGl0IGlzIGNhbGxlZFxyXG4gICAgLy95b3UgY2FuIHJlbW92ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gYW5kIHN0aWxsIGJlXHJcbiAgICAvL2FibGUgdG8gY2FsbCBlbGVtZW50Lm9mZihldiwgZm4pIG5vcm1hbGx5XHJcbiAgICBlbGVtZW50Lm9uKHR5cGUsIGZ1bmN0aW9uIG9uRm4oKSB7XHJcbiAgICAgIGVsZW1lbnQub2ZmKHR5cGUsIGZuKTtcclxuICAgICAgZWxlbWVudC5vZmYodHlwZSwgb25Gbik7XHJcbiAgICB9KTtcclxuICAgIGVsZW1lbnQub24odHlwZSwgZm4pO1xyXG4gIH0sXHJcblxyXG4gIHJlcGxhY2VXaXRoOiBmdW5jdGlvbihlbGVtZW50LCByZXBsYWNlTm9kZSkge1xyXG4gICAgdmFyIGluZGV4LCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICBqcUxpdGVEZWFsb2MoZWxlbWVudCk7XHJcbiAgICBmb3JFYWNoKG5ldyBKUUxpdGUocmVwbGFjZU5vZGUpLCBmdW5jdGlvbihub2RlKXtcclxuICAgICAgaWYgKGluZGV4KSB7XHJcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCBpbmRleC5uZXh0U2libGluZyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChub2RlLCBlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgICBpbmRleCA9IG5vZGU7XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBjaGlsZHJlbjogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgdmFyIGNoaWxkcmVuID0gW107XHJcbiAgICBmb3JFYWNoKGVsZW1lbnQuY2hpbGROb2RlcywgZnVuY3Rpb24oZWxlbWVudCl7XHJcbiAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSAxKVxyXG4gICAgICAgIGNoaWxkcmVuLnB1c2goZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBjaGlsZHJlbjtcclxuICB9LFxyXG5cclxuICBjb250ZW50czogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGVsZW1lbnQuY29udGVudERvY3VtZW50IHx8IGVsZW1lbnQuY2hpbGROb2RlcyB8fCBbXTtcclxuICB9LFxyXG5cclxuICBhcHBlbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHtcclxuICAgIHZhciBub2RlVHlwZSA9IGVsZW1lbnQubm9kZVR5cGU7XHJcbiAgICBpZiAobm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDExKSByZXR1cm47XHJcblxyXG4gICAgbm9kZSA9IG5ldyBKUUxpdGUobm9kZSk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbm9kZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgIHZhciBjaGlsZCA9IG5vZGVbaV07XHJcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHByZXBlbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHtcclxuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSAxKSB7XHJcbiAgICAgIHZhciBpbmRleCA9IGVsZW1lbnQuZmlyc3RDaGlsZDtcclxuICAgICAgZm9yRWFjaChuZXcgSlFMaXRlKG5vZGUpLCBmdW5jdGlvbihjaGlsZCl7XHJcbiAgICAgICAgZWxlbWVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIGluZGV4KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgd3JhcDogZnVuY3Rpb24oZWxlbWVudCwgd3JhcE5vZGUpIHtcclxuICAgIHdyYXBOb2RlID0ganFMaXRlKHdyYXBOb2RlKS5lcSgwKS5jbG9uZSgpWzBdO1xyXG4gICAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwTm9kZSwgZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB3cmFwTm9kZS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICB9LFxyXG5cclxuICByZW1vdmU6IGpxTGl0ZVJlbW92ZSxcclxuXHJcbiAgZGV0YWNoOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICBqcUxpdGVSZW1vdmUoZWxlbWVudCwgdHJ1ZSk7XHJcbiAgfSxcclxuXHJcbiAgYWZ0ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcclxuICAgIHZhciBpbmRleCA9IGVsZW1lbnQsIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgIG5ld0VsZW1lbnQgPSBuZXcgSlFMaXRlKG5ld0VsZW1lbnQpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5ld0VsZW1lbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICB2YXIgbm9kZSA9IG5ld0VsZW1lbnRbaV07XHJcbiAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgaW5kZXgubmV4dFNpYmxpbmcpO1xyXG4gICAgICBpbmRleCA9IG5vZGU7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgYWRkQ2xhc3M6IGpxTGl0ZUFkZENsYXNzLFxyXG4gIHJlbW92ZUNsYXNzOiBqcUxpdGVSZW1vdmVDbGFzcyxcclxuXHJcbiAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yLCBjb25kaXRpb24pIHtcclxuICAgIGlmIChzZWxlY3Rvcikge1xyXG4gICAgICBmb3JFYWNoKHNlbGVjdG9yLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNsYXNzTmFtZSl7XHJcbiAgICAgICAgdmFyIGNsYXNzQ29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChjbGFzc0NvbmRpdGlvbikpIHtcclxuICAgICAgICAgIGNsYXNzQ29uZGl0aW9uID0gIWpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIChjbGFzc0NvbmRpdGlvbiA/IGpxTGl0ZUFkZENsYXNzIDoganFMaXRlUmVtb3ZlQ2xhc3MpKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHBhcmVudDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgIHJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxMSA/IHBhcmVudCA6IG51bGw7XHJcbiAgfSxcclxuXHJcbiAgbmV4dDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gIH0sXHJcblxyXG4gIGZpbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yKSB7XHJcbiAgICBpZiAoZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSkge1xyXG4gICAgICByZXR1cm4gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3Rvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgY2xvbmU6IGpxTGl0ZUNsb25lLFxyXG5cclxuICB0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQsIGV4dHJhUGFyYW1ldGVycykge1xyXG5cclxuICAgIHZhciBkdW1teUV2ZW50LCBldmVudEZuc0NvcHksIGhhbmRsZXJBcmdzO1xyXG4gICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50LnR5cGUgfHwgZXZlbnQ7XHJcbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQpO1xyXG4gICAgdmFyIGV2ZW50cyA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuZXZlbnRzO1xyXG4gICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzICYmIGV2ZW50c1tldmVudE5hbWVdO1xyXG5cclxuICAgIGlmIChldmVudEZucykge1xyXG4gICAgICAvLyBDcmVhdGUgYSBkdW1teSBldmVudCB0byBwYXNzIHRvIHRoZSBoYW5kbGVyc1xyXG4gICAgICBkdW1teUV2ZW50ID0ge1xyXG4gICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsgfSxcclxuICAgICAgICBpc0RlZmF1bHRQcmV2ZW50ZWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kZWZhdWx0UHJldmVudGVkID09PSB0cnVlOyB9LFxyXG4gICAgICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7IHRoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTsgfSxcclxuICAgICAgICBpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9PT0gdHJ1ZTsgfSxcclxuICAgICAgICBzdG9wUHJvcGFnYXRpb246IG5vb3AsXHJcbiAgICAgICAgdHlwZTogZXZlbnROYW1lLFxyXG4gICAgICAgIHRhcmdldDogZWxlbWVudFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gSWYgYSBjdXN0b20gZXZlbnQgd2FzIHByb3ZpZGVkIHRoZW4gZXh0ZW5kIG91ciBkdW1teSBldmVudCB3aXRoIGl0XHJcbiAgICAgIGlmIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgZHVtbXlFdmVudCA9IGV4dGVuZChkdW1teUV2ZW50LCBldmVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENvcHkgZXZlbnQgaGFuZGxlcnMgaW4gY2FzZSBldmVudCBoYW5kbGVycyBhcnJheSBpcyBtb2RpZmllZCBkdXJpbmcgZXhlY3V0aW9uLlxyXG4gICAgICBldmVudEZuc0NvcHkgPSBzaGFsbG93Q29weShldmVudEZucyk7XHJcbiAgICAgIGhhbmRsZXJBcmdzID0gZXh0cmFQYXJhbWV0ZXJzID8gW2R1bW15RXZlbnRdLmNvbmNhdChleHRyYVBhcmFtZXRlcnMpIDogW2R1bW15RXZlbnRdO1xyXG5cclxuICAgICAgZm9yRWFjaChldmVudEZuc0NvcHksIGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgaWYgKCFkdW1teUV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcclxuICAgICAgICAgIGZuLmFwcGx5KGVsZW1lbnQsIGhhbmRsZXJBcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSwgZnVuY3Rpb24oZm4sIG5hbWUpe1xyXG4gIC8qKlxyXG4gICAqIGNoYWluaW5nIGZ1bmN0aW9uc1xyXG4gICAqL1xyXG4gIEpRTGl0ZS5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbihhcmcxLCBhcmcyLCBhcmczKSB7XHJcbiAgICB2YXIgdmFsdWU7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMCwgaWkgPSB0aGlzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICAgIHZhbHVlID0gZm4odGhpc1tpXSwgYXJnMSwgYXJnMiwgYXJnMyk7XHJcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICAgIC8vIGFueSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgdmFsdWUgbmVlZHMgdG8gYmUgd3JhcHBlZFxyXG4gICAgICAgICAgdmFsdWUgPSBqcUxpdGUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBqcUxpdGVBZGROb2Rlcyh2YWx1ZSwgZm4odGhpc1tpXSwgYXJnMSwgYXJnMiwgYXJnMykpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcztcclxuICB9O1xyXG5cclxuICAvLyBiaW5kIGxlZ2FjeSBiaW5kL3VuYmluZCB0byBvbi9vZmZcclxuICBKUUxpdGUucHJvdG90eXBlLmJpbmQgPSBKUUxpdGUucHJvdG90eXBlLm9uO1xyXG4gIEpRTGl0ZS5wcm90b3R5cGUudW5iaW5kID0gSlFMaXRlLnByb3RvdHlwZS5vZmY7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIENvbXB1dGVzIGEgaGFzaCBvZiBhbiAnb2JqJy5cclxuICogSGFzaCBvZiBhOlxyXG4gKiAgc3RyaW5nIGlzIHN0cmluZ1xyXG4gKiAgbnVtYmVyIGlzIG51bWJlciBhcyBzdHJpbmdcclxuICogIG9iamVjdCBpcyBlaXRoZXIgcmVzdWx0IG9mIGNhbGxpbmcgJCRoYXNoS2V5IGZ1bmN0aW9uIG9uIHRoZSBvYmplY3Qgb3IgdW5pcXVlbHkgZ2VuZXJhdGVkIGlkLFxyXG4gKiAgICAgICAgIHRoYXQgaXMgYWxzbyBhc3NpZ25lZCB0byB0aGUgJCRoYXNoS2V5IHByb3BlcnR5IG9mIHRoZSBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSBvYmpcclxuICogQHJldHVybnMge3N0cmluZ30gaGFzaCBzdHJpbmcgc3VjaCB0aGF0IHRoZSBzYW1lIGlucHV0IHdpbGwgaGF2ZSB0aGUgc2FtZSBoYXNoIHN0cmluZy5cclxuICogICAgICAgICBUaGUgcmVzdWx0aW5nIHN0cmluZyBrZXkgaXMgaW4gJ3R5cGU6aGFzaEtleScgZm9ybWF0LlxyXG4gKi9cclxuZnVuY3Rpb24gaGFzaEtleShvYmosIG5leHRVaWRGbikge1xyXG4gIHZhciBrZXkgPSBvYmogJiYgb2JqLiQkaGFzaEtleTtcclxuXHJcbiAgaWYgKGtleSkge1xyXG4gICAgaWYgKHR5cGVvZiBrZXkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAga2V5ID0gb2JqLiQkaGFzaEtleSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGtleTtcclxuICB9XHJcblxyXG4gIHZhciBvYmpUeXBlID0gdHlwZW9mIG9iajtcclxuICBpZiAob2JqVHlwZSA9PSAnZnVuY3Rpb24nIHx8IChvYmpUeXBlID09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbCkpIHtcclxuICAgIGtleSA9IG9iai4kJGhhc2hLZXkgPSBvYmpUeXBlICsgJzonICsgKG5leHRVaWRGbiB8fCBuZXh0VWlkKSgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBrZXkgPSBvYmpUeXBlICsgJzonICsgb2JqO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGtleTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhhc2hNYXAgd2hpY2ggY2FuIHVzZSBvYmplY3RzIGFzIGtleXNcclxuICovXHJcbmZ1bmN0aW9uIEhhc2hNYXAoYXJyYXksIGlzb2xhdGVkVWlkKSB7XHJcbiAgaWYgKGlzb2xhdGVkVWlkKSB7XHJcbiAgICB2YXIgdWlkID0gMDtcclxuICAgIHRoaXMubmV4dFVpZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gKyt1aWQ7XHJcbiAgICB9O1xyXG4gIH1cclxuICBmb3JFYWNoKGFycmF5LCB0aGlzLnB1dCwgdGhpcyk7XHJcbn1cclxuSGFzaE1hcC5wcm90b3R5cGUgPSB7XHJcbiAgLyoqXHJcbiAgICogU3RvcmUga2V5IHZhbHVlIHBhaXJcclxuICAgKiBAcGFyYW0ga2V5IGtleSB0byBzdG9yZSBjYW4gYmUgYW55IHR5cGVcclxuICAgKiBAcGFyYW0gdmFsdWUgdmFsdWUgdG8gc3RvcmUgY2FuIGJlIGFueSB0eXBlXHJcbiAgICovXHJcbiAgcHV0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XHJcbiAgICB0aGlzW2hhc2hLZXkoa2V5LCB0aGlzLm5leHRVaWQpXSA9IHZhbHVlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBrZXlcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSB0aGUgdmFsdWUgZm9yIHRoZSBrZXlcclxuICAgKi9cclxuICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgcmV0dXJuIHRoaXNbaGFzaEtleShrZXksIHRoaXMubmV4dFVpZCldO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZSB0aGUga2V5L3ZhbHVlIHBhaXJcclxuICAgKiBAcGFyYW0ga2V5XHJcbiAgICovXHJcbiAgcmVtb3ZlOiBmdW5jdGlvbihrZXkpIHtcclxuICAgIHZhciB2YWx1ZSA9IHRoaXNba2V5ID0gaGFzaEtleShrZXksIHRoaXMubmV4dFVpZCldO1xyXG4gICAgZGVsZXRlIHRoaXNba2V5XTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQG5hbWUgYW5ndWxhci5pbmplY3RvclxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ3JlYXRlcyBhbiBpbmplY3RvciBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIGZvciByZXRyaWV2aW5nIHNlcnZpY2VzIGFzIHdlbGwgYXMgZm9yXHJcbiAqIGRlcGVuZGVuY3kgaW5qZWN0aW9uIChzZWUge0BsaW5rIGd1aWRlL2RpIGRlcGVuZGVuY3kgaW5qZWN0aW9ufSkuXHJcbiAqXHJcblxyXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBtb2R1bGVzIEEgbGlzdCBvZiBtb2R1bGUgZnVuY3Rpb25zIG9yIHRoZWlyIGFsaWFzZXMuIFNlZVxyXG4gKiAgICAgICAge0BsaW5rIGFuZ3VsYXIubW9kdWxlfS4gVGhlIGBuZ2AgbW9kdWxlIG11c3QgYmUgZXhwbGljaXRseSBhZGRlZC5cclxuICogQHJldHVybnMge2Z1bmN0aW9uKCl9IEluamVjdG9yIGZ1bmN0aW9uLiBTZWUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFR5cGljYWwgdXNhZ2VcclxuICogYGBganNcclxuICogICAvLyBjcmVhdGUgYW4gaW5qZWN0b3JcclxuICogICB2YXIgJGluamVjdG9yID0gYW5ndWxhci5pbmplY3RvcihbJ25nJ10pO1xyXG4gKlxyXG4gKiAgIC8vIHVzZSB0aGUgaW5qZWN0b3IgdG8ga2ljayBvZmYgeW91ciBhcHBsaWNhdGlvblxyXG4gKiAgIC8vIHVzZSB0aGUgdHlwZSBpbmZlcmVuY2UgdG8gYXV0byBpbmplY3QgYXJndW1lbnRzLCBvciB1c2UgaW1wbGljaXQgaW5qZWN0aW9uXHJcbiAqICAgJGluamVjdG9yLmludm9rZShmdW5jdGlvbigkcm9vdFNjb3BlLCAkY29tcGlsZSwgJGRvY3VtZW50KSB7XHJcbiAqICAgICAkY29tcGlsZSgkZG9jdW1lbnQpKCRyb290U2NvcGUpO1xyXG4gKiAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBTb21ldGltZXMgeW91IHdhbnQgdG8gZ2V0IGFjY2VzcyB0byB0aGUgaW5qZWN0b3Igb2YgYSBjdXJyZW50bHkgcnVubmluZyBBbmd1bGFyIGFwcFxyXG4gKiBmcm9tIG91dHNpZGUgQW5ndWxhci4gUGVyaGFwcywgeW91IHdhbnQgdG8gaW5qZWN0IGFuZCBjb21waWxlIHNvbWUgbWFya3VwIGFmdGVyIHRoZVxyXG4gKiBhcHBsaWNhdGlvbiBoYXMgYmVlbiBib290c3RyYXBwZWQuIFlvdSBjYW4gZG8gdGhpcyB1c2luZyB0aGUgZXh0cmEgYGluamVjdG9yKClgIGFkZGVkXHJcbiAqIHRvIEpRdWVyeS9qcUxpdGUgZWxlbWVudHMuIFNlZSB7QGxpbmsgYW5ndWxhci5lbGVtZW50fS5cclxuICpcclxuICogKlRoaXMgaXMgZmFpcmx5IHJhcmUgYnV0IGNvdWxkIGJlIHRoZSBjYXNlIGlmIGEgdGhpcmQgcGFydHkgbGlicmFyeSBpcyBpbmplY3RpbmcgdGhlXHJcbiAqIG1hcmt1cC4qXHJcbiAqXHJcbiAqIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSBhIG5ldyBibG9jayBvZiBIVE1MIGNvbnRhaW5pbmcgYSBgbmctY29udHJvbGxlcmBcclxuICogZGlyZWN0aXZlIGlzIGFkZGVkIHRvIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50IGJvZHkgYnkgSlF1ZXJ5LiBXZSB0aGVuIGNvbXBpbGUgYW5kIGxpbmtcclxuICogaXQgaW50byB0aGUgY3VycmVudCBBbmd1bGFySlMgc2NvcGUuXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIHZhciAkZGl2ID0gJCgnPGRpdiBuZy1jb250cm9sbGVyPVwiTXlDdHJsXCI+e3tjb250ZW50LmxhYmVsfX08L2Rpdj4nKTtcclxuICogJChkb2N1bWVudC5ib2R5KS5hcHBlbmQoJGRpdik7XHJcbiAqXHJcbiAqIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuaW5qZWN0b3IoKS5pbnZva2UoZnVuY3Rpb24oJGNvbXBpbGUpIHtcclxuICogICB2YXIgc2NvcGUgPSBhbmd1bGFyLmVsZW1lbnQoJGRpdikuc2NvcGUoKTtcclxuICogICAkY29tcGlsZSgkZGl2KShzY29wZSk7XHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtb2R1bGVcclxuICogQG5hbWUgYXV0b1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogSW1wbGljaXQgbW9kdWxlIHdoaWNoIGdldHMgYXV0b21hdGljYWxseSBhZGRlZCB0byBlYWNoIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxyXG4gKi9cclxuXHJcbnZhciBGTl9BUkdTID0gL15mdW5jdGlvblxccypbXlxcKF0qXFwoXFxzKihbXlxcKV0qKVxcKS9tO1xyXG52YXIgRk5fQVJHX1NQTElUID0gLywvO1xyXG52YXIgRk5fQVJHID0gL15cXHMqKF8/KShcXFMrPylcXDFcXHMqJC87XHJcbnZhciBTVFJJUF9DT01NRU5UUyA9IC8oKFxcL1xcLy4qJCl8KFxcL1xcKltcXHNcXFNdKj9cXCpcXC8pKS9tZztcclxudmFyICRpbmplY3Rvck1pbkVyciA9IG1pbkVycignJGluamVjdG9yJyk7XHJcblxyXG5mdW5jdGlvbiBhbm9uRm4oZm4pIHtcclxuICAvLyBGb3IgYW5vbnltb3VzIGZ1bmN0aW9ucywgc2hvd2luZyBhdCB0aGUgdmVyeSBsZWFzdCB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGNhbiBoZWxwIGluXHJcbiAgLy8gZGVidWdnaW5nLlxyXG4gIHZhciBmblRleHQgPSBmbi50b1N0cmluZygpLnJlcGxhY2UoU1RSSVBfQ09NTUVOVFMsICcnKSxcclxuICAgICAgYXJncyA9IGZuVGV4dC5tYXRjaChGTl9BUkdTKTtcclxuICBpZiAoYXJncykge1xyXG4gICAgcmV0dXJuICdmdW5jdGlvbignICsgKGFyZ3NbMV0gfHwgJycpLnJlcGxhY2UoL1tcXHNcXHJcXG5dKy8sICcgJykgKyAnKSc7XHJcbiAgfVxyXG4gIHJldHVybiAnZm4nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhbm5vdGF0ZShmbiwgc3RyaWN0RGksIG5hbWUpIHtcclxuICB2YXIgJGluamVjdCxcclxuICAgICAgZm5UZXh0LFxyXG4gICAgICBhcmdEZWNsLFxyXG4gICAgICBsYXN0O1xyXG5cclxuICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICBpZiAoISgkaW5qZWN0ID0gZm4uJGluamVjdCkpIHtcclxuICAgICAgJGluamVjdCA9IFtdO1xyXG4gICAgICBpZiAoZm4ubGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKHN0cmljdERpKSB7XHJcbiAgICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgICAgIG5hbWUgPSBmbi5uYW1lIHx8IGFub25Gbihmbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3N0cmljdGRpJyxcclxuICAgICAgICAgICAgJ3swfSBpcyBub3QgdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbiBhbmQgY2Fubm90IGJlIGludm9rZWQgaW4gc3RyaWN0IG1vZGUnLCBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm5UZXh0ID0gZm4udG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyk7XHJcbiAgICAgICAgYXJnRGVjbCA9IGZuVGV4dC5tYXRjaChGTl9BUkdTKTtcclxuICAgICAgICBmb3JFYWNoKGFyZ0RlY2xbMV0uc3BsaXQoRk5fQVJHX1NQTElUKSwgZnVuY3Rpb24oYXJnKSB7XHJcbiAgICAgICAgICBhcmcucmVwbGFjZShGTl9BUkcsIGZ1bmN0aW9uKGFsbCwgdW5kZXJzY29yZSwgbmFtZSkge1xyXG4gICAgICAgICAgICAkaW5qZWN0LnB1c2gobmFtZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBmbi4kaW5qZWN0ID0gJGluamVjdDtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGlzQXJyYXkoZm4pKSB7XHJcbiAgICBsYXN0ID0gZm4ubGVuZ3RoIC0gMTtcclxuICAgIGFzc2VydEFyZ0ZuKGZuW2xhc3RdLCAnZm4nKTtcclxuICAgICRpbmplY3QgPSBmbi5zbGljZSgwLCBsYXN0KTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXNzZXJ0QXJnRm4oZm4sICdmbicsIHRydWUpO1xyXG4gIH1cclxuICByZXR1cm4gJGluamVjdDtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJGluamVjdG9yXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBgJGluamVjdG9yYCBpcyB1c2VkIHRvIHJldHJpZXZlIG9iamVjdCBpbnN0YW5jZXMgYXMgZGVmaW5lZCBieVxyXG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSBwcm92aWRlcn0sIGluc3RhbnRpYXRlIHR5cGVzLCBpbnZva2UgbWV0aG9kcyxcclxuICogYW5kIGxvYWQgbW9kdWxlcy5cclxuICpcclxuICogVGhlIGZvbGxvd2luZyBhbHdheXMgaG9sZHMgdHJ1ZTpcclxuICpcclxuICogYGBganNcclxuICogICB2YXIgJGluamVjdG9yID0gYW5ndWxhci5pbmplY3RvcigpO1xyXG4gKiAgIGV4cGVjdCgkaW5qZWN0b3IuZ2V0KCckaW5qZWN0b3InKSkudG9CZSgkaW5qZWN0b3IpO1xyXG4gKiAgIGV4cGVjdCgkaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRpbmplY3Rvcikge1xyXG4gKiAgICAgcmV0dXJuICRpbmplY3RvcjtcclxuICogICB9KS50b0JlKCRpbmplY3Rvcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAjIEluamVjdGlvbiBGdW5jdGlvbiBBbm5vdGF0aW9uXHJcbiAqXHJcbiAqIEphdmFTY3JpcHQgZG9lcyBub3QgaGF2ZSBhbm5vdGF0aW9ucywgYW5kIGFubm90YXRpb25zIGFyZSBuZWVkZWQgZm9yIGRlcGVuZGVuY3kgaW5qZWN0aW9uLiBUaGVcclxuICogZm9sbG93aW5nIGFyZSBhbGwgdmFsaWQgd2F5cyBvZiBhbm5vdGF0aW5nIGZ1bmN0aW9uIHdpdGggaW5qZWN0aW9uIGFyZ3VtZW50cyBhbmQgYXJlIGVxdWl2YWxlbnQuXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gaW5mZXJyZWQgKG9ubHkgd29ya3MgaWYgY29kZSBub3QgbWluaWZpZWQvb2JmdXNjYXRlZClcclxuICogICAkaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKHNlcnZpY2VBKXt9KTtcclxuICpcclxuICogICAvLyBhbm5vdGF0ZWRcclxuICogICBmdW5jdGlvbiBleHBsaWNpdChzZXJ2aWNlQSkge307XHJcbiAqICAgZXhwbGljaXQuJGluamVjdCA9IFsnc2VydmljZUEnXTtcclxuICogICAkaW5qZWN0b3IuaW52b2tlKGV4cGxpY2l0KTtcclxuICpcclxuICogICAvLyBpbmxpbmVcclxuICogICAkaW5qZWN0b3IuaW52b2tlKFsnc2VydmljZUEnLCBmdW5jdGlvbihzZXJ2aWNlQSl7fV0pO1xyXG4gKiBgYGBcclxuICpcclxuICogIyMgSW5mZXJlbmNlXHJcbiAqXHJcbiAqIEluIEphdmFTY3JpcHQgY2FsbGluZyBgdG9TdHJpbmcoKWAgb24gYSBmdW5jdGlvbiByZXR1cm5zIHRoZSBmdW5jdGlvbiBkZWZpbml0aW9uLiBUaGUgZGVmaW5pdGlvblxyXG4gKiBjYW4gdGhlbiBiZSBwYXJzZWQgYW5kIHRoZSBmdW5jdGlvbiBhcmd1bWVudHMgY2FuIGJlIGV4dHJhY3RlZC4gKk5PVEU6KiBUaGlzIGRvZXMgbm90IHdvcmsgd2l0aFxyXG4gKiBtaW5pZmljYXRpb24sIGFuZCBvYmZ1c2NhdGlvbiB0b29scyBzaW5jZSB0aGVzZSB0b29scyBjaGFuZ2UgdGhlIGFyZ3VtZW50IG5hbWVzLlxyXG4gKlxyXG4gKiAjIyBgJGluamVjdGAgQW5ub3RhdGlvblxyXG4gKiBCeSBhZGRpbmcgYW4gYCRpbmplY3RgIHByb3BlcnR5IG9udG8gYSBmdW5jdGlvbiB0aGUgaW5qZWN0aW9uIHBhcmFtZXRlcnMgY2FuIGJlIHNwZWNpZmllZC5cclxuICpcclxuICogIyMgSW5saW5lXHJcbiAqIEFzIGFuIGFycmF5IG9mIGluamVjdGlvbiBuYW1lcywgd2hlcmUgdGhlIGxhc3QgaXRlbSBpbiB0aGUgYXJyYXkgaXMgdGhlIGZ1bmN0aW9uIHRvIGNhbGwuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJGluamVjdG9yI2dldFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogUmV0dXJuIGFuIGluc3RhbmNlIG9mIHRoZSBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UgdG8gcmV0cmlldmUuXHJcbiAqIEByZXR1cm4geyp9IFRoZSBpbnN0YW5jZS5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkaW5qZWN0b3IjaW52b2tlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBJbnZva2UgdGhlIG1ldGhvZCBhbmQgc3VwcGx5IHRoZSBtZXRob2QgYXJndW1lbnRzIGZyb20gdGhlIGAkaW5qZWN0b3JgLlxyXG4gKlxyXG4gKiBAcGFyYW0geyFGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGludm9rZS4gRnVuY3Rpb24gcGFyYW1ldGVycyBhcmUgaW5qZWN0ZWQgYWNjb3JkaW5nIHRvIHRoZVxyXG4gKiAgIHtAbGluayBndWlkZS9kaSAkaW5qZWN0IEFubm90YXRpb259IHJ1bGVzLlxyXG4gKiBAcGFyYW0ge09iamVjdD19IHNlbGYgVGhlIGB0aGlzYCBmb3IgdGhlIGludm9rZWQgbWV0aG9kLlxyXG4gKiBAcGFyYW0ge09iamVjdD19IGxvY2FscyBPcHRpb25hbCBvYmplY3QuIElmIHByZXNldCB0aGVuIGFueSBhcmd1bWVudCBuYW1lcyBhcmUgcmVhZCBmcm9tIHRoaXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0IGZpcnN0LCBiZWZvcmUgdGhlIGAkaW5qZWN0b3JgIGlzIGNvbnN1bHRlZC5cclxuICogQHJldHVybnMgeyp9IHRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgaW52b2tlZCBgZm5gIGZ1bmN0aW9uLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRpbmplY3RvciNoYXNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEFsbG93cyB0aGUgdXNlciB0byBxdWVyeSBpZiB0aGUgcGFydGljdWxhciBzZXJ2aWNlIGV4aXN0cy5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IE5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gcXVlcnkuXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSByZXR1cm5zIHRydWUgaWYgaW5qZWN0b3IgaGFzIGdpdmVuIHNlcnZpY2UuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJGluamVjdG9yI2luc3RhbnRpYXRlXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgSlMgdHlwZS4gVGhlIG1ldGhvZCB0YWtlcyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBpbnZva2VzIHRoZSBuZXdcclxuICogb3BlcmF0b3IsIGFuZCBzdXBwbGllcyBhbGwgb2YgdGhlIGFyZ3VtZW50cyB0byB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb24gYXMgc3BlY2lmaWVkIGJ5IHRoZVxyXG4gKiBjb25zdHJ1Y3RvciBhbm5vdGF0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBUeXBlIEFubm90YXRlZCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cclxuICogQHBhcmFtIHtPYmplY3Q9fSBsb2NhbHMgT3B0aW9uYWwgb2JqZWN0LiBJZiBwcmVzZXQgdGhlbiBhbnkgYXJndW1lbnQgbmFtZXMgYXJlIHJlYWQgZnJvbSB0aGlzXHJcbiAqIG9iamVjdCBmaXJzdCwgYmVmb3JlIHRoZSBgJGluamVjdG9yYCBpcyBjb25zdWx0ZWQuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IG5ldyBpbnN0YW5jZSBvZiBgVHlwZWAuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJGluamVjdG9yI2Fubm90YXRlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHNlcnZpY2UgbmFtZXMgd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIHJlcXVlc3RpbmcgZm9yIGluamVjdGlvbi4gVGhpcyBBUEkgaXNcclxuICogdXNlZCBieSB0aGUgaW5qZWN0b3IgdG8gZGV0ZXJtaW5lIHdoaWNoIHNlcnZpY2VzIG5lZWQgdG8gYmUgaW5qZWN0ZWQgaW50byB0aGUgZnVuY3Rpb24gd2hlbiB0aGVcclxuICogZnVuY3Rpb24gaXMgaW52b2tlZC4gVGhlcmUgYXJlIHRocmVlIHdheXMgaW4gd2hpY2ggdGhlIGZ1bmN0aW9uIGNhbiBiZSBhbm5vdGF0ZWQgd2l0aCB0aGUgbmVlZGVkXHJcbiAqIGRlcGVuZGVuY2llcy5cclxuICpcclxuICogIyBBcmd1bWVudCBuYW1lc1xyXG4gKlxyXG4gKiBUaGUgc2ltcGxlc3QgZm9ybSBpcyB0byBleHRyYWN0IHRoZSBkZXBlbmRlbmNpZXMgZnJvbSB0aGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbi4gVGhpcyBpcyBkb25lXHJcbiAqIGJ5IGNvbnZlcnRpbmcgdGhlIGZ1bmN0aW9uIGludG8gYSBzdHJpbmcgdXNpbmcgYHRvU3RyaW5nKClgIG1ldGhvZCBhbmQgZXh0cmFjdGluZyB0aGUgYXJndW1lbnRcclxuICogbmFtZXMuXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gR2l2ZW5cclxuICogICBmdW5jdGlvbiBNeUNvbnRyb2xsZXIoJHNjb3BlLCAkcm91dGUpIHtcclxuICogICAgIC8vIC4uLlxyXG4gKiAgIH1cclxuICpcclxuICogICAvLyBUaGVuXHJcbiAqICAgZXhwZWN0KGluamVjdG9yLmFubm90YXRlKE15Q29udHJvbGxlcikpLnRvRXF1YWwoWyckc2NvcGUnLCAnJHJvdXRlJ10pO1xyXG4gKiBgYGBcclxuICpcclxuICogVGhpcyBtZXRob2QgZG9lcyBub3Qgd29yayB3aXRoIGNvZGUgbWluaWZpY2F0aW9uIC8gb2JmdXNjYXRpb24uIEZvciB0aGlzIHJlYXNvbiB0aGUgZm9sbG93aW5nXHJcbiAqIGFubm90YXRpb24gc3RyYXRlZ2llcyBhcmUgc3VwcG9ydGVkLlxyXG4gKlxyXG4gKiAjIFRoZSBgJGluamVjdGAgcHJvcGVydHlcclxuICpcclxuICogSWYgYSBmdW5jdGlvbiBoYXMgYW4gYCRpbmplY3RgIHByb3BlcnR5IGFuZCBpdHMgdmFsdWUgaXMgYW4gYXJyYXkgb2Ygc3RyaW5ncywgdGhlbiB0aGUgc3RyaW5nc1xyXG4gKiByZXByZXNlbnQgbmFtZXMgb2Ygc2VydmljZXMgdG8gYmUgaW5qZWN0ZWQgaW50byB0aGUgZnVuY3Rpb24uXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gR2l2ZW5cclxuICogICB2YXIgTXlDb250cm9sbGVyID0gZnVuY3Rpb24ob2JmdXNjYXRlZFNjb3BlLCBvYmZ1c2NhdGVkUm91dGUpIHtcclxuICogICAgIC8vIC4uLlxyXG4gKiAgIH1cclxuICogICAvLyBEZWZpbmUgZnVuY3Rpb24gZGVwZW5kZW5jaWVzXHJcbiAqICAgTXlDb250cm9sbGVyWyckaW5qZWN0J10gPSBbJyRzY29wZScsICckcm91dGUnXTtcclxuICpcclxuICogICAvLyBUaGVuXHJcbiAqICAgZXhwZWN0KGluamVjdG9yLmFubm90YXRlKE15Q29udHJvbGxlcikpLnRvRXF1YWwoWyckc2NvcGUnLCAnJHJvdXRlJ10pO1xyXG4gKiBgYGBcclxuICpcclxuICogIyBUaGUgYXJyYXkgbm90YXRpb25cclxuICpcclxuICogSXQgaXMgb2Z0ZW4gZGVzaXJhYmxlIHRvIGlubGluZSBJbmplY3RlZCBmdW5jdGlvbnMgYW5kIHRoYXQncyB3aGVuIHNldHRpbmcgdGhlIGAkaW5qZWN0YCBwcm9wZXJ0eVxyXG4gKiBpcyB2ZXJ5IGluY29udmVuaWVudC4gSW4gdGhlc2Ugc2l0dWF0aW9ucyB1c2luZyB0aGUgYXJyYXkgbm90YXRpb24gdG8gc3BlY2lmeSB0aGUgZGVwZW5kZW5jaWVzIGluXHJcbiAqIGEgd2F5IHRoYXQgc3Vydml2ZXMgbWluaWZpY2F0aW9uIGlzIGEgYmV0dGVyIGNob2ljZTpcclxuICpcclxuICogYGBganNcclxuICogICAvLyBXZSB3aXNoIHRvIHdyaXRlIHRoaXMgKG5vdCBtaW5pZmljYXRpb24gLyBvYmZ1c2NhdGlvbiBzYWZlKVxyXG4gKiAgIGluamVjdG9yLmludm9rZShmdW5jdGlvbigkY29tcGlsZSwgJHJvb3RTY29wZSkge1xyXG4gKiAgICAgLy8gLi4uXHJcbiAqICAgfSk7XHJcbiAqXHJcbiAqICAgLy8gV2UgYXJlIGZvcmNlZCB0byB3cml0ZSBicmVhayBpbmxpbmluZ1xyXG4gKiAgIHZhciB0bXBGbiA9IGZ1bmN0aW9uKG9iZnVzY2F0ZWRDb21waWxlLCBvYmZ1c2NhdGVkUm9vdFNjb3BlKSB7XHJcbiAqICAgICAvLyAuLi5cclxuICogICB9O1xyXG4gKiAgIHRtcEZuLiRpbmplY3QgPSBbJyRjb21waWxlJywgJyRyb290U2NvcGUnXTtcclxuICogICBpbmplY3Rvci5pbnZva2UodG1wRm4pO1xyXG4gKlxyXG4gKiAgIC8vIFRvIGJldHRlciBzdXBwb3J0IGlubGluZSBmdW5jdGlvbiB0aGUgaW5saW5lIGFubm90YXRpb24gaXMgc3VwcG9ydGVkXHJcbiAqICAgaW5qZWN0b3IuaW52b2tlKFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKG9iZkNvbXBpbGUsIG9iZlJvb3RTY29wZSkge1xyXG4gKiAgICAgLy8gLi4uXHJcbiAqICAgfV0pO1xyXG4gKlxyXG4gKiAgIC8vIFRoZXJlZm9yZVxyXG4gKiAgIGV4cGVjdChpbmplY3Rvci5hbm5vdGF0ZShcclxuICogICAgICBbJyRjb21waWxlJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbihvYmZ1c18kY29tcGlsZSwgb2JmdXNfJHJvb3RTY29wZSkge31dKVxyXG4gKiAgICApLnRvRXF1YWwoWyckY29tcGlsZScsICckcm9vdFNjb3BlJ10pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZm4gRnVuY3Rpb24gZm9yIHdoaWNoIGRlcGVuZGVudCBzZXJ2aWNlIG5hbWVzIG5lZWQgdG9cclxuICogYmUgcmV0cmlldmVkIGFzIGRlc2NyaWJlZCBhYm92ZS5cclxuICpcclxuICogQHJldHVybnMge0FycmF5LjxzdHJpbmc+fSBUaGUgbmFtZXMgb2YgdGhlIHNlcnZpY2VzIHdoaWNoIHRoZSBmdW5jdGlvbiByZXF1aXJlcy5cclxuICovXHJcblxyXG5cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHByb3ZpZGVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFRoZSB7QGxpbmsgYXV0by4kcHJvdmlkZSAkcHJvdmlkZX0gc2VydmljZSBoYXMgYSBudW1iZXIgb2YgbWV0aG9kcyBmb3IgcmVnaXN0ZXJpbmcgY29tcG9uZW50c1xyXG4gKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gTWFueSBvZiB0aGVzZSBmdW5jdGlvbnMgYXJlIGFsc28gZXhwb3NlZCBvblxyXG4gKiB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9LlxyXG4gKlxyXG4gKiBBbiBBbmd1bGFyICoqc2VydmljZSoqIGlzIGEgc2luZ2xldG9uIG9iamVjdCBjcmVhdGVkIGJ5IGEgKipzZXJ2aWNlIGZhY3RvcnkqKi4gIFRoZXNlICoqc2VydmljZVxyXG4gKiBmYWN0b3JpZXMqKiBhcmUgZnVuY3Rpb25zIHdoaWNoLCBpbiB0dXJuLCBhcmUgY3JlYXRlZCBieSBhICoqc2VydmljZSBwcm92aWRlcioqLlxyXG4gKiBUaGUgKipzZXJ2aWNlIHByb3ZpZGVycyoqIGFyZSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMuIFdoZW4gaW5zdGFudGlhdGVkIHRoZXkgbXVzdCBjb250YWluIGFcclxuICogcHJvcGVydHkgY2FsbGVkIGAkZ2V0YCwgd2hpY2ggaG9sZHMgdGhlICoqc2VydmljZSBmYWN0b3J5KiogZnVuY3Rpb24uXHJcbiAqXHJcbiAqIFdoZW4geW91IHJlcXVlc3QgYSBzZXJ2aWNlLCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0gaXMgcmVzcG9uc2libGUgZm9yIGZpbmRpbmcgdGhlXHJcbiAqIGNvcnJlY3QgKipzZXJ2aWNlIHByb3ZpZGVyKiosIGluc3RhbnRpYXRpbmcgaXQgYW5kIHRoZW4gY2FsbGluZyBpdHMgYCRnZXRgICoqc2VydmljZSBmYWN0b3J5KipcclxuICogZnVuY3Rpb24gdG8gZ2V0IHRoZSBpbnN0YW5jZSBvZiB0aGUgKipzZXJ2aWNlKiouXHJcbiAqXHJcbiAqIE9mdGVuIHNlcnZpY2VzIGhhdmUgbm8gY29uZmlndXJhdGlvbiBvcHRpb25zIGFuZCB0aGVyZSBpcyBubyBuZWVkIHRvIGFkZCBtZXRob2RzIHRvIHRoZSBzZXJ2aWNlXHJcbiAqIHByb3ZpZGVyLiAgVGhlIHByb3ZpZGVyIHdpbGwgYmUgbm8gbW9yZSB0aGFuIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gd2l0aCBhIGAkZ2V0YCBwcm9wZXJ0eS4gRm9yXHJcbiAqIHRoZXNlIGNhc2VzIHRoZSB7QGxpbmsgYXV0by4kcHJvdmlkZSAkcHJvdmlkZX0gc2VydmljZSBoYXMgYWRkaXRpb25hbCBoZWxwZXIgbWV0aG9kcyB0byByZWdpc3RlclxyXG4gKiBzZXJ2aWNlcyB3aXRob3V0IHNwZWNpZnlpbmcgYSBwcm92aWRlci5cclxuICpcclxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNwcm92aWRlciBwcm92aWRlcihwcm92aWRlcil9IC0gcmVnaXN0ZXJzIGEgKipzZXJ2aWNlIHByb3ZpZGVyKiogd2l0aCB0aGVcclxuICogICAgIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9XHJcbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjY29uc3RhbnQgY29uc3RhbnQob2JqKX0gLSByZWdpc3RlcnMgYSB2YWx1ZS9vYmplY3QgdGhhdCBjYW4gYmUgYWNjZXNzZWQgYnlcclxuICogICAgIHByb3ZpZGVycyBhbmQgc2VydmljZXMuXHJcbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgdmFsdWUob2JqKX0gLSByZWdpc3RlcnMgYSB2YWx1ZS9vYmplY3QgdGhhdCBjYW4gb25seSBiZSBhY2Nlc3NlZCBieVxyXG4gKiAgICAgc2VydmljZXMsIG5vdCBwcm92aWRlcnMuXHJcbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjZmFjdG9yeSBmYWN0b3J5KGZuKX0gLSByZWdpc3RlcnMgYSBzZXJ2aWNlICoqZmFjdG9yeSBmdW5jdGlvbioqLCBgZm5gLFxyXG4gKiAgICAgdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSAqKnNlcnZpY2UgcHJvdmlkZXIqKiBvYmplY3QsIHdob3NlIGAkZ2V0YCBwcm9wZXJ0eSB3aWxsIGNvbnRhaW4gdGhlXHJcbiAqICAgICBnaXZlbiBmYWN0b3J5IGZ1bmN0aW9uLlxyXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2Ugc2VydmljZShjbGFzcyl9IC0gcmVnaXN0ZXJzIGEgKipjb25zdHJ1Y3RvciBmdW5jdGlvbioqLCBgY2xhc3NgXHJcbiAqICAgICB0aGF0IHdpbGwgYmUgd3JhcHBlZCBpbiBhICoqc2VydmljZSBwcm92aWRlcioqIG9iamVjdCwgd2hvc2UgYCRnZXRgIHByb3BlcnR5IHdpbGwgaW5zdGFudGlhdGVcclxuICogICAgICBhIG5ldyBvYmplY3QgdXNpbmcgdGhlIGdpdmVuIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBTZWUgdGhlIGluZGl2aWR1YWwgbWV0aG9kcyBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhbmQgZXhhbXBsZXMuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJHByb3ZpZGUjcHJvdmlkZXJcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFJlZ2lzdGVyIGEgKipwcm92aWRlciBmdW5jdGlvbioqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBQcm92aWRlciBmdW5jdGlvbnNcclxuICogYXJlIGNvbnN0cnVjdG9yIGZ1bmN0aW9ucywgd2hvc2UgaW5zdGFuY2VzIGFyZSByZXNwb25zaWJsZSBmb3IgXCJwcm92aWRpbmdcIiBhIGZhY3RvcnkgZm9yIGFcclxuICogc2VydmljZS5cclxuICpcclxuICogU2VydmljZSBwcm92aWRlciBuYW1lcyBzdGFydCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRoZXkgcHJvdmlkZSBmb2xsb3dlZCBieSBgUHJvdmlkZXJgLlxyXG4gKiBGb3IgZXhhbXBsZSwgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2UgaGFzIGEgcHJvdmlkZXIgY2FsbGVkXHJcbiAqIHtAbGluayBuZy4kbG9nUHJvdmlkZXIgJGxvZ1Byb3ZpZGVyfS5cclxuICpcclxuICogU2VydmljZSBwcm92aWRlciBvYmplY3RzIGNhbiBoYXZlIGFkZGl0aW9uYWwgbWV0aG9kcyB3aGljaCBhbGxvdyBjb25maWd1cmF0aW9uIG9mIHRoZSBwcm92aWRlclxyXG4gKiBhbmQgaXRzIHNlcnZpY2UuIEltcG9ydGFudGx5LCB5b3UgY2FuIGNvbmZpZ3VyZSB3aGF0IGtpbmQgb2Ygc2VydmljZSBpcyBjcmVhdGVkIGJ5IHRoZSBgJGdldGBcclxuICogbWV0aG9kLCBvciBob3cgdGhhdCBzZXJ2aWNlIHdpbGwgYWN0LiBGb3IgZXhhbXBsZSwgdGhlIHtAbGluayBuZy4kbG9nUHJvdmlkZXIgJGxvZ1Byb3ZpZGVyfSBoYXMgYVxyXG4gKiBtZXRob2Qge0BsaW5rIG5nLiRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWQgZGVidWdFbmFibGVkfVxyXG4gKiB3aGljaCBsZXRzIHlvdSBzcGVjaWZ5IHdoZXRoZXIgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2Ugd2lsbCBsb2cgZGVidWcgbWVzc2FnZXMgdG8gdGhlXHJcbiAqIGNvbnNvbGUgb3Igbm90LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuIE5PVEU6IHRoZSBwcm92aWRlciB3aWxsIGJlIGF2YWlsYWJsZSB1bmRlciBgbmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdQcm92aWRlcidgIGtleS5cclxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKCkpfSBwcm92aWRlciBJZiB0aGUgcHJvdmlkZXIgaXM6XHJcbiAqXHJcbiAqICAgLSBgT2JqZWN0YDogdGhlbiBpdCBzaG91bGQgaGF2ZSBhIGAkZ2V0YCBtZXRob2QuIFRoZSBgJGdldGAgbWV0aG9kIHdpbGwgYmUgaW52b2tlZCB1c2luZ1xyXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSAkaW5qZWN0b3IuaW52b2tlKCl9IHdoZW4gYW4gaW5zdGFuY2UgbmVlZHMgdG8gYmUgY3JlYXRlZC5cclxuICogICAtIGBDb25zdHJ1Y3RvcmA6IGEgbmV3IGluc3RhbmNlIG9mIHRoZSBwcm92aWRlciB3aWxsIGJlIGNyZWF0ZWQgdXNpbmdcclxuICogICAgIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnN0YW50aWF0ZSAkaW5qZWN0b3IuaW5zdGFudGlhdGUoKX0sIHRoZW4gdHJlYXRlZCBhcyBgb2JqZWN0YC5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxyXG5cclxuICogQGV4YW1wbGVcclxuICpcclxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBjcmVhdGUgYSBzaW1wbGUgZXZlbnQgdHJhY2tpbmcgc2VydmljZSBhbmQgcmVnaXN0ZXIgaXQgdXNpbmdcclxuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAvLyBEZWZpbmUgdGhlIGV2ZW50VHJhY2tlciBwcm92aWRlclxyXG4gKiAgZnVuY3Rpb24gRXZlbnRUcmFja2VyUHJvdmlkZXIoKSB7XHJcbiAqICAgIHZhciB0cmFja2luZ1VybCA9ICcvdHJhY2snO1xyXG4gKlxyXG4gKiAgICAvLyBBIHByb3ZpZGVyIG1ldGhvZCBmb3IgY29uZmlndXJpbmcgd2hlcmUgdGhlIHRyYWNrZWQgZXZlbnRzIHNob3VsZCBiZWVuIHNhdmVkXHJcbiAqICAgIHRoaXMuc2V0VHJhY2tpbmdVcmwgPSBmdW5jdGlvbih1cmwpIHtcclxuICogICAgICB0cmFja2luZ1VybCA9IHVybDtcclxuICogICAgfTtcclxuICpcclxuICogICAgLy8gVGhlIHNlcnZpY2UgZmFjdG9yeSBmdW5jdGlvblxyXG4gKiAgICB0aGlzLiRnZXQgPSBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcclxuICogICAgICB2YXIgdHJhY2tlZEV2ZW50cyA9IHt9O1xyXG4gKiAgICAgIHJldHVybiB7XHJcbiAqICAgICAgICAvLyBDYWxsIHRoaXMgdG8gdHJhY2sgYW4gZXZlbnRcclxuICogICAgICAgIGV2ZW50OiBmdW5jdGlvbihldmVudCkge1xyXG4gKiAgICAgICAgICB2YXIgY291bnQgPSB0cmFja2VkRXZlbnRzW2V2ZW50XSB8fCAwO1xyXG4gKiAgICAgICAgICBjb3VudCArPSAxO1xyXG4gKiAgICAgICAgICB0cmFja2VkRXZlbnRzW2V2ZW50XSA9IGNvdW50O1xyXG4gKiAgICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAqICAgICAgICB9LFxyXG4gKiAgICAgICAgLy8gQ2FsbCB0aGlzIHRvIHNhdmUgdGhlIHRyYWNrZWQgZXZlbnRzIHRvIHRoZSB0cmFja2luZ1VybFxyXG4gKiAgICAgICAgc2F2ZTogZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgICAgICRodHRwLnBvc3QodHJhY2tpbmdVcmwsIHRyYWNrZWRFdmVudHMpO1xyXG4gKiAgICAgICAgfVxyXG4gKiAgICAgIH07XHJcbiAqICAgIH1dO1xyXG4gKiAgfVxyXG4gKlxyXG4gKiAgZGVzY3JpYmUoJ2V2ZW50VHJhY2tlcicsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICB2YXIgcG9zdFNweTtcclxuICpcclxuICogICAgYmVmb3JlRWFjaChtb2R1bGUoZnVuY3Rpb24oJHByb3ZpZGUpIHtcclxuICogICAgICAvLyBSZWdpc3RlciB0aGUgZXZlbnRUcmFja2VyIHByb3ZpZGVyXHJcbiAqICAgICAgJHByb3ZpZGUucHJvdmlkZXIoJ2V2ZW50VHJhY2tlcicsIEV2ZW50VHJhY2tlclByb3ZpZGVyKTtcclxuICogICAgfSkpO1xyXG4gKlxyXG4gKiAgICBiZWZvcmVFYWNoKG1vZHVsZShmdW5jdGlvbihldmVudFRyYWNrZXJQcm92aWRlcikge1xyXG4gKiAgICAgIC8vIENvbmZpZ3VyZSBldmVudFRyYWNrZXIgcHJvdmlkZXJcclxuICogICAgICBldmVudFRyYWNrZXJQcm92aWRlci5zZXRUcmFja2luZ1VybCgnL2N1c3RvbS10cmFjaycpO1xyXG4gKiAgICB9KSk7XHJcbiAqXHJcbiAqICAgIGl0KCd0cmFja3MgZXZlbnRzJywgaW5qZWN0KGZ1bmN0aW9uKGV2ZW50VHJhY2tlcikge1xyXG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMSk7XHJcbiAqICAgICAgZXhwZWN0KGV2ZW50VHJhY2tlci5ldmVudCgnbG9naW4nKSkudG9FcXVhbCgyKTtcclxuICogICAgfSkpO1xyXG4gKlxyXG4gKiAgICBpdCgnc2F2ZXMgdG8gdGhlIHRyYWNraW5nIHVybCcsIGluamVjdChmdW5jdGlvbihldmVudFRyYWNrZXIsICRodHRwKSB7XHJcbiAqICAgICAgcG9zdFNweSA9IHNweU9uKCRodHRwLCAncG9zdCcpO1xyXG4gKiAgICAgIGV2ZW50VHJhY2tlci5ldmVudCgnbG9naW4nKTtcclxuICogICAgICBldmVudFRyYWNrZXIuc2F2ZSgpO1xyXG4gKiAgICAgIGV4cGVjdChwb3N0U3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkubW9zdFJlY2VudENhbGwuYXJnc1swXSkubm90LnRvRXF1YWwoJy90cmFjaycpO1xyXG4gKiAgICAgIGV4cGVjdChwb3N0U3B5Lm1vc3RSZWNlbnRDYWxsLmFyZ3NbMF0pLnRvRXF1YWwoJy9jdXN0b20tdHJhY2snKTtcclxuICogICAgICBleHBlY3QocG9zdFNweS5tb3N0UmVjZW50Q2FsbC5hcmdzWzFdKS50b0VxdWFsKHsgJ2xvZ2luJzogMSB9KTtcclxuICogICAgfSkpO1xyXG4gKiAgfSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRwcm92aWRlI2ZhY3RvcnlcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFJlZ2lzdGVyIGEgKipzZXJ2aWNlIGZhY3RvcnkqKiwgd2hpY2ggd2lsbCBiZSBjYWxsZWQgdG8gcmV0dXJuIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxyXG4gKiBUaGlzIGlzIHNob3J0IGZvciByZWdpc3RlcmluZyBhIHNlcnZpY2Ugd2hlcmUgaXRzIHByb3ZpZGVyIGNvbnNpc3RzIG9mIG9ubHkgYSBgJGdldGAgcHJvcGVydHksXHJcbiAqIHdoaWNoIGlzIHRoZSBnaXZlbiBzZXJ2aWNlIGZhY3RvcnkgZnVuY3Rpb24uXHJcbiAqIFlvdSBzaG91bGQgdXNlIHtAbGluayBhdXRvLiRwcm92aWRlI2ZhY3RvcnkgJHByb3ZpZGUuZmFjdG9yeShnZXRGbil9IGlmIHlvdSBkbyBub3QgbmVlZCB0b1xyXG4gKiBjb25maWd1cmUgeW91ciBzZXJ2aWNlIGluIGEgcHJvdmlkZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtmdW5jdGlvbigpfSAkZ2V0Rm4gVGhlICRnZXRGbiBmb3IgdGhlIGluc3RhbmNlIGNyZWF0aW9uLiBJbnRlcm5hbGx5IHRoaXMgaXMgYSBzaG9ydCBoYW5kXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBgJHByb3ZpZGUucHJvdmlkZXIobmFtZSwgeyRnZXQ6ICRnZXRGbn0pYC5cclxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgb2YgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlXHJcbiAqIGBgYGpzXHJcbiAqICAgJHByb3ZpZGUuZmFjdG9yeSgncGluZycsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xyXG4gKiAgICAgcmV0dXJuIGZ1bmN0aW9uIHBpbmcoKSB7XHJcbiAqICAgICAgIHJldHVybiAkaHR0cC5zZW5kKCcvcGluZycpO1xyXG4gKiAgICAgfTtcclxuICogICB9XSk7XHJcbiAqIGBgYFxyXG4gKiBZb3Ugd291bGQgdGhlbiBpbmplY3QgYW5kIHVzZSB0aGlzIHNlcnZpY2UgbGlrZSB0aGlzOlxyXG4gKiBgYGBqc1xyXG4gKiAgIHNvbWVNb2R1bGUuY29udHJvbGxlcignQ3RybCcsIFsncGluZycsIGZ1bmN0aW9uKHBpbmcpIHtcclxuICogICAgIHBpbmcoKTtcclxuICogICB9XSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkcHJvdmlkZSNzZXJ2aWNlXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBSZWdpc3RlciBhICoqc2VydmljZSBjb25zdHJ1Y3RvcioqLCB3aGljaCB3aWxsIGJlIGludm9rZWQgd2l0aCBgbmV3YCB0byBjcmVhdGUgdGhlIHNlcnZpY2VcclxuICogaW5zdGFuY2UuXHJcbiAqIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHMgcHJvdmlkZXIncyBgJGdldGAgcHJvcGVydHkgaXMgdGhlIHNlcnZpY2VcclxuICogY29uc3RydWN0b3IgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHVzZWQgdG8gaW5zdGFudGlhdGUgdGhlIHNlcnZpY2UgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgdXNlIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2UgJHByb3ZpZGUuc2VydmljZShjbGFzcyl9IGlmIHlvdSBkZWZpbmUgeW91ciBzZXJ2aWNlXHJcbiAqIGFzIGEgdHlwZS9jbGFzcy5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBBIGNsYXNzIChjb25zdHJ1Y3RvciBmdW5jdGlvbikgdGhhdCB3aWxsIGJlIGluc3RhbnRpYXRlZC5cclxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgb2YgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHVzaW5nXHJcbiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2UgJHByb3ZpZGUuc2VydmljZShjbGFzcyl9LlxyXG4gKiBgYGBqc1xyXG4gKiAgIHZhciBQaW5nID0gZnVuY3Rpb24oJGh0dHApIHtcclxuICogICAgIHRoaXMuJGh0dHAgPSAkaHR0cDtcclxuICogICB9O1xyXG4gKlxyXG4gKiAgIFBpbmcuJGluamVjdCA9IFsnJGh0dHAnXTtcclxuICpcclxuICogICBQaW5nLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7XHJcbiAqICAgICByZXR1cm4gdGhpcy4kaHR0cC5nZXQoJy9waW5nJyk7XHJcbiAqICAgfTtcclxuICogICAkcHJvdmlkZS5zZXJ2aWNlKCdwaW5nJywgUGluZyk7XHJcbiAqIGBgYFxyXG4gKiBZb3Ugd291bGQgdGhlbiBpbmplY3QgYW5kIHVzZSB0aGlzIHNlcnZpY2UgbGlrZSB0aGlzOlxyXG4gKiBgYGBqc1xyXG4gKiAgIHNvbWVNb2R1bGUuY29udHJvbGxlcignQ3RybCcsIFsncGluZycsIGZ1bmN0aW9uKHBpbmcpIHtcclxuICogICAgIHBpbmcuc2VuZCgpO1xyXG4gKiAgIH1dKTtcclxuICogYGBgXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRwcm92aWRlI3ZhbHVlXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBSZWdpc3RlciBhICoqdmFsdWUgc2VydmljZSoqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LCBzdWNoIGFzIGEgc3RyaW5nLCBhXHJcbiAqIG51bWJlciwgYW4gYXJyYXksIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLiAgVGhpcyBpcyBzaG9ydCBmb3IgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHdoZXJlIGl0c1xyXG4gKiBwcm92aWRlcidzIGAkZ2V0YCBwcm9wZXJ0eSBpcyBhIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCB0YWtlcyBubyBhcmd1bWVudHMgYW5kIHJldHVybnMgdGhlICoqdmFsdWVcclxuICogc2VydmljZSoqLlxyXG4gKlxyXG4gKiBWYWx1ZSBzZXJ2aWNlcyBhcmUgc2ltaWxhciB0byBjb25zdGFudCBzZXJ2aWNlcywgZXhjZXB0IHRoYXQgdGhleSBjYW5ub3QgYmUgaW5qZWN0ZWQgaW50byBhXHJcbiAqIG1vZHVsZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIChzZWUge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZ30pIGJ1dCB0aGV5IGNhbiBiZSBvdmVycmlkZGVuIGJ5XHJcbiAqIGFuIEFuZ3VsYXJcclxuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yIGRlY29yYXRvcn0uXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcclxuICpcclxuICogQGV4YW1wbGVcclxuICogSGVyZSBhcmUgc29tZSBleGFtcGxlcyBvZiBjcmVhdGluZyB2YWx1ZSBzZXJ2aWNlcy5cclxuICogYGBganNcclxuICogICAkcHJvdmlkZS52YWx1ZSgnQURNSU5fVVNFUicsICdhZG1pbicpO1xyXG4gKlxyXG4gKiAgICRwcm92aWRlLnZhbHVlKCdSb2xlTG9va3VwJywgeyBhZG1pbjogMCwgd3JpdGVyOiAxLCByZWFkZXI6IDIgfSk7XHJcbiAqXHJcbiAqICAgJHByb3ZpZGUudmFsdWUoJ2hhbGZPZicsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAqICAgICByZXR1cm4gdmFsdWUgLyAyO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJHByb3ZpZGUjY29uc3RhbnRcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFJlZ2lzdGVyIGEgKipjb25zdGFudCBzZXJ2aWNlKiosIHN1Y2ggYXMgYSBzdHJpbmcsIGEgbnVtYmVyLCBhbiBhcnJheSwgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24sXHJcbiAqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBVbmxpa2Uge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgdmFsdWV9IGl0IGNhbiBiZVxyXG4gKiBpbmplY3RlZCBpbnRvIGEgbW9kdWxlIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb24gKHNlZSB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjY29uZmlnfSkgYW5kIGl0IGNhbm5vdFxyXG4gKiBiZSBvdmVycmlkZGVuIGJ5IGFuIEFuZ3VsYXIge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yIGRlY29yYXRvcn0uXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb25zdGFudC5cclxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgY29uc3RhbnQgdmFsdWUuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgaW5zdGFuY2VcclxuICpcclxuICogQGV4YW1wbGVcclxuICogSGVyZSBhIHNvbWUgZXhhbXBsZXMgb2YgY3JlYXRpbmcgY29uc3RhbnRzOlxyXG4gKiBgYGBqc1xyXG4gKiAgICRwcm92aWRlLmNvbnN0YW50KCdTSEFSRF9IRUlHSFQnLCAzMDYpO1xyXG4gKlxyXG4gKiAgICRwcm92aWRlLmNvbnN0YW50KCdNWV9DT0xPVVJTJywgWydyZWQnLCAnYmx1ZScsICdncmV5J10pO1xyXG4gKlxyXG4gKiAgICRwcm92aWRlLmNvbnN0YW50KCdkb3VibGUnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gKiAgICAgcmV0dXJuIHZhbHVlICogMjtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRwcm92aWRlI2RlY29yYXRvclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogUmVnaXN0ZXIgYSAqKnNlcnZpY2UgZGVjb3JhdG9yKiogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIEEgc2VydmljZSBkZWNvcmF0b3JcclxuICogaW50ZXJjZXB0cyB0aGUgY3JlYXRpb24gb2YgYSBzZXJ2aWNlLCBhbGxvd2luZyBpdCB0byBvdmVycmlkZSBvciBtb2RpZnkgdGhlIGJlaGF2aW91ciBvZiB0aGVcclxuICogc2VydmljZS4gVGhlIG9iamVjdCByZXR1cm5lZCBieSB0aGUgZGVjb3JhdG9yIG1heSBiZSB0aGUgb3JpZ2luYWwgc2VydmljZSwgb3IgYSBuZXcgc2VydmljZVxyXG4gKiBvYmplY3Qgd2hpY2ggcmVwbGFjZXMgb3Igd3JhcHMgYW5kIGRlbGVnYXRlcyB0byB0aGUgb3JpZ2luYWwgc2VydmljZS5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gZGVjb3JhdGUuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZGVjb3JhdG9yIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIHNlcnZpY2UgbmVlZHMgdG8gYmVcclxuICogICAgaW5zdGFudGlhdGVkIGFuZCBzaG91bGQgcmV0dXJuIHRoZSBkZWNvcmF0ZWQgc2VydmljZSBpbnN0YW5jZS4gVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB1c2luZ1xyXG4gKiAgICB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSBpbmplY3Rvci5pbnZva2V9IG1ldGhvZCBhbmQgaXMgdGhlcmVmb3JlIGZ1bGx5IGluamVjdGFibGUuXHJcbiAqICAgIExvY2FsIGluamVjdGlvbiBhcmd1bWVudHM6XHJcbiAqXHJcbiAqICAgICogYCRkZWxlZ2F0ZWAgLSBUaGUgb3JpZ2luYWwgc2VydmljZSBpbnN0YW5jZSwgd2hpY2ggY2FuIGJlIG1vbmtleSBwYXRjaGVkLCBjb25maWd1cmVkLFxyXG4gKiAgICAgIGRlY29yYXRlZCBvciBkZWxlZ2F0ZWQgdG8uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEhlcmUgd2UgZGVjb3JhdGUgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2UgdG8gY29udmVydCB3YXJuaW5ncyB0byBlcnJvcnMgYnkgaW50ZXJjZXB0aW5nXHJcbiAqIGNhbGxzIHRvIHtAbGluayBuZy4kbG9nI2Vycm9yICRsb2cud2FybigpfS5cclxuICogYGBganNcclxuICogICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRsb2cnLCBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xyXG4gKiAgICAgJGRlbGVnYXRlLndhcm4gPSAkZGVsZWdhdGUuZXJyb3I7XHJcbiAqICAgICByZXR1cm4gJGRlbGVnYXRlO1xyXG4gKiAgIH1dKTtcclxuICogYGBgXHJcbiAqL1xyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUluamVjdG9yKG1vZHVsZXNUb0xvYWQsIHN0cmljdERpKSB7XHJcbiAgc3RyaWN0RGkgPSAoc3RyaWN0RGkgPT09IHRydWUpO1xyXG4gIHZhciBJTlNUQU5USUFUSU5HID0ge30sXHJcbiAgICAgIHByb3ZpZGVyU3VmZml4ID0gJ1Byb3ZpZGVyJyxcclxuICAgICAgcGF0aCA9IFtdLFxyXG4gICAgICBsb2FkZWRNb2R1bGVzID0gbmV3IEhhc2hNYXAoW10sIHRydWUpLFxyXG4gICAgICBwcm92aWRlckNhY2hlID0ge1xyXG4gICAgICAgICRwcm92aWRlOiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBzdXBwb3J0T2JqZWN0KHByb3ZpZGVyKSxcclxuICAgICAgICAgICAgZmFjdG9yeTogc3VwcG9ydE9iamVjdChmYWN0b3J5KSxcclxuICAgICAgICAgICAgc2VydmljZTogc3VwcG9ydE9iamVjdChzZXJ2aWNlKSxcclxuICAgICAgICAgICAgdmFsdWU6IHN1cHBvcnRPYmplY3QodmFsdWUpLFxyXG4gICAgICAgICAgICBjb25zdGFudDogc3VwcG9ydE9iamVjdChjb25zdGFudCksXHJcbiAgICAgICAgICAgIGRlY29yYXRvcjogZGVjb3JhdG9yXHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHByb3ZpZGVySW5qZWN0b3IgPSAocHJvdmlkZXJDYWNoZS4kaW5qZWN0b3IgPVxyXG4gICAgICAgICAgY3JlYXRlSW50ZXJuYWxJbmplY3Rvcihwcm92aWRlckNhY2hlLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCd1bnByJywgXCJVbmtub3duIHByb3ZpZGVyOiB7MH1cIiwgcGF0aC5qb2luKCcgPC0gJykpO1xyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICBpbnN0YW5jZUNhY2hlID0ge30sXHJcbiAgICAgIGluc3RhbmNlSW5qZWN0b3IgPSAoaW5zdGFuY2VDYWNoZS4kaW5qZWN0b3IgPVxyXG4gICAgICAgICAgY3JlYXRlSW50ZXJuYWxJbmplY3RvcihpbnN0YW5jZUNhY2hlLCBmdW5jdGlvbihzZXJ2aWNlbmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgcHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChzZXJ2aWNlbmFtZSArIHByb3ZpZGVyU3VmZml4KTtcclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKHByb3ZpZGVyLiRnZXQsIHByb3ZpZGVyLCB1bmRlZmluZWQsIHNlcnZpY2VuYW1lKTtcclxuICAgICAgICAgIH0pKTtcclxuXHJcblxyXG4gIGZvckVhY2gobG9hZE1vZHVsZXMobW9kdWxlc1RvTG9hZCksIGZ1bmN0aW9uKGZuKSB7IGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGZuIHx8IG5vb3ApOyB9KTtcclxuXHJcbiAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3I7XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vICRwcm92aWRlclxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICBmdW5jdGlvbiBzdXBwb3J0T2JqZWN0KGRlbGVnYXRlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgICBpZiAoaXNPYmplY3Qoa2V5KSkge1xyXG4gICAgICAgIGZvckVhY2goa2V5LCByZXZlcnNlUGFyYW1zKGRlbGVnYXRlKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGRlbGVnYXRlKGtleSwgdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcHJvdmlkZXIobmFtZSwgcHJvdmlkZXJfKSB7XHJcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnc2VydmljZScpO1xyXG4gICAgaWYgKGlzRnVuY3Rpb24ocHJvdmlkZXJfKSB8fCBpc0FycmF5KHByb3ZpZGVyXykpIHtcclxuICAgICAgcHJvdmlkZXJfID0gcHJvdmlkZXJJbmplY3Rvci5pbnN0YW50aWF0ZShwcm92aWRlcl8pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwcm92aWRlcl8uJGdldCkge1xyXG4gICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3BnZXQnLCBcIlByb3ZpZGVyICd7MH0nIG11c3QgZGVmaW5lICRnZXQgZmFjdG9yeSBtZXRob2QuXCIsIG5hbWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb3ZpZGVyQ2FjaGVbbmFtZSArIHByb3ZpZGVyU3VmZml4XSA9IHByb3ZpZGVyXztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGZhY3RvcnkobmFtZSwgZmFjdG9yeUZuKSB7IHJldHVybiBwcm92aWRlcihuYW1lLCB7ICRnZXQ6IGZhY3RvcnlGbiB9KTsgfVxyXG5cclxuICBmdW5jdGlvbiBzZXJ2aWNlKG5hbWUsIGNvbnN0cnVjdG9yKSB7XHJcbiAgICByZXR1cm4gZmFjdG9yeShuYW1lLCBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xyXG4gICAgICByZXR1cm4gJGluamVjdG9yLmluc3RhbnRpYXRlKGNvbnN0cnVjdG9yKTtcclxuICAgIH1dKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHZhbHVlKG5hbWUsIHZhbCkgeyByZXR1cm4gZmFjdG9yeShuYW1lLCB2YWx1ZUZuKHZhbCkpOyB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XHJcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnY29uc3RhbnQnKTtcclxuICAgIHByb3ZpZGVyQ2FjaGVbbmFtZV0gPSB2YWx1ZTtcclxuICAgIGluc3RhbmNlQ2FjaGVbbmFtZV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRlY29yYXRvcihzZXJ2aWNlTmFtZSwgZGVjb3JGbikge1xyXG4gICAgdmFyIG9yaWdQcm92aWRlciA9IHByb3ZpZGVySW5qZWN0b3IuZ2V0KHNlcnZpY2VOYW1lICsgcHJvdmlkZXJTdWZmaXgpLFxyXG4gICAgICAgIG9yaWckZ2V0ID0gb3JpZ1Byb3ZpZGVyLiRnZXQ7XHJcblxyXG4gICAgb3JpZ1Byb3ZpZGVyLiRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIG9yaWdJbnN0YW5jZSA9IGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKG9yaWckZ2V0LCBvcmlnUHJvdmlkZXIpO1xyXG4gICAgICByZXR1cm4gaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZGVjb3JGbiwgbnVsbCwgeyRkZWxlZ2F0ZTogb3JpZ0luc3RhbmNlfSk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gTW9kdWxlIExvYWRpbmdcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICBmdW5jdGlvbiBsb2FkTW9kdWxlcyhtb2R1bGVzVG9Mb2FkKXtcclxuICAgIHZhciBydW5CbG9ja3MgPSBbXSwgbW9kdWxlRm47XHJcbiAgICBmb3JFYWNoKG1vZHVsZXNUb0xvYWQsIGZ1bmN0aW9uKG1vZHVsZSkge1xyXG4gICAgICBpZiAobG9hZGVkTW9kdWxlcy5nZXQobW9kdWxlKSkgcmV0dXJuO1xyXG4gICAgICBsb2FkZWRNb2R1bGVzLnB1dChtb2R1bGUsIHRydWUpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gcnVuSW52b2tlUXVldWUocXVldWUpIHtcclxuICAgICAgICB2YXIgaSwgaWk7XHJcbiAgICAgICAgZm9yKGkgPSAwLCBpaSA9IHF1ZXVlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgIHZhciBpbnZva2VBcmdzID0gcXVldWVbaV0sXHJcbiAgICAgICAgICAgICAgcHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChpbnZva2VBcmdzWzBdKTtcclxuXHJcbiAgICAgICAgICBwcm92aWRlcltpbnZva2VBcmdzWzFdXS5hcHBseShwcm92aWRlciwgaW52b2tlQXJnc1syXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChpc1N0cmluZyhtb2R1bGUpKSB7XHJcbiAgICAgICAgICBtb2R1bGVGbiA9IGFuZ3VsYXJNb2R1bGUobW9kdWxlKTtcclxuICAgICAgICAgIHJ1bkJsb2NrcyA9IHJ1bkJsb2Nrcy5jb25jYXQobG9hZE1vZHVsZXMobW9kdWxlRm4ucmVxdWlyZXMpKS5jb25jYXQobW9kdWxlRm4uX3J1bkJsb2Nrcyk7XHJcbiAgICAgICAgICBydW5JbnZva2VRdWV1ZShtb2R1bGVGbi5faW52b2tlUXVldWUpO1xyXG4gICAgICAgICAgcnVuSW52b2tlUXVldWUobW9kdWxlRm4uX2NvbmZpZ0Jsb2Nrcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKG1vZHVsZSkpIHtcclxuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KG1vZHVsZSkpIHtcclxuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFzc2VydEFyZ0ZuKG1vZHVsZSwgJ21vZHVsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc0FycmF5KG1vZHVsZSkpIHtcclxuICAgICAgICAgIG1vZHVsZSA9IG1vZHVsZVttb2R1bGUubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlLm1lc3NhZ2UgJiYgZS5zdGFjayAmJiBlLnN0YWNrLmluZGV4T2YoZS5tZXNzYWdlKSA9PSAtMSkge1xyXG4gICAgICAgICAgLy8gU2FmYXJpICYgRkYncyBzdGFjayB0cmFjZXMgZG9uJ3QgY29udGFpbiBlcnJvci5tZXNzYWdlIGNvbnRlbnRcclxuICAgICAgICAgIC8vIHVubGlrZSB0aG9zZSBvZiBDaHJvbWUgYW5kIElFXHJcbiAgICAgICAgICAvLyBTbyBpZiBzdGFjayBkb2Vzbid0IGNvbnRhaW4gbWVzc2FnZSwgd2UgY3JlYXRlIGEgbmV3IHN0cmluZyB0aGF0IGNvbnRhaW5zIGJvdGguXHJcbiAgICAgICAgICAvLyBTaW5jZSBlcnJvci5zdGFjayBpcyByZWFkLW9ubHkgaW4gU2FmYXJpLCBJJ20gb3ZlcnJpZGluZyBlIGFuZCBub3QgZS5zdGFjayBoZXJlLlxyXG4gICAgICAgICAgLyoganNoaW50IC1XMDIyICovXHJcbiAgICAgICAgICBlID0gZS5tZXNzYWdlICsgJ1xcbicgKyBlLnN0YWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ21vZHVsZXJyJywgXCJGYWlsZWQgdG8gaW5zdGFudGlhdGUgbW9kdWxlIHswfSBkdWUgdG86XFxuezF9XCIsXHJcbiAgICAgICAgICAgICAgICAgIG1vZHVsZSwgZS5zdGFjayB8fCBlLm1lc3NhZ2UgfHwgZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJ1bkJsb2NrcztcclxuICB9XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vIGludGVybmFsIEluamVjdG9yXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoY2FjaGUsIGZhY3RvcnkpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTZXJ2aWNlKHNlcnZpY2VOYW1lKSB7XHJcbiAgICAgIGlmIChjYWNoZS5oYXNPd25Qcm9wZXJ0eShzZXJ2aWNlTmFtZSkpIHtcclxuICAgICAgICBpZiAoY2FjaGVbc2VydmljZU5hbWVdID09PSBJTlNUQU5USUFUSU5HKSB7XHJcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2NkZXAnLCAnQ2lyY3VsYXIgZGVwZW5kZW5jeSBmb3VuZDogezB9JyxcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlTmFtZSArICcgPC0gJyArIHBhdGguam9pbignIDwtICcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhY2hlW3NlcnZpY2VOYW1lXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgcGF0aC51bnNoaWZ0KHNlcnZpY2VOYW1lKTtcclxuICAgICAgICAgIGNhY2hlW3NlcnZpY2VOYW1lXSA9IElOU1RBTlRJQVRJTkc7XHJcbiAgICAgICAgICByZXR1cm4gY2FjaGVbc2VydmljZU5hbWVdID0gZmFjdG9yeShzZXJ2aWNlTmFtZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICBpZiAoY2FjaGVbc2VydmljZU5hbWVdID09PSBJTlNUQU5USUFUSU5HKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBjYWNoZVtzZXJ2aWNlTmFtZV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgIHBhdGguc2hpZnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbnZva2UoZm4sIHNlbGYsIGxvY2Fscywgc2VydmljZU5hbWUpIHtcclxuICAgICAgaWYgKHR5cGVvZiBsb2NhbHMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgc2VydmljZU5hbWUgPSBsb2NhbHM7XHJcbiAgICAgICAgbG9jYWxzID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGFyZ3MgPSBbXSxcclxuICAgICAgICAgICRpbmplY3QgPSBhbm5vdGF0ZShmbiwgc3RyaWN0RGksIHNlcnZpY2VOYW1lKSxcclxuICAgICAgICAgIGxlbmd0aCwgaSxcclxuICAgICAgICAgIGtleTtcclxuXHJcbiAgICAgIGZvcihpID0gMCwgbGVuZ3RoID0gJGluamVjdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGtleSA9ICRpbmplY3RbaV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2l0a24nLFxyXG4gICAgICAgICAgICAgICAgICAnSW5jb3JyZWN0IGluamVjdGlvbiB0b2tlbiEgRXhwZWN0ZWQgc2VydmljZSBuYW1lIGFzIHN0cmluZywgZ290IHswfScsIGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFyZ3MucHVzaChcclxuICAgICAgICAgIGxvY2FscyAmJiBsb2NhbHMuaGFzT3duUHJvcGVydHkoa2V5KVxyXG4gICAgICAgICAgPyBsb2NhbHNba2V5XVxyXG4gICAgICAgICAgOiBnZXRTZXJ2aWNlKGtleSlcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc0FycmF5KGZuKSkge1xyXG4gICAgICAgIGZuID0gZm5bbGVuZ3RoXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vYW5ndWxhcmpzLWludm9rZS1hcHBseS12cy1zd2l0Y2hcclxuICAgICAgLy8gIzUzODhcclxuICAgICAgcmV0dXJuIGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluc3RhbnRpYXRlKFR5cGUsIGxvY2Fscywgc2VydmljZU5hbWUpIHtcclxuICAgICAgdmFyIENvbnN0cnVjdG9yID0gZnVuY3Rpb24oKSB7fSxcclxuICAgICAgICAgIGluc3RhbmNlLCByZXR1cm5lZFZhbHVlO1xyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgVHlwZSBpcyBhbm5vdGF0ZWQgYW5kIHVzZSBqdXN0IHRoZSBnaXZlbiBmdW5jdGlvbiBhdCBuLTEgYXMgcGFyYW1ldGVyXHJcbiAgICAgIC8vIGUuZy4gc29tZU1vZHVsZS5mYWN0b3J5KCdncmVldGVyJywgWyckd2luZG93JywgZnVuY3Rpb24ocmVuYW1lZCR3aW5kb3cpIHt9XSk7XHJcbiAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IChpc0FycmF5KFR5cGUpID8gVHlwZVtUeXBlLmxlbmd0aCAtIDFdIDogVHlwZSkucHJvdG90eXBlO1xyXG4gICAgICBpbnN0YW5jZSA9IG5ldyBDb25zdHJ1Y3RvcigpO1xyXG4gICAgICByZXR1cm5lZFZhbHVlID0gaW52b2tlKFR5cGUsIGluc3RhbmNlLCBsb2NhbHMsIHNlcnZpY2VOYW1lKTtcclxuXHJcbiAgICAgIHJldHVybiBpc09iamVjdChyZXR1cm5lZFZhbHVlKSB8fCBpc0Z1bmN0aW9uKHJldHVybmVkVmFsdWUpID8gcmV0dXJuZWRWYWx1ZSA6IGluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGludm9rZTogaW52b2tlLFxyXG4gICAgICBpbnN0YW50aWF0ZTogaW5zdGFudGlhdGUsXHJcbiAgICAgIGdldDogZ2V0U2VydmljZSxcclxuICAgICAgYW5ub3RhdGU6IGFubm90YXRlLFxyXG4gICAgICBoYXM6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJDYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lICsgcHJvdmlkZXJTdWZmaXgpIHx8IGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSA9IGFubm90YXRlO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRhbmNob3JTY3JvbGxcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICogQHJlcXVpcmVzICR3aW5kb3dcclxuICogQHJlcXVpcmVzICRsb2NhdGlvblxyXG4gKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogV2hlbiBjYWxsZWQsIGl0IGNoZWNrcyBjdXJyZW50IHZhbHVlIG9mIGAkbG9jYXRpb24uaGFzaCgpYCBhbmQgc2Nyb2xscyB0byB0aGUgcmVsYXRlZCBlbGVtZW50LFxyXG4gKiBhY2NvcmRpbmcgdG8gcnVsZXMgc3BlY2lmaWVkIGluXHJcbiAqIFtIdG1sNSBzcGVjXShodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjL092ZXJ2aWV3Lmh0bWwjdGhlLWluZGljYXRlZC1wYXJ0LW9mLXRoZS1kb2N1bWVudCkuXHJcbiAqXHJcbiAqIEl0IGFsc28gd2F0Y2hlcyB0aGUgYCRsb2NhdGlvbi5oYXNoKClgIGFuZCBzY3JvbGxzIHdoZW5ldmVyIGl0IGNoYW5nZXMgdG8gbWF0Y2ggYW55IGFuY2hvci5cclxuICogVGhpcyBjYW4gYmUgZGlzYWJsZWQgYnkgY2FsbGluZyBgJGFuY2hvclNjcm9sbFByb3ZpZGVyLmRpc2FibGVBdXRvU2Nyb2xsaW5nKClgLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJhbmNob3JTY3JvbGxFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgaWQ9XCJzY3JvbGxBcmVhXCIgbmctY29udHJvbGxlcj1cIlNjcm9sbENvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPGEgbmctY2xpY2s9XCJnb3RvQm90dG9tKClcIj5HbyB0byBib3R0b208L2E+XHJcbiAgICAgICAgIDxhIGlkPVwiYm90dG9tXCI+PC9hPiBZb3UncmUgYXQgdGhlIGJvdHRvbSFcclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnYW5jaG9yU2Nyb2xsRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAuY29udHJvbGxlcignU2Nyb2xsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJyxcclxuICAgICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sICRhbmNob3JTY3JvbGwpIHtcclxuICAgICAgICAgICAgICRzY29wZS5nb3RvQm90dG9tID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbG9jYXRpb24uaGFzaCB0byB0aGUgaWQgb2ZcclxuICAgICAgICAgICAgICAgLy8gdGhlIGVsZW1lbnQgeW91IHdpc2ggdG8gc2Nyb2xsIHRvLlxyXG4gICAgICAgICAgICAgICAkbG9jYXRpb24uaGFzaCgnYm90dG9tJyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKVxyXG4gICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICAgICAgI3Njcm9sbEFyZWEge1xyXG4gICAgICAgICBoZWlnaHQ6IDM1MHB4O1xyXG4gICAgICAgICBvdmVyZmxvdzogYXV0bztcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAjYm90dG9tIHtcclxuICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgIG1hcmdpbi10b3A6IDIwMDBweDtcclxuICAgICAgIH1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uICRBbmNob3JTY3JvbGxQcm92aWRlcigpIHtcclxuXHJcbiAgdmFyIGF1dG9TY3JvbGxpbmdFbmFibGVkID0gdHJ1ZTtcclxuXHJcbiAgdGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgYXV0b1Njcm9sbGluZ0VuYWJsZWQgPSBmYWxzZTtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkd2luZG93LCAkbG9jYXRpb24sICRyb290U2NvcGUpIHtcclxuICAgIHZhciBkb2N1bWVudCA9ICR3aW5kb3cuZG9jdW1lbnQ7XHJcblxyXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRvIGdldCBmaXJzdCBhbmNob3IgZnJvbSBhIE5vZGVMaXN0XHJcbiAgICAvLyBjYW4ndCB1c2UgZmlsdGVyLmZpbHRlciwgYXMgaXQgYWNjZXB0cyBvbmx5IGluc3RhbmNlcyBvZiBBcnJheVxyXG4gICAgLy8gYW5kIElFIGNhbid0IGNvbnZlcnQgTm9kZUxpc3QgdG8gYW4gYXJyYXkgdXNpbmcgW10uc2xpY2VcclxuICAgIC8vIFRPRE8odm9qdGEpOiB1c2UgZmlsdGVyIGlmIHdlIGNoYW5nZSBpdCB0byBhY2NlcHQgbGlzdHMgYXMgd2VsbFxyXG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3RBbmNob3IobGlzdCkge1xyXG4gICAgICB2YXIgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgZm9yRWFjaChsaXN0LCBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQgJiYgbm9kZU5hbWVfKGVsZW1lbnQpID09PSAnYScpIHJlc3VsdCA9IGVsZW1lbnQ7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNjcm9sbCgpIHtcclxuICAgICAgdmFyIGhhc2ggPSAkbG9jYXRpb24uaGFzaCgpLCBlbG07XHJcblxyXG4gICAgICAvLyBlbXB0eSBoYXNoLCBzY3JvbGwgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZVxyXG4gICAgICBpZiAoIWhhc2gpICR3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcblxyXG4gICAgICAvLyBlbGVtZW50IHdpdGggZ2l2ZW4gaWRcclxuICAgICAgZWxzZSBpZiAoKGVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhhc2gpKSkgZWxtLnNjcm9sbEludG9WaWV3KCk7XHJcblxyXG4gICAgICAvLyBmaXJzdCBhbmNob3Igd2l0aCBnaXZlbiBuYW1lIDotRFxyXG4gICAgICBlbHNlIGlmICgoZWxtID0gZ2V0Rmlyc3RBbmNob3IoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoaGFzaCkpKSkgZWxtLnNjcm9sbEludG9WaWV3KCk7XHJcblxyXG4gICAgICAvLyBubyBlbGVtZW50IGFuZCBoYXNoID09ICd0b3AnLCBzY3JvbGwgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZVxyXG4gICAgICBlbHNlIGlmIChoYXNoID09PSAndG9wJykgJHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBkb2VzIG5vdCBzY3JvbGwgd2hlbiB1c2VyIGNsaWNrcyBvbiBhbmNob3IgbGluayB0aGF0IGlzIGN1cnJlbnRseSBvblxyXG4gICAgLy8gKG5vIHVybCBjaGFuZ2UsIG5vICRsb2NhdGlvbi5oYXNoKCkgY2hhbmdlKSwgYnJvd3NlciBuYXRpdmUgZG9lcyBzY3JvbGxcclxuICAgIGlmIChhdXRvU2Nyb2xsaW5nRW5hYmxlZCkge1xyXG4gICAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiBhdXRvU2Nyb2xsV2F0Y2goKSB7cmV0dXJuICRsb2NhdGlvbi5oYXNoKCk7fSxcclxuICAgICAgICBmdW5jdGlvbiBhdXRvU2Nyb2xsV2F0Y2hBY3Rpb24oKSB7XHJcbiAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoc2Nyb2xsKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2Nyb2xsO1xyXG4gIH1dO1xyXG59XHJcblxyXG52YXIgJGFuaW1hdGVNaW5FcnIgPSBtaW5FcnIoJyRhbmltYXRlJyk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRhbmltYXRlUHJvdmlkZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgJGFuaW1hdGUgdGhhdCBkb2Vzbid0IHBlcmZvcm0gYW55IGFuaW1hdGlvbnMsIGluc3RlYWQganVzdFxyXG4gKiBzeW5jaHJvbm91c2x5IHBlcmZvcm1zIERPTVxyXG4gKiB1cGRhdGVzIGFuZCBjYWxscyBkb25lKCkgY2FsbGJhY2tzLlxyXG4gKlxyXG4gKiBJbiBvcmRlciB0byBlbmFibGUgYW5pbWF0aW9ucyB0aGUgbmdBbmltYXRlIG1vZHVsZSBoYXMgdG8gYmUgbG9hZGVkLlxyXG4gKlxyXG4gKiBUbyBzZWUgdGhlIGZ1bmN0aW9uYWwgaW1wbGVtZW50YXRpb24gY2hlY2sgb3V0IHNyYy9uZ0FuaW1hdGUvYW5pbWF0ZS5qc1xyXG4gKi9cclxudmFyICRBbmltYXRlUHJvdmlkZXIgPSBbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcclxuXHJcblxyXG4gIHRoaXMuJCRzZWxlY3RvcnMgPSB7fTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI3JlZ2lzdGVyXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZWdpc3RlcnMgYSBuZXcgaW5qZWN0YWJsZSBhbmltYXRpb24gZmFjdG9yeSBmdW5jdGlvbi4gVGhlIGZhY3RvcnkgZnVuY3Rpb24gcHJvZHVjZXMgdGhlXHJcbiAgICogYW5pbWF0aW9uIG9iamVjdCB3aGljaCBjb250YWlucyBjYWxsYmFjayBmdW5jdGlvbnMgZm9yIGVhY2ggZXZlbnQgdGhhdCBpcyBleHBlY3RlZCB0byBiZVxyXG4gICAqIGFuaW1hdGVkLlxyXG4gICAqXHJcbiAgICogICAqIGBldmVudEZuYDogYGZ1bmN0aW9uKEVsZW1lbnQsIGRvbmVGdW5jdGlvbilgIFRoZSBlbGVtZW50IHRvIGFuaW1hdGUsIHRoZSBgZG9uZUZ1bmN0aW9uYFxyXG4gICAqICAgbXVzdCBiZSBjYWxsZWQgb25jZSB0aGUgZWxlbWVudCBhbmltYXRpb24gaXMgY29tcGxldGUuIElmIGEgZnVuY3Rpb24gaXMgcmV0dXJuZWQgdGhlbiB0aGVcclxuICAgKiAgIGFuaW1hdGlvbiBzZXJ2aWNlIHdpbGwgdXNlIHRoaXMgZnVuY3Rpb24gdG8gY2FuY2VsIHRoZSBhbmltYXRpb24gd2hlbmV2ZXIgYSBjYW5jZWwgZXZlbnQgaXNcclxuICAgKiAgIHRyaWdnZXJlZC5cclxuICAgKlxyXG4gICAqXHJcbiAgICogYGBganNcclxuICAgKiAgIHJldHVybiB7XHJcbiAgICAgKiAgICAgZXZlbnRGbiA6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHtcclxuICAgICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxyXG4gICAgICogICAgICAgLy9vbmNlIGNvbXBsZXRlLCB0aGVuIHJ1biBkb25lKClcclxuICAgICAqICAgICAgIHJldHVybiBmdW5jdGlvbiBjYW5jZWxsYXRpb25GdW5jdGlvbigpIHtcclxuICAgICAqICAgICAgICAgLy9jb2RlIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uXHJcbiAgICAgKiAgICAgICB9XHJcbiAgICAgKiAgICAgfVxyXG4gICAgICogICB9XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYW5pbWF0aW9uLlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3RvcnkgVGhlIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHRvIHJldHVybiB0aGUgYW5pbWF0aW9uXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuXHJcbiAgICovXHJcbiAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWUsIGZhY3RvcnkpIHtcclxuICAgIHZhciBrZXkgPSBuYW1lICsgJy1hbmltYXRpb24nO1xyXG4gICAgaWYgKG5hbWUgJiYgbmFtZS5jaGFyQXQoMCkgIT0gJy4nKSB0aHJvdyAkYW5pbWF0ZU1pbkVycignbm90Y3NlbCcsXHJcbiAgICAgICAgXCJFeHBlY3RpbmcgY2xhc3Mgc2VsZWN0b3Igc3RhcnRpbmcgd2l0aCAnLicgZ290ICd7MH0nLlwiLCBuYW1lKTtcclxuICAgIHRoaXMuJCRzZWxlY3RvcnNbbmFtZS5zdWJzdHIoMSldID0ga2V5O1xyXG4gICAgJHByb3ZpZGUuZmFjdG9yeShrZXksIGZhY3RvcnkpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI2NsYXNzTmFtZUZpbHRlclxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyBhbmQvb3IgcmV0dXJucyB0aGUgQ1NTIGNsYXNzIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIGNoZWNrZWQgd2hlbiBwZXJmb3JtaW5nXHJcbiAgICogYW4gYW5pbWF0aW9uLiBVcG9uIGJvb3RzdHJhcCB0aGUgY2xhc3NOYW1lRmlsdGVyIHZhbHVlIGlzIG5vdCBzZXQgYXQgYWxsIGFuZCB3aWxsXHJcbiAgICogdGhlcmVmb3JlIGVuYWJsZSAkYW5pbWF0ZSB0byBhdHRlbXB0IHRvIHBlcmZvcm0gYW4gYW5pbWF0aW9uIG9uIGFueSBlbGVtZW50LlxyXG4gICAqIFdoZW4gc2V0dGluZyB0aGUgY2xhc3NOYW1lRmlsdGVyIHZhbHVlLCBhbmltYXRpb25zIHdpbGwgb25seSBiZSBwZXJmb3JtZWQgb24gZWxlbWVudHNcclxuICAgKiB0aGF0IHN1Y2Nlc3NmdWxseSBtYXRjaCB0aGUgZmlsdGVyIGV4cHJlc3Npb24uIFRoaXMgaW4gdHVybiBjYW4gYm9vc3QgcGVyZm9ybWFuY2VcclxuICAgKiBmb3IgbG93LXBvd2VyZWQgZGV2aWNlcyBhcyB3ZWxsIGFzIGFwcGxpY2F0aW9ucyBjb250YWluaW5nIGEgbG90IG9mIHN0cnVjdHVyYWwgb3BlcmF0aW9ucy5cclxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IGV4cHJlc3Npb24gVGhlIGNsYXNzTmFtZSBleHByZXNzaW9uIHdoaWNoIHdpbGwgYmUgY2hlY2tlZCBhZ2FpbnN0IGFsbCBhbmltYXRpb25zXHJcbiAgICogQHJldHVybiB7UmVnRXhwfSBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIGV4cHJlc3Npb24gdmFsdWUuIElmIG51bGwgdGhlbiB0aGVyZSBpcyBubyBleHByZXNzaW9uIHZhbHVlXHJcbiAgICovXHJcbiAgdGhpcy5jbGFzc05hbWVGaWx0ZXIgPSBmdW5jdGlvbihleHByZXNzaW9uKSB7XHJcbiAgICBpZihhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIHRoaXMuJCRjbGFzc05hbWVGaWx0ZXIgPSAoZXhwcmVzc2lvbiBpbnN0YW5jZW9mIFJlZ0V4cCkgPyBleHByZXNzaW9uIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLiQkY2xhc3NOYW1lRmlsdGVyO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJCRxJywgJyQkYXN5bmNDYWxsYmFjaycsIGZ1bmN0aW9uKCQkcSwgJCRhc3luY0NhbGxiYWNrKSB7XHJcblxyXG4gICAgdmFyIGN1cnJlbnREZWZlcjtcclxuICAgIGZ1bmN0aW9uIGFzeW5jUHJvbWlzZSgpIHtcclxuICAgICAgLy8gb25seSBzZXJ2ZSBvbmUgaW5zdGFuY2Ugb2YgYSBwcm9taXNlIGluIG9yZGVyIHRvIHNhdmUgQ1BVIGN5Y2xlc1xyXG4gICAgICBpZiAoIWN1cnJlbnREZWZlcikge1xyXG4gICAgICAgIGN1cnJlbnREZWZlciA9ICQkcS5kZWZlcigpO1xyXG4gICAgICAgICQkYXN5bmNDYWxsYmFjayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGN1cnJlbnREZWZlci5yZXNvbHZlKCk7XHJcbiAgICAgICAgICBjdXJyZW50RGVmZXIgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjdXJyZW50RGVmZXIucHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgJGFuaW1hdGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgJGFuaW1hdGUgc2VydmljZSBwcm92aWRlcyBydWRpbWVudGFyeSBET00gbWFuaXB1bGF0aW9uIGZ1bmN0aW9ucyB0b1xyXG4gICAgICogaW5zZXJ0LCByZW1vdmUgYW5kIG1vdmUgZWxlbWVudHMgd2l0aGluIHRoZSBET00sIGFzIHdlbGwgYXMgYWRkaW5nIGFuZCByZW1vdmluZyBjbGFzc2VzLlxyXG4gICAgICogVGhpcyBzZXJ2aWNlIGlzIHRoZSBjb3JlIHNlcnZpY2UgdXNlZCBieSB0aGUgbmdBbmltYXRlICRhbmltYXRvciBzZXJ2aWNlIHdoaWNoIHByb3ZpZGVzXHJcbiAgICAgKiBoaWdoLWxldmVsIGFuaW1hdGlvbiBob29rcyBmb3IgQ1NTIGFuZCBKYXZhU2NyaXB0LlxyXG4gICAgICpcclxuICAgICAqICRhbmltYXRlIGlzIGF2YWlsYWJsZSBpbiB0aGUgQW5ndWxhckpTIGNvcmUsIGhvd2V2ZXIsIHRoZSBuZ0FuaW1hdGUgbW9kdWxlIG11c3QgYmUgaW5jbHVkZWRcclxuICAgICAqIHRvIGVuYWJsZSBmdWxsIG91dCBhbmltYXRpb24gc3VwcG9ydC4gT3RoZXJ3aXNlLCAkYW5pbWF0ZSB3aWxsIG9ubHkgcGVyZm9ybSBzaW1wbGUgRE9NXHJcbiAgICAgKiBtYW5pcHVsYXRpb24gb3BlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBUbyBsZWFybiBtb3JlIGFib3V0IGVuYWJsaW5nIGFuaW1hdGlvbiBzdXBwb3J0LCBjbGljayBoZXJlIHRvIHZpc2l0IHRoZSB7QGxpbmsgbmdBbmltYXRlXHJcbiAgICAgKiBuZ0FuaW1hdGUgbW9kdWxlIHBhZ2V9IGFzIHdlbGwgYXMgdGhlIHtAbGluayBuZ0FuaW1hdGUuJGFuaW1hdGUgbmdBbmltYXRlICRhbmltYXRlIHNlcnZpY2VcclxuICAgICAqIHBhZ2V9LlxyXG4gICAgICovXHJcbiAgICByZXR1cm4ge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjZW50ZXJcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICogQGRlc2NyaXB0aW9uIEluc2VydHMgdGhlIGVsZW1lbnQgaW50byB0aGUgRE9NIGVpdGhlciBhZnRlciB0aGUgYGFmdGVyYCBlbGVtZW50IG9yXHJcbiAgICAgICAqIGFzIHRoZSBmaXJzdCBjaGlsZCB3aXRoaW4gdGhlIGBwYXJlbnRgIGVsZW1lbnQuIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2VcclxuICAgICAgICogaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGF0IGEgbGF0ZXIgdGltZS5cclxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudCBhc1xyXG4gICAgICAgKiAgIGEgY2hpbGQgKGlmIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGFmdGVyIHRoZSBzaWJsaW5nIGVsZW1lbnQgd2hpY2ggd2lsbCBhcHBlbmQgdGhlIGVsZW1lbnRcclxuICAgICAgICogICBhZnRlciBpdHNlbGZcclxuICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXHJcbiAgICAgICAqL1xyXG4gICAgICBlbnRlciA6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIpIHtcclxuICAgICAgICBhZnRlciA/IGFmdGVyLmFmdGVyKGVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgOiBwYXJlbnQucHJlcGVuZChlbGVtZW50KTtcclxuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICpcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNsZWF2ZVxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKiBAZGVzY3JpcHRpb24gUmVtb3ZlcyB0aGUgZWxlbWVudCBmcm9tIHRoZSBET00uIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2VcclxuICAgICAgICogaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGF0IGEgbGF0ZXIgdGltZS5cclxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cclxuICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXHJcbiAgICAgICAqL1xyXG4gICAgICBsZWF2ZSA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIHJldHVybiBhc3luY1Byb21pc2UoKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI21vdmVcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICogQGRlc2NyaXB0aW9uIE1vdmVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgcHJvdmlkZWQgZWxlbWVudCB3aXRoaW4gdGhlIERPTSB0byBiZSBwbGFjZWRcclxuICAgICAgICogZWl0aGVyIGFmdGVyIHRoZSBgYWZ0ZXJgIGVsZW1lbnQgb3IgaW5zaWRlIG9mIHRoZSBgcGFyZW50YCBlbGVtZW50LiBXaGVuIHRoZSBmdW5jdGlvblxyXG4gICAgICAgKiBpcyBjYWxsZWQgYSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIG1vdmVkIGFyb3VuZCB3aXRoaW4gdGhlXHJcbiAgICAgICAqICAgRE9NXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGVyZSB0aGUgZWxlbWVudCB3aWxsIGJlXHJcbiAgICAgICAqICAgaW5zZXJ0ZWQgaW50byAoaWYgdGhlIGFmdGVyIGVsZW1lbnQgaXMgbm90IHByZXNlbnQpXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gYWZ0ZXIgdGhlIHNpYmxpbmcgZWxlbWVudCB3aGVyZSB0aGUgZWxlbWVudCB3aWxsIGJlXHJcbiAgICAgICAqICAgcG9zaXRpb25lZCBuZXh0IHRvXHJcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgKi9cclxuICAgICAgbW92ZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIpIHtcclxuICAgICAgICAvLyBEbyBub3QgcmVtb3ZlIGVsZW1lbnQgYmVmb3JlIGluc2VydC4gUmVtb3Zpbmcgd2lsbCBjYXVzZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGVcclxuICAgICAgICAvLyBlbGVtZW50IHRvIGJlIGRyb3BwZWQuIEluc2VydCB3aWxsIGltcGxpY2l0bHkgZG8gdGhlIHJlbW92ZS5cclxuICAgICAgICByZXR1cm4gdGhpcy5lbnRlcihlbGVtZW50LCBwYXJlbnQsIGFmdGVyKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2FkZENsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRzIHRoZSBwcm92aWRlZCBjbGFzc05hbWUgQ1NTIGNsYXNzIHZhbHVlIHRvIHRoZSBwcm92aWRlZCBlbGVtZW50LlxyXG4gICAgICAgKiBXaGVuIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgYSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGhhdmUgdGhlIGNsYXNzTmFtZSB2YWx1ZVxyXG4gICAgICAgKiAgIGFkZGVkIHRvIGl0XHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgdGhlIENTUyBjbGFzcyB3aGljaCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50XHJcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgKi9cclxuICAgICAgYWRkQ2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgICAgICBjbGFzc05hbWUgPSAhaXNTdHJpbmcoY2xhc3NOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpc0FycmF5KGNsYXNzTmFtZSkgPyBjbGFzc05hbWUuam9pbignICcpIDogJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2xhc3NOYW1lO1xyXG4gICAgICAgIGZvckVhY2goZWxlbWVudCwgZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgIGpxTGl0ZUFkZENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGFzeW5jUHJvbWlzZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjcmVtb3ZlQ2xhc3NcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICogQGRlc2NyaXB0aW9uIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGNsYXNzTmFtZSBDU1MgY2xhc3MgdmFsdWUgZnJvbSB0aGUgcHJvdmlkZWQgZWxlbWVudC5cclxuICAgICAgICogV2hlbiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYXQgYSBsYXRlciB0aW1lLlxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBoYXZlIHRoZSBjbGFzc05hbWUgdmFsdWVcclxuICAgICAgICogICByZW1vdmVkIGZyb20gaXRcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSB0aGUgQ1NTIGNsYXNzIHdoaWNoIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XHJcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgKi9cclxuICAgICAgcmVtb3ZlQ2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgICAgICBjbGFzc05hbWUgPSAhaXNTdHJpbmcoY2xhc3NOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpc0FycmF5KGNsYXNzTmFtZSkgPyBjbGFzc05hbWUuam9pbignICcpIDogJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2xhc3NOYW1lO1xyXG4gICAgICAgIGZvckVhY2goZWxlbWVudCwgZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgIGpxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGFzeW5jUHJvbWlzZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjc2V0Q2xhc3NcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICogQGRlc2NyaXB0aW9uIEFkZHMgYW5kL29yIHJlbW92ZXMgdGhlIGdpdmVuIENTUyBjbGFzc2VzIHRvIGFuZCBmcm9tIHRoZSBlbGVtZW50LlxyXG4gICAgICAgKiBXaGVuIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgYSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGhhdmUgaXRzIENTUyBjbGFzc2VzIGNoYW5nZWRcclxuICAgICAgICogICByZW1vdmVkIGZyb20gaXRcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGFkZCB0aGUgQ1NTIGNsYXNzZXMgd2hpY2ggd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudFxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVtb3ZlIHRoZSBDU1MgY2xhc3Mgd2hpY2ggd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcclxuICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXHJcbiAgICAgICAqL1xyXG4gICAgICBzZXRDbGFzcyA6IGZ1bmN0aW9uKGVsZW1lbnQsIGFkZCwgcmVtb3ZlKSB7XHJcbiAgICAgICAgdGhpcy5hZGRDbGFzcyhlbGVtZW50LCBhZGQpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoZWxlbWVudCwgcmVtb3ZlKTtcclxuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBlbmFibGVkIDogbm9vcCxcclxuICAgICAgY2FuY2VsIDogbm9vcFxyXG4gICAgfTtcclxuICB9XTtcclxufV07XHJcblxyXG5mdW5jdGlvbiAkJEFzeW5jQ2FsbGJhY2tQcm92aWRlcigpe1xyXG4gIHRoaXMuJGdldCA9IFsnJCRyQUYnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbigkJHJBRiwgJHRpbWVvdXQpIHtcclxuICAgIHJldHVybiAkJHJBRi5zdXBwb3J0ZWRcclxuICAgICAgPyBmdW5jdGlvbihmbikgeyByZXR1cm4gJCRyQUYoZm4pOyB9XHJcbiAgICAgIDogZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICByZXR1cm4gJHRpbWVvdXQoZm4sIDAsIGZhbHNlKTtcclxuICAgICAgfTtcclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqICEgVGhpcyBpcyBhIHByaXZhdGUgdW5kb2N1bWVudGVkIHNlcnZpY2UgIVxyXG4gKlxyXG4gKiBAbmFtZSAkYnJvd3NlclxyXG4gKiBAcmVxdWlyZXMgJGxvZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhpcyBvYmplY3QgaGFzIHR3byBnb2FsczpcclxuICpcclxuICogLSBoaWRlIGFsbCB0aGUgZ2xvYmFsIHN0YXRlIGluIHRoZSBicm93c2VyIGNhdXNlZCBieSB0aGUgd2luZG93IG9iamVjdFxyXG4gKiAtIGFic3RyYWN0IGF3YXkgYWxsIHRoZSBicm93c2VyIHNwZWNpZmljIGZlYXR1cmVzIGFuZCBpbmNvbnNpc3RlbmNpZXNcclxuICpcclxuICogRm9yIHRlc3RzIHdlIHByb3ZpZGUge0BsaW5rIG5nTW9jay4kYnJvd3NlciBtb2NrIGltcGxlbWVudGF0aW9ufSBvZiB0aGUgYCRicm93c2VyYFxyXG4gKiBzZXJ2aWNlLCB3aGljaCBjYW4gYmUgdXNlZCBmb3IgY29udmVuaWVudCB0ZXN0aW5nIG9mIHRoZSBhcHBsaWNhdGlvbiB3aXRob3V0IHRoZSBpbnRlcmFjdGlvbiB3aXRoXHJcbiAqIHRoZSByZWFsIGJyb3dzZXIgYXBpcy5cclxuICovXHJcbi8qKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gd2luZG93IFRoZSBnbG9iYWwgd2luZG93IG9iamVjdC5cclxuICogQHBhcmFtIHtvYmplY3R9IGRvY3VtZW50IGpRdWVyeSB3cmFwcGVkIGRvY3VtZW50LlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IFhIUiBYTUxIdHRwUmVxdWVzdCBjb25zdHJ1Y3Rvci5cclxuICogQHBhcmFtIHtvYmplY3R9ICRsb2cgY29uc29sZS5sb2cgb3IgYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUgaW50ZXJmYWNlLlxyXG4gKiBAcGFyYW0ge29iamVjdH0gJHNuaWZmZXIgJHNuaWZmZXIgc2VydmljZVxyXG4gKi9cclxuZnVuY3Rpb24gQnJvd3Nlcih3aW5kb3csIGRvY3VtZW50LCAkbG9nLCAkc25pZmZlcikge1xyXG4gIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgcmF3RG9jdW1lbnQgPSBkb2N1bWVudFswXSxcclxuICAgICAgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24sXHJcbiAgICAgIGhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeSxcclxuICAgICAgc2V0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0LFxyXG4gICAgICBjbGVhclRpbWVvdXQgPSB3aW5kb3cuY2xlYXJUaW1lb3V0LFxyXG4gICAgICBwZW5kaW5nRGVmZXJJZHMgPSB7fTtcclxuXHJcbiAgc2VsZi5pc01vY2sgPSBmYWxzZTtcclxuXHJcbiAgdmFyIG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID0gMDtcclxuICB2YXIgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzID0gW107XHJcblxyXG4gIC8vIFRPRE8odm9qdGEpOiByZW1vdmUgdGhpcyB0ZW1wb3JhcnkgYXBpXHJcbiAgc2VsZi4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0ID0gY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q7XHJcbiAgc2VsZi4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50ID0gZnVuY3Rpb24oKSB7IG91dHN0YW5kaW5nUmVxdWVzdENvdW50Kys7IH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEV4ZWN1dGVzIHRoZSBgZm5gIGZ1bmN0aW9uKHN1cHBvcnRzIGN1cnJ5aW5nKSBhbmQgZGVjcmVtZW50cyB0aGUgYG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrc2BcclxuICAgKiBjb3VudGVyLiBJZiB0aGUgY291bnRlciByZWFjaGVzIDAsIGFsbCB0aGUgYG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrc2AgYXJlIGV4ZWN1dGVkLlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KGZuKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBmbi5hcHBseShudWxsLCBzbGljZUFyZ3MoYXJndW1lbnRzLCAxKSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudC0tO1xyXG4gICAgICBpZiAob3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPT09IDApIHtcclxuICAgICAgICB3aGlsZShvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MucG9wKCkoKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgJGxvZy5lcnJvcihlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogTm90ZTogdGhpcyBtZXRob2QgaXMgdXNlZCBvbmx5IGJ5IHNjZW5hcmlvIHJ1bm5lclxyXG4gICAqIFRPRE8odm9qdGEpOiBwcmVmaXggdGhpcyBtZXRob2Qgd2l0aCAkJCA/XHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFjayBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gbm8gb3V0c3RhbmRpbmcgcmVxdWVzdFxyXG4gICAqL1xyXG4gIHNlbGYubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAvLyBmb3JjZSBicm93c2VyIHRvIGV4ZWN1dGUgYWxsIHBvbGxGbnMgLSB0aGlzIGlzIG5lZWRlZCBzbyB0aGF0IGNvb2tpZXMgYW5kIG90aGVyIHBvbGxlcnMgZmlyZVxyXG4gICAgLy8gYXQgc29tZSBkZXRlcm1pbmlzdGljIHRpbWUgaW4gcmVzcGVjdCB0byB0aGUgdGVzdCBydW5uZXIncyBhY3Rpb25zLiBMZWF2aW5nIHRoaW5ncyB1cCB0byB0aGVcclxuICAgIC8vIHJlZ3VsYXIgcG9sbGVyIHdvdWxkIHJlc3VsdCBpbiBmbGFreSB0ZXN0cy5cclxuICAgIGZvckVhY2gocG9sbEZucywgZnVuY3Rpb24ocG9sbEZuKXsgcG9sbEZuKCk7IH0pO1xyXG5cclxuICAgIGlmIChvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9PT0gMCkge1xyXG4gICAgICBjYWxsYmFjaygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gUG9sbCBXYXRjaGVyIEFQSVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgdmFyIHBvbGxGbnMgPSBbXSxcclxuICAgICAgcG9sbFRpbWVvdXQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2FkZFBvbGxGblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBQb2xsIGZ1bmN0aW9uIHRvIGFkZFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQWRkcyBhIGZ1bmN0aW9uIHRvIHRoZSBsaXN0IG9mIGZ1bmN0aW9ucyB0aGF0IHBvbGxlciBwZXJpb2RpY2FsbHkgZXhlY3V0ZXMsXHJcbiAgICogYW5kIHN0YXJ0cyBwb2xsaW5nIGlmIG5vdCBzdGFydGVkIHlldC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSB0aGUgYWRkZWQgZnVuY3Rpb25cclxuICAgKi9cclxuICBzZWxmLmFkZFBvbGxGbiA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQocG9sbFRpbWVvdXQpKSBzdGFydFBvbGxlcigxMDAsIHNldFRpbWVvdXQpO1xyXG4gICAgcG9sbEZucy5wdXNoKGZuKTtcclxuICAgIHJldHVybiBmbjtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaW50ZXJ2YWwgSG93IG9mdGVuIHNob3VsZCBicm93c2VyIGNhbGwgcG9sbCBmdW5jdGlvbnMgKG1zKVxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gc2V0VGltZW91dCBSZWZlcmVuY2UgdG8gYSByZWFsIG9yIGZha2UgYHNldFRpbWVvdXRgIGZ1bmN0aW9uLlxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ29uZmlndXJlcyB0aGUgcG9sbGVyIHRvIHJ1biBpbiB0aGUgc3BlY2lmaWVkIGludGVydmFscywgdXNpbmcgdGhlIHNwZWNpZmllZFxyXG4gICAqIHNldFRpbWVvdXQgZm4gYW5kIGtpY2tzIGl0IG9mZi5cclxuICAgKi9cclxuICBmdW5jdGlvbiBzdGFydFBvbGxlcihpbnRlcnZhbCwgc2V0VGltZW91dCkge1xyXG4gICAgKGZ1bmN0aW9uIGNoZWNrKCkge1xyXG4gICAgICBmb3JFYWNoKHBvbGxGbnMsIGZ1bmN0aW9uKHBvbGxGbil7IHBvbGxGbigpOyB9KTtcclxuICAgICAgcG9sbFRpbWVvdXQgPSBzZXRUaW1lb3V0KGNoZWNrLCBpbnRlcnZhbCk7XHJcbiAgICB9KSgpO1xyXG4gIH1cclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyBVUkwgQVBJXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgdmFyIGxhc3RCcm93c2VyVXJsID0gbG9jYXRpb24uaHJlZixcclxuICAgICAgYmFzZUVsZW1lbnQgPSBkb2N1bWVudC5maW5kKCdiYXNlJyksXHJcbiAgICAgIG5ld0xvY2F0aW9uID0gbnVsbDtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgJGJyb3dzZXIjdXJsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBHRVRURVI6XHJcbiAgICogV2l0aG91dCBhbnkgYXJndW1lbnQsIHRoaXMgbWV0aG9kIGp1c3QgcmV0dXJucyBjdXJyZW50IHZhbHVlIG9mIGxvY2F0aW9uLmhyZWYuXHJcbiAgICpcclxuICAgKiBTRVRURVI6XHJcbiAgICogV2l0aCBhdCBsZWFzdCBvbmUgYXJndW1lbnQsIHRoaXMgbWV0aG9kIHNldHMgdXJsIHRvIG5ldyB2YWx1ZS5cclxuICAgKiBJZiBodG1sNSBoaXN0b3J5IGFwaSBzdXBwb3J0ZWQsIHB1c2hTdGF0ZS9yZXBsYWNlU3RhdGUgaXMgdXNlZCwgb3RoZXJ3aXNlXHJcbiAgICogbG9jYXRpb24uaHJlZi9sb2NhdGlvbi5yZXBsYWNlIGlzIHVzZWQuXHJcbiAgICogUmV0dXJucyBpdHMgb3duIGluc3RhbmNlIHRvIGFsbG93IGNoYWluaW5nXHJcbiAgICpcclxuICAgKiBOT1RFOiB0aGlzIGFwaSBpcyBpbnRlbmRlZCBmb3IgdXNlIG9ubHkgYnkgdGhlICRsb2NhdGlvbiBzZXJ2aWNlLiBQbGVhc2UgdXNlIHRoZVxyXG4gICAqIHtAbGluayBuZy4kbG9jYXRpb24gJGxvY2F0aW9uIHNlcnZpY2V9IHRvIGNoYW5nZSB1cmwuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIE5ldyB1cmwgKHdoZW4gdXNlZCBhcyBzZXR0ZXIpXHJcbiAgICogQHBhcmFtIHtib29sZWFuPX0gcmVwbGFjZSBTaG91bGQgbmV3IHVybCByZXBsYWNlIGN1cnJlbnQgaGlzdG9yeSByZWNvcmQgP1xyXG4gICAqL1xyXG4gIHNlbGYudXJsID0gZnVuY3Rpb24odXJsLCByZXBsYWNlKSB7XHJcbiAgICAvLyBBbmRyb2lkIEJyb3dzZXIgQkZDYWNoZSBjYXVzZXMgbG9jYXRpb24sIGhpc3RvcnkgcmVmZXJlbmNlIHRvIGJlY29tZSBzdGFsZS5cclxuICAgIGlmIChsb2NhdGlvbiAhPT0gd2luZG93LmxvY2F0aW9uKSBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcclxuICAgIGlmIChoaXN0b3J5ICE9PSB3aW5kb3cuaGlzdG9yeSkgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xyXG5cclxuICAgIC8vIHNldHRlclxyXG4gICAgaWYgKHVybCkge1xyXG4gICAgICBpZiAobGFzdEJyb3dzZXJVcmwgPT0gdXJsKSByZXR1cm47XHJcbiAgICAgIGxhc3RCcm93c2VyVXJsID0gdXJsO1xyXG4gICAgICBpZiAoJHNuaWZmZXIuaGlzdG9yeSkge1xyXG4gICAgICAgIGlmIChyZXBsYWNlKSBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgdXJsKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsICcnLCB1cmwpO1xyXG4gICAgICAgICAgLy8gQ3JhenkgT3BlcmEgQnVnOiBodHRwOi8vbXkub3BlcmEuY29tL2NvbW11bml0eS9mb3J1bXMvdG9waWMuZG1sP2lkPTExODU0NjJcclxuICAgICAgICAgIGJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnLCBiYXNlRWxlbWVudC5hdHRyKCdocmVmJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBuZXdMb2NhdGlvbiA9IHVybDtcclxuICAgICAgICBpZiAocmVwbGFjZSkge1xyXG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZSh1cmwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VsZjtcclxuICAgIC8vIGdldHRlclxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gLSBuZXdMb2NhdGlvbiBpcyBhIHdvcmthcm91bmQgZm9yIGFuIElFNy05IGlzc3VlIHdpdGggbG9jYXRpb24ucmVwbGFjZSBhbmQgbG9jYXRpb24uaHJlZlxyXG4gICAgICAvLyAgIG1ldGhvZHMgbm90IHVwZGF0aW5nIGxvY2F0aW9uLmhyZWYgc3luY2hyb25vdXNseS5cclxuICAgICAgLy8gLSB0aGUgcmVwbGFjZW1lbnQgaXMgYSB3b3JrYXJvdW5kIGZvciBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00MDcxNzJcclxuICAgICAgcmV0dXJuIG5ld0xvY2F0aW9uIHx8IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvJTI3L2csXCInXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciB1cmxDaGFuZ2VMaXN0ZW5lcnMgPSBbXSxcclxuICAgICAgdXJsQ2hhbmdlSW5pdCA9IGZhbHNlO1xyXG5cclxuICBmdW5jdGlvbiBmaXJlVXJsQ2hhbmdlKCkge1xyXG4gICAgbmV3TG9jYXRpb24gPSBudWxsO1xyXG4gICAgaWYgKGxhc3RCcm93c2VyVXJsID09IHNlbGYudXJsKCkpIHJldHVybjtcclxuXHJcbiAgICBsYXN0QnJvd3NlclVybCA9IHNlbGYudXJsKCk7XHJcbiAgICBmb3JFYWNoKHVybENoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICAgICAgbGlzdGVuZXIoc2VsZi51cmwoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI29uVXJsQ2hhbmdlXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZWdpc3RlciBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkLCB3aGVuIHVybCBjaGFuZ2VzLlxyXG4gICAqXHJcbiAgICogSXQncyBvbmx5IGNhbGxlZCB3aGVuIHRoZSB1cmwgaXMgY2hhbmdlZCBmcm9tIG91dHNpZGUgb2YgYW5ndWxhcjpcclxuICAgKiAtIHVzZXIgdHlwZXMgZGlmZmVyZW50IHVybCBpbnRvIGFkZHJlc3MgYmFyXHJcbiAgICogLSB1c2VyIGNsaWNrcyBvbiBoaXN0b3J5IChmb3J3YXJkL2JhY2spIGJ1dHRvblxyXG4gICAqIC0gdXNlciBjbGlja3Mgb24gYSBsaW5rXHJcbiAgICpcclxuICAgKiBJdCdzIG5vdCBjYWxsZWQgd2hlbiB1cmwgaXMgY2hhbmdlZCBieSAkYnJvd3Nlci51cmwoKSBtZXRob2RcclxuICAgKlxyXG4gICAqIFRoZSBsaXN0ZW5lciBnZXRzIGNhbGxlZCB3aXRoIG5ldyB1cmwgYXMgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5IHRoZSAkbG9jYXRpb24gc2VydmljZS4gUGxlYXNlIHVzZSB0aGVcclxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbiBzZXJ2aWNlfSB0byBtb25pdG9yIHVybCBjaGFuZ2VzIGluIGFuZ3VsYXIgYXBwcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKX0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdXJsIGNoYW5nZXMuXHJcbiAgICogQHJldHVybiB7ZnVuY3Rpb24oc3RyaW5nKX0gUmV0dXJucyB0aGUgcmVnaXN0ZXJlZCBsaXN0ZW5lciBmbiAtIGhhbmR5IGlmIHRoZSBmbiBpcyBhbm9ueW1vdXMuXHJcbiAgICovXHJcbiAgc2VsZi5vblVybENoYW5nZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAvLyBUT0RPKHZvanRhKTogcmVmYWN0b3IgdG8gdXNlIG5vZGUncyBzeW50YXggZm9yIGV2ZW50c1xyXG4gICAgaWYgKCF1cmxDaGFuZ2VJbml0KSB7XHJcbiAgICAgIC8vIFdlIGxpc3RlbiBvbiBib3RoIChoYXNoY2hhbmdlL3BvcHN0YXRlKSB3aGVuIGF2YWlsYWJsZSwgYXMgc29tZSBicm93c2VycyAoZS5nLiBPcGVyYSlcclxuICAgICAgLy8gZG9uJ3QgZmlyZSBwb3BzdGF0ZSB3aGVuIHVzZXIgY2hhbmdlIHRoZSBhZGRyZXNzIGJhciBhbmQgZG9uJ3QgZmlyZSBoYXNoY2hhbmdlIHdoZW4gdXJsXHJcbiAgICAgIC8vIGNoYW5nZWQgYnkgcHVzaC9yZXBsYWNlU3RhdGVcclxuXHJcbiAgICAgIC8vIGh0bWw1IGhpc3RvcnkgYXBpIC0gcG9wc3RhdGUgZXZlbnRcclxuICAgICAgaWYgKCRzbmlmZmVyLmhpc3RvcnkpIGpxTGl0ZSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGZpcmVVcmxDaGFuZ2UpO1xyXG4gICAgICAvLyBoYXNoY2hhbmdlIGV2ZW50XHJcbiAgICAgIGlmICgkc25pZmZlci5oYXNoY2hhbmdlKSBqcUxpdGUod2luZG93KS5vbignaGFzaGNoYW5nZScsIGZpcmVVcmxDaGFuZ2UpO1xyXG4gICAgICAvLyBwb2xsaW5nXHJcbiAgICAgIGVsc2Ugc2VsZi5hZGRQb2xsRm4oZmlyZVVybENoYW5nZSk7XHJcblxyXG4gICAgICB1cmxDaGFuZ2VJbml0ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB1cmxDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICByZXR1cm4gY2FsbGJhY2s7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIHVybCBoYXMgY2hhbmdlZCBvdXRzaWRlIG9mIEFuZ3VsYXIuXHJcbiAgICogTmVlZHMgdG8gYmUgZXhwb3J0ZWQgdG8gYmUgYWJsZSB0byBjaGVjayBmb3IgY2hhbmdlcyB0aGF0IGhhdmUgYmVlbiBkb25lIGluIHN5bmMsXHJcbiAgICogYXMgaGFzaGNoYW5nZS9wb3BzdGF0ZSBldmVudHMgZmlyZSBpbiBhc3luYy5cclxuICAgKi9cclxuICBzZWxmLiQkY2hlY2tVcmxDaGFuZ2UgPSBmaXJlVXJsQ2hhbmdlO1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vIE1pc2MgQVBJXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgJGJyb3dzZXIjYmFzZUhyZWZcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHVybnMgY3VycmVudCA8YmFzZSBocmVmPlxyXG4gICAqIChhbHdheXMgcmVsYXRpdmUgLSB3aXRob3V0IGRvbWFpbilcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjdXJyZW50IGJhc2UgaHJlZlxyXG4gICAqL1xyXG4gIHNlbGYuYmFzZUhyZWYgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBocmVmID0gYmFzZUVsZW1lbnQuYXR0cignaHJlZicpO1xyXG4gICAgcmV0dXJuIGhyZWYgPyBocmVmLnJlcGxhY2UoL14oaHR0cHM/XFw6KT9cXC9cXC9bXlxcL10qLywgJycpIDogJyc7XHJcbiAgfTtcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyBDb29raWVzIEFQSVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgdmFyIGxhc3RDb29raWVzID0ge307XHJcbiAgdmFyIGxhc3RDb29raWVTdHJpbmcgPSAnJztcclxuICB2YXIgY29va2llUGF0aCA9IHNlbGYuYmFzZUhyZWYoKTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgJGJyb3dzZXIjY29va2llc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIENvb2tpZSBuYW1lXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBDb29raWUgdmFsdWVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoZSBjb29raWVzIG1ldGhvZCBwcm92aWRlcyBhICdwcml2YXRlJyBsb3cgbGV2ZWwgYWNjZXNzIHRvIGJyb3dzZXIgY29va2llcy5cclxuICAgKiBJdCBpcyBub3QgbWVhbnQgdG8gYmUgdXNlZCBkaXJlY3RseSwgdXNlIHRoZSAkY29va2llIHNlcnZpY2UgaW5zdGVhZC5cclxuICAgKlxyXG4gICAqIFRoZSByZXR1cm4gdmFsdWVzIHZhcnkgZGVwZW5kaW5nIG9uIHRoZSBhcmd1bWVudHMgdGhhdCB0aGUgbWV0aG9kIHdhcyBjYWxsZWQgd2l0aCBhcyBmb2xsb3dzOlxyXG4gICAqXHJcbiAgICogLSBjb29raWVzKCkgLT4gaGFzaCBvZiBhbGwgY29va2llcywgdGhpcyBpcyBOT1QgYSBjb3B5IG9mIHRoZSBpbnRlcm5hbCBzdGF0ZSwgc28gZG8gbm90IG1vZGlmeVxyXG4gICAqICAgaXRcclxuICAgKiAtIGNvb2tpZXMobmFtZSwgdmFsdWUpIC0+IHNldCBuYW1lIHRvIHZhbHVlLCBpZiB2YWx1ZSBpcyB1bmRlZmluZWQgZGVsZXRlIHRoZSBjb29raWVcclxuICAgKiAtIGNvb2tpZXMobmFtZSkgLT4gdGhlIHNhbWUgYXMgKG5hbWUsIHVuZGVmaW5lZCkgPT0gREVMRVRFUyAobm8gb25lIGNhbGxzIGl0IHJpZ2h0IG5vdyB0aGF0XHJcbiAgICogICB3YXkpXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBIYXNoIG9mIGFsbCBjb29raWVzIChpZiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyKVxyXG4gICAqL1xyXG4gIHNlbGYuY29va2llcyA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XHJcbiAgICB2YXIgY29va2llTGVuZ3RoLCBjb29raWVBcnJheSwgY29va2llLCBpLCBpbmRleDtcclxuXHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJhd0RvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArIFwiPTtwYXRoPVwiICsgY29va2llUGF0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI7ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVFwiO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICAgIGNvb2tpZUxlbmd0aCA9IChyYXdEb2N1bWVudC5jb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnO3BhdGg9JyArIGNvb2tpZVBhdGgpLmxlbmd0aCArIDE7XHJcblxyXG4gICAgICAgICAgLy8gcGVyIGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzIxMDkudHh0IGJyb3dzZXIgbXVzdCBhbGxvdyBhdCBtaW5pbXVtOlxyXG4gICAgICAgICAgLy8gLSAzMDAgY29va2llc1xyXG4gICAgICAgICAgLy8gLSAyMCBjb29raWVzIHBlciB1bmlxdWUgZG9tYWluXHJcbiAgICAgICAgICAvLyAtIDQwOTYgYnl0ZXMgcGVyIGNvb2tpZVxyXG4gICAgICAgICAgaWYgKGNvb2tpZUxlbmd0aCA+IDQwOTYpIHtcclxuICAgICAgICAgICAgJGxvZy53YXJuKFwiQ29va2llICdcIisgbmFtZSArXHJcbiAgICAgICAgICAgICAgXCInIHBvc3NpYmx5IG5vdCBzZXQgb3Igb3ZlcmZsb3dlZCBiZWNhdXNlIGl0IHdhcyB0b28gbGFyZ2UgKFwiK1xyXG4gICAgICAgICAgICAgIGNvb2tpZUxlbmd0aCArIFwiID4gNDA5NiBieXRlcykhXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHJhd0RvY3VtZW50LmNvb2tpZSAhPT0gbGFzdENvb2tpZVN0cmluZykge1xyXG4gICAgICAgIGxhc3RDb29raWVTdHJpbmcgPSByYXdEb2N1bWVudC5jb29raWU7XHJcbiAgICAgICAgY29va2llQXJyYXkgPSBsYXN0Q29va2llU3RyaW5nLnNwbGl0KFwiOyBcIik7XHJcbiAgICAgICAgbGFzdENvb2tpZXMgPSB7fTtcclxuXHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvb2tpZUFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb29raWUgPSBjb29raWVBcnJheVtpXTtcclxuICAgICAgICAgIGluZGV4ID0gY29va2llLmluZGV4T2YoJz0nKTtcclxuICAgICAgICAgIGlmIChpbmRleCA+IDApIHsgLy9pZ25vcmUgbmFtZWxlc3MgY29va2llc1xyXG4gICAgICAgICAgICBuYW1lID0gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcoMCwgaW5kZXgpKTtcclxuICAgICAgICAgICAgLy8gdGhlIGZpcnN0IHZhbHVlIHRoYXQgaXMgc2VlbiBmb3IgYSBjb29raWUgaXMgdGhlIG1vc3RcclxuICAgICAgICAgICAgLy8gc3BlY2lmaWMgb25lLiAgdmFsdWVzIGZvciB0aGUgc2FtZSBjb29raWUgbmFtZSB0aGF0XHJcbiAgICAgICAgICAgIC8vIGZvbGxvdyBhcmUgZm9yIGxlc3Mgc3BlY2lmaWMgcGF0aHMuXHJcbiAgICAgICAgICAgIGlmIChsYXN0Q29va2llc1tuYW1lXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgbGFzdENvb2tpZXNbbmFtZV0gPSBkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhpbmRleCArIDEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbGFzdENvb2tpZXM7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBBIGZ1bmN0aW9uLCB3aG8ncyBleGVjdXRpb24gc2hvdWxkIGJlIGRlZmVycmVkLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gW2RlbGF5PTBdIG9mIG1pbGxpc2Vjb25kcyB0byBkZWZlciB0aGUgZnVuY3Rpb24gZXhlY3V0aW9uLlxyXG4gICAqIEByZXR1cm5zIHsqfSBEZWZlcklkIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSB0YXNrIHZpYSBgJGJyb3dzZXIuZGVmZXIuY2FuY2VsKClgLlxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogRXhlY3V0ZXMgYSBmbiBhc3luY2hyb25vdXNseSB2aWEgYHNldFRpbWVvdXQoZm4sIGRlbGF5KWAuXHJcbiAgICpcclxuICAgKiBVbmxpa2Ugd2hlbiBjYWxsaW5nIGBzZXRUaW1lb3V0YCBkaXJlY3RseSwgaW4gdGVzdCB0aGlzIGZ1bmN0aW9uIGlzIG1vY2tlZCBhbmQgaW5zdGVhZCBvZiB1c2luZ1xyXG4gICAqIGBzZXRUaW1lb3V0YCBpbiB0ZXN0cywgdGhlIGZucyBhcmUgcXVldWVkIGluIGFuIGFycmF5LCB3aGljaCBjYW4gYmUgcHJvZ3JhbW1hdGljYWxseSBmbHVzaGVkXHJcbiAgICogdmlhIGAkYnJvd3Nlci5kZWZlci5mbHVzaCgpYC5cclxuICAgKlxyXG4gICAqL1xyXG4gIHNlbGYuZGVmZXIgPSBmdW5jdGlvbihmbiwgZGVsYXkpIHtcclxuICAgIHZhciB0aW1lb3V0SWQ7XHJcbiAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCsrO1xyXG4gICAgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgZGVsZXRlIHBlbmRpbmdEZWZlcklkc1t0aW1lb3V0SWRdO1xyXG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbik7XHJcbiAgICB9LCBkZWxheSB8fCAwKTtcclxuICAgIHBlbmRpbmdEZWZlcklkc1t0aW1lb3V0SWRdID0gdHJ1ZTtcclxuICAgIHJldHVybiB0aW1lb3V0SWQ7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyLmNhbmNlbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ2FuY2VscyBhIGRlZmVycmVkIHRhc2sgaWRlbnRpZmllZCB3aXRoIGBkZWZlcklkYC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gZGVmZXJJZCBUb2tlbiByZXR1cm5lZCBieSB0aGUgYCRicm93c2VyLmRlZmVyYCBmdW5jdGlvbi5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgaGFzbid0IGV4ZWN1dGVkIHlldCBhbmQgd2FzIHN1Y2Nlc3NmdWxseVxyXG4gICAqICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZC5cclxuICAgKi9cclxuICBzZWxmLmRlZmVyLmNhbmNlbCA9IGZ1bmN0aW9uKGRlZmVySWQpIHtcclxuICAgIGlmIChwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF0pIHtcclxuICAgICAgZGVsZXRlIHBlbmRpbmdEZWZlcklkc1tkZWZlcklkXTtcclxuICAgICAgY2xlYXJUaW1lb3V0KGRlZmVySWQpO1xyXG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uICRCcm93c2VyUHJvdmlkZXIoKXtcclxuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGxvZycsICckc25pZmZlcicsICckZG9jdW1lbnQnLFxyXG4gICAgICBmdW5jdGlvbiggJHdpbmRvdywgICAkbG9nLCAgICRzbmlmZmVyLCAgICRkb2N1bWVudCl7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCcm93c2VyKCR3aW5kb3csICRkb2N1bWVudCwgJGxvZywgJHNuaWZmZXIpO1xyXG4gICAgICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRjYWNoZUZhY3RvcnlcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEZhY3RvcnkgdGhhdCBjb25zdHJ1Y3RzIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3RzIGFuZCBnaXZlcyBhY2Nlc3MgdG9cclxuICogdGhlbS5cclxuICpcclxuICogYGBganNcclxuICpcclxuICogIHZhciBjYWNoZSA9ICRjYWNoZUZhY3RvcnkoJ2NhY2hlSWQnKTtcclxuICogIGV4cGVjdCgkY2FjaGVGYWN0b3J5LmdldCgnY2FjaGVJZCcpKS50b0JlKGNhY2hlKTtcclxuICogIGV4cGVjdCgkY2FjaGVGYWN0b3J5LmdldCgnbm9TdWNoQ2FjaGVJZCcpKS5ub3QudG9CZURlZmluZWQoKTtcclxuICpcclxuICogIGNhY2hlLnB1dChcImtleVwiLCBcInZhbHVlXCIpO1xyXG4gKiAgY2FjaGUucHV0KFwiYW5vdGhlciBrZXlcIiwgXCJhbm90aGVyIHZhbHVlXCIpO1xyXG4gKlxyXG4gKiAgLy8gV2UndmUgc3BlY2lmaWVkIG5vIG9wdGlvbnMgb24gY3JlYXRpb25cclxuICogIGV4cGVjdChjYWNoZS5pbmZvKCkpLnRvRXF1YWwoe2lkOiAnY2FjaGVJZCcsIHNpemU6IDJ9KTtcclxuICpcclxuICogYGBgXHJcbiAqXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUlkIE5hbWUgb3IgaWQgb2YgdGhlIG5ld2x5IGNyZWF0ZWQgY2FjaGUuXHJcbiAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBPcHRpb25zIG9iamVjdCB0aGF0IHNwZWNpZmllcyB0aGUgY2FjaGUgYmVoYXZpb3IuIFByb3BlcnRpZXM6XHJcbiAqXHJcbiAqICAgLSBge251bWJlcj19YCBgY2FwYWNpdHlgIOKAlCB0dXJucyB0aGUgY2FjaGUgaW50byBMUlUgY2FjaGUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IE5ld2x5IGNyZWF0ZWQgY2FjaGUgb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBzZXQgb2YgbWV0aG9kczpcclxuICpcclxuICogLSBge29iamVjdH1gIGBpbmZvKClgIOKAlCBSZXR1cm5zIGlkLCBzaXplLCBhbmQgb3B0aW9ucyBvZiBjYWNoZS5cclxuICogLSBge3sqfX1gIGBwdXQoe3N0cmluZ30ga2V5LCB7Kn0gdmFsdWUpYCDigJQgUHV0cyBhIG5ldyBrZXktdmFsdWUgcGFpciBpbnRvIHRoZSBjYWNoZSBhbmQgcmV0dXJuc1xyXG4gKiAgIGl0LlxyXG4gKiAtIGB7eyp9fWAgYGdldCh7c3RyaW5nfSBrZXkpYCDigJQgUmV0dXJucyBjYWNoZWQgdmFsdWUgZm9yIGBrZXlgIG9yIHVuZGVmaW5lZCBmb3IgY2FjaGUgbWlzcy5cclxuICogLSBge3ZvaWR9YCBgcmVtb3ZlKHtzdHJpbmd9IGtleSlgIOKAlCBSZW1vdmVzIGEga2V5LXZhbHVlIHBhaXIgZnJvbSB0aGUgY2FjaGUuXHJcbiAqIC0gYHt2b2lkfWAgYHJlbW92ZUFsbCgpYCDigJQgUmVtb3ZlcyBhbGwgY2FjaGVkIHZhbHVlcy5cclxuICogLSBge3ZvaWR9YCBgZGVzdHJveSgpYCDigJQgUmVtb3ZlcyByZWZlcmVuY2VzIHRvIHRoaXMgY2FjaGUgZnJvbSAkY2FjaGVGYWN0b3J5LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJjYWNoZUV4YW1wbGVBcHBcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQ2FjaGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlS2V5XCIgcGxhY2Vob2xkZXI9XCJLZXlcIj5cclxuICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwibmV3Q2FjaGVWYWx1ZVwiIHBsYWNlaG9sZGVyPVwiVmFsdWVcIj5cclxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInB1dChuZXdDYWNoZUtleSwgbmV3Q2FjaGVWYWx1ZSlcIj5DYWNoZTwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgPHAgbmctaWY9XCJrZXlzLmxlbmd0aFwiPkNhY2hlZCBWYWx1ZXM8L3A+XHJcbiAgICAgICAgIDxkaXYgbmctcmVwZWF0PVwia2V5IGluIGtleXNcIj5cclxuICAgICAgICAgICA8c3BhbiBuZy1iaW5kPVwia2V5XCI+PC9zcGFuPlxyXG4gICAgICAgICAgIDxzcGFuPjogPC9zcGFuPlxyXG4gICAgICAgICAgIDxiIG5nLWJpbmQ9XCJjYWNoZS5nZXQoa2V5KVwiPjwvYj5cclxuICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICA8cD5DYWNoZSBJbmZvPC9wPlxyXG4gICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cIihrZXksIHZhbHVlKSBpbiBjYWNoZS5pbmZvKClcIj5cclxuICAgICAgICAgICA8c3BhbiBuZy1iaW5kPVwia2V5XCI+PC9zcGFuPlxyXG4gICAgICAgICAgIDxzcGFuPjogPC9zcGFuPlxyXG4gICAgICAgICAgIDxiIG5nLWJpbmQ9XCJ2YWx1ZVwiPjwvYj5cclxuICAgICAgICAgPC9kaXY+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2NhY2hlRXhhbXBsZUFwcCcsIFtdKS5cclxuICAgICAgICAgY29udHJvbGxlcignQ2FjaGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRzY29wZSwgJGNhY2hlRmFjdG9yeSkge1xyXG4gICAgICAgICAgICRzY29wZS5rZXlzID0gW107XHJcbiAgICAgICAgICAgJHNjb3BlLmNhY2hlID0gJGNhY2hlRmFjdG9yeSgnY2FjaGVJZCcpO1xyXG4gICAgICAgICAgICRzY29wZS5wdXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICBpZiAoJHNjb3BlLmNhY2hlLmdldChrZXkpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgJHNjb3BlLmtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgJHNjb3BlLmNhY2hlLnB1dChrZXksIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWUpO1xyXG4gICAgICAgICAgIH07XHJcbiAgICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICAgICAgcCB7XHJcbiAgICAgICAgIG1hcmdpbjogMTBweCAwIDNweDtcclxuICAgICAgIH1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uICRDYWNoZUZhY3RvcnlQcm92aWRlcigpIHtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgY2FjaGVzID0ge307XHJcblxyXG4gICAgZnVuY3Rpb24gY2FjaGVGYWN0b3J5KGNhY2hlSWQsIG9wdGlvbnMpIHtcclxuICAgICAgaWYgKGNhY2hlSWQgaW4gY2FjaGVzKSB7XHJcbiAgICAgICAgdGhyb3cgbWluRXJyKCckY2FjaGVGYWN0b3J5JykoJ2lpZCcsIFwiQ2FjaGVJZCAnezB9JyBpcyBhbHJlYWR5IHRha2VuIVwiLCBjYWNoZUlkKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIHNpemUgPSAwLFxyXG4gICAgICAgICAgc3RhdHMgPSBleHRlbmQoe30sIG9wdGlvbnMsIHtpZDogY2FjaGVJZH0pLFxyXG4gICAgICAgICAgZGF0YSA9IHt9LFxyXG4gICAgICAgICAgY2FwYWNpdHkgPSAob3B0aW9ucyAmJiBvcHRpb25zLmNhcGFjaXR5KSB8fCBOdW1iZXIuTUFYX1ZBTFVFLFxyXG4gICAgICAgICAgbHJ1SGFzaCA9IHt9LFxyXG4gICAgICAgICAgZnJlc2hFbmQgPSBudWxsLFxyXG4gICAgICAgICAgc3RhbGVFbmQgPSBudWxsO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyB0eXBlXHJcbiAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGVcclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIEEgY2FjaGUgb2JqZWN0IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIGRhdGEsIHByaW1hcmlseSB1c2VkIGJ5XHJcbiAgICAgICAqIHtAbGluayAkaHR0cCAkaHR0cH0gYW5kIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOnNjcmlwdCBzY3JpcHR9IGRpcmVjdGl2ZSB0byBjYWNoZVxyXG4gICAgICAgKiB0ZW1wbGF0ZXMgYW5kIG90aGVyIGRhdGEuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAqICBhbmd1bGFyLm1vZHVsZSgnc3VwZXJDYWNoZScpXHJcbiAgICAgICAqICAgIC5mYWN0b3J5KCdzdXBlckNhY2hlJywgWyckY2FjaGVGYWN0b3J5JywgZnVuY3Rpb24oJGNhY2hlRmFjdG9yeSkge1xyXG4gICAgICAgKiAgICAgIHJldHVybiAkY2FjaGVGYWN0b3J5KCdzdXBlci1jYWNoZScpO1xyXG4gICAgICAgKiAgICB9XSk7XHJcbiAgICAgICAqIGBgYFxyXG4gICAgICAgKlxyXG4gICAgICAgKiBFeGFtcGxlIHRlc3Q6XHJcbiAgICAgICAqXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAqICBpdCgnc2hvdWxkIGJlaGF2ZSBsaWtlIGEgY2FjaGUnLCBpbmplY3QoZnVuY3Rpb24oc3VwZXJDYWNoZSkge1xyXG4gICAgICAgKiAgICBzdXBlckNhY2hlLnB1dCgna2V5JywgJ3ZhbHVlJyk7XHJcbiAgICAgICAqICAgIHN1cGVyQ2FjaGUucHV0KCdhbm90aGVyIGtleScsICdhbm90aGVyIHZhbHVlJyk7XHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgIGV4cGVjdChzdXBlckNhY2hlLmluZm8oKSkudG9FcXVhbCh7XHJcbiAgICAgICAqICAgICAgaWQ6ICdzdXBlci1jYWNoZScsXHJcbiAgICAgICAqICAgICAgc2l6ZTogMlxyXG4gICAgICAgKiAgICB9KTtcclxuICAgICAgICpcclxuICAgICAgICogICAgc3VwZXJDYWNoZS5yZW1vdmUoJ2Fub3RoZXIga2V5Jyk7XHJcbiAgICAgICAqICAgIGV4cGVjdChzdXBlckNhY2hlLmdldCgnYW5vdGhlciBrZXknKSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICBzdXBlckNhY2hlLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5pbmZvKCkpLnRvRXF1YWwoe1xyXG4gICAgICAgKiAgICAgIGlkOiAnc3VwZXItY2FjaGUnLFxyXG4gICAgICAgKiAgICAgIHNpemU6IDBcclxuICAgICAgICogICAgfSk7XHJcbiAgICAgICAqICB9KSk7XHJcbiAgICAgICAqIGBgYFxyXG4gICAgICAgKi9cclxuICAgICAgcmV0dXJuIGNhY2hlc1tjYWNoZUlkXSA9IHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjcHV0XHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIEluc2VydHMgYSBuYW1lZCBlbnRyeSBpbnRvIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0IHRvIGJlXHJcbiAgICAgICAgICogcmV0cmlldmVkIGxhdGVyLCBhbmQgaW5jcmVtZW50aW5nIHRoZSBzaXplIG9mIHRoZSBjYWNoZSBpZiB0aGUga2V5IHdhcyBub3QgYWxyZWFkeVxyXG4gICAgICAgICAqIHByZXNlbnQgaW4gdGhlIGNhY2hlLiBJZiBiZWhhdmluZyBsaWtlIGFuIExSVSBjYWNoZSwgaXQgd2lsbCBhbHNvIHJlbW92ZSBzdGFsZVxyXG4gICAgICAgICAqIGVudHJpZXMgZnJvbSB0aGUgc2V0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSXQgd2lsbCBub3QgaW5zZXJ0IHVuZGVmaW5lZCB2YWx1ZXMgaW50byB0aGUgY2FjaGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgdW5kZXIgd2hpY2ggdGhlIGNhY2hlZCBkYXRhIGlzIHN0b3JlZC5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIHRoZSB2YWx1ZSB0byBzdG9yZSBhbG9uZ3NpZGUgdGhlIGtleS4gSWYgaXQgaXMgdW5kZWZpbmVkLCB0aGUga2V5XHJcbiAgICAgICAgICogICAgd2lsbCBub3QgYmUgc3RvcmVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgc3RvcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1dDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xyXG4gICAgICAgICAgICB2YXIgbHJ1RW50cnkgPSBscnVIYXNoW2tleV0gfHwgKGxydUhhc2hba2V5XSA9IHtrZXk6IGtleX0pO1xyXG5cclxuICAgICAgICAgICAgcmVmcmVzaChscnVFbnRyeSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xyXG4gICAgICAgICAgaWYgKCEoa2V5IGluIGRhdGEpKSBzaXplKys7XHJcbiAgICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICBpZiAoc2l6ZSA+IGNhcGFjaXR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN0YWxlRW5kLmtleSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI2dldFxyXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXRyaWV2ZXMgbmFtZWQgZGF0YSBzdG9yZWQgaW4gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgb2YgdGhlIGRhdGEgdG8gYmUgcmV0cmlldmVkXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IHRoZSB2YWx1ZSBzdG9yZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmIChjYXBhY2l0eSA8IE51bWJlci5NQVhfVkFMVUUpIHtcclxuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFscnVFbnRyeSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgcmVmcmVzaChscnVFbnRyeSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjcmVtb3ZlXHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJlbW92ZXMgYW4gZW50cnkgZnJvbSB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgdGhlIGtleSBvZiB0aGUgZW50cnkgdG8gYmUgcmVtb3ZlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZiAoY2FwYWNpdHkgPCBOdW1iZXIuTUFYX1ZBTFVFKSB7XHJcbiAgICAgICAgICAgIHZhciBscnVFbnRyeSA9IGxydUhhc2hba2V5XTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbHJ1RW50cnkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmIChscnVFbnRyeSA9PSBmcmVzaEVuZCkgZnJlc2hFbmQgPSBscnVFbnRyeS5wO1xyXG4gICAgICAgICAgICBpZiAobHJ1RW50cnkgPT0gc3RhbGVFbmQpIHN0YWxlRW5kID0gbHJ1RW50cnkubjtcclxuICAgICAgICAgICAgbGluayhscnVFbnRyeS5uLGxydUVudHJ5LnApO1xyXG5cclxuICAgICAgICAgICAgZGVsZXRlIGxydUhhc2hba2V5XTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xyXG4gICAgICAgICAgc2l6ZS0tO1xyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNyZW1vdmVBbGxcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ2xlYXJzIHRoZSBjYWNoZSBvYmplY3Qgb2YgYW55IGVudHJpZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVtb3ZlQWxsOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGRhdGEgPSB7fTtcclxuICAgICAgICAgIHNpemUgPSAwO1xyXG4gICAgICAgICAgbHJ1SGFzaCA9IHt9O1xyXG4gICAgICAgICAgZnJlc2hFbmQgPSBzdGFsZUVuZCA9IG51bGw7XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI2Rlc3Ryb3lcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogRGVzdHJveXMgdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QgZW50aXJlbHksXHJcbiAgICAgICAgICogcmVtb3ZpbmcgaXQgZnJvbSB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkgJGNhY2hlRmFjdG9yeX0gc2V0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZGF0YSA9IG51bGw7XHJcbiAgICAgICAgICBzdGF0cyA9IG51bGw7XHJcbiAgICAgICAgICBscnVIYXNoID0gbnVsbDtcclxuICAgICAgICAgIGRlbGV0ZSBjYWNoZXNbY2FjaGVJZF07XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI2luZm9cclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0cmlldmUgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGEgcGFydGljdWxhciB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAgICAgICAgICogICA8dWw+XHJcbiAgICAgICAgICogICAgIDxsaT4qKmlkKio6IHRoZSBpZCBvZiB0aGUgY2FjaGUgaW5zdGFuY2U8L2xpPlxyXG4gICAgICAgICAqICAgICA8bGk+KipzaXplKio6IHRoZSBudW1iZXIgb2YgZW50cmllcyBrZXB0IGluIHRoZSBjYWNoZSBpbnN0YW5jZTwvbGk+XHJcbiAgICAgICAgICogICAgIDxsaT4qKi4uLioqOiBhbnkgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGZyb20gdGhlIG9wdGlvbnMgb2JqZWN0IHdoZW4gY3JlYXRpbmcgdGhlXHJcbiAgICAgICAgICogICAgICAgY2FjaGUuPC9saT5cclxuICAgICAgICAgKiAgIDwvdWw+XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5mbzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBzdGF0cywge3NpemU6IHNpemV9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIG1ha2VzIHRoZSBgZW50cnlgIHRoZSBmcmVzaEVuZCBvZiB0aGUgTFJVIGxpbmtlZCBsaXN0XHJcbiAgICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiByZWZyZXNoKGVudHJ5KSB7XHJcbiAgICAgICAgaWYgKGVudHJ5ICE9IGZyZXNoRW5kKSB7XHJcbiAgICAgICAgICBpZiAoIXN0YWxlRW5kKSB7XHJcbiAgICAgICAgICAgIHN0YWxlRW5kID0gZW50cnk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0YWxlRW5kID09IGVudHJ5KSB7XHJcbiAgICAgICAgICAgIHN0YWxlRW5kID0gZW50cnkubjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBsaW5rKGVudHJ5Lm4sIGVudHJ5LnApO1xyXG4gICAgICAgICAgbGluayhlbnRyeSwgZnJlc2hFbmQpO1xyXG4gICAgICAgICAgZnJlc2hFbmQgPSBlbnRyeTtcclxuICAgICAgICAgIGZyZXNoRW5kLm4gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBiaWRpcmVjdGlvbmFsbHkgbGlua3MgdHdvIGVudHJpZXMgb2YgdGhlIExSVSBsaW5rZWQgbGlzdFxyXG4gICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gbGluayhuZXh0RW50cnksIHByZXZFbnRyeSkge1xyXG4gICAgICAgIGlmIChuZXh0RW50cnkgIT0gcHJldkVudHJ5KSB7XHJcbiAgICAgICAgICBpZiAobmV4dEVudHJ5KSBuZXh0RW50cnkucCA9IHByZXZFbnRyeTsgLy9wIHN0YW5kcyBmb3IgcHJldmlvdXMsICdwcmV2JyBkaWRuJ3QgbWluaWZ5XHJcbiAgICAgICAgICBpZiAocHJldkVudHJ5KSBwcmV2RW50cnkubiA9IG5leHRFbnRyeTsgLy9uIHN0YW5kcyBmb3IgbmV4dCwgJ25leHQnIGRpZG4ndCBtaW5pZnlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5I2luZm9cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEdldCBpbmZvcm1hdGlvbiBhYm91dCBhbGwgdGhlIGNhY2hlcyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSAtIGtleS12YWx1ZSBtYXAgb2YgYGNhY2hlSWRgIHRvIHRoZSByZXN1bHQgb2YgY2FsbGluZyBgY2FjaGUjaW5mb2BcclxuICAgKi9cclxuICAgIGNhY2hlRmFjdG9yeS5pbmZvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBpbmZvID0ge307XHJcbiAgICAgIGZvckVhY2goY2FjaGVzLCBmdW5jdGlvbihjYWNoZSwgY2FjaGVJZCkge1xyXG4gICAgICAgIGluZm9bY2FjaGVJZF0gPSBjYWNoZS5pbmZvKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gaW5mbztcclxuICAgIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGNhY2hlRmFjdG9yeSNnZXRcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEdldCBhY2Nlc3MgdG8gYSBjYWNoZSBvYmplY3QgYnkgdGhlIGBjYWNoZUlkYCB1c2VkIHdoZW4gaXQgd2FzIGNyZWF0ZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVJZCBOYW1lIG9yIGlkIG9mIGEgY2FjaGUgdG8gYWNjZXNzLlxyXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IENhY2hlIG9iamVjdCBpZGVudGlmaWVkIGJ5IHRoZSBjYWNoZUlkIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoIGNhY2hlLlxyXG4gICAqL1xyXG4gICAgY2FjaGVGYWN0b3J5LmdldCA9IGZ1bmN0aW9uKGNhY2hlSWQpIHtcclxuICAgICAgcmV0dXJuIGNhY2hlc1tjYWNoZUlkXTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBjYWNoZUZhY3Rvcnk7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICR0ZW1wbGF0ZUNhY2hlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgZmlyc3QgdGltZSBhIHRlbXBsYXRlIGlzIHVzZWQsIGl0IGlzIGxvYWRlZCBpbiB0aGUgdGVtcGxhdGUgY2FjaGUgZm9yIHF1aWNrIHJldHJpZXZhbC4gWW91XHJcbiAqIGNhbiBsb2FkIHRlbXBsYXRlcyBkaXJlY3RseSBpbnRvIHRoZSBjYWNoZSBpbiBhIGBzY3JpcHRgIHRhZywgb3IgYnkgY29uc3VtaW5nIHRoZVxyXG4gKiBgJHRlbXBsYXRlQ2FjaGVgIHNlcnZpY2UgZGlyZWN0bHkuXHJcbiAqXHJcbiAqIEFkZGluZyB2aWEgdGhlIGBzY3JpcHRgIHRhZzpcclxuICpcclxuICogYGBgaHRtbFxyXG4gKiAgIDxzY3JpcHQgdHlwZT1cInRleHQvbmctdGVtcGxhdGVcIiBpZD1cInRlbXBsYXRlSWQuaHRtbFwiPlxyXG4gKiAgICAgPHA+VGhpcyBpcyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGU8L3A+XHJcbiAqICAgPC9zY3JpcHQ+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAqKk5vdGU6KiogdGhlIGBzY3JpcHRgIHRhZyBjb250YWluaW5nIHRoZSB0ZW1wbGF0ZSBkb2VzIG5vdCBuZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBgaGVhZGAgb2ZcclxuICogdGhlIGRvY3VtZW50LCBidXQgaXQgbXVzdCBiZSBiZWxvdyB0aGUgYG5nLWFwcGAgZGVmaW5pdGlvbi5cclxuICpcclxuICogQWRkaW5nIHZpYSB0aGUgJHRlbXBsYXRlQ2FjaGUgc2VydmljZTpcclxuICpcclxuICogYGBganNcclxuICogdmFyIG15QXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJywgW10pO1xyXG4gKiBteUFwcC5ydW4oZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuICogICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3RlbXBsYXRlSWQuaHRtbCcsICdUaGlzIGlzIHRoZSBjb250ZW50IG9mIHRoZSB0ZW1wbGF0ZScpO1xyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIFRvIHJldHJpZXZlIHRoZSB0ZW1wbGF0ZSBsYXRlciwgc2ltcGx5IHVzZSBpdCBpbiB5b3VyIEhUTUw6XHJcbiAqIGBgYGh0bWxcclxuICogPGRpdiBuZy1pbmNsdWRlPVwiICd0ZW1wbGF0ZUlkLmh0bWwnIFwiPjwvZGl2PlxyXG4gKiBgYGBcclxuICpcclxuICogb3IgZ2V0IGl0IHZpYSBKYXZhc2NyaXB0OlxyXG4gKiBgYGBqc1xyXG4gKiAkdGVtcGxhdGVDYWNoZS5nZXQoJ3RlbXBsYXRlSWQuaHRtbCcpXHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBTZWUge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgJGNhY2hlRmFjdG9yeX0uXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRjYWNoZUZhY3RvcnkpIHtcclxuICAgIHJldHVybiAkY2FjaGVGYWN0b3J5KCd0ZW1wbGF0ZXMnKTtcclxuICB9XTtcclxufVxyXG5cclxuLyogISBWQVJJQUJMRS9GVU5DVElPTiBOQU1JTkcgQ09OVkVOVElPTlMgVEhBVCBBUFBMWSBUTyBUSElTIEZJTEUhXHJcbiAqXHJcbiAqIERPTS1yZWxhdGVkIHZhcmlhYmxlczpcclxuICpcclxuICogLSBcIm5vZGVcIiAtIERPTSBOb2RlXHJcbiAqIC0gXCJlbGVtZW50XCIgLSBET00gRWxlbWVudCBvciBOb2RlXHJcbiAqIC0gXCIkbm9kZVwiIG9yIFwiJGVsZW1lbnRcIiAtIGpxTGl0ZS13cmFwcGVkIG5vZGUgb3IgZWxlbWVudFxyXG4gKlxyXG4gKlxyXG4gKiBDb21waWxlciByZWxhdGVkIHN0dWZmOlxyXG4gKlxyXG4gKiAtIFwibGlua0ZuXCIgLSBsaW5raW5nIGZuIG9mIGEgc2luZ2xlIGRpcmVjdGl2ZVxyXG4gKiAtIFwibm9kZUxpbmtGblwiIC0gZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGFsbCBsaW5raW5nIGZucyBmb3IgYSBwYXJ0aWN1bGFyIG5vZGVcclxuICogLSBcImNoaWxkTGlua0ZuXCIgLSAgZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGFsbCBsaW5raW5nIGZucyBmb3IgY2hpbGQgbm9kZXMgb2YgYSBwYXJ0aWN1bGFyIG5vZGVcclxuICogLSBcImNvbXBvc2l0ZUxpbmtGblwiIC0gZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGFsbCBsaW5raW5nIGZucyBmb3IgYSBjb21waWxhdGlvbiByb290IChub2RlTGlzdClcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRjb21waWxlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDb21waWxlcyBhbiBIVE1MIHN0cmluZyBvciBET00gaW50byBhIHRlbXBsYXRlIGFuZCBwcm9kdWNlcyBhIHRlbXBsYXRlIGZ1bmN0aW9uLCB3aGljaFxyXG4gKiBjYW4gdGhlbiBiZSB1c2VkIHRvIGxpbmsge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgYHNjb3BlYH0gYW5kIHRoZSB0ZW1wbGF0ZSB0b2dldGhlci5cclxuICpcclxuICogVGhlIGNvbXBpbGF0aW9uIGlzIGEgcHJvY2VzcyBvZiB3YWxraW5nIHRoZSBET00gdHJlZSBhbmQgbWF0Y2hpbmcgRE9NIGVsZW1lbnRzIHRvXHJcbiAqIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIFRoaXMgZG9jdW1lbnQgaXMgYW4gaW4tZGVwdGggcmVmZXJlbmNlIG9mIGFsbCBkaXJlY3RpdmUgb3B0aW9ucy5cclxuICogRm9yIGEgZ2VudGxlIGludHJvZHVjdGlvbiB0byBkaXJlY3RpdmVzIHdpdGggZXhhbXBsZXMgb2YgY29tbW9uIHVzZSBjYXNlcyxcclxuICogc2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZSBndWlkZX0uXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiAjIyBDb21wcmVoZW5zaXZlIERpcmVjdGl2ZSBBUElcclxuICpcclxuICogVGhlcmUgYXJlIG1hbnkgZGlmZmVyZW50IG9wdGlvbnMgZm9yIGEgZGlyZWN0aXZlLlxyXG4gKlxyXG4gKiBUaGUgZGlmZmVyZW5jZSByZXNpZGVzIGluIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZhY3RvcnkgZnVuY3Rpb24uXHJcbiAqIFlvdSBjYW4gZWl0aGVyIHJldHVybiBhIFwiRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0XCIgKHNlZSBiZWxvdykgdGhhdCBkZWZpbmVzIHRoZSBkaXJlY3RpdmUgcHJvcGVydGllcyxcclxuICogb3IganVzdCB0aGUgYHBvc3RMaW5rYCBmdW5jdGlvbiAoYWxsIG90aGVyIHByb3BlcnRpZXMgd2lsbCBoYXZlIHRoZSBkZWZhdWx0IHZhbHVlcykuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzXCI+XHJcbiAqICoqQmVzdCBQcmFjdGljZToqKiBJdCdzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgXCJkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3RcIiBmb3JtLlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogSGVyZSdzIGFuIGV4YW1wbGUgZGlyZWN0aXZlIGRlY2xhcmVkIHdpdGggYSBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3Q6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoLi4uKTtcclxuICpcclxuICogICBteU1vZHVsZS5kaXJlY3RpdmUoJ2RpcmVjdGl2ZU5hbWUnLCBmdW5jdGlvbiBmYWN0b3J5KGluamVjdGFibGVzKSB7XHJcbiAqICAgICB2YXIgZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdCA9IHtcclxuICogICAgICAgcHJpb3JpdHk6IDAsXHJcbiAqICAgICAgIHRlbXBsYXRlOiAnPGRpdj48L2Rpdj4nLCAvLyBvciAvLyBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7IC4uLiB9LFxyXG4gKiAgICAgICAvLyBvclxyXG4gKiAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ2RpcmVjdGl2ZS5odG1sJywgLy8gb3IgLy8gZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykgeyAuLi4gfSxcclxuICogICAgICAgdHJhbnNjbHVkZTogZmFsc2UsXHJcbiAqICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAqICAgICAgIHNjb3BlOiBmYWxzZSxcclxuICogICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkdHJhbnNjbHVkZSwgb3RoZXJJbmplY3RhYmxlcykgeyAuLi4gfSxcclxuICogICAgICAgY29udHJvbGxlckFzOiAnc3RyaW5nQWxpYXMnLFxyXG4gKiAgICAgICByZXF1aXJlOiAnc2libGluZ0RpcmVjdGl2ZU5hbWUnLCAvLyBvciAvLyBbJ15wYXJlbnREaXJlY3RpdmVOYW1lJywgJz9vcHRpb25hbERpcmVjdGl2ZU5hbWUnLCAnP15vcHRpb25hbFBhcmVudCddLFxyXG4gKiAgICAgICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKHRFbGVtZW50LCB0QXR0cnMsIHRyYW5zY2x1ZGUpIHtcclxuICogICAgICAgICByZXR1cm4ge1xyXG4gKiAgICAgICAgICAgcHJlOiBmdW5jdGlvbiBwcmVMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9LFxyXG4gKiAgICAgICAgICAgcG9zdDogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH1cclxuICogICAgICAgICB9XHJcbiAqICAgICAgICAgLy8gb3JcclxuICogICAgICAgICAvLyByZXR1cm4gZnVuY3Rpb24gcG9zdExpbmsoIC4uLiApIHsgLi4uIH1cclxuICogICAgICAgfSxcclxuICogICAgICAgLy8gb3JcclxuICogICAgICAgLy8gbGluazoge1xyXG4gKiAgICAgICAvLyAgcHJlOiBmdW5jdGlvbiBwcmVMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9LFxyXG4gKiAgICAgICAvLyAgcG9zdDogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH1cclxuICogICAgICAgLy8gfVxyXG4gKiAgICAgICAvLyBvclxyXG4gKiAgICAgICAvLyBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayggLi4uICkgeyAuLi4gfVxyXG4gKiAgICAgfTtcclxuICogICAgIHJldHVybiBkaXJlY3RpdmVEZWZpbml0aW9uT2JqZWN0O1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIEFueSB1bnNwZWNpZmllZCBvcHRpb25zIHdpbGwgdXNlIHRoZSBkZWZhdWx0IHZhbHVlLiBZb3UgY2FuIHNlZSB0aGUgZGVmYXVsdCB2YWx1ZXMgYmVsb3cuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBUaGVyZWZvcmUgdGhlIGFib3ZlIGNhbiBiZSBzaW1wbGlmaWVkIGFzOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKC4uLik7XHJcbiAqXHJcbiAqICAgbXlNb2R1bGUuZGlyZWN0aXZlKCdkaXJlY3RpdmVOYW1lJywgZnVuY3Rpb24gZmFjdG9yeShpbmplY3RhYmxlcykge1xyXG4gKiAgICAgdmFyIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3QgPSB7XHJcbiAqICAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzKSB7IC4uLiB9XHJcbiAqICAgICB9O1xyXG4gKiAgICAgcmV0dXJuIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3Q7XHJcbiAqICAgICAvLyBvclxyXG4gKiAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzKSB7IC4uLiB9XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMgRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0XHJcbiAqXHJcbiAqIFRoZSBkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3QgcHJvdmlkZXMgaW5zdHJ1Y3Rpb25zIHRvIHRoZSB7QGxpbmsgbmcuJGNvbXBpbGVcclxuICogY29tcGlsZXJ9LiBUaGUgYXR0cmlidXRlcyBhcmU6XHJcbiAqXHJcbiAqICMjIyMgYG11bHRpRWxlbWVudGBcclxuICogV2hlbiB0aGlzIHByb3BlcnR5IGlzIHNldCB0byB0cnVlLCB0aGUgSFRNTCBjb21waWxlciB3aWxsIGNvbGxlY3QgRE9NIG5vZGVzIGJldHdlZW5cclxuICogbm9kZXMgd2l0aCB0aGUgYXR0cmlidXRlcyBgZGlyZWN0aXZlLW5hbWUtc3RhcnRgIGFuZCBgZGlyZWN0aXZlLW5hbWUtZW5kYCwgYW5kIGdyb3VwIHRoZW1cclxuICogdG9nZXRoZXIgYXMgdGhlIGRpcmVjdGl2ZSBlbGVtZW50cy4gSXQgaXMgcmVjb21lbmRlZCB0aGF0IHRoaXMgZmVhdHVyZSBiZSB1c2VkIG9uIGRpcmVjdGl2ZXNcclxuICogd2hpY2ggYXJlIG5vdCBzdHJpY3RseSBiZWhhdmlvdXJhbCAoc3VjaCBhcyB7QGxpbmsgYXBpL25nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9KSwgYW5kIHdoaWNoXHJcbiAqIGRvIG5vdCBtYW5pcHVsYXRlIG9yIHJlcGxhY2UgY2hpbGQgbm9kZXMgKHN1Y2ggYXMge0BsaW5rIGFwaS9uZy5kaXJlY3RpdmU6bmdJbmNsdWRlIG5nSW5jbHVkZX0pLlxyXG4gKlxyXG4gKiAjIyMjIGBwcmlvcml0eWBcclxuICogV2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgZGlyZWN0aXZlcyBkZWZpbmVkIG9uIGEgc2luZ2xlIERPTSBlbGVtZW50LCBzb21ldGltZXMgaXRcclxuICogaXMgbmVjZXNzYXJ5IHRvIHNwZWNpZnkgdGhlIG9yZGVyIGluIHdoaWNoIHRoZSBkaXJlY3RpdmVzIGFyZSBhcHBsaWVkLiBUaGUgYHByaW9yaXR5YCBpcyB1c2VkXHJcbiAqIHRvIHNvcnQgdGhlIGRpcmVjdGl2ZXMgYmVmb3JlIHRoZWlyIGBjb21waWxlYCBmdW5jdGlvbnMgZ2V0IGNhbGxlZC4gUHJpb3JpdHkgaXMgZGVmaW5lZCBhcyBhXHJcbiAqIG51bWJlci4gRGlyZWN0aXZlcyB3aXRoIGdyZWF0ZXIgbnVtZXJpY2FsIGBwcmlvcml0eWAgYXJlIGNvbXBpbGVkIGZpcnN0LiBQcmUtbGluayBmdW5jdGlvbnNcclxuICogYXJlIGFsc28gcnVuIGluIHByaW9yaXR5IG9yZGVyLCBidXQgcG9zdC1saW5rIGZ1bmN0aW9ucyBhcmUgcnVuIGluIHJldmVyc2Ugb3JkZXIuIFRoZSBvcmRlclxyXG4gKiBvZiBkaXJlY3RpdmVzIHdpdGggdGhlIHNhbWUgcHJpb3JpdHkgaXMgdW5kZWZpbmVkLiBUaGUgZGVmYXVsdCBwcmlvcml0eSBpcyBgMGAuXHJcbiAqXHJcbiAqICMjIyMgYHRlcm1pbmFsYFxyXG4gKiBJZiBzZXQgdG8gdHJ1ZSB0aGVuIHRoZSBjdXJyZW50IGBwcmlvcml0eWAgd2lsbCBiZSB0aGUgbGFzdCBzZXQgb2YgZGlyZWN0aXZlc1xyXG4gKiB3aGljaCB3aWxsIGV4ZWN1dGUgKGFueSBkaXJlY3RpdmVzIGF0IHRoZSBjdXJyZW50IHByaW9yaXR5IHdpbGwgc3RpbGwgZXhlY3V0ZVxyXG4gKiBhcyB0aGUgb3JkZXIgb2YgZXhlY3V0aW9uIG9uIHNhbWUgYHByaW9yaXR5YCBpcyB1bmRlZmluZWQpLlxyXG4gKlxyXG4gKiAjIyMjIGBzY29wZWBcclxuICogKipJZiBzZXQgdG8gYHRydWVgLCoqIHRoZW4gYSBuZXcgc2NvcGUgd2lsbCBiZSBjcmVhdGVkIGZvciB0aGlzIGRpcmVjdGl2ZS4gSWYgbXVsdGlwbGUgZGlyZWN0aXZlcyBvbiB0aGVcclxuICogc2FtZSBlbGVtZW50IHJlcXVlc3QgYSBuZXcgc2NvcGUsIG9ubHkgb25lIG5ldyBzY29wZSBpcyBjcmVhdGVkLiBUaGUgbmV3IHNjb3BlIHJ1bGUgZG9lcyBub3RcclxuICogYXBwbHkgZm9yIHRoZSByb290IG9mIHRoZSB0ZW1wbGF0ZSBzaW5jZSB0aGUgcm9vdCBvZiB0aGUgdGVtcGxhdGUgYWx3YXlzIGdldHMgYSBuZXcgc2NvcGUuXHJcbiAqXHJcbiAqICoqSWYgc2V0IHRvIGB7fWAgKG9iamVjdCBoYXNoKSwqKiB0aGVuIGEgbmV3IFwiaXNvbGF0ZVwiIHNjb3BlIGlzIGNyZWF0ZWQuIFRoZSAnaXNvbGF0ZScgc2NvcGUgZGlmZmVycyBmcm9tXHJcbiAqIG5vcm1hbCBzY29wZSBpbiB0aGF0IGl0IGRvZXMgbm90IHByb3RvdHlwaWNhbGx5IGluaGVyaXQgZnJvbSB0aGUgcGFyZW50IHNjb3BlLiBUaGlzIGlzIHVzZWZ1bFxyXG4gKiB3aGVuIGNyZWF0aW5nIHJldXNhYmxlIGNvbXBvbmVudHMsIHdoaWNoIHNob3VsZCBub3QgYWNjaWRlbnRhbGx5IHJlYWQgb3IgbW9kaWZ5IGRhdGEgaW4gdGhlXHJcbiAqIHBhcmVudCBzY29wZS5cclxuICpcclxuICogVGhlICdpc29sYXRlJyBzY29wZSB0YWtlcyBhbiBvYmplY3QgaGFzaCB3aGljaCBkZWZpbmVzIGEgc2V0IG9mIGxvY2FsIHNjb3BlIHByb3BlcnRpZXNcclxuICogZGVyaXZlZCBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuIFRoZXNlIGxvY2FsIHByb3BlcnRpZXMgYXJlIHVzZWZ1bCBmb3IgYWxpYXNpbmcgdmFsdWVzIGZvclxyXG4gKiB0ZW1wbGF0ZXMuIExvY2FscyBkZWZpbml0aW9uIGlzIGEgaGFzaCBvZiBsb2NhbCBzY29wZSBwcm9wZXJ0eSB0byBpdHMgc291cmNlOlxyXG4gKlxyXG4gKiAqIGBAYCBvciBgQGF0dHJgIC0gYmluZCBhIGxvY2FsIHNjb3BlIHByb3BlcnR5IHRvIHRoZSB2YWx1ZSBvZiBET00gYXR0cmlidXRlLiBUaGUgcmVzdWx0IGlzXHJcbiAqICAgYWx3YXlzIGEgc3RyaW5nIHNpbmNlIERPTSBhdHRyaWJ1dGVzIGFyZSBzdHJpbmdzLiBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgIHRoZW4gdGhlXHJcbiAqICAgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZS5cclxuICogICBHaXZlbiBgPHdpZGdldCBteS1hdHRyPVwiaGVsbG8ge3tuYW1lfX1cIj5gIGFuZCB3aWRnZXQgZGVmaW5pdGlvblxyXG4gKiAgIG9mIGBzY29wZTogeyBsb2NhbE5hbWU6J0BteUF0dHInIH1gLCB0aGVuIHdpZGdldCBzY29wZSBwcm9wZXJ0eSBgbG9jYWxOYW1lYCB3aWxsIHJlZmxlY3RcclxuICogICB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIGBoZWxsbyB7e25hbWV9fWAuIEFzIHRoZSBgbmFtZWAgYXR0cmlidXRlIGNoYW5nZXMgc28gd2lsbCB0aGVcclxuICogICBgbG9jYWxOYW1lYCBwcm9wZXJ0eSBvbiB0aGUgd2lkZ2V0IHNjb3BlLiBUaGUgYG5hbWVgIGlzIHJlYWQgZnJvbSB0aGUgcGFyZW50IHNjb3BlIChub3RcclxuICogICBjb21wb25lbnQgc2NvcGUpLlxyXG4gKlxyXG4gKiAqIGA9YCBvciBgPWF0dHJgIC0gc2V0IHVwIGJpLWRpcmVjdGlvbmFsIGJpbmRpbmcgYmV0d2VlbiBhIGxvY2FsIHNjb3BlIHByb3BlcnR5IGFuZCB0aGVcclxuICogICBwYXJlbnQgc2NvcGUgcHJvcGVydHkgb2YgbmFtZSBkZWZpbmVkIHZpYSB0aGUgdmFsdWUgb2YgdGhlIGBhdHRyYCBhdHRyaWJ1dGUuIElmIG5vIGBhdHRyYFxyXG4gKiAgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsIG5hbWUuXHJcbiAqICAgR2l2ZW4gYDx3aWRnZXQgbXktYXR0cj1cInBhcmVudE1vZGVsXCI+YCBhbmQgd2lkZ2V0IGRlZmluaXRpb24gb2ZcclxuICogICBgc2NvcGU6IHsgbG9jYWxNb2RlbDonPW15QXR0cicgfWAsIHRoZW4gd2lkZ2V0IHNjb3BlIHByb3BlcnR5IGBsb2NhbE1vZGVsYCB3aWxsIHJlZmxlY3QgdGhlXHJcbiAqICAgdmFsdWUgb2YgYHBhcmVudE1vZGVsYCBvbiB0aGUgcGFyZW50IHNjb3BlLiBBbnkgY2hhbmdlcyB0byBgcGFyZW50TW9kZWxgIHdpbGwgYmUgcmVmbGVjdGVkXHJcbiAqICAgaW4gYGxvY2FsTW9kZWxgIGFuZCBhbnkgY2hhbmdlcyBpbiBgbG9jYWxNb2RlbGAgd2lsbCByZWZsZWN0IGluIGBwYXJlbnRNb2RlbGAuIElmIHRoZSBwYXJlbnRcclxuICogICBzY29wZSBwcm9wZXJ0eSBkb2Vzbid0IGV4aXN0LCBpdCB3aWxsIHRocm93IGEgTk9OX0FTU0lHTkFCTEVfTU9ERUxfRVhQUkVTU0lPTiBleGNlcHRpb24uIFlvdVxyXG4gKiAgIGNhbiBhdm9pZCB0aGlzIGJlaGF2aW9yIHVzaW5nIGA9P2Agb3IgYD0/YXR0cmAgaW4gb3JkZXIgdG8gZmxhZyB0aGUgcHJvcGVydHkgYXMgb3B0aW9uYWwuXHJcbiAqXHJcbiAqICogYCZgIG9yIGAmYXR0cmAgLSBwcm92aWRlcyBhIHdheSB0byBleGVjdXRlIGFuIGV4cHJlc3Npb24gaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS5cclxuICogICBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGVcclxuICogICBsb2NhbCBuYW1lLiBHaXZlbiBgPHdpZGdldCBteS1hdHRyPVwiY291bnQgPSBjb3VudCArIHZhbHVlXCI+YCBhbmQgd2lkZ2V0IGRlZmluaXRpb24gb2ZcclxuICogICBgc2NvcGU6IHsgbG9jYWxGbjonJm15QXR0cicgfWAsIHRoZW4gaXNvbGF0ZSBzY29wZSBwcm9wZXJ0eSBgbG9jYWxGbmAgd2lsbCBwb2ludCB0b1xyXG4gKiAgIGEgZnVuY3Rpb24gd3JhcHBlciBmb3IgdGhlIGBjb3VudCA9IGNvdW50ICsgdmFsdWVgIGV4cHJlc3Npb24uIE9mdGVuIGl0J3MgZGVzaXJhYmxlIHRvXHJcbiAqICAgcGFzcyBkYXRhIGZyb20gdGhlIGlzb2xhdGVkIHNjb3BlIHZpYSBhbiBleHByZXNzaW9uIHRvIHRoZSBwYXJlbnQgc2NvcGUsIHRoaXMgY2FuIGJlXHJcbiAqICAgZG9uZSBieSBwYXNzaW5nIGEgbWFwIG9mIGxvY2FsIHZhcmlhYmxlIG5hbWVzIGFuZCB2YWx1ZXMgaW50byB0aGUgZXhwcmVzc2lvbiB3cmFwcGVyIGZuLlxyXG4gKiAgIEZvciBleGFtcGxlLCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBgaW5jcmVtZW50KGFtb3VudClgIHRoZW4gd2UgY2FuIHNwZWNpZnkgdGhlIGFtb3VudCB2YWx1ZVxyXG4gKiAgIGJ5IGNhbGxpbmcgdGhlIGBsb2NhbEZuYCBhcyBgbG9jYWxGbih7YW1vdW50OiAyMn0pYC5cclxuICpcclxuICpcclxuICogIyMjIyBgYmluZFRvQ29udHJvbGxlcmBcclxuICogV2hlbiBhbiBpc29sYXRlIHNjb3BlIGlzIHVzZWQgZm9yIGEgY29tcG9uZW50IChzZWUgYWJvdmUpLCBhbmQgYGNvbnRyb2xsZXJBc2AgaXMgdXNlZCwgYGJpbmRUb0NvbnRyb2xsZXJgIHdpbGxcclxuICogYWxsb3cgYSBjb21wb25lbnQgdG8gaGF2ZSBpdHMgcHJvcGVydGllcyBib3VuZCB0byB0aGUgY29udHJvbGxlciwgcmF0aGVyIHRoYW4gdG8gc2NvcGUuIFdoZW4gdGhlIGNvbnRyb2xsZXJcclxuICogaXMgaW5zdGFudGlhdGVkLCB0aGUgaW5pdGlhbCB2YWx1ZXMgb2YgdGhlIGlzb2xhdGUgc2NvcGUgYmluZGluZ3MgYXJlIGFscmVhZHkgYXZhaWxhYmxlLlxyXG4gKlxyXG4gKiAjIyMjIGBjb250cm9sbGVyYFxyXG4gKiBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLiBUaGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYmVmb3JlIHRoZVxyXG4gKiBwcmUtbGlua2luZyBwaGFzZSBhbmQgaXQgaXMgc2hhcmVkIHdpdGggb3RoZXIgZGlyZWN0aXZlcyAoc2VlXHJcbiAqIGByZXF1aXJlYCBhdHRyaWJ1dGUpLiBUaGlzIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byBjb21tdW5pY2F0ZSB3aXRoIGVhY2ggb3RoZXIgYW5kIGF1Z21lbnRcclxuICogZWFjaCBvdGhlcidzIGJlaGF2aW9yLiBUaGUgY29udHJvbGxlciBpcyBpbmplY3RhYmxlIChhbmQgc3VwcG9ydHMgYnJhY2tldCBub3RhdGlvbikgd2l0aCB0aGUgZm9sbG93aW5nIGxvY2FsczpcclxuICpcclxuICogKiBgJHNjb3BlYCAtIEN1cnJlbnQgc2NvcGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50XHJcbiAqICogYCRlbGVtZW50YCAtIEN1cnJlbnQgZWxlbWVudFxyXG4gKiAqIGAkYXR0cnNgIC0gQ3VycmVudCBhdHRyaWJ1dGVzIG9iamVjdCBmb3IgdGhlIGVsZW1lbnRcclxuICogKiBgJHRyYW5zY2x1ZGVgIC0gQSB0cmFuc2NsdWRlIGxpbmtpbmcgZnVuY3Rpb24gcHJlLWJvdW5kIHRvIHRoZSBjb3JyZWN0IHRyYW5zY2x1c2lvbiBzY29wZTpcclxuICogICBgZnVuY3Rpb24oW3Njb3BlXSwgY2xvbmVMaW5raW5nRm4sIGZ1dHVyZVBhcmVudEVsZW1lbnQpYC5cclxuICogICAgKiBgc2NvcGVgOiBvcHRpb25hbCBhcmd1bWVudCB0byBvdmVycmlkZSB0aGUgc2NvcGUuXHJcbiAqICAgICogYGNsb25lTGlua2luZ0ZuYDogb3B0aW9uYWwgYXJndW1lbnQgdG8gY3JlYXRlIGNsb25lcyBvZiB0aGUgb3JpZ2luYWwgdHJhbnNjbHVkZWQgY29udGVudC5cclxuICogICAgKiBgZnV0dXJlUGFyZW50RWxlbWVudGA6XHJcbiAqICAgICAgICAqIGRlZmluZXMgdGhlIHBhcmVudCB0byB3aGljaCB0aGUgYGNsb25lTGlua2luZ0ZuYCB3aWxsIGFkZCB0aGUgY2xvbmVkIGVsZW1lbnRzLlxyXG4gKiAgICAgICAgKiBkZWZhdWx0OiBgJGVsZW1lbnQucGFyZW50KClgIHJlc3AuIGAkZWxlbWVudGAgZm9yIGB0cmFuc2NsdWRlOidlbGVtZW50J2AgcmVzcC4gYHRyYW5zY2x1ZGU6dHJ1ZWAuXHJcbiAqICAgICAgICAqIG9ubHkgbmVlZGVkIGZvciB0cmFuc2NsdWRlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gbm9uIGh0bWwgZWxlbWVudHMgKGUuZy4gU1ZHIGVsZW1lbnRzKVxyXG4gKiAgICAgICAgICBhbmQgd2hlbiB0aGUgYGNsb25lTGlua2luRm5gIGlzIHBhc3NlZCxcclxuICogICAgICAgICAgYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBjcmVhdGVkIGFuZCBjbG9uZWQgaW4gYSBzcGVjaWFsIHdheSB3aGVuIHRoZXkgYXJlIGRlZmluZWQgb3V0c2lkZSB0aGVpclxyXG4gKiAgICAgICAgICB1c3VhbCBjb250YWluZXJzIChlLmcuIGxpa2UgYDxzdmc+YCkuXHJcbiAqICAgICAgICAqIFNlZSBhbHNvIHRoZSBgZGlyZWN0aXZlLnRlbXBsYXRlTmFtZXNwYWNlYCBwcm9wZXJ0eS5cclxuICpcclxuICpcclxuICogIyMjIyBgcmVxdWlyZWBcclxuICogUmVxdWlyZSBhbm90aGVyIGRpcmVjdGl2ZSBhbmQgaW5qZWN0IGl0cyBjb250cm9sbGVyIGFzIHRoZSBmb3VydGggYXJndW1lbnQgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZVxyXG4gKiBgcmVxdWlyZWAgdGFrZXMgYSBzdHJpbmcgbmFtZSAob3IgYXJyYXkgb2Ygc3RyaW5ncykgb2YgdGhlIGRpcmVjdGl2ZShzKSB0byBwYXNzIGluLiBJZiBhbiBhcnJheSBpcyB1c2VkLCB0aGVcclxuICogaW5qZWN0ZWQgYXJndW1lbnQgd2lsbCBiZSBhbiBhcnJheSBpbiBjb3JyZXNwb25kaW5nIG9yZGVyLiBJZiBubyBzdWNoIGRpcmVjdGl2ZSBjYW4gYmVcclxuICogZm91bmQsIG9yIGlmIHRoZSBkaXJlY3RpdmUgZG9lcyBub3QgaGF2ZSBhIGNvbnRyb2xsZXIsIHRoZW4gYW4gZXJyb3IgaXMgcmFpc2VkLiBUaGUgbmFtZSBjYW4gYmUgcHJlZml4ZWQgd2l0aDpcclxuICpcclxuICogKiAobm8gcHJlZml4KSAtIExvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBvbiB0aGUgY3VycmVudCBlbGVtZW50LiBUaHJvdyBhbiBlcnJvciBpZiBub3QgZm91bmQuXHJcbiAqICogYD9gIC0gQXR0ZW1wdCB0byBsb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgb3IgcGFzcyBgbnVsbGAgdG8gdGhlIGBsaW5rYCBmbiBpZiBub3QgZm91bmQuXHJcbiAqICogYF5gIC0gTG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCBhbmQgaXRzIHBhcmVudHMuIFRocm93IGFuIGVycm9yIGlmIG5vdCBmb3VuZC5cclxuICogKiBgP15gIC0gQXR0ZW1wdCB0byBsb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgYnkgc2VhcmNoaW5nIHRoZSBlbGVtZW50IGFuZCBpdHMgcGFyZW50cyBvciBwYXNzXHJcbiAqICAgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMjIGBjb250cm9sbGVyQXNgXHJcbiAqIENvbnRyb2xsZXIgYWxpYXMgYXQgdGhlIGRpcmVjdGl2ZSBzY29wZS4gQW4gYWxpYXMgZm9yIHRoZSBjb250cm9sbGVyIHNvIGl0XHJcbiAqIGNhbiBiZSByZWZlcmVuY2VkIGF0IHRoZSBkaXJlY3RpdmUgdGVtcGxhdGUuIFRoZSBkaXJlY3RpdmUgbmVlZHMgdG8gZGVmaW5lIGEgc2NvcGUgZm9yIHRoaXNcclxuICogY29uZmlndXJhdGlvbiB0byBiZSB1c2VkLiBVc2VmdWwgaW4gdGhlIGNhc2Ugd2hlbiBkaXJlY3RpdmUgaXMgdXNlZCBhcyBjb21wb25lbnQuXHJcbiAqXHJcbiAqXHJcbiAqICMjIyMgYHJlc3RyaWN0YFxyXG4gKiBTdHJpbmcgb2Ygc3Vic2V0IG9mIGBFQUNNYCB3aGljaCByZXN0cmljdHMgdGhlIGRpcmVjdGl2ZSB0byBhIHNwZWNpZmljIGRpcmVjdGl2ZVxyXG4gKiBkZWNsYXJhdGlvbiBzdHlsZS4gSWYgb21pdHRlZCwgdGhlIGRlZmF1bHRzIChlbGVtZW50cyBhbmQgYXR0cmlidXRlcykgYXJlIHVzZWQuXHJcbiAqXHJcbiAqICogYEVgIC0gRWxlbWVudCBuYW1lIChkZWZhdWx0KTogYDxteS1kaXJlY3RpdmU+PC9teS1kaXJlY3RpdmU+YFxyXG4gKiAqIGBBYCAtIEF0dHJpYnV0ZSAoZGVmYXVsdCk6IGA8ZGl2IG15LWRpcmVjdGl2ZT1cImV4cFwiPjwvZGl2PmBcclxuICogKiBgQ2AgLSBDbGFzczogYDxkaXYgY2xhc3M9XCJteS1kaXJlY3RpdmU6IGV4cDtcIj48L2Rpdj5gXHJcbiAqICogYE1gIC0gQ29tbWVudDogYDwhLS0gZGlyZWN0aXZlOiBteS1kaXJlY3RpdmUgZXhwIC0tPmBcclxuICpcclxuICpcclxuICogIyMjIyBgdGVtcGxhdGVOYW1lc3BhY2VgXHJcbiAqIFN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRvY3VtZW50IHR5cGUgdXNlZCBieSB0aGUgbWFya3VwIGluIHRoZSB0ZW1wbGF0ZS5cclxuICogQW5ndWxhckpTIG5lZWRzIHRoaXMgaW5mb3JtYXRpb24gYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBiZSBjcmVhdGVkIGFuZCBjbG9uZWRcclxuICogaW4gYSBzcGVjaWFsIHdheSB3aGVuIHRoZXkgYXJlIGRlZmluZWQgb3V0c2lkZSB0aGVpciB1c3VhbCBjb250YWluZXJzIGxpa2UgYDxzdmc+YCBhbmQgYDxtYXRoPmAuXHJcbiAqXHJcbiAqICogYGh0bWxgIC0gQWxsIHJvb3Qgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIGFyZSBIVE1MLiBSb290IG5vZGVzIG1heSBhbHNvIGJlXHJcbiAqICAgdG9wLWxldmVsIGVsZW1lbnRzIHN1Y2ggYXMgYDxzdmc+YCBvciBgPG1hdGg+YC5cclxuICogKiBgc3ZnYCAtIFRoZSByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgU1ZHIGVsZW1lbnRzIChleGNsdWRpbmcgYDxtYXRoPmApLlxyXG4gKiAqIGBtYXRoYCAtIFRoZSByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgTWF0aE1MIGVsZW1lbnRzIChleGNsdWRpbmcgYDxzdmc+YCkuXHJcbiAqXHJcbiAqIElmIG5vIGB0ZW1wbGF0ZU5hbWVzcGFjZWAgaXMgc3BlY2lmaWVkLCB0aGVuIHRoZSBuYW1lc3BhY2UgaXMgY29uc2lkZXJlZCB0byBiZSBgaHRtbGAuXHJcbiAqXHJcbiAqICMjIyMgYHRlbXBsYXRlYFxyXG4gKiBIVE1MIG1hcmt1cCB0aGF0IG1heTpcclxuICogKiBSZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCAoZGVmYXVsdCkuXHJcbiAqICogUmVwbGFjZSB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCBpdHNlbGYgKGlmIGByZXBsYWNlYCBpcyB0cnVlIC0gREVQUkVDQVRFRCkuXHJcbiAqICogV3JhcCB0aGUgY29udGVudHMgb2YgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgKGlmIGB0cmFuc2NsdWRlYCBpcyB0cnVlKS5cclxuICpcclxuICogVmFsdWUgbWF5IGJlOlxyXG4gKlxyXG4gKiAqIEEgc3RyaW5nLiBGb3IgZXhhbXBsZSBgPGRpdiByZWQtb24taG92ZXI+e3tkZWxldGVfc3RyfX08L2Rpdj5gLlxyXG4gKiAqIEEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdHdvIGFyZ3VtZW50cyBgdEVsZW1lbnRgIGFuZCBgdEF0dHJzYCAoZGVzY3JpYmVkIGluIHRoZSBgY29tcGlsZWBcclxuICogICBmdW5jdGlvbiBhcGkgYmVsb3cpIGFuZCByZXR1cm5zIGEgc3RyaW5nIHZhbHVlLlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMjIGB0ZW1wbGF0ZVVybGBcclxuICogVGhpcyBpcyBzaW1pbGFyIHRvIGB0ZW1wbGF0ZWAgYnV0IHRoZSB0ZW1wbGF0ZSBpcyBsb2FkZWQgZnJvbSB0aGUgc3BlY2lmaWVkIFVSTCwgYXN5bmNocm9ub3VzbHkuXHJcbiAqXHJcbiAqIEJlY2F1c2UgdGVtcGxhdGUgbG9hZGluZyBpcyBhc3luY2hyb25vdXMgdGhlIGNvbXBpbGVyIHdpbGwgc3VzcGVuZCBjb21waWxhdGlvbiBvZiBkaXJlY3RpdmVzIG9uIHRoYXQgZWxlbWVudFxyXG4gKiBmb3IgbGF0ZXIgd2hlbiB0aGUgdGVtcGxhdGUgaGFzIGJlZW4gcmVzb2x2ZWQuICBJbiB0aGUgbWVhbnRpbWUgaXQgd2lsbCBjb250aW51ZSB0byBjb21waWxlIGFuZCBsaW5rXHJcbiAqIHNpYmxpbmcgYW5kIHBhcmVudCBlbGVtZW50cyBhcyB0aG91Z2ggdGhpcyBlbGVtZW50IGhhZCBub3QgY29udGFpbmVkIGFueSBkaXJlY3RpdmVzLlxyXG4gKlxyXG4gKiBUaGUgY29tcGlsZXIgZG9lcyBub3Qgc3VzcGVuZCB0aGUgZW50aXJlIGNvbXBpbGF0aW9uIHRvIHdhaXQgZm9yIHRlbXBsYXRlcyB0byBiZSBsb2FkZWQgYmVjYXVzZSB0aGlzXHJcbiAqIHdvdWxkIHJlc3VsdCBpbiB0aGUgd2hvbGUgYXBwIFwic3RhbGxpbmdcIiB1bnRpbCBhbGwgdGVtcGxhdGVzIGFyZSBsb2FkZWQgYXN5bmNocm9ub3VzbHkgLSBldmVuIGluIHRoZVxyXG4gKiBjYXNlIHdoZW4gb25seSBvbmUgZGVlcGx5IG5lc3RlZCBkaXJlY3RpdmUgaGFzIGB0ZW1wbGF0ZVVybGAuXHJcbiAqXHJcbiAqIFRlbXBsYXRlIGxvYWRpbmcgaXMgYXN5bmNocm9ub3VzIGV2ZW4gaWYgdGhlIHRlbXBsYXRlIGhhcyBiZWVuIHByZWxvYWRlZCBpbnRvIHRoZSB7QGxpbmsgJHRlbXBsYXRlQ2FjaGV9XHJcbiAqXHJcbiAqIFlvdSBjYW4gc3BlY2lmeSBgdGVtcGxhdGVVcmxgIGFzIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgVVJMIG9yIGFzIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdHdvXHJcbiAqIGFyZ3VtZW50cyBgdEVsZW1lbnRgIGFuZCBgdEF0dHJzYCAoZGVzY3JpYmVkIGluIHRoZSBgY29tcGlsZWAgZnVuY3Rpb24gYXBpIGJlbG93KSBhbmQgcmV0dXJuc1xyXG4gKiBhIHN0cmluZyB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIHVybC4gIEluIGVpdGhlciBjYXNlLCB0aGUgdGVtcGxhdGUgVVJMIGlzIHBhc3NlZCB0aHJvdWdoIHtAbGlua1xyXG4gKiBhcGkvbmcuJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmwgJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9LlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMjIGByZXBsYWNlYCAoWypERVBSRUNBVEVEKiFdLCB3aWxsIGJlIHJlbW92ZWQgaW4gbmV4dCBtYWpvciByZWxlYXNlIC0gaS5lLiB2Mi4wKVxyXG4gKiBzcGVjaWZ5IHdoYXQgdGhlIHRlbXBsYXRlIHNob3VsZCByZXBsYWNlLiBEZWZhdWx0cyB0byBgZmFsc2VgLlxyXG4gKlxyXG4gKiAqIGB0cnVlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuXHJcbiAqICogYGZhbHNlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50LlxyXG4gKlxyXG4gKiBUaGUgcmVwbGFjZW1lbnQgcHJvY2VzcyBtaWdyYXRlcyBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgLyBjbGFzc2VzIGZyb20gdGhlIG9sZCBlbGVtZW50IHRvIHRoZSBuZXdcclxuICogb25lLiBTZWUgdGhlIHtAbGluayBndWlkZS9kaXJlY3RpdmUjY3JlYXRpbmctY3VzdG9tLWRpcmVjdGl2ZXNfY3JlYXRpbmctZGlyZWN0aXZlc190ZW1wbGF0ZS1leHBhbmRpbmctZGlyZWN0aXZlXHJcbiAqIERpcmVjdGl2ZXMgR3VpZGV9IGZvciBhbiBleGFtcGxlLlxyXG4gKlxyXG4gKiBUaGVyZSBhcmUgdmVyeSBmZXcgc2NlbmFyaW9zIHdoZXJlIGVsZW1lbnQgcmVwbGFjZW1lbnQgaXMgcmVxdWlyZWQgZm9yIHRoZSBhcHBsaWNhdGlvbiBmdW5jdGlvbixcclxuICogdGhlIG1haW4gb25lIGJlaW5nIHJldXNhYmxlIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIHVzZWQgd2l0aGluIFNWRyBjb250ZXh0c1xyXG4gKiAoYmVjYXVzZSBTVkcgZG9lc24ndCB3b3JrIHdpdGggY3VzdG9tIGVsZW1lbnRzIGluIHRoZSBET00gdHJlZSkuXHJcbiAqXHJcbiAqICMjIyMgYHRyYW5zY2x1ZGVgXHJcbiAqIGNvbXBpbGUgdGhlIGNvbnRlbnQgb2YgdGhlIGVsZW1lbnQgYW5kIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBkaXJlY3RpdmUuXHJcbiAqIFR5cGljYWxseSB1c2VkIHdpdGgge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1RyYW5zY2x1ZGVcclxuICogbmdUcmFuc2NsdWRlfS4gVGhlIGFkdmFudGFnZSBvZiB0cmFuc2NsdXNpb24gaXMgdGhhdCB0aGUgbGlua2luZyBmdW5jdGlvbiByZWNlaXZlcyBhXHJcbiAqIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiB3aGljaCBpcyBwcmUtYm91bmQgdG8gdGhlIGNvcnJlY3Qgc2NvcGUuIEluIGEgdHlwaWNhbCBzZXR1cCB0aGUgd2lkZ2V0XHJcbiAqIGNyZWF0ZXMgYW4gYGlzb2xhdGVgIHNjb3BlLCBidXQgdGhlIHRyYW5zY2x1c2lvbiBpcyBub3QgYSBjaGlsZCwgYnV0IGEgc2libGluZyBvZiB0aGUgYGlzb2xhdGVgXHJcbiAqIHNjb3BlLiBUaGlzIG1ha2VzIGl0IHBvc3NpYmxlIGZvciB0aGUgd2lkZ2V0IHRvIGhhdmUgcHJpdmF0ZSBzdGF0ZSwgYW5kIHRoZSB0cmFuc2NsdXNpb24gdG9cclxuICogYmUgYm91bmQgdG8gdGhlIHBhcmVudCAocHJlLWBpc29sYXRlYCkgc2NvcGUuXHJcbiAqXHJcbiAqICogYHRydWVgIC0gdHJhbnNjbHVkZSB0aGUgY29udGVudCBvZiB0aGUgZGlyZWN0aXZlLlxyXG4gKiAqIGAnZWxlbWVudCdgIC0gdHJhbnNjbHVkZSB0aGUgd2hvbGUgZWxlbWVudCBpbmNsdWRpbmcgYW55IGRpcmVjdGl2ZXMgZGVmaW5lZCBhdCBsb3dlciBwcmlvcml0eS5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIFdoZW4gdGVzdGluZyBhbiBlbGVtZW50IHRyYW5zY2x1ZGUgZGlyZWN0aXZlIHlvdSBtdXN0IG5vdCBwbGFjZSB0aGUgZGlyZWN0aXZlIGF0IHRoZSByb290IG9mIHRoZVxyXG4gKiBET00gZnJhZ21lbnQgdGhhdCBpcyBiZWluZyBjb21waWxlZC4gU2VlIHtAbGluayBndWlkZS91bml0LXRlc3RpbmcjdGVzdGluZy10cmFuc2NsdXNpb24tZGlyZWN0aXZlc1xyXG4gKiBUZXN0aW5nIFRyYW5zY2x1c2lvbiBEaXJlY3RpdmVzfS5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqICMjIyMgYGNvbXBpbGVgXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7IC4uLiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBkZWFscyB3aXRoIHRyYW5zZm9ybWluZyB0aGUgdGVtcGxhdGUgRE9NLiBTaW5jZSBtb3N0IGRpcmVjdGl2ZXMgZG8gbm90IGRvXHJcbiAqIHRlbXBsYXRlIHRyYW5zZm9ybWF0aW9uLCBpdCBpcyBub3QgdXNlZCBvZnRlbi4gVGhlIGNvbXBpbGUgZnVuY3Rpb24gdGFrZXMgdGhlIGZvbGxvd2luZyBhcmd1bWVudHM6XHJcbiAqXHJcbiAqICAgKiBgdEVsZW1lbnRgIC0gdGVtcGxhdGUgZWxlbWVudCAtIFRoZSBlbGVtZW50IHdoZXJlIHRoZSBkaXJlY3RpdmUgaGFzIGJlZW4gZGVjbGFyZWQuIEl0IGlzXHJcbiAqICAgICBzYWZlIHRvIGRvIHRlbXBsYXRlIHRyYW5zZm9ybWF0aW9uIG9uIHRoZSBlbGVtZW50IGFuZCBjaGlsZCBlbGVtZW50cyBvbmx5LlxyXG4gKlxyXG4gKiAgICogYHRBdHRyc2AgLSB0ZW1wbGF0ZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxyXG4gKiAgICAgYmV0d2VlbiBhbGwgZGlyZWN0aXZlIGNvbXBpbGUgZnVuY3Rpb25zLlxyXG4gKlxyXG4gKiAgICogYHRyYW5zY2x1ZGVgIC0gIFsqREVQUkVDQVRFRCohXSBBIHRyYW5zY2x1ZGUgbGlua2luZyBmdW5jdGlvbjogYGZ1bmN0aW9uKHNjb3BlLCBjbG9uZUxpbmtpbmdGbilgXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqTm90ZToqKiBUaGUgdGVtcGxhdGUgaW5zdGFuY2UgYW5kIHRoZSBsaW5rIGluc3RhbmNlIG1heSBiZSBkaWZmZXJlbnQgb2JqZWN0cyBpZiB0aGUgdGVtcGxhdGUgaGFzXHJcbiAqIGJlZW4gY2xvbmVkLiBGb3IgdGhpcyByZWFzb24gaXQgaXMgKipub3QqKiBzYWZlIHRvIGRvIGFueXRoaW5nIG90aGVyIHRoYW4gRE9NIHRyYW5zZm9ybWF0aW9ucyB0aGF0XHJcbiAqIGFwcGx5IHRvIGFsbCBjbG9uZWQgRE9NIG5vZGVzIHdpdGhpbiB0aGUgY29tcGlsZSBmdW5jdGlvbi4gU3BlY2lmaWNhbGx5LCBET00gbGlzdGVuZXIgcmVnaXN0cmF0aW9uXHJcbiAqIHNob3VsZCBiZSBkb25lIGluIGEgbGlua2luZyBmdW5jdGlvbiByYXRoZXIgdGhhbiBpbiBhIGNvbXBpbGUgZnVuY3Rpb24uXHJcbiAqIDwvZGl2PlxyXG5cclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIFRoZSBjb21waWxlIGZ1bmN0aW9uIGNhbm5vdCBoYW5kbGUgZGlyZWN0aXZlcyB0aGF0IHJlY3Vyc2l2ZWx5IHVzZSB0aGVtc2VsdmVzIGluIHRoZWlyXHJcbiAqIG93biB0ZW1wbGF0ZXMgb3IgY29tcGlsZSBmdW5jdGlvbnMuIENvbXBpbGluZyB0aGVzZSBkaXJlY3RpdmVzIHJlc3VsdHMgaW4gYW4gaW5maW5pdGUgbG9vcCBhbmQgYVxyXG4gKiBzdGFjayBvdmVyZmxvdyBlcnJvcnMuXHJcbiAqXHJcbiAqIFRoaXMgY2FuIGJlIGF2b2lkZWQgYnkgbWFudWFsbHkgdXNpbmcgJGNvbXBpbGUgaW4gdGhlIHBvc3RMaW5rIGZ1bmN0aW9uIHRvIGltcGVyYXRpdmVseSBjb21waWxlXHJcbiAqIGEgZGlyZWN0aXZlJ3MgdGVtcGxhdGUgaW5zdGVhZCBvZiByZWx5aW5nIG9uIGF1dG9tYXRpYyB0ZW1wbGF0ZSBjb21waWxhdGlvbiB2aWEgYHRlbXBsYXRlYCBvclxyXG4gKiBgdGVtcGxhdGVVcmxgIGRlY2xhcmF0aW9uIG9yIG1hbnVhbCBjb21waWxhdGlvbiBpbnNpZGUgdGhlIGNvbXBpbGUgZnVuY3Rpb24uXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZXJyb3JcIj5cclxuICogKipOb3RlOioqIFRoZSBgdHJhbnNjbHVkZWAgZnVuY3Rpb24gdGhhdCBpcyBwYXNzZWQgdG8gdGhlIGNvbXBpbGUgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCwgYXMgaXRcclxuICogICBlLmcuIGRvZXMgbm90IGtub3cgYWJvdXQgdGhlIHJpZ2h0IG91dGVyIHNjb3BlLiBQbGVhc2UgdXNlIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIHRoYXQgaXMgcGFzc2VkXHJcbiAqICAgdG8gdGhlIGxpbmsgZnVuY3Rpb24gaW5zdGVhZC5cclxuICogPC9kaXY+XHJcblxyXG4gKiBBIGNvbXBpbGUgZnVuY3Rpb24gY2FuIGhhdmUgYSByZXR1cm4gdmFsdWUgd2hpY2ggY2FuIGJlIGVpdGhlciBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdC5cclxuICpcclxuICogKiByZXR1cm5pbmcgYSAocG9zdC1saW5rKSBmdW5jdGlvbiAtIGlzIGVxdWl2YWxlbnQgdG8gcmVnaXN0ZXJpbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb24gdmlhIHRoZVxyXG4gKiAgIGBsaW5rYCBwcm9wZXJ0eSBvZiB0aGUgY29uZmlnIG9iamVjdCB3aGVuIHRoZSBjb21waWxlIGZ1bmN0aW9uIGlzIGVtcHR5LlxyXG4gKlxyXG4gKiAqIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBmdW5jdGlvbihzKSByZWdpc3RlcmVkIHZpYSBgcHJlYCBhbmQgYHBvc3RgIHByb3BlcnRpZXMgLSBhbGxvd3MgeW91IHRvXHJcbiAqICAgY29udHJvbCB3aGVuIGEgbGlua2luZyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS4gU2VlIGluZm8gYWJvdXRcclxuICogICBwcmUtbGlua2luZyBhbmQgcG9zdC1saW5raW5nIGZ1bmN0aW9ucyBiZWxvdy5cclxuICpcclxuICpcclxuICogIyMjIyBgbGlua2BcclxuICogVGhpcyBwcm9wZXJ0eSBpcyB1c2VkIG9ubHkgaWYgdGhlIGBjb21waWxlYCBwcm9wZXJ0eSBpcyBub3QgZGVmaW5lZC5cclxuICpcclxuICogYGBganNcclxuICogICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyLCB0cmFuc2NsdWRlRm4pIHsgLi4uIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIFRoZSBsaW5rIGZ1bmN0aW9uIGlzIHJlc3BvbnNpYmxlIGZvciByZWdpc3RlcmluZyBET00gbGlzdGVuZXJzIGFzIHdlbGwgYXMgdXBkYXRpbmcgdGhlIERPTS4gSXQgaXNcclxuICogZXhlY3V0ZWQgYWZ0ZXIgdGhlIHRlbXBsYXRlIGhhcyBiZWVuIGNsb25lZC4gVGhpcyBpcyB3aGVyZSBtb3N0IG9mIHRoZSBkaXJlY3RpdmUgbG9naWMgd2lsbCBiZVxyXG4gKiBwdXQuXHJcbiAqXHJcbiAqICAgKiBgc2NvcGVgIC0ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IC0gVGhlIHNjb3BlIHRvIGJlIHVzZWQgYnkgdGhlXHJcbiAqICAgICBkaXJlY3RpdmUgZm9yIHJlZ2lzdGVyaW5nIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVzfS5cclxuICpcclxuICogICAqIGBpRWxlbWVudGAgLSBpbnN0YW5jZSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgd2hlcmUgdGhlIGRpcmVjdGl2ZSBpcyB0byBiZSB1c2VkLiBJdCBpcyBzYWZlIHRvXHJcbiAqICAgICBtYW5pcHVsYXRlIHRoZSBjaGlsZHJlbiBvZiB0aGUgZWxlbWVudCBvbmx5IGluIGBwb3N0TGlua2AgZnVuY3Rpb24gc2luY2UgdGhlIGNoaWxkcmVuIGhhdmVcclxuICogICAgIGFscmVhZHkgYmVlbiBsaW5rZWQuXHJcbiAqXHJcbiAqICAgKiBgaUF0dHJzYCAtIGluc3RhbmNlIGF0dHJpYnV0ZXMgLSBOb3JtYWxpemVkIGxpc3Qgb2YgYXR0cmlidXRlcyBkZWNsYXJlZCBvbiB0aGlzIGVsZW1lbnQgc2hhcmVkXHJcbiAqICAgICBiZXR3ZWVuIGFsbCBkaXJlY3RpdmUgbGlua2luZyBmdW5jdGlvbnMuXHJcbiAqXHJcbiAqICAgKiBgY29udHJvbGxlcmAgLSBhIGNvbnRyb2xsZXIgaW5zdGFuY2UgLSBBIGNvbnRyb2xsZXIgaW5zdGFuY2UgaWYgYXQgbGVhc3Qgb25lIGRpcmVjdGl2ZSBvbiB0aGVcclxuICogICAgIGVsZW1lbnQgZGVmaW5lcyBhIGNvbnRyb2xsZXIuIFRoZSBjb250cm9sbGVyIGlzIHNoYXJlZCBhbW9uZyBhbGwgdGhlIGRpcmVjdGl2ZXMsIHdoaWNoIGFsbG93c1xyXG4gKiAgICAgdGhlIGRpcmVjdGl2ZXMgdG8gdXNlIHRoZSBjb250cm9sbGVycyBhcyBhIGNvbW11bmljYXRpb24gY2hhbm5lbC5cclxuICpcclxuICogICAqIGB0cmFuc2NsdWRlRm5gIC0gQSB0cmFuc2NsdWRlIGxpbmtpbmcgZnVuY3Rpb24gcHJlLWJvdW5kIHRvIHRoZSBjb3JyZWN0IHRyYW5zY2x1c2lvbiBzY29wZS5cclxuICogICAgIFRoaXMgaXMgdGhlIHNhbWUgYXMgdGhlIGAkdHJhbnNjbHVkZWBcclxuICogICAgIHBhcmFtZXRlciBvZiBkaXJlY3RpdmUgY29udHJvbGxlcnMsIHNlZSB0aGVyZSBmb3IgZGV0YWlscy5cclxuICogICAgIGBmdW5jdGlvbihbc2NvcGVdLCBjbG9uZUxpbmtpbmdGbiwgZnV0dXJlUGFyZW50RWxlbWVudClgLlxyXG4gKlxyXG4gKiAjIyMjIFByZS1saW5raW5nIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEV4ZWN1dGVkIGJlZm9yZSB0aGUgY2hpbGQgZWxlbWVudHMgYXJlIGxpbmtlZC4gTm90IHNhZmUgdG8gZG8gRE9NIHRyYW5zZm9ybWF0aW9uIHNpbmNlIHRoZVxyXG4gKiBjb21waWxlciBsaW5raW5nIGZ1bmN0aW9uIHdpbGwgZmFpbCB0byBsb2NhdGUgdGhlIGNvcnJlY3QgZWxlbWVudHMgZm9yIGxpbmtpbmcuXHJcbiAqXHJcbiAqICMjIyMgUG9zdC1saW5raW5nIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEV4ZWN1dGVkIGFmdGVyIHRoZSBjaGlsZCBlbGVtZW50cyBhcmUgbGlua2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgY2hpbGQgZWxlbWVudHMgdGhhdCBjb250YWluIGB0ZW1wbGF0ZVVybGAgZGlyZWN0aXZlcyB3aWxsIG5vdCBoYXZlIGJlZW4gY29tcGlsZWRcclxuICogYW5kIGxpbmtlZCBzaW5jZSB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd25cclxuICogY29tcGlsYXRpb24gYW5kIGxpbmtpbmcgaGFzIGJlZW4gc3VzcGVuZGVkIHVudGlsIHRoYXQgb2NjdXJzLlxyXG4gKlxyXG4gKiBJdCBpcyBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBpbiB0aGUgcG9zdC1saW5raW5nIGZ1bmN0aW9uIG9uIGVsZW1lbnRzIHRoYXQgYXJlIG5vdCB3YWl0aW5nXHJcbiAqIGZvciB0aGVpciBhc3luYyB0ZW1wbGF0ZXMgdG8gYmUgcmVzb2x2ZWQuXHJcbiAqXHJcbiAqIDxhIG5hbWU9XCJBdHRyaWJ1dGVzXCI+PC9hPlxyXG4gKiAjIyMgQXR0cmlidXRlc1xyXG4gKlxyXG4gKiBUaGUge0BsaW5rIG5nLiRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIEF0dHJpYnV0ZXN9IG9iamVjdCAtIHBhc3NlZCBhcyBhIHBhcmFtZXRlciBpbiB0aGVcclxuICogYGxpbmsoKWAgb3IgYGNvbXBpbGUoKWAgZnVuY3Rpb25zLiBJdCBoYXMgYSB2YXJpZXR5IG9mIHVzZXMuXHJcbiAqXHJcbiAqIGFjY2Vzc2luZyAqTm9ybWFsaXplZCBhdHRyaWJ1dGUgbmFtZXM6KlxyXG4gKiBEaXJlY3RpdmVzIGxpa2UgJ25nQmluZCcgY2FuIGJlIGV4cHJlc3NlZCBpbiBtYW55IHdheXM6ICduZzpiaW5kJywgYGRhdGEtbmctYmluZGAsIG9yICd4LW5nLWJpbmQnLlxyXG4gKiB0aGUgYXR0cmlidXRlcyBvYmplY3QgYWxsb3dzIGZvciBub3JtYWxpemVkIGFjY2VzcyB0b1xyXG4gKiAgIHRoZSBhdHRyaWJ1dGVzLlxyXG4gKlxyXG4gKiAqICpEaXJlY3RpdmUgaW50ZXItY29tbXVuaWNhdGlvbjoqIEFsbCBkaXJlY3RpdmVzIHNoYXJlIHRoZSBzYW1lIGluc3RhbmNlIG9mIHRoZSBhdHRyaWJ1dGVzXHJcbiAqICAgb2JqZWN0IHdoaWNoIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byB1c2UgdGhlIGF0dHJpYnV0ZXMgb2JqZWN0IGFzIGludGVyIGRpcmVjdGl2ZVxyXG4gKiAgIGNvbW11bmljYXRpb24uXHJcbiAqXHJcbiAqICogKlN1cHBvcnRzIGludGVycG9sYXRpb246KiBJbnRlcnBvbGF0aW9uIGF0dHJpYnV0ZXMgYXJlIGFzc2lnbmVkIHRvIHRoZSBhdHRyaWJ1dGUgb2JqZWN0XHJcbiAqICAgYWxsb3dpbmcgb3RoZXIgZGlyZWN0aXZlcyB0byByZWFkIHRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUuXHJcbiAqXHJcbiAqICogKk9ic2VydmluZyBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlczoqIFVzZSBgJG9ic2VydmVgIHRvIG9ic2VydmUgdGhlIHZhbHVlIGNoYW5nZXMgb2YgYXR0cmlidXRlc1xyXG4gKiAgIHRoYXQgY29udGFpbiBpbnRlcnBvbGF0aW9uIChlLmcuIGBzcmM9XCJ7e2Jhcn19XCJgKS4gTm90IG9ubHkgaXMgdGhpcyB2ZXJ5IGVmZmljaWVudCBidXQgaXQncyBhbHNvXHJcbiAqICAgdGhlIG9ubHkgd2F5IHRvIGVhc2lseSBnZXQgdGhlIGFjdHVhbCB2YWx1ZSBiZWNhdXNlIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZSB0aGUgaW50ZXJwb2xhdGlvblxyXG4gKiAgIGhhc24ndCBiZWVuIGV2YWx1YXRlZCB5ZXQgYW5kIHNvIHRoZSB2YWx1ZSBpcyBhdCB0aGlzIHRpbWUgc2V0IHRvIGB1bmRlZmluZWRgLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBmdW5jdGlvbiBsaW5raW5nRm4oc2NvcGUsIGVsbSwgYXR0cnMsIGN0cmwpIHtcclxuICogICAvLyBnZXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZVxyXG4gKiAgIGNvbnNvbGUubG9nKGF0dHJzLm5nTW9kZWwpO1xyXG4gKlxyXG4gKiAgIC8vIGNoYW5nZSB0aGUgYXR0cmlidXRlXHJcbiAqICAgYXR0cnMuJHNldCgnbmdNb2RlbCcsICduZXcgdmFsdWUnKTtcclxuICpcclxuICogICAvLyBvYnNlcnZlIGNoYW5nZXMgdG8gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZVxyXG4gKiAgIGF0dHJzLiRvYnNlcnZlKCduZ01vZGVsJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICogICAgIGNvbnNvbGUubG9nKCduZ01vZGVsIGhhcyBjaGFuZ2VkIHZhbHVlIHRvICcgKyB2YWx1ZSk7XHJcbiAqICAgfSk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEJlbG93IGlzIGFuIGV4YW1wbGUgdXNpbmcgYCRjb21waWxlUHJvdmlkZXJgLlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGUqKjogVHlwaWNhbGx5IGRpcmVjdGl2ZXMgYXJlIHJlZ2lzdGVyZWQgd2l0aCBgbW9kdWxlLmRpcmVjdGl2ZWAuIFRoZSBleGFtcGxlIGJlbG93IGlzXHJcbiAqIHRvIGlsbHVzdHJhdGUgaG93IGAkY29tcGlsZWAgd29ya3MuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gPGV4YW1wbGUgbW9kdWxlPVwiY29tcGlsZUV4YW1wbGVcIj5cclxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgIDxzY3JpcHQ+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdjb21waWxlRXhhbXBsZScsIFtdLCBmdW5jdGlvbigkY29tcGlsZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgLy8gY29uZmlndXJlIG5ldyAnY29tcGlsZScgZGlyZWN0aXZlIGJ5IHBhc3NpbmcgYSBkaXJlY3RpdmVcclxuICAgICAgICAvLyBmYWN0b3J5IGZ1bmN0aW9uLiBUaGUgZmFjdG9yeSBmdW5jdGlvbiBpbmplY3RzIHRoZSAnJGNvbXBpbGUnXHJcbiAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoJ2NvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xyXG4gICAgICAgICAgLy8gZGlyZWN0aXZlIGZhY3RvcnkgY3JlYXRlcyBhIGxpbmsgZnVuY3Rpb25cclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgLy8gd2F0Y2ggdGhlICdjb21waWxlJyBleHByZXNzaW9uIGZvciBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGV2YWwoYXR0cnMuY29tcGlsZSk7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgJ2NvbXBpbGUnIGV4cHJlc3Npb24gY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzaWduIGl0IGludG8gdGhlIGN1cnJlbnQgRE9NXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwodmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgdGhlIG5ldyBET00gYW5kIGxpbmsgaXQgdG8gdGhlIGN1cnJlbnRcclxuICAgICAgICAgICAgICAgIC8vIHNjb3BlLlxyXG4gICAgICAgICAgICAgICAgLy8gTk9URTogd2Ugb25seSBjb21waWxlIC5jaGlsZE5vZGVzIHNvIHRoYXRcclxuICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IGdldCBpbnRvIGluZmluaXRlIGxvb3AgY29tcGlsaW5nIG91cnNlbHZlc1xyXG4gICAgICAgICAgICAgICAgJGNvbXBpbGUoZWxlbWVudC5jb250ZW50cygpKShzY29wZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNvbnRyb2xsZXIoJ0dyZWV0ZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUubmFtZSA9ICdBbmd1bGFyJztcclxuICAgICAgICAkc2NvcGUuaHRtbCA9ICdIZWxsbyB7e25hbWV9fSc7XHJcbiAgICAgIH1dKTtcclxuICAgIDwvc2NyaXB0PlxyXG4gICAgPGRpdiBuZy1jb250cm9sbGVyPVwiR3JlZXRlckNvbnRyb2xsZXJcIj5cclxuICAgICAgPGlucHV0IG5nLW1vZGVsPVwibmFtZVwiPiA8YnI+XHJcbiAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cImh0bWxcIj48L3RleHRhcmVhPiA8YnI+XHJcbiAgICAgIDxkaXYgY29tcGlsZT1cImh0bWxcIj48L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICBpdCgnc2hvdWxkIGF1dG8gY29tcGlsZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgdmFyIHRleHRhcmVhID0gJCgndGV4dGFyZWEnKTtcclxuICAgICAgIHZhciBvdXRwdXQgPSAkKCdkaXZbY29tcGlsZV0nKTtcclxuICAgICAgIC8vIFRoZSBpbml0aWFsIHN0YXRlIHJlYWRzICdIZWxsbyBBbmd1bGFyJy5cclxuICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBBbmd1bGFyJyk7XHJcbiAgICAgICB0ZXh0YXJlYS5jbGVhcigpO1xyXG4gICAgICAgdGV4dGFyZWEuc2VuZEtleXMoJ3t7bmFtZX19IScpO1xyXG4gICAgICAgZXhwZWN0KG91dHB1dC5nZXRUZXh0KCkpLnRvQmUoJ0FuZ3VsYXIhJyk7XHJcbiAgICAgfSk7XHJcbiAgIDwvZmlsZT5cclxuIDwvZXhhbXBsZT5cclxuXHJcbiAqXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfERPTUVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCBvciBIVE1MIHN0cmluZyB0byBjb21waWxlIGludG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbi5cclxuICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGUgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGRpcmVjdGl2ZXMuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhQcmlvcml0eSBvbmx5IGFwcGx5IGRpcmVjdGl2ZXMgbG93ZXIgdGhhbiBnaXZlbiBwcmlvcml0eSAoT25seSBlZmZlY3RzIHRoZVxyXG4gKiAgICAgICAgICAgICAgICAgcm9vdCBlbGVtZW50KHMpLCBub3QgdGhlaXIgY2hpbGRyZW4pXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzY29wZSwgY2xvbmVBdHRhY2hGbj0pfSBhIGxpbmsgZnVuY3Rpb24gd2hpY2ggaXMgdXNlZCB0byBiaW5kIHRlbXBsYXRlXHJcbiAqIChhIERPTSBlbGVtZW50L3RyZWUpIHRvIGEgc2NvcGUuIFdoZXJlOlxyXG4gKlxyXG4gKiAgKiBgc2NvcGVgIC0gQSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBTY29wZX0gdG8gYmluZCB0by5cclxuICogICogYGNsb25lQXR0YWNoRm5gIC0gSWYgYGNsb25lQXR0YWNoRm5gIGlzIHByb3ZpZGVkLCB0aGVuIHRoZSBsaW5rIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlXHJcbiAqICBgdGVtcGxhdGVgIGFuZCBjYWxsIHRoZSBgY2xvbmVBdHRhY2hGbmAgZnVuY3Rpb24gYWxsb3dpbmcgdGhlIGNhbGxlciB0byBhdHRhY2ggdGhlXHJcbiAqICBjbG9uZWQgZWxlbWVudHMgdG8gdGhlIERPTSBkb2N1bWVudCBhdCB0aGUgYXBwcm9wcmlhdGUgcGxhY2UuIFRoZSBgY2xvbmVBdHRhY2hGbmAgaXNcclxuICogIGNhbGxlZCBhczogPGJyPiBgY2xvbmVBdHRhY2hGbihjbG9uZWRFbGVtZW50LCBzY29wZSlgIHdoZXJlOlxyXG4gKlxyXG4gKiAgICAgICogYGNsb25lZEVsZW1lbnRgIC0gaXMgYSBjbG9uZSBvZiB0aGUgb3JpZ2luYWwgYGVsZW1lbnRgIHBhc3NlZCBpbnRvIHRoZSBjb21waWxlci5cclxuICogICAgICAqIGBzY29wZWAgLSBpcyB0aGUgY3VycmVudCBzY29wZSB3aXRoIHdoaWNoIHRoZSBsaW5raW5nIGZ1bmN0aW9uIGlzIHdvcmtpbmcgd2l0aC5cclxuICpcclxuICogQ2FsbGluZyB0aGUgbGlua2luZyBmdW5jdGlvbiByZXR1cm5zIHRoZSBlbGVtZW50IG9mIHRoZSB0ZW1wbGF0ZS4gSXQgaXMgZWl0aGVyIHRoZSBvcmlnaW5hbFxyXG4gKiBlbGVtZW50IHBhc3NlZCBpbiwgb3IgdGhlIGNsb25lIG9mIHRoZSBlbGVtZW50IGlmIHRoZSBgY2xvbmVBdHRhY2hGbmAgaXMgcHJvdmlkZWQuXHJcbiAqXHJcbiAqIEFmdGVyIGxpbmtpbmcgdGhlIHZpZXcgaXMgbm90IHVwZGF0ZWQgdW50aWwgYWZ0ZXIgYSBjYWxsIHRvICRkaWdlc3Qgd2hpY2ggdHlwaWNhbGx5IGlzIGRvbmUgYnlcclxuICogQW5ndWxhciBhdXRvbWF0aWNhbGx5LlxyXG4gKlxyXG4gKiBJZiB5b3UgbmVlZCBhY2Nlc3MgdG8gdGhlIGJvdW5kIHZpZXcsIHRoZXJlIGFyZSB0d28gd2F5cyB0byBkbyBpdDpcclxuICpcclxuICogLSBJZiB5b3UgYXJlIG5vdCBhc2tpbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb24gdG8gY2xvbmUgdGhlIHRlbXBsYXRlLCBjcmVhdGUgdGhlIERPTSBlbGVtZW50KHMpXHJcbiAqICAgYmVmb3JlIHlvdSBzZW5kIHRoZW0gdG8gdGhlIGNvbXBpbGVyIGFuZCBrZWVwIHRoaXMgcmVmZXJlbmNlIGFyb3VuZC5cclxuICogICBgYGBqc1xyXG4gKiAgICAgdmFyIGVsZW1lbnQgPSAkY29tcGlsZSgnPHA+e3t0b3RhbH19PC9wPicpKHNjb3BlKTtcclxuICogICBgYGBcclxuICpcclxuICogLSBpZiBvbiB0aGUgb3RoZXIgaGFuZCwgeW91IG5lZWQgdGhlIGVsZW1lbnQgdG8gYmUgY2xvbmVkLCB0aGUgdmlldyByZWZlcmVuY2UgZnJvbSB0aGUgb3JpZ2luYWxcclxuICogICBleGFtcGxlIHdvdWxkIG5vdCBwb2ludCB0byB0aGUgY2xvbmUsIGJ1dCByYXRoZXIgdG8gdGhlIG9yaWdpbmFsIHRlbXBsYXRlIHRoYXQgd2FzIGNsb25lZC4gSW5cclxuICogICB0aGlzIGNhc2UsIHlvdSBjYW4gYWNjZXNzIHRoZSBjbG9uZSB2aWEgdGhlIGNsb25lQXR0YWNoRm46XHJcbiAqICAgYGBganNcclxuICogICAgIHZhciB0ZW1wbGF0ZUVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJzxwPnt7dG90YWx9fTwvcD4nKSxcclxuICogICAgICAgICBzY29wZSA9IC4uLi47XHJcbiAqXHJcbiAqICAgICB2YXIgY2xvbmVkRWxlbWVudCA9ICRjb21waWxlKHRlbXBsYXRlRWxlbWVudCkoc2NvcGUsIGZ1bmN0aW9uKGNsb25lZEVsZW1lbnQsIHNjb3BlKSB7XHJcbiAqICAgICAgIC8vYXR0YWNoIHRoZSBjbG9uZSB0byBET00gZG9jdW1lbnQgYXQgdGhlIHJpZ2h0IHBsYWNlXHJcbiAqICAgICB9KTtcclxuICpcclxuICogICAgIC8vbm93IHdlIGhhdmUgcmVmZXJlbmNlIHRvIHRoZSBjbG9uZWQgRE9NIHZpYSBgY2xvbmVkRWxlbWVudGBcclxuICogICBgYGBcclxuICpcclxuICpcclxuICogRm9yIGluZm9ybWF0aW9uIG9uIGhvdyB0aGUgY29tcGlsZXIgd29ya3MsIHNlZSB0aGVcclxuICoge0BsaW5rIGd1aWRlL2NvbXBpbGVyIEFuZ3VsYXIgSFRNTCBDb21waWxlcn0gc2VjdGlvbiBvZiB0aGUgRGV2ZWxvcGVyIEd1aWRlLlxyXG4gKi9cclxuXHJcbnZhciAkY29tcGlsZU1pbkVyciA9IG1pbkVycignJGNvbXBpbGUnKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGNvbXBpbGVQcm92aWRlclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICovXHJcbiRDb21waWxlUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnLCAnJCRzYW5pdGl6ZVVyaVByb3ZpZGVyJ107XHJcbmZ1bmN0aW9uICRDb21waWxlUHJvdmlkZXIoJHByb3ZpZGUsICQkc2FuaXRpemVVcmlQcm92aWRlcikge1xyXG4gIHZhciBoYXNEaXJlY3RpdmVzID0ge30sXHJcbiAgICAgIFN1ZmZpeCA9ICdEaXJlY3RpdmUnLFxyXG4gICAgICBDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAgPSAvXlxccypkaXJlY3RpdmVcXDpcXHMqKFtcXGRcXHdfXFwtXSspXFxzKyguKikkLyxcclxuICAgICAgQ0xBU1NfRElSRUNUSVZFX1JFR0VYUCA9IC8oKFtcXGRcXHdfXFwtXSspKD86XFw6KFteO10rKSk/Oz8pLyxcclxuICAgICAgQUxMX09SX05PVEhJTkdfQVRUUlMgPSBtYWtlTWFwKCduZ1NyYyxuZ1NyY3NldCxzcmMsc3Jjc2V0Jyk7XHJcblxyXG4gIC8vIFJlZjogaHR0cDovL2RldmVsb3BlcnMud2hhdHdnLm9yZy93ZWJhcHBhcGlzLmh0bWwjZXZlbnQtaGFuZGxlci1pZGwtYXR0cmlidXRlc1xyXG4gIC8vIFRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgZnV0dXJlIERPTSBldmVudCBhdHRyaWJ1dGUgbmFtZXMgd2lsbCBiZWdpbiB3aXRoXHJcbiAgLy8gJ29uJyBhbmQgYmUgY29tcG9zZWQgb2Ygb25seSBFbmdsaXNoIGxldHRlcnMuXHJcbiAgdmFyIEVWRU5UX0hBTkRMRVJfQVRUUl9SRUdFWFAgPSAvXihvblthLXpdK3xmb3JtYWN0aW9uKSQvO1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZUlzb2xhdGVCaW5kaW5ncyhzY29wZSwgZGlyZWN0aXZlTmFtZSkge1xyXG4gICAgdmFyIExPQ0FMX1JFR0VYUCA9IC9eXFxzKihbQD0mXSkoXFw/PylcXHMqKFxcdyopXFxzKiQvO1xyXG5cclxuICAgIHZhciBiaW5kaW5ncyA9IHt9O1xyXG5cclxuICAgIGZvckVhY2goc2NvcGUsIGZ1bmN0aW9uKGRlZmluaXRpb24sIHNjb3BlTmFtZSkge1xyXG4gICAgICB2YXIgbWF0Y2ggPSBkZWZpbml0aW9uLm1hdGNoKExPQ0FMX1JFR0VYUCk7XHJcblxyXG4gICAgICBpZiAoIW1hdGNoKSB7XHJcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2lzY3AnLFxyXG4gICAgICAgICAgICBcIkludmFsaWQgaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uIGZvciBkaXJlY3RpdmUgJ3swfScuXCIgK1xyXG4gICAgICAgICAgICBcIiBEZWZpbml0aW9uOiB7Li4uIHsxfTogJ3syfScgLi4ufVwiLFxyXG4gICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCBzY29wZU5hbWUsIGRlZmluaXRpb24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBiaW5kaW5nc1tzY29wZU5hbWVdID0ge1xyXG4gICAgICAgIGF0dHJOYW1lOiBtYXRjaFszXSB8fCBzY29wZU5hbWUsXHJcbiAgICAgICAgbW9kZTogbWF0Y2hbMV0sXHJcbiAgICAgICAgb3B0aW9uYWw6IG1hdGNoWzJdID09PSAnPydcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBiaW5kaW5ncztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZVxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZWdpc3RlciBhIG5ldyBkaXJlY3RpdmUgd2l0aCB0aGUgY29tcGlsZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgTmFtZSBvZiB0aGUgZGlyZWN0aXZlIGluIGNhbWVsLWNhc2UgKGkuZS4gPGNvZGU+bmdCaW5kPC9jb2RlPiB3aGljaFxyXG4gICAqICAgIHdpbGwgbWF0Y2ggYXMgPGNvZGU+bmctYmluZDwvY29kZT4pLCBvciBhbiBvYmplY3QgbWFwIG9mIGRpcmVjdGl2ZXMgd2hlcmUgdGhlIGtleXMgYXJlIHRoZVxyXG4gICAqICAgIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgZmFjdG9yaWVzLlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258QXJyYXl9IGRpcmVjdGl2ZUZhY3RvcnkgQW4gaW5qZWN0YWJsZSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbi4gU2VlXHJcbiAgICogICAge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZX0gZm9yIG1vcmUgaW5mby5cclxuICAgKiBAcmV0dXJucyB7bmcuJGNvbXBpbGVQcm92aWRlcn0gU2VsZiBmb3IgY2hhaW5pbmcuXHJcbiAgICovXHJcbiAgIHRoaXMuZGlyZWN0aXZlID0gZnVuY3Rpb24gcmVnaXN0ZXJEaXJlY3RpdmUobmFtZSwgZGlyZWN0aXZlRmFjdG9yeSkge1xyXG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ2RpcmVjdGl2ZScpO1xyXG4gICAgaWYgKGlzU3RyaW5nKG5hbWUpKSB7XHJcbiAgICAgIGFzc2VydEFyZyhkaXJlY3RpdmVGYWN0b3J5LCAnZGlyZWN0aXZlRmFjdG9yeScpO1xyXG4gICAgICBpZiAoIWhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICBoYXNEaXJlY3RpdmVzW25hbWVdID0gW107XHJcbiAgICAgICAgJHByb3ZpZGUuZmFjdG9yeShuYW1lICsgU3VmZml4LCBbJyRpbmplY3RvcicsICckZXhjZXB0aW9uSGFuZGxlcicsXHJcbiAgICAgICAgICBmdW5jdGlvbigkaW5qZWN0b3IsICRleGNlcHRpb25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXJlY3RpdmVzID0gW107XHJcbiAgICAgICAgICAgIGZvckVhY2goaGFzRGlyZWN0aXZlc1tuYW1lXSwgZnVuY3Rpb24oZGlyZWN0aXZlRmFjdG9yeSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZSA9ICRpbmplY3Rvci5pbnZva2UoZGlyZWN0aXZlRmFjdG9yeSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihkaXJlY3RpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZSA9IHsgY29tcGlsZTogdmFsdWVGbihkaXJlY3RpdmUpIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFkaXJlY3RpdmUuY29tcGlsZSAmJiBkaXJlY3RpdmUubGluaykge1xyXG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUuY29tcGlsZSA9IHZhbHVlRm4oZGlyZWN0aXZlLmxpbmspO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLnByaW9yaXR5ID0gZGlyZWN0aXZlLnByaW9yaXR5IHx8IDA7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5uYW1lID0gZGlyZWN0aXZlLm5hbWUgfHwgbmFtZTtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5yZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmUgfHwgKGRpcmVjdGl2ZS5jb250cm9sbGVyICYmIGRpcmVjdGl2ZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5yZXN0cmljdCA9IGRpcmVjdGl2ZS5yZXN0cmljdCB8fCAnRUEnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KGRpcmVjdGl2ZS5zY29wZSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLiQkaXNvbGF0ZUJpbmRpbmdzID0gcGFyc2VJc29sYXRlQmluZGluZ3MoZGlyZWN0aXZlLnNjb3BlLCBkaXJlY3RpdmUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmVzLnB1c2goZGlyZWN0aXZlKTtcclxuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlcztcclxuICAgICAgICAgIH1dKTtcclxuICAgICAgfVxyXG4gICAgICBoYXNEaXJlY3RpdmVzW25hbWVdLnB1c2goZGlyZWN0aXZlRmFjdG9yeSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3JFYWNoKG5hbWUsIHJldmVyc2VQYXJhbXMocmVnaXN0ZXJEaXJlY3RpdmUpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXHJcbiAgICogdXJscyBkdXJpbmcgYVtocmVmXSBzYW5pdGl6YXRpb24uXHJcbiAgICpcclxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxyXG4gICAqXHJcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBhW2hyZWZdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cclxuICAgKiBhbiBhYnNvbHV0ZSB1cmwuIEFmdGVyd2FyZHMsIHRoZSB1cmwgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXHJcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXHJcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxyXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgdGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xyXG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XHJcbiAgICAgICQkc2FuaXRpemVVcmlQcm92aWRlci5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdChyZWdleHApO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAkJHNhbml0aXplVXJpUHJvdmlkZXIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0XHJcbiAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcclxuICAgKiB1cmxzIGR1cmluZyBpbWdbc3JjXSBzYW5pdGl6YXRpb24uXHJcbiAgICpcclxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxyXG4gICAqXHJcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBpbWdbc3JjXSB2aWEgZGF0YS1iaW5kaW5nIGlzIGZpcnN0IG5vcm1hbGl6ZWQgYW5kIHR1cm5lZCBpbnRvXHJcbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdGBcclxuICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIElmIGEgbWF0Y2ggaXMgZm91bmQsIHRoZSBvcmlnaW5hbCB1cmwgaXMgd3JpdHRlbiBpbnRvIHRoZSBkb20uIE90aGVyd2lzZSxcclxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXHJcbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxyXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cclxuICAgKi9cclxuICB0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xyXG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XHJcbiAgICAgICQkc2FuaXRpemVVcmlQcm92aWRlci5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QocmVnZXhwKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAgJGNvbXBpbGVQcm92aWRlciNkZWJ1Z0luZm9FbmFibGVkXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBlbmFibGVkIHVwZGF0ZSB0aGUgZGVidWdJbmZvRW5hYmxlZCBzdGF0ZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZVxyXG4gICAqIGN1cnJlbnQgZGVidWdJbmZvRW5hYmxlZCBzdGF0ZVxyXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXHJcbiAgICpcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBlbmFibGUvZGlzYWJsZSB2YXJpb3VzIGRlYnVnIHJ1bnRpbWUgaW5mb3JtYXRpb24gaW4gdGhlIGNvbXBpbGVyIHN1Y2ggYXMgYWRkaW5nXHJcbiAgICogYmluZGluZyBpbmZvcm1hdGlvbiBhbmQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgc2NvcGUgb24gdG8gRE9NIGVsZW1lbnRzLlxyXG4gICAqIElmIGVuYWJsZWQsIHRoZSBjb21waWxlciB3aWxsIGFkZCB0aGUgZm9sbG93aW5nIHRvIERPTSBlbGVtZW50cyB0aGF0IGhhdmUgYmVlbiBib3VuZCB0byB0aGUgc2NvcGVcclxuICAgKiAqIGBuZy1iaW5kaW5nYCBDU1MgY2xhc3NcclxuICAgKiAqIGAkYmluZGluZ2AgZGF0YSBwcm9wZXJ0eSBjb250YWluaW5nIGFuIGFycmF5IG9mIHRoZSBiaW5kaW5nIGV4cHJlc3Npb25zXHJcbiAgICpcclxuICAgKiBZb3UgbWF5IHdhbnQgdG8gdXNlIHRoaXMgaW4gcHJvZHVjdGlvbiBmb3IgYSBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBib29zdC4gU2VlXHJcbiAgICoge0BsaW5rIGd1aWRlL3Byb2R1Y3Rpb24jZGlzYWJsaW5nLWRlYnVnLWRhdGEgRGlzYWJsaW5nIERlYnVnIERhdGF9IGZvciBtb3JlLlxyXG4gICAqXHJcbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgdHJ1ZS5cclxuICAgKi9cclxuICB2YXIgZGVidWdJbmZvRW5hYmxlZCA9IHRydWU7XHJcbiAgdGhpcy5kZWJ1Z0luZm9FbmFibGVkID0gZnVuY3Rpb24oZW5hYmxlZCkge1xyXG4gICAgaWYoaXNEZWZpbmVkKGVuYWJsZWQpKSB7XHJcbiAgICAgIGRlYnVnSW5mb0VuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBkZWJ1Z0luZm9FbmFibGVkO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJGdldCA9IFtcclxuICAgICAgICAgICAgJyRpbmplY3RvcicsICckaW50ZXJwb2xhdGUnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCAnJHRlbXBsYXRlUmVxdWVzdCcsICckcGFyc2UnLFxyXG4gICAgICAgICAgICAnJGNvbnRyb2xsZXInLCAnJHJvb3RTY29wZScsICckZG9jdW1lbnQnLCAnJHNjZScsICckYW5pbWF0ZScsICckJHNhbml0aXplVXJpJyxcclxuICAgIGZ1bmN0aW9uKCRpbmplY3RvciwgICAkaW50ZXJwb2xhdGUsICAgJGV4Y2VwdGlvbkhhbmRsZXIsICAgJHRlbXBsYXRlUmVxdWVzdCwgICAkcGFyc2UsXHJcbiAgICAgICAgICAgICAkY29udHJvbGxlciwgICAkcm9vdFNjb3BlLCAgICRkb2N1bWVudCwgICAkc2NlLCAgICRhbmltYXRlLCAgICQkc2FuaXRpemVVcmkpIHtcclxuXHJcbiAgICB2YXIgQXR0cmlidXRlcyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZXNUb0NvcHkpIHtcclxuICAgICAgaWYgKGF0dHJpYnV0ZXNUb0NvcHkpIHtcclxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGF0dHJpYnV0ZXNUb0NvcHkpO1xyXG4gICAgICAgIHZhciBpLCBsLCBrZXk7XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICAgIHRoaXNba2V5XSA9IGF0dHJpYnV0ZXNUb0NvcHlba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy4kYXR0ciA9IHt9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLiQkZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIEF0dHJpYnV0ZXMucHJvdG90eXBlID0ge1xyXG4gICAgICAkbm9ybWFsaXplOiBkaXJlY3RpdmVOb3JtYWxpemUsXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGFkZENsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBBZGRzIHRoZSBDU1MgY2xhc3MgdmFsdWUgc3BlY2lmaWVkIGJ5IHRoZSBjbGFzc1ZhbCBwYXJhbWV0ZXIgdG8gdGhlIGVsZW1lbnQuIElmIGFuaW1hdGlvbnNcclxuICAgICAgICogYXJlIGVuYWJsZWQgdGhlbiBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgZm9yIHRoZSBjbGFzcyBhZGRpdGlvbi5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzVmFsIFRoZSBjbGFzc05hbWUgdmFsdWUgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50XHJcbiAgICAgICAqL1xyXG4gICAgICAkYWRkQ2xhc3MgOiBmdW5jdGlvbihjbGFzc1ZhbCkge1xyXG4gICAgICAgIGlmKGNsYXNzVmFsICYmIGNsYXNzVmFsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCBjbGFzc1ZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHJlbW92ZUNsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBSZW1vdmVzIHRoZSBDU1MgY2xhc3MgdmFsdWUgc3BlY2lmaWVkIGJ5IHRoZSBjbGFzc1ZhbCBwYXJhbWV0ZXIgZnJvbSB0aGUgZWxlbWVudC4gSWZcclxuICAgICAgICogYW5pbWF0aW9ucyBhcmUgZW5hYmxlZCB0aGVuIGFuIGFuaW1hdGlvbiB3aWxsIGJlIHRyaWdnZXJlZCBmb3IgdGhlIGNsYXNzIHJlbW92YWwuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1ZhbCBUaGUgY2xhc3NOYW1lIHZhbHVlIHRoYXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcclxuICAgICAgICovXHJcbiAgICAgICRyZW1vdmVDbGFzcyA6IGZ1bmN0aW9uKGNsYXNzVmFsKSB7XHJcbiAgICAgICAgaWYoY2xhc3NWYWwgJiYgY2xhc3NWYWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIGNsYXNzVmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkdXBkYXRlQ2xhc3NcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIEFkZHMgYW5kIHJlbW92ZXMgdGhlIGFwcHJvcHJpYXRlIENTUyBjbGFzcyB2YWx1ZXMgdG8gdGhlIGVsZW1lbnQgYmFzZWQgb24gdGhlIGRpZmZlcmVuY2VcclxuICAgICAgICogYmV0d2VlbiB0aGUgbmV3IGFuZCBvbGQgQ1NTIGNsYXNzIHZhbHVlcyAoc3BlY2lmaWVkIGFzIG5ld0NsYXNzZXMgYW5kIG9sZENsYXNzZXMpLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3Q2xhc3NlcyBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIHZhbHVlXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvbGRDbGFzc2VzIFRoZSBmb3JtZXIgQ1NTIGNsYXNzTmFtZSB2YWx1ZVxyXG4gICAgICAgKi9cclxuICAgICAgJHVwZGF0ZUNsYXNzIDogZnVuY3Rpb24obmV3Q2xhc3Nlcywgb2xkQ2xhc3Nlcykge1xyXG4gICAgICAgIHZhciB0b0FkZCA9IHRva2VuRGlmZmVyZW5jZShuZXdDbGFzc2VzLCBvbGRDbGFzc2VzKTtcclxuICAgICAgICBpZiAodG9BZGQgJiYgdG9BZGQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgdG9BZGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRvUmVtb3ZlID0gdG9rZW5EaWZmZXJlbmNlKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpO1xyXG4gICAgICAgIGlmICh0b1JlbW92ZSAmJiB0b1JlbW92ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCB0b1JlbW92ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldCBhIG5vcm1hbGl6ZWQgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50IGluIGEgd2F5IHN1Y2ggdGhhdCBhbGwgZGlyZWN0aXZlc1xyXG4gICAgICAgKiBjYW4gc2hhcmUgdGhlIGF0dHJpYnV0ZS4gVGhpcyBmdW5jdGlvbiBwcm9wZXJseSBoYW5kbGVzIGJvb2xlYW4gYXR0cmlidXRlcy5cclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBOb3JtYWxpemVkIGtleS4gKGllIG5nQXR0cmlidXRlKVxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ3xib29sZWFufSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LiBJZiBgbnVsbGAgYXR0cmlidXRlIHdpbGwgYmUgZGVsZXRlZC5cclxuICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gd3JpdGVBdHRyIElmIGZhbHNlLCBkb2VzIG5vdCB3cml0ZSB0aGUgdmFsdWUgdG8gRE9NIGVsZW1lbnQgYXR0cmlidXRlLlxyXG4gICAgICAgKiAgICAgRGVmYXVsdHMgdG8gdHJ1ZS5cclxuICAgICAgICogQHBhcmFtIHtzdHJpbmc9fSBhdHRyTmFtZSBPcHRpb25hbCBub25lIG5vcm1hbGl6ZWQgbmFtZS4gRGVmYXVsdHMgdG8ga2V5LlxyXG4gICAgICAgKi9cclxuICAgICAgJHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgd3JpdGVBdHRyLCBhdHRyTmFtZSkge1xyXG4gICAgICAgIC8vIFRPRE86IGRlY2lkZSB3aGV0aGVyIG9yIG5vdCB0byB0aHJvdyBhbiBlcnJvciBpZiBcImNsYXNzXCJcclxuICAgICAgICAvL2lzIHNldCB0aHJvdWdoIHRoaXMgZnVuY3Rpb24gc2luY2UgaXQgbWF5IGNhdXNlICR1cGRhdGVDbGFzcyB0b1xyXG4gICAgICAgIC8vYmVjb21lIHVuc3RhYmxlLlxyXG5cclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuJCRlbGVtZW50WzBdLFxyXG4gICAgICAgICAgICBib29sZWFuS2V5ID0gZ2V0Qm9vbGVhbkF0dHJOYW1lKG5vZGUsIGtleSksXHJcbiAgICAgICAgICAgIGFsaWFzZWRLZXkgPSBnZXRBbGlhc2VkQXR0ck5hbWUobm9kZSwga2V5KSxcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBrZXksXHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRWYWwsXHJcbiAgICAgICAgICAgIG5vZGVOYW1lO1xyXG5cclxuICAgICAgICBpZiAoYm9vbGVhbktleSkge1xyXG4gICAgICAgICAgdGhpcy4kJGVsZW1lbnQucHJvcChrZXksIHZhbHVlKTtcclxuICAgICAgICAgIGF0dHJOYW1lID0gYm9vbGVhbktleTtcclxuICAgICAgICB9IGVsc2UgaWYoYWxpYXNlZEtleSkge1xyXG4gICAgICAgICAgdGhpc1thbGlhc2VkS2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgb2JzZXJ2ZXIgPSBhbGlhc2VkS2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XHJcblxyXG4gICAgICAgIC8vIHRyYW5zbGF0ZSBub3JtYWxpemVkIGtleSB0byBhY3R1YWwga2V5XHJcbiAgICAgICAgaWYgKGF0dHJOYW1lKSB7XHJcbiAgICAgICAgICB0aGlzLiRhdHRyW2tleV0gPSBhdHRyTmFtZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXR0ck5hbWUgPSB0aGlzLiRhdHRyW2tleV07XHJcbiAgICAgICAgICBpZiAoIWF0dHJOYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGF0dHJba2V5XSA9IGF0dHJOYW1lID0gc25ha2VfY2FzZShrZXksICctJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBub2RlTmFtZSA9IG5vZGVOYW1lXyh0aGlzLiQkZWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vIHNhbml0aXplIGFbaHJlZl0gYW5kIGltZ1tzcmNdIHZhbHVlc1xyXG4gICAgICAgIGlmICgobm9kZU5hbWUgPT09ICdhJyAmJiBrZXkgPT09ICdocmVmJykgfHxcclxuICAgICAgICAgICAgKG5vZGVOYW1lID09PSAnaW1nJyAmJiBrZXkgPT09ICdzcmMnKSkge1xyXG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWUgPSAkJHNhbml0aXplVXJpKHZhbHVlLCBrZXkgPT09ICdzcmMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3cml0ZUF0dHIgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGF0dHJOYW1lKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuJCRlbGVtZW50LmF0dHIoYXR0ck5hbWUsIHZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZpcmUgb2JzZXJ2ZXJzXHJcbiAgICAgICAgdmFyICQkb2JzZXJ2ZXJzID0gdGhpcy4kJG9ic2VydmVycztcclxuICAgICAgICAkJG9ic2VydmVycyAmJiBmb3JFYWNoKCQkb2JzZXJ2ZXJzW29ic2VydmVyXSwgZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGZuKHZhbHVlKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJG9ic2VydmVcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIE9ic2VydmVzIGFuIGludGVycG9sYXRlZCBhdHRyaWJ1dGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFRoZSBvYnNlcnZlciBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb25jZSBkdXJpbmcgdGhlIG5leHQgYCRkaWdlc3RgIGZvbGxvd2luZ1xyXG4gICAgICAgKiBjb21waWxhdGlvbi4gVGhlIG9ic2VydmVyIGlzIHRoZW4gaW52b2tlZCB3aGVuZXZlciB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlXHJcbiAgICAgICAqIGNoYW5nZXMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgTm9ybWFsaXplZCBrZXkuIChpZSBuZ0F0dHJpYnV0ZSkgLlxyXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGludGVycG9sYXRlZFZhbHVlKX0gZm4gRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlclxyXG4gICAgICAgICAgICAgICAgdGhlIGludGVycG9sYXRlZCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIGNoYW5nZXMuXHJcbiAgICAgICAqICAgICAgICBTZWUgdGhlIHtAbGluayBndWlkZS9kaXJlY3RpdmUjQXR0cmlidXRlcyBEaXJlY3RpdmVzfSBndWlkZSBmb3IgbW9yZSBpbmZvLlxyXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIG9ic2VydmVyLlxyXG4gICAgICAgKi9cclxuICAgICAgJG9ic2VydmU6IGZ1bmN0aW9uKGtleSwgZm4pIHtcclxuICAgICAgICB2YXIgYXR0cnMgPSB0aGlzLFxyXG4gICAgICAgICAgICAkJG9ic2VydmVycyA9IChhdHRycy4kJG9ic2VydmVycyB8fCAoYXR0cnMuJCRvYnNlcnZlcnMgPSB7fSkpLFxyXG4gICAgICAgICAgICBsaXN0ZW5lcnMgPSAoJCRvYnNlcnZlcnNba2V5XSB8fCAoJCRvYnNlcnZlcnNba2V5XSA9IFtdKSk7XHJcblxyXG4gICAgICAgIGxpc3RlbmVycy5wdXNoKGZuKTtcclxuICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoIWxpc3RlbmVycy4kJGludGVyKSB7XHJcbiAgICAgICAgICAgIC8vIG5vIG9uZSByZWdpc3RlcmVkIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLCBzbyBsZXRzIGNhbGwgaXQgbWFudWFsbHlcclxuICAgICAgICAgICAgZm4oYXR0cnNba2V5XSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGFycmF5UmVtb3ZlKGxpc3RlbmVycywgZm4pO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcclxuICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgLy8gaWdub3JlLCBzaW5jZSBpdCBtZWFucyB0aGF0IHdlIGFyZSB0cnlpbmcgdG8gc2V0IGNsYXNzIG9uXHJcbiAgICAgICAgLy8gU1ZHIGVsZW1lbnQsIHdoZXJlIGNsYXNzIG5hbWUgaXMgcmVhZC1vbmx5LlxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHZhciBzdGFydFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLFxyXG4gICAgICAgIGVuZFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKSxcclxuICAgICAgICBkZW5vcm1hbGl6ZVRlbXBsYXRlID0gKHN0YXJ0U3ltYm9sID09ICd7eycgfHwgZW5kU3ltYm9sICA9PSAnfX0nKVxyXG4gICAgICAgICAgICA/IGlkZW50aXR5XHJcbiAgICAgICAgICAgIDogZnVuY3Rpb24gZGVub3JtYWxpemVUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXHsvZywgc3RhcnRTeW1ib2wpLnJlcGxhY2UoL319L2csIGVuZFN5bWJvbCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBOR19BVFRSX0JJTkRJTkcgPSAvXm5nQXR0cltBLVpdLztcclxuXHJcbiAgICBjb21waWxlLiQkYWRkQmluZGluZ0luZm8gPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRCaW5kaW5nSW5mbygkZWxlbWVudCwgYmluZGluZykge1xyXG4gICAgICB2YXIgYmluZGluZ3MgPSAkZWxlbWVudC5kYXRhKCckYmluZGluZycpIHx8IFtdO1xyXG5cclxuICAgICAgaWYgKGlzQXJyYXkoYmluZGluZykpIHtcclxuICAgICAgICBiaW5kaW5ncyA9IGJpbmRpbmdzLmNvbmNhdChiaW5kaW5nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBiaW5kaW5ncy5wdXNoKGJpbmRpbmcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZWxlbWVudC5kYXRhKCckYmluZGluZycsIGJpbmRpbmdzKTtcclxuICAgIH0gOiBub29wO1xyXG5cclxuICAgIGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3MgPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRCaW5kaW5nQ2xhc3MoJGVsZW1lbnQpIHtcclxuICAgICAgc2FmZUFkZENsYXNzKCRlbGVtZW50LCAnbmctYmluZGluZycpO1xyXG4gICAgfSA6IG5vb3A7XHJcblxyXG4gICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZFNjb3BlSW5mbygkZWxlbWVudCwgc2NvcGUsIGlzb2xhdGVkLCBub1RlbXBsYXRlKSB7XHJcbiAgICAgIHZhciBkYXRhTmFtZSA9IGlzb2xhdGVkID8gKG5vVGVtcGxhdGUgPyAnJGlzb2xhdGVTY29wZU5vVGVtcGxhdGUnIDogJyRpc29sYXRlU2NvcGUnKSA6ICckc2NvcGUnO1xyXG4gICAgICAkZWxlbWVudC5kYXRhKGRhdGFOYW1lLCBzY29wZSk7XHJcbiAgICB9IDogbm9vcDtcclxuXHJcbiAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZFNjb3BlQ2xhc3MoJGVsZW1lbnQsIGlzb2xhdGVkKSB7XHJcbiAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgaXNvbGF0ZWQgPyAnbmctaXNvbGF0ZS1zY29wZScgOiAnbmctc2NvcGUnKTtcclxuICAgIH0gOiBub29wO1xyXG5cclxuICAgIHJldHVybiBjb21waWxlO1xyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICBmdW5jdGlvbiBjb21waWxlKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xyXG4gICAgICBpZiAoISgkY29tcGlsZU5vZGVzIGluc3RhbmNlb2YganFMaXRlKSkge1xyXG4gICAgICAgIC8vIGpxdWVyeSBhbHdheXMgcmV3cmFwcywgd2hlcmVhcyB3ZSBuZWVkIHRvIHByZXNlcnZlIHRoZSBvcmlnaW5hbCBzZWxlY3RvciBzbyB0aGF0IHdlIGNhblxyXG4gICAgICAgIC8vIG1vZGlmeSBpdC5cclxuICAgICAgICAkY29tcGlsZU5vZGVzID0ganFMaXRlKCRjb21waWxlTm9kZXMpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFdlIGNhbiBub3QgY29tcGlsZSB0b3AgbGV2ZWwgdGV4dCBlbGVtZW50cyBzaW5jZSB0ZXh0IG5vZGVzIGNhbiBiZSBtZXJnZWQgYW5kIHdlIHdpbGxcclxuICAgICAgLy8gbm90IGJlIGFibGUgdG8gYXR0YWNoIHNjb3BlIGRhdGEgdG8gdGhlbSwgc28gd2Ugd2lsbCB3cmFwIHRoZW0gaW4gPHNwYW4+XHJcbiAgICAgIGZvckVhY2goJGNvbXBpbGVOb2RlcywgZnVuY3Rpb24obm9kZSwgaW5kZXgpe1xyXG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgLyogdGV4dCBub2RlICovICYmIG5vZGUubm9kZVZhbHVlLm1hdGNoKC9cXFMrLykgLyogbm9uLWVtcHR5ICovICkge1xyXG4gICAgICAgICAgJGNvbXBpbGVOb2Rlc1tpbmRleF0gPSBqcUxpdGUobm9kZSkud3JhcCgnPHNwYW4+PC9zcGFuPicpLnBhcmVudCgpWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHZhciBjb21wb3NpdGVMaW5rRm4gPVxyXG4gICAgICAgICAgICAgIGNvbXBpbGVOb2RlcygkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sICRjb21waWxlTm9kZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xyXG4gICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcygkY29tcGlsZU5vZGVzKTtcclxuICAgICAgdmFyIG5hbWVzcGFjZSA9IG51bGw7XHJcbiAgICAgIHZhciBuYW1lc3BhY2VBZGFwdGVkQ29tcGlsZU5vZGVzID0gJGNvbXBpbGVOb2RlcztcclxuICAgICAgdmFyIGxhc3RDb21waWxlTm9kZTtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHB1YmxpY0xpbmtGbihzY29wZSwgY2xvbmVDb25uZWN0Rm4sIHRyYW5zY2x1ZGVDb250cm9sbGVycywgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4sIGZ1dHVyZVBhcmVudEVsZW1lbnQpe1xyXG4gICAgICAgIGFzc2VydEFyZyhzY29wZSwgJ3Njb3BlJyk7XHJcbiAgICAgICAgaWYgKCFuYW1lc3BhY2UpIHtcclxuICAgICAgICAgIG5hbWVzcGFjZSA9IGRldGVjdE5hbWVzcGFjZUZvckNoaWxkRWxlbWVudHMoZnV0dXJlUGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuYW1lc3BhY2UgIT09ICdodG1sJyAmJiAkY29tcGlsZU5vZGVzWzBdICE9PSBsYXN0Q29tcGlsZU5vZGUpIHtcclxuICAgICAgICAgIG5hbWVzcGFjZUFkYXB0ZWRDb21waWxlTm9kZXMgPSBqcUxpdGUoXHJcbiAgICAgICAgICAgIHdyYXBUZW1wbGF0ZShuYW1lc3BhY2UsIGpxTGl0ZSgnPGRpdj4nKS5hcHBlbmQoJGNvbXBpbGVOb2RlcykuaHRtbCgpKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2hlbiB1c2luZyBhIGRpcmVjdGl2ZSB3aXRoIHJlcGxhY2U6dHJ1ZSBhbmQgdGVtcGxhdGVVcmwgdGhlICRjb21waWxlTm9kZXNcclxuICAgICAgICAvLyBtaWdodCBjaGFuZ2UsIHNvIHdlIG5lZWQgdG8gcmVjcmVhdGUgdGhlIG5hbWVzcGFjZSBhZGFwdGVkIGNvbXBpbGVOb2Rlcy5cclxuICAgICAgICBsYXN0Q29tcGlsZU5vZGUgPSAkY29tcGlsZU5vZGVzWzBdO1xyXG5cclxuICAgICAgICAvLyBpbXBvcnRhbnQhITogd2UgbXVzdCBjYWxsIG91ciBqcUxpdGUuY2xvbmUoKSBzaW5jZSB0aGUgalF1ZXJ5IG9uZSBpcyB0cnlpbmcgdG8gYmUgc21hcnRcclxuICAgICAgICAvLyBhbmQgc29tZXRpbWVzIGNoYW5nZXMgdGhlIHN0cnVjdHVyZSBvZiB0aGUgRE9NLlxyXG4gICAgICAgIHZhciAkbGlua05vZGUgPSBjbG9uZUNvbm5lY3RGblxyXG4gICAgICAgICAgPyBKUUxpdGVQcm90b3R5cGUuY2xvbmUuY2FsbChuYW1lc3BhY2VBZGFwdGVkQ29tcGlsZU5vZGVzKSAvLyBJTVBPUlRBTlQhISFcclxuICAgICAgICAgIDogbmFtZXNwYWNlQWRhcHRlZENvbXBpbGVOb2RlcztcclxuXHJcbiAgICAgICAgaWYgKHRyYW5zY2x1ZGVDb250cm9sbGVycykge1xyXG4gICAgICAgICAgZm9yICh2YXIgY29udHJvbGxlck5hbWUgaW4gdHJhbnNjbHVkZUNvbnRyb2xsZXJzKSB7XHJcbiAgICAgICAgICAgICRsaW5rTm9kZS5kYXRhKCckJyArIGNvbnRyb2xsZXJOYW1lICsgJ0NvbnRyb2xsZXInLCB0cmFuc2NsdWRlQ29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdLmluc3RhbmNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oJGxpbmtOb2RlLCBzY29wZSk7XHJcblxyXG4gICAgICAgIGlmIChjbG9uZUNvbm5lY3RGbikgY2xvbmVDb25uZWN0Rm4oJGxpbmtOb2RlLCBzY29wZSk7XHJcbiAgICAgICAgaWYgKGNvbXBvc2l0ZUxpbmtGbikgY29tcG9zaXRlTGlua0ZuKHNjb3BlLCAkbGlua05vZGUsICRsaW5rTm9kZSwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgIHJldHVybiAkbGlua05vZGU7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGV0ZWN0TmFtZXNwYWNlRm9yQ2hpbGRFbGVtZW50cyhwYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgIC8vIFRPRE86IE1ha2UgdGhpcyBkZXRlY3QgTWF0aE1MIGFzIHdlbGwuLi5cclxuICAgICAgdmFyIG5vZGUgPSBwYXJlbnRFbGVtZW50ICYmIHBhcmVudEVsZW1lbnRbMF07XHJcbiAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgIHJldHVybiAnaHRtbCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGVOYW1lXyhub2RlKSAhPT0gJ2ZvcmVpZ25vYmplY3QnICYmIG5vZGUudG9TdHJpbmcoKS5tYXRjaCgvU1ZHLykgPyAnc3ZnJzogJ2h0bWwnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21waWxlIGZ1bmN0aW9uIG1hdGNoZXMgZWFjaCBub2RlIGluIG5vZGVMaXN0IGFnYWluc3QgdGhlIGRpcmVjdGl2ZXMuIE9uY2UgYWxsIGRpcmVjdGl2ZXNcclxuICAgICAqIGZvciBhIHBhcnRpY3VsYXIgbm9kZSBhcmUgY29sbGVjdGVkIHRoZWlyIGNvbXBpbGUgZnVuY3Rpb25zIGFyZSBleGVjdXRlZC4gVGhlIGNvbXBpbGVcclxuICAgICAqIGZ1bmN0aW9ucyByZXR1cm4gdmFsdWVzIC0gdGhlIGxpbmtpbmcgZnVuY3Rpb25zIC0gYXJlIGNvbWJpbmVkIGludG8gYSBjb21wb3NpdGUgbGlua2luZ1xyXG4gICAgICogZnVuY3Rpb24sIHdoaWNoIGlzIHRoZSBhIGxpbmtpbmcgZnVuY3Rpb24gZm9yIHRoZSBub2RlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0IGFuIGFycmF5IG9mIG5vZGVzIG9yIE5vZGVMaXN0IHRvIGNvbXBpbGVcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oYW5ndWxhci5TY29wZSwgY2xvbmVBdHRhY2hGbj0pfSB0cmFuc2NsdWRlRm4gQSBsaW5raW5nIGZ1bmN0aW9uLCB3aGVyZSB0aGVcclxuICAgICAqICAgICAgICBzY29wZSBhcmd1bWVudCBpcyBhdXRvLWdlbmVyYXRlZCB0byB0aGUgbmV3IGNoaWxkIG9mIHRoZSB0cmFuc2NsdWRlZCBwYXJlbnQgc2NvcGUuXHJcbiAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSAkcm9vdEVsZW1lbnQgSWYgdGhlIG5vZGVMaXN0IGlzIHRoZSByb290IG9mIHRoZSBjb21waWxhdGlvbiB0cmVlIHRoZW5cclxuICAgICAqICAgICAgICB0aGUgcm9vdEVsZW1lbnQgbXVzdCBiZSBzZXQgdGhlIGpxTGl0ZSBjb2xsZWN0aW9uIG9mIHRoZSBjb21waWxlIHJvb3QuIFRoaXMgaXNcclxuICAgICAqICAgICAgICBuZWVkZWQgc28gdGhhdCB0aGUganFMaXRlIGNvbGxlY3Rpb24gaXRlbXMgY2FuIGJlIHJlcGxhY2VkIHdpdGggd2lkZ2V0cy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbWF4UHJpb3JpdHkgTWF4IGRpcmVjdGl2ZSBwcmlvcml0eS5cclxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBjb21wb3NpdGUgbGlua2luZyBmdW5jdGlvbiBvZiBhbGwgb2YgdGhlIG1hdGNoZWQgZGlyZWN0aXZlcyBvciBudWxsLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjb21waWxlTm9kZXMobm9kZUxpc3QsIHRyYW5zY2x1ZGVGbiwgJHJvb3RFbGVtZW50LCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xyXG4gICAgICB2YXIgbGlua0ZucyA9IFtdLFxyXG4gICAgICAgICAgYXR0cnMsIGRpcmVjdGl2ZXMsIG5vZGVMaW5rRm4sIGNoaWxkTm9kZXMsIGNoaWxkTGlua0ZuLCBsaW5rRm5Gb3VuZCwgbm9kZUxpbmtGbkZvdW5kO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGF0dHJzID0gbmV3IEF0dHJpYnV0ZXMoKTtcclxuXHJcbiAgICAgICAgLy8gd2UgbXVzdCBhbHdheXMgcmVmZXIgdG8gbm9kZUxpc3RbaV0gc2luY2UgdGhlIG5vZGVzIGNhbiBiZSByZXBsYWNlZCB1bmRlcm5lYXRoIHVzLlxyXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhub2RlTGlzdFtpXSwgW10sIGF0dHJzLCBpID09PSAwID8gbWF4UHJpb3JpdHkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ25vcmVEaXJlY3RpdmUpO1xyXG5cclxuICAgICAgICBub2RlTGlua0ZuID0gKGRpcmVjdGl2ZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICA/IGFwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLCBub2RlTGlzdFtpXSwgYXR0cnMsIHRyYW5zY2x1ZGVGbiwgJHJvb3RFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIFtdLCBbXSwgcHJldmlvdXNDb21waWxlQ29udGV4dClcclxuICAgICAgICAgICAgOiBudWxsO1xyXG5cclxuICAgICAgICBpZiAobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnNjb3BlKSB7XHJcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcyhhdHRycy4kJGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2hpbGRMaW5rRm4gPSAobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAhKGNoaWxkTm9kZXMgPSBub2RlTGlzdFtpXS5jaGlsZE5vZGVzKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgIWNoaWxkTm9kZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiBjb21waWxlTm9kZXMoY2hpbGROb2RlcyxcclxuICAgICAgICAgICAgICAgICBub2RlTGlua0ZuID8gKFxyXG4gICAgICAgICAgICAgICAgICAobm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCB8fCAhbm9kZUxpbmtGbi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICYmIG5vZGVMaW5rRm4udHJhbnNjbHVkZSkgOiB0cmFuc2NsdWRlRm4pO1xyXG5cclxuICAgICAgICBpZiAobm9kZUxpbmtGbiB8fCBjaGlsZExpbmtGbikge1xyXG4gICAgICAgICAgbGlua0Zucy5wdXNoKGksIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuKTtcclxuICAgICAgICAgIGxpbmtGbkZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgIG5vZGVMaW5rRm5Gb3VuZCA9IG5vZGVMaW5rRm5Gb3VuZCB8fCBub2RlTGlua0ZuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy91c2UgdGhlIHByZXZpb3VzIGNvbnRleHQgb25seSBmb3IgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHZpcnR1YWwgZ3JvdXBcclxuICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0ID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcmV0dXJuIGEgbGlua2luZyBmdW5jdGlvbiBpZiB3ZSBoYXZlIGZvdW5kIGFueXRoaW5nLCBudWxsIG90aGVyd2lzZVxyXG4gICAgICByZXR1cm4gbGlua0ZuRm91bmQgPyBjb21wb3NpdGVMaW5rRm4gOiBudWxsO1xyXG5cclxuICAgICAgZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHNjb3BlLCBub2RlTGlzdCwgJHJvb3RFbGVtZW50LCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbikge1xyXG4gICAgICAgIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZSwgY2hpbGRTY29wZSwgaSwgaWksIGlkeCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcclxuICAgICAgICB2YXIgc3RhYmxlTm9kZUxpc3Q7XHJcblxyXG5cclxuICAgICAgICBpZiAobm9kZUxpbmtGbkZvdW5kKSB7XHJcbiAgICAgICAgICAvLyBjb3B5IG5vZGVMaXN0IHNvIHRoYXQgaWYgYSBub2RlTGlua0ZuIHJlbW92ZXMgb3IgYWRkcyBhbiBlbGVtZW50IGF0IHRoaXMgRE9NIGxldmVsIG91clxyXG4gICAgICAgICAgLy8gb2Zmc2V0cyBkb24ndCBnZXQgc2NyZXdlZCB1cFxyXG4gICAgICAgICAgdmFyIG5vZGVMaXN0TGVuZ3RoID0gbm9kZUxpc3QubGVuZ3RoO1xyXG4gICAgICAgICAgc3RhYmxlTm9kZUxpc3QgPSBuZXcgQXJyYXkobm9kZUxpc3RMZW5ndGgpO1xyXG5cclxuICAgICAgICAgIC8vIGNyZWF0ZSBhIHNwYXJzZSBhcnJheSBieSBvbmx5IGNvcHlpbmcgdGhlIGVsZW1lbnRzIHdoaWNoIGhhdmUgYSBsaW5rRm5cclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaW5rRm5zLmxlbmd0aDsgaSs9Mykge1xyXG4gICAgICAgICAgICBpZHggPSBsaW5rRm5zW2ldO1xyXG4gICAgICAgICAgICBzdGFibGVOb2RlTGlzdFtpZHhdID0gbm9kZUxpc3RbaWR4XTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc3RhYmxlTm9kZUxpc3QgPSBub2RlTGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvcihpID0gMCwgaWkgPSBsaW5rRm5zLmxlbmd0aDsgaSA8IGlpOykge1xyXG4gICAgICAgICAgbm9kZSA9IHN0YWJsZU5vZGVMaXN0W2xpbmtGbnNbaSsrXV07XHJcbiAgICAgICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xyXG4gICAgICAgICAgY2hpbGRMaW5rRm4gPSBsaW5rRm5zW2krK107XHJcblxyXG4gICAgICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcclxuICAgICAgICAgICAgaWYgKG5vZGVMaW5rRm4uc2NvcGUpIHtcclxuICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gc2NvcGUuJG5ldygpO1xyXG4gICAgICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oanFMaXRlKG5vZGUpLCBjaGlsZFNjb3BlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggbm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCApIHtcclxuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oXHJcbiAgICAgICAgICAgICAgICAgIHNjb3BlLCBub2RlTGlua0ZuLnRyYW5zY2x1ZGUsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLFxyXG4gICAgICAgICAgICAgICAgICBub2RlTGlua0ZuLmVsZW1lbnRUcmFuc2NsdWRlT25UaGlzRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCAmJiBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbikge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXBhcmVudEJvdW5kVHJhbnNjbHVkZUZuICYmIHRyYW5zY2x1ZGVGbikge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vZGVMaW5rRm4oY2hpbGRMaW5rRm4sIGNoaWxkU2NvcGUsIG5vZGUsICRyb290RWxlbWVudCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XHJcblxyXG4gICAgICAgICAgfSBlbHNlIGlmIChjaGlsZExpbmtGbikge1xyXG4gICAgICAgICAgICBjaGlsZExpbmtGbihzY29wZSwgbm9kZS5jaGlsZE5vZGVzLCB1bmRlZmluZWQsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuLCBwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuLCBlbGVtZW50VHJhbnNjbHVzaW9uKSB7XHJcblxyXG4gICAgICB2YXIgYm91bmRUcmFuc2NsdWRlRm4gPSBmdW5jdGlvbih0cmFuc2NsdWRlZFNjb3BlLCBjbG9uZUZuLCBjb250cm9sbGVycywgZnV0dXJlUGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgIHZhciBzY29wZUNyZWF0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKCF0cmFuc2NsdWRlZFNjb3BlKSB7XHJcbiAgICAgICAgICB0cmFuc2NsdWRlZFNjb3BlID0gc2NvcGUuJG5ldygpO1xyXG4gICAgICAgICAgdHJhbnNjbHVkZWRTY29wZS4kJHRyYW5zY2x1ZGVkID0gdHJ1ZTtcclxuICAgICAgICAgIHNjb3BlQ3JlYXRlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY2xvbmUgPSB0cmFuc2NsdWRlRm4odHJhbnNjbHVkZWRTY29wZSwgY2xvbmVGbiwgY29udHJvbGxlcnMsIHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4sIGZ1dHVyZVBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgIGlmIChzY29wZUNyZWF0ZWQgJiYgIWVsZW1lbnRUcmFuc2NsdXNpb24pIHtcclxuICAgICAgICAgIGNsb25lLm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkgeyB0cmFuc2NsdWRlZFNjb3BlLiRkZXN0cm95KCk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gYm91bmRUcmFuc2NsdWRlRm47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyBmb3IgZGlyZWN0aXZlcyBvbiB0aGUgZ2l2ZW4gbm9kZSBhbmQgYWRkcyB0aGVtIHRvIHRoZSBkaXJlY3RpdmUgY29sbGVjdGlvbiB3aGljaCBpc1xyXG4gICAgICogc29ydGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBub2RlIE5vZGUgdG8gc2VhcmNoLlxyXG4gICAgICogQHBhcmFtIGRpcmVjdGl2ZXMgQW4gYXJyYXkgdG8gd2hpY2ggdGhlIGRpcmVjdGl2ZXMgYXJlIGFkZGVkIHRvLiBUaGlzIGFycmF5IGlzIHNvcnRlZCBiZWZvcmVcclxuICAgICAqICAgICAgICB0aGUgZnVuY3Rpb24gcmV0dXJucy5cclxuICAgICAqIEBwYXJhbSBhdHRycyBUaGUgc2hhcmVkIGF0dHJzIG9iamVjdCB3aGljaCBpcyB1c2VkIHRvIHBvcHVsYXRlIHRoZSBub3JtYWxpemVkIGF0dHJpYnV0ZXMuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1heFByaW9yaXR5IE1heCBkaXJlY3RpdmUgcHJpb3JpdHkuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNvbGxlY3REaXJlY3RpdmVzKG5vZGUsIGRpcmVjdGl2ZXMsIGF0dHJzLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSB7XHJcbiAgICAgIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGUsXHJcbiAgICAgICAgICBhdHRyc01hcCA9IGF0dHJzLiRhdHRyLFxyXG4gICAgICAgICAgbWF0Y2gsXHJcbiAgICAgICAgICBjbGFzc05hbWU7XHJcblxyXG4gICAgICBzd2l0Y2gobm9kZVR5cGUpIHtcclxuICAgICAgICBjYXNlIDE6IC8qIEVsZW1lbnQgKi9cclxuICAgICAgICAgIC8vIHVzZSB0aGUgbm9kZSBuYW1lOiA8ZGlyZWN0aXZlPlxyXG4gICAgICAgICAgYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsXHJcbiAgICAgICAgICAgICAgZGlyZWN0aXZlTm9ybWFsaXplKG5vZGVOYW1lXyhub2RlKSksICdFJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSk7XHJcblxyXG4gICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICBmb3IgKHZhciBhdHRyLCBuYW1lLCBuTmFtZSwgbmdBdHRyTmFtZSwgdmFsdWUsIGlzTmdBdHRyLCBuQXR0cnMgPSBub2RlLmF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICBqID0gMCwgamogPSBuQXR0cnMgJiYgbkF0dHJzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcclxuICAgICAgICAgICAgdmFyIGF0dHJTdGFydE5hbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGF0dHJFbmROYW1lID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBhdHRyID0gbkF0dHJzW2pdO1xyXG4gICAgICAgICAgICBpZiAoIW1zaWUgfHwgbXNpZSA+PSA4IHx8IGF0dHIuc3BlY2lmaWVkKSB7XHJcbiAgICAgICAgICAgICAgbmFtZSA9IGF0dHIubmFtZTtcclxuICAgICAgICAgICAgICB2YWx1ZSA9IHRyaW0oYXR0ci52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHN1cHBvcnQgbmdBdHRyIGF0dHJpYnV0ZSBiaW5kaW5nXHJcbiAgICAgICAgICAgICAgbmdBdHRyTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKTtcclxuICAgICAgICAgICAgICBpZiAoaXNOZ0F0dHIgPSBOR19BVFRSX0JJTkRJTkcudGVzdChuZ0F0dHJOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9IHNuYWtlX2Nhc2UobmdBdHRyTmFtZS5zdWJzdHIoNiksICctJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgZGlyZWN0aXZlTk5hbWUgPSBuZ0F0dHJOYW1lLnJlcGxhY2UoLyhTdGFydHxFbmQpJC8sICcnKTtcclxuICAgICAgICAgICAgICBpZiAoZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQoZGlyZWN0aXZlTk5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmdBdHRyTmFtZSA9PT0gZGlyZWN0aXZlTk5hbWUgKyAnU3RhcnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgIGF0dHJTdGFydE5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICAgICAgICBhdHRyRW5kTmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gNSkgKyAnZW5kJztcclxuICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gNik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBuTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICAgIGF0dHJzTWFwW25OYW1lXSA9IG5hbWU7XHJcbiAgICAgICAgICAgICAgaWYgKGlzTmdBdHRyIHx8ICFhdHRycy5oYXNPd25Qcm9wZXJ0eShuTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChnZXRCb29sZWFuQXR0ck5hbWUobm9kZSwgbk5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdHJ1ZTsgLy8gcHJlc2VuY2UgbWVhbnMgdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZShub2RlLCBkaXJlY3RpdmVzLCB2YWx1ZSwgbk5hbWUsIGlzTmdBdHRyKTtcclxuICAgICAgICAgICAgICBhZGREaXJlY3RpdmUoZGlyZWN0aXZlcywgbk5hbWUsICdBJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgYXR0clN0YXJ0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJFbmROYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIHVzZSBjbGFzcyBhcyBkaXJlY3RpdmVcclxuICAgICAgICAgIGNsYXNzTmFtZSA9IG5vZGUuY2xhc3NOYW1lO1xyXG4gICAgICAgICAgaWYgKGlzU3RyaW5nKGNsYXNzTmFtZSkgJiYgY2xhc3NOYW1lICE9PSAnJykge1xyXG4gICAgICAgICAgICB3aGlsZSAobWF0Y2ggPSBDTEFTU19ESVJFQ1RJVkVfUkVHRVhQLmV4ZWMoY2xhc3NOYW1lKSkge1xyXG4gICAgICAgICAgICAgIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG1hdGNoWzJdKTtcclxuICAgICAgICAgICAgICBpZiAoYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnQycsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB0cmltKG1hdGNoWzNdKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnN1YnN0cihtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzogLyogVGV4dCBOb2RlICovXHJcbiAgICAgICAgICBhZGRUZXh0SW50ZXJwb2xhdGVEaXJlY3RpdmUoZGlyZWN0aXZlcywgbm9kZS5ub2RlVmFsdWUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA4OiAvKiBDb21tZW50ICovXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBtYXRjaCA9IENPTU1FTlRfRElSRUNUSVZFX1JFR0VYUC5leGVjKG5vZGUubm9kZVZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgbk5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobWF0Y2hbMV0pO1xyXG4gICAgICAgICAgICAgIGlmIChhZGREaXJlY3RpdmUoZGlyZWN0aXZlcywgbk5hbWUsICdNJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSkpIHtcclxuICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHRyaW0obWF0Y2hbMl0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyB0dXJucyBvdXQgdGhhdCB1bmRlciBzb21lIGNpcmN1bXN0YW5jZXMgSUU5IHRocm93cyBlcnJvcnMgd2hlbiBvbmUgYXR0ZW1wdHMgdG8gcmVhZFxyXG4gICAgICAgICAgICAvLyBjb21tZW50J3Mgbm9kZSB2YWx1ZS5cclxuICAgICAgICAgICAgLy8gSnVzdCBpZ25vcmUgaXQgYW5kIGNvbnRpbnVlLiAoQ2FuJ3Qgc2VlbSB0byByZXByb2R1Y2UgaW4gdGVzdCBjYXNlLilcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkaXJlY3RpdmVzLnNvcnQoYnlQcmlvcml0eSk7XHJcbiAgICAgIHJldHVybiBkaXJlY3RpdmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSBub2RlIHdpdGggYW4gZGlyZWN0aXZlLXN0YXJ0IGl0IGNvbGxlY3RzIGFsbCBvZiB0aGUgc2libGluZ3MgdW50aWwgaXQgZmluZHNcclxuICAgICAqIGRpcmVjdGl2ZS1lbmQuXHJcbiAgICAgKiBAcGFyYW0gbm9kZVxyXG4gICAgICogQHBhcmFtIGF0dHJTdGFydFxyXG4gICAgICogQHBhcmFtIGF0dHJFbmRcclxuICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBncm91cFNjYW4obm9kZSwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XHJcbiAgICAgIHZhciBub2RlcyA9IFtdO1xyXG4gICAgICB2YXIgZGVwdGggPSAwO1xyXG4gICAgICBpZiAoYXR0clN0YXJ0ICYmIG5vZGUuaGFzQXR0cmlidXRlICYmIG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIHtcclxuICAgICAgICB2YXIgc3RhcnROb2RlID0gbm9kZTtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3V0ZXJkaXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJVbnRlcm1pbmF0ZWQgYXR0cmlidXRlLCBmb3VuZCAnezB9JyBidXQgbm8gbWF0Y2hpbmcgJ3sxfScgZm91bmQuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyU3RhcnQsIGF0dHJFbmQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAvKiogRWxlbWVudCAqKi8pIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIGRlcHRoKys7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZShhdHRyRW5kKSkgZGVwdGgtLTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcclxuICAgICAgICB9IHdoaWxlIChkZXB0aCA+IDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBqcUxpdGUobm9kZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JhcHBlciBmb3IgbGlua2luZyBmdW5jdGlvbiB3aGljaCBjb252ZXJ0cyBub3JtYWwgbGlua2luZyBmdW5jdGlvbiBpbnRvIGEgZ3JvdXBlZFxyXG4gICAgICogbGlua2luZyBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBsaW5rRm5cclxuICAgICAqIEBwYXJhbSBhdHRyU3RhcnRcclxuICAgICAqIEBwYXJhbSBhdHRyRW5kXHJcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKGxpbmtGbiwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pIHtcclxuICAgICAgICBlbGVtZW50ID0gZ3JvdXBTY2FuKGVsZW1lbnRbMF0sIGF0dHJTdGFydCwgYXR0ckVuZCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25jZSB0aGUgZGlyZWN0aXZlcyBoYXZlIGJlZW4gY29sbGVjdGVkLCB0aGVpciBjb21waWxlIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQuIFRoaXMgbWV0aG9kXHJcbiAgICAgKiBpcyByZXNwb25zaWJsZSBmb3IgaW5saW5pbmcgZGlyZWN0aXZlIHRlbXBsYXRlcyBhcyB3ZWxsIGFzIHRlcm1pbmF0aW5nIHRoZSBhcHBsaWNhdGlvblxyXG4gICAgICogb2YgdGhlIGRpcmVjdGl2ZXMgaWYgdGhlIHRlcm1pbmFsIGRpcmVjdGl2ZSBoYXMgYmVlbiByZWFjaGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXMgQXJyYXkgb2YgY29sbGVjdGVkIGRpcmVjdGl2ZXMgdG8gZXhlY3V0ZSB0aGVpciBjb21waWxlIGZ1bmN0aW9uLlxyXG4gICAgICogICAgICAgIHRoaXMgbmVlZHMgdG8gYmUgcHJlLXNvcnRlZCBieSBwcmlvcml0eSBvcmRlci5cclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gY29tcGlsZU5vZGUgVGhlIHJhdyBET00gbm9kZSB0byBhcHBseSB0aGUgY29tcGlsZSBmdW5jdGlvbnMgdG9cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wbGF0ZUF0dHJzIFRoZSBzaGFyZWQgYXR0cmlidXRlIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGFuZ3VsYXIuU2NvcGUsIGNsb25lQXR0YWNoRm49KX0gdHJhbnNjbHVkZUZuIEEgbGlua2luZyBmdW5jdGlvbiwgd2hlcmUgdGhlXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUgYXJndW1lbnQgaXMgYXV0by1nZW5lcmF0ZWQgdG8gdGhlIG5ld1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIG9mIHRoZSB0cmFuc2NsdWRlZCBwYXJlbnQgc2NvcGUuXHJcbiAgICAgKiBAcGFyYW0ge0pRTGl0ZX0ganFDb2xsZWN0aW9uIElmIHdlIGFyZSB3b3JraW5nIG9uIHRoZSByb290IG9mIHRoZSBjb21waWxlIHRyZWUgdGhlbiB0aGlzXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50IGhhcyB0aGUgcm9vdCBqcUxpdGUgYXJyYXkgc28gdGhhdCB3ZSBjYW4gcmVwbGFjZSBub2Rlc1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbiBpdC5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gb3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlIEFuIG9wdGlvbmFsIGRpcmVjdGl2ZSB0aGF0IHdpbGwgYmUgaWdub3JlZCB3aGVuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21waWxpbmcgdGhlIHRyYW5zY2x1c2lvbi5cclxuICAgICAqIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcHJlTGlua0Zuc1xyXG4gICAgICogQHBhcmFtIHtBcnJheS48RnVuY3Rpb24+fSBwb3N0TGlua0Zuc1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgQ29udGV4dCB1c2VkIGZvciBwcmV2aW91cyBjb21waWxhdGlvbiBvZiB0aGUgY3VycmVudFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBsaW5rRm5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzLCB0cmFuc2NsdWRlRm4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganFDb2xsZWN0aW9uLCBvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUsIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcclxuICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgfHwge307XHJcblxyXG4gICAgICB2YXIgdGVybWluYWxQcmlvcml0eSA9IC1OdW1iZXIuTUFYX1ZBTFVFLFxyXG4gICAgICAgICAgbmV3U2NvcGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlcyA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQuY29udHJvbGxlckRpcmVjdGl2ZXMsXHJcbiAgICAgICAgICBjb250cm9sbGVycyxcclxuICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0LnRlbXBsYXRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQubm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSxcclxuICAgICAgICAgIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSBmYWxzZSxcclxuICAgICAgICAgIGhhc1RlbXBsYXRlID0gZmFsc2UsXHJcbiAgICAgICAgICBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAkY29tcGlsZU5vZGUgPSB0ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudCA9IGpxTGl0ZShjb21waWxlTm9kZSksXHJcbiAgICAgICAgICBkaXJlY3RpdmUsXHJcbiAgICAgICAgICBkaXJlY3RpdmVOYW1lLFxyXG4gICAgICAgICAgJHRlbXBsYXRlLFxyXG4gICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSxcclxuICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gdHJhbnNjbHVkZUZuLFxyXG4gICAgICAgICAgbGlua0ZuLFxyXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWU7XHJcblxyXG4gICAgICAvLyBleGVjdXRlcyBhbGwgZGlyZWN0aXZlcyBvbiB0aGUgY3VycmVudCBlbGVtZW50XHJcbiAgICAgIGZvcih2YXIgaSA9IDAsIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgZGlyZWN0aXZlID0gZGlyZWN0aXZlc1tpXTtcclxuICAgICAgICB2YXIgYXR0clN0YXJ0ID0gZGlyZWN0aXZlLiQkc3RhcnQ7XHJcbiAgICAgICAgdmFyIGF0dHJFbmQgPSBkaXJlY3RpdmUuJCRlbmQ7XHJcblxyXG4gICAgICAgIC8vIGNvbGxlY3QgbXVsdGlibG9jayBzZWN0aW9uc1xyXG4gICAgICAgIGlmIChhdHRyU3RhcnQpIHtcclxuICAgICAgICAgICRjb21waWxlTm9kZSA9IGdyb3VwU2Nhbihjb21waWxlTm9kZSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHRlbXBsYXRlID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAodGVybWluYWxQcmlvcml0eSA+IGRpcmVjdGl2ZS5wcmlvcml0eSkge1xyXG4gICAgICAgICAgYnJlYWs7IC8vIHByZXZlbnQgZnVydGhlciBwcm9jZXNzaW5nIG9mIGRpcmVjdGl2ZXNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkaXJlY3RpdmVWYWx1ZSA9IGRpcmVjdGl2ZS5zY29wZSkge1xyXG5cclxuICAgICAgICAgIC8vIHNraXAgdGhlIGNoZWNrIGZvciBkaXJlY3RpdmVzIHdpdGggYXN5bmMgdGVtcGxhdGVzLCB3ZSdsbCBjaGVjayB0aGUgZGVyaXZlZCBzeW5jXHJcbiAgICAgICAgICAvLyBkaXJlY3RpdmUgd2hlbiB0aGUgdGVtcGxhdGUgYXJyaXZlc1xyXG4gICAgICAgICAgaWYgKCFkaXJlY3RpdmUudGVtcGxhdGVVcmwpIHtcclxuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KGRpcmVjdGl2ZVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgIC8vIFRoaXMgZGlyZWN0aXZlIGlzIHRyeWluZyB0byBhZGQgYW4gaXNvbGF0ZWQgc2NvcGUuXHJcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBubyBzY29wZSBvZiBhbnkga2luZCBhbHJlYWR5XHJcbiAgICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSB8fCBuZXdTY29wZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIFRoaXMgZGlyZWN0aXZlIGlzIHRyeWluZyB0byBhZGQgYSBjaGlsZCBzY29wZS5cclxuICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZXJlIGlzIG5vIGlzb2xhdGVkIHNjb3BlIGFscmVhZHlcclxuICAgICAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgnbmV3L2lzb2xhdGVkIHNjb3BlJywgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLCBkaXJlY3RpdmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGVOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIG5ld1Njb3BlRGlyZWN0aXZlID0gbmV3U2NvcGVEaXJlY3RpdmUgfHwgZGlyZWN0aXZlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZS5uYW1lO1xyXG5cclxuICAgICAgICBpZiAoIWRpcmVjdGl2ZS50ZW1wbGF0ZVVybCAmJiBkaXJlY3RpdmUuY29udHJvbGxlcikge1xyXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUuY29udHJvbGxlcjtcclxuICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzID0gY29udHJvbGxlckRpcmVjdGl2ZXMgfHwge307XHJcbiAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZShcIidcIiArIGRpcmVjdGl2ZU5hbWUgKyBcIicgY29udHJvbGxlclwiLFxyXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSA9IGRpcmVjdGl2ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkaXJlY3RpdmVWYWx1ZSA9IGRpcmVjdGl2ZS50cmFuc2NsdWRlKSB7XHJcbiAgICAgICAgICBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UgbmdJZiBhbmQgbmdSZXBlYXQgc28gdGhhdCB3ZSBkb24ndCBjb21wbGFpbiBhYm91dCBkdXBsaWNhdGUgdHJhbnNjbHVzaW9uLlxyXG4gICAgICAgICAgLy8gVGhpcyBvcHRpb24gc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBkaXJlY3RpdmVzIHRoYXQga25vdyBob3cgdG8gc2FmZWx5IGhhbmRsZSBlbGVtZW50IHRyYW5zY2x1c2lvbixcclxuICAgICAgICAgIC8vIHdoZXJlIHRoZSB0cmFuc2NsdWRlZCBub2RlcyBhcmUgYWRkZWQgb3IgcmVwbGFjZWQgYWZ0ZXIgbGlua2luZy5cclxuICAgICAgICAgIGlmICghZGlyZWN0aXZlLiQkdGxiKSB7XHJcbiAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCd0cmFuc2NsdXNpb24nLCBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZVZhbHVlID09ICdlbGVtZW50Jykge1xyXG4gICAgICAgICAgICBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRlcm1pbmFsUHJpb3JpdHkgPSBkaXJlY3RpdmUucHJpb3JpdHk7XHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZSA9ICRjb21waWxlTm9kZTtcclxuICAgICAgICAgICAgJGNvbXBpbGVOb2RlID0gdGVtcGxhdGVBdHRycy4kJGVsZW1lbnQgPVxyXG4gICAgICAgICAgICAgICAganFMaXRlKGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyAnICsgZGlyZWN0aXZlTmFtZSArICc6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVBdHRyc1tkaXJlY3RpdmVOYW1lXSArICcgJykpO1xyXG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICRjb21waWxlTm9kZVswXTtcclxuICAgICAgICAgICAgcmVwbGFjZVdpdGgoanFDb2xsZWN0aW9uLCBzbGljZUFyZ3MoJHRlbXBsYXRlKSwgY29tcGlsZU5vZGUpO1xyXG5cclxuICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4gPSBjb21waWxlKCR0ZW1wbGF0ZSwgdHJhbnNjbHVkZUZuLCB0ZXJtaW5hbFByaW9yaXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSAmJiByZXBsYWNlRGlyZWN0aXZlLm5hbWUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgcGFzcyBpbjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBjb250cm9sbGVyRGlyZWN0aXZlcyAtIG90aGVyd2lzZSB3ZSdsbCBjcmVhdGUgZHVwbGljYXRlcyBjb250cm9sbGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSBvciB0ZW1wbGF0ZURpcmVjdGl2ZSAtIGNvbWJpbmluZyB0ZW1wbGF0ZXMgd2l0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVsZW1lbnQgdHJhbnNjbHVzaW9uIGRvZXNuJ3QgbWFrZSBzZW5zZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCBvbmx5IG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgc28gdGhhdCB3ZSBwcmV2ZW50IHB1dHRpbmcgdHJhbnNjbHVzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBzYW1lIGVsZW1lbnQgbW9yZSB0aGFuIG9uY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6IG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHRlbXBsYXRlID0ganFMaXRlKGpxTGl0ZUNsb25lKGNvbXBpbGVOb2RlKSkuY29udGVudHMoKTtcclxuICAgICAgICAgICAgJGNvbXBpbGVOb2RlLmVtcHR5KCk7IC8vIGNsZWFyIGNvbnRlbnRzXHJcbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gY29tcGlsZSgkdGVtcGxhdGUsIHRyYW5zY2x1ZGVGbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGlyZWN0aXZlLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICBoYXNUZW1wbGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgndGVtcGxhdGUnLCB0ZW1wbGF0ZURpcmVjdGl2ZSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XHJcblxyXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSAoaXNGdW5jdGlvbihkaXJlY3RpdmUudGVtcGxhdGUpKVxyXG4gICAgICAgICAgICAgID8gZGlyZWN0aXZlLnRlbXBsYXRlKCRjb21waWxlTm9kZSwgdGVtcGxhdGVBdHRycylcclxuICAgICAgICAgICAgICA6IGRpcmVjdGl2ZS50ZW1wbGF0ZTtcclxuXHJcbiAgICAgICAgICBkaXJlY3RpdmVWYWx1ZSA9IGRlbm9ybWFsaXplVGVtcGxhdGUoZGlyZWN0aXZlVmFsdWUpO1xyXG5cclxuICAgICAgICAgIGlmIChkaXJlY3RpdmUucmVwbGFjZSkge1xyXG4gICAgICAgICAgICByZXBsYWNlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xyXG4gICAgICAgICAgICBpZiAoanFMaXRlSXNUZXh0Tm9kZShkaXJlY3RpdmVWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBqcUxpdGUod3JhcFRlbXBsYXRlKGRpcmVjdGl2ZS50ZW1wbGF0ZU5hbWVzcGFjZSwgdHJpbShkaXJlY3RpdmVWYWx1ZSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICR0ZW1wbGF0ZVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9IDEgfHwgY29tcGlsZU5vZGUubm9kZVR5cGUgIT09IDEpIHtcclxuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndHBscnQnLFxyXG4gICAgICAgICAgICAgICAgICBcIlRlbXBsYXRlIGZvciBkaXJlY3RpdmUgJ3swfScgbXVzdCBoYXZlIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gezF9XCIsXHJcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsICcnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVwbGFjZVdpdGgoanFDb2xsZWN0aW9uLCAkY29tcGlsZU5vZGUsIGNvbXBpbGVOb2RlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXdUZW1wbGF0ZUF0dHJzID0geyRhdHRyOiB7fX07XHJcblxyXG4gICAgICAgICAgICAvLyBjb21iaW5lIGRpcmVjdGl2ZXMgZnJvbSB0aGUgb3JpZ2luYWwgbm9kZSBhbmQgZnJvbSB0aGUgdGVtcGxhdGU6XHJcbiAgICAgICAgICAgIC8vIC0gdGFrZSB0aGUgYXJyYXkgb2YgZGlyZWN0aXZlcyBmb3IgdGhpcyBlbGVtZW50XHJcbiAgICAgICAgICAgIC8vIC0gc3BsaXQgaXQgaW50byB0d28gcGFydHMsIHRob3NlIHRoYXQgYWxyZWFkeSBhcHBsaWVkIChwcm9jZXNzZWQpIGFuZCB0aG9zZSB0aGF0IHdlcmVuJ3QgKHVucHJvY2Vzc2VkKVxyXG4gICAgICAgICAgICAvLyAtIGNvbGxlY3QgZGlyZWN0aXZlcyBmcm9tIHRoZSB0ZW1wbGF0ZSBhbmQgc29ydCB0aGVtIGJ5IHByaW9yaXR5XHJcbiAgICAgICAgICAgIC8vIC0gY29tYmluZSBkaXJlY3RpdmVzIGFzOiBwcm9jZXNzZWQgKyB0ZW1wbGF0ZSArIHVucHJvY2Vzc2VkXHJcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhjb21waWxlTm9kZSwgW10sIG5ld1RlbXBsYXRlQXR0cnMpO1xyXG4gICAgICAgICAgICB2YXIgdW5wcm9jZXNzZWREaXJlY3RpdmVzID0gZGlyZWN0aXZlcy5zcGxpY2UoaSArIDEsIGRpcmVjdGl2ZXMubGVuZ3RoIC0gKGkgKyAxKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgbWFya0RpcmVjdGl2ZXNBc0lzb2xhdGUodGVtcGxhdGVEaXJlY3RpdmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkaXJlY3RpdmVzID0gZGlyZWN0aXZlcy5jb25jYXQodGVtcGxhdGVEaXJlY3RpdmVzKS5jb25jYXQodW5wcm9jZXNzZWREaXJlY3RpdmVzKTtcclxuICAgICAgICAgICAgbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModGVtcGxhdGVBdHRycywgbmV3VGVtcGxhdGVBdHRycyk7XHJcblxyXG4gICAgICAgICAgICBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGNvbXBpbGVOb2RlLmh0bWwoZGlyZWN0aXZlVmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZW1wbGF0ZVVybCkge1xyXG4gICAgICAgICAgaGFzVGVtcGxhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ3RlbXBsYXRlJywgdGVtcGxhdGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcclxuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xyXG5cclxuICAgICAgICAgIGlmIChkaXJlY3RpdmUucmVwbGFjZSkge1xyXG4gICAgICAgICAgICByZXBsYWNlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIG5vZGVMaW5rRm4gPSBjb21waWxlVGVtcGxhdGVVcmwoZGlyZWN0aXZlcy5zcGxpY2UoaSwgZGlyZWN0aXZlcy5sZW5ndGggLSBpKSwgJGNvbXBpbGVOb2RlLFxyXG4gICAgICAgICAgICAgIHRlbXBsYXRlQXR0cnMsIGpxQ29sbGVjdGlvbiwgaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSAmJiBjaGlsZFRyYW5zY2x1ZGVGbiwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzOiBjb250cm9sbGVyRGlyZWN0aXZlcyxcclxuICAgICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTogbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmU6IHRlbXBsYXRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTogbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcclxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGl2ZS5jb21waWxlKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsaW5rRm4gPSBkaXJlY3RpdmUuY29tcGlsZSgkY29tcGlsZU5vZGUsIHRlbXBsYXRlQXR0cnMsIGNoaWxkVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlua0ZuKSkge1xyXG4gICAgICAgICAgICAgIGFkZExpbmtGbnMobnVsbCwgbGlua0ZuLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmtGbikge1xyXG4gICAgICAgICAgICAgIGFkZExpbmtGbnMobGlua0ZuLnByZSwgbGlua0ZuLnBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSwgc3RhcnRpbmdUYWcoJGNvbXBpbGVOb2RlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGlyZWN0aXZlLnRlcm1pbmFsKSB7XHJcbiAgICAgICAgICBub2RlTGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcclxuICAgICAgICAgIHRlcm1pbmFsUHJpb3JpdHkgPSBNYXRoLm1heCh0ZXJtaW5hbFByaW9yaXR5LCBkaXJlY3RpdmUucHJpb3JpdHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG5vZGVMaW5rRm4uc2NvcGUgPSBuZXdTY29wZURpcmVjdGl2ZSAmJiBuZXdTY29wZURpcmVjdGl2ZS5zY29wZSA9PT0gdHJ1ZTtcclxuICAgICAgbm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCA9IGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmU7XHJcbiAgICAgIG5vZGVMaW5rRm4uZWxlbWVudFRyYW5zY2x1ZGVPblRoaXNFbGVtZW50ID0gaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU7XHJcbiAgICAgIG5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50ID0gaGFzVGVtcGxhdGU7XHJcbiAgICAgIG5vZGVMaW5rRm4udHJhbnNjbHVkZSA9IGNoaWxkVHJhbnNjbHVkZUZuO1xyXG5cclxuICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlO1xyXG5cclxuICAgICAgLy8gbWlnaHQgYmUgbm9ybWFsIG9yIGRlbGF5ZWQgbm9kZUxpbmtGbiBkZXBlbmRpbmcgb24gaWYgdGVtcGxhdGVVcmwgaXMgcHJlc2VudFxyXG4gICAgICByZXR1cm4gbm9kZUxpbmtGbjtcclxuXHJcbiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgICBmdW5jdGlvbiBhZGRMaW5rRm5zKHByZSwgcG9zdCwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XHJcbiAgICAgICAgaWYgKHByZSkge1xyXG4gICAgICAgICAgaWYgKGF0dHJTdGFydCkgcHJlID0gZ3JvdXBFbGVtZW50c0xpbmtGbldyYXBwZXIocHJlLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xyXG4gICAgICAgICAgcHJlLnJlcXVpcmUgPSBkaXJlY3RpdmUucmVxdWlyZTtcclxuICAgICAgICAgIHByZS5kaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTmFtZTtcclxuICAgICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPT09IGRpcmVjdGl2ZSB8fCBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpIHtcclxuICAgICAgICAgICAgcHJlID0gY2xvbmVBbmRBbm5vdGF0ZUZuKHByZSwge2lzb2xhdGVTY29wZTogdHJ1ZX0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcHJlTGlua0Zucy5wdXNoKHByZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwb3N0KSB7XHJcbiAgICAgICAgICBpZiAoYXR0clN0YXJ0KSBwb3N0ID0gZ3JvdXBFbGVtZW50c0xpbmtGbldyYXBwZXIocG9zdCwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcclxuICAgICAgICAgIHBvc3QucmVxdWlyZSA9IGRpcmVjdGl2ZS5yZXF1aXJlO1xyXG4gICAgICAgICAgcG9zdC5kaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTmFtZTtcclxuICAgICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPT09IGRpcmVjdGl2ZSB8fCBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpIHtcclxuICAgICAgICAgICAgcG9zdCA9IGNsb25lQW5kQW5ub3RhdGVGbihwb3N0LCB7aXNvbGF0ZVNjb3BlOiB0cnVlfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwb3N0TGlua0Zucy5wdXNoKHBvc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGdldENvbnRyb2xsZXJzKGRpcmVjdGl2ZU5hbWUsIHJlcXVpcmUsICRlbGVtZW50LCBlbGVtZW50Q29udHJvbGxlcnMpIHtcclxuICAgICAgICB2YXIgdmFsdWUsIHJldHJpZXZhbE1ldGhvZCA9ICdkYXRhJywgb3B0aW9uYWwgPSBmYWxzZTtcclxuICAgICAgICBpZiAoaXNTdHJpbmcocmVxdWlyZSkpIHtcclxuICAgICAgICAgIHdoaWxlKCh2YWx1ZSA9IHJlcXVpcmUuY2hhckF0KDApKSA9PSAnXicgfHwgdmFsdWUgPT0gJz8nKSB7XHJcbiAgICAgICAgICAgIHJlcXVpcmUgPSByZXF1aXJlLnN1YnN0cigxKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09ICdeJykge1xyXG4gICAgICAgICAgICAgIHJldHJpZXZhbE1ldGhvZCA9ICdpbmhlcml0ZWREYXRhJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcHRpb25hbCA9IG9wdGlvbmFsIHx8IHZhbHVlID09ICc/JztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhbHVlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICBpZiAoZWxlbWVudENvbnRyb2xsZXJzICYmIHJldHJpZXZhbE1ldGhvZCA9PT0gJ2RhdGEnKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9IGVsZW1lbnRDb250cm9sbGVyc1tyZXF1aXJlXSkge1xyXG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuaW5zdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhbHVlID0gdmFsdWUgfHwgJGVsZW1lbnRbcmV0cmlldmFsTWV0aG9kXSgnJCcgKyByZXF1aXJlICsgJ0NvbnRyb2xsZXInKTtcclxuXHJcbiAgICAgICAgICBpZiAoIXZhbHVlICYmICFvcHRpb25hbCkge1xyXG4gICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignY3RyZXEnLFxyXG4gICAgICAgICAgICAgICAgXCJDb250cm9sbGVyICd7MH0nLCByZXF1aXJlZCBieSBkaXJlY3RpdmUgJ3sxfScsIGNhbid0IGJlIGZvdW5kIVwiLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZSwgZGlyZWN0aXZlTmFtZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHJlcXVpcmUpKSB7XHJcbiAgICAgICAgICB2YWx1ZSA9IFtdO1xyXG4gICAgICAgICAgZm9yRWFjaChyZXF1aXJlLCBmdW5jdGlvbihyZXF1aXJlKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLnB1c2goZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSwgcmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycykpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIGZ1bmN0aW9uIG5vZGVMaW5rRm4oY2hpbGRMaW5rRm4sIHNjb3BlLCBsaW5rTm9kZSwgJHJvb3RFbGVtZW50LCBib3VuZFRyYW5zY2x1ZGVGbikge1xyXG4gICAgICAgIHZhciBpLCBpaSwgbGlua0ZuLCBjb250cm9sbGVyLCBpc29sYXRlU2NvcGUsIGVsZW1lbnRDb250cm9sbGVycywgdHJhbnNjbHVkZUZuLCAkZWxlbWVudCxcclxuICAgICAgICAgICAgYXR0cnM7XHJcblxyXG4gICAgICAgIGlmIChjb21waWxlTm9kZSA9PT0gbGlua05vZGUpIHtcclxuICAgICAgICAgIGF0dHJzID0gdGVtcGxhdGVBdHRycztcclxuICAgICAgICAgICRlbGVtZW50ID0gdGVtcGxhdGVBdHRycy4kJGVsZW1lbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRlbGVtZW50ID0ganFMaXRlKGxpbmtOb2RlKTtcclxuICAgICAgICAgIGF0dHJzID0gbmV3IEF0dHJpYnV0ZXMoJGVsZW1lbnQsIHRlbXBsYXRlQXR0cnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgaXNvbGF0ZVNjb3BlID0gc2NvcGUuJG5ldyh0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuICYmIGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlO1xyXG4gICAgICAgIGlmIChjb250cm9sbGVyRGlyZWN0aXZlcykge1xyXG4gICAgICAgICAgLy8gVE9ETzogbWVyZ2UgYGNvbnRyb2xsZXJzYCBhbmQgYGVsZW1lbnRDb250cm9sbGVyc2AgaW50byBzaW5nbGUgb2JqZWN0LlxyXG4gICAgICAgICAgY29udHJvbGxlcnMgPSB7fTtcclxuICAgICAgICAgIGVsZW1lbnRDb250cm9sbGVycyA9IHt9O1xyXG4gICAgICAgICAgZm9yRWFjaChjb250cm9sbGVyRGlyZWN0aXZlcywgZnVuY3Rpb24oZGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHZhciBsb2NhbHMgPSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlOiBkaXJlY3RpdmUgPT09IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSB8fCBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUgPyBpc29sYXRlU2NvcGUgOiBzY29wZSxcclxuICAgICAgICAgICAgICAkZWxlbWVudDogJGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgJGF0dHJzOiBhdHRycyxcclxuICAgICAgICAgICAgICAkdHJhbnNjbHVkZTogdHJhbnNjbHVkZUZuXHJcbiAgICAgICAgICAgIH0sIGNvbnRyb2xsZXJJbnN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBkaXJlY3RpdmUuY29udHJvbGxlcjtcclxuICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIgPT0gJ0AnKSB7XHJcbiAgICAgICAgICAgICAgY29udHJvbGxlciA9IGF0dHJzW2RpcmVjdGl2ZS5uYW1lXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlID0gJGNvbnRyb2xsZXIoY29udHJvbGxlciwgbG9jYWxzLCB0cnVlLCBkaXJlY3RpdmUuY29udHJvbGxlckFzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZvciBkaXJlY3RpdmVzIHdpdGggZWxlbWVudCB0cmFuc2NsdXNpb24gdGhlIGVsZW1lbnQgaXMgYSBjb21tZW50LFxyXG4gICAgICAgICAgICAvLyBidXQgalF1ZXJ5IC5kYXRhIGRvZXNuJ3Qgc3VwcG9ydCBhdHRhY2hpbmcgZGF0YSB0byBjb21tZW50IG5vZGVzIGFzIGl0J3MgaGFyZCB0b1xyXG4gICAgICAgICAgICAvLyBjbGVhbiB1cCAoaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvODMzNSkuXHJcbiAgICAgICAgICAgIC8vIEluc3RlYWQsIHdlIHNhdmUgdGhlIGNvbnRyb2xsZXJzIGZvciB0aGUgZWxlbWVudCBpbiBhIGxvY2FsIGhhc2ggYW5kIGF0dGFjaCB0byAuZGF0YVxyXG4gICAgICAgICAgICAvLyBsYXRlciwgb25jZSB3ZSBoYXZlIHRoZSBhY3R1YWwgZWxlbWVudC5cclxuICAgICAgICAgICAgZWxlbWVudENvbnRyb2xsZXJzW2RpcmVjdGl2ZS5uYW1lXSA9IGNvbnRyb2xsZXJJbnN0YW5jZTtcclxuICAgICAgICAgICAgaWYgKCFoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJyQnICsgZGlyZWN0aXZlLm5hbWUgKyAnQ29udHJvbGxlcicsIGNvbnRyb2xsZXJJbnN0YW5jZS5pbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJzW2RpcmVjdGl2ZS5uYW1lXSA9IGNvbnRyb2xsZXJJbnN0YW5jZTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgdmFyIExPQ0FMX1JFR0VYUCA9IC9eXFxzKihbQD0mXSkoXFw/PylcXHMqKFxcdyopXFxzKiQvO1xyXG5cclxuICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oJGVsZW1lbnQsIGlzb2xhdGVTY29wZSwgdHJ1ZSwgISh0ZW1wbGF0ZURpcmVjdGl2ZSAmJiAodGVtcGxhdGVEaXJlY3RpdmUgPT09IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSB8fFxyXG4gICAgICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID09PSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUuJCRvcmlnaW5hbERpcmVjdGl2ZSkpKTtcclxuICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUNsYXNzKCRlbGVtZW50LCB0cnVlKTtcclxuXHJcbiAgICAgICAgICB2YXIgaXNvbGF0ZVNjb3BlQ29udHJvbGxlciA9IGNvbnRyb2xsZXJzICYmIGNvbnRyb2xsZXJzW25ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS5uYW1lXTtcclxuICAgICAgICAgIHZhciBpc29sYXRlQmluZGluZ0NvbnRleHQgPSBpc29sYXRlU2NvcGU7XHJcbiAgICAgICAgICBpZiAoaXNvbGF0ZVNjb3BlQ29udHJvbGxlciAmJiBpc29sYXRlU2NvcGVDb250cm9sbGVyLmlkZW50aWZpZXIgJiZcclxuICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUuYmluZFRvQ29udHJvbGxlciA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBpc29sYXRlQmluZGluZ0NvbnRleHQgPSBpc29sYXRlU2NvcGVDb250cm9sbGVyLmluc3RhbmNlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZvckVhY2goaXNvbGF0ZVNjb3BlLiQkaXNvbGF0ZUJpbmRpbmdzID0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLiQkaXNvbGF0ZUJpbmRpbmdzLCBmdW5jdGlvbihkZWZpbml0aW9uLCBzY29wZU5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGF0dHJOYW1lID0gZGVmaW5pdGlvbi5hdHRyTmFtZSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbmFsID0gZGVmaW5pdGlvbi5vcHRpb25hbCxcclxuICAgICAgICAgICAgICAgIG1vZGUgPSBkZWZpbml0aW9uLm1vZGUsIC8vIEAsID0sIG9yICZcclxuICAgICAgICAgICAgICAgIGxhc3RWYWx1ZSxcclxuICAgICAgICAgICAgICAgIHBhcmVudEdldCwgcGFyZW50U2V0LCBjb21wYXJlO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7XHJcblxyXG4gICAgICAgICAgICAgIGNhc2UgJ0AnOlxyXG4gICAgICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoYXR0ck5hbWUsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF0dHJzLiQkb2JzZXJ2ZXJzW2F0dHJOYW1lXS4kJHNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICAgICAgICBpZiggYXR0cnNbYXR0ck5hbWVdICkge1xyXG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGhhcyBiZWVuIHByb3ZpZGVkIHRoZW4gd2UgdHJpZ2dlciBhbiBpbnRlcnBvbGF0aW9uIHRvIGVuc3VyZVxyXG4gICAgICAgICAgICAgICAgICAvLyB0aGUgdmFsdWUgaXMgdGhlcmUgZm9yIHVzZSBpbiB0aGUgbGluayBmblxyXG4gICAgICAgICAgICAgICAgICBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9ICRpbnRlcnBvbGF0ZShhdHRyc1thdHRyTmFtZV0pKHNjb3BlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlICc9JzpcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCAmJiAhYXR0cnNbYXR0ck5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhcmVudEdldCA9ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudEdldC5saXRlcmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBlcXVhbHM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBjb21wYXJlID0gZnVuY3Rpb24oYSxiKSB7IHJldHVybiBhID09PSBiIHx8IChhICE9PSBhICYmIGIgIT09IGIpOyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFyZW50U2V0ID0gcGFyZW50R2V0LmFzc2lnbiB8fCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGNoYW5nZSwgb3Igd2Ugd2lsbCB0aHJvdyB0aGlzIGV4Y2VwdGlvbiBvbiBldmVyeSAkZGlnZXN0XHJcbiAgICAgICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gcGFyZW50R2V0KHNjb3BlKTtcclxuICAgICAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vbmFzc2lnbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcIkV4cHJlc3Npb24gJ3swfScgdXNlZCB3aXRoIGRpcmVjdGl2ZSAnezF9JyBpcyBub24tYXNzaWduYWJsZSFcIixcclxuICAgICAgICAgICAgICAgICAgICAgIGF0dHJzW2F0dHJOYW1lXSwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gcGFyZW50R2V0KHNjb3BlKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRWYWx1ZVdhdGNoID0gZnVuY3Rpb24gcGFyZW50VmFsdWVXYXRjaChwYXJlbnRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoIWNvbXBhcmUocGFyZW50VmFsdWUsIGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBvdXQgb2Ygc3luYyBhbmQgbmVlZCB0byBjb3B5XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb21wYXJlKHBhcmVudFZhbHVlLCBsYXN0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBwYXJlbnQgY2hhbmdlZCBhbmQgaXQgaGFzIHByZWNlZGVuY2VcclxuICAgICAgICAgICAgICAgICAgICAgIGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gcGFyZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwYXJlbnQgY2FuIGJlIGFzc2lnbmVkIHRoZW4gZG8gc29cclxuICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFNldChzY29wZSwgcGFyZW50VmFsdWUgPSBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0VmFsdWUgPSBwYXJlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRWYWx1ZVdhdGNoLiRzdGF0ZWZ1bCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgdW53YXRjaCA9IHNjb3BlLiR3YXRjaCgkcGFyc2UoYXR0cnNbYXR0ck5hbWVdLCBwYXJlbnRWYWx1ZVdhdGNoKSwgbnVsbCwgcGFyZW50R2V0LmxpdGVyYWwpO1xyXG4gICAgICAgICAgICAgICAgaXNvbGF0ZVNjb3BlLiRvbignJGRlc3Ryb3knLCB1bndhdGNoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlICcmJzpcclxuICAgICAgICAgICAgICAgIHBhcmVudEdldCA9ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgaXNvbGF0ZUJpbmRpbmdDb250ZXh0W3Njb3BlTmFtZV0gPSBmdW5jdGlvbihsb2NhbHMpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudEdldChzY29wZSwgbG9jYWxzKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250cm9sbGVycykge1xyXG4gICAgICAgICAgZm9yRWFjaChjb250cm9sbGVycywgZnVuY3Rpb24oY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGNvbnRyb2xsZXJzID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBSRUxJTktJTkdcclxuICAgICAgICBmb3IoaSA9IDAsIGlpID0gcHJlTGlua0Zucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICBsaW5rRm4gPSBwcmVMaW5rRm5zW2ldO1xyXG4gICAgICAgICAgaW52b2tlTGlua0ZuKGxpbmtGbixcclxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXHJcbiAgICAgICAgICAgICAgJGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcclxuICAgICAgICAgICAgICB0cmFuc2NsdWRlRm5cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSRUNVUlNJT05cclxuICAgICAgICAvLyBXZSBvbmx5IHBhc3MgdGhlIGlzb2xhdGUgc2NvcGUsIGlmIHRoZSBpc29sYXRlIGRpcmVjdGl2ZSBoYXMgYSB0ZW1wbGF0ZSxcclxuICAgICAgICAvLyBvdGhlcndpc2UgdGhlIGNoaWxkIGVsZW1lbnRzIGRvIG5vdCBiZWxvbmcgdG8gdGhlIGlzb2xhdGUgZGlyZWN0aXZlLlxyXG4gICAgICAgIHZhciBzY29wZVRvQ2hpbGQgPSBzY29wZTtcclxuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlICYmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUudGVtcGxhdGUgfHwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlVXJsID09PSBudWxsKSkge1xyXG4gICAgICAgICAgc2NvcGVUb0NoaWxkID0gaXNvbGF0ZVNjb3BlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGlsZExpbmtGbiAmJiBjaGlsZExpbmtGbihzY29wZVRvQ2hpbGQsIGxpbmtOb2RlLmNoaWxkTm9kZXMsIHVuZGVmaW5lZCwgYm91bmRUcmFuc2NsdWRlRm4pO1xyXG5cclxuICAgICAgICAvLyBQT1NUTElOS0lOR1xyXG4gICAgICAgIGZvcihpID0gcG9zdExpbmtGbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgIGxpbmtGbiA9IHBvc3RMaW5rRm5zW2ldO1xyXG4gICAgICAgICAgaW52b2tlTGlua0ZuKGxpbmtGbixcclxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXHJcbiAgICAgICAgICAgICAgJGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcclxuICAgICAgICAgICAgICB0cmFuc2NsdWRlRm5cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGluamVjdGVkIGFzIGAkdHJhbnNjbHVkZWAuXHJcbiAgICAgICAgLy8gTm90ZTogYWxsIGFyZ3VtZW50cyBhcmUgb3B0aW9uYWwhXHJcbiAgICAgICAgZnVuY3Rpb24gY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGUoc2NvcGUsIGNsb25lQXR0YWNoRm4sIGZ1dHVyZVBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgIHZhciB0cmFuc2NsdWRlQ29udHJvbGxlcnM7XHJcblxyXG4gICAgICAgICAgLy8gTm8gc2NvcGUgcGFzc2VkIGluOlxyXG4gICAgICAgICAgaWYgKCFpc1Njb3BlKHNjb3BlKSkge1xyXG4gICAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gY2xvbmVBdHRhY2hGbjtcclxuICAgICAgICAgICAgY2xvbmVBdHRhY2hGbiA9IHNjb3BlO1xyXG4gICAgICAgICAgICBzY29wZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzID0gZWxlbWVudENvbnRyb2xsZXJzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCFmdXR1cmVQYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGZ1dHVyZVBhcmVudEVsZW1lbnQgPSBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA/ICRlbGVtZW50LnBhcmVudCgpIDogJGVsZW1lbnQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gYm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIGNsb25lQXR0YWNoRm4sIHRyYW5zY2x1ZGVDb250cm9sbGVycywgZnV0dXJlUGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFya0RpcmVjdGl2ZXNBc0lzb2xhdGUoZGlyZWN0aXZlcykge1xyXG4gICAgICAvLyBtYXJrIGFsbCBkaXJlY3RpdmVzIGFzIG5lZWRpbmcgaXNvbGF0ZSBzY29wZS5cclxuICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZGlyZWN0aXZlcy5sZW5ndGg7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgZGlyZWN0aXZlc1tqXSA9IGluaGVyaXQoZGlyZWN0aXZlc1tqXSwgeyQkaXNvbGF0ZVNjb3BlOiB0cnVlfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGxvb2tzIHVwIHRoZSBkaXJlY3RpdmUgYW5kIGRlY29yYXRlcyBpdCB3aXRoIGV4Y2VwdGlvbiBoYW5kbGluZyBhbmQgcHJvcGVyIHBhcmFtZXRlcnMuIFdlXHJcbiAgICAgKiBjYWxsIHRoaXMgdGhlIGJvdW5kRGlyZWN0aXZlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIFRoZSBkaXJlY3RpdmUgbXVzdCBiZSBmb3VuZCBpbiBzcGVjaWZpYyBmb3JtYXQuXHJcbiAgICAgKiAgIFN0cmluZyBjb250YWluaW5nIGFueSBvZiB0aGVzZXMgY2hhcmFjdGVyczpcclxuICAgICAqXHJcbiAgICAgKiAgICogYEVgOiBlbGVtZW50IG5hbWVcclxuICAgICAqICAgKiBgQSc6IGF0dHJpYnV0ZVxyXG4gICAgICogICAqIGBDYDogY2xhc3NcclxuICAgICAqICAgKiBgTWA6IGNvbW1lbnRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGRpcmVjdGl2ZSB3YXMgYWRkZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFkZERpcmVjdGl2ZSh0RGlyZWN0aXZlcywgbmFtZSwgbG9jYXRpb24sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHN0YXJ0QXR0ck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQXR0ck5hbWUpIHtcclxuICAgICAgaWYgKG5hbWUgPT09IGlnbm9yZURpcmVjdGl2ZSkgcmV0dXJuIG51bGw7XHJcbiAgICAgIHZhciBtYXRjaCA9IG51bGw7XHJcbiAgICAgIGlmIChoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgZm9yKHZhciBkaXJlY3RpdmUsIGRpcmVjdGl2ZXMgPSAkaW5qZWN0b3IuZ2V0KG5hbWUgKyBTdWZmaXgpLFxyXG4gICAgICAgICAgICBpID0gMCwgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDsgaTxpaTsgaSsrKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBkaXJlY3RpdmUgPSBkaXJlY3RpdmVzW2ldO1xyXG4gICAgICAgICAgICBpZiAoIChtYXhQcmlvcml0eSA9PT0gdW5kZWZpbmVkIHx8IG1heFByaW9yaXR5ID4gZGlyZWN0aXZlLnByaW9yaXR5KSAmJlxyXG4gICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5yZXN0cmljdC5pbmRleE9mKGxvY2F0aW9uKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgIGlmIChzdGFydEF0dHJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUgPSBpbmhlcml0KGRpcmVjdGl2ZSwgeyQkc3RhcnQ6IHN0YXJ0QXR0ck5hbWUsICQkZW5kOiBlbmRBdHRyTmFtZX0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0RGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgbWF0Y2ggPSBkaXJlY3RpdmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2goZSkgeyAkZXhjZXB0aW9uSGFuZGxlcihlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbWF0Y2g7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbG9va3MgdXAgdGhlIGRpcmVjdGl2ZSBhbmQgcmV0dXJucyB0cnVlIGlmIGl0IGlzIGEgbXVsdGktZWxlbWVudCBkaXJlY3RpdmUsXHJcbiAgICAgKiBhbmQgdGhlcmVmb3JlIHJlcXVpcmVzIERPTSBub2RlcyBiZXR3ZWVuIC1zdGFydCBhbmQgLWVuZCBtYXJrZXJzIHRvIGJlIGdyb3VwZWRcclxuICAgICAqIHRvZ2V0aGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxyXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiBkaXJlY3RpdmUgd2FzIHJlZ2lzdGVyZWQgYXMgbXVsdGktZWxlbWVudC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQobmFtZSkge1xyXG4gICAgICBpZiAoaGFzRGlyZWN0aXZlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIGZvcih2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcclxuICAgICAgICAgICAgaSA9IDAsIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7IGk8aWk7IGkrKykge1xyXG4gICAgICAgICAgZGlyZWN0aXZlID0gZGlyZWN0aXZlc1tpXTtcclxuICAgICAgICAgIGlmIChkaXJlY3RpdmUubXVsdGlFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIHRoZSBlbGVtZW50IGlzIHJlcGxhY2VkIHdpdGggSFRNTCB0ZW1wbGF0ZSB0aGVuIHRoZSBuZXcgYXR0cmlidXRlc1xyXG4gICAgICogb24gdGhlIHRlbXBsYXRlIG5lZWQgdG8gYmUgbWVyZ2VkIHdpdGggdGhlIGV4aXN0aW5nIGF0dHJpYnV0ZXMgaW4gdGhlIERPTS5cclxuICAgICAqIFRoZSBkZXNpcmVkIGVmZmVjdCBpcyB0byBoYXZlIGJvdGggb2YgdGhlIGF0dHJpYnV0ZXMgcHJlc2VudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZHN0IGRlc3RpbmF0aW9uIGF0dHJpYnV0ZXMgKG9yaWdpbmFsIERPTSlcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBzcmMgc291cmNlIGF0dHJpYnV0ZXMgKGZyb20gdGhlIGRpcmVjdGl2ZSB0ZW1wbGF0ZSlcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXMoZHN0LCBzcmMpIHtcclxuICAgICAgdmFyIHNyY0F0dHIgPSBzcmMuJGF0dHIsXHJcbiAgICAgICAgICBkc3RBdHRyID0gZHN0LiRhdHRyLFxyXG4gICAgICAgICAgJGVsZW1lbnQgPSBkc3QuJCRlbGVtZW50O1xyXG5cclxuICAgICAgLy8gcmVhcHBseSB0aGUgb2xkIGF0dHJpYnV0ZXMgdG8gdGhlIG5ldyBlbGVtZW50XHJcbiAgICAgIGZvckVhY2goZHN0LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgIT0gJyQnKSB7XHJcbiAgICAgICAgICBpZiAoc3JjW2tleV0gJiYgc3JjW2tleV0gIT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhbHVlICs9IChrZXkgPT09ICdzdHlsZScgPyAnOycgOiAnICcpICsgc3JjW2tleV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBkc3QuJHNldChrZXksIHZhbHVlLCB0cnVlLCBzcmNBdHRyW2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBjb3B5IHRoZSBuZXcgYXR0cmlidXRlcyBvbiB0aGUgb2xkIGF0dHJzIG9iamVjdFxyXG4gICAgICBmb3JFYWNoKHNyYywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgIGlmIChrZXkgPT0gJ2NsYXNzJykge1xyXG4gICAgICAgICAgc2FmZUFkZENsYXNzKCRlbGVtZW50LCB2YWx1ZSk7XHJcbiAgICAgICAgICBkc3RbJ2NsYXNzJ10gPSAoZHN0WydjbGFzcyddID8gZHN0WydjbGFzcyddICsgJyAnIDogJycpICsgdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT0gJ3N0eWxlJykge1xyXG4gICAgICAgICAgJGVsZW1lbnQuYXR0cignc3R5bGUnLCAkZWxlbWVudC5hdHRyKCdzdHlsZScpICsgJzsnICsgdmFsdWUpO1xyXG4gICAgICAgICAgZHN0WydzdHlsZSddID0gKGRzdFsnc3R5bGUnXSA/IGRzdFsnc3R5bGUnXSArICc7JyA6ICcnKSArIHZhbHVlO1xyXG4gICAgICAgICAgLy8gYGRzdGAgd2lsbCBuZXZlciBjb250YWluIGhhc093blByb3BlcnR5IGFzIERPTSBwYXJzZXIgd29uJ3QgbGV0IGl0LlxyXG4gICAgICAgICAgLy8gWW91IHdpbGwgZ2V0IGFuIFwiSW52YWxpZENoYXJhY3RlckVycm9yOiBET00gRXhjZXB0aW9uIDVcIiBlcnJvciBpZiB5b3VcclxuICAgICAgICAgIC8vIGhhdmUgYW4gYXR0cmlidXRlIGxpa2UgXCJoYXMtb3duLXByb3BlcnR5XCIgb3IgXCJkYXRhLWhhcy1vd24tcHJvcGVydHlcIiwgZXRjLlxyXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5LmNoYXJBdCgwKSAhPSAnJCcgJiYgIWRzdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICBkc3Rba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgZHN0QXR0cltrZXldID0gc3JjQXR0cltrZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLCAkY29tcGlsZU5vZGUsIHRBdHRycyxcclxuICAgICAgICAkcm9vdEVsZW1lbnQsIGNoaWxkVHJhbnNjbHVkZUZuLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucywgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xyXG4gICAgICB2YXIgbGlua1F1ZXVlID0gW10sXHJcbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbixcclxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbixcclxuICAgICAgICAgIGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGUgPSAkY29tcGlsZU5vZGVbMF0sXHJcbiAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUgPSBkaXJlY3RpdmVzLnNoaWZ0KCksXHJcbiAgICAgICAgICAvLyBUaGUgZmFjdCB0aGF0IHdlIGhhdmUgdG8gY29weSBhbmQgcGF0Y2ggdGhlIGRpcmVjdGl2ZSBzZWVtcyB3cm9uZyFcclxuICAgICAgICAgIGRlcml2ZWRTeW5jRGlyZWN0aXZlID0gZXh0ZW5kKHt9LCBvcmlnQXN5bmNEaXJlY3RpdmUsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IG51bGwsIHRyYW5zY2x1ZGU6IG51bGwsIHJlcGxhY2U6IG51bGwsICQkb3JpZ2luYWxEaXJlY3RpdmU6IG9yaWdBc3luY0RpcmVjdGl2ZVxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICB0ZW1wbGF0ZVVybCA9IChpc0Z1bmN0aW9uKG9yaWdBc3luY0RpcmVjdGl2ZS50ZW1wbGF0ZVVybCkpXHJcbiAgICAgICAgICAgICAgPyBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwoJGNvbXBpbGVOb2RlLCB0QXR0cnMpXHJcbiAgICAgICAgICAgICAgOiBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwsXHJcbiAgICAgICAgICB0ZW1wbGF0ZU5hbWVzcGFjZSA9IG9yaWdBc3luY0RpcmVjdGl2ZS50ZW1wbGF0ZU5hbWVzcGFjZTtcclxuXHJcbiAgICAgICRjb21waWxlTm9kZS5lbXB0eSgpO1xyXG5cclxuICAgICAgJHRlbXBsYXRlUmVxdWVzdCgkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh0ZW1wbGF0ZVVybCkpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29udGVudCkge1xyXG4gICAgICAgICAgdmFyIGNvbXBpbGVOb2RlLCB0ZW1wVGVtcGxhdGVBdHRycywgJHRlbXBsYXRlLCBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuO1xyXG5cclxuICAgICAgICAgIGNvbnRlbnQgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgIGlmIChvcmlnQXN5bmNEaXJlY3RpdmUucmVwbGFjZSkge1xyXG4gICAgICAgICAgICBpZiAoanFMaXRlSXNUZXh0Tm9kZShjb250ZW50KSkge1xyXG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IFtdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IGpxTGl0ZSh3cmFwVGVtcGxhdGUodGVtcGxhdGVOYW1lc3BhY2UsIHRyaW0oY29udGVudCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICR0ZW1wbGF0ZVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9IDEgfHwgY29tcGlsZU5vZGUubm9kZVR5cGUgIT09IDEpIHtcclxuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndHBscnQnLFxyXG4gICAgICAgICAgICAgICAgICBcIlRlbXBsYXRlIGZvciBkaXJlY3RpdmUgJ3swfScgbXVzdCBoYXZlIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gezF9XCIsXHJcbiAgICAgICAgICAgICAgICAgIG9yaWdBc3luY0RpcmVjdGl2ZS5uYW1lLCB0ZW1wbGF0ZVVybCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRlbXBUZW1wbGF0ZUF0dHJzID0geyRhdHRyOiB7fX07XHJcbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKCRyb290RWxlbWVudCwgJGNvbXBpbGVOb2RlLCBjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhjb21waWxlTm9kZSwgW10sIHRlbXBUZW1wbGF0ZUF0dHJzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc09iamVjdChvcmlnQXN5bmNEaXJlY3RpdmUuc2NvcGUpKSB7XHJcbiAgICAgICAgICAgICAgbWFya0RpcmVjdGl2ZXNBc0lzb2xhdGUodGVtcGxhdGVEaXJlY3RpdmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkaXJlY3RpdmVzID0gdGVtcGxhdGVEaXJlY3RpdmVzLmNvbmNhdChkaXJlY3RpdmVzKTtcclxuICAgICAgICAgICAgbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModEF0dHJzLCB0ZW1wVGVtcGxhdGVBdHRycyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb21waWxlTm9kZSA9IGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGU7XHJcbiAgICAgICAgICAgICRjb21waWxlTm9kZS5odG1sKGNvbnRlbnQpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGRpcmVjdGl2ZXMudW5zaGlmdChkZXJpdmVkU3luY0RpcmVjdGl2ZSk7XHJcblxyXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4gPSBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgY29tcGlsZU5vZGUsIHRBdHRycyxcclxuICAgICAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiwgJGNvbXBpbGVOb2RlLCBvcmlnQXN5bmNEaXJlY3RpdmUsIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLFxyXG4gICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xyXG4gICAgICAgICAgZm9yRWFjaCgkcm9vdEVsZW1lbnQsIGZ1bmN0aW9uKG5vZGUsIGkpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUgPT0gY29tcGlsZU5vZGUpIHtcclxuICAgICAgICAgICAgICAkcm9vdEVsZW1lbnRbaV0gPSAkY29tcGlsZU5vZGVbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuID0gY29tcGlsZU5vZGVzKCRjb21waWxlTm9kZVswXS5jaGlsZE5vZGVzLCBjaGlsZFRyYW5zY2x1ZGVGbik7XHJcblxyXG4gICAgICAgICAgd2hpbGUobGlua1F1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgc2NvcGUgPSBsaW5rUXVldWUuc2hpZnQoKSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZVRlbXBsYXRlTGlua05vZGUgPSBsaW5rUXVldWUuc2hpZnQoKSxcclxuICAgICAgICAgICAgICAgIGxpbmtSb290RWxlbWVudCA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxyXG4gICAgICAgICAgICAgICAgYm91bmRUcmFuc2NsdWRlRm4gPSBsaW5rUXVldWUuc2hpZnQoKSxcclxuICAgICAgICAgICAgICAgIGxpbmtOb2RlID0gJGNvbXBpbGVOb2RlWzBdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJlZm9yZVRlbXBsYXRlTGlua05vZGUgIT09IGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGUpIHtcclxuICAgICAgICAgICAgICB2YXIgb2xkQ2xhc3NlcyA9IGJlZm9yZVRlbXBsYXRlTGlua05vZGUuY2xhc3NOYW1lO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoIShwcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlICYmXHJcbiAgICAgICAgICAgICAgICAgIG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNsb25lZCB0aGVyZWZvcmUgd2UgaGF2ZSB0byBjbG9uZSBhcyB3ZWxsLlxyXG4gICAgICAgICAgICAgICAgbGlua05vZGUgPSBqcUxpdGVDbG9uZShjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlcGxhY2VXaXRoKGxpbmtSb290RWxlbWVudCwganFMaXRlKGJlZm9yZVRlbXBsYXRlTGlua05vZGUpLCBsaW5rTm9kZSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIENvcHkgaW4gQ1NTIGNsYXNzZXMgZnJvbSBvcmlnaW5hbCBub2RlXHJcbiAgICAgICAgICAgICAgc2FmZUFkZENsYXNzKGpxTGl0ZShsaW5rTm9kZSksIG9sZENsYXNzZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhZnRlclRlbXBsYXRlTm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBib3VuZFRyYW5zY2x1ZGVGbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sIHNjb3BlLCBsaW5rTm9kZSwgJHJvb3RFbGVtZW50LFxyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGlua1F1ZXVlID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBkZWxheWVkTm9kZUxpbmtGbihpZ25vcmVDaGlsZExpbmtGbiwgc2NvcGUsIG5vZGUsIHJvb3RFbGVtZW50LCBib3VuZFRyYW5zY2x1ZGVGbikge1xyXG4gICAgICAgIHZhciBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gYm91bmRUcmFuc2NsdWRlRm47XHJcbiAgICAgICAgaWYgKGxpbmtRdWV1ZSkge1xyXG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2goc2NvcGUpO1xyXG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICBsaW5rUXVldWUucHVzaChyb290RWxlbWVudCk7XHJcbiAgICAgICAgICBsaW5rUXVldWUucHVzaChjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4oYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuLCBzY29wZSwgbm9kZSwgcm9vdEVsZW1lbnQsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTb3J0aW5nIGZ1bmN0aW9uIGZvciBib3VuZCBkaXJlY3RpdmVzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBieVByaW9yaXR5KGEsIGIpIHtcclxuICAgICAgdmFyIGRpZmYgPSBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcclxuICAgICAgaWYgKGRpZmYgIT09IDApIHJldHVybiBkaWZmO1xyXG4gICAgICBpZiAoYS5uYW1lICE9PSBiLm5hbWUpIHJldHVybiAoYS5uYW1lIDwgYi5uYW1lKSA/IC0xIDogMTtcclxuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBhc3NlcnROb0R1cGxpY2F0ZSh3aGF0LCBwcmV2aW91c0RpcmVjdGl2ZSwgZGlyZWN0aXZlLCBlbGVtZW50KSB7XHJcbiAgICAgIGlmIChwcmV2aW91c0RpcmVjdGl2ZSkge1xyXG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtdWx0aWRpcicsICdNdWx0aXBsZSBkaXJlY3RpdmVzIFt7MH0sIHsxfV0gYXNraW5nIGZvciB7Mn0gb246IHszfScsXHJcbiAgICAgICAgICAgIHByZXZpb3VzRGlyZWN0aXZlLm5hbWUsIGRpcmVjdGl2ZS5uYW1lLCB3aGF0LCBzdGFydGluZ1RhZyhlbGVtZW50KSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIHRleHQpIHtcclxuICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUodGV4dCwgdHJ1ZSk7XHJcbiAgICAgIGlmIChpbnRlcnBvbGF0ZUZuKSB7XHJcbiAgICAgICAgZGlyZWN0aXZlcy5wdXNoKHtcclxuICAgICAgICAgIHByaW9yaXR5OiAwLFxyXG4gICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gdGV4dEludGVycG9sYXRlQ29tcGlsZUZuKHRlbXBsYXRlTm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVOb2RlUGFyZW50ID0gdGVtcGxhdGVOb2RlLnBhcmVudCgpLFxyXG4gICAgICAgICAgICAgICAgaGFzQ29tcGlsZVBhcmVudCA9ICEhdGVtcGxhdGVOb2RlUGFyZW50Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIC8vIFdoZW4gdHJhbnNjbHVkaW5nIGEgdGVtcGxhdGUgdGhhdCBoYXMgYmluZGluZ3MgaW4gdGhlIHJvb3RcclxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgaGF2ZSBhIHBhcmVudCBhbmQgdGh1cyBuZWVkIHRvIGFkZCB0aGUgY2xhc3MgZHVyaW5nIGxpbmtpbmcgZm4uXHJcbiAgICAgICAgICAgIGlmIChoYXNDb21waWxlUGFyZW50KSBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRlbXBsYXRlTm9kZVBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdGV4dEludGVycG9sYXRlTGlua0ZuKHNjb3BlLCBub2RlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgaWYgKCFoYXNDb21waWxlUGFyZW50KSBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKHBhcmVudCwgaW50ZXJwb2xhdGVGbi5leHByZXNzaW9ucyk7XHJcbiAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGludGVycG9sYXRlRm4sIGZ1bmN0aW9uIGludGVycG9sYXRlRm5XYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZVswXS5ub2RlVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiB3cmFwVGVtcGxhdGUodHlwZSwgdGVtcGxhdGUpIHtcclxuICAgICAgdHlwZSA9IGxvd2VyY2FzZSh0eXBlIHx8ICdodG1sJyk7XHJcbiAgICAgIHN3aXRjaCh0eXBlKSB7XHJcbiAgICAgIGNhc2UgJ3N2Zyc6XHJcbiAgICAgIGNhc2UgJ21hdGgnOlxyXG4gICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgPSAnPCcrdHlwZSsnPicrdGVtcGxhdGUrJzwvJyt0eXBlKyc+JztcclxuICAgICAgICByZXR1cm4gd3JhcHBlci5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFRydXN0ZWRDb250ZXh0KG5vZGUsIGF0dHJOb3JtYWxpemVkTmFtZSkge1xyXG4gICAgICBpZiAoYXR0ck5vcm1hbGl6ZWROYW1lID09IFwic3JjZG9jXCIpIHtcclxuICAgICAgICByZXR1cm4gJHNjZS5IVE1MO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciB0YWcgPSBub2RlTmFtZV8obm9kZSk7XHJcbiAgICAgIC8vIG1hY3Rpb25beGxpbms6aHJlZl0gY2FuIHNvdXJjZSBTVkcuICBJdCdzIG5vdCBsaW1pdGVkIHRvIDxtYWN0aW9uPi5cclxuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcInhsaW5rSHJlZlwiIHx8XHJcbiAgICAgICAgICAodGFnID09IFwiZm9ybVwiICYmIGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcImFjdGlvblwiKSB8fFxyXG4gICAgICAgICAgKHRhZyAhPSBcImltZ1wiICYmIChhdHRyTm9ybWFsaXplZE5hbWUgPT0gXCJzcmNcIiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ck5vcm1hbGl6ZWROYW1lID09IFwibmdTcmNcIikpKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY2UuUkVTT1VSQ0VfVVJMO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZShub2RlLCBkaXJlY3RpdmVzLCB2YWx1ZSwgbmFtZSwgYWxsT3JOb3RoaW5nKSB7XHJcbiAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKHZhbHVlLCB0cnVlKTtcclxuXHJcbiAgICAgIC8vIG5vIGludGVycG9sYXRpb24gZm91bmQgLT4gaWdub3JlXHJcbiAgICAgIGlmICghaW50ZXJwb2xhdGVGbikgcmV0dXJuO1xyXG5cclxuXHJcbiAgICAgIGlmIChuYW1lID09PSBcIm11bHRpcGxlXCIgJiYgbm9kZU5hbWVfKG5vZGUpID09PSBcInNlbGVjdFwiKSB7XHJcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoXCJzZWxtdWx0aVwiLFxyXG4gICAgICAgICAgICBcIkJpbmRpbmcgdG8gdGhlICdtdWx0aXBsZScgYXR0cmlidXRlIGlzIG5vdCBzdXBwb3J0ZWQuIEVsZW1lbnQ6IHswfVwiLFxyXG4gICAgICAgICAgICBzdGFydGluZ1RhZyhub2RlKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRpcmVjdGl2ZXMucHVzaCh7XHJcbiAgICAgICAgcHJpb3JpdHk6IDEwMCxcclxuICAgICAgICBjb21waWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZVByZUxpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICAgICAgdmFyICQkb2JzZXJ2ZXJzID0gKGF0dHIuJCRvYnNlcnZlcnMgfHwgKGF0dHIuJCRvYnNlcnZlcnMgPSB7fSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQLnRlc3QobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vZG9tZXZlbnRzJyxcclxuICAgICAgICAgICAgICAgICAgICAgIFwiSW50ZXJwb2xhdGlvbnMgZm9yIEhUTUwgRE9NIGV2ZW50IGF0dHJpYnV0ZXMgYXJlIGRpc2FsbG93ZWQuICBQbGVhc2UgdXNlIHRoZSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuZy0gdmVyc2lvbnMgKHN1Y2ggYXMgbmctY2xpY2sgaW5zdGVhZCBvZiBvbmNsaWNrKSBpbnN0ZWFkLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGludGVycG9sYXRlIGFnYWluLCBpbiBjYXNlIHRoZSBhdHRyaWJ1dGUgdmFsdWUgaGFzIGJlZW4gdXBkYXRlZFxyXG4gICAgICAgICAgICAgICAgLy8gKGUuZy4gYnkgYW5vdGhlciBkaXJlY3RpdmUncyBjb21waWxlIGZ1bmN0aW9uKVxyXG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVGbiA9ICRpbnRlcnBvbGF0ZShhdHRyW25hbWVdLCB0cnVlLCBnZXRUcnVzdGVkQ29udGV4dChub2RlLCBuYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBBTExfT1JfTk9USElOR19BVFRSU1tuYW1lXSB8fCBhbGxPck5vdGhpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIGF0dHJpYnV0ZSB3YXMgdXBkYXRlZCBzbyB0aGF0IHRoZXJlIGlzIG5vIGludGVycG9sYXRpb24gZ29pbmcgb24gd2UgZG9uJ3Qgd2FudCB0b1xyXG4gICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgYW55IG9ic2VydmVyc1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcnBvbGF0ZUZuKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBhdHRyIG9iamVjdCBzbyB0aGF0IGl0J3MgcmVhZHkgaW4gY2FzZSB3ZSBuZWVkIHRoZSB2YWx1ZSBmb3IgaXNvbGF0ZVxyXG4gICAgICAgICAgICAgICAgLy8gc2NvcGUgaW5pdGlhbGl6YXRpb24sIG90aGVyd2lzZSB0aGUgdmFsdWUgd291bGQgbm90IGJlIGF2YWlsYWJsZSBmcm9tIGlzb2xhdGVcclxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZSdzIGxpbmtpbmcgZm4gZHVyaW5nIGxpbmtpbmcgcGhhc2VcclxuICAgICAgICAgICAgICAgIGF0dHJbbmFtZV0gPSBpbnRlcnBvbGF0ZUZuKHNjb3BlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAoJCRvYnNlcnZlcnNbbmFtZV0gfHwgKCQkb2JzZXJ2ZXJzW25hbWVdID0gW10pKS4kJGludGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIChhdHRyLiQkb2JzZXJ2ZXJzICYmIGF0dHIuJCRvYnNlcnZlcnNbbmFtZV0uJCRzY29wZSB8fCBzY29wZSkuXHJcbiAgICAgICAgICAgICAgICAgICR3YXRjaChpbnRlcnBvbGF0ZUZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9zcGVjaWFsIGNhc2UgZm9yIGNsYXNzIGF0dHJpYnV0ZSBhZGRpdGlvbiArIHJlbW92YWxcclxuICAgICAgICAgICAgICAgICAgICAvL3NvIHRoYXQgY2xhc3MgY2hhbmdlcyBjYW4gdGFwIGludG8gdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIC8vaG9va3MgcHJvdmlkZWQgYnkgdGhlICRhbmltYXRlIHNlcnZpY2UuIEJlIHN1cmUgdG9cclxuICAgICAgICAgICAgICAgICAgICAvL3NraXAgYW5pbWF0aW9ucyB3aGVuIHRoZSBmaXJzdCBkaWdlc3Qgb2NjdXJzICh3aGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9ib3RoIHRoZSBuZXcgYW5kIHRoZSBvbGQgdmFsdWVzIGFyZSB0aGUgc2FtZSkgc2luY2VcclxuICAgICAgICAgICAgICAgICAgICAvL3RoZSBDU1MgY2xhc3NlcyBhcmUgdGhlIG5vbi1pbnRlcnBvbGF0ZWQgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYobmFtZSA9PT0gJ2NsYXNzJyAmJiBuZXdWYWx1ZSAhPSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXR0ci4kdXBkYXRlQ2xhc3MobmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBpcyBhIHNwZWNpYWwganFMaXRlLnJlcGxhY2VXaXRoLCB3aGljaCBjYW4gcmVwbGFjZSBpdGVtcyB3aGljaFxyXG4gICAgICogaGF2ZSBubyBwYXJlbnRzLCBwcm92aWRlZCB0aGF0IHRoZSBjb250YWluaW5nIGpxTGl0ZSBjb2xsZWN0aW9uIGlzIHByb3ZpZGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SnFMaXRlPX0gJHJvb3RFbGVtZW50IFRoZSByb290IG9mIHRoZSBjb21waWxlIHRyZWUuIFVzZWQgc28gdGhhdCB3ZSBjYW4gcmVwbGFjZSBub2Rlc1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhlIHJvb3Qgb2YgdGhlIHRyZWUuXHJcbiAgICAgKiBAcGFyYW0ge0pxTGl0ZX0gZWxlbWVudHNUb1JlbW92ZSBUaGUganFMaXRlIGVsZW1lbnQgd2hpY2ggd2UgYXJlIGdvaW5nIHRvIHJlcGxhY2UuIFdlIGtlZXBcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBzaGVsbCwgYnV0IHJlcGxhY2UgaXRzIERPTSBub2RlIHJlZmVyZW5jZS5cclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Tm9kZSBUaGUgbmV3IERPTSBub2RlLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByZXBsYWNlV2l0aCgkcm9vdEVsZW1lbnQsIGVsZW1lbnRzVG9SZW1vdmUsIG5ld05vZGUpIHtcclxuICAgICAgdmFyIGZpcnN0RWxlbWVudFRvUmVtb3ZlID0gZWxlbWVudHNUb1JlbW92ZVswXSxcclxuICAgICAgICAgIHJlbW92ZUNvdW50ID0gZWxlbWVudHNUb1JlbW92ZS5sZW5ndGgsXHJcbiAgICAgICAgICBwYXJlbnQgPSBmaXJzdEVsZW1lbnRUb1JlbW92ZS5wYXJlbnROb2RlLFxyXG4gICAgICAgICAgaSwgaWk7XHJcblxyXG4gICAgICBpZiAoJHJvb3RFbGVtZW50KSB7XHJcbiAgICAgICAgZm9yKGkgPSAwLCBpaSA9ICRyb290RWxlbWVudC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoJHJvb3RFbGVtZW50W2ldID09IGZpcnN0RWxlbWVudFRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgICRyb290RWxlbWVudFtpKytdID0gbmV3Tm9kZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGksIGoyID0gaiArIHJlbW92ZUNvdW50IC0gMSxcclxuICAgICAgICAgICAgICAgICAgICAgamogPSAkcm9vdEVsZW1lbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgIGogPCBqajsgaisrLCBqMisrKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGoyIDwgamopIHtcclxuICAgICAgICAgICAgICAgICRyb290RWxlbWVudFtqXSA9ICRyb290RWxlbWVudFtqMl07XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSAkcm9vdEVsZW1lbnRbal07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRyb290RWxlbWVudC5sZW5ndGggLT0gcmVtb3ZlQ291bnQgLSAxO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcGxhY2VkIGVsZW1lbnQgaXMgYWxzbyB0aGUgalF1ZXJ5IC5jb250ZXh0IHRoZW4gcmVwbGFjZSBpdFxyXG4gICAgICAgICAgICAvLyAuY29udGV4dCBpcyBhIGRlcHJlY2F0ZWQgalF1ZXJ5IGFwaSwgc28gd2Ugc2hvdWxkIHNldCBpdCBvbmx5IHdoZW4galF1ZXJ5IHNldCBpdFxyXG4gICAgICAgICAgICAvLyBodHRwOi8vYXBpLmpxdWVyeS5jb20vY29udGV4dC9cclxuICAgICAgICAgICAgaWYgKCRyb290RWxlbWVudC5jb250ZXh0ID09PSBmaXJzdEVsZW1lbnRUb1JlbW92ZSkge1xyXG4gICAgICAgICAgICAgICRyb290RWxlbWVudC5jb250ZXh0ID0gbmV3Tm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsIGZpcnN0RWxlbWVudFRvUmVtb3ZlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVE9ETyhwZXJmKTogd2hhdCdzIHRoaXMgZG9jdW1lbnQgZnJhZ21lbnQgZm9yPyBpcyBpdCBuZWVkZWQ/IGNhbiB3ZSBhdCBsZWFzdCByZXVzZSBpdD9cclxuICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChmaXJzdEVsZW1lbnRUb1JlbW92ZSk7XHJcblxyXG4gICAgICAvLyBDb3B5IG92ZXIgdXNlciBkYXRhICh0aGF0IGluY2x1ZGVzIEFuZ3VsYXIncyAkc2NvcGUgZXRjLikuIERvbid0IGNvcHkgcHJpdmF0ZVxyXG4gICAgICAvLyBkYXRhIGhlcmUgYmVjYXVzZSB0aGVyZSdzIG5vIHB1YmxpYyBpbnRlcmZhY2UgaW4galF1ZXJ5IHRvIGRvIHRoYXQgYW5kIGNvcHlpbmcgb3ZlclxyXG4gICAgICAvLyBldmVudCBsaXN0ZW5lcnMgKHdoaWNoIGlzIHRoZSBtYWluIHVzZSBvZiBwcml2YXRlIGRhdGEpIHdvdWxkbid0IHdvcmsgYW55d2F5LlxyXG4gICAgICBqcUxpdGUobmV3Tm9kZSkuZGF0YShqcUxpdGUoZmlyc3RFbGVtZW50VG9SZW1vdmUpLmRhdGEoKSk7XHJcblxyXG4gICAgICAvLyBSZW1vdmUgZGF0YSBvZiB0aGUgcmVwbGFjZWQgZWxlbWVudC4gV2UgY2Fubm90IGp1c3QgY2FsbCAucmVtb3ZlKClcclxuICAgICAgLy8gb24gdGhlIGVsZW1lbnQgaXQgc2luY2UgdGhhdCB3b3VsZCBkZWFsbG9jYXRlIHNjb3BlIHRoYXQgaXMgbmVlZGVkXHJcbiAgICAgIC8vIGZvciB0aGUgbmV3IG5vZGUuIEluc3RlYWQsIHJlbW92ZSB0aGUgZGF0YSBcIm1hbnVhbGx5XCIuXHJcbiAgICAgIGlmICghalF1ZXJ5KSB7XHJcbiAgICAgICAgZGVsZXRlIGpxTGl0ZS5jYWNoZVtmaXJzdEVsZW1lbnRUb1JlbW92ZVtqcUxpdGUuZXhwYW5kb11dO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGpRdWVyeSAyLnggZG9lc24ndCBleHBvc2UgdGhlIGRhdGEgc3RvcmFnZS4gVXNlIGpRdWVyeS5jbGVhbkRhdGEgdG8gY2xlYW4gdXAgYWZ0ZXJcclxuICAgICAgICAvLyB0aGUgcmVwbGFjZWQgZWxlbWVudC4gVGhlIGNsZWFuRGF0YSB2ZXJzaW9uIG1vbmtleS1wYXRjaGVkIGJ5IEFuZ3VsYXIgd291bGQgY2F1c2VcclxuICAgICAgICAvLyB0aGUgc2NvcGUgdG8gYmUgdHJhc2hlZCBhbmQgd2UgZG8gbmVlZCB0aGUgdmVyeSBzYW1lIHNjb3BlIHRvIHdvcmsgd2l0aCB0aGUgbmV3XHJcbiAgICAgICAgLy8gZWxlbWVudC4gSG93ZXZlciwgd2UgY2Fubm90IGp1c3QgY2FjaGUgdGhlIG5vbi1wYXRjaGVkIHZlcnNpb24gYW5kIHVzZSBpdCBoZXJlIGFzXHJcbiAgICAgICAgLy8gdGhhdCB3b3VsZCBicmVhayBpZiBhbm90aGVyIGxpYnJhcnkgcGF0Y2hlcyB0aGUgbWV0aG9kIGFmdGVyIEFuZ3VsYXIgZG9lcyAob25lXHJcbiAgICAgICAgLy8gZXhhbXBsZSBpcyBqUXVlcnkgVUkpLiBJbnN0ZWFkLCBzZXQgYSBmbGFnIGluZGljYXRpbmcgc2NvcGUgZGVzdHJveWluZyBzaG91bGQgYmVcclxuICAgICAgICAvLyBza2lwcGVkIHRoaXMgb25lIHRpbWUuXHJcbiAgICAgICAgc2tpcERlc3Ryb3lPbk5leHRKUXVlcnlDbGVhbkRhdGEgPSB0cnVlO1xyXG4gICAgICAgIGpRdWVyeS5jbGVhbkRhdGEoW2ZpcnN0RWxlbWVudFRvUmVtb3ZlXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAodmFyIGsgPSAxLCBrayA9IGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoOyBrIDwga2s7IGsrKykge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNUb1JlbW92ZVtrXTtcclxuICAgICAgICBqcUxpdGUoZWxlbWVudCkucmVtb3ZlKCk7IC8vIG11c3QgZG8gdGhpcyB3YXkgdG8gY2xlYW4gdXAgZXhwYW5kb1xyXG4gICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgIGRlbGV0ZSBlbGVtZW50c1RvUmVtb3ZlW2tdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBlbGVtZW50c1RvUmVtb3ZlWzBdID0gbmV3Tm9kZTtcclxuICAgICAgZWxlbWVudHNUb1JlbW92ZS5sZW5ndGggPSAxO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjbG9uZUFuZEFubm90YXRlRm4oZm4sIGFubm90YXRpb24pIHtcclxuICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbigpIHsgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IH0sIGZuLCBhbm5vdGF0aW9uKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gaW52b2tlTGlua0ZuKGxpbmtGbiwgc2NvcGUsICRlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxpbmtGbihzY29wZSwgJGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKTtcclxuICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSwgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1dO1xyXG59XHJcblxyXG52YXIgUFJFRklYX1JFR0VYUCA9IC9eKHhbXFw6XFwtX118ZGF0YVtcXDpcXC1fXSkvaTtcclxuLyoqXHJcbiAqIENvbnZlcnRzIGFsbCBhY2NlcHRlZCBkaXJlY3RpdmVzIGZvcm1hdCBpbnRvIHByb3BlciBkaXJlY3RpdmUgbmFtZS5cclxuICogQWxsIG9mIHRoZXNlIHdpbGwgYmVjb21lICdteURpcmVjdGl2ZSc6XHJcbiAqICAgbXk6RGlyZWN0aXZlXHJcbiAqICAgbXktZGlyZWN0aXZlXHJcbiAqICAgeC1teS1kaXJlY3RpdmVcclxuICogICBkYXRhLW15OmRpcmVjdGl2ZVxyXG4gKlxyXG4gKiBBbHNvIHRoZXJlIGlzIHNwZWNpYWwgY2FzZSBmb3IgTW96IHByZWZpeCBzdGFydGluZyB3aXRoIHVwcGVyIGNhc2UgbGV0dGVyLlxyXG4gKiBAcGFyYW0gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxyXG4gKi9cclxuZnVuY3Rpb24gZGlyZWN0aXZlTm9ybWFsaXplKG5hbWUpIHtcclxuICByZXR1cm4gY2FtZWxDYXNlKG5hbWUucmVwbGFjZShQUkVGSVhfUkVHRVhQLCAnJykpO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIHR5cGVcclxuICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEEgc2hhcmVkIG9iamVjdCBiZXR3ZWVuIGRpcmVjdGl2ZSBjb21waWxlIC8gbGlua2luZyBmdW5jdGlvbnMgd2hpY2ggY29udGFpbnMgbm9ybWFsaXplZCBET01cclxuICogZWxlbWVudCBhdHRyaWJ1dGVzLiBUaGUgdmFsdWVzIHJlZmxlY3QgY3VycmVudCBiaW5kaW5nIHN0YXRlIGB7eyB9fWAuIFRoZSBub3JtYWxpemF0aW9uIGlzXHJcbiAqIG5lZWRlZCBzaW5jZSBhbGwgb2YgdGhlc2UgYXJlIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCBpbiBBbmd1bGFyOlxyXG4gKlxyXG4gKiBgYGBcclxuICogICAgPHNwYW4gbmc6YmluZD1cImFcIiBuZy1iaW5kPVwiYVwiIGRhdGEtbmctYmluZD1cImFcIiB4LW5nLWJpbmQ9XCJhXCI+XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvcGVydHlcclxuICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGF0dHJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEEgbWFwIG9mIERPTSBlbGVtZW50IGF0dHJpYnV0ZSBuYW1lcyB0byB0aGUgbm9ybWFsaXplZCBuYW1lLiBUaGlzIGlzXHJcbiAqIG5lZWRlZCB0byBkbyByZXZlcnNlIGxvb2t1cCBmcm9tIG5vcm1hbGl6ZWQgbmFtZSBiYWNrIHRvIGFjdHVhbCBuYW1lLlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkc2V0XHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTZXQgRE9NIGVsZW1lbnQgYXR0cmlidXRlIHZhbHVlLlxyXG4gKlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOb3JtYWxpemVkIGVsZW1lbnQgYXR0cmlidXRlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIG1vZGlmeS4gVGhlIG5hbWUgaXNcclxuICogICAgICAgICAgcmV2ZXJzZS10cmFuc2xhdGVkIHVzaW5nIHRoZSB7QGxpbmsgbmcuJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGF0dHIgJGF0dHJ9XHJcbiAqICAgICAgICAgIHByb3BlcnR5IHRvIHRoZSBvcmlnaW5hbCBuYW1lLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVmFsdWUgdG8gc2V0IHRoZSBhdHRyaWJ1dGUgdG8uIFRoZSB2YWx1ZSBjYW4gYmUgYW4gaW50ZXJwb2xhdGVkIHN0cmluZy5cclxuICovXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBDbG9zdXJlIGNvbXBpbGVyIHR5cGUgaW5mb3JtYXRpb25cclxuICovXHJcblxyXG5mdW5jdGlvbiBub2Rlc2V0TGlua2luZ0ZuKFxyXG4gIC8qIGFuZ3VsYXIuU2NvcGUgKi8gc2NvcGUsXHJcbiAgLyogTm9kZUxpc3QgKi8gbm9kZUxpc3QsXHJcbiAgLyogRWxlbWVudCAqLyByb290RWxlbWVudCxcclxuICAvKiBmdW5jdGlvbihGdW5jdGlvbikgKi8gYm91bmRUcmFuc2NsdWRlRm5cclxuKXt9XHJcblxyXG5mdW5jdGlvbiBkaXJlY3RpdmVMaW5raW5nRm4oXHJcbiAgLyogbm9kZXNldExpbmtpbmdGbiAqLyBub2Rlc2V0TGlua2luZ0ZuLFxyXG4gIC8qIGFuZ3VsYXIuU2NvcGUgKi8gc2NvcGUsXHJcbiAgLyogTm9kZSAqLyBub2RlLFxyXG4gIC8qIEVsZW1lbnQgKi8gcm9vdEVsZW1lbnQsXHJcbiAgLyogZnVuY3Rpb24oRnVuY3Rpb24pICovIGJvdW5kVHJhbnNjbHVkZUZuXHJcbil7fVxyXG5cclxuZnVuY3Rpb24gdG9rZW5EaWZmZXJlbmNlKHN0cjEsIHN0cjIpIHtcclxuICB2YXIgdmFsdWVzID0gJycsXHJcbiAgICAgIHRva2VuczEgPSBzdHIxLnNwbGl0KC9cXHMrLyksXHJcbiAgICAgIHRva2VuczIgPSBzdHIyLnNwbGl0KC9cXHMrLyk7XHJcblxyXG4gIG91dGVyOlxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0b2tlbnMxLmxlbmd0aDsgaSsrKSB7XHJcbiAgICB2YXIgdG9rZW4gPSB0b2tlbnMxW2ldO1xyXG4gICAgZm9yKHZhciBqID0gMDsgaiA8IHRva2VuczIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYodG9rZW4gPT0gdG9rZW5zMltqXSkgY29udGludWUgb3V0ZXI7XHJcbiAgICB9XHJcbiAgICB2YWx1ZXMgKz0gKHZhbHVlcy5sZW5ndGggPiAwID8gJyAnIDogJycpICsgdG9rZW47XHJcbiAgfVxyXG4gIHJldHVybiB2YWx1ZXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGNvbnRyb2xsZXJQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIHtAbGluayBuZy4kY29udHJvbGxlciAkY29udHJvbGxlciBzZXJ2aWNlfSBpcyB1c2VkIGJ5IEFuZ3VsYXIgdG8gY3JlYXRlIG5ld1xyXG4gKiBjb250cm9sbGVycy5cclxuICpcclxuICogVGhpcyBwcm92aWRlciBhbGxvd3MgY29udHJvbGxlciByZWdpc3RyYXRpb24gdmlhIHRoZVxyXG4gKiB7QGxpbmsgbmcuJGNvbnRyb2xsZXJQcm92aWRlciNyZWdpc3RlciByZWdpc3Rlcn0gbWV0aG9kLlxyXG4gKi9cclxuZnVuY3Rpb24gJENvbnRyb2xsZXJQcm92aWRlcigpIHtcclxuICB2YXIgY29udHJvbGxlcnMgPSB7fSxcclxuICAgICAgZ2xvYmFscyA9IGZhbHNlLFxyXG4gICAgICBDTlRSTF9SRUcgPSAvXihcXFMrKShcXHMrYXNcXHMrKFxcdyspKT8kLztcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIENvbnRyb2xsZXIgbmFtZSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBjb250cm9sbGVycyB3aGVyZSB0aGUga2V5cyBhcmVcclxuICAgKiAgICB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBjb25zdHJ1Y3RvcnMuXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gY29uc3RydWN0b3IgQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmbiAob3B0aW9uYWxseSBkZWNvcmF0ZWQgd2l0aCBESVxyXG4gICAqICAgIGFubm90YXRpb25zIGluIHRoZSBhcnJheSBub3RhdGlvbikuXHJcbiAgICovXHJcbiAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWUsIGNvbnN0cnVjdG9yKSB7XHJcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnY29udHJvbGxlcicpO1xyXG4gICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XHJcbiAgICAgIGV4dGVuZChjb250cm9sbGVycywgbmFtZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb250cm9sbGVyc1tuYW1lXSA9IGNvbnN0cnVjdG9yO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkY29udHJvbGxlclByb3ZpZGVyI2FsbG93R2xvYmFsc1xyXG4gICAqIEBkZXNjcmlwdGlvbiBJZiBjYWxsZWQsIGFsbG93cyBgJGNvbnRyb2xsZXJgIHRvIGZpbmQgY29udHJvbGxlciBjb25zdHJ1Y3RvcnMgb24gYHdpbmRvd2BcclxuICAgKi9cclxuICB0aGlzLmFsbG93R2xvYmFscyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZ2xvYmFscyA9IHRydWU7XHJcbiAgfTtcclxuXHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkaW5qZWN0b3IsICR3aW5kb3cpIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgKiBAbmFtZSAkY29udHJvbGxlclxyXG4gICAgICogQHJlcXVpcmVzICRpbmplY3RvclxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBjb25zdHJ1Y3RvciBJZiBjYWxsZWQgd2l0aCBhIGZ1bmN0aW9uIHRoZW4gaXQncyBjb25zaWRlcmVkIHRvIGJlIHRoZVxyXG4gICAgICogICAgY29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gT3RoZXJ3aXNlIGl0J3MgY29uc2lkZXJlZCB0byBiZSBhIHN0cmluZyB3aGljaCBpcyB1c2VkXHJcbiAgICAgKiAgICB0byByZXRyaWV2ZSB0aGUgY29udHJvbGxlciBjb25zdHJ1Y3RvciB1c2luZyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxyXG4gICAgICpcclxuICAgICAqICAgICogY2hlY2sgaWYgYSBjb250cm9sbGVyIHdpdGggZ2l2ZW4gbmFtZSBpcyByZWdpc3RlcmVkIHZpYSBgJGNvbnRyb2xsZXJQcm92aWRlcmBcclxuICAgICAqICAgICogY2hlY2sgaWYgZXZhbHVhdGluZyB0aGUgc3RyaW5nIG9uIHRoZSBjdXJyZW50IHNjb3BlIHJldHVybnMgYSBjb25zdHJ1Y3RvclxyXG4gICAgICogICAgKiBpZiAkY29udHJvbGxlclByb3ZpZGVyI2FsbG93R2xvYmFscywgY2hlY2sgYHdpbmRvd1tjb25zdHJ1Y3Rvcl1gIG9uIHRoZSBnbG9iYWxcclxuICAgICAqICAgICAgYHdpbmRvd2Agb2JqZWN0IChub3QgcmVjb21tZW5kZWQpXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxvY2FscyBJbmplY3Rpb24gbG9jYWxzIGZvciBDb250cm9sbGVyLlxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiBnaXZlbiBjb250cm9sbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogYCRjb250cm9sbGVyYCBzZXJ2aWNlIGlzIHJlc3BvbnNpYmxlIGZvciBpbnN0YW50aWF0aW5nIGNvbnRyb2xsZXJzLlxyXG4gICAgICpcclxuICAgICAqIEl0J3MganVzdCBhIHNpbXBsZSBjYWxsIHRvIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LCBidXQgZXh0cmFjdGVkIGludG9cclxuICAgICAqIGEgc2VydmljZSwgc28gdGhhdCBvbmUgY2FuIG92ZXJyaWRlIHRoaXMgc2VydmljZSB3aXRoIFtCQyB2ZXJzaW9uXShodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xNjQ5Nzg4KS5cclxuICAgICAqL1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGxvY2FscywgbGF0ZXIsIGlkZW50KSB7XHJcbiAgICAgIC8vIFBSSVZBVEUgQVBJOlxyXG4gICAgICAvLyAgIHBhcmFtIGBsYXRlcmAgLS0tIGluZGljYXRlcyB0aGF0IHRoZSBjb250cm9sbGVyJ3MgY29uc3RydWN0b3IgaXMgaW52b2tlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgSWYgdHJ1ZSwgJGNvbnRyb2xsZXIgd2lsbCBhbGxvY2F0ZSB0aGUgb2JqZWN0IHdpdGggdGhlIGNvcnJlY3RcclxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwcm90b3R5cGUgY2hhaW4sIGJ1dCB3aWxsIG5vdCBpbnZva2UgdGhlIGNvbnRyb2xsZXIgdW50aWwgYSByZXR1cm5lZFxyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrIGlzIGludm9rZWQuXHJcbiAgICAgIC8vICAgcGFyYW0gYGlkZW50YCAtLS0gQW4gb3B0aW9uYWwgbGFiZWwgd2hpY2ggb3ZlcnJpZGVzIHRoZSBsYWJlbCBwYXJzZWQgZnJvbSB0aGUgY29udHJvbGxlclxyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIGlmIGFueS5cclxuICAgICAgdmFyIGluc3RhbmNlLCBtYXRjaCwgY29uc3RydWN0b3IsIGlkZW50aWZpZXI7XHJcbiAgICAgIGxhdGVyID0gbGF0ZXIgPT09IHRydWU7XHJcbiAgICAgIGlmIChpZGVudCAmJiBpc1N0cmluZyhpZGVudCkpIHtcclxuICAgICAgICBpZGVudGlmaWVyID0gaWRlbnQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmKGlzU3RyaW5nKGV4cHJlc3Npb24pKSB7XHJcbiAgICAgICAgbWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKENOVFJMX1JFRyksXHJcbiAgICAgICAgY29uc3RydWN0b3IgPSBtYXRjaFsxXSxcclxuICAgICAgICBpZGVudGlmaWVyID0gaWRlbnRpZmllciB8fCBtYXRjaFszXTtcclxuICAgICAgICBleHByZXNzaW9uID0gY29udHJvbGxlcnMuaGFzT3duUHJvcGVydHkoY29uc3RydWN0b3IpXHJcbiAgICAgICAgICAgID8gY29udHJvbGxlcnNbY29uc3RydWN0b3JdXHJcbiAgICAgICAgICAgIDogZ2V0dGVyKGxvY2Fscy4kc2NvcGUsIGNvbnN0cnVjdG9yLCB0cnVlKSB8fFxyXG4gICAgICAgICAgICAgICAgKGdsb2JhbHMgPyBnZXR0ZXIoJHdpbmRvdywgY29uc3RydWN0b3IsIHRydWUpIDogdW5kZWZpbmVkKTtcclxuXHJcbiAgICAgICAgYXNzZXJ0QXJnRm4oZXhwcmVzc2lvbiwgY29uc3RydWN0b3IsIHRydWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAobGF0ZXIpIHtcclxuICAgICAgICAvLyBJbnN0YW50aWF0ZSBjb250cm9sbGVyIGxhdGVyOlxyXG4gICAgICAgIC8vIFRoaXMgbWFjaGluZXJ5IGlzIHVzZWQgdG8gY3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBvYmplY3QgYmVmb3JlIGNhbGxpbmcgdGhlXHJcbiAgICAgICAgLy8gY29udHJvbGxlcidzIGNvbnN0cnVjdG9yIGl0c2VsZi5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIHByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIGNvbnRyb2xsZXIgYmVmb3JlIHRoZSBjb25zdHJ1Y3RvciBpc1xyXG4gICAgICAgIC8vIGludm9rZWQuIFByaW1hcmlseSwgdGhpcyBpcyB1c2VkIGZvciBpc29sYXRlIHNjb3BlIGJpbmRpbmdzIGluICRjb21waWxlLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gVGhpcyBmZWF0dXJlIGlzIG5vdCBpbnRlbmRlZCBmb3IgdXNlIGJ5IGFwcGxpY2F0aW9ucywgYW5kIGlzIHRodXMgbm90IGRvY3VtZW50ZWRcclxuICAgICAgICAvLyBwdWJsaWNseS5cclxuICAgICAgICB2YXIgQ29uc3RydWN0b3IgPSBmdW5jdGlvbigpIHt9O1xyXG4gICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IChpc0FycmF5KGV4cHJlc3Npb24pID9cclxuICAgICAgICAgIGV4cHJlc3Npb25bZXhwcmVzc2lvbi5sZW5ndGggLSAxXSA6IGV4cHJlc3Npb24pLnByb3RvdHlwZTtcclxuICAgICAgICBpbnN0YW5jZSA9IG5ldyBDb25zdHJ1Y3RvcigpO1xyXG5cclxuICAgICAgICBpZiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgICAgYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBjb25zdHJ1Y3RvciB8fCBleHByZXNzaW9uLm5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRpbmplY3Rvci5pbnZva2UoZXhwcmVzc2lvbiwgaW5zdGFuY2UsIGxvY2FscywgY29uc3RydWN0b3IpO1xyXG4gICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZSxcclxuICAgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaW5zdGFuY2UgPSAkaW5qZWN0b3IuaW5zdGFudGlhdGUoZXhwcmVzc2lvbiwgbG9jYWxzLCBjb25zdHJ1Y3Rvcik7XHJcblxyXG4gICAgICBpZiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgY29uc3RydWN0b3IgfHwgZXhwcmVzc2lvbi5uYW1lKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIG5hbWUpIHtcclxuICAgICAgaWYgKCEobG9jYWxzICYmIGlzT2JqZWN0KGxvY2Fscy4kc2NvcGUpKSkge1xyXG4gICAgICAgIHRocm93IG1pbkVycignJGNvbnRyb2xsZXInKSgnbm9zY3AnLFxyXG4gICAgICAgICAgXCJDYW5ub3QgZXhwb3J0IGNvbnRyb2xsZXIgJ3swfScgYXMgJ3sxfSchIE5vICRzY29wZSBvYmplY3QgcHJvdmlkZWQgdmlhIGBsb2NhbHNgLlwiLFxyXG4gICAgICAgICAgbmFtZSwgaWRlbnRpZmllcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxvY2Fscy4kc2NvcGVbaWRlbnRpZmllcl0gPSBpbnN0YW5jZTtcclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRkb2N1bWVudFxyXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSB7QGxpbmsgYW5ndWxhci5lbGVtZW50IGpRdWVyeSBvciBqcUxpdGV9IHdyYXBwZXIgZm9yIHRoZSBicm93c2VyJ3MgYHdpbmRvdy5kb2N1bWVudGAgb2JqZWN0LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJkb2N1bWVudEV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPHA+JGRvY3VtZW50IHRpdGxlOiA8YiBuZy1iaW5kPVwidGl0bGVcIj48L2I+PC9wPlxyXG4gICAgICAgICA8cD53aW5kb3cuZG9jdW1lbnQgdGl0bGU6IDxiIG5nLWJpbmQ9XCJ3aW5kb3dUaXRsZVwiPjwvYj48L3A+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2RvY3VtZW50RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkc2NvcGUsICRkb2N1bWVudCkge1xyXG4gICAgICAgICAgICRzY29wZS50aXRsZSA9ICRkb2N1bWVudFswXS50aXRsZTtcclxuICAgICAgICAgICAkc2NvcGUud2luZG93VGl0bGUgPSBhbmd1bGFyLmVsZW1lbnQod2luZG93LmRvY3VtZW50KVswXS50aXRsZTtcclxuICAgICAgICAgfV0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuZnVuY3Rpb24gJERvY3VtZW50UHJvdmlkZXIoKXtcclxuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCBmdW5jdGlvbih3aW5kb3cpe1xyXG4gICAgcmV0dXJuIGpxTGl0ZSh3aW5kb3cuZG9jdW1lbnQpO1xyXG4gIH1dO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJcclxuICogQHJlcXVpcmVzIG5nLiRsb2dcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEFueSB1bmNhdWdodCBleGNlcHRpb24gaW4gYW5ndWxhciBleHByZXNzaW9ucyBpcyBkZWxlZ2F0ZWQgdG8gdGhpcyBzZXJ2aWNlLlxyXG4gKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzaW1wbHkgZGVsZWdhdGVzIHRvIGAkbG9nLmVycm9yYCB3aGljaCBsb2dzIGl0IGludG9cclxuICogdGhlIGJyb3dzZXIgY29uc29sZS5cclxuICpcclxuICogSW4gdW5pdCB0ZXN0cywgaWYgYGFuZ3VsYXItbW9ja3MuanNgIGlzIGxvYWRlZCwgdGhpcyBzZXJ2aWNlIGlzIG92ZXJyaWRkZW4gYnlcclxuICoge0BsaW5rIG5nTW9jay4kZXhjZXB0aW9uSGFuZGxlciBtb2NrICRleGNlcHRpb25IYW5kbGVyfSB3aGljaCBhaWRzIGluIHRlc3RpbmcuXHJcbiAqXHJcbiAqICMjIEV4YW1wbGU6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgYW5ndWxhci5tb2R1bGUoJ2V4Y2VwdGlvbk92ZXJyaWRlJywgW10pLmZhY3RvcnkoJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24gKCkge1xyXG4gKiAgICAgcmV0dXJuIGZ1bmN0aW9uIChleGNlcHRpb24sIGNhdXNlKSB7XHJcbiAqICAgICAgIGV4Y2VwdGlvbi5tZXNzYWdlICs9ICcgKGNhdXNlZCBieSBcIicgKyBjYXVzZSArICdcIiknO1xyXG4gKiAgICAgICB0aHJvdyBleGNlcHRpb247XHJcbiAqICAgICB9O1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogVGhpcyBleGFtcGxlIHdpbGwgb3ZlcnJpZGUgdGhlIG5vcm1hbCBhY3Rpb24gb2YgYCRleGNlcHRpb25IYW5kbGVyYCwgdG8gbWFrZSBhbmd1bGFyXHJcbiAqIGV4Y2VwdGlvbnMgZmFpbCBoYXJkIHdoZW4gdGhleSBoYXBwZW4sIGluc3RlYWQgb2YganVzdCBsb2dnaW5nIHRvIHRoZSBjb25zb2xlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0Vycm9yfSBleGNlcHRpb24gRXhjZXB0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXJyb3IuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gY2F1c2Ugb3B0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbnRleHQgaW4gd2hpY2hcclxuICogICAgICAgdGhlIGVycm9yIHdhcyB0aHJvd24uXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJGxvZycsIGZ1bmN0aW9uKCRsb2cpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XHJcbiAgICAgICRsb2cuZXJyb3IuYXBwbHkoJGxvZywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBoZWFkZXJzIGludG8ga2V5IHZhbHVlIG9iamVjdFxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGVhZGVycyBSYXcgaGVhZGVycyBhcyBhIHN0cmluZ1xyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBQYXJzZWQgaGVhZGVycyBhcyBrZXkgdmFsdWUgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xyXG4gIHZhciBwYXJzZWQgPSB7fSwga2V5LCB2YWwsIGk7XHJcblxyXG4gIGlmICghaGVhZGVycykgcmV0dXJuIHBhcnNlZDtcclxuXHJcbiAgZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24obGluZSkge1xyXG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xyXG4gICAga2V5ID0gbG93ZXJjYXNlKHRyaW0obGluZS5zdWJzdHIoMCwgaSkpKTtcclxuICAgIHZhbCA9IHRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcclxuXHJcbiAgICBpZiAoa2V5KSB7XHJcbiAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBwYXJzZWQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIHBhcnNlZCBoZWFkZXJzLlxyXG4gKlxyXG4gKiBIZWFkZXJzIGFyZSBsYXp5IHBhcnNlZCB3aGVuIGZpcnN0IHJlcXVlc3RlZC5cclxuICogQHNlZSBwYXJzZUhlYWRlcnNcclxuICpcclxuICogQHBhcmFtIHsoc3RyaW5nfE9iamVjdCl9IGhlYWRlcnMgSGVhZGVycyB0byBwcm92aWRlIGFjY2VzcyB0by5cclxuICogQHJldHVybnMge2Z1bmN0aW9uKHN0cmluZz0pfSBSZXR1cm5zIGEgZ2V0dGVyIGZ1bmN0aW9uIHdoaWNoIGlmIGNhbGxlZCB3aXRoOlxyXG4gKlxyXG4gKiAgIC0gaWYgY2FsbGVkIHdpdGggc2luZ2xlIGFuIGFyZ3VtZW50IHJldHVybnMgYSBzaW5nbGUgaGVhZGVyIHZhbHVlIG9yIG51bGxcclxuICogICAtIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cyByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCBoZWFkZXJzLlxyXG4gKi9cclxuZnVuY3Rpb24gaGVhZGVyc0dldHRlcihoZWFkZXJzKSB7XHJcbiAgdmFyIGhlYWRlcnNPYmogPSBpc09iamVjdChoZWFkZXJzKSA/IGhlYWRlcnMgOiB1bmRlZmluZWQ7XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICBpZiAoIWhlYWRlcnNPYmopIGhlYWRlcnNPYmogPSAgcGFyc2VIZWFkZXJzKGhlYWRlcnMpO1xyXG5cclxuICAgIGlmIChuYW1lKSB7XHJcbiAgICAgIHJldHVybiBoZWFkZXJzT2JqW2xvd2VyY2FzZShuYW1lKV0gfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaGVhZGVyc09iajtcclxuICB9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENoYWluIGFsbCBnaXZlbiBmdW5jdGlvbnNcclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGZvciBib3RoIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHRyYW5zZm9ybWluZ1xyXG4gKlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgRGF0YSB0byB0cmFuc2Zvcm0uXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nPSl9IGhlYWRlcnMgSHR0cCBoZWFkZXJzIGdldHRlciBmbi5cclxuICogQHBhcmFtIHsoRnVuY3Rpb258QXJyYXkuPEZ1bmN0aW9uPil9IGZucyBGdW5jdGlvbiBvciBhbiBhcnJheSBvZiBmdW5jdGlvbnMuXHJcbiAqIEByZXR1cm5zIHsqfSBUcmFuc2Zvcm1lZCBkYXRhLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHtcclxuICBpZiAoaXNGdW5jdGlvbihmbnMpKVxyXG4gICAgcmV0dXJuIGZucyhkYXRhLCBoZWFkZXJzKTtcclxuXHJcbiAgZm9yRWFjaChmbnMsIGZ1bmN0aW9uKGZuKSB7XHJcbiAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycyk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNTdWNjZXNzKHN0YXR1cykge1xyXG4gIHJldHVybiAyMDAgPD0gc3RhdHVzICYmIHN0YXR1cyA8IDMwMDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGh0dHBQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVXNlIGAkaHR0cFByb3ZpZGVyYCB0byBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gc2VydmljZS5cclxuICogKi9cclxuZnVuY3Rpb24gJEh0dHBQcm92aWRlcigpIHtcclxuICB2YXIgSlNPTl9TVEFSVCA9IC9eXFxzKihcXFt8XFx7W15cXHtdKS8sXHJcbiAgICAgIEpTT05fRU5EID0gL1tcXH1cXF1dXFxzKiQvLFxyXG4gICAgICBQUk9URUNUSU9OX1BSRUZJWCA9IC9eXFwpXFxdXFx9Jyw/XFxuLyxcclxuICAgICAgQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04gPSB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciNkZWZhdWx0c1xyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogT2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMgZm9yIGFsbCB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IHJlcXVlc3RzLlxyXG4gICAqXHJcbiAgICogLSAqKmBkZWZhdWx0cy54c3JmQ29va2llTmFtZWAqKiAtIHtzdHJpbmd9IC0gTmFtZSBvZiBjb29raWUgY29udGFpbmluZyB0aGUgWFNSRiB0b2tlbi5cclxuICAgKiBEZWZhdWx0cyB2YWx1ZSBpcyBgJ1hTUkYtVE9LRU4nYC5cclxuICAgKlxyXG4gICAqIC0gKipgZGVmYXVsdHMueHNyZkhlYWRlck5hbWVgKiogLSB7c3RyaW5nfSAtIE5hbWUgb2YgSFRUUCBoZWFkZXIgdG8gcG9wdWxhdGUgd2l0aCB0aGVcclxuICAgKiBYU1JGIHRva2VuLiBEZWZhdWx0cyB2YWx1ZSBpcyBgJ1gtWFNSRi1UT0tFTidgLlxyXG4gICAqXHJcbiAgICogLSAqKmBkZWZhdWx0cy5oZWFkZXJzYCoqIC0ge09iamVjdH0gLSBEZWZhdWx0IGhlYWRlcnMgZm9yIGFsbCAkaHR0cCByZXF1ZXN0cy5cclxuICAgKiBSZWZlciB0byB7QGxpbmsgbmcuJGh0dHAjc2V0dGluZy1odHRwLWhlYWRlcnMgJGh0dHB9IGZvciBkb2N1bWVudGF0aW9uIG9uXHJcbiAgICogc2V0dGluZyBkZWZhdWx0IGhlYWRlcnMuXHJcbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5jb21tb25gKipcclxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnBvc3RgKipcclxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnB1dGAqKlxyXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMucGF0Y2hgKipcclxuICAgKiovXHJcbiAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgIC8vIHRyYW5zZm9ybSBpbmNvbWluZyByZXNwb25zZSBkYXRhXHJcbiAgICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGlzU3RyaW5nKGRhdGEpKSB7XHJcbiAgICAgICAgLy8gc3RyaXAganNvbiB2dWxuZXJhYmlsaXR5IHByb3RlY3Rpb24gcHJlZml4XHJcbiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZShQUk9URUNUSU9OX1BSRUZJWCwgJycpO1xyXG4gICAgICAgIGlmIChKU09OX1NUQVJULnRlc3QoZGF0YSkgJiYgSlNPTl9FTkQudGVzdChkYXRhKSlcclxuICAgICAgICAgIGRhdGEgPSBmcm9tSnNvbihkYXRhKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1dLFxyXG5cclxuICAgIC8vIHRyYW5zZm9ybSBvdXRnb2luZyByZXF1ZXN0IGRhdGFcclxuICAgIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbihkKSB7XHJcbiAgICAgIHJldHVybiBpc09iamVjdChkKSAmJiAhaXNGaWxlKGQpICYmICFpc0Jsb2IoZCkgPyB0b0pzb24oZCkgOiBkO1xyXG4gICAgfV0sXHJcblxyXG4gICAgLy8gZGVmYXVsdCBoZWFkZXJzXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGNvbW1vbjoge1xyXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xyXG4gICAgICB9LFxyXG4gICAgICBwb3N0OiAgIHNoYWxsb3dDb3B5KENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OKSxcclxuICAgICAgcHV0OiAgICBzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiksXHJcbiAgICAgIHBhdGNoOiAgc2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pXHJcbiAgICB9LFxyXG5cclxuICAgIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXHJcbiAgICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTidcclxuICB9O1xyXG5cclxuICB2YXIgdXNlQXBwbHlBc3luYyA9IGZhbHNlO1xyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkaHR0cFByb3ZpZGVyI3VzZUFwcGx5QXN5bmNcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIENvbmZpZ3VyZSAkaHR0cCBzZXJ2aWNlIHRvIGNvbWJpbmUgcHJvY2Vzc2luZyBvZiBtdWx0aXBsZSBodHRwIHJlc3BvbnNlcyByZWNlaXZlZCBhdCBhcm91bmRcclxuICAgKiB0aGUgc2FtZSB0aW1lIHZpYSB7QGxpbmsgbmcuJHJvb3RTY29wZSNhcHBseUFzeW5jICRyb290U2NvcGUuJGFwcGx5QXN5bmN9LiBUaGlzIGNhbiByZXN1bHQgaW5cclxuICAgKiBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudCBmb3IgYmlnZ2VyIGFwcGxpY2F0aW9ucyB0aGF0IG1ha2UgbWFueSBIVFRQIHJlcXVlc3RzXHJcbiAgICogY29uY3VycmVudGx5IChjb21tb24gZHVyaW5nIGFwcGxpY2F0aW9uIGJvb3RzdHJhcCkuXHJcbiAgICpcclxuICAgKiBEZWZhdWx0cyB0byBmYWxzZS4gSWYgbm8gdmFsdWUgaXMgc3BlY2lmZWQsIHJldHVybnMgdGhlIGN1cnJlbnQgY29uZmlndXJlZCB2YWx1ZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHZhbHVlIElmIHRydWUsIHdoZW4gcmVxdWVzdHMgYXJlIGxvYWRlZCwgdGhleSB3aWxsIHNjaGVkdWxlIGEgZGVmZXJyZWRcclxuICAgKiAgICBcImFwcGx5XCIgb24gdGhlIG5leHQgdGljaywgZ2l2aW5nIHRpbWUgZm9yIHN1YnNlcXVlbnQgcmVxdWVzdHMgaW4gYSByb3VnaGx5IH4xMG1zIHdpbmRvd1xyXG4gICAqICAgIHRvIGxvYWQgYW5kIHNoYXJlIHRoZSBzYW1lIGRpZ2VzdCBjeWNsZS5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufE9iamVjdH0gSWYgYSB2YWx1ZSBpcyBzcGVjaWZpZWQsIHJldHVybnMgdGhlICRodHRwUHJvdmlkZXIgZm9yIGNoYWluaW5nLlxyXG4gICAqICAgIG90aGVyd2lzZSwgcmV0dXJucyB0aGUgY3VycmVudCBjb25maWd1cmVkIHZhbHVlLlxyXG4gICAqKi9cclxuICB0aGlzLnVzZUFwcGx5QXN5bmMgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgdXNlQXBwbHlBc3luYyA9ICEhdmFsdWU7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZUFwcGx5QXN5bmM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQXJlIG9yZGVyZWQgYnkgcmVxdWVzdCwgaS5lLiB0aGV5IGFyZSBhcHBsaWVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxyXG4gICAqIGFycmF5LCBvbiByZXF1ZXN0LCBidXQgcmV2ZXJzZSBvcmRlciwgb24gcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgdmFyIGludGVyY2VwdG9yRmFjdG9yaWVzID0gdGhpcy5pbnRlcmNlcHRvcnMgPSBbXTtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckaHR0cEJhY2tlbmQnLCAnJGJyb3dzZXInLCAnJGNhY2hlRmFjdG9yeScsICckcm9vdFNjb3BlJywgJyRxJywgJyRpbmplY3RvcicsXHJcbiAgICAgIGZ1bmN0aW9uKCRodHRwQmFja2VuZCwgJGJyb3dzZXIsICRjYWNoZUZhY3RvcnksICRyb290U2NvcGUsICRxLCAkaW5qZWN0b3IpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdENhY2hlID0gJGNhY2hlRmFjdG9yeSgnJGh0dHAnKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEludGVyY2VwdG9ycyBzdG9yZWQgaW4gcmV2ZXJzZSBvcmRlci4gSW5uZXIgaW50ZXJjZXB0b3JzIGJlZm9yZSBvdXRlciBpbnRlcmNlcHRvcnMuXHJcbiAgICAgKiBUaGUgcmV2ZXJzYWwgaXMgbmVlZGVkIHNvIHRoYXQgd2UgY2FuIGJ1aWxkIHVwIHRoZSBpbnRlcmNlcHRpb24gY2hhaW4gYXJvdW5kIHRoZVxyXG4gICAgICogc2VydmVyIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIHZhciByZXZlcnNlZEludGVyY2VwdG9ycyA9IFtdO1xyXG5cclxuICAgIGZvckVhY2goaW50ZXJjZXB0b3JGYWN0b3JpZXMsIGZ1bmN0aW9uKGludGVyY2VwdG9yRmFjdG9yeSkge1xyXG4gICAgICByZXZlcnNlZEludGVyY2VwdG9ycy51bnNoaWZ0KGlzU3RyaW5nKGludGVyY2VwdG9yRmFjdG9yeSlcclxuICAgICAgICAgID8gJGluamVjdG9yLmdldChpbnRlcmNlcHRvckZhY3RvcnkpIDogJGluamVjdG9yLmludm9rZShpbnRlcmNlcHRvckZhY3RvcnkpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgKiBAbmFtZSAkaHR0cFxyXG4gICAgICogQHJlcXVpcmVzIG5nLiRodHRwQmFja2VuZFxyXG4gICAgICogQHJlcXVpcmVzICRjYWNoZUZhY3RvcnlcclxuICAgICAqIEByZXF1aXJlcyAkcm9vdFNjb3BlXHJcbiAgICAgKiBAcmVxdWlyZXMgJHFcclxuICAgICAqIEByZXF1aXJlcyAkaW5qZWN0b3JcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFRoZSBgJGh0dHBgIHNlcnZpY2UgaXMgYSBjb3JlIEFuZ3VsYXIgc2VydmljZSB0aGF0IGZhY2lsaXRhdGVzIGNvbW11bmljYXRpb24gd2l0aCB0aGUgcmVtb3RlXHJcbiAgICAgKiBIVFRQIHNlcnZlcnMgdmlhIHRoZSBicm93c2VyJ3MgW1hNTEh0dHBSZXF1ZXN0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi94bWxodHRwcmVxdWVzdClcclxuICAgICAqIG9iamVjdCBvciB2aWEgW0pTT05QXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0pTT05QKS5cclxuICAgICAqXHJcbiAgICAgKiBGb3IgdW5pdCB0ZXN0aW5nIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSBgJGh0dHBgIHNlcnZpY2UsIHNlZVxyXG4gICAgICoge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxyXG4gICAgICpcclxuICAgICAqIEZvciBhIGhpZ2hlciBsZXZlbCBvZiBhYnN0cmFjdGlvbiwgcGxlYXNlIGNoZWNrIG91dCB0aGUge0BsaW5rIG5nUmVzb3VyY2UuJHJlc291cmNlXHJcbiAgICAgKiAkcmVzb3VyY2V9IHNlcnZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogVGhlICRodHRwIEFQSSBpcyBiYXNlZCBvbiB0aGUge0BsaW5rIG5nLiRxIGRlZmVycmVkL3Byb21pc2UgQVBJc30gZXhwb3NlZCBieVxyXG4gICAgICogdGhlICRxIHNlcnZpY2UuIFdoaWxlIGZvciBzaW1wbGUgdXNhZ2UgcGF0dGVybnMgdGhpcyBkb2Vzbid0IG1hdHRlciBtdWNoLCBmb3IgYWR2YW5jZWQgdXNhZ2VcclxuICAgICAqIGl0IGlzIGltcG9ydGFudCB0byBmYW1pbGlhcml6ZSB5b3Vyc2VsZiB3aXRoIHRoZXNlIEFQSXMgYW5kIHRoZSBndWFyYW50ZWVzIHRoZXkgcHJvdmlkZS5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogIyMgR2VuZXJhbCB1c2FnZVxyXG4gICAgICogVGhlIGAkaHR0cGAgc2VydmljZSBpcyBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGEgc2luZ2xlIGFyZ3VtZW50IOKAlCBhIGNvbmZpZ3VyYXRpb24gb2JqZWN0IOKAlFxyXG4gICAgICogdGhhdCBpcyB1c2VkIHRvIGdlbmVyYXRlIGFuIEhUVFAgcmVxdWVzdCBhbmQgcmV0dXJucyAgYSB7QGxpbmsgbmcuJHEgcHJvbWlzZX1cclxuICAgICAqIHdpdGggdHdvICRodHRwIHNwZWNpZmljIG1ldGhvZHM6IGBzdWNjZXNzYCBhbmQgYGVycm9yYC5cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogICAkaHR0cCh7bWV0aG9kOiAnR0VUJywgdXJsOiAnL3NvbWVVcmwnfSkuXHJcbiAgICAgKiAgICAgc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xyXG4gICAgICogICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseVxyXG4gICAgICogICAgICAgLy8gd2hlbiB0aGUgcmVzcG9uc2UgaXMgYXZhaWxhYmxlXHJcbiAgICAgKiAgICAgfSkuXHJcbiAgICAgKiAgICAgZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcclxuICAgICAqICAgICAgIC8vIGNhbGxlZCBhc3luY2hyb25vdXNseSBpZiBhbiBlcnJvciBvY2N1cnNcclxuICAgICAqICAgICAgIC8vIG9yIHNlcnZlciByZXR1cm5zIHJlc3BvbnNlIHdpdGggYW4gZXJyb3Igc3RhdHVzLlxyXG4gICAgICogICAgIH0pO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogU2luY2UgdGhlIHJldHVybmVkIHZhbHVlIG9mIGNhbGxpbmcgdGhlICRodHRwIGZ1bmN0aW9uIGlzIGEgYHByb21pc2VgLCB5b3UgY2FuIGFsc28gdXNlXHJcbiAgICAgKiB0aGUgYHRoZW5gIG1ldGhvZCB0byByZWdpc3RlciBjYWxsYmFja3MsIGFuZCB0aGVzZSBjYWxsYmFja3Mgd2lsbCByZWNlaXZlIGEgc2luZ2xlIGFyZ3VtZW50IOKAk1xyXG4gICAgICogYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmVzcG9uc2UuIFNlZSB0aGUgQVBJIHNpZ25hdHVyZSBhbmQgdHlwZSBpbmZvIGJlbG93IGZvciBtb3JlXHJcbiAgICAgKiBkZXRhaWxzLlxyXG4gICAgICpcclxuICAgICAqIEEgcmVzcG9uc2Ugc3RhdHVzIGNvZGUgYmV0d2VlbiAyMDAgYW5kIDI5OSBpcyBjb25zaWRlcmVkIGEgc3VjY2VzcyBzdGF0dXMgYW5kXHJcbiAgICAgKiB3aWxsIHJlc3VsdCBpbiB0aGUgc3VjY2VzcyBjYWxsYmFjayBiZWluZyBjYWxsZWQuIE5vdGUgdGhhdCBpZiB0aGUgcmVzcG9uc2UgaXMgYSByZWRpcmVjdCxcclxuICAgICAqIFhNTEh0dHBSZXF1ZXN0IHdpbGwgdHJhbnNwYXJlbnRseSBmb2xsb3cgaXQsIG1lYW5pbmcgdGhhdCB0aGUgZXJyb3IgY2FsbGJhY2sgd2lsbCBub3QgYmVcclxuICAgICAqIGNhbGxlZCBmb3Igc3VjaCByZXNwb25zZXMuXHJcbiAgICAgKlxyXG4gICAgICogIyMgV3JpdGluZyBVbml0IFRlc3RzIHRoYXQgdXNlICRodHRwXHJcbiAgICAgKiBXaGVuIHVuaXQgdGVzdGluZyAodXNpbmcge0BsaW5rIG5nTW9jayBuZ01vY2t9KSwgaXQgaXMgbmVjZXNzYXJ5IHRvIGNhbGxcclxuICAgICAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kI2ZsdXNoICRodHRwQmFja2VuZC5mbHVzaCgpfSB0byBmbHVzaCBlYWNoIHBlbmRpbmdcclxuICAgICAqIHJlcXVlc3QgdXNpbmcgdHJhaW5lZCByZXNwb25zZXMuXHJcbiAgICAgKlxyXG4gICAgICogYGBgXHJcbiAgICAgKiAkaHR0cEJhY2tlbmQuZXhwZWN0R0VUKC4uLik7XHJcbiAgICAgKiAkaHR0cC5nZXQoLi4uKTtcclxuICAgICAqICRodHRwQmFja2VuZC5mbHVzaCgpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMgU2hvcnRjdXQgbWV0aG9kc1xyXG4gICAgICpcclxuICAgICAqIFNob3J0Y3V0IG1ldGhvZHMgYXJlIGFsc28gYXZhaWxhYmxlLiBBbGwgc2hvcnRjdXQgbWV0aG9kcyByZXF1aXJlIHBhc3NpbmcgaW4gdGhlIFVSTCwgYW5kXHJcbiAgICAgKiByZXF1ZXN0IGRhdGEgbXVzdCBiZSBwYXNzZWQgaW4gZm9yIFBPU1QvUFVUIHJlcXVlc3RzLlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiAgICRodHRwLmdldCgnL3NvbWVVcmwnKS5zdWNjZXNzKHN1Y2Nlc3NDYWxsYmFjayk7XHJcbiAgICAgKiAgICRodHRwLnBvc3QoJy9zb21lVXJsJywgZGF0YSkuc3VjY2VzcyhzdWNjZXNzQ2FsbGJhY2spO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQ29tcGxldGUgbGlzdCBvZiBzaG9ydGN1dCBtZXRob2RzOlxyXG4gICAgICpcclxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2dldCAkaHR0cC5nZXR9XHJcbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNoZWFkICRodHRwLmhlYWR9XHJcbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNwb3N0ICRodHRwLnBvc3R9XHJcbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNwdXQgJGh0dHAucHV0fVxyXG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjZGVsZXRlICRodHRwLmRlbGV0ZX1cclxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2pzb25wICRodHRwLmpzb25wfVxyXG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjcGF0Y2ggJGh0dHAucGF0Y2h9XHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICMjIFNldHRpbmcgSFRUUCBIZWFkZXJzXHJcbiAgICAgKlxyXG4gICAgICogVGhlICRodHRwIHNlcnZpY2Ugd2lsbCBhdXRvbWF0aWNhbGx5IGFkZCBjZXJ0YWluIEhUVFAgaGVhZGVycyB0byBhbGwgcmVxdWVzdHMuIFRoZXNlIGRlZmF1bHRzXHJcbiAgICAgKiBjYW4gYmUgZnVsbHkgY29uZmlndXJlZCBieSBhY2Nlc3NpbmcgdGhlIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnNgIGNvbmZpZ3VyYXRpb25cclxuICAgICAqIG9iamVjdCwgd2hpY2ggY3VycmVudGx5IGNvbnRhaW5zIHRoaXMgZGVmYXVsdCBjb25maWd1cmF0aW9uOlxyXG4gICAgICpcclxuICAgICAqIC0gYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25gIChoZWFkZXJzIHRoYXQgYXJlIGNvbW1vbiBmb3IgYWxsIHJlcXVlc3RzKTpcclxuICAgICAqICAgLSBgQWNjZXB0OiBhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqIC8gKmBcclxuICAgICAqIC0gYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0YDogKGhlYWRlciBkZWZhdWx0cyBmb3IgUE9TVCByZXF1ZXN0cylcclxuICAgICAqICAgLSBgQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uYFxyXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnB1dGAgKGhlYWRlciBkZWZhdWx0cyBmb3IgUFVUIHJlcXVlc3RzKVxyXG4gICAgICogICAtIGBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25gXHJcbiAgICAgKlxyXG4gICAgICogVG8gYWRkIG9yIG92ZXJ3cml0ZSB0aGVzZSBkZWZhdWx0cywgc2ltcGx5IGFkZCBvciByZW1vdmUgYSBwcm9wZXJ0eSBmcm9tIHRoZXNlIGNvbmZpZ3VyYXRpb25cclxuICAgICAqIG9iamVjdHMuIFRvIGFkZCBoZWFkZXJzIGZvciBhbiBIVFRQIG1ldGhvZCBvdGhlciB0aGFuIFBPU1Qgb3IgUFVULCBzaW1wbHkgYWRkIGEgbmV3IG9iamVjdFxyXG4gICAgICogd2l0aCB0aGUgbG93ZXJjYXNlZCBIVFRQIG1ldGhvZCBuYW1lIGFzIHRoZSBrZXksIGUuZy5cclxuICAgICAqIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0geyAnTXktSGVhZGVyJyA6ICd2YWx1ZScgfS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgZGVmYXVsdHMgY2FuIGFsc28gYmUgc2V0IGF0IHJ1bnRpbWUgdmlhIHRoZSBgJGh0dHAuZGVmYXVsdHNgIG9iamVjdCBpbiB0aGUgc2FtZVxyXG4gICAgICogZmFzaGlvbi4gRm9yIGV4YW1wbGU6XHJcbiAgICAgKlxyXG4gICAgICogYGBgXHJcbiAgICAgKiBtb2R1bGUucnVuKGZ1bmN0aW9uKCRodHRwKSB7XHJcbiAgICAgKiAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgWW1WbGNEcGliMjl3J1xyXG4gICAgICogfSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBJbiBhZGRpdGlvbiwgeW91IGNhbiBzdXBwbHkgYSBgaGVhZGVyc2AgcHJvcGVydHkgaW4gdGhlIGNvbmZpZyBvYmplY3QgcGFzc2VkIHdoZW5cclxuICAgICAqIGNhbGxpbmcgYCRodHRwKGNvbmZpZylgLCB3aGljaCBvdmVycmlkZXMgdGhlIGRlZmF1bHRzIHdpdGhvdXQgY2hhbmdpbmcgdGhlbSBnbG9iYWxseS5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogIyMgVHJhbnNmb3JtaW5nIFJlcXVlc3RzIGFuZCBSZXNwb25zZXNcclxuICAgICAqXHJcbiAgICAgKiBCb3RoIHJlcXVlc3RzIGFuZCByZXNwb25zZXMgY2FuIGJlIHRyYW5zZm9ybWVkIHVzaW5nIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uczogYHRyYW5zZm9ybVJlcXVlc3RgXHJcbiAgICAgKiBhbmQgYHRyYW5zZm9ybVJlc3BvbnNlYC4gVGhlc2UgcHJvcGVydGllcyBjYW4gYmUgYSBzaW5nbGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zXHJcbiAgICAgKiB0aGUgdHJhbnNmb3JtZWQgdmFsdWUgKGB7ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcilgKSBvciBhbiBhcnJheSBvZiBzdWNoIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyxcclxuICAgICAqIHdoaWNoIGFsbG93cyB5b3UgdG8gYHB1c2hgIG9yIGB1bnNoaWZ0YCBhIG5ldyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiBpbnRvIHRoZSB0cmFuc2Zvcm1hdGlvbiBjaGFpbi5cclxuICAgICAqXHJcbiAgICAgKiAjIyMgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnNcclxuICAgICAqXHJcbiAgICAgKiBUaGUgYCRodHRwUHJvdmlkZXJgIHByb3ZpZGVyIGFuZCBgJGh0dHBgIHNlcnZpY2UgZXhwb3NlIGBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCBhbmRcclxuICAgICAqIGBkZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZWAgcHJvcGVydGllcy4gSWYgYSByZXF1ZXN0IGRvZXMgbm90IHByb3ZpZGUgaXRzIG93biB0cmFuc2Zvcm1hdGlvbnNcclxuICAgICAqIHRoZW4gdGhlc2Ugd2lsbCBiZSBhcHBsaWVkLlxyXG4gICAgICpcclxuICAgICAqIFlvdSBjYW4gYXVnbWVudCBvciByZXBsYWNlIHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyBieSBtb2RpZnlpbmcgdGhlc2UgcHJvcGVydGllcyBieSBhZGRpbmcgdG8gb3JcclxuICAgICAqIHJlcGxhY2luZyB0aGUgYXJyYXkuXHJcbiAgICAgKlxyXG4gICAgICogQW5ndWxhciBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zOlxyXG4gICAgICpcclxuICAgICAqIFJlcXVlc3QgdHJhbnNmb3JtYXRpb25zIChgJGh0dHBQcm92aWRlci5kZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCBhbmQgYCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgKTpcclxuICAgICAqXHJcbiAgICAgKiAtIElmIHRoZSBgZGF0YWAgcHJvcGVydHkgb2YgdGhlIHJlcXVlc3QgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbnMgYW4gb2JqZWN0LCBzZXJpYWxpemUgaXRcclxuICAgICAqICAgaW50byBKU09OIGZvcm1hdC5cclxuICAgICAqXHJcbiAgICAgKiBSZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCBhbmQgYCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCk6XHJcbiAgICAgKlxyXG4gICAgICogIC0gSWYgWFNSRiBwcmVmaXggaXMgZGV0ZWN0ZWQsIHN0cmlwIGl0IChzZWUgU2VjdXJpdHkgQ29uc2lkZXJhdGlvbnMgc2VjdGlvbiBiZWxvdykuXHJcbiAgICAgKiAgLSBJZiBKU09OIHJlc3BvbnNlIGlzIGRldGVjdGVkLCBkZXNlcmlhbGl6ZSBpdCB1c2luZyBhIEpTT04gcGFyc2VyLlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAjIyMgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnMgUGVyIFJlcXVlc3RcclxuICAgICAqXHJcbiAgICAgKiBJZiB5b3Ugd2lzaCBvdmVycmlkZSB0aGUgcmVxdWVzdC9yZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMgb25seSBmb3IgYSBzaW5nbGUgcmVxdWVzdCB0aGVuIHByb3ZpZGVcclxuICAgICAqIGB0cmFuc2Zvcm1SZXF1ZXN0YCBhbmQvb3IgYHRyYW5zZm9ybVJlc3BvbnNlYCBwcm9wZXJ0aWVzIG9uIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBwYXNzZWRcclxuICAgICAqIGludG8gYCRodHRwYC5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgaWYgeW91IHByb3ZpZGUgdGhlc2UgcHJvcGVydGllcyBvbiB0aGUgY29uZmlnIG9iamVjdCB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgd2lsbCBiZVxyXG4gICAgICogb3ZlcndyaXR0ZW4uIElmIHlvdSB3aXNoIHRvIGF1Z21lbnQgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zIHRoZW4geW91IG11c3QgaW5jbHVkZSB0aGVtIGluIHlvdXJcclxuICAgICAqIGxvY2FsIHRyYW5zZm9ybWF0aW9uIGFycmF5LlxyXG4gICAgICpcclxuICAgICAqIFRoZSBmb2xsb3dpbmcgY29kZSBkZW1vbnN0cmF0ZXMgYWRkaW5nIGEgbmV3IHJlc3BvbnNlIHRyYW5zZm9ybWF0aW9uIHRvIGJlIHJ1biBhZnRlciB0aGUgZGVmYXVsdCByZXNwb25zZVxyXG4gICAgICogdHJhbnNmb3JtYXRpb25zIGhhdmUgYmVlbiBydW4uXHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGZ1bmN0aW9uIGFwcGVuZFRyYW5zZm9ybShkZWZhdWx0cywgdHJhbnNmb3JtKSB7XHJcbiAgICAgKlxyXG4gICAgICogICAvLyBXZSBjYW4ndCBndWFyYW50ZWUgdGhhdCB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbiBpcyBhbiBhcnJheVxyXG4gICAgICogICBkZWZhdWx0cyA9IGFuZ3VsYXIuaXNBcnJheShkZWZhdWx0cykgPyBkZWZhdWx0cyA6IFtkZWZhdWx0c107XHJcbiAgICAgKlxyXG4gICAgICogICAvLyBBcHBlbmQgdGhlIG5ldyB0cmFuc2Zvcm1hdGlvbiB0byB0aGUgZGVmYXVsdHNcclxuICAgICAqICAgcmV0dXJuIGRlZmF1bHRzLmNvbmNhdCh0cmFuc2Zvcm0pO1xyXG4gICAgICogfVxyXG4gICAgICpcclxuICAgICAqICRodHRwKHtcclxuICAgICAqICAgdXJsOiAnLi4uJyxcclxuICAgICAqICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAqICAgdHJhbnNmb3JtUmVzcG9uc2U6IGFwcGVuZFRyYW5zZm9ybSgkaHR0cC5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZSwgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAqICAgICByZXR1cm4gZG9UcmFuc2Zvcm0odmFsdWUpO1xyXG4gICAgICogICB9KVxyXG4gICAgICogfSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogIyMgQ2FjaGluZ1xyXG4gICAgICpcclxuICAgICAqIFRvIGVuYWJsZSBjYWNoaW5nLCBzZXQgdGhlIHJlcXVlc3QgY29uZmlndXJhdGlvbiBgY2FjaGVgIHByb3BlcnR5IHRvIGB0cnVlYCAodG8gdXNlIGRlZmF1bHRcclxuICAgICAqIGNhY2hlKSBvciB0byBhIGN1c3RvbSBjYWNoZSBvYmplY3QgKGJ1aWx0IHdpdGgge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgYCRjYWNoZUZhY3RvcnlgfSkuXHJcbiAgICAgKiBXaGVuIHRoZSBjYWNoZSBpcyBlbmFibGVkLCBgJGh0dHBgIHN0b3JlcyB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIGluIHRoZSBzcGVjaWZpZWRcclxuICAgICAqIGNhY2hlLiBUaGUgbmV4dCB0aW1lIHRoZSBzYW1lIHJlcXVlc3QgaXMgbWFkZSwgdGhlIHJlc3BvbnNlIGlzIHNlcnZlZCBmcm9tIHRoZSBjYWNoZSB3aXRob3V0XHJcbiAgICAgKiBzZW5kaW5nIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCBldmVuIGlmIHRoZSByZXNwb25zZSBpcyBzZXJ2ZWQgZnJvbSBjYWNoZSwgZGVsaXZlcnkgb2YgdGhlIGRhdGEgaXMgYXN5bmNocm9ub3VzIGluXHJcbiAgICAgKiB0aGUgc2FtZSB3YXkgdGhhdCByZWFsIHJlcXVlc3RzIGFyZS5cclxuICAgICAqXHJcbiAgICAgKiBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgR0VUIHJlcXVlc3RzIGZvciB0aGUgc2FtZSBVUkwgdGhhdCBzaG91bGQgYmUgY2FjaGVkIHVzaW5nIHRoZSBzYW1lXHJcbiAgICAgKiBjYWNoZSwgYnV0IHRoZSBjYWNoZSBpcyBub3QgcG9wdWxhdGVkIHlldCwgb25seSBvbmUgcmVxdWVzdCB0byB0aGUgc2VydmVyIHdpbGwgYmUgbWFkZSBhbmRcclxuICAgICAqIHRoZSByZW1haW5pbmcgcmVxdWVzdHMgd2lsbCBiZSBmdWxmaWxsZWQgdXNpbmcgdGhlIHJlc3BvbnNlIGZyb20gdGhlIGZpcnN0IHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogWW91IGNhbiBjaGFuZ2UgdGhlIGRlZmF1bHQgY2FjaGUgdG8gYSBuZXcgb2JqZWN0IChidWlsdCB3aXRoXHJcbiAgICAgKiB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9KSBieSB1cGRhdGluZyB0aGVcclxuICAgICAqIHtAbGluayBuZy4kaHR0cCNwcm9wZXJ0aWVzX2RlZmF1bHRzIGAkaHR0cC5kZWZhdWx0cy5jYWNoZWB9IHByb3BlcnR5LiBBbGwgcmVxdWVzdHMgd2hvIHNldFxyXG4gICAgICogdGhlaXIgYGNhY2hlYCBwcm9wZXJ0eSB0byBgdHJ1ZWAgd2lsbCBub3cgdXNlIHRoaXMgY2FjaGUgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIElmIHlvdSBzZXQgdGhlIGRlZmF1bHQgY2FjaGUgdG8gYGZhbHNlYCB0aGVuIG9ubHkgcmVxdWVzdHMgdGhhdCBzcGVjaWZ5IHRoZWlyIG93biBjdXN0b21cclxuICAgICAqIGNhY2hlIG9iamVjdCB3aWxsIGJlIGNhY2hlZC5cclxuICAgICAqXHJcbiAgICAgKiAjIyBJbnRlcmNlcHRvcnNcclxuICAgICAqXHJcbiAgICAgKiBCZWZvcmUgeW91IHN0YXJ0IGNyZWF0aW5nIGludGVyY2VwdG9ycywgYmUgc3VyZSB0byB1bmRlcnN0YW5kIHRoZVxyXG4gICAgICoge0BsaW5rIG5nLiRxICRxIGFuZCBkZWZlcnJlZC9wcm9taXNlIEFQSXN9LlxyXG4gICAgICpcclxuICAgICAqIEZvciBwdXJwb3NlcyBvZiBnbG9iYWwgZXJyb3IgaGFuZGxpbmcsIGF1dGhlbnRpY2F0aW9uLCBvciBhbnkga2luZCBvZiBzeW5jaHJvbm91cyBvclxyXG4gICAgICogYXN5bmNocm9ub3VzIHByZS1wcm9jZXNzaW5nIG9mIHJlcXVlc3Qgb3IgcG9zdHByb2Nlc3Npbmcgb2YgcmVzcG9uc2VzLCBpdCBpcyBkZXNpcmFibGUgdG8gYmVcclxuICAgICAqIGFibGUgdG8gaW50ZXJjZXB0IHJlcXVlc3RzIGJlZm9yZSB0aGV5IGFyZSBoYW5kZWQgdG8gdGhlIHNlcnZlciBhbmRcclxuICAgICAqIHJlc3BvbnNlcyBiZWZvcmUgdGhleSBhcmUgaGFuZGVkIG92ZXIgdG8gdGhlIGFwcGxpY2F0aW9uIGNvZGUgdGhhdFxyXG4gICAgICogaW5pdGlhdGVkIHRoZXNlIHJlcXVlc3RzLiBUaGUgaW50ZXJjZXB0b3JzIGxldmVyYWdlIHRoZSB7QGxpbmsgbmcuJHFcclxuICAgICAqIHByb21pc2UgQVBJc30gdG8gZnVsZmlsbCB0aGlzIG5lZWQgZm9yIGJvdGggc3luY2hyb25vdXMgYW5kIGFzeW5jaHJvbm91cyBwcmUtcHJvY2Vzc2luZy5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgaW50ZXJjZXB0b3JzIGFyZSBzZXJ2aWNlIGZhY3RvcmllcyB0aGF0IGFyZSByZWdpc3RlcmVkIHdpdGggdGhlIGAkaHR0cFByb3ZpZGVyYCBieVxyXG4gICAgICogYWRkaW5nIHRoZW0gdG8gdGhlIGAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9yc2AgYXJyYXkuIFRoZSBmYWN0b3J5IGlzIGNhbGxlZCBhbmRcclxuICAgICAqIGluamVjdGVkIHdpdGggZGVwZW5kZW5jaWVzIChpZiBzcGVjaWZpZWQpIGFuZCByZXR1cm5zIHRoZSBpbnRlcmNlcHRvci5cclxuICAgICAqXHJcbiAgICAgKiBUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIGludGVyY2VwdG9ycyAoYW5kIHR3byBraW5kcyBvZiByZWplY3Rpb24gaW50ZXJjZXB0b3JzKTpcclxuICAgICAqXHJcbiAgICAgKiAgICogYHJlcXVlc3RgOiBpbnRlcmNlcHRvcnMgZ2V0IGNhbGxlZCB3aXRoIGEgaHR0cCBgY29uZmlnYCBvYmplY3QuIFRoZSBmdW5jdGlvbiBpcyBmcmVlIHRvXHJcbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgY29uZmlnYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYGNvbmZpZ2BcclxuICAgICAqICAgICBvYmplY3QgZGlyZWN0bHksIG9yIGEgcHJvbWlzZSBjb250YWluaW5nIHRoZSBgY29uZmlnYCBvciBhIG5ldyBgY29uZmlnYCBvYmplY3QuXHJcbiAgICAgKiAgICogYHJlcXVlc3RFcnJvcmA6IGludGVyY2VwdG9yIGdldHMgY2FsbGVkIHdoZW4gYSBwcmV2aW91cyBpbnRlcmNlcHRvciB0aHJldyBhbiBlcnJvciBvclxyXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXHJcbiAgICAgKiAgICogYHJlc3BvbnNlYDogaW50ZXJjZXB0b3JzIGdldCBjYWxsZWQgd2l0aCBodHRwIGByZXNwb25zZWAgb2JqZWN0LiBUaGUgZnVuY3Rpb24gaXMgZnJlZSB0b1xyXG4gICAgICogICAgIG1vZGlmeSB0aGUgYHJlc3BvbnNlYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYHJlc3BvbnNlYFxyXG4gICAgICogICAgIG9iamVjdCBkaXJlY3RseSwgb3IgYXMgYSBwcm9taXNlIGNvbnRhaW5pbmcgdGhlIGByZXNwb25zZWAgb3IgYSBuZXcgYHJlc3BvbnNlYCBvYmplY3QuXHJcbiAgICAgKiAgICogYHJlc3BvbnNlRXJyb3JgOiBpbnRlcmNlcHRvciBnZXRzIGNhbGxlZCB3aGVuIGEgcHJldmlvdXMgaW50ZXJjZXB0b3IgdGhyZXcgYW4gZXJyb3Igb3JcclxuICAgICAqICAgICByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogICAvLyByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgYXMgYSBzZXJ2aWNlXHJcbiAgICAgKiAgICRwcm92aWRlLmZhY3RvcnkoJ215SHR0cEludGVyY2VwdG9yJywgZnVuY3Rpb24oJHEsIGRlcGVuZGVuY3kxLCBkZXBlbmRlbmN5Mikge1xyXG4gICAgICogICAgIHJldHVybiB7XHJcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcclxuICAgICAqICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XHJcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBzdWNjZXNzXHJcbiAgICAgKiAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgKiAgICAgICB9LFxyXG4gICAgICpcclxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxyXG4gICAgICogICAgICAncmVxdWVzdEVycm9yJzogZnVuY3Rpb24ocmVqZWN0aW9uKSB7XHJcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBlcnJvclxyXG4gICAgICogICAgICAgICBpZiAoY2FuUmVjb3ZlcihyZWplY3Rpb24pKSB7XHJcbiAgICAgKiAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlT3JOZXdQcm9taXNlXHJcbiAgICAgKiAgICAgICAgIH1cclxuICAgICAqICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xyXG4gICAgICogICAgICAgfSxcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxyXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIHN1Y2Nlc3NcclxuICAgICAqICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICogICAgICAgfSxcclxuICAgICAqXHJcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcclxuICAgICAqICAgICAgJ3Jlc3BvbnNlRXJyb3InOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcclxuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIGVycm9yXHJcbiAgICAgKiAgICAgICAgIGlmIChjYW5SZWNvdmVyKHJlamVjdGlvbikpIHtcclxuICAgICAqICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VPck5ld1Byb21pc2VcclxuICAgICAqICAgICAgICAgfVxyXG4gICAgICogICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XHJcbiAgICAgKiAgICAgICB9XHJcbiAgICAgKiAgICAgfTtcclxuICAgICAqICAgfSk7XHJcbiAgICAgKlxyXG4gICAgICogICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdteUh0dHBJbnRlcmNlcHRvcicpO1xyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAgIC8vIGFsdGVybmF0aXZlbHksIHJlZ2lzdGVyIHRoZSBpbnRlcmNlcHRvciB2aWEgYW4gYW5vbnltb3VzIGZhY3RvcnlcclxuICAgICAqICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaChmdW5jdGlvbigkcSwgZGVwZW5kZW5jeTEsIGRlcGVuZGVuY3kyKSB7XHJcbiAgICAgKiAgICAgcmV0dXJuIHtcclxuICAgICAqICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbihjb25maWcpIHtcclxuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcclxuICAgICAqICAgICAgIH0sXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcclxuICAgICAqICAgICAgIH1cclxuICAgICAqICAgICB9O1xyXG4gICAgICogICB9KTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiBkZXNpZ25pbmcgd2ViIGFwcGxpY2F0aW9ucywgY29uc2lkZXIgc2VjdXJpdHkgdGhyZWF0cyBmcm9tOlxyXG4gICAgICpcclxuICAgICAqIC0gW0pTT04gdnVsbmVyYWJpbGl0eV0oaHR0cDovL2hhYWNrZWQuY29tL2FyY2hpdmUvMjAwOC8xMS8yMC9hbmF0b215LW9mLWEtc3VidGxlLWpzb24tdnVsbmVyYWJpbGl0eS5hc3B4KVxyXG4gICAgICogLSBbWFNSRl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Dcm9zcy1zaXRlX3JlcXVlc3RfZm9yZ2VyeSlcclxuICAgICAqXHJcbiAgICAgKiBCb3RoIHNlcnZlciBhbmQgdGhlIGNsaWVudCBtdXN0IGNvb3BlcmF0ZSBpbiBvcmRlciB0byBlbGltaW5hdGUgdGhlc2UgdGhyZWF0cy4gQW5ndWxhciBjb21lc1xyXG4gICAgICogcHJlLWNvbmZpZ3VyZWQgd2l0aCBzdHJhdGVnaWVzIHRoYXQgYWRkcmVzcyB0aGVzZSBpc3N1ZXMsIGJ1dCBmb3IgdGhpcyB0byB3b3JrIGJhY2tlbmQgc2VydmVyXHJcbiAgICAgKiBjb29wZXJhdGlvbiBpcyByZXF1aXJlZC5cclxuICAgICAqXHJcbiAgICAgKiAjIyMgSlNPTiBWdWxuZXJhYmlsaXR5IFByb3RlY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBBIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcclxuICAgICAqIGFsbG93cyB0aGlyZCBwYXJ0eSB3ZWJzaXRlIHRvIHR1cm4geW91ciBKU09OIHJlc291cmNlIFVSTCBpbnRvXHJcbiAgICAgKiBbSlNPTlBdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSlNPTlApIHJlcXVlc3QgdW5kZXIgc29tZSBjb25kaXRpb25zLiBUb1xyXG4gICAgICogY291bnRlciB0aGlzIHlvdXIgc2VydmVyIGNhbiBwcmVmaXggYWxsIEpTT04gcmVxdWVzdHMgd2l0aCBmb2xsb3dpbmcgc3RyaW5nIGBcIildfScsXFxuXCJgLlxyXG4gICAgICogQW5ndWxhciB3aWxsIGF1dG9tYXRpY2FsbHkgc3RyaXAgdGhlIHByZWZpeCBiZWZvcmUgcHJvY2Vzc2luZyBpdCBhcyBKU09OLlxyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlIGlmIHlvdXIgc2VydmVyIG5lZWRzIHRvIHJldHVybjpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBbJ29uZScsJ3R3byddXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiB3aGljaCBpcyB2dWxuZXJhYmxlIHRvIGF0dGFjaywgeW91ciBzZXJ2ZXIgY2FuIHJldHVybjpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiApXX0nLFxyXG4gICAgICogWydvbmUnLCd0d28nXVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQW5ndWxhciB3aWxsIHN0cmlwIHRoZSBwcmVmaXgsIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBKU09OLlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAjIyMgQ3Jvc3MgU2l0ZSBSZXF1ZXN0IEZvcmdlcnkgKFhTUkYpIFByb3RlY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBbWFNSRl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Dcm9zcy1zaXRlX3JlcXVlc3RfZm9yZ2VyeSkgaXMgYSB0ZWNobmlxdWUgYnkgd2hpY2hcclxuICAgICAqIGFuIHVuYXV0aG9yaXplZCBzaXRlIGNhbiBnYWluIHlvdXIgdXNlcidzIHByaXZhdGUgZGF0YS4gQW5ndWxhciBwcm92aWRlcyBhIG1lY2hhbmlzbVxyXG4gICAgICogdG8gY291bnRlciBYU1JGLiBXaGVuIHBlcmZvcm1pbmcgWEhSIHJlcXVlc3RzLCB0aGUgJGh0dHAgc2VydmljZSByZWFkcyBhIHRva2VuIGZyb20gYSBjb29raWVcclxuICAgICAqIChieSBkZWZhdWx0LCBgWFNSRi1UT0tFTmApIGFuZCBzZXRzIGl0IGFzIGFuIEhUVFAgaGVhZGVyIChgWC1YU1JGLVRPS0VOYCkuIFNpbmNlIG9ubHlcclxuICAgICAqIEphdmFTY3JpcHQgdGhhdCBydW5zIG9uIHlvdXIgZG9tYWluIGNvdWxkIHJlYWQgdGhlIGNvb2tpZSwgeW91ciBzZXJ2ZXIgY2FuIGJlIGFzc3VyZWQgdGhhdFxyXG4gICAgICogdGhlIFhIUiBjYW1lIGZyb20gSmF2YVNjcmlwdCBydW5uaW5nIG9uIHlvdXIgZG9tYWluLiBUaGUgaGVhZGVyIHdpbGwgbm90IGJlIHNldCBmb3JcclxuICAgICAqIGNyb3NzLWRvbWFpbiByZXF1ZXN0cy5cclxuICAgICAqXHJcbiAgICAgKiBUbyB0YWtlIGFkdmFudGFnZSBvZiB0aGlzLCB5b3VyIHNlcnZlciBuZWVkcyB0byBzZXQgYSB0b2tlbiBpbiBhIEphdmFTY3JpcHQgcmVhZGFibGUgc2Vzc2lvblxyXG4gICAgICogY29va2llIGNhbGxlZCBgWFNSRi1UT0tFTmAgb24gdGhlIGZpcnN0IEhUVFAgR0VUIHJlcXVlc3QuIE9uIHN1YnNlcXVlbnQgWEhSIHJlcXVlc3RzIHRoZVxyXG4gICAgICogc2VydmVyIGNhbiB2ZXJpZnkgdGhhdCB0aGUgY29va2llIG1hdGNoZXMgYFgtWFNSRi1UT0tFTmAgSFRUUCBoZWFkZXIsIGFuZCB0aGVyZWZvcmUgYmUgc3VyZVxyXG4gICAgICogdGhhdCBvbmx5IEphdmFTY3JpcHQgcnVubmluZyBvbiB5b3VyIGRvbWFpbiBjb3VsZCBoYXZlIHNlbnQgdGhlIHJlcXVlc3QuIFRoZSB0b2tlbiBtdXN0IGJlXHJcbiAgICAgKiB1bmlxdWUgZm9yIGVhY2ggdXNlciBhbmQgbXVzdCBiZSB2ZXJpZmlhYmxlIGJ5IHRoZSBzZXJ2ZXIgKHRvIHByZXZlbnQgdGhlIEphdmFTY3JpcHQgZnJvbVxyXG4gICAgICogbWFraW5nIHVwIGl0cyBvd24gdG9rZW5zKS4gV2UgcmVjb21tZW5kIHRoYXQgdGhlIHRva2VuIGlzIGEgZGlnZXN0IG9mIHlvdXIgc2l0ZSdzXHJcbiAgICAgKiBhdXRoZW50aWNhdGlvbiBjb29raWUgd2l0aCBhIFtzYWx0XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TYWx0XyhjcnlwdG9ncmFwaHkmIzQxOylcclxuICAgICAqIGZvciBhZGRlZCBzZWN1cml0eS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgaGVhZGVycyBjYW4gYmUgc3BlY2lmaWVkIHVzaW5nIHRoZSB4c3JmSGVhZGVyTmFtZSBhbmQgeHNyZkNvb2tpZU5hbWVcclxuICAgICAqIHByb3BlcnRpZXMgb2YgZWl0aGVyICRodHRwUHJvdmlkZXIuZGVmYXVsdHMgYXQgY29uZmlnLXRpbWUsICRodHRwLmRlZmF1bHRzIGF0IHJ1bi10aW1lLFxyXG4gICAgICogb3IgdGhlIHBlci1yZXF1ZXN0IGNvbmZpZyBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgT2JqZWN0IGRlc2NyaWJpbmcgdGhlIHJlcXVlc3QgdG8gYmUgbWFkZSBhbmQgaG93IGl0IHNob3VsZCBiZVxyXG4gICAgICogICAgcHJvY2Vzc2VkLiBUaGUgb2JqZWN0IGhhcyBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICAgICAqXHJcbiAgICAgKiAgICAtICoqbWV0aG9kKiog4oCTIGB7c3RyaW5nfWAg4oCTIEhUVFAgbWV0aG9kIChlLmcuICdHRVQnLCAnUE9TVCcsIGV0YylcclxuICAgICAqICAgIC0gKip1cmwqKiDigJMgYHtzdHJpbmd9YCDigJMgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZC5cclxuICAgICAqICAgIC0gKipwYXJhbXMqKiDigJMgYHtPYmplY3QuPHN0cmluZ3xPYmplY3Q+fWAg4oCTIE1hcCBvZiBzdHJpbmdzIG9yIG9iamVjdHMgd2hpY2ggd2lsbCBiZSB0dXJuZWRcclxuICAgICAqICAgICAgdG8gYD9rZXkxPXZhbHVlMSZrZXkyPXZhbHVlMmAgYWZ0ZXIgdGhlIHVybC4gSWYgdGhlIHZhbHVlIGlzIG5vdCBhIHN0cmluZywgaXQgd2lsbCBiZVxyXG4gICAgICogICAgICBKU09OaWZpZWQuXHJcbiAgICAgKiAgICAtICoqZGF0YSoqIOKAkyBge3N0cmluZ3xPYmplY3R9YCDigJMgRGF0YSB0byBiZSBzZW50IGFzIHRoZSByZXF1ZXN0IG1lc3NhZ2UgZGF0YS5cclxuICAgICAqICAgIC0gKipoZWFkZXJzKiog4oCTIGB7T2JqZWN0fWAg4oCTIE1hcCBvZiBzdHJpbmdzIG9yIGZ1bmN0aW9ucyB3aGljaCByZXR1cm4gc3RyaW5ncyByZXByZXNlbnRpbmdcclxuICAgICAqICAgICAgSFRUUCBoZWFkZXJzIHRvIHNlbmQgdG8gdGhlIHNlcnZlci4gSWYgdGhlIHJldHVybiB2YWx1ZSBvZiBhIGZ1bmN0aW9uIGlzIG51bGwsIHRoZVxyXG4gICAgICogICAgICBoZWFkZXIgd2lsbCBub3QgYmUgc2VudC5cclxuICAgICAqICAgIC0gKip4c3JmSGVhZGVyTmFtZSoqIOKAkyBge3N0cmluZ31gIOKAkyBOYW1lIG9mIEhUVFAgaGVhZGVyIHRvIHBvcHVsYXRlIHdpdGggdGhlIFhTUkYgdG9rZW4uXHJcbiAgICAgKiAgICAtICoqeHNyZkNvb2tpZU5hbWUqKiDigJMgYHtzdHJpbmd9YCDigJMgTmFtZSBvZiBjb29raWUgY29udGFpbmluZyB0aGUgWFNSRiB0b2tlbi5cclxuICAgICAqICAgIC0gKip0cmFuc2Zvcm1SZXF1ZXN0Kiog4oCTXHJcbiAgICAgKiAgICAgIGB7ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcil8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpPn1gIOKAk1xyXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcclxuICAgICAqICAgICAgcmVxdWVzdCBib2R5IGFuZCBoZWFkZXJzIGFuZCByZXR1cm5zIGl0cyB0cmFuc2Zvcm1lZCAodHlwaWNhbGx5IHNlcmlhbGl6ZWQpIHZlcnNpb24uXHJcbiAgICAgKiAgICAgIFNlZSB7QGxpbmsgI292ZXJyaWRpbmctdGhlLWRlZmF1bHQtdHJhbnNmb3JtYXRpb25zLXBlci1yZXF1ZXN0IE92ZXJyaWRpbmcgdGhlIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zfVxyXG4gICAgICogICAgLSAqKnRyYW5zZm9ybVJlc3BvbnNlKiog4oCTXHJcbiAgICAgKiAgICAgIGB7ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcil8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpPn1gIOKAk1xyXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcclxuICAgICAqICAgICAgcmVzcG9uc2UgYm9keSBhbmQgaGVhZGVycyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBkZXNlcmlhbGl6ZWQpIHZlcnNpb24uXHJcbiAgICAgKiAgICAgIFNlZSB7QGxpbmsgI292ZXJyaWRpbmctdGhlLWRlZmF1bHQtdHJhbnNmb3JtYXRpb25zLXBlci1yZXF1ZXN0IE92ZXJyaWRpbmcgdGhlIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zfVxyXG4gICAgICogICAgLSAqKmNhY2hlKiog4oCTIGB7Ym9vbGVhbnxDYWNoZX1gIOKAkyBJZiB0cnVlLCBhIGRlZmF1bHQgJGh0dHAgY2FjaGUgd2lsbCBiZSB1c2VkIHRvIGNhY2hlIHRoZVxyXG4gICAgICogICAgICBHRVQgcmVxdWVzdCwgb3RoZXJ3aXNlIGlmIGEgY2FjaGUgaW5zdGFuY2UgYnVpbHQgd2l0aFxyXG4gICAgICogICAgICB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSAkY2FjaGVGYWN0b3J5fSwgdGhpcyBjYWNoZSB3aWxsIGJlIHVzZWQgZm9yXHJcbiAgICAgKiAgICAgIGNhY2hpbmcuXHJcbiAgICAgKiAgICAtICoqdGltZW91dCoqIOKAkyBge251bWJlcnxQcm9taXNlfWAg4oCTIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzLCBvciB7QGxpbmsgbmcuJHEgcHJvbWlzZX1cclxuICAgICAqICAgICAgdGhhdCBzaG91bGQgYWJvcnQgdGhlIHJlcXVlc3Qgd2hlbiByZXNvbHZlZC5cclxuICAgICAqICAgIC0gKip3aXRoQ3JlZGVudGlhbHMqKiAtIGB7Ym9vbGVhbn1gIC0gd2hldGhlciB0byBzZXQgdGhlIGB3aXRoQ3JlZGVudGlhbHNgIGZsYWcgb24gdGhlXHJcbiAgICAgKiAgICAgIFhIUiBvYmplY3QuIFNlZSBbcmVxdWVzdHMgd2l0aCBjcmVkZW50aWFsc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSFRUUC9BY2Nlc3NfY29udHJvbF9DT1JTI1JlcXVlc3RzX3dpdGhfY3JlZGVudGlhbHMpXHJcbiAgICAgKiAgICAgIGZvciBtb3JlIGluZm9ybWF0aW9uLlxyXG4gICAgICogICAgLSAqKnJlc3BvbnNlVHlwZSoqIC0gYHtzdHJpbmd9YCAtIHNlZVxyXG4gICAgICogICAgICBbcmVxdWVzdFR5cGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL1hNTEh0dHBSZXF1ZXN0I3Jlc3BvbnNlVHlwZSkuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBSZXR1cm5zIGEge0BsaW5rIG5nLiRxIHByb21pc2V9IG9iamVjdCB3aXRoIHRoZVxyXG4gICAgICogICBzdGFuZGFyZCBgdGhlbmAgbWV0aG9kIGFuZCB0d28gaHR0cCBzcGVjaWZpYyBtZXRob2RzOiBgc3VjY2Vzc2AgYW5kIGBlcnJvcmAuIFRoZSBgdGhlbmBcclxuICAgICAqICAgbWV0aG9kIHRha2VzIHR3byBhcmd1bWVudHMgYSBzdWNjZXNzIGFuZCBhbiBlcnJvciBjYWxsYmFjayB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aXRoIGFcclxuICAgICAqICAgcmVzcG9uc2Ugb2JqZWN0LiBUaGUgYHN1Y2Nlc3NgIGFuZCBgZXJyb3JgIG1ldGhvZHMgdGFrZSBhIHNpbmdsZSBhcmd1bWVudCAtIGEgZnVuY3Rpb24gdGhhdFxyXG4gICAgICogICB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSByZXF1ZXN0IHN1Y2NlZWRzIG9yIGZhaWxzIHJlc3BlY3RpdmVseS4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgaW50b1xyXG4gICAgICogICB0aGVzZSBmdW5jdGlvbnMgYXJlIGRlc3RydWN0dXJlZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgcmVzcG9uc2Ugb2JqZWN0IHBhc3NlZCBpbnRvIHRoZVxyXG4gICAgICogICBgdGhlbmAgbWV0aG9kLiBUaGUgcmVzcG9uc2Ugb2JqZWN0IGhhcyB0aGVzZSBwcm9wZXJ0aWVzOlxyXG4gICAgICpcclxuICAgICAqICAgLSAqKmRhdGEqKiDigJMgYHtzdHJpbmd8T2JqZWN0fWAg4oCTIFRoZSByZXNwb25zZSBib2R5IHRyYW5zZm9ybWVkIHdpdGggdGhlIHRyYW5zZm9ybVxyXG4gICAgICogICAgIGZ1bmN0aW9ucy5cclxuICAgICAqICAgLSAqKnN0YXR1cyoqIOKAkyBge251bWJlcn1gIOKAkyBIVFRQIHN0YXR1cyBjb2RlIG9mIHRoZSByZXNwb25zZS5cclxuICAgICAqICAgLSAqKmhlYWRlcnMqKiDigJMgYHtmdW5jdGlvbihbaGVhZGVyTmFtZV0pfWAg4oCTIEhlYWRlciBnZXR0ZXIgZnVuY3Rpb24uXHJcbiAgICAgKiAgIC0gKipjb25maWcqKiDigJMgYHtPYmplY3R9YCDigJMgVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHRoYXQgd2FzIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHJlcXVlc3QuXHJcbiAgICAgKiAgIC0gKipzdGF0dXNUZXh0Kiog4oCTIGB7c3RyaW5nfWAg4oCTIEhUVFAgc3RhdHVzIHRleHQgb2YgdGhlIHJlc3BvbnNlLlxyXG4gICAgICpcclxuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE9iamVjdD59IHBlbmRpbmdSZXF1ZXN0cyBBcnJheSBvZiBjb25maWcgb2JqZWN0cyBmb3IgY3VycmVudGx5IHBlbmRpbmdcclxuICAgICAqICAgcmVxdWVzdHMuIFRoaXMgaXMgcHJpbWFyaWx5IG1lYW50IHRvIGJlIHVzZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuPGV4YW1wbGUgbW9kdWxlPVwiaHR0cEV4YW1wbGVcIj5cclxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJGZXRjaENvbnRyb2xsZXJcIj5cclxuICAgIDxzZWxlY3QgbmctbW9kZWw9XCJtZXRob2RcIj5cclxuICAgICAgPG9wdGlvbj5HRVQ8L29wdGlvbj5cclxuICAgICAgPG9wdGlvbj5KU09OUDwvb3B0aW9uPlxyXG4gICAgPC9zZWxlY3Q+XHJcbiAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVybFwiIHNpemU9XCI4MFwiLz5cclxuICAgIDxidXR0b24gaWQ9XCJmZXRjaGJ0blwiIG5nLWNsaWNrPVwiZmV0Y2goKVwiPmZldGNoPC9idXR0b24+PGJyPlxyXG4gICAgPGJ1dHRvbiBpZD1cInNhbXBsZWdldGJ0blwiIG5nLWNsaWNrPVwidXBkYXRlTW9kZWwoJ0dFVCcsICdodHRwLWhlbGxvLmh0bWwnKVwiPlNhbXBsZSBHRVQ8L2J1dHRvbj5cclxuICAgIDxidXR0b24gaWQ9XCJzYW1wbGVqc29ucGJ0blwiXHJcbiAgICAgIG5nLWNsaWNrPVwidXBkYXRlTW9kZWwoJ0pTT05QJyxcclxuICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly9hbmd1bGFyanMub3JnL2dyZWV0LnBocD9jYWxsYmFjaz1KU09OX0NBTExCQUNLJm5hbWU9U3VwZXIlMjBIZXJvJylcIj5cclxuICAgICAgU2FtcGxlIEpTT05QXHJcbiAgICA8L2J1dHRvbj5cclxuICAgIDxidXR0b24gaWQ9XCJpbnZhbGlkanNvbnBidG5cIlxyXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsICdodHRwczovL2FuZ3VsYXJqcy5vcmcvZG9lc250ZXhpc3QmY2FsbGJhY2s9SlNPTl9DQUxMQkFDSycpXCI+XHJcbiAgICAgICAgSW52YWxpZCBKU09OUFxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgIDxwcmU+aHR0cCBzdGF0dXMgY29kZToge3tzdGF0dXN9fTwvcHJlPlxyXG4gICAgPHByZT5odHRwIHJlc3BvbnNlIGRhdGE6IHt7ZGF0YX19PC9wcmU+XHJcbiAgPC9kaXY+XHJcbjwvZmlsZT5cclxuPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gIGFuZ3VsYXIubW9kdWxlKCdodHRwRXhhbXBsZScsIFtdKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0ZldGNoQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJyR0ZW1wbGF0ZUNhY2hlJyxcclxuICAgICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICAkc2NvcGUubWV0aG9kID0gJ0dFVCc7XHJcbiAgICAgICAgJHNjb3BlLnVybCA9ICdodHRwLWhlbGxvLmh0bWwnO1xyXG5cclxuICAgICAgICAkc2NvcGUuZmV0Y2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRzY29wZS5jb2RlID0gbnVsbDtcclxuICAgICAgICAgICRzY29wZS5yZXNwb25zZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgJGh0dHAoe21ldGhvZDogJHNjb3BlLm1ldGhvZCwgdXJsOiAkc2NvcGUudXJsLCBjYWNoZTogJHRlbXBsYXRlQ2FjaGV9KS5cclxuICAgICAgICAgICAgc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gc3RhdHVzO1xyXG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgfSkuXHJcbiAgICAgICAgICAgIGVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gZGF0YSB8fCBcIlJlcXVlc3QgZmFpbGVkXCI7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHN0YXR1cztcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsKSB7XHJcbiAgICAgICAgICAkc2NvcGUubWV0aG9kID0gbWV0aG9kO1xyXG4gICAgICAgICAgJHNjb3BlLnVybCA9IHVybDtcclxuICAgICAgICB9O1xyXG4gICAgICB9XSk7XHJcbjwvZmlsZT5cclxuPGZpbGUgbmFtZT1cImh0dHAtaGVsbG8uaHRtbFwiPlxyXG4gIEhlbGxvLCAkaHR0cCFcclxuPC9maWxlPlxyXG48ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgdmFyIHN0YXR1cyA9IGVsZW1lbnQoYnkuYmluZGluZygnc3RhdHVzJykpO1xyXG4gIHZhciBkYXRhID0gZWxlbWVudChieS5iaW5kaW5nKCdkYXRhJykpO1xyXG4gIHZhciBmZXRjaEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2ZldGNoYnRuJykpO1xyXG4gIHZhciBzYW1wbGVHZXRCdG4gPSBlbGVtZW50KGJ5LmlkKCdzYW1wbGVnZXRidG4nKSk7XHJcbiAgdmFyIHNhbXBsZUpzb25wQnRuID0gZWxlbWVudChieS5pZCgnc2FtcGxlanNvbnBidG4nKSk7XHJcbiAgdmFyIGludmFsaWRKc29ucEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2ludmFsaWRqc29ucGJ0bicpKTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBtYWtlIGFuIHhociBHRVQgcmVxdWVzdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgc2FtcGxlR2V0QnRuLmNsaWNrKCk7XHJcbiAgICBmZXRjaEJ0bi5jbGljaygpO1xyXG4gICAgZXhwZWN0KHN0YXR1cy5nZXRUZXh0KCkpLnRvTWF0Y2goJzIwMCcpO1xyXG4gICAgZXhwZWN0KGRhdGEuZ2V0VGV4dCgpKS50b01hdGNoKC9IZWxsbywgXFwkaHR0cCEvKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBtYWtlIGEgSlNPTlAgcmVxdWVzdCB0byBhbmd1bGFyanMub3JnJywgZnVuY3Rpb24oKSB7XHJcbiAgICBzYW1wbGVKc29ucEJ0bi5jbGljaygpO1xyXG4gICAgZmV0Y2hCdG4uY2xpY2soKTtcclxuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcyMDAnKTtcclxuICAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgvU3VwZXIgSGVybyEvKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBtYWtlIEpTT05QIHJlcXVlc3QgdG8gaW52YWxpZCBVUkwgYW5kIGludm9rZSB0aGUgZXJyb3IgaGFuZGxlcicsXHJcbiAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgaW52YWxpZEpzb25wQnRuLmNsaWNrKCk7XHJcbiAgICBmZXRjaEJ0bi5jbGljaygpO1xyXG4gICAgZXhwZWN0KHN0YXR1cy5nZXRUZXh0KCkpLnRvTWF0Y2goJzAnKTtcclxuICAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgnUmVxdWVzdCBmYWlsZWQnKTtcclxuICB9KTtcclxuPC9maWxlPlxyXG48L2V4YW1wbGU+XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICRodHRwKHJlcXVlc3RDb25maWcpIHtcclxuICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICBtZXRob2Q6ICdnZXQnLFxyXG4gICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3QsXHJcbiAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2U6IGRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlXHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBoZWFkZXJzID0gbWVyZ2VIZWFkZXJzKHJlcXVlc3RDb25maWcpO1xyXG5cclxuICAgICAgZXh0ZW5kKGNvbmZpZywgcmVxdWVzdENvbmZpZyk7XHJcbiAgICAgIGNvbmZpZy5oZWFkZXJzID0gaGVhZGVycztcclxuICAgICAgY29uZmlnLm1ldGhvZCA9IHVwcGVyY2FzZShjb25maWcubWV0aG9kKTtcclxuXHJcbiAgICAgIHZhciBzZXJ2ZXJSZXF1ZXN0ID0gZnVuY3Rpb24oY29uZmlnKSB7XHJcbiAgICAgICAgaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xyXG4gICAgICAgIHZhciByZXFEYXRhID0gdHJhbnNmb3JtRGF0YShjb25maWcuZGF0YSwgaGVhZGVyc0dldHRlcihoZWFkZXJzKSwgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3QpO1xyXG5cclxuICAgICAgICAvLyBzdHJpcCBjb250ZW50LXR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocmVxRGF0YSkpIHtcclxuICAgICAgICAgIGZvckVhY2goaGVhZGVycywgZnVuY3Rpb24odmFsdWUsIGhlYWRlcikge1xyXG4gICAgICAgICAgICBpZiAobG93ZXJjYXNlKGhlYWRlcikgPT09ICdjb250ZW50LXR5cGUnKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgaGVhZGVyc1toZWFkZXJdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSAmJiAhaXNVbmRlZmluZWQoZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzKSkge1xyXG4gICAgICAgICAgY29uZmlnLndpdGhDcmVkZW50aWFscyA9IGRlZmF1bHRzLndpdGhDcmVkZW50aWFscztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNlbmQgcmVxdWVzdFxyXG4gICAgICAgIHJldHVybiBzZW5kUmVxKGNvbmZpZywgcmVxRGF0YSwgaGVhZGVycykudGhlbih0cmFuc2Zvcm1SZXNwb25zZSwgdHJhbnNmb3JtUmVzcG9uc2UpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGNoYWluID0gW3NlcnZlclJlcXVlc3QsIHVuZGVmaW5lZF07XHJcbiAgICAgIHZhciBwcm9taXNlID0gJHEud2hlbihjb25maWcpO1xyXG5cclxuICAgICAgLy8gYXBwbHkgaW50ZXJjZXB0b3JzXHJcbiAgICAgIGZvckVhY2gocmV2ZXJzZWRJbnRlcmNlcHRvcnMsIGZ1bmN0aW9uKGludGVyY2VwdG9yKSB7XHJcbiAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlcXVlc3QgfHwgaW50ZXJjZXB0b3IucmVxdWVzdEVycm9yKSB7XHJcbiAgICAgICAgICBjaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLnJlcXVlc3QsIGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbnRlcmNlcHRvci5yZXNwb25zZSB8fCBpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKSB7XHJcbiAgICAgICAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLnJlc3BvbnNlLCBpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgd2hpbGUoY2hhaW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgdmFyIHRoZW5GbiA9IGNoYWluLnNoaWZ0KCk7XHJcbiAgICAgICAgdmFyIHJlamVjdEZuID0gY2hhaW4uc2hpZnQoKTtcclxuXHJcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbih0aGVuRm4sIHJlamVjdEZuKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcHJvbWlzZS5zdWNjZXNzID0gZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgIGZuKHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UuaGVhZGVycywgY29uZmlnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHByb21pc2UuZXJyb3IgPSBmdW5jdGlvbihmbikge1xyXG4gICAgICAgIHByb21pc2UudGhlbihudWxsLCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgZm4ocmVzcG9uc2UuZGF0YSwgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5oZWFkZXJzLCBjb25maWcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIHByb21pc2U7XHJcblxyXG4gICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgICAgIC8vIG1ha2UgYSBjb3B5IHNpbmNlIHRoZSByZXNwb25zZSBtdXN0IGJlIGNhY2hlYWJsZVxyXG4gICAgICAgIHZhciByZXNwID0gZXh0ZW5kKHt9LCByZXNwb25zZSwge1xyXG4gICAgICAgICAgZGF0YTogdHJhbnNmb3JtRGF0YShyZXNwb25zZS5kYXRhLCByZXNwb25zZS5oZWFkZXJzLCBjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIChpc1N1Y2Nlc3MocmVzcG9uc2Uuc3RhdHVzKSlcclxuICAgICAgICAgID8gcmVzcFxyXG4gICAgICAgICAgOiAkcS5yZWplY3QocmVzcCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIG1lcmdlSGVhZGVycyhjb25maWcpIHtcclxuICAgICAgICB2YXIgZGVmSGVhZGVycyA9IGRlZmF1bHRzLmhlYWRlcnMsXHJcbiAgICAgICAgICAgIHJlcUhlYWRlcnMgPSBleHRlbmQoe30sIGNvbmZpZy5oZWFkZXJzKSxcclxuICAgICAgICAgICAgZGVmSGVhZGVyTmFtZSwgbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSwgcmVxSGVhZGVyTmFtZTtcclxuXHJcbiAgICAgICAgZGVmSGVhZGVycyA9IGV4dGVuZCh7fSwgZGVmSGVhZGVycy5jb21tb24sIGRlZkhlYWRlcnNbbG93ZXJjYXNlKGNvbmZpZy5tZXRob2QpXSk7XHJcblxyXG4gICAgICAgIC8vIHVzaW5nIGZvci1pbiBpbnN0ZWFkIG9mIGZvckVhY2ggdG8gYXZvaWQgdW5lY2Vzc2FyeSBpdGVyYXRpb24gYWZ0ZXIgaGVhZGVyIGhhcyBiZWVuIGZvdW5kXHJcbiAgICAgICAgZGVmYXVsdEhlYWRlcnNJdGVyYXRpb246XHJcbiAgICAgICAgZm9yIChkZWZIZWFkZXJOYW1lIGluIGRlZkhlYWRlcnMpIHtcclxuICAgICAgICAgIGxvd2VyY2FzZURlZkhlYWRlck5hbWUgPSBsb3dlcmNhc2UoZGVmSGVhZGVyTmFtZSk7XHJcblxyXG4gICAgICAgICAgZm9yIChyZXFIZWFkZXJOYW1lIGluIHJlcUhlYWRlcnMpIHtcclxuICAgICAgICAgICAgaWYgKGxvd2VyY2FzZShyZXFIZWFkZXJOYW1lKSA9PT0gbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSkge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlIGRlZmF1bHRIZWFkZXJzSXRlcmF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmVxSGVhZGVyc1tkZWZIZWFkZXJOYW1lXSA9IGRlZkhlYWRlcnNbZGVmSGVhZGVyTmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBleGVjdXRlIGlmIGhlYWRlciB2YWx1ZSBpcyBhIGZ1bmN0aW9uIGZvciBtZXJnZWQgaGVhZGVyc1xyXG4gICAgICAgIGV4ZWNIZWFkZXJzKHJlcUhlYWRlcnMpO1xyXG4gICAgICAgIHJldHVybiByZXFIZWFkZXJzO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBleGVjSGVhZGVycyhoZWFkZXJzKSB7XHJcbiAgICAgICAgICB2YXIgaGVhZGVyQ29udGVudDtcclxuXHJcbiAgICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKGhlYWRlckZuLCBoZWFkZXIpIHtcclxuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGVhZGVyRm4pKSB7XHJcbiAgICAgICAgICAgICAgaGVhZGVyQ29udGVudCA9IGhlYWRlckZuKCk7XHJcbiAgICAgICAgICAgICAgaWYgKGhlYWRlckNvbnRlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyc1toZWFkZXJdID0gaGVhZGVyQ29udGVudDtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbaGVhZGVyXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICRodHRwLnBlbmRpbmdSZXF1ZXN0cyA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJGh0dHAjZ2V0XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgR0VUYCByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRodHRwI2RlbGV0ZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYERFTEVURWAgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaHR0cCNoZWFkXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgSEVBRGAgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaHR0cCNqc29ucFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYEpTT05QYCByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0LlxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY2FsbGJhY2sgc2hvdWxkIGJlIHRoZSBzdHJpbmcgYEpTT05fQ0FMTEJBQ0tgLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBjcmVhdGVTaG9ydE1ldGhvZHMoJ2dldCcsICdkZWxldGUnLCAnaGVhZCcsICdqc29ucCcpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJGh0dHAjcG9zdFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBPU1RgIHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcclxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBSZXF1ZXN0IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJGh0dHAjcHV0XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgUFVUYCByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XHJcbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XHJcbiAgICAgKi9cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAqIEBuYW1lICRodHRwI3BhdGNoXHJcbiAgICAgICpcclxuICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgUEFUQ0hgIHJlcXVlc3QuXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBSZXF1ZXN0IGNvbnRlbnRcclxuICAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxyXG4gICAgICAqL1xyXG4gICAgY3JlYXRlU2hvcnRNZXRob2RzV2l0aERhdGEoJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJyk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAgICAgICAqIEBuYW1lICRodHRwI2RlZmF1bHRzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSdW50aW1lIGVxdWl2YWxlbnQgb2YgdGhlIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzYCBwcm9wZXJ0eS4gQWxsb3dzIGNvbmZpZ3VyYXRpb24gb2ZcclxuICAgICAgICAgKiBkZWZhdWx0IGhlYWRlcnMsIHdpdGhDcmVkZW50aWFscyBhcyB3ZWxsIGFzIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFNlZSBcIlNldHRpbmcgSFRUUCBIZWFkZXJzXCIgYW5kIFwiVHJhbnNmb3JtaW5nIFJlcXVlc3RzIGFuZCBSZXNwb25zZXNcIiBzZWN0aW9ucyBhYm92ZS5cclxuICAgICAgICAgKi9cclxuICAgICRodHRwLmRlZmF1bHRzID0gZGVmYXVsdHM7XHJcblxyXG5cclxuICAgIHJldHVybiAkaHR0cDtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU2hvcnRNZXRob2RzKG5hbWVzKSB7XHJcbiAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgJGh0dHBbbmFtZV0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xyXG4gICAgICAgICAgcmV0dXJuICRodHRwKGV4dGVuZChjb25maWcgfHwge30sIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBuYW1lLFxyXG4gICAgICAgICAgICB1cmw6IHVybFxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YShuYW1lKSB7XHJcbiAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgJGh0dHBbbmFtZV0gPSBmdW5jdGlvbih1cmwsIGRhdGEsIGNvbmZpZykge1xyXG4gICAgICAgICAgcmV0dXJuICRodHRwKGV4dGVuZChjb25maWcgfHwge30sIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBuYW1lLFxyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ha2VzIHRoZSByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqICEhISBBQ0NFU1NFUyBDTE9TVVJFIFZBUlM6XHJcbiAgICAgKiAkaHR0cEJhY2tlbmQsIGRlZmF1bHRzLCAkbG9nLCAkcm9vdFNjb3BlLCBkZWZhdWx0Q2FjaGUsICRodHRwLnBlbmRpbmdSZXF1ZXN0c1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzZW5kUmVxKGNvbmZpZywgcmVxRGF0YSwgcmVxSGVhZGVycykge1xyXG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpLFxyXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UsXHJcbiAgICAgICAgICBjYWNoZSxcclxuICAgICAgICAgIGNhY2hlZFJlc3AsXHJcbiAgICAgICAgICB1cmwgPSBidWlsZFVybChjb25maWcudXJsLCBjb25maWcucGFyYW1zKTtcclxuXHJcbiAgICAgICRodHRwLnBlbmRpbmdSZXF1ZXN0cy5wdXNoKGNvbmZpZyk7XHJcbiAgICAgIHByb21pc2UudGhlbihyZW1vdmVQZW5kaW5nUmVxLCByZW1vdmVQZW5kaW5nUmVxKTtcclxuXHJcblxyXG4gICAgICBpZiAoKGNvbmZpZy5jYWNoZSB8fCBkZWZhdWx0cy5jYWNoZSkgJiYgY29uZmlnLmNhY2hlICE9PSBmYWxzZSAmJlxyXG4gICAgICAgICAgKGNvbmZpZy5tZXRob2QgPT09ICdHRVQnIHx8IGNvbmZpZy5tZXRob2QgPT09ICdKU09OUCcpKSB7XHJcbiAgICAgICAgY2FjaGUgPSBpc09iamVjdChjb25maWcuY2FjaGUpID8gY29uZmlnLmNhY2hlXHJcbiAgICAgICAgICAgICAgOiBpc09iamVjdChkZWZhdWx0cy5jYWNoZSkgPyBkZWZhdWx0cy5jYWNoZVxyXG4gICAgICAgICAgICAgIDogZGVmYXVsdENhY2hlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY2FjaGUpIHtcclxuICAgICAgICBjYWNoZWRSZXNwID0gY2FjaGUuZ2V0KHVybCk7XHJcbiAgICAgICAgaWYgKGlzRGVmaW5lZChjYWNoZWRSZXNwKSkge1xyXG4gICAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2UoY2FjaGVkUmVzcCkpIHtcclxuICAgICAgICAgICAgLy8gY2FjaGVkIHJlcXVlc3QgaGFzIGFscmVhZHkgYmVlbiBzZW50LCBidXQgdGhlcmUgaXMgbm8gcmVzcG9uc2UgeWV0XHJcbiAgICAgICAgICAgIGNhY2hlZFJlc3AudGhlbihyZW1vdmVQZW5kaW5nUmVxLCByZW1vdmVQZW5kaW5nUmVxKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFJlc3A7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzZXJ2aW5nIGZyb20gY2FjaGVcclxuICAgICAgICAgICAgaWYgKGlzQXJyYXkoY2FjaGVkUmVzcCkpIHtcclxuICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZShjYWNoZWRSZXNwWzFdLCBjYWNoZWRSZXNwWzBdLCBzaGFsbG93Q29weShjYWNoZWRSZXNwWzJdKSwgY2FjaGVkUmVzcFszXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcCwgMjAwLCB7fSwgJ09LJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gcHV0IHRoZSBwcm9taXNlIGZvciB0aGUgbm9uLXRyYW5zZm9ybWVkIHJlc3BvbnNlIGludG8gY2FjaGUgYXMgYSBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgY2FjaGUucHV0KHVybCwgcHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgLy8gaWYgd2Ugd29uJ3QgaGF2ZSB0aGUgcmVzcG9uc2UgaW4gY2FjaGUsIHNldCB0aGUgeHNyZiBoZWFkZXJzIGFuZFxyXG4gICAgICAvLyBzZW5kIHRoZSByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kXHJcbiAgICAgIGlmIChpc1VuZGVmaW5lZChjYWNoZWRSZXNwKSkge1xyXG4gICAgICAgIHZhciB4c3JmVmFsdWUgPSB1cmxJc1NhbWVPcmlnaW4oY29uZmlnLnVybClcclxuICAgICAgICAgICAgPyAkYnJvd3Nlci5jb29raWVzKClbY29uZmlnLnhzcmZDb29raWVOYW1lIHx8IGRlZmF1bHRzLnhzcmZDb29raWVOYW1lXVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAoeHNyZlZhbHVlKSB7XHJcbiAgICAgICAgICByZXFIZWFkZXJzWyhjb25maWcueHNyZkhlYWRlck5hbWUgfHwgZGVmYXVsdHMueHNyZkhlYWRlck5hbWUpXSA9IHhzcmZWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRodHRwQmFja2VuZChjb25maWcubWV0aG9kLCB1cmwsIHJlcURhdGEsIGRvbmUsIHJlcUhlYWRlcnMsIGNvbmZpZy50aW1lb3V0LFxyXG4gICAgICAgICAgICBjb25maWcud2l0aENyZWRlbnRpYWxzLCBjb25maWcucmVzcG9uc2VUeXBlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHByb21pc2U7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIENhbGxiYWNrIHJlZ2lzdGVyZWQgdG8gJGh0dHBCYWNrZW5kKCk6XHJcbiAgICAgICAqICAtIGNhY2hlcyB0aGUgcmVzcG9uc2UgaWYgZGVzaXJlZFxyXG4gICAgICAgKiAgLSByZXNvbHZlcyB0aGUgcmF3ICRodHRwIHByb21pc2VcclxuICAgICAgICogIC0gY2FsbHMgJGFwcGx5XHJcbiAgICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiBkb25lKHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQpIHtcclxuICAgICAgICBpZiAoY2FjaGUpIHtcclxuICAgICAgICAgIGlmIChpc1N1Y2Nlc3Moc3RhdHVzKSkge1xyXG4gICAgICAgICAgICBjYWNoZS5wdXQodXJsLCBbc3RhdHVzLCByZXNwb25zZSwgcGFyc2VIZWFkZXJzKGhlYWRlcnNTdHJpbmcpLCBzdGF0dXNUZXh0XSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgcHJvbWlzZSBmcm9tIHRoZSBjYWNoZVxyXG4gICAgICAgICAgICBjYWNoZS5yZW1vdmUodXJsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVIdHRwUHJvbWlzZSgpIHtcclxuICAgICAgICAgIHJlc29sdmVQcm9taXNlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVzZUFwcGx5QXN5bmMpIHtcclxuICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5QXN5bmMocmVzb2x2ZUh0dHBQcm9taXNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzb2x2ZUh0dHBQcm9taXNlKCk7XHJcbiAgICAgICAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVzb2x2ZXMgdGhlIHJhdyAkaHR0cCBwcm9taXNlLlxyXG4gICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycywgc3RhdHVzVGV4dCkge1xyXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBpbnRlcm5hbCBzdGF0dXNlcyB0byAwXHJcbiAgICAgICAgc3RhdHVzID0gTWF0aC5tYXgoc3RhdHVzLCAwKTtcclxuXHJcbiAgICAgICAgKGlzU3VjY2VzcyhzdGF0dXMpID8gZGVmZXJyZWQucmVzb2x2ZSA6IGRlZmVycmVkLnJlamVjdCkoe1xyXG4gICAgICAgICAgZGF0YTogcmVzcG9uc2UsXHJcbiAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcclxuICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNHZXR0ZXIoaGVhZGVycyksXHJcbiAgICAgICAgICBjb25maWc6IGNvbmZpZyxcclxuICAgICAgICAgIHN0YXR1c1RleHQgOiBzdGF0dXNUZXh0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICBmdW5jdGlvbiByZW1vdmVQZW5kaW5nUmVxKCkge1xyXG4gICAgICAgIHZhciBpZHggPSAkaHR0cC5wZW5kaW5nUmVxdWVzdHMuaW5kZXhPZihjb25maWcpO1xyXG4gICAgICAgIGlmIChpZHggIT09IC0xKSAkaHR0cC5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYnVpbGRVcmwodXJsLCBwYXJhbXMpIHtcclxuICAgICAgaWYgKCFwYXJhbXMpIHJldHVybiB1cmw7XHJcbiAgICAgIHZhciBwYXJ0cyA9IFtdO1xyXG4gICAgICBmb3JFYWNoU29ydGVkKHBhcmFtcywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybjtcclxuICAgICAgICBpZiAoIWlzQXJyYXkodmFsdWUpKSB2YWx1ZSA9IFt2YWx1ZV07XHJcblxyXG4gICAgICAgIGZvckVhY2godmFsdWUsIGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgIGlmIChpc09iamVjdCh2KSkge1xyXG4gICAgICAgICAgICBpZiAoaXNEYXRlKHYpKXtcclxuICAgICAgICAgICAgICB2ID0gdi50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHYgPSB0b0pzb24odik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhcnRzLnB1c2goZW5jb2RlVXJpUXVlcnkoa2V5KSArICc9JyArXHJcbiAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVyaVF1ZXJ5KHYpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmKHBhcnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpID09IC0xKSA/ICc/JyA6ICcmJykgKyBwYXJ0cy5qb2luKCcmJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlWGhyKG1ldGhvZCkge1xyXG4gICAgLy9pZiBJRSBhbmQgdGhlIG1ldGhvZCBpcyBub3QgUkZDMjYxNiBjb21wbGlhbnQsIG9yIGlmIFhNTEh0dHBSZXF1ZXN0XHJcbiAgICAvL2lzIG5vdCBhdmFpbGFibGUsIHRyeSBnZXR0aW5nIGFuIEFjdGl2ZVhPYmplY3QuIE90aGVyd2lzZSwgdXNlIFhNTEh0dHBSZXF1ZXN0XHJcbiAgICAvL2lmIGl0IGlzIGF2YWlsYWJsZVxyXG4gICAgaWYgKG1zaWUgPD0gOCAmJiAoIW1ldGhvZC5tYXRjaCgvXihnZXR8cG9zdHxoZWFkfHB1dHxkZWxldGV8b3B0aW9ucykkL2kpIHx8XHJcbiAgICAgICF3aW5kb3cuWE1MSHR0cFJlcXVlc3QpKSB7XHJcbiAgICAgIHJldHVybiBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtcclxuICAgIH0gZWxzZSBpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0KSB7XHJcbiAgICAgIHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgbWluRXJyKCckaHR0cEJhY2tlbmQnKSgnbm94aHInLCBcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LlwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRodHRwQmFja2VuZFxyXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xyXG4gKiBAcmVxdWlyZXMgJGRvY3VtZW50XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBIVFRQIGJhY2tlbmQgdXNlZCBieSB0aGUge0BsaW5rIG5nLiRodHRwIHNlcnZpY2V9IHRoYXQgZGVsZWdhdGVzIHRvXHJcbiAqIFhNTEh0dHBSZXF1ZXN0IG9iamVjdCBvciBKU09OUCBhbmQgZGVhbHMgd2l0aCBicm93c2VyIGluY29tcGF0aWJpbGl0aWVzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gdXNlIHRoaXMgc2VydmljZSBkaXJlY3RseSwgaW5zdGVhZCB1c2UgdGhlIGhpZ2hlci1sZXZlbCBhYnN0cmFjdGlvbnM6XHJcbiAqIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gb3Ige0BsaW5rIG5nUmVzb3VyY2UuJHJlc291cmNlICRyZXNvdXJjZX0uXHJcbiAqXHJcbiAqIER1cmluZyB0ZXN0aW5nIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgc3dhcHBlZCB3aXRoIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kIG1vY2tcclxuICogJGh0dHBCYWNrZW5kfSB3aGljaCBjYW4gYmUgdHJhaW5lZCB3aXRoIHJlc3BvbnNlcy5cclxuICovXHJcbmZ1bmN0aW9uICRIdHRwQmFja2VuZFByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJGJyb3dzZXInLCAnJHdpbmRvdycsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkYnJvd3NlciwgJHdpbmRvdywgJGRvY3VtZW50KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlSHR0cEJhY2tlbmQoJGJyb3dzZXIsIGNyZWF0ZVhociwgJGJyb3dzZXIuZGVmZXIsICR3aW5kb3cuYW5ndWxhci5jYWxsYmFja3MsICRkb2N1bWVudFswXSk7XHJcbiAgfV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUh0dHBCYWNrZW5kKCRicm93c2VyLCBjcmVhdGVYaHIsICRicm93c2VyRGVmZXIsIGNhbGxiYWNrcywgcmF3RG9jdW1lbnQpIHtcclxuICB2YXIgQUJPUlRFRCA9IC0xO1xyXG5cclxuICAvLyBUT0RPKHZvanRhKTogZml4IHRoZSBzaWduYXR1cmVcclxuICByZXR1cm4gZnVuY3Rpb24obWV0aG9kLCB1cmwsIHBvc3QsIGNhbGxiYWNrLCBoZWFkZXJzLCB0aW1lb3V0LCB3aXRoQ3JlZGVudGlhbHMsIHJlc3BvbnNlVHlwZSkge1xyXG4gICAgdmFyIHN0YXR1cztcclxuICAgICRicm93c2VyLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtcclxuICAgIHVybCA9IHVybCB8fCAkYnJvd3Nlci51cmwoKTtcclxuXHJcbiAgICBpZiAobG93ZXJjYXNlKG1ldGhvZCkgPT0gJ2pzb25wJykge1xyXG4gICAgICB2YXIgY2FsbGJhY2tJZCA9ICdfJyArIChjYWxsYmFja3MuY291bnRlcisrKS50b1N0cmluZygzNik7XHJcbiAgICAgIGNhbGxiYWNrc1tjYWxsYmFja0lkXSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBjYWxsYmFja3NbY2FsbGJhY2tJZF0uZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgY2FsbGJhY2tzW2NhbGxiYWNrSWRdLmNhbGxlZCA9IHRydWU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIganNvbnBEb25lID0ganNvbnBSZXEodXJsLnJlcGxhY2UoJ0pTT05fQ0FMTEJBQ0snLCAnYW5ndWxhci5jYWxsYmFja3MuJyArIGNhbGxiYWNrSWQpLFxyXG4gICAgICAgICAgY2FsbGJhY2tJZCwgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XHJcbiAgICAgICAgY29tcGxldGVSZXF1ZXN0KGNhbGxiYWNrLCBzdGF0dXMsIGNhbGxiYWNrc1tjYWxsYmFja0lkXS5kYXRhLCBcIlwiLCB0ZXh0KTtcclxuICAgICAgICBjYWxsYmFja3NbY2FsbGJhY2tJZF0gPSBub29wO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICB2YXIgeGhyID0gY3JlYXRlWGhyKG1ldGhvZCk7XHJcblxyXG4gICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XHJcbiAgICAgIGZvckVhY2goaGVhZGVycywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBJbiBJRTYgYW5kIDcsIHRoaXMgbWlnaHQgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgd2hlbiB4aHIuc2VuZCBiZWxvdyBpcyBjYWxsZWQgYW5kIHRoZVxyXG4gICAgICAvLyByZXNwb25zZSBpcyBpbiB0aGUgY2FjaGUuIHRoZSBwcm9taXNlIGFwaSB3aWxsIGVuc3VyZSB0aGF0IHRvIHRoZSBhcHAgY29kZSB0aGUgYXBpIGlzXHJcbiAgICAgIC8vIGFsd2F5cyBhc3luY1xyXG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gb25yZWFkeXN0YXRlY2hhbmdlIG1pZ2h0IGdldCBjYWxsZWQgbXVsdGlwbGUgdGltZXMgd2l0aCByZWFkeVN0YXRlID09PSA0IG9uIG1vYmlsZSB3ZWJraXQgY2F1c2VkIGJ5XHJcbiAgICAgICAgLy8geGhycyB0aGF0IGFyZSByZXNvbHZlZCB3aGlsZSB0aGUgYXBwIGlzIGluIHRoZSBiYWNrZ3JvdW5kIChzZWUgIzU0MjYpLlxyXG4gICAgICAgIC8vIHNpbmNlIGNhbGxpbmcgY29tcGxldGVSZXF1ZXN0IHNldHMgdGhlIGB4aHJgIHZhcmlhYmxlIHRvIG51bGwsIHdlIGp1c3QgY2hlY2sgaWYgaXQncyBub3QgbnVsbCBiZWZvcmVcclxuICAgICAgICAvLyBjb250aW51aW5nXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyB3ZSBjYW4ndCBzZXQgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSB0byB1bmRlZmluZWQgb3IgZGVsZXRlIGl0IGJlY2F1c2UgdGhhdCBicmVha3MgSUU4IChtZXRob2Q9UEFUQ0gpIGFuZFxyXG4gICAgICAgIC8vIFNhZmFyaSByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgaWYgKHhociAmJiB4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XHJcbiAgICAgICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzID0gbnVsbCxcclxuICAgICAgICAgICAgICByZXNwb25zZSA9IG51bGwsXHJcbiAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9ICcnO1xyXG5cclxuICAgICAgICAgIGlmKHN0YXR1cyAhPT0gQUJPUlRFRCkge1xyXG4gICAgICAgICAgICByZXNwb25zZUhlYWRlcnMgPSB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk7XHJcblxyXG4gICAgICAgICAgICAvLyByZXNwb25zZVRleHQgaXMgdGhlIG9sZC1zY2hvb2wgd2F5IG9mIHJldHJpZXZpbmcgcmVzcG9uc2UgKHN1cHBvcnRlZCBieSBJRTggJiA5KVxyXG4gICAgICAgICAgICAvLyByZXNwb25zZS9yZXNwb25zZVR5cGUgcHJvcGVydGllcyB3ZXJlIGludHJvZHVjZWQgaW4gWEhSIExldmVsMiBzcGVjIChzdXBwb3J0ZWQgYnkgSUUxMClcclxuICAgICAgICAgICAgcmVzcG9uc2UgPSAoJ3Jlc3BvbnNlJyBpbiB4aHIpID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBBY2Nlc3Npbmcgc3RhdHVzVGV4dCBvbiBhbiBhYm9ydGVkIHhociBvYmplY3Qgd2lsbFxyXG4gICAgICAgICAgLy8gdGhyb3cgYW4gJ2MwMGMwMjNmIGVycm9yJyBpbiBJRTkgYW5kIGxvd2VyLCBkb24ndCB0b3VjaCBpdC5cclxuICAgICAgICAgIGlmICghKHN0YXR1cyA9PT0gQUJPUlRFRCAmJiBtc2llIDwgMTApKSB7XHJcbiAgICAgICAgICAgIHN0YXR1c1RleHQgPSB4aHIuc3RhdHVzVGV4dDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgc3RhdHVzIHx8IHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzLFxyXG4gICAgICAgICAgICAgIHN0YXR1c1RleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmICh3aXRoQ3JlZGVudGlhbHMpIHtcclxuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlVHlwZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIC8vIFdlYktpdCBhZGRlZCBzdXBwb3J0IGZvciB0aGUganNvbiByZXNwb25zZVR5cGUgdmFsdWUgb24gMDkvMDMvMjAxM1xyXG4gICAgICAgICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTczNjQ4LiBWZXJzaW9ucyBvZiBTYWZhcmkgcHJpb3IgdG8gNyBhcmVcclxuICAgICAgICAgIC8vIGtub3duIHRvIHRocm93IHdoZW4gc2V0dGluZyB0aGUgdmFsdWUgXCJqc29uXCIgYXMgdGhlIHJlc3BvbnNlIHR5cGUuIE90aGVyIG9sZGVyXHJcbiAgICAgICAgICAvLyBicm93c2VycyBpbXBsZW1lbnRpbmcgdGhlIHJlc3BvbnNlVHlwZVxyXG4gICAgICAgICAgLy9cclxuICAgICAgICAgIC8vIFRoZSBqc29uIHJlc3BvbnNlIHR5cGUgY2FuIGJlIGlnbm9yZWQgaWYgbm90IHN1cHBvcnRlZCwgYmVjYXVzZSBKU09OIHBheWxvYWRzIGFyZVxyXG4gICAgICAgICAgLy8gcGFyc2VkIG9uIHRoZSBjbGllbnQtc2lkZSByZWdhcmRsZXNzLlxyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB4aHIuc2VuZChwb3N0IHx8IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aW1lb3V0ID4gMCkge1xyXG4gICAgICB2YXIgdGltZW91dElkID0gJGJyb3dzZXJEZWZlcih0aW1lb3V0UmVxdWVzdCwgdGltZW91dCk7XHJcbiAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZUxpa2UodGltZW91dCkpIHtcclxuICAgICAgdGltZW91dC50aGVuKHRpbWVvdXRSZXF1ZXN0KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gdGltZW91dFJlcXVlc3QoKSB7XHJcbiAgICAgIHN0YXR1cyA9IEFCT1JURUQ7XHJcbiAgICAgIGpzb25wRG9uZSAmJiBqc29ucERvbmUoKTtcclxuICAgICAgeGhyICYmIHhoci5hYm9ydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgc3RhdHVzLCByZXNwb25zZSwgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCkge1xyXG4gICAgICAvLyBjYW5jZWwgdGltZW91dCBhbmQgc3Vic2VxdWVudCB0aW1lb3V0IHByb21pc2UgcmVzb2x1dGlvblxyXG4gICAgICB0aW1lb3V0SWQgJiYgJGJyb3dzZXJEZWZlci5jYW5jZWwodGltZW91dElkKTtcclxuICAgICAganNvbnBEb25lID0geGhyID0gbnVsbDtcclxuXHJcbiAgICAgIC8vIGZpeCBzdGF0dXMgY29kZSB3aGVuIGl0IGlzIDAgKDAgc3RhdHVzIGlzIHVuZG9jdW1lbnRlZCkuXHJcbiAgICAgIC8vIE9jY3VycyB3aGVuIGFjY2Vzc2luZyBmaWxlIHJlc291cmNlcyBvciBvbiBBbmRyb2lkIDQuMSBzdG9jayBicm93c2VyXHJcbiAgICAgIC8vIHdoaWxlIHJldHJpZXZpbmcgZmlsZXMgZnJvbSBhcHBsaWNhdGlvbiBjYWNoZS5cclxuICAgICAgaWYgKHN0YXR1cyA9PT0gMCkge1xyXG4gICAgICAgIHN0YXR1cyA9IHJlc3BvbnNlID8gMjAwIDogdXJsUmVzb2x2ZSh1cmwpLnByb3RvY29sID09ICdmaWxlJyA/IDQwNCA6IDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIG5vcm1hbGl6ZSBJRSBidWcgKGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzE0NTApXHJcbiAgICAgIHN0YXR1cyA9IHN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHN0YXR1cztcclxuICAgICAgc3RhdHVzVGV4dCA9IHN0YXR1c1RleHQgfHwgJyc7XHJcblxyXG4gICAgICBjYWxsYmFjayhzdGF0dXMsIHJlc3BvbnNlLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0KTtcclxuICAgICAgJGJyb3dzZXIuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBqc29ucFJlcSh1cmwsIGNhbGxiYWNrSWQsIGRvbmUpIHtcclxuICAgIC8vIHdlIGNhbid0IHVzZSBqUXVlcnkvanFMaXRlIGhlcmUgYmVjYXVzZSBqUXVlcnkgZG9lcyBjcmF6eSBzaGl0IHdpdGggc2NyaXB0IGVsZW1lbnRzLCBlLmcuOlxyXG4gICAgLy8gLSBmZXRjaGVzIGxvY2FsIHNjcmlwdHMgdmlhIFhIUiBhbmQgZXZhbHMgdGhlbVxyXG4gICAgLy8gLSBhZGRzIGFuZCBpbW1lZGlhdGVseSByZW1vdmVzIHNjcmlwdCBlbGVtZW50cyBmcm9tIHRoZSBkb2N1bWVudFxyXG4gICAgdmFyIHNjcmlwdCA9IHJhd0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpLCBjYWxsYmFjayA9IG51bGw7XHJcbiAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbiAgICBzY3JpcHQuc3JjID0gdXJsO1xyXG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcclxuXHJcbiAgICBjYWxsYmFjayA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihzY3JpcHQsIFwibG9hZFwiLCBjYWxsYmFjayk7XHJcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihzY3JpcHQsIFwiZXJyb3JcIiwgY2FsbGJhY2spO1xyXG4gICAgICByYXdEb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XHJcbiAgICAgIHNjcmlwdCA9IG51bGw7XHJcbiAgICAgIHZhciBzdGF0dXMgPSAtMTtcclxuICAgICAgdmFyIHRleHQgPSBcInVua25vd25cIjtcclxuXHJcbiAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSBcImxvYWRcIiAmJiAhY2FsbGJhY2tzW2NhbGxiYWNrSWRdLmNhbGxlZCkge1xyXG4gICAgICAgICAgZXZlbnQgPSB7IHR5cGU6IFwiZXJyb3JcIiB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZXh0ID0gZXZlbnQudHlwZTtcclxuICAgICAgICBzdGF0dXMgPSBldmVudC50eXBlID09PSBcImVycm9yXCIgPyA0MDQgOiAyMDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkb25lKSB7XHJcbiAgICAgICAgZG9uZShzdGF0dXMsIHRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFkZEV2ZW50TGlzdGVuZXJGbihzY3JpcHQsIFwibG9hZFwiLCBjYWxsYmFjayk7XHJcbiAgICBhZGRFdmVudExpc3RlbmVyRm4oc2NyaXB0LCBcImVycm9yXCIsIGNhbGxiYWNrKTtcclxuICAgIHJhd0RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgIHJldHVybiBjYWxsYmFjaztcclxuICB9XHJcbn1cclxuXHJcbnZhciAkaW50ZXJwb2xhdGVNaW5FcnIgPSBtaW5FcnIoJyRpbnRlcnBvbGF0ZScpO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogVXNlZCBmb3IgY29uZmlndXJpbmcgdGhlIGludGVycG9sYXRpb24gbWFya3VwLiBEZWZhdWx0cyB0byBge3tgIGFuZCBgfX1gLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG48ZXhhbXBsZSBtb2R1bGU9XCJjdXN0b21JbnRlcnBvbGF0aW9uQXBwXCI+XHJcbjxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbjxzY3JpcHQ+XHJcbiAgdmFyIGN1c3RvbUludGVycG9sYXRpb25BcHAgPSBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tSW50ZXJwb2xhdGlvbkFwcCcsIFtdKTtcclxuXHJcbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb25maWcoZnVuY3Rpb24oJGludGVycG9sYXRlUHJvdmlkZXIpIHtcclxuICAgICRpbnRlcnBvbGF0ZVByb3ZpZGVyLnN0YXJ0U3ltYm9sKCcvLycpO1xyXG4gICAgJGludGVycG9sYXRlUHJvdmlkZXIuZW5kU3ltYm9sKCcvLycpO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb250cm9sbGVyKCdEZW1vQ29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLmxhYmVsID0gXCJUaGlzIGJpbmRpbmcgaXMgYnJvdWdodCB5b3UgYnkgLy8gaW50ZXJwb2xhdGlvbiBzeW1ib2xzLlwiO1xyXG4gIH0pO1xyXG48L3NjcmlwdD5cclxuPGRpdiBuZy1hcHA9XCJBcHBcIiBuZy1jb250cm9sbGVyPVwiRGVtb0NvbnRyb2xsZXIgYXMgZGVtb1wiPlxyXG4gICAgLy9kZW1vLmxhYmVsLy9cclxuPC9kaXY+XHJcbjwvZmlsZT5cclxuPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gIGl0KCdzaG91bGQgaW50ZXJwb2xhdGUgYmluZGluZyB3aXRoIGN1c3RvbSBzeW1ib2xzJywgZnVuY3Rpb24oKSB7XHJcbiAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdkZW1vLmxhYmVsJykpLmdldFRleHQoKSkudG9CZSgnVGhpcyBiaW5kaW5nIGlzIGJyb3VnaHQgeW91IGJ5IC8vIGludGVycG9sYXRpb24gc3ltYm9scy4nKTtcclxuICB9KTtcclxuPC9maWxlPlxyXG48L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiAkSW50ZXJwb2xhdGVQcm92aWRlcigpIHtcclxuICB2YXIgc3RhcnRTeW1ib2wgPSAne3snO1xyXG4gIHZhciBlbmRTeW1ib2wgPSAnfX0nO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXIjc3RhcnRTeW1ib2xcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTeW1ib2wgdG8gZGVub3RlIHN0YXJ0IG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB7e2AuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHZhbHVlIG5ldyB2YWx1ZSB0byBzZXQgdGhlIHN0YXJ0aW5nIHN5bWJvbCB0by5cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfHNlbGZ9IFJldHVybnMgdGhlIHN5bWJvbCB3aGVuIHVzZWQgYXMgZ2V0dGVyIGFuZCBzZWxmIGlmIHVzZWQgYXMgc2V0dGVyLlxyXG4gICAqL1xyXG4gIHRoaXMuc3RhcnRTeW1ib2wgPSBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgc3RhcnRTeW1ib2wgPSB2YWx1ZTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gc3RhcnRTeW1ib2w7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRpbnRlcnBvbGF0ZVByb3ZpZGVyI2VuZFN5bWJvbFxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIGVuZCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBgfX1gLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgdG8gc2V0IHRoZSBlbmRpbmcgc3ltYm9sIHRvLlxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUgc3ltYm9sIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXHJcbiAgICovXHJcbiAgdGhpcy5lbmRTeW1ib2wgPSBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgZW5kU3ltYm9sID0gdmFsdWU7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGVuZFN5bWJvbDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckcGFyc2UnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCAnJHNjZScsIGZ1bmN0aW9uKCRwYXJzZSwgJGV4Y2VwdGlvbkhhbmRsZXIsICRzY2UpIHtcclxuICAgIHZhciBzdGFydFN5bWJvbExlbmd0aCA9IHN0YXJ0U3ltYm9sLmxlbmd0aCxcclxuICAgICAgICBlbmRTeW1ib2xMZW5ndGggPSBlbmRTeW1ib2wubGVuZ3RoLFxyXG4gICAgICAgIGVzY2FwZWRTdGFydFJlZ2V4cCA9IG5ldyBSZWdFeHAoc3RhcnRTeW1ib2wucmVwbGFjZSgvLi9nLCBlc2NhcGUpLCAnZycpLFxyXG4gICAgICAgIGVzY2FwZWRFbmRSZWdleHAgPSBuZXcgUmVnRXhwKGVuZFN5bWJvbC5yZXBsYWNlKC8uL2csIGVzY2FwZSksICdnJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gZXNjYXBlKGNoKSB7XHJcbiAgICAgIHJldHVybiAnXFxcXFxcXFxcXFxcJyArIGNoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBuYW1lICRpbnRlcnBvbGF0ZVxyXG4gICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmVxdWlyZXMgJHBhcnNlXHJcbiAgICAgKiBAcmVxdWlyZXMgJHNjZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIENvbXBpbGVzIGEgc3RyaW5nIHdpdGggbWFya3VwIGludG8gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbi4gVGhpcyBzZXJ2aWNlIGlzIHVzZWQgYnkgdGhlXHJcbiAgICAgKiBIVE1MIHtAbGluayBuZy4kY29tcGlsZSAkY29tcGlsZX0gc2VydmljZSBmb3IgZGF0YSBiaW5kaW5nLiBTZWVcclxuICAgICAqIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciAkaW50ZXJwb2xhdGVQcm92aWRlcn0gZm9yIGNvbmZpZ3VyaW5nIHRoZVxyXG4gICAgICogaW50ZXJwb2xhdGlvbiBtYXJrdXAuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiAgIHZhciAkaW50ZXJwb2xhdGUgPSAuLi47IC8vIGluamVjdGVkXHJcbiAgICAgKiAgIHZhciBleHAgPSAkaW50ZXJwb2xhdGUoJ0hlbGxvIHt7bmFtZSB8IHVwcGVyY2FzZX19IScpO1xyXG4gICAgICogICBleHBlY3QoZXhwKHtuYW1lOidBbmd1bGFyJ30pLnRvRXF1YWwoJ0hlbGxvIEFOR1VMQVIhJyk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBgJGludGVycG9sYXRlYCB0YWtlcyBhbiBvcHRpb25hbCBmb3VydGggYXJndW1lbnQsIGBhbGxPck5vdGhpbmdgLiBJZiBgYWxsT3JOb3RoaW5nYCBpc1xyXG4gICAgICogYHRydWVgLCB0aGUgaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB3aWxsIHJldHVybiBgdW5kZWZpbmVkYCB1bmxlc3MgYWxsIGVtYmVkZGVkIGV4cHJlc3Npb25zXHJcbiAgICAgKiBldmFsdWF0ZSB0byBhIHZhbHVlIG90aGVyIHRoYW4gYHVuZGVmaW5lZGAuXHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqICAgdmFyICRpbnRlcnBvbGF0ZSA9IC4uLjsgLy8gaW5qZWN0ZWRcclxuICAgICAqICAgdmFyIGNvbnRleHQgPSB7Z3JlZXRpbmc6ICdIZWxsbycsIG5hbWU6IHVuZGVmaW5lZCB9O1xyXG4gICAgICpcclxuICAgICAqICAgLy8gZGVmYXVsdCBcImZvcmdpdmluZ1wiIG1vZGVcclxuICAgICAqICAgdmFyIGV4cCA9ICRpbnRlcnBvbGF0ZSgne3tncmVldGluZ319IHt7bmFtZX19IScpO1xyXG4gICAgICogICBleHBlY3QoZXhwKGNvbnRleHQpKS50b0VxdWFsKCdIZWxsbyAhJyk7XHJcbiAgICAgKlxyXG4gICAgICogICAvLyBcImFsbE9yTm90aGluZ1wiIG1vZGVcclxuICAgICAqICAgZXhwID0gJGludGVycG9sYXRlKCd7e2dyZWV0aW5nfX0ge3tuYW1lfX0hJywgZmFsc2UsIG51bGwsIHRydWUpO1xyXG4gICAgICogICBleHBlY3QoZXhwKGNvbnRleHQpKS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICAgKiAgIGNvbnRleHQubmFtZSA9ICdBbmd1bGFyJztcclxuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9FcXVhbCgnSGVsbG8gQW5ndWxhciEnKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIGBhbGxPck5vdGhpbmdgIGlzIHVzZWZ1bCBmb3IgaW50ZXJwb2xhdGluZyBVUkxzLiBgbmdTcmNgIGFuZCBgbmdTcmNzZXRgIHVzZSB0aGlzIGJlaGF2aW9yLlxyXG4gICAgICpcclxuICAgICAqICMjIyNFc2NhcGVkIEludGVycG9sYXRpb25cclxuICAgICAqICRpbnRlcnBvbGF0ZSBwcm92aWRlcyBhIG1lY2hhbmlzbSBmb3IgZXNjYXBpbmcgaW50ZXJwb2xhdGlvbiBtYXJrZXJzLiBTdGFydCBhbmQgZW5kIG1hcmtlcnNcclxuICAgICAqIGNhbiBiZSBlc2NhcGVkIGJ5IHByZWNlZGluZyBlYWNoIG9mIHRoZWlyIGNoYXJhY3RlcnMgd2l0aCBhIFJFVkVSU0UgU09MSURVUyBVKzAwNUMgKGJhY2tzbGFzaCkuXHJcbiAgICAgKiBJdCB3aWxsIGJlIHJlbmRlcmVkIGFzIGEgcmVndWxhciBzdGFydC9lbmQgbWFya2VyLCBhbmQgd2lsbCBub3QgYmUgaW50ZXJwcmV0ZWQgYXMgYW4gZXhwcmVzc2lvblxyXG4gICAgICogb3IgYmluZGluZy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGVuYWJsZXMgd2ViLXNlcnZlcnMgdG8gcHJldmVudCBzY3JpcHQgaW5qZWN0aW9uIGF0dGFja3MgYW5kIGRlZmFjaW5nIGF0dGFja3MsIHRvIHNvbWVcclxuICAgICAqIGRlZ3JlZSwgd2hpbGUgYWxzbyBlbmFibGluZyBjb2RlIGV4YW1wbGVzIHRvIHdvcmsgd2l0aG91dCByZWx5aW5nIG9uIHRoZVxyXG4gICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ05vbkJpbmRhYmxlIG5nTm9uQmluZGFibGV9IGRpcmVjdGl2ZS5cclxuICAgICAqXHJcbiAgICAgKiAqKkZvciBzZWN1cml0eSBwdXJwb3NlcywgaXQgaXMgc3Ryb25nbHkgZW5jb3VyYWdlZCB0aGF0IHdlYiBzZXJ2ZXJzIGVzY2FwZSB1c2VyLXN1cHBsaWVkIGRhdGEsXHJcbiAgICAgKiByZXBsYWNpbmcgYW5nbGUgYnJhY2tldHMgKCZsdDssICZndDspIHdpdGggJmFtcDtsdDsgYW5kICZhbXA7Z3Q7IHJlc3BlY3RpdmVseSwgYW5kIHJlcGxhY2luZyBhbGxcclxuICAgICAqIGludGVycG9sYXRpb24gc3RhcnQvZW5kIG1hcmtlcnMgd2l0aCB0aGVpciBlc2NhcGVkIGNvdW50ZXJwYXJ0cy4qKlxyXG4gICAgICpcclxuICAgICAqIEVzY2FwZWQgaW50ZXJwb2xhdGlvbiBtYXJrZXJzIGFyZSBvbmx5IHJlcGxhY2VkIHdpdGggdGhlIGFjdHVhbCBpbnRlcnBvbGF0aW9uIG1hcmtlcnMgaW4gcmVuZGVyZWRcclxuICAgICAqIG91dHB1dCB3aGVuIHRoZSAkaW50ZXJwb2xhdGUgc2VydmljZSBwcm9jZXNzZXMgdGhlIHRleHQuIFNvLCBmb3IgSFRNTCBlbGVtZW50cyBpbnRlcnBvbGF0ZWRcclxuICAgICAqIGJ5IHtAbGluayBuZy4kY29tcGlsZSAkY29tcGlsZX0sIG9yIG90aGVyd2lzZSBpbnRlcnBvbGF0ZWQgd2l0aCB0aGUgYG11c3RIYXZlRXhwcmVzc2lvbmAgcGFyYW1ldGVyXHJcbiAgICAgKiBzZXQgdG8gYHRydWVgLCB0aGUgaW50ZXJwb2xhdGVkIHRleHQgbXVzdCBjb250YWluIGFuIHVuZXNjYXBlZCBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24uIEFzIHN1Y2gsXHJcbiAgICAgKiB0aGlzIGlzIHR5cGljYWxseSB1c2VmdWwgb25seSB3aGVuIHVzZXItZGF0YSBpcyB1c2VkIGluIHJlbmRlcmluZyBhIHRlbXBsYXRlIGZyb20gdGhlIHNlcnZlciwgb3JcclxuICAgICAqIHdoZW4gb3RoZXJ3aXNlIHVudHJ1c3RlZCBkYXRhIGlzIHVzZWQgYnkgYSBkaXJlY3RpdmUuXHJcbiAgICAgKlxyXG4gICAgICogPGV4YW1wbGU+XHJcbiAgICAgKiAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAqICAgIDxkaXYgbmctaW5pdD1cInVzZXJuYW1lPSdBIHVzZXInXCI+XHJcbiAgICAgKiAgICAgIDxwIG5nLWluaXQ9XCJhcHB0aXRsZT0nRXNjYXBpbmcgZGVtbydcIj57e2FwcHRpdGxlfX06IFxce1xceyB1c2VybmFtZSA9IFwiZGVmYWNlZCB2YWx1ZVwiOyBcXH1cXH1cclxuICAgICAqICAgICAgICA8L3A+XHJcbiAgICAgKiAgICAgIDxwPjxzdHJvbmc+e3t1c2VybmFtZX19PC9zdHJvbmc+IGF0dGVtcHRzIHRvIGluamVjdCBjb2RlIHdoaWNoIHdpbGwgZGVmYWNlIHRoZVxyXG4gICAgICogICAgICAgIGFwcGxpY2F0aW9uLCBidXQgZmFpbHMgdG8gYWNjb21wbGlzaCB0aGVpciB0YXNrLCBiZWNhdXNlIHRoZSBzZXJ2ZXIgaGFzIGNvcnJlY3RseVxyXG4gICAgICogICAgICAgIGVzY2FwZWQgdGhlIGludGVycG9sYXRpb24gc3RhcnQvZW5kIG1hcmtlcnMgd2l0aCBSRVZFUlNFIFNPTElEVVMgVSswMDVDIChiYWNrc2xhc2gpXHJcbiAgICAgKiAgICAgICAgY2hhcmFjdGVycy48L3A+XHJcbiAgICAgKiAgICAgIDxwPkluc3RlYWQsIHRoZSByZXN1bHQgb2YgdGhlIGF0dGVtcHRlZCBzY3JpcHQgaW5qZWN0aW9uIGlzIHZpc2libGUsIGFuZCBjYW4gYmUgcmVtb3ZlZFxyXG4gICAgICogICAgICAgIGZyb20gdGhlIGRhdGFiYXNlIGJ5IGFuIGFkbWluaXN0cmF0b3IuPC9wPlxyXG4gICAgICogICAgPC9kaXY+XHJcbiAgICAgKiAgPC9maWxlPlxyXG4gICAgICogPC9leGFtcGxlPlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHdpdGggbWFya3VwIHRvIGludGVycG9sYXRlLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gbXVzdEhhdmVFeHByZXNzaW9uIGlmIHNldCB0byB0cnVlIHRoZW4gdGhlIGludGVycG9sYXRpb24gc3RyaW5nIG11c3QgaGF2ZVxyXG4gICAgICogICAgZW1iZWRkZWQgZXhwcmVzc2lvbiBpbiBvcmRlciB0byByZXR1cm4gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbi4gU3RyaW5ncyB3aXRoIG5vXHJcbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIHdpbGwgcmV0dXJuIG51bGwgZm9yIHRoZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSB0cnVzdGVkQ29udGV4dCB3aGVuIHByb3ZpZGVkLCB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gcGFzc2VzIHRoZSBpbnRlcnBvbGF0ZWRcclxuICAgICAqICAgIHJlc3VsdCB0aHJvdWdoIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkKGludGVycG9sYXRlZFJlc3VsdCxcclxuICAgICAqICAgIHRydXN0ZWRDb250ZXh0KX0gYmVmb3JlIHJldHVybmluZyBpdC4gIFJlZmVyIHRvIHRoZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBzZXJ2aWNlIHRoYXRcclxuICAgICAqICAgIHByb3ZpZGVzIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIGZvciBkZXRhaWxzLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gYWxsT3JOb3RoaW5nIGlmIGB0cnVlYCwgdGhlbiB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gcmV0dXJucyB1bmRlZmluZWRcclxuICAgICAqICAgIHVubGVzcyBhbGwgZW1iZWRkZWQgZXhwcmVzc2lvbnMgZXZhbHVhdGUgdG8gYSB2YWx1ZSBvdGhlciB0aGFuIGB1bmRlZmluZWRgLlxyXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQpfSBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uIHdoaWNoIGlzIHVzZWQgdG8gY29tcHV0ZSB0aGVcclxuICAgICAqICAgIGludGVycG9sYXRlZCBzdHJpbmcuIFRoZSBmdW5jdGlvbiBoYXMgdGhlc2UgcGFyYW1ldGVyczpcclxuICAgICAqXHJcbiAgICAgKiAtIGBjb250ZXh0YDogZXZhbHVhdGlvbiBjb250ZXh0IGZvciBhbGwgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIGludGVycG9sYXRlZCB0ZXh0XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICRpbnRlcnBvbGF0ZSh0ZXh0LCBtdXN0SGF2ZUV4cHJlc3Npb24sIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpIHtcclxuICAgICAgYWxsT3JOb3RoaW5nID0gISFhbGxPck5vdGhpbmc7XHJcbiAgICAgIHZhciBzdGFydEluZGV4LFxyXG4gICAgICAgICAgZW5kSW5kZXgsXHJcbiAgICAgICAgICBpbmRleCA9IDAsXHJcbiAgICAgICAgICBleHByZXNzaW9ucyA9IFtdLFxyXG4gICAgICAgICAgcGFyc2VGbnMgPSBbXSxcclxuICAgICAgICAgIHRleHRMZW5ndGggPSB0ZXh0Lmxlbmd0aCxcclxuICAgICAgICAgIGV4cCxcclxuICAgICAgICAgIGNvbmNhdCA9IFtdLFxyXG4gICAgICAgICAgZXhwcmVzc2lvblBvc2l0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgd2hpbGUoaW5kZXggPCB0ZXh0TGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKCAoKHN0YXJ0SW5kZXggPSB0ZXh0LmluZGV4T2Yoc3RhcnRTeW1ib2wsIGluZGV4KSkgIT0gLTEpICYmXHJcbiAgICAgICAgICAgICAoKGVuZEluZGV4ID0gdGV4dC5pbmRleE9mKGVuZFN5bWJvbCwgc3RhcnRJbmRleCArIHN0YXJ0U3ltYm9sTGVuZ3RoKSkgIT0gLTEpICkge1xyXG4gICAgICAgICAgaWYgKGluZGV4ICE9PSBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgICAgIGNvbmNhdC5wdXNoKHVuZXNjYXBlVGV4dCh0ZXh0LnN1YnN0cmluZyhpbmRleCwgc3RhcnRJbmRleCkpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGV4cCA9IHRleHQuc3Vic3RyaW5nKHN0YXJ0SW5kZXggKyBzdGFydFN5bWJvbExlbmd0aCwgZW5kSW5kZXgpO1xyXG4gICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChleHApO1xyXG4gICAgICAgICAgcGFyc2VGbnMucHVzaCgkcGFyc2UoZXhwLCBwYXJzZVN0cmluZ2lmeUludGVyY2VwdG9yKSk7XHJcbiAgICAgICAgICBpbmRleCA9IGVuZEluZGV4ICsgZW5kU3ltYm9sTGVuZ3RoO1xyXG4gICAgICAgICAgZXhwcmVzc2lvblBvc2l0aW9ucy5wdXNoKGNvbmNhdC5sZW5ndGgpO1xyXG4gICAgICAgICAgY29uY2F0LnB1c2goJycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyB3ZSBkaWQgbm90IGZpbmQgYW4gaW50ZXJwb2xhdGlvbiwgc28gd2UgaGF2ZSB0byBhZGQgdGhlIHJlbWFpbmRlciB0byB0aGUgc2VwYXJhdG9ycyBhcnJheVxyXG4gICAgICAgICAgaWYgKGluZGV4ICE9PSB0ZXh0TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbmNhdC5wdXNoKHVuZXNjYXBlVGV4dCh0ZXh0LnN1YnN0cmluZyhpbmRleCkpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ29uY2F0ZW5hdGluZyBleHByZXNzaW9ucyBtYWtlcyBpdCBoYXJkIHRvIHJlYXNvbiBhYm91dCB3aGV0aGVyIHNvbWUgY29tYmluYXRpb24gb2ZcclxuICAgICAgLy8gY29uY2F0ZW5hdGVkIHZhbHVlcyBhcmUgdW5zYWZlIHRvIHVzZSBhbmQgY291bGQgZWFzaWx5IGxlYWQgdG8gWFNTLiAgQnkgcmVxdWlyaW5nIHRoYXQgYVxyXG4gICAgICAvLyBzaW5nbGUgZXhwcmVzc2lvbiBiZSB1c2VkIGZvciBpZnJhbWVbc3JjXSwgb2JqZWN0W3NyY10sIGV0Yy4sIHdlIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZVxyXG4gICAgICAvLyB0aGF0J3MgdXNlZCBpcyBhc3NpZ25lZCBvciBjb25zdHJ1Y3RlZCBieSBzb21lIEpTIGNvZGUgc29tZXdoZXJlIHRoYXQgaXMgbW9yZSB0ZXN0YWJsZSBvclxyXG4gICAgICAvLyBtYWtlIGl0IG9idmlvdXMgdGhhdCB5b3UgYm91bmQgdGhlIHZhbHVlIHRvIHNvbWUgdXNlciBjb250cm9sbGVkIHZhbHVlLiAgVGhpcyBoZWxwcyByZWR1Y2VcclxuICAgICAgLy8gdGhlIGxvYWQgd2hlbiBhdWRpdGluZyBmb3IgWFNTIGlzc3Vlcy5cclxuICAgICAgaWYgKHRydXN0ZWRDb250ZXh0ICYmIGNvbmNhdC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICB0aHJvdyAkaW50ZXJwb2xhdGVNaW5FcnIoJ25vY29uY2F0JyxcclxuICAgICAgICAgICAgICBcIkVycm9yIHdoaWxlIGludGVycG9sYXRpbmc6IHswfVxcblN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIGRpc2FsbG93cyBcIiArXHJcbiAgICAgICAgICAgICAgXCJpbnRlcnBvbGF0aW9ucyB0aGF0IGNvbmNhdGVuYXRlIG11bHRpcGxlIGV4cHJlc3Npb25zIHdoZW4gYSB0cnVzdGVkIHZhbHVlIGlzIFwiICtcclxuICAgICAgICAgICAgICBcInJlcXVpcmVkLiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2VcIiwgdGV4dCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghbXVzdEhhdmVFeHByZXNzaW9uIHx8IGV4cHJlc3Npb25zLmxlbmd0aCkge1xyXG4gICAgICAgIHZhciBjb21wdXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XHJcbiAgICAgICAgICBmb3IodmFyIGkgPSAwLCBpaSA9IGV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGFsbE9yTm90aGluZyAmJiBpc1VuZGVmaW5lZCh2YWx1ZXNbaV0pKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbmNhdFtleHByZXNzaW9uUG9zaXRpb25zW2ldXSA9IHZhbHVlc1tpXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBjb25jYXQuam9pbignJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1c3RlZENvbnRleHQgP1xyXG4gICAgICAgICAgICAkc2NlLmdldFRydXN0ZWQodHJ1c3RlZENvbnRleHQsIHZhbHVlKSA6XHJcbiAgICAgICAgICAgICRzY2UudmFsdWVPZih2YWx1ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHN0cmluZ2lmeSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsgLy8gbnVsbCB8fCB1bmRlZmluZWRcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoge1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ251bWJlcic6IHtcclxuICAgICAgICAgICAgICB2YWx1ZSA9ICcnICsgdmFsdWU7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgIHZhbHVlID0gdG9Kc29uKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uIGludGVycG9sYXRpb25Gbihjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgdmFyIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KGlpKTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgZm9yICg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaV0gPSBwYXJzZUZuc1tpXShjb250ZXh0KTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiBjb21wdXRlKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG5ld0VyciA9ICRpbnRlcnBvbGF0ZU1pbkVycignaW50ZXJyJywgXCJDYW4ndCBpbnRlcnBvbGF0ZTogezB9XFxuezF9XCIsIHRleHQsXHJcbiAgICAgICAgICAgICAgICAgIGVyci50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihuZXdFcnIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfSwge1xyXG4gICAgICAgICAgLy8gYWxsIG9mIHRoZXNlIHByb3BlcnRpZXMgYXJlIHVuZG9jdW1lbnRlZCBmb3Igbm93XHJcbiAgICAgICAgICBleHA6IHRleHQsIC8vanVzdCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHJlZ3VsYXIgd2F0Y2hlcnMgY3JlYXRlZCB2aWEgJHdhdGNoXHJcbiAgICAgICAgICBleHByZXNzaW9uczogZXhwcmVzc2lvbnMsXHJcbiAgICAgICAgICAkJHdhdGNoRGVsZWdhdGU6IGZ1bmN0aW9uIChzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBzY29wZS4kd2F0Y2hHcm91cChwYXJzZUZucywgZnVuY3Rpb24gaW50ZXJwb2xhdGVGbldhdGNoZXIodmFsdWVzLCBvbGRWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICB2YXIgY3VyclZhbHVlID0gY29tcHV0ZSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBjdXJyVmFsdWUsIHZhbHVlcyAhPT0gb2xkVmFsdWVzID8gbGFzdFZhbHVlIDogY3VyclZhbHVlLCBzY29wZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGN1cnJWYWx1ZTtcclxuICAgICAgICAgICAgfSwgb2JqZWN0RXF1YWxpdHkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiB1bmVzY2FwZVRleHQodGV4dCkge1xyXG4gICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoZXNjYXBlZFN0YXJ0UmVnZXhwLCBzdGFydFN5bWJvbCkuXHJcbiAgICAgICAgICByZXBsYWNlKGVzY2FwZWRFbmRSZWdleHAsIGVuZFN5bWJvbCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHBhcnNlU3RyaW5naWZ5SW50ZXJjZXB0b3IodmFsdWUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgcmV0dXJuIHN0cmluZ2lmeShnZXRWYWx1ZSh2YWx1ZSkpO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICB2YXIgbmV3RXJyID0gJGludGVycG9sYXRlTWluRXJyKCdpbnRlcnInLCBcIkNhbid0IGludGVycG9sYXRlOiB7MH1cXG57MX1cIiwgdGV4dCxcclxuICAgICAgICAgICAgZXJyLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIobmV3RXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaW50ZXJwb2xhdGUjc3RhcnRTeW1ib2xcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU3ltYm9sIHRvIGRlbm90ZSB0aGUgc3RhcnQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYHt7YC5cclxuICAgICAqXHJcbiAgICAgKiBVc2Uge0BsaW5rIG5nLiRpbnRlcnBvbGF0ZVByb3ZpZGVyI3N0YXJ0U3ltYm9sIGAkaW50ZXJwb2xhdGVQcm92aWRlci5zdGFydFN5bWJvbGB9IHRvIGNoYW5nZVxyXG4gICAgICogdGhlIHN5bWJvbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzdGFydCBzeW1ib2wuXHJcbiAgICAgKi9cclxuICAgICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gc3RhcnRTeW1ib2w7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRpbnRlcnBvbGF0ZSNlbmRTeW1ib2xcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU3ltYm9sIHRvIGRlbm90ZSB0aGUgZW5kIG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB9fWAuXHJcbiAgICAgKlxyXG4gICAgICogVXNlIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciNlbmRTeW1ib2wgYCRpbnRlcnBvbGF0ZVByb3ZpZGVyLmVuZFN5bWJvbGB9IHRvIGNoYW5nZVxyXG4gICAgICogdGhlIHN5bWJvbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBlbmQgc3ltYm9sLlxyXG4gICAgICovXHJcbiAgICAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBlbmRTeW1ib2w7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiAkaW50ZXJwb2xhdGU7XHJcbiAgfV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uICRJbnRlcnZhbFByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckd2luZG93JywgJyRxJywgJyQkcScsXHJcbiAgICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAgICR3aW5kb3csICAgJHEsICAgJCRxKSB7XHJcbiAgICB2YXIgaW50ZXJ2YWxzID0ge307XHJcblxyXG5cclxuICAgICAvKipcclxuICAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICAqIEBuYW1lICRpbnRlcnZhbFxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICogQW5ndWxhcidzIHdyYXBwZXIgZm9yIGB3aW5kb3cuc2V0SW50ZXJ2YWxgLiBUaGUgYGZuYCBmdW5jdGlvbiBpcyBleGVjdXRlZCBldmVyeSBgZGVsYXlgXHJcbiAgICAgICogbWlsbGlzZWNvbmRzLlxyXG4gICAgICAqXHJcbiAgICAgICogVGhlIHJldHVybiB2YWx1ZSBvZiByZWdpc3RlcmluZyBhbiBpbnRlcnZhbCBmdW5jdGlvbiBpcyBhIHByb21pc2UuIFRoaXMgcHJvbWlzZSB3aWxsIGJlXHJcbiAgICAgICogbm90aWZpZWQgdXBvbiBlYWNoIHRpY2sgb2YgdGhlIGludGVydmFsLCBhbmQgd2lsbCBiZSByZXNvbHZlZCBhZnRlciBgY291bnRgIGl0ZXJhdGlvbnMsIG9yXHJcbiAgICAgICogcnVuIGluZGVmaW5pdGVseSBpZiBgY291bnRgIGlzIG5vdCBkZWZpbmVkLiBUaGUgdmFsdWUgb2YgdGhlIG5vdGlmaWNhdGlvbiB3aWxsIGJlIHRoZVxyXG4gICAgICAqIG51bWJlciBvZiBpdGVyYXRpb25zIHRoYXQgaGF2ZSBydW4uXHJcbiAgICAgICogVG8gY2FuY2VsIGFuIGludGVydmFsLCBjYWxsIGAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpYC5cclxuICAgICAgKlxyXG4gICAgICAqIEluIHRlc3RzIHlvdSBjYW4gdXNlIHtAbGluayBuZ01vY2suJGludGVydmFsI2ZsdXNoIGAkaW50ZXJ2YWwuZmx1c2gobWlsbGlzKWB9IHRvXHJcbiAgICAgICogbW92ZSBmb3J3YXJkIGJ5IGBtaWxsaXNgIG1pbGxpc2Vjb25kcyBhbmQgdHJpZ2dlciBhbnkgZnVuY3Rpb25zIHNjaGVkdWxlZCB0byBydW4gaW4gdGhhdFxyXG4gICAgICAqIHRpbWUuXHJcbiAgICAgICpcclxuICAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gICAgICAqICoqTm90ZSoqOiBJbnRlcnZhbHMgY3JlYXRlZCBieSB0aGlzIHNlcnZpY2UgbXVzdCBiZSBleHBsaWNpdGx5IGRlc3Ryb3llZCB3aGVuIHlvdSBhcmUgZmluaXNoZWRcclxuICAgICAgKiB3aXRoIHRoZW0uICBJbiBwYXJ0aWN1bGFyIHRoZXkgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IGRlc3Ryb3llZCB3aGVuIGEgY29udHJvbGxlcidzIHNjb3BlIG9yIGFcclxuICAgICAgKiBkaXJlY3RpdmUncyBlbGVtZW50IGFyZSBkZXN0cm95ZWQuXHJcbiAgICAgICogWW91IHNob3VsZCB0YWtlIHRoaXMgaW50byBjb25zaWRlcmF0aW9uIGFuZCBtYWtlIHN1cmUgdG8gYWx3YXlzIGNhbmNlbCB0aGUgaW50ZXJ2YWwgYXQgdGhlXHJcbiAgICAgICogYXBwcm9wcmlhdGUgbW9tZW50LiAgU2VlIHRoZSBleGFtcGxlIGJlbG93IGZvciBtb3JlIGRldGFpbHMgb24gaG93IGFuZCB3aGVuIHRvIGRvIHRoaXMuXHJcbiAgICAgICogPC9kaXY+XHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkIHJlcGVhdGVkbHkuXHJcbiAgICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IE51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiBlYWNoIGZ1bmN0aW9uIGNhbGwuXHJcbiAgICAgICogQHBhcmFtIHtudW1iZXI9fSBbY291bnQ9MF0gTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdC4gSWYgbm90IHNldCwgb3IgMCwgd2lsbCByZXBlYXRcclxuICAgICAgKiAgIGluZGVmaW5pdGVseS5cclxuICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW52b2tlQXBwbHk9dHJ1ZV0gSWYgc2V0IHRvIGBmYWxzZWAgc2tpcHMgbW9kZWwgZGlydHkgY2hlY2tpbmcsIG90aGVyd2lzZVxyXG4gICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxyXG4gICAgICAqIEByZXR1cm5zIHtwcm9taXNlfSBBIHByb21pc2Ugd2hpY2ggd2lsbCBiZSBub3RpZmllZCBvbiBlYWNoIGl0ZXJhdGlvbi5cclxuICAgICAgKlxyXG4gICAgICAqIEBleGFtcGxlXHJcbiAgICAgICogPGV4YW1wbGUgbW9kdWxlPVwiaW50ZXJ2YWxFeGFtcGxlXCI+XHJcbiAgICAgICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgKiAgIDxzY3JpcHQ+XHJcbiAgICAgICogICAgIGFuZ3VsYXIubW9kdWxlKCdpbnRlcnZhbEV4YW1wbGUnLCBbXSlcclxuICAgICAgKiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckaW50ZXJ2YWwnLFxyXG4gICAgICAqICAgICAgICAgZnVuY3Rpb24oJHNjb3BlLCAkaW50ZXJ2YWwpIHtcclxuICAgICAgKiAgICAgICAgICAgJHNjb3BlLmZvcm1hdCA9ICdNL2QveXkgaDptbTpzcyBhJztcclxuICAgICAgKiAgICAgICAgICAgJHNjb3BlLmJsb29kXzEgPSAxMDA7XHJcbiAgICAgICogICAgICAgICAgICRzY29wZS5ibG9vZF8yID0gMTIwO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAgIHZhciBzdG9wO1xyXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuZmlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgKiAgICAgICAgICAgICAvLyBEb24ndCBzdGFydCBhIG5ldyBmaWdodCBpZiB3ZSBhcmUgYWxyZWFkeSBmaWdodGluZ1xyXG4gICAgICAqICAgICAgICAgICAgIGlmICggYW5ndWxhci5pc0RlZmluZWQoc3RvcCkgKSByZXR1cm47XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgICAgc3RvcCA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgKiAgICAgICAgICAgICBpZiAoJHNjb3BlLmJsb29kXzEgPiAwICYmICRzY29wZS5ibG9vZF8yID4gMCkge1xyXG4gICAgICAqICAgICAgICAgICAgICAgJHNjb3BlLmJsb29kXzEgPSAkc2NvcGUuYmxvb2RfMSAtIDM7XHJcbiAgICAgICogICAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9ICRzY29wZS5ibG9vZF8yIC0gNDtcclxuICAgICAgKiAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAqICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BGaWdodCgpO1xyXG4gICAgICAqICAgICAgICAgICAgIH1cclxuICAgICAgKiAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgKiAgICAgICAgIH07XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgICRzY29wZS5zdG9wRmlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgKiAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHN0b3ApKSB7XHJcbiAgICAgICogICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChzdG9wKTtcclxuICAgICAgKiAgICAgICAgICAgICBzdG9wID0gdW5kZWZpbmVkO1xyXG4gICAgICAqICAgICAgICAgICB9XHJcbiAgICAgICogICAgICAgICB9O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAkc2NvcGUucmVzZXRGaWdodCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9IDEwMDtcclxuICAgICAgKiAgICAgICAgICAgJHNjb3BlLmJsb29kXzIgPSAxMjA7XHJcbiAgICAgICogICAgICAgICB9O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAqICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaW50ZXJ2YWwgaXMgZGVzdHJveWVkIHRvb1xyXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0KCk7XHJcbiAgICAgICogICAgICAgICB9KTtcclxuICAgICAgKiAgICAgICB9XSlcclxuICAgICAgKiAgICAgICAvLyBSZWdpc3RlciB0aGUgJ215Q3VycmVudFRpbWUnIGRpcmVjdGl2ZSBmYWN0b3J5IG1ldGhvZC5cclxuICAgICAgKiAgICAgICAvLyBXZSBpbmplY3QgJGludGVydmFsIGFuZCBkYXRlRmlsdGVyIHNlcnZpY2Ugc2luY2UgdGhlIGZhY3RvcnkgbWV0aG9kIGlzIERJLlxyXG4gICAgICAqICAgICAgIC5kaXJlY3RpdmUoJ215Q3VycmVudFRpbWUnLCBbJyRpbnRlcnZhbCcsICdkYXRlRmlsdGVyJyxcclxuICAgICAgKiAgICAgICAgIGZ1bmN0aW9uKCRpbnRlcnZhbCwgZGF0ZUZpbHRlcikge1xyXG4gICAgICAqICAgICAgICAgICAvLyByZXR1cm4gdGhlIGRpcmVjdGl2ZSBsaW5rIGZ1bmN0aW9uLiAoY29tcGlsZSBmdW5jdGlvbiBub3QgbmVlZGVkKVxyXG4gICAgICAqICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICogICAgICAgICAgICAgdmFyIGZvcm1hdCwgIC8vIGRhdGUgZm9ybWF0XHJcbiAgICAgICogICAgICAgICAgICAgICAgIHN0b3BUaW1lOyAvLyBzbyB0aGF0IHdlIGNhbiBjYW5jZWwgdGhlIHRpbWUgdXBkYXRlc1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAgICAgLy8gdXNlZCB0byB1cGRhdGUgdGhlIFVJXHJcbiAgICAgICogICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlVGltZSgpIHtcclxuICAgICAgKiAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dChkYXRlRmlsdGVyKG5ldyBEYXRlKCksIGZvcm1hdCkpO1xyXG4gICAgICAqICAgICAgICAgICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICAgIC8vIHdhdGNoIHRoZSBleHByZXNzaW9uLCBhbmQgdXBkYXRlIHRoZSBVSSBvbiBjaGFuZ2UuXHJcbiAgICAgICogICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLm15Q3VycmVudFRpbWUsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICogICAgICAgICAgICAgICBmb3JtYXQgPSB2YWx1ZTtcclxuICAgICAgKiAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoKTtcclxuICAgICAgKiAgICAgICAgICAgICB9KTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICAgIHN0b3BUaW1lID0gJGludGVydmFsKHVwZGF0ZVRpbWUsIDEwMDApO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAgICAgLy8gbGlzdGVuIG9uIERPTSBkZXN0cm95IChyZW1vdmFsKSBldmVudCwgYW5kIGNhbmNlbCB0aGUgbmV4dCBVSSB1cGRhdGVcclxuICAgICAgKiAgICAgICAgICAgICAvLyB0byBwcmV2ZW50IHVwZGF0aW5nIHRpbWUgYWZ0ZXIgdGhlIERPTSBlbGVtZW50IHdhcyByZW1vdmVkLlxyXG4gICAgICAqICAgICAgICAgICAgIGVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICogICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHN0b3BUaW1lKTtcclxuICAgICAgKiAgICAgICAgICAgICB9KTtcclxuICAgICAgKiAgICAgICAgICAgfVxyXG4gICAgICAqICAgICAgICAgfV0pO1xyXG4gICAgICAqICAgPC9zY3JpcHQ+XHJcbiAgICAgICpcclxuICAgICAgKiAgIDxkaXY+XHJcbiAgICAgICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICogICAgICAgRGF0ZSBmb3JtYXQ6IDxpbnB1dCBuZy1tb2RlbD1cImZvcm1hdFwiPiA8aHIvPlxyXG4gICAgICAqICAgICAgIEN1cnJlbnQgdGltZSBpczogPHNwYW4gbXktY3VycmVudC10aW1lPVwiZm9ybWF0XCI+PC9zcGFuPlxyXG4gICAgICAqICAgICAgIDxoci8+XHJcbiAgICAgICogICAgICAgQmxvb2QgMSA6IDxmb250IGNvbG9yPSdyZWQnPnt7Ymxvb2RfMX19PC9mb250PlxyXG4gICAgICAqICAgICAgIEJsb29kIDIgOiA8Zm9udCBjb2xvcj0ncmVkJz57e2Jsb29kXzJ9fTwvZm9udD5cclxuICAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwiZmlnaHQoKVwiPkZpZ2h0PC9idXR0b24+XHJcbiAgICAgICogICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1uZy1jbGljaz1cInN0b3BGaWdodCgpXCI+U3RvcEZpZ2h0PC9idXR0b24+XHJcbiAgICAgICogICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1uZy1jbGljaz1cInJlc2V0RmlnaHQoKVwiPnJlc2V0RmlnaHQ8L2J1dHRvbj5cclxuICAgICAgKiAgICAgPC9kaXY+XHJcbiAgICAgICogICA8L2Rpdj5cclxuICAgICAgKlxyXG4gICAgICAqIDwvZmlsZT5cclxuICAgICAgKiA8L2V4YW1wbGU+XHJcbiAgICAgICovXHJcbiAgICBmdW5jdGlvbiBpbnRlcnZhbChmbiwgZGVsYXksIGNvdW50LCBpbnZva2VBcHBseSkge1xyXG4gICAgICB2YXIgc2V0SW50ZXJ2YWwgPSAkd2luZG93LnNldEludGVydmFsLFxyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCA9ICR3aW5kb3cuY2xlYXJJbnRlcnZhbCxcclxuICAgICAgICAgIGl0ZXJhdGlvbiA9IDAsXHJcbiAgICAgICAgICBza2lwQXBwbHkgPSAoaXNEZWZpbmVkKGludm9rZUFwcGx5KSAmJiAhaW52b2tlQXBwbHkpLFxyXG4gICAgICAgICAgZGVmZXJyZWQgPSAoc2tpcEFwcGx5ID8gJCRxIDogJHEpLmRlZmVyKCksXHJcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcclxuXHJcbiAgICAgIGNvdW50ID0gaXNEZWZpbmVkKGNvdW50KSA/IGNvdW50IDogMDtcclxuXHJcbiAgICAgIHByb21pc2UudGhlbihudWxsLCBudWxsLCBmbik7XHJcblxyXG4gICAgICBwcm9taXNlLiQkaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uIHRpY2soKSB7XHJcbiAgICAgICAgZGVmZXJyZWQubm90aWZ5KGl0ZXJhdGlvbisrKTtcclxuXHJcbiAgICAgICAgaWYgKGNvdW50ID4gMCAmJiBpdGVyYXRpb24gPj0gY291bnQpIHtcclxuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaXRlcmF0aW9uKTtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwocHJvbWlzZS4kJGludGVydmFsSWQpO1xyXG4gICAgICAgICAgZGVsZXRlIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNraXBBcHBseSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcclxuXHJcbiAgICAgIH0sIGRlbGF5KTtcclxuXHJcbiAgICAgIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF0gPSBkZWZlcnJlZDtcclxuXHJcbiAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAqIEBuYW1lICRpbnRlcnZhbCNjYW5jZWxcclxuICAgICAgKlxyXG4gICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLlxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtIHtwcm9taXNlfSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZSBgJGludGVydmFsYCBmdW5jdGlvbi5cclxuICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgd2FzIHN1Y2Nlc3NmdWxseSBjYW5jZWxlZC5cclxuICAgICAgKi9cclxuICAgIGludGVydmFsLmNhbmNlbCA9IGZ1bmN0aW9uKHByb21pc2UpIHtcclxuICAgICAgaWYgKHByb21pc2UgJiYgcHJvbWlzZS4kJGludGVydmFsSWQgaW4gaW50ZXJ2YWxzKSB7XHJcbiAgICAgICAgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXS5yZWplY3QoJ2NhbmNlbGVkJyk7XHJcbiAgICAgICAgJHdpbmRvdy5jbGVhckludGVydmFsKHByb21pc2UuJCRpbnRlcnZhbElkKTtcclxuICAgICAgICBkZWxldGUgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBpbnRlcnZhbDtcclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRsb2NhbGVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqICRsb2NhbGUgc2VydmljZSBwcm92aWRlcyBsb2NhbGl6YXRpb24gcnVsZXMgZm9yIHZhcmlvdXMgQW5ndWxhciBjb21wb25lbnRzLiBBcyBvZiByaWdodCBub3cgdGhlXHJcbiAqIG9ubHkgcHVibGljIGFwaSBpczpcclxuICpcclxuICogKiBgaWRgIOKAkyBge3N0cmluZ31gIOKAkyBsb2NhbGUgaWQgZm9ybWF0dGVkIGFzIGBsYW5ndWFnZUlkLWNvdW50cnlJZGAgKGUuZy4gYGVuLXVzYClcclxuICovXHJcbmZ1bmN0aW9uICRMb2NhbGVQcm92aWRlcigpe1xyXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6ICdlbi11cycsXHJcblxyXG4gICAgICBOVU1CRVJfRk9STUFUUzoge1xyXG4gICAgICAgIERFQ0lNQUxfU0VQOiAnLicsXHJcbiAgICAgICAgR1JPVVBfU0VQOiAnLCcsXHJcbiAgICAgICAgUEFUVEVSTlM6IFtcclxuICAgICAgICAgIHsgLy8gRGVjaW1hbCBQYXR0ZXJuXHJcbiAgICAgICAgICAgIG1pbkludDogMSxcclxuICAgICAgICAgICAgbWluRnJhYzogMCxcclxuICAgICAgICAgICAgbWF4RnJhYzogMyxcclxuICAgICAgICAgICAgcG9zUHJlOiAnJyxcclxuICAgICAgICAgICAgcG9zU3VmOiAnJyxcclxuICAgICAgICAgICAgbmVnUHJlOiAnLScsXHJcbiAgICAgICAgICAgIG5lZ1N1ZjogJycsXHJcbiAgICAgICAgICAgIGdTaXplOiAzLFxyXG4gICAgICAgICAgICBsZ1NpemU6IDNcclxuICAgICAgICAgIH0seyAvL0N1cnJlbmN5IFBhdHRlcm5cclxuICAgICAgICAgICAgbWluSW50OiAxLFxyXG4gICAgICAgICAgICBtaW5GcmFjOiAyLFxyXG4gICAgICAgICAgICBtYXhGcmFjOiAyLFxyXG4gICAgICAgICAgICBwb3NQcmU6ICdcXHUwMEE0JyxcclxuICAgICAgICAgICAgcG9zU3VmOiAnJyxcclxuICAgICAgICAgICAgbmVnUHJlOiAnKFxcdTAwQTQnLFxyXG4gICAgICAgICAgICBuZWdTdWY6ICcpJyxcclxuICAgICAgICAgICAgZ1NpemU6IDMsXHJcbiAgICAgICAgICAgIGxnU2l6ZTogM1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgQ1VSUkVOQ1lfU1lNOiAnJCdcclxuICAgICAgfSxcclxuXHJcbiAgICAgIERBVEVUSU1FX0ZPUk1BVFM6IHtcclxuICAgICAgICBNT05USDpcclxuICAgICAgICAgICAgJ0phbnVhcnksRmVicnVhcnksTWFyY2gsQXByaWwsTWF5LEp1bmUsSnVseSxBdWd1c3QsU2VwdGVtYmVyLE9jdG9iZXIsTm92ZW1iZXIsRGVjZW1iZXInXHJcbiAgICAgICAgICAgIC5zcGxpdCgnLCcpLFxyXG4gICAgICAgIFNIT1JUTU9OVEg6ICAnSmFuLEZlYixNYXIsQXByLE1heSxKdW4sSnVsLEF1ZyxTZXAsT2N0LE5vdixEZWMnLnNwbGl0KCcsJyksXHJcbiAgICAgICAgREFZOiAnU3VuZGF5LE1vbmRheSxUdWVzZGF5LFdlZG5lc2RheSxUaHVyc2RheSxGcmlkYXksU2F0dXJkYXknLnNwbGl0KCcsJyksXHJcbiAgICAgICAgU0hPUlREQVk6ICdTdW4sTW9uLFR1ZSxXZWQsVGh1LEZyaSxTYXQnLnNwbGl0KCcsJyksXHJcbiAgICAgICAgQU1QTVM6IFsnQU0nLCdQTSddLFxyXG4gICAgICAgIG1lZGl1bTogJ01NTSBkLCB5IGg6bW06c3MgYScsXHJcbiAgICAgICAgc2hvcnQ6ICdNL2QveXkgaDptbSBhJyxcclxuICAgICAgICBmdWxsRGF0ZTogJ0VFRUUsIE1NTU0gZCwgeScsXHJcbiAgICAgICAgbG9uZ0RhdGU6ICdNTU1NIGQsIHknLFxyXG4gICAgICAgIG1lZGl1bURhdGU6ICdNTU0gZCwgeScsXHJcbiAgICAgICAgc2hvcnREYXRlOiAnTS9kL3l5JyxcclxuICAgICAgICBtZWRpdW1UaW1lOiAnaDptbTpzcyBhJyxcclxuICAgICAgICBzaG9ydFRpbWU6ICdoOm1tIGEnXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBwbHVyYWxDYXQ6IGZ1bmN0aW9uKG51bSkge1xyXG4gICAgICAgIGlmIChudW0gPT09IDEpIHtcclxuICAgICAgICAgIHJldHVybiAnb25lJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdvdGhlcic7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfTtcclxufVxyXG5cclxudmFyIFBBVEhfTUFUQ0ggPSAvXihbXlxcPyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyxcclxuICAgIERFRkFVTFRfUE9SVFMgPSB7J2h0dHAnOiA4MCwgJ2h0dHBzJzogNDQzLCAnZnRwJzogMjF9O1xyXG52YXIgJGxvY2F0aW9uTWluRXJyID0gbWluRXJyKCckbG9jYXRpb24nKTtcclxuXHJcblxyXG4vKipcclxuICogRW5jb2RlIHBhdGggdXNpbmcgZW5jb2RlVXJpU2VnbWVudCwgaWdub3JpbmcgZm9yd2FyZCBzbGFzaGVzXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdG8gZW5jb2RlXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVQYXRoKHBhdGgpIHtcclxuICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJyksXHJcbiAgICAgIGkgPSBzZWdtZW50cy5sZW5ndGg7XHJcblxyXG4gIHdoaWxlIChpLS0pIHtcclxuICAgIHNlZ21lbnRzW2ldID0gZW5jb2RlVXJpU2VnbWVudChzZWdtZW50c1tpXSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc2VnbWVudHMuam9pbignLycpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZUFic29sdXRlVXJsKGFic29sdXRlVXJsLCBsb2NhdGlvbk9iaiwgYXBwQmFzZSkge1xyXG4gIHZhciBwYXJzZWRVcmwgPSB1cmxSZXNvbHZlKGFic29sdXRlVXJsLCBhcHBCYXNlKTtcclxuXHJcbiAgbG9jYXRpb25PYmouJCRwcm90b2NvbCA9IHBhcnNlZFVybC5wcm90b2NvbDtcclxuICBsb2NhdGlvbk9iai4kJGhvc3QgPSBwYXJzZWRVcmwuaG9zdG5hbWU7XHJcbiAgbG9jYXRpb25PYmouJCRwb3J0ID0gaW50KHBhcnNlZFVybC5wb3J0KSB8fCBERUZBVUxUX1BPUlRTW3BhcnNlZFVybC5wcm90b2NvbF0gfHwgbnVsbDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHBhcnNlQXBwVXJsKHJlbGF0aXZlVXJsLCBsb2NhdGlvbk9iaiwgYXBwQmFzZSkge1xyXG4gIHZhciBwcmVmaXhlZCA9IChyZWxhdGl2ZVVybC5jaGFyQXQoMCkgIT09ICcvJyk7XHJcbiAgaWYgKHByZWZpeGVkKSB7XHJcbiAgICByZWxhdGl2ZVVybCA9ICcvJyArIHJlbGF0aXZlVXJsO1xyXG4gIH1cclxuICB2YXIgbWF0Y2ggPSB1cmxSZXNvbHZlKHJlbGF0aXZlVXJsLCBhcHBCYXNlKTtcclxuICBsb2NhdGlvbk9iai4kJHBhdGggPSBkZWNvZGVVUklDb21wb25lbnQocHJlZml4ZWQgJiYgbWF0Y2gucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycgP1xyXG4gICAgICBtYXRjaC5wYXRobmFtZS5zdWJzdHJpbmcoMSkgOiBtYXRjaC5wYXRobmFtZSk7XHJcbiAgbG9jYXRpb25PYmouJCRzZWFyY2ggPSBwYXJzZUtleVZhbHVlKG1hdGNoLnNlYXJjaCk7XHJcbiAgbG9jYXRpb25PYmouJCRoYXNoID0gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoLmhhc2gpO1xyXG5cclxuICAvLyBtYWtlIHN1cmUgcGF0aCBzdGFydHMgd2l0aCAnLyc7XHJcbiAgaWYgKGxvY2F0aW9uT2JqLiQkcGF0aCAmJiBsb2NhdGlvbk9iai4kJHBhdGguY2hhckF0KDApICE9ICcvJykge1xyXG4gICAgbG9jYXRpb25PYmouJCRwYXRoID0gJy8nICsgbG9jYXRpb25PYmouJCRwYXRoO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gYmVnaW5cclxuICogQHBhcmFtIHtzdHJpbmd9IHdob2xlXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHJldHVybnMgdGV4dCBmcm9tIHdob2xlIGFmdGVyIGJlZ2luIG9yIHVuZGVmaW5lZCBpZiBpdCBkb2VzIG5vdCBiZWdpbiB3aXRoXHJcbiAqICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkIHN0cmluZy5cclxuICovXHJcbmZ1bmN0aW9uIGJlZ2luc1dpdGgoYmVnaW4sIHdob2xlKSB7XHJcbiAgaWYgKHdob2xlLmluZGV4T2YoYmVnaW4pID09PSAwKSB7XHJcbiAgICByZXR1cm4gd2hvbGUuc3Vic3RyKGJlZ2luLmxlbmd0aCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc3RyaXBIYXNoKHVybCkge1xyXG4gIHZhciBpbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XHJcbiAgcmV0dXJuIGluZGV4ID09IC0xID8gdXJsIDogdXJsLnN1YnN0cigwLCBpbmRleCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzdHJpcEZpbGUodXJsKSB7XHJcbiAgcmV0dXJuIHVybC5zdWJzdHIoMCwgc3RyaXBIYXNoKHVybCkubGFzdEluZGV4T2YoJy8nKSArIDEpO1xyXG59XHJcblxyXG4vKiByZXR1cm4gdGhlIHNlcnZlciBvbmx5IChzY2hlbWU6Ly9ob3N0OnBvcnQpICovXHJcbmZ1bmN0aW9uIHNlcnZlckJhc2UodXJsKSB7XHJcbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoMCwgdXJsLmluZGV4T2YoJy8nLCB1cmwuaW5kZXhPZignLy8nKSArIDIpKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBMb2NhdGlvbkh0bWw1VXJsIHJlcHJlc2VudHMgYW4gdXJsXHJcbiAqIFRoaXMgb2JqZWN0IGlzIGV4cG9zZWQgYXMgJGxvY2F0aW9uIHNlcnZpY2Ugd2hlbiBIVE1MNSBtb2RlIGlzIGVuYWJsZWQgYW5kIHN1cHBvcnRlZFxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2UgYXBwbGljYXRpb24gYmFzZSBVUkxcclxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VQcmVmaXggdXJsIHBhdGggcHJlZml4XHJcbiAqL1xyXG5mdW5jdGlvbiBMb2NhdGlvbkh0bWw1VXJsKGFwcEJhc2UsIGJhc2VQcmVmaXgpIHtcclxuICB0aGlzLiQkaHRtbDUgPSB0cnVlO1xyXG4gIGJhc2VQcmVmaXggPSBiYXNlUHJlZml4IHx8ICcnO1xyXG4gIHZhciBhcHBCYXNlTm9GaWxlID0gc3RyaXBGaWxlKGFwcEJhc2UpO1xyXG4gIHBhcnNlQWJzb2x1dGVVcmwoYXBwQmFzZSwgdGhpcywgYXBwQmFzZSk7XHJcblxyXG5cclxuICAvKipcclxuICAgKiBQYXJzZSBnaXZlbiBodG1sNSAocmVndWxhcikgdXJsIHN0cmluZyBpbnRvIHByb3BlcnRpZXNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3QWJzb2x1dGVVcmwgSFRNTDUgdXJsXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcclxuICAgIHZhciBwYXRoVXJsID0gYmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLCB1cmwpO1xyXG4gICAgaWYgKCFpc1N0cmluZyhwYXRoVXJsKSkge1xyXG4gICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2lwdGhwcmZ4JywgJ0ludmFsaWQgdXJsIFwiezB9XCIsIG1pc3NpbmcgcGF0aCBwcmVmaXggXCJ7MX1cIi4nLCB1cmwsXHJcbiAgICAgICAgICBhcHBCYXNlTm9GaWxlKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUFwcFVybChwYXRoVXJsLCB0aGlzLCBhcHBCYXNlKTtcclxuXHJcbiAgICBpZiAoIXRoaXMuJCRwYXRoKSB7XHJcbiAgICAgIHRoaXMuJCRwYXRoID0gJy8nO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJCRjb21wb3NlKCk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcG9zZSB1cmwgYW5kIHVwZGF0ZSBgYWJzVXJsYCBwcm9wZXJ0eVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgdGhpcy4kJGNvbXBvc2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWFyY2ggPSB0b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLFxyXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XHJcblxyXG4gICAgdGhpcy4kJHVybCA9IGVuY29kZVBhdGgodGhpcy4kJHBhdGgpICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIGhhc2g7XHJcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZU5vRmlsZSArIHRoaXMuJCR1cmwuc3Vic3RyKDEpOyAvLyBmaXJzdCBjaGFyIGlzIGFsd2F5cyAnLydcclxuICB9O1xyXG5cclxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XHJcbiAgICBpZiAocmVsSHJlZiAmJiByZWxIcmVmWzBdID09PSAnIycpIHtcclxuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBsaW5rcyB0byBoYXNoIGZyYWdtZW50czpcclxuICAgICAgLy8ga2VlcCB0aGUgb2xkIHVybCBhbmQgb25seSByZXBsYWNlIHRoZSBoYXNoIGZyYWdtZW50XHJcbiAgICAgIHRoaXMuaGFzaChyZWxIcmVmLnNsaWNlKDEpKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgYXBwVXJsLCBwcmV2QXBwVXJsO1xyXG4gICAgdmFyIHJld3JpdHRlblVybDtcclxuXHJcbiAgICBpZiAoIChhcHBVcmwgPSBiZWdpbnNXaXRoKGFwcEJhc2UsIHVybCkpICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgIHByZXZBcHBVcmwgPSBhcHBVcmw7XHJcbiAgICAgIGlmICggKGFwcFVybCA9IGJlZ2luc1dpdGgoYmFzZVByZWZpeCwgYXBwVXJsKSkgIT09IHVuZGVmaW5lZCApIHtcclxuICAgICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlICsgKGJlZ2luc1dpdGgoJy8nLCBhcHBVcmwpIHx8IGFwcFVybCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZSArIHByZXZBcHBVcmw7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoIChhcHBVcmwgPSBiZWdpbnNXaXRoKGFwcEJhc2VOb0ZpbGUsIHVybCkpICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGUgKyBhcHBVcmw7XHJcbiAgICB9IGVsc2UgaWYgKGFwcEJhc2VOb0ZpbGUgPT0gdXJsICsgJy8nKSB7XHJcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGU7XHJcbiAgICB9XHJcbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XHJcbiAgICAgIHRoaXMuJCRwYXJzZShyZXdyaXR0ZW5VcmwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIHVybFxyXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gZGV2ZWxvcGVyIGRvZXNuJ3Qgb3B0IGludG8gaHRtbDUgbW9kZS5cclxuICogSXQgYWxzbyBzZXJ2ZXMgYXMgdGhlIGJhc2UgY2xhc3MgZm9yIGh0bWw1IG1vZGUgZmFsbGJhY2sgb24gbGVnYWN5IGJyb3dzZXJzLlxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2UgYXBwbGljYXRpb24gYmFzZSBVUkxcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2hQcmVmaXggaGFzaGJhbmcgcHJlZml4XHJcbiAqL1xyXG5mdW5jdGlvbiBMb2NhdGlvbkhhc2hiYW5nVXJsKGFwcEJhc2UsIGhhc2hQcmVmaXgpIHtcclxuICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcclxuXHJcbiAgcGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLCB0aGlzLCBhcHBCYXNlKTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIGdpdmVuIGhhc2hiYW5nIHVybCBpbnRvIHByb3BlcnRpZXNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIEhhc2hiYW5nIHVybFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgdGhpcy4kJHBhcnNlID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgICB2YXIgd2l0aG91dEJhc2VVcmwgPSBiZWdpbnNXaXRoKGFwcEJhc2UsIHVybCkgfHwgYmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLCB1cmwpO1xyXG4gICAgdmFyIHdpdGhvdXRIYXNoVXJsID0gd2l0aG91dEJhc2VVcmwuY2hhckF0KDApID09ICcjJ1xyXG4gICAgICAgID8gYmVnaW5zV2l0aChoYXNoUHJlZml4LCB3aXRob3V0QmFzZVVybClcclxuICAgICAgICA6ICh0aGlzLiQkaHRtbDUpXHJcbiAgICAgICAgICA/IHdpdGhvdXRCYXNlVXJsXHJcbiAgICAgICAgICA6ICcnO1xyXG5cclxuICAgIGlmICghaXNTdHJpbmcod2l0aG91dEhhc2hVcmwpKSB7XHJcbiAgICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignaWhzaHByZngnLCAnSW52YWxpZCB1cmwgXCJ7MH1cIiwgbWlzc2luZyBoYXNoIHByZWZpeCBcInsxfVwiLicsIHVybCxcclxuICAgICAgICAgIGhhc2hQcmVmaXgpO1xyXG4gICAgfVxyXG4gICAgcGFyc2VBcHBVcmwod2l0aG91dEhhc2hVcmwsIHRoaXMsIGFwcEJhc2UpO1xyXG5cclxuICAgIHRoaXMuJCRwYXRoID0gcmVtb3ZlV2luZG93c0RyaXZlTmFtZSh0aGlzLiQkcGF0aCwgd2l0aG91dEhhc2hVcmwsIGFwcEJhc2UpO1xyXG5cclxuICAgIHRoaXMuJCRjb21wb3NlKCk7XHJcblxyXG4gICAgLypcclxuICAgICAqIEluIFdpbmRvd3MsIG9uIGFuIGFuY2hvciBub2RlIG9uIGRvY3VtZW50cyBsb2FkZWQgZnJvbVxyXG4gICAgICogdGhlIGZpbGVzeXN0ZW0sIHRoZSBicm93c2VyIHdpbGwgcmV0dXJuIGEgcGF0aG5hbWVcclxuICAgICAqIHByZWZpeGVkIHdpdGggdGhlIGRyaXZlIG5hbWUgKCcvQzovcGF0aCcpIHdoZW4gYVxyXG4gICAgICogcGF0aG5hbWUgd2l0aG91dCBhIGRyaXZlIGlzIHNldDpcclxuICAgICAqICAqIGEuc2V0QXR0cmlidXRlKCdocmVmJywgJy9mb28nKVxyXG4gICAgICogICAqIGEucGF0aG5hbWUgPT09ICcvQzovZm9vJyAvL3RydWVcclxuICAgICAqXHJcbiAgICAgKiBJbnNpZGUgb2YgQW5ndWxhciwgd2UncmUgYWx3YXlzIHVzaW5nIHBhdGhuYW1lcyB0aGF0XHJcbiAgICAgKiBkbyBub3QgaW5jbHVkZSBkcml2ZSBuYW1lcyBmb3Igcm91dGluZy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVtb3ZlV2luZG93c0RyaXZlTmFtZSAocGF0aCwgdXJsLCBiYXNlKSB7XHJcbiAgICAgIC8qXHJcbiAgICAgIE1hdGNoZXMgcGF0aHMgZm9yIGZpbGUgcHJvdG9jb2wgb24gd2luZG93cyxcclxuICAgICAgc3VjaCBhcyAvQzovZm9vL2JhciwgYW5kIGNhcHR1cmVzIG9ubHkgL2Zvby9iYXIuXHJcbiAgICAgICovXHJcbiAgICAgIHZhciB3aW5kb3dzRmlsZVBhdGhFeHAgPSAvXlxcL1tBLVpdOihcXC8uKikvO1xyXG5cclxuICAgICAgdmFyIGZpcnN0UGF0aFNlZ21lbnRNYXRjaDtcclxuXHJcbiAgICAgIC8vR2V0IHRoZSByZWxhdGl2ZSBwYXRoIGZyb20gdGhlIGlucHV0IFVSTC5cclxuICAgICAgaWYgKHVybC5pbmRleE9mKGJhc2UpID09PSAwKSB7XHJcbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoYmFzZSwgJycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUaGUgaW5wdXQgVVJMIGludGVudGlvbmFsbHkgY29udGFpbnMgYSBmaXJzdCBwYXRoIHNlZ21lbnQgdGhhdCBlbmRzIHdpdGggYSBjb2xvbi5cclxuICAgICAgaWYgKHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHVybCkpIHtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZmlyc3RQYXRoU2VnbWVudE1hdGNoID0gd2luZG93c0ZpbGVQYXRoRXhwLmV4ZWMocGF0aCk7XHJcbiAgICAgIHJldHVybiBmaXJzdFBhdGhTZWdtZW50TWF0Y2ggPyBmaXJzdFBhdGhTZWdtZW50TWF0Y2hbMV0gOiBwYXRoO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXBvc2UgaGFzaGJhbmcgdXJsIGFuZCB1cGRhdGUgYGFic1VybGAgcHJvcGVydHlcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2VhcmNoID0gdG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxcclxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xyXG5cclxuICAgIHRoaXMuJCR1cmwgPSBlbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyBoYXNoO1xyXG4gICAgdGhpcy4kJGFic1VybCA9IGFwcEJhc2UgKyAodGhpcy4kJHVybCA/IGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsIDogJycpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJCRwYXJzZUxpbmtVcmwgPSBmdW5jdGlvbih1cmwsIHJlbEhyZWYpIHtcclxuICAgIGlmKHN0cmlwSGFzaChhcHBCYXNlKSA9PSBzdHJpcEhhc2godXJsKSkge1xyXG4gICAgICB0aGlzLiQkcGFyc2UodXJsKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBMb2NhdGlvbkhhc2hiYW5nVXJsIHJlcHJlc2VudHMgdXJsXHJcbiAqIFRoaXMgb2JqZWN0IGlzIGV4cG9zZWQgYXMgJGxvY2F0aW9uIHNlcnZpY2Ugd2hlbiBodG1sNSBoaXN0b3J5IGFwaSBpcyBlbmFibGVkIGJ1dCB0aGUgYnJvd3NlclxyXG4gKiBkb2VzIG5vdCBzdXBwb3J0IGl0LlxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2UgYXBwbGljYXRpb24gYmFzZSBVUkxcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2hQcmVmaXggaGFzaGJhbmcgcHJlZml4XHJcbiAqL1xyXG5mdW5jdGlvbiBMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybChhcHBCYXNlLCBoYXNoUHJlZml4KSB7XHJcbiAgdGhpcy4kJGh0bWw1ID0gdHJ1ZTtcclxuICBMb2NhdGlvbkhhc2hiYW5nVXJsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblxyXG4gIHZhciBhcHBCYXNlTm9GaWxlID0gc3RyaXBGaWxlKGFwcEJhc2UpO1xyXG5cclxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XHJcbiAgICBpZiAocmVsSHJlZiAmJiByZWxIcmVmWzBdID09PSAnIycpIHtcclxuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBsaW5rcyB0byBoYXNoIGZyYWdtZW50czpcclxuICAgICAgLy8ga2VlcCB0aGUgb2xkIHVybCBhbmQgb25seSByZXBsYWNlIHRoZSBoYXNoIGZyYWdtZW50XHJcbiAgICAgIHRoaXMuaGFzaChyZWxIcmVmLnNsaWNlKDEpKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJld3JpdHRlblVybDtcclxuICAgIHZhciBhcHBVcmw7XHJcblxyXG4gICAgaWYgKCBhcHBCYXNlID09IHN0cmlwSGFzaCh1cmwpICkge1xyXG4gICAgICByZXdyaXR0ZW5VcmwgPSB1cmw7XHJcbiAgICB9IGVsc2UgaWYgKCAoYXBwVXJsID0gYmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLCB1cmwpKSApIHtcclxuICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZSArIGhhc2hQcmVmaXggKyBhcHBVcmw7XHJcbiAgICB9IGVsc2UgaWYgKCBhcHBCYXNlTm9GaWxlID09PSB1cmwgKyAnLycpIHtcclxuICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZU5vRmlsZTtcclxuICAgIH1cclxuICAgIGlmIChyZXdyaXR0ZW5VcmwpIHtcclxuICAgICAgdGhpcy4kJHBhcnNlKHJld3JpdHRlblVybCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gISFyZXdyaXR0ZW5Vcmw7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kJGNvbXBvc2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWFyY2ggPSB0b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLFxyXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XHJcblxyXG4gICAgdGhpcy4kJHVybCA9IGVuY29kZVBhdGgodGhpcy4kJHBhdGgpICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIGhhc2g7XHJcbiAgICAvLyBpbmNsdWRlIGhhc2hQcmVmaXggaW4gJCRhYnNVcmwgd2hlbiAkJHVybCBpcyBlbXB0eSBzbyBJRTggJiA5IGRvIG5vdCByZWxvYWQgcGFnZSBiZWNhdXNlIG9mIHJlbW92YWwgb2YgJyMnXHJcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZSArIGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsO1xyXG4gIH07XHJcblxyXG59XHJcblxyXG5cclxuTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmwucHJvdG90eXBlID1cclxuICBMb2NhdGlvbkhhc2hiYW5nVXJsLnByb3RvdHlwZSA9XHJcbiAgTG9jYXRpb25IdG1sNVVybC5wcm90b3R5cGUgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFyZSB3ZSBpbiBodG1sNSBtb2RlP1xyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgJCRodG1sNTogZmFsc2UsXHJcblxyXG4gIC8qKlxyXG4gICAqIEhhcyBhbnkgY2hhbmdlIGJlZW4gcmVwbGFjaW5nID9cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gICQkcmVwbGFjZTogZmFsc2UsXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jYWJzVXJsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cclxuICAgKlxyXG4gICAqIFJldHVybiBmdWxsIHVybCByZXByZXNlbnRhdGlvbiB3aXRoIGFsbCBzZWdtZW50cyBlbmNvZGVkIGFjY29yZGluZyB0byBydWxlcyBzcGVjaWZpZWQgaW5cclxuICAgKiBbUkZDIDM5ODZdKGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzM5ODYudHh0KS5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gZnVsbCB1cmxcclxuICAgKi9cclxuICBhYnNVcmw6IGxvY2F0aW9uR2V0dGVyKCckJGFic1VybCcpLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI3VybFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxyXG4gICAqXHJcbiAgICogUmV0dXJuIHVybCAoZS5nLiBgL3BhdGg/YT1iI2hhc2hgKSB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBDaGFuZ2UgcGF0aCwgc2VhcmNoIGFuZCBoYXNoLCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB1cmwgTmV3IHVybCB3aXRob3V0IGJhc2UgcHJlZml4IChlLmcuIGAvcGF0aD9hPWIjaGFzaGApXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSB1cmxcclxuICAgKi9cclxuICB1cmw6IGZ1bmN0aW9uKHVybCkge1xyXG4gICAgaWYgKGlzVW5kZWZpbmVkKHVybCkpXHJcbiAgICAgIHJldHVybiB0aGlzLiQkdXJsO1xyXG5cclxuICAgIHZhciBtYXRjaCA9IFBBVEhfTUFUQ0guZXhlYyh1cmwpO1xyXG4gICAgaWYgKG1hdGNoWzFdKSB0aGlzLnBhdGgoZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzFdKSk7XHJcbiAgICBpZiAobWF0Y2hbMl0gfHwgbWF0Y2hbMV0pIHRoaXMuc2VhcmNoKG1hdGNoWzNdIHx8ICcnKTtcclxuICAgIHRoaXMuaGFzaChtYXRjaFs1XSB8fCAnJyk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwcm90b2NvbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXHJcbiAgICpcclxuICAgKiBSZXR1cm4gcHJvdG9jb2wgb2YgY3VycmVudCB1cmwuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHByb3RvY29sIG9mIGN1cnJlbnQgdXJsXHJcbiAgICovXHJcbiAgcHJvdG9jb2w6IGxvY2F0aW9uR2V0dGVyKCckJHByb3RvY29sJyksXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jaG9zdFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXHJcbiAgICpcclxuICAgKiBSZXR1cm4gaG9zdCBvZiBjdXJyZW50IHVybC5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gaG9zdCBvZiBjdXJyZW50IHVybC5cclxuICAgKi9cclxuICBob3N0OiBsb2NhdGlvbkdldHRlcignJCRob3N0JyksXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jcG9ydFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXHJcbiAgICpcclxuICAgKiBSZXR1cm4gcG9ydCBvZiBjdXJyZW50IHVybC5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge051bWJlcn0gcG9ydFxyXG4gICAqL1xyXG4gIHBvcnQ6IGxvY2F0aW9uR2V0dGVyKCckJHBvcnQnKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwYXRoXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXHJcbiAgICpcclxuICAgKiBSZXR1cm4gcGF0aCBvZiBjdXJyZW50IHVybCB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBDaGFuZ2UgcGF0aCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxyXG4gICAqXHJcbiAgICogTm90ZTogUGF0aCBzaG91bGQgYWx3YXlzIGJlZ2luIHdpdGggZm9yd2FyZCBzbGFzaCAoLyksIHRoaXMgbWV0aG9kIHdpbGwgYWRkIHRoZSBmb3J3YXJkIHNsYXNoXHJcbiAgICogaWYgaXQgaXMgbWlzc2luZy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpPX0gcGF0aCBOZXcgcGF0aFxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gcGF0aFxyXG4gICAqL1xyXG4gIHBhdGg6IGxvY2F0aW9uR2V0dGVyU2V0dGVyKCckJHBhdGgnLCBmdW5jdGlvbihwYXRoKSB7XHJcbiAgICBwYXRoID0gcGF0aCA/IHBhdGgudG9TdHJpbmcoKSA6ICcnO1xyXG4gICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09ICcvJyA/IHBhdGggOiAnLycgKyBwYXRoO1xyXG4gIH0pLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI3NlYXJjaFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxyXG4gICAqXHJcbiAgICogUmV0dXJuIHNlYXJjaCBwYXJ0IChhcyBvYmplY3QpIG9mIGN1cnJlbnQgdXJsIHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIENoYW5nZSBzZWFyY2ggcGFydCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxyXG4gICAqXHJcbiAgICpcclxuICAgKiBgYGBqc1xyXG4gICAqIC8vIGdpdmVuIHVybCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xyXG4gICAqIHZhciBzZWFyY2hPYmplY3QgPSAkbG9jYXRpb24uc2VhcmNoKCk7XHJcbiAgICogLy8gPT4ge2ZvbzogJ2JhcicsIGJhejogJ3hveG8nfVxyXG4gICAqXHJcbiAgICpcclxuICAgKiAvLyBzZXQgZm9vIHRvICd5aXBlZSdcclxuICAgKiAkbG9jYXRpb24uc2VhcmNoKCdmb28nLCAneWlwZWUnKTtcclxuICAgKiAvLyA9PiAkbG9jYXRpb25cclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdC48c3RyaW5nPnxPYmplY3QuPEFycmF5LjxzdHJpbmc+Pn0gc2VhcmNoIE5ldyBzZWFyY2ggcGFyYW1zIC0gc3RyaW5nIG9yXHJcbiAgICogaGFzaCBvYmplY3QuXHJcbiAgICpcclxuICAgKiBXaGVuIGNhbGxlZCB3aXRoIGEgc2luZ2xlIGFyZ3VtZW50IHRoZSBtZXRob2QgYWN0cyBhcyBhIHNldHRlciwgc2V0dGluZyB0aGUgYHNlYXJjaGAgY29tcG9uZW50XHJcbiAgICogb2YgYCRsb2NhdGlvbmAgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZS5cclxuICAgKlxyXG4gICAqIElmIHRoZSBhcmd1bWVudCBpcyBhIGhhc2ggb2JqZWN0IGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgdmFsdWVzLCB0aGVzZSB2YWx1ZXMgd2lsbCBiZSBlbmNvZGVkXHJcbiAgICogYXMgZHVwbGljYXRlIHNlYXJjaCBwYXJhbWV0ZXJzIGluIHRoZSB1cmwuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyhzdHJpbmd8TnVtYmVyfEFycmF5PHN0cmluZz58Ym9vbGVhbik9fSBwYXJhbVZhbHVlIElmIGBzZWFyY2hgIGlzIGEgc3RyaW5nIG9yIG51bWJlciwgdGhlbiBgcGFyYW1WYWx1ZWBcclxuICAgKiB3aWxsIG92ZXJyaWRlIG9ubHkgYSBzaW5nbGUgc2VhcmNoIHByb3BlcnR5LlxyXG4gICAqXHJcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGFuIGFycmF5LCBpdCB3aWxsIG92ZXJyaWRlIHRoZSBwcm9wZXJ0eSBvZiB0aGUgYHNlYXJjaGAgY29tcG9uZW50IG9mXHJcbiAgICogYCRsb2NhdGlvbmAgc3BlY2lmaWVkIHZpYSB0aGUgZmlyc3QgYXJndW1lbnQuXHJcbiAgICpcclxuICAgKiBJZiBgcGFyYW1WYWx1ZWAgaXMgYG51bGxgLCB0aGUgcHJvcGVydHkgc3BlY2lmaWVkIHZpYSB0aGUgZmlyc3QgYXJndW1lbnQgd2lsbCBiZSBkZWxldGVkLlxyXG4gICAqXHJcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGB0cnVlYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgYWRkZWQgd2l0aCBub1xyXG4gICAqIHZhbHVlIG5vciB0cmFpbGluZyBlcXVhbCBzaWduLlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7T2JqZWN0fSBJZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyB0aGUgcGFyc2VkIGBzZWFyY2hgIG9iamVjdC4gSWYgY2FsbGVkIHdpdGhcclxuICAgKiBvbmUgb3IgbW9yZSBhcmd1bWVudHMgcmV0dXJucyBgJGxvY2F0aW9uYCBvYmplY3QgaXRzZWxmLlxyXG4gICAqL1xyXG4gIHNlYXJjaDogZnVuY3Rpb24oc2VhcmNoLCBwYXJhbVZhbHVlKSB7XHJcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgY2FzZSAwOlxyXG4gICAgICAgIHJldHVybiB0aGlzLiQkc2VhcmNoO1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHNlYXJjaCkgfHwgaXNOdW1iZXIoc2VhcmNoKSkge1xyXG4gICAgICAgICAgc2VhcmNoID0gc2VhcmNoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICB0aGlzLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShzZWFyY2gpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qoc2VhcmNoKSkge1xyXG4gICAgICAgICAgLy8gcmVtb3ZlIG9iamVjdCB1bmRlZmluZWQgb3IgbnVsbCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICBmb3JFYWNoKHNlYXJjaCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgZGVsZXRlIHNlYXJjaFtrZXldO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgdGhpcy4kJHNlYXJjaCA9IHNlYXJjaDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdpc3JjaGFyZycsXHJcbiAgICAgICAgICAgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCBvZiB0aGUgYCRsb2NhdGlvbiNzZWFyY2goKWAgY2FsbCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIG9iamVjdC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHBhcmFtVmFsdWUpIHx8IHBhcmFtVmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgIGRlbGV0ZSB0aGlzLiQkc2VhcmNoW3NlYXJjaF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuJCRzZWFyY2hbc2VhcmNoXSA9IHBhcmFtVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJCRjb21wb3NlKCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hhc2hcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cclxuICAgKlxyXG4gICAqIFJldHVybiBoYXNoIGZyYWdtZW50IHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIENoYW5nZSBoYXNoIGZyYWdtZW50IHdoZW4gY2FsbGVkIHdpdGggcGFyYW1ldGVyIGFuZCByZXR1cm4gYCRsb2NhdGlvbmAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IGhhc2ggTmV3IGhhc2ggZnJhZ21lbnRcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGhhc2hcclxuICAgKi9cclxuICBoYXNoOiBsb2NhdGlvbkdldHRlclNldHRlcignJCRoYXNoJywgZnVuY3Rpb24oaGFzaCkge1xyXG4gICAgcmV0dXJuIGhhc2ggPyBoYXNoLnRvU3RyaW5nKCkgOiAnJztcclxuICB9KSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiNyZXBsYWNlXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBJZiBjYWxsZWQsIGFsbCBjaGFuZ2VzIHRvICRsb2NhdGlvbiBkdXJpbmcgY3VycmVudCBgJGRpZ2VzdGAgd2lsbCBiZSByZXBsYWNpbmcgY3VycmVudCBoaXN0b3J5XHJcbiAgICogcmVjb3JkLCBpbnN0ZWFkIG9mIGFkZGluZyBuZXcgb25lLlxyXG4gICAqL1xyXG4gIHJlcGxhY2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy4kJHJlcGxhY2UgPSB0cnVlO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXIocHJvcGVydHkpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpc1twcm9wZXJ0eV07XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGxvY2F0aW9uR2V0dGVyU2V0dGVyKHByb3BlcnR5LCBwcmVwcm9jZXNzKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxyXG4gICAgICByZXR1cm4gdGhpc1twcm9wZXJ0eV07XHJcblxyXG4gICAgdGhpc1twcm9wZXJ0eV0gPSBwcmVwcm9jZXNzKHZhbHVlKTtcclxuICAgIHRoaXMuJCRjb21wb3NlKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkbG9jYXRpb25cclxuICpcclxuICogQHJlcXVpcmVzICRyb290RWxlbWVudFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlICRsb2NhdGlvbiBzZXJ2aWNlIHBhcnNlcyB0aGUgVVJMIGluIHRoZSBicm93c2VyIGFkZHJlc3MgYmFyIChiYXNlZCBvbiB0aGVcclxuICogW3dpbmRvdy5sb2NhdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vd2luZG93LmxvY2F0aW9uKSkgYW5kIG1ha2VzIHRoZSBVUkxcclxuICogYXZhaWxhYmxlIHRvIHlvdXIgYXBwbGljYXRpb24uIENoYW5nZXMgdG8gdGhlIFVSTCBpbiB0aGUgYWRkcmVzcyBiYXIgYXJlIHJlZmxlY3RlZCBpbnRvXHJcbiAqICRsb2NhdGlvbiBzZXJ2aWNlIGFuZCBjaGFuZ2VzIHRvICRsb2NhdGlvbiBhcmUgcmVmbGVjdGVkIGludG8gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIuXHJcbiAqXHJcbiAqICoqVGhlICRsb2NhdGlvbiBzZXJ2aWNlOioqXHJcbiAqXHJcbiAqIC0gRXhwb3NlcyB0aGUgY3VycmVudCBVUkwgaW4gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIsIHNvIHlvdSBjYW5cclxuICogICAtIFdhdGNoIGFuZCBvYnNlcnZlIHRoZSBVUkwuXHJcbiAqICAgLSBDaGFuZ2UgdGhlIFVSTC5cclxuICogLSBTeW5jaHJvbml6ZXMgdGhlIFVSTCB3aXRoIHRoZSBicm93c2VyIHdoZW4gdGhlIHVzZXJcclxuICogICAtIENoYW5nZXMgdGhlIGFkZHJlc3MgYmFyLlxyXG4gKiAgIC0gQ2xpY2tzIHRoZSBiYWNrIG9yIGZvcndhcmQgYnV0dG9uIChvciBjbGlja3MgYSBIaXN0b3J5IGxpbmspLlxyXG4gKiAgIC0gQ2xpY2tzIG9uIGEgbGluay5cclxuICogLSBSZXByZXNlbnRzIHRoZSBVUkwgb2JqZWN0IGFzIGEgc2V0IG9mIG1ldGhvZHMgKHByb3RvY29sLCBob3N0LCBwb3J0LCBwYXRoLCBzZWFyY2gsIGhhc2gpLlxyXG4gKlxyXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiBEZXZlbG9wZXIgR3VpZGU6IFVzaW5nICRsb2NhdGlvbn1cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRsb2NhdGlvblByb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBVc2UgdGhlIGAkbG9jYXRpb25Qcm92aWRlcmAgdG8gY29uZmlndXJlIGhvdyB0aGUgYXBwbGljYXRpb24gZGVlcCBsaW5raW5nIHBhdGhzIGFyZSBzdG9yZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiAkTG9jYXRpb25Qcm92aWRlcigpe1xyXG4gIHZhciBoYXNoUHJlZml4ID0gJycsXHJcbiAgICAgIGh0bWw1TW9kZSA9IGZhbHNlO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaGFzaFByZWZpeFxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcHJlZml4IFByZWZpeCBmb3IgaGFzaCBwYXJ0IChjb250YWluaW5nIHBhdGggYW5kIHNlYXJjaClcclxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxyXG4gICAqL1xyXG4gIHRoaXMuaGFzaFByZWZpeCA9IGZ1bmN0aW9uKHByZWZpeCkge1xyXG4gICAgaWYgKGlzRGVmaW5lZChwcmVmaXgpKSB7XHJcbiAgICAgIGhhc2hQcmVmaXggPSBwcmVmaXg7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGhhc2hQcmVmaXg7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvblByb3ZpZGVyI2h0bWw1TW9kZVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG1vZGUgVXNlIEhUTUw1IHN0cmF0ZWd5IGlmIGF2YWlsYWJsZS5cclxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxyXG4gICAqL1xyXG4gIHRoaXMuaHRtbDVNb2RlID0gZnVuY3Rpb24obW9kZSkge1xyXG4gICAgaWYgKGlzRGVmaW5lZChtb2RlKSkge1xyXG4gICAgICBodG1sNU1vZGUgPSBtb2RlO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBodG1sNU1vZGU7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGV2ZW50XHJcbiAgICogQG5hbWUgJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN0YXJ0XHJcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEJyb2FkY2FzdGVkIGJlZm9yZSBhIFVSTCB3aWxsIGNoYW5nZS4gVGhpcyBjaGFuZ2UgY2FuIGJlIHByZXZlbnRlZCBieSBjYWxsaW5nXHJcbiAgICogYHByZXZlbnREZWZhdWx0YCBtZXRob2Qgb2YgdGhlIGV2ZW50LiBTZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBmb3IgbW9yZVxyXG4gICAqIGRldGFpbHMgYWJvdXQgZXZlbnQgb2JqZWN0LiBVcG9uIHN1Y2Nlc3NmdWwgY2hhbmdlXHJcbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiNldmVudHNfJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcyAkbG9jYXRpb25DaGFuZ2VTdWNjZXNzfSBpcyBmaXJlZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9sZFVybCBVUkwgdGhhdCB3YXMgYmVmb3JlIGl0IHdhcyBjaGFuZ2VkLlxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgZXZlbnRcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1xyXG4gICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHJvb3Qgc2NvcGVcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBCcm9hZGNhc3RlZCBhZnRlciBhIFVSTCB3YXMgY2hhbmdlZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9sZFVybCBVUkwgdGhhdCB3YXMgYmVmb3JlIGl0IHdhcyBjaGFuZ2VkLlxyXG4gICAqL1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJGJyb3dzZXInLCAnJHNuaWZmZXInLCAnJHJvb3RFbGVtZW50JyxcclxuICAgICAgZnVuY3Rpb24oICRyb290U2NvcGUsICAgJGJyb3dzZXIsICAgJHNuaWZmZXIsICAgJHJvb3RFbGVtZW50KSB7XHJcbiAgICB2YXIgJGxvY2F0aW9uLFxyXG4gICAgICAgIExvY2F0aW9uTW9kZSxcclxuICAgICAgICBiYXNlSHJlZiA9ICRicm93c2VyLmJhc2VIcmVmKCksIC8vIGlmIGJhc2VbaHJlZl0gaXMgdW5kZWZpbmVkLCBpdCBkZWZhdWx0cyB0byAnJ1xyXG4gICAgICAgIGluaXRpYWxVcmwgPSAkYnJvd3Nlci51cmwoKSxcclxuICAgICAgICBhcHBCYXNlO1xyXG5cclxuICAgIGlmIChodG1sNU1vZGUpIHtcclxuICAgICAgaWYgKCFiYXNlSHJlZikge1xyXG4gICAgICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignbm9iYXNlJyxcclxuICAgICAgICAgIFwiJGxvY2F0aW9uIGluIEhUTUw1IG1vZGUgcmVxdWlyZXMgYSA8YmFzZT4gdGFnIHRvIGJlIHByZXNlbnQhXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGFwcEJhc2UgPSBzZXJ2ZXJCYXNlKGluaXRpYWxVcmwpICsgKGJhc2VIcmVmIHx8ICcvJyk7XHJcbiAgICAgIExvY2F0aW9uTW9kZSA9ICRzbmlmZmVyLmhpc3RvcnkgPyBMb2NhdGlvbkh0bWw1VXJsIDogTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcHBCYXNlID0gc3RyaXBIYXNoKGluaXRpYWxVcmwpO1xyXG4gICAgICBMb2NhdGlvbk1vZGUgPSBMb2NhdGlvbkhhc2hiYW5nVXJsO1xyXG4gICAgfVxyXG4gICAgJGxvY2F0aW9uID0gbmV3IExvY2F0aW9uTW9kZShhcHBCYXNlLCAnIycgKyBoYXNoUHJlZml4KTtcclxuICAgICRsb2NhdGlvbi4kJHBhcnNlTGlua1VybChpbml0aWFsVXJsLCBpbml0aWFsVXJsKTtcclxuXHJcbiAgICB2YXIgSUdOT1JFX1VSSV9SRUdFWFAgPSAvXlxccyooamF2YXNjcmlwdHxtYWlsdG8pOi9pO1xyXG5cclxuICAgICRyb290RWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAvLyBUT0RPKHZvanRhKTogcmV3cml0ZSBsaW5rIHdoZW4gb3BlbmluZyBpbiBuZXcgdGFiL3dpbmRvdyAoaW4gbGVnYWN5IGJyb3dzZXIpXHJcbiAgICAgIC8vIGN1cnJlbnRseSB3ZSBvcGVuIG5pY2UgdXJsIGxpbmsgYW5kIHJlZGlyZWN0IHRoZW5cclxuXHJcbiAgICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQud2hpY2ggPT0gMikgcmV0dXJuO1xyXG5cclxuICAgICAgdmFyIGVsbSA9IGpxTGl0ZShldmVudC50YXJnZXQpO1xyXG5cclxuICAgICAgLy8gdHJhdmVyc2UgdGhlIERPTSB1cCB0byBmaW5kIGZpcnN0IEEgdGFnXHJcbiAgICAgIHdoaWxlIChub2RlTmFtZV8oZWxtWzBdKSAhPT0gJ2EnKSB7XHJcbiAgICAgICAgLy8gaWdub3JlIHJld3JpdGluZyBpZiBubyBBIHRhZyAocmVhY2hlZCByb290IGVsZW1lbnQsIG9yIG5vIHBhcmVudCAtIHJlbW92ZWQgZnJvbSBkb2N1bWVudClcclxuICAgICAgICBpZiAoZWxtWzBdID09PSAkcm9vdEVsZW1lbnRbMF0gfHwgIShlbG0gPSBlbG0ucGFyZW50KCkpWzBdKSByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBhYnNIcmVmID0gZWxtLnByb3AoJ2hyZWYnKTtcclxuICAgICAgLy8gZ2V0IHRoZSBhY3R1YWwgaHJlZiBhdHRyaWJ1dGUgLSBzZWVcclxuICAgICAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2RkMzQ3MTQ4KHY9dnMuODUpLmFzcHhcclxuICAgICAgdmFyIHJlbEhyZWYgPSBlbG0uYXR0cignaHJlZicpIHx8IGVsbS5hdHRyKCd4bGluazpocmVmJyk7XHJcblxyXG4gICAgICBpZiAoaXNPYmplY3QoYWJzSHJlZikgJiYgYWJzSHJlZi50b1N0cmluZygpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nKSB7XHJcbiAgICAgICAgLy8gU1ZHQW5pbWF0ZWRTdHJpbmcuYW5pbVZhbCBzaG91bGQgYmUgaWRlbnRpY2FsIHRvIFNWR0FuaW1hdGVkU3RyaW5nLmJhc2VWYWwsIHVubGVzcyBkdXJpbmdcclxuICAgICAgICAvLyBhbiBhbmltYXRpb24uXHJcbiAgICAgICAgYWJzSHJlZiA9IHVybFJlc29sdmUoYWJzSHJlZi5hbmltVmFsKS5ocmVmO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZ25vcmUgd2hlbiB1cmwgaXMgc3RhcnRlZCB3aXRoIGphdmFzY3JpcHQ6IG9yIG1haWx0bzpcclxuICAgICAgaWYgKElHTk9SRV9VUklfUkVHRVhQLnRlc3QoYWJzSHJlZikpIHJldHVybjtcclxuXHJcbiAgICAgIGlmIChhYnNIcmVmICYmICFlbG0uYXR0cigndGFyZ2V0JykgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XHJcbiAgICAgICAgaWYgKCRsb2NhdGlvbi4kJHBhcnNlTGlua1VybChhYnNIcmVmLCByZWxIcmVmKSkge1xyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIC8vIHVwZGF0ZSBsb2NhdGlvbiBtYW51YWxseVxyXG4gICAgICAgICAgaWYgKCRsb2NhdGlvbi5hYnNVcmwoKSAhPSAkYnJvd3Nlci51cmwoKSkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAvLyBoYWNrIHRvIHdvcmsgYXJvdW5kIEZGNiBidWcgNjg0MjA4IHdoZW4gc2NlbmFyaW8gcnVubmVyIGNsaWNrcyBvbiBsaW5rc1xyXG4gICAgICAgICAgICB3aW5kb3cuYW5ndWxhclsnZmYtNjg0MjA4LXByZXZlbnREZWZhdWx0J10gPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vIHJld3JpdGUgaGFzaGJhbmcgdXJsIDw+IGh0bWw1IHVybFxyXG4gICAgaWYgKCRsb2NhdGlvbi5hYnNVcmwoKSAhPSBpbml0aWFsVXJsKSB7XHJcbiAgICAgICRicm93c2VyLnVybCgkbG9jYXRpb24uYWJzVXJsKCksIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVwZGF0ZSAkbG9jYXRpb24gd2hlbiAkYnJvd3NlciB1cmwgY2hhbmdlc1xyXG4gICAgJGJyb3dzZXIub25VcmxDaGFuZ2UoZnVuY3Rpb24obmV3VXJsKSB7XHJcbiAgICAgIGlmICgkbG9jYXRpb24uYWJzVXJsKCkgIT0gbmV3VXJsKSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIG9sZFVybCA9ICRsb2NhdGlvbi5hYnNVcmwoKTtcclxuXHJcbiAgICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShuZXdVcmwpO1xyXG4gICAgICAgICAgaWYgKCRyb290U2NvcGUuJGJyb2FkY2FzdCgnJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCBuZXdVcmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFVybCkuZGVmYXVsdFByZXZlbnRlZCkge1xyXG4gICAgICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShvbGRVcmwpO1xyXG4gICAgICAgICAgICAkYnJvd3Nlci51cmwob2xkVXJsKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSkgJHJvb3RTY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIHVwZGF0ZSBicm93c2VyXHJcbiAgICB2YXIgY2hhbmdlQ291bnRlciA9IDA7XHJcbiAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAkbG9jYXRpb25XYXRjaCgpIHtcclxuICAgICAgdmFyIG9sZFVybCA9ICRicm93c2VyLnVybCgpO1xyXG4gICAgICB2YXIgY3VycmVudFJlcGxhY2UgPSAkbG9jYXRpb24uJCRyZXBsYWNlO1xyXG5cclxuICAgICAgaWYgKCFjaGFuZ2VDb3VudGVyIHx8IG9sZFVybCAhPSAkbG9jYXRpb24uYWJzVXJsKCkpIHtcclxuICAgICAgICBjaGFuZ2VDb3VudGVyKys7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCRyb290U2NvcGUuJGJyb2FkY2FzdCgnJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCAkbG9jYXRpb24uYWJzVXJsKCksIG9sZFVybCkuXHJcbiAgICAgICAgICAgICAgZGVmYXVsdFByZXZlbnRlZCkge1xyXG4gICAgICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShvbGRVcmwpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGJyb3dzZXIudXJsKCRsb2NhdGlvbi5hYnNVcmwoKSwgY3VycmVudFJlcGxhY2UpO1xyXG4gICAgICAgICAgICBhZnRlckxvY2F0aW9uQ2hhbmdlKG9sZFVybCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgJGxvY2F0aW9uLiQkcmVwbGFjZSA9IGZhbHNlO1xyXG5cclxuICAgICAgcmV0dXJuIGNoYW5nZUNvdW50ZXI7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gJGxvY2F0aW9uO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsKSB7XHJcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsICRsb2NhdGlvbi5hYnNVcmwoKSwgb2xkVXJsKTtcclxuICAgIH1cclxufV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkbG9nXHJcbiAqIEByZXF1aXJlcyAkd2luZG93XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTaW1wbGUgc2VydmljZSBmb3IgbG9nZ2luZy4gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzYWZlbHkgd3JpdGVzIHRoZSBtZXNzYWdlXHJcbiAqIGludG8gdGhlIGJyb3dzZXIncyBjb25zb2xlIChpZiBwcmVzZW50KS5cclxuICpcclxuICogVGhlIG1haW4gcHVycG9zZSBvZiB0aGlzIHNlcnZpY2UgaXMgdG8gc2ltcGxpZnkgZGVidWdnaW5nIGFuZCB0cm91Ymxlc2hvb3RpbmcuXHJcbiAqXHJcbiAqIFRoZSBkZWZhdWx0IGlzIHRvIGxvZyBgZGVidWdgIG1lc3NhZ2VzLiBZb3UgY2FuIHVzZVxyXG4gKiB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyIG5nLiRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWR9IHRvIGNoYW5nZSB0aGlzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJsb2dFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2xvZ0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0xvZ0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9nJywgZnVuY3Rpb24oJHNjb3BlLCAkbG9nKSB7XHJcbiAgICAgICAgICAgJHNjb3BlLiRsb2cgPSAkbG9nO1xyXG4gICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gJ0hlbGxvIFdvcmxkISc7XHJcbiAgICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkxvZ0NvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPHA+UmVsb2FkIHRoaXMgcGFnZSB3aXRoIG9wZW4gY29uc29sZSwgZW50ZXIgdGV4dCBhbmQgaGl0IHRoZSBsb2cgYnV0dG9uLi4uPC9wPlxyXG4gICAgICAgICBNZXNzYWdlOlxyXG4gICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm1lc3NhZ2VcIi8+XHJcbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmxvZyhtZXNzYWdlKVwiPmxvZzwvYnV0dG9uPlxyXG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy53YXJuKG1lc3NhZ2UpXCI+d2FybjwvYnV0dG9uPlxyXG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5pbmZvKG1lc3NhZ2UpXCI+aW5mbzwvYnV0dG9uPlxyXG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5lcnJvcihtZXNzYWdlKVwiPmVycm9yPC9idXR0b24+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRsb2dQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVXNlIHRoZSBgJGxvZ1Byb3ZpZGVyYCB0byBjb25maWd1cmUgaG93IHRoZSBhcHBsaWNhdGlvbiBsb2dzIG1lc3NhZ2VzXHJcbiAqL1xyXG5mdW5jdGlvbiAkTG9nUHJvdmlkZXIoKXtcclxuICB2YXIgZGVidWcgPSB0cnVlLFxyXG4gICAgICBzZWxmID0gdGhpcztcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWRcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBmbGFnIGVuYWJsZSBvciBkaXNhYmxlIGRlYnVnIGxldmVsIG1lc3NhZ2VzXHJcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcclxuICAgKi9cclxuICB0aGlzLmRlYnVnRW5hYmxlZCA9IGZ1bmN0aW9uKGZsYWcpIHtcclxuICAgIGlmIChpc0RlZmluZWQoZmxhZykpIHtcclxuICAgICAgZGVidWcgPSBmbGFnO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZGVidWc7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgZnVuY3Rpb24oJHdpbmRvdyl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkbG9nI2xvZ1xyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogV3JpdGUgYSBsb2cgbWVzc2FnZVxyXG4gICAgICAgKi9cclxuICAgICAgbG9nOiBjb25zb2xlTG9nKCdsb2cnKSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRsb2cjaW5mb1xyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogV3JpdGUgYW4gaW5mb3JtYXRpb24gbWVzc2FnZVxyXG4gICAgICAgKi9cclxuICAgICAgaW5mbzogY29uc29sZUxvZygnaW5mbycpLFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGxvZyN3YXJuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBXcml0ZSBhIHdhcm5pbmcgbWVzc2FnZVxyXG4gICAgICAgKi9cclxuICAgICAgd2FybjogY29uc29sZUxvZygnd2FybicpLFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGxvZyNlcnJvclxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogV3JpdGUgYW4gZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgKi9cclxuICAgICAgZXJyb3I6IGNvbnNvbGVMb2coJ2Vycm9yJyksXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkbG9nI2RlYnVnXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBXcml0ZSBhIGRlYnVnIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIGRlYnVnOiAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmbiA9IGNvbnNvbGVMb2coJ2RlYnVnJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChkZWJ1Zykge1xyXG4gICAgICAgICAgICBmbi5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0oKSlcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZm9ybWF0RXJyb3IoYXJnKSB7XHJcbiAgICAgIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgIGlmIChhcmcuc3RhY2spIHtcclxuICAgICAgICAgIGFyZyA9IChhcmcubWVzc2FnZSAmJiBhcmcuc3RhY2suaW5kZXhPZihhcmcubWVzc2FnZSkgPT09IC0xKVxyXG4gICAgICAgICAgICAgID8gJ0Vycm9yOiAnICsgYXJnLm1lc3NhZ2UgKyAnXFxuJyArIGFyZy5zdGFja1xyXG4gICAgICAgICAgICAgIDogYXJnLnN0YWNrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXJnLnNvdXJjZVVSTCkge1xyXG4gICAgICAgICAgYXJnID0gYXJnLm1lc3NhZ2UgKyAnXFxuJyArIGFyZy5zb3VyY2VVUkwgKyAnOicgKyBhcmcubGluZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGFyZztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb25zb2xlTG9nKHR5cGUpIHtcclxuICAgICAgdmFyIGNvbnNvbGUgPSAkd2luZG93LmNvbnNvbGUgfHwge30sXHJcbiAgICAgICAgICBsb2dGbiA9IGNvbnNvbGVbdHlwZV0gfHwgY29uc29sZS5sb2cgfHwgbm9vcCxcclxuICAgICAgICAgIGhhc0FwcGx5ID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyBOb3RlOiByZWFkaW5nIGxvZ0ZuLmFwcGx5IHRocm93cyBhbiBlcnJvciBpbiBJRTExIGluIElFOCBkb2N1bWVudCBtb2RlLlxyXG4gICAgICAvLyBUaGUgcmVhc29uIGJlaGluZCB0aGlzIGlzIHRoYXQgY29uc29sZS5sb2cgaGFzIHR5cGUgXCJvYmplY3RcIiBpbiBJRTguLi5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICBoYXNBcHBseSA9ICEhbG9nRm4uYXBwbHk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcblxyXG4gICAgICBpZiAoaGFzQXBwbHkpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKGFyZykge1xyXG4gICAgICAgICAgICBhcmdzLnB1c2goZm9ybWF0RXJyb3IoYXJnKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBsb2dGbi5hcHBseShjb25zb2xlLCBhcmdzKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyB3ZSBhcmUgSUUgd2hpY2ggZWl0aGVyIGRvZXNuJ3QgaGF2ZSB3aW5kb3cuY29uc29sZSA9PiB0aGlzIGlzIG5vb3AgYW5kIHdlIGRvIG5vdGhpbmcsXHJcbiAgICAgIC8vIG9yIHdlIGFyZSBJRSB3aGVyZSBjb25zb2xlLmxvZyBkb2Vzbid0IGhhdmUgYXBwbHkgc28gd2UgbG9nIGF0IGxlYXN0IGZpcnN0IDIgYXJnc1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xyXG4gICAgICAgIGxvZ0ZuKGFyZzEsIGFyZzIgPT0gbnVsbCA/ICcnIDogYXJnMik7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbnZhciAkcGFyc2VNaW5FcnIgPSBtaW5FcnIoJyRwYXJzZScpO1xyXG5cclxuLy8gU2FuZGJveGluZyBBbmd1bGFyIEV4cHJlc3Npb25zXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBBbmd1bGFyIGV4cHJlc3Npb25zIGFyZSBnZW5lcmFsbHkgY29uc2lkZXJlZCBzYWZlIGJlY2F1c2UgdGhlc2UgZXhwcmVzc2lvbnMgb25seSBoYXZlIGRpcmVjdFxyXG4vLyBhY2Nlc3MgdG8gJHNjb3BlIGFuZCBsb2NhbHMuIEhvd2V2ZXIsIG9uZSBjYW4gb2J0YWluIHRoZSBhYmlsaXR5IHRvIGV4ZWN1dGUgYXJiaXRyYXJ5IEpTIGNvZGUgYnlcclxuLy8gb2J0YWluaW5nIGEgcmVmZXJlbmNlIHRvIG5hdGl2ZSBKUyBmdW5jdGlvbnMgc3VjaCBhcyB0aGUgRnVuY3Rpb24gY29uc3RydWN0b3IuXHJcbi8vXHJcbi8vIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSBmb2xsb3dpbmcgQW5ndWxhciBleHByZXNzaW9uOlxyXG4vL1xyXG4vLyAgIHt9LnRvU3RyaW5nLmNvbnN0cnVjdG9yKCdhbGVydChcImV2aWwgSlMgY29kZVwiKScpXHJcbi8vXHJcbi8vIFRoaXMgc2FuZGJveGluZyB0ZWNobmlxdWUgaXMgbm90IHBlcmZlY3QgYW5kIGRvZXNuJ3QgYWltIHRvIGJlLiBUaGUgZ29hbCBpcyB0byBwcmV2ZW50IGV4cGxvaXRzXHJcbi8vIGFnYWluc3QgdGhlIGV4cHJlc3Npb24gbGFuZ3VhZ2UsIGJ1dCBub3QgdG8gcHJldmVudCBleHBsb2l0cyB0aGF0IHdlcmUgZW5hYmxlZCBieSBleHBvc2luZ1xyXG4vLyBzZW5zaXRpdmUgSmF2YVNjcmlwdCBvciBicm93c2VyIGFwaXMgb24gU2NvcGUuIEV4cG9zaW5nIHN1Y2ggb2JqZWN0cyBvbiBhIFNjb3BlIGlzIG5ldmVyIGEgZ29vZFxyXG4vLyBwcmFjdGljZSBhbmQgdGhlcmVmb3JlIHdlIGFyZSBub3QgZXZlbiB0cnlpbmcgdG8gcHJvdGVjdCBhZ2FpbnN0IGludGVyYWN0aW9uIHdpdGggYW4gb2JqZWN0XHJcbi8vIGV4cGxpY2l0bHkgZXhwb3NlZCBpbiB0aGlzIHdheS5cclxuLy9cclxuLy8gSW4gZ2VuZXJhbCwgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGFjY2VzcyBhIFdpbmRvdyBvYmplY3QgZnJvbSBhbiBhbmd1bGFyIGV4cHJlc3Npb24gdW5sZXNzIGFcclxuLy8gd2luZG93IG9yIHNvbWUgRE9NIG9iamVjdCB0aGF0IGhhcyBhIHJlZmVyZW5jZSB0byB3aW5kb3cgaXMgcHVibGlzaGVkIG9udG8gYSBTY29wZS5cclxuLy8gU2ltaWxhcmx5IHdlIHByZXZlbnQgaW52b2NhdGlvbnMgb2YgZnVuY3Rpb24ga25vd24gdG8gYmUgZGFuZ2Vyb3VzLCBhcyB3ZWxsIGFzIGFzc2lnbm1lbnRzIHRvXHJcbi8vIG5hdGl2ZSBvYmplY3RzLlxyXG5cclxuXHJcbmZ1bmN0aW9uIGVuc3VyZVNhZmVNZW1iZXJOYW1lKG5hbWUsIGZ1bGxFeHByZXNzaW9uKSB7XHJcbiAgaWYgKG5hbWUgPT09IFwiX19kZWZpbmVHZXR0ZXJfX1wiIHx8IG5hbWUgPT09IFwiX19kZWZpbmVTZXR0ZXJfX1wiXHJcbiAgICAgIHx8IG5hbWUgPT09IFwiX19sb29rdXBHZXR0ZXJfX1wiIHx8IG5hbWUgPT09IFwiX19sb29rdXBTZXR0ZXJfX1wiXHJcbiAgICAgIHx8IG5hbWUgPT09IFwiX19wcm90b19fXCIpIHtcclxuICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2ZsZCcsXHJcbiAgICAgICAgJ0F0dGVtcHRpbmcgdG8gYWNjZXNzIGEgZGlzYWxsb3dlZCBmaWVsZCBpbiBBbmd1bGFyIGV4cHJlc3Npb25zISAnXHJcbiAgICAgICAgKydFeHByZXNzaW9uOiB7MH0nLCBmdWxsRXhwcmVzc2lvbik7XHJcbiAgfVxyXG4gIHJldHVybiBuYW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbnN1cmVTYWZlT2JqZWN0KG9iaiwgZnVsbEV4cHJlc3Npb24pIHtcclxuICAvLyBuaWZ0eSBjaGVjayBpZiBvYmogaXMgRnVuY3Rpb24gdGhhdCBpcyBmYXN0IGFuZCB3b3JrcyBhY3Jvc3MgaWZyYW1lcyBhbmQgb3RoZXIgY29udGV4dHNcclxuICBpZiAob2JqKSB7XHJcbiAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBvYmopIHtcclxuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCdpc2VjZm4nLFxyXG4gICAgICAgICAgJ1JlZmVyZW5jaW5nIEZ1bmN0aW9uIGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxcclxuICAgICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcclxuICAgIH0gZWxzZSBpZiAoLy8gaXNXaW5kb3cob2JqKVxyXG4gICAgICAgIG9iai53aW5kb3cgPT09IG9iaikge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWN3aW5kb3cnLFxyXG4gICAgICAgICAgJ1JlZmVyZW5jaW5nIHRoZSBXaW5kb3cgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxyXG4gICAgICAgICAgZnVsbEV4cHJlc3Npb24pO1xyXG4gICAgfSBlbHNlIGlmICgvLyBpc0VsZW1lbnQob2JqKVxyXG4gICAgICAgIG9iai5jaGlsZHJlbiAmJiAob2JqLm5vZGVOYW1lIHx8IChvYmoucHJvcCAmJiBvYmouYXR0ciAmJiBvYmouZmluZCkpKSB7XHJcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2RvbScsXHJcbiAgICAgICAgICAnUmVmZXJlbmNpbmcgRE9NIG5vZGVzIGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxcclxuICAgICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcclxuICAgIH0gZWxzZSBpZiAoLy8gYmxvY2sgT2JqZWN0IHNvIHRoYXQgd2UgY2FuJ3QgZ2V0IGhvbGQgb2YgZGFuZ2Vyb3VzIE9iamVjdC4qIG1ldGhvZHNcclxuICAgICAgICBvYmogPT09IE9iamVjdCkge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNvYmonLFxyXG4gICAgICAgICAgJ1JlZmVyZW5jaW5nIE9iamVjdCBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsXHJcbiAgICAgICAgICBmdWxsRXhwcmVzc2lvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbnZhciBDQUxMID0gRnVuY3Rpb24ucHJvdG90eXBlLmNhbGw7XHJcbnZhciBBUFBMWSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcclxudmFyIEJJTkQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZDtcclxuXHJcbmZ1bmN0aW9uIGVuc3VyZVNhZmVGdW5jdGlvbihvYmosIGZ1bGxFeHByZXNzaW9uKSB7XHJcbiAgaWYgKG9iaikge1xyXG4gICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gb2JqKSB7XHJcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2ZuJyxcclxuICAgICAgICAnUmVmZXJlbmNpbmcgRnVuY3Rpb24gaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxyXG4gICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcclxuICAgIH0gZWxzZSBpZiAob2JqID09PSBDQUxMIHx8IG9iaiA9PT0gQVBQTFkgfHwgb2JqID09PSBCSU5EKSB7XHJcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2ZmJyxcclxuICAgICAgICAnUmVmZXJlbmNpbmcgY2FsbCwgYXBwbHkgb3IgYmluZCBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsXHJcbiAgICAgICAgZnVsbEV4cHJlc3Npb24pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy9LZXl3b3JkIGNvbnN0YW50c1xyXG52YXIgQ09OU1RBTlRTID0gY3JlYXRlTWFwKCk7XHJcbmZvckVhY2goe1xyXG4gICdudWxsJzogZnVuY3Rpb24oKSB7IHJldHVybiBudWxsOyB9LFxyXG4gICd0cnVlJzogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxyXG4gICdmYWxzZSc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH0sXHJcbiAgJ3VuZGVmaW5lZCc6IGZ1bmN0aW9uKCkge31cclxufSwgZnVuY3Rpb24oY29uc3RhbnRHZXR0ZXIsIG5hbWUpIHtcclxuICBjb25zdGFudEdldHRlci5jb25zdGFudCA9IGNvbnN0YW50R2V0dGVyLmxpdGVyYWwgPSBjb25zdGFudEdldHRlci5zaGFyZWRHZXR0ZXIgPSB0cnVlO1xyXG4gIENPTlNUQU5UU1tuYW1lXSA9IGNvbnN0YW50R2V0dGVyO1xyXG59KTtcclxuXHJcbi8vT3BlcmF0b3JzIC0gd2lsbCBiZSB3cmFwcGVkIGJ5IGJpbmFyeUZuL3VuYXJ5Rm4vYXNzaWdubWVudC9maWx0ZXJcclxudmFyIE9QRVJBVE9SUyA9IGV4dGVuZChjcmVhdGVNYXAoKSwge1xyXG4gICAgLyoganNoaW50IGJpdHdpc2UgOiBmYWxzZSAqL1xyXG4gICAgJysnOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtcclxuICAgICAgYT1hKHNlbGYsIGxvY2Fscyk7IGI9YihzZWxmLCBsb2NhbHMpO1xyXG4gICAgICBpZiAoaXNEZWZpbmVkKGEpKSB7XHJcbiAgICAgICAgaWYgKGlzRGVmaW5lZChiKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGEgKyBiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gaXNEZWZpbmVkKGIpP2I6dW5kZWZpbmVkO30sXHJcbiAgICAnLSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe1xyXG4gICAgICAgICAgYT1hKHNlbGYsIGxvY2Fscyk7IGI9YihzZWxmLCBsb2NhbHMpO1xyXG4gICAgICAgICAgcmV0dXJuIChpc0RlZmluZWQoYSk/YTowKS0oaXNEZWZpbmVkKGIpP2I6MCk7XHJcbiAgICAgICAgfSxcclxuICAgICcqJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSpiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICcvJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKS9iKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICclJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSViKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICdeJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKV5iKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICc9PT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKT09PWIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJyE9PSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKXtyZXR1cm4gYShzZWxmLCBsb2NhbHMpIT09YihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnPT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtyZXR1cm4gYShzZWxmLCBsb2NhbHMpPT1iKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICchPSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2FscykhPWIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJzwnOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtyZXR1cm4gYShzZWxmLCBsb2NhbHMpPGIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJz4nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtyZXR1cm4gYShzZWxmLCBsb2NhbHMpPmIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJzw9JzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKTw9YihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnPj0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtyZXR1cm4gYShzZWxmLCBsb2NhbHMpPj1iKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICcmJic6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2FscykmJmIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJ3x8JzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKXx8YihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnJic6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2FscykmYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnISc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhKXtyZXR1cm4gIWEoc2VsZiwgbG9jYWxzKTt9LFxyXG5cclxuICAgIC8vVG9rZW5pemVkIGFzIG9wZXJhdG9ycyBidXQgcGFyc2VkIGFzIGFzc2lnbm1lbnQvZmlsdGVyc1xyXG4gICAgJz0nOnRydWUsXHJcbiAgICAnfCc6dHJ1ZVxyXG59KTtcclxuLyoganNoaW50IGJpdHdpc2U6IHRydWUgKi9cclxudmFyIEVTQ0FQRSA9IHtcIm5cIjpcIlxcblwiLCBcImZcIjpcIlxcZlwiLCBcInJcIjpcIlxcclwiLCBcInRcIjpcIlxcdFwiLCBcInZcIjpcIlxcdlwiLCBcIidcIjpcIidcIiwgJ1wiJzonXCInfTtcclxuXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbnZhciBMZXhlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxufTtcclxuXHJcbkxleGVyLnByb3RvdHlwZSA9IHtcclxuICBjb25zdHJ1Y3RvcjogTGV4ZXIsXHJcblxyXG4gIGxleDogZnVuY3Rpb24gKHRleHQpIHtcclxuICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICB0aGlzLmluZGV4ID0gMDtcclxuICAgIHRoaXMuY2ggPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnRva2VucyA9IFtdO1xyXG5cclxuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmNoID0gdGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KTtcclxuICAgICAgaWYgKHRoaXMuaXMoJ1wiXFwnJykpIHtcclxuICAgICAgICB0aGlzLnJlYWRTdHJpbmcodGhpcy5jaCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc051bWJlcih0aGlzLmNoKSB8fCB0aGlzLmlzKCcuJykgJiYgdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpIHtcclxuICAgICAgICB0aGlzLnJlYWROdW1iZXIoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzSWRlbnQodGhpcy5jaCkpIHtcclxuICAgICAgICB0aGlzLnJlYWRJZGVudCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXMoJygpe31bXS4sOzo/JykpIHtcclxuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtcclxuICAgICAgICAgIGluZGV4OiB0aGlzLmluZGV4LFxyXG4gICAgICAgICAgdGV4dDogdGhpcy5jaFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzV2hpdGVzcGFjZSh0aGlzLmNoKSkge1xyXG4gICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgY2gyID0gdGhpcy5jaCArIHRoaXMucGVlaygpO1xyXG4gICAgICAgIHZhciBjaDMgPSBjaDIgKyB0aGlzLnBlZWsoMik7XHJcbiAgICAgICAgdmFyIGZuID0gT1BFUkFUT1JTW3RoaXMuY2hdO1xyXG4gICAgICAgIHZhciBmbjIgPSBPUEVSQVRPUlNbY2gyXTtcclxuICAgICAgICB2YXIgZm4zID0gT1BFUkFUT1JTW2NoM107XHJcbiAgICAgICAgaWYgKGZuMykge1xyXG4gICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6IHRoaXMuaW5kZXgsIHRleHQ6IGNoMywgZm46IGZuM30pO1xyXG4gICAgICAgICAgdGhpcy5pbmRleCArPSAzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZm4yKSB7XHJcbiAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtpbmRleDogdGhpcy5pbmRleCwgdGV4dDogY2gyLCBmbjogZm4yfSk7XHJcbiAgICAgICAgICB0aGlzLmluZGV4ICs9IDI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmbikge1xyXG4gICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7XHJcbiAgICAgICAgICAgIGluZGV4OiB0aGlzLmluZGV4LFxyXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLmNoLFxyXG4gICAgICAgICAgICBmbjogZm5cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy5pbmRleCArPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ1VuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgJywgdGhpcy5pbmRleCwgdGhpcy5pbmRleCArIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMudG9rZW5zO1xyXG4gIH0sXHJcblxyXG4gIGlzOiBmdW5jdGlvbihjaGFycykge1xyXG4gICAgcmV0dXJuIGNoYXJzLmluZGV4T2YodGhpcy5jaCkgIT09IC0xO1xyXG4gIH0sXHJcblxyXG4gIHBlZWs6IGZ1bmN0aW9uKGkpIHtcclxuICAgIHZhciBudW0gPSBpIHx8IDE7XHJcbiAgICByZXR1cm4gKHRoaXMuaW5kZXggKyBudW0gPCB0aGlzLnRleHQubGVuZ3RoKSA/IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCArIG51bSkgOiBmYWxzZTtcclxuICB9LFxyXG5cclxuICBpc051bWJlcjogZnVuY3Rpb24oY2gpIHtcclxuICAgIHJldHVybiAoJzAnIDw9IGNoICYmIGNoIDw9ICc5Jyk7XHJcbiAgfSxcclxuXHJcbiAgaXNXaGl0ZXNwYWNlOiBmdW5jdGlvbihjaCkge1xyXG4gICAgLy8gSUUgdHJlYXRzIG5vbi1icmVha2luZyBzcGFjZSBhcyBcXHUwMEEwXHJcbiAgICByZXR1cm4gKGNoID09PSAnICcgfHwgY2ggPT09ICdcXHInIHx8IGNoID09PSAnXFx0JyB8fFxyXG4gICAgICAgICAgICBjaCA9PT0gJ1xcbicgfHwgY2ggPT09ICdcXHYnIHx8IGNoID09PSAnXFx1MDBBMCcpO1xyXG4gIH0sXHJcblxyXG4gIGlzSWRlbnQ6IGZ1bmN0aW9uKGNoKSB7XHJcbiAgICByZXR1cm4gKCdhJyA8PSBjaCAmJiBjaCA8PSAneicgfHxcclxuICAgICAgICAgICAgJ0EnIDw9IGNoICYmIGNoIDw9ICdaJyB8fFxyXG4gICAgICAgICAgICAnXycgPT09IGNoIHx8IGNoID09PSAnJCcpO1xyXG4gIH0sXHJcblxyXG4gIGlzRXhwT3BlcmF0b3I6IGZ1bmN0aW9uKGNoKSB7XHJcbiAgICByZXR1cm4gKGNoID09PSAnLScgfHwgY2ggPT09ICcrJyB8fCB0aGlzLmlzTnVtYmVyKGNoKSk7XHJcbiAgfSxcclxuXHJcbiAgdGhyb3dFcnJvcjogZnVuY3Rpb24oZXJyb3IsIHN0YXJ0LCBlbmQpIHtcclxuICAgIGVuZCA9IGVuZCB8fCB0aGlzLmluZGV4O1xyXG4gICAgdmFyIGNvbFN0ciA9IChpc0RlZmluZWQoc3RhcnQpXHJcbiAgICAgICAgICAgID8gJ3MgJyArIHN0YXJ0ICsgICctJyArIHRoaXMuaW5kZXggKyAnIFsnICsgdGhpcy50ZXh0LnN1YnN0cmluZyhzdGFydCwgZW5kKSArICddJ1xyXG4gICAgICAgICAgICA6ICcgJyArIGVuZCk7XHJcbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2xleGVycicsICdMZXhlciBFcnJvcjogezB9IGF0IGNvbHVtbnsxfSBpbiBleHByZXNzaW9uIFt7Mn1dLicsXHJcbiAgICAgICAgZXJyb3IsIGNvbFN0ciwgdGhpcy50ZXh0KTtcclxuICB9LFxyXG5cclxuICByZWFkTnVtYmVyOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBudW1iZXIgPSAnJztcclxuICAgIHZhciBzdGFydCA9IHRoaXMuaW5kZXg7XHJcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcclxuICAgICAgdmFyIGNoID0gbG93ZXJjYXNlKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO1xyXG4gICAgICBpZiAoY2ggPT0gJy4nIHx8IHRoaXMuaXNOdW1iZXIoY2gpKSB7XHJcbiAgICAgICAgbnVtYmVyICs9IGNoO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBwZWVrQ2ggPSB0aGlzLnBlZWsoKTtcclxuICAgICAgICBpZiAoY2ggPT0gJ2UnICYmIHRoaXMuaXNFeHBPcGVyYXRvcihwZWVrQ2gpKSB7XHJcbiAgICAgICAgICBudW1iZXIgKz0gY2g7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRXhwT3BlcmF0b3IoY2gpICYmXHJcbiAgICAgICAgICAgIHBlZWtDaCAmJiB0aGlzLmlzTnVtYmVyKHBlZWtDaCkgJiZcclxuICAgICAgICAgICAgbnVtYmVyLmNoYXJBdChudW1iZXIubGVuZ3RoIC0gMSkgPT0gJ2UnKSB7XHJcbiAgICAgICAgICBudW1iZXIgKz0gY2g7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRXhwT3BlcmF0b3IoY2gpICYmXHJcbiAgICAgICAgICAgICghcGVla0NoIHx8ICF0aGlzLmlzTnVtYmVyKHBlZWtDaCkpICYmXHJcbiAgICAgICAgICAgIG51bWJlci5jaGFyQXQobnVtYmVyLmxlbmd0aCAtIDEpID09ICdlJykge1xyXG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJbnZhbGlkIGV4cG9uZW50Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICB9XHJcbiAgICBudW1iZXIgPSAxICogbnVtYmVyO1xyXG4gICAgdGhpcy50b2tlbnMucHVzaCh7XHJcbiAgICAgIGluZGV4OiBzdGFydCxcclxuICAgICAgdGV4dDogbnVtYmVyLFxyXG4gICAgICBjb25zdGFudDogdHJ1ZSxcclxuICAgICAgZm46IGZ1bmN0aW9uKCkgeyByZXR1cm4gbnVtYmVyOyB9XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICByZWFkSWRlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLnRleHQ7XHJcblxyXG4gICAgdmFyIGlkZW50ID0gJyc7XHJcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xyXG5cclxuICAgIHZhciBsYXN0RG90LCBwZWVrSW5kZXgsIG1ldGhvZE5hbWUsIGNoO1xyXG5cclxuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xyXG4gICAgICBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XHJcbiAgICAgIGlmIChjaCA9PT0gJy4nIHx8IHRoaXMuaXNJZGVudChjaCkgfHwgdGhpcy5pc051bWJlcihjaCkpIHtcclxuICAgICAgICBpZiAoY2ggPT09ICcuJykgbGFzdERvdCA9IHRoaXMuaW5kZXg7XHJcbiAgICAgICAgaWRlbnQgKz0gY2g7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgfVxyXG5cclxuICAgIC8vY2hlY2sgaWYgdGhlIGlkZW50aWZpZXIgZW5kcyB3aXRoIC4gYW5kIGlmIHNvIG1vdmUgYmFjayBvbmUgY2hhclxyXG4gICAgaWYgKGxhc3REb3QgJiYgaWRlbnRbaWRlbnQubGVuZ3RoIC0gMV0gPT09ICcuJykge1xyXG4gICAgICB0aGlzLmluZGV4LS07XHJcbiAgICAgIGlkZW50ID0gaWRlbnQuc2xpY2UoMCwgLTEpO1xyXG4gICAgICBsYXN0RG90ID0gaWRlbnQubGFzdEluZGV4T2YoJy4nKTtcclxuICAgICAgaWYgKGxhc3REb3QgPT09IC0xKSB7XHJcbiAgICAgICAgbGFzdERvdCA9IHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vY2hlY2sgaWYgdGhpcyBpcyBub3QgYSBtZXRob2QgaW52b2NhdGlvbiBhbmQgaWYgaXQgaXMgYmFjayBvdXQgdG8gbGFzdCBkb3RcclxuICAgIGlmIChsYXN0RG90KSB7XHJcbiAgICAgIHBlZWtJbmRleCA9IHRoaXMuaW5kZXg7XHJcbiAgICAgIHdoaWxlIChwZWVrSW5kZXggPCB0aGlzLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgY2ggPSB0aGlzLnRleHQuY2hhckF0KHBlZWtJbmRleCk7XHJcbiAgICAgICAgaWYgKGNoID09PSAnKCcpIHtcclxuICAgICAgICAgIG1ldGhvZE5hbWUgPSBpZGVudC5zdWJzdHIobGFzdERvdCAtIHN0YXJ0ICsgMSk7XHJcbiAgICAgICAgICBpZGVudCA9IGlkZW50LnN1YnN0cigwLCBsYXN0RG90IC0gc3RhcnQpO1xyXG4gICAgICAgICAgdGhpcy5pbmRleCA9IHBlZWtJbmRleDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc1doaXRlc3BhY2UoY2gpKSB7XHJcbiAgICAgICAgICBwZWVrSW5kZXgrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2tlbnMucHVzaCh7XHJcbiAgICAgIGluZGV4OiBzdGFydCxcclxuICAgICAgdGV4dDogaWRlbnQsXHJcbiAgICAgIGZuOiBDT05TVEFOVFNbaWRlbnRdIHx8IGdldHRlckZuKGlkZW50LCB0aGlzLm9wdGlvbnMsIGV4cHJlc3Npb24pXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobWV0aG9kTmFtZSkge1xyXG4gICAgICB0aGlzLnRva2Vucy5wdXNoKHtcclxuICAgICAgICBpbmRleDogbGFzdERvdCxcclxuICAgICAgICB0ZXh0OiAnLidcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMudG9rZW5zLnB1c2goe1xyXG4gICAgICAgIGluZGV4OiBsYXN0RG90ICsgMSxcclxuICAgICAgICB0ZXh0OiBtZXRob2ROYW1lXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHJlYWRTdHJpbmc6IGZ1bmN0aW9uKHF1b3RlKSB7XHJcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xyXG4gICAgdGhpcy5pbmRleCsrO1xyXG4gICAgdmFyIHN0cmluZyA9ICcnO1xyXG4gICAgdmFyIHJhd1N0cmluZyA9IHF1b3RlO1xyXG4gICAgdmFyIGVzY2FwZSA9IGZhbHNlO1xyXG4gICAgd2hpbGUgKHRoaXMuaW5kZXggPCB0aGlzLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XHJcbiAgICAgIHJhd1N0cmluZyArPSBjaDtcclxuICAgICAgaWYgKGVzY2FwZSkge1xyXG4gICAgICAgIGlmIChjaCA9PT0gJ3UnKSB7XHJcbiAgICAgICAgICB2YXIgaGV4ID0gdGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLmluZGV4ICsgMSwgdGhpcy5pbmRleCArIDUpO1xyXG4gICAgICAgICAgaWYgKCFoZXgubWF0Y2goL1tcXGRhLWZdezR9L2kpKVxyXG4gICAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ0ludmFsaWQgdW5pY29kZSBlc2NhcGUgW1xcXFx1JyArIGhleCArICddJyk7XHJcbiAgICAgICAgICB0aGlzLmluZGV4ICs9IDQ7XHJcbiAgICAgICAgICBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChoZXgsIDE2KSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhciByZXAgPSBFU0NBUEVbY2hdO1xyXG4gICAgICAgICAgc3RyaW5nID0gc3RyaW5nICsgKHJlcCB8fCBjaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVzY2FwZSA9IGZhbHNlO1xyXG4gICAgICB9IGVsc2UgaWYgKGNoID09PSAnXFxcXCcpIHtcclxuICAgICAgICBlc2NhcGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKGNoID09PSBxdW90ZSkge1xyXG4gICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtcclxuICAgICAgICAgIGluZGV4OiBzdGFydCxcclxuICAgICAgICAgIHRleHQ6IHJhd1N0cmluZyxcclxuICAgICAgICAgIHN0cmluZzogc3RyaW5nLFxyXG4gICAgICAgICAgY29uc3RhbnQ6IHRydWUsXHJcbiAgICAgICAgICBmbjogZnVuY3Rpb24oKSB7IHJldHVybiBzdHJpbmc7IH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3RyaW5nICs9IGNoO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgIH1cclxuICAgIHRoaXMudGhyb3dFcnJvcignVW50ZXJtaW5hdGVkIHF1b3RlJywgc3RhcnQpO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiBpc0NvbnN0YW50KGV4cCkge1xyXG4gIHJldHVybiBleHAuY29uc3RhbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbnZhciBQYXJzZXIgPSBmdW5jdGlvbiAobGV4ZXIsICRmaWx0ZXIsIG9wdGlvbnMpIHtcclxuICB0aGlzLmxleGVyID0gbGV4ZXI7XHJcbiAgdGhpcy4kZmlsdGVyID0gJGZpbHRlcjtcclxuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG59O1xyXG5cclxuUGFyc2VyLlpFUk8gPSBleHRlbmQoZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiAwO1xyXG59LCB7XHJcbiAgc2hhcmVkR2V0dGVyOiB0cnVlLFxyXG4gIGNvbnN0YW50OiB0cnVlXHJcbn0pO1xyXG5cclxuUGFyc2VyLnByb3RvdHlwZSA9IHtcclxuICBjb25zdHJ1Y3RvcjogUGFyc2VyLFxyXG5cclxuICBwYXJzZTogZnVuY3Rpb24gKHRleHQpIHtcclxuICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICB0aGlzLnRva2VucyA9IHRoaXMubGV4ZXIubGV4KHRleHQpO1xyXG5cclxuICAgIHZhciB2YWx1ZSA9IHRoaXMuc3RhdGVtZW50cygpO1xyXG5cclxuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggIT09IDApIHtcclxuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBhbiB1bmV4cGVjdGVkIHRva2VuJywgdGhpcy50b2tlbnNbMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlLmxpdGVyYWwgPSAhIXZhbHVlLmxpdGVyYWw7XHJcbiAgICB2YWx1ZS5jb25zdGFudCA9ICEhdmFsdWUuY29uc3RhbnQ7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH0sXHJcblxyXG4gIHByaW1hcnk6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBwcmltYXJ5O1xyXG4gICAgaWYgKHRoaXMuZXhwZWN0KCcoJykpIHtcclxuICAgICAgcHJpbWFyeSA9IHRoaXMuZmlsdGVyQ2hhaW4oKTtcclxuICAgICAgdGhpcy5jb25zdW1lKCcpJyk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCdbJykpIHtcclxuICAgICAgcHJpbWFyeSA9IHRoaXMuYXJyYXlEZWNsYXJhdGlvbigpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmV4cGVjdCgneycpKSB7XHJcbiAgICAgIHByaW1hcnkgPSB0aGlzLm9iamVjdCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIHRva2VuID0gdGhpcy5leHBlY3QoKTtcclxuICAgICAgcHJpbWFyeSA9IHRva2VuLmZuO1xyXG4gICAgICBpZiAoIXByaW1hcnkpIHtcclxuICAgICAgICB0aGlzLnRocm93RXJyb3IoJ25vdCBhIHByaW1hcnkgZXhwcmVzc2lvbicsIHRva2VuKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodG9rZW4uY29uc3RhbnQpIHtcclxuICAgICAgICBwcmltYXJ5LmNvbnN0YW50ID0gdHJ1ZTtcclxuICAgICAgICBwcmltYXJ5LmxpdGVyYWwgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG5leHQsIGNvbnRleHQ7XHJcbiAgICB3aGlsZSAoKG5leHQgPSB0aGlzLmV4cGVjdCgnKCcsICdbJywgJy4nKSkpIHtcclxuICAgICAgaWYgKG5leHQudGV4dCA9PT0gJygnKSB7XHJcbiAgICAgICAgcHJpbWFyeSA9IHRoaXMuZnVuY3Rpb25DYWxsKHByaW1hcnksIGNvbnRleHQpO1xyXG4gICAgICAgIGNvbnRleHQgPSBudWxsO1xyXG4gICAgICB9IGVsc2UgaWYgKG5leHQudGV4dCA9PT0gJ1snKSB7XHJcbiAgICAgICAgY29udGV4dCA9IHByaW1hcnk7XHJcbiAgICAgICAgcHJpbWFyeSA9IHRoaXMub2JqZWN0SW5kZXgocHJpbWFyeSk7XHJcbiAgICAgIH0gZWxzZSBpZiAobmV4dC50ZXh0ID09PSAnLicpIHtcclxuICAgICAgICBjb250ZXh0ID0gcHJpbWFyeTtcclxuICAgICAgICBwcmltYXJ5ID0gdGhpcy5maWVsZEFjY2VzcyhwcmltYXJ5KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnRocm93RXJyb3IoJ0lNUE9TU0lCTEUnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByaW1hcnk7XHJcbiAgfSxcclxuXHJcbiAgdGhyb3dFcnJvcjogZnVuY3Rpb24obXNnLCB0b2tlbikge1xyXG4gICAgdGhyb3cgJHBhcnNlTWluRXJyKCdzeW50YXgnLFxyXG4gICAgICAgICdTeW50YXggRXJyb3I6IFRva2VuIFxcJ3swfVxcJyB7MX0gYXQgY29sdW1uIHsyfSBvZiB0aGUgZXhwcmVzc2lvbiBbezN9XSBzdGFydGluZyBhdCBbezR9XS4nLFxyXG4gICAgICAgICAgdG9rZW4udGV4dCwgbXNnLCAodG9rZW4uaW5kZXggKyAxKSwgdGhpcy50ZXh0LCB0aGlzLnRleHQuc3Vic3RyaW5nKHRva2VuLmluZGV4KSk7XHJcbiAgfSxcclxuXHJcbiAgcGVla1Rva2VuOiBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggPT09IDApXHJcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycigndWVvZScsICdVbmV4cGVjdGVkIGVuZCBvZiBleHByZXNzaW9uOiB7MH0nLCB0aGlzLnRleHQpO1xyXG4gICAgcmV0dXJuIHRoaXMudG9rZW5zWzBdO1xyXG4gIH0sXHJcblxyXG4gIHBlZWs6IGZ1bmN0aW9uKGUxLCBlMiwgZTMsIGU0KSB7XHJcbiAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB2YXIgdG9rZW4gPSB0aGlzLnRva2Vuc1swXTtcclxuICAgICAgdmFyIHQgPSB0b2tlbi50ZXh0O1xyXG4gICAgICBpZiAodCA9PT0gZTEgfHwgdCA9PT0gZTIgfHwgdCA9PT0gZTMgfHwgdCA9PT0gZTQgfHxcclxuICAgICAgICAgICghZTEgJiYgIWUyICYmICFlMyAmJiAhZTQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSxcclxuXHJcbiAgZXhwZWN0OiBmdW5jdGlvbihlMSwgZTIsIGUzLCBlNCl7XHJcbiAgICB2YXIgdG9rZW4gPSB0aGlzLnBlZWsoZTEsIGUyLCBlMywgZTQpO1xyXG4gICAgaWYgKHRva2VuKSB7XHJcbiAgICAgIHRoaXMudG9rZW5zLnNoaWZ0KCk7XHJcbiAgICAgIHJldHVybiB0b2tlbjtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9LFxyXG5cclxuICBjb25zdW1lOiBmdW5jdGlvbihlMSl7XHJcbiAgICBpZiAoIXRoaXMuZXhwZWN0KGUxKSkge1xyXG4gICAgICB0aGlzLnRocm93RXJyb3IoJ2lzIHVuZXhwZWN0ZWQsIGV4cGVjdGluZyBbJyArIGUxICsgJ10nLCB0aGlzLnBlZWsoKSk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgdW5hcnlGbjogZnVuY3Rpb24oZm4sIHJpZ2h0KSB7XHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZVVuYXJ5Rm4oc2VsZiwgbG9jYWxzKSB7XHJcbiAgICAgIHJldHVybiBmbihzZWxmLCBsb2NhbHMsIHJpZ2h0KTtcclxuICAgIH0sIHtcclxuICAgICAgY29uc3RhbnQ6cmlnaHQuY29uc3RhbnQsXHJcbiAgICAgIGlucHV0czogW3JpZ2h0XVxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgYmluYXJ5Rm46IGZ1bmN0aW9uKGxlZnQsIGZuLCByaWdodCwgaXNCcmFuY2hpbmcpIHtcclxuICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlQmluYXJ5Rm4oc2VsZiwgbG9jYWxzKSB7XHJcbiAgICAgIHJldHVybiBmbihzZWxmLCBsb2NhbHMsIGxlZnQsIHJpZ2h0KTtcclxuICAgIH0sIHtcclxuICAgICAgY29uc3RhbnQ6IGxlZnQuY29uc3RhbnQgJiYgcmlnaHQuY29uc3RhbnQsXHJcbiAgICAgIGlucHV0czogIWlzQnJhbmNoaW5nICYmIFtsZWZ0LCByaWdodF1cclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIHN0YXRlbWVudHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHN0YXRlbWVudHMgPSBbXTtcclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggPiAwICYmICF0aGlzLnBlZWsoJ30nLCAnKScsICc7JywgJ10nKSlcclxuICAgICAgICBzdGF0ZW1lbnRzLnB1c2godGhpcy5maWx0ZXJDaGFpbigpKTtcclxuICAgICAgaWYgKCF0aGlzLmV4cGVjdCgnOycpKSB7XHJcbiAgICAgICAgLy8gb3B0aW1pemUgZm9yIHRoZSBjb21tb24gY2FzZSB3aGVyZSB0aGVyZSBpcyBvbmx5IG9uZSBzdGF0ZW1lbnQuXHJcbiAgICAgICAgLy8gVE9ETyhzaXplKTogbWF5YmUgd2Ugc2hvdWxkIG5vdCBzdXBwb3J0IG11bHRpcGxlIHN0YXRlbWVudHM/XHJcbiAgICAgICAgcmV0dXJuIChzdGF0ZW1lbnRzLmxlbmd0aCA9PT0gMSlcclxuICAgICAgICAgICAgPyBzdGF0ZW1lbnRzWzBdXHJcbiAgICAgICAgICAgIDogZnVuY3Rpb24gJHBhcnNlU3RhdGVtZW50cyhzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHN0YXRlbWVudHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IHN0YXRlbWVudHNbaV0oc2VsZiwgbG9jYWxzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgZmlsdGVyQ2hhaW46IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxlZnQgPSB0aGlzLmV4cHJlc3Npb24oKTtcclxuICAgIHZhciB0b2tlbjtcclxuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnfCcpKSkge1xyXG4gICAgICBsZWZ0ID0gdGhpcy5maWx0ZXIobGVmdCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICBmaWx0ZXI6IGZ1bmN0aW9uKGlucHV0Rm4pIHtcclxuICAgIHZhciB0b2tlbiA9IHRoaXMuZXhwZWN0KCk7XHJcbiAgICB2YXIgZm4gPSB0aGlzLiRmaWx0ZXIodG9rZW4udGV4dCk7XHJcbiAgICB2YXIgYXJnc0ZuO1xyXG4gICAgdmFyIGFyZ3M7XHJcblxyXG4gICAgaWYgKHRoaXMucGVlaygnOicpKSB7XHJcbiAgICAgIGFyZ3NGbiA9IFtdO1xyXG4gICAgICBhcmdzID0gW107IC8vIHdlIGNhbiBzYWZlbHkgcmV1c2UgdGhlIGFycmF5XHJcbiAgICAgIHdoaWxlICh0aGlzLmV4cGVjdCgnOicpKSB7XHJcbiAgICAgICAgYXJnc0ZuLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGlucHV0cyA9IFtpbnB1dEZuXS5jb25jYXQoYXJnc0ZuIHx8IFtdKTtcclxuXHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUZpbHRlcihzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgdmFyIGlucHV0ID0gaW5wdXRGbihzZWxmLCBsb2NhbHMpO1xyXG4gICAgICBpZiAoYXJncykge1xyXG4gICAgICAgIGFyZ3NbMF0gPSBpbnB1dDtcclxuXHJcbiAgICAgICAgdmFyIGkgPSBhcmdzRm4ubGVuZ3RoO1xyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgIGFyZ3NbaSArIDFdID0gYXJnc0ZuW2ldKHNlbGYsIGxvY2Fscyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZm4uYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGZuKGlucHV0KTtcclxuICAgIH0sIHtcclxuICAgICAgY29uc3RhbnQ6ICFmbi4kc3RhdGVmdWwgJiYgaW5wdXRzLmV2ZXJ5KGlzQ29uc3RhbnQpLFxyXG4gICAgICBpbnB1dHM6ICFmbi4kc3RhdGVmdWwgJiYgaW5wdXRzXHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBleHByZXNzaW9uOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmFzc2lnbm1lbnQoKTtcclxuICB9LFxyXG5cclxuICBhc3NpZ25tZW50OiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy50ZXJuYXJ5KCk7XHJcbiAgICB2YXIgcmlnaHQ7XHJcbiAgICB2YXIgdG9rZW47XHJcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJz0nKSkpIHtcclxuICAgICAgaWYgKCFsZWZ0LmFzc2lnbikge1xyXG4gICAgICAgIHRoaXMudGhyb3dFcnJvcignaW1wbGllcyBhc3NpZ25tZW50IGJ1dCBbJyArXHJcbiAgICAgICAgICAgIHRoaXMudGV4dC5zdWJzdHJpbmcoMCwgdG9rZW4uaW5kZXgpICsgJ10gY2FuIG5vdCBiZSBhc3NpZ25lZCB0bycsIHRva2VuKTtcclxuICAgICAgfVxyXG4gICAgICByaWdodCA9IHRoaXMudGVybmFyeSgpO1xyXG4gICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUFzc2lnbm1lbnQoc2NvcGUsIGxvY2Fscykge1xyXG4gICAgICAgIHJldHVybiBsZWZ0LmFzc2lnbihzY29wZSwgcmlnaHQoc2NvcGUsIGxvY2FscyksIGxvY2Fscyk7XHJcbiAgICAgIH0sIHtcclxuICAgICAgICBpbnB1dHM6IFtsZWZ0LCByaWdodF1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICB0ZXJuYXJ5OiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy5sb2dpY2FsT1IoKTtcclxuICAgIHZhciBtaWRkbGU7XHJcbiAgICB2YXIgdG9rZW47XHJcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJz8nKSkpIHtcclxuICAgICAgbWlkZGxlID0gdGhpcy5hc3NpZ25tZW50KCk7XHJcbiAgICAgIGlmICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnOicpKSkge1xyXG4gICAgICAgIHZhciByaWdodCA9IHRoaXMuYXNzaWdubWVudCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZVRlcm5hcnkoc2VsZiwgbG9jYWxzKXtcclxuICAgICAgICAgIHJldHVybiBsZWZ0KHNlbGYsIGxvY2FscykgPyBtaWRkbGUoc2VsZiwgbG9jYWxzKSA6IHJpZ2h0KHNlbGYsIGxvY2Fscyk7XHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgY29uc3RhbnQ6IGxlZnQuY29uc3RhbnQgJiYgbWlkZGxlLmNvbnN0YW50ICYmIHJpZ2h0LmNvbnN0YW50XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudGhyb3dFcnJvcignZXhwZWN0ZWQgOicsIHRva2VuKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsZWZ0O1xyXG4gIH0sXHJcblxyXG4gIGxvZ2ljYWxPUjogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMubG9naWNhbEFORCgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCd8fCcpKSkge1xyXG4gICAgICBsZWZ0ID0gdGhpcy5iaW5hcnlGbihsZWZ0LCB0b2tlbi5mbiwgdGhpcy5sb2dpY2FsQU5EKCksIHRydWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgbG9naWNhbEFORDogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMuZXF1YWxpdHkoKTtcclxuICAgIHZhciB0b2tlbjtcclxuICAgIGlmICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnJiYnKSkpIHtcclxuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4uZm4sIHRoaXMubG9naWNhbEFORCgpLCB0cnVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsZWZ0O1xyXG4gIH0sXHJcblxyXG4gIGVxdWFsaXR5OiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy5yZWxhdGlvbmFsKCk7XHJcbiAgICB2YXIgdG9rZW47XHJcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJz09JywnIT0nLCc9PT0nLCchPT0nKSkpIHtcclxuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4uZm4sIHRoaXMuZXF1YWxpdHkoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICByZWxhdGlvbmFsOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy5hZGRpdGl2ZSgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgaWYgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc8JywgJz4nLCAnPD0nLCAnPj0nKSkpIHtcclxuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4uZm4sIHRoaXMucmVsYXRpb25hbCgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsZWZ0O1xyXG4gIH0sXHJcblxyXG4gIGFkZGl0aXZlOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy5tdWx0aXBsaWNhdGl2ZSgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCcrJywnLScpKSkge1xyXG4gICAgICBsZWZ0ID0gdGhpcy5iaW5hcnlGbihsZWZ0LCB0b2tlbi5mbiwgdGhpcy5tdWx0aXBsaWNhdGl2ZSgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsZWZ0O1xyXG4gIH0sXHJcblxyXG4gIG11bHRpcGxpY2F0aXZlOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy51bmFyeSgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCcqJywnLycsJyUnKSkpIHtcclxuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4uZm4sIHRoaXMudW5hcnkoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICB1bmFyeTogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdG9rZW47XHJcbiAgICBpZiAodGhpcy5leHBlY3QoJysnKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5wcmltYXJ5KCk7XHJcbiAgICB9IGVsc2UgaWYgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCctJykpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmJpbmFyeUZuKFBhcnNlci5aRVJPLCB0b2tlbi5mbiwgdGhpcy51bmFyeSgpKTtcclxuICAgIH0gZWxzZSBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJyEnKSkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMudW5hcnlGbih0b2tlbi5mbiwgdGhpcy51bmFyeSgpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnByaW1hcnkoKTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBmaWVsZEFjY2VzczogZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMudGV4dDtcclxuICAgIHZhciBmaWVsZCA9IHRoaXMuZXhwZWN0KCkudGV4dDtcclxuICAgIHZhciBnZXR0ZXIgPSBnZXR0ZXJGbihmaWVsZCwgdGhpcy5vcHRpb25zLCBleHByZXNzaW9uKTtcclxuXHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUZpZWxkQWNjZXNzKHNjb3BlLCBsb2NhbHMsIHNlbGYpIHtcclxuICAgICAgcmV0dXJuIGdldHRlcihzZWxmIHx8IG9iamVjdChzY29wZSwgbG9jYWxzKSk7XHJcbiAgICB9LCB7XHJcbiAgICAgIGFzc2lnbjogZnVuY3Rpb24oc2NvcGUsIHZhbHVlLCBsb2NhbHMpIHtcclxuICAgICAgICB2YXIgbyA9IG9iamVjdChzY29wZSwgbG9jYWxzKTtcclxuICAgICAgICBpZiAoIW8pIG9iamVjdC5hc3NpZ24oc2NvcGUsIG8gPSB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHNldHRlcihvLCBmaWVsZCwgdmFsdWUsIGV4cHJlc3Npb24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBvYmplY3RJbmRleDogZnVuY3Rpb24ob2JqKSB7XHJcbiAgICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMudGV4dDtcclxuXHJcbiAgICB2YXIgaW5kZXhGbiA9IHRoaXMuZXhwcmVzc2lvbigpO1xyXG4gICAgdGhpcy5jb25zdW1lKCddJyk7XHJcblxyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VPYmplY3RJbmRleChzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgdmFyIG8gPSBvYmooc2VsZiwgbG9jYWxzKSxcclxuICAgICAgICAgIGkgPSBpbmRleEZuKHNlbGYsIGxvY2FscyksXHJcbiAgICAgICAgICB2O1xyXG5cclxuICAgICAgZW5zdXJlU2FmZU1lbWJlck5hbWUoaSwgZXhwcmVzc2lvbik7XHJcbiAgICAgIGlmICghbykgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgdiA9IGVuc3VyZVNhZmVPYmplY3Qob1tpXSwgZXhwcmVzc2lvbik7XHJcbiAgICAgIHJldHVybiB2O1xyXG4gICAgfSwge1xyXG4gICAgICBhc3NpZ246IGZ1bmN0aW9uKHNlbGYsIHZhbHVlLCBsb2NhbHMpIHtcclxuICAgICAgICB2YXIga2V5ID0gZW5zdXJlU2FmZU1lbWJlck5hbWUoaW5kZXhGbihzZWxmLCBsb2NhbHMpLCBleHByZXNzaW9uKTtcclxuICAgICAgICAvLyBwcmV2ZW50IG92ZXJ3cml0aW5nIG9mIEZ1bmN0aW9uLmNvbnN0cnVjdG9yIHdoaWNoIHdvdWxkIGJyZWFrIGVuc3VyZVNhZmVPYmplY3QgY2hlY2tcclxuICAgICAgICB2YXIgbyA9IGVuc3VyZVNhZmVPYmplY3Qob2JqKHNlbGYsIGxvY2FscyksIGV4cHJlc3Npb24pO1xyXG4gICAgICAgIGlmICghbykgb2JqLmFzc2lnbihzZWxmLCBvID0ge30pO1xyXG4gICAgICAgIHJldHVybiBvW2tleV0gPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgZnVuY3Rpb25DYWxsOiBmdW5jdGlvbihmbkdldHRlciwgY29udGV4dEdldHRlcikge1xyXG4gICAgdmFyIGFyZ3NGbiA9IFtdO1xyXG4gICAgaWYgKHRoaXMucGVla1Rva2VuKCkudGV4dCAhPT0gJyknKSB7XHJcbiAgICAgIGRvIHtcclxuICAgICAgICBhcmdzRm4ucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7XHJcbiAgICAgIH0gd2hpbGUgKHRoaXMuZXhwZWN0KCcsJykpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb25zdW1lKCcpJyk7XHJcblxyXG4gICAgdmFyIGV4cHJlc3Npb25UZXh0ID0gdGhpcy50ZXh0O1xyXG4gICAgLy8gd2UgY2FuIHNhZmVseSByZXVzZSB0aGUgYXJyYXkgYWNyb3NzIGludm9jYXRpb25zXHJcbiAgICB2YXIgYXJncyA9IGFyZ3NGbi5sZW5ndGggPyBbXSA6IG51bGw7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICRwYXJzZUZ1bmN0aW9uQ2FsbChzY29wZSwgbG9jYWxzKSB7XHJcbiAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dEdldHRlciA/IGNvbnRleHRHZXR0ZXIoc2NvcGUsIGxvY2FscykgOiBzY29wZTtcclxuICAgICAgdmFyIGZuID0gZm5HZXR0ZXIoc2NvcGUsIGxvY2FscywgY29udGV4dCkgfHwgbm9vcDtcclxuXHJcbiAgICAgIGlmIChhcmdzKSB7XHJcbiAgICAgICAgdmFyIGkgPSBhcmdzRm4ubGVuZ3RoO1xyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgIGFyZ3NbaV0gPSBlbnN1cmVTYWZlT2JqZWN0KGFyZ3NGbltpXShzY29wZSwgbG9jYWxzKSwgZXhwcmVzc2lvblRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZW5zdXJlU2FmZU9iamVjdChjb250ZXh0LCBleHByZXNzaW9uVGV4dCk7XHJcbiAgICAgIGVuc3VyZVNhZmVGdW5jdGlvbihmbiwgZXhwcmVzc2lvblRleHQpO1xyXG5cclxuICAgICAgLy8gSUUgc3R1cGlkaXR5ISAoSUUgZG9lc24ndCBoYXZlIGFwcGx5IGZvciBzb21lIG5hdGl2ZSBmdW5jdGlvbnMpXHJcbiAgICAgIHZhciB2ID0gZm4uYXBwbHlcclxuICAgICAgICAgICAgPyBmbi5hcHBseShjb250ZXh0LCBhcmdzKVxyXG4gICAgICAgICAgICA6IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10sIGFyZ3NbNF0pO1xyXG5cclxuICAgICAgcmV0dXJuIGVuc3VyZVNhZmVPYmplY3QodiwgZXhwcmVzc2lvblRleHQpO1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICAvLyBUaGlzIGlzIHVzZWQgd2l0aCBqc29uIGFycmF5IGRlY2xhcmF0aW9uXHJcbiAgYXJyYXlEZWNsYXJhdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGVsZW1lbnRGbnMgPSBbXTtcclxuICAgIGlmICh0aGlzLnBlZWtUb2tlbigpLnRleHQgIT09ICddJykge1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgaWYgKHRoaXMucGVlaygnXScpKSB7XHJcbiAgICAgICAgICAvLyBTdXBwb3J0IHRyYWlsaW5nIGNvbW1hcyBwZXIgRVM1LjEuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVsZW1lbnRGbiA9IHRoaXMuZXhwcmVzc2lvbigpO1xyXG4gICAgICAgIGVsZW1lbnRGbnMucHVzaChlbGVtZW50Rm4pO1xyXG4gICAgICB9IHdoaWxlICh0aGlzLmV4cGVjdCgnLCcpKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29uc3VtZSgnXScpO1xyXG5cclxuICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlQXJyYXlMaXRlcmFsKHNlbGYsIGxvY2Fscykge1xyXG4gICAgICB2YXIgYXJyYXkgPSBbXTtcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZWxlbWVudEZucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgYXJyYXkucHVzaChlbGVtZW50Rm5zW2ldKHNlbGYsIGxvY2FscykpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH0sIHtcclxuICAgICAgbGl0ZXJhbDogdHJ1ZSxcclxuICAgICAgY29uc3RhbnQ6IGVsZW1lbnRGbnMuZXZlcnkoaXNDb25zdGFudCksXHJcbiAgICAgIGlucHV0czogZWxlbWVudEZuc1xyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgb2JqZWN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIga2V5cyA9IFtdLCB2YWx1ZUZucyA9IFtdO1xyXG4gICAgaWYgKHRoaXMucGVla1Rva2VuKCkudGV4dCAhPT0gJ30nKSB7XHJcbiAgICAgIGRvIHtcclxuICAgICAgICBpZiAodGhpcy5wZWVrKCd9JykpIHtcclxuICAgICAgICAgIC8vIFN1cHBvcnQgdHJhaWxpbmcgY29tbWFzIHBlciBFUzUuMS5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmV4cGVjdCgpO1xyXG4gICAgICAgIGtleXMucHVzaCh0b2tlbi5zdHJpbmcgfHwgdG9rZW4udGV4dCk7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lKCc6Jyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5leHByZXNzaW9uKCk7XHJcbiAgICAgICAgdmFsdWVGbnMucHVzaCh2YWx1ZSk7XHJcbiAgICAgIH0gd2hpbGUgKHRoaXMuZXhwZWN0KCcsJykpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb25zdW1lKCd9Jyk7XHJcblxyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VPYmplY3RMaXRlcmFsKHNlbGYsIGxvY2Fscykge1xyXG4gICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHZhbHVlRm5zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICBvYmplY3Rba2V5c1tpXV0gPSB2YWx1ZUZuc1tpXShzZWxmLCBsb2NhbHMpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICB9LCB7XHJcbiAgICAgIGxpdGVyYWw6IHRydWUsXHJcbiAgICAgIGNvbnN0YW50OiB2YWx1ZUZucy5ldmVyeShpc0NvbnN0YW50KSxcclxuICAgICAgaW5wdXRzOiB2YWx1ZUZuc1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIFBhcnNlciBoZWxwZXIgZnVuY3Rpb25zXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBzZXR0ZXIob2JqLCBwYXRoLCBzZXRWYWx1ZSwgZnVsbEV4cCkge1xyXG4gIGVuc3VyZVNhZmVPYmplY3Qob2JqLCBmdWxsRXhwKTtcclxuXHJcbiAgdmFyIGVsZW1lbnQgPSBwYXRoLnNwbGl0KCcuJyksIGtleTtcclxuICBmb3IgKHZhciBpID0gMDsgZWxlbWVudC5sZW5ndGggPiAxOyBpKyspIHtcclxuICAgIGtleSA9IGVuc3VyZVNhZmVNZW1iZXJOYW1lKGVsZW1lbnQuc2hpZnQoKSwgZnVsbEV4cCk7XHJcbiAgICB2YXIgcHJvcGVydHlPYmogPSBlbnN1cmVTYWZlT2JqZWN0KG9ialtrZXldLCBmdWxsRXhwKTtcclxuICAgIGlmICghcHJvcGVydHlPYmopIHtcclxuICAgICAgcHJvcGVydHlPYmogPSB7fTtcclxuICAgICAgb2JqW2tleV0gPSBwcm9wZXJ0eU9iajtcclxuICAgIH1cclxuICAgIG9iaiA9IHByb3BlcnR5T2JqO1xyXG4gIH1cclxuICBrZXkgPSBlbnN1cmVTYWZlTWVtYmVyTmFtZShlbGVtZW50LnNoaWZ0KCksIGZ1bGxFeHApO1xyXG4gIGVuc3VyZVNhZmVPYmplY3Qob2JqW2tleV0sIGZ1bGxFeHApO1xyXG4gIG9ialtrZXldID0gc2V0VmFsdWU7XHJcbiAgcmV0dXJuIHNldFZhbHVlO1xyXG59XHJcblxyXG52YXIgZ2V0dGVyRm5DYWNoZSA9IGNyZWF0ZU1hcCgpO1xyXG5cclxuLyoqXHJcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBcIkJsYWNrIEhvbGVcIiB2YXJpYW50IGZyb206XHJcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vYW5ndWxhcmpzLXBhcnNlLWdldHRlci80XHJcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vcGF0aC1ldmFsdWF0aW9uLXNpbXBsaWZpZWQvN1xyXG4gKi9cclxuZnVuY3Rpb24gY3NwU2FmZUdldHRlckZuKGtleTAsIGtleTEsIGtleTIsIGtleTMsIGtleTQsIGZ1bGxFeHApIHtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkwLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkxLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkyLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkzLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXk0LCBmdWxsRXhwKTtcclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uIGNzcFNhZmVHZXR0ZXIoc2NvcGUsIGxvY2Fscykge1xyXG4gICAgdmFyIHBhdGhWYWwgPSAobG9jYWxzICYmIGxvY2Fscy5oYXNPd25Qcm9wZXJ0eShrZXkwKSkgPyBsb2NhbHMgOiBzY29wZTtcclxuXHJcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gcGF0aFZhbDtcclxuICAgIHBhdGhWYWwgPSBwYXRoVmFsW2tleTBdO1xyXG5cclxuICAgIGlmICgha2V5MSkgcmV0dXJuIHBhdGhWYWw7XHJcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgcGF0aFZhbCA9IHBhdGhWYWxba2V5MV07XHJcblxyXG4gICAgaWYgKCFrZXkyKSByZXR1cm4gcGF0aFZhbDtcclxuICAgIGlmIChwYXRoVmFsID09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBwYXRoVmFsID0gcGF0aFZhbFtrZXkyXTtcclxuXHJcbiAgICBpZiAoIWtleTMpIHJldHVybiBwYXRoVmFsO1xyXG4gICAgaWYgKHBhdGhWYWwgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIHBhdGhWYWwgPSBwYXRoVmFsW2tleTNdO1xyXG5cclxuICAgIGlmICgha2V5NCkgcmV0dXJuIHBhdGhWYWw7XHJcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgcGF0aFZhbCA9IHBhdGhWYWxba2V5NF07XHJcblxyXG4gICAgcmV0dXJuIHBhdGhWYWw7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0dGVyRm4ocGF0aCwgb3B0aW9ucywgZnVsbEV4cCkge1xyXG4gIHZhciBmbiA9IGdldHRlckZuQ2FjaGVbcGF0aF07XHJcblxyXG4gIGlmIChmbikgcmV0dXJuIGZuO1xyXG5cclxuICB2YXIgcGF0aEtleXMgPSBwYXRoLnNwbGl0KCcuJyksXHJcbiAgICAgIHBhdGhLZXlzTGVuZ3RoID0gcGF0aEtleXMubGVuZ3RoO1xyXG5cclxuICAvLyBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyanMtcGFyc2UtZ2V0dGVyLzZcclxuICBpZiAob3B0aW9ucy5jc3ApIHtcclxuICAgIGlmIChwYXRoS2V5c0xlbmd0aCA8IDYpIHtcclxuICAgICAgZm4gPSBjc3BTYWZlR2V0dGVyRm4ocGF0aEtleXNbMF0sIHBhdGhLZXlzWzFdLCBwYXRoS2V5c1syXSwgcGF0aEtleXNbM10sIHBhdGhLZXlzWzRdLCBmdWxsRXhwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZuID0gZnVuY3Rpb24gY3NwU2FmZUdldHRlcihzY29wZSwgbG9jYWxzKSB7XHJcbiAgICAgICAgdmFyIGkgPSAwLCB2YWw7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgdmFsID0gY3NwU2FmZUdldHRlckZuKHBhdGhLZXlzW2krK10sIHBhdGhLZXlzW2krK10sIHBhdGhLZXlzW2krK10sIHBhdGhLZXlzW2krK10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aEtleXNbaSsrXSwgZnVsbEV4cCkoc2NvcGUsIGxvY2Fscyk7XHJcblxyXG4gICAgICAgICAgbG9jYWxzID0gdW5kZWZpbmVkOyAvLyBjbGVhciBhZnRlciBmaXJzdCBpdGVyYXRpb25cclxuICAgICAgICAgIHNjb3BlID0gdmFsO1xyXG4gICAgICAgIH0gd2hpbGUgKGkgPCBwYXRoS2V5c0xlbmd0aCk7XHJcbiAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgdmFyIGNvZGUgPSAnJztcclxuICAgIGZvckVhY2gocGF0aEtleXMsIGZ1bmN0aW9uKGtleSwgaW5kZXgpIHtcclxuICAgICAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5LCBmdWxsRXhwKTtcclxuICAgICAgY29kZSArPSAnaWYocyA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xcbicgK1xyXG4gICAgICAgICAgICAgICdzPScrIChpbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gd2Ugc2ltcGx5IGRlcmVmZXJlbmNlICdzJyBvbiBhbnkgLmRvdCBub3RhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgPyAncydcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBpZiB3ZSBhcmUgZmlyc3QgdGhlbiB3ZSBjaGVjayBsb2NhbHMgZmlyc3QsIGFuZCBpZiBzbyByZWFkIGl0IGZpcnN0XHJcbiAgICAgICAgICAgICAgICAgICAgICA6ICcoKGwmJmwuaGFzT3duUHJvcGVydHkoXCInICsga2V5ICsgJ1wiKSk/bDpzKScpICsgJy4nICsga2V5ICsgJztcXG4nO1xyXG4gICAgfSk7XHJcbiAgICBjb2RlICs9ICdyZXR1cm4gczsnO1xyXG5cclxuICAgIC8qIGpzaGludCAtVzA1NCAqL1xyXG4gICAgdmFyIGV2YWxlZEZuR2V0dGVyID0gbmV3IEZ1bmN0aW9uKCdzJywgJ2wnLCBjb2RlKTsgLy8gcz1zY29wZSwgbD1sb2NhbHNcclxuICAgIC8qIGpzaGludCArVzA1NCAqL1xyXG4gICAgZXZhbGVkRm5HZXR0ZXIudG9TdHJpbmcgPSB2YWx1ZUZuKGNvZGUpO1xyXG5cclxuICAgIGZuID0gZXZhbGVkRm5HZXR0ZXI7XHJcbiAgfVxyXG5cclxuICBmbi5zaGFyZWRHZXR0ZXIgPSB0cnVlO1xyXG4gIGZuLmFzc2lnbiA9IGZ1bmN0aW9uKHNlbGYsIHZhbHVlKSB7XHJcbiAgICByZXR1cm4gc2V0dGVyKHNlbGYsIHBhdGgsIHZhbHVlLCBwYXRoKTtcclxuICB9O1xyXG4gIGdldHRlckZuQ2FjaGVbcGF0aF0gPSBmbjtcclxuICByZXR1cm4gZm47XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHBhcnNlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBDb252ZXJ0cyBBbmd1bGFyIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGludG8gYSBmdW5jdGlvbi5cclxuICpcclxuICogYGBganNcclxuICogICB2YXIgZ2V0dGVyID0gJHBhcnNlKCd1c2VyLm5hbWUnKTtcclxuICogICB2YXIgc2V0dGVyID0gZ2V0dGVyLmFzc2lnbjtcclxuICogICB2YXIgY29udGV4dCA9IHt1c2VyOntuYW1lOidhbmd1bGFyJ319O1xyXG4gKiAgIHZhciBsb2NhbHMgPSB7dXNlcjp7bmFtZTonbG9jYWwnfX07XHJcbiAqXHJcbiAqICAgZXhwZWN0KGdldHRlcihjb250ZXh0KSkudG9FcXVhbCgnYW5ndWxhcicpO1xyXG4gKiAgIHNldHRlcihjb250ZXh0LCAnbmV3VmFsdWUnKTtcclxuICogICBleHBlY3QoY29udGV4dC51c2VyLm5hbWUpLnRvRXF1YWwoJ25ld1ZhbHVlJyk7XHJcbiAqICAgZXhwZWN0KGdldHRlcihjb250ZXh0LCBsb2NhbHMpKS50b0VxdWFsKCdsb2NhbCcpO1xyXG4gKiBgYGBcclxuICpcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cclxuICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcclxuICpcclxuICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xyXG4gKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cclxuICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxyXG4gKiAgICAgIGBjb250ZXh0YC5cclxuICpcclxuICogICAgVGhlIHJldHVybmVkIGZ1bmN0aW9uIGFsc28gaGFzIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICogICAgICAqIGBsaXRlcmFsYCDigJMgYHtib29sZWFufWAg4oCTIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24ncyB0b3AtbGV2ZWwgbm9kZSBpcyBhIEphdmFTY3JpcHRcclxuICogICAgICAgIGxpdGVyYWwuXHJcbiAqICAgICAgKiBgY29uc3RhbnRgIOKAkyBge2Jvb2xlYW59YCDigJMgd2hldGhlciB0aGUgZXhwcmVzc2lvbiBpcyBtYWRlIGVudGlyZWx5IG9mIEphdmFTY3JpcHRcclxuICogICAgICAgIGNvbnN0YW50IGxpdGVyYWxzLlxyXG4gKiAgICAgICogYGFzc2lnbmAg4oCTIGB7P2Z1bmN0aW9uKGNvbnRleHQsIHZhbHVlKX1gIOKAkyBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhc3NpZ25hYmxlLCB0aGlzIHdpbGwgYmVcclxuICogICAgICAgIHNldCB0byBhIGZ1bmN0aW9uIHRvIGNoYW5nZSBpdHMgdmFsdWUgb24gdGhlIGdpdmVuIGNvbnRleHQuXHJcbiAqXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJHBhcnNlUHJvdmlkZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIGAkcGFyc2VQcm92aWRlcmAgY2FuIGJlIHVzZWQgZm9yIGNvbmZpZ3VyaW5nIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSB7QGxpbmsgbmcuJHBhcnNlICRwYXJzZX1cclxuICogIHNlcnZpY2UuXHJcbiAqL1xyXG5mdW5jdGlvbiAkUGFyc2VQcm92aWRlcigpIHtcclxuICB2YXIgY2FjaGUgPSBjcmVhdGVNYXAoKTtcclxuXHJcbiAgdmFyICRwYXJzZU9wdGlvbnMgPSB7XHJcbiAgICBjc3A6IGZhbHNlXHJcbiAgfTtcclxuXHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJGZpbHRlcicsICckc25pZmZlcicsIGZ1bmN0aW9uKCRmaWx0ZXIsICRzbmlmZmVyKSB7XHJcbiAgICAkcGFyc2VPcHRpb25zLmNzcCA9ICRzbmlmZmVyLmNzcDtcclxuXHJcbiAgICBmdW5jdGlvbiB3cmFwU2hhcmVkRXhwcmVzc2lvbihleHApIHtcclxuICAgICAgdmFyIHdyYXBwZWQgPSBleHA7XHJcblxyXG4gICAgICBpZiAoZXhwLnNoYXJlZEdldHRlcikge1xyXG4gICAgICAgIHdyYXBwZWQgPSBmdW5jdGlvbiAkcGFyc2VXcmFwcGVyKHNlbGYsIGxvY2Fscykge1xyXG4gICAgICAgICAgcmV0dXJuIGV4cChzZWxmLCBsb2NhbHMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgd3JhcHBlZC5saXRlcmFsID0gZXhwLmxpdGVyYWw7XHJcbiAgICAgICAgd3JhcHBlZC5jb25zdGFudCA9IGV4cC5jb25zdGFudDtcclxuICAgICAgICB3cmFwcGVkLmFzc2lnbiA9IGV4cC5hc3NpZ247XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB3cmFwcGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAkcGFyc2UoZXhwLCBpbnRlcmNlcHRvckZuKSB7XHJcbiAgICAgIHZhciBwYXJzZWRFeHByZXNzaW9uLCBvbmVUaW1lLCBjYWNoZUtleTtcclxuXHJcbiAgICAgIHN3aXRjaCAodHlwZW9mIGV4cCkge1xyXG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgICBjYWNoZUtleSA9IGV4cCA9IGV4cC50cmltKCk7XHJcblxyXG4gICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbiA9IGNhY2hlW2NhY2hlS2V5XTtcclxuXHJcbiAgICAgICAgICBpZiAoIXBhcnNlZEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgaWYgKGV4cC5jaGFyQXQoMCkgPT09ICc6JyAmJiBleHAuY2hhckF0KDEpID09PSAnOicpIHtcclxuICAgICAgICAgICAgICBvbmVUaW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBleHAgPSBleHAuc3Vic3RyaW5nKDIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbGV4ZXIgPSBuZXcgTGV4ZXIoJHBhcnNlT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKGxleGVyLCAkZmlsdGVyLCAkcGFyc2VPcHRpb25zKTtcclxuICAgICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbiA9IHBhcnNlci5wYXJzZShleHApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcnNlZEV4cHJlc3Npb24uY29uc3RhbnQpIHtcclxuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSA9IGNvbnN0YW50V2F0Y2hEZWxlZ2F0ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvbmVUaW1lKSB7XHJcbiAgICAgICAgICAgICAgLy9vbmVUaW1lIGlzIG5vdCBwYXJ0IG9mIHRoZSBleHAgcGFzc2VkIHRvIHRoZSBQYXJzZXIgc28gd2UgbWF5IGhhdmUgdG9cclxuICAgICAgICAgICAgICAvL3dyYXAgdGhlIHBhcnNlZEV4cHJlc3Npb24gYmVmb3JlIGFkZGluZyBhICQkd2F0Y2hEZWxlZ2F0ZVxyXG4gICAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSB3cmFwU2hhcmVkRXhwcmVzc2lvbihwYXJzZWRFeHByZXNzaW9uKTtcclxuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSA9IHBhcnNlZEV4cHJlc3Npb24ubGl0ZXJhbCA/XHJcbiAgICAgICAgICAgICAgICBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUgOiBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRFeHByZXNzaW9uLmlucHV0cykge1xyXG4gICAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlID0gaW5wdXRzV2F0Y2hEZWxlZ2F0ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2FjaGVbY2FjaGVLZXldID0gcGFyc2VkRXhwcmVzc2lvbjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBhZGRJbnRlcmNlcHRvcihwYXJzZWRFeHByZXNzaW9uLCBpbnRlcmNlcHRvckZuKTtcclxuXHJcbiAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxyXG4gICAgICAgICAgcmV0dXJuIGFkZEludGVyY2VwdG9yKGV4cCwgaW50ZXJjZXB0b3JGbik7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gYWRkSW50ZXJjZXB0b3Iobm9vcCwgaW50ZXJjZXB0b3JGbik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY29sbGVjdEV4cHJlc3Npb25JbnB1dHMoaW5wdXRzLCBsaXN0KSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRzW2ldO1xyXG4gICAgICAgIGlmICghaW5wdXQuY29uc3RhbnQpIHtcclxuICAgICAgICAgIGlmIChpbnB1dC5pbnB1dHMpIHtcclxuICAgICAgICAgICAgY29sbGVjdEV4cHJlc3Npb25JbnB1dHMoaW5wdXQuaW5wdXRzLCBsaXN0KTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAobGlzdC5pbmRleE9mKGlucHV0KSA9PT0gLTEpIHsgLy8gVE9ETyhwZXJmKSBjYW4gd2UgZG8gYmV0dGVyP1xyXG4gICAgICAgICAgICBsaXN0LnB1c2goaW5wdXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayhuZXdWYWx1ZSwgb2xkVmFsdWVPZlZhbHVlKSB7XHJcblxyXG4gICAgICBpZiAobmV3VmFsdWUgPT0gbnVsbCB8fCBvbGRWYWx1ZU9mVmFsdWUgPT0gbnVsbCkgeyAvLyBudWxsL3VuZGVmaW5lZFxyXG4gICAgICAgIHJldHVybiBuZXdWYWx1ZSA9PT0gb2xkVmFsdWVPZlZhbHVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0Jykge1xyXG5cclxuICAgICAgICAvLyBhdHRlbXB0IHRvIGNvbnZlcnQgdGhlIHZhbHVlIHRvIGEgcHJpbWl0aXZlIHR5cGVcclxuICAgICAgICAvLyBUT0RPKGRvY3MpOiBhZGQgYSBub3RlIHRvIGRvY3MgdGhhdCBieSBpbXBsZW1lbnRpbmcgdmFsdWVPZiBldmVuIG9iamVjdHMgYW5kIGFycmF5cyBjYW5cclxuICAgICAgICAvLyAgICAgICAgICAgICBiZSBjaGVhcGx5IGRpcnR5LWNoZWNrZWRcclxuICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlLnZhbHVlT2YoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgIC8vIG9iamVjdHMvYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkIC0gZGVlcC13YXRjaGluZyB0aGVtIHdvdWxkIGJlIHRvbyBleHBlbnNpdmVcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZhbGwtdGhyb3VnaCB0byB0aGUgcHJpbWl0aXZlIGVxdWFsaXR5IGNoZWNrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vUHJpbWl0aXZlIG9yIE5hTlxyXG4gICAgICByZXR1cm4gbmV3VmFsdWUgPT09IG9sZFZhbHVlT2ZWYWx1ZSB8fCAobmV3VmFsdWUgIT09IG5ld1ZhbHVlICYmIG9sZFZhbHVlT2ZWYWx1ZSAhPT0gb2xkVmFsdWVPZlZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbnB1dHNXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24pIHtcclxuICAgICAgdmFyIGlucHV0RXhwcmVzc2lvbnMgPSBwYXJzZWRFeHByZXNzaW9uLiQkaW5wdXRzIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKHBhcnNlZEV4cHJlc3Npb24uJCRpbnB1dHMgPSBjb2xsZWN0RXhwcmVzc2lvbklucHV0cyhwYXJzZWRFeHByZXNzaW9uLmlucHV0cywgW10pKTtcclxuXHJcbiAgICAgIHZhciBsYXN0UmVzdWx0O1xyXG5cclxuICAgICAgaWYgKGlucHV0RXhwcmVzc2lvbnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgdmFyIG9sZElucHV0VmFsdWUgPSBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrOyAvLyBpbml0IHRvIHNvbWV0aGluZyB1bmlxdWUgc28gdGhhdCBlcXVhbHMgY2hlY2sgZmFpbHNcclxuICAgICAgICBpbnB1dEV4cHJlc3Npb25zID0gaW5wdXRFeHByZXNzaW9uc1swXTtcclxuICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dFdhdGNoKHNjb3BlKSB7XHJcbiAgICAgICAgICB2YXIgbmV3SW5wdXRWYWx1ZSA9IGlucHV0RXhwcmVzc2lvbnMoc2NvcGUpO1xyXG4gICAgICAgICAgaWYgKCFleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrKG5ld0lucHV0VmFsdWUsIG9sZElucHV0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGxhc3RSZXN1bHQgPSBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcclxuICAgICAgICAgICAgb2xkSW5wdXRWYWx1ZSA9IG5ld0lucHV0VmFsdWUgJiYgbmV3SW5wdXRWYWx1ZS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcclxuICAgICAgICB9LCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzID0gW107XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0RXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgIG9sZElucHV0VmFsdWVPZlZhbHVlc1tpXSA9IGV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2s7IC8vIGluaXQgdG8gc29tZXRoaW5nIHVuaXF1ZSBzbyB0aGF0IGVxdWFscyBjaGVjayBmYWlsc1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dHNXYXRjaChzY29wZSkge1xyXG4gICAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0RXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgdmFyIG5ld0lucHV0VmFsdWUgPSBpbnB1dEV4cHJlc3Npb25zW2ldKHNjb3BlKTtcclxuICAgICAgICAgIGlmIChjaGFuZ2VkIHx8IChjaGFuZ2VkID0gIWV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3SW5wdXRWYWx1ZSwgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldKSkpIHtcclxuICAgICAgICAgICAgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldID0gbmV3SW5wdXRWYWx1ZSAmJiBuZXdJbnB1dFZhbHVlLnZhbHVlT2YoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XHJcbiAgICAgICAgICBsYXN0UmVzdWx0ID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcclxuICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uKSB7XHJcbiAgICAgIHZhciB1bndhdGNoLCBsYXN0VmFsdWU7XHJcbiAgICAgIHJldHVybiB1bndhdGNoID0gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG9uZVRpbWVXYXRjaChzY29wZSkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcclxuICAgICAgfSwgZnVuY3Rpb24gb25lVGltZUxpc3RlbmVyKHZhbHVlLCBvbGQsIHNjb3BlKSB7XHJcbiAgICAgICAgbGFzdFZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChsYXN0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgdW53YXRjaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIG9iamVjdEVxdWFsaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xyXG4gICAgICB2YXIgdW53YXRjaDtcclxuICAgICAgcmV0dXJuIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24gb25lVGltZVdhdGNoKHNjb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb24oc2NvcGUpO1xyXG4gICAgICB9LCBmdW5jdGlvbiBvbmVUaW1lTGlzdGVuZXIodmFsdWUsIG9sZCwgc2NvcGUpIHtcclxuICAgICAgICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcikpIHtcclxuICAgICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgdmFsdWUsIG9sZCwgc2NvcGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNBbGxEZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoaXNBbGxEZWZpbmVkKHZhbHVlKSkgdW53YXRjaCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBvYmplY3RFcXVhbGl0eSk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBpc0FsbERlZmluZWQodmFsdWUpIHtcclxuICAgICAgICB2YXIgYWxsRGVmaW5lZCA9IHRydWU7XHJcbiAgICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgaWYgKCFpc0RlZmluZWQodmFsKSkgYWxsRGVmaW5lZCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBhbGxEZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29uc3RhbnRXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24pIHtcclxuICAgICAgdmFyIHVud2F0Y2g7XHJcbiAgICAgIHJldHVybiB1bndhdGNoID0gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGNvbnN0YW50V2F0Y2goc2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uIGNvbnN0YW50TGlzdGVuZXIodmFsdWUsIG9sZCwgc2NvcGUpIHtcclxuICAgICAgICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcikpIHtcclxuICAgICAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVud2F0Y2goKTtcclxuICAgICAgfSwgb2JqZWN0RXF1YWxpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEludGVyY2VwdG9yKHBhcnNlZEV4cHJlc3Npb24sIGludGVyY2VwdG9yRm4pIHtcclxuICAgICAgaWYgKCFpbnRlcmNlcHRvckZuKSByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbjtcclxuXHJcbiAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIGludGVyY2VwdGVkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gaW50ZXJjZXB0b3JGbih2YWx1ZSwgc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgLy8gd2Ugb25seSByZXR1cm4gdGhlIGludGVyY2VwdG9yJ3MgcmVzdWx0IGlmIHRoZVxyXG4gICAgICAgIC8vIGluaXRpYWwgdmFsdWUgaXMgZGVmaW5lZCAoZm9yIGJpbmQtb25jZSlcclxuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKHZhbHVlKSA/IHJlc3VsdCA6IHZhbHVlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gUHJvcGFnYXRlICQkd2F0Y2hEZWxlZ2F0ZXMgb3RoZXIgdGhlbiBpbnB1dHNXYXRjaERlbGVnYXRlXHJcbiAgICAgIGlmIChwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSAmJlxyXG4gICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgIT09IGlucHV0c1dhdGNoRGVsZWdhdGUpIHtcclxuICAgICAgICBmbi4kJHdhdGNoRGVsZWdhdGUgPSBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZTtcclxuICAgICAgfSBlbHNlIGlmICghaW50ZXJjZXB0b3JGbi4kc3RhdGVmdWwpIHtcclxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBpbnRlcmNlcHRvciwgYnV0IG5vIHdhdGNoRGVsZWdhdGUgdGhlbiB0cmVhdCB0aGUgaW50ZXJjZXB0b3IgbGlrZVxyXG4gICAgICAgIC8vIHdlIHRyZWF0IGZpbHRlcnMgLSBpdCBpcyBhc3N1bWVkIHRvIGJlIGEgcHVyZSBmdW5jdGlvbiB1bmxlc3MgZmxhZ2dlZCB3aXRoICRzdGF0ZWZ1bFxyXG4gICAgICAgIGZuLiQkd2F0Y2hEZWxlZ2F0ZSA9IGlucHV0c1dhdGNoRGVsZWdhdGU7XHJcbiAgICAgICAgZm4uaW5wdXRzID0gW3BhcnNlZEV4cHJlc3Npb25dO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZm47XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkcVxyXG4gKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSBwcm9taXNlL2RlZmVycmVkIGltcGxlbWVudGF0aW9uIGluc3BpcmVkIGJ5IFtLcmlzIEtvd2FsJ3MgUV0oaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xKS5cclxuICpcclxuICogJHEgY2FuIGJlIHVzZWQgaW4gdHdvIGZhc2hpb25zIC0tLSBvbmUgd2hpY2ggaXMgbW9yZSBzaW1pbGFyIHRvIEtyaXMgS293YWwncyBRIG9yIGpRdWVyeSdzIERlZmVycmVkXHJcbiAqIGltcGxlbWVudGF0aW9ucywgYW5kIHRoZSBvdGhlciB3aGljaCByZXNlbWJsZXMgRVM2IHByb21pc2VzIHRvIHNvbWUgZGVncmVlLlxyXG4gKlxyXG4gKiAjICRxIGNvbnN0cnVjdG9yXHJcbiAqXHJcbiAqIFRoZSBzdHJlYW1saW5lZCBFUzYgc3R5bGUgcHJvbWlzZSBpcyBlc3NlbnRpYWxseSBqdXN0IHVzaW5nICRxIGFzIGEgY29uc3RydWN0b3Igd2hpY2ggdGFrZXMgYSBgcmVzb2x2ZXJgXHJcbiAqIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhpcyBpcyBzaW1pbGFyIHRvIHRoZSBuYXRpdmUgUHJvbWlzZSBpbXBsZW1lbnRhdGlvbiBmcm9tIEVTNiBIYXJtb255LFxyXG4gKiBzZWUgW01ETl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZSkuXHJcbiAqXHJcbiAqIFdoaWxlIHRoZSBjb25zdHJ1Y3Rvci1zdHlsZSB1c2UgaXMgc3VwcG9ydGVkLCBub3QgYWxsIG9mIHRoZSBzdXBwb3J0aW5nIG1ldGhvZHMgZnJvbSBFUzYgSGFybW9ueSBwcm9taXNlcyBhcmVcclxuICogYXZhaWxhYmxlIHlldC5cclxuICpcclxuICogSXQgY2FuIGJlIHVzZWQgbGlrZSBzbzpcclxuICpcclxuICogYGBganNcclxuICogcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gKiAgIC8vIHBlcmZvcm0gc29tZSBhc3luY2hyb25vdXMgb3BlcmF0aW9uLCByZXNvbHZlIG9yIHJlamVjdCB0aGUgcHJvbWlzZSB3aGVuIGFwcHJvcHJpYXRlLlxyXG4gKiAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgaWYgKHBvbGxTdGF0dXMgPiAwKSB7XHJcbiAqICAgICAgIHJlc29sdmUocG9sbGVkVmFsdWUpO1xyXG4gKiAgICAgfSBlbHNlIGlmIChwb2xsU3RhdHVzIDwgMCkge1xyXG4gKiAgICAgICByZWplY3QocG9sbGVkVmFsdWUpO1xyXG4gKiAgICAgfSBlbHNlIHtcclxuICogICAgICAgcG9sbFN0YXR1cyA9IHBvbGxBZ2FpbihmdW5jdGlvbih2YWx1ZSkge1xyXG4gKiAgICAgICAgIHBvbGxlZFZhbHVlID0gdmFsdWU7XHJcbiAqICAgICAgIH0pO1xyXG4gKiAgICAgfVxyXG4gKiAgIH0sIDEwMDAwKTtcclxuICogfSkuXHJcbiAqICAgdGhlbihmdW5jdGlvbih2YWx1ZSkge1xyXG4gKiAgICAgLy8gaGFuZGxlIHN1Y2Nlc3NcclxuICogICB9LCBmdW5jdGlvbihyZWFzb24pIHtcclxuICogICAgIC8vIGhhbmRsZSBmYWlsdXJlXHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBOb3RlOiBwcm9ncmVzcy9ub3RpZnkgY2FsbGJhY2tzIGFyZSBub3QgY3VycmVudGx5IHN1cHBvcnRlZCB2aWEgdGhlIEVTNi1zdHlsZSBpbnRlcmZhY2UuXHJcbiAqXHJcbiAqIEhvd2V2ZXIsIHRoZSBtb3JlIHRyYWRpdGlvbmFsIENvbW1vbkpTLXN0eWxlIHVzYWdlIGlzIHN0aWxsIGF2YWlsYWJsZSwgYW5kIGRvY3VtZW50ZWQgYmVsb3cuXHJcbiAqXHJcbiAqIFtUaGUgQ29tbW9uSlMgUHJvbWlzZSBwcm9wb3NhbF0oaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvUHJvbWlzZXMpIGRlc2NyaWJlcyBhIHByb21pc2UgYXMgYW5cclxuICogaW50ZXJmYWNlIGZvciBpbnRlcmFjdGluZyB3aXRoIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHJlc3VsdCBvZiBhbiBhY3Rpb24gdGhhdCBpc1xyXG4gKiBwZXJmb3JtZWQgYXN5bmNocm9ub3VzbHksIGFuZCBtYXkgb3IgbWF5IG5vdCBiZSBmaW5pc2hlZCBhdCBhbnkgZ2l2ZW4gcG9pbnQgaW4gdGltZS5cclxuICpcclxuICogRnJvbSB0aGUgcGVyc3BlY3RpdmUgb2YgZGVhbGluZyB3aXRoIGVycm9yIGhhbmRsaW5nLCBkZWZlcnJlZCBhbmQgcHJvbWlzZSBBUElzIGFyZSB0b1xyXG4gKiBhc3luY2hyb25vdXMgcHJvZ3JhbW1pbmcgd2hhdCBgdHJ5YCwgYGNhdGNoYCBhbmQgYHRocm93YCBrZXl3b3JkcyBhcmUgdG8gc3luY2hyb25vdXMgcHJvZ3JhbW1pbmcuXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gZm9yIHRoZSBwdXJwb3NlIG9mIHRoaXMgZXhhbXBsZSBsZXQncyBhc3N1bWUgdGhhdCB2YXJpYWJsZXMgYCRxYCwgYHNjb3BlYCBhbmQgYG9rVG9HcmVldGBcclxuICogICAvLyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGxleGljYWwgc2NvcGUgKHRoZXkgY291bGQgaGF2ZSBiZWVuIGluamVjdGVkIG9yIHBhc3NlZCBpbikuXHJcbiAqXHJcbiAqICAgZnVuY3Rpb24gYXN5bmNHcmVldChuYW1lKSB7XHJcbiAqICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gKlxyXG4gKiAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICogICAgICAgZGVmZXJyZWQubm90aWZ5KCdBYm91dCB0byBncmVldCAnICsgbmFtZSArICcuJyk7XHJcbiAqXHJcbiAqICAgICAgIGlmIChva1RvR3JlZXQobmFtZSkpIHtcclxuICogICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdIZWxsbywgJyArIG5hbWUgKyAnIScpO1xyXG4gKiAgICAgICB9IGVsc2Uge1xyXG4gKiAgICAgICAgIGRlZmVycmVkLnJlamVjdCgnR3JlZXRpbmcgJyArIG5hbWUgKyAnIGlzIG5vdCBhbGxvd2VkLicpO1xyXG4gKiAgICAgICB9XHJcbiAqICAgICB9LCAxMDAwKTtcclxuICpcclxuICogICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gKiAgIH1cclxuICpcclxuICogICB2YXIgcHJvbWlzZSA9IGFzeW5jR3JlZXQoJ1JvYmluIEhvb2QnKTtcclxuICogICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oZ3JlZXRpbmcpIHtcclxuICogICAgIGFsZXJ0KCdTdWNjZXNzOiAnICsgZ3JlZXRpbmcpO1xyXG4gKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gKiAgICAgYWxlcnQoJ0ZhaWxlZDogJyArIHJlYXNvbik7XHJcbiAqICAgfSwgZnVuY3Rpb24odXBkYXRlKSB7XHJcbiAqICAgICBhbGVydCgnR290IG5vdGlmaWNhdGlvbjogJyArIHVwZGF0ZSk7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBBdCBmaXJzdCBpdCBtaWdodCBub3QgYmUgb2J2aW91cyB3aHkgdGhpcyBleHRyYSBjb21wbGV4aXR5IGlzIHdvcnRoIHRoZSB0cm91YmxlLiBUaGUgcGF5b2ZmXHJcbiAqIGNvbWVzIGluIHRoZSB3YXkgb2YgZ3VhcmFudGVlcyB0aGF0IHByb21pc2UgYW5kIGRlZmVycmVkIEFQSXMgbWFrZSwgc2VlXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvdW5jb21tb25qcy9ibG9iL21hc3Rlci9wcm9taXNlcy9zcGVjaWZpY2F0aW9uLm1kLlxyXG4gKlxyXG4gKiBBZGRpdGlvbmFsbHkgdGhlIHByb21pc2UgYXBpIGFsbG93cyBmb3IgY29tcG9zaXRpb24gdGhhdCBpcyB2ZXJ5IGhhcmQgdG8gZG8gd2l0aCB0aGVcclxuICogdHJhZGl0aW9uYWwgY2FsbGJhY2sgKFtDUFNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udGludWF0aW9uLXBhc3Npbmdfc3R5bGUpKSBhcHByb2FjaC5cclxuICogRm9yIG1vcmUgb24gdGhpcyBwbGVhc2Ugc2VlIHRoZSBbUSBkb2N1bWVudGF0aW9uXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EpIGVzcGVjaWFsbHkgdGhlXHJcbiAqIHNlY3Rpb24gb24gc2VyaWFsIG9yIHBhcmFsbGVsIGpvaW5pbmcgb2YgcHJvbWlzZXMuXHJcbiAqXHJcbiAqICMgVGhlIERlZmVycmVkIEFQSVxyXG4gKlxyXG4gKiBBIG5ldyBpbnN0YW5jZSBvZiBkZWZlcnJlZCBpcyBjb25zdHJ1Y3RlZCBieSBjYWxsaW5nIGAkcS5kZWZlcigpYC5cclxuICpcclxuICogVGhlIHB1cnBvc2Ugb2YgdGhlIGRlZmVycmVkIG9iamVjdCBpcyB0byBleHBvc2UgdGhlIGFzc29jaWF0ZWQgUHJvbWlzZSBpbnN0YW5jZSBhcyB3ZWxsIGFzIEFQSXNcclxuICogdGhhdCBjYW4gYmUgdXNlZCBmb3Igc2lnbmFsaW5nIHRoZSBzdWNjZXNzZnVsIG9yIHVuc3VjY2Vzc2Z1bCBjb21wbGV0aW9uLCBhcyB3ZWxsIGFzIHRoZSBzdGF0dXNcclxuICogb2YgdGhlIHRhc2suXHJcbiAqXHJcbiAqICoqTWV0aG9kcyoqXHJcbiAqXHJcbiAqIC0gYHJlc29sdmUodmFsdWUpYCDigJMgcmVzb2x2ZXMgdGhlIGRlcml2ZWQgcHJvbWlzZSB3aXRoIHRoZSBgdmFsdWVgLiBJZiB0aGUgdmFsdWUgaXMgYSByZWplY3Rpb25cclxuICogICBjb25zdHJ1Y3RlZCB2aWEgYCRxLnJlamVjdGAsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgaW5zdGVhZC5cclxuICogLSBgcmVqZWN0KHJlYXNvbilgIOKAkyByZWplY3RzIHRoZSBkZXJpdmVkIHByb21pc2Ugd2l0aCB0aGUgYHJlYXNvbmAuIFRoaXMgaXMgZXF1aXZhbGVudCB0b1xyXG4gKiAgIHJlc29sdmluZyBpdCB3aXRoIGEgcmVqZWN0aW9uIGNvbnN0cnVjdGVkIHZpYSBgJHEucmVqZWN0YC5cclxuICogLSBgbm90aWZ5KHZhbHVlKWAgLSBwcm92aWRlcyB1cGRhdGVzIG9uIHRoZSBzdGF0dXMgb2YgdGhlIHByb21pc2UncyBleGVjdXRpb24uIFRoaXMgbWF5IGJlIGNhbGxlZFxyXG4gKiAgIG11bHRpcGxlIHRpbWVzIGJlZm9yZSB0aGUgcHJvbWlzZSBpcyBlaXRoZXIgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqXHJcbiAqICoqUHJvcGVydGllcyoqXHJcbiAqXHJcbiAqIC0gcHJvbWlzZSDigJMgYHtQcm9taXNlfWAg4oCTIHByb21pc2Ugb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGRlZmVycmVkLlxyXG4gKlxyXG4gKlxyXG4gKiAjIFRoZSBQcm9taXNlIEFQSVxyXG4gKlxyXG4gKiBBIG5ldyBwcm9taXNlIGluc3RhbmNlIGlzIGNyZWF0ZWQgd2hlbiBhIGRlZmVycmVkIGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIGNhbiBiZSByZXRyaWV2ZWQgYnlcclxuICogY2FsbGluZyBgZGVmZXJyZWQucHJvbWlzZWAuXHJcbiAqXHJcbiAqIFRoZSBwdXJwb3NlIG9mIHRoZSBwcm9taXNlIG9iamVjdCBpcyB0byBhbGxvdyBmb3IgaW50ZXJlc3RlZCBwYXJ0aWVzIHRvIGdldCBhY2Nlc3MgdG8gdGhlIHJlc3VsdFxyXG4gKiBvZiB0aGUgZGVmZXJyZWQgdGFzayB3aGVuIGl0IGNvbXBsZXRlcy5cclxuICpcclxuICogKipNZXRob2RzKipcclxuICpcclxuICogLSBgdGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIG5vdGlmeUNhbGxiYWNrKWAg4oCTIHJlZ2FyZGxlc3Mgb2Ygd2hlbiB0aGUgcHJvbWlzZSB3YXMgb3JcclxuICogICB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkLCBgdGhlbmAgY2FsbHMgb25lIG9mIHRoZSBzdWNjZXNzIG9yIGVycm9yIGNhbGxiYWNrcyBhc3luY2hyb25vdXNseVxyXG4gKiAgIGFzIHNvb24gYXMgdGhlIHJlc3VsdCBpcyBhdmFpbGFibGUuIFRoZSBjYWxsYmFja3MgYXJlIGNhbGxlZCB3aXRoIGEgc2luZ2xlIGFyZ3VtZW50OiB0aGUgcmVzdWx0XHJcbiAqICAgb3IgcmVqZWN0aW9uIHJlYXNvbi4gQWRkaXRpb25hbGx5LCB0aGUgbm90aWZ5IGNhbGxiYWNrIG1heSBiZSBjYWxsZWQgemVybyBvciBtb3JlIHRpbWVzIHRvXHJcbiAqICAgcHJvdmlkZSBhIHByb2dyZXNzIGluZGljYXRpb24sIGJlZm9yZSB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZCBvciByZWplY3RlZC5cclxuICpcclxuICogICBUaGlzIG1ldGhvZCAqcmV0dXJucyBhIG5ldyBwcm9taXNlKiB3aGljaCBpcyByZXNvbHZlZCBvciByZWplY3RlZCB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGVcclxuICogICBgc3VjY2Vzc0NhbGxiYWNrYCwgYGVycm9yQ2FsbGJhY2tgLiBJdCBhbHNvIG5vdGlmaWVzIHZpYSB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZVxyXG4gKiAgIGBub3RpZnlDYWxsYmFja2AgbWV0aG9kLiBUaGUgcHJvbWlzZSBjYW5ub3QgYmUgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgZnJvbSB0aGUgbm90aWZ5Q2FsbGJhY2tcclxuICogICBtZXRob2QuXHJcbiAqXHJcbiAqIC0gYGNhdGNoKGVycm9yQ2FsbGJhY2spYCDigJMgc2hvcnRoYW5kIGZvciBgcHJvbWlzZS50aGVuKG51bGwsIGVycm9yQ2FsbGJhY2spYFxyXG4gKlxyXG4gKiAtIGBmaW5hbGx5KGNhbGxiYWNrKWAg4oCTIGFsbG93cyB5b3UgdG8gb2JzZXJ2ZSBlaXRoZXIgdGhlIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBvZiBhIHByb21pc2UsXHJcbiAqICAgYnV0IHRvIGRvIHNvIHdpdGhvdXQgbW9kaWZ5aW5nIHRoZSBmaW5hbCB2YWx1ZS4gVGhpcyBpcyB1c2VmdWwgdG8gcmVsZWFzZSByZXNvdXJjZXMgb3IgZG8gc29tZVxyXG4gKiAgIGNsZWFuLXVwIHRoYXQgbmVlZHMgdG8gYmUgZG9uZSB3aGV0aGVyIHRoZSBwcm9taXNlIHdhcyByZWplY3RlZCBvciByZXNvbHZlZC4gU2VlIHRoZSBbZnVsbFxyXG4gKiAgIHNwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS93aWtpL0FQSS1SZWZlcmVuY2UjcHJvbWlzZWZpbmFsbHljYWxsYmFjaykgZm9yXHJcbiAqICAgbW9yZSBpbmZvcm1hdGlvbi5cclxuICpcclxuICogICBCZWNhdXNlIGBmaW5hbGx5YCBpcyBhIHJlc2VydmVkIHdvcmQgaW4gSmF2YVNjcmlwdCBhbmQgcmVzZXJ2ZWQga2V5d29yZHMgYXJlIG5vdCBzdXBwb3J0ZWQgYXNcclxuICogICBwcm9wZXJ0eSBuYW1lcyBieSBFUzMsIHlvdSdsbCBuZWVkIHRvIGludm9rZSB0aGUgbWV0aG9kIGxpa2UgYHByb21pc2VbJ2ZpbmFsbHknXShjYWxsYmFjaylgIHRvXHJcbiAqICAgbWFrZSB5b3VyIGNvZGUgSUU4IGFuZCBBbmRyb2lkIDIueCBjb21wYXRpYmxlLlxyXG4gKlxyXG4gKiAjIENoYWluaW5nIHByb21pc2VzXHJcbiAqXHJcbiAqIEJlY2F1c2UgY2FsbGluZyB0aGUgYHRoZW5gIG1ldGhvZCBvZiBhIHByb21pc2UgcmV0dXJucyBhIG5ldyBkZXJpdmVkIHByb21pc2UsIGl0IGlzIGVhc2lseVxyXG4gKiBwb3NzaWJsZSB0byBjcmVhdGUgYSBjaGFpbiBvZiBwcm9taXNlczpcclxuICpcclxuICogYGBganNcclxuICogICBwcm9taXNlQiA9IHByb21pc2VBLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAqICAgICByZXR1cm4gcmVzdWx0ICsgMTtcclxuICogICB9KTtcclxuICpcclxuICogICAvLyBwcm9taXNlQiB3aWxsIGJlIHJlc29sdmVkIGltbWVkaWF0ZWx5IGFmdGVyIHByb21pc2VBIGlzIHJlc29sdmVkIGFuZCBpdHMgdmFsdWVcclxuICogICAvLyB3aWxsIGJlIHRoZSByZXN1bHQgb2YgcHJvbWlzZUEgaW5jcmVtZW50ZWQgYnkgMVxyXG4gKiBgYGBcclxuICpcclxuICogSXQgaXMgcG9zc2libGUgdG8gY3JlYXRlIGNoYWlucyBvZiBhbnkgbGVuZ3RoIGFuZCBzaW5jZSBhIHByb21pc2UgY2FuIGJlIHJlc29sdmVkIHdpdGggYW5vdGhlclxyXG4gKiBwcm9taXNlICh3aGljaCB3aWxsIGRlZmVyIGl0cyByZXNvbHV0aW9uIGZ1cnRoZXIpLCBpdCBpcyBwb3NzaWJsZSB0byBwYXVzZS9kZWZlciByZXNvbHV0aW9uIG9mXHJcbiAqIHRoZSBwcm9taXNlcyBhdCBhbnkgcG9pbnQgaW4gdGhlIGNoYWluLiBUaGlzIG1ha2VzIGl0IHBvc3NpYmxlIHRvIGltcGxlbWVudCBwb3dlcmZ1bCBBUElzIGxpa2VcclxuICogJGh0dHAncyByZXNwb25zZSBpbnRlcmNlcHRvcnMuXHJcbiAqXHJcbiAqXHJcbiAqICMgRGlmZmVyZW5jZXMgYmV0d2VlbiBLcmlzIEtvd2FsJ3MgUSBhbmQgJHFcclxuICpcclxuICogIFRoZXJlIGFyZSB0d28gbWFpbiBkaWZmZXJlbmNlczpcclxuICpcclxuICogLSAkcSBpcyBpbnRlZ3JhdGVkIHdpdGggdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlfSBTY29wZSBtb2RlbCBvYnNlcnZhdGlvblxyXG4gKiAgIG1lY2hhbmlzbSBpbiBhbmd1bGFyLCB3aGljaCBtZWFucyBmYXN0ZXIgcHJvcGFnYXRpb24gb2YgcmVzb2x1dGlvbiBvciByZWplY3Rpb24gaW50byB5b3VyXHJcbiAqICAgbW9kZWxzIGFuZCBhdm9pZGluZyB1bm5lY2Vzc2FyeSBicm93c2VyIHJlcGFpbnRzLCB3aGljaCB3b3VsZCByZXN1bHQgaW4gZmxpY2tlcmluZyBVSS5cclxuICogLSBRIGhhcyBtYW55IG1vcmUgZmVhdHVyZXMgdGhhbiAkcSwgYnV0IHRoYXQgY29tZXMgYXQgYSBjb3N0IG9mIGJ5dGVzLiAkcSBpcyB0aW55LCBidXQgY29udGFpbnNcclxuICogICBhbGwgdGhlIGltcG9ydGFudCBmdW5jdGlvbmFsaXR5IG5lZWRlZCBmb3IgY29tbW9uIGFzeW5jIHRhc2tzLlxyXG4gKlxyXG4gKiAgIyBUZXN0aW5nXHJcbiAqXHJcbiAqICBgYGBqc1xyXG4gKiAgICBpdCgnc2hvdWxkIHNpbXVsYXRlIHByb21pc2UnLCBpbmplY3QoZnVuY3Rpb24oJHEsICRyb290U2NvcGUpIHtcclxuICogICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gKiAgICAgIHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcclxuICogICAgICB2YXIgcmVzb2x2ZWRWYWx1ZTtcclxuICpcclxuICogICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsgcmVzb2x2ZWRWYWx1ZSA9IHZhbHVlOyB9KTtcclxuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gKlxyXG4gKiAgICAgIC8vIFNpbXVsYXRlIHJlc29sdmluZyBvZiBwcm9taXNlXHJcbiAqICAgICAgZGVmZXJyZWQucmVzb2x2ZSgxMjMpO1xyXG4gKiAgICAgIC8vIE5vdGUgdGhhdCB0aGUgJ3RoZW4nIGZ1bmN0aW9uIGRvZXMgbm90IGdldCBjYWxsZWQgc3luY2hyb25vdXNseS5cclxuICogICAgICAvLyBUaGlzIGlzIGJlY2F1c2Ugd2Ugd2FudCB0aGUgcHJvbWlzZSBBUEkgdG8gYWx3YXlzIGJlIGFzeW5jLCB3aGV0aGVyIG9yIG5vdFxyXG4gKiAgICAgIC8vIGl0IGdvdCBjYWxsZWQgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25vdXNseS5cclxuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gKlxyXG4gKiAgICAgIC8vIFByb3BhZ2F0ZSBwcm9taXNlIHJlc29sdXRpb24gdG8gJ3RoZW4nIGZ1bmN0aW9ucyB1c2luZyAkYXBwbHkoKS5cclxuICogICAgICAkcm9vdFNjb3BlLiRhcHBseSgpO1xyXG4gKiAgICAgIGV4cGVjdChyZXNvbHZlZFZhbHVlKS50b0VxdWFsKDEyMyk7XHJcbiAqICAgIH0pKTtcclxuICogIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uLCBmdW5jdGlvbil9IHJlc29sdmVyIEZ1bmN0aW9uIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciByZXNvbHZpbmcgb3JcclxuICogICByZWplY3RpbmcgdGhlIG5ld2x5IGNyZWF0ZWQgcHJvbWlzZS4gVGhlIGZpcnN0IHBhcmFtZXRlciBpcyBhIGZ1bmN0aW9uIHdoaWNoIHJlc29sdmVzIHRoZVxyXG4gKiAgIHByb21pc2UsIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIGEgZnVuY3Rpb24gd2hpY2ggcmVqZWN0cyB0aGUgcHJvbWlzZS5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBuZXdseSBjcmVhdGVkIHByb21pc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiAkUVByb3ZpZGVyKCkge1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkZXhjZXB0aW9uSGFuZGxlcikge1xyXG4gICAgcmV0dXJuIHFGYWN0b3J5KGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XHJcbiAgICB9LCAkZXhjZXB0aW9uSGFuZGxlcik7XHJcbiAgfV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uICQkUVByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJGJyb3dzZXInLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbigkYnJvd3NlciwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcclxuICAgIHJldHVybiBxRmFjdG9yeShmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAkYnJvd3Nlci5kZWZlcihjYWxsYmFjayk7XHJcbiAgICB9LCAkZXhjZXB0aW9uSGFuZGxlcik7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGEgcHJvbWlzZSBtYW5hZ2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uKX0gbmV4dFRpY2sgRnVuY3Rpb24gZm9yIGV4ZWN1dGluZyBmdW5jdGlvbnMgaW4gdGhlIG5leHQgdHVybi5cclxuICogQHBhcmFtIHtmdW5jdGlvbiguLi4qKX0gZXhjZXB0aW9uSGFuZGxlciBGdW5jdGlvbiBpbnRvIHdoaWNoIHVuZXhwZWN0ZWQgZXhjZXB0aW9ucyBhcmUgcGFzc2VkIGZvclxyXG4gKiAgICAgZGVidWdnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBQcm9taXNlIG1hbmFnZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBxRmFjdG9yeShuZXh0VGljaywgZXhjZXB0aW9uSGFuZGxlcikge1xyXG4gIHZhciAkcU1pbkVyciA9IG1pbkVycignJHEnLCBUeXBlRXJyb3IpO1xyXG4gIGZ1bmN0aW9uIGNhbGxPbmNlKHNlbGYsIHJlc29sdmVGbiwgcmVqZWN0Rm4pIHtcclxuICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcclxuICAgIGZ1bmN0aW9uIHdyYXAoZm4pIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGNhbGxlZCkgcmV0dXJuO1xyXG4gICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgZm4uY2FsbChzZWxmLCB2YWx1ZSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFt3cmFwKHJlc29sdmVGbiksIHdyYXAocmVqZWN0Rm4pXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZy4kcSNkZWZlclxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDcmVhdGVzIGEgYERlZmVycmVkYCBvYmplY3Qgd2hpY2ggcmVwcmVzZW50cyBhIHRhc2sgd2hpY2ggd2lsbCBmaW5pc2ggaW4gdGhlIGZ1dHVyZS5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtEZWZlcnJlZH0gUmV0dXJucyBhIG5ldyBpbnN0YW5jZSBvZiBkZWZlcnJlZC5cclxuICAgKi9cclxuICB2YXIgZGVmZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgRGVmZXJyZWQoKTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBQcm9taXNlKCkge1xyXG4gICAgdGhpcy4kJHN0YXRlID0geyBzdGF0dXM6IDAgfTtcclxuICB9XHJcblxyXG4gIFByb21pc2UucHJvdG90eXBlID0ge1xyXG4gICAgdGhlbjogZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb2dyZXNzQmFjaykge1xyXG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XHJcblxyXG4gICAgICB0aGlzLiQkc3RhdGUucGVuZGluZyA9IHRoaXMuJCRzdGF0ZS5wZW5kaW5nIHx8IFtdO1xyXG4gICAgICB0aGlzLiQkc3RhdGUucGVuZGluZy5wdXNoKFtyZXN1bHQsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9ncmVzc0JhY2tdKTtcclxuICAgICAgaWYgKHRoaXMuJCRzdGF0ZS5zdGF0dXMgPiAwKSBzY2hlZHVsZVByb2Nlc3NRdWV1ZSh0aGlzLiQkc3RhdGUpO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdC5wcm9taXNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgY2FsbGJhY2spO1xyXG4gICAgfSxcclxuXHJcbiAgICBcImZpbmFsbHlcIjogZnVuY3Rpb24oY2FsbGJhY2ssIHByb2dyZXNzQmFjaykge1xyXG4gICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZUNhbGxiYWNrKHZhbHVlLCB0cnVlLCBjYWxsYmFjayk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZUNhbGxiYWNrKGVycm9yLCBmYWxzZSwgY2FsbGJhY2spO1xyXG4gICAgICB9LCBwcm9ncmVzc0JhY2spO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vRmFzdGVyLCBtb3JlIGJhc2ljIHRoYW4gYW5ndWxhci5iaW5kIGh0dHA6Ly9qc3BlcmYuY29tL2FuZ3VsYXItYmluZC12cy1jdXN0b20tdnMtbmF0aXZlXHJcbiAgZnVuY3Rpb24gc2ltcGxlQmluZChjb250ZXh0LCBmbikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIGZuLmNhbGwoY29udGV4dCwgdmFsdWUpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByb2Nlc3NRdWV1ZShzdGF0ZSkge1xyXG4gICAgdmFyIGZuLCBwcm9taXNlLCBwZW5kaW5nO1xyXG5cclxuICAgIHBlbmRpbmcgPSBzdGF0ZS5wZW5kaW5nO1xyXG4gICAgc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCA9IGZhbHNlO1xyXG4gICAgc3RhdGUucGVuZGluZyA9IHVuZGVmaW5lZDtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBlbmRpbmcubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICBwcm9taXNlID0gcGVuZGluZ1tpXVswXTtcclxuICAgICAgZm4gPSBwZW5kaW5nW2ldW3N0YXRlLnN0YXR1c107XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XHJcbiAgICAgICAgICBwcm9taXNlLnJlc29sdmUoZm4oc3RhdGUudmFsdWUpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLnN0YXR1cyA9PT0gMSkge1xyXG4gICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHN0YXRlLnZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcHJvbWlzZS5yZWplY3Qoc3RhdGUudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgcHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2NoZWR1bGVQcm9jZXNzUXVldWUoc3RhdGUpIHtcclxuICAgIGlmIChzdGF0ZS5wcm9jZXNzU2NoZWR1bGVkIHx8ICFzdGF0ZS5wZW5kaW5nKSByZXR1cm47XHJcbiAgICBzdGF0ZS5wcm9jZXNzU2NoZWR1bGVkID0gdHJ1ZTtcclxuICAgIG5leHRUaWNrKGZ1bmN0aW9uKCkgeyBwcm9jZXNzUXVldWUoc3RhdGUpOyB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIERlZmVycmVkKCkge1xyXG4gICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKTtcclxuICAgIC8vTmVjZXNzYXJ5IHRvIHN1cHBvcnQgdW5ib3VuZCBleGVjdXRpb24gOi9cclxuICAgIHRoaXMucmVzb2x2ZSA9IHNpbXBsZUJpbmQodGhpcywgdGhpcy5yZXNvbHZlKTtcclxuICAgIHRoaXMucmVqZWN0ID0gc2ltcGxlQmluZCh0aGlzLCB0aGlzLnJlamVjdCk7XHJcbiAgICB0aGlzLm5vdGlmeSA9IHNpbXBsZUJpbmQodGhpcywgdGhpcy5ub3RpZnkpO1xyXG4gIH1cclxuXHJcbiAgRGVmZXJyZWQucHJvdG90eXBlID0ge1xyXG4gICAgcmVzb2x2ZTogZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgIGlmICh0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMpIHJldHVybjtcclxuICAgICAgaWYgKHZhbCA9PT0gdGhpcy5wcm9taXNlKSB7XHJcbiAgICAgICAgdGhpcy4kJHJlamVjdCgkcU1pbkVycihcclxuICAgICAgICAgICdxY3ljbGUnLFxyXG4gICAgICAgICAgXCJFeHBlY3RlZCBwcm9taXNlIHRvIGJlIHJlc29sdmVkIHdpdGggdmFsdWUgb3RoZXIgdGhhbiBpdHNlbGYgJ3swfSdcIixcclxuICAgICAgICAgIHZhbCkpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJCRyZXNvbHZlKHZhbCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgICQkcmVzb2x2ZTogZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgIHZhciB0aGVuLCBmbnM7XHJcblxyXG4gICAgICBmbnMgPSBjYWxsT25jZSh0aGlzLCB0aGlzLiQkcmVzb2x2ZSwgdGhpcy4kJHJlamVjdCk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKChpc09iamVjdCh2YWwpIHx8IGlzRnVuY3Rpb24odmFsKSkpIHRoZW4gPSB2YWwgJiYgdmFsLnRoZW47XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhlbikpIHtcclxuICAgICAgICAgIHRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA9IC0xO1xyXG4gICAgICAgICAgdGhlbi5jYWxsKHZhbCwgZm5zWzBdLCBmbnNbMV0sIHRoaXMubm90aWZ5KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wcm9taXNlLiQkc3RhdGUudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICB0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAxO1xyXG4gICAgICAgICAgc2NoZWR1bGVQcm9jZXNzUXVldWUodGhpcy5wcm9taXNlLiQkc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgZm5zWzFdKGUpO1xyXG4gICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcmVqZWN0OiBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgaWYgKHRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cykgcmV0dXJuO1xyXG4gICAgICB0aGlzLiQkcmVqZWN0KHJlYXNvbik7XHJcbiAgICB9LFxyXG5cclxuICAgICQkcmVqZWN0OiBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgdGhpcy5wcm9taXNlLiQkc3RhdGUudmFsdWUgPSByZWFzb247XHJcbiAgICAgIHRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA9IDI7XHJcbiAgICAgIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHRoaXMucHJvbWlzZS4kJHN0YXRlKTtcclxuICAgIH0sXHJcblxyXG4gICAgbm90aWZ5OiBmdW5jdGlvbihwcm9ncmVzcykge1xyXG4gICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5wcm9taXNlLiQkc3RhdGUucGVuZGluZztcclxuXHJcbiAgICAgIGlmICgodGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzIDw9IDApICYmIGNhbGxiYWNrcyAmJiBjYWxsYmFja3MubGVuZ3RoKSB7XHJcbiAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgY2FsbGJhY2ssIHJlc3VsdDtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrc1tpXVswXTtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV1bM107XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0Lm5vdGlmeShpc0Z1bmN0aW9uKGNhbGxiYWNrKSA/IGNhbGxiYWNrKHByb2dyZXNzKSA6IHByb2dyZXNzKTtcclxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRxI3JlamVjdFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDcmVhdGVzIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIGFzIHJlamVjdGVkIHdpdGggdGhlIHNwZWNpZmllZCBgcmVhc29uYC4gVGhpcyBhcGkgc2hvdWxkIGJlXHJcbiAgICogdXNlZCB0byBmb3J3YXJkIHJlamVjdGlvbiBpbiBhIGNoYWluIG9mIHByb21pc2VzLiBJZiB5b3UgYXJlIGRlYWxpbmcgd2l0aCB0aGUgbGFzdCBwcm9taXNlIGluXHJcbiAgICogYSBwcm9taXNlIGNoYWluLCB5b3UgZG9uJ3QgbmVlZCB0byB3b3JyeSBhYm91dCBpdC5cclxuICAgKlxyXG4gICAqIFdoZW4gY29tcGFyaW5nIGRlZmVycmVkcy9wcm9taXNlcyB0byB0aGUgZmFtaWxpYXIgYmVoYXZpb3Igb2YgdHJ5L2NhdGNoL3Rocm93LCB0aGluayBvZlxyXG4gICAqIGByZWplY3RgIGFzIHRoZSBgdGhyb3dgIGtleXdvcmQgaW4gSmF2YVNjcmlwdC4gVGhpcyBhbHNvIG1lYW5zIHRoYXQgaWYgeW91IFwiY2F0Y2hcIiBhbiBlcnJvciB2aWFcclxuICAgKiBhIHByb21pc2UgZXJyb3IgY2FsbGJhY2sgYW5kIHlvdSB3YW50IHRvIGZvcndhcmQgdGhlIGVycm9yIHRvIHRoZSBwcm9taXNlIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgKiBjdXJyZW50IHByb21pc2UsIHlvdSBoYXZlIHRvIFwicmV0aHJvd1wiIHRoZSBlcnJvciBieSByZXR1cm5pbmcgYSByZWplY3Rpb24gY29uc3RydWN0ZWQgdmlhXHJcbiAgICogYHJlamVjdGAuXHJcbiAgICpcclxuICAgKiBgYGBqc1xyXG4gICAqICAgcHJvbWlzZUIgPSBwcm9taXNlQS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAqICAgICAvLyBzdWNjZXNzOiBkbyBzb21ldGhpbmcgYW5kIHJlc29sdmUgcHJvbWlzZUJcclxuICAgKiAgICAgLy8gICAgICAgICAgd2l0aCB0aGUgb2xkIG9yIGEgbmV3IHJlc3VsdFxyXG4gICAqICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICogICAgIC8vIGVycm9yOiBoYW5kbGUgdGhlIGVycm9yIGlmIHBvc3NpYmxlIGFuZFxyXG4gICAqICAgICAvLyAgICAgICAgcmVzb2x2ZSBwcm9taXNlQiB3aXRoIG5ld1Byb21pc2VPclZhbHVlLFxyXG4gICAqICAgICAvLyAgICAgICAgb3RoZXJ3aXNlIGZvcndhcmQgdGhlIHJlamVjdGlvbiB0byBwcm9taXNlQlxyXG4gICAqICAgICBpZiAoY2FuSGFuZGxlKHJlYXNvbikpIHtcclxuICAgKiAgICAgIC8vIGhhbmRsZSB0aGUgZXJyb3IgYW5kIHJlY292ZXJcclxuICAgKiAgICAgIHJldHVybiBuZXdQcm9taXNlT3JWYWx1ZTtcclxuICAgKiAgICAgfVxyXG4gICAqICAgICByZXR1cm4gJHEucmVqZWN0KHJlYXNvbik7XHJcbiAgICogICB9KTtcclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gcmVhc29uIENvbnN0YW50LCBtZXNzYWdlLCBleGNlcHRpb24gb3IgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmVqZWN0aW9uIHJlYXNvbi5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHByb21pc2UgdGhhdCB3YXMgYWxyZWFkeSByZXNvbHZlZCBhcyByZWplY3RlZCB3aXRoIHRoZSBgcmVhc29uYC5cclxuICAgKi9cclxuICB2YXIgcmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICByZXN1bHQucmVqZWN0KHJlYXNvbik7XHJcbiAgICByZXR1cm4gcmVzdWx0LnByb21pc2U7XHJcbiAgfTtcclxuXHJcbiAgdmFyIG1ha2VQcm9taXNlID0gZnVuY3Rpb24gbWFrZVByb21pc2UodmFsdWUsIHJlc29sdmVkKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBpZiAocmVzb2x2ZWQpIHtcclxuICAgICAgcmVzdWx0LnJlc29sdmUodmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzdWx0LnJlamVjdCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0LnByb21pc2U7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGhhbmRsZUNhbGxiYWNrID0gZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2sodmFsdWUsIGlzUmVzb2x2ZWQsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgY2FsbGJhY2tPdXRwdXQgPSBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSBjYWxsYmFja091dHB1dCA9IGNhbGxiYWNrKCk7XHJcbiAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgcmV0dXJuIG1ha2VQcm9taXNlKGUsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIGlmIChpc1Byb21pc2VMaWtlKGNhbGxiYWNrT3V0cHV0KSkge1xyXG4gICAgICByZXR1cm4gY2FsbGJhY2tPdXRwdXQudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbWFrZVByb21pc2UodmFsdWUsIGlzUmVzb2x2ZWQpO1xyXG4gICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBtYWtlUHJvbWlzZShlcnJvciwgZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBtYWtlUHJvbWlzZSh2YWx1ZSwgaXNSZXNvbHZlZCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRxI3doZW5cclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogV3JhcHMgYW4gb2JqZWN0IHRoYXQgbWlnaHQgYmUgYSB2YWx1ZSBvciBhICgzcmQgcGFydHkpIHRoZW4tYWJsZSBwcm9taXNlIGludG8gYSAkcSBwcm9taXNlLlxyXG4gICAqIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IGFyZSBkZWFsaW5nIHdpdGggYW4gb2JqZWN0IHRoYXQgbWlnaHQgb3IgbWlnaHQgbm90IGJlIGEgcHJvbWlzZSwgb3IgaWZcclxuICAgKiB0aGUgcHJvbWlzZSBjb21lcyBmcm9tIGEgc291cmNlIHRoYXQgY2FuJ3QgYmUgdHJ1c3RlZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgb3IgYSBwcm9taXNlXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIG9mIHRoZSBwYXNzZWQgdmFsdWUgb3IgcHJvbWlzZVxyXG4gICAqL1xyXG5cclxuXHJcbiAgdmFyIHdoZW4gPSBmdW5jdGlvbih2YWx1ZSwgY2FsbGJhY2ssIGVycmJhY2ssIHByb2dyZXNzQmFjaykge1xyXG4gICAgdmFyIHJlc3VsdCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgcmVzdWx0LnJlc29sdmUodmFsdWUpO1xyXG4gICAgcmV0dXJuIHJlc3VsdC5wcm9taXNlLnRoZW4oY2FsbGJhY2ssIGVycmJhY2ssIHByb2dyZXNzQmFjayk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRxI2FsbFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDb21iaW5lcyBtdWx0aXBsZSBwcm9taXNlcyBpbnRvIGEgc2luZ2xlIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGFsbCBvZiB0aGUgaW5wdXRcclxuICAgKiBwcm9taXNlcyBhcmUgcmVzb2x2ZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5LjxQcm9taXNlPnxPYmplY3QuPFByb21pc2U+fSBwcm9taXNlcyBBbiBhcnJheSBvciBoYXNoIG9mIHByb21pc2VzLlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgc2luZ2xlIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggYW4gYXJyYXkvaGFzaCBvZiB2YWx1ZXMsXHJcbiAgICogICBlYWNoIHZhbHVlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb21pc2UgYXQgdGhlIHNhbWUgaW5kZXgva2V5IGluIHRoZSBgcHJvbWlzZXNgIGFycmF5L2hhc2guXHJcbiAgICogICBJZiBhbnkgb2YgdGhlIHByb21pc2VzIGlzIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24sIHRoaXMgcmVzdWx0aW5nIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZFxyXG4gICAqICAgd2l0aCB0aGUgc2FtZSByZWplY3Rpb24gdmFsdWUuXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xyXG4gICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCksXHJcbiAgICAgICAgY291bnRlciA9IDAsXHJcbiAgICAgICAgcmVzdWx0cyA9IGlzQXJyYXkocHJvbWlzZXMpID8gW10gOiB7fTtcclxuXHJcbiAgICBmb3JFYWNoKHByb21pc2VzLCBmdW5jdGlvbihwcm9taXNlLCBrZXkpIHtcclxuICAgICAgY291bnRlcisrO1xyXG4gICAgICB3aGVuKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBpZiAocmVzdWx0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSByZXR1cm47XHJcbiAgICAgICAgcmVzdWx0c1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKCEoLS1jb3VudGVyKSkgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICAgICAgaWYgKHJlc3VsdHMuaGFzT3duUHJvcGVydHkoa2V5KSkgcmV0dXJuO1xyXG4gICAgICAgIGRlZmVycmVkLnJlamVjdChyZWFzb24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChjb3VudGVyID09PSAwKSB7XHJcbiAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgfVxyXG5cclxuICB2YXIgJFEgPSBmdW5jdGlvbiBRKHJlc29sdmVyKSB7XHJcbiAgICBpZiAoIWlzRnVuY3Rpb24ocmVzb2x2ZXIpKSB7XHJcbiAgICAgIHRocm93ICRxTWluRXJyKCdub3JzbHZyJywgXCJFeHBlY3RlZCByZXNvbHZlckZuLCBnb3QgJ3swfSdcIiwgcmVzb2x2ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBRKSkge1xyXG4gICAgICAvLyBNb3JlIHVzZWZ1bCB3aGVuICRRIGlzIHRoZSBQcm9taXNlIGl0c2VsZi5cclxuICAgICAgcmV0dXJuIG5ldyBRKHJlc29sdmVyKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuXHJcbiAgICBmdW5jdGlvbiByZXNvbHZlRm4odmFsdWUpIHtcclxuICAgICAgZGVmZXJyZWQucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVqZWN0Rm4ocmVhc29uKSB7XHJcbiAgICAgIGRlZmVycmVkLnJlamVjdChyZWFzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc29sdmVyKHJlc29sdmVGbiwgcmVqZWN0Rm4pO1xyXG5cclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gIH07XHJcblxyXG4gICRRLmRlZmVyID0gZGVmZXI7XHJcbiAgJFEucmVqZWN0ID0gcmVqZWN0O1xyXG4gICRRLndoZW4gPSB3aGVuO1xyXG4gICRRLmFsbCA9IGFsbDtcclxuXHJcbiAgcmV0dXJuICRRO1xyXG59XHJcblxyXG5mdW5jdGlvbiAkJFJBRlByb3ZpZGVyKCl7IC8vckFGXHJcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyR0aW1lb3V0JywgZnVuY3Rpb24oJHdpbmRvdywgJHRpbWVvdXQpIHtcclxuICAgIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblxyXG4gICAgdmFyIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblxyXG4gICAgdmFyIHJhZlN1cHBvcnRlZCA9ICEhcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG4gICAgdmFyIHJhZiA9IHJhZlN1cHBvcnRlZFxyXG4gICAgICA/IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICB2YXIgaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pO1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgOiBmdW5jdGlvbihmbikge1xyXG4gICAgICAgICAgdmFyIHRpbWVyID0gJHRpbWVvdXQoZm4sIDE2LjY2LCBmYWxzZSk7IC8vIDEwMDAgLyA2MCA9IDE2LjY2NlxyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIHJhZi5zdXBwb3J0ZWQgPSByYWZTdXBwb3J0ZWQ7XHJcblxyXG4gICAgcmV0dXJuIHJhZjtcclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERFU0lHTiBOT1RFU1xyXG4gKlxyXG4gKiBUaGUgZGVzaWduIGRlY2lzaW9ucyBiZWhpbmQgdGhlIHNjb3BlIGFyZSBoZWF2aWx5IGZhdm9yZWQgZm9yIHNwZWVkIGFuZCBtZW1vcnkgY29uc3VtcHRpb24uXHJcbiAqXHJcbiAqIFRoZSB0eXBpY2FsIHVzZSBvZiBzY29wZSBpcyB0byB3YXRjaCB0aGUgZXhwcmVzc2lvbnMsIHdoaWNoIG1vc3Qgb2YgdGhlIHRpbWUgcmV0dXJuIHRoZSBzYW1lXHJcbiAqIHZhbHVlIGFzIGxhc3QgdGltZSBzbyB3ZSBvcHRpbWl6ZSB0aGUgb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBDbG9zdXJlcyBjb25zdHJ1Y3Rpb24gaXMgZXhwZW5zaXZlIGluIHRlcm1zIG9mIHNwZWVkIGFzIHdlbGwgYXMgbWVtb3J5OlxyXG4gKiAgIC0gTm8gY2xvc3VyZXMsIGluc3RlYWQgdXNlIHByb3RvdHlwaWNhbCBpbmhlcml0YW5jZSBmb3IgQVBJXHJcbiAqICAgLSBJbnRlcm5hbCBzdGF0ZSBuZWVkcyB0byBiZSBzdG9yZWQgb24gc2NvcGUgZGlyZWN0bHksIHdoaWNoIG1lYW5zIHRoYXQgcHJpdmF0ZSBzdGF0ZSBpc1xyXG4gKiAgICAgZXhwb3NlZCBhcyAkJF9fX18gcHJvcGVydGllc1xyXG4gKlxyXG4gKiBMb29wIG9wZXJhdGlvbnMgYXJlIG9wdGltaXplZCBieSB1c2luZyB3aGlsZShjb3VudC0tKSB7IC4uLiB9XHJcbiAqICAgLSB0aGlzIG1lYW5zIHRoYXQgaW4gb3JkZXIgdG8ga2VlcCB0aGUgc2FtZSBvcmRlciBvZiBleGVjdXRpb24gYXMgYWRkaXRpb24gd2UgaGF2ZSB0byBhZGRcclxuICogICAgIGl0ZW1zIHRvIHRoZSBhcnJheSBhdCB0aGUgYmVnaW5uaW5nICh1bnNoaWZ0KSBpbnN0ZWFkIG9mIGF0IHRoZSBlbmQgKHB1c2gpXHJcbiAqXHJcbiAqIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCBhbmQgcmVtb3ZlZCBvZnRlblxyXG4gKiAgIC0gVXNpbmcgYW4gYXJyYXkgd291bGQgYmUgc2xvdyBzaW5jZSBpbnNlcnRzIGluIG1pZGRsZSBhcmUgZXhwZW5zaXZlIHNvIHdlIHVzZSBsaW5rZWQgbGlzdFxyXG4gKlxyXG4gKiBUaGVyZSBhcmUgZmV3IHdhdGNoZXMgdGhlbiBhIGxvdCBvZiBvYnNlcnZlcnMuIFRoaXMgaXMgd2h5IHlvdSBkb24ndCB3YW50IHRoZSBvYnNlcnZlciB0byBiZVxyXG4gKiBpbXBsZW1lbnRlZCBpbiB0aGUgc2FtZSB3YXkgYXMgd2F0Y2guIFdhdGNoIHJlcXVpcmVzIHJldHVybiBvZiBpbml0aWFsaXphdGlvbiBmdW5jdGlvbiB3aGljaFxyXG4gKiBhcmUgZXhwZW5zaXZlIHRvIGNvbnN0cnVjdC5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkcm9vdFNjb3BlUHJvdmlkZXJcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFByb3ZpZGVyIGZvciB0aGUgJHJvb3RTY29wZSBzZXJ2aWNlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRyb290U2NvcGVQcm92aWRlciNkaWdlc3RUdGxcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFNldHMgdGhlIG51bWJlciBvZiBgJGRpZ2VzdGAgaXRlcmF0aW9ucyB0aGUgc2NvcGUgc2hvdWxkIGF0dGVtcHQgdG8gZXhlY3V0ZSBiZWZvcmUgZ2l2aW5nIHVwIGFuZFxyXG4gKiBhc3N1bWluZyB0aGF0IHRoZSBtb2RlbCBpcyB1bnN0YWJsZS5cclxuICpcclxuICogVGhlIGN1cnJlbnQgZGVmYXVsdCBpcyAxMCBpdGVyYXRpb25zLlxyXG4gKlxyXG4gKiBJbiBjb21wbGV4IGFwcGxpY2F0aW9ucyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGRlcGVuZGVuY2llcyBiZXR3ZWVuIGAkd2F0Y2hgcyB3aWxsIHJlc3VsdCBpblxyXG4gKiBzZXZlcmFsIGRpZ2VzdCBpdGVyYXRpb25zLiBIb3dldmVyIGlmIGFuIGFwcGxpY2F0aW9uIG5lZWRzIG1vcmUgdGhhbiB0aGUgZGVmYXVsdCAxMCBkaWdlc3RcclxuICogaXRlcmF0aW9ucyBmb3IgaXRzIG1vZGVsIHRvIHN0YWJpbGl6ZSB0aGVuIHlvdSBzaG91bGQgaW52ZXN0aWdhdGUgd2hhdCBpcyBjYXVzaW5nIHRoZSBtb2RlbCB0b1xyXG4gKiBjb250aW51b3VzbHkgY2hhbmdlIGR1cmluZyB0aGUgZGlnZXN0LlxyXG4gKlxyXG4gKiBJbmNyZWFzaW5nIHRoZSBUVEwgY291bGQgaGF2ZSBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMsIHNvIHlvdSBzaG91bGQgbm90IGNoYW5nZSBpdCB3aXRob3V0XHJcbiAqIHByb3BlciBqdXN0aWZpY2F0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGltaXQgVGhlIG51bWJlciBvZiBkaWdlc3QgaXRlcmF0aW9ucy5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRyb290U2NvcGVcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIEV2ZXJ5IGFwcGxpY2F0aW9uIGhhcyBhIHNpbmdsZSByb290IHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIHNjb3BlfS5cclxuICogQWxsIG90aGVyIHNjb3BlcyBhcmUgZGVzY2VuZGFudCBzY29wZXMgb2YgdGhlIHJvb3Qgc2NvcGUuIFNjb3BlcyBwcm92aWRlIHNlcGFyYXRpb25cclxuICogYmV0d2VlbiB0aGUgbW9kZWwgYW5kIHRoZSB2aWV3LCB2aWEgYSBtZWNoYW5pc20gZm9yIHdhdGNoaW5nIHRoZSBtb2RlbCBmb3IgY2hhbmdlcy5cclxuICogVGhleSBhbHNvIHByb3ZpZGUgYW4gZXZlbnQgZW1pc3Npb24vYnJvYWRjYXN0IGFuZCBzdWJzY3JpcHRpb24gZmFjaWxpdHkuIFNlZSB0aGVcclxuICoge0BsaW5rIGd1aWRlL3Njb3BlIGRldmVsb3BlciBndWlkZSBvbiBzY29wZXN9LlxyXG4gKi9cclxuZnVuY3Rpb24gJFJvb3RTY29wZVByb3ZpZGVyKCl7XHJcbiAgdmFyIFRUTCA9IDEwO1xyXG4gIHZhciAkcm9vdFNjb3BlTWluRXJyID0gbWluRXJyKCckcm9vdFNjb3BlJyk7XHJcbiAgdmFyIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcclxuICB2YXIgYXBwbHlBc3luY0lkID0gbnVsbDtcclxuXHJcbiAgdGhpcy5kaWdlc3RUdGwgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgVFRMID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gVFRMO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyRwYXJzZScsICckYnJvd3NlcicsXHJcbiAgICAgIGZ1bmN0aW9uKCAkaW5qZWN0b3IsICAgJGV4Y2VwdGlvbkhhbmRsZXIsICAgJHBhcnNlLCAgICRicm93c2VyKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgdHlwZVxyXG4gICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQSByb290IHNjb3BlIGNhbiBiZSByZXRyaWV2ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlICRyb290U2NvcGV9IGtleSBmcm9tIHRoZVxyXG4gICAgICoge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCB1c2luZyB0aGVcclxuICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRuZXcgJG5ldygpfSBtZXRob2QuIChNb3N0IHNjb3BlcyBhcmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW5cclxuICAgICAqIGNvbXBpbGVkIEhUTUwgdGVtcGxhdGUgaXMgZXhlY3V0ZWQuKVxyXG4gICAgICpcclxuICAgICAqIEhlcmUgaXMgYSBzaW1wbGUgc2NvcGUgc25pcHBldCB0byBzaG93IGhvdyB5b3UgY2FuIGludGVyYWN0IHdpdGggdGhlIHNjb3BlLlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGZpbGUgc3JjPVwiLi90ZXN0L25nL3Jvb3RTY29wZVNwZWMuanNcIiB0YWc9XCJkb2NzMVwiIC8+XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAjIEluaGVyaXRhbmNlXHJcbiAgICAgKiBBIHNjb3BlIGNhbiBpbmhlcml0IGZyb20gYSBwYXJlbnQgc2NvcGUsIGFzIGluIHRoaXMgZXhhbXBsZTpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgICAgIHZhciBwYXJlbnQgPSAkcm9vdFNjb3BlO1xyXG4gICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuJG5ldygpO1xyXG5cclxuICAgICAgICAgcGFyZW50LnNhbHV0YXRpb24gPSBcIkhlbGxvXCI7XHJcbiAgICAgICAgIGNoaWxkLm5hbWUgPSBcIldvcmxkXCI7XHJcbiAgICAgICAgIGV4cGVjdChjaGlsZC5zYWx1dGF0aW9uKS50b0VxdWFsKCdIZWxsbycpO1xyXG5cclxuICAgICAgICAgY2hpbGQuc2FsdXRhdGlvbiA9IFwiV2VsY29tZVwiO1xyXG4gICAgICAgICBleHBlY3QoY2hpbGQuc2FsdXRhdGlvbikudG9FcXVhbCgnV2VsY29tZScpO1xyXG4gICAgICAgICBleHBlY3QocGFyZW50LnNhbHV0YXRpb24pLnRvRXF1YWwoJ0hlbGxvJyk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24oKT49fSBwcm92aWRlcnMgTWFwIG9mIHNlcnZpY2UgZmFjdG9yeSB3aGljaCBuZWVkIHRvIGJlXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkIGZvciB0aGUgY3VycmVudCBzY29wZS4gRGVmYXVsdHMgdG8ge0BsaW5rIG5nfS5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsICo+PX0gaW5zdGFuY2VDYWNoZSBQcm92aWRlcyBwcmUtaW5zdGFudGlhdGVkIHNlcnZpY2VzIHdoaWNoIHNob3VsZFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQvb3ZlcnJpZGUgc2VydmljZXMgcHJvdmlkZWQgYnkgYHByb3ZpZGVyc2AuIFRoaXMgaXMgaGFuZHlcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiB1bml0LXRlc3RpbmcgYW5kIGhhdmluZyB0aGUgbmVlZCB0byBvdmVycmlkZSBhIGRlZmF1bHRcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZS5cclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IE5ld2x5IGNyZWF0ZWQgc2NvcGUuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBTY29wZSgpIHtcclxuICAgICAgdGhpcy4kaWQgPSBuZXh0VWlkKCk7XHJcbiAgICAgIHRoaXMuJCRwaGFzZSA9IHRoaXMuJHBhcmVudCA9IHRoaXMuJCR3YXRjaGVycyA9XHJcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuJCRuZXh0U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZyA9XHJcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuJCRjaGlsZEhlYWQgPSB0aGlzLiQkY2hpbGRUYWlsID0gbnVsbDtcclxuICAgICAgdGhpc1sndGhpcyddID0gdGhpcy4kcm9vdCA9ICB0aGlzO1xyXG4gICAgICB0aGlzLiQkZGVzdHJveWVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuJCRhc3luY1F1ZXVlID0gW107XHJcbiAgICAgIHRoaXMuJCRwb3N0RGlnZXN0UXVldWUgPSBbXTtcclxuICAgICAgdGhpcy4kJGxpc3RlbmVycyA9IHt9O1xyXG4gICAgICB0aGlzLiQkbGlzdGVuZXJDb3VudCA9IHt9O1xyXG4gICAgICB0aGlzLiQkaXNvbGF0ZUJpbmRpbmdzID0gbnVsbDtcclxuICAgICAgdGhpcy4kJGFwcGx5QXN5bmNRdWV1ZSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRpZFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogVW5pcXVlIHNjb3BlIElEIChtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcpIHVzZWZ1bCBmb3IgZGVidWdnaW5nLlxyXG4gICAgICovXHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHBhcmVudFxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICogUmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgc2NvcGUuXHJcbiAgICAgICovXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHJvb3RcclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFJlZmVyZW5jZSB0byB0aGUgcm9vdCBzY29wZS5cclxuICAgICAgICovXHJcblxyXG4gICAgU2NvcGUucHJvdG90eXBlID0ge1xyXG4gICAgICBjb25zdHJ1Y3RvcjogU2NvcGUsXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJG5ld1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogQ3JlYXRlcyBhIG5ldyBjaGlsZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFRoZSBwYXJlbnQgc2NvcGUgd2lsbCBwcm9wYWdhdGUgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBldmVudC5cclxuICAgICAgICogVGhlIHNjb3BlIGNhbiBiZSByZW1vdmVkIGZyb20gdGhlIHNjb3BlIGhpZXJhcmNoeSB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveSAkZGVzdHJveSgpfS5cclxuICAgICAgICpcclxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3kgJGRlc3Ryb3koKX0gbXVzdCBiZSBjYWxsZWQgb24gYSBzY29wZSB3aGVuIGl0IGlzXHJcbiAgICAgICAqIGRlc2lyZWQgZm9yIHRoZSBzY29wZSBhbmQgaXRzIGNoaWxkIHNjb3BlcyB0byBiZSBwZXJtYW5lbnRseSBkZXRhY2hlZCBmcm9tIHRoZSBwYXJlbnQgYW5kXHJcbiAgICAgICAqIHRodXMgc3RvcCBwYXJ0aWNpcGF0aW5nIGluIG1vZGVsIGNoYW5nZSBkZXRlY3Rpb24gYW5kIGxpc3RlbmVyIG5vdGlmaWNhdGlvbiBieSBpbnZva2luZy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc29sYXRlIElmIHRydWUsIHRoZW4gdGhlIHNjb3BlIGRvZXMgbm90IHByb3RvdHlwaWNhbGx5IGluaGVyaXQgZnJvbSB0aGVcclxuICAgICAgICogICAgICAgICBwYXJlbnQgc2NvcGUuIFRoZSBzY29wZSBpcyBpc29sYXRlZCwgYXMgaXQgY2FuIG5vdCBzZWUgcGFyZW50IHNjb3BlIHByb3BlcnRpZXMuXHJcbiAgICAgICAqICAgICAgICAgV2hlbiBjcmVhdGluZyB3aWRnZXRzLCBpdCBpcyB1c2VmdWwgZm9yIHRoZSB3aWRnZXQgdG8gbm90IGFjY2lkZW50YWxseSByZWFkIHBhcmVudFxyXG4gICAgICAgKiAgICAgICAgIHN0YXRlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbmV3bHkgY3JlYXRlZCBjaGlsZCBzY29wZS5cclxuICAgICAgICpcclxuICAgICAgICovXHJcbiAgICAgICRuZXc6IGZ1bmN0aW9uKGlzb2xhdGUpIHtcclxuICAgICAgICB2YXIgY2hpbGQ7XHJcblxyXG4gICAgICAgIGlmIChpc29sYXRlKSB7XHJcbiAgICAgICAgICBjaGlsZCA9IG5ldyBTY29wZSgpO1xyXG4gICAgICAgICAgY2hpbGQuJHJvb3QgPSB0aGlzLiRyb290O1xyXG4gICAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlcmUgaXMganVzdCBvbmUgYXN5bmMgcXVldWUgcGVyICRyb290U2NvcGUgYW5kIGl0cyBjaGlsZHJlblxyXG4gICAgICAgICAgY2hpbGQuJCRhc3luY1F1ZXVlID0gdGhpcy4kJGFzeW5jUXVldWU7XHJcbiAgICAgICAgICBjaGlsZC4kJHBvc3REaWdlc3RRdWV1ZSA9IHRoaXMuJCRwb3N0RGlnZXN0UXVldWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIE9ubHkgY3JlYXRlIGEgY2hpbGQgc2NvcGUgY2xhc3MgaWYgc29tZWJvZHkgYXNrcyBmb3Igb25lLFxyXG4gICAgICAgICAgLy8gYnV0IGNhY2hlIGl0IHRvIGFsbG93IHRoZSBWTSB0byBvcHRpbWl6ZSBsb29rdXBzLlxyXG4gICAgICAgICAgaWYgKCF0aGlzLiQkQ2hpbGRTY29wZSkge1xyXG4gICAgICAgICAgICB0aGlzLiQkQ2hpbGRTY29wZSA9IGZ1bmN0aW9uIENoaWxkU2NvcGUoKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy4kJHdhdGNoZXJzID0gdGhpcy4kJG5leHRTaWJsaW5nID1cclxuICAgICAgICAgICAgICAgICAgdGhpcy4kJGNoaWxkSGVhZCA9IHRoaXMuJCRjaGlsZFRhaWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICAgICAgICB0aGlzLiQkbGlzdGVuZXJDb3VudCA9IHt9O1xyXG4gICAgICAgICAgICAgIHRoaXMuJGlkID0gbmV4dFVpZCgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuJCRDaGlsZFNjb3BlID0gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy4kJENoaWxkU2NvcGUucHJvdG90eXBlID0gdGhpcztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNoaWxkID0gbmV3IHRoaXMuJCRDaGlsZFNjb3BlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoaWxkWyd0aGlzJ10gPSBjaGlsZDtcclxuICAgICAgICBjaGlsZC4kcGFyZW50ID0gdGhpcztcclxuICAgICAgICBjaGlsZC4kJHByZXZTaWJsaW5nID0gdGhpcy4kJGNoaWxkVGFpbDtcclxuICAgICAgICBpZiAodGhpcy4kJGNoaWxkSGVhZCkge1xyXG4gICAgICAgICAgdGhpcy4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nID0gY2hpbGQ7XHJcbiAgICAgICAgICB0aGlzLiQkY2hpbGRUYWlsID0gY2hpbGQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuJCRjaGlsZEhlYWQgPSB0aGlzLiQkY2hpbGRUYWlsID0gY2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHdhdGNoXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBSZWdpc3RlcnMgYSBgbGlzdGVuZXJgIGNhbGxiYWNrIHRvIGJlIGV4ZWN1dGVkIHdoZW5ldmVyIHRoZSBgd2F0Y2hFeHByZXNzaW9uYCBjaGFuZ2VzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAtIFRoZSBgd2F0Y2hFeHByZXNzaW9uYCBpcyBjYWxsZWQgb24gZXZlcnkgY2FsbCB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0XHJcbiAgICAgICAqICAgJGRpZ2VzdCgpfSBhbmQgc2hvdWxkIHJldHVybiB0aGUgdmFsdWUgdGhhdCB3aWxsIGJlIHdhdGNoZWQuIChTaW5jZVxyXG4gICAgICAgKiAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSByZXJ1bnMgd2hlbiBpdCBkZXRlY3RzIGNoYW5nZXMgdGhlXHJcbiAgICAgICAqICAgYHdhdGNoRXhwcmVzc2lvbmAgY2FuIGV4ZWN1dGUgbXVsdGlwbGUgdGltZXMgcGVyXHJcbiAgICAgICAqICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IGFuZCBzaG91bGQgYmUgaWRlbXBvdGVudC4pXHJcbiAgICAgICAqIC0gVGhlIGBsaXN0ZW5lcmAgaXMgY2FsbGVkIG9ubHkgd2hlbiB0aGUgdmFsdWUgZnJvbSB0aGUgY3VycmVudCBgd2F0Y2hFeHByZXNzaW9uYCBhbmQgdGhlXHJcbiAgICAgICAqICAgcHJldmlvdXMgY2FsbCB0byBgd2F0Y2hFeHByZXNzaW9uYCBhcmUgbm90IGVxdWFsICh3aXRoIHRoZSBleGNlcHRpb24gb2YgdGhlIGluaXRpYWwgcnVuLFxyXG4gICAgICAgKiAgIHNlZSBiZWxvdykuIEluZXF1YWxpdHkgaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gcmVmZXJlbmNlIGluZXF1YWxpdHksXHJcbiAgICAgICAqICAgW3N0cmljdCBjb21wYXJpc29uXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9PcGVyYXRvcnMvQ29tcGFyaXNvbl9PcGVyYXRvcnMpXHJcbiAgICAgICAqICAgIHZpYSB0aGUgYCE9PWAgSmF2YXNjcmlwdCBvcGVyYXRvciwgdW5sZXNzIGBvYmplY3RFcXVhbGl0eSA9PSB0cnVlYFxyXG4gICAgICAgKiAgIChzZWUgbmV4dCBwb2ludClcclxuICAgICAgICogLSBXaGVuIGBvYmplY3RFcXVhbGl0eSA9PSB0cnVlYCwgaW5lcXVhbGl0eSBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbmAgaXMgZGV0ZXJtaW5lZFxyXG4gICAgICAgKiAgIGFjY29yZGluZyB0byB0aGUge0BsaW5rIGFuZ3VsYXIuZXF1YWxzfSBmdW5jdGlvbi4gVG8gc2F2ZSB0aGUgdmFsdWUgb2YgdGhlIG9iamVjdCBmb3JcclxuICAgICAgICogICBsYXRlciBjb21wYXJpc29uLCB0aGUge0BsaW5rIGFuZ3VsYXIuY29weX0gZnVuY3Rpb24gaXMgdXNlZC4gVGhpcyB0aGVyZWZvcmUgbWVhbnMgdGhhdFxyXG4gICAgICAgKiAgIHdhdGNoaW5nIGNvbXBsZXggb2JqZWN0cyB3aWxsIGhhdmUgYWR2ZXJzZSBtZW1vcnkgYW5kIHBlcmZvcm1hbmNlIGltcGxpY2F0aW9ucy5cclxuICAgICAgICogLSBUaGUgd2F0Y2ggYGxpc3RlbmVyYCBtYXkgY2hhbmdlIHRoZSBtb2RlbCwgd2hpY2ggbWF5IHRyaWdnZXIgb3RoZXIgYGxpc3RlbmVyYHMgdG8gZmlyZS5cclxuICAgICAgICogICBUaGlzIGlzIGFjaGlldmVkIGJ5IHJlcnVubmluZyB0aGUgd2F0Y2hlcnMgdW50aWwgbm8gY2hhbmdlcyBhcmUgZGV0ZWN0ZWQuIFRoZSByZXJ1blxyXG4gICAgICAgKiAgIGl0ZXJhdGlvbiBsaW1pdCBpcyAxMCB0byBwcmV2ZW50IGFuIGluZmluaXRlIGxvb3AgZGVhZGxvY2suXHJcbiAgICAgICAqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIElmIHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkIHdoZW5ldmVyIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gaXMgY2FsbGVkLFxyXG4gICAgICAgKiB5b3UgY2FuIHJlZ2lzdGVyIGEgYHdhdGNoRXhwcmVzc2lvbmAgZnVuY3Rpb24gd2l0aCBubyBgbGlzdGVuZXJgLiAoU2luY2UgYHdhdGNoRXhwcmVzc2lvbmBcclxuICAgICAgICogY2FuIGV4ZWN1dGUgbXVsdGlwbGUgdGltZXMgcGVyIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUgd2hlbiBhXHJcbiAgICAgICAqIGNoYW5nZSBpcyBkZXRlY3RlZCwgYmUgcHJlcGFyZWQgZm9yIG11bHRpcGxlIGNhbGxzIHRvIHlvdXIgbGlzdGVuZXIuKVxyXG4gICAgICAgKlxyXG4gICAgICAgKiBBZnRlciBhIHdhdGNoZXIgaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBzY29wZSwgdGhlIGBsaXN0ZW5lcmAgZm4gaXMgY2FsbGVkIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAqICh2aWEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luYyAkZXZhbEFzeW5jfSkgdG8gaW5pdGlhbGl6ZSB0aGVcclxuICAgICAgICogd2F0Y2hlci4gSW4gcmFyZSBjYXNlcywgdGhpcyBpcyB1bmRlc2lyYWJsZSBiZWNhdXNlIHRoZSBsaXN0ZW5lciBpcyBjYWxsZWQgd2hlbiB0aGUgcmVzdWx0XHJcbiAgICAgICAqIG9mIGB3YXRjaEV4cHJlc3Npb25gIGRpZG4ndCBjaGFuZ2UuIFRvIGRldGVjdCB0aGlzIHNjZW5hcmlvIHdpdGhpbiB0aGUgYGxpc3RlbmVyYCBmbiwgeW91XHJcbiAgICAgICAqIGNhbiBjb21wYXJlIHRoZSBgbmV3VmFsYCBhbmQgYG9sZFZhbGAuIElmIHRoZXNlIHR3byB2YWx1ZXMgYXJlIGlkZW50aWNhbCAoYD09PWApIHRoZW4gdGhlXHJcbiAgICAgICAqIGxpc3RlbmVyIHdhcyBjYWxsZWQgZHVlIHRvIGluaXRpYWxpemF0aW9uLlxyXG4gICAgICAgKlxyXG4gICAgICAgKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAjIEV4YW1wbGVcclxuICAgICAgICogYGBganNcclxuICAgICAgICAgICAvLyBsZXQncyBhc3N1bWUgdGhhdCBzY29wZSB3YXMgZGVwZW5kZW5jeSBpbmplY3RlZCBhcyB0aGUgJHJvb3RTY29wZVxyXG4gICAgICAgICAgIHZhciBzY29wZSA9ICRyb290U2NvcGU7XHJcbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdtaXNrbyc7XHJcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XHJcblxyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xyXG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgc2NvcGUuY291bnRlciA9IHNjb3BlLmNvdW50ZXIgKyAxO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xyXG5cclxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgxKTtcclxuXHJcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgIC8vIGJ1dCBub3cgaXQgd2lsbCBub3QgYmUgY2FsbGVkIHVubGVzcyB0aGUgdmFsdWUgY2hhbmdlc1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDEpO1xyXG5cclxuICAgICAgICAgICBzY29wZS5uYW1lID0gJ2FkYW0nO1xyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAvLyBVc2luZyBhIGZ1bmN0aW9uIGFzIGEgd2F0Y2hFeHByZXNzaW9uXHJcbiAgICAgICAgICAgdmFyIGZvb2Q7XHJcbiAgICAgICAgICAgc2NvcGUuZm9vZENvdW50ZXIgPSAwO1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgwKTtcclxuICAgICAgICAgICBzY29wZS4kd2F0Y2goXHJcbiAgICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHZhbHVlIGJlaW5nIHdhdGNoZWQuIEl0IGlzIGNhbGxlZCBmb3IgZWFjaCB0dXJuIG9mIHRoZSAkZGlnZXN0IGxvb3BcclxuICAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gZm9vZDsgfSxcclxuICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNoYW5nZSBsaXN0ZW5lciwgY2FsbGVkIHdoZW4gdGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIGFib3ZlIGZ1bmN0aW9uIGNoYW5nZXNcclxuICAgICAgICAgICAgIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICBpZiAoIG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSApIHtcclxuICAgICAgICAgICAgICAgICAvLyBPbmx5IGluY3JlbWVudCB0aGUgY291bnRlciBpZiB0aGUgdmFsdWUgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgIHNjb3BlLmZvb2RDb3VudGVyID0gc2NvcGUuZm9vZENvdW50ZXIgKyAxO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgKTtcclxuICAgICAgICAgICAvLyBObyBkaWdlc3QgaGFzIGJlZW4gcnVuIHNvIHRoZSBjb3VudGVyIHdpbGwgYmUgemVyb1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgwKTtcclxuXHJcbiAgICAgICAgICAgLy8gUnVuIHRoZSBkaWdlc3QgYnV0IHNpbmNlIGZvb2QgaGFzIG5vdCBjaGFuZ2VkIGNvdW50IHdpbGwgc3RpbGwgYmUgemVyb1xyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XHJcblxyXG4gICAgICAgICAgIC8vIFVwZGF0ZSBmb29kIGFuZCBydW4gZGlnZXN0LiAgTm93IHRoZSBjb3VudGVyIHdpbGwgaW5jcmVtZW50XHJcbiAgICAgICAgICAgZm9vZCA9ICdjaGVlc2VidXJnZXInO1xyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMSk7XHJcblxyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHsoZnVuY3Rpb24oKXxzdHJpbmcpfSB3YXRjaEV4cHJlc3Npb24gRXhwcmVzc2lvbiB0aGF0IGlzIGV2YWx1YXRlZCBvbiBlYWNoXHJcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEEgY2hhbmdlIGluIHRoZSByZXR1cm4gdmFsdWUgdHJpZ2dlcnNcclxuICAgICAgICogICAgYSBjYWxsIHRvIHRoZSBgbGlzdGVuZXJgLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBFdmFsdWF0ZWQgYXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn1cclxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogY2FsbGVkIHdpdGggY3VycmVudCBgc2NvcGVgIGFzIGEgcGFyYW1ldGVyLlxyXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsLCBzY29wZSl9IGxpc3RlbmVyIENhbGxiYWNrIGNhbGxlZCB3aGVuZXZlciB0aGUgdmFsdWVcclxuICAgICAgICogICAgb2YgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cclxuICAgICAgICpcclxuICAgICAgICogICAgLSBgbmV3VmFsYCBjb250YWlucyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbmBcclxuICAgICAgICogICAgLSBgb2xkVmFsYCBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gXHJcbiAgICAgICAqICAgIC0gYHNjb3BlYCByZWZlcnMgdG8gdGhlIGN1cnJlbnQgc2NvcGVcclxuICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gb2JqZWN0RXF1YWxpdHkgQ29tcGFyZSBmb3Igb2JqZWN0IGVxdWFsaXR5IHVzaW5nIHtAbGluayBhbmd1bGFyLmVxdWFsc30gaW5zdGVhZCBvZlxyXG4gICAgICAgKiAgICAgY29tcGFyaW5nIGZvciByZWZlcmVuY2UgZXF1YWxpdHkuXHJcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXHJcbiAgICAgICAqL1xyXG4gICAgICAkd2F0Y2g6IGZ1bmN0aW9uKHdhdGNoRXhwLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHkpIHtcclxuICAgICAgICB2YXIgZ2V0ID0gJHBhcnNlKHdhdGNoRXhwKTtcclxuXHJcbiAgICAgICAgaWYgKGdldC4kJHdhdGNoRGVsZWdhdGUpIHtcclxuICAgICAgICAgIHJldHVybiBnZXQuJCR3YXRjaERlbGVnYXRlKHRoaXMsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcyxcclxuICAgICAgICAgICAgYXJyYXkgPSBzY29wZS4kJHdhdGNoZXJzLFxyXG4gICAgICAgICAgICB3YXRjaGVyID0ge1xyXG4gICAgICAgICAgICAgIGZuOiBsaXN0ZW5lcixcclxuICAgICAgICAgICAgICBsYXN0OiBpbml0V2F0Y2hWYWwsXHJcbiAgICAgICAgICAgICAgZ2V0OiBnZXQsXHJcbiAgICAgICAgICAgICAgZXhwOiB3YXRjaEV4cCxcclxuICAgICAgICAgICAgICBlcTogISFvYmplY3RFcXVhbGl0eVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBsYXN0RGlydHlXYXRjaCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpIHtcclxuICAgICAgICAgIHdhdGNoZXIuZm4gPSBub29wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFhcnJheSkge1xyXG4gICAgICAgICAgYXJyYXkgPSBzY29wZS4kJHdhdGNoZXJzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHdlIHVzZSB1bnNoaWZ0IHNpbmNlIHdlIHVzZSBhIHdoaWxlIGxvb3AgaW4gJGRpZ2VzdCBmb3Igc3BlZWQuXHJcbiAgICAgICAgLy8gdGhlIHdoaWxlIGxvb3AgcmVhZHMgaW4gcmV2ZXJzZSBvcmRlci5cclxuICAgICAgICBhcnJheS51bnNoaWZ0KHdhdGNoZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoKCkge1xyXG4gICAgICAgICAgYXJyYXlSZW1vdmUoYXJyYXksIHdhdGNoZXIpO1xyXG4gICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaEdyb3VwXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBBIHZhcmlhbnQgb2Yge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoICR3YXRjaCgpfSB3aGVyZSBpdCB3YXRjaGVzIGFuIGFycmF5IG9mIGB3YXRjaEV4cHJlc3Npb25zYC5cclxuICAgICAgICogSWYgYW55IG9uZSBleHByZXNzaW9uIGluIHRoZSBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGBsaXN0ZW5lcmAgaXMgZXhlY3V0ZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIC0gVGhlIGl0ZW1zIGluIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AgYXJyYXkgYXJlIG9ic2VydmVkIHZpYSBzdGFuZGFyZCAkd2F0Y2ggb3BlcmF0aW9uIGFuZCBhcmUgZXhhbWluZWQgb24gZXZlcnlcclxuICAgICAgICogICBjYWxsIHRvICRkaWdlc3QoKSB0byBzZWUgaWYgYW55IGl0ZW1zIGNoYW5nZXMuXHJcbiAgICAgICAqIC0gVGhlIGBsaXN0ZW5lcmAgaXMgY2FsbGVkIHdoZW5ldmVyIGFueSBleHByZXNzaW9uIGluIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AgYXJyYXkgY2hhbmdlcy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtBcnJheS48c3RyaW5nfEZ1bmN0aW9uKHNjb3BlKT59IHdhdGNoRXhwcmVzc2lvbnMgQXJyYXkgb2YgZXhwcmVzc2lvbnMgdGhhdCB3aWxsIGJlIGluZGl2aWR1YWxseVxyXG4gICAgICAgKiB3YXRjaGVkIHVzaW5nIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX1cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdWYWx1ZXMsIG9sZFZhbHVlcywgc2NvcGUpfSBsaXN0ZW5lciBDYWxsYmFjayBjYWxsZWQgd2hlbmV2ZXIgdGhlIHJldHVybiB2YWx1ZSBvZiBhbnlcclxuICAgICAgICogICAgZXhwcmVzc2lvbiBpbiBgd2F0Y2hFeHByZXNzaW9uc2AgY2hhbmdlc1xyXG4gICAgICAgKiAgICBUaGUgYG5ld1ZhbHVlc2AgYXJyYXkgY29udGFpbnMgdGhlIGN1cnJlbnQgdmFsdWVzIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AsIHdpdGggdGhlIGluZGV4ZXMgbWF0Y2hpbmdcclxuICAgICAgICogICAgdGhvc2Ugb2YgYHdhdGNoRXhwcmVzc2lvbmBcclxuICAgICAgICogICAgYW5kIHRoZSBgb2xkVmFsdWVzYCBhcnJheSBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AsIHdpdGggdGhlIGluZGV4ZXMgbWF0Y2hpbmdcclxuICAgICAgICogICAgdGhvc2Ugb2YgYHdhdGNoRXhwcmVzc2lvbmBcclxuICAgICAgICogICAgVGhlIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlLlxyXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgYWxsIGxpc3RlbmVycy5cclxuICAgICAgICovXHJcbiAgICAgICR3YXRjaEdyb3VwOiBmdW5jdGlvbih3YXRjaEV4cHJlc3Npb25zLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBvbGRWYWx1ZXMgPSBuZXcgQXJyYXkod2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpO1xyXG4gICAgICAgIHZhciBuZXdWYWx1ZXMgPSBuZXcgQXJyYXkod2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpO1xyXG4gICAgICAgIHZhciBkZXJlZ2lzdGVyRm5zID0gW107XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBmaXJzdFJ1biA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmICghd2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgIC8vIE5vIGV4cHJlc3Npb25zIG1lYW5zIHdlIGNhbGwgdGhlIGxpc3RlbmVyIEFTQVBcclxuICAgICAgICAgIHZhciBzaG91bGRDYWxsID0gdHJ1ZTtcclxuICAgICAgICAgIHNlbGYuJGV2YWxBc3luYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChzaG91bGRDYWxsKSBsaXN0ZW5lcihuZXdWYWx1ZXMsIG5ld1ZhbHVlcywgc2VsZik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyV2F0Y2hHcm91cCgpIHtcclxuICAgICAgICAgICAgc2hvdWxkQ2FsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIHNpemUgb2Ygb25lXHJcbiAgICAgICAgICByZXR1cm4gdGhpcy4kd2F0Y2god2F0Y2hFeHByZXNzaW9uc1swXSwgZnVuY3Rpb24gd2F0Y2hHcm91cEFjdGlvbih2YWx1ZSwgb2xkVmFsdWUsIHNjb3BlKSB7XHJcbiAgICAgICAgICAgIG5ld1ZhbHVlc1swXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBvbGRWYWx1ZXNbMF0gPSBvbGRWYWx1ZTtcclxuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWVzLCAodmFsdWUgPT09IG9sZFZhbHVlKSA/IG5ld1ZhbHVlcyA6IG9sZFZhbHVlcywgc2NvcGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3JFYWNoKHdhdGNoRXhwcmVzc2lvbnMsIGZ1bmN0aW9uIChleHByLCBpKSB7XHJcbiAgICAgICAgICB2YXIgdW53YXRjaEZuID0gc2VsZi4kd2F0Y2goZXhwciwgZnVuY3Rpb24gd2F0Y2hHcm91cFN1YkFjdGlvbih2YWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgbmV3VmFsdWVzW2ldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIG9sZFZhbHVlc1tpXSA9IG9sZFZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIWNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkKSB7XHJcbiAgICAgICAgICAgICAgY2hhbmdlUmVhY3Rpb25TY2hlZHVsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIHNlbGYuJGV2YWxBc3luYyh3YXRjaEdyb3VwQWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBkZXJlZ2lzdGVyRm5zLnB1c2godW53YXRjaEZuKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd2F0Y2hHcm91cEFjdGlvbigpIHtcclxuICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgaWYgKGZpcnN0UnVuKSB7XHJcbiAgICAgICAgICAgIGZpcnN0UnVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgbmV3VmFsdWVzLCBzZWxmKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgb2xkVmFsdWVzLCBzZWxmKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyV2F0Y2hHcm91cCgpIHtcclxuICAgICAgICAgIHdoaWxlIChkZXJlZ2lzdGVyRm5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBkZXJlZ2lzdGVyRm5zLnNoaWZ0KCkoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHdhdGNoQ29sbGVjdGlvblxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogU2hhbGxvdyB3YXRjaGVzIHRoZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCBhbmQgZmlyZXMgd2hlbmV2ZXIgYW55IG9mIHRoZSBwcm9wZXJ0aWVzIGNoYW5nZVxyXG4gICAgICAgKiAoZm9yIGFycmF5cywgdGhpcyBpbXBsaWVzIHdhdGNoaW5nIHRoZSBhcnJheSBpdGVtczsgZm9yIG9iamVjdCBtYXBzLCB0aGlzIGltcGxpZXMgd2F0Y2hpbmdcclxuICAgICAgICogdGhlIHByb3BlcnRpZXMpLiBJZiBhIGNoYW5nZSBpcyBkZXRlY3RlZCwgdGhlIGBsaXN0ZW5lcmAgY2FsbGJhY2sgaXMgZmlyZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIC0gVGhlIGBvYmpgIGNvbGxlY3Rpb24gaXMgb2JzZXJ2ZWQgdmlhIHN0YW5kYXJkICR3YXRjaCBvcGVyYXRpb24gYW5kIGlzIGV4YW1pbmVkIG9uIGV2ZXJ5XHJcbiAgICAgICAqICAgY2FsbCB0byAkZGlnZXN0KCkgdG8gc2VlIGlmIGFueSBpdGVtcyBoYXZlIGJlZW4gYWRkZWQsIHJlbW92ZWQsIG9yIG1vdmVkLlxyXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnl0aGluZyB3aXRoaW4gdGhlIGBvYmpgIGhhcyBjaGFuZ2VkLiBFeGFtcGxlcyBpbmNsdWRlXHJcbiAgICAgICAqICAgYWRkaW5nLCByZW1vdmluZywgYW5kIG1vdmluZyBpdGVtcyBiZWxvbmdpbmcgdG8gYW4gb2JqZWN0IG9yIGFycmF5LlxyXG4gICAgICAgKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAjIEV4YW1wbGVcclxuICAgICAgICogYGBganNcclxuICAgICAgICAgICRzY29wZS5uYW1lcyA9IFsnaWdvcicsICdtYXRpYXMnLCAnbWlza28nLCAnamFtZXMnXTtcclxuICAgICAgICAgICRzY29wZS5kYXRhQ291bnQgPSA0O1xyXG5cclxuICAgICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCduYW1lcycsIGZ1bmN0aW9uKG5ld05hbWVzLCBvbGROYW1lcykge1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0YUNvdW50ID0gbmV3TmFtZXMubGVuZ3RoO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KCRzY29wZS5kYXRhQ291bnQpLnRvRXF1YWwoNCk7XHJcbiAgICAgICAgICAkc2NvcGUuJGRpZ2VzdCgpO1xyXG5cclxuICAgICAgICAgIC8vc3RpbGwgYXQgNCAuLi4gbm8gY2hhbmdlc1xyXG4gICAgICAgICAgZXhwZWN0KCRzY29wZS5kYXRhQ291bnQpLnRvRXF1YWwoNCk7XHJcblxyXG4gICAgICAgICAgJHNjb3BlLm5hbWVzLnBvcCgpO1xyXG4gICAgICAgICAgJHNjb3BlLiRkaWdlc3QoKTtcclxuXHJcbiAgICAgICAgICAvL25vdyB0aGVyZSdzIGJlZW4gYSBjaGFuZ2VcclxuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDMpO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb24oc2NvcGUpfSBvYmogRXZhbHVhdGVkIGFzIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LiBUaGVcclxuICAgICAgICogICAgZXhwcmVzc2lvbiB2YWx1ZSBzaG91bGQgZXZhbHVhdGUgdG8gYW4gb2JqZWN0IG9yIGFuIGFycmF5IHdoaWNoIGlzIG9ic2VydmVkIG9uIGVhY2hcclxuICAgICAgICogICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0fSBjeWNsZS4gQW55IHNoYWxsb3cgY2hhbmdlIHdpdGhpbiB0aGVcclxuICAgICAgICogICAgY29sbGVjdGlvbiB3aWxsIHRyaWdnZXIgYSBjYWxsIHRvIHRoZSBgbGlzdGVuZXJgLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ld0NvbGxlY3Rpb24sIG9sZENvbGxlY3Rpb24sIHNjb3BlKX0gbGlzdGVuZXIgYSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICogICAgd2hlbiBhIGNoYW5nZSBpcyBkZXRlY3RlZC5cclxuICAgICAgICogICAgLSBUaGUgYG5ld0NvbGxlY3Rpb25gIG9iamVjdCBpcyB0aGUgbmV3bHkgbW9kaWZpZWQgZGF0YSBvYnRhaW5lZCBmcm9tIHRoZSBgb2JqYCBleHByZXNzaW9uXHJcbiAgICAgICAqICAgIC0gVGhlIGBvbGRDb2xsZWN0aW9uYCBvYmplY3QgaXMgYSBjb3B5IG9mIHRoZSBmb3JtZXIgY29sbGVjdGlvbiBkYXRhLlxyXG4gICAgICAgKiAgICAgIER1ZSB0byBwZXJmb3JtYW5jZSBjb25zaWRlcmF0aW9ucywgdGhlYG9sZENvbGxlY3Rpb25gIHZhbHVlIGlzIGNvbXB1dGVkIG9ubHkgaWYgdGhlXHJcbiAgICAgICAqICAgICAgYGxpc3RlbmVyYCBmdW5jdGlvbiBkZWNsYXJlcyB0d28gb3IgbW9yZSBhcmd1bWVudHMuXHJcbiAgICAgICAqICAgIC0gVGhlIGBzY29wZWAgYXJndW1lbnQgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBsaXN0ZW5lci4gV2hlbiB0aGVcclxuICAgICAgICogICAgZGUtcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkLCB0aGUgaW50ZXJuYWwgd2F0Y2ggb3BlcmF0aW9uIGlzIHRlcm1pbmF0ZWQuXHJcbiAgICAgICAqL1xyXG4gICAgICAkd2F0Y2hDb2xsZWN0aW9uOiBmdW5jdGlvbihvYmosIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgJHdhdGNoQ29sbGVjdGlvbkludGVyY2VwdG9yLiRzdGF0ZWZ1bCA9IHRydWU7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAvLyB0aGUgY3VycmVudCB2YWx1ZSwgdXBkYXRlZCBvbiBlYWNoIGRpcnR5LWNoZWNrIHJ1blxyXG4gICAgICAgIHZhciBuZXdWYWx1ZTtcclxuICAgICAgICAvLyBhIHNoYWxsb3cgY29weSBvZiB0aGUgbmV3VmFsdWUgZnJvbSB0aGUgbGFzdCBkaXJ0eS1jaGVjayBydW4sXHJcbiAgICAgICAgLy8gdXBkYXRlZCB0byBtYXRjaCBuZXdWYWx1ZSBkdXJpbmcgZGlydHktY2hlY2sgcnVuXHJcbiAgICAgICAgdmFyIG9sZFZhbHVlO1xyXG4gICAgICAgIC8vIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBuZXdWYWx1ZSBmcm9tIHdoZW4gdGhlIGxhc3QgY2hhbmdlIGhhcHBlbmVkXHJcbiAgICAgICAgdmFyIHZlcnlPbGRWYWx1ZTtcclxuICAgICAgICAvLyBvbmx5IHRyYWNrIHZlcnlPbGRWYWx1ZSBpZiB0aGUgbGlzdGVuZXIgaXMgYXNraW5nIGZvciBpdFxyXG4gICAgICAgIHZhciB0cmFja1ZlcnlPbGRWYWx1ZSA9IChsaXN0ZW5lci5sZW5ndGggPiAxKTtcclxuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0ZWQgPSAwO1xyXG4gICAgICAgIHZhciBjaGFuZ2VEZXRlY3RvciA9ICRwYXJzZShvYmosICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvcik7XHJcbiAgICAgICAgdmFyIGludGVybmFsQXJyYXkgPSBbXTtcclxuICAgICAgICB2YXIgaW50ZXJuYWxPYmplY3QgPSB7fTtcclxuICAgICAgICB2YXIgaW5pdFJ1biA9IHRydWU7XHJcbiAgICAgICAgdmFyIG9sZExlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvcihfdmFsdWUpIHtcclxuICAgICAgICAgIG5ld1ZhbHVlID0gX3ZhbHVlO1xyXG4gICAgICAgICAgdmFyIG5ld0xlbmd0aCwga2V5LCBib3RoTmFOLCBuZXdJdGVtLCBvbGRJdGVtO1xyXG5cclxuICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7IC8vIGlmIHByaW1pdGl2ZVxyXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlMaWtlKG5ld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IGludGVybmFsQXJyYXkpIHtcclxuICAgICAgICAgICAgICAvLyB3ZSBhcmUgdHJhbnNpdGlvbmluZyBmcm9tIHNvbWV0aGluZyB3aGljaCB3YXMgbm90IGFuIGFycmF5IGludG8gYXJyYXkuXHJcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBpbnRlcm5hbEFycmF5O1xyXG4gICAgICAgICAgICAgIG9sZExlbmd0aCA9IG9sZFZhbHVlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3TGVuZ3RoID0gbmV3VmFsdWUubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9sZExlbmd0aCAhPT0gbmV3TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgLy8gaWYgbGVuZ3RocyBkbyBub3QgbWF0Y2ggd2UgbmVlZCB0byB0cmlnZ2VyIGNoYW5nZSBub3RpZmljYXRpb25cclxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICAgIG9sZFZhbHVlLmxlbmd0aCA9IG9sZExlbmd0aCA9IG5ld0xlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb3B5IHRoZSBpdGVtcyB0byBvbGRWYWx1ZSBhbmQgbG9vayBmb3IgY2hhbmdlcy5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIG9sZEl0ZW0gPSBvbGRWYWx1ZVtpXTtcclxuICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3VmFsdWVbaV07XHJcblxyXG4gICAgICAgICAgICAgIGJvdGhOYU4gPSAob2xkSXRlbSAhPT0gb2xkSXRlbSkgJiYgKG5ld0l0ZW0gIT09IG5ld0l0ZW0pO1xyXG4gICAgICAgICAgICAgIGlmICghYm90aE5hTiAmJiAob2xkSXRlbSAhPT0gbmV3SXRlbSkpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XHJcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZVtpXSA9IG5ld0l0ZW07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IGludGVybmFsT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBvYmplY3QgaW50byBvYmplY3QuXHJcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBpbnRlcm5hbE9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgIG9sZExlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb3B5IHRoZSBpdGVtcyB0byBvbGRWYWx1ZSBhbmQgbG9vayBmb3IgY2hhbmdlcy5cclxuICAgICAgICAgICAgbmV3TGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZm9yIChrZXkgaW4gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICBpZiAobmV3VmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgbmV3TGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3VmFsdWVba2V5XTtcclxuICAgICAgICAgICAgICAgIG9sZEl0ZW0gPSBvbGRWYWx1ZVtrZXldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgYm90aE5hTiA9IChvbGRJdGVtICE9PSBvbGRJdGVtKSAmJiAobmV3SXRlbSAhPT0gbmV3SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghYm90aE5hTiAmJiAob2xkSXRlbSAhPT0gbmV3SXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlW2tleV0gPSBuZXdJdGVtO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBvbGRMZW5ndGgrKztcclxuICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XHJcbiAgICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvbGRMZW5ndGggPiBuZXdMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAvLyB3ZSB1c2VkIHRvIGhhdmUgbW9yZSBrZXlzLCBuZWVkIHRvIGZpbmQgdGhlbSBhbmQgZGVzdHJveSB0aGVtLlxyXG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XHJcbiAgICAgICAgICAgICAgZm9yKGtleSBpbiBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFuZXdWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgIG9sZExlbmd0aC0tO1xyXG4gICAgICAgICAgICAgICAgICBkZWxldGUgb2xkVmFsdWVba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBjaGFuZ2VEZXRlY3RlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uICR3YXRjaENvbGxlY3Rpb25BY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoaW5pdFJ1bikge1xyXG4gICAgICAgICAgICBpbml0UnVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlLCBuZXdWYWx1ZSwgc2VsZik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZSwgdmVyeU9sZFZhbHVlLCBzZWxmKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBtYWtlIGEgY29weSBmb3IgdGhlIG5leHQgdGltZSBhIGNvbGxlY3Rpb24gaXMgY2hhbmdlZFxyXG4gICAgICAgICAgaWYgKHRyYWNrVmVyeU9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgLy9wcmltaXRpdmVcclxuICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5TGlrZShuZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWUgPSBuZXcgQXJyYXkobmV3VmFsdWUubGVuZ3RoKTtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld1ZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWVbaV0gPSBuZXdWYWx1ZVtpXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIGlmIG9iamVjdFxyXG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IHt9O1xyXG4gICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwobmV3VmFsdWUsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlW2tleV0gPSBuZXdWYWx1ZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJHdhdGNoKGNoYW5nZURldGVjdG9yLCAkd2F0Y2hDb2xsZWN0aW9uQWN0aW9uKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdFxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogUHJvY2Vzc2VzIGFsbCBvZiB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNoZXJzfSBvZiB0aGUgY3VycmVudCBzY29wZSBhbmRcclxuICAgICAgICogaXRzIGNoaWxkcmVuLiBCZWNhdXNlIGEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNoZXJ9J3MgbGlzdGVuZXIgY2FuIGNoYW5nZVxyXG4gICAgICAgKiB0aGUgbW9kZWwsIHRoZSBgJGRpZ2VzdCgpYCBrZWVwcyBjYWxsaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcnN9XHJcbiAgICAgICAqIHVudGlsIG5vIG1vcmUgbGlzdGVuZXJzIGFyZSBmaXJpbmcuIFRoaXMgbWVhbnMgdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBnZXQgaW50byBhbiBpbmZpbml0ZVxyXG4gICAgICAgKiBsb29wLiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYCdNYXhpbXVtIGl0ZXJhdGlvbiBsaW1pdCBleGNlZWRlZC4nYCBpZiB0aGUgbnVtYmVyIG9mXHJcbiAgICAgICAqIGl0ZXJhdGlvbnMgZXhjZWVkcyAxMC5cclxuICAgICAgICpcclxuICAgICAgICogVXN1YWxseSwgeW91IGRvbid0IGNhbGwgYCRkaWdlc3QoKWAgZGlyZWN0bHkgaW5cclxuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NvbnRyb2xsZXIgY29udHJvbGxlcnN9IG9yIGluXHJcbiAgICAgICAqIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS5cclxuICAgICAgICogSW5zdGVhZCwgeW91IHNob3VsZCBjYWxsIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHkoKX0gKHR5cGljYWxseSBmcm9tIHdpdGhpblxyXG4gICAgICAgKiBhIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmV9KSwgd2hpY2ggd2lsbCBmb3JjZSBhIGAkZGlnZXN0KClgLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBJZiB5b3Ugd2FudCB0byBiZSBub3RpZmllZCB3aGVuZXZlciBgJGRpZ2VzdCgpYCBpcyBjYWxsZWQsXHJcbiAgICAgICAqIHlvdSBjYW4gcmVnaXN0ZXIgYSBgd2F0Y2hFeHByZXNzaW9uYCBmdW5jdGlvbiB3aXRoXHJcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX0gd2l0aCBubyBgbGlzdGVuZXJgLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBJbiB1bml0IHRlc3RzLCB5b3UgbWF5IG5lZWQgdG8gY2FsbCBgJGRpZ2VzdCgpYCB0byBzaW11bGF0ZSB0aGUgc2NvcGUgbGlmZSBjeWNsZS5cclxuICAgICAgICpcclxuICAgICAgICogIyBFeGFtcGxlXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICAgdmFyIHNjb3BlID0gLi4uO1xyXG4gICAgICAgICAgIHNjb3BlLm5hbWUgPSAnbWlza28nO1xyXG4gICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSAwO1xyXG5cclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgwKTtcclxuICAgICAgICAgICBzY29wZS4kd2F0Y2goJ25hbWUnLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgwKTtcclxuXHJcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgIC8vIHRoZSBsaXN0ZW5lciBpcyBhbHdheXMgY2FsbGVkIGR1cmluZyB0aGUgZmlyc3QgJGRpZ2VzdCBsb29wIGFmdGVyIGl0IHdhcyByZWdpc3RlcmVkXHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XHJcblxyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgxKTtcclxuXHJcbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcclxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMik7XHJcbiAgICAgICAqIGBgYFxyXG4gICAgICAgKlxyXG4gICAgICAgKi9cclxuICAgICAgJGRpZ2VzdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHdhdGNoLCB2YWx1ZSwgbGFzdCxcclxuICAgICAgICAgICAgd2F0Y2hlcnMsXHJcbiAgICAgICAgICAgIGFzeW5jUXVldWUgPSB0aGlzLiQkYXN5bmNRdWV1ZSxcclxuICAgICAgICAgICAgcG9zdERpZ2VzdFF1ZXVlID0gdGhpcy4kJHBvc3REaWdlc3RRdWV1ZSxcclxuICAgICAgICAgICAgbGVuZ3RoLFxyXG4gICAgICAgICAgICBkaXJ0eSwgdHRsID0gVFRMLFxyXG4gICAgICAgICAgICBuZXh0LCBjdXJyZW50LCB0YXJnZXQgPSB0aGlzLFxyXG4gICAgICAgICAgICB3YXRjaExvZyA9IFtdLFxyXG4gICAgICAgICAgICBsb2dJZHgsIGxvZ01zZywgYXN5bmNUYXNrO1xyXG5cclxuICAgICAgICBiZWdpblBoYXNlKCckZGlnZXN0Jyk7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNoYW5nZXMgdG8gYnJvd3NlciB1cmwgdGhhdCBoYXBwZW5lZCBpbiBzeW5jIGJlZm9yZSB0aGUgY2FsbCB0byAkZGlnZXN0XHJcbiAgICAgICAgJGJyb3dzZXIuJCRjaGVja1VybENoYW5nZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcyA9PT0gJHJvb3RTY29wZSAmJiBhcHBseUFzeW5jSWQgIT09IG51bGwpIHtcclxuICAgICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIHJvb3Qgc2NvcGUsIGFuZCAkYXBwbHlBc3luYyBoYXMgc2NoZWR1bGVkIGEgZGVmZXJyZWQgJGFwcGx5KCksIHRoZW5cclxuICAgICAgICAgIC8vIGNhbmNlbCB0aGUgc2NoZWR1bGVkICRhcHBseSBhbmQgZmx1c2ggdGhlIHF1ZXVlIG9mIGV4cHJlc3Npb25zIHRvIGJlIGV2YWx1YXRlZC5cclxuICAgICAgICAgICRicm93c2VyLmRlZmVyLmNhbmNlbChhcHBseUFzeW5jSWQpO1xyXG4gICAgICAgICAgZmx1c2hBcHBseUFzeW5jKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYXN0RGlydHlXYXRjaCA9IG51bGw7XHJcblxyXG4gICAgICAgIGRvIHsgLy8gXCJ3aGlsZSBkaXJ0eVwiIGxvb3BcclxuICAgICAgICAgIGRpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICBjdXJyZW50ID0gdGFyZ2V0O1xyXG5cclxuICAgICAgICAgIHdoaWxlKGFzeW5jUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgYXN5bmNUYXNrID0gYXN5bmNRdWV1ZS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgIGFzeW5jVGFzay5zY29wZS4kZXZhbChhc3luY1Rhc2suZXhwcmVzc2lvbik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXN0RGlydHlXYXRjaCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdHJhdmVyc2VTY29wZXNMb29wOlxyXG4gICAgICAgICAgZG8geyAvLyBcInRyYXZlcnNlIHRoZSBzY29wZXNcIiBsb29wXHJcbiAgICAgICAgICAgIGlmICgod2F0Y2hlcnMgPSBjdXJyZW50LiQkd2F0Y2hlcnMpKSB7XHJcbiAgICAgICAgICAgICAgLy8gcHJvY2VzcyBvdXIgd2F0Y2hlc1xyXG4gICAgICAgICAgICAgIGxlbmd0aCA9IHdhdGNoZXJzLmxlbmd0aDtcclxuICAgICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIHdhdGNoID0gd2F0Y2hlcnNbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgLy8gTW9zdCBjb21tb24gd2F0Y2hlcyBhcmUgb24gcHJpbWl0aXZlcywgaW4gd2hpY2ggY2FzZSB3ZSBjYW4gc2hvcnRcclxuICAgICAgICAgICAgICAgICAgLy8gY2lyY3VpdCBpdCB3aXRoID09PSBvcGVyYXRvciwgb25seSB3aGVuID09PSBmYWlscyBkbyB3ZSB1c2UgLmVxdWFsc1xyXG4gICAgICAgICAgICAgICAgICBpZiAod2F0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlID0gd2F0Y2guZ2V0KGN1cnJlbnQpKSAhPT0gKGxhc3QgPSB3YXRjaC5sYXN0KSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoLmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGVxdWFscyh2YWx1ZSwgbGFzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGxhc3QgPT09ICdudW1iZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBpc05hTih2YWx1ZSkgJiYgaXNOYU4obGFzdCkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSB3YXRjaDtcclxuICAgICAgICAgICAgICAgICAgICAgIHdhdGNoLmxhc3QgPSB3YXRjaC5lcSA/IGNvcHkodmFsdWUsIG51bGwpIDogdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3YXRjaC5mbih2YWx1ZSwgKChsYXN0ID09PSBpbml0V2F0Y2hWYWwpID8gdmFsdWUgOiBsYXN0KSwgY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodHRsIDwgNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dJZHggPSA0IC0gdHRsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdhdGNoTG9nW2xvZ0lkeF0pIHdhdGNoTG9nW2xvZ0lkeF0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nTXNnID0gKGlzRnVuY3Rpb24od2F0Y2guZXhwKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2ZuOiAnICsgKHdhdGNoLmV4cC5uYW1lIHx8IHdhdGNoLmV4cC50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB3YXRjaC5leHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ01zZyArPSAnOyBuZXdWYWw6ICcgKyB0b0pzb24odmFsdWUpICsgJzsgb2xkVmFsOiAnICsgdG9Kc29uKGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXRjaExvZ1tsb2dJZHhdLnB1c2gobG9nTXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdhdGNoID09PSBsYXN0RGlydHlXYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1vc3QgcmVjZW50bHkgZGlydHkgd2F0Y2hlciBpcyBub3cgY2xlYW4sIHNob3J0IGNpcmN1aXQgc2luY2UgdGhlIHJlbWFpbmluZyB3YXRjaGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSBhbHJlYWR5IGJlZW4gdGVzdGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHRyYXZlcnNlU2NvcGVzTG9vcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJbnNhbml0eSBXYXJuaW5nOiBzY29wZSBkZXB0aC1maXJzdCB0cmF2ZXJzYWxcclxuICAgICAgICAgICAgLy8geWVzLCB0aGlzIGNvZGUgaXMgYSBiaXQgY3JhenksIGJ1dCBpdCB3b3JrcyBhbmQgd2UgaGF2ZSB0ZXN0cyB0byBwcm92ZSBpdCFcclxuICAgICAgICAgICAgLy8gdGhpcyBwaWVjZSBzaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIHRyYXZlcnNhbCBpbiAkYnJvYWRjYXN0XHJcbiAgICAgICAgICAgIGlmICghKG5leHQgPSAoY3VycmVudC4kJGNoaWxkSGVhZCB8fFxyXG4gICAgICAgICAgICAgICAgKGN1cnJlbnQgIT09IHRhcmdldCAmJiBjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSkpIHtcclxuICAgICAgICAgICAgICB3aGlsZShjdXJyZW50ICE9PSB0YXJnZXQgJiYgIShuZXh0ID0gY3VycmVudC4kJG5leHRTaWJsaW5nKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gd2hpbGUgKChjdXJyZW50ID0gbmV4dCkpO1xyXG5cclxuICAgICAgICAgIC8vIGBicmVhayB0cmF2ZXJzZVNjb3Blc0xvb3A7YCB0YWtlcyB1cyB0byBoZXJlXHJcblxyXG4gICAgICAgICAgaWYoKGRpcnR5IHx8IGFzeW5jUXVldWUubGVuZ3RoKSAmJiAhKHR0bC0tKSkge1xyXG4gICAgICAgICAgICBjbGVhclBoYXNlKCk7XHJcbiAgICAgICAgICAgIHRocm93ICRyb290U2NvcGVNaW5FcnIoJ2luZmRpZycsXHJcbiAgICAgICAgICAgICAgICAnezB9ICRkaWdlc3QoKSBpdGVyYXRpb25zIHJlYWNoZWQuIEFib3J0aW5nIVxcbicgK1xyXG4gICAgICAgICAgICAgICAgJ1dhdGNoZXJzIGZpcmVkIGluIHRoZSBsYXN0IDUgaXRlcmF0aW9uczogezF9JyxcclxuICAgICAgICAgICAgICAgIFRUTCwgdG9Kc29uKHdhdGNoTG9nKSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gd2hpbGUgKGRpcnR5IHx8IGFzeW5jUXVldWUubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgY2xlYXJQaGFzZSgpO1xyXG5cclxuICAgICAgICB3aGlsZShwb3N0RGlnZXN0UXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBwb3N0RGlnZXN0UXVldWUuc2hpZnQoKSgpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBldmVudFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRkZXN0cm95XHJcbiAgICAgICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHNjb3BlIGJlaW5nIGRlc3Ryb3llZFxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogQnJvYWRjYXN0ZWQgd2hlbiBhIHNjb3BlIGFuZCBpdHMgY2hpbGRyZW4gYXJlIGJlaW5nIGRlc3Ryb3llZC5cclxuICAgICAgICpcclxuICAgICAgICogTm90ZSB0aGF0LCBpbiBBbmd1bGFySlMsIHRoZXJlIGlzIGFsc28gYSBgJGRlc3Ryb3lgIGpRdWVyeSBldmVudCwgd2hpY2ggY2FuIGJlIHVzZWQgdG9cclxuICAgICAgICogY2xlYW4gdXAgRE9NIGJpbmRpbmdzIGJlZm9yZSBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxyXG4gICAgICAgKi9cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3lcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFJlbW92ZXMgdGhlIGN1cnJlbnQgc2NvcGUgKGFuZCBhbGwgb2YgaXRzIGNoaWxkcmVuKSBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuIFJlbW92YWwgaW1wbGllc1xyXG4gICAgICAgKiB0aGF0IGNhbGxzIHRvIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSB3aWxsIG5vIGxvbmdlclxyXG4gICAgICAgKiBwcm9wYWdhdGUgdG8gdGhlIGN1cnJlbnQgc2NvcGUgYW5kIGl0cyBjaGlsZHJlbi4gUmVtb3ZhbCBhbHNvIGltcGxpZXMgdGhhdCB0aGUgY3VycmVudFxyXG4gICAgICAgKiBzY29wZSBpcyBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgYCRkZXN0cm95KClgIGlzIHVzdWFsbHkgdXNlZCBieSBkaXJlY3RpdmVzIHN1Y2ggYXNcclxuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0gZm9yIG1hbmFnaW5nIHRoZVxyXG4gICAgICAgKiB1bnJvbGxpbmcgb2YgdGhlIGxvb3AuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEp1c3QgYmVmb3JlIGEgc2NvcGUgaXMgZGVzdHJveWVkLCBhIGAkZGVzdHJveWAgZXZlbnQgaXMgYnJvYWRjYXN0ZWQgb24gdGhpcyBzY29wZS5cclxuICAgICAgICogQXBwbGljYXRpb24gY29kZSBjYW4gcmVnaXN0ZXIgYSBgJGRlc3Ryb3lgIGV2ZW50IGhhbmRsZXIgdGhhdCB3aWxsIGdpdmUgaXQgYSBjaGFuY2UgdG9cclxuICAgICAgICogcGVyZm9ybSBhbnkgbmVjZXNzYXJ5IGNsZWFudXAuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIE5vdGUgdGhhdCwgaW4gQW5ndWxhckpTLCB0aGVyZSBpcyBhbHNvIGEgYCRkZXN0cm95YCBqUXVlcnkgZXZlbnQsIHdoaWNoIGNhbiBiZSB1c2VkIHRvXHJcbiAgICAgICAqIGNsZWFuIHVwIERPTSBiaW5kaW5ncyBiZWZvcmUgYW4gZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cclxuICAgICAgICovXHJcbiAgICAgICRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyB3ZSBjYW4ndCBkZXN0cm95IHRoZSByb290IHNjb3BlIG9yIGEgc2NvcGUgdGhhdCBoYXMgYmVlbiBhbHJlYWR5IGRlc3Ryb3llZFxyXG4gICAgICAgIGlmICh0aGlzLiQkZGVzdHJveWVkKSByZXR1cm47XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcclxuXHJcbiAgICAgICAgdGhpcy4kYnJvYWRjYXN0KCckZGVzdHJveScpO1xyXG4gICAgICAgIHRoaXMuJCRkZXN0cm95ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzID09PSAkcm9vdFNjb3BlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiB0aGlzLiQkbGlzdGVuZXJDb3VudCkge1xyXG4gICAgICAgICAgZGVjcmVtZW50TGlzdGVuZXJDb3VudCh0aGlzLCB0aGlzLiQkbGlzdGVuZXJDb3VudFtldmVudE5hbWVdLCBldmVudE5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2V2ZXIgYWxsIHRoZSByZWZlcmVuY2VzIHRvIHBhcmVudCBzY29wZXMgKGFmdGVyIHRoaXMgY2xlYW51cCwgdGhlIGN1cnJlbnQgc2NvcGUgc2hvdWxkXHJcbiAgICAgICAgLy8gbm90IGJlIHJldGFpbmVkIGJ5IGFueSBvZiBvdXIgcmVmZXJlbmNlcyBhbmQgc2hvdWxkIGJlIGVsaWdpYmxlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24pXHJcbiAgICAgICAgaWYgKHBhcmVudC4kJGNoaWxkSGVhZCA9PSB0aGlzKSBwYXJlbnQuJCRjaGlsZEhlYWQgPSB0aGlzLiQkbmV4dFNpYmxpbmc7XHJcbiAgICAgICAgaWYgKHBhcmVudC4kJGNoaWxkVGFpbCA9PSB0aGlzKSBwYXJlbnQuJCRjaGlsZFRhaWwgPSB0aGlzLiQkcHJldlNpYmxpbmc7XHJcbiAgICAgICAgaWYgKHRoaXMuJCRwcmV2U2libGluZykgdGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmcgPSB0aGlzLiQkbmV4dFNpYmxpbmc7XHJcbiAgICAgICAgaWYgKHRoaXMuJCRuZXh0U2libGluZykgdGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmcgPSB0aGlzLiQkcHJldlNpYmxpbmc7XHJcblxyXG5cclxuICAgICAgICAvLyBBbGwgb2YgdGhlIGNvZGUgYmVsb3cgaXMgYm9ndXMgY29kZSB0aGF0IHdvcmtzIGFyb3VuZCBWOCdzIG1lbW9yeSBsZWFrIHZpYSBvcHRpbWl6ZWQgY29kZVxyXG4gICAgICAgIC8vIGFuZCBpbmxpbmUgY2FjaGVzLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gc2VlOlxyXG4gICAgICAgIC8vIC0gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIwNzMjYzI2XHJcbiAgICAgICAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy82Nzk0I2lzc3VlY29tbWVudC0zODY0ODkwOVxyXG4gICAgICAgIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTMxMyNpc3N1ZWNvbW1lbnQtMTAzNzg0NTFcclxuXHJcbiAgICAgICAgdGhpcy4kcGFyZW50ID0gdGhpcy4kJG5leHRTaWJsaW5nID0gdGhpcy4kJHByZXZTaWJsaW5nID0gdGhpcy4kJGNoaWxkSGVhZCA9XHJcbiAgICAgICAgICAgIHRoaXMuJCRjaGlsZFRhaWwgPSB0aGlzLiRyb290ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gZG9uJ3QgcmVzZXQgdGhlc2UgdG8gbnVsbCBpbiBjYXNlIHNvbWUgYXN5bmMgdGFzayB0cmllcyB0byByZWdpc3RlciBhIGxpc3RlbmVyL3dhdGNoL3Rhc2tcclxuICAgICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XHJcbiAgICAgICAgdGhpcy4kJHdhdGNoZXJzID0gdGhpcy4kJGFzeW5jUXVldWUgPSB0aGlzLiQkcG9zdERpZ2VzdFF1ZXVlID0gW107XHJcblxyXG4gICAgICAgIC8vIHByZXZlbnQgTlBFcyBzaW5jZSB0aGVzZSBtZXRob2RzIGhhdmUgcmVmZXJlbmNlcyB0byBwcm9wZXJ0aWVzIHdlIG51bGxlZCBvdXRcclxuICAgICAgICB0aGlzLiRkZXN0cm95ID0gdGhpcy4kZGlnZXN0ID0gdGhpcy4kYXBwbHkgPSBub29wO1xyXG4gICAgICAgIHRoaXMuJG9uID0gdGhpcy4kd2F0Y2ggPSB0aGlzLiR3YXRjaEdyb3VwID0gZnVuY3Rpb24oKSB7IHJldHVybiBub29wOyB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZXZhbFxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogRXhlY3V0ZXMgdGhlIGBleHByZXNzaW9uYCBvbiB0aGUgY3VycmVudCBzY29wZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LiBBbnkgZXhjZXB0aW9ucyBpblxyXG4gICAgICAgKiB0aGUgZXhwcmVzc2lvbiBhcmUgcHJvcGFnYXRlZCAodW5jYXVnaHQpLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGV2YWx1YXRpbmcgQW5ndWxhclxyXG4gICAgICAgKiBleHByZXNzaW9ucy5cclxuICAgICAgICpcclxuICAgICAgICogIyBFeGFtcGxlXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICAgdmFyIHNjb3BlID0gbmcuJHJvb3RTY29wZS5TY29wZSgpO1xyXG4gICAgICAgICAgIHNjb3BlLmEgPSAxO1xyXG4gICAgICAgICAgIHNjb3BlLmIgPSAyO1xyXG5cclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuJGV2YWwoJ2ErYicpKS50b0VxdWFsKDMpO1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS4kZXZhbChmdW5jdGlvbihzY29wZSl7IHJldHVybiBzY29wZS5hICsgc2NvcGUuYjsgfSkpLnRvRXF1YWwoMyk7XHJcbiAgICAgICAqIGBgYFxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHByZXNzaW9uIEFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICpcclxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiAge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0uXHJcbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGN1cnJlbnQgYHNjb3BlYCBwYXJhbWV0ZXIuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7KG9iamVjdCk9fSBsb2NhbHMgTG9jYWwgdmFyaWFibGVzIG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpbiBzY29wZS5cclxuICAgICAgICogQHJldHVybnMgeyp9IFRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyB0aGUgZXhwcmVzc2lvbi5cclxuICAgICAgICovXHJcbiAgICAgICRldmFsOiBmdW5jdGlvbihleHByLCBsb2NhbHMpIHtcclxuICAgICAgICByZXR1cm4gJHBhcnNlKGV4cHIpKHRoaXMsIGxvY2Fscyk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRldmFsQXN5bmNcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIEV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIG9uIHRoZSBjdXJyZW50IHNjb3BlIGF0IGEgbGF0ZXIgcG9pbnQgaW4gdGltZS5cclxuICAgICAgICpcclxuICAgICAgICogVGhlIGAkZXZhbEFzeW5jYCBtYWtlcyBubyBndWFyYW50ZWVzIGFzIHRvIHdoZW4gdGhlIGBleHByZXNzaW9uYCB3aWxsIGJlIGV4ZWN1dGVkLCBvbmx5XHJcbiAgICAgICAqIHRoYXQ6XHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgLSBpdCB3aWxsIGV4ZWN1dGUgYWZ0ZXIgdGhlIGZ1bmN0aW9uIHRoYXQgc2NoZWR1bGVkIHRoZSBldmFsdWF0aW9uIChwcmVmZXJhYmx5IGJlZm9yZSBET01cclxuICAgICAgICogICAgIHJlbmRlcmluZykuXHJcbiAgICAgICAqICAgLSBhdCBsZWFzdCBvbmUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0IGN5Y2xlfSB3aWxsIGJlIHBlcmZvcm1lZCBhZnRlclxyXG4gICAgICAgKiAgICAgYGV4cHJlc3Npb25gIGV4ZWN1dGlvbi5cclxuICAgICAgICpcclxuICAgICAgICogQW55IGV4Y2VwdGlvbnMgZnJvbSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBleHByZXNzaW9uIGFyZSBmb3J3YXJkZWQgdG8gdGhlXHJcbiAgICAgICAqIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciAkZXhjZXB0aW9uSGFuZGxlcn0gc2VydmljZS5cclxuICAgICAgICpcclxuICAgICAgICogX19Ob3RlOl9fIGlmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBgJGRpZ2VzdGAgY3ljbGUsIGEgbmV3IGAkZGlnZXN0YCBjeWNsZVxyXG4gICAgICAgKiB3aWxsIGJlIHNjaGVkdWxlZC4gSG93ZXZlciwgaXQgaXMgZW5jb3VyYWdlZCB0byBhbHdheXMgY2FsbCBjb2RlIHRoYXQgY2hhbmdlcyB0aGUgbW9kZWxcclxuICAgICAgICogZnJvbSB3aXRoaW4gYW4gYCRhcHBseWAgY2FsbC4gVGhhdCBpbmNsdWRlcyBjb2RlIGV2YWx1YXRlZCB2aWEgYCRldmFsQXN5bmNgLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHByZXNzaW9uIEFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICpcclxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cclxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cclxuICAgICAgICpcclxuICAgICAgICovXHJcbiAgICAgICRldmFsQXN5bmM6IGZ1bmN0aW9uKGV4cHIpIHtcclxuICAgICAgICAvLyBpZiB3ZSBhcmUgb3V0c2lkZSBvZiBhbiAkZGlnZXN0IGxvb3AgYW5kIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgd2UgYXJlIHNjaGVkdWxpbmcgYXN5bmNcclxuICAgICAgICAvLyB0YXNrIGFsc28gc2NoZWR1bGUgYXN5bmMgYXV0by1mbHVzaFxyXG4gICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlICYmICEkcm9vdFNjb3BlLiQkYXN5bmNRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoJHJvb3RTY29wZS4kJGFzeW5jUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4kJGFzeW5jUXVldWUucHVzaCh7c2NvcGU6IHRoaXMsIGV4cHJlc3Npb246IGV4cHJ9KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgICQkcG9zdERpZ2VzdCA6IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgdGhpcy4kJHBvc3REaWdlc3RRdWV1ZS5wdXNoKGZuKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGFwcGx5XHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBgJGFwcGx5KClgIGlzIHVzZWQgdG8gZXhlY3V0ZSBhbiBleHByZXNzaW9uIGluIGFuZ3VsYXIgZnJvbSBvdXRzaWRlIG9mIHRoZSBhbmd1bGFyXHJcbiAgICAgICAqIGZyYW1ld29yay4gKEZvciBleGFtcGxlIGZyb20gYnJvd3NlciBET00gZXZlbnRzLCBzZXRUaW1lb3V0LCBYSFIgb3IgdGhpcmQgcGFydHkgbGlicmFyaWVzKS5cclxuICAgICAgICogQmVjYXVzZSB3ZSBhcmUgY2FsbGluZyBpbnRvIHRoZSBhbmd1bGFyIGZyYW1ld29yayB3ZSBuZWVkIHRvIHBlcmZvcm0gcHJvcGVyIHNjb3BlIGxpZmVcclxuICAgICAgICogY3ljbGUgb2Yge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyIGV4Y2VwdGlvbiBoYW5kbGluZ30sXHJcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgZXhlY3V0aW5nIHdhdGNoZXN9LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAjIyBMaWZlIGN5Y2xlXHJcbiAgICAgICAqXHJcbiAgICAgICAqICMgUHNldWRvLUNvZGUgb2YgYCRhcHBseSgpYFxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAgIGZ1bmN0aW9uICRhcHBseShleHByKSB7XHJcbiAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJGV2YWwoZXhwcik7XHJcbiAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgJHJvb3QuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICogYGBgXHJcbiAgICAgICAqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFNjb3BlJ3MgYCRhcHBseSgpYCBtZXRob2QgdHJhbnNpdGlvbnMgdGhyb3VnaCB0aGUgZm9sbG93aW5nIHN0YWdlczpcclxuICAgICAgICpcclxuICAgICAgICogMS4gVGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIGV4ZWN1dGVkIHVzaW5nIHRoZVxyXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZXZhbCAkZXZhbCgpfSBtZXRob2QuXHJcbiAgICAgICAqIDIuIEFueSBleGNlcHRpb25zIGZyb20gdGhlIGV4ZWN1dGlvbiBvZiB0aGUgZXhwcmVzc2lvbiBhcmUgZm9yd2FyZGVkIHRvIHRoZVxyXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXHJcbiAgICAgICAqIDMuIFRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2h9IGxpc3RlbmVycyBhcmUgZmlyZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlXHJcbiAgICAgICAqICAgIGV4cHJlc3Npb24gd2FzIGV4ZWN1dGVkIHVzaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gbWV0aG9kLlxyXG4gICAgICAgKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHAgQW4gYW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxyXG4gICAgICAgKiAgICAtIGBmdW5jdGlvbihzY29wZSlgOiBleGVjdXRlIHRoZSBmdW5jdGlvbiB3aXRoIGN1cnJlbnQgYHNjb3BlYCBwYXJhbWV0ZXIuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb24uXHJcbiAgICAgICAqL1xyXG4gICAgICAkYXBwbHk6IGZ1bmN0aW9uKGV4cHIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYmVnaW5QaGFzZSgnJGFwcGx5Jyk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy4kZXZhbChleHByKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgY2xlYXJQaGFzZSgpO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGFwcGx5QXN5bmNcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFNjaGVkdWxlIHRoZSBpbnZva2F0aW9uIG9mICRhcHBseSB0byBvY2N1ciBhdCBhIGxhdGVyIHRpbWUuIFRoZSBhY3R1YWwgdGltZSBkaWZmZXJlbmNlXHJcbiAgICAgICAqIHZhcmllcyBhY3Jvc3MgYnJvd3NlcnMsIGJ1dCBpcyB0eXBpY2FsbHkgYXJvdW5kIH4xMCBtaWxsaXNlY29uZHMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gcXVldWUgdXAgbXVsdGlwbGUgZXhwcmVzc2lvbnMgd2hpY2ggbmVlZCB0byBiZSBldmFsdWF0ZWQgaW4gdGhlIHNhbWVcclxuICAgICAgICogZGlnZXN0LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHAgQW4gYW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxyXG4gICAgICAgKiAgICAtIGBmdW5jdGlvbihzY29wZSlgOiBleGVjdXRlIHRoZSBmdW5jdGlvbiB3aXRoIGN1cnJlbnQgYHNjb3BlYCBwYXJhbWV0ZXIuXHJcbiAgICAgICAqL1xyXG4gICAgICAkYXBwbHlBc3luYzogZnVuY3Rpb24oZXhwcikge1xyXG4gICAgICAgIHZhciBzY29wZSA9IHRoaXM7XHJcbiAgICAgICAgZXhwciAmJiAkcm9vdFNjb3BlLiQkYXBwbHlBc3luY1F1ZXVlLnB1c2goJGFwcGx5QXN5bmNFeHByZXNzaW9uKTtcclxuICAgICAgICBzY2hlZHVsZUFwcGx5QXN5bmMoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gJGFwcGx5QXN5bmNFeHByZXNzaW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJGV2YWwoZXhwcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkb25cclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIExpc3RlbnMgb24gZXZlbnRzIG9mIGEgZ2l2ZW4gdHlwZS4gU2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRlbWl0ICRlbWl0fSBmb3JcclxuICAgICAgICogZGlzY3Vzc2lvbiBvZiBldmVudCBsaWZlIGN5Y2xlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb24gZm9ybWF0IGlzOiBgZnVuY3Rpb24oZXZlbnQsIGFyZ3MuLi4pYC4gVGhlIGBldmVudGAgb2JqZWN0XHJcbiAgICAgICAqIHBhc3NlZCBpbnRvIHRoZSBsaXN0ZW5lciBoYXMgdGhlIGZvbGxvd2luZyBhdHRyaWJ1dGVzOlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAgIC0gYHRhcmdldFNjb3BlYCAtIGB7U2NvcGV9YDogdGhlIHNjb3BlIG9uIHdoaWNoIHRoZSBldmVudCB3YXMgYCRlbWl0YC1lZCBvclxyXG4gICAgICAgKiAgICAgYCRicm9hZGNhc3RgLWVkLlxyXG4gICAgICAgKiAgIC0gYGN1cnJlbnRTY29wZWAgLSBge1Njb3BlfWA6IHRoZSBzY29wZSB0aGF0IGlzIGN1cnJlbnRseSBoYW5kbGluZyB0aGUgZXZlbnQuIE9uY2UgdGhlXHJcbiAgICAgICAqICAgICBldmVudCBwcm9wYWdhdGVzIHRocm91Z2ggdGhlIHNjb3BlIGhpZXJhcmNoeSwgdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gbnVsbC5cclxuICAgICAgICogICAtIGBuYW1lYCAtIGB7c3RyaW5nfWA6IG5hbWUgb2YgdGhlIGV2ZW50LlxyXG4gICAgICAgKiAgIC0gYHN0b3BQcm9wYWdhdGlvbmAgLSBge2Z1bmN0aW9uPX1gOiBjYWxsaW5nIGBzdG9wUHJvcGFnYXRpb25gIGZ1bmN0aW9uIHdpbGwgY2FuY2VsXHJcbiAgICAgICAqICAgICBmdXJ0aGVyIGV2ZW50IHByb3BhZ2F0aW9uIChhdmFpbGFibGUgb25seSBmb3IgZXZlbnRzIHRoYXQgd2VyZSBgJGVtaXRgLWVkKS5cclxuICAgICAgICogICAtIGBwcmV2ZW50RGVmYXVsdGAgLSBge2Z1bmN0aW9ufWA6IGNhbGxpbmcgYHByZXZlbnREZWZhdWx0YCBzZXRzIGBkZWZhdWx0UHJldmVudGVkYCBmbGFnXHJcbiAgICAgICAqICAgICB0byB0cnVlLlxyXG4gICAgICAgKiAgIC0gYGRlZmF1bHRQcmV2ZW50ZWRgIC0gYHtib29sZWFufWA6IHRydWUgaWYgYHByZXZlbnREZWZhdWx0YCB3YXMgY2FsbGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFdmVudCBuYW1lIHRvIGxpc3RlbiBvbi5cclxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudCwgLi4uYXJncyl9IGxpc3RlbmVyIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC5cclxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBsaXN0ZW5lci5cclxuICAgICAgICovXHJcbiAgICAgICRvbjogZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgbmFtZWRMaXN0ZW5lcnMgPSB0aGlzLiQkbGlzdGVuZXJzW25hbWVdO1xyXG4gICAgICAgIGlmICghbmFtZWRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgIHRoaXMuJCRsaXN0ZW5lcnNbbmFtZV0gPSBuYW1lZExpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuYW1lZExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgIGlmICghY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0pIHtcclxuICAgICAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0rKztcclxuICAgICAgICB9IHdoaWxlICgoY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudCkpO1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbmFtZWRMaXN0ZW5lcnNbbmFtZWRMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcildID0gbnVsbDtcclxuICAgICAgICAgIGRlY3JlbWVudExpc3RlbmVyQ291bnQoc2VsZiwgMSwgbmFtZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRlbWl0XHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGBuYW1lYCB1cHdhcmRzIHRocm91Z2ggdGhlIHNjb3BlIGhpZXJhcmNoeSBub3RpZnlpbmcgdGhlXHJcbiAgICAgICAqIHJlZ2lzdGVyZWQge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBsaXN0ZW5lcnMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFRoZSBldmVudCBsaWZlIGN5Y2xlIHN0YXJ0cyBhdCB0aGUgc2NvcGUgb24gd2hpY2ggYCRlbWl0YCB3YXMgY2FsbGVkLiBBbGxcclxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gbGlzdGVuaW5nIGZvciBgbmFtZWAgZXZlbnQgb24gdGhpcyBzY29wZSBnZXRcclxuICAgICAgICogbm90aWZpZWQuIEFmdGVyd2FyZHMsIHRoZSBldmVudCB0cmF2ZXJzZXMgdXB3YXJkcyB0b3dhcmQgdGhlIHJvb3Qgc2NvcGUgYW5kIGNhbGxzIGFsbFxyXG4gICAgICAgKiByZWdpc3RlcmVkIGxpc3RlbmVycyBhbG9uZyB0aGUgd2F5LiBUaGUgZXZlbnQgd2lsbCBzdG9wIHByb3BhZ2F0aW5nIGlmIG9uZSBvZiB0aGUgbGlzdGVuZXJzXHJcbiAgICAgICAqIGNhbmNlbHMgaXQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEFueSBleGNlcHRpb24gZW1pdHRlZCBmcm9tIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb24gbGlzdGVuZXJzfSB3aWxsIGJlIHBhc3NlZFxyXG4gICAgICAgKiBvbnRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEV2ZW50IG5hbWUgdG8gZW1pdC5cclxuICAgICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIG9uZSBvciBtb3JlIGFyZ3VtZW50cyB3aGljaCB3aWxsIGJlIHBhc3NlZCBvbnRvIHRoZSBldmVudCBsaXN0ZW5lcnMuXHJcbiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gRXZlbnQgb2JqZWN0IChzZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSkuXHJcbiAgICAgICAqL1xyXG4gICAgICAkZW1pdDogZnVuY3Rpb24obmFtZSwgYXJncykge1xyXG4gICAgICAgIHZhciBlbXB0eSA9IFtdLFxyXG4gICAgICAgICAgICBuYW1lZExpc3RlbmVycyxcclxuICAgICAgICAgICAgc2NvcGUgPSB0aGlzLFxyXG4gICAgICAgICAgICBzdG9wUHJvcGFnYXRpb24gPSBmYWxzZSxcclxuICAgICAgICAgICAgZXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgICB0YXJnZXRTY29wZTogc2NvcGUsXHJcbiAgICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtzdG9wUHJvcGFnYXRpb24gPSB0cnVlO30sXHJcbiAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaXN0ZW5lckFyZ3MgPSBjb25jYXQoW2V2ZW50XSwgYXJndW1lbnRzLCAxKSxcclxuICAgICAgICAgICAgaSwgbGVuZ3RoO1xyXG5cclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICBuYW1lZExpc3RlbmVycyA9IHNjb3BlLiQkbGlzdGVuZXJzW25hbWVdIHx8IGVtcHR5O1xyXG4gICAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICBmb3IgKGk9MCwgbGVuZ3RoPW5hbWVkTGlzdGVuZXJzLmxlbmd0aDsgaTxsZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgbGlzdGVuZXJzIHdlcmUgZGVyZWdpc3RlcmVkLCBkZWZyYWdtZW50IHRoZSBhcnJheVxyXG4gICAgICAgICAgICBpZiAoIW5hbWVkTGlzdGVuZXJzW2ldKSB7XHJcbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICBsZW5ndGgtLTtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIC8vYWxsb3cgYWxsIGxpc3RlbmVycyBhdHRhY2hlZCB0byB0aGUgY3VycmVudCBzY29wZSB0byBydW5cclxuICAgICAgICAgICAgICBuYW1lZExpc3RlbmVyc1tpXS5hcHBseShudWxsLCBsaXN0ZW5lckFyZ3MpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vaWYgYW55IGxpc3RlbmVyIG9uIHRoZSBjdXJyZW50IHNjb3BlIHN0b3BzIHByb3BhZ2F0aW9uLCBwcmV2ZW50IGJ1YmJsaW5nXHJcbiAgICAgICAgICBpZiAoc3RvcFByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBldmVudDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vdHJhdmVyc2UgdXB3YXJkc1xyXG4gICAgICAgICAgc2NvcGUgPSBzY29wZS4kcGFyZW50O1xyXG4gICAgICAgIH0gd2hpbGUgKHNjb3BlKTtcclxuXHJcbiAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGJyb2FkY2FzdFxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBgbmFtZWAgZG93bndhcmRzIHRvIGFsbCBjaGlsZCBzY29wZXMgKGFuZCB0aGVpciBjaGlsZHJlbikgbm90aWZ5aW5nIHRoZVxyXG4gICAgICAgKiByZWdpc3RlcmVkIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0gbGlzdGVuZXJzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgZXZlbnQgbGlmZSBjeWNsZSBzdGFydHMgYXQgdGhlIHNjb3BlIG9uIHdoaWNoIGAkYnJvYWRjYXN0YCB3YXMgY2FsbGVkLiBBbGxcclxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gbGlzdGVuaW5nIGZvciBgbmFtZWAgZXZlbnQgb24gdGhpcyBzY29wZSBnZXRcclxuICAgICAgICogbm90aWZpZWQuIEFmdGVyd2FyZHMsIHRoZSBldmVudCBwcm9wYWdhdGVzIHRvIGFsbCBkaXJlY3QgYW5kIGluZGlyZWN0IHNjb3BlcyBvZiB0aGUgY3VycmVudFxyXG4gICAgICAgKiBzY29wZSBhbmQgY2FsbHMgYWxsIHJlZ2lzdGVyZWQgbGlzdGVuZXJzIGFsb25nIHRoZSB3YXkuIFRoZSBldmVudCBjYW5ub3QgYmUgY2FuY2VsZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEFueSBleGNlcHRpb24gZW1pdHRlZCBmcm9tIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb24gbGlzdGVuZXJzfSB3aWxsIGJlIHBhc3NlZFxyXG4gICAgICAgKiBvbnRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEV2ZW50IG5hbWUgdG8gYnJvYWRjYXN0LlxyXG4gICAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgT3B0aW9uYWwgb25lIG9yIG1vcmUgYXJndW1lbnRzIHdoaWNoIHdpbGwgYmUgcGFzc2VkIG9udG8gdGhlIGV2ZW50IGxpc3RlbmVycy5cclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fSBFdmVudCBvYmplY3QsIHNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259XHJcbiAgICAgICAqL1xyXG4gICAgICAkYnJvYWRjYXN0OiBmdW5jdGlvbihuYW1lLCBhcmdzKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMsXHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSB0YXJnZXQsXHJcbiAgICAgICAgICAgIG5leHQgPSB0YXJnZXQsXHJcbiAgICAgICAgICAgIGV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgdGFyZ2V0U2NvcGU6IHRhcmdldCxcclxuICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICghdGFyZ2V0LiQkbGlzdGVuZXJDb3VudFtuYW1lXSkgcmV0dXJuIGV2ZW50O1xyXG5cclxuICAgICAgICB2YXIgbGlzdGVuZXJBcmdzID0gY29uY2F0KFtldmVudF0sIGFyZ3VtZW50cywgMSksXHJcbiAgICAgICAgICAgIGxpc3RlbmVycywgaSwgbGVuZ3RoO1xyXG5cclxuICAgICAgICAvL2Rvd24gd2hpbGUgeW91IGNhbiwgdGhlbiB1cCBhbmQgbmV4dCBzaWJsaW5nIG9yIHVwIGFuZCBuZXh0IHNpYmxpbmcgdW50aWwgYmFjayBhdCByb290XHJcbiAgICAgICAgd2hpbGUgKChjdXJyZW50ID0gbmV4dCkpIHtcclxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICBsaXN0ZW5lcnMgPSBjdXJyZW50LiQkbGlzdGVuZXJzW25hbWVdIHx8IFtdO1xyXG4gICAgICAgICAgZm9yIChpPTAsIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGk8bGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gaWYgbGlzdGVuZXJzIHdlcmUgZGVyZWdpc3RlcmVkLCBkZWZyYWdtZW50IHRoZSBhcnJheVxyXG4gICAgICAgICAgICBpZiAoIWxpc3RlbmVyc1tpXSkge1xyXG4gICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICAgIGxlbmd0aC0tO1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShudWxsLCBsaXN0ZW5lckFyZ3MpO1xyXG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIEluc2FuaXR5IFdhcm5pbmc6IHNjb3BlIGRlcHRoLWZpcnN0IHRyYXZlcnNhbFxyXG4gICAgICAgICAgLy8geWVzLCB0aGlzIGNvZGUgaXMgYSBiaXQgY3JhenksIGJ1dCBpdCB3b3JrcyBhbmQgd2UgaGF2ZSB0ZXN0cyB0byBwcm92ZSBpdCFcclxuICAgICAgICAgIC8vIHRoaXMgcGllY2Ugc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSB0cmF2ZXJzYWwgaW4gJGRpZ2VzdFxyXG4gICAgICAgICAgLy8gKHRob3VnaCBpdCBkaWZmZXJzIGR1ZSB0byBoYXZpbmcgdGhlIGV4dHJhIGNoZWNrIGZvciAkJGxpc3RlbmVyQ291bnQpXHJcbiAgICAgICAgICBpZiAoIShuZXh0ID0gKChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSAmJiBjdXJyZW50LiQkY2hpbGRIZWFkKSB8fFxyXG4gICAgICAgICAgICAgIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgY3VycmVudC4kJG5leHRTaWJsaW5nKSkpKSB7XHJcbiAgICAgICAgICAgIHdoaWxlKGN1cnJlbnQgIT09IHRhcmdldCAmJiAhKG5leHQgPSBjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSB7XHJcbiAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gZXZlbnQ7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyICRyb290U2NvcGUgPSBuZXcgU2NvcGUoKTtcclxuXHJcbiAgICByZXR1cm4gJHJvb3RTY29wZTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYmVnaW5QaGFzZShwaGFzZSkge1xyXG4gICAgICBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XHJcbiAgICAgICAgdGhyb3cgJHJvb3RTY29wZU1pbkVycignaW5wcm9nJywgJ3swfSBhbHJlYWR5IGluIHByb2dyZXNzJywgJHJvb3RTY29wZS4kJHBoYXNlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJHJvb3RTY29wZS4kJHBoYXNlID0gcGhhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xlYXJQaGFzZSgpIHtcclxuICAgICAgJHJvb3RTY29wZS4kJHBoYXNlID0gbnVsbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZGVjcmVtZW50TGlzdGVuZXJDb3VudChjdXJyZW50LCBjb3VudCwgbmFtZSkge1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gLT0gY291bnQ7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSA9PT0gMCkge1xyXG4gICAgICAgICAgZGVsZXRlIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHVzZWQgYXMgYW4gaW5pdGlhbCB2YWx1ZSBmb3Igd2F0Y2hlcnMuXHJcbiAgICAgKiBiZWNhdXNlIGl0J3MgdW5pcXVlIHdlIGNhbiBlYXNpbHkgdGVsbCBpdCBhcGFydCBmcm9tIG90aGVyIHZhbHVlc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpbml0V2F0Y2hWYWwoKSB7fVxyXG5cclxuICAgIGZ1bmN0aW9uIGZsdXNoQXBwbHlBc3luYygpIHtcclxuICAgICAgdmFyIHF1ZXVlID0gJHJvb3RTY29wZS4kJGFwcGx5QXN5bmNRdWV1ZTtcclxuICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBxdWV1ZS5zaGlmdCgpKCk7XHJcbiAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgYXBwbHlBc3luY0lkID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY2hlZHVsZUFwcGx5QXN5bmMoKSB7XHJcbiAgICAgIGlmIChhcHBseUFzeW5jSWQgPT09IG51bGwpIHtcclxuICAgICAgICBhcHBseUFzeW5jSWQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZsdXNoQXBwbHlBc3luYyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBQcml2YXRlIHNlcnZpY2UgdG8gc2FuaXRpemUgdXJpcyBmb3IgbGlua3MgYW5kIGltYWdlcy4gVXNlZCBieSAkY29tcGlsZSBhbmQgJHNhbml0aXplLlxyXG4gKi9cclxuZnVuY3Rpb24gJCRTYW5pdGl6ZVVyaVByb3ZpZGVyKCkge1xyXG4gIHZhciBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IC9eXFxzKihodHRwcz98ZnRwfG1haWx0b3x0ZWx8ZmlsZSk6LyxcclxuICAgIGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IC9eXFxzKigoaHR0cHM/fGZ0cHxmaWxlfGJsb2IpOnxkYXRhOmltYWdlXFwvKS87XHJcblxyXG4gIC8qKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcclxuICAgKiB1cmxzIGR1cmluZyBhW2hyZWZdIHNhbml0aXphdGlvbi5cclxuICAgKlxyXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnQgWFNTIGF0dGFja3MgdmlhIGh0bWwgbGlua3MuXHJcbiAgICpcclxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGFbaHJlZl0gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xyXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdGBcclxuICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIElmIGEgbWF0Y2ggaXMgZm91bmQsIHRoZSBvcmlnaW5hbCB1cmwgaXMgd3JpdHRlbiBpbnRvIHRoZSBkb20uIE90aGVyd2lzZSxcclxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXHJcbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxyXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cclxuICAgKi9cclxuICB0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKHJlZ2V4cCkpIHtcclxuICAgICAgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSByZWdleHA7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0O1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXHJcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxyXG4gICAqXHJcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cclxuICAgKlxyXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gaW1nW3NyY10gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xyXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXHJcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXHJcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxyXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgdGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcclxuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xyXG4gICAgICBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSByZWdleHA7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdDtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiBzYW5pdGl6ZVVyaSh1cmksIGlzSW1hZ2UpIHtcclxuICAgICAgdmFyIHJlZ2V4ID0gaXNJbWFnZSA/IGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA6IGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0O1xyXG4gICAgICB2YXIgbm9ybWFsaXplZFZhbDtcclxuICAgICAgLy8gTk9URTogdXJsUmVzb2x2ZSgpIGRvZXNuJ3Qgc3VwcG9ydCBJRSA8IDggc28gd2UgZG9uJ3Qgc2FuaXRpemUgZm9yIHRoYXQgY2FzZS5cclxuICAgICAgaWYgKCFtc2llIHx8IG1zaWUgPj0gOCApIHtcclxuICAgICAgICBub3JtYWxpemVkVmFsID0gdXJsUmVzb2x2ZSh1cmkpLmhyZWY7XHJcbiAgICAgICAgaWYgKG5vcm1hbGl6ZWRWYWwgIT09ICcnICYmICFub3JtYWxpemVkVmFsLm1hdGNoKHJlZ2V4KSkge1xyXG4gICAgICAgICAgcmV0dXJuICd1bnNhZmU6Jytub3JtYWxpemVkVmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdXJpO1xyXG4gICAgfTtcclxuICB9O1xyXG59XHJcblxyXG52YXIgJHNjZU1pbkVyciA9IG1pbkVycignJHNjZScpO1xyXG5cclxudmFyIFNDRV9DT05URVhUUyA9IHtcclxuICBIVE1MOiAnaHRtbCcsXHJcbiAgQ1NTOiAnY3NzJyxcclxuICBVUkw6ICd1cmwnLFxyXG4gIC8vIFJFU09VUkNFX1VSTCBpcyBhIHN1YnR5cGUgb2YgVVJMIHVzZWQgaW4gY29udGV4dHMgd2hlcmUgYSBwcml2aWxlZ2VkIHJlc291cmNlIGlzIHNvdXJjZWQgZnJvbSBhXHJcbiAgLy8gdXJsLiAgKGUuZy4gbmctaW5jbHVkZSwgc2NyaXB0IHNyYywgdGVtcGxhdGVVcmwpXHJcbiAgUkVTT1VSQ0VfVVJMOiAncmVzb3VyY2VVcmwnLFxyXG4gIEpTOiAnanMnXHJcbn07XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvbGxvdy5cclxuXHJcbi8vIENvcGllZCBmcm9tOlxyXG4vLyBodHRwOi8vZG9jcy5jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vZ2l0L2Nsb3N1cmVfZ29vZ19zdHJpbmdfc3RyaW5nLmpzLnNvdXJjZS5odG1sI2xpbmU5NjJcclxuLy8gUHJlcmVxOiBzIGlzIGEgc3RyaW5nLlxyXG5mdW5jdGlvbiBlc2NhcGVGb3JSZWdleHAocykge1xyXG4gIHJldHVybiBzLnJlcGxhY2UoLyhbLSgpXFxbXFxde30rPyouJFxcXnwsOiM8IVxcXFxdKS9nLCAnXFxcXCQxJykuXHJcbiAgICAgICAgICAgcmVwbGFjZSgvXFx4MDgvZywgJ1xcXFx4MDgnKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFkanVzdE1hdGNoZXIobWF0Y2hlcikge1xyXG4gIGlmIChtYXRjaGVyID09PSAnc2VsZicpIHtcclxuICAgIHJldHVybiBtYXRjaGVyO1xyXG4gIH0gZWxzZSBpZiAoaXNTdHJpbmcobWF0Y2hlcikpIHtcclxuICAgIC8vIFN0cmluZ3MgbWF0Y2ggZXhhY3RseSBleGNlcHQgZm9yIDIgd2lsZGNhcmRzIC0gJyonIGFuZCAnKionLlxyXG4gICAgLy8gJyonIG1hdGNoZXMgYW55IGNoYXJhY3RlciBleGNlcHQgdGhvc2UgZnJvbSB0aGUgc2V0ICc6Ly4/JicuXHJcbiAgICAvLyAnKionIG1hdGNoZXMgYW55IGNoYXJhY3RlciAobGlrZSAuKiBpbiBhIFJlZ0V4cCkuXHJcbiAgICAvLyBNb3JlIHRoYW4gMiAqJ3MgcmFpc2VzIGFuIGVycm9yIGFzIGl0J3MgaWxsIGRlZmluZWQuXHJcbiAgICBpZiAobWF0Y2hlci5pbmRleE9mKCcqKionKSA+IC0xKSB7XHJcbiAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2l3Y2FyZCcsXHJcbiAgICAgICAgICAnSWxsZWdhbCBzZXF1ZW5jZSAqKiogaW4gc3RyaW5nIG1hdGNoZXIuICBTdHJpbmc6IHswfScsIG1hdGNoZXIpO1xyXG4gICAgfVxyXG4gICAgbWF0Y2hlciA9IGVzY2FwZUZvclJlZ2V4cChtYXRjaGVyKS5cclxuICAgICAgICAgICAgICAgICAgcmVwbGFjZSgnXFxcXCpcXFxcKicsICcuKicpLlxyXG4gICAgICAgICAgICAgICAgICByZXBsYWNlKCdcXFxcKicsICdbXjovLj8mO10qJyk7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBtYXRjaGVyICsgJyQnKTtcclxuICB9IGVsc2UgaWYgKGlzUmVnRXhwKG1hdGNoZXIpKSB7XHJcbiAgICAvLyBUaGUgb25seSBvdGhlciB0eXBlIG9mIG1hdGNoZXIgYWxsb3dlZCBpcyBhIFJlZ2V4cC5cclxuICAgIC8vIE1hdGNoIGVudGlyZSBVUkwgLyBkaXNhbGxvdyBwYXJ0aWFsIG1hdGNoZXMuXHJcbiAgICAvLyBGbGFncyBhcmUgcmVzZXQgKGkuZS4gbm8gZ2xvYmFsLCBpZ25vcmVDYXNlIG9yIG11bHRpbGluZSlcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIG1hdGNoZXIuc291cmNlICsgJyQnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgJHNjZU1pbkVycignaW1hdGNoZXInLFxyXG4gICAgICAgICdNYXRjaGVycyBtYXkgb25seSBiZSBcInNlbGZcIiwgc3RyaW5nIHBhdHRlcm5zIG9yIFJlZ0V4cCBvYmplY3RzJyk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gYWRqdXN0TWF0Y2hlcnMobWF0Y2hlcnMpIHtcclxuICB2YXIgYWRqdXN0ZWRNYXRjaGVycyA9IFtdO1xyXG4gIGlmIChpc0RlZmluZWQobWF0Y2hlcnMpKSB7XHJcbiAgICBmb3JFYWNoKG1hdGNoZXJzLCBmdW5jdGlvbihtYXRjaGVyKSB7XHJcbiAgICAgIGFkanVzdGVkTWF0Y2hlcnMucHVzaChhZGp1c3RNYXRjaGVyKG1hdGNoZXIpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gYWRqdXN0ZWRNYXRjaGVycztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkc2NlRGVsZWdhdGVcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIGAkc2NlRGVsZWdhdGVgIGlzIGEgc2VydmljZSB0aGF0IGlzIHVzZWQgYnkgdGhlIGAkc2NlYCBzZXJ2aWNlIHRvIHByb3ZpZGUge0BsaW5rIG5nLiRzY2UgU3RyaWN0XHJcbiAqIENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9IHNlcnZpY2VzIHRvIEFuZ3VsYXJKUy5cclxuICpcclxuICogVHlwaWNhbGx5LCB5b3Ugd291bGQgY29uZmlndXJlIG9yIG92ZXJyaWRlIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlICRzY2VEZWxlZ2F0ZX0gaW5zdGVhZCBvZlxyXG4gKiB0aGUgYCRzY2VgIHNlcnZpY2UgdG8gY3VzdG9taXplIHRoZSB3YXkgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgd29ya3MgaW4gQW5ndWxhckpTLiAgVGhpcyBpc1xyXG4gKiBiZWNhdXNlLCB3aGlsZSB0aGUgYCRzY2VgIHByb3ZpZGVzIG51bWVyb3VzIHNob3J0aGFuZCBtZXRob2RzLCBldGMuLCB5b3UgcmVhbGx5IG9ubHkgbmVlZCB0b1xyXG4gKiBvdmVycmlkZSAzIGNvcmUgZnVuY3Rpb25zIChgdHJ1c3RBc2AsIGBnZXRUcnVzdGVkYCBhbmQgYHZhbHVlT2ZgKSB0byByZXBsYWNlIHRoZSB3YXkgdGhpbmdzXHJcbiAqIHdvcmsgYmVjYXVzZSBgJHNjZWAgZGVsZWdhdGVzIHRvIGAkc2NlRGVsZWdhdGVgIGZvciB0aGVzZSBvcGVyYXRpb25zLlxyXG4gKlxyXG4gKiBSZWZlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIgJHNjZURlbGVnYXRlUHJvdmlkZXJ9IHRvIGNvbmZpZ3VyZSB0aGlzIHNlcnZpY2UuXHJcbiAqXHJcbiAqIFRoZSBkZWZhdWx0IGluc3RhbmNlIG9mIGAkc2NlRGVsZWdhdGVgIHNob3VsZCB3b3JrIG91dCBvZiB0aGUgYm94IHdpdGggbGl0dGxlIHBhaW4uICBXaGlsZSB5b3VcclxuICogY2FuIG92ZXJyaWRlIGl0IGNvbXBsZXRlbHkgdG8gY2hhbmdlIHRoZSBiZWhhdmlvciBvZiBgJHNjZWAsIHRoZSBjb21tb24gY2FzZSB3b3VsZFxyXG4gKiBpbnZvbHZlIGNvbmZpZ3VyaW5nIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIgJHNjZURlbGVnYXRlUHJvdmlkZXJ9IGluc3RlYWQgYnkgc2V0dGluZ1xyXG4gKiB5b3VyIG93biB3aGl0ZWxpc3RzIGFuZCBibGFja2xpc3RzIGZvciB0cnVzdGluZyBVUkxzIHVzZWQgZm9yIGxvYWRpbmcgQW5ndWxhckpTIHJlc291cmNlcyBzdWNoIGFzXHJcbiAqIHRlbXBsYXRlcy4gIFJlZmVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdFxyXG4gKiAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdH0gYW5kIHtAbGlua1xyXG4gKiBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybEJsYWNrbGlzdCAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybEJsYWNrbGlzdH1cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBUaGUgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyYCBwcm92aWRlciBhbGxvd3MgZGV2ZWxvcGVycyB0byBjb25maWd1cmUgdGhlIHtAbGluayBuZy4kc2NlRGVsZWdhdGVcclxuICogJHNjZURlbGVnYXRlfSBzZXJ2aWNlLiAgVGhpcyBhbGxvd3Mgb25lIHRvIGdldC9zZXQgdGhlIHdoaXRlbGlzdHMgYW5kIGJsYWNrbGlzdHMgdXNlZCB0byBlbnN1cmVcclxuICogdGhhdCB0aGUgVVJMcyB1c2VkIGZvciBzb3VyY2luZyBBbmd1bGFyIHRlbXBsYXRlcyBhcmUgc2FmZS4gIFJlZmVyIHtAbGlua1xyXG4gKiBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdH0gYW5kXHJcbiAqIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybEJsYWNrbGlzdCAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybEJsYWNrbGlzdH1cclxuICpcclxuICogRm9yIHRoZSBnZW5lcmFsIGRldGFpbHMgYWJvdXQgdGhpcyBzZXJ2aWNlIGluIEFuZ3VsYXIsIHJlYWQgdGhlIG1haW4gcGFnZSBmb3Ige0BsaW5rIG5nLiRzY2VcclxuICogU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9LlxyXG4gKlxyXG4gKiAqKkV4YW1wbGUqKjogIENvbnNpZGVyIHRoZSBmb2xsb3dpbmcgY2FzZS4gPGEgbmFtZT1cImV4YW1wbGVcIj48L2E+XHJcbiAqXHJcbiAqIC0geW91ciBhcHAgaXMgaG9zdGVkIGF0IHVybCBgaHR0cDovL215YXBwLmV4YW1wbGUuY29tL2BcclxuICogLSBidXQgc29tZSBvZiB5b3VyIHRlbXBsYXRlcyBhcmUgaG9zdGVkIG9uIG90aGVyIGRvbWFpbnMgeW91IGNvbnRyb2wgc3VjaCBhc1xyXG4gKiAgIGBodHRwOi8vc3J2MDEuYXNzZXRzLmV4YW1wbGUuY29tL2AswqAgYGh0dHA6Ly9zcnYwMi5hc3NldHMuZXhhbXBsZS5jb20vYCwgZXRjLlxyXG4gKiAtIGFuZCB5b3UgaGF2ZSBhbiBvcGVuIHJlZGlyZWN0IGF0IGBodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vY2xpY2tUaHJ1Py4uLmAuXHJcbiAqXHJcbiAqIEhlcmUgaXMgd2hhdCBhIHNlY3VyZSBjb25maWd1cmF0aW9uIGZvciB0aGlzIHNjZW5hcmlvIG1pZ2h0IGxvb2sgbGlrZTpcclxuICpcclxuICogYGBgXHJcbiAqICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSkuY29uZmlnKGZ1bmN0aW9uKCRzY2VEZWxlZ2F0ZVByb3ZpZGVyKSB7XHJcbiAqICAgICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0KFtcclxuICogICAgICAvLyBBbGxvdyBzYW1lIG9yaWdpbiByZXNvdXJjZSBsb2Fkcy5cclxuICogICAgICAnc2VsZicsXHJcbiAqICAgICAgLy8gQWxsb3cgbG9hZGluZyBmcm9tIG91ciBhc3NldHMgZG9tYWluLiAgTm90aWNlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gKiBhbmQgKiouXHJcbiAqICAgICAgJ2h0dHA6Ly9zcnYqLmFzc2V0cy5leGFtcGxlLmNvbS8qKidcclxuICogICAgXSk7XHJcbiAqXHJcbiAqICAgIC8vIFRoZSBibGFja2xpc3Qgb3ZlcnJpZGVzIHRoZSB3aGl0ZWxpc3Qgc28gdGhlIG9wZW4gcmVkaXJlY3QgaGVyZSBpcyBibG9ja2VkLlxyXG4gKiAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybEJsYWNrbGlzdChbXHJcbiAqICAgICAgJ2h0dHA6Ly9teWFwcC5leGFtcGxlLmNvbS9jbGlja1RocnUqKidcclxuICogICAgXSk7XHJcbiAqICB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gJFNjZURlbGVnYXRlUHJvdmlkZXIoKSB7XHJcbiAgdGhpcy5TQ0VfQ09OVEVYVFMgPSBTQ0VfQ09OVEVYVFM7XHJcblxyXG4gIC8vIFJlc291cmNlIFVSTHMgY2FuIGFsc28gYmUgdHJ1c3RlZCBieSBwb2xpY3kuXHJcbiAgdmFyIHJlc291cmNlVXJsV2hpdGVsaXN0ID0gWydzZWxmJ10sXHJcbiAgICAgIHJlc291cmNlVXJsQmxhY2tsaXN0ID0gW107XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5PX0gd2hpdGVsaXN0IFdoZW4gcHJvdmlkZWQsIHJlcGxhY2VzIHRoZSByZXNvdXJjZVVybFdoaXRlbGlzdCB3aXRoIHRoZSB2YWx1ZVxyXG4gICAqICAgICBwcm92aWRlZC4gIFRoaXMgbXVzdCBiZSBhbiBhcnJheSBvciBudWxsLiAgQSBzbmFwc2hvdCBvZiB0aGlzIGFycmF5IGlzIHVzZWQgc28gZnVydGhlclxyXG4gICAqICAgICBjaGFuZ2VzIHRvIHRoZSBhcnJheSBhcmUgaWdub3JlZC5cclxuICAgKlxyXG4gICAqICAgICBGb2xsb3cge0BsaW5rIG5nLiRzY2UjcmVzb3VyY2VVcmxQYXR0ZXJuSXRlbSB0aGlzIGxpbmt9IGZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpdGVtc1xyXG4gICAqICAgICBhbGxvd2VkIGluIHRoaXMgYXJyYXkuXHJcbiAgICpcclxuICAgKiAgICAgTm90ZTogKiphbiBlbXB0eSB3aGl0ZWxpc3QgYXJyYXkgd2lsbCBibG9jayBhbGwgVVJMcyoqIVxyXG4gICAqXHJcbiAgICogQHJldHVybiB7QXJyYXl9IHRoZSBjdXJyZW50bHkgc2V0IHdoaXRlbGlzdCBhcnJheS5cclxuICAgKlxyXG4gICAqIFRoZSAqKmRlZmF1bHQgdmFsdWUqKiB3aGVuIG5vIHdoaXRlbGlzdCBoYXMgYmVlbiBleHBsaWNpdGx5IHNldCBpcyBgWydzZWxmJ11gIGFsbG93aW5nIG9ubHlcclxuICAgKiBzYW1lIG9yaWdpbiByZXNvdXJjZSByZXF1ZXN0cy5cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldHMvR2V0cyB0aGUgd2hpdGVsaXN0IG9mIHRydXN0ZWQgcmVzb3VyY2UgVVJMcy5cclxuICAgKi9cclxuICB0aGlzLnJlc291cmNlVXJsV2hpdGVsaXN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXNvdXJjZVVybFdoaXRlbGlzdCA9IGFkanVzdE1hdGNoZXJzKHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNvdXJjZVVybFdoaXRlbGlzdDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3RcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheT19IGJsYWNrbGlzdCBXaGVuIHByb3ZpZGVkLCByZXBsYWNlcyB0aGUgcmVzb3VyY2VVcmxCbGFja2xpc3Qgd2l0aCB0aGUgdmFsdWVcclxuICAgKiAgICAgcHJvdmlkZWQuICBUaGlzIG11c3QgYmUgYW4gYXJyYXkgb3IgbnVsbC4gIEEgc25hcHNob3Qgb2YgdGhpcyBhcnJheSBpcyB1c2VkIHNvIGZ1cnRoZXJcclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuXHJcbiAgICpcclxuICAgKiAgICAgRm9sbG93IHtAbGluayBuZy4kc2NlI3Jlc291cmNlVXJsUGF0dGVybkl0ZW0gdGhpcyBsaW5rfSBmb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaXRlbXNcclxuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LlxyXG4gICAqXHJcbiAgICogICAgIFRoZSB0eXBpY2FsIHVzYWdlIGZvciB0aGUgYmxhY2tsaXN0IGlzIHRvICoqYmxvY2tcclxuICAgKiAgICAgW29wZW4gcmVkaXJlY3RzXShodHRwOi8vY3dlLm1pdHJlLm9yZy9kYXRhL2RlZmluaXRpb25zLzYwMS5odG1sKSoqIHNlcnZlZCBieSB5b3VyIGRvbWFpbiBhc1xyXG4gICAqICAgICB0aGVzZSB3b3VsZCBvdGhlcndpc2UgYmUgdHJ1c3RlZCBidXQgYWN0dWFsbHkgcmV0dXJuIGNvbnRlbnQgZnJvbSB0aGUgcmVkaXJlY3RlZCBkb21haW4uXHJcbiAgICpcclxuICAgKiAgICAgRmluYWxseSwgKip0aGUgYmxhY2tsaXN0IG92ZXJyaWRlcyB0aGUgd2hpdGVsaXN0KiogYW5kIGhhcyB0aGUgZmluYWwgc2F5LlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7QXJyYXl9IHRoZSBjdXJyZW50bHkgc2V0IGJsYWNrbGlzdCBhcnJheS5cclxuICAgKlxyXG4gICAqIFRoZSAqKmRlZmF1bHQgdmFsdWUqKiB3aGVuIG5vIHdoaXRlbGlzdCBoYXMgYmVlbiBleHBsaWNpdGx5IHNldCBpcyB0aGUgZW1wdHkgYXJyYXkgKGkuZS4gdGhlcmVcclxuICAgKiBpcyBubyBibGFja2xpc3QuKVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cy9HZXRzIHRoZSBibGFja2xpc3Qgb2YgdHJ1c3RlZCByZXNvdXJjZSBVUkxzLlxyXG4gICAqL1xyXG5cclxuICB0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXNvdXJjZVVybEJsYWNrbGlzdCA9IGFkanVzdE1hdGNoZXJzKHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNvdXJjZVVybEJsYWNrbGlzdDtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xyXG5cclxuICAgIHZhciBodG1sU2FuaXRpemVyID0gZnVuY3Rpb24gaHRtbFNhbml0aXplcihodG1sKSB7XHJcbiAgICAgIHRocm93ICRzY2VNaW5FcnIoJ3Vuc2FmZScsICdBdHRlbXB0aW5nIHRvIHVzZSBhbiB1bnNhZmUgdmFsdWUgaW4gYSBzYWZlIGNvbnRleHQuJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmICgkaW5qZWN0b3IuaGFzKCckc2FuaXRpemUnKSkge1xyXG4gICAgICBodG1sU2FuaXRpemVyID0gJGluamVjdG9yLmdldCgnJHNhbml0aXplJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIG1hdGNoVXJsKG1hdGNoZXIsIHBhcnNlZFVybCkge1xyXG4gICAgICBpZiAobWF0Y2hlciA9PT0gJ3NlbGYnKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybElzU2FtZU9yaWdpbihwYXJzZWRVcmwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGRlZmluaXRlbHkgYSByZWdleC4gIFNlZSBhZGp1c3RNYXRjaGVycygpXHJcbiAgICAgICAgcmV0dXJuICEhbWF0Y2hlci5leGVjKHBhcnNlZFVybC5ocmVmKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kodXJsKSB7XHJcbiAgICAgIHZhciBwYXJzZWRVcmwgPSB1cmxSZXNvbHZlKHVybC50b1N0cmluZygpKTtcclxuICAgICAgdmFyIGksIG4sIGFsbG93ZWQgPSBmYWxzZTtcclxuICAgICAgLy8gRW5zdXJlIHRoYXQgYXQgbGVhc3Qgb25lIGl0ZW0gZnJvbSB0aGUgd2hpdGVsaXN0IGFsbG93cyB0aGlzIHVybC5cclxuICAgICAgZm9yIChpID0gMCwgbiA9IHJlc291cmNlVXJsV2hpdGVsaXN0Lmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgIGlmIChtYXRjaFVybChyZXNvdXJjZVVybFdoaXRlbGlzdFtpXSwgcGFyc2VkVXJsKSkge1xyXG4gICAgICAgICAgYWxsb3dlZCA9IHRydWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGFsbG93ZWQpIHtcclxuICAgICAgICAvLyBFbnN1cmUgdGhhdCBubyBpdGVtIGZyb20gdGhlIGJsYWNrbGlzdCBibG9ja2VkIHRoaXMgdXJsLlxyXG4gICAgICAgIGZvciAoaSA9IDAsIG4gPSByZXNvdXJjZVVybEJsYWNrbGlzdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgIGlmIChtYXRjaFVybChyZXNvdXJjZVVybEJsYWNrbGlzdFtpXSwgcGFyc2VkVXJsKSkge1xyXG4gICAgICAgICAgICBhbGxvd2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYWxsb3dlZDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUhvbGRlclR5cGUoQmFzZSkge1xyXG4gICAgICB2YXIgaG9sZGVyVHlwZSA9IGZ1bmN0aW9uIFRydXN0ZWRWYWx1ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRydXN0ZWRWYWx1ZTtcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgICBpZiAoQmFzZSkge1xyXG4gICAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlID0gbmV3IEJhc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBob2xkZXJUeXBlLnByb3RvdHlwZS52YWx1ZU9mID0gZnVuY3Rpb24gc2NlVmFsdWVPZigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO1xyXG4gICAgICB9O1xyXG4gICAgICBob2xkZXJUeXBlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHNjZVRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKTtcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIGhvbGRlclR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UgPSBnZW5lcmF0ZUhvbGRlclR5cGUoKSxcclxuICAgICAgICBieVR5cGUgPSB7fTtcclxuXHJcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLkhUTUxdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xyXG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5DU1NdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xyXG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5VUkxdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xyXG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5KU10gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XHJcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLlJFU09VUkNFX1VSTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUoYnlUeXBlW1NDRV9DT05URVhUUy5VUkxdKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2VEZWxlZ2F0ZSN0cnVzdEFzXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGlzIHRydXN0ZWQgYnkgYW5ndWxhciBmb3IgdXNlIGluIHNwZWNpZmllZCBzdHJpY3RcclxuICAgICAqIGNvbnRleHR1YWwgZXNjYXBpbmcgY29udGV4dHMgKHN1Y2ggYXMgbmctYmluZC1odG1sLCBuZy1pbmNsdWRlLCBhbnkgc3JjXHJcbiAgICAgKiBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiwgYW55IGRvbSBldmVudCBiaW5kaW5nIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uXHJcbiAgICAgKiBzdWNoIGFzIGZvciBvbmNsaWNrLCAgZXRjLikgdGhhdCB1c2VzIHRoZSBwcm92aWRlZCB2YWx1ZS5cclxuICAgICAqIFNlZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBmb3IgZW5hYmxpbmcgc3RyaWN0IGNvbnRleHR1YWwgZXNjYXBpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHNhZmUgZm9yIHVzZS4gIGUuZy4gdXJsLFxyXG4gICAgICogICByZXNvdXJjZVVybCwgaHRtbCwganMgYW5kIGNzcy5cclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRoYXQgdGhhdCBzaG91bGQgYmUgY29uc2lkZXJlZCB0cnVzdGVkL3NhZmUuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gQSB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHN0YW5kIGluIGZvciB0aGUgcHJvdmlkZWQgYHZhbHVlYCBpbiBwbGFjZXNcclxuICAgICAqIHdoZXJlIEFuZ3VsYXIgZXhwZWN0cyBhICRzY2UudHJ1c3RBcygpIHJldHVybiB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdHJ1c3RBcyh0eXBlLCB0cnVzdGVkVmFsdWUpIHtcclxuICAgICAgdmFyIENvbnN0cnVjdG9yID0gKGJ5VHlwZS5oYXNPd25Qcm9wZXJ0eSh0eXBlKSA/IGJ5VHlwZVt0eXBlXSA6IG51bGwpO1xyXG4gICAgICBpZiAoIUNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaWNvbnRleHQnLFxyXG4gICAgICAgICAgICAnQXR0ZW1wdGVkIHRvIHRydXN0IGEgdmFsdWUgaW4gaW52YWxpZCBjb250ZXh0LiBDb250ZXh0OiB7MH07IFZhbHVlOiB7MX0nLFxyXG4gICAgICAgICAgICB0eXBlLCB0cnVzdGVkVmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0cnVzdGVkVmFsdWUgPT09IG51bGwgfHwgdHJ1c3RlZFZhbHVlID09PSB1bmRlZmluZWQgfHwgdHJ1c3RlZFZhbHVlID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiB0cnVzdGVkVmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgLy8gQWxsIHRoZSBjdXJyZW50IGNvbnRleHRzIGluIFNDRV9DT05URVhUUyBoYXBwZW4gdG8gYmUgc3RyaW5ncy4gIEluIG9yZGVyIHRvIGF2b2lkIHRydXN0aW5nXHJcbiAgICAgIC8vIG11dGFibGUgb2JqZWN0cywgd2UgZW5zdXJlIGhlcmUgdGhhdCB0aGUgdmFsdWUgcGFzc2VkIGluIGlzIGFjdHVhbGx5IGEgc3RyaW5nLlxyXG4gICAgICBpZiAodHlwZW9mIHRydXN0ZWRWYWx1ZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICB0aHJvdyAkc2NlTWluRXJyKCdpdHlwZScsXHJcbiAgICAgICAgICAgICdBdHRlbXB0ZWQgdG8gdHJ1c3QgYSBub24tc3RyaW5nIHZhbHVlIGluIGEgY29udGVudCByZXF1aXJpbmcgYSBzdHJpbmc6IENvbnRleHQ6IHswfScsXHJcbiAgICAgICAgICAgIHR5cGUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IodHJ1c3RlZFZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2VEZWxlZ2F0ZSN2YWx1ZU9mXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBJZiB0aGUgcGFzc2VkIHBhcmFtZXRlciBoYWQgYmVlbiByZXR1cm5lZCBieSBhIHByaW9yIGNhbGwgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzXHJcbiAgICAgKiBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSwgcmV0dXJucyB0aGUgdmFsdWUgdGhhdCBoYWQgYmVlbiBwYXNzZWQgdG8ge0BsaW5rXHJcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfS5cclxuICAgICAqXHJcbiAgICAgKiBJZiB0aGUgcGFzc2VkIHBhcmFtZXRlciBpcyBub3QgYSB2YWx1ZSB0aGF0IGhhZCBiZWVuIHJldHVybmVkIGJ5IHtAbGlua1xyXG4gICAgICogbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0sIHJldHVybnMgaXQgYXMtaXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgcmVzdWx0IG9mIGEgcHJpb3Ige0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9XHJcbiAgICAgKiAgICAgIGNhbGwgb3IgYW55dGhpbmcgZWxzZS5cclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgYHZhbHVlYCB0aGF0IHdhcyBvcmlnaW5hbGx5IHByb3ZpZGVkIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xyXG4gICAgICogICAgIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9IGlmIGB2YWx1ZWAgaXMgdGhlIHJlc3VsdCBvZiBzdWNoIGEgY2FsbC4gIE90aGVyd2lzZSwgcmV0dXJuc1xyXG4gICAgICogICAgIGB2YWx1ZWAgdW5jaGFuZ2VkLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiB2YWx1ZU9mKG1heWJlVHJ1c3RlZCkge1xyXG4gICAgICBpZiAobWF5YmVUcnVzdGVkIGluc3RhbmNlb2YgdHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSkge1xyXG4gICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogVGFrZXMgdGhlIHJlc3VsdCBvZiBhIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBjYWxsIGFuZFxyXG4gICAgICogcmV0dXJucyB0aGUgb3JpZ2luYWxseSBzdXBwbGllZCB2YWx1ZSBpZiB0aGUgcXVlcmllZCBjb250ZXh0IHR5cGUgaXMgYSBzdXBlcnR5cGUgb2YgdGhlXHJcbiAgICAgKiBjcmVhdGVkIHR5cGUuICBJZiB0aGlzIGNvbmRpdGlvbiBpc24ndCBzYXRpc2ZpZWQsIHRocm93cyBhbiBleGNlcHRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHRvIGJlIHVzZWQuXHJcbiAgICAgKiBAcGFyYW0geyp9IG1heWJlVHJ1c3RlZCBUaGUgcmVzdWx0IG9mIGEgcHJpb3Ige0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzXHJcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gY2FsbC5cclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgdmFsdWUgdGhlIHdhcyBvcmlnaW5hbGx5IHByb3ZpZGVkIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xyXG4gICAgICogICAgIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9IGlmIHZhbGlkIGluIHRoaXMgY29udGV4dC4gIE90aGVyd2lzZSwgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0VHJ1c3RlZCh0eXBlLCBtYXliZVRydXN0ZWQpIHtcclxuICAgICAgaWYgKG1heWJlVHJ1c3RlZCA9PT0gbnVsbCB8fCBtYXliZVRydXN0ZWQgPT09IHVuZGVmaW5lZCB8fCBtYXliZVRydXN0ZWQgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZDtcclxuICAgICAgfVxyXG4gICAgICB2YXIgY29uc3RydWN0b3IgPSAoYnlUeXBlLmhhc093blByb3BlcnR5KHR5cGUpID8gYnlUeXBlW3R5cGVdIDogbnVsbCk7XHJcbiAgICAgIGlmIChjb25zdHJ1Y3RvciAmJiBtYXliZVRydXN0ZWQgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBJZiB3ZSBnZXQgaGVyZSwgdGhlbiB3ZSBtYXkgb25seSB0YWtlIG9uZSBvZiB0d28gYWN0aW9ucy5cclxuICAgICAgLy8gMS4gc2FuaXRpemUgdGhlIHZhbHVlIGZvciB0aGUgcmVxdWVzdGVkIHR5cGUsIG9yXHJcbiAgICAgIC8vIDIuIHRocm93IGFuIGV4Y2VwdGlvbi5cclxuICAgICAgaWYgKHR5cGUgPT09IFNDRV9DT05URVhUUy5SRVNPVVJDRV9VUkwpIHtcclxuICAgICAgICBpZiAoaXNSZXNvdXJjZVVybEFsbG93ZWRCeVBvbGljeShtYXliZVRydXN0ZWQpKSB7XHJcbiAgICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyAkc2NlTWluRXJyKCdpbnNlY3VybCcsXHJcbiAgICAgICAgICAgICAgJ0Jsb2NrZWQgbG9hZGluZyByZXNvdXJjZSBmcm9tIHVybCBub3QgYWxsb3dlZCBieSAkc2NlRGVsZWdhdGUgcG9saWN5LiAgVVJMOiB7MH0nLFxyXG4gICAgICAgICAgICAgIG1heWJlVHJ1c3RlZC50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gU0NFX0NPTlRFWFRTLkhUTUwpIHtcclxuICAgICAgICByZXR1cm4gaHRtbFNhbml0aXplcihtYXliZVRydXN0ZWQpO1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93ICRzY2VNaW5FcnIoJ3Vuc2FmZScsICdBdHRlbXB0aW5nIHRvIHVzZSBhbiB1bnNhZmUgdmFsdWUgaW4gYSBzYWZlIGNvbnRleHQuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgdHJ1c3RBczogdHJ1c3RBcyxcclxuICAgICAgICAgICAgIGdldFRydXN0ZWQ6IGdldFRydXN0ZWQsXHJcbiAgICAgICAgICAgICB2YWx1ZU9mOiB2YWx1ZU9mIH07XHJcbiAgfV07XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRzY2VQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogVGhlICRzY2VQcm92aWRlciBwcm92aWRlciBhbGxvd3MgZGV2ZWxvcGVycyB0byBjb25maWd1cmUgdGhlIHtAbGluayBuZy4kc2NlICRzY2V9IHNlcnZpY2UuXHJcbiAqIC0gICBlbmFibGUvZGlzYWJsZSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKSBpbiBhIG1vZHVsZVxyXG4gKiAtICAgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gd2l0aCBhIGN1c3RvbSBkZWxlZ2F0ZVxyXG4gKlxyXG4gKiBSZWFkIG1vcmUgYWJvdXQge0BsaW5rIG5nLiRzY2UgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9LlxyXG4gKi9cclxuXHJcbi8qIGpzaGludCBtYXhsZW46IGZhbHNlKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkc2NlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBgJHNjZWAgaXMgYSBzZXJ2aWNlIHRoYXQgcHJvdmlkZXMgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgc2VydmljZXMgdG8gQW5ndWxhckpTLlxyXG4gKlxyXG4gKiAjIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nXHJcbiAqXHJcbiAqIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpIGlzIGEgbW9kZSBpbiB3aGljaCBBbmd1bGFySlMgcmVxdWlyZXMgYmluZGluZ3MgaW4gY2VydGFpblxyXG4gKiBjb250ZXh0cyB0byByZXN1bHQgaW4gYSB2YWx1ZSB0aGF0IGlzIG1hcmtlZCBhcyBzYWZlIHRvIHVzZSBmb3IgdGhhdCBjb250ZXh0LiAgT25lIGV4YW1wbGUgb2ZcclxuICogc3VjaCBhIGNvbnRleHQgaXMgYmluZGluZyBhcmJpdHJhcnkgaHRtbCBjb250cm9sbGVkIGJ5IHRoZSB1c2VyIHZpYSBgbmctYmluZC1odG1sYC4gIFdlIHJlZmVyXHJcbiAqIHRvIHRoZXNlIGNvbnRleHRzIGFzIHByaXZpbGVnZWQgb3IgU0NFIGNvbnRleHRzLlxyXG4gKlxyXG4gKiBBcyBvZiB2ZXJzaW9uIDEuMiwgQW5ndWxhciBzaGlwcyB3aXRoIFNDRSBlbmFibGVkIGJ5IGRlZmF1bHQuXHJcbiAqXHJcbiAqIE5vdGU6ICBXaGVuIGVuYWJsZWQgKHRoZSBkZWZhdWx0KSwgSUU4IGluIHF1aXJrcyBtb2RlIGlzIG5vdCBzdXBwb3J0ZWQuICBJbiB0aGlzIG1vZGUsIElFOCBhbGxvd3NcclxuICogb25lIHRvIGV4ZWN1dGUgYXJiaXRyYXJ5IGphdmFzY3JpcHQgYnkgdGhlIHVzZSBvZiB0aGUgZXhwcmVzc2lvbigpIHN5bnRheC4gIFJlZmVyXHJcbiAqIDxodHRwOi8vYmxvZ3MubXNkbi5jb20vYi9pZS9hcmNoaXZlLzIwMDgvMTAvMTYvZW5kaW5nLWV4cHJlc3Npb25zLmFzcHg+IHRvIGxlYXJuIG1vcmUgYWJvdXQgdGhlbS5cclxuICogWW91IGNhbiBlbnN1cmUgeW91ciBkb2N1bWVudCBpcyBpbiBzdGFuZGFyZHMgbW9kZSBhbmQgbm90IHF1aXJrcyBtb2RlIGJ5IGFkZGluZyBgPCFkb2N0eXBlIGh0bWw+YFxyXG4gKiB0byB0aGUgdG9wIG9mIHlvdXIgSFRNTCBkb2N1bWVudC5cclxuICpcclxuICogU0NFIGFzc2lzdHMgaW4gd3JpdGluZyBjb2RlIGluIHdheSB0aGF0IChhKSBpcyBzZWN1cmUgYnkgZGVmYXVsdCBhbmQgKGIpIG1ha2VzIGF1ZGl0aW5nIGZvclxyXG4gKiBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMgc3VjaCBhcyBYU1MsIGNsaWNramFja2luZywgZXRjLiBhIGxvdCBlYXNpZXIuXHJcbiAqXHJcbiAqIEhlcmUncyBhbiBleGFtcGxlIG9mIGEgYmluZGluZyBpbiBhIHByaXZpbGVnZWQgY29udGV4dDpcclxuICpcclxuICogYGBgXHJcbiAqIDxpbnB1dCBuZy1tb2RlbD1cInVzZXJIdG1sXCI+XHJcbiAqIDxkaXYgbmctYmluZC1odG1sPVwidXNlckh0bWxcIj48L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIE5vdGljZSB0aGF0IGBuZy1iaW5kLWh0bWxgIGlzIGJvdW5kIHRvIGB1c2VySHRtbGAgY29udHJvbGxlZCBieSB0aGUgdXNlci4gIFdpdGggU0NFXHJcbiAqIGRpc2FibGVkLCB0aGlzIGFwcGxpY2F0aW9uIGFsbG93cyB0aGUgdXNlciB0byByZW5kZXIgYXJiaXRyYXJ5IEhUTUwgaW50byB0aGUgRElWLlxyXG4gKiBJbiBhIG1vcmUgcmVhbGlzdGljIGV4YW1wbGUsIG9uZSBtYXkgYmUgcmVuZGVyaW5nIHVzZXIgY29tbWVudHMsIGJsb2cgYXJ0aWNsZXMsIGV0Yy4gdmlhXHJcbiAqIGJpbmRpbmdzLiAgKEhUTUwgaXMganVzdCBvbmUgZXhhbXBsZSBvZiBhIGNvbnRleHQgd2hlcmUgcmVuZGVyaW5nIHVzZXIgY29udHJvbGxlZCBpbnB1dCBjcmVhdGVzXHJcbiAqIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4pXHJcbiAqXHJcbiAqIEZvciB0aGUgY2FzZSBvZiBIVE1MLCB5b3UgbWlnaHQgdXNlIGEgbGlicmFyeSwgZWl0aGVyIG9uIHRoZSBjbGllbnQgc2lkZSwgb3Igb24gdGhlIHNlcnZlciBzaWRlLFxyXG4gKiB0byBzYW5pdGl6ZSB1bnNhZmUgSFRNTCBiZWZvcmUgYmluZGluZyB0byB0aGUgdmFsdWUgYW5kIHJlbmRlcmluZyBpdCBpbiB0aGUgZG9jdW1lbnQuXHJcbiAqXHJcbiAqIEhvdyB3b3VsZCB5b3UgZW5zdXJlIHRoYXQgZXZlcnkgcGxhY2UgdGhhdCB1c2VkIHRoZXNlIHR5cGVzIG9mIGJpbmRpbmdzIHdhcyBib3VuZCB0byBhIHZhbHVlIHRoYXRcclxuICogd2FzIHNhbml0aXplZCBieSB5b3VyIGxpYnJhcnkgKG9yIHJldHVybmVkIGFzIHNhZmUgZm9yIHJlbmRlcmluZyBieSB5b3VyIHNlcnZlcj8pICBIb3cgY2FuIHlvdVxyXG4gKiBlbnN1cmUgdGhhdCB5b3UgZGlkbid0IGFjY2lkZW50YWxseSBkZWxldGUgdGhlIGxpbmUgdGhhdCBzYW5pdGl6ZWQgdGhlIHZhbHVlLCBvciByZW5hbWVkIHNvbWVcclxuICogcHJvcGVydGllcy9maWVsZHMgYW5kIGZvcmdvdCB0byB1cGRhdGUgdGhlIGJpbmRpbmcgdG8gdGhlIHNhbml0aXplZCB2YWx1ZT9cclxuICpcclxuICogVG8gYmUgc2VjdXJlIGJ5IGRlZmF1bHQsIHlvdSB3YW50IHRvIGVuc3VyZSB0aGF0IGFueSBzdWNoIGJpbmRpbmdzIGFyZSBkaXNhbGxvd2VkIHVubGVzcyB5b3UgY2FuXHJcbiAqIGRldGVybWluZSB0aGF0IHNvbWV0aGluZyBleHBsaWNpdGx5IHNheXMgaXQncyBzYWZlIHRvIHVzZSBhIHZhbHVlIGZvciBiaW5kaW5nIGluIHRoYXRcclxuICogY29udGV4dC4gIFlvdSBjYW4gdGhlbiBhdWRpdCB5b3VyIGNvZGUgKGEgc2ltcGxlIGdyZXAgd291bGQgZG8pIHRvIGVuc3VyZSB0aGF0IHRoaXMgaXMgb25seSBkb25lXHJcbiAqIGZvciB0aG9zZSB2YWx1ZXMgdGhhdCB5b3UgY2FuIGVhc2lseSB0ZWxsIGFyZSBzYWZlIC0gYmVjYXVzZSB0aGV5IHdlcmUgcmVjZWl2ZWQgZnJvbSB5b3VyIHNlcnZlcixcclxuICogc2FuaXRpemVkIGJ5IHlvdXIgbGlicmFyeSwgZXRjLiAgWW91IGNhbiBvcmdhbml6ZSB5b3VyIGNvZGViYXNlIHRvIGhlbHAgd2l0aCB0aGlzIC0gcGVyaGFwc1xyXG4gKiBhbGxvd2luZyBvbmx5IHRoZSBmaWxlcyBpbiBhIHNwZWNpZmljIGRpcmVjdG9yeSB0byBkbyB0aGlzLiAgRW5zdXJpbmcgdGhhdCB0aGUgaW50ZXJuYWwgQVBJXHJcbiAqIGV4cG9zZWQgYnkgdGhhdCBjb2RlIGRvZXNuJ3QgbWFya3VwIGFyYml0cmFyeSB2YWx1ZXMgYXMgc2FmZSB0aGVuIGJlY29tZXMgYSBtb3JlIG1hbmFnZWFibGUgdGFzay5cclxuICpcclxuICogSW4gdGhlIGNhc2Ugb2YgQW5ndWxhckpTJyBTQ0Ugc2VydmljZSwgb25lIHVzZXMge0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyAkc2NlLnRydXN0QXN9XHJcbiAqIChhbmQgc2hvcnRoYW5kIG1ldGhvZHMgc3VjaCBhcyB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzSHRtbCAkc2NlLnRydXN0QXNIdG1sfSwgZXRjLikgdG9cclxuICogb2J0YWluIHZhbHVlcyB0aGF0IHdpbGwgYmUgYWNjZXB0ZWQgYnkgU0NFIC8gcHJpdmlsZWdlZCBjb250ZXh0cy5cclxuICpcclxuICpcclxuICogIyMgSG93IGRvZXMgaXQgd29yaz9cclxuICpcclxuICogSW4gcHJpdmlsZWdlZCBjb250ZXh0cywgZGlyZWN0aXZlcyBhbmQgY29kZSB3aWxsIGJpbmQgdG8gdGhlIHJlc3VsdCBvZiB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkXHJcbiAqICRzY2UuZ2V0VHJ1c3RlZChjb250ZXh0LCB2YWx1ZSl9IHJhdGhlciB0aGFuIHRvIHRoZSB2YWx1ZSBkaXJlY3RseS4gIERpcmVjdGl2ZXMgdXNlIHtAbGlua1xyXG4gKiBuZy4kc2NlI3BhcnNlICRzY2UucGFyc2VBc30gcmF0aGVyIHRoYW4gYCRwYXJzZWAgdG8gd2F0Y2ggYXR0cmlidXRlIGJpbmRpbmdzLCB3aGljaCBwZXJmb3JtcyB0aGVcclxuICoge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWR9IGJlaGluZCB0aGUgc2NlbmVzIG9uIG5vbi1jb25zdGFudCBsaXRlcmFscy5cclxuICpcclxuICogQXMgYW4gZXhhbXBsZSwge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0JpbmRIdG1sIG5nQmluZEh0bWx9IHVzZXMge0BsaW5rXHJcbiAqIG5nLiRzY2UjcGFyc2VBc0h0bWwgJHNjZS5wYXJzZUFzSHRtbChiaW5kaW5nIGV4cHJlc3Npb24pfS4gIEhlcmUncyB0aGUgYWN0dWFsIGNvZGUgKHNsaWdodGx5XHJcbiAqIHNpbXBsaWZpZWQpOlxyXG4gKlxyXG4gKiBgYGBcclxuICogdmFyIG5nQmluZEh0bWxEaXJlY3RpdmUgPSBbJyRzY2UnLCBmdW5jdGlvbigkc2NlKSB7XHJcbiAqICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAqICAgICBzY29wZS4kd2F0Y2goJHNjZS5wYXJzZUFzSHRtbChhdHRyLm5nQmluZEh0bWwpLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gKiAgICAgICBlbGVtZW50Lmh0bWwodmFsdWUgfHwgJycpO1xyXG4gKiAgICAgfSk7XHJcbiAqICAgfTtcclxuICogfV07XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAjIyBJbXBhY3Qgb24gbG9hZGluZyB0ZW1wbGF0ZXNcclxuICpcclxuICogVGhpcyBhcHBsaWVzIGJvdGggdG8gdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbmNsdWRlIGBuZy1pbmNsdWRlYH0gZGlyZWN0aXZlIGFzIHdlbGwgYXNcclxuICogYHRlbXBsYXRlVXJsYCdzIHNwZWNpZmllZCBieSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZXN9LlxyXG4gKlxyXG4gKiBCeSBkZWZhdWx0LCBBbmd1bGFyIG9ubHkgbG9hZHMgdGVtcGxhdGVzIGZyb20gdGhlIHNhbWUgZG9tYWluIGFuZCBwcm90b2NvbCBhcyB0aGUgYXBwbGljYXRpb25cclxuICogZG9jdW1lbnQuICBUaGlzIGlzIGRvbmUgYnkgY2FsbGluZyB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmxcclxuICogJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9IG9uIHRoZSB0ZW1wbGF0ZSBVUkwuICBUbyBsb2FkIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgYW5kL29yXHJcbiAqIHByb3RvY29scywgeW91IG1heSBlaXRoZXIgZWl0aGVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCB3aGl0ZWxpc3RcclxuICogdGhlbX0gb3Ige0BsaW5rIG5nLiRzY2UjdHJ1c3RBc1Jlc291cmNlVXJsIHdyYXAgaXR9IGludG8gYSB0cnVzdGVkIHZhbHVlLlxyXG4gKlxyXG4gKiAqUGxlYXNlIG5vdGUqOlxyXG4gKiBUaGUgYnJvd3NlcidzXHJcbiAqIFtTYW1lIE9yaWdpbiBQb2xpY3ldKGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYnJvd3NlcnNlYy93aWtpL1BhcnQyI1NhbWUtb3JpZ2luX3BvbGljeV9mb3JfWE1MSHR0cFJlcXVlc3QpXHJcbiAqIGFuZCBbQ3Jvc3MtT3JpZ2luIFJlc291cmNlIFNoYXJpbmcgKENPUlMpXShodHRwOi8vd3d3LnczLm9yZy9UUi9jb3JzLylcclxuICogcG9saWN5IGFwcGx5IGluIGFkZGl0aW9uIHRvIHRoaXMgYW5kIG1heSBmdXJ0aGVyIHJlc3RyaWN0IHdoZXRoZXIgdGhlIHRlbXBsYXRlIGlzIHN1Y2Nlc3NmdWxseVxyXG4gKiBsb2FkZWQuICBUaGlzIG1lYW5zIHRoYXQgd2l0aG91dCB0aGUgcmlnaHQgQ09SUyBwb2xpY3ksIGxvYWRpbmcgdGVtcGxhdGVzIGZyb20gYSBkaWZmZXJlbnQgZG9tYWluXHJcbiAqIHdvbid0IHdvcmsgb24gYWxsIGJyb3dzZXJzLiAgQWxzbywgbG9hZGluZyB0ZW1wbGF0ZXMgZnJvbSBgZmlsZTovL2AgVVJMIGRvZXMgbm90IHdvcmsgb24gc29tZVxyXG4gKiBicm93c2Vycy5cclxuICpcclxuICogIyMgVGhpcyBmZWVscyBsaWtlIHRvbyBtdWNoIG92ZXJoZWFkXHJcbiAqXHJcbiAqIEl0J3MgaW1wb3J0YW50IHRvIHJlbWVtYmVyIHRoYXQgU0NFIG9ubHkgYXBwbGllcyB0byBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb25zLlxyXG4gKlxyXG4gKiBJZiB5b3VyIGV4cHJlc3Npb25zIGFyZSBjb25zdGFudCBsaXRlcmFscywgdGhleSdyZSBhdXRvbWF0aWNhbGx5IHRydXN0ZWQgYW5kIHlvdSBkb24ndCBuZWVkIHRvXHJcbiAqIGNhbGwgYCRzY2UudHJ1c3RBc2Agb24gdGhlbSAocmVtZW1iZXIgdG8gaW5jbHVkZSB0aGUgYG5nU2FuaXRpemVgIG1vZHVsZSkgKGUuZy5cclxuICogYDxkaXYgbmctYmluZC1odG1sPVwiJzxiPmltcGxpY2l0bHkgdHJ1c3RlZDwvYj4nXCI+PC9kaXY+YCkganVzdCB3b3Jrcy5cclxuICpcclxuICogQWRkaXRpb25hbGx5LCBgYVtocmVmXWAgYW5kIGBpbWdbc3JjXWAgYXV0b21hdGljYWxseSBzYW5pdGl6ZSB0aGVpciBVUkxzIGFuZCBkbyBub3QgcGFzcyB0aGVtXHJcbiAqIHRocm91Z2gge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWR9LiAgU0NFIGRvZXNuJ3QgcGxheSBhIHJvbGUgaGVyZS5cclxuICpcclxuICogVGhlIGluY2x1ZGVkIHtAbGluayBuZy4kc2NlRGVsZWdhdGUgJHNjZURlbGVnYXRlfSBjb21lcyB3aXRoIHNhbmUgZGVmYXVsdHMgdG8gYWxsb3cgeW91IHRvIGxvYWRcclxuICogdGVtcGxhdGVzIGluIGBuZy1pbmNsdWRlYCBmcm9tIHlvdXIgYXBwbGljYXRpb24ncyBkb21haW4gd2l0aG91dCBoYXZpbmcgdG8gZXZlbiBrbm93IGFib3V0IFNDRS5cclxuICogSXQgYmxvY2tzIGxvYWRpbmcgdGVtcGxhdGVzIGZyb20gb3RoZXIgZG9tYWlucyBvciBsb2FkaW5nIHRlbXBsYXRlcyBvdmVyIGh0dHAgZnJvbSBhbiBodHRwc1xyXG4gKiBzZXJ2ZWQgZG9jdW1lbnQuICBZb3UgY2FuIGNoYW5nZSB0aGVzZSBieSBzZXR0aW5nIHlvdXIgb3duIGN1c3RvbSB7QGxpbmtcclxuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0c30gYW5kIHtAbGlua1xyXG4gKiBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybEJsYWNrbGlzdCBibGFja2xpc3RzfSBmb3IgbWF0Y2hpbmcgc3VjaCBVUkxzLlxyXG4gKlxyXG4gKiBUaGlzIHNpZ25pZmljYW50bHkgcmVkdWNlcyB0aGUgb3ZlcmhlYWQuICBJdCBpcyBmYXIgZWFzaWVyIHRvIHBheSB0aGUgc21hbGwgb3ZlcmhlYWQgYW5kIGhhdmUgYW5cclxuICogYXBwbGljYXRpb24gdGhhdCdzIHNlY3VyZSBhbmQgY2FuIGJlIGF1ZGl0ZWQgdG8gdmVyaWZ5IHRoYXQgd2l0aCBtdWNoIG1vcmUgZWFzZSB0aGFuIGJvbHRpbmdcclxuICogc2VjdXJpdHkgb250byBhbiBhcHBsaWNhdGlvbiBsYXRlci5cclxuICpcclxuICogPGEgbmFtZT1cImNvbnRleHRzXCI+PC9hPlxyXG4gKiAjIyBXaGF0IHRydXN0ZWQgY29udGV4dCB0eXBlcyBhcmUgc3VwcG9ydGVkP1xyXG4gKlxyXG4gKiB8IENvbnRleHQgICAgICAgICAgICAgfCBOb3RlcyAgICAgICAgICB8XHJcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXxcclxuICogfCBgJHNjZS5IVE1MYCAgICAgICAgIHwgRm9yIEhUTUwgdGhhdCdzIHNhZmUgdG8gc291cmNlIGludG8gdGhlIGFwcGxpY2F0aW9uLiAgVGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdCaW5kSHRtbCBuZ0JpbmRIdG1sfSBkaXJlY3RpdmUgdXNlcyB0aGlzIGNvbnRleHQgZm9yIGJpbmRpbmdzLiBJZiBhbiB1bnNhZmUgdmFsdWUgaXMgZW5jb3VudGVyZWQgYW5kIHRoZSB7QGxpbmsgbmdTYW5pdGl6ZSAkc2FuaXRpemV9IG1vZHVsZSBpcyBwcmVzZW50IHRoaXMgd2lsbCBzYW5pdGl6ZSB0aGUgdmFsdWUgaW5zdGVhZCBvZiB0aHJvd2luZyBhbiBlcnJvci4gfFxyXG4gKiB8IGAkc2NlLkNTU2AgICAgICAgICAgfCBGb3IgQ1NTIHRoYXQncyBzYWZlIHRvIHNvdXJjZSBpbnRvIHRoZSBhcHBsaWNhdGlvbi4gIEN1cnJlbnRseSB1bnVzZWQuICBGZWVsIGZyZWUgdG8gdXNlIGl0IGluIHlvdXIgb3duIGRpcmVjdGl2ZXMuIHxcclxuICogfCBgJHNjZS5VUkxgICAgICAgICAgIHwgRm9yIFVSTHMgdGhhdCBhcmUgc2FmZSB0byBmb2xsb3cgYXMgbGlua3MuICBDdXJyZW50bHkgdW51c2VkIChgPGEgaHJlZj1gIGFuZCBgPGltZyBzcmM9YCBzYW5pdGl6ZSB0aGVpciB1cmxzIGFuZCBkb24ndCBjb25zdGl0dXRlIGFuIFNDRSBjb250ZXh0LiB8XHJcbiAqIHwgYCRzY2UuUkVTT1VSQ0VfVVJMYCB8IEZvciBVUkxzIHRoYXQgYXJlIG5vdCBvbmx5IHNhZmUgdG8gZm9sbG93IGFzIGxpbmtzLCBidXQgd2hvc2UgY29udGVudHMgYXJlIGFsc28gc2FmZSB0byBpbmNsdWRlIGluIHlvdXIgYXBwbGljYXRpb24uICBFeGFtcGxlcyBpbmNsdWRlIGBuZy1pbmNsdWRlYCwgYHNyY2AgLyBgbmdTcmNgIGJpbmRpbmdzIGZvciB0YWdzIG90aGVyIHRoYW4gYElNR2AgKGUuZy4gYElGUkFNRWAsIGBPQkpFQ1RgLCBldGMuKSAgPGJyPjxicj5Ob3RlIHRoYXQgYCRzY2UuUkVTT1VSQ0VfVVJMYCBtYWtlcyBhIHN0cm9uZ2VyIHN0YXRlbWVudCBhYm91dCB0aGUgVVJMIHRoYW4gYCRzY2UuVVJMYCBkb2VzIGFuZCB0aGVyZWZvcmUgY29udGV4dHMgcmVxdWlyaW5nIHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5SRVNPVVJDRV9VUkxgIGNhbiBiZSB1c2VkIGFueXdoZXJlIHRoYXQgdmFsdWVzIHRydXN0ZWQgZm9yIGAkc2NlLlVSTGAgYXJlIHJlcXVpcmVkLiB8XHJcbiAqIHwgYCRzY2UuSlNgICAgICAgICAgICB8IEZvciBKYXZhU2NyaXB0IHRoYXQgaXMgc2FmZSB0byBleGVjdXRlIGluIHlvdXIgYXBwbGljYXRpb24ncyBjb250ZXh0LiAgQ3VycmVudGx5IHVudXNlZC4gIEZlZWwgZnJlZSB0byB1c2UgaXQgaW4geW91ciBvd24gZGlyZWN0aXZlcy4gfFxyXG4gKlxyXG4gKiAjIyBGb3JtYXQgb2YgaXRlbXMgaW4ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHJlc291cmNlVXJsV2hpdGVsaXN0fS97QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgQmxhY2tsaXN0fSA8YSBuYW1lPVwicmVzb3VyY2VVcmxQYXR0ZXJuSXRlbVwiPjwvYT5cclxuICpcclxuICogIEVhY2ggZWxlbWVudCBpbiB0aGVzZSBhcnJheXMgbXVzdCBiZSBvbmUgb2YgdGhlIGZvbGxvd2luZzpcclxuICpcclxuICogIC0gKionc2VsZicqKlxyXG4gKiAgICAtIFRoZSBzcGVjaWFsICoqc3RyaW5nKiosIGAnc2VsZidgLCBjYW4gYmUgdXNlZCB0byBtYXRjaCBhZ2FpbnN0IGFsbCBVUkxzIG9mIHRoZSAqKnNhbWVcclxuICogICAgICBkb21haW4qKiBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQgdXNpbmcgdGhlICoqc2FtZSBwcm90b2NvbCoqLlxyXG4gKiAgLSAqKlN0cmluZyoqIChleGNlcHQgdGhlIHNwZWNpYWwgdmFsdWUgYCdzZWxmJ2ApXHJcbiAqICAgIC0gVGhlIHN0cmluZyBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGZ1bGwgKm5vcm1hbGl6ZWQgLyBhYnNvbHV0ZSBVUkwqIG9mIHRoZSByZXNvdXJjZVxyXG4gKiAgICAgIGJlaW5nIHRlc3RlZCAoc3Vic3RyaW5nIG1hdGNoZXMgYXJlIG5vdCBnb29kIGVub3VnaC4pXHJcbiAqICAgIC0gVGhlcmUgYXJlIGV4YWN0bHkgKip0d28gd2lsZGNhcmQgc2VxdWVuY2VzKiogLSBgKmAgYW5kIGAqKmAuICBBbGwgb3RoZXIgY2hhcmFjdGVyc1xyXG4gKiAgICAgIG1hdGNoIHRoZW1zZWx2ZXMuXHJcbiAqICAgIC0gYCpgOiBtYXRjaGVzIHplcm8gb3IgbW9yZSBvY2N1cnJlbmNlcyBvZiBhbnkgY2hhcmFjdGVyIG90aGVyIHRoYW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgNlxyXG4gKiAgICAgIGNoYXJhY3RlcnM6ICdgOmAnLCAnYC9gJywgJ2AuYCcsICdgP2AnLCAnYCZgJyBhbmQgJzsnLiAgSXQncyBhIHVzZWZ1bCB3aWxkY2FyZCBmb3IgdXNlXHJcbiAqICAgICAgaW4gYSB3aGl0ZWxpc3QuXHJcbiAqICAgIC0gYCoqYDogbWF0Y2hlcyB6ZXJvIG9yIG1vcmUgb2NjdXJyZW5jZXMgb2YgKmFueSogY2hhcmFjdGVyLiAgQXMgc3VjaCwgaXQncyBub3RcclxuICogICAgICBub3QgYXBwcm9wcmlhdGUgdG8gdXNlIGluIGZvciBhIHNjaGVtZSwgZG9tYWluLCBldGMuIGFzIGl0IHdvdWxkIG1hdGNoIHRvbyBtdWNoLiAgKGUuZy5cclxuICogICAgICBodHRwOi8vKiouZXhhbXBsZS5jb20vIHdvdWxkIG1hdGNoIGh0dHA6Ly9ldmlsLmNvbS8/aWdub3JlPS5leGFtcGxlLmNvbS8gYW5kIHRoYXQgbWlnaHRcclxuICogICAgICBub3QgaGF2ZSBiZWVuIHRoZSBpbnRlbnRpb24uKSAgSXRzIHVzYWdlIGF0IHRoZSB2ZXJ5IGVuZCBvZiB0aGUgcGF0aCBpcyBvay4gIChlLmcuXHJcbiAqICAgICAgaHR0cDovL2Zvby5leGFtcGxlLmNvbS90ZW1wbGF0ZXMvKiopLlxyXG4gKiAgLSAqKlJlZ0V4cCoqICgqc2VlIGNhdmVhdCBiZWxvdyopXHJcbiAqICAgIC0gKkNhdmVhdCo6ICBXaGlsZSByZWd1bGFyIGV4cHJlc3Npb25zIGFyZSBwb3dlcmZ1bCBhbmQgb2ZmZXIgZ3JlYXQgZmxleGliaWxpdHksICB0aGVpciBzeW50YXhcclxuICogICAgICAoYW5kIGFsbCB0aGUgaW5ldml0YWJsZSBlc2NhcGluZykgbWFrZXMgdGhlbSAqaGFyZGVyIHRvIG1haW50YWluKi4gIEl0J3MgZWFzeSB0b1xyXG4gKiAgICAgIGFjY2lkZW50YWxseSBpbnRyb2R1Y2UgYSBidWcgd2hlbiBvbmUgdXBkYXRlcyBhIGNvbXBsZXggZXhwcmVzc2lvbiAoaW1obywgYWxsIHJlZ2V4ZXMgc2hvdWxkXHJcbiAqICAgICAgaGF2ZSBnb29kIHRlc3QgY292ZXJhZ2UuKS4gIEZvciBpbnN0YW5jZSwgdGhlIHVzZSBvZiBgLmAgaW4gdGhlIHJlZ2V4IGlzIGNvcnJlY3Qgb25seSBpbiBhXHJcbiAqICAgICAgc21hbGwgbnVtYmVyIG9mIGNhc2VzLiAgQSBgLmAgY2hhcmFjdGVyIGluIHRoZSByZWdleCB1c2VkIHdoZW4gbWF0Y2hpbmcgdGhlIHNjaGVtZSBvciBhXHJcbiAqICAgICAgc3ViZG9tYWluIGNvdWxkIGJlIG1hdGNoZWQgYWdhaW5zdCBhIGA6YCBvciBsaXRlcmFsIGAuYCB0aGF0IHdhcyBsaWtlbHkgbm90IGludGVuZGVkLiAgIEl0XHJcbiAqICAgICAgaXMgaGlnaGx5IHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgc3RyaW5nIHBhdHRlcm5zIGFuZCBvbmx5IGZhbGwgYmFjayB0byByZWd1bGFyIGV4cHJlc3Npb25zXHJcbiAqICAgICAgaWYgdGhleSBhcyBhIGxhc3QgcmVzb3J0LlxyXG4gKiAgICAtIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBSZWdFeHAgKGkuZS4gbm90IGEgc3RyaW5nLikgIEl0IGlzXHJcbiAqICAgICAgbWF0Y2hlZCBhZ2FpbnN0IHRoZSAqKmVudGlyZSoqICpub3JtYWxpemVkIC8gYWJzb2x1dGUgVVJMKiBvZiB0aGUgcmVzb3VyY2UgYmVpbmcgdGVzdGVkXHJcbiAqICAgICAgKGV2ZW4gd2hlbiB0aGUgUmVnRXhwIGRpZCBub3QgaGF2ZSB0aGUgYF5gIGFuZCBgJGAgY29kZXMuKSAgSW4gYWRkaXRpb24sIGFueSBmbGFnc1xyXG4gKiAgICAgIHByZXNlbnQgb24gdGhlIFJlZ0V4cCAoc3VjaCBhcyBtdWx0aWxpbmUsIGdsb2JhbCwgaWdub3JlQ2FzZSkgYXJlIGlnbm9yZWQuXHJcbiAqICAgIC0gSWYgeW91IGFyZSBnZW5lcmF0aW5nIHlvdXIgSmF2YVNjcmlwdCBmcm9tIHNvbWUgb3RoZXIgdGVtcGxhdGluZyBlbmdpbmUgKG5vdFxyXG4gKiAgICAgIHJlY29tbWVuZGVkLCBlLmcuIGluIGlzc3VlIFsjNDAwNl0oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvNDAwNikpLFxyXG4gKiAgICAgIHJlbWVtYmVyIHRvIGVzY2FwZSB5b3VyIHJlZ3VsYXIgZXhwcmVzc2lvbiAoYW5kIGJlIGF3YXJlIHRoYXQgeW91IG1pZ2h0IG5lZWQgbW9yZSB0aGFuXHJcbiAqICAgICAgb25lIGxldmVsIG9mIGVzY2FwaW5nIGRlcGVuZGluZyBvbiB5b3VyIHRlbXBsYXRpbmcgZW5naW5lIGFuZCB0aGUgd2F5IHlvdSBpbnRlcnBvbGF0ZWRcclxuICogICAgICB0aGUgdmFsdWUuKSAgRG8gbWFrZSB1c2Ugb2YgeW91ciBwbGF0Zm9ybSdzIGVzY2FwaW5nIG1lY2hhbmlzbSBhcyBpdCBtaWdodCBiZSBnb29kXHJcbiAqICAgICAgZW5vdWdoIGJlZm9yZSBjb2RpbmcgeW91ciBvd24uICBlLmcuIFJ1YnkgaGFzXHJcbiAqICAgICAgW1JlZ2V4cC5lc2NhcGUoc3RyKV0oaHR0cDovL3d3dy5ydWJ5LWRvYy5vcmcvY29yZS0yLjAuMC9SZWdleHAuaHRtbCNtZXRob2QtYy1lc2NhcGUpXHJcbiAqICAgICAgYW5kIFB5dGhvbiBoYXMgW3JlLmVzY2FwZV0oaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3JlLmh0bWwjcmUuZXNjYXBlKS5cclxuICogICAgICBKYXZhc2NyaXB0IGxhY2tzIGEgc2ltaWxhciBidWlsdCBpbiBmdW5jdGlvbiBmb3IgZXNjYXBpbmcuICBUYWtlIGEgbG9vayBhdCBHb29nbGVcclxuICogICAgICBDbG9zdXJlIGxpYnJhcnkncyBbZ29vZy5zdHJpbmcucmVnRXhwRXNjYXBlKHMpXShcclxuICogICAgICBodHRwOi8vZG9jcy5jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vZ2l0L2Nsb3N1cmVfZ29vZ19zdHJpbmdfc3RyaW5nLmpzLnNvdXJjZS5odG1sI2xpbmU5NjIpLlxyXG4gKlxyXG4gKiBSZWZlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIgJHNjZURlbGVnYXRlUHJvdmlkZXJ9IGZvciBhbiBleGFtcGxlLlxyXG4gKlxyXG4gKiAjIyBTaG93IG1lIGFuIGV4YW1wbGUgdXNpbmcgU0NFLlxyXG4gKlxyXG4gKiA8ZXhhbXBsZSBtb2R1bGU9XCJteVNjZUFwcFwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCI+XHJcbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQXBwQ29udHJvbGxlciBhcyBteUN0cmxcIj5cclxuICogICAgIDxpIG5nLWJpbmQtaHRtbD1cIm15Q3RybC5leHBsaWNpdGx5VHJ1c3RlZEh0bWxcIiBpZD1cImV4cGxpY2l0bHlUcnVzdGVkSHRtbFwiPjwvaT48YnI+PGJyPlxyXG4gKiAgICAgPGI+VXNlciBjb21tZW50czwvYj48YnI+XHJcbiAqICAgICBCeSBkZWZhdWx0LCBIVE1MIHRoYXQgaXNuJ3QgZXhwbGljaXRseSB0cnVzdGVkIChlLmcuIEFsaWNlJ3MgY29tbWVudCkgaXMgc2FuaXRpemVkIHdoZW5cclxuICogICAgICRzYW5pdGl6ZSBpcyBhdmFpbGFibGUuICBJZiAkc2FuaXRpemUgaXNuJ3QgYXZhaWxhYmxlLCB0aGlzIHJlc3VsdHMgaW4gYW4gZXJyb3IgaW5zdGVhZCBvZiBhblxyXG4gKiAgICAgZXhwbG9pdC5cclxuICogICAgIDxkaXYgY2xhc3M9XCJ3ZWxsXCI+XHJcbiAqICAgICAgIDxkaXYgbmctcmVwZWF0PVwidXNlckNvbW1lbnQgaW4gbXlDdHJsLnVzZXJDb21tZW50c1wiPlxyXG4gKiAgICAgICAgIDxiPnt7dXNlckNvbW1lbnQubmFtZX19PC9iPjpcclxuICogICAgICAgICA8c3BhbiBuZy1iaW5kLWh0bWw9XCJ1c2VyQ29tbWVudC5odG1sQ29tbWVudFwiIGNsYXNzPVwiaHRtbENvbW1lbnRcIj48L3NwYW4+XHJcbiAqICAgICAgICAgPGJyPlxyXG4gKiAgICAgICA8L2Rpdj5cclxuICogICAgIDwvZGl2PlxyXG4gKiAgIDwvZGl2PlxyXG4gKiA8L2ZpbGU+XHJcbiAqXHJcbiAqIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICogICBhbmd1bGFyLm1vZHVsZSgnbXlTY2VBcHAnLCBbJ25nU2FuaXRpemUnXSlcclxuICogICAgIC5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgWyckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsICckc2NlJyxcclxuICogICAgICAgZnVuY3Rpb24oJGh0dHAsICR0ZW1wbGF0ZUNhY2hlLCAkc2NlKSB7XHJcbiAqICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gKiAgICAgICAgICRodHRwLmdldChcInRlc3RfZGF0YS5qc29uXCIsIHtjYWNoZTogJHRlbXBsYXRlQ2FjaGV9KS5zdWNjZXNzKGZ1bmN0aW9uKHVzZXJDb21tZW50cykge1xyXG4gKiAgICAgICAgICAgc2VsZi51c2VyQ29tbWVudHMgPSB1c2VyQ29tbWVudHM7XHJcbiAqICAgICAgICAgfSk7XHJcbiAqICAgICAgICAgc2VsZi5leHBsaWNpdGx5VHJ1c3RlZEh0bWwgPSAkc2NlLnRydXN0QXNIdG1sKFxyXG4gKiAgICAgICAgICAgICAnPHNwYW4gb25tb3VzZW92ZXI9XCJ0aGlzLnRleHRDb250ZW50PSZxdW90O0V4cGxpY2l0bHkgdHJ1c3RlZCBIVE1MIGJ5cGFzc2VzICcgK1xyXG4gKiAgICAgICAgICAgICAnc2FuaXRpemF0aW9uLiZxdW90O1wiPkhvdmVyIG92ZXIgdGhpcyB0ZXh0Ljwvc3Bhbj4nKTtcclxuICogICAgICAgfV0pO1xyXG4gKiA8L2ZpbGU+XHJcbiAqXHJcbiAqIDxmaWxlIG5hbWU9XCJ0ZXN0X2RhdGEuanNvblwiPlxyXG4gKiBbXHJcbiAqICAgeyBcIm5hbWVcIjogXCJBbGljZVwiLFxyXG4gKiAgICAgXCJodG1sQ29tbWVudFwiOlxyXG4gKiAgICAgICAgIFwiPHNwYW4gb25tb3VzZW92ZXI9J3RoaXMudGV4dENvbnRlbnQ9XFxcIlBXTjNEIVxcXCInPklzIDxpPmFueW9uZTwvaT4gcmVhZGluZyB0aGlzPzwvc3Bhbj5cIlxyXG4gKiAgIH0sXHJcbiAqICAgeyBcIm5hbWVcIjogXCJCb2JcIixcclxuICogICAgIFwiaHRtbENvbW1lbnRcIjogXCI8aT5ZZXMhPC9pPiAgQW0gSSB0aGUgb25seSBvdGhlciBvbmU/XCJcclxuICogICB9XHJcbiAqIF1cclxuICogPC9maWxlPlxyXG4gKlxyXG4gKiA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAqICAgZGVzY3JpYmUoJ1NDRSBkb2MgZGVtbycsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSB1bnRydXN0ZWQgdmFsdWVzJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJy5odG1sQ29tbWVudCcpKS5maXJzdCgpLmdldElubmVySHRtbCgpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJzxzcGFuPklzIDxpPmFueW9uZTwvaT4gcmVhZGluZyB0aGlzPzwvc3Bhbj4nKTtcclxuICogICAgIH0pO1xyXG4gKlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBOT1Qgc2FuaXRpemUgZXhwbGljaXRseSB0cnVzdGVkIHZhbHVlcycsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZXhwbGljaXRseVRydXN0ZWRIdG1sJykpLmdldElubmVySHRtbCgpKS50b0JlKFxyXG4gKiAgICAgICAgICAgJzxzcGFuIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD0mcXVvdDtFeHBsaWNpdGx5IHRydXN0ZWQgSFRNTCBieXBhc3NlcyAnICtcclxuICogICAgICAgICAgICdzYW5pdGl6YXRpb24uJnF1b3Q7XCI+SG92ZXIgb3ZlciB0aGlzIHRleHQuPC9zcGFuPicpO1xyXG4gKiAgICAgfSk7XHJcbiAqICAgfSk7XHJcbiAqIDwvZmlsZT5cclxuICogPC9leGFtcGxlPlxyXG4gKlxyXG4gKlxyXG4gKlxyXG4gKiAjIyBDYW4gSSBkaXNhYmxlIFNDRSBjb21wbGV0ZWx5P1xyXG4gKlxyXG4gKiBZZXMsIHlvdSBjYW4uICBIb3dldmVyLCB0aGlzIGlzIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkLiAgU0NFIGdpdmVzIHlvdSBhIGxvdCBvZiBzZWN1cml0eSBiZW5lZml0c1xyXG4gKiBmb3IgbGl0dGxlIGNvZGluZyBvdmVyaGVhZC4gIEl0IHdpbGwgYmUgbXVjaCBoYXJkZXIgdG8gdGFrZSBhbiBTQ0UgZGlzYWJsZWQgYXBwbGljYXRpb24gYW5kXHJcbiAqIGVpdGhlciBzZWN1cmUgaXQgb24geW91ciBvd24gb3IgZW5hYmxlIFNDRSBhdCBhIGxhdGVyIHN0YWdlLiAgSXQgbWlnaHQgbWFrZSBzZW5zZSB0byBkaXNhYmxlIFNDRVxyXG4gKiBmb3IgY2FzZXMgd2hlcmUgeW91IGhhdmUgYSBsb3Qgb2YgZXhpc3RpbmcgY29kZSB0aGF0IHdhcyB3cml0dGVuIGJlZm9yZSBTQ0Ugd2FzIGludHJvZHVjZWQgYW5kXHJcbiAqIHlvdSdyZSBtaWdyYXRpbmcgdGhlbSBhIG1vZHVsZSBhdCBhIHRpbWUuXHJcbiAqXHJcbiAqIFRoYXQgc2FpZCwgaGVyZSdzIGhvdyB5b3UgY2FuIGNvbXBsZXRlbHkgZGlzYWJsZSBTQ0U6XHJcbiAqXHJcbiAqIGBgYFxyXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHBXaXRoU2NlRGlzYWJsZWRteUFwcCcsIFtdKS5jb25maWcoZnVuY3Rpb24oJHNjZVByb3ZpZGVyKSB7XHJcbiAqICAgLy8gQ29tcGxldGVseSBkaXNhYmxlIFNDRS4gIEZvciBkZW1vbnN0cmF0aW9uIHB1cnBvc2VzIG9ubHkhXHJcbiAqICAgLy8gRG8gbm90IHVzZSBpbiBuZXcgcHJvamVjdHMuXHJcbiAqICAgJHNjZVByb3ZpZGVyLmVuYWJsZWQoZmFsc2UpO1xyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqL1xyXG4vKiBqc2hpbnQgbWF4bGVuOiAxMDAgKi9cclxuXHJcbmZ1bmN0aW9uICRTY2VQcm92aWRlcigpIHtcclxuICB2YXIgZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkc2NlUHJvdmlkZXIjZW5hYmxlZFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiBwcm92aWRlZCwgdGhlbiBlbmFibGVzL2Rpc2FibGVzIFNDRS5cclxuICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIFNDRSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBFbmFibGVzL2Rpc2FibGVzIFNDRSBhbmQgcmV0dXJucyB0aGUgY3VycmVudCB2YWx1ZS5cclxuICAgKi9cclxuICB0aGlzLmVuYWJsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgIGVuYWJsZWQgPSAhIXZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVuYWJsZWQ7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qIERlc2lnbiBub3RlcyBvbiB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBmb3IgU0NFLlxyXG4gICAqXHJcbiAgICogVGhlIEFQSSBjb250cmFjdCBmb3IgdGhlIFNDRSBkZWxlZ2F0ZVxyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiBUaGUgU0NFIGRlbGVnYXRlIG9iamVjdCBtdXN0IHByb3ZpZGUgdGhlIGZvbGxvd2luZyAzIG1ldGhvZHM6XHJcbiAgICpcclxuICAgKiAtIHRydXN0QXMoY29udGV4dEVudW0sIHZhbHVlKVxyXG4gICAqICAgICBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHRlbGwgdGhlIFNDRSBzZXJ2aWNlIHRoYXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIE9LIHRvIHVzZSBpbiB0aGVcclxuICAgKiAgICAgY29udGV4dHMgc3BlY2lmaWVkIGJ5IGNvbnRleHRFbnVtLiAgSXQgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBhY2NlcHRlZCBieVxyXG4gICAqICAgICBnZXRUcnVzdGVkKCkgZm9yIGEgY29tcGF0aWJsZSBjb250ZXh0RW51bSBhbmQgcmV0dXJuIHRoaXMgdmFsdWUuXHJcbiAgICpcclxuICAgKiAtIHZhbHVlT2YodmFsdWUpXHJcbiAgICogICAgIEZvciB2YWx1ZXMgdGhhdCB3ZXJlIG5vdCBwcm9kdWNlZCBieSB0cnVzdEFzKCksIHJldHVybiB0aGVtIGFzIGlzLiAgRm9yIHZhbHVlcyB0aGF0IHdlcmVcclxuICAgKiAgICAgcHJvZHVjZWQgYnkgdHJ1c3RBcygpLCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgaW5wdXQgdmFsdWUgdG8gdHJ1c3RBcy4gIEJhc2ljYWxseSwgaWZcclxuICAgKiAgICAgdHJ1c3RBcyBpcyB3cmFwcGluZyB0aGUgZ2l2ZW4gdmFsdWVzIGludG8gc29tZSB0eXBlLCB0aGlzIG9wZXJhdGlvbiB1bndyYXBzIGl0IHdoZW4gZ2l2ZW5cclxuICAgKiAgICAgc3VjaCBhIHZhbHVlLlxyXG4gICAqXHJcbiAgICogLSBnZXRUcnVzdGVkKGNvbnRleHRFbnVtLCB2YWx1ZSlcclxuICAgKiAgICAgVGhpcyBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIHRoZSBhIHZhbHVlIHRoYXQgaXMgc2FmZSB0byB1c2UgaW4gdGhlIGNvbnRleHQgc3BlY2lmaWVkIGJ5XHJcbiAgICogICAgIGNvbnRleHRFbnVtIG9yIHRocm93IGFuZCBleGNlcHRpb24gb3RoZXJ3aXNlLlxyXG4gICAqXHJcbiAgICogTk9URTogVGhpcyBjb250cmFjdCBkZWxpYmVyYXRlbHkgZG9lcyBOT1Qgc3RhdGUgdGhhdCB2YWx1ZXMgcmV0dXJuZWQgYnkgdHJ1c3RBcygpIG11c3QgYmVcclxuICAgKiBvcGFxdWUgb3Igd3JhcHBlZCBpbiBzb21lIGhvbGRlciBvYmplY3QuICBUaGF0IGhhcHBlbnMgdG8gYmUgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsLiAgRm9yXHJcbiAgICogaW5zdGFuY2UsIGFuIGltcGxlbWVudGF0aW9uIGNvdWxkIG1haW50YWluIGEgcmVnaXN0cnkgb2YgYWxsIHRydXN0ZWQgb2JqZWN0cyBieSBjb250ZXh0LiAgSW5cclxuICAgKiBzdWNoIGEgY2FzZSwgdHJ1c3RBcygpIHdvdWxkIHJldHVybiB0aGUgc2FtZSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIGluLiAgZ2V0VHJ1c3RlZCgpIHdvdWxkXHJcbiAgICogcmV0dXJuIHRoZSBzYW1lIG9iamVjdCBwYXNzZWQgaW4gaWYgaXQgd2FzIGZvdW5kIGluIHRoZSByZWdpc3RyeSB1bmRlciBhIGNvbXBhdGlibGUgY29udGV4dCBvclxyXG4gICAqIHRocm93IGFuIGV4Y2VwdGlvbiBvdGhlcndpc2UuICBBbiBpbXBsZW1lbnRhdGlvbiBtaWdodCBvbmx5IHdyYXAgdmFsdWVzIHNvbWUgb2YgdGhlIHRpbWUgYmFzZWRcclxuICAgKiBvbiBzb21lIGNyaXRlcmlhLiAgZ2V0VHJ1c3RlZCgpIG1pZ2h0IHJldHVybiBhIHZhbHVlIGFuZCBub3QgdGhyb3cgYW4gZXhjZXB0aW9uIGZvciBzcGVjaWFsXHJcbiAgICogY29uc3RhbnRzIG9yIG9iamVjdHMgZXZlbiBpZiBub3Qgd3JhcHBlZC4gIEFsbCBzdWNoIGltcGxlbWVudGF0aW9ucyBmdWxmaWxsIHRoaXMgY29udHJhY3QuXHJcbiAgICpcclxuICAgKlxyXG4gICAqIEEgbm90ZSBvbiB0aGUgaW5oZXJpdGFuY2UgbW9kZWwgZm9yIFNDRSBjb250ZXh0c1xyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAqIEkndmUgdXNlZCBpbmhlcml0YW5jZSBhbmQgbWFkZSBSRVNPVVJDRV9VUkwgd3JhcHBlZCB0eXBlcyBhIHN1YnR5cGUgb2YgVVJMIHdyYXBwZWQgdHlwZXMuICBUaGlzXHJcbiAgICogaXMgcHVyZWx5IGFuIGltcGxlbWVudGF0aW9uIGRldGFpbHMuXHJcbiAgICpcclxuICAgKiBUaGUgY29udHJhY3QgaXMgc2ltcGx5IHRoaXM6XHJcbiAgICpcclxuICAgKiAgICAgZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpIHN1Y2NlZWRpbmcgaW1wbGllcyB0aGF0IGdldFRydXN0ZWQoJHNjZS5VUkwsIHZhbHVlKVxyXG4gICAqICAgICB3aWxsIGFsc28gc3VjY2VlZC5cclxuICAgKlxyXG4gICAqIEluaGVyaXRhbmNlIGhhcHBlbnMgdG8gY2FwdHVyZSB0aGlzIGluIGEgbmF0dXJhbCB3YXkuICBJbiBzb21lIGZ1dHVyZSwgd2VcclxuICAgKiBtYXkgbm90IHVzZSBpbmhlcml0YW5jZSBhbnltb3JlLiAgVGhhdCBpcyBPSyBiZWNhdXNlIG5vIGNvZGUgb3V0c2lkZSBvZlxyXG4gICAqIHNjZS5qcyBhbmQgc2NlU3BlY3MuanMgd291bGQgbmVlZCB0byBiZSBhd2FyZSBvZiB0aGlzIGRldGFpbC5cclxuICAgKi9cclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckcGFyc2UnLCAnJHNuaWZmZXInLCAnJHNjZURlbGVnYXRlJywgZnVuY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAkcGFyc2UsICAgJHNuaWZmZXIsICAgJHNjZURlbGVnYXRlKSB7XHJcbiAgICAvLyBQcmVyZXE6IEVuc3VyZSB0aGF0IHdlJ3JlIG5vdCBydW5uaW5nIGluIElFOCBxdWlya3MgbW9kZS4gIEluIHRoYXQgbW9kZSwgSUUgYWxsb3dzXHJcbiAgICAvLyB0aGUgXCJleHByZXNzaW9uKGphdmFzY3JpcHQgZXhwcmVzc2lvbilcIiBzeW50YXggd2hpY2ggaXMgaW5zZWN1cmUuXHJcbiAgICBpZiAoZW5hYmxlZCAmJiAkc25pZmZlci5tc2llICYmICRzbmlmZmVyLm1zaWVEb2N1bWVudE1vZGUgPCA4KSB7XHJcbiAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2llcXVpcmtzJyxcclxuICAgICAgICAnU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgZG9lcyBub3Qgc3VwcG9ydCBJbnRlcm5ldCBFeHBsb3JlciB2ZXJzaW9uIDwgOSBpbiBxdWlya3MgJyArXHJcbiAgICAgICAgJ21vZGUuICBZb3UgY2FuIGZpeCB0aGlzIGJ5IGFkZGluZyB0aGUgdGV4dCA8IWRvY3R5cGUgaHRtbD4gdG8gdGhlIHRvcCBvZiB5b3VyIEhUTUwgJyArXHJcbiAgICAgICAgJ2RvY3VtZW50LiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNjZSA9IHNoYWxsb3dDb3B5KFNDRV9DT05URVhUUyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI2lzRW5hYmxlZFxyXG4gICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIFNDRSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuICBJZiB5b3Ugd2FudCB0byBzZXQgdGhlIHZhbHVlLCB5b3VcclxuICAgICAqIGhhdmUgdG8gZG8gaXQgYXQgbW9kdWxlIGNvbmZpZyB0aW1lIG9uIHtAbGluayBuZy4kc2NlUHJvdmlkZXIgJHNjZVByb3ZpZGVyfS5cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgaWYgU0NFIGlzIGVuYWJsZWQuXHJcbiAgICAgKi9cclxuICAgIHNjZS5pc0VuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJldHVybiBlbmFibGVkO1xyXG4gICAgfTtcclxuICAgIHNjZS50cnVzdEFzID0gJHNjZURlbGVnYXRlLnRydXN0QXM7XHJcbiAgICBzY2UuZ2V0VHJ1c3RlZCA9ICRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkO1xyXG4gICAgc2NlLnZhbHVlT2YgPSAkc2NlRGVsZWdhdGUudmFsdWVPZjtcclxuXHJcbiAgICBpZiAoIWVuYWJsZWQpIHtcclxuICAgICAgc2NlLnRydXN0QXMgPSBzY2UuZ2V0VHJ1c3RlZCA9IGZ1bmN0aW9uKHR5cGUsIHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcclxuICAgICAgc2NlLnZhbHVlT2YgPSBpZGVudGl0eTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udmVydHMgQW5ndWxhciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpbnRvIGEgZnVuY3Rpb24uICBUaGlzIGlzIGxpa2Uge0BsaW5rXHJcbiAgICAgKiBuZy4kcGFyc2UgJHBhcnNlfSBhbmQgaXMgaWRlbnRpY2FsIHdoZW4gdGhlIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIGNvbnN0YW50LiAgT3RoZXJ3aXNlLCBpdFxyXG4gICAgICogd3JhcHMgdGhlIGV4cHJlc3Npb24gaW4gYSBjYWxsIHRvIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkKCp0eXBlKixcclxuICAgICAqICpyZXN1bHQqKX1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUga2luZCBvZiBTQ0UgY29udGV4dCBpbiB3aGljaCB0aGlzIHJlc3VsdCB3aWxsIGJlIHVzZWQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxyXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcclxuICAgICAqXHJcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXHJcbiAgICAgKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cclxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cclxuICAgICAqICAgICAgYGNvbnRleHRgLlxyXG4gICAgICovXHJcbiAgICBzY2UucGFyc2VBcyA9IGZ1bmN0aW9uIHNjZVBhcnNlQXModHlwZSwgZXhwcikge1xyXG4gICAgICB2YXIgcGFyc2VkID0gJHBhcnNlKGV4cHIpO1xyXG4gICAgICBpZiAocGFyc2VkLmxpdGVyYWwgJiYgcGFyc2VkLmNvbnN0YW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJHBhcnNlKGV4cHIsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHNjZS5nZXRUcnVzdGVkKHR5cGUsIHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogRGVsZWdhdGVzIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfS4gIEFzIHN1Y2gsXHJcbiAgICAgKiByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGlzIHRydXN0ZWQgYnkgYW5ndWxhciBmb3IgdXNlIGluIHNwZWNpZmllZCBzdHJpY3QgY29udGV4dHVhbFxyXG4gICAgICogZXNjYXBpbmcgY29udGV4dHMgKHN1Y2ggYXMgbmctYmluZC1odG1sLCBuZy1pbmNsdWRlLCBhbnkgc3JjIGF0dHJpYnV0ZVxyXG4gICAgICogaW50ZXJwb2xhdGlvbiwgYW55IGRvbSBldmVudCBiaW5kaW5nIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIHN1Y2ggYXMgZm9yIG9uY2xpY2ssICBldGMuKVxyXG4gICAgICogdGhhdCB1c2VzIHRoZSBwcm92aWRlZCB2YWx1ZS4gIFNlZSAqIHtAbGluayBuZy4kc2NlICRzY2V9IGZvciBlbmFibGluZyBzdHJpY3QgY29udGV4dHVhbFxyXG4gICAgICogZXNjYXBpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHNhZmUgZm9yIHVzZS4gIGUuZy4gdXJsLFxyXG4gICAgICogICByZXNvdXJjZV91cmwsIGh0bWwsIGpzIGFuZCBjc3MuXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0aGF0IHRoYXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC9zYWZlLlxyXG4gICAgICogQHJldHVybnMgeyp9IEEgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB0byBzdGFuZCBpbiBmb3IgdGhlIHByb3ZpZGVkIGB2YWx1ZWAgaW4gcGxhY2VzXHJcbiAgICAgKiB3aGVyZSBBbmd1bGFyIGV4cGVjdHMgYSAkc2NlLnRydXN0QXMoKSByZXR1cm4gdmFsdWUuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc0h0bWxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzSHRtbCh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5IVE1MLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRydXN0QXMuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gQW4gb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkSHRtbFxyXG4gICAgICogICAgICRzY2UuZ2V0VHJ1c3RlZEh0bWwodmFsdWUpfSB0byBvYnRhaW4gdGhlIG9yaWdpbmFsIHZhbHVlLiAgKHByaXZpbGVnZWQgZGlyZWN0aXZlc1xyXG4gICAgICogICAgIG9ubHkgYWNjZXB0IGV4cHJlc3Npb25zIHRoYXQgYXJlIGVpdGhlciBsaXRlcmFsIGNvbnN0YW50cyBvciBhcmUgdGhlXHJcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlIG9mIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfS4pXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1VybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuVVJMLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRydXN0QXMuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gQW4gb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkVXJsXHJcbiAgICAgKiAgICAgJHNjZS5nZXRUcnVzdGVkVXJsKHZhbHVlKX0gdG8gb2J0YWluIHRoZSBvcmlnaW5hbCB2YWx1ZS4gIChwcml2aWxlZ2VkIGRpcmVjdGl2ZXNcclxuICAgICAqICAgICBvbmx5IGFjY2VwdCBleHByZXNzaW9ucyB0aGF0IGFyZSBlaXRoZXIgbGl0ZXJhbCBjb25zdGFudHMgb3IgYXJlIHRoZVxyXG4gICAgICogICAgIHJldHVybiB2YWx1ZSBvZiB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc30uKVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNSZXNvdXJjZVVybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gdHJ1c3RBcy5cclxuICAgICAqIEByZXR1cm5zIHsqfSBBbiBvYmplY3QgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxyXG4gICAgICogICAgICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHZhbHVlKX0gdG8gb2J0YWluIHRoZSBvcmlnaW5hbCB2YWx1ZS4gIChwcml2aWxlZ2VkIGRpcmVjdGl2ZXNcclxuICAgICAqICAgICBvbmx5IGFjY2VwdCBleHByZXNzaW9ucyB0aGF0IGFyZSBlaXRoZXIgbGl0ZXJhbCBjb25zdGFudHMgb3IgYXJlIHRoZSByZXR1cm5cclxuICAgICAqICAgICB2YWx1ZSBvZiB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc30uKVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNKc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNKcyh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5KUywgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB0cnVzdEFzLlxyXG4gICAgICogQHJldHVybnMgeyp9IEFuIG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8ge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZEpzXHJcbiAgICAgKiAgICAgJHNjZS5nZXRUcnVzdGVkSnModmFsdWUpfSB0byBvYnRhaW4gdGhlIG9yaWdpbmFsIHZhbHVlLiAgKHByaXZpbGVnZWQgZGlyZWN0aXZlc1xyXG4gICAgICogICAgIG9ubHkgYWNjZXB0IGV4cHJlc3Npb25zIHRoYXQgYXJlIGVpdGhlciBsaXRlcmFsIGNvbnN0YW50cyBvciBhcmUgdGhlXHJcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlIG9mIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfS4pXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogRGVsZWdhdGVzIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWRgfS4gIEFzIHN1Y2gsXHJcbiAgICAgKiB0YWtlcyB0aGUgcmVzdWx0IG9mIGEge0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyBgJHNjZS50cnVzdEFzYH0oKSBjYWxsIGFuZCByZXR1cm5zIHRoZVxyXG4gICAgICogb3JpZ2luYWxseSBzdXBwbGllZCB2YWx1ZSBpZiB0aGUgcXVlcmllZCBjb250ZXh0IHR5cGUgaXMgYSBzdXBlcnR5cGUgb2YgdGhlIGNyZWF0ZWQgdHlwZS5cclxuICAgICAqIElmIHRoaXMgY29uZGl0aW9uIGlzbid0IHNhdGlzZmllZCwgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUga2luZCBvZiBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgdG8gYmUgdXNlZC5cclxuICAgICAqIEBwYXJhbSB7Kn0gbWF5YmVUcnVzdGVkIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzIGAkc2NlLnRydXN0QXNgfVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgY2FsbC5cclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgdmFsdWUgdGhlIHdhcyBvcmlnaW5hbGx5IHByb3ZpZGVkIHRvXHJcbiAgICAgKiAgICAgICAgICAgICAge0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyBgJHNjZS50cnVzdEFzYH0gaWYgdmFsaWQgaW4gdGhpcyBjb250ZXh0LlxyXG4gICAgICogICAgICAgICAgICAgIE90aGVyd2lzZSwgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkSHRtbFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRIdG1sKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkhUTUwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5IVE1MLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZENzc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRDc3ModmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFVybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZEpzXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZEpzKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkpTLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuSlMsIHZhbHVlKWBcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzSHRtbFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNIdG1sKGV4cHJlc3Npb24gc3RyaW5nKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2UgYCRzY2UucGFyc2VBcygkc2NlLkhUTUwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cclxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XHJcbiAgICAgKlxyXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xyXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXHJcbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXHJcbiAgICAgKiAgICAgIGBjb250ZXh0YC5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzQ3NzXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0Nzcyh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlIGAkc2NlLnBhcnNlQXMoJHNjZS5DU1MsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cclxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XHJcbiAgICAgKlxyXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xyXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXHJcbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXHJcbiAgICAgKiAgICAgIGBjb250ZXh0YC5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzVXJsXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc1VybCh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlIGAkc2NlLnBhcnNlQXMoJHNjZS5VUkwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cclxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XHJcbiAgICAgKlxyXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xyXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXHJcbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXHJcbiAgICAgKiAgICAgIGBjb250ZXh0YC5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzUmVzb3VyY2VVcmxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzUmVzb3VyY2VVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZSBgJHNjZS5wYXJzZUFzKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXHJcbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxyXG4gICAgICpcclxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcclxuICAgICAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxyXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxyXG4gICAgICogICAgICBgY29udGV4dGAuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc0pzXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0pzKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2UgYCRzY2UucGFyc2VBcygkc2NlLkpTLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXHJcbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxyXG4gICAgICpcclxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcclxuICAgICAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxyXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxyXG4gICAgICogICAgICBgY29udGV4dGAuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvLyBTaG9ydGhhbmQgZGVsZWdhdGlvbnMuXHJcbiAgICB2YXIgcGFyc2UgPSBzY2UucGFyc2VBcyxcclxuICAgICAgICBnZXRUcnVzdGVkID0gc2NlLmdldFRydXN0ZWQsXHJcbiAgICAgICAgdHJ1c3RBcyA9IHNjZS50cnVzdEFzO1xyXG5cclxuICAgIGZvckVhY2goU0NFX0NPTlRFWFRTLCBmdW5jdGlvbiAoZW51bVZhbHVlLCBuYW1lKSB7XHJcbiAgICAgIHZhciBsTmFtZSA9IGxvd2VyY2FzZShuYW1lKTtcclxuICAgICAgc2NlW2NhbWVsQ2FzZShcInBhcnNlX2FzX1wiICsgbE5hbWUpXSA9IGZ1bmN0aW9uIChleHByKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlKGVudW1WYWx1ZSwgZXhwcik7XHJcbiAgICAgIH07XHJcbiAgICAgIHNjZVtjYW1lbENhc2UoXCJnZXRfdHJ1c3RlZF9cIiArIGxOYW1lKV0gPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gZ2V0VHJ1c3RlZChlbnVtVmFsdWUsIHZhbHVlKTtcclxuICAgICAgfTtcclxuICAgICAgc2NlW2NhbWVsQ2FzZShcInRydXN0X2FzX1wiICsgbE5hbWUpXSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0cnVzdEFzKGVudW1WYWx1ZSwgdmFsdWUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNjZTtcclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBzZXJ2aWNlICEhIVxyXG4gKlxyXG4gKiBAbmFtZSAkc25pZmZlclxyXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xyXG4gKiBAcmVxdWlyZXMgJGRvY3VtZW50XHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaGlzdG9yeSBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgaHRtbDUgaGlzdG9yeSBhcGkgP1xyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhhc2hjaGFuZ2UgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IGhhc2hjaGFuZ2UgZXZlbnQgP1xyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHRyYW5zaXRpb25zIERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCBDU1MgdHJhbnNpdGlvbiBldmVudHMgP1xyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1hdGlvbnMgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IENTUyBhbmltYXRpb24gZXZlbnRzID9cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoaXMgaXMgdmVyeSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgdGVzdGluZyBicm93c2VyJ3MgZmVhdHVyZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiAkU25pZmZlclByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQpIHtcclxuICAgIHZhciBldmVudFN1cHBvcnQgPSB7fSxcclxuICAgICAgICBhbmRyb2lkID1cclxuICAgICAgICAgIGludCgoL2FuZHJvaWQgKFxcZCspLy5leGVjKGxvd2VyY2FzZSgoJHdpbmRvdy5uYXZpZ2F0b3IgfHwge30pLnVzZXJBZ2VudCkpIHx8IFtdKVsxXSksXHJcbiAgICAgICAgYm94ZWUgPSAvQm94ZWUvaS50ZXN0KCgkd2luZG93Lm5hdmlnYXRvciB8fCB7fSkudXNlckFnZW50KSxcclxuICAgICAgICBkb2N1bWVudCA9ICRkb2N1bWVudFswXSB8fCB7fSxcclxuICAgICAgICBkb2N1bWVudE1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGUsXHJcbiAgICAgICAgdmVuZG9yUHJlZml4LFxyXG4gICAgICAgIHZlbmRvclJlZ2V4ID0gL14oTW96fHdlYmtpdHxPfG1zKSg/PVtBLVpdKS8sXHJcbiAgICAgICAgYm9keVN0eWxlID0gZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LnN0eWxlLFxyXG4gICAgICAgIHRyYW5zaXRpb25zID0gZmFsc2UsXHJcbiAgICAgICAgYW5pbWF0aW9ucyA9IGZhbHNlLFxyXG4gICAgICAgIG1hdGNoO1xyXG5cclxuICAgIGlmIChib2R5U3R5bGUpIHtcclxuICAgICAgZm9yKHZhciBwcm9wIGluIGJvZHlTdHlsZSkge1xyXG4gICAgICAgIGlmKG1hdGNoID0gdmVuZG9yUmVnZXguZXhlYyhwcm9wKSkge1xyXG4gICAgICAgICAgdmVuZG9yUHJlZml4ID0gbWF0Y2hbMF07XHJcbiAgICAgICAgICB2ZW5kb3JQcmVmaXggPSB2ZW5kb3JQcmVmaXguc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyB2ZW5kb3JQcmVmaXguc3Vic3RyKDEpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZighdmVuZG9yUHJlZml4KSB7XHJcbiAgICAgICAgdmVuZG9yUHJlZml4ID0gKCdXZWJraXRPcGFjaXR5JyBpbiBib2R5U3R5bGUpICYmICd3ZWJraXQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0cmFuc2l0aW9ucyA9ICEhKCgndHJhbnNpdGlvbicgaW4gYm9keVN0eWxlKSB8fCAodmVuZG9yUHJlZml4ICsgJ1RyYW5zaXRpb24nIGluIGJvZHlTdHlsZSkpO1xyXG4gICAgICBhbmltYXRpb25zICA9ICEhKCgnYW5pbWF0aW9uJyBpbiBib2R5U3R5bGUpIHx8ICh2ZW5kb3JQcmVmaXggKyAnQW5pbWF0aW9uJyBpbiBib2R5U3R5bGUpKTtcclxuXHJcbiAgICAgIGlmIChhbmRyb2lkICYmICghdHJhbnNpdGlvbnN8fCFhbmltYXRpb25zKSkge1xyXG4gICAgICAgIHRyYW5zaXRpb25zID0gaXNTdHJpbmcoZG9jdW1lbnQuYm9keS5zdHlsZS53ZWJraXRUcmFuc2l0aW9uKTtcclxuICAgICAgICBhbmltYXRpb25zID0gaXNTdHJpbmcoZG9jdW1lbnQuYm9keS5zdHlsZS53ZWJraXRBbmltYXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIC8vIEFuZHJvaWQgaGFzIGhpc3RvcnkucHVzaFN0YXRlLCBidXQgaXQgZG9lcyBub3QgdXBkYXRlIGxvY2F0aW9uIGNvcnJlY3RseVxyXG4gICAgICAvLyBzbyBsZXQncyBub3QgdXNlIHRoZSBoaXN0b3J5IEFQSSBhdCBhbGwuXHJcbiAgICAgIC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9MTc0NzFcclxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTA0XHJcblxyXG4gICAgICAvLyBvbGRlciB3ZWJraXQgYnJvd3NlciAoNTMzLjkpIG9uIEJveGVlIGJveCBoYXMgZXhhY3RseSB0aGUgc2FtZSBwcm9ibGVtIGFzIEFuZHJvaWQgaGFzXHJcbiAgICAgIC8vIHNvIGxldCdzIG5vdCB1c2UgdGhlIGhpc3RvcnkgQVBJIGFsc29cclxuICAgICAgLy8gV2UgYXJlIHB1cnBvc2VmdWxseSB1c2luZyBgIShhbmRyb2lkIDwgNClgIHRvIGNvdmVyIHRoZSBjYXNlIHdoZW4gYGFuZHJvaWRgIGlzIHVuZGVmaW5lZFxyXG4gICAgICAvLyBqc2hpbnQgLVcwMThcclxuICAgICAgaGlzdG9yeTogISEoJHdpbmRvdy5oaXN0b3J5ICYmICR3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUgJiYgIShhbmRyb2lkIDwgNCkgJiYgIWJveGVlKSxcclxuICAgICAgLy8ganNoaW50ICtXMDE4XHJcbiAgICAgIGhhc2hjaGFuZ2U6ICdvbmhhc2hjaGFuZ2UnIGluICR3aW5kb3cgJiZcclxuICAgICAgICAgICAgICAgICAgLy8gSUU4IGNvbXBhdGlibGUgbW9kZSBsaWVzXHJcbiAgICAgICAgICAgICAgICAgICghZG9jdW1lbnRNb2RlIHx8IGRvY3VtZW50TW9kZSA+IDcpLFxyXG4gICAgICBoYXNFdmVudDogZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAvLyBJRTkgaW1wbGVtZW50cyAnaW5wdXQnIGV2ZW50IGl0J3Mgc28gZnViYXJlZCB0aGF0IHdlIHJhdGhlciBwcmV0ZW5kIHRoYXQgaXQgZG9lc24ndCBoYXZlXHJcbiAgICAgICAgLy8gaXQuIEluIHBhcnRpY3VsYXIgdGhlIGV2ZW50IGlzIG5vdCBmaXJlZCB3aGVuIGJhY2tzcGFjZSBvciBkZWxldGUga2V5IGFyZSBwcmVzc2VkIG9yXHJcbiAgICAgICAgLy8gd2hlbiBjdXQgb3BlcmF0aW9uIGlzIHBlcmZvcm1lZC5cclxuICAgICAgICBpZiAoZXZlbnQgPT0gJ2lucHV0JyAmJiBtc2llID09IDkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKGV2ZW50U3VwcG9ydFtldmVudF0pKSB7XHJcbiAgICAgICAgICB2YXIgZGl2RWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBldmVudFN1cHBvcnRbZXZlbnRdID0gJ29uJyArIGV2ZW50IGluIGRpdkVsbTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBldmVudFN1cHBvcnRbZXZlbnRdO1xyXG4gICAgICB9LFxyXG4gICAgICBjc3A6IGNzcCgpLFxyXG4gICAgICB2ZW5kb3JQcmVmaXg6IHZlbmRvclByZWZpeCxcclxuICAgICAgdHJhbnNpdGlvbnMgOiB0cmFuc2l0aW9ucyxcclxuICAgICAgYW5pbWF0aW9ucyA6IGFuaW1hdGlvbnMsXHJcbiAgICAgIGFuZHJvaWQ6IGFuZHJvaWQsXHJcbiAgICAgIG1zaWUgOiBtc2llLFxyXG4gICAgICBtc2llRG9jdW1lbnRNb2RlOiBkb2N1bWVudE1vZGVcclxuICAgIH07XHJcbiAgfV07XHJcbn1cclxuXHJcbnZhciAkY29tcGlsZU1pbkVyciA9IG1pbkVycignJGNvbXBpbGUnKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYCR0ZW1wbGF0ZVJlcXVlc3RgIHNlcnZpY2UgZG93bmxvYWRzIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZSB1c2luZyBgJGh0dHBgIGFuZCwgdXBvbiBzdWNjZXNzLFxyXG4gKiBzdG9yZXMgdGhlIGNvbnRlbnRzIGluc2lkZSBvZiBgJHRlbXBsYXRlQ2FjaGVgLiBJZiB0aGUgSFRUUCByZXF1ZXN0IGZhaWxzIG9yIHRoZSByZXNwb25zZSBkYXRhXHJcbiAqIG9mIHRoZSBIVFRQIHJlcXVlc3QgaXMgZW1wdHkgdGhlbiBhIGAkY29tcGlsZWAgZXJyb3Igd2lsbCBiZSB0aHJvd24gKHRoZSBleGNlcHRpb24gY2FuIGJlIHRod2FydGVkXHJcbiAqIGJ5IHNldHRpbmcgdGhlIDJuZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHRvIHRydWUpLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHBsIFRoZSBIVFRQIHJlcXVlc3QgdGVtcGxhdGUgVVJMXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGlnbm9yZVJlcXVlc3RFcnJvciBXaGV0aGVyIG9yIG5vdCB0byBpZ25vcmUgdGhlIGV4Y2VwdGlvbiB3aGVuIHRoZSByZXF1ZXN0IGZhaWxzIG9yIHRoZSB0ZW1wbGF0ZSBpcyBlbXB0eVxyXG4gKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgSFRUUCBQcm9taXNlIGZvciB0aGUgZ2l2ZW4uXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0b3RhbFBlbmRpbmdSZXF1ZXN0cyB0b3RhbCBhbW91bnQgb2YgcGVuZGluZyB0ZW1wbGF0ZSByZXF1ZXN0cyBiZWluZyBkb3dubG9hZGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJHRlbXBsYXRlQ2FjaGUnLCAnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSwgJGh0dHAsICRxKSB7XHJcbiAgICBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0Rm4odHBsLCBpZ25vcmVSZXF1ZXN0RXJyb3IpIHtcclxuICAgICAgdmFyIHNlbGYgPSBoYW5kbGVSZXF1ZXN0Rm47XHJcbiAgICAgIHNlbGYudG90YWxQZW5kaW5nUmVxdWVzdHMrKztcclxuXHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQodHBsLCB7IGNhY2hlIDogJHRlbXBsYXRlQ2FjaGUgfSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgdmFyIGh0bWwgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgaWYoIWh0bWwgfHwgaHRtbC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUVycm9yKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgc2VsZi50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tO1xyXG4gICAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KHRwbCwgaHRtbCk7XHJcbiAgICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgICAgICB9LCBoYW5kbGVFcnJvcik7XHJcblxyXG4gICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUGVuZGluZ1JlcXVlc3RzLS07XHJcbiAgICAgICAgaWYgKCFpZ25vcmVSZXF1ZXN0RXJyb3IpIHtcclxuICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCd0cGxvYWQnLCAnRmFpbGVkIHRvIGxvYWQgdGVtcGxhdGU6IHswfScsIHRwbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cyA9IDA7XHJcblxyXG4gICAgcmV0dXJuIGhhbmRsZVJlcXVlc3RGbjtcclxuICB9XTtcclxufVxyXG5cclxuZnVuY3Rpb24gJCRUZXN0YWJpbGl0eVByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckbG9jYXRpb24nLFxyXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkYnJvd3NlciwgICAkbG9jYXRpb24pIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lICR0ZXN0YWJpbGl0eVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogVGhlIHByaXZhdGUgJCR0ZXN0YWJpbGl0eSBzZXJ2aWNlIHByb3ZpZGVzIGEgY29sbGVjdGlvbiBvZiBtZXRob2RzIGZvciB1c2Ugd2hlbiBkZWJ1Z2dpbmdcclxuICAgICAqIG9yIGJ5IGF1dG9tYXRlZCB0ZXN0IGFuZCBkZWJ1Z2dpbmcgdG9vbHMuXHJcbiAgICAgKi9cclxuICAgIHZhciB0ZXN0YWJpbGl0eSA9IHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNmaW5kQmluZGluZ3NcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBhcmUgYm91bmQgKHZpYSBuZy1iaW5kIG9yIHt7fX0pXHJcbiAgICAgKiB0byBleHByZXNzaW9ucyBtYXRjaGluZyB0aGUgaW5wdXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHJvb3QgdG8gc2VhcmNoIGZyb20uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBUaGUgYmluZGluZyBleHByZXNzaW9uIHRvIG1hdGNoLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRfZXhhY3RNYXRjaCBJZiB0cnVlLCBvbmx5IHJldHVybnMgZXhhY3QgbWF0Y2hlc1xyXG4gICAgICogICAgIGZvciB0aGUgZXhwcmVzc2lvbi4gRmlsdGVycyBhbmQgd2hpdGVzcGFjZSBhcmUgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgdGVzdGFiaWxpdHkuZmluZEJpbmRpbmdzID0gZnVuY3Rpb24oZWxlbWVudCwgZXhwcmVzc2lvbiwgb3B0X2V4YWN0TWF0Y2gpIHtcclxuICAgICAgdmFyIGJpbmRpbmdzID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduZy1iaW5kaW5nJyk7XHJcbiAgICAgIHZhciBtYXRjaGVzID0gW107XHJcbiAgICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uKGJpbmRpbmcpIHtcclxuICAgICAgICB2YXIgZGF0YUJpbmRpbmcgPSBhbmd1bGFyLmVsZW1lbnQoYmluZGluZykuZGF0YSgnJGJpbmRpbmcnKTtcclxuICAgICAgICBpZiAoZGF0YUJpbmRpbmcpIHtcclxuICAgICAgICAgIGZvckVhY2goZGF0YUJpbmRpbmcsIGZ1bmN0aW9uKGJpbmRpbmdOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRfZXhhY3RNYXRjaCkge1xyXG4gICAgICAgICAgICAgIHZhciBtYXRjaGVyID0gbmV3IFJlZ0V4cCgnKF58XFxcXHMpJyArIGV4cHJlc3Npb24gKyAnKFxcXFxzfFxcXFx8fCQpJyk7XHJcbiAgICAgICAgICAgICAgaWYgKG1hdGNoZXIudGVzdChiaW5kaW5nTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChiaW5kaW5nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKGJpbmRpbmdOYW1lLmluZGV4T2YoZXhwcmVzc2lvbikgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChiaW5kaW5nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBtYXRjaGVzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZmluZE1vZGVsc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBlbGVtZW50cyB0aGF0IGFyZSB0d28td2F5IGZvdW5kIHZpYSBuZy1tb2RlbCB0b1xyXG4gICAgICogZXhwcmVzc2lvbnMgbWF0Y2hpbmcgdGhlIGlucHV0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCByb290IHRvIHNlYXJjaCBmcm9tLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gVGhlIG1vZGVsIGV4cHJlc3Npb24gdG8gbWF0Y2guXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdF9leGFjdE1hdGNoIElmIHRydWUsIG9ubHkgcmV0dXJucyBleGFjdCBtYXRjaGVzXHJcbiAgICAgKiAgICAgZm9yIHRoZSBleHByZXNzaW9uLlxyXG4gICAgICovXHJcbiAgICB0ZXN0YWJpbGl0eS5maW5kTW9kZWxzID0gZnVuY3Rpb24oZWxlbWVudCwgZXhwcmVzc2lvbiwgb3B0X2V4YWN0TWF0Y2gpIHtcclxuICAgICAgdmFyIHByZWZpeGVzID0gWyduZy0nLCAnZGF0YS1uZy0nLCAnbmdcXFxcOiddO1xyXG4gICAgICBmb3IgKHZhciBwID0gMDsgcCA8IHByZWZpeGVzLmxlbmd0aDsgKytwKSB7XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZUVxdWFscyA9IG9wdF9leGFjdE1hdGNoID8gJz0nIDogJyo9JztcclxuICAgICAgICB2YXIgc2VsZWN0b3IgPSAnWycgKyBwcmVmaXhlc1twXSArICdtb2RlbCcgKyBhdHRyaWJ1dGVFcXVhbHMgKyAnXCInICsgZXhwcmVzc2lvbiArICdcIl0nO1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcbiAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZ2V0TG9jYXRpb25cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0Y3V0IGZvciBnZXR0aW5nIHRoZSBsb2NhdGlvbiBpbiBhIGJyb3dzZXIgYWdub3N0aWMgd2F5LiBSZXR1cm5zXHJcbiAgICAgKiAgICAgdGhlIHBhdGgsIHNlYXJjaCwgYW5kIGhhc2guIChlLmcuIC9wYXRoP2E9YiNoYXNoKVxyXG4gICAgICovXHJcbiAgICB0ZXN0YWJpbGl0eS5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gJGxvY2F0aW9uLnVybCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjc2V0TG9jYXRpb25cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0Y3V0IGZvciBuYXZpZ2F0aW5nIHRvIGEgbG9jYXRpb24gd2l0aG91dCBkb2luZyBhIGZ1bGwgcGFnZSByZWxvYWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgbG9jYXRpb24gdXJsIChwYXRoLCBzZWFyY2ggYW5kIGhhc2gsXHJcbiAgICAgKiAgICAgZS5nLiAvcGF0aD9hPWIjaGFzaCkgdG8gZ28gdG8uXHJcbiAgICAgKi9cclxuICAgIHRlc3RhYmlsaXR5LnNldExvY2F0aW9uID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgICAgIGlmICh1cmwgIT09ICRsb2NhdGlvbi51cmwoKSkge1xyXG4gICAgICAgICRsb2NhdGlvbi51cmwodXJsKTtcclxuICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjd2hlblN0YWJsZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gJHRpbWVvdXQgYW5kICRodHRwIHJlcXVlc3RzIGFyZSBjb21wbGV0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgdGVzdGFiaWxpdHkud2hlblN0YWJsZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICRicm93c2VyLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMoY2FsbGJhY2spO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdGVzdGFiaWxpdHk7XHJcbiAgfV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uICRUaW1lb3V0UHJvdmlkZXIoKSB7XHJcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRicm93c2VyJywgJyRxJywgJyQkcScsICckZXhjZXB0aW9uSGFuZGxlcicsXHJcbiAgICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAgICRicm93c2VyLCAgICRxLCAgICQkcSwgICAkZXhjZXB0aW9uSGFuZGxlcikge1xyXG4gICAgdmFyIGRlZmVycmVkcyA9IHt9O1xyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAgKiBAbmFtZSAkdGltZW91dFxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICogQW5ndWxhcidzIHdyYXBwZXIgZm9yIGB3aW5kb3cuc2V0VGltZW91dGAuIFRoZSBgZm5gIGZ1bmN0aW9uIGlzIHdyYXBwZWQgaW50byBhIHRyeS9jYXRjaFxyXG4gICAgICAqIGJsb2NrIGFuZCBkZWxlZ2F0ZXMgYW55IGV4Y2VwdGlvbnMgdG9cclxuICAgICAgKiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXHJcbiAgICAgICpcclxuICAgICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIHJlZ2lzdGVyaW5nIGEgdGltZW91dCBmdW5jdGlvbiBpcyBhIHByb21pc2UsIHdoaWNoIHdpbGwgYmUgcmVzb2x2ZWQgd2hlblxyXG4gICAgICAqIHRoZSB0aW1lb3V0IGlzIHJlYWNoZWQgYW5kIHRoZSB0aW1lb3V0IGZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxyXG4gICAgICAqXHJcbiAgICAgICogVG8gY2FuY2VsIGEgdGltZW91dCByZXF1ZXN0LCBjYWxsIGAkdGltZW91dC5jYW5jZWwocHJvbWlzZSlgLlxyXG4gICAgICAqXHJcbiAgICAgICogSW4gdGVzdHMgeW91IGNhbiB1c2Uge0BsaW5rIG5nTW9jay4kdGltZW91dCBgJHRpbWVvdXQuZmx1c2goKWB9IHRvXHJcbiAgICAgICogc3luY2hyb25vdXNseSBmbHVzaCB0aGUgcXVldWUgb2YgZGVmZXJyZWQgZnVuY3Rpb25zLlxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBBIGZ1bmN0aW9uLCB3aG9zZSBleGVjdXRpb24gc2hvdWxkIGJlIGRlbGF5ZWQuXHJcbiAgICAgICogQHBhcmFtIHtudW1iZXI9fSBbZGVsYXk9MF0gRGVsYXkgaW4gbWlsbGlzZWNvbmRzLlxyXG4gICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IFtpbnZva2VBcHBseT10cnVlXSBJZiBzZXQgdG8gYGZhbHNlYCBza2lwcyBtb2RlbCBkaXJ0eSBjaGVja2luZywgb3RoZXJ3aXNlXHJcbiAgICAgICogICB3aWxsIGludm9rZSBgZm5gIHdpdGhpbiB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5ICRhcHBseX0gYmxvY2suXHJcbiAgICAgICogQHJldHVybnMge1Byb21pc2V9IFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdoZW4gdGhlIHRpbWVvdXQgaXMgcmVhY2hlZC4gVGhlIHZhbHVlIHRoaXNcclxuICAgICAgKiAgIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoIGlzIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBmbmAgZnVuY3Rpb24uXHJcbiAgICAgICpcclxuICAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHRpbWVvdXQoZm4sIGRlbGF5LCBpbnZva2VBcHBseSkge1xyXG4gICAgICB2YXIgc2tpcEFwcGx5ID0gKGlzRGVmaW5lZChpbnZva2VBcHBseSkgJiYgIWludm9rZUFwcGx5KSxcclxuICAgICAgICAgIGRlZmVycmVkID0gKHNraXBBcHBseSA/ICQkcSA6ICRxKS5kZWZlcigpLFxyXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UsXHJcbiAgICAgICAgICB0aW1lb3V0SWQ7XHJcblxyXG4gICAgICB0aW1lb3V0SWQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmbigpKTtcclxuICAgICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlKTtcclxuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgIGRlbGV0ZSBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNraXBBcHBseSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcclxuICAgICAgfSwgZGVsYXkpO1xyXG5cclxuICAgICAgcHJvbWlzZS4kJHRpbWVvdXRJZCA9IHRpbWVvdXRJZDtcclxuICAgICAgZGVmZXJyZWRzW3RpbWVvdXRJZF0gPSBkZWZlcnJlZDtcclxuXHJcbiAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAqIEBuYW1lICR0aW1lb3V0I2NhbmNlbFxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICogQ2FuY2VscyBhIHRhc2sgYXNzb2NpYXRlZCB3aXRoIHRoZSBgcHJvbWlzZWAuIEFzIGEgcmVzdWx0IG9mIHRoaXMsIHRoZSBwcm9taXNlIHdpbGwgYmVcclxuICAgICAgKiByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLlxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtIHtQcm9taXNlPX0gcHJvbWlzZSBQcm9taXNlIHJldHVybmVkIGJ5IHRoZSBgJHRpbWVvdXRgIGZ1bmN0aW9uLlxyXG4gICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdGFzayBoYXNuJ3QgZXhlY3V0ZWQgeWV0IGFuZCB3YXMgc3VjY2Vzc2Z1bGx5XHJcbiAgICAgICogICBjYW5jZWxlZC5cclxuICAgICAgKi9cclxuICAgIHRpbWVvdXQuY2FuY2VsID0gZnVuY3Rpb24ocHJvbWlzZSkge1xyXG4gICAgICBpZiAocHJvbWlzZSAmJiBwcm9taXNlLiQkdGltZW91dElkIGluIGRlZmVycmVkcykge1xyXG4gICAgICAgIGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXS5yZWplY3QoJ2NhbmNlbGVkJyk7XHJcbiAgICAgICAgZGVsZXRlIGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXTtcclxuICAgICAgICByZXR1cm4gJGJyb3dzZXIuZGVmZXIuY2FuY2VsKHByb21pc2UuJCR0aW1lb3V0SWQpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRpbWVvdXQ7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8vIE5PVEU6ICBUaGUgdXNhZ2Ugb2Ygd2luZG93IGFuZCBkb2N1bWVudCBpbnN0ZWFkIG9mICR3aW5kb3cgYW5kICRkb2N1bWVudCBoZXJlIGlzXHJcbi8vIGRlbGliZXJhdGUuICBUaGlzIHNlcnZpY2UgZGVwZW5kcyBvbiB0aGUgc3BlY2lmaWMgYmVoYXZpb3Igb2YgYW5jaG9yIG5vZGVzIGNyZWF0ZWQgYnkgdGhlXHJcbi8vIGJyb3dzZXIgKHJlc29sdmluZyBhbmQgcGFyc2luZyBVUkxzKSB0aGF0IGlzIHVubGlrZWx5IHRvIGJlIHByb3ZpZGVkIGJ5IG1vY2sgb2JqZWN0cyBhbmRcclxuLy8gY2F1c2UgdXMgdG8gYnJlYWsgdGVzdHMuICBJbiBhZGRpdGlvbiwgd2hlbiB0aGUgYnJvd3NlciByZXNvbHZlcyBhIFVSTCBmb3IgWEhSLCBpdFxyXG4vLyBkb2Vzbid0IGtub3cgYWJvdXQgbW9ja2VkIGxvY2F0aW9ucyBhbmQgcmVzb2x2ZXMgVVJMcyB0byB0aGUgcmVhbCBkb2N1bWVudCAtIHdoaWNoIGlzXHJcbi8vIGV4YWN0bHkgdGhlIGJlaGF2aW9yIG5lZWRlZCBoZXJlLiAgVGhlcmUgaXMgbGl0dGxlIHZhbHVlIGlzIG1vY2tpbmcgdGhlc2Ugb3V0IGZvciB0aGlzXHJcbi8vIHNlcnZpY2UuXHJcbnZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG52YXIgb3JpZ2luVXJsID0gdXJsUmVzb2x2ZSh3aW5kb3cubG9jYXRpb24uaHJlZiwgdHJ1ZSk7XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEltcGxlbWVudGF0aW9uIE5vdGVzIGZvciBub24tSUUgYnJvd3NlcnNcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBBc3NpZ25pbmcgYSBVUkwgdG8gdGhlIGhyZWYgcHJvcGVydHkgb2YgYW4gYW5jaG9yIERPTSBub2RlLCBldmVuIG9uZSBhdHRhY2hlZCB0byB0aGUgRE9NLFxyXG4gKiByZXN1bHRzIGJvdGggaW4gdGhlIG5vcm1hbGl6aW5nIGFuZCBwYXJzaW5nIG9mIHRoZSBVUkwuICBOb3JtYWxpemluZyBtZWFucyB0aGF0IGEgcmVsYXRpdmVcclxuICogVVJMIHdpbGwgYmUgcmVzb2x2ZWQgaW50byBhbiBhYnNvbHV0ZSBVUkwgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxyXG4gKiBQYXJzaW5nIG1lYW5zIHRoYXQgdGhlIGFuY2hvciBub2RlJ3MgaG9zdCwgaG9zdG5hbWUsIHByb3RvY29sLCBwb3J0LCBwYXRobmFtZSBhbmQgcmVsYXRlZFxyXG4gKiBwcm9wZXJ0aWVzIGFyZSBhbGwgcG9wdWxhdGVkIHRvIHJlZmxlY3QgdGhlIG5vcm1hbGl6ZWQgVVJMLiAgVGhpcyBhcHByb2FjaCBoYXMgd2lkZVxyXG4gKiBjb21wYXRpYmlsaXR5IC0gU2FmYXJpIDErLCBNb3ppbGxhIDErLCBPcGVyYSA3KyxlIGV0Yy4gIFNlZVxyXG4gKiBodHRwOi8vd3d3LmFwdGFuYS5jb20vcmVmZXJlbmNlL2h0bWwvYXBpL0hUTUxBbmNob3JFbGVtZW50Lmh0bWxcclxuICpcclxuICogSW1wbGVtZW50YXRpb24gTm90ZXMgZm9yIElFXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBJRSA+PSA4IGFuZCA8PSAxMCBub3JtYWxpemVzIHRoZSBVUkwgd2hlbiBhc3NpZ25lZCB0byB0aGUgYW5jaG9yIG5vZGUgc2ltaWxhciB0byB0aGUgb3RoZXJcclxuICogYnJvd3NlcnMuICBIb3dldmVyLCB0aGUgcGFyc2VkIGNvbXBvbmVudHMgd2lsbCBub3QgYmUgc2V0IGlmIHRoZSBVUkwgYXNzaWduZWQgZGlkIG5vdCBzcGVjaWZ5XHJcbiAqIHRoZW0uICAoZS5nLiBpZiB5b3UgYXNzaWduIGEuaHJlZiA9IFwiZm9vXCIsIHRoZW4gYS5wcm90b2NvbCwgYS5ob3N0LCBldGMuIHdpbGwgYmUgZW1wdHkuKSAgV2VcclxuICogd29yayBhcm91bmQgdGhhdCBieSBwZXJmb3JtaW5nIHRoZSBwYXJzaW5nIGluIGEgMm5kIHN0ZXAgYnkgdGFraW5nIGEgcHJldmlvdXNseSBub3JtYWxpemVkXHJcbiAqIFVSTCAoZS5nLiBieSBhc3NpZ25pbmcgdG8gYS5ocmVmKSBhbmQgYXNzaWduaW5nIGl0IGEuaHJlZiBhZ2Fpbi4gIFRoaXMgY29ycmVjdGx5IHBvcHVsYXRlcyB0aGVcclxuICogcHJvcGVydGllcyBzdWNoIGFzIHByb3RvY29sLCBob3N0bmFtZSwgcG9ydCwgZXRjLlxyXG4gKlxyXG4gKiBJRTcgZG9lcyBub3Qgbm9ybWFsaXplIHRoZSBVUkwgd2hlbiBhc3NpZ25lZCB0byBhbiBhbmNob3Igbm9kZS4gIChBcHBhcmVudGx5LCBpdCBkb2VzLCBpZiBvbmVcclxuICogdXNlcyB0aGUgaW5uZXIgSFRNTCBhcHByb2FjaCB0byBhc3NpZ24gdGhlIFVSTCBhcyBwYXJ0IG9mIGFuIEhUTUwgc25pcHBldCAtXHJcbiAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ3MjcyOSkgIEhvd2V2ZXIsIHNldHRpbmcgaW1nW3NyY10gZG9lcyBub3JtYWxpemUgdGhlIFVSTC5cclxuICogVW5mb3J0dW5hdGVseSwgc2V0dGluZyBpbWdbc3JjXSB0byBzb21ldGhpbmcgbGlrZSBcImphdmFzY3JpcHQ6Zm9vXCIgb24gSUUgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICogU2luY2UgdGhlIHByaW1hcnkgdXNhZ2UgZm9yIG5vcm1hbGl6aW5nIFVSTHMgaXMgdG8gc2FuaXRpemUgc3VjaCBVUkxzLCB3ZSBjYW4ndCB1c2UgdGhhdFxyXG4gKiBtZXRob2QgYW5kIElFIDwgOCBpcyB1bnN1cHBvcnRlZC5cclxuICpcclxuICogUmVmZXJlbmNlczpcclxuICogICBodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MQW5jaG9yRWxlbWVudFxyXG4gKiAgIGh0dHA6Ly93d3cuYXB0YW5hLmNvbS9yZWZlcmVuY2UvaHRtbC9hcGkvSFRNTEFuY2hvckVsZW1lbnQuaHRtbFxyXG4gKiAgIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xyXG4gKiAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvcHVsbC8yOTAyXHJcbiAqICAgaHR0cDovL2phbWVzLnBhZG9sc2V5LmNvbS9qYXZhc2NyaXB0L3BhcnNpbmctdXJscy13aXRoLXRoZS1kb20vXHJcbiAqXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWQuXHJcbiAqIEBkZXNjcmlwdGlvbiBOb3JtYWxpemVzIGFuZCBwYXJzZXMgYSBVUkwuXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IFJldHVybnMgdGhlIG5vcm1hbGl6ZWQgVVJMIGFzIGEgZGljdGlvbmFyeS5cclxuICpcclxuICogICB8IG1lbWJlciBuYW1lICAgfCBEZXNjcmlwdGlvbiAgICB8XHJcbiAqICAgfC0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tfFxyXG4gKiAgIHwgaHJlZiAgICAgICAgICB8IEEgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBwcm92aWRlZCBVUkwgaWYgaXQgd2FzIG5vdCBhbiBhYnNvbHV0ZSBVUkwgfFxyXG4gKiAgIHwgcHJvdG9jb2wgICAgICB8IFRoZSBwcm90b2NvbCBpbmNsdWRpbmcgdGhlIHRyYWlsaW5nIGNvbG9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiAgIHwgaG9zdCAgICAgICAgICB8IFRoZSBob3N0IGFuZCBwb3J0IChpZiB0aGUgcG9ydCBpcyBub24tZGVmYXVsdCkgb2YgdGhlIG5vcm1hbGl6ZWRVcmwgICAgfFxyXG4gKiAgIHwgc2VhcmNoICAgICAgICB8IFRoZSBzZWFyY2ggcGFyYW1zLCBtaW51cyB0aGUgcXVlc3Rpb24gbWFyayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiAgIHwgaGFzaCAgICAgICAgICB8IFRoZSBoYXNoIHN0cmluZywgbWludXMgdGhlIGhhc2ggc3ltYm9sXHJcbiAqICAgfCBob3N0bmFtZSAgICAgIHwgVGhlIGhvc3RuYW1lXHJcbiAqICAgfCBwb3J0ICAgICAgICAgIHwgVGhlIHBvcnQsIHdpdGhvdXQgXCI6XCJcclxuICogICB8IHBhdGhuYW1lICAgICAgfCBUaGUgcGF0aG5hbWUsIGJlZ2lubmluZyB3aXRoIFwiL1wiXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiB1cmxSZXNvbHZlKHVybCwgYmFzZSkge1xyXG4gIHZhciBocmVmID0gdXJsO1xyXG5cclxuICBpZiAobXNpZSkge1xyXG4gICAgLy8gTm9ybWFsaXplIGJlZm9yZSBwYXJzZS4gIFJlZmVyIEltcGxlbWVudGF0aW9uIE5vdGVzIG9uIHdoeSB0aGlzIGlzXHJcbiAgICAvLyBkb25lIGluIHR3byBzdGVwcyBvbiBJRS5cclxuICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgaHJlZik7XHJcbiAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcclxuICB9XHJcblxyXG4gIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xyXG5cclxuICAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXHJcbiAgcmV0dXJuIHtcclxuICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXHJcbiAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxyXG4gICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcclxuICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcclxuICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXHJcbiAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXHJcbiAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxyXG4gICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJylcclxuICAgICAgPyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxyXG4gICAgICA6ICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGEgcmVxdWVzdCBVUkwgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoaXMgaXMgYSBzYW1lLW9yaWdpbiByZXF1ZXN0IGFzIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZXF1ZXN0VXJsIFRoZSB1cmwgb2YgdGhlIHJlcXVlc3QgYXMgYSBzdHJpbmcgdGhhdCB3aWxsIGJlIHJlc29sdmVkXHJcbiAqIG9yIGEgcGFyc2VkIFVSTCBvYmplY3QuXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIGZvciB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gdXJsSXNTYW1lT3JpZ2luKHJlcXVlc3RVcmwpIHtcclxuICB2YXIgcGFyc2VkID0gKGlzU3RyaW5nKHJlcXVlc3RVcmwpKSA/IHVybFJlc29sdmUocmVxdWVzdFVybCkgOiByZXF1ZXN0VXJsO1xyXG4gIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VcmwucHJvdG9jb2wgJiZcclxuICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VcmwuaG9zdCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkd2luZG93XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBIHJlZmVyZW5jZSB0byB0aGUgYnJvd3NlcidzIGB3aW5kb3dgIG9iamVjdC4gV2hpbGUgYHdpbmRvd2BcclxuICogaXMgZ2xvYmFsbHkgYXZhaWxhYmxlIGluIEphdmFTY3JpcHQsIGl0IGNhdXNlcyB0ZXN0YWJpbGl0eSBwcm9ibGVtcywgYmVjYXVzZVxyXG4gKiBpdCBpcyBhIGdsb2JhbCB2YXJpYWJsZS4gSW4gYW5ndWxhciB3ZSBhbHdheXMgcmVmZXIgdG8gaXQgdGhyb3VnaCB0aGVcclxuICogYCR3aW5kb3dgIHNlcnZpY2UsIHNvIGl0IG1heSBiZSBvdmVycmlkZGVuLCByZW1vdmVkIG9yIG1vY2tlZCBmb3IgdGVzdGluZy5cclxuICpcclxuICogRXhwcmVzc2lvbnMsIGxpa2UgdGhlIG9uZSBkZWZpbmVkIGZvciB0aGUgYG5nQ2xpY2tgIGRpcmVjdGl2ZSBpbiB0aGUgZXhhbXBsZVxyXG4gKiBiZWxvdywgYXJlIGV2YWx1YXRlZCB3aXRoIHJlc3BlY3QgdG8gdGhlIGN1cnJlbnQgc2NvcGUuICBUaGVyZWZvcmUsIHRoZXJlIGlzXHJcbiAqIG5vIHJpc2sgb2YgaW5hZHZlcnRlbnRseSBjb2RpbmcgaW4gYSBkZXBlbmRlbmN5IG9uIGEgZ2xvYmFsIHZhbHVlIGluIHN1Y2ggYW5cclxuICogZXhwcmVzc2lvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwid2luZG93RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnd2luZG93RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHNjb3BlLCAkd2luZG93KSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUuZ3JlZXRpbmcgPSAnSGVsbG8sIFdvcmxkISc7XHJcbiAgICAgICAgICAgICAkc2NvcGUuZG9HcmVldGluZyA9IGZ1bmN0aW9uKGdyZWV0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICR3aW5kb3cuYWxlcnQoZ3JlZXRpbmcpO1xyXG4gICAgICAgICAgICAgfTtcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiZ3JlZXRpbmdcIiAvPlxyXG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZG9HcmVldGluZyhncmVldGluZylcIj5BTEVSVDwvYnV0dG9uPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHRoZSBncmVldGluZyBpbiB0aGUgaW5wdXQgYm94JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdncmVldGluZycpKS5zZW5kS2V5cygnSGVsbG8sIEUyRSBUZXN0cycpO1xyXG4gICAgICAgLy8gSWYgd2UgY2xpY2sgdGhlIGJ1dHRvbiBpdCB3aWxsIGJsb2NrIHRoZSB0ZXN0IHJ1bm5lclxyXG4gICAgICAgLy8gZWxlbWVudCgnOmJ1dHRvbicpLmNsaWNrKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuZnVuY3Rpb24gJFdpbmRvd1Byb3ZpZGVyKCl7XHJcbiAgdGhpcy4kZ2V0ID0gdmFsdWVGbih3aW5kb3cpO1xyXG59XHJcblxyXG4vKiBnbG9iYWwgY3VycmVuY3lGaWx0ZXI6IHRydWUsXHJcbiBkYXRlRmlsdGVyOiB0cnVlLFxyXG4gZmlsdGVyRmlsdGVyOiB0cnVlLFxyXG4ganNvbkZpbHRlcjogdHJ1ZSxcclxuIGxpbWl0VG9GaWx0ZXI6IHRydWUsXHJcbiBsb3dlcmNhc2VGaWx0ZXI6IHRydWUsXHJcbiBudW1iZXJGaWx0ZXI6IHRydWUsXHJcbiBvcmRlckJ5RmlsdGVyOiB0cnVlLFxyXG4gdXBwZXJjYXNlRmlsdGVyOiB0cnVlLFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGZpbHRlclByb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBGaWx0ZXJzIGFyZSBqdXN0IGZ1bmN0aW9ucyB3aGljaCB0cmFuc2Zvcm0gaW5wdXQgdG8gYW4gb3V0cHV0LiBIb3dldmVyIGZpbHRlcnMgbmVlZCB0byBiZVxyXG4gKiBEZXBlbmRlbmN5IEluamVjdGVkLiBUbyBhY2hpZXZlIHRoaXMgYSBmaWx0ZXIgZGVmaW5pdGlvbiBjb25zaXN0cyBvZiBhIGZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggaXNcclxuICogYW5ub3RhdGVkIHdpdGggZGVwZW5kZW5jaWVzIGFuZCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgYSBmaWx0ZXIgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gRmlsdGVyIHJlZ2lzdHJhdGlvblxyXG4gKiAgIGZ1bmN0aW9uIE15TW9kdWxlKCRwcm92aWRlLCAkZmlsdGVyUHJvdmlkZXIpIHtcclxuICogICAgIC8vIGNyZWF0ZSBhIHNlcnZpY2UgdG8gZGVtb25zdHJhdGUgaW5qZWN0aW9uIChub3QgYWx3YXlzIG5lZWRlZClcclxuICogICAgICRwcm92aWRlLnZhbHVlKCdncmVldCcsIGZ1bmN0aW9uKG5hbWUpe1xyXG4gKiAgICAgICByZXR1cm4gJ0hlbGxvICcgKyBuYW1lICsgJyEnO1xyXG4gKiAgICAgfSk7XHJcbiAqXHJcbiAqICAgICAvLyByZWdpc3RlciBhIGZpbHRlciBmYWN0b3J5IHdoaWNoIHVzZXMgdGhlXHJcbiAqICAgICAvLyBncmVldCBzZXJ2aWNlIHRvIGRlbW9uc3RyYXRlIERJLlxyXG4gKiAgICAgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCdncmVldCcsIGZ1bmN0aW9uKGdyZWV0KXtcclxuICogICAgICAgLy8gcmV0dXJuIHRoZSBmaWx0ZXIgZnVuY3Rpb24gd2hpY2ggdXNlcyB0aGUgZ3JlZXQgc2VydmljZVxyXG4gKiAgICAgICAvLyB0byBnZW5lcmF0ZSBzYWx1dGF0aW9uXHJcbiAqICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7XHJcbiAqICAgICAgICAgLy8gZmlsdGVycyBuZWVkIHRvIGJlIGZvcmdpdmluZyBzbyBjaGVjayBpbnB1dCB2YWxpZGl0eVxyXG4gKiAgICAgICAgIHJldHVybiB0ZXh0ICYmIGdyZWV0KHRleHQpIHx8IHRleHQ7XHJcbiAqICAgICAgIH07XHJcbiAqICAgICB9KTtcclxuICogICB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgZmlsdGVyIGZ1bmN0aW9uIGlzIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYCRpbmplY3RvcmAgdW5kZXIgdGhlIGZpbHRlciBuYW1lIHN1ZmZpeCB3aXRoXHJcbiAqIGBGaWx0ZXJgLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIGl0KCdzaG91bGQgYmUgdGhlIHNhbWUgaW5zdGFuY2UnLCBpbmplY3QoXHJcbiAqICAgICBmdW5jdGlvbigkZmlsdGVyUHJvdmlkZXIpIHtcclxuICogICAgICAgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCdyZXZlcnNlJywgZnVuY3Rpb24oKXtcclxuICogICAgICAgICByZXR1cm4gLi4uO1xyXG4gKiAgICAgICB9KTtcclxuICogICAgIH0sXHJcbiAqICAgICBmdW5jdGlvbigkZmlsdGVyLCByZXZlcnNlRmlsdGVyKSB7XHJcbiAqICAgICAgIGV4cGVjdCgkZmlsdGVyKCdyZXZlcnNlJykpLnRvQmUocmV2ZXJzZUZpbHRlcik7XHJcbiAqICAgICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqXHJcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGhvdyBhbmd1bGFyIGZpbHRlcnMgd29yaywgYW5kIGhvdyB0byBjcmVhdGUgeW91ciBvd24gZmlsdGVycywgc2VlXHJcbiAqIHtAbGluayBndWlkZS9maWx0ZXIgRmlsdGVyc30gaW4gdGhlIEFuZ3VsYXIgRGV2ZWxvcGVyIEd1aWRlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkZmlsdGVyXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBGaWx0ZXJzIGFyZSB1c2VkIGZvciBmb3JtYXR0aW5nIGRhdGEgZGlzcGxheWVkIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBUaGUgZ2VuZXJhbCBzeW50YXggaW4gdGVtcGxhdGVzIGlzIGFzIGZvbGxvd3M6XHJcbiAqXHJcbiAqICAgICAgICAge3sgZXhwcmVzc2lvbiBbfCBmaWx0ZXJfbmFtZVs6cGFyYW1ldGVyX3ZhbHVlXSAuLi4gXSB9fVxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBmaWx0ZXIgZnVuY3Rpb24gdG8gcmV0cmlldmVcclxuICogQHJldHVybiB7RnVuY3Rpb259IHRoZSBmaWx0ZXIgZnVuY3Rpb25cclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbmFtZT1cIiRmaWx0ZXJcIiBtb2R1bGU9XCJmaWx0ZXJFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIk1haW5DdHJsXCI+XHJcbiAgICAgICAgPGgzPnt7IG9yaWdpbmFsVGV4dCB9fTwvaDM+XHJcbiAgICAgICAgPGgzPnt7IGZpbHRlcmVkVGV4dCB9fTwvaDM+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcblxyXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2ZpbHRlckV4YW1wbGUnLCBbXSlcclxuICAgICAgLmNvbnRyb2xsZXIoJ01haW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkZmlsdGVyKSB7XHJcbiAgICAgICAgJHNjb3BlLm9yaWdpbmFsVGV4dCA9ICdoZWxsbyc7XHJcbiAgICAgICAgJHNjb3BlLmZpbHRlcmVkVGV4dCA9ICRmaWx0ZXIoJ3VwcGVyY2FzZScpKCRzY29wZS5vcmlnaW5hbFRleHQpO1xyXG4gICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICAqL1xyXG4kRmlsdGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnXTtcclxuZnVuY3Rpb24gJEZpbHRlclByb3ZpZGVyKCRwcm92aWRlKSB7XHJcbiAgdmFyIHN1ZmZpeCA9ICdGaWx0ZXInO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGZpbHRlclByb3ZpZGVyI3JlZ2lzdGVyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIE5hbWUgb2YgdGhlIGZpbHRlciBmdW5jdGlvbiwgb3IgYW4gb2JqZWN0IG1hcCBvZiBmaWx0ZXJzIHdoZXJlXHJcbiAgICogICAgdGhlIGtleXMgYXJlIHRoZSBmaWx0ZXIgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmaWx0ZXIgZmFjdG9yaWVzLlxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJlZ2lzdGVyZWQgZmlsdGVyIGluc3RhbmNlLCBvciBpZiBhIG1hcCBvZiBmaWx0ZXJzIHdhcyBwcm92aWRlZCB0aGVuIGEgbWFwXHJcbiAgICogICAgb2YgdGhlIHJlZ2lzdGVyZWQgZmlsdGVyIGluc3RhbmNlcy5cclxuICAgKi9cclxuICBmdW5jdGlvbiByZWdpc3RlcihuYW1lLCBmYWN0b3J5KSB7XHJcbiAgICBpZihpc09iamVjdChuYW1lKSkge1xyXG4gICAgICB2YXIgZmlsdGVycyA9IHt9O1xyXG4gICAgICBmb3JFYWNoKG5hbWUsIGZ1bmN0aW9uKGZpbHRlciwga2V5KSB7XHJcbiAgICAgICAgZmlsdGVyc1trZXldID0gcmVnaXN0ZXIoa2V5LCBmaWx0ZXIpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGZpbHRlcnM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gJHByb3ZpZGUuZmFjdG9yeShuYW1lICsgc3VmZml4LCBmYWN0b3J5KTtcclxuICAgIH1cclxuICB9XHJcbiAgdGhpcy5yZWdpc3RlciA9IHJlZ2lzdGVyO1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgcmV0dXJuICRpbmplY3Rvci5nZXQobmFtZSArIHN1ZmZpeCk7XHJcbiAgICB9O1xyXG4gIH1dO1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIC8qIGdsb2JhbFxyXG4gICAgY3VycmVuY3lGaWx0ZXI6IGZhbHNlLFxyXG4gICAgZGF0ZUZpbHRlcjogZmFsc2UsXHJcbiAgICBmaWx0ZXJGaWx0ZXI6IGZhbHNlLFxyXG4gICAganNvbkZpbHRlcjogZmFsc2UsXHJcbiAgICBsaW1pdFRvRmlsdGVyOiBmYWxzZSxcclxuICAgIGxvd2VyY2FzZUZpbHRlcjogZmFsc2UsXHJcbiAgICBudW1iZXJGaWx0ZXI6IGZhbHNlLFxyXG4gICAgb3JkZXJCeUZpbHRlcjogZmFsc2UsXHJcbiAgICB1cHBlcmNhc2VGaWx0ZXI6IGZhbHNlLFxyXG4gICovXHJcblxyXG4gIHJlZ2lzdGVyKCdjdXJyZW5jeScsIGN1cnJlbmN5RmlsdGVyKTtcclxuICByZWdpc3RlcignZGF0ZScsIGRhdGVGaWx0ZXIpO1xyXG4gIHJlZ2lzdGVyKCdmaWx0ZXInLCBmaWx0ZXJGaWx0ZXIpO1xyXG4gIHJlZ2lzdGVyKCdqc29uJywganNvbkZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ2xpbWl0VG8nLCBsaW1pdFRvRmlsdGVyKTtcclxuICByZWdpc3RlcignbG93ZXJjYXNlJywgbG93ZXJjYXNlRmlsdGVyKTtcclxuICByZWdpc3RlcignbnVtYmVyJywgbnVtYmVyRmlsdGVyKTtcclxuICByZWdpc3Rlcignb3JkZXJCeScsIG9yZGVyQnlGaWx0ZXIpO1xyXG4gIHJlZ2lzdGVyKCd1cHBlcmNhc2UnLCB1cHBlcmNhc2VGaWx0ZXIpO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBmaWx0ZXJcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNlbGVjdHMgYSBzdWJzZXQgb2YgaXRlbXMgZnJvbSBgYXJyYXlgIGFuZCByZXR1cm5zIGl0IGFzIGEgbmV3IGFycmF5LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgc291cmNlIGFycmF5LlxyXG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R8ZnVuY3Rpb24oKX0gZXhwcmVzc2lvbiBUaGUgcHJlZGljYXRlIHRvIGJlIHVzZWQgZm9yIHNlbGVjdGluZyBpdGVtcyBmcm9tXHJcbiAqICAgYGFycmF5YC5cclxuICpcclxuICogICBDYW4gYmUgb25lIG9mOlxyXG4gKlxyXG4gKiAgIC0gYHN0cmluZ2A6IFRoZSBzdHJpbmcgaXMgZXZhbHVhdGVkIGFzIGFuIGV4cHJlc3Npb24gYW5kIHRoZSByZXN1bHRpbmcgdmFsdWUgaXMgdXNlZCBmb3Igc3Vic3RyaW5nIG1hdGNoIGFnYWluc3RcclxuICogICAgIHRoZSBjb250ZW50cyBvZiB0aGUgYGFycmF5YC4gQWxsIHN0cmluZ3Mgb3Igb2JqZWN0cyB3aXRoIHN0cmluZyBwcm9wZXJ0aWVzIGluIGBhcnJheWAgdGhhdCBjb250YWluIHRoaXMgc3RyaW5nXHJcbiAqICAgICB3aWxsIGJlIHJldHVybmVkLiBUaGUgcHJlZGljYXRlIGNhbiBiZSBuZWdhdGVkIGJ5IHByZWZpeGluZyB0aGUgc3RyaW5nIHdpdGggYCFgLlxyXG4gKlxyXG4gKiAgIC0gYE9iamVjdGA6IEEgcGF0dGVybiBvYmplY3QgY2FuIGJlIHVzZWQgdG8gZmlsdGVyIHNwZWNpZmljIHByb3BlcnRpZXMgb24gb2JqZWN0cyBjb250YWluZWRcclxuICogICAgIGJ5IGBhcnJheWAuIEZvciBleGFtcGxlIGB7bmFtZTpcIk1cIiwgcGhvbmU6XCIxXCJ9YCBwcmVkaWNhdGUgd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgaXRlbXNcclxuICogICAgIHdoaWNoIGhhdmUgcHJvcGVydHkgYG5hbWVgIGNvbnRhaW5pbmcgXCJNXCIgYW5kIHByb3BlcnR5IGBwaG9uZWAgY29udGFpbmluZyBcIjFcIi4gQSBzcGVjaWFsXHJcbiAqICAgICBwcm9wZXJ0eSBuYW1lIGAkYCBjYW4gYmUgdXNlZCAoYXMgaW4gYHskOlwidGV4dFwifWApIHRvIGFjY2VwdCBhIG1hdGNoIGFnYWluc3QgYW55XHJcbiAqICAgICBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0LiBUaGF0J3MgZXF1aXZhbGVudCB0byB0aGUgc2ltcGxlIHN1YnN0cmluZyBtYXRjaCB3aXRoIGEgYHN0cmluZ2BcclxuICogICAgIGFzIGRlc2NyaWJlZCBhYm92ZS4gVGhlIHByZWRpY2F0ZSBjYW4gYmUgbmVnYXRlZCBieSBwcmVmaXhpbmcgdGhlIHN0cmluZyB3aXRoIGAhYC5cclxuICogICAgIEZvciBFeGFtcGxlIGB7bmFtZTogXCIhTVwifWAgcHJlZGljYXRlIHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIGl0ZW1zIHdoaWNoIGhhdmUgcHJvcGVydHkgYG5hbWVgXHJcbiAqICAgICBub3QgY29udGFpbmluZyBcIk1cIi5cclxuICpcclxuICogICAtIGBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpYDogQSBwcmVkaWNhdGUgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gd3JpdGUgYXJiaXRyYXJ5IGZpbHRlcnMuIFRoZVxyXG4gKiAgICAgZnVuY3Rpb24gaXMgY2FsbGVkIGZvciBlYWNoIGVsZW1lbnQgb2YgYGFycmF5YC4gVGhlIGZpbmFsIHJlc3VsdCBpcyBhbiBhcnJheSBvZiB0aG9zZVxyXG4gKiAgICAgZWxlbWVudHMgdGhhdCB0aGUgcHJlZGljYXRlIHJldHVybmVkIHRydWUgZm9yLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpfHRydWV8dW5kZWZpbmVkfSBjb21wYXJhdG9yIENvbXBhcmF0b3Igd2hpY2ggaXMgdXNlZCBpblxyXG4gKiAgICAgZGV0ZXJtaW5pbmcgaWYgdGhlIGV4cGVjdGVkIHZhbHVlIChmcm9tIHRoZSBmaWx0ZXIgZXhwcmVzc2lvbikgYW5kIGFjdHVhbCB2YWx1ZSAoZnJvbVxyXG4gKiAgICAgdGhlIG9iamVjdCBpbiB0aGUgYXJyYXkpIHNob3VsZCBiZSBjb25zaWRlcmVkIGEgbWF0Y2guXHJcbiAqXHJcbiAqICAgQ2FuIGJlIG9uZSBvZjpcclxuICpcclxuICogICAtIGBmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKWA6XHJcbiAqICAgICBUaGUgZnVuY3Rpb24gd2lsbCBiZSBnaXZlbiB0aGUgb2JqZWN0IHZhbHVlIGFuZCB0aGUgcHJlZGljYXRlIHZhbHVlIHRvIGNvbXBhcmUgYW5kXHJcbiAqICAgICBzaG91bGQgcmV0dXJuIHRydWUgaWYgdGhlIGl0ZW0gc2hvdWxkIGJlIGluY2x1ZGVkIGluIGZpbHRlcmVkIHJlc3VsdC5cclxuICpcclxuICogICAtIGB0cnVlYDogQSBzaG9ydGhhbmQgZm9yIGBmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKSB7IHJldHVybiBhbmd1bGFyLmVxdWFscyhleHBlY3RlZCwgYWN0dWFsKX1gLlxyXG4gKiAgICAgdGhpcyBpcyBlc3NlbnRpYWxseSBzdHJpY3QgY29tcGFyaXNvbiBvZiBleHBlY3RlZCBhbmQgYWN0dWFsLlxyXG4gKlxyXG4gKiAgIC0gYGZhbHNlfHVuZGVmaW5lZGA6IEEgc2hvcnQgaGFuZCBmb3IgYSBmdW5jdGlvbiB3aGljaCB3aWxsIGxvb2sgZm9yIGEgc3Vic3RyaW5nIG1hdGNoIGluIGNhc2VcclxuICogICAgIGluc2Vuc2l0aXZlIHdheS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctaW5pdD1cImZyaWVuZHMgPSBbe25hbWU6J0pvaG4nLCBwaG9uZTonNTU1LTEyNzYnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonTWFyeScsIHBob25lOic4MDAtQklHLU1BUlknfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonTWlrZScsIHBob25lOic1NTUtNDMyMSd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidBZGFtJywgcGhvbmU6JzU1NS01Njc4J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGllJywgcGhvbmU6JzU1NS04NzY1J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGlldHRlJywgcGhvbmU6JzU1NS01Njc4J31dXCI+PC9kaXY+XHJcblxyXG4gICAgICAgU2VhcmNoOiA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2hUZXh0XCI+XHJcbiAgICAgICA8dGFibGUgaWQ9XCJzZWFyY2hUZXh0UmVzdWx0c1wiPlxyXG4gICAgICAgICA8dHI+PHRoPk5hbWU8L3RoPjx0aD5QaG9uZTwvdGg+PC90cj5cclxuICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgZmlsdGVyOnNlYXJjaFRleHRcIj5cclxuICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cclxuICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XHJcbiAgICAgICAgIDwvdHI+XHJcbiAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgPGhyPlxyXG4gICAgICAgQW55OiA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2guJFwiPiA8YnI+XHJcbiAgICAgICBOYW1lIG9ubHkgPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoLm5hbWVcIj48YnI+XHJcbiAgICAgICBQaG9uZSBvbmx5IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaC5waG9uZVwiPjxicj5cclxuICAgICAgIEVxdWFsaXR5IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInN0cmljdFwiPjxicj5cclxuICAgICAgIDx0YWJsZSBpZD1cInNlYXJjaE9ialJlc3VsdHNcIj5cclxuICAgICAgICAgPHRyPjx0aD5OYW1lPC90aD48dGg+UGhvbmU8L3RoPjwvdHI+XHJcbiAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmRPYmogaW4gZnJpZW5kcyB8IGZpbHRlcjpzZWFyY2g6c3RyaWN0XCI+XHJcbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kT2JqLm5hbWV9fTwvdGQ+XHJcbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kT2JqLnBob25lfX08L3RkPlxyXG4gICAgICAgICA8L3RyPlxyXG4gICAgICAgPC90YWJsZT5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgdmFyIGV4cGVjdEZyaWVuZE5hbWVzID0gZnVuY3Rpb24oZXhwZWN0ZWROYW1lcywga2V5KSB7XHJcbiAgICAgICAgIGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKGtleSArICcgaW4gZnJpZW5kcycpLmNvbHVtbihrZXkgKyAnLm5hbWUnKSkudGhlbihmdW5jdGlvbihhcnIpIHtcclxuICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbih3ZCwgaSkge1xyXG4gICAgICAgICAgICAgZXhwZWN0KHdkLmdldFRleHQoKSkudG9NYXRjaChleHBlY3RlZE5hbWVzW2ldKTtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgICB9O1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgc2VhcmNoIGFjcm9zcyBhbGwgZmllbGRzIHdoZW4gZmlsdGVyaW5nIHdpdGggYSBzdHJpbmcnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgdmFyIHNlYXJjaFRleHQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2hUZXh0JykpO1xyXG4gICAgICAgICBzZWFyY2hUZXh0LmNsZWFyKCk7XHJcbiAgICAgICAgIHNlYXJjaFRleHQuc2VuZEtleXMoJ20nKTtcclxuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydNYXJ5JywgJ01pa2UnLCAnQWRhbSddLCAnZnJpZW5kJyk7XHJcblxyXG4gICAgICAgICBzZWFyY2hUZXh0LmNsZWFyKCk7XHJcbiAgICAgICAgIHNlYXJjaFRleHQuc2VuZEtleXMoJzc2Jyk7XHJcbiAgICAgICAgIGV4cGVjdEZyaWVuZE5hbWVzKFsnSm9obicsICdKdWxpZSddLCAnZnJpZW5kJyk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIHNlYXJjaCBpbiBzcGVjaWZpYyBmaWVsZHMgd2hlbiBmaWx0ZXJpbmcgd2l0aCBhIHByZWRpY2F0ZSBvYmplY3QnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgdmFyIHNlYXJjaEFueSA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlYXJjaC4kJykpO1xyXG4gICAgICAgICBzZWFyY2hBbnkuY2xlYXIoKTtcclxuICAgICAgICAgc2VhcmNoQW55LnNlbmRLZXlzKCdpJyk7XHJcbiAgICAgICAgIGV4cGVjdEZyaWVuZE5hbWVzKFsnTWFyeScsICdNaWtlJywgJ0p1bGllJywgJ0p1bGlldHRlJ10sICdmcmllbmRPYmonKTtcclxuICAgICAgIH0pO1xyXG4gICAgICAgaXQoJ3Nob3VsZCB1c2UgYSBlcXVhbCBjb21wYXJpc29uIHdoZW4gY29tcGFyYXRvciBpcyB0cnVlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIHZhciBzZWFyY2hOYW1lID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoLm5hbWUnKSk7XHJcbiAgICAgICAgIHZhciBzdHJpY3QgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzdHJpY3QnKSk7XHJcbiAgICAgICAgIHNlYXJjaE5hbWUuY2xlYXIoKTtcclxuICAgICAgICAgc2VhcmNoTmFtZS5zZW5kS2V5cygnSnVsaWUnKTtcclxuICAgICAgICAgc3RyaWN0LmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdEZyaWVuZE5hbWVzKFsnSnVsaWUnXSwgJ2ZyaWVuZE9iaicpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiBmaWx0ZXJGaWx0ZXIoKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBleHByZXNzaW9uLCBjb21wYXJhdG9yKSB7XHJcbiAgICBpZiAoIWlzQXJyYXkoYXJyYXkpKSByZXR1cm4gYXJyYXk7XHJcblxyXG4gICAgdmFyIGNvbXBhcmF0b3JUeXBlID0gdHlwZW9mKGNvbXBhcmF0b3IpLFxyXG4gICAgICAgIHByZWRpY2F0ZXMgPSBbXTtcclxuXHJcbiAgICBwcmVkaWNhdGVzLmNoZWNrID0gZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcHJlZGljYXRlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgIGlmKCFwcmVkaWNhdGVzW2pdKHZhbHVlLCBpbmRleCkpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChjb21wYXJhdG9yVHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBpZiAoY29tcGFyYXRvclR5cGUgPT09ICdib29sZWFuJyAmJiBjb21wYXJhdG9yKSB7XHJcbiAgICAgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uKG9iaiwgdGV4dCkge1xyXG4gICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZXF1YWxzKG9iaiwgdGV4dCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24ob2JqLCB0ZXh0KSB7XHJcbiAgICAgICAgICBpZiAob2JqICYmIHRleHQgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRleHQgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG9iaktleSBpbiBvYmopIHtcclxuICAgICAgICAgICAgICBpZiAob2JqS2V5LmNoYXJBdCgwKSAhPT0gJyQnICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBvYmpLZXkpICYmXHJcbiAgICAgICAgICAgICAgICAgIGNvbXBhcmF0b3Iob2JqW29iaktleV0sIHRleHRbb2JqS2V5XSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0ZXh0ID0gKCcnK3RleHQpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICByZXR1cm4gKCcnK29iaikudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRleHQpID4gLTE7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBzZWFyY2ggPSBmdW5jdGlvbihvYmosIHRleHQpe1xyXG4gICAgICBpZiAodHlwZW9mIHRleHQgPT0gJ3N0cmluZycgJiYgdGV4dC5jaGFyQXQoMCkgPT09ICchJykge1xyXG4gICAgICAgIHJldHVybiAhc2VhcmNoKG9iaiwgdGV4dC5zdWJzdHIoMSkpO1xyXG4gICAgICB9XHJcbiAgICAgIHN3aXRjaCAodHlwZW9mIG9iaikge1xyXG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XHJcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxyXG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcclxuICAgICAgICAgIHJldHVybiBjb21wYXJhdG9yKG9iaiwgdGV4dCk7XHJcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxyXG4gICAgICAgICAgc3dpdGNoICh0eXBlb2YgdGV4dCkge1xyXG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmF0b3Iob2JqLCB0ZXh0KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICBmb3IgKCB2YXIgb2JqS2V5IGluIG9iaikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iaktleS5jaGFyQXQoMCkgIT09ICckJyAmJiBzZWFyY2gob2JqW29iaktleV0sIHRleHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBjYXNlIFwiYXJyYXlcIjpcclxuICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoc2VhcmNoKG9ialtpXSwgdGV4dCkpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBzd2l0Y2ggKHR5cGVvZiBleHByZXNzaW9uKSB7XHJcbiAgICAgIGNhc2UgXCJib29sZWFuXCI6XHJcbiAgICAgIGNhc2UgXCJudW1iZXJcIjpcclxuICAgICAgY2FzZSBcInN0cmluZ1wiOlxyXG4gICAgICAgIC8vIFNldCB1cCBleHByZXNzaW9uIG9iamVjdCBhbmQgZmFsbCB0aHJvdWdoXHJcbiAgICAgICAgZXhwcmVzc2lvbiA9IHskOmV4cHJlc3Npb259O1xyXG4gICAgICAgIC8vIGpzaGludCAtVzA4NlxyXG4gICAgICBjYXNlIFwib2JqZWN0XCI6XHJcbiAgICAgICAgLy8ganNoaW50ICtXMDg2XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGV4cHJlc3Npb24pIHtcclxuICAgICAgICAgIChmdW5jdGlvbihwYXRoKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXhwcmVzc2lvbltwYXRoXSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcclxuICAgICAgICAgICAgcHJlZGljYXRlcy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHNlYXJjaChwYXRoID09ICckJyA/IHZhbHVlIDogKHZhbHVlICYmIHZhbHVlW3BhdGhdKSwgZXhwcmVzc2lvbltwYXRoXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSkoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgICBwcmVkaWNhdGVzLnB1c2goZXhwcmVzc2lvbik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgfVxyXG4gICAgdmFyIGZpbHRlcmVkID0gW107XHJcbiAgICBmb3IgKCB2YXIgaiA9IDA7IGogPCBhcnJheS5sZW5ndGg7IGorKykge1xyXG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtqXTtcclxuICAgICAgaWYgKHByZWRpY2F0ZXMuY2hlY2sodmFsdWUsIGopKSB7XHJcbiAgICAgICAgZmlsdGVyZWQucHVzaCh2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmaWx0ZXJlZDtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBjdXJyZW5jeVxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRm9ybWF0cyBhIG51bWJlciBhcyBhIGN1cnJlbmN5IChpZSAkMSwyMzQuNTYpLiBXaGVuIG5vIGN1cnJlbmN5IHN5bWJvbCBpcyBwcm92aWRlZCwgZGVmYXVsdFxyXG4gKiBzeW1ib2wgZm9yIGN1cnJlbnQgbG9jYWxlIGlzIHVzZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgSW5wdXQgdG8gZmlsdGVyLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IHN5bWJvbCBDdXJyZW5jeSBzeW1ib2wgb3IgaWRlbnRpZmllciB0byBiZSBkaXNwbGF5ZWQuXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEZvcm1hdHRlZCBudW1iZXIuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cImN1cnJlbmN5RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnY3VycmVuY3lFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICRzY29wZS5hbW91bnQgPSAxMjM0LjU2O1xyXG4gICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cImFtb3VudFwiPiA8YnI+XHJcbiAgICAgICAgIGRlZmF1bHQgY3VycmVuY3kgc3ltYm9sICgkKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1kZWZhdWx0XCI+e3thbW91bnQgfCBjdXJyZW5jeX19PC9zcGFuPjxicj5cclxuICAgICAgICAgY3VzdG9tIGN1cnJlbmN5IGlkZW50aWZpZXIgKFVTRCQpOiA8c3Bhbj57e2Ftb3VudCB8IGN1cnJlbmN5OlwiVVNEJFwifX08L3NwYW4+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBpbml0IHdpdGggMTIzNC41NicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJyQxLDIzNC41NicpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdhbW91bnQgfCBjdXJyZW5jeTpcIlVTRCRcIicpKS5nZXRUZXh0KCkpLnRvQmUoJ1VTRCQxLDIzNC41NicpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PSAnc2FmYXJpJykge1xyXG4gICAgICAgICAgIC8vIFNhZmFyaSBkb2VzIG5vdCB1bmRlcnN0YW5kIHRoZSBtaW51cyBrZXkuIFNlZVxyXG4gICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzQ4MVxyXG4gICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdhbW91bnQnKSkuY2xlYXIoKTtcclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnYW1vdW50JykpLnNlbmRLZXlzKCctMTIzNCcpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJygkMSwyMzQuMDApJyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2Ftb3VudCB8IGN1cnJlbmN5OlwiVVNEJFwiJykpLmdldFRleHQoKSkudG9CZSgnKFVTRCQxLDIzNC4wMCknKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuY3VycmVuY3lGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xyXG5mdW5jdGlvbiBjdXJyZW5jeUZpbHRlcigkbG9jYWxlKSB7XHJcbiAgdmFyIGZvcm1hdHMgPSAkbG9jYWxlLk5VTUJFUl9GT1JNQVRTO1xyXG4gIHJldHVybiBmdW5jdGlvbihhbW91bnQsIGN1cnJlbmN5U3ltYm9sKXtcclxuICAgIGlmIChpc1VuZGVmaW5lZChjdXJyZW5jeVN5bWJvbCkpIGN1cnJlbmN5U3ltYm9sID0gZm9ybWF0cy5DVVJSRU5DWV9TWU07XHJcblxyXG4gICAgLy8gaWYgbnVsbCBvciB1bmRlZmluZWQgcGFzcyBpdCB0aHJvdWdoXHJcbiAgICByZXR1cm4gKGFtb3VudCA9PSBudWxsKVxyXG4gICAgICAgID8gYW1vdW50XHJcbiAgICAgICAgOiBmb3JtYXROdW1iZXIoYW1vdW50LCBmb3JtYXRzLlBBVFRFUk5TWzFdLCBmb3JtYXRzLkdST1VQX1NFUCwgZm9ybWF0cy5ERUNJTUFMX1NFUCwgMikuXHJcbiAgICAgICAgICAgIHJlcGxhY2UoL1xcdTAwQTQvZywgY3VycmVuY3lTeW1ib2wpO1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIG51bWJlclxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRm9ybWF0cyBhIG51bWJlciBhcyB0ZXh0LlxyXG4gKlxyXG4gKiBJZiB0aGUgaW5wdXQgaXMgbm90IGEgbnVtYmVyIGFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBudW1iZXIgTnVtYmVyIHRvIGZvcm1hdC5cclxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyk9fSBmcmFjdGlvblNpemUgTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRoZSBudW1iZXIgdG8uXHJcbiAqIElmIHRoaXMgaXMgbm90IHByb3ZpZGVkIHRoZW4gdGhlIGZyYWN0aW9uIHNpemUgaXMgY29tcHV0ZWQgZnJvbSB0aGUgY3VycmVudCBsb2NhbGUncyBudW1iZXJcclxuICogZm9ybWF0dGluZyBwYXR0ZXJuLiBJbiB0aGUgY2FzZSBvZiB0aGUgZGVmYXVsdCBsb2NhbGUsIGl0IHdpbGwgYmUgMy5cclxuICogQHJldHVybnMge3N0cmluZ30gTnVtYmVyIHJvdW5kZWQgdG8gZGVjaW1hbFBsYWNlcyBhbmQgcGxhY2VzIGEg4oCcLOKAnSBhZnRlciBlYWNoIHRoaXJkIGRpZ2l0LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJudW1iZXJGaWx0ZXJFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJGaWx0ZXJFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICRzY29wZS52YWwgPSAxMjM0LjU2Nzg5O1xyXG4gICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgRW50ZXIgbnVtYmVyOiA8aW5wdXQgbmctbW9kZWw9J3ZhbCc+PGJyPlxyXG4gICAgICAgICBEZWZhdWx0IGZvcm1hdHRpbmc6IDxzcGFuIGlkPSdudW1iZXItZGVmYXVsdCc+e3t2YWwgfCBudW1iZXJ9fTwvc3Bhbj48YnI+XHJcbiAgICAgICAgIE5vIGZyYWN0aW9uczogPHNwYW4+e3t2YWwgfCBudW1iZXI6MH19PC9zcGFuPjxicj5cclxuICAgICAgICAgTmVnYXRpdmUgbnVtYmVyOiA8c3Bhbj57ey12YWwgfCBudW1iZXI6NH19PC9zcGFuPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgZm9ybWF0IG51bWJlcnMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ251bWJlci1kZWZhdWx0JykpLmdldFRleHQoKSkudG9CZSgnMSwyMzQuNTY4Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbCB8IG51bWJlcjowJykpLmdldFRleHQoKSkudG9CZSgnMSwyMzUnKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnLXZhbCB8IG51bWJlcjo0JykpLmdldFRleHQoKSkudG9CZSgnLTEsMjM0LjU2NzknKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbCcpKS5jbGVhcigpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWwnKSkuc2VuZEtleXMoJzMzNzQuMzMzJyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzMsMzc0LjMzMycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd2YWwgfCBudW1iZXI6MCcpKS5nZXRUZXh0KCkpLnRvQmUoJzMsMzc0Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJy12YWwgfCBudW1iZXI6NCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0zLDM3NC4zMzMwJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG5udW1iZXJGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xyXG5mdW5jdGlvbiBudW1iZXJGaWx0ZXIoJGxvY2FsZSkge1xyXG4gIHZhciBmb3JtYXRzID0gJGxvY2FsZS5OVU1CRVJfRk9STUFUUztcclxuICByZXR1cm4gZnVuY3Rpb24obnVtYmVyLCBmcmFjdGlvblNpemUpIHtcclxuXHJcbiAgICAvLyBpZiBudWxsIG9yIHVuZGVmaW5lZCBwYXNzIGl0IHRocm91Z2hcclxuICAgIHJldHVybiAobnVtYmVyID09IG51bGwpXHJcbiAgICAgICAgPyBudW1iZXJcclxuICAgICAgICA6IGZvcm1hdE51bWJlcihudW1iZXIsIGZvcm1hdHMuUEFUVEVSTlNbMF0sIGZvcm1hdHMuR1JPVVBfU0VQLCBmb3JtYXRzLkRFQ0lNQUxfU0VQLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uU2l6ZSk7XHJcbiAgfTtcclxufVxyXG5cclxudmFyIERFQ0lNQUxfU0VQID0gJy4nO1xyXG5mdW5jdGlvbiBmb3JtYXROdW1iZXIobnVtYmVyLCBwYXR0ZXJuLCBncm91cFNlcCwgZGVjaW1hbFNlcCwgZnJhY3Rpb25TaXplKSB7XHJcbiAgaWYgKCFpc0Zpbml0ZShudW1iZXIpIHx8IGlzT2JqZWN0KG51bWJlcikpIHJldHVybiAnJztcclxuXHJcbiAgdmFyIGlzTmVnYXRpdmUgPSBudW1iZXIgPCAwO1xyXG4gIG51bWJlciA9IE1hdGguYWJzKG51bWJlcik7XHJcbiAgdmFyIG51bVN0ciA9IG51bWJlciArICcnLFxyXG4gICAgICBmb3JtYXRlZFRleHQgPSAnJyxcclxuICAgICAgcGFydHMgPSBbXTtcclxuXHJcbiAgdmFyIGhhc0V4cG9uZW50ID0gZmFsc2U7XHJcbiAgaWYgKG51bVN0ci5pbmRleE9mKCdlJykgIT09IC0xKSB7XHJcbiAgICB2YXIgbWF0Y2ggPSBudW1TdHIubWF0Y2goLyhbXFxkXFwuXSspZSgtPykoXFxkKykvKTtcclxuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXSA9PSAnLScgJiYgbWF0Y2hbM10gPiBmcmFjdGlvblNpemUgKyAxKSB7XHJcbiAgICAgIG51bVN0ciA9ICcwJztcclxuICAgICAgbnVtYmVyID0gMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvcm1hdGVkVGV4dCA9IG51bVN0cjtcclxuICAgICAgaGFzRXhwb25lbnQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCFoYXNFeHBvbmVudCkge1xyXG4gICAgdmFyIGZyYWN0aW9uTGVuID0gKG51bVN0ci5zcGxpdChERUNJTUFMX1NFUClbMV0gfHwgJycpLmxlbmd0aDtcclxuXHJcbiAgICAvLyBkZXRlcm1pbmUgZnJhY3Rpb25TaXplIGlmIGl0IGlzIG5vdCBzcGVjaWZpZWRcclxuICAgIGlmIChpc1VuZGVmaW5lZChmcmFjdGlvblNpemUpKSB7XHJcbiAgICAgIGZyYWN0aW9uU2l6ZSA9IE1hdGgubWluKE1hdGgubWF4KHBhdHRlcm4ubWluRnJhYywgZnJhY3Rpb25MZW4pLCBwYXR0ZXJuLm1heEZyYWMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNhZmVseSByb3VuZCBudW1iZXJzIGluIEpTIHdpdGhvdXQgaGl0dGluZyBpbXByZWNpc2lvbnMgb2YgZmxvYXRpbmctcG9pbnQgYXJpdGhtZXRpY3NcclxuICAgIC8vIGluc3BpcmVkIGJ5OlxyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTWF0aC9yb3VuZFxyXG4gICAgbnVtYmVyID0gKyhNYXRoLnJvdW5kKCsobnVtYmVyLnRvU3RyaW5nKCkgKyAnZScgKyBmcmFjdGlvblNpemUpKS50b1N0cmluZygpICsgJ2UnICsgLWZyYWN0aW9uU2l6ZSk7XHJcblxyXG4gICAgaWYgKG51bWJlciA9PT0gMCkge1xyXG4gICAgICBpc05lZ2F0aXZlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZyYWN0aW9uID0gKCcnICsgbnVtYmVyKS5zcGxpdChERUNJTUFMX1NFUCk7XHJcbiAgICB2YXIgd2hvbGUgPSBmcmFjdGlvblswXTtcclxuICAgIGZyYWN0aW9uID0gZnJhY3Rpb25bMV0gfHwgJyc7XHJcblxyXG4gICAgdmFyIGksIHBvcyA9IDAsXHJcbiAgICAgICAgbGdyb3VwID0gcGF0dGVybi5sZ1NpemUsXHJcbiAgICAgICAgZ3JvdXAgPSBwYXR0ZXJuLmdTaXplO1xyXG5cclxuICAgIGlmICh3aG9sZS5sZW5ndGggPj0gKGxncm91cCArIGdyb3VwKSkge1xyXG4gICAgICBwb3MgPSB3aG9sZS5sZW5ndGggLSBsZ3JvdXA7XHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBwb3M7IGkrKykge1xyXG4gICAgICAgIGlmICgocG9zIC0gaSklZ3JvdXAgPT09IDAgJiYgaSAhPT0gMCkge1xyXG4gICAgICAgICAgZm9ybWF0ZWRUZXh0ICs9IGdyb3VwU2VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3JtYXRlZFRleHQgKz0gd2hvbGUuY2hhckF0KGkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChpID0gcG9zOyBpIDwgd2hvbGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKCh3aG9sZS5sZW5ndGggLSBpKSVsZ3JvdXAgPT09IDAgJiYgaSAhPT0gMCkge1xyXG4gICAgICAgIGZvcm1hdGVkVGV4dCArPSBncm91cFNlcDtcclxuICAgICAgfVxyXG4gICAgICBmb3JtYXRlZFRleHQgKz0gd2hvbGUuY2hhckF0KGkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZvcm1hdCBmcmFjdGlvbiBwYXJ0LlxyXG4gICAgd2hpbGUoZnJhY3Rpb24ubGVuZ3RoIDwgZnJhY3Rpb25TaXplKSB7XHJcbiAgICAgIGZyYWN0aW9uICs9ICcwJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZnJhY3Rpb25TaXplICYmIGZyYWN0aW9uU2l6ZSAhPT0gXCIwXCIpIGZvcm1hdGVkVGV4dCArPSBkZWNpbWFsU2VwICsgZnJhY3Rpb24uc3Vic3RyKDAsIGZyYWN0aW9uU2l6ZSk7XHJcbiAgfSBlbHNlIHtcclxuXHJcbiAgICBpZiAoZnJhY3Rpb25TaXplID4gMCAmJiBudW1iZXIgPiAtMSAmJiBudW1iZXIgPCAxKSB7XHJcbiAgICAgIGZvcm1hdGVkVGV4dCA9IG51bWJlci50b0ZpeGVkKGZyYWN0aW9uU2l6ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwYXJ0cy5wdXNoKGlzTmVnYXRpdmUgPyBwYXR0ZXJuLm5lZ1ByZSA6IHBhdHRlcm4ucG9zUHJlKTtcclxuICBwYXJ0cy5wdXNoKGZvcm1hdGVkVGV4dCk7XHJcbiAgcGFydHMucHVzaChpc05lZ2F0aXZlID8gcGF0dGVybi5uZWdTdWYgOiBwYXR0ZXJuLnBvc1N1Zik7XHJcbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYWROdW1iZXIobnVtLCBkaWdpdHMsIHRyaW0pIHtcclxuICB2YXIgbmVnID0gJyc7XHJcbiAgaWYgKG51bSA8IDApIHtcclxuICAgIG5lZyA9ICAnLSc7XHJcbiAgICBudW0gPSAtbnVtO1xyXG4gIH1cclxuICBudW0gPSAnJyArIG51bTtcclxuICB3aGlsZShudW0ubGVuZ3RoIDwgZGlnaXRzKSBudW0gPSAnMCcgKyBudW07XHJcbiAgaWYgKHRyaW0pXHJcbiAgICBudW0gPSBudW0uc3Vic3RyKG51bS5sZW5ndGggLSBkaWdpdHMpO1xyXG4gIHJldHVybiBuZWcgKyBudW07XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkYXRlR2V0dGVyKG5hbWUsIHNpemUsIG9mZnNldCwgdHJpbSkge1xyXG4gIG9mZnNldCA9IG9mZnNldCB8fCAwO1xyXG4gIHJldHVybiBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICB2YXIgdmFsdWUgPSBkYXRlWydnZXQnICsgbmFtZV0oKTtcclxuICAgIGlmIChvZmZzZXQgPiAwIHx8IHZhbHVlID4gLW9mZnNldClcclxuICAgICAgdmFsdWUgKz0gb2Zmc2V0O1xyXG4gICAgaWYgKHZhbHVlID09PSAwICYmIG9mZnNldCA9PSAtMTIgKSB2YWx1ZSA9IDEyO1xyXG4gICAgcmV0dXJuIHBhZE51bWJlcih2YWx1ZSwgc2l6ZSwgdHJpbSk7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGF0ZVN0ckdldHRlcihuYW1lLCBzaG9ydEZvcm0pIHtcclxuICByZXR1cm4gZnVuY3Rpb24oZGF0ZSwgZm9ybWF0cykge1xyXG4gICAgdmFyIHZhbHVlID0gZGF0ZVsnZ2V0JyArIG5hbWVdKCk7XHJcbiAgICB2YXIgZ2V0ID0gdXBwZXJjYXNlKHNob3J0Rm9ybSA/ICgnU0hPUlQnICsgbmFtZSkgOiBuYW1lKTtcclxuXHJcbiAgICByZXR1cm4gZm9ybWF0c1tnZXRdW3ZhbHVlXTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiB0aW1lWm9uZUdldHRlcihkYXRlKSB7XHJcbiAgdmFyIHpvbmUgPSAtMSAqIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcclxuICB2YXIgcGFkZGVkWm9uZSA9ICh6b25lID49IDApID8gXCIrXCIgOiBcIlwiO1xyXG5cclxuICBwYWRkZWRab25lICs9IHBhZE51bWJlcihNYXRoW3pvbmUgPiAwID8gJ2Zsb29yJyA6ICdjZWlsJ10oem9uZSAvIDYwKSwgMikgK1xyXG4gICAgICAgICAgICAgICAgcGFkTnVtYmVyKE1hdGguYWJzKHpvbmUgJSA2MCksIDIpO1xyXG5cclxuICByZXR1cm4gcGFkZGVkWm9uZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcih5ZWFyKSB7XHJcbiAgICAvLyAwID0gaW5kZXggb2YgSmFudWFyeVxyXG4gICAgdmFyIGRheU9mV2Vla09uRmlyc3QgPSAobmV3IERhdGUoeWVhciwgMCwgMSkpLmdldERheSgpO1xyXG4gICAgLy8gNCA9IGluZGV4IG9mIFRodXJzZGF5ICgrMSB0byBhY2NvdW50IGZvciAxc3QgPSA1KVxyXG4gICAgLy8gMTEgPSBpbmRleCBvZiAqbmV4dCogVGh1cnNkYXkgKCsxIGFjY291bnQgZm9yIDFzdCA9IDEyKVxyXG4gICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsICgoZGF5T2ZXZWVrT25GaXJzdCA8PSA0KSA/IDUgOiAxMikgLSBkYXlPZldlZWtPbkZpcnN0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGh1cnNkYXlUaGlzV2VlayhkYXRldGltZSkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKGRhdGV0aW1lLmdldEZ1bGxZZWFyKCksIGRhdGV0aW1lLmdldE1vbnRoKCksXHJcbiAgICAgIC8vIDQgPSBpbmRleCBvZiBUaHVyc2RheVxyXG4gICAgICBkYXRldGltZS5nZXREYXRlKCkgKyAoNCAtIGRhdGV0aW1lLmdldERheSgpKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdlZWtHZXR0ZXIoc2l6ZSkge1xyXG4gICByZXR1cm4gZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICB2YXIgZmlyc3RUaHVycyA9IGdldEZpcnN0VGh1cnNkYXlPZlllYXIoZGF0ZS5nZXRGdWxsWWVhcigpKSxcclxuICAgICAgICAgdGhpc1RodXJzID0gZ2V0VGh1cnNkYXlUaGlzV2VlayhkYXRlKTtcclxuXHJcbiAgICAgIHZhciBkaWZmID0gK3RoaXNUaHVycyAtICtmaXJzdFRodXJzLFxyXG4gICAgICAgICByZXN1bHQgPSAxICsgTWF0aC5yb3VuZChkaWZmIC8gNi4wNDhlOCk7IC8vIDYuMDQ4ZTggbXMgcGVyIHdlZWtcclxuXHJcbiAgICAgIHJldHVybiBwYWROdW1iZXIocmVzdWx0LCBzaXplKTtcclxuICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gYW1wbUdldHRlcihkYXRlLCBmb3JtYXRzKSB7XHJcbiAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKSA8IDEyID8gZm9ybWF0cy5BTVBNU1swXSA6IGZvcm1hdHMuQU1QTVNbMV07XHJcbn1cclxuXHJcbnZhciBEQVRFX0ZPUk1BVFMgPSB7XHJcbiAgeXl5eTogZGF0ZUdldHRlcignRnVsbFllYXInLCA0KSxcclxuICAgIHl5OiBkYXRlR2V0dGVyKCdGdWxsWWVhcicsIDIsIDAsIHRydWUpLFxyXG4gICAgIHk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgMSksXHJcbiAgTU1NTTogZGF0ZVN0ckdldHRlcignTW9udGgnKSxcclxuICAgTU1NOiBkYXRlU3RyR2V0dGVyKCdNb250aCcsIHRydWUpLFxyXG4gICAgTU06IGRhdGVHZXR0ZXIoJ01vbnRoJywgMiwgMSksXHJcbiAgICAgTTogZGF0ZUdldHRlcignTW9udGgnLCAxLCAxKSxcclxuICAgIGRkOiBkYXRlR2V0dGVyKCdEYXRlJywgMiksXHJcbiAgICAgZDogZGF0ZUdldHRlcignRGF0ZScsIDEpLFxyXG4gICAgSEg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMiksXHJcbiAgICAgSDogZGF0ZUdldHRlcignSG91cnMnLCAxKSxcclxuICAgIGhoOiBkYXRlR2V0dGVyKCdIb3VycycsIDIsIC0xMiksXHJcbiAgICAgaDogZGF0ZUdldHRlcignSG91cnMnLCAxLCAtMTIpLFxyXG4gICAgbW06IGRhdGVHZXR0ZXIoJ01pbnV0ZXMnLCAyKSxcclxuICAgICBtOiBkYXRlR2V0dGVyKCdNaW51dGVzJywgMSksXHJcbiAgICBzczogZGF0ZUdldHRlcignU2Vjb25kcycsIDIpLFxyXG4gICAgIHM6IGRhdGVHZXR0ZXIoJ1NlY29uZHMnLCAxKSxcclxuICAgICAvLyB3aGlsZSBJU08gODYwMSByZXF1aXJlcyBmcmFjdGlvbnMgdG8gYmUgcHJlZml4ZWQgd2l0aCBgLmAgb3IgYCxgXHJcbiAgICAgLy8gd2UgY2FuIGJlIGp1c3Qgc2FmZWx5IHJlbHkgb24gdXNpbmcgYHNzc2Agc2luY2Ugd2UgY3VycmVudGx5IGRvbid0IHN1cHBvcnQgc2luZ2xlIG9yIHR3byBkaWdpdCBmcmFjdGlvbnNcclxuICAgc3NzOiBkYXRlR2V0dGVyKCdNaWxsaXNlY29uZHMnLCAzKSxcclxuICBFRUVFOiBkYXRlU3RyR2V0dGVyKCdEYXknKSxcclxuICAgRUVFOiBkYXRlU3RyR2V0dGVyKCdEYXknLCB0cnVlKSxcclxuICAgICBhOiBhbXBtR2V0dGVyLFxyXG4gICAgIFo6IHRpbWVab25lR2V0dGVyLFxyXG4gICAgd3c6IHdlZWtHZXR0ZXIoMiksXHJcbiAgICAgdzogd2Vla0dldHRlcigxKVxyXG59O1xyXG5cclxudmFyIERBVEVfRk9STUFUU19TUExJVCA9IC8oKD86W155TWRIaG1zYVpFdyddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfGQrfEgrfGgrfG0rfHMrfGF8Wnx3KykpKC4qKS8sXHJcbiAgICBOVU1CRVJfU1RSSU5HID0gL15cXC0/XFxkKyQvO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUgZGF0ZVxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogICBGb3JtYXRzIGBkYXRlYCB0byBhIHN0cmluZyBiYXNlZCBvbiB0aGUgcmVxdWVzdGVkIGBmb3JtYXRgLlxyXG4gKlxyXG4gKiAgIGBmb3JtYXRgIHN0cmluZyBjYW4gYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBlbGVtZW50czpcclxuICpcclxuICogICAqIGAneXl5eSdgOiA0IGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIgKGUuZy4gQUQgMSA9PiAwMDAxLCBBRCAyMDEwID0+IDIwMTApXHJcbiAqICAgKiBgJ3l5J2A6IDIgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciwgcGFkZGVkICgwMC05OSkuIChlLmcuIEFEIDIwMDEgPT4gMDEsIEFEIDIwMTAgPT4gMTApXHJcbiAqICAgKiBgJ3knYDogMSBkaWdpdCByZXByZXNlbnRhdGlvbiBvZiB5ZWFyLCBlLmcuIChBRCAxID0+IDEsIEFEIDE5OSA9PiAxOTkpXHJcbiAqICAgKiBgJ01NTU0nYDogTW9udGggaW4geWVhciAoSmFudWFyeS1EZWNlbWJlcilcclxuICogICAqIGAnTU1NJ2A6IE1vbnRoIGluIHllYXIgKEphbi1EZWMpXHJcbiAqICAgKiBgJ01NJ2A6IE1vbnRoIGluIHllYXIsIHBhZGRlZCAoMDEtMTIpXHJcbiAqICAgKiBgJ00nYDogTW9udGggaW4geWVhciAoMS0xMilcclxuICogICAqIGAnZGQnYDogRGF5IGluIG1vbnRoLCBwYWRkZWQgKDAxLTMxKVxyXG4gKiAgICogYCdkJ2A6IERheSBpbiBtb250aCAoMS0zMSlcclxuICogICAqIGAnRUVFRSdgOiBEYXkgaW4gV2VlaywoU3VuZGF5LVNhdHVyZGF5KVxyXG4gKiAgICogYCdFRUUnYDogRGF5IGluIFdlZWssIChTdW4tU2F0KVxyXG4gKiAgICogYCdISCdgOiBIb3VyIGluIGRheSwgcGFkZGVkICgwMC0yMylcclxuICogICAqIGAnSCdgOiBIb3VyIGluIGRheSAoMC0yMylcclxuICogICAqIGAnaGgnYDogSG91ciBpbiBBTS9QTSwgcGFkZGVkICgwMS0xMilcclxuICogICAqIGAnaCdgOiBIb3VyIGluIEFNL1BNLCAoMS0xMilcclxuICogICAqIGAnbW0nYDogTWludXRlIGluIGhvdXIsIHBhZGRlZCAoMDAtNTkpXHJcbiAqICAgKiBgJ20nYDogTWludXRlIGluIGhvdXIgKDAtNTkpXHJcbiAqICAgKiBgJ3NzJ2A6IFNlY29uZCBpbiBtaW51dGUsIHBhZGRlZCAoMDAtNTkpXHJcbiAqICAgKiBgJ3MnYDogU2Vjb25kIGluIG1pbnV0ZSAoMC01OSlcclxuICogICAqIGAnLnNzcycgb3IgJyxzc3MnYDogTWlsbGlzZWNvbmQgaW4gc2Vjb25kLCBwYWRkZWQgKDAwMC05OTkpXHJcbiAqICAgKiBgJ2EnYDogQU0vUE0gbWFya2VyXHJcbiAqICAgKiBgJ1onYDogNCBkaWdpdCAoK3NpZ24pIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0aW1lem9uZSBvZmZzZXQgKC0xMjAwLSsxMjAwKVxyXG4gKiAgICogYCd3dydgOiBJU08tODYwMSB3ZWVrIG9mIHllYXIgKDAwLTUzKVxyXG4gKiAgICogYCd3J2A6IElTTy04NjAxIHdlZWsgb2YgeWVhciAoMC01MylcclxuICpcclxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGFsc28gYmUgb25lIG9mIHRoZSBmb2xsb3dpbmcgcHJlZGVmaW5lZFxyXG4gKiAgIHtAbGluayBndWlkZS9pMThuIGxvY2FsaXphYmxlIGZvcm1hdHN9OlxyXG4gKlxyXG4gKiAgICogYCdtZWRpdW0nYDogZXF1aXZhbGVudCB0byBgJ01NTSBkLCB5IGg6bW06c3MgYSdgIGZvciBlbl9VUyBsb2NhbGVcclxuICogICAgIChlLmcuIFNlcCAzLCAyMDEwIDEyOjA1OjA4IFBNKVxyXG4gKiAgICogYCdzaG9ydCdgOiBlcXVpdmFsZW50IHRvIGAnTS9kL3l5IGg6bW0gYSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIDkvMy8xMCAxMjowNSBQTSlcclxuICogICAqIGAnZnVsbERhdGUnYDogZXF1aXZhbGVudCB0byBgJ0VFRUUsIE1NTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlXHJcbiAqICAgICAoZS5nLiBGcmlkYXksIFNlcHRlbWJlciAzLCAyMDEwKVxyXG4gKiAgICogYCdsb25nRGF0ZSdgOiBlcXVpdmFsZW50IHRvIGAnTU1NTSBkLCB5J2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gU2VwdGVtYmVyIDMsIDIwMTApXHJcbiAqICAgKiBgJ21lZGl1bURhdGUnYDogZXF1aXZhbGVudCB0byBgJ01NTSBkLCB5J2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gU2VwIDMsIDIwMTApXHJcbiAqICAgKiBgJ3Nob3J0RGF0ZSdgOiBlcXVpdmFsZW50IHRvIGAnTS9kL3l5J2AgZm9yIGVuX1VTIGxvY2FsZSAoZS5nLiA5LzMvMTApXHJcbiAqICAgKiBgJ21lZGl1bVRpbWUnYDogZXF1aXZhbGVudCB0byBgJ2g6bW06c3MgYSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gMTI6MDU6MDggUE0pXHJcbiAqICAgKiBgJ3Nob3J0VGltZSdgOiBlcXVpdmFsZW50IHRvIGAnaDptbSBhJ2AgZm9yIGVuX1VTIGxvY2FsZSAoZS5nLiAxMjowNSBQTSlcclxuICpcclxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGNvbnRhaW4gbGl0ZXJhbCB2YWx1ZXMuIFRoZXNlIG5lZWQgdG8gYmUgZXNjYXBlZCBieSBzdXJyb3VuZGluZyB3aXRoIHNpbmdsZSBxdW90ZXMgKGUuZy5cclxuICogICBgXCJoICdpbiB0aGUgbW9ybmluZydcImApLiBJbiBvcmRlciB0byBvdXRwdXQgYSBzaW5nbGUgcXVvdGUsIGVzY2FwZSBpdCAtIGkuZS4sIHR3byBzaW5nbGUgcXVvdGVzIGluIGEgc2VxdWVuY2VcclxuICogICAoZS5nLiBgXCJoICdvJydjbG9jaydcImApLlxyXG4gKlxyXG4gKiBAcGFyYW0geyhEYXRlfG51bWJlcnxzdHJpbmcpfSBkYXRlIERhdGUgdG8gZm9ybWF0IGVpdGhlciBhcyBEYXRlIG9iamVjdCwgbWlsbGlzZWNvbmRzIChzdHJpbmcgb3JcclxuICogICAgbnVtYmVyKSBvciB2YXJpb3VzIElTTyA4NjAxIGRhdGV0aW1lIHN0cmluZyBmb3JtYXRzIChlLmcuIHl5eXktTU0tZGRUSEg6bW06c3Muc3NzWiBhbmQgaXRzXHJcbiAqICAgIHNob3J0ZXIgdmVyc2lvbnMgbGlrZSB5eXl5LU1NLWRkVEhIOm1tWiwgeXl5eS1NTS1kZCBvciB5eXl5TU1kZFRISG1tc3NaKS4gSWYgbm8gdGltZXpvbmUgaXNcclxuICogICAgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaW5wdXQsIHRoZSB0aW1lIGlzIGNvbnNpZGVyZWQgdG8gYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IGZvcm1hdCBGb3JtYXR0aW5nIHJ1bGVzIChzZWUgRGVzY3JpcHRpb24pLiBJZiBub3Qgc3BlY2lmaWVkLFxyXG4gKiAgICBgbWVkaXVtRGF0ZWAgaXMgdXNlZC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSB0aW1lem9uZSBUaW1lem9uZSB0byBiZSB1c2VkIGZvciBmb3JtYXR0aW5nLiBSaWdodCBub3csIG9ubHkgYCdVVEMnYCBpcyBzdXBwb3J0ZWQuXHJcbiAqICAgIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3NlciB3aWxsIGJlIHVzZWQuXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEZvcm1hdHRlZCBzdHJpbmcgb3IgdGhlIGlucHV0IGlmIGlucHV0IGlzIG5vdCByZWNvZ25pemVkIGFzIGRhdGUvbWlsbGlzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSd9fTwvc3Bhbj46XHJcbiAgICAgICAgICAgPHNwYW4+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonbWVkaXVtJ319PC9zcGFuPjxicj5cclxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOid5eXl5LU1NLWRkIEhIOm1tOnNzIFonfX08L3NwYW4+OlxyXG4gICAgICAgICAgPHNwYW4+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ319PC9zcGFuPjxicj5cclxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOidNTS9kZC95eXl5IEAgaDptbWEnfX08L3NwYW4+OlxyXG4gICAgICAgICAgPHNwYW4+e3snMTI4ODMyMzYyMzAwNicgfCBkYXRlOidNTS9kZC95eXl5IEAgaDptbWEnfX08L3NwYW4+PGJyPlxyXG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6XCJNTS9kZC95eXl5ICdhdCcgaDptbWFcIn19PC9zcGFuPjpcclxuICAgICAgICAgIDxzcGFuPnt7JzEyODgzMjM2MjMwMDYnIHwgZGF0ZTpcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVwifX08L3NwYW4+PGJyPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGZvcm1hdCBkYXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCIxMjg4MzIzNjIzMDA2IHwgZGF0ZTonbWVkaXVtJ1wiKSkuZ2V0VGV4dCgpKS5cclxuICAgICAgICAgICAgdG9NYXRjaCgvT2N0IDJcXGQsIDIwMTAgXFxkezEsMn06XFxkezJ9OlxcZHsyfSAoQU18UE0pLyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCIxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ1wiKSkuZ2V0VGV4dCgpKS5cclxuICAgICAgICAgICAgdG9NYXRjaCgvMjAxMFxcLTEwXFwtMlxcZCBcXGR7Mn06XFxkezJ9OlxcZHsyfSAoXFwtfFxcKyk/XFxkezR9Lyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCInMTI4ODMyMzYyMzAwNicgfCBkYXRlOidNTS9kZC95eXl5IEAgaDptbWEnXCIpKS5nZXRUZXh0KCkpLlxyXG4gICAgICAgICAgICB0b01hdGNoKC8xMFxcLzJcXGRcXC8yMDEwIEAgXFxkezEsMn06XFxkezJ9KEFNfFBNKS8pO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiJzEyODgzMjM2MjMwMDYnIHwgZGF0ZTpcXFwiTU0vZGQveXl5eSAnYXQnIGg6bW1hXFxcIlwiKSkuZ2V0VGV4dCgpKS5cclxuICAgICAgICAgICAgdG9NYXRjaCgvMTBcXC8yXFxkXFwvMjAxMCBhdCBcXGR7MSwyfTpcXGR7Mn0oQU18UE0pLyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmRhdGVGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xyXG5mdW5jdGlvbiBkYXRlRmlsdGVyKCRsb2NhbGUpIHtcclxuXHJcblxyXG4gIHZhciBSX0lTTzg2MDFfU1RSID0gL14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIDEgICAgICAgIDIgICAgICAgMyAgICAgICAgIDQgICAgICAgICAgNSAgICAgICAgICA2ICAgICAgICAgIDcgICAgICAgICAgOCAgOSAgICAgMTAgICAgICAxMVxyXG4gIGZ1bmN0aW9uIGpzb25TdHJpbmdUb0RhdGUoc3RyaW5nKSB7XHJcbiAgICB2YXIgbWF0Y2g7XHJcbiAgICBpZiAobWF0Y2ggPSBzdHJpbmcubWF0Y2goUl9JU084NjAxX1NUUikpIHtcclxuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKSxcclxuICAgICAgICAgIHR6SG91ciA9IDAsXHJcbiAgICAgICAgICB0ek1pbiAgPSAwLFxyXG4gICAgICAgICAgZGF0ZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENGdWxsWWVhciA6IGRhdGUuc2V0RnVsbFllYXIsXHJcbiAgICAgICAgICB0aW1lU2V0dGVyID0gbWF0Y2hbOF0gPyBkYXRlLnNldFVUQ0hvdXJzIDogZGF0ZS5zZXRIb3VycztcclxuXHJcbiAgICAgIGlmIChtYXRjaFs5XSkge1xyXG4gICAgICAgIHR6SG91ciA9IGludChtYXRjaFs5XSArIG1hdGNoWzEwXSk7XHJcbiAgICAgICAgdHpNaW4gPSBpbnQobWF0Y2hbOV0gKyBtYXRjaFsxMV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGRhdGVTZXR0ZXIuY2FsbChkYXRlLCBpbnQobWF0Y2hbMV0pLCBpbnQobWF0Y2hbMl0pIC0gMSwgaW50KG1hdGNoWzNdKSk7XHJcbiAgICAgIHZhciBoID0gaW50KG1hdGNoWzRdfHwwKSAtIHR6SG91cjtcclxuICAgICAgdmFyIG0gPSBpbnQobWF0Y2hbNV18fDApIC0gdHpNaW47XHJcbiAgICAgIHZhciBzID0gaW50KG1hdGNoWzZdfHwwKTtcclxuICAgICAgdmFyIG1zID0gTWF0aC5yb3VuZChwYXJzZUZsb2F0KCcwLicgKyAobWF0Y2hbN118fDApKSAqIDEwMDApO1xyXG4gICAgICB0aW1lU2V0dGVyLmNhbGwoZGF0ZSwgaCwgbSwgcywgbXMpO1xyXG4gICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUsIGZvcm1hdCwgdGltZXpvbmUpIHtcclxuICAgIHZhciB0ZXh0ID0gJycsXHJcbiAgICAgICAgcGFydHMgPSBbXSxcclxuICAgICAgICBmbiwgbWF0Y2g7XHJcblxyXG4gICAgZm9ybWF0ID0gZm9ybWF0IHx8ICdtZWRpdW1EYXRlJztcclxuICAgIGZvcm1hdCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUU1tmb3JtYXRdIHx8IGZvcm1hdDtcclxuICAgIGlmIChpc1N0cmluZyhkYXRlKSkge1xyXG4gICAgICBkYXRlID0gTlVNQkVSX1NUUklORy50ZXN0KGRhdGUpID8gaW50KGRhdGUpIDoganNvblN0cmluZ1RvRGF0ZShkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNOdW1iZXIoZGF0ZSkpIHtcclxuICAgICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNEYXRlKGRhdGUpKSB7XHJcbiAgICAgIHJldHVybiBkYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHdoaWxlKGZvcm1hdCkge1xyXG4gICAgICBtYXRjaCA9IERBVEVfRk9STUFUU19TUExJVC5leGVjKGZvcm1hdCk7XHJcbiAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgIHBhcnRzID0gY29uY2F0KHBhcnRzLCBtYXRjaCwgMSk7XHJcbiAgICAgICAgZm9ybWF0ID0gcGFydHMucG9wKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFydHMucHVzaChmb3JtYXQpO1xyXG4gICAgICAgIGZvcm1hdCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGltZXpvbmUgJiYgdGltZXpvbmUgPT09ICdVVEMnKSB7XHJcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XHJcbiAgICAgIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSk7XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoKHBhcnRzLCBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgIGZuID0gREFURV9GT1JNQVRTW3ZhbHVlXTtcclxuICAgICAgdGV4dCArPSBmbiA/IGZuKGRhdGUsICRsb2NhbGUuREFURVRJTUVfRk9STUFUUylcclxuICAgICAgICAgICAgICAgICA6IHZhbHVlLnJlcGxhY2UoLyheJ3wnJCkvZywgJycpLnJlcGxhY2UoLycnL2csIFwiJ1wiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0ZXh0O1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBqc29uXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiAgIEFsbG93cyB5b3UgdG8gY29udmVydCBhIEphdmFTY3JpcHQgb2JqZWN0IGludG8gSlNPTiBzdHJpbmcuXHJcbiAqXHJcbiAqICAgVGhpcyBmaWx0ZXIgaXMgbW9zdGx5IHVzZWZ1bCBmb3IgZGVidWdnaW5nLiBXaGVuIHVzaW5nIHRoZSBkb3VibGUgY3VybHkge3t2YWx1ZX19IG5vdGF0aW9uXHJcbiAqICAgdGhlIGJpbmRpbmcgaXMgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgdG8gSlNPTi5cclxuICpcclxuICogQHBhcmFtIHsqfSBvYmplY3QgQW55IEphdmFTY3JpcHQgb2JqZWN0IChpbmNsdWRpbmcgYXJyYXlzIGFuZCBwcmltaXRpdmUgdHlwZXMpIHRvIGZpbHRlci5cclxuICogQHJldHVybnMge3N0cmluZ30gSlNPTiBzdHJpbmcuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8cHJlPnt7IHsnbmFtZSc6J3ZhbHVlJ30gfCBqc29uIH19PC9wcmU+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQganNvbmlmeSBmaWx0ZXJlZCBvYmplY3RzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCJ7J25hbWUnOid2YWx1ZSd9XCIpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL1xce1xcbiAgXCJuYW1lXCI6ID9cInZhbHVlXCJcXG59Lyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICpcclxuICovXHJcbmZ1bmN0aW9uIGpzb25GaWx0ZXIoKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgcmV0dXJuIHRvSnNvbihvYmplY3QsIHRydWUpO1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBsb3dlcmNhc2VcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIENvbnZlcnRzIHN0cmluZyB0byBsb3dlcmNhc2UuXHJcbiAqIEBzZWUgYW5ndWxhci5sb3dlcmNhc2VcclxuICovXHJcbnZhciBsb3dlcmNhc2VGaWx0ZXIgPSB2YWx1ZUZuKGxvd2VyY2FzZSk7XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUgdXBwZXJjYXNlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDb252ZXJ0cyBzdHJpbmcgdG8gdXBwZXJjYXNlLlxyXG4gKiBAc2VlIGFuZ3VsYXIudXBwZXJjYXNlXHJcbiAqL1xyXG52YXIgdXBwZXJjYXNlRmlsdGVyID0gdmFsdWVGbih1cHBlcmNhc2UpO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUgbGltaXRUb1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ3JlYXRlcyBhIG5ldyBhcnJheSBvciBzdHJpbmcgY29udGFpbmluZyBvbmx5IGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cy4gVGhlIGVsZW1lbnRzXHJcbiAqIGFyZSB0YWtlbiBmcm9tIGVpdGhlciB0aGUgYmVnaW5uaW5nIG9yIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBhcnJheSwgc3RyaW5nIG9yIG51bWJlciwgYXMgc3BlY2lmaWVkIGJ5XHJcbiAqIHRoZSB2YWx1ZSBhbmQgc2lnbiAocG9zaXRpdmUgb3IgbmVnYXRpdmUpIG9mIGBsaW1pdGAuIElmIGEgbnVtYmVyIGlzIHVzZWQgYXMgaW5wdXQsIGl0IGlzXHJcbiAqIGNvbnZlcnRlZCB0byBhIHN0cmluZy5cclxuICpcclxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd8bnVtYmVyfSBpbnB1dCBTb3VyY2UgYXJyYXksIHN0cmluZyBvciBudW1iZXIgdG8gYmUgbGltaXRlZC5cclxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBsaW1pdCBUaGUgbGVuZ3RoIG9mIHRoZSByZXR1cm5lZCBhcnJheSBvciBzdHJpbmcuIElmIHRoZSBgbGltaXRgIG51bWJlclxyXG4gKiAgICAgaXMgcG9zaXRpdmUsIGBsaW1pdGAgbnVtYmVyIG9mIGl0ZW1zIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgc291cmNlIGFycmF5L3N0cmluZyBhcmUgY29waWVkLlxyXG4gKiAgICAgSWYgdGhlIG51bWJlciBpcyBuZWdhdGl2ZSwgYGxpbWl0YCBudW1iZXIgIG9mIGl0ZW1zIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIGFycmF5L3N0cmluZ1xyXG4gKiAgICAgYXJlIGNvcGllZC4gVGhlIGBsaW1pdGAgd2lsbCBiZSB0cmltbWVkIGlmIGl0IGV4Y2VlZHMgYGFycmF5Lmxlbmd0aGBcclxuICogQHJldHVybnMge0FycmF5fHN0cmluZ30gQSBuZXcgc3ViLWFycmF5IG9yIHN1YnN0cmluZyBvZiBsZW5ndGggYGxpbWl0YCBvciBsZXNzIGlmIGlucHV0IGFycmF5XHJcbiAqICAgICBoYWQgbGVzcyB0aGFuIGBsaW1pdGAgZWxlbWVudHMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cImxpbWl0VG9FeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdsaW1pdFRvRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUubnVtYmVycyA9IFsxLDIsMyw0LDUsNiw3LDgsOV07XHJcbiAgICAgICAgICAgICAkc2NvcGUubGV0dGVycyA9IFwiYWJjZGVmZ2hpXCI7XHJcbiAgICAgICAgICAgICAkc2NvcGUubG9uZ051bWJlciA9IDIzNDU0MzIzNDI7XHJcbiAgICAgICAgICAgICAkc2NvcGUubnVtTGltaXQgPSAzO1xyXG4gICAgICAgICAgICAgJHNjb3BlLmxldHRlckxpbWl0ID0gMztcclxuICAgICAgICAgICAgICRzY29wZS5sb25nTnVtYmVyTGltaXQgPSAzO1xyXG4gICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgTGltaXQge3tudW1iZXJzfX0gdG86IDxpbnB1dCB0eXBlPVwiaW50ZWdlclwiIG5nLW1vZGVsPVwibnVtTGltaXRcIj5cclxuICAgICAgICAgPHA+T3V0cHV0IG51bWJlcnM6IHt7IG51bWJlcnMgfCBsaW1pdFRvOm51bUxpbWl0IH19PC9wPlxyXG4gICAgICAgICBMaW1pdCB7e2xldHRlcnN9fSB0bzogPGlucHV0IHR5cGU9XCJpbnRlZ2VyXCIgbmctbW9kZWw9XCJsZXR0ZXJMaW1pdFwiPlxyXG4gICAgICAgICA8cD5PdXRwdXQgbGV0dGVyczoge3sgbGV0dGVycyB8IGxpbWl0VG86bGV0dGVyTGltaXQgfX08L3A+XHJcbiAgICAgICAgIExpbWl0IHt7bG9uZ051bWJlcn19IHRvOiA8aW5wdXQgdHlwZT1cImludGVnZXJcIiBuZy1tb2RlbD1cImxvbmdOdW1iZXJMaW1pdFwiPlxyXG4gICAgICAgICA8cD5PdXRwdXQgbG9uZyBudW1iZXI6IHt7IGxvbmdOdW1iZXIgfCBsaW1pdFRvOmxvbmdOdW1iZXJMaW1pdCB9fTwvcD5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICB2YXIgbnVtTGltaXRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ251bUxpbWl0JykpO1xyXG4gICAgICAgdmFyIGxldHRlckxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsZXR0ZXJMaW1pdCcpKTtcclxuICAgICAgIHZhciBsb25nTnVtYmVyTGltaXRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2xvbmdOdW1iZXJMaW1pdCcpKTtcclxuICAgICAgIHZhciBsaW1pdGVkTnVtYmVycyA9IGVsZW1lbnQoYnkuYmluZGluZygnbnVtYmVycyB8IGxpbWl0VG86bnVtTGltaXQnKSk7XHJcbiAgICAgICB2YXIgbGltaXRlZExldHRlcnMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xldHRlcnMgfCBsaW1pdFRvOmxldHRlckxpbWl0JykpO1xyXG4gICAgICAgdmFyIGxpbWl0ZWRMb25nTnVtYmVyID0gZWxlbWVudChieS5iaW5kaW5nKCdsb25nTnVtYmVyIHwgbGltaXRUbzpsb25nTnVtYmVyTGltaXQnKSk7XHJcblxyXG4gICAgICAgaXQoJ3Nob3VsZCBsaW1pdCB0aGUgbnVtYmVyIGFycmF5IHRvIGZpcnN0IHRocmVlIGl0ZW1zJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChudW1MaW1pdElucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnMycpO1xyXG4gICAgICAgICBleHBlY3QobGV0dGVyTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcclxuICAgICAgICAgZXhwZWN0KGxvbmdOdW1iZXJMaW1pdElucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnMycpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZE51bWJlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbnVtYmVyczogWzEsMiwzXScpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogYWJjJyk7XHJcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTG9uZ051bWJlci5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsb25nIG51bWJlcjogMjM0Jyk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSB0aGUgb3V0cHV0IHdoZW4gLTMgaXMgZW50ZXJlZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBudW1MaW1pdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgIG51bUxpbWl0SW5wdXQuc2VuZEtleXMoJy0zJyk7XHJcbiAgICAgICAgIGxldHRlckxpbWl0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgbGV0dGVyTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcclxuICAgICAgICAgbG9uZ051bWJlckxpbWl0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgbG9uZ051bWJlckxpbWl0SW5wdXQuc2VuZEtleXMoJy0zJyk7XHJcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTnVtYmVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBudW1iZXJzOiBbNyw4LDldJyk7XHJcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTGV0dGVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsZXR0ZXJzOiBnaGknKTtcclxuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMb25nTnVtYmVyLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxvbmcgbnVtYmVyOiAzNDInKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSBzaXplIG9mIGlucHV0IGFycmF5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIG51bUxpbWl0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgbnVtTGltaXRJbnB1dC5zZW5kS2V5cygnMTAwJyk7XHJcbiAgICAgICAgIGxldHRlckxpbWl0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgbGV0dGVyTGltaXRJbnB1dC5zZW5kS2V5cygnMTAwJyk7XHJcbiAgICAgICAgIGxvbmdOdW1iZXJMaW1pdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgIGxvbmdOdW1iZXJMaW1pdElucHV0LnNlbmRLZXlzKCcxMDAnKTtcclxuICAgICAgICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFsxLDIsMyw0LDUsNiw3LDgsOV0nKTtcclxuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMZXR0ZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxldHRlcnM6IGFiY2RlZmdoaScpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDIzNDU0MzIzNDInKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuZnVuY3Rpb24gbGltaXRUb0ZpbHRlcigpe1xyXG4gIHJldHVybiBmdW5jdGlvbihpbnB1dCwgbGltaXQpIHtcclxuICAgIGlmIChpc051bWJlcihpbnB1dCkpIGlucHV0ID0gaW5wdXQudG9TdHJpbmcoKTtcclxuICAgIGlmICghaXNBcnJheShpbnB1dCkgJiYgIWlzU3RyaW5nKGlucHV0KSkgcmV0dXJuIGlucHV0O1xyXG5cclxuICAgIGlmIChNYXRoLmFicyhOdW1iZXIobGltaXQpKSA9PT0gSW5maW5pdHkpIHtcclxuICAgICAgbGltaXQgPSBOdW1iZXIobGltaXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGltaXQgPSBpbnQobGltaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc1N0cmluZyhpbnB1dCkpIHtcclxuICAgICAgLy9OYU4gY2hlY2sgb24gbGltaXRcclxuICAgICAgaWYgKGxpbWl0KSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbWl0ID49IDAgPyBpbnB1dC5zbGljZSgwLCBsaW1pdCkgOiBpbnB1dC5zbGljZShsaW1pdCwgaW5wdXQubGVuZ3RoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBvdXQgPSBbXSxcclxuICAgICAgaSwgbjtcclxuXHJcbiAgICAvLyBpZiBhYnMobGltaXQpIGV4Y2VlZHMgbWF4aW11bSBsZW5ndGgsIHRyaW0gaXRcclxuICAgIGlmIChsaW1pdCA+IGlucHV0Lmxlbmd0aClcclxuICAgICAgbGltaXQgPSBpbnB1dC5sZW5ndGg7XHJcbiAgICBlbHNlIGlmIChsaW1pdCA8IC1pbnB1dC5sZW5ndGgpXHJcbiAgICAgIGxpbWl0ID0gLWlucHV0Lmxlbmd0aDtcclxuXHJcbiAgICBpZiAobGltaXQgPiAwKSB7XHJcbiAgICAgIGkgPSAwO1xyXG4gICAgICBuID0gbGltaXQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpID0gaW5wdXQubGVuZ3RoICsgbGltaXQ7XHJcbiAgICAgIG4gPSBpbnB1dC5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICg7IGk8bjsgaSsrKSB7XHJcbiAgICAgIG91dC5wdXNoKGlucHV0W2ldKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIG9yZGVyQnlcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIE9yZGVycyBhIHNwZWNpZmllZCBgYXJyYXlgIGJ5IHRoZSBgZXhwcmVzc2lvbmAgcHJlZGljYXRlLiBJdCBpcyBvcmRlcmVkIGFscGhhYmV0aWNhbGx5XHJcbiAqIGZvciBzdHJpbmdzIGFuZCBudW1lcmljYWxseSBmb3IgbnVtYmVycy4gTm90ZTogaWYgeW91IG5vdGljZSBudW1iZXJzIGFyZSBub3QgYmVpbmcgc29ydGVkXHJcbiAqIGNvcnJlY3RseSwgbWFrZSBzdXJlIHRoZXkgYXJlIGFjdHVhbGx5IGJlaW5nIHNhdmVkIGFzIG51bWJlcnMgYW5kIG5vdCBzdHJpbmdzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc29ydC5cclxuICogQHBhcmFtIHtmdW5jdGlvbigqKXxzdHJpbmd8QXJyYXkuPChmdW5jdGlvbigqKXxzdHJpbmcpPn0gZXhwcmVzc2lvbiBBIHByZWRpY2F0ZSB0byBiZVxyXG4gKiAgICB1c2VkIGJ5IHRoZSBjb21wYXJhdG9yIHRvIGRldGVybWluZSB0aGUgb3JkZXIgb2YgZWxlbWVudHMuXHJcbiAqXHJcbiAqICAgIENhbiBiZSBvbmUgb2Y6XHJcbiAqXHJcbiAqICAgIC0gYGZ1bmN0aW9uYDogR2V0dGVyIGZ1bmN0aW9uLiBUaGUgcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBzb3J0ZWQgdXNpbmcgdGhlXHJcbiAqICAgICAgYDxgLCBgPWAsIGA+YCBvcGVyYXRvci5cclxuICogICAgLSBgc3RyaW5nYDogQW4gQW5ndWxhciBleHByZXNzaW9uLiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiBpcyB1c2VkIHRvIGNvbXBhcmUgZWxlbWVudHNcclxuICogICAgICAoZm9yIGV4YW1wbGUgYG5hbWVgIHRvIHNvcnQgYnkgYSBwcm9wZXJ0eSBjYWxsZWQgYG5hbWVgIG9yIGBuYW1lLnN1YnN0cigwLCAzKWAgdG8gc29ydCBieVxyXG4gKiAgICAgIDMgZmlyc3QgY2hhcmFjdGVycyBvZiBhIHByb3BlcnR5IGNhbGxlZCBgbmFtZWApLiBUaGUgcmVzdWx0IG9mIGEgY29uc3RhbnQgZXhwcmVzc2lvblxyXG4gKiAgICAgIGlzIGludGVycHJldGVkIGFzIGEgcHJvcGVydHkgbmFtZSB0byBiZSB1c2VkIGluIGNvbXBhcmlzb25zIChmb3IgZXhhbXBsZSBgXCJzcGVjaWFsIG5hbWVcImBcclxuICogICAgICB0byBzb3J0IG9iamVjdCBieSB0aGUgdmFsdWUgb2YgdGhlaXIgYHNwZWNpYWwgbmFtZWAgcHJvcGVydHkpLiBBbiBleHByZXNzaW9uIGNhbiBiZVxyXG4gKiAgICAgIG9wdGlvbmFsbHkgcHJlZml4ZWQgd2l0aCBgK2Agb3IgYC1gIHRvIGNvbnRyb2wgYXNjZW5kaW5nIG9yIGRlc2NlbmRpbmcgc29ydCBvcmRlclxyXG4gKiAgICAgIChmb3IgZXhhbXBsZSwgYCtuYW1lYCBvciBgLW5hbWVgKS5cclxuICogICAgLSBgQXJyYXlgOiBBbiBhcnJheSBvZiBmdW5jdGlvbiBvciBzdHJpbmcgcHJlZGljYXRlcy4gVGhlIGZpcnN0IHByZWRpY2F0ZSBpbiB0aGUgYXJyYXlcclxuICogICAgICBpcyB1c2VkIGZvciBzb3J0aW5nLCBidXQgd2hlbiB0d28gaXRlbXMgYXJlIGVxdWl2YWxlbnQsIHRoZSBuZXh0IHByZWRpY2F0ZSBpcyB1c2VkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSByZXZlcnNlIFJldmVyc2UgdGhlIG9yZGVyIG9mIHRoZSBhcnJheS5cclxuICogQHJldHVybnMge0FycmF5fSBTb3J0ZWQgY29weSBvZiB0aGUgc291cmNlIGFycmF5LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnb3JkZXJCeUV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPVxyXG4gICAgICAgICAgICAgICAgIFt7bmFtZTonSm9obicsIHBob25lOic1NTUtMTIxMicsIGFnZToxMH0sXHJcbiAgICAgICAgICAgICAgICAgIHtuYW1lOidNYXJ5JywgcGhvbmU6JzU1NS05ODc2JywgYWdlOjE5fSxcclxuICAgICAgICAgICAgICAgICAge25hbWU6J01pa2UnLCBwaG9uZTonNTU1LTQzMjEnLCBhZ2U6MjF9LFxyXG4gICAgICAgICAgICAgICAgICB7bmFtZTonQWRhbScsIHBob25lOic1NTUtNTY3OCcsIGFnZTozNX0sXHJcbiAgICAgICAgICAgICAgICAgIHtuYW1lOidKdWxpZScsIHBob25lOic1NTUtODc2NScsIGFnZToyOX1dO1xyXG4gICAgICAgICAgICAgJHNjb3BlLnByZWRpY2F0ZSA9ICctYWdlJztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxwcmU+U29ydGluZyBwcmVkaWNhdGUgPSB7e3ByZWRpY2F0ZX19OyByZXZlcnNlID0ge3tyZXZlcnNlfX08L3ByZT5cclxuICAgICAgICAgPGhyLz5cclxuICAgICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJwcmVkaWNhdGU9JydcIj51bnNvcnRlZDwvYT4gXVxyXG4gICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRcIj5cclxuICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICA8dGg+PGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicHJlZGljYXRlID0gJ25hbWUnOyByZXZlcnNlPWZhbHNlXCI+TmFtZTwvYT5cclxuICAgICAgICAgICAgICAgICAoPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicHJlZGljYXRlID0gJy1uYW1lJzsgcmV2ZXJzZT1mYWxzZVwiPl48L2E+KTwvdGg+XHJcbiAgICAgICAgICAgICA8dGg+PGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicHJlZGljYXRlID0gJ3Bob25lJzsgcmV2ZXJzZT0hcmV2ZXJzZVwiPlBob25lIE51bWJlcjwvYT48L3RoPlxyXG4gICAgICAgICAgICAgPHRoPjxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInByZWRpY2F0ZSA9ICdhZ2UnOyByZXZlcnNlPSFyZXZlcnNlXCI+QWdlPC9hPjwvdGg+XHJcbiAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBvcmRlckJ5OnByZWRpY2F0ZTpyZXZlcnNlXCI+XHJcbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cclxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cclxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5hZ2V9fTwvdGQ+XHJcbiAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgPC90YWJsZT5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKlxyXG4gKiBJdCdzIGFsc28gcG9zc2libGUgdG8gY2FsbCB0aGUgb3JkZXJCeSBmaWx0ZXIgbWFudWFsbHksIGJ5IGluamVjdGluZyBgJGZpbHRlcmAsIHJldHJpZXZpbmcgdGhlXHJcbiAqIGZpbHRlciByb3V0aW5lIHdpdGggYCRmaWx0ZXIoJ29yZGVyQnknKWAsIGFuZCBjYWxsaW5nIHRoZSByZXR1cm5lZCBmaWx0ZXIgcm91dGluZSB3aXRoIHRoZVxyXG4gKiBkZXNpcmVkIHBhcmFtZXRlcnMuXHJcbiAqXHJcbiAqIEV4YW1wbGU6XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwib3JkZXJCeUV4YW1wbGVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kXCI+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJyZXZlcnNlPWZhbHNlO29yZGVyKCduYW1lJywgZmFsc2UpXCI+TmFtZTwvYT5cclxuICAgICAgICAgICAgICAoPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwib3JkZXIoJy1uYW1lJyxmYWxzZSlcIj5ePC9hPik8L3RoPlxyXG4gICAgICAgICAgICA8dGg+PGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicmV2ZXJzZT0hcmV2ZXJzZTtvcmRlcigncGhvbmUnLCByZXZlcnNlKVwiPlBob25lIE51bWJlcjwvYT48L3RoPlxyXG4gICAgICAgICAgICA8dGg+PGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicmV2ZXJzZT0hcmV2ZXJzZTtvcmRlcignYWdlJyxyZXZlcnNlKVwiPkFnZTwvYT48L3RoPlxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kc1wiPlxyXG4gICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cclxuICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLnBob25lfX08L3RkPlxyXG4gICAgICAgICAgICA8dGQ+e3tmcmllbmQuYWdlfX08L3RkPlxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICA8L3RhYmxlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuXHJcbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRmaWx0ZXInLCBmdW5jdGlvbigkc2NvcGUsICRmaWx0ZXIpIHtcclxuICAgICAgICAgIHZhciBvcmRlckJ5ID0gJGZpbHRlcignb3JkZXJCeScpO1xyXG4gICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBbXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0pvaG4nLCAgICBwaG9uZTogJzU1NS0xMjEyJywgICAgYWdlOiAxMCB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdNYXJ5JywgICAgcGhvbmU6ICc1NTUtOTg3NicsICAgIGFnZTogMTkgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnTWlrZScsICAgIHBob25lOiAnNTU1LTQzMjEnLCAgICBhZ2U6IDIxIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0FkYW0nLCAgICBwaG9uZTogJzU1NS01Njc4JywgICAgYWdlOiAzNSB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdKdWxpZScsICAgcGhvbmU6ICc1NTUtODc2NScsICAgIGFnZTogMjkgfVxyXG4gICAgICAgICAgXTtcclxuICAgICAgICAgICRzY29wZS5vcmRlciA9IGZ1bmN0aW9uKHByZWRpY2F0ZSwgcmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IG9yZGVyQnkoJHNjb3BlLmZyaWVuZHMsIHByZWRpY2F0ZSwgcmV2ZXJzZSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgJHNjb3BlLm9yZGVyKCctYWdlJyxmYWxzZSk7XHJcbiAgICAgICAgfV0pO1xyXG4gICAgPC9maWxlPlxyXG48L2V4YW1wbGU+XHJcbiAqL1xyXG5vcmRlckJ5RmlsdGVyLiRpbmplY3QgPSBbJyRwYXJzZSddO1xyXG5mdW5jdGlvbiBvcmRlckJ5RmlsdGVyKCRwYXJzZSl7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBzb3J0UHJlZGljYXRlLCByZXZlcnNlT3JkZXIpIHtcclxuICAgIGlmICghKGlzQXJyYXlMaWtlKGFycmF5KSkpIHJldHVybiBhcnJheTtcclxuICAgIGlmICghc29ydFByZWRpY2F0ZSkgcmV0dXJuIGFycmF5O1xyXG4gICAgc29ydFByZWRpY2F0ZSA9IGlzQXJyYXkoc29ydFByZWRpY2F0ZSkgPyBzb3J0UHJlZGljYXRlOiBbc29ydFByZWRpY2F0ZV07XHJcbiAgICBzb3J0UHJlZGljYXRlID0gbWFwKHNvcnRQcmVkaWNhdGUsIGZ1bmN0aW9uKHByZWRpY2F0ZSl7XHJcbiAgICAgIHZhciBkZXNjZW5kaW5nID0gZmFsc2UsIGdldCA9IHByZWRpY2F0ZSB8fCBpZGVudGl0eTtcclxuICAgICAgaWYgKGlzU3RyaW5nKHByZWRpY2F0ZSkpIHtcclxuICAgICAgICBpZiAoKHByZWRpY2F0ZS5jaGFyQXQoMCkgPT0gJysnIHx8IHByZWRpY2F0ZS5jaGFyQXQoMCkgPT0gJy0nKSkge1xyXG4gICAgICAgICAgZGVzY2VuZGluZyA9IHByZWRpY2F0ZS5jaGFyQXQoMCkgPT0gJy0nO1xyXG4gICAgICAgICAgcHJlZGljYXRlID0gcHJlZGljYXRlLnN1YnN0cmluZygxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0ID0gJHBhcnNlKHByZWRpY2F0ZSk7XHJcbiAgICAgICAgaWYgKGdldC5jb25zdGFudCkge1xyXG4gICAgICAgICAgdmFyIGtleSA9IGdldCgpO1xyXG4gICAgICAgICAgcmV0dXJuIHJldmVyc2VDb21wYXJhdG9yKGZ1bmN0aW9uKGEsYikge1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcGFyZShhW2tleV0sIGJba2V5XSk7XHJcbiAgICAgICAgICB9LCBkZXNjZW5kaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJldmVyc2VDb21wYXJhdG9yKGZ1bmN0aW9uKGEsYil7XHJcbiAgICAgICAgcmV0dXJuIGNvbXBhcmUoZ2V0KGEpLGdldChiKSk7XHJcbiAgICAgIH0sIGRlc2NlbmRpbmcpO1xyXG4gICAgfSk7XHJcbiAgICB2YXIgYXJyYXlDb3B5ID0gW107XHJcbiAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgeyBhcnJheUNvcHkucHVzaChhcnJheVtpXSk7IH1cclxuICAgIHJldHVybiBhcnJheUNvcHkuc29ydChyZXZlcnNlQ29tcGFyYXRvcihjb21wYXJhdG9yLCByZXZlcnNlT3JkZXIpKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb21wYXJhdG9yKG8xLCBvMil7XHJcbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHNvcnRQcmVkaWNhdGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgY29tcCA9IHNvcnRQcmVkaWNhdGVbaV0obzEsIG8yKTtcclxuICAgICAgICBpZiAoY29tcCAhPT0gMCkgcmV0dXJuIGNvbXA7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZXZlcnNlQ29tcGFyYXRvcihjb21wLCBkZXNjZW5kaW5nKSB7XHJcbiAgICAgIHJldHVybiBkZXNjZW5kaW5nXHJcbiAgICAgICAgICA/IGZ1bmN0aW9uKGEsYil7cmV0dXJuIGNvbXAoYixhKTt9XHJcbiAgICAgICAgICA6IGNvbXA7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjb21wYXJlKHYxLCB2Mil7XHJcbiAgICAgIHZhciB0MSA9IHR5cGVvZiB2MTtcclxuICAgICAgdmFyIHQyID0gdHlwZW9mIHYyO1xyXG4gICAgICBpZiAodDEgPT0gdDIpIHtcclxuICAgICAgICBpZiAoaXNEYXRlKHYxKSAmJiBpc0RhdGUodjIpKSB7XHJcbiAgICAgICAgICB2MSA9IHYxLnZhbHVlT2YoKTtcclxuICAgICAgICAgIHYyID0gdjIudmFsdWVPZigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodDEgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgIHYxID0gdjEudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICB2MiA9IHYyLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2MSA9PT0gdjIpIHJldHVybiAwO1xyXG4gICAgICAgIHJldHVybiB2MSA8IHYyID8gLTEgOiAxO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0MSA8IHQyID8gLTEgOiAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gbmdEaXJlY3RpdmUoZGlyZWN0aXZlKSB7XHJcbiAgaWYgKGlzRnVuY3Rpb24oZGlyZWN0aXZlKSkge1xyXG4gICAgZGlyZWN0aXZlID0ge1xyXG4gICAgICBsaW5rOiBkaXJlY3RpdmVcclxuICAgIH07XHJcbiAgfVxyXG4gIGRpcmVjdGl2ZS5yZXN0cmljdCA9IGRpcmVjdGl2ZS5yZXN0cmljdCB8fCAnQUMnO1xyXG4gIHJldHVybiB2YWx1ZUZuKGRpcmVjdGl2ZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIGFcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIE1vZGlmaWVzIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBodG1sIEEgdGFnIHNvIHRoYXQgdGhlIGRlZmF1bHQgYWN0aW9uIGlzIHByZXZlbnRlZCB3aGVuXHJcbiAqIHRoZSBocmVmIGF0dHJpYnV0ZSBpcyBlbXB0eS5cclxuICpcclxuICogVGhpcyBjaGFuZ2UgcGVybWl0cyB0aGUgZWFzeSBjcmVhdGlvbiBvZiBhY3Rpb24gbGlua3Mgd2l0aCB0aGUgYG5nQ2xpY2tgIGRpcmVjdGl2ZVxyXG4gKiB3aXRob3V0IGNoYW5naW5nIHRoZSBsb2NhdGlvbiBvciBjYXVzaW5nIHBhZ2UgcmVsb2FkcywgZS5nLjpcclxuICogYDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImxpc3QuYWRkSXRlbSgpXCI+QWRkIEl0ZW08L2E+YFxyXG4gKi9cclxudmFyIGh0bWxBbmNob3JEaXJlY3RpdmUgPSB2YWx1ZUZuKHtcclxuICByZXN0cmljdDogJ0UnLFxyXG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcclxuXHJcbiAgICBpZiAobXNpZSA8PSA4KSB7XHJcblxyXG4gICAgICAvLyB0dXJuIDxhIGhyZWYgbmctY2xpY2s9XCIuLlwiPmxpbms8L2E+IGludG8gYSBzdHlsYWJsZSBsaW5rIGluIElFXHJcbiAgICAgIC8vIGJ1dCBvbmx5IGlmIGl0IGRvZXNuJ3QgaGF2ZSBuYW1lIGF0dHJpYnV0ZSwgaW4gd2hpY2ggY2FzZSBpdCdzIGFuIGFuY2hvclxyXG4gICAgICBpZiAoIWF0dHIuaHJlZiAmJiAhYXR0ci5uYW1lKSB7XHJcbiAgICAgICAgYXR0ci4kc2V0KCdocmVmJywgJycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBhZGQgYSBjb21tZW50IG5vZGUgdG8gYW5jaG9ycyB0byB3b3JrYXJvdW5kIElFIGJ1ZyB0aGF0IGNhdXNlcyBlbGVtZW50IGNvbnRlbnQgdG8gYmUgcmVzZXRcclxuICAgICAgLy8gdG8gbmV3IGF0dHJpYnV0ZSBjb250ZW50IGlmIGF0dHJpYnV0ZSBpcyB1cGRhdGVkIHdpdGggdmFsdWUgY29udGFpbmluZyBAIGFuZCBlbGVtZW50IGFsc29cclxuICAgICAgLy8gY29udGFpbnMgdmFsdWUgd2l0aCBAXHJcbiAgICAgIC8vIHNlZSBpc3N1ZSAjMTk0OVxyXG4gICAgICBlbGVtZW50LmFwcGVuZChkb2N1bWVudC5jcmVhdGVDb21tZW50KCdJRSBmaXgnKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFhdHRyLmhyZWYgJiYgIWF0dHIueGxpbmtIcmVmICYmICFhdHRyLm5hbWUpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgLy8gU1ZHQUVsZW1lbnQgZG9lcyBub3QgdXNlIHRoZSBocmVmIGF0dHJpYnV0ZSwgYnV0IHJhdGhlciB0aGUgJ3hsaW5rSHJlZicgYXR0cmlidXRlLlxyXG4gICAgICAgIHZhciBocmVmID0gdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSkgPT09ICdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXScgP1xyXG4gICAgICAgICAgICAgICAgICAgJ3hsaW5rOmhyZWYnIDogJ2hyZWYnO1xyXG4gICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgICAgLy8gaWYgd2UgaGF2ZSBubyBocmVmIHVybCwgdGhlbiBkb24ndCBuYXZpZ2F0ZSBhbnl3aGVyZS5cclxuICAgICAgICAgIGlmICghZWxlbWVudC5hdHRyKGhyZWYpKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nSHJlZlxyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgOTlcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzaW5nIEFuZ3VsYXIgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhbiBocmVmIGF0dHJpYnV0ZSB3aWxsXHJcbiAqIG1ha2UgdGhlIGxpbmsgZ28gdG8gdGhlIHdyb25nIFVSTCBpZiB0aGUgdXNlciBjbGlja3MgaXQgYmVmb3JlXHJcbiAqIEFuZ3VsYXIgaGFzIGEgY2hhbmNlIHRvIHJlcGxhY2UgdGhlIGB7e2hhc2h9fWAgbWFya3VwIHdpdGggaXRzXHJcbiAqIHZhbHVlLiBVbnRpbCBBbmd1bGFyIHJlcGxhY2VzIHRoZSBtYXJrdXAgdGhlIGxpbmsgd2lsbCBiZSBicm9rZW5cclxuICogYW5kIHdpbGwgbW9zdCBsaWtlbHkgcmV0dXJuIGEgNDA0IGVycm9yLlxyXG4gKlxyXG4gKiBUaGUgYG5nSHJlZmAgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0uXHJcbiAqXHJcbiAqIFRoZSB3cm9uZyB3YXkgdG8gd3JpdGUgaXQ6XHJcbiAqIGBgYGh0bWxcclxuICogPGEgaHJlZj1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiPmxpbmsxPC9hPlxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGNvcnJlY3Qgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxhIG5nLWhyZWY9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIj5saW5rMTwvYT5cclxuICogYGBgXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFcclxuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdIcmVmIGFueSBzdHJpbmcgd2hpY2ggY2FuIGNvbnRhaW4gYHt7fX1gIG1hcmt1cC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogVGhpcyBleGFtcGxlIHNob3dzIHZhcmlvdXMgY29tYmluYXRpb25zIG9mIGBocmVmYCwgYG5nLWhyZWZgIGFuZCBgbmctY2xpY2tgIGF0dHJpYnV0ZXNcclxuICogaW4gbGlua3MgYW5kIHRoZWlyIGRpZmZlcmVudCBiZWhhdmlvcnM6XHJcbiAgICA8ZXhhbXBsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ2YWx1ZVwiIC8+PGJyIC8+XHJcbiAgICAgICAgPGEgaWQ9XCJsaW5rLTFcIiBocmVmIG5nLWNsaWNrPVwidmFsdWUgPSAxXCI+bGluayAxPC9hPiAobGluaywgZG9uJ3QgcmVsb2FkKTxiciAvPlxyXG4gICAgICAgIDxhIGlkPVwibGluay0yXCIgaHJlZj1cIlwiIG5nLWNsaWNrPVwidmFsdWUgPSAyXCI+bGluayAyPC9hPiAobGluaywgZG9uJ3QgcmVsb2FkKTxiciAvPlxyXG4gICAgICAgIDxhIGlkPVwibGluay0zXCIgbmctaHJlZj1cIi97eycxMjMnfX1cIj5saW5rIDM8L2E+IChsaW5rLCByZWxvYWQhKTxiciAvPlxyXG4gICAgICAgIDxhIGlkPVwibGluay00XCIgaHJlZj1cIlwiIG5hbWU9XCJ4eFwiIG5nLWNsaWNrPVwidmFsdWUgPSA0XCI+YW5jaG9yPC9hPiAobGluaywgZG9uJ3QgcmVsb2FkKTxiciAvPlxyXG4gICAgICAgIDxhIGlkPVwibGluay01XCIgbmFtZT1cInh4eFwiIG5nLWNsaWNrPVwidmFsdWUgPSA1XCI+YW5jaG9yPC9hPiAobm8gbGluayk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstNlwiIG5nLWhyZWY9XCJ7e3ZhbHVlfX1cIj5saW5rPC9hPiAobGluaywgY2hhbmdlIGxvY2F0aW9uKVxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBocmVmIHdpdGhvdXQgdmFsdWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstMScpKS5jbGljaygpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnMScpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstMScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTInKSkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzInKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTInKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYW5kIGNoYW5nZSB1cmwgd2hlbiBuZy1ocmVmIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstMycpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9NYXRjaCgvXFwvMTIzJC8pO1xyXG5cclxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstMycpKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHdlIG5hdmlnYXRlIGF3YXkgZnJvbSBhbiBBbmd1bGFyIHBhZ2UsIHNvIHdlIG5lZWRcclxuICAgICAgICAgIC8vIHRvIHVzZSBicm93c2VyLmRyaXZlciB0byBnZXQgdGhlIGJhc2Ugd2ViZHJpdmVyLlxyXG5cclxuICAgICAgICAgIGJyb3dzZXIud2FpdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB1cmwubWF0Y2goL1xcLzEyMyQvKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9LCA1MDAwLCAncGFnZSBzaG91bGQgbmF2aWdhdGUgdG8gLzEyMycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB4aXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gaHJlZiBlbXB0eSBzdHJpbmcgYW5kIG5hbWUgc3BlY2lmaWVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTQnKSkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzQnKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTQnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBubyBocmVmIGJ1dCBuYW1lIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay01JykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCc1Jyk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay01JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG9ubHkgY2hhbmdlIHVybCB3aGVuIG9ubHkgbmctaHJlZicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuY2xlYXIoKTtcclxuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLnNlbmRLZXlzKCc2Jyk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay02JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b01hdGNoKC9cXC82JC8pO1xyXG5cclxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHdlIG5hdmlnYXRlIGF3YXkgZnJvbSBhbiBBbmd1bGFyIHBhZ2UsIHNvIHdlIG5lZWRcclxuICAgICAgICAgIC8vIHRvIHVzZSBicm93c2VyLmRyaXZlciB0byBnZXQgdGhlIGJhc2Ugd2ViZHJpdmVyLlxyXG4gICAgICAgICAgYnJvd3Nlci53YWl0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnJvd3Nlci5kcml2ZXIuZ2V0Q3VycmVudFVybCgpLnRoZW4oZnVuY3Rpb24odXJsKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHVybC5tYXRjaCgvXFwvNiQvKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9LCA1MDAwLCAncGFnZSBzaG91bGQgbmF2aWdhdGUgdG8gLzYnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nU3JjXHJcbiAqIEByZXN0cmljdCBBXHJcbiAqIEBwcmlvcml0eSA5OVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVXNpbmcgQW5ndWxhciBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGEgYHNyY2AgYXR0cmlidXRlIGRvZXNuJ3RcclxuICogd29yayByaWdodDogVGhlIGJyb3dzZXIgd2lsbCBmZXRjaCBmcm9tIHRoZSBVUkwgd2l0aCB0aGUgbGl0ZXJhbFxyXG4gKiB0ZXh0IGB7e2hhc2h9fWAgdW50aWwgQW5ndWxhciByZXBsYWNlcyB0aGUgZXhwcmVzc2lvbiBpbnNpZGVcclxuICogYHt7aGFzaH19YC4gVGhlIGBuZ1NyY2AgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0uXHJcbiAqXHJcbiAqIFRoZSBidWdneSB3YXkgdG8gd3JpdGUgaXQ6XHJcbiAqIGBgYGh0bWxcclxuICogPGltZyBzcmM9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIi8+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgY29ycmVjdCB3YXkgdG8gd3JpdGUgaXQ6XHJcbiAqIGBgYGh0bWxcclxuICogPGltZyBuZy1zcmM9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIi8+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZWxlbWVudCBJTUdcclxuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdTcmMgYW55IHN0cmluZyB3aGljaCBjYW4gY29udGFpbiBge3t9fWAgbWFya3VwLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nU3Jjc2V0XHJcbiAqIEByZXN0cmljdCBBXHJcbiAqIEBwcmlvcml0eSA5OVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVXNpbmcgQW5ndWxhciBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGEgYHNyY3NldGAgYXR0cmlidXRlIGRvZXNuJ3RcclxuICogd29yayByaWdodDogVGhlIGJyb3dzZXIgd2lsbCBmZXRjaCBmcm9tIHRoZSBVUkwgd2l0aCB0aGUgbGl0ZXJhbFxyXG4gKiB0ZXh0IGB7e2hhc2h9fWAgdW50aWwgQW5ndWxhciByZXBsYWNlcyB0aGUgZXhwcmVzc2lvbiBpbnNpZGVcclxuICogYHt7aGFzaH19YC4gVGhlIGBuZ1NyY3NldGAgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0uXHJcbiAqXHJcbiAqIFRoZSBidWdneSB3YXkgdG8gd3JpdGUgaXQ6XHJcbiAqIGBgYGh0bWxcclxuICogPGltZyBzcmNzZXQ9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX0gMnhcIi8+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgY29ycmVjdCB3YXkgdG8gd3JpdGUgaXQ6XHJcbiAqIGBgYGh0bWxcclxuICogPGltZyBuZy1zcmNzZXQ9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX0gMnhcIi8+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZWxlbWVudCBJTUdcclxuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdTcmNzZXQgYW55IHN0cmluZyB3aGljaCBjYW4gY29udGFpbiBge3t9fWAgbWFya3VwLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nRGlzYWJsZWRcclxuICogQHJlc3RyaWN0IEFcclxuICogQHByaW9yaXR5IDEwMFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogV2Ugc2hvdWxkbid0IGRvIHRoaXMsIGJlY2F1c2UgaXQgd2lsbCBtYWtlIHRoZSBidXR0b24gZW5hYmxlZCBvbiBDaHJvbWUvRmlyZWZveCBidXQgbm90IG9uIElFOCBhbmQgb2xkZXIgSUVzOlxyXG4gKiBgYGBodG1sXHJcbiAqIDxkaXYgbmctaW5pdD1cInNjb3BlID0geyBpc0Rpc2FibGVkOiBmYWxzZSB9XCI+XHJcbiAqICA8YnV0dG9uIGRpc2FibGVkPVwie3tzY29wZS5pc0Rpc2FibGVkfX1cIj5EaXNhYmxlZDwvYnV0dG9uPlxyXG4gKiA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFRoZSBIVE1MIHNwZWNpZmljYXRpb24gZG9lcyBub3QgcmVxdWlyZSBicm93c2VycyB0byBwcmVzZXJ2ZSB0aGUgdmFsdWVzIG9mIGJvb2xlYW4gYXR0cmlidXRlc1xyXG4gKiBzdWNoIGFzIGRpc2FibGVkLiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXHJcbiAqIElmIHdlIHB1dCBhbiBBbmd1bGFyIGludGVycG9sYXRpb24gZXhwcmVzc2lvbiBpbnRvIHN1Y2ggYW4gYXR0cmlidXRlIHRoZW4gdGhlXHJcbiAqIGJpbmRpbmcgaW5mb3JtYXRpb24gd291bGQgYmUgbG9zdCB3aGVuIHRoZSBicm93c2VyIHJlbW92ZXMgdGhlIGF0dHJpYnV0ZS5cclxuICogVGhlIGBuZ0Rpc2FibGVkYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlLlxyXG4gKiBUaGlzIGNvbXBsZW1lbnRhcnkgZGlyZWN0aXZlIGlzIG5vdCByZW1vdmVkIGJ5IHRoZSBicm93c2VyIGFuZCBzbyBwcm92aWRlc1xyXG4gKiBhIHBlcm1hbmVudCByZWxpYWJsZSBwbGFjZSB0byBzdG9yZSB0aGUgYmluZGluZyBpbmZvcm1hdGlvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIENsaWNrIG1lIHRvIHRvZ2dsZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjxici8+XHJcbiAgICAgICAgPGJ1dHRvbiBuZy1tb2RlbD1cImJ1dHRvblwiIG5nLWRpc2FibGVkPVwiY2hlY2tlZFwiPkJ1dHRvbjwvYnV0dG9uPlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIHRvZ2dsZSBidXR0b24nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJ2J1dHRvbicpKS5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKlxyXG4gKiBAZWxlbWVudCBJTlBVVFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nRGlzYWJsZWQgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcclxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJkaXNhYmxlZFwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ2hlY2tlZFxyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgMTAwXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgSFRNTCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IHJlcXVpcmUgYnJvd3NlcnMgdG8gcHJlc2VydmUgdGhlIHZhbHVlcyBvZiBib29sZWFuIGF0dHJpYnV0ZXNcclxuICogc3VjaCBhcyBjaGVja2VkLiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXHJcbiAqIElmIHdlIHB1dCBhbiBBbmd1bGFyIGludGVycG9sYXRpb24gZXhwcmVzc2lvbiBpbnRvIHN1Y2ggYW4gYXR0cmlidXRlIHRoZW4gdGhlXHJcbiAqIGJpbmRpbmcgaW5mb3JtYXRpb24gd291bGQgYmUgbG9zdCB3aGVuIHRoZSBicm93c2VyIHJlbW92ZXMgdGhlIGF0dHJpYnV0ZS5cclxuICogVGhlIGBuZ0NoZWNrZWRgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtIGZvciB0aGUgYGNoZWNrZWRgIGF0dHJpYnV0ZS5cclxuICogVGhpcyBjb21wbGVtZW50YXJ5IGRpcmVjdGl2ZSBpcyBub3QgcmVtb3ZlZCBieSB0aGUgYnJvd3NlciBhbmQgc28gcHJvdmlkZXNcclxuICogYSBwZXJtYW5lbnQgcmVsaWFibGUgcGxhY2UgdG8gc3RvcmUgdGhlIGJpbmRpbmcgaW5mb3JtYXRpb24uXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICBDaGVjayBtZSB0byBjaGVjayBib3RoOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJtYXN0ZXJcIj48YnIvPlxyXG4gICAgICAgIDxpbnB1dCBpZD1cImNoZWNrU2xhdmVcIiB0eXBlPVwiY2hlY2tib3hcIiBuZy1jaGVja2VkPVwibWFzdGVyXCI+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIGl0KCdzaG91bGQgY2hlY2sgYm90aCBjaGVja0JveGVzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY2hlY2tTbGF2ZScpKS5nZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdtYXN0ZXInKSkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjaGVja1NsYXZlJykpLmdldEF0dHJpYnV0ZSgnY2hlY2tlZCcpKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICpcclxuICogQGVsZW1lbnQgSU5QVVRcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NoZWNrZWQgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcclxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJjaGVja2VkXCIgd2lsbCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdSZWFkb25seVxyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgMTAwXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgSFRNTCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IHJlcXVpcmUgYnJvd3NlcnMgdG8gcHJlc2VydmUgdGhlIHZhbHVlcyBvZiBib29sZWFuIGF0dHJpYnV0ZXNcclxuICogc3VjaCBhcyByZWFkb25seS4gKFRoZWlyIHByZXNlbmNlIG1lYW5zIHRydWUgYW5kIHRoZWlyIGFic2VuY2UgbWVhbnMgZmFsc2UuKVxyXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxyXG4gKiBiaW5kaW5nIGluZm9ybWF0aW9uIHdvdWxkIGJlIGxvc3Qgd2hlbiB0aGUgYnJvd3NlciByZW1vdmVzIHRoZSBhdHRyaWJ1dGUuXHJcbiAqIFRoZSBgbmdSZWFkb25seWAgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0gZm9yIHRoZSBgcmVhZG9ubHlgIGF0dHJpYnV0ZS5cclxuICogVGhpcyBjb21wbGVtZW50YXJ5IGRpcmVjdGl2ZSBpcyBub3QgcmVtb3ZlZCBieSB0aGUgYnJvd3NlciBhbmQgc28gcHJvdmlkZXNcclxuICogYSBwZXJtYW5lbnQgcmVsaWFibGUgcGxhY2UgdG8gc3RvcmUgdGhlIGJpbmRpbmcgaW5mb3JtYXRpb24uXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICBDaGVjayBtZSB0byBtYWtlIHRleHQgcmVhZG9ubHk6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIj48YnIvPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLXJlYWRvbmx5PVwiY2hlY2tlZFwiIHZhbHVlPVwiSSdtIEFuZ3VsYXJcIi8+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIGl0KCdzaG91bGQgdG9nZ2xlIHJlYWRvbmx5IGF0dHInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnW3R5cGU9XCJ0ZXh0XCJdJykpLmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJ1t0eXBlPVwidGV4dFwiXScpKS5nZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JykpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKlxyXG4gKiBAZWxlbWVudCBJTlBVVFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nUmVhZG9ubHkgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcclxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJyZWFkb25seVwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nU2VsZWN0ZWRcclxuICogQHJlc3RyaWN0IEFcclxuICogQHByaW9yaXR5IDEwMFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIEhUTUwgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCByZXF1aXJlIGJyb3dzZXJzIHRvIHByZXNlcnZlIHRoZSB2YWx1ZXMgb2YgYm9vbGVhbiBhdHRyaWJ1dGVzXHJcbiAqIHN1Y2ggYXMgc2VsZWN0ZWQuIChUaGVpciBwcmVzZW5jZSBtZWFucyB0cnVlIGFuZCB0aGVpciBhYnNlbmNlIG1lYW5zIGZhbHNlLilcclxuICogSWYgd2UgcHV0IGFuIEFuZ3VsYXIgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uIGludG8gc3VjaCBhbiBhdHRyaWJ1dGUgdGhlbiB0aGVcclxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxyXG4gKiBUaGUgYG5nU2VsZWN0ZWRgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtIGZvciB0aGUgYHNlbGVjdGVkYCBhdHRyaWJ1dGUuXHJcbiAqIFRoaXMgY29tcGxlbWVudGFyeSBkaXJlY3RpdmUgaXMgbm90IHJlbW92ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIHNvIHByb3ZpZGVzXHJcbiAqIGEgcGVybWFuZW50IHJlbGlhYmxlIHBsYWNlIHRvIHN0b3JlIHRoZSBiaW5kaW5nIGluZm9ybWF0aW9uLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgQ2hlY2sgbWUgdG8gc2VsZWN0OiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiPjxici8+XHJcbiAgICAgICAgPHNlbGVjdD5cclxuICAgICAgICAgIDxvcHRpb24+SGVsbG8hPC9vcHRpb24+XHJcbiAgICAgICAgICA8b3B0aW9uIGlkPVwiZ3JlZXRcIiBuZy1zZWxlY3RlZD1cInNlbGVjdGVkXCI+R3JlZXRpbmdzITwvb3B0aW9uPlxyXG4gICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIHNlbGVjdCBHcmVldGluZ3MhJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZ3JlZXQnKSkuZ2V0QXR0cmlidXRlKCdzZWxlY3RlZCcpKS50b0JlRmFsc3koKTtcclxuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NlbGVjdGVkJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZ3JlZXQnKSkuZ2V0QXR0cmlidXRlKCdzZWxlY3RlZCcpKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICpcclxuICogQGVsZW1lbnQgT1BUSU9OXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTZWxlY3RlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxyXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcInNlbGVjdGVkXCIgd2lsbCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ09wZW5cclxuICogQHJlc3RyaWN0IEFcclxuICogQHByaW9yaXR5IDEwMFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIEhUTUwgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCByZXF1aXJlIGJyb3dzZXJzIHRvIHByZXNlcnZlIHRoZSB2YWx1ZXMgb2YgYm9vbGVhbiBhdHRyaWJ1dGVzXHJcbiAqIHN1Y2ggYXMgb3Blbi4gKFRoZWlyIHByZXNlbmNlIG1lYW5zIHRydWUgYW5kIHRoZWlyIGFic2VuY2UgbWVhbnMgZmFsc2UuKVxyXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxyXG4gKiBiaW5kaW5nIGluZm9ybWF0aW9uIHdvdWxkIGJlIGxvc3Qgd2hlbiB0aGUgYnJvd3NlciByZW1vdmVzIHRoZSBhdHRyaWJ1dGUuXHJcbiAqIFRoZSBgbmdPcGVuYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGBvcGVuYCBhdHRyaWJ1dGUuXHJcbiAqIFRoaXMgY29tcGxlbWVudGFyeSBkaXJlY3RpdmUgaXMgbm90IHJlbW92ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIHNvIHByb3ZpZGVzXHJcbiAqIGEgcGVybWFuZW50IHJlbGlhYmxlIHBsYWNlIHRvIHN0b3JlIHRoZSBiaW5kaW5nIGluZm9ybWF0aW9uLlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgIDxleGFtcGxlPlxyXG4gICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICAgQ2hlY2sgbWUgY2hlY2sgbXVsdGlwbGU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cIm9wZW5cIj48YnIvPlxyXG4gICAgICAgICA8ZGV0YWlscyBpZD1cImRldGFpbHNcIiBuZy1vcGVuPVwib3BlblwiPlxyXG4gICAgICAgICAgICA8c3VtbWFyeT5TaG93L0hpZGUgbWU8L3N1bW1hcnk+XHJcbiAgICAgICAgIDwvZGV0YWlscz5cclxuICAgICAgIDwvZmlsZT5cclxuICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgb3BlbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdkZXRhaWxzJykpLmdldEF0dHJpYnV0ZSgnb3BlbicpKS50b0JlRmFsc3koKTtcclxuICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdvcGVuJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RldGFpbHMnKSkuZ2V0QXR0cmlidXRlKCdvcGVuJykpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgICA8L2ZpbGU+XHJcbiAgICAgPC9leGFtcGxlPlxyXG4gKlxyXG4gKiBAZWxlbWVudCBERVRBSUxTXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdPcGVuIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXHJcbiAqICAgICB0aGVuIHNwZWNpYWwgYXR0cmlidXRlIFwib3BlblwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XHJcbiAqL1xyXG5cclxudmFyIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzID0ge307XHJcblxyXG5cclxuLy8gYm9vbGVhbiBhdHRycyBhcmUgZXZhbHVhdGVkXHJcbmZvckVhY2goQk9PTEVBTl9BVFRSLCBmdW5jdGlvbihwcm9wTmFtZSwgYXR0ck5hbWUpIHtcclxuICAvLyBiaW5kaW5nIHRvIG11bHRpcGxlIGlzIG5vdCBzdXBwb3J0ZWRcclxuICBpZiAocHJvcE5hbWUgPT0gXCJtdWx0aXBsZVwiKSByZXR1cm47XHJcblxyXG4gIHZhciBub3JtYWxpemVkID0gZGlyZWN0aXZlTm9ybWFsaXplKCduZy0nICsgYXR0ck5hbWUpO1xyXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICBwcmlvcml0eTogMTAwLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyW25vcm1hbGl6ZWRdLCBmdW5jdGlvbiBuZ0Jvb2xlYW5BdHRyV2F0Y2hBY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIGF0dHIuJHNldChhdHRyTmFtZSwgISF2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfTtcclxufSk7XHJcblxyXG4vLyBhbGlhc2VkIGlucHV0IGF0dHJzIGFyZSBldmFsdWF0ZWRcclxuZm9yRWFjaChBTElBU0VEX0FUVFIsIGZ1bmN0aW9uKGh0bWxBdHRyLCBuZ0F0dHIpIHtcclxuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlc1tuZ0F0dHJdID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcmlvcml0eTogMTAwLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIC8vc3BlY2lhbCBjYXNlIG5nUGF0dGVybiB3aGVuIGEgbGl0ZXJhbCByZWd1bGFyIGV4cHJlc3Npb24gdmFsdWVcclxuICAgICAgICAvL2lzIHVzZWQgYXMgdGhlIGV4cHJlc3Npb24gKHRoaXMgd2F5IHdlIGRvbid0IGhhdmUgdG8gd2F0Y2ggYW55dGhpbmcpLlxyXG4gICAgICAgIGlmIChuZ0F0dHIgPT09IFwibmdQYXR0ZXJuXCIgJiYgYXR0ci5uZ1BhdHRlcm4uY2hhckF0KDApID09IFwiL1wiKSB7XHJcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBhdHRyLm5nUGF0dGVybi5tYXRjaChSRUdFWF9TVFJJTkdfUkVHRVhQKTtcclxuICAgICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICBhdHRyLiRzZXQoXCJuZ1BhdHRlcm5cIiwgbmV3IFJlZ0V4cChtYXRjaFsxXSwgbWF0Y2hbMl0pKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJbbmdBdHRyXSwgZnVuY3Rpb24gbmdBdHRyQWxpYXNXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgYXR0ci4kc2V0KG5nQXR0ciwgdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH07XHJcbn0pO1xyXG5cclxuLy8gbmctc3JjLCBuZy1zcmNzZXQsIG5nLWhyZWYgYXJlIGludGVycG9sYXRlZFxyXG5mb3JFYWNoKFsnc3JjJywgJ3NyY3NldCcsICdocmVmJ10sIGZ1bmN0aW9uKGF0dHJOYW1lKSB7XHJcbiAgdmFyIG5vcm1hbGl6ZWQgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBhdHRyTmFtZSk7XHJcbiAgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXNbbm9ybWFsaXplZF0gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHByaW9yaXR5OiA5OSwgLy8gaXQgbmVlZHMgdG8gcnVuIGFmdGVyIHRoZSBhdHRyaWJ1dGVzIGFyZSBpbnRlcnBvbGF0ZWRcclxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICB2YXIgcHJvcE5hbWUgPSBhdHRyTmFtZSxcclxuICAgICAgICAgICAgbmFtZSA9IGF0dHJOYW1lO1xyXG5cclxuICAgICAgICBpZiAoYXR0ck5hbWUgPT09ICdocmVmJyAmJlxyXG4gICAgICAgICAgICB0b1N0cmluZy5jYWxsKGVsZW1lbnQucHJvcCgnaHJlZicpKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xyXG4gICAgICAgICAgbmFtZSA9ICd4bGlua0hyZWYnO1xyXG4gICAgICAgICAgYXR0ci4kYXR0cltuYW1lXSA9ICd4bGluazpocmVmJztcclxuICAgICAgICAgIHByb3BOYW1lID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF0dHIuJG9ic2VydmUobm9ybWFsaXplZCwgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKGF0dHJOYW1lID09PSAnaHJlZicpIHtcclxuICAgICAgICAgICAgICBhdHRyLiRzZXQobmFtZSwgbnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGF0dHIuJHNldChuYW1lLCB2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgLy8gb24gSUUsIGlmIFwibmc6c3JjXCIgZGlyZWN0aXZlIGRlY2xhcmF0aW9uIGlzIHVzZWQgYW5kIFwic3JjXCIgYXR0cmlidXRlIGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICAgIC8vIHRoZW4gY2FsbGluZyBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ZvbycpIGRvZXNuJ3QgZG8gYW55dGhpbmcsIHNvIHdlIG5lZWRcclxuICAgICAgICAgIC8vIHRvIHNldCB0aGUgcHJvcGVydHkgYXMgd2VsbCB0byBhY2hpZXZlIHRoZSBkZXNpcmVkIGVmZmVjdC5cclxuICAgICAgICAgIC8vIHdlIHVzZSBhdHRyW2F0dHJOYW1lXSB2YWx1ZSBzaW5jZSAkc2V0IGNhbiBzYW5pdGl6ZSB0aGUgdXJsLlxyXG4gICAgICAgICAgaWYgKG1zaWUgJiYgcHJvcE5hbWUpIGVsZW1lbnQucHJvcChwcm9wTmFtZSwgYXR0cltuYW1lXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfTtcclxufSk7XHJcblxyXG4vKiBnbG9iYWwgLW51bGxGb3JtQ3RybCwgLVNVQk1JVFRFRF9DTEFTUywgYWRkU2V0VmFsaWRpdHlNZXRob2Q6IHRydWVcclxuICovXHJcbnZhciBudWxsRm9ybUN0cmwgPSB7XHJcbiAgJGFkZENvbnRyb2w6IG5vb3AsXHJcbiAgJHJlbW92ZUNvbnRyb2w6IG5vb3AsXHJcbiAgJHNldFZhbGlkaXR5OiBub29wLFxyXG4gICQkc2V0UGVuZGluZzogbm9vcCxcclxuICAkc2V0RGlydHk6IG5vb3AsXHJcbiAgJHNldFByaXN0aW5lOiBub29wLFxyXG4gICRzZXRTdWJtaXR0ZWQ6IG5vb3AsXHJcbiAgJCRjbGVhckNvbnRyb2xWYWxpZGl0eTogbm9vcFxyXG59LFxyXG5TVUJNSVRURURfQ0xBU1MgPSAnbmctc3VibWl0dGVkJztcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgdHlwZVxyXG4gKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHByaXN0aW5lIFRydWUgaWYgdXNlciBoYXMgbm90IGludGVyYWN0ZWQgd2l0aCB0aGUgZm9ybSB5ZXQuXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJGRpcnR5IFRydWUgaWYgdXNlciBoYXMgYWxyZWFkeSBpbnRlcmFjdGVkIHdpdGggdGhlIGZvcm0uXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHZhbGlkIFRydWUgaWYgYWxsIG9mIHRoZSBjb250YWluaW5nIGZvcm1zIGFuZCBjb250cm9scyBhcmUgdmFsaWQuXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJGludmFsaWQgVHJ1ZSBpZiBhdCBsZWFzdCBvbmUgY29udGFpbmluZyBjb250cm9sIG9yIGZvcm0gaXMgaW52YWxpZC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkc3VibWl0dGVkIFRydWUgaWYgdXNlciBoYXMgc3VibWl0dGVkIHRoZSBmb3JtIGV2ZW4gaWYgaXRzIGludmFsaWQuXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkZXJyb3IgSXMgYW4gb2JqZWN0IGhhc2gsIGNvbnRhaW5pbmcgcmVmZXJlbmNlcyB0byBjb250cm9scyBvclxyXG4gKiAgZm9ybXMgd2l0aCBmYWlsaW5nIHZhbGlkYXRvcnMsIHdoZXJlOlxyXG4gKlxyXG4gKiAgLSBrZXlzIGFyZSB2YWxpZGF0aW9uIHRva2VucyAoZXJyb3IgbmFtZXMpLFxyXG4gKiAgLSB2YWx1ZXMgYXJlIGFycmF5cyBvZiBjb250cm9scyBvciBmb3JtcyB0aGF0IGhhdmUgYSBmYWlsaW5nIHZhbGlkYXRvciBmb3IgZ2l2ZW4gZXJyb3IgbmFtZS5cclxuICpcclxuICogIEJ1aWx0LWluIHZhbGlkYXRpb24gdG9rZW5zOlxyXG4gKlxyXG4gKiAgLSBgZW1haWxgXHJcbiAqICAtIGBtYXhgXHJcbiAqICAtIGBtYXhsZW5ndGhgXHJcbiAqICAtIGBtaW5gXHJcbiAqICAtIGBtaW5sZW5ndGhgXHJcbiAqICAtIGBudW1iZXJgXHJcbiAqICAtIGBwYXR0ZXJuYFxyXG4gKiAgLSBgcmVxdWlyZWRgXHJcbiAqICAtIGB1cmxgXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBgRm9ybUNvbnRyb2xsZXJgIGtlZXBzIHRyYWNrIG9mIGFsbCBpdHMgY29udHJvbHMgYW5kIG5lc3RlZCBmb3JtcyBhcyB3ZWxsIGFzIHRoZSBzdGF0ZSBvZiB0aGVtLFxyXG4gKiBzdWNoIGFzIGJlaW5nIHZhbGlkL2ludmFsaWQgb3IgZGlydHkvcHJpc3RpbmUuXHJcbiAqXHJcbiAqIEVhY2gge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGZvcm19IGRpcmVjdGl2ZSBjcmVhdGVzIGFuIGluc3RhbmNlXHJcbiAqIG9mIGBGb3JtQ29udHJvbGxlcmAuXHJcbiAqXHJcbiAqL1xyXG4vL2Fza3MgZm9yICRzY29wZSB0byBmb29sIHRoZSBCQyBjb250cm9sbGVyIG1vZHVsZVxyXG5Gb3JtQ29udHJvbGxlci4kaW5qZWN0ID0gWyckZWxlbWVudCcsICckYXR0cnMnLCAnJHNjb3BlJywgJyRhbmltYXRlJ107XHJcbmZ1bmN0aW9uIEZvcm1Db250cm9sbGVyKGVsZW1lbnQsIGF0dHJzLCAkc2NvcGUsICRhbmltYXRlKSB7XHJcbiAgdmFyIGZvcm0gPSB0aGlzLFxyXG4gICAgICBwYXJlbnRGb3JtID0gZWxlbWVudC5wYXJlbnQoKS5jb250cm9sbGVyKCdmb3JtJykgfHwgbnVsbEZvcm1DdHJsLFxyXG4gICAgICBjb250cm9scyA9IFtdO1xyXG5cclxuICAvLyBpbml0IHN0YXRlXHJcbiAgZm9ybS4kZXJyb3IgPSB7fTtcclxuICBmb3JtLiQkc3VjY2VzcyA9IHt9O1xyXG4gIGZvcm0uJHBlbmRpbmcgPSB1bmRlZmluZWQ7XHJcbiAgZm9ybS4kbmFtZSA9IGF0dHJzLm5hbWUgfHwgYXR0cnMubmdGb3JtO1xyXG4gIGZvcm0uJGRpcnR5ID0gZmFsc2U7XHJcbiAgZm9ybS4kcHJpc3RpbmUgPSB0cnVlO1xyXG4gIGZvcm0uJHZhbGlkID0gdHJ1ZTtcclxuICBmb3JtLiRpbnZhbGlkID0gZmFsc2U7XHJcbiAgZm9ybS4kc3VibWl0dGVkID0gZmFsc2U7XHJcblxyXG4gIHBhcmVudEZvcm0uJGFkZENvbnRyb2woZm9ybSk7XHJcblxyXG4gIC8vIFNldHVwIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbnRyb2xcclxuICBlbGVtZW50LmFkZENsYXNzKFBSSVNUSU5FX0NMQVNTKTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHJvbGxiYWNrVmlld1ZhbHVlXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSb2xsYmFjayBhbGwgZm9ybSBjb250cm9scyBwZW5kaW5nIHVwZGF0ZXMgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXHJcbiAgICpcclxuICAgKiBVcGRhdGVzIG1heSBiZSBwZW5kaW5nIGJ5IGEgZGVib3VuY2VkIGV2ZW50IG9yIGJlY2F1c2UgdGhlIGlucHV0IGlzIHdhaXRpbmcgZm9yIGEgc29tZSBmdXR1cmVcclxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gVGhpcyBtZXRob2QgaXMgdHlwaWNhbGx5IG5lZWRlZCBieSB0aGUgcmVzZXQgYnV0dG9uIG9mXHJcbiAgICogYSBmb3JtIHRoYXQgdXNlcyBgbmctbW9kZWwtb3B0aW9uc2AgdG8gcGVuZCB1cGRhdGVzLlxyXG4gICAqL1xyXG4gIGZvcm0uJHJvbGxiYWNrVmlld1ZhbHVlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3JFYWNoKGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XHJcbiAgICAgIGNvbnRyb2wuJHJvbGxiYWNrVmlld1ZhbHVlKCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkY29tbWl0Vmlld1ZhbHVlXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDb21taXQgYWxsIGZvcm0gY29udHJvbHMgcGVuZGluZyB1cGRhdGVzIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxyXG4gICAqXHJcbiAgICogVXBkYXRlcyBtYXkgYmUgcGVuZGluZyBieSBhIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBhIHNvbWUgZnV0dXJlXHJcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIFRoaXMgbWV0aG9kIGlzIHJhcmVseSBuZWVkZWQgYXMgYE5nTW9kZWxDb250cm9sbGVyYFxyXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxyXG4gICAqL1xyXG4gIGZvcm0uJGNvbW1pdFZpZXdWYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yRWFjaChjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xyXG4gICAgICBjb250cm9sLiRjb21taXRWaWV3VmFsdWUoKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRhZGRDb250cm9sXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZWdpc3RlciBhIGNvbnRyb2wgd2l0aCB0aGUgZm9ybS5cclxuICAgKlxyXG4gICAqIElucHV0IGVsZW1lbnRzIHVzaW5nIG5nTW9kZWxDb250cm9sbGVyIGRvIHRoaXMgYXV0b21hdGljYWxseSB3aGVuIHRoZXkgYXJlIGxpbmtlZC5cclxuICAgKi9cclxuICBmb3JtLiRhZGRDb250cm9sID0gZnVuY3Rpb24oY29udHJvbCkge1xyXG4gICAgLy8gQnJlYWtpbmcgY2hhbmdlIC0gYmVmb3JlLCBpbnB1dHMgd2hvc2UgbmFtZSB3YXMgXCJoYXNPd25Qcm9wZXJ0eVwiIHdlcmUgcXVpZXRseSBpZ25vcmVkXHJcbiAgICAvLyBhbmQgbm90IGFkZGVkIHRvIHRoZSBzY29wZS4gIE5vdyB3ZSB0aHJvdyBhbiBlcnJvci5cclxuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KGNvbnRyb2wuJG5hbWUsICdpbnB1dCcpO1xyXG4gICAgY29udHJvbHMucHVzaChjb250cm9sKTtcclxuXHJcbiAgICBpZiAoY29udHJvbC4kbmFtZSkge1xyXG4gICAgICBmb3JtW2NvbnRyb2wuJG5hbWVdID0gY29udHJvbDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkcmVtb3ZlQ29udHJvbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogRGVyZWdpc3RlciBhIGNvbnRyb2wgZnJvbSB0aGUgZm9ybS5cclxuICAgKlxyXG4gICAqIElucHV0IGVsZW1lbnRzIHVzaW5nIG5nTW9kZWxDb250cm9sbGVyIGRvIHRoaXMgYXV0b21hdGljYWxseSB3aGVuIHRoZXkgYXJlIGRlc3Ryb3llZC5cclxuICAgKi9cclxuICBmb3JtLiRyZW1vdmVDb250cm9sID0gZnVuY3Rpb24oY29udHJvbCkge1xyXG4gICAgaWYgKGNvbnRyb2wuJG5hbWUgJiYgZm9ybVtjb250cm9sLiRuYW1lXSA9PT0gY29udHJvbCkge1xyXG4gICAgICBkZWxldGUgZm9ybVtjb250cm9sLiRuYW1lXTtcclxuICAgIH1cclxuICAgIGZvckVhY2goZm9ybS4kcGVuZGluZywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcclxuICAgICAgZm9ybS4kc2V0VmFsaWRpdHkobmFtZSwgbnVsbCwgY29udHJvbCk7XHJcbiAgICB9KTtcclxuICAgIGZvckVhY2goZm9ybS4kZXJyb3IsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XHJcbiAgICAgIGZvcm0uJHNldFZhbGlkaXR5KG5hbWUsIG51bGwsIGNvbnRyb2wpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXJyYXlSZW1vdmUoY29udHJvbHMsIGNvbnRyb2wpO1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkc2V0VmFsaWRpdHlcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldHMgdGhlIHZhbGlkaXR5IG9mIGEgZm9ybSBjb250cm9sLlxyXG4gICAqXHJcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBhbHNvIHByb3BhZ2F0ZSB0byBwYXJlbnQgZm9ybXMuXHJcbiAgICovXHJcbiAgYWRkU2V0VmFsaWRpdHlNZXRob2Qoe1xyXG4gICAgY3RybDogdGhpcyxcclxuICAgICRlbGVtZW50OiBlbGVtZW50LFxyXG4gICAgc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBjb250cm9sKSB7XHJcbiAgICAgIHZhciBsaXN0ID0gb2JqZWN0W3Byb3BlcnR5XTtcclxuICAgICAgaWYgKCFsaXN0KSB7XHJcbiAgICAgICAgb2JqZWN0W3Byb3BlcnR5XSA9IFtjb250cm9sXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgaW5kZXggPSBsaXN0LmluZGV4T2YoY29udHJvbCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgbGlzdC5wdXNoKGNvbnRyb2wpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVuc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBjb250cm9sKSB7XHJcbiAgICAgIHZhciBsaXN0ID0gb2JqZWN0W3Byb3BlcnR5XTtcclxuICAgICAgaWYgKCFsaXN0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGFycmF5UmVtb3ZlKGxpc3QsIGNvbnRyb2wpO1xyXG4gICAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHBhcmVudEZvcm06IHBhcmVudEZvcm0sXHJcbiAgICAkYW5pbWF0ZTogJGFuaW1hdGVcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldERpcnR5XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGEgZGlydHkgc3RhdGUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIGFkZCB0aGUgJ25nLWRpcnR5JyBjbGFzcyBhbmQgc2V0IHRoZSBmb3JtIHRvIGEgZGlydHlcclxuICAgKiBzdGF0ZSAobmctZGlydHkgY2xhc3MpLiBUaGlzIG1ldGhvZCB3aWxsIGFsc28gcHJvcGFnYXRlIHRvIHBhcmVudCBmb3Jtcy5cclxuICAgKi9cclxuICBmb3JtLiRzZXREaXJ0eSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3MoZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xyXG4gICAgJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xyXG4gICAgZm9ybS4kZGlydHkgPSB0cnVlO1xyXG4gICAgZm9ybS4kcHJpc3RpbmUgPSBmYWxzZTtcclxuICAgIHBhcmVudEZvcm0uJHNldERpcnR5KCk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFByaXN0aW5lXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSAnbmctZGlydHknIGNsYXNzIGFuZCBzZXQgdGhlIGZvcm0gdG8gaXRzIHByaXN0aW5lXHJcbiAgICogc3RhdGUgKG5nLXByaXN0aW5lIGNsYXNzKS4gVGhpcyBtZXRob2Qgd2lsbCBhbHNvIHByb3BhZ2F0ZSB0byBhbGwgdGhlIGNvbnRyb2xzIGNvbnRhaW5lZFxyXG4gICAqIGluIHRoaXMgZm9ybS5cclxuICAgKlxyXG4gICAqIFNldHRpbmcgYSBmb3JtIGJhY2sgdG8gYSBwcmlzdGluZSBzdGF0ZSBpcyBvZnRlbiB1c2VmdWwgd2hlbiB3ZSB3YW50IHRvICdyZXVzZScgYSBmb3JtIGFmdGVyXHJcbiAgICogc2F2aW5nIG9yIHJlc2V0dGluZyBpdC5cclxuICAgKi9cclxuICBmb3JtLiRzZXRQcmlzdGluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICRhbmltYXRlLnNldENsYXNzKGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTLCBESVJUWV9DTEFTUyArICcgJyArIFNVQk1JVFRFRF9DTEFTUyk7XHJcbiAgICBmb3JtLiRkaXJ0eSA9IGZhbHNlO1xyXG4gICAgZm9ybS4kcHJpc3RpbmUgPSB0cnVlO1xyXG4gICAgZm9ybS4kc3VibWl0dGVkID0gZmFsc2U7XHJcbiAgICBmb3JFYWNoKGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XHJcbiAgICAgIGNvbnRyb2wuJHNldFByaXN0aW5lKCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkc2V0U3VibWl0dGVkXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGl0cyBzdWJtaXR0ZWQgc3RhdGUuXHJcbiAgICovXHJcbiAgZm9ybS4kc2V0U3VibWl0dGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgU1VCTUlUVEVEX0NMQVNTKTtcclxuICAgIGZvcm0uJHN1Ym1pdHRlZCA9IHRydWU7XHJcbiAgICBwYXJlbnRGb3JtLiRzZXRTdWJtaXR0ZWQoKTtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0Zvcm1cclxuICogQHJlc3RyaWN0IEVBQ1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogTmVzdGFibGUgYWxpYXMgb2Yge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGBmb3JtYH0gZGlyZWN0aXZlLiBIVE1MXHJcbiAqIGRvZXMgbm90IGFsbG93IG5lc3Rpbmcgb2YgZm9ybSBlbGVtZW50cy4gSXQgaXMgdXNlZnVsIHRvIG5lc3QgZm9ybXMsIGZvciBleGFtcGxlIGlmIHRoZSB2YWxpZGl0eSBvZiBhXHJcbiAqIHN1Yi1ncm91cCBvZiBjb250cm9scyBuZWVkcyB0byBiZSBkZXRlcm1pbmVkLlxyXG4gKlxyXG4gKiBOb3RlOiB0aGUgcHVycG9zZSBvZiBgbmdGb3JtYCBpcyB0byBncm91cCBjb250cm9scyxcclxuICogYnV0IG5vdCB0byBiZSBhIHJlcGxhY2VtZW50IGZvciB0aGUgYDxmb3JtPmAgdGFnIHdpdGggYWxsIG9mIGl0cyBjYXBhYmlsaXRpZXNcclxuICogKGUuZy4gcG9zdGluZyB0byB0aGUgc2VydmVyLCAuLi4pLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nRm9ybXxuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCBpbnRvXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkIHNjb3BlLCB1bmRlciB0aGlzIG5hbWUuXHJcbiAqXHJcbiAqL1xyXG5cclxuIC8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIGZvcm1cclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERpcmVjdGl2ZSB0aGF0IGluc3RhbnRpYXRlc1xyXG4gKiB7QGxpbmsgZm9ybS5Gb3JtQ29udHJvbGxlciBGb3JtQ29udHJvbGxlcn0uXHJcbiAqXHJcbiAqIElmIHRoZSBgbmFtZWAgYXR0cmlidXRlIGlzIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciBpcyBwdWJsaXNoZWQgb250byB0aGUgY3VycmVudCBzY29wZSB1bmRlclxyXG4gKiB0aGlzIG5hbWUuXHJcbiAqXHJcbiAqICMgQWxpYXM6IHtAbGluayBuZy5kaXJlY3RpdmU6bmdGb3JtIGBuZ0Zvcm1gfVxyXG4gKlxyXG4gKiBJbiBBbmd1bGFyIGZvcm1zIGNhbiBiZSBuZXN0ZWQuIFRoaXMgbWVhbnMgdGhhdCB0aGUgb3V0ZXIgZm9ybSBpcyB2YWxpZCB3aGVuIGFsbCBvZiB0aGUgY2hpbGRcclxuICogZm9ybXMgYXJlIHZhbGlkIGFzIHdlbGwuIEhvd2V2ZXIsIGJyb3dzZXJzIGRvIG5vdCBhbGxvdyBuZXN0aW5nIG9mIGA8Zm9ybT5gIGVsZW1lbnRzLCBzb1xyXG4gKiBBbmd1bGFyIHByb3ZpZGVzIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nRm9ybSBgbmdGb3JtYH0gZGlyZWN0aXZlIHdoaWNoIGJlaGF2ZXMgaWRlbnRpY2FsbHkgdG9cclxuICogYDxmb3JtPmAgYnV0IGNhbiBiZSBuZXN0ZWQuICBUaGlzIGFsbG93cyB5b3UgdG8gaGF2ZSBuZXN0ZWQgZm9ybXMsIHdoaWNoIGlzIHZlcnkgdXNlZnVsIHdoZW5cclxuICogdXNpbmcgQW5ndWxhciB2YWxpZGF0aW9uIGRpcmVjdGl2ZXMgaW4gZm9ybXMgdGhhdCBhcmUgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIHVzaW5nIHRoZVxyXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IGBuZ1JlcGVhdGB9IGRpcmVjdGl2ZS4gU2luY2UgeW91IGNhbm5vdCBkeW5hbWljYWxseSBnZW5lcmF0ZSB0aGUgYG5hbWVgXHJcbiAqIGF0dHJpYnV0ZSBvZiBpbnB1dCBlbGVtZW50cyB1c2luZyBpbnRlcnBvbGF0aW9uLCB5b3UgaGF2ZSB0byB3cmFwIGVhY2ggc2V0IG9mIHJlcGVhdGVkIGlucHV0cyBpbiBhblxyXG4gKiBgbmdGb3JtYCBkaXJlY3RpdmUgYW5kIG5lc3QgdGhlc2UgaW4gYW4gb3V0ZXIgYGZvcm1gIGVsZW1lbnQuXHJcbiAqXHJcbiAqXHJcbiAqICMgQ1NTIGNsYXNzZXNcclxuICogIC0gYG5nLXZhbGlkYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgdmFsaWQuXHJcbiAqICAtIGBuZy1pbnZhbGlkYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgaW52YWxpZC5cclxuICogIC0gYG5nLXByaXN0aW5lYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgcHJpc3RpbmUuXHJcbiAqICAtIGBuZy1kaXJ0eWAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIGRpcnR5LlxyXG4gKiAgLSBgbmctc3VibWl0dGVkYCBpcyBzZXQgaWYgdGhlIGZvcm0gd2FzIHN1Ym1pdHRlZC5cclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQgbmdBbmltYXRlIGNhbiBkZXRlY3QgZWFjaCBvZiB0aGVzZSBjbGFzc2VzIHdoZW4gYWRkZWQgYW5kIHJlbW92ZWQuXHJcbiAqXHJcbiAqXHJcbiAqICMgU3VibWl0dGluZyBhIGZvcm0gYW5kIHByZXZlbnRpbmcgdGhlIGRlZmF1bHQgYWN0aW9uXHJcbiAqXHJcbiAqIFNpbmNlIHRoZSByb2xlIG9mIGZvcm1zIGluIGNsaWVudC1zaWRlIEFuZ3VsYXIgYXBwbGljYXRpb25zIGlzIGRpZmZlcmVudCB0aGFuIGluIGNsYXNzaWNhbFxyXG4gKiByb3VuZHRyaXAgYXBwcywgaXQgaXMgZGVzaXJhYmxlIGZvciB0aGUgYnJvd3NlciBub3QgdG8gdHJhbnNsYXRlIHRoZSBmb3JtIHN1Ym1pc3Npb24gaW50byBhIGZ1bGxcclxuICogcGFnZSByZWxvYWQgdGhhdCBzZW5kcyB0aGUgZGF0YSB0byB0aGUgc2VydmVyLiBJbnN0ZWFkIHNvbWUgamF2YXNjcmlwdCBsb2dpYyBzaG91bGQgYmUgdHJpZ2dlcmVkXHJcbiAqIHRvIGhhbmRsZSB0aGUgZm9ybSBzdWJtaXNzaW9uIGluIGFuIGFwcGxpY2F0aW9uLXNwZWNpZmljIHdheS5cclxuICpcclxuICogRm9yIHRoaXMgcmVhc29uLCBBbmd1bGFyIHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbiAoZm9ybSBzdWJtaXNzaW9uIHRvIHRoZSBzZXJ2ZXIpIHVubGVzcyB0aGVcclxuICogYDxmb3JtPmAgZWxlbWVudCBoYXMgYW4gYGFjdGlvbmAgYXR0cmlidXRlIHNwZWNpZmllZC5cclxuICpcclxuICogWW91IGNhbiB1c2Ugb25lIG9mIHRoZSBmb2xsb3dpbmcgdHdvIHdheXMgdG8gc3BlY2lmeSB3aGF0IGphdmFzY3JpcHQgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlblxyXG4gKiBhIGZvcm0gaXMgc3VibWl0dGVkOlxyXG4gKlxyXG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgbmdTdWJtaXR9IGRpcmVjdGl2ZSBvbiB0aGUgZm9ybSBlbGVtZW50XHJcbiAqIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9IGRpcmVjdGl2ZSBvbiB0aGUgZmlyc3RcclxuICAqICBidXR0b24gb3IgaW5wdXQgZmllbGQgb2YgdHlwZSBzdWJtaXQgKGlucHV0W3R5cGU9c3VibWl0XSlcclxuICpcclxuICogVG8gcHJldmVudCBkb3VibGUgZXhlY3V0aW9uIG9mIHRoZSBoYW5kbGVyLCB1c2Ugb25seSBvbmUgb2YgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgbmdTdWJtaXR9XHJcbiAqIG9yIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSBkaXJlY3RpdmVzLlxyXG4gKiBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIGZvbGxvd2luZyBmb3JtIHN1Ym1pc3Npb24gcnVsZXMgaW4gdGhlIEhUTUwgc3BlY2lmaWNhdGlvbjpcclxuICpcclxuICogLSBJZiBhIGZvcm0gaGFzIG9ubHkgb25lIGlucHV0IGZpZWxkIHRoZW4gaGl0dGluZyBlbnRlciBpbiB0aGlzIGZpZWxkIHRyaWdnZXJzIGZvcm0gc3VibWl0XHJcbiAqIChgbmdTdWJtaXRgKVxyXG4gKiAtIGlmIGEgZm9ybSBoYXMgMisgaW5wdXQgZmllbGRzIGFuZCBubyBidXR0b25zIG9yIGlucHV0W3R5cGU9c3VibWl0XSB0aGVuIGhpdHRpbmcgZW50ZXJcclxuICogZG9lc24ndCB0cmlnZ2VyIHN1Ym1pdFxyXG4gKiAtIGlmIGEgZm9ybSBoYXMgb25lIG9yIG1vcmUgaW5wdXQgZmllbGRzIGFuZCBvbmUgb3IgbW9yZSBidXR0b25zIG9yIGlucHV0W3R5cGU9c3VibWl0XSB0aGVuXHJcbiAqIGhpdHRpbmcgZW50ZXIgaW4gYW55IG9mIHRoZSBpbnB1dCBmaWVsZHMgd2lsbCB0cmlnZ2VyIHRoZSBjbGljayBoYW5kbGVyIG9uIHRoZSAqZmlyc3QqIGJ1dHRvbiBvclxyXG4gKiBpbnB1dFt0eXBlPXN1Ym1pdF0gKGBuZ0NsaWNrYCkgKmFuZCogYSBzdWJtaXQgaGFuZGxlciBvbiB0aGUgZW5jbG9zaW5nIGZvcm0gKGBuZ1N1Ym1pdGApXHJcbiAqXHJcbiAqIEFueSBwZW5kaW5nIGBuZ01vZGVsT3B0aW9uc2AgY2hhbmdlcyB3aWxsIHRha2UgcGxhY2UgaW1tZWRpYXRlbHkgd2hlbiBhbiBlbmNsb3NpbmcgZm9ybSBpc1xyXG4gKiBzdWJtaXR0ZWQuIE5vdGUgdGhhdCBgbmdDbGlja2AgZXZlbnRzIHdpbGwgb2NjdXIgYmVmb3JlIHRoZSBtb2RlbCBpcyB1cGRhdGVkLiBVc2UgYG5nU3VibWl0YFxyXG4gKiB0byBoYXZlIGFjY2VzcyB0byB0aGUgdXBkYXRlZCBtb2RlbC5cclxuICpcclxuICogIyMgQW5pbWF0aW9uIEhvb2tzXHJcbiAqXHJcbiAqIEFuaW1hdGlvbnMgaW4gbmdGb3JtIGFyZSB0cmlnZ2VyZWQgd2hlbiBhbnkgb2YgdGhlIGFzc29jaWF0ZWQgQ1NTIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkLlxyXG4gKiBUaGVzZSBjbGFzc2VzIGFyZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLCBgLm5nLWludmFsaWRgIGFuZCBgLm5nLXZhbGlkYCBhcyB3ZWxsIGFzIGFueVxyXG4gKiBvdGhlciB2YWxpZGF0aW9ucyB0aGF0IGFyZSBwZXJmb3JtZWQgd2l0aGluIHRoZSBmb3JtLiBBbmltYXRpb25zIGluIG5nRm9ybSBhcmUgc2ltaWxhciB0byBob3dcclxuICogdGhleSB3b3JrIGluIG5nQ2xhc3MgYW5kIGFuaW1hdGlvbnMgY2FuIGJlIGhvb2tlZCBpbnRvIHVzaW5nIENTUyB0cmFuc2l0aW9ucywga2V5ZnJhbWVzIGFzIHdlbGxcclxuICogYXMgSlMgYW5pbWF0aW9ucy5cclxuICpcclxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGEgc2ltcGxlIHdheSB0byB1dGlsaXplIENTUyB0cmFuc2l0aW9ucyB0byBzdHlsZSBhIGZvcm0gZWxlbWVudFxyXG4gKiB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIGFzIGludmFsaWQgYWZ0ZXIgaXQgaGFzIGJlZW4gdmFsaWRhdGVkOlxyXG4gKlxyXG4gKiA8cHJlPlxyXG4gKiAvL2JlIHN1cmUgdG8gaW5jbHVkZSBuZ0FuaW1hdGUgYXMgYSBtb2R1bGUgdG8gaG9vayBpbnRvIG1vcmVcclxuICogLy9hZHZhbmNlZCBhbmltYXRpb25zXHJcbiAqIC5teS1mb3JtIHtcclxuICogICB0cmFuc2l0aW9uOjAuNXMgbGluZWFyIGFsbDtcclxuICogICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxuICogfVxyXG4gKiAubXktZm9ybS5uZy1pbnZhbGlkIHtcclxuICogICBiYWNrZ3JvdW5kOiByZWQ7XHJcbiAqICAgY29sb3I6d2hpdGU7XHJcbiAqIH1cclxuICogPC9wcmU+XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZSBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiIG1vZHVsZT1cImZvcm1FeGFtcGxlXCI+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZm9ybUV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignRm9ybUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgJHNjb3BlLnVzZXJUeXBlID0gJ2d1ZXN0JztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxzdHlsZT5cclxuICAgICAgICAubXktZm9ybSB7XHJcbiAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xyXG4gICAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLm15LWZvcm0ubmctaW52YWxpZCB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgPC9zdHlsZT5cclxuICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRm9ybUNvbnRyb2xsZXJcIiBjbGFzcz1cIm15LWZvcm1cIj5cclxuICAgICAgICAgdXNlclR5cGU6IDxpbnB1dCBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInVzZXJUeXBlXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlJlcXVpcmVkITwvc3Bhbj48YnI+XHJcbiAgICAgICAgIDx0dD51c2VyVHlwZSA9IHt7dXNlclR5cGV9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnI+XHJcbiAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxicj5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHVzZXJUeXBlID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyVHlwZScpKTtcclxuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2d1ZXN0Jyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgdXNlclR5cGUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VzZXJUeXBlJykpO1xyXG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xyXG4gICAgICAgICAgdmFyIHVzZXJJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXJUeXBlJykpO1xyXG5cclxuICAgICAgICAgIHVzZXJJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgdXNlcklucHV0LnNlbmRLZXlzKCcnKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0VxdWFsKCd1c2VyVHlwZSA9Jyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCBpbnRvXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkIHNjb3BlLCB1bmRlciB0aGlzIG5hbWUuXHJcbiAqL1xyXG52YXIgZm9ybURpcmVjdGl2ZUZhY3RvcnkgPSBmdW5jdGlvbihpc05nRm9ybSkge1xyXG4gIHJldHVybiBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpIHtcclxuICAgIHZhciBmb3JtRGlyZWN0aXZlID0ge1xyXG4gICAgICBuYW1lOiAnZm9ybScsXHJcbiAgICAgIHJlc3RyaWN0OiBpc05nRm9ybSA/ICdFQUMnIDogJ0UnLFxyXG4gICAgICBjb250cm9sbGVyOiBGb3JtQ29udHJvbGxlcixcclxuICAgICAgY29tcGlsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHByZTogZnVuY3Rpb24oc2NvcGUsIGZvcm1FbGVtZW50LCBhdHRyLCBjb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghYXR0ci5hY3Rpb24pIHtcclxuICAgICAgICAgICAgICAvLyB3ZSBjYW4ndCB1c2UganEgZXZlbnRzIGJlY2F1c2UgaWYgYSBmb3JtIGlzIGRlc3Ryb3llZCBkdXJpbmcgc3VibWlzc2lvbiB0aGUgZGVmYXVsdFxyXG4gICAgICAgICAgICAgIC8vIGFjdGlvbiBpcyBub3QgcHJldmVudGVkLiBzZWUgIzEyMzhcclxuICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgIC8vIElFIDkgaXMgbm90IGFmZmVjdGVkIGJlY2F1c2UgaXQgZG9lc24ndCBmaXJlIGEgc3VibWl0IGV2ZW50IGFuZCB0cnkgdG8gZG8gYSBmdWxsXHJcbiAgICAgICAgICAgICAgLy8gcGFnZSByZWxvYWQgaWYgdGhlIGZvcm0gd2FzIGRlc3Ryb3llZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBmb3JtIHZpYSBhIGNsaWNrIGhhbmRsZXJcclxuICAgICAgICAgICAgICAvLyBvbiBhIGJ1dHRvbiBpbiB0aGUgZm9ybS4gTG9va3MgbGlrZSBhbiBJRTkgc3BlY2lmaWMgYnVnLlxyXG4gICAgICAgICAgICAgIHZhciBoYW5kbGVGb3JtU3VibWlzc2lvbiA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJGNvbW1pdFZpZXdWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRTdWJtaXR0ZWQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0XHJcbiAgICAgICAgICAgICAgICAgID8gZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgICA6IGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7IC8vIElFXHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lckZuKGZvcm1FbGVtZW50WzBdLCAnc3VibWl0JywgaGFuZGxlRm9ybVN1Ym1pc3Npb24pO1xyXG5cclxuICAgICAgICAgICAgICAvLyB1bnJlZ2lzdGVyIHRoZSBwcmV2ZW50RGVmYXVsdCBsaXN0ZW5lciBzbyB0aGF0IHdlIGRvbid0IG5vdCBsZWFrIG1lbW9yeSBidXQgaW4gYVxyXG4gICAgICAgICAgICAgIC8vIHdheSB0aGF0IHdpbGwgYWNoaWV2ZSB0aGUgcHJldmVudGlvbiBvZiB0aGUgZGVmYXVsdCBhY3Rpb24uXHJcbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lckZuKGZvcm1FbGVtZW50WzBdLCAnc3VibWl0JywgaGFuZGxlRm9ybVN1Ym1pc3Npb24pO1xyXG4gICAgICAgICAgICAgICAgfSwgMCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcGFyZW50Rm9ybUN0cmwgPSBmb3JtRWxlbWVudC5wYXJlbnQoKS5jb250cm9sbGVyKCdmb3JtJyksXHJcbiAgICAgICAgICAgICAgICBhbGlhcyA9IGF0dHIubmFtZSB8fCBhdHRyLm5nRm9ybTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhbGlhcykge1xyXG4gICAgICAgICAgICAgIHNldHRlcihzY29wZSwgYWxpYXMsIGNvbnRyb2xsZXIsIGFsaWFzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyZW50Rm9ybUN0cmwpIHtcclxuICAgICAgICAgICAgICBmb3JtRWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudEZvcm1DdHJsLiRyZW1vdmVDb250cm9sKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFsaWFzKSB7XHJcbiAgICAgICAgICAgICAgICAgIHNldHRlcihzY29wZSwgYWxpYXMsIHVuZGVmaW5lZCwgYWxpYXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXh0ZW5kKGNvbnRyb2xsZXIsIG51bGxGb3JtQ3RybCk7IC8vc3RvcCBwcm9wYWdhdGluZyBjaGlsZCBkZXN0cnVjdGlvbiBoYW5kbGVycyB1cHdhcmRzXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBmb3JtRGlyZWN0aXZlO1xyXG4gIH1dO1xyXG59O1xyXG5cclxudmFyIGZvcm1EaXJlY3RpdmUgPSBmb3JtRGlyZWN0aXZlRmFjdG9yeSgpO1xyXG52YXIgbmdGb3JtRGlyZWN0aXZlID0gZm9ybURpcmVjdGl2ZUZhY3RvcnkodHJ1ZSk7XHJcblxyXG4vKiBnbG9iYWwgVkFMSURfQ0xBU1M6IHRydWUsXHJcbiAgSU5WQUxJRF9DTEFTUzogdHJ1ZSxcclxuICBQUklTVElORV9DTEFTUzogdHJ1ZSxcclxuICBESVJUWV9DTEFTUzogdHJ1ZSxcclxuICBVTlRPVUNIRURfQ0xBU1M6IHRydWUsXHJcbiAgVE9VQ0hFRF9DTEFTUzogdHJ1ZSxcclxuKi9cclxuXHJcbi8vIFJlZ2V4IGNvZGUgaXMgb2J0YWluZWQgZnJvbSBTTzogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzE0MzA3MC9qYXZhc2NyaXB0LXJlZ2V4LWlzby1kYXRldGltZSNhbnN3ZXItMzE0MzIzMVxyXG52YXIgSVNPX0RBVEVfUkVHRVhQID0gL1xcZHs0fS1bMDFdXFxkLVswLTNdXFxkVFswLTJdXFxkOlswLTVdXFxkOlswLTVdXFxkXFwuXFxkKyhbKy1dWzAtMl1cXGQ6WzAtNV1cXGR8WikvO1xyXG52YXIgVVJMX1JFR0VYUCA9IC9eKGZ0cHxodHRwfGh0dHBzKTpcXC9cXC8oXFx3Kzp7MCwxfVxcdypAKT8oXFxTKykoOlswLTldKyk/KFxcL3xcXC8oW1xcdyMhOi4/Kz0mJUAhXFwtXFwvXSkpPyQvO1xyXG52YXIgRU1BSUxfUkVHRVhQID0gL15bYS16MC05ISMkJSYnKitcXC89P15fYHt8fX4uLV0rQFthLXowLTldKFthLXowLTktXSpbYS16MC05XSk/KFxcLlthLXowLTldKFthLXowLTktXSpbYS16MC05XSk/KSokL2k7XHJcbnZhciBOVU1CRVJfUkVHRVhQID0gL15cXHMqKFxcLXxcXCspPyhcXGQrfChcXGQqKFxcLlxcZCopKSlcXHMqJC87XHJcbnZhciBEQVRFX1JFR0VYUCA9IC9eKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSkkLztcclxudmFyIERBVEVUSU1FTE9DQUxfUkVHRVhQID0gL14oXFxkezR9KS0oXFxkXFxkKS0oXFxkXFxkKVQoXFxkXFxkKTooXFxkXFxkKSg/OjooXFxkXFxkKSk/JC87XHJcbnZhciBXRUVLX1JFR0VYUCA9IC9eKFxcZHs0fSktVyhcXGRcXGQpJC87XHJcbnZhciBNT05USF9SRUdFWFAgPSAvXihcXGR7NH0pLShcXGRcXGQpJC87XHJcbnZhciBUSU1FX1JFR0VYUCA9IC9eKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkpPyQvO1xyXG52YXIgREVGQVVMVF9SRUdFWFAgPSAvKFxccyt8XilkZWZhdWx0KFxccyt8JCkvO1xyXG5cclxudmFyICRuZ01vZGVsTWluRXJyID0gbmV3IG1pbkVycignbmdNb2RlbCcpO1xyXG5cclxudmFyIGlucHV0VHlwZSA9IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbdGV4dF1cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFN0YW5kYXJkIEhUTUwgdGV4dCBpbnB1dCB3aXRoIGFuZ3VsYXIgZGF0YSBiaW5kaW5nLCBpbmhlcml0ZWQgYnkgbW9zdCBvZiB0aGUgYGlucHV0YCBlbGVtZW50cy5cclxuICAgKlxyXG4gICAqICpOT1RFKiBOb3QgZXZlcnkgZmVhdHVyZSBvZmZlcmVkIGlzIGF2YWlsYWJsZSBmb3IgYWxsIGlucHV0IHR5cGVzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxyXG4gICAqICAgIG1pbmxlbmd0aC5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAgICogICAgbWF4bGVuZ3RoLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCB0aGVcclxuICAgKiAgICBSZWdFeHAgcGF0dGVybiBleHByZXNzaW9uLiBFeHBlY3RlZCB2YWx1ZSBpcyBgL3JlZ2V4cC9gIGZvciBpbmxpbmUgcGF0dGVybnMgb3IgYHJlZ2V4cGAgZm9yXHJcbiAgICogICAgcGF0dGVybnMgZGVmaW5lZCBhcyBzY29wZSBleHByZXNzaW9ucy5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IFtuZ1RyaW09dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlIEFuZ3VsYXIgd2lsbCBub3QgYXV0b21hdGljYWxseSB0cmltIHRoZSBpbnB1dC5cclxuICAgKiAgICBUaGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkIGZvciBpbnB1dFt0eXBlPXBhc3N3b3JkXSBjb250cm9scywgd2hpY2ggd2lsbCBuZXZlciB0cmltIHRoZVxyXG4gICAqICAgIGlucHV0LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICAgPGV4YW1wbGUgbmFtZT1cInRleHQtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwidGV4dElucHV0RXhhbXBsZVwiPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3RleHRJbnB1dEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJ2d1ZXN0JztcclxuICAgICAgICAgICAgICAgJHNjb3BlLndvcmQgPSAvXlxccypcXHcqXFxzKiQvO1xyXG4gICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgIFNpbmdsZSB3b3JkOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmctcGF0dGVybj1cIndvcmRcIiByZXF1aXJlZCBuZy10cmltPVwiZmFsc2VcIj5cclxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucGF0dGVyblwiPlxyXG4gICAgICAgICAgICAgU2luZ2xlIHdvcmQgb25seSE8L3NwYW4+XHJcblxyXG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3t0ZXh0fX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgICB2YXIgdGV4dCA9IGVsZW1lbnQoYnkuYmluZGluZygndGV4dCcpKTtcclxuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuICAgICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9Db250YWluKCdndWVzdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3RleHQgPScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbXVsdGkgd29yZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnaGVsbG8gd29ybGQnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICd0ZXh0JzogdGV4dElucHV0VHlwZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAgICogQG5hbWUgaW5wdXRbZGF0ZV1cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIElucHV0IHdpdGggZGF0ZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcclxuICAgICAqIHRoZSBIVE1MNSBkYXRlIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxyXG4gICAgICogZGF0ZSBmb3JtYXQgKHl5eXktTU0tZGQpLCBmb3IgZXhhbXBsZTogYDIwMDktMDEtMDZgLiBTaW5jZSBtYW55XHJcbiAgICAgKiBtb2Rlcm4gYnJvd3NlcnMgZG8gbm90IHlldCBzdXBwb3J0IHRoaXMgaW5wdXQgdHlwZSwgaXQgaXMgaW1wb3J0YW50IHRvIHByb3ZpZGUgY3VlcyB0byB1c2VycyBvbiB0aGVcclxuICAgICAqIGV4cGVjdGVkIGlucHV0IGZvcm1hdCB2aWEgYSBwbGFjZWhvbGRlciBvciBsYWJlbC4gVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xyXG4gICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlIGFcclxuICAgICAqIHZhbGlkIElTTyBkYXRlIHN0cmluZyAoeXl5eS1NTS1kZCkuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuIFRoaXMgbXVzdCBiZVxyXG4gICAgICogYSB2YWxpZCBJU08gZGF0ZSBzdHJpbmcgKHl5eXktTU0tZGQpLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxyXG4gICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICA8ZXhhbXBsZSBuYW1lPVwiZGF0ZS1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJkYXRlSW5wdXRFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZGF0ZUlucHV0RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgICRzY29wZS52YWx1ZSA9IG5ldyBEYXRlKDIwMTMsIDksIDIyKTtcclxuICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XHJcbiAgICAgICAgICBQaWNrIGEgZGF0ZSBpbiAyMDEzOlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInZhbHVlXCJcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInl5eXktTU0tZGRcIiBtaW49XCIyMDEzLTAxLTAxXCIgbWF4PVwiMjAxMy0xMi0zMVwiIHJlcXVpcmVkIC8+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZGF0ZVwiPlxyXG4gICAgICAgICAgICAgIE5vdCBhIHZhbGlkIGRhdGUhPC9zcGFuPlxyXG4gICAgICAgICAgIDx0dD52YWx1ZSA9IHt7dmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRcIn19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICAgIDwvZm9ybT5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygndmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRcIicpKTtcclxuICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSk7XHJcblxyXG4gICAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgICAgLy8gc2VuZGluZyBrZXlzIHRvIGFsbCBrbm93biBIVE1MNSBpbnB1dCBjb250cm9sc1xyXG4gICAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cclxuICAgICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcclxuICAgICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXHJcbiAgICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXHJcbiAgICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXHJcbiAgICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XHJcbiAgICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLTEwLTIyJyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2V0SW5wdXQoJycpO1xyXG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xyXG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzZXRJbnB1dCgnMjAxNS0wMS0wMScpO1xyXG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcclxuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDwvZXhhbXBsZT5cclxuICAgICAqL1xyXG4gICdkYXRlJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnZGF0ZScsIERBVEVfUkVHRVhQLFxyXG4gICAgICAgICBjcmVhdGVEYXRlUGFyc2VyKERBVEVfUkVHRVhQLCBbJ3l5eXknLCAnTU0nLCAnZGQnXSksXHJcbiAgICAgICAgICd5eXl5LU1NLWRkJyksXHJcblxyXG4gICAvKipcclxuICAgICogQG5nZG9jIGlucHV0XHJcbiAgICAqIEBuYW1lIGlucHV0W2RhdGVUaW1lTG9jYWxdXHJcbiAgICAqXHJcbiAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgKiBJbnB1dCB3aXRoIGRhdGV0aW1lIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxyXG4gICAgKiB0aGUgSFRNTDUgZGF0ZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXHJcbiAgICAqIGxvY2FsIGRhdGV0aW1lIGZvcm1hdCAoeXl5eS1NTS1kZFRISDptbTpzcyksIGZvciBleGFtcGxlOiBgMjAxMC0xMi0yOFQxNDo1NzowMGAuIFRoZSBtb2RlbCBtdXN0IGJlIGEgRGF0ZSBvYmplY3QuXHJcbiAgICAqXHJcbiAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcclxuICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmUgYVxyXG4gICAgKiB2YWxpZCBJU08gZGF0ZXRpbWUgZm9ybWF0ICh5eXl5LU1NLWRkVEhIOm1tOnNzKS5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcclxuICAgICogYSB2YWxpZCBJU08gZGF0ZXRpbWUgZm9ybWF0ICh5eXl5LU1NLWRkVEhIOm1tOnNzKS5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAgKlxyXG4gICAgKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbmFtZT1cImRhdGV0aW1lbG9jYWwtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiZGF0ZUV4YW1wbGVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2RhdGVFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUudmFsdWUgPSBuZXcgRGF0ZSgyMDEwLCAxMSwgMjgsIDE0LCA1Nyk7XHJcbiAgICAgICAgICB9XSk7XHJcbiAgICAgIDwvc2NyaXB0PlxyXG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XHJcbiAgICAgICAgUGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZXRpbWUtbG9jYWxcIiBpZD1cImV4YW1wbGVJbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwidmFsdWVcIlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cInl5eXktTU0tZGRUSEg6bW06c3NcIiBtaW49XCIyMDAxLTAxLTAxVDAwOjAwOjAwXCIgbWF4PVwiMjAxMy0xMi0zMVQwMDowMDowMFwiIHJlcXVpcmVkIC8+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZGF0ZXRpbWVsb2NhbFwiPlxyXG4gICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cclxuICAgICAgICA8dHQ+dmFsdWUgPSB7e3ZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCd2YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFRISDptbTpzc1wiJykpO1xyXG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpO1xyXG5cclxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcclxuICAgICAgLy8gc2VuZGluZyBrZXlzIHRvIGFsbCBrbm93biBIVE1MNSBpbnB1dCBjb250cm9sc1xyXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cclxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XHJcbiAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cclxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXHJcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xyXG4gICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcclxuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEwLTEyLTI4VDE0OjU3OjAwJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRJbnB1dCgnMjAxNS0wMS0wMVQyMzo1OTowMCcpO1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAgICAqL1xyXG4gICdkYXRldGltZS1sb2NhbCc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ2RhdGV0aW1lbG9jYWwnLCBEQVRFVElNRUxPQ0FMX1JFR0VYUCxcclxuICAgICAgY3JlYXRlRGF0ZVBhcnNlcihEQVRFVElNRUxPQ0FMX1JFR0VYUCwgWyd5eXl5JywgJ01NJywgJ2RkJywgJ0hIJywgJ21tJywgJ3NzJ10pLFxyXG4gICAgICAneXl5eS1NTS1kZFRISDptbTpzcycpLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgaW5wdXRcclxuICAgKiBAbmFtZSBpbnB1dFt0aW1lXVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogSW5wdXQgd2l0aCB0aW1lIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxyXG4gICAqIHRoZSBIVE1MNSBkYXRlIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcclxuICAgKiBsb2NhbCB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLCBmb3IgZXhhbXBsZTogYDE0OjU3OjAwYC4gTW9kZWwgbXVzdCBiZSBhIERhdGUgb2JqZWN0LiBUaGlzIGJpbmRpbmcgd2lsbCBhbHdheXMgb3V0cHV0IGFcclxuICAgKiBEYXRlIG9iamVjdCB0byB0aGUgbW9kZWwgb2YgSmFudWFyeSAxLCAxOTcwLCBvciBsb2NhbCBkYXRlIGBuZXcgRGF0ZSgxOTcwLCAwLCAxLCBISCwgbW0sIHNzKWAuXHJcbiAgICpcclxuICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXHJcbiAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuIFRoaXMgbXVzdCBiZSBhXHJcbiAgICogdmFsaWQgSVNPIHRpbWUgZm9ybWF0IChISDptbTpzcykuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmUgYVxyXG4gICAqIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxyXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBuYW1lPVwidGltZS1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ0aW1lRXhhbXBsZVwiPlxyXG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgIDxzY3JpcHQ+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCd0aW1lRXhhbXBsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUudmFsdWUgPSBuZXcgRGF0ZSgxOTcwLCAwLCAxLCAxNCwgNTcsIDApO1xyXG4gICAgICAgIH1dKTtcclxuICAgICA8L3NjcmlwdD5cclxuICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XHJcbiAgICAgICAgUGljayBhIGJldHdlZW4gOGFtIGFuZCA1cG06XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0aW1lXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInZhbHVlXCJcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJISDptbTpzc1wiIG1pbj1cIjA4OjAwOjAwXCIgbWF4PVwiMTc6MDA6MDBcIiByZXF1aXJlZCAvPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnRpbWVcIj5cclxuICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XHJcbiAgICAgICAgPHR0PnZhbHVlID0ge3t2YWx1ZSB8IGRhdGU6IFwiSEg6bW06c3NcIn19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICA8L2Zvcm0+XHJcbiAgIDwvZmlsZT5cclxuICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbHVlIHwgZGF0ZTogXCJISDptbTpzc1wiJykpO1xyXG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpO1xyXG5cclxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcclxuICAgICAgLy8gc2VuZGluZyBrZXlzIHRvIGFsbCBrbm93biBIVE1MNSBpbnB1dCBjb250cm9sc1xyXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cclxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XHJcbiAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cclxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXHJcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xyXG4gICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcclxuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcxNDo1NzowMCcpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRJbnB1dCgnJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2V0SW5wdXQoJzIzOjU5OjAwJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICB9KTtcclxuICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAgICovXHJcbiAgJ3RpbWUnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCd0aW1lJywgVElNRV9SRUdFWFAsXHJcbiAgICAgIGNyZWF0ZURhdGVQYXJzZXIoVElNRV9SRUdFWFAsIFsnSEgnLCAnbW0nLCAnc3MnXSksXHJcbiAgICAgJ0hIOm1tOnNzJyksXHJcblxyXG4gICAvKipcclxuICAgICogQG5nZG9jIGlucHV0XHJcbiAgICAqIEBuYW1lIGlucHV0W3dlZWtdXHJcbiAgICAqXHJcbiAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgKiBJbnB1dCB3aXRoIHdlZWstb2YtdGhlLXllYXIgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24gdG8gRGF0ZS4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcclxuICAgICogdGhlIEhUTUw1IHdlZWsgaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0aGUgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxyXG4gICAgKiB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLCBmb3IgZXhhbXBsZTogYDIwMTMtVzAyYC4gVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QuXHJcbiAgICAqXHJcbiAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcclxuICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmUgYVxyXG4gICAgKiB2YWxpZCBJU08gd2VlayBmb3JtYXQgKHl5eXktVyMjKS5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcclxuICAgICogYSB2YWxpZCBJU08gd2VlayBmb3JtYXQgKHl5eXktVyMjKS5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAgKlxyXG4gICAgKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbmFtZT1cIndlZWstaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwid2Vla0V4YW1wbGVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxzY3JpcHQ+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCd3ZWVrRXhhbXBsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUudmFsdWUgPSBuZXcgRGF0ZSgyMDEzLCAwLCAzKTtcclxuICAgICAgICB9XSk7XHJcbiAgICAgIDwvc2NyaXB0PlxyXG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XHJcbiAgICAgICAgUGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOlxyXG4gICAgICAgIDxpbnB1dCBpZD1cImV4YW1wbGVJbnB1dFwiIHR5cGU9XCJ3ZWVrXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ2YWx1ZVwiXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiWVlZWS1XIyNcIiBtaW49XCIyMDEyLVczMlwiIG1heD1cIjIwMTMtVzUyXCIgcmVxdWlyZWQgLz5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci53ZWVrXCI+XHJcbiAgICAgICAgICAgIE5vdCBhIHZhbGlkIGRhdGUhPC9zcGFuPlxyXG4gICAgICAgIDx0dD52YWx1ZSA9IHt7dmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCd2YWx1ZSB8IGRhdGU6IFwieXl5eS1Xd3dcIicpKTtcclxuICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xyXG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKTtcclxuXHJcbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcclxuICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXHJcbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xyXG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXHJcbiAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xyXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcclxuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XHJcbiAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy1XMDEnKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2V0SW5wdXQoJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcyMDE1LVcwMScpO1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAgICAqL1xyXG4gICd3ZWVrJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnd2VlaycsIFdFRUtfUkVHRVhQLCB3ZWVrUGFyc2VyLCAneXl5eS1Xd3cnKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbbW9udGhdXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBJbnB1dCB3aXRoIG1vbnRoIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxyXG4gICAqIHRoZSBIVE1MNSBtb250aCBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXHJcbiAgICogbW9udGggZm9ybWF0ICh5eXl5LU1NKSwgZm9yIGV4YW1wbGU6IGAyMDA5LTAxYC4gVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QuIEluIHRoZSBldmVudCB0aGUgbW9kZWwgaXNcclxuICAgKiBub3Qgc2V0IHRvIHRoZSBmaXJzdCBvZiB0aGUgbW9udGgsIHRoZSBmaXJzdCBvZiB0aGF0IG1vZGVsJ3MgbW9udGggaXMgYXNzdW1lZC5cclxuICAgKlxyXG4gICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcclxuICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlXHJcbiAgICogYSB2YWxpZCBJU08gbW9udGggZm9ybWF0ICh5eXl5LU1NKS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuIFRoaXMgbXVzdFxyXG4gICAqIGJlIGEgdmFsaWQgSVNPIG1vbnRoIGZvcm1hdCAoeXl5eS1NTSkuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xyXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXHJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG5hbWU9XCJtb250aC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJtb250aEV4YW1wbGVcIj5cclxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICA8c2NyaXB0PlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnbW9udGhFeGFtcGxlJywgW10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICRzY29wZS52YWx1ZSA9IG5ldyBEYXRlKDIwMTMsIDksIDEpO1xyXG4gICAgICAgIH1dKTtcclxuICAgICA8L3NjcmlwdD5cclxuICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XHJcbiAgICAgICBQaWNrIGEgbW9udGggaW50IDIwMTM6XHJcbiAgICAgICA8aW5wdXQgaWQ9XCJleGFtcGxlSW5wdXRcIiB0eXBlPVwibW9udGhcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInZhbHVlXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwieXl5eS1NTVwiIG1pbj1cIjIwMTMtMDFcIiBtYXg9XCIyMDEzLTEyXCIgcmVxdWlyZWQgLz5cclxuICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxyXG4gICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLm1vbnRoXCI+XHJcbiAgICAgICAgICBOb3QgYSB2YWxpZCBtb250aCE8L3NwYW4+XHJcbiAgICAgICA8dHQ+dmFsdWUgPSB7e3ZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NXCJ9fTwvdHQ+PGJyLz5cclxuICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICA8L2Zvcm0+XHJcbiAgIDwvZmlsZT5cclxuICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NXCInKSk7XHJcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSk7XHJcblxyXG4gICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxyXG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXHJcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxyXG4gICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcclxuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxyXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcclxuICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXHJcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xyXG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzIwMTMtMTAnKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2V0SW5wdXQoJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcyMDE1LTAxJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICB9KTtcclxuICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAgICovXHJcbiAgJ21vbnRoJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnbW9udGgnLCBNT05USF9SRUdFWFAsXHJcbiAgICAgY3JlYXRlRGF0ZVBhcnNlcihNT05USF9SRUdFWFAsIFsneXl5eScsICdNTSddKSxcclxuICAgICAneXl5eS1NTScpLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgaW5wdXRcclxuICAgKiBAbmFtZSBpbnB1dFtudW1iZXJdXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUZXh0IGlucHV0IHdpdGggbnVtYmVyIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBTZXRzIHRoZSBgbnVtYmVyYCB2YWxpZGF0aW9uXHJcbiAgICogZXJyb3IgaWYgbm90IGEgdmFsaWQgbnVtYmVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxyXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXHJcbiAgICogICAgbWlubGVuZ3RoLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNYXhsZW5ndGggU2V0cyBgbWF4bGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbG9uZ2VyIHRoYW5cclxuICAgKiAgICBtYXhsZW5ndGguXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZVxyXG4gICAqICAgIFJlZ0V4cCBwYXR0ZXJuIGV4cHJlc3Npb24uIEV4cGVjdGVkIHZhbHVlIGlzIGAvcmVnZXhwL2AgZm9yIGlubGluZSBwYXR0ZXJucyBvciBgcmVnZXhwYCBmb3JcclxuICAgKiAgICBwYXR0ZXJucyBkZWZpbmVkIGFzIHNjb3BlIGV4cHJlc3Npb25zLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZVxyXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwibnVtYmVyLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIm51bWJlckV4YW1wbGVcIj5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgICAkc2NvcGUudmFsdWUgPSAxMjtcclxuICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgICBOdW1iZXI6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ2YWx1ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluPVwiMFwiIG1heD1cIjk5XCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLm51bWJlclwiPlxyXG4gICAgICAgICAgICAgTm90IHZhbGlkIG51bWJlciE8L3NwYW4+XHJcbiAgICAgICAgICAgPHR0PnZhbHVlID0ge3t2YWx1ZX19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCd2YWx1ZScpKTtcclxuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuICAgICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzEyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJzEyMycpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICdudW1iZXInOiBudW1iZXJJbnB1dFR5cGUsXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgaW5wdXRcclxuICAgKiBAbmFtZSBpbnB1dFt1cmxdXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUZXh0IGlucHV0IHdpdGggVVJMIHZhbGlkYXRpb24uIFNldHMgdGhlIGB1cmxgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBjb250ZW50IGlzIG5vdCBhXHJcbiAgICogdmFsaWQgVVJMLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxyXG4gICAqICAgIG1pbmxlbmd0aC5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAgICogICAgbWF4bGVuZ3RoLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCB0aGVcclxuICAgKiAgICBSZWdFeHAgcGF0dGVybiBleHByZXNzaW9uLiBFeHBlY3RlZCB2YWx1ZSBpcyBgL3JlZ2V4cC9gIGZvciBpbmxpbmUgcGF0dGVybnMgb3IgYHJlZ2V4cGAgZm9yXHJcbiAgICogICAgcGF0dGVybnMgZGVmaW5lZCBhcyBzY29wZSBleHByZXNzaW9ucy5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICAgPGV4YW1wbGUgbmFtZT1cInVybC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ1cmxFeGFtcGxlXCI+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndXJsRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgJHNjb3BlLnRleHQgPSAnaHR0cDovL2dvb2dsZS5jb20nO1xyXG4gICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgIFVSTDogPGlucHV0IHR5cGU9XCJ1cmxcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInRleHRcIiByZXF1aXJlZD5cclxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudXJsXCI+XHJcbiAgICAgICAgICAgICBOb3QgdmFsaWQgdXJsITwvc3Bhbj5cclxuICAgICAgICAgICA8dHQ+dGV4dCA9IHt7dGV4dH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci51cmwgPSB7eyEhbXlGb3JtLiRlcnJvci51cmx9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3RleHQnKSk7XHJcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0ZXh0JykpO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignaHR0cDovL2dvb2dsZS5jb20nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG5vdCB1cmwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2JveCcpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICA8L2V4YW1wbGU+XHJcbiAgICovXHJcbiAgJ3VybCc6IHVybElucHV0VHlwZSxcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAqIEBuYW1lIGlucHV0W2VtYWlsXVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGV4dCBpbnB1dCB3aXRoIGVtYWlsIHZhbGlkYXRpb24uIFNldHMgdGhlIGBlbWFpbGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgbm90IGEgdmFsaWQgZW1haWxcclxuICAgKiBhZGRyZXNzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxyXG4gICAqICAgIG1pbmxlbmd0aC5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAgICogICAgbWF4bGVuZ3RoLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCB0aGVcclxuICAgKiAgICBSZWdFeHAgcGF0dGVybiBleHByZXNzaW9uLiBFeHBlY3RlZCB2YWx1ZSBpcyBgL3JlZ2V4cC9gIGZvciBpbmxpbmUgcGF0dGVybnMgb3IgYHJlZ2V4cGAgZm9yXHJcbiAgICogICAgcGF0dGVybnMgZGVmaW5lZCBhcyBzY29wZSBleHByZXNzaW9ucy5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICAgPGV4YW1wbGUgbmFtZT1cImVtYWlsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImVtYWlsRXhhbXBsZVwiPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2VtYWlsRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgJHNjb3BlLnRleHQgPSAnbWVAZXhhbXBsZS5jb20nO1xyXG4gICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICAgICBFbWFpbDogPGlucHV0IHR5cGU9XCJlbWFpbFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwidGV4dFwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5lbWFpbFwiPlxyXG4gICAgICAgICAgICAgICBOb3QgdmFsaWQgZW1haWwhPC9zcGFuPlxyXG4gICAgICAgICAgICAgPHR0PnRleHQgPSB7e3RleHR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLmVtYWlsID0ge3shIW15Rm9ybS4kZXJyb3IuZW1haWx9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgIDwvZmlsZT5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgICB2YXIgdGV4dCA9IGVsZW1lbnQoYnkuYmluZGluZygndGV4dCcpKTtcclxuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuICAgICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9Db250YWluKCdtZUBleGFtcGxlLmNvbScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9FcXVhbCgndGV4dCA9Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgZW1haWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ3h4eCcpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICA8L2V4YW1wbGU+XHJcbiAgICovXHJcbiAgJ2VtYWlsJzogZW1haWxJbnB1dFR5cGUsXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgaW5wdXRcclxuICAgKiBAbmFtZSBpbnB1dFtyYWRpb11cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEhUTUwgcmFkaW8gYnV0dG9uLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIHNlbGVjdGVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ1ZhbHVlIEFuZ3VsYXIgZXhwcmVzc2lvbiB3aGljaCBzZXRzIHRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGRcclxuICAgKiAgICBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJyYWRpby1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJyYWRpb0V4YW1wbGVcIj5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdyYWRpb0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS5jb2xvciA9ICdibHVlJztcclxuICAgICAgICAgICAgICAgJHNjb3BlLnNwZWNpYWxWYWx1ZSA9IHtcclxuICAgICAgICAgICAgICAgICBcImlkXCI6IFwiMTIzNDVcIixcclxuICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiZ3JlZW5cIlxyXG4gICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yXCIgdmFsdWU9XCJyZWRcIj4gIFJlZCA8YnIvPlxyXG4gICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yXCIgbmctdmFsdWU9XCJzcGVjaWFsVmFsdWVcIj4gR3JlZW4gPGJyLz5cclxuICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJjb2xvclwiIHZhbHVlPVwiYmx1ZVwiPiBCbHVlIDxici8+XHJcbiAgICAgICAgICAgPHR0PmNvbG9yID0ge3tjb2xvciB8IGpzb259fTwvdHQ+PGJyLz5cclxuICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgIE5vdGUgdGhhdCBgbmctdmFsdWU9XCJzcGVjaWFsVmFsdWVcImAgc2V0cyByYWRpbyBpdGVtJ3MgdmFsdWUgdG8gYmUgdGhlIHZhbHVlIG9mIGAkc2NvcGUuc3BlY2lhbFZhbHVlYC5cclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2Ugc3RhdGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yID0gZWxlbWVudChieS5iaW5kaW5nKCdjb2xvcicpKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChjb2xvci5nZXRUZXh0KCkpLnRvQ29udGFpbignYmx1ZScpO1xyXG5cclxuICAgICAgICAgICAgZWxlbWVudC5hbGwoYnkubW9kZWwoJ2NvbG9yJykpLmdldCgwKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGNvbG9yLmdldFRleHQoKSkudG9Db250YWluKCdyZWQnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICdyYWRpbyc6IHJhZGlvSW5wdXRUeXBlLFxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbY2hlY2tib3hdXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBIVE1MIGNoZWNrYm94LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge2V4cHJlc3Npb249fSBuZ1RydWVWYWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIHNlbGVjdGVkLlxyXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nRmFsc2VWYWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIG5vdCBzZWxlY3RlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICAgPGV4YW1wbGUgbmFtZT1cImNoZWNrYm94LWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImNoZWNrYm94RXhhbXBsZVwiPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2NoZWNrYm94RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlMSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICRzY29wZS52YWx1ZTIgPSAnWUVTJ1xyXG4gICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgIFZhbHVlMTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwidmFsdWUxXCI+IDxici8+XHJcbiAgICAgICAgICAgVmFsdWUyOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJ2YWx1ZTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5nLXRydWUtdmFsdWU9XCInWUVTJ1wiIG5nLWZhbHNlLXZhbHVlPVwiJ05PJ1wiPiA8YnIvPlxyXG4gICAgICAgICAgIDx0dD52YWx1ZTEgPSB7e3ZhbHVlMX19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD52YWx1ZTIgPSB7e3ZhbHVlMn19PC90dD48YnIvPlxyXG4gICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGNoYW5nZSBzdGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUxID0gZWxlbWVudChieS5iaW5kaW5nKCd2YWx1ZTEnKSk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZTIgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbHVlMicpKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTEuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMi5nZXRUZXh0KCkpLnRvQ29udGFpbignWUVTJyk7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZTEnKSkuY2xpY2soKTtcclxuICAgICAgICAgICAgZWxlbWVudChieS5tb2RlbCgndmFsdWUyJykpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUxLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUyLmdldFRleHQoKSkudG9Db250YWluKCdOTycpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICA8L2V4YW1wbGU+XHJcbiAgICovXHJcbiAgJ2NoZWNrYm94JzogY2hlY2tib3hJbnB1dFR5cGUsXHJcblxyXG4gICdoaWRkZW4nOiBub29wLFxyXG4gICdidXR0b24nOiBub29wLFxyXG4gICdzdWJtaXQnOiBub29wLFxyXG4gICdyZXNldCc6IG5vb3AsXHJcbiAgJ2ZpbGUnOiBub29wXHJcbn07XHJcblxyXG5mdW5jdGlvbiB0ZXN0RmxhZ3ModmFsaWRpdHksIGZsYWdzKSB7XHJcbiAgdmFyIGksIGZsYWc7XHJcbiAgaWYgKGZsYWdzKSB7XHJcbiAgICBmb3IgKGk9MDsgaTxmbGFncy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBmbGFnID0gZmxhZ3NbaV07XHJcbiAgICAgIGlmICh2YWxpZGl0eVtmbGFnXSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCkge1xyXG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpID8gdmFsdWUgOiB2YWx1ZS50b1N0cmluZygpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0ZXh0SW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xyXG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICB2YXIgdmFsaWRpdHkgPSBlbGVtZW50LnByb3AoVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkpO1xyXG4gIHZhciBwbGFjZWhvbGRlciA9IGVsZW1lbnRbMF0ucGxhY2Vob2xkZXIsIG5vZXZlbnQgPSB7fTtcclxuICB2YXIgdHlwZSA9IGxvd2VyY2FzZShlbGVtZW50WzBdLnR5cGUpO1xyXG5cclxuICAvLyBJbiBjb21wb3NpdGlvbiBtb2RlLCB1c2VycyBhcmUgc3RpbGwgaW5wdXRpbmcgaW50ZXJtZWRpYXRlIHRleHQgYnVmZmVyLFxyXG4gIC8vIGhvbGQgdGhlIGxpc3RlbmVyIHVudGlsIGNvbXBvc2l0aW9uIGlzIGRvbmUuXHJcbiAgLy8gTW9yZSBhYm91dCBjb21wb3NpdGlvbiBldmVudHM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Db21wb3NpdGlvbkV2ZW50XHJcbiAgaWYgKCEkc25pZmZlci5hbmRyb2lkKSB7XHJcbiAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XHJcblxyXG4gICAgZWxlbWVudC5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIGVsZW1lbnQub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xyXG4gICAgICBsaXN0ZW5lcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgaWYgKGNvbXBvc2luZykgcmV0dXJuO1xyXG4gICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWwoKSxcclxuICAgICAgICBldmVudCA9IGV2ICYmIGV2LnR5cGU7XHJcblxyXG4gICAgLy8gSUUgKDExIGFuZCB1bmRlcikgc2VlbSB0byBlbWl0IGFuICdpbnB1dCcgZXZlbnQgaWYgdGhlIHBsYWNlaG9sZGVyIHZhbHVlIGNoYW5nZXMuXHJcbiAgICAvLyBXZSBkb24ndCB3YW50IHRvIGRpcnR5IHRoZSB2YWx1ZSB3aGVuIHRoaXMgaGFwcGVucywgc28gd2UgYWJvcnQgaGVyZS4gVW5mb3J0dW5hdGVseSxcclxuICAgIC8vIElFIGFsc28gc2VuZHMgaW5wdXQgZXZlbnRzIGZvciBvdGhlciBub24taW5wdXQtcmVsYXRlZCB0aGluZ3MsIChzdWNoIGFzIGZvY3VzaW5nIG9uIGFcclxuICAgIC8vIGZvcm0gY29udHJvbCksIHNvIHRoaXMgY2hhbmdlIGlzIG5vdCBlbnRpcmVseSBlbm91Z2ggdG8gc29sdmUgdGhpcy5cclxuICAgIGlmIChtc2llICYmIChldiB8fCBub2V2ZW50KS50eXBlID09PSAnaW5wdXQnICYmIGVsZW1lbnRbMF0ucGxhY2Vob2xkZXIgIT09IHBsYWNlaG9sZGVyKSB7XHJcbiAgICAgIHBsYWNlaG9sZGVyID0gZWxlbWVudFswXS5wbGFjZWhvbGRlcjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJ5IGRlZmF1bHQgd2Ugd2lsbCB0cmltIHRoZSB2YWx1ZVxyXG4gICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBuZy10cmltIGV4aXN0cyB3ZSB3aWxsIGF2b2lkIHRyaW1taW5nXHJcbiAgICAvLyBJZiBpbnB1dCB0eXBlIGlzICdwYXNzd29yZCcsIHRoZSB2YWx1ZSBpcyBuZXZlciB0cmltbWVkXHJcbiAgICBpZiAodHlwZSAhPT0gJ3Bhc3N3b3JkJyAmJiAoIWF0dHIubmdUcmltIHx8IGF0dHIubmdUcmltICE9PSAnZmFsc2UnKSkge1xyXG4gICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGEgY29udHJvbCBpcyBzdWZmZXJpbmcgZnJvbSBiYWQgaW5wdXQgKGR1ZSB0byBuYXRpdmUgdmFsaWRhdG9ycyksIGJyb3dzZXJzIGRpc2NhcmQgaXRzXHJcbiAgICAvLyB2YWx1ZSwgc28gaXQgbWF5IGJlIG5lY2Vzc2FyeSB0byByZXZhbGlkYXRlIChieSBjYWxsaW5nICRzZXRWaWV3VmFsdWUgYWdhaW4pIGV2ZW4gaWYgdGhlXHJcbiAgICAvLyBjb250cm9sJ3MgdmFsdWUgaXMgdGhlIHNhbWUgZW1wdHkgdmFsdWUgdHdpY2UgaW4gYSByb3cuXHJcbiAgICBpZiAoY3RybC4kdmlld1ZhbHVlICE9PSB2YWx1ZSB8fCAodmFsdWUgPT09ICcnICYmIGN0cmwuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSkge1xyXG4gICAgICBjdHJsLiRzZXRWaWV3VmFsdWUodmFsdWUsIGV2ZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBpZiB0aGUgYnJvd3NlciBkb2VzIHN1cHBvcnQgXCJpbnB1dFwiIGV2ZW50LCB3ZSBhcmUgZmluZSAtIGV4Y2VwdCBvbiBJRTkgd2hpY2ggZG9lc24ndCBmaXJlIHRoZVxyXG4gIC8vIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZSwgZGVsZXRlIG9yIGN1dFxyXG4gIGlmICgkc25pZmZlci5oYXNFdmVudCgnaW5wdXQnKSkge1xyXG4gICAgZWxlbWVudC5vbignaW5wdXQnLCBsaXN0ZW5lcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhciB0aW1lb3V0O1xyXG5cclxuICAgIHZhciBkZWZlckxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcclxuICAgICAgaWYgKCF0aW1lb3V0KSB7XHJcbiAgICAgICAgdGltZW91dCA9ICRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGlzdGVuZXIoZXYpO1xyXG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZWxlbWVudC5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIHZhciBrZXkgPSBldmVudC5rZXlDb2RlO1xyXG5cclxuICAgICAgLy8gaWdub3JlXHJcbiAgICAgIC8vICAgIGNvbW1hbmQgICAgICAgICAgICBtb2RpZmllcnMgICAgICAgICAgICAgICAgICAgYXJyb3dzXHJcbiAgICAgIGlmIChrZXkgPT09IDkxIHx8ICgxNSA8IGtleSAmJiBrZXkgPCAxOSkgfHwgKDM3IDw9IGtleSAmJiBrZXkgPD0gNDApKSByZXR1cm47XHJcblxyXG4gICAgICBkZWZlckxpc3RlbmVyKGV2ZW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGlmIHVzZXIgbW9kaWZpZXMgaW5wdXQgdmFsdWUgdXNpbmcgY29udGV4dCBtZW51IGluIElFLCB3ZSBuZWVkIFwicGFzdGVcIiBhbmQgXCJjdXRcIiBldmVudHMgdG8gY2F0Y2ggaXRcclxuICAgIGlmICgkc25pZmZlci5oYXNFdmVudCgncGFzdGUnKSkge1xyXG4gICAgICBlbGVtZW50Lm9uKCdwYXN0ZSBjdXQnLCBkZWZlckxpc3RlbmVyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGlmIHVzZXIgcGFzdGUgaW50byBpbnB1dCB1c2luZyBtb3VzZSBvbiBvbGRlciBicm93c2VyXHJcbiAgLy8gb3IgZm9ybSBhdXRvY29tcGxldGUgb24gbmV3ZXIgYnJvd3Nlciwgd2UgbmVlZCBcImNoYW5nZVwiIGV2ZW50IHRvIGNhdGNoIGl0XHJcbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xyXG5cclxuICBjdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIGVsZW1lbnQudmFsKGN0cmwuJGlzRW1wdHkoY3RybC4kbW9kZWxWYWx1ZSkgPyAnJyA6IGN0cmwuJHZpZXdWYWx1ZSk7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gd2Vla1BhcnNlcihpc29XZWVrLCBleGlzdGluZ0RhdGUpIHtcclxuICBpZiAoaXNEYXRlKGlzb1dlZWspKSB7XHJcbiAgICByZXR1cm4gaXNvV2VlaztcclxuICB9XHJcblxyXG4gIGlmIChpc1N0cmluZyhpc29XZWVrKSkge1xyXG4gICAgV0VFS19SRUdFWFAubGFzdEluZGV4ID0gMDtcclxuICAgIHZhciBwYXJ0cyA9IFdFRUtfUkVHRVhQLmV4ZWMoaXNvV2Vlayk7XHJcbiAgICBpZiAocGFydHMpIHtcclxuICAgICAgdmFyIHllYXIgPSArcGFydHNbMV0sXHJcbiAgICAgICAgICB3ZWVrID0gK3BhcnRzWzJdLFxyXG4gICAgICAgICAgaG91cnMgPSAwLFxyXG4gICAgICAgICAgbWludXRlcyA9IDAsXHJcbiAgICAgICAgICBzZWNvbmRzID0gMCxcclxuICAgICAgICAgIG1pbGxpc2Vjb25kcyA9IDAsXHJcbiAgICAgICAgICBmaXJzdFRodXJzID0gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcih5ZWFyKSxcclxuICAgICAgICAgIGFkZERheXMgPSAod2VlayAtIDEpICogNztcclxuXHJcbiAgICAgIGlmIChleGlzdGluZ0RhdGUpIHtcclxuICAgICAgICBob3VycyA9IGV4aXN0aW5nRGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgIG1pbnV0ZXMgPSBleGlzdGluZ0RhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIHNlY29uZHMgPSBleGlzdGluZ0RhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIG1pbGxpc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsIGZpcnN0VGh1cnMuZ2V0RGF0ZSgpICsgYWRkRGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gTmFOO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVEYXRlUGFyc2VyKHJlZ2V4cCwgbWFwcGluZykge1xyXG4gIHJldHVybiBmdW5jdGlvbihpc28sIGRhdGUpIHtcclxuICAgIHZhciBwYXJ0cywgbWFwO1xyXG5cclxuICAgIGlmIChpc0RhdGUoaXNvKSkge1xyXG4gICAgICByZXR1cm4gaXNvO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc1N0cmluZyhpc28pKSB7XHJcbiAgICAgIC8vIFdoZW4gYSBkYXRlIGlzIEpTT04naWZpZWQgdG8gd3JhcHMgaXRzZWxmIGluc2lkZSBvZiBhbiBleHRyYVxyXG4gICAgICAvLyBzZXQgb2YgZG91YmxlIHF1b3Rlcy4gVGhpcyBtYWtlcyB0aGUgZGF0ZSBwYXJzaW5nIGNvZGUgdW5hYmxlXHJcbiAgICAgIC8vIHRvIG1hdGNoIHRoZSBkYXRlIHN0cmluZyBhbmQgcGFyc2UgaXQgYXMgYSBkYXRlLlxyXG4gICAgICBpZiAoaXNvLmNoYXJBdCgwKSA9PSAnXCInICYmIGlzby5jaGFyQXQoaXNvLmxlbmd0aC0xKSA9PSAnXCInKSB7XHJcbiAgICAgICAgaXNvID0gaXNvLnN1YnN0cmluZygxLCBpc28ubGVuZ3RoLTEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChJU09fREFURV9SRUdFWFAudGVzdChpc28pKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGlzbyk7XHJcbiAgICAgIH1cclxuICAgICAgcmVnZXhwLmxhc3RJbmRleCA9IDA7XHJcbiAgICAgIHBhcnRzID0gcmVnZXhwLmV4ZWMoaXNvKTtcclxuXHJcbiAgICAgIGlmIChwYXJ0cykge1xyXG4gICAgICAgIHBhcnRzLnNoaWZ0KCk7XHJcbiAgICAgICAgaWYgKGRhdGUpIHtcclxuICAgICAgICAgIG1hcCA9IHtcclxuICAgICAgICAgICAgeXl5eTogZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICBNTTogZGF0ZS5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgZGQ6IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICBISDogZGF0ZS5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICBtbTogZGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgIHNzOiBkYXRlLmdldFNlY29uZHMoKSxcclxuICAgICAgICAgICAgc3NzOiBkYXRlLmdldE1pbGxpc2Vjb25kcygpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBtYXAgPSB7IHl5eXk6IDE5NzAsIE1NOiAxLCBkZDogMSwgSEg6IDAsIG1tOiAwLCBzczogMCwgc3NzOiAwIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3JFYWNoKHBhcnRzLCBmdW5jdGlvbihwYXJ0LCBpbmRleCkge1xyXG4gICAgICAgICAgaWYgKGluZGV4IDwgbWFwcGluZy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbWFwW21hcHBpbmdbaW5kZXhdXSA9ICtwYXJ0O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShtYXAueXl5eSwgbWFwLk1NIC0gMSwgbWFwLmRkLCBtYXAuSEgsIG1hcC5tbSwgbWFwLnNzIHx8IDAsIG1hcC5zc3MgfHwgMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmFOO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZURhdGVJbnB1dFR5cGUodHlwZSwgcmVnZXhwLCBwYXJzZURhdGUsIGZvcm1hdCkge1xyXG4gIHJldHVybiBmdW5jdGlvbiBkeW5hbWljRGF0ZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyLCAkZmlsdGVyKSB7XHJcbiAgICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpO1xyXG4gICAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcclxuICAgIHZhciB0aW1lem9uZSA9IGN0cmwgJiYgY3RybC4kb3B0aW9ucyAmJiBjdHJsLiRvcHRpb25zLnRpbWV6b25lO1xyXG5cclxuICAgIGN0cmwuJCRwYXJzZXJOYW1lID0gdHlwZTtcclxuICAgIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICBpZiAoY3RybC4kaXNFbXB0eSh2YWx1ZSkpIHJldHVybiBudWxsO1xyXG4gICAgICBpZiAocmVnZXhwLnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgdmFyIHByZXZpb3VzRGF0ZSA9IGN0cmwuJG1vZGVsVmFsdWU7XHJcbiAgICAgICAgaWYgKHByZXZpb3VzRGF0ZSAmJiB0aW1lem9uZSA9PT0gJ1VUQycpIHtcclxuICAgICAgICAgIHZhciB0aW1lem9uZU9mZnNldCA9IDYwMDAwICogcHJldmlvdXNEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XHJcbiAgICAgICAgICBwcmV2aW91c0RhdGUgPSBuZXcgRGF0ZShwcmV2aW91c0RhdGUuZ2V0VGltZSgpICsgdGltZXpvbmVPZmZzZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGFyc2VkRGF0ZSA9IHBhcnNlRGF0ZSh2YWx1ZSwgcHJldmlvdXNEYXRlKTtcclxuICAgICAgICBpZiAodGltZXpvbmUgPT09ICdVVEMnKSB7XHJcbiAgICAgICAgICBwYXJzZWREYXRlLnNldE1pbnV0ZXMocGFyc2VkRGF0ZS5nZXRNaW51dGVzKCkgLSBwYXJzZWREYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ2RhdGUnKSh2YWx1ZSwgZm9ybWF0LCB0aW1lem9uZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGlzRGVmaW5lZChhdHRyLm1pbikgfHwgYXR0ci5uZ01pbikge1xyXG4gICAgICB2YXIgbWluVmFsO1xyXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1pblZhbCkgfHwgcGFyc2VEYXRlKHZhbHVlKSA+PSBtaW5WYWw7XHJcbiAgICAgIH07XHJcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21pbicsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIG1pblZhbCA9IHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKTtcclxuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNEZWZpbmVkKGF0dHIubWF4KSB8fCBhdHRyLm5nTWF4KSB7XHJcbiAgICAgIHZhciBtYXhWYWw7XHJcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMubWF4ID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgaXNVbmRlZmluZWQobWF4VmFsKSB8fCBwYXJzZURhdGUodmFsdWUpIDw9IG1heFZhbDtcclxuICAgICAgfTtcclxuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgbWF4VmFsID0gcGFyc2VPYnNlcnZlZERhdGVWYWx1ZSh2YWwpO1xyXG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKSB7XHJcbiAgICAgIHJldHVybiBpc0RlZmluZWQodmFsKSA/IChpc0RhdGUodmFsKSA/IHZhbCA6IHBhcnNlRGF0ZSh2YWwpKSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcclxuICB2YXIgbm9kZSA9IGVsZW1lbnRbMF07XHJcbiAgdmFyIG5hdGl2ZVZhbGlkYXRpb24gPSBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyA9IGlzT2JqZWN0KG5vZGUudmFsaWRpdHkpO1xyXG4gIGlmIChuYXRpdmVWYWxpZGF0aW9uKSB7XHJcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgdmFyIHZhbGlkaXR5ID0gZWxlbWVudC5wcm9wKFZBTElESVRZX1NUQVRFX1BST1BFUlRZKSB8fCB7fTtcclxuICAgICAgLy8gRGV0ZWN0IGJ1ZyBpbiBGRjM1IGZvciBpbnB1dFtlbWFpbF0gKGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEwNjQ0MzApOlxyXG4gICAgICAvLyAtIGFsc28gc2V0cyB2YWxpZGl0eS5iYWRJbnB1dCAoc2hvdWxkIG9ubHkgYmUgdmFsaWRpdHkudHlwZU1pc21hdGNoKS5cclxuICAgICAgLy8gLSBzZWUgaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNlLW1haWwtc3RhdGUtKHR5cGU9ZW1haWwpXHJcbiAgICAgIC8vIC0gY2FuIGlnbm9yZSB0aGlzIGNhc2UgYXMgd2UgY2FuIHN0aWxsIHJlYWQgb3V0IHRoZSBlcnJvbmVvdXMgZW1haWwuLi5cclxuICAgICAgcmV0dXJuIHZhbGlkaXR5LmJhZElucHV0ICYmICF2YWxpZGl0eS50eXBlTWlzbWF0Y2ggPyB1bmRlZmluZWQgOiB2YWx1ZTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbnVtYmVySW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpO1xyXG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XHJcblxyXG4gIGN0cmwuJCRwYXJzZXJOYW1lID0gJ251bWJlcic7XHJcbiAgY3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAoY3RybC4kaXNFbXB0eSh2YWx1ZSkpICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAoTlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSkgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9KTtcclxuXHJcbiAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAoIWN0cmwuJGlzRW1wdHkodmFsdWUpKSB7XHJcbiAgICAgIGlmICghaXNOdW1iZXIodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgJG5nTW9kZWxNaW5FcnIoJ251bWZtdCcsICdFeHBlY3RlZCBgezB9YCB0byBiZSBhIG51bWJlcicsIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIGlmIChhdHRyLm1pbiB8fCBhdHRyLm5nTWluKSB7XHJcbiAgICB2YXIgbWluVmFsO1xyXG4gICAgY3RybC4kdmFsaWRhdG9ycy5taW4gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgaXNVbmRlZmluZWQobWluVmFsKSB8fCB2YWx1ZSA+PSBtaW5WYWw7XHJcbiAgICB9O1xyXG5cclxuICAgIGF0dHIuJG9ic2VydmUoJ21pbicsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICBpZiAoaXNEZWZpbmVkKHZhbCkgJiYgIWlzTnVtYmVyKHZhbCkpIHtcclxuICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KHZhbCwgMTApO1xyXG4gICAgICB9XHJcbiAgICAgIG1pblZhbCA9IGlzTnVtYmVyKHZhbCkgJiYgIWlzTmFOKHZhbCkgPyB2YWwgOiB1bmRlZmluZWQ7XHJcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xyXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoYXR0ci5tYXggfHwgYXR0ci5uZ01heCkge1xyXG4gICAgdmFyIG1heFZhbDtcclxuICAgIGN0cmwuJHZhbGlkYXRvcnMubWF4ID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgdmFsdWUgPD0gbWF4VmFsO1xyXG4gICAgfTtcclxuXHJcbiAgICBhdHRyLiRvYnNlcnZlKCdtYXgnLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgaWYgKGlzRGVmaW5lZCh2YWwpICYmICFpc051bWJlcih2YWwpKSB7XHJcbiAgICAgICAgdmFsID0gcGFyc2VGbG9hdCh2YWwsIDEwKTtcclxuICAgICAgfVxyXG4gICAgICBtYXhWYWwgPSBpc051bWJlcih2YWwpICYmICFpc05hTih2YWwpID8gdmFsIDogdW5kZWZpbmVkO1xyXG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcclxuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXJsSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICAvLyBOb3RlOiBubyBiYWRJbnB1dENoZWNrZXIgaGVyZSBieSBwdXJwb3NlIGFzIGB1cmxgIGlzIG9ubHkgYSB2YWxpZGF0aW9uXHJcbiAgLy8gaW4gYnJvd3NlcnMsIGkuZS4gd2UgY2FuIGFsd2F5cyByZWFkIG91dCBpbnB1dC52YWx1ZSBldmVuIGlmIGl0IGlzIG5vdCB2YWxpZCFcclxuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xyXG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xyXG5cclxuICBjdHJsLiQkcGFyc2VyTmFtZSA9ICd1cmwnO1xyXG4gIGN0cmwuJHZhbGlkYXRvcnMudXJsID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBVUkxfUkVHRVhQLnRlc3QodmFsdWUpO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtYWlsSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICAvLyBOb3RlOiBubyBiYWRJbnB1dENoZWNrZXIgaGVyZSBieSBwdXJwb3NlIGFzIGB1cmxgIGlzIG9ubHkgYSB2YWxpZGF0aW9uXHJcbiAgLy8gaW4gYnJvd3NlcnMsIGkuZS4gd2UgY2FuIGFsd2F5cyByZWFkIG91dCBpbnB1dC52YWx1ZSBldmVuIGlmIGl0IGlzIG5vdCB2YWxpZCFcclxuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xyXG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xyXG5cclxuICBjdHJsLiQkcGFyc2VyTmFtZSA9ICdlbWFpbCc7XHJcbiAgY3RybC4kdmFsaWRhdG9ycy5lbWFpbCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgRU1BSUxfUkVHRVhQLnRlc3QodmFsdWUpO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJhZGlvSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKSB7XHJcbiAgLy8gbWFrZSB0aGUgbmFtZSB1bmlxdWUsIGlmIG5vdCBkZWZpbmVkXHJcbiAgaWYgKGlzVW5kZWZpbmVkKGF0dHIubmFtZSkpIHtcclxuICAgIGVsZW1lbnQuYXR0cignbmFtZScsIG5leHRVaWQoKSk7XHJcbiAgfVxyXG5cclxuICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgaWYgKGVsZW1lbnRbMF0uY2hlY2tlZCkge1xyXG4gICAgICBjdHJsLiRzZXRWaWV3VmFsdWUoYXR0ci52YWx1ZSwgZXYgJiYgZXYudHlwZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZWxlbWVudC5vbignY2xpY2snLCBsaXN0ZW5lcik7XHJcblxyXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHZhbHVlID0gYXR0ci52YWx1ZTtcclxuICAgIGVsZW1lbnRbMF0uY2hlY2tlZCA9ICh2YWx1ZSA9PSBjdHJsLiR2aWV3VmFsdWUpO1xyXG4gIH07XHJcblxyXG4gIGF0dHIuJG9ic2VydmUoJ3ZhbHVlJywgY3RybC4kcmVuZGVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBjb250ZXh0LCBuYW1lLCBleHByZXNzaW9uLCBmYWxsYmFjaykge1xyXG4gIHZhciBwYXJzZUZuO1xyXG4gIGlmIChpc0RlZmluZWQoZXhwcmVzc2lvbikpIHtcclxuICAgIHBhcnNlRm4gPSAkcGFyc2UoZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoIXBhcnNlRm4uY29uc3RhbnQpIHtcclxuICAgICAgdGhyb3cgbWluRXJyKCduZ01vZGVsJykoJ2NvbnN0ZXhwcicsICdFeHBlY3RlZCBjb25zdGFudCBleHByZXNzaW9uIGZvciBgezB9YCwgYnV0IHNhdyAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYHsxfWAuJywgbmFtZSwgZXhwcmVzc2lvbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyc2VGbihjb250ZXh0KTtcclxuICB9XHJcbiAgcmV0dXJuIGZhbGxiYWNrO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja2JveElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyLCAkZmlsdGVyLCAkcGFyc2UpIHtcclxuICB2YXIgdHJ1ZVZhbHVlID0gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBzY29wZSwgJ25nVHJ1ZVZhbHVlJywgYXR0ci5uZ1RydWVWYWx1ZSwgdHJ1ZSk7XHJcbiAgdmFyIGZhbHNlVmFsdWUgPSBwYXJzZUNvbnN0YW50RXhwcigkcGFyc2UsIHNjb3BlLCAnbmdGYWxzZVZhbHVlJywgYXR0ci5uZ0ZhbHNlVmFsdWUsIGZhbHNlKTtcclxuXHJcbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcclxuICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbGVtZW50WzBdLmNoZWNrZWQsIGV2ICYmIGV2LnR5cGUpO1xyXG4gIH07XHJcblxyXG4gIGVsZW1lbnQub24oJ2NsaWNrJywgbGlzdGVuZXIpO1xyXG5cclxuICBjdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIGVsZW1lbnRbMF0uY2hlY2tlZCA9IGN0cmwuJHZpZXdWYWx1ZTtcclxuICB9O1xyXG5cclxuICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgYCRpc0VtcHR5YCBiZWNhdXNlIGFuIGVtcHR5IGNoZWNrYm94IGlzIG5ldmVyIGVxdWFsIHRvIHRoZSB0cnVlVmFsdWVcclxuICBjdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiB2YWx1ZSAhPT0gdHJ1ZVZhbHVlO1xyXG4gIH07XHJcblxyXG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGVxdWFscyh2YWx1ZSwgdHJ1ZVZhbHVlKTtcclxuICB9KTtcclxuXHJcbiAgY3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPyB0cnVlVmFsdWUgOiBmYWxzZVZhbHVlO1xyXG4gIH0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgdGV4dGFyZWFcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEhUTUwgdGV4dGFyZWEgZWxlbWVudCBjb250cm9sIHdpdGggYW5ndWxhciBkYXRhLWJpbmRpbmcuIFRoZSBkYXRhLWJpbmRpbmcgYW5kIHZhbGlkYXRpb25cclxuICogcHJvcGVydGllcyBvZiB0aGlzIGVsZW1lbnQgYXJlIGV4YWN0bHkgdGhlIHNhbWUgYXMgdGhvc2Ugb2YgdGhlXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXQgZWxlbWVudH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xyXG4gKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxyXG4gKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cclxuICogICAgbWlubGVuZ3RoLlxyXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAqICAgIG1heGxlbmd0aC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZVxyXG4gKiAgICBSZWdFeHAgcGF0dGVybiBleHByZXNzaW9uLiBFeHBlY3RlZCB2YWx1ZSBpcyBgL3JlZ2V4cC9gIGZvciBpbmxpbmUgcGF0dGVybnMgb3IgYHJlZ2V4cGAgZm9yXHJcbiAqICAgIHBhdHRlcm5zIGRlZmluZWQgYXMgc2NvcGUgZXhwcmVzc2lvbnMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFyIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgdHJpbSB0aGUgaW5wdXQuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIGlucHV0XHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBIVE1MIGlucHV0IGVsZW1lbnQgY29udHJvbCB3aXRoIGFuZ3VsYXIgZGF0YS1iaW5kaW5nLiBJbnB1dCBjb250cm9sIGZvbGxvd3MgSFRNTDUgaW5wdXQgdHlwZXNcclxuICogYW5kIHBvbHlmaWxscyB0aGUgSFRNTDUgdmFsaWRhdGlvbiBiZWhhdmlvciBmb3Igb2xkZXIgYnJvd3NlcnMuXHJcbiAqXHJcbiAqICpOT1RFKiBOb3QgZXZlcnkgZmVhdHVyZSBvZmZlcmVkIGlzIGF2YWlsYWJsZSBmb3IgYWxsIGlucHV0IHR5cGVzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBuZ1JlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgaWYgc2V0IHRvIHRydWVcclxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cclxuICogICAgbWlubGVuZ3RoLlxyXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAqICAgIG1heGxlbmd0aC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZVxyXG4gKiAgICBSZWdFeHAgcGF0dGVybiBleHByZXNzaW9uLiBFeHBlY3RlZCB2YWx1ZSBpcyBgL3JlZ2V4cC9gIGZvciBpbmxpbmUgcGF0dGVybnMgb3IgYHJlZ2V4cGAgZm9yXHJcbiAqICAgIHBhdHRlcm5zIGRlZmluZWQgYXMgc2NvcGUgZXhwcmVzc2lvbnMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFyIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgdHJpbSB0aGUgaW5wdXQuXHJcbiAqICAgIFRoaXMgcGFyYW1ldGVyIGlzIGlnbm9yZWQgZm9yIGlucHV0W3R5cGU9cGFzc3dvcmRdIGNvbnRyb2xzLCB3aGljaCB3aWxsIG5ldmVyIHRyaW0gdGhlXHJcbiAqICAgIGlucHV0LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbmFtZT1cImlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImlucHV0RXhhbXBsZVwiPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdpbnB1dEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUudXNlciA9IHtuYW1lOiAnZ3Vlc3QnLCBsYXN0OiAndmlzaXRvcid9O1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cclxuICAgICAgICAgICBVc2VyIG5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiIG5nLW1vZGVsPVwidXNlci5uYW1lXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0udXNlck5hbWUuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+PGJyPlxyXG4gICAgICAgICAgIExhc3QgbmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImxhc3ROYW1lXCIgbmctbW9kZWw9XCJ1c2VyLmxhc3RcIlxyXG4gICAgICAgICAgICAgbmctbWlubGVuZ3RoPVwiM1wiIG5nLW1heGxlbmd0aD1cIjEwXCI+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubGFzdE5hbWUuJGVycm9yLm1pbmxlbmd0aFwiPlxyXG4gICAgICAgICAgICAgVG9vIHNob3J0ITwvc3Bhbj5cclxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5sYXN0TmFtZS4kZXJyb3IubWF4bGVuZ3RoXCI+XHJcbiAgICAgICAgICAgICBUb28gbG9uZyE8L3NwYW4+PGJyPlxyXG4gICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgIDxocj5cclxuICAgICAgICAgPHR0PnVzZXIgPSB7e3VzZXJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgPHR0Pm15Rm9ybS51c2VyTmFtZS4kdmFsaWQgPSB7e215Rm9ybS51c2VyTmFtZS4kdmFsaWR9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLnVzZXJOYW1lLiRlcnJvciA9IHt7bXlGb3JtLnVzZXJOYW1lLiRlcnJvcn19PC90dD48YnI+XHJcbiAgICAgICAgIDx0dD5teUZvcm0ubGFzdE5hbWUuJHZhbGlkID0ge3tteUZvcm0ubGFzdE5hbWUuJHZhbGlkfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS5sYXN0TmFtZS4kZXJyb3IgPSB7e215Rm9ybS5sYXN0TmFtZS4kZXJyb3J9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnI+XHJcbiAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5taW5sZW5ndGggPSB7eyEhbXlGb3JtLiRlcnJvci5taW5sZW5ndGh9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5tYXhsZW5ndGggPSB7eyEhbXlGb3JtLiRlcnJvci5tYXhsZW5ndGh9fTwvdHQ+PGJyPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIHZhciB1c2VyID0gZWxlbWVudChieS5leGFjdEJpbmRpbmcoJ3VzZXInKSk7XHJcbiAgICAgICAgdmFyIHVzZXJOYW1lVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS51c2VyTmFtZS4kdmFsaWQnKSk7XHJcbiAgICAgICAgdmFyIGxhc3ROYW1lVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5sYXN0TmFtZS4kdmFsaWQnKSk7XHJcbiAgICAgICAgdmFyIGxhc3ROYW1lRXJyb3IgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5sYXN0TmFtZS4kZXJyb3InKSk7XHJcbiAgICAgICAgdmFyIGZvcm1WYWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLiR2YWxpZCcpKTtcclxuICAgICAgICB2YXIgdXNlck5hbWVJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubmFtZScpKTtcclxuICAgICAgICB2YXIgdXNlckxhc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubGFzdCcpKTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIixcImxhc3RcIjpcInZpc2l0b3JcIn0nKTtcclxuICAgICAgICAgIGV4cGVjdCh1c2VyTmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eSB3aGVuIHJlcXVpcmVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB1c2VyTmFtZUlucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICB1c2VyTmFtZUlucHV0LnNlbmRLZXlzKCcnKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibGFzdFwiOlwidmlzaXRvclwifScpO1xyXG4gICAgICAgICAgZXhwZWN0KHVzZXJOYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIHZhbGlkIGlmIGVtcHR5IHdoZW4gbWluIGxlbmd0aCBpcyBzZXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuc2VuZEtleXMoJycpO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwiLFwibGFzdFwiOlwiXCJ9Jyk7XHJcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbGVzcyB0aGFuIHJlcXVpcmVkIG1pbiBsZW5ndGgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuc2VuZEtleXMoJ3h4Jyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCJ9Jyk7XHJcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZUVycm9yLmdldFRleHQoKSkudG9Db250YWluKCdtaW5sZW5ndGgnKTtcclxuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBsb25nZXIgdGhhbiBtYXggbGVuZ3RoJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCdzb21lIHJpZGljdWxvdXNseSBsb25nIG5hbWUnKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIn0nKTtcclxuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lRXJyb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ21heGxlbmd0aCcpO1xyXG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIGlucHV0RGlyZWN0aXZlID0gWyckYnJvd3NlcicsICckc25pZmZlcicsICckZmlsdGVyJywgJyRwYXJzZScsXHJcbiAgICBmdW5jdGlvbigkYnJvd3NlciwgJHNuaWZmZXIsICRmaWx0ZXIsICRwYXJzZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgcmVxdWlyZTogWyc/bmdNb2RlbCddLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XHJcbiAgICAgIGlmIChjdHJsc1swXSkge1xyXG4gICAgICAgIChpbnB1dFR5cGVbbG93ZXJjYXNlKGF0dHIudHlwZSldIHx8IGlucHV0VHlwZS50ZXh0KShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHNbMF0sICRzbmlmZmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnJvd3NlciwgJGZpbHRlciwgJHBhcnNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxudmFyIFZBTElEX0NMQVNTID0gJ25nLXZhbGlkJyxcclxuICAgIElOVkFMSURfQ0xBU1MgPSAnbmctaW52YWxpZCcsXHJcbiAgICBQUklTVElORV9DTEFTUyA9ICduZy1wcmlzdGluZScsXHJcbiAgICBESVJUWV9DTEFTUyA9ICduZy1kaXJ0eScsXHJcbiAgICBVTlRPVUNIRURfQ0xBU1MgPSAnbmctdW50b3VjaGVkJyxcclxuICAgIFRPVUNIRURfQ0xBU1MgPSAnbmctdG91Y2hlZCcsXHJcbiAgICBQRU5ESU5HX0NMQVNTID0gJ25nLXBlbmRpbmcnO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyB0eXBlXHJcbiAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJcclxuICpcclxuICogQHByb3BlcnR5IHtzdHJpbmd9ICR2aWV3VmFsdWUgQWN0dWFsIHN0cmluZyB2YWx1ZSBpbiB0aGUgdmlldy5cclxuICogQHByb3BlcnR5IHsqfSAkbW9kZWxWYWx1ZSBUaGUgdmFsdWUgaW4gdGhlIG1vZGVsLCB0aGF0IHRoZSBjb250cm9sIGlzIGJvdW5kIHRvLlxyXG4gKiBAcHJvcGVydHkge0FycmF5LjxGdW5jdGlvbj59ICRwYXJzZXJzIEFycmF5IG9mIGZ1bmN0aW9ucyB0byBleGVjdXRlLCBhcyBhIHBpcGVsaW5lLCB3aGVuZXZlclxyXG4gICAgICAgdGhlIGNvbnRyb2wgcmVhZHMgdmFsdWUgZnJvbSB0aGUgRE9NLiAgRWFjaCBmdW5jdGlvbiBpcyBjYWxsZWQsIGluIHR1cm4sIHBhc3NpbmcgdGhlIHZhbHVlXHJcbiAgICAgICB0aHJvdWdoIHRvIHRoZSBuZXh0LiBUaGUgbGFzdCByZXR1cm4gdmFsdWUgaXMgdXNlZCB0byBwb3B1bGF0ZSB0aGUgbW9kZWwuXHJcbiAgICAgICBVc2VkIHRvIHNhbml0aXplIC8gY29udmVydCB0aGUgdmFsdWUgYXMgd2VsbCBhcyB2YWxpZGF0aW9uLiBGb3IgdmFsaWRhdGlvbixcclxuICAgICAgIHRoZSBwYXJzZXJzIHNob3VsZCB1cGRhdGUgdGhlIHZhbGlkaXR5IHN0YXRlIHVzaW5nXHJcbiAgICAgICB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VmFsaWRpdHkgJHNldFZhbGlkaXR5KCl9LFxyXG4gICAgICAgYW5kIHJldHVybiBgdW5kZWZpbmVkYCBmb3IgaW52YWxpZCB2YWx1ZXMuXHJcblxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0FycmF5LjxGdW5jdGlvbj59ICRmb3JtYXR0ZXJzIEFycmF5IG9mIGZ1bmN0aW9ucyB0byBleGVjdXRlLCBhcyBhIHBpcGVsaW5lLCB3aGVuZXZlclxyXG4gICAgICAgdGhlIG1vZGVsIHZhbHVlIGNoYW5nZXMuIEVhY2ggZnVuY3Rpb24gaXMgY2FsbGVkLCBpbiB0dXJuLCBwYXNzaW5nIHRoZSB2YWx1ZSB0aHJvdWdoIHRvIHRoZVxyXG4gICAgICAgbmV4dC4gVXNlZCB0byBmb3JtYXQgLyBjb252ZXJ0IHZhbHVlcyBmb3IgZGlzcGxheSBpbiB0aGUgY29udHJvbCBhbmQgdmFsaWRhdGlvbi5cclxuICogYGBganNcclxuICogZnVuY3Rpb24gZm9ybWF0dGVyKHZhbHVlKSB7XHJcbiAqICAgaWYgKHZhbHVlKSB7XHJcbiAqICAgICByZXR1cm4gdmFsdWUudG9VcHBlckNhc2UoKTtcclxuICogICB9XHJcbiAqIH1cclxuICogbmdNb2RlbC4kZm9ybWF0dGVycy5wdXNoKGZvcm1hdHRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj59ICR2YWxpZGF0b3JzIEEgY29sbGVjdGlvbiBvZiB2YWxpZGF0b3JzIHRoYXQgYXJlIGFwcGxpZWRcclxuICogICAgICB3aGVuZXZlciB0aGUgbW9kZWwgdmFsdWUgY2hhbmdlcy4gVGhlIGtleSB2YWx1ZSB3aXRoaW4gdGhlIG9iamVjdCByZWZlcnMgdG8gdGhlIG5hbWUgb2YgdGhlXHJcbiAqICAgICAgdmFsaWRhdG9yIHdoaWxlIHRoZSBmdW5jdGlvbiByZWZlcnMgdG8gdGhlIHZhbGlkYXRpb24gb3BlcmF0aW9uLiBUaGUgdmFsaWRhdGlvbiBvcGVyYXRpb24gaXNcclxuICogICAgICBwcm92aWRlZCB3aXRoIHRoZSBtb2RlbCB2YWx1ZSBhcyBhbiBhcmd1bWVudCBhbmQgbXVzdCByZXR1cm4gYSB0cnVlIG9yIGZhbHNlIHZhbHVlIGRlcGVuZGluZ1xyXG4gKiAgICAgIG9uIHRoZSByZXNwb25zZSBvZiB0aGF0IHZhbGlkYXRpb24uXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIG5nTW9kZWwuJHZhbGlkYXRvcnMudmFsaWRDaGFyYWN0ZXJzID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XHJcbiAqICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XHJcbiAqICAgcmV0dXJuIC9bMC05XSsvLnRlc3QodmFsdWUpICYmXHJcbiAqICAgICAgICAgIC9bYS16XSsvLnRlc3QodmFsdWUpICYmXHJcbiAqICAgICAgICAgIC9bQS1aXSsvLnRlc3QodmFsdWUpICYmXHJcbiAqICAgICAgICAgIC9cXFcrLy50ZXN0KHZhbHVlKTtcclxuICogfTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPn0gJGFzeW5jVmFsaWRhdG9ycyBBIGNvbGxlY3Rpb24gb2YgdmFsaWRhdGlvbnMgdGhhdCBhcmUgZXhwZWN0ZWQgdG9cclxuICogICAgICBwZXJmb3JtIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0aW9uIChlLmcuIGEgSFRUUCByZXF1ZXN0KS4gVGhlIHZhbGlkYXRpb24gZnVuY3Rpb24gdGhhdCBpcyBwcm92aWRlZFxyXG4gKiAgICAgIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhIHByb21pc2Ugd2hlbiBpdCBpcyBydW4gZHVyaW5nIHRoZSBtb2RlbCB2YWxpZGF0aW9uIHByb2Nlc3MuIE9uY2UgdGhlIHByb21pc2VcclxuICogICAgICBpcyBkZWxpdmVyZWQgdGhlbiB0aGUgdmFsaWRhdGlvbiBzdGF0dXMgd2lsbCBiZSBzZXQgdG8gdHJ1ZSB3aGVuIGZ1bGZpbGxlZCBhbmQgZmFsc2Ugd2hlbiByZWplY3RlZC5cclxuICogICAgICBXaGVuIHRoZSBhc3luY2hyb25vdXMgdmFsaWRhdG9ycyBhcmUgdHJpZ2dlcmVkLCBlYWNoIG9mIHRoZSB2YWxpZGF0b3JzIHdpbGwgcnVuIGluIHBhcmFsbGVsIGFuZCB0aGUgbW9kZWxcclxuICogICAgICB2YWx1ZSB3aWxsIG9ubHkgYmUgdXBkYXRlZCBvbmNlIGFsbCB2YWxpZGF0b3JzIGhhdmUgYmVlbiBmdWxmaWxsZWQuIEFsc28sIGtlZXAgaW4gbWluZCB0aGF0IGFsbFxyXG4gKiAgICAgIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JzIHdpbGwgb25seSBydW4gb25jZSBhbGwgc3luY2hyb25vdXMgdmFsaWRhdG9ycyBoYXZlIHBhc3NlZC5cclxuICpcclxuICogUGxlYXNlIG5vdGUgdGhhdCBpZiAkaHR0cCBpcyB1c2VkIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRoYXQgdGhlIHNlcnZlciByZXR1cm5zIGEgc3VjY2VzcyBIVFRQIHJlc3BvbnNlIGNvZGVcclxuICogaW4gb3JkZXIgdG8gZnVsZmlsbCB0aGUgdmFsaWRhdGlvbiBhbmQgYSBzdGF0dXMgbGV2ZWwgb2YgYDR4eGAgaW4gb3JkZXIgdG8gcmVqZWN0IHRoZSB2YWxpZGF0aW9uLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnMudW5pcXVlVXNlcm5hbWUgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcclxuICogICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcclxuICpcclxuICogICAvLyBMb29rdXAgdXNlciBieSB1c2VybmFtZVxyXG4gKiAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvJyArIHZhbHVlKS5cclxuICogICAgICB0aGVuKGZ1bmN0aW9uIHJlc29sdmVkKCkge1xyXG4gKiAgICAgICAgLy91c2VybmFtZSBleGlzdHMsIHRoaXMgbWVhbnMgdmFsaWRhdGlvbiBmYWlsc1xyXG4gKiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnZXhpc3RzJyk7XHJcbiAqICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0ZWQoKSB7XHJcbiAqICAgICAgICAvL3VzZXJuYW1lIGRvZXMgbm90IGV4aXN0LCB0aGVyZWZvcmUgdGhpcyB2YWxpZGF0aW9uIHBhc3Nlc1xyXG4gKiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAqICAgICAgfSk7XHJcbiAqIH07XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgdmFsaWRhdG9yLlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB2YWxpZGF0aW9uRm4gVGhlIHZhbGlkYXRpb24gZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHJ1bi5cclxuICpcclxuICogQHByb3BlcnR5IHtBcnJheS48RnVuY3Rpb24+fSAkdmlld0NoYW5nZUxpc3RlbmVycyBBcnJheSBvZiBmdW5jdGlvbnMgdG8gZXhlY3V0ZSB3aGVuZXZlciB0aGVcclxuICogICAgIHZpZXcgdmFsdWUgaGFzIGNoYW5nZWQuIEl0IGlzIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgYW5kIGl0cyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cclxuICogICAgIFRoaXMgY2FuIGJlIHVzZWQgaW4gcGxhY2Ugb2YgYWRkaXRpb25hbCAkd2F0Y2hlcyBhZ2FpbnN0IHRoZSBtb2RlbCB2YWx1ZS5cclxuICpcclxuICogQHByb3BlcnR5IHtPYmplY3R9ICRlcnJvciBBbiBvYmplY3QgaGFzaCB3aXRoIGFsbCBmYWlsaW5nIHZhbGlkYXRvciBpZHMgYXMga2V5cy5cclxuICogQHByb3BlcnR5IHtPYmplY3R9ICRwZW5kaW5nIEFuIG9iamVjdCBoYXNoIHdpdGggYWxsIHBlbmRpbmcgdmFsaWRhdG9yIGlkcyBhcyBrZXlzLlxyXG4gKlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR1bnRvdWNoZWQgVHJ1ZSBpZiBjb250cm9sIGhhcyBub3QgbG9zdCBmb2N1cyB5ZXQuXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHRvdWNoZWQgVHJ1ZSBpZiBjb250cm9sIGhhcyBsb3N0IGZvY3VzLlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGNvbnRyb2wgeWV0LlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRkaXJ0eSBUcnVlIGlmIHVzZXIgaGFzIGFscmVhZHkgaW50ZXJhY3RlZCB3aXRoIHRoZSBjb250cm9sLlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR2YWxpZCBUcnVlIGlmIHRoZXJlIGlzIG5vIGVycm9yLlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGVycm9yIG9uIHRoZSBjb250cm9sLlxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogYE5nTW9kZWxDb250cm9sbGVyYCBwcm92aWRlcyBBUEkgZm9yIHRoZSBgbmctbW9kZWxgIGRpcmVjdGl2ZS4gVGhlIGNvbnRyb2xsZXIgY29udGFpbnNcclxuICogc2VydmljZXMgZm9yIGRhdGEtYmluZGluZywgdmFsaWRhdGlvbiwgQ1NTIHVwZGF0ZXMsIGFuZCB2YWx1ZSBmb3JtYXR0aW5nIGFuZCBwYXJzaW5nLiBJdFxyXG4gKiBwdXJwb3NlZnVsbHkgZG9lcyBub3QgY29udGFpbiBhbnkgbG9naWMgd2hpY2ggZGVhbHMgd2l0aCBET00gcmVuZGVyaW5nIG9yIGxpc3RlbmluZyB0b1xyXG4gKiBET00gZXZlbnRzLiBTdWNoIERPTSByZWxhdGVkIGxvZ2ljIHNob3VsZCBiZSBwcm92aWRlZCBieSBvdGhlciBkaXJlY3RpdmVzIHdoaWNoIG1ha2UgdXNlIG9mXHJcbiAqIGBOZ01vZGVsQ29udHJvbGxlcmAgZm9yIGRhdGEtYmluZGluZy5cclxuICpcclxuICogIyMgQ3VzdG9tIENvbnRyb2wgRXhhbXBsZVxyXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHRvIHVzZSBgTmdNb2RlbENvbnRyb2xsZXJgIHdpdGggYSBjdXN0b20gY29udHJvbCB0byBhY2hpZXZlXHJcbiAqIGRhdGEtYmluZGluZy4gTm90aWNlIGhvdyBkaWZmZXJlbnQgZGlyZWN0aXZlcyAoYGNvbnRlbnRlZGl0YWJsZWAsIGBuZy1tb2RlbGAsIGFuZCBgcmVxdWlyZWRgKVxyXG4gKiBjb2xsYWJvcmF0ZSB0b2dldGhlciB0byBhY2hpZXZlIHRoZSBkZXNpcmVkIHJlc3VsdC5cclxuICpcclxuICogTm90ZSB0aGF0IGBjb250ZW50ZWRpdGFibGVgIGlzIGFuIEhUTUw1IGF0dHJpYnV0ZSwgd2hpY2ggdGVsbHMgdGhlIGJyb3dzZXIgdG8gbGV0IHRoZSBlbGVtZW50XHJcbiAqIGNvbnRlbnRzIGJlIGVkaXRlZCBpbiBwbGFjZSBieSB0aGUgdXNlci4gIFRoaXMgd2lsbCBub3Qgd29yayBvbiBvbGRlciBicm93c2Vycy5cclxuICpcclxuICogV2UgYXJlIHVzaW5nIHRoZSB7QGxpbmsgbmcuc2VydmljZTokc2NlICRzY2V9IHNlcnZpY2UgaGVyZSBhbmQgaW5jbHVkZSB0aGUge0BsaW5rIG5nU2FuaXRpemUgJHNhbml0aXplfVxyXG4gKiBtb2R1bGUgdG8gYXV0b21hdGljYWxseSByZW1vdmUgXCJiYWRcIiBjb250ZW50IGxpa2UgaW5saW5lIGV2ZW50IGxpc3RlbmVyIChlLmcuIGA8c3BhbiBvbmNsaWNrPVwiLi4uXCI+YCkuXHJcbiAqIEhvd2V2ZXIsIGFzIHdlIGFyZSB1c2luZyBgJHNjZWAgdGhlIG1vZGVsIGNhbiBzdGlsbCBkZWNpZGUgdG8gdG8gcHJvdmlkZSB1bnNhZmUgY29udGVudCBpZiBpdCBtYXJrc1xyXG4gKiB0aGF0IGNvbnRlbnQgdXNpbmcgdGhlIGAkc2NlYCBzZXJ2aWNlLlxyXG4gKlxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwiTmdNb2RlbENvbnRyb2xsZXJcIiBtb2R1bGU9XCJjdXN0b21Db250cm9sXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgW2NvbnRlbnRlZGl0YWJsZV0ge1xyXG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgICAgIG1pbi1oZWlnaHQ6IDIwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5uZy1pbnZhbGlkIHtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21Db250cm9sJywgWyduZ1Nhbml0aXplJ10pLlxyXG4gICAgICAgIGRpcmVjdGl2ZSgnY29udGVudGVkaXRhYmxlJywgWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywgLy8gb25seSBhY3RpdmF0ZSBvbiBlbGVtZW50IGF0dHJpYnV0ZVxyXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLCAvLyBnZXQgYSBob2xkIG9mIE5nTW9kZWxDb250cm9sbGVyXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICAgIGlmICghbmdNb2RlbCkgcmV0dXJuOyAvLyBkbyBub3RoaW5nIGlmIG5vIG5nLW1vZGVsXHJcblxyXG4gICAgICAgICAgICAgIC8vIFNwZWNpZnkgaG93IFVJIHNob3VsZCBiZSB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwoJHNjZS5nZXRUcnVzdGVkSHRtbChuZ01vZGVsLiR2aWV3VmFsdWUgfHwgJycpKTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNoYW5nZSBldmVudHMgdG8gZW5hYmxlIGJpbmRpbmdcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdibHVyIGtleXVwIGNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KHJlYWQpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIHJlYWQoKTsgLy8gaW5pdGlhbGl6ZVxyXG5cclxuICAgICAgICAgICAgICAvLyBXcml0ZSBkYXRhIHRvIHRoZSBtb2RlbFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIHJlYWQoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGVsZW1lbnQuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB3ZSBjbGVhciB0aGUgY29udGVudCBlZGl0YWJsZSB0aGUgYnJvd3NlciBsZWF2ZXMgYSA8YnI+IGJlaGluZFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgc3RyaXAtYnIgYXR0cmlidXRlIGlzIHByb3ZpZGVkIHRoZW4gd2Ugc3RyaXAgdGhpcyBvdXRcclxuICAgICAgICAgICAgICAgIGlmICggYXR0cnMuc3RyaXBCciAmJiBodG1sID09ICc8YnI+JyApIHtcclxuICAgICAgICAgICAgICAgICAgaHRtbCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKGh0bWwpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XHJcbiAgICAgICA8ZGl2IGNvbnRlbnRlZGl0YWJsZVxyXG4gICAgICAgICAgICBuYW1lPVwibXlXaWRnZXRcIiBuZy1tb2RlbD1cInVzZXJDb250ZW50XCJcclxuICAgICAgICAgICAgc3RyaXAtYnI9XCJ0cnVlXCJcclxuICAgICAgICAgICAgcmVxdWlyZWQ+Q2hhbmdlIG1lITwvZGl2PlxyXG4gICAgICAgIDxzcGFuIG5nLXNob3c9XCJteUZvcm0ubXlXaWRnZXQuJGVycm9yLnJlcXVpcmVkXCI+UmVxdWlyZWQhPC9zcGFuPlxyXG4gICAgICAgPGhyPlxyXG4gICAgICAgPHRleHRhcmVhIG5nLW1vZGVsPVwidXNlckNvbnRlbnRcIj48L3RleHRhcmVhPlxyXG4gICAgICA8L2Zvcm0+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICBpdCgnc2hvdWxkIGRhdGEtYmluZCBhbmQgYmVjb21lIGludmFsaWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ3NhZmFyaScgfHwgYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PSAnZmlyZWZveCcpIHtcclxuICAgICAgICAvLyBTYWZhcmlEcml2ZXIgY2FuJ3QgaGFuZGxlIGNvbnRlbnRlZGl0YWJsZVxyXG4gICAgICAgIC8vIGFuZCBGaXJlZm94IGRyaXZlciBjYW4ndCBjbGVhciBjb250ZW50ZWRpdGFibGVzIHZlcnkgd2VsbFxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB2YXIgY29udGVudEVkaXRhYmxlID0gZWxlbWVudChieS5jc3MoJ1tjb250ZW50ZWRpdGFibGVdJykpO1xyXG4gICAgICB2YXIgY29udGVudCA9ICdDaGFuZ2UgbWUhJztcclxuXHJcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0VGV4dCgpKS50b0VxdWFsKGNvbnRlbnQpO1xyXG5cclxuICAgICAgY29udGVudEVkaXRhYmxlLmNsZWFyKCk7XHJcbiAgICAgIGNvbnRlbnRFZGl0YWJsZS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5CQUNLX1NQQUNFKTtcclxuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRUZXh0KCkpLnRvRXF1YWwoJycpO1xyXG4gICAgICBleHBlY3QoY29udGVudEVkaXRhYmxlLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvbmctaW52YWxpZC1yZXF1aXJlZC8pO1xyXG4gICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICpcclxuICovXHJcbnZhciBOZ01vZGVsQ29udHJvbGxlciA9IFsnJHNjb3BlJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyRhdHRycycsICckZWxlbWVudCcsICckcGFyc2UnLCAnJGFuaW1hdGUnLCAnJHRpbWVvdXQnLCAnJHJvb3RTY29wZScsICckcScsXHJcbiAgICBmdW5jdGlvbigkc2NvcGUsICRleGNlcHRpb25IYW5kbGVyLCAkYXR0ciwgJGVsZW1lbnQsICRwYXJzZSwgJGFuaW1hdGUsICR0aW1lb3V0LCAkcm9vdFNjb3BlLCAkcSkge1xyXG4gIHRoaXMuJHZpZXdWYWx1ZSA9IE51bWJlci5OYU47XHJcbiAgdGhpcy4kbW9kZWxWYWx1ZSA9IE51bWJlci5OYU47XHJcbiAgdGhpcy4kdmFsaWRhdG9ycyA9IHt9O1xyXG4gIHRoaXMuJGFzeW5jVmFsaWRhdG9ycyA9IHt9O1xyXG4gIHRoaXMuJHBhcnNlcnMgPSBbXTtcclxuICB0aGlzLiRmb3JtYXR0ZXJzID0gW107XHJcbiAgdGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycyA9IFtdO1xyXG4gIHRoaXMuJHVudG91Y2hlZCA9IHRydWU7XHJcbiAgdGhpcy4kdG91Y2hlZCA9IGZhbHNlO1xyXG4gIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcclxuICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xyXG4gIHRoaXMuJHZhbGlkID0gdHJ1ZTtcclxuICB0aGlzLiRpbnZhbGlkID0gZmFsc2U7XHJcbiAgdGhpcy4kZXJyb3IgPSB7fTsgLy8ga2VlcCBpbnZhbGlkIGtleXMgaGVyZVxyXG4gIHRoaXMuJCRzdWNjZXNzID0ge307IC8vIGtlZXAgdmFsaWQga2V5cyBoZXJlXHJcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDsgLy8ga2VlcCBwZW5kaW5nIGtleXMgaGVyZVxyXG4gIHRoaXMuJG5hbWUgPSAkYXR0ci5uYW1lO1xyXG5cclxuXHJcbiAgdmFyIHBhcnNlZE5nTW9kZWwgPSAkcGFyc2UoJGF0dHIubmdNb2RlbCksXHJcbiAgICAgIHBlbmRpbmdEZWJvdW5jZSA9IG51bGwsXHJcbiAgICAgIGN0cmwgPSB0aGlzO1xyXG5cclxuICB2YXIgbmdNb2RlbEdldCA9IGZ1bmN0aW9uIG5nTW9kZWxHZXQoKSB7XHJcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IHBhcnNlZE5nTW9kZWwoJHNjb3BlKTtcclxuICAgIGlmIChjdHJsLiRvcHRpb25zICYmIGN0cmwuJG9wdGlvbnMuZ2V0dGVyU2V0dGVyICYmIGlzRnVuY3Rpb24obW9kZWxWYWx1ZSkpIHtcclxuICAgICAgbW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtb2RlbFZhbHVlO1xyXG4gIH07XHJcblxyXG4gIHZhciBuZ01vZGVsU2V0ID0gZnVuY3Rpb24gbmdNb2RlbFNldChuZXdWYWx1ZSkge1xyXG4gICAgdmFyIGdldHRlclNldHRlcjtcclxuICAgIGlmIChjdHJsLiRvcHRpb25zICYmIGN0cmwuJG9wdGlvbnMuZ2V0dGVyU2V0dGVyICYmXHJcbiAgICAgICAgaXNGdW5jdGlvbihnZXR0ZXJTZXR0ZXIgPSBwYXJzZWROZ01vZGVsKCRzY29wZSkpKSB7XHJcblxyXG4gICAgICBnZXR0ZXJTZXR0ZXIoY3RybC4kbW9kZWxWYWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwYXJzZWROZ01vZGVsLmFzc2lnbigkc2NvcGUsIGN0cmwuJG1vZGVsVmFsdWUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHRoaXMuJCRzZXRPcHRpb25zID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgY3RybC4kb3B0aW9ucyA9IG9wdGlvbnM7XHJcblxyXG4gICAgaWYgKCFwYXJzZWROZ01vZGVsLmFzc2lnbiAmJiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMuZ2V0dGVyU2V0dGVyKSkge1xyXG4gICAgICB0aHJvdyAkbmdNb2RlbE1pbkVycignbm9uYXNzaWduJywgXCJFeHByZXNzaW9uICd7MH0nIGlzIG5vbi1hc3NpZ25hYmxlLiBFbGVtZW50OiB7MX1cIixcclxuICAgICAgICAgICRhdHRyLm5nTW9kZWwsIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHJlbmRlclxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ2FsbGVkIHdoZW4gdGhlIHZpZXcgbmVlZHMgdG8gYmUgdXBkYXRlZC4gSXQgaXMgZXhwZWN0ZWQgdGhhdCB0aGUgdXNlciBvZiB0aGUgbmctbW9kZWxcclxuICAgKiBkaXJlY3RpdmUgd2lsbCBpbXBsZW1lbnQgdGhpcyBtZXRob2QuXHJcbiAgICpcclxuICAgKiBUaGUgYCRyZW5kZXIoKWAgbWV0aG9kIGlzIGludm9rZWQgaW4gdGhlIGZvbGxvd2luZyBzaXR1YXRpb25zOlxyXG4gICAqXHJcbiAgICogKiBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIGlzIGNhbGxlZC4gIElmIHdlIGFyZSByb2xsaW5nIGJhY2sgdGhlIHZpZXcgdmFsdWUgdG8gdGhlIGxhc3RcclxuICAgKiAgIGNvbW1pdHRlZCB2YWx1ZSB0aGVuIGAkcmVuZGVyKClgIGlzIGNhbGxlZCB0byB1cGRhdGUgdGhlIGlucHV0IGNvbnRyb2wuXHJcbiAgICogKiBUaGUgdmFsdWUgcmVmZXJlbmNlZCBieSBgbmctbW9kZWxgIGlzIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSBhbmQgYm90aCB0aGUgYCRtb2RlbFZhbHVlYCBhbmRcclxuICAgKiAgIHRoZSBgJHZpZXdWYWx1ZWAgYXJlIGRpZmZlcmVudCB0byBsYXN0IHRpbWUuXHJcbiAgICpcclxuICAgKiBTaW5jZSBgbmctbW9kZWxgIGRvZXMgbm90IGRvIGEgZGVlcCB3YXRjaCwgYCRyZW5kZXIoKWAgaXMgb25seSBpbnZva2VkIGlmIHRoZSB2YWx1ZXMgb2ZcclxuICAgKiBgJG1vZGVsVmFsdWVgIGFuZCBgJHZpZXdWYWx1ZWAgYXJlIGFjdHVhbGx5IGRpZmZlcmVudCB0byB0aGVpciBwcmV2aW91cyB2YWx1ZS4gSWYgYCRtb2RlbFZhbHVlYFxyXG4gICAqIG9yIGAkdmlld1ZhbHVlYCBhcmUgb2JqZWN0cyAocmF0aGVyIHRoYW4gYSBzdHJpbmcgb3IgbnVtYmVyKSB0aGVuIGAkcmVuZGVyKClgIHdpbGwgbm90IGJlXHJcbiAgICogaW52b2tlZCBpZiB5b3Ugb25seSBjaGFuZ2UgYSBwcm9wZXJ0eSBvbiB0aGUgb2JqZWN0cy5cclxuICAgKi9cclxuICB0aGlzLiRyZW5kZXIgPSBub29wO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkaXNFbXB0eVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBpcyBjYWxsZWQgd2hlbiB3ZSBuZWVkIHRvIGRldGVybWluZSBpZiB0aGUgdmFsdWUgb2YgdGhlIGlucHV0IGlzIGVtcHR5LlxyXG4gICAqXHJcbiAgICogRm9yIGluc3RhbmNlLCB0aGUgcmVxdWlyZWQgZGlyZWN0aXZlIGRvZXMgdGhpcyB0byB3b3JrIG91dCBpZiB0aGUgaW5wdXQgaGFzIGRhdGEgb3Igbm90LlxyXG4gICAqIFRoZSBkZWZhdWx0IGAkaXNFbXB0eWAgZnVuY3Rpb24gY2hlY2tzIHdoZXRoZXIgdGhlIHZhbHVlIGlzIGB1bmRlZmluZWRgLCBgJydgLCBgbnVsbGAgb3IgYE5hTmAuXHJcbiAgICpcclxuICAgKiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgZm9yIGlucHV0IGRpcmVjdGl2ZXMgd2hvc2UgY29uY2VwdCBvZiBiZWluZyBlbXB0eSBpcyBkaWZmZXJlbnQgdG8gdGhlXHJcbiAgICogZGVmYXVsdC4gVGhlIGBjaGVja2JveElucHV0VHlwZWAgZGlyZWN0aXZlIGRvZXMgdGhpcyBiZWNhdXNlIGluIGl0cyBjYXNlIGEgdmFsdWUgb2YgYGZhbHNlYFxyXG4gICAqIGltcGxpZXMgZW1wdHkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHZhbHVlIE1vZGVsIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgZW1wdHkuXHJcbiAgICovXHJcbiAgdGhpcy4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpIHx8IHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWU7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHBhcmVudEZvcm0gPSAkZWxlbWVudC5pbmhlcml0ZWREYXRhKCckZm9ybUNvbnRyb2xsZXInKSB8fCBudWxsRm9ybUN0cmwsXHJcbiAgICAgIGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQgPSAwO1xyXG5cclxuICAvLyBTZXR1cCBpbml0aWFsIHN0YXRlIG9mIHRoZSBjb250cm9sXHJcbiAgJGVsZW1lbnRcclxuICAgIC5hZGRDbGFzcyhQUklTVElORV9DTEFTUylcclxuICAgIC5hZGRDbGFzcyhVTlRPVUNIRURfQ0xBU1MpO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VmFsaWRpdHlcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENoYW5nZSB0aGUgdmFsaWRpdHkgc3RhdGUsIGFuZCBub3RpZmllcyB0aGUgZm9ybS5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgd2l0aGluICRwYXJzZXJzLyRmb3JtYXR0ZXJzLiBIb3dldmVyLCBpZiBwb3NzaWJsZSwgcGxlYXNlIHVzZSB0aGVcclxuICAgKiAgICAgICAgYG5nTW9kZWwuJHZhbGlkYXRvcnNgIHBpcGVsaW5lIHdoaWNoIGlzIGRlc2lnbmVkIHRvIGNhbGwgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWxpZGF0aW9uRXJyb3JLZXkgTmFtZSBvZiB0aGUgdmFsaWRhdG9yLiB0aGUgYHZhbGlkYXRpb25FcnJvcktleWAgd2lsbCBhc3NpZ25cclxuICAgKiAgICAgICAgdG8gYCRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldYCBhbmQgYCRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV1gXHJcbiAgICogICAgICAgIHNvIHRoYXQgaXQgaXMgYXZhaWxhYmxlIGZvciBkYXRhLWJpbmRpbmcuXHJcbiAgICogICAgICAgIFRoZSBgdmFsaWRhdGlvbkVycm9yS2V5YCBzaG91bGQgYmUgaW4gY2FtZWxDYXNlIGFuZCB3aWxsIGdldCBjb252ZXJ0ZWQgaW50byBkYXNoLWNhc2VcclxuICAgKiAgICAgICAgZm9yIGNsYXNzIG5hbWUuIEV4YW1wbGU6IGBteUVycm9yYCB3aWxsIHJlc3VsdCBpbiBgbmctdmFsaWQtbXktZXJyb3JgIGFuZCBgbmctaW52YWxpZC1teS1lcnJvcmBcclxuICAgKiAgICAgICAgY2xhc3MgYW5kIGNhbiBiZSBib3VuZCB0byBhcyAgYHt7c29tZUZvcm0uc29tZUNvbnRyb2wuJGVycm9yLm15RXJyb3J9fWAgLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNWYWxpZCBXaGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIGlzIHZhbGlkICh0cnVlKSwgaW52YWxpZCAoZmFsc2UpLCBwZW5kaW5nICh1bmRlZmluZWQpLFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICBvciBza2lwcGVkIChudWxsKS5cclxuICAgKi9cclxuICBhZGRTZXRWYWxpZGl0eU1ldGhvZCh7XHJcbiAgICBjdHJsOiB0aGlzLFxyXG4gICAgJGVsZW1lbnQ6ICRlbGVtZW50LFxyXG4gICAgc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XHJcbiAgICAgIG9iamVjdFtwcm9wZXJ0eV0gPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIHVuc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XHJcbiAgICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xyXG4gICAgfSxcclxuICAgIHBhcmVudEZvcm06IHBhcmVudEZvcm0sXHJcbiAgICAkYW5pbWF0ZTogJGFuaW1hdGVcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFByaXN0aW5lXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSAnbmctZGlydHknIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzIHByaXN0aW5lXHJcbiAgICogc3RhdGUgKG5nLXByaXN0aW5lIGNsYXNzKS4gQSBtb2RlbCBpcyBjb25zaWRlcmVkIHRvIGJlIHByaXN0aW5lIHdoZW4gdGhlIG1vZGVsIGhhcyBub3QgYmVlbiBjaGFuZ2VkXHJcbiAgICogZnJvbSB3aGVuIGZpcnN0IGNvbXBpbGVkIHdpdGhpbiB0aGVuIGZvcm0uXHJcbiAgICovXHJcbiAgdGhpcy4kc2V0UHJpc3RpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjdHJsLiRkaXJ0eSA9IGZhbHNlO1xyXG4gICAgY3RybC4kcHJpc3RpbmUgPSB0cnVlO1xyXG4gICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3MoJGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcclxuICAgICRhbmltYXRlLmFkZENsYXNzKCRlbGVtZW50LCBQUklTVElORV9DTEFTUyk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFVudG91Y2hlZFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdW50b3VjaGVkIHN0YXRlLlxyXG4gICAqXHJcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlICduZy10b3VjaGVkJyBjbGFzcyBhbmQgc2V0IHRoZSBjb250cm9sIHRvIGl0c1xyXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAobmctdW50b3VjaGVkIGNsYXNzKS4gVXBvbiBjb21waWxhdGlvbiwgYSBtb2RlbCBpcyBzZXQgYXMgdW50b3VjaGVkXHJcbiAgICogYnkgZGVmYXVsdCwgaG93ZXZlciB0aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHJlc3RvcmUgdGhhdCBzdGF0ZSBpZiB0aGUgbW9kZWwgaGFzXHJcbiAgICogYWxyZWFkeSBiZWVuIHRvdWNoZWQgYnkgdGhlIHVzZXIuXHJcbiAgICovXHJcbiAgdGhpcy4kc2V0VW50b3VjaGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjdHJsLiR0b3VjaGVkID0gZmFsc2U7XHJcbiAgICBjdHJsLiR1bnRvdWNoZWQgPSB0cnVlO1xyXG4gICAgJGFuaW1hdGUuc2V0Q2xhc3MoJGVsZW1lbnQsIFVOVE9VQ0hFRF9DTEFTUywgVE9VQ0hFRF9DTEFTUyk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFRvdWNoZWRcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldHMgdGhlIGNvbnRyb2wgdG8gaXRzIHRvdWNoZWQgc3RhdGUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgJ25nLXVudG91Y2hlZCcgY2xhc3MgYW5kIHNldCB0aGUgY29udHJvbCB0byBpdHNcclxuICAgKiB0b3VjaGVkIHN0YXRlIChuZy10b3VjaGVkIGNsYXNzKS4gQSBtb2RlbCBpcyBjb25zaWRlcmVkIHRvIGJlIHRvdWNoZWQgd2hlbiB0aGUgdXNlciBoYXNcclxuICAgKiBmaXJzdCBpbnRlcmFjdGVkIChmb2N1c3NlZCkgb24gdGhlIG1vZGVsIGlucHV0IGVsZW1lbnQgYW5kIHRoZW4gc2hpZnRlZCBmb2N1cyBhd2F5IChibHVycmVkKVxyXG4gICAqIGZyb20gdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICovXHJcbiAgdGhpcy4kc2V0VG91Y2hlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY3RybC4kdG91Y2hlZCA9IHRydWU7XHJcbiAgICBjdHJsLiR1bnRvdWNoZWQgPSBmYWxzZTtcclxuICAgICRhbmltYXRlLnNldENsYXNzKCRlbGVtZW50LCBUT1VDSEVEX0NMQVNTLCBVTlRPVUNIRURfQ0xBU1MpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyb2xsYmFja1ZpZXdWYWx1ZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ2FuY2VsIGFuIHVwZGF0ZSBhbmQgcmVzZXQgdGhlIGlucHV0IGVsZW1lbnQncyB2YWx1ZSB0byBwcmV2ZW50IGFuIHVwZGF0ZSB0byB0aGUgYCRtb2RlbFZhbHVlYCxcclxuICAgKiB3aGljaCBtYXkgYmUgY2F1c2VkIGJ5IGEgcGVuZGluZyBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lXHJcbiAgICogZnV0dXJlIGV2ZW50LlxyXG4gICAqXHJcbiAgICogSWYgeW91IGhhdmUgYW4gaW5wdXQgdGhhdCB1c2VzIGBuZy1tb2RlbC1vcHRpb25zYCB0byBzZXQgdXAgZGVib3VuY2VkIGV2ZW50cyBvciBldmVudHMgc3VjaFxyXG4gICAqIGFzIGJsdXIgeW91IGNhbiBoYXZlIGEgc2l0dWF0aW9uIHdoZXJlIHRoZXJlIGlzIGEgcGVyaW9kIHdoZW4gdGhlIGAkdmlld1ZhbHVlYFxyXG4gICAqIGlzIG91dCBvZiBzeW5jaCB3aXRoIHRoZSBuZ01vZGVsJ3MgYCRtb2RlbFZhbHVlYC5cclxuICAgKlxyXG4gICAqIEluIHRoaXMgY2FzZSwgeW91IGNhbiBydW4gaW50byBkaWZmaWN1bHRpZXMgaWYgeW91IHRyeSB0byB1cGRhdGUgdGhlIG5nTW9kZWwncyBgJG1vZGVsVmFsdWVgXHJcbiAgICogcHJvZ3JhbW1hdGljYWxseSBiZWZvcmUgdGhlc2UgZGVib3VuY2VkL2Z1dHVyZSBldmVudHMgaGF2ZSByZXNvbHZlZC9vY2N1cnJlZCwgYmVjYXVzZSBBbmd1bGFyJ3NcclxuICAgKiBkaXJ0eSBjaGVja2luZyBtZWNoYW5pc20gaXMgbm90IGFibGUgdG8gdGVsbCB3aGV0aGVyIHRoZSBtb2RlbCBoYXMgYWN0dWFsbHkgY2hhbmdlZCBvciBub3QuXHJcbiAgICpcclxuICAgKiBUaGUgYCRyb2xsYmFja1ZpZXdWYWx1ZSgpYCBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgcHJvZ3JhbW1hdGljYWxseSBjaGFuZ2luZyB0aGUgbW9kZWwgb2YgYW5cclxuICAgKiBpbnB1dCB3aGljaCBtYXkgaGF2ZSBzdWNoIGV2ZW50cyBwZW5kaW5nLiBUaGlzIGlzIGltcG9ydGFudCBpbiBvcmRlciB0byBtYWtlIHN1cmUgdGhhdCB0aGVcclxuICAgKiBpbnB1dCBmaWVsZCB3aWxsIGJlIHVwZGF0ZWQgd2l0aCB0aGUgbmV3IG1vZGVsIHZhbHVlIGFuZCBhbnkgcGVuZGluZyBvcGVyYXRpb25zIGFyZSBjYW5jZWxsZWQuXHJcbiAgICpcclxuICAgKiA8ZXhhbXBsZSBuYW1lPVwibmctbW9kZWwtY2FuY2VsLXVwZGF0ZVwiIG1vZHVsZT1cImNhbmNlbC11cGRhdGUtZXhhbXBsZVwiPlxyXG4gICAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gICAqICAgICBhbmd1bGFyLm1vZHVsZSgnY2FuY2VsLXVwZGF0ZS1leGFtcGxlJywgW10pXHJcbiAgICpcclxuICAgKiAgICAgLmNvbnRyb2xsZXIoJ0NhbmNlbFVwZGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAqICAgICAgICRzY29wZS5yZXNldFdpdGhDYW5jZWwgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAqICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNykge1xyXG4gICAqICAgICAgICAgICAkc2NvcGUubXlGb3JtLm15SW5wdXQxLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xyXG4gICAqICAgICAgICAgICAkc2NvcGUubXlWYWx1ZSA9ICcnO1xyXG4gICAqICAgICAgICAgfVxyXG4gICAqICAgICAgIH07XHJcbiAgICogICAgICAgJHNjb3BlLnJlc2V0V2l0aG91dENhbmNlbCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICogICAgICAgICBpZiAoZS5rZXlDb2RlID09IDI3KSB7XHJcbiAgICogICAgICAgICAgICRzY29wZS5teVZhbHVlID0gJyc7XHJcbiAgICogICAgICAgICB9XHJcbiAgICogICAgICAgfTtcclxuICAgKiAgICAgfV0pO1xyXG4gICAqICAgPC9maWxlPlxyXG4gICAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQ2FuY2VsVXBkYXRlQ29udHJvbGxlclwiPlxyXG4gICAqICAgICAgIDxwPlRyeSB0eXBpbmcgc29tZXRoaW5nIGluIGVhY2ggaW5wdXQuICBTZWUgdGhhdCB0aGUgbW9kZWwgb25seSB1cGRhdGVzIHdoZW4geW91XHJcbiAgICogICAgICAgICAgYmx1ciBvZmYgdGhlIGlucHV0LlxyXG4gICAqICAgICAgICA8L3A+XHJcbiAgICogICAgICAgIDxwPk5vdyBzZWUgd2hhdCBoYXBwZW5zIGlmIHlvdSBzdGFydCB0eXBpbmcgdGhlbiBwcmVzcyB0aGUgRXNjYXBlIGtleTwvcD5cclxuICAgKlxyXG4gICAqICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2JsdXInIH1cIj5cclxuICAgKiAgICAgICAgIDxwPldpdGggJHJvbGxiYWNrVmlld1ZhbHVlKCk8L3A+XHJcbiAgICogICAgICAgICA8aW5wdXQgbmFtZT1cIm15SW5wdXQxXCIgbmctbW9kZWw9XCJteVZhbHVlXCIgbmcta2V5ZG93bj1cInJlc2V0V2l0aENhbmNlbCgkZXZlbnQpXCI+PGJyLz5cclxuICAgKiAgICAgICAgIG15VmFsdWU6IFwie3sgbXlWYWx1ZSB9fVwiXHJcbiAgICpcclxuICAgKiAgICAgICAgIDxwPldpdGhvdXQgJHJvbGxiYWNrVmlld1ZhbHVlKCk8L3A+XHJcbiAgICogICAgICAgICA8aW5wdXQgbmFtZT1cIm15SW5wdXQyXCIgbmctbW9kZWw9XCJteVZhbHVlXCIgbmcta2V5ZG93bj1cInJlc2V0V2l0aG91dENhbmNlbCgkZXZlbnQpXCI+PGJyLz5cclxuICAgKiAgICAgICAgIG15VmFsdWU6IFwie3sgbXlWYWx1ZSB9fVwiXHJcbiAgICogICAgICAgPC9mb3JtPlxyXG4gICAqICAgICA8L2Rpdj5cclxuICAgKiAgIDwvZmlsZT5cclxuICAgKiA8L2V4YW1wbGU+XHJcbiAgICovXHJcbiAgdGhpcy4kcm9sbGJhY2tWaWV3VmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICAgICR0aW1lb3V0LmNhbmNlbChwZW5kaW5nRGVib3VuY2UpO1xyXG4gICAgY3RybC4kdmlld1ZhbHVlID0gY3RybC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7XHJcbiAgICBjdHJsLiRyZW5kZXIoKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdGVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJ1bnMgZWFjaCBvZiB0aGUgcmVnaXN0ZXJlZCB2YWxpZGF0b3JzIChmaXJzdCBzeW5jaHJvbm91cyB2YWxpZGF0b3JzIGFuZCB0aGVuIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JzKS5cclxuICAgKi9cclxuICB0aGlzLiR2YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gaWdub3JlICR2YWxpZGF0ZSBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcclxuICAgIGlmIChpc051bWJlcihjdHJsLiRtb2RlbFZhbHVlKSAmJiBpc05hTihjdHJsLiRtb2RlbFZhbHVlKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLiQkcGFyc2VBbmRWYWxpZGF0ZSgpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJCRydW5WYWxpZGF0b3JzID0gZnVuY3Rpb24ocGFyc2VWYWxpZCwgbW9kZWxWYWx1ZSwgdmlld1ZhbHVlLCBkb25lQ2FsbGJhY2spIHtcclxuICAgIGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQrKztcclxuICAgIHZhciBsb2NhbFZhbGlkYXRpb25SdW5JZCA9IGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQ7XHJcblxyXG4gICAgLy8gY2hlY2sgcGFyc2VyIGVycm9yXHJcbiAgICBpZiAoIXByb2Nlc3NQYXJzZUVycm9ycyhwYXJzZVZhbGlkKSkge1xyXG4gICAgICB2YWxpZGF0aW9uRG9uZShmYWxzZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghcHJvY2Vzc1N5bmNWYWxpZGF0b3JzKCkpIHtcclxuICAgICAgdmFsaWRhdGlvbkRvbmUoZmFsc2UpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBwcm9jZXNzQXN5bmNWYWxpZGF0b3JzKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvY2Vzc1BhcnNlRXJyb3JzKHBhcnNlVmFsaWQpIHtcclxuICAgICAgdmFyIGVycm9yS2V5ID0gY3RybC4kJHBhcnNlck5hbWUgfHwgJ3BhcnNlJztcclxuICAgICAgaWYgKHBhcnNlVmFsaWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHNldFZhbGlkaXR5KGVycm9yS2V5LCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRWYWxpZGl0eShlcnJvcktleSwgcGFyc2VWYWxpZCk7XHJcbiAgICAgICAgaWYgKCFwYXJzZVZhbGlkKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKGN0cmwuJHZhbGlkYXRvcnMsIGZ1bmN0aW9uKHYsIG5hbWUpIHtcclxuICAgICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgbnVsbCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGZvckVhY2goY3RybC4kYXN5bmNWYWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIG51bGwpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHByb2Nlc3NTeW5jVmFsaWRhdG9ycygpIHtcclxuICAgICAgdmFyIHN5bmNWYWxpZGF0b3JzVmFsaWQgPSB0cnVlO1xyXG4gICAgICBmb3JFYWNoKGN0cmwuJHZhbGlkYXRvcnMsIGZ1bmN0aW9uKHZhbGlkYXRvciwgbmFtZSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB2YWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKTtcclxuICAgICAgICBzeW5jVmFsaWRhdG9yc1ZhbGlkID0gc3luY1ZhbGlkYXRvcnNWYWxpZCAmJiByZXN1bHQ7XHJcbiAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgcmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghc3luY1ZhbGlkYXRvcnNWYWxpZCkge1xyXG4gICAgICAgIGZvckVhY2goY3RybC4kYXN5bmNWYWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XHJcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvY2Vzc0FzeW5jVmFsaWRhdG9ycygpIHtcclxuICAgICAgdmFyIHZhbGlkYXRvclByb21pc2VzID0gW107XHJcbiAgICAgIHZhciBhbGxWYWxpZCA9IHRydWU7XHJcbiAgICAgIGZvckVhY2goY3RybC4kYXN5bmNWYWxpZGF0b3JzLCBmdW5jdGlvbih2YWxpZGF0b3IsIG5hbWUpIHtcclxuICAgICAgICB2YXIgcHJvbWlzZSA9IHZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpO1xyXG4gICAgICAgIGlmICghaXNQcm9taXNlTGlrZShwcm9taXNlKSkge1xyXG4gICAgICAgICAgdGhyb3cgJG5nTW9kZWxNaW5FcnIoXCIkYXN5bmNWYWxpZGF0b3JzXCIsXHJcbiAgICAgICAgICAgIFwiRXhwZWN0ZWQgYXN5bmNocm9ub3VzIHZhbGlkYXRvciB0byByZXR1cm4gYSBwcm9taXNlIGJ1dCBnb3QgJ3swfScgaW5zdGVhZC5cIiwgcHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgdmFsaWRhdG9yUHJvbWlzZXMucHVzaChwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCB0cnVlKTtcclxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgICAgYWxsVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIGZhbHNlKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoIXZhbGlkYXRvclByb21pc2VzLmxlbmd0aCkge1xyXG4gICAgICAgIHZhbGlkYXRpb25Eb25lKHRydWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRxLmFsbCh2YWxpZGF0b3JQcm9taXNlcykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhbGlkYXRpb25Eb25lKGFsbFZhbGlkKTtcclxuICAgICAgICB9LCBub29wKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFZhbGlkaXR5KG5hbWUsIGlzVmFsaWQpIHtcclxuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSBjdXJyZW50VmFsaWRhdGlvblJ1bklkKSB7XHJcbiAgICAgICAgY3RybC4kc2V0VmFsaWRpdHkobmFtZSwgaXNWYWxpZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0aW9uRG9uZShhbGxWYWxpZCkge1xyXG4gICAgICBpZiAobG9jYWxWYWxpZGF0aW9uUnVuSWQgPT09IGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQpIHtcclxuXHJcbiAgICAgICAgZG9uZUNhbGxiYWNrKGFsbFZhbGlkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRjb21taXRWaWV3VmFsdWVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENvbW1pdCBhIHBlbmRpbmcgdXBkYXRlIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxyXG4gICAqXHJcbiAgICogVXBkYXRlcyBtYXkgYmUgcGVuZGluZyBieSBhIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBhIHNvbWUgZnV0dXJlXHJcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIHRoaXMgbWV0aG9kIGlzIHJhcmVseSBuZWVkZWQgYXMgYE5nTW9kZWxDb250cm9sbGVyYFxyXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxyXG4gICAqL1xyXG4gIHRoaXMuJGNvbW1pdFZpZXdWYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHZpZXdWYWx1ZSA9IGN0cmwuJHZpZXdWYWx1ZTtcclxuXHJcbiAgICAkdGltZW91dC5jYW5jZWwocGVuZGluZ0RlYm91bmNlKTtcclxuXHJcbiAgICAvLyBJZiB0aGUgdmlldyB2YWx1ZSBoYXMgbm90IGNoYW5nZWQgdGhlbiB3ZSBzaG91bGQganVzdCBleGl0LCBleGNlcHQgaW4gdGhlIGNhc2Ugd2hlcmUgdGhlcmUgaXNcclxuICAgIC8vIGEgbmF0aXZlIHZhbGlkYXRvciBvbiB0aGUgZWxlbWVudC4gSW4gdGhpcyBjYXNlIHRoZSB2YWxpZGF0aW9uIHN0YXRlIG1heSBoYXZlIGNoYW5nZWQgZXZlbiB0aG91Z2hcclxuICAgIC8vIHRoZSB2aWV3VmFsdWUgaGFzIHN0YXllZCBlbXB0eS5cclxuICAgIGlmIChjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSA9PT0gdmlld1ZhbHVlICYmICh2aWV3VmFsdWUgIT09ICcnIHx8ICFjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY3RybC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPSB2aWV3VmFsdWU7XHJcblxyXG4gICAgLy8gY2hhbmdlIHRvIGRpcnR5XHJcbiAgICBpZiAoY3RybC4kcHJpc3RpbmUpIHtcclxuICAgICAgY3RybC4kZGlydHkgPSB0cnVlO1xyXG4gICAgICBjdHJsLiRwcmlzdGluZSA9IGZhbHNlO1xyXG4gICAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcygkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xyXG4gICAgICAkYW5pbWF0ZS5hZGRDbGFzcygkZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xyXG4gICAgICBwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUoKTtcclxuICB9O1xyXG5cclxuICB0aGlzLiQkcGFyc2VBbmRWYWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHBhcnNlclZhbGlkID0gdHJ1ZSxcclxuICAgICAgICB2aWV3VmFsdWUgPSBjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSxcclxuICAgICAgICBtb2RlbFZhbHVlID0gdmlld1ZhbHVlO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGN0cmwuJHBhcnNlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbW9kZWxWYWx1ZSA9IGN0cmwuJHBhcnNlcnNbaV0obW9kZWxWYWx1ZSk7XHJcbiAgICAgIGlmIChpc1VuZGVmaW5lZChtb2RlbFZhbHVlKSkge1xyXG4gICAgICAgIHBhcnNlclZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpc051bWJlcihjdHJsLiRtb2RlbFZhbHVlKSAmJiBpc05hTihjdHJsLiRtb2RlbFZhbHVlKSkge1xyXG4gICAgICAvLyBjdHJsLiRtb2RlbFZhbHVlIGhhcyBub3QgYmVlbiB0b3VjaGVkIHlldC4uLlxyXG4gICAgICBjdHJsLiRtb2RlbFZhbHVlID0gbmdNb2RlbEdldCgpO1xyXG4gICAgfVxyXG4gICAgdmFyIHByZXZNb2RlbFZhbHVlID0gY3RybC4kbW9kZWxWYWx1ZTtcclxuICAgIHZhciBhbGxvd0ludmFsaWQgPSBjdHJsLiRvcHRpb25zICYmIGN0cmwuJG9wdGlvbnMuYWxsb3dJbnZhbGlkO1xyXG4gICAgaWYgKGFsbG93SW52YWxpZCkge1xyXG4gICAgICBjdHJsLiRtb2RlbFZhbHVlID0gbW9kZWxWYWx1ZTtcclxuICAgICAgd3JpdGVUb01vZGVsSWZOZWVkZWQoKTtcclxuICAgIH1cclxuICAgIGN0cmwuJCRydW5WYWxpZGF0b3JzKHBhcnNlclZhbGlkLCBtb2RlbFZhbHVlLCB2aWV3VmFsdWUsIGZ1bmN0aW9uKGFsbFZhbGlkKSB7XHJcbiAgICAgIGlmICghYWxsb3dJbnZhbGlkKSB7XHJcbiAgICAgICAgLy8gTm90ZTogRG9uJ3QgY2hlY2sgY3RybC4kdmFsaWQgaGVyZSwgYXMgd2UgY291bGQgaGF2ZVxyXG4gICAgICAgIC8vIGV4dGVybmFsIHZhbGlkYXRvcnMgKGUuZy4gY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyKSxcclxuICAgICAgICAvLyB0aGF0IGp1c3QgY2FsbCAkc2V0VmFsaWRpdHkgYW5kIG5lZWQgdGhlIG1vZGVsIHZhbHVlXHJcbiAgICAgICAgLy8gdG8gY2FsY3VsYXRlIHRoZWlyIHZhbGlkaXR5LlxyXG4gICAgICAgIGN0cmwuJG1vZGVsVmFsdWUgPSBhbGxWYWxpZCA/IG1vZGVsVmFsdWUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgd3JpdGVUb01vZGVsSWZOZWVkZWQoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gd3JpdGVUb01vZGVsSWZOZWVkZWQoKSB7XHJcbiAgICAgIGlmIChjdHJsLiRtb2RlbFZhbHVlICE9PSBwcmV2TW9kZWxWYWx1ZSkge1xyXG4gICAgICAgIGN0cmwuJCR3cml0ZU1vZGVsVG9TY29wZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kJHdyaXRlTW9kZWxUb1Njb3BlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBuZ01vZGVsU2V0KGN0cmwuJG1vZGVsVmFsdWUpO1xyXG4gICAgZm9yRWFjaChjdHJsLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLCBmdW5jdGlvbihsaXN0ZW5lcikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxpc3RlbmVyKCk7XHJcbiAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0Vmlld1ZhbHVlXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBVcGRhdGUgdGhlIHZpZXcgdmFsdWUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYW4gaW5wdXQgZGlyZWN0aXZlIHdhbnQgdG8gY2hhbmdlIHRoZSB2aWV3IHZhbHVlOyB0eXBpY2FsbHksXHJcbiAgICogdGhpcyBpcyBkb25lIGZyb20gd2l0aGluIGEgRE9NIGV2ZW50IGhhbmRsZXIuXHJcbiAgICpcclxuICAgKiBGb3IgZXhhbXBsZSB7QGxpbmsgbmcuZGlyZWN0aXZlOmlucHV0IGlucHV0fSBjYWxscyBpdCB3aGVuIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgY2hhbmdlcyBhbmRcclxuICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOnNlbGVjdCBzZWxlY3R9IGNhbGxzIGl0IHdoZW4gYW4gb3B0aW9uIGlzIHNlbGVjdGVkLlxyXG4gICAqXHJcbiAgICogSWYgdGhlIG5ldyBgdmFsdWVgIGlzIGFuIG9iamVjdCAocmF0aGVyIHRoYW4gYSBzdHJpbmcgb3IgYSBudW1iZXIpLCB3ZSBzaG91bGQgbWFrZSBhIGNvcHkgb2YgdGhlXHJcbiAgICogb2JqZWN0IGJlZm9yZSBwYXNzaW5nIGl0IHRvIGAkc2V0Vmlld1ZhbHVlYC4gIFRoaXMgaXMgYmVjYXVzZSBgbmdNb2RlbGAgZG9lcyBub3QgcGVyZm9ybSBhIGRlZXBcclxuICAgKiB3YXRjaCBvZiBvYmplY3RzLCBpdCBvbmx5IGxvb2tzIGZvciBhIGNoYW5nZSBvZiBpZGVudGl0eS4gSWYgeW91IG9ubHkgY2hhbmdlIHRoZSBwcm9wZXJ0eSBvZlxyXG4gICAqIHRoZSBvYmplY3QgdGhlbiBuZ01vZGVsIHdpbGwgbm90IHJlYWxpc2UgdGhhdCB0aGUgb2JqZWN0IGhhcyBjaGFuZ2VkIGFuZCB3aWxsIG5vdCBpbnZva2UgdGhlXHJcbiAgICogYCRwYXJzZXJzYCBhbmQgYCR2YWxpZGF0b3JzYCBwaXBlbGluZXMuXHJcbiAgICpcclxuICAgKiBGb3IgdGhpcyByZWFzb24sIHlvdSBzaG91bGQgbm90IGNoYW5nZSBwcm9wZXJ0aWVzIG9mIHRoZSBjb3B5IG9uY2UgaXQgaGFzIGJlZW4gcGFzc2VkIHRvXHJcbiAgICogYCRzZXRWaWV3VmFsdWVgLiBPdGhlcndpc2UgeW91IG1heSBjYXVzZSB0aGUgbW9kZWwgdmFsdWUgb24gdGhlIHNjb3BlIHRvIGNoYW5nZSBpbmNvcnJlY3RseS5cclxuICAgKlxyXG4gICAqIFdoZW4gdGhpcyBtZXRob2QgaXMgY2FsbGVkLCB0aGUgbmV3IGB2YWx1ZWAgd2lsbCBiZSBzdGFnZWQgZm9yIGNvbW1pdHRpbmcgdGhyb3VnaCB0aGUgYCRwYXJzZXJzYFxyXG4gICAqIGFuZCBgJHZhbGlkYXRvcnNgIHBpcGVsaW5lcy4gSWYgdGhlcmUgYXJlIG5vIHNwZWNpYWwge0BsaW5rIG5nTW9kZWxPcHRpb25zfSBzcGVjaWZpZWQgdGhlbiB0aGUgc3RhZ2VkXHJcbiAgICogdmFsdWUgc2VudCBkaXJlY3RseSBmb3IgcHJvY2Vzc2luZywgZmluYWxseSB0byBiZSBhcHBsaWVkIHRvIGAkbW9kZWxWYWx1ZWAgYW5kIHRoZW4gdGhlXHJcbiAgICogKipleHByZXNzaW9uKiogc3BlY2lmaWVkIGluIHRoZSBgbmctbW9kZWxgIGF0dHJpYnV0ZS5cclxuICAgKlxyXG4gICAqIExhc3RseSwgYWxsIHRoZSByZWdpc3RlcmVkIGNoYW5nZSBsaXN0ZW5lcnMsIGluIHRoZSBgJHZpZXdDaGFuZ2VMaXN0ZW5lcnNgIGxpc3QsIGFyZSBjYWxsZWQuXHJcbiAgICpcclxuICAgKiBJbiBjYXNlIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfSBkaXJlY3RpdmUgaXMgdXNlZCB3aXRoIGB1cGRhdGVPbmBcclxuICAgKiBhbmQgdGhlIGBkZWZhdWx0YCB0cmlnZ2VyIGlzIG5vdCBsaXN0ZWQsIGFsbCB0aG9zZSBhY3Rpb25zIHdpbGwgcmVtYWluIHBlbmRpbmcgdW50aWwgb25lIG9mIHRoZVxyXG4gICAqIGB1cGRhdGVPbmAgZXZlbnRzIGlzIHRyaWdnZXJlZCBvbiB0aGUgRE9NIGVsZW1lbnQuXHJcbiAgICogQWxsIHRoZXNlIGFjdGlvbnMgd2lsbCBiZSBkZWJvdW5jZWQgaWYgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9XHJcbiAgICogZGlyZWN0aXZlIGlzIHVzZWQgd2l0aCBhIGN1c3RvbSBkZWJvdW5jZSBmb3IgdGhpcyBwYXJ0aWN1bGFyIGV2ZW50LlxyXG4gICAqXHJcbiAgICogTm90ZSB0aGF0IGNhbGxpbmcgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCB0cmlnZ2VyIGEgYCRkaWdlc3RgLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFZhbHVlIGZyb20gdGhlIHZpZXcuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyaWdnZXIgRXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhlIHVwZGF0ZS5cclxuICAgKi9cclxuICB0aGlzLiRzZXRWaWV3VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSwgdHJpZ2dlcikge1xyXG4gICAgY3RybC4kdmlld1ZhbHVlID0gdmFsdWU7XHJcbiAgICBpZiAoIWN0cmwuJG9wdGlvbnMgfHwgY3RybC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQpIHtcclxuICAgICAgY3RybC4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KHRyaWdnZXIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHRoaXMuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCA9IGZ1bmN0aW9uKHRyaWdnZXIpIHtcclxuICAgIHZhciBkZWJvdW5jZURlbGF5ID0gMCxcclxuICAgICAgICBvcHRpb25zID0gY3RybC4kb3B0aW9ucyxcclxuICAgICAgICBkZWJvdW5jZTtcclxuXHJcbiAgICBpZiAob3B0aW9ucyAmJiBpc0RlZmluZWQob3B0aW9ucy5kZWJvdW5jZSkpIHtcclxuICAgICAgZGVib3VuY2UgPSBvcHRpb25zLmRlYm91bmNlO1xyXG4gICAgICBpZiAoaXNOdW1iZXIoZGVib3VuY2UpKSB7XHJcbiAgICAgICAgZGVib3VuY2VEZWxheSA9IGRlYm91bmNlO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzTnVtYmVyKGRlYm91bmNlW3RyaWdnZXJdKSkge1xyXG4gICAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZVt0cmlnZ2VyXTtcclxuICAgICAgfSBlbHNlIGlmIChpc051bWJlcihkZWJvdW5jZVsnZGVmYXVsdCddKSkge1xyXG4gICAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZVsnZGVmYXVsdCddO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJHRpbWVvdXQuY2FuY2VsKHBlbmRpbmdEZWJvdW5jZSk7XHJcbiAgICBpZiAoZGVib3VuY2VEZWxheSkge1xyXG4gICAgICBwZW5kaW5nRGVib3VuY2UgPSAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICBjdHJsLiRjb21taXRWaWV3VmFsdWUoKTtcclxuICAgICAgfSwgZGVib3VuY2VEZWxheSk7XHJcbiAgICB9IGVsc2UgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xyXG4gICAgICBjdHJsLiRjb21taXRWaWV3VmFsdWUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY3RybC4kY29tbWl0Vmlld1ZhbHVlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIG1vZGVsIC0+IHZhbHVlXHJcbiAgLy8gTm90ZTogd2UgY2Fubm90IHVzZSBhIG5vcm1hbCBzY29wZS4kd2F0Y2ggYXMgd2Ugd2FudCB0byBkZXRlY3QgdGhlIGZvbGxvd2luZzpcclxuICAvLyAxLiBzY29wZSB2YWx1ZSBpcyAnYSdcclxuICAvLyAyLiB1c2VyIGVudGVycyAnYidcclxuICAvLyAzLiBuZy1jaGFuZ2Uga2lja3MgaW4gYW5kIHJldmVydHMgc2NvcGUgdmFsdWUgdG8gJ2EnXHJcbiAgLy8gICAgLT4gc2NvcGUgdmFsdWUgZGlkIG5vdCBjaGFuZ2Ugc2luY2UgdGhlIGxhc3QgZGlnZXN0IGFzXHJcbiAgLy8gICAgICAgbmctY2hhbmdlIGV4ZWN1dGVzIGluIGFwcGx5IHBoYXNlXHJcbiAgLy8gNC4gdmlldyBzaG91bGQgYmUgY2hhbmdlZCBiYWNrIHRvICdhJ1xyXG4gICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gbmdNb2RlbFdhdGNoKCkge1xyXG4gICAgdmFyIG1vZGVsVmFsdWUgPSBuZ01vZGVsR2V0KCk7XHJcblxyXG4gICAgLy8gaWYgc2NvcGUgbW9kZWwgdmFsdWUgYW5kIG5nTW9kZWwgdmFsdWUgYXJlIG91dCBvZiBzeW5jXHJcbiAgICAvLyBUT0RPKHBlcmYpOiB3aHkgbm90IG1vdmUgdGhpcyB0byB0aGUgYWN0aW9uIGZuP1xyXG4gICAgaWYgKG1vZGVsVmFsdWUgIT09IGN0cmwuJG1vZGVsVmFsdWUpIHtcclxuICAgICAgY3RybC4kbW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XHJcblxyXG4gICAgICB2YXIgZm9ybWF0dGVycyA9IGN0cmwuJGZvcm1hdHRlcnMsXHJcbiAgICAgICAgICBpZHggPSBmb3JtYXR0ZXJzLmxlbmd0aDtcclxuXHJcbiAgICAgIHZhciB2aWV3VmFsdWUgPSBtb2RlbFZhbHVlO1xyXG4gICAgICB3aGlsZShpZHgtLSkge1xyXG4gICAgICAgIHZpZXdWYWx1ZSA9IGZvcm1hdHRlcnNbaWR4XSh2aWV3VmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjdHJsLiR2aWV3VmFsdWUgIT09IHZpZXdWYWx1ZSkge1xyXG4gICAgICAgIGN0cmwuJHZpZXdWYWx1ZSA9IGN0cmwuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID0gdmlld1ZhbHVlO1xyXG4gICAgICAgIGN0cmwuJHJlbmRlcigpO1xyXG5cclxuICAgICAgICBjdHJsLiQkcnVuVmFsaWRhdG9ycyh1bmRlZmluZWQsIG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgbm9vcCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbW9kZWxWYWx1ZTtcclxuICB9KTtcclxufV07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdNb2RlbFxyXG4gKlxyXG4gKiBAZWxlbWVudCBpbnB1dFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ01vZGVsYCBkaXJlY3RpdmUgYmluZHMgYW4gYGlucHV0YCxgc2VsZWN0YCwgYHRleHRhcmVhYCAob3IgY3VzdG9tIGZvcm0gY29udHJvbCkgdG8gYVxyXG4gKiBwcm9wZXJ0eSBvbiB0aGUgc2NvcGUgdXNpbmcge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIgTmdNb2RlbENvbnRyb2xsZXJ9LFxyXG4gKiB3aGljaCBpcyBjcmVhdGVkIGFuZCBleHBvc2VkIGJ5IHRoaXMgZGlyZWN0aXZlLlxyXG4gKlxyXG4gKiBgbmdNb2RlbGAgaXMgcmVzcG9uc2libGUgZm9yOlxyXG4gKlxyXG4gKiAtIEJpbmRpbmcgdGhlIHZpZXcgaW50byB0aGUgbW9kZWwsIHdoaWNoIG90aGVyIGRpcmVjdGl2ZXMgc3VjaCBhcyBgaW5wdXRgLCBgdGV4dGFyZWFgIG9yIGBzZWxlY3RgXHJcbiAqICAgcmVxdWlyZS5cclxuICogLSBQcm92aWRpbmcgdmFsaWRhdGlvbiBiZWhhdmlvciAoaS5lLiByZXF1aXJlZCwgbnVtYmVyLCBlbWFpbCwgdXJsKS5cclxuICogLSBLZWVwaW5nIHRoZSBzdGF0ZSBvZiB0aGUgY29udHJvbCAodmFsaWQvaW52YWxpZCwgZGlydHkvcHJpc3RpbmUsIHRvdWNoZWQvdW50b3VjaGVkLCB2YWxpZGF0aW9uIGVycm9ycykuXHJcbiAqIC0gU2V0dGluZyByZWxhdGVkIGNzcyBjbGFzc2VzIG9uIHRoZSBlbGVtZW50IChgbmctdmFsaWRgLCBgbmctaW52YWxpZGAsIGBuZy1kaXJ0eWAsIGBuZy1wcmlzdGluZWAsIGBuZy10b3VjaGVkYCwgYG5nLXVudG91Y2hlZGApIGluY2x1ZGluZyBhbmltYXRpb25zLlxyXG4gKiAtIFJlZ2lzdGVyaW5nIHRoZSBjb250cm9sIHdpdGggaXRzIHBhcmVudCB7QGxpbmsgbmcuZGlyZWN0aXZlOmZvcm0gZm9ybX0uXHJcbiAqXHJcbiAqIE5vdGU6IGBuZ01vZGVsYCB3aWxsIHRyeSB0byBiaW5kIHRvIHRoZSBwcm9wZXJ0eSBnaXZlbiBieSBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uIG9uIHRoZVxyXG4gKiBjdXJyZW50IHNjb3BlLiBJZiB0aGUgcHJvcGVydHkgZG9lc24ndCBhbHJlYWR5IGV4aXN0IG9uIHRoaXMgc2NvcGUsIGl0IHdpbGwgYmUgY3JlYXRlZFxyXG4gKiBpbXBsaWNpdGx5IGFuZCBhZGRlZCB0byB0aGUgc2NvcGUuXHJcbiAqXHJcbiAqIEZvciBiZXN0IHByYWN0aWNlcyBvbiB1c2luZyBgbmdNb2RlbGAsIHNlZTpcclxuICpcclxuICogIC0gW2h0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvd2lraS9VbmRlcnN0YW5kaW5nLVNjb3Blc11cclxuICpcclxuICogRm9yIGJhc2ljIGV4YW1wbGVzLCBob3cgdG8gdXNlIGBuZ01vZGVsYCwgc2VlOlxyXG4gKlxyXG4gKiAgLSB7QGxpbmsgbmcuZGlyZWN0aXZlOmlucHV0IGlucHV0fVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFt0ZXh0XSB0ZXh0fVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFtjaGVja2JveF0gY2hlY2tib3h9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W3JhZGlvXSByYWRpb31cclxuICogICAgLSB7QGxpbmsgaW5wdXRbbnVtYmVyXSBudW1iZXJ9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W2VtYWlsXSBlbWFpbH1cclxuICogICAgLSB7QGxpbmsgaW5wdXRbdXJsXSB1cmx9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W2RhdGVdIGRhdGV9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W2RhdGVUaW1lTG9jYWxdIGRhdGVUaW1lTG9jYWx9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W3RpbWVdIHRpbWV9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W21vbnRoXSBtb250aH1cclxuICogICAgLSB7QGxpbmsgaW5wdXRbd2Vla10gd2Vla31cclxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTpzZWxlY3Qgc2VsZWN0fVxyXG4gKiAgLSB7QGxpbmsgbmcuZGlyZWN0aXZlOnRleHRhcmVhIHRleHRhcmVhfVxyXG4gKlxyXG4gKiAjIENTUyBjbGFzc2VzXHJcbiAqIFRoZSBmb2xsb3dpbmcgQ1NTIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkIG9uIHRoZSBhc3NvY2lhdGVkIGlucHV0L3NlbGVjdC90ZXh0YXJlYSBlbGVtZW50XHJcbiAqIGRlcGVuZGluZyBvbiB0aGUgdmFsaWRpdHkgb2YgdGhlIG1vZGVsLlxyXG4gKlxyXG4gKiAgLSBgbmctdmFsaWRgIGlzIHNldCBpZiB0aGUgbW9kZWwgaXMgdmFsaWQuXHJcbiAqICAtIGBuZy1pbnZhbGlkYCBpcyBzZXQgaWYgdGhlIG1vZGVsIGlzIGludmFsaWQuXHJcbiAqICAtIGBuZy1wcmlzdGluZWAgaXMgc2V0IGlmIHRoZSBtb2RlbCBpcyBwcmlzdGluZS5cclxuICogIC0gYG5nLWRpcnR5YCBpcyBzZXQgaWYgdGhlIG1vZGVsIGlzIGRpcnR5LlxyXG4gKlxyXG4gKiBLZWVwIGluIG1pbmQgdGhhdCBuZ0FuaW1hdGUgY2FuIGRldGVjdCBlYWNoIG9mIHRoZXNlIGNsYXNzZXMgd2hlbiBhZGRlZCBhbmQgcmVtb3ZlZC5cclxuICpcclxuICogIyMgQW5pbWF0aW9uIEhvb2tzXHJcbiAqXHJcbiAqIEFuaW1hdGlvbnMgd2l0aGluIG1vZGVscyBhcmUgdHJpZ2dlcmVkIHdoZW4gYW55IG9mIHRoZSBhc3NvY2lhdGVkIENTUyBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZFxyXG4gKiBvbiB0aGUgaW5wdXQgZWxlbWVudCB3aGljaCBpcyBhdHRhY2hlZCB0byB0aGUgbW9kZWwuIFRoZXNlIGNsYXNzZXMgYXJlOiBgLm5nLXByaXN0aW5lYCwgYC5uZy1kaXJ0eWAsXHJcbiAqIGAubmctaW52YWxpZGAgYW5kIGAubmctdmFsaWRgIGFzIHdlbGwgYXMgYW55IG90aGVyIHZhbGlkYXRpb25zIHRoYXQgYXJlIHBlcmZvcm1lZCBvbiB0aGUgbW9kZWwgaXRzZWxmLlxyXG4gKiBUaGUgYW5pbWF0aW9ucyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2l0aGluIG5nTW9kZWwgYXJlIHNpbWlsYXIgdG8gaG93IHRoZXkgd29yayBpbiBuZ0NsYXNzIGFuZFxyXG4gKiBhbmltYXRpb25zIGNhbiBiZSBob29rZWQgaW50byB1c2luZyBDU1MgdHJhbnNpdGlvbnMsIGtleWZyYW1lcyBhcyB3ZWxsIGFzIEpTIGFuaW1hdGlvbnMuXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBhIHNpbXBsZSB3YXkgdG8gdXRpbGl6ZSBDU1MgdHJhbnNpdGlvbnMgdG8gc3R5bGUgYW4gaW5wdXQgZWxlbWVudFxyXG4gKiB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIGFzIGludmFsaWQgYWZ0ZXIgaXQgaGFzIGJlZW4gdmFsaWRhdGVkOlxyXG4gKlxyXG4gKiA8cHJlPlxyXG4gKiAvL2JlIHN1cmUgdG8gaW5jbHVkZSBuZ0FuaW1hdGUgYXMgYSBtb2R1bGUgdG8gaG9vayBpbnRvIG1vcmVcclxuICogLy9hZHZhbmNlZCBhbmltYXRpb25zXHJcbiAqIC5teS1pbnB1dCB7XHJcbiAqICAgdHJhbnNpdGlvbjowLjVzIGxpbmVhciBhbGw7XHJcbiAqICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAqIH1cclxuICogLm15LWlucHV0Lm5nLWludmFsaWQge1xyXG4gKiAgIGJhY2tncm91bmQ6IHJlZDtcclxuICogICBjb2xvcjp3aGl0ZTtcclxuICogfVxyXG4gKiA8L3ByZT5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogPGV4YW1wbGUgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgZml4QmFzZT1cInRydWVcIiBtb2R1bGU9XCJpbnB1dEV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnaW5wdXRFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUudmFsID0gJzEnO1xyXG4gICAgICAgICAgfV0pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICA8c3R5bGU+XHJcbiAgICAgICAgIC5teS1pbnB1dCB7XHJcbiAgICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcclxuICAgICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcclxuICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgICAgICAgfVxyXG4gICAgICAgICAubXktaW5wdXQubmctaW52YWxpZCB7XHJcbiAgICAgICAgICAgY29sb3I6d2hpdGU7XHJcbiAgICAgICAgICAgYmFja2dyb3VuZDogcmVkO1xyXG4gICAgICAgICB9XHJcbiAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgVXBkYXRlIGlucHV0IHRvIHNlZSB0cmFuc2l0aW9ucyB3aGVuIHZhbGlkL2ludmFsaWQuXHJcbiAgICAgICBJbnRlZ2VyIGlzIGEgdmFsaWQgdmFsdWUuXHJcbiAgICAgICA8Zm9ybSBuYW1lPVwidGVzdEZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidmFsXCIgbmctcGF0dGVybj1cIi9eXFxkKyQvXCIgbmFtZT1cImFuaW1cIiBjbGFzcz1cIm15LWlucHV0XCIgLz5cclxuICAgICAgIDwvZm9ybT5cclxuICAgICA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICogIyMgQmluZGluZyB0byBhIGdldHRlci9zZXR0ZXJcclxuICpcclxuICogU29tZXRpbWVzIGl0J3MgaGVscGZ1bCB0byBiaW5kIGBuZ01vZGVsYCB0byBhIGdldHRlci9zZXR0ZXIgZnVuY3Rpb24uICBBIGdldHRlci9zZXR0ZXIgaXMgYVxyXG4gKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgbW9kZWwgd2hlbiBjYWxsZWQgd2l0aCB6ZXJvIGFyZ3VtZW50cywgYW5kIHNldHNcclxuICogdGhlIGludGVybmFsIHN0YXRlIG9mIGEgbW9kZWwgd2hlbiBjYWxsZWQgd2l0aCBhbiBhcmd1bWVudC4gSXQncyBzb21ldGltZXMgdXNlZnVsIHRvIHVzZSB0aGlzXHJcbiAqIGZvciBtb2RlbHMgdGhhdCBoYXZlIGFuIGludGVybmFsIHJlcHJlc2VudGF0aW9uIHRoYXQncyBkaWZmZXJlbnQgdGhhbiB3aGF0IHRoZSBtb2RlbCBleHBvc2VzXHJcbiAqIHRvIHRoZSB2aWV3LlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxyXG4gKiAqKkJlc3QgUHJhY3RpY2U6KiogSXQncyBiZXN0IHRvIGtlZXAgZ2V0dGVycyBmYXN0IGJlY2F1c2UgQW5ndWxhciBpcyBsaWtlbHkgdG8gY2FsbCB0aGVtIG1vcmVcclxuICogZnJlcXVlbnRseSB0aGFuIG90aGVyIHBhcnRzIG9mIHlvdXIgY29kZS5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqIFlvdSB1c2UgdGhpcyBiZWhhdmlvciBieSBhZGRpbmcgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCJgIHRvIGFuIGVsZW1lbnQgdGhhdFxyXG4gKiBoYXMgYG5nLW1vZGVsYCBhdHRhY2hlZCB0byBpdC4gWW91IGNhbiBhbHNvIGFkZCBgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cImAgdG9cclxuICogYSBgPGZvcm0+YCwgd2hpY2ggd2lsbCBlbmFibGUgdGhpcyBiZWhhdmlvciBmb3IgYWxsIGA8aW5wdXQ+YHMgd2l0aGluIGl0LiBTZWVcclxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnNgfSBmb3IgbW9yZS5cclxuICpcclxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYG5nTW9kZWxgIHdpdGggYSBnZXR0ZXIvc2V0dGVyOlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbC1nZXR0ZXItc2V0dGVyXCIgbW9kdWxlPVwiZ2V0dGVyU2V0dGVyRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cclxuICAgICAgICAgICBOYW1lOlxyXG4gICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcclxuICAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cIiAvPlxyXG4gICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgIDxwcmU+dXNlci5uYW1lID0gPHNwYW4gbmctYmluZD1cInVzZXIubmFtZSgpXCI+PC9zcGFuPjwvcHJlPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cclxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdnZXR0ZXJTZXR0ZXJFeGFtcGxlJywgW10pXHJcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgdmFyIF9uYW1lID0gJ0JyaWFuJztcclxuICAgICAgICAgICAkc2NvcGUudXNlciA9IHtcclxuICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uIChuZXdOYW1lKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChuZXdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgIF9uYW1lID0gbmV3TmFtZTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICByZXR1cm4gX25hbWU7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfTtcclxuICAgICAgICAgfV0pO1xyXG4gICAgIDwvZmlsZT5cclxuICogPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nTW9kZWxEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIHJlcXVpcmU6IFsnbmdNb2RlbCcsICdeP2Zvcm0nLCAnXj9uZ01vZGVsT3B0aW9ucyddLFxyXG4gICAgY29udHJvbGxlcjogTmdNb2RlbENvbnRyb2xsZXIsXHJcbiAgICBsaW5rOiB7XHJcbiAgICAgIHByZTogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XHJcbiAgICAgICAgdmFyIG1vZGVsQ3RybCA9IGN0cmxzWzBdLFxyXG4gICAgICAgICAgICBmb3JtQ3RybCA9IGN0cmxzWzFdIHx8IG51bGxGb3JtQ3RybDtcclxuXHJcbiAgICAgICAgbW9kZWxDdHJsLiQkc2V0T3B0aW9ucyhjdHJsc1syXSAmJiBjdHJsc1syXS4kb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIG5vdGlmeSBvdGhlcnMsIGVzcGVjaWFsbHkgcGFyZW50IGZvcm1zXHJcbiAgICAgICAgZm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTtcclxuXHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZm9ybUN0cmwuJHJlbW92ZUNvbnRyb2wobW9kZWxDdHJsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgcG9zdDogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XHJcbiAgICAgICAgdmFyIG1vZGVsQ3RybCA9IGN0cmxzWzBdO1xyXG4gICAgICAgIGlmIChtb2RlbEN0cmwuJG9wdGlvbnMgJiYgbW9kZWxDdHJsLiRvcHRpb25zLnVwZGF0ZU9uKSB7XHJcbiAgICAgICAgICBlbGVtZW50Lm9uKG1vZGVsQ3RybC4kb3B0aW9ucy51cGRhdGVPbiwgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgbW9kZWxDdHJsLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoZXYgJiYgZXYudHlwZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnQub24oJ2JsdXInLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgaWYgKG1vZGVsQ3RybC4kdG91Y2hlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbW9kZWxDdHJsLiRzZXRUb3VjaGVkKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDaGFuZ2VcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEV2YWx1YXRlIHRoZSBnaXZlbiBleHByZXNzaW9uIHdoZW4gdGhlIHVzZXIgY2hhbmdlcyB0aGUgaW5wdXQuXHJcbiAqIFRoZSBleHByZXNzaW9uIGlzIGV2YWx1YXRlZCBpbW1lZGlhdGVseSwgdW5saWtlIHRoZSBKYXZhU2NyaXB0IG9uY2hhbmdlIGV2ZW50XHJcbiAqIHdoaWNoIG9ubHkgdHJpZ2dlcnMgYXQgdGhlIGVuZCBvZiBhIGNoYW5nZSAodXN1YWxseSwgd2hlbiB0aGUgdXNlciBsZWF2ZXMgdGhlXHJcbiAqIGZvcm0gZWxlbWVudCBvciBwcmVzc2VzIHRoZSByZXR1cm4ga2V5KS5cclxuICpcclxuICogVGhlIGBuZ0NoYW5nZWAgZXhwcmVzc2lvbiBpcyBvbmx5IGV2YWx1YXRlZCB3aGVuIGEgY2hhbmdlIGluIHRoZSBpbnB1dCB2YWx1ZSBjYXVzZXNcclxuICogYSBuZXcgdmFsdWUgdG8gYmUgY29tbWl0dGVkIHRvIHRoZSBtb2RlbC5cclxuICpcclxuICogSXQgd2lsbCBub3QgYmUgZXZhbHVhdGVkOlxyXG4gKiAqIGlmIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBgJHBhcnNlcnNgIHRyYW5zZm9ybWF0aW9uIHBpcGVsaW5lIGhhcyBub3QgY2hhbmdlZFxyXG4gKiAqIGlmIHRoZSBpbnB1dCBoYXMgY29udGludWVkIHRvIGJlIGludmFsaWQgc2luY2UgdGhlIG1vZGVsIHdpbGwgc3RheSBgbnVsbGBcclxuICogKiBpZiB0aGUgbW9kZWwgaXMgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5IGFuZCBub3QgYnkgYSBjaGFuZ2UgdG8gdGhlIGlucHV0IHZhbHVlXHJcbiAqXHJcbiAqXHJcbiAqIE5vdGUsIHRoaXMgZGlyZWN0aXZlIHJlcXVpcmVzIGBuZ01vZGVsYCB0byBiZSBwcmVzZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBpbnB1dFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2hhbmdlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb24gY2hhbmdlXHJcbiAqIGluIGlucHV0IHZhbHVlLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDaGFuZ2UtZGlyZWN0aXZlXCIgbW9kdWxlPVwiY2hhbmdlRXhhbXBsZVwiPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgICA8c2NyaXB0PlxyXG4gKiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY2hhbmdlRXhhbXBsZScsIFtdKVxyXG4gKiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAqICAgICAgICAgICAkc2NvcGUuY291bnRlciA9IDA7XHJcbiAqICAgICAgICAgICAkc2NvcGUuY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgICAgICAgICRzY29wZS5jb3VudGVyKys7XHJcbiAqICAgICAgICAgICB9O1xyXG4gKiAgICAgICAgIH1dKTtcclxuICogICAgIDwvc2NyaXB0PlxyXG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICogICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY29uZmlybWVkXCIgbmctY2hhbmdlPVwiY2hhbmdlKClcIiBpZD1cIm5nLWNoYW5nZS1leGFtcGxlMVwiIC8+XHJcbiAqICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbmZpcm1lZFwiIGlkPVwibmctY2hhbmdlLWV4YW1wbGUyXCIgLz5cclxuICogICAgICAgPGxhYmVsIGZvcj1cIm5nLWNoYW5nZS1leGFtcGxlMlwiPkNvbmZpcm1lZDwvbGFiZWw+PGJyIC8+XHJcbiAqICAgICAgIDx0dD5kZWJ1ZyA9IHt7Y29uZmlybWVkfX08L3R0Pjxici8+XHJcbiAqICAgICAgIDx0dD5jb3VudGVyID0ge3tjb3VudGVyfX08L3R0Pjxici8+XHJcbiAqICAgICA8L2Rpdj5cclxuICogICA8L2ZpbGU+XHJcbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gKiAgICAgdmFyIGNvdW50ZXIgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50ZXInKSk7XHJcbiAqICAgICB2YXIgZGVidWcgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvbmZpcm1lZCcpKTtcclxuICpcclxuICogICAgIGl0KCdzaG91bGQgZXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gaWYgY2hhbmdpbmcgZnJvbSB2aWV3JywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9Db250YWluKCcwJyk7XHJcbiAqXHJcbiAqICAgICAgIGVsZW1lbnQoYnkuaWQoJ25nLWNoYW5nZS1leGFtcGxlMScpKS5jbGljaygpO1xyXG4gKlxyXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMScpO1xyXG4gKiAgICAgICBleHBlY3QoZGVidWcuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICogICAgIH0pO1xyXG4gKlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBub3QgZXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gaWYgY2hhbmdpbmcgZnJvbSBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICBlbGVtZW50KGJ5LmlkKCduZy1jaGFuZ2UtZXhhbXBsZTInKSkuY2xpY2soKTtcclxuXHJcbiAqICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9Db250YWluKCcwJyk7XHJcbiAqICAgICAgIGV4cGVjdChkZWJ1Zy5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gKiAgICAgfSk7XHJcbiAqICAgPC9maWxlPlxyXG4gKiA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdDaGFuZ2VEaXJlY3RpdmUgPSB2YWx1ZUZuKHtcclxuICByZXN0cmljdDogJ0EnLFxyXG4gIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xyXG4gICAgY3RybC4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBzY29wZS4kZXZhbChhdHRyLm5nQ2hhbmdlKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5cclxudmFyIHJlcXVpcmVkRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xyXG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcclxuICAgICAgYXR0ci5yZXF1aXJlZCA9IHRydWU7IC8vIGZvcmNlIHRydXRoeSBpbiBjYXNlIHdlIGFyZSBvbiBub24gaW5wdXQgZWxlbWVudFxyXG5cclxuICAgICAgY3RybC4kdmFsaWRhdG9ycy5yZXF1aXJlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuICFhdHRyLnJlcXVpcmVkIHx8ICFjdHJsLiRpc0VtcHR5KHZhbHVlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGF0dHIuJG9ic2VydmUoJ3JlcXVpcmVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcblxyXG52YXIgcGF0dGVybkRpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHIsIGN0cmwpIHtcclxuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XHJcblxyXG4gICAgICB2YXIgcmVnZXhwLCBwYXR0ZXJuRXhwID0gYXR0ci5uZ1BhdHRlcm4gfHwgYXR0ci5wYXR0ZXJuO1xyXG4gICAgICBhdHRyLiRvYnNlcnZlKCdwYXR0ZXJuJywgZnVuY3Rpb24ocmVnZXgpIHtcclxuICAgICAgICBpZiAoaXNTdHJpbmcocmVnZXgpICYmIHJlZ2V4Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVnZXggJiYgIXJlZ2V4LnRlc3QpIHtcclxuICAgICAgICAgIHRocm93IG1pbkVycignbmdQYXR0ZXJuJykoJ25vcmVnZXhwJyxcclxuICAgICAgICAgICAgJ0V4cGVjdGVkIHswfSB0byBiZSBhIFJlZ0V4cCBidXQgd2FzIHsxfS4gRWxlbWVudDogezJ9JywgcGF0dGVybkV4cCxcclxuICAgICAgICAgICAgcmVnZXgsIHN0YXJ0aW5nVGFnKGVsbSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVnZXhwID0gcmVnZXggfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY3RybC4kdmFsaWRhdG9ycy5wYXR0ZXJuID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgaXNVbmRlZmluZWQocmVnZXhwKSB8fCByZWdleHAudGVzdCh2YWx1ZSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcblxyXG52YXIgbWF4bGVuZ3RoRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xyXG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcclxuXHJcbiAgICAgIHZhciBtYXhsZW5ndGggPSAwO1xyXG4gICAgICBhdHRyLiRvYnNlcnZlKCdtYXhsZW5ndGgnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIG1heGxlbmd0aCA9IGludCh2YWx1ZSkgfHwgMDtcclxuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgICAgY3RybC4kdmFsaWRhdG9ycy5tYXhsZW5ndGggPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eShtb2RlbFZhbHVlKSB8fCB2aWV3VmFsdWUubGVuZ3RoIDw9IG1heGxlbmd0aDtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5cclxudmFyIG1pbmxlbmd0aERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHIsIGN0cmwpIHtcclxuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XHJcblxyXG4gICAgICB2YXIgbWlubGVuZ3RoID0gMDtcclxuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWlubGVuZ3RoJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBtaW5sZW5ndGggPSBpbnQodmFsdWUpIHx8IDA7XHJcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMubWlubGVuZ3RoID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkobW9kZWxWYWx1ZSkgfHwgdmlld1ZhbHVlLmxlbmd0aCA+PSBtaW5sZW5ndGg7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0xpc3RcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRleHQgaW5wdXQgdGhhdCBjb252ZXJ0cyBiZXR3ZWVuIGEgZGVsaW1pdGVkIHN0cmluZyBhbmQgYW4gYXJyYXkgb2Ygc3RyaW5ncy4gVGhlIGRlZmF1bHRcclxuICogZGVsaW1pdGVyIGlzIGEgY29tbWEgZm9sbG93ZWQgYnkgYSBzcGFjZSAtIGVxdWl2YWxlbnQgdG8gYG5nLWxpc3Q9XCIsIFwiYC4gWW91IGNhbiBzcGVjaWZ5IGEgY3VzdG9tXHJcbiAqIGRlbGltaXRlciBhcyB0aGUgdmFsdWUgb2YgdGhlIGBuZ0xpc3RgIGF0dHJpYnV0ZSAtIGZvciBleGFtcGxlLCBgbmctbGlzdD1cIiB8IFwiYC5cclxuICpcclxuICogVGhlIGJlaGF2aW91ciBvZiB0aGUgZGlyZWN0aXZlIGlzIGFmZmVjdGVkIGJ5IHRoZSB1c2Ugb2YgdGhlIGBuZ1RyaW1gIGF0dHJpYnV0ZS5cclxuICogKiBJZiBgbmdUcmltYCBpcyBzZXQgdG8gYFwiZmFsc2VcImAgdGhlbiB3aGl0ZXNwYWNlIGFyb3VuZCBib3RoIHRoZSBzZXBhcmF0b3IgYW5kIGVhY2hcclxuICogICBsaXN0IGl0ZW0gaXMgcmVzcGVjdGVkLiBUaGlzIGltcGxpZXMgdGhhdCB0aGUgdXNlciBvZiB0aGUgZGlyZWN0aXZlIGlzIHJlc3BvbnNpYmxlIGZvclxyXG4gKiAgIGRlYWxpbmcgd2l0aCB3aGl0ZXNwYWNlIGJ1dCBhbHNvIGFsbG93cyB5b3UgdG8gdXNlIHdoaXRlc3BhY2UgYXMgYSBkZWxpbWl0ZXIsIHN1Y2ggYXMgYVxyXG4gKiAgIHRhYiBvciBuZXdsaW5lIGNoYXJhY3Rlci5cclxuICogKiBPdGhlcndpc2Ugd2hpdGVzcGFjZSBhcm91bmQgdGhlIGRlbGltaXRlciBpcyBpZ25vcmVkIHdoZW4gc3BsaXR0aW5nIChhbHRob3VnaCBpdCBpcyByZXNwZWN0ZWRcclxuICogICB3aGVuIGpvaW5pbmcgdGhlIGxpc3QgaXRlbXMgYmFjayB0b2dldGhlcikgYW5kIHdoaXRlc3BhY2UgYXJvdW5kIGVhY2ggbGlzdCBpdGVtIGlzIHN0cmlwcGVkXHJcbiAqICAgYmVmb3JlIGl0IGlzIGFkZGVkIHRvIHRoZSBtb2RlbC5cclxuICpcclxuICogIyMjIEV4YW1wbGUgd2l0aCBWYWxpZGF0aW9uXHJcbiAqXHJcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0xpc3QtZGlyZWN0aXZlXCIgbW9kdWxlPVwibGlzdEV4YW1wbGVcIj5cclxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XHJcbiAqICAgICAgYW5ndWxhci5tb2R1bGUoJ2xpc3RFeGFtcGxlJywgW10pXHJcbiAqICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gKiAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ21vcnBoZXVzJywgJ25lbycsICd0cmluaXR5J107XHJcbiAqICAgICAgICB9XSk7XHJcbiAqICAgPC9maWxlPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICogICAgICBMaXN0OiA8aW5wdXQgbmFtZT1cIm5hbWVzSW5wdXRcIiBuZy1tb2RlbD1cIm5hbWVzXCIgbmctbGlzdCByZXF1aXJlZD5cclxuICogICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5uYW1lc0lucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gKiAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxyXG4gKiAgICAgIDxicj5cclxuICogICAgICA8dHQ+bmFtZXMgPSB7e25hbWVzfX08L3R0Pjxici8+XHJcbiAqICAgICAgPHR0Pm15Rm9ybS5uYW1lc0lucHV0LiR2YWxpZCA9IHt7bXlGb3JtLm5hbWVzSW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAqICAgICAgPHR0Pm15Rm9ybS5uYW1lc0lucHV0LiRlcnJvciA9IHt7bXlGb3JtLm5hbWVzSW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAqICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICogICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAqICAgICA8L2Zvcm0+XHJcbiAqICAgPC9maWxlPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICogICAgIHZhciBsaXN0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCduYW1lcycpKTtcclxuICogICAgIHZhciBuYW1lcyA9IGVsZW1lbnQoYnkuZXhhY3RCaW5kaW5nKCduYW1lcycpKTtcclxuICogICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLm5hbWVzSW5wdXQuJHZhbGlkJykpO1xyXG4gKiAgICAgdmFyIGVycm9yID0gZWxlbWVudChieS5jc3MoJ3NwYW4uZXJyb3InKSk7XHJcbiAqXHJcbiAqICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICogICAgICAgZXhwZWN0KG5hbWVzLmdldFRleHQoKSkudG9Db250YWluKCdbXCJtb3JwaGV1c1wiLFwibmVvXCIsXCJ0cmluaXR5XCJdJyk7XHJcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gKiAgICAgICBleHBlY3QoZXJyb3IuZ2V0Q3NzVmFsdWUoJ2Rpc3BsYXknKSkudG9CZSgnbm9uZScpO1xyXG4gKiAgICAgfSk7XHJcbiAqXHJcbiAqICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcclxuICogICAgICAgbGlzdElucHV0LmNsZWFyKCk7XHJcbiAqICAgICAgIGxpc3RJbnB1dC5zZW5kS2V5cygnJyk7XHJcbiAqXHJcbiAqICAgICAgIGV4cGVjdChuYW1lcy5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XHJcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICogICAgICAgZXhwZWN0KGVycm9yLmdldENzc1ZhbHVlKCdkaXNwbGF5JykpLm5vdC50b0JlKCdub25lJyk7XHJcbiAqICAgICB9KTtcclxuICogICA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICogIyMjIEV4YW1wbGUgLSBzcGxpdHRpbmcgb24gd2hpdGVzcGFjZVxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdMaXN0LWRpcmVjdGl2ZS1uZXdsaW5lc1wiPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cImxpc3RcIiBuZy1saXN0PVwiJiMxMDtcIiBuZy10cmltPVwiZmFsc2VcIj48L3RleHRhcmVhPlxyXG4gKiAgICA8cHJlPnt7IGxpc3QgfCBqc29uIH19PC9wcmU+XHJcbiAqICAgPC9maWxlPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICogICAgIGl0KFwic2hvdWxkIHNwbGl0IHRoZSB0ZXh0IGJ5IG5ld2xpbmVzXCIsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICB2YXIgbGlzdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbGlzdCcpKTtcclxuICogICAgICAgdmFyIG91dHB1dCA9IGVsZW1lbnQoYnkuYmluZGluZygnbGlzdCB8IGpzb24nKSk7XHJcbiAqICAgICAgIGxpc3RJbnB1dC5zZW5kS2V5cygnYWJjXFxuZGVmXFxuZ2hpJyk7XHJcbiAqICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1tcXG4gIFwiYWJjXCIsXFxuICBcImRlZlwiLFxcbiAgXCJnaGlcIlxcbl0nKTtcclxuICogICAgIH0pO1xyXG4gKiAgIDwvZmlsZT5cclxuICogPC9leGFtcGxlPlxyXG4gKlxyXG4gKiBAZWxlbWVudCBpbnB1dFxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nTGlzdCBvcHRpb25hbCBkZWxpbWl0ZXIgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBzcGxpdCB0aGUgdmFsdWUuXHJcbiAqL1xyXG52YXIgbmdMaXN0RGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBwcmlvcml0eTogMTAwLFxyXG4gICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcclxuICAgICAgLy8gV2Ugd2FudCB0byBjb250cm9sIHdoaXRlc3BhY2UgdHJpbW1pbmcgc28gd2UgdXNlIHRoaXMgY29udm9sdXRlZCBhcHByb2FjaFxyXG4gICAgICAvLyB0byBhY2Nlc3MgdGhlIG5nTGlzdCBhdHRyaWJ1dGUsIHdoaWNoIGRvZXNuJ3QgcHJlLXRyaW0gdGhlIGF0dHJpYnV0ZVxyXG4gICAgICB2YXIgbmdMaXN0ID0gZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIubmdMaXN0KSB8fCAnLCAnO1xyXG4gICAgICB2YXIgdHJpbVZhbHVlcyA9IGF0dHIubmdUcmltICE9PSAnZmFsc2UnO1xyXG4gICAgICB2YXIgc2VwYXJhdG9yID0gdHJpbVZhbHVlcyA/IHRyaW0obmdMaXN0KSA6IG5nTGlzdDtcclxuXHJcbiAgICAgIHZhciBwYXJzZSA9IGZ1bmN0aW9uKHZpZXdWYWx1ZSkge1xyXG4gICAgICAgIC8vIElmIHRoZSB2aWV3VmFsdWUgaXMgaW52YWxpZCAoc2F5IHJlcXVpcmVkIGJ1dCBlbXB0eSkgaXQgd2lsbCBiZSBgdW5kZWZpbmVkYFxyXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh2aWV3VmFsdWUpKSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBsaXN0ID0gW107XHJcblxyXG4gICAgICAgIGlmICh2aWV3VmFsdWUpIHtcclxuICAgICAgICAgIGZvckVhY2godmlld1ZhbHVlLnNwbGl0KHNlcGFyYXRvciksIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbGlzdC5wdXNoKHRyaW1WYWx1ZXMgPyB0cmltKHZhbHVlKSA6IHZhbHVlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjdHJsLiRwYXJzZXJzLnB1c2gocGFyc2UpO1xyXG4gICAgICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgIHJldHVybiB2YWx1ZS5qb2luKG5nTGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIE92ZXJyaWRlIHRoZSBzdGFuZGFyZCAkaXNFbXB0eSBiZWNhdXNlIGFuIGVtcHR5IGFycmF5IG1lYW5zIHRoZSBpbnB1dCBpcyBlbXB0eS5cclxuICAgICAgY3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCAhdmFsdWUubGVuZ3RoO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxudmFyIENPTlNUQU5UX1ZBTFVFX1JFR0VYUCA9IC9eKHRydWV8ZmFsc2V8XFxkKykkLztcclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdWYWx1ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQmluZHMgdGhlIGdpdmVuIGV4cHJlc3Npb24gdG8gdGhlIHZhbHVlIG9mIGBpbnB1dFtzZWxlY3RdYCBvciBgaW5wdXRbcmFkaW9dYCwgc29cclxuICogdGhhdCB3aGVuIHRoZSBlbGVtZW50IGlzIHNlbGVjdGVkLCB0aGUgYG5nTW9kZWxgIG9mIHRoYXQgZWxlbWVudCBpcyBzZXQgdG8gdGhlXHJcbiAqIGJvdW5kIHZhbHVlLlxyXG4gKlxyXG4gKiBgbmdWYWx1ZWAgaXMgdXNlZnVsIHdoZW4gZHluYW1pY2FsbHkgZ2VuZXJhdGluZyBsaXN0cyBvZiByYWRpbyBidXR0b25zIHVzaW5nIGBuZy1yZXBlYXRgLCBhc1xyXG4gKiBzaG93biBiZWxvdy5cclxuICpcclxuICogQGVsZW1lbnQgaW5wdXRcclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1ZhbHVlIGFuZ3VsYXIgZXhwcmVzc2lvbiwgd2hvc2UgdmFsdWUgd2lsbCBiZSBib3VuZCB0byB0aGUgYHZhbHVlYCBhdHRyaWJ1dGVcclxuICogICBvZiB0aGUgYGlucHV0YCBlbGVtZW50XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmdWYWx1ZS1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ2YWx1ZUV4YW1wbGVcIj5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndmFsdWVFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydwaXp6YScsICd1bmljb3JucycsICdyb2JvdHMnXTtcclxuICAgICAgICAgICAgICAkc2NvcGUubXkgPSB7IGZhdm9yaXRlOiAndW5pY29ybnMnIH07XHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgIDxmb3JtIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgPGgyPldoaWNoIGlzIHlvdXIgZmF2b3JpdGU/PC9oMj5cclxuICAgICAgICAgICAgPGxhYmVsIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIiBmb3I9XCJ7e25hbWV9fVwiPlxyXG4gICAgICAgICAgICAgIHt7bmFtZX19XHJcbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiXHJcbiAgICAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwibXkuZmF2b3JpdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICBuZy12YWx1ZT1cIm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICBpZD1cInt7bmFtZX19XCJcclxuICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImZhdm9yaXRlXCI+XHJcbiAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICA8ZGl2PllvdSBjaG9zZSB7e215LmZhdm9yaXRlfX08L2Rpdj5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIHZhciBmYXZvcml0ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnbXkuZmF2b3JpdGUnKSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KGZhdm9yaXRlLmdldFRleHQoKSkudG9Db250YWluKCd1bmljb3JucycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGl0KCdzaG91bGQgYmluZCB0aGUgdmFsdWVzIHRvIHRoZSBpbnB1dHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5Lm1vZGVsKCdteS5mYXZvcml0ZScpKS5nZXQoMCkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChmYXZvcml0ZS5nZXRUZXh0KCkpLnRvQ29udGFpbigncGl6emEnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nVmFsdWVEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIHByaW9yaXR5OiAxMDAsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbih0cGwsIHRwbEF0dHIpIHtcclxuICAgICAgaWYgKENPTlNUQU5UX1ZBTFVFX1JFR0VYUC50ZXN0KHRwbEF0dHIubmdWYWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUNvbnN0YW50TGluayhzY29wZSwgZWxtLCBhdHRyKSB7XHJcbiAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgc2NvcGUuJGV2YWwoYXR0ci5uZ1ZhbHVlKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUxpbmsoc2NvcGUsIGVsbSwgYXR0cikge1xyXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdWYWx1ZSwgZnVuY3Rpb24gdmFsdWVXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgdmFsdWUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ01vZGVsT3B0aW9uc1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQWxsb3dzIHR1bmluZyBob3cgbW9kZWwgdXBkYXRlcyBhcmUgZG9uZS4gVXNpbmcgYG5nTW9kZWxPcHRpb25zYCB5b3UgY2FuIHNwZWNpZnkgYSBjdXN0b20gbGlzdCBvZlxyXG4gKiBldmVudHMgdGhhdCB3aWxsIHRyaWdnZXIgYSBtb2RlbCB1cGRhdGUgYW5kL29yIGEgZGVib3VuY2luZyBkZWxheSBzbyB0aGF0IHRoZSBhY3R1YWwgdXBkYXRlIG9ubHlcclxuICogdGFrZXMgcGxhY2Ugd2hlbiBhIHRpbWVyIGV4cGlyZXM7IHRoaXMgdGltZXIgd2lsbCBiZSByZXNldCBhZnRlciBhbm90aGVyIGNoYW5nZSB0YWtlcyBwbGFjZS5cclxuICpcclxuICogR2l2ZW4gdGhlIG5hdHVyZSBvZiBgbmdNb2RlbE9wdGlvbnNgLCB0aGUgdmFsdWUgZGlzcGxheWVkIGluc2lkZSBpbnB1dCBmaWVsZHMgaW4gdGhlIHZpZXcgbWlnaHRcclxuICogYmUgZGlmZmVyZW50IHRoYW4gdGhlIHZhbHVlIGluIHRoZSBhY3R1YWwgbW9kZWwuIFRoaXMgbWVhbnMgdGhhdCBpZiB5b3UgdXBkYXRlIHRoZSBtb2RlbCB5b3VcclxuICogc2hvdWxkIGFsc28gaW52b2tlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIGAkcm9sbGJhY2tWaWV3VmFsdWVgfSBvbiB0aGUgcmVsZXZhbnQgaW5wdXQgZmllbGQgaW5cclxuICogb3JkZXIgdG8gbWFrZSBzdXJlIGl0IGlzIHN5bmNocm9uaXplZCB3aXRoIHRoZSBtb2RlbCBhbmQgdGhhdCBhbnkgZGVib3VuY2VkIGFjdGlvbiBpcyBjYW5jZWxlZC5cclxuICpcclxuICogVGhlIGVhc2llc3Qgd2F5IHRvIHJlZmVyZW5jZSB0aGUgY29udHJvbCdzIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIGAkcm9sbGJhY2tWaWV3VmFsdWVgfVxyXG4gKiBtZXRob2QgaXMgYnkgbWFraW5nIHN1cmUgdGhlIGlucHV0IGlzIHBsYWNlZCBpbnNpZGUgYSBmb3JtIHRoYXQgaGFzIGEgYG5hbWVgIGF0dHJpYnV0ZS4gVGhpcyBpc1xyXG4gKiBpbXBvcnRhbnQgYmVjYXVzZSBgZm9ybWAgY29udHJvbGxlcnMgYXJlIHB1Ymxpc2hlZCB0byB0aGUgcmVsYXRlZCBzY29wZSB1bmRlciB0aGUgbmFtZSBpbiB0aGVpclxyXG4gKiBgbmFtZWAgYXR0cmlidXRlLlxyXG4gKlxyXG4gKiBBbnkgcGVuZGluZyBjaGFuZ2VzIHdpbGwgdGFrZSBwbGFjZSBpbW1lZGlhdGVseSB3aGVuIGFuIGVuY2xvc2luZyBmb3JtIGlzIHN1Ym1pdHRlZCB2aWEgdGhlXHJcbiAqIGBzdWJtaXRgIGV2ZW50LiBOb3RlIHRoYXQgYG5nQ2xpY2tgIGV2ZW50cyB3aWxsIG9jY3VyIGJlZm9yZSB0aGUgbW9kZWwgaXMgdXBkYXRlZC4gVXNlIGBuZ1N1Ym1pdGBcclxuICogdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHVwZGF0ZWQgbW9kZWwuXHJcbiAqXHJcbiAqIGBuZ01vZGVsT3B0aW9uc2AgaGFzIGFuIGVmZmVjdCBvbiB0aGUgZWxlbWVudCBpdCdzIGRlY2xhcmVkIG9uIGFuZCBpdHMgZGVzY2VuZGFudHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBuZ01vZGVsT3B0aW9ucyBvcHRpb25zIHRvIGFwcGx5IHRvIHRoZSBjdXJyZW50IG1vZGVsLiBWYWxpZCBrZXlzIGFyZTpcclxuICogICAtIGB1cGRhdGVPbmA6IHN0cmluZyBzcGVjaWZ5aW5nIHdoaWNoIGV2ZW50IHNob3VsZCBiZSB0aGUgaW5wdXQgYm91bmQgdG8uIFlvdSBjYW4gc2V0IHNldmVyYWxcclxuICogICAgIGV2ZW50cyB1c2luZyBhbiBzcGFjZSBkZWxpbWl0ZWQgbGlzdC4gVGhlcmUgaXMgYSBzcGVjaWFsIGV2ZW50IGNhbGxlZCBgZGVmYXVsdGAgdGhhdFxyXG4gKiAgICAgbWF0Y2hlcyB0aGUgZGVmYXVsdCBldmVudHMgYmVsb25naW5nIG9mIHRoZSBjb250cm9sLlxyXG4gKiAgIC0gYGRlYm91bmNlYDogaW50ZWdlciB2YWx1ZSB3aGljaCBjb250YWlucyB0aGUgZGVib3VuY2UgbW9kZWwgdXBkYXRlIHZhbHVlIGluIG1pbGxpc2Vjb25kcy4gQVxyXG4gKiAgICAgdmFsdWUgb2YgMCB0cmlnZ2VycyBhbiBpbW1lZGlhdGUgdXBkYXRlLiBJZiBhbiBvYmplY3QgaXMgc3VwcGxpZWQgaW5zdGVhZCwgeW91IGNhbiBzcGVjaWZ5IGFcclxuICogICAgIGN1c3RvbSB2YWx1ZSBmb3IgZWFjaCBldmVudC4gRm9yIGV4YW1wbGU6XHJcbiAqICAgICBgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdkZWZhdWx0IGJsdXInLCBkZWJvdW5jZTogeydkZWZhdWx0JzogNTAwLCAnYmx1cic6IDB9IH1cImBcclxuICogICAtIGBhbGxvd0ludmFsaWRgOiBib29sZWFuIHZhbHVlIHdoaWNoIGluZGljYXRlcyB0aGF0IHRoZSBtb2RlbCBjYW4gYmUgc2V0IHdpdGggdmFsdWVzIHRoYXQgZGlkXHJcbiAqICAgICBub3QgdmFsaWRhdGUgY29ycmVjdGx5IGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2Ygc2V0dGluZyB0aGUgbW9kZWwgdG8gdW5kZWZpbmVkLlxyXG4gKiAgIC0gYGdldHRlclNldHRlcmA6IGJvb2xlYW4gdmFsdWUgd2hpY2ggZGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0byB0cmVhdCBmdW5jdGlvbnMgYm91bmQgdG9cclxuICAgICAgIGBuZ01vZGVsYCBhcyBnZXR0ZXJzL3NldHRlcnMuXHJcbiAqICAgLSBgdGltZXpvbmVgOiBEZWZpbmVzIHRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgZm9yXHJcbiAqICAgICBgPGlucHV0IHR5cGU9XCJkYXRlXCI+YCwgYDxpbnB1dCB0eXBlPVwidGltZVwiPmAsIC4uLiAuIFJpZ2h0IG5vdywgdGhlIG9ubHkgc3VwcG9ydGVkIHZhbHVlIGlzIGAnVVRDJ2AsXHJcbiAqICAgICBvdGhlcndpc2UgdGhlIGRlZmF1bHQgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIgd2lsbCBiZSB1c2VkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG5cclxuICBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIG92ZXJyaWRlIGltbWVkaWF0ZSB1cGRhdGVzLiBDaGFuZ2VzIG9uIHRoZSBpbnB1dHMgd2l0aGluIHRoZVxyXG4gIGZvcm0gd2lsbCB1cGRhdGUgdGhlIG1vZGVsIG9ubHkgd2hlbiB0aGUgY29udHJvbCBsb3NlcyBmb2N1cyAoYmx1ciBldmVudCkuIElmIGBlc2NhcGVgIGtleSBpc1xyXG4gIHByZXNzZWQgd2hpbGUgdGhlIGlucHV0IGZpZWxkIGlzIGZvY3VzZWQsIHRoZSB2YWx1ZSBpcyByZXNldCB0byB0aGUgdmFsdWUgaW4gdGhlIGN1cnJlbnQgbW9kZWwuXHJcblxyXG4gIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtYmx1clwiIG1vZHVsZT1cIm9wdGlvbnNFeGFtcGxlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxyXG4gICAgICAgICAgTmFtZTpcclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnYmx1cicgfVwiXHJcbiAgICAgICAgICAgICAgICAgbmcta2V5dXA9XCJjYW5jZWwoJGV2ZW50KVwiIC8+PGJyIC8+XHJcblxyXG4gICAgICAgICAgT3RoZXIgZGF0YTpcclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidXNlci5kYXRhXCIgLz48YnIgLz5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lXCI+PC9zcGFuPjwvcHJlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ29wdGlvbnNFeGFtcGxlJywgW10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICRzY29wZS51c2VyID0geyBuYW1lOiAnc2F5JywgZGF0YTogJycgfTtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNykge1xyXG4gICAgICAgICAgICAgICRzY29wZS51c2VyRm9ybS51c2VyTmFtZS4kcm9sbGJhY2tWaWV3VmFsdWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygndXNlci5uYW1lJykpO1xyXG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLm5hbWUnKSk7XHJcbiAgICAgIHZhciBvdGhlciA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIuZGF0YScpKTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYWxsb3cgY3VzdG9tIGV2ZW50cycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlucHV0LnNlbmRLZXlzKCcgaGVsbG8nKTtcclxuICAgICAgICBpbnB1dC5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3NheScpO1xyXG4gICAgICAgIG90aGVyLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5IGhlbGxvJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCAkcm9sbGJhY2tWaWV3VmFsdWUgd2hlbiBtb2RlbCBjaGFuZ2VzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaW5wdXQuc2VuZEtleXMoJyBoZWxsbycpO1xyXG4gICAgICAgIGV4cGVjdChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJ3NheSBoZWxsbycpO1xyXG4gICAgICAgIGlucHV0LnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkVTQ0FQRSk7XHJcbiAgICAgICAgZXhwZWN0KGlucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnc2F5Jyk7XHJcbiAgICAgICAgb3RoZXIuY2xpY2soKTtcclxuICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0VxdWFsKCdzYXknKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG5cclxuICBUaGlzIG9uZSBzaG93cyBob3cgdG8gZGVib3VuY2UgbW9kZWwgY2hhbmdlcy4gTW9kZWwgd2lsbCBiZSB1cGRhdGVkIG9ubHkgMSBzZWMgYWZ0ZXIgbGFzdCBjaGFuZ2UuXHJcbiAgSWYgdGhlIGBDbGVhcmAgYnV0dG9uIGlzIHByZXNzZWQsIGFueSBkZWJvdW5jZWQgYWN0aW9uIGlzIGNhbmNlbGVkIGFuZCB0aGUgdmFsdWUgYmVjb21lcyBlbXB0eS5cclxuXHJcbiAgPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWxPcHRpb25zLWRpcmVjdGl2ZS1kZWJvdW5jZVwiIG1vZHVsZT1cIm9wdGlvbnNFeGFtcGxlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxyXG4gICAgICAgICAgTmFtZTpcclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGRlYm91bmNlOiAxMDAwIH1cIiAvPlxyXG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInVzZXJGb3JtLnVzZXJOYW1lLiRyb2xsYmFja1ZpZXdWYWx1ZSgpOyB1c2VyLm5hbWU9JydcIj5DbGVhcjwvYnV0dG9uPjxiciAvPlxyXG4gICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWVcIj48L3NwYW4+PC9wcmU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnb3B0aW9uc0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnVzZXIgPSB7IG5hbWU6ICdzYXknIH07XHJcbiAgICAgICAgfV0pO1xyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuXHJcbiAgVGhpcyBvbmUgc2hvd3MgaG93IHRvIGJpbmQgdG8gZ2V0dGVyL3NldHRlcnM6XHJcblxyXG4gIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZ2V0dGVyLXNldHRlclwiIG1vZHVsZT1cImdldHRlclNldHRlckV4YW1wbGVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XHJcbiAgICAgICAgICBOYW1lOlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCJcclxuICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cIiAvPlxyXG4gICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWUoKVwiPjwvc3Bhbj48L3ByZT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdnZXR0ZXJTZXR0ZXJFeGFtcGxlJywgW10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgIHZhciBfbmFtZSA9ICdCcmlhbic7XHJcbiAgICAgICAgICAkc2NvcGUudXNlciA9IHtcclxuICAgICAgICAgICAgbmFtZTogZnVuY3Rpb24gKG5ld05hbWUpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5pc0RlZmluZWQobmV3TmFtZSkgPyAoX25hbWUgPSBuZXdOYW1lKSA6IF9uYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuICAgIDwvZmlsZT5cclxuICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRhdHRycycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdGhpcy4kb3B0aW9ucyA9ICRzY29wZS4kZXZhbCgkYXR0cnMubmdNb2RlbE9wdGlvbnMpO1xyXG4gICAgICAvLyBBbGxvdyBhZGRpbmcvb3ZlcnJpZGluZyBib3VuZCBldmVudHNcclxuICAgICAgaWYgKHRoaXMuJG9wdGlvbnMudXBkYXRlT24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gZXh0cmFjdCBcImRlZmF1bHRcIiBwc2V1ZG8tZXZlbnQgZnJvbSBsaXN0IG9mIGV2ZW50cyB0aGF0IGNhbiB0cmlnZ2VyIGEgbW9kZWwgdXBkYXRlXHJcbiAgICAgICAgdGhpcy4kb3B0aW9ucy51cGRhdGVPbiA9IHRyaW0odGhpcy4kb3B0aW9ucy51cGRhdGVPbi5yZXBsYWNlKERFRkFVTFRfUkVHRVhQLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHRoYXQuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgIHJldHVybiAnICc7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfV1cclxuICB9O1xyXG59O1xyXG5cclxuLy8gaGVscGVyIG1ldGhvZHNcclxuZnVuY3Rpb24gYWRkU2V0VmFsaWRpdHlNZXRob2QoY29udGV4dCkge1xyXG4gIHZhciBjdHJsID0gY29udGV4dC5jdHJsLFxyXG4gICAgICAkZWxlbWVudCA9IGNvbnRleHQuJGVsZW1lbnQsXHJcbiAgICAgIGNsYXNzQ2FjaGUgPSB7fSxcclxuICAgICAgc2V0ID0gY29udGV4dC5zZXQsXHJcbiAgICAgIHVuc2V0ID0gY29udGV4dC51bnNldCxcclxuICAgICAgcGFyZW50Rm9ybSA9IGNvbnRleHQucGFyZW50Rm9ybSxcclxuICAgICAgJGFuaW1hdGUgPSBjb250ZXh0LiRhbmltYXRlO1xyXG5cclxuICBjdHJsLiRzZXRWYWxpZGl0eSA9IHNldFZhbGlkaXR5O1xyXG4gIHRvZ2dsZVZhbGlkYXRpb25Dc3MoJycsIHRydWUpO1xyXG5cclxuICBmdW5jdGlvbiBzZXRWYWxpZGl0eSh2YWxpZGF0aW9uRXJyb3JLZXksIHN0YXRlLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoc3RhdGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBjcmVhdGVBbmRTZXQoJyRwZW5kaW5nJywgdmFsaWRhdGlvbkVycm9yS2V5LCBvcHRpb25zKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHVuc2V0QW5kQ2xlYW51cCgnJHBlbmRpbmcnLCB2YWxpZGF0aW9uRXJyb3JLZXksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc0Jvb2xlYW4oc3RhdGUpKSB7XHJcbiAgICAgIHVuc2V0KGN0cmwuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIG9wdGlvbnMpO1xyXG4gICAgICB1bnNldChjdHJsLiQkc3VjY2VzcywgdmFsaWRhdGlvbkVycm9yS2V5LCBvcHRpb25zKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgIHVuc2V0KGN0cmwuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIG9wdGlvbnMpO1xyXG4gICAgICAgIHNldChjdHJsLiQkc3VjY2VzcywgdmFsaWRhdGlvbkVycm9yS2V5LCBvcHRpb25zKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXQoY3RybC4kZXJyb3IsIHZhbGlkYXRpb25FcnJvcktleSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdW5zZXQoY3RybC4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgb3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjdHJsLiRwZW5kaW5nKSB7XHJcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKFBFTkRJTkdfQ0xBU1MsIHRydWUpO1xyXG4gICAgICBjdHJsLiR2YWxpZCA9IGN0cmwuJGludmFsaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRvZ2dsZVZhbGlkYXRpb25Dc3MoJycsIG51bGwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FjaGVkVG9nZ2xlQ2xhc3MoUEVORElOR19DTEFTUywgZmFsc2UpO1xyXG4gICAgICBjdHJsLiR2YWxpZCA9IGlzT2JqZWN0RW1wdHkoY3RybC4kZXJyb3IpO1xyXG4gICAgICBjdHJsLiRpbnZhbGlkID0gIWN0cmwuJHZhbGlkO1xyXG4gICAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKCcnLCBjdHJsLiR2YWxpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmUtcmVhZCB0aGUgc3RhdGUgYXMgdGhlIHNldC91bnNldCBtZXRob2RzIGNvdWxkIGhhdmVcclxuICAgIC8vIGNvbWJpbmVkIHN0YXRlIGluIGN0cmwuJGVycm9yW3ZhbGlkYXRpb25FcnJvcl0gKHVzZWQgZm9yIGZvcm1zKSxcclxuICAgIC8vIHdoZXJlIHNldHRpbmcvdW5zZXR0aW5nIG9ubHkgaW5jcmVtZW50cy9kZWNyZW1lbnRzIHRoZSB2YWx1ZSxcclxuICAgIC8vIGFuZCBkb2VzIG5vdCByZXBsYWNlIGl0LlxyXG4gICAgdmFyIGNvbWJpbmVkU3RhdGU7XHJcbiAgICBpZiAoY3RybC4kcGVuZGluZyAmJiBjdHJsLiRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcclxuICAgICAgY29tYmluZWRTdGF0ZSA9IHVuZGVmaW5lZDtcclxuICAgIH0gZWxzZSBpZiAoY3RybC4kZXJyb3JbdmFsaWRhdGlvbkVycm9yS2V5XSkge1xyXG4gICAgICBjb21iaW5lZFN0YXRlID0gZmFsc2U7XHJcbiAgICB9IGVsc2UgaWYgKGN0cmwuJCRzdWNjZXNzW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcclxuICAgICAgY29tYmluZWRTdGF0ZSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb21iaW5lZFN0YXRlID0gbnVsbDtcclxuICAgIH1cclxuICAgIHRvZ2dsZVZhbGlkYXRpb25Dc3ModmFsaWRhdGlvbkVycm9yS2V5LCBjb21iaW5lZFN0YXRlKTtcclxuICAgIHBhcmVudEZvcm0uJHNldFZhbGlkaXR5KHZhbGlkYXRpb25FcnJvcktleSwgY29tYmluZWRTdGF0ZSwgY3RybCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVBbmRTZXQobmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcclxuICAgIGlmICghY3RybFtuYW1lXSkge1xyXG4gICAgICBjdHJsW25hbWVdID0ge307XHJcbiAgICB9XHJcbiAgICBzZXQoY3RybFtuYW1lXSwgdmFsdWUsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdW5zZXRBbmRDbGVhbnVwKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoY3RybFtuYW1lXSkge1xyXG4gICAgICB1bnNldChjdHJsW25hbWVdLCB2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNPYmplY3RFbXB0eShjdHJsW25hbWVdKSkge1xyXG4gICAgICBjdHJsW25hbWVdID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FjaGVkVG9nZ2xlQ2xhc3MoY2xhc3NOYW1lLCBzd2l0Y2hWYWx1ZSkge1xyXG4gICAgaWYgKHN3aXRjaFZhbHVlICYmICFjbGFzc0NhY2hlW2NsYXNzTmFtZV0pIHtcclxuICAgICAgJGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgIGNsYXNzQ2FjaGVbY2xhc3NOYW1lXSA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCFzd2l0Y2hWYWx1ZSAmJiBjbGFzc0NhY2hlW2NsYXNzTmFtZV0pIHtcclxuICAgICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3MoJGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgIGNsYXNzQ2FjaGVbY2xhc3NOYW1lXSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdG9nZ2xlVmFsaWRhdGlvbkNzcyh2YWxpZGF0aW9uRXJyb3JLZXksIGlzVmFsaWQpIHtcclxuICAgIHZhbGlkYXRpb25FcnJvcktleSA9IHZhbGlkYXRpb25FcnJvcktleSA/ICctJyArIHNuYWtlX2Nhc2UodmFsaWRhdGlvbkVycm9yS2V5LCAnLScpIDogJyc7XHJcblxyXG4gICAgY2FjaGVkVG9nZ2xlQ2xhc3MoVkFMSURfQ0xBU1MgKyB2YWxpZGF0aW9uRXJyb3JLZXksIGlzVmFsaWQgPT09IHRydWUpO1xyXG4gICAgY2FjaGVkVG9nZ2xlQ2xhc3MoSU5WQUxJRF9DTEFTUyArIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCA9PT0gZmFsc2UpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaXNPYmplY3RFbXB0eShvYmopIHtcclxuICBpZiAob2JqKSB7XHJcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0JpbmRcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQmluZGAgYXR0cmlidXRlIHRlbGxzIEFuZ3VsYXIgdG8gcmVwbGFjZSB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBzcGVjaWZpZWQgSFRNTCBlbGVtZW50XHJcbiAqIHdpdGggdGhlIHZhbHVlIG9mIGEgZ2l2ZW4gZXhwcmVzc2lvbiwgYW5kIHRvIHVwZGF0ZSB0aGUgdGV4dCBjb250ZW50IHdoZW4gdGhlIHZhbHVlIG9mIHRoYXRcclxuICogZXhwcmVzc2lvbiBjaGFuZ2VzLlxyXG4gKlxyXG4gKiBUeXBpY2FsbHksIHlvdSBkb24ndCB1c2UgYG5nQmluZGAgZGlyZWN0bHksIGJ1dCBpbnN0ZWFkIHlvdSB1c2UgdGhlIGRvdWJsZSBjdXJseSBtYXJrdXAgbGlrZVxyXG4gKiBge3sgZXhwcmVzc2lvbiB9fWAgd2hpY2ggaXMgc2ltaWxhciBidXQgbGVzcyB2ZXJib3NlLlxyXG4gKlxyXG4gKiBJdCBpcyBwcmVmZXJhYmxlIHRvIHVzZSBgbmdCaW5kYCBpbnN0ZWFkIG9mIGB7eyBleHByZXNzaW9uIH19YCBpZiBhIHRlbXBsYXRlIGlzIG1vbWVudGFyaWx5XHJcbiAqIGRpc3BsYXllZCBieSB0aGUgYnJvd3NlciBpbiBpdHMgcmF3IHN0YXRlIGJlZm9yZSBBbmd1bGFyIGNvbXBpbGVzIGl0LiBTaW5jZSBgbmdCaW5kYCBpcyBhblxyXG4gKiBlbGVtZW50IGF0dHJpYnV0ZSwgaXQgbWFrZXMgdGhlIGJpbmRpbmdzIGludmlzaWJsZSB0byB0aGUgdXNlciB3aGlsZSB0aGUgcGFnZSBpcyBsb2FkaW5nLlxyXG4gKlxyXG4gKiBBbiBhbHRlcm5hdGl2ZSBzb2x1dGlvbiB0byB0aGlzIHByb2JsZW0gd291bGQgYmUgdXNpbmcgdGhlXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbG9hayBuZ0Nsb2FrfSBkaXJlY3RpdmUuXHJcbiAqXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQmluZCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogRW50ZXIgYSBuYW1lIGluIHRoZSBMaXZlIFByZXZpZXcgdGV4dCBib3g7IHRoZSBncmVldGluZyBiZWxvdyB0aGUgdGV4dCBib3ggY2hhbmdlcyBpbnN0YW50bHkuXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUubmFtZSA9ICdXaGlybGVkJztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIEVudGVyIG5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjxicj5cclxuICAgICAgICAgSGVsbG8gPHNwYW4gbmctYmluZD1cIm5hbWVcIj48L3NwYW4+IVxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgbmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZScpKTtcclxuXHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ25hbWUnKSkuZ2V0VGV4dCgpKS50b0JlKCdXaGlybGVkJyk7XHJcbiAgICAgICAgIG5hbWVJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBuYW1lSW5wdXQuc2VuZEtleXMoJ3dvcmxkJyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ25hbWUnKSkuZ2V0VGV4dCgpKS50b0JlKCd3b3JsZCcpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdCaW5kRGlyZWN0aXZlID0gWyckY29tcGlsZScsIGZ1bmN0aW9uKCRjb21waWxlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQUMnLFxyXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kQ29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpIHtcclxuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVFbGVtZW50KTtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKGVsZW1lbnQsIGF0dHIubmdCaW5kKTtcclxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0JpbmQsIGZ1bmN0aW9uIG5nQmluZFdhdGNoQWN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAvLyBXZSBhcmUgcHVycG9zZWZ1bGx5IHVzaW5nID09IGhlcmUgcmF0aGVyIHRoYW4gPT09IGJlY2F1c2Ugd2Ugd2FudCB0b1xyXG4gICAgICAgICAgLy8gY2F0Y2ggd2hlbiB2YWx1ZSBpcyBcIm51bGwgb3IgdW5kZWZpbmVkXCJcclxuICAgICAgICAgIC8vIGpzaGludCAtVzA0MVxyXG4gICAgICAgICAgZWxlbWVudC50ZXh0KHZhbHVlID09IHVuZGVmaW5lZCA/ICcnIDogdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQmluZFRlbXBsYXRlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQmluZFRlbXBsYXRlYCBkaXJlY3RpdmUgc3BlY2lmaWVzIHRoYXQgdGhlIGVsZW1lbnRcclxuICogdGV4dCBjb250ZW50IHNob3VsZCBiZSByZXBsYWNlZCB3aXRoIHRoZSBpbnRlcnBvbGF0aW9uIG9mIHRoZSB0ZW1wbGF0ZVxyXG4gKiBpbiB0aGUgYG5nQmluZFRlbXBsYXRlYCBhdHRyaWJ1dGUuXHJcbiAqIFVubGlrZSBgbmdCaW5kYCwgdGhlIGBuZ0JpbmRUZW1wbGF0ZWAgY2FuIGNvbnRhaW4gbXVsdGlwbGUgYHt7YCBgfX1gXHJcbiAqIGV4cHJlc3Npb25zLiBUaGlzIGRpcmVjdGl2ZSBpcyBuZWVkZWQgc2luY2Ugc29tZSBIVE1MIGVsZW1lbnRzXHJcbiAqIChzdWNoIGFzIFRJVExFIGFuZCBPUFRJT04pIGNhbm5vdCBjb250YWluIFNQQU4gZWxlbWVudHMuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdCaW5kVGVtcGxhdGUgdGVtcGxhdGUgb2YgZm9ybVxyXG4gKiAgIDx0dD57ezwvdHQ+IDx0dD5leHByZXNzaW9uPC90dD4gPHR0Pn19PC90dD4gdG8gZXZhbC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogVHJ5IGl0IGhlcmU6IGVudGVyIHRleHQgaW4gdGV4dCBib3ggYW5kIHdhdGNoIHRoZSBncmVldGluZyBjaGFuZ2UuXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24gKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgJHNjb3BlLnNhbHV0YXRpb24gPSAnSGVsbG8nO1xyXG4gICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSAnV29ybGQnO1xyXG4gICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICBTYWx1dGF0aW9uOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNhbHV0YXRpb25cIj48YnI+XHJcbiAgICAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJuYW1lXCI+PGJyPlxyXG4gICAgICAgIDxwcmUgbmctYmluZC10ZW1wbGF0ZT1cInt7c2FsdXRhdGlvbn19IHt7bmFtZX19IVwiPjwvcHJlPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgc2FsdXRhdGlvbkVsZW0gPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3NhbHV0YXRpb24nKSk7XHJcbiAgICAgICAgIHZhciBzYWx1dGF0aW9uSW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzYWx1dGF0aW9uJykpO1xyXG4gICAgICAgICB2YXIgbmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZScpKTtcclxuXHJcbiAgICAgICAgIGV4cGVjdChzYWx1dGF0aW9uRWxlbS5nZXRUZXh0KCkpLnRvQmUoJ0hlbGxvIFdvcmxkIScpO1xyXG5cclxuICAgICAgICAgc2FsdXRhdGlvbklucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgIHNhbHV0YXRpb25JbnB1dC5zZW5kS2V5cygnR3JlZXRpbmdzJyk7XHJcbiAgICAgICAgIG5hbWVJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBuYW1lSW5wdXQuc2VuZEtleXMoJ3VzZXInKTtcclxuXHJcbiAgICAgICAgIGV4cGVjdChzYWx1dGF0aW9uRWxlbS5nZXRUZXh0KCkpLnRvQmUoJ0dyZWV0aW5ncyB1c2VyIScpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUgPSBbJyRpbnRlcnBvbGF0ZScsICckY29tcGlsZScsIGZ1bmN0aW9uKCRpbnRlcnBvbGF0ZSwgJGNvbXBpbGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kVGVtcGxhdGVDb21waWxlKHRlbXBsYXRlRWxlbWVudCkge1xyXG4gICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0ZW1wbGF0ZUVsZW1lbnQpO1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdCaW5kVGVtcGxhdGVMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUoZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtcclxuICAgICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKGVsZW1lbnQsIGludGVycG9sYXRlRm4uZXhwcmVzc2lvbnMpO1xyXG4gICAgICAgIGF0dHIuJG9ic2VydmUoJ25nQmluZFRlbXBsYXRlJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIGVsZW1lbnQudGV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdCaW5kSHRtbFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ3JlYXRlcyBhIGJpbmRpbmcgdGhhdCB3aWxsIGlubmVySFRNTCB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgdGhlIGBleHByZXNzaW9uYCBpbnRvIHRoZSBjdXJyZW50XHJcbiAqIGVsZW1lbnQgaW4gYSBzZWN1cmUgd2F5LiAgQnkgZGVmYXVsdCwgdGhlIGlubmVySFRNTC1lZCBjb250ZW50IHdpbGwgYmUgc2FuaXRpemVkIHVzaW5nIHRoZSB7QGxpbmtcclxuICogbmdTYW5pdGl6ZS4kc2FuaXRpemUgJHNhbml0aXplfSBzZXJ2aWNlLiAgVG8gdXRpbGl6ZSB0aGlzIGZ1bmN0aW9uYWxpdHksIGVuc3VyZSB0aGF0IGAkc2FuaXRpemVgXHJcbiAqIGlzIGF2YWlsYWJsZSwgZm9yIGV4YW1wbGUsIGJ5IGluY2x1ZGluZyB7QGxpbmsgbmdTYW5pdGl6ZX0gaW4geW91ciBtb2R1bGUncyBkZXBlbmRlbmNpZXMgKG5vdCBpblxyXG4gKiBjb3JlIEFuZ3VsYXIuKSAgWW91IG1heSBhbHNvIGJ5cGFzcyBzYW5pdGl6YXRpb24gZm9yIHZhbHVlcyB5b3Uga25vdyBhcmUgc2FmZS4gVG8gZG8gc28sIGJpbmQgdG9cclxuICogYW4gZXhwbGljaXRseSB0cnVzdGVkIHZhbHVlIHZpYSB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzSHRtbCAkc2NlLnRydXN0QXNIdG1sfS4gIFNlZSB0aGUgZXhhbXBsZVxyXG4gKiB1bmRlciB7QGxpbmsgbmcuJHNjZSNFeGFtcGxlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cclxuICpcclxuICogTm90ZTogSWYgYSBgJHNhbml0aXplYCBzZXJ2aWNlIGlzIHVuYXZhaWxhYmxlIGFuZCB0aGUgYm91bmQgdmFsdWUgaXNuJ3QgZXhwbGljaXRseSB0cnVzdGVkLCB5b3VcclxuICogd2lsbCBoYXZlIGFuIGV4Y2VwdGlvbiAoaW5zdGVhZCBvZiBhbiBleHBsb2l0LilcclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCaW5kSHRtbCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRIdG1sRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgPHAgbmctYmluZC1odG1sPVwibXlIVE1MXCI+PC9wPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG5cclxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnYmluZEh0bWxFeGFtcGxlJywgWyduZ1Nhbml0aXplJ10pXHJcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgJHNjb3BlLm15SFRNTCA9XHJcbiAgICAgICAgICAgICAgJ0kgYW0gYW4gPGNvZGU+SFRNTDwvY29kZT5zdHJpbmcgd2l0aCAnICtcclxuICAgICAgICAgICAgICAnPGEgaHJlZj1cIiNcIj5saW5rcyE8L2E+IGFuZCBvdGhlciA8ZW0+c3R1ZmY8L2VtPic7XHJcbiAgICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcblxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZC1odG1sJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ215SFRNTCcpKS5nZXRUZXh0KCkpLnRvQmUoXHJcbiAgICAgICAgICAgICAnSSBhbSBhbiBIVE1Mc3RyaW5nIHdpdGggbGlua3MhIGFuZCBvdGhlciBzdHVmZicpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdCaW5kSHRtbERpcmVjdGl2ZSA9IFsnJHNjZScsICckcGFyc2UnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkc2NlLCAkcGFyc2UsICRjb21waWxlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ0JpbmRIdG1sQ29tcGlsZSh0RWxlbWVudCwgdEF0dHJzKSB7XHJcbiAgICAgIHZhciBuZ0JpbmRIdG1sR2V0dGVyID0gJHBhcnNlKHRBdHRycy5uZ0JpbmRIdG1sKTtcclxuICAgICAgdmFyIG5nQmluZEh0bWxXYXRjaCA9ICRwYXJzZSh0QXR0cnMubmdCaW5kSHRtbCwgZnVuY3Rpb24gZ2V0U3RyaW5nVmFsdWUodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKHZhbHVlIHx8ICcnKS50b1N0cmluZygpO1xyXG4gICAgICB9KTtcclxuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModEVsZW1lbnQpO1xyXG5cclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZEh0bWxMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBhdHRyLm5nQmluZEh0bWwpO1xyXG5cclxuICAgICAgICBzY29wZS4kd2F0Y2gobmdCaW5kSHRtbFdhdGNoLCBmdW5jdGlvbiBuZ0JpbmRIdG1sV2F0Y2hBY3Rpb24oKSB7XHJcbiAgICAgICAgICAvLyB3ZSByZS1ldmFsdWF0ZSB0aGUgZXhwciBiZWNhdXNlIHdlIHdhbnQgYSBUcnVzdGVkVmFsdWVIb2xkZXJUeXBlXHJcbiAgICAgICAgICAvLyBmb3IgJHNjZSwgbm90IGEgc3RyaW5nXHJcbiAgICAgICAgICBlbGVtZW50Lmh0bWwoJHNjZS5nZXRUcnVzdGVkSHRtbChuZ0JpbmRIdG1sR2V0dGVyKHNjb3BlKSkgfHwgJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxuZnVuY3Rpb24gY2xhc3NEaXJlY3RpdmUobmFtZSwgc2VsZWN0b3IpIHtcclxuICBuYW1lID0gJ25nQ2xhc3MnICsgbmFtZTtcclxuICByZXR1cm4gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0FDJyxcclxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICB2YXIgb2xkVmFsO1xyXG5cclxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0cltuYW1lXSwgbmdDbGFzc1dhdGNoQWN0aW9uLCB0cnVlKTtcclxuXHJcbiAgICAgICAgYXR0ci4kb2JzZXJ2ZSgnY2xhc3MnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgbmdDbGFzc1dhdGNoQWN0aW9uKHNjb3BlLiRldmFsKGF0dHJbbmFtZV0pKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIGlmIChuYW1lICE9PSAnbmdDbGFzcycpIHtcclxuICAgICAgICAgIHNjb3BlLiR3YXRjaCgnJGluZGV4JywgZnVuY3Rpb24oJGluZGV4LCBvbGQkaW5kZXgpIHtcclxuICAgICAgICAgICAgLy8ganNoaW50IGJpdHdpc2U6IGZhbHNlXHJcbiAgICAgICAgICAgIHZhciBtb2QgPSAkaW5kZXggJiAxO1xyXG4gICAgICAgICAgICBpZiAobW9kICE9PSAob2xkJGluZGV4ICYgMSkpIHtcclxuICAgICAgICAgICAgICB2YXIgY2xhc3NlcyA9IGFycmF5Q2xhc3NlcyhzY29wZS4kZXZhbChhdHRyW25hbWVdKSk7XHJcbiAgICAgICAgICAgICAgbW9kID09PSBzZWxlY3RvciA/XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzc2VzKGNsYXNzZXMpIDpcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzZXMoY2xhc3Nlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkQ2xhc3NlcyhjbGFzc2VzKSB7XHJcbiAgICAgICAgICB2YXIgbmV3Q2xhc3NlcyA9IGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzZXMsIDEpO1xyXG4gICAgICAgICAgYXR0ci4kYWRkQ2xhc3MobmV3Q2xhc3Nlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVDbGFzc2VzKGNsYXNzZXMpIHtcclxuICAgICAgICAgIHZhciBuZXdDbGFzc2VzID0gZGlnZXN0Q2xhc3NDb3VudHMoY2xhc3NlcywgLTEpO1xyXG4gICAgICAgICAgYXR0ci4kcmVtb3ZlQ2xhc3MobmV3Q2xhc3Nlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkaWdlc3RDbGFzc0NvdW50cyAoY2xhc3NlcywgY291bnQpIHtcclxuICAgICAgICAgIHZhciBjbGFzc0NvdW50cyA9IGVsZW1lbnQuZGF0YSgnJGNsYXNzQ291bnRzJykgfHwge307XHJcbiAgICAgICAgICB2YXIgY2xhc3Nlc1RvVXBkYXRlID0gW107XHJcbiAgICAgICAgICBmb3JFYWNoKGNsYXNzZXMsIGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgaWYgKGNvdW50ID4gMCB8fCBjbGFzc0NvdW50c1tjbGFzc05hbWVdKSB7XHJcbiAgICAgICAgICAgICAgY2xhc3NDb3VudHNbY2xhc3NOYW1lXSA9IChjbGFzc0NvdW50c1tjbGFzc05hbWVdIHx8IDApICsgY291bnQ7XHJcbiAgICAgICAgICAgICAgaWYgKGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gPT09ICsoY291bnQgPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgY2xhc3Nlc1RvVXBkYXRlLnB1c2goY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZWxlbWVudC5kYXRhKCckY2xhc3NDb3VudHMnLCBjbGFzc0NvdW50cyk7XHJcbiAgICAgICAgICByZXR1cm4gY2xhc3Nlc1RvVXBkYXRlLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMgKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpIHtcclxuICAgICAgICAgIHZhciB0b0FkZCA9IGFycmF5RGlmZmVyZW5jZShuZXdDbGFzc2VzLCBvbGRDbGFzc2VzKTtcclxuICAgICAgICAgIHZhciB0b1JlbW92ZSA9IGFycmF5RGlmZmVyZW5jZShvbGRDbGFzc2VzLCBuZXdDbGFzc2VzKTtcclxuICAgICAgICAgIHRvQWRkID0gZGlnZXN0Q2xhc3NDb3VudHModG9BZGQsIDEpO1xyXG4gICAgICAgICAgdG9SZW1vdmUgPSBkaWdlc3RDbGFzc0NvdW50cyh0b1JlbW92ZSwgLTEpO1xyXG4gICAgICAgICAgaWYgKHRvQWRkICYmIHRvQWRkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LCB0b0FkZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodG9SZW1vdmUgJiYgdG9SZW1vdmUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIHRvUmVtb3ZlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG5nQ2xhc3NXYXRjaEFjdGlvbihuZXdWYWwpIHtcclxuICAgICAgICAgIGlmIChzZWxlY3RvciA9PT0gdHJ1ZSB8fCBzY29wZS4kaW5kZXggJSAyID09PSBzZWxlY3Rvcikge1xyXG4gICAgICAgICAgICB2YXIgbmV3Q2xhc3NlcyA9IGFycmF5Q2xhc3NlcyhuZXdWYWwgfHwgW10pO1xyXG4gICAgICAgICAgICBpZiAoIW9sZFZhbCkge1xyXG4gICAgICAgICAgICAgIGFkZENsYXNzZXMobmV3Q2xhc3Nlcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWVxdWFscyhuZXdWYWwsb2xkVmFsKSkge1xyXG4gICAgICAgICAgICAgIHZhciBvbGRDbGFzc2VzID0gYXJyYXlDbGFzc2VzKG9sZFZhbCk7XHJcbiAgICAgICAgICAgICAgdXBkYXRlQ2xhc3NlcyhvbGRDbGFzc2VzLCBuZXdDbGFzc2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgb2xkVmFsID0gc2hhbGxvd0NvcHkobmV3VmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gYXJyYXlEaWZmZXJlbmNlKHRva2VuczEsIHRva2VuczIpIHtcclxuICAgICAgdmFyIHZhbHVlcyA9IFtdO1xyXG5cclxuICAgICAgb3V0ZXI6XHJcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0b2tlbnMxLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zMVtpXTtcclxuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgdG9rZW5zMi5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgaWYodG9rZW4gPT0gdG9rZW5zMltqXSkgY29udGludWUgb3V0ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbHVlcy5wdXNoKHRva2VuKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdmFsdWVzO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFycmF5Q2xhc3NlcyAoY2xhc3NWYWwpIHtcclxuICAgICAgaWYgKGlzQXJyYXkoY2xhc3NWYWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYXNzVmFsO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzU3RyaW5nKGNsYXNzVmFsKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFzc1ZhbC5zcGxpdCgnICcpO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGNsYXNzVmFsKSkge1xyXG4gICAgICAgIHZhciBjbGFzc2VzID0gW10sIGkgPSAwO1xyXG4gICAgICAgIGZvckVhY2goY2xhc3NWYWwsIGZ1bmN0aW9uKHYsIGspIHtcclxuICAgICAgICAgIGlmICh2KSB7XHJcbiAgICAgICAgICAgIGNsYXNzZXMgPSBjbGFzc2VzLmNvbmNhdChrLnNwbGl0KCcgJykpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjbGFzc2VzO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjbGFzc1ZhbDtcclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDbGFzc1xyXG4gKiBAcmVzdHJpY3QgQUNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdDbGFzc2AgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gZHluYW1pY2FsbHkgc2V0IENTUyBjbGFzc2VzIG9uIGFuIEhUTUwgZWxlbWVudCBieSBkYXRhYmluZGluZ1xyXG4gKiBhbiBleHByZXNzaW9uIHRoYXQgcmVwcmVzZW50cyBhbGwgY2xhc3NlcyB0byBiZSBhZGRlZC5cclxuICpcclxuICogVGhlIGRpcmVjdGl2ZSBvcGVyYXRlcyBpbiB0aHJlZSBkaWZmZXJlbnQgd2F5cywgZGVwZW5kaW5nIG9uIHdoaWNoIG9mIHRocmVlIHR5cGVzIHRoZSBleHByZXNzaW9uXHJcbiAqIGV2YWx1YXRlcyB0bzpcclxuICpcclxuICogMS4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGUgc3RyaW5nIHNob3VsZCBiZSBvbmUgb3IgbW9yZSBzcGFjZS1kZWxpbWl0ZWQgY2xhc3NcclxuICogbmFtZXMuXHJcbiAqXHJcbiAqIDIuIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhbiBhcnJheSwgZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBzaG91bGQgYmUgYSBzdHJpbmcgdGhhdCBpc1xyXG4gKiBvbmUgb3IgbW9yZSBzcGFjZS1kZWxpbWl0ZWQgY2xhc3MgbmFtZXMuXHJcbiAqXHJcbiAqIDMuIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhbiBvYmplY3QsIHRoZW4gZm9yIGVhY2gga2V5LXZhbHVlIHBhaXIgb2YgdGhlXHJcbiAqIG9iamVjdCB3aXRoIGEgdHJ1dGh5IHZhbHVlIHRoZSBjb3JyZXNwb25kaW5nIGtleSBpcyB1c2VkIGFzIGEgY2xhc3MgbmFtZS5cclxuICpcclxuICogVGhlIGRpcmVjdGl2ZSB3b24ndCBhZGQgZHVwbGljYXRlIGNsYXNzZXMgaWYgYSBwYXJ0aWN1bGFyIGNsYXNzIHdhcyBhbHJlYWR5IHNldC5cclxuICpcclxuICogV2hlbiB0aGUgZXhwcmVzc2lvbiBjaGFuZ2VzLCB0aGUgcHJldmlvdXNseSBhZGRlZCBjbGFzc2VzIGFyZSByZW1vdmVkIGFuZCBvbmx5IHRoZW4gdGhlXHJcbiAqIG5ldyBjbGFzc2VzIGFyZSBhZGRlZC5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogYWRkIC0gaGFwcGVucyBqdXN0IGJlZm9yZSB0aGUgY2xhc3MgaXMgYXBwbGllZCB0byB0aGUgZWxlbWVudFxyXG4gKiByZW1vdmUgLSBoYXBwZW5zIGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLiBUaGUgcmVzdWx0XHJcbiAqICAgb2YgdGhlIGV2YWx1YXRpb24gY2FuIGJlIGEgc3RyaW5nIHJlcHJlc2VudGluZyBzcGFjZSBkZWxpbWl0ZWQgY2xhc3NcclxuICogICBuYW1lcywgYW4gYXJyYXksIG9yIGEgbWFwIG9mIGNsYXNzIG5hbWVzIHRvIGJvb2xlYW4gdmFsdWVzLiBJbiB0aGUgY2FzZSBvZiBhIG1hcCwgdGhlXHJcbiAqICAgbmFtZXMgb2YgdGhlIHByb3BlcnRpZXMgd2hvc2UgdmFsdWVzIGFyZSB0cnV0aHkgd2lsbCBiZSBhZGRlZCBhcyBjc3MgY2xhc3NlcyB0byB0aGVcclxuICogICBlbGVtZW50LlxyXG4gKlxyXG4gKiBAZXhhbXBsZSBFeGFtcGxlIHRoYXQgZGVtb25zdHJhdGVzIGJhc2ljIGJpbmRpbmdzIHZpYSBuZ0NsYXNzIGRpcmVjdGl2ZS5cclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxwIG5nLWNsYXNzPVwie3N0cmlrZTogZGVsZXRlZCwgYm9sZDogaW1wb3J0YW50LCByZWQ6IGVycm9yfVwiPk1hcCBTeW50YXggRXhhbXBsZTwvcD5cclxuICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImRlbGV0ZWRcIj4gZGVsZXRlZCAoYXBwbHkgXCJzdHJpa2VcIiBjbGFzcyk8YnI+XHJcbiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJpbXBvcnRhbnRcIj4gaW1wb3J0YW50IChhcHBseSBcImJvbGRcIiBjbGFzcyk8YnI+XHJcbiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJlcnJvclwiPiBlcnJvciAoYXBwbHkgXCJyZWRcIiBjbGFzcylcclxuICAgICAgIDxocj5cclxuICAgICAgIDxwIG5nLWNsYXNzPVwic3R5bGVcIj5Vc2luZyBTdHJpbmcgU3ludGF4PC9wPlxyXG4gICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzdHlsZVwiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCBzdHJpa2UgcmVkXCI+XHJcbiAgICAgICA8aHI+XHJcbiAgICAgICA8cCBuZy1jbGFzcz1cIltzdHlsZTEsIHN0eWxlMiwgc3R5bGUzXVwiPlVzaW5nIEFycmF5IFN5bnRheDwvcD5cclxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlMVwiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cclxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlMlwiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cclxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlM1wiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICAgICAgLnN0cmlrZSB7XHJcbiAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xyXG4gICAgICAgfVxyXG4gICAgICAgLmJvbGQge1xyXG4gICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgfVxyXG4gICAgICAgLnJlZCB7XHJcbiAgICAgICAgICAgY29sb3I6IHJlZDtcclxuICAgICAgIH1cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgdmFyIHBzID0gZWxlbWVudC5hbGwoYnkuY3NzKCdwJykpO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgbGV0IHlvdSB0b2dnbGUgdGhlIGNsYXNzJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9ib2xkLyk7XHJcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkubm90LnRvTWF0Y2goL3JlZC8pO1xyXG5cclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnaW1wb3J0YW50JykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvYm9sZC8pO1xyXG5cclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnZXJyb3InKSkuY2xpY2soKTtcclxuICAgICAgICAgZXhwZWN0KHBzLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9yZWQvKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgbGV0IHlvdSB0b2dnbGUgc3RyaW5nIGV4YW1wbGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KHBzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJycpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZScpKS5jbGVhcigpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZScpKS5zZW5kS2V5cygncmVkJyk7XHJcbiAgICAgICAgIGV4cGVjdChwcy5nZXQoMSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b0JlKCdyZWQnKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdhcnJheSBleGFtcGxlIHNob3VsZCBoYXZlIDMgY2xhc3NlcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3N0eWxlMScpKS5zZW5kS2V5cygnYm9sZCcpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTInKSkuc2VuZEtleXMoJ3N0cmlrZScpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTMnKSkuc2VuZEtleXMoJ3JlZCcpO1xyXG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnYm9sZCBzdHJpa2UgcmVkJyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuXHJcbiAgICMjIEFuaW1hdGlvbnNcclxuXHJcbiAgIFRoZSBleGFtcGxlIGJlbG93IGRlbW9uc3RyYXRlcyBob3cgdG8gcGVyZm9ybSBhbmltYXRpb25zIHVzaW5nIG5nQ2xhc3MuXHJcblxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgaWQ9XCJzZXRidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXRcIiBuZy1jbGljaz1cIm15VmFyPSdteS1jbGFzcydcIj5cclxuICAgICAgPGlucHV0IGlkPVwiY2xlYXJidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJjbGVhclwiIG5nLWNsaWNrPVwibXlWYXI9JydcIj5cclxuICAgICAgPGJyPlxyXG4gICAgICA8c3BhbiBjbGFzcz1cImJhc2UtY2xhc3NcIiBuZy1jbGFzcz1cIm15VmFyXCI+U2FtcGxlIFRleHQ8L3NwYW4+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgIC5iYXNlLWNsYXNzIHtcclxuICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAuYmFzZS1jbGFzcy5teS1jbGFzcyB7XHJcbiAgICAgICAgIGNvbG9yOiByZWQ7XHJcbiAgICAgICAgIGZvbnQtc2l6ZTozZW07XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3MnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cclxuICAgICAgICAgICB0b01hdGNoKC9teS1jbGFzcy8pO1xyXG5cclxuICAgICAgICAgZWxlbWVudChieS5pZCgnc2V0YnRuJykpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJy5iYXNlLWNsYXNzJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXHJcbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcclxuXHJcbiAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2NsZWFyYnRuJykpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJy5iYXNlLWNsYXNzJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkubm90LlxyXG4gICAgICAgICAgIHRvTWF0Y2goL215LWNsYXNzLyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuXHJcblxyXG4gICAjIyBuZ0NsYXNzIGFuZCBwcmUtZXhpc3RpbmcgQ1NTMyBUcmFuc2l0aW9ucy9BbmltYXRpb25zXHJcbiAgIFRoZSBuZ0NsYXNzIGRpcmVjdGl2ZSBzdGlsbCBzdXBwb3J0cyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnMgZXZlbiBpZiB0aGV5IGRvIG5vdCBmb2xsb3cgdGhlIG5nQW5pbWF0ZSBDU1MgbmFtaW5nIHN0cnVjdHVyZS5cclxuICAgVXBvbiBhbmltYXRpb24gbmdBbmltYXRlIHdpbGwgYXBwbHkgc3VwcGxlbWVudGFyeSBDU1MgY2xhc3NlcyB0byB0cmFjayB0aGUgc3RhcnQgYW5kIGVuZCBvZiBhbiBhbmltYXRpb24sIGJ1dCB0aGlzIHdpbGwgbm90IGhpbmRlclxyXG4gICBhbnkgcHJlLWV4aXN0aW5nIENTUyB0cmFuc2l0aW9ucyBhbHJlYWR5IG9uIHRoZSBlbGVtZW50LiBUbyBnZXQgYW4gaWRlYSBvZiB3aGF0IGhhcHBlbnMgZHVyaW5nIGEgY2xhc3MtYmFzZWQgYW5pbWF0aW9uLCBiZSBzdXJlXHJcbiAgIHRvIHZpZXcgdGhlIHN0ZXAgYnkgc3RlcCBkZXRhaWxzIG9mIHtAbGluayBuZ0FuaW1hdGUuJGFuaW1hdGUjYWRkY2xhc3MgJGFuaW1hdGUuYWRkQ2xhc3N9IGFuZFxyXG4gICB7QGxpbmsgbmdBbmltYXRlLiRhbmltYXRlI3JlbW92ZWNsYXNzICRhbmltYXRlLnJlbW92ZUNsYXNzfS5cclxuICovXHJcbnZhciBuZ0NsYXNzRGlyZWN0aXZlID0gY2xhc3NEaXJlY3RpdmUoJycsIHRydWUpO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDbGFzc09kZFxyXG4gKiBAcmVzdHJpY3QgQUNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcclxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsYXNzIG5nQ2xhc3N9LCBleGNlcHQgdGhleSB3b3JrIGluXHJcbiAqIGNvbmp1bmN0aW9uIHdpdGggYG5nUmVwZWF0YCBhbmQgdGFrZSBlZmZlY3Qgb25seSBvbiBvZGQgKGV2ZW4pIHJvd3MuXHJcbiAqXHJcbiAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSBhcHBsaWVkIG9ubHkgd2l0aGluIHRoZSBzY29wZSBvZiBhblxyXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IG5nUmVwZWF0fS5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzc09kZCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLiBUaGUgcmVzdWx0XHJcbiAqICAgb2YgdGhlIGV2YWx1YXRpb24gY2FuIGJlIGEgc3RyaW5nIHJlcHJlc2VudGluZyBzcGFjZSBkZWxpbWl0ZWQgY2xhc3MgbmFtZXMgb3IgYW4gYXJyYXkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgPG9sIG5nLWluaXQ9XCJuYW1lcz1bJ0pvaG4nLCAnTWFyeScsICdDYXRlJywgJ1N1eiddXCI+XHJcbiAgICAgICAgICA8bGkgbmctcmVwZWF0PVwibmFtZSBpbiBuYW1lc1wiPlxyXG4gICAgICAgICAgIDxzcGFuIG5nLWNsYXNzLW9kZD1cIidvZGQnXCIgbmctY2xhc3MtZXZlbj1cIidldmVuJ1wiPlxyXG4gICAgICAgICAgICAge3tuYW1lfX1cclxuICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8L2xpPlxyXG4gICAgICAgIDwvb2w+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgIC5vZGQge1xyXG4gICAgICAgICBjb2xvcjogcmVkO1xyXG4gICAgICAgfVxyXG4gICAgICAgLmV2ZW4ge1xyXG4gICAgICAgICBjb2xvcjogYmx1ZTtcclxuICAgICAgIH1cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcy1vZGQgYW5kIG5nLWNsYXNzLWV2ZW4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMCkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXHJcbiAgICAgICAgICAgdG9NYXRjaCgvb2RkLyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDEpLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxyXG4gICAgICAgICAgIHRvTWF0Y2goL2V2ZW4vKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nQ2xhc3NPZGREaXJlY3RpdmUgPSBjbGFzc0RpcmVjdGl2ZSgnT2RkJywgMCk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0NsYXNzRXZlblxyXG4gKiBAcmVzdHJpY3QgQUNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcclxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsYXNzIG5nQ2xhc3N9LCBleGNlcHQgdGhleSB3b3JrIGluXHJcbiAqIGNvbmp1bmN0aW9uIHdpdGggYG5nUmVwZWF0YCBhbmQgdGFrZSBlZmZlY3Qgb25seSBvbiBvZGQgKGV2ZW4pIHJvd3MuXHJcbiAqXHJcbiAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSBhcHBsaWVkIG9ubHkgd2l0aGluIHRoZSBzY29wZSBvZiBhblxyXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IG5nUmVwZWF0fS5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzc0V2ZW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlXHJcbiAqICAgcmVzdWx0IG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzIG5hbWVzIG9yIGFuIGFycmF5LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxvbCBuZy1pbml0PVwibmFtZXM9WydKb2huJywgJ01hcnknLCAnQ2F0ZScsICdTdXonXVwiPlxyXG4gICAgICAgICAgPGxpIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIj5cclxuICAgICAgICAgICA8c3BhbiBuZy1jbGFzcy1vZGQ9XCInb2RkJ1wiIG5nLWNsYXNzLWV2ZW49XCInZXZlbidcIj5cclxuICAgICAgICAgICAgIHt7bmFtZX19ICZuYnNwOyAmbmJzcDsgJm5ic3A7XHJcbiAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L29sPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XHJcbiAgICAgICAub2RkIHtcclxuICAgICAgICAgY29sb3I6IHJlZDtcclxuICAgICAgIH1cclxuICAgICAgIC5ldmVuIHtcclxuICAgICAgICAgY29sb3I6IGJsdWU7XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3Mtb2RkIGFuZCBuZy1jbGFzcy1ldmVuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDApLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxyXG4gICAgICAgICAgIHRvTWF0Y2goL29kZC8pO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygxKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cclxuICAgICAgICAgICB0b01hdGNoKC9ldmVuLyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCdFdmVuJywgMSk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0Nsb2FrXHJcbiAqIEByZXN0cmljdCBBQ1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ0Nsb2FrYCBkaXJlY3RpdmUgaXMgdXNlZCB0byBwcmV2ZW50IHRoZSBBbmd1bGFyIGh0bWwgdGVtcGxhdGUgZnJvbSBiZWluZyBicmllZmx5XHJcbiAqIGRpc3BsYXllZCBieSB0aGUgYnJvd3NlciBpbiBpdHMgcmF3ICh1bmNvbXBpbGVkKSBmb3JtIHdoaWxlIHlvdXIgYXBwbGljYXRpb24gaXMgbG9hZGluZy4gVXNlIHRoaXNcclxuICogZGlyZWN0aXZlIHRvIGF2b2lkIHRoZSB1bmRlc2lyYWJsZSBmbGlja2VyIGVmZmVjdCBjYXVzZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGUgZGlzcGxheS5cclxuICpcclxuICogVGhlIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCB0byB0aGUgYDxib2R5PmAgZWxlbWVudCwgYnV0IHRoZSBwcmVmZXJyZWQgdXNhZ2UgaXMgdG8gYXBwbHlcclxuICogbXVsdGlwbGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZXMgdG8gc21hbGwgcG9ydGlvbnMgb2YgdGhlIHBhZ2UgdG8gcGVybWl0IHByb2dyZXNzaXZlIHJlbmRlcmluZ1xyXG4gKiBvZiB0aGUgYnJvd3NlciB2aWV3LlxyXG4gKlxyXG4gKiBgbmdDbG9ha2Agd29ya3MgaW4gY29vcGVyYXRpb24gd2l0aCB0aGUgZm9sbG93aW5nIGNzcyBydWxlIGVtYmVkZGVkIHdpdGhpbiBgYW5ndWxhci5qc2AgYW5kXHJcbiAqIGBhbmd1bGFyLm1pbi5qc2AuXHJcbiAqIEZvciBDU1AgbW9kZSBwbGVhc2UgYWRkIGBhbmd1bGFyLWNzcC5jc3NgIHRvIHlvdXIgaHRtbCBmaWxlIChzZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NzcCBuZ0NzcH0pLlxyXG4gKlxyXG4gKiBgYGBjc3NcclxuICogW25nXFw6Y2xvYWtdLCBbbmctY2xvYWtdLCBbZGF0YS1uZy1jbG9ha10sIFt4LW5nLWNsb2FrXSwgLm5nLWNsb2FrLCAueC1uZy1jbG9hayB7XHJcbiAqICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBXaGVuIHRoaXMgY3NzIHJ1bGUgaXMgbG9hZGVkIGJ5IHRoZSBicm93c2VyLCBhbGwgaHRtbCBlbGVtZW50cyAoaW5jbHVkaW5nIHRoZWlyIGNoaWxkcmVuKSB0aGF0XHJcbiAqIGFyZSB0YWdnZWQgd2l0aCB0aGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZSBhcmUgaGlkZGVuLiBXaGVuIEFuZ3VsYXIgZW5jb3VudGVycyB0aGlzIGRpcmVjdGl2ZVxyXG4gKiBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uIG9mIHRoZSB0ZW1wbGF0ZSBpdCBkZWxldGVzIHRoZSBgbmdDbG9ha2AgZWxlbWVudCBhdHRyaWJ1dGUsIG1ha2luZ1xyXG4gKiB0aGUgY29tcGlsZWQgZWxlbWVudCB2aXNpYmxlLlxyXG4gKlxyXG4gKiBGb3IgdGhlIGJlc3QgcmVzdWx0LCB0aGUgYGFuZ3VsYXIuanNgIHNjcmlwdCBtdXN0IGJlIGxvYWRlZCBpbiB0aGUgaGVhZCBzZWN0aW9uIG9mIHRoZSBodG1sXHJcbiAqIGRvY3VtZW50OyBhbHRlcm5hdGl2ZWx5LCB0aGUgY3NzIHJ1bGUgYWJvdmUgbXVzdCBiZSBpbmNsdWRlZCBpbiB0aGUgZXh0ZXJuYWwgc3R5bGVzaGVldCBvZiB0aGVcclxuICogYXBwbGljYXRpb24uXHJcbiAqXHJcbiAqIExlZ2FjeSBicm93c2VycywgbGlrZSBJRTcsIGRvIG5vdCBwcm92aWRlIGF0dHJpYnV0ZSBzZWxlY3RvciBzdXBwb3J0IChhZGRlZCBpbiBDU1MgMi4xKSBzbyB0aGV5XHJcbiAqIGNhbm5vdCBtYXRjaCB0aGUgYFtuZ1xcOmNsb2FrXWAgc2VsZWN0b3IuIFRvIHdvcmsgYXJvdW5kIHRoaXMgbGltaXRhdGlvbiwgeW91IG11c3QgYWRkIHRoZSBjc3NcclxuICogY2xhc3MgYG5nLWNsb2FrYCBpbiBhZGRpdGlvbiB0byB0aGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZSBhcyBzaG93biBpbiB0aGUgZXhhbXBsZSBiZWxvdy5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMVwiIG5nLWNsb2FrPnt7ICdoZWxsbycgfX08L2Rpdj5cclxuICAgICAgICA8ZGl2IGlkPVwidGVtcGxhdGUyXCIgbmctY2xvYWsgY2xhc3M9XCJuZy1jbG9ha1wiPnt7ICdoZWxsbyBJRTcnIH19PC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgcmVtb3ZlIHRoZSB0ZW1wbGF0ZSBkaXJlY3RpdmUgYW5kIGNzcyBjbGFzcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoJCgnI3RlbXBsYXRlMScpLmdldEF0dHJpYnV0ZSgnbmctY2xvYWsnKSkuXHJcbiAgICAgICAgICAgdG9CZU51bGwoKTtcclxuICAgICAgICAgZXhwZWN0KCQoJyN0ZW1wbGF0ZTInKS5nZXRBdHRyaWJ1dGUoJ25nLWNsb2FrJykpLlxyXG4gICAgICAgICAgIHRvQmVOdWxsKCk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICpcclxuICovXHJcbnZhciBuZ0Nsb2FrRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xyXG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcclxuICAgIGF0dHIuJHNldCgnbmdDbG9haycsIHVuZGVmaW5lZCk7XHJcbiAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCduZy1jbG9haycpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0NvbnRyb2xsZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdDb250cm9sbGVyYCBkaXJlY3RpdmUgYXR0YWNoZXMgYSBjb250cm9sbGVyIGNsYXNzIHRvIHRoZSB2aWV3LiBUaGlzIGlzIGEga2V5IGFzcGVjdCBvZiBob3cgYW5ndWxhclxyXG4gKiBzdXBwb3J0cyB0aGUgcHJpbmNpcGxlcyBiZWhpbmQgdGhlIE1vZGVsLVZpZXctQ29udHJvbGxlciBkZXNpZ24gcGF0dGVybi5cclxuICpcclxuICogTVZDIGNvbXBvbmVudHMgaW4gYW5ndWxhcjpcclxuICpcclxuICogKiBNb2RlbCDigJQgTW9kZWxzIGFyZSB0aGUgcHJvcGVydGllcyBvZiBhIHNjb3BlOyBzY29wZXMgYXJlIGF0dGFjaGVkIHRvIHRoZSBET00gd2hlcmUgc2NvcGUgcHJvcGVydGllc1xyXG4gKiAgIGFyZSBhY2Nlc3NlZCB0aHJvdWdoIGJpbmRpbmdzLlxyXG4gKiAqIFZpZXcg4oCUIFRoZSB0ZW1wbGF0ZSAoSFRNTCB3aXRoIGRhdGEgYmluZGluZ3MpIHRoYXQgaXMgcmVuZGVyZWQgaW50byB0aGUgVmlldy5cclxuICogKiBDb250cm9sbGVyIOKAlCBUaGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlIHNwZWNpZmllcyBhIENvbnRyb2xsZXIgY2xhc3M7IHRoZSBjbGFzcyBjb250YWlucyBidXNpbmVzc1xyXG4gKiAgIGxvZ2ljIGJlaGluZCB0aGUgYXBwbGljYXRpb24gdG8gZGVjb3JhdGUgdGhlIHNjb3BlIHdpdGggZnVuY3Rpb25zIGFuZCB2YWx1ZXNcclxuICpcclxuICogTm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBhdHRhY2ggY29udHJvbGxlcnMgdG8gdGhlIERPTSBieSBkZWNsYXJpbmcgaXQgaW4gYSByb3V0ZSBkZWZpbml0aW9uXHJcbiAqIHZpYSB0aGUge0BsaW5rIG5nUm91dGUuJHJvdXRlICRyb3V0ZX0gc2VydmljZS4gQSBjb21tb24gbWlzdGFrZSBpcyB0byBkZWNsYXJlIHRoZSBjb250cm9sbGVyXHJcbiAqIGFnYWluIHVzaW5nIGBuZy1jb250cm9sbGVyYCBpbiB0aGUgdGVtcGxhdGUgaXRzZWxmLiAgVGhpcyB3aWxsIGNhdXNlIHRoZSBjb250cm9sbGVyIHRvIGJlIGF0dGFjaGVkXHJcbiAqIGFuZCBleGVjdXRlZCB0d2ljZS5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBzY29wZVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ29udHJvbGxlciBOYW1lIG9mIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gcmVnaXN0ZXJlZCB3aXRoIHRoZSBjdXJyZW50XHJcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyICRjb250cm9sbGVyUHJvdmlkZXJ9IG9yIGFuIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259XHJcbiAqIHRoYXQgb24gdGhlIGN1cnJlbnQgc2NvcGUgZXZhbHVhdGVzIHRvIGEgY29uc3RydWN0b3IgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIFRoZSBjb250cm9sbGVyIGluc3RhbmNlIGNhbiBiZSBwdWJsaXNoZWQgaW50byBhIHNjb3BlIHByb3BlcnR5IGJ5IHNwZWNpZnlpbmdcclxuICogYG5nLWNvbnRyb2xsZXI9XCJhcyBwcm9wZXJ0eU5hbWVcImAuXHJcbiAqXHJcbiAqIElmIHRoZSBjdXJyZW50IGAkY29udHJvbGxlclByb3ZpZGVyYCBpcyBjb25maWd1cmVkIHRvIHVzZSBnbG9iYWxzICh2aWFcclxuICoge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIjYWxsb3dHbG9iYWxzIGAkY29udHJvbGxlclByb3ZpZGVyLmFsbG93R2xvYmFscygpYCB9KSwgdGhpcyBtYXlcclxuICogYWxzbyBiZSB0aGUgbmFtZSBvZiBhIGdsb2JhbGx5IGFjY2Vzc2libGUgY29uc3RydWN0b3IgZnVuY3Rpb24gKG5vdCByZWNvbW1lbmRlZCkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEhlcmUgaXMgYSBzaW1wbGUgZm9ybSBmb3IgZWRpdGluZyB1c2VyIGNvbnRhY3QgaW5mb3JtYXRpb24uIEFkZGluZywgcmVtb3ZpbmcsIGNsZWFyaW5nLCBhbmRcclxuICogZ3JlZXRpbmcgYXJlIG1ldGhvZHMgZGVjbGFyZWQgb24gdGhlIGNvbnRyb2xsZXIgKHNlZSBzb3VyY2UgdGFiKS4gVGhlc2UgbWV0aG9kcyBjYW5cclxuICogZWFzaWx5IGJlIGNhbGxlZCBmcm9tIHRoZSBhbmd1bGFyIG1hcmt1cC4gQW55IGNoYW5nZXMgdG8gdGhlIGRhdGEgYXJlIGF1dG9tYXRpY2FsbHkgcmVmbGVjdGVkXHJcbiAqIGluIHRoZSBWaWV3IHdpdGhvdXQgdGhlIG5lZWQgZm9yIGEgbWFudWFsIHVwZGF0ZS5cclxuICpcclxuICogVHdvIGRpZmZlcmVudCBkZWNsYXJhdGlvbiBzdHlsZXMgYXJlIGluY2x1ZGVkIGJlbG93OlxyXG4gKlxyXG4gKiAqIG9uZSBiaW5kcyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGRpcmVjdGx5IG9udG8gdGhlIGNvbnRyb2xsZXIgdXNpbmcgYHRoaXNgOlxyXG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjEgYXMgc2V0dGluZ3NcImBcclxuICogKiBvbmUgaW5qZWN0cyBgJHNjb3BlYCBpbnRvIHRoZSBjb250cm9sbGVyOlxyXG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcImBcclxuICpcclxuICogVGhlIHNlY29uZCBvcHRpb24gaXMgbW9yZSBjb21tb24gaW4gdGhlIEFuZ3VsYXIgY29tbXVuaXR5LCBhbmQgaXMgZ2VuZXJhbGx5IHVzZWQgaW4gYm9pbGVycGxhdGVzXHJcbiAqIGFuZCBpbiB0aGlzIGd1aWRlLiBIb3dldmVyLCB0aGVyZSBhcmUgYWR2YW50YWdlcyB0byBiaW5kaW5nIHByb3BlcnRpZXMgZGlyZWN0bHkgdG8gdGhlIGNvbnRyb2xsZXJcclxuICogYW5kIGF2b2lkaW5nIHNjb3BlLlxyXG4gKlxyXG4gKiAqIFVzaW5nIGBjb250cm9sbGVyIGFzYCBtYWtlcyBpdCBvYnZpb3VzIHdoaWNoIGNvbnRyb2xsZXIgeW91IGFyZSBhY2Nlc3NpbmcgaW4gdGhlIHRlbXBsYXRlIHdoZW5cclxuICogbXVsdGlwbGUgY29udHJvbGxlcnMgYXBwbHkgdG8gYW4gZWxlbWVudC5cclxuICogKiBJZiB5b3UgYXJlIHdyaXRpbmcgeW91ciBjb250cm9sbGVycyBhcyBjbGFzc2VzIHlvdSBoYXZlIGVhc2llciBhY2Nlc3MgdG8gdGhlIHByb3BlcnRpZXMgYW5kXHJcbiAqIG1ldGhvZHMsIHdoaWNoIHdpbGwgYXBwZWFyIG9uIHRoZSBzY29wZSwgZnJvbSBpbnNpZGUgdGhlIGNvbnRyb2xsZXIgY29kZS5cclxuICogKiBTaW5jZSB0aGVyZSBpcyBhbHdheXMgYSBgLmAgaW4gdGhlIGJpbmRpbmdzLCB5b3UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBwcm90b3R5cGFsXHJcbiAqIGluaGVyaXRhbmNlIG1hc2tpbmcgcHJpbWl0aXZlcy5cclxuICpcclxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgYGNvbnRyb2xsZXIgYXNgIHN5bnRheC5cclxuICpcclxuICogPGV4YW1wbGUgbmFtZT1cIm5nQ29udHJvbGxlckFzXCIgbW9kdWxlPVwiY29udHJvbGxlckFzRXhhbXBsZVwiPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgIDxkaXYgaWQ9XCJjdHJsLWFzLWV4bXBsXCIgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjEgYXMgc2V0dGluZ3NcIj5cclxuICogICAgICBOYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNldHRpbmdzLm5hbWVcIi8+XHJcbiAqICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJzZXR0aW5ncy5ncmVldCgpXCI+Z3JlZXQ8L2E+IF08YnIvPlxyXG4gKiAgICAgIENvbnRhY3Q6XHJcbiAqICAgICAgPHVsPlxyXG4gKiAgICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHNcIj5cclxuICogICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cImNvbnRhY3QudHlwZVwiPlxyXG4gKiAgICAgICAgICAgICA8b3B0aW9uPnBob25lPC9vcHRpb24+XHJcbiAqICAgICAgICAgICAgIDxvcHRpb24+ZW1haWw8L29wdGlvbj5cclxuICogICAgICAgICAgPC9zZWxlY3Q+XHJcbiAqICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29udGFjdC52YWx1ZVwiLz5cclxuICogICAgICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJzZXR0aW5ncy5jbGVhckNvbnRhY3QoY29udGFjdClcIj5jbGVhcjwvYT5cclxuICogICAgICAgICAgfCA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJzZXR0aW5ncy5yZW1vdmVDb250YWN0KGNvbnRhY3QpXCI+WDwvYT4gXVxyXG4gKiAgICAgICAgPC9saT5cclxuICogICAgICAgIDxsaT5bIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInNldHRpbmdzLmFkZENvbnRhY3QoKVwiPmFkZDwvYT4gXTwvbGk+XHJcbiAqICAgICA8L3VsPlxyXG4gKiAgICA8L2Rpdj5cclxuICogICA8L2ZpbGU+XHJcbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gKiAgICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbGxlckFzRXhhbXBsZScsIFtdKVxyXG4gKiAgICAgIC5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXIxJywgU2V0dGluZ3NDb250cm9sbGVyMSk7XHJcbiAqXHJcbiAqICAgIGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbGxlcjEoKSB7XHJcbiAqICAgICAgdGhpcy5uYW1lID0gXCJKb2huIFNtaXRoXCI7XHJcbiAqICAgICAgdGhpcy5jb250YWN0cyA9IFtcclxuICogICAgICAgIHt0eXBlOiAncGhvbmUnLCB2YWx1ZTogJzQwOCA1NTUgMTIxMid9LFxyXG4gKiAgICAgICAge3R5cGU6ICdlbWFpbCcsIHZhbHVlOiAnam9obi5zbWl0aEBleGFtcGxlLm9yZyd9IF07XHJcbiAqICAgIH1cclxuICpcclxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUuZ3JlZXQgPSBmdW5jdGlvbigpIHtcclxuICogICAgICBhbGVydCh0aGlzLm5hbWUpO1xyXG4gKiAgICB9O1xyXG4gKlxyXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5hZGRDb250YWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgdGhpcy5jb250YWN0cy5wdXNoKHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ3lvdXJuYW1lQGV4YW1wbGUub3JnJ30pO1xyXG4gKiAgICB9O1xyXG4gKlxyXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5yZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdFRvUmVtb3ZlKSB7XHJcbiAqICAgICB2YXIgaW5kZXggPSB0aGlzLmNvbnRhY3RzLmluZGV4T2YoY29udGFjdFRvUmVtb3ZlKTtcclxuICogICAgICB0aGlzLmNvbnRhY3RzLnNwbGljZShpbmRleCwgMSk7XHJcbiAqICAgIH07XHJcbiAqXHJcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmNsZWFyQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3QpIHtcclxuICogICAgICBjb250YWN0LnR5cGUgPSAncGhvbmUnO1xyXG4gKiAgICAgIGNvbnRhY3QudmFsdWUgPSAnJztcclxuICogICAgfTtcclxuICogICA8L2ZpbGU+XHJcbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBjaGVjayBjb250cm9sbGVyIGFzJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50KGJ5LmlkKCdjdHJsLWFzLWV4bXBsJykpO1xyXG4gKiAgICAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5tb2RlbCgnc2V0dGluZ3MubmFtZScpKVxyXG4gKiAgICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnSm9obiBTbWl0aCcpO1xyXG4gKlxyXG4gKiAgICAgICB2YXIgZmlyc3RSZXBlYXQgPVxyXG4gKiAgICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHMnKS5yb3coMCkpO1xyXG4gKiAgICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cclxuICogICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzJykucm93KDEpKTtcclxuICpcclxuICogICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJzQwOCA1NTUgMTIxMicpO1xyXG4gKlxyXG4gKiAgICAgICBleHBlY3Qoc2Vjb25kUmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJ2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnKTtcclxuICpcclxuICogICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5saW5rVGV4dCgnY2xlYXInKSkuY2xpY2soKTtcclxuICpcclxuICogICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJycpO1xyXG4gKlxyXG4gKiAgICAgICBjb250YWluZXIuZWxlbWVudChieS5saW5rVGV4dCgnYWRkJykpLmNsaWNrKCk7XHJcbiAqXHJcbiAqICAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygyKSlcclxuICogICAgICAgICAgIC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpXHJcbiAqICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJ3lvdXJuYW1lQGV4YW1wbGUub3JnJyk7XHJcbiAqICAgICB9KTtcclxuICogICA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgXCJhdHRhY2ggdG8gYCRzY29wZWBcIiBzdHlsZSBvZiBjb250cm9sbGVyLlxyXG4gKlxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDb250cm9sbGVyXCIgbW9kdWxlPVwiY29udHJvbGxlckV4YW1wbGVcIj5cclxuICogIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgPGRpdiBpZD1cImN0cmwtZXhtcGxcIiBuZy1jb250cm9sbGVyPVwiU2V0dGluZ3NDb250cm9sbGVyMlwiPlxyXG4gKiAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJuYW1lXCIvPlxyXG4gKiAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJncmVldCgpXCI+Z3JlZXQ8L2E+IF08YnIvPlxyXG4gKiAgICAgQ29udGFjdDpcclxuICogICAgIDx1bD5cclxuICogICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cclxuICogICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwiY29udGFjdC50eXBlXCI+XHJcbiAqICAgICAgICAgICAgPG9wdGlvbj5waG9uZTwvb3B0aW9uPlxyXG4gKiAgICAgICAgICAgIDxvcHRpb24+ZW1haWw8L29wdGlvbj5cclxuICogICAgICAgICA8L3NlbGVjdD5cclxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbnRhY3QudmFsdWVcIi8+XHJcbiAqICAgICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJjbGVhckNvbnRhY3QoY29udGFjdClcIj5jbGVhcjwvYT5cclxuICogICAgICAgICB8IDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInJlbW92ZUNvbnRhY3QoY29udGFjdClcIj5YPC9hPiBdXHJcbiAqICAgICAgIDwvbGk+XHJcbiAqICAgICAgIDxsaT5bIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImFkZENvbnRhY3QoKVwiPmFkZDwvYT4gXTwvbGk+XHJcbiAqICAgIDwvdWw+XHJcbiAqICAgPC9kaXY+XHJcbiAqICA8L2ZpbGU+XHJcbiAqICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XHJcbiAqICAgYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2xsZXJFeGFtcGxlJywgW10pXHJcbiAqICAgICAuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyMicsIFsnJHNjb3BlJywgU2V0dGluZ3NDb250cm9sbGVyMl0pO1xyXG4gKlxyXG4gKiAgIGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbGxlcjIoJHNjb3BlKSB7XHJcbiAqICAgICAkc2NvcGUubmFtZSA9IFwiSm9obiBTbWl0aFwiO1xyXG4gKiAgICAgJHNjb3BlLmNvbnRhY3RzID0gW1xyXG4gKiAgICAgICB7dHlwZToncGhvbmUnLCB2YWx1ZTonNDA4IDU1NSAxMjEyJ30sXHJcbiAqICAgICAgIHt0eXBlOidlbWFpbCcsIHZhbHVlOidqb2huLnNtaXRoQGV4YW1wbGUub3JnJ30gXTtcclxuICpcclxuICogICAgICRzY29wZS5ncmVldCA9IGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICBhbGVydCgkc2NvcGUubmFtZSk7XHJcbiAqICAgICB9O1xyXG4gKlxyXG4gKiAgICAgJHNjb3BlLmFkZENvbnRhY3QgPSBmdW5jdGlvbigpIHtcclxuICogICAgICAgJHNjb3BlLmNvbnRhY3RzLnB1c2goe3R5cGU6J2VtYWlsJywgdmFsdWU6J3lvdXJuYW1lQGV4YW1wbGUub3JnJ30pO1xyXG4gKiAgICAgfTtcclxuICpcclxuICogICAgICRzY29wZS5yZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdFRvUmVtb3ZlKSB7XHJcbiAqICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5jb250YWN0cy5pbmRleE9mKGNvbnRhY3RUb1JlbW92ZSk7XHJcbiAqICAgICAgICRzY29wZS5jb250YWN0cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gKiAgICAgfTtcclxuICpcclxuICogICAgICRzY29wZS5jbGVhckNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XHJcbiAqICAgICAgIGNvbnRhY3QudHlwZSA9ICdwaG9uZSc7XHJcbiAqICAgICAgIGNvbnRhY3QudmFsdWUgPSAnJztcclxuICogICAgIH07XHJcbiAqICAgfVxyXG4gKiAgPC9maWxlPlxyXG4gKiAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gKiAgICBpdCgnc2hvdWxkIGNoZWNrIGNvbnRyb2xsZXInLCBmdW5jdGlvbigpIHtcclxuICogICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5pZCgnY3RybC1leG1wbCcpKTtcclxuICpcclxuICogICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkubW9kZWwoJ25hbWUnKSlcclxuICogICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnSm9obiBTbWl0aCcpO1xyXG4gKlxyXG4gKiAgICAgIHZhciBmaXJzdFJlcGVhdCA9XHJcbiAqICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDApKTtcclxuICogICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cclxuICogICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gY29udGFjdHMnKS5yb3coMSkpO1xyXG4gKlxyXG4gKiAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcclxuICogICAgICAgICAgLnRvQmUoJzQwOCA1NTUgMTIxMicpO1xyXG4gKiAgICAgIGV4cGVjdChzZWNvbmRSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXHJcbiAqICAgICAgICAgIC50b0JlKCdqb2huLnNtaXRoQGV4YW1wbGUub3JnJyk7XHJcbiAqXHJcbiAqICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5saW5rVGV4dCgnY2xlYXInKSkuY2xpY2soKTtcclxuICpcclxuICogICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXHJcbiAqICAgICAgICAgIC50b0JlKCcnKTtcclxuICpcclxuICogICAgICBjb250YWluZXIuZWxlbWVudChieS5saW5rVGV4dCgnYWRkJykpLmNsaWNrKCk7XHJcbiAqXHJcbiAqICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDIpKVxyXG4gKiAgICAgICAgICAuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKVxyXG4gKiAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAudG9CZSgneW91cm5hbWVAZXhhbXBsZS5vcmcnKTtcclxuICogICAgfSk7XHJcbiAqICA8L2ZpbGU+XHJcbiAqPC9leGFtcGxlPlxyXG5cclxuICovXHJcbnZhciBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUgPSBbZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBzY29wZTogdHJ1ZSxcclxuICAgIGNvbnRyb2xsZXI6ICdAJyxcclxuICAgIHByaW9yaXR5OiA1MDBcclxuICB9O1xyXG59XTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ3NwXHJcbiAqXHJcbiAqIEBlbGVtZW50IGh0bWxcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEVuYWJsZXMgW0NTUCAoQ29udGVudCBTZWN1cml0eSBQb2xpY3kpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9TZWN1cml0eS9DU1ApIHN1cHBvcnQuXHJcbiAqXHJcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHdoZW4gZGV2ZWxvcGluZyB0aGluZ3MgbGlrZSBHb29nbGUgQ2hyb21lIEV4dGVuc2lvbnMuXHJcbiAqXHJcbiAqIENTUCBmb3JiaWRzIGFwcHMgdG8gdXNlIGBldmFsYCBvciBgRnVuY3Rpb24oc3RyaW5nKWAgZ2VuZXJhdGVkIGZ1bmN0aW9ucyAoYW1vbmcgb3RoZXIgdGhpbmdzKS5cclxuICogRm9yIEFuZ3VsYXIgdG8gYmUgQ1NQIGNvbXBhdGlibGUgdGhlcmUgYXJlIG9ubHkgdHdvIHRoaW5ncyB0aGF0IHdlIG5lZWQgdG8gZG8gZGlmZmVyZW50bHk6XHJcbiAqXHJcbiAqIC0gZG9uJ3QgdXNlIGBGdW5jdGlvbmAgY29uc3RydWN0b3IgdG8gZ2VuZXJhdGUgb3B0aW1pemVkIHZhbHVlIGdldHRlcnNcclxuICogLSBkb24ndCBpbmplY3QgY3VzdG9tIHN0eWxlc2hlZXQgaW50byB0aGUgZG9jdW1lbnRcclxuICpcclxuICogQW5ndWxhckpTIHVzZXMgYEZ1bmN0aW9uKHN0cmluZylgIGdlbmVyYXRlZCBmdW5jdGlvbnMgYXMgYSBzcGVlZCBvcHRpbWl6YXRpb24uIEFwcGx5aW5nIHRoZSBgbmdDc3BgXHJcbiAqIGRpcmVjdGl2ZSB3aWxsIGNhdXNlIEFuZ3VsYXIgdG8gdXNlIENTUCBjb21wYXRpYmlsaXR5IG1vZGUuIFdoZW4gdGhpcyBtb2RlIGlzIG9uIEFuZ3VsYXJKUyB3aWxsXHJcbiAqIGV2YWx1YXRlIGFsbCBleHByZXNzaW9ucyB1cCB0byAzMCUgc2xvd2VyIHRoYW4gaW4gbm9uLUNTUCBtb2RlLCBidXQgbm8gc2VjdXJpdHkgdmlvbGF0aW9ucyB3aWxsXHJcbiAqIGJlIHJhaXNlZC5cclxuICpcclxuICogQ1NQIGZvcmJpZHMgSmF2YVNjcmlwdCB0byBpbmxpbmUgc3R5bGVzaGVldCBydWxlcy4gSW4gbm9uIENTUCBtb2RlIEFuZ3VsYXIgYXV0b21hdGljYWxseVxyXG4gKiBpbmNsdWRlcyBzb21lIENTUyBydWxlcyAoZS5nLiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xvYWsgbmdDbG9ha30pLlxyXG4gKiBUbyBtYWtlIHRob3NlIGRpcmVjdGl2ZXMgd29yayBpbiBDU1AgbW9kZSwgaW5jbHVkZSB0aGUgYGFuZ3VsYXItY3NwLmNzc2AgbWFudWFsbHkuXHJcbiAqXHJcbiAqIEFuZ3VsYXIgdHJpZXMgdG8gYXV0b2RldGVjdCBpZiBDU1AgaXMgYWN0aXZlIGFuZCBhdXRvbWF0aWNhbGx5IHR1cm4gb24gdGhlIENTUC1zYWZlIG1vZGUuIFRoaXNcclxuICogYXV0b2RldGVjdGlvbiBob3dldmVyIHRyaWdnZXJzIGEgQ1NQIGVycm9yIHRvIGJlIGxvZ2dlZCBpbiB0aGUgY29uc29sZTpcclxuICpcclxuICogYGBgXHJcbiAqIFJlZnVzZWQgdG8gZXZhbHVhdGUgYSBzdHJpbmcgYXMgSmF2YVNjcmlwdCBiZWNhdXNlICd1bnNhZmUtZXZhbCcgaXMgbm90IGFuIGFsbG93ZWQgc291cmNlIG9mXHJcbiAqIHNjcmlwdCBpbiB0aGUgZm9sbG93aW5nIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGRpcmVjdGl2ZTogXCJkZWZhdWx0LXNyYyAnc2VsZidcIi4gTm90ZSB0aGF0XHJcbiAqICdzY3JpcHQtc3JjJyB3YXMgbm90IGV4cGxpY2l0bHkgc2V0LCBzbyAnZGVmYXVsdC1zcmMnIGlzIHVzZWQgYXMgYSBmYWxsYmFjay5cclxuICogYGBgXHJcbiAqXHJcbiAqIFRoaXMgZXJyb3IgaXMgaGFybWxlc3MgYnV0IGFubm95aW5nLiBUbyBwcmV2ZW50IHRoZSBlcnJvciBmcm9tIHNob3dpbmcgdXAsIHB1dCB0aGUgYG5nQ3NwYFxyXG4gKiBkaXJlY3RpdmUgb24gdGhlIHJvb3QgZWxlbWVudCBvZiB0aGUgYXBwbGljYXRpb24gb3Igb24gdGhlIGBhbmd1bGFyLmpzYCBzY3JpcHQgdGFnLCB3aGljaGV2ZXJcclxuICogYXBwZWFycyBmaXJzdCBpbiB0aGUgaHRtbCBkb2N1bWVudC5cclxuICpcclxuICogKk5vdGU6IFRoaXMgZGlyZWN0aXZlIGlzIG9ubHkgYXZhaWxhYmxlIGluIHRoZSBgbmctY3NwYCBhbmQgYGRhdGEtbmctY3NwYCBhdHRyaWJ1dGUgZm9ybS4qXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gYXBwbHkgdGhlIGBuZ0NzcGAgZGlyZWN0aXZlIHRvIHRoZSBgaHRtbGAgdGFnLlxyXG4gICBgYGBodG1sXHJcbiAgICAgPCFkb2N0eXBlIGh0bWw+XHJcbiAgICAgPGh0bWwgbmctYXBwIG5nLWNzcD5cclxuICAgICAuLi5cclxuICAgICAuLi5cclxuICAgICA8L2h0bWw+XHJcbiAgIGBgYFxyXG4gKi9cclxuXHJcbi8vIG5nQ3NwIGlzIG5vdCBpbXBsZW1lbnRlZCBhcyBhIHByb3BlciBkaXJlY3RpdmUgYW55IG1vcmUsIGJlY2F1c2Ugd2UgbmVlZCBpdCBiZSBwcm9jZXNzZWQgd2hpbGUgd2VcclxuLy8gYm9vdHN0cmFwIHRoZSBzeXN0ZW0gKGJlZm9yZSAkcGFyc2UgaXMgaW5zdGFudGlhdGVkKSwgZm9yIHRoaXMgcmVhc29uIHdlIGp1c3QgaGF2ZVxyXG4vLyB0aGUgY3NwLmlzQWN0aXZlKCkgZm4gdGhhdCBsb29rcyBmb3IgbmctY3NwIGF0dHJpYnV0ZSBhbnl3aGVyZSBpbiB0aGUgY3VycmVudCBkb2NcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ2xpY2tcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBuZ0NsaWNrIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIHdoZW5cclxuICogYW4gZWxlbWVudCBpcyBjbGlja2VkLlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NsaWNrIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogY2xpY2suICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxyXG4gICAgICAgIEluY3JlbWVudFxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgPHNwYW4+XHJcbiAgICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgICA8L3NwYW4+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnY291bnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKCcwJyk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCdidXR0b24nKSkuY2xpY2soKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnY291bnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKCcxJyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbi8qXHJcbiAqIEEgZGlyZWN0aXZlIHRoYXQgYWxsb3dzIGNyZWF0aW9uIG9mIGN1c3RvbSBvbmNsaWNrIGhhbmRsZXJzIHRoYXQgYXJlIGRlZmluZWQgYXMgYW5ndWxhclxyXG4gKiBleHByZXNzaW9ucyBhbmQgYXJlIGNvbXBpbGVkIGFuZCBleGVjdXRlZCB3aXRoaW4gdGhlIGN1cnJlbnQgc2NvcGUuXHJcbiAqXHJcbiAqIEV2ZW50cyB0aGF0IGFyZSBoYW5kbGVkIHZpYSB0aGVzZSBoYW5kbGVyIGFyZSBhbHdheXMgY29uZmlndXJlZCBub3QgdG8gcHJvcGFnYXRlIGZ1cnRoZXIuXHJcbiAqL1xyXG52YXIgbmdFdmVudERpcmVjdGl2ZXMgPSB7fTtcclxuXHJcbi8vIEZvciBldmVudHMgdGhhdCBtaWdodCBmaXJlIHN5bmNocm9ub3VzbHkgZHVyaW5nIERPTSBtYW5pcHVsYXRpb25cclxuLy8gd2UgbmVlZCB0byBleGVjdXRlIHRoZWlyIGV2ZW50IGhhbmRsZXJzIGFzeW5jaHJvbm91c2x5IHVzaW5nICRldmFsQXN5bmMsXHJcbi8vIHNvIHRoYXQgdGhleSBhcmUgbm90IGV4ZWN1dGVkIGluIGFuIGluY29uc2lzdGVudCBzdGF0ZS5cclxudmFyIGZvcmNlQXN5bmNFdmVudHMgPSB7XHJcbiAgJ2JsdXInOiB0cnVlLFxyXG4gICdmb2N1cyc6IHRydWVcclxufTtcclxuZm9yRWFjaChcclxuICAnY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZScuc3BsaXQoJyAnKSxcclxuICBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICAgIHZhciBkaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKCduZy0nICsgZXZlbnROYW1lKTtcclxuICAgIG5nRXZlbnREaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdID0gWyckcGFyc2UnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRwYXJzZSwgJHJvb3RTY29wZSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24oJGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgIHZhciBmbiA9ICRwYXJzZShhdHRyW2RpcmVjdGl2ZU5hbWVdKTtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0V2ZW50SGFuZGxlcihzY29wZSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGZuKHNjb3BlLCB7JGV2ZW50OmV2ZW50fSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBpZiAoZm9yY2VBc3luY0V2ZW50c1tldmVudE5hbWVdICYmICRyb290U2NvcGUuJCRwaGFzZSkge1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfV07XHJcbiAgfVxyXG4pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdEYmxjbGlja1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ0RibGNsaWNrYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBhIGRibGNsaWNrIGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0RibGNsaWNrIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogYSBkYmxjbGljay4gKFRoZSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgKVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLWRibGNsaWNrPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxyXG4gICAgICAgIEluY3JlbWVudCAob24gZG91YmxlIGNsaWNrKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ01vdXNlZG93blxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIG5nTW91c2Vkb3duIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlZG93biBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWRvd24ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBtb3VzZWRvd24uICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLW1vdXNlZG93bj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKG9uIG1vdXNlIGRvd24pXHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW91c2V1cFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2V1cCBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZXVwIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogbW91c2V1cC4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxidXR0b24gbmctbW91c2V1cD1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKG9uIG1vdXNlIHVwKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW91c2VvdmVyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZW92ZXIgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VvdmVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogbW91c2VvdmVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZW92ZXI9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGlzIG92ZXIpXHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW91c2VlbnRlclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VlbnRlciBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWVudGVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogbW91c2VlbnRlci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxidXR0b24gbmctbW91c2VlbnRlcj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgZW50ZXJzKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ01vdXNlbGVhdmVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlbGVhdmUgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VsZWF2ZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIG1vdXNlbGVhdmUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLW1vdXNlbGVhdmU9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGxlYXZlcylcclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdNb3VzZW1vdmVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlbW92ZSBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZW1vdmUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBtb3VzZW1vdmUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLW1vdXNlbW92ZT1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgbW92ZXMpXHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nS2V5ZG93blxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5ZG93biBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdLZXlkb3duIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICoga2V5ZG93bi4gKEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGAgYW5kIGNhbiBiZSBpbnRlcnJvZ2F0ZWQgZm9yIGtleUNvZGUsIGFsdEtleSwgZXRjLilcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGlucHV0IG5nLWtleWRvd249XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgIGtleSBkb3duIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdLZXl1cFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5dXAgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nS2V5dXAge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBrZXl1cC4gKEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGAgYW5kIGNhbiBiZSBpbnRlcnJvZ2F0ZWQgZm9yIGtleUNvZGUsIGFsdEtleSwgZXRjLilcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxwPlR5cGluZyBpbiB0aGUgaW5wdXQgYm94IGJlbG93IHVwZGF0ZXMgdGhlIGtleSBjb3VudDwvcD5cclxuICAgICAgIDxpbnB1dCBuZy1rZXl1cD1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj4ga2V5IHVwIGNvdW50OiB7e2NvdW50fX1cclxuXHJcbiAgICAgICA8cD5UeXBpbmcgaW4gdGhlIGlucHV0IGJveCBiZWxvdyB1cGRhdGVzIHRoZSBrZXljb2RlPC9wPlxyXG4gICAgICAgPGlucHV0IG5nLWtleXVwPVwiZXZlbnQ9JGV2ZW50XCI+XHJcbiAgICAgICA8cD5ldmVudCBrZXlDb2RlOiB7eyBldmVudC5rZXlDb2RlIH19PC9wPlxyXG4gICAgICAgPHA+ZXZlbnQgYWx0S2V5OiB7eyBldmVudC5hbHRLZXkgfX08L3A+XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nS2V5cHJlc3NcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleXByZXNzIGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0tleXByZXNzIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICoga2V5cHJlc3MuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9XHJcbiAqIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxpbnB1dCBuZy1rZXlwcmVzcz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAga2V5IHByZXNzIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdTdWJtaXRcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEVuYWJsZXMgYmluZGluZyBhbmd1bGFyIGV4cHJlc3Npb25zIHRvIG9uc3VibWl0IGV2ZW50cy5cclxuICpcclxuICogQWRkaXRpb25hbGx5IGl0IHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbiAod2hpY2ggZm9yIGZvcm0gbWVhbnMgc2VuZGluZyB0aGUgcmVxdWVzdCB0byB0aGVcclxuICogc2VydmVyIGFuZCByZWxvYWRpbmcgdGhlIGN1cnJlbnQgcGFnZSksIGJ1dCBvbmx5IGlmIHRoZSBmb3JtIGRvZXMgbm90IGNvbnRhaW4gYGFjdGlvbmAsXHJcbiAqIGBkYXRhLWFjdGlvbmAsIG9yIGB4LWFjdGlvbmAgYXR0cmlidXRlcy5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipXYXJuaW5nOioqIEJlIGNhcmVmdWwgbm90IHRvIGNhdXNlIFwiZG91YmxlLXN1Ym1pc3Npb25cIiBieSB1c2luZyBib3RoIHRoZSBgbmdDbGlja2AgYW5kXHJcbiAqIGBuZ1N1Ym1pdGAgaGFuZGxlcnMgdG9nZXRoZXIuIFNlZSB0aGVcclxuICoge0BsaW5rIGZvcm0jc3VibWl0dGluZy1hLWZvcm0tYW5kLXByZXZlbnRpbmctdGhlLWRlZmF1bHQtYWN0aW9uIGBmb3JtYCBkaXJlY3RpdmUgZG9jdW1lbnRhdGlvbn1cclxuICogZm9yIGEgZGV0YWlsZWQgZGlzY3Vzc2lvbiBvZiB3aGVuIGBuZ1N1Ym1pdGAgbWF5IGJlIHRyaWdnZXJlZC5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqIEBlbGVtZW50IGZvcm1cclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1N1Ym1pdCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLlxyXG4gKiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwic3VibWl0RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3N1Ym1pdEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5saXN0ID0gW107XHJcbiAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJ2hlbGxvJztcclxuICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmICgkc2NvcGUudGV4dCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QucHVzaCh0aGlzLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRleHQgPSAnJztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XSk7XHJcbiAgICAgIDwvc2NyaXB0PlxyXG4gICAgICA8Zm9ybSBuZy1zdWJtaXQ9XCJzdWJtaXQoKVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgIEVudGVyIHRleHQgYW5kIGhpdCBlbnRlcjpcclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInRleHRcIiBuYW1lPVwidGV4dFwiIC8+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiBpZD1cInN1Ym1pdFwiIHZhbHVlPVwiU3VibWl0XCIgLz5cclxuICAgICAgICA8cHJlPmxpc3Q9e3tsaXN0fX08L3ByZT5cclxuICAgICAgPC9mb3JtPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLXN1Ym1pdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9CZSgnbGlzdD1bXScpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3N1Ym1pdCcpKS5jbGljaygpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndGV4dCcpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJycpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICBpdCgnc2hvdWxkIGlnbm9yZSBlbXB0eSBzdHJpbmdzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0PVtdJyk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2hlbGxvJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdGb2N1c1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gZm9jdXMgZXZlbnQuXHJcbiAqXHJcbiAqIE5vdGU6IEFzIHRoZSBgZm9jdXNgIGV2ZW50IGlzIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBjYWxsaW5nIGBpbnB1dC5mb2N1cygpYFxyXG4gKiBBbmd1bGFySlMgZXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gdXNpbmcgYHNjb3BlLiRldmFsQXN5bmNgIGlmIHRoZSBldmVudCBpcyBmaXJlZFxyXG4gKiBkdXJpbmcgYW4gYCRhcHBseWAgdG8gZW5zdXJlIGEgY29uc2lzdGVudCBzdGF0ZS5cclxuICpcclxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nRm9jdXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBmb2N1cy4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja31cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0JsdXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGJsdXIgZXZlbnQuXHJcbiAqXHJcbiAqIEEgW2JsdXIgZXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0V2ZW50cy9ibHVyKSBmaXJlcyB3aGVuXHJcbiAqIGFuIGVsZW1lbnQgaGFzIGxvc3QgZm9jdXMuXHJcbiAqXHJcbiAqIE5vdGU6IEFzIHRoZSBgYmx1cmAgZXZlbnQgaXMgZXhlY3V0ZWQgc3luY2hyb25vdXNseSBhbHNvIGR1cmluZyBET00gbWFuaXB1bGF0aW9uc1xyXG4gKiAoZS5nLiByZW1vdmluZyBhIGZvY3Vzc2VkIGlucHV0KSxcclxuICogQW5ndWxhckpTIGV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIHVzaW5nIGBzY29wZS4kZXZhbEFzeW5jYCBpZiB0aGUgZXZlbnQgaXMgZmlyZWRcclxuICogZHVyaW5nIGFuIGAkYXBwbHlgIHRvIGVuc3VyZSBhIGNvbnNpc3RlbnQgc3RhdGUuXHJcbiAqXHJcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0JsdXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBibHVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICogU2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ29weVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gY29weSBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ29weSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIGNvcHkuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgbmctY29weT1cImNvcGllZD10cnVlXCIgbmctaW5pdD1cImNvcGllZD1mYWxzZTsgdmFsdWU9J2NvcHkgbWUnXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPlxyXG4gICAgICBjb3BpZWQ6IHt7Y29waWVkfX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0N1dFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gY3V0IGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDdXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBjdXQuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgbmctY3V0PVwiY3V0PXRydWVcIiBuZy1pbml0PVwiY3V0PWZhbHNlOyB2YWx1ZT0nY3V0IG1lJ1wiIG5nLW1vZGVsPVwidmFsdWVcIj5cclxuICAgICAgY3V0OiB7e2N1dH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdQYXN0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gcGFzdGUgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1Bhc3RlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogcGFzdGUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgbmctcGFzdGU9XCJwYXN0ZT10cnVlXCIgbmctaW5pdD1cInBhc3RlPWZhbHNlXCIgcGxhY2Vob2xkZXI9J3Bhc3RlIGhlcmUnPlxyXG4gICAgICBwYXN0ZWQ6IHt7cGFzdGV9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nSWZcclxuICogQHJlc3RyaWN0IEFcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdJZmAgZGlyZWN0aXZlIHJlbW92ZXMgb3IgcmVjcmVhdGVzIGEgcG9ydGlvbiBvZiB0aGUgRE9NIHRyZWUgYmFzZWQgb24gYW5cclxuICoge2V4cHJlc3Npb259LiBJZiB0aGUgZXhwcmVzc2lvbiBhc3NpZ25lZCB0byBgbmdJZmAgZXZhbHVhdGVzIHRvIGEgZmFsc2VcclxuICogdmFsdWUgdGhlbiB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSwgb3RoZXJ3aXNlIGEgY2xvbmUgb2YgdGhlXHJcbiAqIGVsZW1lbnQgaXMgcmVpbnNlcnRlZCBpbnRvIHRoZSBET00uXHJcbiAqXHJcbiAqIGBuZ0lmYCBkaWZmZXJzIGZyb20gYG5nU2hvd2AgYW5kIGBuZ0hpZGVgIGluIHRoYXQgYG5nSWZgIGNvbXBsZXRlbHkgcmVtb3ZlcyBhbmQgcmVjcmVhdGVzIHRoZVxyXG4gKiBlbGVtZW50IGluIHRoZSBET00gcmF0aGVyIHRoYW4gY2hhbmdpbmcgaXRzIHZpc2liaWxpdHkgdmlhIHRoZSBgZGlzcGxheWAgY3NzIHByb3BlcnR5LiAgQSBjb21tb25cclxuICogY2FzZSB3aGVuIHRoaXMgZGlmZmVyZW5jZSBpcyBzaWduaWZpY2FudCBpcyB3aGVuIHVzaW5nIGNzcyBzZWxlY3RvcnMgdGhhdCByZWx5IG9uIGFuIGVsZW1lbnQnc1xyXG4gKiBwb3NpdGlvbiB3aXRoaW4gdGhlIERPTSwgc3VjaCBhcyB0aGUgYDpmaXJzdC1jaGlsZGAgb3IgYDpsYXN0LWNoaWxkYCBwc2V1ZG8tY2xhc3Nlcy5cclxuICpcclxuICogTm90ZSB0aGF0IHdoZW4gYW4gZWxlbWVudCBpcyByZW1vdmVkIHVzaW5nIGBuZ0lmYCBpdHMgc2NvcGUgaXMgZGVzdHJveWVkIGFuZCBhIG5ldyBzY29wZVxyXG4gKiBpcyBjcmVhdGVkIHdoZW4gdGhlIGVsZW1lbnQgaXMgcmVzdG9yZWQuICBUaGUgc2NvcGUgY3JlYXRlZCB3aXRoaW4gYG5nSWZgIGluaGVyaXRzIGZyb21cclxuICogaXRzIHBhcmVudCBzY29wZSB1c2luZ1xyXG4gKiBbcHJvdG90eXBhbCBpbmhlcml0YW5jZV0oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy93aWtpL1RoZS1OdWFuY2VzLW9mLVNjb3BlLVByb3RvdHlwYWwtSW5oZXJpdGFuY2UpLlxyXG4gKiBBbiBpbXBvcnRhbnQgaW1wbGljYXRpb24gb2YgdGhpcyBpcyBpZiBgbmdNb2RlbGAgaXMgdXNlZCB3aXRoaW4gYG5nSWZgIHRvIGJpbmQgdG9cclxuICogYSBqYXZhc2NyaXB0IHByaW1pdGl2ZSBkZWZpbmVkIGluIHRoZSBwYXJlbnQgc2NvcGUuIEluIHRoaXMgY2FzZSBhbnkgbW9kaWZpY2F0aW9ucyBtYWRlIHRvIHRoZVxyXG4gKiB2YXJpYWJsZSB3aXRoaW4gdGhlIGNoaWxkIHNjb3BlIHdpbGwgb3ZlcnJpZGUgKGhpZGUpIHRoZSB2YWx1ZSBpbiB0aGUgcGFyZW50IHNjb3BlLlxyXG4gKlxyXG4gKiBBbHNvLCBgbmdJZmAgcmVjcmVhdGVzIGVsZW1lbnRzIHVzaW5nIHRoZWlyIGNvbXBpbGVkIHN0YXRlLiBBbiBleGFtcGxlIG9mIHRoaXMgYmVoYXZpb3JcclxuICogaXMgaWYgYW4gZWxlbWVudCdzIGNsYXNzIGF0dHJpYnV0ZSBpcyBkaXJlY3RseSBtb2RpZmllZCBhZnRlciBpdCdzIGNvbXBpbGVkLCB1c2luZyBzb21ldGhpbmcgbGlrZVxyXG4gKiBqUXVlcnkncyBgLmFkZENsYXNzKClgIG1ldGhvZCwgYW5kIHRoZSBlbGVtZW50IGlzIGxhdGVyIHJlbW92ZWQuIFdoZW4gYG5nSWZgIHJlY3JlYXRlcyB0aGUgZWxlbWVudFxyXG4gKiB0aGUgYWRkZWQgY2xhc3Mgd2lsbCBiZSBsb3N0IGJlY2F1c2UgdGhlIG9yaWdpbmFsIGNvbXBpbGVkIHN0YXRlIGlzIHVzZWQgdG8gcmVnZW5lcmF0ZSB0aGUgZWxlbWVudC5cclxuICpcclxuICogQWRkaXRpb25hbGx5LCB5b3UgY2FuIHByb3ZpZGUgYW5pbWF0aW9ucyB2aWEgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSB0byBhbmltYXRlIHRoZSBgZW50ZXJgXHJcbiAqIGFuZCBgbGVhdmVgIGVmZmVjdHMuXHJcbiAqXHJcbiAqIEBhbmltYXRpb25zXHJcbiAqIGVudGVyIC0gaGFwcGVucyBqdXN0IGFmdGVyIHRoZSBuZ0lmIGNvbnRlbnRzIGNoYW5nZSBhbmQgYSBuZXcgRE9NIGVsZW1lbnQgaXMgY3JlYXRlZCBhbmQgaW5qZWN0ZWQgaW50byB0aGUgbmdJZiBjb250YWluZXJcclxuICogbGVhdmUgLSBoYXBwZW5zIGp1c3QgYmVmb3JlIHRoZSBuZ0lmIGNvbnRlbnRzIGFyZSByZW1vdmVkIGZyb20gdGhlIERPTVxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHNjb3BlXHJcbiAqIEBwcmlvcml0eSA2MDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0lmIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyBmYWxzeSB0aGVuXHJcbiAqICAgICB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSB0cmVlLiBJZiBpdCBpcyB0cnV0aHkgYSBjb3B5IG9mIHRoZSBjb21waWxlZFxyXG4gKiAgICAgZWxlbWVudCBpcyBhZGRlZCB0byB0aGUgRE9NIHRyZWUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICBDbGljayBtZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIG5nLWluaXQ9XCJjaGVja2VkPXRydWVcIiAvPjxici8+XHJcbiAgICAgIFNob3cgd2hlbiBjaGVja2VkOlxyXG4gICAgICA8c3BhbiBuZy1pZj1cImNoZWNrZWRcIiBjbGFzcz1cImFuaW1hdGUtaWZcIj5cclxuICAgICAgICBJJ20gcmVtb3ZlZCB3aGVuIHRoZSBjaGVja2JveCBpcyB1bmNoZWNrZWQuXHJcbiAgICAgIDwvc3Bhbj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxyXG4gICAgICAuYW5pbWF0ZS1pZiB7XHJcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xyXG4gICAgICAgIHBhZGRpbmc6MTBweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtaWYubmctZW50ZXIsIC5hbmltYXRlLWlmLm5nLWxlYXZlIHtcclxuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcclxuICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLFxyXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xyXG4gICAgICAgIG9wYWNpdHk6MDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtaWYubmctbGVhdmUsXHJcbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XHJcbiAgICAgICAgb3BhY2l0eToxO1xyXG4gICAgICB9XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nSWZEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxyXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxyXG4gICAgcHJpb3JpdHk6IDYwMCxcclxuICAgIHRlcm1pbmFsOiB0cnVlLFxyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICQkdGxiOiB0cnVlLFxyXG4gICAgbGluazogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xyXG4gICAgICAgIHZhciBibG9jaywgY2hpbGRTY29wZSwgcHJldmlvdXNFbGVtZW50cztcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCRhdHRyLm5nSWYsIGZ1bmN0aW9uIG5nSWZXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG5cclxuICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWNoaWxkU2NvcGUpIHtcclxuICAgICAgICAgICAgICAkdHJhbnNjbHVkZShmdW5jdGlvbiAoY2xvbmUsIG5ld1Njb3BlKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gbmV3U2NvcGU7XHJcbiAgICAgICAgICAgICAgICBjbG9uZVtjbG9uZS5sZW5ndGgrK10gPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgZW5kIG5nSWY6ICcgKyAkYXR0ci5uZ0lmICsgJyAnKTtcclxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFdlIG9ubHkgbmVlZCB0aGUgZmlyc3QvbGFzdCBub2RlIG9mIHRoZSBjbG9uZWQgbm9kZXMuXHJcbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB3ZSBuZWVkIHRvIGtlZXAgdGhlIHJlZmVyZW5jZSB0byB0aGUganFsaXRlIHdyYXBwZXIgYXMgaXQgbWlnaHQgYmUgY2hhbmdlZCBsYXRlclxyXG4gICAgICAgICAgICAgICAgLy8gYnkgYSBkaXJlY3RpdmUgd2l0aCB0ZW1wbGF0ZVVybCB3aGVuIGl0cyB0ZW1wbGF0ZSBhcnJpdmVzLlxyXG4gICAgICAgICAgICAgICAgYmxvY2sgPSB7XHJcbiAgICAgICAgICAgICAgICAgIGNsb25lOiBjbG9uZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNsb25lLCAkZWxlbWVudC5wYXJlbnQoKSwgJGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZihwcmV2aW91c0VsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50cy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjaGlsZFNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgY2hpbGRTY29wZS4kZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGJsb2NrKSB7XHJcbiAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50cyA9IGdldEJsb2NrTm9kZXMoYmxvY2suY2xvbmUpO1xyXG4gICAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKHByZXZpb3VzRWxlbWVudHMpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzID0gbnVsbDtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBibG9jayA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nSW5jbHVkZVxyXG4gKiBAcmVzdHJpY3QgRUNBXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBGZXRjaGVzLCBjb21waWxlcyBhbmQgaW5jbHVkZXMgYW4gZXh0ZXJuYWwgSFRNTCBmcmFnbWVudC5cclxuICpcclxuICogQnkgZGVmYXVsdCwgdGhlIHRlbXBsYXRlIFVSTCBpcyByZXN0cmljdGVkIHRvIHRoZSBzYW1lIGRvbWFpbiBhbmQgcHJvdG9jb2wgYXMgdGhlXHJcbiAqIGFwcGxpY2F0aW9uIGRvY3VtZW50LiBUaGlzIGlzIGRvbmUgYnkgY2FsbGluZyB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmxcclxuICogJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9IG9uIGl0LiBUbyBsb2FkIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgcHJvdG9jb2xzXHJcbiAqIHlvdSBtYXkgZWl0aGVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCB3aGl0ZWxpc3QgdGhlbX0gb3JcclxuICogW3dyYXAgdGhlbV0obmcuJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmwpIGFzIHRydXN0ZWQgdmFsdWVzLiBSZWZlciB0byBBbmd1bGFyJ3Mge0BsaW5rXHJcbiAqIG5nLiRzY2UgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmd9LlxyXG4gKlxyXG4gKiBJbiBhZGRpdGlvbiwgdGhlIGJyb3dzZXInc1xyXG4gKiBbU2FtZSBPcmlnaW4gUG9saWN5XShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Jyb3dzZXJzZWMvd2lraS9QYXJ0MiNTYW1lLW9yaWdpbl9wb2xpY3lfZm9yX1hNTEh0dHBSZXF1ZXN0KVxyXG4gKiBhbmQgW0Nyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nIChDT1JTKV0oaHR0cDovL3d3dy53My5vcmcvVFIvY29ycy8pXHJcbiAqIHBvbGljeSBtYXkgZnVydGhlciByZXN0cmljdCB3aGV0aGVyIHRoZSB0ZW1wbGF0ZSBpcyBzdWNjZXNzZnVsbHkgbG9hZGVkLlxyXG4gKiBGb3IgZXhhbXBsZSwgYG5nSW5jbHVkZWAgd29uJ3Qgd29yayBmb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzIG9uIGFsbCBicm93c2VycyBhbmQgZm9yIGBmaWxlOi8vYFxyXG4gKiBhY2Nlc3Mgb24gc29tZSBicm93c2Vycy5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogZW50ZXIgLSBhbmltYXRpb24gaXMgdXNlZCB0byBicmluZyBuZXcgY29udGVudCBpbnRvIHRoZSBicm93c2VyLlxyXG4gKiBsZWF2ZSAtIGFuaW1hdGlvbiBpcyB1c2VkIHRvIGFuaW1hdGUgZXhpc3RpbmcgY29udGVudCBhd2F5LlxyXG4gKlxyXG4gKiBUaGUgZW50ZXIgYW5kIGxlYXZlIGFuaW1hdGlvbiBvY2N1ciBjb25jdXJyZW50bHkuXHJcbiAqXHJcbiAqIEBzY29wZVxyXG4gKiBAcHJpb3JpdHkgNDAwXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ0luY2x1ZGV8c3JjIGFuZ3VsYXIgZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIFVSTC4gSWYgdGhlIHNvdXJjZSBpcyBhIHN0cmluZyBjb25zdGFudCxcclxuICogICAgICAgICAgICAgICAgIG1ha2Ugc3VyZSB5b3Ugd3JhcCBpdCBpbiAqKnNpbmdsZSoqIHF1b3RlcywgZS5nLiBgc3JjPVwiJ215UGFydGlhbFRlbXBsYXRlLmh0bWwnXCJgLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG9ubG9hZCBFeHByZXNzaW9uIHRvIGV2YWx1YXRlIHdoZW4gYSBuZXcgcGFydGlhbCBpcyBsb2FkZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gYXV0b3Njcm9sbCBXaGV0aGVyIGBuZ0luY2x1ZGVgIHNob3VsZCBjYWxsIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsXHJcbiAqICAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbH0gdG8gc2Nyb2xsIHRoZSB2aWV3cG9ydCBhZnRlciB0aGUgY29udGVudCBpcyBsb2FkZWQuXHJcbiAqXHJcbiAqICAgICAgICAgICAgICAgICAgLSBJZiB0aGUgYXR0cmlidXRlIGlzIG5vdCBzZXQsIGRpc2FibGUgc2Nyb2xsaW5nLlxyXG4gKiAgICAgICAgICAgICAgICAgIC0gSWYgdGhlIGF0dHJpYnV0ZSBpcyBzZXQgd2l0aG91dCB2YWx1ZSwgZW5hYmxlIHNjcm9sbGluZy5cclxuICogICAgICAgICAgICAgICAgICAtIE90aGVyd2lzZSBlbmFibGUgc2Nyb2xsaW5nIG9ubHkgaWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydXRoeSB2YWx1ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICA8ZXhhbXBsZSBtb2R1bGU9XCJpbmNsdWRlRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cInRlbXBsYXRlXCIgbmctb3B0aW9ucz1cInQubmFtZSBmb3IgdCBpbiB0ZW1wbGF0ZXNcIj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+KGJsYW5rKTwvb3B0aW9uPlxyXG4gICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICB1cmwgb2YgdGhlIHRlbXBsYXRlOiA8dHQ+e3t0ZW1wbGF0ZS51cmx9fTwvdHQ+XHJcbiAgICAgICA8aHIvPlxyXG4gICAgICAgPGRpdiBjbGFzcz1cInNsaWRlLWFuaW1hdGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRlXCIgbmctaW5jbHVkZT1cInRlbXBsYXRlLnVybFwiPjwvZGl2PlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdpbmNsdWRlRXhhbXBsZScsIFsnbmdBbmltYXRlJ10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICRzY29wZS50ZW1wbGF0ZXMgPVxyXG4gICAgICAgICAgICBbIHsgbmFtZTogJ3RlbXBsYXRlMS5odG1sJywgdXJsOiAndGVtcGxhdGUxLmh0bWwnfSxcclxuICAgICAgICAgICAgICB7IG5hbWU6ICd0ZW1wbGF0ZTIuaHRtbCcsIHVybDogJ3RlbXBsYXRlMi5odG1sJ30gXTtcclxuICAgICAgICAgICRzY29wZS50ZW1wbGF0ZSA9ICRzY29wZS50ZW1wbGF0ZXNbMF07XHJcbiAgICAgICAgfV0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJ0ZW1wbGF0ZTEuaHRtbFwiPlxyXG4gICAgICBDb250ZW50IG9mIHRlbXBsYXRlMS5odG1sXHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUyLmh0bWxcIj5cclxuICAgICAgQ29udGVudCBvZiB0ZW1wbGF0ZTIuaHRtbFxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XHJcbiAgICAgIC5zbGlkZS1hbmltYXRlLWNvbnRhaW5lciB7XHJcbiAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XHJcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xyXG4gICAgICAgIGhlaWdodDo0MHB4O1xyXG4gICAgICAgIG92ZXJmbG93OmhpZGRlbjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLnNsaWRlLWFuaW1hdGUge1xyXG4gICAgICAgIHBhZGRpbmc6MTBweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctZW50ZXIsIC5zbGlkZS1hbmltYXRlLm5nLWxlYXZlIHtcclxuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcclxuICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcblxyXG4gICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xyXG4gICAgICAgIHRvcDowO1xyXG4gICAgICAgIGxlZnQ6MDtcclxuICAgICAgICByaWdodDowO1xyXG4gICAgICAgIGJvdHRvbTowO1xyXG4gICAgICAgIGRpc3BsYXk6YmxvY2s7XHJcbiAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlciB7XHJcbiAgICAgICAgdG9wOi01MHB4O1xyXG4gICAgICB9XHJcbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XHJcbiAgICAgICAgdG9wOjA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWxlYXZlIHtcclxuICAgICAgICB0b3A6MDtcclxuICAgICAgfVxyXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xyXG4gICAgICAgIHRvcDo1MHB4O1xyXG4gICAgICB9XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciB0ZW1wbGF0ZVNlbGVjdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RlbXBsYXRlJykpO1xyXG4gICAgICB2YXIgaW5jbHVkZUVsZW0gPSBlbGVtZW50KGJ5LmNzcygnW25nLWluY2x1ZGVdJykpO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBsb2FkIHRlbXBsYXRlMS5odG1sJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZXhwZWN0KGluY2x1ZGVFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0ZW1wbGF0ZTEuaHRtbC8pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZTIuaHRtbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChicm93c2VyLnBhcmFtcy5icm93c2VyID09ICdmaXJlZm94Jykge1xyXG4gICAgICAgICAgLy8gRmlyZWZveCBjYW4ndCBoYW5kbGUgdXNpbmcgc2VsZWN0c1xyXG4gICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzQ4MFxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5jbGljaygpO1xyXG4gICAgICAgIHRlbXBsYXRlU2VsZWN0LmFsbChieS5jc3MoJ29wdGlvbicpKS5nZXQoMikuY2xpY2soKTtcclxuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IG9mIHRlbXBsYXRlMi5odG1sLyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgdG8gYmxhbmsnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PSAnZmlyZWZveCcpIHtcclxuICAgICAgICAgIC8vIEZpcmVmb3ggY2FuJ3QgaGFuZGxlIHVzaW5nIHNlbGVjdHNcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcclxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDApLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KGluY2x1ZGVFbGVtLmlzUHJlc2VudCgpKS50b0JlKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGV2ZW50XHJcbiAqIEBuYW1lIG5nSW5jbHVkZSMkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWRcclxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBzY29wZSBuZ0luY2x1ZGUgd2FzIGRlY2xhcmVkIGluXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFbWl0dGVkIGV2ZXJ5IHRpbWUgdGhlIG5nSW5jbHVkZSBjb250ZW50IGlzIHJlcXVlc3RlZC5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gc3JjIFVSTCBvZiBjb250ZW50IHRvIGxvYWQuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZXZlbnRcclxuICogQG5hbWUgbmdJbmNsdWRlIyRpbmNsdWRlQ29udGVudExvYWRlZFxyXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIGN1cnJlbnQgbmdJbmNsdWRlIHNjb3BlXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFbWl0dGVkIGV2ZXJ5IHRpbWUgdGhlIG5nSW5jbHVkZSBjb250ZW50IGlzIHJlbG9hZGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgVVJMIG9mIGNvbnRlbnQgdG8gbG9hZC5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBldmVudFxyXG4gKiBAbmFtZSBuZ0luY2x1ZGUjJGluY2x1ZGVDb250ZW50RXJyb3JcclxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBzY29wZSBuZ0luY2x1ZGUgd2FzIGRlY2xhcmVkIGluXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFbWl0dGVkIHdoZW4gYSB0ZW1wbGF0ZSBIVFRQIHJlcXVlc3QgeWllbGRzIGFuIGVycm9ub3VzIHJlc3BvbnNlIChzdGF0dXMgPCAyMDAgfHwgc3RhdHVzID4gMjk5KVxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgVVJMIG9mIGNvbnRlbnQgdG8gbG9hZC5cclxuICovXHJcbnZhciBuZ0luY2x1ZGVEaXJlY3RpdmUgPSBbJyR0ZW1wbGF0ZVJlcXVlc3QnLCAnJGFuY2hvclNjcm9sbCcsICckYW5pbWF0ZScsICckc2NlJyxcclxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oJHRlbXBsYXRlUmVxdWVzdCwgICAkYW5jaG9yU2Nyb2xsLCAgICRhbmltYXRlLCAgICRzY2UpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFQ0EnLFxyXG4gICAgcHJpb3JpdHk6IDQwMCxcclxuICAgIHRlcm1pbmFsOiB0cnVlLFxyXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxyXG4gICAgY29udHJvbGxlcjogYW5ndWxhci5ub29wLFxyXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xyXG4gICAgICB2YXIgc3JjRXhwID0gYXR0ci5uZ0luY2x1ZGUgfHwgYXR0ci5zcmMsXHJcbiAgICAgICAgICBvbmxvYWRFeHAgPSBhdHRyLm9ubG9hZCB8fCAnJyxcclxuICAgICAgICAgIGF1dG9TY3JvbGxFeHAgPSBhdHRyLmF1dG9zY3JvbGw7XHJcblxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsICRlbGVtZW50LCAkYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcclxuICAgICAgICB2YXIgY2hhbmdlQ291bnRlciA9IDAsXHJcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZSxcclxuICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50LFxyXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudDtcclxuXHJcbiAgICAgICAgdmFyIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKHByZXZpb3VzRWxlbWVudCkge1xyXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihjdXJyZW50U2NvcGUpIHtcclxuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRkZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZSA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihjdXJyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gY3VycmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzY29wZS4kd2F0Y2goJHNjZS5wYXJzZUFzUmVzb3VyY2VVcmwoc3JjRXhwKSwgZnVuY3Rpb24gbmdJbmNsdWRlV2F0Y2hBY3Rpb24oc3JjKSB7XHJcbiAgICAgICAgICB2YXIgYWZ0ZXJBbmltYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChhdXRvU2Nyb2xsRXhwKSAmJiAoIWF1dG9TY3JvbGxFeHAgfHwgc2NvcGUuJGV2YWwoYXV0b1Njcm9sbEV4cCkpKSB7XHJcbiAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdmFyIHRoaXNDaGFuZ2VJZCA9ICsrY2hhbmdlQ291bnRlcjtcclxuXHJcbiAgICAgICAgICBpZiAoc3JjKSB7XHJcbiAgICAgICAgICAgIC8vc2V0IHRoZSAybmQgcGFyYW0gdG8gdHJ1ZSB0byBpZ25vcmUgdGhlIHRlbXBsYXRlIHJlcXVlc3QgZXJyb3Igc28gdGhhdCB0aGUgaW5uZXJcclxuICAgICAgICAgICAgLy9jb250ZW50cyBhbmQgc2NvcGUgY2FuIGJlIGNsZWFuZWQgdXAuXHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZVJlcXVlc3Qoc3JjLCB0cnVlKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXNDaGFuZ2VJZCAhPT0gY2hhbmdlQ291bnRlcikgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIHZhciBuZXdTY29wZSA9IHNjb3BlLiRuZXcoKTtcclxuICAgICAgICAgICAgICBjdHJsLnRlbXBsYXRlID0gcmVzcG9uc2U7XHJcblxyXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFRoaXMgd2lsbCBhbHNvIGxpbmsgYWxsIGNoaWxkcmVuIG9mIG5nLWluY2x1ZGUgdGhhdCB3ZXJlIGNvbnRhaW5lZCBpbiB0aGUgb3JpZ2luYWxcclxuICAgICAgICAgICAgICAvLyBodG1sLiBJZiB0aGF0IGNvbnRlbnQgY29udGFpbnMgY29udHJvbGxlcnMsIC4uLiB0aGV5IGNvdWxkIHBvbGx1dGUvY2hhbmdlIHRoZSBzY29wZS5cclxuICAgICAgICAgICAgICAvLyBIb3dldmVyLCB1c2luZyBuZy1pbmNsdWRlIG9uIGFuIGVsZW1lbnQgd2l0aCBhZGRpdGlvbmFsIGNvbnRlbnQgZG9lcyBub3QgbWFrZSBzZW5zZS4uLlxyXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbid0IHJlbW92ZSB0aGVtIGluIHRoZSBjbG9uZUF0dGNoRm4gb2YgJHRyYW5zY2x1ZGUgYXMgdGhhdFxyXG4gICAgICAgICAgICAgIC8vIGZ1bmN0aW9uIGlzIGNhbGxlZCBiZWZvcmUgbGlua2luZyB0aGUgY29udGVudCwgd2hpY2ggd291bGQgYXBwbHkgY2hpbGRcclxuICAgICAgICAgICAgICAvLyBkaXJlY3RpdmVzIHRvIG5vbiBleGlzdGluZyBlbGVtZW50cy5cclxuICAgICAgICAgICAgICB2YXIgY2xvbmUgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQoKTtcclxuICAgICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNsb25lLCBudWxsLCAkZWxlbWVudCkudGhlbihhZnRlckFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIGN1cnJlbnRTY29wZSA9IG5ld1Njb3BlO1xyXG4gICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY2xvbmU7XHJcblxyXG4gICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50TG9hZGVkJywgc3JjKTtcclxuICAgICAgICAgICAgICBzY29wZS4kZXZhbChvbmxvYWRFeHApO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBpZiAodGhpc0NoYW5nZUlkID09PSBjaGFuZ2VDb3VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50RXJyb3InLCBzcmMpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWQnLCBzcmMpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO1xyXG4gICAgICAgICAgICBjdHJsLnRlbXBsYXRlID0gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbi8vIFRoaXMgZGlyZWN0aXZlIGlzIGNhbGxlZCBkdXJpbmcgdGhlICR0cmFuc2NsdWRlIGNhbGwgb2YgdGhlIGZpcnN0IGBuZ0luY2x1ZGVgIGRpcmVjdGl2ZS5cclxuLy8gSXQgd2lsbCByZXBsYWNlIGFuZCBjb21waWxlIHRoZSBjb250ZW50IG9mIHRoZSBlbGVtZW50IHdpdGggdGhlIGxvYWRlZCB0ZW1wbGF0ZS5cclxuLy8gV2UgbmVlZCB0aGlzIGRpcmVjdGl2ZSBzbyB0aGF0IHRoZSBlbGVtZW50IGNvbnRlbnQgaXMgYWxyZWFkeSBmaWxsZWQgd2hlblxyXG4vLyB0aGUgbGluayBmdW5jdGlvbiBvZiBhbm90aGVyIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50IGFzIG5nSW5jbHVkZVxyXG4vLyBpcyBjYWxsZWQuXHJcbnZhciBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLFxyXG4gIGZ1bmN0aW9uKCRjb21waWxlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VDQScsXHJcbiAgICAgIHByaW9yaXR5OiAtNDAwLFxyXG4gICAgICByZXF1aXJlOiAnbmdJbmNsdWRlJyxcclxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsICRlbGVtZW50LCAkYXR0ciwgY3RybCkge1xyXG4gICAgICAgIGlmICgvU1ZHLy50ZXN0KCRlbGVtZW50WzBdLnRvU3RyaW5nKCkpKSB7XHJcbiAgICAgICAgICAvLyBXZWJLaXQ6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzU2OTggLS0tIFNWRyBlbGVtZW50cyBkbyBub3RcclxuICAgICAgICAgIC8vIHN1cHBvcnQgaW5uZXJIVE1MLCBzbyBkZXRlY3QgdGhpcyBoZXJlIGFuZCB0cnkgdG8gZ2VuZXJhdGUgdGhlIGNvbnRlbnRzXHJcbiAgICAgICAgICAvLyBzcGVjaWFsbHkuXHJcbiAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpO1xyXG4gICAgICAgICAgJGNvbXBpbGUoanFMaXRlQnVpbGRGcmFnbWVudChjdHJsLnRlbXBsYXRlLCBkb2N1bWVudCkuY2hpbGROb2Rlcykoc2NvcGUsXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gbmFtZXNwYWNlQWRhcHRlZENsb25lKGNsb25lKSB7XHJcbiAgICAgICAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XHJcbiAgICAgICAgICB9LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgJGVsZW1lbnQpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGVsZW1lbnQuaHRtbChjdHJsLnRlbXBsYXRlKTtcclxuICAgICAgICAkY29tcGlsZSgkZWxlbWVudC5jb250ZW50cygpKShzY29wZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfV07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0luaXRcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nSW5pdGAgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gZXZhbHVhdGUgYW4gZXhwcmVzc2lvbiBpbiB0aGVcclxuICogY3VycmVudCBzY29wZS5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWVycm9yXCI+XHJcbiAqIFRoZSBvbmx5IGFwcHJvcHJpYXRlIHVzZSBvZiBgbmdJbml0YCBpcyBmb3IgYWxpYXNpbmcgc3BlY2lhbCBwcm9wZXJ0aWVzIG9mXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgYG5nUmVwZWF0YH0sIGFzIHNlZW4gaW4gdGhlIGRlbW8gYmVsb3cuIEJlc2lkZXMgdGhpcyBjYXNlLCB5b3VcclxuICogc2hvdWxkIHVzZSB7QGxpbmsgZ3VpZGUvY29udHJvbGxlciBjb250cm9sbGVyc30gcmF0aGVyIHRoYW4gYG5nSW5pdGBcclxuICogdG8gaW5pdGlhbGl6ZSB2YWx1ZXMgb24gYSBzY29wZS5cclxuICogPC9kaXY+XHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqTm90ZSoqOiBJZiB5b3UgaGF2ZSBhc3NpZ25tZW50IGluIGBuZ0luaXRgIGFsb25nIHdpdGgge0BsaW5rIG5nLiRmaWx0ZXIgYCRmaWx0ZXJgfSwgbWFrZVxyXG4gKiBzdXJlIHlvdSBoYXZlIHBhcmVudGhlc2lzIGZvciBjb3JyZWN0IHByZWNlZGVuY2U6XHJcbiAqIDxwcmUgY2xhc3M9XCJwcmV0dHlwcmludFwiPlxyXG4gKiAgIDxkaXYgbmctaW5pdD1cInRlc3QxID0gKGRhdGEgfCBvcmRlckJ5OiduYW1lJylcIj48L2Rpdj5cclxuICogPC9wcmU+XHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBAcHJpb3JpdHkgNDUwXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSW5pdCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJpbml0RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgIDxzY3JpcHQ+XHJcbiAgICAgYW5ndWxhci5tb2R1bGUoJ2luaXRFeGFtcGxlJywgW10pXHJcbiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAkc2NvcGUubGlzdCA9IFtbJ2EnLCAnYiddLCBbJ2MnLCAnZCddXTtcclxuICAgICAgIH1dKTtcclxuICAgPC9zY3JpcHQ+XHJcbiAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgPGRpdiBuZy1yZXBlYXQ9XCJpbm5lckxpc3QgaW4gbGlzdFwiIG5nLWluaXQ9XCJvdXRlckluZGV4ID0gJGluZGV4XCI+XHJcbiAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInZhbHVlIGluIGlubmVyTGlzdFwiIG5nLWluaXQ9XCJpbm5lckluZGV4ID0gJGluZGV4XCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImV4YW1wbGUtaW5pdFwiPmxpc3RbIHt7b3V0ZXJJbmRleH19IF1bIHt7aW5uZXJJbmRleH19IF0gPSB7e3ZhbHVlfX07PC9zcGFuPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9kaXY+XHJcbiAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGFsaWFzIGluZGV4IHBvc2l0aW9ucycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgZWxlbWVudHMgPSBlbGVtZW50LmFsbChieS5jc3MoJy5leGFtcGxlLWluaXQnKSk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMCkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAwIF1bIDAgXSA9IGE7Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMSkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAwIF1bIDEgXSA9IGI7Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMikuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAxIF1bIDAgXSA9IGM7Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMykuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAxIF1bIDEgXSA9IGQ7Jyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ0luaXREaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XHJcbiAgcHJpb3JpdHk6IDQ1MCxcclxuICBjb21waWxlOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHByZTogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgc2NvcGUuJGV2YWwoYXR0cnMubmdJbml0KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdOb25CaW5kYWJsZVxyXG4gKiBAcmVzdHJpY3QgQUNcclxuICogQHByaW9yaXR5IDEwMDBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdOb25CaW5kYWJsZWAgZGlyZWN0aXZlIHRlbGxzIEFuZ3VsYXIgbm90IHRvIGNvbXBpbGUgb3IgYmluZCB0aGUgY29udGVudHMgb2YgdGhlIGN1cnJlbnRcclxuICogRE9NIGVsZW1lbnQuIFRoaXMgaXMgdXNlZnVsIGlmIHRoZSBlbGVtZW50IGNvbnRhaW5zIHdoYXQgYXBwZWFycyB0byBiZSBBbmd1bGFyIGRpcmVjdGl2ZXMgYW5kXHJcbiAqIGJpbmRpbmdzIGJ1dCB3aGljaCBzaG91bGQgYmUgaWdub3JlZCBieSBBbmd1bGFyLiBUaGlzIGNvdWxkIGJlIHRoZSBjYXNlIGlmIHlvdSBoYXZlIGEgc2l0ZSB0aGF0XHJcbiAqIGRpc3BsYXlzIHNuaXBwZXRzIG9mIGNvZGUsIGZvciBpbnN0YW5jZS5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEluIHRoaXMgZXhhbXBsZSB0aGVyZSBhcmUgdHdvIGxvY2F0aW9ucyB3aGVyZSBhIHNpbXBsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmcgKGB7e319YCkgaXMgcHJlc2VudCxcclxuICogYnV0IHRoZSBvbmUgd3JhcHBlZCBpbiBgbmdOb25CaW5kYWJsZWAgaXMgbGVmdCBhbG9uZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxkaXY+Tm9ybWFsOiB7ezEgKyAyfX08L2Rpdj5cclxuICAgICAgICA8ZGl2IG5nLW5vbi1iaW5kYWJsZT5JZ25vcmVkOiB7ezEgKyAyfX08L2Rpdj5cclxuICAgICAgPC9maWxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLW5vbi1iaW5kYWJsZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCcxICsgMicpKS5nZXRUZXh0KCkpLnRvQ29udGFpbignMycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCdkaXYnKSkubGFzdCgpLmdldFRleHQoKSkudG9NYXRjaCgvMSBcXCsgMi8pO1xyXG4gICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ05vbkJpbmRhYmxlRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoeyB0ZXJtaW5hbDogdHJ1ZSwgcHJpb3JpdHk6IDEwMDAgfSk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1BsdXJhbGl6ZVxyXG4gKiBAcmVzdHJpY3QgRUFcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIGBuZ1BsdXJhbGl6ZWAgaXMgYSBkaXJlY3RpdmUgdGhhdCBkaXNwbGF5cyBtZXNzYWdlcyBhY2NvcmRpbmcgdG8gZW4tVVMgbG9jYWxpemF0aW9uIHJ1bGVzLlxyXG4gKiBUaGVzZSBydWxlcyBhcmUgYnVuZGxlZCB3aXRoIGFuZ3VsYXIuanMsIGJ1dCBjYW4gYmUgb3ZlcnJpZGRlblxyXG4gKiAoc2VlIHtAbGluayBndWlkZS9pMThuIEFuZ3VsYXIgaTE4bn0gZGV2IGd1aWRlKS4gWW91IGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZSBkaXJlY3RpdmVcclxuICogYnkgc3BlY2lmeWluZyB0aGUgbWFwcGluZ3MgYmV0d2VlblxyXG4gKiBbcGx1cmFsIGNhdGVnb3JpZXNdKGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcy9jbGRyLXRtcC90cnVuay9kaWZmL3N1cHBsZW1lbnRhbC9sYW5ndWFnZV9wbHVyYWxfcnVsZXMuaHRtbClcclxuICogYW5kIHRoZSBzdHJpbmdzIHRvIGJlIGRpc3BsYXllZC5cclxuICpcclxuICogIyBQbHVyYWwgY2F0ZWdvcmllcyBhbmQgZXhwbGljaXQgbnVtYmVyIHJ1bGVzXHJcbiAqIFRoZXJlIGFyZSB0d29cclxuICogW3BsdXJhbCBjYXRlZ29yaWVzXShodHRwOi8vdW5pY29kZS5vcmcvcmVwb3MvY2xkci10bXAvdHJ1bmsvZGlmZi9zdXBwbGVtZW50YWwvbGFuZ3VhZ2VfcGx1cmFsX3J1bGVzLmh0bWwpXHJcbiAqIGluIEFuZ3VsYXIncyBkZWZhdWx0IGVuLVVTIGxvY2FsZTogXCJvbmVcIiBhbmQgXCJvdGhlclwiLlxyXG4gKlxyXG4gKiBXaGlsZSBhIHBsdXJhbCBjYXRlZ29yeSBtYXkgbWF0Y2ggbWFueSBudW1iZXJzIChmb3IgZXhhbXBsZSwgaW4gZW4tVVMgbG9jYWxlLCBcIm90aGVyXCIgY2FuIG1hdGNoXHJcbiAqIGFueSBudW1iZXIgdGhhdCBpcyBub3QgMSksIGFuIGV4cGxpY2l0IG51bWJlciBydWxlIGNhbiBvbmx5IG1hdGNoIG9uZSBudW1iZXIuIEZvciBleGFtcGxlLCB0aGVcclxuICogZXhwbGljaXQgbnVtYmVyIHJ1bGUgZm9yIFwiM1wiIG1hdGNoZXMgdGhlIG51bWJlciAzLiBUaGVyZSBhcmUgZXhhbXBsZXMgb2YgcGx1cmFsIGNhdGVnb3JpZXNcclxuICogYW5kIGV4cGxpY2l0IG51bWJlciBydWxlcyB0aHJvdWdob3V0IHRoZSByZXN0IG9mIHRoaXMgZG9jdW1lbnRhdGlvbi5cclxuICpcclxuICogIyBDb25maWd1cmluZyBuZ1BsdXJhbGl6ZVxyXG4gKiBZb3UgY29uZmlndXJlIG5nUGx1cmFsaXplIGJ5IHByb3ZpZGluZyAyIGF0dHJpYnV0ZXM6IGBjb3VudGAgYW5kIGB3aGVuYC5cclxuICogWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gb3B0aW9uYWwgYXR0cmlidXRlLCBgb2Zmc2V0YC5cclxuICpcclxuICogVGhlIHZhbHVlIG9mIHRoZSBgY291bnRgIGF0dHJpYnV0ZSBjYW4gYmUgZWl0aGVyIGEgc3RyaW5nIG9yIGFuIHtAbGluayBndWlkZS9leHByZXNzaW9uXHJcbiAqIEFuZ3VsYXIgZXhwcmVzc2lvbn07IHRoZXNlIGFyZSBldmFsdWF0ZWQgb24gdGhlIGN1cnJlbnQgc2NvcGUgZm9yIGl0cyBib3VuZCB2YWx1ZS5cclxuICpcclxuICogVGhlIGB3aGVuYCBhdHRyaWJ1dGUgc3BlY2lmaWVzIHRoZSBtYXBwaW5ncyBiZXR3ZWVuIHBsdXJhbCBjYXRlZ29yaWVzIGFuZCB0aGUgYWN0dWFsXHJcbiAqIHN0cmluZyB0byBiZSBkaXNwbGF5ZWQuIFRoZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIHNob3VsZCBiZSBhIEpTT04gb2JqZWN0LlxyXG4gKlxyXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZTpcclxuICpcclxuICogYGBgaHRtbFxyXG4gKiA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIlxyXG4gICAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcclxuICogICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICcxIHBlcnNvbiBpcyB2aWV3aW5nLicsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7fSBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cclxuICogPC9uZy1wbHVyYWxpemU+XHJcbiAqYGBgXHJcbiAqXHJcbiAqIEluIHRoZSBleGFtcGxlLCBgXCIwOiBOb2JvZHkgaXMgdmlld2luZy5cImAgaXMgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUuIElmIHlvdSBkaWQgbm90XHJcbiAqIHNwZWNpZnkgdGhpcyBydWxlLCAwIHdvdWxkIGJlIG1hdGNoZWQgdG8gdGhlIFwib3RoZXJcIiBjYXRlZ29yeSBhbmQgXCIwIHBlb3BsZSBhcmUgdmlld2luZ1wiXHJcbiAqIHdvdWxkIGJlIHNob3duIGluc3RlYWQgb2YgXCJOb2JvZHkgaXMgdmlld2luZ1wiLiBZb3UgY2FuIHNwZWNpZnkgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUgZm9yXHJcbiAqIG90aGVyIG51bWJlcnMsIGZvciBleGFtcGxlIDEyLCBzbyB0aGF0IGluc3RlYWQgb2Ygc2hvd2luZyBcIjEyIHBlb3BsZSBhcmUgdmlld2luZ1wiLCB5b3UgY2FuXHJcbiAqIHNob3cgXCJhIGRvemVuIHBlb3BsZSBhcmUgdmlld2luZ1wiLlxyXG4gKlxyXG4gKiBZb3UgY2FuIHVzZSBhIHNldCBvZiBjbG9zZWQgYnJhY2VzIChge31gKSBhcyBhIHBsYWNlaG9sZGVyIGZvciB0aGUgbnVtYmVyIHRoYXQgeW91IHdhbnQgc3Vic3RpdHV0ZWRcclxuICogaW50byBwbHVyYWxpemVkIHN0cmluZ3MuIEluIHRoZSBwcmV2aW91cyBleGFtcGxlLCBBbmd1bGFyIHdpbGwgcmVwbGFjZSBge31gIHdpdGhcclxuICogPHNwYW4gbmctbm9uLWJpbmRhYmxlPmB7e3BlcnNvbkNvdW50fX1gPC9zcGFuPi4gVGhlIGNsb3NlZCBicmFjZXMgYHt9YCBpcyBhIHBsYWNlaG9sZGVyXHJcbiAqIGZvciA8c3BhbiBuZy1ub24tYmluZGFibGU+e3tudW1iZXJFeHByZXNzaW9ufX08L3NwYW4+LlxyXG4gKlxyXG4gKiAjIENvbmZpZ3VyaW5nIG5nUGx1cmFsaXplIHdpdGggb2Zmc2V0XHJcbiAqIFRoZSBgb2Zmc2V0YCBhdHRyaWJ1dGUgYWxsb3dzIGZ1cnRoZXIgY3VzdG9taXphdGlvbiBvZiBwbHVyYWxpemVkIHRleHQsIHdoaWNoIGNhbiByZXN1bHQgaW5cclxuICogYSBiZXR0ZXIgdXNlciBleHBlcmllbmNlLiBGb3IgZXhhbXBsZSwgaW5zdGVhZCBvZiB0aGUgbWVzc2FnZSBcIjQgcGVvcGxlIGFyZSB2aWV3aW5nIHRoaXMgZG9jdW1lbnRcIixcclxuICogeW91IG1pZ2h0IGRpc3BsYXkgXCJKb2huLCBLYXRlIGFuZCAyIG90aGVycyBhcmUgdmlld2luZyB0aGlzIGRvY3VtZW50XCIuXHJcbiAqIFRoZSBvZmZzZXQgYXR0cmlidXRlIGFsbG93cyB5b3UgdG8gb2Zmc2V0IGEgbnVtYmVyIGJ5IGFueSBkZXNpcmVkIHZhbHVlLlxyXG4gKiBMZXQncyB0YWtlIGEgbG9vayBhdCBhbiBleGFtcGxlOlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiIG9mZnNldD0yXHJcbiAqICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAnMSc6ICd7e3BlcnNvbjF9fSBpcyB2aWV3aW5nLicsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICcyJzogJ3t7cGVyc29uMX19IGFuZCB7e3BlcnNvbjJ9fSBhcmUgdmlld2luZy4nLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZy4nLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCB7fSBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cclxuICogPC9uZy1wbHVyYWxpemU+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBOb3RpY2UgdGhhdCB3ZSBhcmUgc3RpbGwgdXNpbmcgdHdvIHBsdXJhbCBjYXRlZ29yaWVzKG9uZSwgb3RoZXIpLCBidXQgd2UgYWRkZWRcclxuICogdGhyZWUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIDAsIDEgYW5kIDIuXHJcbiAqIFdoZW4gb25lIHBlcnNvbiwgcGVyaGFwcyBKb2huLCB2aWV3cyB0aGUgZG9jdW1lbnQsIFwiSm9obiBpcyB2aWV3aW5nXCIgd2lsbCBiZSBzaG93bi5cclxuICogV2hlbiB0aHJlZSBwZW9wbGUgdmlldyB0aGUgZG9jdW1lbnQsIG5vIGV4cGxpY2l0IG51bWJlciBydWxlIGlzIGZvdW5kLCBzb1xyXG4gKiBhbiBvZmZzZXQgb2YgMiBpcyB0YWtlbiBvZmYgMywgYW5kIEFuZ3VsYXIgdXNlcyAxIHRvIGRlY2lkZSB0aGUgcGx1cmFsIGNhdGVnb3J5LlxyXG4gKiBJbiB0aGlzIGNhc2UsIHBsdXJhbCBjYXRlZ29yeSAnb25lJyBpcyBtYXRjaGVkIGFuZCBcIkpvaG4sIE1hcnkgYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmdcIlxyXG4gKiBpcyBzaG93bi5cclxuICpcclxuICogTm90ZSB0aGF0IHdoZW4geW91IHNwZWNpZnkgb2Zmc2V0cywgeW91IG11c3QgcHJvdmlkZSBleHBsaWNpdCBudW1iZXIgcnVsZXMgZm9yXHJcbiAqIG51bWJlcnMgZnJvbSAwIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIG9mZnNldC4gSWYgeW91IHVzZSBhbiBvZmZzZXQgb2YgMywgZm9yIGV4YW1wbGUsXHJcbiAqIHlvdSBtdXN0IHByb3ZpZGUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIGZvciAwLCAxLCAyIGFuZCAzLiBZb3UgbXVzdCBhbHNvIHByb3ZpZGUgcGx1cmFsIHN0cmluZ3MgZm9yXHJcbiAqIHBsdXJhbCBjYXRlZ29yaWVzIFwib25lXCIgYW5kIFwib3RoZXJcIi5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd8ZXhwcmVzc2lvbn0gY291bnQgVGhlIHZhcmlhYmxlIHRvIGJlIGJvdW5kIHRvLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gd2hlbiBUaGUgbWFwcGluZyBiZXR3ZWVuIHBsdXJhbCBjYXRlZ29yeSB0byBpdHMgY29ycmVzcG9uZGluZyBzdHJpbmdzLlxyXG4gKiBAcGFyYW0ge251bWJlcj19IG9mZnNldCBPZmZzZXQgdG8gZGVkdWN0IGZyb20gdGhlIHRvdGFsIG51bWJlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlIG1vZHVsZT1cInBsdXJhbGl6ZUV4YW1wbGVcIj5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3BsdXJhbGl6ZUV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUucGVyc29uMSA9ICdJZ29yJztcclxuICAgICAgICAgICAgICAkc2NvcGUucGVyc29uMiA9ICdNaXNrbyc7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBlcnNvbkNvdW50ID0gMTtcclxuICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICBQZXJzb24gMTo8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInBlcnNvbjFcIiB2YWx1ZT1cIklnb3JcIiAvPjxici8+XHJcbiAgICAgICAgICBQZXJzb24gMjo8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInBlcnNvbjJcIiB2YWx1ZT1cIk1pc2tvXCIgLz48YnIvPlxyXG4gICAgICAgICAgTnVtYmVyIG9mIFBlb3BsZTo8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInBlcnNvbkNvdW50XCIgdmFsdWU9XCIxXCIgLz48YnIvPlxyXG5cclxuICAgICAgICAgIDwhLS0tIEV4YW1wbGUgd2l0aCBzaW1wbGUgcGx1cmFsaXphdGlvbiBydWxlcyBmb3IgZW4gbG9jYWxlIC0tLT5cclxuICAgICAgICAgIFdpdGhvdXQgT2Zmc2V0OlxyXG4gICAgICAgICAgPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICcxIHBlcnNvbiBpcyB2aWV3aW5nLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne30gcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XHJcbiAgICAgICAgICA8L25nLXBsdXJhbGl6ZT48YnI+XHJcblxyXG4gICAgICAgICAgPCEtLS0gRXhhbXBsZSB3aXRoIG9mZnNldCAtLS0+XHJcbiAgICAgICAgICBXaXRoIE9mZnNldCgyKTpcclxuICAgICAgICAgIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiIG9mZnNldD0yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxJzogJ3t7cGVyc29uMX19IGlzIHZpZXdpbmcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcyJzogJ3t7cGVyc29uMX19IGFuZCB7e3BlcnNvbjJ9fSBhcmUgdmlld2luZy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIHt9IG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxyXG4gICAgICAgICAgPC9uZy1wbHVyYWxpemU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIGl0KCdzaG91bGQgc2hvdyBjb3JyZWN0IHBsdXJhbGl6ZWQgc3RyaW5nJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgd2l0aG91dE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgwKTtcclxuICAgICAgICAgIHZhciB3aXRoT2Zmc2V0ID0gZWxlbWVudC5hbGwoYnkuY3NzKCduZy1wbHVyYWxpemUnKSkuZ2V0KDEpO1xyXG4gICAgICAgICAgdmFyIGNvdW50SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb25Db3VudCcpKTtcclxuXHJcbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzEgcGVyc29uIGlzIHZpZXdpbmcuJyk7XHJcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IgaXMgdmlld2luZy4nKTtcclxuXHJcbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCcwJyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdOb2JvZHkgaXMgdmlld2luZy4nKTtcclxuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnTm9ib2R5IGlzIHZpZXdpbmcuJyk7XHJcblxyXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnMicpO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnMiBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XHJcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IgYW5kIE1pc2tvIGFyZSB2aWV3aW5nLicpO1xyXG5cclxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzMnKTtcclxuXHJcbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzMgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xyXG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yLCBNaXNrbyBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZy4nKTtcclxuXHJcbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCc0Jyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCc0IHBlb3BsZSBhcmUgdmlld2luZy4nKTtcclxuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciwgTWlza28gYW5kIDIgb3RoZXIgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGl0KCdzaG91bGQgc2hvdyBkYXRhLWJvdW5kIG5hbWVzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgd2l0aE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgxKTtcclxuICAgICAgICAgIHZhciBwZXJzb25Db3VudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbkNvdW50JykpO1xyXG4gICAgICAgICAgdmFyIHBlcnNvbjEgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb24xJykpO1xyXG4gICAgICAgICAgdmFyIHBlcnNvbjIgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb24yJykpO1xyXG4gICAgICAgICAgcGVyc29uQ291bnQuY2xlYXIoKTtcclxuICAgICAgICAgIHBlcnNvbkNvdW50LnNlbmRLZXlzKCc0Jyk7XHJcbiAgICAgICAgICBwZXJzb24xLmNsZWFyKCk7XHJcbiAgICAgICAgICBwZXJzb24xLnNlbmRLZXlzKCdEaScpO1xyXG4gICAgICAgICAgcGVyc29uMi5jbGVhcigpO1xyXG4gICAgICAgICAgcGVyc29uMi5zZW5kS2V5cygnVm9qdGEnKTtcclxuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnRGksIFZvanRhIGFuZCAyIG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nUGx1cmFsaXplRGlyZWN0aXZlID0gWyckbG9jYWxlJywgJyRpbnRlcnBvbGF0ZScsIGZ1bmN0aW9uKCRsb2NhbGUsICRpbnRlcnBvbGF0ZSkge1xyXG4gIHZhciBCUkFDRSA9IC97fS9nO1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0VBJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgIHZhciBudW1iZXJFeHAgPSBhdHRyLmNvdW50LFxyXG4gICAgICAgICAgd2hlbkV4cCA9IGF0dHIuJGF0dHIud2hlbiAmJiBlbGVtZW50LmF0dHIoYXR0ci4kYXR0ci53aGVuKSwgLy8gd2UgaGF2ZSB7e319IGluIGF0dHJzXHJcbiAgICAgICAgICBvZmZzZXQgPSBhdHRyLm9mZnNldCB8fCAwLFxyXG4gICAgICAgICAgd2hlbnMgPSBzY29wZS4kZXZhbCh3aGVuRXhwKSB8fCB7fSxcclxuICAgICAgICAgIHdoZW5zRXhwRm5zID0ge30sXHJcbiAgICAgICAgICBzdGFydFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLFxyXG4gICAgICAgICAgZW5kU3ltYm9sID0gJGludGVycG9sYXRlLmVuZFN5bWJvbCgpLFxyXG4gICAgICAgICAgaXNXaGVuID0gL153aGVuKE1pbnVzKT8oLispJC87XHJcblxyXG4gICAgICBmb3JFYWNoKGF0dHIsIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGF0dHJpYnV0ZU5hbWUpIHtcclxuICAgICAgICBpZiAoaXNXaGVuLnRlc3QoYXR0cmlidXRlTmFtZSkpIHtcclxuICAgICAgICAgIHdoZW5zW2xvd2VyY2FzZShhdHRyaWJ1dGVOYW1lLnJlcGxhY2UoJ3doZW4nLCAnJykucmVwbGFjZSgnTWludXMnLCAnLScpKV0gPVxyXG4gICAgICAgICAgICBlbGVtZW50LmF0dHIoYXR0ci4kYXR0clthdHRyaWJ1dGVOYW1lXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgZm9yRWFjaCh3aGVucywgZnVuY3Rpb24oZXhwcmVzc2lvbiwga2V5KSB7XHJcbiAgICAgICAgd2hlbnNFeHBGbnNba2V5XSA9XHJcbiAgICAgICAgICAkaW50ZXJwb2xhdGUoZXhwcmVzc2lvbi5yZXBsYWNlKEJSQUNFLCBzdGFydFN5bWJvbCArIG51bWJlckV4cCArICctJyArXHJcbiAgICAgICAgICAgIG9mZnNldCArIGVuZFN5bWJvbCkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBuZ1BsdXJhbGl6ZVdhdGNoKCkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlRmxvYXQoc2NvcGUuJGV2YWwobnVtYmVyRXhwKSk7XHJcblxyXG4gICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XHJcbiAgICAgICAgICAvL2lmIGV4cGxpY2l0IG51bWJlciBydWxlIHN1Y2ggYXMgMSwgMiwgMy4uLiBpcyBkZWZpbmVkLCBqdXN0IHVzZSBpdC4gT3RoZXJ3aXNlLFxyXG4gICAgICAgICAgLy9jaGVjayBpdCBhZ2FpbnN0IHBsdXJhbGl6YXRpb24gcnVsZXMgaW4gJGxvY2FsZSBzZXJ2aWNlXHJcbiAgICAgICAgICBpZiAoISh2YWx1ZSBpbiB3aGVucykpIHZhbHVlID0gJGxvY2FsZS5wbHVyYWxDYXQodmFsdWUgLSBvZmZzZXQpO1xyXG4gICAgICAgICAgIHJldHVybiB3aGVuc0V4cEZuc1t2YWx1ZV0oc2NvcGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBmdW5jdGlvbiBuZ1BsdXJhbGl6ZVdhdGNoQWN0aW9uKG5ld1ZhbCkge1xyXG4gICAgICAgIGVsZW1lbnQudGV4dChuZXdWYWwpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nUmVwZWF0XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nUmVwZWF0YCBkaXJlY3RpdmUgaW5zdGFudGlhdGVzIGEgdGVtcGxhdGUgb25jZSBwZXIgaXRlbSBmcm9tIGEgY29sbGVjdGlvbi4gRWFjaCB0ZW1wbGF0ZVxyXG4gKiBpbnN0YW5jZSBnZXRzIGl0cyBvd24gc2NvcGUsIHdoZXJlIHRoZSBnaXZlbiBsb29wIHZhcmlhYmxlIGlzIHNldCB0byB0aGUgY3VycmVudCBjb2xsZWN0aW9uIGl0ZW0sXHJcbiAqIGFuZCBgJGluZGV4YCBpcyBzZXQgdG8gdGhlIGl0ZW0gaW5kZXggb3Iga2V5LlxyXG4gKlxyXG4gKiBTcGVjaWFsIHByb3BlcnRpZXMgYXJlIGV4cG9zZWQgb24gdGhlIGxvY2FsIHNjb3BlIG9mIGVhY2ggdGVtcGxhdGUgaW5zdGFuY2UsIGluY2x1ZGluZzpcclxuICpcclxuICogfCBWYXJpYWJsZSAgfCBUeXBlICAgICAgICAgICAgfCBEZXRhaWxzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8LS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAqIHwgYCRpbmRleGAgIHwge0B0eXBlIG51bWJlcn0gIHwgaXRlcmF0b3Igb2Zmc2V0IG9mIHRoZSByZXBlYXRlZCBlbGVtZW50ICgwLi5sZW5ndGgtMSkgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCBgJGZpcnN0YCAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSByZXBlYXRlZCBlbGVtZW50IGlzIGZpcnN0IGluIHRoZSBpdGVyYXRvci4gICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8IGAkbWlkZGxlYCB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgaW4gdGhlIGl0ZXJhdG9yLiB8XHJcbiAqIHwgYCRsYXN0YCAgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCBpcyBsYXN0IGluIHRoZSBpdGVyYXRvci4gICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCBgJGV2ZW5gICAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSBpdGVyYXRvciBwb3NpdGlvbiBgJGluZGV4YCBpcyBldmVuIChvdGhlcndpc2UgZmFsc2UpLiAgICAgICAgICAgfFxyXG4gKiB8IGAkb2RkYCAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIGl0ZXJhdG9yIHBvc2l0aW9uIGAkaW5kZXhgIGlzIG9kZCAob3RoZXJ3aXNlIGZhbHNlKS4gICAgICAgICAgICB8XHJcbiAqXHJcbiAqIENyZWF0aW5nIGFsaWFzZXMgZm9yIHRoZXNlIHByb3BlcnRpZXMgaXMgcG9zc2libGUgd2l0aCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5pdCBgbmdJbml0YH0uXHJcbiAqIFRoaXMgbWF5IGJlIHVzZWZ1bCB3aGVuLCBmb3IgaW5zdGFuY2UsIG5lc3RpbmcgbmdSZXBlYXRzLlxyXG4gKlxyXG4gKiAjIFNwZWNpYWwgcmVwZWF0IHN0YXJ0IGFuZCBlbmQgcG9pbnRzXHJcbiAqIFRvIHJlcGVhdCBhIHNlcmllcyBvZiBlbGVtZW50cyBpbnN0ZWFkIG9mIGp1c3Qgb25lIHBhcmVudCBlbGVtZW50LCBuZ1JlcGVhdCAoYXMgd2VsbCBhcyBvdGhlciBuZyBkaXJlY3RpdmVzKSBzdXBwb3J0cyBleHRlbmRpbmdcclxuICogdGhlIHJhbmdlIG9mIHRoZSByZXBlYXRlciBieSBkZWZpbmluZyBleHBsaWNpdCBzdGFydCBhbmQgZW5kIHBvaW50cyBieSB1c2luZyAqKm5nLXJlcGVhdC1zdGFydCoqIGFuZCAqKm5nLXJlcGVhdC1lbmQqKiByZXNwZWN0aXZlbHkuXHJcbiAqIFRoZSAqKm5nLXJlcGVhdC1zdGFydCoqIGRpcmVjdGl2ZSB3b3JrcyB0aGUgc2FtZSBhcyAqKm5nLXJlcGVhdCoqLCBidXQgd2lsbCByZXBlYXQgYWxsIHRoZSBIVE1MIGNvZGUgKGluY2x1ZGluZyB0aGUgdGFnIGl0J3MgZGVmaW5lZCBvbilcclxuICogdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgZW5kaW5nIEhUTUwgdGFnIHdoZXJlICoqbmctcmVwZWF0LWVuZCoqIGlzIHBsYWNlZC5cclxuICpcclxuICogVGhlIGV4YW1wbGUgYmVsb3cgbWFrZXMgdXNlIG9mIHRoaXMgZmVhdHVyZTpcclxuICogYGBgaHRtbFxyXG4gKiAgIDxoZWFkZXIgbmctcmVwZWF0LXN0YXJ0PVwiaXRlbSBpbiBpdGVtc1wiPlxyXG4gKiAgICAgSGVhZGVyIHt7IGl0ZW0gfX1cclxuICogICA8L2hlYWRlcj5cclxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxyXG4gKiAgICAgQm9keSB7eyBpdGVtIH19XHJcbiAqICAgPC9kaXY+XHJcbiAqICAgPGZvb3RlciBuZy1yZXBlYXQtZW5kPlxyXG4gKiAgICAgRm9vdGVyIHt7IGl0ZW0gfX1cclxuICogICA8L2Zvb3Rlcj5cclxuICogYGBgXHJcbiAqXHJcbiAqIEFuZCB3aXRoIGFuIGlucHV0IG9mIHtAdHlwZSBbJ0EnLCdCJ119IGZvciB0aGUgaXRlbXMgdmFyaWFibGUgaW4gdGhlIGV4YW1wbGUgYWJvdmUsIHRoZSBvdXRwdXQgd2lsbCBldmFsdWF0ZSB0bzpcclxuICogYGBgaHRtbFxyXG4gKiAgIDxoZWFkZXI+XHJcbiAqICAgICBIZWFkZXIgQVxyXG4gKiAgIDwvaGVhZGVyPlxyXG4gKiAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XHJcbiAqICAgICBCb2R5IEFcclxuICogICA8L2Rpdj5cclxuICogICA8Zm9vdGVyPlxyXG4gKiAgICAgRm9vdGVyIEFcclxuICogICA8L2Zvb3Rlcj5cclxuICogICA8aGVhZGVyPlxyXG4gKiAgICAgSGVhZGVyIEJcclxuICogICA8L2hlYWRlcj5cclxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxyXG4gKiAgICAgQm9keSBCXHJcbiAqICAgPC9kaXY+XHJcbiAqICAgPGZvb3Rlcj5cclxuICogICAgIEZvb3RlciBCXHJcbiAqICAgPC9mb290ZXI+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgY3VzdG9tIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIGZvciBuZ1JlcGVhdCBhbHNvIHN1cHBvcnQgYWxsIG90aGVyIEhUTUwgZGlyZWN0aXZlIHN5bnRheCBmbGF2b3JzIHByb3ZpZGVkIGluIEFuZ3VsYXJKUyAoc3VjaFxyXG4gKiBhcyAqKmRhdGEtbmctcmVwZWF0LXN0YXJ0KiosICoqeC1uZy1yZXBlYXQtc3RhcnQqKiBhbmQgKipuZzpyZXBlYXQtc3RhcnQqKikuXHJcbiAqXHJcbiAqIEBhbmltYXRpb25zXHJcbiAqICoqLmVudGVyKiogLSB3aGVuIGEgbmV3IGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGxpc3Qgb3Igd2hlbiBhbiBpdGVtIGlzIHJldmVhbGVkIGFmdGVyIGEgZmlsdGVyXHJcbiAqXHJcbiAqICoqLmxlYXZlKiogLSB3aGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0IG9yIHdoZW4gYW4gaXRlbSBpcyBmaWx0ZXJlZCBvdXRcclxuICpcclxuICogKioubW92ZSoqIC0gd2hlbiBhbiBhZGphY2VudCBpdGVtIGlzIGZpbHRlcmVkIG91dCBjYXVzaW5nIGEgcmVvcmRlciBvciB3aGVuIHRoZSBpdGVtIGNvbnRlbnRzIGFyZSByZW9yZGVyZWRcclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBzY29wZVxyXG4gKiBAcHJpb3JpdHkgMTAwMFxyXG4gKiBAcGFyYW0ge3JlcGVhdF9leHByZXNzaW9ufSBuZ1JlcGVhdCBUaGUgZXhwcmVzc2lvbiBpbmRpY2F0aW5nIGhvdyB0byBlbnVtZXJhdGUgYSBjb2xsZWN0aW9uLiBUaGVzZVxyXG4gKiAgIGZvcm1hdHMgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQ6XHJcbiAqXHJcbiAqICAgKiBgdmFyaWFibGUgaW4gZXhwcmVzc2lvbmAg4oCTIHdoZXJlIHZhcmlhYmxlIGlzIHRoZSB1c2VyIGRlZmluZWQgbG9vcCB2YXJpYWJsZSBhbmQgYGV4cHJlc3Npb25gXHJcbiAqICAgICBpcyBhIHNjb3BlIGV4cHJlc3Npb24gZ2l2aW5nIHRoZSBjb2xsZWN0aW9uIHRvIGVudW1lcmF0ZS5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgYWxidW0gaW4gYXJ0aXN0LmFsYnVtc2AuXHJcbiAqXHJcbiAqICAgKiBgKGtleSwgdmFsdWUpIGluIGV4cHJlc3Npb25gIOKAkyB3aGVyZSBga2V5YCBhbmQgYHZhbHVlYCBjYW4gYmUgYW55IHVzZXIgZGVmaW5lZCBpZGVudGlmaWVycyxcclxuICogICAgIGFuZCBgZXhwcmVzc2lvbmAgaXMgdGhlIHNjb3BlIGV4cHJlc3Npb24gZ2l2aW5nIHRoZSBjb2xsZWN0aW9uIHRvIGVudW1lcmF0ZS5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgKG5hbWUsIGFnZSkgaW4geydhZGFtJzoxMCwgJ2FtYWxpZSc6MTJ9YC5cclxuICpcclxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uIHRyYWNrIGJ5IHRyYWNraW5nX2V4cHJlc3Npb25gIOKAkyBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCB0cmFja2luZyBmdW5jdGlvblxyXG4gKiAgICAgd2hpY2ggY2FuIGJlIHVzZWQgdG8gYXNzb2NpYXRlIHRoZSBvYmplY3RzIGluIHRoZSBjb2xsZWN0aW9uIHdpdGggdGhlIERPTSBlbGVtZW50cy4gSWYgbm8gdHJhY2tpbmcgZnVuY3Rpb25cclxuICogICAgIGlzIHNwZWNpZmllZCB0aGUgbmctcmVwZWF0IGFzc29jaWF0ZXMgZWxlbWVudHMgYnkgaWRlbnRpdHkgaW4gdGhlIGNvbGxlY3Rpb24uIEl0IGlzIGFuIGVycm9yIHRvIGhhdmVcclxuICogICAgIG1vcmUgdGhhbiBvbmUgdHJhY2tpbmcgZnVuY3Rpb24gdG8gcmVzb2x2ZSB0byB0aGUgc2FtZSBrZXkuIChUaGlzIHdvdWxkIG1lYW4gdGhhdCB0d28gZGlzdGluY3Qgb2JqZWN0cyBhcmVcclxuICogICAgIG1hcHBlZCB0byB0aGUgc2FtZSBET00gZWxlbWVudCwgd2hpY2ggaXMgbm90IHBvc3NpYmxlLikgIEZpbHRlcnMgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGV4cHJlc3Npb24sXHJcbiAqICAgICBiZWZvcmUgc3BlY2lmeWluZyBhIHRyYWNraW5nIGV4cHJlc3Npb24uXHJcbiAqXHJcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXNgIGlzIGVxdWl2YWxlbnQgdG8gYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgJGlkKGl0ZW0pYC4gVGhpcyBpbXBsaWVzIHRoYXQgdGhlIERPTSBlbGVtZW50c1xyXG4gKiAgICAgd2lsbCBiZSBhc3NvY2lhdGVkIGJ5IGl0ZW0gaWRlbnRpdHkgaW4gdGhlIGFycmF5LlxyXG4gKlxyXG4gKiAgICogYHZhcmlhYmxlIGluIGV4cHJlc3Npb24gYXMgYWxpYXNfZXhwcmVzc2lvbmAg4oCTIFlvdSBjYW4gYWxzbyBwcm92aWRlIGFuIG9wdGlvbmFsIGFsaWFzIGV4cHJlc3Npb24gd2hpY2ggd2lsbCB0aGVuIHN0b3JlIHRoZVxyXG4gKiAgICAgaW50ZXJtZWRpYXRlIHJlc3VsdHMgb2YgdGhlIHJlcGVhdGVyIGFmdGVyIHRoZSBmaWx0ZXJzIGhhdmUgYmVlbiBhcHBsaWVkLiBUeXBpY2FsbHkgdGhpcyBpcyB1c2VkIHRvIHJlbmRlciBhIHNwZWNpYWwgbWVzc2FnZVxyXG4gKiAgICAgd2hlbiBhIGZpbHRlciBpcyBhY3RpdmUgb24gdGhlIHJlcGVhdGVyLCBidXQgdGhlIGZpbHRlcmVkIHJlc3VsdCBzZXQgaXMgZW1wdHkuXHJcbiAqXHJcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgfCBmaWx0ZXI6eCBhcyByZXN1bHRzYCB3aWxsIHN0b3JlIHRoZSBmcmFnbWVudCBvZiB0aGUgcmVwZWF0ZWQgaXRlbXMgYXMgYHJlc3VsdHNgLCBidXQgb25seSBhZnRlclxyXG4gKiAgICAgdGhlIGl0ZW1zIGhhdmUgYmVlbiBwcm9jZXNzZWQgdGhyb3VnaCB0aGUgZmlsdGVyLlxyXG4gKlxyXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5ICRpZChpdGVtKWAuIEEgYnVpbHQgaW4gYCRpZCgpYCBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBhc3NpZ24gYSB1bmlxdWVcclxuICogICAgIGAkJGhhc2hLZXlgIHByb3BlcnR5IHRvIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkuIFRoaXMgcHJvcGVydHkgaXMgdGhlbiB1c2VkIGFzIGEga2V5IHRvIGFzc29jaWF0ZWQgRE9NIGVsZW1lbnRzXHJcbiAqICAgICB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGl0ZW0gaW4gdGhlIGFycmF5IGJ5IGlkZW50aXR5LiBNb3ZpbmcgdGhlIHNhbWUgb2JqZWN0IGluIGFycmF5IHdvdWxkIG1vdmUgdGhlIERPTVxyXG4gKiAgICAgZWxlbWVudCBpbiB0aGUgc2FtZSB3YXkgaW4gdGhlIERPTS5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSBpdGVtLmlkYCBpcyBhIHR5cGljYWwgcGF0dGVybiB3aGVuIHRoZSBpdGVtcyBjb21lIGZyb20gdGhlIGRhdGFiYXNlLiBJbiB0aGlzXHJcbiAqICAgICBjYXNlIHRoZSBvYmplY3QgaWRlbnRpdHkgZG9lcyBub3QgbWF0dGVyLiBUd28gb2JqZWN0cyBhcmUgY29uc2lkZXJlZCBlcXVpdmFsZW50IGFzIGxvbmcgYXMgdGhlaXIgYGlkYFxyXG4gKiAgICAgcHJvcGVydHkgaXMgc2FtZS5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB8IGZpbHRlcjpzZWFyY2hUZXh0IHRyYWNrIGJ5IGl0ZW0uaWRgIGlzIGEgcGF0dGVybiB0aGF0IG1pZ2h0IGJlIHVzZWQgdG8gYXBwbHkgYSBmaWx0ZXJcclxuICogICAgIHRvIGl0ZW1zIGluIGNvbmp1bmN0aW9uIHdpdGggYSB0cmFja2luZyBleHByZXNzaW9uLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBUaGlzIGV4YW1wbGUgaW5pdGlhbGl6ZXMgdGhlIHNjb3BlIHRvIGEgbGlzdCBvZiBuYW1lcyBhbmRcclxuICogdGhlbiB1c2VzIGBuZ1JlcGVhdGAgdG8gZGlzcGxheSBldmVyeSBwZXJzb246XHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8ZGl2IG5nLWluaXQ9XCJmcmllbmRzID0gW1xyXG4gICAgICAgIHtuYW1lOidKb2huJywgYWdlOjI1LCBnZW5kZXI6J2JveSd9LFxyXG4gICAgICAgIHtuYW1lOidKZXNzaWUnLCBhZ2U6MzAsIGdlbmRlcjonZ2lybCd9LFxyXG4gICAgICAgIHtuYW1lOidKb2hhbm5hJywgYWdlOjI4LCBnZW5kZXI6J2dpcmwnfSxcclxuICAgICAgICB7bmFtZTonSm95JywgYWdlOjE1LCBnZW5kZXI6J2dpcmwnfSxcclxuICAgICAgICB7bmFtZTonTWFyeScsIGFnZToyOCwgZ2VuZGVyOidnaXJsJ30sXHJcbiAgICAgICAge25hbWU6J1BldGVyJywgYWdlOjk1LCBnZW5kZXI6J2JveSd9LFxyXG4gICAgICAgIHtuYW1lOidTZWJhc3RpYW4nLCBhZ2U6NTAsIGdlbmRlcjonYm95J30sXHJcbiAgICAgICAge25hbWU6J0VyaWthJywgYWdlOjI3LCBnZW5kZXI6J2dpcmwnfSxcclxuICAgICAgICB7bmFtZTonUGF0cmljaycsIGFnZTo0MCwgZ2VuZGVyOidib3knfSxcclxuICAgICAgICB7bmFtZTonU2FtYW50aGEnLCBhZ2U6NjAsIGdlbmRlcjonZ2lybCd9XHJcbiAgICAgIF1cIj5cclxuICAgICAgICBJIGhhdmUge3tmcmllbmRzLmxlbmd0aH19IGZyaWVuZHMuIFRoZXkgYXJlOlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwic2VhcmNoXCIgbmctbW9kZWw9XCJxXCIgcGxhY2Vob2xkZXI9XCJmaWx0ZXIgZnJpZW5kcy4uLlwiIC8+XHJcbiAgICAgICAgPHVsIGNsYXNzPVwiZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IGZpbHRlcjpxIGFzIHJlc3VsdHNcIj5cclxuICAgICAgICAgICAgW3t7JGluZGV4ICsgMX19XSB7e2ZyaWVuZC5uYW1lfX0gd2hvIGlzIHt7ZnJpZW5kLmFnZX19IHllYXJzIG9sZC5cclxuICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICA8bGkgY2xhc3M9XCJhbmltYXRlLXJlcGVhdFwiIG5nLWlmPVwicmVzdWx0cy5sZW5ndGggPT0gMFwiPlxyXG4gICAgICAgICAgICA8c3Ryb25nPk5vIHJlc3VsdHMgZm91bmQuLi48L3N0cm9uZz5cclxuICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgPC91bD5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cclxuICAgICAgLmV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXIge1xyXG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBsaXN0LXN0eWxlOm5vbmU7XHJcbiAgICAgICAgbWFyZ2luOjA7XHJcbiAgICAgICAgcGFkZGluZzowIDEwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdCB7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6NDBweDtcclxuICAgICAgICBsaXN0LXN0eWxlOm5vbmU7XHJcbiAgICAgICAgYm94LXNpemluZzpib3JkZXItYm94O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZSxcclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyLFxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUge1xyXG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUsXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLFxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIge1xyXG4gICAgICAgIG9wYWNpdHk6MDtcclxuICAgICAgICBtYXgtaGVpZ2h0OjA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZSxcclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUubmctbW92ZS1hY3RpdmUsXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xyXG4gICAgICAgIG9wYWNpdHk6MTtcclxuICAgICAgICBtYXgtaGVpZ2h0OjQwcHg7XHJcbiAgICAgIH1cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIGZyaWVuZHMgPSBlbGVtZW50LmFsbChieS5yZXBlYXRlcignZnJpZW5kIGluIGZyaWVuZHMnKSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHJlbmRlciBpbml0aWFsIGRhdGEgc2V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMuY291bnQoKSkudG9CZSgxMCk7XHJcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDApLmdldFRleHQoKSkudG9FcXVhbCgnWzFdIEpvaG4gd2hvIGlzIDI1IHllYXJzIG9sZC4nKTtcclxuICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMl0gSmVzc2llIHdobyBpcyAzMCB5ZWFycyBvbGQuJyk7XHJcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMubGFzdCgpLmdldFRleHQoKSkudG9FcXVhbCgnWzEwXSBTYW1hbnRoYSB3aG8gaXMgNjAgeWVhcnMgb2xkLicpO1xyXG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2ZyaWVuZHMubGVuZ3RoJykpLmdldFRleHQoKSlcclxuICAgICAgICAgICAgLnRvTWF0Y2goXCJJIGhhdmUgMTAgZnJpZW5kcy4gVGhleSBhcmU6XCIpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSByZXBlYXRlciB3aGVuIGZpbHRlciBwcmVkaWNhdGUgY2hhbmdlcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5jb3VudCgpKS50b0JlKDEwKTtcclxuXHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3EnKSkuc2VuZEtleXMoJ21hJyk7XHJcblxyXG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5jb3VudCgpKS50b0JlKDIpO1xyXG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMV0gTWFyeSB3aG8gaXMgMjggeWVhcnMgb2xkLicpO1xyXG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5sYXN0KCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMl0gU2FtYW50aGEgd2hvIGlzIDYwIHllYXJzIG9sZC4nKTtcclxuICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdSZXBlYXREaXJlY3RpdmUgPSBbJyRwYXJzZScsICckYW5pbWF0ZScsIGZ1bmN0aW9uKCRwYXJzZSwgJGFuaW1hdGUpIHtcclxuICB2YXIgTkdfUkVNT1ZFRCA9ICckJE5HX1JFTU9WRUQnO1xyXG4gIHZhciBuZ1JlcGVhdE1pbkVyciA9IG1pbkVycignbmdSZXBlYXQnKTtcclxuXHJcbiAgdmFyIHVwZGF0ZVNjb3BlID0gZnVuY3Rpb24oc2NvcGUsIGluZGV4LCB2YWx1ZUlkZW50aWZpZXIsIHZhbHVlLCBrZXlJZGVudGlmaWVyLCBrZXksIGFycmF5TGVuZ3RoKSB7XHJcbiAgICAvLyBUT0RPKHBlcmYpOiBnZW5lcmF0ZSBzZXR0ZXJzIHRvIHNoYXZlIG9mZiB+NDBtcyBvciAxLTEuNSVcclxuICAgIHNjb3BlW3ZhbHVlSWRlbnRpZmllcl0gPSB2YWx1ZTtcclxuICAgIGlmIChrZXlJZGVudGlmaWVyKSBzY29wZVtrZXlJZGVudGlmaWVyXSA9IGtleTtcclxuICAgIHNjb3BlLiRpbmRleCA9IGluZGV4O1xyXG4gICAgc2NvcGUuJGZpcnN0ID0gKGluZGV4ID09PSAwKTtcclxuICAgIHNjb3BlLiRsYXN0ID0gKGluZGV4ID09PSAoYXJyYXlMZW5ndGggLSAxKSk7XHJcbiAgICBzY29wZS4kbWlkZGxlID0gIShzY29wZS4kZmlyc3QgfHwgc2NvcGUuJGxhc3QpO1xyXG4gICAgLy8ganNoaW50IGJpdHdpc2U6IGZhbHNlXHJcbiAgICBzY29wZS4kb2RkID0gIShzY29wZS4kZXZlbiA9IChpbmRleCYxKSA9PT0gMCk7XHJcbiAgICAvLyBqc2hpbnQgYml0d2lzZTogdHJ1ZVxyXG4gIH07XHJcblxyXG4gIHZhciBnZXRCbG9ja1N0YXJ0ID0gZnVuY3Rpb24oYmxvY2spIHtcclxuICAgIHJldHVybiBibG9jay5jbG9uZVswXTtcclxuICB9O1xyXG5cclxuICB2YXIgZ2V0QmxvY2tFbmQgPSBmdW5jdGlvbihibG9jaykge1xyXG4gICAgcmV0dXJuIGJsb2NrLmNsb25lW2Jsb2NrLmNsb25lLmxlbmd0aCAtIDFdO1xyXG4gIH07XHJcblxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcclxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcclxuICAgIHByaW9yaXR5OiAxMDAwLFxyXG4gICAgdGVybWluYWw6IHRydWUsXHJcbiAgICAkJHRsYjogdHJ1ZSxcclxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nUmVwZWF0Q29tcGlsZSgkZWxlbWVudCwgJGF0dHIpIHtcclxuICAgICAgdmFyIGV4cHJlc3Npb24gPSAkYXR0ci5uZ1JlcGVhdDtcclxuICAgICAgdmFyIG5nUmVwZWF0RW5kQ29tbWVudCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyBlbmQgbmdSZXBlYXQ6ICcgKyBleHByZXNzaW9uICsgJyAnKTtcclxuXHJcbiAgICAgIHZhciBtYXRjaCA9IGV4cHJlc3Npb24ubWF0Y2goL15cXHMqKFtcXHNcXFNdKz8pXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpP1xccyokLyk7XHJcblxyXG4gICAgICBpZiAoIW1hdGNoKSB7XHJcbiAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2lleHAnLCBcIkV4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiAnX2l0ZW1fIGluIF9jb2xsZWN0aW9uX1sgdHJhY2sgYnkgX2lkX10nIGJ1dCBnb3QgJ3swfScuXCIsXHJcbiAgICAgICAgICAgIGV4cHJlc3Npb24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgbGhzID0gbWF0Y2hbMV07XHJcbiAgICAgIHZhciByaHMgPSBtYXRjaFsyXTtcclxuICAgICAgdmFyIGFsaWFzQXMgPSBtYXRjaFszXTtcclxuICAgICAgdmFyIHRyYWNrQnlFeHAgPSBtYXRjaFs0XTtcclxuXHJcbiAgICAgIG1hdGNoID0gbGhzLm1hdGNoKC9eKD86KFtcXCRcXHddKyl8XFwoKFtcXCRcXHddKylcXHMqLFxccyooW1xcJFxcd10rKVxcKSkkLyk7XHJcblxyXG4gICAgICBpZiAoIW1hdGNoKSB7XHJcbiAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2lpZGV4cCcsIFwiJ19pdGVtXycgaW4gJ19pdGVtXyBpbiBfY29sbGVjdGlvbl8nIHNob3VsZCBiZSBhbiBpZGVudGlmaWVyIG9yICcoX2tleV8sIF92YWx1ZV8pJyBleHByZXNzaW9uLCBidXQgZ290ICd7MH0nLlwiLFxyXG4gICAgICAgICAgICBsaHMpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciB2YWx1ZUlkZW50aWZpZXIgPSBtYXRjaFszXSB8fCBtYXRjaFsxXTtcclxuICAgICAgdmFyIGtleUlkZW50aWZpZXIgPSBtYXRjaFsyXTtcclxuXHJcbiAgICAgIGlmIChhbGlhc0FzICYmICghL15bJGEtekEtWl9dWyRhLXpBLVowLTlfXSokLy50ZXN0KGFsaWFzQXMpIHx8XHJcbiAgICAgICAgICAvXihudWxsfHVuZGVmaW5lZHx0aGlzfFxcJGluZGV4fFxcJGZpcnN0fFxcJG1pZGRsZXxcXCRsYXN0fFxcJGV2ZW58XFwkb2RkfFxcJHBhcmVudCkkLy50ZXN0KGFsaWFzQXMpKSkge1xyXG4gICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdiYWRpZGVudCcsIFwiYWxpYXMgJ3swfScgaXMgaW52YWxpZCAtLS0gbXVzdCBiZSBhIHZhbGlkIEpTIGlkZW50aWZpZXIgd2hpY2ggaXMgbm90IGEgcmVzZXJ2ZWQgbmFtZS5cIixcclxuICAgICAgICAgIGFsaWFzQXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgdHJhY2tCeUV4cEdldHRlciwgdHJhY2tCeUlkRXhwRm4sIHRyYWNrQnlJZEFycmF5Rm4sIHRyYWNrQnlJZE9iakZuO1xyXG4gICAgICB2YXIgaGFzaEZuTG9jYWxzID0geyRpZDogaGFzaEtleX07XHJcblxyXG4gICAgICBpZiAodHJhY2tCeUV4cCkge1xyXG4gICAgICAgIHRyYWNrQnlFeHBHZXR0ZXIgPSAkcGFyc2UodHJhY2tCeUV4cCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHJhY2tCeUlkQXJyYXlGbiA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICByZXR1cm4gaGFzaEtleSh2YWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0cmFja0J5SWRPYmpGbiA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgIHJldHVybiBrZXk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nUmVwZWF0TGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcclxuXHJcbiAgICAgICAgaWYgKHRyYWNrQnlFeHBHZXR0ZXIpIHtcclxuICAgICAgICAgIHRyYWNrQnlJZEV4cEZuID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgLy8gYXNzaWduIGtleSwgdmFsdWUsIGFuZCAkaW5kZXggdG8gdGhlIGxvY2FscyBzbyB0aGF0IHRoZXkgY2FuIGJlIHVzZWQgaW4gaGFzaCBmdW5jdGlvbnNcclxuICAgICAgICAgICAgaWYgKGtleUlkZW50aWZpZXIpIGhhc2hGbkxvY2Fsc1trZXlJZGVudGlmaWVyXSA9IGtleTtcclxuICAgICAgICAgICAgaGFzaEZuTG9jYWxzW3ZhbHVlSWRlbnRpZmllcl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgaGFzaEZuTG9jYWxzLiRpbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJhY2tCeUV4cEdldHRlcigkc2NvcGUsIGhhc2hGbkxvY2Fscyk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RvcmUgYSBsaXN0IG9mIGVsZW1lbnRzIGZyb20gcHJldmlvdXMgcnVuLiBUaGlzIGlzIGEgaGFzaCB3aGVyZSBrZXkgaXMgdGhlIGl0ZW0gZnJvbSB0aGVcclxuICAgICAgICAvLyBpdGVyYXRvciwgYW5kIHRoZSB2YWx1ZSBpcyBvYmplY3RzIHdpdGggZm9sbG93aW5nIHByb3BlcnRpZXMuXHJcbiAgICAgICAgLy8gICAtIHNjb3BlOiBib3VuZCBzY29wZVxyXG4gICAgICAgIC8vICAgLSBlbGVtZW50OiBwcmV2aW91cyBlbGVtZW50LlxyXG4gICAgICAgIC8vICAgLSBpbmRleDogcG9zaXRpb25cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFdlIGFyZSB1c2luZyBuby1wcm90byBvYmplY3Qgc28gdGhhdCB3ZSBkb24ndCBuZWVkIHRvIGd1YXJkIGFnYWluc3QgaW5oZXJpdGVkIHByb3BzIHZpYVxyXG4gICAgICAgIC8vIGhhc093blByb3BlcnR5LlxyXG4gICAgICAgIHZhciBsYXN0QmxvY2tNYXAgPSBjcmVhdGVNYXAoKTtcclxuXHJcbiAgICAgICAgLy93YXRjaCBwcm9wc1xyXG4gICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKHJocywgZnVuY3Rpb24gbmdSZXBlYXRBY3Rpb24oY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgdmFyIGluZGV4LCBsZW5ndGgsXHJcbiAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gJGVsZW1lbnRbMF0sICAgICAvLyBub2RlIHRoYXQgY2xvbmVkIG5vZGVzIHNob3VsZCBiZSBpbnNlcnRlZCBhZnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZWQgdG8gdGhlIGNvbW1lbnQgbm9kZSBhbmNob3JcclxuICAgICAgICAgICAgICBuZXh0Tm9kZSxcclxuICAgICAgICAgICAgICAvLyBTYW1lIGFzIGxhc3RCbG9ja01hcCBidXQgaXQgaGFzIHRoZSBjdXJyZW50IHN0YXRlLiBJdCB3aWxsIGJlY29tZSB0aGVcclxuICAgICAgICAgICAgICAvLyBsYXN0QmxvY2tNYXAgb24gdGhlIG5leHQgaXRlcmF0aW9uLlxyXG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcCA9IGNyZWF0ZU1hcCgpLFxyXG4gICAgICAgICAgICAgIGNvbGxlY3Rpb25MZW5ndGgsXHJcbiAgICAgICAgICAgICAga2V5LCB2YWx1ZSwgLy8ga2V5L3ZhbHVlIG9mIGl0ZXJhdGlvblxyXG4gICAgICAgICAgICAgIHRyYWNrQnlJZCxcclxuICAgICAgICAgICAgICB0cmFja0J5SWRGbixcclxuICAgICAgICAgICAgICBjb2xsZWN0aW9uS2V5cyxcclxuICAgICAgICAgICAgICBibG9jaywgICAgICAgLy8gbGFzdCBvYmplY3QgaW5mb3JtYXRpb24ge3Njb3BlLCBlbGVtZW50LCBpZH1cclxuICAgICAgICAgICAgICBuZXh0QmxvY2tPcmRlcixcclxuICAgICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlO1xyXG5cclxuICAgICAgICAgIGlmIChhbGlhc0FzKSB7XHJcbiAgICAgICAgICAgICRzY29wZVthbGlhc0FzXSA9IGNvbGxlY3Rpb247XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzID0gY29sbGVjdGlvbjtcclxuICAgICAgICAgICAgdHJhY2tCeUlkRm4gPSB0cmFja0J5SWRFeHBGbiB8fCB0cmFja0J5SWRBcnJheUZuO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJhY2tCeUlkRm4gPSB0cmFja0J5SWRFeHBGbiB8fCB0cmFja0J5SWRPYmpGbjtcclxuICAgICAgICAgICAgLy8gaWYgb2JqZWN0LCBleHRyYWN0IGtleXMsIHNvcnQgdGhlbSBhbmQgdXNlIHRvIGRldGVybWluZSBvcmRlciBvZiBpdGVyYXRpb24gb3ZlciBvYmogcHJvcHNcclxuICAgICAgICAgICAgY29sbGVjdGlvbktleXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbUtleSBpbiBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb24uaGFzT3duUHJvcGVydHkoaXRlbUtleSkgJiYgaXRlbUtleS5jaGFyQXQoMCkgIT0gJyQnKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uS2V5cy5wdXNoKGl0ZW1LZXkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xsZWN0aW9uS2V5cy5zb3J0KCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29sbGVjdGlvbkxlbmd0aCA9IGNvbGxlY3Rpb25LZXlzLmxlbmd0aDtcclxuICAgICAgICAgIG5leHRCbG9ja09yZGVyID0gbmV3IEFycmF5KGNvbGxlY3Rpb25MZW5ndGgpO1xyXG5cclxuICAgICAgICAgIC8vIGxvY2F0ZSBleGlzdGluZyBpdGVtc1xyXG4gICAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgY29sbGVjdGlvbkxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBrZXkgPSAoY29sbGVjdGlvbiA9PT0gY29sbGVjdGlvbktleXMpID8gaW5kZXggOiBjb2xsZWN0aW9uS2V5c1tpbmRleF07XHJcbiAgICAgICAgICAgIHZhbHVlID0gY29sbGVjdGlvbltrZXldO1xyXG4gICAgICAgICAgICB0cmFja0J5SWQgPSB0cmFja0J5SWRGbihrZXksIHZhbHVlLCBpbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChsYXN0QmxvY2tNYXBbdHJhY2tCeUlkXSkge1xyXG4gICAgICAgICAgICAgIC8vIGZvdW5kIHByZXZpb3VzbHkgc2VlbiBibG9ja1xyXG4gICAgICAgICAgICAgIGJsb2NrID0gbGFzdEJsb2NrTWFwW3RyYWNrQnlJZF07XHJcbiAgICAgICAgICAgICAgZGVsZXRlIGxhc3RCbG9ja01hcFt0cmFja0J5SWRdO1xyXG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcFt0cmFja0J5SWRdID0gYmxvY2s7XHJcbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXJbaW5kZXhdID0gYmxvY2s7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV4dEJsb2NrTWFwW3RyYWNrQnlJZF0pIHtcclxuICAgICAgICAgICAgICAvLyBpZiBjb2xsaXNpb24gZGV0ZWN0ZWQuIHJlc3RvcmUgbGFzdEJsb2NrTWFwIGFuZCB0aHJvdyBhbiBlcnJvclxyXG4gICAgICAgICAgICAgIGZvckVhY2gobmV4dEJsb2NrT3JkZXIsIGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrICYmIGJsb2NrLnNjb3BlKSBsYXN0QmxvY2tNYXBbYmxvY2suaWRdID0gYmxvY2s7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2R1cGVzJyxcclxuICAgICAgICAgICAgICAgICAgXCJEdXBsaWNhdGVzIGluIGEgcmVwZWF0ZXIgYXJlIG5vdCBhbGxvd2VkLiBVc2UgJ3RyYWNrIGJ5JyBleHByZXNzaW9uIHRvIHNwZWNpZnkgdW5pcXVlIGtleXMuIFJlcGVhdGVyOiB7MH0sIER1cGxpY2F0ZSBrZXk6IHsxfSwgRHVwbGljYXRlIHZhbHVlOiB7Mn1cIixcclxuICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiwgdHJhY2tCeUlkLCB0b0pzb24odmFsdWUpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBuZXcgbmV2ZXIgYmVmb3JlIHNlZW4gYmxvY2tcclxuICAgICAgICAgICAgICBuZXh0QmxvY2tPcmRlcltpbmRleF0gPSB7aWQ6IHRyYWNrQnlJZCwgc2NvcGU6IHVuZGVmaW5lZCwgY2xvbmU6IHVuZGVmaW5lZH07XHJcbiAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwW3RyYWNrQnlJZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gcmVtb3ZlIGxlZnRvdmVyIGl0ZW1zXHJcbiAgICAgICAgICBmb3IgKHZhciBibG9ja0tleSBpbiBsYXN0QmxvY2tNYXApIHtcclxuICAgICAgICAgICAgYmxvY2sgPSBsYXN0QmxvY2tNYXBbYmxvY2tLZXldO1xyXG4gICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlID0gZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSk7XHJcbiAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnRzVG9SZW1vdmUpO1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudHNUb1JlbW92ZVswXS5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIGVsZW1lbnQgd2FzIG5vdCByZW1vdmVkIHlldCBiZWNhdXNlIG9mIHBlbmRpbmcgYW5pbWF0aW9uLCBtYXJrIGl0IGFzIGRlbGV0ZWRcclxuICAgICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBpZ25vcmUgaXQgbGF0ZXJcclxuICAgICAgICAgICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gZWxlbWVudHNUb1JlbW92ZS5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlW2luZGV4XVtOR19SRU1PVkVEXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJsb2NrLnNjb3BlLiRkZXN0cm95KCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gd2UgYXJlIG5vdCB1c2luZyBmb3JFYWNoIGZvciBwZXJmIHJlYXNvbnMgKHRyeWluZyB0byBhdm9pZCAjY2FsbClcclxuICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNvbGxlY3Rpb25MZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAga2V5ID0gKGNvbGxlY3Rpb24gPT09IGNvbGxlY3Rpb25LZXlzKSA/IGluZGV4IDogY29sbGVjdGlvbktleXNbaW5kZXhdO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IGNvbGxlY3Rpb25ba2V5XTtcclxuICAgICAgICAgICAgYmxvY2sgPSBuZXh0QmxvY2tPcmRlcltpbmRleF07XHJcblxyXG4gICAgICAgICAgICBpZiAoYmxvY2suc2NvcGUpIHtcclxuICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGFscmVhZHkgc2VlbiB0aGlzIG9iamVjdCwgdGhlbiB3ZSBuZWVkIHRvIHJldXNlIHRoZVxyXG4gICAgICAgICAgICAgIC8vIGFzc29jaWF0ZWQgc2NvcGUvZWxlbWVudFxyXG5cclxuICAgICAgICAgICAgICBuZXh0Tm9kZSA9IHByZXZpb3VzTm9kZTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gc2tpcCBub2RlcyB0aGF0IGFyZSBhbHJlYWR5IHBlbmRpbmcgcmVtb3ZhbCB2aWEgbGVhdmUgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0Tm9kZS5uZXh0U2libGluZztcclxuICAgICAgICAgICAgICB9IHdoaWxlIChuZXh0Tm9kZSAmJiBuZXh0Tm9kZVtOR19SRU1PVkVEXSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChnZXRCbG9ja1N0YXJ0KGJsb2NrKSAhPSBuZXh0Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgaXRlbSB3aGljaCBnb3QgbW92ZWRcclxuICAgICAgICAgICAgICAgICRhbmltYXRlLm1vdmUoZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSksIG51bGwsIGpxTGl0ZShwcmV2aW91c05vZGUpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gZ2V0QmxvY2tFbmQoYmxvY2spO1xyXG4gICAgICAgICAgICAgIHVwZGF0ZVNjb3BlKGJsb2NrLnNjb3BlLCBpbmRleCwgdmFsdWVJZGVudGlmaWVyLCB2YWx1ZSwga2V5SWRlbnRpZmllciwga2V5LCBjb2xsZWN0aW9uTGVuZ3RoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBuZXcgaXRlbSB3aGljaCB3ZSBkb24ndCBrbm93IGFib3V0XHJcbiAgICAgICAgICAgICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24gbmdSZXBlYXRUcmFuc2NsdWRlKGNsb25lLCBzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgYmxvY2suc2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb25lLXZzLWNyZWF0ZWNvbW1lbnRcclxuICAgICAgICAgICAgICAgIHZhciBlbmROb2RlID0gbmdSZXBlYXRFbmRDb21tZW50LmNsb25lTm9kZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBjbG9uZVtjbG9uZS5sZW5ndGgrK10gPSBlbmROb2RlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE8ocGVyZik6IHN1cHBvcnQgbmFrZWQgcHJldmlvdXNOb2RlIGluIGBlbnRlcmAgdG8gYXZvaWQgY3JlYXRpb24gb2YganFMaXRlIHdyYXBwZXI/XHJcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgbnVsbCwganFMaXRlKHByZXZpb3VzTm9kZSkpO1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gZW5kTm9kZTtcclxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFdlIG9ubHkgbmVlZCB0aGUgZmlyc3QvbGFzdCBub2RlIG9mIHRoZSBjbG9uZWQgbm9kZXMuXHJcbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB3ZSBuZWVkIHRvIGtlZXAgdGhlIHJlZmVyZW5jZSB0byB0aGUganFsaXRlIHdyYXBwZXIgYXMgaXQgbWlnaHQgYmUgY2hhbmdlZCBsYXRlclxyXG4gICAgICAgICAgICAgICAgLy8gYnkgYSBkaXJlY3RpdmUgd2l0aCB0ZW1wbGF0ZVVybCB3aGVuIGl0cyB0ZW1wbGF0ZSBhcnJpdmVzLlxyXG4gICAgICAgICAgICAgICAgYmxvY2suY2xvbmUgPSBjbG9uZTtcclxuICAgICAgICAgICAgICAgIG5leHRCbG9ja01hcFtibG9jay5pZF0gPSBibG9jaztcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNjb3BlKGJsb2NrLnNjb3BlLCBpbmRleCwgdmFsdWVJZGVudGlmaWVyLCB2YWx1ZSwga2V5SWRlbnRpZmllciwga2V5LCBjb2xsZWN0aW9uTGVuZ3RoKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGFzdEJsb2NrTWFwID0gbmV4dEJsb2NrTWFwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdTaG93XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nU2hvd2AgZGlyZWN0aXZlIHNob3dzIG9yIGhpZGVzIHRoZSBnaXZlbiBIVE1MIGVsZW1lbnQgYmFzZWQgb24gdGhlIGV4cHJlc3Npb25cclxuICogcHJvdmlkZWQgdG8gdGhlIGBuZ1Nob3dgIGF0dHJpYnV0ZS4gVGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIGJ5IHJlbW92aW5nIG9yIGFkZGluZ1xyXG4gKiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3Mgb250byB0aGUgZWxlbWVudC4gVGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIHByZWRlZmluZWRcclxuICogaW4gQW5ndWxhckpTIGFuZCBzZXRzIHRoZSBkaXNwbGF5IHN0eWxlIHRvIG5vbmUgKHVzaW5nIGFuICFpbXBvcnRhbnQgZmxhZykuXHJcbiAqIEZvciBDU1AgbW9kZSBwbGVhc2UgYWRkIGBhbmd1bGFyLWNzcC5jc3NgIHRvIHlvdXIgaHRtbCBmaWxlIChzZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NzcCBuZ0NzcH0pLlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyB0cnV0aHkgKGVsZW1lbnQgaXMgdmlzaWJsZSkgLS0+XHJcbiAqIDxkaXYgbmctc2hvdz1cIm15VmFsdWVcIj48L2Rpdj5cclxuICpcclxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIGZhbHN5IChlbGVtZW50IGlzIGhpZGRlbikgLS0+XHJcbiAqIDxkaXYgbmctc2hvdz1cIm15VmFsdWVcIiBjbGFzcz1cIm5nLWhpZGVcIj48L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFdoZW4gdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgZmFsc3kgdmFsdWUgdGhlbiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGNsYXNzXHJcbiAqIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gdHJ1dGh5LCB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcmVtb3ZlZFxyXG4gKiBmcm9tIHRoZSBlbGVtZW50IGNhdXNpbmcgdGhlIGVsZW1lbnQgbm90IHRvIGFwcGVhciBoaWRkZW4uXHJcbiAqXHJcbiAqICMjIFdoeSBpcyAhaW1wb3J0YW50IHVzZWQ/XHJcbiAqXHJcbiAqIFlvdSBtYXkgYmUgd29uZGVyaW5nIHdoeSAhaW1wb3J0YW50IGlzIHVzZWQgZm9yIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcy4gVGhpcyBpcyBiZWNhdXNlIHRoZSBgLm5nLWhpZGVgIHNlbGVjdG9yXHJcbiAqIGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiBieSBoZWF2aWVyIHNlbGVjdG9ycy4gRm9yIGV4YW1wbGUsIHNvbWV0aGluZyBhcyBzaW1wbGVcclxuICogYXMgY2hhbmdpbmcgdGhlIGRpc3BsYXkgc3R5bGUgb24gYSBIVE1MIGxpc3QgaXRlbSB3b3VsZCBtYWtlIGhpZGRlbiBlbGVtZW50cyBhcHBlYXIgdmlzaWJsZS5cclxuICogVGhpcyBhbHNvIGJlY29tZXMgYSBiaWdnZXIgaXNzdWUgd2hlbiBkZWFsaW5nIHdpdGggQ1NTIGZyYW1ld29ya3MuXHJcbiAqXHJcbiAqIEJ5IHVzaW5nICFpbXBvcnRhbnQsIHRoZSBzaG93IGFuZCBoaWRlIGJlaGF2aW9yIHdpbGwgd29yayBhcyBleHBlY3RlZCBkZXNwaXRlIGFueSBjbGFzaCBiZXR3ZWVuIENTUyBzZWxlY3RvclxyXG4gKiBzcGVjaWZpY2l0eSAod2hlbiAhaW1wb3J0YW50IGlzbid0IHVzZWQgd2l0aCBhbnkgY29uZmxpY3Rpbmcgc3R5bGVzKS4gSWYgYSBkZXZlbG9wZXIgY2hvb3NlcyB0byBvdmVycmlkZSB0aGVcclxuICogc3R5bGluZyB0byBjaGFuZ2UgaG93IHRvIGhpZGUgYW4gZWxlbWVudCB0aGVuIGl0IGlzIGp1c3QgYSBtYXR0ZXIgb2YgdXNpbmcgIWltcG9ydGFudCBpbiB0aGVpciBvd24gQ1NTIGNvZGUuXHJcbiAqXHJcbiAqICMjIyBPdmVycmlkaW5nIGAubmctaGlkZWBcclxuICpcclxuICogQnkgZGVmYXVsdCwgdGhlIGAubmctaGlkZWAgY2xhc3Mgd2lsbCBzdHlsZSB0aGUgZWxlbWVudCB3aXRoIGBkaXNwbGF5Om5vbmUhaW1wb3J0YW50YC4gSWYgeW91IHdpc2ggdG8gY2hhbmdlXHJcbiAqIHRoZSBoaWRlIGJlaGF2aW9yIHdpdGggbmdTaG93L25nSGlkZSB0aGVuIHRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJlc3RhdGluZyB0aGUgc3R5bGVzIGZvciB0aGUgYC5uZy1oaWRlYFxyXG4gKiBjbGFzcyBpbiBDU1M6XHJcbiAqXHJcbiAqIGBgYGNzc1xyXG4gKiAubmctaGlkZSB7XHJcbiAqICAgLyYjNDI7IHRoaXMgaXMganVzdCBhbm90aGVyIGZvcm0gb2YgaGlkaW5nIGFuIGVsZW1lbnQgJiM0MjsvXHJcbiAqICAgZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7XHJcbiAqICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAqICAgdG9wOi05OTk5cHg7XHJcbiAqICAgbGVmdDotOTk5OXB4O1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBCeSBkZWZhdWx0IHlvdSBkb24ndCBuZWVkIHRvIG92ZXJyaWRlIGluIENTUyBhbnl0aGluZyBhbmQgdGhlIGFuaW1hdGlvbnMgd2lsbCB3b3JrIGFyb3VuZCB0aGUgZGlzcGxheSBzdHlsZS5cclxuICpcclxuICogIyMgQSBub3RlIGFib3V0IGFuaW1hdGlvbnMgd2l0aCBgbmdTaG93YFxyXG4gKlxyXG4gKiBBbmltYXRpb25zIGluIG5nU2hvdy9uZ0hpZGUgd29yayB3aXRoIHRoZSBzaG93IGFuZCBoaWRlIGV2ZW50cyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2hlbiB0aGUgZGlyZWN0aXZlIGV4cHJlc3Npb25cclxuICogaXMgdHJ1ZSBhbmQgZmFsc2UuIFRoaXMgc3lzdGVtIHdvcmtzIGxpa2UgdGhlIGFuaW1hdGlvbiBzeXN0ZW0gcHJlc2VudCB3aXRoIG5nQ2xhc3MgZXhjZXB0IHRoYXRcclxuICogeW91IG11c3QgYWxzbyBpbmNsdWRlIHRoZSAhaW1wb3J0YW50IGZsYWcgdG8gb3ZlcnJpZGUgdGhlIGRpc3BsYXkgcHJvcGVydHlcclxuICogc28gdGhhdCB5b3UgY2FuIHBlcmZvcm0gYW4gYW5pbWF0aW9uIHdoZW4gdGhlIGVsZW1lbnQgaXMgaGlkZGVuIGR1cmluZyB0aGUgdGltZSBvZiB0aGUgYW5pbWF0aW9uLlxyXG4gKlxyXG4gKiBgYGBjc3NcclxuICogLy9cclxuICogLy9hIHdvcmtpbmcgZXhhbXBsZSBjYW4gYmUgZm91bmQgYXQgdGhlIGJvdHRvbSBvZiB0aGlzIHBhZ2VcclxuICogLy9cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQsIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHtcclxuICogICAvJiM0MjsgdGhpcyBpcyByZXF1aXJlZCBhcyBvZiAxLjN4IHRvIHByb3Blcmx5XHJcbiAqICAgICAgYXBwbHkgYWxsIHN0eWxpbmcgaW4gYSBzaG93L2hpZGUgYW5pbWF0aW9uICYjNDI7L1xyXG4gKiAgIHRyYW5zaXRpb246MHMgbGluZWFyIGFsbDtcclxuICogfVxyXG4gKlxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZC1hY3RpdmUsXHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7XHJcbiAqICAgLyYjNDI7IHRoZSB0cmFuc2l0aW9uIGlzIGRlZmluZWQgaW4gdGhlIGFjdGl2ZSBjbGFzcyAmIzQyOy9cclxuICogICB0cmFuc2l0aW9uOjFzIGxpbmVhciBhbGw7XHJcbiAqIH1cclxuICpcclxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQgeyAuLi4gfVxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUgeyAuLi4gfVxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7IC4uLiB9XHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7IC4uLiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBLZWVwIGluIG1pbmQgdGhhdCwgYXMgb2YgQW5ndWxhckpTIHZlcnNpb24gMS4zLjAtYmV0YS4xMSwgdGhlcmUgaXMgbm8gbmVlZCB0byBjaGFuZ2UgdGhlIGRpc3BsYXlcclxuICogcHJvcGVydHkgdG8gYmxvY2sgZHVyaW5nIGFuaW1hdGlvbiBzdGF0ZXMtLW5nQW5pbWF0ZSB3aWxsIGhhbmRsZSB0aGUgc3R5bGUgdG9nZ2xpbmcgYXV0b21hdGljYWxseSBmb3IgeW91LlxyXG4gKlxyXG4gKiBAYW5pbWF0aW9uc1xyXG4gKiBhZGRDbGFzczogYC5uZy1oaWRlYCAtIGhhcHBlbnMgYWZ0ZXIgdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlIGFuZCB0aGUganVzdCBiZWZvcmUgY29udGVudHMgYXJlIHNldCB0byB2aXNpYmxlXHJcbiAqIHJlbW92ZUNsYXNzOiBgLm5nLWhpZGVgIC0gaGFwcGVucyBhZnRlciB0aGUgYG5nU2hvd2AgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBub24gdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSB0aGUgY29udGVudHMgYXJlIHNldCB0byBoaWRkZW5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTaG93IElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHlcclxuICogICAgIHRoZW4gdGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIHJlc3BlY3RpdmVseS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIENsaWNrIG1lOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCI+PGJyLz5cclxuICAgICAgPGRpdj5cclxuICAgICAgICBTaG93OlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGFuaW1hdGUtc2hvd1wiIG5nLXNob3c9XCJjaGVja2VkXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdGh1bWJzLXVwXCI+PC9zcGFuPiBJIHNob3cgdXAgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIEhpZGU6XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgYW5pbWF0ZS1zaG93XCIgbmctaGlkZT1cImNoZWNrZWRcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10aHVtYnMtZG93blwiPjwvc3Bhbj4gSSBoaWRlIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJnbHlwaGljb25zLmNzc1wiPlxyXG4gICAgICBAaW1wb3J0IHVybCgvL25ldGRuYS5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjAuMC9jc3MvYm9vdHN0cmFwLWdseXBoaWNvbnMuY3NzKTtcclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxyXG4gICAgICAuYW5pbWF0ZS1zaG93IHtcclxuICAgICAgICBsaW5lLWhlaWdodDoyMHB4O1xyXG4gICAgICAgIG9wYWNpdHk6MTtcclxuICAgICAgICBwYWRkaW5nOjEwcHg7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1zaG93Lm5nLWhpZGUtYWRkLm5nLWhpZGUtYWRkLWFjdGl2ZSxcclxuICAgICAgLmFuaW1hdGUtc2hvdy5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUge1xyXG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXNob3cubmctaGlkZSB7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6MDtcclxuICAgICAgICBvcGFjaXR5OjA7XHJcbiAgICAgICAgcGFkZGluZzowIDEwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5jaGVjay1lbGVtZW50IHtcclxuICAgICAgICBwYWRkaW5nOjEwcHg7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xyXG4gICAgICB9XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciB0aHVtYnNVcCA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmdseXBoaWNvbi10aHVtYnMtdXAnKSk7XHJcbiAgICAgIHZhciB0aHVtYnNEb3duID0gZWxlbWVudChieS5jc3MoJ3NwYW4uZ2x5cGhpY29uLXRodW1icy1kb3duJykpO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1zaG93IC8gbmctaGlkZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdCh0aHVtYnNVcC5pc0Rpc3BsYXllZCgpKS50b0JlRmFsc3koKTtcclxuICAgICAgICBleHBlY3QodGh1bWJzRG93bi5pc0Rpc3BsYXllZCgpKS50b0JlVHJ1dGh5KCk7XHJcblxyXG4gICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHRodW1ic1VwLmlzRGlzcGxheWVkKCkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICBleHBlY3QodGh1bWJzRG93bi5pc0Rpc3BsYXllZCgpKS50b0JlRmFsc3koKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nU2hvd0RpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCBmdW5jdGlvbigkYW5pbWF0ZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdTaG93LCBmdW5jdGlvbiBuZ1Nob3dXYXRjaEFjdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgJGFuaW1hdGVbdmFsdWUgPyAncmVtb3ZlQ2xhc3MnIDogJ2FkZENsYXNzJ10oZWxlbWVudCwgJ25nLWhpZGUnKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdIaWRlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nSGlkZWAgZGlyZWN0aXZlIHNob3dzIG9yIGhpZGVzIHRoZSBnaXZlbiBIVE1MIGVsZW1lbnQgYmFzZWQgb24gdGhlIGV4cHJlc3Npb25cclxuICogcHJvdmlkZWQgdG8gdGhlIGBuZ0hpZGVgIGF0dHJpYnV0ZS4gVGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIGJ5IHJlbW92aW5nIG9yIGFkZGluZ1xyXG4gKiB0aGUgYG5nLWhpZGVgIENTUyBjbGFzcyBvbnRvIHRoZSBlbGVtZW50LiBUaGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcHJlZGVmaW5lZFxyXG4gKiBpbiBBbmd1bGFySlMgYW5kIHNldHMgdGhlIGRpc3BsYXkgc3R5bGUgdG8gbm9uZSAodXNpbmcgYW4gIWltcG9ydGFudCBmbGFnKS5cclxuICogRm9yIENTUCBtb2RlIHBsZWFzZSBhZGQgYGFuZ3VsYXItY3NwLmNzc2AgdG8geW91ciBodG1sIGZpbGUgKHNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ3NwIG5nQ3NwfSkuXHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIHRydXRoeSAoZWxlbWVudCBpcyBoaWRkZW4pIC0tPlxyXG4gKiA8ZGl2IG5nLWhpZGU9XCJteVZhbHVlXCIgY2xhc3M9XCJuZy1oaWRlXCI+PC9kaXY+XHJcbiAqXHJcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyBmYWxzeSAoZWxlbWVudCBpcyB2aXNpYmxlKSAtLT5cclxuICogPGRpdiBuZy1oaWRlPVwibXlWYWx1ZVwiPjwvZGl2PlxyXG4gKiBgYGBcclxuICpcclxuICogV2hlbiB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSB0cnV0aHkgdmFsdWUgdGhlbiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGNsYXNzXHJcbiAqIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gZmFsc3ksIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyByZW1vdmVkXHJcbiAqIGZyb20gdGhlIGVsZW1lbnQgY2F1c2luZyB0aGUgZWxlbWVudCBub3QgdG8gYXBwZWFyIGhpZGRlbi5cclxuICpcclxuICogIyMgV2h5IGlzICFpbXBvcnRhbnQgdXNlZD9cclxuICpcclxuICogWW91IG1heSBiZSB3b25kZXJpbmcgd2h5ICFpbXBvcnRhbnQgaXMgdXNlZCBmb3IgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGAubmctaGlkZWAgc2VsZWN0b3JcclxuICogY2FuIGJlIGVhc2lseSBvdmVycmlkZGVuIGJ5IGhlYXZpZXIgc2VsZWN0b3JzLiBGb3IgZXhhbXBsZSwgc29tZXRoaW5nIGFzIHNpbXBsZVxyXG4gKiBhcyBjaGFuZ2luZyB0aGUgZGlzcGxheSBzdHlsZSBvbiBhIEhUTUwgbGlzdCBpdGVtIHdvdWxkIG1ha2UgaGlkZGVuIGVsZW1lbnRzIGFwcGVhciB2aXNpYmxlLlxyXG4gKiBUaGlzIGFsc28gYmVjb21lcyBhIGJpZ2dlciBpc3N1ZSB3aGVuIGRlYWxpbmcgd2l0aCBDU1MgZnJhbWV3b3Jrcy5cclxuICpcclxuICogQnkgdXNpbmcgIWltcG9ydGFudCwgdGhlIHNob3cgYW5kIGhpZGUgYmVoYXZpb3Igd2lsbCB3b3JrIGFzIGV4cGVjdGVkIGRlc3BpdGUgYW55IGNsYXNoIGJldHdlZW4gQ1NTIHNlbGVjdG9yXHJcbiAqIHNwZWNpZmljaXR5ICh3aGVuICFpbXBvcnRhbnQgaXNuJ3QgdXNlZCB3aXRoIGFueSBjb25mbGljdGluZyBzdHlsZXMpLiBJZiBhIGRldmVsb3BlciBjaG9vc2VzIHRvIG92ZXJyaWRlIHRoZVxyXG4gKiBzdHlsaW5nIHRvIGNoYW5nZSBob3cgdG8gaGlkZSBhbiBlbGVtZW50IHRoZW4gaXQgaXMganVzdCBhIG1hdHRlciBvZiB1c2luZyAhaW1wb3J0YW50IGluIHRoZWlyIG93biBDU1MgY29kZS5cclxuICpcclxuICogIyMjIE92ZXJyaWRpbmcgYC5uZy1oaWRlYFxyXG4gKlxyXG4gKiBCeSBkZWZhdWx0LCB0aGUgYC5uZy1oaWRlYCBjbGFzcyB3aWxsIHN0eWxlIHRoZSBlbGVtZW50IHdpdGggYGRpc3BsYXk6bm9uZSFpbXBvcnRhbnRgLiBJZiB5b3Ugd2lzaCB0byBjaGFuZ2VcclxuICogdGhlIGhpZGUgYmVoYXZpb3Igd2l0aCBuZ1Nob3cvbmdIaWRlIHRoZW4gdGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmVzdGF0aW5nIHRoZSBzdHlsZXMgZm9yIHRoZSBgLm5nLWhpZGVgXHJcbiAqIGNsYXNzIGluIENTUzpcclxuICpcclxuICogYGBgY3NzXHJcbiAqIC5uZy1oaWRlIHtcclxuICogICAvJiM0MjsgdGhpcyBpcyBqdXN0IGFub3RoZXIgZm9ybSBvZiBoaWRpbmcgYW4gZWxlbWVudCAmIzQyOy9cclxuICogICBkaXNwbGF5OmJsb2NrIWltcG9ydGFudDtcclxuICogICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICogICB0b3A6LTk5OTlweDtcclxuICogICBsZWZ0Oi05OTk5cHg7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEJ5IGRlZmF1bHQgeW91IGRvbid0IG5lZWQgdG8gb3ZlcnJpZGUgaW4gQ1NTIGFueXRoaW5nIGFuZCB0aGUgYW5pbWF0aW9ucyB3aWxsIHdvcmsgYXJvdW5kIHRoZSBkaXNwbGF5IHN0eWxlLlxyXG4gKlxyXG4gKiAjIyBBIG5vdGUgYWJvdXQgYW5pbWF0aW9ucyB3aXRoIGBuZ0hpZGVgXHJcbiAqXHJcbiAqIEFuaW1hdGlvbnMgaW4gbmdTaG93L25nSGlkZSB3b3JrIHdpdGggdGhlIHNob3cgYW5kIGhpZGUgZXZlbnRzIHRoYXQgYXJlIHRyaWdnZXJlZCB3aGVuIHRoZSBkaXJlY3RpdmUgZXhwcmVzc2lvblxyXG4gKiBpcyB0cnVlIGFuZCBmYWxzZS4gVGhpcyBzeXN0ZW0gd29ya3MgbGlrZSB0aGUgYW5pbWF0aW9uIHN5c3RlbSBwcmVzZW50IHdpdGggbmdDbGFzcywgZXhjZXB0IHRoYXQgdGhlIGAubmctaGlkZWBcclxuICogQ1NTIGNsYXNzIGlzIGFkZGVkIGFuZCByZW1vdmVkIGZvciB5b3UgaW5zdGVhZCBvZiB5b3VyIG93biBDU1MgY2xhc3MuXHJcbiAqXHJcbiAqIGBgYGNzc1xyXG4gKiAvL1xyXG4gKiAvL2Egd29ya2luZyBleGFtcGxlIGNhbiBiZSBmb3VuZCBhdCB0aGUgYm90dG9tIG9mIHRoaXMgcGFnZVxyXG4gKiAvL1xyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCwgLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUge1xyXG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xyXG4gKiB9XHJcbiAqXHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUgeyAuLi4gfVxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUgeyAuLi4gfVxyXG4gKiBgYGBcclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQsIGFzIG9mIEFuZ3VsYXJKUyB2ZXJzaW9uIDEuMy4wLWJldGEuMTEsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hhbmdlIHRoZSBkaXNwbGF5XHJcbiAqIHByb3BlcnR5IHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzLS1uZ0FuaW1hdGUgd2lsbCBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGF1dG9tYXRpY2FsbHkgZm9yIHlvdS5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogcmVtb3ZlQ2xhc3M6IGAubmctaGlkZWAgLSBoYXBwZW5zIGFmdGVyIHRoZSBgbmdIaWRlYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gaGlkZGVuXHJcbiAqIGFkZENsYXNzOiBgLm5nLWhpZGVgIC0gaGFwcGVucyBhZnRlciB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBub24gdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSB0aGUgY29udGVudHMgYXJlIHNldCB0byB2aXNpYmxlXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSGlkZSBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5IHRoZW5cclxuICogICAgIHRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiByZXNwZWN0aXZlbHkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICBDbGljayBtZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjxici8+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgU2hvdzpcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLWhpZGVcIiBuZy1zaG93PVwiY2hlY2tlZFwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRodW1icy11cFwiPjwvc3Bhbj4gSSBzaG93IHVwIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdj5cclxuICAgICAgICBIaWRlOlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGFuaW1hdGUtaGlkZVwiIG5nLWhpZGU9XCJjaGVja2VkXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdGh1bWJzLWRvd25cIj48L3NwYW4+IEkgaGlkZSB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiZ2x5cGhpY29ucy5jc3NcIj5cclxuICAgICAgQGltcG9ydCB1cmwoLy9uZXRkbmEuYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4wLjAvY3NzL2Jvb3RzdHJhcC1nbHlwaGljb25zLmNzcyk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cclxuICAgICAgLmFuaW1hdGUtaGlkZSB7XHJcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcclxuICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcclxuICAgICAgICBsaW5lLWhlaWdodDoyMHB4O1xyXG4gICAgICAgIG9wYWNpdHk6MTtcclxuICAgICAgICBwYWRkaW5nOjEwcHg7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1oaWRlLm5nLWhpZGUge1xyXG4gICAgICAgIGxpbmUtaGVpZ2h0OjA7XHJcbiAgICAgICAgb3BhY2l0eTowO1xyXG4gICAgICAgIHBhZGRpbmc6MCAxMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuY2hlY2stZWxlbWVudCB7XHJcbiAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgdGh1bWJzVXAgPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5nbHlwaGljb24tdGh1bWJzLXVwJykpO1xyXG4gICAgICB2YXIgdGh1bWJzRG93biA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmdseXBoaWNvbi10aHVtYnMtZG93bicpKTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctc2hvdyAvIG5nLWhpZGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QodGh1bWJzVXAuaXNEaXNwbGF5ZWQoKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgZXhwZWN0KHRodW1ic0Rvd24uaXNEaXNwbGF5ZWQoKSkudG9CZVRydXRoeSgpO1xyXG5cclxuICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgIGV4cGVjdCh0aHVtYnNVcC5pc0Rpc3BsYXllZCgpKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgZXhwZWN0KHRodW1ic0Rvd24uaXNEaXNwbGF5ZWQoKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ0hpZGVEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nSGlkZSwgZnVuY3Rpb24gbmdIaWRlV2F0Y2hBY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICRhbmltYXRlW3ZhbHVlID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKGVsZW1lbnQsICduZy1oaWRlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdTdHlsZVxyXG4gKiBAcmVzdHJpY3QgQUNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdTdHlsZWAgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc2V0IENTUyBzdHlsZSBvbiBhbiBIVE1MIGVsZW1lbnQgY29uZGl0aW9uYWxseS5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTdHlsZVxyXG4gKlxyXG4gKiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB3aGljaCBldmFscyB0byBhblxyXG4gKiBvYmplY3Qgd2hvc2Uga2V5cyBhcmUgQ1NTIHN0eWxlIG5hbWVzIGFuZCB2YWx1ZXMgYXJlIGNvcnJlc3BvbmRpbmcgdmFsdWVzIGZvciB0aG9zZSBDU1NcclxuICoga2V5cy5cclxuICpcclxuICogU2luY2Ugc29tZSBDU1Mgc3R5bGUgbmFtZXMgYXJlIG5vdCB2YWxpZCBrZXlzIGZvciBhbiBvYmplY3QsIHRoZXkgbXVzdCBiZSBxdW90ZWQuXHJcbiAqIFNlZSB0aGUgJ2JhY2tncm91bmQtY29sb3InIHN0eWxlIGluIHRoZSBleGFtcGxlIGJlbG93LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXQgY29sb3JcIiBuZy1jbGljaz1cIm15U3R5bGU9e2NvbG9yOidyZWQnfVwiPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXQgYmFja2dyb3VuZFwiIG5nLWNsaWNrPVwibXlTdHlsZT17J2JhY2tncm91bmQtY29sb3InOidibHVlJ31cIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiY2xlYXJcIiBuZy1jbGljaz1cIm15U3R5bGU9e31cIj5cclxuICAgICAgICA8YnIvPlxyXG4gICAgICAgIDxzcGFuIG5nLXN0eWxlPVwibXlTdHlsZVwiPlNhbXBsZSBUZXh0PC9zcGFuPlxyXG4gICAgICAgIDxwcmU+bXlTdHlsZT17e215U3R5bGV9fTwvcHJlPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XHJcbiAgICAgICBzcGFuIHtcclxuICAgICAgICAgY29sb3I6IGJsYWNrO1xyXG4gICAgICAgfVxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICB2YXIgY29sb3JTcGFuID0gZWxlbWVudChieS5jc3MoJ3NwYW4nKSk7XHJcblxyXG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1zdHlsZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoY29sb3JTcGFuLmdldENzc1ZhbHVlKCdjb2xvcicpKS50b0JlKCdyZ2JhKDAsIDAsIDAsIDEpJyk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCdpbnB1dFt2YWx1ZT1cXCdzZXQgY29sb3JcXCddJykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMjU1LCAwLCAwLCAxKScpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnaW5wdXRbdmFsdWU9Y2xlYXJdJykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMCwgMCwgMCwgMSknKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nU3R5bGVEaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZShmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gIHNjb3BlLiR3YXRjaChhdHRyLm5nU3R5bGUsIGZ1bmN0aW9uIG5nU3R5bGVXYXRjaEFjdGlvbihuZXdTdHlsZXMsIG9sZFN0eWxlcykge1xyXG4gICAgaWYgKG9sZFN0eWxlcyAmJiAobmV3U3R5bGVzICE9PSBvbGRTdHlsZXMpKSB7XHJcbiAgICAgIGZvckVhY2gob2xkU3R5bGVzLCBmdW5jdGlvbih2YWwsIHN0eWxlKSB7IGVsZW1lbnQuY3NzKHN0eWxlLCAnJyk7fSk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3U3R5bGVzKSBlbGVtZW50LmNzcyhuZXdTdHlsZXMpO1xyXG4gIH0sIHRydWUpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nU3dpdGNoXHJcbiAqIEByZXN0cmljdCBFQVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ1N3aXRjaGAgZGlyZWN0aXZlIGlzIHVzZWQgdG8gY29uZGl0aW9uYWxseSBzd2FwIERPTSBzdHJ1Y3R1cmUgb24geW91ciB0ZW1wbGF0ZSBiYXNlZCBvbiBhIHNjb3BlIGV4cHJlc3Npb24uXHJcbiAqIEVsZW1lbnRzIHdpdGhpbiBgbmdTd2l0Y2hgIGJ1dCB3aXRob3V0IGBuZ1N3aXRjaFdoZW5gIG9yIGBuZ1N3aXRjaERlZmF1bHRgIGRpcmVjdGl2ZXMgd2lsbCBiZSBwcmVzZXJ2ZWQgYXQgdGhlIGxvY2F0aW9uXHJcbiAqIGFzIHNwZWNpZmllZCBpbiB0aGUgdGVtcGxhdGUuXHJcbiAqXHJcbiAqIFRoZSBkaXJlY3RpdmUgaXRzZWxmIHdvcmtzIHNpbWlsYXIgdG8gbmdJbmNsdWRlLCBob3dldmVyLCBpbnN0ZWFkIG9mIGRvd25sb2FkaW5nIHRlbXBsYXRlIGNvZGUgKG9yIGxvYWRpbmcgaXRcclxuICogZnJvbSB0aGUgdGVtcGxhdGUgY2FjaGUpLCBgbmdTd2l0Y2hgIHNpbXBseSBjaG9vc2VzIG9uZSBvZiB0aGUgbmVzdGVkIGVsZW1lbnRzIGFuZCBtYWtlcyBpdCB2aXNpYmxlIGJhc2VkIG9uIHdoaWNoIGVsZW1lbnRcclxuICogbWF0Y2hlcyB0aGUgdmFsdWUgb2J0YWluZWQgZnJvbSB0aGUgZXZhbHVhdGVkIGV4cHJlc3Npb24uIEluIG90aGVyIHdvcmRzLCB5b3UgZGVmaW5lIGEgY29udGFpbmVyIGVsZW1lbnRcclxuICogKHdoZXJlIHlvdSBwbGFjZSB0aGUgZGlyZWN0aXZlKSwgcGxhY2UgYW4gZXhwcmVzc2lvbiBvbiB0aGUgKipgb249XCIuLi5cImAgYXR0cmlidXRlKipcclxuICogKG9yIHRoZSAqKmBuZy1zd2l0Y2g9XCIuLi5cImAgYXR0cmlidXRlKiopLCBkZWZpbmUgYW55IGlubmVyIGVsZW1lbnRzIGluc2lkZSBvZiB0aGUgZGlyZWN0aXZlIGFuZCBwbGFjZVxyXG4gKiBhIHdoZW4gYXR0cmlidXRlIHBlciBlbGVtZW50LiBUaGUgd2hlbiBhdHRyaWJ1dGUgaXMgdXNlZCB0byBpbmZvcm0gbmdTd2l0Y2ggd2hpY2ggZWxlbWVudCB0byBkaXNwbGF5IHdoZW4gdGhlIG9uXHJcbiAqIGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkLiBJZiBhIG1hdGNoaW5nIGV4cHJlc3Npb24gaXMgbm90IGZvdW5kIHZpYSBhIHdoZW4gYXR0cmlidXRlIHRoZW4gYW4gZWxlbWVudCB3aXRoIHRoZSBkZWZhdWx0XHJcbiAqIGF0dHJpYnV0ZSBpcyBkaXNwbGF5ZWQuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XHJcbiAqIEJlIGF3YXJlIHRoYXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMgdG8gbWF0Y2ggYWdhaW5zdCBjYW5ub3QgYmUgZXhwcmVzc2lvbnMuIFRoZXkgYXJlIGludGVycHJldGVkXHJcbiAqIGFzIGxpdGVyYWwgc3RyaW5nIHZhbHVlcyB0byBtYXRjaCBhZ2FpbnN0LlxyXG4gKiBGb3IgZXhhbXBsZSwgKipgbmctc3dpdGNoLXdoZW49XCJzb21lVmFsXCJgKiogd2lsbCBtYXRjaCBhZ2FpbnN0IHRoZSBzdHJpbmcgYFwic29tZVZhbFwiYCBub3QgYWdhaW5zdCB0aGVcclxuICogdmFsdWUgb2YgdGhlIGV4cHJlc3Npb24gYCRzY29wZS5zb21lVmFsYC5cclxuICogPC9kaXY+XHJcblxyXG4gKiBAYW5pbWF0aW9uc1xyXG4gKiBlbnRlciAtIGhhcHBlbnMgYWZ0ZXIgdGhlIG5nU3dpdGNoIGNvbnRlbnRzIGNoYW5nZSBhbmQgdGhlIG1hdGNoZWQgY2hpbGQgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlIHRoZSBjb250YWluZXJcclxuICogbGVhdmUgLSBoYXBwZW5zIGp1c3QgYWZ0ZXIgdGhlIG5nU3dpdGNoIGNvbnRlbnRzIGNoYW5nZSBhbmQganVzdCBiZWZvcmUgdGhlIGZvcm1lciBjb250ZW50cyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cclxuICpcclxuICogQHVzYWdlXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiA8QU5ZIG5nLXN3aXRjaD1cImV4cHJlc3Npb25cIj5cclxuICogICA8QU5ZIG5nLXN3aXRjaC13aGVuPVwibWF0Y2hWYWx1ZTFcIj4uLi48L0FOWT5cclxuICogICA8QU5ZIG5nLXN3aXRjaC13aGVuPVwibWF0Y2hWYWx1ZTJcIj4uLi48L0FOWT5cclxuICogICA8QU5ZIG5nLXN3aXRjaC1kZWZhdWx0Pi4uLjwvQU5ZPlxyXG4gKiA8L0FOWT5cclxuICogYGBgXHJcbiAqXHJcbiAqXHJcbiAqIEBzY29wZVxyXG4gKiBAcHJpb3JpdHkgMTIwMFxyXG4gKiBAcGFyYW0geyp9IG5nU3dpdGNofG9uIGV4cHJlc3Npb24gdG8gbWF0Y2ggYWdhaW5zdCA8dHQ+bmctc3dpdGNoLXdoZW48L3R0Pi5cclxuICogT24gY2hpbGQgZWxlbWVudHMgYWRkOlxyXG4gKlxyXG4gKiAqIGBuZ1N3aXRjaFdoZW5gOiB0aGUgY2FzZSBzdGF0ZW1lbnQgdG8gbWF0Y2ggYWdhaW5zdC4gSWYgbWF0Y2ggdGhlbiB0aGlzXHJcbiAqICAgY2FzZSB3aWxsIGJlIGRpc3BsYXllZC4gSWYgdGhlIHNhbWUgbWF0Y2ggYXBwZWFycyBtdWx0aXBsZSB0aW1lcywgYWxsIHRoZVxyXG4gKiAgIGVsZW1lbnRzIHdpbGwgYmUgZGlzcGxheWVkLlxyXG4gKiAqIGBuZ1N3aXRjaERlZmF1bHRgOiB0aGUgZGVmYXVsdCBjYXNlIHdoZW4gbm8gb3RoZXIgY2FzZSBtYXRjaC4gSWYgdGhlcmVcclxuICogICBhcmUgbXVsdGlwbGUgZGVmYXVsdCBjYXNlcywgYWxsIG9mIHRoZW0gd2lsbCBiZSBkaXNwbGF5ZWQgd2hlbiBubyBvdGhlclxyXG4gKiAgIGNhc2UgbWF0Y2guXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwic3dpdGNoRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwic2VsZWN0aW9uXCIgbmctb3B0aW9ucz1cIml0ZW0gZm9yIGl0ZW0gaW4gaXRlbXNcIj5cclxuICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8dHQ+c2VsZWN0aW9uPXt7c2VsZWN0aW9ufX08L3R0PlxyXG4gICAgICAgIDxoci8+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoLWNvbnRhaW5lclwiXHJcbiAgICAgICAgICBuZy1zd2l0Y2ggb249XCJzZWxlY3Rpb25cIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoXCIgbmctc3dpdGNoLXdoZW49XCJzZXR0aW5nc1wiPlNldHRpbmdzIERpdjwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtd2hlbj1cImhvbWVcIj5Ib21lIFNwYW48L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoXCIgbmctc3dpdGNoLWRlZmF1bHQ+ZGVmYXVsdDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ3N3aXRjaEV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbJ3NldHRpbmdzJywgJ2hvbWUnLCAnb3RoZXInXTtcclxuICAgICAgICAgICRzY29wZS5zZWxlY3Rpb24gPSAkc2NvcGUuaXRlbXNbMF07XHJcbiAgICAgICAgfV0pO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XHJcbiAgICAgIC5hbmltYXRlLXN3aXRjaC1jb250YWluZXIge1xyXG4gICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBoZWlnaHQ6NDBweDtcclxuICAgICAgICBvdmVyZmxvdzpoaWRkZW47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXN3aXRjaCB7XHJcbiAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctYW5pbWF0ZSB7XHJcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xyXG5cclxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICB0b3A6MDtcclxuICAgICAgICBsZWZ0OjA7XHJcbiAgICAgICAgcmlnaHQ6MDtcclxuICAgICAgICBib3R0b206MDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSxcclxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWVudGVyIHtcclxuICAgICAgICB0b3A6LTUwcHg7XHJcbiAgICAgIH1cclxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWxlYXZlLFxyXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcclxuICAgICAgICB0b3A6MDtcclxuICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgc3dpdGNoRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCdbbmctc3dpdGNoXScpKTtcclxuICAgICAgdmFyIHNlbGVjdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlbGVjdGlvbicpKTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgc3RhcnQgaW4gc2V0dGluZ3MnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xyXG4gICAgICB9KTtcclxuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgdG8gaG9tZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDEpLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KHN3aXRjaEVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Ib21lIFNwYW4vKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGl0KCdzaG91bGQgc2VsZWN0IGRlZmF1bHQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvZGVmYXVsdC8pO1xyXG4gICAgICB9KTtcclxuICAgIDwvZmlsZT5cclxuICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdTd2l0Y2hEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICByZXF1aXJlOiAnbmdTd2l0Y2gnLFxyXG5cclxuICAgIC8vIGFza3MgZm9yICRzY29wZSB0byBmb29sIHRoZSBCQyBjb250cm9sbGVyIG1vZHVsZVxyXG4gICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbiBuZ1N3aXRjaENvbnRyb2xsZXIoKSB7XHJcbiAgICAgdGhpcy5jYXNlcyA9IHt9O1xyXG4gICAgfV0sXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgbmdTd2l0Y2hDb250cm9sbGVyKSB7XHJcbiAgICAgIHZhciB3YXRjaEV4cHIgPSBhdHRyLm5nU3dpdGNoIHx8IGF0dHIub24sXHJcbiAgICAgICAgICBzZWxlY3RlZFRyYW5zY2x1ZGVzID0gW10sXHJcbiAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzID0gW10sXHJcbiAgICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9ucyA9IFtdLFxyXG4gICAgICAgICAgc2VsZWN0ZWRTY29wZXMgPSBbXTtcclxuXHJcbiAgICAgIHZhciBzcGxpY2VGYWN0b3J5ID0gZnVuY3Rpb24oYXJyYXksIGluZGV4KSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7IGFycmF5LnNwbGljZShpbmRleCwgMSk7IH07XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS4kd2F0Y2god2F0Y2hFeHByLCBmdW5jdGlvbiBuZ1N3aXRjaFdhdGNoQWN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGksIGlpO1xyXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgJGFuaW1hdGUuY2FuY2VsKHByZXZpb3VzTGVhdmVBbmltYXRpb25zW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMubGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBzZWxlY3RlZFNjb3Blcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnZXRCbG9ja05vZGVzKHNlbGVjdGVkRWxlbWVudHNbaV0uY2xvbmUpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRTY29wZXNbaV0uJGRlc3Ryb3koKTtcclxuICAgICAgICAgIHZhciBwcm9taXNlID0gcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnNbaV0gPSAkYW5pbWF0ZS5sZWF2ZShzZWxlY3RlZCk7XHJcbiAgICAgICAgICBwcm9taXNlLnRoZW4oc3BsaWNlRmFjdG9yeShwcmV2aW91c0xlYXZlQW5pbWF0aW9ucywgaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHNlbGVjdGVkU2NvcGVzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGlmICgoc2VsZWN0ZWRUcmFuc2NsdWRlcyA9IG5nU3dpdGNoQ29udHJvbGxlci5jYXNlc1snIScgKyB2YWx1ZV0gfHwgbmdTd2l0Y2hDb250cm9sbGVyLmNhc2VzWyc/J10pKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKHNlbGVjdGVkVHJhbnNjbHVkZXMsIGZ1bmN0aW9uKHNlbGVjdGVkVHJhbnNjbHVkZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFRyYW5zY2x1ZGUudHJhbnNjbHVkZShmdW5jdGlvbihjYXNlRWxlbWVudCwgc2VsZWN0ZWRTY29wZSkge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkU2NvcGVzLnB1c2goc2VsZWN0ZWRTY29wZSk7XHJcbiAgICAgICAgICAgICAgdmFyIGFuY2hvciA9IHNlbGVjdGVkVHJhbnNjbHVkZS5lbGVtZW50O1xyXG4gICAgICAgICAgICAgIGNhc2VFbGVtZW50W2Nhc2VFbGVtZW50Lmxlbmd0aCsrXSA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyBlbmQgbmdTd2l0Y2hXaGVuOiAnKTtcclxuICAgICAgICAgICAgICB2YXIgYmxvY2sgPSB7IGNsb25lOiBjYXNlRWxlbWVudCB9O1xyXG5cclxuICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLnB1c2goYmxvY2spO1xyXG4gICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNhc2VFbGVtZW50LCBhbmNob3IucGFyZW50KCksIGFuY2hvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbnZhciBuZ1N3aXRjaFdoZW5EaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XHJcbiAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxyXG4gIHByaW9yaXR5OiAxMjAwLFxyXG4gIHJlcXVpcmU6ICdebmdTd2l0Y2gnLFxyXG4gIG11bHRpRWxlbWVudDogdHJ1ZSxcclxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwsICR0cmFuc2NsdWRlKSB7XHJcbiAgICBjdHJsLmNhc2VzWychJyArIGF0dHJzLm5nU3dpdGNoV2hlbl0gPSAoY3RybC5jYXNlc1snIScgKyBhdHRycy5uZ1N3aXRjaFdoZW5dIHx8IFtdKTtcclxuICAgIGN0cmwuY2FzZXNbJyEnICsgYXR0cnMubmdTd2l0Y2hXaGVuXS5wdXNoKHsgdHJhbnNjbHVkZTogJHRyYW5zY2x1ZGUsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbnZhciBuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XHJcbiAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxyXG4gIHByaW9yaXR5OiAxMjAwLFxyXG4gIHJlcXVpcmU6ICdebmdTd2l0Y2gnLFxyXG4gIG11bHRpRWxlbWVudDogdHJ1ZSxcclxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcclxuICAgIGN0cmwuY2FzZXNbJz8nXSA9IChjdHJsLmNhc2VzWyc/J10gfHwgW10pO1xyXG4gICAgY3RybC5jYXNlc1snPyddLnB1c2goeyB0cmFuc2NsdWRlOiAkdHJhbnNjbHVkZSwgZWxlbWVudDogZWxlbWVudCB9KTtcclxuICAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nVHJhbnNjbHVkZVxyXG4gKiBAcmVzdHJpY3QgRUFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEaXJlY3RpdmUgdGhhdCBtYXJrcyB0aGUgaW5zZXJ0aW9uIHBvaW50IGZvciB0aGUgdHJhbnNjbHVkZWQgRE9NIG9mIHRoZSBuZWFyZXN0IHBhcmVudCBkaXJlY3RpdmUgdGhhdCB1c2VzIHRyYW5zY2x1c2lvbi5cclxuICpcclxuICogQW55IGV4aXN0aW5nIGNvbnRlbnQgb2YgdGhlIGVsZW1lbnQgdGhhdCB0aGlzIGRpcmVjdGl2ZSBpcyBwbGFjZWQgb24gd2lsbCBiZSByZW1vdmVkIGJlZm9yZSB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBpcyBpbnNlcnRlZC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cInRyYW5zY2x1ZGVFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd0cmFuc2NsdWRlRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgLmRpcmVjdGl2ZSgncGFuZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICBzY29wZTogeyB0aXRsZTonQCcgfSxcclxuICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogZ3JheVwiPnt7dGl0bGV9fTwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPG5nLXRyYW5zY2x1ZGU+PC9uZy10cmFuc2NsdWRlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcclxuICAgICAgICAgICAgIH07XHJcbiAgICAgICAgIH0pXHJcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gJ0xvcmVtIElwc3VtJztcclxuICAgICAgICAgICAkc2NvcGUudGV4dCA9ICdOZXF1ZSBwb3JybyBxdWlzcXVhbSBlc3QgcXVpIGRvbG9yZW0gaXBzdW0gcXVpYSBkb2xvci4uLic7XHJcbiAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidGl0bGVcIj48YnI+XHJcbiAgICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInRleHRcIj48L3RleHRhcmVhPiA8YnIvPlxyXG4gICAgICAgICA8cGFuZSB0aXRsZT1cInt7dGl0bGV9fVwiPnt7dGV4dH19PC9wYW5lPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhdmUgdHJhbnNjbHVkZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0aXRsZScpKTtcclxuICAgICAgICAgIHRpdGxlRWxlbWVudC5jbGVhcigpO1xyXG4gICAgICAgICAgdGl0bGVFbGVtZW50LnNlbmRLZXlzKCdUSVRMRScpO1xyXG4gICAgICAgICAgdmFyIHRleHRFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGV4dCcpKTtcclxuICAgICAgICAgIHRleHRFbGVtZW50LmNsZWFyKCk7XHJcbiAgICAgICAgICB0ZXh0RWxlbWVudC5zZW5kS2V5cygnVEVYVCcpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndGl0bGUnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdUSVRMRScpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndGV4dCcpKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1RFWFQnKTtcclxuICAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICpcclxuICovXHJcbnZhciBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XHJcbiAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgY29udHJvbGxlciwgJHRyYW5zY2x1ZGUpIHtcclxuICAgIGlmICghJHRyYW5zY2x1ZGUpIHtcclxuICAgICAgdGhyb3cgbWluRXJyKCduZ1RyYW5zY2x1ZGUnKSgnb3JwaGFuJyxcclxuICAgICAgICdJbGxlZ2FsIHVzZSBvZiBuZ1RyYW5zY2x1ZGUgZGlyZWN0aXZlIGluIHRoZSB0ZW1wbGF0ZSEgJyArXHJcbiAgICAgICAnTm8gcGFyZW50IGRpcmVjdGl2ZSB0aGF0IHJlcXVpcmVzIGEgdHJhbnNjbHVzaW9uIGZvdW5kLiAnICtcclxuICAgICAgICdFbGVtZW50OiB7MH0nLFxyXG4gICAgICAgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICAkdHJhbnNjbHVkZShmdW5jdGlvbihjbG9uZSkge1xyXG4gICAgICAkZWxlbWVudC5lbXB0eSgpO1xyXG4gICAgICAkZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIHNjcmlwdFxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogTG9hZCB0aGUgY29udGVudCBvZiBhIGA8c2NyaXB0PmAgZWxlbWVudCBpbnRvIHtAbGluayBuZy4kdGVtcGxhdGVDYWNoZSBgJHRlbXBsYXRlQ2FjaGVgfSwgc28gdGhhdCB0aGVcclxuICogdGVtcGxhdGUgY2FuIGJlIHVzZWQgYnkge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0luY2x1ZGUgYG5nSW5jbHVkZWB9LFxyXG4gKiB7QGxpbmsgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3IGBuZ1ZpZXdgfSwgb3Ige0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS4gVGhlIHR5cGUgb2YgdGhlXHJcbiAqIGA8c2NyaXB0PmAgZWxlbWVudCBtdXN0IGJlIHNwZWNpZmllZCBhcyBgdGV4dC9uZy10ZW1wbGF0ZWAsIGFuZCBhIGNhY2hlIG5hbWUgZm9yIHRoZSB0ZW1wbGF0ZSBtdXN0IGJlXHJcbiAqIGFzc2lnbmVkIHRocm91Z2ggdGhlIGVsZW1lbnQncyBgaWRgLCB3aGljaCBjYW4gdGhlbiBiZSB1c2VkIGFzIGEgZGlyZWN0aXZlJ3MgYHRlbXBsYXRlVXJsYC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgTXVzdCBiZSBzZXQgdG8gYCd0ZXh0L25nLXRlbXBsYXRlJ2AuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDYWNoZSBuYW1lIG9mIHRoZSB0ZW1wbGF0ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICA8ZXhhbXBsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxzY3JpcHQgdHlwZT1cInRleHQvbmctdGVtcGxhdGVcIiBpZD1cIi90cGwuaHRtbFwiPlxyXG4gICAgICAgIENvbnRlbnQgb2YgdGhlIHRlbXBsYXRlLlxyXG4gICAgICA8L3NjcmlwdD5cclxuXHJcbiAgICAgIDxhIG5nLWNsaWNrPVwiY3VycmVudFRwbD0nL3RwbC5odG1sJ1wiIGlkPVwidHBsLWxpbmtcIj5Mb2FkIGlubGluZWQgdGVtcGxhdGU8L2E+XHJcbiAgICAgIDxkaXYgaWQ9XCJ0cGwtY29udGVudFwiIG5nLWluY2x1ZGUgc3JjPVwiY3VycmVudFRwbFwiPjwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUgZGVmaW5lZCBpbnNpZGUgc2NyaXB0IHRhZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjdHBsLWxpbmsnKSkuY2xpY2soKTtcclxuICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyN0cGwtY29udGVudCcpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL0NvbnRlbnQgb2YgdGhlIHRlbXBsYXRlLyk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBzY3JpcHREaXJlY3RpdmUgPSBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgIHRlcm1pbmFsOiB0cnVlLFxyXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xyXG4gICAgICBpZiAoYXR0ci50eXBlID09ICd0ZXh0L25nLXRlbXBsYXRlJykge1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZVVybCA9IGF0dHIuaWQsXHJcbiAgICAgICAgICAgIC8vIElFIGlzIG5vdCBjb25zaXN0ZW50LCBpbiBzY3JpcHRzIHdlIGhhdmUgdG8gcmVhZCAudGV4dCBidXQgaW4gb3RoZXIgbm9kZXMgd2UgaGF2ZSB0byByZWFkIC50ZXh0Q29udGVudFxyXG4gICAgICAgICAgICB0ZXh0ID0gZWxlbWVudFswXS50ZXh0O1xyXG5cclxuICAgICAgICAkdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGVVcmwsIHRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG52YXIgbmdPcHRpb25zTWluRXJyID0gbWluRXJyKCduZ09wdGlvbnMnKTtcclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgc2VsZWN0XHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBIVE1MIGBTRUxFQ1RgIGVsZW1lbnQgd2l0aCBhbmd1bGFyIGRhdGEtYmluZGluZy5cclxuICpcclxuICogIyBgbmdPcHRpb25zYFxyXG4gKlxyXG4gKiBUaGUgYG5nT3B0aW9uc2AgYXR0cmlidXRlIGNhbiBiZSB1c2VkIHRvIGR5bmFtaWNhbGx5IGdlbmVyYXRlIGEgbGlzdCBvZiBgPG9wdGlvbj5gXHJcbiAqIGVsZW1lbnRzIGZvciB0aGUgYDxzZWxlY3Q+YCBlbGVtZW50IHVzaW5nIHRoZSBhcnJheSBvciBvYmplY3Qgb2J0YWluZWQgYnkgZXZhbHVhdGluZyB0aGVcclxuICogYG5nT3B0aW9uc2AgY29tcHJlaGVuc2lvbl9leHByZXNzaW9uLlxyXG4gKlxyXG4gKiBXaGVuIGFuIGl0ZW0gaW4gdGhlIGA8c2VsZWN0PmAgbWVudSBpcyBzZWxlY3RlZCwgdGhlIGFycmF5IGVsZW1lbnQgb3Igb2JqZWN0IHByb3BlcnR5XHJcbiAqIHJlcHJlc2VudGVkIGJ5IHRoZSBzZWxlY3RlZCBvcHRpb24gd2lsbCBiZSBib3VuZCB0byB0aGUgbW9kZWwgaWRlbnRpZmllZCBieSB0aGUgYG5nTW9kZWxgXHJcbiAqIGRpcmVjdGl2ZS5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIGBuZ01vZGVsYCBjb21wYXJlcyBieSByZWZlcmVuY2UsIG5vdCB2YWx1ZS4gVGhpcyBpcyBpbXBvcnRhbnQgd2hlbiBiaW5kaW5nIHRvIGFuXHJcbiAqIGFycmF5IG9mIG9iamVjdHMuIFNlZSBhbiBleGFtcGxlIFtpbiB0aGlzIGpzZmlkZGxlXShodHRwOi8vanNmaWRkbGUubmV0L3FXelRiLykuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBPcHRpb25hbGx5LCBhIHNpbmdsZSBoYXJkLWNvZGVkIGA8b3B0aW9uPmAgZWxlbWVudCwgd2l0aCB0aGUgdmFsdWUgc2V0IHRvIGFuIGVtcHR5IHN0cmluZywgY2FuXHJcbiAqIGJlIG5lc3RlZCBpbnRvIHRoZSBgPHNlbGVjdD5gIGVsZW1lbnQuIFRoaXMgZWxlbWVudCB3aWxsIHRoZW4gcmVwcmVzZW50IHRoZSBgbnVsbGAgb3IgXCJub3Qgc2VsZWN0ZWRcIlxyXG4gKiBvcHRpb24uIFNlZSBleGFtcGxlIGJlbG93IGZvciBkZW1vbnN0cmF0aW9uLlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGU6KiogYG5nT3B0aW9uc2AgcHJvdmlkZXMgYW4gaXRlcmF0b3IgZmFjaWxpdHkgZm9yIHRoZSBgPG9wdGlvbj5gIGVsZW1lbnQgd2hpY2ggc2hvdWxkIGJlIHVzZWQgaW5zdGVhZFxyXG4gKiBvZiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IG5nUmVwZWF0fSB3aGVuIHlvdSB3YW50IHRoZVxyXG4gKiBgc2VsZWN0YCBtb2RlbCB0byBiZSBib3VuZCB0byBhIG5vbi1zdHJpbmcgdmFsdWUuIFRoaXMgaXMgYmVjYXVzZSBhbiBvcHRpb24gZWxlbWVudCBjYW4gb25seVxyXG4gKiBiZSBib3VuZCB0byBzdHJpbmcgdmFsdWVzIGF0IHByZXNlbnQuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBUaGUgY29udHJvbCBpcyBjb25zaWRlcmVkIHZhbGlkIG9ubHkgaWYgdmFsdWUgaXMgZW50ZXJlZC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxyXG4gKiBAcGFyYW0ge2NvbXByZWhlbnNpb25fZXhwcmVzc2lvbj19IG5nT3B0aW9ucyBpbiBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtczpcclxuICpcclxuICogICAqIGZvciBhcnJheSBkYXRhIHNvdXJjZXM6XHJcbiAqICAgICAqIGBsYWJlbGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxyXG4gKiAgICAgKiBgc2VsZWN0YCAqKmBhc2AqKiBgbGFiZWxgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWBcclxuICogICAgICogYGxhYmVsYCAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXHJcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgICoqYHRyYWNrIGJ5YCoqIGB0cmFja2V4cHJgXHJcbiAqICAgKiBmb3Igb2JqZWN0IGRhdGEgc291cmNlczpcclxuICogICAgICogYGxhYmVsYCAqKmBmb3IgKGAqKmBrZXlgICoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcclxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBmb3IgKGAqKmBrZXlgICoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcclxuICogICAgICogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgICoqYGZvciAoYCoqYGtleWAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXHJcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYFxyXG4gKiAgICAgICAgICoqYGZvcmAgYChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcclxuICpcclxuICogV2hlcmU6XHJcbiAqXHJcbiAqICAgKiBgYXJyYXlgIC8gYG9iamVjdGA6IGFuIGV4cHJlc3Npb24gd2hpY2ggZXZhbHVhdGVzIHRvIGFuIGFycmF5IC8gb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICogICAqIGB2YWx1ZWA6IGxvY2FsIHZhcmlhYmxlIHdoaWNoIHdpbGwgcmVmZXIgdG8gZWFjaCBpdGVtIGluIHRoZSBgYXJyYXlgIG9yIGVhY2ggcHJvcGVydHkgdmFsdWVcclxuICogICAgICBvZiBgb2JqZWN0YCBkdXJpbmcgaXRlcmF0aW9uLlxyXG4gKiAgICogYGtleWA6IGxvY2FsIHZhcmlhYmxlIHdoaWNoIHdpbGwgcmVmZXIgdG8gYSBwcm9wZXJ0eSBuYW1lIGluIGBvYmplY3RgIGR1cmluZyBpdGVyYXRpb24uXHJcbiAqICAgKiBgbGFiZWxgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIHRoZSBsYWJlbCBmb3IgYDxvcHRpb24+YCBlbGVtZW50LiBUaGVcclxuICogICAgIGBleHByZXNzaW9uYCB3aWxsIG1vc3QgbGlrZWx5IHJlZmVyIHRvIHRoZSBgdmFsdWVgIHZhcmlhYmxlIChlLmcuIGB2YWx1ZS5wcm9wZXJ0eU5hbWVgKS5cclxuICogICAqIGBzZWxlY3RgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIGJvdW5kIHRvIHRoZSBtb2RlbCBvZiB0aGUgcGFyZW50IGA8c2VsZWN0PmBcclxuICogICAgICBlbGVtZW50LiBJZiBub3Qgc3BlY2lmaWVkLCBgc2VsZWN0YCBleHByZXNzaW9uIHdpbGwgZGVmYXVsdCB0byBgdmFsdWVgLlxyXG4gKiAgICogYGdyb3VwYDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSB1c2VkIHRvIGdyb3VwIG9wdGlvbnMgdXNpbmcgdGhlIGA8b3B0Z3JvdXA+YFxyXG4gKiAgICAgIERPTSBlbGVtZW50LlxyXG4gKiAgICogYHRyYWNrZXhwcmA6IFVzZWQgd2hlbiB3b3JraW5nIHdpdGggYW4gYXJyYXkgb2Ygb2JqZWN0cy4gVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZVxyXG4gKiAgICAgIHVzZWQgdG8gaWRlbnRpZnkgdGhlIG9iamVjdHMgaW4gdGhlIGFycmF5LiBUaGUgYHRyYWNrZXhwcmAgd2lsbCBtb3N0IGxpa2VseSByZWZlciB0byB0aGVcclxuICogICAgIGB2YWx1ZWAgdmFyaWFibGUgKGUuZy4gYHZhbHVlLnByb3BlcnR5TmFtZWApLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbW9kdWxlPVwic2VsZWN0RXhhbXBsZVwiPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3NlbGVjdEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jb2xvcnMgPSBbXHJcbiAgICAgICAgICAgICAge25hbWU6J2JsYWNrJywgc2hhZGU6J2RhcmsnfSxcclxuICAgICAgICAgICAgICB7bmFtZTond2hpdGUnLCBzaGFkZTonbGlnaHQnfSxcclxuICAgICAgICAgICAgICB7bmFtZToncmVkJywgc2hhZGU6J2RhcmsnfSxcclxuICAgICAgICAgICAgICB7bmFtZTonYmx1ZScsIHNoYWRlOidkYXJrJ30sXHJcbiAgICAgICAgICAgICAge25hbWU6J3llbGxvdycsIHNoYWRlOidsaWdodCd9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICRzY29wZS5teUNvbG9yID0gJHNjb3BlLmNvbG9yc1syXTsgLy8gcmVkXHJcbiAgICAgICAgICB9XSk7XHJcbiAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbG9yIGluIGNvbG9yc1wiPlxyXG4gICAgICAgICAgICAgIE5hbWU6IDxpbnB1dCBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIj5cclxuICAgICAgICAgICAgICBbPGEgaHJlZiBuZy1jbGljaz1cImNvbG9ycy5zcGxpY2UoJGluZGV4LCAxKVwiPlg8L2E+XVxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgWzxhIGhyZWYgbmctY2xpY2s9XCJjb2xvcnMucHVzaCh7fSlcIj5hZGQ8L2E+XVxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICBDb2xvciAobnVsbCBub3QgYWxsb3dlZCk6XHJcbiAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGZvciBjb2xvciBpbiBjb2xvcnNcIj48L3NlbGVjdD48YnI+XHJcblxyXG4gICAgICAgICAgQ29sb3IgKG51bGwgYWxsb3dlZCk6XHJcbiAgICAgICAgICA8c3BhbiAgY2xhc3M9XCJudWxsYWJsZVwiPlxyXG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGZvciBjb2xvciBpbiBjb2xvcnNcIj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+LS0gY2hvb3NlIGNvbG9yIC0tPC9vcHRpb24+XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgPC9zcGFuPjxici8+XHJcblxyXG4gICAgICAgICAgQ29sb3IgZ3JvdXBlZCBieSBzaGFkZTpcclxuICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZ3JvdXAgYnkgY29sb3Iuc2hhZGUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPlxyXG4gICAgICAgICAgPC9zZWxlY3Q+PGJyLz5cclxuXHJcblxyXG4gICAgICAgICAgU2VsZWN0IDxhIGhyZWYgbmctY2xpY2s9XCJteUNvbG9yID0geyBuYW1lOidub3QgaW4gbGlzdCcsIHNoYWRlOiAnb3RoZXInIH1cIj5ib2d1czwvYT4uPGJyPlxyXG4gICAgICAgICAgPGhyLz5cclxuICAgICAgICAgIEN1cnJlbnRseSBzZWxlY3RlZDoge3sge3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9IH19XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyOnNvbGlkIDFweCBibGFjazsgaGVpZ2h0OjIwcHhcIlxyXG4gICAgICAgICAgICAgICBuZy1zdHlsZT1cInsnYmFja2dyb3VuZC1jb2xvcic6bXlDb2xvci5uYW1lfVwiPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLW9wdGlvbnMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdyZWQnKTtcclxuICAgICAgICAgICBlbGVtZW50LmFsbChieS5tb2RlbCgnbXlDb2xvcicpKS5maXJzdCgpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkuY3NzKCdzZWxlY3RbbmctbW9kZWw9XCJteUNvbG9yXCJdIG9wdGlvbicpKS5maXJzdCgpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygne3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9JykpLmdldFRleHQoKSkudG9NYXRjaCgnYmxhY2snKTtcclxuICAgICAgICAgICBlbGVtZW50KGJ5LmNzcygnLm51bGxhYmxlIHNlbGVjdFtuZy1tb2RlbD1cIm15Q29sb3JcIl0nKSkuY2xpY2soKTtcclxuICAgICAgICAgICBlbGVtZW50LmFsbChieS5jc3MoJy5udWxsYWJsZSBzZWxlY3RbbmctbW9kZWw9XCJteUNvbG9yXCJdIG9wdGlvbicpKS5maXJzdCgpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygne3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9JykpLmdldFRleHQoKSkudG9NYXRjaCgnbnVsbCcpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbnZhciBuZ09wdGlvbnNEaXJlY3RpdmUgPSB2YWx1ZUZuKHtcclxuICByZXN0cmljdDogJ0EnLFxyXG4gIHRlcm1pbmFsOiB0cnVlXHJcbn0pO1xyXG5cclxuLy8ganNoaW50IG1heGxlbjogZmFsc2VcclxudmFyIHNlbGVjdERpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLCAnJHBhcnNlJywgZnVuY3Rpb24oJGNvbXBpbGUsICAgJHBhcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLzAwMDAxMTExMTExMTExMDAwMDAwMDAwMDAyMjIyMjIyMjIyMDAwMDAwMDAwMDAwMDAwMDAwMDAwMzMzMzMzMzMzMzAwMDAwMDAwMDAwMDAwNDQ0NDQ0NDQ0NDQ0NDQ0MDAwMDAwMDAwNTU1NTU1NTU1NTU1NTU1MDAwMDAwMDY2NjY2NjY2NjY2NjY2NjAwMDAwMDAwMDAwMDAwMDc3Nzc3Nzc3NzcwMDAwMDAwMDAwMDAwMDAwMDAwODg4ODg4ODg4OFxyXG4gIHZhciBOR19PUFRJT05TX1JFR0VYUCA9IC9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccytncm91cFxccytieVxccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd10qKXwoPzpcXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/JC8sXHJcbiAgICAgIG51bGxNb2RlbEN0cmwgPSB7JHNldFZpZXdWYWx1ZTogbm9vcH07XHJcbi8vIGpzaGludCBtYXhsZW46IDEwMFxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgIHJlcXVpcmU6IFsnc2VsZWN0JywgJz9uZ01vZGVsJ10sXHJcbiAgICBjb250cm9sbGVyOiBbJyRlbGVtZW50JywgJyRzY29wZScsICckYXR0cnMnLCBmdW5jdGlvbigkZWxlbWVudCwgJHNjb3BlLCAkYXR0cnMpIHtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgb3B0aW9uc01hcCA9IHt9LFxyXG4gICAgICAgICAgbmdNb2RlbEN0cmwgPSBudWxsTW9kZWxDdHJsLFxyXG4gICAgICAgICAgbnVsbE9wdGlvbixcclxuICAgICAgICAgIHVua25vd25PcHRpb247XHJcblxyXG5cclxuICAgICAgc2VsZi5kYXRhYm91bmQgPSAkYXR0cnMubmdNb2RlbDtcclxuXHJcblxyXG4gICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbihuZ01vZGVsQ3RybF8sIG51bGxPcHRpb25fLCB1bmtub3duT3B0aW9uXykge1xyXG4gICAgICAgIG5nTW9kZWxDdHJsID0gbmdNb2RlbEN0cmxfO1xyXG4gICAgICAgIG51bGxPcHRpb24gPSBudWxsT3B0aW9uXztcclxuICAgICAgICB1bmtub3duT3B0aW9uID0gdW5rbm93bk9wdGlvbl87XHJcbiAgICAgIH07XHJcblxyXG5cclxuICAgICAgc2VsZi5hZGRPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KHZhbHVlLCAnXCJvcHRpb24gdmFsdWVcIicpO1xyXG4gICAgICAgIG9wdGlvbnNNYXBbdmFsdWVdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgPT0gdmFsdWUpIHtcclxuICAgICAgICAgICRlbGVtZW50LnZhbCh2YWx1ZSk7XHJcbiAgICAgICAgICBpZiAodW5rbm93bk9wdGlvbi5wYXJlbnQoKSkgdW5rbm93bk9wdGlvbi5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM4MTQ1OVxyXG4gICAgICAgIC8vIEFkZGluZyBhbiA8b3B0aW9uIHNlbGVjdGVkPVwic2VsZWN0ZWRcIj4gZWxlbWVudCB0byBhIDxzZWxlY3QgcmVxdWlyZWQ9XCJyZXF1aXJlZFwiPiBzaG91bGRcclxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHNlbGVjdCB0aGUgbmV3IGVsZW1lbnRcclxuICAgICAgICBpZiAoZWxlbWVudFswXS5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgIGVsZW1lbnRbMF0uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcblxyXG4gICAgICBzZWxmLnJlbW92ZU9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzT3B0aW9uKHZhbHVlKSkge1xyXG4gICAgICAgICAgZGVsZXRlIG9wdGlvbnNNYXBbdmFsdWVdO1xyXG4gICAgICAgICAgaWYgKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgPT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJVbmtub3duT3B0aW9uKHZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG5cclxuICAgICAgc2VsZi5yZW5kZXJVbmtub3duT3B0aW9uID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgdmFyIHVua25vd25WYWwgPSAnPyAnICsgaGFzaEtleSh2YWwpICsgJyA/JztcclxuICAgICAgICB1bmtub3duT3B0aW9uLnZhbCh1bmtub3duVmFsKTtcclxuICAgICAgICAkZWxlbWVudC5wcmVwZW5kKHVua25vd25PcHRpb24pO1xyXG4gICAgICAgICRlbGVtZW50LnZhbCh1bmtub3duVmFsKTtcclxuICAgICAgICB1bmtub3duT3B0aW9uLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7IC8vIG5lZWRlZCBmb3IgSUVcclxuICAgICAgfTtcclxuXHJcblxyXG4gICAgICBzZWxmLmhhc09wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnNNYXAuaGFzT3duUHJvcGVydHkodmFsdWUpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBkaXNhYmxlIHVua25vd24gb3B0aW9uIHNvIHRoYXQgd2UgZG9uJ3QgZG8gd29yayB3aGVuIHRoZSB3aG9sZSBzZWxlY3QgaXMgYmVpbmcgZGVzdHJveWVkXHJcbiAgICAgICAgc2VsZi5yZW5kZXJVbmtub3duT3B0aW9uID0gbm9vcDtcclxuICAgICAgfSk7XHJcbiAgICB9XSxcclxuXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcclxuICAgICAgLy8gaWYgbmdNb2RlbCBpcyBub3QgZGVmaW5lZCwgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZ1xyXG4gICAgICBpZiAoIWN0cmxzWzFdKSByZXR1cm47XHJcblxyXG4gICAgICB2YXIgc2VsZWN0Q3RybCA9IGN0cmxzWzBdLFxyXG4gICAgICAgICAgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXSxcclxuICAgICAgICAgIG11bHRpcGxlID0gYXR0ci5tdWx0aXBsZSxcclxuICAgICAgICAgIG9wdGlvbnNFeHAgPSBhdHRyLm5nT3B0aW9ucyxcclxuICAgICAgICAgIG51bGxPcHRpb24gPSBmYWxzZSwgLy8gaWYgZmFsc2UsIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBzZWxlY3QgaXQgKHVzZWQgYnkgbmdPcHRpb25zKVxyXG4gICAgICAgICAgZW1wdHlPcHRpb24sXHJcbiAgICAgICAgICByZW5kZXJTY2hlZHVsZWQgPSBmYWxzZSxcclxuICAgICAgICAgIC8vIHdlIGNhbid0IGp1c3QganFMaXRlKCc8b3B0aW9uPicpIHNpbmNlIGpxTGl0ZSBpcyBub3Qgc21hcnQgZW5vdWdoXHJcbiAgICAgICAgICAvLyB0byBjcmVhdGUgaXQgaW4gPHNlbGVjdD4gYW5kIElFIGJhcmZzIG90aGVyd2lzZS5cclxuICAgICAgICAgIG9wdGlvblRlbXBsYXRlID0ganFMaXRlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKSxcclxuICAgICAgICAgIG9wdEdyb3VwVGVtcGxhdGUgPWpxTGl0ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRncm91cCcpKSxcclxuICAgICAgICAgIHVua25vd25PcHRpb24gPSBvcHRpb25UZW1wbGF0ZS5jbG9uZSgpO1xyXG5cclxuICAgICAgLy8gZmluZCBcIm51bGxcIiBvcHRpb25cclxuICAgICAgZm9yKHZhciBpID0gMCwgY2hpbGRyZW4gPSBlbGVtZW50LmNoaWxkcmVuKCksIGlpID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgIGlmIChjaGlsZHJlbltpXS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgIGVtcHR5T3B0aW9uID0gbnVsbE9wdGlvbiA9IGNoaWxkcmVuLmVxKGkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBzZWxlY3RDdHJsLmluaXQobmdNb2RlbEN0cmwsIG51bGxPcHRpb24sIHVua25vd25PcHRpb24pO1xyXG5cclxuICAgICAgLy8gcmVxdWlyZWQgdmFsaWRhdG9yXHJcbiAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgIG5nTW9kZWxDdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIHJldHVybiAhdmFsdWUgfHwgdmFsdWUubGVuZ3RoID09PSAwO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChvcHRpb25zRXhwKSBzZXR1cEFzT3B0aW9ucyhzY29wZSwgZWxlbWVudCwgbmdNb2RlbEN0cmwpO1xyXG4gICAgICBlbHNlIGlmIChtdWx0aXBsZSkgc2V0dXBBc011bHRpcGxlKHNjb3BlLCBlbGVtZW50LCBuZ01vZGVsQ3RybCk7XHJcbiAgICAgIGVsc2Ugc2V0dXBBc1NpbmdsZShzY29wZSwgZWxlbWVudCwgbmdNb2RlbEN0cmwsIHNlbGVjdEN0cmwpO1xyXG5cclxuXHJcbiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblxyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0dXBBc1NpbmdsZShzY29wZSwgc2VsZWN0RWxlbWVudCwgbmdNb2RlbEN0cmwsIHNlbGVjdEN0cmwpIHtcclxuICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgdmlld1ZhbHVlID0gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZTtcclxuXHJcbiAgICAgICAgICBpZiAoc2VsZWN0Q3RybC5oYXNPcHRpb24odmlld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICBpZiAodW5rbm93bk9wdGlvbi5wYXJlbnQoKSkgdW5rbm93bk9wdGlvbi5yZW1vdmUoKTtcclxuICAgICAgICAgICAgc2VsZWN0RWxlbWVudC52YWwodmlld1ZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHZpZXdWYWx1ZSA9PT0gJycpIGVtcHR5T3B0aW9uLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7IC8vIHRvIG1ha2UgSUU5IGhhcHB5XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoaXNVbmRlZmluZWQodmlld1ZhbHVlKSAmJiBlbXB0eU9wdGlvbikge1xyXG4gICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQudmFsKCcnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZWxlY3RDdHJsLnJlbmRlclVua25vd25PcHRpb24odmlld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAodW5rbm93bk9wdGlvbi5wYXJlbnQoKSkgdW5rbm93bk9wdGlvbi5yZW1vdmUoKTtcclxuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShzZWxlY3RFbGVtZW50LnZhbCgpKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBzZXR1cEFzTXVsdGlwbGUoc2NvcGUsIHNlbGVjdEVsZW1lbnQsIGN0cmwpIHtcclxuICAgICAgICB2YXIgbGFzdFZpZXc7XHJcbiAgICAgICAgY3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgaXRlbXMgPSBuZXcgSGFzaE1hcChjdHJsLiR2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgZm9yRWFjaChzZWxlY3RFbGVtZW50LmZpbmQoJ29wdGlvbicpLCBmdW5jdGlvbihvcHRpb24pIHtcclxuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gaXNEZWZpbmVkKGl0ZW1zLmdldChvcHRpb24udmFsdWUpKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHdlIGhhdmUgdG8gZG8gaXQgb24gZWFjaCB3YXRjaCBzaW5jZSBuZ01vZGVsIHdhdGNoZXMgcmVmZXJlbmNlLCBidXRcclxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHdvcmsgb2YgYW4gYXJyYXksIHNvIHdlIG5lZWQgdG8gc2VlIGlmIGFueXRoaW5nIHdhcyBpbnNlcnRlZC9yZW1vdmVkXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIHNlbGVjdE11bHRpcGxlV2F0Y2goKSB7XHJcbiAgICAgICAgICBpZiAoIWVxdWFscyhsYXN0VmlldywgY3RybC4kdmlld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICBsYXN0VmlldyA9IHNoYWxsb3dDb3B5KGN0cmwuJHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGN0cmwuJHJlbmRlcigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZWxlY3RFbGVtZW50Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGFycmF5ID0gW107XHJcbiAgICAgICAgICAgIGZvckVhY2goc2VsZWN0RWxlbWVudC5maW5kKCdvcHRpb24nKSwgZnVuY3Rpb24ob3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaChvcHRpb24udmFsdWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShhcnJheSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0dXBBc09wdGlvbnMoc2NvcGUsIHNlbGVjdEVsZW1lbnQsIGN0cmwpIHtcclxuICAgICAgICB2YXIgbWF0Y2g7XHJcblxyXG4gICAgICAgIGlmICghKG1hdGNoID0gb3B0aW9uc0V4cC5tYXRjaChOR19PUFRJT05TX1JFR0VYUCkpKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZ09wdGlvbnNNaW5FcnIoJ2lleHAnLFxyXG4gICAgICAgICAgICBcIkV4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiBcIiArXHJcbiAgICAgICAgICAgIFwiJ19zZWxlY3RfIChhcyBfbGFiZWxfKT8gZm9yIChfa2V5XywpP192YWx1ZV8gaW4gX2NvbGxlY3Rpb25fJ1wiICtcclxuICAgICAgICAgICAgXCIgYnV0IGdvdCAnezB9Jy4gRWxlbWVudDogezF9XCIsXHJcbiAgICAgICAgICAgIG9wdGlvbnNFeHAsIHN0YXJ0aW5nVGFnKHNlbGVjdEVsZW1lbnQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkaXNwbGF5Rm4gPSAkcGFyc2UobWF0Y2hbMl0gfHwgbWF0Y2hbMV0pLFxyXG4gICAgICAgICAgICB2YWx1ZU5hbWUgPSBtYXRjaFs0XSB8fCBtYXRjaFs2XSxcclxuICAgICAgICAgICAga2V5TmFtZSA9IG1hdGNoWzVdLFxyXG4gICAgICAgICAgICBncm91cEJ5Rm4gPSAkcGFyc2UobWF0Y2hbM10gfHwgJycpLFxyXG4gICAgICAgICAgICB2YWx1ZUZuID0gJHBhcnNlKG1hdGNoWzJdID8gbWF0Y2hbMV0gOiB2YWx1ZU5hbWUpLFxyXG4gICAgICAgICAgICB2YWx1ZXNGbiA9ICRwYXJzZShtYXRjaFs3XSksXHJcbiAgICAgICAgICAgIHRyYWNrID0gbWF0Y2hbOF0sXHJcbiAgICAgICAgICAgIHRyYWNrRm4gPSB0cmFjayA/ICRwYXJzZShtYXRjaFs4XSkgOiBudWxsLFxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGFuIGFycmF5IG9mIGFycmF5IG9mIGV4aXN0aW5nIG9wdGlvbiBncm91cHMgaW4gRE9NLlxyXG4gICAgICAgICAgICAvLyBXZSB0cnkgdG8gcmV1c2UgdGhlc2UgaWYgcG9zc2libGVcclxuICAgICAgICAgICAgLy8gLSBvcHRpb25Hcm91cHNDYWNoZVswXSBpcyB0aGUgb3B0aW9ucyB3aXRoIG5vIG9wdGlvbiBncm91cFxyXG4gICAgICAgICAgICAvLyAtIG9wdGlvbkdyb3Vwc0NhY2hlWz9dWzBdIGlzIHRoZSBwYXJlbnQ6IGVpdGhlciB0aGUgU0VMRUNUIG9yIE9QVEdST1VQIGVsZW1lbnRcclxuICAgICAgICAgICAgb3B0aW9uR3JvdXBzQ2FjaGUgPSBbW3tlbGVtZW50OiBzZWxlY3RFbGVtZW50LCBsYWJlbDonJ31dXTtcclxuXHJcbiAgICAgICAgaWYgKG51bGxPcHRpb24pIHtcclxuICAgICAgICAgIC8vIGNvbXBpbGUgdGhlIGVsZW1lbnQgc2luY2UgdGhlcmUgbWlnaHQgYmUgYmluZGluZ3MgaW4gaXRcclxuICAgICAgICAgICRjb21waWxlKG51bGxPcHRpb24pKHNjb3BlKTtcclxuXHJcbiAgICAgICAgICAvLyByZW1vdmUgdGhlIGNsYXNzLCB3aGljaCBpcyBhZGRlZCBhdXRvbWF0aWNhbGx5IGJlY2F1c2Ugd2UgcmVjb21waWxlIHRoZSBlbGVtZW50IGFuZCBpdFxyXG4gICAgICAgICAgLy8gYmVjb21lcyB0aGUgY29tcGlsYXRpb24gcm9vdFxyXG4gICAgICAgICAgbnVsbE9wdGlvbi5yZW1vdmVDbGFzcygnbmctc2NvcGUnKTtcclxuXHJcbiAgICAgICAgICAvLyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBiZWZvcmUgY2FsbGluZyBzZWxlY3RFbGVtZW50LmVtcHR5KCkgYmVjYXVzZSBvdGhlcndpc2UgSUUgd2lsbFxyXG4gICAgICAgICAgLy8gcmVtb3ZlIHRoZSBsYWJlbCBmcm9tIHRoZSBlbGVtZW50LiB3dGY/XHJcbiAgICAgICAgICBudWxsT3B0aW9uLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2xlYXIgY29udGVudHMsIHdlJ2xsIGFkZCB3aGF0J3MgbmVlZGVkIGJhc2VkIG9uIHRoZSBtb2RlbFxyXG4gICAgICAgIHNlbGVjdEVsZW1lbnQuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgc2VsZWN0RWxlbWVudC5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25Hcm91cCxcclxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSB2YWx1ZXNGbihzY29wZSkgfHwgW10sXHJcbiAgICAgICAgICAgICAgICBsb2NhbHMgPSB7fSxcclxuICAgICAgICAgICAgICAgIGtleSwgdmFsdWUsIG9wdGlvbkVsZW1lbnQsIGluZGV4LCBncm91cEluZGV4LCBsZW5ndGgsIGdyb3VwTGVuZ3RoLCB0cmFja0luZGV4O1xyXG5cclxuICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgdmFsdWUgPSBbXTtcclxuICAgICAgICAgICAgICBmb3IgKGdyb3VwSW5kZXggPSAwLCBncm91cExlbmd0aCA9IG9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgIGdyb3VwSW5kZXggPCBncm91cExlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgIGdyb3VwSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBvcHRpb25zIGZvciB0aGF0IGdyb3VwLiAoZmlyc3QgaXRlbSBoYXMgdGhlIHBhcmVudClcclxuICAgICAgICAgICAgICAgIG9wdGlvbkdyb3VwID0gb3B0aW9uR3JvdXBzQ2FjaGVbZ3JvdXBJbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGluZGV4ID0gMSwgbGVuZ3RoID0gb3B0aW9uR3JvdXAubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoKG9wdGlvbkVsZW1lbnQgPSBvcHRpb25Hcm91cFtpbmRleF0uZWxlbWVudClbMF0uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBvcHRpb25FbGVtZW50LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlOYW1lKSBsb2NhbHNba2V5TmFtZV0gPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrRm4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZvciAodHJhY2tJbmRleCA9IDA7IHRyYWNrSW5kZXggPCBjb2xsZWN0aW9uLmxlbmd0aDsgdHJhY2tJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gY29sbGVjdGlvblt0cmFja0luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrRm4oc2NvcGUsIGxvY2FscykgPT0ga2V5KSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgbG9jYWxzW3ZhbHVlTmFtZV0gPSBjb2xsZWN0aW9uW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2godmFsdWVGbihzY29wZSwgbG9jYWxzKSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAga2V5ID0gc2VsZWN0RWxlbWVudC52YWwoKTtcclxuICAgICAgICAgICAgICBpZiAoa2V5ID09ICc/Jykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICcnKXtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrRm4pIHtcclxuICAgICAgICAgICAgICAgICAgZm9yICh0cmFja0luZGV4ID0gMDsgdHJhY2tJbmRleCA8IGNvbGxlY3Rpb24ubGVuZ3RoOyB0cmFja0luZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IGNvbGxlY3Rpb25bdHJhY2tJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrRm4oc2NvcGUsIGxvY2FscykgPT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlRm4oc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gY29sbGVjdGlvbltrZXldO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoa2V5TmFtZSkgbG9jYWxzW2tleU5hbWVdID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlRm4oc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJlbmRlcigpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGN0cmwuJHJlbmRlciA9IHJlbmRlcjtcclxuXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbih2YWx1ZXNGbiwgc2NoZWR1bGVSZW5kZXJpbmcpO1xyXG4gICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIGxvY2FscyA9IHt9LFxyXG4gICAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlc0ZuKHNjb3BlKTtcclxuICAgICAgICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgICAgICAgdmFyIHRvRGlzcGxheSA9IG5ldyBBcnJheSh2YWx1ZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdmFsdWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IHZhbHVlc1tpXTtcclxuICAgICAgICAgICAgICB0b0Rpc3BsYXlbaV0gPSBkaXNwbGF5Rm4oc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRvRGlzcGxheTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBzY2hlZHVsZVJlbmRlcmluZyk7XHJcblxyXG4gICAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpIHsgcmV0dXJuIGN0cmwuJG1vZGVsVmFsdWU7IH0sIHNjaGVkdWxlUmVuZGVyaW5nKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRTZWxlY3RlZFNldCgpIHtcclxuICAgICAgICAgIHZhciBzZWxlY3RlZFNldCA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgIHZhciBtb2RlbFZhbHVlID0gY3RybC4kbW9kZWxWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRyYWNrRm4gJiYgaXNBcnJheShtb2RlbFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkU2V0ID0gbmV3IEhhc2hNYXAoW10pO1xyXG4gICAgICAgICAgICAgIHZhciBsb2NhbHMgPSB7fTtcclxuICAgICAgICAgICAgICBmb3IgKHZhciB0cmFja0luZGV4ID0gMDsgdHJhY2tJbmRleCA8IG1vZGVsVmFsdWUubGVuZ3RoOyB0cmFja0luZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gbW9kZWxWYWx1ZVt0cmFja0luZGV4XTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU2V0LnB1dCh0cmFja0ZuKHNjb3BlLCBsb2NhbHMpLCBtb2RlbFZhbHVlW3RyYWNrSW5kZXhdKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTZXQgPSBuZXcgSGFzaE1hcChtb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdGVkU2V0O1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVuZGVyaW5nKCkge1xyXG4gICAgICAgICAgaWYgKCFyZW5kZXJTY2hlZHVsZWQpIHtcclxuICAgICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KHJlbmRlcik7XHJcbiAgICAgICAgICAgIHJlbmRlclNjaGVkdWxlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICAgICAgICAgcmVuZGVyU2NoZWR1bGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgIC8vIFRlbXBvcmFyeSBsb2NhdGlvbiBmb3IgdGhlIG9wdGlvbiBncm91cHMgYmVmb3JlIHdlIHJlbmRlciB0aGVtXHJcbiAgICAgICAgICB2YXIgb3B0aW9uR3JvdXBzID0geycnOltdfSxcclxuICAgICAgICAgICAgICBvcHRpb25Hcm91cE5hbWVzID0gWycnXSxcclxuICAgICAgICAgICAgICBvcHRpb25Hcm91cE5hbWUsXHJcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXAsXHJcbiAgICAgICAgICAgICAgb3B0aW9uLFxyXG4gICAgICAgICAgICAgIGV4aXN0aW5nUGFyZW50LCBleGlzdGluZ09wdGlvbnMsIGV4aXN0aW5nT3B0aW9uLFxyXG4gICAgICAgICAgICAgIG1vZGVsVmFsdWUgPSBjdHJsLiRtb2RlbFZhbHVlLFxyXG4gICAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlc0ZuKHNjb3BlKSB8fCBbXSxcclxuICAgICAgICAgICAgICBrZXlzID0ga2V5TmFtZSA/IHNvcnRlZEtleXModmFsdWVzKSA6IHZhbHVlcyxcclxuICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgZ3JvdXBMZW5ndGgsIGxlbmd0aCxcclxuICAgICAgICAgICAgICBncm91cEluZGV4LCBpbmRleCxcclxuICAgICAgICAgICAgICBsb2NhbHMgPSB7fSxcclxuICAgICAgICAgICAgICBzZWxlY3RlZCxcclxuICAgICAgICAgICAgICBzZWxlY3RlZFNldCA9IGdldFNlbGVjdGVkU2V0KCksXHJcbiAgICAgICAgICAgICAgbGFzdEVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICAgICAgICBsYWJlbDtcclxuXHJcblxyXG4gICAgICAgICAgLy8gV2Ugbm93IGJ1aWxkIHVwIHRoZSBsaXN0IG9mIG9wdGlvbnMgd2UgbmVlZCAod2UgbWVyZ2UgbGF0ZXIpXHJcbiAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgbGVuZ3RoID0ga2V5cy5sZW5ndGgsIGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XHJcblxyXG4gICAgICAgICAgICBrZXkgPSBpbmRleDtcclxuICAgICAgICAgICAgaWYgKGtleU5hbWUpIHtcclxuICAgICAgICAgICAgICBrZXkgPSBrZXlzW2luZGV4XTtcclxuICAgICAgICAgICAgICBpZiAoIGtleS5jaGFyQXQoMCkgPT09ICckJyApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIGxvY2Fsc1trZXlOYW1lXSA9IGtleTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9jYWxzW3ZhbHVlTmFtZV0gPSB2YWx1ZXNba2V5XTtcclxuXHJcbiAgICAgICAgICAgIG9wdGlvbkdyb3VwTmFtZSA9IGdyb3VwQnlGbihzY29wZSwgbG9jYWxzKSB8fCAnJztcclxuICAgICAgICAgICAgaWYgKCEob3B0aW9uR3JvdXAgPSBvcHRpb25Hcm91cHNbb3B0aW9uR3JvdXBOYW1lXSkpIHtcclxuICAgICAgICAgICAgICBvcHRpb25Hcm91cCA9IG9wdGlvbkdyb3Vwc1tvcHRpb25Hcm91cE5hbWVdID0gW107XHJcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXBOYW1lcy5wdXNoKG9wdGlvbkdyb3VwTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBpc0RlZmluZWQoXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNldC5yZW1vdmUodHJhY2tGbiA/IHRyYWNrRm4oc2NvcGUsIGxvY2FscykgOiB2YWx1ZUZuKHNjb3BlLCBsb2NhbHMpKVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRyYWNrRm4pIHtcclxuICAgICAgICAgICAgICAgIHZhciBtb2RlbENhc3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIG1vZGVsQ2FzdFt2YWx1ZU5hbWVdID0gbW9kZWxWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gdHJhY2tGbihzY29wZSwgbW9kZWxDYXN0KSA9PT0gdHJhY2tGbihzY29wZSwgbG9jYWxzKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBtb2RlbFZhbHVlID09PSB2YWx1ZUZuKHNjb3BlLCBsb2NhbHMpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBzZWxlY3RlZFNldCA9IHNlbGVjdGVkU2V0IHx8IHNlbGVjdGVkOyAvLyBzZWUgaWYgYXQgbGVhc3Qgb25lIGl0ZW0gaXMgc2VsZWN0ZWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYWJlbCA9IGRpc3BsYXlGbihzY29wZSwgbG9jYWxzKTsgLy8gd2hhdCB3aWxsIGJlIHNlZW4gYnkgdGhlIHVzZXJcclxuXHJcbiAgICAgICAgICAgIC8vIGRvaW5nIGRpc3BsYXlGbihzY29wZSwgbG9jYWxzKSB8fCAnJyBvdmVyd3JpdGVzIHplcm8gdmFsdWVzXHJcbiAgICAgICAgICAgIGxhYmVsID0gaXNEZWZpbmVkKGxhYmVsKSA/IGxhYmVsIDogJyc7XHJcbiAgICAgICAgICAgIG9wdGlvbkdyb3VwLnB1c2goe1xyXG4gICAgICAgICAgICAgIC8vIGVpdGhlciB0aGUgaW5kZXggaW50byBhcnJheSBvciBrZXkgZnJvbSBvYmplY3RcclxuICAgICAgICAgICAgICBpZDogdHJhY2tGbiA/IHRyYWNrRm4oc2NvcGUsIGxvY2FscykgOiAoa2V5TmFtZSA/IGtleXNbaW5kZXhdIDogaW5kZXgpLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBsYWJlbCxcclxuICAgICAgICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWQgICAgICAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBiZSBzZWxlY3RlZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghbXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgaWYgKG51bGxPcHRpb24gfHwgbW9kZWxWYWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIC8vIGluc2VydCBudWxsIG9wdGlvbiBpZiB3ZSBoYXZlIGEgcGxhY2Vob2xkZXIsIG9yIHRoZSBtb2RlbCBpcyBudWxsXHJcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXBzWycnXS51bnNoaWZ0KHtpZDonJywgbGFiZWw6JycsIHNlbGVjdGVkOiFzZWxlY3RlZFNldH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzZWxlY3RlZFNldCkge1xyXG4gICAgICAgICAgICAgIC8vIG9wdGlvbiBjb3VsZCBub3QgYmUgZm91bmQsIHdlIGhhdmUgdG8gaW5zZXJ0IHRoZSB1bmRlZmluZWQgaXRlbVxyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3Vwc1snJ10udW5zaGlmdCh7aWQ6Jz8nLCBsYWJlbDonJywgc2VsZWN0ZWQ6dHJ1ZX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gTm93IHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIERPTSBub2RlcyB0byBtYXRjaCB0aGUgb3B0aW9uR3JvdXBzIHdlIGNvbXB1dGVkIGFib3ZlXHJcbiAgICAgICAgICBmb3IgKGdyb3VwSW5kZXggPSAwLCBncm91cExlbmd0aCA9IG9wdGlvbkdyb3VwTmFtZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICBncm91cEluZGV4IDwgZ3JvdXBMZW5ndGg7XHJcbiAgICAgICAgICAgICAgIGdyb3VwSW5kZXgrKykge1xyXG4gICAgICAgICAgICAvLyBjdXJyZW50IG9wdGlvbiBncm91cCBuYW1lIG9yICcnIGlmIG5vIGdyb3VwXHJcbiAgICAgICAgICAgIG9wdGlvbkdyb3VwTmFtZSA9IG9wdGlvbkdyb3VwTmFtZXNbZ3JvdXBJbmRleF07XHJcblxyXG4gICAgICAgICAgICAvLyBsaXN0IG9mIG9wdGlvbnMgZm9yIHRoYXQgZ3JvdXAuIChmaXJzdCBpdGVtIGhhcyB0aGUgcGFyZW50KVxyXG4gICAgICAgICAgICBvcHRpb25Hcm91cCA9IG9wdGlvbkdyb3Vwc1tvcHRpb25Hcm91cE5hbWVdO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aCA8PSBncm91cEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBncm93IHRoZSBvcHRpb25Hcm91cHNcclxuICAgICAgICAgICAgICBleGlzdGluZ1BhcmVudCA9IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IG9wdEdyb3VwVGVtcGxhdGUuY2xvbmUoKS5hdHRyKCdsYWJlbCcsIG9wdGlvbkdyb3VwTmFtZSksXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogb3B0aW9uR3JvdXAubGFiZWxcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIGV4aXN0aW5nT3B0aW9ucyA9IFtleGlzdGluZ1BhcmVudF07XHJcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXBzQ2FjaGUucHVzaChleGlzdGluZ09wdGlvbnMpO1xyXG4gICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kKGV4aXN0aW5nUGFyZW50LmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGV4aXN0aW5nT3B0aW9ucyA9IG9wdGlvbkdyb3Vwc0NhY2hlW2dyb3VwSW5kZXhdO1xyXG4gICAgICAgICAgICAgIGV4aXN0aW5nUGFyZW50ID0gZXhpc3RpbmdPcHRpb25zWzBdOyAgLy8gZWl0aGVyIFNFTEVDVCAobm8gZ3JvdXApIG9yIE9QVEdST1VQIGVsZW1lbnRcclxuXHJcbiAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBPUFRHUk9VUCBsYWJlbCBpZiBub3QgdGhlIHNhbWUuXHJcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGFyZW50LmxhYmVsICE9IG9wdGlvbkdyb3VwTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQuZWxlbWVudC5hdHRyKCdsYWJlbCcsIGV4aXN0aW5nUGFyZW50LmxhYmVsID0gb3B0aW9uR3JvdXBOYW1lKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxhc3RFbGVtZW50ID0gbnVsbDsgIC8vIHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmdcclxuICAgICAgICAgICAgZm9yKGluZGV4ID0gMCwgbGVuZ3RoID0gb3B0aW9uR3JvdXAubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgIG9wdGlvbiA9IG9wdGlvbkdyb3VwW2luZGV4XTtcclxuICAgICAgICAgICAgICBpZiAoKGV4aXN0aW5nT3B0aW9uID0gZXhpc3RpbmdPcHRpb25zW2luZGV4KzFdKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmV1c2UgZWxlbWVudHNcclxuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50ID0gZXhpc3RpbmdPcHRpb24uZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ09wdGlvbi5sYWJlbCAhPT0gb3B0aW9uLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LnRleHQoZXhpc3RpbmdPcHRpb24ubGFiZWwgPSBvcHRpb24ubGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nT3B0aW9uLmlkICE9PSBvcHRpb24uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgbGFzdEVsZW1lbnQudmFsKGV4aXN0aW5nT3B0aW9uLmlkID0gb3B0aW9uLmlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGxhc3RFbGVtZW50LnByb3AoJ3NlbGVjdGVkJykgcHJvdmlkZWQgYnkgalF1ZXJ5IGhhcyBzaWRlLWVmZmVjdHNcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0RWxlbWVudFswXS5zZWxlY3RlZCAhPT0gb3B0aW9uLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LnByb3AoJ3NlbGVjdGVkJywgKGV4aXN0aW5nT3B0aW9uLnNlbGVjdGVkID0gb3B0aW9uLnNlbGVjdGVkKSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChtc2llKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VlICM3NjkyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHNlbGVjdGVkIGl0ZW0gd291bGRuJ3QgdmlzdWFsbHkgdXBkYXRlIG9uIElFIHdpdGhvdXQgdGhpcy5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUZXN0ZWQgb24gV2luNzogSUU5LCBJRTEwIGFuZCBJRTExLiBGdXR1cmUgSUVzIHNob3VsZCBiZSB0ZXN0ZWQgYXMgd2VsbFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LnByb3AoJ3NlbGVjdGVkJywgZXhpc3RpbmdPcHRpb24uc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGdyb3cgZWxlbWVudHNcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIGEgbnVsbCBvcHRpb25cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24uaWQgPT09ICcnICYmIG51bGxPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgLy8gcHV0IGJhY2sgdGhlIHByZS1jb21waWxlZCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBudWxsT3B0aW9uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgLy8galF1ZXJ5KHYxLjQuMikgQnVnOiBXZSBzaG91bGQgYmUgYWJsZSB0byBjaGFpbiB0aGUgbWV0aG9kIGNhbGxzLCBidXRcclxuICAgICAgICAgICAgICAgICAgLy8gaW4gdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSBvbiBzb21lIGJyb3dzZXIgdGhlIC50ZXh0KCkgcmV0dXJucyBhIHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAvLyByYXRoZXIgdGhlbiB0aGUgZWxlbWVudC5cclxuICAgICAgICAgICAgICAgICAgKGVsZW1lbnQgPSBvcHRpb25UZW1wbGF0ZS5jbG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnZhbChvcHRpb24uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnc2VsZWN0ZWQnLCBvcHRpb24uc2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc2VsZWN0ZWQnLCBvcHRpb24uc2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAudGV4dChvcHRpb24ubGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nT3B0aW9ucy5wdXNoKGV4aXN0aW5nT3B0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG9wdGlvbi5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICBpZDogb3B0aW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBvcHRpb24uc2VsZWN0ZWRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LmFmdGVyKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQuZWxlbWVudC5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXN0RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgZXhjZXNzaXZlIE9QVElPTnMgaW4gYSBncm91cFxyXG4gICAgICAgICAgICBpbmRleCsrOyAvLyBpbmNyZW1lbnQgc2luY2UgdGhlIGV4aXN0aW5nT3B0aW9uc1swXSBpcyBwYXJlbnQgZWxlbWVudCBub3QgT1BUSU9OXHJcbiAgICAgICAgICAgIHdoaWxlKGV4aXN0aW5nT3B0aW9ucy5sZW5ndGggPiBpbmRleCkge1xyXG4gICAgICAgICAgICAgIGV4aXN0aW5nT3B0aW9ucy5wb3AoKS5lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyByZW1vdmUgYW55IGV4Y2Vzc2l2ZSBPUFRHUk9VUHMgZnJvbSBzZWxlY3RcclxuICAgICAgICAgIHdoaWxlKG9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aCA+IGdyb3VwSW5kZXgpIHtcclxuICAgICAgICAgICAgb3B0aW9uR3JvdXBzQ2FjaGUucG9wKClbMF0uZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbnZhciBvcHRpb25EaXJlY3RpdmUgPSBbJyRpbnRlcnBvbGF0ZScsIGZ1bmN0aW9uKCRpbnRlcnBvbGF0ZSkge1xyXG4gIHZhciBudWxsU2VsZWN0Q3RybCA9IHtcclxuICAgIGFkZE9wdGlvbjogbm9vcCxcclxuICAgIHJlbW92ZU9wdGlvbjogbm9vcFxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgcHJpb3JpdHk6IDEwMCxcclxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgaWYgKGlzVW5kZWZpbmVkKGF0dHIudmFsdWUpKSB7XHJcbiAgICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUoZWxlbWVudC50ZXh0KCksIHRydWUpO1xyXG4gICAgICAgIGlmICghaW50ZXJwb2xhdGVGbikge1xyXG4gICAgICAgICAgYXR0ci4kc2V0KCd2YWx1ZScsIGVsZW1lbnQudGV4dCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICB2YXIgc2VsZWN0Q3RybE5hbWUgPSAnJHNlbGVjdENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICBwYXJlbnQgPSBlbGVtZW50LnBhcmVudCgpLFxyXG4gICAgICAgICAgICBzZWxlY3RDdHJsID0gcGFyZW50LmRhdGEoc2VsZWN0Q3RybE5hbWUpIHx8XHJcbiAgICAgICAgICAgICAgcGFyZW50LnBhcmVudCgpLmRhdGEoc2VsZWN0Q3RybE5hbWUpOyAvLyBpbiBjYXNlIHdlIGFyZSBpbiBvcHRncm91cFxyXG5cclxuICAgICAgICBpZiAoc2VsZWN0Q3RybCAmJiBzZWxlY3RDdHJsLmRhdGFib3VuZCkge1xyXG4gICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIE9wZXJhIGRlZmF1bHRzIHRvIHRydWUgYW5kIGlmIG5vdCBvdmVycmlkZGVuIHRoaXMgbWVzc2VzIHVwIHRoZSByZXBlYXRlci5cclxuICAgICAgICAgIC8vIFdlIGRvbid0IHdhbnQgdGhlIHZpZXcgdG8gZHJpdmUgdGhlIGluaXRpYWxpemF0aW9uIG9mIHRoZSBtb2RlbCBhbnl3YXkuXHJcbiAgICAgICAgICBlbGVtZW50LnByb3AoJ3NlbGVjdGVkJywgZmFsc2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWxlY3RDdHJsID0gbnVsbFNlbGVjdEN0cmw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaW50ZXJwb2xhdGVGbikge1xyXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKGludGVycG9sYXRlRm4sIGZ1bmN0aW9uIGludGVycG9sYXRlV2F0Y2hBY3Rpb24obmV3VmFsLCBvbGRWYWwpIHtcclxuICAgICAgICAgICAgYXR0ci4kc2V0KCd2YWx1ZScsIG5ld1ZhbCk7XHJcbiAgICAgICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xyXG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwucmVtb3ZlT3B0aW9uKG9sZFZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZWN0Q3RybC5hZGRPcHRpb24obmV3VmFsLCBlbGVtZW50KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWxlY3RDdHJsLmFkZE9wdGlvbihhdHRyLnZhbHVlLCBlbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZU9wdGlvbihhdHRyLnZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbnZhciBzdHlsZURpcmVjdGl2ZSA9IHZhbHVlRm4oe1xyXG4gIHJlc3RyaWN0OiAnRScsXHJcbiAgdGVybWluYWw6IGZhbHNlXHJcbn0pO1xyXG5cclxuICBpZiAod2luZG93LmFuZ3VsYXIuYm9vdHN0cmFwKSB7XHJcbiAgICAvL0FuZ3VsYXJKUyBpcyBhbHJlYWR5IGxvYWRlZCwgc28gd2UgY2FuIHJldHVybiBoZXJlLi4uXHJcbiAgICBjb25zb2xlLmxvZygnV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLicpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy90cnkgdG8gYmluZCB0byBqcXVlcnkgbm93IHNvIHRoYXQgb25lIGNhbiB3cml0ZSBqcUxpdGUoZG9jdW1lbnQpLnJlYWR5KClcclxuICAvL2J1dCB3ZSB3aWxsIHJlYmluZCBvbiBib290c3RyYXAgYWdhaW4uXHJcbiAgYmluZEpRdWVyeSgpO1xyXG5cclxuICBwdWJsaXNoRXh0ZXJuYWxBUEkoYW5ndWxhcik7XHJcblxyXG4gIGpxTGl0ZShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICBhbmd1bGFySW5pdChkb2N1bWVudCwgYm9vdHN0cmFwKTtcclxuICB9KTtcclxuXHJcbn0pKHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuIXdpbmRvdy5hbmd1bGFyLiQkY3NwKCkgJiYgd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgnaGVhZCcpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5AY2hhcnNldCBcIlVURi04XCI7W25nXFxcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZTpub3QoLm5nLWFuaW1hdGUpe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcXFw6Zm9ybXtkaXNwbGF5OmJsb2NrO308L3N0eWxlPicpOyIsIi8qKlxyXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuMy4wLXJjLjJcclxuICogKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcclxuICogTGljZW5zZTogTUlUXHJcbiAqL1xyXG4oZnVuY3Rpb24od2luZG93LCBhbmd1bGFyLCB1bmRlZmluZWQpIHsndXNlIHN0cmljdCc7XHJcblxyXG4vKiBqc2hpbnQgbWF4bGVuOiBmYWxzZSAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtb2R1bGVcclxuICogQG5hbWUgbmdBbmltYXRlXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBUaGUgYG5nQW5pbWF0ZWAgbW9kdWxlIHByb3ZpZGVzIHN1cHBvcnQgZm9yIEphdmFTY3JpcHQsIENTUzMgdHJhbnNpdGlvbiBhbmQgQ1NTMyBrZXlmcmFtZSBhbmltYXRpb24gaG9va3Mgd2l0aGluIGV4aXN0aW5nIGNvcmUgYW5kIGN1c3RvbSBkaXJlY3RpdmVzLlxyXG4gKlxyXG4gKiA8ZGl2IGRvYy1tb2R1bGUtY29tcG9uZW50cz1cIm5nQW5pbWF0ZVwiPjwvZGl2PlxyXG4gKlxyXG4gKiAjIFVzYWdlXHJcbiAqXHJcbiAqIFRvIHNlZSBhbmltYXRpb25zIGluIGFjdGlvbiwgYWxsIHRoYXQgaXMgcmVxdWlyZWQgaXMgdG8gZGVmaW5lIHRoZSBhcHByb3ByaWF0ZSBDU1MgY2xhc3Nlc1xyXG4gKiBvciB0byByZWdpc3RlciBhIEphdmFTY3JpcHQgYW5pbWF0aW9uIHZpYSB0aGUgbXlNb2R1bGUuYW5pbWF0aW9uKCkgZnVuY3Rpb24uIFRoZSBkaXJlY3RpdmVzIHRoYXQgc3VwcG9ydCBhbmltYXRpb24gYXV0b21hdGljYWxseSBhcmU6XHJcbiAqIGBuZ1JlcGVhdGAsIGBuZ0luY2x1ZGVgLCBgbmdJZmAsIGBuZ1N3aXRjaGAsIGBuZ1Nob3dgLCBgbmdIaWRlYCwgYG5nVmlld2AgYW5kIGBuZ0NsYXNzYC4gQ3VzdG9tIGRpcmVjdGl2ZXMgY2FuIHRha2UgYWR2YW50YWdlIG9mIGFuaW1hdGlvblxyXG4gKiBieSB1c2luZyB0aGUgYCRhbmltYXRlYCBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBCZWxvdyBpcyBhIG1vcmUgZGV0YWlsZWQgYnJlYWtkb3duIG9mIHRoZSBzdXBwb3J0ZWQgYW5pbWF0aW9uIGV2ZW50cyBwcm92aWRlZCBieSBwcmUtZXhpc3RpbmcgbmcgZGlyZWN0aXZlczpcclxuICpcclxuICogfCBEaXJlY3RpdmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0ZWQgQW5pbWF0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAqIHwge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCN1c2FnZV9hbmltYXRpb25zIG5nUmVwZWF0fSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW50ZXIsIGxlYXZlIGFuZCBtb3ZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCB7QGxpbmsgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3I3VzYWdlX2FuaW1hdGlvbnMgbmdWaWV3fSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlbnRlciBhbmQgbGVhdmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbmNsdWRlI3VzYWdlX2FuaW1hdGlvbnMgbmdJbmNsdWRlfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVudGVyIGFuZCBsZWF2ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqIHwge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1N3aXRjaCN1c2FnZV9hbmltYXRpb25zIG5nU3dpdGNofSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW50ZXIgYW5kIGxlYXZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSWYjdXNhZ2VfYW5pbWF0aW9ucyBuZ0lmfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlbnRlciBhbmQgbGVhdmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyN1c2FnZV9hbmltYXRpb25zIG5nQ2xhc3N9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFkZCBhbmQgcmVtb3ZlICh0aGUgQ1NTIGNsYXNzKGVzKSBwcmVzZW50KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqIHwge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1Nob3cjdXNhZ2VfYW5pbWF0aW9ucyBuZ1Nob3d9ICYge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0hpZGUjdXNhZ2VfYW5pbWF0aW9ucyBuZ0hpZGV9IHwgYWRkIGFuZCByZW1vdmUgKHRoZSBuZy1oaWRlIGNsYXNzIHZhbHVlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCB7QGxpbmsgbmcuZGlyZWN0aXZlOmZvcm0jdXNhZ2VfYW5pbWF0aW9ucyBmb3JtfSAmIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbCN1c2FnZV9hbmltYXRpb25zIG5nTW9kZWx9ICAgfCBhZGQgYW5kIHJlbW92ZSAoZGlydHksIHByaXN0aW5lLCB2YWxpZCwgaW52YWxpZCAmIGFsbCBvdGhlciB2YWxpZGF0aW9ucykgfFxyXG4gKiB8IHtAbGluayBuZ01lc3NhZ2VzLmRpcmVjdGl2ZTpuZ01lc3NhZ2UjdXNhZ2VfYW5pbWF0aW9ucyBuZ01lc3NhZ2VzfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFkZCBhbmQgcmVtb3ZlIChuZy1hY3RpdmUgJiBuZy1pbmFjdGl2ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqIHwge0BsaW5rIG5nTWVzc2FnZXMuZGlyZWN0aXZlOm5nTWVzc2FnZSN1c2FnZV9hbmltYXRpb25zIG5nTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW50ZXIgYW5kIGxlYXZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICpcclxuICogWW91IGNhbiBmaW5kIG91dCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGFuaW1hdGlvbnMgdXBvbiB2aXNpdGluZyBlYWNoIGRpcmVjdGl2ZSBwYWdlLlxyXG4gKlxyXG4gKiBCZWxvdyBpcyBhbiBleGFtcGxlIG9mIGhvdyB0byBhcHBseSBhbmltYXRpb25zIHRvIGEgZGlyZWN0aXZlIHRoYXQgc3VwcG9ydHMgYW5pbWF0aW9uIGhvb2tzOlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cclxuICogLnNsaWRlLm5nLWVudGVyLCAuc2xpZGUubmctbGVhdmUge1xyXG4gKiAgIC13ZWJraXQtdHJhbnNpdGlvbjowLjVzIGxpbmVhciBhbGw7XHJcbiAqICAgdHJhbnNpdGlvbjowLjVzIGxpbmVhciBhbGw7XHJcbiAqIH1cclxuICpcclxuICogLnNsaWRlLm5nLWVudGVyIHsgfSAgICAgICAgLyYjNDI7IHN0YXJ0aW5nIGFuaW1hdGlvbnMgZm9yIGVudGVyICYjNDI7L1xyXG4gKiAuc2xpZGUubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHsgfSAvJiM0MjsgdGVybWluYWwgYW5pbWF0aW9ucyBmb3IgZW50ZXIgJiM0MjsvXHJcbiAqIC5zbGlkZS5uZy1sZWF2ZSB7IH0gICAgICAgIC8mIzQyOyBzdGFydGluZyBhbmltYXRpb25zIGZvciBsZWF2ZSAmIzQyOy9cclxuICogLnNsaWRlLm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSB7IH0gLyYjNDI7IHRlcm1pbmFsIGFuaW1hdGlvbnMgZm9yIGxlYXZlICYjNDI7L1xyXG4gKiA8L3N0eWxlPlxyXG4gKlxyXG4gKiA8IS0tXHJcbiAqIHRoZSBhbmltYXRlIHNlcnZpY2Ugd2lsbCBhdXRvbWF0aWNhbGx5IGFkZCAubmctZW50ZXIgYW5kIC5uZy1sZWF2ZSB0byB0aGUgZWxlbWVudFxyXG4gKiB0byB0cmlnZ2VyIHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb25zXHJcbiAqIC0tPlxyXG4gKiA8QU5ZIGNsYXNzPVwic2xpZGVcIiBuZy1pbmNsdWRlPVwiLi4uXCI+PC9BTlk+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBLZWVwIGluIG1pbmQgdGhhdCwgYnkgZGVmYXVsdCwgaWYgYW4gYW5pbWF0aW9uIGlzIHJ1bm5pbmcsIGFueSBjaGlsZCBlbGVtZW50cyBjYW5ub3QgYmUgYW5pbWF0ZWRcclxuICogdW50aWwgdGhlIHBhcmVudCBlbGVtZW50J3MgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQuIFRoaXMgYmxvY2tpbmcgZmVhdHVyZSBjYW4gYmUgb3ZlcnJpZGRlbiBieVxyXG4gKiBwbGFjaW5nIHRoZSBgbmctYW5pbWF0ZS1jaGlsZHJlbmAgYXR0cmlidXRlIG9uIGEgcGFyZW50IGNvbnRhaW5lciB0YWcuXHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPGRpdiBjbGFzcz1cInNsaWRlLWFuaW1hdGlvblwiIG5nLWlmPVwib25cIiBuZy1hbmltYXRlLWNoaWxkcmVuPlxyXG4gKiAgIDxkaXYgY2xhc3M9XCJmYWRlLWFuaW1hdGlvblwiIG5nLWlmPVwib25cIj5cclxuICogICAgIDxkaXYgY2xhc3M9XCJleHBsb2RlLWFuaW1hdGlvblwiIG5nLWlmPVwib25cIj5cclxuICogICAgICAgIC4uLlxyXG4gKiAgICAgPC9kaXY+XHJcbiAqICAgPC9kaXY+XHJcbiAqIDwvZGl2PlxyXG4gKiBgYGBcclxuICpcclxuICogV2hlbiB0aGUgYG9uYCBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMgYW5kIGFuIGFuaW1hdGlvbiBpcyB0cmlnZ2VyZWQgdGhlbiBlYWNoIG9mIHRoZSBlbGVtZW50cyB3aXRoaW5cclxuICogd2lsbCBhbGwgYW5pbWF0ZSB3aXRob3V0IHRoZSBibG9jayBiZWluZyBhcHBsaWVkIHRvIGNoaWxkIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiAjIyBBcmUgYW5pbWF0aW9ucyBydW4gd2hlbiB0aGUgYXBwbGljYXRpb24gc3RhcnRzP1xyXG4gKiBObyB0aGV5IGFyZSBub3QuIFdoZW4gYW4gYXBwbGljYXRpb24gaXMgYm9vdHN0cmFwcGVkIEFuZ3VsYXIgd2lsbCBkaXNhYmxlIGFuaW1hdGlvbnMgZnJvbSBydW5uaW5nIHRvIGF2b2lkXHJcbiAqIGEgZnJlbnp5IG9mIGFuaW1hdGlvbnMgZnJvbSBiZWluZyB0cmlnZ2VyZWQgYXMgc29vbiBhcyB0aGUgYnJvd3NlciBoYXMgcmVuZGVyZWQgdGhlIHNjcmVlbi4gRm9yIHRoaXMgdG8gd29yayxcclxuICogQW5ndWxhciB3aWxsIHdhaXQgZm9yIHR3byBkaWdlc3QgY3ljbGVzIHVudGlsIGVuYWJsaW5nIGFuaW1hdGlvbnMuIEZyb20gdGhlcmUgb24sIGFueSBhbmltYXRpb24tdHJpZ2dlcmluZ1xyXG4gKiBsYXlvdXQgY2hhbmdlcyBpbiB0aGUgYXBwbGljYXRpb24gd2lsbCB0cmlnZ2VyIGFuaW1hdGlvbnMgYXMgbm9ybWFsLlxyXG4gKlxyXG4gKiBJbiBhZGRpdGlvbiwgdXBvbiBib290c3RyYXAsIGlmIHRoZSByb3V0aW5nIHN5c3RlbSBvciBhbnkgZGlyZWN0aXZlcyBvciBsb2FkIHJlbW90ZSBkYXRhICh2aWEgJGh0dHApIHRoZW4gQW5ndWxhclxyXG4gKiB3aWxsIGF1dG9tYXRpY2FsbHkgZXh0ZW5kIHRoZSB3YWl0IHRpbWUgdG8gZW5hYmxlIGFuaW1hdGlvbnMgb25jZSAqKmFsbCoqIG9mIHRoZSBvdXRib3VuZCBIVFRQIHJlcXVlc3RzXHJcbiAqIGFyZSBjb21wbGV0ZS5cclxuICpcclxuICogPGgyPkNTUy1kZWZpbmVkIEFuaW1hdGlvbnM8L2gyPlxyXG4gKiBUaGUgYW5pbWF0ZSBzZXJ2aWNlIHdpbGwgYXV0b21hdGljYWxseSBhcHBseSB0d28gQ1NTIGNsYXNzZXMgdG8gdGhlIGFuaW1hdGVkIGVsZW1lbnQgYW5kIHRoZXNlIHR3byBDU1MgY2xhc3Nlc1xyXG4gKiBhcmUgZGVzaWduZWQgdG8gY29udGFpbiB0aGUgc3RhcnQgYW5kIGVuZCBDU1Mgc3R5bGluZy4gQm90aCBDU1MgdHJhbnNpdGlvbnMgYW5kIGtleWZyYW1lIGFuaW1hdGlvbnMgYXJlIHN1cHBvcnRlZFxyXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gcGxheSBhbG9uZyB3aXRoIHRoaXMgbmFtaW5nIHN0cnVjdHVyZS5cclxuICpcclxuICogVGhlIGZvbGxvd2luZyBjb2RlIGJlbG93IGRlbW9uc3RyYXRlcyBob3cgdG8gcGVyZm9ybSBhbmltYXRpb25zIHVzaW5nICoqQ1NTIHRyYW5zaXRpb25zKiogd2l0aCBBbmd1bGFyOlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cclxuICogLyYjNDI7XHJcbiAqICBUaGUgYW5pbWF0ZSBjbGFzcyBpcyBhcGFydCBvZiB0aGUgZWxlbWVudCBhbmQgdGhlIG5nLWVudGVyIGNsYXNzXHJcbiAqICBpcyBhdHRhY2hlZCB0byB0aGUgZWxlbWVudCBvbmNlIHRoZSBlbnRlciBhbmltYXRpb24gZXZlbnQgaXMgdHJpZ2dlcmVkXHJcbiAqICYjNDI7L1xyXG4gKiAucmV2ZWFsLWFuaW1hdGlvbi5uZy1lbnRlciB7XHJcbiAqICAtd2Via2l0LXRyYW5zaXRpb246IDFzIGxpbmVhciBhbGw7IC8mIzQyOyBTYWZhcmkvQ2hyb21lICYjNDI7L1xyXG4gKiAgdHJhbnNpdGlvbjogMXMgbGluZWFyIGFsbDsgLyYjNDI7IEFsbCBvdGhlciBtb2Rlcm4gYnJvd3NlcnMgYW5kIElFMTArICYjNDI7L1xyXG4gKlxyXG4gKiAgLyYjNDI7IFRoZSBhbmltYXRpb24gcHJlcGFyYXRpb24gY29kZSAmIzQyOy9cclxuICogIG9wYWNpdHk6IDA7XHJcbiAqIH1cclxuICpcclxuICogLyYjNDI7XHJcbiAqICBLZWVwIGluIG1pbmQgdGhhdCB5b3Ugd2FudCB0byBjb21iaW5lIGJvdGggQ1NTXHJcbiAqICBjbGFzc2VzIHRvZ2V0aGVyIHRvIGF2b2lkIGFueSBDU1Mtc3BlY2lmaWNpdHlcclxuICogIGNvbmZsaWN0c1xyXG4gKiAmIzQyOy9cclxuICogLnJldmVhbC1hbmltYXRpb24ubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcclxuICogIC8mIzQyOyBUaGUgYW5pbWF0aW9uIGNvZGUgaXRzZWxmICYjNDI7L1xyXG4gKiAgb3BhY2l0eTogMTtcclxuICogfVxyXG4gKiA8L3N0eWxlPlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwidmlldy1jb250YWluZXJcIj5cclxuICogICA8ZGl2IG5nLXZpZXcgY2xhc3M9XCJyZXZlYWwtYW5pbWF0aW9uXCI+PC9kaXY+XHJcbiAqIDwvZGl2PlxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGZvbGxvd2luZyBjb2RlIGJlbG93IGRlbW9uc3RyYXRlcyBob3cgdG8gcGVyZm9ybSBhbmltYXRpb25zIHVzaW5nICoqQ1NTIGFuaW1hdGlvbnMqKiB3aXRoIEFuZ3VsYXI6XHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPlxyXG4gKiAucmV2ZWFsLWFuaW1hdGlvbi5uZy1lbnRlciB7XHJcbiAqICAgLXdlYmtpdC1hbmltYXRpb246IGVudGVyX3NlcXVlbmNlIDFzIGxpbmVhcjsgLyYjNDI7IFNhZmFyaS9DaHJvbWUgJiM0MjsvXHJcbiAqICAgYW5pbWF0aW9uOiBlbnRlcl9zZXF1ZW5jZSAxcyBsaW5lYXI7IC8mIzQyOyBJRTEwKyBhbmQgRnV0dXJlIEJyb3dzZXJzICYjNDI7L1xyXG4gKiB9XHJcbiAqIEAtd2Via2l0LWtleWZyYW1lcyBlbnRlcl9zZXF1ZW5jZSB7XHJcbiAqICAgZnJvbSB7IG9wYWNpdHk6MDsgfVxyXG4gKiAgIHRvIHsgb3BhY2l0eToxOyB9XHJcbiAqIH1cclxuICogQGtleWZyYW1lcyBlbnRlcl9zZXF1ZW5jZSB7XHJcbiAqICAgZnJvbSB7IG9wYWNpdHk6MDsgfVxyXG4gKiAgIHRvIHsgb3BhY2l0eToxOyB9XHJcbiAqIH1cclxuICogPC9zdHlsZT5cclxuICpcclxuICogPGRpdiBjbGFzcz1cInZpZXctY29udGFpbmVyXCI+XHJcbiAqICAgPGRpdiBuZy12aWV3IGNsYXNzPVwicmV2ZWFsLWFuaW1hdGlvblwiPjwvZGl2PlxyXG4gKiA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIEJvdGggQ1NTMyBhbmltYXRpb25zIGFuZCB0cmFuc2l0aW9ucyBjYW4gYmUgdXNlZCB0b2dldGhlciBhbmQgdGhlIGFuaW1hdGUgc2VydmljZSB3aWxsIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgZHVyYXRpb24gYW5kIGRlbGF5IHRpbWluZy5cclxuICpcclxuICogVXBvbiBET00gbXV0YXRpb24sIHRoZSBldmVudCBjbGFzcyBpcyBhZGRlZCBmaXJzdCAoc29tZXRoaW5nIGxpa2UgYG5nLWVudGVyYCksIHRoZW4gdGhlIGJyb3dzZXIgcHJlcGFyZXMgaXRzZWxmIHRvIGFkZFxyXG4gKiB0aGUgYWN0aXZlIGNsYXNzIChpbiB0aGlzIGNhc2UgYG5nLWVudGVyLWFjdGl2ZWApIHdoaWNoIHRoZW4gdHJpZ2dlcnMgdGhlIGFuaW1hdGlvbi4gVGhlIGFuaW1hdGlvbiBtb2R1bGUgd2lsbCBhdXRvbWF0aWNhbGx5XHJcbiAqIGRldGVjdCB0aGUgQ1NTIGNvZGUgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlIGFuaW1hdGlvbiBlbmRzLiBPbmNlIHRoZSBhbmltYXRpb24gaXMgb3ZlciB0aGVuIGJvdGggQ1NTIGNsYXNzZXMgd2lsbCBiZVxyXG4gKiByZW1vdmVkIGZyb20gdGhlIERPTS4gSWYgYSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgQ1NTIHRyYW5zaXRpb25zIG9yIENTUyBhbmltYXRpb25zIHRoZW4gdGhlIGFuaW1hdGlvbiB3aWxsIHN0YXJ0IGFuZCBlbmRcclxuICogaW1tZWRpYXRlbHkgcmVzdWx0aW5nIGluIGEgRE9NIGVsZW1lbnQgdGhhdCBpcyBhdCBpdHMgZmluYWwgc3RhdGUuIFRoaXMgZmluYWwgc3RhdGUgaXMgd2hlbiB0aGUgRE9NIGVsZW1lbnRcclxuICogaGFzIG5vIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbiBjbGFzc2VzIGFwcGxpZWQgdG8gaXQuXHJcbiAqXHJcbiAqICMjIyBTdHJ1Y3R1cmFsIHRyYW5zaXRpb24gYW5pbWF0aW9uc1xyXG4gKlxyXG4gKiBTdHJ1Y3R1cmFsIHRyYW5zaXRpb25zIChzdWNoIGFzIGVudGVyLCBsZWF2ZSBhbmQgbW92ZSkgd2lsbCBhbHdheXMgYXBwbHkgYSBgMHMgbm9uZWAgdHJhbnNpdGlvblxyXG4gKiB2YWx1ZSB0byBmb3JjZSB0aGUgYnJvd3NlciBpbnRvIHJlbmRlcmluZyB0aGUgc3R5bGVzIGRlZmluZWQgaW4gdGhlIHNldHVwICgubmctZW50ZXIsIC5uZy1sZWF2ZVxyXG4gKiBvciAubmctbW92ZSkgY2xhc3MuIFRoaXMgbWVhbnMgdGhhdCBhbnkgYWN0aXZlIHRyYW5zaXRpb24gYW5pbWF0aW9ucyBvcGVyYXRpbmcgb24gdGhlIGVsZW1lbnRcclxuICogd2lsbCBiZSBjdXQgb2ZmIHRvIG1ha2Ugd2F5IGZvciB0aGUgZW50ZXIsIGxlYXZlIG9yIG1vdmUgYW5pbWF0aW9uLlxyXG4gKlxyXG4gKiAjIyMgQ2xhc3MtYmFzZWQgdHJhbnNpdGlvbiBhbmltYXRpb25zXHJcbiAqXHJcbiAqIENsYXNzLWJhc2VkIHRyYW5zaXRpb25zIHJlZmVyIHRvIHRyYW5zaXRpb24gYW5pbWF0aW9ucyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2hlbiBhIENTUyBjbGFzcyBpc1xyXG4gKiBhZGRlZCB0byBvciByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgKHZpYSBgJGFuaW1hdGUuYWRkQ2xhc3NgLCBgJGFuaW1hdGUucmVtb3ZlQ2xhc3NgLFxyXG4gKiBgJGFuaW1hdGUuc2V0Q2xhc3NgLCBvciBieSBkaXJlY3RpdmVzIHN1Y2ggYXMgYG5nQ2xhc3NgLCBgbmdNb2RlbGAgYW5kIGBmb3JtYCkuXHJcbiAqIFRoZXkgYXJlIGRpZmZlcmVudCB3aGVuIGNvbXBhcmVkIHRvIHN0cnVjdHVyYWwgYW5pbWF0aW9ucyBzaW5jZSB0aGV5ICoqZG8gbm90IGNhbmNlbCBleGlzdGluZ1xyXG4gKiBhbmltYXRpb25zKiogbm9yIGRvIHRoZXkgKipibG9jayBzdWNjZXNzaXZlIHRyYW5zaXRpb25zKiogZnJvbSByZW5kZXJpbmcgb24gdGhlIHNhbWUgZWxlbWVudC5cclxuICogVGhpcyBkaXN0aW5jdGlvbiBhbGxvd3MgZm9yICoqbXVsdGlwbGUgY2xhc3MtYmFzZWQgdHJhbnNpdGlvbnMqKiB0byBiZSBwZXJmb3JtZWQgb24gdGhlIHNhbWUgZWxlbWVudC5cclxuICpcclxuICogSW4gYWRkaXRpb24gdG8gbmdBbmltYXRlIHN1cHBvcnRpbmcgdGhlIGRlZmF1bHQgKG5hdHVyYWwpIGZ1bmN0aW9uYWxpdHkgb2YgY2xhc3MtYmFzZWQgdHJhbnNpdGlvblxyXG4gKiBhbmltYXRpb25zLCBuZ0FuaW1hdGUgYWxzbyBkZWNvcmF0ZXMgdGhlIGVsZW1lbnQgd2l0aCBzdGFydGluZyBhbmQgZW5kaW5nIENTUyBjbGFzc2VzIHRvIGFpZCB0aGVcclxuICogZGV2ZWxvcGVyIGluIGZ1cnRoZXIgc3R5bGluZyB0aGUgZWxlbWVudCB0aHJvdWdob3V0IHRoZSB0cmFuc2l0aW9uIGFuaW1hdGlvbi4gRWFybGllciB2ZXJzaW9uc1xyXG4gKiBvZiBuZ0FuaW1hdGUgbWF5IGhhdmUgY2F1c2VkIG5hdHVyYWwgQ1NTIHRyYW5zaXRpb25zIHRvIGJyZWFrIGFuZCBub3QgcmVuZGVyIHByb3Blcmx5IGR1ZSB0b1xyXG4gKiAkYW5pbWF0ZSB0ZW1wb3JhcmlseSBibG9ja2luZyB0cmFuc2l0aW9ucyB1c2luZyBgMHMgbm9uZWAgaW4gb3JkZXIgdG8gYWxsb3cgdGhlIHNldHVwIENTUyBjbGFzc1xyXG4gKiAodGhlIGAtYWRkYCBvciBgLXJlbW92ZWAgY2xhc3MpIHRvIGJlIGFwcGxpZWQgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGFuaW1hdGlvbi4gSG93ZXZlciwgYXMgb2ZcclxuICogKip2ZXJzaW9uIDEuMyoqLCB0aGlzIHdvcmthcm91bmQgaGFzIGJlZW4gcmVtb3ZlZCB3aXRoIG5nQW5pbWF0ZSBhbmQgYWxsIG5vbi1uZ0FuaW1hdGUgQ1NTXHJcbiAqIGNsYXNzIHRyYW5zaXRpb25zIGFyZSBjb21wYXRpYmxlIHdpdGggbmdBbmltYXRlLlxyXG4gKlxyXG4gKiBUaGVyZSBpcywgaG93ZXZlciwgb25lIHNwZWNpYWwgY2FzZSB3aGVuIGRlYWxpbmcgd2l0aCBjbGFzcy1iYXNlZCB0cmFuc2l0aW9ucyBpbiBuZ0FuaW1hdGUuXHJcbiAqIFdoZW4gcmVuZGVyaW5nIGNsYXNzLWJhc2VkIHRyYW5zaXRpb25zIHRoYXQgbWFrZSB1c2Ugb2YgdGhlIHNldHVwIGFuZCBhY3RpdmUgQ1NTIGNsYXNzZXNcclxuICogKGUuZy4gYC5mYWRlLWFkZGAgYW5kIGAuZmFkZS1hZGQtYWN0aXZlYCBmb3Igd2hlbiBgLmZhZGVgIGlzIGFkZGVkKSBiZSBzdXJlIHRvIGRlZmluZVxyXG4gKiB0aGUgdHJhbnNpdGlvbiB2YWx1ZSAqKm9uIHRoZSBhY3RpdmUgQ1NTIGNsYXNzKiogYW5kIG5vdCB0aGUgc2V0dXAgY2xhc3MuXHJcbiAqXHJcbiAqIGBgYGNzc1xyXG4gKiAuZmFkZS1hZGQge1xyXG4gKiAgIC8mIzQyOyByZW1lbWJlciB0byBwbGFjZSBhIDBzIHRyYW5zaXRpb24gaGVyZVxyXG4gKiAgICAgIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHlsZXMgYXJlIGFwcGxpZWQgaW5zdGFudGx5XHJcbiAqICAgICAgZXZlbiBpZiB0aGUgZWxlbWVudCBhbHJlYWR5IGhhcyBhIHRyYW5zaXRpb24gc3R5bGUgJiM0MjsvXHJcbiAqICAgdHJhbnNpdGlvbjowcyBsaW5lYXIgYWxsO1xyXG4gKlxyXG4gKiAgIC8mIzQyOyBzdGFydGluZyBDU1Mgc3R5bGVzICYjNDI7L1xyXG4gKiAgIG9wYWNpdHk6MTtcclxuICogfVxyXG4gKiAuZmFkZS1hZGQuZmFkZS1hZGQtYWN0aXZlIHtcclxuICogICAvJiM0MjsgdGhpcyB3aWxsIGJlIHRoZSBsZW5ndGggb2YgdGhlIGFuaW1hdGlvbiAmIzQyOy9cclxuICogICB0cmFuc2l0aW9uOjFzIGxpbmVhciBhbGw7XHJcbiAqICAgb3BhY2l0eTowO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgc2V0dXAgQ1NTIGNsYXNzIChpbiB0aGlzIGNhc2UgYC5mYWRlLWFkZGApIGFsc28gaGFzIGEgdHJhbnNpdGlvbiBzdHlsZSBwcm9wZXJ0eSwgaG93ZXZlciwgaXRcclxuICogaGFzIGEgZHVyYXRpb24gb2YgemVyby4gVGhpcyBtYXkgbm90IGJlIHJlcXVpcmVkLCBob3dldmVyLCBpbmNhc2UgdGhlIGJyb3dzZXIgaXMgdW5hYmxlIHRvIHJlbmRlclxyXG4gKiB0aGUgc3R5bGluZyBwcmVzZW50IGluIHRoaXMgQ1NTIGNsYXNzIGluc3RhbnRseSB0aGVuIGl0IGNvdWxkIGJlIHRoYXQgdGhlIGJyb3dzZXIgaXMgYXR0ZW1wdGluZ1xyXG4gKiB0byBwZXJmb3JtIGFuIHVubmVjZXNzYXJ5IHRyYW5zaXRpb24uXHJcbiAqXHJcbiAqIFRoaXMgd29ya2Fyb3VuZCwgaG93ZXZlciwgZG9lcyBub3QgYXBwbHkgdG8gIHN0YW5kYXJkIGNsYXNzLWJhc2VkIHRyYW5zaXRpb25zIHRoYXQgYXJlIHJlbmRlcmVkXHJcbiAqIHdoZW4gYSBDU1MgY2xhc3MgY29udGFpbmluZyBhIHRyYW5zaXRpb24gaXMgYXBwbGllZCB0byBhbiBlbGVtZW50OlxyXG4gKlxyXG4gKiBgYGBjc3NcclxuICogLmZhZGUge1xyXG4gKiAgIC8mIzQyOyB0aGlzIHdvcmtzIGFzIGV4cGVjdGVkICYjNDI7L1xyXG4gKiAgIHRyYW5zaXRpb246MXMgbGluZWFyIGFsbDtcclxuICogICBvcGFjaXR5OjA7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIFBsZWFzZSBrZWVwIHRoaXMgaW4gbWluZCB3aGVuIGNvZGluZyB0aGUgQ1NTIG1hcmt1cCB0aGF0IHdpbGwgYmUgdXNlZCB3aXRoaW4gY2xhc3MtYmFzZWQgdHJhbnNpdGlvbnMuXHJcbiAqIEFsc28sIHRyeSBub3QgdG8gbWl4IHRoZSB0d28gY2xhc3MtYmFzZWQgYW5pbWF0aW9uIGZsYXZvcnMgdG9nZXRoZXIgc2luY2UgdGhlIENTUyBjb2RlIG1heSBiZWNvbWVcclxuICogb3Zlcmx5IGNvbXBsZXguXHJcbiAqXHJcbiAqICMjIyBDU1MgU3RhZ2dlcmluZyBBbmltYXRpb25zXHJcbiAqIEEgU3RhZ2dlcmluZyBhbmltYXRpb24gaXMgYSBjb2xsZWN0aW9uIG9mIGFuaW1hdGlvbnMgdGhhdCBhcmUgaXNzdWVkIHdpdGggYSBzbGlnaHQgZGVsYXkgaW4gYmV0d2VlbiBlYWNoIHN1Y2Nlc3NpdmUgb3BlcmF0aW9uIHJlc3VsdGluZyBpbiBhXHJcbiAqIGN1cnRhaW4tbGlrZSBlZmZlY3QuIFRoZSBuZ0FuaW1hdGUgbW9kdWxlLCBhcyBvZiAxLjIuMCwgc3VwcG9ydHMgc3RhZ2dlcmluZyBhbmltYXRpb25zIGFuZCB0aGUgc3RhZ2dlciBlZmZlY3QgY2FuIGJlXHJcbiAqIHBlcmZvcm1lZCBieSBjcmVhdGluZyBhICoqbmctRVZFTlQtc3RhZ2dlcioqIENTUyBjbGFzcyBhbmQgYXR0YWNoaW5nIHRoYXQgY2xhc3MgdG8gdGhlIGJhc2UgQ1NTIGNsYXNzIHVzZWQgZm9yXHJcbiAqIHRoZSBhbmltYXRpb24uIFRoZSBzdHlsZSBwcm9wZXJ0eSBleHBlY3RlZCB3aXRoaW4gdGhlIHN0YWdnZXIgY2xhc3MgY2FuIGVpdGhlciBiZSBhICoqdHJhbnNpdGlvbi1kZWxheSoqIG9yIGFuXHJcbiAqICoqYW5pbWF0aW9uLWRlbGF5KiogcHJvcGVydHkgKG9yIGJvdGggaWYgeW91ciBhbmltYXRpb24gY29udGFpbnMgYm90aCB0cmFuc2l0aW9ucyBhbmQga2V5ZnJhbWUgYW5pbWF0aW9ucykuXHJcbiAqXHJcbiAqIGBgYGNzc1xyXG4gKiAubXktYW5pbWF0aW9uLm5nLWVudGVyIHtcclxuICogICAvJiM0Mjsgc3RhbmRhcmQgdHJhbnNpdGlvbiBjb2RlICYjNDI7L1xyXG4gKiAgIC13ZWJraXQtdHJhbnNpdGlvbjogMXMgbGluZWFyIGFsbDtcclxuICogICB0cmFuc2l0aW9uOiAxcyBsaW5lYXIgYWxsO1xyXG4gKiAgIG9wYWNpdHk6MDtcclxuICogfVxyXG4gKiAubXktYW5pbWF0aW9uLm5nLWVudGVyLXN0YWdnZXIge1xyXG4gKiAgIC8mIzQyOyB0aGlzIHdpbGwgaGF2ZSBhIDEwMG1zIGRlbGF5IGJldHdlZW4gZWFjaCBzdWNjZXNzaXZlIGxlYXZlIGFuaW1hdGlvbiAmIzQyOy9cclxuICogICAtd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6IDAuMXM7XHJcbiAqICAgdHJhbnNpdGlvbi1kZWxheTogMC4xcztcclxuICpcclxuICogICAvJiM0MjsgaW4gY2FzZSB0aGUgc3RhZ2dlciBkb2Vzbid0IHdvcmsgdGhlbiB0aGVzZSB0d28gdmFsdWVzXHJcbiAqICAgIG11c3QgYmUgc2V0IHRvIDAgdG8gYXZvaWQgYW4gYWNjaWRlbnRhbCBDU1MgaW5oZXJpdGFuY2UgJiM0MjsvXHJcbiAqICAgLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uOiAwcztcclxuICogICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAwcztcclxuICogfVxyXG4gKiAubXktYW5pbWF0aW9uLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XHJcbiAqICAgLyYjNDI7IHN0YW5kYXJkIHRyYW5zaXRpb24gc3R5bGVzICYjNDI7L1xyXG4gKiAgIG9wYWNpdHk6MTtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogU3RhZ2dlcmluZyBhbmltYXRpb25zIHdvcmsgYnkgZGVmYXVsdCBpbiBuZ1JlcGVhdCAoc28gbG9uZyBhcyB0aGUgQ1NTIGNsYXNzIGlzIGRlZmluZWQpLiBPdXRzaWRlIG9mIG5nUmVwZWF0LCB0byB1c2Ugc3RhZ2dlcmluZyBhbmltYXRpb25zXHJcbiAqIG9uIHlvdXIgb3duLCB0aGV5IGNhbiBiZSB0cmlnZ2VyZWQgYnkgZmlyaW5nIG11bHRpcGxlIGNhbGxzIHRvIHRoZSBzYW1lIGV2ZW50IG9uICRhbmltYXRlLiBIb3dldmVyLCB0aGUgcmVzdHJpY3Rpb25zIHN1cnJvdW5kaW5nIHRoaXNcclxuICogYXJlIHRoYXQgZWFjaCBvZiB0aGUgZWxlbWVudHMgbXVzdCBoYXZlIHRoZSBzYW1lIENTUyBjbGFzc05hbWUgdmFsdWUgYXMgd2VsbCBhcyB0aGUgc2FtZSBwYXJlbnQgZWxlbWVudC4gQSBzdGFnZ2VyIG9wZXJhdGlvblxyXG4gKiB3aWxsIGFsc28gYmUgcmVzZXQgaWYgbW9yZSB0aGFuIDEwbXMgaGFzIHBhc3NlZCBhZnRlciB0aGUgbGFzdCBhbmltYXRpb24gaGFzIGJlZW4gZmlyZWQuXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgY29kZSB3aWxsIGlzc3VlIHRoZSAqKm5nLWxlYXZlLXN0YWdnZXIqKiBldmVudCBvbiB0aGUgZWxlbWVudCBwcm92aWRlZDpcclxuICpcclxuICogYGBganNcclxuICogdmFyIGtpZHMgPSBwYXJlbnQuY2hpbGRyZW4oKTtcclxuICpcclxuICogJGFuaW1hdGUubGVhdmUoa2lkc1swXSk7IC8vc3RhZ2dlciBpbmRleD0wXHJcbiAqICRhbmltYXRlLmxlYXZlKGtpZHNbMV0pOyAvL3N0YWdnZXIgaW5kZXg9MVxyXG4gKiAkYW5pbWF0ZS5sZWF2ZShraWRzWzJdKTsgLy9zdGFnZ2VyIGluZGV4PTJcclxuICogJGFuaW1hdGUubGVhdmUoa2lkc1szXSk7IC8vc3RhZ2dlciBpbmRleD0zXHJcbiAqICRhbmltYXRlLmxlYXZlKGtpZHNbNF0pOyAvL3N0YWdnZXIgaW5kZXg9NFxyXG4gKlxyXG4gKiAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICogICAvL3N0YWdnZXIgaGFzIHJlc2V0IGl0c2VsZlxyXG4gKiAgICRhbmltYXRlLmxlYXZlKGtpZHNbNV0pOyAvL3N0YWdnZXIgaW5kZXg9MFxyXG4gKiAgICRhbmltYXRlLmxlYXZlKGtpZHNbNl0pOyAvL3N0YWdnZXIgaW5kZXg9MVxyXG4gKiB9LCAxMDAsIGZhbHNlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIFN0YWdnZXIgYW5pbWF0aW9ucyBhcmUgY3VycmVudGx5IG9ubHkgc3VwcG9ydGVkIHdpdGhpbiBDU1MtZGVmaW5lZCBhbmltYXRpb25zLlxyXG4gKlxyXG4gKiAjIyBKYXZhU2NyaXB0LWRlZmluZWQgQW5pbWF0aW9uc1xyXG4gKiBJbiB0aGUgZXZlbnQgdGhhdCB5b3UgZG8gbm90IHdhbnQgdG8gdXNlIENTUzMgdHJhbnNpdGlvbnMgb3IgQ1NTMyBhbmltYXRpb25zIG9yIGlmIHlvdSB3aXNoIHRvIG9mZmVyIGFuaW1hdGlvbnMgb24gYnJvd3NlcnMgdGhhdCBkbyBub3RcclxuICogeWV0IHN1cHBvcnQgQ1NTIHRyYW5zaXRpb25zL2FuaW1hdGlvbnMsIHRoZW4geW91IGNhbiBtYWtlIHVzZSBvZiBKYXZhU2NyaXB0IGFuaW1hdGlvbnMgZGVmaW5lZCBpbnNpZGUgb2YgeW91ciBBbmd1bGFySlMgbW9kdWxlLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAvLyFhbm5vdGF0ZT1cIllvdXJBcHBcIiBZb3VyIEFuZ3VsYXJKUyBNb2R1bGV8UmVwbGFjZSB0aGlzIG9yIG5nTW9kdWxlIHdpdGggdGhlIG1vZHVsZSB0aGF0IHlvdSB1c2VkIHRvIGRlZmluZSB5b3VyIGFwcGxpY2F0aW9uLlxyXG4gKiB2YXIgbmdNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnWW91ckFwcCcsIFsnbmdBbmltYXRlJ10pO1xyXG4gKiBuZ01vZHVsZS5hbmltYXRpb24oJy5teS1jcmF6eS1hbmltYXRpb24nLCBmdW5jdGlvbigpIHtcclxuICogICByZXR1cm4ge1xyXG4gKiAgICAgZW50ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHtcclxuICogICAgICAgLy9ydW4gdGhlIGFuaW1hdGlvbiBoZXJlIGFuZCBjYWxsIGRvbmUgd2hlbiB0aGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlXHJcbiAqICAgICAgIHJldHVybiBmdW5jdGlvbihjYW5jZWxsZWQpIHtcclxuICogICAgICAgICAvL3RoaXMgKG9wdGlvbmFsKSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBhbmltYXRpb25cclxuICogICAgICAgICAvL2NvbXBsZXRlcyBvciB3aGVuIHRoZSBhbmltYXRpb24gaXMgY2FuY2VsbGVkICh0aGUgY2FuY2VsbGVkXHJcbiAqICAgICAgICAgLy9mbGFnIHdpbGwgYmUgc2V0IHRvIHRydWUgaWYgY2FuY2VsbGVkKS5cclxuICogICAgICAgfTtcclxuICogICAgIH0sXHJcbiAqICAgICBsZWF2ZTogZnVuY3Rpb24oZWxlbWVudCwgZG9uZSkgeyB9LFxyXG4gKiAgICAgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgZG9uZSkgeyB9LFxyXG4gKlxyXG4gKiAgICAgLy9hbmltYXRpb24gdGhhdCBjYW4gYmUgdHJpZ2dlcmVkIGJlZm9yZSB0aGUgY2xhc3MgaXMgYWRkZWRcclxuICogICAgIGJlZm9yZUFkZENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGRvbmUpIHsgfSxcclxuICpcclxuICogICAgIC8vYW5pbWF0aW9uIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhZnRlciB0aGUgY2xhc3MgaXMgYWRkZWRcclxuICogICAgIGFkZENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGRvbmUpIHsgfSxcclxuICpcclxuICogICAgIC8vYW5pbWF0aW9uIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIGNsYXNzIGlzIHJlbW92ZWRcclxuICogICAgIGJlZm9yZVJlbW92ZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGRvbmUpIHsgfSxcclxuICpcclxuICogICAgIC8vYW5pbWF0aW9uIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhZnRlciB0aGUgY2xhc3MgaXMgcmVtb3ZlZFxyXG4gKiAgICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZG9uZSkgeyB9XHJcbiAqICAgfTtcclxuICogfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBKYXZhU2NyaXB0LWRlZmluZWQgYW5pbWF0aW9ucyBhcmUgY3JlYXRlZCB3aXRoIGEgQ1NTLWxpa2UgY2xhc3Mgc2VsZWN0b3IgYW5kIGEgY29sbGVjdGlvbiBvZiBldmVudHMgd2hpY2ggYXJlIHNldCB0byBydW5cclxuICogYSBqYXZhc2NyaXB0IGNhbGxiYWNrIGZ1bmN0aW9uLiBXaGVuIGFuIGFuaW1hdGlvbiBpcyB0cmlnZ2VyZWQsICRhbmltYXRlIHdpbGwgbG9vayBmb3IgYSBtYXRjaGluZyBhbmltYXRpb24gd2hpY2ggZml0c1xyXG4gKiB0aGUgZWxlbWVudCdzIENTUyBjbGFzcyBhdHRyaWJ1dGUgdmFsdWUgYW5kIHRoZW4gcnVuIHRoZSBtYXRjaGluZyBhbmltYXRpb24gZXZlbnQgZnVuY3Rpb24gKGlmIGZvdW5kKS5cclxuICogSW4gb3RoZXIgd29yZHMsIGlmIHRoZSBDU1MgY2xhc3NlcyBwcmVzZW50IG9uIHRoZSBhbmltYXRlZCBlbGVtZW50IG1hdGNoIGFueSBvZiB0aGUgSmF2YVNjcmlwdCBhbmltYXRpb25zIHRoZW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGxcclxuICogYmUgZXhlY3V0ZWQuIEl0IHNob3VsZCBiZSBhbHNvIG5vdGVkIHRoYXQgb25seSBzaW1wbGUsIHNpbmdsZSBjbGFzcyBzZWxlY3RvcnMgYXJlIGFsbG93ZWQgKGNvbXBvdW5kIGNsYXNzIHNlbGVjdG9ycyBhcmUgbm90IHN1cHBvcnRlZCkuXHJcbiAqXHJcbiAqIFdpdGhpbiBhIEphdmFTY3JpcHQgYW5pbWF0aW9uLCBhbiBvYmplY3QgY29udGFpbmluZyB2YXJpb3VzIGV2ZW50IGNhbGxiYWNrIGFuaW1hdGlvbiBmdW5jdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgcmV0dXJuZWQuXHJcbiAqIEFzIGV4cGxhaW5lZCBhYm92ZSwgdGhlc2UgY2FsbGJhY2tzIGFyZSB0cmlnZ2VyZWQgYmFzZWQgb24gdGhlIGFuaW1hdGlvbiBldmVudC4gVGhlcmVmb3JlIGlmIGFuIGVudGVyIGFuaW1hdGlvbiBpcyBydW4sXHJcbiAqIGFuZCB0aGUgSmF2YVNjcmlwdCBhbmltYXRpb24gaXMgZm91bmQsIHRoZW4gdGhlIGVudGVyIGNhbGxiYWNrIHdpbGwgaGFuZGxlIHRoYXQgYW5pbWF0aW9uIChpbiBhZGRpdGlvbiB0byB0aGUgQ1NTIGtleWZyYW1lIGFuaW1hdGlvblxyXG4gKiBvciB0cmFuc2l0aW9uIGNvZGUgdGhhdCBpcyBkZWZpbmVkIHZpYSBhIHN0eWxlc2hlZXQpLlxyXG4gKlxyXG4gKi9cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCduZ0FuaW1hdGUnLCBbJ25nJ10pXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBwcm92aWRlclxyXG4gICAqIEBuYW1lICRhbmltYXRlUHJvdmlkZXJcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIFRoZSBgJGFuaW1hdGVQcm92aWRlcmAgYWxsb3dzIGRldmVsb3BlcnMgdG8gcmVnaXN0ZXIgSmF2YVNjcmlwdCBhbmltYXRpb24gZXZlbnQgaGFuZGxlcnMgZGlyZWN0bHkgaW5zaWRlIG9mIGEgbW9kdWxlLlxyXG4gICAqIFdoZW4gYW4gYW5pbWF0aW9uIGlzIHRyaWdnZXJlZCwgdGhlICRhbmltYXRlIHNlcnZpY2Ugd2lsbCBxdWVyeSB0aGUgJGFuaW1hdGUgc2VydmljZSB0byBmaW5kIGFueSBhbmltYXRpb25zIHRoYXQgbWF0Y2hcclxuICAgKiB0aGUgcHJvdmlkZWQgbmFtZSB2YWx1ZS5cclxuICAgKlxyXG4gICAqIFJlcXVpcmVzIHRoZSB7QGxpbmsgbmdBbmltYXRlIGBuZ0FuaW1hdGVgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxyXG4gICAqXHJcbiAgICogUGxlYXNlIHZpc2l0IHRoZSB7QGxpbmsgbmdBbmltYXRlIGBuZ0FuaW1hdGVgfSBtb2R1bGUgb3ZlcnZpZXcgcGFnZSBsZWFybiBtb3JlIGFib3V0IGhvdyB0byB1c2UgYW5pbWF0aW9ucyBpbiB5b3VyIGFwcGxpY2F0aW9uLlxyXG4gICAqXHJcbiAgICovXHJcbiAgLmRpcmVjdGl2ZSgnbmdBbmltYXRlQ2hpbGRyZW4nLCBmdW5jdGlvbigpIHtcclxuICAgIHZhciBOR19BTklNQVRFX0NISUxEUkVOID0gJyQkbmdBbmltYXRlQ2hpbGRyZW4nO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICB2YXIgdmFsID0gYXR0cnMubmdBbmltYXRlQ2hpbGRyZW47XHJcbiAgICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKHZhbCkgJiYgdmFsLmxlbmd0aCA9PT0gMCkgeyAvL2VtcHR5IGF0dHJpYnV0ZVxyXG4gICAgICAgIGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NISUxEUkVOLCB0cnVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzY29wZS4kd2F0Y2godmFsLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ0hJTERSRU4sICEhdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0pXHJcblxyXG4gIC8vdGhpcyBwcml2YXRlIHNlcnZpY2UgaXMgb25seSB1c2VkIHdpdGhpbiBDU1MtZW5hYmxlZCBhbmltYXRpb25zXHJcbiAgLy9JRTggKyBJRTkgZG8gbm90IHN1cHBvcnQgckFGIG5hdGl2ZWx5LCBidXQgdGhhdCBpcyBmaW5lIHNpbmNlIHRoZXlcclxuICAvL2Fsc28gZG9uJ3Qgc3VwcG9ydCB0cmFuc2l0aW9ucyBhbmQga2V5ZnJhbWVzIHdoaWNoIG1lYW5zIHRoYXQgdGhlIGNvZGVcclxuICAvL2JlbG93IHdpbGwgbmV2ZXIgYmUgdXNlZCBieSB0aGUgdHdvIGJyb3dzZXJzLlxyXG4gIC5mYWN0b3J5KCckJGFuaW1hdGVSZWZsb3cnLCBbJyQkckFGJywgJyRkb2N1bWVudCcsIGZ1bmN0aW9uKCQkckFGLCAkZG9jdW1lbnQpIHtcclxuICAgIHZhciBib2QgPSAkZG9jdW1lbnRbMF0uYm9keTtcclxuICAgIHJldHVybiBmdW5jdGlvbihmbikge1xyXG4gICAgICAvL3RoZSByZXR1cm5lZCBmdW5jdGlvbiBhY3RzIGFzIHRoZSBjYW5jZWxsYXRpb24gZnVuY3Rpb25cclxuICAgICAgcmV0dXJuICQkckFGKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vdGhlIGxpbmUgYmVsb3cgd2lsbCBmb3JjZSB0aGUgYnJvd3NlciB0byBwZXJmb3JtIGEgcmVwYWludFxyXG4gICAgICAgIC8vc28gdGhhdCBhbGwgdGhlIGFuaW1hdGVkIGVsZW1lbnRzIHdpdGhpbiB0aGUgYW5pbWF0aW9uIGZyYW1lXHJcbiAgICAgICAgLy93aWxsIGJlIHByb3Blcmx5IHVwZGF0ZWQgYW5kIGRyYXduIG9uIHNjcmVlbi4gVGhpcyBpc1xyXG4gICAgICAgIC8vcmVxdWlyZWQgdG8gcGVyZm9ybSBtdWx0aS1jbGFzcyBDU1MgYmFzZWQgYW5pbWF0aW9ucyB3aXRoXHJcbiAgICAgICAgLy9GaXJlZm94LiBETyBOT1QgUkVNT1ZFIFRISVMgTElORS5cclxuICAgICAgICB2YXIgYSA9IGJvZC5vZmZzZXRXaWR0aCArIDE7XHJcbiAgICAgICAgZm4oKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gIH1dKVxyXG5cclxuICAuY29uZmlnKFsnJHByb3ZpZGUnLCAnJGFuaW1hdGVQcm92aWRlcicsIGZ1bmN0aW9uKCRwcm92aWRlLCAkYW5pbWF0ZVByb3ZpZGVyKSB7XHJcbiAgICB2YXIgbm9vcCA9IGFuZ3VsYXIubm9vcDtcclxuICAgIHZhciBmb3JFYWNoID0gYW5ndWxhci5mb3JFYWNoO1xyXG4gICAgdmFyIHNlbGVjdG9ycyA9ICRhbmltYXRlUHJvdmlkZXIuJCRzZWxlY3RvcnM7XHJcbiAgICB2YXIgaXNBcnJheSA9IGFuZ3VsYXIuaXNBcnJheTtcclxuXHJcbiAgICB2YXIgRUxFTUVOVF9OT0RFID0gMTtcclxuICAgIHZhciBOR19BTklNQVRFX1NUQVRFID0gJyQkbmdBbmltYXRlU3RhdGUnO1xyXG4gICAgdmFyIE5HX0FOSU1BVEVfQ0hJTERSRU4gPSAnJCRuZ0FuaW1hdGVDaGlsZHJlbic7XHJcbiAgICB2YXIgTkdfQU5JTUFURV9DTEFTU19OQU1FID0gJ25nLWFuaW1hdGUnO1xyXG4gICAgdmFyIHJvb3RBbmltYXRlU3RhdGUgPSB7cnVubmluZzogdHJ1ZX07XHJcblxyXG4gICAgZnVuY3Rpb24gZXh0cmFjdEVsZW1lbnROb2RlKGVsZW1lbnQpIHtcclxuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGVsZW1lbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgZWxtID0gZWxlbWVudFtpXTtcclxuICAgICAgICBpZiAoZWxtLm5vZGVUeXBlID09IEVMRU1FTlRfTk9ERSkge1xyXG4gICAgICAgICAgcmV0dXJuIGVsbTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcmVwYXJlRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50ICYmIGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzdHJpcENvbW1lbnRzRnJvbUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNNYXRjaGluZ0VsZW1lbnQoZWxtMSwgZWxtMikge1xyXG4gICAgICByZXR1cm4gZXh0cmFjdEVsZW1lbnROb2RlKGVsbTEpID09IGV4dHJhY3RFbGVtZW50Tm9kZShlbG0yKTtcclxuICAgIH1cclxuXHJcbiAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRhbmltYXRlJyxcclxuICAgICAgICBbJyRkZWxlZ2F0ZScsICckJHEnLCAnJGluamVjdG9yJywgJyRzbmlmZmVyJywgJyRyb290RWxlbWVudCcsICckJGFzeW5jQ2FsbGJhY2snLCAnJHJvb3RTY29wZScsICckZG9jdW1lbnQnLCAnJHRlbXBsYXRlUmVxdWVzdCcsXHJcbiBmdW5jdGlvbigkZGVsZWdhdGUsICAgJCRxLCAgICRpbmplY3RvciwgICAkc25pZmZlciwgICAkcm9vdEVsZW1lbnQsICAgJCRhc3luY0NhbGxiYWNrLCAgICRyb290U2NvcGUsICAgJGRvY3VtZW50LCAgICR0ZW1wbGF0ZVJlcXVlc3QpIHtcclxuXHJcbiAgICAgICRyb290RWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUsIHJvb3RBbmltYXRlU3RhdGUpO1xyXG5cclxuICAgICAgLy8gV2FpdCB1bnRpbCBhbGwgZGlyZWN0aXZlIGFuZCByb3V0ZS1yZWxhdGVkIHRlbXBsYXRlcyBhcmUgZG93bmxvYWRlZCBhbmRcclxuICAgICAgLy8gY29tcGlsZWQuIFRoZSAkdGVtcGxhdGVSZXF1ZXN0LnRvdGFsUGVuZGluZ1JlcXVlc3RzIHZhcmlhYmxlIGtlZXBzIHRyYWNrIG9mXHJcbiAgICAgIC8vIGFsbCBvZiB0aGUgcmVtb3RlIHRlbXBsYXRlcyBiZWluZyBjdXJyZW50bHkgZG93bmxvYWRlZC4gSWYgdGhlcmUgYXJlIG5vXHJcbiAgICAgIC8vIHRlbXBsYXRlcyBjdXJyZW50bHkgZG93bmxvYWRpbmcgdGhlbiB0aGUgd2F0Y2hlciB3aWxsIHN0aWxsIGZpcmUgYW55d2F5LlxyXG4gICAgICB2YXIgZGVyZWdpc3RlcldhdGNoID0gJHJvb3RTY29wZS4kd2F0Y2goXHJcbiAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiAkdGVtcGxhdGVSZXF1ZXN0LnRvdGFsUGVuZGluZ1JlcXVlc3RzOyB9LFxyXG4gICAgICAgIGZ1bmN0aW9uKHZhbCwgb2xkVmFsKSB7XHJcbiAgICAgICAgICBpZiAodmFsICE9PSAwKSByZXR1cm47XHJcbiAgICAgICAgICBkZXJlZ2lzdGVyV2F0Y2goKTtcclxuXHJcbiAgICAgICAgICAvLyBOb3cgdGhhdCBhbGwgdGVtcGxhdGVzIGhhdmUgYmVlbiBkb3dubG9hZGVkLCAkYW5pbWF0ZSB3aWxsIHdhaXQgdW50aWxcclxuICAgICAgICAgIC8vIHRoZSBwb3N0IGRpZ2VzdCBxdWV1ZSBpcyBlbXB0eSBiZWZvcmUgZW5hYmxpbmcgYW5pbWF0aW9ucy4gQnkgaGF2aW5nIHR3b1xyXG4gICAgICAgICAgLy8gY2FsbHMgdG8gJHBvc3REaWdlc3QgY2FsbHMgd2UgY2FuIGVuc3VyZSB0aGF0IHRoZSBmbGFnIGlzIGVuYWJsZWQgYXQgdGhlXHJcbiAgICAgICAgICAvLyB2ZXJ5IGVuZCBvZiB0aGUgcG9zdCBkaWdlc3QgcXVldWUuIFNpbmNlIGFsbCBvZiB0aGUgYW5pbWF0aW9ucyBpbiAkYW5pbWF0ZVxyXG4gICAgICAgICAgLy8gdXNlICRwb3N0RGlnZXN0LCBpdCdzIGltcG9ydGFudCB0aGF0IHRoZSBjb2RlIGJlbG93IGV4ZWN1dGVzIGF0IHRoZSBlbmQuXHJcbiAgICAgICAgICAvLyBUaGlzIGJhc2ljYWxseSBtZWFucyB0aGF0IHRoZSBwYWdlIGlzIGZ1bGx5IGRvd25sb2FkZWQgYW5kIGNvbXBpbGVkIGJlZm9yZVxyXG4gICAgICAgICAgLy8gYW55IGFuaW1hdGlvbnMgYXJlIHRyaWdnZXJlZC5cclxuICAgICAgICAgICRyb290U2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICByb290QW5pbWF0ZVN0YXRlLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICB2YXIgZ2xvYmFsQW5pbWF0aW9uQ291bnRlciA9IDA7XHJcbiAgICAgIHZhciBjbGFzc05hbWVGaWx0ZXIgPSAkYW5pbWF0ZVByb3ZpZGVyLmNsYXNzTmFtZUZpbHRlcigpO1xyXG4gICAgICB2YXIgaXNBbmltYXRhYmxlQ2xhc3NOYW1lID0gIWNsYXNzTmFtZUZpbHRlclxyXG4gICAgICAgICAgICAgID8gZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9XHJcbiAgICAgICAgICAgICAgOiBmdW5jdGlvbihjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc05hbWVGaWx0ZXIudGVzdChjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICBmdW5jdGlvbiBjbGFzc0Jhc2VkQW5pbWF0aW9uc0Jsb2NrZWQoZWxlbWVudCwgc2V0dGVyKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge307XHJcbiAgICAgICAgaWYgKHNldHRlcikge1xyXG4gICAgICAgICAgZGF0YS5ydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICAgIGRhdGEuc3RydWN0dXJhbCA9IHRydWU7XHJcbiAgICAgICAgICBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhLmRpc2FibGVkIHx8IChkYXRhLnJ1bm5pbmcgJiYgZGF0YS5zdHJ1Y3R1cmFsKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmbikge1xyXG4gICAgICAgIHZhciBjYW5jZWxGbiwgZGVmZXIgPSAkJHEuZGVmZXIoKTtcclxuICAgICAgICBkZWZlci5wcm9taXNlLiQkY2FuY2VsRm4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGNhbmNlbEZuICYmIGNhbmNlbEZuKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkcm9vdFNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGNhbmNlbEZuID0gZm4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiByZXNvbHZlRWxlbWVudENsYXNzZXMoZWxlbWVudCwgY2FjaGUsIHJ1bm5pbmdBbmltYXRpb25zKSB7XHJcbiAgICAgICAgcnVubmluZ0FuaW1hdGlvbnMgPSBydW5uaW5nQW5pbWF0aW9ucyB8fCB7fTtcclxuICAgICAgICB2YXIgbWFwID0ge307XHJcblxyXG4gICAgICAgIGZvckVhY2goY2FjaGUuYWRkLCBmdW5jdGlvbihjbGFzc05hbWUpIHtcclxuICAgICAgICAgIGlmIChjbGFzc05hbWUgJiYgY2xhc3NOYW1lLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBtYXBbY2xhc3NOYW1lXSA9IG1hcFtjbGFzc05hbWVdIHx8IDA7XHJcbiAgICAgICAgICAgIG1hcFtjbGFzc05hbWVdKys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvckVhY2goY2FjaGUucmVtb3ZlLCBmdW5jdGlvbihjbGFzc05hbWUpIHtcclxuICAgICAgICAgIGlmIChjbGFzc05hbWUgJiYgY2xhc3NOYW1lLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBtYXBbY2xhc3NOYW1lXSA9IG1hcFtjbGFzc05hbWVdIHx8IDA7XHJcbiAgICAgICAgICAgIG1hcFtjbGFzc05hbWVdLS07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBsb29rdXAgPSBbXTtcclxuICAgICAgICBmb3JFYWNoKHJ1bm5pbmdBbmltYXRpb25zLCBmdW5jdGlvbihkYXRhLCBzZWxlY3Rvcikge1xyXG4gICAgICAgICAgZm9yRWFjaChzZWxlY3Rvci5zcGxpdCgnICcpLCBmdW5jdGlvbihzKSB7XHJcbiAgICAgICAgICAgIGxvb2t1cFtzXT1kYXRhO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciB0b0FkZCA9IFtdLCB0b1JlbW92ZSA9IFtdO1xyXG4gICAgICAgIGZvckVhY2gobWFwLCBmdW5jdGlvbihzdGF0dXMsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgdmFyIGhhc0NsYXNzID0gYW5ndWxhci4kJGhhc0NsYXNzKGVsZW1lbnRbMF0sIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICB2YXIgbWF0Y2hpbmdBbmltYXRpb24gPSBsb29rdXBbY2xhc3NOYW1lXSB8fCB7fTtcclxuXHJcbiAgICAgICAgICAvLyBXaGVuIGFkZENsYXNzIGFuZCByZW1vdmVDbGFzcyBpcyBjYWxsZWQgdGhlbiAkYW5pbWF0ZSB3aWxsIGNoZWNrIHRvXHJcbiAgICAgICAgICAvLyBzZWUgaWYgYWRkQ2xhc3MgYW5kIHJlbW92ZUNsYXNzIGNhbmNlbCBlYWNoIG90aGVyIG91dC4gV2hlbiB0aGVyZSBhcmVcclxuICAgICAgICAgIC8vIG1vcmUgY2FsbHMgdG8gcmVtb3ZlQ2xhc3MgdGhhbiBhZGRDbGFzcyB0aGVuIHRoZSBjb3VudCBmYWxscyBiZWxvdyAwXHJcbiAgICAgICAgICAvLyBhbmQgdGhlbiB0aGUgcmVtb3ZlQ2xhc3MgYW5pbWF0aW9uIHdpbGwgYmUgYWxsb3dlZC4gT3RoZXJ3aXNlIGlmIHRoZVxyXG4gICAgICAgICAgLy8gY291bnQgaXMgYWJvdmUgMCB0aGVuIHRoYXQgbWVhbnMgYW4gYWRkQ2xhc3MgYW5pbWF0aW9uIHdpbGwgY29tbWVuY2UuXHJcbiAgICAgICAgICAvLyBPbmNlIGFuIGFuaW1hdGlvbiBpcyBhbGxvd2VkIHRoZW4gdGhlIGNvZGUgd2lsbCBhbHNvIGNoZWNrIHRvIHNlZSBpZlxyXG4gICAgICAgICAgLy8gdGhlcmUgZXhpc3RzIGFueSBvbi1nb2luZyBhbmltYXRpb24gdGhhdCBpcyBhbHJlYWR5IGFkZGluZyBvciByZW12b2luZ1xyXG4gICAgICAgICAgLy8gdGhlIG1hdGNoaW5nIENTUyBjbGFzcy5cclxuICAgICAgICAgIGlmIChzdGF0dXMgPCAwKSB7XHJcbiAgICAgICAgICAgIC8vZG9lcyBpdCBoYXZlIHRoZSBjbGFzcyBvciB3aWxsIGl0IGhhdmUgdGhlIGNsYXNzXHJcbiAgICAgICAgICAgIGlmIChoYXNDbGFzcyB8fCBtYXRjaGluZ0FuaW1hdGlvbi5ldmVudCA9PSAnYWRkQ2xhc3MnKSB7XHJcbiAgICAgICAgICAgICAgdG9SZW1vdmUucHVzaChjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA+IDApIHtcclxuICAgICAgICAgICAgLy9pcyB0aGUgY2xhc3MgbWlzc2luZyBvciB3aWxsIGl0IGJlIHJlbW92ZWQ/XHJcbiAgICAgICAgICAgIGlmICghaGFzQ2xhc3MgfHwgbWF0Y2hpbmdBbmltYXRpb24uZXZlbnQgPT0gJ3JlbW92ZUNsYXNzJykge1xyXG4gICAgICAgICAgICAgIHRvQWRkLnB1c2goY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gKHRvQWRkLmxlbmd0aCArIHRvUmVtb3ZlLmxlbmd0aCkgPiAwICYmIFt0b0FkZC5qb2luKCcgJyksIHRvUmVtb3ZlLmpvaW4oJyAnKV07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGxvb2t1cChuYW1lKSB7XHJcbiAgICAgICAgaWYgKG5hbWUpIHtcclxuICAgICAgICAgIHZhciBtYXRjaGVzID0gW10sXHJcbiAgICAgICAgICAgICAgZmxhZ01hcCA9IHt9LFxyXG4gICAgICAgICAgICAgIGNsYXNzZXMgPSBuYW1lLnN1YnN0cigxKS5zcGxpdCgnLicpO1xyXG5cclxuICAgICAgICAgIC8vdGhlIGVtcHR5IHN0cmluZyB2YWx1ZSBpcyB0aGUgZGVmYXVsdCBhbmltYXRpb25cclxuICAgICAgICAgIC8vb3BlcmF0aW9uIHdoaWNoIHBlcmZvcm1zIENTUyB0cmFuc2l0aW9uIGFuZCBrZXlmcmFtZVxyXG4gICAgICAgICAgLy9hbmltYXRpb25zIHNuaWZmaW5nLiBUaGlzIGlzIGFsd2F5cyBpbmNsdWRlZCBmb3IgZWFjaFxyXG4gICAgICAgICAgLy9lbGVtZW50IGFuaW1hdGlvbiBwcm9jZWR1cmUgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHNcclxuICAgICAgICAgIC8vdHJhbnNpdGlvbnMgYW5kL29yIGtleWZyYW1lIGFuaW1hdGlvbnMuIFRoZSBkZWZhdWx0XHJcbiAgICAgICAgICAvL2FuaW1hdGlvbiBpcyBhZGRlZCB0byB0aGUgdG9wIG9mIHRoZSBsaXN0IHRvIHByZXZlbnRcclxuICAgICAgICAgIC8vYW55IHByZXZpb3VzIGFuaW1hdGlvbnMgZnJvbSBhZmZlY3RpbmcgdGhlIGVsZW1lbnQgc3R5bGluZ1xyXG4gICAgICAgICAgLy9wcmlvciB0byB0aGUgZWxlbWVudCBiZWluZyBhbmltYXRlZC5cclxuICAgICAgICAgIGlmICgkc25pZmZlci50cmFuc2l0aW9ucyB8fCAkc25pZmZlci5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgIG1hdGNoZXMucHVzaCgkaW5qZWN0b3IuZ2V0KHNlbGVjdG9yc1snJ10pKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGtsYXNzID0gY2xhc3Nlc1tpXSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yRmFjdG9yeU5hbWUgPSBzZWxlY3RvcnNba2xhc3NdO1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0b3JGYWN0b3J5TmFtZSAmJiAhZmxhZ01hcFtrbGFzc10pIHtcclxuICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goJGluamVjdG9yLmdldChzZWxlY3RvckZhY3RvcnlOYW1lKSk7XHJcbiAgICAgICAgICAgICAgZmxhZ01hcFtrbGFzc10gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGFuaW1hdGlvblJ1bm5lcihlbGVtZW50LCBhbmltYXRpb25FdmVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgLy90cmFuc2NsdWRlZCBkaXJlY3RpdmVzIG1heSBzb21ldGltZXMgZmlyZSBhbiBhbmltYXRpb24gdXNpbmcgb25seSBjb21tZW50IG5vZGVzXHJcbiAgICAgICAgLy9iZXN0IHRvIGNhdGNoIHRoaXMgZWFybHkgb24gdG8gcHJldmVudCBhbnkgYW5pbWF0aW9uIG9wZXJhdGlvbnMgZnJvbSBvY2N1cnJpbmdcclxuICAgICAgICB2YXIgbm9kZSA9IGVsZW1lbnRbMF07XHJcbiAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY2xhc3NOYW1lQWRkO1xyXG4gICAgICAgIHZhciBjbGFzc05hbWVSZW1vdmU7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkoY2xhc3NOYW1lKSkge1xyXG4gICAgICAgICAgY2xhc3NOYW1lQWRkID0gY2xhc3NOYW1lWzBdO1xyXG4gICAgICAgICAgY2xhc3NOYW1lUmVtb3ZlID0gY2xhc3NOYW1lWzFdO1xyXG4gICAgICAgICAgaWYgKCFjbGFzc05hbWVBZGQpIHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lUmVtb3ZlO1xyXG4gICAgICAgICAgICBhbmltYXRpb25FdmVudCA9ICdyZW1vdmVDbGFzcyc7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCFjbGFzc05hbWVSZW1vdmUpIHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lQWRkO1xyXG4gICAgICAgICAgICBhbmltYXRpb25FdmVudCA9ICdhZGRDbGFzcyc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWVBZGQgKyAnICcgKyBjbGFzc05hbWVSZW1vdmU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaXNTZXRDbGFzc09wZXJhdGlvbiA9IGFuaW1hdGlvbkV2ZW50ID09ICdzZXRDbGFzcyc7XHJcbiAgICAgICAgdmFyIGlzQ2xhc3NCYXNlZCA9IGlzU2V0Q2xhc3NPcGVyYXRpb24gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uRXZlbnQgPT0gJ2FkZENsYXNzJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25FdmVudCA9PSAncmVtb3ZlQ2xhc3MnO1xyXG5cclxuICAgICAgICB2YXIgY3VycmVudENsYXNzTmFtZSA9IGVsZW1lbnQuYXR0cignY2xhc3MnKTtcclxuICAgICAgICB2YXIgY2xhc3NlcyA9IGN1cnJlbnRDbGFzc05hbWUgKyAnICcgKyBjbGFzc05hbWU7XHJcbiAgICAgICAgaWYgKCFpc0FuaW1hdGFibGVDbGFzc05hbWUoY2xhc3NlcykpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBiZWZvcmVDb21wbGV0ZSA9IG5vb3AsXHJcbiAgICAgICAgICAgIGJlZm9yZUNhbmNlbCA9IFtdLFxyXG4gICAgICAgICAgICBiZWZvcmUgPSBbXSxcclxuICAgICAgICAgICAgYWZ0ZXJDb21wbGV0ZSA9IG5vb3AsXHJcbiAgICAgICAgICAgIGFmdGVyQ2FuY2VsID0gW10sXHJcbiAgICAgICAgICAgIGFmdGVyID0gW107XHJcblxyXG4gICAgICAgIHZhciBhbmltYXRpb25Mb29rdXAgPSAoJyAnICsgY2xhc3NlcykucmVwbGFjZSgvXFxzKy9nLCcuJyk7XHJcbiAgICAgICAgZm9yRWFjaChsb29rdXAoYW5pbWF0aW9uTG9va3VwKSwgZnVuY3Rpb24oYW5pbWF0aW9uRmFjdG9yeSkge1xyXG4gICAgICAgICAgdmFyIGNyZWF0ZWQgPSByZWdpc3RlckFuaW1hdGlvbihhbmltYXRpb25GYWN0b3J5LCBhbmltYXRpb25FdmVudCk7XHJcbiAgICAgICAgICBpZiAoIWNyZWF0ZWQgJiYgaXNTZXRDbGFzc09wZXJhdGlvbikge1xyXG4gICAgICAgICAgICByZWdpc3RlckFuaW1hdGlvbihhbmltYXRpb25GYWN0b3J5LCAnYWRkQ2xhc3MnKTtcclxuICAgICAgICAgICAgcmVnaXN0ZXJBbmltYXRpb24oYW5pbWF0aW9uRmFjdG9yeSwgJ3JlbW92ZUNsYXNzJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQW5pbWF0aW9uKGFuaW1hdGlvbkZhY3RvcnksIGV2ZW50KSB7XHJcbiAgICAgICAgICB2YXIgYWZ0ZXJGbiA9IGFuaW1hdGlvbkZhY3RvcnlbZXZlbnRdO1xyXG4gICAgICAgICAgdmFyIGJlZm9yZUZuID0gYW5pbWF0aW9uRmFjdG9yeVsnYmVmb3JlJyArIGV2ZW50LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZXZlbnQuc3Vic3RyKDEpXTtcclxuICAgICAgICAgIGlmIChhZnRlckZuIHx8IGJlZm9yZUZuKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCA9PSAnbGVhdmUnKSB7XHJcbiAgICAgICAgICAgICAgYmVmb3JlRm4gPSBhZnRlckZuO1xyXG4gICAgICAgICAgICAgIC8vd2hlbiBzZXQgYXMgbnVsbCB0aGVuIGFuaW1hdGlvbiBrbm93cyB0byBza2lwIHRoaXMgcGhhc2VcclxuICAgICAgICAgICAgICBhZnRlckZuID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZnRlci5wdXNoKHtcclxuICAgICAgICAgICAgICBldmVudCA6IGV2ZW50LCBmbiA6IGFmdGVyRm5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJlZm9yZS5wdXNoKHtcclxuICAgICAgICAgICAgICBldmVudCA6IGV2ZW50LCBmbiA6IGJlZm9yZUZuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJ1bihmbnMsIGNhbmNlbGxhdGlvbnMsIGFsbENvbXBsZXRlRm4pIHtcclxuICAgICAgICAgIHZhciBhbmltYXRpb25zID0gW107XHJcbiAgICAgICAgICBmb3JFYWNoKGZucywgZnVuY3Rpb24oYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbi5mbiAmJiBhbmltYXRpb25zLnB1c2goYW5pbWF0aW9uKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICBmdW5jdGlvbiBhZnRlckFuaW1hdGlvbkNvbXBsZXRlKGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChjYW5jZWxsYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgKGNhbmNlbGxhdGlvbnNbaW5kZXhdIHx8IG5vb3ApKCk7XHJcbiAgICAgICAgICAgICAgaWYgKCsrY291bnQgPCBhbmltYXRpb25zLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIGNhbmNlbGxhdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFsbENvbXBsZXRlRm4oKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvL1RoZSBjb2RlIGJlbG93IGFkZHMgZGlyZWN0bHkgdG8gdGhlIGFycmF5IGluIG9yZGVyIHRvIHdvcmsgd2l0aFxyXG4gICAgICAgICAgLy9ib3RoIHN5bmMgYW5kIGFzeW5jIGFuaW1hdGlvbnMuIFN5bmMgYW5pbWF0aW9ucyBhcmUgd2hlbiB0aGUgZG9uZSgpXHJcbiAgICAgICAgICAvL29wZXJhdGlvbiBpcyBjYWxsZWQgcmlnaHQgYXdheS4gRE8gTk9UIFJFRkFDVE9SIVxyXG4gICAgICAgICAgZm9yRWFjaChhbmltYXRpb25zLCBmdW5jdGlvbihhbmltYXRpb24sIGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGFmdGVyQW5pbWF0aW9uQ29tcGxldGUoaW5kZXgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzd2l0Y2goYW5pbWF0aW9uLmV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgY2FzZSAnc2V0Q2xhc3MnOlxyXG4gICAgICAgICAgICAgICAgY2FuY2VsbGF0aW9ucy5wdXNoKGFuaW1hdGlvbi5mbihlbGVtZW50LCBjbGFzc05hbWVBZGQsIGNsYXNzTmFtZVJlbW92ZSwgcHJvZ3Jlc3MpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgJ2FkZENsYXNzJzpcclxuICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvbnMucHVzaChhbmltYXRpb24uZm4oZWxlbWVudCwgY2xhc3NOYW1lQWRkIHx8IGNsYXNzTmFtZSwgICAgIHByb2dyZXNzKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlICdyZW1vdmVDbGFzcyc6XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxsYXRpb25zLnB1c2goYW5pbWF0aW9uLmZuKGVsZW1lbnQsIGNsYXNzTmFtZVJlbW92ZSB8fCBjbGFzc05hbWUsICBwcm9ncmVzcykpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvbnMucHVzaChhbmltYXRpb24uZm4oZWxlbWVudCwgcHJvZ3Jlc3MpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoY2FuY2VsbGF0aW9ucyAmJiBjYW5jZWxsYXRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBhbGxDb21wbGV0ZUZuKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbm9kZSA6IG5vZGUsXHJcbiAgICAgICAgICBldmVudCA6IGFuaW1hdGlvbkV2ZW50LFxyXG4gICAgICAgICAgY2xhc3NOYW1lIDogY2xhc3NOYW1lLFxyXG4gICAgICAgICAgaXNDbGFzc0Jhc2VkIDogaXNDbGFzc0Jhc2VkLFxyXG4gICAgICAgICAgaXNTZXRDbGFzc09wZXJhdGlvbiA6IGlzU2V0Q2xhc3NPcGVyYXRpb24sXHJcbiAgICAgICAgICBiZWZvcmUgOiBmdW5jdGlvbihhbGxDb21wbGV0ZUZuKSB7XHJcbiAgICAgICAgICAgIGJlZm9yZUNvbXBsZXRlID0gYWxsQ29tcGxldGVGbjtcclxuICAgICAgICAgICAgcnVuKGJlZm9yZSwgYmVmb3JlQ2FuY2VsLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBiZWZvcmVDb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgYWxsQ29tcGxldGVGbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBhZnRlciA6IGZ1bmN0aW9uKGFsbENvbXBsZXRlRm4pIHtcclxuICAgICAgICAgICAgYWZ0ZXJDb21wbGV0ZSA9IGFsbENvbXBsZXRlRm47XHJcbiAgICAgICAgICAgIHJ1bihhZnRlciwgYWZ0ZXJDYW5jZWwsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGFmdGVyQ29tcGxldGUgPSBub29wO1xyXG4gICAgICAgICAgICAgIGFsbENvbXBsZXRlRm4oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY2FuY2VsIDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChiZWZvcmVDYW5jZWwpIHtcclxuICAgICAgICAgICAgICBmb3JFYWNoKGJlZm9yZUNhbmNlbCwgZnVuY3Rpb24oY2FuY2VsRm4pIHtcclxuICAgICAgICAgICAgICAgIChjYW5jZWxGbiB8fCBub29wKSh0cnVlKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBiZWZvcmVDb21wbGV0ZSh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWZ0ZXJDYW5jZWwpIHtcclxuICAgICAgICAgICAgICBmb3JFYWNoKGFmdGVyQ2FuY2VsLCBmdW5jdGlvbihjYW5jZWxGbikge1xyXG4gICAgICAgICAgICAgICAgKGNhbmNlbEZuIHx8IG5vb3ApKHRydWUpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGFmdGVyQ29tcGxldGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAgICogQG5hbWUgJGFuaW1hdGVcclxuICAgICAgICogQGtpbmQgb2JqZWN0XHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBUaGUgYCRhbmltYXRlYCBzZXJ2aWNlIHByb3ZpZGVzIGFuaW1hdGlvbiBkZXRlY3Rpb24gc3VwcG9ydCB3aGlsZSBwZXJmb3JtaW5nIERPTSBvcGVyYXRpb25zIChlbnRlciwgbGVhdmUgYW5kIG1vdmUpIGFzIHdlbGwgYXMgZHVyaW5nIGFkZENsYXNzIGFuZCByZW1vdmVDbGFzcyBvcGVyYXRpb25zLlxyXG4gICAgICAgKiBXaGVuIGFueSBvZiB0aGVzZSBvcGVyYXRpb25zIGFyZSBydW4sIHRoZSAkYW5pbWF0ZSBzZXJ2aWNlXHJcbiAgICAgICAqIHdpbGwgZXhhbWluZSBhbnkgSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgKHdoaWNoIGFyZSBkZWZpbmVkIGJ5IHVzaW5nIHRoZSAkYW5pbWF0ZVByb3ZpZGVyIHByb3ZpZGVyIG9iamVjdClcclxuICAgICAgICogYXMgd2VsbCBhcyBhbnkgQ1NTLWRlZmluZWQgYW5pbWF0aW9ucyBhZ2FpbnN0IHRoZSBDU1MgY2xhc3NlcyBwcmVzZW50IG9uIHRoZSBlbGVtZW50IG9uY2UgdGhlIERPTSBvcGVyYXRpb24gaXMgcnVuLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgYCRhbmltYXRlYCBzZXJ2aWNlIGlzIHVzZWQgYmVoaW5kIHRoZSBzY2VuZXMgd2l0aCBwcmUtZXhpc3RpbmcgZGlyZWN0aXZlcyBhbmQgYW5pbWF0aW9uIHdpdGggdGhlc2UgZGlyZWN0aXZlc1xyXG4gICAgICAgKiB3aWxsIHdvcmsgb3V0IG9mIHRoZSBib3ggd2l0aG91dCBhbnkgZXh0cmEgY29uZmlndXJhdGlvbi5cclxuICAgICAgICpcclxuICAgICAgICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ0FuaW1hdGUgYG5nQW5pbWF0ZWB9IG1vZHVsZSB0byBiZSBpbnN0YWxsZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFBsZWFzZSB2aXNpdCB0aGUge0BsaW5rIG5nQW5pbWF0ZSBgbmdBbmltYXRlYH0gbW9kdWxlIG92ZXJ2aWV3IHBhZ2UgbGVhcm4gbW9yZSBhYm91dCBob3cgdG8gdXNlIGFuaW1hdGlvbnMgaW4geW91ciBhcHBsaWNhdGlvbi5cclxuICAgICAgICogIyMgQ2FsbGJhY2sgUHJvbWlzZXNcclxuICAgICAgICogV2l0aCBBbmd1bGFySlMgMS4zLCBlYWNoIG9mIHRoZSBhbmltYXRpb24gbWV0aG9kcywgb24gdGhlIGAkYW5pbWF0ZWAgc2VydmljZSwgcmV0dXJuIGEgcHJvbWlzZSB3aGVuIGNhbGxlZC4gVGhlXHJcbiAgICAgICAqIHByb21pc2UgaXRzZWxmIGlzIHRoZW4gcmVzb2x2ZWQgb25jZSB0aGUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQgaXRzZWxmLCBoYXMgYmVlbiBjYW5jZWxsZWQgb3IgaGFzIGJlZW5cclxuICAgICAgICogc2tpcHBlZCBkdWUgdG8gYW5pbWF0aW9ucyBiZWluZyBkaXNhYmxlZC4gKE5vdGUgdGhhdCBldmVuIGlmIHRoZSBhbmltYXRpb24gaXMgY2FuY2VsbGVkIGl0IHdpbGwgc3RpbGxcclxuICAgICAgICogY2FsbCB0aGUgcmVzb2x2ZSBmdW5jdGlvbiBvZiB0aGUgYW5pbWF0aW9uLilcclxuICAgICAgICpcclxuICAgICAgICogYGBganNcclxuICAgICAgICogJGFuaW1hdGUuZW50ZXIoZWxlbWVudCwgY29udGFpbmVyKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgKiAgIC8vLi4udGhpcyBpcyBjYWxsZWQgb25jZSB0aGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlLi4uXHJcbiAgICAgICAqIH0pO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICogQWxzbyBub3RlIHRoYXQsIGR1ZSB0byB0aGUgbmF0dXJlIG9mIHRoZSBjYWxsYmFjayBwcm9taXNlLCBpZiBhbnkgQW5ndWxhci1zcGVjaWZpYyBjb2RlIChsaWtlIGNoYW5naW5nIHRoZSBzY29wZSxcclxuICAgICAgICogbG9jYXRpb24gb2YgdGhlIHBhZ2UsIGV0Yy4uLikgaXMgZXhlY3V0ZWQgd2l0aGluIHRoZSBjYWxsYmFjayBwcm9taXNlIHRoZW4gYmUgc3VyZSB0byB3cmFwIHRoZSBjb2RlIHVzaW5nXHJcbiAgICAgICAqIGAkc2NvcGUuJGFwcGx5KC4uLilgO1xyXG4gICAgICAgKlxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgKiAkYW5pbWF0ZS5sZWF2ZShlbGVtZW50KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgKiAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAqICAgICAkbG9jYXRpb24ucGF0aCgnL25ldy1wYWdlJyk7XHJcbiAgICAgICAqICAgfSk7XHJcbiAgICAgICAqIH0pO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICogQW4gYW5pbWF0aW9uIGNhbiBhbHNvIGJlIGNhbmNlbGxlZCBieSBjYWxsaW5nIHRoZSBgJGFuaW1hdGUuY2FuY2VsKHByb21pc2UpYCBtZXRob2Qgd2l0aCB0aGUgcHJvdmlkZWRcclxuICAgICAgICogcHJvbWlzZSB0aGF0IHdhcyByZXR1cm5lZCB3aGVuIHRoZSBhbmltYXRpb24gd2FzIHN0YXJ0ZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAqIHZhciBwcm9taXNlID0gJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgJ3N1cGVyLWxvbmctYW5pbWF0aW9uJykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICogICAvL3RoaXMgd2lsbCBzdGlsbCBiZSBjYWxsZWQgZXZlbiBpZiBjYW5jZWxsZWRcclxuICAgICAgICogfSk7XHJcbiAgICAgICAqXHJcbiAgICAgICAqIGVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAqICAgLy90b29vIGxhenkgdG8gd2FpdCBmb3IgdGhlIGFuaW1hdGlvbiB0byBlbmRcclxuICAgICAgICogICAkYW5pbWF0ZS5jYW5jZWwocHJvbWlzZSk7XHJcbiAgICAgICAqIH0pO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICogKEtlZXAgaW4gbWluZCB0aGF0IHRoZSBwcm9taXNlIGNhbmNlbGxhdGlvbiBpcyB1bmlxdWUgdG8gYCRhbmltYXRlYCBzaW5jZSBwcm9taXNlcyBpblxyXG4gICAgICAgKiBnZW5lcmFsIGNhbm5vdCBiZSBjYW5jZWxsZWQuKVxyXG4gICAgICAgKlxyXG4gICAgICAgKi9cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjZW50ZXJcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQXBwZW5kcyB0aGUgZWxlbWVudCB0byB0aGUgcGFyZW50RWxlbWVudCBlbGVtZW50IHRoYXQgcmVzaWRlcyBpbiB0aGUgZG9jdW1lbnQgYW5kIHRoZW4gcnVucyB0aGUgZW50ZXIgYW5pbWF0aW9uLiBPbmNlXHJcbiAgICAgICAgICogdGhlIGFuaW1hdGlvbiBpcyBzdGFydGVkLCB0aGUgZm9sbG93aW5nIENTUyBjbGFzc2VzIHdpbGwgYmUgcHJlc2VudCBvbiB0aGUgZWxlbWVudCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb246XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBCZWxvdyBpcyBhIGJyZWFrZG93biBvZiBlYWNoIHN0ZXAgdGhhdCBvY2N1cnMgZHVyaW5nIGVudGVyIGFuaW1hdGlvbjpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHwgQW5pbWF0aW9uIFN0ZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBXaGF0IHRoZSBlbGVtZW50IGNsYXNzIGF0dHJpYnV0ZSBsb29rcyBsaWtlICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcclxuICAgICAgICAgKiB8IDEuICRhbmltYXRlLmVudGVyKC4uLikgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAyLiBlbGVtZW50IGlzIGluc2VydGVkIGludG8gdGhlIHBhcmVudEVsZW1lbnQgZWxlbWVudCBvciBiZXNpZGUgdGhlIGFmdGVyRWxlbWVudCBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMy4gJGFuaW1hdGUgd2FpdHMgZm9yIHRoZSBuZXh0IGRpZ2VzdCB0byBzdGFydCB0aGUgYW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlXCIgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDQuICRhbmltYXRlIHJ1bnMgdGhlIEphdmFTY3JpcHQtZGVmaW5lZCBhbmltYXRpb25zIGRldGVjdGVkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZVwiICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA1LiB0aGUgLm5nLWVudGVyIGNsYXNzIGlzIGFkZGVkIHRvIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctZW50ZXJcIiAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNi4gJGFuaW1hdGUgc2NhbnMgdGhlIGVsZW1lbnQgc3R5bGVzIHRvIGdldCB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uIGR1cmF0aW9uIGFuZCBkZWxheSAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWVudGVyXCIgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDcuICRhbmltYXRlIGJsb2NrcyBhbGwgQ1NTIHRyYW5zaXRpb25zIG9uIHRoZSBlbGVtZW50IHRvIGVuc3VyZSB0aGUgLm5nLWVudGVyIGNsYXNzIHN0eWxpbmcgaXMgYXBwbGllZCByaWdodCBhd2F5IHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1lbnRlclwiICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA4LiAkYW5pbWF0ZSB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctZW50ZXJcIiAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgOS4gJGFuaW1hdGUgcmVtb3ZlcyB0aGUgQ1NTIHRyYW5zaXRpb24gYmxvY2sgcGxhY2VkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWVudGVyXCIgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDEwLiB0aGUgLm5nLWVudGVyLWFjdGl2ZSBjbGFzcyBpcyBhZGRlZCAodGhpcyB0cmlnZ2VycyB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1lbnRlciBuZy1lbnRlci1hY3RpdmVcIiB8XHJcbiAgICAgICAgICogfCAxMS4gJGFuaW1hdGUgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctZW50ZXIgbmctZW50ZXItYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgMTIuIFRoZSBhbmltYXRpb24gZW5kcyBhbmQgYWxsIGdlbmVyYXRlZCBDU1MgY2xhc3NlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDEzLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgZW50ZXIgYW5pbWF0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBwYXJlbnRFbGVtZW50IHRoZSBwYXJlbnQgZWxlbWVudCBvZiB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgdGhlIGZvY3VzIG9mIHRoZSBlbnRlciBhbmltYXRpb25cclxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGFmdGVyRWxlbWVudCB0aGUgc2libGluZyBlbGVtZW50ICh3aGljaCBpcyB0aGUgcHJldmlvdXMgZWxlbWVudCkgb2YgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgZW50ZXIgYW5pbWF0aW9uXHJcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXHJcbiAgICAgICAgKi9cclxuICAgICAgICBlbnRlciA6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudEVsZW1lbnQsIGFmdGVyRWxlbWVudCkge1xyXG4gICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KTtcclxuICAgICAgICAgIHBhcmVudEVsZW1lbnQgPSBwcmVwYXJlRWxlbWVudChwYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgIGFmdGVyRWxlbWVudCA9IHByZXBhcmVFbGVtZW50KGFmdGVyRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgY2xhc3NCYXNlZEFuaW1hdGlvbnNCbG9ja2VkKGVsZW1lbnQsIHRydWUpO1xyXG4gICAgICAgICAgJGRlbGVnYXRlLmVudGVyKGVsZW1lbnQsIHBhcmVudEVsZW1lbnQsIGFmdGVyRWxlbWVudCk7XHJcbiAgICAgICAgICByZXR1cm4gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwZXJmb3JtQW5pbWF0aW9uKCdlbnRlcicsICduZy1lbnRlcicsIHN0cmlwQ29tbWVudHNGcm9tRWxlbWVudChlbGVtZW50KSwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50LCBub29wLCBkb25lKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNsZWF2ZVxyXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSdW5zIHRoZSBsZWF2ZSBhbmltYXRpb24gb3BlcmF0aW9uIGFuZCwgdXBvbiBjb21wbGV0aW9uLCByZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIERPTS4gT25jZVxyXG4gICAgICAgICAqIHRoZSBhbmltYXRpb24gaXMgc3RhcnRlZCwgdGhlIGZvbGxvd2luZyBDU1MgY2xhc3NlcyB3aWxsIGJlIGFkZGVkIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbjpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEJlbG93IGlzIGEgYnJlYWtkb3duIG9mIGVhY2ggc3RlcCB0aGF0IG9jY3VycyBkdXJpbmcgbGVhdmUgYW5pbWF0aW9uOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogfCBBbmltYXRpb24gU3RlcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFdoYXQgdGhlIGVsZW1lbnQgY2xhc3MgYXR0cmlidXRlIGxvb2tzIGxpa2UgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxyXG4gICAgICAgICAqIHwgMS4gJGFuaW1hdGUubGVhdmUoLi4uKSBpcyBjYWxsZWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDIuICRhbmltYXRlIHJ1bnMgdGhlIEphdmFTY3JpcHQtZGVmaW5lZCBhbmltYXRpb25zIGRldGVjdGVkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZVwiICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAzLiAkYW5pbWF0ZSB3YWl0cyBmb3IgdGhlIG5leHQgZGlnZXN0IHRvIHN0YXJ0IHRoZSBhbmltYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGVcIiAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNC4gdGhlIC5uZy1sZWF2ZSBjbGFzcyBpcyBhZGRlZCB0byB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWxlYXZlXCIgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDUuICRhbmltYXRlIHNjYW5zIHRoZSBlbGVtZW50IHN0eWxlcyB0byBnZXQgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbiBkdXJhdGlvbiBhbmQgZGVsYXkgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1sZWF2ZVwiICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA2LiAkYW5pbWF0ZSBibG9ja3MgYWxsIENTUyB0cmFuc2l0aW9ucyBvbiB0aGUgZWxlbWVudCB0byBlbnN1cmUgdGhlIC5uZy1sZWF2ZSBjbGFzcyBzdHlsaW5nIGlzIGFwcGxpZWQgcmlnaHQgYXdheSB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmXigJ0gICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDcuICRhbmltYXRlIHdhaXRzIGZvciBhIHNpbmdsZSBhbmltYXRpb24gZnJhbWUgKHRoaXMgcGVyZm9ybXMgYSByZWZsb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1sZWF2ZVwiICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA4LiAkYW5pbWF0ZSByZW1vdmVzIHRoZSBDU1MgdHJhbnNpdGlvbiBibG9jayBwbGFjZWQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmXigJ0gICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDkuIHRoZSAubmctbGVhdmUtYWN0aXZlIGNsYXNzIGlzIGFkZGVkICh0aGlzIHRyaWdnZXJzIHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1sZWF2ZSBuZy1sZWF2ZS1hY3RpdmVcIiB8XHJcbiAgICAgICAgICogfCAxMC4gJGFuaW1hdGUgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmUgbmctbGVhdmUtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgMTEuIFRoZSBhbmltYXRpb24gZW5kcyBhbmQgYWxsIGdlbmVyYXRlZCBDU1MgY2xhc3NlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDEyLiBUaGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMTMuIFRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHJlc29sdmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgbGVhdmUgYW5pbWF0aW9uXHJcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXHJcbiAgICAgICAgKi9cclxuICAgICAgICBsZWF2ZSA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgY2FuY2VsQ2hpbGRBbmltYXRpb25zKGVsZW1lbnQpO1xyXG4gICAgICAgICAgY2xhc3NCYXNlZEFuaW1hdGlvbnNCbG9ja2VkKGVsZW1lbnQsIHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5lbmFibGVkKGZhbHNlLCBlbGVtZW50KTtcclxuICAgICAgICAgIHJldHVybiBydW5BbmltYXRpb25Qb3N0RGlnZXN0KGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBlcmZvcm1BbmltYXRpb24oJ2xlYXZlJywgJ25nLWxlYXZlJywgc3RyaXBDb21tZW50c0Zyb21FbGVtZW50KGVsZW1lbnQpLCBudWxsLCBudWxsLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAkZGVsZWdhdGUubGVhdmUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0sIGRvbmUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lICRhbmltYXRlI21vdmVcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogRmlyZXMgdGhlIG1vdmUgRE9NIG9wZXJhdGlvbi4gSnVzdCBiZWZvcmUgdGhlIGFuaW1hdGlvbiBzdGFydHMsIHRoZSBhbmltYXRlIHNlcnZpY2Ugd2lsbCBlaXRoZXIgYXBwZW5kIGl0IGludG8gdGhlIHBhcmVudEVsZW1lbnQgY29udGFpbmVyIG9yXHJcbiAgICAgICAgICogYWRkIHRoZSBlbGVtZW50IGRpcmVjdGx5IGFmdGVyIHRoZSBhZnRlckVsZW1lbnQgZWxlbWVudCBpZiBwcmVzZW50LiBUaGVuIHRoZSBtb3ZlIGFuaW1hdGlvbiB3aWxsIGJlIHJ1bi4gT25jZVxyXG4gICAgICAgICAqIHRoZSBhbmltYXRpb24gaXMgc3RhcnRlZCwgdGhlIGZvbGxvd2luZyBDU1MgY2xhc3NlcyB3aWxsIGJlIGFkZGVkIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbjpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEJlbG93IGlzIGEgYnJlYWtkb3duIG9mIGVhY2ggc3RlcCB0aGF0IG9jY3VycyBkdXJpbmcgbW92ZSBhbmltYXRpb246XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB8IEFuaW1hdGlvbiBTdGVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBXaGF0IHRoZSBlbGVtZW50IGNsYXNzIGF0dHJpYnV0ZSBsb29rcyBsaWtlICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAgICAgICAgICogfCAxLiAkYW5pbWF0ZS5tb3ZlKC4uLikgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMi4gZWxlbWVudCBpcyBtb3ZlZCBpbnRvIHRoZSBwYXJlbnRFbGVtZW50IGVsZW1lbnQgb3IgYmVzaWRlIHRoZSBhZnRlckVsZW1lbnQgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDMuICRhbmltYXRlIHdhaXRzIGZvciB0aGUgbmV4dCBkaWdlc3QgdG8gc3RhcnQgdGhlIGFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlXCIgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA0LiAkYW5pbWF0ZSBydW5zIHRoZSBKYXZhU2NyaXB0LWRlZmluZWQgYW5pbWF0aW9ucyBkZXRlY3RlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZVwiICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNS4gdGhlIC5uZy1tb3ZlIGNsYXNzIGlzIGFkZGVkIHRvIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbW92ZVwiICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDYuICRhbmltYXRlIHNjYW5zIHRoZSBlbGVtZW50IHN0eWxlcyB0byBnZXQgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbiBkdXJhdGlvbiBhbmQgZGVsYXkgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLW1vdmVcIiAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA3LiAkYW5pbWF0ZSBibG9ja3MgYWxsIENTUyB0cmFuc2l0aW9ucyBvbiB0aGUgZWxlbWVudCB0byBlbnN1cmUgdGhlIC5uZy1tb3ZlIGNsYXNzIHN0eWxpbmcgaXMgYXBwbGllZCByaWdodCBhd2F5IHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3Zl4oCdICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDguICRhbmltYXRlIHdhaXRzIGZvciBhIHNpbmdsZSBhbmltYXRpb24gZnJhbWUgKHRoaXMgcGVyZm9ybXMgYSByZWZsb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLW1vdmVcIiAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA5LiAkYW5pbWF0ZSByZW1vdmVzIHRoZSBDU1MgdHJhbnNpdGlvbiBibG9jayBwbGFjZWQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3Zl4oCdICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDEwLiB0aGUgLm5nLW1vdmUtYWN0aXZlIGNsYXNzIGlzIGFkZGVkICh0aGlzIHRyaWdnZXJzIHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLW1vdmUgbmctbW92ZS1hY3RpdmVcIiB8XHJcbiAgICAgICAgICogfCAxMS4gJGFuaW1hdGUgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3ZlIG5nLW1vdmUtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgMTIuIFRoZSBhbmltYXRpb24gZW5kcyBhbmQgYWxsIGdlbmVyYXRlZCBDU1MgY2xhc3NlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDEzLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgbW92ZSBhbmltYXRpb25cclxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudEVsZW1lbnQgdGhlIHBhcmVudEVsZW1lbnQgZWxlbWVudCBvZiB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgdGhlIGZvY3VzIG9mIHRoZSBtb3ZlIGFuaW1hdGlvblxyXG4gICAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gYWZ0ZXJFbGVtZW50IHRoZSBzaWJsaW5nIGVsZW1lbnQgKHdoaWNoIGlzIHRoZSBwcmV2aW91cyBlbGVtZW50KSBvZiB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgdGhlIGZvY3VzIG9mIHRoZSBtb3ZlIGFuaW1hdGlvblxyXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgICovXHJcbiAgICAgICAgbW92ZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudEVsZW1lbnQsIGFmdGVyRWxlbWVudCkge1xyXG4gICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KTtcclxuICAgICAgICAgIHBhcmVudEVsZW1lbnQgPSBwcmVwYXJlRWxlbWVudChwYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgIGFmdGVyRWxlbWVudCA9IHByZXBhcmVFbGVtZW50KGFmdGVyRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgY2FuY2VsQ2hpbGRBbmltYXRpb25zKGVsZW1lbnQpO1xyXG4gICAgICAgICAgY2xhc3NCYXNlZEFuaW1hdGlvbnNCbG9ja2VkKGVsZW1lbnQsIHRydWUpO1xyXG4gICAgICAgICAgJGRlbGVnYXRlLm1vdmUoZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50KTtcclxuICAgICAgICAgIHJldHVybiBydW5BbmltYXRpb25Qb3N0RGlnZXN0KGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBlcmZvcm1BbmltYXRpb24oJ21vdmUnLCAnbmctbW92ZScsIHN0cmlwQ29tbWVudHNGcm9tRWxlbWVudChlbGVtZW50KSwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50LCBub29wLCBkb25lKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNhZGRDbGFzc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogVHJpZ2dlcnMgYSBjdXN0b20gYW5pbWF0aW9uIGV2ZW50IGJhc2VkIG9mZiB0aGUgY2xhc3NOYW1lIHZhcmlhYmxlIGFuZCB0aGVuIGF0dGFjaGVzIHRoZSBjbGFzc05hbWUgdmFsdWUgdG8gdGhlIGVsZW1lbnQgYXMgYSBDU1MgY2xhc3MuXHJcbiAgICAgICAgICogVW5saWtlIHRoZSBvdGhlciBhbmltYXRpb24gbWV0aG9kcywgdGhlIGFuaW1hdGUgc2VydmljZSB3aWxsIHN1ZmZpeCB0aGUgY2xhc3NOYW1lIHZhbHVlIHdpdGgge0B0eXBlIC1hZGR9IGluIG9yZGVyIHRvIHByb3ZpZGVcclxuICAgICAgICAgKiB0aGUgYW5pbWF0ZSBzZXJ2aWNlIHRoZSBzZXR1cCBhbmQgYWN0aXZlIENTUyBjbGFzc2VzIGluIG9yZGVyIHRvIHRyaWdnZXIgdGhlIGFuaW1hdGlvbiAodGhpcyB3aWxsIGJlIHNraXBwZWQgaWYgbm8gQ1NTIHRyYW5zaXRpb25zXHJcbiAgICAgICAgICogb3Iga2V5ZnJhbWVzIGFyZSBkZWZpbmVkIG9uIHRoZSAtYWRkLWFjdGl2ZSBvciBiYXNlIENTUyBjbGFzcykuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBCZWxvdyBpcyBhIGJyZWFrZG93biBvZiBlYWNoIHN0ZXAgdGhhdCBvY2N1cnMgZHVyaW5nIGFkZENsYXNzIGFuaW1hdGlvbjpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHwgQW5pbWF0aW9uIFN0ZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBXaGF0IHRoZSBlbGVtZW50IGNsYXNzIGF0dHJpYnV0ZSBsb29rcyBsaWtlICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAgICAgICAgICogfCAxLiAkYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LCAnc3VwZXInKSBpcyBjYWxsZWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAyLiAkYW5pbWF0ZSBydW5zIHRoZSBKYXZhU2NyaXB0LWRlZmluZWQgYW5pbWF0aW9ucyBkZXRlY3RlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGVcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAzLiB0aGUgLnN1cGVyLWFkZCBjbGFzcyBpcyBhZGRlZCB0byB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXItYWRkXCIgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA0LiAkYW5pbWF0ZSB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXItYWRkXCIgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA1LiB0aGUgLnN1cGVyIGFuZCAuc3VwZXItYWRkLWFjdGl2ZSBjbGFzc2VzIGFyZSBhZGRlZCAodGhpcyB0cmlnZ2VycyB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uKSB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXIgc3VwZXItYWRkIHN1cGVyLWFkZC1hY3RpdmVcIiB8XHJcbiAgICAgICAgICogfCA2LiAkYW5pbWF0ZSBzY2FucyB0aGUgZWxlbWVudCBzdHlsZXMgdG8gZ2V0IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24gZHVyYXRpb24gYW5kIGRlbGF5ICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXItYWRkXCIgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA3LiAkYW5pbWF0ZSB3YWl0cyBmb3IgdGhlIGFuaW1hdGlvbiB0byBjb21wbGV0ZSAodmlhIGV2ZW50cyBhbmQgdGltZW91dCkgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyIHN1cGVyLWFkZCBzdXBlci1hZGQtYWN0aXZlXCIgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA4LiBUaGUgYW5pbWF0aW9uIGVuZHMgYW5kIGFsbCBnZW5lcmF0ZWQgQ1NTIGNsYXNzZXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA5LiBUaGUgc3VwZXIgY2xhc3MgaXMga2VwdCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAxMC4gVGhlIHJldHVybmVkIHByb21pc2UgaXMgcmVzb2x2ZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIGFuaW1hdGVkXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSB0aGUgQ1NTIGNsYXNzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudCBhbmQgdGhlbiBhbmltYXRlZFxyXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgICovXHJcbiAgICAgICAgYWRkQ2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnNldENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSwgW10pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNyZW1vdmVDbGFzc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogVHJpZ2dlcnMgYSBjdXN0b20gYW5pbWF0aW9uIGV2ZW50IGJhc2VkIG9mZiB0aGUgY2xhc3NOYW1lIHZhcmlhYmxlIGFuZCB0aGVuIHJlbW92ZXMgdGhlIENTUyBjbGFzcyBwcm92aWRlZCBieSB0aGUgY2xhc3NOYW1lIHZhbHVlXHJcbiAgICAgICAgICogZnJvbSB0aGUgZWxlbWVudC4gVW5saWtlIHRoZSBvdGhlciBhbmltYXRpb24gbWV0aG9kcywgdGhlIGFuaW1hdGUgc2VydmljZSB3aWxsIHN1ZmZpeCB0aGUgY2xhc3NOYW1lIHZhbHVlIHdpdGgge0B0eXBlIC1yZW1vdmV9IGluXHJcbiAgICAgICAgICogb3JkZXIgdG8gcHJvdmlkZSB0aGUgYW5pbWF0ZSBzZXJ2aWNlIHRoZSBzZXR1cCBhbmQgYWN0aXZlIENTUyBjbGFzc2VzIGluIG9yZGVyIHRvIHRyaWdnZXIgdGhlIGFuaW1hdGlvbiAodGhpcyB3aWxsIGJlIHNraXBwZWQgaWZcclxuICAgICAgICAgKiBubyBDU1MgdHJhbnNpdGlvbnMgb3Iga2V5ZnJhbWVzIGFyZSBkZWZpbmVkIG9uIHRoZSAtcmVtb3ZlIG9yIGJhc2UgQ1NTIGNsYXNzZXMpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQmVsb3cgaXMgYSBicmVha2Rvd24gb2YgZWFjaCBzdGVwIHRoYXQgb2NjdXJzIGR1cmluZyByZW1vdmVDbGFzcyBhbmltYXRpb246XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB8IEFuaW1hdGlvbiBTdGVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBXaGF0IHRoZSBlbGVtZW50IGNsYXNzIGF0dHJpYnV0ZSBsb29rcyBsaWtlICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcclxuICAgICAgICAgKiB8IDEuICRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsICdzdXBlcicpIGlzIGNhbGxlZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlclwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMi4gJGFuaW1hdGUgcnVucyB0aGUgSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgZGV0ZWN0ZWQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyIG5nLWFuaW1hdGVcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAzLiB0aGUgLnN1cGVyLXJlbW92ZSBjbGFzcyBpcyBhZGRlZCB0byB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gc3VwZXIgbmctYW5pbWF0ZSBzdXBlci1yZW1vdmVcIiAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDQuICRhbmltYXRlIHdhaXRzIGZvciBhIHNpbmdsZSBhbmltYXRpb24gZnJhbWUgKHRoaXMgcGVyZm9ybXMgYSByZWZsb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlciBuZy1hbmltYXRlIHN1cGVyLXJlbW92ZVwiICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNS4gdGhlIC5zdXBlci1yZW1vdmUtYWN0aXZlIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCAuc3VwZXIgaXMgcmVtb3ZlZCAodGhpcyB0cmlnZ2VycyB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uKSB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXItcmVtb3ZlIHN1cGVyLXJlbW92ZS1hY3RpdmVcIiB8XHJcbiAgICAgICAgICogfCA2LiAkYW5pbWF0ZSBzY2FucyB0aGUgZWxlbWVudCBzdHlsZXMgdG8gZ2V0IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24gZHVyYXRpb24gYW5kIGRlbGF5ICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gc3VwZXIgbmctYW5pbWF0ZSBzdXBlci1yZW1vdmVcIiAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDcuICRhbmltYXRlIHdhaXRzIGZvciB0aGUgYW5pbWF0aW9uIHRvIGNvbXBsZXRlICh2aWEgZXZlbnRzIGFuZCB0aW1lb3V0KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIHN1cGVyLXJlbW92ZSBzdXBlci1yZW1vdmUtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgOC4gVGhlIGFuaW1hdGlvbiBlbmRzIGFuZCBhbGwgZ2VuZXJhdGVkIENTUyBjbGFzc2VzIGFyZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA5LiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSBhbmltYXRlZFxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgdGhlIENTUyBjbGFzcyB0aGF0IHdpbGwgYmUgYW5pbWF0ZWQgYW5kIHRoZW4gcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXHJcbiAgICAgICAgKi9cclxuICAgICAgICByZW1vdmVDbGFzcyA6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q2xhc3MoZWxlbWVudCwgW10sIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjc2V0Q2xhc3NcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRzIGFuZC9vciByZW1vdmVzIHRoZSBnaXZlbiBDU1MgY2xhc3NlcyB0byBhbmQgZnJvbSB0aGUgZWxlbWVudC5cclxuICAgICAgICAgKiBPbmNlIGNvbXBsZXRlLCB0aGUgZG9uZSgpIGNhbGxiYWNrIHdpbGwgYmUgZmlyZWQgKGlmIHByb3ZpZGVkKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHwgQW5pbWF0aW9uIFN0ZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAgICAgICAgICogfCAxLiAkYW5pbWF0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LCDigJhvbuKAmSwg4oCYb2Zm4oCZKSBpcyBjYWxsZWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyIG9mZuKAnSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAyLiAkYW5pbWF0ZSBydW5zIHRoZSBKYXZhU2NyaXB0LWRlZmluZWQgYW5pbWF0aW9ucyBkZXRlY3RlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlciBuZy1hbmltYXRlIG9mZuKAnSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMy4gdGhlIC5vbi1hZGQgYW5kIC5vZmYtcmVtb3ZlIGNsYXNzZXMgYXJlIGFkZGVkIHRvIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBvbi1hZGQgb2ZmLXJlbW92ZSBvZmbigJ0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDQuICRhbmltYXRlIHdhaXRzIGZvciBhIHNpbmdsZSBhbmltYXRpb24gZnJhbWUgKHRoaXMgcGVyZm9ybXMgYSByZWZsb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgb24tYWRkIG9mZi1yZW1vdmUgb2Zm4oCdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA1LiB0aGUgLm9uLCAub24tYWRkLWFjdGl2ZSBhbmQgLm9mZi1yZW1vdmUtYWN0aXZlIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCAub2ZmIGlzIHJlbW92ZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG9uIG9uLWFkZCBvbi1hZGQtYWN0aXZlIG9mZi1yZW1vdmUgb2ZmLXJlbW92ZS1hY3RpdmXigJ0gfFxyXG4gICAgICAgICAqIHwgNi4gJGFuaW1hdGUgc2NhbnMgdGhlIGVsZW1lbnQgc3R5bGVzIHRvIGdldCB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uIGR1cmF0aW9uIGFuZCBkZWxheSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBvbiBvbi1hZGQgb24tYWRkLWFjdGl2ZSBvZmYtcmVtb3ZlIG9mZi1yZW1vdmUtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgNy4gJGFuaW1hdGUgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBvbiBvbi1hZGQgb24tYWRkLWFjdGl2ZSBvZmYtcmVtb3ZlIG9mZi1yZW1vdmUtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgOC4gVGhlIGFuaW1hdGlvbiBlbmRzIGFuZCBhbGwgZ2VuZXJhdGVkIENTUyBjbGFzc2VzIGFyZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgOS4gVGhlIHJldHVybmVkIHByb21pc2UgaXMgcmVzb2x2ZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgaGF2ZSBpdHMgQ1NTIGNsYXNzZXMgY2hhbmdlZFxyXG4gICAgICAgICAqICAgcmVtb3ZlZCBmcm9tIGl0XHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGFkZCB0aGUgQ1NTIGNsYXNzZXMgd2hpY2ggd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudFxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZW1vdmUgdGhlIENTUyBjbGFzcyB3aGljaCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudFxyXG4gICAgICAgICAqICAgQ1NTIGNsYXNzZXMgaGF2ZSBiZWVuIHNldCBvbiB0aGUgZWxlbWVudFxyXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldENsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgYWRkLCByZW1vdmUpIHtcclxuICAgICAgICAgIHZhciBTVE9SQUdFX0tFWSA9ICckJGFuaW1hdGVDbGFzc2VzJztcclxuICAgICAgICAgIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICAgICAgICBlbGVtZW50ID0gc3RyaXBDb21tZW50c0Zyb21FbGVtZW50KGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgIGlmIChjbGFzc0Jhc2VkQW5pbWF0aW9uc0Jsb2NrZWQoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRkZWxlZ2F0ZS5zZXRDbGFzcyhlbGVtZW50LCBhZGQsIHJlbW92ZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYWRkID0gaXNBcnJheShhZGQpID8gYWRkIDogYWRkLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICByZW1vdmUgPSBpc0FycmF5KHJlbW92ZSkgPyByZW1vdmUgOiByZW1vdmUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICAgICAgICB2YXIgY2FjaGUgPSBlbGVtZW50LmRhdGEoU1RPUkFHRV9LRVkpO1xyXG4gICAgICAgICAgaWYgKGNhY2hlKSB7XHJcbiAgICAgICAgICAgIGNhY2hlLmFkZCA9IGNhY2hlLmFkZC5jb25jYXQoYWRkKTtcclxuICAgICAgICAgICAgY2FjaGUucmVtb3ZlID0gY2FjaGUucmVtb3ZlLmNvbmNhdChyZW1vdmUpO1xyXG5cclxuICAgICAgICAgICAgLy90aGUgZGlnZXN0IGN5Y2xlIHdpbGwgY29tYmluZSBhbGwgdGhlIGFuaW1hdGlvbnMgaW50byBvbmUgZnVuY3Rpb25cclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnByb21pc2U7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbGVtZW50LmRhdGEoU1RPUkFHRV9LRVksIGNhY2hlID0ge1xyXG4gICAgICAgICAgICAgIGFkZCA6IGFkZCxcclxuICAgICAgICAgICAgICByZW1vdmUgOiByZW1vdmVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGNhY2hlLnByb21pc2UgPSBydW5BbmltYXRpb25Qb3N0RGlnZXN0KGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgICAgICAgdmFyIGNhY2hlID0gZWxlbWVudC5kYXRhKFNUT1JBR0VfS0VZKTtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVEYXRhKFNUT1JBR0VfS0VZKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKSB8fCB7fTtcclxuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSByZXNvbHZlRWxlbWVudENsYXNzZXMoZWxlbWVudCwgY2FjaGUsIHN0YXRlLmFjdGl2ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiAhY2xhc3Nlc1xyXG4gICAgICAgICAgICAgID8gZG9uZSgpXHJcbiAgICAgICAgICAgICAgOiBwZXJmb3JtQW5pbWF0aW9uKCdzZXRDbGFzcycsIGNsYXNzZXMsIGVsZW1lbnQsIG51bGwsIG51bGwsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAkZGVsZWdhdGUuc2V0Q2xhc3MoZWxlbWVudCwgY2xhc3Nlc1swXSwgY2xhc3Nlc1sxXSk7XHJcbiAgICAgICAgICAgICAgICB9LCBkb25lKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNjYW5jZWxcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtQcm9taXNlfSBhbmltYXRpb25Qcm9taXNlIFRoZSBhbmltYXRpb24gcHJvbWlzZSB0aGF0IGlzIHJldHVybmVkIHdoZW4gYW4gYW5pbWF0aW9uIGlzIHN0YXJ0ZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDYW5jZWxzIHRoZSBwcm92aWRlZCBhbmltYXRpb24uXHJcbiAgICAgICAgKi9cclxuICAgICAgICBjYW5jZWwgOiBmdW5jdGlvbihwcm9taXNlKSB7XHJcbiAgICAgICAgICBwcm9taXNlLiQkY2FuY2VsRm4oKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjZW5hYmxlZFxyXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiBwcm92aWRlZCB0aGVuIHNldCB0aGUgYW5pbWF0aW9uIG9uIG9yIG9mZi5cclxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBlbGVtZW50IElmIHByb3ZpZGVkIHRoZW4gdGhlIGVsZW1lbnQgd2lsbCBiZSB1c2VkIHRvIHJlcHJlc2VudCB0aGUgZW5hYmxlL2Rpc2FibGUgb3BlcmF0aW9uXHJcbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ3VycmVudCBhbmltYXRpb24gc3RhdGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBHbG9iYWxseSBlbmFibGVzL2Rpc2FibGVzIGFuaW1hdGlvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAqL1xyXG4gICAgICAgIGVuYWJsZWQgOiBmdW5jdGlvbih2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY2xlYW51cChlbGVtZW50KTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge307XHJcbiAgICAgICAgICAgICAgICBkYXRhLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFLCBkYXRhKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgIHJvb3RBbmltYXRlU3RhdGUuZGlzYWJsZWQgPSAhdmFsdWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICB2YWx1ZSA9ICFyb290QW5pbWF0ZVN0YXRlLmRpc2FibGVkO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiAhIXZhbHVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvKlxyXG4gICAgICAgIGFsbCBhbmltYXRpb25zIGNhbGwgdGhpcyBzaGFyZWQgYW5pbWF0aW9uIHRyaWdnZXJpbmcgZnVuY3Rpb24gaW50ZXJuYWxseS5cclxuICAgICAgICBUaGUgYW5pbWF0aW9uRXZlbnQgdmFyaWFibGUgcmVmZXJzIHRvIHRoZSBKYXZhU2NyaXB0IGFuaW1hdGlvbiBldmVudCB0aGF0IHdpbGwgYmUgdHJpZ2dlcmVkXHJcbiAgICAgICAgYW5kIHRoZSBjbGFzc05hbWUgdmFsdWUgaXMgdGhlIG5hbWUgb2YgdGhlIGFuaW1hdGlvbiB0aGF0IHdpbGwgYmUgYXBwbGllZCB3aXRoaW4gdGhlXHJcbiAgICAgICAgQ1NTIGNvZGUuIEVsZW1lbnQsIHBhcmVudEVsZW1lbnQgYW5kIGFmdGVyRWxlbWVudCBhcmUgcHJvdmlkZWQgRE9NIGVsZW1lbnRzIGZvciB0aGUgYW5pbWF0aW9uXHJcbiAgICAgICAgYW5kIHRoZSBvbkNvbXBsZXRlIGNhbGxiYWNrIHdpbGwgYmUgZmlyZWQgb25jZSB0aGUgYW5pbWF0aW9uIGlzIGZ1bGx5IGNvbXBsZXRlLlxyXG4gICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiBwZXJmb3JtQW5pbWF0aW9uKGFuaW1hdGlvbkV2ZW50LCBjbGFzc05hbWUsIGVsZW1lbnQsIHBhcmVudEVsZW1lbnQsIGFmdGVyRWxlbWVudCwgZG9tT3BlcmF0aW9uLCBkb25lQ2FsbGJhY2spIHtcclxuXHJcbiAgICAgICAgdmFyIG5vb3BDYW5jZWwgPSBub29wO1xyXG4gICAgICAgIHZhciBydW5uZXIgPSBhbmltYXRpb25SdW5uZXIoZWxlbWVudCwgYW5pbWF0aW9uRXZlbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgaWYgKCFydW5uZXIpIHtcclxuICAgICAgICAgIGZpcmVET01PcGVyYXRpb24oKTtcclxuICAgICAgICAgIGZpcmVCZWZvcmVDYWxsYmFja0FzeW5jKCk7XHJcbiAgICAgICAgICBmaXJlQWZ0ZXJDYWxsYmFja0FzeW5jKCk7XHJcbiAgICAgICAgICBjbG9zZUFuaW1hdGlvbigpO1xyXG4gICAgICAgICAgcmV0dXJuIG5vb3BDYW5jZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhbmltYXRpb25FdmVudCA9IHJ1bm5lci5ldmVudDtcclxuICAgICAgICBjbGFzc05hbWUgPSBydW5uZXIuY2xhc3NOYW1lO1xyXG4gICAgICAgIHZhciBlbGVtZW50RXZlbnRzID0gYW5ndWxhci5lbGVtZW50Ll9kYXRhKHJ1bm5lci5ub2RlKTtcclxuICAgICAgICBlbGVtZW50RXZlbnRzID0gZWxlbWVudEV2ZW50cyAmJiBlbGVtZW50RXZlbnRzLmV2ZW50cztcclxuXHJcbiAgICAgICAgaWYgKCFwYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gYWZ0ZXJFbGVtZW50ID8gYWZ0ZXJFbGVtZW50LnBhcmVudCgpIDogZWxlbWVudC5wYXJlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vc2tpcCB0aGUgYW5pbWF0aW9uIGlmIGFuaW1hdGlvbnMgYXJlIGRpc2FibGVkLCBhIHBhcmVudCBpcyBhbHJlYWR5IGJlaW5nIGFuaW1hdGVkLFxyXG4gICAgICAgIC8vdGhlIGVsZW1lbnQgaXMgbm90IGN1cnJlbnRseSBhdHRhY2hlZCB0byB0aGUgZG9jdW1lbnQgYm9keSBvciB0aGVuIGNvbXBsZXRlbHkgY2xvc2VcclxuICAgICAgICAvL3RoZSBhbmltYXRpb24gaWYgYW55IG1hdGNoaW5nIGFuaW1hdGlvbnMgYXJlIG5vdCBmb3VuZCBhdCBhbGwuXHJcbiAgICAgICAgLy9OT1RFOiBJRTggKyBJRTkgc2hvdWxkIGNsb3NlIHByb3Blcmx5IChydW4gY2xvc2VBbmltYXRpb24oKSkgaW4gY2FzZSBhbiBhbmltYXRpb24gd2FzIGZvdW5kLlxyXG4gICAgICAgIGlmIChhbmltYXRpb25zRGlzYWJsZWQoZWxlbWVudCwgcGFyZW50RWxlbWVudCkpIHtcclxuICAgICAgICAgIGZpcmVET01PcGVyYXRpb24oKTtcclxuICAgICAgICAgIGZpcmVCZWZvcmVDYWxsYmFja0FzeW5jKCk7XHJcbiAgICAgICAgICBmaXJlQWZ0ZXJDYWxsYmFja0FzeW5jKCk7XHJcbiAgICAgICAgICBjbG9zZUFuaW1hdGlvbigpO1xyXG4gICAgICAgICAgcmV0dXJuIG5vb3BDYW5jZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmdBbmltYXRlU3RhdGUgID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpIHx8IHt9O1xyXG4gICAgICAgIHZhciBydW5uaW5nQW5pbWF0aW9ucyAgICAgPSBuZ0FuaW1hdGVTdGF0ZS5hY3RpdmUgfHwge307XHJcbiAgICAgICAgdmFyIHRvdGFsQWN0aXZlQW5pbWF0aW9ucyA9IG5nQW5pbWF0ZVN0YXRlLnRvdGFsQWN0aXZlIHx8IDA7XHJcbiAgICAgICAgdmFyIGxhc3RBbmltYXRpb24gICAgICAgICA9IG5nQW5pbWF0ZVN0YXRlLmxhc3Q7XHJcbiAgICAgICAgdmFyIHNraXBBbmltYXRpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHRvdGFsQWN0aXZlQW5pbWF0aW9ucyA+IDApIHtcclxuICAgICAgICAgIHZhciBhbmltYXRpb25zVG9DYW5jZWwgPSBbXTtcclxuICAgICAgICAgIGlmICghcnVubmVyLmlzQ2xhc3NCYXNlZCkge1xyXG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uRXZlbnQgPT0gJ2xlYXZlJyAmJiBydW5uaW5nQW5pbWF0aW9uc1snbmctbGVhdmUnXSkge1xyXG4gICAgICAgICAgICAgIHNraXBBbmltYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vY2FuY2VsIGFsbCBhbmltYXRpb25zIHdoZW4gYSBzdHJ1Y3R1cmFsIGFuaW1hdGlvbiB0YWtlcyBwbGFjZVxyXG4gICAgICAgICAgICAgIGZvcih2YXIga2xhc3MgaW4gcnVubmluZ0FuaW1hdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbnNUb0NhbmNlbC5wdXNoKHJ1bm5pbmdBbmltYXRpb25zW2tsYXNzXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIG5nQW5pbWF0ZVN0YXRlID0ge307XHJcbiAgICAgICAgICAgICAgY2xlYW51cChlbGVtZW50LCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmIChsYXN0QW5pbWF0aW9uLmV2ZW50ID09ICdzZXRDbGFzcycpIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uc1RvQ2FuY2VsLnB1c2gobGFzdEFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgIGNsZWFudXAoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKHJ1bm5pbmdBbmltYXRpb25zW2NsYXNzTmFtZV0pIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBydW5uaW5nQW5pbWF0aW9uc1tjbGFzc05hbWVdO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudC5ldmVudCA9PSBhbmltYXRpb25FdmVudCkge1xyXG4gICAgICAgICAgICAgIHNraXBBbmltYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGFuaW1hdGlvbnNUb0NhbmNlbC5wdXNoKGN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgIGNsZWFudXAoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChhbmltYXRpb25zVG9DYW5jZWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3JFYWNoKGFuaW1hdGlvbnNUb0NhbmNlbCwgZnVuY3Rpb24ob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgb3BlcmF0aW9uLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChydW5uZXIuaXNDbGFzc0Jhc2VkICYmICFydW5uZXIuaXNTZXRDbGFzc09wZXJhdGlvbiAmJiAhc2tpcEFuaW1hdGlvbikge1xyXG4gICAgICAgICAgc2tpcEFuaW1hdGlvbiA9IChhbmltYXRpb25FdmVudCA9PSAnYWRkQ2xhc3MnKSA9PSBlbGVtZW50Lmhhc0NsYXNzKGNsYXNzTmFtZSk7IC8vb3Bwb3NpdGUgb2YgWE9SXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2tpcEFuaW1hdGlvbikge1xyXG4gICAgICAgICAgZmlyZURPTU9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgZmlyZUJlZm9yZUNhbGxiYWNrQXN5bmMoKTtcclxuICAgICAgICAgIGZpcmVBZnRlckNhbGxiYWNrQXN5bmMoKTtcclxuICAgICAgICAgIGZpcmVEb25lQ2FsbGJhY2tBc3luYygpO1xyXG4gICAgICAgICAgcmV0dXJuIG5vb3BDYW5jZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBydW5uaW5nQW5pbWF0aW9ucyAgICAgPSBuZ0FuaW1hdGVTdGF0ZS5hY3RpdmUgfHwge307XHJcbiAgICAgICAgdG90YWxBY3RpdmVBbmltYXRpb25zID0gbmdBbmltYXRlU3RhdGUudG90YWxBY3RpdmUgfHwgMDtcclxuXHJcbiAgICAgICAgaWYgKGFuaW1hdGlvbkV2ZW50ID09ICdsZWF2ZScpIHtcclxuICAgICAgICAgIC8vdGhlcmUncyBubyBuZWVkIHRvIGV2ZXIgcmVtb3ZlIHRoZSBsaXN0ZW5lciBzaW5jZSB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgLy93aWxsIGJlIHJlbW92ZWQgKGRlc3Ryb3llZCkgYWZ0ZXIgdGhlIGxlYXZlIGFuaW1hdGlvbiBlbmRzIG9yXHJcbiAgICAgICAgICAvL2lzIGNhbmNlbGxlZCBtaWR3YXlcclxuICAgICAgICAgIGVsZW1lbnQub25lKCckZGVzdHJveScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKTtcclxuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGFjdGl2ZUxlYXZlQW5pbWF0aW9uID0gc3RhdGUuYWN0aXZlWyduZy1sZWF2ZSddO1xyXG4gICAgICAgICAgICAgIGlmIChhY3RpdmVMZWF2ZUFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGVhdmVBbmltYXRpb24uY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICBjbGVhbnVwKGVsZW1lbnQsICduZy1sZWF2ZScpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3RoZSBuZy1hbmltYXRlIGNsYXNzIGRvZXMgbm90aGluZywgYnV0IGl0J3MgaGVyZSB0byBhbGxvdyBmb3JcclxuICAgICAgICAvL3BhcmVudCBhbmltYXRpb25zIHRvIGZpbmQgYW5kIGNhbmNlbCBjaGlsZCBhbmltYXRpb25zIHdoZW4gbmVlZGVkXHJcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhOR19BTklNQVRFX0NMQVNTX05BTUUpO1xyXG5cclxuICAgICAgICB2YXIgbG9jYWxBbmltYXRpb25Db3VudCA9IGdsb2JhbEFuaW1hdGlvbkNvdW50ZXIrKztcclxuICAgICAgICB0b3RhbEFjdGl2ZUFuaW1hdGlvbnMrKztcclxuICAgICAgICBydW5uaW5nQW5pbWF0aW9uc1tjbGFzc05hbWVdID0gcnVubmVyO1xyXG5cclxuICAgICAgICBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSwge1xyXG4gICAgICAgICAgbGFzdCA6IHJ1bm5lcixcclxuICAgICAgICAgIGFjdGl2ZSA6IHJ1bm5pbmdBbmltYXRpb25zLFxyXG4gICAgICAgICAgaW5kZXggOiBsb2NhbEFuaW1hdGlvbkNvdW50LFxyXG4gICAgICAgICAgdG90YWxBY3RpdmUgOiB0b3RhbEFjdGl2ZUFuaW1hdGlvbnNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9maXJzdCB3ZSBydW4gdGhlIGJlZm9yZSBhbmltYXRpb25zIGFuZCB3aGVuIGFsbCBvZiB0aG9zZSBhcmUgY29tcGxldGVcclxuICAgICAgICAvL3RoZW4gd2UgcGVyZm9ybSB0aGUgRE9NIG9wZXJhdGlvbiBhbmQgcnVuIHRoZSBuZXh0IHNldCBvZiBhbmltYXRpb25zXHJcbiAgICAgICAgZmlyZUJlZm9yZUNhbGxiYWNrQXN5bmMoKTtcclxuICAgICAgICBydW5uZXIuYmVmb3JlKGZ1bmN0aW9uKGNhbmNlbGxlZCkge1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSk7XHJcbiAgICAgICAgICBjYW5jZWxsZWQgPSBjYW5jZWxsZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIWRhdGEgfHwgIWRhdGEuYWN0aXZlW2NsYXNzTmFtZV0gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJ1bm5lci5pc0NsYXNzQmFzZWQgJiYgZGF0YS5hY3RpdmVbY2xhc3NOYW1lXS5ldmVudCAhPSBhbmltYXRpb25FdmVudCk7XHJcblxyXG4gICAgICAgICAgZmlyZURPTU9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgaWYgKGNhbmNlbGxlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjbG9zZUFuaW1hdGlvbigpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZmlyZUFmdGVyQ2FsbGJhY2tBc3luYygpO1xyXG4gICAgICAgICAgICBydW5uZXIuYWZ0ZXIoY2xvc2VBbmltYXRpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcnVubmVyLmNhbmNlbDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmlyZURPTUNhbGxiYWNrKGFuaW1hdGlvblBoYXNlKSB7XHJcbiAgICAgICAgICB2YXIgZXZlbnROYW1lID0gJyRhbmltYXRlOicgKyBhbmltYXRpb25QaGFzZTtcclxuICAgICAgICAgIGlmIChlbGVtZW50RXZlbnRzICYmIGVsZW1lbnRFdmVudHNbZXZlbnROYW1lXSAmJiBlbGVtZW50RXZlbnRzW2V2ZW50TmFtZV0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkJGFzeW5jQ2FsbGJhY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudC50cmlnZ2VySGFuZGxlcihldmVudE5hbWUsIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50IDogYW5pbWF0aW9uRXZlbnQsXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBjbGFzc05hbWVcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaXJlQmVmb3JlQ2FsbGJhY2tBc3luYygpIHtcclxuICAgICAgICAgIGZpcmVET01DYWxsYmFjaygnYmVmb3JlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaXJlQWZ0ZXJDYWxsYmFja0FzeW5jKCkge1xyXG4gICAgICAgICAgZmlyZURPTUNhbGxiYWNrKCdhZnRlcicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmlyZURvbmVDYWxsYmFja0FzeW5jKCkge1xyXG4gICAgICAgICAgZmlyZURPTUNhbGxiYWNrKCdjbG9zZScpO1xyXG4gICAgICAgICAgZG9uZUNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2l0IGlzIGxlc3MgY29tcGxpY2F0ZWQgdG8gdXNlIGEgZmxhZyB0aGFuIG1hbmFnaW5nIGFuZCBjYW5jZWxpbmdcclxuICAgICAgICAvL3RpbWVvdXRzIGNvbnRhaW5pbmcgbXVsdGlwbGUgY2FsbGJhY2tzLlxyXG4gICAgICAgIGZ1bmN0aW9uIGZpcmVET01PcGVyYXRpb24oKSB7XHJcbiAgICAgICAgICBpZiAoIWZpcmVET01PcGVyYXRpb24uaGFzQmVlblJ1bikge1xyXG4gICAgICAgICAgICBmaXJlRE9NT3BlcmF0aW9uLmhhc0JlZW5SdW4gPSB0cnVlO1xyXG4gICAgICAgICAgICBkb21PcGVyYXRpb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlQW5pbWF0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCFjbG9zZUFuaW1hdGlvbi5oYXNCZWVuUnVuKSB7XHJcbiAgICAgICAgICAgIGNsb3NlQW5pbWF0aW9uLmhhc0JlZW5SdW4gPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAvKiBvbmx5IHN0cnVjdHVyYWwgYW5pbWF0aW9ucyB3YWl0IGZvciByZWZsb3cgYmVmb3JlIHJlbW92aW5nIGFuXHJcbiAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLCBidXQgY2xhc3MtYmFzZWQgYW5pbWF0aW9ucyBkb24ndC4gQW4gZXhhbXBsZSBvZiB0aGlzXHJcbiAgICAgICAgICAgICAgICAgZmFpbGluZyB3b3VsZCBiZSB3aGVuIGEgcGFyZW50IEhUTUwgdGFnIGhhcyBhIG5nLWNsYXNzIGF0dHJpYnV0ZVxyXG4gICAgICAgICAgICAgICAgIGNhdXNpbmcgQUxMIGRpcmVjdGl2ZXMgYmVsb3cgdG8gc2tpcCBhbmltYXRpb25zIGR1cmluZyB0aGUgZGlnZXN0ICovXHJcbiAgICAgICAgICAgICAgaWYgKHJ1bm5lciAmJiBydW5uZXIuaXNDbGFzc0Jhc2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhbnVwKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQkYXN5bmNDYWxsYmFjayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge307XHJcbiAgICAgICAgICAgICAgICAgIGlmIChsb2NhbEFuaW1hdGlvbkNvdW50ID09IGRhdGEuaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKGVsZW1lbnQsIGNsYXNzTmFtZSwgYW5pbWF0aW9uRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFLCBkYXRhKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmlyZURvbmVDYWxsYmFja0FzeW5jKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBjYW5jZWxDaGlsZEFuaW1hdGlvbnMoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBub2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGVsZW1lbnQpO1xyXG4gICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICB2YXIgbm9kZXMgPSBhbmd1bGFyLmlzRnVuY3Rpb24obm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSA/XHJcbiAgICAgICAgICAgIG5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShOR19BTklNQVRFX0NMQVNTX05BTUUpIDpcclxuICAgICAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIE5HX0FOSU1BVEVfQ0xBU1NfTkFNRSk7XHJcbiAgICAgICAgICBmb3JFYWNoKG5vZGVzLCBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgIGZvckVhY2goZGF0YS5hY3RpdmUsIGZ1bmN0aW9uKHJ1bm5lcikge1xyXG4gICAgICAgICAgICAgICAgcnVubmVyLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNsZWFudXAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgaWYgKGlzTWF0Y2hpbmdFbGVtZW50KGVsZW1lbnQsICRyb290RWxlbWVudCkpIHtcclxuICAgICAgICAgIGlmICghcm9vdEFuaW1hdGVTdGF0ZS5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICByb290QW5pbWF0ZVN0YXRlLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgcm9vdEFuaW1hdGVTdGF0ZS5zdHJ1Y3R1cmFsID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChjbGFzc05hbWUpIHtcclxuICAgICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpIHx8IHt9O1xyXG5cclxuICAgICAgICAgIHZhciByZW1vdmVBbmltYXRpb25zID0gY2xhc3NOYW1lID09PSB0cnVlO1xyXG4gICAgICAgICAgaWYgKCFyZW1vdmVBbmltYXRpb25zICYmIGRhdGEuYWN0aXZlICYmIGRhdGEuYWN0aXZlW2NsYXNzTmFtZV0pIHtcclxuICAgICAgICAgICAgZGF0YS50b3RhbEFjdGl2ZS0tO1xyXG4gICAgICAgICAgICBkZWxldGUgZGF0YS5hY3RpdmVbY2xhc3NOYW1lXTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAocmVtb3ZlQW5pbWF0aW9ucyB8fCAhZGF0YS50b3RhbEFjdGl2ZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKE5HX0FOSU1BVEVfQ0xBU1NfTkFNRSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRGF0YShOR19BTklNQVRFX1NUQVRFKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGFuaW1hdGlvbnNEaXNhYmxlZChlbGVtZW50LCBwYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKHJvb3RBbmltYXRlU3RhdGUuZGlzYWJsZWQpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzTWF0Y2hpbmdFbGVtZW50KGVsZW1lbnQsICRyb290RWxlbWVudCkpIHtcclxuICAgICAgICAgIHJldHVybiByb290QW5pbWF0ZVN0YXRlLnJ1bm5pbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYWxsb3dDaGlsZEFuaW1hdGlvbnMsIHBhcmVudFJ1bm5pbmdBbmltYXRpb24sIGhhc1BhcmVudDtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAvL3RoZSBlbGVtZW50IGRpZCBub3QgcmVhY2ggdGhlIHJvb3QgZWxlbWVudCB3aGljaCBtZWFucyB0aGF0IGl0XHJcbiAgICAgICAgICAvL2lzIG5vdCBhcGFydCBvZiB0aGUgRE9NLiBUaGVyZWZvcmUgdGhlcmUgaXMgbm8gcmVhc29uIHRvIGRvXHJcbiAgICAgICAgICAvL2FueSBhbmltYXRpb25zIG9uIGl0XHJcbiAgICAgICAgICBpZiAocGFyZW50RWxlbWVudC5sZW5ndGggPT09IDApIGJyZWFrO1xyXG5cclxuICAgICAgICAgIHZhciBpc1Jvb3QgPSBpc01hdGNoaW5nRWxlbWVudChwYXJlbnRFbGVtZW50LCAkcm9vdEVsZW1lbnQpO1xyXG4gICAgICAgICAgdmFyIHN0YXRlID0gaXNSb290ID8gcm9vdEFuaW1hdGVTdGF0ZSA6IChwYXJlbnRFbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge30pO1xyXG4gICAgICAgICAgaWYgKHN0YXRlLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vbm8gbWF0dGVyIHdoYXQsIGZvciBhbiBhbmltYXRpb24gdG8gd29yayBpdCBtdXN0IHJlYWNoIHRoZSByb290IGVsZW1lbnRcclxuICAgICAgICAgIC8vdGhpcyBpbXBsaWVzIHRoYXQgdGhlIGVsZW1lbnQgaXMgYXR0YWNoZWQgdG8gdGhlIERPTSB3aGVuIHRoZSBhbmltYXRpb24gaXMgcnVuXHJcbiAgICAgICAgICBpZiAoaXNSb290KSB7XHJcbiAgICAgICAgICAgIGhhc1BhcmVudCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy9vbmNlIGEgZmxhZyBpcyBmb3VuZCB0aGF0IGlzIHN0cmljdGx5IGZhbHNlIHRoZW4gZXZlcnl0aGluZyBiZWZvcmVcclxuICAgICAgICAgIC8vaXQgd2lsbCBiZSBkaXNjYXJkZWQgYW5kIGFsbCBjaGlsZCBhbmltYXRpb25zIHdpbGwgYmUgcmVzdHJpY3RlZFxyXG4gICAgICAgICAgaWYgKGFsbG93Q2hpbGRBbmltYXRpb25zICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB2YXIgYW5pbWF0ZUNoaWxkcmVuRmxhZyA9IHBhcmVudEVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NISUxEUkVOKTtcclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGFuaW1hdGVDaGlsZHJlbkZsYWcpKSB7XHJcbiAgICAgICAgICAgICAgYWxsb3dDaGlsZEFuaW1hdGlvbnMgPSBhbmltYXRlQ2hpbGRyZW5GbGFnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcGFyZW50UnVubmluZ0FuaW1hdGlvbiA9IHBhcmVudFJ1bm5pbmdBbmltYXRpb24gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5ydW5uaW5nIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLmxhc3QgJiYgIXN0YXRlLmxhc3QuaXNDbGFzc0Jhc2VkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUocGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnQucGFyZW50KCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gIWhhc1BhcmVudCB8fCAoIWFsbG93Q2hpbGRBbmltYXRpb25zICYmIHBhcmVudFJ1bm5pbmdBbmltYXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgJGFuaW1hdGVQcm92aWRlci5yZWdpc3RlcignJywgWyckd2luZG93JywgJyRzbmlmZmVyJywgJyR0aW1lb3V0JywgJyQkYW5pbWF0ZVJlZmxvdycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCR3aW5kb3csICAgJHNuaWZmZXIsICAgJHRpbWVvdXQsICAgJCRhbmltYXRlUmVmbG93KSB7XHJcbiAgICAgIC8vIERldGVjdCBwcm9wZXIgdHJhbnNpdGlvbmVuZC9hbmltYXRpb25lbmQgZXZlbnQgbmFtZXMuXHJcbiAgICAgIHZhciBDU1NfUFJFRklYID0gJycsIFRSQU5TSVRJT05fUFJPUCwgVFJBTlNJVElPTkVORF9FVkVOVCwgQU5JTUFUSU9OX1BST1AsIEFOSU1BVElPTkVORF9FVkVOVDtcclxuXHJcbiAgICAgIC8vIElmIHVucHJlZml4ZWQgZXZlbnRzIGFyZSBub3Qgc3VwcG9ydGVkIGJ1dCB3ZWJraXQtcHJlZml4ZWQgYXJlLCB1c2UgdGhlIGxhdHRlci5cclxuICAgICAgLy8gT3RoZXJ3aXNlLCBqdXN0IHVzZSBXM0MgbmFtZXMsIGJyb3dzZXJzIG5vdCBzdXBwb3J0aW5nIHRoZW0gYXQgYWxsIHdpbGwganVzdCBpZ25vcmUgdGhlbS5cclxuICAgICAgLy8gTm90ZTogQ2hyb21lIGltcGxlbWVudHMgYHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZGAgYW5kIGRvZXNuJ3QgaW1wbGVtZW50IGB3aW5kb3cub25hbmltYXRpb25lbmRgXHJcbiAgICAgIC8vIGJ1dCBhdCB0aGUgc2FtZSB0aW1lIGRpc3BhdGNoZXMgdGhlIGBhbmltYXRpb25lbmRgIGV2ZW50IGFuZCBub3QgYHdlYmtpdEFuaW1hdGlvbkVuZGAuXHJcbiAgICAgIC8vIFJlZ2lzdGVyIGJvdGggZXZlbnRzIGluIGNhc2UgYHdpbmRvdy5vbmFuaW1hdGlvbmVuZGAgaXMgbm90IHN1cHBvcnRlZCBiZWNhdXNlIG9mIHRoYXQsXHJcbiAgICAgIC8vIGRvIHRoZSBzYW1lIGZvciBgdHJhbnNpdGlvbmVuZGAgYXMgU2FmYXJpIGlzIGxpa2VseSB0byBleGhpYml0IHNpbWlsYXIgYmVoYXZpb3IuXHJcbiAgICAgIC8vIEFsc28sIHRoZSBvbmx5IG1vZGVybiBicm93c2VyIHRoYXQgdXNlcyB2ZW5kb3IgcHJlZml4ZXMgZm9yIHRyYW5zaXRpb25zL2tleWZyYW1lcyBpcyB3ZWJraXRcclxuICAgICAgLy8gdGhlcmVmb3JlIHRoZXJlIGlzIG5vIHJlYXNvbiB0byB0ZXN0IGFueW1vcmUgZm9yIG90aGVyIHZlbmRvciBwcmVmaXhlczogaHR0cDovL2Nhbml1c2UuY29tLyNzZWFyY2g9dHJhbnNpdGlvblxyXG4gICAgICBpZiAod2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIENTU19QUkVGSVggPSAnLXdlYmtpdC0nO1xyXG4gICAgICAgIFRSQU5TSVRJT05fUFJPUCA9ICdXZWJraXRUcmFuc2l0aW9uJztcclxuICAgICAgICBUUkFOU0lUSU9ORU5EX0VWRU5UID0gJ3dlYmtpdFRyYW5zaXRpb25FbmQgdHJhbnNpdGlvbmVuZCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgVFJBTlNJVElPTl9QUk9QID0gJ3RyYW5zaXRpb24nO1xyXG4gICAgICAgIFRSQU5TSVRJT05FTkRfRVZFTlQgPSAndHJhbnNpdGlvbmVuZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIENTU19QUkVGSVggPSAnLXdlYmtpdC0nO1xyXG4gICAgICAgIEFOSU1BVElPTl9QUk9QID0gJ1dlYmtpdEFuaW1hdGlvbic7XHJcbiAgICAgICAgQU5JTUFUSU9ORU5EX0VWRU5UID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIEFOSU1BVElPTl9QUk9QID0gJ2FuaW1hdGlvbic7XHJcbiAgICAgICAgQU5JTUFUSU9ORU5EX0VWRU5UID0gJ2FuaW1hdGlvbmVuZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBEVVJBVElPTl9LRVkgPSAnRHVyYXRpb24nO1xyXG4gICAgICB2YXIgUFJPUEVSVFlfS0VZID0gJ1Byb3BlcnR5JztcclxuICAgICAgdmFyIERFTEFZX0tFWSA9ICdEZWxheSc7XHJcbiAgICAgIHZhciBBTklNQVRJT05fSVRFUkFUSU9OX0NPVU5UX0tFWSA9ICdJdGVyYXRpb25Db3VudCc7XHJcbiAgICAgIHZhciBBTklNQVRJT05fUExBWVNUQVRFX0tFWSA9ICdQbGF5U3RhdGUnO1xyXG4gICAgICB2YXIgTkdfQU5JTUFURV9QQVJFTlRfS0VZID0gJyQkbmdBbmltYXRlS2V5JztcclxuICAgICAgdmFyIE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZID0gJyQkbmdBbmltYXRlQ1NTM0RhdGEnO1xyXG4gICAgICB2YXIgRUxBUFNFRF9USU1FX01BWF9ERUNJTUFMX1BMQUNFUyA9IDM7XHJcbiAgICAgIHZhciBDTE9TSU5HX1RJTUVfQlVGRkVSID0gMS41O1xyXG4gICAgICB2YXIgT05FX1NFQ09ORCA9IDEwMDA7XHJcblxyXG4gICAgICB2YXIgbG9va3VwQ2FjaGUgPSB7fTtcclxuICAgICAgdmFyIHBhcmVudENvdW50ZXIgPSAwO1xyXG4gICAgICB2YXIgYW5pbWF0aW9uUmVmbG93UXVldWUgPSBbXTtcclxuICAgICAgdmFyIGNhbmNlbEFuaW1hdGlvblJlZmxvdztcclxuICAgICAgZnVuY3Rpb24gYWZ0ZXJSZWZsb3coZWxlbWVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoY2FuY2VsQW5pbWF0aW9uUmVmbG93KSB7XHJcbiAgICAgICAgICBjYW5jZWxBbmltYXRpb25SZWZsb3coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW5pbWF0aW9uUmVmbG93UXVldWUucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uUmVmbG93ID0gJCRhbmltYXRlUmVmbG93KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZm9yRWFjaChhbmltYXRpb25SZWZsb3dRdWV1ZSwgZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICAgICAgZm4oKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGFuaW1hdGlvblJlZmxvd1F1ZXVlID0gW107XHJcbiAgICAgICAgICBjYW5jZWxBbmltYXRpb25SZWZsb3cgPSBudWxsO1xyXG4gICAgICAgICAgbG9va3VwQ2FjaGUgPSB7fTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGNsb3NpbmdUaW1lciA9IG51bGw7XHJcbiAgICAgIHZhciBjbG9zaW5nVGltZXN0YW1wID0gMDtcclxuICAgICAgdmFyIGFuaW1hdGlvbkVsZW1lbnRRdWV1ZSA9IFtdO1xyXG4gICAgICBmdW5jdGlvbiBhbmltYXRpb25DbG9zZUhhbmRsZXIoZWxlbWVudCwgdG90YWxUaW1lKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBleHRyYWN0RWxlbWVudE5vZGUoZWxlbWVudCk7XHJcbiAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChub2RlKTtcclxuXHJcbiAgICAgICAgLy90aGlzIGl0ZW0gd2lsbCBiZSBnYXJiYWdlIGNvbGxlY3RlZCBieSB0aGUgY2xvc2luZ1xyXG4gICAgICAgIC8vYW5pbWF0aW9uIHRpbWVvdXRcclxuICAgICAgICBhbmltYXRpb25FbGVtZW50UXVldWUucHVzaChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgLy9idXQgaXQgbWF5IG5vdCBuZWVkIHRvIGNhbmNlbCBvdXQgdGhlIGV4aXN0aW5nIHRpbWVvdXRcclxuICAgICAgICAvL2lmIHRoZSB0aW1lc3RhbXAgaXMgbGVzcyB0aGFuIHRoZSBwcmV2aW91cyBvbmVcclxuICAgICAgICB2YXIgZnV0dXJlVGltZXN0YW1wID0gRGF0ZS5ub3coKSArIHRvdGFsVGltZTtcclxuICAgICAgICBpZiAoZnV0dXJlVGltZXN0YW1wIDw9IGNsb3NpbmdUaW1lc3RhbXApIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICR0aW1lb3V0LmNhbmNlbChjbG9zaW5nVGltZXIpO1xyXG5cclxuICAgICAgICBjbG9zaW5nVGltZXN0YW1wID0gZnV0dXJlVGltZXN0YW1wO1xyXG4gICAgICAgIGNsb3NpbmdUaW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY2xvc2VBbGxBbmltYXRpb25zKGFuaW1hdGlvbkVsZW1lbnRRdWV1ZSk7XHJcbiAgICAgICAgICBhbmltYXRpb25FbGVtZW50UXVldWUgPSBbXTtcclxuICAgICAgICB9LCB0b3RhbFRpbWUsIGZhbHNlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY2xvc2VBbGxBbmltYXRpb25zKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgZm9yRWFjaChlbGVtZW50cywgZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgdmFyIGVsZW1lbnREYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKTtcclxuICAgICAgICAgIGlmIChlbGVtZW50RGF0YSkge1xyXG4gICAgICAgICAgICBmb3JFYWNoKGVsZW1lbnREYXRhLmNsb3NlQW5pbWF0aW9uRm5zLCBmdW5jdGlvbihmbikge1xyXG4gICAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRFbGVtZW50QW5pbWF0aW9uRGV0YWlscyhlbGVtZW50LCBjYWNoZUtleSkge1xyXG4gICAgICAgIHZhciBkYXRhID0gY2FjaGVLZXkgPyBsb29rdXBDYWNoZVtjYWNoZUtleV0gOiBudWxsO1xyXG4gICAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IDA7XHJcbiAgICAgICAgICB2YXIgdHJhbnNpdGlvbkRlbGF5ID0gMDtcclxuICAgICAgICAgIHZhciBhbmltYXRpb25EdXJhdGlvbiA9IDA7XHJcbiAgICAgICAgICB2YXIgYW5pbWF0aW9uRGVsYXkgPSAwO1xyXG5cclxuICAgICAgICAgIC8vd2Ugd2FudCBhbGwgdGhlIHN0eWxlcyBkZWZpbmVkIGJlZm9yZSBhbmQgYWZ0ZXJcclxuICAgICAgICAgIGZvckVhY2goZWxlbWVudCwgZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PSBFTEVNRU5UX05PREUpIHtcclxuICAgICAgICAgICAgICB2YXIgZWxlbWVudFN0eWxlcyA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvblN0eWxlID0gZWxlbWVudFN0eWxlc1tUUkFOU0lUSU9OX1BST1AgKyBEVVJBVElPTl9LRVldO1xyXG4gICAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9IE1hdGgubWF4KHBhcnNlTWF4VGltZSh0cmFuc2l0aW9uRHVyYXRpb25TdHlsZSksIHRyYW5zaXRpb25EdXJhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uRGVsYXlTdHlsZSA9IGVsZW1lbnRTdHlsZXNbVFJBTlNJVElPTl9QUk9QICsgREVMQVlfS0VZXTtcclxuICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXkgID0gTWF0aC5tYXgocGFyc2VNYXhUaW1lKHRyYW5zaXRpb25EZWxheVN0eWxlKSwgdHJhbnNpdGlvbkRlbGF5KTtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbkRlbGF5U3R5bGUgPSBlbGVtZW50U3R5bGVzW0FOSU1BVElPTl9QUk9QICsgREVMQVlfS0VZXTtcclxuICAgICAgICAgICAgICBhbmltYXRpb25EZWxheSAgID0gTWF0aC5tYXgocGFyc2VNYXhUaW1lKGVsZW1lbnRTdHlsZXNbQU5JTUFUSU9OX1BST1AgKyBERUxBWV9LRVldKSwgYW5pbWF0aW9uRGVsYXkpO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgYUR1cmF0aW9uICA9IHBhcnNlTWF4VGltZShlbGVtZW50U3R5bGVzW0FOSU1BVElPTl9QUk9QICsgRFVSQVRJT05fS0VZXSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChhRHVyYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhRHVyYXRpb24gKj0gcGFyc2VJbnQoZWxlbWVudFN0eWxlc1tBTklNQVRJT05fUFJPUCArIEFOSU1BVElPTl9JVEVSQVRJT05fQ09VTlRfS0VZXSwgMTApIHx8IDE7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uID0gTWF0aC5tYXgoYUR1cmF0aW9uLCBhbmltYXRpb25EdXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZGF0YSA9IHtcclxuICAgICAgICAgICAgdG90YWwgOiAwLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk6IHRyYW5zaXRpb25EZWxheSxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiB0cmFuc2l0aW9uRHVyYXRpb24sXHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkRlbGF5OiBhbmltYXRpb25EZWxheSxcclxuICAgICAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IGFuaW1hdGlvbkR1cmF0aW9uXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgaWYgKGNhY2hlS2V5KSB7XHJcbiAgICAgICAgICAgIGxvb2t1cENhY2hlW2NhY2hlS2V5XSA9IGRhdGE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBwYXJzZU1heFRpbWUoc3RyKSB7XHJcbiAgICAgICAgdmFyIG1heFZhbHVlID0gMDtcclxuICAgICAgICB2YXIgdmFsdWVzID0gYW5ndWxhci5pc1N0cmluZyhzdHIpID9cclxuICAgICAgICAgIHN0ci5zcGxpdCgvXFxzKixcXHMqLykgOlxyXG4gICAgICAgICAgW107XHJcbiAgICAgICAgZm9yRWFjaCh2YWx1ZXMsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBtYXhWYWx1ZSA9IE1hdGgubWF4KHBhcnNlRmxvYXQodmFsdWUpIHx8IDAsIG1heFZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbWF4VmFsdWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGdldENhY2hlS2V5KGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IGVsZW1lbnQucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBhcmVudElEID0gcGFyZW50RWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfUEFSRU5UX0tFWSk7XHJcbiAgICAgICAgaWYgKCFwYXJlbnRJRCkge1xyXG4gICAgICAgICAgcGFyZW50RWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfUEFSRU5UX0tFWSwgKytwYXJlbnRDb3VudGVyKTtcclxuICAgICAgICAgIHBhcmVudElEID0gcGFyZW50Q291bnRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcmVudElEICsgJy0nICsgZXh0cmFjdEVsZW1lbnROb2RlKGVsZW1lbnQpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYW5pbWF0ZVNldHVwKGFuaW1hdGlvbkV2ZW50LCBlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgICAgICB2YXIgc3RydWN0dXJhbCA9IFsnbmctZW50ZXInLCduZy1sZWF2ZScsJ25nLW1vdmUnXS5pbmRleE9mKGNsYXNzTmFtZSkgPj0gMDtcclxuXHJcbiAgICAgICAgdmFyIGNhY2hlS2V5ID0gZ2V0Q2FjaGVLZXkoZWxlbWVudCk7XHJcbiAgICAgICAgdmFyIGV2ZW50Q2FjaGVLZXkgPSBjYWNoZUtleSArICcgJyArIGNsYXNzTmFtZTtcclxuICAgICAgICB2YXIgaXRlbUluZGV4ID0gbG9va3VwQ2FjaGVbZXZlbnRDYWNoZUtleV0gPyArK2xvb2t1cENhY2hlW2V2ZW50Q2FjaGVLZXldLnRvdGFsIDogMDtcclxuXHJcbiAgICAgICAgdmFyIHN0YWdnZXIgPSB7fTtcclxuICAgICAgICBpZiAoaXRlbUluZGV4ID4gMCkge1xyXG4gICAgICAgICAgdmFyIHN0YWdnZXJDbGFzc05hbWUgPSBjbGFzc05hbWUgKyAnLXN0YWdnZXInO1xyXG4gICAgICAgICAgdmFyIHN0YWdnZXJDYWNoZUtleSA9IGNhY2hlS2V5ICsgJyAnICsgc3RhZ2dlckNsYXNzTmFtZTtcclxuICAgICAgICAgIHZhciBhcHBseUNsYXNzZXMgPSAhbG9va3VwQ2FjaGVbc3RhZ2dlckNhY2hlS2V5XTtcclxuXHJcbiAgICAgICAgICBhcHBseUNsYXNzZXMgJiYgZWxlbWVudC5hZGRDbGFzcyhzdGFnZ2VyQ2xhc3NOYW1lKTtcclxuXHJcbiAgICAgICAgICBzdGFnZ2VyID0gZ2V0RWxlbWVudEFuaW1hdGlvbkRldGFpbHMoZWxlbWVudCwgc3RhZ2dlckNhY2hlS2V5KTtcclxuXHJcbiAgICAgICAgICBhcHBseUNsYXNzZXMgJiYgZWxlbWVudC5yZW1vdmVDbGFzcyhzdGFnZ2VyQ2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcclxuXHJcbiAgICAgICAgdmFyIGZvcm1lckRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9DU1NfREFUQV9LRVkpIHx8IHt9O1xyXG4gICAgICAgIHZhciB0aW1pbmdzID0gZ2V0RWxlbWVudEFuaW1hdGlvbkRldGFpbHMoZWxlbWVudCwgZXZlbnRDYWNoZUtleSk7XHJcbiAgICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IHRpbWluZ3MudHJhbnNpdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgIHZhciBhbmltYXRpb25EdXJhdGlvbiA9IHRpbWluZ3MuYW5pbWF0aW9uRHVyYXRpb247XHJcblxyXG4gICAgICAgIGlmIChzdHJ1Y3R1cmFsICYmIHRyYW5zaXRpb25EdXJhdGlvbiA9PT0gMCAmJiBhbmltYXRpb25EdXJhdGlvbiA9PT0gMCkge1xyXG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGJsb2NrVHJhbnNpdGlvbiA9IHN0cnVjdHVyYWwgJiYgdHJhbnNpdGlvbkR1cmF0aW9uID4gMDtcclxuICAgICAgICB2YXIgYmxvY2tBbmltYXRpb24gPSBhbmltYXRpb25EdXJhdGlvbiA+IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFnZ2VyLmFuaW1hdGlvbkRlbGF5ID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWdnZXIuYW5pbWF0aW9uRHVyYXRpb24gPT09IDA7XHJcblxyXG4gICAgICAgIHZhciBjbG9zZUFuaW1hdGlvbkZucyA9IGZvcm1lckRhdGEuY2xvc2VBbmltYXRpb25GbnMgfHwgW107XHJcbiAgICAgICAgZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZLCB7XHJcbiAgICAgICAgICBzdGFnZ2VyIDogc3RhZ2dlcixcclxuICAgICAgICAgIGNhY2hlS2V5IDogZXZlbnRDYWNoZUtleSxcclxuICAgICAgICAgIHJ1bm5pbmcgOiBmb3JtZXJEYXRhLnJ1bm5pbmcgfHwgMCxcclxuICAgICAgICAgIGl0ZW1JbmRleCA6IGl0ZW1JbmRleCxcclxuICAgICAgICAgIGJsb2NrVHJhbnNpdGlvbiA6IGJsb2NrVHJhbnNpdGlvbixcclxuICAgICAgICAgIGNsb3NlQW5pbWF0aW9uRm5zIDogY2xvc2VBbmltYXRpb25GbnNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIG5vZGUgPSBleHRyYWN0RWxlbWVudE5vZGUoZWxlbWVudCk7XHJcblxyXG4gICAgICAgIGlmIChibG9ja1RyYW5zaXRpb24pIHtcclxuICAgICAgICAgIGJsb2NrVHJhbnNpdGlvbnMobm9kZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYmxvY2tBbmltYXRpb24pIHtcclxuICAgICAgICAgIGJsb2NrQW5pbWF0aW9ucyhub2RlLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBhbmltYXRlUnVuKGFuaW1hdGlvbkV2ZW50LCBlbGVtZW50LCBjbGFzc05hbWUsIGFjdGl2ZUFuaW1hdGlvbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBleHRyYWN0RWxlbWVudE5vZGUoZWxlbWVudCk7XHJcbiAgICAgICAgdmFyIGVsZW1lbnREYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKTtcclxuICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykuaW5kZXhPZihjbGFzc05hbWUpID09IC0xIHx8ICFlbGVtZW50RGF0YSkge1xyXG4gICAgICAgICAgYWN0aXZlQW5pbWF0aW9uQ29tcGxldGUoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbGVtZW50RGF0YS5ibG9ja1RyYW5zaXRpb24pIHtcclxuICAgICAgICAgIGJsb2NrVHJhbnNpdGlvbnMobm9kZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFjdGl2ZUNsYXNzTmFtZSA9ICcnO1xyXG4gICAgICAgIHZhciBwZW5kaW5nQ2xhc3NOYW1lID0gJyc7XHJcbiAgICAgICAgZm9yRWFjaChjbGFzc05hbWUuc3BsaXQoJyAnKSwgZnVuY3Rpb24oa2xhc3MsIGkpIHtcclxuICAgICAgICAgIHZhciBwcmVmaXggPSAoaSA+IDAgPyAnICcgOiAnJykgKyBrbGFzcztcclxuICAgICAgICAgIGFjdGl2ZUNsYXNzTmFtZSArPSBwcmVmaXggKyAnLWFjdGl2ZSc7XHJcbiAgICAgICAgICBwZW5kaW5nQ2xhc3NOYW1lICs9IHByZWZpeCArICctcGVuZGluZyc7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBzdHlsZSA9ICcnO1xyXG4gICAgICAgIHZhciBhcHBsaWVkU3R5bGVzID0gW107XHJcbiAgICAgICAgdmFyIGl0ZW1JbmRleCA9IGVsZW1lbnREYXRhLml0ZW1JbmRleDtcclxuICAgICAgICB2YXIgc3RhZ2dlciA9IGVsZW1lbnREYXRhLnN0YWdnZXI7XHJcbiAgICAgICAgdmFyIHN0YWdnZXJUaW1lID0gMDtcclxuICAgICAgICBpZiAoaXRlbUluZGV4ID4gMCkge1xyXG4gICAgICAgICAgdmFyIHRyYW5zaXRpb25TdGFnZ2VyRGVsYXkgPSAwO1xyXG4gICAgICAgICAgaWYgKHN0YWdnZXIudHJhbnNpdGlvbkRlbGF5ID4gMCAmJiBzdGFnZ2VyLnRyYW5zaXRpb25EdXJhdGlvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uU3RhZ2dlckRlbGF5ID0gc3RhZ2dlci50cmFuc2l0aW9uRGVsYXkgKiBpdGVtSW5kZXg7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIGFuaW1hdGlvblN0YWdnZXJEZWxheSA9IDA7XHJcbiAgICAgICAgICBpZiAoc3RhZ2dlci5hbmltYXRpb25EZWxheSA+IDAgJiYgc3RhZ2dlci5hbmltYXRpb25EdXJhdGlvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICBhbmltYXRpb25TdGFnZ2VyRGVsYXkgPSBzdGFnZ2VyLmFuaW1hdGlvbkRlbGF5ICogaXRlbUluZGV4O1xyXG4gICAgICAgICAgICBhcHBsaWVkU3R5bGVzLnB1c2goQ1NTX1BSRUZJWCArICdhbmltYXRpb24tcGxheS1zdGF0ZScpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHN0YWdnZXJUaW1lID0gTWF0aC5yb3VuZChNYXRoLm1heCh0cmFuc2l0aW9uU3RhZ2dlckRlbGF5LCBhbmltYXRpb25TdGFnZ2VyRGVsYXkpICogMTAwKSAvIDEwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc3RhZ2dlclRpbWUpIHtcclxuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoYWN0aXZlQ2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBldmVudENhY2hlS2V5ID0gZWxlbWVudERhdGEuY2FjaGVLZXkgKyAnICcgKyBhY3RpdmVDbGFzc05hbWU7XHJcbiAgICAgICAgdmFyIHRpbWluZ3MgPSBnZXRFbGVtZW50QW5pbWF0aW9uRGV0YWlscyhlbGVtZW50LCBldmVudENhY2hlS2V5KTtcclxuICAgICAgICB2YXIgbWF4RHVyYXRpb24gPSBNYXRoLm1heCh0aW1pbmdzLnRyYW5zaXRpb25EdXJhdGlvbiwgdGltaW5ncy5hbmltYXRpb25EdXJhdGlvbik7XHJcbiAgICAgICAgaWYgKG1heER1cmF0aW9uID09PSAwKSB7XHJcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzTmFtZSk7XHJcbiAgICAgICAgICBhbmltYXRlQ2xvc2UoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgIGFjdGl2ZUFuaW1hdGlvbkNvbXBsZXRlKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbWF4RGVsYXkgPSBNYXRoLm1heCh0aW1pbmdzLnRyYW5zaXRpb25EZWxheSwgdGltaW5ncy5hbmltYXRpb25EZWxheSk7XHJcbiAgICAgICAgdmFyIG1heERlbGF5VGltZSA9IG1heERlbGF5ICogT05FX1NFQ09ORDtcclxuXHJcbiAgICAgICAgaWYgKGFwcGxpZWRTdHlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgLy90aGUgZWxlbWVudCBiZWluZyBhbmltYXRlZCBtYXkgc29tZXRpbWVzIGNvbnRhaW4gY29tbWVudCBub2RlcyBpblxyXG4gICAgICAgICAgLy90aGUganFMaXRlIG9iamVjdCwgc28gd2UncmUgc2FmZSB0byB1c2UgYSBzaW5nbGUgdmFyaWFibGUgdG8gaG91c2VcclxuICAgICAgICAgIC8vdGhlIHN0eWxlcyBzaW5jZSB0aGVyZSBpcyBhbHdheXMgb25seSBvbmUgZWxlbWVudCBiZWluZyBhbmltYXRlZFxyXG4gICAgICAgICAgdmFyIG9sZFN0eWxlID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ3N0eWxlJykgfHwgJyc7XHJcbiAgICAgICAgICBpZiAob2xkU3R5bGUuY2hhckF0KG9sZFN0eWxlLmxlbmd0aC0xKSAhPT0gJzsnKSB7XHJcbiAgICAgICAgICAgIG9sZFN0eWxlICs9ICc7JztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIG9sZFN0eWxlICsgJyAnICsgc3R5bGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdmFyIGNzczNBbmltYXRpb25FdmVudHMgPSBBTklNQVRJT05FTkRfRVZFTlQgKyAnICcgKyBUUkFOU0lUSU9ORU5EX0VWRU5UO1xyXG4gICAgICAgIHZhciBhbmltYXRpb25UaW1lICAgICA9IChtYXhEZWxheSArIG1heER1cmF0aW9uKSAqIENMT1NJTkdfVElNRV9CVUZGRVI7XHJcbiAgICAgICAgdmFyIHRvdGFsVGltZSAgICAgICAgID0gKHN0YWdnZXJUaW1lICsgYW5pbWF0aW9uVGltZSkgKiBPTkVfU0VDT05EO1xyXG5cclxuICAgICAgICB2YXIgc3RhZ2dlclRpbWVvdXQ7XHJcbiAgICAgICAgaWYgKHN0YWdnZXJUaW1lID4gMCkge1xyXG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhwZW5kaW5nQ2xhc3NOYW1lKTtcclxuICAgICAgICAgIHN0YWdnZXJUaW1lb3V0ID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHN0YWdnZXJUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhhY3RpdmVDbGFzc05hbWUpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKHBlbmRpbmdDbGFzc05hbWUpO1xyXG4gICAgICAgICAgICBpZiAodGltaW5ncy5hbmltYXRpb25EdXJhdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICBibG9ja0FuaW1hdGlvbnMobm9kZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCBzdGFnZ2VyVGltZSAqIE9ORV9TRUNPTkQsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnQub24oY3NzM0FuaW1hdGlvbkV2ZW50cywgb25BbmltYXRpb25Qcm9ncmVzcyk7XHJcbiAgICAgICAgZWxlbWVudERhdGEuY2xvc2VBbmltYXRpb25GbnMucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIG9uRW5kKCk7XHJcbiAgICAgICAgICBhY3RpdmVBbmltYXRpb25Db21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlbGVtZW50RGF0YS5ydW5uaW5nKys7XHJcbiAgICAgICAgYW5pbWF0aW9uQ2xvc2VIYW5kbGVyKGVsZW1lbnQsIHRvdGFsVGltZSk7XHJcbiAgICAgICAgcmV0dXJuIG9uRW5kO1xyXG5cclxuICAgICAgICAvLyBUaGlzIHdpbGwgYXV0b21hdGljYWxseSBiZSBjYWxsZWQgYnkgJGFuaW1hdGUgc29cclxuICAgICAgICAvLyB0aGVyZSBpcyBubyBuZWVkIHRvIGF0dGFjaCB0aGlzIGludGVybmFsbHkgdG8gdGhlXHJcbiAgICAgICAgLy8gdGltZW91dCBkb25lIG1ldGhvZC5cclxuICAgICAgICBmdW5jdGlvbiBvbkVuZChjYW5jZWxsZWQpIHtcclxuICAgICAgICAgIGVsZW1lbnQub2ZmKGNzczNBbmltYXRpb25FdmVudHMsIG9uQW5pbWF0aW9uUHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhhY3RpdmVDbGFzc05hbWUpO1xyXG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhwZW5kaW5nQ2xhc3NOYW1lKTtcclxuICAgICAgICAgIGlmIChzdGFnZ2VyVGltZW91dCkge1xyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoc3RhZ2dlclRpbWVvdXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYW5pbWF0ZUNsb3NlKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICB2YXIgbm9kZSA9IGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KTtcclxuICAgICAgICAgIGZvciAodmFyIGkgaW4gYXBwbGllZFN0eWxlcykge1xyXG4gICAgICAgICAgICBub2RlLnN0eWxlLnJlbW92ZVByb3BlcnR5KGFwcGxpZWRTdHlsZXNbaV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25BbmltYXRpb25Qcm9ncmVzcyhldmVudCkge1xyXG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICB2YXIgZXYgPSBldmVudC5vcmlnaW5hbEV2ZW50IHx8IGV2ZW50O1xyXG4gICAgICAgICAgdmFyIHRpbWVTdGFtcCA9IGV2LiRtYW51YWxUaW1lU3RhbXAgfHwgZXYudGltZVN0YW1wIHx8IERhdGUubm93KCk7XHJcblxyXG4gICAgICAgICAgLyogRmlyZWZveCAob3IgcG9zc2libHkganVzdCBHZWNrbykgbGlrZXMgdG8gbm90IHJvdW5kIHZhbHVlcyB1cFxyXG4gICAgICAgICAgICogd2hlbiBhIG1zIG1lYXN1cmVtZW50IGlzIHVzZWQgZm9yIHRoZSBhbmltYXRpb24gKi9cclxuICAgICAgICAgIHZhciBlbGFwc2VkVGltZSA9IHBhcnNlRmxvYXQoZXYuZWxhcHNlZFRpbWUudG9GaXhlZChFTEFQU0VEX1RJTUVfTUFYX0RFQ0lNQUxfUExBQ0VTKSk7XHJcblxyXG4gICAgICAgICAgLyogJG1hbnVhbFRpbWVTdGFtcCBpcyBhIG1vY2tlZCB0aW1lU3RhbXAgdmFsdWUgd2hpY2ggaXMgc2V0XHJcbiAgICAgICAgICAgKiB3aXRoaW4gYnJvd3NlclRyaWdnZXIoKS4gVGhpcyBpcyBvbmx5IGhlcmUgc28gdGhhdCB0ZXN0cyBjYW5cclxuICAgICAgICAgICAqIG1vY2sgYW5pbWF0aW9ucyBwcm9wZXJseS4gUmVhbCBldmVudHMgZmFsbGJhY2sgdG8gZXZlbnQudGltZVN0YW1wLFxyXG4gICAgICAgICAgICogb3IsIGlmIHRoZXkgZG9uJ3QsIHRoZW4gYSB0aW1lU3RhbXAgaXMgYXV0b21hdGljYWxseSBjcmVhdGVkIGZvciB0aGVtLlxyXG4gICAgICAgICAgICogV2UncmUgY2hlY2tpbmcgdG8gc2VlIGlmIHRoZSB0aW1lU3RhbXAgc3VycGFzc2VzIHRoZSBleHBlY3RlZCBkZWxheSxcclxuICAgICAgICAgICAqIGJ1dCB3ZSdyZSB1c2luZyBlbGFwc2VkVGltZSBpbnN0ZWFkIG9mIHRoZSB0aW1lU3RhbXAgb24gdGhlIDJuZFxyXG4gICAgICAgICAgICogcHJlLWNvbmRpdGlvbiBzaW5jZSBhbmltYXRpb25zIHNvbWV0aW1lcyBjbG9zZSBvZmYgZWFybHkgKi9cclxuICAgICAgICAgIGlmIChNYXRoLm1heCh0aW1lU3RhbXAgLSBzdGFydFRpbWUsIDApID49IG1heERlbGF5VGltZSAmJiBlbGFwc2VkVGltZSA+PSBtYXhEdXJhdGlvbikge1xyXG4gICAgICAgICAgICBhY3RpdmVBbmltYXRpb25Db21wbGV0ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYmxvY2tUcmFuc2l0aW9ucyhub2RlLCBib29sKSB7XHJcbiAgICAgICAgbm9kZS5zdHlsZVtUUkFOU0lUSU9OX1BST1AgKyBQUk9QRVJUWV9LRVldID0gYm9vbCA/ICdub25lJyA6ICcnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBibG9ja0FuaW1hdGlvbnMobm9kZSwgYm9vbCkge1xyXG4gICAgICAgIG5vZGUuc3R5bGVbQU5JTUFUSU9OX1BST1AgKyBBTklNQVRJT05fUExBWVNUQVRFX0tFWV0gPSBib29sID8gJ3BhdXNlZCcgOiAnJztcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYW5pbWF0ZUJlZm9yZShhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBjYWxjdWxhdGlvbkRlY29yYXRvcikge1xyXG4gICAgICAgIGlmIChhbmltYXRlU2V0dXAoYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgY2FsY3VsYXRpb25EZWNvcmF0b3IpKSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbGxlZCAmJiBhbmltYXRlQ2xvc2UoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBhbmltYXRlQWZ0ZXIoYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgYWZ0ZXJBbmltYXRpb25Db21wbGV0ZSkge1xyXG4gICAgICAgIGlmIChlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9DU1NfREFUQV9LRVkpKSB7XHJcbiAgICAgICAgICByZXR1cm4gYW5pbWF0ZVJ1bihhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBhZnRlckFuaW1hdGlvbkNvbXBsZXRlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYW5pbWF0ZUNsb3NlKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICBhZnRlckFuaW1hdGlvbkNvbXBsZXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBhbmltYXRlKGFuaW1hdGlvbkV2ZW50LCBlbGVtZW50LCBjbGFzc05hbWUsIGFuaW1hdGlvbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgLy9JZiB0aGUgYW5pbWF0ZVNldHVwIGZ1bmN0aW9uIGRvZXNuJ3QgYm90aGVyIHJldHVybmluZyBhXHJcbiAgICAgICAgLy9jYW5jZWxsYXRpb24gZnVuY3Rpb24gdGhlbiBpdCBtZWFucyB0aGF0IHRoZXJlIGlzIG5vIGFuaW1hdGlvblxyXG4gICAgICAgIC8vdG8gcGVyZm9ybSBhdCBhbGxcclxuICAgICAgICB2YXIgcHJlUmVmbG93Q2FuY2VsbGF0aW9uID0gYW5pbWF0ZUJlZm9yZShhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICBpZiAoIXByZVJlZmxvd0NhbmNlbGxhdGlvbikge1xyXG4gICAgICAgICAgYW5pbWF0aW9uQ29tcGxldGUoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vVGhlcmUgYXJlIHR3byBjYW5jZWxsYXRpb24gZnVuY3Rpb25zOiBvbmUgaXMgYmVmb3JlIHRoZSBmaXJzdFxyXG4gICAgICAgIC8vcmVmbG93IGFuaW1hdGlvbiBhbmQgdGhlIHNlY29uZCBpcyBkdXJpbmcgdGhlIGFjdGl2ZSBzdGF0ZVxyXG4gICAgICAgIC8vYW5pbWF0aW9uLiBUaGUgZmlyc3QgZnVuY3Rpb24gd2lsbCB0YWtlIGNhcmUgb2YgcmVtb3ZpbmcgdGhlXHJcbiAgICAgICAgLy9kYXRhIGZyb20gdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBub3QgbWFrZSB0aGUgMm5kIGFuaW1hdGlvblxyXG4gICAgICAgIC8vaGFwcGVuIGluIHRoZSBmaXJzdCBwbGFjZVxyXG4gICAgICAgIHZhciBjYW5jZWwgPSBwcmVSZWZsb3dDYW5jZWxsYXRpb247XHJcbiAgICAgICAgYWZ0ZXJSZWZsb3coZWxlbWVudCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvL29uY2UgdGhlIHJlZmxvdyBpcyBjb21wbGV0ZSB0aGVuIHdlIHBvaW50IGNhbmNlbCB0b1xyXG4gICAgICAgICAgLy90aGUgbmV3IGNhbmNlbGxhdGlvbiBmdW5jdGlvbiB3aGljaCB3aWxsIHJlbW92ZSBhbGwgb2YgdGhlXHJcbiAgICAgICAgICAvL2FuaW1hdGlvbiBwcm9wZXJ0aWVzIGZyb20gdGhlIGFjdGl2ZSBhbmltYXRpb25cclxuICAgICAgICAgIGNhbmNlbCA9IGFuaW1hdGVBZnRlcihhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjYW5jZWxsZWQpIHtcclxuICAgICAgICAgIChjYW5jZWwgfHwgbm9vcCkoY2FuY2VsbGVkKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBhbmltYXRlQ2xvc2UoZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO1xyXG4gICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKTtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgaWYgKGRhdGEucnVubmluZykge1xyXG4gICAgICAgICAgICBkYXRhLnJ1bm5pbmctLTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghZGF0YS5ydW5uaW5nIHx8IGRhdGEucnVubmluZyA9PT0gMCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZURhdGEoTkdfQU5JTUFURV9DU1NfREFUQV9LRVkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBlbnRlciA6IGZ1bmN0aW9uKGVsZW1lbnQsIGFuaW1hdGlvbkNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGFuaW1hdGUoJ2VudGVyJywgZWxlbWVudCwgJ25nLWVudGVyJywgYW5pbWF0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBsZWF2ZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIGFuaW1hdGlvbkNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGFuaW1hdGUoJ2xlYXZlJywgZWxlbWVudCwgJ25nLWxlYXZlJywgYW5pbWF0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBtb3ZlIDogZnVuY3Rpb24oZWxlbWVudCwgYW5pbWF0aW9uQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICByZXR1cm4gYW5pbWF0ZSgnbW92ZScsIGVsZW1lbnQsICduZy1tb3ZlJywgYW5pbWF0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBiZWZvcmVTZXRDbGFzcyA6IGZ1bmN0aW9uKGVsZW1lbnQsIGFkZCwgcmVtb3ZlLCBhbmltYXRpb25Db21wbGV0ZWQpIHtcclxuICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBzdWZmaXhDbGFzc2VzKHJlbW92ZSwgJy1yZW1vdmUnKSArICcgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4Q2xhc3NlcyhhZGQsICctYWRkJyk7XHJcbiAgICAgICAgICB2YXIgY2FuY2VsbGF0aW9uTWV0aG9kID0gYW5pbWF0ZUJlZm9yZSgnc2V0Q2xhc3MnLCBlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgaWYgKGNhbmNlbGxhdGlvbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBhZnRlclJlZmxvdyhlbGVtZW50LCBhbmltYXRpb25Db21wbGV0ZWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FuY2VsbGF0aW9uTWV0aG9kO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYW5pbWF0aW9uQ29tcGxldGVkKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYmVmb3JlQWRkQ2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGFuaW1hdGlvbkNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgdmFyIGNhbmNlbGxhdGlvbk1ldGhvZCA9IGFuaW1hdGVCZWZvcmUoJ2FkZENsYXNzJywgZWxlbWVudCwgc3VmZml4Q2xhc3NlcyhjbGFzc05hbWUsICctYWRkJykpO1xyXG4gICAgICAgICAgaWYgKGNhbmNlbGxhdGlvbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBhZnRlclJlZmxvdyhlbGVtZW50LCBhbmltYXRpb25Db21wbGV0ZWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FuY2VsbGF0aW9uTWV0aG9kO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYW5pbWF0aW9uQ29tcGxldGVkKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYmVmb3JlUmVtb3ZlQ2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGFuaW1hdGlvbkNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgdmFyIGNhbmNlbGxhdGlvbk1ldGhvZCA9IGFuaW1hdGVCZWZvcmUoJ3JlbW92ZUNsYXNzJywgZWxlbWVudCwgc3VmZml4Q2xhc3NlcyhjbGFzc05hbWUsICctcmVtb3ZlJykpO1xyXG4gICAgICAgICAgaWYgKGNhbmNlbGxhdGlvbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBhZnRlclJlZmxvdyhlbGVtZW50LCBhbmltYXRpb25Db21wbGV0ZWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FuY2VsbGF0aW9uTWV0aG9kO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYW5pbWF0aW9uQ29tcGxldGVkKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc2V0Q2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBhZGQsIHJlbW92ZSwgYW5pbWF0aW9uQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICByZW1vdmUgPSBzdWZmaXhDbGFzc2VzKHJlbW92ZSwgJy1yZW1vdmUnKTtcclxuICAgICAgICAgIGFkZCA9IHN1ZmZpeENsYXNzZXMoYWRkLCAnLWFkZCcpO1xyXG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHJlbW92ZSArICcgJyArIGFkZDtcclxuICAgICAgICAgIHJldHVybiBhbmltYXRlQWZ0ZXIoJ3NldENsYXNzJywgZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZWQpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFkZENsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZWQpIHtcclxuICAgICAgICAgIHJldHVybiBhbmltYXRlQWZ0ZXIoJ2FkZENsYXNzJywgZWxlbWVudCwgc3VmZml4Q2xhc3NlcyhjbGFzc05hbWUsICctYWRkJyksIGFuaW1hdGlvbkNvbXBsZXRlZCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcmVtb3ZlQ2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGFuaW1hdGlvbkNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGFuaW1hdGVBZnRlcigncmVtb3ZlQ2xhc3MnLCBlbGVtZW50LCBzdWZmaXhDbGFzc2VzKGNsYXNzTmFtZSwgJy1yZW1vdmUnKSwgYW5pbWF0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBmdW5jdGlvbiBzdWZmaXhDbGFzc2VzKGNsYXNzZXMsIHN1ZmZpeCkge1xyXG4gICAgICAgIHZhciBjbGFzc05hbWUgPSAnJztcclxuICAgICAgICBjbGFzc2VzID0gaXNBcnJheShjbGFzc2VzKSA/IGNsYXNzZXMgOiBjbGFzc2VzLnNwbGl0KC9cXHMrLyk7XHJcbiAgICAgICAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbihrbGFzcywgaSkge1xyXG4gICAgICAgICAgaWYgKGtsYXNzICYmIGtsYXNzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lICs9IChpID4gMCA/ICcgJyA6ICcnKSArIGtsYXNzICsgc3VmZml4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjbGFzc05hbWU7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuICB9XSk7XHJcblxyXG5cclxufSkod2luZG93LCB3aW5kb3cuYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBhbmd1bGFyLXN0cmFwXHJcbiAqIEB2ZXJzaW9uIHYyLjEuMCAtIDIwMTQtMDktMDVcclxuICogQGxpbmsgaHR0cDovL21nY3JlYS5naXRodWIuaW8vYW5ndWxhci1zdHJhcFxyXG4gKiBAYXV0aG9yIE9saXZpZXIgTG91dmlnbmVzIChvbGl2aWVyQG1nLWNyZWEuY29tKVxyXG4gKiBAbGljZW5zZSBNSVQgTGljZW5zZSwgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcclxuICovXHJcbihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuJ3VzZSBzdHJpY3QnO1xyXG4vLyBTb3VyY2U6IG1vZHVsZS5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAnLCBbXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLm1vZGFsJyxcclxuICAnbWdjcmVhLm5nU3RyYXAuYXNpZGUnLFxyXG4gICdtZ2NyZWEubmdTdHJhcC5hbGVydCcsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLmJ1dHRvbicsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLnNlbGVjdCcsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLmRhdGVwaWNrZXInLFxyXG4gICdtZ2NyZWEubmdTdHJhcC50aW1lcGlja2VyJyxcclxuICAnbWdjcmVhLm5nU3RyYXAubmF2YmFyJyxcclxuICAnbWdjcmVhLm5nU3RyYXAudG9vbHRpcCcsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLnBvcG92ZXInLFxyXG4gICdtZ2NyZWEubmdTdHJhcC5kcm9wZG93bicsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLnR5cGVhaGVhZCcsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLnNjcm9sbHNweScsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLmFmZml4JyxcclxuICAnbWdjcmVhLm5nU3RyYXAudGFiJyxcclxuICAnbWdjcmVhLm5nU3RyYXAuY29sbGFwc2UnXHJcbl0pO1xyXG5cclxuLy8gU291cmNlOiBhZmZpeC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuYWZmaXgnLCBbJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMuZGltZW5zaW9ucycsICdtZ2NyZWEubmdTdHJhcC5oZWxwZXJzLmRlYm91bmNlJ10pXHJcblxyXG4gIC5wcm92aWRlcignJGFmZml4JywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgb2Zmc2V0VG9wOiAnYXV0bydcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHdpbmRvd1wiLCBcImRlYm91bmNlXCIsIFwiZGltZW5zaW9uc1wiLCBmdW5jdGlvbigkd2luZG93LCBkZWJvdW5jZSwgZGltZW5zaW9ucykge1xyXG5cclxuICAgICAgdmFyIGJvZHlFbCA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG4gICAgICB2YXIgd2luZG93RWwgPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdyk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBBZmZpeEZhY3RvcnkoZWxlbWVudCwgY29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciAkYWZmaXggPSB7fTtcclxuXHJcbiAgICAgICAgLy8gQ29tbW9uIHZhcnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBkZWZhdWx0cywgY29uZmlnKTtcclxuICAgICAgICB2YXIgdGFyZ2V0RWwgPSBvcHRpb25zLnRhcmdldDtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbCBwcml2YXRlIHZhcnNcclxuICAgICAgICB2YXIgcmVzZXQgPSAnYWZmaXggYWZmaXgtdG9wIGFmZml4LWJvdHRvbScsXHJcbiAgICAgICAgICAgIGluaXRpYWxBZmZpeFRvcCA9IDAsXHJcbiAgICAgICAgICAgIGluaXRpYWxPZmZzZXRUb3AgPSAwLFxyXG4gICAgICAgICAgICBvZmZzZXRUb3AgPSAwLFxyXG4gICAgICAgICAgICBvZmZzZXRCb3R0b20gPSAwLFxyXG4gICAgICAgICAgICBhZmZpeGVkID0gbnVsbCxcclxuICAgICAgICAgICAgdW5waW4gPSBudWxsO1xyXG5cclxuICAgICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnQoKTtcclxuICAgICAgICAvLyBPcHRpb25zOiBjdXN0b20gcGFyZW50XHJcbiAgICAgICAgaWYgKG9wdGlvbnMub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgICAgICBpZiAob3B0aW9ucy5vZmZzZXRQYXJlbnQubWF0Y2goL15cXGQrJC8pKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKG9wdGlvbnMub2Zmc2V0UGFyZW50ICogMSkgLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJlbnQgPSBhbmd1bGFyLmVsZW1lbnQob3B0aW9ucy5vZmZzZXRQYXJlbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGFmZml4LmluaXQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAkYWZmaXguJHBhcnNlT2Zmc2V0cygpO1xyXG4gICAgICAgICAgaW5pdGlhbE9mZnNldFRvcCA9IGRpbWVuc2lvbnMub2Zmc2V0KGVsZW1lbnRbMF0pLnRvcCArIGluaXRpYWxBZmZpeFRvcDtcclxuXHJcbiAgICAgICAgICAvLyBCaW5kIGV2ZW50c1xyXG4gICAgICAgICAgdGFyZ2V0RWwub24oJ3Njcm9sbCcsICRhZmZpeC5jaGVja1Bvc2l0aW9uKTtcclxuICAgICAgICAgIHRhcmdldEVsLm9uKCdjbGljaycsICRhZmZpeC5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCk7XHJcbiAgICAgICAgICB3aW5kb3dFbC5vbigncmVzaXplJywgJGFmZml4LiRkZWJvdW5jZWRPblJlc2l6ZSk7XHJcblxyXG4gICAgICAgICAgLy8gQm90aCBvZiB0aGVzZSBjaGVja1Bvc2l0aW9uKCkgY2FsbHMgYXJlIG5lY2Vzc2FyeSBmb3IgdGhlIGNhc2Ugd2hlcmVcclxuICAgICAgICAgIC8vIHRoZSB1c2VyIGhpdHMgcmVmcmVzaCBhZnRlciBzY3JvbGxpbmcgdG8gdGhlIGJvdHRvbSBvZiB0aGUgcGFnZS5cclxuICAgICAgICAgICRhZmZpeC5jaGVja1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgICAkYWZmaXguY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3AoKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGFmZml4LmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAvLyBVbmJpbmQgZXZlbnRzXHJcbiAgICAgICAgICB0YXJnZXRFbC5vZmYoJ3Njcm9sbCcsICRhZmZpeC5jaGVja1Bvc2l0aW9uKTtcclxuICAgICAgICAgIHRhcmdldEVsLm9mZignY2xpY2snLCAkYWZmaXguY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3ApO1xyXG4gICAgICAgICAgd2luZG93RWwub2ZmKCdyZXNpemUnLCAkYWZmaXguJGRlYm91bmNlZE9uUmVzaXplKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGFmZml4LmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgc2V0VGltZW91dCgkYWZmaXguY2hlY2tQb3NpdGlvbiwgMSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRhZmZpeC5jaGVja1Bvc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvLyBpZiAoIXRoaXMuJGVsZW1lbnQuaXMoJzp2aXNpYmxlJykpIHJldHVyblxyXG5cclxuICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBnZXRTY3JvbGxUb3AoKTtcclxuICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGRpbWVuc2lvbnMub2Zmc2V0KGVsZW1lbnRbMF0pO1xyXG4gICAgICAgICAgdmFyIGVsZW1lbnRIZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodChlbGVtZW50WzBdKTtcclxuXHJcbiAgICAgICAgICAvLyBHZXQgcmVxdWlyZWQgYWZmaXggY2xhc3MgYWNjb3JkaW5nIHRvIHBvc2l0aW9uXHJcbiAgICAgICAgICB2YXIgYWZmaXggPSBnZXRSZXF1aXJlZEFmZml4Q2xhc3ModW5waW4sIHBvc2l0aW9uLCBlbGVtZW50SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAvLyBEaWQgYWZmaXggc3RhdHVzIGNoYW5nZWQgdGhpcyBsYXN0IGNoZWNrP1xyXG4gICAgICAgICAgaWYoYWZmaXhlZCA9PT0gYWZmaXgpIHJldHVybjtcclxuICAgICAgICAgIGFmZml4ZWQgPSBhZmZpeDtcclxuXHJcbiAgICAgICAgICAvLyBBZGQgcHJvcGVyIGFmZml4IGNsYXNzXHJcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKHJlc2V0KS5hZGRDbGFzcygnYWZmaXgnICsgKChhZmZpeCAhPT0gJ21pZGRsZScpID8gJy0nICsgYWZmaXggOiAnJykpO1xyXG5cclxuICAgICAgICAgIGlmKGFmZml4ID09PSAndG9wJykge1xyXG4gICAgICAgICAgICB1bnBpbiA9IG51bGw7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKCdwb3NpdGlvbicsIChvcHRpb25zLm9mZnNldFBhcmVudCkgPyAnJyA6ICdyZWxhdGl2ZScpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygndG9wJywgJycpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGFmZml4ID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5vZmZzZXRVbnBpbikge1xyXG4gICAgICAgICAgICAgIHVucGluID0gLShvcHRpb25zLm9mZnNldFVucGluICogMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHVucGluIHRocmVzaG9sZCB3aGVuIGFmZml4ZWQgdG8gYm90dG9tLlxyXG4gICAgICAgICAgICAgIC8vIEhvcGVmdWxseSB0aGUgYnJvd3NlciBzY3JvbGxzIHBpeGVsIGJ5IHBpeGVsLlxyXG4gICAgICAgICAgICAgIHVucGluID0gcG9zaXRpb24udG9wIC0gc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKCdwb3NpdGlvbicsIChvcHRpb25zLm9mZnNldFBhcmVudCkgPyAnJyA6ICdyZWxhdGl2ZScpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygndG9wJywgKG9wdGlvbnMub2Zmc2V0UGFyZW50KSA/ICcnIDogKChib2R5RWxbMF0ub2Zmc2V0SGVpZ2h0IC0gb2Zmc2V0Qm90dG9tIC0gZWxlbWVudEhlaWdodCAtIGluaXRpYWxPZmZzZXRUb3ApICsgJ3B4JykpO1xyXG4gICAgICAgICAgfSBlbHNlIHsgLy8gYWZmaXggPT09ICdtaWRkbGUnXHJcbiAgICAgICAgICAgIHVucGluID0gbnVsbDtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3MoJ3Bvc2l0aW9uJywgJ2ZpeGVkJyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKCd0b3AnLCBpbml0aWFsQWZmaXhUb3AgKyAncHgnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGFmZml4LiRvblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJGFmZml4LiRwYXJzZU9mZnNldHMoKTtcclxuICAgICAgICAgICRhZmZpeC5jaGVja1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkYWZmaXguJGRlYm91bmNlZE9uUmVzaXplID0gZGVib3VuY2UoJGFmZml4LiRvblJlc2l6ZSwgNTApO1xyXG5cclxuICAgICAgICAkYWZmaXguJHBhcnNlT2Zmc2V0cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIC8vIFJlc2V0IHBvc2l0aW9uIHRvIGNhbGN1bGF0ZSBjb3JyZWN0IG9mZnNldFRvcFxyXG4gICAgICAgICAgZWxlbWVudC5jc3MoJ3Bvc2l0aW9uJywgKG9wdGlvbnMub2Zmc2V0UGFyZW50KSA/ICcnIDogJ3JlbGF0aXZlJyk7XHJcblxyXG4gICAgICAgICAgaWYob3B0aW9ucy5vZmZzZXRUb3ApIHtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5vZmZzZXRUb3AgPT09ICdhdXRvJykge1xyXG4gICAgICAgICAgICAgIG9wdGlvbnMub2Zmc2V0VG9wID0gJyswJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihvcHRpb25zLm9mZnNldFRvcC5tYXRjaCgvXlstK11cXGQrJC8pKSB7XHJcbiAgICAgICAgICAgICAgaW5pdGlhbEFmZml4VG9wID0gLSBvcHRpb25zLm9mZnNldFRvcCAqIDE7XHJcbiAgICAgICAgICAgICAgaWYob3B0aW9ucy5vZmZzZXRQYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldFRvcCA9IGRpbWVuc2lvbnMub2Zmc2V0KHBhcmVudFswXSkudG9wICsgKG9wdGlvbnMub2Zmc2V0VG9wICogMSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0VG9wID0gZGltZW5zaW9ucy5vZmZzZXQoZWxlbWVudFswXSkudG9wIC0gZGltZW5zaW9ucy5jc3MoZWxlbWVudFswXSwgJ21hcmdpblRvcCcsIHRydWUpICsgKG9wdGlvbnMub2Zmc2V0VG9wICogMSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIG9mZnNldFRvcCA9IG9wdGlvbnMub2Zmc2V0VG9wICogMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmKG9wdGlvbnMub2Zmc2V0Qm90dG9tKSB7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMub2Zmc2V0UGFyZW50ICYmIG9wdGlvbnMub2Zmc2V0Qm90dG9tLm1hdGNoKC9eWy0rXVxcZCskLykpIHtcclxuICAgICAgICAgICAgICAvLyBhZGQgMSBwaXhlbCBkdWUgdG8gcm91bmRpbmcgcHJvYmxlbXMuLi5cclxuICAgICAgICAgICAgICBvZmZzZXRCb3R0b20gPSBnZXRTY3JvbGxIZWlnaHQoKSAtIChkaW1lbnNpb25zLm9mZnNldChwYXJlbnRbMF0pLnRvcCArIGRpbWVuc2lvbnMuaGVpZ2h0KHBhcmVudFswXSkpICsgKG9wdGlvbnMub2Zmc2V0Qm90dG9tICogMSkgKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIG9mZnNldEJvdHRvbSA9IG9wdGlvbnMub2Zmc2V0Qm90dG9tICogMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UmVxdWlyZWRBZmZpeENsYXNzKHVucGluLCBwb3NpdGlvbiwgZWxlbWVudEhlaWdodCkge1xyXG5cclxuICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBnZXRTY3JvbGxUb3AoKTtcclxuICAgICAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSBnZXRTY3JvbGxIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICBpZihzY3JvbGxUb3AgPD0gb2Zmc2V0VG9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndG9wJztcclxuICAgICAgICAgIH0gZWxzZSBpZih1bnBpbiAhPT0gbnVsbCAmJiAoc2Nyb2xsVG9wICsgdW5waW4gPD0gcG9zaXRpb24udG9wKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ21pZGRsZSc7XHJcbiAgICAgICAgICB9IGVsc2UgaWYob2Zmc2V0Qm90dG9tICE9PSBudWxsICYmIChwb3NpdGlvbi50b3AgKyBlbGVtZW50SGVpZ2h0ICsgaW5pdGlhbEFmZml4VG9wID49IHNjcm9sbEhlaWdodCAtIG9mZnNldEJvdHRvbSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdib3R0b20nO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICdtaWRkbGUnO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFNjcm9sbFRvcCgpIHtcclxuICAgICAgICAgIHJldHVybiB0YXJnZXRFbFswXSA9PT0gJHdpbmRvdyA/ICR3aW5kb3cucGFnZVlPZmZzZXQgOiB0YXJnZXRFbFswXS5zY3JvbGxUb3A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRTY3JvbGxIZWlnaHQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0RWxbMF0gPT09ICR3aW5kb3cgPyAkd2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0IDogdGFyZ2V0RWxbMF0uc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGFmZml4LmluaXQoKTtcclxuICAgICAgICByZXR1cm4gJGFmZml4O1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIEFmZml4RmFjdG9yeTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNBZmZpeCcsIFtcIiRhZmZpeFwiLCBcIiR3aW5kb3dcIiwgZnVuY3Rpb24oJGFmZml4LCAkd2luZG93KSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICByZXF1aXJlOiAnXj9ic0FmZml4VGFyZ2V0JyxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGFmZml4VGFyZ2V0KSB7XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0ge3Njb3BlOiBzY29wZSwgb2Zmc2V0VG9wOiAnYXV0bycsIHRhcmdldDogYWZmaXhUYXJnZXQgPyBhZmZpeFRhcmdldC4kZWxlbWVudCA6IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KX07XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsnb2Zmc2V0VG9wJywgJ29mZnNldEJvdHRvbScsICdvZmZzZXRQYXJlbnQnLCAnb2Zmc2V0VW5waW4nXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBhZmZpeCA9ICRhZmZpeChlbGVtZW50LCBvcHRpb25zKTtcclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBhZmZpeCAmJiBhZmZpeC5kZXN0cm95KCk7XHJcbiAgICAgICAgICBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICAgIGFmZml4ID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKVxyXG5cclxuICAuZGlyZWN0aXZlKCdic0FmZml4VGFyZ2V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjb250cm9sbGVyOiBbXCIkZWxlbWVudFwiLCBmdW5jdGlvbigkZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcclxuICAgICAgfV1cclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG4vLyBTb3VyY2U6IGFzaWRlLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5hc2lkZScsIFsnbWdjcmVhLm5nU3RyYXAubW9kYWwnXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckYXNpZGUnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBhbmltYXRpb246ICdhbS1mYWRlLWFuZC1zbGlkZS1yaWdodCcsXHJcbiAgICAgIHByZWZpeENsYXNzOiAnYXNpZGUnLFxyXG4gICAgICBwbGFjZW1lbnQ6ICdyaWdodCcsXHJcbiAgICAgIHRlbXBsYXRlOiAnYXNpZGUvYXNpZGUudHBsLmh0bWwnLFxyXG4gICAgICBjb250ZW50VGVtcGxhdGU6IGZhbHNlLFxyXG4gICAgICBjb250YWluZXI6IGZhbHNlLFxyXG4gICAgICBlbGVtZW50OiBudWxsLFxyXG4gICAgICBiYWNrZHJvcDogdHJ1ZSxcclxuICAgICAga2V5Ym9hcmQ6IHRydWUsXHJcbiAgICAgIGh0bWw6IGZhbHNlLFxyXG4gICAgICBzaG93OiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IFtcIiRtb2RhbFwiLCBmdW5jdGlvbigkbW9kYWwpIHtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIEFzaWRlRmFjdG9yeShjb25maWcpIHtcclxuXHJcbiAgICAgICAgdmFyICRhc2lkZSA9IHt9O1xyXG5cclxuICAgICAgICAvLyBDb21tb24gdmFyc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG5cclxuICAgICAgICAkYXNpZGUgPSAkbW9kYWwob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiAkYXNpZGU7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gQXNpZGVGYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic0FzaWRlJywgW1wiJHdpbmRvd1wiLCBcIiRzY2VcIiwgXCIkYXNpZGVcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHNjZSwgJGFzaWRlKSB7XHJcblxyXG4gICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8ICR3aW5kb3cuc2V0VGltZW91dDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgdHJhbnNjbHVzaW9uKSB7XHJcbiAgICAgICAgLy8gRGlyZWN0aXZlIG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGUsIGVsZW1lbnQ6IGVsZW1lbnQsIHNob3c6IGZhbHNlfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWyd0ZW1wbGF0ZScsICdjb250ZW50VGVtcGxhdGUnLCAncGxhY2VtZW50JywgJ2JhY2tkcm9wJywgJ2tleWJvYXJkJywgJ2h0bWwnLCAnY29udGFpbmVyJywgJ2FuaW1hdGlvbiddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJba2V5XSkpIG9wdGlvbnNba2V5XSA9IGF0dHJba2V5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBkYXRhLWF0dHJzXHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsndGl0bGUnLCAnY29udGVudCddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGF0dHJba2V5XSAmJiBhdHRyLiRvYnNlcnZlKGtleSwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHNjb3BlW2tleV0gPSAkc2NlLnRydXN0QXNIdG1sKG5ld1ZhbHVlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHNjb3BlIGFzIGFuIG9iamVjdFxyXG4gICAgICAgIGF0dHIuYnNBc2lkZSAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic0FzaWRlLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3QobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHNjb3BlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzY29wZS5jb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgYXNpZGVcclxuICAgICAgICB2YXIgYXNpZGUgPSAkYXNpZGUob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXJcclxuICAgICAgICBlbGVtZW50Lm9uKGF0dHIudHJpZ2dlciB8fCAnY2xpY2snLCBhc2lkZS50b2dnbGUpO1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoYXNpZGUpIGFzaWRlLmRlc3Ryb3koKTtcclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgYXNpZGUgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxuLy8gU291cmNlOiBhbGVydC5qc1xyXG4vLyBAQlVHOiBmb2xsb3dpbmcgc25pcHBldCB3b24ndCBjb21waWxlIGNvcnJlY3RseVxyXG4vLyBAVE9ETzogc3VibWl0IGlzc3VlIHRvIGNvcmVcclxuLy8gJzxzcGFuIG5nLWlmPVwidGl0bGVcIj48c3Ryb25nIG5nLWJpbmQ9XCJ0aXRsZVwiPjwvc3Ryb25nPiZuYnNwOzwvc3Bhbj48c3BhbiBuZy1iaW5kLWh0bWw9XCJjb250ZW50XCI+PC9zcGFuPicgK1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmFsZXJ0JywgWydtZ2NyZWEubmdTdHJhcC5tb2RhbCddKVxyXG5cclxuICAucHJvdmlkZXIoJyRhbGVydCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICBwcmVmaXhDbGFzczogJ2FsZXJ0JyxcclxuICAgICAgcGxhY2VtZW50OiBudWxsLFxyXG4gICAgICB0ZW1wbGF0ZTogJ2FsZXJ0L2FsZXJ0LnRwbC5odG1sJyxcclxuICAgICAgY29udGFpbmVyOiBmYWxzZSxcclxuICAgICAgZWxlbWVudDogbnVsbCxcclxuICAgICAgYmFja2Ryb3A6IGZhbHNlLFxyXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcclxuICAgICAgc2hvdzogdHJ1ZSxcclxuICAgICAgLy8gU3BlY2lmaWMgb3B0aW9uc1xyXG4gICAgICBkdXJhdGlvbjogZmFsc2UsXHJcbiAgICAgIHR5cGU6IGZhbHNlLFxyXG4gICAgICBkaXNtaXNzYWJsZTogdHJ1ZVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkbW9kYWxcIiwgXCIkdGltZW91dFwiLCBmdW5jdGlvbigkbW9kYWwsICR0aW1lb3V0KSB7XHJcblxyXG4gICAgICBmdW5jdGlvbiBBbGVydEZhY3RvcnkoY29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciAkYWxlcnQgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gQ29tbW9uIHZhcnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBkZWZhdWx0cywgY29uZmlnKTtcclxuXHJcbiAgICAgICAgJGFsZXJ0ID0gJG1vZGFsKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHNjb3BlIGFzIHN0cmluZyBvcHRpb25zIFsvKnRpdGxlLCBjb250ZW50LCAqLyB0eXBlLCBkaXNtaXNzYWJsZV1cclxuICAgICAgICAkYWxlcnQuJHNjb3BlLmRpc21pc3NhYmxlID0gISFvcHRpb25zLmRpc21pc3NhYmxlO1xyXG4gICAgICAgIGlmKG9wdGlvbnMudHlwZSkge1xyXG4gICAgICAgICAgJGFsZXJ0LiRzY29wZS50eXBlID0gb3B0aW9ucy50eXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBhdXRvLWNsb3NlIGR1cmF0aW9uXHJcbiAgICAgICAgdmFyIHNob3cgPSAkYWxlcnQuc2hvdztcclxuICAgICAgICBpZihvcHRpb25zLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAkYWxlcnQuc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzaG93KCk7XHJcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICRhbGVydC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMuZHVyYXRpb24gKiAxMDAwKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJGFsZXJ0O1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIEFsZXJ0RmFjdG9yeTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNBbGVydCcsIFtcIiR3aW5kb3dcIiwgXCIkc2NlXCIsIFwiJGFsZXJ0XCIsIGZ1bmN0aW9uKCR3aW5kb3csICRzY2UsICRhbGVydCkge1xyXG5cclxuICAgIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCAkd2luZG93LnNldFRpbWVvdXQ7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHRyYW5zY2x1c2lvbikge1xyXG5cclxuICAgICAgICAvLyBEaXJlY3RpdmUgb3B0aW9uc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge3Njb3BlOiBzY29wZSwgZWxlbWVudDogZWxlbWVudCwgc2hvdzogZmFsc2V9O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3RlbXBsYXRlJywgJ3BsYWNlbWVudCcsICdrZXlib2FyZCcsICdodG1sJywgJ2NvbnRhaW5lcicsICdhbmltYXRpb24nLCAnZHVyYXRpb24nLCAnZGlzbWlzc2FibGUnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgZGF0YS1hdHRyc1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3RpdGxlJywgJ2NvbnRlbnQnLCAndHlwZSddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGF0dHJba2V5XSAmJiBhdHRyLiRvYnNlcnZlKGtleSwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHNjb3BlW2tleV0gPSAkc2NlLnRydXN0QXNIdG1sKG5ld1ZhbHVlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHNjb3BlIGFzIGFuIG9iamVjdFxyXG4gICAgICAgIGF0dHIuYnNBbGVydCAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic0FsZXJ0LCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3QobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHNjb3BlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzY29wZS5jb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgYWxlcnRcclxuICAgICAgICB2YXIgYWxlcnQgPSAkYWxlcnQob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXJcclxuICAgICAgICBlbGVtZW50Lm9uKGF0dHIudHJpZ2dlciB8fCAnY2xpY2snLCBhbGVydC50b2dnbGUpO1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoYWxlcnQpIGFsZXJ0LmRlc3Ryb3koKTtcclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgYWxlcnQgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxuLy8gU291cmNlOiBidXR0b24uanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmJ1dHRvbicsIFtdKVxyXG5cclxuICAucHJvdmlkZXIoJyRidXR0b24nLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBhY3RpdmVDbGFzczonYWN0aXZlJyxcclxuICAgICAgdG9nZ2xlRXZlbnQ6J2NsaWNrJ1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHtkZWZhdWx0czogZGVmYXVsdHN9O1xyXG4gICAgfTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNDaGVja2JveEdyb3VwJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICBjb21waWxlOiBmdW5jdGlvbiBwb3N0TGluayhlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgZWxlbWVudC5hdHRyKCdkYXRhLXRvZ2dsZScsICdidXR0b25zJyk7XHJcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyKCduZy1tb2RlbCcpO1xyXG4gICAgICAgIHZhciBjaGlsZHJlbiA9IGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xyXG4gICAgICAgICAgdmFyIGNoaWxkRWwgPSBhbmd1bGFyLmVsZW1lbnQoY2hpbGQpO1xyXG4gICAgICAgICAgY2hpbGRFbC5hdHRyKCdicy1jaGVja2JveCcsICcnKTtcclxuICAgICAgICAgIGNoaWxkRWwuYXR0cignbmctbW9kZWwnLCBhdHRyLm5nTW9kZWwgKyAnLicgKyBjaGlsZEVsLmF0dHIoJ3ZhbHVlJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNDaGVja2JveCcsIFtcIiRidXR0b25cIiwgXCIkJHJBRlwiLCBmdW5jdGlvbigkYnV0dG9uLCAkJHJBRikge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9ICRidXR0b24uZGVmYXVsdHM7XHJcbiAgICB2YXIgY29uc3RhbnRWYWx1ZVJlZ0V4cCA9IC9eKHRydWV8ZmFsc2V8XFxkKykkLztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjb250cm9sbGVyKSB7XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0gZGVmYXVsdHM7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgbGFiZWwgPiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1cclxuICAgICAgICB2YXIgaXNJbnB1dCA9IGVsZW1lbnRbMF0ubm9kZU5hbWUgPT09ICdJTlBVVCc7XHJcbiAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBpc0lucHV0ID8gZWxlbWVudC5wYXJlbnQoKSA6IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHZhciB0cnVlVmFsdWUgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRyLnRydWVWYWx1ZSkgPyBhdHRyLnRydWVWYWx1ZSA6IHRydWU7XHJcbiAgICAgICAgaWYoY29uc3RhbnRWYWx1ZVJlZ0V4cC50ZXN0KGF0dHIudHJ1ZVZhbHVlKSkge1xyXG4gICAgICAgICAgdHJ1ZVZhbHVlID0gc2NvcGUuJGV2YWwoYXR0ci50cnVlVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmFsc2VWYWx1ZSA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHIuZmFsc2VWYWx1ZSkgPyBhdHRyLmZhbHNlVmFsdWUgOiBmYWxzZTtcclxuICAgICAgICBpZihjb25zdGFudFZhbHVlUmVnRXhwLnRlc3QoYXR0ci5mYWxzZVZhbHVlKSkge1xyXG4gICAgICAgICAgZmFsc2VWYWx1ZSA9IHNjb3BlLiRldmFsKGF0dHIuZmFsc2VWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQYXJzZSBleG90aWMgdmFsdWVzXHJcbiAgICAgICAgdmFyIGhhc0V4b3RpY1ZhbHVlcyA9IHR5cGVvZiB0cnVlVmFsdWUgIT09ICdib29sZWFuJyB8fCB0eXBlb2YgZmFsc2VWYWx1ZSAhPT0gJ2Jvb2xlYW4nO1xyXG4gICAgICAgIGlmKGhhc0V4b3RpY1ZhbHVlcykge1xyXG4gICAgICAgICAgY29udHJvbGxlci4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZpZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRwYXJzZXInLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksICd2aWV3VmFsdWUnLCB2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdmlld1ZhbHVlID8gdHJ1ZVZhbHVlIDogZmFsc2VWYWx1ZTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgLy8gRml4IHJlbmRlcmluZyBmb3IgZXhvdGljIHZhbHVlc1xyXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdNb2RlbCwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlcigpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBtb2RlbCAtPiB2aWV3XHJcbiAgICAgICAgY29udHJvbGxlci4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckcmVuZGVyJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCAnY29udHJvbGxlci4kbW9kZWxWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCAnY29udHJvbGxlci4kdmlld1ZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSwgY29udHJvbGxlci4kdmlld1ZhbHVlKTtcclxuICAgICAgICAgIHZhciBpc0FjdGl2ZSA9IGFuZ3VsYXIuZXF1YWxzKGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUsIHRydWVWYWx1ZSk7XHJcbiAgICAgICAgICAkJHJBRihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYoaXNJbnB1dCkgZWxlbWVudFswXS5jaGVja2VkID0gaXNBY3RpdmU7XHJcbiAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQudG9nZ2xlQ2xhc3Mob3B0aW9ucy5hY3RpdmVDbGFzcywgaXNBY3RpdmUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gdmlldyAtPiBtb2RlbFxyXG4gICAgICAgIGVsZW1lbnQuYmluZChvcHRpb25zLnRvZ2dsZUV2ZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybignIWNsaWNrJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCAnY29udHJvbGxlci4kdmlld1ZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSwgY29udHJvbGxlci4kdmlld1ZhbHVlLCAnY29udHJvbGxlci4kbW9kZWxWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCBjb250cm9sbGVyLiRtb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgaWYoIWlzSW5wdXQpIHtcclxuICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoIWFjdGl2ZUVsZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighaGFzRXhvdGljVmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgY29udHJvbGxlci4kcmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gIH1dKVxyXG5cclxuICAuZGlyZWN0aXZlKCdic1JhZGlvR3JvdXAnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIHBvc3RMaW5rKGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICBlbGVtZW50LmF0dHIoJ2RhdGEtdG9nZ2xlJywgJ2J1dHRvbnMnKTtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHIoJ25nLW1vZGVsJyk7XHJcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoY2hpbGQpLmF0dHIoJ2JzLXJhZGlvJywgJycpO1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGNoaWxkKS5hdHRyKCduZy1tb2RlbCcsIGF0dHIubmdNb2RlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic1JhZGlvJywgW1wiJGJ1dHRvblwiLCBcIiQkckFGXCIsIGZ1bmN0aW9uKCRidXR0b24sICQkckFGKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gJGJ1dHRvbi5kZWZhdWx0cztcclxuICAgIHZhciBjb25zdGFudFZhbHVlUmVnRXhwID0gL14odHJ1ZXxmYWxzZXxcXGQrKSQvO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGNvbnRyb2xsZXIpIHtcclxuXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBkZWZhdWx0cztcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBgbGFiZWwgPiBpbnB1dFt0eXBlPVwicmFkaW9cIl1gIG1hcmt1cFxyXG4gICAgICAgIHZhciBpc0lucHV0ID0gZWxlbWVudFswXS5ub2RlTmFtZSA9PT0gJ0lOUFVUJztcclxuICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGlzSW5wdXQgPyBlbGVtZW50LnBhcmVudCgpIDogZWxlbWVudDtcclxuXHJcbiAgICAgICAgdmFyIHZhbHVlID0gY29uc3RhbnRWYWx1ZVJlZ0V4cC50ZXN0KGF0dHIudmFsdWUpID8gc2NvcGUuJGV2YWwoYXR0ci52YWx1ZSkgOiBhdHRyLnZhbHVlO1xyXG5cclxuICAgICAgICAvLyBtb2RlbCAtPiB2aWV3XHJcbiAgICAgICAgY29udHJvbGxlci4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckcmVuZGVyJywgZWxlbWVudC5hdHRyKCd2YWx1ZScpLCAnY29udHJvbGxlci4kbW9kZWxWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCAnY29udHJvbGxlci4kdmlld1ZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSwgY29udHJvbGxlci4kdmlld1ZhbHVlKTtcclxuICAgICAgICAgIHZhciBpc0FjdGl2ZSA9IGFuZ3VsYXIuZXF1YWxzKGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUsIHZhbHVlKTtcclxuICAgICAgICAgICQkckFGKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZihpc0lucHV0KSBlbGVtZW50WzBdLmNoZWNrZWQgPSBpc0FjdGl2ZTtcclxuICAgICAgICAgICAgYWN0aXZlRWxlbWVudC50b2dnbGVDbGFzcyhvcHRpb25zLmFjdGl2ZUNsYXNzLCBpc0FjdGl2ZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyB2aWV3IC0+IG1vZGVsXHJcbiAgICAgICAgZWxlbWVudC5iaW5kKG9wdGlvbnMudG9nZ2xlRXZlbnQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCchY2xpY2snLCBlbGVtZW50LmF0dHIoJ3ZhbHVlJyksICdjb250cm9sbGVyLiR2aWV3VmFsdWUnLCB0eXBlb2YgY29udHJvbGxlci4kdmlld1ZhbHVlLCBjb250cm9sbGVyLiR2aWV3VmFsdWUsICdjb250cm9sbGVyLiRtb2RlbFZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUsIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogY29sbGFwc2UuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmNvbGxhcHNlJywgW10pXHJcblxyXG4gIC5wcm92aWRlcignJGNvbGxhcHNlJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tY29sbGFwc2UnLFxyXG4gICAgICBkaXNhbGxvd1RvZ2dsZTogZmFsc2UsXHJcbiAgICAgIGFjdGl2ZUNsYXNzOiAnaW4nXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgIC8vIEF0dHJpYnV0ZXMgb3B0aW9uc1xyXG4gICAgICBzZWxmLiRvcHRpb25zID0gYW5ndWxhci5jb3B5KGRlZmF1bHRzKTtcclxuICAgICAgYW5ndWxhci5mb3JFYWNoKFsnYW5pbWF0aW9uJywgJ2Rpc2FsbG93VG9nZ2xlJywgJ2FjdGl2ZUNsYXNzJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRyc1trZXldKSkgc2VsZi4kb3B0aW9uc1trZXldID0gJGF0dHJzW2tleV07XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgc2VsZi4kdG9nZ2xlcyA9IFtdO1xyXG4gICAgICBzZWxmLiR0YXJnZXRzID0gW107XHJcblxyXG4gICAgICBzZWxmLiR2aWV3Q2hhbmdlTGlzdGVuZXJzID0gW107XHJcblxyXG4gICAgICBzZWxmLiRyZWdpc3RlclRvZ2dsZSA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICBzZWxmLiR0b2dnbGVzLnB1c2goZWxlbWVudCk7XHJcbiAgICAgIH07XHJcbiAgICAgIHNlbGYuJHJlZ2lzdGVyVGFyZ2V0ID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgIHNlbGYuJHRhcmdldHMucHVzaChlbGVtZW50KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNlbGYuJHRhcmdldHMuJGFjdGl2ZSA9IDA7XHJcbiAgICAgIHNlbGYuJHNldEFjdGl2ZSA9ICRzY29wZS4kc2V0QWN0aXZlID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBpZighc2VsZi4kb3B0aW9ucy5kaXNhbGxvd1RvZ2dsZSkge1xyXG4gICAgICAgICAgc2VsZi4kdGFyZ2V0cy4kYWN0aXZlID0gc2VsZi4kdGFyZ2V0cy4kYWN0aXZlID09PSB2YWx1ZSA/IC0xIDogdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNlbGYuJHRhcmdldHMuJGFjdGl2ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyICRjb2xsYXBzZSA9IHt9O1xyXG4gICAgICAkY29sbGFwc2UuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgJGNvbGxhcHNlLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xyXG4gICAgICByZXR1cm4gJGNvbGxhcHNlO1xyXG4gICAgfTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNDb2xsYXBzZScsIFtcIiR3aW5kb3dcIiwgXCIkYW5pbWF0ZVwiLCBcIiRjb2xsYXBzZVwiLCBmdW5jdGlvbigkd2luZG93LCAkYW5pbWF0ZSwgJGNvbGxhcHNlKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gJGNvbGxhcHNlLmRlZmF1bHRzO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlcXVpcmU6IFsnP25nTW9kZWwnLCAnYnNDb2xsYXBzZSddLFxyXG4gICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCAkY29sbGFwc2UuY29udHJvbGxlcl0sXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMpIHtcclxuXHJcbiAgICAgICAgdmFyIG5nTW9kZWxDdHJsID0gY29udHJvbGxlcnNbMF07XHJcbiAgICAgICAgdmFyIGJzQ29sbGFwc2VDdHJsID0gY29udHJvbGxlcnNbMV07XHJcblxyXG4gICAgICAgIGlmKG5nTW9kZWxDdHJsKSB7XHJcblxyXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBtb2RlbFZhbHVlIGZvbGxvd2luZ1xyXG4gICAgICAgICAgYnNDb2xsYXBzZUN0cmwuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShic0NvbGxhcHNlQ3RybC4kdGFyZ2V0cy4kYWN0aXZlKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8vIG1vZGVsVmFsdWUgLT4gJGZvcm1hdHRlcnMgLT4gdmlld1ZhbHVlXHJcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCckZm9ybWF0dGVyKFwiJXNcIik6IG1vZGVsVmFsdWU9JW8gKCVvKScsIGVsZW1lbnQuYXR0cignbmctbW9kZWwnKSwgbW9kZWxWYWx1ZSwgdHlwZW9mIG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgICBic0NvbGxhcHNlQ3RybC4kc2V0QWN0aXZlKG1vZGVsVmFsdWUgKiAxKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWU7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzQ29sbGFwc2VUb2dnbGUnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXF1aXJlOiBbJ14/bmdNb2RlbCcsICdeYnNDb2xsYXBzZSddLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzKSB7XHJcblxyXG4gICAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGNvbnRyb2xsZXJzWzBdO1xyXG4gICAgICAgIHZhciBic0NvbGxhcHNlQ3RybCA9IGNvbnRyb2xsZXJzWzFdO1xyXG5cclxuICAgICAgICAvLyBBZGQgYmFzZSBhdHRyXHJcbiAgICAgICAgZWxlbWVudC5hdHRyKCdkYXRhLXRvZ2dsZScsICdjb2xsYXBzZScpO1xyXG5cclxuICAgICAgICAvLyBQdXNoIHBhbmUgdG8gcGFyZW50IGJzQ29sbGFwc2UgY29udHJvbGxlclxyXG4gICAgICAgIGJzQ29sbGFwc2VDdHJsLiRyZWdpc3RlclRvZ2dsZShlbGVtZW50KTtcclxuICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIGluZGV4ID0gYXR0cnMuYnNDb2xsYXBzZVRvZ2dsZSB8fCBic0NvbGxhcHNlQ3RybC4kdG9nZ2xlcy5pbmRleE9mKGVsZW1lbnQpO1xyXG4gICAgICAgICAgYnNDb2xsYXBzZUN0cmwuJHNldEFjdGl2ZShpbmRleCAqIDEpO1xyXG4gICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic0NvbGxhcHNlVGFyZ2V0JywgW1wiJGFuaW1hdGVcIiwgZnVuY3Rpb24oJGFuaW1hdGUpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXF1aXJlOiBbJ14/bmdNb2RlbCcsICdeYnNDb2xsYXBzZSddLFxyXG4gICAgICAvLyBzY29wZTogdHJ1ZSxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycykge1xyXG5cclxuICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjb250cm9sbGVyc1swXTtcclxuICAgICAgICB2YXIgYnNDb2xsYXBzZUN0cmwgPSBjb250cm9sbGVyc1sxXTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGJhc2UgY2xhc3NcclxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdjb2xsYXBzZScpO1xyXG5cclxuICAgICAgICAvLyBBZGQgYW5pbWF0aW9uIGNsYXNzXHJcbiAgICAgICAgaWYoYnNDb2xsYXBzZUN0cmwuJG9wdGlvbnMuYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKGJzQ29sbGFwc2VDdHJsLiRvcHRpb25zLmFuaW1hdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQdXNoIHBhbmUgdG8gcGFyZW50IGJzQ29sbGFwc2UgY29udHJvbGxlclxyXG4gICAgICAgIGJzQ29sbGFwc2VDdHJsLiRyZWdpc3RlclRhcmdldChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICAgICAgICAgdmFyIGluZGV4ID0gYnNDb2xsYXBzZUN0cmwuJHRhcmdldHMuaW5kZXhPZihlbGVtZW50KTtcclxuICAgICAgICAgIHZhciBhY3RpdmUgPSBic0NvbGxhcHNlQ3RybC4kdGFyZ2V0cy4kYWN0aXZlO1xyXG4gICAgICAgICAgJGFuaW1hdGVbaW5kZXggPT09IGFjdGl2ZSA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXShlbGVtZW50LCBic0NvbGxhcHNlQ3RybC4kb3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBic0NvbGxhcHNlQ3RybC4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVuZGVyKCk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IGRhdGVwaWNrZXIuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmRhdGVwaWNrZXInLCBbJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMuZGF0ZVBhcnNlcicsICdtZ2NyZWEubmdTdHJhcC50b29sdGlwJ10pXHJcblxyXG4gIC5wcm92aWRlcignJGRhdGVwaWNrZXInLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBhbmltYXRpb246ICdhbS1mYWRlJyxcclxuICAgICAgcHJlZml4Q2xhc3M6ICdkYXRlcGlja2VyJyxcclxuICAgICAgcGxhY2VtZW50OiAnYm90dG9tLWxlZnQnLFxyXG4gICAgICB0ZW1wbGF0ZTogJ2RhdGVwaWNrZXIvZGF0ZXBpY2tlci50cGwuaHRtbCcsXHJcbiAgICAgIHRyaWdnZXI6ICdmb2N1cycsXHJcbiAgICAgIGNvbnRhaW5lcjogZmFsc2UsXHJcbiAgICAgIGtleWJvYXJkOiB0cnVlLFxyXG4gICAgICBodG1sOiBmYWxzZSxcclxuICAgICAgZGVsYXk6IDAsXHJcbiAgICAgIC8vIGxhbmc6ICRsb2NhbGUuaWQsXHJcbiAgICAgIHVzZU5hdGl2ZTogZmFsc2UsXHJcbiAgICAgIGRhdGVUeXBlOiAnZGF0ZScsXHJcbiAgICAgIGRhdGVGb3JtYXQ6ICdzaG9ydERhdGUnLFxyXG4gICAgICBtb2RlbERhdGVGb3JtYXQ6IG51bGwsXHJcbiAgICAgIGRheUZvcm1hdDogJ2RkJyxcclxuICAgICAgc3RyaWN0Rm9ybWF0OiBmYWxzZSxcclxuICAgICAgYXV0b2Nsb3NlOiBmYWxzZSxcclxuICAgICAgbWluRGF0ZTogLUluZmluaXR5LFxyXG4gICAgICBtYXhEYXRlOiArSW5maW5pdHksXHJcbiAgICAgIHN0YXJ0VmlldzogMCxcclxuICAgICAgbWluVmlldzogMCxcclxuICAgICAgc3RhcnRXZWVrOiAwLFxyXG4gICAgICBkYXlzT2ZXZWVrRGlzYWJsZWQ6ICcnLFxyXG4gICAgICBpY29uTGVmdDogJ2dseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0JyxcclxuICAgICAgaWNvblJpZ2h0OiAnZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0J1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkd2luZG93XCIsIFwiJGRvY3VtZW50XCIsIFwiJHJvb3RTY29wZVwiLCBcIiRzY2VcIiwgXCIkbG9jYWxlXCIsIFwiZGF0ZUZpbHRlclwiLCBcImRhdGVwaWNrZXJWaWV3c1wiLCBcIiR0b29sdGlwXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRkb2N1bWVudCwgJHJvb3RTY29wZSwgJHNjZSwgJGxvY2FsZSwgZGF0ZUZpbHRlciwgZGF0ZXBpY2tlclZpZXdzLCAkdG9vbHRpcCkge1xyXG5cclxuICAgICAgdmFyIGJvZHlFbCA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG4gICAgICB2YXIgaXNOYXRpdmUgPSAvKGlwKGF8bylkfGlwaG9uZXxhbmRyb2lkKS9pZy50ZXN0KCR3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICAgIHZhciBpc1RvdWNoID0gKCdjcmVhdGVUb3VjaCcgaW4gJHdpbmRvdy5kb2N1bWVudCkgJiYgaXNOYXRpdmU7XHJcbiAgICAgIGlmKCFkZWZhdWx0cy5sYW5nKSBkZWZhdWx0cy5sYW5nID0gJGxvY2FsZS5pZDtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIERhdGVwaWNrZXJGYWN0b3J5KGVsZW1lbnQsIGNvbnRyb2xsZXIsIGNvbmZpZykge1xyXG5cclxuICAgICAgICB2YXIgJGRhdGVwaWNrZXIgPSAkdG9vbHRpcChlbGVtZW50LCBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZykpO1xyXG4gICAgICAgIHZhciBwYXJlbnRTY29wZSA9IGNvbmZpZy5zY29wZTtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9ICRkYXRlcGlja2VyLiRvcHRpb25zO1xyXG4gICAgICAgIHZhciBzY29wZSA9ICRkYXRlcGlja2VyLiRzY29wZTtcclxuICAgICAgICBpZihvcHRpb25zLnN0YXJ0Vmlldykgb3B0aW9ucy5zdGFydFZpZXcgLT0gb3B0aW9ucy5taW5WaWV3O1xyXG5cclxuICAgICAgICAvLyBWaWV3IHZhcnNcclxuXHJcbiAgICAgICAgdmFyIHBpY2tlclZpZXdzID0gZGF0ZXBpY2tlclZpZXdzKCRkYXRlcGlja2VyKTtcclxuICAgICAgICAkZGF0ZXBpY2tlci4kdmlld3MgPSBwaWNrZXJWaWV3cy52aWV3cztcclxuICAgICAgICB2YXIgdmlld0RhdGUgPSBwaWNrZXJWaWV3cy52aWV3RGF0ZTtcclxuICAgICAgICBzY29wZS4kbW9kZSA9IG9wdGlvbnMuc3RhcnRWaWV3O1xyXG4gICAgICAgIHNjb3BlLiRpY29uTGVmdCA9IG9wdGlvbnMuaWNvbkxlZnQ7XHJcbiAgICAgICAgc2NvcGUuJGljb25SaWdodCA9IG9wdGlvbnMuaWNvblJpZ2h0O1xyXG4gICAgICAgIHZhciAkcGlja2VyID0gJGRhdGVwaWNrZXIuJHZpZXdzW3Njb3BlLiRtb2RlXTtcclxuXHJcbiAgICAgICAgLy8gU2NvcGUgbWV0aG9kc1xyXG5cclxuICAgICAgICBzY29wZS4kc2VsZWN0ID0gZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgJGRhdGVwaWNrZXIuc2VsZWN0KGRhdGUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2NvcGUuJHNlbGVjdFBhbmUgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgJGRhdGVwaWNrZXIuJHNlbGVjdFBhbmUodmFsdWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2NvcGUuJHRvZ2dsZU1vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRkYXRlcGlja2VyLnNldE1vZGUoKHNjb3BlLiRtb2RlICsgMSkgJSAkZGF0ZXBpY2tlci4kdmlld3MubGVuZ3RoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAkZGF0ZXBpY2tlci51cGRhdGUgPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRkYXRlcGlja2VyLnVwZGF0ZSgpIG5ld1ZhbHVlPSVvJywgZGF0ZSk7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGF0ZShkYXRlKSAmJiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgICAgICRkYXRlcGlja2VyLiRkYXRlID0gZGF0ZTtcclxuICAgICAgICAgICAgJHBpY2tlci51cGRhdGUuY2FsbCgkcGlja2VyLCBkYXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIEJ1aWxkIG9ubHkgaWYgcHJpc3RpbmVcclxuICAgICAgICAgICRkYXRlcGlja2VyLiRidWlsZCh0cnVlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkZGF0ZXBpY2tlci51cGRhdGVEaXNhYmxlZERhdGVzID0gZnVuY3Rpb24oZGF0ZVJhbmdlcykge1xyXG4gICAgICAgICAgb3B0aW9ucy5kaXNhYmxlZERhdGVSYW5nZXMgPSBkYXRlUmFuZ2VzO1xyXG4gICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHNjb3BlLnJvd3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzY29wZS5yb3dzW2ldLCAkZGF0ZXBpY2tlci4kc2V0RGlzYWJsZWRFbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGRhdGVwaWNrZXIuc2VsZWN0ID0gZnVuY3Rpb24oZGF0ZSwga2VlcCkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckZGF0ZXBpY2tlci5zZWxlY3QnLCBkYXRlLCBzY29wZS4kbW9kZSk7XHJcbiAgICAgICAgICBpZighYW5ndWxhci5pc0RhdGUoY29udHJvbGxlci4kZGF0ZVZhbHVlKSkgY29udHJvbGxlci4kZGF0ZVZhbHVlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICBpZighc2NvcGUuJG1vZGUgfHwga2VlcCkge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoYW5ndWxhci5jb3B5KGRhdGUpKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kcmVuZGVyKCk7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMuYXV0b2Nsb3NlICYmICFrZWVwKSB7XHJcbiAgICAgICAgICAgICAgJGRhdGVwaWNrZXIuaGlkZSh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQodmlld0RhdGUsIHt5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBkYXRlLmdldE1vbnRoKCksIGRhdGU6IGRhdGUuZ2V0RGF0ZSgpfSk7XHJcbiAgICAgICAgICAgICRkYXRlcGlja2VyLnNldE1vZGUoc2NvcGUuJG1vZGUgLSAxKTtcclxuICAgICAgICAgICAgJGRhdGVwaWNrZXIuJGJ1aWxkKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGRhdGVwaWNrZXIuc2V0TW9kZSA9IGZ1bmN0aW9uKG1vZGUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJGRhdGVwaWNrZXIuc2V0TW9kZScsIG1vZGUpO1xyXG4gICAgICAgICAgc2NvcGUuJG1vZGUgPSBtb2RlO1xyXG4gICAgICAgICAgJHBpY2tlciA9ICRkYXRlcGlja2VyLiR2aWV3c1tzY29wZS4kbW9kZV07XHJcbiAgICAgICAgICAkZGF0ZXBpY2tlci4kYnVpbGQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAkZGF0ZXBpY2tlci4kYnVpbGQgPSBmdW5jdGlvbihwcmlzdGluZSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckZGF0ZXBpY2tlci4kYnVpbGQoKSB2aWV3RGF0ZT0lbycsIHZpZXdEYXRlKTtcclxuICAgICAgICAgIGlmKHByaXN0aW5lID09PSB0cnVlICYmICRwaWNrZXIuYnVpbHQpIHJldHVybjtcclxuICAgICAgICAgIGlmKHByaXN0aW5lID09PSBmYWxzZSAmJiAhJHBpY2tlci5idWlsdCkgcmV0dXJuO1xyXG4gICAgICAgICAgJHBpY2tlci5idWlsZC5jYWxsKCRwaWNrZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRkYXRlcGlja2VyLiR1cGRhdGVTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHNjb3BlLnJvd3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzY29wZS5yb3dzW2ldLCB1cGRhdGVTZWxlY3RlZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGRhdGVwaWNrZXIuJGlzU2VsZWN0ZWQgPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICByZXR1cm4gJHBpY2tlci5pc1NlbGVjdGVkKGRhdGUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRkYXRlcGlja2VyLiRzZXREaXNhYmxlZEVsID0gZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICAgIGVsLmRpc2FibGVkID0gJHBpY2tlci5pc0Rpc2FibGVkKGVsLmRhdGUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRkYXRlcGlja2VyLiRzZWxlY3RQYW5lID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIHZhciBzdGVwcyA9ICRwaWNrZXIuc3RlcHM7XHJcbiAgICAgICAgICB2YXIgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHZpZXdEYXRlLnllYXIgKyAoKHN0ZXBzLnllYXIgfHwgMCkgKiB2YWx1ZSksIHZpZXdEYXRlLm1vbnRoICsgKChzdGVwcy5tb250aCB8fCAwKSAqIHZhbHVlKSwgdmlld0RhdGUuZGF0ZSArICgoc3RlcHMuZGF5IHx8IDApICogdmFsdWUpKSk7XHJcbiAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge3llYXI6IHRhcmdldERhdGUuZ2V0VVRDRnVsbFllYXIoKSwgbW9udGg6IHRhcmdldERhdGUuZ2V0VVRDTW9udGgoKSwgZGF0ZTogdGFyZ2V0RGF0ZS5nZXRVVENEYXRlKCl9KTtcclxuICAgICAgICAgICRkYXRlcGlja2VyLiRidWlsZCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRkYXRlcGlja2VyLiRvbk1vdXNlRG93biA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgLy8gUHJldmVudCBibHVyIG9uIG1vdXNlZG93biBvbiAuZHJvcGRvd24tbWVudVxyXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAvLyBFbXVsYXRlIGNsaWNrIGZvciBtb2JpbGUgZGV2aWNlc1xyXG4gICAgICAgICAgaWYoaXNUb3VjaCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWwgPSBhbmd1bGFyLmVsZW1lbnQoZXZ0LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmKHRhcmdldEVsWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdidXR0b24nKSB7XHJcbiAgICAgICAgICAgICAgdGFyZ2V0RWwgPSB0YXJnZXRFbC5wYXJlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YXJnZXRFbC50cmlnZ2VySGFuZGxlcignY2xpY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkZGF0ZXBpY2tlci4kb25LZXlEb3duID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICBpZiAoIS8oMzh8Mzd8Mzl8NDB8MTMpLy50ZXN0KGV2dC5rZXlDb2RlKSB8fCBldnQuc2hpZnRLZXkgfHwgZXZ0LmFsdEtleSkgcmV0dXJuO1xyXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgIGlmKCFzY29wZS4kbW9kZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiAkZGF0ZXBpY2tlci5oaWRlKHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJldHVybiBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7ICRkYXRlcGlja2VyLnNldE1vZGUoc2NvcGUuJG1vZGUgLSAxKTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBOYXZpZ2F0ZSB3aXRoIGtleWJvYXJkXHJcbiAgICAgICAgICAkcGlja2VyLm9uS2V5RG93bihldnQpO1xyXG4gICAgICAgICAgcGFyZW50U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByaXZhdGVcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWQoZWwpIHtcclxuICAgICAgICAgIGVsLnNlbGVjdGVkID0gJGRhdGVwaWNrZXIuJGlzU2VsZWN0ZWQoZWwuZGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmb2N1c0VsZW1lbnQoKSB7XHJcbiAgICAgICAgICBlbGVtZW50WzBdLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBPdmVycmlkZXNcclxuXHJcbiAgICAgICAgdmFyIF9pbml0ID0gJGRhdGVwaWNrZXIuaW5pdDtcclxuICAgICAgICAkZGF0ZXBpY2tlci5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZihpc05hdGl2ZSAmJiBvcHRpb25zLnVzZU5hdGl2ZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnByb3AoJ3R5cGUnLCAnZGF0ZScpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygnLXdlYmtpdC1hcHBlYXJhbmNlJywgJ3RleHRmaWVsZCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9IGVsc2UgaWYoaXNUb3VjaCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnByb3AoJ3R5cGUnLCAndGV4dCcpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmF0dHIoJ3JlYWRvbmx5JywgJ3RydWUnKTtcclxuICAgICAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmb2N1c0VsZW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgX2luaXQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX2Rlc3Ryb3kgPSAkZGF0ZXBpY2tlci5kZXN0cm95O1xyXG4gICAgICAgICRkYXRlcGlja2VyLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKGlzTmF0aXZlICYmIG9wdGlvbnMudXNlTmF0aXZlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub2ZmKCdjbGljaycsIGZvY3VzRWxlbWVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBfZGVzdHJveSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBfc2hvdyA9ICRkYXRlcGlja2VyLnNob3c7XHJcbiAgICAgICAgJGRhdGVwaWNrZXIuc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgX3Nob3coKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRkYXRlcGlja2VyLiRlbGVtZW50Lm9uKGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgJGRhdGVwaWNrZXIuJG9uTW91c2VEb3duKTtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQub24oJ2tleWRvd24nLCAkZGF0ZXBpY2tlci4kb25LZXlEb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9oaWRlID0gJGRhdGVwaWNrZXIuaGlkZTtcclxuICAgICAgICAkZGF0ZXBpY2tlci5oaWRlID0gZnVuY3Rpb24oYmx1cikge1xyXG4gICAgICAgICAgJGRhdGVwaWNrZXIuJGVsZW1lbnQub2ZmKGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgJGRhdGVwaWNrZXIuJG9uTW91c2VEb3duKTtcclxuICAgICAgICAgIGlmKG9wdGlvbnMua2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5vZmYoJ2tleWRvd24nLCAkZGF0ZXBpY2tlci4kb25LZXlEb3duKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF9oaWRlKGJsdXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAkZGF0ZXBpY2tlcjtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERhdGVwaWNrZXJGYWN0b3J5LmRlZmF1bHRzID0gZGVmYXVsdHM7XHJcbiAgICAgIHJldHVybiBEYXRlcGlja2VyRmFjdG9yeTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNEYXRlcGlja2VyJywgW1wiJHdpbmRvd1wiLCBcIiRwYXJzZVwiLCBcIiRxXCIsIFwiJGxvY2FsZVwiLCBcImRhdGVGaWx0ZXJcIiwgXCIkZGF0ZXBpY2tlclwiLCBcIiRkYXRlUGFyc2VyXCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHBhcnNlLCAkcSwgJGxvY2FsZSwgZGF0ZUZpbHRlciwgJGRhdGVwaWNrZXIsICRkYXRlUGFyc2VyLCAkdGltZW91dCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9ICRkYXRlcGlja2VyLmRlZmF1bHRzO1xyXG4gICAgdmFyIGlzTmF0aXZlID0gLyhpcChhfG8pZHxpcGhvbmV8YW5kcm9pZCkvaWcudGVzdCgkd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgdmFyIGlzTnVtZXJpYyA9IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjb250cm9sbGVyKSB7XHJcblxyXG4gICAgICAgIC8vIERpcmVjdGl2ZSBvcHRpb25zXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7c2NvcGU6IHNjb3BlLCBjb250cm9sbGVyOiBjb250cm9sbGVyfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWydwbGFjZW1lbnQnLCAnY29udGFpbmVyJywgJ2RlbGF5JywgJ3RyaWdnZXInLCAna2V5Ym9hcmQnLCAnaHRtbCcsICdhbmltYXRpb24nLCAndGVtcGxhdGUnLCAnYXV0b2Nsb3NlJywgJ2RhdGVUeXBlJywgJ2RhdGVGb3JtYXQnLCAnbW9kZWxEYXRlRm9ybWF0JywgJ2RheUZvcm1hdCcsICdzdHJpY3RGb3JtYXQnLCAnc3RhcnRXZWVrJywgJ3N0YXJ0RGF0ZScsICd1c2VOYXRpdmUnLCAnbGFuZycsICdzdGFydFZpZXcnLCAnbWluVmlldycsICdpY29uTGVmdCcsICdpY29uUmlnaHQnLCAnZGF5c09mV2Vla0Rpc2FibGVkJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSkgb3B0aW9uc1trZXldID0gYXR0cltrZXldO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBWaXNpYmlsaXR5IGJpbmRpbmcgc3VwcG9ydFxyXG4gICAgICAgIGF0dHIuYnNTaG93ICYmIHNjb3BlLiR3YXRjaChhdHRyLmJzU2hvdywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBpZighZGF0ZXBpY2tlciB8fCAhYW5ndWxhci5pc0RlZmluZWQobmV3VmFsdWUpKSByZXR1cm47XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzU3RyaW5nKG5ld1ZhbHVlKSkgbmV3VmFsdWUgPSAhIW5ld1ZhbHVlLm1hdGNoKCcsPyhkYXRlcGlja2VyKSw/Jyk7XHJcbiAgICAgICAgICBuZXdWYWx1ZSA9PT0gdHJ1ZSA/IGRhdGVwaWNrZXIuc2hvdygpIDogZGF0ZXBpY2tlci5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgZGF0ZXBpY2tlclxyXG4gICAgICAgIHZhciBkYXRlcGlja2VyID0gJGRhdGVwaWNrZXIoZWxlbWVudCwgY29udHJvbGxlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgb3B0aW9ucyA9IGRhdGVwaWNrZXIuJG9wdGlvbnM7XHJcbiAgICAgICAgLy8gU2V0IGV4cGVjdGVkIGlPUyBmb3JtYXRcclxuICAgICAgICBpZihpc05hdGl2ZSAmJiBvcHRpb25zLnVzZU5hdGl2ZSkgb3B0aW9ucy5kYXRlRm9ybWF0ID0gJ3l5eXktTU0tZGQnO1xyXG5cclxuICAgICAgICAvLyBPYnNlcnZlIGF0dHJpYnV0ZXMgZm9yIGNoYW5nZXNcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWydtaW5EYXRlJywgJ21heERhdGUnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJ2F0dHIuJG9ic2VydmUoJXMpJywga2V5LCBhdHRyW2tleV0pO1xyXG4gICAgICAgICAgYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSAmJiBhdHRyLiRvYnNlcnZlKGtleSwgZnVuY3Rpb24obmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCdhdHRyLiRvYnNlcnZlKCVzKT0lbycsIGtleSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICBpZihuZXdWYWx1ZSA9PT0gJ3RvZGF5Jykge1xyXG4gICAgICAgICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgZGF0ZXBpY2tlci4kb3B0aW9uc1trZXldID0gK25ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksIHRvZGF5LmdldE1vbnRoKCksIHRvZGF5LmdldERhdGUoKSArIChrZXkgPT09ICdtYXhEYXRlJyA/IDEgOiAwKSwgMCwgMCwgMCwgKGtleSA9PT0gJ21pbkRhdGUnID8gMCA6IC0xKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihhbmd1bGFyLmlzU3RyaW5nKG5ld1ZhbHVlKSAmJiBuZXdWYWx1ZS5tYXRjaCgvXlwiLitcIiQvKSkgeyAvLyBTdXBwb3J0IHt7IGRhdGVPYmogfX1cclxuICAgICAgICAgICAgICBkYXRlcGlja2VyLiRvcHRpb25zW2tleV0gPSArbmV3IERhdGUobmV3VmFsdWUuc3Vic3RyKDEsIG5ld1ZhbHVlLmxlbmd0aCAtIDIpKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGlzTnVtZXJpYyhuZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICBkYXRlcGlja2VyLiRvcHRpb25zW2tleV0gPSArbmV3IERhdGUocGFyc2VJbnQobmV3VmFsdWUsIDEwKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc1N0cmluZyhuZXdWYWx1ZSkgJiYgMCA9PT0gbmV3VmFsdWUubGVuZ3RoKSB7IC8vIFJlc2V0IGRhdGVcclxuICAgICAgICAgICAgICBkYXRlcGlja2VyLiRvcHRpb25zW2tleV0gPSBrZXkgPT09ICdtYXhEYXRlJyA/ICtJbmZpbml0eSA6IC1JbmZpbml0eTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBkYXRlcGlja2VyLiRvcHRpb25zW2tleV0gPSArbmV3IERhdGUobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEJ1aWxkIG9ubHkgaWYgZGlydHlcclxuICAgICAgICAgICAgIWlzTmFOKGRhdGVwaWNrZXIuJG9wdGlvbnNba2V5XSkgJiYgZGF0ZXBpY2tlci4kYnVpbGQoZmFsc2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFdhdGNoIG1vZGVsIGZvciBjaGFuZ2VzXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdNb2RlbCwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBkYXRlcGlja2VyLnVwZGF0ZShjb250cm9sbGVyLiRkYXRlVmFsdWUpO1xyXG4gICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBOb3JtYWxpemUgdW5kZWZpbmVkL251bGwvZW1wdHkgYXJyYXksXHJcbiAgICAgICAgLy8gc28gdGhhdCB3ZSBkb24ndCB0cmVhdCBjaGFuZ2luZyBmcm9tIHVuZGVmaW5lZC0+bnVsbCBhcyBhIGNoYW5nZS5cclxuICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVEYXRlUmFuZ2VzKHJhbmdlcykge1xyXG4gICAgICAgICAgaWYgKCFyYW5nZXMgfHwgIXJhbmdlcy5sZW5ndGgpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgcmV0dXJuIHJhbmdlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChhdHRyLmRpc2FibGVkRGF0ZXMpKSB7XHJcbiAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5kaXNhYmxlZERhdGVzLCBmdW5jdGlvbihkaXNhYmxlZFJhbmdlcywgcHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgICAgICBkaXNhYmxlZFJhbmdlcyA9IG5vcm1hbGl6ZURhdGVSYW5nZXMoZGlzYWJsZWRSYW5nZXMpO1xyXG4gICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gbm9ybWFsaXplRGF0ZVJhbmdlcyhwcmV2aW91c1ZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkaXNhYmxlZFJhbmdlcyAhPT0gcHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgICAgICAgIGRhdGVwaWNrZXIudXBkYXRlRGlzYWJsZWREYXRlcyhkaXNhYmxlZFJhbmdlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRhdGVQYXJzZXIgPSAkZGF0ZVBhcnNlcih7Zm9ybWF0OiBvcHRpb25zLmRhdGVGb3JtYXQsIGxhbmc6IG9wdGlvbnMubGFuZywgc3RyaWN0OiBvcHRpb25zLnN0cmljdEZvcm1hdH0pO1xyXG5cclxuICAgICAgICAvLyB2aWV3VmFsdWUgLT4gJHBhcnNlcnMgLT4gbW9kZWxWYWx1ZVxyXG4gICAgICAgIGNvbnRyb2xsZXIuJHBhcnNlcnMudW5zaGlmdChmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHBhcnNlcihcIiVzXCIpOiB2aWV3VmFsdWU9JW8nLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAvLyBOdWxsIHZhbHVlcyBzaG91bGQgY29ycmVjdGx5IHJlc2V0IHRoZSBtb2RlbCB2YWx1ZSAmIHZhbGlkaXR5XHJcbiAgICAgICAgICBpZighdmlld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZhbGlkaXR5KCdkYXRlJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciBwYXJzZWREYXRlID0gZGF0ZVBhcnNlci5wYXJzZSh2aWV3VmFsdWUsIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICBpZighcGFyc2VkRGF0ZSB8fCBpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kc2V0VmFsaWRpdHkoJ2RhdGUnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpc01pblZhbGlkID0gaXNOYU4oZGF0ZXBpY2tlci4kb3B0aW9ucy5taW5EYXRlKSB8fCBwYXJzZWREYXRlLmdldFRpbWUoKSA+PSBkYXRlcGlja2VyLiRvcHRpb25zLm1pbkRhdGU7XHJcbiAgICAgICAgICAgIHZhciBpc01heFZhbGlkID0gaXNOYU4oZGF0ZXBpY2tlci4kb3B0aW9ucy5tYXhEYXRlKSB8fCBwYXJzZWREYXRlLmdldFRpbWUoKSA8PSBkYXRlcGlja2VyLiRvcHRpb25zLm1heERhdGU7XHJcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gaXNNaW5WYWxpZCAmJiBpc01heFZhbGlkO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgnZGF0ZScsIGlzVmFsaWQpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgnbWluJywgaXNNaW5WYWxpZCk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZhbGlkaXR5KCdtYXgnLCBpc01heFZhbGlkKTtcclxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIG1vZGVsIHdoZW4gd2UgaGF2ZSBhIHZhbGlkIGRhdGVcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCkgY29udHJvbGxlci4kZGF0ZVZhbHVlID0gcGFyc2VkRGF0ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKG9wdGlvbnMuZGF0ZVR5cGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRmlsdGVyKHBhcnNlZERhdGUsIG9wdGlvbnMubW9kZWxEYXRlRm9ybWF0IHx8IG9wdGlvbnMuZGF0ZUZvcm1hdCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYob3B0aW9ucy5kYXRlVHlwZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYob3B0aW9ucy5kYXRlVHlwZSA9PT0gJ2lzbycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIG1vZGVsVmFsdWUgLT4gJGZvcm1hdHRlcnMgLT4gdmlld1ZhbHVlXHJcbiAgICAgICAgY29udHJvbGxlci4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJGZvcm1hdHRlcihcIiVzXCIpOiBtb2RlbFZhbHVlPSVvICglbyknLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIG1vZGVsVmFsdWUsIHR5cGVvZiBtb2RlbFZhbHVlKTtcclxuICAgICAgICAgIHZhciBkYXRlO1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtb2RlbFZhbHVlKSB8fCBtb2RlbFZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSBOYU47XHJcbiAgICAgICAgICB9IGVsc2UgaWYoYW5ndWxhci5pc0RhdGUobW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgZGF0ZSA9IG1vZGVsVmFsdWU7XHJcbiAgICAgICAgICB9IGVsc2UgaWYob3B0aW9ucy5kYXRlVHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZGF0ZSA9IGRhdGVQYXJzZXIucGFyc2UobW9kZWxWYWx1ZSwgbnVsbCwgb3B0aW9ucy5tb2RlbERhdGVGb3JtYXQpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gU2V0dXAgZGVmYXVsdCB2YWx1ZT9cclxuICAgICAgICAgIC8vIGlmKGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgLy8gICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgLy8gICBkYXRlID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgdG9kYXkuZ2V0RGF0ZSgpLCAwLCAwLCAwLCAwKTtcclxuICAgICAgICAgIC8vIH1cclxuICAgICAgICAgIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSA9IGRhdGU7XHJcbiAgICAgICAgICByZXR1cm4gY29udHJvbGxlci4kZGF0ZVZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyB2aWV3VmFsdWUgLT4gZWxlbWVudFxyXG4gICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckcmVuZGVyKFwiJXNcIik6IHZpZXdWYWx1ZT0lbycsIGVsZW1lbnQuYXR0cignbmctbW9kZWwnKSwgY29udHJvbGxlci4kdmlld1ZhbHVlKTtcclxuICAgICAgICAgIGVsZW1lbnQudmFsKCFjb250cm9sbGVyLiRkYXRlVmFsdWUgfHwgaXNOYU4oY29udHJvbGxlci4kZGF0ZVZhbHVlLmdldFRpbWUoKSkgPyAnJyA6IGRhdGVGaWx0ZXIoY29udHJvbGxlci4kZGF0ZVZhbHVlLCBvcHRpb25zLmRhdGVGb3JtYXQpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZihkYXRlcGlja2VyKSBkYXRlcGlja2VyLmRlc3Ryb3koKTtcclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgZGF0ZXBpY2tlciA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSlcclxuXHJcbiAgLnByb3ZpZGVyKCdkYXRlcGlja2VyVmlld3MnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBkYXlGb3JtYXQ6ICdkZCcsXHJcbiAgICAgIGRheVNwbGl0OiA3XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNwbGl0IGFycmF5IGludG8gc21hbGxlciBhcnJheXNcclxuICAgIGZ1bmN0aW9uIHNwbGl0KGFyciwgc2l6ZSkge1xyXG4gICAgICB2YXIgYXJyYXlzID0gW107XHJcbiAgICAgIHdoaWxlKGFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgYXJyYXlzLnB1c2goYXJyLnNwbGljZSgwLCBzaXplKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGFycmF5cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb2R1bHVzIG9wZXJhdG9yXHJcbiAgICBmdW5jdGlvbiBtb2QobiwgbSkge1xyXG4gICAgICByZXR1cm4gKChuICUgbSkgKyBtKSAlIG07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJGxvY2FsZVwiLCBcIiRzY2VcIiwgXCJkYXRlRmlsdGVyXCIsIGZ1bmN0aW9uKCRsb2NhbGUsICRzY2UsIGRhdGVGaWx0ZXIpIHtcclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihwaWNrZXIpIHtcclxuXHJcbiAgICAgICAgdmFyIHNjb3BlID0gcGlja2VyLiRzY29wZTtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHBpY2tlci4kb3B0aW9ucztcclxuXHJcbiAgICAgICAgdmFyIHdlZWtEYXlzTWluID0gJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUREFZO1xyXG4gICAgICAgIHZhciB3ZWVrRGF5c0xhYmVscyA9IHdlZWtEYXlzTWluLnNsaWNlKG9wdGlvbnMuc3RhcnRXZWVrKS5jb25jYXQod2Vla0RheXNNaW4uc2xpY2UoMCwgb3B0aW9ucy5zdGFydFdlZWspKTtcclxuICAgICAgICB2YXIgd2Vla0RheXNMYWJlbHNIdG1sID0gJHNjZS50cnVzdEFzSHRtbCgnPHRoIGNsYXNzPVwiZG93IHRleHQtY2VudGVyXCI+JyArIHdlZWtEYXlzTGFiZWxzLmpvaW4oJzwvdGg+PHRoIGNsYXNzPVwiZG93IHRleHQtY2VudGVyXCI+JykgKyAnPC90aD4nKTtcclxuXHJcbiAgICAgICAgdmFyIHN0YXJ0RGF0ZSA9IHBpY2tlci4kZGF0ZSB8fCAob3B0aW9ucy5zdGFydERhdGUgPyBuZXcgRGF0ZShvcHRpb25zLnN0YXJ0RGF0ZSkgOiBuZXcgRGF0ZSgpKTtcclxuICAgICAgICB2YXIgdmlld0RhdGUgPSB7eWVhcjogc3RhcnREYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBzdGFydERhdGUuZ2V0TW9udGgoKSwgZGF0ZTogc3RhcnREYXRlLmdldERhdGUoKX07XHJcbiAgICAgICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gc3RhcnREYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2ZTQ7XHJcblxyXG4gICAgICAgIHZhciB2aWV3cyA9IFt7XHJcbiAgICAgICAgICAgIGZvcm1hdDogb3B0aW9ucy5kYXlGb3JtYXQsXHJcbiAgICAgICAgICAgIHNwbGl0OiA3LFxyXG4gICAgICAgICAgICBzdGVwczogeyBtb250aDogMSB9LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKGRhdGUsIGZvcmNlKSB7XHJcbiAgICAgICAgICAgICAgaWYoIXRoaXMuYnVpbHQgfHwgZm9yY2UgfHwgZGF0ZS5nZXRGdWxsWWVhcigpICE9PSB2aWV3RGF0ZS55ZWFyIHx8IGRhdGUuZ2V0TW9udGgoKSAhPT0gdmlld0RhdGUubW9udGgpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHZpZXdEYXRlLCB7eWVhcjogcGlja2VyLiRkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBwaWNrZXIuJGRhdGUuZ2V0TW9udGgoKSwgZGF0ZTogcGlja2VyLiRkYXRlLmdldERhdGUoKX0pO1xyXG4gICAgICAgICAgICAgICAgcGlja2VyLiRidWlsZCgpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZihkYXRlLmdldERhdGUoKSAhPT0gdmlld0RhdGUuZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmlld0RhdGUuZGF0ZSA9IHBpY2tlci4kZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBwaWNrZXIuJHVwZGF0ZVNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBidWlsZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGZpcnN0RGF5T2ZNb250aCA9IG5ldyBEYXRlKHZpZXdEYXRlLnllYXIsIHZpZXdEYXRlLm1vbnRoLCAxKSwgZmlyc3REYXlPZk1vbnRoT2Zmc2V0ID0gZmlyc3REYXlPZk1vbnRoLmdldFRpbWV6b25lT2Zmc2V0KCk7XHJcbiAgICAgICAgICAgICAgdmFyIGZpcnN0RGF0ZSA9IG5ldyBEYXRlKCtmaXJzdERheU9mTW9udGggLSBtb2QoZmlyc3REYXlPZk1vbnRoLmdldERheSgpIC0gb3B0aW9ucy5zdGFydFdlZWssIDcpICogODY0ZTUpLCBmaXJzdERhdGVPZmZzZXQgPSBmaXJzdERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcclxuICAgICAgICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICAgIC8vIEhhbmRsZSBkYXlsaWdodCB0aW1lIHN3aXRjaFxyXG4gICAgICAgICAgICAgIGlmKGZpcnN0RGF0ZU9mZnNldCAhPT0gZmlyc3REYXlPZk1vbnRoT2Zmc2V0KSBmaXJzdERhdGUgPSBuZXcgRGF0ZSgrZmlyc3REYXRlICsgKGZpcnN0RGF0ZU9mZnNldCAtIGZpcnN0RGF5T2ZNb250aE9mZnNldCkgKiA2MGUzKTtcclxuICAgICAgICAgICAgICB2YXIgZGF5cyA9IFtdLCBkYXk7XHJcbiAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IDQyOyBpKyspIHsgLy8gPCA3ICogNlxyXG4gICAgICAgICAgICAgICAgZGF5ID0gbmV3IERhdGUoZmlyc3REYXRlLmdldEZ1bGxZZWFyKCksIGZpcnN0RGF0ZS5nZXRNb250aCgpLCBmaXJzdERhdGUuZ2V0RGF0ZSgpICsgaSk7XHJcbiAgICAgICAgICAgICAgICBkYXlzLnB1c2goe2RhdGU6IGRheSwgaXNUb2RheTogZGF5LnRvRGF0ZVN0cmluZygpID09PSB0b2RheSwgbGFiZWw6IGRhdGVGaWx0ZXIoZGF5LCB0aGlzLmZvcm1hdCksIHNlbGVjdGVkOiBwaWNrZXIuJGRhdGUgJiYgdGhpcy5pc1NlbGVjdGVkKGRheSksIG11dGVkOiBkYXkuZ2V0TW9udGgoKSAhPT0gdmlld0RhdGUubW9udGgsIGRpc2FibGVkOiB0aGlzLmlzRGlzYWJsZWQoZGF5KX0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBzY29wZS50aXRsZSA9IGRhdGVGaWx0ZXIoZmlyc3REYXlPZk1vbnRoLCAnTU1NTSB5eXl5Jyk7XHJcbiAgICAgICAgICAgICAgc2NvcGUuc2hvd0xhYmVscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgc2NvcGUubGFiZWxzID0gd2Vla0RheXNMYWJlbHNIdG1sO1xyXG4gICAgICAgICAgICAgIHNjb3BlLnJvd3MgPSBzcGxpdChkYXlzLCB0aGlzLnNwbGl0KTtcclxuICAgICAgICAgICAgICB0aGlzLmJ1aWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNTZWxlY3RlZDogZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBwaWNrZXIuJGRhdGUgJiYgZGF0ZS5nZXRGdWxsWWVhcigpID09PSBwaWNrZXIuJGRhdGUuZ2V0RnVsbFllYXIoKSAmJiBkYXRlLmdldE1vbnRoKCkgPT09IHBpY2tlci4kZGF0ZS5nZXRNb250aCgpICYmIGRhdGUuZ2V0RGF0ZSgpID09PSBwaWNrZXIuJGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc0Rpc2FibGVkOiBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHRpbWUgPSBkYXRlLmdldFRpbWUoKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gRGlzYWJsZWQgYmVjYXVzZSBvZiBtaW4vbWF4IGRhdGUuXHJcbiAgICAgICAgICAgICAgaWYgKHRpbWUgPCBvcHRpb25zLm1pbkRhdGUgfHwgdGltZSA+IG9wdGlvbnMubWF4RGF0ZSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgIC8vIERpc2FibGVkIGR1ZSB0byBiZWluZyBhIGRpc2FibGVkIGRheSBvZiB0aGUgd2Vla1xyXG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLmRheXNPZldlZWtEaXNhYmxlZC5pbmRleE9mKGRhdGUuZ2V0RGF5KCkpICE9PSAtMSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgIC8vIERpc2FibGVkIGJlY2F1c2Ugb2YgZGlzYWJsZWQgZGF0ZSByYW5nZS5cclxuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kaXNhYmxlZERhdGVSYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5kaXNhYmxlZERhdGVSYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPj0gb3B0aW9ucy5kaXNhYmxlZERhdGVSYW5nZXNbaV0uc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGltZSA8PSBvcHRpb25zLmRpc2FibGVkRGF0ZVJhbmdlc1tpXS5lbmQpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGlzYWJsZWREYXRlUmFuZ2VzIGlzIGV4cGVjdGVkIHRvIGJlIHNvcnRlZCwgc28gaWYgdGltZSA+PSBzdGFydCxcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBrbm93IGl0J3Mgbm90IGRpc2FibGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbktleURvd246IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgICAgIHZhciBhY3R1YWxUaW1lID0gcGlja2VyLiRkYXRlLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICB2YXIgbmV3RGF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDM3KSBuZXdEYXRlID0gbmV3IERhdGUoYWN0dWFsVGltZSAtIDEgKiA4NjRlNSk7XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gMzgpIG5ld0RhdGUgPSBuZXcgRGF0ZShhY3R1YWxUaW1lIC0gNyAqIDg2NGU1KTtcclxuICAgICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSAzOSkgbmV3RGF0ZSA9IG5ldyBEYXRlKGFjdHVhbFRpbWUgKyAxICogODY0ZTUpO1xyXG4gICAgICAgICAgICAgIGVsc2UgaWYoZXZ0LmtleUNvZGUgPT09IDQwKSBuZXdEYXRlID0gbmV3IERhdGUoYWN0dWFsVGltZSArIDcgKiA4NjRlNSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKG5ld0RhdGUpKSBwaWNrZXIuc2VsZWN0KG5ld0RhdGUsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtb250aCcsXHJcbiAgICAgICAgICAgIGZvcm1hdDogJ01NTScsXHJcbiAgICAgICAgICAgIHNwbGl0OiA0LFxyXG4gICAgICAgICAgICBzdGVwczogeyB5ZWFyOiAxIH0sXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oZGF0ZSwgZm9yY2UpIHtcclxuICAgICAgICAgICAgICBpZighdGhpcy5idWlsdCB8fCBkYXRlLmdldEZ1bGxZZWFyKCkgIT09IHZpZXdEYXRlLnllYXIpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHZpZXdEYXRlLCB7eWVhcjogcGlja2VyLiRkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBwaWNrZXIuJGRhdGUuZ2V0TW9udGgoKSwgZGF0ZTogcGlja2VyLiRkYXRlLmdldERhdGUoKX0pO1xyXG4gICAgICAgICAgICAgICAgcGlja2VyLiRidWlsZCgpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZihkYXRlLmdldE1vbnRoKCkgIT09IHZpZXdEYXRlLm1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge21vbnRoOiBwaWNrZXIuJGRhdGUuZ2V0TW9udGgoKSwgZGF0ZTogcGlja2VyLiRkYXRlLmdldERhdGUoKX0pO1xyXG4gICAgICAgICAgICAgICAgcGlja2VyLiR1cGRhdGVTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHZhciBmaXJzdE1vbnRoID0gbmV3IERhdGUodmlld0RhdGUueWVhciwgMCwgMSk7XHJcbiAgICAgICAgICAgICAgdmFyIG1vbnRocyA9IFtdLCBtb250aDtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG1vbnRoID0gbmV3IERhdGUodmlld0RhdGUueWVhciwgaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBtb250aHMucHVzaCh7ZGF0ZTogbW9udGgsIGxhYmVsOiBkYXRlRmlsdGVyKG1vbnRoLCB0aGlzLmZvcm1hdCksIHNlbGVjdGVkOiBwaWNrZXIuJGlzU2VsZWN0ZWQobW9udGgpLCBkaXNhYmxlZDogdGhpcy5pc0Rpc2FibGVkKG1vbnRoKX0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBzY29wZS50aXRsZSA9IGRhdGVGaWx0ZXIobW9udGgsICd5eXl5Jyk7XHJcbiAgICAgICAgICAgICAgc2NvcGUuc2hvd0xhYmVscyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIHNjb3BlLnJvd3MgPSBzcGxpdChtb250aHMsIHRoaXMuc3BsaXQpO1xyXG4gICAgICAgICAgICAgIHRoaXMuYnVpbHQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc1NlbGVjdGVkOiBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHBpY2tlci4kZGF0ZSAmJiBkYXRlLmdldEZ1bGxZZWFyKCkgPT09IHBpY2tlci4kZGF0ZS5nZXRGdWxsWWVhcigpICYmIGRhdGUuZ2V0TW9udGgoKSA9PT0gcGlja2VyLiRkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzRGlzYWJsZWQ6IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgICAgICB2YXIgbGFzdERhdGUgPSArbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkgKyAxLCAwKTtcclxuICAgICAgICAgICAgICByZXR1cm4gbGFzdERhdGUgPCBvcHRpb25zLm1pbkRhdGUgfHwgZGF0ZS5nZXRUaW1lKCkgPiBvcHRpb25zLm1heERhdGU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAgICAgdmFyIGFjdHVhbE1vbnRoID0gcGlja2VyLiRkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgICAgdmFyIG5ld0RhdGUgPSBuZXcgRGF0ZShwaWNrZXIuJGRhdGUpO1xyXG5cclxuICAgICAgICAgICAgICBpZihldnQua2V5Q29kZSA9PT0gMzcpIG5ld0RhdGUuc2V0TW9udGgoYWN0dWFsTW9udGggLSAxKTtcclxuICAgICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSAzOCkgbmV3RGF0ZS5zZXRNb250aChhY3R1YWxNb250aCAtIDQpO1xyXG4gICAgICAgICAgICAgIGVsc2UgaWYoZXZ0LmtleUNvZGUgPT09IDM5KSBuZXdEYXRlLnNldE1vbnRoKGFjdHVhbE1vbnRoICsgMSk7XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gNDApIG5ld0RhdGUuc2V0TW9udGgoYWN0dWFsTW9udGggKyA0KTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzYWJsZWQobmV3RGF0ZSkpIHBpY2tlci5zZWxlY3QobmV3RGF0ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgbmFtZTogJ3llYXInLFxyXG4gICAgICAgICAgICBmb3JtYXQ6ICd5eXl5JyxcclxuICAgICAgICAgICAgc3BsaXQ6IDQsXHJcbiAgICAgICAgICAgIHN0ZXBzOiB7IHllYXI6IDEyIH0sXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oZGF0ZSwgZm9yY2UpIHtcclxuICAgICAgICAgICAgICBpZighdGhpcy5idWlsdCB8fCBmb3JjZSB8fCBwYXJzZUludChkYXRlLmdldEZ1bGxZZWFyKCkvMjAsIDEwKSAhPT0gcGFyc2VJbnQodmlld0RhdGUueWVhci8yMCwgMTApKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge3llYXI6IHBpY2tlci4kZGF0ZS5nZXRGdWxsWWVhcigpLCBtb250aDogcGlja2VyLiRkYXRlLmdldE1vbnRoKCksIGRhdGU6IHBpY2tlci4kZGF0ZS5nZXREYXRlKCl9KTtcclxuICAgICAgICAgICAgICAgIHBpY2tlci4kYnVpbGQoKTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYoZGF0ZS5nZXRGdWxsWWVhcigpICE9PSB2aWV3RGF0ZS55ZWFyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge3llYXI6IHBpY2tlci4kZGF0ZS5nZXRGdWxsWWVhcigpLCBtb250aDogcGlja2VyLiRkYXRlLmdldE1vbnRoKCksIGRhdGU6IHBpY2tlci4kZGF0ZS5nZXREYXRlKCl9KTtcclxuICAgICAgICAgICAgICAgIHBpY2tlci4kdXBkYXRlU2VsZWN0ZWQoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJ1aWxkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICB2YXIgZmlyc3RZZWFyID0gdmlld0RhdGUueWVhciAtIHZpZXdEYXRlLnllYXIgJSAodGhpcy5zcGxpdCAqIDMpO1xyXG4gICAgICAgICAgICAgIHZhciB5ZWFycyA9IFtdLCB5ZWFyO1xyXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgeWVhciA9IG5ldyBEYXRlKGZpcnN0WWVhciArIGksIDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgeWVhcnMucHVzaCh7ZGF0ZTogeWVhciwgbGFiZWw6IGRhdGVGaWx0ZXIoeWVhciwgdGhpcy5mb3JtYXQpLCBzZWxlY3RlZDogcGlja2VyLiRpc1NlbGVjdGVkKHllYXIpLCBkaXNhYmxlZDogdGhpcy5pc0Rpc2FibGVkKHllYXIpfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHNjb3BlLnRpdGxlID0geWVhcnNbMF0ubGFiZWwgKyAnLScgKyB5ZWFyc1t5ZWFycy5sZW5ndGggLSAxXS5sYWJlbDtcclxuICAgICAgICAgICAgICBzY29wZS5zaG93TGFiZWxzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgc2NvcGUucm93cyA9IHNwbGl0KHllYXJzLCB0aGlzLnNwbGl0KTtcclxuICAgICAgICAgICAgICB0aGlzLmJ1aWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNTZWxlY3RlZDogZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBwaWNrZXIuJGRhdGUgJiYgZGF0ZS5nZXRGdWxsWWVhcigpID09PSBwaWNrZXIuJGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNEaXNhYmxlZDogZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgICAgIHZhciBsYXN0RGF0ZSA9ICtuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCkgKyAxLCAwLCAwKTtcclxuICAgICAgICAgICAgICByZXR1cm4gbGFzdERhdGUgPCBvcHRpb25zLm1pbkRhdGUgfHwgZGF0ZS5nZXRUaW1lKCkgPiBvcHRpb25zLm1heERhdGU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAgICAgdmFyIGFjdHVhbFllYXIgPSBwaWNrZXIuJGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgICAgbmV3RGF0ZSA9IG5ldyBEYXRlKHBpY2tlci4kZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmKGV2dC5rZXlDb2RlID09PSAzNykgbmV3RGF0ZS5zZXRZZWFyKGFjdHVhbFllYXIgLSAxKTtcclxuICAgICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSAzOCkgbmV3RGF0ZS5zZXRZZWFyKGFjdHVhbFllYXIgLSA0KTtcclxuICAgICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSAzOSkgbmV3RGF0ZS5zZXRZZWFyKGFjdHVhbFllYXIgKyAxKTtcclxuICAgICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSA0MCkgbmV3RGF0ZS5zZXRZZWFyKGFjdHVhbFllYXIgKyA0KTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzYWJsZWQobmV3RGF0ZSkpIHBpY2tlci5zZWxlY3QobmV3RGF0ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1dO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmlld3M6IG9wdGlvbnMubWluVmlldyA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZpZXdzLCBvcHRpb25zLm1pblZpZXcpIDogdmlld3MsXHJcbiAgICAgICAgICB2aWV3RGF0ZTogdmlld0RhdGVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgfTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSk7XHJcblxyXG4vLyBTb3VyY2U6IGRyb3Bkb3duLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5kcm9wZG93bicsIFsnbWdjcmVhLm5nU3RyYXAudG9vbHRpcCddKVxyXG5cclxuICAucHJvdmlkZXIoJyRkcm9wZG93bicsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICBwcmVmaXhDbGFzczogJ2Ryb3Bkb3duJyxcclxuICAgICAgcGxhY2VtZW50OiAnYm90dG9tLWxlZnQnLFxyXG4gICAgICB0ZW1wbGF0ZTogJ2Ryb3Bkb3duL2Ryb3Bkb3duLnRwbC5odG1sJyxcclxuICAgICAgdHJpZ2dlcjogJ2NsaWNrJyxcclxuICAgICAgY29udGFpbmVyOiBmYWxzZSxcclxuICAgICAga2V5Ym9hcmQ6IHRydWUsXHJcbiAgICAgIGh0bWw6IGZhbHNlLFxyXG4gICAgICBkZWxheTogMFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkd2luZG93XCIsIFwiJHJvb3RTY29wZVwiLCBcIiR0b29sdGlwXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRyb290U2NvcGUsICR0b29sdGlwKSB7XHJcblxyXG4gICAgICB2YXIgYm9keUVsID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cuZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgIHZhciBtYXRjaGVzU2VsZWN0b3IgPSBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yO1xyXG5cclxuICAgICAgZnVuY3Rpb24gRHJvcGRvd25GYWN0b3J5KGVsZW1lbnQsIGNvbmZpZykge1xyXG5cclxuICAgICAgICB2YXIgJGRyb3Bkb3duID0ge307XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiB2YXJzXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcbiAgICAgICAgdmFyIHNjb3BlID0gJGRyb3Bkb3duLiRzY29wZSA9IG9wdGlvbnMuc2NvcGUgJiYgb3B0aW9ucy5zY29wZS4kbmV3KCkgfHwgJHJvb3RTY29wZS4kbmV3KCk7XHJcblxyXG4gICAgICAgICRkcm9wZG93biA9ICR0b29sdGlwKGVsZW1lbnQsIG9wdGlvbnMpO1xyXG4gICAgICAgIHZhciBwYXJlbnRFbCA9IGVsZW1lbnQucGFyZW50KCk7XHJcblxyXG4gICAgICAgIC8vIFByb3RlY3RlZCBtZXRob2RzXHJcblxyXG4gICAgICAgICRkcm9wZG93bi4kb25LZXlEb3duID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICBpZiAoIS8oMzh8NDApLy50ZXN0KGV2dC5rZXlDb2RlKSkgcmV0dXJuO1xyXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgLy8gUmV0cmlldmUgZm9jdXNlZCBpbmRleFxyXG4gICAgICAgICAgdmFyIGl0ZW1zID0gYW5ndWxhci5lbGVtZW50KCRkcm9wZG93bi4kZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCdsaTpub3QoLmRpdmlkZXIpIGEnKSk7XHJcbiAgICAgICAgICBpZighaXRlbXMubGVuZ3RoKSByZXR1cm47XHJcbiAgICAgICAgICB2YXIgaW5kZXg7XHJcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uKGVsLCBpKSB7XHJcbiAgICAgICAgICAgIGlmKG1hdGNoZXNTZWxlY3RvciAmJiBtYXRjaGVzU2VsZWN0b3IuY2FsbChlbCwgJzpmb2N1cycpKSBpbmRleCA9IGk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBOYXZpZ2F0ZSB3aXRoIGtleWJvYXJkXHJcbiAgICAgICAgICBpZihldnQua2V5Q29kZSA9PT0gMzggJiYgaW5kZXggPiAwKSBpbmRleC0tO1xyXG4gICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gNDAgJiYgaW5kZXggPCBpdGVtcy5sZW5ndGggLSAxKSBpbmRleCsrO1xyXG4gICAgICAgICAgZWxzZSBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGluZGV4KSkgaW5kZXggPSAwO1xyXG4gICAgICAgICAgaXRlbXMuZXEoaW5kZXgpWzBdLmZvY3VzKCk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIE92ZXJyaWRlc1xyXG5cclxuICAgICAgICB2YXIgc2hvdyA9ICRkcm9wZG93bi5zaG93O1xyXG4gICAgICAgICRkcm9wZG93bi5zaG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzaG93KCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmtleWJvYXJkICYmICRkcm9wZG93bi4kZWxlbWVudC5vbigna2V5ZG93bicsICRkcm9wZG93bi4kb25LZXlEb3duKTtcclxuICAgICAgICAgICAgYm9keUVsLm9uKCdjbGljaycsIG9uQm9keUNsaWNrKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcGFyZW50RWwuaGFzQ2xhc3MoJ2Ryb3Bkb3duJykgJiYgcGFyZW50RWwuYWRkQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgaGlkZSA9ICRkcm9wZG93bi5oaWRlO1xyXG4gICAgICAgICRkcm9wZG93bi5oaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBvcHRpb25zLmtleWJvYXJkICYmICRkcm9wZG93bi4kZWxlbWVudC5vZmYoJ2tleWRvd24nLCAkZHJvcGRvd24uJG9uS2V5RG93bik7XHJcbiAgICAgICAgICBib2R5RWwub2ZmKCdjbGljaycsIG9uQm9keUNsaWNrKTtcclxuICAgICAgICAgIHBhcmVudEVsLmhhc0NsYXNzKCdkcm9wZG93bicpICYmIHBhcmVudEVsLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICBoaWRlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25Cb2R5Q2xpY2soZXZ0KSB7XHJcbiAgICAgICAgICBpZihldnQudGFyZ2V0ID09PSBlbGVtZW50WzBdKSByZXR1cm47XHJcbiAgICAgICAgICByZXR1cm4gZXZ0LnRhcmdldCAhPT0gZWxlbWVudFswXSAmJiAkZHJvcGRvd24uaGlkZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICRkcm9wZG93bjtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBEcm9wZG93bkZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzRHJvcGRvd24nLCBbXCIkd2luZG93XCIsIFwiJHNjZVwiLCBcIiRkcm9wZG93blwiLCBmdW5jdGlvbigkd2luZG93LCAkc2NlLCAkZHJvcGRvd24pIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgdHJhbnNjbHVzaW9uKSB7XHJcblxyXG4gICAgICAgIC8vIERpcmVjdGl2ZSBvcHRpb25zXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7c2NvcGU6IHNjb3BlfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWydwbGFjZW1lbnQnLCAnY29udGFpbmVyJywgJ2RlbGF5JywgJ3RyaWdnZXInLCAna2V5Ym9hcmQnLCAnaHRtbCcsICdhbmltYXRpb24nLCAndGVtcGxhdGUnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgYW4gb2JqZWN0XHJcbiAgICAgICAgYXR0ci5ic0Ryb3Bkb3duICYmIHNjb3BlLiR3YXRjaChhdHRyLmJzRHJvcGRvd24sIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgc2NvcGUuY29udGVudCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBWaXNpYmlsaXR5IGJpbmRpbmcgc3VwcG9ydFxyXG4gICAgICAgIGF0dHIuYnNTaG93ICYmIHNjb3BlLiR3YXRjaChhdHRyLmJzU2hvdywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBpZighZHJvcGRvd24gfHwgIWFuZ3VsYXIuaXNEZWZpbmVkKG5ld1ZhbHVlKSkgcmV0dXJuO1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc1N0cmluZyhuZXdWYWx1ZSkpIG5ld1ZhbHVlID0gISFuZXdWYWx1ZS5tYXRjaCgnLD8oZHJvcGRvd24pLD8nKTtcclxuICAgICAgICAgIG5ld1ZhbHVlID09PSB0cnVlID8gZHJvcGRvd24uc2hvdygpIDogZHJvcGRvd24uaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGRyb3Bkb3duXHJcbiAgICAgICAgdmFyIGRyb3Bkb3duID0gJGRyb3Bkb3duKGVsZW1lbnQsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZHJvcGRvd24pIGRyb3Bkb3duLmRlc3Ryb3koKTtcclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgZHJvcGRvd24gPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxuLy8gU291cmNlOiBkYXRlLXBhcnNlci5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kYXRlUGFyc2VyJywgW10pXHJcblxyXG4ucHJvdmlkZXIoJyRkYXRlUGFyc2VyJywgW1wiJGxvY2FsZVByb3ZpZGVyXCIsIGZ1bmN0aW9uKCRsb2NhbGVQcm92aWRlcikge1xyXG5cclxuICB2YXIgcHJvdG8gPSBEYXRlLnByb3RvdHlwZTtcclxuXHJcbiAgZnVuY3Rpb24gbm9vcCgpIHtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzTnVtZXJpYyhuKSB7XHJcbiAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQobikpICYmIGlzRmluaXRlKG4pO1xyXG4gIH1cclxuXHJcbiAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgIGZvcm1hdDogJ3Nob3J0RGF0ZScsXHJcbiAgICBzdHJpY3Q6IGZhbHNlXHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gW1wiJGxvY2FsZVwiLCBcImRhdGVGaWx0ZXJcIiwgZnVuY3Rpb24oJGxvY2FsZSwgZGF0ZUZpbHRlcikge1xyXG5cclxuICAgIHZhciBEYXRlUGFyc2VyRmFjdG9yeSA9IGZ1bmN0aW9uKGNvbmZpZykge1xyXG5cclxuICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcblxyXG4gICAgICB2YXIgJGRhdGVQYXJzZXIgPSB7fTtcclxuXHJcbiAgICAgIHZhciByZWdFeHBNYXAgPSB7XHJcbiAgICAgICAgJ3NzcycgICA6ICdbMC05XXszfScsXHJcbiAgICAgICAgJ3NzJyAgICA6ICdbMC01XVswLTldJyxcclxuICAgICAgICAncycgICAgIDogb3B0aW9ucy5zdHJpY3QgPyAnWzEtNV0/WzAtOV0nIDogJ1swLTldfFswLTVdWzAtOV0nLFxyXG4gICAgICAgICdtbScgICAgOiAnWzAtNV1bMC05XScsXHJcbiAgICAgICAgJ20nICAgICA6IG9wdGlvbnMuc3RyaWN0ID8gJ1sxLTVdP1swLTldJyA6ICdbMC05XXxbMC01XVswLTldJyxcclxuICAgICAgICAnSEgnICAgIDogJ1swMV1bMC05XXwyWzAtM10nLFxyXG4gICAgICAgICdIJyAgICAgOiBvcHRpb25zLnN0cmljdCA/ICcxP1swLTldfDJbMC0zXScgOiAnWzAxXT9bMC05XXwyWzAtM10nLFxyXG4gICAgICAgICdoaCcgICAgOiAnWzBdWzEtOV18WzFdWzAxMl0nLFxyXG4gICAgICAgICdoJyAgICAgOiBvcHRpb25zLnN0cmljdCA/ICdbMS05XXwxWzAxMl0nIDogJzA/WzEtOV18MVswMTJdJyxcclxuICAgICAgICAnYScgICAgIDogJ0FNfFBNJyxcclxuICAgICAgICAnRUVFRScgIDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLkRBWS5qb2luKCd8JyksXHJcbiAgICAgICAgJ0VFRScgICA6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWS5qb2luKCd8JyksXHJcbiAgICAgICAgJ2RkJyAgICA6ICcwWzEtOV18WzEyXVswLTldfDNbMDFdJyxcclxuICAgICAgICAnZCcgICAgIDogb3B0aW9ucy5zdHJpY3QgPyAnWzEtOV18WzEtMl1bMC05XXwzWzAxXScgOiAnMD9bMS05XXxbMS0yXVswLTldfDNbMDFdJyxcclxuICAgICAgICAnTU1NTScgIDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLk1PTlRILmpvaW4oJ3wnKSxcclxuICAgICAgICAnTU1NJyAgIDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguam9pbignfCcpLFxyXG4gICAgICAgICdNTScgICAgOiAnMFsxLTldfDFbMDEyXScsXHJcbiAgICAgICAgJ00nICAgICA6IG9wdGlvbnMuc3RyaWN0ID8gJ1sxLTldfDFbMDEyXScgOiAnMD9bMS05XXwxWzAxMl0nLFxyXG4gICAgICAgICd5eXl5JyAgOiAnWzFdezF9WzAtOV17M318WzJdezF9WzAtOV17M30nLFxyXG4gICAgICAgICd5eScgICAgOiAnWzAtOV17Mn0nLFxyXG4gICAgICAgICd5JyAgICAgOiBvcHRpb25zLnN0cmljdCA/ICctPygwfFsxLTldWzAtOV17MCwzfSknIDogJy0/MCpbMC05XXsxLDR9JyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBzZXRGbk1hcCA9IHtcclxuICAgICAgICAnc3NzJyAgIDogcHJvdG8uc2V0TWlsbGlzZWNvbmRzLFxyXG4gICAgICAgICdzcycgICAgOiBwcm90by5zZXRTZWNvbmRzLFxyXG4gICAgICAgICdzJyAgICAgOiBwcm90by5zZXRTZWNvbmRzLFxyXG4gICAgICAgICdtbScgICAgOiBwcm90by5zZXRNaW51dGVzLFxyXG4gICAgICAgICdtJyAgICAgOiBwcm90by5zZXRNaW51dGVzLFxyXG4gICAgICAgICdISCcgICAgOiBwcm90by5zZXRIb3VycyxcclxuICAgICAgICAnSCcgICAgIDogcHJvdG8uc2V0SG91cnMsXHJcbiAgICAgICAgJ2hoJyAgICA6IHByb3RvLnNldEhvdXJzLFxyXG4gICAgICAgICdoJyAgICAgOiBwcm90by5zZXRIb3VycyxcclxuICAgICAgICAnRUVFRScgIDogbm9vcCxcclxuICAgICAgICAnRUVFJyAgIDogbm9vcCxcclxuICAgICAgICAnZGQnICAgIDogcHJvdG8uc2V0RGF0ZSxcclxuICAgICAgICAnZCcgICAgIDogcHJvdG8uc2V0RGF0ZSxcclxuICAgICAgICAnYScgICAgIDogZnVuY3Rpb24odmFsdWUpIHsgdmFyIGhvdXJzID0gdGhpcy5nZXRIb3VycygpOyByZXR1cm4gdGhpcy5zZXRIb3Vycyh2YWx1ZS5tYXRjaCgvcG0vaSkgPyBob3VycyArIDEyIDogaG91cnMpOyB9LFxyXG4gICAgICAgICdNTU1NJyAgOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdGhpcy5zZXRNb250aCgkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguaW5kZXhPZih2YWx1ZSkpOyB9LFxyXG4gICAgICAgICdNTU0nICAgOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdGhpcy5zZXRNb250aCgkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlRNT05USC5pbmRleE9mKHZhbHVlKSk7IH0sXHJcbiAgICAgICAgJ01NJyAgICA6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB0aGlzLnNldE1vbnRoKDEgKiB2YWx1ZSAtIDEpOyB9LFxyXG4gICAgICAgICdNJyAgICAgOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdGhpcy5zZXRNb250aCgxICogdmFsdWUgLSAxKTsgfSxcclxuICAgICAgICAneXl5eScgIDogcHJvdG8uc2V0RnVsbFllYXIsXHJcbiAgICAgICAgJ3l5JyAgICA6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB0aGlzLnNldEZ1bGxZZWFyKDIwMDAgKyAxICogdmFsdWUpOyB9LFxyXG4gICAgICAgICd5JyAgICAgOiBwcm90by5zZXRGdWxsWWVhclxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIHJlZ2V4LCBzZXRNYXA7XHJcblxyXG4gICAgICAkZGF0ZVBhcnNlci5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJGRhdGVQYXJzZXIuJGZvcm1hdCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUU1tvcHRpb25zLmZvcm1hdF0gfHwgb3B0aW9ucy5mb3JtYXQ7XHJcbiAgICAgICAgcmVnZXggPSByZWdFeHBGb3JGb3JtYXQoJGRhdGVQYXJzZXIuJGZvcm1hdCk7XHJcbiAgICAgICAgc2V0TWFwID0gc2V0TWFwRm9yRm9ybWF0KCRkYXRlUGFyc2VyLiRmb3JtYXQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJGRhdGVQYXJzZXIuaXNWYWxpZCA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICBpZihhbmd1bGFyLmlzRGF0ZShkYXRlKSkgcmV0dXJuICFpc05hTihkYXRlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QoZGF0ZSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAkZGF0ZVBhcnNlci5wYXJzZSA9IGZ1bmN0aW9uKHZhbHVlLCBiYXNlRGF0ZSwgZm9ybWF0KSB7XHJcbiAgICAgICAgaWYoYW5ndWxhci5pc0RhdGUodmFsdWUpKSB2YWx1ZSA9IGRhdGVGaWx0ZXIodmFsdWUsIGZvcm1hdCB8fCAkZGF0ZVBhcnNlci4kZm9ybWF0KTtcclxuICAgICAgICB2YXIgZm9ybWF0UmVnZXggPSBmb3JtYXQgPyByZWdFeHBGb3JGb3JtYXQoZm9ybWF0KSA6IHJlZ2V4O1xyXG4gICAgICAgIHZhciBmb3JtYXRTZXRNYXAgPSBmb3JtYXQgPyBzZXRNYXBGb3JGb3JtYXQoZm9ybWF0KSA6IHNldE1hcDtcclxuICAgICAgICB2YXIgbWF0Y2hlcyA9IGZvcm1hdFJlZ2V4LmV4ZWModmFsdWUpO1xyXG4gICAgICAgIGlmKCFtYXRjaGVzKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBiYXNlRGF0ZSB8fCBuZXcgRGF0ZSgwLCAwLCAxKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgIGZvcm1hdFNldE1hcFtpXSAmJiBmb3JtYXRTZXRNYXBbaV0uY2FsbChkYXRlLCBtYXRjaGVzW2krMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFByaXZhdGUgZnVuY3Rpb25zXHJcblxyXG4gICAgICBmdW5jdGlvbiBzZXRNYXBGb3JGb3JtYXQoZm9ybWF0KSB7XHJcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzZXRGbk1hcCksIGk7XHJcbiAgICAgICAgdmFyIG1hcCA9IFtdLCBzb3J0ZWRNYXAgPSBbXTtcclxuICAgICAgICAvLyBNYXAgdG8gc2V0Rm5cclxuICAgICAgICB2YXIgY2xvbmVkRm9ybWF0ID0gZm9ybWF0O1xyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmKGZvcm1hdC5zcGxpdChrZXlzW2ldKS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGNsb25lZEZvcm1hdC5zZWFyY2goa2V5c1tpXSk7XHJcbiAgICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdC5zcGxpdChrZXlzW2ldKS5qb2luKCcnKTtcclxuICAgICAgICAgICAgaWYoc2V0Rm5NYXBba2V5c1tpXV0pIHtcclxuICAgICAgICAgICAgICBtYXBbaW5kZXhdID0gc2V0Rm5NYXBba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU29ydCByZXN1bHQgbWFwXHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1hcCwgZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgLy8gY29uZGl0aW9uYWwgcmVxdWlyZWQgc2luY2UgYW5ndWxhci5mb3JFYWNoIGJyb2tlIGFyb3VuZCB2MS4yLjIxXHJcbiAgICAgICAgICAvLyByZWxhdGVkIHByOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvODUyNVxyXG4gICAgICAgICAgaWYodikgc29ydGVkTWFwLnB1c2godik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHNvcnRlZE1hcDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZXNjYXBlUmVzZXJ2ZWRTeW1ib2xzKHRleHQpIHtcclxuICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXC8vZywgJ1tcXFxcL10nKS5yZXBsYWNlKCcvLS9nJywgJ1stXScpLnJlcGxhY2UoL1xcLi9nLCAnWy5dJykucmVwbGFjZSgvXFxcXHMvZywgJ1tcXFxcc10nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gcmVnRXhwRm9yRm9ybWF0KGZvcm1hdCkge1xyXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVnRXhwTWFwKSwgaTtcclxuXHJcbiAgICAgICAgdmFyIHJlID0gZm9ybWF0O1xyXG4gICAgICAgIC8vIEFic3RyYWN0IHJlcGxhY2VzIHRvIGF2b2lkIGNvbGxpc2lvbnNcclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICByZSA9IHJlLnNwbGl0KGtleXNbaV0pLmpvaW4oJyR7JyArIGkgKyAnfScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZXBsYWNlIGFic3RyYWN0ZWQgdmFsdWVzXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgcmUgPSByZS5zcGxpdCgnJHsnICsgaSArICd9Jykuam9pbignKCcgKyByZWdFeHBNYXBba2V5c1tpXV0gKyAnKScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3JtYXQgPSBlc2NhcGVSZXNlcnZlZFN5bWJvbHMoZm9ybWF0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcmUgKyAnJCcsIFsnaSddKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJGRhdGVQYXJzZXIuaW5pdCgpO1xyXG4gICAgICByZXR1cm4gJGRhdGVQYXJzZXI7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gRGF0ZVBhcnNlckZhY3Rvcnk7XHJcblxyXG4gIH1dO1xyXG5cclxufV0pO1xyXG5cclxuLy8gU291cmNlOiBkZWJvdW5jZS5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kZWJvdW5jZScsIFtdKVxyXG5cclxuLy8gQHNvdXJjZSBqYXNoa2VuYXMvdW5kZXJzY29yZVxyXG4vLyBAdXJsIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9ibG9iLzEuNS4yL3VuZGVyc2NvcmUuanMjTDY5M1xyXG4uY29uc3RhbnQoJ2RlYm91bmNlJywgZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XHJcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xyXG4gIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgIGNvbnRleHQgPSB0aGlzO1xyXG4gICAgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGxhc3QgPSAobmV3IERhdGUoKSkgLSB0aW1lc3RhbXA7XHJcbiAgICAgIGlmIChsYXN0IDwgd2FpdCkge1xyXG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcclxuICAgIGlmICghdGltZW91dCkge1xyXG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XHJcbiAgICB9XHJcbiAgICBpZiAoY2FsbE5vdykgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfTtcclxufSlcclxuXHJcblxyXG4vLyBAc291cmNlIGphc2hrZW5hcy91bmRlcnNjb3JlXHJcbi8vIEB1cmwgaHR0cHM6Ly9naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL2Jsb2IvMS41LjIvdW5kZXJzY29yZS5qcyNMNjYxXHJcbi5jb25zdGFudCgndGhyb3R0bGUnLCBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XHJcbiAgdmFyIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcclxuICB2YXIgdGltZW91dCA9IG51bGw7XHJcbiAgdmFyIHByZXZpb3VzID0gMDtcclxuICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xyXG4gIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IG5ldyBEYXRlKCk7XHJcbiAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgfTtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XHJcbiAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XHJcbiAgICBjb250ZXh0ID0gdGhpcztcclxuICAgIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgcHJldmlvdXMgPSBub3c7XHJcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XHJcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9O1xyXG59KTtcclxuXHJcbi8vIFNvdXJjZTogZGltZW5zaW9ucy5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kaW1lbnNpb25zJywgW10pXHJcblxyXG4gIC5mYWN0b3J5KCdkaW1lbnNpb25zJywgW1wiJGRvY3VtZW50XCIsIFwiJHdpbmRvd1wiLCBmdW5jdGlvbigkZG9jdW1lbnQsICR3aW5kb3cpIHtcclxuXHJcbiAgICB2YXIganFMaXRlID0gYW5ndWxhci5lbGVtZW50O1xyXG4gICAgdmFyIGZuID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IHRoZSBlbGVtZW50IG5vZGVOYW1lXHJcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxyXG4gICAgICogQHBhcmFtIG5hbWVcclxuICAgICAqL1xyXG4gICAgdmFyIG5vZGVOYW1lID0gZm4ubm9kZU5hbWUgPSBmdW5jdGlvbihlbGVtZW50LCBuYW1lKSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50Lm5vZGVOYW1lICYmIGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGVsZW1lbnQgY29tcHV0ZWQgc3R5bGVcclxuICAgICAqIEBwYXJhbSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gcHJvcFxyXG4gICAgICogQHBhcmFtIGV4dHJhXHJcbiAgICAgKi9cclxuICAgIGZuLmNzcyA9IGZ1bmN0aW9uKGVsZW1lbnQsIHByb3AsIGV4dHJhKSB7XHJcbiAgICAgIHZhciB2YWx1ZTtcclxuICAgICAgaWYgKGVsZW1lbnQuY3VycmVudFN0eWxlKSB7IC8vSUVcclxuICAgICAgICB2YWx1ZSA9IGVsZW1lbnQuY3VycmVudFN0eWxlW3Byb3BdO1xyXG4gICAgICB9IGVsc2UgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKSB7XHJcbiAgICAgICAgdmFsdWUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KVtwcm9wXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWx1ZSA9IGVsZW1lbnQuc3R5bGVbcHJvcF07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGV4dHJhID09PSB0cnVlID8gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMCA6IHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIHJlYWQtb25seSBlcXVpdmFsZW50IG9mIGpRdWVyeSdzIG9mZnNldCBmdW5jdGlvbjpcclxuICAgICAqIEByZXF1aXJlZC1ieSBib290c3RyYXAtdG9vbHRpcCwgYm9vdHN0cmFwLWFmZml4XHJcbiAgICAgKiBAdXJsIGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmZzZXQvXHJcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBmbi5vZmZzZXQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgIHZhciBib3hSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgdmFyIGRvY0VsZW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgd2lkdGg6IGJveFJlY3Qud2lkdGggfHwgZWxlbWVudC5vZmZzZXRXaWR0aCxcclxuICAgICAgICBoZWlnaHQ6IGJveFJlY3QuaGVpZ2h0IHx8IGVsZW1lbnQub2Zmc2V0SGVpZ2h0LFxyXG4gICAgICAgIHRvcDogYm94UmVjdC50b3AgKyAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgLSAoZG9jRWxlbWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wIHx8IDApLFxyXG4gICAgICAgIGxlZnQ6IGJveFJlY3QubGVmdCArICh3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jRWxlbWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkgLSAoZG9jRWxlbWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50TGVmdCB8fCAwKVxyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIHJlYWQtb25seSBlcXVpdmFsZW50IG9mIGpRdWVyeSdzIHBvc2l0aW9uIGZ1bmN0aW9uXHJcbiAgICAgKiBAcmVxdWlyZWQtYnkgYm9vdHN0cmFwLXRvb2x0aXAsIGJvb3RzdHJhcC1hZmZpeFxyXG4gICAgICogQHVybCBodHRwOi8vYXBpLmpxdWVyeS5jb20vb2Zmc2V0L1xyXG4gICAgICogQHBhcmFtIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZm4ucG9zaXRpb24gPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcblxyXG4gICAgICB2YXIgb2Zmc2V0UGFyZW50UmVjdCA9IHt0b3A6IDAsIGxlZnQ6IDB9LFxyXG4gICAgICAgICAgb2Zmc2V0UGFyZW50RWxlbWVudCxcclxuICAgICAgICAgIG9mZnNldDtcclxuXHJcbiAgICAgIC8vIEZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sIGJlY2F1c2UgaXQgaXMgaXQncyBvbmx5IG9mZnNldCBwYXJlbnRcclxuICAgICAgaWYgKGZuLmNzcyhlbGVtZW50LCAncG9zaXRpb24nKSA9PT0gJ2ZpeGVkJykge1xyXG5cclxuICAgICAgICAvLyBXZSBhc3N1bWUgdGhhdCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgYXZhaWxhYmxlIHdoZW4gY29tcHV0ZWQgcG9zaXRpb24gaXMgZml4ZWRcclxuICAgICAgICBvZmZzZXQgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgLy8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnRFbGVtZW50XHJcbiAgICAgICAgb2Zmc2V0UGFyZW50RWxlbWVudCA9IG9mZnNldFBhcmVudChlbGVtZW50KTtcclxuICAgICAgICBvZmZzZXQgPSBmbi5vZmZzZXQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vIEdldCBjb3JyZWN0IG9mZnNldHNcclxuICAgICAgICBvZmZzZXQgPSBmbi5vZmZzZXQoZWxlbWVudCk7XHJcbiAgICAgICAgaWYgKCFub2RlTmFtZShvZmZzZXRQYXJlbnRFbGVtZW50LCAnaHRtbCcpKSB7XHJcbiAgICAgICAgICBvZmZzZXRQYXJlbnRSZWN0ID0gZm4ub2Zmc2V0KG9mZnNldFBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzXHJcbiAgICAgICAgb2Zmc2V0UGFyZW50UmVjdC50b3AgKz0gZm4uY3NzKG9mZnNldFBhcmVudEVsZW1lbnQsICdib3JkZXJUb3BXaWR0aCcsIHRydWUpO1xyXG4gICAgICAgIG9mZnNldFBhcmVudFJlY3QubGVmdCArPSBmbi5jc3Mob2Zmc2V0UGFyZW50RWxlbWVudCwgJ2JvcmRlckxlZnRXaWR0aCcsIHRydWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgd2lkdGg6IGVsZW1lbnQub2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBlbGVtZW50Lm9mZnNldEhlaWdodCxcclxuICAgICAgICB0b3A6IG9mZnNldC50b3AgLSBvZmZzZXRQYXJlbnRSZWN0LnRvcCAtIGZuLmNzcyhlbGVtZW50LCAnbWFyZ2luVG9wJywgdHJ1ZSksXHJcbiAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQgLSBvZmZzZXRQYXJlbnRSZWN0LmxlZnQgLSBmbi5jc3MoZWxlbWVudCwgJ21hcmdpbkxlZnQnLCB0cnVlKVxyXG4gICAgICB9O1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjbG9zZXN0LCBub24tc3RhdGljYWxseSBwb3NpdGlvbmVkIG9mZnNldFBhcmVudCBvZiBhIGdpdmVuIGVsZW1lbnRcclxuICAgICAqIEByZXF1aXJlZC1ieSBmbi5wb3NpdGlvblxyXG4gICAgICogQHBhcmFtIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgdmFyIG9mZnNldFBhcmVudCA9IGZ1bmN0aW9uIG9mZnNldFBhcmVudEVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICB2YXIgZG9jRWxlbWVudCA9IGVsZW1lbnQub3duZXJEb2N1bWVudDtcclxuICAgICAgdmFyIG9mZnNldFBhcmVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50IHx8IGRvY0VsZW1lbnQ7XHJcbiAgICAgIGlmKG5vZGVOYW1lKG9mZnNldFBhcmVudCwgJyNkb2N1bWVudCcpKSByZXR1cm4gZG9jRWxlbWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgIHdoaWxlKG9mZnNldFBhcmVudCAmJiAhbm9kZU5hbWUob2Zmc2V0UGFyZW50LCAnaHRtbCcpICYmIGZuLmNzcyhvZmZzZXRQYXJlbnQsICdwb3NpdGlvbicpID09PSAnc3RhdGljJykge1xyXG4gICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2NFbGVtZW50LmRvY3VtZW50RWxlbWVudDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm92aWRlcyBlcXVpdmFsZW50IG9mIGpRdWVyeSdzIGhlaWdodCBmdW5jdGlvblxyXG4gICAgICogQHJlcXVpcmVkLWJ5IGJvb3RzdHJhcC1hZmZpeFxyXG4gICAgICogQHVybCBodHRwOi8vYXBpLmpxdWVyeS5jb20vaGVpZ2h0L1xyXG4gICAgICogQHBhcmFtIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBvdXRlclxyXG4gICAgICovXHJcbiAgICBmbi5oZWlnaHQgPSBmdW5jdGlvbihlbGVtZW50LCBvdXRlcikge1xyXG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcclxuICAgICAgaWYob3V0ZXIpIHtcclxuICAgICAgICB2YWx1ZSArPSBmbi5jc3MoZWxlbWVudCwgJ21hcmdpblRvcCcsIHRydWUpICsgZm4uY3NzKGVsZW1lbnQsICdtYXJnaW5Cb3R0b20nLCB0cnVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWx1ZSAtPSBmbi5jc3MoZWxlbWVudCwgJ3BhZGRpbmdUb3AnLCB0cnVlKSArIGZuLmNzcyhlbGVtZW50LCAncGFkZGluZ0JvdHRvbScsIHRydWUpICsgZm4uY3NzKGVsZW1lbnQsICdib3JkZXJUb3BXaWR0aCcsIHRydWUpICsgZm4uY3NzKGVsZW1lbnQsICdib3JkZXJCb3R0b21XaWR0aCcsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm92aWRlcyBlcXVpdmFsZW50IG9mIGpRdWVyeSdzIHdpZHRoIGZ1bmN0aW9uXHJcbiAgICAgKiBAcmVxdWlyZWQtYnkgYm9vdHN0cmFwLWFmZml4XHJcbiAgICAgKiBAdXJsIGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS93aWR0aC9cclxuICAgICAqIEBwYXJhbSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gb3V0ZXJcclxuICAgICAqL1xyXG4gICAgZm4ud2lkdGggPSBmdW5jdGlvbihlbGVtZW50LCBvdXRlcikge1xyXG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICBpZihvdXRlcikge1xyXG4gICAgICAgIHZhbHVlICs9IGZuLmNzcyhlbGVtZW50LCAnbWFyZ2luTGVmdCcsIHRydWUpICsgZm4uY3NzKGVsZW1lbnQsICdtYXJnaW5SaWdodCcsIHRydWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhbHVlIC09IGZuLmNzcyhlbGVtZW50LCAncGFkZGluZ0xlZnQnLCB0cnVlKSArIGZuLmNzcyhlbGVtZW50LCAncGFkZGluZ1JpZ2h0JywgdHJ1ZSkgKyBmbi5jc3MoZWxlbWVudCwgJ2JvcmRlckxlZnRXaWR0aCcsIHRydWUpICsgZm4uY3NzKGVsZW1lbnQsICdib3JkZXJSaWdodFdpZHRoJywgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZm47XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogcGFyc2Utb3B0aW9ucy5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5wYXJzZU9wdGlvbnMnLCBbXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckcGFyc2VPcHRpb25zJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgcmVnZXhwOiAvXlxccyooLio/KSg/Olxccythc1xccysoLio/KSk/KD86XFxzK2dyb3VwXFxzK2J5XFxzKyguKikpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd10qKXwoPzpcXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKC4qPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKC4qPykpPyQvXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IFtcIiRwYXJzZVwiLCBcIiRxXCIsIGZ1bmN0aW9uKCRwYXJzZSwgJHEpIHtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIFBhcnNlT3B0aW9uc0ZhY3RvcnkoYXR0ciwgY29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciAkcGFyc2VPcHRpb25zID0ge307XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiB2YXJzXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcbiAgICAgICAgJHBhcnNlT3B0aW9ucy4kdmFsdWVzID0gW107XHJcblxyXG4gICAgICAgIC8vIFByaXZhdGUgdmFyc1xyXG4gICAgICAgIHZhciBtYXRjaCwgZGlzcGxheUZuLCB2YWx1ZU5hbWUsIGtleU5hbWUsIGdyb3VwQnlGbiwgdmFsdWVGbiwgdmFsdWVzRm47XHJcblxyXG4gICAgICAgICRwYXJzZU9wdGlvbnMuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHBhcnNlT3B0aW9ucy4kbWF0Y2ggPSBtYXRjaCA9IGF0dHIubWF0Y2gob3B0aW9ucy5yZWdleHApO1xyXG4gICAgICAgICAgZGlzcGxheUZuID0gJHBhcnNlKG1hdGNoWzJdIHx8IG1hdGNoWzFdKSxcclxuICAgICAgICAgIHZhbHVlTmFtZSA9IG1hdGNoWzRdIHx8IG1hdGNoWzZdLFxyXG4gICAgICAgICAga2V5TmFtZSA9IG1hdGNoWzVdLFxyXG4gICAgICAgICAgZ3JvdXBCeUZuID0gJHBhcnNlKG1hdGNoWzNdIHx8ICcnKSxcclxuICAgICAgICAgIHZhbHVlRm4gPSAkcGFyc2UobWF0Y2hbMl0gPyBtYXRjaFsxXSA6IHZhbHVlTmFtZSksXHJcbiAgICAgICAgICB2YWx1ZXNGbiA9ICRwYXJzZShtYXRjaFs3XSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHBhcnNlT3B0aW9ucy52YWx1ZXNGbiA9IGZ1bmN0aW9uKHNjb3BlLCBjb250cm9sbGVyKSB7XHJcbiAgICAgICAgICByZXR1cm4gJHEud2hlbih2YWx1ZXNGbihzY29wZSwgY29udHJvbGxlcikpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbih2YWx1ZXMpIHtcclxuICAgICAgICAgICAgJHBhcnNlT3B0aW9ucy4kdmFsdWVzID0gdmFsdWVzID8gcGFyc2VWYWx1ZXModmFsdWVzLCBzY29wZSkgOiB7fTtcclxuICAgICAgICAgICAgcmV0dXJuICRwYXJzZU9wdGlvbnMuJHZhbHVlcztcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByaXZhdGUgZnVuY3Rpb25zXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlVmFsdWVzKHZhbHVlcywgc2NvcGUpIHtcclxuICAgICAgICAgIHJldHVybiB2YWx1ZXMubWFwKGZ1bmN0aW9uKG1hdGNoLCBpbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgbG9jYWxzID0ge30sIGxhYmVsLCB2YWx1ZTtcclxuICAgICAgICAgICAgbG9jYWxzW3ZhbHVlTmFtZV0gPSBtYXRjaDtcclxuICAgICAgICAgICAgbGFiZWwgPSBkaXNwbGF5Rm4oc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWVGbihzY29wZSwgbG9jYWxzKSB8fCBpbmRleDtcclxuICAgICAgICAgICAgcmV0dXJuIHtsYWJlbDogbGFiZWwsIHZhbHVlOiB2YWx1ZX07XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRwYXJzZU9wdGlvbnMuaW5pdCgpO1xyXG4gICAgICAgIHJldHVybiAkcGFyc2VPcHRpb25zO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIFBhcnNlT3B0aW9uc0ZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pO1xyXG5cclxuLy8gU291cmNlOiByYWYuanNcclxuKGFuZ3VsYXIudmVyc2lvbi5taW5vciA8IDMgJiYgYW5ndWxhci52ZXJzaW9uLmRvdCA8IDE0KSAmJiBhbmd1bGFyLm1vZHVsZSgnbmcnKVxyXG5cclxuLmZhY3RvcnkoJyQkckFGJywgW1wiJHdpbmRvd1wiLCBcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uKCR3aW5kb3csICR0aW1lb3V0KSB7XHJcblxyXG4gIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtcclxuXHJcbiAgdmFyIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblxyXG4gIHZhciByYWZTdXBwb3J0ZWQgPSAhIXJlcXVlc3RBbmltYXRpb25GcmFtZTtcclxuICB2YXIgcmFmID0gcmFmU3VwcG9ydGVkID9cclxuICAgIGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgIHZhciBpZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmbik7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XHJcbiAgICAgIH07XHJcbiAgICB9IDpcclxuICAgIGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgIHZhciB0aW1lciA9ICR0aW1lb3V0KGZuLCAxNi42NiwgZmFsc2UpOyAvLyAxMDAwIC8gNjAgPSAxNi42NjZcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICByYWYuc3VwcG9ydGVkID0gcmFmU3VwcG9ydGVkO1xyXG5cclxuICByZXR1cm4gcmFmO1xyXG5cclxufV0pO1xyXG5cclxuLy8gLmZhY3RvcnkoJyQkYW5pbWF0ZVJlZmxvdycsIGZ1bmN0aW9uKCQkckFGLCAkZG9jdW1lbnQpIHtcclxuXHJcbi8vICAgdmFyIGJvZHlFbCA9ICRkb2N1bWVudFswXS5ib2R5O1xyXG5cclxuLy8gICByZXR1cm4gZnVuY3Rpb24oZm4pIHtcclxuLy8gICAgIC8vdGhlIHJldHVybmVkIGZ1bmN0aW9uIGFjdHMgYXMgdGhlIGNhbmNlbGxhdGlvbiBmdW5jdGlvblxyXG4vLyAgICAgcmV0dXJuICQkckFGKGZ1bmN0aW9uKCkge1xyXG4vLyAgICAgICAvL3RoZSBsaW5lIGJlbG93IHdpbGwgZm9yY2UgdGhlIGJyb3dzZXIgdG8gcGVyZm9ybSBhIHJlcGFpbnRcclxuLy8gICAgICAgLy9zbyB0aGF0IGFsbCB0aGUgYW5pbWF0ZWQgZWxlbWVudHMgd2l0aGluIHRoZSBhbmltYXRpb24gZnJhbWVcclxuLy8gICAgICAgLy93aWxsIGJlIHByb3Blcmx5IHVwZGF0ZWQgYW5kIGRyYXduIG9uIHNjcmVlbi4gVGhpcyBpc1xyXG4vLyAgICAgICAvL3JlcXVpcmVkIHRvIHBlcmZvcm0gbXVsdGktY2xhc3MgQ1NTIGJhc2VkIGFuaW1hdGlvbnMgd2l0aFxyXG4vLyAgICAgICAvL0ZpcmVmb3guIERPIE5PVCBSRU1PVkUgVEhJUyBMSU5FLlxyXG4vLyAgICAgICB2YXIgYSA9IGJvZHlFbC5vZmZzZXRXaWR0aCArIDE7XHJcbi8vICAgICAgIGZuKCk7XHJcbi8vICAgICB9KTtcclxuLy8gICB9O1xyXG5cclxuLy8gfSk7XHJcblxyXG4vLyBTb3VyY2U6IG1vZGFsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5tb2RhbCcsIFsnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kaW1lbnNpb25zJ10pXHJcblxyXG4gIC5wcm92aWRlcignJG1vZGFsJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tZmFkZScsXHJcbiAgICAgIGJhY2tkcm9wQW5pbWF0aW9uOiAnYW0tZmFkZScsXHJcbiAgICAgIHByZWZpeENsYXNzOiAnbW9kYWwnLFxyXG4gICAgICBwcmVmaXhFdmVudDogJ21vZGFsJyxcclxuICAgICAgcGxhY2VtZW50OiAndG9wJyxcclxuICAgICAgdGVtcGxhdGU6ICdtb2RhbC9tb2RhbC50cGwuaHRtbCcsXHJcbiAgICAgIGNvbnRlbnRUZW1wbGF0ZTogZmFsc2UsXHJcbiAgICAgIGNvbnRhaW5lcjogZmFsc2UsXHJcbiAgICAgIGVsZW1lbnQ6IG51bGwsXHJcbiAgICAgIGJhY2tkcm9wOiB0cnVlLFxyXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcclxuICAgICAgaHRtbDogZmFsc2UsXHJcbiAgICAgIHNob3c6IHRydWVcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHdpbmRvd1wiLCBcIiRyb290U2NvcGVcIiwgXCIkY29tcGlsZVwiLCBcIiRxXCIsIFwiJHRlbXBsYXRlQ2FjaGVcIiwgXCIkaHR0cFwiLCBcIiRhbmltYXRlXCIsIFwiJHRpbWVvdXRcIiwgXCIkc2NlXCIsIFwiZGltZW5zaW9uc1wiLCBmdW5jdGlvbigkd2luZG93LCAkcm9vdFNjb3BlLCAkY29tcGlsZSwgJHEsICR0ZW1wbGF0ZUNhY2hlLCAkaHR0cCwgJGFuaW1hdGUsICR0aW1lb3V0LCAkc2NlLCBkaW1lbnNpb25zKSB7XHJcblxyXG4gICAgICB2YXIgZm9yRWFjaCA9IGFuZ3VsYXIuZm9yRWFjaDtcclxuICAgICAgdmFyIHRyaW0gPSBTdHJpbmcucHJvdG90eXBlLnRyaW07XHJcbiAgICAgIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCAkd2luZG93LnNldFRpbWVvdXQ7XHJcbiAgICAgIHZhciBib2R5RWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG4gICAgICB2YXIgaHRtbFJlcGxhY2VSZWdFeHAgPSAvbmctYmluZD1cIi9pZztcclxuXHJcbiAgICAgIGZ1bmN0aW9uIE1vZGFsRmFjdG9yeShjb25maWcpIHtcclxuXHJcbiAgICAgICAgdmFyICRtb2RhbCA9IHt9O1xyXG5cclxuICAgICAgICAvLyBDb21tb24gdmFyc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gJG1vZGFsLiRvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG4gICAgICAgICRtb2RhbC4kcHJvbWlzZSA9IGZldGNoVGVtcGxhdGUob3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgdmFyIHNjb3BlID0gJG1vZGFsLiRzY29wZSA9IG9wdGlvbnMuc2NvcGUgJiYgb3B0aW9ucy5zY29wZS4kbmV3KCkgfHwgJHJvb3RTY29wZS4kbmV3KCk7XHJcbiAgICAgICAgaWYoIW9wdGlvbnMuZWxlbWVudCAmJiAhb3B0aW9ucy5jb250YWluZXIpIHtcclxuICAgICAgICAgIG9wdGlvbnMuY29udGFpbmVyID0gJ2JvZHknO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBzdHJpbmcgb3B0aW9uc1xyXG4gICAgICAgIGZvckVhY2goWyd0aXRsZScsICdjb250ZW50J10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYob3B0aW9uc1trZXldKSBzY29wZVtrZXldID0gJHNjZS50cnVzdEFzSHRtbChvcHRpb25zW2tleV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQcm92aWRlIHNjb3BlIGhlbHBlcnNcclxuICAgICAgICBzY29wZS4kaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwuaGlkZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzY29wZS4kc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwuc2hvdygpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzY29wZS4kdG9nZ2xlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC50b2dnbGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgY29udGVudFRlbXBsYXRlIG9wdGlvblxyXG4gICAgICAgIGlmKG9wdGlvbnMuY29udGVudFRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAkbW9kYWwuJHByb21pc2UgPSAkbW9kYWwuJHByb21pc2UudGhlbihmdW5jdGlvbih0ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVFbCA9IGFuZ3VsYXIuZWxlbWVudCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaFRlbXBsYXRlKG9wdGlvbnMuY29udGVudFRlbXBsYXRlKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjb250ZW50VGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICB2YXIgY29udGVudEVsID0gZmluZEVsZW1lbnQoJ1tuZy1iaW5kPVwiY29udGVudFwiXScsIHRlbXBsYXRlRWxbMF0pLnJlbW92ZUF0dHIoJ25nLWJpbmQnKS5odG1sKGNvbnRlbnRUZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgICAgLy8gRHJvcCB0aGUgZGVmYXVsdCBmb290ZXIgYXMgeW91IHByb2JhYmx5IGRvbid0IHdhbnQgaXQgaWYgeW91IHVzZSBhIGN1c3RvbSBjb250ZW50VGVtcGxhdGVcclxuICAgICAgICAgICAgICBpZighY29uZmlnLnRlbXBsYXRlKSBjb250ZW50RWwubmV4dCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZUVsWzBdLm91dGVySFRNTDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZldGNoLCBjb21waWxlIHRoZW4gaW5pdGlhbGl6ZSBtb2RhbFxyXG4gICAgICAgIHZhciBtb2RhbExpbmtlciwgbW9kYWxFbGVtZW50O1xyXG4gICAgICAgIHZhciBiYWNrZHJvcEVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCInICsgb3B0aW9ucy5wcmVmaXhDbGFzcyArICctYmFja2Ryb3BcIi8+Jyk7XHJcbiAgICAgICAgJG1vZGFsLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24odGVtcGxhdGUpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3QodGVtcGxhdGUpKSB0ZW1wbGF0ZSA9IHRlbXBsYXRlLmRhdGE7XHJcbiAgICAgICAgICBpZihvcHRpb25zLmh0bWwpIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZShodG1sUmVwbGFjZVJlZ0V4cCwgJ25nLWJpbmQtaHRtbD1cIicpO1xyXG4gICAgICAgICAgdGVtcGxhdGUgPSB0cmltLmFwcGx5KHRlbXBsYXRlKTtcclxuICAgICAgICAgIG1vZGFsTGlua2VyID0gJGNvbXBpbGUodGVtcGxhdGUpO1xyXG4gICAgICAgICAgJG1vZGFsLmluaXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJG1vZGFsLmluaXQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAvLyBPcHRpb25zOiBzaG93XHJcbiAgICAgICAgICBpZihvcHRpb25zLnNob3cpIHtcclxuICAgICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICRtb2RhbC5zaG93KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkbW9kYWwuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIC8vIFJlbW92ZSBlbGVtZW50XHJcbiAgICAgICAgICBpZihtb2RhbEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgbW9kYWxFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBtb2RhbEVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoYmFja2Ryb3BFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGJhY2tkcm9wRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgYmFja2Ryb3BFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBEZXN0cm95IHNjb3BlXHJcbiAgICAgICAgICBzY29wZS4kZGVzdHJveSgpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkbW9kYWwuc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIHNjb3BlLiRlbWl0KG9wdGlvbnMucHJlZml4RXZlbnQgKyAnLnNob3cuYmVmb3JlJywgJG1vZGFsKTtcclxuICAgICAgICAgIHZhciBwYXJlbnQ7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRWxlbWVudChvcHRpb25zLmNvbnRhaW5lcikpIHtcclxuICAgICAgICAgICAgcGFyZW50ID0gb3B0aW9ucy5jb250YWluZXI7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJlbnQgPSBvcHRpb25zLmNvbnRhaW5lciA/IGZpbmRFbGVtZW50KG9wdGlvbnMuY29udGFpbmVyKSA6IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgYWZ0ZXIgPSBvcHRpb25zLmNvbnRhaW5lciA/IG51bGwgOiBvcHRpb25zLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgLy8gRmV0Y2ggYSBjbG9uZWQgZWxlbWVudCBsaW5rZWQgZnJvbSB0ZW1wbGF0ZVxyXG4gICAgICAgICAgbW9kYWxFbGVtZW50ID0gJG1vZGFsLiRlbGVtZW50ID0gbW9kYWxMaW5rZXIoc2NvcGUsIGZ1bmN0aW9uKGNsb25lZEVsZW1lbnQsIHNjb3BlKSB7fSk7XHJcblxyXG4gICAgICAgICAgLy8gU2V0IHRoZSBpbml0aWFsIHBvc2l0aW9uaW5nLlxyXG4gICAgICAgICAgbW9kYWxFbGVtZW50LmNzcyh7ZGlzcGxheTogJ2Jsb2NrJ30pLmFkZENsYXNzKG9wdGlvbnMucGxhY2VtZW50KTtcclxuXHJcbiAgICAgICAgICAvLyBPcHRpb25zOiBhbmltYXRpb25cclxuICAgICAgICAgIGlmKG9wdGlvbnMuYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMuYmFja2Ryb3ApIHtcclxuICAgICAgICAgICAgICBiYWNrZHJvcEVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy5iYWNrZHJvcEFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbW9kYWxFbGVtZW50LmFkZENsYXNzKG9wdGlvbnMuYW5pbWF0aW9uKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZihvcHRpb25zLmJhY2tkcm9wKSB7XHJcbiAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGJhY2tkcm9wRWxlbWVudCwgYm9keUVsZW1lbnQsIG51bGwsIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJGFuaW1hdGUuZW50ZXIobW9kYWxFbGVtZW50LCBwYXJlbnQsIGFmdGVyLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2NvcGUuJGVtaXQob3B0aW9ucy5wcmVmaXhFdmVudCArICcuc2hvdycsICRtb2RhbCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHNjb3BlLiRpc1Nob3duID0gdHJ1ZTtcclxuICAgICAgICAgIHNjb3BlLiQkcGhhc2UgfHwgKHNjb3BlLiRyb290ICYmIHNjb3BlLiRyb290LiQkcGhhc2UpIHx8IHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgIC8vIEZvY3VzIG9uY2UgdGhlIGVudGVyLWFuaW1hdGlvbiBoYXMgc3RhcnRlZFxyXG4gICAgICAgICAgLy8gV2VpcmQgUGhhbnRvbUpTIGJ1ZyBoYWNrXHJcbiAgICAgICAgICB2YXIgZWwgPSBtb2RhbEVsZW1lbnRbMF07XHJcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGVsLmZvY3VzKCk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBib2R5RWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLnByZWZpeENsYXNzICsgJy1vcGVuJyk7XHJcbiAgICAgICAgICBpZihvcHRpb25zLmFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICBib2R5RWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLnByZWZpeENsYXNzICsgJy13aXRoLScgKyBvcHRpb25zLmFuaW1hdGlvbik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQmluZCBldmVudHNcclxuICAgICAgICAgIGlmKG9wdGlvbnMuYmFja2Ryb3ApIHtcclxuICAgICAgICAgICAgbW9kYWxFbGVtZW50Lm9uKCdjbGljaycsIGhpZGVPbkJhY2tkcm9wQ2xpY2spO1xyXG4gICAgICAgICAgICBiYWNrZHJvcEVsZW1lbnQub24oJ2NsaWNrJywgaGlkZU9uQmFja2Ryb3BDbGljayk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihvcHRpb25zLmtleWJvYXJkKSB7XHJcbiAgICAgICAgICAgIG1vZGFsRWxlbWVudC5vbigna2V5dXAnLCAkbW9kYWwuJG9uS2V5VXApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRtb2RhbC5oaWRlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgc2NvcGUuJGVtaXQob3B0aW9ucy5wcmVmaXhFdmVudCArICcuaGlkZS5iZWZvcmUnLCAkbW9kYWwpO1xyXG4gICAgICAgICAgJGFuaW1hdGUubGVhdmUobW9kYWxFbGVtZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2NvcGUuJGVtaXQob3B0aW9ucy5wcmVmaXhFdmVudCArICcuaGlkZScsICRtb2RhbCk7XHJcbiAgICAgICAgICAgIGJvZHlFbGVtZW50LnJlbW92ZUNsYXNzKG9wdGlvbnMucHJlZml4Q2xhc3MgKyAnLW9wZW4nKTtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5hbmltYXRpb24pIHtcclxuICAgICAgICAgICAgICBib2R5RWxlbWVudC5yZW1vdmVDbGFzcyhvcHRpb25zLnByZWZpeENsYXNzICsgJy13aXRoLScgKyBvcHRpb25zLmFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5iYWNrZHJvcCkge1xyXG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShiYWNrZHJvcEVsZW1lbnQsIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2NvcGUuJGlzU2hvd24gPSBmYWxzZTtcclxuICAgICAgICAgIHNjb3BlLiQkcGhhc2UgfHwgKHNjb3BlLiRyb290ICYmIHNjb3BlLiRyb290LiQkcGhhc2UpIHx8IHNjb3BlLiRkaWdlc3QoKTtcclxuXHJcbiAgICAgICAgICAvLyBVbmJpbmQgZXZlbnRzXHJcbiAgICAgICAgICBpZihvcHRpb25zLmJhY2tkcm9wKSB7XHJcbiAgICAgICAgICAgIG1vZGFsRWxlbWVudC5vZmYoJ2NsaWNrJywgaGlkZU9uQmFja2Ryb3BDbGljayk7XHJcbiAgICAgICAgICAgIGJhY2tkcm9wRWxlbWVudC5vZmYoJ2NsaWNrJywgaGlkZU9uQmFja2Ryb3BDbGljayk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihvcHRpb25zLmtleWJvYXJkKSB7XHJcbiAgICAgICAgICAgIG1vZGFsRWxlbWVudC5vZmYoJ2tleXVwJywgJG1vZGFsLiRvbktleVVwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkbW9kYWwudG9nZ2xlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgc2NvcGUuJGlzU2hvd24gPyAkbW9kYWwuaGlkZSgpIDogJG1vZGFsLnNob3coKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJG1vZGFsLmZvY3VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBtb2RhbEVsZW1lbnRbMF0uZm9jdXMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAkbW9kYWwuJG9uS2V5VXAgPSBmdW5jdGlvbihldnQpIHtcclxuXHJcbiAgICAgICAgICBpZiAoZXZ0LndoaWNoID09PSAyNyAmJiBzY29wZS4kaXNTaG93bikge1xyXG4gICAgICAgICAgICAkbW9kYWwuaGlkZSgpO1xyXG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByaXZhdGUgbWV0aG9kc1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBoaWRlT25CYWNrZHJvcENsaWNrKGV2dCkge1xyXG4gICAgICAgICAgaWYoZXZ0LnRhcmdldCAhPT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHJldHVybjtcclxuICAgICAgICAgIG9wdGlvbnMuYmFja2Ryb3AgPT09ICdzdGF0aWMnID8gJG1vZGFsLmZvY3VzKCkgOiAkbW9kYWwuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICRtb2RhbDtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhlbHBlciBmdW5jdGlvbnNcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGZpbmRFbGVtZW50KHF1ZXJ5LCBlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudCgoZWxlbWVudCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBmZXRjaFRlbXBsYXRlKHRlbXBsYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuICRxLndoZW4oJHRlbXBsYXRlQ2FjaGUuZ2V0KHRlbXBsYXRlKSB8fCAkaHR0cC5nZXQodGVtcGxhdGUpKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc09iamVjdChyZXMpKSB7XHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZSwgcmVzLmRhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gTW9kYWxGYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic01vZGFsJywgW1wiJHdpbmRvd1wiLCBcIiRzY2VcIiwgXCIkbW9kYWxcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHNjZSwgJG1vZGFsKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHRyYW5zY2x1c2lvbikge1xyXG5cclxuICAgICAgICAvLyBEaXJlY3RpdmUgb3B0aW9uc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge3Njb3BlOiBzY29wZSwgZWxlbWVudDogZWxlbWVudCwgc2hvdzogZmFsc2V9O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3RlbXBsYXRlJywgJ2NvbnRlbnRUZW1wbGF0ZScsICdwbGFjZW1lbnQnLCAnYmFja2Ryb3AnLCAna2V5Ym9hcmQnLCAnaHRtbCcsICdjb250YWluZXInLCAnYW5pbWF0aW9uJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSkgb3B0aW9uc1trZXldID0gYXR0cltrZXldO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHNjb3BlIGFzIGRhdGEtYXR0cnNcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWyd0aXRsZScsICdjb250ZW50J10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgYXR0cltrZXldICYmIGF0dHIuJG9ic2VydmUoa2V5LCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgc2NvcGVba2V5XSA9ICRzY2UudHJ1c3RBc0h0bWwobmV3VmFsdWUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgYW4gb2JqZWN0XHJcbiAgICAgICAgYXR0ci5ic01vZGFsICYmIHNjb3BlLiR3YXRjaChhdHRyLmJzTW9kYWwsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc09iamVjdChuZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoc2NvcGUsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNjb3BlLmNvbnRlbnQgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBtb2RhbFxyXG4gICAgICAgIHZhciBtb2RhbCA9ICRtb2RhbChvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gVHJpZ2dlclxyXG4gICAgICAgIGVsZW1lbnQub24oYXR0ci50cmlnZ2VyIHx8ICdjbGljaycsIG1vZGFsLnRvZ2dsZSk7XHJcblxyXG4gICAgICAgIC8vIEdhcmJhZ2UgY29sbGVjdGlvblxyXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChtb2RhbCkgbW9kYWwuZGVzdHJveSgpO1xyXG4gICAgICAgICAgb3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICBtb2RhbCA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IG5hdmJhci5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAubmF2YmFyJywgW10pXHJcblxyXG4gIC5wcm92aWRlcignJG5hdmJhcicsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcclxuICAgICAgcm91dGVBdHRyOiAnZGF0YS1tYXRjaC1yb3V0ZScsXHJcbiAgICAgIHN0cmljdDogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB7ZGVmYXVsdHM6IGRlZmF1bHRzfTtcclxuICAgIH07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzTmF2YmFyJywgW1wiJHdpbmRvd1wiLCBcIiRsb2NhdGlvblwiLCBcIiRuYXZiYXJcIiwgZnVuY3Rpb24oJHdpbmRvdywgJGxvY2F0aW9uLCAkbmF2YmFyKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gJG5hdmJhci5kZWZhdWx0cztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY29udHJvbGxlcikge1xyXG5cclxuICAgICAgICAvLyBEaXJlY3RpdmUgb3B0aW9uc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5jb3B5KGRlZmF1bHRzKTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goT2JqZWN0LmtleXMoZGVmYXVsdHMpLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJba2V5XSkpIG9wdGlvbnNba2V5XSA9IGF0dHJba2V5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gV2F0Y2ggZm9yIHRoZSAkbG9jYXRpb25cclxuICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgcmV0dXJuICRsb2NhdGlvbi5wYXRoKCk7XHJcblxyXG4gICAgICAgIH0sIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG5cclxuICAgICAgICAgIHZhciBsaUVsZW1lbnRzID0gZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCdsaVsnICsgb3B0aW9ucy5yb3V0ZUF0dHIgKyAnXScpO1xyXG5cclxuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChsaUVsZW1lbnRzLCBmdW5jdGlvbihsaSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChsaSk7XHJcbiAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gbGlFbGVtZW50LmF0dHIob3B0aW9ucy5yb3V0ZUF0dHIpLnJlcGxhY2UoJy8nLCAnXFxcXC8nKTtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5zdHJpY3QpIHtcclxuICAgICAgICAgICAgICBwYXR0ZXJuID0gJ14nICsgcGF0dGVybiArICckJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cChwYXR0ZXJuLCBbJ2knXSk7XHJcblxyXG4gICAgICAgICAgICBpZihyZWdleHAudGVzdChuZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICBsaUVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGlFbGVtZW50LnJlbW92ZUNsYXNzKG9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogcG9wb3Zlci5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAucG9wb3ZlcicsIFsnbWdjcmVhLm5nU3RyYXAudG9vbHRpcCddKVxyXG5cclxuICAucHJvdmlkZXIoJyRwb3BvdmVyJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tZmFkZScsXHJcbiAgICAgIGN1c3RvbUNsYXNzOiAnJyxcclxuICAgICAgY29udGFpbmVyOiBmYWxzZSxcclxuICAgICAgdGFyZ2V0OiBmYWxzZSxcclxuICAgICAgcGxhY2VtZW50OiAncmlnaHQnLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3BvcG92ZXIvcG9wb3Zlci50cGwuaHRtbCcsXHJcbiAgICAgIGNvbnRlbnRUZW1wbGF0ZTogZmFsc2UsXHJcbiAgICAgIHRyaWdnZXI6ICdjbGljaycsXHJcbiAgICAgIGtleWJvYXJkOiB0cnVlLFxyXG4gICAgICBodG1sOiBmYWxzZSxcclxuICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICBjb250ZW50OiAnJyxcclxuICAgICAgZGVsYXk6IDBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHRvb2x0aXBcIiwgZnVuY3Rpb24oJHRvb2x0aXApIHtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIFBvcG92ZXJGYWN0b3J5KGVsZW1lbnQsIGNvbmZpZykge1xyXG5cclxuICAgICAgICAvLyBDb21tb24gdmFyc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG5cclxuICAgICAgICB2YXIgJHBvcG92ZXIgPSAkdG9vbHRpcChlbGVtZW50LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBzdHJpbmcgb3B0aW9ucyBbLyp0aXRsZSwgKi9jb250ZW50XVxyXG4gICAgICAgIGlmKG9wdGlvbnMuY29udGVudCkge1xyXG4gICAgICAgICAgJHBvcG92ZXIuJHNjb3BlLmNvbnRlbnQgPSBvcHRpb25zLmNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJHBvcG92ZXI7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gUG9wb3ZlckZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzUG9wb3ZlcicsIFtcIiR3aW5kb3dcIiwgXCIkc2NlXCIsIFwiJHBvcG92ZXJcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHNjZSwgJHBvcG92ZXIpIHtcclxuXHJcbiAgICB2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgJHdpbmRvdy5zZXRUaW1lb3V0O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUFDJyxcclxuICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcblxyXG4gICAgICAgIC8vIERpcmVjdGl2ZSBvcHRpb25zXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7c2NvcGU6IHNjb3BlfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWyd0ZW1wbGF0ZScsICdjb250ZW50VGVtcGxhdGUnLCAncGxhY2VtZW50JywgJ2NvbnRhaW5lcicsICd0YXJnZXQnLCAnZGVsYXknLCAndHJpZ2dlcicsICdrZXlib2FyZCcsICdodG1sJywgJ2FuaW1hdGlvbicsICdjdXN0b21DbGFzcyddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJba2V5XSkpIG9wdGlvbnNba2V5XSA9IGF0dHJba2V5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBkYXRhLWF0dHJzXHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsndGl0bGUnLCAnY29udGVudCddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGF0dHJba2V5XSAmJiBhdHRyLiRvYnNlcnZlKGtleSwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHNjb3BlW2tleV0gPSAkc2NlLnRydXN0QXNIdG1sKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgYW5ndWxhci5pc0RlZmluZWQob2xkVmFsdWUpICYmIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBwb3BvdmVyICYmIHBvcG92ZXIuJGFwcGx5UGxhY2VtZW50KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgYW4gb2JqZWN0XHJcbiAgICAgICAgYXR0ci5ic1BvcG92ZXIgJiYgc2NvcGUuJHdhdGNoKGF0dHIuYnNQb3BvdmVyLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3QobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHNjb3BlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzY29wZS5jb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhbmd1bGFyLmlzRGVmaW5lZChvbGRWYWx1ZSkgJiYgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBwb3BvdmVyICYmIHBvcG92ZXIuJGFwcGx5UGxhY2VtZW50KCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBiaW5kaW5nIHN1cHBvcnRcclxuICAgICAgICBhdHRyLmJzU2hvdyAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic1Nob3csIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgaWYoIXBvcG92ZXIgfHwgIWFuZ3VsYXIuaXNEZWZpbmVkKG5ld1ZhbHVlKSkgcmV0dXJuO1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc1N0cmluZyhuZXdWYWx1ZSkpIG5ld1ZhbHVlID0gISFuZXdWYWx1ZS5tYXRjaCgnLD8ocG9wb3ZlciksPycpO1xyXG4gICAgICAgICAgbmV3VmFsdWUgPT09IHRydWUgPyBwb3BvdmVyLnNob3coKSA6IHBvcG92ZXIuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIHBvcG92ZXJcclxuICAgICAgICB2YXIgcG9wb3ZlciA9ICRwb3BvdmVyKGVsZW1lbnQsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAocG9wb3ZlcikgcG9wb3Zlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICAgIHBvcG92ZXIgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxuLy8gU291cmNlOiBzY3JvbGxzcHkuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnNjcm9sbHNweScsIFsnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kZWJvdW5jZScsICdtZ2NyZWEubmdTdHJhcC5oZWxwZXJzLmRpbWVuc2lvbnMnXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckc2Nyb2xsc3B5JywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgLy8gUG9vbCBvZiByZWdpc3RlcmVkIHNwaWVzXHJcbiAgICB2YXIgc3BpZXMgPSB0aGlzLiQkc3BpZXMgPSB7fTtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBkZWJvdW5jZTogMTUwLFxyXG4gICAgICB0aHJvdHRsZTogMTAwLFxyXG4gICAgICBvZmZzZXQ6IDEwMFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkd2luZG93XCIsIFwiJGRvY3VtZW50XCIsIFwiJHJvb3RTY29wZVwiLCBcImRpbWVuc2lvbnNcIiwgXCJkZWJvdW5jZVwiLCBcInRocm90dGxlXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRkb2N1bWVudCwgJHJvb3RTY29wZSwgZGltZW5zaW9ucywgZGVib3VuY2UsIHRocm90dGxlKSB7XHJcblxyXG4gICAgICB2YXIgd2luZG93RWwgPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdyk7XHJcbiAgICAgIHZhciBkb2NFbCA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQucHJvcCgnZG9jdW1lbnRFbGVtZW50JykpO1xyXG4gICAgICB2YXIgYm9keUVsID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cuZG9jdW1lbnQuYm9keSk7XHJcblxyXG4gICAgICAvLyBIZWxwZXIgZnVuY3Rpb25zXHJcblxyXG4gICAgICBmdW5jdGlvbiBub2RlTmFtZShlbGVtZW50LCBuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRbMF0ubm9kZU5hbWUgJiYgZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIFNjcm9sbFNweUZhY3RvcnkoY29uZmlnKSB7XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiB2YXJzXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcbiAgICAgICAgaWYoIW9wdGlvbnMuZWxlbWVudCkgb3B0aW9ucy5lbGVtZW50ID0gYm9keUVsO1xyXG4gICAgICAgIHZhciBpc1dpbmRvd1NweSA9IG5vZGVOYW1lKG9wdGlvbnMuZWxlbWVudCwgJ2JvZHknKTtcclxuICAgICAgICB2YXIgc2Nyb2xsRWwgPSBpc1dpbmRvd1NweSA/IHdpbmRvd0VsIDogb3B0aW9ucy5lbGVtZW50O1xyXG4gICAgICAgIHZhciBzY3JvbGxJZCA9IGlzV2luZG93U3B5ID8gJ3dpbmRvdycgOiBvcHRpb25zLmlkO1xyXG5cclxuICAgICAgICAvLyBVc2UgZXhpc3Rpbmcgc3B5XHJcbiAgICAgICAgaWYoc3BpZXNbc2Nyb2xsSWRdKSB7XHJcbiAgICAgICAgICBzcGllc1tzY3JvbGxJZF0uJCRjb3VudCsrO1xyXG4gICAgICAgICAgcmV0dXJuIHNwaWVzW3Njcm9sbElkXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciAkc2Nyb2xsc3B5ID0ge307XHJcblxyXG4gICAgICAgIC8vIFByaXZhdGUgdmFyc1xyXG4gICAgICAgIHZhciB1bmJpbmRWaWV3Q29udGVudExvYWRlZCwgdW5iaW5kSW5jbHVkZUNvbnRlbnRMb2FkZWQ7XHJcbiAgICAgICAgdmFyIHRyYWNrZWRFbGVtZW50cyA9ICRzY3JvbGxzcHkuJHRyYWNrZWRFbGVtZW50cyA9IFtdO1xyXG4gICAgICAgIHZhciBzb3J0ZWRFbGVtZW50cyA9IFtdO1xyXG4gICAgICAgIHZhciBhY3RpdmVUYXJnZXQ7XHJcbiAgICAgICAgdmFyIGRlYm91bmNlZENoZWNrUG9zaXRpb247XHJcbiAgICAgICAgdmFyIHRocm90dGxlZENoZWNrUG9zaXRpb247XHJcbiAgICAgICAgdmFyIGRlYm91bmNlZENoZWNrT2Zmc2V0cztcclxuICAgICAgICB2YXIgdmlld3BvcnRIZWlnaHQ7XHJcbiAgICAgICAgdmFyIHNjcm9sbFRvcDtcclxuXHJcbiAgICAgICAgJHNjcm9sbHNweS5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgLy8gU2V0dXAgaW50ZXJuYWwgcmVmIGNvdW50ZXJcclxuICAgICAgICAgIHRoaXMuJCRjb3VudCA9IDE7XHJcblxyXG4gICAgICAgICAgLy8gQmluZCBldmVudHNcclxuICAgICAgICAgIGRlYm91bmNlZENoZWNrUG9zaXRpb24gPSBkZWJvdW5jZSh0aGlzLmNoZWNrUG9zaXRpb24sIG9wdGlvbnMuZGVib3VuY2UpO1xyXG4gICAgICAgICAgdGhyb3R0bGVkQ2hlY2tQb3NpdGlvbiA9IHRocm90dGxlKHRoaXMuY2hlY2tQb3NpdGlvbiwgb3B0aW9ucy50aHJvdHRsZSk7XHJcbiAgICAgICAgICBzY3JvbGxFbC5vbignY2xpY2snLCB0aGlzLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wKTtcclxuICAgICAgICAgIHdpbmRvd0VsLm9uKCdyZXNpemUnLCBkZWJvdW5jZWRDaGVja1Bvc2l0aW9uKTtcclxuICAgICAgICAgIHNjcm9sbEVsLm9uKCdzY3JvbGwnLCB0aHJvdHRsZWRDaGVja1Bvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICBkZWJvdW5jZWRDaGVja09mZnNldHMgPSBkZWJvdW5jZSh0aGlzLmNoZWNrT2Zmc2V0cywgb3B0aW9ucy5kZWJvdW5jZSk7XHJcbiAgICAgICAgICB1bmJpbmRWaWV3Q29udGVudExvYWRlZCA9ICRyb290U2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBkZWJvdW5jZWRDaGVja09mZnNldHMpO1xyXG4gICAgICAgICAgdW5iaW5kSW5jbHVkZUNvbnRlbnRMb2FkZWQgPSAkcm9vdFNjb3BlLiRvbignJGluY2x1ZGVDb250ZW50TG9hZGVkJywgZGVib3VuY2VkQ2hlY2tPZmZzZXRzKTtcclxuICAgICAgICAgIGRlYm91bmNlZENoZWNrT2Zmc2V0cygpO1xyXG5cclxuICAgICAgICAgIC8vIFJlZ2lzdGVyIHNweSBmb3IgcmV1c2VcclxuICAgICAgICAgIGlmKHNjcm9sbElkKSB7XHJcbiAgICAgICAgICAgIHNwaWVzW3Njcm9sbElkXSA9ICRzY3JvbGxzcHk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY3JvbGxzcHkuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIC8vIENoZWNrIGludGVybmFsIHJlZiBjb3VudGVyXHJcbiAgICAgICAgICB0aGlzLiQkY291bnQtLTtcclxuICAgICAgICAgIGlmKHRoaXMuJCRjb3VudCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFVuYmluZCBldmVudHNcclxuICAgICAgICAgIHNjcm9sbEVsLm9mZignY2xpY2snLCB0aGlzLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wKTtcclxuICAgICAgICAgIHdpbmRvd0VsLm9mZigncmVzaXplJywgZGVib3VuY2VkQ2hlY2tQb3NpdGlvbik7XHJcbiAgICAgICAgICBzY3JvbGxFbC5vZmYoJ3Njcm9sbCcsIGRlYm91bmNlZENoZWNrUG9zaXRpb24pO1xyXG4gICAgICAgICAgdW5iaW5kVmlld0NvbnRlbnRMb2FkZWQoKTtcclxuICAgICAgICAgIHVuYmluZEluY2x1ZGVDb250ZW50TG9hZGVkKCk7XHJcbiAgICAgICAgICBpZiAoc2Nyb2xsSWQpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHNwaWVzW3Njcm9sbElkXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LmNoZWNrUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAvLyBOb3QgcmVhZHkgeWV0XHJcbiAgICAgICAgICBpZighc29ydGVkRWxlbWVudHMubGVuZ3RoKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICAgIHNjcm9sbFRvcCA9IChpc1dpbmRvd1NweSA/ICR3aW5kb3cucGFnZVlPZmZzZXQgOiBzY3JvbGxFbC5wcm9wKCdzY3JvbGxUb3AnKSkgfHwgMDtcclxuXHJcbiAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHZpZXdwb3J0IGhlaWdodCBmb3IgdXNlIGJ5IHRoZSBjb21wb25lbnRzXHJcbiAgICAgICAgICB2aWV3cG9ydEhlaWdodCA9IE1hdGgubWF4KCR3aW5kb3cuaW5uZXJIZWlnaHQsIGRvY0VsLnByb3AoJ2NsaWVudEhlaWdodCcpKTtcclxuXHJcbiAgICAgICAgICAvLyBBY3RpdmF0ZSBmaXJzdCBlbGVtZW50IGlmIHNjcm9sbCBpcyBzbWFsbGVyXHJcbiAgICAgICAgICBpZihzY3JvbGxUb3AgPCBzb3J0ZWRFbGVtZW50c1swXS5vZmZzZXRUb3AgJiYgYWN0aXZlVGFyZ2V0ICE9PSBzb3J0ZWRFbGVtZW50c1swXS50YXJnZXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY3JvbGxzcHkuJGFjdGl2YXRlRWxlbWVudChzb3J0ZWRFbGVtZW50c1swXSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQWN0aXZhdGUgcHJvcGVyIGVsZW1lbnRcclxuICAgICAgICAgIGZvciAodmFyIGkgPSBzb3J0ZWRFbGVtZW50cy5sZW5ndGg7IGktLTspIHtcclxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChzb3J0ZWRFbGVtZW50c1tpXS5vZmZzZXRUb3ApIHx8IHNvcnRlZEVsZW1lbnRzW2ldLm9mZnNldFRvcCA9PT0gbnVsbCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmKGFjdGl2ZVRhcmdldCA9PT0gc29ydGVkRWxlbWVudHNbaV0udGFyZ2V0KSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYoc2Nyb2xsVG9wIDwgc29ydGVkRWxlbWVudHNbaV0ub2Zmc2V0VG9wKSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYoc29ydGVkRWxlbWVudHNbaSArIDFdICYmIHNjcm9sbFRvcCA+IHNvcnRlZEVsZW1lbnRzW2kgKyAxXS5vZmZzZXRUb3ApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gJHNjcm9sbHNweS4kYWN0aXZhdGVFbGVtZW50KHNvcnRlZEVsZW1lbnRzW2ldKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjcm9sbHNweS5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2V0VGltZW91dCh0aGlzLmNoZWNrUG9zaXRpb24sIDEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByb3RlY3RlZCBtZXRob2RzXHJcblxyXG4gICAgICAgICRzY3JvbGxzcHkuJGFjdGl2YXRlRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgIGlmKGFjdGl2ZVRhcmdldCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9ICRzY3JvbGxzcHkuJGdldFRyYWNrZWRFbGVtZW50KGFjdGl2ZVRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmKGFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50LnNvdXJjZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgaWYobm9kZU5hbWUoYWN0aXZlRWxlbWVudC5zb3VyY2UsICdsaScpICYmIG5vZGVOYW1lKGFjdGl2ZUVsZW1lbnQuc291cmNlLnBhcmVudCgpLnBhcmVudCgpLCAnbGknKSkge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudC5zb3VyY2UucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYWN0aXZlVGFyZ2V0ID0gZWxlbWVudC50YXJnZXQ7XHJcbiAgICAgICAgICBlbGVtZW50LnNvdXJjZS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICBpZihub2RlTmFtZShlbGVtZW50LnNvdXJjZSwgJ2xpJykgJiYgbm9kZU5hbWUoZWxlbWVudC5zb3VyY2UucGFyZW50KCkucGFyZW50KCksICdsaScpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc291cmNlLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LiRnZXRUcmFja2VkRWxlbWVudCA9IGZ1bmN0aW9uKHRhcmdldCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRyYWNrZWRFbGVtZW50cy5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmoudGFyZ2V0ID09PSB0YXJnZXQ7XHJcbiAgICAgICAgICB9KVswXTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBUcmFjayBvZmZzZXRzIGJlaGF2aW9yXHJcblxyXG4gICAgICAgICRzY3JvbGxzcHkuY2hlY2tPZmZzZXRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHRyYWNrZWRFbGVtZW50cywgZnVuY3Rpb24odHJhY2tlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRyYWNrZWRFbGVtZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHRyYWNrZWRFbGVtZW50Lm9mZnNldFRvcCA9IHRhcmdldEVsZW1lbnQgPyBkaW1lbnNpb25zLm9mZnNldCh0YXJnZXRFbGVtZW50KS50b3AgOiBudWxsO1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLm9mZnNldCAmJiB0cmFja2VkRWxlbWVudC5vZmZzZXRUb3AgIT09IG51bGwpIHRyYWNrZWRFbGVtZW50Lm9mZnNldFRvcCAtPSBvcHRpb25zLm9mZnNldCAqIDE7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBzb3J0ZWRFbGVtZW50cyA9IHRyYWNrZWRFbGVtZW50c1xyXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWwub2Zmc2V0VG9wICE9PSBudWxsO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEub2Zmc2V0VG9wIC0gYi5vZmZzZXRUb3A7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBkZWJvdW5jZWRDaGVja1Bvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY3JvbGxzcHkudHJhY2tFbGVtZW50ID0gZnVuY3Rpb24odGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgICAgICAgIHRyYWNrZWRFbGVtZW50cy5wdXNoKHt0YXJnZXQ6IHRhcmdldCwgc291cmNlOiBzb3VyY2V9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LnVudHJhY2tFbGVtZW50ID0gZnVuY3Rpb24odGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgICAgICAgIHZhciB0b0RlbGV0ZTtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSB0cmFja2VkRWxlbWVudHMubGVuZ3RoOyBpLS07KSB7XHJcbiAgICAgICAgICAgIGlmKHRyYWNrZWRFbGVtZW50c1tpXS50YXJnZXQgPT09IHRhcmdldCAmJiB0cmFja2VkRWxlbWVudHNbaV0uc291cmNlID09PSBzb3VyY2UpIHtcclxuICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRyYWNrZWRFbGVtZW50cyA9IHRyYWNrZWRFbGVtZW50cy5zcGxpY2UodG9EZWxldGUsIDEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY3JvbGxzcHkuYWN0aXZhdGUgPSBmdW5jdGlvbihpKSB7XHJcbiAgICAgICAgICB0cmFja2VkRWxlbWVudHNbaV0uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgcGx1Z2luXHJcblxyXG4gICAgICAgICRzY3JvbGxzcHkuaW5pdCgpO1xyXG4gICAgICAgIHJldHVybiAkc2Nyb2xsc3B5O1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIFNjcm9sbFNweUZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzU2Nyb2xsc3B5JywgW1wiJHJvb3RTY29wZVwiLCBcImRlYm91bmNlXCIsIFwiZGltZW5zaW9uc1wiLCBcIiRzY3JvbGxzcHlcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSwgZGVib3VuY2UsIGRpbWVuc2lvbnMsICRzY3JvbGxzcHkpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0ge3Njb3BlOiBzY29wZX07XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsnb2Zmc2V0JywgJ3RhcmdldCddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJba2V5XSkpIG9wdGlvbnNba2V5XSA9IGF0dHJba2V5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHNjcm9sbHNweSA9ICRzY3JvbGxzcHkob3B0aW9ucyk7XHJcbiAgICAgICAgc2Nyb2xsc3B5LnRyYWNrRWxlbWVudChvcHRpb25zLnRhcmdldCwgZWxlbWVudCk7XHJcblxyXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChzY3JvbGxzcHkpIHtcclxuICAgICAgICAgICAgc2Nyb2xsc3B5LnVudHJhY2tFbGVtZW50KG9wdGlvbnMudGFyZ2V0LCBlbGVtZW50KTtcclxuICAgICAgICAgICAgc2Nyb2xsc3B5LmRlc3Ryb3koKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgc2Nyb2xsc3B5ID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKVxyXG5cclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNTY3JvbGxzcHlMaXN0JywgW1wiJHJvb3RTY29wZVwiLCBcImRlYm91bmNlXCIsIFwiZGltZW5zaW9uc1wiLCBcIiRzY3JvbGxzcHlcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSwgZGVib3VuY2UsIGRpbWVuc2lvbnMsICRzY3JvbGxzcHkpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICBjb21waWxlOiBmdW5jdGlvbiBwb3N0TGluayhlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCdsaSA+IGFbaHJlZl0nKTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XHJcbiAgICAgICAgICB2YXIgY2hpbGRFbCA9IGFuZ3VsYXIuZWxlbWVudChjaGlsZCk7XHJcbiAgICAgICAgICBjaGlsZEVsLnBhcmVudCgpLmF0dHIoJ2JzLXNjcm9sbHNweScsICcnKS5hdHRyKCdkYXRhLXRhcmdldCcsIGNoaWxkRWwuYXR0cignaHJlZicpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogc2VsZWN0LmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5zZWxlY3QnLCBbJ21nY3JlYS5uZ1N0cmFwLnRvb2x0aXAnLCAnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5wYXJzZU9wdGlvbnMnXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckc2VsZWN0JywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tZmFkZScsXHJcbiAgICAgIHByZWZpeENsYXNzOiAnc2VsZWN0JyxcclxuICAgICAgcHJlZml4RXZlbnQ6ICckc2VsZWN0JyxcclxuICAgICAgcGxhY2VtZW50OiAnYm90dG9tLWxlZnQnLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3NlbGVjdC9zZWxlY3QudHBsLmh0bWwnLFxyXG4gICAgICB0cmlnZ2VyOiAnZm9jdXMnLFxyXG4gICAgICBjb250YWluZXI6IGZhbHNlLFxyXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcclxuICAgICAgaHRtbDogZmFsc2UsXHJcbiAgICAgIGRlbGF5OiAwLFxyXG4gICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgIGFsbE5vbmVCdXR0b25zOiBmYWxzZSxcclxuICAgICAgc29ydDogdHJ1ZSxcclxuICAgICAgY2FyZXRIdG1sOiAnJm5ic3A7PHNwYW4gY2xhc3M9XCJjYXJldFwiPjwvc3Bhbj4nLFxyXG4gICAgICBwbGFjZWhvbGRlcjogJ0Nob29zZSBhbW9uZyB0aGUgZm9sbG93aW5nLi4uJyxcclxuICAgICAgbWF4TGVuZ3RoOiAzLFxyXG4gICAgICBtYXhMZW5ndGhIdG1sOiAnc2VsZWN0ZWQnLFxyXG4gICAgICBpY29uQ2hlY2ttYXJrOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1vaydcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHdpbmRvd1wiLCBcIiRkb2N1bWVudFwiLCBcIiRyb290U2NvcGVcIiwgXCIkdG9vbHRpcFwiLCBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQsICRyb290U2NvcGUsICR0b29sdGlwKSB7XHJcblxyXG4gICAgICB2YXIgYm9keUVsID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cuZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgIHZhciBpc05hdGl2ZSA9IC8oaXAoYXxvKWR8aXBob25lfGFuZHJvaWQpL2lnLnRlc3QoJHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgICAgdmFyIGlzVG91Y2ggPSAoJ2NyZWF0ZVRvdWNoJyBpbiAkd2luZG93LmRvY3VtZW50KSAmJiBpc05hdGl2ZTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIFNlbGVjdEZhY3RvcnkoZWxlbWVudCwgY29udHJvbGxlciwgY29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciAkc2VsZWN0ID0ge307XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiB2YXJzXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcblxyXG4gICAgICAgICRzZWxlY3QgPSAkdG9vbHRpcChlbGVtZW50LCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgc2NvcGUgPSAkc2VsZWN0LiRzY29wZTtcclxuXHJcbiAgICAgICAgc2NvcGUuJG1hdGNoZXMgPSBbXTtcclxuICAgICAgICBzY29wZS4kYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICAgIHNjb3BlLiRpc011bHRpcGxlID0gb3B0aW9ucy5tdWx0aXBsZTtcclxuICAgICAgICBzY29wZS4kc2hvd0FsbE5vbmVCdXR0b25zID0gb3B0aW9ucy5hbGxOb25lQnV0dG9ucyAmJiBvcHRpb25zLm11bHRpcGxlO1xyXG4gICAgICAgIHNjb3BlLiRpY29uQ2hlY2ttYXJrID0gb3B0aW9ucy5pY29uQ2hlY2ttYXJrO1xyXG5cclxuICAgICAgICBzY29wZS4kYWN0aXZhdGUgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2VsZWN0LmFjdGl2YXRlKGluZGV4KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLiRzZWxlY3QgPSBmdW5jdGlvbihpbmRleCwgZXZ0KSB7XHJcbiAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzZWxlY3Quc2VsZWN0KGluZGV4KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLiRpc1Zpc2libGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiAkc2VsZWN0LiRpc1Zpc2libGUoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzY29wZS4kaXNBY3RpdmUgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgcmV0dXJuICRzZWxlY3QuJGlzQWN0aXZlKGluZGV4KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzY29wZS4kc2VsZWN0QWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY29wZS4kbWF0Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIXNjb3BlLiRpc0FjdGl2ZShpKSkge1xyXG4gICAgICAgICAgICAgIHNjb3BlLiRzZWxlY3QoaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzY29wZS4kc2VsZWN0Tm9uZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NvcGUuJG1hdGNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHNjb3BlLiRpc0FjdGl2ZShpKSkge1xyXG4gICAgICAgICAgICAgIHNjb3BlLiRzZWxlY3QoaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAkc2VsZWN0LnVwZGF0ZSA9IGZ1bmN0aW9uKG1hdGNoZXMpIHtcclxuICAgICAgICAgIHNjb3BlLiRtYXRjaGVzID0gbWF0Y2hlcztcclxuICAgICAgICAgICRzZWxlY3QuJHVwZGF0ZUFjdGl2ZUluZGV4KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNlbGVjdC5hY3RpdmF0ZSA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICBpZihvcHRpb25zLm11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiRhY3RpdmVJbmRleC5zb3J0KCk7XHJcbiAgICAgICAgICAgICRzZWxlY3QuJGlzQWN0aXZlKGluZGV4KSA/IHNjb3BlLiRhY3RpdmVJbmRleC5zcGxpY2Uoc2NvcGUuJGFjdGl2ZUluZGV4LmluZGV4T2YoaW5kZXgpLCAxKSA6IHNjb3BlLiRhY3RpdmVJbmRleC5wdXNoKGluZGV4KTtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5zb3J0KSBzY29wZS4kYWN0aXZlSW5kZXguc29ydCgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2NvcGUuJGFjdGl2ZUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gc2NvcGUuJGFjdGl2ZUluZGV4O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzZWxlY3Quc2VsZWN0ID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgIHZhciB2YWx1ZSA9IHNjb3BlLiRtYXRjaGVzW2luZGV4XS52YWx1ZTtcclxuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNlbGVjdC5hY3RpdmF0ZShpbmRleCk7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMubXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoc2NvcGUuJGFjdGl2ZUluZGV4Lm1hcChmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRtYXRjaGVzW2luZGV4XS52YWx1ZTtcclxuICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAvLyBIaWRlIGlmIHNpbmdsZSBzZWxlY3RcclxuICAgICAgICAgICAgICAkc2VsZWN0LmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAvLyBFbWl0IGV2ZW50XHJcbiAgICAgICAgICBzY29wZS4kZW1pdChvcHRpb25zLnByZWZpeEV2ZW50ICsgJy5zZWxlY3QnLCB2YWx1ZSwgaW5kZXgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByb3RlY3RlZCBtZXRob2RzXHJcblxyXG4gICAgICAgICRzZWxlY3QuJHVwZGF0ZUFjdGl2ZUluZGV4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZihjb250cm9sbGVyLiRtb2RlbFZhbHVlICYmIHNjb3BlLiRtYXRjaGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLm11bHRpcGxlICYmIGFuZ3VsYXIuaXNBcnJheShjb250cm9sbGVyLiRtb2RlbFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgIHNjb3BlLiRhY3RpdmVJbmRleCA9IGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNlbGVjdC4kZ2V0SW5kZXgodmFsdWUpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNjb3BlLiRhY3RpdmVJbmRleCA9ICRzZWxlY3QuJGdldEluZGV4KGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYoc2NvcGUuJGFjdGl2ZUluZGV4ID49IHNjb3BlLiRtYXRjaGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzY29wZS4kYWN0aXZlSW5kZXggPSBvcHRpb25zLm11bHRpcGxlID8gW10gOiAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzZWxlY3QuJGlzVmlzaWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYoIW9wdGlvbnMubWluTGVuZ3RoIHx8ICFjb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzY29wZS4kbWF0Y2hlcy5sZW5ndGg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBtaW5MZW5ndGggc3VwcG9ydFxyXG4gICAgICAgICAgcmV0dXJuIHNjb3BlLiRtYXRjaGVzLmxlbmd0aCAmJiBjb250cm9sbGVyLiR2aWV3VmFsdWUubGVuZ3RoID49IG9wdGlvbnMubWluTGVuZ3RoO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzZWxlY3QuJGlzQWN0aXZlID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgIGlmKG9wdGlvbnMubXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRhY3RpdmVJbmRleC5pbmRleE9mKGluZGV4KSAhPT0gLTE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFjdGl2ZUluZGV4ID09PSBpbmRleDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2VsZWN0LiRnZXRJbmRleCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICB2YXIgbCA9IHNjb3BlLiRtYXRjaGVzLmxlbmd0aCwgaSA9IGw7XHJcbiAgICAgICAgICBpZighbCkgcmV0dXJuO1xyXG4gICAgICAgICAgZm9yKGkgPSBsOyBpLS07KSB7XHJcbiAgICAgICAgICAgIGlmKHNjb3BlLiRtYXRjaGVzW2ldLnZhbHVlID09PSB2YWx1ZSkgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihpIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNlbGVjdC4kb25Nb3VzZURvd24gPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIC8vIFByZXZlbnQgYmx1ciBvbiBtb3VzZWRvd24gb24gLmRyb3Bkb3duLW1lbnVcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgLy8gRW11bGF0ZSBjbGljayBmb3IgbW9iaWxlIGRldmljZXNcclxuICAgICAgICAgIGlmKGlzVG91Y2gpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldEVsID0gYW5ndWxhci5lbGVtZW50KGV2dC50YXJnZXQpO1xyXG4gICAgICAgICAgICB0YXJnZXRFbC50cmlnZ2VySGFuZGxlcignY2xpY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2VsZWN0LiRvbktleURvd24gPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIGlmICghLyg5fDEzfDM4fDQwKS8udGVzdChldnQua2V5Q29kZSkpIHJldHVybjtcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgIC8vIFNlbGVjdCB3aXRoIGVudGVyXHJcbiAgICAgICAgICBpZighb3B0aW9ucy5tdWx0aXBsZSAmJiAoZXZ0LmtleUNvZGUgPT09IDEzIHx8IGV2dC5rZXlDb2RlID09PSA5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHNlbGVjdC5zZWxlY3Qoc2NvcGUuJGFjdGl2ZUluZGV4KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBOYXZpZ2F0ZSB3aXRoIGtleWJvYXJkXHJcbiAgICAgICAgICBpZihldnQua2V5Q29kZSA9PT0gMzggJiYgc2NvcGUuJGFjdGl2ZUluZGV4ID4gMCkgc2NvcGUuJGFjdGl2ZUluZGV4LS07XHJcbiAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSA0MCAmJiBzY29wZS4kYWN0aXZlSW5kZXggPCBzY29wZS4kbWF0Y2hlcy5sZW5ndGggLSAxKSBzY29wZS4kYWN0aXZlSW5kZXgrKztcclxuICAgICAgICAgIGVsc2UgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChzY29wZS4kYWN0aXZlSW5kZXgpKSBzY29wZS4kYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIE92ZXJyaWRlc1xyXG5cclxuICAgICAgICB2YXIgX3Nob3cgPSAkc2VsZWN0LnNob3c7XHJcbiAgICAgICAgJHNlbGVjdC5zaG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBfc2hvdygpO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAkc2VsZWN0LiRlbGVtZW50LmFkZENsYXNzKCdzZWxlY3QtbXVsdGlwbGUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzZWxlY3QuJGVsZW1lbnQub24oaXNUb3VjaCA/ICd0b3VjaHN0YXJ0JyA6ICdtb3VzZWRvd24nLCAkc2VsZWN0LiRvbk1vdXNlRG93bik7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMua2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgJHNlbGVjdC4kb25LZXlEb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9oaWRlID0gJHNlbGVjdC5oaWRlO1xyXG4gICAgICAgICRzZWxlY3QuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHNlbGVjdC4kZWxlbWVudC5vZmYoaXNUb3VjaCA/ICd0b3VjaHN0YXJ0JyA6ICdtb3VzZWRvd24nLCAkc2VsZWN0LiRvbk1vdXNlRG93bik7XHJcbiAgICAgICAgICBpZihvcHRpb25zLmtleWJvYXJkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub2ZmKCdrZXlkb3duJywgJHNlbGVjdC4kb25LZXlEb3duKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF9oaWRlKHRydWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAkc2VsZWN0O1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgU2VsZWN0RmFjdG9yeS5kZWZhdWx0cyA9IGRlZmF1bHRzO1xyXG4gICAgICByZXR1cm4gU2VsZWN0RmFjdG9yeTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNTZWxlY3QnLCBbXCIkd2luZG93XCIsIFwiJHBhcnNlXCIsIFwiJHFcIiwgXCIkc2VsZWN0XCIsIFwiJHBhcnNlT3B0aW9uc1wiLCBmdW5jdGlvbigkd2luZG93LCAkcGFyc2UsICRxLCAkc2VsZWN0LCAkcGFyc2VPcHRpb25zKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gJHNlbGVjdC5kZWZhdWx0cztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGNvbnRyb2xsZXIpIHtcclxuXHJcbiAgICAgICAgLy8gRGlyZWN0aXZlIG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGV9O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3BsYWNlbWVudCcsICdjb250YWluZXInLCAnZGVsYXknLCAndHJpZ2dlcicsICdrZXlib2FyZCcsICdodG1sJywgJ2FuaW1hdGlvbicsICd0ZW1wbGF0ZScsICdwbGFjZWhvbGRlcicsICdtdWx0aXBsZScsICdhbGxOb25lQnV0dG9ucycsICdtYXhMZW5ndGgnLCAnbWF4TGVuZ3RoSHRtbCddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJba2V5XSkpIG9wdGlvbnNba2V5XSA9IGF0dHJba2V5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHN1cHBvcnQgZm9yIHNlbGVjdCBtYXJrdXBcclxuICAgICAgICBpZihlbGVtZW50WzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzZWxlY3QnKSB7XHJcbiAgICAgICAgICB2YXIgaW5wdXRFbCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICBpbnB1dEVsLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiPjwvYnV0dG9uPicpO1xyXG4gICAgICAgICAgaW5wdXRFbC5hZnRlcihlbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIHByb3BlciBuZ09wdGlvbnNcclxuICAgICAgICB2YXIgcGFyc2VkT3B0aW9ucyA9ICRwYXJzZU9wdGlvbnMoYXR0ci5uZ09wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIHNlbGVjdFxyXG4gICAgICAgIHZhciBzZWxlY3QgPSAkc2VsZWN0KGVsZW1lbnQsIGNvbnRyb2xsZXIsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBXYXRjaCBuZ09wdGlvbnMgdmFsdWVzIGJlZm9yZSBmaWx0ZXJpbmcgZm9yIGNoYW5nZXNcclxuICAgICAgICB2YXIgd2F0Y2hlZE9wdGlvbnMgPSBwYXJzZWRPcHRpb25zLiRtYXRjaFs3XS5yZXBsYWNlKC9cXHwuKy8sICcnKS50cmltKCk7XHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKHdhdGNoZWRPcHRpb25zLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2Fybignc2NvcGUuJHdhdGNoKCVzKScsIHdhdGNoZWRPcHRpb25zLCBuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgcGFyc2VkT3B0aW9ucy52YWx1ZXNGbihzY29wZSwgY29udHJvbGxlcilcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHZhbHVlcykge1xyXG4gICAgICAgICAgICBzZWxlY3QudXBkYXRlKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlcigpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIFdhdGNoIG1vZGVsIGZvciBjaGFuZ2VzXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdNb2RlbCwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJ3Njb3BlLiR3YXRjaCglcyknLCBhdHRyLm5nTW9kZWwsIG5ld1ZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgICBzZWxlY3QuJHVwZGF0ZUFjdGl2ZUluZGV4KCk7XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIoKTtcclxuICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gTW9kZWwgcmVuZGVyaW5nIGluIHZpZXdcclxuICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRyZW5kZXInLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksICdjb250cm9sbGVyLiRtb2RlbFZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUsIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUsICdjb250cm9sbGVyLiR2aWV3VmFsdWUnLCB0eXBlb2YgY29udHJvbGxlci4kdmlld1ZhbHVlLCBjb250cm9sbGVyLiR2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgdmFyIHNlbGVjdGVkLCBpbmRleDtcclxuICAgICAgICAgIGlmKG9wdGlvbnMubXVsdGlwbGUgJiYgYW5ndWxhci5pc0FycmF5KGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkID0gY29udHJvbGxlci4kbW9kZWxWYWx1ZS5tYXAoZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICBpbmRleCA9IHNlbGVjdC4kZ2V0SW5kZXgodmFsdWUpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmlzRGVmaW5lZChpbmRleCkgPyBzZWxlY3QuJHNjb3BlLiRtYXRjaGVzW2luZGV4XS5sYWJlbCA6IGZhbHNlO1xyXG4gICAgICAgICAgICB9KS5maWx0ZXIoYW5ndWxhci5pc0RlZmluZWQpO1xyXG4gICAgICAgICAgICBpZihzZWxlY3RlZC5sZW5ndGggPiAob3B0aW9ucy5tYXhMZW5ndGggfHwgZGVmYXVsdHMubWF4TGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkID0gc2VsZWN0ZWQubGVuZ3RoICsgJyAnICsgKG9wdGlvbnMubWF4TGVuZ3RoSHRtbCB8fCBkZWZhdWx0cy5tYXhMZW5ndGhIdG1sKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZWxlY3RlZCA9IHNlbGVjdGVkLmpvaW4oJywgJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gc2VsZWN0LiRnZXRJbmRleChjb250cm9sbGVyLiRtb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgc2VsZWN0ZWQgPSBhbmd1bGFyLmlzRGVmaW5lZChpbmRleCkgPyBzZWxlY3QuJHNjb3BlLiRtYXRjaGVzW2luZGV4XS5sYWJlbCA6IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxlbWVudC5odG1sKChzZWxlY3RlZCA/IHNlbGVjdGVkIDogYXR0ci5wbGFjZWhvbGRlciB8fCBkZWZhdWx0cy5wbGFjZWhvbGRlcikgKyBkZWZhdWx0cy5jYXJldEh0bWwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEdhcmJhZ2UgY29sbGVjdGlvblxyXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChzZWxlY3QpIHNlbGVjdC5kZXN0cm95KCk7XHJcbiAgICAgICAgICBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICAgIHNlbGVjdCA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IHRhYi5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAudGFiJywgW10pXHJcblxyXG4gIC5wcm92aWRlcignJHRhYicsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3RhYi90YWIudHBsLmh0bWwnLFxyXG4gICAgICBuYXZDbGFzczogJ25hdi10YWJzJyxcclxuICAgICAgYWN0aXZlQ2xhc3M6ICdhY3RpdmUnXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgIC8vIEF0dHJpYnV0ZXMgb3B0aW9uc1xyXG4gICAgICBzZWxmLiRvcHRpb25zID0gYW5ndWxhci5jb3B5KGRlZmF1bHRzKTtcclxuICAgICAgYW5ndWxhci5mb3JFYWNoKFsnYW5pbWF0aW9uJywgJ25hdkNsYXNzJywgJ2FjdGl2ZUNsYXNzJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRyc1trZXldKSkgc2VsZi4kb3B0aW9uc1trZXldID0gJGF0dHJzW2tleV07XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gUHVibGlzaCBvcHRpb25zIG9uIHNjb3BlXHJcbiAgICAgICRzY29wZS4kbmF2Q2xhc3MgPSBzZWxmLiRvcHRpb25zLm5hdkNsYXNzO1xyXG4gICAgICAkc2NvcGUuJGFjdGl2ZUNsYXNzID0gc2VsZi4kb3B0aW9ucy5hY3RpdmVDbGFzcztcclxuXHJcbiAgICAgIHNlbGYuJHBhbmVzID0gJHNjb3BlLiRwYW5lcyA9IFtdO1xyXG5cclxuICAgICAgc2VsZi4kdmlld0NoYW5nZUxpc3RlbmVycyA9IFtdO1xyXG5cclxuICAgICAgc2VsZi4kcHVzaCA9IGZ1bmN0aW9uKHBhbmUpIHtcclxuICAgICAgICBzZWxmLiRwYW5lcy5wdXNoKHBhbmUpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2VsZi4kcGFuZXMuJGFjdGl2ZSA9IDA7XHJcbiAgICAgIHNlbGYuJHNldEFjdGl2ZSA9ICRzY29wZS4kc2V0QWN0aXZlID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBzZWxmLiRwYW5lcy4kYWN0aXZlID0gdmFsdWU7XHJcbiAgICAgICAgc2VsZi4kdmlld0NoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICBmbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciAkdGFiID0ge307XHJcbiAgICAgICR0YWIuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgJHRhYi5jb250cm9sbGVyID0gY29udHJvbGxlcjtcclxuICAgICAgcmV0dXJuICR0YWI7XHJcbiAgICB9O1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic1RhYnMnLCBbXCIkd2luZG93XCIsIFwiJGFuaW1hdGVcIiwgXCIkdGFiXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRhbmltYXRlLCAkdGFiKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gJHRhYi5kZWZhdWx0cztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXF1aXJlOiBbJz9uZ01vZGVsJywgJ2JzVGFicyddLFxyXG4gICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJywgJHRhYi5jb250cm9sbGVyXSxcclxuICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICByZXR1cm4gYXR0ci50ZW1wbGF0ZSB8fCBkZWZhdWx0cy50ZW1wbGF0ZTtcclxuICAgICAgfSxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycykge1xyXG5cclxuICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjb250cm9sbGVyc1swXTtcclxuICAgICAgICB2YXIgYnNUYWJzQ3RybCA9IGNvbnRyb2xsZXJzWzFdO1xyXG5cclxuICAgICAgICBpZihuZ01vZGVsQ3RybCkge1xyXG5cclxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbW9kZWxWYWx1ZSBmb2xsb3dpbmdcclxuICAgICAgICAgIGJzVGFic0N0cmwuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShic1RhYnNDdHJsLiRwYW5lcy4kYWN0aXZlKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8vIG1vZGVsVmFsdWUgLT4gJGZvcm1hdHRlcnMgLT4gdmlld1ZhbHVlXHJcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCckZm9ybWF0dGVyKFwiJXNcIik6IG1vZGVsVmFsdWU9JW8gKCVvKScsIGVsZW1lbnQuYXR0cignbmctbW9kZWwnKSwgbW9kZWxWYWx1ZSwgdHlwZW9mIG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgICBic1RhYnNDdHJsLiRzZXRBY3RpdmUobW9kZWxWYWx1ZSAqIDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kZWxWYWx1ZTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNQYW5lJywgW1wiJHdpbmRvd1wiLCBcIiRhbmltYXRlXCIsIFwiJHNjZVwiLCBmdW5jdGlvbigkd2luZG93LCAkYW5pbWF0ZSwgJHNjZSkge1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlcXVpcmU6IFsnXj9uZ01vZGVsJywgJ15ic1RhYnMnXSxcclxuICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMpIHtcclxuXHJcbiAgICAgICAgdmFyIG5nTW9kZWxDdHJsID0gY29udHJvbGxlcnNbMF07XHJcbiAgICAgICAgdmFyIGJzVGFic0N0cmwgPSBjb250cm9sbGVyc1sxXTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGJhc2UgY2xhc3NcclxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCd0YWItcGFuZScpO1xyXG5cclxuICAgICAgICAvLyBPYnNlcnZlIHRpdGxlIGF0dHJpYnV0ZSBmb3IgY2hhbmdlXHJcbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3RpdGxlJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBzY29wZS50aXRsZSA9ICRzY2UudHJ1c3RBc0h0bWwobmV3VmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBZGQgYW5pbWF0aW9uIGNsYXNzXHJcbiAgICAgICAgaWYoYnNUYWJzQ3RybC4kb3B0aW9ucy5hbmltYXRpb24pIHtcclxuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoYnNUYWJzQ3RybC4kb3B0aW9ucy5hbmltYXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUHVzaCBwYW5lIHRvIHBhcmVudCBic1RhYnMgY29udHJvbGxlclxyXG4gICAgICAgIGJzVGFic0N0cmwuJHB1c2goc2NvcGUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgICAgICAgICB2YXIgaW5kZXggPSBic1RhYnNDdHJsLiRwYW5lcy5pbmRleE9mKHNjb3BlKTtcclxuICAgICAgICAgIHZhciBhY3RpdmUgPSBic1RhYnNDdHJsLiRwYW5lcy4kYWN0aXZlO1xyXG4gICAgICAgICAgJGFuaW1hdGVbaW5kZXggPT09IGFjdGl2ZSA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXShlbGVtZW50LCBic1RhYnNDdHJsLiRvcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJzVGFic0N0cmwuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlbmRlcigpO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxuLy8gU291cmNlOiB0aW1lcGlja2VyLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC50aW1lcGlja2VyJywgWydtZ2NyZWEubmdTdHJhcC5oZWxwZXJzLmRhdGVQYXJzZXInLCAnbWdjcmVhLm5nU3RyYXAudG9vbHRpcCddKVxyXG5cclxuICAucHJvdmlkZXIoJyR0aW1lcGlja2VyJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tZmFkZScsXHJcbiAgICAgIHByZWZpeENsYXNzOiAndGltZXBpY2tlcicsXHJcbiAgICAgIHBsYWNlbWVudDogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgdGVtcGxhdGU6ICd0aW1lcGlja2VyL3RpbWVwaWNrZXIudHBsLmh0bWwnLFxyXG4gICAgICB0cmlnZ2VyOiAnZm9jdXMnLFxyXG4gICAgICBjb250YWluZXI6IGZhbHNlLFxyXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcclxuICAgICAgaHRtbDogZmFsc2UsXHJcbiAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAvLyBsYW5nOiAkbG9jYWxlLmlkLFxyXG4gICAgICB1c2VOYXRpdmU6IHRydWUsXHJcbiAgICAgIHRpbWVUeXBlOiAnZGF0ZScsXHJcbiAgICAgIHRpbWVGb3JtYXQ6ICdzaG9ydFRpbWUnLFxyXG4gICAgICBtb2RlbFRpbWVGb3JtYXQ6IG51bGwsXHJcbiAgICAgIGF1dG9jbG9zZTogZmFsc2UsXHJcbiAgICAgIG1pblRpbWU6IC1JbmZpbml0eSxcclxuICAgICAgbWF4VGltZTogK0luZmluaXR5LFxyXG4gICAgICBsZW5ndGg6IDUsXHJcbiAgICAgIGhvdXJTdGVwOiAxLFxyXG4gICAgICBtaW51dGVTdGVwOiA1LFxyXG4gICAgICBpY29uVXA6ICdnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXAnLFxyXG4gICAgICBpY29uRG93bjogJ2dseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duJyxcclxuICAgICAgYXJyb3dCZWhhdmlvcjogJ3BhZ2VyJ1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkd2luZG93XCIsIFwiJGRvY3VtZW50XCIsIFwiJHJvb3RTY29wZVwiLCBcIiRzY2VcIiwgXCIkbG9jYWxlXCIsIFwiZGF0ZUZpbHRlclwiLCBcIiR0b29sdGlwXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRkb2N1bWVudCwgJHJvb3RTY29wZSwgJHNjZSwgJGxvY2FsZSwgZGF0ZUZpbHRlciwgJHRvb2x0aXApIHtcclxuXHJcbiAgICAgIHZhciBib2R5RWwgPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdy5kb2N1bWVudC5ib2R5KTtcclxuICAgICAgdmFyIGlzTmF0aXZlID0gLyhpcChhfG8pZHxpcGhvbmV8YW5kcm9pZCkvaWcudGVzdCgkd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgICB2YXIgaXNUb3VjaCA9ICgnY3JlYXRlVG91Y2gnIGluICR3aW5kb3cuZG9jdW1lbnQpICYmIGlzTmF0aXZlO1xyXG4gICAgICBpZighZGVmYXVsdHMubGFuZykgZGVmYXVsdHMubGFuZyA9ICRsb2NhbGUuaWQ7XHJcblxyXG4gICAgICBmdW5jdGlvbiB0aW1lcGlja2VyRmFjdG9yeShlbGVtZW50LCBjb250cm9sbGVyLCBjb25maWcpIHtcclxuXHJcbiAgICAgICAgdmFyICR0aW1lcGlja2VyID0gJHRvb2x0aXAoZWxlbWVudCwgYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpKTtcclxuICAgICAgICB2YXIgcGFyZW50U2NvcGUgPSBjb25maWcuc2NvcGU7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAkdGltZXBpY2tlci4kb3B0aW9ucztcclxuICAgICAgICB2YXIgc2NvcGUgPSAkdGltZXBpY2tlci4kc2NvcGU7XHJcblxyXG4gICAgICAgIC8vIFZpZXcgdmFyc1xyXG5cclxuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgICAgICAgdmFyIHN0YXJ0RGF0ZSA9IGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSB8fCBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHZhciB2aWV3RGF0ZSA9IHtob3VyOiBzdGFydERhdGUuZ2V0SG91cnMoKSwgbWVyaWRpYW46IHN0YXJ0RGF0ZS5nZXRIb3VycygpIDwgMTIsIG1pbnV0ZTogc3RhcnREYXRlLmdldE1pbnV0ZXMoKSwgc2Vjb25kOiBzdGFydERhdGUuZ2V0U2Vjb25kcygpLCBtaWxsaXNlY29uZDogc3RhcnREYXRlLmdldE1pbGxpc2Vjb25kcygpfTtcclxuXHJcbiAgICAgICAgdmFyIGZvcm1hdCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUU1tvcHRpb25zLnRpbWVGb3JtYXRdIHx8IG9wdGlvbnMudGltZUZvcm1hdDtcclxuICAgICAgICB2YXIgZm9ybWF0cyA9IC8oaCspKFs6XFwuXSk/KG0rKVsgXT8oYT8pL2kuZXhlYyhmb3JtYXQpLnNsaWNlKDEpO1xyXG4gICAgICAgIHNjb3BlLiRpY29uVXAgPSBvcHRpb25zLmljb25VcDtcclxuICAgICAgICBzY29wZS4kaWNvbkRvd24gPSBvcHRpb25zLmljb25Eb3duO1xyXG5cclxuICAgICAgICAvLyBTY29wZSBtZXRob2RzXHJcblxyXG4gICAgICAgIHNjb3BlLiRzZWxlY3QgPSBmdW5jdGlvbihkYXRlLCBpbmRleCkge1xyXG4gICAgICAgICAgJHRpbWVwaWNrZXIuc2VsZWN0KGRhdGUsIGluZGV4KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNjb3BlLiRtb3ZlSW5kZXggPSBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcclxuICAgICAgICAgICR0aW1lcGlja2VyLiRtb3ZlSW5kZXgodmFsdWUsIGluZGV4KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNjb3BlLiRzd2l0Y2hNZXJpZGlhbiA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgICR0aW1lcGlja2VyLnN3aXRjaE1lcmlkaWFuKGRhdGUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFB1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgICR0aW1lcGlja2VyLnVwZGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHRpbWVwaWNrZXIudXBkYXRlKCkgbmV3VmFsdWU9JW8nLCBkYXRlKTtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEYXRlKGRhdGUpICYmICFpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICAgICAgJHRpbWVwaWNrZXIuJGRhdGUgPSBkYXRlO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge2hvdXI6IGRhdGUuZ2V0SG91cnMoKSwgbWludXRlOiBkYXRlLmdldE1pbnV0ZXMoKSwgc2Vjb25kOiBkYXRlLmdldFNlY29uZHMoKSwgbWlsbGlzZWNvbmQ6IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCl9KTtcclxuICAgICAgICAgICAgJHRpbWVwaWNrZXIuJGJ1aWxkKCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYoISR0aW1lcGlja2VyLiRpc0J1aWx0KSB7XHJcbiAgICAgICAgICAgICR0aW1lcGlja2VyLiRidWlsZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0aW1lcGlja2VyLnNlbGVjdCA9IGZ1bmN0aW9uKGRhdGUsIGluZGV4LCBrZWVwKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyR0aW1lcGlja2VyLnNlbGVjdCcsIGRhdGUsIHNjb3BlLiRtb2RlKTtcclxuICAgICAgICAgIGlmKCFjb250cm9sbGVyLiRkYXRlVmFsdWUgfHwgaXNOYU4oY29udHJvbGxlci4kZGF0ZVZhbHVlLmdldFRpbWUoKSkpIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSA9IG5ldyBEYXRlKDE5NzAsIDAsIDEpO1xyXG4gICAgICAgICAgaWYoIWFuZ3VsYXIuaXNEYXRlKGRhdGUpKSBkYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICBpZihpbmRleCA9PT0gMCkgY29udHJvbGxlci4kZGF0ZVZhbHVlLnNldEhvdXJzKGRhdGUuZ2V0SG91cnMoKSk7XHJcbiAgICAgICAgICBlbHNlIGlmKGluZGV4ID09PSAxKSBjb250cm9sbGVyLiRkYXRlVmFsdWUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSk7XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoY29udHJvbGxlci4kZGF0ZVZhbHVlKTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlcigpO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5hdXRvY2xvc2UgJiYgIWtlZXApIHtcclxuICAgICAgICAgICAgJHRpbWVwaWNrZXIuaGlkZSh0cnVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdGltZXBpY2tlci5zd2l0Y2hNZXJpZGlhbiA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgIHZhciBob3VycyA9IChkYXRlIHx8IGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSkuZ2V0SG91cnMoKTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS5zZXRIb3Vycyhob3VycyA8IDEyID8gaG91cnMgKyAxMiA6IGhvdXJzIC0gMTIpO1xyXG4gICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAkdGltZXBpY2tlci4kYnVpbGQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHRpbWVwaWNrZXIuJGJ1aWxkKCkgdmlld0RhdGU9JW8nLCB2aWV3RGF0ZSk7XHJcbiAgICAgICAgICB2YXIgaSwgbWlkSW5kZXggPSBzY29wZS5taWRJbmRleCA9IHBhcnNlSW50KG9wdGlvbnMubGVuZ3RoIC8gMiwgMTApO1xyXG4gICAgICAgICAgdmFyIGhvdXJzID0gW10sIGhvdXI7XHJcbiAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGhvdXIgPSBuZXcgRGF0ZSgxOTcwLCAwLCAxLCB2aWV3RGF0ZS5ob3VyIC0gKG1pZEluZGV4IC0gaSkgKiBvcHRpb25zLmhvdXJTdGVwKTtcclxuICAgICAgICAgICAgaG91cnMucHVzaCh7ZGF0ZTogaG91ciwgbGFiZWw6IGRhdGVGaWx0ZXIoaG91ciwgZm9ybWF0c1swXSksIHNlbGVjdGVkOiAkdGltZXBpY2tlci4kZGF0ZSAmJiAkdGltZXBpY2tlci4kaXNTZWxlY3RlZChob3VyLCAwKSwgZGlzYWJsZWQ6ICR0aW1lcGlja2VyLiRpc0Rpc2FibGVkKGhvdXIsIDApfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgbWludXRlcyA9IFtdLCBtaW51dGU7XHJcbiAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG1pbnV0ZSA9IG5ldyBEYXRlKDE5NzAsIDAsIDEsIDAsIHZpZXdEYXRlLm1pbnV0ZSAtIChtaWRJbmRleCAtIGkpICogb3B0aW9ucy5taW51dGVTdGVwKTtcclxuICAgICAgICAgICAgbWludXRlcy5wdXNoKHtkYXRlOiBtaW51dGUsIGxhYmVsOiBkYXRlRmlsdGVyKG1pbnV0ZSwgZm9ybWF0c1syXSksIHNlbGVjdGVkOiAkdGltZXBpY2tlci4kZGF0ZSAmJiAkdGltZXBpY2tlci4kaXNTZWxlY3RlZChtaW51dGUsIDEpLCBkaXNhYmxlZDogJHRpbWVwaWNrZXIuJGlzRGlzYWJsZWQobWludXRlLCAxKX0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciByb3dzID0gW107XHJcbiAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJvd3MucHVzaChbaG91cnNbaV0sIG1pbnV0ZXNbaV1dKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNjb3BlLnJvd3MgPSByb3dzO1xyXG4gICAgICAgICAgc2NvcGUuc2hvd0FNID0gISFmb3JtYXRzWzNdO1xyXG4gICAgICAgICAgc2NvcGUuaXNBTSA9ICgkdGltZXBpY2tlci4kZGF0ZSB8fCBob3Vyc1ttaWRJbmRleF0uZGF0ZSkuZ2V0SG91cnMoKSA8IDEyO1xyXG4gICAgICAgICAgc2NvcGUudGltZVNlcGFyYXRvciA9IGZvcm1hdHNbMV07XHJcbiAgICAgICAgICAkdGltZXBpY2tlci4kaXNCdWlsdCA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRpbWVwaWNrZXIuJGlzU2VsZWN0ZWQgPSBmdW5jdGlvbihkYXRlLCBpbmRleCkge1xyXG4gICAgICAgICAgaWYoISR0aW1lcGlja2VyLiRkYXRlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICBlbHNlIGlmKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlLmdldEhvdXJzKCkgPT09ICR0aW1lcGlja2VyLiRkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYoaW5kZXggPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGUuZ2V0TWludXRlcygpID09PSAkdGltZXBpY2tlci4kZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRpbWVwaWNrZXIuJGlzRGlzYWJsZWQgPSBmdW5jdGlvbihkYXRlLCBpbmRleCkge1xyXG4gICAgICAgICAgdmFyIHNlbGVjdGVkVGltZTtcclxuICAgICAgICAgIGlmKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkVGltZSA9IGRhdGUuZ2V0VGltZSgpICsgdmlld0RhdGUubWludXRlICogNmU0O1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGluZGV4ID09PSAxKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkVGltZSA9IGRhdGUuZ2V0VGltZSgpICsgdmlld0RhdGUuaG91ciAqIDM2ZTU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRUaW1lIDwgb3B0aW9ucy5taW5UaW1lICogMSB8fCBzZWxlY3RlZFRpbWUgPiBvcHRpb25zLm1heFRpbWUgKiAxO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLiRhcnJvd0FjdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcclxuICAgICAgICAgIGlmIChvcHRpb25zLmFycm93QmVoYXZpb3IgPT09ICdwaWNrZXInKSB7XHJcbiAgICAgICAgICAgICR0aW1lcGlja2VyLiRzZXRUaW1lQnlTdGVwKHZhbHVlLGluZGV4KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICR0aW1lcGlja2VyLiRtb3ZlSW5kZXgodmFsdWUsaW5kZXgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0aW1lcGlja2VyLiRzZXRUaW1lQnlTdGVwID0gZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XHJcbiAgICAgICAgICB2YXIgbmV3RGF0ZSA9IG5ldyBEYXRlKCR0aW1lcGlja2VyLiRkYXRlKTtcclxuICAgICAgICAgIHZhciBob3VycyA9IG5ld0RhdGUuZ2V0SG91cnMoKSwgaG91cnNMZW5ndGggPSBkYXRlRmlsdGVyKG5ld0RhdGUsICdoJykubGVuZ3RoO1xyXG4gICAgICAgICAgdmFyIG1pbnV0ZXMgPSBuZXdEYXRlLmdldE1pbnV0ZXMoKSwgbWludXRlc0xlbmd0aCA9IGRhdGVGaWx0ZXIobmV3RGF0ZSwgJ21tJykubGVuZ3RoO1xyXG4gICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgIG5ld0RhdGUuc2V0SG91cnMoaG91cnMgLSAocGFyc2VJbnQob3B0aW9ucy5ob3VyU3RlcCwgMTApICogdmFsdWUpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdEYXRlLnNldE1pbnV0ZXMobWludXRlcyAtIChwYXJzZUludChvcHRpb25zLm1pbnV0ZVN0ZXAsIDEwKSAqIHZhbHVlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkdGltZXBpY2tlci5zZWxlY3QobmV3RGF0ZSwgaW5kZXgsIHRydWUpO1xyXG4gICAgICAgICAgcGFyZW50U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0aW1lcGlja2VyLiRtb3ZlSW5kZXggPSBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcclxuICAgICAgICAgIHZhciB0YXJnZXREYXRlO1xyXG4gICAgICAgICAgaWYoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKDE5NzAsIDAsIDEsIHZpZXdEYXRlLmhvdXIgKyAodmFsdWUgKiBvcHRpb25zLmxlbmd0aCksIHZpZXdEYXRlLm1pbnV0ZSk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHZpZXdEYXRlLCB7aG91cjogdGFyZ2V0RGF0ZS5nZXRIb3VycygpfSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYoaW5kZXggPT09IDEpIHtcclxuICAgICAgICAgICAgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKDE5NzAsIDAsIDEsIHZpZXdEYXRlLmhvdXIsIHZpZXdEYXRlLm1pbnV0ZSArICh2YWx1ZSAqIG9wdGlvbnMubGVuZ3RoICogb3B0aW9ucy5taW51dGVTdGVwKSk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHZpZXdEYXRlLCB7bWludXRlOiB0YXJnZXREYXRlLmdldE1pbnV0ZXMoKX0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJHRpbWVwaWNrZXIuJGJ1aWxkKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRpbWVwaWNrZXIuJG9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAvLyBQcmV2ZW50IGJsdXIgb24gbW91c2Vkb3duIG9uIC5kcm9wZG93bi1tZW51XHJcbiAgICAgICAgICBpZihldnQudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdpbnB1dCcpIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgLy8gRW11bGF0ZSBjbGljayBmb3IgbW9iaWxlIGRldmljZXNcclxuICAgICAgICAgIGlmKGlzVG91Y2gpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldEVsID0gYW5ndWxhci5lbGVtZW50KGV2dC50YXJnZXQpO1xyXG4gICAgICAgICAgICBpZih0YXJnZXRFbFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnYnV0dG9uJykge1xyXG4gICAgICAgICAgICAgIHRhcmdldEVsID0gdGFyZ2V0RWwucGFyZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGFyZ2V0RWwudHJpZ2dlckhhbmRsZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRpbWVwaWNrZXIuJG9uS2V5RG93biA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgaWYgKCEvKDM4fDM3fDM5fDQwfDEzKS8udGVzdChldnQua2V5Q29kZSkgfHwgZXZ0LnNoaWZ0S2V5IHx8IGV2dC5hbHRLZXkpIHJldHVybjtcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgIC8vIENsb3NlIG9uIGVudGVyXHJcbiAgICAgICAgICBpZihldnQua2V5Q29kZSA9PT0gMTMpIHJldHVybiAkdGltZXBpY2tlci5oaWRlKHRydWUpO1xyXG5cclxuICAgICAgICAgIC8vIE5hdmlnYXRlIHdpdGgga2V5Ym9hcmRcclxuICAgICAgICAgIHZhciBuZXdEYXRlID0gbmV3IERhdGUoJHRpbWVwaWNrZXIuJGRhdGUpO1xyXG4gICAgICAgICAgdmFyIGhvdXJzID0gbmV3RGF0ZS5nZXRIb3VycygpLCBob3Vyc0xlbmd0aCA9IGRhdGVGaWx0ZXIobmV3RGF0ZSwgJ2gnKS5sZW5ndGg7XHJcbiAgICAgICAgICB2YXIgbWludXRlcyA9IG5ld0RhdGUuZ2V0TWludXRlcygpLCBtaW51dGVzTGVuZ3RoID0gZGF0ZUZpbHRlcihuZXdEYXRlLCAnbW0nKS5sZW5ndGg7XHJcbiAgICAgICAgICB2YXIgbGF0ZXJhbE1vdmUgPSAvKDM3fDM5KS8udGVzdChldnQua2V5Q29kZSk7XHJcbiAgICAgICAgICB2YXIgY291bnQgPSAyICsgISFmb3JtYXRzWzNdICogMTtcclxuXHJcbiAgICAgICAgICAvLyBOYXZpZ2F0ZSBpbmRleGVzIChsZWZ0LCByaWdodClcclxuICAgICAgICAgIGlmIChsYXRlcmFsTW92ZSkge1xyXG4gICAgICAgICAgICBpZihldnQua2V5Q29kZSA9PT0gMzcpIHNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4IDwgMSA/IGNvdW50IC0gMSA6IHNlbGVjdGVkSW5kZXggLSAxO1xyXG4gICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSAzOSkgc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGVkSW5kZXggPCBjb3VudCAtIDEgPyBzZWxlY3RlZEluZGV4ICsgMSA6IDA7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gVXBkYXRlIHZhbHVlcyAodXAsIGRvd24pXHJcbiAgICAgICAgICB2YXIgc2VsZWN0UmFuZ2UgPSBbMCwgaG91cnNMZW5ndGhdO1xyXG4gICAgICAgICAgaWYoc2VsZWN0ZWRJbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICBpZihldnQua2V5Q29kZSA9PT0gMzgpIG5ld0RhdGUuc2V0SG91cnMoaG91cnMgLSBwYXJzZUludChvcHRpb25zLmhvdXJTdGVwLCAxMCkpO1xyXG4gICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSA0MCkgbmV3RGF0ZS5zZXRIb3Vycyhob3VycyArIHBhcnNlSW50KG9wdGlvbnMuaG91clN0ZXAsIDEwKSk7XHJcbiAgICAgICAgICAgIHNlbGVjdFJhbmdlID0gWzAsIGhvdXJzTGVuZ3RoXTtcclxuICAgICAgICAgIH0gZWxzZSBpZihzZWxlY3RlZEluZGV4ID09PSAxKSB7XHJcbiAgICAgICAgICAgIGlmKGV2dC5rZXlDb2RlID09PSAzOCkgbmV3RGF0ZS5zZXRNaW51dGVzKG1pbnV0ZXMgLSBwYXJzZUludChvcHRpb25zLm1pbnV0ZVN0ZXAsIDEwKSk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYoZXZ0LmtleUNvZGUgPT09IDQwKSBuZXdEYXRlLnNldE1pbnV0ZXMobWludXRlcyArIHBhcnNlSW50KG9wdGlvbnMubWludXRlU3RlcCwgMTApKTtcclxuICAgICAgICAgICAgc2VsZWN0UmFuZ2UgPSBbaG91cnNMZW5ndGggKyAxLCBob3Vyc0xlbmd0aCArIDEgKyBtaW51dGVzTGVuZ3RoXTtcclxuICAgICAgICAgIH0gZWxzZSBpZihzZWxlY3RlZEluZGV4ID09PSAyKSB7XHJcbiAgICAgICAgICAgIGlmKCFsYXRlcmFsTW92ZSkgJHRpbWVwaWNrZXIuc3dpdGNoTWVyaWRpYW4oKTtcclxuICAgICAgICAgICAgc2VsZWN0UmFuZ2UgPSBbaG91cnNMZW5ndGggKyAxICsgbWludXRlc0xlbmd0aCArIDEsIGhvdXJzTGVuZ3RoICsgMSArIG1pbnV0ZXNMZW5ndGggKyAzXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICR0aW1lcGlja2VyLnNlbGVjdChuZXdEYXRlLCBzZWxlY3RlZEluZGV4LCB0cnVlKTtcclxuICAgICAgICAgIGNyZWF0ZVNlbGVjdGlvbihzZWxlY3RSYW5nZVswXSwgc2VsZWN0UmFuZ2VbMV0pO1xyXG4gICAgICAgICAgcGFyZW50U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByaXZhdGVcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlU2VsZWN0aW9uKHN0YXJ0LCBlbmQpIHtcclxuICAgICAgICAgIGlmKGVsZW1lbnRbMF0uY3JlYXRlVGV4dFJhbmdlKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxSYW5nZSA9IGVsZW1lbnRbMF0uY3JlYXRlVGV4dFJhbmdlKCk7XHJcbiAgICAgICAgICAgIHNlbFJhbmdlLmNvbGxhcHNlKHRydWUpO1xyXG4gICAgICAgICAgICBzZWxSYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcclxuICAgICAgICAgICAgc2VsUmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kKTtcclxuICAgICAgICAgICAgc2VsUmFuZ2Uuc2VsZWN0KCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYoZWxlbWVudFswXS5zZXRTZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50WzBdLnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0LCBlbmQpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoZWxlbWVudFswXS5zZWxlY3Rpb25TdGFydCkpIHtcclxuICAgICAgICAgICAgZWxlbWVudFswXS5zZWxlY3Rpb25TdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICBlbGVtZW50WzBdLnNlbGVjdGlvbkVuZCA9IGVuZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZvY3VzRWxlbWVudCgpIHtcclxuICAgICAgICAgIGVsZW1lbnRbMF0uZm9jdXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE92ZXJyaWRlc1xyXG5cclxuICAgICAgICB2YXIgX2luaXQgPSAkdGltZXBpY2tlci5pbml0O1xyXG4gICAgICAgICR0aW1lcGlja2VyLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKGlzTmF0aXZlICYmIG9wdGlvbnMudXNlTmF0aXZlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucHJvcCgndHlwZScsICd0aW1lJyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKCctd2Via2l0LWFwcGVhcmFuY2UnLCAndGV4dGZpZWxkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH0gZWxzZSBpZihpc1RvdWNoKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucHJvcCgndHlwZScsICd0ZXh0Jyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYXR0cigncmVhZG9ubHknLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZvY3VzRWxlbWVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBfaW5pdCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBfZGVzdHJveSA9ICR0aW1lcGlja2VyLmRlc3Ryb3k7XHJcbiAgICAgICAgJHRpbWVwaWNrZXIuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYoaXNOYXRpdmUgJiYgb3B0aW9ucy51c2VOYXRpdmUpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5vZmYoJ2NsaWNrJywgZm9jdXNFbGVtZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF9kZXN0cm95KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9zaG93ID0gJHRpbWVwaWNrZXIuc2hvdztcclxuICAgICAgICAkdGltZXBpY2tlci5zaG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBfc2hvdygpO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHRpbWVwaWNrZXIuJGVsZW1lbnQub24oaXNUb3VjaCA/ICd0b3VjaHN0YXJ0JyA6ICdtb3VzZWRvd24nLCAkdGltZXBpY2tlci4kb25Nb3VzZURvd24pO1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLmtleWJvYXJkKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudC5vbigna2V5ZG93bicsICR0aW1lcGlja2VyLiRvbktleURvd24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX2hpZGUgPSAkdGltZXBpY2tlci5oaWRlO1xyXG4gICAgICAgICR0aW1lcGlja2VyLmhpZGUgPSBmdW5jdGlvbihibHVyKSB7XHJcbiAgICAgICAgICAkdGltZXBpY2tlci4kZWxlbWVudC5vZmYoaXNUb3VjaCA/ICd0b3VjaHN0YXJ0JyA6ICdtb3VzZWRvd24nLCAkdGltZXBpY2tlci4kb25Nb3VzZURvd24pO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9mZigna2V5ZG93bicsICR0aW1lcGlja2VyLiRvbktleURvd24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgX2hpZGUoYmx1cik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuICR0aW1lcGlja2VyO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgdGltZXBpY2tlckZhY3RvcnkuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgcmV0dXJuIHRpbWVwaWNrZXJGYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KVxyXG5cclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNUaW1lcGlja2VyJywgW1wiJHdpbmRvd1wiLCBcIiRwYXJzZVwiLCBcIiRxXCIsIFwiJGxvY2FsZVwiLCBcImRhdGVGaWx0ZXJcIiwgXCIkdGltZXBpY2tlclwiLCBcIiRkYXRlUGFyc2VyXCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHBhcnNlLCAkcSwgJGxvY2FsZSwgZGF0ZUZpbHRlciwgJHRpbWVwaWNrZXIsICRkYXRlUGFyc2VyLCAkdGltZW91dCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9ICR0aW1lcGlja2VyLmRlZmF1bHRzO1xyXG4gICAgdmFyIGlzTmF0aXZlID0gLyhpcChhfG8pZHxpcGhvbmV8YW5kcm9pZCkvaWcudGVzdCgkd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8ICR3aW5kb3cuc2V0VGltZW91dDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGNvbnRyb2xsZXIpIHtcclxuXHJcbiAgICAgICAgLy8gRGlyZWN0aXZlIG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGUsIGNvbnRyb2xsZXI6IGNvbnRyb2xsZXJ9O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3BsYWNlbWVudCcsICdjb250YWluZXInLCAnZGVsYXknLCAndHJpZ2dlcicsICdrZXlib2FyZCcsICdodG1sJywgJ2FuaW1hdGlvbicsICd0ZW1wbGF0ZScsICdhdXRvY2xvc2UnLCAndGltZVR5cGUnLCAndGltZUZvcm1hdCcsICdtb2RlbFRpbWVGb3JtYXQnLCAndXNlTmF0aXZlJywgJ2hvdXJTdGVwJywgJ21pbnV0ZVN0ZXAnLCAnbGVuZ3RoJywgJ2Fycm93QmVoYXZpb3InXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFZpc2liaWxpdHkgYmluZGluZyBzdXBwb3J0XHJcbiAgICAgICAgYXR0ci5ic1Nob3cgJiYgc2NvcGUuJHdhdGNoKGF0dHIuYnNTaG93LCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIGlmKCF0aW1lcGlja2VyIHx8ICFhbmd1bGFyLmlzRGVmaW5lZChuZXdWYWx1ZSkpIHJldHVybjtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNTdHJpbmcobmV3VmFsdWUpKSBuZXdWYWx1ZSA9ICEhbmV3VmFsdWUubWF0Y2goJyw/KHRpbWVwaWNrZXIpLD8nKTtcclxuICAgICAgICAgIG5ld1ZhbHVlID09PSB0cnVlID8gdGltZXBpY2tlci5zaG93KCkgOiB0aW1lcGlja2VyLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aW1lcGlja2VyXHJcbiAgICAgICAgaWYoaXNOYXRpdmUgJiYgKG9wdGlvbnMudXNlTmF0aXZlIHx8IGRlZmF1bHRzLnVzZU5hdGl2ZSkpIG9wdGlvbnMudGltZUZvcm1hdCA9ICdISDptbSc7XHJcbiAgICAgICAgdmFyIHRpbWVwaWNrZXIgPSAkdGltZXBpY2tlcihlbGVtZW50LCBjb250cm9sbGVyLCBvcHRpb25zKTtcclxuICAgICAgICBvcHRpb25zID0gdGltZXBpY2tlci4kb3B0aW9ucztcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBwYXJzZXJcclxuICAgICAgICB2YXIgZGF0ZVBhcnNlciA9ICRkYXRlUGFyc2VyKHtmb3JtYXQ6IG9wdGlvbnMudGltZUZvcm1hdCwgbGFuZzogb3B0aW9ucy5sYW5nfSk7XHJcblxyXG4gICAgICAgIC8vIE9ic2VydmUgYXR0cmlidXRlcyBmb3IgY2hhbmdlc1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ21pblRpbWUnLCAnbWF4VGltZSddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignYXR0ci4kb2JzZXJ2ZSglcyknLCBrZXksIGF0dHJba2V5XSk7XHJcbiAgICAgICAgICBhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pICYmIGF0dHIuJG9ic2VydmUoa2V5LCBmdW5jdGlvbihuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZihuZXdWYWx1ZSA9PT0gJ25vdycpIHtcclxuICAgICAgICAgICAgICB0aW1lcGlja2VyLiRvcHRpb25zW2tleV0gPSBuZXcgRGF0ZSgpLnNldEZ1bGxZZWFyKDE5NzAsIDAsIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYoYW5ndWxhci5pc1N0cmluZyhuZXdWYWx1ZSkgJiYgbmV3VmFsdWUubWF0Y2goL15cIi4rXCIkLykpIHtcclxuICAgICAgICAgICAgICB0aW1lcGlja2VyLiRvcHRpb25zW2tleV0gPSArbmV3IERhdGUobmV3VmFsdWUuc3Vic3RyKDEsIG5ld1ZhbHVlLmxlbmd0aCAtIDIpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aW1lcGlja2VyLiRvcHRpb25zW2tleV0gPSBkYXRlUGFyc2VyLnBhcnNlKG5ld1ZhbHVlLCBuZXcgRGF0ZSgxOTcwLCAwLCAxLCAwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIWlzTmFOKHRpbWVwaWNrZXIuJG9wdGlvbnNba2V5XSkgJiYgdGltZXBpY2tlci4kYnVpbGQoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBXYXRjaCBtb2RlbCBmb3IgY2hhbmdlc1xyXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nTW9kZWwsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCdzY29wZS4kd2F0Y2goJXMpJywgYXR0ci5uZ01vZGVsLCBuZXdWYWx1ZSwgb2xkVmFsdWUsIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICB0aW1lcGlja2VyLnVwZGF0ZShjb250cm9sbGVyLiRkYXRlVmFsdWUpO1xyXG4gICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAvLyB2aWV3VmFsdWUgLT4gJHBhcnNlcnMgLT4gbW9kZWxWYWx1ZVxyXG4gICAgICAgIGNvbnRyb2xsZXIuJHBhcnNlcnMudW5zaGlmdChmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHBhcnNlcihcIiVzXCIpOiB2aWV3VmFsdWU9JW8nLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAvLyBOdWxsIHZhbHVlcyBzaG91bGQgY29ycmVjdGx5IHJlc2V0IHRoZSBtb2RlbCB2YWx1ZSAmIHZhbGlkaXR5XHJcbiAgICAgICAgICBpZighdmlld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZhbGlkaXR5KCdkYXRlJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciBwYXJzZWRUaW1lID0gYW5ndWxhci5pc0RhdGUodmlld1ZhbHVlKSA/IHZpZXdWYWx1ZSA6IGRhdGVQYXJzZXIucGFyc2Uodmlld1ZhbHVlLCBjb250cm9sbGVyLiRkYXRlVmFsdWUpO1xyXG4gICAgICAgICAgaWYoIXBhcnNlZFRpbWUgfHwgaXNOYU4ocGFyc2VkVGltZS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZhbGlkaXR5KCdkYXRlJywgZmFsc2UpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBwYXJzZWRUaW1lLmdldFRpbWUoKSA+PSBvcHRpb25zLm1pblRpbWUgJiYgcGFyc2VkVGltZS5nZXRUaW1lKCkgPD0gb3B0aW9ucy5tYXhUaW1lO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgnZGF0ZScsIGlzVmFsaWQpO1xyXG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgbW9kZWwgd2hlbiB3ZSBoYXZlIGEgdmFsaWQgZGF0ZVxyXG4gICAgICAgICAgICBpZihpc1ZhbGlkKSBjb250cm9sbGVyLiRkYXRlVmFsdWUgPSBwYXJzZWRUaW1lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYob3B0aW9ucy50aW1lVHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVGaWx0ZXIocGFyc2VkVGltZSwgb3B0aW9ucy5tb2RlbFRpbWVGb3JtYXQgfHwgb3B0aW9ucy50aW1lRm9ybWF0KTtcclxuICAgICAgICAgIH0gZWxzZSBpZihvcHRpb25zLnRpbWVUeXBlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29udHJvbGxlci4kZGF0ZVZhbHVlLmdldFRpbWUoKTtcclxuICAgICAgICAgIH0gZWxzZSBpZihvcHRpb25zLnRpbWVUeXBlID09PSAnaXNvJykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29udHJvbGxlci4kZGF0ZVZhbHVlLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoY29udHJvbGxlci4kZGF0ZVZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gbW9kZWxWYWx1ZSAtPiAkZm9ybWF0dGVycyAtPiB2aWV3VmFsdWVcclxuICAgICAgICBjb250cm9sbGVyLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24obW9kZWxWYWx1ZSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckZm9ybWF0dGVyKFwiJXNcIik6IG1vZGVsVmFsdWU9JW8gKCVvKScsIGVsZW1lbnQuYXR0cignbmctbW9kZWwnKSwgbW9kZWxWYWx1ZSwgdHlwZW9mIG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgdmFyIGRhdGU7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1vZGVsVmFsdWUpIHx8IG1vZGVsVmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgZGF0ZSA9IE5hTjtcclxuICAgICAgICAgIH0gZWxzZSBpZihhbmd1bGFyLmlzRGF0ZShtb2RlbFZhbHVlKSkge1xyXG4gICAgICAgICAgICBkYXRlID0gbW9kZWxWYWx1ZTtcclxuICAgICAgICAgIH0gZWxzZSBpZihvcHRpb25zLnRpbWVUeXBlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBkYXRlID0gZGF0ZVBhcnNlci5wYXJzZShtb2RlbFZhbHVlLCBudWxsLCBvcHRpb25zLm1vZGVsVGltZUZvcm1hdCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRlID0gbmV3IERhdGUobW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBTZXR1cCBkZWZhdWx0IHZhbHVlP1xyXG4gICAgICAgICAgLy8gaWYoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSBkYXRlID0gbmV3IERhdGUobmV3IERhdGUoKS5zZXRNaW51dGVzKDApICsgMzZlNSk7XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRkYXRlVmFsdWUgPSBkYXRlO1xyXG4gICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gdmlld1ZhbHVlIC0+IGVsZW1lbnRcclxuICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHJlbmRlcihcIiVzXCIpOiB2aWV3VmFsdWU9JW8nLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICBlbGVtZW50LnZhbCghY29udHJvbGxlci4kZGF0ZVZhbHVlIHx8IGlzTmFOKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS5nZXRUaW1lKCkpID8gJycgOiBkYXRlRmlsdGVyKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSwgb3B0aW9ucy50aW1lRm9ybWF0KSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHRpbWVwaWNrZXIpIHRpbWVwaWNrZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgb3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICB0aW1lcGlja2VyID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogdG9vbHRpcC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAudG9vbHRpcCcsIFsnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kaW1lbnNpb25zJ10pXHJcblxyXG4gIC5wcm92aWRlcignJHRvb2x0aXAnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBhbmltYXRpb246ICdhbS1mYWRlJyxcclxuICAgICAgY3VzdG9tQ2xhc3M6ICcnLFxyXG4gICAgICBwcmVmaXhDbGFzczogJ3Rvb2x0aXAnLFxyXG4gICAgICBwcmVmaXhFdmVudDogJ3Rvb2x0aXAnLFxyXG4gICAgICBjb250YWluZXI6IGZhbHNlLFxyXG4gICAgICB0YXJnZXQ6IGZhbHNlLFxyXG4gICAgICBwbGFjZW1lbnQ6ICd0b3AnLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3Rvb2x0aXAvdG9vbHRpcC50cGwuaHRtbCcsXHJcbiAgICAgIGNvbnRlbnRUZW1wbGF0ZTogZmFsc2UsXHJcbiAgICAgIHRyaWdnZXI6ICdob3ZlciBmb2N1cycsXHJcbiAgICAgIGtleWJvYXJkOiBmYWxzZSxcclxuICAgICAgaHRtbDogZmFsc2UsXHJcbiAgICAgIHNob3c6IGZhbHNlLFxyXG4gICAgICB0aXRsZTogJycsXHJcbiAgICAgIHR5cGU6ICcnLFxyXG4gICAgICBkZWxheTogMFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkd2luZG93XCIsIFwiJHJvb3RTY29wZVwiLCBcIiRjb21waWxlXCIsIFwiJHFcIiwgXCIkdGVtcGxhdGVDYWNoZVwiLCBcIiRodHRwXCIsIFwiJGFuaW1hdGVcIiwgXCJkaW1lbnNpb25zXCIsIFwiJCRyQUZcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHJvb3RTY29wZSwgJGNvbXBpbGUsICRxLCAkdGVtcGxhdGVDYWNoZSwgJGh0dHAsICRhbmltYXRlLCBkaW1lbnNpb25zLCAkJHJBRikge1xyXG5cclxuICAgICAgdmFyIHRyaW0gPSBTdHJpbmcucHJvdG90eXBlLnRyaW07XHJcbiAgICAgIHZhciBpc1RvdWNoID0gJ2NyZWF0ZVRvdWNoJyBpbiAkd2luZG93LmRvY3VtZW50O1xyXG4gICAgICB2YXIgaHRtbFJlcGxhY2VSZWdFeHAgPSAvbmctYmluZD1cIi9pZztcclxuXHJcbiAgICAgIGZ1bmN0aW9uIFRvb2x0aXBGYWN0b3J5KGVsZW1lbnQsIGNvbmZpZykge1xyXG5cclxuICAgICAgICB2YXIgJHRvb2x0aXAgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gQ29tbW9uIHZhcnNcclxuICAgICAgICB2YXIgbm9kZU5hbWUgPSBlbGVtZW50WzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAkdG9vbHRpcC4kb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBkZWZhdWx0cywgY29uZmlnKTtcclxuICAgICAgICAkdG9vbHRpcC4kcHJvbWlzZSA9IGZldGNoVGVtcGxhdGUob3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgdmFyIHNjb3BlID0gJHRvb2x0aXAuJHNjb3BlID0gb3B0aW9ucy5zY29wZSAmJiBvcHRpb25zLnNjb3BlLiRuZXcoKSB8fCAkcm9vdFNjb3BlLiRuZXcoKTtcclxuICAgICAgICBpZihvcHRpb25zLmRlbGF5ICYmIGFuZ3VsYXIuaXNTdHJpbmcob3B0aW9ucy5kZWxheSkpIHtcclxuICAgICAgICAgIG9wdGlvbnMuZGVsYXkgPSBwYXJzZUZsb2F0KG9wdGlvbnMuZGVsYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBzdHJpbmcgb3B0aW9uc1xyXG4gICAgICAgIGlmKG9wdGlvbnMudGl0bGUpIHtcclxuICAgICAgICAgICR0b29sdGlwLiRzY29wZS50aXRsZSA9IG9wdGlvbnMudGl0bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQcm92aWRlIHNjb3BlIGhlbHBlcnNcclxuICAgICAgICBzY29wZS4kaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkdG9vbHRpcC5oaWRlKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNjb3BlLiRzaG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICR0b29sdGlwLnNob3coKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2NvcGUuJHRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkdG9vbHRpcC50b2dnbGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHRvb2x0aXAuJGlzU2hvd24gPSBzY29wZS4kaXNTaG93biA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIHZhcnNcclxuICAgICAgICB2YXIgdGltZW91dCwgaG92ZXJTdGF0ZTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBjb250ZW50VGVtcGxhdGUgb3B0aW9uXHJcbiAgICAgICAgaWYob3B0aW9ucy5jb250ZW50VGVtcGxhdGUpIHtcclxuICAgICAgICAgICR0b29sdGlwLiRwcm9taXNlID0gJHRvb2x0aXAuJHByb21pc2UudGhlbihmdW5jdGlvbih0ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVFbCA9IGFuZ3VsYXIuZWxlbWVudCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaFRlbXBsYXRlKG9wdGlvbnMuY29udGVudFRlbXBsYXRlKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjb250ZW50VGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICB2YXIgY29udGVudEVsID0gZmluZEVsZW1lbnQoJ1tuZy1iaW5kPVwiY29udGVudFwiXScsIHRlbXBsYXRlRWxbMF0pO1xyXG4gICAgICAgICAgICAgIGlmKCFjb250ZW50RWwubGVuZ3RoKSBjb250ZW50RWwgPSBmaW5kRWxlbWVudCgnW25nLWJpbmQ9XCJ0aXRsZVwiXScsIHRlbXBsYXRlRWxbMF0pO1xyXG4gICAgICAgICAgICAgIGNvbnRlbnRFbC5yZW1vdmVBdHRyKCduZy1iaW5kJykuaHRtbChjb250ZW50VGVtcGxhdGUpO1xyXG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZUVsWzBdLm91dGVySFRNTDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZldGNoLCBjb21waWxlIHRoZW4gaW5pdGlhbGl6ZSB0b29sdGlwXHJcbiAgICAgICAgdmFyIHRpcExpbmtlciwgdGlwRWxlbWVudCwgdGlwVGVtcGxhdGUsIHRpcENvbnRhaW5lcjtcclxuICAgICAgICAkdG9vbHRpcC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHRlbXBsYXRlKSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzT2JqZWN0KHRlbXBsYXRlKSkgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5kYXRhO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5odG1sKSB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoaHRtbFJlcGxhY2VSZWdFeHAsICduZy1iaW5kLWh0bWw9XCInKTtcclxuICAgICAgICAgIHRlbXBsYXRlID0gdHJpbS5hcHBseSh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgICB0aXBUZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgICAgdGlwTGlua2VyID0gJGNvbXBpbGUodGVtcGxhdGUpO1xyXG4gICAgICAgICAgJHRvb2x0aXAuaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkdG9vbHRpcC5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgLy8gT3B0aW9uczogZGVsYXlcclxuICAgICAgICAgIGlmIChvcHRpb25zLmRlbGF5ICYmIGFuZ3VsYXIuaXNOdW1iZXIob3B0aW9ucy5kZWxheSkpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5kZWxheSA9IHtcclxuICAgICAgICAgICAgICBzaG93OiBvcHRpb25zLmRlbGF5LFxyXG4gICAgICAgICAgICAgIGhpZGU6IG9wdGlvbnMuZGVsYXlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBSZXBsYWNlIHRyaWdnZXIgb24gdG91Y2ggZGV2aWNlcyA/XHJcbiAgICAgICAgICAvLyBpZihpc1RvdWNoICYmIG9wdGlvbnMudHJpZ2dlciA9PT0gZGVmYXVsdHMudHJpZ2dlcikge1xyXG4gICAgICAgICAgLy8gICBvcHRpb25zLnRyaWdnZXIucmVwbGFjZSgvaG92ZXIvZywgJ2NsaWNrJyk7XHJcbiAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgLy8gT3B0aW9ucyA6IGNvbnRhaW5lclxyXG4gICAgICAgICAgaWYob3B0aW9ucy5jb250YWluZXIgPT09ICdzZWxmJykge1xyXG4gICAgICAgICAgICB0aXBDb250YWluZXIgPSBlbGVtZW50O1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGFuZ3VsYXIuaXNFbGVtZW50KG9wdGlvbnMuY29udGFpbmVyKSkge1xyXG4gICAgICAgICAgICB0aXBDb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcclxuICAgICAgICAgIH0gZWxzZSBpZihvcHRpb25zLmNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB0aXBDb250YWluZXIgPSBmaW5kRWxlbWVudChvcHRpb25zLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gT3B0aW9uczogdHJpZ2dlclxyXG4gICAgICAgICAgdmFyIHRyaWdnZXJzID0gb3B0aW9ucy50cmlnZ2VyLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2godHJpZ2dlcnMsIGZ1bmN0aW9uKHRyaWdnZXIpIHtcclxuICAgICAgICAgICAgaWYodHJpZ2dlciA9PT0gJ2NsaWNrJykge1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgJHRvb2x0aXAudG9nZ2xlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHRyaWdnZXIgIT09ICdtYW51YWwnKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudC5vbih0cmlnZ2VyID09PSAnaG92ZXInID8gJ21vdXNlZW50ZXInIDogJ2ZvY3VzJywgJHRvb2x0aXAuZW50ZXIpO1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQub24odHJpZ2dlciA9PT0gJ2hvdmVyJyA/ICdtb3VzZWxlYXZlJyA6ICdibHVyJywgJHRvb2x0aXAubGVhdmUpO1xyXG4gICAgICAgICAgICAgIG5vZGVOYW1lID09PSAnYnV0dG9uJyAmJiB0cmlnZ2VyICE9PSAnaG92ZXInICYmIGVsZW1lbnQub24oaXNUb3VjaCA/ICd0b3VjaHN0YXJ0JyA6ICdtb3VzZWRvd24nLCAkdG9vbHRpcC4kb25Gb2N1c0VsZW1lbnRNb3VzZURvd24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBPcHRpb25zOiB0YXJnZXRcclxuICAgICAgICAgIGlmKG9wdGlvbnMudGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMudGFyZ2V0ID0gYW5ndWxhci5pc0VsZW1lbnQob3B0aW9ucy50YXJnZXQpID8gb3B0aW9ucy50YXJnZXQgOiBmaW5kRWxlbWVudChvcHRpb25zLnRhcmdldCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gT3B0aW9uczogc2hvd1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5zaG93KSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBvcHRpb25zLnRyaWdnZXIgPT09ICdmb2N1cycgPyBlbGVtZW50WzBdLmZvY3VzKCkgOiAkdG9vbHRpcC5zaG93KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdG9vbHRpcC5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgLy8gVW5iaW5kIGV2ZW50c1xyXG4gICAgICAgICAgdmFyIHRyaWdnZXJzID0gb3B0aW9ucy50cmlnZ2VyLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gdHJpZ2dlcnMubGVuZ3RoOyBpLS07KSB7XHJcbiAgICAgICAgICAgIHZhciB0cmlnZ2VyID0gdHJpZ2dlcnNbaV07XHJcbiAgICAgICAgICAgIGlmKHRyaWdnZXIgPT09ICdjbGljaycpIHtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9mZignY2xpY2snLCAkdG9vbHRpcC50b2dnbGUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYodHJpZ2dlciAhPT0gJ21hbnVhbCcpIHtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9mZih0cmlnZ2VyID09PSAnaG92ZXInID8gJ21vdXNlZW50ZXInIDogJ2ZvY3VzJywgJHRvb2x0aXAuZW50ZXIpO1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQub2ZmKHRyaWdnZXIgPT09ICdob3ZlcicgPyAnbW91c2VsZWF2ZScgOiAnYmx1cicsICR0b29sdGlwLmxlYXZlKTtcclxuICAgICAgICAgICAgICBub2RlTmFtZSA9PT0gJ2J1dHRvbicgJiYgdHJpZ2dlciAhPT0gJ2hvdmVyJyAmJiBlbGVtZW50Lm9mZihpc1RvdWNoID8gJ3RvdWNoc3RhcnQnIDogJ21vdXNlZG93bicsICR0b29sdGlwLiRvbkZvY3VzRWxlbWVudE1vdXNlRG93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBSZW1vdmUgZWxlbWVudFxyXG4gICAgICAgICAgaWYodGlwRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aXBFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aXBFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBDYW5jZWwgcGVuZGluZyBjYWxsYmFja3NcclxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAvLyBEZXN0cm95IHNjb3BlXHJcbiAgICAgICAgICBzY29wZS4kZGVzdHJveSgpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdG9vbHRpcC5lbnRlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICAgIGhvdmVyU3RhdGUgPSAnaW4nO1xyXG4gICAgICAgICAgaWYgKCFvcHRpb25zLmRlbGF5IHx8ICFvcHRpb25zLmRlbGF5LnNob3cpIHtcclxuICAgICAgICAgICAgcmV0dXJuICR0b29sdGlwLnNob3coKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKGhvdmVyU3RhdGUgPT09J2luJykgJHRvb2x0aXAuc2hvdygpO1xyXG4gICAgICAgICAgfSwgb3B0aW9ucy5kZWxheS5zaG93KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRvb2x0aXAuc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIHNjb3BlLiRlbWl0KG9wdGlvbnMucHJlZml4RXZlbnQgKyAnLnNob3cuYmVmb3JlJywgJHRvb2x0aXApO1xyXG4gICAgICAgICAgdmFyIHBhcmVudCA9IG9wdGlvbnMuY29udGFpbmVyID8gdGlwQ29udGFpbmVyIDogbnVsbDtcclxuICAgICAgICAgIHZhciBhZnRlciA9IG9wdGlvbnMuY29udGFpbmVyID8gbnVsbCA6IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgLy8gSGlkZSBhbnkgZXhpc3RpbmcgdGlwRWxlbWVudFxyXG4gICAgICAgICAgaWYodGlwRWxlbWVudCkgdGlwRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgIC8vIEZldGNoIGEgY2xvbmVkIGVsZW1lbnQgbGlua2VkIGZyb20gdGVtcGxhdGVcclxuICAgICAgICAgIHRpcEVsZW1lbnQgPSAkdG9vbHRpcC4kZWxlbWVudCA9IHRpcExpbmtlcihzY29wZSwgZnVuY3Rpb24oY2xvbmVkRWxlbWVudCwgc2NvcGUpIHt9KTtcclxuXHJcbiAgICAgICAgICAvLyBTZXQgdGhlIGluaXRpYWwgcG9zaXRpb25pbmcuICBNYWtlIHRoZSB0b29sdGlwIGludmlzaWJsZVxyXG4gICAgICAgICAgLy8gc28gSUUgZG9lc24ndCB0cnkgdG8gZm9jdXMgb24gaXQgb2ZmIHNjcmVlbi5cclxuICAgICAgICAgIHRpcEVsZW1lbnQuY3NzKHt0b3A6ICctOTk5OXB4JywgbGVmdDogJy05OTk5cHgnLCBkaXNwbGF5OiAnYmxvY2snLCB2aXNpYmlsaXR5OiAnaGlkZGVuJ30pLmFkZENsYXNzKG9wdGlvbnMucGxhY2VtZW50KTtcclxuXHJcbiAgICAgICAgICAvLyBPcHRpb25zOiBhbmltYXRpb25cclxuICAgICAgICAgIGlmKG9wdGlvbnMuYW5pbWF0aW9uKSB0aXBFbGVtZW50LmFkZENsYXNzKG9wdGlvbnMuYW5pbWF0aW9uKTtcclxuICAgICAgICAgIC8vIE9wdGlvbnM6IHR5cGVcclxuICAgICAgICAgIGlmKG9wdGlvbnMudHlwZSkgdGlwRWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLnByZWZpeENsYXNzICsgJy0nICsgb3B0aW9ucy50eXBlKTtcclxuICAgICAgICAgIC8vIE9wdGlvbnM6IGN1c3RvbSBjbGFzc2VzXHJcbiAgICAgICAgICBpZihvcHRpb25zLmN1c3RvbUNsYXNzKSB0aXBFbGVtZW50LmFkZENsYXNzKG9wdGlvbnMuY3VzdG9tQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICRhbmltYXRlLmVudGVyKHRpcEVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzY29wZS4kZW1pdChvcHRpb25zLnByZWZpeEV2ZW50ICsgJy5zaG93JywgJHRvb2x0aXApO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAkdG9vbHRpcC4kaXNTaG93biA9IHNjb3BlLiRpc1Nob3duID0gdHJ1ZTtcclxuICAgICAgICAgIHNjb3BlLiQkcGhhc2UgfHwgKHNjb3BlLiRyb290ICYmIHNjb3BlLiRyb290LiQkcGhhc2UpIHx8IHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICQkckFGKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHRvb2x0aXAuJGFwcGx5UGxhY2VtZW50KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBPbmNlIHBsYWNlZCwgbWFrZSB0aGUgdG9vbHRpcCB2aXNpYmxlXHJcbiAgICAgICAgICAgIHRpcEVsZW1lbnQuY3NzKHt2aXNpYmlsaXR5OiAndmlzaWJsZSd9KTtcclxuICAgICAgICAgIH0pOyAvLyB2YXIgYSA9IGJvZHlFbC5vZmZzZXRXaWR0aCArIDE7ID9cclxuXHJcbiAgICAgICAgICAvLyBCaW5kIGV2ZW50c1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLnRyaWdnZXIgIT09ICdmb2N1cycpIHtcclxuICAgICAgICAgICAgICAkdG9vbHRpcC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgIHRpcEVsZW1lbnQub24oJ2tleXVwJywgJHRvb2x0aXAuJG9uS2V5VXApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQub24oJ2tleXVwJywgJHRvb2x0aXAuJG9uRm9jdXNLZXlVcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRvb2x0aXAubGVhdmUgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgICBob3ZlclN0YXRlID0gJ291dCc7XHJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMuZGVsYXkgfHwgIW9wdGlvbnMuZGVsYXkuaGlkZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHRvb2x0aXAuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoaG92ZXJTdGF0ZSA9PT0gJ291dCcpIHtcclxuICAgICAgICAgICAgICAkdG9vbHRpcC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIG9wdGlvbnMuZGVsYXkuaGlkZSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0b29sdGlwLmhpZGUgPSBmdW5jdGlvbihibHVyKSB7XHJcblxyXG4gICAgICAgICAgaWYoISR0b29sdGlwLiRpc1Nob3duKSByZXR1cm47XHJcbiAgICAgICAgICBzY29wZS4kZW1pdChvcHRpb25zLnByZWZpeEV2ZW50ICsgJy5oaWRlLmJlZm9yZScsICR0b29sdGlwKTtcclxuXHJcbiAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZSh0aXBFbGVtZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2NvcGUuJGVtaXQob3B0aW9ucy5wcmVmaXhFdmVudCArICcuaGlkZScsICR0b29sdGlwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFsbG93IHRvIGJsdXIgdGhlIGlucHV0IHdoZW4gaGlkZGVuLCBsaWtlIHdoZW4gcHJlc3NpbmcgZW50ZXIga2V5XHJcbiAgICAgICAgICAgIGlmKGJsdXIgJiYgb3B0aW9ucy50cmlnZ2VyID09PSAnZm9jdXMnKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRbMF0uYmx1cigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAkdG9vbHRpcC4kaXNTaG93biA9IHNjb3BlLiRpc1Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgICBzY29wZS4kJHBoYXNlIHx8IChzY29wZS4kcm9vdCAmJiBzY29wZS4kcm9vdC4kJHBoYXNlKSB8fCBzY29wZS4kZGlnZXN0KCk7XHJcblxyXG4gICAgICAgICAgLy8gVW5iaW5kIGV2ZW50c1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCAmJiB0aXBFbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRpcEVsZW1lbnQub2ZmKCdrZXl1cCcsICR0b29sdGlwLiRvbktleVVwKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRvb2x0aXAudG9nZ2xlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkdG9vbHRpcC4kaXNTaG93biA/ICR0b29sdGlwLmxlYXZlKCkgOiAkdG9vbHRpcC5lbnRlcigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0b29sdGlwLmZvY3VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB0aXBFbGVtZW50WzBdLmZvY3VzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHJvdGVjdGVkIG1ldGhvZHNcclxuXHJcbiAgICAgICAgJHRvb2x0aXAuJGFwcGx5UGxhY2VtZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZighdGlwRWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIC8vIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIHRvb2x0aXAgZWxlbWVudC5cclxuICAgICAgICAgIHZhciBlbGVtZW50UG9zaXRpb24gPSBnZXRQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgIC8vIEdldCB0aGUgaGVpZ2h0IGFuZCB3aWR0aCBvZiB0aGUgdG9vbHRpcCBzbyB3ZSBjYW4gY2VudGVyIGl0LlxyXG4gICAgICAgICAgdmFyIHRpcFdpZHRoID0gdGlwRWxlbWVudC5wcm9wKCdvZmZzZXRXaWR0aCcpLFxyXG4gICAgICAgICAgICAgIHRpcEhlaWdodCA9IHRpcEVsZW1lbnQucHJvcCgnb2Zmc2V0SGVpZ2h0Jyk7XHJcblxyXG4gICAgICAgICAgLy8gR2V0IHRoZSB0b29sdGlwJ3MgdG9wIGFuZCBsZWZ0IGNvb3JkaW5hdGVzIHRvIGNlbnRlciBpdCB3aXRoIHRoaXMgZGlyZWN0aXZlLlxyXG4gICAgICAgICAgdmFyIHRpcFBvc2l0aW9uID0gZ2V0Q2FsY3VsYXRlZE9mZnNldChvcHRpb25zLnBsYWNlbWVudCwgZWxlbWVudFBvc2l0aW9uLCB0aXBXaWR0aCwgdGlwSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAvLyBOb3cgc2V0IHRoZSBjYWxjdWxhdGVkIHBvc2l0aW9uaW5nLlxyXG4gICAgICAgICAgdGlwUG9zaXRpb24udG9wICs9ICdweCc7XHJcbiAgICAgICAgICB0aXBQb3NpdGlvbi5sZWZ0ICs9ICdweCc7XHJcbiAgICAgICAgICB0aXBFbGVtZW50LmNzcyh0aXBQb3NpdGlvbik7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0b29sdGlwLiRvbktleVVwID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICBpZiAoZXZ0LndoaWNoID09PSAyNyAmJiAkdG9vbHRpcC4kaXNTaG93bikge1xyXG4gICAgICAgICAgICAkdG9vbHRpcC5oaWRlKCk7XHJcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdG9vbHRpcC4kb25Gb2N1c0tleVVwID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICBpZiAoZXZ0LndoaWNoID09PSAyNykge1xyXG4gICAgICAgICAgICBlbGVtZW50WzBdLmJsdXIoKTtcclxuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0b29sdGlwLiRvbkZvY3VzRWxlbWVudE1vdXNlRG93biA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAvLyBTb21lIGJyb3dzZXJzIGRvIG5vdCBhdXRvLWZvY3VzIGJ1dHRvbnMgKGVnLiBTYWZhcmkpXHJcbiAgICAgICAgICAkdG9vbHRpcC4kaXNTaG93biA/IGVsZW1lbnRbMF0uYmx1cigpIDogZWxlbWVudFswXS5mb2N1cygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByaXZhdGUgbWV0aG9kc1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRQb3NpdGlvbigpIHtcclxuICAgICAgICAgIGlmKG9wdGlvbnMuY29udGFpbmVyID09PSAnYm9keScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRpbWVuc2lvbnMub2Zmc2V0KG9wdGlvbnMudGFyZ2V0WzBdIHx8IGVsZW1lbnRbMF0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRpbWVuc2lvbnMucG9zaXRpb24ob3B0aW9ucy50YXJnZXRbMF0gfHwgZWxlbWVudFswXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRDYWxjdWxhdGVkT2Zmc2V0KHBsYWNlbWVudCwgcG9zaXRpb24sIGFjdHVhbFdpZHRoLCBhY3R1YWxIZWlnaHQpIHtcclxuICAgICAgICAgIHZhciBvZmZzZXQ7XHJcbiAgICAgICAgICB2YXIgc3BsaXQgPSBwbGFjZW1lbnQuc3BsaXQoJy0nKTtcclxuXHJcbiAgICAgICAgICBzd2l0Y2ggKHNwbGl0WzBdKSB7XHJcbiAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgIG9mZnNldCA9IHtcclxuICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCArIHBvc2l0aW9uLmhlaWdodCAvIDIgLSBhY3R1YWxIZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgKyBwb3NpdGlvbi53aWR0aFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgICAgIG9mZnNldCA9IHtcclxuICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCArIHBvc2l0aW9uLmhlaWdodCxcclxuICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgcG9zaXRpb24ud2lkdGggLyAyIC0gYWN0dWFsV2lkdGggLyAyXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgIG9mZnNldCA9IHtcclxuICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCArIHBvc2l0aW9uLmhlaWdodCAvIDIgLSBhY3R1YWxIZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgLSBhY3R1YWxXaWR0aFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIG9mZnNldCA9IHtcclxuICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCAtIGFjdHVhbEhlaWdodCxcclxuICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgcG9zaXRpb24ud2lkdGggLyAyIC0gYWN0dWFsV2lkdGggLyAyXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmKCFzcGxpdFsxXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gb2Zmc2V0O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIEFkZCBzdXBwb3J0IGZvciBjb3JuZXJzIEB0b2RvIGNzc1xyXG4gICAgICAgICAgaWYoc3BsaXRbMF0gPT09ICd0b3AnIHx8IHNwbGl0WzBdID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHNwbGl0WzFdKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICAgIG9mZnNldC5sZWZ0ID0gcG9zaXRpb24ubGVmdDtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgIG9mZnNldC5sZWZ0ID0gIHBvc2l0aW9uLmxlZnQgKyBwb3NpdGlvbi53aWR0aCAtIGFjdHVhbFdpZHRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYoc3BsaXRbMF0gPT09ICdsZWZ0JyB8fCBzcGxpdFswXSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHNwbGl0WzFdKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgICAgICAgb2Zmc2V0LnRvcCA9IHBvc2l0aW9uLnRvcCAtIGFjdHVhbEhlaWdodDtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgICBvZmZzZXQudG9wID0gcG9zaXRpb24udG9wICsgcG9zaXRpb24uaGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIG9mZnNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAkdG9vbHRpcDtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhlbHBlciBmdW5jdGlvbnNcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGZpbmRFbGVtZW50KHF1ZXJ5LCBlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudCgoZWxlbWVudCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBmZXRjaFRlbXBsYXRlKHRlbXBsYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuICRxLndoZW4oJHRlbXBsYXRlQ2FjaGUuZ2V0KHRlbXBsYXRlKSB8fCAkaHR0cC5nZXQodGVtcGxhdGUpKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc09iamVjdChyZXMpKSB7XHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZSwgcmVzLmRhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gVG9vbHRpcEZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzVG9vbHRpcCcsIFtcIiR3aW5kb3dcIiwgXCIkbG9jYXRpb25cIiwgXCIkc2NlXCIsIFwiJHRvb2x0aXBcIiwgXCIkJHJBRlwiLCBmdW5jdGlvbigkd2luZG93LCAkbG9jYXRpb24sICRzY2UsICR0b29sdGlwLCAkJHJBRikge1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUFDJyxcclxuICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCB0cmFuc2NsdXNpb24pIHtcclxuXHJcbiAgICAgICAgLy8gRGlyZWN0aXZlIG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGV9O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3RlbXBsYXRlJywgJ2NvbnRlbnRUZW1wbGF0ZScsICdwbGFjZW1lbnQnLCAnY29udGFpbmVyJywgJ3RhcmdldCcsICdkZWxheScsICd0cmlnZ2VyJywgJ2tleWJvYXJkJywgJ2h0bWwnLCAnYW5pbWF0aW9uJywgJ3R5cGUnLCAnY3VzdG9tQ2xhc3MnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE9ic2VydmUgc2NvcGUgYXR0cmlidXRlcyBmb3IgY2hhbmdlXHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsndGl0bGUnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBhdHRyLiRvYnNlcnZlKGtleSwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHNjb3BlW2tleV0gPSAkc2NlLnRydXN0QXNIdG1sKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgYW5ndWxhci5pc0RlZmluZWQob2xkVmFsdWUpICYmICQkckFGKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHRvb2x0aXAgJiYgdG9vbHRpcC4kYXBwbHlQbGFjZW1lbnQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBhbiBvYmplY3RcclxuICAgICAgICBhdHRyLmJzVG9vbHRpcCAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic1Rvb2x0aXAsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc09iamVjdChuZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoc2NvcGUsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNjb3BlLnRpdGxlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhbmd1bGFyLmlzRGVmaW5lZChvbGRWYWx1ZSkgJiYgJCRyQUYoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRvb2x0aXAgJiYgdG9vbHRpcC4kYXBwbHlQbGFjZW1lbnQoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBWaXNpYmlsaXR5IGJpbmRpbmcgc3VwcG9ydFxyXG4gICAgICAgIGF0dHIuYnNTaG93ICYmIHNjb3BlLiR3YXRjaChhdHRyLmJzU2hvdywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBpZighdG9vbHRpcCB8fCAhYW5ndWxhci5pc0RlZmluZWQobmV3VmFsdWUpKSByZXR1cm47XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzU3RyaW5nKG5ld1ZhbHVlKSkgbmV3VmFsdWUgPSAhIW5ld1ZhbHVlLm1hdGNoKCcsPyh0b29sdGlwKSw/Jyk7XHJcbiAgICAgICAgICBuZXdWYWx1ZSA9PT0gdHJ1ZSA/IHRvb2x0aXAuc2hvdygpIDogdG9vbHRpcC5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgcG9wb3ZlclxyXG4gICAgICAgIHZhciB0b29sdGlwID0gJHRvb2x0aXAoZWxlbWVudCwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIEdhcmJhZ2UgY29sbGVjdGlvblxyXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKHRvb2x0aXApIHRvb2x0aXAuZGVzdHJveSgpO1xyXG4gICAgICAgICAgb3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICB0b29sdGlwID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogdHlwZWFoZWFkLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC50eXBlYWhlYWQnLCBbJ21nY3JlYS5uZ1N0cmFwLnRvb2x0aXAnLCAnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5wYXJzZU9wdGlvbnMnXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckdHlwZWFoZWFkJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tZmFkZScsXHJcbiAgICAgIHByZWZpeENsYXNzOiAndHlwZWFoZWFkJyxcclxuICAgICAgcHJlZml4RXZlbnQ6ICckdHlwZWFoZWFkJyxcclxuICAgICAgcGxhY2VtZW50OiAnYm90dG9tLWxlZnQnLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3R5cGVhaGVhZC90eXBlYWhlYWQudHBsLmh0bWwnLFxyXG4gICAgICB0cmlnZ2VyOiAnZm9jdXMnLFxyXG4gICAgICBjb250YWluZXI6IGZhbHNlLFxyXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcclxuICAgICAgaHRtbDogZmFsc2UsXHJcbiAgICAgIGRlbGF5OiAwLFxyXG4gICAgICBtaW5MZW5ndGg6IDEsXHJcbiAgICAgIGZpbHRlcjogJ2ZpbHRlcicsXHJcbiAgICAgIGxpbWl0OiA2XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IFtcIiR3aW5kb3dcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJHRvb2x0aXBcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHJvb3RTY29wZSwgJHRvb2x0aXApIHtcclxuXHJcbiAgICAgIHZhciBib2R5RWwgPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdy5kb2N1bWVudC5ib2R5KTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIFR5cGVhaGVhZEZhY3RvcnkoZWxlbWVudCwgY29udHJvbGxlciwgY29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciAkdHlwZWFoZWFkID0ge307XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiB2YXJzXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcblxyXG4gICAgICAgICR0eXBlYWhlYWQgPSAkdG9vbHRpcChlbGVtZW50LCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgcGFyZW50U2NvcGUgPSBjb25maWcuc2NvcGU7XHJcbiAgICAgICAgdmFyIHNjb3BlID0gJHR5cGVhaGVhZC4kc2NvcGU7XHJcblxyXG4gICAgICAgIHNjb3BlLiRyZXNldE1hdGNoZXMgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgc2NvcGUuJG1hdGNoZXMgPSBbXTtcclxuICAgICAgICAgIHNjb3BlLiRhY3RpdmVJbmRleCA9IDA7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzY29wZS4kcmVzZXRNYXRjaGVzKCk7XHJcblxyXG4gICAgICAgIHNjb3BlLiRhY3RpdmF0ZSA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICR0eXBlYWhlYWQuYWN0aXZhdGUoaW5kZXgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2NvcGUuJHNlbGVjdCA9IGZ1bmN0aW9uKGluZGV4LCBldnQpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHR5cGVhaGVhZC5zZWxlY3QoaW5kZXgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2NvcGUuJGlzVmlzaWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICR0eXBlYWhlYWQuJGlzVmlzaWJsZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFB1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgICR0eXBlYWhlYWQudXBkYXRlID0gZnVuY3Rpb24obWF0Y2hlcykge1xyXG4gICAgICAgICAgc2NvcGUuJG1hdGNoZXMgPSBtYXRjaGVzO1xyXG4gICAgICAgICAgaWYoc2NvcGUuJGFjdGl2ZUluZGV4ID49IG1hdGNoZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiRhY3RpdmVJbmRleCA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHR5cGVhaGVhZC5hY3RpdmF0ZSA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICBzY29wZS4kYWN0aXZlSW5kZXggPSBpbmRleDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdHlwZWFoZWFkLnNlbGVjdCA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICB2YXIgdmFsdWUgPSBzY29wZS4kbWF0Y2hlc1tpbmRleF0udmFsdWU7XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgY29udHJvbGxlci4kcmVuZGVyKCk7XHJcbiAgICAgICAgICBzY29wZS4kcmVzZXRNYXRjaGVzKCk7XHJcbiAgICAgICAgICBpZihwYXJlbnRTY29wZSkgcGFyZW50U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgLy8gRW1pdCBldmVudFxyXG4gICAgICAgICAgc2NvcGUuJGVtaXQob3B0aW9ucy5wcmVmaXhFdmVudCArICcuc2VsZWN0JywgdmFsdWUsIGluZGV4KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAkdHlwZWFoZWFkLiRpc1Zpc2libGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKCFvcHRpb25zLm1pbkxlbmd0aCB8fCAhY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gISFzY29wZS4kbWF0Y2hlcy5sZW5ndGg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBtaW5MZW5ndGggc3VwcG9ydFxyXG4gICAgICAgICAgcmV0dXJuIHNjb3BlLiRtYXRjaGVzLmxlbmd0aCAmJiBhbmd1bGFyLmlzU3RyaW5nKGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSkgJiYgY29udHJvbGxlci4kdmlld1ZhbHVlLmxlbmd0aCA+PSBvcHRpb25zLm1pbkxlbmd0aDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdHlwZWFoZWFkLiRnZXRJbmRleCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICB2YXIgbCA9IHNjb3BlLiRtYXRjaGVzLmxlbmd0aCwgaSA9IGw7XHJcbiAgICAgICAgICBpZighbCkgcmV0dXJuO1xyXG4gICAgICAgICAgZm9yKGkgPSBsOyBpLS07KSB7XHJcbiAgICAgICAgICAgIGlmKHNjb3BlLiRtYXRjaGVzW2ldLnZhbHVlID09PSB2YWx1ZSkgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihpIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHR5cGVhaGVhZC4kb25Nb3VzZURvd24gPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIC8vIFByZXZlbnQgYmx1ciBvbiBtb3VzZWRvd25cclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0eXBlYWhlYWQuJG9uS2V5RG93biA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgaWYoIS8oMzh8NDB8MTMpLy50ZXN0KGV2dC5rZXlDb2RlKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIC8vIExldCBuZ1N1Ym1pdCBwYXNzIGlmIHRoZSB0eXBlYWhlYWQgdGlwIGlzIGhpZGRlblxyXG4gICAgICAgICAgaWYoJHR5cGVhaGVhZC4kaXNWaXNpYmxlKCkpIHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBTZWxlY3Qgd2l0aCBlbnRlclxyXG4gICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDEzICYmIHNjb3BlLiRtYXRjaGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkdHlwZWFoZWFkLnNlbGVjdChzY29wZS4kYWN0aXZlSW5kZXgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIE5hdmlnYXRlIHdpdGgga2V5Ym9hcmRcclxuICAgICAgICAgIGVsc2UgaWYoZXZ0LmtleUNvZGUgPT09IDM4ICYmIHNjb3BlLiRhY3RpdmVJbmRleCA+IDApIHNjb3BlLiRhY3RpdmVJbmRleC0tO1xyXG4gICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gNDAgJiYgc2NvcGUuJGFjdGl2ZUluZGV4IDwgc2NvcGUuJG1hdGNoZXMubGVuZ3RoIC0gMSkgc2NvcGUuJGFjdGl2ZUluZGV4Kys7XHJcbiAgICAgICAgICBlbHNlIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoc2NvcGUuJGFjdGl2ZUluZGV4KSkgc2NvcGUuJGFjdGl2ZUluZGV4ID0gMDtcclxuICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBPdmVycmlkZXNcclxuXHJcbiAgICAgICAgdmFyIHNob3cgPSAkdHlwZWFoZWFkLnNob3c7XHJcbiAgICAgICAgJHR5cGVhaGVhZC5zaG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzaG93KCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkdHlwZWFoZWFkLiRlbGVtZW50Lm9uKCdtb3VzZWRvd24nLCAkdHlwZWFoZWFkLiRvbk1vdXNlRG93bik7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMua2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgJHR5cGVhaGVhZC4kb25LZXlEb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGhpZGUgPSAkdHlwZWFoZWFkLmhpZGU7XHJcbiAgICAgICAgJHR5cGVhaGVhZC5oaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkdHlwZWFoZWFkLiRlbGVtZW50Lm9mZignbW91c2Vkb3duJywgJHR5cGVhaGVhZC4kb25Nb3VzZURvd24pO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9mZigna2V5ZG93bicsICR0eXBlYWhlYWQuJG9uS2V5RG93bik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBoaWRlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuICR0eXBlYWhlYWQ7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBUeXBlYWhlYWRGYWN0b3J5LmRlZmF1bHRzID0gZGVmYXVsdHM7XHJcbiAgICAgIHJldHVybiBUeXBlYWhlYWRGYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic1R5cGVhaGVhZCcsIFtcIiR3aW5kb3dcIiwgXCIkcGFyc2VcIiwgXCIkcVwiLCBcIiR0eXBlYWhlYWRcIiwgXCIkcGFyc2VPcHRpb25zXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRwYXJzZSwgJHEsICR0eXBlYWhlYWQsICRwYXJzZU9wdGlvbnMpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSAkdHlwZWFoZWFkLmRlZmF1bHRzO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUFDJyxcclxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY29udHJvbGxlcikge1xyXG5cclxuICAgICAgICAvLyBEaXJlY3RpdmUgb3B0aW9uc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge3Njb3BlOiBzY29wZX07XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsncGxhY2VtZW50JywgJ2NvbnRhaW5lcicsICdkZWxheScsICd0cmlnZ2VyJywgJ2tleWJvYXJkJywgJ2h0bWwnLCAnYW5pbWF0aW9uJywgJ3RlbXBsYXRlJywgJ2ZpbHRlcicsICdsaW1pdCcsICdtaW5MZW5ndGgnLCAnd2F0Y2hPcHRpb25zJywgJ3NlbGVjdE1vZGUnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIHByb3BlciBuZ09wdGlvbnNcclxuICAgICAgICB2YXIgZmlsdGVyID0gb3B0aW9ucy5maWx0ZXIgfHwgZGVmYXVsdHMuZmlsdGVyO1xyXG4gICAgICAgIHZhciBsaW1pdCA9IG9wdGlvbnMubGltaXQgfHwgZGVmYXVsdHMubGltaXQ7XHJcbiAgICAgICAgdmFyIG5nT3B0aW9ucyA9IGF0dHIubmdPcHRpb25zO1xyXG4gICAgICAgIGlmKGZpbHRlcikgbmdPcHRpb25zICs9ICcgfCAnICsgZmlsdGVyICsgJzokdmlld1ZhbHVlJztcclxuICAgICAgICBpZihsaW1pdCkgbmdPcHRpb25zICs9ICcgfCBsaW1pdFRvOicgKyBsaW1pdDtcclxuICAgICAgICB2YXIgcGFyc2VkT3B0aW9ucyA9ICRwYXJzZU9wdGlvbnMobmdPcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0eXBlYWhlYWRcclxuICAgICAgICB2YXIgdHlwZWFoZWFkID0gJHR5cGVhaGVhZChlbGVtZW50LCBjb250cm9sbGVyLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gV2F0Y2ggb3B0aW9ucyBvbiBkZW1hbmRcclxuICAgICAgICBpZihvcHRpb25zLndhdGNoT3B0aW9ucykge1xyXG4gICAgICAgICAgLy8gV2F0Y2ggbmdPcHRpb25zIHZhbHVlcyBiZWZvcmUgZmlsdGVyaW5nIGZvciBjaGFuZ2VzLCBkcm9wIGZ1bmN0aW9uIGNhbGxzXHJcbiAgICAgICAgICB2YXIgd2F0Y2hlZE9wdGlvbnMgPSBwYXJzZWRPcHRpb25zLiRtYXRjaFs3XS5yZXBsYWNlKC9cXHwuKy8sICcnKS5yZXBsYWNlKC9cXCguKlxcKS9nLCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKHdhdGNoZWRPcHRpb25zLCBmdW5jdGlvbiAobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybignc2NvcGUuJHdhdGNoKCVzKScsIHdhdGNoZWRPcHRpb25zLCBuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zLnZhbHVlc0ZuKHNjb3BlLCBjb250cm9sbGVyKS50aGVuKGZ1bmN0aW9uICh2YWx1ZXMpIHtcclxuICAgICAgICAgICAgICB0eXBlYWhlYWQudXBkYXRlKHZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgY29udHJvbGxlci4kcmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXYXRjaCBtb2RlbCBmb3IgY2hhbmdlc1xyXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nTW9kZWwsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckd2F0Y2gnLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIG5ld1ZhbHVlKTtcclxuICAgICAgICAgIHNjb3BlLiRtb2RlbFZhbHVlID0gbmV3VmFsdWU7IC8vIFB1Ymxpc2ggbW9kZWxWYWx1ZSBvbiBzY29wZSBmb3IgY3VzdG9tIHRlbXBsYXRlc1xyXG4gICAgICAgICAgcGFyc2VkT3B0aW9ucy52YWx1ZXNGbihzY29wZSwgY29udHJvbGxlcilcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHZhbHVlcykge1xyXG4gICAgICAgICAgICAvLyBQcmV2ZW50IGlucHV0IHdpdGggbm8gZnV0dXJlIHByb3NwZWN0IGlmIHNlbGVjdE1vZGUgaXMgdHJ1dGh5XHJcbiAgICAgICAgICAgIC8vIEBUT0RPIHRlc3Qgc2VsZWN0TW9kZVxyXG4gICAgICAgICAgICBpZihvcHRpb25zLnNlbGVjdE1vZGUgJiYgIXZhbHVlcy5sZW5ndGggJiYgbmV3VmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZpZXdWYWx1ZShjb250cm9sbGVyLiR2aWV3VmFsdWUuc3Vic3RyaW5nKDAsIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZS5sZW5ndGggLSAxKSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHZhbHVlcy5sZW5ndGggPiBsaW1pdCkgdmFsdWVzID0gdmFsdWVzLnNsaWNlKDAsIGxpbWl0KTtcclxuICAgICAgICAgICAgdmFyIGlzVmlzaWJsZSA9IHR5cGVhaGVhZC4kaXNWaXNpYmxlKCk7XHJcbiAgICAgICAgICAgIGlzVmlzaWJsZSAmJiB0eXBlYWhlYWQudXBkYXRlKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCByZS1xdWV1ZSBhbiB1cGRhdGUgaWYgYSBjb3JyZWN0IHZhbHVlIGhhcyBiZWVuIHNlbGVjdGVkXHJcbiAgICAgICAgICAgIGlmKHZhbHVlcy5sZW5ndGggPT09IDEgJiYgdmFsdWVzWzBdLnZhbHVlID09PSBuZXdWYWx1ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAhaXNWaXNpYmxlICYmIHR5cGVhaGVhZC51cGRhdGUodmFsdWVzKTtcclxuICAgICAgICAgICAgLy8gUXVldWUgYSBuZXcgcmVuZGVyaW5nIHRoYXQgd2lsbCBsZXZlcmFnZSBjb2xsZWN0aW9uIGxvYWRpbmdcclxuICAgICAgICAgICAgY29udHJvbGxlci4kcmVuZGVyKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTW9kZWwgcmVuZGVyaW5nIGluIHZpZXdcclxuICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRyZW5kZXInLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksICdjb250cm9sbGVyLiRtb2RlbFZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUsIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUsICdjb250cm9sbGVyLiR2aWV3VmFsdWUnLCB0eXBlb2YgY29udHJvbGxlci4kdmlld1ZhbHVlLCBjb250cm9sbGVyLiR2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgaWYoY29udHJvbGxlci4kaXNFbXB0eShjb250cm9sbGVyLiR2aWV3VmFsdWUpKSByZXR1cm4gZWxlbWVudC52YWwoJycpO1xyXG4gICAgICAgICAgdmFyIGluZGV4ID0gdHlwZWFoZWFkLiRnZXRJbmRleChjb250cm9sbGVyLiRtb2RlbFZhbHVlKTtcclxuICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGFuZ3VsYXIuaXNEZWZpbmVkKGluZGV4KSA/IHR5cGVhaGVhZC4kc2NvcGUuJG1hdGNoZXNbaW5kZXhdLmxhYmVsIDogY29udHJvbGxlci4kdmlld1ZhbHVlO1xyXG4gICAgICAgICAgc2VsZWN0ZWQgPSBhbmd1bGFyLmlzT2JqZWN0KHNlbGVjdGVkKSA/IHNlbGVjdGVkLmxhYmVsIDogc2VsZWN0ZWQ7XHJcbiAgICAgICAgICBlbGVtZW50LnZhbChzZWxlY3RlZC5yZXBsYWNlKC88KD86LnxcXG4pKj8+L2dtLCAnJykudHJpbSgpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAodHlwZWFoZWFkKSB0eXBlYWhlYWQuZGVzdHJveSgpO1xyXG4gICAgICAgICAgb3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICB0eXBlYWhlYWQgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxufSkod2luZG93LCBkb2N1bWVudCk7XHJcbiIsIi8qKlxyXG4gKiBhbmd1bGFyLXN0cmFwXHJcbiAqIEB2ZXJzaW9uIHYyLjEuMCAtIDIwMTQtMDktMDVcclxuICogQGxpbmsgaHR0cDovL21nY3JlYS5naXRodWIuaW8vYW5ndWxhci1zdHJhcFxyXG4gKiBAYXV0aG9yIE9saXZpZXIgTG91dmlnbmVzIChvbGl2aWVyQG1nLWNyZWEuY29tKVxyXG4gKiBAbGljZW5zZSBNSVQgTGljZW5zZSwgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcclxuICovXHJcbihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuLy8gU291cmNlOiBhbGVydC50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmFsZXJ0JykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG5cclxuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2FsZXJ0L2FsZXJ0LnRwbC5odG1sJywgJzxkaXYgY2xhc3M9XCJhbGVydFwiIHRhYmluZGV4PVwiLTFcIiBuZy1jbGFzcz1cIlt0eXBlID8gXFwnYWxlcnQtXFwnICsgdHlwZSA6IG51bGxdXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIG5nLWlmPVwiZGlzbWlzc2FibGVcIiBuZy1jbGljaz1cIiRoaWRlKClcIj4mdGltZXM7PC9idXR0b24+IDxzdHJvbmcgbmctYmluZD1cInRpdGxlXCI+PC9zdHJvbmc+Jm5ic3A7PHNwYW4gbmctYmluZC1odG1sPVwiY29udGVudFwiPjwvc3Bhbj48L2Rpdj4nKTtcclxuXHJcbn1dKTtcclxuXHJcbi8vIFNvdXJjZTogYXNpZGUudHBsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5hc2lkZScpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuXHJcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhc2lkZS9hc2lkZS50cGwuaHRtbCcsICc8ZGl2IGNsYXNzPVwiYXNpZGVcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPjxkaXYgY2xhc3M9XCJhc2lkZS1kaWFsb2dcIj48ZGl2IGNsYXNzPVwiYXNpZGUtY29udGVudFwiPjxkaXYgY2xhc3M9XCJhc2lkZS1oZWFkZXJcIiBuZy1zaG93PVwidGl0bGVcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgbmctY2xpY2s9XCIkaGlkZSgpXCI+JnRpbWVzOzwvYnV0dG9uPjxoNCBjbGFzcz1cImFzaWRlLXRpdGxlXCIgbmctYmluZD1cInRpdGxlXCI+PC9oND48L2Rpdj48ZGl2IGNsYXNzPVwiYXNpZGUtYm9keVwiIG5nLWJpbmQ9XCJjb250ZW50XCI+PC9kaXY+PGRpdiBjbGFzcz1cImFzaWRlLWZvb3RlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgbmctY2xpY2s9XCIkaGlkZSgpXCI+Q2xvc2U8L2J1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuXHJcbn1dKTtcclxuXHJcbi8vIFNvdXJjZTogZGF0ZXBpY2tlci50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmRhdGVwaWNrZXInKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcblxyXG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZGF0ZXBpY2tlci9kYXRlcGlja2VyLnRwbC5odG1sJywgJzxkaXYgY2xhc3M9XCJkcm9wZG93bi1tZW51IGRhdGVwaWNrZXJcIiBuZy1jbGFzcz1cIlxcJ2RhdGVwaWNrZXItbW9kZS1cXCcgKyAkbW9kZVwiIHN0eWxlPVwibWF4LXdpZHRoOiAzMjBweFwiPjx0YWJsZSBzdHlsZT1cInRhYmxlLWxheW91dDogZml4ZWQ7IGhlaWdodDogMTAwJTsgd2lkdGg6IDEwMCVcIj48dGhlYWQ+PHRyIGNsYXNzPVwidGV4dC1jZW50ZXJcIj48dGg+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IHB1bGwtbGVmdFwiIG5nLWNsaWNrPVwiJHNlbGVjdFBhbmUoLTEpXCI+PGkgY2xhc3M9XCJ7eyRpY29uTGVmdH19XCI+PC9pPjwvYnV0dG9uPjwvdGg+PHRoIGNvbHNwYW49XCJ7eyByb3dzWzBdLmxlbmd0aCAtIDIgfX1cIj48YnV0dG9uIHRhYmluZGV4PVwiLTFcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLWJsb2NrIHRleHQtc3Ryb25nXCIgbmctY2xpY2s9XCIkdG9nZ2xlTW9kZSgpXCI+PHN0cm9uZyBzdHlsZT1cInRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplXCIgbmctYmluZD1cInRpdGxlXCI+PC9zdHJvbmc+PC9idXR0b24+PC90aD48dGg+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IHB1bGwtcmlnaHRcIiBuZy1jbGljaz1cIiRzZWxlY3RQYW5lKCsxKVwiPjxpIGNsYXNzPVwie3skaWNvblJpZ2h0fX1cIj48L2k+PC9idXR0b24+PC90aD48L3RyPjx0ciBuZy1zaG93PVwic2hvd0xhYmVsc1wiIG5nLWJpbmQtaHRtbD1cImxhYmVsc1wiPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyIG5nLXJlcGVhdD1cIihpLCByb3cpIGluIHJvd3NcIiBoZWlnaHQ9XCJ7eyAxMDAgLyByb3dzLmxlbmd0aCB9fSVcIj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIG5nLXJlcGVhdD1cIihqLCBlbCkgaW4gcm93XCI+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgc3R5bGU9XCJ3aWR0aDogMTAwJVwiIG5nLWNsYXNzPVwie1xcJ2J0bi1wcmltYXJ5XFwnOiBlbC5zZWxlY3RlZCwgXFwnYnRuLWluZm8gYnRuLXRvZGF5XFwnOiBlbC5pc1RvZGF5ICYmICFlbC5zZWxlY3RlZH1cIiBuZy1jbGljaz1cIiRzZWxlY3QoZWwuZGF0ZSlcIiBuZy1kaXNhYmxlZD1cImVsLmRpc2FibGVkXCI+PHNwYW4gbmctY2xhc3M9XCJ7XFwndGV4dC1tdXRlZFxcJzogZWwubXV0ZWR9XCIgbmctYmluZD1cImVsLmxhYmVsXCI+PC9zcGFuPjwvYnV0dG9uPjwvdGQ+PC90cj48L3Rib2R5PjwvdGFibGU+PC9kaXY+Jyk7XHJcblxyXG59XSk7XHJcblxyXG4vLyBTb3VyY2U6IGRyb3Bkb3duLnRwbC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuZHJvcGRvd24nKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcblxyXG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZHJvcGRvd24vZHJvcGRvd24udHBsLmh0bWwnLCAnPHVsIHRhYmluZGV4PVwiLTFcIiBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiByb2xlPVwibWVudVwiPjxsaSByb2xlPVwicHJlc2VudGF0aW9uXCIgbmctY2xhc3M9XCJ7ZGl2aWRlcjogaXRlbS5kaXZpZGVyfVwiIG5nLXJlcGVhdD1cIml0ZW0gaW4gY29udGVudFwiPjxhIHJvbGU9XCJtZW51aXRlbVwiIHRhYmluZGV4PVwiLTFcIiBuZy1ocmVmPVwie3tpdGVtLmhyZWZ9fVwiIG5nLWlmPVwiIWl0ZW0uZGl2aWRlciAmJiBpdGVtLmhyZWZcIiB0YXJnZXQ9XCJ7e2l0ZW0udGFyZ2V0IHx8IFxcJ1xcJ319XCIgbmctYmluZD1cIml0ZW0udGV4dFwiPjwvYT4gPGEgcm9sZT1cIm1lbnVpdGVtXCIgdGFiaW5kZXg9XCItMVwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBuZy1pZj1cIiFpdGVtLmRpdmlkZXIgJiYgaXRlbS5jbGlja1wiIG5nLWNsaWNrPVwiJGV2YWwoaXRlbS5jbGljayk7JGhpZGUoKVwiIG5nLWJpbmQ9XCJpdGVtLnRleHRcIj48L2E+PC9saT48L3VsPicpO1xyXG5cclxufV0pO1xyXG5cclxuLy8gU291cmNlOiBtb2RhbC50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLm1vZGFsJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG5cclxuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ21vZGFsL21vZGFsLnRwbC5odG1sJywgJzxkaXYgY2xhc3M9XCJtb2RhbFwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+PGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPjxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+PGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiIG5nLXNob3c9XCJ0aXRsZVwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBuZy1jbGljaz1cIiRoaWRlKClcIj4mdGltZXM7PC9idXR0b24+PGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIiBuZy1iaW5kPVwidGl0bGVcIj48L2g0PjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCIgbmctYmluZD1cImNvbnRlbnRcIj48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBuZy1jbGljaz1cIiRoaWRlKClcIj5DbG9zZTwvYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG5cclxufV0pO1xyXG5cclxuLy8gU291cmNlOiBwb3BvdmVyLnRwbC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAucG9wb3ZlcicpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuXHJcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwb3BvdmVyL3BvcG92ZXIudHBsLmh0bWwnLCAnPGRpdiBjbGFzcz1cInBvcG92ZXJcIj48ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj48aDMgY2xhc3M9XCJwb3BvdmVyLXRpdGxlXCIgbmctYmluZD1cInRpdGxlXCIgbmctc2hvdz1cInRpdGxlXCI+PC9oMz48ZGl2IGNsYXNzPVwicG9wb3Zlci1jb250ZW50XCIgbmctYmluZD1cImNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nKTtcclxuXHJcbn1dKTtcclxuXHJcbi8vIFNvdXJjZTogc2VsZWN0LnRwbC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuc2VsZWN0JykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG5cclxuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3NlbGVjdC9zZWxlY3QudHBsLmh0bWwnLCAnPHVsIHRhYmluZGV4PVwiLTFcIiBjbGFzcz1cInNlbGVjdCBkcm9wZG93bi1tZW51XCIgbmctc2hvdz1cIiRpc1Zpc2libGUoKVwiIHJvbGU9XCJzZWxlY3RcIj48bGkgbmctaWY9XCIkc2hvd0FsbE5vbmVCdXR0b25zXCI+PGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogNXB4OyBtYXJnaW4tbGVmdDogNXB4XCI+PGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4teHNcIiBuZy1jbGljaz1cIiRzZWxlY3RBbGwoKVwiPkFsbDwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi14c1wiIG5nLWNsaWNrPVwiJHNlbGVjdE5vbmUoKVwiPk5vbmU8L2J1dHRvbj48L2Rpdj48L2xpPjxsaSByb2xlPVwicHJlc2VudGF0aW9uXCIgbmctcmVwZWF0PVwibWF0Y2ggaW4gJG1hdGNoZXNcIiBuZy1jbGFzcz1cInthY3RpdmU6ICRpc0FjdGl2ZSgkaW5kZXgpfVwiPjxhIHN0eWxlPVwiY3Vyc29yOiBkZWZhdWx0XCIgcm9sZT1cIm1lbnVpdGVtXCIgdGFiaW5kZXg9XCItMVwiIG5nLWNsaWNrPVwiJHNlbGVjdCgkaW5kZXgsICRldmVudClcIj48c3BhbiBuZy1iaW5kPVwibWF0Y2gubGFiZWxcIj48L3NwYW4+IDxpIGNsYXNzPVwie3skaWNvbkNoZWNrbWFya319IHB1bGwtcmlnaHRcIiBuZy1pZj1cIiRpc011bHRpcGxlICYmICRpc0FjdGl2ZSgkaW5kZXgpXCI+PC9pPjwvYT48L2xpPjwvdWw+Jyk7XHJcblxyXG59XSk7XHJcblxyXG4vLyBTb3VyY2U6IHRhYi50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnRhYicpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuXHJcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0YWIvdGFiLnRwbC5odG1sJywgJzx1bCBjbGFzcz1cIm5hdlwiIG5nLWNsYXNzPVwiJG5hdkNsYXNzXCIgcm9sZT1cInRhYmxpc3RcIj48bGkgbmctcmVwZWF0PVwiJHBhbmUgaW4gJHBhbmVzXCIgbmctY2xhc3M9XCIkaW5kZXggPT0gJHBhbmVzLiRhY3RpdmUgPyAkYWN0aXZlQ2xhc3MgOiBcXCdcXCdcIj48YSByb2xlPVwidGFiXCIgZGF0YS10b2dnbGU9XCJ0YWJcIiBuZy1jbGljaz1cIiRzZXRBY3RpdmUoJGluZGV4KVwiIGRhdGEtaW5kZXg9XCJ7eyAkaW5kZXggfX1cIiBuZy1iaW5kLWh0bWw9XCIkcGFuZS50aXRsZVwiPjwvYT48L2xpPjwvdWw+PGRpdiBuZy10cmFuc2NsdWRlIGNsYXNzPVwidGFiLWNvbnRlbnRcIj48L2Rpdj4nKTtcclxuXHJcbn1dKTtcclxuXHJcbi8vIFNvdXJjZTogdGltZXBpY2tlci50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnRpbWVwaWNrZXInKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcblxyXG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgndGltZXBpY2tlci90aW1lcGlja2VyLnRwbC5odG1sJywgJzxkaXYgY2xhc3M9XCJkcm9wZG93bi1tZW51IHRpbWVwaWNrZXJcIiBzdHlsZT1cIm1pbi13aWR0aDogMHB4O3dpZHRoOiBhdXRvXCI+PHRhYmxlIGhlaWdodD1cIjEwMCVcIj48dGhlYWQ+PHRyIGNsYXNzPVwidGV4dC1jZW50ZXJcIj48dGg+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IHB1bGwtbGVmdFwiIG5nLWNsaWNrPVwiJGFycm93QWN0aW9uKC0xLCAwKVwiPjxpIGNsYXNzPVwie3sgJGljb25VcCB9fVwiPjwvaT48L2J1dHRvbj48L3RoPjx0aD4mbmJzcDs8L3RoPjx0aD48YnV0dG9uIHRhYmluZGV4PVwiLTFcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgcHVsbC1sZWZ0XCIgbmctY2xpY2s9XCIkYXJyb3dBY3Rpb24oLTEsIDEpXCI+PGkgY2xhc3M9XCJ7eyAkaWNvblVwIH19XCI+PC9pPjwvYnV0dG9uPjwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT48dHIgbmctcmVwZWF0PVwiKGksIHJvdykgaW4gcm93c1wiPjx0ZCBjbGFzcz1cInRleHQtY2VudGVyXCI+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgc3R5bGU9XCJ3aWR0aDogMTAwJVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIG5nLWNsYXNzPVwie1xcJ2J0bi1wcmltYXJ5XFwnOiByb3dbMF0uc2VsZWN0ZWR9XCIgbmctY2xpY2s9XCIkc2VsZWN0KHJvd1swXS5kYXRlLCAwKVwiIG5nLWRpc2FibGVkPVwicm93WzBdLmRpc2FibGVkXCI+PHNwYW4gbmctY2xhc3M9XCJ7XFwndGV4dC1tdXRlZFxcJzogcm93WzBdLm11dGVkfVwiIG5nLWJpbmQ9XCJyb3dbMF0ubGFiZWxcIj48L3NwYW4+PC9idXR0b24+PC90ZD48dGQ+PHNwYW4gbmctYmluZD1cImkgPT0gbWlkSW5kZXggPyB0aW1lU2VwYXJhdG9yIDogXFwnIFxcJ1wiPjwvc3Bhbj48L3RkPjx0ZCBjbGFzcz1cInRleHQtY2VudGVyXCI+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgbmctaWY9XCJyb3dbMV0uZGF0ZVwiIHN0eWxlPVwid2lkdGg6IDEwMCVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBuZy1jbGFzcz1cIntcXCdidG4tcHJpbWFyeVxcJzogcm93WzFdLnNlbGVjdGVkfVwiIG5nLWNsaWNrPVwiJHNlbGVjdChyb3dbMV0uZGF0ZSwgMSlcIiBuZy1kaXNhYmxlZD1cInJvd1sxXS5kaXNhYmxlZFwiPjxzcGFuIG5nLWNsYXNzPVwie1xcJ3RleHQtbXV0ZWRcXCc6IHJvd1sxXS5tdXRlZH1cIiBuZy1iaW5kPVwicm93WzFdLmxhYmVsXCI+PC9zcGFuPjwvYnV0dG9uPjwvdGQ+PHRkIG5nLWlmPVwic2hvd0FNXCI+Jm5ic3A7PC90ZD48dGQgbmctaWY9XCJzaG93QU1cIj48YnV0dG9uIHRhYmluZGV4PVwiLTFcIiBuZy1zaG93PVwiaSA9PSBtaWRJbmRleCAtICFpc0FNICogMVwiIHN0eWxlPVwid2lkdGg6IDEwMCVcIiB0eXBlPVwiYnV0dG9uXCIgbmctY2xhc3M9XCJ7XFwnYnRuLXByaW1hcnlcXCc6ICEhaXNBTX1cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIG5nLWNsaWNrPVwiJHN3aXRjaE1lcmlkaWFuKClcIiBuZy1kaXNhYmxlZD1cImVsLmRpc2FibGVkXCI+QU08L2J1dHRvbj4gPGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgbmctc2hvdz1cImkgPT0gbWlkSW5kZXggKyAxIC0gIWlzQU0gKiAxXCIgc3R5bGU9XCJ3aWR0aDogMTAwJVwiIHR5cGU9XCJidXR0b25cIiBuZy1jbGFzcz1cIntcXCdidG4tcHJpbWFyeVxcJzogIWlzQU19XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBuZy1jbGljaz1cIiRzd2l0Y2hNZXJpZGlhbigpXCIgbmctZGlzYWJsZWQ9XCJlbC5kaXNhYmxlZFwiPlBNPC9idXR0b24+PC90ZD48L3RyPjwvdGJvZHk+PHRmb290Pjx0ciBjbGFzcz1cInRleHQtY2VudGVyXCI+PHRoPjxidXR0b24gdGFiaW5kZXg9XCItMVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBwdWxsLWxlZnRcIiBuZy1jbGljaz1cIiRhcnJvd0FjdGlvbigxLCAwKVwiPjxpIGNsYXNzPVwie3sgJGljb25Eb3duIH19XCI+PC9pPjwvYnV0dG9uPjwvdGg+PHRoPiZuYnNwOzwvdGg+PHRoPjxidXR0b24gdGFiaW5kZXg9XCItMVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBwdWxsLWxlZnRcIiBuZy1jbGljaz1cIiRhcnJvd0FjdGlvbigxLCAxKVwiPjxpIGNsYXNzPVwie3sgJGljb25Eb3duIH19XCI+PC9pPjwvYnV0dG9uPjwvdGg+PC90cj48L3Rmb290PjwvdGFibGU+PC9kaXY+Jyk7XHJcblxyXG59XSk7XHJcblxyXG4vLyBTb3VyY2U6IHR5cGVhaGVhZC50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnR5cGVhaGVhZCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuXHJcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0eXBlYWhlYWQvdHlwZWFoZWFkLnRwbC5odG1sJywgJzx1bCB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJ0eXBlYWhlYWQgZHJvcGRvd24tbWVudVwiIG5nLXNob3c9XCIkaXNWaXNpYmxlKClcIiByb2xlPVwic2VsZWN0XCI+PGxpIHJvbGU9XCJwcmVzZW50YXRpb25cIiBuZy1yZXBlYXQ9XCJtYXRjaCBpbiAkbWF0Y2hlc1wiIG5nLWNsYXNzPVwie2FjdGl2ZTogJGluZGV4ID09ICRhY3RpdmVJbmRleH1cIj48YSByb2xlPVwibWVudWl0ZW1cIiB0YWJpbmRleD1cIi0xXCIgbmctY2xpY2s9XCIkc2VsZWN0KCRpbmRleCwgJGV2ZW50KVwiIG5nLWJpbmQ9XCJtYXRjaC5sYWJlbFwiPjwvYT48L2xpPjwvdWw+Jyk7XHJcblxyXG59XSk7XHJcblxyXG4vLyBTb3VyY2U6IHRvb2x0aXAudHBsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC50b29sdGlwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG5cclxuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3Rvb2x0aXAvdG9vbHRpcC50cGwuaHRtbCcsICc8ZGl2IGNsYXNzPVwidG9vbHRpcCBpblwiIG5nLXNob3c9XCJ0aXRsZVwiPjxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+PGRpdiBjbGFzcz1cInRvb2x0aXAtaW5uZXJcIiBuZy1iaW5kPVwidGl0bGVcIj48L2Rpdj48L2Rpdj4nKTtcclxuXHJcbn1dKTtcclxuXHJcblxyXG59KSh3aW5kb3csIGRvY3VtZW50KTtcclxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIExvLURhc2ggMi40LjEgKEN1c3RvbSBCdWlsZCkgPGh0dHA6Ly9sb2Rhc2guY29tLz5cclxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIC1vIC4vZGlzdC9sb2Rhc2guanNgXHJcbiAqIENvcHlyaWdodCAyMDEyLTIwMTMgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XHJcbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS41LjIgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XHJcbiAqIENvcHlyaWdodCAyMDA5LTIwMTMgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcclxuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxyXG4gKi9cclxuO1xyXG4oZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIC8qKiBVc2VkIGFzIGEgc2FmZSByZWZlcmVuY2UgZm9yIGB1bmRlZmluZWRgIGluIHByZSBFUzUgZW52aXJvbm1lbnRzICovXHJcbiAgICB2YXIgdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIHBvb2wgYXJyYXlzIGFuZCBvYmplY3RzIHVzZWQgaW50ZXJuYWxseSAqL1xyXG4gICAgdmFyIGFycmF5UG9vbCA9IFtdLFxyXG4gICAgICAgIG9iamVjdFBvb2wgPSBbXTtcclxuXHJcbiAgICAvKiogVXNlZCB0byBnZW5lcmF0ZSB1bmlxdWUgSURzICovXHJcbiAgICB2YXIgaWRDb3VudGVyID0gMDtcclxuXHJcbiAgICAvKiogVXNlZCB0byBwcmVmaXgga2V5cyB0byBhdm9pZCBpc3N1ZXMgd2l0aCBgX19wcm90b19fYCBhbmQgcHJvcGVydGllcyBvbiBgT2JqZWN0LnByb3RvdHlwZWAgKi9cclxuICAgIHZhciBrZXlQcmVmaXggPSArbmV3IERhdGUgKyAnJztcclxuXHJcbiAgICAvKiogVXNlZCBhcyB0aGUgc2l6ZSB3aGVuIG9wdGltaXphdGlvbnMgYXJlIGVuYWJsZWQgZm9yIGxhcmdlIGFycmF5cyAqL1xyXG4gICAgdmFyIGxhcmdlQXJyYXlTaXplID0gNzU7XHJcblxyXG4gICAgLyoqIFVzZWQgYXMgdGhlIG1heCBzaXplIG9mIHRoZSBgYXJyYXlQb29sYCBhbmQgYG9iamVjdFBvb2xgICovXHJcbiAgICB2YXIgbWF4UG9vbFNpemUgPSA0MDtcclxuXHJcbiAgICAvKiogVXNlZCB0byBkZXRlY3QgYW5kIHRlc3Qgd2hpdGVzcGFjZSAqL1xyXG4gICAgdmFyIHdoaXRlc3BhY2UgPSAoXHJcbiAgICAgICAgLy8gd2hpdGVzcGFjZVxyXG4gICAgICAgICcgXFx0XFx4MEJcXGZcXHhBMFxcdWZlZmYnICtcclxuXHJcbiAgICAgICAgLy8gbGluZSB0ZXJtaW5hdG9yc1xyXG4gICAgICAgICdcXG5cXHJcXHUyMDI4XFx1MjAyOScgK1xyXG5cclxuICAgICAgICAvLyB1bmljb2RlIGNhdGVnb3J5IFwiWnNcIiBzcGFjZSBzZXBhcmF0b3JzXHJcbiAgICAgICAgJ1xcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDAnXHJcbiAgICApO1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIG1hdGNoIGVtcHR5IHN0cmluZyBsaXRlcmFscyBpbiBjb21waWxlZCB0ZW1wbGF0ZSBzb3VyY2UgKi9cclxuICAgIHZhciByZUVtcHR5U3RyaW5nTGVhZGluZyA9IC9cXGJfX3AgXFwrPSAnJzsvZyxcclxuICAgICAgICByZUVtcHR5U3RyaW5nTWlkZGxlID0gL1xcYihfX3AgXFwrPSkgJycgXFwrL2csXHJcbiAgICAgICAgcmVFbXB0eVN0cmluZ1RyYWlsaW5nID0gLyhfX2VcXCguKj9cXCl8XFxiX190XFwpKSBcXCtcXG4nJzsvZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gbWF0Y2ggRVM2IHRlbXBsYXRlIGRlbGltaXRlcnNcclxuICAgICAqIGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWxpdGVyYWxzLXN0cmluZy1saXRlcmFsc1xyXG4gICAgICovXHJcbiAgICB2YXIgcmVFc1RlbXBsYXRlID0gL1xcJFxceyhbXlxcXFx9XSooPzpcXFxcLlteXFxcXH1dKikqKVxcfS9nO1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIG1hdGNoIHJlZ2V4cCBmbGFncyBmcm9tIHRoZWlyIGNvZXJjZWQgc3RyaW5nIHZhbHVlcyAqL1xyXG4gICAgdmFyIHJlRmxhZ3MgPSAvXFx3KiQvO1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIGRldGVjdGVkIG5hbWVkIGZ1bmN0aW9ucyAqL1xyXG4gICAgdmFyIHJlRnVuY05hbWUgPSAvXlxccypmdW5jdGlvblsgXFxuXFxyXFx0XStcXHcvO1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIG1hdGNoIFwiaW50ZXJwb2xhdGVcIiB0ZW1wbGF0ZSBkZWxpbWl0ZXJzICovXHJcbiAgICB2YXIgcmVJbnRlcnBvbGF0ZSA9IC88JT0oW1xcc1xcU10rPyklPi9nO1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgd2hpdGVzcGFjZSBhbmQgemVyb3MgdG8gYmUgcmVtb3ZlZCAqL1xyXG4gICAgdmFyIHJlTGVhZGluZ1NwYWNlc0FuZFplcm9zID0gUmVnRXhwKCdeWycgKyB3aGl0ZXNwYWNlICsgJ10qMCsoPz0uJCknKTtcclxuXHJcbiAgICAvKiogVXNlZCB0byBlbnN1cmUgY2FwdHVyaW5nIG9yZGVyIG9mIHRlbXBsYXRlIGRlbGltaXRlcnMgKi9cclxuICAgIHZhciByZU5vTWF0Y2ggPSAvKCReKS87XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gZGV0ZWN0IGZ1bmN0aW9ucyBjb250YWluaW5nIGEgYHRoaXNgIHJlZmVyZW5jZSAqL1xyXG4gICAgdmFyIHJlVGhpcyA9IC9cXGJ0aGlzXFxiLztcclxuXHJcbiAgICAvKiogVXNlZCB0byBtYXRjaCB1bmVzY2FwZWQgY2hhcmFjdGVycyBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMgKi9cclxuICAgIHZhciByZVVuZXNjYXBlZFN0cmluZyA9IC9bJ1xcblxcclxcdFxcdTIwMjhcXHUyMDI5XFxcXF0vZztcclxuXHJcbiAgICAvKiogVXNlZCB0byBhc3NpZ24gZGVmYXVsdCBgY29udGV4dGAgb2JqZWN0IHByb3BlcnRpZXMgKi9cclxuICAgIHZhciBjb250ZXh0UHJvcHMgPSBbXHJcbiAgICAgICAgJ0FycmF5JywgJ0Jvb2xlYW4nLCAnRGF0ZScsICdGdW5jdGlvbicsICdNYXRoJywgJ051bWJlcicsICdPYmplY3QnLFxyXG4gICAgICAgICdSZWdFeHAnLCAnU3RyaW5nJywgJ18nLCAnYXR0YWNoRXZlbnQnLCAnY2xlYXJUaW1lb3V0JywgJ2lzRmluaXRlJywgJ2lzTmFOJyxcclxuICAgICAgICAncGFyc2VJbnQnLCAnc2V0VGltZW91dCdcclxuICAgIF07XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gbWFrZSB0ZW1wbGF0ZSBzb3VyY2VVUkxzIGVhc2llciB0byBpZGVudGlmeSAqL1xyXG4gICAgdmFyIHRlbXBsYXRlQ291bnRlciA9IDA7XHJcblxyXG4gICAgLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCBzaG9ydGN1dHMgKi9cclxuICAgIHZhciBhcmdzQ2xhc3MgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcclxuICAgICAgICBhcnJheUNsYXNzID0gJ1tvYmplY3QgQXJyYXldJyxcclxuICAgICAgICBib29sQ2xhc3MgPSAnW29iamVjdCBCb29sZWFuXScsXHJcbiAgICAgICAgZGF0ZUNsYXNzID0gJ1tvYmplY3QgRGF0ZV0nLFxyXG4gICAgICAgIGZ1bmNDbGFzcyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXHJcbiAgICAgICAgbnVtYmVyQ2xhc3MgPSAnW29iamVjdCBOdW1iZXJdJyxcclxuICAgICAgICBvYmplY3RDbGFzcyA9ICdbb2JqZWN0IE9iamVjdF0nLFxyXG4gICAgICAgIHJlZ2V4cENsYXNzID0gJ1tvYmplY3QgUmVnRXhwXScsXHJcbiAgICAgICAgc3RyaW5nQ2xhc3MgPSAnW29iamVjdCBTdHJpbmddJztcclxuXHJcbiAgICAvKiogVXNlZCB0byBpZGVudGlmeSBvYmplY3QgY2xhc3NpZmljYXRpb25zIHRoYXQgYF8uY2xvbmVgIHN1cHBvcnRzICovXHJcbiAgICB2YXIgY2xvbmVhYmxlQ2xhc3NlcyA9IHt9O1xyXG4gICAgY2xvbmVhYmxlQ2xhc3Nlc1tmdW5jQ2xhc3NdID0gZmFsc2U7XHJcbiAgICBjbG9uZWFibGVDbGFzc2VzW2FyZ3NDbGFzc10gPSBjbG9uZWFibGVDbGFzc2VzW2FycmF5Q2xhc3NdID1cclxuICAgICAgICBjbG9uZWFibGVDbGFzc2VzW2Jvb2xDbGFzc10gPSBjbG9uZWFibGVDbGFzc2VzW2RhdGVDbGFzc10gPVxyXG4gICAgICAgIGNsb25lYWJsZUNsYXNzZXNbbnVtYmVyQ2xhc3NdID0gY2xvbmVhYmxlQ2xhc3Nlc1tvYmplY3RDbGFzc10gPVxyXG4gICAgICAgIGNsb25lYWJsZUNsYXNzZXNbcmVnZXhwQ2xhc3NdID0gY2xvbmVhYmxlQ2xhc3Nlc1tzdHJpbmdDbGFzc10gPSB0cnVlO1xyXG5cclxuICAgIC8qKiBVc2VkIGFzIGFuIGludGVybmFsIGBfLmRlYm91bmNlYCBvcHRpb25zIG9iamVjdCAqL1xyXG4gICAgdmFyIGRlYm91bmNlT3B0aW9ucyA9IHtcclxuICAgICAgICAnbGVhZGluZyc6IGZhbHNlLFxyXG4gICAgICAgICdtYXhXYWl0JzogMCxcclxuICAgICAgICAndHJhaWxpbmcnOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICAvKiogVXNlZCBhcyB0aGUgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgYF9fYmluZERhdGFfX2AgKi9cclxuICAgIHZhciBkZXNjcmlwdG9yID0ge1xyXG4gICAgICAgICdjb25maWd1cmFibGUnOiBmYWxzZSxcclxuICAgICAgICAnZW51bWVyYWJsZSc6IGZhbHNlLFxyXG4gICAgICAgICd2YWx1ZSc6IG51bGwsXHJcbiAgICAgICAgJ3dyaXRhYmxlJzogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHZhbHVlcyBhcmUgb2YgdGhlIGxhbmd1YWdlIHR5cGUgT2JqZWN0ICovXHJcbiAgICB2YXIgb2JqZWN0VHlwZXMgPSB7XHJcbiAgICAgICAgJ2Jvb2xlYW4nOiBmYWxzZSxcclxuICAgICAgICAnZnVuY3Rpb24nOiB0cnVlLFxyXG4gICAgICAgICdvYmplY3QnOiB0cnVlLFxyXG4gICAgICAgICdudW1iZXInOiBmYWxzZSxcclxuICAgICAgICAnc3RyaW5nJzogZmFsc2UsXHJcbiAgICAgICAgJ3VuZGVmaW5lZCc6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzICovXHJcbiAgICB2YXIgc3RyaW5nRXNjYXBlcyA9IHtcclxuICAgICAgICAnXFxcXCc6ICdcXFxcJyxcclxuICAgICAgICBcIidcIjogXCInXCIsXHJcbiAgICAgICAgJ1xcbic6ICduJyxcclxuICAgICAgICAnXFxyJzogJ3InLFxyXG4gICAgICAgICdcXHQnOiAndCcsXHJcbiAgICAgICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxyXG4gICAgICAgICdcXHUyMDI5JzogJ3UyMDI5J1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdCAqL1xyXG4gICAgdmFyIHJvb3QgPSAob2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93KSB8fCB0aGlzO1xyXG5cclxuICAgIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AgKi9cclxuICAgIHZhciBmcmVlRXhwb3J0cyA9IG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XHJcblxyXG4gICAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgICovXHJcbiAgICB2YXIgZnJlZU1vZHVsZSA9IG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcclxuXHJcbiAgICAvKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgICovXHJcbiAgICB2YXIgbW9kdWxlRXhwb3J0cyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0cyAmJiBmcmVlRXhwb3J0cztcclxuXHJcbiAgICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzIG9yIEJyb3dzZXJpZmllZCBjb2RlIGFuZCB1c2UgaXQgYXMgYHJvb3RgICovXHJcbiAgICB2YXIgZnJlZUdsb2JhbCA9IG9iamVjdFR5cGVzW3R5cGVvZiBnbG9iYWxdICYmIGdsb2JhbDtcclxuICAgIGlmIChmcmVlR2xvYmFsICYmIChmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCkpIHtcclxuICAgICAgICByb290ID0gZnJlZUdsb2JhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmluZGV4T2ZgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYmluYXJ5IHNlYXJjaGVzXHJcbiAgICAgKiBvciBgZnJvbUluZGV4YCBjb25zdHJhaW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSBvciBgLTFgLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gYmFzZUluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAoZnJvbUluZGV4IHx8IDApIC0gMSxcclxuICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBfLmNvbnRhaW5zYCBmb3IgY2FjaGUgb2JqZWN0cyB0aGF0IG1pbWljcyB0aGUgcmV0dXJuXHJcbiAgICAgKiBzaWduYXR1cmUgb2YgYF8uaW5kZXhPZmAgYnkgcmV0dXJuaW5nIGAwYCBpZiB0aGUgdmFsdWUgaXMgZm91bmQsIGVsc2UgYC0xYC5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNhY2hlIFRoZSBjYWNoZSBvYmplY3QgdG8gaW5zcGVjdC5cclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGAwYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGAtMWAuXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBjYWNoZUluZGV4T2YoY2FjaGUsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XHJcbiAgICAgICAgY2FjaGUgPSBjYWNoZS5jYWNoZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ2Jvb2xlYW4nIHx8IHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlW3ZhbHVlXSA/IDAgOiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgIT0gJ251bWJlcicgJiYgdHlwZSAhPSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0eXBlID0gJ29iamVjdCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBrZXkgPSB0eXBlID09ICdudW1iZXInID8gdmFsdWUgOiBrZXlQcmVmaXggKyB2YWx1ZTtcclxuICAgICAgICBjYWNoZSA9IChjYWNoZSA9IGNhY2hlW3R5cGVdKSAmJiBjYWNoZVtrZXldO1xyXG5cclxuICAgICAgICByZXR1cm4gdHlwZSA9PSAnb2JqZWN0JyA/IChjYWNoZSAmJiBiYXNlSW5kZXhPZihjYWNoZSwgdmFsdWUpID4gLTEgPyAwIDogLTEpIDogKGNhY2hlID8gMCA6IC0xKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBnaXZlbiB2YWx1ZSB0byB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFkZCB0byB0aGUgY2FjaGUuXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBjYWNoZVB1c2godmFsdWUpIHtcclxuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlLFxyXG4gICAgICAgICAgICB0eXBlID0gdHlwZW9mIHZhbHVlO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PSAnYm9vbGVhbicgfHwgdmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjYWNoZVt2YWx1ZV0gPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlICE9ICdudW1iZXInICYmIHR5cGUgIT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHR5cGUgPSAnb2JqZWN0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIga2V5ID0gdHlwZSA9PSAnbnVtYmVyJyA/IHZhbHVlIDoga2V5UHJlZml4ICsgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICB0eXBlQ2FjaGUgPSBjYWNoZVt0eXBlXSB8fCAoY2FjaGVbdHlwZV0gPSB7fSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgKHR5cGVDYWNoZVtrZXldIHx8ICh0eXBlQ2FjaGVba2V5XSA9IFtdKSkucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlQ2FjaGVba2V5XSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGJ5IGBfLm1heGAgYW5kIGBfLm1pbmAgYXMgdGhlIGRlZmF1bHQgY2FsbGJhY2sgd2hlbiBhIGdpdmVuXHJcbiAgICAgKiBjb2xsZWN0aW9uIGlzIGEgc3RyaW5nIHZhbHVlLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIGNoYXJhY3RlciB0byBpbnNwZWN0LlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29kZSB1bml0IG9mIGdpdmVuIGNoYXJhY3Rlci5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoYXJBdENhbGxiYWNrKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLmNoYXJDb2RlQXQoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGJ5IGBzb3J0QnlgIHRvIGNvbXBhcmUgdHJhbnNmb3JtZWQgYGNvbGxlY3Rpb25gIGVsZW1lbnRzLCBzdGFibGUgc29ydGluZ1xyXG4gICAgICogdGhlbSBpbiBhc2NlbmRpbmcgb3JkZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gY29tcGFyZSB0byBgYmAuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvbXBhcmUgdG8gYGFgLlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc29ydCBvcmRlciBpbmRpY2F0b3Igb2YgYDFgIG9yIGAtMWAuXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBjb21wYXJlQXNjZW5kaW5nKGEsIGIpIHtcclxuICAgICAgICB2YXIgYWMgPSBhLmNyaXRlcmlhLFxyXG4gICAgICAgICAgICBiYyA9IGIuY3JpdGVyaWEsXHJcbiAgICAgICAgICAgIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGFjLmxlbmd0aDtcclxuXHJcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gYWNbaW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgb3RoZXIgPSBiY1tpbmRleF07XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG90aGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiBvdGhlciB8fCB0eXBlb2YgdmFsdWUgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IG90aGVyIHx8IHR5cGVvZiBvdGhlciA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGaXhlcyBhbiBgQXJyYXkjc29ydGAgYnVnIGluIHRoZSBKUyBlbmdpbmUgZW1iZWRkZWQgaW4gQWRvYmUgYXBwbGljYXRpb25zXHJcbiAgICAgICAgLy8gdGhhdCBjYXVzZXMgaXQsIHVuZGVyIGNlcnRhaW4gY2lyY3Vtc3RhbmNlcywgdG8gcmV0dXJuIHRoZSBzYW1lIHZhbHVlIGZvclxyXG4gICAgICAgIC8vIGBhYCBhbmQgYGJgLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL3B1bGwvMTI0N1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gVGhpcyBhbHNvIGVuc3VyZXMgYSBzdGFibGUgc29ydCBpbiBWOCBhbmQgb3RoZXIgZW5naW5lcy5cclxuICAgICAgICAvLyBTZWUgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9OTBcclxuICAgICAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY2FjaGUgb2JqZWN0IHRvIG9wdGltaXplIGxpbmVhciBzZWFyY2hlcyBvZiBsYXJnZSBhcnJheXMuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFthcnJheT1bXV0gVGhlIGFycmF5IHRvIHNlYXJjaC5cclxuICAgICAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgb2JqZWN0IG9yIGBudWxsYCBpZiBjYWNoaW5nIHNob3VsZCBub3QgYmUgdXNlZC5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhY2hlKGFycmF5KSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcclxuICAgICAgICAgICAgZmlyc3QgPSBhcnJheVswXSxcclxuICAgICAgICAgICAgbWlkID0gYXJyYXlbKGxlbmd0aCAvIDIpIHwgMF0sXHJcbiAgICAgICAgICAgIGxhc3QgPSBhcnJheVtsZW5ndGggLSAxXTtcclxuXHJcbiAgICAgICAgaWYgKGZpcnN0ICYmIHR5cGVvZiBmaXJzdCA9PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICBtaWQgJiYgdHlwZW9mIG1pZCA9PSAnb2JqZWN0JyAmJiBsYXN0ICYmIHR5cGVvZiBsYXN0ID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNhY2hlID0gZ2V0T2JqZWN0KCk7XHJcbiAgICAgICAgY2FjaGVbJ2ZhbHNlJ10gPSBjYWNoZVsnbnVsbCddID0gY2FjaGVbJ3RydWUnXSA9IGNhY2hlWyd1bmRlZmluZWQnXSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0T2JqZWN0KCk7XHJcbiAgICAgICAgcmVzdWx0LmFycmF5ID0gYXJyYXk7XHJcbiAgICAgICAgcmVzdWx0LmNhY2hlID0gY2FjaGU7XHJcbiAgICAgICAgcmVzdWx0LnB1c2ggPSBjYWNoZVB1c2g7XHJcblxyXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycmF5W2luZGV4XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGJ5IGB0ZW1wbGF0ZWAgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZFxyXG4gICAgICogc3RyaW5nIGxpdGVyYWxzLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWF0Y2ggVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gZXNjYXBlU3RyaW5nQ2hhcihtYXRjaCkge1xyXG4gICAgICAgIHJldHVybiAnXFxcXCcgKyBzdHJpbmdFc2NhcGVzW21hdGNoXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYW4gYXJyYXkgZnJvbSB0aGUgYXJyYXkgcG9vbCBvciBjcmVhdGVzIGEgbmV3IG9uZSBpZiB0aGUgcG9vbCBpcyBlbXB0eS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHJldHVybnMge0FycmF5fSBUaGUgYXJyYXkgZnJvbSB0aGUgcG9vbC5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEFycmF5KCkge1xyXG4gICAgICAgIHJldHVybiBhcnJheVBvb2wucG9wKCkgfHwgW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGFuIG9iamVjdCBmcm9tIHRoZSBvYmplY3QgcG9vbCBvciBjcmVhdGVzIGEgbmV3IG9uZSBpZiB0aGUgcG9vbCBpcyBlbXB0eS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gVGhlIG9iamVjdCBmcm9tIHRoZSBwb29sLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0KCkge1xyXG4gICAgICAgIHJldHVybiBvYmplY3RQb29sLnBvcCgpIHx8IHtcclxuICAgICAgICAgICAgJ2FycmF5JzogbnVsbCxcclxuICAgICAgICAgICAgJ2NhY2hlJzogbnVsbCxcclxuICAgICAgICAgICAgJ2NyaXRlcmlhJzogbnVsbCxcclxuICAgICAgICAgICAgJ2ZhbHNlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdpbmRleCc6IDAsXHJcbiAgICAgICAgICAgICdudWxsJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdudW1iZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnb2JqZWN0JzogbnVsbCxcclxuICAgICAgICAgICAgJ3B1c2gnOiBudWxsLFxyXG4gICAgICAgICAgICAnc3RyaW5nJzogbnVsbCxcclxuICAgICAgICAgICAgJ3RydWUnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3VuZGVmaW5lZCc6IGZhbHNlLFxyXG4gICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2VzIHRoZSBnaXZlbiBhcnJheSBiYWNrIHRvIHRoZSBhcnJheSBwb29sLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byByZWxlYXNlLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gcmVsZWFzZUFycmF5KGFycmF5KSB7XHJcbiAgICAgICAgYXJyYXkubGVuZ3RoID0gMDtcclxuICAgICAgICBpZiAoYXJyYXlQb29sLmxlbmd0aCA8IG1heFBvb2xTaXplKSB7XHJcbiAgICAgICAgICAgIGFycmF5UG9vbC5wdXNoKGFycmF5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWxlYXNlcyB0aGUgZ2l2ZW4gb2JqZWN0IGJhY2sgdG8gdGhlIG9iamVjdCBwb29sLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byByZWxlYXNlLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gcmVsZWFzZU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICB2YXIgY2FjaGUgPSBvYmplY3QuY2FjaGU7XHJcbiAgICAgICAgaWYgKGNhY2hlKSB7XHJcbiAgICAgICAgICAgIHJlbGVhc2VPYmplY3QoY2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmplY3QuYXJyYXkgPSBvYmplY3QuY2FjaGUgPSBvYmplY3QuY3JpdGVyaWEgPSBvYmplY3Qub2JqZWN0ID0gb2JqZWN0Lm51bWJlciA9IG9iamVjdC5zdHJpbmcgPSBvYmplY3QudmFsdWUgPSBudWxsO1xyXG4gICAgICAgIGlmIChvYmplY3RQb29sLmxlbmd0aCA8IG1heFBvb2xTaXplKSB7XHJcbiAgICAgICAgICAgIG9iamVjdFBvb2wucHVzaChvYmplY3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNsaWNlcyB0aGUgYGNvbGxlY3Rpb25gIGZyb20gdGhlIGBzdGFydGAgaW5kZXggdXAgdG8sIGJ1dCBub3QgaW5jbHVkaW5nLFxyXG4gICAgICogdGhlIGBlbmRgIGluZGV4LlxyXG4gICAgICpcclxuICAgICAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBpbnN0ZWFkIG9mIGBBcnJheSNzbGljZWAgdG8gc3VwcG9ydCBub2RlIGxpc3RzXHJcbiAgICAgKiBpbiBJRSA8IDkgYW5kIHRvIGVuc3VyZSBkZW5zZSBhcnJheXMgYXJlIHJldHVybmVkLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2xpY2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHN0YXJ0IGluZGV4LlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIGluZGV4LlxyXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkuXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBzbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xyXG4gICAgICAgIHN0YXJ0IHx8IChzdGFydCA9IDApO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZW5kID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGVuZCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGVuZCAtIHN0YXJ0IHx8IDAsXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCA8IDAgPyAwIDogbGVuZ3RoKTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGFycmF5W3N0YXJ0ICsgaW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IGBsb2Rhc2hgIGZ1bmN0aW9uIHVzaW5nIHRoZSBnaXZlbiBjb250ZXh0IG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0PXJvb3RdIFRoZSBjb250ZXh0IG9iamVjdC5cclxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBydW5JbkNvbnRleHQoY29udGV4dCkge1xyXG4gICAgICAgIC8vIEF2b2lkIGlzc3VlcyB3aXRoIHNvbWUgRVMzIGVudmlyb25tZW50cyB0aGF0IGF0dGVtcHQgdG8gdXNlIHZhbHVlcywgbmFtZWRcclxuICAgICAgICAvLyBhZnRlciBidWlsdC1pbiBjb25zdHJ1Y3RvcnMgbGlrZSBgT2JqZWN0YCwgZm9yIHRoZSBjcmVhdGlvbiBvZiBsaXRlcmFscy5cclxuICAgICAgICAvLyBFUzUgY2xlYXJzIHRoaXMgdXAgYnkgc3RhdGluZyB0aGF0IGxpdGVyYWxzIG11c3QgdXNlIGJ1aWx0LWluIGNvbnN0cnVjdG9ycy5cclxuICAgICAgICAvLyBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI3gxMS4xLjUuXHJcbiAgICAgICAgY29udGV4dCA9IGNvbnRleHQgPyBfLmRlZmF1bHRzKHJvb3QuT2JqZWN0KCksIGNvbnRleHQsIF8ucGljayhyb290LCBjb250ZXh0UHJvcHMpKSA6IHJvb3Q7XHJcblxyXG4gICAgICAgIC8qKiBOYXRpdmUgY29uc3RydWN0b3IgcmVmZXJlbmNlcyAqL1xyXG4gICAgICAgIHZhciBBcnJheSA9IGNvbnRleHQuQXJyYXksXHJcbiAgICAgICAgICAgIEJvb2xlYW4gPSBjb250ZXh0LkJvb2xlYW4sXHJcbiAgICAgICAgICAgIERhdGUgPSBjb250ZXh0LkRhdGUsXHJcbiAgICAgICAgICAgIEZ1bmN0aW9uID0gY29udGV4dC5GdW5jdGlvbixcclxuICAgICAgICAgICAgTWF0aCA9IGNvbnRleHQuTWF0aCxcclxuICAgICAgICAgICAgTnVtYmVyID0gY29udGV4dC5OdW1iZXIsXHJcbiAgICAgICAgICAgIE9iamVjdCA9IGNvbnRleHQuT2JqZWN0LFxyXG4gICAgICAgICAgICBSZWdFeHAgPSBjb250ZXh0LlJlZ0V4cCxcclxuICAgICAgICAgICAgU3RyaW5nID0gY29udGV4dC5TdHJpbmcsXHJcbiAgICAgICAgICAgIFR5cGVFcnJvciA9IGNvbnRleHQuVHlwZUVycm9yO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVc2VkIGZvciBgQXJyYXlgIG1ldGhvZCByZWZlcmVuY2VzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm9ybWFsbHkgYEFycmF5LnByb3RvdHlwZWAgd291bGQgc3VmZmljZSwgaG93ZXZlciwgdXNpbmcgYW4gYXJyYXkgbGl0ZXJhbFxyXG4gICAgICAgICAqIGF2b2lkcyBpc3N1ZXMgaW4gTmFyd2hhbC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgYXJyYXlSZWYgPSBbXTtcclxuXHJcbiAgICAgICAgLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyAqL1xyXG4gICAgICAgIHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XHJcblxyXG4gICAgICAgIC8qKiBVc2VkIHRvIHJlc3RvcmUgdGhlIG9yaWdpbmFsIGBfYCByZWZlcmVuY2UgaW4gYG5vQ29uZmxpY3RgICovXHJcbiAgICAgICAgdmFyIG9sZERhc2ggPSBjb250ZXh0Ll87XHJcblxyXG4gICAgICAgIC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGludGVybmFsIFtbQ2xhc3NdXSBvZiB2YWx1ZXMgKi9cclxuICAgICAgICB2YXIgdG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcclxuXHJcbiAgICAgICAgLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZSAqL1xyXG4gICAgICAgIHZhciByZU5hdGl2ZSA9IFJlZ0V4cCgnXicgK1xyXG4gICAgICAgICAgICBTdHJpbmcodG9TdHJpbmcpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC90b1N0cmluZ3wgZm9yIFteXFxdXSsvZywgJy4qPycpICsgJyQnXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLyoqIE5hdGl2ZSBtZXRob2Qgc2hvcnRjdXRzICovXHJcbiAgICAgICAgdmFyIGNlaWwgPSBNYXRoLmNlaWwsXHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCA9IGNvbnRleHQuY2xlYXJUaW1lb3V0LFxyXG4gICAgICAgICAgICBmbG9vciA9IE1hdGguZmxvb3IsXHJcbiAgICAgICAgICAgIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsXHJcbiAgICAgICAgICAgIGdldFByb3RvdHlwZU9mID0gaXNOYXRpdmUoZ2V0UHJvdG90eXBlT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YpICYmIGdldFByb3RvdHlwZU9mLFxyXG4gICAgICAgICAgICBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5LFxyXG4gICAgICAgICAgICBwdXNoID0gYXJyYXlSZWYucHVzaCxcclxuICAgICAgICAgICAgc2V0VGltZW91dCA9IGNvbnRleHQuc2V0VGltZW91dCxcclxuICAgICAgICAgICAgc3BsaWNlID0gYXJyYXlSZWYuc3BsaWNlLFxyXG4gICAgICAgICAgICB1bnNoaWZ0ID0gYXJyYXlSZWYudW5zaGlmdDtcclxuXHJcbiAgICAgICAgLyoqIFVzZWQgdG8gc2V0IG1ldGEgZGF0YSBvbiBmdW5jdGlvbnMgKi9cclxuICAgICAgICB2YXIgZGVmaW5lUHJvcGVydHkgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBJRSA4IG9ubHkgYWNjZXB0cyBET00gZWxlbWVudHNcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBvID0ge30sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuYyA9IGlzTmF0aXZlKGZ1bmMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkpICYmIGZ1bmMsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYyhvLCBvLCBvKSAmJiBmdW5jO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KCkpO1xyXG5cclxuICAgICAgICAvKiBOYXRpdmUgbWV0aG9kIHNob3J0Y3V0cyBmb3IgbWV0aG9kcyB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcyAqL1xyXG4gICAgICAgIHZhciBuYXRpdmVDcmVhdGUgPSBpc05hdGl2ZShuYXRpdmVDcmVhdGUgPSBPYmplY3QuY3JlYXRlKSAmJiBuYXRpdmVDcmVhdGUsXHJcbiAgICAgICAgICAgIG5hdGl2ZUlzQXJyYXkgPSBpc05hdGl2ZShuYXRpdmVJc0FycmF5ID0gQXJyYXkuaXNBcnJheSkgJiYgbmF0aXZlSXNBcnJheSxcclxuICAgICAgICAgICAgbmF0aXZlSXNGaW5pdGUgPSBjb250ZXh0LmlzRmluaXRlLFxyXG4gICAgICAgICAgICBuYXRpdmVJc05hTiA9IGNvbnRleHQuaXNOYU4sXHJcbiAgICAgICAgICAgIG5hdGl2ZUtleXMgPSBpc05hdGl2ZShuYXRpdmVLZXlzID0gT2JqZWN0LmtleXMpICYmIG5hdGl2ZUtleXMsXHJcbiAgICAgICAgICAgIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxyXG4gICAgICAgICAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbixcclxuICAgICAgICAgICAgbmF0aXZlUGFyc2VJbnQgPSBjb250ZXh0LnBhcnNlSW50LFxyXG4gICAgICAgICAgICBuYXRpdmVSYW5kb20gPSBNYXRoLnJhbmRvbTtcclxuXHJcbiAgICAgICAgLyoqIFVzZWQgdG8gbG9va3VwIGEgYnVpbHQtaW4gY29uc3RydWN0b3IgYnkgW1tDbGFzc11dICovXHJcbiAgICAgICAgdmFyIGN0b3JCeUNsYXNzID0ge307XHJcbiAgICAgICAgY3RvckJ5Q2xhc3NbYXJyYXlDbGFzc10gPSBBcnJheTtcclxuICAgICAgICBjdG9yQnlDbGFzc1tib29sQ2xhc3NdID0gQm9vbGVhbjtcclxuICAgICAgICBjdG9yQnlDbGFzc1tkYXRlQ2xhc3NdID0gRGF0ZTtcclxuICAgICAgICBjdG9yQnlDbGFzc1tmdW5jQ2xhc3NdID0gRnVuY3Rpb247XHJcbiAgICAgICAgY3RvckJ5Q2xhc3Nbb2JqZWN0Q2xhc3NdID0gT2JqZWN0O1xyXG4gICAgICAgIGN0b3JCeUNsYXNzW251bWJlckNsYXNzXSA9IE51bWJlcjtcclxuICAgICAgICBjdG9yQnlDbGFzc1tyZWdleHBDbGFzc10gPSBSZWdFeHA7XHJcbiAgICAgICAgY3RvckJ5Q2xhc3Nbc3RyaW5nQ2xhc3NdID0gU3RyaW5nO1xyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIG9iamVjdCB3aGljaCB3cmFwcyB0aGUgZ2l2ZW4gdmFsdWUgdG8gZW5hYmxlIGludHVpdGl2ZVxyXG4gICAgICAgICAqIG1ldGhvZCBjaGFpbmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEluIGFkZGl0aW9uIHRvIExvLURhc2ggbWV0aG9kcywgd3JhcHBlcnMgYWxzbyBoYXZlIHRoZSBmb2xsb3dpbmcgYEFycmF5YCBtZXRob2RzOlxyXG4gICAgICAgICAqIGBjb25jYXRgLCBgam9pbmAsIGBwb3BgLCBgcHVzaGAsIGByZXZlcnNlYCwgYHNoaWZ0YCwgYHNsaWNlYCwgYHNvcnRgLCBgc3BsaWNlYCxcclxuICAgICAgICAgKiBhbmQgYHVuc2hpZnRgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBDaGFpbmluZyBpcyBzdXBwb3J0ZWQgaW4gY3VzdG9tIGJ1aWxkcyBhcyBsb25nIGFzIHRoZSBgdmFsdWVgIG1ldGhvZCBpc1xyXG4gICAgICAgICAqIGltcGxpY2l0bHkgb3IgZXhwbGljaXRseSBpbmNsdWRlZCBpbiB0aGUgYnVpbGQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgY2hhaW5hYmxlIHdyYXBwZXIgZnVuY3Rpb25zIGFyZTpcclxuICAgICAgICAgKiBgYWZ0ZXJgLCBgYXNzaWduYCwgYGJpbmRgLCBgYmluZEFsbGAsIGBiaW5kS2V5YCwgYGNoYWluYCwgYGNvbXBhY3RgLFxyXG4gICAgICAgICAqIGBjb21wb3NlYCwgYGNvbmNhdGAsIGBjb3VudEJ5YCwgYGNyZWF0ZWAsIGBjcmVhdGVDYWxsYmFja2AsIGBjdXJyeWAsXHJcbiAgICAgICAgICogYGRlYm91bmNlYCwgYGRlZmF1bHRzYCwgYGRlZmVyYCwgYGRlbGF5YCwgYGRpZmZlcmVuY2VgLCBgZmlsdGVyYCwgYGZsYXR0ZW5gLFxyXG4gICAgICAgICAqIGBmb3JFYWNoYCwgYGZvckVhY2hSaWdodGAsIGBmb3JJbmAsIGBmb3JJblJpZ2h0YCwgYGZvck93bmAsIGBmb3JPd25SaWdodGAsXHJcbiAgICAgICAgICogYGZ1bmN0aW9uc2AsIGBncm91cEJ5YCwgYGluZGV4QnlgLCBgaW5pdGlhbGAsIGBpbnRlcnNlY3Rpb25gLCBgaW52ZXJ0YCxcclxuICAgICAgICAgKiBgaW52b2tlYCwgYGtleXNgLCBgbWFwYCwgYG1heGAsIGBtZW1vaXplYCwgYG1lcmdlYCwgYG1pbmAsIGBvYmplY3RgLCBgb21pdGAsXHJcbiAgICAgICAgICogYG9uY2VgLCBgcGFpcnNgLCBgcGFydGlhbGAsIGBwYXJ0aWFsUmlnaHRgLCBgcGlja2AsIGBwbHVja2AsIGBwdWxsYCwgYHB1c2hgLFxyXG4gICAgICAgICAqIGByYW5nZWAsIGByZWplY3RgLCBgcmVtb3ZlYCwgYHJlc3RgLCBgcmV2ZXJzZWAsIGBzaHVmZmxlYCwgYHNsaWNlYCwgYHNvcnRgLFxyXG4gICAgICAgICAqIGBzb3J0QnlgLCBgc3BsaWNlYCwgYHRhcGAsIGB0aHJvdHRsZWAsIGB0aW1lc2AsIGB0b0FycmF5YCwgYHRyYW5zZm9ybWAsXHJcbiAgICAgICAgICogYHVuaW9uYCwgYHVuaXFgLCBgdW5zaGlmdGAsIGB1bnppcGAsIGB2YWx1ZXNgLCBgd2hlcmVgLCBgd2l0aG91dGAsIGB3cmFwYCxcclxuICAgICAgICAgKiBhbmQgYHppcGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZSBub24tY2hhaW5hYmxlIHdyYXBwZXIgZnVuY3Rpb25zIGFyZTpcclxuICAgICAgICAgKiBgY2xvbmVgLCBgY2xvbmVEZWVwYCwgYGNvbnRhaW5zYCwgYGVzY2FwZWAsIGBldmVyeWAsIGBmaW5kYCwgYGZpbmRJbmRleGAsXHJcbiAgICAgICAgICogYGZpbmRLZXlgLCBgZmluZExhc3RgLCBgZmluZExhc3RJbmRleGAsIGBmaW5kTGFzdEtleWAsIGBoYXNgLCBgaWRlbnRpdHlgLFxyXG4gICAgICAgICAqIGBpbmRleE9mYCwgYGlzQXJndW1lbnRzYCwgYGlzQXJyYXlgLCBgaXNCb29sZWFuYCwgYGlzRGF0ZWAsIGBpc0VsZW1lbnRgLFxyXG4gICAgICAgICAqIGBpc0VtcHR5YCwgYGlzRXF1YWxgLCBgaXNGaW5pdGVgLCBgaXNGdW5jdGlvbmAsIGBpc05hTmAsIGBpc051bGxgLCBgaXNOdW1iZXJgLFxyXG4gICAgICAgICAqIGBpc09iamVjdGAsIGBpc1BsYWluT2JqZWN0YCwgYGlzUmVnRXhwYCwgYGlzU3RyaW5nYCwgYGlzVW5kZWZpbmVkYCwgYGpvaW5gLFxyXG4gICAgICAgICAqIGBsYXN0SW5kZXhPZmAsIGBtaXhpbmAsIGBub0NvbmZsaWN0YCwgYHBhcnNlSW50YCwgYHBvcGAsIGByYW5kb21gLCBgcmVkdWNlYCxcclxuICAgICAgICAgKiBgcmVkdWNlUmlnaHRgLCBgcmVzdWx0YCwgYHNoaWZ0YCwgYHNpemVgLCBgc29tZWAsIGBzb3J0ZWRJbmRleGAsIGBydW5JbkNvbnRleHRgLFxyXG4gICAgICAgICAqIGB0ZW1wbGF0ZWAsIGB1bmVzY2FwZWAsIGB1bmlxdWVJZGAsIGFuZCBgdmFsdWVgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgd3JhcHBlciBmdW5jdGlvbnMgYGZpcnN0YCBhbmQgYGxhc3RgIHJldHVybiB3cmFwcGVkIHZhbHVlcyB3aGVuIGBuYCBpc1xyXG4gICAgICAgICAqIHByb3ZpZGVkLCBvdGhlcndpc2UgdGhleSByZXR1cm4gdW53cmFwcGVkIHZhbHVlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEV4cGxpY2l0IGNoYWluaW5nIGNhbiBiZSBlbmFibGVkIGJ5IHVzaW5nIHRoZSBgXy5jaGFpbmAgbWV0aG9kLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQG5hbWUgX1xyXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAgaW4gYSBgbG9kYXNoYCBpbnN0YW5jZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGEgYGxvZGFzaGAgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciB3cmFwcGVkID0gXyhbMSwgMiwgM10pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gcmV0dXJucyBhbiB1bndyYXBwZWQgdmFsdWVcclxuICAgICAgICAgKiB3cmFwcGVkLnJlZHVjZShmdW5jdGlvbihzdW0sIG51bSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIHN1bSArIG51bTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiA2XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyByZXR1cm5zIGEgd3JhcHBlZCB2YWx1ZVxyXG4gICAgICAgICAqIHZhciBzcXVhcmVzID0gd3JhcHBlZC5tYXAoZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gbnVtICogbnVtO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0FycmF5KHNxdWFyZXMpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzQXJyYXkoc3F1YXJlcy52YWx1ZSgpKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvZGFzaCh2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBkb24ndCB3cmFwIGlmIGFscmVhZHkgd3JhcHBlZCwgZXZlbiBpZiB3cmFwcGVkIGJ5IGEgZGlmZmVyZW50IGBsb2Rhc2hgIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgIHJldHVybiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmICFpc0FycmF5KHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnX193cmFwcGVkX18nKSkgPyB2YWx1ZSA6IG5ldyBsb2Rhc2hXcmFwcGVyKHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgZmFzdCBwYXRoIGZvciBjcmVhdGluZyBgbG9kYXNoYCB3cmFwcGVyIG9iamVjdHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAgaW4gYSBgbG9kYXNoYCBpbnN0YW5jZS5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoYWluQWxsIEEgZmxhZyB0byBlbmFibGUgY2hhaW5pbmcgZm9yIGFsbCBtZXRob2RzXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhIGBsb2Rhc2hgIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2Rhc2hXcmFwcGVyKHZhbHVlLCBjaGFpbkFsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9fY2hhaW5fXyA9ICEhY2hhaW5BbGw7XHJcbiAgICAgICAgICAgIHRoaXMuX193cmFwcGVkX18gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZW5zdXJlIGBuZXcgbG9kYXNoV3JhcHBlcmAgaXMgYW4gaW5zdGFuY2Ugb2YgYGxvZGFzaGBcclxuICAgICAgICBsb2Rhc2hXcmFwcGVyLnByb3RvdHlwZSA9IGxvZGFzaC5wcm90b3R5cGU7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIG9iamVjdCB1c2VkIHRvIGZsYWcgZW52aXJvbm1lbnRzIGZlYXR1cmVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHN1cHBvcnQgPSBsb2Rhc2guc3VwcG9ydCA9IHt9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlY3QgaWYgZnVuY3Rpb25zIGNhbiBiZSBkZWNvbXBpbGVkIGJ5IGBGdW5jdGlvbiN0b1N0cmluZ2BcclxuICAgICAgICAgKiAoYWxsIGJ1dCBQUzMgYW5kIG9sZGVyIE9wZXJhIG1vYmlsZSBicm93c2VycyAmIGF2b2lkZWQgaW4gV2luZG93cyA4IGFwcHMpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQG1lbWJlck9mIF8uc3VwcG9ydFxyXG4gICAgICAgICAqIEB0eXBlIGJvb2xlYW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdXBwb3J0LmZ1bmNEZWNvbXAgPSAhaXNOYXRpdmUoY29udGV4dC5XaW5SVEVycm9yKSAmJiByZVRoaXMudGVzdChydW5JbkNvbnRleHQpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlY3QgaWYgYEZ1bmN0aW9uI25hbWVgIGlzIHN1cHBvcnRlZCAoYWxsIGJ1dCBJRSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAbWVtYmVyT2YgXy5zdXBwb3J0XHJcbiAgICAgICAgICogQHR5cGUgYm9vbGVhblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN1cHBvcnQuZnVuY05hbWVzID0gdHlwZW9mIEZ1bmN0aW9uLm5hbWUgPT0gJ3N0cmluZyc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJ5IGRlZmF1bHQsIHRoZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzIHVzZWQgYnkgTG8tRGFzaCBhcmUgc2ltaWxhciB0byB0aG9zZSBpblxyXG4gICAgICAgICAqIGVtYmVkZGVkIFJ1YnkgKEVSQikuIENoYW5nZSB0aGUgZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZVxyXG4gICAgICAgICAqIGRlbGltaXRlcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBsb2Rhc2gudGVtcGxhdGVTZXR0aW5ncyA9IHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBVc2VkIHRvIGRldGVjdCBgZGF0YWAgcHJvcGVydHkgdmFsdWVzIHRvIGJlIEhUTUwtZXNjYXBlZC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xyXG4gICAgICAgICAgICAgKiBAdHlwZSBSZWdFeHBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICdlc2NhcGUnOiAvPCUtKFtcXHNcXFNdKz8pJT4vZyxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBVc2VkIHRvIGRldGVjdCBjb2RlIHRvIGJlIGV2YWx1YXRlZC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xyXG4gICAgICAgICAgICAgKiBAdHlwZSBSZWdFeHBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICdldmFsdWF0ZSc6IC88JShbXFxzXFxTXSs/KSU+L2csXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVXNlZCB0byBkZXRlY3QgYGRhdGFgIHByb3BlcnR5IHZhbHVlcyB0byBpbmplY3QuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcclxuICAgICAgICAgICAgICogQHR5cGUgUmVnRXhwXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAnaW50ZXJwb2xhdGUnOiByZUludGVycG9sYXRlLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFVzZWQgdG8gcmVmZXJlbmNlIHRoZSBkYXRhIG9iamVjdCBpbiB0aGUgdGVtcGxhdGUgdGV4dC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xyXG4gICAgICAgICAgICAgKiBAdHlwZSBzdHJpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICd2YXJpYWJsZSc6ICcnLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFVzZWQgdG8gaW1wb3J0IHZhcmlhYmxlcyBpbnRvIHRoZSBjb21waWxlZCB0ZW1wbGF0ZS5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xyXG4gICAgICAgICAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICdpbXBvcnRzJzoge1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxyXG4gICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3MuaW1wb3J0c1xyXG4gICAgICAgICAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgJ18nOiBsb2Rhc2hcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5iaW5kYCB0aGF0IGNyZWF0ZXMgdGhlIGJvdW5kIGZ1bmN0aW9uIGFuZFxyXG4gICAgICAgICAqIHNldHMgaXRzIG1ldGEgZGF0YS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYmluZERhdGEgVGhlIGJpbmQgZGF0YSBhcnJheS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZUJpbmQoYmluZERhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGZ1bmMgPSBiaW5kRGF0YVswXSxcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxBcmdzID0gYmluZERhdGFbMl0sXHJcbiAgICAgICAgICAgICAgICB0aGlzQXJnID0gYmluZERhdGFbNF07XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBib3VuZCgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGBGdW5jdGlvbiNiaW5kYCBzcGVjXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjMuNC41XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydGlhbEFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhdm9pZCBgYXJndW1lbnRzYCBvYmplY3QgZGVvcHRpbWl6YXRpb25zIGJ5IHVzaW5nIGBzbGljZWAgaW5zdGVhZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mIGBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbGAgYW5kIG5vdCBhc3NpZ25pbmcgYGFyZ3VtZW50c2AgdG8gYVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhcmlhYmxlIGFzIGEgdGVybmFyeSBleHByZXNzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShwYXJ0aWFsQXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gbWltaWMgdGhlIGNvbnN0cnVjdG9yJ3MgYHJldHVybmAgYmVoYXZpb3JcclxuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTMuMi4yXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIGJvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZW5zdXJlIGBuZXcgYm91bmRgIGlzIGFuIGluc3RhbmNlIG9mIGBmdW5jYFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aGlzQmluZGluZyA9IGJhc2VDcmVhdGUoZnVuYy5wcm90b3R5cGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzIHx8IGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzT2JqZWN0KHJlc3VsdCkgPyByZXN1bHQgOiB0aGlzQmluZGluZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MgfHwgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRCaW5kRGF0YShib3VuZCwgYmluZERhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gYm91bmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jbG9uZWAgd2l0aG91dCBhcmd1bWVudCBqdWdnbGluZyBvciBzdXBwb3J0XHJcbiAgICAgICAgICogZm9yIGB0aGlzQXJnYCBiaW5kaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbG9uZS5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXA9ZmFsc2VdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSBvYmplY3RzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgY2xvbmVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgY2xvbmVkIHZhbHVlLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiYXNlQ2xvbmUodmFsdWUsIGlzRGVlcCwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKSB7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpbnNwZWN0IFtbQ2xhc3NdXVxyXG4gICAgICAgICAgICB2YXIgaXNPYmogPSBpc09iamVjdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChpc09iaikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjbG9uZWFibGVDbGFzc2VzW2NsYXNzTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgY3RvciA9IGN0b3JCeUNsYXNzW2NsYXNzTmFtZV07XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgYm9vbENsYXNzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZGF0ZUNsYXNzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGN0b3IoK3ZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBudW1iZXJDbGFzczpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHN0cmluZ0NsYXNzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGN0b3IodmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHJlZ2V4cENsYXNzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjdG9yKHZhbHVlLnNvdXJjZSwgcmVGbGFncy5leGVjKHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5sYXN0SW5kZXggPSB2YWx1ZS5sYXN0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGlzQXJyID0gaXNBcnJheSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChpc0RlZXApIHtcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBjaXJjdWxhciByZWZlcmVuY2VzIGFuZCByZXR1cm4gY29ycmVzcG9uZGluZyBjbG9uZVxyXG4gICAgICAgICAgICAgICAgdmFyIGluaXRlZFN0YWNrID0gIXN0YWNrQTtcclxuICAgICAgICAgICAgICAgIHN0YWNrQSB8fCAoc3RhY2tBID0gZ2V0QXJyYXkoKSk7XHJcbiAgICAgICAgICAgICAgICBzdGFja0IgfHwgKHN0YWNrQiA9IGdldEFycmF5KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpc0FyciA/IGN0b3IodmFsdWUubGVuZ3RoKSA6IHt9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaXNBcnIgPyBzbGljZSh2YWx1ZSkgOiBhc3NpZ24oe30sIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhZGQgYXJyYXkgcHJvcGVydGllcyBhc3NpZ25lZCBieSBgUmVnRXhwI2V4ZWNgXHJcbiAgICAgICAgICAgIGlmIChpc0Fycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdpbmRleCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmluZGV4ID0gdmFsdWUuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2lucHV0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuaW5wdXQgPSB2YWx1ZS5pbnB1dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBleGl0IGZvciBzaGFsbG93IGNsb25lXHJcbiAgICAgICAgICAgIGlmICghaXNEZWVwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgc291cmNlIHZhbHVlIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0c1xyXG4gICAgICAgICAgICAvLyBhbmQgYXNzb2NpYXRlIGl0IHdpdGggaXRzIGNsb25lXHJcbiAgICAgICAgICAgIHN0YWNrQS5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgc3RhY2tCLnB1c2gocmVzdWx0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IHBvcHVsYXRlIGNsb25lIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cylcclxuICAgICAgICAgICAgKGlzQXJyID8gZm9yRWFjaCA6IGZvck93bikodmFsdWUsIGZ1bmN0aW9uIChvYmpWYWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGJhc2VDbG9uZShvYmpWYWx1ZSwgaXNEZWVwLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbml0ZWRTdGFjaykge1xyXG4gICAgICAgICAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQSk7XHJcbiAgICAgICAgICAgICAgICByZWxlYXNlQXJyYXkoc3RhY2tCKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFzc2lnbmluZ1xyXG4gICAgICAgICAqIHByb3BlcnRpZXMgdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJhc2VDcmVhdGUocHJvdG90eXBlLCBwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpc09iamVjdChwcm90b3R5cGUpID8gbmF0aXZlQ3JlYXRlKHByb3RvdHlwZSkgOiB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZmFsbGJhY2sgZm9yIGJyb3dzZXJzIHdpdGhvdXQgYE9iamVjdC5jcmVhdGVgXHJcbiAgICAgICAgaWYgKCFuYXRpdmVDcmVhdGUpIHtcclxuICAgICAgICAgICAgYmFzZUNyZWF0ZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBPYmplY3QoKSB7IH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvdG90eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHByb3RvdHlwZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZSA9IHByb3RvdHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0IHx8IGNvbnRleHQuT2JqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlQ2FsbGJhY2tgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY3JlYXRpbmdcclxuICAgICAgICAgKiBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW2Z1bmM9aWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGEgY2FsbGJhY2suXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGNhbGxiYWNrLlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRoZSBjYWxsYmFjayBhY2NlcHRzLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBhIGNhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiYXNlQ3JlYXRlQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZGVudGl0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBleGl0IGVhcmx5IGZvciBubyBgdGhpc0FyZ2Agb3IgYWxyZWFkeSBib3VuZCBieSBgRnVuY3Rpb24jYmluZGBcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnIHx8ICEoJ3Byb3RvdHlwZScgaW4gZnVuYykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBiaW5kRGF0YSA9IGZ1bmMuX19iaW5kRGF0YV9fO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJpbmREYXRhID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydC5mdW5jTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YSA9ICFmdW5jLm5hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBiaW5kRGF0YSA9IGJpbmREYXRhIHx8ICFzdXBwb3J0LmZ1bmNEZWNvbXA7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJpbmREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGZuVG9TdHJpbmcuY2FsbChmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1cHBvcnQuZnVuY05hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmREYXRhID0gIXJlRnVuY05hbWUudGVzdChzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWJpbmREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrcyBpZiBgZnVuY2AgcmVmZXJlbmNlcyB0aGUgYHRoaXNgIGtleXdvcmQgYW5kIHN0b3JlcyB0aGUgcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmREYXRhID0gcmVUaGlzLnRlc3Qoc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QmluZERhdGEoZnVuYywgYmluZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBleGl0IGVhcmx5IGlmIHRoZXJlIGFyZSBubyBgdGhpc2AgcmVmZXJlbmNlcyBvciBgZnVuY2AgaXMgYm91bmRcclxuICAgICAgICAgICAgaWYgKGJpbmREYXRhID09PSBmYWxzZSB8fCAoYmluZERhdGEgIT09IHRydWUgJiYgYmluZERhdGFbMV0gJiAxKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3dpdGNoIChhcmdDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhLCBiKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJpbmQoZnVuYywgdGhpc0FyZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgY3JlYXRlV3JhcHBlcmAgdGhhdCBjcmVhdGVzIHRoZSB3cmFwcGVyIGFuZFxyXG4gICAgICAgICAqIHNldHMgaXRzIG1ldGEgZGF0YS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYmluZERhdGEgVGhlIGJpbmQgZGF0YSBhcnJheS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZUNyZWF0ZVdyYXBwZXIoYmluZERhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGZ1bmMgPSBiaW5kRGF0YVswXSxcclxuICAgICAgICAgICAgICAgIGJpdG1hc2sgPSBiaW5kRGF0YVsxXSxcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxBcmdzID0gYmluZERhdGFbMl0sXHJcbiAgICAgICAgICAgICAgICBwYXJ0aWFsUmlnaHRBcmdzID0gYmluZERhdGFbM10sXHJcbiAgICAgICAgICAgICAgICB0aGlzQXJnID0gYmluZERhdGFbNF0sXHJcbiAgICAgICAgICAgICAgICBhcml0eSA9IGJpbmREYXRhWzVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiAxLFxyXG4gICAgICAgICAgICAgICAgaXNCaW5kS2V5ID0gYml0bWFzayAmIDIsXHJcbiAgICAgICAgICAgICAgICBpc0N1cnJ5ID0gYml0bWFzayAmIDQsXHJcbiAgICAgICAgICAgICAgICBpc0N1cnJ5Qm91bmQgPSBiaXRtYXNrICYgOCxcclxuICAgICAgICAgICAgICAgIGtleSA9IGZ1bmM7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBib3VuZCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGlzQmluZGluZyA9IGlzQmluZCA/IHRoaXNBcmcgOiB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxBcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShwYXJ0aWFsQXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxSaWdodEFyZ3MgfHwgaXNDdXJyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgfHwgKGFyZ3MgPSBzbGljZShhcmd1bWVudHMpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydGlhbFJpZ2h0QXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIHBhcnRpYWxSaWdodEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDdXJyeSAmJiBhcmdzLmxlbmd0aCA8IGFyaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdG1hc2sgfD0gMTYgJiB+MzI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXNlQ3JlYXRlV3JhcHBlcihbZnVuYywgKGlzQ3VycnlCb3VuZCA/IGJpdG1hc2sgOiBiaXRtYXNrICYgfjMpLCBhcmdzLCBudWxsLCB0aGlzQXJnLCBhcml0eV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFyZ3MgfHwgKGFyZ3MgPSBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzQmluZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmMgPSB0aGlzQmluZGluZ1trZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCaW5kaW5nID0gYmFzZUNyZWF0ZShmdW5jLnByb3RvdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogdGhpc0JpbmRpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0QmluZERhdGEoYm91bmQsIGJpbmREYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJvdW5kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZGlmZmVyZW5jZWAgdGhhdCBhY2NlcHRzIGEgc2luZ2xlIGFycmF5XHJcbiAgICAgICAgICogb2YgdmFsdWVzIHRvIGV4Y2x1ZGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSBhcnJheSBvZiB2YWx1ZXMgdG8gZXhjbHVkZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiYXNlRGlmZmVyZW5jZShhcnJheSwgdmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgIGlzTGFyZ2UgPSBsZW5ndGggPj0gbGFyZ2VBcnJheVNpemUgJiYgaW5kZXhPZiA9PT0gYmFzZUluZGV4T2YsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0xhcmdlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FjaGUgPSBjcmVhdGVDYWNoZSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhPZiA9IGNhY2hlSW5kZXhPZjtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBjYWNoZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNMYXJnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXhPZih2YWx1ZXMsIHZhbHVlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzTGFyZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJlbGVhc2VPYmplY3QodmFsdWVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmxhdHRlbmAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xyXG4gICAgICAgICAqIHNob3J0aGFuZHMgb3IgYHRoaXNBcmdgIGJpbmRpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmbGF0dGVuLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU2hhbGxvdz1mYWxzZV0gQSBmbGFnIHRvIHJlc3RyaWN0IGZsYXR0ZW5pbmcgdG8gYSBzaW5nbGUgbGV2ZWwuXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTdHJpY3Q9ZmFsc2VdIEEgZmxhZyB0byByZXN0cmljdCBmbGF0dGVuaW5nIHRvIGFycmF5cyBhbmQgYGFyZ3VtZW50c2Agb2JqZWN0cy5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc3RhcnQgZnJvbS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgZmxhdHRlbmVkIGFycmF5LlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiYXNlRmxhdHRlbihhcnJheSwgaXNTaGFsbG93LCBpc1N0cmljdCwgZnJvbUluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IChmcm9tSW5kZXggfHwgMCkgLSAxLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmxlbmd0aCA9PSAnbnVtYmVyJyAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNBcmd1bWVudHModmFsdWUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGZsYXR0ZW4gYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzU2hhbGxvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGJhc2VGbGF0dGVuKHZhbHVlLCBpc1NoYWxsb3csIGlzU3RyaWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbEluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbExlbmd0aCA9IHZhbHVlLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzSW5kZXggPSByZXN1bHQubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQubGVuZ3RoICs9IHZhbExlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKyt2YWxJbmRleCA8IHZhbExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzSW5kZXgrK10gPSB2YWx1ZVt2YWxJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNTdHJpY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgLCB3aXRob3V0IHN1cHBvcnQgZm9yIGB0aGlzQXJnYCBiaW5kaW5nLFxyXG4gICAgICAgICAqIHRoYXQgYWxsb3dzIHBhcnRpYWwgXCJfLndoZXJlXCIgc3R5bGUgY29tcGFyaXNvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gYSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IGIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2lzV2hlcmU9ZmFsc2VdIEEgZmxhZyB0byBpbmRpY2F0ZSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgYWAgb2JqZWN0cy5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBUcmFja3MgdHJhdmVyc2VkIGBiYCBvYmplY3RzLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJhc2VJc0VxdWFsKGEsIGIsIGNhbGxiYWNrLCBpc1doZXJlLCBzdGFja0EsIHN0YWNrQikge1xyXG4gICAgICAgICAgICAvLyB1c2VkIHRvIGluZGljYXRlIHRoYXQgd2hlbiBjb21wYXJpbmcgb2JqZWN0cywgYGFgIGhhcyBhdCBsZWFzdCB0aGUgcHJvcGVydGllcyBvZiBgYmBcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2soYSwgYik7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBleGl0IGVhcmx5IGZvciBpZGVudGljYWwgdmFsdWVzXHJcbiAgICAgICAgICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0cmVhdCBgKzBgIHZzLiBgLTBgIGFzIG5vdCBlcXVhbFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgIT09IDAgfHwgKDEgLyBhID09IDEgLyBiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBhLFxyXG4gICAgICAgICAgICAgICAgb3RoZXJUeXBlID0gdHlwZW9mIGI7XHJcblxyXG4gICAgICAgICAgICAvLyBleGl0IGVhcmx5IGZvciB1bmxpa2UgcHJpbWl0aXZlIHZhbHVlc1xyXG4gICAgICAgICAgICBpZiAoYSA9PT0gYSAmJiAhKGEgJiYgb2JqZWN0VHlwZXNbdHlwZV0pICYmICEoYiAmJiBvYmplY3RUeXBlc1tvdGhlclR5cGVdKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGV4aXQgZWFybHkgZm9yIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgYXZvaWRpbmcgRVMzJ3MgRnVuY3Rpb24jY2FsbCBiZWhhdmlvclxyXG4gICAgICAgICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjMuNC40XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYSA9PT0gYjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb21wYXJlIFtbQ2xhc3NdXSBuYW1lc1xyXG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKSxcclxuICAgICAgICAgICAgICAgIG90aGVyQ2xhc3MgPSB0b1N0cmluZy5jYWxsKGIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBhcmdzQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IG9iamVjdENsYXNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvdGhlckNsYXNzID09IGFyZ3NDbGFzcykge1xyXG4gICAgICAgICAgICAgICAgb3RoZXJDbGFzcyA9IG9iamVjdENsYXNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjbGFzc05hbWUgIT0gb3RoZXJDbGFzcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGJvb2xDbGFzczpcclxuICAgICAgICAgICAgICAgIGNhc2UgZGF0ZUNsYXNzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtYmVycywgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZCBib29sZWFuc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzIG5vdCBlcXVhbFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiArYSA9PSArYjtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIG51bWJlckNsYXNzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoYSAhPSArYSkgPyBiICE9ICtiXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IHRyZWF0IGArMGAgdnMuIGAtMGAgYXMgbm90IGVxdWFsXHJcbiAgICAgICAgICAgICAgICAgICAgOiAoYSA9PSAwID8gKDEgLyBhID09IDEgLyBiKSA6IGEgPT0gK2IpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgcmVnZXhwQ2xhc3M6XHJcbiAgICAgICAgICAgICAgICBjYXNlIHN0cmluZ0NsYXNzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgKGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMTAuNi40KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyZWF0IHN0cmluZyBwcmltaXRpdmVzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIG9iamVjdCBpbnN0YW5jZXMgYXMgZXF1YWxcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9PSBTdHJpbmcoYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGlzQXJyID0gY2xhc3NOYW1lID09IGFycmF5Q2xhc3M7XHJcbiAgICAgICAgICAgIGlmICghaXNBcnIpIHtcclxuICAgICAgICAgICAgICAgIC8vIHVud3JhcCBhbnkgYGxvZGFzaGAgd3JhcHBlZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIHZhciBhV3JhcHBlZCA9IGhhc093blByb3BlcnR5LmNhbGwoYSwgJ19fd3JhcHBlZF9fJyksXHJcbiAgICAgICAgICAgICAgICAgICAgYldyYXBwZWQgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKGIsICdfX3dyYXBwZWRfXycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhV3JhcHBlZCB8fCBiV3JhcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXNlSXNFcXVhbChhV3JhcHBlZCA/IGEuX193cmFwcGVkX18gOiBhLCBiV3JhcHBlZCA/IGIuX193cmFwcGVkX18gOiBiLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZXhpdCBmb3IgZnVuY3Rpb25zIGFuZCBET00gbm9kZXNcclxuICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgIT0gb2JqZWN0Q2xhc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBpbiBvbGRlciB2ZXJzaW9ucyBvZiBPcGVyYSwgYGFyZ3VtZW50c2Agb2JqZWN0cyBoYXZlIGBBcnJheWAgY29uc3RydWN0b3JzXHJcbiAgICAgICAgICAgICAgICB2YXIgY3RvckEgPSBhLmNvbnN0cnVjdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGN0b3JCID0gYi5jb25zdHJ1Y3RvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBub24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbFxyXG4gICAgICAgICAgICAgICAgaWYgKGN0b3JBICE9IGN0b3JCICYmICEoaXNGdW5jdGlvbihjdG9yQSkgJiYgY3RvckEgaW5zdGFuY2VvZiBjdG9yQSAmJiBpc0Z1bmN0aW9uKGN0b3JCKSAmJiBjdG9yQiBpbnN0YW5jZW9mIGN0b3JCKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICgnY29uc3RydWN0b3InIGluIGEgJiYgJ2NvbnN0cnVjdG9yJyBpbiBiKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFzc3VtZSBjeWNsaWMgc3RydWN0dXJlcyBhcmUgZXF1YWxcclxuICAgICAgICAgICAgLy8gdGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpYyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjFcclxuICAgICAgICAgICAgLy8gc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYCAoaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4xMi4zKVxyXG4gICAgICAgICAgICB2YXIgaW5pdGVkU3RhY2sgPSAhc3RhY2tBO1xyXG4gICAgICAgICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IGdldEFycmF5KCkpO1xyXG4gICAgICAgICAgICBzdGFja0IgfHwgKHN0YWNrQiA9IGdldEFycmF5KCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2tCW2xlbmd0aF0gPT0gYjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2l6ZSA9IDA7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgYGFgIGFuZCBgYmAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzXHJcbiAgICAgICAgICAgIHN0YWNrQS5wdXNoKGEpO1xyXG4gICAgICAgICAgICBzdGFja0IucHVzaChiKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyBhbmQgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cylcclxuICAgICAgICAgICAgaWYgKGlzQXJyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb21wYXJlIGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBzaXplID0gYi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBzaXplID09IGxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IHx8IGlzV2hlcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWVwIGNvbXBhcmUgdGhlIGNvbnRlbnRzLCBpZ25vcmluZyBub24tbnVtZXJpYyBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNpemUtLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBsZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGJbc2l6ZV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaGVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHJlc3VsdCA9IGJhc2VJc0VxdWFsKGFbaW5kZXhdLCB2YWx1ZSwgY2FsbGJhY2ssIGlzV2hlcmUsIHN0YWNrQSwgc3RhY2tCKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEocmVzdWx0ID0gYmFzZUlzRXF1YWwoYVtzaXplXSwgdmFsdWUsIGNhbGxiYWNrLCBpc1doZXJlLCBzdGFja0EsIHN0YWNrQikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGRlZXAgY29tcGFyZSBvYmplY3RzIHVzaW5nIGBmb3JJbmAsIGluc3RlYWQgb2YgYGZvck93bmAsIHRvIGF2b2lkIGBPYmplY3Qua2V5c2BcclxuICAgICAgICAgICAgICAgIC8vIHdoaWNoLCBpbiB0aGlzIGNhc2UsIGlzIG1vcmUgY29zdGx5XHJcbiAgICAgICAgICAgICAgICBmb3JJbihiLCBmdW5jdGlvbiAodmFsdWUsIGtleSwgYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY291bnQgdGhlIG51bWJlciBvZiBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZXAgY29tcGFyZSBlYWNoIHByb3BlcnR5IHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9IGhhc093blByb3BlcnR5LmNhbGwoYSwga2V5KSAmJiBiYXNlSXNFcXVhbChhW2tleV0sIHZhbHVlLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmICFpc1doZXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZW5zdXJlIGJvdGggb2JqZWN0cyBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ySW4oYSwgZnVuY3Rpb24gKHZhbHVlLCBrZXksIGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoYSwga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYHNpemVgIHdpbGwgYmUgYC0xYCBpZiBgYWAgaGFzIG1vcmUgcHJvcGVydGllcyB0aGFuIGBiYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQgPSAtLXNpemUgPiAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFja0EucG9wKCk7XHJcbiAgICAgICAgICAgIHN0YWNrQi5wb3AoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbml0ZWRTdGFjaykge1xyXG4gICAgICAgICAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQSk7XHJcbiAgICAgICAgICAgICAgICByZWxlYXNlQXJyYXkoc3RhY2tCKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWVyZ2VgIHdpdGhvdXQgYXJndW1lbnQganVnZ2xpbmcgb3Igc3VwcG9ydFxyXG4gICAgICAgICAqIGZvciBgdGhpc0FyZ2AgYmluZGluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIG1lcmdpbmcgcHJvcGVydGllcy5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSBvYmplY3RzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgdmFsdWVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZU1lcmdlKG9iamVjdCwgc291cmNlLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpIHtcclxuICAgICAgICAgICAgKGlzQXJyYXkoc291cmNlKSA/IGZvckVhY2ggOiBmb3JPd24pKHNvdXJjZSwgZnVuY3Rpb24gKHNvdXJjZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNBcnIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gc291cmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZSAmJiAoKGlzQXJyID0gaXNBcnJheShzb3VyY2UpKSB8fCBpc1BsYWluT2JqZWN0KHNvdXJjZSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgbWVyZ2luZyBwcmV2aW91c2x5IG1lcmdlZCBjeWNsaWMgc291cmNlc1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFja0xlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0YWNrTGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChmb3VuZCA9IHN0YWNrQVtzdGFja0xlbmd0aF0gPT0gc291cmNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzdGFja0Jbc3RhY2tMZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNTaGFsbG93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrKHZhbHVlLCBzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChpc1NoYWxsb3cgPSB0eXBlb2YgcmVzdWx0ICE9ICd1bmRlZmluZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNTaGFsbG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGlzQXJyID8gKGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbXSkgOiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IHt9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYHNvdXJjZWAgYW5kIGFzc29jaWF0ZWQgYHZhbHVlYCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tBLnB1c2goc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tCLnB1c2godmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjdXJzaXZlbHkgbWVyZ2Ugb2JqZWN0cyBhbmQgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1NoYWxsb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VNZXJnZSh2YWx1ZSwgc291cmNlLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2sodmFsdWUsIHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5yYW5kb21gIHdpdGhvdXQgYXJndW1lbnQganVnZ2xpbmcgb3Igc3VwcG9ydFxyXG4gICAgICAgICAqIGZvciByZXR1cm5pbmcgZmxvYXRpbmctcG9pbnQgbnVtYmVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG1pbiBUaGUgbWluaW11bSBwb3NzaWJsZSB2YWx1ZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSBtYXhpbXVtIHBvc3NpYmxlIHZhbHVlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYSByYW5kb20gbnVtYmVyLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiYXNlUmFuZG9tKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtaW4gKyBmbG9vcihuYXRpdmVSYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmlxYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHNcclxuICAgICAgICAgKiBvciBgdGhpc0FyZ2AgYmluZGluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHByb2Nlc3MuXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTb3J0ZWQ9ZmFsc2VdIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IGBhcnJheWAgaXMgc29ydGVkLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIGR1cGxpY2F0ZS12YWx1ZS1mcmVlIGFycmF5LlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiYXNlVW5pcShhcnJheSwgaXNTb3J0ZWQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgdmFyIGlzTGFyZ2UgPSAhaXNTb3J0ZWQgJiYgbGVuZ3RoID49IGxhcmdlQXJyYXlTaXplICYmIGluZGV4T2YgPT09IGJhc2VJbmRleE9mLFxyXG4gICAgICAgICAgICAgICAgc2VlbiA9IChjYWxsYmFjayB8fCBpc0xhcmdlKSA/IGdldEFycmF5KCkgOiByZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNMYXJnZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlID0gY3JlYXRlQ2FjaGUoc2Vlbik7XHJcbiAgICAgICAgICAgICAgICBpbmRleE9mID0gY2FjaGVJbmRleE9mO1xyXG4gICAgICAgICAgICAgICAgc2VlbiA9IGNhY2hlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQgPSBjYWxsYmFjayA/IGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgYXJyYXkpIDogdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzU29ydGVkID8gIWluZGV4IHx8IHNlZW5bc2Vlbi5sZW5ndGggLSAxXSAhPT0gY29tcHV0ZWQgOiBpbmRleE9mKHNlZW4sIGNvbXB1dGVkKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgfHwgaXNMYXJnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzTGFyZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJlbGVhc2VBcnJheShzZWVuLmFycmF5KTtcclxuICAgICAgICAgICAgICAgIHJlbGVhc2VPYmplY3Qoc2Vlbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHJlbGVhc2VBcnJheShzZWVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhIGNvbGxlY3Rpb24sIGNyZWF0aW5nIGFuIG9iamVjdCBjb21wb3NlZFxyXG4gICAgICAgICAqIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZyBlYWNoIGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb25cclxuICAgICAgICAgKiB0aHJvdWdoIGEgY2FsbGJhY2suIFRoZSBnaXZlbiBgc2V0dGVyYCBmdW5jdGlvbiBzZXRzIHRoZSBrZXlzIGFuZCB2YWx1ZXNcclxuICAgICAgICAgKiBvZiB0aGUgY29tcG9zZWQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXR0ZXIgVGhlIHNldHRlciBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhZ2dyZWdhdG9yIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVBZ2dyZWdhdG9yKHNldHRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0ZXIocmVzdWx0LCB2YWx1ZSwgY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGVyKHJlc3VsdCwgdmFsdWUsIGNhbGxiYWNrKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pLCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIGVpdGhlciBjdXJyaWVzIG9yIGludm9rZXMgYGZ1bmNgXHJcbiAgICAgICAgICogd2l0aCBhbiBvcHRpb25hbCBgdGhpc2AgYmluZGluZyBhbmQgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gZnVuYyBUaGUgZnVuY3Rpb24gb3IgbWV0aG9kIG5hbWUgdG8gcmVmZXJlbmNlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIG1ldGhvZCBmbGFncyB0byBjb21wb3NlLlxyXG4gICAgICAgICAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcclxuICAgICAgICAgKiAgMSAtIGBfLmJpbmRgXHJcbiAgICAgICAgICogIDIgLSBgXy5iaW5kS2V5YFxyXG4gICAgICAgICAqICA0IC0gYF8uY3VycnlgXHJcbiAgICAgICAgICogIDggLSBgXy5jdXJyeWAgKGJvdW5kKVxyXG4gICAgICAgICAqICAxNiAtIGBfLnBhcnRpYWxgXHJcbiAgICAgICAgICogIDMyIC0gYF8ucGFydGlhbFJpZ2h0YFxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsQXJnc10gQW4gYXJyYXkgb2YgYXJndW1lbnRzIHRvIHByZXBlbmQgdG8gdGhvc2VcclxuICAgICAgICAgKiAgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbFJpZ2h0QXJnc10gQW4gYXJyYXkgb2YgYXJndW1lbnRzIHRvIGFwcGVuZCB0byB0aG9zZVxyXG4gICAgICAgICAqICBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlV3JhcHBlcihmdW5jLCBiaXRtYXNrLCBwYXJ0aWFsQXJncywgcGFydGlhbFJpZ2h0QXJncywgdGhpc0FyZywgYXJpdHkpIHtcclxuICAgICAgICAgICAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiAxLFxyXG4gICAgICAgICAgICAgICAgaXNCaW5kS2V5ID0gYml0bWFzayAmIDIsXHJcbiAgICAgICAgICAgICAgICBpc0N1cnJ5ID0gYml0bWFzayAmIDQsXHJcbiAgICAgICAgICAgICAgICBpc0N1cnJ5Qm91bmQgPSBiaXRtYXNrICYgOCxcclxuICAgICAgICAgICAgICAgIGlzUGFydGlhbCA9IGJpdG1hc2sgJiAxNixcclxuICAgICAgICAgICAgICAgIGlzUGFydGlhbFJpZ2h0ID0gYml0bWFzayAmIDMyO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc0JpbmRLZXkgJiYgIWlzRnVuY3Rpb24oZnVuYykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzUGFydGlhbCAmJiAhcGFydGlhbEFyZ3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBiaXRtYXNrICY9IH4xNjtcclxuICAgICAgICAgICAgICAgIGlzUGFydGlhbCA9IHBhcnRpYWxBcmdzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzUGFydGlhbFJpZ2h0ICYmICFwYXJ0aWFsUmlnaHRBcmdzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgYml0bWFzayAmPSB+MzI7XHJcbiAgICAgICAgICAgICAgICBpc1BhcnRpYWxSaWdodCA9IHBhcnRpYWxSaWdodEFyZ3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYmluZERhdGEgPSBmdW5jICYmIGZ1bmMuX19iaW5kRGF0YV9fO1xyXG4gICAgICAgICAgICBpZiAoYmluZERhdGEgJiYgYmluZERhdGEgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNsb25lIGBiaW5kRGF0YWBcclxuICAgICAgICAgICAgICAgIGJpbmREYXRhID0gc2xpY2UoYmluZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJpbmREYXRhWzJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmluZERhdGFbMl0gPSBzbGljZShiaW5kRGF0YVsyXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYmluZERhdGFbM10pIHtcclxuICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YVszXSA9IHNsaWNlKGJpbmREYXRhWzNdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHNldCBgdGhpc0JpbmRpbmdgIGlzIG5vdCBwcmV2aW91c2x5IGJvdW5kXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNCaW5kICYmICEoYmluZERhdGFbMV0gJiAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJpbmREYXRhWzRdID0gdGhpc0FyZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHNldCBpZiBwcmV2aW91c2x5IGJvdW5kIGJ1dCBub3QgY3VycmVudGx5IChzdWJzZXF1ZW50IGN1cnJpZWQgZnVuY3Rpb25zKVxyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0JpbmQgJiYgYmluZERhdGFbMV0gJiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYml0bWFzayB8PSA4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJpZWQgYXJpdHkgaWYgbm90IHlldCBzZXRcclxuICAgICAgICAgICAgICAgIGlmIChpc0N1cnJ5ICYmICEoYmluZERhdGFbMV0gJiA0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJpbmREYXRhWzVdID0gYXJpdHk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBhcHBlbmQgcGFydGlhbCBsZWZ0IGFyZ3VtZW50c1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzUGFydGlhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHB1c2guYXBwbHkoYmluZERhdGFbMl0gfHwgKGJpbmREYXRhWzJdID0gW10pLCBwYXJ0aWFsQXJncyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBhcHBlbmQgcGFydGlhbCByaWdodCBhcmd1bWVudHNcclxuICAgICAgICAgICAgICAgIGlmIChpc1BhcnRpYWxSaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuc2hpZnQuYXBwbHkoYmluZERhdGFbM10gfHwgKGJpbmREYXRhWzNdID0gW10pLCBwYXJ0aWFsUmlnaHRBcmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIG1lcmdlIGZsYWdzXHJcbiAgICAgICAgICAgICAgICBiaW5kRGF0YVsxXSB8PSBiaXRtYXNrO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIuYXBwbHkobnVsbCwgYmluZERhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGZhc3QgcGF0aCBmb3IgYF8uYmluZGBcclxuICAgICAgICAgICAgdmFyIGNyZWF0ZXIgPSAoYml0bWFzayA9PSAxIHx8IGJpdG1hc2sgPT09IDE3KSA/IGJhc2VCaW5kIDogYmFzZUNyZWF0ZVdyYXBwZXI7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVyKFtmdW5jLCBiaXRtYXNrLCBwYXJ0aWFsQXJncywgcGFydGlhbFJpZ2h0QXJncywgdGhpc0FyZywgYXJpdHldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVzZWQgYnkgYGVzY2FwZWAgdG8gY29udmVydCBjaGFyYWN0ZXJzIHRvIEhUTUwgZW50aXRpZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtYXRjaCBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBlc2NhcGVIdG1sQ2hhcihtYXRjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaHRtbEVzY2FwZXNbbWF0Y2hdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgYXBwcm9wcmlhdGUgXCJpbmRleE9mXCIgZnVuY3Rpb24uIElmIHRoZSBgXy5pbmRleE9mYCBtZXRob2QgaXNcclxuICAgICAgICAgKiBjdXN0b21pemVkLCB0aGlzIG1ldGhvZCByZXR1cm5zIHRoZSBjdXN0b20gbWV0aG9kLCBvdGhlcndpc2UgaXQgcmV0dXJuc1xyXG4gICAgICAgICAqIHRoZSBgYmFzZUluZGV4T2ZgIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIFwiaW5kZXhPZlwiIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRJbmRleE9mKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gKHJlc3VsdCA9IGxvZGFzaC5pbmRleE9mKSA9PT0gaW5kZXhPZiA/IGJhc2VJbmRleE9mIDogcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc05hdGl2ZSh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicgJiYgcmVOYXRpdmUudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIGB0aGlzYCBiaW5kaW5nIGRhdGEgb24gYSBnaXZlbiBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gc2V0IGRhdGEgb24uXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gdmFsdWUgVGhlIGRhdGEgYXJyYXkgdG8gc2V0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzZXRCaW5kRGF0YSA9ICFkZWZpbmVQcm9wZXJ0eSA/IG5vb3AgOiBmdW5jdGlvbiAoZnVuYywgdmFsdWUpIHtcclxuICAgICAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBkZWZpbmVQcm9wZXJ0eShmdW5jLCAnX19iaW5kRGF0YV9fJywgZGVzY3JpcHRvcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBvZiBgaXNQbGFpbk9iamVjdGAgd2hpY2ggY2hlY2tzIGlmIGEgZ2l2ZW4gdmFsdWVcclxuICAgICAgICAgKiBpcyBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IsIGFzc3VtaW5nIG9iamVjdHMgY3JlYXRlZFxyXG4gICAgICAgICAqIGJ5IHRoZSBgT2JqZWN0YCBjb25zdHJ1Y3RvciBoYXZlIG5vIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgYW5kIHRoYXRcclxuICAgICAgICAgKiB0aGVyZSBhcmUgbm8gYE9iamVjdC5wcm90b3R5cGVgIGV4dGVuc2lvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNoaW1Jc1BsYWluT2JqZWN0KHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdG9yLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0O1xyXG5cclxuICAgICAgICAgICAgLy8gYXZvaWQgbm9uIE9iamVjdCBvYmplY3RzLCBgYXJndW1lbnRzYCBvYmplY3RzLCBhbmQgRE9NIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIGlmICghKHZhbHVlICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IG9iamVjdENsYXNzKSB8fFxyXG4gICAgICAgICAgICAgICAgKGN0b3IgPSB2YWx1ZS5jb25zdHJ1Y3RvciwgaXNGdW5jdGlvbihjdG9yKSAmJiAhKGN0b3IgaW5zdGFuY2VvZiBjdG9yKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJbiBtb3N0IGVudmlyb25tZW50cyBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcyBhcmUgaXRlcmF0ZWQgYmVmb3JlXHJcbiAgICAgICAgICAgIC8vIGl0cyBpbmhlcml0ZWQgcHJvcGVydGllcy4gSWYgdGhlIGxhc3QgaXRlcmF0ZWQgcHJvcGVydHkgaXMgYW4gb2JqZWN0J3NcclxuICAgICAgICAgICAgLy8gb3duIHByb3BlcnR5IHRoZW4gdGhlcmUgYXJlIG5vIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgIGZvckluKHZhbHVlLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0ga2V5O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT0gJ3VuZGVmaW5lZCcgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgcmVzdWx0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVzZWQgYnkgYHVuZXNjYXBlYCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byB1bmVzY2FwZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgY2hhcmFjdGVyLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB1bmVzY2FwZUh0bWxDaGFyKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBodG1sVW5lc2NhcGVzW21hdGNoXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogKGZ1bmN0aW9uKCkgeyByZXR1cm4gXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpOyB9KSgxLCAyLCAzKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUubGVuZ3RoID09ICdudW1iZXInICYmXHJcbiAgICAgICAgICAgICAgICB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzQ2xhc3MgfHwgZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEB0eXBlIEZ1bmN0aW9uXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogKGZ1bmN0aW9uKCkgeyByZXR1cm4gXy5pc0FycmF5KGFyZ3VtZW50cyk7IH0pKCk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmxlbmd0aCA9PSAnbnVtYmVyJyAmJlxyXG4gICAgICAgICAgICAgICAgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJyYXlDbGFzcyB8fCBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uIG9mIGBPYmplY3Qua2V5c2Agd2hpY2ggcHJvZHVjZXMgYW4gYXJyYXkgb2YgdGhlXHJcbiAgICAgICAgICogZ2l2ZW4gb2JqZWN0J3Mgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEB0eXBlIEZ1bmN0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzaGltS2V5cyA9IGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IG9iamVjdCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICBpZiAoIShvYmplY3RUeXBlc1t0eXBlb2Ygb2JqZWN0XSkpIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIGZvciAoaW5kZXggaW4gaXRlcmFibGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZXJhYmxlLCBpbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgY29tcG9zZWQgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmtleXMoeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSk7XHJcbiAgICAgICAgICogLy8gPT4gWydvbmUnLCAndHdvJywgJ3RocmVlJ10gKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGtleXMgPSAhbmF0aXZlS2V5cyA/IHNoaW1LZXlzIDogZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmF0aXZlS2V5cyhvYmplY3QpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVzZWQgdG8gY29udmVydCBjaGFyYWN0ZXJzIHRvIEhUTUwgZW50aXRpZXM6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaG91Z2ggdGhlIGA+YCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCBmb3Igc3ltbWV0cnksIGNoYXJhY3RlcnMgbGlrZSBgPmAgYW5kIGAvYFxyXG4gICAgICAgICAqIGRvbid0IHJlcXVpcmUgZXNjYXBpbmcgaW4gSFRNTCBhbmQgaGF2ZSBubyBzcGVjaWFsIG1lYW5pbmcgdW5sZXNzIHRoZXkncmUgcGFydFxyXG4gICAgICAgICAqIG9mIGEgdGFnIG9yIGFuIHVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS5cclxuICAgICAgICAgKiBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9hbWJpZ3VvdXMtYW1wZXJzYW5kcyAodW5kZXIgXCJzZW1pLXJlbGF0ZWQgZnVuIGZhY3RcIilcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgaHRtbEVzY2FwZXMgPSB7XHJcbiAgICAgICAgICAgICcmJzogJyZhbXA7JyxcclxuICAgICAgICAgICAgJzwnOiAnJmx0OycsXHJcbiAgICAgICAgICAgICc+JzogJyZndDsnLFxyXG4gICAgICAgICAgICAnXCInOiAnJnF1b3Q7JyxcclxuICAgICAgICAgICAgXCInXCI6ICcmIzM5OydcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogVXNlZCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycyAqL1xyXG4gICAgICAgIHZhciBodG1sVW5lc2NhcGVzID0gaW52ZXJ0KGh0bWxFc2NhcGVzKTtcclxuXHJcbiAgICAgICAgLyoqIFVzZWQgdG8gbWF0Y2ggSFRNTCBlbnRpdGllcyBhbmQgSFRNTCBjaGFyYWN0ZXJzICovXHJcbiAgICAgICAgdmFyIHJlRXNjYXBlZEh0bWwgPSBSZWdFeHAoJygnICsga2V5cyhodG1sVW5lc2NhcGVzKS5qb2luKCd8JykgKyAnKScsICdnJyksXHJcbiAgICAgICAgICAgIHJlVW5lc2NhcGVkSHRtbCA9IFJlZ0V4cCgnWycgKyBrZXlzKGh0bWxFc2NhcGVzKS5qb2luKCcnKSArICddJywgJ2cnKTtcclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFzc2lnbnMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0KHMpIHRvIHRoZSBkZXN0aW5hdGlvblxyXG4gICAgICAgICAqIG9iamVjdC4gU3Vic2VxdWVudCBzb3VyY2VzIHdpbGwgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzXHJcbiAgICAgICAgICogc291cmNlcy4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkIHRvIHByb2R1Y2UgdGhlXHJcbiAgICAgICAgICogYXNzaWduZWQgdmFsdWVzLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdHdvXHJcbiAgICAgICAgICogYXJndW1lbnRzOyAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEB0eXBlIEZ1bmN0aW9uXHJcbiAgICAgICAgICogQGFsaWFzIGV4dGVuZFxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlXSBUaGUgc291cmNlIG9iamVjdHMuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmluZyB2YWx1ZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmFzc2lnbih7ICduYW1lJzogJ2ZyZWQnIH0sIHsgJ2VtcGxveWVyJzogJ3NsYXRlJyB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBkZWZhdWx0cyA9IF8ucGFydGlhbFJpZ2h0KF8uYXNzaWduLCBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gdHlwZW9mIGEgPT0gJ3VuZGVmaW5lZCcgPyBiIDogYTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2Jhcm5leScgfTtcclxuICAgICAgICAgKiBkZWZhdWx0cyhvYmplY3QsIHsgJ25hbWUnOiAnZnJlZCcsICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgYXNzaWduID0gZnVuY3Rpb24gKG9iamVjdCwgc291cmNlLCBndWFyZCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXgsIGl0ZXJhYmxlID0gb2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlcmFibGU7XHJcbiAgICAgICAgICAgIGlmICghaXRlcmFibGUpIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgYXJnc0luZGV4ID0gMCxcclxuICAgICAgICAgICAgICAgIGFyZ3NMZW5ndGggPSB0eXBlb2YgZ3VhcmQgPT0gJ251bWJlcicgPyAyIDogYXJncy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmIChhcmdzTGVuZ3RoID4gMyAmJiB0eXBlb2YgYXJnc1thcmdzTGVuZ3RoIC0gMl0gPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gYmFzZUNyZWF0ZUNhbGxiYWNrKGFyZ3NbLS1hcmdzTGVuZ3RoIC0gMV0sIGFyZ3NbYXJnc0xlbmd0aC0tXSwgMik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJnc0xlbmd0aCA+IDIgJiYgdHlwZW9mIGFyZ3NbYXJnc0xlbmd0aCAtIDFdID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXJnc1stLWFyZ3NMZW5ndGhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGl0ZXJhYmxlID0gYXJnc1thcmdzSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZXJhYmxlICYmIG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3duSW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3duUHJvcHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdICYmIGtleXMoaXRlcmFibGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBvd25Qcm9wcyA/IG93blByb3BzLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgrK293bkluZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gb3duUHJvcHNbb3duSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gY2FsbGJhY2sgPyBjYWxsYmFjayhyZXN1bHRbaW5kZXhdLCBpdGVyYWJsZVtpbmRleF0pIDogaXRlcmFibGVbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIGB2YWx1ZWAuIElmIGBpc0RlZXBgIGlzIGB0cnVlYCBuZXN0ZWQgb2JqZWN0cyB3aWxsIGFsc29cclxuICAgICAgICAgKiBiZSBjbG9uZWQsIG90aGVyd2lzZSB0aGV5IHdpbGwgYmUgYXNzaWduZWQgYnkgcmVmZXJlbmNlLiBJZiBhIGNhbGxiYWNrXHJcbiAgICAgICAgICogaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCB0byBwcm9kdWNlIHRoZSBjbG9uZWQgdmFsdWVzLiBJZiB0aGVcclxuICAgICAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB1bmRlZmluZWRgIGNsb25pbmcgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC5cclxuICAgICAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbG9uZS5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXA9ZmFsc2VdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgY2xvbmVkIHZhbHVlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBzaGFsbG93ID0gXy5jbG9uZShjaGFyYWN0ZXJzKTtcclxuICAgICAgICAgKiBzaGFsbG93WzBdID09PSBjaGFyYWN0ZXJzWzBdO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBkZWVwID0gXy5jbG9uZShjaGFyYWN0ZXJzLCB0cnVlKTtcclxuICAgICAgICAgKiBkZWVwWzBdID09PSBjaGFyYWN0ZXJzWzBdO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm1peGluKHtcclxuICAgICAgICAgKiAgICdjbG9uZSc6IF8ucGFydGlhbFJpZ2h0KF8uY2xvbmUsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICogICAgIHJldHVybiBfLmlzRWxlbWVudCh2YWx1ZSkgPyB2YWx1ZS5jbG9uZU5vZGUoZmFsc2UpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAqICAgfSlcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjbG9uZSA9IF8uY2xvbmUoZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgICAgICogY2xvbmUuY2hpbGROb2Rlcy5sZW5ndGg7XHJcbiAgICAgICAgICogLy8gPT4gMFxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbG9uZSh2YWx1ZSwgaXNEZWVwLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICAvLyBhbGxvd3Mgd29ya2luZyB3aXRoIFwiQ29sbGVjdGlvbnNcIiBtZXRob2RzIHdpdGhvdXQgdXNpbmcgdGhlaXIgYGluZGV4YFxyXG4gICAgICAgICAgICAvLyBhbmQgYGNvbGxlY3Rpb25gIGFyZ3VtZW50cyBmb3IgYGlzRGVlcGAgYW5kIGBjYWxsYmFja2BcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc0RlZXAgIT0gJ2Jvb2xlYW4nICYmIGlzRGVlcCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQXJnID0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGlzRGVlcDtcclxuICAgICAgICAgICAgICAgIGlzRGVlcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlQ2xvbmUodmFsdWUsIGlzRGVlcCwgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicgJiYgYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAxKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZGVlcCBjbG9uZSBvZiBgdmFsdWVgLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmVcclxuICAgICAgICAgKiBleGVjdXRlZCB0byBwcm9kdWNlIHRoZSBjbG9uZWQgdmFsdWVzLiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgdW5kZWZpbmVkYFxyXG4gICAgICAgICAqIGNsb25pbmcgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvXHJcbiAgICAgICAgICogYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvbiB0aGUgc3RydWN0dXJlZCBjbG9uZSBhbGdvcml0aG0uIEZ1bmN0aW9uc1xyXG4gICAgICAgICAqIGFuZCBET00gbm9kZXMgYXJlICoqbm90KiogY2xvbmVkLiBUaGUgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGBhcmd1bWVudHNgIG9iamVjdHMgYW5kXHJcbiAgICAgICAgICogb2JqZWN0cyBjcmVhdGVkIGJ5IGNvbnN0cnVjdG9ycyBvdGhlciB0aGFuIGBPYmplY3RgIGFyZSBjbG9uZWQgdG8gcGxhaW4gYE9iamVjdGAgb2JqZWN0cy5cclxuICAgICAgICAgKiBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5mcmFzdHJ1Y3R1cmUuaHRtbCNpbnRlcm5hbC1zdHJ1Y3R1cmVkLWNsb25pbmctYWxnb3JpdGhtLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBkZWVwIGNsb25lLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZGVlcCBjbG9uZWQgdmFsdWUuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGRlZXAgPSBfLmNsb25lRGVlcChjaGFyYWN0ZXJzKTtcclxuICAgICAgICAgKiBkZWVwWzBdID09PSBjaGFyYWN0ZXJzWzBdO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgdmlldyA9IHtcclxuICAgICAgICAgKiAgICdsYWJlbCc6ICdkb2NzJyxcclxuICAgICAgICAgKiAgICdub2RlJzogZWxlbWVudFxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2xvbmUgPSBfLmNsb25lRGVlcCh2aWV3LCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIF8uaXNFbGVtZW50KHZhbHVlKSA/IHZhbHVlLmNsb25lTm9kZSh0cnVlKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGNsb25lLm5vZGUgPT0gdmlldy5ub2RlO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNsb25lRGVlcCh2YWx1ZSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VDbG9uZSh2YWx1ZSwgdHJ1ZSwgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicgJiYgYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAxKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIGBwcm90b3R5cGVgIG9iamVjdC4gSWYgYVxyXG4gICAgICAgICAqIGBwcm9wZXJ0aWVzYCBvYmplY3QgaXMgcHJvdmlkZWQgaXRzIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgYXJlIGFzc2lnbmVkXHJcbiAgICAgICAgICogdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc10gVGhlIHByb3BlcnRpZXMgdG8gYXNzaWduIHRvIHRoZSBvYmplY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XHJcbiAgICAgICAgICogICB0aGlzLnggPSAwO1xyXG4gICAgICAgICAqICAgdGhpcy55ID0gMDtcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmdW5jdGlvbiBDaXJjbGUoKSB7XHJcbiAgICAgICAgICogICBTaGFwZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIENpcmNsZS5wcm90b3R5cGUgPSBfLmNyZWF0ZShTaGFwZS5wcm90b3R5cGUsIHsgJ2NvbnN0cnVjdG9yJzogQ2lyY2xlIH0pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNpcmNsZSA9IG5ldyBDaXJjbGU7XHJcbiAgICAgICAgICogY2lyY2xlIGluc3RhbmNlb2YgQ2lyY2xlO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGNpcmNsZSBpbnN0YW5jZW9mIFNoYXBlO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlKHByb3RvdHlwZSwgcHJvcGVydGllcykge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydGllcyA/IGFzc2lnbihyZXN1bHQsIHByb3BlcnRpZXMpIDogcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXNzaWducyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3QocykgdG8gdGhlIGRlc3RpbmF0aW9uXHJcbiAgICAgICAgICogb2JqZWN0IGZvciBhbGwgZGVzdGluYXRpb24gcHJvcGVydGllcyB0aGF0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAuIE9uY2UgYVxyXG4gICAgICAgICAqIHByb3BlcnR5IGlzIHNldCwgYWRkaXRpb25hbCBkZWZhdWx0cyBvZiB0aGUgc2FtZSBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9yZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlXSBUaGUgc291cmNlIG9iamVjdHMuXHJcbiAgICAgICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEFsbG93cyB3b3JraW5nIHdpdGggYF8ucmVkdWNlYCB3aXRob3V0IHVzaW5nIGl0c1xyXG4gICAgICAgICAqICBga2V5YCBhbmQgYG9iamVjdGAgYXJndW1lbnRzIGFzIHNvdXJjZXMuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdiYXJuZXknIH07XHJcbiAgICAgICAgICogXy5kZWZhdWx0cyhvYmplY3QsIHsgJ25hbWUnOiAnZnJlZCcsICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgZGVmYXVsdHMgPSBmdW5jdGlvbiAob2JqZWN0LCBzb3VyY2UsIGd1YXJkKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCwgaXRlcmFibGUgPSBvYmplY3QsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpdGVyYWJsZTtcclxuICAgICAgICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXHJcbiAgICAgICAgICAgICAgICBhcmdzSW5kZXggPSAwLFxyXG4gICAgICAgICAgICAgICAgYXJnc0xlbmd0aCA9IHR5cGVvZiBndWFyZCA9PSAnbnVtYmVyJyA/IDIgOiBhcmdzLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaXRlcmFibGUgPSBhcmdzW2FyZ3NJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlcmFibGUgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvd25JbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvd25Qcm9wcyA9IG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0gJiYga2V5cyhpdGVyYWJsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IG93blByb3BzID8gb3duUHJvcHMubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCsrb3duSW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBvd25Qcm9wc1tvd25JbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0W2luZGV4XSA9PSAndW5kZWZpbmVkJykgcmVzdWx0W2luZGV4XSA9IGl0ZXJhYmxlW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZEluZGV4YCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBrZXkgb2YgdGhlXHJcbiAgICAgICAgICogZmlyc3QgZWxlbWVudCB0aGF0IHBhc3NlcyB0aGUgY2FsbGJhY2sgY2hlY2ssIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBzZWFyY2guXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyXHJcbiAgICAgICAgICogIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG9cclxuICAgICAgICAgKiAgY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUga2V5IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IHtcclxuICAgICAgICAgKiAgICdiYXJuZXknOiB7ICAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcclxuICAgICAgICAgKiAgICdmcmVkJzogeyAgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9LFxyXG4gICAgICAgICAqICAgJ3BlYmJsZXMnOiB7ICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiBmYWxzZSB9XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZmluZEtleShjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gJ2Jhcm5leScgKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbmRLZXkoY2hhcmFjdGVycywgeyAnYWdlJzogMSB9KTtcclxuICAgICAgICAgKiAvLyA9PiAncGViYmxlcydcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZmluZEtleShjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+ICdmcmVkJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaW5kS2V5KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICBmb3JPd24ob2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSwgb2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGtleSwgb2JqZWN0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kS2V5YCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXHJcbiAgICAgICAgICogb2YgYSBgY29sbGVjdGlvbmAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBzZWFyY2guXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyXHJcbiAgICAgICAgICogIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG9cclxuICAgICAgICAgKiAgY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUga2V5IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IHtcclxuICAgICAgICAgKiAgICdiYXJuZXknOiB7ICAnYWdlJzogMzYsICdibG9ja2VkJzogdHJ1ZSB9LFxyXG4gICAgICAgICAqICAgJ2ZyZWQnOiB7ICAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxyXG4gICAgICAgICAqICAgJ3BlYmJsZXMnOiB7ICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiB0cnVlIH1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5maW5kTGFzdEtleShjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gcmV0dXJucyBgcGViYmxlc2AsIGFzc3VtaW5nIGBfLmZpbmRLZXlgIHJldHVybnMgYGJhcm5leWBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZmluZExhc3RLZXkoY2hhcmFjdGVycywgeyAnYWdlJzogNDAgfSk7XHJcbiAgICAgICAgICogLy8gPT4gJ2ZyZWQnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbmRMYXN0S2V5KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ3BlYmJsZXMnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRMYXN0S2V5KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICBmb3JPd25SaWdodChvYmplY3QsIGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwga2V5LCBvYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJdGVyYXRlcyBvdmVyIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QsXHJcbiAgICAgICAgICogZXhlY3V0aW5nIHRoZSBjYWxsYmFjayBmb3IgZWFjaCBwcm9wZXJ0eS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxyXG4gICAgICAgICAqIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGtleSwgb2JqZWN0KS4gQ2FsbGJhY2tzIG1heSBleGl0XHJcbiAgICAgICAgICogaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmdW5jdGlvbiBTaGFwZSgpIHtcclxuICAgICAgICAgKiAgIHRoaXMueCA9IDA7XHJcbiAgICAgICAgICogICB0aGlzLnkgPSAwO1xyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFNoYXBlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgICAgICAqICAgdGhpcy54ICs9IHg7XHJcbiAgICAgICAgICogICB0aGlzLnkgKz0geTtcclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5mb3JJbihuZXcgU2hhcGUsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyAneCcsICd5JywgYW5kICdtb3ZlJyAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgZm9ySW4gPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IGNvbGxlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpdGVyYWJsZTtcclxuICAgICAgICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKCFvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICBmb3IgKGluZGV4IGluIGl0ZXJhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soaXRlcmFibGVbaW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbikgPT09IGZhbHNlKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZvckluYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXHJcbiAgICAgICAgICogb2YgYSBgY29sbGVjdGlvbmAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGZ1bmN0aW9uIFNoYXBlKCkge1xyXG4gICAgICAgICAqICAgdGhpcy54ID0gMDtcclxuICAgICAgICAgKiAgIHRoaXMueSA9IDA7XHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogU2hhcGUucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICAgICAgICogICB0aGlzLnggKz0geDtcclxuICAgICAgICAgKiAgIHRoaXMueSArPSB5O1xyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZvckluUmlnaHQobmV3IFNoYXBlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IGxvZ3MgJ21vdmUnLCAneScsIGFuZCAneCcgYXNzdW1pbmcgYF8uZm9ySW4gYCBsb2dzICd4JywgJ3knLCBhbmQgJ21vdmUnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZvckluUmlnaHQob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgcGFpcnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHBhaXJzLmxlbmd0aDtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhwYWlyc1tsZW5ndGgtLV0sIHBhaXJzW2xlbmd0aF0sIG9iamVjdCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEl0ZXJhdGVzIG92ZXIgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QsIGV4ZWN1dGluZyB0aGUgY2FsbGJhY2tcclxuICAgICAgICAgKiBmb3IgZWFjaCBwcm9wZXJ0eS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXHJcbiAgICAgICAgICogYXJndW1lbnRzOyAodmFsdWUsIGtleSwgb2JqZWN0KS4gQ2FsbGJhY2tzIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieVxyXG4gICAgICAgICAqIGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZvck93bih7ICcwJzogJ3plcm8nLCAnMSc6ICdvbmUnLCAnbGVuZ3RoJzogMiB9LCBmdW5jdGlvbihudW0sIGtleSkge1xyXG4gICAgICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBsb2dzICcwJywgJzEnLCBhbmQgJ2xlbmd0aCcgKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGZvck93biA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXgsIGl0ZXJhYmxlID0gY29sbGVjdGlvbixcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGl0ZXJhYmxlO1xyXG4gICAgICAgICAgICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICBpZiAoIW9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXNBcmcgPT0gJ3VuZGVmaW5lZCcgPyBjYWxsYmFjayA6IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIHZhciBvd25JbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgb3duUHJvcHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdICYmIGtleXMoaXRlcmFibGUpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gb3duUHJvcHMgPyBvd25Qcm9wcy5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsrb3duSW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gb3duUHJvcHNbb3duSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JPd25gIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcclxuICAgICAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBpbiB0aGUgb3Bwb3NpdGUgb3JkZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5mb3JPd25SaWdodCh7ICcwJzogJ3plcm8nLCAnMSc6ICdvbmUnLCAnbGVuZ3RoJzogMiB9LCBmdW5jdGlvbihudW0sIGtleSkge1xyXG4gICAgICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBsb2dzICdsZW5ndGgnLCAnMScsIGFuZCAnMCcgYXNzdW1pbmcgYF8uZm9yT3duYCBsb2dzICcwJywgJzEnLCBhbmQgJ2xlbmd0aCdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZm9yT3duUmlnaHQob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBrZXlzKG9iamVjdCksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHByb3BzW2xlbmd0aF07XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sob2JqZWN0W2tleV0sIGtleSwgb2JqZWN0KSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIHNvcnRlZCBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyBvZiBhbGwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLFxyXG4gICAgICAgICAqIG93biBhbmQgaW5oZXJpdGVkLCBvZiBgb2JqZWN0YCB0aGF0IGhhdmUgZnVuY3Rpb24gdmFsdWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIG1ldGhvZHNcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyB0aGF0IGhhdmUgZnVuY3Rpb24gdmFsdWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZ1bmN0aW9ucyhfKTtcclxuICAgICAgICAgKiAvLyA9PiBbJ2FsbCcsICdhbnknLCAnYmluZCcsICdiaW5kQWxsJywgJ2Nsb25lJywgJ2NvbXBhY3QnLCAnY29tcG9zZScsIC4uLl1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZnVuY3Rpb25zKG9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnNvcnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiB0aGUgc3BlY2lmaWVkIHByb3BlcnR5IG5hbWUgZXhpc3RzIGFzIGEgZGlyZWN0IHByb3BlcnR5IG9mIGBvYmplY3RgLFxyXG4gICAgICAgICAqIGluc3RlYWQgb2YgYW4gaW5oZXJpdGVkIHByb3BlcnR5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYga2V5IGlzIGEgZGlyZWN0IHByb3BlcnR5LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaGFzKHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9LCAnYicpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzKG9iamVjdCwga2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmplY3QgPyBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlIGludmVydGVkIGtleXMgYW5kIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW52ZXJ0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNyZWF0ZWQgaW52ZXJ0ZWQgb2JqZWN0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmludmVydCh7ICdmaXJzdCc6ICdmcmVkJywgJ3NlY29uZCc6ICdiYXJuZXknIH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2ZyZWQnOiAnZmlyc3QnLCAnYmFybmV5JzogJ3NlY29uZCcgfVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbnZlcnQob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W29iamVjdFtrZXldXSA9IGtleTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBib29sZWFuIHZhbHVlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBib29sZWFuIHZhbHVlLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNCb29sZWFuKG51bGwpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09IGZhbHNlIHx8XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYm9vbENsYXNzIHx8IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBkYXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBkYXRlLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNEYXRlKG5ldyBEYXRlKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IGRhdGVDbGFzcyB8fCBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgRE9NIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNFbGVtZW50KGRvY3VtZW50LmJvZHkpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNFbGVtZW50KHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gMSB8fCBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGVtcHR5LiBBcnJheXMsIHN0cmluZ3MsIG9yIGBhcmd1bWVudHNgIG9iamVjdHMgd2l0aCBhXHJcbiAgICAgICAgICogbGVuZ3RoIG9mIGAwYCBhbmQgb2JqZWN0cyB3aXRoIG5vIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgYXJlIGNvbnNpZGVyZWRcclxuICAgICAgICAgKiBcImVtcHR5XCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGVtcHR5LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNFbXB0eShbMSwgMiwgM10pO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRW1wdHkoe30pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNFbXB0eSgnJyk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKHZhbHVlKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGlmICgoY2xhc3NOYW1lID09IGFycmF5Q2xhc3MgfHwgY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzIHx8IGNsYXNzTmFtZSA9PSBhcmdzQ2xhc3MpIHx8XHJcbiAgICAgICAgICAgICAgICAoY2xhc3NOYW1lID09IG9iamVjdENsYXNzICYmIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgaXNGdW5jdGlvbih2YWx1ZS5zcGxpY2UpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFsZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yT3duKHZhbHVlLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXHJcbiAgICAgICAgICogZXF1aXZhbGVudCB0byBlYWNoIG90aGVyLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWRcclxuICAgICAgICAgKiB0byBjb21wYXJlIHZhbHVlcy4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYHVuZGVmaW5lZGAgY29tcGFyaXNvbnMgd2lsbFxyXG4gICAgICAgICAqIGJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxyXG4gICAgICAgICAqIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnRzOyAoYSwgYikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gYSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IGIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcclxuICAgICAgICAgKiB2YXIgY29weSA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIG9iamVjdCA9PSBjb3B5O1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRXF1YWwob2JqZWN0LCBjb3B5KTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgd29yZHMgPSBbJ2hlbGxvJywgJ2dvb2RieWUnXTtcclxuICAgICAgICAgKiB2YXIgb3RoZXJXb3JkcyA9IFsnaGknLCAnZ29vZGJ5ZSddO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0VxdWFsKHdvcmRzLCBvdGhlcldvcmRzLCBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICogICB2YXIgcmVHcmVldCA9IC9eKD86aGVsbG98aGkpJC9pLFxyXG4gICAgICAgICAqICAgICAgIGFHcmVldCA9IF8uaXNTdHJpbmcoYSkgJiYgcmVHcmVldC50ZXN0KGEpLFxyXG4gICAgICAgICAqICAgICAgIGJHcmVldCA9IF8uaXNTdHJpbmcoYikgJiYgcmVHcmVldC50ZXN0KGIpO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogICByZXR1cm4gKGFHcmVldCB8fCBiR3JlZXQpID8gKGFHcmVldCA9PSBiR3JlZXQpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNFcXVhbChhLCBiLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICByZXR1cm4gYmFzZUlzRXF1YWwoYSwgYiwgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicgJiYgYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAyKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcywgb3IgY2FuIGJlIGNvZXJjZWQgdG8sIGEgZmluaXRlIG51bWJlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IFRoaXMgaXMgbm90IHRoZSBzYW1lIGFzIG5hdGl2ZSBgaXNGaW5pdGVgIHdoaWNoIHdpbGwgcmV0dXJuIHRydWUgZm9yXHJcbiAgICAgICAgICogYm9vbGVhbnMgYW5kIGVtcHR5IHN0cmluZ3MuIFNlZSBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEuMi41LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgZmluaXRlLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNGaW5pdGUoLTEwMSk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0Zpbml0ZSgnMTAnKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRmluaXRlKHRydWUpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRmluaXRlKCcnKTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0Zpbml0ZShJbmZpbml0eSk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNGaW5pdGUodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUlzRmluaXRlKHZhbHVlKSAmJiAhbmF0aXZlSXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0Z1bmN0aW9uKF8pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgbGFuZ3VhZ2UgdHlwZSBvZiBPYmplY3QuXHJcbiAgICAgICAgICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc09iamVjdCh7fSk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc09iamVjdChbMSwgMiwgM10pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNPYmplY3QoMSk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHZhbHVlIGlzIHRoZSBFQ01BU2NyaXB0IGxhbmd1YWdlIHR5cGUgb2YgT2JqZWN0XHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4OFxyXG4gICAgICAgICAgICAvLyBhbmQgYXZvaWQgYSBWOCBidWdcclxuICAgICAgICAgICAgLy8gaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MVxyXG4gICAgICAgICAgICByZXR1cm4gISEodmFsdWUgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIHZhbHVlXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgTmFOYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IFRoaXMgaXMgbm90IHRoZSBzYW1lIGFzIG5hdGl2ZSBgaXNOYU5gIHdoaWNoIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3JcclxuICAgICAgICAgKiBgdW5kZWZpbmVkYCBhbmQgb3RoZXIgbm9uLW51bWVyaWMgdmFsdWVzLiBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4xLjIuNC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGBOYU5gLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNOYU4oTmFOKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzTmFOKG5ldyBOdW1iZXIoTmFOKSk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogaXNOYU4odW5kZWZpbmVkKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzTmFOKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNOYU4odmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gYE5hTmAgYXMgYSBwcmltaXRpdmUgaXMgdGhlIG9ubHkgdmFsdWUgdGhhdCBpcyBub3QgZXF1YWwgdG8gaXRzZWxmXHJcbiAgICAgICAgICAgIC8vIChwZXJmb3JtIHRoZSBbW0NsYXNzXV0gY2hlY2sgZmlyc3QgdG8gYXZvaWQgZXJyb3JzIHdpdGggc29tZSBob3N0IG9iamVjdHMgaW4gSUUpXHJcbiAgICAgICAgICAgIHJldHVybiBpc051bWJlcih2YWx1ZSkgJiYgdmFsdWUgIT0gK3ZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYG51bGxgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYG51bGxgLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNOdWxsKG51bGwpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNOdWxsKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNOdWxsKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbnVtYmVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogYE5hTmAgaXMgY29uc2lkZXJlZCBhIG51bWJlci4gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4OC41LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBudW1iZXIsIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc051bWJlcig4LjQgKiA1KTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHxcclxuICAgICAgICAgICAgICAgIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBudW1iZXJDbGFzcyB8fCBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZSBgT2JqZWN0YCBjb25zdHJ1Y3Rvci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XHJcbiAgICAgICAgICogICB0aGlzLnggPSAwO1xyXG4gICAgICAgICAqICAgdGhpcy55ID0gMDtcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzUGxhaW5PYmplY3QobmV3IFNoYXBlKTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc1BsYWluT2JqZWN0KFsxLCAyLCAzXSk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNQbGFpbk9iamVjdCh7ICd4JzogMCwgJ3knOiAwIH0pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgaXNQbGFpbk9iamVjdCA9ICFnZXRQcm90b3R5cGVPZiA/IHNoaW1Jc1BsYWluT2JqZWN0IDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICghKHZhbHVlICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IG9iamVjdENsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZU9mID0gdmFsdWUudmFsdWVPZixcclxuICAgICAgICAgICAgICAgIG9ialByb3RvID0gaXNOYXRpdmUodmFsdWVPZikgJiYgKG9ialByb3RvID0gZ2V0UHJvdG90eXBlT2YodmFsdWVPZikpICYmIGdldFByb3RvdHlwZU9mKG9ialByb3RvKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvYmpQcm90byA/ICh2YWx1ZSA9PSBvYmpQcm90byB8fCBnZXRQcm90b3R5cGVPZih2YWx1ZSkgPT0gb2JqUHJvdG8pIDogc2hpbUlzUGxhaW5PYmplY3QodmFsdWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24sIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc1JlZ0V4cCgvZnJlZC8pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNSZWdFeHAodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSByZWdleHBDbGFzcyB8fCBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgc3RyaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBzdHJpbmcsIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc1N0cmluZygnZnJlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICAgICAgICAgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN0cmluZ0NsYXNzIHx8IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYHVuZGVmaW5lZGAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBgdW5kZWZpbmVkYCwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzVW5kZWZpbmVkKHZvaWQgMCk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlzIGFzIGBvYmplY3RgIGFuZCB2YWx1ZXMgZ2VuZXJhdGVkIGJ5XHJcbiAgICAgICAgICogcnVubmluZyBlYWNoIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG9mIGBvYmplY3RgIHRocm91Z2ggdGhlIGNhbGxiYWNrLlxyXG4gICAgICAgICAqIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XHJcbiAgICAgICAgICogKHZhbHVlLCBrZXksIG9iamVjdCkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCB2YWx1ZXMgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBgY2FsbGJhY2tgIGV4ZWN1dGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5tYXBWYWx1ZXMoeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzfSAsIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICogMzsgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiwgJ2MnOiA5IH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0ge1xyXG4gICAgICAgICAqICAgJ2ZyZWQnOiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSxcclxuICAgICAgICAgKiAgICdwZWJibGVzJzogeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLm1hcFZhbHVlcyhjaGFyYWN0ZXJzLCAnYWdlJyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnZnJlZCc6IDQwLCAncGViYmxlcyc6IDEgfVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBtYXBWYWx1ZXMob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuXHJcbiAgICAgICAgICAgIGZvck93bihvYmplY3QsIGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gY2FsbGJhY2sodmFsdWUsIGtleSwgb2JqZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWN1cnNpdmVseSBtZXJnZXMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiB0aGUgc291cmNlIG9iamVjdChzKSwgdGhhdFxyXG4gICAgICAgICAqIGRvbid0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAgaW50byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LiBTdWJzZXF1ZW50IHNvdXJjZXNcclxuICAgICAgICAgKiB3aWxsIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyBzb3VyY2VzLiBJZiBhIGNhbGxiYWNrIGlzXHJcbiAgICAgICAgICogcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCB0byBwcm9kdWNlIHRoZSBtZXJnZWQgdmFsdWVzIG9mIHRoZSBkZXN0aW5hdGlvblxyXG4gICAgICAgICAqIGFuZCBzb3VyY2UgcHJvcGVydGllcy4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYHVuZGVmaW5lZGAgbWVyZ2luZyB3aWxsXHJcbiAgICAgICAgICogYmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXHJcbiAgICAgICAgICogaW52b2tlZCB3aXRoIHR3byBhcmd1bWVudHM7IChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2luZyBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIG5hbWVzID0ge1xyXG4gICAgICAgICAqICAgJ2NoYXJhY3RlcnMnOiBbXHJcbiAgICAgICAgICogICAgIHsgJ25hbWUnOiAnYmFybmV5JyB9LFxyXG4gICAgICAgICAqICAgICB7ICduYW1lJzogJ2ZyZWQnIH1cclxuICAgICAgICAgKiAgIF1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGFnZXMgPSB7XHJcbiAgICAgICAgICogICAnY2hhcmFjdGVycyc6IFtcclxuICAgICAgICAgKiAgICAgeyAnYWdlJzogMzYgfSxcclxuICAgICAgICAgKiAgICAgeyAnYWdlJzogNDAgfVxyXG4gICAgICAgICAqICAgXVxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm1lcmdlKG5hbWVzLCBhZ2VzKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICdjaGFyYWN0ZXJzJzogW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sIHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9XSB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZm9vZCA9IHtcclxuICAgICAgICAgKiAgICdmcnVpdHMnOiBbJ2FwcGxlJ10sXHJcbiAgICAgICAgICogICAndmVnZXRhYmxlcyc6IFsnYmVldCddXHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBvdGhlckZvb2QgPSB7XHJcbiAgICAgICAgICogICAnZnJ1aXRzJzogWydiYW5hbmEnXSxcclxuICAgICAgICAgKiAgICd2ZWdldGFibGVzJzogWydjYXJyb3QnXVxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm1lcmdlKGZvb2QsIG90aGVyRm9vZCwgZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAqICAgcmV0dXJuIF8uaXNBcnJheShhKSA/IGEuY29uY2F0KGIpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2ZydWl0cyc6IFsnYXBwbGUnLCAnYmFuYW5hJ10sICd2ZWdldGFibGVzJzogWydiZWV0JywgJ2NhcnJvdF0gfVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBtZXJnZShvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSAyO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFsbG93cyB3b3JraW5nIHdpdGggYF8ucmVkdWNlYCBhbmQgYF8ucmVkdWNlUmlnaHRgIHdpdGhvdXQgdXNpbmdcclxuICAgICAgICAgICAgLy8gdGhlaXIgYGluZGV4YCBhbmQgYGNvbGxlY3Rpb25gIGFyZ3VtZW50c1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMl0gIT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsZW5ndGggPiAzICYmIHR5cGVvZiBhcmdzW2xlbmd0aCAtIDJdID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhhcmdzWy0tbGVuZ3RoIC0gMV0sIGFyZ3NbbGVuZ3RoLS1dLCAyKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAyICYmIHR5cGVvZiBhcmdzW2xlbmd0aCAtIDFdID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXJnc1stLWxlbmd0aF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNvdXJjZXMgPSBzbGljZShhcmd1bWVudHMsIDEsIGxlbmd0aCksXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgc3RhY2tBID0gZ2V0QXJyYXkoKSxcclxuICAgICAgICAgICAgICAgIHN0YWNrQiA9IGdldEFycmF5KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZU1lcmdlKG9iamVjdCwgc291cmNlc1tpbmRleF0sIGNhbGxiYWNrLCBzdGFja0EsIHN0YWNrQik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQSk7XHJcbiAgICAgICAgICAgIHJlbGVhc2VBcnJheShzdGFja0IpO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIHNoYWxsb3cgY2xvbmUgb2YgYG9iamVjdGAgZXhjbHVkaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgKiBQcm9wZXJ0eSBuYW1lcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5cyBvZlxyXG4gICAgICAgICAqIHByb3BlcnR5IG5hbWVzLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2hcclxuICAgICAgICAgKiBwcm9wZXJ0eSBvZiBgb2JqZWN0YCBvbWl0dGluZyB0aGUgcHJvcGVydGllcyB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleVxyXG4gICAgICAgICAqIGZvci4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcclxuICAgICAgICAgKiAodmFsdWUsIGtleSwgb2JqZWN0KS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufC4uLnN0cmluZ3xzdHJpbmdbXX0gW2NhbGxiYWNrXSBUaGUgcHJvcGVydGllcyB0byBvbWl0IG9yIHRoZVxyXG4gICAgICAgICAqICBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCB3aXRob3V0IHRoZSBvbWl0dGVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ub21pdCh7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSwgJ2FnZScpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcgfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5vbWl0KHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9LCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJztcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb21pdChvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHByb3BzID0gYmFzZURpZmZlcmVuY2UocHJvcHMsIGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgZmFsc2UsIDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqZWN0W2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIHR3byBkaW1lbnNpb25hbCBhcnJheSBvZiBhbiBvYmplY3QncyBrZXktdmFsdWUgcGFpcnMsXHJcbiAgICAgICAgICogaS5lLiBgW1trZXkxLCB2YWx1ZTFdLCBba2V5MiwgdmFsdWUyXV1gLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgbmV3IGFycmF5IG9mIGtleS12YWx1ZSBwYWlycy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5wYWlycyh7ICdiYXJuZXknOiAzNiwgJ2ZyZWQnOiA0MCB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDQwXV0gKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHBhaXJzKG9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIHByb3BzID0ga2V5cyhvYmplY3QpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IFtrZXksIG9iamVjdFtrZXldXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIHNoYWxsb3cgY2xvbmUgb2YgYG9iamVjdGAgY29tcG9zZWQgb2YgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIFByb3BlcnR5IG5hbWVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzIG9mXHJcbiAgICAgICAgICogcHJvcGVydHkgbmFtZXMuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCBmb3IgZWFjaFxyXG4gICAgICAgICAqIHByb3BlcnR5IG9mIGBvYmplY3RgIHBpY2tpbmcgdGhlIHByb3BlcnRpZXMgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXlcclxuICAgICAgICAgKiBmb3IuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XHJcbiAgICAgICAgICogKHZhbHVlLCBrZXksIG9iamVjdCkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnwuLi5zdHJpbmd8c3RyaW5nW119IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXJcclxuICAgICAgICAgKiAgaXRlcmF0aW9uIG9yIHByb3BlcnR5IG5hbWVzIHRvIHBpY2ssIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIHByb3BlcnR5XHJcbiAgICAgICAgICogIG5hbWVzIG9yIGFycmF5cyBvZiBwcm9wZXJ0eSBuYW1lcy5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgcGlja2VkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucGljayh7ICduYW1lJzogJ2ZyZWQnLCAnX3VzZXJpZCc6ICdmcmVkMScgfSwgJ25hbWUnKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucGljayh7ICduYW1lJzogJ2ZyZWQnLCAnX3VzZXJpZCc6ICdmcmVkMScgfSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIGtleS5jaGFyQXQoMCkgIT0gJ18nO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcgfVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBwaWNrKG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzID0gYmFzZUZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCBmYWxzZSwgMSksXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gaXNPYmplY3Qob2JqZWN0KSA/IHByb3BzLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqZWN0W2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICAgICAgZm9ySW4ob2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSwgb2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYWx0ZXJuYXRpdmUgdG8gYF8ucmVkdWNlYCB0aGlzIG1ldGhvZCB0cmFuc2Zvcm1zIGBvYmplY3RgIHRvIGEgbmV3XHJcbiAgICAgICAgICogYGFjY3VtdWxhdG9yYCBvYmplY3Qgd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGVhY2ggb2YgaXRzIG93blxyXG4gICAgICAgICAqIGVudW1lcmFibGUgcHJvcGVydGllcyB0aHJvdWdoIGEgY2FsbGJhY2ssIHdpdGggZWFjaCBjYWxsYmFjayBleGVjdXRpb25cclxuICAgICAgICAgKiBwb3RlbnRpYWxseSBtdXRhdGluZyB0aGUgYGFjY3VtdWxhdG9yYCBvYmplY3QuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0b1xyXG4gICAgICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIGZvdXIgYXJndW1lbnRzOyAoYWNjdW11bGF0b3IsIHZhbHVlLCBrZXksIG9iamVjdCkuXHJcbiAgICAgICAgICogQ2FsbGJhY2tzIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgY3VzdG9tIGFjY3VtdWxhdG9yIHZhbHVlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIHNxdWFyZXMgPSBfLnRyYW5zZm9ybShbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdLCBmdW5jdGlvbihyZXN1bHQsIG51bSkge1xyXG4gICAgICAgICAqICAgbnVtICo9IG51bTtcclxuICAgICAgICAgKiAgIGlmIChudW0gJSAyKSB7XHJcbiAgICAgICAgICogICAgIHJldHVybiByZXN1bHQucHVzaChudW0pIDwgMztcclxuICAgICAgICAgKiAgIH1cclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgOSwgMjVdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgbWFwcGVkID0gXy50cmFuc2Zvcm0oeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH0sIGZ1bmN0aW9uKHJlc3VsdCwgbnVtLCBrZXkpIHtcclxuICAgICAgICAgKiAgIHJlc3VsdFtrZXldID0gbnVtICogMztcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICdhJzogMywgJ2InOiA2LCAnYyc6IDkgfVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB0cmFuc2Zvcm0ob2JqZWN0LCBjYWxsYmFjaywgYWNjdW11bGF0b3IsIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGlzQXJyID0gaXNBcnJheShvYmplY3QpO1xyXG4gICAgICAgICAgICBpZiAoYWNjdW11bGF0b3IgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN0b3IgPSBvYmplY3QgJiYgb2JqZWN0LmNvbnN0cnVjdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90byA9IGN0b3IgJiYgY3Rvci5wcm90b3R5cGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gYmFzZUNyZWF0ZShwcm90byk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgNCk7XHJcbiAgICAgICAgICAgICAgICAoaXNBcnIgPyBmb3JFYWNoIDogZm9yT3duKShvYmplY3QsIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBvYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBjb21wb3NlZCBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgdmFsdWVzIG9mIGBvYmplY3RgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnZhbHVlcyh7ICdvbmUnOiAxLCAndHdvJzogMiwgJ3RocmVlJzogMyB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMiwgM10gKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHZhbHVlcyhvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBwcm9wcyA9IGtleXMob2JqZWN0KSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IG9iamVjdFtwcm9wc1tpbmRleF1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cyBmcm9tIHRoZSBzcGVjaWZpZWQgaW5kZXhlcywgb3Iga2V5cywgb2YgdGhlXHJcbiAgICAgICAgICogYGNvbGxlY3Rpb25gLiBJbmRleGVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzXHJcbiAgICAgICAgICogb2YgaW5kZXhlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi4obnVtYmVyfG51bWJlcltdfHN0cmluZ3xzdHJpbmdbXSl9IFtpbmRleF0gVGhlIGluZGV4ZXMgb2YgYGNvbGxlY3Rpb25gXHJcbiAgICAgICAgICogICB0byByZXRyaWV2ZSwgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgaW5kZXhlcyBvciBhcnJheXMgb2YgaW5kZXhlcy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgY29ycmVzcG9uZGluZyB0byB0aGVcclxuICAgICAgICAgKiAgcHJvdmlkZWQgaW5kZXhlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5hdChbJ2EnLCAnYicsICdjJywgJ2QnLCAnZSddLCBbMCwgMiwgNF0pO1xyXG4gICAgICAgICAqIC8vID0+IFsnYScsICdjJywgJ2UnXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5hdChbJ2ZyZWQnLCAnYmFybmV5JywgJ3BlYmJsZXMnXSwgMCwgMik7XHJcbiAgICAgICAgICogLy8gPT4gWydmcmVkJywgJ3BlYmJsZXMnXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhdChjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIHByb3BzID0gYmFzZUZsYXR0ZW4oYXJncywgdHJ1ZSwgZmFsc2UsIDEpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gKGFyZ3NbMl0gJiYgYXJnc1syXVthcmdzWzFdXSA9PT0gY29sbGVjdGlvbikgPyAxIDogcHJvcHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gY29sbGVjdGlvbltwcm9wc1tpbmRleF1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYSBnaXZlbiB2YWx1ZSBpcyBwcmVzZW50IGluIGEgY29sbGVjdGlvbiB1c2luZyBzdHJpY3QgZXF1YWxpdHlcclxuICAgICAgICAgKiBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuIElmIGBmcm9tSW5kZXhgIGlzIG5lZ2F0aXZlLCBpdCBpcyB1c2VkIGFzIHRoZVxyXG4gICAgICAgICAqIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgaW5jbHVkZVxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB0YXJnZXQgVGhlIHZhbHVlIHRvIGNoZWNrIGZvci5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdGFyZ2V0YCBlbGVtZW50IGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uY29udGFpbnMoWzEsIDIsIDNdLCAxKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmNvbnRhaW5zKFsxLCAyLCAzXSwgMSwgMik7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uY29udGFpbnMoeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH0sICdmcmVkJyk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5jb250YWlucygncGViYmxlcycsICdlYicpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY29udGFpbnMoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZnJvbUluZGV4ID0gKGZyb21JbmRleCA8IDAgPyBuYXRpdmVNYXgoMCwgbGVuZ3RoICsgZnJvbUluZGV4KSA6IGZyb21JbmRleCkgfHwgMDtcclxuICAgICAgICAgICAgaWYgKGlzQXJyYXkoY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGluZGV4T2YoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpID4gLTE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gKGlzU3RyaW5nKGNvbGxlY3Rpb24pID8gY29sbGVjdGlvbi5pbmRleE9mKHRhcmdldCwgZnJvbUluZGV4KSA6IGluZGV4T2YoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpKSA+IC0xO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgrK2luZGV4ID49IGZyb21JbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShyZXN1bHQgPSB2YWx1ZSA9PT0gdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXHJcbiAgICAgICAgICogZWFjaCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCB0aHJvdWdoIHRoZSBjYWxsYmFjay4gVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVcclxuICAgICAgICAgKiBvZiBlYWNoIGtleSBpcyB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBrZXkgd2FzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjay5cclxuICAgICAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xyXG4gICAgICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uY291bnRCeShbNC4zLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gTWF0aC5mbG9vcihudW0pOyB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICc0JzogMSwgJzYnOiAyIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uY291bnRCeShbNC4zLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gdGhpcy5mbG9vcihudW0pOyB9LCBNYXRoKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICc0JzogMSwgJzYnOiAyIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uY291bnRCeShbJ29uZScsICd0d28nLCAndGhyZWUnXSwgJ2xlbmd0aCcpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJzMnOiAyLCAnNSc6IDEgfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBjb3VudEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSA/IHJlc3VsdFtrZXldKysgOiByZXN1bHRba2V5XSA9IDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkgdmFsdWUgZm9yICoqYWxsKiogZWxlbWVudHMgb2ZcclxuICAgICAgICAgKiBhIGNvbGxlY3Rpb24uIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxyXG4gICAgICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgYWxsXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgcGFzc2VkIHRoZSBjYWxsYmFjayBjaGVjayxcclxuICAgICAgICAgKiAgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmV2ZXJ5KFt0cnVlLCAxLCBudWxsLCAneWVzJ10pO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZXZlcnkoY2hhcmFjdGVycywgJ2FnZScpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZXZlcnkoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXZlcnkoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdCA9ICEhY2FsbGJhY2soY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9ICEhY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyBhbiBhcnJheSBvZiBhbGwgZWxlbWVudHNcclxuICAgICAgICAgKiB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleSBmb3IuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXHJcbiAgICAgICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgc2VsZWN0XHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBlbGVtZW50cyB0aGF0IHBhc3NlZCB0aGUgY2FsbGJhY2sgY2hlY2suXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBldmVucyA9IF8uZmlsdGVyKFsxLCAyLCAzLCA0LCA1LCA2XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gJSAyID09IDA7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IFsyLCA0LCA2XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZmlsdGVyKGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbHRlcihjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmlsdGVyKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRoZSBmaXJzdCBlbGVtZW50IHRoYXRcclxuICAgICAgICAgKiB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleSBmb3IuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXHJcbiAgICAgICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgZGV0ZWN0LCBmaW5kV2hlcmVcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEsICAnYmxvY2tlZCc6IGZhbHNlIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5maW5kKGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikge1xyXG4gICAgICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCA0MDtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbmQoY2hhcmFjdGVycywgeyAnYWdlJzogMSB9KTtcclxuICAgICAgICAgKiAvLyA9PiAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEsICdibG9ja2VkJzogZmFsc2UgfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5maW5kKGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXHJcbiAgICAgICAgICogb2YgYSBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZpbmRMYXN0KFsxLCAyLCAzLCA0XSwgZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gbnVtICUgMiA9PSAxO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IDNcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZExhc3QoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICBmb3JFYWNoUmlnaHQoY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBhIGNvbGxlY3Rpb24sIGV4ZWN1dGluZyB0aGUgY2FsbGJhY2sgZm9yIGVhY2hcclxuICAgICAgICAgKiBlbGVtZW50LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xyXG4gICAgICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS4gQ2FsbGJhY2tzIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieVxyXG4gICAgICAgICAqIGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3RlOiBBcyB3aXRoIG90aGVyIFwiQ29sbGVjdGlvbnNcIiBtZXRob2RzLCBvYmplY3RzIHdpdGggYSBgbGVuZ3RoYCBwcm9wZXJ0eVxyXG4gICAgICAgICAqIGFyZSBpdGVyYXRlZCBsaWtlIGFycmF5cy4gVG8gYXZvaWQgdGhpcyBiZWhhdmlvciBgXy5mb3JJbmAgb3IgYF8uZm9yT3duYFxyXG4gICAgICAgICAqIG1heSBiZSB1c2VkIGZvciBvYmplY3QgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGVhY2hcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXyhbMSwgMiwgM10pLmZvckVhY2goZnVuY3Rpb24obnVtKSB7IGNvbnNvbGUubG9nKG51bSk7IH0pLmpvaW4oJywnKTtcclxuICAgICAgICAgKiAvLyA9PiBsb2dzIGVhY2ggbnVtYmVyIGFuZCByZXR1cm5zICcxLDIsMydcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZm9yRWFjaCh7ICdvbmUnOiAxLCAndHdvJzogMiwgJ3RocmVlJzogMyB9LCBmdW5jdGlvbihudW0pIHsgY29uc29sZS5sb2cobnVtKTsgfSk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyBlYWNoIG51bWJlciBhbmQgcmV0dXJucyB0aGUgb2JqZWN0IChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmb3JFYWNoKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXNBcmcgPT0gJ3VuZGVmaW5lZCcgPyBjYWxsYmFjayA6IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhjb2xsZWN0aW9uW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JFYWNoYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXHJcbiAgICAgICAgICogb2YgYSBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGVhY2hSaWdodFxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfKFsxLCAyLCAzXSkuZm9yRWFjaFJpZ2h0KGZ1bmN0aW9uKG51bSkgeyBjb25zb2xlLmxvZyhudW0pOyB9KS5qb2luKCcsJyk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyBlYWNoIG51bWJlciBmcm9tIHJpZ2h0IHRvIGxlZnQgYW5kIHJldHVybnMgJzMsMiwxJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmb3JFYWNoUmlnaHQoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXNBcmcgPT0gJ3VuZGVmaW5lZCcgPyBjYWxsYmFjayA6IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soY29sbGVjdGlvbltsZW5ndGhdLCBsZW5ndGgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSBrZXlzKGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gcHJvcHMgPyBwcm9wc1stLWxlbmd0aF0gOiAtLWxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soY29sbGVjdGlvbltrZXldLCBrZXksIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcclxuICAgICAgICAgKiBlYWNoIGVsZW1lbnQgb2YgYSBjb2xsZWN0aW9uIHRocm91Z2ggdGhlIGNhbGxiYWNrLiBUaGUgY29ycmVzcG9uZGluZyB2YWx1ZVxyXG4gICAgICAgICAqIG9mIGVhY2gga2V5IGlzIGFuIGFycmF5IG9mIHRoZSBlbGVtZW50cyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGUga2V5LlxyXG4gICAgICAgICAqIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XHJcbiAgICAgICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmdyb3VwQnkoWzQuMiwgNi4xLCA2LjRdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIE1hdGguZmxvb3IobnVtKTsgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnNCc6IFs0LjJdLCAnNic6IFs2LjEsIDYuNF0gfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5ncm91cEJ5KFs0LjIsIDYuMSwgNi40XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiB0aGlzLmZsb29yKG51bSk7IH0sIE1hdGgpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJzQnOiBbNC4yXSwgJzYnOiBbNi4xLCA2LjRdIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZ3JvdXBCeShbJ29uZScsICd0d28nLCAndGhyZWUnXSwgJ2xlbmd0aCcpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJzMnOiBbJ29uZScsICd0d28nXSwgJzUnOiBbJ3RocmVlJ10gfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBncm91cEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSA/IHJlc3VsdFtrZXldIDogcmVzdWx0W2tleV0gPSBbXSkucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xyXG4gICAgICAgICAqIGVhY2ggZWxlbWVudCBvZiB0aGUgY29sbGVjdGlvbiB0aHJvdWdoIHRoZSBnaXZlbiBjYWxsYmFjay4gVGhlIGNvcnJlc3BvbmRpbmdcclxuICAgICAgICAgKiB2YWx1ZSBvZiBlYWNoIGtleSBpcyB0aGUgbGFzdCBlbGVtZW50IHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIHRoZSBrZXkuXHJcbiAgICAgICAgICogVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcclxuICAgICAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIga2V5cyA9IFtcclxuICAgICAgICAgKiAgIHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LFxyXG4gICAgICAgICAqICAgeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmluZGV4Qnkoa2V5cywgJ2RpcicpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2xlZnQnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ3JpZ2h0JzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmluZGV4Qnkoa2V5cywgZnVuY3Rpb24oa2V5KSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleS5jb2RlKTsgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnYSc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAnZCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbmRleEJ5KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGtleSkgeyB0aGlzLmZyb21DaGFyQ29kZShrZXkuY29kZSk7IH0sIFN0cmluZyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnYSc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAnZCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBpbmRleEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEludm9rZXMgdGhlIG1ldGhvZCBuYW1lZCBieSBgbWV0aG9kTmFtZWAgb24gZWFjaCBlbGVtZW50IGluIHRoZSBgY29sbGVjdGlvbmBcclxuICAgICAgICAgKiByZXR1cm5pbmcgYW4gYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBpbnZva2VkIG1ldGhvZC4gQWRkaXRpb25hbCBhcmd1bWVudHNcclxuICAgICAgICAgKiB3aWxsIGJlIHByb3ZpZGVkIHRvIGVhY2ggaW52b2tlZCBtZXRob2QuIElmIGBtZXRob2ROYW1lYCBpcyBhIGZ1bmN0aW9uIGl0XHJcbiAgICAgICAgICogd2lsbCBiZSBpbnZva2VkIGZvciwgYW5kIGB0aGlzYCBib3VuZCB0bywgZWFjaCBlbGVtZW50IGluIHRoZSBgY29sbGVjdGlvbmAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBtZXRob2ROYW1lIFRoZSBuYW1lIG9mIHRoZSBtZXRob2QgdG8gaW52b2tlIG9yXHJcbiAgICAgICAgICogIHRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBpbnZva2VkIG1ldGhvZC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbnZva2UoW1s1LCAxLCA3XSwgWzMsIDIsIDFdXSwgJ3NvcnQnKTtcclxuICAgICAgICAgKiAvLyA9PiBbWzEsIDUsIDddLCBbMSwgMiwgM11dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmludm9rZShbMTIzLCA0NTZdLCBTdHJpbmcucHJvdG90eXBlLnNwbGl0LCAnJyk7XHJcbiAgICAgICAgICogLy8gPT4gW1snMScsICcyJywgJzMnXSwgWyc0JywgJzUnLCAnNiddXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbnZva2UoY29sbGVjdGlvbiwgbWV0aG9kTmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMiksXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgaXNGdW5jID0gdHlwZW9mIG1ldGhvZE5hbWUgPT0gJ2Z1bmN0aW9uJyxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBBcnJheSh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInID8gbGVuZ3RoIDogMCk7XHJcblxyXG4gICAgICAgICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0WysraW5kZXhdID0gKGlzRnVuYyA/IG1ldGhvZE5hbWUgOiB2YWx1ZVttZXRob2ROYW1lXSkuYXBwbHkodmFsdWUsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdmFsdWVzIGJ5IHJ1bm5pbmcgZWFjaCBlbGVtZW50IGluIHRoZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgICogdGhyb3VnaCB0aGUgY2FsbGJhY2suIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aFxyXG4gICAgICAgICAqIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgY29sbGVjdFxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBgY2FsbGJhY2tgIGV4ZWN1dGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5tYXAoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAqIDM7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IFszLCA2LCA5XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5tYXAoeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gKiAzOyB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMywgNiwgOV0gKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ubWFwKGNoYXJhY3RlcnMsICduYW1lJyk7XHJcbiAgICAgICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1hcChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGNhbGxiYWNrKGNvbGxlY3Rpb25baW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFsrK2luZGV4XSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHJpZXZlcyB0aGUgbWF4aW11bSB2YWx1ZSBvZiBhIGNvbGxlY3Rpb24uIElmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5IG9yXHJcbiAgICAgICAgICogZmFsc2V5IGAtSW5maW5pdHlgIGlzIHJldHVybmVkLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWRcclxuICAgICAgICAgKiBmb3IgZWFjaCB2YWx1ZSBpbiB0aGUgY29sbGVjdGlvbiB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoIHRoZSB2YWx1ZVxyXG4gICAgICAgICAqIGlzIHJhbmtlZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXHJcbiAgICAgICAgICogYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXhpbXVtIHZhbHVlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm1heChbNCwgMiwgOCwgNl0pO1xyXG4gICAgICAgICAqIC8vID0+IDhcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5tYXgoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7IHJldHVybiBjaHIuYWdlOyB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ubWF4KGNoYXJhY3RlcnMsICdhZ2UnKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfTtcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWF4KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wdXRlZCA9IC1JbmZpbml0eSxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNvbXB1dGVkO1xyXG5cclxuICAgICAgICAgICAgLy8gYWxsb3dzIHdvcmtpbmcgd2l0aCBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgIHdpdGhvdXQgdXNpbmdcclxuICAgICAgICAgICAgLy8gdGhlaXIgYGluZGV4YCBhcmd1bWVudCBhcyBhIGNhbGxiYWNrXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnICYmIHRoaXNBcmdbY2FsbGJhY2tdID09PSBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrID09IG51bGwgJiYgaXNBcnJheShjb2xsZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSAoY2FsbGJhY2sgPT0gbnVsbCAmJiBpc1N0cmluZyhjb2xsZWN0aW9uKSkgPyBjaGFyQXRDYWxsYmFjayA6IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ID4gY29tcHV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQgPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0cmlldmVzIHRoZSBtaW5pbXVtIHZhbHVlIG9mIGEgY29sbGVjdGlvbi4gSWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkgb3JcclxuICAgICAgICAgKiBmYWxzZXkgYEluZmluaXR5YCBpcyByZXR1cm5lZC4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkXHJcbiAgICAgICAgICogZm9yIGVhY2ggdmFsdWUgaW4gdGhlIGNvbGxlY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaCB0aGUgdmFsdWVcclxuICAgICAgICAgKiBpcyByYW5rZWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxyXG4gICAgICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5taW4oWzQsIDIsIDgsIDZdKTtcclxuICAgICAgICAgKiAvLyA9PiAyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubWluKGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikgeyByZXR1cm4gY2hyLmFnZTsgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ubWluKGNoYXJhY3RlcnMsICdhZ2UnKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9O1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBtaW4oY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGNvbXB1dGVkID0gSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjb21wdXRlZDtcclxuXHJcbiAgICAgICAgICAgIC8vIGFsbG93cyB3b3JraW5nIHdpdGggZnVuY3Rpb25zIGxpa2UgYF8ubWFwYCB3aXRob3V0IHVzaW5nXHJcbiAgICAgICAgICAgIC8vIHRoZWlyIGBpbmRleGAgYXJndW1lbnQgYXMgYSBjYWxsYmFja1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicgJiYgdGhpc0FyZyAmJiB0aGlzQXJnW2NhbGxiYWNrXSA9PT0gY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsICYmIGlzQXJyYXkoY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gKGNhbGxiYWNrID09IG51bGwgJiYgaXNTdHJpbmcoY29sbGVjdGlvbikpID8gY2hhckF0Q2FsbGJhY2sgOiBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA8IGNvbXB1dGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkID0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHJpZXZlcyB0aGUgdmFsdWUgb2YgYSBzcGVjaWZpZWQgcHJvcGVydHkgZnJvbSBhbGwgZWxlbWVudHMgaW4gdGhlIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBwbHVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucGx1Y2soY2hhcmFjdGVycywgJ25hbWUnKTtcclxuICAgICAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgcGx1Y2sgPSBtYXA7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZHVjZXMgYSBjb2xsZWN0aW9uIHRvIGEgdmFsdWUgd2hpY2ggaXMgdGhlIGFjY3VtdWxhdGVkIHJlc3VsdCBvZiBydW5uaW5nXHJcbiAgICAgICAgICogZWFjaCBlbGVtZW50IGluIHRoZSBjb2xsZWN0aW9uIHRocm91Z2ggdGhlIGNhbGxiYWNrLCB3aGVyZSBlYWNoIHN1Y2Nlc3NpdmVcclxuICAgICAgICAgKiBjYWxsYmFjayBleGVjdXRpb24gY29uc3VtZXMgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJldmlvdXMgZXhlY3V0aW9uLiBJZlxyXG4gICAgICAgICAqIGBhY2N1bXVsYXRvcmAgaXMgbm90IHByb3ZpZGVkIHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uIHdpbGwgYmVcclxuICAgICAgICAgKiB1c2VkIGFzIHRoZSBpbml0aWFsIGBhY2N1bXVsYXRvcmAgdmFsdWUuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2BcclxuICAgICAgICAgKiBhbmQgaW52b2tlZCB3aXRoIGZvdXIgYXJndW1lbnRzOyAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGZvbGRsLCBpbmplY3RcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBJbml0aWFsIHZhbHVlIG9mIHRoZSBhY2N1bXVsYXRvci5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBzdW0gPSBfLnJlZHVjZShbMSwgMiwgM10sIGZ1bmN0aW9uKHN1bSwgbnVtKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gc3VtICsgbnVtO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IDZcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBtYXBwZWQgPSBfLnJlZHVjZSh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfSwgZnVuY3Rpb24ocmVzdWx0LCBudW0sIGtleSkge1xyXG4gICAgICAgICAqICAgcmVzdWx0W2tleV0gPSBudW0gKiAzO1xyXG4gICAgICAgICAqICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgKiB9LCB7fSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiwgJ2MnOiA5IH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVkdWNlKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCBhY2N1bXVsYXRvciwgdGhpc0FyZykge1xyXG4gICAgICAgICAgICBpZiAoIWNvbGxlY3Rpb24pIHJldHVybiBhY2N1bXVsYXRvcjtcclxuICAgICAgICAgICAgdmFyIG5vYWNjdW0gPSBhcmd1bWVudHMubGVuZ3RoIDwgMztcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9hY2N1bSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gY29sbGVjdGlvblsrK2luZGV4XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBjYWxsYmFjayhhY2N1bXVsYXRvciwgY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBub2FjY3VtID8gKG5vYWNjdW0gPSBmYWxzZSwgdmFsdWUpIDogY2FsbGJhY2soYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ucmVkdWNlYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXHJcbiAgICAgICAgICogb2YgYSBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGZvbGRyXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gSW5pdGlhbCB2YWx1ZSBvZiB0aGUgYWNjdW11bGF0b3IuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgbGlzdCA9IFtbMCwgMV0sIFsyLCAzXSwgWzQsIDVdXTtcclxuICAgICAgICAgKiB2YXIgZmxhdCA9IF8ucmVkdWNlUmlnaHQobGlzdCwgZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS5jb25jYXQoYik7IH0sIFtdKTtcclxuICAgICAgICAgKiAvLyA9PiBbNCwgNSwgMiwgMywgMCwgMV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVkdWNlUmlnaHQoY29sbGVjdGlvbiwgY2FsbGJhY2ssIGFjY3VtdWxhdG9yLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBub2FjY3VtID0gYXJndW1lbnRzLmxlbmd0aCA8IDM7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCA0KTtcclxuICAgICAgICAgICAgZm9yRWFjaFJpZ2h0KGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gbm9hY2N1bSA/IChub2FjY3VtID0gZmFsc2UsIHZhbHVlKSA6IGNhbGxiYWNrKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLmZpbHRlcmAgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgYVxyXG4gICAgICAgICAqIGNvbGxlY3Rpb24gdGhhdCB0aGUgY2FsbGJhY2sgZG9lcyAqKm5vdCoqIHJldHVybiB0cnVleSBmb3IuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBmYWlsZWQgdGhlIGNhbGxiYWNrIGNoZWNrLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb2RkcyA9IF8ucmVqZWN0KFsxLCAyLCAzLCA0LCA1LCA2XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gJSAyID09IDA7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAzLCA1XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ucmVqZWN0KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH1dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnJlamVjdChjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcihjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIWNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0cmlldmVzIGEgcmFuZG9tIGVsZW1lbnQgb3IgYG5gIHJhbmRvbSBlbGVtZW50cyBmcm9tIGEgY29sbGVjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzYW1wbGUuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNhbXBsZS5cclxuICAgICAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gQWxsb3dzIHdvcmtpbmcgd2l0aCBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgXHJcbiAgICAgICAgICogIHdpdGhvdXQgdXNpbmcgdGhlaXIgYGluZGV4YCBhcmd1bWVudHMgYXMgYG5gLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcmFuZG9tIHNhbXBsZShzKSBvZiBgY29sbGVjdGlvbmAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc2FtcGxlKFsxLCAyLCAzLCA0XSk7XHJcbiAgICAgICAgICogLy8gPT4gMlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5zYW1wbGUoWzEsIDIsIDMsIDRdLCAyKTtcclxuICAgICAgICAgKiAvLyA9PiBbMywgMV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2FtcGxlKGNvbGxlY3Rpb24sIG4sIGd1YXJkKSB7XHJcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uICYmIHR5cGVvZiBjb2xsZWN0aW9uLmxlbmd0aCAhPSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbiA9IHZhbHVlcyhjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb25bYmFzZVJhbmRvbSgwLCBjb2xsZWN0aW9uLmxlbmd0aCAtIDEpXSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gc2h1ZmZsZShjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgcmVzdWx0Lmxlbmd0aCA9IG5hdGl2ZU1pbihuYXRpdmVNYXgoMCwgbiksIHJlc3VsdC5sZW5ndGgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBzaHVmZmxlZCB2YWx1ZXMsIHVzaW5nIGEgdmVyc2lvbiBvZiB0aGUgRmlzaGVyLVlhdGVzXHJcbiAgICAgICAgICogc2h1ZmZsZS4gU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVyLVlhdGVzX3NodWZmbGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2h1ZmZsZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgc2h1ZmZsZWQgY29sbGVjdGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5zaHVmZmxlKFsxLCAyLCAzLCA0LCA1LCA2XSk7XHJcbiAgICAgICAgICogLy8gPT4gWzQsIDEsIDYsIDMsIDUsIDJdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNodWZmbGUoY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBBcnJheSh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInID8gbGVuZ3RoIDogMCk7XHJcblxyXG4gICAgICAgICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJhbmQgPSBiYXNlUmFuZG9tKDAsICsraW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IHJlc3VsdFtyYW5kXTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtyYW5kXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIHNpemUgb2YgdGhlIGBjb2xsZWN0aW9uYCBieSByZXR1cm5pbmcgYGNvbGxlY3Rpb24ubGVuZ3RoYCBmb3IgYXJyYXlzXHJcbiAgICAgICAgICogYW5kIGFycmF5LWxpa2Ugb2JqZWN0cyBvciB0aGUgbnVtYmVyIG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZm9yIG9iamVjdHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaW5zcGVjdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGBjb2xsZWN0aW9uLmxlbmd0aGAgb3IgbnVtYmVyIG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc2l6ZShbMSwgMl0pO1xyXG4gICAgICAgICAqIC8vID0+IDJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc2l6ZSh7ICdvbmUnOiAxLCAndHdvJzogMiwgJ3RocmVlJzogMyB9KTtcclxuICAgICAgICAgKiAvLyA9PiAzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNpemUoJ3BlYmJsZXMnKTtcclxuICAgICAgICAgKiAvLyA9PiA3XHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNpemUoY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgPyBsZW5ndGggOiBrZXlzKGNvbGxlY3Rpb24pLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIHRydWV5IHZhbHVlIGZvciAqKmFueSoqIGVsZW1lbnQgb2YgYVxyXG4gICAgICAgICAqIGNvbGxlY3Rpb24uIFRoZSBmdW5jdGlvbiByZXR1cm5zIGFzIHNvb24gYXMgaXQgZmluZHMgYSBwYXNzaW5nIHZhbHVlIGFuZFxyXG4gICAgICAgICAqIGRvZXMgbm90IGl0ZXJhdGUgb3ZlciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0b1xyXG4gICAgICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgYW55XHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZWQgdGhlIGNhbGxiYWNrIGNoZWNrLFxyXG4gICAgICAgICAqICBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc29tZShbbnVsbCwgMCwgJ3llcycsIGZhbHNlXSwgQm9vbGVhbik7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uc29tZShjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uc29tZShjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAxIH0pO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNvbWUoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyZXN1bHQgPSBjYWxsYmFjayhjb2xsZWN0aW9uW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhKHJlc3VsdCA9IGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICEhcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cywgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlciBieSB0aGUgcmVzdWx0cyBvZlxyXG4gICAgICAgICAqIHJ1bm5pbmcgZWFjaCBlbGVtZW50IGluIGEgY29sbGVjdGlvbiB0aHJvdWdoIHRoZSBjYWxsYmFjay4gVGhpcyBtZXRob2RcclxuICAgICAgICAgKiBwZXJmb3JtcyBhIHN0YWJsZSBzb3J0LCB0aGF0IGlzLCBpdCB3aWxsIHByZXNlcnZlIHRoZSBvcmlnaW5hbCBzb3J0IG9yZGVyXHJcbiAgICAgICAgICogb2YgZXF1YWwgZWxlbWVudHMuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aFxyXG4gICAgICAgICAqIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNvbGxlY3Rpb25cclxuICAgICAgICAgKiB3aWxsIGJlIHNvcnRlZCBieSBlYWNoIHByb3BlcnR5IHZhbHVlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHNvcnRlZCBlbGVtZW50cy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5zb3J0QnkoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIE1hdGguc2luKG51bSk7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IFszLCAxLCAyXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5zb3J0QnkoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIHRoaXMuc2luKG51bSk7IH0sIE1hdGgpO1xyXG4gICAgICAgICAqIC8vID0+IFszLCAxLCAyXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMzYgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdhZ2UnOiA0MCB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDI2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogMzAgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLm1hcChfLnNvcnRCeShjaGFyYWN0ZXJzLCAnYWdlJyksIF8udmFsdWVzKTtcclxuICAgICAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAyNl0sIFsnZnJlZCcsIDMwXSwgWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDQwXV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHNvcnRpbmcgYnkgbXVsdGlwbGUgcHJvcGVydGllc1xyXG4gICAgICAgICAqIF8ubWFwKF8uc29ydEJ5KGNoYXJhY3RlcnMsIFsnbmFtZScsICdhZ2UnXSksIF8udmFsdWVzKTtcclxuICAgICAgICAgKiAvLyA9ID4gW1snYmFybmV5JywgMjZdLCBbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgMzBdLCBbJ2ZyZWQnLCA0MF1dXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNvcnRCeShjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGlzQXJyID0gaXNBcnJheShjYWxsYmFjayksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyA/IGxlbmd0aCA6IDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc0Fycikge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSByZXN1bHRbKytpbmRleF0gPSBnZXRPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0Fycikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jcml0ZXJpYSA9IG1hcChjYWxsYmFjaywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKG9iamVjdC5jcml0ZXJpYSA9IGdldEFycmF5KCkpWzBdID0gY2FsbGJhY2sodmFsdWUsIGtleSwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgICAgIG9iamVjdC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zb3J0KGNvbXBhcmVBc2NlbmRpbmcpO1xyXG4gICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSByZXN1bHRbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtsZW5ndGhdID0gb2JqZWN0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0Fycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbGVhc2VBcnJheShvYmplY3QuY3JpdGVyaWEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVsZWFzZU9iamVjdChvYmplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb252ZXJ0cyB0aGUgYGNvbGxlY3Rpb25gIHRvIGFuIGFycmF5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGNvbnZlcnQuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgY29udmVydGVkIGFycmF5LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAoZnVuY3Rpb24oKSB7IHJldHVybiBfLnRvQXJyYXkoYXJndW1lbnRzKS5zbGljZSgxKTsgfSkoMSwgMiwgMywgNCk7XHJcbiAgICAgICAgICogLy8gPT4gWzIsIDMsIDRdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRvQXJyYXkoY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbiAmJiB0eXBlb2YgY29sbGVjdGlvbi5sZW5ndGggPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzbGljZShjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzKGNvbGxlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gb2YgZWFjaCBlbGVtZW50IGluIGEgYGNvbGxlY3Rpb25gIHRvIHRoZSBnaXZlblxyXG4gICAgICAgICAqIGBwcm9wZXJ0aWVzYCBvYmplY3QsIHJldHVybmluZyBhbiBhcnJheSBvZiBhbGwgZWxlbWVudHMgdGhhdCBoYXZlIGVxdWl2YWxlbnRcclxuICAgICAgICAgKiBwcm9wZXJ0eSB2YWx1ZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIGZpbHRlciBieS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBnaXZlbiBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAncGV0cyc6IFsnaG9wcHknXSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdwZXRzJzogWydiYWJ5IHB1c3MnLCAnZGlubyddIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy53aGVyZShjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdwZXRzJzogWydob3BweSddIH1dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLndoZXJlKGNoYXJhY3RlcnMsIHsgJ3BldHMnOiBbJ2Rpbm8nXSB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwLCAncGV0cyc6IFsnYmFieSBwdXNzJywgJ2Rpbm8nXSB9XVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciB3aGVyZSA9IGZpbHRlcjtcclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgZmFsc2V5IHZhbHVlcyByZW1vdmVkLiBUaGUgdmFsdWVzIGBmYWxzZWAsIGBudWxsYCxcclxuICAgICAgICAgKiBgMGAsIGBcIlwiYCwgYHVuZGVmaW5lZGAsIGFuZCBgTmFOYCBhcmUgYWxsIGZhbHNleS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFjdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmNvbXBhY3QoWzAsIDEsIGZhbHNlLCAyLCAnJywgM10pO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyLCAzXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb21wYWN0KGFycmF5KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGV4Y2x1ZGluZyBhbGwgdmFsdWVzIG9mIHRoZSBwcm92aWRlZCBhcnJheXMgdXNpbmcgc3RyaWN0XHJcbiAgICAgICAgICogZXF1YWxpdHkgZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFt2YWx1ZXNdIFRoZSBhcnJheXMgb2YgdmFsdWVzIHRvIGV4Y2x1ZGUuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5kaWZmZXJlbmNlKFsxLCAyLCAzLCA0LCA1XSwgWzUsIDIsIDEwXSk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDMsIDRdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2UoYXJyYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VEaWZmZXJlbmNlKGFycmF5LCBiYXNlRmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUsIDEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0XHJcbiAgICAgICAgICogZWxlbWVudCB0aGF0IHBhc3NlcyB0aGUgY2FsbGJhY2sgY2hlY2ssIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEsICAnYmxvY2tlZCc6IGZhbHNlIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5maW5kSW5kZXgoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gY2hyLmFnZSA8IDIwO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IDJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZmluZEluZGV4KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xyXG4gICAgICAgICAqIC8vID0+IDBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZmluZEluZGV4KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XHJcbiAgICAgICAgICogLy8gPT4gMVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRJbmRleGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xyXG4gICAgICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgLTFgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiB0cnVlIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdibG9ja2VkJzogZmFsc2UgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiB0cnVlIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5maW5kTGFzdEluZGV4KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikge1xyXG4gICAgICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPiAzMDtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiAxXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbmRMYXN0SW5kZXgoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XHJcbiAgICAgICAgICogLy8gPT4gMFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5maW5kTGFzdEluZGV4KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XHJcbiAgICAgICAgICogLy8gPT4gMlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGFycmF5W2xlbmd0aF0sIGxlbmd0aCwgYXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBmaXJzdCBlbGVtZW50IG9yIGZpcnN0IGBuYCBlbGVtZW50cyBvZiBhbiBhcnJheS4gSWYgYSBjYWxsYmFja1xyXG4gICAgICAgICAqIGlzIHByb3ZpZGVkIGVsZW1lbnRzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5IGFyZSByZXR1cm5lZCBhcyBsb25nXHJcbiAgICAgICAgICogYXMgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXHJcbiAgICAgICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgaGVhZCwgdGFrZVxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8bnVtYmVyfHN0cmluZ30gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBlbGVtZW50IG9yIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gcmV0dXJuLiBJZiBhIHByb3BlcnR5IG5hbWUgb3JcclxuICAgICAgICAgKiAgb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIlxyXG4gICAgICAgICAqICBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50KHMpIG9mIGBhcnJheWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZmlyc3QoWzEsIDIsIDNdKTtcclxuICAgICAgICAgKiAvLyA9PiAxXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZpcnN0KFsxLCAyLCAzXSwgMik7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDJdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZpcnN0KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gbnVtIDwgMztcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMl1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2Jsb2NrZWQnOiBmYWxzZSwgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ25hJyB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZmlyc3QoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcclxuICAgICAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYmxvY2tlZCc6IHRydWUsICdlbXBsb3llcic6ICdzbGF0ZScgfV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ucGx1Y2soXy5maXJzdChjaGFyYWN0ZXJzLCB7ICdlbXBsb3llcic6ICdzbGF0ZScgfSksICduYW1lJyk7XHJcbiAgICAgICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpcnN0KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgbiA9IDAsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdudW1iZXInICYmIGNhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbiA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gPT0gbnVsbCB8fCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5ID8gYXJyYXlbMF0gOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNsaWNlKGFycmF5LCAwLCBuYXRpdmVNaW4obmF0aXZlTWF4KDAsIG4pLCBsZW5ndGgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZsYXR0ZW5zIGEgbmVzdGVkIGFycmF5ICh0aGUgbmVzdGluZyBjYW4gYmUgdG8gYW55IGRlcHRoKS4gSWYgYGlzU2hhbGxvd2BcclxuICAgICAgICAgKiBpcyB0cnVleSwgdGhlIGFycmF5IHdpbGwgb25seSBiZSBmbGF0dGVuZWQgYSBzaW5nbGUgbGV2ZWwuIElmIGEgY2FsbGJhY2tcclxuICAgICAgICAgKiBpcyBwcm92aWRlZCBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IGlzIHBhc3NlZCB0aHJvdWdoIHRoZSBjYWxsYmFjayBiZWZvcmVcclxuICAgICAgICAgKiBmbGF0dGVuaW5nLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcclxuICAgICAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmbGF0dGVuLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU2hhbGxvdz1mYWxzZV0gQSBmbGFnIHRvIHJlc3RyaWN0IGZsYXR0ZW5pbmcgdG8gYSBzaW5nbGUgbGV2ZWwuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgZmxhdHRlbmVkIGFycmF5LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZsYXR0ZW4oWzEsIFsyXSwgWzMsIFtbNF1dXV0pO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyLCAzLCA0XTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZmxhdHRlbihbMSwgWzJdLCBbMywgW1s0XV1dXSwgdHJ1ZSk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDIsIDMsIFtbNF1dXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzAsICdwZXRzJzogWydob3BweSddIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ3BldHMnOiBbJ2JhYnkgcHVzcycsICdkaW5vJ10gfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZsYXR0ZW4oY2hhcmFjdGVycywgJ3BldHMnKTtcclxuICAgICAgICAgKiAvLyA9PiBbJ2hvcHB5JywgJ2JhYnkgcHVzcycsICdkaW5vJ11cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmxhdHRlbihhcnJheSwgaXNTaGFsbG93LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICAvLyBqdWdnbGUgYXJndW1lbnRzXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNTaGFsbG93ICE9ICdib29sZWFuJyAmJiBpc1NoYWxsb3cgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpc0FyZyA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSAodHlwZW9mIGlzU2hhbGxvdyAhPSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgJiYgdGhpc0FyZ1tpc1NoYWxsb3ddID09PSBhcnJheSkgPyBudWxsIDogaXNTaGFsbG93O1xyXG4gICAgICAgICAgICAgICAgaXNTaGFsbG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFycmF5ID0gbWFwKGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VGbGF0dGVuKGFycmF5LCBpc1NoYWxsb3cpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYHZhbHVlYCBpcyBmb3VuZCB1c2luZ1xyXG4gICAgICAgICAqIHN0cmljdCBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuIElmIHRoZSBhcnJheSBpcyBhbHJlYWR5IHNvcnRlZFxyXG4gICAgICAgICAqIHByb3ZpZGluZyBgdHJ1ZWAgZm9yIGBmcm9tSW5kZXhgIHdpbGwgcnVuIGEgZmFzdGVyIGJpbmFyeSBzZWFyY2guXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tIG9yIGB0cnVlYFxyXG4gICAgICAgICAqICB0byBwZXJmb3JtIGEgYmluYXJ5IHNlYXJjaCBvbiBhIHNvcnRlZCBhcnJheS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSBvciBgLTFgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmluZGV4T2YoWzEsIDIsIDMsIDEsIDIsIDNdLCAyKTtcclxuICAgICAgICAgKiAvLyA9PiAxXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmluZGV4T2YoWzEsIDIsIDMsIDEsIDIsIDNdLCAyLCAzKTtcclxuICAgICAgICAgKiAvLyA9PiA0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmluZGV4T2YoWzEsIDEsIDIsIDIsIDMsIDNdLCAyLCB0cnVlKTtcclxuICAgICAgICAgKiAvLyA9PiAyXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XHJcbiAgICAgICAgICAgICAgICBmcm9tSW5kZXggPSAoZnJvbUluZGV4IDwgMCA/IG5hdGl2ZU1heCgwLCBsZW5ndGggKyBmcm9tSW5kZXgpIDogZnJvbUluZGV4IHx8IDApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZyb21JbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gc29ydGVkSW5kZXgoYXJyYXksIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheVtpbmRleF0gPT09IHZhbHVlID8gaW5kZXggOiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZUluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyBhbGwgYnV0IHRoZSBsYXN0IGVsZW1lbnQgb3IgbGFzdCBgbmAgZWxlbWVudHMgb2YgYW4gYXJyYXkuIElmIGFcclxuICAgICAgICAgKiBjYWxsYmFjayBpcyBwcm92aWRlZCBlbGVtZW50cyBhdCB0aGUgZW5kIG9mIHRoZSBhcnJheSBhcmUgZXhjbHVkZWQgZnJvbVxyXG4gICAgICAgICAqIHRoZSByZXN1bHQgYXMgbG9uZyBhcyB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kXHJcbiAgICAgICAgICogdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8bnVtYmVyfHN0cmluZ30gW2NhbGxiYWNrPTFdIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGVsZW1lbnQgb3IgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBleGNsdWRlLiBJZiBhIHByb3BlcnR5IG5hbWUgb3JcclxuICAgICAgICAgKiAgb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIlxyXG4gICAgICAgICAqICBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIHNsaWNlIG9mIGBhcnJheWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaW5pdGlhbChbMSwgMiwgM10pO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbml0aWFsKFsxLCAyLCAzXSwgMik7XHJcbiAgICAgICAgICogLy8gPT4gWzFdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmluaXRpYWwoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHtcclxuICAgICAgICAgKiAgIHJldHVybiBudW0gPiAxO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IFsxXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYmxvY2tlZCc6IGZhbHNlLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnbmEnIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5pbml0aWFsKGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogZmFsc2UsICdlbXBsb3llcic6ICdzbGF0ZScgfV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ucGx1Y2soXy5pbml0aWFsKGNoYXJhY3RlcnMsIHsgJ2VtcGxveWVyJzogJ25hJyB9KSwgJ25hbWUnKTtcclxuICAgICAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSAwLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnbnVtYmVyJyAmJiBjYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBsZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXgtLSAmJiBjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuID0gKGNhbGxiYWNrID09IG51bGwgfHwgdGhpc0FyZykgPyAxIDogY2FsbGJhY2sgfHwgbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2xpY2UoYXJyYXksIDAsIG5hdGl2ZU1pbihuYXRpdmVNYXgoMCwgbGVuZ3RoIC0gbiksIGxlbmd0aCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB1bmlxdWUgdmFsdWVzIHByZXNlbnQgaW4gYWxsIHByb3ZpZGVkIGFycmF5cyB1c2luZ1xyXG4gICAgICAgICAqIHN0cmljdCBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5XSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHNoYXJlZCB2YWx1ZXMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaW50ZXJzZWN0aW9uKFsxLCAyLCAzXSwgWzUsIDIsIDEsIDRdLCBbMiwgMV0pO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbnRlcnNlY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gW10sXHJcbiAgICAgICAgICAgICAgICBhcmdzSW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgY2FjaGVzID0gZ2V0QXJyYXkoKSxcclxuICAgICAgICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXHJcbiAgICAgICAgICAgICAgICB0cnVzdEluZGV4T2YgPSBpbmRleE9mID09PSBiYXNlSW5kZXhPZixcclxuICAgICAgICAgICAgICAgIHNlZW4gPSBnZXRBcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJndW1lbnRzW2FyZ3NJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNBcmd1bWVudHModmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZXMucHVzaCh0cnVzdEluZGV4T2YgJiYgdmFsdWUubGVuZ3RoID49IGxhcmdlQXJyYXlTaXplICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNhY2hlKGFyZ3NJbmRleCA/IGFyZ3NbYXJnc0luZGV4XSA6IHNlZW4pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBhcmdzWzBdLFxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgb3V0ZXI6IHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FjaGUgPSBjYWNoZXNbMF07XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGFycmF5W2luZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoKGNhY2hlID8gY2FjaGVJbmRleE9mKGNhY2hlLCB2YWx1ZSkgOiBpbmRleE9mKHNlZW4sIHZhbHVlKSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc0luZGV4ID0gYXJnc0xlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAoY2FjaGUgfHwgc2VlbikucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKC0tYXJnc0luZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlID0gY2FjaGVzW2FyZ3NJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY2FjaGUgPyBjYWNoZUluZGV4T2YoY2FjaGUsIHZhbHVlKSA6IGluZGV4T2YoYXJnc1thcmdzSW5kZXhdLCB2YWx1ZSkpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlIChhcmdzTGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIGNhY2hlID0gY2FjaGVzW2FyZ3NMZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVsZWFzZU9iamVjdChjYWNoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVsZWFzZUFycmF5KGNhY2hlcyk7XHJcbiAgICAgICAgICAgIHJlbGVhc2VBcnJheShzZWVuKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGxhc3QgZWxlbWVudCBvciBsYXN0IGBuYCBlbGVtZW50cyBvZiBhbiBhcnJheS4gSWYgYSBjYWxsYmFjayBpc1xyXG4gICAgICAgICAqIHByb3ZpZGVkIGVsZW1lbnRzIGF0IHRoZSBlbmQgb2YgdGhlIGFycmF5IGFyZSByZXR1cm5lZCBhcyBsb25nIGFzIHRoZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcclxuICAgICAgICAgKiB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fG51bWJlcnxzdHJpbmd9IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgZWxlbWVudCBvciB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yXHJcbiAgICAgICAgICogIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCJcclxuICAgICAgICAgKiAgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbGFzdCBlbGVtZW50KHMpIG9mIGBhcnJheWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubGFzdChbMSwgMiwgM10pO1xyXG4gICAgICAgICAqIC8vID0+IDNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubGFzdChbMSwgMiwgM10sIDIpO1xyXG4gICAgICAgICAqIC8vID0+IFsyLCAzXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5sYXN0KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gbnVtID4gMTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMiwgM11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2Jsb2NrZWQnOiBmYWxzZSwgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ25hJyB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ucGx1Y2soXy5sYXN0KGNoYXJhY3RlcnMsICdibG9ja2VkJyksICduYW1lJyk7XHJcbiAgICAgICAgICogLy8gPT4gWydmcmVkJywgJ3BlYmJsZXMnXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5sYXN0KGNoYXJhY3RlcnMsIHsgJ2VtcGxveWVyJzogJ25hJyB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAnZW1wbG95ZXInOiAnbmEnIH1dXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxhc3QoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBuID0gMCxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ251bWJlcicgJiYgY2FsbGJhY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGluZGV4LS0gJiYgY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbiA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gPT0gbnVsbCB8fCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5ID8gYXJyYXlbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNsaWNlKGFycmF5LCBuYXRpdmVNYXgoMCwgbGVuZ3RoIC0gbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGxhc3Qgb2NjdXJyZW5jZSBvZiBgdmFsdWVgIGlzIGZvdW5kIHVzaW5nIHN0cmljdFxyXG4gICAgICAgICAqIGVxdWFsaXR5IGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC4gSWYgYGZyb21JbmRleGAgaXMgbmVnYXRpdmUsIGl0IGlzIHVzZWRcclxuICAgICAgICAgKiBhcyB0aGUgb2Zmc2V0IGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD1hcnJheS5sZW5ndGgtMV0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlIG9yIGAtMWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubGFzdEluZGV4T2YoWzEsIDIsIDMsIDEsIDIsIDNdLCAyKTtcclxuICAgICAgICAgKiAvLyA9PiA0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmxhc3RJbmRleE9mKFsxLCAyLCAzLCAxLCAyLCAzXSwgMiwgMyk7XHJcbiAgICAgICAgICogLy8gPT4gMVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsYXN0SW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IChmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KDAsIGluZGV4ICsgZnJvbUluZGV4KSA6IG5hdGl2ZU1pbihmcm9tSW5kZXgsIGluZGV4IC0gMSkpICsgMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlcyBhbGwgcHJvdmlkZWQgdmFsdWVzIGZyb20gdGhlIGdpdmVuIGFycmF5IHVzaW5nIHN0cmljdCBlcXVhbGl0eSBmb3JcclxuICAgICAgICAgKiBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW3ZhbHVlXSBUaGUgdmFsdWVzIHRvIHJlbW92ZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDMsIDEsIDIsIDNdO1xyXG4gICAgICAgICAqIF8ucHVsbChhcnJheSwgMiwgMyk7XHJcbiAgICAgICAgICogY29uc29sZS5sb2coYXJyYXkpO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAxXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBwdWxsKGFycmF5KSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgYXJnc0luZGV4ID0gMCxcclxuICAgICAgICAgICAgICAgIGFyZ3NMZW5ndGggPSBhcmdzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYXJnc1thcmdzSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGxpY2UuY2FsbChhcnJheSwgaW5kZXgtLSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aC0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIG51bWJlcnMgKHBvc2l0aXZlIGFuZC9vciBuZWdhdGl2ZSkgcHJvZ3Jlc3NpbmcgZnJvbVxyXG4gICAgICAgICAqIGBzdGFydGAgdXAgdG8gYnV0IG5vdCBpbmNsdWRpbmcgYGVuZGAuIElmIGBzdGFydGAgaXMgbGVzcyB0aGFuIGBzdG9wYCBhXHJcbiAgICAgICAgICogemVyby1sZW5ndGggcmFuZ2UgaXMgY3JlYXRlZCB1bmxlc3MgYSBuZWdhdGl2ZSBgc3RlcGAgaXMgc3BlY2lmaWVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IG9mIHRoZSByYW5nZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgb2YgdGhlIHJhbmdlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RlcD0xXSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IG9yIGRlY3JlbWVudCBieS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgcmFuZ2UgYXJyYXkuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmFuZ2UoNCk7XHJcbiAgICAgICAgICogLy8gPT4gWzAsIDEsIDIsIDNdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmdlKDEsIDUpO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyLCAzLCA0XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yYW5nZSgwLCAyMCwgNSk7XHJcbiAgICAgICAgICogLy8gPT4gWzAsIDUsIDEwLCAxNV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmFuZ2UoMCwgLTQsIC0xKTtcclxuICAgICAgICAgKiAvLyA9PiBbMCwgLTEsIC0yLCAtM11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmFuZ2UoMSwgNCwgMCk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDEsIDFdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmdlKDApO1xyXG4gICAgICAgICAqIC8vID0+IFtdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJhbmdlKHN0YXJ0LCBlbmQsIHN0ZXApIHtcclxuICAgICAgICAgICAgc3RhcnQgPSArc3RhcnQgfHwgMDtcclxuICAgICAgICAgICAgc3RlcCA9IHR5cGVvZiBzdGVwID09ICdudW1iZXInID8gc3RlcCA6ICgrc3RlcCB8fCAxKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbmQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgZW5kID0gc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICBzdGFydCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdXNlIGBBcnJheShsZW5ndGgpYCBzbyBlbmdpbmVzIGxpa2UgQ2hha3JhIGFuZCBWOCBhdm9pZCBzbG93ZXIgbW9kZXNcclxuICAgICAgICAgICAgLy8gaHR0cDovL3lvdXR1LmJlL1hBcUlwR1U4WlprI3Q9MTdtMjVzXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KDAsIGNlaWwoKGVuZCAtIHN0YXJ0KSAvIChzdGVwIHx8IDEpKSksXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBzdGFydDtcclxuICAgICAgICAgICAgICAgIHN0YXJ0ICs9IHN0ZXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZXMgYWxsIGVsZW1lbnRzIGZyb20gYW4gYXJyYXkgdGhhdCB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleSBmb3JcclxuICAgICAgICAgKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiByZW1vdmVkIGVsZW1lbnRzLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgXHJcbiAgICAgICAgICogYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgcmVtb3ZlZCBlbGVtZW50cy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDMsIDQsIDUsIDZdO1xyXG4gICAgICAgICAqIHZhciBldmVucyA9IF8ucmVtb3ZlKGFycmF5LCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAlIDIgPT0gMDsgfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDMsIDVdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBjb25zb2xlLmxvZyhldmVucyk7XHJcbiAgICAgICAgICogLy8gPT4gWzIsIDQsIDZdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZShhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBzcGxpY2UuY2FsbChhcnJheSwgaW5kZXgtLSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5pbml0aWFsYCB0aGlzIG1ldGhvZCBnZXRzIGFsbCBidXQgdGhlIGZpcnN0IGVsZW1lbnQgb3JcclxuICAgICAgICAgKiBmaXJzdCBgbmAgZWxlbWVudHMgb2YgYW4gYXJyYXkuIElmIGEgY2FsbGJhY2sgZnVuY3Rpb24gaXMgcHJvdmlkZWQgZWxlbWVudHNcclxuICAgICAgICAgKiBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheSBhcmUgZXhjbHVkZWQgZnJvbSB0aGUgcmVzdWx0IGFzIGxvbmcgYXMgdGhlXHJcbiAgICAgICAgICogY2FsbGJhY2sgcmV0dXJucyB0cnVleS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxyXG4gICAgICAgICAqIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBhbGlhcyBkcm9wLCB0YWlsXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxudW1iZXJ8c3RyaW5nfSBbY2FsbGJhY2s9MV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgZWxlbWVudCBvciB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIGV4Y2x1ZGUuIElmIGEgcHJvcGVydHkgbmFtZSBvclxyXG4gICAgICAgICAqICBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiXHJcbiAgICAgICAgICogIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgc2xpY2Ugb2YgYGFycmF5YC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yZXN0KFsxLCAyLCAzXSk7XHJcbiAgICAgICAgICogLy8gPT4gWzIsIDNdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJlc3QoWzEsIDIsIDNdLCAyKTtcclxuICAgICAgICAgKiAvLyA9PiBbM11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmVzdChbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIG51bSA8IDM7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gWzNdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICdzbGF0ZScgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdibG9ja2VkJzogZmFsc2UsICAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICdlbXBsb3llcic6ICduYScgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnBsdWNrKF8ucmVzdChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpLCAnbmFtZScpO1xyXG4gICAgICAgICAqIC8vID0+IFsnZnJlZCcsICdwZWJibGVzJ11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ucmVzdChjaGFyYWN0ZXJzLCB7ICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgJ2VtcGxveWVyJzogJ25hJyB9XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXN0KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdudW1iZXInICYmIGNhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCAmJiBjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuID0gKGNhbGxiYWNrID09IG51bGwgfHwgdGhpc0FyZykgPyAxIDogbmF0aXZlTWF4KDAsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2xpY2UoYXJyYXksIG4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXNlcyBhIGJpbmFyeSBzZWFyY2ggdG8gZGV0ZXJtaW5lIHRoZSBzbWFsbGVzdCBpbmRleCBhdCB3aGljaCBhIHZhbHVlXHJcbiAgICAgICAgICogc2hvdWxkIGJlIGluc2VydGVkIGludG8gYSBnaXZlbiBzb3J0ZWQgYXJyYXkgaW4gb3JkZXIgdG8gbWFpbnRhaW4gdGhlIHNvcnRcclxuICAgICAgICAgKiBvcmRlciBvZiB0aGUgYXJyYXkuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCBmb3JcclxuICAgICAgICAgKiBgdmFsdWVgIGFuZCBlYWNoIGVsZW1lbnQgb2YgYGFycmF5YCB0byBjb21wdXRlIHRoZWlyIHNvcnQgcmFua2luZy4gVGhlXHJcbiAgICAgICAgICogY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZXZhbHVhdGUuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZFxyXG4gICAgICAgICAqICBpbnRvIGBhcnJheWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc29ydGVkSW5kZXgoWzIwLCAzMCwgNTBdLCA0MCk7XHJcbiAgICAgICAgICogLy8gPT4gMlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5zb3J0ZWRJbmRleChbeyAneCc6IDIwIH0sIHsgJ3gnOiAzMCB9LCB7ICd4JzogNTAgfV0sIHsgJ3gnOiA0MCB9LCAneCcpO1xyXG4gICAgICAgICAqIC8vID0+IDJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBkaWN0ID0ge1xyXG4gICAgICAgICAqICAgJ3dvcmRUb051bWJlcic6IHsgJ3R3ZW50eSc6IDIwLCAndGhpcnR5JzogMzAsICdmb3VydHknOiA0MCwgJ2ZpZnR5JzogNTAgfVxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNvcnRlZEluZGV4KFsndHdlbnR5JywgJ3RoaXJ0eScsICdmaWZ0eSddLCAnZm91cnR5JywgZnVuY3Rpb24od29yZCkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIGRpY3Qud29yZFRvTnVtYmVyW3dvcmRdO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IDJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc29ydGVkSW5kZXgoWyd0d2VudHknLCAndGhpcnR5JywgJ2ZpZnR5J10sICdmb3VydHknLCBmdW5jdGlvbih3b3JkKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gdGhpcy53b3JkVG9OdW1iZXJbd29yZF07XHJcbiAgICAgICAgICogfSwgZGljdCk7XHJcbiAgICAgICAgICogLy8gPT4gMlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzb3J0ZWRJbmRleChhcnJheSwgdmFsdWUsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBsb3cgPSAwLFxyXG4gICAgICAgICAgICAgICAgaGlnaCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogbG93O1xyXG5cclxuICAgICAgICAgICAgLy8gZXhwbGljaXRseSByZWZlcmVuY2UgYGlkZW50aXR5YCBmb3IgYmV0dGVyIGlubGluaW5nIGluIEZpcmVmb3hcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayA/IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMSkgOiBpZGVudGl0eTtcclxuICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjayh2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAobG93IDwgaGlnaCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pZCA9IChsb3cgKyBoaWdoKSA+Pj4gMTtcclxuICAgICAgICAgICAgICAgIChjYWxsYmFjayhhcnJheVttaWRdKSA8IHZhbHVlKSA/IGxvdyA9IG1pZCArIDEgOiBoaWdoID0gbWlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBsb3c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMsIGluIG9yZGVyLCBvZiB0aGUgcHJvdmlkZWQgYXJyYXlzIHVzaW5nXHJcbiAgICAgICAgICogc3RyaWN0IGVxdWFsaXR5IGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXldIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgY29tYmluZWQgdmFsdWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnVuaW9uKFsxLCAyLCAzXSwgWzUsIDIsIDEsIDRdLCBbMiwgMV0pO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyLCAzLCA1LCA0XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB1bmlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VVbmlxKGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGR1cGxpY2F0ZS12YWx1ZS1mcmVlIHZlcnNpb24gb2YgYW4gYXJyYXkgdXNpbmcgc3RyaWN0IGVxdWFsaXR5XHJcbiAgICAgICAgICogZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLiBJZiB0aGUgYXJyYXkgaXMgc29ydGVkLCBwcm92aWRpbmdcclxuICAgICAgICAgKiBgdHJ1ZWAgZm9yIGBpc1NvcnRlZGAgd2lsbCB1c2UgYSBmYXN0ZXIgYWxnb3JpdGhtLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkXHJcbiAgICAgICAgICogZWFjaCBlbGVtZW50IG9mIGBhcnJheWAgaXMgcGFzc2VkIHRocm91Z2ggdGhlIGNhbGxiYWNrIGJlZm9yZSB1bmlxdWVuZXNzXHJcbiAgICAgICAgICogaXMgY29tcHV0ZWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxyXG4gICAgICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgdW5pcXVlXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU29ydGVkPWZhbHNlXSBBIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCBgYXJyYXlgIGlzIHNvcnRlZC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIGR1cGxpY2F0ZS12YWx1ZS1mcmVlIGFycmF5LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnVuaXEoWzEsIDIsIDEsIDMsIDFdKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMiwgM11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8udW5pcShbMSwgMSwgMiwgMiwgM10sIHRydWUpO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyLCAzXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy51bmlxKFsnQScsICdiJywgJ0MnLCAnYScsICdCJywgJ2MnXSwgZnVuY3Rpb24obGV0dGVyKSB7IHJldHVybiBsZXR0ZXIudG9Mb3dlckNhc2UoKTsgfSk7XHJcbiAgICAgICAgICogLy8gPT4gWydBJywgJ2InLCAnQyddXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnVuaXEoWzEsIDIuNSwgMywgMS41LCAyLCAzLjVdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIHRoaXMuZmxvb3IobnVtKTsgfSwgTWF0aCk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDIuNSwgM11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8udW5pcShbeyAneCc6IDEgfSwgeyAneCc6IDIgfSwgeyAneCc6IDEgfV0sICd4Jyk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ3gnOiAxIH0sIHsgJ3gnOiAyIH1dXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVuaXEoYXJyYXksIGlzU29ydGVkLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICAvLyBqdWdnbGUgYXJndW1lbnRzXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNTb3J0ZWQgIT0gJ2Jvb2xlYW4nICYmIGlzU29ydGVkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNBcmcgPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gKHR5cGVvZiBpc1NvcnRlZCAhPSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgJiYgdGhpc0FyZ1tpc1NvcnRlZF0gPT09IGFycmF5KSA/IG51bGwgOiBpc1NvcnRlZDtcclxuICAgICAgICAgICAgICAgIGlzU29ydGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZVVuaXEoYXJyYXksIGlzU29ydGVkLCBjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGV4Y2x1ZGluZyBhbGwgcHJvdmlkZWQgdmFsdWVzIHVzaW5nIHN0cmljdCBlcXVhbGl0eSBmb3JcclxuICAgICAgICAgKiBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmlsdGVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW3ZhbHVlXSBUaGUgdmFsdWVzIHRvIGV4Y2x1ZGUuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy53aXRob3V0KFsxLCAyLCAxLCAwLCAzLCAxLCA0XSwgMCwgMSk7XHJcbiAgICAgICAgICogLy8gPT4gWzIsIDMsIDRdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdpdGhvdXQoYXJyYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VEaWZmZXJlbmNlKGFycmF5LCBzbGljZShhcmd1bWVudHMsIDEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgdGhhdCBpcyB0aGUgc3ltbWV0cmljIGRpZmZlcmVuY2Ugb2YgdGhlIHByb3ZpZGVkIGFycmF5cy5cclxuICAgICAgICAgKiBTZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TeW1tZXRyaWNfZGlmZmVyZW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXldIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgdmFsdWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnhvcihbMSwgMiwgM10sIFs1LCAyLCAxLCA0XSk7XHJcbiAgICAgICAgICogLy8gPT4gWzMsIDUsIDRdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnhvcihbMSwgMiwgNV0sIFsyLCAzLCA1XSwgWzMsIDQsIDVdKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgNCwgNV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24geG9yKCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gYXJndW1lbnRzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KGFycmF5KSB8fCBpc0FyZ3VtZW50cyhhcnJheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzdWx0ID8gYmFzZVVuaXEoYmFzZURpZmZlcmVuY2UocmVzdWx0LCBhcnJheSkuY29uY2F0KGJhc2VEaWZmZXJlbmNlKGFycmF5LCByZXN1bHQpKSkgOiBhcnJheTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0IHx8IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLCB0aGUgZmlyc3Qgb2Ygd2hpY2ggY29udGFpbnMgdGhlIGZpcnN0XHJcbiAgICAgICAgICogZWxlbWVudHMgb2YgdGhlIGdpdmVuIGFycmF5cywgdGhlIHNlY29uZCBvZiB3aGljaCBjb250YWlucyB0aGUgc2Vjb25kXHJcbiAgICAgICAgICogZWxlbWVudHMgb2YgdGhlIGdpdmVuIGFycmF5cywgYW5kIHNvIG9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIHVuemlwXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheV0gQXJyYXlzIHRvIHByb2Nlc3MuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uemlwKFsnZnJlZCcsICdiYXJuZXknXSwgWzMwLCA0MF0sIFt0cnVlLCBmYWxzZV0pO1xyXG4gICAgICAgICAqIC8vID0+IFtbJ2ZyZWQnLCAzMCwgdHJ1ZV0sIFsnYmFybmV5JywgNDAsIGZhbHNlXV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gemlwKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50cyA6IGFyZ3VtZW50c1swXSxcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IG1heChwbHVjayhhcnJheSwgJ2xlbmd0aCcpKSA6IDAsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGggPCAwID8gMCA6IGxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IHBsdWNrKGFycmF5LCBpbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIGZyb20gYXJyYXlzIG9mIGBrZXlzYCBhbmQgYHZhbHVlc2AuIFByb3ZpZGVcclxuICAgICAgICAgKiBlaXRoZXIgYSBzaW5nbGUgdHdvIGRpbWVuc2lvbmFsIGFycmF5LCBpLmUuIGBbW2tleTEsIHZhbHVlMV0sIFtrZXkyLCB2YWx1ZTJdXWBcclxuICAgICAgICAgKiBvciB0d28gYXJyYXlzLCBvbmUgb2YgYGtleXNgIGFuZCBvbmUgb2YgY29ycmVzcG9uZGluZyBgdmFsdWVzYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBhbGlhcyBvYmplY3RcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0ga2V5cyBUaGUgYXJyYXkgb2Yga2V5cy5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzPVtdXSBUaGUgYXJyYXkgb2YgdmFsdWVzLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBnaXZlbiBrZXlzIGFuZFxyXG4gICAgICAgICAqICBjb3JyZXNwb25kaW5nIHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy56aXBPYmplY3QoWydmcmVkJywgJ2Jhcm5leSddLCBbMzAsIDQwXSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnZnJlZCc6IDMwLCAnYmFybmV5JzogNDAgfVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB6aXBPYmplY3Qoa2V5cywgdmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0ga2V5cyA/IGtleXMubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHt9O1xyXG5cclxuICAgICAgICAgICAgaWYgKCF2YWx1ZXMgJiYgbGVuZ3RoICYmICFpc0FycmF5KGtleXNbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWVzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleVswXV0gPSBrZXlbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBleGVjdXRlcyBgZnVuY2AsIHdpdGggIHRoZSBgdGhpc2AgYmluZGluZyBhbmRcclxuICAgICAgICAgKiBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24sIG9ubHkgYWZ0ZXIgYmVpbmcgY2FsbGVkIGBuYCB0aW1lcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBmdW5jdGlvbiBtdXN0IGJlIGNhbGxlZCBiZWZvcmVcclxuICAgICAgICAgKiAgYGZ1bmNgIGlzIGV4ZWN1dGVkLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBzYXZlcyA9IFsncHJvZmlsZScsICdzZXR0aW5ncyddO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGRvbmUgPSBfLmFmdGVyKHNhdmVzLmxlbmd0aCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICogICBjb25zb2xlLmxvZygnRG9uZSBzYXZpbmchJyk7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZvckVhY2goc2F2ZXMsIGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgICAgICAgKiAgIGFzeW5jU2F2ZSh7ICd0eXBlJzogdHlwZSwgJ2NvbXBsZXRlJzogZG9uZSB9KTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBsb2dzICdEb25lIHNhdmluZyEnLCBhZnRlciBhbGwgc2F2ZXMgaGF2ZSBjb21wbGV0ZWRcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWZ0ZXIobiwgZnVuYykge1xyXG4gICAgICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgtLW4gPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgXHJcbiAgICAgICAgICogYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHByZXBlbmRzIGFueSBhZGRpdGlvbmFsIGBiaW5kYCBhcmd1bWVudHMgdG8gdGhvc2VcclxuICAgICAgICAgKiBwcm92aWRlZCB0byB0aGUgYm91bmQgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZnVuYyA9IGZ1bmN0aW9uKGdyZWV0aW5nKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyB0aGlzLm5hbWU7XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGZ1bmMgPSBfLmJpbmQoZnVuYywgeyAnbmFtZSc6ICdmcmVkJyB9LCAnaGknKTtcclxuICAgICAgICAgKiBmdW5jKCk7XHJcbiAgICAgICAgICogLy8gPT4gJ2hpIGZyZWQnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJpbmQoZnVuYywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBjcmVhdGVXcmFwcGVyKGZ1bmMsIDE3LCBzbGljZShhcmd1bWVudHMsIDIpLCBudWxsLCB0aGlzQXJnKSA6IGNyZWF0ZVdyYXBwZXIoZnVuYywgMSwgbnVsbCwgbnVsbCwgdGhpc0FyZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCaW5kcyBtZXRob2RzIG9mIGFuIG9iamVjdCB0byB0aGUgb2JqZWN0IGl0c2VsZiwgb3ZlcndyaXRpbmcgdGhlIGV4aXN0aW5nXHJcbiAgICAgICAgICogbWV0aG9kLiBNZXRob2QgbmFtZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXNcclxuICAgICAgICAgKiBvZiBtZXRob2QgbmFtZXMuIElmIG5vIG1ldGhvZCBuYW1lcyBhcmUgcHJvdmlkZWQgYWxsIHRoZSBmdW5jdGlvbiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICogb2YgYG9iamVjdGAgd2lsbCBiZSBib3VuZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gYmluZCBhbmQgYXNzaWduIHRoZSBib3VuZCBtZXRob2RzIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uc3RyaW5nfSBbbWV0aG9kTmFtZV0gVGhlIG9iamVjdCBtZXRob2QgbmFtZXMgdG9cclxuICAgICAgICAgKiAgYmluZCwgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgbWV0aG9kIG5hbWVzIG9yIGFycmF5cyBvZiBtZXRob2QgbmFtZXMuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIHZpZXcgPSB7XHJcbiAgICAgICAgICogICAnbGFiZWwnOiAnZG9jcycsXHJcbiAgICAgICAgICogICAnb25DbGljayc6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnY2xpY2tlZCAnICsgdGhpcy5sYWJlbCk7IH1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5iaW5kQWxsKHZpZXcpO1xyXG4gICAgICAgICAqIGpRdWVyeSgnI2RvY3MnKS5vbignY2xpY2snLCB2aWV3Lm9uQ2xpY2spO1xyXG4gICAgICAgICAqIC8vID0+IGxvZ3MgJ2NsaWNrZWQgZG9jcycsIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJpbmRBbGwob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBmdW5jcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYmFzZUZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCBmYWxzZSwgMSkgOiBmdW5jdGlvbnMob2JqZWN0KSxcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBmdW5jcy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGZ1bmNzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gY3JlYXRlV3JhcHBlcihvYmplY3Rba2V5XSwgMSwgbnVsbCwgbnVsbCwgb2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCBpbnZva2VzIHRoZSBtZXRob2QgYXQgYG9iamVjdFtrZXldYFxyXG4gICAgICAgICAqIGFuZCBwcmVwZW5kcyBhbnkgYWRkaXRpb25hbCBgYmluZEtleWAgYXJndW1lbnRzIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBib3VuZFxyXG4gICAgICAgICAqIGZ1bmN0aW9uLiBUaGlzIG1ldGhvZCBkaWZmZXJzIGZyb20gYF8uYmluZGAgYnkgYWxsb3dpbmcgYm91bmQgZnVuY3Rpb25zIHRvXHJcbiAgICAgICAgICogcmVmZXJlbmNlIG1ldGhvZHMgdGhhdCB3aWxsIGJlIHJlZGVmaW5lZCBvciBkb24ndCB5ZXQgZXhpc3QuXHJcbiAgICAgICAgICogU2VlIGh0dHA6Ly9taWNoYXV4LmNhL2FydGljbGVzL2xhenktZnVuY3Rpb24tZGVmaW5pdGlvbi1wYXR0ZXJuLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0aGUgbWV0aG9kIGJlbG9uZ3MgdG8uXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QuXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBvYmplY3QgPSB7XHJcbiAgICAgICAgICogICAnbmFtZSc6ICdmcmVkJyxcclxuICAgICAgICAgKiAgICdncmVldCc6IGZ1bmN0aW9uKGdyZWV0aW5nKSB7XHJcbiAgICAgICAgICogICAgIHJldHVybiBncmVldGluZyArICcgJyArIHRoaXMubmFtZTtcclxuICAgICAgICAgKiAgIH1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGZ1bmMgPSBfLmJpbmRLZXkob2JqZWN0LCAnZ3JlZXQnLCAnaGknKTtcclxuICAgICAgICAgKiBmdW5jKCk7XHJcbiAgICAgICAgICogLy8gPT4gJ2hpIGZyZWQnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBvYmplY3QuZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZykge1xyXG4gICAgICAgICAqICAgcmV0dXJuIGdyZWV0aW5nICsgJ3lhICcgKyB0aGlzLm5hbWUgKyAnISc7XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGZ1bmMoKTtcclxuICAgICAgICAgKiAvLyA9PiAnaGl5YSBmcmVkISdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmluZEtleShvYmplY3QsIGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBjcmVhdGVXcmFwcGVyKGtleSwgMTksIHNsaWNlKGFyZ3VtZW50cywgMiksIG51bGwsIG9iamVjdCkgOiBjcmVhdGVXcmFwcGVyKGtleSwgMywgbnVsbCwgbnVsbCwgb2JqZWN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb25zLFxyXG4gICAgICAgICAqIHdoZXJlIGVhY2ggZnVuY3Rpb24gY29uc3VtZXMgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gdGhhdCBmb2xsb3dzLlxyXG4gICAgICAgICAqIEZvciBleGFtcGxlLCBjb21wb3NpbmcgdGhlIGZ1bmN0aW9ucyBgZigpYCwgYGcoKWAsIGFuZCBgaCgpYCBwcm9kdWNlcyBgZihnKGgoKSkpYC5cclxuICAgICAgICAgKiBFYWNoIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjb21wb3NlZCBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBbZnVuY10gRnVuY3Rpb25zIHRvIGNvbXBvc2UuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY29tcG9zZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciByZWFsTmFtZU1hcCA9IHtcclxuICAgICAgICAgKiAgICdwZWJibGVzJzogJ3BlbmVsb3BlJ1xyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZm9ybWF0ID0gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAqICAgbmFtZSA9IHJlYWxOYW1lTWFwW25hbWUudG9Mb3dlckNhc2UoKV0gfHwgbmFtZTtcclxuICAgICAgICAgKiAgIHJldHVybiBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihmb3JtYXR0ZWQpIHtcclxuICAgICAgICAgKiAgIHJldHVybiAnSGl5YSAnICsgZm9ybWF0dGVkICsgJyEnO1xyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgd2VsY29tZSA9IF8uY29tcG9zZShncmVldCwgZm9ybWF0KTtcclxuICAgICAgICAgKiB3ZWxjb21lKCdwZWJibGVzJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ0hpeWEgUGVuZWxvcGUhJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb21wb3NlKCkge1xyXG4gICAgICAgICAgICB2YXIgZnVuY3MgPSBhcmd1bWVudHMsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBmdW5jcy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jc1tsZW5ndGhdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGZ1bmNzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzID0gW2Z1bmNzW2xlbmd0aF0uYXBwbHkodGhpcywgYXJncyldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NbMF07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gd2hpY2ggYWNjZXB0cyBvbmUgb3IgbW9yZSBhcmd1bWVudHMgb2YgYGZ1bmNgIHRoYXQgd2hlblxyXG4gICAgICAgICAqIGludm9rZWQgZWl0aGVyIGV4ZWN1dGVzIGBmdW5jYCByZXR1cm5pbmcgaXRzIHJlc3VsdCwgaWYgYWxsIGBmdW5jYCBhcmd1bWVudHNcclxuICAgICAgICAgKiBoYXZlIGJlZW4gcHJvdmlkZWQsIG9yIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgb25lIG9yIG1vcmUgb2YgdGhlXHJcbiAgICAgICAgICogcmVtYWluaW5nIGBmdW5jYCBhcmd1bWVudHMsIGFuZCBzbyBvbi4gVGhlIGFyaXR5IG9mIGBmdW5jYCBjYW4gYmUgc3BlY2lmaWVkXHJcbiAgICAgICAgICogaWYgYGZ1bmMubGVuZ3RoYCBpcyBub3Qgc3VmZmljaWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5PWZ1bmMubGVuZ3RoXSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGN1cnJpZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjdXJyaWVkID0gXy5jdXJyeShmdW5jdGlvbihhLCBiLCBjKSB7XHJcbiAgICAgICAgICogICBjb25zb2xlLmxvZyhhICsgYiArIGMpO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogY3VycmllZCgxKSgyKSgzKTtcclxuICAgICAgICAgKiAvLyA9PiA2XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBjdXJyaWVkKDEsIDIpKDMpO1xyXG4gICAgICAgICAqIC8vID0+IDZcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGN1cnJpZWQoMSwgMiwgMyk7XHJcbiAgICAgICAgICogLy8gPT4gNlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjdXJyeShmdW5jLCBhcml0eSkge1xyXG4gICAgICAgICAgICBhcml0eSA9IHR5cGVvZiBhcml0eSA9PSAnbnVtYmVyJyA/IGFyaXR5IDogKCthcml0eSB8fCBmdW5jLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIDQsIG51bGwsIG51bGwsIG51bGwsIGFyaXR5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgZGVsYXkgdGhlIGV4ZWN1dGlvbiBvZiBgZnVuY2AgdW50aWwgYWZ0ZXJcclxuICAgICAgICAgKiBgd2FpdGAgbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIGl0IHdhcyBpbnZva2VkLlxyXG4gICAgICAgICAqIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgdGhhdCBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb25cclxuICAgICAgICAgKiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFN1YnNlcXVlbnQgY2FsbHNcclxuICAgICAgICAgKiB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGNhbGwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3RlOiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgIGBmdW5jYCB3aWxsIGJlIGNhbGxlZFxyXG4gICAgICAgICAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gaXNcclxuICAgICAgICAgKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXSBTcGVjaWZ5IGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XSBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgY2FsbGVkLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0gU3BlY2lmeSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyBhdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4XHJcbiAgICAgICAgICogdmFyIGxhenlMYXlvdXQgPSBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKTtcclxuICAgICAgICAgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgbGF6eUxheW91dCk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyBleGVjdXRlIGBzZW5kTWFpbGAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxsc1xyXG4gICAgICAgICAqIGpRdWVyeSgnI3Bvc3Rib3gnKS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcclxuICAgICAgICAgKiAgICdsZWFkaW5nJzogdHJ1ZSxcclxuICAgICAgICAgKiAgICd0cmFpbGluZyc6IGZhbHNlXHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyBlbnN1cmUgYGJhdGNoTG9nYCBpcyBleGVjdXRlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxsc1xyXG4gICAgICAgICAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcclxuICAgICAgICAgKiBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwge1xyXG4gICAgICAgICAqICAgJ21heFdhaXQnOiAxMDAwXHJcbiAgICAgICAgICogfSwgZmFsc2UpO1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzLFxyXG4gICAgICAgICAgICAgICAgbWF4VGltZW91dElkLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgc3RhbXAsXHJcbiAgICAgICAgICAgICAgICB0aGlzQXJnLFxyXG4gICAgICAgICAgICAgICAgdGltZW91dElkLFxyXG4gICAgICAgICAgICAgICAgdHJhaWxpbmdDYWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdENhbGxlZCA9IDAsXHJcbiAgICAgICAgICAgICAgICBtYXhXYWl0ID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0cmFpbGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2FpdCA9IG5hdGl2ZU1heCgwLCB3YWl0KSB8fCAwO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxlYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdHJhaWxpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgbGVhZGluZyA9IG9wdGlvbnMubGVhZGluZztcclxuICAgICAgICAgICAgICAgIG1heFdhaXQgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucyAmJiAobmF0aXZlTWF4KHdhaXQsIG9wdGlvbnMubWF4V2FpdCkgfHwgMCk7XHJcbiAgICAgICAgICAgICAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/IG9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGVsYXllZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdygpIC0gc3RhbXApO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQ2FsbGVkID0gdHJhaWxpbmdDYWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENhbGxlZCA9IG5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gdGhpc0FyZyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZGVsYXllZCwgcmVtYWluaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtYXhEZWxheWVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVvdXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbWF4VGltZW91dElkID0gdGltZW91dElkID0gdHJhaWxpbmdDYWxsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyYWlsaW5nIHx8IChtYXhXYWl0ICE9PSB3YWl0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RDYWxsZWQgPSBub3coKTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXNBcmcgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgc3RhbXAgPSBub3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXNBcmcgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdHJhaWxpbmdDYWxsID0gdHJhaWxpbmcgJiYgKHRpbWVvdXRJZCB8fCAhbGVhZGluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1heFdhaXQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlYWRpbmdDYWxsID0gbGVhZGluZyAmJiAhdGltZW91dElkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1heFRpbWVvdXRJZCAmJiAhbGVhZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSBtYXhXYWl0IC0gKHN0YW1wIC0gbGFzdENhbGxlZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2FsbGVkID0gcmVtYWluaW5nIDw9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0NhbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4VGltZW91dElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhUaW1lb3V0SWQgPSBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghbWF4VGltZW91dElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFRpbWVvdXRJZCA9IHNldFRpbWVvdXQobWF4RGVsYXllZCwgcmVtYWluaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNDYWxsZWQgJiYgdGltZW91dElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dElkID0gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0SWQgJiYgd2FpdCAhPT0gbWF4V2FpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZGVsYXllZCwgd2FpdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGVhZGluZ0NhbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc0NhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpc0NhbGxlZCAmJiAhdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzID0gdGhpc0FyZyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVmZXJzIGV4ZWN1dGluZyB0aGUgYGZ1bmNgIGZ1bmN0aW9uIHVudGlsIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzIGNsZWFyZWQuXHJcbiAgICAgICAgICogQWRkaXRpb25hbCBhcmd1bWVudHMgd2lsbCBiZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCBpcyBpbnZva2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlZmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5kZWZlcihmdW5jdGlvbih0ZXh0KSB7IGNvbnNvbGUubG9nKHRleHQpOyB9LCAnZGVmZXJyZWQnKTtcclxuICAgICAgICAgKiAvLyBsb2dzICdkZWZlcnJlZCcgYWZ0ZXIgb25lIG9yIG1vcmUgbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlZmVyKGZ1bmMpIHtcclxuICAgICAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gc2xpY2UoYXJndW1lbnRzLCAxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV4ZWN1dGVzIHRoZSBgZnVuY2AgZnVuY3Rpb24gYWZ0ZXIgYHdhaXRgIG1pbGxpc2Vjb25kcy4gQWRkaXRpb25hbCBhcmd1bWVudHNcclxuICAgICAgICAgKiB3aWxsIGJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0IGlzIGludm9rZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVsYXkuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgZXhlY3V0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5kZWxheShmdW5jdGlvbih0ZXh0KSB7IGNvbnNvbGUubG9nKHRleHQpOyB9LCAxMDAwLCAnbGF0ZXInKTtcclxuICAgICAgICAgKiAvLyA9PiBsb2dzICdsYXRlcicgYWZ0ZXIgb25lIHNlY29uZFxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZWxheShmdW5jLCB3YWl0KSB7XHJcbiAgICAgICAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMik7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcclxuICAgICAgICAgICAgfSwgd2FpdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpc1xyXG4gICAgICAgICAqIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0XHJcbiAgICAgICAgICogYmFzZWQgb24gdGhlIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZVxyXG4gICAgICAgICAqIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSBjYWNoZSBrZXkuXHJcbiAgICAgICAgICogVGhlIGBmdW5jYCBpcyBleGVjdXRlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICogVGhlIHJlc3VsdCBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc29sdmVyXSBBIGZ1bmN0aW9uIHVzZWQgdG8gcmVzb2x2ZSB0aGUgY2FjaGUga2V5LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1lbW9pemluZyBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGZpYm9uYWNjaSA9IF8ubWVtb2l6ZShmdW5jdGlvbihuKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gbiA8IDIgPyBuIDogZmlib25hY2NpKG4gLSAxKSArIGZpYm9uYWNjaShuIC0gMik7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmaWJvbmFjY2koOSlcclxuICAgICAgICAgKiAvLyA9PiAzNFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICogICAnZnJlZCc6IHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9LFxyXG4gICAgICAgICAqICAgJ3BlYmJsZXMnOiB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIG1vZGlmeWluZyB0aGUgcmVzdWx0IGNhY2hlXHJcbiAgICAgICAgICogdmFyIGdldCA9IF8ubWVtb2l6ZShmdW5jdGlvbihuYW1lKSB7IHJldHVybiBkYXRhW25hbWVdOyB9LCBfLmlkZW50aXR5KTtcclxuICAgICAgICAgKiBnZXQoJ3BlYmJsZXMnKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBnZXQuY2FjaGUucGViYmxlcy5uYW1lID0gJ3BlbmVsb3BlJztcclxuICAgICAgICAgKiBnZXQoJ3BlYmJsZXMnKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ3BlbmVsb3BlJywgJ2FnZSc6IDEgfVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBtZW1vaXplKGZ1bmMsIHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FjaGUgPSBtZW1vaXplZC5jYWNoZSxcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSByZXNvbHZlciA/IHJlc29sdmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBrZXlQcmVmaXggKyBhcmd1bWVudHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoY2FjaGUsIGtleSkgPyBjYWNoZVtrZXldIDogKGNhY2hlW2tleV0gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1lbW9pemVkLmNhY2hlID0ge307XHJcbiAgICAgICAgICAgIHJldHVybiBtZW1vaXplZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIHJlc3RyaWN0ZWQgdG8gZXhlY3V0ZSBgZnVuY2Agb25jZS4gUmVwZWF0IGNhbGxzIHRvXHJcbiAgICAgICAgICogdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgY2FsbC4gVGhlIGBmdW5jYCBpcyBleGVjdXRlZFxyXG4gICAgICAgICAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBpbml0aWFsaXplID0gXy5vbmNlKGNyZWF0ZUFwcGxpY2F0aW9uKTtcclxuICAgICAgICAgKiBpbml0aWFsaXplKCk7XHJcbiAgICAgICAgICogaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAqIC8vIGBpbml0aWFsaXplYCBleGVjdXRlcyBgY3JlYXRlQXBwbGljYXRpb25gIG9uY2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25jZShmdW5jKSB7XHJcbiAgICAgICAgICAgIHZhciByYW4sXHJcbiAgICAgICAgICAgICAgICByZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhciB0aGUgYGZ1bmNgIHZhcmlhYmxlIHNvIHRoZSBmdW5jdGlvbiBtYXkgYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcclxuICAgICAgICAgICAgICAgIGZ1bmMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgaW52b2tlcyBgZnVuY2Agd2l0aCBhbnkgYWRkaXRpb25hbFxyXG4gICAgICAgICAqIGBwYXJ0aWFsYCBhcmd1bWVudHMgcHJlcGVuZGVkIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uIFRoaXNcclxuICAgICAgICAgKiBtZXRob2QgaXMgc2ltaWxhciB0byBgXy5iaW5kYCBleGNlcHQgaXQgZG9lcyAqKm5vdCoqIGFsdGVyIHRoZSBgdGhpc2AgYmluZGluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwYXJ0aWFsbHkgYXBwbHkgYXJndW1lbnRzIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZywgbmFtZSkgeyByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyBuYW1lOyB9O1xyXG4gICAgICAgICAqIHZhciBoaSA9IF8ucGFydGlhbChncmVldCwgJ2hpJyk7XHJcbiAgICAgICAgICogaGkoJ2ZyZWQnKTtcclxuICAgICAgICAgKiAvLyA9PiAnaGkgZnJlZCdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcGFydGlhbChmdW5jKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIDE2LCBzbGljZShhcmd1bWVudHMsIDEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ucGFydGlhbGAgZXhjZXB0IHRoYXQgYHBhcnRpYWxgIGFyZ3VtZW50cyBhcmVcclxuICAgICAgICAgKiBhcHBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBkZWZhdWx0c0RlZXAgPSBfLnBhcnRpYWxSaWdodChfLm1lcmdlLCBfLmRlZmF1bHRzKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAqICAgJ3ZhcmlhYmxlJzogJ2RhdGEnLFxyXG4gICAgICAgICAqICAgJ2ltcG9ydHMnOiB7ICdqcSc6ICQgfVxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBkZWZhdWx0c0RlZXAob3B0aW9ucywgXy50ZW1wbGF0ZVNldHRpbmdzKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIG9wdGlvbnMudmFyaWFibGVcclxuICAgICAgICAgKiAvLyA9PiAnZGF0YSdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIG9wdGlvbnMuaW1wb3J0c1xyXG4gICAgICAgICAqIC8vID0+IHsgJ18nOiBfLCAnanEnOiAkIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcGFydGlhbFJpZ2h0KGZ1bmMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgMzIsIG51bGwsIHNsaWNlKGFyZ3VtZW50cywgMSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gZXhlY3V0ZWQsIHdpbGwgb25seSBjYWxsIHRoZSBgZnVuY2AgZnVuY3Rpb25cclxuICAgICAgICAgKiBhdCBtb3N0IG9uY2UgcGVyIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG9cclxuICAgICAgICAgKiBpbmRpY2F0ZSB0aGF0IGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZVxyXG4gICAgICAgICAqIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gU3Vic2VxdWVudCBjYWxscyB0byB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGxcclxuICAgICAgICAgKiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgY2FsbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAgYGZ1bmNgIHdpbGwgYmUgY2FsbGVkXHJcbiAgICAgICAgICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhlIHRocm90dGxlZCBmdW5jdGlvbiBpc1xyXG4gICAgICAgICAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB0aHJvdHRsZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB0aHJvdHRsZSBleGVjdXRpb25zIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXSBTcGVjaWZ5IGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0gU3BlY2lmeSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyBhdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nXHJcbiAgICAgICAgICogdmFyIHRocm90dGxlZCA9IF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCk7XHJcbiAgICAgICAgICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIHRocm90dGxlZCk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyBleGVjdXRlIGByZW5ld1Rva2VuYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgYnV0IG5vdCBtb3JlIHRoYW4gb25jZSBldmVyeSA1IG1pbnV0ZXNcclxuICAgICAgICAgKiBqUXVlcnkoJy5pbnRlcmFjdGl2ZScpLm9uKCdjbGljaycsIF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7XHJcbiAgICAgICAgICogICAndHJhaWxpbmcnOiBmYWxzZVxyXG4gICAgICAgICAqIH0pKTtcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YXIgbGVhZGluZyA9IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0cmFpbGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBsZWFkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIGxlYWRpbmcgPSAnbGVhZGluZycgaW4gb3B0aW9ucyA/IG9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XHJcbiAgICAgICAgICAgICAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/IG9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWJvdW5jZU9wdGlvbnMubGVhZGluZyA9IGxlYWRpbmc7XHJcbiAgICAgICAgICAgIGRlYm91bmNlT3B0aW9ucy5tYXhXYWl0ID0gd2FpdDtcclxuICAgICAgICAgICAgZGVib3VuY2VPcHRpb25zLnRyYWlsaW5nID0gdHJhaWxpbmc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwgZGVib3VuY2VPcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHByb3ZpZGVzIGB2YWx1ZWAgdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24gYXMgaXRzXHJcbiAgICAgICAgICogZmlyc3QgYXJndW1lbnQuIEFkZGl0aW9uYWwgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBmdW5jdGlvbiBhcmUgYXBwZW5kZWRcclxuICAgICAgICAgKiB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgd3JhcHBlciBmdW5jdGlvbi4gVGhlIHdyYXBwZXIgaXMgZXhlY3V0ZWQgd2l0aFxyXG4gICAgICAgICAqIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdyYXBwZXIgVGhlIHdyYXBwZXIgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBwID0gXy53cmFwKF8uZXNjYXBlLCBmdW5jdGlvbihmdW5jLCB0ZXh0KSB7XHJcbiAgICAgICAgICogICByZXR1cm4gJzxwPicgKyBmdW5jKHRleHQpICsgJzwvcD4nO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogcCgnRnJlZCwgV2lsbWEsICYgUGViYmxlcycpO1xyXG4gICAgICAgICAqIC8vID0+ICc8cD5GcmVkLCBXaWxtYSwgJmFtcDsgUGViYmxlczwvcD4nXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyYXAodmFsdWUsIHdyYXBwZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIod3JhcHBlciwgMTYsIFt2YWx1ZV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYHZhbHVlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byByZXR1cm4gZnJvbSB0aGUgbmV3IGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdmcmVkJyB9O1xyXG4gICAgICAgICAqIHZhciBnZXR0ZXIgPSBfLmNvbnN0YW50KG9iamVjdCk7XHJcbiAgICAgICAgICogZ2V0dGVyKCkgPT09IG9iamVjdDtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnN0YW50KHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9kdWNlcyBhIGNhbGxiYWNrIGJvdW5kIHRvIGFuIG9wdGlvbmFsIGB0aGlzQXJnYC4gSWYgYGZ1bmNgIGlzIGEgcHJvcGVydHlcclxuICAgICAgICAgKiBuYW1lIHRoZSBjcmVhdGVkIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgYSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqIElmIGBmdW5jYCBpcyBhbiBvYmplY3QgdGhlIGNyZWF0ZWQgY2FsbGJhY2sgd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50c1xyXG4gICAgICAgICAqIHRoYXQgY29udGFpbiB0aGUgZXF1aXZhbGVudCBvYmplY3QgcHJvcGVydGllcywgb3RoZXJ3aXNlIGl0IHdpbGwgcmV0dXJuIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbZnVuYz1pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYSBjYWxsYmFjay5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgY2FsbGJhY2suXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdGhlIGNhbGxiYWNrIGFjY2VwdHMuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGEgY2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gd3JhcCB0byBjcmVhdGUgY3VzdG9tIGNhbGxiYWNrIHNob3J0aGFuZHNcclxuICAgICAgICAgKiBfLmNyZWF0ZUNhbGxiYWNrID0gXy53cmFwKF8uY3JlYXRlQ2FsbGJhY2ssIGZ1bmN0aW9uKGZ1bmMsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICogICB2YXIgbWF0Y2ggPSAvXiguKz8pX18oW2dsXXQpKC4rKSQvLmV4ZWMoY2FsbGJhY2spO1xyXG4gICAgICAgICAqICAgcmV0dXJuICFtYXRjaCA/IGZ1bmMoY2FsbGJhY2ssIHRoaXNBcmcpIDogZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICogICAgIHJldHVybiBtYXRjaFsyXSA9PSAnZ3QnID8gb2JqZWN0W21hdGNoWzFdXSA+IG1hdGNoWzNdIDogb2JqZWN0W21hdGNoWzFdXSA8IG1hdGNoWzNdO1xyXG4gICAgICAgICAqICAgfTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZmlsdGVyKGNoYXJhY3RlcnMsICdhZ2VfX2d0MzgnKTtcclxuICAgICAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH1dXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gdHlwZW9mIGZ1bmM7XHJcbiAgICAgICAgICAgIGlmIChmdW5jID09IG51bGwgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZUNyZWF0ZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBoYW5kbGUgXCJfLnBsdWNrXCIgc3R5bGUgY2FsbGJhY2sgc2hvcnRoYW5kc1xyXG4gICAgICAgICAgICBpZiAodHlwZSAhPSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5KGZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IGtleXMoZnVuYyksXHJcbiAgICAgICAgICAgICAgICBrZXkgPSBwcm9wc1swXSxcclxuICAgICAgICAgICAgICAgIGEgPSBmdW5jW2tleV07XHJcblxyXG4gICAgICAgICAgICAvLyBoYW5kbGUgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2sgc2hvcnRoYW5kc1xyXG4gICAgICAgICAgICBpZiAocHJvcHMubGVuZ3RoID09IDEgJiYgYSA9PT0gYSAmJiAhaXNPYmplY3QoYSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGZhc3QgcGF0aCB0aGUgY29tbW9uIGNhc2Ugb2YgcHJvdmlkaW5nIGFuIG9iamVjdCB3aXRoIGEgc2luZ2xlXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9wZXJ0eSBjb250YWluaW5nIGEgcHJpbWl0aXZlIHZhbHVlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gb2JqZWN0W2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPT09IGIgJiYgKGEgIT09IDAgfHwgKDEgLyBhID09IDEgLyBiKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdCA9IGJhc2VJc0VxdWFsKG9iamVjdFtwcm9wc1tsZW5ndGhdXSwgZnVuY1twcm9wc1tsZW5ndGhdXSwgbnVsbCwgdHJ1ZSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb252ZXJ0cyB0aGUgY2hhcmFjdGVycyBgJmAsIGA8YCwgYD5gLCBgXCJgLCBhbmQgYCdgIGluIGBzdHJpbmdgIHRvIHRoZWlyXHJcbiAgICAgICAgICogY29ycmVzcG9uZGluZyBIVE1MIGVudGl0aWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBlc2NhcGUuXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZXNjYXBlKCdGcmVkLCBXaWxtYSwgJiBQZWJibGVzJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ0ZyZWQsIFdpbG1hLCAmYW1wOyBQZWJibGVzJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBlc2NhcGUoc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPT0gbnVsbCA/ICcnIDogU3RyaW5nKHN0cmluZykucmVwbGFjZShyZVVuZXNjYXBlZEh0bWwsIGVzY2FwZUh0bWxDaGFyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIGl0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2ZyZWQnIH07XHJcbiAgICAgICAgICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGRzIGZ1bmN0aW9uIHByb3BlcnRpZXMgb2YgYSBzb3VyY2Ugb2JqZWN0IHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXHJcbiAgICAgICAgICogSWYgYG9iamVjdGAgaXMgYSBmdW5jdGlvbiBtZXRob2RzIHdpbGwgYmUgYWRkZWQgdG8gaXRzIHByb3RvdHlwZSBhcyB3ZWxsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fSBbb2JqZWN0PWxvZGFzaF0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIGZ1bmN0aW9ucyB0byBhZGQuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jaGFpbj10cnVlXSBTcGVjaWZ5IHdoZXRoZXIgdGhlIGZ1bmN0aW9ucyBhZGRlZCBhcmUgY2hhaW5hYmxlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmdW5jdGlvbiBjYXBpdGFsaXplKHN0cmluZykge1xyXG4gICAgICAgICAqICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubWl4aW4oeyAnY2FwaXRhbGl6ZSc6IGNhcGl0YWxpemUgfSk7XHJcbiAgICAgICAgICogXy5jYXBpdGFsaXplKCdmcmVkJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ0ZyZWQnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfKCdmcmVkJykuY2FwaXRhbGl6ZSgpLnZhbHVlKCk7XHJcbiAgICAgICAgICogLy8gPT4gJ0ZyZWQnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm1peGluKHsgJ2NhcGl0YWxpemUnOiBjYXBpdGFsaXplIH0sIHsgJ2NoYWluJzogZmFsc2UgfSk7XHJcbiAgICAgICAgICogXygnZnJlZCcpLmNhcGl0YWxpemUoKTtcclxuICAgICAgICAgKiAvLyA9PiAnRnJlZCdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWl4aW4ob2JqZWN0LCBzb3VyY2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIGNoYWluID0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZE5hbWVzID0gc291cmNlICYmIGZ1bmN0aW9ucyhzb3VyY2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzb3VyY2UgfHwgKCFvcHRpb25zICYmICFtZXRob2ROYW1lcy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN0b3IgPSBsb2Rhc2hXcmFwcGVyO1xyXG4gICAgICAgICAgICAgICAgc291cmNlID0gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gbG9kYXNoO1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kTmFtZXMgPSBmdW5jdGlvbnMoc291cmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGNoYWluID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykgJiYgJ2NoYWluJyBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFpbiA9IG9wdGlvbnMuY2hhaW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGN0b3IgPSBvYmplY3QsXHJcbiAgICAgICAgICAgICAgICBpc0Z1bmMgPSBpc0Z1bmN0aW9uKGN0b3IpO1xyXG5cclxuICAgICAgICAgICAgZm9yRWFjaChtZXRob2ROYW1lcywgZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmdW5jID0gb2JqZWN0W21ldGhvZE5hbWVdID0gc291cmNlW21ldGhvZE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhaW5BbGwgPSB0aGlzLl9fY2hhaW5fXyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fX3dyYXBwZWRfXyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBbdmFsdWVdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseShvYmplY3QsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhaW4gfHwgY2hhaW5BbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gcmVzdWx0ICYmIGlzT2JqZWN0KHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBjdG9yKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX19jaGFpbl9fID0gY2hhaW5BbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldmVydHMgdGhlICdfJyB2YXJpYWJsZSB0byBpdHMgcHJldmlvdXMgdmFsdWUgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG9cclxuICAgICAgICAgKiB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGxvZGFzaCA9IF8ubm9Db25mbGljdCgpO1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xyXG4gICAgICAgICAgICBjb250ZXh0Ll8gPSBvbGREYXNoO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbm8tb3BlcmF0aW9uIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdmcmVkJyB9O1xyXG4gICAgICAgICAqIF8ubm9vcChvYmplY3QpID09PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBub29wKCkge1xyXG4gICAgICAgICAgICAvLyBubyBvcGVyYXRpb24gcGVyZm9ybWVkXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBVbml4IGVwb2NoXHJcbiAgICAgICAgICogKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBzdGFtcCA9IF8ubm93KCk7XHJcbiAgICAgICAgICogXy5kZWZlcihmdW5jdGlvbigpIHsgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTsgfSk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIG5vdyA9IGlzTmF0aXZlKG5vdyA9IERhdGUubm93KSAmJiBub3cgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udmVydHMgdGhlIGdpdmVuIHZhbHVlIGludG8gYW4gaW50ZWdlciBvZiB0aGUgc3BlY2lmaWVkIHJhZGl4LlxyXG4gICAgICAgICAqIElmIGByYWRpeGAgaXMgYHVuZGVmaW5lZGAgb3IgYDBgIGEgYHJhZGl4YCBvZiBgMTBgIGlzIHVzZWQgdW5sZXNzIHRoZVxyXG4gICAgICAgICAqIGB2YWx1ZWAgaXMgYSBoZXhhZGVjaW1hbCwgaW4gd2hpY2ggY2FzZSBhIGByYWRpeGAgb2YgYDE2YCBpcyB1c2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogVGhpcyBtZXRob2QgYXZvaWRzIGRpZmZlcmVuY2VzIGluIG5hdGl2ZSBFUzMgYW5kIEVTNSBgcGFyc2VJbnRgXHJcbiAgICAgICAgICogaW1wbGVtZW50YXRpb25zLiBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI0UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXJzZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JhZGl4XSBUaGUgcmFkaXggdXNlZCB0byBpbnRlcnByZXQgdGhlIHZhbHVlIHRvIHBhcnNlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG5ldyBpbnRlZ2VyIHZhbHVlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnBhcnNlSW50KCcwOCcpO1xyXG4gICAgICAgICAqIC8vID0+IDhcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgcGFyc2VJbnQgPSBuYXRpdmVQYXJzZUludCh3aGl0ZXNwYWNlICsgJzA4JykgPT0gOCA/IG5hdGl2ZVBhcnNlSW50IDogZnVuY3Rpb24gKHZhbHVlLCByYWRpeCkge1xyXG4gICAgICAgICAgICAvLyBGaXJlZm94IDwgMjEgYW5kIE9wZXJhIDwgMTUgZm9sbG93IHRoZSBFUzMgc3BlY2lmaWVkIGltcGxlbWVudGF0aW9uIG9mIGBwYXJzZUludGBcclxuICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZVBhcnNlSW50KGlzU3RyaW5nKHZhbHVlKSA/IHZhbHVlLnJlcGxhY2UocmVMZWFkaW5nU3BhY2VzQW5kWmVyb3MsICcnKSA6IHZhbHVlLCByYWRpeCB8fCAwKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgXCJfLnBsdWNrXCIgc3R5bGUgZnVuY3Rpb24sIHdoaWNoIHJldHVybnMgdGhlIGBrZXlgIHZhbHVlIG9mIGFcclxuICAgICAgICAgKiBnaXZlbiBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmV0cmlldmUuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGdldE5hbWUgPSBfLnByb3BlcnR5KCduYW1lJyk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm1hcChjaGFyYWN0ZXJzLCBnZXROYW1lKTtcclxuICAgICAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc29ydEJ5KGNoYXJhY3RlcnMsIGdldE5hbWUpO1xyXG4gICAgICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LCB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBwcm9wZXJ0eShrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Rba2V5XTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb2R1Y2VzIGEgcmFuZG9tIG51bWJlciBiZXR3ZWVuIGBtaW5gIGFuZCBgbWF4YCAoaW5jbHVzaXZlKS4gSWYgb25seSBvbmVcclxuICAgICAgICAgKiBhcmd1bWVudCBpcyBwcm92aWRlZCBhIG51bWJlciBiZXR3ZWVuIGAwYCBhbmQgdGhlIGdpdmVuIG51bWJlciB3aWxsIGJlXHJcbiAgICAgICAgICogcmV0dXJuZWQuIElmIGBmbG9hdGluZ2AgaXMgdHJ1ZXkgb3IgZWl0aGVyIGBtaW5gIG9yIGBtYXhgIGFyZSBmbG9hdHMgYVxyXG4gICAgICAgICAqIGZsb2F0aW5nLXBvaW50IG51bWJlciB3aWxsIGJlIHJldHVybmVkIGluc3RlYWQgb2YgYW4gaW50ZWdlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbj0wXSBUaGUgbWluaW11bSBwb3NzaWJsZSB2YWx1ZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW21heD0xXSBUaGUgbWF4aW11bSBwb3NzaWJsZSB2YWx1ZS5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmbG9hdGluZz1mYWxzZV0gU3BlY2lmeSByZXR1cm5pbmcgYSBmbG9hdGluZy1wb2ludCBudW1iZXIuXHJcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBhIHJhbmRvbSBudW1iZXIuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmFuZG9tKDAsIDUpO1xyXG4gICAgICAgICAqIC8vID0+IGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmRvbSg1KTtcclxuICAgICAgICAgKiAvLyA9PiBhbHNvIGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmRvbSg1LCB0cnVlKTtcclxuICAgICAgICAgKiAvLyA9PiBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBiZXR3ZWVuIDAgYW5kIDVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmFuZG9tKDEuMiwgNS4yKTtcclxuICAgICAgICAgKiAvLyA9PiBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBiZXR3ZWVuIDEuMiBhbmQgNS4yXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJhbmRvbShtaW4sIG1heCwgZmxvYXRpbmcpIHtcclxuICAgICAgICAgICAgdmFyIG5vTWluID0gbWluID09IG51bGwsXHJcbiAgICAgICAgICAgICAgICBub01heCA9IG1heCA9PSBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZsb2F0aW5nID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluID09ICdib29sZWFuJyAmJiBub01heCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nID0gbWluO1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFub01heCAmJiB0eXBlb2YgbWF4ID09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nID0gbWF4O1xyXG4gICAgICAgICAgICAgICAgICAgIG5vTWF4ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobm9NaW4gJiYgbm9NYXgpIHtcclxuICAgICAgICAgICAgICAgIG1heCA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWluID0gK21pbiB8fCAwO1xyXG4gICAgICAgICAgICBpZiAobm9NYXgpIHtcclxuICAgICAgICAgICAgICAgIG1heCA9IG1pbjtcclxuICAgICAgICAgICAgICAgIG1pbiA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXggPSArbWF4IHx8IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZsb2F0aW5nIHx8IG1pbiAlIDEgfHwgbWF4ICUgMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJhbmQgPSBuYXRpdmVSYW5kb20oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVNaW4obWluICsgKHJhbmQgKiAobWF4IC0gbWluICsgcGFyc2VGbG9hdCgnMWUtJyArICgocmFuZCArICcnKS5sZW5ndGggLSAxKSkpKSwgbWF4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZVJhbmRvbShtaW4sIG1heCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXNvbHZlcyB0aGUgdmFsdWUgb2YgcHJvcGVydHkgYGtleWAgb24gYG9iamVjdGAuIElmIGBrZXlgIGlzIGEgZnVuY3Rpb25cclxuICAgICAgICAgKiBpdCB3aWxsIGJlIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYG9iamVjdGAgYW5kIGl0cyByZXN1bHQgcmV0dXJuZWQsXHJcbiAgICAgICAgICogZWxzZSB0aGUgcHJvcGVydHkgdmFsdWUgaXMgcmV0dXJuZWQuIElmIGBvYmplY3RgIGlzIGZhbHNleSB0aGVuIGB1bmRlZmluZWRgXHJcbiAgICAgICAgICogaXMgcmV0dXJuZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmVzb2x2ZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBvYmplY3QgPSB7XHJcbiAgICAgICAgICogICAnY2hlZXNlJzogJ2NydW1wZXRzJyxcclxuICAgICAgICAgKiAgICdzdHVmZic6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAqICAgICByZXR1cm4gJ25vbnNlbnNlJztcclxuICAgICAgICAgKiAgIH1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yZXN1bHQob2JqZWN0LCAnY2hlZXNlJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ2NydW1wZXRzJ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yZXN1bHQob2JqZWN0LCAnc3R1ZmYnKTtcclxuICAgICAgICAgKiAvLyA9PiAnbm9uc2Vuc2UnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc3VsdChvYmplY3QsIGtleSkge1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlKSA/IG9iamVjdFtrZXldKCkgOiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBtaWNyby10ZW1wbGF0aW5nIG1ldGhvZCB0aGF0IGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlc1xyXG4gICAgICAgICAqIHdoaXRlc3BhY2UsIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogSW4gdGhlIGRldmVsb3BtZW50IGJ1aWxkLCBgXy50ZW1wbGF0ZWAgdXRpbGl6ZXMgc291cmNlVVJMcyBmb3IgZWFzaWVyXHJcbiAgICAgICAgICogZGVidWdnaW5nLiBTZWUgaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZGV2ZWxvcGVydG9vbHMvc291cmNlbWFwcy8jdG9jLXNvdXJjZXVybFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gcHJlY29tcGlsaW5nIHRlbXBsYXRlcyBzZWU6XHJcbiAgICAgICAgICogaHR0cDovL2xvZGFzaC5jb20vY3VzdG9tLWJ1aWxkc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gQ2hyb21lIGV4dGVuc2lvbiBzYW5kYm94ZXMgc2VlOlxyXG4gICAgICAgICAqIGh0dHA6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9zdGFibGUvZXh0ZW5zaW9ucy9zYW5kYm94aW5nRXZhbC5odG1sXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHRlbXBsYXRlIHRleHQuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgVGhlIGRhdGEgb2JqZWN0IHVzZWQgdG8gcG9wdWxhdGUgdGhlIHRleHQuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmVzY2FwZV0gVGhlIFwiZXNjYXBlXCIgZGVsaW1pdGVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5ldmFsdWF0ZV0gVGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmltcG9ydHNdIEFuIG9iamVjdCB0byBpbXBvcnQgaW50byB0aGUgdGVtcGxhdGUgYXMgbG9jYWwgdmFyaWFibGVzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5pbnRlcnBvbGF0ZV0gVGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtzb3VyY2VVUkxdIFRoZSBzb3VyY2VVUkwgb2YgdGhlIHRlbXBsYXRlJ3MgY29tcGlsZWQgc291cmNlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFyaWFibGVdIFRoZSBkYXRhIG9iamVjdCB2YXJpYWJsZSBuYW1lLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbnxzdHJpbmd9IFJldHVybnMgYSBjb21waWxlZCBmdW5jdGlvbiB3aGVuIG5vIGBkYXRhYCBvYmplY3RcclxuICAgICAgICAgKiAgaXMgZ2l2ZW4sIGVsc2UgaXQgcmV0dXJucyB0aGUgaW50ZXJwb2xhdGVkIHRleHQuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIHRoZSBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyIHRvIGNyZWF0ZSBhIGNvbXBpbGVkIHRlbXBsYXRlXHJcbiAgICAgICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gPCU9IG5hbWUgJT4nKTtcclxuICAgICAgICAgKiBjb21waWxlZCh7ICduYW1lJzogJ2ZyZWQnIH0pO1xyXG4gICAgICAgICAqIC8vID0+ICdoZWxsbyBmcmVkJ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgdGhlIFwiZXNjYXBlXCIgZGVsaW1pdGVyIHRvIGVzY2FwZSBIVE1MIGluIGRhdGEgcHJvcGVydHkgdmFsdWVzXHJcbiAgICAgICAgICogXy50ZW1wbGF0ZSgnPGI+PCUtIHZhbHVlICU+PC9iPicsIHsgJ3ZhbHVlJzogJzxzY3JpcHQ+JyB9KTtcclxuICAgICAgICAgKiAvLyA9PiAnPGI+Jmx0O3NjcmlwdCZndDs8L2I+J1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgdGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIgdG8gZ2VuZXJhdGUgSFRNTFxyXG4gICAgICAgICAqIHZhciBsaXN0ID0gJzwlIF8uZm9yRWFjaChwZW9wbGUsIGZ1bmN0aW9uKG5hbWUpIHsgJT48bGk+PCUtIG5hbWUgJT48L2xpPjwlIH0pOyAlPic7XHJcbiAgICAgICAgICogXy50ZW1wbGF0ZShsaXN0LCB7ICdwZW9wbGUnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XHJcbiAgICAgICAgICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyB0aGUgRVM2IGRlbGltaXRlciBhcyBhbiBhbHRlcm5hdGl2ZSB0byB0aGUgZGVmYXVsdCBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyXHJcbiAgICAgICAgICogXy50ZW1wbGF0ZSgnaGVsbG8gJHsgbmFtZSB9JywgeyAnbmFtZSc6ICdwZWJibGVzJyB9KTtcclxuICAgICAgICAgKiAvLyA9PiAnaGVsbG8gcGViYmxlcydcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIHRoZSBpbnRlcm5hbCBgcHJpbnRgIGZ1bmN0aW9uIGluIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXJzXHJcbiAgICAgICAgICogXy50ZW1wbGF0ZSgnPCUgcHJpbnQoXCJoZWxsbyBcIiArIG5hbWUpOyAlPiEnLCB7ICduYW1lJzogJ2Jhcm5leScgfSk7XHJcbiAgICAgICAgICogLy8gPT4gJ2hlbGxvIGJhcm5leSEnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBhIGN1c3RvbSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzXHJcbiAgICAgICAgICogXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xyXG4gICAgICAgICAqICAgJ2ludGVycG9sYXRlJzogL3t7KFtcXHNcXFNdKz8pfX0vZ1xyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnRlbXBsYXRlKCdoZWxsbyB7eyBuYW1lIH19IScsIHsgJ25hbWUnOiAnbXVzdGFjaGUnIH0pO1xyXG4gICAgICAgICAqIC8vID0+ICdoZWxsbyBtdXN0YWNoZSEnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyB0aGUgYGltcG9ydHNgIG9wdGlvbiB0byBpbXBvcnQgalF1ZXJ5XHJcbiAgICAgICAgICogdmFyIGxpc3QgPSAnPCUganEuZWFjaChwZW9wbGUsIGZ1bmN0aW9uKG5hbWUpIHsgJT48bGk+PCUtIG5hbWUgJT48L2xpPjwlIH0pOyAlPic7XHJcbiAgICAgICAgICogXy50ZW1wbGF0ZShsaXN0LCB7ICdwZW9wbGUnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSwgeyAnaW1wb3J0cyc6IHsgJ2pxJzogalF1ZXJ5IH0gfSk7XHJcbiAgICAgICAgICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyB0aGUgYHNvdXJjZVVSTGAgb3B0aW9uIHRvIHNwZWNpZnkgYSBjdXN0b20gc291cmNlVVJMIGZvciB0aGUgdGVtcGxhdGVcclxuICAgICAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyA8JT0gbmFtZSAlPicsIG51bGwsIHsgJ3NvdXJjZVVSTCc6ICcvYmFzaWMvZ3JlZXRpbmcuanN0JyB9KTtcclxuICAgICAgICAgKiBjb21waWxlZChkYXRhKTtcclxuICAgICAgICAgKiAvLyA9PiBmaW5kIHRoZSBzb3VyY2Ugb2YgXCJncmVldGluZy5qc3RcIiB1bmRlciB0aGUgU291cmNlcyB0YWIgb3IgUmVzb3VyY2VzIHBhbmVsIG9mIHRoZSB3ZWIgaW5zcGVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyB0aGUgYHZhcmlhYmxlYCBvcHRpb24gdG8gZW5zdXJlIGEgd2l0aC1zdGF0ZW1lbnQgaXNuJ3QgdXNlZCBpbiB0aGUgY29tcGlsZWQgdGVtcGxhdGVcclxuICAgICAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoaSA8JT0gZGF0YS5uYW1lICU+IScsIG51bGwsIHsgJ3ZhcmlhYmxlJzogJ2RhdGEnIH0pO1xyXG4gICAgICAgICAqIGNvbXBpbGVkLnNvdXJjZTtcclxuICAgICAgICAgKiAvLyA9PiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICogICB2YXIgX190LCBfX3AgPSAnJywgX19lID0gXy5lc2NhcGU7XHJcbiAgICAgICAgICogICBfX3AgKz0gJ2hpICcgKyAoKF9fdCA9ICggZGF0YS5uYW1lICkpID09IG51bGwgPyAnJyA6IF9fdCkgKyAnISc7XHJcbiAgICAgICAgICogICByZXR1cm4gX19wO1xyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIHRoZSBgc291cmNlYCBwcm9wZXJ0eSB0byBpbmxpbmUgY29tcGlsZWQgdGVtcGxhdGVzIGZvciBtZWFuaW5nZnVsXHJcbiAgICAgICAgICogLy8gbGluZSBudW1iZXJzIGluIGVycm9yIG1lc3NhZ2VzIGFuZCBhIHN0YWNrIHRyYWNlXHJcbiAgICAgICAgICogZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4oY3dkLCAnanN0LmpzJyksICdcXFxyXG4gICAgICAgICAqICAgdmFyIEpTVCA9IHtcXFxyXG4gICAgICAgICAqICAgICBcIm1haW5cIjogJyArIF8udGVtcGxhdGUobWFpblRleHQpLnNvdXJjZSArICdcXFxyXG4gICAgICAgICAqICAgfTtcXFxyXG4gICAgICAgICAqICcpO1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB0ZW1wbGF0ZSh0ZXh0LCBkYXRhLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIC8vIGJhc2VkIG9uIEpvaG4gUmVzaWcncyBgdG1wbGAgaW1wbGVtZW50YXRpb25cclxuICAgICAgICAgICAgLy8gaHR0cDovL2Vqb2huLm9yZy9ibG9nL2phdmFzY3JpcHQtbWljcm8tdGVtcGxhdGluZy9cclxuICAgICAgICAgICAgLy8gYW5kIExhdXJhIERva3Rvcm92YSdzIGRvVC5qc1xyXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vb2xhZG8vZG9UXHJcbiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGxvZGFzaC50ZW1wbGF0ZVNldHRpbmdzO1xyXG4gICAgICAgICAgICB0ZXh0ID0gU3RyaW5nKHRleHQgfHwgJycpO1xyXG5cclxuICAgICAgICAgICAgLy8gYXZvaWQgbWlzc2luZyBkZXBlbmRlbmNpZXMgd2hlbiBgaXRlcmF0b3JUZW1wbGF0ZWAgaXMgbm90IGRlZmluZWRcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKHt9LCBvcHRpb25zLCBzZXR0aW5ncyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1wb3J0cyA9IGRlZmF1bHRzKHt9LCBvcHRpb25zLmltcG9ydHMsIHNldHRpbmdzLmltcG9ydHMpLFxyXG4gICAgICAgICAgICAgICAgaW1wb3J0c0tleXMgPSBrZXlzKGltcG9ydHMpLFxyXG4gICAgICAgICAgICAgICAgaW1wb3J0c1ZhbHVlcyA9IHZhbHVlcyhpbXBvcnRzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpc0V2YWx1YXRpbmcsXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IDAsXHJcbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZSA9IG9wdGlvbnMuaW50ZXJwb2xhdGUgfHwgcmVOb01hdGNoLFxyXG4gICAgICAgICAgICAgICAgc291cmNlID0gXCJfX3AgKz0gJ1wiO1xyXG5cclxuICAgICAgICAgICAgLy8gY29tcGlsZSB0aGUgcmVnZXhwIHRvIG1hdGNoIGVhY2ggZGVsaW1pdGVyXHJcbiAgICAgICAgICAgIHZhciByZURlbGltaXRlcnMgPSBSZWdFeHAoXHJcbiAgICAgICAgICAgICAgICAob3B0aW9ucy5lc2NhcGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCcgK1xyXG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGUuc291cmNlICsgJ3wnICtcclxuICAgICAgICAgICAgICAgIChpbnRlcnBvbGF0ZSA9PT0gcmVJbnRlcnBvbGF0ZSA/IHJlRXNUZW1wbGF0ZSA6IHJlTm9NYXRjaCkuc291cmNlICsgJ3wnICtcclxuICAgICAgICAgICAgICAgIChvcHRpb25zLmV2YWx1YXRlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgJ3wkJywgJ2cnKTtcclxuXHJcbiAgICAgICAgICAgIHRleHQucmVwbGFjZShyZURlbGltaXRlcnMsIGZ1bmN0aW9uIChtYXRjaCwgZXNjYXBlVmFsdWUsIGludGVycG9sYXRlVmFsdWUsIGVzVGVtcGxhdGVWYWx1ZSwgZXZhbHVhdGVWYWx1ZSwgb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZVZhbHVlIHx8IChpbnRlcnBvbGF0ZVZhbHVlID0gZXNUZW1wbGF0ZVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2NhcGUgY2hhcmFjdGVycyB0aGF0IGNhbm5vdCBiZSBpbmNsdWRlZCBpbiBzdHJpbmcgbGl0ZXJhbHNcclxuICAgICAgICAgICAgICAgIHNvdXJjZSArPSB0ZXh0LnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UocmVVbmVzY2FwZWRTdHJpbmcsIGVzY2FwZVN0cmluZ0NoYXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgZGVsaW1pdGVycyB3aXRoIHNuaXBwZXRzXHJcbiAgICAgICAgICAgICAgICBpZiAoZXNjYXBlVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgKz0gXCInICtcXG5fX2UoXCIgKyBlc2NhcGVWYWx1ZSArIFwiKSArXFxuJ1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGV2YWx1YXRlVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc0V2YWx1YXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZVZhbHVlICsgXCI7XFxuX19wICs9ICdcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnBvbGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlICs9IFwiJyArXFxuKChfX3QgPSAoXCIgKyBpbnRlcnBvbGF0ZVZhbHVlICsgXCIpKSA9PSBudWxsID8gJycgOiBfX3QpICtcXG4nXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIHByb2R1Y3RzIHJlcXVpcmVzIHJldHVybmluZyB0aGUgYG1hdGNoYFxyXG4gICAgICAgICAgICAgICAgLy8gc3RyaW5nIGluIG9yZGVyIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3QgYG9mZnNldGAgdmFsdWVcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgYHZhcmlhYmxlYCBpcyBub3Qgc3BlY2lmaWVkLCB3cmFwIGEgd2l0aC1zdGF0ZW1lbnQgYXJvdW5kIHRoZSBnZW5lcmF0ZWRcclxuICAgICAgICAgICAgLy8gY29kZSB0byBhZGQgdGhlIGRhdGEgb2JqZWN0IHRvIHRoZSB0b3Agb2YgdGhlIHNjb3BlIGNoYWluXHJcbiAgICAgICAgICAgIHZhciB2YXJpYWJsZSA9IG9wdGlvbnMudmFyaWFibGUsXHJcbiAgICAgICAgICAgICAgICBoYXNWYXJpYWJsZSA9IHZhcmlhYmxlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFoYXNWYXJpYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyaWFibGUgPSAnb2JqJztcclxuICAgICAgICAgICAgICAgIHNvdXJjZSA9ICd3aXRoICgnICsgdmFyaWFibGUgKyAnKSB7XFxuJyArIHNvdXJjZSArICdcXG59XFxuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjbGVhbnVwIGNvZGUgYnkgc3RyaXBwaW5nIGVtcHR5IHN0cmluZ3NcclxuICAgICAgICAgICAgc291cmNlID0gKGlzRXZhbHVhdGluZyA/IHNvdXJjZS5yZXBsYWNlKHJlRW1wdHlTdHJpbmdMZWFkaW5nLCAnJykgOiBzb3VyY2UpXHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShyZUVtcHR5U3RyaW5nTWlkZGxlLCAnJDEnKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ1RyYWlsaW5nLCAnJDE7Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBmcmFtZSBjb2RlIGFzIHRoZSBmdW5jdGlvbiBib2R5XHJcbiAgICAgICAgICAgIHNvdXJjZSA9ICdmdW5jdGlvbignICsgdmFyaWFibGUgKyAnKSB7XFxuJyArXHJcbiAgICAgICAgICAgICAgICAoaGFzVmFyaWFibGUgPyAnJyA6IHZhcmlhYmxlICsgJyB8fCAoJyArIHZhcmlhYmxlICsgJyA9IHt9KTtcXG4nKSArXHJcbiAgICAgICAgICAgICAgICBcInZhciBfX3QsIF9fcCA9ICcnLCBfX2UgPSBfLmVzY2FwZVwiICtcclxuICAgICAgICAgICAgICAgIChpc0V2YWx1YXRpbmcgPyAnLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcXG4nICtcclxuICAgICAgICAgICAgICAgIFwiZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XFxuXCIgOiAnO1xcbidcclxuICAgICAgICAgICAgKSArXHJcbiAgICAgICAgICAgICAgICBzb3VyY2UgK1xyXG4gICAgICAgICAgICAgICAgJ3JldHVybiBfX3BcXG59JztcclxuXHJcbiAgICAgICAgICAgIC8vIFVzZSBhIHNvdXJjZVVSTCBmb3IgZWFzaWVyIGRlYnVnZ2luZy5cclxuICAgICAgICAgICAgLy8gaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZGV2ZWxvcGVydG9vbHMvc291cmNlbWFwcy8jdG9jLXNvdXJjZXVybFxyXG4gICAgICAgICAgICB2YXIgc291cmNlVVJMID0gJ1xcbi8qXFxuLy8jIHNvdXJjZVVSTD0nICsgKG9wdGlvbnMuc291cmNlVVJMIHx8ICcvbG9kYXNoL3RlbXBsYXRlL3NvdXJjZVsnICsgKHRlbXBsYXRlQ291bnRlcisrKSArICddJykgKyAnXFxuKi8nO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBGdW5jdGlvbihpbXBvcnRzS2V5cywgJ3JldHVybiAnICsgc291cmNlICsgc291cmNlVVJMKS5hcHBseSh1bmRlZmluZWQsIGltcG9ydHNWYWx1ZXMpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQoZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcHJvdmlkZSB0aGUgY29tcGlsZWQgZnVuY3Rpb24ncyBzb3VyY2UgYnkgaXRzIGB0b1N0cmluZ2AgbWV0aG9kLCBpblxyXG4gICAgICAgICAgICAvLyBzdXBwb3J0ZWQgZW52aXJvbm1lbnRzLCBvciB0aGUgYHNvdXJjZWAgcHJvcGVydHkgYXMgYSBjb252ZW5pZW5jZSBmb3JcclxuICAgICAgICAgICAgLy8gaW5saW5pbmcgY29tcGlsZWQgdGVtcGxhdGVzIGR1cmluZyB0aGUgYnVpbGQgcHJvY2Vzc1xyXG4gICAgICAgICAgICByZXN1bHQuc291cmNlID0gc291cmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXhlY3V0ZXMgdGhlIGNhbGxiYWNrIGBuYCB0aW1lcywgcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzXHJcbiAgICAgICAgICogb2YgZWFjaCBjYWxsYmFjayBleGVjdXRpb24uIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcclxuICAgICAgICAgKiB3aXRoIG9uZSBhcmd1bWVudDsgKGluZGV4KS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGV4ZWN1dGUgdGhlIGNhbGxiYWNrLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBgY2FsbGJhY2tgIGV4ZWN1dGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGRpY2VSb2xscyA9IF8udGltZXMoMywgXy5wYXJ0aWFsKF8ucmFuZG9tLCAxLCA2KSk7XHJcbiAgICAgICAgICogLy8gPT4gWzMsIDYsIDRdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnRpbWVzKDMsIGZ1bmN0aW9uKG4pIHsgbWFnZS5jYXN0U3BlbGwobik7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IGNhbGxzIGBtYWdlLmNhc3RTcGVsbChuKWAgdGhyZWUgdGltZXMsIHBhc3NpbmcgYG5gIG9mIGAwYCwgYDFgLCBhbmQgYDJgIHJlc3BlY3RpdmVseVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy50aW1lcygzLCBmdW5jdGlvbihuKSB7IHRoaXMuY2FzdChuKTsgfSwgbWFnZSk7XHJcbiAgICAgICAgICogLy8gPT4gYWxzbyBjYWxscyBgbWFnZS5jYXN0U3BlbGwobilgIHRocmVlIHRpbWVzXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRpbWVzKG4sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIG4gPSAobiA9ICtuKSA+IC0xID8gbiA6IDA7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkobik7XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMSk7XHJcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGNhbGxiYWNrKGluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGludmVyc2Ugb2YgYF8uZXNjYXBlYCB0aGlzIG1ldGhvZCBjb252ZXJ0cyB0aGUgSFRNTCBlbnRpdGllc1xyXG4gICAgICAgICAqIGAmYW1wO2AsIGAmbHQ7YCwgYCZndDtgLCBgJnF1b3Q7YCwgYW5kIGAmIzM5O2AgaW4gYHN0cmluZ2AgdG8gdGhlaXJcclxuICAgICAgICAgKiBjb3JyZXNwb25kaW5nIGNoYXJhY3RlcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIHVuZXNjYXBlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBzdHJpbmcuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8udW5lc2NhcGUoJ0ZyZWQsIEJhcm5leSAmYW1wOyBQZWJibGVzJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ0ZyZWQsIEJhcm5leSAmIFBlYmJsZXMnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVuZXNjYXBlKHN0cmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID09IG51bGwgPyAnJyA6IFN0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVFc2NhcGVkSHRtbCwgdW5lc2NhcGVIdG1sQ2hhcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZW5lcmF0ZXMgYSB1bmlxdWUgSUQuIElmIGBwcmVmaXhgIGlzIHByb3ZpZGVkIHRoZSBJRCB3aWxsIGJlIGFwcGVuZGVkIHRvIGl0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJlZml4XSBUaGUgdmFsdWUgdG8gcHJlZml4IHRoZSBJRCB3aXRoLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuaXF1ZSBJRC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy51bmlxdWVJZCgnY29udGFjdF8nKTtcclxuICAgICAgICAgKiAvLyA9PiAnY29udGFjdF8xMDQnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnVuaXF1ZUlkKCk7XHJcbiAgICAgICAgICogLy8gPT4gJzEwNSdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdW5pcXVlSWQocHJlZml4KSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9ICsraWRDb3VudGVyO1xyXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHByZWZpeCA9PSBudWxsID8gJycgOiBwcmVmaXgpICsgaWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIG9iamVjdCB0aGF0IHdyYXBzIHRoZSBnaXZlbiB2YWx1ZSB3aXRoIGV4cGxpY2l0XHJcbiAgICAgICAgICogbWV0aG9kIGNoYWluaW5nIGVuYWJsZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHdyYXBwZXIgb2JqZWN0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciB5b3VuZ2VzdCA9IF8uY2hhaW4oY2hhcmFjdGVycylcclxuICAgICAgICAgKiAgICAgLnNvcnRCeSgnYWdlJylcclxuICAgICAgICAgKiAgICAgLm1hcChmdW5jdGlvbihjaHIpIHsgcmV0dXJuIGNoci5uYW1lICsgJyBpcyAnICsgY2hyLmFnZTsgfSlcclxuICAgICAgICAgKiAgICAgLmZpcnN0KClcclxuICAgICAgICAgKiAgICAgLnZhbHVlKCk7XHJcbiAgICAgICAgICogLy8gPT4gJ3BlYmJsZXMgaXMgMSdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2hhaW4odmFsdWUpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBuZXcgbG9kYXNoV3JhcHBlcih2YWx1ZSk7XHJcbiAgICAgICAgICAgIHZhbHVlLl9fY2hhaW5fXyA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEludm9rZXMgYGludGVyY2VwdG9yYCB3aXRoIHRoZSBgdmFsdWVgIGFzIHRoZSBmaXJzdCBhcmd1bWVudCBhbmQgdGhlblxyXG4gICAgICAgICAqIHJldHVybnMgYHZhbHVlYC4gVGhlIHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gXCJ0YXAgaW50b1wiIGEgbWV0aG9kXHJcbiAgICAgICAgICogY2hhaW4gaW4gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpblxyXG4gICAgICAgICAqIHRoZSBjaGFpbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb3ZpZGUgdG8gYGludGVyY2VwdG9yYC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbnRlcmNlcHRvciBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8oWzEsIDIsIDMsIDRdKVxyXG4gICAgICAgICAqICAudGFwKGZ1bmN0aW9uKGFycmF5KSB7IGFycmF5LnBvcCgpOyB9KVxyXG4gICAgICAgICAqICAucmV2ZXJzZSgpXHJcbiAgICAgICAgICogIC52YWx1ZSgpO1xyXG4gICAgICAgICAqIC8vID0+IFszLCAyLCAxXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB0YXAodmFsdWUsIGludGVyY2VwdG9yKSB7XHJcbiAgICAgICAgICAgIGludGVyY2VwdG9yKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRW5hYmxlcyBleHBsaWNpdCBtZXRob2QgY2hhaW5pbmcgb24gdGhlIHdyYXBwZXIgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQG5hbWUgY2hhaW5cclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB3cmFwcGVyIG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB3aXRob3V0IGV4cGxpY2l0IGNoYWluaW5nXHJcbiAgICAgICAgICogXyhjaGFyYWN0ZXJzKS5maXJzdCgpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHdpdGggZXhwbGljaXQgY2hhaW5pbmdcclxuICAgICAgICAgKiBfKGNoYXJhY3RlcnMpLmNoYWluKClcclxuICAgICAgICAgKiAgIC5maXJzdCgpXHJcbiAgICAgICAgICogICAucGljaygnYWdlJylcclxuICAgICAgICAgKiAgIC52YWx1ZSgpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2FnZSc6IDM2IH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JhcHBlckNoYWluKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9fY2hhaW5fXyA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvZHVjZXMgdGhlIGB0b1N0cmluZ2AgcmVzdWx0IG9mIHRoZSB3cmFwcGVkIHZhbHVlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQG5hbWUgdG9TdHJpbmdcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZyByZXN1bHQuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8oWzEsIDIsIDNdKS50b1N0cmluZygpO1xyXG4gICAgICAgICAqIC8vID0+ICcxLDIsMydcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JhcHBlclRvU3RyaW5nKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHRoaXMuX193cmFwcGVkX18pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXh0cmFjdHMgdGhlIHdyYXBwZWQgdmFsdWUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAbmFtZSB2YWx1ZU9mXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgdmFsdWVcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgd3JhcHBlZCB2YWx1ZS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXyhbMSwgMiwgM10pLnZhbHVlT2YoKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMiwgM11cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JhcHBlclZhbHVlT2YoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fd3JhcHBlZF9fO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIC8vIGFkZCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gd3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZ1xyXG4gICAgICAgIGxvZGFzaC5hZnRlciA9IGFmdGVyO1xyXG4gICAgICAgIGxvZGFzaC5hc3NpZ24gPSBhc3NpZ247XHJcbiAgICAgICAgbG9kYXNoLmF0ID0gYXQ7XHJcbiAgICAgICAgbG9kYXNoLmJpbmQgPSBiaW5kO1xyXG4gICAgICAgIGxvZGFzaC5iaW5kQWxsID0gYmluZEFsbDtcclxuICAgICAgICBsb2Rhc2guYmluZEtleSA9IGJpbmRLZXk7XHJcbiAgICAgICAgbG9kYXNoLmNoYWluID0gY2hhaW47XHJcbiAgICAgICAgbG9kYXNoLmNvbXBhY3QgPSBjb21wYWN0O1xyXG4gICAgICAgIGxvZGFzaC5jb21wb3NlID0gY29tcG9zZTtcclxuICAgICAgICBsb2Rhc2guY29uc3RhbnQgPSBjb25zdGFudDtcclxuICAgICAgICBsb2Rhc2guY291bnRCeSA9IGNvdW50Qnk7XHJcbiAgICAgICAgbG9kYXNoLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICAgICAgICBsb2Rhc2guY3JlYXRlQ2FsbGJhY2sgPSBjcmVhdGVDYWxsYmFjaztcclxuICAgICAgICBsb2Rhc2guY3VycnkgPSBjdXJyeTtcclxuICAgICAgICBsb2Rhc2guZGVib3VuY2UgPSBkZWJvdW5jZTtcclxuICAgICAgICBsb2Rhc2guZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgICBsb2Rhc2guZGVmZXIgPSBkZWZlcjtcclxuICAgICAgICBsb2Rhc2guZGVsYXkgPSBkZWxheTtcclxuICAgICAgICBsb2Rhc2guZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XHJcbiAgICAgICAgbG9kYXNoLmZpbHRlciA9IGZpbHRlcjtcclxuICAgICAgICBsb2Rhc2guZmxhdHRlbiA9IGZsYXR0ZW47XHJcbiAgICAgICAgbG9kYXNoLmZvckVhY2ggPSBmb3JFYWNoO1xyXG4gICAgICAgIGxvZGFzaC5mb3JFYWNoUmlnaHQgPSBmb3JFYWNoUmlnaHQ7XHJcbiAgICAgICAgbG9kYXNoLmZvckluID0gZm9ySW47XHJcbiAgICAgICAgbG9kYXNoLmZvckluUmlnaHQgPSBmb3JJblJpZ2h0O1xyXG4gICAgICAgIGxvZGFzaC5mb3JPd24gPSBmb3JPd247XHJcbiAgICAgICAgbG9kYXNoLmZvck93blJpZ2h0ID0gZm9yT3duUmlnaHQ7XHJcbiAgICAgICAgbG9kYXNoLmZ1bmN0aW9ucyA9IGZ1bmN0aW9ucztcclxuICAgICAgICBsb2Rhc2guZ3JvdXBCeSA9IGdyb3VwQnk7XHJcbiAgICAgICAgbG9kYXNoLmluZGV4QnkgPSBpbmRleEJ5O1xyXG4gICAgICAgIGxvZGFzaC5pbml0aWFsID0gaW5pdGlhbDtcclxuICAgICAgICBsb2Rhc2guaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uO1xyXG4gICAgICAgIGxvZGFzaC5pbnZlcnQgPSBpbnZlcnQ7XHJcbiAgICAgICAgbG9kYXNoLmludm9rZSA9IGludm9rZTtcclxuICAgICAgICBsb2Rhc2gua2V5cyA9IGtleXM7XHJcbiAgICAgICAgbG9kYXNoLm1hcCA9IG1hcDtcclxuICAgICAgICBsb2Rhc2gubWFwVmFsdWVzID0gbWFwVmFsdWVzO1xyXG4gICAgICAgIGxvZGFzaC5tYXggPSBtYXg7XHJcbiAgICAgICAgbG9kYXNoLm1lbW9pemUgPSBtZW1vaXplO1xyXG4gICAgICAgIGxvZGFzaC5tZXJnZSA9IG1lcmdlO1xyXG4gICAgICAgIGxvZGFzaC5taW4gPSBtaW47XHJcbiAgICAgICAgbG9kYXNoLm9taXQgPSBvbWl0O1xyXG4gICAgICAgIGxvZGFzaC5vbmNlID0gb25jZTtcclxuICAgICAgICBsb2Rhc2gucGFpcnMgPSBwYWlycztcclxuICAgICAgICBsb2Rhc2gucGFydGlhbCA9IHBhcnRpYWw7XHJcbiAgICAgICAgbG9kYXNoLnBhcnRpYWxSaWdodCA9IHBhcnRpYWxSaWdodDtcclxuICAgICAgICBsb2Rhc2gucGljayA9IHBpY2s7XHJcbiAgICAgICAgbG9kYXNoLnBsdWNrID0gcGx1Y2s7XHJcbiAgICAgICAgbG9kYXNoLnByb3BlcnR5ID0gcHJvcGVydHk7XHJcbiAgICAgICAgbG9kYXNoLnB1bGwgPSBwdWxsO1xyXG4gICAgICAgIGxvZGFzaC5yYW5nZSA9IHJhbmdlO1xyXG4gICAgICAgIGxvZGFzaC5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgbG9kYXNoLnJlbW92ZSA9IHJlbW92ZTtcclxuICAgICAgICBsb2Rhc2gucmVzdCA9IHJlc3Q7XHJcbiAgICAgICAgbG9kYXNoLnNodWZmbGUgPSBzaHVmZmxlO1xyXG4gICAgICAgIGxvZGFzaC5zb3J0QnkgPSBzb3J0Qnk7XHJcbiAgICAgICAgbG9kYXNoLnRhcCA9IHRhcDtcclxuICAgICAgICBsb2Rhc2gudGhyb3R0bGUgPSB0aHJvdHRsZTtcclxuICAgICAgICBsb2Rhc2gudGltZXMgPSB0aW1lcztcclxuICAgICAgICBsb2Rhc2gudG9BcnJheSA9IHRvQXJyYXk7XHJcbiAgICAgICAgbG9kYXNoLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcclxuICAgICAgICBsb2Rhc2gudW5pb24gPSB1bmlvbjtcclxuICAgICAgICBsb2Rhc2gudW5pcSA9IHVuaXE7XHJcbiAgICAgICAgbG9kYXNoLnZhbHVlcyA9IHZhbHVlcztcclxuICAgICAgICBsb2Rhc2gud2hlcmUgPSB3aGVyZTtcclxuICAgICAgICBsb2Rhc2gud2l0aG91dCA9IHdpdGhvdXQ7XHJcbiAgICAgICAgbG9kYXNoLndyYXAgPSB3cmFwO1xyXG4gICAgICAgIGxvZGFzaC54b3IgPSB4b3I7XHJcbiAgICAgICAgbG9kYXNoLnppcCA9IHppcDtcclxuICAgICAgICBsb2Rhc2guemlwT2JqZWN0ID0gemlwT2JqZWN0O1xyXG5cclxuICAgICAgICAvLyBhZGQgYWxpYXNlc1xyXG4gICAgICAgIGxvZGFzaC5jb2xsZWN0ID0gbWFwO1xyXG4gICAgICAgIGxvZGFzaC5kcm9wID0gcmVzdDtcclxuICAgICAgICBsb2Rhc2guZWFjaCA9IGZvckVhY2g7XHJcbiAgICAgICAgbG9kYXNoLmVhY2hSaWdodCA9IGZvckVhY2hSaWdodDtcclxuICAgICAgICBsb2Rhc2guZXh0ZW5kID0gYXNzaWduO1xyXG4gICAgICAgIGxvZGFzaC5tZXRob2RzID0gZnVuY3Rpb25zO1xyXG4gICAgICAgIGxvZGFzaC5vYmplY3QgPSB6aXBPYmplY3Q7XHJcbiAgICAgICAgbG9kYXNoLnNlbGVjdCA9IGZpbHRlcjtcclxuICAgICAgICBsb2Rhc2gudGFpbCA9IHJlc3Q7XHJcbiAgICAgICAgbG9kYXNoLnVuaXF1ZSA9IHVuaXE7XHJcbiAgICAgICAgbG9kYXNoLnVuemlwID0gemlwO1xyXG5cclxuICAgICAgICAvLyBhZGQgZnVuY3Rpb25zIHRvIGBsb2Rhc2gucHJvdG90eXBlYFxyXG4gICAgICAgIG1peGluKGxvZGFzaCk7XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvLyBhZGQgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHVud3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZ1xyXG4gICAgICAgIGxvZGFzaC5jbG9uZSA9IGNsb25lO1xyXG4gICAgICAgIGxvZGFzaC5jbG9uZURlZXAgPSBjbG9uZURlZXA7XHJcbiAgICAgICAgbG9kYXNoLmNvbnRhaW5zID0gY29udGFpbnM7XHJcbiAgICAgICAgbG9kYXNoLmVzY2FwZSA9IGVzY2FwZTtcclxuICAgICAgICBsb2Rhc2guZXZlcnkgPSBldmVyeTtcclxuICAgICAgICBsb2Rhc2guZmluZCA9IGZpbmQ7XHJcbiAgICAgICAgbG9kYXNoLmZpbmRJbmRleCA9IGZpbmRJbmRleDtcclxuICAgICAgICBsb2Rhc2guZmluZEtleSA9IGZpbmRLZXk7XHJcbiAgICAgICAgbG9kYXNoLmZpbmRMYXN0ID0gZmluZExhc3Q7XHJcbiAgICAgICAgbG9kYXNoLmZpbmRMYXN0SW5kZXggPSBmaW5kTGFzdEluZGV4O1xyXG4gICAgICAgIGxvZGFzaC5maW5kTGFzdEtleSA9IGZpbmRMYXN0S2V5O1xyXG4gICAgICAgIGxvZGFzaC5oYXMgPSBoYXM7XHJcbiAgICAgICAgbG9kYXNoLmlkZW50aXR5ID0gaWRlbnRpdHk7XHJcbiAgICAgICAgbG9kYXNoLmluZGV4T2YgPSBpbmRleE9mO1xyXG4gICAgICAgIGxvZGFzaC5pc0FyZ3VtZW50cyA9IGlzQXJndW1lbnRzO1xyXG4gICAgICAgIGxvZGFzaC5pc0FycmF5ID0gaXNBcnJheTtcclxuICAgICAgICBsb2Rhc2guaXNCb29sZWFuID0gaXNCb29sZWFuO1xyXG4gICAgICAgIGxvZGFzaC5pc0RhdGUgPSBpc0RhdGU7XHJcbiAgICAgICAgbG9kYXNoLmlzRWxlbWVudCA9IGlzRWxlbWVudDtcclxuICAgICAgICBsb2Rhc2guaXNFbXB0eSA9IGlzRW1wdHk7XHJcbiAgICAgICAgbG9kYXNoLmlzRXF1YWwgPSBpc0VxdWFsO1xyXG4gICAgICAgIGxvZGFzaC5pc0Zpbml0ZSA9IGlzRmluaXRlO1xyXG4gICAgICAgIGxvZGFzaC5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcclxuICAgICAgICBsb2Rhc2guaXNOYU4gPSBpc05hTjtcclxuICAgICAgICBsb2Rhc2guaXNOdWxsID0gaXNOdWxsO1xyXG4gICAgICAgIGxvZGFzaC5pc051bWJlciA9IGlzTnVtYmVyO1xyXG4gICAgICAgIGxvZGFzaC5pc09iamVjdCA9IGlzT2JqZWN0O1xyXG4gICAgICAgIGxvZGFzaC5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdDtcclxuICAgICAgICBsb2Rhc2guaXNSZWdFeHAgPSBpc1JlZ0V4cDtcclxuICAgICAgICBsb2Rhc2guaXNTdHJpbmcgPSBpc1N0cmluZztcclxuICAgICAgICBsb2Rhc2guaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcclxuICAgICAgICBsb2Rhc2gubGFzdEluZGV4T2YgPSBsYXN0SW5kZXhPZjtcclxuICAgICAgICBsb2Rhc2gubWl4aW4gPSBtaXhpbjtcclxuICAgICAgICBsb2Rhc2gubm9Db25mbGljdCA9IG5vQ29uZmxpY3Q7XHJcbiAgICAgICAgbG9kYXNoLm5vb3AgPSBub29wO1xyXG4gICAgICAgIGxvZGFzaC5ub3cgPSBub3c7XHJcbiAgICAgICAgbG9kYXNoLnBhcnNlSW50ID0gcGFyc2VJbnQ7XHJcbiAgICAgICAgbG9kYXNoLnJhbmRvbSA9IHJhbmRvbTtcclxuICAgICAgICBsb2Rhc2gucmVkdWNlID0gcmVkdWNlO1xyXG4gICAgICAgIGxvZGFzaC5yZWR1Y2VSaWdodCA9IHJlZHVjZVJpZ2h0O1xyXG4gICAgICAgIGxvZGFzaC5yZXN1bHQgPSByZXN1bHQ7XHJcbiAgICAgICAgbG9kYXNoLnJ1bkluQ29udGV4dCA9IHJ1bkluQ29udGV4dDtcclxuICAgICAgICBsb2Rhc2guc2l6ZSA9IHNpemU7XHJcbiAgICAgICAgbG9kYXNoLnNvbWUgPSBzb21lO1xyXG4gICAgICAgIGxvZGFzaC5zb3J0ZWRJbmRleCA9IHNvcnRlZEluZGV4O1xyXG4gICAgICAgIGxvZGFzaC50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIGxvZGFzaC51bmVzY2FwZSA9IHVuZXNjYXBlO1xyXG4gICAgICAgIGxvZGFzaC51bmlxdWVJZCA9IHVuaXF1ZUlkO1xyXG5cclxuICAgICAgICAvLyBhZGQgYWxpYXNlc1xyXG4gICAgICAgIGxvZGFzaC5hbGwgPSBldmVyeTtcclxuICAgICAgICBsb2Rhc2guYW55ID0gc29tZTtcclxuICAgICAgICBsb2Rhc2guZGV0ZWN0ID0gZmluZDtcclxuICAgICAgICBsb2Rhc2guZmluZFdoZXJlID0gZmluZDtcclxuICAgICAgICBsb2Rhc2guZm9sZGwgPSByZWR1Y2U7XHJcbiAgICAgICAgbG9kYXNoLmZvbGRyID0gcmVkdWNlUmlnaHQ7XHJcbiAgICAgICAgbG9kYXNoLmluY2x1ZGUgPSBjb250YWlucztcclxuICAgICAgICBsb2Rhc2guaW5qZWN0ID0gcmVkdWNlO1xyXG5cclxuICAgICAgICBtaXhpbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSB7fVxyXG4gICAgICAgICAgICBmb3JPd24obG9kYXNoLCBmdW5jdGlvbiAoZnVuYywgbWV0aG9kTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlW21ldGhvZE5hbWVdID0gZnVuYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICAgICAgfSgpLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvLyBhZGQgZnVuY3Rpb25zIGNhcGFibGUgb2YgcmV0dXJuaW5nIHdyYXBwZWQgYW5kIHVud3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZ1xyXG4gICAgICAgIGxvZGFzaC5maXJzdCA9IGZpcnN0O1xyXG4gICAgICAgIGxvZGFzaC5sYXN0ID0gbGFzdDtcclxuICAgICAgICBsb2Rhc2guc2FtcGxlID0gc2FtcGxlO1xyXG5cclxuICAgICAgICAvLyBhZGQgYWxpYXNlc1xyXG4gICAgICAgIGxvZGFzaC50YWtlID0gZmlyc3Q7XHJcbiAgICAgICAgbG9kYXNoLmhlYWQgPSBmaXJzdDtcclxuXHJcbiAgICAgICAgZm9yT3duKGxvZGFzaCwgZnVuY3Rpb24gKGZ1bmMsIG1ldGhvZE5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrYWJsZSA9IG1ldGhvZE5hbWUgIT09ICdzYW1wbGUnO1xyXG4gICAgICAgICAgICBpZiAoIWxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAobiwgZ3VhcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hhaW5BbGwgPSB0aGlzLl9fY2hhaW5fXyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYyh0aGlzLl9fd3JhcHBlZF9fLCBuLCBndWFyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhY2hhaW5BbGwgJiYgKG4gPT0gbnVsbCB8fCAoZ3VhcmQgJiYgIShjYWxsYmFja2FibGUgJiYgdHlwZW9mIG4gPT0gJ2Z1bmN0aW9uJykpKSA/IHJlc3VsdCA6IG5ldyBsb2Rhc2hXcmFwcGVyKHJlc3VsdCwgY2hhaW5BbGwpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHNlbWFudGljIHZlcnNpb24gbnVtYmVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQHR5cGUgc3RyaW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbG9kYXNoLlZFUlNJT04gPSAnMi40LjEnO1xyXG5cclxuICAgICAgICAvLyBhZGQgXCJDaGFpbmluZ1wiIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlclxyXG4gICAgICAgIGxvZGFzaC5wcm90b3R5cGUuY2hhaW4gPSB3cmFwcGVyQ2hhaW47XHJcbiAgICAgICAgbG9kYXNoLnByb3RvdHlwZS50b1N0cmluZyA9IHdyYXBwZXJUb1N0cmluZztcclxuICAgICAgICBsb2Rhc2gucHJvdG90eXBlLnZhbHVlID0gd3JhcHBlclZhbHVlT2Y7XHJcbiAgICAgICAgbG9kYXNoLnByb3RvdHlwZS52YWx1ZU9mID0gd3JhcHBlclZhbHVlT2Y7XHJcblxyXG4gICAgICAgIC8vIGFkZCBgQXJyYXlgIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB1bndyYXBwZWQgdmFsdWVzXHJcbiAgICAgICAgZm9yRWFjaChbJ2pvaW4nLCAncG9wJywgJ3NoaWZ0J10sIGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBmdW5jID0gYXJyYXlSZWZbbWV0aG9kTmFtZV07XHJcbiAgICAgICAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhaW5BbGwgPSB0aGlzLl9fY2hhaW5fXyxcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMuX193cmFwcGVkX18sIGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYWluQWxsID8gbmV3IGxvZGFzaFdyYXBwZXIocmVzdWx0LCBjaGFpbkFsbCkgOiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBgQXJyYXlgIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB0aGUgZXhpc3Rpbmcgd3JhcHBlZCB2YWx1ZVxyXG4gICAgICAgIGZvckVhY2goWydwdXNoJywgJ3JldmVyc2UnLCAnc29ydCcsICd1bnNoaWZ0J10sIGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBmdW5jID0gYXJyYXlSZWZbbWV0aG9kTmFtZV07XHJcbiAgICAgICAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KHRoaXMuX193cmFwcGVkX18sIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGBBcnJheWAgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIG5ldyB3cmFwcGVkIHZhbHVlc1xyXG4gICAgICAgIGZvckVhY2goWydjb25jYXQnLCAnc2xpY2UnLCAnc3BsaWNlJ10sIGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBmdW5jID0gYXJyYXlSZWZbbWV0aG9kTmFtZV07XHJcbiAgICAgICAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGxvZGFzaFdyYXBwZXIoZnVuYy5hcHBseSh0aGlzLl9fd3JhcHBlZF9fLCBhcmd1bWVudHMpLCB0aGlzLl9fY2hhaW5fXyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBsb2Rhc2g7XHJcbiAgICB9XHJcblxyXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgLy8gZXhwb3NlIExvLURhc2hcclxuICAgIHZhciBfID0gcnVuSW5Db250ZXh0KCk7XHJcblxyXG4gICAgLy8gc29tZSBBTUQgYnVpbGQgb3B0aW1pemVycyBsaWtlIHIuanMgY2hlY2sgZm9yIGNvbmRpdGlvbiBwYXR0ZXJucyBsaWtlIHRoZSBmb2xsb3dpbmc6XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICAvLyBFeHBvc2UgTG8tRGFzaCB0byB0aGUgZ2xvYmFsIG9iamVjdCBldmVuIHdoZW4gYW4gQU1EIGxvYWRlciBpcyBwcmVzZW50IGluXHJcbiAgICAgICAgLy8gY2FzZSBMby1EYXNoIGlzIGxvYWRlZCB3aXRoIGEgUmVxdWlyZUpTIHNoaW0gY29uZmlnLlxyXG4gICAgICAgIC8vIFNlZSBodHRwOi8vcmVxdWlyZWpzLm9yZy9kb2NzL2FwaS5odG1sI2NvbmZpZy1zaGltXHJcbiAgICAgICAgcm9vdC5fID0gXztcclxuXHJcbiAgICAgICAgLy8gZGVmaW5lIGFzIGFuIGFub255bW91cyBtb2R1bGUgc28sIHRocm91Z2ggcGF0aCBtYXBwaW5nLCBpdCBjYW4gYmVcclxuICAgICAgICAvLyByZWZlcmVuY2VkIGFzIHRoZSBcInVuZGVyc2NvcmVcIiBtb2R1bGVcclxuICAgICAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgICAgICAvLyBjaGVjayBmb3IgYGV4cG9ydHNgIGFmdGVyIGBkZWZpbmVgIGluIGNhc2UgYSBidWlsZCBvcHRpbWl6ZXIgYWRkcyBhbiBgZXhwb3J0c2Agb2JqZWN0XHJcbiAgICBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7XHJcbiAgICAgICAgLy8gaW4gTm9kZS5qcyBvciBSaW5nb0pTXHJcbiAgICAgICAgaWYgKG1vZHVsZUV4cG9ydHMpIHtcclxuICAgICAgICAgICAgKGZyZWVNb2R1bGUuZXhwb3J0cyA9IF8pLl8gPSBfO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaW4gTmFyd2hhbCBvciBSaGlubyAtcmVxdWlyZVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmcmVlRXhwb3J0cy5fID0gXztcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGluIGEgYnJvd3NlciBvciBSaGlub1xyXG4gICAgICAgIHJvb3QuXyA9IF87XHJcbiAgICB9XHJcbn0uY2FsbCh0aGlzKSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9