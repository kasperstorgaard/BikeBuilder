!function(window,document,undefined){"use strict";function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments,stringify=function(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?JSON.stringify(obj):obj};for(message=prefix+template.replace(/\{\d+\}/g,function(match){var arg,index=+match.slice(1,-1);return index+2<templateArgs.length?(arg=templateArgs[index+2],"function"==typeof arg?arg.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof arg?"undefined":"string"!=typeof arg?toJson(arg):arg):match}),message=message+"\nhttp://errors.angularjs.org/1.3.0-rc.2/"+(module?module+"/":"")+code,i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(stringify(arguments[i]));return new ErrorConstructor(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return 1===obj.nodeType&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;length>key;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);return obj}function sortedKeys(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){for(var h=dst.$$hashKey,i=1,ii=arguments.length;ii>i;i++){var obj=arguments[i];if(obj)for(var keys=Object.keys(obj),j=0,jj=keys.length;jj>j;j++){var key=keys[j];dst[key]=obj[key]}}return setHashKey(dst,h),dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!==value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0].nodeName)}function map(obj,iterator,context){var results=[];return forEach(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),value}function copy(source,destination,stackSource,stackDest){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(stackSource=stackSource||[],stackDest=stackDest||[],isObject(source)){var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];stackSource.push(source),stackDest.push(destination)}var result;if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)result=copy(source[i],null,stackSource,stackDest),isObject(source[i])&&(stackSource.push(source[i]),stackDest.push(result)),destination.push(result)}else{var h=destination.$$hashKey;isArray(destination)?destination.length=0:forEach(destination,function(value,key){delete destination[key]});for(var key in source)source.hasOwnProperty(key)&&(result=copy(source[key],null,stackSource,stackDest),isObject(source[key])&&(stackSource.push(source[key]),stackDest.push(result)),destination[key]=result);setHashKey(destination,h)}}else if(destination=source,source)if(isArray(source))destination=copy(source,[],stackSource,stackDest);else if(isDate(source))destination=new Date(source.getTime());else if(isRegExp(source))destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]),destination.lastIndex=source.lastIndex;else if(isObject(source)){var emptyObject=Object.create(Object.getPrototypeOf(source));destination=copy(source,emptyObject,stackSource,stackDest)}return destination}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;ii>i;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)("$"!==key.charAt(0)||"$"!==key.charAt(1))&&(dst[key]=src[key])}return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)?equals(o1.getTime(),o2.getTime()):!1;if(isRegExp(o1)&&isRegExp(o2))return o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,curryArgs.concat(slice.call(arguments,0))):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:JSON.stringify(obj,toJsonReplacer,pretty?"  ":null)}function fromJson(json){return isString(json)?JSON.parse(json):json}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var TEXT_NODE=3,elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===TEXT_NODE?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(element=jqLite(element),i=0;ii>i;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.attr(attr)))return attr;return null}function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement&&(config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config))}function bootstrap(element,modules,config){isObject(config)||(config={});var defaultConfig={strictDi:!1};config=extend(defaultConfig,config);var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),void(angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)}),doBootstrap()}))}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){return angular.element(rootElement).injector().get("$$testability")}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){var originalCleanData;bindJQueryFired||(jQuery=window.jQuery,jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){var events;if(skipDestroyOnNextJQueryCleanData)skipDestroyOnNextJQueryCleanData=!1;else for(var elem,i=0;null!=(elem=elems[i]);i++)events=jQuery._data(elem,"events"),events&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0)}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){var node=nodes[0],endNode=nodes[nodes.length-1],blockNodes=[node];do{if(node=node.nextSibling,!node)break;blockNodes.push(node)}while(node!==endNode);return jqLite(blockNodes)}function createMap(){return Object.create(null)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo,$$hasClass:jqLiteHasClass}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$asyncCallback:$$AsyncCallbackProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return 1===nodeType||!nodeType||9===nodeType}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;l>i;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type)forEach(type.split(" "),function(type){isUndefined(fn)?(removeEventListenerFn(element,type,events[type]),delete events[type]):arrayRemove(events[type]||[],fn)});else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,events[type]),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;length>i;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){9==element.nodeType&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;ii>i;i++)if((value=jqLite.data(element,names[i]))!==undefined)return value;element=element.parentNode||11===element.nodeType&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(element,name){var nodeName=element.nodeName;return("INPUT"===nodeName||"TEXTAREA"===nodeName)&&ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===!0},eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;eventFnsLength>i;i++)event.isImmediatePropagationStopped()||eventFns[i].call(element,event)}};return eventHandler.elem=element,eventHandler}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"==objType||"object"==objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function anonFn(fn){var fnText=fn.toString().replace(STRIP_COMMENTS,""),args=fnText.match(FN_ARGS);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(fn,strictDi,name){var $inject,fnText,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad,strictDi){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn){return provider(name,{$get:factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val))}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;ii>i;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var length,i,key,args=[],$inject=annotate(fn,strictDi,serviceName);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key))}return isArray(fn)&&(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals,serviceName){var instance,returnedValue,Constructor=function(){};return Constructor.prototype=(isArray(Type)?Type[Type.length-1]:Type).prototype,instance=new Constructor,returnedValue=invoke(Type,instance,locals,serviceName),isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}strictDi=strictDi===!0;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(){throw $injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(servicename){var provider=providerInjector.get(servicename+providerSuffix);return instanceInjector.invoke(provider.$get,provider,undefined,servicename)});return forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return forEach(list,function(element){result||"a"!==nodeName_(element)||(result=element)}),result}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?elm.scrollIntoView():(elm=getFirstAnchor(document.getElementsByName(hash)))?elm.scrollIntoView():"top"===hash&&$window.scrollTo(0,0):$window.scrollTo(0,0)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(){$rootScope.$evalAsync(scroll)}),scroll}]}function $$AsyncCallbackProvider(){this.$get=["$$rAF","$timeout",function($$rAF,$timeout){return $$rAF.supported?function(fn){return $$rAF(fn)}:function(fn){return $timeout(fn,0,!1)}}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()
}catch(e){$log.error(e)}}}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()}),pollTimeout=setTimeout(check,interval)}()}function fireUrlChange(){newLocation=null,lastBrowserUrl!=self.url()&&(lastBrowserUrl=self.url(),forEach(urlChangeListeners,function(listener){listener(self.url())}))}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()}),0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){return isUndefined(pollTimeout)&&startPoller(100,setTimeout),pollFns.push(fn),fn};var lastBrowserUrl=location.href,baseElement=document.find("base"),newLocation=null;self.url=function(url,replace){if(location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){if(lastBrowserUrl==url)return;return lastBrowserUrl=url,$sniffer.history?replace?history.replaceState(null,"",url):(history.pushState(null,"",url),baseElement.attr("href",baseElement.attr("href"))):(newLocation=url,replace?location.replace(url):location.href=url),self}return newLocation||location.href.replace(/%27/g,"'")};var urlChangeListeners=[],urlChangeInit=!1;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",fireUrlChange),$sniffer.hashchange?jqLite(window).on("hashchange",fireUrlChange):self.addPollFn(fireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString)for(lastCookieString=rawDocument.cookie,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=decodeURIComponent(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=decodeURIComponent(cookie.substring(index+1))));return lastCookies}value===undefined?rawDocument.cookie=encodeURIComponent(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT":isString(value)&&(cookieLength=(rawDocument.cookie=encodeURIComponent(name)+"="+encodeURIComponent(value)+";path="+cookiePath).length+1,cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"))},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}if(!isUndefined(value))return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}delete data[key],size--},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){function parseIsolateBindings(scope,directiveName){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/,bindings={};return forEach(scope,function(definition,scopeName){var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition);bindings[scopeName]={attrName:match[3]||scopeName,mode:match[1],optional:"?"===match[2]}}),bindings}var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"EA",isObject(directive.scope)&&(directive.$$isolateBindings=parseIsolateBindings(directive.scope,directive.name)),directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){3==node.nodeType&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var lastCompileNode,namespace=null,namespaceAdaptedCompileNodes=$compileNodes;return function(scope,cloneConnectFn,transcludeControllers,parentBoundTranscludeFn,futureParentElement){assertArg(scope,"scope"),namespace||(namespace=detectNamespaceForChildElements(futureParentElement)),"html"!==namespace&&$compileNodes[0]!==lastCompileNode&&(namespaceAdaptedCompileNodes=jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html()))),lastCompileNode=$compileNodes[0];var $linkNode=cloneConnectFn?JQLitePrototype.clone.call(namespaceAdaptedCompileNodes):namespaceAdaptedCompileNodes;if(transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&node.toString().match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;ii>i;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn,nodeLinkFn.elementTranscludeOnThisElement):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn,elementTransclusion){var boundTranscludeFn=function(transcludedScope,cloneFn,controllers,futureParentElement){var scopeCreated=!1;transcludedScope||(transcludedScope=scope.$new(),transcludedScope.$$transcluded=!0,scopeCreated=!0);var clone=transcludeFn(transcludedScope,cloneFn,controllers,previousBoundTranscludeFn,futureParentElement);return scopeCreated&&!elementTransclusion&&clone.on("$destroy",function(){transcludedScope.$destroy()}),clone};return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case 1:addDirective(directives,directiveNormalize(nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;if(attr=nAttrs[j],!msie||msie>=8||attr.specified){name=attr.name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=snake_case(ngAttrName.substr(6),"-"));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");directiveIsMultiElement(directiveNName)&&ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,(isNgAttr||!attrs.hasOwnProperty(nName))&&(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}}if(className=node.className,isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case 3:addTextInterpolateDirective(directives,node.nodeValue);break;case 8:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);1==node.nodeType&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(directiveName,require,$element,elementControllers){var value,retrievalMethod="data",optional=!1;if(isString(require)){for(;"^"==(value=require.charAt(0))||"?"==value;)require=require.substr(1),"^"==value&&(retrievalMethod="inheritedData"),optional=optional||"?"==value;if(value=null,elementControllers&&"data"===retrievalMethod&&(value=elementControllers[require])&&(value=value.instance),value=value||$element[retrievalMethod]("$"+require+"Controller"),!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value}return isArray(require)&&(value=[],forEach(require,function(require){value.push(getControllers(directiveName,require,$element,elementControllers))})),value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement){var transcludeControllers;return isScope(scope)||(futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement)}var i,ii,linkFn,controller,isolateScope,elementControllers,transcludeFn,$element,attrs;if(compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):($element=jqLite(linkNode),attrs=new Attributes($element,templateAttrs)),newIsolateScopeDirective&&(isolateScope=scope.$new(!0)),transcludeFn=boundTranscludeFn&&controllersBoundTransclude,controllerDirectives&&(controllers={},elementControllers={},forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};controller=directive.controller,"@"==controller&&(controller=attrs[directive.name]),controllerInstance=$controller(controller,locals,!0,directive.controllerAs),elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance.instance),controllers[directive.name]=controllerInstance})),newIsolateScopeDirective){compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0);var isolateScopeController=controllers&&controllers[newIsolateScopeDirective.name],isolateBindingContext=isolateScope;isolateScopeController&&isolateScopeController.identifier&&newIsolateScopeDirective.bindToController===!0&&(isolateBindingContext=isolateScopeController.instance),forEach(isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,attrName=definition.attrName,optional=definition.optional,mode=definition.mode;switch(mode){case"@":attrs.$observe(attrName,function(value){isolateBindingContext[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(isolateBindingContext[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=isolateBindingContext[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)},lastValue=isolateBindingContext[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,isolateBindingContext[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=isolateBindingContext[scopeName]):isolateBindingContext[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0;var unwatch=scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal);isolateScope.$on("$destroy",unwatch);break;case"&":parentGet=$parse(attrs[attrName]),isolateBindingContext[scopeName]=function(locals){return parentGet(scope,locals)}}})}for(controllers&&(forEach(controllers,function(controller){controller()}),controllers=null),i=0,ii=preLinkFns.length;ii>i;i++)linkFn=preLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)linkFn=postLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}previousCompileContext=previousCompileContext||{};for(var newScopeDirective,controllers,directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||{},assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:jqLite(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.elementTranscludeOnThisElement=hasElementTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)if(directive=directives[i],directive.multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=extend({},origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest($sce.getTrustedResourceUrl(templateUrl)).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:jqLite(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;linkQueue?(linkQueue.push(scope),linkQueue.push(node),linkQueue.push(rootElement),linkQueue.push(childBoundTranscludeFn)):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;
var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"form"==tag&&"action"==attrNormalizedName||"img"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var interpolateFn=$interpolate(value,!0);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");interpolateFn=$interpolate(attr[name],!0,getTrustedContext(node,name),ALL_OR_NOTHING_ATTRS[name]||allOrNothing),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),jqLite(newNode).data(jqLite(firstElementToRemove).data()),jQuery?(skipDestroyOnNextJQueryCleanData=!0,jQuery.cleanData([firstElementToRemove])):delete jqLite.cache[firstElementToRemove[jqLite.expando]];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}var Attributes=function(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;l>i;i++)key=keys[i],this[key]=attributesToCopy[key]}else this.$attr={};this.$$element=element};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(node,key),observer=key;booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),("a"===nodeName&&"href"===key||"img"===nodeName&&"src"===key)&&(this[key]=value=$$sanitizeUri(value,"src"===key)),writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers={}),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function $ControllerProvider(){var controllers={},globals=!1,CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=later===!0,ident&&isString(ident)&&(identifier=ident),isString(expression)&&(match=expression.match(CNTRL_REG),constructor=match[1],identifier=identifier||match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):undefined),assertArgFn(expression,constructor,!0)),later){var Constructor=function(){};return Constructor.prototype=(isArray(expression)?expression[expression.length-1]:expression).prototype,instance=new Constructor,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),extend(function(){return $injector.invoke(expression,instance,locals,constructor),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(){$log.error.apply($log,arguments)}}]}function parseHeaders(headers){var key,val,i,parsed={};return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=lowercase(trim(line.substr(0,i))),val=trim(line.substr(i+1)),key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}),parsed):parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){return headersObj||(headersObj=parseHeaders(headers)),name?headersObj[lowercase(name)]||null:headersObj}}function transformData(data,headers,fns){return isFunction(fns)?fns(data,headers):(forEach(fns,function(fn){data=fn(data,headers)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var JSON_START=/^\s*(\[|\{[^\{])/,JSON_END=/[\}\]]\s*$/,PROTECTION_PREFIX=/^\)\]\}',?\n/,CONTENT_TYPE_APPLICATION_JSON={"Content-Type":"application/json;charset=utf-8"},defaults=this.defaults={transformResponse:[function(data){return isString(data)&&(data=data.replace(PROTECTION_PREFIX,""),JSON_START.test(data)&&JSON_END.test(data)&&(data=fromJson(data))),data}],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response,{data:transformData(response.data,response.headers,config.transformResponse)});return isSuccess(response.status)?resp:$q.reject(resp)}function mergeHeaders(config){function execHeaders(headers){var headerContent;forEach(headers,function(headerFn,header){isFunction(headerFn)&&(headerContent=headerFn(),null!=headerContent?headers[header]=headerContent:delete headers[header])})}var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return execHeaders(reqHeaders),reqHeaders}var config={method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},headers=mergeHeaders(requestConfig);extend(config,requestConfig),config.headers=headers,config.method=uppercase(config.method);var serverRequest=function(config){headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData,headers).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData,reqHeaders){function done(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())}function resolvePromise(response,status,headers,statusText){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,url=buildUrl(config.url,config.params);if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache)if(cachedResp=cache.get(url),isDefined(cachedResp)){if(isPromiseLike(cachedResp))return cachedResp.then(removePendingReq,removePendingReq),cachedResp;isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK")}else cache.put(url,promise);if(isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise}function buildUrl(url,params){if(!params)return url;var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)||(value=[value]),forEach(value,function(v){isObject(v)&&(v=isDate(v)?v.toISOString():toJson(v)),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))}))}),parts.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+parts.join("&")),url}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put","patch"),$http.defaults=defaults,$http}]}function createXhr(method){if(8>=msie&&(!method.match(/^(get|post|head|put|delete|options)$/i)||!window.XMLHttpRequest))return new window.ActiveXObject("Microsoft.XMLHTTP");if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw minErr("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}var ABORTED=-1;return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){status=ABORTED,jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){timeoutId&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),status=1223===status?204:status,statusText=statusText||"",callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}var status;if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr(method);if(xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onreadystatechange=function(){if(xhr&&4==xhr.readyState){var responseHeaders=null,response=null,statusText="";status!==ABORTED&&(responseHeaders=xhr.getAllResponseHeaders(),response="response"in xhr?xhr.response:xhr.responseText),status===ABORTED&&10>msie||(statusText=xhr.statusText),completeRequest(callback,status||xhr.status,response,responseHeaders,statusText)}},withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(post||null)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function escape(ch){return"\\\\\\"+ch}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function parseStringifyInterceptor(value){try{return stringify(getValue(value))}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];textLength>index;){if(-1==(startIndex=text.indexOf(startSymbol,index))||-1==(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text);if(!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;ii>i;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)},stringify=function(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;ii>i;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener,objectEquality){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue},objectEquality)}})}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q",function($rootScope,$window,$q,$$q){function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.then(null,null,fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj,appBase){var parsedUrl=urlResolve(absoluteUrl,appBase);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj,appBase){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl,appBase);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this,appBase),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var appUrl,prevAppUrl,rewrittenUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,rewrittenUrl=(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url),withoutHashUrl="#"==withoutBaseUrl.charAt(0)?beginsWith(hashPrefix,withoutBaseUrl):this.$$html5?withoutBaseUrl:"";if(!isString(withoutHashUrl))throw $locationMinErr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',url,hashPrefix);parseAppUrl(withoutHashUrl,this,appBase),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url){return stripHash(appBase)==stripHash(url)?(this.$$parse(url),!0):!1}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var rewrittenUrl,appUrl;return appBase==stripHash(url)?rewrittenUrl=url:(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode=!1;this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isDefined(mode)?(html5Mode=mode,this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function($rootScope,$browser,$sniffer,$rootElement){function afterLocationChange(oldUrl){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode){if(!baseHref)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parseLinkUrl(initialUrl,initialUrl);var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(!event.ctrlKey&&!event.metaKey&&2!=event.which){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),window.angular["ff-684208-preventDefault"]=!0))}}),$location.absUrl()!=initialUrl&&$browser.url($location.absUrl(),!0),$browser.onUrlChange(function(newUrl){$location.absUrl()!=newUrl&&($rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();$location.$$parse(newUrl),$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl).defaultPrevented?($location.$$parse(oldUrl),$browser.url(oldUrl)):afterLocationChange(oldUrl)}),$rootScope.$$phase||$rootScope.$digest())});var changeCounter=0;return $rootScope.$watch(function(){var oldUrl=$browser.url(),currentReplace=$location.$$replace;return changeCounter&&oldUrl==$location.absUrl()||(changeCounter++,$rootScope.$evalAsync(function(){$rootScope.$broadcast("$locationChangeStart",$location.absUrl(),oldUrl).defaultPrevented?$location.$$parse(oldUrl):($browser.url($location.absUrl(),currentReplace),afterLocationChange(oldUrl))})),$location.$$replace=!1,changeCounter}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);
if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function isConstant(exp){return exp.constant}function setter(obj,path,setValue,fullExp){ensureSafeObject(obj,fullExp);for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=ensureSafeObject(obj[key],fullExp);propertyObj||(propertyObj={},obj[key]=propertyObj),obj=propertyObj}return key=ensureSafeMemberName(element.shift(),fullExp),ensureSafeObject(obj[key],fullExp),obj[key]=setValue,setValue}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp){return ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),ensureSafeMemberName(key2,fullExp),ensureSafeMemberName(key3,fullExp),ensureSafeMemberName(key4,fullExp),function(scope,locals){var pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=pathVal[key0],key1?null==pathVal?undefined:(pathVal=pathVal[key1],key2?null==pathVal?undefined:(pathVal=pathVal[key2],key3?null==pathVal?undefined:(pathVal=pathVal[key3],key4?null==pathVal?undefined:pathVal=pathVal[key4]:pathVal):pathVal):pathVal):pathVal)}}function getterFn(path,options,fullExp){var fn=getterFnCache[path];if(fn)return fn;var pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(options.csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp):function(scope,locals){var val,i=0;do val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp)(scope,locals),locals=undefined,scope=val;while(pathKeysLength>i);return val};else{var code="";forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp),code+="if(s == null) return undefined;\ns="+(index?"s":'((l&&l.hasOwnProperty("'+key+'"))?l:s)')+"."+key+";\n"}),code+="return s;";var evaledFnGetter=new Function("s","l",code);evaledFnGetter.toString=valueFn(code),fn=evaledFnGetter}return fn.sharedGetter=!0,fn.assign=function(self,value){return setter(self,path,value,path)},getterFnCache[path]=fn,fn}function $ParseProvider(){var cache=createMap(),$parseOptions={csp:!1};this.$get=["$filter","$sniffer",function($filter,$sniffer){function wrapSharedExpression(exp){var wrapped=exp;return exp.sharedGetter&&(wrapped=function(self,locals){return exp(self,locals)},wrapped.literal=exp.literal,wrapped.constant=exp.constant,wrapped.assign=exp.assign),wrapped}function collectExpressionInputs(inputs,list){for(var i=0,ii=inputs.length;ii>i;i++){var input=inputs[i];input.constant||(input.inputs?collectExpressionInputs(input.inputs,list):-1===list.indexOf(input)&&list.push(input))}return list}function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:"object"==typeof newValue&&(newValue=newValue.valueOf(),"object"==typeof newValue)?!1:newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression){var lastResult,inputExpressions=parsedExpression.$$inputs||(parsedExpression.$$inputs=collectExpressionInputs(parsedExpression.inputs,[]));if(1===inputExpressions.length){var oldInputValue=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValue)||(lastResult=parsedExpression(scope),oldInputValue=newInputValue&&newInputValue.valueOf()),lastResult},listener,objectEquality)}for(var oldInputValueOfValues=[],i=0,ii=inputExpressions.length;ii>i;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;ii>i;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValueOfValues[i]=newInputValue&&newInputValue.valueOf())}return changed&&(lastResult=parsedExpression(scope)),lastResult},listener,objectEquality)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}var unwatch;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(value)&&unwatch()})},objectEquality)}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(){isFunction(listener)&&listener.apply(this,arguments),unwatch()},objectEquality)}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var fn=function(scope,locals){var value=parsedExpression(scope,locals),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,fn.inputs=[parsedExpression]),fn}return $parseOptions.csp=$sniffer.csp,function(exp,interceptorFn){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":if(cacheKey=exp=exp.trim(),parsedExpression=cache[cacheKey],!parsedExpression){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var lexer=new Lexer($parseOptions),parser=new Parser(lexer,$filter,$parseOptions);parsedExpression=parser.parse(exp),parsedExpression.constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?(parsedExpression=wrapSharedExpression(parsedExpression),parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate):parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function callOnce(self,resolveFn,rejectFn){function wrap(fn){return function(value){called||(called=!0,fn.call(self,value))}}var called=!1;return[wrap(resolveFn),wrap(rejectFn)]}function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function processQueue(state){var fn,promise,pending;pending=state.pending,state.processScheduled=!1,state.pending=undefined;for(var i=0,ii=pending.length;ii>i;++i){promise=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?promise.resolve(fn(state.value)):1===state.status?promise.resolve(state.value):promise.reject(state.value)}catch(e){promise.reject(e),exceptionHandler(e)}}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){processQueue(state)}))}function Deferred(){this.promise=new Promise,this.resolve=simpleBind(this,this.resolve),this.reject=simpleBind(this,this.reject),this.notify=simpleBind(this,this.notify)}function all(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var $qMinErr=minErr("$q",TypeError),defer=function(){return new Deferred};Promise.prototype={then:function(onFulfilled,onRejected,progressBack){var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}},Deferred.prototype={resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))},$$resolve:function(val){var then,fns;fns=callOnce(this,this.$$resolve,this.$$reject);try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,fns[0],fns[1],this.notify)):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){fns[1](e),exceptionHandler(e)}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;ii>i;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}};var reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},$Q=function Q(resolver){function resolveFn(value){deferred.resolve(value)}function rejectFn(reason){deferred.reject(reason)}if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);if(!(this instanceof Q))return new Q(resolver);var deferred=new Deferred;return resolver(resolveFn,rejectFn),deferred.promise};return $Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.all=all,$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame||$window.mozRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.mozCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null,this.$$applyAsyncQueue=[]}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(var queue=$rootScope.$$applyAsyncQueue;queue.length;)try{queue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(isolate){var child;return isolate?(child=new Scope,child.$root=this.$root,child.$$asyncQueue=this.$$asyncQueue,child.$$postDigestQueue=this.$$postDigestQueue):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=nextUid(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),child=new this.$$ChildScope),child["this"]=child,child.$parent=this,child.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=child,this.$$childTail=child):this.$$childHead=this.$$childTail=child,child},$watch:function(watchExp,listener,objectEquality){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),function(){arrayRemove(array,watcher),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}return 1===watchExpressions.length?this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)}):(forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()})},$watchCollection:function(obj,listener){function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)oldItem=oldValue[i],newItem=newValue[i],bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?(bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[key]=newItem)):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)newValue.hasOwnProperty(key)||(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,logMsg,asyncTask,asyncQueue=this.$$asyncQueue,postDigestQueue=this.$$postDigestQueue,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),logMsg=isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,logMsg+="; newVal: "+toJson(value)+"; oldVal: "+toJson(last),watchLog[logIdx].push(logMsg))}catch(e){$exceptionHandler(e)}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,toJson(watchLog))}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==$rootScope){for(var eventName in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop}}}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr){$rootScope.$$phase||$rootScope.$$asyncQueue.length||$browser.defer(function(){$rootScope.$$asyncQueue.length&&$rootScope.$digest()}),this.$$asyncQueue.push({scope:this,expression:expr})},$$postDigest:function(fn){this.$$postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){function $applyAsyncExpression(){scope.$eval(expr)}var scope=this;expr&&$rootScope.$$applyAsyncQueue.push($applyAsyncExpression),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){namedListeners[namedListeners.indexOf(listener)]=null,decrementListenerCount(self,1,name)}},$emit:function(name){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope;return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return msie&&!(msie>=8)||(normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex))?uri:"unsafe:"+normalizedVal}}}function escapeForRegexp(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sniffer","$sceDelegate",function($parse,$sniffer,$sceDelegate){if(enabled&&$sniffer.msie&&$sniffer.msieDocumentMode<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},documentMode=document.documentMode,vendorRegex=/^(Moz|webkit|O|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(document.body.style.webkitTransition),animations=isString(document.body.style.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hashchange:"onhashchange"in $window&&(!documentMode||documentMode>7),hasEvent:function(event){if("input"==event&&9==msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android,msie:msie,msieDocumentMode:documentMode}}]}function $TemplateRequestProvider(){this.$get=["$templateCache","$http","$q",function($templateCache,$http,$q){function handleRequestFn(tpl,ignoreRequestError){function handleError(){if(self.totalPendingRequests--,!ignoreRequestError)throw $compileMinErr("tpload","Failed to load template: {0}",tpl);return $q.reject()}var self=handleRequestFn;return self.totalPendingRequests++,$http.get(tpl,{cache:$templateCache}).then(function(response){var html=response.data;return html&&0!==html.length?(self.totalPendingRequests--,$templateCache.put(tpl,html),html):handleError()},handleError)}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};return testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp("(^|\\s)"+expression+"(\\s|\\||$)");matcher.test(bindingName)&&matches.push(binding)
}else-1!=bindingName.indexOf(expression)&&matches.push(binding)})}),matches},testability.findModels=function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=",selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},testability.getLocation=function(){return $location.url()},testability.setLocation=function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)},testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var comparatorType=typeof comparator,predicates=[];predicates.check=function(value,index){for(var j=0;j<predicates.length;j++)if(!predicates[j](value,index))return!1;return!0},"function"!==comparatorType&&(comparator="boolean"===comparatorType&&comparator?function(obj,text){return angular.equals(obj,text)}:function(obj,text){if(obj&&text&&"object"==typeof obj&&"object"==typeof text){for(var objKey in obj)if("$"!==objKey.charAt(0)&&hasOwnProperty.call(obj,objKey)&&comparator(obj[objKey],text[objKey]))return!0;return!1}return text=(""+text).toLowerCase(),(""+obj).toLowerCase().indexOf(text)>-1});var search=function(obj,text){if("string"==typeof text&&"!"===text.charAt(0))return!search(obj,text.substr(1));switch(typeof obj){case"boolean":case"number":case"string":return comparator(obj,text);case"object":switch(typeof text){case"object":return comparator(obj,text);default:for(var objKey in obj)if("$"!==objKey.charAt(0)&&search(obj[objKey],text))return!0}return!1;case"array":for(var i=0;i<obj.length;i++)if(search(obj[i],text))return!0;return!1;default:return!1}};switch(typeof expression){case"boolean":case"number":case"string":expression={$:expression};case"object":for(var key in expression)!function(path){"undefined"!=typeof expression[path]&&predicates.push(function(value){return search("$"==path?value:value&&value[path],expression[path])})}(key);break;case"function":predicates.push(expression);break;default:return array}for(var filtered=[],j=0;j<array.length;j++){var value=array[j];predicates.check(value,j)&&filtered.push(value)}return filtered}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,2).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isFinite(number)||isObject(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?(numStr="0",number=0):(formatedText=numStr,hasExponent=!0)}if(hasExponent)fractionSize>0&&number>-1&&1>number&&(formatedText=number.toFixed(fractionSize));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac)),number=+(Math.round(+(number.toString()+"e"+fractionSize)).toString()+"e"+-fractionSize),0===number&&(isNegative=!1);var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return parts.push(isNegative?pattern.negPre:pattern.posPre),parts.push(formatedText),parts.push(isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(4>=dayOfWeekOnFirst?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date),diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6048e5);return padNumber(result,size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=int(match[9]+match[10]),tzMin=int(match[9]+match[11])),dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);return timezone&&"UTC"===timezone&&(date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+date.getTimezoneOffset())),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object){return toJson(object,!0)}}function limitToFilter(){return function(input,limit){if(isNumber(input)&&(input=input.toString()),!isArray(input)&&!isString(input))return input;if(limit=1/0===Math.abs(Number(limit))?Number(limit):int(limit),isString(input))return limit?limit>=0?input.slice(0,limit):input.slice(limit,input.length):"";var i,n,out=[];for(limit>input.length?limit=input.length:limit<-input.length&&(limit=-input.length),limit>0?(i=0,n=limit):(i=input.length+limit,n=input.length);n>i;i++)out.push(input[i]);return out}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return descending?function(a,b){return comp(b,a)}:comp}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1==t2?(isDate(v1)&&isDate(v2)&&(v1=v1.valueOf(),v2=v2.valueOf()),"string"==t1&&(v1=v1.toLowerCase(),v2=v2.toLowerCase()),v1===v2?0:v2>v1?-1:1):t2>t1?-1:1}if(!isArrayLike(array))return array;if(!sortPredicate)return array;sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate],sortPredicate=map(sortPredicate,function(predicate){var descending=!1,get=predicate||identity;if(isString(predicate)&&(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0),predicate=predicate.substring(1)),get=$parse(predicate),get.constant)){var key=get();return reverseComparator(function(a,b){return compare(a[key],b[key])},descending)}return reverseComparator(function(a,b){return compare(get(a),get(b))},descending)});for(var arrayCopy=[],i=0;i<array.length;i++)arrayCopy.push(array[i]);return arrayCopy.sort(reverseComparator(comparator,reverseOrder))}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function FormController(element,attrs,$scope,$animate){var form=this,parentForm=element.parent().controller("form")||nullFormCtrl,controls=[];form.$error={},form.$$success={},form.$pending=undefined,form.$name=attrs.name||attrs.ngForm,form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,parentForm.$addControl(form),element.addClass(PRISTINE_CLASS),form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control)},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,control){var list=object[property];if(list){var index=list.indexOf(control);-1===index&&list.push(control)}else object[property]=[control]},unset:function(object,property,control){var list=object[property];list&&(arrayRemove(list,control),0===list.length&&delete object[property])},parentForm:parentForm,$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS),form.$submitted=!0,parentForm.$setSubmitted()}}function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var placeholder=(element.prop(VALIDITY_STATE_PROPERTY),element[0].placeholder),noevent={},type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(!composing){var value=element.val(),event=ev&&ev.type;if(msie&&"input"===(ev||noevent).type&&element[0].placeholder!==placeholder)return void(placeholder=element[0].placeholder);"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(ev){timeout||(timeout=$browser.defer(function(){listener(ev),timeout=null}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener(event)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$modelValue)?"":ctrl.$viewValue)}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return 0/0}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'==iso.charAt(0)&&'"'==iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,map.sss||0)}return 0/0}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){function parseObservedDateValue(val){return isDefined(val)?isDate(val)?val:parseDate(val):undefined}badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;if(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var previousDate=ctrl.$modelValue;if(previousDate&&"UTC"===timezone){var timezoneOffset=6e4*previousDate.getTimezoneOffset();previousDate=new Date(previousDate.getTime()+timezoneOffset)}var parsedDate=parseDate(value,previousDate);return"UTC"===timezone&&parsedDate.setMinutes(parsedDate.getMinutes()-parsedDate.getTimezoneOffset()),parsedDate}return undefined}),ctrl.$formatters.push(function(value){return isDate(value)?$filter("date")(value,format,timezone):""}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0],nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);nativeValidation&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput&&!validity.typeMismatch?undefined:value})}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):undefined}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw $ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value}),attr.min||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),minVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}if(attr.max||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||maxVal>=value},attr.$observe("max",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),maxVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(value){return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(value){return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());var listener=function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(parseFn=$parse(expression),!parseFn.constant)throw minErr("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1),listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value!==trueValue},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function addSetValidityMethod(context){function setValidity(validationErrorKey,state,options){state===undefined?createAndSet("$pending",validationErrorKey,options):unsetAndCleanup("$pending",validationErrorKey,options),isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,options),set(ctrl.$$success,validationErrorKey,options)):(set(ctrl.$error,validationErrorKey,options),unset(ctrl.$$success,validationErrorKey,options)):(unset(ctrl.$error,validationErrorKey,options),unset(ctrl.$$success,validationErrorKey,options)),ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=undefined,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?undefined:ctrl.$error[validationErrorKey]?!1:ctrl.$$success[validationErrorKey]?!0:null,toggleValidationCss(validationErrorKey,combinedState),parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}function createAndSet(name,value,options){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,options)}function unsetAndCleanup(name,value,options){ctrl[name]&&unset(ctrl[name],value,options),isObjectEmpty(ctrl[name])&&(ctrl[name]=undefined)}function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,isValid===!0),cachedToggleClass(INVALID_CLASS+validationErrorKey,isValid===!1)}var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,parentForm=context.parentForm,$animate=context.$animate;ctrl.$setValidity=setValidity,toggleValidationCss("",!0)}function isObjectEmpty(obj){if(obj)for(var prop in obj)return!1;return!0}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){if(isArray(classVal))return classVal;if(isString(classVal))return classVal.split(" ");if(isObject(classVal)){var classes=[];return forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes}return classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||{},classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,slice=[].slice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;msie=int((/msie (\d+)/.exec(lowercase(navigator.userAgent))||[])[1]),isNaN(msie)&&(msie=int((/trident\/.*; rv:(\d+)/.exec(lowercase(navigator.userAgent))||[])[1])),noop.$inject=[],identity.$inject=[];var skipDestroyOnNextJQueryCleanData,isArray=Array.isArray,trim=function(value){return isString(value)?value.trim():value},csp=function(){if(isDefined(csp.isActive_))return csp.isActive_;var active=!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"));if(!active)try{new Function("")}catch(e){active=!0}return csp.isActive_=active},ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"],SNAKE_CASE_REGEXP=/[A-Z]/g,bindJQueryFired=!1,version={full:"1.3.0-rc.2",major:1,minor:3,dot:0,codeName:"tactile-perception"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger),this.on("DOMContentLoaded",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};forEach({data:jqLiteData,removeData:jqLiteRemoveData},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){return name=camelCase(name),isDefined(value)?void(element.style[name]=value):element.style[name]},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return 1===nodeType||3===nodeType?element.textContent:""}element.textContent=value}return getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){return isUndefined(value)?element.innerHTML:(jqLiteDealoc(element,!0),void(element.innerHTML=value))},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;nodeCount>i;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(nodeCount,1):nodeCount,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;nodeCount>i;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length;i--;){type=types[i];var eventFns=events[type];eventFns||(events[type]=[],"mouseenter"===type||"mouseleave"===type?jqLiteOn(element,MOUSE_EVENT_MAP[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!target.contains(related))&&handle(event,type)
}):"$destroy"!==type&&addEventListenerFn(element,type,handle),eventFns=events[type]),eventFns.push(fn)}}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){1===element.nodeType&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(1===nodeType||11===nodeType){node=new JQLite(node);for(var i=0,ii=node.length;ii>i;i++){var child=node[i];element.appendChild(child)}}},prepend:function(element,node){if(1===element.nodeType){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode).eq(0).clone()[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;ii>i;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&11!==parent.nodeType?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;ii>i;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");createInjector.$$annotate=annotate;var $animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={},this.register=function(name,factory){var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){return 1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback",function($$q,$$asyncCallback){function asyncPromise(){return currentDefer||(currentDefer=$$q.defer(),$$asyncCallback(function(){currentDefer.resolve(),currentDefer=null})),currentDefer.promise}var currentDefer;return{enter:function(element,parent,after){return after?after.after(element):parent.prepend(element),asyncPromise()},leave:function(element){return element.remove(),asyncPromise()},move:function(element,parent,after){return this.enter(element,parent,after)},addClass:function(element,className){return className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteAddClass(element,className)}),asyncPromise()},removeClass:function(element,className){return className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteRemoveClass(element,className)}),asyncPromise()},setClass:function(element,add,remove){return this.addClass(element,add),this.removeClass(element,remove),asyncPromise()},enabled:noop,cancel:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^(x[\:\-_]|data[\:\-_])/i,$interpolateMinErr=minErr("$interpolate"),PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");LocationHashbangInHtml5Url.prototype=LocationHashbangUrl.prototype=LocationHtml5Url.prototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return match[1]&&this.path(decodeURIComponent(match[1])),(match[2]||match[1])&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return path=path?path.toString():"","/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");forEach(search,function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};var $parseMinErr=minErr("$parse"),CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,CONSTANTS=createMap();forEach({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(constantGetter,name){constantGetter.constant=constantGetter.literal=constantGetter.sharedGetter=!0,CONSTANTS[name]=constantGetter});var OPERATORS=extend(createMap(),{"+":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"^":function(self,locals,a,b){return a(self,locals)^b(self,locals)},"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"&":function(self,locals,a,b){return a(self,locals)&b(self,locals)},"!":function(self,locals,a){return!a(self,locals)},"=":!0,"|":!0}),ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.ch=undefined,this.tokens=[];this.index<this.text.length;)if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else if(this.isWhitespace(this.ch))this.index++;else{var ch2=this.ch+this.peek(),ch3=ch2+this.peek(2),fn=OPERATORS[this.ch],fn2=OPERATORS[ch2],fn3=OPERATORS[ch3];fn3?(this.tokens.push({index:this.index,text:ch3,fn:fn3}),this.index+=3):fn2?(this.tokens.push({index:this.index,text:ch2,fn:fn2}),this.index+=2):fn?(this.tokens.push({index:this.index,text:this.ch,fn:fn}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(chars){return-1!==chars.indexOf(this.ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"	"===ch||"\n"===ch||""===ch||""===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}number=1*number,this.tokens.push({index:start,text:number,constant:!0,fn:function(){return number}})},readIdent:function(){for(var lastDot,peekIndex,methodName,ch,expression=this.text,ident="",start=this.index;this.index<this.text.length&&(ch=this.text.charAt(this.index),"."===ch||this.isIdent(ch)||this.isNumber(ch));)"."===ch&&(lastDot=this.index),ident+=ch,this.index++;if(lastDot&&"."===ident[ident.length-1]&&(this.index--,ident=ident.slice(0,-1),lastDot=ident.lastIndexOf("."),-1===lastDot&&(lastDot=undefined)),lastDot)for(peekIndex=this.index;peekIndex<this.text.length;){if(ch=this.text.charAt(peekIndex),"("===ch){methodName=ident.substr(lastDot-start+1),ident=ident.substr(0,lastDot-start),this.index=peekIndex;break}if(!this.isWhitespace(ch))break;peekIndex++}this.tokens.push({index:start,text:ident,fn:CONSTANTS[ident]||getterFn(ident,this.options,expression)}),methodName&&(this.tokens.push({index:lastDot,text:"."}),this.tokens.push({index:lastDot+1,text:methodName}))},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,string:string,constant:!0,fn:function(){return string}});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options};Parser.ZERO=extend(function(){return 0},{sharedGetter:!0,constant:!0}),Parser.prototype={constructor:Parser,parse:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value.literal=!!value.literal,value.constant=!!value.constant,value},primary:function(){var primary;if(this.expect("("))primary=this.filterChain(),this.consume(")");else if(this.expect("["))primary=this.arrayDeclaration();else if(this.expect("{"))primary=this.object();else{var token=this.expect();primary=token.fn,primary||this.throwError("not a primary expression",token),token.constant&&(primary.constant=!0,primary.literal=!0)}for(var next,context;next=this.expect("(","[",".");)"("===next.text?(primary=this.functionCall(primary,context),context=null):"["===next.text?(context=primary,primary=this.objectIndex(primary)):"."===next.text?(context=primary,primary=this.fieldAccess(primary)):this.throwError("IMPOSSIBLE");return primary},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){if(this.tokens.length>0){var token=this.tokens[0],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.tokens.shift(),token):!1},consume:function(e1){this.expect(e1)||this.throwError("is unexpected, expecting ["+e1+"]",this.peek())},unaryFn:function(fn,right){return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant,inputs:[right]})},binaryFn:function(left,fn,right,isBranching){return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant,inputs:!isBranching&&[left,right]})},statements:function(){for(var statements=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&statements.push(this.filterChain()),!this.expect(";"))return 1===statements.length?statements[0]:function(self,locals){for(var value,i=0,ii=statements.length;ii>i;i++)value=statements[i](self,locals);return value}},filterChain:function(){for(var token,left=this.expression();token=this.expect("|");)left=this.filter(left);return left},filter:function(inputFn){var argsFn,args,token=this.expect(),fn=this.$filter(token.text);if(this.peek(":"))for(argsFn=[],args=[];this.expect(":");)argsFn.push(this.expression());var inputs=[inputFn].concat(argsFn||[]);return extend(function(self,locals){var input=inputFn(self,locals);if(args){args[0]=input;for(var i=argsFn.length;i--;)args[i+1]=argsFn[i](self,locals);return fn.apply(undefined,args)}return fn(input)},{constant:!fn.$stateful&&inputs.every(isConstant),inputs:!fn.$stateful&&inputs})},expression:function(){return this.assignment()},assignment:function(){var right,token,left=this.ternary();return(token=this.expect("="))?(left.assign||this.throwError("implies assignment but ["+this.text.substring(0,token.index)+"] can not be assigned to",token),right=this.ternary(),extend(function(scope,locals){return left.assign(scope,right(scope,locals),locals)},{inputs:[left,right]})):left},ternary:function(){var middle,token,left=this.logicalOR();if(token=this.expect("?")){if(middle=this.assignment(),token=this.expect(":")){var right=this.assignment();return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})}this.throwError("expected :",token)}return left},logicalOR:function(){for(var token,left=this.logicalAND();token=this.expect("||");)left=this.binaryFn(left,token.fn,this.logicalAND(),!0);return left},logicalAND:function(){var token,left=this.equality();return(token=this.expect("&&"))&&(left=this.binaryFn(left,token.fn,this.logicalAND(),!0)),left},equality:function(){var token,left=this.relational();return(token=this.expect("==","!=","===","!=="))&&(left=this.binaryFn(left,token.fn,this.equality())),left},relational:function(){var token,left=this.additive();return(token=this.expect("<",">","<=",">="))&&(left=this.binaryFn(left,token.fn,this.relational())),left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left=this.binaryFn(left,token.fn,this.multiplicative());return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left=this.binaryFn(left,token.fn,this.unary());return left},unary:function(){var token;return this.expect("+")?this.primary():(token=this.expect("-"))?this.binaryFn(Parser.ZERO,token.fn,this.unary()):(token=this.expect("!"))?this.unaryFn(token.fn,this.unary()):this.primary()},fieldAccess:function(object){var expression=this.text,field=this.expect().text,getter=getterFn(field,this.options,expression);return extend(function(scope,locals,self){return getter(self||object(scope,locals))},{assign:function(scope,value,locals){var o=object(scope,locals);return o||object.assign(scope,o={}),setter(o,field,value,expression)}})},objectIndex:function(obj){var expression=this.text,indexFn=this.expression();return this.consume("]"),extend(function(self,locals){var v,o=obj(self,locals),i=indexFn(self,locals);return ensureSafeMemberName(i,expression),o?v=ensureSafeObject(o[i],expression):undefined},{assign:function(self,value,locals){var key=ensureSafeMemberName(indexFn(self,locals),expression),o=ensureSafeObject(obj(self,locals),expression);return o||obj.assign(self,o={}),o[key]=value}})},functionCall:function(fnGetter,contextGetter){var argsFn=[];if(")"!==this.peekToken().text)do argsFn.push(this.expression());while(this.expect(","));this.consume(")");var expressionText=this.text,args=argsFn.length?[]:null;return function(scope,locals){var context=contextGetter?contextGetter(scope,locals):scope,fn=fnGetter(scope,locals,context)||noop;if(args)for(var i=argsFn.length;i--;)args[i]=ensureSafeObject(argsFn[i](scope,locals),expressionText);ensureSafeObject(context,expressionText),ensureSafeFunction(fn,expressionText);var v=fn.apply?fn.apply(context,args):fn(args[0],args[1],args[2],args[3],args[4]);return ensureSafeObject(v,expressionText)}},arrayDeclaration:function(){var elementFns=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var elementFn=this.expression();elementFns.push(elementFn)}while(this.expect(","));return this.consume("]"),extend(function(self,locals){for(var array=[],i=0,ii=elementFns.length;ii>i;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:elementFns.every(isConstant),inputs:elementFns})},object:function(){var keys=[],valueFns=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var token=this.expect();keys.push(token.string||token.text),this.consume(":");var value=this.expression();valueFns.push(value)}while(this.expect(","));return this.consume("}"),extend(function(self,locals){for(var object={},i=0,ii=valueFns.length;ii>i;i++)object[keys[i]]=valueFns[i](self,locals);return object},{literal:!0,constant:valueFns.every(isConstant),inputs:valueFns})}};var getterFnCache=createMap(),$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$compileMinErr=minErr("$compile"),urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href,!0);$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1)},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return 8>=msie&&(attr.href||attr.name||attr.$set("href",""),element.append(document.createComment("IE fix"))),attr.href||attr.xlinkHref||attr.name?void 0:function(scope,element){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"==attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){return value?(attr.$set(name,value),void(msie&&propName&&element.prop(propName,attr[name]))):void("href"===attrName&&attr.$set(name,null))})}}}});var nullFormCtrl={$addControl:noop,$removeControl:noop,$setValidity:noop,$$setPending:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop,$$clearControlValidity:noop},SUBMITTED_CLASS="ng-submitted";FormController.$inject=["$element","$attrs","$scope","$animate"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(){return{pre:function(scope,formElement,attr,controller){if(!attr.action){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault?event.preventDefault():event.returnValue=!1};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}var parentFormCtrl=formElement.parent().controller("form"),alias=attr.name||attr.ngForm;alias&&setter(scope,alias,controller,alias),parentFormCtrl&&formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),alias&&setter(scope,alias,undefined,alias),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,DATE_REGEXP=/^(\d{4})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d))?$/,WEEK_REGEXP=/^(\d{4})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d))?$/,DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,$ngModelMinErr=new minErr("ngModel"),inputType={text:textInputType,date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss"]),"yyyy-MM-ddTHH:mm:ss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss"]),"HH:mm:ss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}],VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",UNTOUCHED_CLASS="ng-untouched",TOUCHED_CLASS="ng-touched",PENDING_CLASS="ng-pending",NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=undefined,this.$name=$attr.name;var parsedNgModel=$parse($attr.ngModel),pendingDebounce=null,ctrl=this,ngModelGet=function(){var modelValue=parsedNgModel($scope);return ctrl.$options&&ctrl.$options.getterSetter&&isFunction(modelValue)&&(modelValue=modelValue()),modelValue},ngModelSet=function(){var getterSetter;ctrl.$options&&ctrl.$options.getterSetter&&isFunction(getterSetter=parsedNgModel($scope))?getterSetter(ctrl.$modelValue):parsedNgModel.assign($scope,ctrl.$modelValue)};this.$$setOptions=function(options){if(ctrl.$options=options,!(parsedNgModel.assign||options&&options.getterSetter))throw $ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,currentValidationRunId=0;$element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS),addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},parentForm:parentForm,$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,UNTOUCHED_CLASS,TOUCHED_CLASS)},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,TOUCHED_CLASS,UNTOUCHED_CLASS)},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)||this.$$parseAndValidate()},this.$$runValidators=function(parseValid,modelValue,viewValue,doneCallback){function processParseErrors(parseValid){var errorKey=ctrl.$$parserName||"parse";if(parseValid===undefined)setValidity(errorKey,null);else if(setValidity(errorKey,parseValid),!parseValid)return forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1;return!0}function processSyncValidators(){var syncValidatorsValid=!0;return forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),syncValidatorsValid?!0:(forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1)}function processAsyncValidators(){var validatorPromises=[],allValid=!0;forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw $ngModelMinErr("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,undefined),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)}function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}currentValidationRunId++;var localValidationRunId=currentValidationRunId;return processParseErrors(parseValid)&&processSyncValidators()?void processAsyncValidators():void validationDone(!1)},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&(ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),parentForm.$setDirty()),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}for(var parserValid=!0,viewValue=ctrl.$$lastCommittedViewValue,modelValue=viewValue,i=0;i<ctrl.$parsers.length;i++)if(modelValue=ctrl.$parsers[i](modelValue),isUndefined(modelValue)){parserValid=!1;break}isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet());var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(parserValid,modelValue,viewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:undefined,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet(ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)
}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,(!ctrl.$options||ctrl.$options.updateOnDefault)&&ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;options&&isDefined(options.debounce)&&(debounce=options.debounce,isNumber(debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce["default"])&&(debounceDelay=debounce["default"])),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet();if(modelValue!==ctrl.$modelValue){ctrl.$modelValue=modelValue;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(undefined,modelValue,viewValue,noop))}return modelValue})}],ngModelDirective=function(){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,link:{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(){modelCtrl.$touched||scope.$apply(function(){modelCtrl.$setTouched()})})}}}},ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(value){return!attr.required||!ctrl.$isEmpty(value)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp(regex)),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||undefined,ctrl.$validate()}),ctrl.$validators.pattern=function(value){return ctrl.$isEmpty(value)||isUndefined(regexp)||regexp.test(value)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=0;attr.$observe("maxlength",function(value){maxlength=int(value)||0,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return ctrl.$isEmpty(modelValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=int(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(modelValue)||viewValue.length>=minlength}}}}},ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList,parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(ngList):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=$scope.$eval($attrs.ngModelOptions),this.$options.updateOn!==undefined?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),scope.$watch(attr.ngBind,function(value){element.text(value==undefined?"":value)})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),attr.$observe("ngBindTemplate",function(value){element.text(value)})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(value){return(value||"").toString()});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope))||"")})}}}}],ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName]);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate",function($animate){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate","$sce",function($templateRequest,$anchorScroll,$animate,$sce){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){return/SVG/.test($element[0].toString())?($element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,document).childNodes)(scope,function(clone){$element.append(clone)},undefined,undefined,$element)):($element.html(ctrl.template),void $compile($element.contents())(scope))}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g;return{restrict:"EA",link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),isWhen=/^when(Minus)?(.+)$/;forEach(attr,function(expression,attributeName){isWhen.test(attributeName)&&(whens[lowercase(attributeName.replace("when","").replace("Minus","-"))]=element.attr(attr.$attr[attributeName]))}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,startSymbol+numberExp+"-"+offset+endSymbol))}),scope.$watch(function(){var value=parseFloat(scope.$eval(numberExp));return isNaN(value)?"":(value in whens||(value=$locale.pluralCat(value-offset)),whensExpFns[value](scope))},function(newVal){element.text(newVal)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0===(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=document.createComment(" end ngRepeat: "+expression+" "),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(match=lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(var itemKey in collection)collection.hasOwnProperty(itemKey)&&"$"!=itemKey.charAt(0)&&collectionKeys.push(itemKey);collectionKeys.sort()}for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,toJson(value));nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(block=lastBlockMap[blockKey],elementsToRemove=getBlockNodes(block.clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;length>index;index++)elementsToRemove[index][NG_REMOVED]=!0;block.scope.$destroy()}for(index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],block.scope){nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockNodes(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,jqLite(previousNode)),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,"ng-hide")})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,"ng-hide")})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;ii>i;++i)$animate.cancel(previousLeaveAnimations[i]);for(previousLeaveAnimations.length=0,i=0,ii=selectedScopes.length;ii>i;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var promise=previousLeaveAnimations[i]=$animate.leave(selected);promise.then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=document.createComment(" end ngSwitchWhen: ");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsMinErr=minErr("ngOptions"),ngOptionsDirective=valueFn({restrict:"A",terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel,self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_,nullOption=nullOption_,unknownOption=unknownOption_},self.addOption=function(value,element){assertNotHasOwnProperty(value,'"option value"'),optionsMap[value]=!0,ngModelCtrl.$viewValue==value&&($element.val(value),unknownOption.parent()&&unknownOption.remove()),element[0].hasAttribute("selected")&&(element[0].selected=!0)},self.removeOption=function(value){this.hasOption(value)&&(delete optionsMap[value],ngModelCtrl.$viewValue==value&&this.renderUnknownOption(value))},self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal),$element.prepend(unknownOption),$element.val(unknownVal),unknownOption.prop("selected",!0)},self.hasOption=function(value){return optionsMap.hasOwnProperty(value)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;selectCtrl.hasOption(viewValue)?(unknownOption.parent()&&unknownOption.remove(),selectElement.val(viewValue),""===viewValue&&emptyOption.prop("selected",!0)):isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)},selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove(),ngModelCtrl.$setViewValue(selectElement.val())})})}function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})},scope.$watch(function(){equals(lastView,ctrl.$viewValue)||(lastView=shallowCopy(ctrl.$viewValue),ctrl.$render())}),selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)}),ctrl.$setViewValue(array)})})}function setupAsOptions(scope,selectElement,ctrl){function getSelectedSet(){var selectedSet=!1;if(multiple){var modelValue=ctrl.$modelValue;if(trackFn&&isArray(modelValue)){selectedSet=new HashMap([]);for(var locals={},trackIndex=0;trackIndex<modelValue.length;trackIndex++)locals[valueName]=modelValue[trackIndex],selectedSet.put(trackFn(scope,locals),modelValue[trackIndex])}else selectedSet=new HashMap(modelValue)}return selectedSet}function scheduleRendering(){renderScheduled||(scope.$$postDigest(render),renderScheduled=!0)}function render(){renderScheduled=!1;var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,key,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionGroups={"":[]},optionGroupNames=[""],modelValue=ctrl.$modelValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,locals={},selectedSet=getSelectedSet();for(index=0;length=keys.length,length>index;index++){if(key=index,keyName){if(key=keys[index],"$"===key.charAt(0))continue;locals[keyName]=key}if(locals[valueName]=values[key],optionGroupName=groupByFn(scope,locals)||"",(optionGroup=optionGroups[optionGroupName])||(optionGroup=optionGroups[optionGroupName]=[],optionGroupNames.push(optionGroupName)),multiple)selected=isDefined(selectedSet.remove(trackFn?trackFn(scope,locals):valueFn(scope,locals)));else{if(trackFn){var modelCast={};modelCast[valueName]=modelValue,selected=trackFn(scope,modelCast)===trackFn(scope,locals)}else selected=modelValue===valueFn(scope,locals);selectedSet=selectedSet||selected}label=displayFn(scope,locals),label=isDefined(label)?label:"",optionGroup.push({id:trackFn?trackFn(scope,locals):keyName?keys[index]:index,label:label,selected:selected})}for(multiple||(nullOption||null===modelValue?optionGroups[""].unshift({id:"",label:"",selected:!selectedSet}):selectedSet||optionGroups[""].unshift({id:"?",label:"",selected:!0})),groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){for(optionGroupName=optionGroupNames[groupIndex],optionGroup=optionGroups[optionGroupName],optionGroupsCache.length<=groupIndex?(existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label},existingOptions=[existingParent],optionGroupsCache.push(existingOptions),selectElement.append(existingParent.element)):(existingOptions=optionGroupsCache[groupIndex],existingParent=existingOptions[0],existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)),lastElement=null,index=0,length=optionGroup.length;length>index;index++)option=optionGroup[index],(existingOption=existingOptions[index+1])?(lastElement=existingOption.element,existingOption.label!==option.label&&lastElement.text(existingOption.label=option.label),existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id),lastElement[0].selected!==option.selected&&(lastElement.prop("selected",existingOption.selected=option.selected),msie&&lastElement.prop("selected",existingOption.selected))):(""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).prop("selected",option.selected).attr("selected",option.selected).text(option.label),existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected}),lastElement?lastElement.after(element):existingParent.element.append(element),lastElement=element);for(index++;existingOptions.length>index;)existingOptions.pop().element.remove()}for(;optionGroupsCache.length>groupIndex;)optionGroupsCache.pop()[0].element.remove()}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,optionGroupsCache=[[{element:selectElement,label:""}]];nullOption&&($compile(nullOption)(scope),nullOption.removeClass("ng-scope"),nullOption.remove()),selectElement.empty(),selectElement.on("change",function(){scope.$apply(function(){var optionGroup,key,value,optionElement,index,groupIndex,length,groupLength,trackIndex,collection=valuesFn(scope)||[],locals={};if(multiple){for(value=[],groupIndex=0,groupLength=optionGroupsCache.length;groupLength>groupIndex;groupIndex++)for(optionGroup=optionGroupsCache[groupIndex],index=1,length=optionGroup.length;length>index;index++)if((optionElement=optionGroup[index].element)[0].selected){if(key=optionElement.val(),keyName&&(locals[keyName]=key),trackFn)for(trackIndex=0;trackIndex<collection.length&&(locals[valueName]=collection[trackIndex],trackFn(scope,locals)!=key);trackIndex++);else locals[valueName]=collection[key];value.push(valueFn(scope,locals))}}else if(key=selectElement.val(),"?"==key)value=undefined;else if(""===key)value=null;else if(trackFn){for(trackIndex=0;trackIndex<collection.length;trackIndex++)if(locals[valueName]=collection[trackIndex],trackFn(scope,locals)==key){value=valueFn(scope,locals);break}}else locals[valueName]=collection[key],keyName&&(locals[keyName]=key),value=valueFn(scope,locals);ctrl.$setViewValue(value),render()})}),ctrl.$render=render,scope.$watchCollection(valuesFn,scheduleRendering),scope.$watchCollection(function(){var locals={},values=valuesFn(scope);if(values){for(var toDisplay=new Array(values.length),i=0,ii=values.length;ii>i;i++)locals[valueName]=values[i],toDisplay[i]=displayFn(scope,locals);return toDisplay}},scheduleRendering),multiple&&scope.$watchCollection(function(){return ctrl.$modelValue},scheduleRendering)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,renderScheduled=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=nullOption=children.eq(i);break}selectCtrl.init(ngModelCtrl,nullOption,unknownOption),multiple&&(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}),optionsExp?setupAsOptions(scope,element,ngModelCtrl):multiple?setupAsMultiple(scope,element,ngModelCtrl):setupAsSingle(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound?element.prop("selected",!1):selectCtrl=nullSelectCtrl,interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),oldVal!==newVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal,element)}):selectCtrl.addOption(attr.value,element),element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!1});return window.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(bindJQuery(),publishExternalAPI(angular),void jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(window,angular,undefined){"use strict";angular.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var NG_ANIMATE_CHILDREN="$$ngAnimateChildren";return function(scope,element,attrs){var val=attrs.ngAnimateChildren;angular.isString(val)&&0===val.length?element.data(NG_ANIMATE_CHILDREN,!0):scope.$watch(val,function(value){element.data(NG_ANIMATE_CHILDREN,!!value)})}}).factory("$$animateReflow",["$$rAF","$document",function($$rAF,$document){var bod=$document[0].body;return function(fn){return $$rAF(function(){bod.offsetWidth+1;fn()})}}]).config(["$provide","$animateProvider",function($provide,$animateProvider){function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType==ELEMENT_NODE)return elm}}function prepareElement(element){return element&&angular.element(element)}function stripCommentsFromElement(element){return angular.element(extractElementNode(element))}function isMatchingElement(elm1,elm2){return extractElementNode(elm1)==extractElementNode(elm2)}var noop=angular.noop,forEach=angular.forEach,selectors=$animateProvider.$$selectors,isArray=angular.isArray,ELEMENT_NODE=1,NG_ANIMATE_STATE="$$ngAnimateState",NG_ANIMATE_CHILDREN="$$ngAnimateChildren",NG_ANIMATE_CLASS_NAME="ng-animate",rootAnimateState={running:!0};$provide.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest",function($delegate,$$q,$injector,$sniffer,$rootElement,$$asyncCallback,$rootScope,$document,$templateRequest){function classBasedAnimationsBlocked(element,setter){var data=element.data(NG_ANIMATE_STATE)||{};return setter&&(data.running=!0,data.structural=!0,element.data(NG_ANIMATE_STATE,data)),data.disabled||data.running&&data.structural}function runAnimationPostDigest(fn){var cancelFn,defer=$$q.defer();return defer.promise.$$cancelFn=function(){cancelFn&&cancelFn()},$rootScope.$$postDigest(function(){cancelFn=fn(function(){defer.resolve()})}),defer.promise}function resolveElementClasses(element,cache,runningAnimations){runningAnimations=runningAnimations||{};var map={};forEach(cache.add,function(className){className&&className.length&&(map[className]=map[className]||0,map[className]++)
}),forEach(cache.remove,function(className){className&&className.length&&(map[className]=map[className]||0,map[className]--)});var lookup=[];forEach(runningAnimations,function(data,selector){forEach(selector.split(" "),function(s){lookup[s]=data})});var toAdd=[],toRemove=[];return forEach(map,function(status,className){var hasClass=angular.$$hasClass(element[0],className),matchingAnimation=lookup[className]||{};0>status?(hasClass||"addClass"==matchingAnimation.event)&&toRemove.push(className):status>0&&(hasClass&&"removeClass"!=matchingAnimation.event||toAdd.push(className))}),toAdd.length+toRemove.length>0&&[toAdd.join(" "),toRemove.join(" ")]}function lookup(name){if(name){var matches=[],flagMap={},classes=name.substr(1).split(".");($sniffer.transitions||$sniffer.animations)&&matches.push($injector.get(selectors[""]));for(var i=0;i<classes.length;i++){var klass=classes[i],selectorFactoryName=selectors[klass];selectorFactoryName&&!flagMap[klass]&&(matches.push($injector.get(selectorFactoryName)),flagMap[klass]=!0)}return matches}}function animationRunner(element,animationEvent,className){function registerAnimation(animationFactory,event){var afterFn=animationFactory[event],beforeFn=animationFactory["before"+event.charAt(0).toUpperCase()+event.substr(1)];return afterFn||beforeFn?("leave"==event&&(beforeFn=afterFn,afterFn=null),after.push({event:event,fn:afterFn}),before.push({event:event,fn:beforeFn}),!0):void 0}function run(fns,cancellations,allCompleteFn){function afterAnimationComplete(index){if(cancellations){if((cancellations[index]||noop)(),++count<animations.length)return;cancellations=null}allCompleteFn()}var animations=[];forEach(fns,function(animation){animation.fn&&animations.push(animation)});var count=0;forEach(animations,function(animation,index){var progress=function(){afterAnimationComplete(index)};switch(animation.event){case"setClass":cancellations.push(animation.fn(element,classNameAdd,classNameRemove,progress));break;case"addClass":cancellations.push(animation.fn(element,classNameAdd||className,progress));break;case"removeClass":cancellations.push(animation.fn(element,classNameRemove||className,progress));break;default:cancellations.push(animation.fn(element,progress))}}),cancellations&&0===cancellations.length&&allCompleteFn()}var node=element[0];if(node){var classNameAdd,classNameRemove;isArray(className)&&(classNameAdd=className[0],classNameRemove=className[1],classNameAdd?classNameRemove?className=classNameAdd+" "+classNameRemove:(className=classNameAdd,animationEvent="addClass"):(className=classNameRemove,animationEvent="removeClass"));var isSetClassOperation="setClass"==animationEvent,isClassBased=isSetClassOperation||"addClass"==animationEvent||"removeClass"==animationEvent,currentClassName=element.attr("class"),classes=currentClassName+" "+className;if(isAnimatableClassName(classes)){var beforeComplete=noop,beforeCancel=[],before=[],afterComplete=noop,afterCancel=[],after=[],animationLookup=(" "+classes).replace(/\s+/g,".");return forEach(lookup(animationLookup),function(animationFactory){var created=registerAnimation(animationFactory,animationEvent);!created&&isSetClassOperation&&(registerAnimation(animationFactory,"addClass"),registerAnimation(animationFactory,"removeClass"))}),{node:node,event:animationEvent,className:className,isClassBased:isClassBased,isSetClassOperation:isSetClassOperation,before:function(allCompleteFn){beforeComplete=allCompleteFn,run(before,beforeCancel,function(){beforeComplete=noop,allCompleteFn()})},after:function(allCompleteFn){afterComplete=allCompleteFn,run(after,afterCancel,function(){afterComplete=noop,allCompleteFn()})},cancel:function(){beforeCancel&&(forEach(beforeCancel,function(cancelFn){(cancelFn||noop)(!0)}),beforeComplete(!0)),afterCancel&&(forEach(afterCancel,function(cancelFn){(cancelFn||noop)(!0)}),afterComplete(!0))}}}}}function performAnimation(animationEvent,className,element,parentElement,afterElement,domOperation,doneCallback){function fireDOMCallback(animationPhase){var eventName="$animate:"+animationPhase;elementEvents&&elementEvents[eventName]&&elementEvents[eventName].length>0&&$$asyncCallback(function(){element.triggerHandler(eventName,{event:animationEvent,className:className})})}function fireBeforeCallbackAsync(){fireDOMCallback("before")}function fireAfterCallbackAsync(){fireDOMCallback("after")}function fireDoneCallbackAsync(){fireDOMCallback("close"),doneCallback()}function fireDOMOperation(){fireDOMOperation.hasBeenRun||(fireDOMOperation.hasBeenRun=!0,domOperation())}function closeAnimation(){if(!closeAnimation.hasBeenRun){closeAnimation.hasBeenRun=!0;var data=element.data(NG_ANIMATE_STATE);data&&(runner&&runner.isClassBased?cleanup(element,className):($$asyncCallback(function(){var data=element.data(NG_ANIMATE_STATE)||{};localAnimationCount==data.index&&cleanup(element,className,animationEvent)}),element.data(NG_ANIMATE_STATE,data))),fireDoneCallbackAsync()}}var noopCancel=noop,runner=animationRunner(element,animationEvent,className);if(!runner)return fireDOMOperation(),fireBeforeCallbackAsync(),fireAfterCallbackAsync(),closeAnimation(),noopCancel;animationEvent=runner.event,className=runner.className;var elementEvents=angular.element._data(runner.node);if(elementEvents=elementEvents&&elementEvents.events,parentElement||(parentElement=afterElement?afterElement.parent():element.parent()),animationsDisabled(element,parentElement))return fireDOMOperation(),fireBeforeCallbackAsync(),fireAfterCallbackAsync(),closeAnimation(),noopCancel;var ngAnimateState=element.data(NG_ANIMATE_STATE)||{},runningAnimations=ngAnimateState.active||{},totalActiveAnimations=ngAnimateState.totalActive||0,lastAnimation=ngAnimateState.last,skipAnimation=!1;if(totalActiveAnimations>0){var animationsToCancel=[];if(runner.isClassBased){if("setClass"==lastAnimation.event)animationsToCancel.push(lastAnimation),cleanup(element,className);else if(runningAnimations[className]){var current=runningAnimations[className];current.event==animationEvent?skipAnimation=!0:(animationsToCancel.push(current),cleanup(element,className))}}else if("leave"==animationEvent&&runningAnimations["ng-leave"])skipAnimation=!0;else{for(var klass in runningAnimations)animationsToCancel.push(runningAnimations[klass]);ngAnimateState={},cleanup(element,!0)}animationsToCancel.length>0&&forEach(animationsToCancel,function(operation){operation.cancel()})}if(!runner.isClassBased||runner.isSetClassOperation||skipAnimation||(skipAnimation="addClass"==animationEvent==element.hasClass(className)),skipAnimation)return fireDOMOperation(),fireBeforeCallbackAsync(),fireAfterCallbackAsync(),fireDoneCallbackAsync(),noopCancel;runningAnimations=ngAnimateState.active||{},totalActiveAnimations=ngAnimateState.totalActive||0,"leave"==animationEvent&&element.one("$destroy",function(){var element=angular.element(this),state=element.data(NG_ANIMATE_STATE);if(state){var activeLeaveAnimation=state.active["ng-leave"];activeLeaveAnimation&&(activeLeaveAnimation.cancel(),cleanup(element,"ng-leave"))}}),element.addClass(NG_ANIMATE_CLASS_NAME);var localAnimationCount=globalAnimationCounter++;return totalActiveAnimations++,runningAnimations[className]=runner,element.data(NG_ANIMATE_STATE,{last:runner,active:runningAnimations,index:localAnimationCount,totalActive:totalActiveAnimations}),fireBeforeCallbackAsync(),runner.before(function(cancelled){var data=element.data(NG_ANIMATE_STATE);cancelled=cancelled||!data||!data.active[className]||runner.isClassBased&&data.active[className].event!=animationEvent,fireDOMOperation(),cancelled===!0?closeAnimation():(fireAfterCallbackAsync(),runner.after(closeAnimation))}),runner.cancel}function cancelChildAnimations(element){var node=extractElementNode(element);if(node){var nodes=angular.isFunction(node.getElementsByClassName)?node.getElementsByClassName(NG_ANIMATE_CLASS_NAME):node.querySelectorAll("."+NG_ANIMATE_CLASS_NAME);forEach(nodes,function(element){element=angular.element(element);var data=element.data(NG_ANIMATE_STATE);data&&data.active&&forEach(data.active,function(runner){runner.cancel()})})}}function cleanup(element,className){if(isMatchingElement(element,$rootElement))rootAnimateState.disabled||(rootAnimateState.running=!1,rootAnimateState.structural=!1);else if(className){var data=element.data(NG_ANIMATE_STATE)||{},removeAnimations=className===!0;!removeAnimations&&data.active&&data.active[className]&&(data.totalActive--,delete data.active[className]),(removeAnimations||!data.totalActive)&&(element.removeClass(NG_ANIMATE_CLASS_NAME),element.removeData(NG_ANIMATE_STATE))}}function animationsDisabled(element,parentElement){if(rootAnimateState.disabled)return!0;if(isMatchingElement(element,$rootElement))return rootAnimateState.running;var allowChildAnimations,parentRunningAnimation,hasParent;do{if(0===parentElement.length)break;var isRoot=isMatchingElement(parentElement,$rootElement),state=isRoot?rootAnimateState:parentElement.data(NG_ANIMATE_STATE)||{};if(state.disabled)return!0;if(isRoot&&(hasParent=!0),allowChildAnimations!==!1){var animateChildrenFlag=parentElement.data(NG_ANIMATE_CHILDREN);angular.isDefined(animateChildrenFlag)&&(allowChildAnimations=animateChildrenFlag)}parentRunningAnimation=parentRunningAnimation||state.running||state.last&&!state.last.isClassBased}while(parentElement=parentElement.parent());return!hasParent||!allowChildAnimations&&parentRunningAnimation}$rootElement.data(NG_ANIMATE_STATE,rootAnimateState);var deregisterWatch=$rootScope.$watch(function(){return $templateRequest.totalPendingRequests},function(val){0===val&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){rootAnimateState.running=!1})}))}),globalAnimationCounter=0,classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0};return{enter:function(element,parentElement,afterElement){return element=angular.element(element),parentElement=prepareElement(parentElement),afterElement=prepareElement(afterElement),classBasedAnimationsBlocked(element,!0),$delegate.enter(element,parentElement,afterElement),runAnimationPostDigest(function(done){return performAnimation("enter","ng-enter",stripCommentsFromElement(element),parentElement,afterElement,noop,done)})},leave:function(element){return element=angular.element(element),cancelChildAnimations(element),classBasedAnimationsBlocked(element,!0),this.enabled(!1,element),runAnimationPostDigest(function(done){return performAnimation("leave","ng-leave",stripCommentsFromElement(element),null,null,function(){$delegate.leave(element)},done)})},move:function(element,parentElement,afterElement){return element=angular.element(element),parentElement=prepareElement(parentElement),afterElement=prepareElement(afterElement),cancelChildAnimations(element),classBasedAnimationsBlocked(element,!0),$delegate.move(element,parentElement,afterElement),runAnimationPostDigest(function(done){return performAnimation("move","ng-move",stripCommentsFromElement(element),parentElement,afterElement,noop,done)})},addClass:function(element,className){return this.setClass(element,className,[])},removeClass:function(element,className){return this.setClass(element,[],className)},setClass:function(element,add,remove){var STORAGE_KEY="$$animateClasses";if(element=angular.element(element),element=stripCommentsFromElement(element),classBasedAnimationsBlocked(element))return $delegate.setClass(element,add,remove);add=isArray(add)?add:add.split(" "),remove=isArray(remove)?remove:remove.split(" ");var cache=element.data(STORAGE_KEY);return cache?(cache.add=cache.add.concat(add),cache.remove=cache.remove.concat(remove),cache.promise):(element.data(STORAGE_KEY,cache={add:add,remove:remove}),cache.promise=runAnimationPostDigest(function(done){var cache=element.data(STORAGE_KEY);element.removeData(STORAGE_KEY);var state=element.data(NG_ANIMATE_STATE)||{},classes=resolveElementClasses(element,cache,state.active);return classes?performAnimation("setClass",classes,element,null,null,function(){$delegate.setClass(element,classes[0],classes[1])},done):done()}))},cancel:function(promise){promise.$$cancelFn()},enabled:function(value,element){switch(arguments.length){case 2:if(value)cleanup(element);else{var data=element.data(NG_ANIMATE_STATE)||{};data.disabled=!0,element.data(NG_ANIMATE_STATE,data)}break;case 1:rootAnimateState.disabled=!value;break;default:value=!rootAnimateState.disabled}return!!value}}}]),$animateProvider.register("",["$window","$sniffer","$timeout","$$animateReflow",function($window,$sniffer,$timeout,$$animateReflow){function afterReflow(element,callback){cancelAnimationReflow&&cancelAnimationReflow(),animationReflowQueue.push(callback),cancelAnimationReflow=$$animateReflow(function(){forEach(animationReflowQueue,function(fn){fn()}),animationReflowQueue=[],cancelAnimationReflow=null,lookupCache={}})}function animationCloseHandler(element,totalTime){var node=extractElementNode(element);element=angular.element(node),animationElementQueue.push(element);var futureTimestamp=Date.now()+totalTime;closingTimestamp>=futureTimestamp||($timeout.cancel(closingTimer),closingTimestamp=futureTimestamp,closingTimer=$timeout(function(){closeAllAnimations(animationElementQueue),animationElementQueue=[]},totalTime,!1))}function closeAllAnimations(elements){forEach(elements,function(element){var elementData=element.data(NG_ANIMATE_CSS_DATA_KEY);elementData&&forEach(elementData.closeAnimationFns,function(fn){fn()})})}function getElementAnimationDetails(element,cacheKey){var data=cacheKey?lookupCache[cacheKey]:null;if(!data){var transitionDuration=0,transitionDelay=0,animationDuration=0,animationDelay=0;forEach(element,function(element){if(element.nodeType==ELEMENT_NODE){var elementStyles=$window.getComputedStyle(element)||{},transitionDurationStyle=elementStyles[TRANSITION_PROP+DURATION_KEY];transitionDuration=Math.max(parseMaxTime(transitionDurationStyle),transitionDuration);var transitionDelayStyle=elementStyles[TRANSITION_PROP+DELAY_KEY];transitionDelay=Math.max(parseMaxTime(transitionDelayStyle),transitionDelay);{elementStyles[ANIMATION_PROP+DELAY_KEY]}animationDelay=Math.max(parseMaxTime(elementStyles[ANIMATION_PROP+DELAY_KEY]),animationDelay);var aDuration=parseMaxTime(elementStyles[ANIMATION_PROP+DURATION_KEY]);aDuration>0&&(aDuration*=parseInt(elementStyles[ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY],10)||1),animationDuration=Math.max(aDuration,animationDuration)}}),data={total:0,transitionDelay:transitionDelay,transitionDuration:transitionDuration,animationDelay:animationDelay,animationDuration:animationDuration},cacheKey&&(lookupCache[cacheKey]=data)}return data}function parseMaxTime(str){var maxValue=0,values=angular.isString(str)?str.split(/\s*,\s*/):[];return forEach(values,function(value){maxValue=Math.max(parseFloat(value)||0,maxValue)}),maxValue}function getCacheKey(element){var parentElement=element.parent(),parentID=parentElement.data(NG_ANIMATE_PARENT_KEY);return parentID||(parentElement.data(NG_ANIMATE_PARENT_KEY,++parentCounter),parentID=parentCounter),parentID+"-"+extractElementNode(element).getAttribute("class")}function animateSetup(animationEvent,element,className){var structural=["ng-enter","ng-leave","ng-move"].indexOf(className)>=0,cacheKey=getCacheKey(element),eventCacheKey=cacheKey+" "+className,itemIndex=lookupCache[eventCacheKey]?++lookupCache[eventCacheKey].total:0,stagger={};if(itemIndex>0){var staggerClassName=className+"-stagger",staggerCacheKey=cacheKey+" "+staggerClassName,applyClasses=!lookupCache[staggerCacheKey];applyClasses&&element.addClass(staggerClassName),stagger=getElementAnimationDetails(element,staggerCacheKey),applyClasses&&element.removeClass(staggerClassName)}element.addClass(className);var formerData=element.data(NG_ANIMATE_CSS_DATA_KEY)||{},timings=getElementAnimationDetails(element,eventCacheKey),transitionDuration=timings.transitionDuration,animationDuration=timings.animationDuration;if(structural&&0===transitionDuration&&0===animationDuration)return element.removeClass(className),!1;var blockTransition=structural&&transitionDuration>0,blockAnimation=animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration,closeAnimationFns=formerData.closeAnimationFns||[];element.data(NG_ANIMATE_CSS_DATA_KEY,{stagger:stagger,cacheKey:eventCacheKey,running:formerData.running||0,itemIndex:itemIndex,blockTransition:blockTransition,closeAnimationFns:closeAnimationFns});var node=extractElementNode(element);return blockTransition&&blockTransitions(node,!0),blockAnimation&&blockAnimations(node,!0),!0}function animateRun(animationEvent,element,className,activeAnimationComplete){function onEnd(){element.off(css3AnimationEvents,onAnimationProgress),element.removeClass(activeClassName),element.removeClass(pendingClassName),staggerTimeout&&$timeout.cancel(staggerTimeout),animateClose(element,className);var node=extractElementNode(element);for(var i in appliedStyles)node.style.removeProperty(appliedStyles[i])}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||ev.timeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&activeAnimationComplete()}var node=extractElementNode(element),elementData=element.data(NG_ANIMATE_CSS_DATA_KEY);if(-1==node.getAttribute("class").indexOf(className)||!elementData)return void activeAnimationComplete();elementData.blockTransition&&blockTransitions(node,!1);var activeClassName="",pendingClassName="";forEach(className.split(" "),function(klass,i){var prefix=(i>0?" ":"")+klass;activeClassName+=prefix+"-active",pendingClassName+=prefix+"-pending"});var style="",appliedStyles=[],itemIndex=elementData.itemIndex,stagger=elementData.stagger,staggerTime=0;if(itemIndex>0){var transitionStaggerDelay=0;stagger.transitionDelay>0&&0===stagger.transitionDuration&&(transitionStaggerDelay=stagger.transitionDelay*itemIndex);var animationStaggerDelay=0;stagger.animationDelay>0&&0===stagger.animationDuration&&(animationStaggerDelay=stagger.animationDelay*itemIndex,appliedStyles.push(CSS_PREFIX+"animation-play-state")),staggerTime=Math.round(100*Math.max(transitionStaggerDelay,animationStaggerDelay))/100}staggerTime||element.addClass(activeClassName);var eventCacheKey=elementData.cacheKey+" "+activeClassName,timings=getElementAnimationDetails(element,eventCacheKey),maxDuration=Math.max(timings.transitionDuration,timings.animationDuration);if(0===maxDuration)return element.removeClass(activeClassName),animateClose(element,className),void activeAnimationComplete();var maxDelay=Math.max(timings.transitionDelay,timings.animationDelay),maxDelayTime=maxDelay*ONE_SECOND;if(appliedStyles.length>0){var oldStyle=node.getAttribute("style")||"";";"!==oldStyle.charAt(oldStyle.length-1)&&(oldStyle+=";"),node.setAttribute("style",oldStyle+" "+style)}var staggerTimeout,startTime=Date.now(),css3AnimationEvents=ANIMATIONEND_EVENT+" "+TRANSITIONEND_EVENT,animationTime=(maxDelay+maxDuration)*CLOSING_TIME_BUFFER,totalTime=(staggerTime+animationTime)*ONE_SECOND;return staggerTime>0&&(element.addClass(pendingClassName),staggerTimeout=$timeout(function(){staggerTimeout=null,element.addClass(activeClassName),element.removeClass(pendingClassName),timings.animationDuration>0&&blockAnimations(node,!1)},staggerTime*ONE_SECOND,!1)),element.on(css3AnimationEvents,onAnimationProgress),elementData.closeAnimationFns.push(function(){onEnd(),activeAnimationComplete()}),elementData.running++,animationCloseHandler(element,totalTime),onEnd}function blockTransitions(node,bool){node.style[TRANSITION_PROP+PROPERTY_KEY]=bool?"none":""}function blockAnimations(node,bool){node.style[ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY]=bool?"paused":""}function animateBefore(animationEvent,element,className,calculationDecorator){return animateSetup(animationEvent,element,className,calculationDecorator)?function(cancelled){cancelled&&animateClose(element,className)}:void 0}function animateAfter(animationEvent,element,className,afterAnimationComplete){return element.data(NG_ANIMATE_CSS_DATA_KEY)?animateRun(animationEvent,element,className,afterAnimationComplete):(animateClose(element,className),void afterAnimationComplete())}function animate(animationEvent,element,className,animationComplete){var preReflowCancellation=animateBefore(animationEvent,element,className);if(!preReflowCancellation)return void animationComplete();var cancel=preReflowCancellation;return afterReflow(element,function(){cancel=animateAfter(animationEvent,element,className,animationComplete)}),function(cancelled){(cancel||noop)(cancelled)}}function animateClose(element,className){element.removeClass(className);var data=element.data(NG_ANIMATE_CSS_DATA_KEY);data&&(data.running&&data.running--,data.running&&0!==data.running||element.removeData(NG_ANIMATE_CSS_DATA_KEY))}function suffixClasses(classes,suffix){var className="";return classes=isArray(classes)?classes:classes.split(/\s+/),forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=(i>0?" ":"")+klass+suffix)}),className}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,CSS_PREFIX="";window.ontransitionend===undefined&&window.onwebkittransitionend!==undefined?(CSS_PREFIX="-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),window.onanimationend===undefined&&window.onwebkitanimationend!==undefined?(CSS_PREFIX="-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var cancelAnimationReflow,DURATION_KEY="Duration",PROPERTY_KEY="Property",DELAY_KEY="Delay",ANIMATION_ITERATION_COUNT_KEY="IterationCount",ANIMATION_PLAYSTATE_KEY="PlayState",NG_ANIMATE_PARENT_KEY="$$ngAnimateKey",NG_ANIMATE_CSS_DATA_KEY="$$ngAnimateCSS3Data",ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,ONE_SECOND=1e3,lookupCache={},parentCounter=0,animationReflowQueue=[],closingTimer=null,closingTimestamp=0,animationElementQueue=[];return{enter:function(element,animationCompleted){return animate("enter",element,"ng-enter",animationCompleted)},leave:function(element,animationCompleted){return animate("leave",element,"ng-leave",animationCompleted)},move:function(element,animationCompleted){return animate("move",element,"ng-move",animationCompleted)},beforeSetClass:function(element,add,remove,animationCompleted){var className=suffixClasses(remove,"-remove")+" "+suffixClasses(add,"-add"),cancellationMethod=animateBefore("setClass",element,className);return cancellationMethod?(afterReflow(element,animationCompleted),cancellationMethod):void animationCompleted()},beforeAddClass:function(element,className,animationCompleted){var cancellationMethod=animateBefore("addClass",element,suffixClasses(className,"-add"));return cancellationMethod?(afterReflow(element,animationCompleted),cancellationMethod):void animationCompleted()},beforeRemoveClass:function(element,className,animationCompleted){var cancellationMethod=animateBefore("removeClass",element,suffixClasses(className,"-remove"));return cancellationMethod?(afterReflow(element,animationCompleted),cancellationMethod):void animationCompleted()},setClass:function(element,add,remove,animationCompleted){remove=suffixClasses(remove,"-remove"),add=suffixClasses(add,"-add");var className=remove+" "+add;return animateAfter("setClass",element,className,animationCompleted)},addClass:function(element,className,animationCompleted){return animateAfter("addClass",element,suffixClasses(className,"-add"),animationCompleted)},removeClass:function(element,className,animationCompleted){return animateAfter("removeClass",element,suffixClasses(className,"-remove"),animationCompleted)}}}])}])}(window,window.angular),function(window,document){"use strict";angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.modal","mgcrea.ngStrap.aside","mgcrea.ngStrap.alert","mgcrea.ngStrap.button","mgcrea.ngStrap.select","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker","mgcrea.ngStrap.navbar","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","mgcrea.ngStrap.dropdown","mgcrea.ngStrap.typeahead","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.affix","mgcrea.ngStrap.tab","mgcrea.ngStrap.collapse"]),angular.module("mgcrea.ngStrap.affix",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.debounce"]).provider("$affix",function(){var defaults=this.defaults={offsetTop:"auto"};this.$get=["$window","debounce","dimensions",function($window,debounce,dimensions){function AffixFactory(element,config){function getRequiredAffixClass(unpin,position,elementHeight){var scrollTop=getScrollTop(),scrollHeight=getScrollHeight();return offsetTop>=scrollTop?"top":null!==unpin&&scrollTop+unpin<=position.top?"middle":null!==offsetBottom&&position.top+elementHeight+initialAffixTop>=scrollHeight-offsetBottom?"bottom":"middle"}function getScrollTop(){return targetEl[0]===$window?$window.pageYOffset:targetEl[0].scrollTop}function getScrollHeight(){return targetEl[0]===$window?$window.document.body.scrollHeight:targetEl[0].scrollHeight}var $affix={},options=angular.extend({},defaults,config),targetEl=options.target,reset="affix affix-top affix-bottom",initialAffixTop=0,initialOffsetTop=0,offsetTop=0,offsetBottom=0,affixed=null,unpin=null,parent=element.parent();if(options.offsetParent)if(options.offsetParent.match(/^\d+$/))for(var i=0;i<1*options.offsetParent-1;i++)parent=parent.parent();else parent=angular.element(options.offsetParent);return $affix.init=function(){$affix.$parseOffsets(),initialOffsetTop=dimensions.offset(element[0]).top+initialAffixTop,targetEl.on("scroll",$affix.checkPosition),targetEl.on("click",$affix.checkPositionWithEventLoop),windowEl.on("resize",$affix.$debouncedOnResize),$affix.checkPosition(),$affix.checkPositionWithEventLoop()},$affix.destroy=function(){targetEl.off("scroll",$affix.checkPosition),targetEl.off("click",$affix.checkPositionWithEventLoop),windowEl.off("resize",$affix.$debouncedOnResize)},$affix.checkPositionWithEventLoop=function(){setTimeout($affix.checkPosition,1)},$affix.checkPosition=function(){var scrollTop=getScrollTop(),position=dimensions.offset(element[0]),elementHeight=dimensions.height(element[0]),affix=getRequiredAffixClass(unpin,position,elementHeight);affixed!==affix&&(affixed=affix,element.removeClass(reset).addClass("affix"+("middle"!==affix?"-"+affix:"")),"top"===affix?(unpin=null,element.css("position",options.offsetParent?"":"relative"),element.css("top","")):"bottom"===affix?(unpin=options.offsetUnpin?-(1*options.offsetUnpin):position.top-scrollTop,element.css("position",options.offsetParent?"":"relative"),element.css("top",options.offsetParent?"":bodyEl[0].offsetHeight-offsetBottom-elementHeight-initialOffsetTop+"px")):(unpin=null,element.css("position","fixed"),element.css("top",initialAffixTop+"px")))},$affix.$onResize=function(){$affix.$parseOffsets(),$affix.checkPosition()},$affix.$debouncedOnResize=debounce($affix.$onResize,50),$affix.$parseOffsets=function(){element.css("position",options.offsetParent?"":"relative"),options.offsetTop&&("auto"===options.offsetTop&&(options.offsetTop="+0"),options.offsetTop.match(/^[-+]\d+$/)?(initialAffixTop=1*-options.offsetTop,offsetTop=options.offsetParent?dimensions.offset(parent[0]).top+1*options.offsetTop:dimensions.offset(element[0]).top-dimensions.css(element[0],"marginTop",!0)+1*options.offsetTop):offsetTop=1*options.offsetTop),options.offsetBottom&&(offsetBottom=options.offsetParent&&options.offsetBottom.match(/^[-+]\d+$/)?getScrollHeight()-(dimensions.offset(parent[0]).top+dimensions.height(parent[0]))+1*options.offsetBottom+1:1*options.offsetBottom)},$affix.init(),$affix}var bodyEl=angular.element($window.document.body),windowEl=angular.element($window);return AffixFactory}]}).directive("bsAffix",["$affix","$window",function($affix,$window){return{restrict:"EAC",require:"^?bsAffixTarget",link:function(scope,element,attr,affixTarget){var options={scope:scope,offsetTop:"auto",target:affixTarget?affixTarget.$element:angular.element($window)};angular.forEach(["offsetTop","offsetBottom","offsetParent","offsetUnpin"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])});var affix=$affix(element,options);scope.$on("$destroy",function(){affix&&affix.destroy(),options=null,affix=null})}}}]).directive("bsAffixTarget",function(){return{controller:["$element",function($element){this.$element=$element}]}}),angular.module("mgcrea.ngStrap.aside",["mgcrea.ngStrap.modal"]).provider("$aside",function(){var defaults=this.defaults={animation:"am-fade-and-slide-right",prefixClass:"aside",placement:"right",template:"aside/aside.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$modal",function($modal){function AsideFactory(config){var $aside={},options=angular.extend({},defaults,config);return $aside=$modal(options)}return AsideFactory}]}).directive("bsAside",["$window","$sce","$aside",function($window,$sce,$aside){$window.requestAnimationFrame||$window.setTimeout;return{restrict:"EAC",scope:!0,link:function(scope,element,attr){var options={scope:scope,element:element,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),angular.forEach(["title","content"],function(key){attr[key]&&attr.$observe(key,function(newValue){scope[key]=$sce.trustAsHtml(newValue)})}),attr.bsAside&&scope.$watch(attr.bsAside,function(newValue){angular.isObject(newValue)?angular.extend(scope,newValue):scope.content=newValue},!0);var aside=$aside(options);element.on(attr.trigger||"click",aside.toggle),scope.$on("$destroy",function(){aside&&aside.destroy(),options=null,aside=null})}}}]),angular.module("mgcrea.ngStrap.alert",["mgcrea.ngStrap.modal"]).provider("$alert",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"alert",placement:null,template:"alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1,dismissable:!0};this.$get=["$modal","$timeout",function($modal,$timeout){function AlertFactory(config){var $alert={},options=angular.extend({},defaults,config);$alert=$modal(options),$alert.$scope.dismissable=!!options.dismissable,options.type&&($alert.$scope.type=options.type);var show=$alert.show;return options.duration&&($alert.show=function(){show(),$timeout(function(){$alert.hide()},1e3*options.duration)}),$alert}return AlertFactory}]}).directive("bsAlert",["$window","$sce","$alert",function($window,$sce,$alert){$window.requestAnimationFrame||$window.setTimeout;return{restrict:"EAC",scope:!0,link:function(scope,element,attr){var options={scope:scope,element:element,show:!1};angular.forEach(["template","placement","keyboard","html","container","animation","duration","dismissable"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),angular.forEach(["title","content","type"],function(key){attr[key]&&attr.$observe(key,function(newValue){scope[key]=$sce.trustAsHtml(newValue)})}),attr.bsAlert&&scope.$watch(attr.bsAlert,function(newValue){angular.isObject(newValue)?angular.extend(scope,newValue):scope.content=newValue},!0);var alert=$alert(options);element.on(attr.trigger||"click",alert.toggle),scope.$on("$destroy",function(){alert&&alert.destroy(),options=null,alert=null})}}}]),angular.module("mgcrea.ngStrap.button",[]).provider("$button",function(){var defaults=this.defaults={activeClass:"active",toggleEvent:"click"};this.$get=function(){return{defaults:defaults}}}).directive("bsCheckboxGroup",function(){return{restrict:"A",require:"ngModel",compile:function(element,attr){element.attr("data-toggle","buttons"),element.removeAttr("ng-model");var children=element[0].querySelectorAll('input[type="checkbox"]');
angular.forEach(children,function(child){var childEl=angular.element(child);childEl.attr("bs-checkbox",""),childEl.attr("ng-model",attr.ngModel+"."+childEl.attr("value"))})}}}).directive("bsCheckbox",["$button","$$rAF",function($button,$$rAF){var defaults=$button.defaults,constantValueRegExp=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(scope,element,attr,controller){var options=defaults,isInput="INPUT"===element[0].nodeName,activeElement=isInput?element.parent():element,trueValue=angular.isDefined(attr.trueValue)?attr.trueValue:!0;constantValueRegExp.test(attr.trueValue)&&(trueValue=scope.$eval(attr.trueValue));var falseValue=angular.isDefined(attr.falseValue)?attr.falseValue:!1;constantValueRegExp.test(attr.falseValue)&&(falseValue=scope.$eval(attr.falseValue));var hasExoticValues="boolean"!=typeof trueValue||"boolean"!=typeof falseValue;hasExoticValues&&(controller.$parsers.push(function(viewValue){return viewValue?trueValue:falseValue}),scope.$watch(attr.ngModel,function(){controller.$render()})),controller.$render=function(){var isActive=angular.equals(controller.$modelValue,trueValue);$$rAF(function(){isInput&&(element[0].checked=isActive),activeElement.toggleClass(options.activeClass,isActive)})},element.bind(options.toggleEvent,function(){scope.$apply(function(){isInput||controller.$setViewValue(!activeElement.hasClass("active")),hasExoticValues||controller.$render()})})}}}]).directive("bsRadioGroup",function(){return{restrict:"A",require:"ngModel",compile:function(element,attr){element.attr("data-toggle","buttons"),element.removeAttr("ng-model");var children=element[0].querySelectorAll('input[type="radio"]');angular.forEach(children,function(child){angular.element(child).attr("bs-radio",""),angular.element(child).attr("ng-model",attr.ngModel)})}}}).directive("bsRadio",["$button","$$rAF",function($button,$$rAF){var defaults=$button.defaults,constantValueRegExp=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(scope,element,attr,controller){var options=defaults,isInput="INPUT"===element[0].nodeName,activeElement=isInput?element.parent():element,value=constantValueRegExp.test(attr.value)?scope.$eval(attr.value):attr.value;controller.$render=function(){var isActive=angular.equals(controller.$modelValue,value);$$rAF(function(){isInput&&(element[0].checked=isActive),activeElement.toggleClass(options.activeClass,isActive)})},element.bind(options.toggleEvent,function(){scope.$apply(function(){controller.$setViewValue(value),controller.$render()})})}}}]),angular.module("mgcrea.ngStrap.collapse",[]).provider("$collapse",function(){var defaults=this.defaults={animation:"am-collapse",disallowToggle:!1,activeClass:"in"},controller=this.controller=function($scope,$element,$attrs){var self=this;self.$options=angular.copy(defaults),angular.forEach(["animation","disallowToggle","activeClass"],function(key){angular.isDefined($attrs[key])&&(self.$options[key]=$attrs[key])}),self.$toggles=[],self.$targets=[],self.$viewChangeListeners=[],self.$registerToggle=function(element){self.$toggles.push(element)},self.$registerTarget=function(element){self.$targets.push(element)},self.$targets.$active=0,self.$setActive=$scope.$setActive=function(value){self.$targets.$active=self.$options.disallowToggle?value:self.$targets.$active===value?-1:value,self.$viewChangeListeners.forEach(function(fn){fn()})}};this.$get=function(){var $collapse={};return $collapse.defaults=defaults,$collapse.controller=controller,$collapse}}).directive("bsCollapse",["$window","$animate","$collapse",function($window,$animate,$collapse){$collapse.defaults;return{require:["?ngModel","bsCollapse"],controller:["$scope","$element","$attrs",$collapse.controller],link:function(scope,element,attrs,controllers){var ngModelCtrl=controllers[0],bsCollapseCtrl=controllers[1];ngModelCtrl&&(bsCollapseCtrl.$viewChangeListeners.push(function(){ngModelCtrl.$setViewValue(bsCollapseCtrl.$targets.$active)}),ngModelCtrl.$formatters.push(function(modelValue){return bsCollapseCtrl.$setActive(1*modelValue),modelValue}))}}}]).directive("bsCollapseToggle",function(){return{require:["^?ngModel","^bsCollapse"],link:function(scope,element,attrs,controllers){var bsCollapseCtrl=(controllers[0],controllers[1]);element.attr("data-toggle","collapse"),bsCollapseCtrl.$registerToggle(element),element.on("click",function(){var index=attrs.bsCollapseToggle||bsCollapseCtrl.$toggles.indexOf(element);bsCollapseCtrl.$setActive(1*index),scope.$apply()})}}}).directive("bsCollapseTarget",["$animate",function($animate){return{require:["^?ngModel","^bsCollapse"],link:function(scope,element,attrs,controllers){function render(){var index=bsCollapseCtrl.$targets.indexOf(element),active=bsCollapseCtrl.$targets.$active;$animate[index===active?"addClass":"removeClass"](element,bsCollapseCtrl.$options.activeClass)}var bsCollapseCtrl=(controllers[0],controllers[1]);element.addClass("collapse"),bsCollapseCtrl.$options.animation&&element.addClass(bsCollapseCtrl.$options.animation),bsCollapseCtrl.$registerTarget(element),bsCollapseCtrl.$viewChangeListeners.push(function(){render()}),render()}}}]),angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",template:"datepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",modelDateFormat:null,dayFormat:"dd",strictFormat:!1,autoclose:!1,minDate:-1/0,maxDate:+1/0,startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$locale","dateFilter","datepickerViews","$tooltip",function($window,$document,$rootScope,$sce,$locale,dateFilter,datepickerViews,$tooltip){function DatepickerFactory(element,controller,config){function updateSelected(el){el.selected=$datepicker.$isSelected(el.date)}function focusElement(){element[0].focus()}var $datepicker=$tooltip(element,angular.extend({},defaults,config)),parentScope=config.scope,options=$datepicker.$options,scope=$datepicker.$scope;options.startView&&(options.startView-=options.minView);var pickerViews=datepickerViews($datepicker);$datepicker.$views=pickerViews.views;var viewDate=pickerViews.viewDate;scope.$mode=options.startView,scope.$iconLeft=options.iconLeft,scope.$iconRight=options.iconRight;var $picker=$datepicker.$views[scope.$mode];scope.$select=function(date){$datepicker.select(date)},scope.$selectPane=function(value){$datepicker.$selectPane(value)},scope.$toggleMode=function(){$datepicker.setMode((scope.$mode+1)%$datepicker.$views.length)},$datepicker.update=function(date){angular.isDate(date)&&!isNaN(date.getTime())&&($datepicker.$date=date,$picker.update.call($picker,date)),$datepicker.$build(!0)},$datepicker.updateDisabledDates=function(dateRanges){options.disabledDateRanges=dateRanges;for(var i=0,l=scope.rows.length;l>i;i++)angular.forEach(scope.rows[i],$datepicker.$setDisabledEl)},$datepicker.select=function(date,keep){angular.isDate(controller.$dateValue)||(controller.$dateValue=new Date(date)),!scope.$mode||keep?(controller.$setViewValue(angular.copy(date)),controller.$render(),options.autoclose&&!keep&&$datepicker.hide(!0)):(angular.extend(viewDate,{year:date.getFullYear(),month:date.getMonth(),date:date.getDate()}),$datepicker.setMode(scope.$mode-1),$datepicker.$build())},$datepicker.setMode=function(mode){scope.$mode=mode,$picker=$datepicker.$views[scope.$mode],$datepicker.$build()},$datepicker.$build=function(pristine){pristine===!0&&$picker.built||(pristine!==!1||$picker.built)&&$picker.build.call($picker)},$datepicker.$updateSelected=function(){for(var i=0,l=scope.rows.length;l>i;i++)angular.forEach(scope.rows[i],updateSelected)},$datepicker.$isSelected=function(date){return $picker.isSelected(date)},$datepicker.$setDisabledEl=function(el){el.disabled=$picker.isDisabled(el.date)},$datepicker.$selectPane=function(value){var steps=$picker.steps,targetDate=new Date(Date.UTC(viewDate.year+(steps.year||0)*value,viewDate.month+(steps.month||0)*value,viewDate.date+(steps.day||0)*value));angular.extend(viewDate,{year:targetDate.getUTCFullYear(),month:targetDate.getUTCMonth(),date:targetDate.getUTCDate()}),$datepicker.$build()},$datepicker.$onMouseDown=function(evt){if(evt.preventDefault(),evt.stopPropagation(),isTouch){var targetEl=angular.element(evt.target);"button"!==targetEl[0].nodeName.toLowerCase()&&(targetEl=targetEl.parent()),targetEl.triggerHandler("click")}},$datepicker.$onKeyDown=function(evt){if(/(38|37|39|40|13)/.test(evt.keyCode)&&!evt.shiftKey&&!evt.altKey){if(evt.preventDefault(),evt.stopPropagation(),13===evt.keyCode)return scope.$mode?scope.$apply(function(){$datepicker.setMode(scope.$mode-1)}):$datepicker.hide(!0);$picker.onKeyDown(evt),parentScope.$digest()}};var _init=$datepicker.init;$datepicker.init=function(){return isNative&&options.useNative?(element.prop("type","date"),void element.css("-webkit-appearance","textfield")):(isTouch&&(element.prop("type","text"),element.attr("readonly","true"),element.on("click",focusElement)),void _init())};var _destroy=$datepicker.destroy;$datepicker.destroy=function(){isNative&&options.useNative&&element.off("click",focusElement),_destroy()};var _show=$datepicker.show;$datepicker.show=function(){_show(),setTimeout(function(){$datepicker.$element.on(isTouch?"touchstart":"mousedown",$datepicker.$onMouseDown),options.keyboard&&element.on("keydown",$datepicker.$onKeyDown)})};var _hide=$datepicker.hide;return $datepicker.hide=function(blur){$datepicker.$element.off(isTouch?"touchstart":"mousedown",$datepicker.$onMouseDown),options.keyboard&&element.off("keydown",$datepicker.$onKeyDown),_hide(blur)},$datepicker}var isNative=(angular.element($window.document.body),/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent)),isTouch="createTouch"in $window.document&&isNative;return defaults.lang||(defaults.lang=$locale.id),DatepickerFactory.defaults=defaults,DatepickerFactory}]}).directive("bsDatepicker",["$window","$parse","$q","$locale","dateFilter","$datepicker","$dateParser","$timeout",function($window,$parse,$q,$locale,dateFilter,$datepicker,$dateParser){var isNative=($datepicker.defaults,/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent)),isNumeric=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){function normalizeDateRanges(ranges){return ranges&&ranges.length?ranges:null}var options={scope:scope,controller:controller};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","dateType","dateFormat","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue){datepicker&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(",?(datepicker),?")),newValue===!0?datepicker.show():datepicker.hide())});var datepicker=$datepicker(element,controller,options);options=datepicker.$options,isNative&&options.useNative&&(options.dateFormat="yyyy-MM-dd"),angular.forEach(["minDate","maxDate"],function(key){angular.isDefined(attr[key])&&attr.$observe(key,function(newValue){if("today"===newValue){var today=new Date;datepicker.$options[key]=+new Date(today.getFullYear(),today.getMonth(),today.getDate()+("maxDate"===key?1:0),0,0,0,"minDate"===key?0:-1)}else datepicker.$options[key]=angular.isString(newValue)&&newValue.match(/^".+"$/)?+new Date(newValue.substr(1,newValue.length-2)):isNumeric(newValue)?+new Date(parseInt(newValue,10)):angular.isString(newValue)&&0===newValue.length?"maxDate"===key?+1/0:-1/0:+new Date(newValue);!isNaN(datepicker.$options[key])&&datepicker.$build(!1)})}),scope.$watch(attr.ngModel,function(){datepicker.update(controller.$dateValue)},!0),angular.isDefined(attr.disabledDates)&&scope.$watch(attr.disabledDates,function(disabledRanges,previousValue){disabledRanges=normalizeDateRanges(disabledRanges),previousValue=normalizeDateRanges(previousValue),disabledRanges!==previousValue&&datepicker.updateDisabledDates(disabledRanges)});var dateParser=$dateParser({format:options.dateFormat,lang:options.lang,strict:options.strictFormat});controller.$parsers.unshift(function(viewValue){if(!viewValue)return void controller.$setValidity("date",!0);var parsedDate=dateParser.parse(viewValue,controller.$dateValue);if(!parsedDate||isNaN(parsedDate.getTime()))return void controller.$setValidity("date",!1);var isMinValid=isNaN(datepicker.$options.minDate)||parsedDate.getTime()>=datepicker.$options.minDate,isMaxValid=isNaN(datepicker.$options.maxDate)||parsedDate.getTime()<=datepicker.$options.maxDate,isValid=isMinValid&&isMaxValid;return controller.$setValidity("date",isValid),controller.$setValidity("min",isMinValid),controller.$setValidity("max",isMaxValid),isValid&&(controller.$dateValue=parsedDate),"string"===options.dateType?dateFilter(parsedDate,options.modelDateFormat||options.dateFormat):"number"===options.dateType?controller.$dateValue.getTime():"iso"===options.dateType?controller.$dateValue.toISOString():new Date(controller.$dateValue)}),controller.$formatters.push(function(modelValue){var date;return date=angular.isUndefined(modelValue)||null===modelValue?0/0:angular.isDate(modelValue)?modelValue:"string"===options.dateType?dateParser.parse(modelValue,null,options.modelDateFormat):new Date(modelValue),controller.$dateValue=date,controller.$dateValue}),controller.$render=function(){element.val(!controller.$dateValue||isNaN(controller.$dateValue.getTime())?"":dateFilter(controller.$dateValue,options.dateFormat))},scope.$on("$destroy",function(){datepicker&&datepicker.destroy(),options=null,datepicker=null})}}}]).provider("datepickerViews",function(){function split(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays}function mod(n,m){return(n%m+m)%m}this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$locale","$sce","dateFilter",function($locale,$sce,dateFilter){return function(picker){var scope=picker.$scope,options=picker.$options,weekDaysMin=$locale.DATETIME_FORMATS.SHORTDAY,weekDaysLabels=weekDaysMin.slice(options.startWeek).concat(weekDaysMin.slice(0,options.startWeek)),weekDaysLabelsHtml=$sce.trustAsHtml('<th class="dow text-center">'+weekDaysLabels.join('</th><th class="dow text-center">')+"</th>"),startDate=picker.$date||(options.startDate?new Date(options.startDate):new Date),viewDate={year:startDate.getFullYear(),month:startDate.getMonth(),date:startDate.getDate()},views=(6e4*startDate.getTimezoneOffset(),[{format:options.dayFormat,split:7,steps:{month:1},update:function(date,force){!this.built||force||date.getFullYear()!==viewDate.year||date.getMonth()!==viewDate.month?(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build()):date.getDate()!==viewDate.date&&(viewDate.date=picker.$date.getDate(),picker.$updateSelected())},build:function(){var firstDayOfMonth=new Date(viewDate.year,viewDate.month,1),firstDayOfMonthOffset=firstDayOfMonth.getTimezoneOffset(),firstDate=new Date(+firstDayOfMonth-864e5*mod(firstDayOfMonth.getDay()-options.startWeek,7)),firstDateOffset=firstDate.getTimezoneOffset(),today=(new Date).toDateString();firstDateOffset!==firstDayOfMonthOffset&&(firstDate=new Date(+firstDate+6e4*(firstDateOffset-firstDayOfMonthOffset)));for(var day,days=[],i=0;42>i;i++)day=new Date(firstDate.getFullYear(),firstDate.getMonth(),firstDate.getDate()+i),days.push({date:day,isToday:day.toDateString()===today,label:dateFilter(day,this.format),selected:picker.$date&&this.isSelected(day),muted:day.getMonth()!==viewDate.month,disabled:this.isDisabled(day)});scope.title=dateFilter(firstDayOfMonth,"MMMM yyyy"),scope.showLabels=!0,scope.labels=weekDaysLabelsHtml,scope.rows=split(days,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()&&date.getMonth()===picker.$date.getMonth()&&date.getDate()===picker.$date.getDate()},isDisabled:function(date){var time=date.getTime();if(time<options.minDate||time>options.maxDate)return!0;if(-1!==options.daysOfWeekDisabled.indexOf(date.getDay()))return!0;if(options.disabledDateRanges)for(var i=0;i<options.disabledDateRanges.length;i++)if(time>=options.disabledDateRanges[i].start)return time<=options.disabledDateRanges[i].end?!0:!1;return!1},onKeyDown:function(evt){var newDate,actualTime=picker.$date.getTime();37===evt.keyCode?newDate=new Date(actualTime-864e5):38===evt.keyCode?newDate=new Date(actualTime-6048e5):39===evt.keyCode?newDate=new Date(actualTime+864e5):40===evt.keyCode&&(newDate=new Date(actualTime+6048e5)),this.isDisabled(newDate)||picker.select(newDate,!0)}},{name:"month",format:"MMM",split:4,steps:{year:1},update:function(date){this.built&&date.getFullYear()===viewDate.year?date.getMonth()!==viewDate.month&&(angular.extend(viewDate,{month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$updateSelected()):(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build())},build:function(){for(var month,months=(new Date(viewDate.year,0,1),[]),i=0;12>i;i++)month=new Date(viewDate.year,i,1),months.push({date:month,label:dateFilter(month,this.format),selected:picker.$isSelected(month),disabled:this.isDisabled(month)});scope.title=dateFilter(month,"yyyy"),scope.showLabels=!1,scope.rows=split(months,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()&&date.getMonth()===picker.$date.getMonth()},isDisabled:function(date){var lastDate=+new Date(date.getFullYear(),date.getMonth()+1,0);return lastDate<options.minDate||date.getTime()>options.maxDate},onKeyDown:function(evt){var actualMonth=picker.$date.getMonth(),newDate=new Date(picker.$date);37===evt.keyCode?newDate.setMonth(actualMonth-1):38===evt.keyCode?newDate.setMonth(actualMonth-4):39===evt.keyCode?newDate.setMonth(actualMonth+1):40===evt.keyCode&&newDate.setMonth(actualMonth+4),this.isDisabled(newDate)||picker.select(newDate,!0)}},{name:"year",format:"yyyy",split:4,steps:{year:12},update:function(date,force){!this.built||force||parseInt(date.getFullYear()/20,10)!==parseInt(viewDate.year/20,10)?(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build()):date.getFullYear()!==viewDate.year&&(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$updateSelected())},build:function(){for(var year,firstYear=viewDate.year-viewDate.year%(3*this.split),years=[],i=0;12>i;i++)year=new Date(firstYear+i,0,1),years.push({date:year,label:dateFilter(year,this.format),selected:picker.$isSelected(year),disabled:this.isDisabled(year)});scope.title=years[0].label+"-"+years[years.length-1].label,scope.showLabels=!1,scope.rows=split(years,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()},isDisabled:function(date){var lastDate=+new Date(date.getFullYear()+1,0,0);return lastDate<options.minDate||date.getTime()>options.maxDate},onKeyDown:function(evt){var actualYear=picker.$date.getFullYear(),newDate=new Date(picker.$date);37===evt.keyCode?newDate.setYear(actualYear-1):38===evt.keyCode?newDate.setYear(actualYear-4):39===evt.keyCode?newDate.setYear(actualYear+1):40===evt.keyCode&&newDate.setYear(actualYear+4),this.isDisabled(newDate)||picker.select(newDate,!0)}}]);return{views:options.minView?Array.prototype.slice.call(views,options.minView):views,viewDate:viewDate}}}]}),angular.module("mgcrea.ngStrap.dropdown",["mgcrea.ngStrap.tooltip"]).provider("$dropdown",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"dropdown",placement:"bottom-left",template:"dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!1,delay:0};this.$get=["$window","$rootScope","$tooltip",function($window,$rootScope,$tooltip){function DropdownFactory(element,config){function onBodyClick(evt){return evt.target!==element[0]?evt.target!==element[0]&&$dropdown.hide():void 0}{var $dropdown={},options=angular.extend({},defaults,config);$dropdown.$scope=options.scope&&options.scope.$new()||$rootScope.$new()}$dropdown=$tooltip(element,options);var parentEl=element.parent();$dropdown.$onKeyDown=function(evt){if(/(38|40)/.test(evt.keyCode)){evt.preventDefault(),evt.stopPropagation();var items=angular.element($dropdown.$element[0].querySelectorAll("li:not(.divider) a"));if(items.length){var index;angular.forEach(items,function(el,i){matchesSelector&&matchesSelector.call(el,":focus")&&(index=i)}),38===evt.keyCode&&index>0?index--:40===evt.keyCode&&index<items.length-1?index++:angular.isUndefined(index)&&(index=0),items.eq(index)[0].focus()}}};var show=$dropdown.show;$dropdown.show=function(){show(),setTimeout(function(){options.keyboard&&$dropdown.$element.on("keydown",$dropdown.$onKeyDown),bodyEl.on("click",onBodyClick)}),parentEl.hasClass("dropdown")&&parentEl.addClass("open")};var hide=$dropdown.hide;return $dropdown.hide=function(){options.keyboard&&$dropdown.$element.off("keydown",$dropdown.$onKeyDown),bodyEl.off("click",onBodyClick),parentEl.hasClass("dropdown")&&parentEl.removeClass("open"),hide()},$dropdown}var bodyEl=angular.element($window.document.body),matchesSelector=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return DropdownFactory}]}).directive("bsDropdown",["$window","$sce","$dropdown",function($window,$sce,$dropdown){return{restrict:"EAC",scope:!0,link:function(scope,element,attr){var options={scope:scope};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),attr.bsDropdown&&scope.$watch(attr.bsDropdown,function(newValue){scope.content=newValue},!0),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue){dropdown&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(",?(dropdown),?")),newValue===!0?dropdown.show():dropdown.hide())});var dropdown=$dropdown(element,options);scope.$on("$destroy",function(){dropdown&&dropdown.destroy(),options=null,dropdown=null})}}}]),angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function(){function noop(){}var proto=Date.prototype,defaults=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function($locale,dateFilter){var DateParserFactory=function(config){function setMapForFormat(format){var i,keys=Object.keys(setFnMap),map=[],sortedMap=[],clonedFormat=format;for(i=0;i<keys.length;i++)if(format.split(keys[i]).length>1){var index=clonedFormat.search(keys[i]);format=format.split(keys[i]).join(""),setFnMap[keys[i]]&&(map[index]=setFnMap[keys[i]])}return angular.forEach(map,function(v){v&&sortedMap.push(v)}),sortedMap}function escapeReservedSymbols(text){return text.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function regExpForFormat(format){var i,keys=Object.keys(regExpMap),re=format;for(i=0;i<keys.length;i++)re=re.split(keys[i]).join("${"+i+"}");for(i=0;i<keys.length;i++)re=re.split("${"+i+"}").join("("+regExpMap[keys[i]]+")");return format=escapeReservedSymbols(format),new RegExp("^"+re+"$",["i"])}var regex,setMap,options=angular.extend({},defaults,config),$dateParser={},regExpMap={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:options.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:options.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:options.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:options.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:$locale.DATETIME_FORMATS.DAY.join("|"),EEE:$locale.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:options.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:$locale.DATETIME_FORMATS.MONTH.join("|"),MMM:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:options.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:options.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},setFnMap={sss:proto.setMilliseconds,ss:proto.setSeconds,s:proto.setSeconds,mm:proto.setMinutes,m:proto.setMinutes,HH:proto.setHours,H:proto.setHours,hh:proto.setHours,h:proto.setHours,EEEE:noop,EEE:noop,dd:proto.setDate,d:proto.setDate,a:function(value){var hours=this.getHours();return this.setHours(value.match(/pm/i)?hours+12:hours)},MMMM:function(value){return this.setMonth($locale.DATETIME_FORMATS.MONTH.indexOf(value))},MMM:function(value){return this.setMonth($locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value))},MM:function(value){return this.setMonth(1*value-1)},M:function(value){return this.setMonth(1*value-1)},yyyy:proto.setFullYear,yy:function(value){return this.setFullYear(2e3+1*value)},y:proto.setFullYear};return $dateParser.init=function(){$dateParser.$format=$locale.DATETIME_FORMATS[options.format]||options.format,regex=regExpForFormat($dateParser.$format),setMap=setMapForFormat($dateParser.$format)},$dateParser.isValid=function(date){return angular.isDate(date)?!isNaN(date.getTime()):regex.test(date)},$dateParser.parse=function(value,baseDate,format){angular.isDate(value)&&(value=dateFilter(value,format||$dateParser.$format));var formatRegex=format?regExpForFormat(format):regex,formatSetMap=format?setMapForFormat(format):setMap,matches=formatRegex.exec(value);if(!matches)return!1;for(var date=baseDate||new Date(0,0,1),i=0;i<matches.length-1;i++)formatSetMap[i]&&formatSetMap[i].call(date,matches[i+1]);return date},$dateParser.init(),$dateParser};return DateParserFactory}]}]),angular.module("mgcrea.ngStrap.helpers.debounce",[]).constant("debounce",function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args)))},callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args)),result}}).constant("throttle",function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:new Date,timeout=null,result=func.apply(context,args)};return function(){var now=new Date;previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}}),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(){var fn=(angular.element,{}),nodeName=fn.nodeName=function(element,name){return element.nodeName&&element.nodeName.toLowerCase()===name.toLowerCase()};fn.css=function(element,prop,extra){var value;return value=element.currentStyle?element.currentStyle[prop]:window.getComputedStyle?window.getComputedStyle(element)[prop]:element.style[prop],extra===!0?parseFloat(value)||0:value},fn.offset=function(element){var boxRect=element.getBoundingClientRect(),docElement=element.ownerDocument;return{width:boxRect.width||element.offsetWidth,height:boxRect.height||element.offsetHeight,top:boxRect.top+(window.pageYOffset||docElement.documentElement.scrollTop)-(docElement.documentElement.clientTop||0),left:boxRect.left+(window.pageXOffset||docElement.documentElement.scrollLeft)-(docElement.documentElement.clientLeft||0)}},fn.position=function(element){var offsetParentElement,offset,offsetParentRect={top:0,left:0};return"fixed"===fn.css(element,"position")?offset=element.getBoundingClientRect():(offsetParentElement=offsetParent(element),offset=fn.offset(element),offset=fn.offset(element),nodeName(offsetParentElement,"html")||(offsetParentRect=fn.offset(offsetParentElement)),offsetParentRect.top+=fn.css(offsetParentElement,"borderTopWidth",!0),offsetParentRect.left+=fn.css(offsetParentElement,"borderLeftWidth",!0)),{width:element.offsetWidth,height:element.offsetHeight,top:offset.top-offsetParentRect.top-fn.css(element,"marginTop",!0),left:offset.left-offsetParentRect.left-fn.css(element,"marginLeft",!0)}};var offsetParent=function(element){var docElement=element.ownerDocument,offsetParent=element.offsetParent||docElement;if(nodeName(offsetParent,"#document"))return docElement.documentElement;for(;offsetParent&&!nodeName(offsetParent,"html")&&"static"===fn.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElement.documentElement};return fn.height=function(element,outer){var value=element.offsetHeight;return outer?value+=fn.css(element,"marginTop",!0)+fn.css(element,"marginBottom",!0):value-=fn.css(element,"paddingTop",!0)+fn.css(element,"paddingBottom",!0)+fn.css(element,"borderTopWidth",!0)+fn.css(element,"borderBottomWidth",!0),value},fn.width=function(element,outer){var value=element.offsetWidth;return outer?value+=fn.css(element,"marginLeft",!0)+fn.css(element,"marginRight",!0):value-=fn.css(element,"paddingLeft",!0)+fn.css(element,"paddingRight",!0)+fn.css(element,"borderLeftWidth",!0)+fn.css(element,"borderRightWidth",!0),value},fn}]),angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var defaults=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function($parse,$q){function ParseOptionsFactory(attr,config){function parseValues(values,scope){return values.map(function(match,index){var label,value,locals={};return locals[valueName]=match,label=displayFn(scope,locals),value=valueFn(scope,locals)||index,{label:label,value:value}})}var $parseOptions={},options=angular.extend({},defaults,config);$parseOptions.$values=[];var match,displayFn,valueName,keyName,groupByFn,valueFn,valuesFn;return $parseOptions.init=function(){$parseOptions.$match=match=attr.match(options.regexp),displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7])},$parseOptions.valuesFn=function(scope,controller){return $q.when(valuesFn(scope,controller)).then(function(values){return $parseOptions.$values=values?parseValues(values,scope):{},$parseOptions.$values})},$parseOptions.init(),$parseOptions}return ParseOptionsFactory}]}),angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame||$window.mozRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.mozCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]),angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var defaults=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",prefixEvent:"modal",placement:"top",template:"modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};
this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","$sce","dimensions",function($window,$rootScope,$compile,$q,$templateCache,$http,$animate,$timeout,$sce){function ModalFactory(config){function hideOnBackdropClick(evt){evt.target===evt.currentTarget&&("static"===options.backdrop?$modal.focus():$modal.hide())}var $modal={},options=$modal.$options=angular.extend({},defaults,config);$modal.$promise=fetchTemplate(options.template);var scope=$modal.$scope=options.scope&&options.scope.$new()||$rootScope.$new();options.element||options.container||(options.container="body"),forEach(["title","content"],function(key){options[key]&&(scope[key]=$sce.trustAsHtml(options[key]))}),scope.$hide=function(){scope.$$postDigest(function(){$modal.hide()})},scope.$show=function(){scope.$$postDigest(function(){$modal.show()})},scope.$toggle=function(){scope.$$postDigest(function(){$modal.toggle()})},options.contentTemplate&&($modal.$promise=$modal.$promise.then(function(template){var templateEl=angular.element(template);return fetchTemplate(options.contentTemplate).then(function(contentTemplate){var contentEl=findElement('[ng-bind="content"]',templateEl[0]).removeAttr("ng-bind").html(contentTemplate);return config.template||contentEl.next().remove(),templateEl[0].outerHTML})}));var modalLinker,modalElement,backdropElement=angular.element('<div class="'+options.prefixClass+'-backdrop"/>');return $modal.$promise.then(function(template){angular.isObject(template)&&(template=template.data),options.html&&(template=template.replace(htmlReplaceRegExp,'ng-bind-html="')),template=trim.apply(template),modalLinker=$compile(template),$modal.init()}),$modal.init=function(){options.show&&scope.$$postDigest(function(){$modal.show()})},$modal.destroy=function(){modalElement&&(modalElement.remove(),modalElement=null),backdropElement&&(backdropElement.remove(),backdropElement=null),scope.$destroy()},$modal.show=function(){scope.$emit(options.prefixEvent+".show.before",$modal);var parent;parent=angular.isElement(options.container)?options.container:options.container?findElement(options.container):null;var after=options.container?null:options.element;modalElement=$modal.$element=modalLinker(scope,function(){}),modalElement.css({display:"block"}).addClass(options.placement),options.animation&&(options.backdrop&&backdropElement.addClass(options.backdropAnimation),modalElement.addClass(options.animation)),options.backdrop&&$animate.enter(backdropElement,bodyElement,null,function(){}),$animate.enter(modalElement,parent,after,function(){scope.$emit(options.prefixEvent+".show",$modal)}),scope.$isShown=!0,scope.$$phase||scope.$root&&scope.$root.$$phase||scope.$digest();var el=modalElement[0];requestAnimationFrame(function(){el.focus()}),bodyElement.addClass(options.prefixClass+"-open"),options.animation&&bodyElement.addClass(options.prefixClass+"-with-"+options.animation),options.backdrop&&(modalElement.on("click",hideOnBackdropClick),backdropElement.on("click",hideOnBackdropClick)),options.keyboard&&modalElement.on("keyup",$modal.$onKeyUp)},$modal.hide=function(){scope.$emit(options.prefixEvent+".hide.before",$modal),$animate.leave(modalElement,function(){scope.$emit(options.prefixEvent+".hide",$modal),bodyElement.removeClass(options.prefixClass+"-open"),options.animation&&bodyElement.removeClass(options.prefixClass+"-with-"+options.animation)}),options.backdrop&&$animate.leave(backdropElement,function(){}),scope.$isShown=!1,scope.$$phase||scope.$root&&scope.$root.$$phase||scope.$digest(),options.backdrop&&(modalElement.off("click",hideOnBackdropClick),backdropElement.off("click",hideOnBackdropClick)),options.keyboard&&modalElement.off("keyup",$modal.$onKeyUp)},$modal.toggle=function(){scope.$isShown?$modal.hide():$modal.show()},$modal.focus=function(){modalElement[0].focus()},$modal.$onKeyUp=function(evt){27===evt.which&&scope.$isShown&&($modal.hide(),evt.stopPropagation())},$modal}function findElement(query,element){return angular.element((element||document).querySelectorAll(query))}function fetchTemplate(template){return $q.when($templateCache.get(template)||$http.get(template)).then(function(res){return angular.isObject(res)?($templateCache.put(template,res.data),res.data):res})}var forEach=angular.forEach,trim=String.prototype.trim,requestAnimationFrame=$window.requestAnimationFrame||$window.setTimeout,bodyElement=angular.element($window.document.body),htmlReplaceRegExp=/ng-bind="/gi;return ModalFactory}]}).directive("bsModal",["$window","$sce","$modal",function($window,$sce,$modal){return{restrict:"EAC",scope:!0,link:function(scope,element,attr){var options={scope:scope,element:element,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),angular.forEach(["title","content"],function(key){attr[key]&&attr.$observe(key,function(newValue){scope[key]=$sce.trustAsHtml(newValue)})}),attr.bsModal&&scope.$watch(attr.bsModal,function(newValue){angular.isObject(newValue)?angular.extend(scope,newValue):scope.content=newValue},!0);var modal=$modal(options);element.on(attr.trigger||"click",modal.toggle),scope.$on("$destroy",function(){modal&&modal.destroy(),options=null,modal=null})}}}]),angular.module("mgcrea.ngStrap.navbar",[]).provider("$navbar",function(){var defaults=this.defaults={activeClass:"active",routeAttr:"data-match-route",strict:!1};this.$get=function(){return{defaults:defaults}}}).directive("bsNavbar",["$window","$location","$navbar",function($window,$location,$navbar){var defaults=$navbar.defaults;return{restrict:"A",link:function(scope,element,attr){var options=angular.copy(defaults);angular.forEach(Object.keys(defaults),function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),scope.$watch(function(){return $location.path()},function(newValue){var liElements=element[0].querySelectorAll("li["+options.routeAttr+"]");angular.forEach(liElements,function(li){var liElement=angular.element(li),pattern=liElement.attr(options.routeAttr).replace("/","\\/");options.strict&&(pattern="^"+pattern+"$");var regexp=new RegExp(pattern,["i"]);regexp.test(newValue)?liElement.addClass(options.activeClass):liElement.removeClass(options.activeClass)})})}}}]),angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("$popover",function(){var defaults=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",template:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0};this.$get=["$tooltip",function($tooltip){function PopoverFactory(element,config){var options=angular.extend({},defaults,config),$popover=$tooltip(element,options);return options.content&&($popover.$scope.content=options.content),$popover}return PopoverFactory}]}).directive("bsPopover",["$window","$sce","$popover",function($window,$sce,$popover){var requestAnimationFrame=$window.requestAnimationFrame||$window.setTimeout;return{restrict:"EAC",scope:!0,link:function(scope,element,attr){var options={scope:scope};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","customClass"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),angular.forEach(["title","content"],function(key){attr[key]&&attr.$observe(key,function(newValue,oldValue){scope[key]=$sce.trustAsHtml(newValue),angular.isDefined(oldValue)&&requestAnimationFrame(function(){popover&&popover.$applyPlacement()})})}),attr.bsPopover&&scope.$watch(attr.bsPopover,function(newValue,oldValue){angular.isObject(newValue)?angular.extend(scope,newValue):scope.content=newValue,angular.isDefined(oldValue)&&requestAnimationFrame(function(){popover&&popover.$applyPlacement()})},!0),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue){popover&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(",?(popover),?")),newValue===!0?popover.show():popover.hide())});var popover=$popover(element,options);scope.$on("$destroy",function(){popover&&popover.destroy(),options=null,popover=null})}}}]),angular.module("mgcrea.ngStrap.scrollspy",["mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions"]).provider("$scrollspy",function(){var spies=this.$$spies={},defaults=this.defaults={debounce:150,throttle:100,offset:100};this.$get=["$window","$document","$rootScope","dimensions","debounce","throttle",function($window,$document,$rootScope,dimensions,debounce,throttle){function nodeName(element,name){return element[0].nodeName&&element[0].nodeName.toLowerCase()===name.toLowerCase()}function ScrollSpyFactory(config){var options=angular.extend({},defaults,config);options.element||(options.element=bodyEl);var isWindowSpy=nodeName(options.element,"body"),scrollEl=isWindowSpy?windowEl:options.element,scrollId=isWindowSpy?"window":options.id;if(spies[scrollId])return spies[scrollId].$$count++,spies[scrollId];var unbindViewContentLoaded,unbindIncludeContentLoaded,activeTarget,debouncedCheckPosition,throttledCheckPosition,debouncedCheckOffsets,viewportHeight,scrollTop,$scrollspy={},trackedElements=$scrollspy.$trackedElements=[],sortedElements=[];return $scrollspy.init=function(){this.$$count=1,debouncedCheckPosition=debounce(this.checkPosition,options.debounce),throttledCheckPosition=throttle(this.checkPosition,options.throttle),scrollEl.on("click",this.checkPositionWithEventLoop),windowEl.on("resize",debouncedCheckPosition),scrollEl.on("scroll",throttledCheckPosition),debouncedCheckOffsets=debounce(this.checkOffsets,options.debounce),unbindViewContentLoaded=$rootScope.$on("$viewContentLoaded",debouncedCheckOffsets),unbindIncludeContentLoaded=$rootScope.$on("$includeContentLoaded",debouncedCheckOffsets),debouncedCheckOffsets(),scrollId&&(spies[scrollId]=$scrollspy)},$scrollspy.destroy=function(){this.$$count--,this.$$count>0||(scrollEl.off("click",this.checkPositionWithEventLoop),windowEl.off("resize",debouncedCheckPosition),scrollEl.off("scroll",debouncedCheckPosition),unbindViewContentLoaded(),unbindIncludeContentLoaded(),scrollId&&delete spies[scrollId])},$scrollspy.checkPosition=function(){if(sortedElements.length){if(scrollTop=(isWindowSpy?$window.pageYOffset:scrollEl.prop("scrollTop"))||0,viewportHeight=Math.max($window.innerHeight,docEl.prop("clientHeight")),scrollTop<sortedElements[0].offsetTop&&activeTarget!==sortedElements[0].target)return $scrollspy.$activateElement(sortedElements[0]);for(var i=sortedElements.length;i--;)if(!angular.isUndefined(sortedElements[i].offsetTop)&&null!==sortedElements[i].offsetTop&&activeTarget!==sortedElements[i].target&&!(scrollTop<sortedElements[i].offsetTop||sortedElements[i+1]&&scrollTop>sortedElements[i+1].offsetTop))return $scrollspy.$activateElement(sortedElements[i])}},$scrollspy.checkPositionWithEventLoop=function(){setTimeout(this.checkPosition,1)},$scrollspy.$activateElement=function(element){if(activeTarget){var activeElement=$scrollspy.$getTrackedElement(activeTarget);activeElement&&(activeElement.source.removeClass("active"),nodeName(activeElement.source,"li")&&nodeName(activeElement.source.parent().parent(),"li")&&activeElement.source.parent().parent().removeClass("active"))}activeTarget=element.target,element.source.addClass("active"),nodeName(element.source,"li")&&nodeName(element.source.parent().parent(),"li")&&element.source.parent().parent().addClass("active")},$scrollspy.$getTrackedElement=function(target){return trackedElements.filter(function(obj){return obj.target===target})[0]},$scrollspy.checkOffsets=function(){angular.forEach(trackedElements,function(trackedElement){var targetElement=document.querySelector(trackedElement.target);trackedElement.offsetTop=targetElement?dimensions.offset(targetElement).top:null,options.offset&&null!==trackedElement.offsetTop&&(trackedElement.offsetTop-=1*options.offset)}),sortedElements=trackedElements.filter(function(el){return null!==el.offsetTop}).sort(function(a,b){return a.offsetTop-b.offsetTop}),debouncedCheckPosition()},$scrollspy.trackElement=function(target,source){trackedElements.push({target:target,source:source})},$scrollspy.untrackElement=function(target,source){for(var toDelete,i=trackedElements.length;i--;)if(trackedElements[i].target===target&&trackedElements[i].source===source){toDelete=i;break}trackedElements=trackedElements.splice(toDelete,1)},$scrollspy.activate=function(i){trackedElements[i].addClass("active")},$scrollspy.init(),$scrollspy}var windowEl=angular.element($window),docEl=angular.element($document.prop("documentElement")),bodyEl=angular.element($window.document.body);return ScrollSpyFactory}]}).directive("bsScrollspy",["$rootScope","debounce","dimensions","$scrollspy",function($rootScope,debounce,dimensions,$scrollspy){return{restrict:"EAC",link:function(scope,element,attr){var options={scope:scope};angular.forEach(["offset","target"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])});var scrollspy=$scrollspy(options);scrollspy.trackElement(options.target,element),scope.$on("$destroy",function(){scrollspy&&(scrollspy.untrackElement(options.target,element),scrollspy.destroy()),options=null,scrollspy=null})}}}]).directive("bsScrollspyList",["$rootScope","debounce","dimensions","$scrollspy",function(){return{restrict:"A",compile:function(element){var children=element[0].querySelectorAll("li > a[href]");angular.forEach(children,function(child){var childEl=angular.element(child);childEl.parent().attr("bs-scrollspy","").attr("data-target",childEl.attr("href"))})}}}]),angular.module("mgcrea.ngStrap.select",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$select",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"select",prefixEvent:"$select",placement:"bottom-left",template:"select/select.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:"Choose among the following...",maxLength:3,maxLengthHtml:"selected",iconCheckmark:"glyphicon glyphicon-ok"};this.$get=["$window","$document","$rootScope","$tooltip",function($window,$document,$rootScope,$tooltip){function SelectFactory(element,controller,config){var $select={},options=angular.extend({},defaults,config);$select=$tooltip(element,options);var scope=$select.$scope;scope.$matches=[],scope.$activeIndex=0,scope.$isMultiple=options.multiple,scope.$showAllNoneButtons=options.allNoneButtons&&options.multiple,scope.$iconCheckmark=options.iconCheckmark,scope.$activate=function(index){scope.$$postDigest(function(){$select.activate(index)})},scope.$select=function(index){scope.$$postDigest(function(){$select.select(index)})},scope.$isVisible=function(){return $select.$isVisible()},scope.$isActive=function(index){return $select.$isActive(index)},scope.$selectAll=function(){for(var i=0;i<scope.$matches.length;i++)scope.$isActive(i)||scope.$select(i)},scope.$selectNone=function(){for(var i=0;i<scope.$matches.length;i++)scope.$isActive(i)&&scope.$select(i)},$select.update=function(matches){scope.$matches=matches,$select.$updateActiveIndex()},$select.activate=function(index){return options.multiple?(scope.$activeIndex.sort(),$select.$isActive(index)?scope.$activeIndex.splice(scope.$activeIndex.indexOf(index),1):scope.$activeIndex.push(index),options.sort&&scope.$activeIndex.sort()):scope.$activeIndex=index,scope.$activeIndex},$select.select=function(index){var value=scope.$matches[index].value;scope.$apply(function(){$select.activate(index),options.multiple?controller.$setViewValue(scope.$activeIndex.map(function(index){return scope.$matches[index].value})):(controller.$setViewValue(value),$select.hide())}),scope.$emit(options.prefixEvent+".select",value,index)},$select.$updateActiveIndex=function(){controller.$modelValue&&scope.$matches.length?scope.$activeIndex=options.multiple&&angular.isArray(controller.$modelValue)?controller.$modelValue.map(function(value){return $select.$getIndex(value)}):$select.$getIndex(controller.$modelValue):scope.$activeIndex>=scope.$matches.length&&(scope.$activeIndex=options.multiple?[]:0)},$select.$isVisible=function(){return options.minLength&&controller?scope.$matches.length&&controller.$viewValue.length>=options.minLength:scope.$matches.length},$select.$isActive=function(index){return options.multiple?-1!==scope.$activeIndex.indexOf(index):scope.$activeIndex===index},$select.$getIndex=function(value){var l=scope.$matches.length,i=l;if(l){for(i=l;i--&&scope.$matches[i].value!==value;);if(!(0>i))return i}},$select.$onMouseDown=function(evt){if(evt.preventDefault(),evt.stopPropagation(),isTouch){var targetEl=angular.element(evt.target);targetEl.triggerHandler("click")}},$select.$onKeyDown=function(evt){if(/(9|13|38|40)/.test(evt.keyCode)){if(evt.preventDefault(),evt.stopPropagation(),!options.multiple&&(13===evt.keyCode||9===evt.keyCode))return $select.select(scope.$activeIndex);38===evt.keyCode&&scope.$activeIndex>0?scope.$activeIndex--:40===evt.keyCode&&scope.$activeIndex<scope.$matches.length-1?scope.$activeIndex++:angular.isUndefined(scope.$activeIndex)&&(scope.$activeIndex=0),scope.$digest()}};var _show=$select.show;$select.show=function(){_show(),options.multiple&&$select.$element.addClass("select-multiple"),setTimeout(function(){$select.$element.on(isTouch?"touchstart":"mousedown",$select.$onMouseDown),options.keyboard&&element.on("keydown",$select.$onKeyDown)})};var _hide=$select.hide;return $select.hide=function(){$select.$element.off(isTouch?"touchstart":"mousedown",$select.$onMouseDown),options.keyboard&&element.off("keydown",$select.$onKeyDown),_hide(!0)},$select}var isNative=(angular.element($window.document.body),/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent)),isTouch="createTouch"in $window.document&&isNative;return SelectFactory.defaults=defaults,SelectFactory}]}).directive("bsSelect",["$window","$parse","$q","$select","$parseOptions",function($window,$parse,$q,$select,$parseOptions){var defaults=$select.defaults;return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){var options={scope:scope};if(angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","placeholder","multiple","allNoneButtons","maxLength","maxLengthHtml"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),"select"===element[0].nodeName.toLowerCase()){var inputEl=element;inputEl.css("display","none"),element=angular.element('<button type="button" class="btn btn-default"></button>'),inputEl.after(element)}var parsedOptions=$parseOptions(attr.ngOptions),select=$select(element,controller,options),watchedOptions=parsedOptions.$match[7].replace(/\|.+/,"").trim();scope.$watch(watchedOptions,function(){parsedOptions.valuesFn(scope,controller).then(function(values){select.update(values),controller.$render()})},!0),scope.$watch(attr.ngModel,function(){select.$updateActiveIndex(),controller.$render()},!0),controller.$render=function(){var selected,index;options.multiple&&angular.isArray(controller.$modelValue)?(selected=controller.$modelValue.map(function(value){return index=select.$getIndex(value),angular.isDefined(index)?select.$scope.$matches[index].label:!1}).filter(angular.isDefined),selected=selected.length>(options.maxLength||defaults.maxLength)?selected.length+" "+(options.maxLengthHtml||defaults.maxLengthHtml):selected.join(", ")):(index=select.$getIndex(controller.$modelValue),selected=angular.isDefined(index)?select.$scope.$matches[index].label:!1),element.html((selected?selected:attr.placeholder||defaults.placeholder)+defaults.caretHtml)},scope.$on("$destroy",function(){select&&select.destroy(),options=null,select=null})}}}]),angular.module("mgcrea.ngStrap.tab",[]).provider("$tab",function(){var defaults=this.defaults={animation:"am-fade",template:"tab/tab.tpl.html",navClass:"nav-tabs",activeClass:"active"},controller=this.controller=function($scope,$element,$attrs){var self=this;self.$options=angular.copy(defaults),angular.forEach(["animation","navClass","activeClass"],function(key){angular.isDefined($attrs[key])&&(self.$options[key]=$attrs[key])}),$scope.$navClass=self.$options.navClass,$scope.$activeClass=self.$options.activeClass,self.$panes=$scope.$panes=[],self.$viewChangeListeners=[],self.$push=function(pane){self.$panes.push(pane)},self.$panes.$active=0,self.$setActive=$scope.$setActive=function(value){self.$panes.$active=value,self.$viewChangeListeners.forEach(function(fn){fn()})}};this.$get=function(){var $tab={};return $tab.defaults=defaults,$tab.controller=controller,$tab}}).directive("bsTabs",["$window","$animate","$tab",function($window,$animate,$tab){var defaults=$tab.defaults;return{require:["?ngModel","bsTabs"],transclude:!0,scope:!0,controller:["$scope","$element","$attrs",$tab.controller],templateUrl:function(element,attr){return attr.template||defaults.template},link:function(scope,element,attrs,controllers){var ngModelCtrl=controllers[0],bsTabsCtrl=controllers[1];ngModelCtrl&&(bsTabsCtrl.$viewChangeListeners.push(function(){ngModelCtrl.$setViewValue(bsTabsCtrl.$panes.$active)}),ngModelCtrl.$formatters.push(function(modelValue){return bsTabsCtrl.$setActive(1*modelValue),modelValue}))}}}]).directive("bsPane",["$window","$animate","$sce",function($window,$animate,$sce){return{require:["^?ngModel","^bsTabs"],scope:!0,link:function(scope,element,attrs,controllers){function render(){var index=bsTabsCtrl.$panes.indexOf(scope),active=bsTabsCtrl.$panes.$active;$animate[index===active?"addClass":"removeClass"](element,bsTabsCtrl.$options.activeClass)}var bsTabsCtrl=(controllers[0],controllers[1]);element.addClass("tab-pane"),attrs.$observe("title",function(newValue){scope.title=$sce.trustAsHtml(newValue)}),bsTabsCtrl.$options.animation&&element.addClass(bsTabsCtrl.$options.animation),bsTabsCtrl.$push(scope),bsTabsCtrl.$viewChangeListeners.push(function(){render()}),render()}}}]),angular.module("mgcrea.ngStrap.timepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.tooltip"]).provider("$timepicker",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",template:"timepicker/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",modelTimeFormat:null,autoclose:!1,minTime:-1/0,maxTime:+1/0,length:5,hourStep:1,minuteStep:5,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$locale","dateFilter","$tooltip",function($window,$document,$rootScope,$sce,$locale,dateFilter,$tooltip){function timepickerFactory(element,controller,config){function createSelection(start,end){if(element[0].createTextRange){var selRange=element[0].createTextRange();selRange.collapse(!0),selRange.moveStart("character",start),selRange.moveEnd("character",end),selRange.select()}else element[0].setSelectionRange?element[0].setSelectionRange(start,end):angular.isUndefined(element[0].selectionStart)&&(element[0].selectionStart=start,element[0].selectionEnd=end)}function focusElement(){element[0].focus()}var $timepicker=$tooltip(element,angular.extend({},defaults,config)),parentScope=config.scope,options=$timepicker.$options,scope=$timepicker.$scope,selectedIndex=0,startDate=controller.$dateValue||new Date,viewDate={hour:startDate.getHours(),meridian:startDate.getHours()<12,minute:startDate.getMinutes(),second:startDate.getSeconds(),millisecond:startDate.getMilliseconds()},format=$locale.DATETIME_FORMATS[options.timeFormat]||options.timeFormat,formats=/(h+)([:\.])?(m+)[ ]?(a?)/i.exec(format).slice(1);scope.$iconUp=options.iconUp,scope.$iconDown=options.iconDown,scope.$select=function(date,index){$timepicker.select(date,index)},scope.$moveIndex=function(value,index){$timepicker.$moveIndex(value,index)},scope.$switchMeridian=function(date){$timepicker.switchMeridian(date)},$timepicker.update=function(date){angular.isDate(date)&&!isNaN(date.getTime())?($timepicker.$date=date,angular.extend(viewDate,{hour:date.getHours(),minute:date.getMinutes(),second:date.getSeconds(),millisecond:date.getMilliseconds()}),$timepicker.$build()):$timepicker.$isBuilt||$timepicker.$build()},$timepicker.select=function(date,index,keep){(!controller.$dateValue||isNaN(controller.$dateValue.getTime()))&&(controller.$dateValue=new Date(1970,0,1)),angular.isDate(date)||(date=new Date(date)),0===index?controller.$dateValue.setHours(date.getHours()):1===index&&controller.$dateValue.setMinutes(date.getMinutes()),controller.$setViewValue(controller.$dateValue),controller.$render(),options.autoclose&&!keep&&$timepicker.hide(!0)},$timepicker.switchMeridian=function(date){var hours=(date||controller.$dateValue).getHours();controller.$dateValue.setHours(12>hours?hours+12:hours-12),controller.$setViewValue(controller.$dateValue),controller.$render()},$timepicker.$build=function(){var i,hour,midIndex=scope.midIndex=parseInt(options.length/2,10),hours=[];for(i=0;i<options.length;i++)hour=new Date(1970,0,1,viewDate.hour-(midIndex-i)*options.hourStep),hours.push({date:hour,label:dateFilter(hour,formats[0]),selected:$timepicker.$date&&$timepicker.$isSelected(hour,0),disabled:$timepicker.$isDisabled(hour,0)});var minute,minutes=[];for(i=0;i<options.length;i++)minute=new Date(1970,0,1,0,viewDate.minute-(midIndex-i)*options.minuteStep),minutes.push({date:minute,label:dateFilter(minute,formats[2]),selected:$timepicker.$date&&$timepicker.$isSelected(minute,1),disabled:$timepicker.$isDisabled(minute,1)});var rows=[];for(i=0;i<options.length;i++)rows.push([hours[i],minutes[i]]);scope.rows=rows,scope.showAM=!!formats[3],scope.isAM=($timepicker.$date||hours[midIndex].date).getHours()<12,scope.timeSeparator=formats[1],$timepicker.$isBuilt=!0},$timepicker.$isSelected=function(date,index){return $timepicker.$date?0===index?date.getHours()===$timepicker.$date.getHours():1===index?date.getMinutes()===$timepicker.$date.getMinutes():void 0:!1},$timepicker.$isDisabled=function(date,index){var selectedTime;return 0===index?selectedTime=date.getTime()+6e4*viewDate.minute:1===index&&(selectedTime=date.getTime()+36e5*viewDate.hour),selectedTime<1*options.minTime||selectedTime>1*options.maxTime},scope.$arrowAction=function(value,index){"picker"===options.arrowBehavior?$timepicker.$setTimeByStep(value,index):$timepicker.$moveIndex(value,index)},$timepicker.$setTimeByStep=function(value,index){{var newDate=new Date($timepicker.$date),hours=newDate.getHours(),minutes=(dateFilter(newDate,"h").length,newDate.getMinutes());dateFilter(newDate,"mm").length}0===index?newDate.setHours(hours-parseInt(options.hourStep,10)*value):newDate.setMinutes(minutes-parseInt(options.minuteStep,10)*value),$timepicker.select(newDate,index,!0),parentScope.$digest()},$timepicker.$moveIndex=function(value,index){var targetDate;0===index?(targetDate=new Date(1970,0,1,viewDate.hour+value*options.length,viewDate.minute),angular.extend(viewDate,{hour:targetDate.getHours()})):1===index&&(targetDate=new Date(1970,0,1,viewDate.hour,viewDate.minute+value*options.length*options.minuteStep),angular.extend(viewDate,{minute:targetDate.getMinutes()})),$timepicker.$build()},$timepicker.$onMouseDown=function(evt){if("input"!==evt.target.nodeName.toLowerCase()&&evt.preventDefault(),evt.stopPropagation(),isTouch){var targetEl=angular.element(evt.target);"button"!==targetEl[0].nodeName.toLowerCase()&&(targetEl=targetEl.parent()),targetEl.triggerHandler("click")}},$timepicker.$onKeyDown=function(evt){if(/(38|37|39|40|13)/.test(evt.keyCode)&&!evt.shiftKey&&!evt.altKey){if(evt.preventDefault(),evt.stopPropagation(),13===evt.keyCode)return $timepicker.hide(!0);var newDate=new Date($timepicker.$date),hours=newDate.getHours(),hoursLength=dateFilter(newDate,"h").length,minutes=newDate.getMinutes(),minutesLength=dateFilter(newDate,"mm").length,lateralMove=/(37|39)/.test(evt.keyCode),count=2+1*!!formats[3];lateralMove&&(37===evt.keyCode?selectedIndex=1>selectedIndex?count-1:selectedIndex-1:39===evt.keyCode&&(selectedIndex=count-1>selectedIndex?selectedIndex+1:0));var selectRange=[0,hoursLength];0===selectedIndex?(38===evt.keyCode?newDate.setHours(hours-parseInt(options.hourStep,10)):40===evt.keyCode&&newDate.setHours(hours+parseInt(options.hourStep,10)),selectRange=[0,hoursLength]):1===selectedIndex?(38===evt.keyCode?newDate.setMinutes(minutes-parseInt(options.minuteStep,10)):40===evt.keyCode&&newDate.setMinutes(minutes+parseInt(options.minuteStep,10)),selectRange=[hoursLength+1,hoursLength+1+minutesLength]):2===selectedIndex&&(lateralMove||$timepicker.switchMeridian(),selectRange=[hoursLength+1+minutesLength+1,hoursLength+1+minutesLength+3]),$timepicker.select(newDate,selectedIndex,!0),createSelection(selectRange[0],selectRange[1]),parentScope.$digest()}};var _init=$timepicker.init;$timepicker.init=function(){return isNative&&options.useNative?(element.prop("type","time"),void element.css("-webkit-appearance","textfield")):(isTouch&&(element.prop("type","text"),element.attr("readonly","true"),element.on("click",focusElement)),void _init())};var _destroy=$timepicker.destroy;$timepicker.destroy=function(){isNative&&options.useNative&&element.off("click",focusElement),_destroy()};var _show=$timepicker.show;$timepicker.show=function(){_show(),setTimeout(function(){$timepicker.$element.on(isTouch?"touchstart":"mousedown",$timepicker.$onMouseDown),options.keyboard&&element.on("keydown",$timepicker.$onKeyDown)})};var _hide=$timepicker.hide;return $timepicker.hide=function(blur){$timepicker.$element.off(isTouch?"touchstart":"mousedown",$timepicker.$onMouseDown),options.keyboard&&element.off("keydown",$timepicker.$onKeyDown),_hide(blur)},$timepicker}var isNative=(angular.element($window.document.body),/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent)),isTouch="createTouch"in $window.document&&isNative;return defaults.lang||(defaults.lang=$locale.id),timepickerFactory.defaults=defaults,timepickerFactory}]}).directive("bsTimepicker",["$window","$parse","$q","$locale","dateFilter","$timepicker","$dateParser","$timeout",function($window,$parse,$q,$locale,dateFilter,$timepicker,$dateParser){{var defaults=$timepicker.defaults,isNative=/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent);$window.requestAnimationFrame||$window.setTimeout}return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){var options={scope:scope,controller:controller};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","timeType","timeFormat","modelTimeFormat","useNative","hourStep","minuteStep","length","arrowBehavior"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue){timepicker&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(",?(timepicker),?")),newValue===!0?timepicker.show():timepicker.hide())}),isNative&&(options.useNative||defaults.useNative)&&(options.timeFormat="HH:mm");var timepicker=$timepicker(element,controller,options);options=timepicker.$options;var dateParser=$dateParser({format:options.timeFormat,lang:options.lang});angular.forEach(["minTime","maxTime"],function(key){angular.isDefined(attr[key])&&attr.$observe(key,function(newValue){timepicker.$options[key]="now"===newValue?(new Date).setFullYear(1970,0,1):angular.isString(newValue)&&newValue.match(/^".+"$/)?+new Date(newValue.substr(1,newValue.length-2)):dateParser.parse(newValue,new Date(1970,0,1,0)),!isNaN(timepicker.$options[key])&&timepicker.$build()})}),scope.$watch(attr.ngModel,function(){timepicker.update(controller.$dateValue)},!0),controller.$parsers.unshift(function(viewValue){if(!viewValue)return void controller.$setValidity("date",!0);var parsedTime=angular.isDate(viewValue)?viewValue:dateParser.parse(viewValue,controller.$dateValue);
if(!parsedTime||isNaN(parsedTime.getTime()))controller.$setValidity("date",!1);else{var isValid=parsedTime.getTime()>=options.minTime&&parsedTime.getTime()<=options.maxTime;controller.$setValidity("date",isValid),isValid&&(controller.$dateValue=parsedTime)}return"string"===options.timeType?dateFilter(parsedTime,options.modelTimeFormat||options.timeFormat):"number"===options.timeType?controller.$dateValue.getTime():"iso"===options.timeType?controller.$dateValue.toISOString():new Date(controller.$dateValue)}),controller.$formatters.push(function(modelValue){var date;return date=angular.isUndefined(modelValue)||null===modelValue?0/0:angular.isDate(modelValue)?modelValue:"string"===options.timeType?dateParser.parse(modelValue,null,options.modelTimeFormat):new Date(modelValue),controller.$dateValue=date,controller.$dateValue}),controller.$render=function(){element.val(!controller.$dateValue||isNaN(controller.$dateValue.getTime())?"":dateFilter(controller.$dateValue,options.timeFormat))},scope.$on("$destroy",function(){timepicker&&timepicker.destroy(),options=null,timepicker=null})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var defaults=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF",function($window,$rootScope,$compile,$q,$templateCache,$http,$animate,dimensions,$$rAF){function TooltipFactory(element,config){function getPosition(){return"body"===options.container?dimensions.offset(options.target[0]||element[0]):dimensions.position(options.target[0]||element[0])}function getCalculatedOffset(placement,position,actualWidth,actualHeight){var offset,split=placement.split("-");switch(split[0]){case"right":offset={top:position.top+position.height/2-actualHeight/2,left:position.left+position.width};break;case"bottom":offset={top:position.top+position.height,left:position.left+position.width/2-actualWidth/2};break;case"left":offset={top:position.top+position.height/2-actualHeight/2,left:position.left-actualWidth};break;default:offset={top:position.top-actualHeight,left:position.left+position.width/2-actualWidth/2}}if(!split[1])return offset;if("top"===split[0]||"bottom"===split[0])switch(split[1]){case"left":offset.left=position.left;break;case"right":offset.left=position.left+position.width-actualWidth}else if("left"===split[0]||"right"===split[0])switch(split[1]){case"top":offset.top=position.top-actualHeight;break;case"bottom":offset.top=position.top+position.height}return offset}var $tooltip={},nodeName=element[0].nodeName.toLowerCase(),options=$tooltip.$options=angular.extend({},defaults,config);$tooltip.$promise=fetchTemplate(options.template);var scope=$tooltip.$scope=options.scope&&options.scope.$new()||$rootScope.$new();options.delay&&angular.isString(options.delay)&&(options.delay=parseFloat(options.delay)),options.title&&($tooltip.$scope.title=options.title),scope.$hide=function(){scope.$$postDigest(function(){$tooltip.hide()})},scope.$show=function(){scope.$$postDigest(function(){$tooltip.show()})},scope.$toggle=function(){scope.$$postDigest(function(){$tooltip.toggle()})},$tooltip.$isShown=scope.$isShown=!1;var timeout,hoverState;options.contentTemplate&&($tooltip.$promise=$tooltip.$promise.then(function(template){var templateEl=angular.element(template);return fetchTemplate(options.contentTemplate).then(function(contentTemplate){var contentEl=findElement('[ng-bind="content"]',templateEl[0]);return contentEl.length||(contentEl=findElement('[ng-bind="title"]',templateEl[0])),contentEl.removeAttr("ng-bind").html(contentTemplate),templateEl[0].outerHTML})}));var tipLinker,tipElement,tipTemplate,tipContainer;return $tooltip.$promise.then(function(template){angular.isObject(template)&&(template=template.data),options.html&&(template=template.replace(htmlReplaceRegExp,'ng-bind-html="')),template=trim.apply(template),tipTemplate=template,tipLinker=$compile(template),$tooltip.init()}),$tooltip.init=function(){options.delay&&angular.isNumber(options.delay)&&(options.delay={show:options.delay,hide:options.delay}),"self"===options.container?tipContainer=element:angular.isElement(options.container)?tipContainer=options.container:options.container&&(tipContainer=findElement(options.container));var triggers=options.trigger.split(" ");angular.forEach(triggers,function(trigger){"click"===trigger?element.on("click",$tooltip.toggle):"manual"!==trigger&&(element.on("hover"===trigger?"mouseenter":"focus",$tooltip.enter),element.on("hover"===trigger?"mouseleave":"blur",$tooltip.leave),"button"===nodeName&&"hover"!==trigger&&element.on(isTouch?"touchstart":"mousedown",$tooltip.$onFocusElementMouseDown))}),options.target&&(options.target=angular.isElement(options.target)?options.target:findElement(options.target)),options.show&&scope.$$postDigest(function(){"focus"===options.trigger?element[0].focus():$tooltip.show()})},$tooltip.destroy=function(){for(var triggers=options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];"click"===trigger?element.off("click",$tooltip.toggle):"manual"!==trigger&&(element.off("hover"===trigger?"mouseenter":"focus",$tooltip.enter),element.off("hover"===trigger?"mouseleave":"blur",$tooltip.leave),"button"===nodeName&&"hover"!==trigger&&element.off(isTouch?"touchstart":"mousedown",$tooltip.$onFocusElementMouseDown))}tipElement&&(tipElement.remove(),tipElement=null),clearTimeout(timeout),scope.$destroy()},$tooltip.enter=function(){return clearTimeout(timeout),hoverState="in",options.delay&&options.delay.show?void(timeout=setTimeout(function(){"in"===hoverState&&$tooltip.show()},options.delay.show)):$tooltip.show()},$tooltip.show=function(){scope.$emit(options.prefixEvent+".show.before",$tooltip);var parent=options.container?tipContainer:null,after=options.container?null:element;tipElement&&tipElement.remove(),tipElement=$tooltip.$element=tipLinker(scope,function(){}),tipElement.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(options.placement),options.animation&&tipElement.addClass(options.animation),options.type&&tipElement.addClass(options.prefixClass+"-"+options.type),options.customClass&&tipElement.addClass(options.customClass),$animate.enter(tipElement,parent,after,function(){scope.$emit(options.prefixEvent+".show",$tooltip)}),$tooltip.$isShown=scope.$isShown=!0,scope.$$phase||scope.$root&&scope.$root.$$phase||scope.$digest(),$$rAF(function(){$tooltip.$applyPlacement(),tipElement.css({visibility:"visible"})}),options.keyboard&&("focus"!==options.trigger?($tooltip.focus(),tipElement.on("keyup",$tooltip.$onKeyUp)):element.on("keyup",$tooltip.$onFocusKeyUp))},$tooltip.leave=function(){return clearTimeout(timeout),hoverState="out",options.delay&&options.delay.hide?void(timeout=setTimeout(function(){"out"===hoverState&&$tooltip.hide()},options.delay.hide)):$tooltip.hide()},$tooltip.hide=function(blur){$tooltip.$isShown&&(scope.$emit(options.prefixEvent+".hide.before",$tooltip),$animate.leave(tipElement,function(){return scope.$emit(options.prefixEvent+".hide",$tooltip),blur&&"focus"===options.trigger?element[0].blur():void 0}),$tooltip.$isShown=scope.$isShown=!1,scope.$$phase||scope.$root&&scope.$root.$$phase||scope.$digest(),options.keyboard&&null!==tipElement&&tipElement.off("keyup",$tooltip.$onKeyUp))},$tooltip.toggle=function(){$tooltip.$isShown?$tooltip.leave():$tooltip.enter()},$tooltip.focus=function(){tipElement[0].focus()},$tooltip.$applyPlacement=function(){if(tipElement){var elementPosition=getPosition(),tipWidth=tipElement.prop("offsetWidth"),tipHeight=tipElement.prop("offsetHeight"),tipPosition=getCalculatedOffset(options.placement,elementPosition,tipWidth,tipHeight);tipPosition.top+="px",tipPosition.left+="px",tipElement.css(tipPosition)}},$tooltip.$onKeyUp=function(evt){27===evt.which&&$tooltip.$isShown&&($tooltip.hide(),evt.stopPropagation())},$tooltip.$onFocusKeyUp=function(evt){27===evt.which&&(element[0].blur(),evt.stopPropagation())},$tooltip.$onFocusElementMouseDown=function(evt){evt.preventDefault(),evt.stopPropagation(),$tooltip.$isShown?element[0].blur():element[0].focus()},$tooltip}function findElement(query,element){return angular.element((element||document).querySelectorAll(query))}function fetchTemplate(template){return $q.when($templateCache.get(template)||$http.get(template)).then(function(res){return angular.isObject(res)?($templateCache.put(template,res.data),res.data):res})}var trim=String.prototype.trim,isTouch="createTouch"in $window.document,htmlReplaceRegExp=/ng-bind="/gi;return TooltipFactory}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function($window,$location,$sce,$tooltip,$$rAF){return{restrict:"EAC",scope:!0,link:function(scope,element,attr){var options={scope:scope};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),angular.forEach(["title"],function(key){attr.$observe(key,function(newValue,oldValue){scope[key]=$sce.trustAsHtml(newValue),angular.isDefined(oldValue)&&$$rAF(function(){tooltip&&tooltip.$applyPlacement()})})}),attr.bsTooltip&&scope.$watch(attr.bsTooltip,function(newValue,oldValue){angular.isObject(newValue)?angular.extend(scope,newValue):scope.title=newValue,angular.isDefined(oldValue)&&$$rAF(function(){tooltip&&tooltip.$applyPlacement()})},!0),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue){tooltip&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(",?(tooltip),?")),newValue===!0?tooltip.show():tooltip.hide())});var tooltip=$tooltip(element,options);scope.$on("$destroy",function(){tooltip&&tooltip.destroy(),options=null,tooltip=null})}}}]),angular.module("mgcrea.ngStrap.typeahead",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"typeahead",prefixEvent:"$typeahead",placement:"bottom-left",template:"typeahead/typeahead.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,filter:"filter",limit:6};this.$get=["$window","$rootScope","$tooltip",function($window,$rootScope,$tooltip){function TypeaheadFactory(element,controller,config){var $typeahead={},options=angular.extend({},defaults,config);$typeahead=$tooltip(element,options);var parentScope=config.scope,scope=$typeahead.$scope;scope.$resetMatches=function(){scope.$matches=[],scope.$activeIndex=0},scope.$resetMatches(),scope.$activate=function(index){scope.$$postDigest(function(){$typeahead.activate(index)})},scope.$select=function(index){scope.$$postDigest(function(){$typeahead.select(index)})},scope.$isVisible=function(){return $typeahead.$isVisible()},$typeahead.update=function(matches){scope.$matches=matches,scope.$activeIndex>=matches.length&&(scope.$activeIndex=0)},$typeahead.activate=function(index){scope.$activeIndex=index},$typeahead.select=function(index){var value=scope.$matches[index].value;controller.$setViewValue(value),controller.$render(),scope.$resetMatches(),parentScope&&parentScope.$digest(),scope.$emit(options.prefixEvent+".select",value,index)},$typeahead.$isVisible=function(){return options.minLength&&controller?scope.$matches.length&&angular.isString(controller.$viewValue)&&controller.$viewValue.length>=options.minLength:!!scope.$matches.length},$typeahead.$getIndex=function(value){var l=scope.$matches.length,i=l;if(l){for(i=l;i--&&scope.$matches[i].value!==value;);if(!(0>i))return i}},$typeahead.$onMouseDown=function(evt){evt.preventDefault(),evt.stopPropagation()},$typeahead.$onKeyDown=function(evt){/(38|40|13)/.test(evt.keyCode)&&($typeahead.$isVisible()&&(evt.preventDefault(),evt.stopPropagation()),13===evt.keyCode&&scope.$matches.length?$typeahead.select(scope.$activeIndex):38===evt.keyCode&&scope.$activeIndex>0?scope.$activeIndex--:40===evt.keyCode&&scope.$activeIndex<scope.$matches.length-1?scope.$activeIndex++:angular.isUndefined(scope.$activeIndex)&&(scope.$activeIndex=0),scope.$digest())};var show=$typeahead.show;$typeahead.show=function(){show(),setTimeout(function(){$typeahead.$element.on("mousedown",$typeahead.$onMouseDown),options.keyboard&&element.on("keydown",$typeahead.$onKeyDown)})};var hide=$typeahead.hide;return $typeahead.hide=function(){$typeahead.$element.off("mousedown",$typeahead.$onMouseDown),options.keyboard&&element.off("keydown",$typeahead.$onKeyDown),hide()},$typeahead}angular.element($window.document.body);return TypeaheadFactory.defaults=defaults,TypeaheadFactory}]}).directive("bsTypeahead",["$window","$parse","$q","$typeahead","$parseOptions",function($window,$parse,$q,$typeahead,$parseOptions){var defaults=$typeahead.defaults;return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){var options={scope:scope};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","filter","limit","minLength","watchOptions","selectMode"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])});var filter=options.filter||defaults.filter,limit=options.limit||defaults.limit,ngOptions=attr.ngOptions;filter&&(ngOptions+=" | "+filter+":$viewValue"),limit&&(ngOptions+=" | limitTo:"+limit);var parsedOptions=$parseOptions(ngOptions),typeahead=$typeahead(element,controller,options);if(options.watchOptions){var watchedOptions=parsedOptions.$match[7].replace(/\|.+/,"").replace(/\(.*\)/g,"").trim();scope.$watch(watchedOptions,function(){parsedOptions.valuesFn(scope,controller).then(function(values){typeahead.update(values),controller.$render()})},!0)}scope.$watch(attr.ngModel,function(newValue){scope.$modelValue=newValue,parsedOptions.valuesFn(scope,controller).then(function(values){if(options.selectMode&&!values.length&&newValue.length>0)return void controller.$setViewValue(controller.$viewValue.substring(0,controller.$viewValue.length-1));values.length>limit&&(values=values.slice(0,limit));var isVisible=typeahead.$isVisible();isVisible&&typeahead.update(values),(1!==values.length||values[0].value!==newValue)&&(!isVisible&&typeahead.update(values),controller.$render())})}),controller.$render=function(){if(controller.$isEmpty(controller.$viewValue))return element.val("");var index=typeahead.$getIndex(controller.$modelValue),selected=angular.isDefined(index)?typeahead.$scope.$matches[index].label:controller.$viewValue;selected=angular.isObject(selected)?selected.label:selected,element.val(selected.replace(/<(?:.|\n)*?>/gm,"").trim())},scope.$on("$destroy",function(){typeahead&&typeahead.destroy(),options=null,typeahead=null})}}}])}(window,document),function(){"use strict";angular.module("mgcrea.ngStrap.alert").run(["$templateCache",function($templateCache){$templateCache.put("alert/alert.tpl.html",'<div class="alert" tabindex="-1" ng-class="[type ? \'alert-\' + type : null]"><button type="button" class="close" ng-if="dismissable" ng-click="$hide()">&times;</button> <strong ng-bind="title"></strong>&nbsp;<span ng-bind-html="content"></span></div>')}]),angular.module("mgcrea.ngStrap.aside").run(["$templateCache",function($templateCache){$templateCache.put("aside/aside.tpl.html",'<div class="aside" tabindex="-1" role="dialog"><div class="aside-dialog"><div class="aside-content"><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ng-bind="content"></div><div class="aside-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function($templateCache){$templateCache.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{{$iconLeft}}"></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{{$iconRight}}"></i></button></th></tr><tr ng-show="showLabels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>')}]),angular.module("mgcrea.ngStrap.dropdown").run(["$templateCache",function($templateCache){$templateCache.put("dropdown/dropdown.tpl.html",'<ul tabindex="-1" class="dropdown-menu" role="menu"><li role="presentation" ng-class="{divider: item.divider}" ng-repeat="item in content"><a role="menuitem" tabindex="-1" ng-href="{{item.href}}" ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind="item.text"></a> <a role="menuitem" tabindex="-1" href="javascript:void(0)" ng-if="!item.divider && item.click" ng-click="$eval(item.click);$hide()" ng-bind="item.text"></a></li></ul>')}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function($templateCache){$templateCache.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.popover").run(["$templateCache",function($templateCache){$templateCache.put("popover/popover.tpl.html",'<div class="popover"><div class="arrow"></div><h3 class="popover-title" ng-bind="title" ng-show="title"></h3><div class="popover-content" ng-bind="content"></div></div>')}]),angular.module("mgcrea.ngStrap.select").run(["$templateCache",function($templateCache){$templateCache.put("select/select.tpl.html",'<ul tabindex="-1" class="select dropdown-menu" ng-show="$isVisible()" role="select"><li ng-if="$showAllNoneButtons"><div class="btn-group" style="margin-bottom: 5px; margin-left: 5px"><button class="btn btn-default btn-xs" ng-click="$selectAll()">All</button> <button class="btn btn-default btn-xs" ng-click="$selectNone()">None</button></div></li><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default" role="menuitem" tabindex="-1" ng-click="$select($index, $event)"><span ng-bind="match.label"></span> <i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i></a></li></ul>')}]),angular.module("mgcrea.ngStrap.tab").run(["$templateCache",function($templateCache){$templateCache.put("tab/tab.tpl.html",'<ul class="nav" ng-class="$navClass" role="tablist"><li ng-repeat="$pane in $panes" ng-class="$index == $panes.$active ? $activeClass : \'\'"><a role="tab" data-toggle="tab" ng-click="$setActive($index)" data-index="{{ $index }}" ng-bind-html="$pane.title"></a></li></ul><div ng-transclude class="tab-content"></div>')}]),angular.module("mgcrea.ngStrap.timepicker").run(["$templateCache",function($templateCache){$templateCache.put("timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto"><table height="100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"></i></button></th></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td class="text-center"><button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled"><span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class="text-center"><button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled"><span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span></button></td><td ng-if="showAM">&nbsp;</td><td ng-if="showAM"><button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM</button> <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM</button></td></tr></tbody><tfoot><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"></i></button></th></tr></tfoot></table></div>')}]),angular.module("mgcrea.ngStrap.typeahead").run(["$templateCache",function($templateCache){$templateCache.put("typeahead/typeahead.tpl.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select"><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"></a></li></ul>')}]),angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function($templateCache){$templateCache.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}])}(window,document),function(){function baseIndexOf(array,value,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0;++index<length;)if(array[index]===value)return index;return-1}function cacheIndexOf(cache,value){var type=typeof value;if(cache=cache.cache,"boolean"==type||null==value)return cache[value]?0:-1;"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value;return cache=(cache=cache[type])&&cache[key],"object"==type?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if("boolean"==type||null==value)cache[value]=!0;else{"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});"object"==type?(typeCache[key]||(typeCache[key]=[])).push(value):typeCache[key]=!0}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){for(var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;++index<length;){var value=ac[index],other=bc[index];if(value!==other){if(value>other||"undefined"==typeof value)return 1;if(other>value||"undefined"==typeof other)return-1}}return a.index-b.index}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&"object"==typeof first&&mid&&"object"==typeof mid&&last&&"object"==typeof last)return!1;var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache.undefined=!1;var result=getObject();for(result.array=array,result.cache=cache,result.push=cachePush;++index<length;)result.push(array[index]);return result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function releaseArray(array){array.length=0,arrayPool.length<maxPoolSize&&arrayPool.push(array)}function releaseObject(object){var cache=object.cache;cache&&releaseObject(cache),object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null,objectPool.length<maxPoolSize&&objectPool.push(object)}function slice(array,start,end){start||(start=0),"undefined"==typeof end&&(end=array?array.length:0);for(var index=-1,length=end-start||0,result=Array(0>length?0:length);++index<length;)result[index]=array[start+index];return result}function runInContext(context){function lodash(value){return value&&"object"==typeof value&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll,this.__wrapped__=value}function baseBind(bindData){function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];return setBindData(bound,bindData),bound}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if("undefined"!=typeof result)return result}var isObj=isObject(value);if(!isObj)return value;var className=toString.call(value);if(!cloneableClasses[className])return value;var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:return result=ctor(value.source,reFlags.exec(value)),result.lastIndex=value.lastIndex,result}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];result=isArr?ctor(value.length):{}}else result=isArr?slice(value):assign({},value);return isArr&&(hasOwnProperty.call(value,"index")&&(result.index=value.index),hasOwnProperty.call(value,"input")&&(result.input=value.input)),isDeep?(stackA.push(value),stackB.push(result),(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)}),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result):result}function baseCreate(prototype){return isObject(prototype)?nativeCreate(prototype):{}}function baseCreateCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if("undefined"==typeof thisArg||!("prototype"in func))return func;var bindData=func.__bindData__;if("undefined"==typeof bindData&&(support.funcNames&&(bindData=!func.name),bindData=bindData||!support.funcDecomp,!bindData)){var source=fnToString.call(func);support.funcNames||(bindData=!reFuncName.test(source)),bindData||(bindData=reThis.test(source),setBindData(func,bindData))}if(bindData===!1||bindData!==!0&&1&bindData[1])return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if((partialRightArgs||isCurry)&&(args||(args=slice(arguments)),partialRightArgs&&push.apply(args,partialRightArgs),isCurry&&args.length<arity))return bitmask|=16,baseCreateWrapper([func,isCurryBound?bitmask:-4&bitmask,args,null,thisArg,arity]);if(args||(args=arguments),isBindKey&&(func=thisBinding[key]),this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5],isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isCurryBound=8&bitmask,key=func;return setBindData(bound,bindData),bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);cache?(indexOf=cacheIndexOf,values=cache):isLarge=!1}for(;++index<length;){var value=array[index];indexOf(values,value)<0&&result.push(value)}return isLarge&&releaseObject(values),result}function baseFlatten(array,isShallow,isStrict,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];if(value&&"object"==typeof value&&"number"==typeof value.length&&(isArray(value)||isArguments(value))){isShallow||(value=baseFlatten(value,isShallow,isStrict));var valIndex=-1,valLength=value.length,resIndex=result.length;for(result.length+=valLength;++valIndex<valLength;)result[resIndex++]=value[valIndex]}else isStrict||result.push(value)}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if("undefined"!=typeof result)return!!result}if(a===b)return 0!==a||1/a==1/b;var type=typeof a,otherType=typeof b;if(!(a!==a||a&&objectTypes[type]||b&&objectTypes[otherType]))return!1;if(null==a||null==b)return a===b;var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass&&(className=objectClass),otherClass==argsClass&&(otherClass=objectClass),className!=otherClass)return!1;switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped)return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB);if(className!=objectClass)return!1;var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&"constructor"in a&&"constructor"in b)return!1}var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==a)return stackB[length]==b;var size=0;if(result=!0,stackA.push(a),stackB.push(b),isArr){if(length=a.length,size=b.length,result=size==length,result||isWhere)for(;size--;){var index=length,value=b[size];if(isWhere)for(;index--&&!(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)););else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB)))break}}else forIn(b,function(value,key,b){return hasOwnProperty.call(b,key)?(size++,result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)):void 0
}),result&&!isWhere&&forIn(a,function(value,key,a){return hasOwnProperty.call(a,key)?result=--size>-1:void 0});return stackA.pop(),stackB.pop(),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){for(var stackLength=stackA.length;stackLength--;)if(found=stackA[stackLength]==source){value=stackB[stackLength];break}if(!found){var isShallow;callback&&(result=callback(value,source),(isShallow="undefined"!=typeof result)&&(value=result)),isShallow||(value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}),stackA.push(source),stackB.push(value),isShallow||baseMerge(value,source,callback,stackA,stackB)}}else callback&&(result=callback(value,source),"undefined"==typeof result&&(result=source)),"undefined"!=typeof result&&(value=result);object[key]=value})}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[],isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf,seen=cache}for(;++index<length;){var value=array[index],computed=callback?callback(value,index,array):value;(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0)&&((callback||isLarge)&&seen.push(computed),result.push(value))}return isLarge?(releaseArray(seen.array),releaseObject(seen)):callback&&releaseArray(seen),result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}else forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)});return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isPartial=16&bitmask,isPartialRight=32&bitmask;if(!isBindKey&&!isFunction(func))throw new TypeError;isPartial&&!partialArgs.length&&(bitmask&=-17,isPartial=partialArgs=!1),isPartialRight&&!partialRightArgs.length&&(bitmask&=-33,isPartialRight=partialRightArgs=!1);var bindData=func&&func.__bindData__;if(bindData&&bindData!==!0)return bindData=slice(bindData),bindData[2]&&(bindData[2]=slice(bindData[2])),bindData[3]&&(bindData[3]=slice(bindData[3])),!isBind||1&bindData[1]||(bindData[4]=thisArg),!isBind&&1&bindData[1]&&(bitmask|=8),!isCurry||4&bindData[1]||(bindData[5]=arity),isPartial&&push.apply(bindData[2]||(bindData[2]=[]),partialArgs),isPartialRight&&unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs),bindData[1]|=bitmask,createWrapper.apply(null,bindData);var creater=1==bitmask||17===bitmask?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return"function"==typeof value&&reNative.test(value)}function shimIsPlainObject(value){var ctor,result;return value&&toString.call(value)==objectClass&&(ctor=value.constructor,!isFunction(ctor)||ctor instanceof ctor)?(forIn(value,function(value,key){result=key}),"undefined"==typeof result||hasOwnProperty.call(value,result)):!1}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==argsClass||!1}function clone(value,isDeep,callback,thisArg){return"boolean"!=typeof isDeep&&null!=isDeep&&(thisArg=callback,callback=isDeep,isDeep=!1),baseClone(value,isDeep,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function cloneDeep(value,callback,thisArg){return baseClone(value,!0,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result}function findKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function findLastKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwnRight(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value)});var length=pairs.length;for(callback=baseCreateCallback(callback,thisArg,3);length--&&callback(pairs[length--],pairs[length],object)!==!1;);return object}function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;for(callback=baseCreateCallback(callback,thisArg,3);length--;){var key=props[length];if(callback(object[key],key,object)===!1)break}return object}function functions(object){var result=[];return forIn(object,function(value,key){isFunction(value)&&result.push(key)}),result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):!1}function invert(object){for(var index=-1,props=keys(object),length=props.length,result={};++index<length;){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===!0||value===!1||value&&"object"==typeof value&&toString.call(value)==boolClass||!1}function isDate(value){return value&&"object"==typeof value&&toString.call(value)==dateClass||!1}function isElement(value){return value&&1===value.nodeType||!1}function isEmpty(value){var result=!0;if(!value)return result;var className=toString.call(value),length=value.length;return className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&"number"==typeof length&&isFunction(value.splice)?!length:(forOwn(value,function(){return result=!1}),result)}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,"function"==typeof callback&&baseCreateCallback(callback,thisArg,2))}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return"function"==typeof value}function isObject(value){return!(!value||!objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||value&&"object"==typeof value&&toString.call(value)==numberClass||!1}function isRegExp(value){return value&&"object"==typeof value&&toString.call(value)==regexpClass||!1}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&toString.call(value)==stringClass||!1}function isUndefined(value){return"undefined"==typeof value}function mapValues(object,callback,thisArg){var result={};return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){result[key]=callback(value,key,object)}),result}function merge(object){var args=arguments,length=2;if(!isObject(object))return object;if("number"!=typeof args[2]&&(length=args.length),length>3&&"function"==typeof args[length-2])var callback=baseCreateCallback(args[--length-1],args[length--],2);else length>2&&"function"==typeof args[length-1]&&(callback=args[--length]);for(var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();++index<length;)baseMerge(object,sources[index],callback,stackA,stackB);return releaseArray(stackA),releaseArray(stackB),object}function omit(object,callback,thisArg){var result={};if("function"!=typeof callback){var props=[];forIn(object,function(value,key){props.push(key)}),props=baseDifference(props,baseFlatten(arguments,!0,!1,1));for(var index=-1,length=props.length;++index<length;){var key=props[index];result[key]=object[key]}}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)||(result[key]=value)});return result}function pairs(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if("function"!=typeof callback)for(var index=-1,props=baseFlatten(arguments,!0,!1,1),length=isObject(object)?props.length:0;++index<length;){var key=props[index];key in object&&(result[key]=object[key])}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)&&(result[key]=value)});return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(null==accumulator)if(isArr)accumulator=[];else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto)}return callback&&(callback=lodash.createCallback(callback,thisArg,4),(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)})),accumulator}function values(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;)result[index]=object[props[index]];return result}function at(collection){for(var args=arguments,index=-1,props=baseFlatten(args,!0,!1,1),length=args[2]&&args[2][args[1]]===collection?1:props.length,result=Array(length);++index<length;)result[index]=collection[props[index]];return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=!1;return fromIndex=(0>fromIndex?nativeMax(0,length+fromIndex):fromIndex)||0,isArray(collection)?result=indexOf(collection,target,fromIndex)>-1:"number"==typeof length?result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1:forOwn(collection,function(value){return++index>=fromIndex?!(result=value===target):void 0}),result}function every(collection,callback,thisArg){var result=!0;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&(result=!!callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)});return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];callback(value,index,collection)&&result.push(value)}else forOwn(collection,function(value,index,collection){callback(value,index,collection)&&result.push(value)});return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"!=typeof length){var result;return forOwn(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}for(;++index<length;){var value=collection[index];if(callback(value,index,collection))return value}}function findLast(collection,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forEachRight(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;++index<length&&callback(collection[index],index,collection)!==!1;);else forOwn(collection,callback);return collection}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;length--&&callback(collection[length],length,collection)!==!1;);else{var props=keys(collection);length=props.length,forOwn(collection,function(value,key,collection){return key=props?props[--length]:--length,callback(collection[key],key,collection)})}return collection}function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc="function"==typeof methodName,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)}),result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=lodash.createCallback(callback,thisArg,3),"number"==typeof length)for(var result=Array(length);++index<length;)result[index]=callback(collection[index],index,collection);else result=[],forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)});return result}function max(collection,callback,thisArg){var computed=-1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];value>result&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);current>computed&&(computed=current,result=value)});return result}function min(collection,callback,thisArg){var computed=1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];result>value&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);computed>current&&(computed=current,result=value)});return result}function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if("number"==typeof length)for(noaccum&&(accumulator=collection[++index]);++index<length;)accumulator=callback(accumulator,collection[index],index,collection);else forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)});return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;return callback=lodash.createCallback(callback,thisArg,4),forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)}),accumulator}function reject(collection,callback,thisArg){return callback=lodash.createCallback(callback,thisArg,3),filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&"number"!=typeof collection.length&&(collection=values(collection)),null==n||guard)return collection?collection[baseRandom(0,collection.length-1)]:undefined;var result=shuffle(collection);return result.length=nativeMin(nativeMax(0,n),result.length),result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand],result[rand]=value}),result}function size(collection){var length=collection?collection.length:0;return"number"==typeof length?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&!(result=callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))});return!!result}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array("number"==typeof length?length:0);for(isArr||(callback=lodash.createCallback(callback,thisArg,3)),forEach(collection,function(value,key,collection){var object=result[++index]=getObject();isArr?object.criteria=map(callback,function(key){return value[key]}):(object.criteria=getArray())[0]=callback(value,key,collection),object.index=index,object.value=value}),length=result.length,result.sort(compareAscending);length--;){var object=result[length];result[length]=object.value,isArr||releaseArray(object.criteria),releaseObject(object)}return result}function toArray(collection){return collection&&"number"==typeof collection.length?slice(collection):values(collection)}function compact(array){for(var index=-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];value&&result.push(value)}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,!0,!0,1))}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length;)if(callback(array[index],index,array))return index;return-1}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);length--;)if(callback(array[length],length,array))return length;return-1}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=-1;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[0]:undefined;return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow,callback,thisArg){return"boolean"!=typeof isShallow&&null!=isShallow&&(thisArg=callback,callback="function"!=typeof isShallow&&thisArg&&thisArg[isShallow]===array?null:isShallow,isShallow=!1),null!=callback&&(array=map(array,callback,thisArg)),baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if("number"==typeof fromIndex){var length=array?array.length:0;fromIndex=0>fromIndex?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:callback||n;return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){for(var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();++argsIndex<argsLength;){var value=arguments[argsIndex];(isArray(value)||isArguments(value))&&(args.push(value),caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen)))}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:for(;++index<length;){var cache=caches[0];if(value=array[index],(cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){for(argsIndex=argsLength,(cache||seen).push(value);--argsIndex;)if(cache=caches[argsIndex],(cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0)continue outer;result.push(value)}}for(;argsLength--;)cache=caches[argsLength],cache&&releaseObject(cache);return releaseArray(caches),releaseArray(seen),result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[length-1]:undefined;return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;for("number"==typeof fromIndex&&(index=(0>fromIndex?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1);index--;)if(array[index]===value)return index;return-1}function pull(array){for(var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;++argsIndex<argsLength;)for(var index=-1,value=args[argsIndex];++index<length;)array[index]===value&&(splice.call(array,index--,1),length--);return array}function range(start,end,step){start=+start||0,step="number"==typeof step?step:+step||1,null==end&&(end=start,start=0);for(var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);++index<length;)result[index]=start,start+=step;return result}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];for(callback=lodash.createCallback(callback,thisArg,3);++index<length;){var value=array[index];callback(value,index,array)&&(result.push(value),splice.call(array,index--,1),length--)}return result}function rest(array,callback,thisArg){if("number"!=typeof callback&&null!=callback){var n=0,index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:nativeMax(0,callback);return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;for(callback=callback?lodash.createCallback(callback,thisArg,1):identity,value=callback(value);high>low;){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,!0,!0))}function uniq(array,isSorted,callback,thisArg){return"boolean"!=typeof isSorted&&null!=isSorted&&(thisArg=callback,callback="function"!=typeof isSorted&&thisArg&&thisArg[isSorted]===array?null:isSorted,isSorted=!1),null!=callback&&(callback=lodash.createCallback(callback,thisArg,3)),baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function xor(){for(var index=-1,length=arguments.length;++index<length;){var array=arguments[index];if(isArray(array)||isArguments(array))var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array}return result||[]}function zip(){for(var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,"length")):0,result=Array(0>length?0:length);++index<length;)result[index]=pluck(array,index);return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};for(values||!length||isArray(keys[0])||(values=[]);++index<length;){var key=keys[index];values?result[key]=values[index]:key&&(result[key[0]]=key[1])}return result}function after(n,func){if(!isFunction(func))throw new TypeError;return function(){return--n<1?func.apply(this,arguments):void 0}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){for(var funcs=arguments.length>1?baseFlatten(arguments,!0,!1,1):functions(object),index=-1,length=funcs.length;++index<length;){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object)}function compose(){for(var funcs=arguments,length=funcs.length;length--;)if(!isFunction(funcs[length]))throw new TypeError;return function(){for(var args=arguments,length=funcs.length;length--;)args=[funcs[length].apply(this,args)];return args[0]}}function curry(func,arity){return arity="number"==typeof arity?arity:+arity||func.length,createWrapper(func,4,null,null,null,arity)}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if(!isFunction(func))throw new TypeError;if(wait=nativeMax(0,wait)||0,options===!0){var leading=!0;trailing=!1}else isObject(options)&&(leading=options.leading,maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0),trailing="trailing"in options?options.trailing:trailing);var delayed=function(){var remaining=wait-(now()-stamp);if(0>=remaining){maxTimeoutId&&clearTimeout(maxTimeoutId);var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))}else timeoutId=setTimeout(delayed,remaining)},maxDelayed=function(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId=timeoutId=trailingCall=undefined,(trailing||maxWait!==wait)&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))};return function(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),maxWait===!1)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=0>=remaining;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=null),result}}function defer(func){if(!isFunction(func))throw new TypeError;var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func))throw new TypeError;var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){if(!isFunction(func))throw new TypeError;var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)};return memoized.cache={},memoized}function once(func){var ran,result;if(!isFunction(func))throw new TypeError;return function(){return ran?result:(ran=!0,result=func.apply(this,arguments),func=null,result)}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1))}function throttle(func,wait,options){var leading=!0,trailing=!0;if(!isFunction(func))throw new TypeError;return options===!1?leading=!1:isObject(options)&&(leading="leading"in options?options.leading:leading,trailing="trailing"in options?options.trailing:trailing),debounceOptions.leading=leading,debounceOptions.maxWait=wait,debounceOptions.trailing=trailing,debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function constant(value){return function(){return value}}function createCallback(func,thisArg,argCount){var type=typeof func;if(null==func||"function"==type)return baseCreateCallback(func,thisArg,argCount);if("object"!=type)return property(func);var props=keys(func),key=props[0],a=func[key];return 1!=props.length||a!==a||isObject(a)?function(object){for(var length=props.length,result=!1;length--&&(result=baseIsEqual(object[props[length]],func[props[length]],null,!0)););return result}:function(object){var b=object[key];return a===b&&(0!==a||1/a==1/b)}}function escape(string){return null==string?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object,source,options){var chain=!0,methodNames=source&&functions(source);source&&(options||methodNames.length)||(null==options&&(options=source),ctor=lodashWrapper,source=object,object=lodash,methodNames=functions(source)),options===!1?chain=!1:isObject(options)&&"chain"in options&&(chain=options.chain);var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];isFunc&&(ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result))return this;result=new ctor(result),result.__chain__=chainAll}return result})})}function noConflict(){return context._=oldDash,this}function noop(){}function property(key){return function(object){return object[key]}}function random(min,max,floating){var noMin=null==min,noMax=null==max;if(null==floating&&("boolean"==typeof min&&noMax?(floating=min,min=1):noMax||"boolean"!=typeof max||(floating=max,noMax=!0)),noMin&&noMax&&(max=1),min=+min||0,noMax?(max=min,min=0):max=+max||0,floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||""),options=defaults({},options,settings);var isEvaluating,imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable,hasVariable=variable;hasVariable||(variable="obj",source="with ("+variable+") {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//# sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){throw e.source=source,e}return data?result(data):(result.source=source,result)}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);for(callback=baseCreateCallback(callback,thisArg,1);++index<n;)result[index]=callback(index);return result}function unescape(string){return null==string?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(null==prefix?"":prefix)+id
}function chain(value){return value=new lodashWrapper(value),value.__chain__=!0,value}function tap(value,interceptor){return interceptor(value),value}function wrapperChain(){return this.__chain__=!0,this}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayRef=[],objectProto=Object.prototype,oldDash=context._,toString=objectProto.toString,reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift,defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}(),nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,ctorByClass={};ctorByClass[arrayClass]=Array,ctorByClass[boolClass]=Boolean,ctorByClass[dateClass]=Date,ctorByClass[funcClass]=Function,ctorByClass[objectClass]=Object,ctorByClass[numberClass]=Number,ctorByClass[regexpClass]=RegExp,ctorByClass[stringClass]=String,lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext),support.funcNames="string"==typeof Function.name,lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}},nativeCreate||(baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}());var setBindData=defineProperty?function(func,value){descriptor.value=value,defineProperty(func,"__bindData__",descriptor)}:noop,isArray=nativeIsArray||function(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==arrayClass||!1},shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable)hasOwnProperty.call(iterable,index)&&result.push(index);return result},keys=nativeKeys?function(object){return isObject(object)?nativeKeys(object):[]}:shimKeys,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},htmlUnescapes=invert(htmlEscapes),reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g"),assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;if(argsLength>3&&"function"==typeof args[argsLength-2])var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2);else argsLength>2&&"function"==typeof args[argsLength-1]&&(callback=args[--argsLength]);for(;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],result[index]=callback?callback(result[index],iterable[index]):iterable[index];return result},defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;for(var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],"undefined"==typeof result[index]&&(result[index]=iterable[index]);return result},forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable)if(callback(iterable[index],index,collection)===!1)return result;return result},forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)if(index=ownProps[ownIndex],callback(iterable[index],index,collection)===!1)return result;return result},isPlainObject=getPrototypeOf?function(value){if(!value||toString.call(value)!=objectClass)return!1;var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)}:shimIsPlainObject,countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1}),groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)}),indexBy=createAggregator(function(result,value,key){result[key]=value}),pluck=map,where=filter,now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()},parseInt=8==nativeParseInt(whitespace+"08")?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};return lodash.after=after,lodash.assign=assign,lodash.at=at,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.chain=chain,lodash.compact=compact,lodash.compose=compose,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.createCallback=createCallback,lodash.curry=curry,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.filter=filter,lodash.flatten=flatten,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.functions=functions,lodash.groupBy=groupBy,lodash.indexBy=indexBy,lodash.initial=initial,lodash.intersection=intersection,lodash.invert=invert,lodash.invoke=invoke,lodash.keys=keys,lodash.map=map,lodash.mapValues=mapValues,lodash.max=max,lodash.memoize=memoize,lodash.merge=merge,lodash.min=min,lodash.omit=omit,lodash.once=once,lodash.pairs=pairs,lodash.partial=partial,lodash.partialRight=partialRight,lodash.pick=pick,lodash.pluck=pluck,lodash.property=property,lodash.pull=pull,lodash.range=range,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.shuffle=shuffle,lodash.sortBy=sortBy,lodash.tap=tap,lodash.throttle=throttle,lodash.times=times,lodash.toArray=toArray,lodash.transform=transform,lodash.union=union,lodash.uniq=uniq,lodash.values=values,lodash.where=where,lodash.without=without,lodash.wrap=wrap,lodash.xor=xor,lodash.zip=zip,lodash.zipObject=zipObject,lodash.collect=map,lodash.drop=rest,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.extend=assign,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,lodash.unzip=zip,mixin(lodash),lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.contains=contains,lodash.escape=escape,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.has=has,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isNaN=isNaN,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isUndefined=isUndefined,lodash.lastIndexOf=lastIndexOf,lodash.mixin=mixin,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.result=result,lodash.runInContext=runInContext,lodash.size=size,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.template=template,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.all=every,lodash.any=some,lodash.detect=find,lodash.findWhere=find,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.include=contains,lodash.inject=reduce,mixin(function(){var source={};return forOwn(lodash,function(func,methodName){lodash.prototype[methodName]||(source[methodName]=func)}),source}(),!1),lodash.first=first,lodash.last=last,lodash.sample=sample,lodash.take=first,lodash.head=first,forOwn(lodash,function(func,methodName){var callbackable="sample"!==methodName;lodash.prototype[methodName]||(lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return chainAll||null!=n&&(!guard||callbackable&&"function"==typeof n)?new lodashWrapper(result,chainAll):result})}),lodash.VERSION="2.4.1",lodash.prototype.chain=wrapperChain,lodash.prototype.toString=wrapperToString,lodash.prototype.value=wrapperValueOf,lodash.prototype.valueOf=wrapperValueOf,forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result}}),forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return func.apply(this.__wrapped__,arguments),this}}),forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__)}}),lodash}var undefined,arrayPool=[],objectPool=[],idCounter=0,keyPrefix=+new Date+"",largeArraySize=75,maxPoolSize=40,whitespace=" 	\f\n\r\u2028\u2029",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reFuncName=/^\s*function[ \n\r\t]+\w/,reInterpolate=/<%=([\s\S]+?)%>/g,reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)"),reNoMatch=/($^)/,reThis=/\bthis\b/,reUnescapedString=/['\n\r\t\u2028\u2029\\]/g,contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],templateCounter=0,argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]",cloneableClasses={};cloneableClasses[funcClass]=!1,cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=!0;var debounceOptions={leading:!1,maxWait:0,trailing:!1},descriptor={configurable:!1,enumerable:!1,value:null,writable:!1},objectTypes={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,freeGlobal=objectTypes[typeof global]&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);var _=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeExports&&freeModule?moduleExports?(freeModule.exports=_)._=_:freeExports._=_:root._=_}.call(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXIuanMiLCJhbmd1bGFyLWFuaW1hdGUuanMiLCJhbmd1bGFyLXN0cmFwLmpzIiwiYW5ndWxhci1zdHJhcC50cGwuanMiLCJsb2Rhc2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBS0EsU0FBQSxPQUFBLFNBQUEsV0FBQSxZQWdDQSxTQUFBLFFBQUEsT0FBQSxrQkFFQSxNQURBLGtCQUFBLGtCQUFBLE1BQ0EsV0FDQSxHQWNBLFNBQUEsRUFkQSxLQUFBLFVBQUEsR0FDQSxPQUFBLEtBQUEsT0FBQSxPQUFBLElBQUEsSUFBQSxLQUFBLEtBQ0EsU0FBQSxVQUFBLEdBQ0EsYUFBQSxVQUNBLFVBQUEsU0FBQSxLQUNBLE1BQUEsa0JBQUEsS0FDQSxJQUFBLFdBQUEsUUFBQSxjQUFBLElBQ0EsbUJBQUEsS0FDQSxZQUNBLGdCQUFBLEtBQ0EsS0FBQSxVQUFBLEtBRUEsSUF1QkEsS0FuQkEsUUFBQSxPQUFBLFNBQUEsUUFBQSxXQUFBLFNBQUEsT0FDQSxHQUFBLEtBQUEsT0FBQSxNQUFBLE1BQUEsRUFBQSxHQUVBLE9BQUEsT0FBQSxFQUFBLGFBQUEsUUFDQSxJQUFBLGFBQUEsTUFBQSxHQUNBLGtCQUFBLEtBQ0EsSUFBQSxXQUFBLFFBQUEsZUFBQSxJQUNBLG1CQUFBLEtBQ0EsWUFDQSxnQkFBQSxLQUNBLE9BQUEsS0FFQSxLQUVBLFFBR0EsUUFBQSxRQUFBLDZDQUNBLE9BQUEsT0FBQSxJQUFBLElBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxVQUFBLE9BQUEsSUFDQSxRQUFBLFNBQUEsR0FBQSxFQUFBLElBQUEsS0FBQSxLQUFBLEVBQUEsR0FBQSxJQUNBLG1CQUFBLFVBQUEsVUFBQSxJQUVBLE9BQUEsSUFBQSxrQkFBQSxVQStMQSxRQUFBLGFBQUEsS0FDQSxHQUFBLE1BQUEsS0FBQSxTQUFBLEtBQ0EsT0FBQSxDQUdBLElBQUEsUUFBQSxJQUFBLE1BRUEsT0FBQSxLQUFBLElBQUEsVUFBQSxRQUNBLEVBR0EsU0FBQSxNQUFBLFFBQUEsTUFBQSxJQUFBLFFBQ0EsZ0JBQUEsU0FBQSxPQUFBLEdBQUEsT0FBQSxJQUFBLEtBaUNBLFFBQUEsU0FBQSxJQUFBLFNBQUEsU0FDQSxHQUFBLEtBQUEsTUFDQSxJQUFBLElBQ0EsR0FBQSxXQUFBLEtBQ0EsSUFBQSxNQUFBLEtBR0EsYUFBQSxLQUFBLFVBQUEsS0FBQSxRQUFBLEtBQUEsSUFBQSxpQkFBQSxJQUFBLGVBQUEsTUFDQSxTQUFBLEtBQUEsUUFBQSxJQUFBLEtBQUEsSUFBQSxTQUdBLElBQUEsUUFBQSxNQUFBLFlBQUEsS0FBQSxDQUNBLEdBQUEsYUFBQSxnQkFBQSxJQUNBLEtBQUEsSUFBQSxFQUFBLE9BQUEsSUFBQSxPQUFBLE9BQUEsSUFBQSxPQUNBLGFBQUEsTUFBQSxPQUNBLFNBQUEsS0FBQSxRQUFBLElBQUEsS0FBQSxJQUFBLFNBR0EsSUFBQSxJQUFBLFNBQUEsSUFBQSxVQUFBLFFBQ0EsSUFBQSxRQUFBLFNBQUEsUUFBQSxTQUVBLEtBQUEsTUFBQSxLQUNBLElBQUEsZUFBQSxNQUNBLFNBQUEsS0FBQSxRQUFBLElBQUEsS0FBQSxJQUFBLElBS0EsT0FBQSxLQUdBLFFBQUEsWUFBQSxLQUNBLEdBQUEsUUFDQSxLQUFBLEdBQUEsT0FBQSxLQUNBLElBQUEsZUFBQSxNQUNBLEtBQUEsS0FBQSxJQUdBLE9BQUEsTUFBQSxPQUdBLFFBQUEsZUFBQSxJQUFBLFNBQUEsU0FFQSxJQUFBLEdBREEsTUFBQSxXQUFBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLElBQ0EsU0FBQSxLQUFBLFFBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxHQUVBLE9BQUEsTUFTQSxRQUFBLGVBQUEsWUFDQSxNQUFBLFVBQUEsTUFBQSxLQUFBLFdBQUEsSUFBQSxRQWFBLFFBQUEsV0FDQSxRQUFBLElBU0EsUUFBQSxZQUFBLElBQUEsR0FDQSxFQUNBLElBQUEsVUFBQSxRQUdBLEtBQUEsVUFrQkEsUUFBQSxRQUFBLEtBR0EsSUFBQSxHQUZBLEdBQUEsSUFBQSxVQUVBLEVBQUEsRUFBQSxHQUFBLFVBQUEsT0FBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsS0FBQSxVQUFBLEVBQ0EsSUFBQSxJQUVBLElBQUEsR0FEQSxNQUFBLE9BQUEsS0FBQSxLQUNBLEVBQUEsRUFBQSxHQUFBLEtBQUEsT0FBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsS0FBQSxLQUFBLEVBQ0EsS0FBQSxLQUFBLElBQUEsTUFNQSxNQURBLFlBQUEsSUFBQSxHQUNBLElBR0EsUUFBQSxLQUFBLEtBQ0EsTUFBQSxVQUFBLElBQUEsSUFJQSxRQUFBLFNBQUEsT0FBQSxPQUNBLE1BQUEsUUFBQSxJQUFBLE9BQUEsY0FBQSxVQUFBLFVBQUEsT0FtQkEsUUFBQSxTQW9CQSxRQUFBLFVBQUEsR0FBQSxNQUFBLEdBSUEsUUFBQSxTQUFBLE9BQUEsTUFBQSxZQUFBLE1BQUEsUUFjQSxRQUFBLGFBQUEsT0FBQSxNQUFBLG1CQUFBLE9BZUEsUUFBQSxXQUFBLE9BQUEsTUFBQSxtQkFBQSxPQWdCQSxRQUFBLFVBQUEsT0FFQSxNQUFBLFFBQUEsT0FBQSxnQkFBQSxPQWdCQSxRQUFBLFVBQUEsT0FBQSxNQUFBLGdCQUFBLE9BZUEsUUFBQSxVQUFBLE9BQUEsTUFBQSxnQkFBQSxPQWVBLFFBQUEsUUFBQSxPQUNBLE1BQUEsa0JBQUEsU0FBQSxLQUFBLE9BOEJBLFFBQUEsWUFBQSxPQUFBLE1BQUEsa0JBQUEsT0FVQSxRQUFBLFVBQUEsT0FDQSxNQUFBLG9CQUFBLFNBQUEsS0FBQSxPQVdBLFFBQUEsVUFBQSxLQUNBLE1BQUEsTUFBQSxJQUFBLFNBQUEsSUFJQSxRQUFBLFNBQUEsS0FDQSxNQUFBLE1BQUEsSUFBQSxZQUFBLElBQUEsT0FJQSxRQUFBLFFBQUEsS0FDQSxNQUFBLGtCQUFBLFNBQUEsS0FBQSxLQUlBLFFBQUEsUUFBQSxLQUNBLE1BQUEsa0JBQUEsU0FBQSxLQUFBLEtBSUEsUUFBQSxXQUFBLE9BQ0EsTUFBQSxpQkFBQSxPQUlBLFFBQUEsZUFBQSxLQUNBLE1BQUEsTUFBQSxXQUFBLElBQUEsTUFxQkEsUUFBQSxXQUFBLE1BQ0EsU0FBQSxRQUNBLEtBQUEsVUFDQSxLQUFBLE1BQUEsS0FBQSxNQUFBLEtBQUEsT0FPQSxRQUFBLFNBQUEsS0FDQSxHQUFBLEdBQUEsT0FBQSxNQUFBLElBQUEsTUFBQSxJQUNBLEtBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxPQUFBLElBQ0EsSUFBQSxNQUFBLEtBQUEsQ0FDQSxPQUFBLEtBSUEsUUFBQSxXQUFBLFNBQ0EsTUFBQSxXQUFBLFFBQUEsVUFBQSxRQUFBLEdBQUEsVUFJQSxRQUFBLEtBQUEsSUFBQSxTQUFBLFNBQ0EsR0FBQSxXQUlBLE9BSEEsU0FBQSxJQUFBLFNBQUEsTUFBQSxNQUFBLE1BQ0EsUUFBQSxLQUFBLFNBQUEsS0FBQSxRQUFBLE1BQUEsTUFBQSxTQUVBLFFBbUNBLFFBQUEsYUFBQSxNQUFBLE9BQ0EsR0FBQSxPQUFBLE1BQUEsUUFBQSxNQUdBLE9BRkEsUUFBQSxHQUNBLE1BQUEsT0FBQSxNQUFBLEdBQ0EsTUF5RUEsUUFBQSxNQUFBLE9BQUEsWUFBQSxZQUFBLFdBQ0EsR0FBQSxTQUFBLFNBQUEsUUFBQSxRQUNBLEtBQUEsVUFBQSxPQUNBLDJFQUdBLElBQUEsWUFlQSxDQUNBLEdBQUEsU0FBQSxZQUFBLEtBQUEsVUFBQSxNQUNBLG9EQUtBLElBSEEsWUFBQSxnQkFDQSxVQUFBLGNBRUEsU0FBQSxRQUFBLENBQ0EsR0FBQSxPQUFBLFlBQUEsUUFBQSxPQUNBLElBQUEsS0FBQSxNQUFBLE1BQUEsV0FBQSxNQUVBLGFBQUEsS0FBQSxRQUNBLFVBQUEsS0FBQSxhQUdBLEdBQUEsT0FDQSxJQUFBLFFBQUEsUUFBQSxDQUNBLFlBQUEsT0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxPQUFBLE9BQUEsSUFDQSxPQUFBLEtBQUEsT0FBQSxHQUFBLEtBQUEsWUFBQSxXQUNBLFNBQUEsT0FBQSxNQUNBLFlBQUEsS0FBQSxPQUFBLElBQ0EsVUFBQSxLQUFBLFNBRUEsWUFBQSxLQUFBLFlBRUEsQ0FDQSxHQUFBLEdBQUEsWUFBQSxTQUNBLFNBQUEsYUFDQSxZQUFBLE9BQUEsRUFFQSxRQUFBLFlBQUEsU0FBQSxNQUFBLFdBQ0EsYUFBQSxNQUdBLEtBQUEsR0FBQSxPQUFBLFFBQ0EsT0FBQSxlQUFBLE9BQ0EsT0FBQSxLQUFBLE9BQUEsS0FBQSxLQUFBLFlBQUEsV0FDQSxTQUFBLE9BQUEsUUFDQSxZQUFBLEtBQUEsT0FBQSxNQUNBLFVBQUEsS0FBQSxTQUVBLFlBQUEsS0FBQSxPQUdBLFlBQUEsWUFBQSxRQTFEQSxJQURBLFlBQUEsT0FDQSxPQUNBLEdBQUEsUUFBQSxRQUNBLFlBQUEsS0FBQSxVQUFBLFlBQUEsZUFDQSxJQUFBLE9BQUEsUUFDQSxZQUFBLEdBQUEsTUFBQSxPQUFBLGVBQ0EsSUFBQSxTQUFBLFFBQ0EsWUFBQSxHQUFBLFFBQUEsT0FBQSxPQUFBLE9BQUEsV0FBQSxNQUFBLFdBQUEsSUFDQSxZQUFBLFVBQUEsT0FBQSxjQUNBLElBQUEsU0FBQSxRQUFBLENBQ0EsR0FBQSxhQUFBLE9BQUEsT0FBQSxPQUFBLGVBQUEsUUFDQSxhQUFBLEtBQUEsT0FBQSxZQUFBLFlBQUEsV0FvREEsTUFBQSxhQVFBLFFBQUEsYUFBQSxJQUFBLEtBQ0EsR0FBQSxRQUFBLEtBQUEsQ0FDQSxJQUFBLE9BRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsT0FBQSxHQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsSUFBQSxPQUVBLElBQUEsU0FBQSxLQUFBLENBQ0EsSUFBQSxPQUVBLEtBQUEsR0FBQSxPQUFBLE1BQ0EsTUFBQSxJQUFBLE9BQUEsSUFBQSxNQUFBLElBQUEsT0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLE1BS0EsTUFBQSxNQUFBLElBaUNBLFFBQUEsUUFBQSxHQUFBLElBQ0EsR0FBQSxLQUFBLEdBQUEsT0FBQSxDQUNBLElBQUEsT0FBQSxJQUFBLE9BQUEsR0FBQSxPQUFBLENBQ0EsSUFBQSxLQUFBLElBQUEsS0FBQSxHQUFBLE9BQUEsQ0FDQSxJQUFBLFFBQUEsSUFBQSxPQUFBLFNBQUEsSUFBQSxTQUFBLEdBQ0EsSUFBQSxJQUFBLElBQ0EsVUFBQSxHQUFBLENBQ0EsSUFBQSxRQUFBLElBUUEsQ0FBQSxHQUFBLE9BQUEsSUFDQSxNQUFBLFFBQUEsSUFDQSxPQUFBLEdBQUEsVUFBQSxHQUFBLFlBREEsQ0FFQSxJQUFBLFNBQUEsS0FBQSxTQUFBLElBQ0EsTUFBQSxJQUFBLFlBQUEsR0FBQSxVQUVBLElBQUEsUUFBQSxLQUFBLFFBQUEsS0FBQSxTQUFBLEtBQUEsU0FBQSxLQUFBLFFBQUEsSUFBQSxPQUFBLENBQ0EsVUFDQSxLQUFBLE1BQUEsSUFDQSxHQUFBLE1BQUEsSUFBQSxPQUFBLEtBQUEsV0FBQSxHQUFBLE1BQUEsQ0FDQSxJQUFBLE9BQUEsR0FBQSxLQUFBLEdBQUEsTUFBQSxPQUFBLENBQ0EsUUFBQSxNQUFBLEVBRUEsSUFBQSxNQUFBLElBQ0EsSUFBQSxPQUFBLGVBQUEsTUFDQSxNQUFBLElBQUEsT0FBQSxJQUNBLEdBQUEsT0FBQSxZQUNBLFdBQUEsR0FBQSxNQUFBLE9BQUEsQ0FFQSxRQUFBLEVBMUJBLElBQUEsUUFBQSxJQUFBLE9BQUEsQ0FDQSxLQUFBLE9BQUEsR0FBQSxTQUFBLEdBQUEsT0FBQSxDQUNBLElBQUEsSUFBQSxFQUFBLE9BQUEsSUFBQSxNQUNBLElBQUEsT0FBQSxHQUFBLEtBQUEsR0FBQSxNQUFBLE9BQUEsQ0FFQSxRQUFBLEdBeUJBLE9BQUEsRUF3QkEsUUFBQSxRQUFBLE9BQUEsT0FBQSxPQUNBLE1BQUEsUUFBQSxPQUFBLE1BQUEsS0FBQSxPQUFBLFFBR0EsUUFBQSxXQUFBLEtBQUEsWUFDQSxNQUFBLE9BQUEsS0FBQSxLQUFBLFlBQUEsR0F1QkEsUUFBQSxNQUFBLEtBQUEsSUFDQSxHQUFBLFdBQUEsVUFBQSxPQUFBLEVBQUEsVUFBQSxVQUFBLEtBQ0EsUUFBQSxXQUFBLEtBQUEsYUFBQSxRQWNBLEdBYkEsVUFBQSxPQUNBLFdBQ0EsTUFBQSxXQUFBLE9BQ0EsR0FBQSxNQUFBLEtBQUEsVUFBQSxPQUFBLE1BQUEsS0FBQSxVQUFBLEtBQ0EsR0FBQSxNQUFBLEtBQUEsWUFFQSxXQUNBLE1BQUEsV0FBQSxPQUNBLEdBQUEsTUFBQSxLQUFBLFdBQ0EsR0FBQSxLQUFBLE9BU0EsUUFBQSxnQkFBQSxJQUFBLE9BQ0EsR0FBQSxLQUFBLEtBWUEsT0FWQSxnQkFBQSxNQUFBLE1BQUEsSUFBQSxPQUFBLElBQUEsTUFBQSxJQUFBLE9BQUEsR0FDQSxJQUFBLFVBQ0EsU0FBQSxPQUNBLElBQUEsVUFDQSxPQUFBLFdBQUEsTUFDQSxJQUFBLFlBQ0EsUUFBQSxTQUNBLElBQUEsVUFHQSxJQWtCQSxRQUFBLFFBQUEsSUFBQSxRQUNBLE1BQUEsbUJBQUEsS0FBQSxVQUNBLEtBQUEsVUFBQSxJQUFBLGVBQUEsT0FBQSxLQUFBLE1BZ0JBLFFBQUEsVUFBQSxNQUNBLE1BQUEsVUFBQSxNQUNBLEtBQUEsTUFBQSxNQUNBLEtBT0EsUUFBQSxhQUFBLFNBQ0EsUUFBQSxPQUFBLFNBQUEsT0FDQSxLQUdBLFFBQUEsUUFDQSxNQUFBLElBRUEsR0FBQSxXQUFBLEVBQ0EsU0FBQSxPQUFBLFNBQUEsT0FBQSxTQUFBLE1BQ0EsS0FDQSxNQUFBLFNBQUEsR0FBQSxXQUFBLFVBQUEsVUFBQSxVQUNBLFNBQ0EsTUFBQSxjQUFBLEdBQ0EsUUFBQSxjQUFBLFNBQUEsTUFBQSxVQUFBLE1BQUEsSUFBQSxVQUFBLFlBQ0EsTUFBQSxHQUNBLE1BQUEsV0FBQSxXQWdCQSxRQUFBLHVCQUFBLE9BQ0EsSUFDQSxNQUFBLG9CQUFBLE9BQ0EsTUFBQSxLQVVBLFFBQUEsZUFBQSxVQUNBLEdBQUEsV0FBQSxJQUFBLE1BaUJBLE9BaEJBLFVBQUEsVUFBQSxJQUFBLE1BQUEsS0FBQSxTQUFBLFVBQ0EsR0FBQSxXQUNBLFVBQUEsU0FBQSxRQUFBLE1BQUEsT0FBQSxNQUFBLEtBQ0EsSUFBQSxzQkFBQSxVQUFBLElBQ0EsVUFBQSxNQUFBLENBQ0EsR0FBQSxLQUFBLFVBQUEsVUFBQSxJQUFBLHNCQUFBLFVBQUEsS0FBQSxDQUNBLGdCQUFBLEtBQUEsSUFBQSxLQUVBLFFBQUEsSUFBQSxNQUNBLElBQUEsS0FBQSxLQUFBLEtBRUEsSUFBQSxNQUFBLElBQUEsS0FBQSxLQUpBLElBQUEsS0FBQSxPQVNBLElBR0EsUUFBQSxZQUFBLEtBQ0EsR0FBQSxTQVlBLE9BWEEsU0FBQSxJQUFBLFNBQUEsTUFBQSxLQUNBLFFBQUEsT0FDQSxRQUFBLE1BQUEsU0FBQSxZQUNBLE1BQUEsS0FBQSxlQUFBLEtBQUEsSUFDQSxjQUFBLEVBQUEsR0FBQSxJQUFBLGVBQUEsWUFBQSxPQUdBLE1BQUEsS0FBQSxlQUFBLEtBQUEsSUFDQSxTQUFBLEVBQUEsR0FBQSxJQUFBLGVBQUEsT0FBQSxPQUdBLE1BQUEsT0FBQSxNQUFBLEtBQUEsS0FBQSxHQWVBLFFBQUEsa0JBQUEsS0FDQSxNQUFBLGdCQUFBLEtBQUEsR0FDQSxRQUFBLFFBQUEsS0FDQSxRQUFBLFFBQUEsS0FDQSxRQUFBLFFBQUEsS0FlQSxRQUFBLGdCQUFBLElBQUEsaUJBQ0EsTUFBQSxvQkFBQSxLQUNBLFFBQUEsUUFBQSxLQUNBLFFBQUEsUUFBQSxLQUNBLFFBQUEsT0FBQSxLQUNBLFFBQUEsUUFBQSxLQUNBLFFBQUEsUUFBQSxLQUNBLFFBQUEsT0FBQSxnQkFBQSxNQUFBLEtBS0EsUUFBQSxnQkFBQSxRQUFBLFFBQ0EsR0FBQSxNQUFBLEVBQUEsR0FBQSxlQUFBLE1BRUEsS0FEQSxRQUFBLE9BQUEsU0FDQSxFQUFBLEVBQUEsR0FBQSxJQUFBLEVBRUEsR0FEQSxLQUFBLGVBQUEsR0FBQSxPQUNBLFNBQUEsS0FBQSxRQUFBLEtBQUEsT0FDQSxNQUFBLEtBR0EsT0FBQSxNQWtJQSxRQUFBLGFBQUEsUUFBQSxXQUNBLEdBQUEsWUFDQSxPQUNBLFNBR0EsU0FBQSxlQUFBLFNBQUEsUUFDQSxHQUFBLE1BQUEsT0FBQSxPQUVBLFlBQUEsUUFBQSxjQUFBLFFBQUEsYUFBQSxRQUNBLFdBQUEsUUFDQSxPQUFBLFFBQUEsYUFBQSxTQUdBLFFBQUEsZUFBQSxTQUFBLFFBQ0EsR0FDQSxXQURBLEtBQUEsT0FBQSxPQUdBLGFBQUEsVUFBQSxRQUFBLGNBQUEsSUFBQSxLQUFBLFFBQUEsSUFBQSxPQUFBLFFBQ0EsV0FBQSxVQUNBLE9BQUEsVUFBQSxhQUFBLFNBR0EsYUFDQSxPQUFBLFNBQUEsT0FBQSxlQUFBLFdBQUEsYUFDQSxVQUFBLFdBQUEsUUFBQSxXQUFBLFNBc0RBLFFBQUEsV0FBQSxRQUFBLFFBQUEsUUFDQSxTQUFBLFVBQUEsVUFDQSxJQUFBLGdCQUNBLFVBQUEsRUFFQSxRQUFBLE9BQUEsY0FBQSxPQUNBLElBQUEsYUFBQSxXQUdBLEdBRkEsUUFBQSxPQUFBLFNBRUEsUUFBQSxXQUFBLENBQ0EsR0FBQSxLQUFBLFFBQUEsS0FBQSxTQUFBLFdBQUEsWUFBQSxRQUVBLE1BQUEsVUFDQSxVQUNBLG1EQUNBLElBQUEsUUFBQSxJQUFBLFFBQUEsUUFBQSxJQUFBLFNBR0EsUUFBQSxZQUNBLFFBQUEsU0FBQSxXQUFBLFNBQUEsVUFDQSxTQUFBLE1BQUEsZUFBQSxZQUdBLE9BQUEsa0JBRUEsUUFBQSxNQUFBLG1CQUFBLFNBQUEsa0JBQ0EsaUJBQUEsa0JBQUEsTUFJQSxRQUFBLFFBQUEsS0FDQSxJQUFBLFVBQUEsZUFBQSxRQUFBLE9BQUEsU0FTQSxPQVJBLFVBQUEsUUFBQSxhQUFBLGVBQUEsV0FBQSxZQUNBLFNBQUEsTUFBQSxRQUFBLFFBQUEsVUFDQSxNQUFBLE9BQUEsV0FDQSxRQUFBLEtBQUEsWUFBQSxVQUNBLFFBQUEsU0FBQSxZQUlBLFVBR0EscUJBQUEseUJBQ0EsbUJBQUEsc0JBT0EsT0FMQSxTQUFBLHFCQUFBLEtBQUEsT0FBQSxRQUNBLE9BQUEsa0JBQUEsRUFDQSxPQUFBLEtBQUEsT0FBQSxLQUFBLFFBQUEscUJBQUEsS0FHQSxTQUFBLG1CQUFBLEtBQUEsT0FBQSxNQUNBLGVBR0EsT0FBQSxLQUFBLE9BQUEsS0FBQSxRQUFBLG1CQUFBLFNBQ0EsUUFBQSxnQkFBQSxTQUFBLGNBQ0EsUUFBQSxhQUFBLFNBQUEsUUFDQSxRQUFBLEtBQUEsVUFFQSxpQkFjQSxRQUFBLHVCQUNBLE9BQUEsS0FBQSx3QkFBQSxPQUFBLEtBQ0EsT0FBQSxTQUFBLFNBV0EsUUFBQSxnQkFBQSxhQUNBLE1BQUEsU0FBQSxRQUFBLGFBQUEsV0FBQSxJQUFBLGlCQUlBLFFBQUEsWUFBQSxLQUFBLFdBRUEsTUFEQSxXQUFBLFdBQUEsSUFDQSxLQUFBLFFBQUEsa0JBQUEsU0FBQSxPQUFBLEtBQ0EsT0FBQSxJQUFBLFVBQUEsSUFBQSxPQUFBLGdCQU1BLFFBQUEsY0FDQSxHQUFBLGtCQUVBLG1CQUtBLE9BQUEsT0FBQSxPQUtBLFFBQUEsT0FBQSxHQUFBLElBQ0EsT0FBQSxPQUNBLE9BQUEsT0FBQSxJQUNBLE1BQUEsZ0JBQUEsTUFDQSxhQUFBLGdCQUFBLGFBQ0EsV0FBQSxnQkFBQSxXQUNBLFNBQUEsZ0JBQUEsU0FDQSxjQUFBLGdCQUFBLGdCQU1BLGtCQUFBLE9BQUEsVUFDQSxPQUFBLFVBQUEsU0FBQSxPQUNBLEdBQUEsT0FDQSxJQUFBLGlDQVFBLGtDQUFBLE1BUEEsS0FBQSxHQUFBLE1BQUEsRUFBQSxFQUFBLE9BQUEsS0FBQSxNQUFBLElBQUEsSUFDQSxPQUFBLE9BQUEsTUFBQSxLQUFBLFVBQ0EsUUFBQSxPQUFBLFVBQ0EsT0FBQSxNQUFBLGVBQUEsV0FNQSxtQkFBQSxTQUdBLE9BQUEsT0FHQSxRQUFBLFFBQUEsT0FHQSxpQkFBQSxHQU1BLFFBQUEsV0FBQSxJQUFBLEtBQUEsUUFDQSxJQUFBLElBQ0EsS0FBQSxVQUFBLE9BQUEsd0JBQUEsTUFBQSxJQUFBLFFBQUEsV0FFQSxPQUFBLEtBR0EsUUFBQSxhQUFBLElBQUEsS0FBQSx1QkFPQSxNQU5BLHdCQUFBLFFBQUEsT0FDQSxJQUFBLElBQUEsSUFBQSxPQUFBLElBR0EsVUFBQSxXQUFBLEtBQUEsS0FBQSx3QkFDQSxLQUFBLGdCQUFBLEtBQUEsSUFBQSxZQUFBLE1BQUEsZUFBQSxPQUNBLElBUUEsUUFBQSx5QkFBQSxLQUFBLFNBQ0EsR0FBQSxtQkFBQSxLQUNBLEtBQUEsVUFBQSxVQUFBLHlDQUFBLFNBWUEsUUFBQSxRQUFBLElBQUEsS0FBQSxlQUNBLElBQUEsS0FBQSxNQUFBLElBTUEsS0FBQSxHQUpBLEtBREEsS0FBQSxLQUFBLE1BQUEsS0FFQSxhQUFBLElBQ0EsSUFBQSxLQUFBLE9BRUEsRUFBQSxFQUFBLElBQUEsRUFBQSxJQUNBLElBQUEsS0FBQSxHQUNBLE1BQ0EsS0FBQSxhQUFBLEtBQUEsS0FHQSxRQUFBLGVBQUEsV0FBQSxLQUNBLEtBQUEsYUFBQSxLQUVBLElBUUEsUUFBQSxlQUFBLE9BR0EsR0FBQSxNQUFBLE1BQUEsR0FDQSxRQUFBLE1BQUEsTUFBQSxPQUFBLEdBQ0EsWUFBQSxLQUVBLEdBQUEsQ0FFQSxHQURBLEtBQUEsS0FBQSxhQUNBLEtBQUEsS0FDQSxZQUFBLEtBQUEsWUFDQSxPQUFBLFFBRUEsT0FBQSxRQUFBLFlBZUEsUUFBQSxhQUNBLE1BQUEsUUFBQSxPQUFBLE1BWUEsUUFBQSxtQkFBQSxRQUtBLFFBQUEsUUFBQSxJQUFBLEtBQUEsU0FDQSxNQUFBLEtBQUEsUUFBQSxJQUFBLE1BQUEsV0FKQSxHQUFBLGlCQUFBLE9BQUEsYUFDQSxTQUFBLE9BQUEsTUFNQSxRQUFBLE9BQUEsT0FBQSxVQUFBLE9BS0EsT0FGQSxTQUFBLFNBQUEsUUFBQSxVQUFBLE9BRUEsT0FBQSxRQUFBLFNBQUEsV0FFQSxHQUFBLFdBcURBLE9BQUEsVUFBQSxLQUFBLFNBQUEsVUFDQSxHQUFBLHlCQUFBLFNBQUEsS0FBQSxTQUNBLEdBQUEsbUJBQUEsS0FDQSxLQUFBLFVBQUEsVUFBQSx5Q0FBQSxTQVFBLE9BSkEseUJBQUEsS0FBQSxVQUNBLFVBQUEsUUFBQSxlQUFBLFFBQ0EsUUFBQSxNQUFBLE1BRUEsT0FBQSxRQUFBLEtBQUEsV0F1TkEsUUFBQSxhQUFBLFNBQUEsT0FBQSxhQUFBLE9BRUEsTUFEQSxTQUFBLE1BQUEsYUFDQSxXQUVBLE1BREEsT0FBQSxjQUFBLFNBQUEsU0FBQSxPQUFBLFlBQ0EsZ0JBMU5BLElBQUEsU0FDQSxLQUFBLGlCQUFBLFFBQUEsc0xBRUEsS0FJQSxJQUFBLGdCQUdBLGdCQUdBLGFBRUEsT0FBQSxZQUFBLFlBQUEsU0FBQSxPQUFBLGNBR0EsZ0JBRUEsYUFBQSxZQUNBLGNBQUEsYUFDQSxXQUFBLFVBV0EsU0FBQSxTQVVBLEtBQUEsS0FhQSxTQUFBLFlBQUEsV0FBQSxZQVdBLFFBQUEsWUFBQSxXQUFBLFdBV0EsUUFBQSxZQUFBLFdBQUEsV0FXQSxNQUFBLFlBQUEsV0FBQSxTQVlBLFNBQUEsWUFBQSxXQUFBLFdBQUEsV0FrQ0EsVUFBQSxZQUFBLG1CQUFBLFlBV0EsT0FBQSxZQUFBLGtCQUFBLFlBWUEsV0FBQSxZQUFBLHNCQUFBLFlBYUEsVUFBQSxZQUFBLG1CQUFBLGFBYUEsT0FBQSxPQVlBLElBQUEsU0FBQSxPQUVBLE1BREEsV0FBQSxLQUFBLE9BQ0EsTUFRQSxPQUpBLFdBQ0EsT0FBQSxVQUdBLG9CQW1JQSxRQUFBLG9CQUFBLFNBQ0EsT0FBQSxTQUNBLFVBQUEsVUFDQSxLQUFBLEtBQ0EsT0FBQSxPQUNBLE9BQUEsT0FDQSxRQUFBLE9BQ0EsUUFBQSxRQUNBLFNBQUEsZUFDQSxLQUFBLEtBQ0EsS0FBQSxLQUNBLE9BQUEsT0FDQSxTQUFBLFNBQ0EsU0FBQSxTQUNBLFlBQUEsWUFDQSxVQUFBLFVBQ0EsU0FBQSxTQUNBLFdBQUEsV0FDQSxTQUFBLFNBQ0EsU0FBQSxTQUNBLFVBQUEsVUFDQSxRQUFBLFFBQ0EsUUFBQSxRQUNBLE9BQUEsT0FDQSxVQUFBLFVBQ0EsVUFBQSxVQUNBLFdBQUEsUUFBQSxHQUNBLGVBQUEsZUFDQSxTQUFBLE9BQ0EsTUFBQSxJQUNBLG9CQUFBLG9CQUNBLFdBQUEsaUJBR0EsY0FBQSxrQkFBQSxPQUNBLEtBQ0EsY0FBQSxZQUNBLE1BQUEsR0FDQSxjQUFBLGVBQUEsU0FBQSxVQUFBLGlCQUdBLGNBQUEsTUFBQSxhQUFBLFdBQ0EsU0FBQSxVQUVBLFNBQUEsVUFDQSxjQUFBLHdCQUVBLFNBQUEsU0FBQSxXQUFBLGtCQUNBLFdBQ0EsRUFBQSxvQkFDQSxNQUFBLGVBQ0EsU0FBQSxlQUNBLEtBQUEsY0FDQSxPQUFBLGdCQUNBLE9BQUEsZ0JBQ0EsTUFBQSxlQUNBLE9BQUEsZ0JBQ0EsT0FBQSxnQkFDQSxXQUFBLG9CQUNBLGVBQUEsd0JBQ0EsUUFBQSxpQkFDQSxZQUFBLHFCQUNBLFdBQUEsb0JBQ0EsUUFBQSxpQkFDQSxhQUFBLHNCQUNBLE9BQUEsZ0JBQ0EsT0FBQSxnQkFDQSxLQUFBLGNBQ0EsVUFBQSxtQkFDQSxPQUFBLGdCQUNBLGNBQUEsdUJBQ0EsWUFBQSxxQkFDQSxTQUFBLGtCQUNBLE9BQUEsZ0JBQ0EsUUFBQSxpQkFDQSxTQUFBLGtCQUNBLGFBQUEsc0JBQ0EsZ0JBQUEseUJBQ0EsVUFBQSxtQkFDQSxhQUFBLHNCQUNBLFFBQUEsaUJBQ0EsT0FBQSxnQkFDQSxTQUFBLGtCQUNBLFFBQUEsaUJBQ0EsVUFBQSxpQkFDQSxTQUFBLGtCQUNBLFdBQUEsa0JBQ0EsVUFBQSxtQkFDQSxZQUFBLG1CQUNBLFVBQUEsbUJBQ0EsWUFBQSxtQkFDQSxRQUFBLGlCQUNBLGVBQUEsMEJBRUEsV0FDQSxVQUFBLGdDQUVBLFVBQUEsNEJBQ0EsVUFBQSxtQkFDQSxTQUFBLFVBQ0EsY0FBQSxzQkFDQSxTQUFBLGlCQUNBLFNBQUEsaUJBQ0EsY0FBQSxzQkFDQSxZQUFBLG9CQUNBLFVBQUEsa0JBQ0Esa0JBQUEsMEJBQ0EsUUFBQSxnQkFDQSxhQUFBLHFCQUNBLFVBQUEsa0JBQ0EsTUFBQSxjQUNBLGFBQUEscUJBQ0EsVUFBQSxrQkFDQSxLQUFBLGFBQ0EsT0FBQSxlQUNBLFdBQUEsbUJBQ0EsR0FBQSxXQUNBLElBQUEsWUFDQSxLQUFBLGFBQ0EsYUFBQSxxQkFDQSxTQUFBLGlCQUNBLGVBQUEsdUJBQ0EsaUJBQUEseUJBQ0EsY0FBQSxzQkFDQSxTQUFBLGlCQUNBLFFBQUEsZ0JBQ0EsTUFBQSxjQUNBLGdCQUFBLDZCQTJIQSxRQUFBLFlBQUEsUUFBQSxLQWFBLFFBQUEsV0FBQSxNQUNBLE1BQUEsTUFDQSxRQUFBLHFCQUFBLFNBQUEsRUFBQSxVQUFBLE9BQUEsUUFDQSxNQUFBLFFBQUEsT0FBQSxjQUFBLFNBRUEsUUFBQSxnQkFBQSxTQXVCQSxRQUFBLGtCQUFBLE1BQ0EsT0FBQSxZQUFBLEtBQUEsTUFHQSxRQUFBLG1CQUFBLE1BR0EsR0FBQSxVQUFBLEtBQUEsUUFDQSxPQUFBLEtBQUEsV0FBQSxVQUFBLElBQUEsU0FHQSxRQUFBLHFCQUFBLEtBQUEsU0FDQSxHQUFBLEtBQUEsSUFBQSxLQUVBLEVBREEsU0FBQSxRQUFBLHlCQUNBLFFBRUEsSUFBQSxpQkFBQSxNQUVBLE1BQUEsS0FBQSxRQUFBLGVBQUEsV0FDQSxDQVNBLElBUEEsSUFBQSxLQUFBLFNBQUEsWUFBQSxRQUFBLGNBQUEsUUFDQSxLQUFBLGdCQUFBLEtBQUEsUUFBQSxHQUFBLEtBQUEsR0FBQSxjQUNBLEtBQUEsUUFBQSxNQUFBLFFBQUEsU0FDQSxJQUFBLFVBQUEsS0FBQSxHQUFBLEtBQUEsUUFBQSxpQkFBQSxhQUFBLEtBQUEsR0FHQSxFQUFBLEtBQUEsR0FDQSxLQUNBLElBQUEsSUFBQSxTQUdBLE9BQUEsT0FBQSxNQUFBLElBQUEsWUFFQSxJQUFBLFNBQUEsV0FDQSxJQUFBLFlBQUEsR0FVQSxNQU5BLFVBQUEsWUFBQSxHQUNBLFNBQUEsVUFBQSxHQUNBLFFBQUEsTUFBQSxTQUFBLE1BQ0EsU0FBQSxZQUFBLFFBR0EsU0FHQSxRQUFBLGlCQUFBLEtBQUEsU0FDQSxRQUFBLFNBQUEsUUFDQSxJQUFBLE9BRUEsUUFBQSxPQUFBLGtCQUFBLEtBQUEsUUFDQSxRQUFBLGNBQUEsT0FBQSxNQUdBLE9BQUEsb0JBQUEsS0FBQSxVQUNBLE9BQUEsY0FPQSxRQUFBLFFBQUEsU0FDQSxHQUFBLGtCQUFBLFFBQ0EsTUFBQSxRQUdBLElBQUEsWUFNQSxJQUpBLFNBQUEsV0FDQSxRQUFBLEtBQUEsU0FDQSxhQUFBLEtBRUEsZUFBQSxTQUFBLENBQ0EsR0FBQSxhQUFBLEtBQUEsUUFBQSxPQUFBLEdBQ0EsS0FBQSxjQUFBLFFBQUEsbUhBRUEsT0FBQSxJQUFBLFFBQUEsU0FHQSxZQUNBLGVBQUEsS0FBQSxnQkFBQSxVQUVBLGVBQUEsS0FBQSxTQUlBLFFBQUEsYUFBQSxTQUNBLE1BQUEsU0FBQSxXQUFBLEdBR0EsUUFBQSxjQUFBLFFBQUEsaUJBR0EsR0FGQSxpQkFBQSxpQkFBQSxTQUVBLFFBQUEsaUJBRUEsSUFBQSxHQURBLGFBQUEsUUFBQSxpQkFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLFlBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxpQkFBQSxZQUFBLElBS0EsUUFBQSxXQUFBLFFBQUEsS0FBQSxHQUFBLGFBQ0EsR0FBQSxVQUFBLGFBQUEsS0FBQSxjQUFBLFVBQUEsd0RBRUEsSUFBQSxjQUFBLG1CQUFBLFNBQ0EsT0FBQSxjQUFBLGFBQUEsT0FDQSxPQUFBLGNBQUEsYUFBQSxNQUVBLElBQUEsT0FFQSxHQUFBLEtBUUEsUUFBQSxLQUFBLE1BQUEsS0FBQSxTQUFBLE1BQ0EsWUFBQSxLQUNBLHNCQUFBLFFBQUEsS0FBQSxPQUFBLGFBQ0EsUUFBQSxPQUVBLFlBQUEsT0FBQSxVQUFBLFVBWkEsS0FBQSxPQUFBLFFBQ0EsYUFBQSxNQUNBLHNCQUFBLFFBQUEsS0FBQSxPQUFBLGFBRUEsUUFBQSxNQWNBLFFBQUEsa0JBQUEsUUFBQSxNQUNBLEdBQUEsV0FBQSxRQUFBLE1BQ0EsYUFBQSxXQUFBLFFBQUEsVUFFQSxJQUFBLGFBQUEsQ0FDQSxHQUFBLEtBRUEsa0JBREEsY0FBQSxLQUFBLEtBSUEsY0FBQSxTQUNBLGFBQUEsT0FBQSxVQUNBLGFBQUEsVUFBQSxZQUVBLFVBQUEsZ0JBRUEsU0FBQSxXQUNBLFFBQUEsTUFBQSxXQUtBLFFBQUEsb0JBQUEsUUFBQSxtQkFDQSxHQUFBLFdBQUEsUUFBQSxNQUNBLGFBQUEsV0FBQSxRQUFBLFVBT0EsT0FMQSxxQkFBQSxlQUNBLFFBQUEsTUFBQSxVQUFBLFdBQ0EsYUFBQSxRQUFBLFlBQUEsVUFBQSxRQUFBLE9BQUEsWUFHQSxhQUlBLFFBQUEsWUFBQSxRQUFBLElBQUEsT0FDQSxHQUFBLGtCQUFBLFNBQUEsQ0FFQSxHQUFBLGdCQUFBLFVBQUEsT0FDQSxnQkFBQSxnQkFBQSxNQUFBLFNBQUEsS0FDQSxZQUFBLElBQ0EsYUFBQSxtQkFBQSxTQUFBLGdCQUNBLEtBQUEsY0FBQSxhQUFBLElBRUEsSUFBQSxlQUNBLEtBQUEsS0FBQSxVQUNBLENBQ0EsR0FBQSxXQUNBLE1BQUEsS0FFQSxJQUFBLGVBRUEsTUFBQSxPQUFBLEtBQUEsSUFFQSxRQUFBLEtBQUEsT0FPQSxRQUFBLGdCQUFBLFFBQUEsVUFDQSxNQUFBLFNBQUEsY0FDQSxLQUFBLFFBQUEsYUFBQSxVQUFBLElBQUEsS0FBQSxRQUFBLFVBQUEsS0FDQSxRQUFBLElBQUEsU0FBQSxLQUFBLElBRkEsRUFLQSxRQUFBLG1CQUFBLFFBQUEsWUFDQSxZQUFBLFFBQUEsY0FDQSxRQUFBLFdBQUEsTUFBQSxLQUFBLFNBQUEsVUFDQSxRQUFBLGFBQUEsUUFBQSxNQUNBLEtBQUEsUUFBQSxhQUFBLFVBQUEsSUFBQSxLQUNBLFFBQUEsVUFBQSxLQUNBLFFBQUEsSUFBQSxLQUFBLFVBQUEsSUFBQSxTQU1BLFFBQUEsZ0JBQUEsUUFBQSxZQUNBLEdBQUEsWUFBQSxRQUFBLGFBQUEsQ0FDQSxHQUFBLGtCQUFBLEtBQUEsUUFBQSxhQUFBLFVBQUEsSUFBQSxLQUNBLFFBQUEsVUFBQSxJQUVBLFNBQUEsV0FBQSxNQUFBLEtBQUEsU0FBQSxVQUNBLFNBQUEsS0FBQSxVQUNBLEtBQUEsZ0JBQUEsUUFBQSxJQUFBLFNBQUEsT0FDQSxpQkFBQSxTQUFBLE9BSUEsUUFBQSxhQUFBLFFBQUEsS0FBQSxtQkFLQSxRQUFBLGdCQUFBLEtBQUEsVUFHQSxHQUFBLFNBR0EsR0FBQSxTQUFBLFNBQ0EsS0FBQSxLQUFBLFVBQUEsYUFDQSxDQUNBLEdBQUEsUUFBQSxTQUFBLE1BR0EsSUFBQSxnQkFBQSxTQUFBLFNBQUEsU0FBQSxVQUNBLEdBQUEsT0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxJQUNBLEtBQUEsS0FBQSxVQUFBLFNBQUEsT0FJQSxNQUFBLEtBQUEsVUFBQSxVQU9BLFFBQUEsa0JBQUEsUUFBQSxNQUNBLE1BQUEscUJBQUEsUUFBQSxLQUFBLE1BQUEsZ0JBQUEsY0FHQSxRQUFBLHFCQUFBLFFBQUEsS0FBQSxPQUdBLEdBQUEsUUFBQSxXQUNBLFFBQUEsUUFBQSxnQkFJQSxLQUZBLEdBQUEsT0FBQSxRQUFBLE1BQUEsTUFBQSxNQUVBLFNBQUEsQ0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsTUFBQSxPQUFBLEdBQUEsRUFBQSxJQUNBLElBQUEsTUFBQSxPQUFBLEtBQUEsUUFBQSxNQUFBLE9BQUEsVUFBQSxNQUFBLE1BTUEsU0FBQSxRQUFBLFlBQUEsS0FBQSxRQUFBLFVBQUEsUUFBQSxNQUlBLFFBQUEsYUFBQSxTQUVBLElBREEsYUFBQSxTQUFBLEdBQ0EsUUFBQSxZQUNBLFFBQUEsWUFBQSxRQUFBLFlBSUEsUUFBQSxjQUFBLFFBQUEsVUFDQSxVQUFBLGFBQUEsUUFDQSxJQUFBLFFBQUEsUUFBQSxVQUNBLFNBQUEsT0FBQSxZQUFBLFNBaUVBLFFBQUEsb0JBQUEsUUFBQSxNQUVBLEdBQUEsYUFBQSxhQUFBLEtBQUEsY0FHQSxPQUFBLGNBQUEsaUJBQUEsVUFBQSxXQUFBLFlBR0EsUUFBQSxvQkFBQSxRQUFBLE1BQ0EsR0FBQSxVQUFBLFFBQUEsUUFDQSxRQUFBLFVBQUEsVUFBQSxhQUFBLFdBQUEsYUFBQSxNQTJLQSxRQUFBLG9CQUFBLFFBQUEsUUFDQSxHQUFBLGNBQUEsU0FBQSxNQUFBLE1BRUEsTUFBQSxtQkFBQSxXQUNBLE1BQUEsT0FBQSxpQkFHQSxJQUFBLFVBQUEsT0FBQSxNQUFBLE1BQUEsTUFDQSxlQUFBLFNBQUEsU0FBQSxPQUFBLENBRUEsSUFBQSxlQUFBLENBRUEsR0FBQSxZQUFBLE1BQUEsNkJBQUEsQ0FDQSxHQUFBLGtDQUFBLE1BQUEsd0JBQ0EsT0FBQSx5QkFBQSxXQUNBLE1BQUEsNkJBQUEsRUFFQSxNQUFBLGlCQUNBLE1BQUEsa0JBR0Esa0NBQ0EsaUNBQUEsS0FBQSxRQUtBLE1BQUEsOEJBQUEsV0FDQSxNQUFBLE9BQUEsK0JBQUEsR0FJQSxlQUFBLElBQ0EsU0FBQSxZQUFBLFVBR0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxlQUFBLEVBQUEsSUFDQSxNQUFBLGlDQUNBLFNBQUEsR0FBQSxLQUFBLFFBQUEsUUFRQSxPQURBLGNBQUEsS0FBQSxRQUNBLGFBbVFBLFFBQUEsU0FBQSxJQUFBLFdBQ0EsR0FBQSxLQUFBLEtBQUEsSUFBQSxTQUVBLElBQUEsSUFJQSxNQUhBLGtCQUFBLE9BQ0EsSUFBQSxJQUFBLGFBRUEsR0FHQSxJQUFBLGVBQUEsSUFPQSxPQUxBLEtBREEsWUFBQSxTQUFBLFVBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxVQUFBLFFBQUEsS0FBQSxXQUFBLFdBRUEsUUFBQSxJQUFBLElBU0EsUUFBQSxTQUFBLE1BQUEsYUFDQSxHQUFBLFlBQUEsQ0FDQSxHQUFBLEtBQUEsQ0FDQSxNQUFBLFFBQUEsV0FDQSxRQUFBLEtBR0EsUUFBQSxNQUFBLEtBQUEsSUFBQSxNQWtHQSxRQUFBLFFBQUEsSUFHQSxHQUFBLFFBQUEsR0FBQSxXQUFBLFFBQUEsZUFBQSxJQUNBLEtBQUEsT0FBQSxNQUFBLFFBQ0EsT0FBQSxNQUNBLGFBQUEsS0FBQSxJQUFBLElBQUEsUUFBQSxZQUFBLEtBQUEsSUFFQSxLQUdBLFFBQUEsVUFBQSxHQUFBLFNBQUEsTUFDQSxHQUFBLFNBQ0EsT0FDQSxRQUNBLElBRUEsSUFBQSxrQkFBQSxLQUNBLEtBQUEsUUFBQSxHQUFBLFNBQUEsQ0FFQSxHQURBLFdBQ0EsR0FBQSxPQUFBLENBQ0EsR0FBQSxTQUlBLEtBSEEsVUFBQSxPQUFBLE9BQ0EsS0FBQSxHQUFBLE1BQUEsT0FBQSxLQUVBLGdCQUFBLFdBQ0EsNEVBQUEsS0FFQSxRQUFBLEdBQUEsV0FBQSxRQUFBLGVBQUEsSUFDQSxRQUFBLE9BQUEsTUFBQSxTQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsY0FBQSxTQUFBLEtBQ0EsSUFBQSxRQUFBLE9BQUEsU0FBQSxJQUFBLFdBQUEsTUFDQSxRQUFBLEtBQUEsVUFJQSxHQUFBLFFBQUEsYUFFQSxTQUFBLEtBQ0EsS0FBQSxHQUFBLE9BQUEsRUFDQSxZQUFBLEdBQUEsTUFBQSxNQUNBLFFBQUEsR0FBQSxNQUFBLEVBQUEsT0FFQSxZQUFBLEdBQUEsTUFBQSxFQUVBLE9BQUEsU0E4ZUEsUUFBQSxnQkFBQSxjQUFBLFVBb0NBLFFBQUEsZUFBQSxVQUNBLE1BQUEsVUFBQSxJQUFBLE9BQ0EsTUFBQSxVQUFBLFNBQ0EsU0FBQSxJQUFBLGNBQUEsV0FFQSxTQUFBLElBQUEsUUFLQSxRQUFBLFVBQUEsS0FBQSxXQUtBLEdBSkEsd0JBQUEsS0FBQSxZQUNBLFdBQUEsWUFBQSxRQUFBLGNBQ0EsVUFBQSxpQkFBQSxZQUFBLGFBRUEsVUFBQSxLQUNBLEtBQUEsaUJBQUEsT0FBQSxrREFBQSxLQUVBLE9BQUEsZUFBQSxLQUFBLGdCQUFBLFVBR0EsUUFBQSxTQUFBLEtBQUEsV0FBQSxNQUFBLFVBQUEsTUFBQSxLQUFBLFlBRUEsUUFBQSxTQUFBLEtBQUEsYUFDQSxNQUFBLFNBQUEsTUFBQSxZQUFBLFNBQUEsV0FDQSxNQUFBLFdBQUEsWUFBQSxnQkFJQSxRQUFBLE9BQUEsS0FBQSxLQUFBLE1BQUEsU0FBQSxLQUFBLFFBQUEsTUFFQSxRQUFBLFVBQUEsS0FBQSxPQUNBLHdCQUFBLEtBQUEsWUFDQSxjQUFBLE1BQUEsTUFDQSxjQUFBLE1BQUEsTUFHQSxRQUFBLFdBQUEsWUFBQSxTQUNBLEdBQUEsY0FBQSxpQkFBQSxJQUFBLFlBQUEsZ0JBQ0EsU0FBQSxhQUFBLElBRUEsY0FBQSxLQUFBLFdBQ0EsR0FBQSxjQUFBLGlCQUFBLE9BQUEsU0FBQSxhQUNBLE9BQUEsa0JBQUEsT0FBQSxRQUFBLE1BQUEsVUFBQSxnQkFPQSxRQUFBLGFBQUEsZUFDQSxHQUFBLFVBQUEsWUE0Q0EsT0EzQ0EsU0FBQSxjQUFBLFNBQUEsUUFJQSxRQUFBLGdCQUFBLE9BQ0EsR0FBQSxHQUFBLEVBQ0EsS0FBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLFlBQUEsTUFBQSxHQUNBLFNBQUEsaUJBQUEsSUFBQSxXQUFBLEdBRUEsVUFBQSxXQUFBLElBQUEsTUFBQSxTQUFBLFdBQUEsS0FUQSxJQUFBLGNBQUEsSUFBQSxRQUFBLENBQ0EsY0FBQSxJQUFBLFFBQUEsRUFZQSxLQUNBLFNBQUEsU0FDQSxTQUFBLGNBQUEsUUFDQSxVQUFBLFVBQUEsT0FBQSxZQUFBLFNBQUEsV0FBQSxPQUFBLFNBQUEsWUFDQSxlQUFBLFNBQUEsY0FDQSxlQUFBLFNBQUEsZ0JBQ0EsV0FBQSxRQUNBLFVBQUEsS0FBQSxpQkFBQSxPQUFBLFNBQ0EsUUFBQSxRQUNBLFVBQUEsS0FBQSxpQkFBQSxPQUFBLFNBRUEsWUFBQSxPQUFBLFVBRUEsTUFBQSxHQVlBLEtBWEEsU0FBQSxVQUNBLE9BQUEsT0FBQSxPQUFBLE9BQUEsSUFFQSxFQUFBLFNBQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxNQUFBLFFBQUEsRUFBQSxXQU1BLEVBQUEsRUFBQSxRQUFBLEtBQUEsRUFBQSxPQUVBLGdCQUFBLFdBQUEsZ0RBQ0EsT0FBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLE9BR0EsVUFPQSxRQUFBLHdCQUFBLE1BQUEsU0FFQSxRQUFBLFlBQUEsYUFDQSxHQUFBLE1BQUEsZUFBQSxhQUFBLENBQ0EsR0FBQSxNQUFBLGVBQUEsY0FDQSxLQUFBLGlCQUFBLE9BQUEsaUNBQ0EsWUFBQSxPQUFBLEtBQUEsS0FBQSxRQUVBLE9BQUEsT0FBQSxhQUVBLElBR0EsTUFGQSxNQUFBLFFBQUEsYUFDQSxNQUFBLGFBQUEsY0FDQSxNQUFBLGFBQUEsUUFBQSxhQUNBLE1BQUEsS0FJQSxLQUhBLE9BQUEsZUFBQSxxQkFDQSxPQUFBLGFBRUEsSUFDQSxRQUNBLEtBQUEsU0FLQSxRQUFBLFFBQUEsR0FBQSxLQUFBLE9BQUEsYUFDQSxnQkFBQSxVQUNBLFlBQUEsT0FDQSxPQUFBLEtBR0EsSUFFQSxRQUFBLEVBQ0EsSUFIQSxRQUNBLFFBQUEsU0FBQSxHQUFBLFNBQUEsWUFJQSxLQUFBLEVBQUEsRUFBQSxPQUFBLFFBQUEsT0FBQSxPQUFBLEVBQUEsSUFBQSxDQUVBLEdBREEsSUFBQSxRQUFBLEdBQ0EsZ0JBQUEsS0FDQSxLQUFBLGlCQUFBLE9BQ0Esc0VBQUEsSUFFQSxNQUFBLEtBQ0EsUUFBQSxPQUFBLGVBQUEsS0FDQSxPQUFBLEtBQ0EsV0FBQSxNQVNBLE1BTkEsU0FBQSxNQUNBLEdBQUEsR0FBQSxTQUtBLEdBQUEsTUFBQSxLQUFBLE1BR0EsUUFBQSxhQUFBLEtBQUEsT0FBQSxhQUNBLEdBQ0EsVUFBQSxjQURBLFlBQUEsWUFTQSxPQUpBLGFBQUEsV0FBQSxRQUFBLE1BQUEsS0FBQSxLQUFBLE9BQUEsR0FBQSxNQUFBLFVBQ0EsU0FBQSxHQUFBLGFBQ0EsY0FBQSxPQUFBLEtBQUEsU0FBQSxPQUFBLGFBRUEsU0FBQSxnQkFBQSxXQUFBLGVBQUEsY0FBQSxTQUdBLE9BQ0EsT0FBQSxPQUNBLFlBQUEsWUFDQSxJQUFBLFdBQ0EsU0FBQSxTQUNBLElBQUEsU0FBQSxNQUNBLE1BQUEsZUFBQSxlQUFBLEtBQUEsaUJBQUEsTUFBQSxlQUFBLFFBck5BLFNBQUEsWUFBQSxDQUNBLElBQUEsa0JBQ0EsZUFBQSxXQUNBLFFBQ0EsY0FBQSxHQUFBLGFBQUEsR0FDQSxlQUNBLFVBQ0EsU0FBQSxjQUFBLFVBQ0EsUUFBQSxjQUFBLFNBQ0EsUUFBQSxjQUFBLFNBQ0EsTUFBQSxjQUFBLE9BQ0EsU0FBQSxjQUFBLFVBQ0EsVUFBQSxZQUdBLGlCQUFBLGNBQUEsVUFDQSx1QkFBQSxjQUFBLFdBQ0EsS0FBQSxpQkFBQSxPQUFBLHdCQUFBLEtBQUEsS0FBQSxXQUVBLGlCQUNBLGlCQUFBLGNBQUEsVUFDQSx1QkFBQSxjQUFBLFNBQUEsYUFDQSxHQUFBLFVBQUEsaUJBQUEsSUFBQSxZQUFBLGVBQ0EsT0FBQSxrQkFBQSxPQUFBLFNBQUEsS0FBQSxTQUFBLFVBQUEsY0FNQSxPQUZBLFNBQUEsWUFBQSxlQUFBLFNBQUEsSUFBQSxpQkFBQSxPQUFBLElBQUEsUUFFQSxpQkFtUEEsUUFBQSx5QkFFQSxHQUFBLHVCQUFBLENBRUEsTUFBQSxxQkFBQSxXQUNBLHNCQUFBLEdBR0EsS0FBQSxNQUFBLFVBQUEsWUFBQSxhQUFBLFNBQUEsUUFBQSxVQUFBLFlBT0EsUUFBQSxnQkFBQSxNQUNBLEdBQUEsUUFBQSxJQUlBLE9BSEEsU0FBQSxLQUFBLFNBQUEsU0FDQSxRQUFBLE1BQUEsVUFBQSxXQUFBLE9BQUEsV0FFQSxPQUdBLFFBQUEsVUFDQSxHQUFBLEtBQUEsS0FBQSxVQUFBLE1BR0EsT0FHQSxJQUFBLFNBQUEsZUFBQSxPQUFBLElBQUEsa0JBR0EsSUFBQSxlQUFBLFNBQUEsa0JBQUEsUUFBQSxJQUFBLGlCQUdBLFFBQUEsTUFBQSxRQUFBLFNBQUEsRUFBQSxHQVRBLFFBQUEsU0FBQSxFQUFBLEdBbEJBLEdBQUEsVUFBQSxRQUFBLFFBdUNBLE9BUEEsdUJBQ0EsV0FBQSxPQUFBLFdBQUEsTUFBQSxXQUFBLFFBQ0EsV0FDQSxXQUFBLFdBQUEsVUFJQSxTQXVQQSxRQUFBLDJCQUNBLEtBQUEsTUFBQSxRQUFBLFdBQUEsU0FBQSxNQUFBLFVBQ0EsTUFBQSxPQUFBLFVBQ0EsU0FBQSxJQUFBLE1BQUEsT0FBQSxLQUNBLFNBQUEsSUFDQSxNQUFBLFVBQUEsR0FBQSxHQUFBLE1BMkJBLFFBQUEsU0FBQSxPQUFBLFNBQUEsS0FBQSxVQXNCQSxRQUFBLDRCQUFBLElBQ0EsSUFDQSxHQUFBLE1BQUEsS0FBQSxVQUFBLFVBQUEsSUFDQSxRQUVBLEdBREEsMEJBQ0EsSUFBQSx3QkFDQSxLQUFBLDRCQUFBLFFBQ0EsSUFDQSw0QkFBQTtDQUNBLE1BQUEsR0FDQSxLQUFBLE1BQUEsS0F5REEsUUFBQSxhQUFBLFNBQUEsYUFDQSxRQUFBLFNBQ0EsUUFBQSxRQUFBLFNBQUEsUUFBQSxXQUNBLFlBQUEsV0FBQSxNQUFBLGFBb0VBLFFBQUEsaUJBQ0EsWUFBQSxLQUNBLGdCQUFBLEtBQUEsUUFFQSxlQUFBLEtBQUEsTUFDQSxRQUFBLG1CQUFBLFNBQUEsVUFDQSxTQUFBLEtBQUEsVUFyS0EsR0FBQSxNQUFBLEtBQ0EsWUFBQSxTQUFBLEdBQ0EsU0FBQSxPQUFBLFNBQ0EsUUFBQSxPQUFBLFFBQ0EsV0FBQSxPQUFBLFdBQ0EsYUFBQSxPQUFBLGFBQ0Esa0JBRUEsTUFBQSxRQUFBLENBRUEsSUFBQSx5QkFBQSxFQUNBLDhCQUdBLE1BQUEsNkJBQUEsMkJBQ0EsS0FBQSw2QkFBQSxXQUFBLDJCQTZCQSxLQUFBLGdDQUFBLFNBQUEsVUFJQSxRQUFBLFFBQUEsU0FBQSxRQUFBLFdBRUEsSUFBQSx3QkFDQSxXQUVBLDRCQUFBLEtBQUEsVUFPQSxJQUNBLGFBREEsVUFjQSxNQUFBLFVBQUEsU0FBQSxJQUdBLE1BRkEsYUFBQSxjQUFBLFlBQUEsSUFBQSxZQUNBLFFBQUEsS0FBQSxJQUNBLEdBc0JBLElBQUEsZ0JBQUEsU0FBQSxLQUNBLFlBQUEsU0FBQSxLQUFBLFFBQ0EsWUFBQSxJQXFCQSxNQUFBLElBQUEsU0FBQSxJQUFBLFNBTUEsR0FKQSxXQUFBLE9BQUEsV0FBQSxTQUFBLE9BQUEsVUFDQSxVQUFBLE9BQUEsVUFBQSxRQUFBLE9BQUEsU0FHQSxJQUFBLENBQ0EsR0FBQSxnQkFBQSxJQUFBLE1BaUJBLE9BaEJBLGdCQUFBLElBQ0EsU0FBQSxRQUNBLFFBQUEsUUFBQSxhQUFBLEtBQUEsR0FBQSxNQUVBLFFBQUEsVUFBQSxLQUFBLEdBQUEsS0FFQSxZQUFBLEtBQUEsT0FBQSxZQUFBLEtBQUEsV0FHQSxZQUFBLElBQ0EsUUFDQSxTQUFBLFFBQUEsS0FFQSxTQUFBLEtBQUEsS0FHQSxLQU1BLE1BQUEsY0FBQSxTQUFBLEtBQUEsUUFBQSxPQUFBLEtBSUEsSUFBQSx1QkFDQSxlQUFBLENBaUNBLE1BQUEsWUFBQSxTQUFBLFVBa0JBLE1BaEJBLGlCQU1BLFNBQUEsU0FBQSxPQUFBLFFBQUEsR0FBQSxXQUFBLGVBRUEsU0FBQSxXQUFBLE9BQUEsUUFBQSxHQUFBLGFBQUEsZUFFQSxLQUFBLFVBQUEsZUFFQSxlQUFBLEdBR0EsbUJBQUEsS0FBQSxVQUNBLFVBUUEsS0FBQSxpQkFBQSxjQWVBLEtBQUEsU0FBQSxXQUNBLEdBQUEsTUFBQSxZQUFBLEtBQUEsT0FDQSxPQUFBLE1BQUEsS0FBQSxRQUFBLHlCQUFBLElBQUEsR0FNQSxJQUFBLGdCQUNBLGlCQUFBLEdBQ0EsV0FBQSxLQUFBLFVBc0JBLE1BQUEsUUFBQSxTQUFBLEtBQUEsT0FDQSxHQUFBLGNBQUEsWUFBQSxPQUFBLEVBQUEsS0FFQSxLQUFBLEtBb0JBLENBQ0EsR0FBQSxZQUFBLFNBQUEsaUJBS0EsSUFKQSxpQkFBQSxZQUFBLE9BQ0EsWUFBQSxpQkFBQSxNQUFBLE1BQ0EsZUFFQSxFQUFBLEVBQUEsRUFBQSxZQUFBLE9BQUEsSUFDQSxPQUFBLFlBQUEsR0FDQSxNQUFBLE9BQUEsUUFBQSxLQUNBLE1BQUEsSUFDQSxLQUFBLG1CQUFBLE9BQUEsVUFBQSxFQUFBLFFBSUEsWUFBQSxRQUFBLFlBQ0EsWUFBQSxNQUFBLG1CQUFBLE9BQUEsVUFBQSxNQUFBLEtBS0EsT0FBQSxhQXZDQSxRQUFBLFVBQ0EsWUFBQSxPQUFBLG1CQUFBLE1BQUEsVUFBQSxXQUNBLHlDQUVBLFNBQUEsU0FDQSxjQUFBLFlBQUEsT0FBQSxtQkFBQSxNQUFBLElBQUEsbUJBQUEsT0FDQSxTQUFBLFlBQUEsT0FBQSxFQU1BLGFBQUEsTUFDQSxLQUFBLEtBQUEsV0FBQSxLQUNBLDhEQUNBLGFBQUEscUJBMkNBLEtBQUEsTUFBQSxTQUFBLEdBQUEsT0FDQSxHQUFBLFVBT0EsT0FOQSwyQkFDQSxVQUFBLFdBQUEsaUJBQ0EsaUJBQUEsV0FDQSwyQkFBQSxLQUNBLE9BQUEsR0FDQSxnQkFBQSxZQUFBLEVBQ0EsV0FjQSxLQUFBLE1BQUEsT0FBQSxTQUFBLFNBQ0EsTUFBQSxpQkFBQSxnQkFDQSxpQkFBQSxTQUNBLGFBQUEsU0FDQSwyQkFBQSxPQUNBLElBRUEsR0FLQSxRQUFBLG9CQUNBLEtBQUEsTUFBQSxVQUFBLE9BQUEsV0FBQSxZQUNBLFNBQUEsUUFBQSxLQUFBLFNBQUEsV0FDQSxNQUFBLElBQUEsU0FBQSxRQUFBLFVBQUEsS0FBQSxZQXFGQSxRQUFBLHlCQUVBLEtBQUEsS0FBQSxXQUdBLFFBQUEsY0FBQSxRQUFBLFNBd01BLFFBQUEsU0FBQSxPQUNBLE9BQUEsV0FDQSxTQUVBLFVBQUEsUUFDQSxTQUFBLE1BQUEsR0FGQSxTQUFBLE1BS0EsS0FBQSxNQUFBLEVBQUEsTUFBQSxHQUNBLEtBQUEsTUFBQSxVQUNBLFNBQUEsTUFDQSxTQUFBLEVBQUEsTUFRQSxRQUFBLE1BQUEsVUFBQSxXQUNBLFdBQUEsWUFDQSxZQUFBLFVBQUEsRUFBQSxXQUNBLFlBQUEsVUFBQSxFQUFBLFlBN05BLEdBQUEsVUFBQSxRQUNBLEtBQUEsUUFBQSxpQkFBQSxNQUFBLGtDQUFBLFFBR0EsSUFBQSxNQUFBLEVBQ0EsTUFBQSxVQUFBLFNBQUEsR0FBQSxVQUNBLFFBQ0EsU0FBQSxTQUFBLFFBQUEsVUFBQSxPQUFBLFVBQ0EsV0FDQSxTQUFBLEtBQ0EsU0FBQSxJQXlDQSxPQUFBLFFBQUEsVUFvQkEsSUFBQSxTQUFBLElBQUEsT0FDQSxHQUFBLFNBQUEsT0FBQSxVQUFBLENBQ0EsR0FBQSxVQUFBLFFBQUEsT0FBQSxRQUFBLE1BQUEsSUFBQSxLQUVBLFNBQUEsVUFHQSxJQUFBLFlBQUEsT0FRQSxNQVBBLE9BQUEsT0FBQSxPQUNBLEtBQUEsS0FBQSxNQUVBLEtBQUEsVUFDQSxLQUFBLE9BQUEsU0FBQSxLQUdBLE9BY0EsSUFBQSxTQUFBLEtBQ0EsR0FBQSxTQUFBLE9BQUEsVUFBQSxDQUNBLEdBQUEsVUFBQSxRQUFBLElBRUEsS0FBQSxTQUFBLE1BRUEsU0FBQSxVQUdBLE1BQUEsTUFBQSxNQWNBLE9BQUEsU0FBQSxLQUNBLEdBQUEsU0FBQSxPQUFBLFVBQUEsQ0FDQSxHQUFBLFVBQUEsUUFBQSxJQUVBLEtBQUEsU0FBQSxNQUVBLFdBQUEsV0FBQSxTQUFBLFNBQUEsR0FDQSxVQUFBLFdBQUEsU0FBQSxTQUFBLEdBQ0EsS0FBQSxTQUFBLEVBQUEsU0FBQSxTQUVBLFNBQUEsV0FHQSxNQUFBLEtBQ0EsUUFZQSxVQUFBLFdBQ0EsUUFDQSxLQUFBLEVBQ0EsV0FDQSxTQUFBLFNBQUEsTUFhQSxRQUFBLFdBQ0EsS0FBQSxLQUNBLE1BQUEsS0FDQSxRQUFBLFdBQ0EsUUFBQSxVQW9CQSxLQUFBLFdBQ0EsTUFBQSxXQUFBLE9BQUEsS0FBQSxTQWxNQSxHQUFBLFVBdVFBLE9BeEJBLGNBQUEsS0FBQSxXQUNBLEdBQUEsUUFJQSxPQUhBLFNBQUEsT0FBQSxTQUFBLE1BQUEsU0FDQSxLQUFBLFNBQUEsTUFBQSxTQUVBLE1BY0EsYUFBQSxJQUFBLFNBQUEsU0FDQSxNQUFBLFFBQUEsVUFJQSxjQThDQSxRQUFBLDBCQUNBLEtBQUEsTUFBQSxnQkFBQSxTQUFBLGVBQ0EsTUFBQSxlQUFBLGVBc2pCQSxRQUFBLGtCQUFBLFNBQUEsdUJBWUEsUUFBQSxzQkFBQSxNQUFBLGVBQ0EsR0FBQSxjQUFBLCtCQUVBLFdBbUJBLE9BakJBLFNBQUEsTUFBQSxTQUFBLFdBQUEsV0FDQSxHQUFBLE9BQUEsV0FBQSxNQUFBLGFBRUEsS0FBQSxNQUNBLEtBQUEsZ0JBQUEsT0FDQSx5RkFFQSxjQUFBLFVBQUEsV0FHQSxVQUFBLFlBQ0EsU0FBQSxNQUFBLElBQUEsVUFDQSxLQUFBLE1BQUEsR0FDQSxTQUFBLE1BQUEsTUFBQSxNQUlBLFNBakNBLEdBQUEsa0JBQ0EsT0FBQSxZQUNBLHlCQUFBLHlDQUNBLHVCQUFBLGlDQUNBLHFCQUFBLFFBQUEsNkJBS0EsMEJBQUEseUJBMENBLE1BQUEsVUFBQSxRQUFBLG1CQUFBLEtBQUEsa0JBcUNBLE1BcENBLHlCQUFBLEtBQUEsYUFDQSxTQUFBLE9BQ0EsVUFBQSxpQkFBQSxvQkFDQSxjQUFBLGVBQUEsUUFDQSxjQUFBLFNBQ0EsU0FBQSxRQUFBLEtBQUEsUUFBQSxZQUFBLG9CQUNBLFNBQUEsVUFBQSxtQkFDQSxHQUFBLGNBc0JBLE9BckJBLFNBQUEsY0FBQSxNQUFBLFNBQUEsaUJBQUEsT0FDQSxJQUNBLEdBQUEsV0FBQSxVQUFBLE9BQUEsaUJBQ0EsWUFBQSxXQUNBLFdBQUEsUUFBQSxRQUFBLGFBQ0EsVUFBQSxTQUFBLFVBQUEsT0FDQSxVQUFBLFFBQUEsUUFBQSxVQUFBLE9BRUEsVUFBQSxTQUFBLFVBQUEsVUFBQSxFQUNBLFVBQUEsTUFBQSxNQUNBLFVBQUEsS0FBQSxVQUFBLE1BQUEsS0FDQSxVQUFBLFFBQUEsVUFBQSxTQUFBLFVBQUEsWUFBQSxVQUFBLEtBQ0EsVUFBQSxTQUFBLFVBQUEsVUFBQSxLQUNBLFNBQUEsVUFBQSxTQUNBLFVBQUEsa0JBQUEscUJBQUEsVUFBQSxNQUFBLFVBQUEsT0FFQSxXQUFBLEtBQUEsV0FDQSxNQUFBLEdBQ0Esa0JBQUEsTUFHQSxlQUdBLGNBQUEsTUFBQSxLQUFBLG1CQUVBLFFBQUEsS0FBQSxjQUFBLG9CQUVBLE1Bd0JBLEtBQUEsMkJBQUEsU0FBQSxRQUNBLE1BQUEsV0FBQSxTQUNBLHNCQUFBLDJCQUFBLFFBQ0EsTUFFQSxzQkFBQSw4QkF5QkEsS0FBQSw0QkFBQSxTQUFBLFFBQ0EsTUFBQSxXQUFBLFNBQ0Esc0JBQUEsNEJBQUEsUUFDQSxNQUVBLHNCQUFBLDhCQTBCQSxJQUFBLG1CQUFBLENBQ0EsTUFBQSxpQkFBQSxTQUFBLFNBQ0EsTUFBQSxXQUFBLFVBQ0EsaUJBQUEsUUFDQSxNQUVBLGtCQUdBLEtBQUEsTUFDQSxZQUFBLGVBQUEsb0JBQUEsbUJBQUEsU0FDQSxjQUFBLGFBQUEsWUFBQSxPQUFBLFdBQUEsZ0JBQ0EsU0FBQSxVQUFBLGFBQUEsa0JBQUEsaUJBQUEsT0FDQSxZQUFBLFdBQUEsVUFBQSxLQUFBLFNBQUEsZUEyTEEsUUFBQSxjQUFBLFNBQUEsV0FDQSxJQUNBLFNBQUEsU0FBQSxXQUNBLE1BQUEsS0E2Q0EsUUFBQSxTQUFBLGNBQUEsYUFBQSxZQUFBLGdCQUNBLHdCQUNBLHdCQUFBLFVBR0EsY0FBQSxPQUFBLGdCQUlBLFFBQUEsY0FBQSxTQUFBLEtBQUEsT0FDQSxHQUFBLEtBQUEsVUFBQSxLQUFBLFVBQUEsTUFBQSxTQUNBLGNBQUEsT0FBQSxPQUFBLE1BQUEsS0FBQSxpQkFBQSxTQUFBLEtBR0EsSUFBQSxpQkFDQSxhQUFBLGNBQUEsYUFBQSxjQUNBLFlBQUEsZ0JBQUEsdUJBQ0EsU0FBQSxnQkFBQSxjQUNBLElBRUEsaUJBRkEsVUFBQSxLQUNBLDZCQUFBLGFBRUEsT0FBQSxVQUFBLE1BQUEsZUFBQSxzQkFBQSx3QkFBQSxxQkFDQSxVQUFBLE1BQUEsU0FDQSxZQUNBLFVBQUEsZ0NBQUEsc0JBRUEsU0FBQSxXQUFBLGNBQUEsS0FBQSxrQkFDQSw2QkFBQSxPQUNBLGFBQUEsVUFBQSxPQUFBLFNBQUEsT0FBQSxlQUFBLFVBS0EsZ0JBQUEsY0FBQSxFQUlBLElBQUEsV0FBQSxlQUNBLGdCQUFBLE1BQUEsS0FBQSw4QkFDQSw0QkFFQSxJQUFBLHNCQUNBLElBQUEsR0FBQSxrQkFBQSx1QkFDQSxVQUFBLEtBQUEsSUFBQSxlQUFBLGFBQUEsc0JBQUEsZ0JBQUEsU0FRQSxPQUpBLFNBQUEsZUFBQSxVQUFBLE9BRUEsZ0JBQUEsZUFBQSxVQUFBLE9BQ0EsaUJBQUEsZ0JBQUEsTUFBQSxVQUFBLFVBQUEseUJBQ0EsV0FJQSxRQUFBLGlDQUFBLGVBRUEsR0FBQSxNQUFBLGVBQUEsY0FBQSxFQUNBLE9BQUEsT0FHQSxrQkFBQSxVQUFBLE9BQUEsS0FBQSxXQUFBLE1BQUEsT0FBQSxNQUZBLE9BcUJBLFFBQUEsY0FBQSxTQUFBLGFBQUEsYUFBQSxZQUFBLGdCQUNBLHdCQTBDQSxRQUFBLGlCQUFBLE1BQUEsU0FBQSxhQUFBLHlCQUNBLEdBQUEsWUFBQSxZQUFBLEtBQUEsV0FBQSxFQUFBLEdBQUEsSUFBQSx1QkFDQSxjQUdBLElBQUEsZ0JBQUEsQ0FHQSxHQUFBLGdCQUFBLFNBQUEsTUFJQSxLQUhBLGVBQUEsR0FBQSxPQUFBLGdCQUdBLEVBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxHQUFBLEVBQ0EsSUFBQSxRQUFBLEdBQ0EsZUFBQSxLQUFBLFNBQUEsU0FHQSxnQkFBQSxRQUdBLEtBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxPQUFBLEdBQUEsR0FDQSxLQUFBLGVBQUEsUUFBQSxNQUNBLFdBQUEsUUFBQSxLQUNBLFlBQUEsUUFBQSxLQUVBLFlBQ0EsV0FBQSxPQUNBLFdBQUEsTUFBQSxPQUNBLFFBQUEsZUFBQSxPQUFBLE1BQUEsYUFFQSxXQUFBLE1BSUEsdUJBREEsV0FBQSx3QkFDQSx3QkFDQSxNQUFBLFdBQUEsV0FBQSx3QkFDQSxXQUFBLGlDQUVBLFdBQUEsdUJBQUEsd0JBQ0EseUJBRUEseUJBQUEsYUFDQSx3QkFBQSxNQUFBLGNBR0EsS0FHQSxXQUFBLFlBQUEsV0FBQSxLQUFBLGFBQUEseUJBRUEsYUFDQSxZQUFBLE1BQUEsS0FBQSxXQUFBLFVBQUEseUJBekZBLElBQUEsR0FGQSxPQUFBLFdBQUEsV0FBQSxXQUFBLFlBQUEsWUFBQSxnQkFEQSxXQUdBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLE1BQUEsR0FBQSxZQUdBLFdBQUEsa0JBQUEsU0FBQSxNQUFBLE1BQUEsSUFBQSxFQUFBLFlBQUEsVUFDQSxpQkFFQSxXQUFBLFdBQUEsT0FDQSxzQkFBQSxXQUFBLFNBQUEsR0FBQSxNQUFBLGFBQUEsYUFDQSxXQUFBLHdCQUNBLEtBRUEsWUFBQSxXQUFBLE9BQ0EsUUFBQSxnQkFBQSxNQUFBLFdBR0EsWUFBQSxZQUFBLFdBQUEsWUFDQSxXQUFBLFNBQUEsR0FBQSxjQUNBLFdBQUEsT0FDQSxLQUNBLGFBQUEsV0FDQSxZQUNBLFdBQUEsMEJBQUEsV0FBQSx3QkFDQSxXQUFBLFdBQUEsZUFFQSxZQUFBLGVBQ0EsUUFBQSxLQUFBLEVBQUEsV0FBQSxhQUNBLGFBQUEsRUFDQSxnQkFBQSxpQkFBQSxZQUlBLHVCQUFBLElBSUEsT0FBQSxhQUFBLGdCQUFBLEtBMkRBLFFBQUEseUJBQUEsTUFBQSxhQUFBLDBCQUFBLHFCQUVBLEdBQUEsbUJBQUEsU0FBQSxpQkFBQSxRQUFBLFlBQUEscUJBQ0EsR0FBQSxlQUFBLENBRUEsb0JBQ0EsaUJBQUEsTUFBQSxPQUNBLGlCQUFBLGVBQUEsRUFDQSxjQUFBLEVBR0EsSUFBQSxPQUFBLGFBQUEsaUJBQUEsUUFBQSxZQUFBLDBCQUFBLG9CQUlBLE9BSEEsZ0JBQUEscUJBQ0EsTUFBQSxHQUFBLFdBQUEsV0FBQSxpQkFBQSxhQUVBLE1BR0EsT0FBQSxtQkFhQSxRQUFBLG1CQUFBLEtBQUEsV0FBQSxNQUFBLFlBQUEsaUJBQ0EsR0FFQSxPQUNBLFVBSEEsU0FBQSxLQUFBLFNBQ0EsU0FBQSxNQUFBLEtBSUEsUUFBQSxVQUNBLElBQUEsR0FFQSxhQUFBLFdBQ0EsbUJBQUEsVUFBQSxPQUFBLElBQUEsWUFBQSxnQkFHQSxLQUFBLEdBQUEsTUFBQSxLQUFBLE1BQUEsV0FBQSxNQUFBLFNBQUEsT0FBQSxLQUFBLFdBQ0EsRUFBQSxFQUFBLEdBQUEsUUFBQSxPQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLGdCQUFBLEVBQ0EsYUFBQSxDQUdBLElBREEsS0FBQSxPQUFBLElBQ0EsTUFBQSxNQUFBLEdBQUEsS0FBQSxVQUFBLENBQ0EsS0FBQSxLQUFBLEtBQ0EsTUFBQSxLQUFBLEtBQUEsT0FHQSxXQUFBLG1CQUFBLE9BQ0EsU0FBQSxnQkFBQSxLQUFBLGVBQ0EsS0FBQSxXQUFBLFdBQUEsT0FBQSxHQUFBLEtBR0EsSUFBQSxnQkFBQSxXQUFBLFFBQUEsZUFBQSxHQUNBLHlCQUFBLGlCQUNBLGFBQUEsZUFBQSxVQUNBLGNBQUEsS0FDQSxZQUFBLEtBQUEsT0FBQSxFQUFBLEtBQUEsT0FBQSxHQUFBLE1BQ0EsS0FBQSxLQUFBLE9BQUEsRUFBQSxLQUFBLE9BQUEsSUFJQSxNQUFBLG1CQUFBLEtBQUEsZUFDQSxTQUFBLE9BQUEsTUFDQSxXQUFBLE1BQUEsZUFBQSxVQUNBLE1BQUEsT0FBQSxNQUNBLG1CQUFBLEtBQUEsU0FDQSxNQUFBLFFBQUEsSUFHQSw0QkFBQSxLQUFBLFdBQUEsTUFBQSxNQUFBLFVBQ0EsYUFBQSxXQUFBLE1BQUEsSUFBQSxZQUFBLGdCQUFBLGNBQ0EsY0FNQSxHQURBLFVBQUEsS0FBQSxVQUNBLFNBQUEsWUFBQSxLQUFBLFVBQ0EsS0FBQSxNQUFBLHVCQUFBLEtBQUEsWUFDQSxNQUFBLG1CQUFBLE1BQUEsSUFDQSxhQUFBLFdBQUEsTUFBQSxJQUFBLFlBQUEsbUJBQ0EsTUFBQSxPQUFBLEtBQUEsTUFBQSxLQUVBLFVBQUEsVUFBQSxPQUFBLE1BQUEsTUFBQSxNQUFBLEdBQUEsT0FHQSxNQUNBLEtBQUEsR0FDQSw0QkFBQSxXQUFBLEtBQUEsVUFDQSxNQUNBLEtBQUEsR0FDQSxJQUNBLE1BQUEseUJBQUEsS0FBQSxLQUFBLFdBQ0EsUUFDQSxNQUFBLG1CQUFBLE1BQUEsSUFDQSxhQUFBLFdBQUEsTUFBQSxJQUFBLFlBQUEsbUJBQ0EsTUFBQSxPQUFBLEtBQUEsTUFBQSxNQUdBLE1BQUEsS0FTQSxNQURBLFlBQUEsS0FBQSxZQUNBLFdBV0EsUUFBQSxXQUFBLEtBQUEsVUFBQSxTQUNBLEdBQUEsVUFDQSxNQUFBLENBQ0EsSUFBQSxXQUFBLEtBQUEsY0FBQSxLQUFBLGFBQUEsV0FBQSxDQUVBLEVBQUEsQ0FDQSxJQUFBLEtBQ0EsS0FBQSxnQkFBQSxVQUNBLG1FQUNBLFVBQUEsUUFFQSxJQUFBLEtBQUEsV0FDQSxLQUFBLGFBQUEsWUFBQSxRQUNBLEtBQUEsYUFBQSxVQUFBLFNBRUEsTUFBQSxLQUFBLE1BQ0EsS0FBQSxLQUFBLGtCQUNBLE1BQUEsT0FFQSxPQUFBLEtBQUEsS0FHQSxPQUFBLFFBQUEsT0FXQSxRQUFBLDRCQUFBLE9BQUEsVUFBQSxTQUNBLE1BQUEsVUFBQSxNQUFBLFFBQUEsTUFBQSxZQUFBLGNBRUEsTUFEQSxTQUFBLFVBQUEsUUFBQSxHQUFBLFVBQUEsU0FDQSxPQUFBLE1BQUEsUUFBQSxNQUFBLFlBQUEsZUEyQkEsUUFBQSx1QkFBQSxXQUFBLFlBQUEsY0FBQSxhQUNBLGFBQUEseUJBQUEsV0FBQSxZQUNBLHdCQWlOQSxRQUFBLFlBQUEsSUFBQSxLQUFBLFVBQUEsU0FDQSxNQUNBLFlBQUEsSUFBQSwyQkFBQSxJQUFBLFVBQUEsVUFDQSxJQUFBLFFBQUEsVUFBQSxRQUNBLElBQUEsY0FBQSxlQUNBLDJCQUFBLFdBQUEsVUFBQSxrQkFDQSxJQUFBLG1CQUFBLEtBQUEsY0FBQSxLQUVBLFdBQUEsS0FBQSxNQUVBLE9BQ0EsWUFBQSxLQUFBLDJCQUFBLEtBQUEsVUFBQSxVQUNBLEtBQUEsUUFBQSxVQUFBLFFBQ0EsS0FBQSxjQUFBLGVBQ0EsMkJBQUEsV0FBQSxVQUFBLGtCQUNBLEtBQUEsbUJBQUEsTUFBQSxjQUFBLEtBRUEsWUFBQSxLQUFBLE9BS0EsUUFBQSxnQkFBQSxjQUFBLFFBQUEsU0FBQSxvQkFDQSxHQUFBLE9BQUEsZ0JBQUEsT0FBQSxVQUFBLENBQ0EsSUFBQSxTQUFBLFNBQUEsQ0FDQSxLQUFBLE1BQUEsTUFBQSxRQUFBLE9BQUEsS0FBQSxLQUFBLE9BQ0EsUUFBQSxRQUFBLE9BQUEsR0FDQSxLQUFBLFFBQ0EsZ0JBQUEsaUJBRUEsU0FBQSxVQUFBLEtBQUEsS0FXQSxJQVRBLE1BQUEsS0FFQSxvQkFBQSxTQUFBLGtCQUNBLE1BQUEsbUJBQUEsWUFDQSxNQUFBLE1BQUEsVUFHQSxNQUFBLE9BQUEsU0FBQSxpQkFBQSxJQUFBLFFBQUEsZUFFQSxRQUFBLFNBQ0EsS0FBQSxnQkFBQSxRQUNBLGlFQUNBLFFBQUEsY0FFQSxPQUFBLE9BT0EsTUFOQSxTQUFBLFdBQ0EsU0FDQSxRQUFBLFFBQUEsU0FBQSxTQUNBLE1BQUEsS0FBQSxlQUFBLGNBQUEsUUFBQSxTQUFBLHdCQUdBLE1BSUEsUUFBQSxZQUFBLFlBQUEsTUFBQSxTQUFBLGFBQUEsbUJBNEtBLFFBQUEsNEJBQUEsTUFBQSxjQUFBLHFCQUNBLEdBQUEsc0JBZUEsT0FaQSxTQUFBLFNBQ0Esb0JBQUEsY0FDQSxjQUFBLE1BQ0EsTUFBQSxXQUdBLGdDQUNBLHNCQUFBLG9CQUVBLHNCQUNBLG9CQUFBLDhCQUFBLFNBQUEsU0FBQSxVQUVBLGtCQUFBLE1BQUEsY0FBQSxzQkFBQSxxQkEzTEEsR0FBQSxHQUFBLEdBQUEsT0FBQSxXQUFBLGFBQUEsbUJBQUEsYUFBQSxTQUNBLEtBZ0RBLElBOUNBLGNBQUEsVUFDQSxNQUFBLGNBQ0EsU0FBQSxjQUFBLFlBRUEsU0FBQSxPQUFBLFVBQ0EsTUFBQSxHQUFBLFlBQUEsU0FBQSxnQkFHQSwyQkFDQSxhQUFBLE1BQUEsTUFBQSxJQUdBLGFBQUEsbUJBQUEsMkJBQ0EsdUJBRUEsZUFDQSxzQkFDQSxRQUFBLHFCQUFBLFNBQUEsV0FDQSxHQUtBLG9CQUxBLFFBQ0EsT0FBQSxZQUFBLDBCQUFBLFVBQUEsZUFBQSxhQUFBLE1BQ0EsU0FBQSxTQUNBLE9BQUEsTUFDQSxZQUFBLGFBR0EsWUFBQSxVQUFBLFdBQ0EsS0FBQSxhQUNBLFdBQUEsTUFBQSxVQUFBLE9BR0EsbUJBQUEsWUFBQSxXQUFBLFFBQUEsRUFBQSxVQUFBLGNBT0EsbUJBQUEsVUFBQSxNQUFBLG1CQUNBLCtCQUNBLFNBQUEsS0FBQSxJQUFBLFVBQUEsS0FBQSxhQUFBLG1CQUFBLFVBR0EsWUFBQSxVQUFBLE1BQUEsc0JBSUEseUJBQUEsQ0FHQSxRQUFBLGVBQUEsU0FBQSxjQUFBLElBQUEsb0JBQUEsb0JBQUEsMEJBQ0Esb0JBQUEseUJBQUEsdUJBQ0EsUUFBQSxnQkFBQSxVQUFBLEVBRUEsSUFBQSx3QkFBQSxhQUFBLFlBQUEseUJBQUEsTUFDQSxzQkFBQSxZQUNBLHlCQUFBLHVCQUFBLFlBQ0EseUJBQUEsb0JBQUEsSUFDQSxzQkFBQSx1QkFBQSxVQUdBLFFBQUEsYUFBQSxrQkFBQSx5QkFBQSxrQkFBQSxTQUFBLFdBQUEsV0FDQSxHQUdBLFdBQ0EsVUFBQSxVQUFBLFFBSkEsU0FBQSxXQUFBLFNBQ0EsU0FBQSxXQUFBLFNBQ0EsS0FBQSxXQUFBLElBSUEsUUFBQSxNQUVBLElBQUEsSUFDQSxNQUFBLFNBQUEsU0FBQSxTQUFBLE9BQ0Esc0JBQUEsV0FBQSxRQUVBLE1BQUEsWUFBQSxVQUFBLFFBQUEsTUFDQSxNQUFBLFlBR0Esc0JBQUEsV0FBQSxhQUFBLE1BQUEsV0FBQSxPQUVBLE1BRUEsS0FBQSxJQUNBLEdBQUEsV0FBQSxNQUFBLFVBQ0EsTUFFQSxXQUFBLE9BQUEsTUFBQSxXQUVBLFFBREEsVUFBQSxRQUNBLE9BRUEsU0FBQSxFQUFBLEdBQUEsTUFBQSxLQUFBLEdBQUEsSUFBQSxHQUFBLElBQUEsR0FFQSxVQUFBLFVBQUEsUUFBQSxXQUdBLEtBREEsV0FBQSxzQkFBQSxXQUFBLFVBQUEsT0FDQSxlQUFBLFlBQ0EsZ0VBQ0EsTUFBQSxVQUFBLHlCQUFBLE9BRUEsVUFBQSxzQkFBQSxXQUFBLFVBQUEsTUFDQSxJQUFBLGtCQUFBLFNBQUEsYUFXQSxNQVZBLFNBQUEsWUFBQSxzQkFBQSxjQUVBLFFBQUEsWUFBQSxXQUtBLFVBQUEsTUFBQSxZQUFBLHNCQUFBLFlBSEEsc0JBQUEsV0FBQSxhQU1BLFVBQUEsWUFFQSxrQkFBQSxXQUFBLENBQ0EsSUFBQSxTQUFBLE1BQUEsT0FBQSxPQUFBLE1BQUEsVUFBQSxrQkFBQSxLQUFBLFVBQUEsUUFDQSxjQUFBLElBQUEsV0FBQSxRQUNBLE1BRUEsS0FBQSxJQUNBLFVBQUEsT0FBQSxNQUFBLFdBQ0Esc0JBQUEsV0FBQSxTQUFBLFFBQ0EsTUFBQSxXQUFBLE1BQUEsWUFjQSxJQVJBLGNBQ0EsUUFBQSxZQUFBLFNBQUEsWUFDQSxlQUVBLFlBQUEsTUFJQSxFQUFBLEVBQUEsR0FBQSxXQUFBLE9BQUEsR0FBQSxFQUFBLElBQ0EsT0FBQSxXQUFBLEdBQ0EsYUFBQSxPQUNBLE9BQUEsYUFBQSxhQUFBLE1BQ0EsU0FDQSxNQUNBLE9BQUEsU0FBQSxlQUFBLE9BQUEsY0FBQSxPQUFBLFFBQUEsU0FBQSxvQkFDQSxhQU9BLElBQUEsY0FBQSxLQU9BLEtBTkEsMkJBQUEseUJBQUEsVUFBQSxPQUFBLHlCQUFBLGVBQ0EsYUFBQSxjQUVBLGFBQUEsWUFBQSxhQUFBLFNBQUEsV0FBQSxVQUFBLG1CQUdBLEVBQUEsWUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsT0FBQSxZQUFBLEdBQ0EsYUFBQSxPQUNBLE9BQUEsYUFBQSxhQUFBLE1BQ0EsU0FDQSxNQUNBLE9BQUEsU0FBQSxlQUFBLE9BQUEsY0FBQSxPQUFBLFFBQUEsU0FBQSxvQkFDQSxjQS9hQSx1QkFBQSwwQkFzQkEsS0FBQSxHQW5CQSxtQkFFQSxZQVFBLFVBQ0EsY0FDQSxVQUdBLE9BQ0EsZUFqQkEsa0JBQUEsT0FBQSxVQUVBLHFCQUFBLHVCQUFBLHFCQUVBLHlCQUFBLHVCQUFBLHlCQUNBLGtCQUFBLHVCQUFBLGtCQUNBLDBCQUFBLHVCQUFBLDBCQUNBLHdCQUFBLEVBQ0EsYUFBQSxFQUNBLDhCQUFBLHVCQUFBLDhCQUNBLGFBQUEsY0FBQSxVQUFBLE9BQUEsYUFJQSxpQkFBQSx5QkFDQSxrQkFBQSxhQUtBLEVBQUEsRUFBQSxHQUFBLFdBQUEsT0FBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLFVBQUEsV0FBQSxFQUNBLElBQUEsV0FBQSxVQUFBLFFBQ0EsUUFBQSxVQUFBLEtBUUEsSUFMQSxZQUNBLGFBQUEsVUFBQSxZQUFBLFVBQUEsVUFFQSxVQUFBLFVBRUEsaUJBQUEsVUFBQSxTQUNBLEtBMEVBLEtBdkVBLGVBQUEsVUFBQSxTQUlBLFVBQUEsY0FDQSxTQUFBLGlCQUdBLGtCQUFBLHFCQUFBLDBCQUFBLGtCQUNBLFVBQUEsY0FDQSx5QkFBQSxXQUlBLGtCQUFBLHFCQUFBLHlCQUFBLFVBQ0EsZUFJQSxrQkFBQSxtQkFBQSxXQUdBLGNBQUEsVUFBQSxNQUVBLFVBQUEsYUFBQSxVQUFBLGFBQ0EsZUFBQSxVQUFBLFdBQ0EscUJBQUEseUJBQ0Esa0JBQUEsSUFBQSxjQUFBLGVBQ0EscUJBQUEsZUFBQSxVQUFBLGNBQ0EscUJBQUEsZUFBQSxZQUdBLGVBQUEsVUFBQSxjQUNBLHdCQUFBLEVBS0EsVUFBQSxRQUNBLGtCQUFBLGVBQUEsMEJBQUEsVUFBQSxjQUNBLDBCQUFBLFdBR0EsV0FBQSxnQkFDQSwrQkFBQSxFQUNBLGlCQUFBLFVBQUEsU0FDQSxVQUFBLGFBQ0EsYUFBQSxjQUFBLFVBQ0EsT0FBQSxTQUFBLGNBQUEsSUFBQSxjQUFBLEtBQ0EsY0FBQSxlQUFBLE1BQ0EsWUFBQSxhQUFBLEdBQ0EsWUFBQSxhQUFBLFVBQUEsV0FBQSxhQUVBLGtCQUFBLFFBQUEsVUFBQSxhQUFBLGlCQUNBLGtCQUFBLGlCQUFBLE1BUUEsMEJBQUEsOEJBR0EsVUFBQSxPQUFBLFlBQUEsY0FBQSxXQUNBLGFBQUEsUUFDQSxrQkFBQSxRQUFBLFVBQUEsZ0JBSUEsVUFBQSxTQVdBLEdBVkEsYUFBQSxFQUNBLGtCQUFBLFdBQUEsa0JBQUEsVUFBQSxjQUNBLGtCQUFBLFVBRUEsZUFBQSxXQUFBLFVBQUEsVUFDQSxVQUFBLFNBQUEsYUFBQSxlQUNBLFVBQUEsU0FFQSxlQUFBLG9CQUFBLGdCQUVBLFVBQUEsUUFBQSxDQVNBLEdBUkEsaUJBQUEsVUFFQSxVQURBLGlCQUFBLG1CQUdBLE9BQUEsYUFBQSxVQUFBLGtCQUFBLEtBQUEsa0JBRUEsWUFBQSxVQUFBLEdBRUEsR0FBQSxVQUFBLFFBQUEsSUFBQSxZQUFBLFNBQ0EsS0FBQSxnQkFBQSxRQUNBLHVFQUNBLGNBQUEsR0FHQSxhQUFBLGFBQUEsYUFBQSxZQUVBLElBQUEsbUJBQUEsVUFPQSxtQkFBQSxrQkFBQSxlQUFBLGtCQUNBLHNCQUFBLFdBQUEsT0FBQSxFQUFBLEVBQUEsV0FBQSxRQUFBLEVBQUEsR0FFQSwyQkFDQSx3QkFBQSxvQkFFQSxXQUFBLFdBQUEsT0FBQSxvQkFBQSxPQUFBLHVCQUNBLHdCQUFBLGNBQUEsa0JBRUEsR0FBQSxXQUFBLFdBRUEsY0FBQSxLQUFBLGVBSUEsSUFBQSxVQUFBLFlBQ0EsYUFBQSxFQUNBLGtCQUFBLFdBQUEsa0JBQUEsVUFBQSxjQUNBLGtCQUFBLFVBRUEsVUFBQSxVQUNBLGlCQUFBLFdBR0EsV0FBQSxtQkFBQSxXQUFBLE9BQUEsRUFBQSxXQUFBLE9BQUEsR0FBQSxhQUNBLGNBQUEsYUFBQSx3QkFBQSxrQkFBQSxXQUFBLGFBQ0EscUJBQUEscUJBQ0EseUJBQUEseUJBQ0Esa0JBQUEsa0JBQ0EsMEJBQUEsNEJBRUEsR0FBQSxXQUFBLFdBQ0EsSUFBQSxVQUFBLFFBQ0EsSUFDQSxPQUFBLFVBQUEsUUFBQSxhQUFBLGNBQUEsbUJBQ0EsV0FBQSxRQUNBLFdBQUEsS0FBQSxPQUFBLFVBQUEsU0FDQSxRQUNBLFdBQUEsT0FBQSxJQUFBLE9BQUEsS0FBQSxVQUFBLFNBRUEsTUFBQSxHQUNBLGtCQUFBLEVBQUEsWUFBQSxlQUlBLFVBQUEsV0FDQSxXQUFBLFVBQUEsRUFDQSxpQkFBQSxLQUFBLElBQUEsaUJBQUEsVUFBQSxXQWNBLE1BVEEsWUFBQSxNQUFBLG1CQUFBLGtCQUFBLFNBQUEsRUFDQSxXQUFBLHdCQUFBLHVCQUNBLFdBQUEsK0JBQUEsOEJBQ0EsV0FBQSxzQkFBQSxZQUNBLFdBQUEsV0FBQSxrQkFFQSx1QkFBQSw4QkFBQSw4QkFHQSxXQThQQSxRQUFBLHlCQUFBLFlBRUEsSUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLFdBQUEsT0FBQSxHQUFBLEVBQUEsSUFDQSxXQUFBLEdBQUEsUUFBQSxXQUFBLElBQUEsZ0JBQUEsSUFrQkEsUUFBQSxjQUFBLFlBQUEsS0FBQSxTQUFBLFlBQUEsZ0JBQUEsY0FDQSxhQUNBLEdBQUEsT0FBQSxnQkFBQSxNQUFBLEtBQ0EsSUFBQSxPQUFBLElBQ0EsSUFBQSxjQUFBLGVBQUEsTUFDQSxJQUFBLEdBQUEsV0FBQSxXQUFBLFVBQUEsSUFBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLEdBQUEsV0FBQSxPQUFBLEdBQUEsRUFBQSxJQUNBLElBQ0EsVUFBQSxXQUFBLElBQ0EsY0FBQSxXQUFBLFlBQUEsVUFBQSxXQUNBLElBQUEsVUFBQSxTQUFBLFFBQUEsWUFDQSxnQkFDQSxVQUFBLFFBQUEsV0FBQSxRQUFBLGNBQUEsTUFBQSxlQUVBLFlBQUEsS0FBQSxXQUNBLE1BQUEsV0FFQSxNQUFBLEdBQUEsa0JBQUEsR0FHQSxNQUFBLE9BWUEsUUFBQSx5QkFBQSxNQUNBLEdBQUEsY0FBQSxlQUFBLE1BQ0EsSUFBQSxHQUFBLFdBQUEsV0FBQSxVQUFBLElBQUEsS0FBQSxRQUNBLEVBQUEsRUFBQSxHQUFBLFdBQUEsT0FBQSxHQUFBLEVBQUEsSUFFQSxHQURBLFVBQUEsV0FBQSxHQUNBLFVBQUEsYUFDQSxPQUFBLENBSUEsUUFBQSxFQVdBLFFBQUEseUJBQUEsSUFBQSxLQUNBLEdBQUEsU0FBQSxJQUFBLE1BQ0EsUUFBQSxJQUFBLE1BQ0EsU0FBQSxJQUFBLFNBR0EsU0FBQSxJQUFBLFNBQUEsTUFBQSxLQUNBLEtBQUEsSUFBQSxPQUFBLEtBQ0EsSUFBQSxNQUFBLElBQUEsT0FBQSxRQUNBLFFBQUEsVUFBQSxJQUFBLElBQUEsS0FBQSxJQUFBLE1BRUEsSUFBQSxLQUFBLElBQUEsT0FBQSxFQUFBLFFBQUEsU0FLQSxRQUFBLElBQUEsU0FBQSxNQUFBLEtBQ0EsU0FBQSxLQUNBLGFBQUEsU0FBQSxPQUNBLElBQUEsVUFBQSxJQUFBLFNBQUEsSUFBQSxTQUFBLElBQUEsSUFBQSxPQUNBLFNBQUEsS0FDQSxTQUFBLEtBQUEsUUFBQSxTQUFBLEtBQUEsU0FBQSxJQUFBLE9BQ0EsSUFBQSxPQUFBLElBQUEsTUFBQSxJQUFBLE1BQUEsSUFBQSxJQUFBLE9BSUEsS0FBQSxJQUFBLE9BQUEsSUFBQSxJQUFBLGVBQUEsT0FDQSxJQUFBLEtBQUEsTUFDQSxRQUFBLEtBQUEsUUFBQSxRQU1BLFFBQUEsb0JBQUEsV0FBQSxhQUFBLE9BQ0EsYUFBQSxrQkFBQSxXQUFBLFlBQUEsd0JBQ0EsR0FDQSx5QkFDQSx5QkFGQSxhQUdBLDBCQUFBLGFBQUEsR0FDQSxtQkFBQSxXQUFBLFFBRUEscUJBQUEsVUFBQSxvQkFDQSxZQUFBLEtBQUEsV0FBQSxLQUFBLFFBQUEsS0FBQSxvQkFBQSxxQkFFQSxZQUFBLFdBQUEsbUJBQUEsYUFDQSxtQkFBQSxZQUFBLGFBQUEsUUFDQSxtQkFBQSxZQUNBLGtCQUFBLG1CQUFBLGlCQWlGQSxPQS9FQSxjQUFBLFFBRUEsaUJBQUEsS0FBQSxzQkFBQSxjQUNBLEtBQUEsU0FBQSxTQUNBLEdBQUEsYUFBQSxrQkFBQSxVQUFBLHNCQUlBLElBRkEsUUFBQSxvQkFBQSxTQUVBLG1CQUFBLFFBQUEsQ0FRQSxHQU5BLFVBREEsaUJBQUEsWUFHQSxPQUFBLGFBQUEsa0JBQUEsS0FBQSxXQUVBLFlBQUEsVUFBQSxHQUVBLEdBQUEsVUFBQSxRQUFBLElBQUEsWUFBQSxTQUNBLEtBQUEsZ0JBQUEsUUFDQSx1RUFDQSxtQkFBQSxLQUFBLFlBR0Esb0JBQUEsVUFDQSxZQUFBLGFBQUEsYUFBQSxZQUNBLElBQUEsb0JBQUEsa0JBQUEsZUFBQSxrQkFFQSxVQUFBLG1CQUFBLFFBQ0Esd0JBQUEsb0JBRUEsV0FBQSxtQkFBQSxPQUFBLFlBQ0Esd0JBQUEsT0FBQSx1QkFFQSxhQUFBLDBCQUNBLGFBQUEsS0FBQSxRQWVBLEtBWkEsV0FBQSxRQUFBLHNCQUVBLHdCQUFBLHNCQUFBLFdBQUEsWUFBQSxPQUNBLGtCQUFBLGFBQUEsbUJBQUEsV0FBQSxZQUNBLHdCQUNBLFFBQUEsYUFBQSxTQUFBLEtBQUEsR0FDQSxNQUFBLGNBQ0EsYUFBQSxHQUFBLGFBQUEsTUFHQSx5QkFBQSxhQUFBLGFBQUEsR0FBQSxXQUFBLG1CQUVBLFVBQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxVQUFBLFFBQ0EsdUJBQUEsVUFBQSxRQUNBLGdCQUFBLFVBQUEsUUFDQSxrQkFBQSxVQUFBLFFBQ0EsU0FBQSxhQUFBLEVBRUEsSUFBQSx5QkFBQSwwQkFBQSxDQUNBLEdBQUEsWUFBQSx1QkFBQSxTQUVBLHdCQUFBLCtCQUNBLG1CQUFBLFVBRUEsU0FBQSxZQUFBLGNBRUEsWUFBQSxnQkFBQSxPQUFBLHdCQUFBLFVBR0EsYUFBQSxPQUFBLFVBQUEsWUFHQSx1QkFEQSx3QkFBQSx3QkFDQSx3QkFBQSxNQUFBLHdCQUFBLFdBQUEsbUJBRUEsa0JBRUEsd0JBQUEseUJBQUEsTUFBQSxTQUFBLGFBQ0Esd0JBRUEsVUFBQSxPQUdBLFNBQUEsa0JBQUEsTUFBQSxLQUFBLFlBQUEsbUJBQ0EsR0FBQSx3QkFBQSxpQkFDQSxZQUNBLFVBQUEsS0FBQSxPQUNBLFVBQUEsS0FBQSxNQUNBLFVBQUEsS0FBQSxhQUNBLFVBQUEsS0FBQSwwQkFFQSx3QkFBQSwwQkFDQSx1QkFBQSx3QkFBQSxNQUFBLHdCQUFBLFdBQUEsb0JBRUEsd0JBQUEseUJBQUEsTUFBQSxLQUFBLFlBQUEsMEJBU0EsUUFBQSxZQUFBLEVBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxTQUFBLEVBQUEsUUFDQSxPQUFBLEtBQUEsS0FBQSxLQUNBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxHQUFBLEVBQ0EsRUFBQSxNQUFBLEVBQUEsTUFJQSxRQUFBLG1CQUFBLEtBQUEsa0JBQUEsVUFBQSxTQUNBLEdBQUEsa0JBQ0EsS0FBQSxnQkFBQSxXQUFBLHdEQUNBLGtCQUFBLEtBQUEsVUFBQSxLQUFBLEtBQUEsWUFBQSxVQUtBLFFBQUEsNkJBQUEsV0FBQSxNQUNBLEdBQUEsZUFBQSxhQUFBLE1BQUEsRUFDQSxnQkFDQSxXQUFBLE1BQ0EsU0FBQSxFQUNBLFFBQUEsU0FBQSxjQUNBLEdBQUEsb0JBQUEsYUFBQSxTQUNBLG1CQUFBLG1CQUFBLE1BTUEsT0FGQSxtQkFBQSxRQUFBLGtCQUFBLG9CQUVBLFNBQUEsTUFBQSxNQUNBLEdBQUEsUUFBQSxLQUFBLFFBQ0EsbUJBQUEsUUFBQSxrQkFBQSxRQUNBLFFBQUEsaUJBQUEsT0FBQSxjQUFBLGFBQ0EsTUFBQSxPQUFBLGNBQUEsU0FBQSxPQUNBLEtBQUEsR0FBQSxVQUFBLFlBU0EsUUFBQSxjQUFBLEtBQUEsVUFFQSxPQURBLEtBQUEsVUFBQSxNQUFBLFNBRUEsSUFBQSxNQUNBLElBQUEsT0FDQSxHQUFBLFNBQUEsU0FBQSxjQUFBLE1BRUEsT0FEQSxTQUFBLFVBQUEsSUFBQSxLQUFBLElBQUEsU0FBQSxLQUFBLEtBQUEsSUFDQSxRQUFBLFdBQUEsR0FBQSxVQUNBLFNBQ0EsTUFBQSxXQUtBLFFBQUEsbUJBQUEsS0FBQSxvQkFDQSxHQUFBLFVBQUEsbUJBQ0EsTUFBQSxNQUFBLElBRUE7R0FBQSxLQUFBLFVBQUEsS0FFQSxPQUFBLGFBQUEsb0JBQ0EsUUFBQSxLQUFBLFVBQUEsb0JBQ0EsT0FBQSxNQUFBLE9BQUEsb0JBQ0EsU0FBQSxvQkFDQSxLQUFBLGFBSkEsT0FTQSxRQUFBLDZCQUFBLEtBQUEsV0FBQSxNQUFBLEtBQUEsY0FDQSxHQUFBLGVBQUEsYUFBQSxPQUFBLEVBR0EsSUFBQSxjQUFBLENBR0EsR0FBQSxhQUFBLE1BQUEsV0FBQSxVQUFBLE1BQ0EsS0FBQSxnQkFBQSxXQUNBLHFFQUNBLFlBQUEsTUFHQSxZQUFBLE1BQ0EsU0FBQSxJQUNBLFFBQUEsV0FDQSxPQUNBLElBQUEsU0FBQSxNQUFBLFFBQUEsTUFDQSxHQUFBLGFBQUEsS0FBQSxjQUFBLEtBQUEsZUFFQSxJQUFBLDBCQUFBLEtBQUEsTUFDQSxLQUFBLGdCQUFBLGNBQ0EsMklBTUEsZUFBQSxhQUFBLEtBQUEsT0FBQSxFQUFBLGtCQUFBLEtBQUEsTUFDQSxxQkFBQSxPQUFBLGNBSUEsZ0JBS0EsS0FBQSxNQUFBLGNBQUEsUUFFQSxZQUFBLFFBQUEsWUFBQSxXQUFBLFNBQUEsR0FDQSxLQUFBLGFBQUEsS0FBQSxZQUFBLE1BQUEsU0FBQSxPQUNBLE9BQUEsY0FBQSxTQUFBLFNBQUEsVUFPQSxVQUFBLE1BQUEsVUFBQSxTQUNBLEtBQUEsYUFBQSxTQUFBLFVBRUEsS0FBQSxLQUFBLEtBQUEsbUJBb0JBLFFBQUEsYUFBQSxhQUFBLGlCQUFBLFNBQ0EsR0FHQSxHQUFBLEdBSEEscUJBQUEsaUJBQUEsR0FDQSxZQUFBLGlCQUFBLE9BQ0EsT0FBQSxxQkFBQSxVQUdBLElBQUEsYUFDQSxJQUFBLEVBQUEsRUFBQSxHQUFBLGFBQUEsT0FBQSxHQUFBLEVBQUEsSUFDQSxHQUFBLGFBQUEsSUFBQSxxQkFBQSxDQUNBLGFBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLFlBQUEsRUFDQSxHQUFBLGFBQUEsT0FDQSxHQUFBLEVBQUEsSUFBQSxLQUNBLEdBQUEsR0FDQSxhQUFBLEdBQUEsYUFBQSxVQUVBLGNBQUEsRUFHQSxjQUFBLFFBQUEsWUFBQSxFQUtBLGFBQUEsVUFBQSx1QkFDQSxhQUFBLFFBQUEsUUFFQSxPQUtBLFFBQ0EsT0FBQSxhQUFBLFFBQUEscUJBSUEsSUFBQSxVQUFBLFNBQUEsd0JBQ0EsVUFBQSxZQUFBLHNCQUtBLE9BQUEsU0FBQSxLQUFBLE9BQUEsc0JBQUEsUUFLQSxRQVVBLGtDQUFBLEVBQ0EsT0FBQSxXQUFBLDhCQVZBLFFBQUEsTUFBQSxxQkFBQSxPQUFBLFNBYUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLGlCQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLFNBQUEsaUJBQUEsRUFDQSxRQUFBLFNBQUEsU0FDQSxTQUFBLFlBQUEsZUFDQSxrQkFBQSxHQUdBLGlCQUFBLEdBQUEsUUFDQSxpQkFBQSxPQUFBLEVBSUEsUUFBQSxvQkFBQSxHQUFBLFlBQ0EsTUFBQSxRQUFBLFdBQUEsTUFBQSxJQUFBLE1BQUEsS0FBQSxZQUFBLEdBQUEsWUFJQSxRQUFBLGNBQUEsT0FBQSxNQUFBLFNBQUEsTUFBQSxZQUFBLGNBQ0EsSUFDQSxPQUFBLE1BQUEsU0FBQSxNQUFBLFlBQUEsY0FDQSxNQUFBLEdBQ0Esa0JBQUEsRUFBQSxZQUFBLFlBMStDQSxHQUFBLFlBQUEsU0FBQSxRQUFBLGtCQUNBLEdBQUEsaUJBQUEsQ0FDQSxHQUNBLEdBQUEsRUFBQSxJQURBLEtBQUEsT0FBQSxLQUFBLGlCQUdBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLElBQUEsS0FBQSxHQUNBLEtBQUEsS0FBQSxpQkFBQSxTQUdBLE1BQUEsUUFHQSxNQUFBLFVBQUEsUUFHQSxZQUFBLFdBQ0EsV0FBQSxtQkFjQSxVQUFBLFNBQUEsVUFDQSxVQUFBLFNBQUEsT0FBQSxHQUNBLFNBQUEsU0FBQSxLQUFBLFVBQUEsV0FlQSxhQUFBLFNBQUEsVUFDQSxVQUFBLFNBQUEsT0FBQSxHQUNBLFNBQUEsWUFBQSxLQUFBLFVBQUEsV0FnQkEsYUFBQSxTQUFBLFdBQUEsWUFDQSxHQUFBLE9BQUEsZ0JBQUEsV0FBQSxXQUNBLFFBQUEsTUFBQSxRQUNBLFNBQUEsU0FBQSxLQUFBLFVBQUEsTUFHQSxJQUFBLFVBQUEsZ0JBQUEsV0FBQSxXQUNBLFdBQUEsU0FBQSxRQUNBLFNBQUEsWUFBQSxLQUFBLFVBQUEsV0FhQSxLQUFBLFNBQUEsSUFBQSxNQUFBLFVBQUEsVUFLQSxHQUtBLFVBTEEsS0FBQSxLQUFBLFVBQUEsR0FDQSxXQUFBLG1CQUFBLEtBQUEsS0FDQSxXQUFBLG1CQUFBLEtBQUEsS0FDQSxTQUFBLEdBSUEsYUFDQSxLQUFBLFVBQUEsS0FBQSxJQUFBLE9BQ0EsU0FBQSxZQUNBLGFBQ0EsS0FBQSxZQUFBLE1BQ0EsU0FBQSxZQUdBLEtBQUEsS0FBQSxNQUdBLFNBQ0EsS0FBQSxNQUFBLEtBQUEsVUFFQSxTQUFBLEtBQUEsTUFBQSxLQUNBLFdBQ0EsS0FBQSxNQUFBLEtBQUEsU0FBQSxXQUFBLElBQUEsT0FJQSxTQUFBLFVBQUEsS0FBQSxZQUdBLE1BQUEsVUFBQSxTQUFBLEtBQ0EsUUFBQSxVQUFBLFFBQUEsT0FDQSxLQUFBLEtBQUEsTUFBQSxjQUFBLE1BQUEsUUFBQSxNQUdBLGFBQUEsSUFDQSxPQUFBLE9BQUEsUUFBQSxVQUNBLEtBQUEsVUFBQSxXQUFBLFVBRUEsS0FBQSxVQUFBLEtBQUEsU0FBQSxPQUtBLElBQUEsYUFBQSxLQUFBLFdBQ0EsY0FBQSxRQUFBLFlBQUEsVUFBQSxTQUFBLElBQ0EsSUFDQSxHQUFBLE9BQ0EsTUFBQSxHQUNBLGtCQUFBLE9Bd0JBLFNBQUEsU0FBQSxJQUFBLElBQ0EsR0FBQSxPQUFBLEtBQ0EsWUFBQSxNQUFBLGNBQUEsTUFBQSxnQkFDQSxVQUFBLFlBQUEsT0FBQSxZQUFBLFFBVUEsT0FSQSxXQUFBLEtBQUEsSUFDQSxXQUFBLFdBQUEsV0FDQSxVQUFBLFNBRUEsR0FBQSxNQUFBLFFBSUEsV0FDQSxZQUFBLFVBQUEsTUFnQkEsSUFBQSxhQUFBLGFBQUEsY0FDQSxVQUFBLGFBQUEsWUFDQSxvQkFBQSxNQUFBLGFBQUEsTUFBQSxVQUNBLFNBQ0EsU0FBQSxVQUNBLE1BQUEsVUFBQSxRQUFBLFFBQUEsYUFBQSxRQUFBLE1BQUEsWUFFQSxnQkFBQSxjQTJCQSxPQXpCQSxTQUFBLGlCQUFBLGlCQUFBLFNBQUEsU0FBQSxTQUNBLEdBQUEsVUFBQSxTQUFBLEtBQUEsZUFFQSxTQUFBLFNBQ0EsU0FBQSxTQUFBLE9BQUEsU0FFQSxTQUFBLEtBQUEsU0FHQSxTQUFBLEtBQUEsV0FBQSxXQUNBLEtBRUEsUUFBQSxrQkFBQSxpQkFBQSxTQUFBLFVBQ0EsYUFBQSxTQUFBLGVBQ0EsS0FFQSxRQUFBLGVBQUEsaUJBQUEsU0FBQSxTQUFBLE1BQUEsU0FBQSxZQUNBLEdBQUEsVUFBQSxTQUFBLFdBQUEsMEJBQUEsZ0JBQUEsUUFDQSxVQUFBLEtBQUEsU0FBQSxRQUNBLEtBRUEsUUFBQSxnQkFBQSxpQkFBQSxTQUFBLFNBQUEsVUFDQSxhQUFBLFNBQUEsU0FBQSxtQkFBQSxhQUNBLEtBRUEsVUF1eENBLFFBQUEsb0JBQUEsTUFDQSxNQUFBLFdBQUEsS0FBQSxRQUFBLGNBQUEsS0ErREEsUUFBQSxpQkFBQSxLQUFBLE1BQ0EsR0FBQSxRQUFBLEdBQ0EsUUFBQSxLQUFBLE1BQUEsT0FDQSxRQUFBLEtBQUEsTUFBQSxNQUVBLE9BQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxJQUFBLENBRUEsSUFBQSxHQURBLE9BQUEsUUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxJQUNBLEdBQUEsT0FBQSxRQUFBLEdBQUEsUUFBQSxNQUVBLFVBQUEsT0FBQSxPQUFBLEVBQUEsSUFBQSxJQUFBLE1BRUEsTUFBQSxRQWFBLFFBQUEsdUJBQ0EsR0FBQSxnQkFDQSxTQUFBLEVBQ0EsVUFBQSx5QkFXQSxNQUFBLFNBQUEsU0FBQSxLQUFBLGFBQ0Esd0JBQUEsS0FBQSxjQUNBLFNBQUEsTUFDQSxPQUFBLFlBQUEsTUFFQSxZQUFBLE1BQUEsYUFTQSxLQUFBLGFBQUEsV0FDQSxTQUFBLEdBSUEsS0FBQSxNQUFBLFlBQUEsVUFBQSxTQUFBLFVBQUEsU0F3RkEsUUFBQSxlQUFBLE9BQUEsV0FBQSxTQUFBLE1BQ0EsSUFBQSxTQUFBLFNBQUEsT0FBQSxRQUNBLEtBQUEsUUFBQSxlQUFBLFFBQ0EsbUZBQ0EsS0FBQSxXQUdBLFFBQUEsT0FBQSxZQUFBLFNBdEVBLE1BQUEsVUFBQSxXQUFBLE9BQUEsTUFBQSxPQVFBLEdBQUEsVUFBQSxNQUFBLFlBQUEsVUFrQkEsSUFqQkEsTUFBQSxTQUFBLEVBQ0EsT0FBQSxTQUFBLFNBQ0EsV0FBQSxPQUdBLFNBQUEsY0FDQSxNQUFBLFdBQUEsTUFBQSxXQUNBLFlBQUEsTUFBQSxHQUNBLFdBQUEsWUFBQSxNQUFBLEdBQ0EsV0FBQSxZQUFBLGVBQUEsYUFDQSxZQUFBLGFBQ0EsT0FBQSxPQUFBLE9BQUEsYUFBQSxLQUNBLFFBQUEsT0FBQSxRQUFBLGFBQUEsR0FBQSxXQUVBLFlBQUEsV0FBQSxhQUFBLElBR0EsTUFBQSxDQVVBLEdBQUEsYUFBQSxZQVNBLE9BUkEsYUFBQSxXQUFBLFFBQUEsWUFDQSxXQUFBLFdBQUEsT0FBQSxHQUFBLFlBQUEsVUFDQSxTQUFBLEdBQUEsYUFFQSxZQUNBLGNBQUEsT0FBQSxXQUFBLFNBQUEsYUFBQSxXQUFBLE1BR0EsT0FBQSxXQUVBLE1BREEsV0FBQSxPQUFBLFdBQUEsU0FBQSxPQUFBLGFBQ0EsV0FFQSxTQUFBLFNBQ0EsV0FBQSxhQVVBLE1BTkEsVUFBQSxVQUFBLFlBQUEsV0FBQSxPQUFBLGFBRUEsWUFDQSxjQUFBLE9BQUEsV0FBQSxTQUFBLGFBQUEsV0FBQSxNQUdBLFlBd0NBLFFBQUEscUJBQ0EsS0FBQSxNQUFBLFVBQUEsU0FBQSxRQUNBLE1BQUEsUUFBQSxPQUFBLFlBb0NBLFFBQUEsNkJBQ0EsS0FBQSxNQUFBLE9BQUEsU0FBQSxNQUNBLE1BQUEsWUFDQSxLQUFBLE1BQUEsTUFBQSxLQUFBLGNBV0EsUUFBQSxjQUFBLFNBQ0EsR0FBQSxLQUFBLElBQUEsRUFBQSxTQUVBLE9BQUEsVUFFQSxRQUFBLFFBQUEsTUFBQSxNQUFBLFNBQUEsTUFDQSxFQUFBLEtBQUEsUUFBQSxLQUNBLElBQUEsVUFBQSxLQUFBLEtBQUEsT0FBQSxFQUFBLEtBQ0EsSUFBQSxLQUFBLEtBQUEsT0FBQSxFQUFBLElBRUEsTUFDQSxPQUFBLEtBQUEsT0FBQSxLQUFBLE9BQUEsS0FBQSxLQUFBLElBQUEsT0FJQSxRQVpBLE9BNEJBLFFBQUEsZUFBQSxTQUNBLEdBQUEsWUFBQSxTQUFBLFNBQUEsUUFBQSxTQUVBLE9BQUEsVUFBQSxNQUdBLE1BRkEsY0FBQSxXQUFBLGFBQUEsVUFFQSxLQUNBLFdBQUEsVUFBQSxRQUFBLEtBR0EsWUFlQSxRQUFBLGVBQUEsS0FBQSxRQUFBLEtBQ0EsTUFBQSxZQUFBLEtBQ0EsSUFBQSxLQUFBLFVBRUEsUUFBQSxJQUFBLFNBQUEsSUFDQSxLQUFBLEdBQUEsS0FBQSxXQUdBLE1BSUEsUUFBQSxXQUFBLFFBQ0EsTUFBQSxTQUFBLEtBQUEsSUFBQSxPQVVBLFFBQUEsaUJBQ0EsR0FBQSxZQUFBLG1CQUNBLFNBQUEsYUFDQSxrQkFBQSxlQUNBLCtCQUFBLGVBQUEsa0NBdUJBLFNBQUEsS0FBQSxVQUVBLG1CQUFBLFNBQUEsTUFPQSxNQU5BLFVBQUEsUUFFQSxLQUFBLEtBQUEsUUFBQSxrQkFBQSxJQUNBLFdBQUEsS0FBQSxPQUFBLFNBQUEsS0FBQSxRQUNBLEtBQUEsU0FBQSxRQUVBLE9BSUEsa0JBQUEsU0FBQSxHQUNBLE9BQUEsU0FBQSxJQUFBLE9BQUEsSUFBQSxPQUFBLEdBQUEsRUFBQSxPQUFBLEtBSUEsU0FDQSxRQUNBLE9BQUEscUNBRUEsS0FBQSxZQUFBLCtCQUNBLElBQUEsWUFBQSwrQkFDQSxNQUFBLFlBQUEsZ0NBR0EsZUFBQSxhQUNBLGVBQUEsZ0JBR0EsZUFBQSxDQW9CQSxNQUFBLGNBQUEsU0FBQSxPQUNBLE1BQUEsV0FBQSxRQUNBLGdCQUFBLE1BQ0EsTUFFQSxjQU9BLElBQUEsc0JBQUEsS0FBQSxlQUVBLE1BQUEsTUFBQSxlQUFBLFdBQUEsZ0JBQUEsYUFBQSxLQUFBLFlBQ0EsU0FBQSxhQUFBLFNBQUEsY0FBQSxXQUFBLEdBQUEsV0FxZkEsUUFBQSxPQUFBLGVBcUVBLFFBQUEsbUJBQUEsVUFFQSxHQUFBLE1BQUEsVUFBQSxVQUNBLEtBQUEsY0FBQSxTQUFBLEtBQUEsU0FBQSxRQUFBLE9BQUEsb0JBRUEsT0FBQSxXQUFBLFNBQUEsUUFDQSxLQUNBLEdBQUEsT0FBQSxNQUdBLFFBQUEsY0FBQSxRQXlCQSxRQUFBLGFBQUEsU0FDQSxHQUFBLGNBRUEsU0FBQSxRQUFBLFNBQUEsU0FBQSxRQUNBLFdBQUEsWUFDQSxjQUFBLFdBQ0EsTUFBQSxjQUNBLFFBQUEsUUFBQSxvQkFFQSxTQUFBLFdBakNBLEdBRUEsZUFBQSx1QkFBQSxjQUZBLFdBQUEsU0FBQSxRQUNBLFdBQUEsVUFBQSxPQUFBLFFBR0EsWUFBQSxVQUFBLFdBQUEsT0FBQSxXQUFBLFVBQUEsT0FBQSxTQUdBLHlCQUNBLElBQUEsZ0JBQUEsWUFBQSxDQUNBLHVCQUFBLFVBQUEsY0FFQSxLQUFBLGdCQUFBLFlBQ0EsR0FBQSxVQUFBLGlCQUFBLHVCQUNBLFFBQUEsd0JBSUEsWUFBQSxlQUFBLFdBQUEsZUFLQSxNQURBLGFBQUEsWUFDQSxXQXJHQSxHQUFBLFNBQ0EsT0FBQSxNQUNBLGlCQUFBLFNBQUEsaUJBQ0Esa0JBQUEsU0FBQSxtQkFFQSxRQUFBLGFBQUEsY0FFQSxRQUFBLE9BQUEsZUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLE9BQUEsVUFBQSxPQUFBLE9BRUEsSUFBQSxlQUFBLFNBQUEsUUFDQSxRQUFBLE9BQUEsT0FDQSxJQUFBLFNBQUEsY0FBQSxPQUFBLEtBQUEsY0FBQSxTQUFBLE9BQUEsaUJBZ0JBLE9BYkEsYUFBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLE1BQUEsUUFDQSxpQkFBQSxVQUFBLGVBQ0EsU0FBQSxVQUtBLFlBQUEsT0FBQSxtQkFBQSxZQUFBLFNBQUEsbUJBQ0EsT0FBQSxnQkFBQSxTQUFBLGlCQUlBLFFBQUEsT0FBQSxRQUFBLFNBQUEsS0FBQSxrQkFBQSxvQkFHQSxPQUFBLGNBQUEsV0FDQSxRQUFBLEdBQUEsS0FBQSxPQVlBLEtBVEEsUUFBQSxxQkFBQSxTQUFBLGNBQ0EsWUFBQSxTQUFBLFlBQUEsZUFDQSxNQUFBLFFBQUEsWUFBQSxRQUFBLFlBQUEsZUFFQSxZQUFBLFVBQUEsWUFBQSxnQkFDQSxNQUFBLEtBQUEsWUFBQSxTQUFBLFlBQUEsaUJBSUEsTUFBQSxRQUFBLENBQ0EsR0FBQSxRQUFBLE1BQUEsUUFDQSxTQUFBLE1BQUEsT0FFQSxTQUFBLFFBQUEsS0FBQSxPQUFBLFVBaUJBLE1BZEEsU0FBQSxRQUFBLFNBQUEsSUFJQSxNQUhBLFNBQUEsS0FBQSxTQUFBLFVBQ0EsR0FBQSxTQUFBLEtBQUEsU0FBQSxPQUFBLFNBQUEsUUFBQSxVQUVBLFNBR0EsUUFBQSxNQUFBLFNBQUEsSUFJQSxNQUhBLFNBQUEsS0FBQSxLQUFBLFNBQUEsVUFDQSxHQUFBLFNBQUEsS0FBQSxTQUFBLE9BQUEsU0FBQSxRQUFBLFVBRUEsU0FHQSxRQWtLQSxRQUFBLHNCQUNBLFFBQUEsVUFBQSxTQUFBLE1BQ0EsTUFBQSxNQUFBLFNBQUEsSUFBQSxRQUNBLE1BQUEsT0FBQSxPQUFBLFlBQ0EsT0FBQSxLQUNBLElBQUEsVUFPQSxRQUFBLDhCQUNBLFFBQUEsVUFBQSxTQUFBLE1BQ0EsTUFBQSxNQUFBLFNBQUEsSUFBQSxLQUFBLFFBQ0EsTUFBQSxPQUFBLE9BQUEsWUFDQSxPQUFBLEtBQ0EsSUFBQSxJQUNBLEtBQUEsV0FhQSxRQUFBLFNBQUEsT0FBQSxRQUFBLFlBK0RBLFFBQUEsTUFBQSxPQUFBLFNBQUEsY0FBQSxZQVVBLFFBQUEsc0JBQ0EsZUFBQSxTQUFBLE9BQUEsY0FBQSxZQVZBLFFBQ0EsVUFBQSxRQUNBLE1BQUEsSUFBQSxLQUFBLE9BQUEsU0FBQSxhQUFBLGVBQUEsYUFHQSxNQUFBLE9BQUEsTUFRQSxjQUNBLFdBQUEsWUFBQSxxQkFFQSxxQkFDQSxXQUFBLFNBQUEsV0FBQSxVQVFBLFFBQUEsZ0JBQUEsU0FBQSxPQUFBLFFBQUEsWUFFQSxPQUFBLEtBQUEsSUFBQSxPQUFBLElBRUEsVUFBQSxRQUFBLFNBQUEsUUFBQSxTQUFBLFNBQ0EsS0FBQSxTQUNBLE9BQUEsT0FDQSxRQUFBLGNBQUEsU0FDQSxPQUFBLE9BQ0EsV0FBQSxhQUtBLFFBQUEsb0JBQ0EsR0FBQSxLQUFBLE1BQUEsZ0JBQUEsUUFBQSxPQUNBLE1BQUEsS0FBQSxNQUFBLGdCQUFBLE9BQUEsSUFBQSxHQXhHQSxHQUVBLE9BQ0EsV0FIQSxTQUFBLEdBQUEsUUFDQSxRQUFBLFNBQUEsUUFHQSxJQUFBLFNBQUEsT0FBQSxJQUFBLE9BQUEsT0FhQSxJQVhBLE1BQUEsZ0JBQUEsS0FBQSxRQUNBLFFBQUEsS0FBQSxpQkFBQSxtQkFHQSxPQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsU0FBQSxHQUNBLFFBQUEsT0FBQSxRQUFBLFVBQUEsT0FBQSxTQUNBLE1BQUEsU0FBQSxPQUFBLE9BQUEsT0FBQSxNQUNBLFNBQUEsU0FBQSxPQUFBLFNBQUEsTUFDQSxjQUdBLE1BRUEsR0FEQSxXQUFBLE1BQUEsSUFBQSxLQUNBLFVBQUEsWUFBQSxDQUNBLEdBQUEsY0FBQSxZQUdBLE1BREEsWUFBQSxLQUFBLGlCQUFBLGtCQUNBLFVBR0EsU0FBQSxZQUNBLGVBQUEsV0FBQSxHQUFBLFdBQUEsR0FBQSxZQUFBLFdBQUEsSUFBQSxXQUFBLElBRUEsZUFBQSxXQUFBLE9BQUEsVUFLQSxPQUFBLElBQUEsSUFBQSxRQU9BLElBQUEsWUFBQSxZQUFBLENBQ0EsR0FBQSxXQUFBLGdCQUFBLE9BQUEsS0FDQSxTQUFBLFVBQUEsT0FBQSxnQkFBQSxTQUFBLGdCQUNBLFNBQ0EsYUFDQSxXQUFBLE9BQUEsZ0JBQUEsU0FBQSxnQkFBQSxXQUdBLGFBQUEsT0FBQSxPQUFBLElBQUEsUUFBQSxLQUFBLFdBQUEsT0FBQSxRQUNBLE9BQUEsZ0JBQUEsT0FBQSxjQUdBLE1BQUEsU0F3REEsUUFBQSxVQUFBLElBQUEsUUFDQSxJQUFBLE9BQUEsTUFBQSxJQUNBLElBQUEsU0FvQkEsT0FuQkEsZUFBQSxPQUFBLFNBQUEsTUFBQSxLQUNBLE9BQUEsT0FBQSxZQUFBLFNBQ0EsUUFBQSxTQUFBLE9BQUEsUUFFQSxRQUFBLE1BQUEsU0FBQSxHQUNBLFNBQUEsS0FFQSxFQURBLE9BQUEsR0FDQSxFQUFBLGNBRUEsT0FBQSxJQUdBLE1BQUEsS0FBQSxlQUFBLEtBQUEsSUFDQSxlQUFBLFNBR0EsTUFBQSxPQUFBLElBQ0EsTUFBQSxJQUFBLElBQUEsUUFBQSxLQUFBLElBQUEsS0FBQSxNQUFBLEtBQUEsTUFFQSxJQTMzQkEsR0FBQSxjQUFBLGNBQUEsU0FPQSx1QkE4c0JBLE9BNXNCQSxTQUFBLHFCQUFBLFNBQUEsb0JBQ0EscUJBQUEsUUFBQSxTQUFBLG9CQUNBLFVBQUEsSUFBQSxvQkFBQSxVQUFBLE9BQUEsdUJBaW1CQSxNQUFBLG1CQWtEQSxtQkFBQSxNQUFBLFNBQUEsT0FBQSxTQXdDQSwyQkFBQSxPQUFBLE1BQUEsU0FZQSxNQUFBLFNBQUEsU0FHQSxRQTJLQSxRQUFBLFdBQUEsUUFJQSxHQUFBLEdBQUEsUUFBQSxPQUFBLE1BQUEsMkNBQ0EsT0FBQSxnQkFDQSxNQUFBLElBQUEsUUFBQSxjQUFBLG9CQUNBLElBQUEsT0FBQSxlQUNBLE1BQUEsSUFBQSxRQUFBLGNBR0EsTUFBQSxRQUFBLGdCQUFBLFFBQUEsaURBbUJBLFFBQUEsd0JBQ0EsS0FBQSxNQUFBLFdBQUEsVUFBQSxZQUFBLFNBQUEsU0FBQSxRQUFBLFdBQ0EsTUFBQSxtQkFBQSxTQUFBLFVBQUEsU0FBQSxNQUFBLFFBQUEsUUFBQSxVQUFBLFVBQUEsTUFJQSxRQUFBLG1CQUFBLFNBQUEsVUFBQSxjQUFBLFVBQUEsYUFnSUEsUUFBQSxVQUFBLElBQUEsV0FBQSxNQUlBLEdBQUEsUUFBQSxZQUFBLGNBQUEsVUFBQSxTQUFBLElBNkJBLE9BNUJBLFFBQUEsS0FBQSxrQkFDQSxPQUFBLElBQUEsSUFDQSxPQUFBLE9BQUEsRUFFQSxTQUFBLFNBQUEsT0FDQSxzQkFBQSxPQUFBLE9BQUEsVUFDQSxzQkFBQSxPQUFBLFFBQUEsVUFDQSxZQUFBLEtBQUEsWUFBQSxRQUNBLE9BQUEsSUFDQSxJQUFBLFFBQUEsR0FDQSxLQUFBLFNBRUEsU0FDQSxTQUFBLE1BQUEsTUFBQSxVQUFBLFlBQUEsU0FDQSxPQUFBLEtBQUEsVUFFQSxLQUFBLE1BQUEsS0FDQSxPQUFBLFVBQUEsTUFBQSxLQUFBLElBQUEsS0FHQSxNQUNBLEtBQUEsT0FBQSxPQUlBLG1CQUFBLE9BQUEsT0FBQSxVQUNBLG1CQUFBLE9BQUEsUUFBQSxVQUNBLFlBQUEsS0FBQSxZQUFBLFFBQ0EsU0FoS0EsR0FBQSxTQUFBLEVBR0EsT0FBQSxVQUFBLE9BQUEsSUFBQSxLQUFBLFNBQUEsUUFBQSxRQUFBLGdCQUFBLGNBaUdBLFFBQUEsa0JBQ0EsT0FBQSxRQUNBLFdBQUEsWUFDQSxLQUFBLElBQUEsUUFHQSxRQUFBLGlCQUFBLFNBQUEsT0FBQSxTQUFBLGNBQUEsWUFFQSxXQUFBLGNBQUEsT0FBQSxXQUNBLFVBQUEsSUFBQSxLQUtBLElBQUEsU0FDQSxPQUFBLFNBQUEsSUFBQSxRQUFBLFdBQUEsS0FBQSxTQUFBLElBQUEsR0FJQSxPQUFBLE9BQUEsT0FBQSxJQUFBLE9BQ0EsV0FBQSxZQUFBLEdBRUEsU0FBQSxPQUFBLFNBQUEsY0FBQSxZQUNBLFNBQUEsNkJBQUEsTUF2SEEsR0FBQSxPQUlBLElBSEEsU0FBQSwrQkFDQSxJQUFBLEtBQUEsU0FBQSxNQUVBLFNBQUEsVUFBQSxRQUFBLENBQ0EsR0FBQSxZQUFBLEtBQUEsVUFBQSxXQUFBLFNBQUEsR0FDQSxXQUFBLFlBQUEsU0FBQSxNQUNBLFVBQUEsWUFBQSxLQUFBLEtBQ0EsVUFBQSxZQUFBLFFBQUEsRUFHQSxJQUFBLFdBQUEsU0FBQSxJQUFBLFFBQUEsZ0JBQUEscUJBQUEsWUFDQSxXQUFBLFNBQUEsT0FBQSxNQUNBLGdCQUFBLFNBQUEsT0FBQSxVQUFBLFlBQUEsS0FBQSxHQUFBLE1BQ0EsVUFBQSxZQUFBLFdBRUEsQ0FFQSxHQUFBLEtBQUEsVUFBQSxPQW1EQSxJQWpEQSxJQUFBLEtBQUEsT0FBQSxLQUFBLEdBQ0EsUUFBQSxRQUFBLFNBQUEsTUFBQSxLQUNBLFVBQUEsUUFDQSxJQUFBLGlCQUFBLElBQUEsU0FPQSxJQUFBLG1CQUFBLFdBUUEsR0FBQSxLQUFBLEdBQUEsSUFBQSxXQUFBLENBQ0EsR0FBQSxpQkFBQSxLQUNBLFNBQUEsS0FDQSxXQUFBLEVBRUEsVUFBQSxVQUNBLGdCQUFBLElBQUEsd0JBSUEsU0FBQSxZQUFBLEtBQUEsSUFBQSxTQUFBLElBQUEsY0FLQSxTQUFBLFNBQUEsR0FBQSxPQUNBLFdBQUEsSUFBQSxZQUdBLGdCQUFBLFNBQ0EsUUFBQSxJQUFBLE9BQ0EsU0FDQSxnQkFDQSxjQUlBLGtCQUNBLElBQUEsaUJBQUEsR0FHQSxhQUNBLElBQ0EsSUFBQSxhQUFBLGFBQ0EsTUFBQSxHQVFBLEdBQUEsU0FBQSxhQUNBLEtBQUEsR0FLQSxJQUFBLEtBQUEsTUFBQSxNQUdBLEdBQUEsUUFBQSxFQUNBLEdBQUEsV0FBQSxjQUFBLGVBQUEsYUFDQSxlQUFBLFVBQ0EsUUFBQSxLQUFBLGlCQXlHQSxRQUFBLHdCQUNBLEdBQUEsYUFBQSxLQUNBLFVBQUEsSUFXQSxNQUFBLFlBQUEsU0FBQSxPQUNBLE1BQUEsUUFDQSxZQUFBLE1BQ0EsTUFFQSxhQWFBLEtBQUEsVUFBQSxTQUFBLE9BQ0EsTUFBQSxRQUNBLFVBQUEsTUFDQSxNQUVBLFdBS0EsS0FBQSxNQUFBLFNBQUEsb0JBQUEsT0FBQSxTQUFBLE9BQUEsa0JBQUEsTUFNQSxRQUFBLFFBQUEsSUFDQSxNQUFBLFNBQUEsR0FpR0EsUUFBQSxjQUFBLEtBQUEsbUJBQUEsZUFBQSxjQW1IQSxRQUFBLGNBQUEsTUFDQSxNQUFBLE1BQUEsUUFBQSxtQkFBQSxhQUNBLFFBQUEsaUJBQUEsV0FHQSxRQUFBLDJCQUFBLE9BQ0EsSUFDQSxNQUFBLFdBQUEsU0FBQSxRQUNBLE1BQUEsS0FDQSxHQUFBLFFBQUEsbUJBQUEsU0FBQSw4QkFBQSxLQUNBLElBQUEsV0FDQSxtQkFBQSxTQTdIQSxlQUFBLFlBV0EsS0FWQSxHQUFBLFlBQ0EsU0FLQSxJQUpBLE1BQUEsRUFDQSxlQUNBLFlBQ0EsV0FBQSxLQUFBLE9BRUEsVUFDQSx1QkFFQSxXQUFBLE9BQUEsQ0FDQSxHQUFBLEtBQUEsV0FBQSxLQUFBLFFBQUEsWUFBQSxTQUNBLEtBQUEsU0FBQSxLQUFBLFFBQUEsVUFBQSxXQUFBLG9CQVVBLENBRUEsUUFBQSxZQUNBLE9BQUEsS0FBQSxhQUFBLEtBQUEsVUFBQSxRQUVBLE9BZEEsUUFBQSxZQUNBLE9BQUEsS0FBQSxhQUFBLEtBQUEsVUFBQSxNQUFBLGNBRUEsSUFBQSxLQUFBLFVBQUEsV0FBQSxrQkFBQSxVQUNBLFlBQUEsS0FBQSxLQUNBLFNBQUEsS0FBQSxPQUFBLElBQUEsNEJBQ0EsTUFBQSxTQUFBLGdCQUNBLG9CQUFBLEtBQUEsT0FBQSxRQUNBLE9BQUEsS0FBQSxJQWdCQSxHQUFBLGdCQUFBLE9BQUEsT0FBQSxFQUNBLEtBQUEsb0JBQUEsV0FDQSx5TUFFQSxLQUdBLEtBQUEsb0JBQUEsWUFBQSxPQUFBLENBQ0EsR0FBQSxTQUFBLFNBQUEsUUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsWUFBQSxPQUFBLEdBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxjQUFBLFlBQUEsT0FBQSxJQUFBLE1BQ0EsUUFBQSxvQkFBQSxJQUFBLE9BQUEsR0FFQSxNQUFBLFFBQUEsS0FBQSxLQUdBLFNBQUEsU0FBQSxPQUNBLE1BQUEsZ0JBQ0EsS0FBQSxXQUFBLGVBQUEsT0FDQSxLQUFBLFFBQUEsUUFHQSxVQUFBLFNBQUEsT0FDQSxHQUFBLE1BQUEsTUFDQSxNQUFBLEVBRUEsY0FBQSxRQUNBLElBQUEsU0FDQSxLQUVBLEtBQUEsU0FDQSxNQUFBLEdBQUEsS0FDQSxNQUVBLFNBQ0EsTUFBQSxPQUFBLE9BSUEsTUFBQSxPQUdBLE9BQUEsUUFBQSxTQUFBLFNBQ0EsR0FBQSxHQUFBLEVBQ0EsR0FBQSxZQUFBLE9BQ0EsT0FBQSxHQUFBLE9BQUEsR0FFQSxLQUNBLEtBQUEsR0FBQSxFQUFBLElBQ0EsT0FBQSxHQUFBLFNBQUEsR0FBQSxRQUdBLE9BQUEsU0FBQSxRQUNBLE1BQUEsS0FDQSxHQUFBLFFBQUEsbUJBQUEsU0FBQSw4QkFBQSxLQUNBLElBQUEsV0FDQSxtQkFBQSxXQUtBLElBQUEsS0FDQSxZQUFBLFlBQ0EsZ0JBQUEsU0FBQSxNQUFBLFNBQUEsZ0JBQ0EsR0FBQSxVQUNBLE9BQUEsT0FBQSxZQUFBLFNBQUEsU0FBQSxPQUFBLFdBQ0EsR0FBQSxXQUFBLFFBQUEsT0FDQSxZQUFBLFdBQ0EsU0FBQSxLQUFBLEtBQUEsVUFBQSxTQUFBLFVBQUEsVUFBQSxVQUFBLE9BRUEsVUFBQSxXQUNBLG9CQXJOQSxHQUFBLG1CQUFBLFlBQUEsT0FDQSxnQkFBQSxVQUFBLE9BQ0EsbUJBQUEsR0FBQSxRQUFBLFlBQUEsUUFBQSxLQUFBLFFBQUEsS0FDQSxpQkFBQSxHQUFBLFFBQUEsVUFBQSxRQUFBLEtBQUEsUUFBQSxJQXVRQSxPQXBCQSxjQUFBLFlBQUEsV0FDQSxNQUFBLGNBZUEsYUFBQSxVQUFBLFdBQ0EsTUFBQSxZQUdBLGVBSUEsUUFBQSxxQkFDQSxLQUFBLE1BQUEsYUFBQSxVQUFBLEtBQUEsTUFDQSxTQUFBLFdBQUEsUUFBQSxHQUFBLEtBZ0lBLFFBQUEsVUFBQSxHQUFBLE1BQUEsTUFBQSxhQUNBLEdBQUEsYUFBQSxRQUFBLFlBQ0EsY0FBQSxRQUFBLGNBQ0EsVUFBQSxFQUNBLFVBQUEsVUFBQSxlQUFBLFlBQ0EsVUFBQSxVQUFBLElBQUEsSUFBQSxRQUNBLFFBQUEsU0FBQSxPQXFCQSxPQW5CQSxPQUFBLFVBQUEsT0FBQSxNQUFBLEVBRUEsUUFBQSxLQUFBLEtBQUEsS0FBQSxJQUVBLFFBQUEsYUFBQSxZQUFBLFdBQ0EsU0FBQSxPQUFBLGFBRUEsTUFBQSxHQUFBLFdBQUEsUUFDQSxTQUFBLFFBQUEsV0FDQSxjQUFBLFFBQUEsb0JBQ0EsV0FBQSxRQUFBLGVBR0EsV0FBQSxXQUFBLFVBRUEsT0FFQSxVQUFBLFFBQUEsY0FBQSxTQUVBLFFBMUpBLEdBQUEsYUFrTEEsT0FWQSxVQUFBLE9BQUEsU0FBQSxTQUNBLE1BQUEsVUFBQSxRQUFBLGVBQUEsWUFDQSxVQUFBLFFBQUEsY0FBQSxPQUFBLFlBQ0EsUUFBQSxjQUFBLFFBQUEsb0JBQ0EsV0FBQSxRQUFBLGVBQ0EsSUFFQSxHQUdBLFdBY0EsUUFBQSxtQkFDQSxLQUFBLEtBQUEsV0FDQSxPQUNBLEdBQUEsUUFFQSxnQkFDQSxZQUFBLElBQ0EsVUFBQSxJQUNBLFdBRUEsT0FBQSxFQUNBLFFBQUEsRUFDQSxRQUFBLEVBQ0EsT0FBQSxHQUNBLE9BQUEsR0FDQSxPQUFBLElBQ0EsT0FBQSxHQUNBLE1BQUEsRUFDQSxPQUFBLElBRUEsT0FBQSxFQUNBLFFBQUEsRUFDQSxRQUFBLEVBQ0EsT0FBQSxJQUNBLE9BQUEsR0FDQSxPQUFBLEtBQ0EsT0FBQSxJQUNBLE1BQUEsRUFDQSxPQUFBLElBR0EsYUFBQSxLQUdBLGtCQUNBLE1BQ0Esd0ZBQ0EsTUFBQSxLQUNBLFdBQUEsa0RBQUEsTUFBQSxLQUNBLElBQUEsMkRBQUEsTUFBQSxLQUNBLFNBQUEsOEJBQUEsTUFBQSxLQUNBLE9BQUEsS0FBQSxNQUNBLE9BQUEscUJBQ0EsUUFBQSxnQkFDQSxTQUFBLGtCQUNBLFNBQUEsWUFDQSxXQUFBLFdBQ0EsVUFBQSxTQUNBLFdBQUEsWUFDQSxVQUFBLFVBR0EsVUFBQSxTQUFBLEtBQ0EsTUFBQSxLQUFBLElBQ0EsTUFFQSxXQWlCQSxRQUFBLFlBQUEsTUFJQSxJQUhBLEdBQUEsVUFBQSxLQUFBLE1BQUEsS0FDQSxFQUFBLFNBQUEsT0FFQSxLQUNBLFNBQUEsR0FBQSxpQkFBQSxTQUFBLEdBR0EsT0FBQSxVQUFBLEtBQUEsS0FHQSxRQUFBLGtCQUFBLFlBQUEsWUFBQSxTQUNBLEdBQUEsV0FBQSxXQUFBLFlBQUEsUUFFQSxhQUFBLFdBQUEsVUFBQSxTQUNBLFlBQUEsT0FBQSxVQUFBLFNBQ0EsWUFBQSxPQUFBLElBQUEsVUFBQSxPQUFBLGNBQUEsVUFBQSxXQUFBLEtBSUEsUUFBQSxhQUFBLFlBQUEsWUFBQSxTQUNBLEdBQUEsVUFBQSxNQUFBLFlBQUEsT0FBQSxFQUNBLFlBQ0EsWUFBQSxJQUFBLFlBRUEsSUFBQSxPQUFBLFdBQUEsWUFBQSxRQUNBLGFBQUEsT0FBQSxtQkFBQSxVQUFBLE1BQUEsTUFBQSxTQUFBLE9BQUEsR0FDQSxNQUFBLFNBQUEsVUFBQSxHQUFBLE1BQUEsVUFDQSxZQUFBLFNBQUEsY0FBQSxNQUFBLFFBQ0EsWUFBQSxPQUFBLG1CQUFBLE1BQUEsTUFHQSxZQUFBLFFBQUEsS0FBQSxZQUFBLE9BQUEsT0FBQSxLQUNBLFlBQUEsT0FBQSxJQUFBLFlBQUEsUUFZQSxRQUFBLFlBQUEsTUFBQSxPQUNBLE1BQUEsS0FBQSxNQUFBLFFBQUEsT0FDQSxNQUFBLE9BQUEsTUFBQSxRQURBLE9BTUEsUUFBQSxXQUFBLEtBQ0EsR0FBQSxPQUFBLElBQUEsUUFBQSxJQUNBLE9BQUEsSUFBQSxNQUFBLElBQUEsSUFBQSxPQUFBLEVBQUEsT0FJQSxRQUFBLFdBQUEsS0FDQSxNQUFBLEtBQUEsT0FBQSxFQUFBLFVBQUEsS0FBQSxZQUFBLEtBQUEsR0FJQSxRQUFBLFlBQUEsS0FDQSxNQUFBLEtBQUEsVUFBQSxFQUFBLElBQUEsUUFBQSxJQUFBLElBQUEsUUFBQSxNQUFBLElBWUEsUUFBQSxrQkFBQSxRQUFBLFlBQ0EsS0FBQSxTQUFBLEVBQ0EsV0FBQSxZQUFBLEVBQ0EsSUFBQSxlQUFBLFVBQUEsUUFDQSxrQkFBQSxRQUFBLEtBQUEsU0FRQSxLQUFBLFFBQUEsU0FBQSxLQUNBLEdBQUEsU0FBQSxXQUFBLGNBQUEsSUFDQSxLQUFBLFNBQUEsU0FDQSxLQUFBLGlCQUFBLFdBQUEsZ0RBQUEsSUFDQSxjQUdBLGFBQUEsUUFBQSxLQUFBLFNBRUEsS0FBQSxTQUNBLEtBQUEsT0FBQSxLQUdBLEtBQUEsYUFPQSxLQUFBLFVBQUEsV0FDQSxHQUFBLFFBQUEsV0FBQSxLQUFBLFVBQ0EsS0FBQSxLQUFBLE9BQUEsSUFBQSxpQkFBQSxLQUFBLFFBQUEsRUFFQSxNQUFBLE1BQUEsV0FBQSxLQUFBLFNBQUEsT0FBQSxJQUFBLE9BQUEsSUFBQSxLQUNBLEtBQUEsU0FBQSxjQUFBLEtBQUEsTUFBQSxPQUFBLElBR0EsS0FBQSxlQUFBLFNBQUEsSUFBQSxTQUNBLEdBQUEsU0FBQSxNQUFBLFFBQUEsR0FJQSxNQURBLE1BQUEsS0FBQSxRQUFBLE1BQUEsS0FDQSxDQUVBLElBQUEsUUFBQSxXQUNBLFlBaUJBLFFBZkEsT0FBQSxXQUFBLFFBQUEsUUFBQSxXQUNBLFdBQUEsT0FFQSxjQURBLE9BQUEsV0FBQSxXQUFBLFdBQUEsVUFDQSxlQUFBLFdBQUEsSUFBQSxTQUFBLFFBRUEsUUFBQSxhQUVBLE9BQUEsV0FBQSxjQUFBLFFBQUEsVUFDQSxhQUFBLGNBQUEsT0FDQSxlQUFBLElBQUEsTUFDQSxhQUFBLGVBRUEsY0FDQSxLQUFBLFFBQUEsZ0JBRUEsY0FjQSxRQUFBLHFCQUFBLFFBQUEsWUFDQSxHQUFBLGVBQUEsVUFBQSxRQUVBLGtCQUFBLFFBQUEsS0FBQSxTQVFBLEtBQUEsUUFBQSxTQUFBLEtBNkJBLFFBQUEsd0JBQUEsS0FBQSxJQUFBLE1BS0EsR0FFQSx1QkFGQSxtQkFBQSxpQkFVQSxPQUxBLEtBQUEsSUFBQSxRQUFBLFFBQ0EsSUFBQSxJQUFBLFFBQUEsS0FBQSxLQUlBLG1CQUFBLEtBQUEsS0FDQSxNQUdBLHNCQUFBLG1CQUFBLEtBQUEsTUFDQSxzQkFBQSxzQkFBQSxHQUFBLE1BaERBLEdBQUEsZ0JBQUEsV0FBQSxRQUFBLE1BQUEsV0FBQSxjQUFBLEtBQ0EsZUFBQSxLQUFBLGVBQUEsT0FBQSxHQUNBLFdBQUEsV0FBQSxnQkFDQSxLQUFBLFFBQ0EsZUFDQSxFQUVBLEtBQUEsU0FBQSxnQkFDQSxLQUFBLGlCQUFBLFdBQUEsZ0RBQUEsSUFDQSxXQUVBLGFBQUEsZUFBQSxLQUFBLFNBRUEsS0FBQSxPQUFBLHVCQUFBLEtBQUEsT0FBQSxlQUFBLFNBRUEsS0FBQSxhQXlDQSxLQUFBLFVBQUEsV0FDQSxHQUFBLFFBQUEsV0FBQSxLQUFBLFVBQ0EsS0FBQSxLQUFBLE9BQUEsSUFBQSxpQkFBQSxLQUFBLFFBQUEsRUFFQSxNQUFBLE1BQUEsV0FBQSxLQUFBLFNBQUEsT0FBQSxJQUFBLE9BQUEsSUFBQSxLQUNBLEtBQUEsU0FBQSxTQUFBLEtBQUEsTUFBQSxXQUFBLEtBQUEsTUFBQSxLQUdBLEtBQUEsZUFBQSxTQUFBLEtBQ0EsTUFBQSxXQUFBLFVBQUEsVUFBQSxNQUNBLEtBQUEsUUFBQSxNQUNBLElBRUEsR0FjQSxRQUFBLDRCQUFBLFFBQUEsWUFDQSxLQUFBLFNBQUEsRUFDQSxvQkFBQSxNQUFBLEtBQUEsVUFFQSxJQUFBLGVBQUEsVUFBQSxRQUVBLE1BQUEsZUFBQSxTQUFBLElBQUEsU0FDQSxHQUFBLFNBQUEsTUFBQSxRQUFBLEdBSUEsTUFEQSxNQUFBLEtBQUEsUUFBQSxNQUFBLEtBQ0EsQ0FHQSxJQUFBLGNBQ0EsTUFZQSxPQVZBLFVBQUEsVUFBQSxLQUNBLGFBQUEsS0FDQSxPQUFBLFdBQUEsY0FBQSxNQUNBLGFBQUEsUUFBQSxXQUFBLE9BQ0EsZ0JBQUEsSUFBQSxNQUNBLGFBQUEsZUFFQSxjQUNBLEtBQUEsUUFBQSxnQkFFQSxjQUdBLEtBQUEsVUFBQSxXQUNBLEdBQUEsUUFBQSxXQUFBLEtBQUEsVUFDQSxLQUFBLEtBQUEsT0FBQSxJQUFBLGlCQUFBLEtBQUEsUUFBQSxFQUVBLE1BQUEsTUFBQSxXQUFBLEtBQUEsU0FBQSxPQUFBLElBQUEsT0FBQSxJQUFBLEtBRUEsS0FBQSxTQUFBLFFBQUEsV0FBQSxLQUFBLE9BeU9BLFFBQUEsZ0JBQUEsVUFDQSxNQUFBLFlBQ0EsTUFBQSxNQUFBLFdBS0EsUUFBQSxzQkFBQSxTQUFBLFlBQ0EsTUFBQSxVQUFBLE9BQ0EsTUFBQSxhQUFBLE9BQ0EsS0FBQSxXQUVBLEtBQUEsVUFBQSxXQUFBLE9BQ0EsS0FBQSxZQUVBLE9BcUNBLFFBQUEscUJBQ0EsR0FBQSxZQUFBLEdBQ0EsV0FBQSxDQVNBLE1BQUEsV0FBQSxTQUFBLFFBQ0EsTUFBQSxXQUFBLFNBQ0EsV0FBQSxPQUNBLE1BRUEsWUFXQSxLQUFBLFVBQUEsU0FBQSxNQUNBLE1BQUEsV0FBQSxPQUNBLFVBQUEsS0FDQSxNQUVBLFdBK0JBLEtBQUEsTUFBQSxhQUFBLFdBQUEsV0FBQSxlQUNBLFNBQUEsV0FBQSxTQUFBLFNBQUEsY0FrSEEsUUFBQSxxQkFBQSxRQUNBLFdBQUEsV0FBQSx5QkFBQSxVQUFBLFNBQUEsUUFsSEEsR0FBQSxXQUNBLGFBR0EsUUFGQSxTQUFBLFNBQUEsV0FDQSxXQUFBLFNBQUEsS0FHQSxJQUFBLFVBQUEsQ0FDQSxJQUFBLFNBQ0EsS0FBQSxpQkFBQSxTQUNBLCtEQUVBLFNBQUEsV0FBQSxhQUFBLFVBQUEsS0FDQSxhQUFBLFNBQUEsUUFBQSxpQkFBQSwrQkFFQSxTQUFBLFVBQUEsWUFDQSxhQUFBLG1CQUVBLFdBQUEsR0FBQSxjQUFBLFFBQUEsSUFBQSxZQUNBLFVBQUEsZUFBQSxXQUFBLFdBRUEsSUFBQSxtQkFBQSwyQkFFQSxjQUFBLEdBQUEsUUFBQSxTQUFBLE9BSUEsSUFBQSxNQUFBLFVBQUEsTUFBQSxTQUFBLEdBQUEsTUFBQSxNQUFBLENBS0EsSUFIQSxHQUFBLEtBQUEsT0FBQSxNQUFBLFFBR0EsTUFBQSxVQUFBLElBQUEsS0FFQSxHQUFBLElBQUEsS0FBQSxhQUFBLE1BQUEsSUFBQSxJQUFBLFVBQUEsR0FBQSxNQUdBLElBQUEsU0FBQSxJQUFBLEtBQUEsUUFHQSxRQUFBLElBQUEsS0FBQSxTQUFBLElBQUEsS0FBQSxhQUVBLFVBQUEsVUFBQSwrQkFBQSxRQUFBLGFBR0EsUUFBQSxXQUFBLFFBQUEsU0FBQSxNQUlBLGtCQUFBLEtBQUEsV0FFQSxTQUFBLElBQUEsS0FBQSxXQUFBLE1BQUEsc0JBQ0EsVUFBQSxlQUFBLFFBQUEsV0FDQSxNQUFBLGlCQUVBLFVBQUEsVUFBQSxTQUFBLFFBQ0EsV0FBQSxTQUVBLE9BQUEsUUFBQSw2QkFBQSxPQVFBLFVBQUEsVUFBQSxZQUNBLFNBQUEsSUFBQSxVQUFBLFVBQUEsR0FJQSxTQUFBLFlBQUEsU0FBQSxRQUNBLFVBQUEsVUFBQSxTQUNBLFdBQUEsV0FBQSxXQUNBLEdBQUEsUUFBQSxVQUFBLFFBRUEsV0FBQSxRQUFBLFFBQ0EsV0FBQSxXQUFBLHVCQUFBLE9BQ0EsUUFBQSxrQkFDQSxVQUFBLFFBQUEsUUFDQSxTQUFBLElBQUEsU0FFQSxvQkFBQSxVQUdBLFdBQUEsU0FBQSxXQUFBLFlBS0EsSUFBQSxlQUFBLENBc0JBLE9BckJBLFlBQUEsT0FBQSxXQUNBLEdBQUEsUUFBQSxTQUFBLE1BQ0EsZUFBQSxVQUFBLFNBZ0JBLE9BZEEsZ0JBQUEsUUFBQSxVQUFBLFdBQ0EsZ0JBQ0EsV0FBQSxXQUFBLFdBQ0EsV0FBQSxXQUFBLHVCQUFBLFVBQUEsU0FBQSxRQUNBLGlCQUNBLFVBQUEsUUFBQSxTQUVBLFNBQUEsSUFBQSxVQUFBLFNBQUEsZ0JBQ0Esb0JBQUEsWUFJQSxVQUFBLFdBQUEsRUFFQSxnQkFHQSxZQW1EQSxRQUFBLGdCQUNBLEdBQUEsUUFBQSxFQUNBLEtBQUEsSUFTQSxNQUFBLGFBQUEsU0FBQSxNQUNBLE1BQUEsV0FBQSxPQUNBLE1BQUEsS0FDQSxNQUVBLE9BSUEsS0FBQSxNQUFBLFVBQUEsU0FBQSxTQXdEQSxRQUFBLGFBQUEsS0FVQSxNQVRBLGVBQUEsU0FDQSxJQUFBLE1BQ0EsSUFBQSxJQUFBLFNBQUEsS0FBQSxJQUFBLE1BQUEsUUFBQSxJQUFBLFNBQ0EsVUFBQSxJQUFBLFFBQUEsS0FBQSxJQUFBLE1BQ0EsSUFBQSxNQUNBLElBQUEsWUFDQSxJQUFBLElBQUEsUUFBQSxLQUFBLElBQUEsVUFBQSxJQUFBLElBQUEsT0FHQSxJQUdBLFFBQUEsWUFBQSxNQUNBLEdBQUEsU0FBQSxRQUFBLFlBQ0EsTUFBQSxRQUFBLE9BQUEsUUFBQSxLQUFBLEtBQ0EsVUFBQSxDQUlBLEtBQ0EsV0FBQSxNQUFBLE1BQ0EsTUFBQSxJQUVBLE1BQUEsVUFDQSxXQUNBLEdBQUEsUUFJQSxPQUhBLFNBQUEsVUFBQSxTQUFBLEtBQ0EsS0FBQSxLQUFBLFlBQUEsUUFFQSxNQUFBLE1BQUEsUUFBQSxPQU1BLFNBQUEsS0FBQSxNQUNBLE1BQUEsS0FBQSxNQUFBLEtBQUEsR0FBQSxPQTVGQSxPQVFBLElBQUEsV0FBQSxPQVNBLEtBQUEsV0FBQSxRQVNBLEtBQUEsV0FBQSxRQVNBLE1BQUEsV0FBQSxTQVNBLE1BQUEsV0FDQSxHQUFBLElBQUEsV0FBQSxRQUVBLE9BQUEsWUFDQSxPQUNBLEdBQUEsTUFBQSxLQUFBLGtCQXlFQSxRQUFBLHNCQUFBLEtBQUEsZ0JBQ0EsR0FBQSxxQkFBQSxNQUFBLHFCQUFBLE1BQ0EscUJBQUEsTUFBQSxxQkFBQSxNQUNBLGNBQUEsS0FDQSxLQUFBLGNBQUEsVUFDQSxrRkFDQSxlQUVBLE9BQUEsTUFHQSxRQUFBLGtCQUFBLElBQUEsZ0JBRUEsR0FBQSxJQUFBLENBQ0EsR0FBQSxJQUFBLGNBQUEsSUFDQSxLQUFBLGNBQUEsU0FDQSw2RUFDQSxlQUNBLElBQ0EsSUFBQSxTQUFBLElBQ0EsS0FBQSxjQUFBLGFBQ0EsK0VBQ0EsZUFDQSxJQUNBLElBQUEsV0FBQSxJQUFBLFVBQUEsSUFBQSxNQUFBLElBQUEsTUFBQSxJQUFBLE1BQ0EsS0FBQSxjQUFBLFVBQ0EsOEVBQ0EsZUFDQTtHQUNBLE1BQUEsT0FDQSxLQUFBLGNBQUEsVUFDQSwyRUFDQSxnQkFHQSxNQUFBLEtBT0EsUUFBQSxvQkFBQSxJQUFBLGdCQUNBLEdBQUEsSUFBQSxDQUNBLEdBQUEsSUFBQSxjQUFBLElBQ0EsS0FBQSxjQUFBLFNBQ0EsNkVBQ0EsZUFDQSxJQUFBLE1BQUEsTUFBQSxNQUFBLE9BQUEsTUFBQSxLQUNBLEtBQUEsY0FBQSxTQUNBLHdGQUNBLGlCQTZTQSxRQUFBLFlBQUEsS0FDQSxNQUFBLEtBQUEsU0F1Y0EsUUFBQSxRQUFBLElBQUEsS0FBQSxTQUFBLFNBQ0EsaUJBQUEsSUFBQSxRQUdBLEtBQUEsR0FEQSxLQUFBLFFBQUEsS0FBQSxNQUFBLEtBQ0EsRUFBQSxFQUFBLFFBQUEsT0FBQSxFQUFBLElBQUEsQ0FDQSxJQUFBLHFCQUFBLFFBQUEsUUFBQSxRQUNBLElBQUEsYUFBQSxpQkFBQSxJQUFBLEtBQUEsUUFDQSxlQUNBLGVBQ0EsSUFBQSxLQUFBLGFBRUEsSUFBQSxZQUtBLE1BSEEsS0FBQSxxQkFBQSxRQUFBLFFBQUEsU0FDQSxpQkFBQSxJQUFBLEtBQUEsU0FDQSxJQUFBLEtBQUEsU0FDQSxTQVVBLFFBQUEsaUJBQUEsS0FBQSxLQUFBLEtBQUEsS0FBQSxLQUFBLFNBT0EsTUFOQSxzQkFBQSxLQUFBLFNBQ0EscUJBQUEsS0FBQSxTQUNBLHFCQUFBLEtBQUEsU0FDQSxxQkFBQSxLQUFBLFNBQ0EscUJBQUEsS0FBQSxTQUVBLFNBQUEsTUFBQSxRQUNBLEdBQUEsU0FBQSxRQUFBLE9BQUEsZUFBQSxNQUFBLE9BQUEsS0FFQSxPQUFBLE9BQUEsUUFBQSxTQUNBLFFBQUEsUUFBQSxNQUVBLEtBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxRQUFBLE1BRUEsS0FDQSxNQUFBLFFBQUEsV0FDQSxRQUFBLFFBQUEsTUFFQSxLQUNBLE1BQUEsUUFBQSxXQUNBLFFBQUEsUUFBQSxNQUVBLEtBQ0EsTUFBQSxRQUFBLFVBQ0EsUUFBQSxRQUFBLE1BRkEsU0FKQSxTQUpBLFNBSkEsVUFvQkEsUUFBQSxVQUFBLEtBQUEsUUFBQSxTQUNBLEdBQUEsSUFBQSxjQUFBLEtBRUEsSUFBQSxHQUFBLE1BQUEsR0FFQSxJQUFBLFVBQUEsS0FBQSxNQUFBLEtBQ0EsZUFBQSxTQUFBLE1BR0EsSUFBQSxRQUFBLElBRUEsR0FEQSxFQUFBLGVBQ0EsZ0JBQUEsU0FBQSxHQUFBLFNBQUEsR0FBQSxTQUFBLEdBQUEsU0FBQSxHQUFBLFNBQUEsR0FBQSxTQUVBLFNBQUEsTUFBQSxRQUNBLEdBQUEsS0FBQSxFQUFBLENBQ0EsR0FDQSxLQUFBLGdCQUFBLFNBQUEsS0FBQSxTQUFBLEtBQUEsU0FBQSxLQUFBLFNBQUEsS0FDQSxTQUFBLEtBQUEsU0FBQSxNQUFBLFFBRUEsT0FBQSxVQUNBLE1BQUEsVUFDQSxlQUFBLEVBQ0EsT0FBQSxVQUdBLENBQ0EsR0FBQSxNQUFBLEVBQ0EsU0FBQSxTQUFBLFNBQUEsSUFBQSxPQUNBLHFCQUFBLElBQUEsU0FDQSxNQUFBLHVDQUNBLE1BRUEsSUFFQSwwQkFBQSxJQUFBLFlBQUEsSUFBQSxJQUFBLFFBRUEsTUFBQSxXQUdBLElBQUEsZ0JBQUEsR0FBQSxVQUFBLElBQUEsSUFBQSxLQUVBLGdCQUFBLFNBQUEsUUFBQSxNQUVBLEdBQUEsZUFRQSxNQUxBLElBQUEsY0FBQSxFQUNBLEdBQUEsT0FBQSxTQUFBLEtBQUEsT0FDQSxNQUFBLFFBQUEsS0FBQSxLQUFBLE1BQUEsT0FFQSxjQUFBLE1BQUEsR0FDQSxHQXNEQSxRQUFBLGtCQUNBLEdBQUEsT0FBQSxZQUVBLGVBQ0EsS0FBQSxFQUlBLE1BQUEsTUFBQSxVQUFBLFdBQUEsU0FBQSxRQUFBLFVBR0EsUUFBQSxzQkFBQSxLQUNBLEdBQUEsU0FBQSxHQVdBLE9BVEEsS0FBQSxlQUNBLFFBQUEsU0FBQSxLQUFBLFFBQ0EsTUFBQSxLQUFBLEtBQUEsU0FFQSxRQUFBLFFBQUEsSUFBQSxRQUNBLFFBQUEsU0FBQSxJQUFBLFNBQ0EsUUFBQSxPQUFBLElBQUEsUUFHQSxRQThDQSxRQUFBLHlCQUFBLE9BQUEsTUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsT0FBQSxPQUFBLEdBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxPQUFBLE9BQUEsRUFDQSxPQUFBLFdBQ0EsTUFBQSxPQUNBLHdCQUFBLE1BQUEsT0FBQSxNQUNBLEtBQUEsS0FBQSxRQUFBLFFBQ0EsS0FBQSxLQUFBLFFBS0EsTUFBQSxNQUdBLFFBQUEsMkJBQUEsU0FBQSxpQkFFQSxNQUFBLE9BQUEsVUFBQSxNQUFBLGdCQUNBLFdBQUEsZ0JBR0EsZ0JBQUEsWUFLQSxTQUFBLFNBQUEsVUFFQSxnQkFBQSxZQUVBLEVBT0EsV0FBQSxpQkFBQSxXQUFBLFVBQUEsa0JBQUEsZ0JBR0EsUUFBQSxxQkFBQSxNQUFBLFNBQUEsZUFBQSxrQkFDQSxHQUdBLFlBSEEsaUJBQUEsaUJBQUEsV0FDQSxpQkFBQSxTQUFBLHdCQUFBLGlCQUFBLFdBSUEsSUFBQSxJQUFBLGlCQUFBLE9BQUEsQ0FDQSxHQUFBLGVBQUEseUJBRUEsT0FEQSxrQkFBQSxpQkFBQSxHQUNBLE1BQUEsT0FBQSxTQUFBLE9BQ0EsR0FBQSxlQUFBLGlCQUFBLE1BS0EsT0FKQSwyQkFBQSxjQUFBLGlCQUNBLFdBQUEsaUJBQUEsT0FDQSxjQUFBLGVBQUEsY0FBQSxXQUVBLFlBQ0EsU0FBQSxnQkFJQSxJQUFBLEdBREEsMEJBQ0EsRUFBQSxFQUFBLEdBQUEsaUJBQUEsT0FBQSxHQUFBLEVBQUEsSUFDQSxzQkFBQSxHQUFBLHlCQUdBLE9BQUEsT0FBQSxPQUFBLFNBQUEsT0FHQSxJQUFBLEdBRkEsVUFBQSxFQUVBLEVBQUEsRUFBQSxHQUFBLGlCQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLGVBQUEsaUJBQUEsR0FBQSxRQUNBLFVBQUEsU0FBQSwwQkFBQSxjQUFBLHNCQUFBLFFBQ0Esc0JBQUEsR0FBQSxlQUFBLGNBQUEsV0FRQSxNQUpBLFdBQ0EsV0FBQSxpQkFBQSxRQUdBLFlBQ0EsU0FBQSxnQkFHQSxRQUFBLHNCQUFBLE1BQUEsU0FBQSxlQUFBLGtCQUNBLEdBQUEsU0FBQSxTQUNBLE9BQUEsU0FBQSxNQUFBLE9BQUEsU0FBQSxPQUNBLE1BQUEsa0JBQUEsUUFDQSxTQUFBLE1BQUEsSUFBQSxPQUNBLFVBQUEsTUFDQSxXQUFBLFdBQ0EsU0FBQSxNQUFBLEtBQUEsV0FFQSxVQUFBLFFBQ0EsTUFBQSxhQUFBLFdBQ0EsVUFBQSxZQUNBLGFBSUEsZ0JBR0EsUUFBQSw2QkFBQSxNQUFBLFNBQUEsZUFBQSxrQkFlQSxRQUFBLGNBQUEsT0FDQSxHQUFBLGFBQUEsQ0FJQSxPQUhBLFNBQUEsTUFBQSxTQUFBLEtBQ0EsVUFBQSxPQUFBLFlBQUEsS0FFQSxXQW5CQSxHQUFBLFFBQ0EsT0FBQSxTQUFBLE1BQUEsT0FBQSxTQUFBLE9BQ0EsTUFBQSxrQkFBQSxRQUNBLFNBQUEsTUFBQSxJQUFBLE9BQ0EsV0FBQSxXQUNBLFNBQUEsS0FBQSxLQUFBLE1BQUEsSUFBQSxPQUVBLGFBQUEsUUFDQSxNQUFBLGFBQUEsV0FDQSxhQUFBLFFBQUEsYUFHQSxnQkFXQSxRQUFBLHVCQUFBLE1BQUEsU0FBQSxlQUFBLGtCQUNBLEdBQUEsUUFDQSxPQUFBLFNBQUEsTUFBQSxPQUFBLFNBQUEsT0FDQSxNQUFBLGtCQUFBLFFBQ0EsV0FDQSxXQUFBLFdBQ0EsU0FBQSxNQUFBLEtBQUEsV0FFQSxXQUNBLGdCQUdBLFFBQUEsZ0JBQUEsaUJBQUEsZUFDQSxJQUFBLGNBQUEsTUFBQSxpQkFFQSxJQUFBLElBQUEsU0FBQSxNQUFBLFFBQ0EsR0FBQSxPQUFBLGlCQUFBLE1BQUEsUUFDQSxPQUFBLGNBQUEsTUFBQSxNQUFBLE9BR0EsT0FBQSxXQUFBLE9BQUEsT0FBQSxNQWNBLE9BVkEsa0JBQUEsaUJBQ0EsaUJBQUEsa0JBQUEsb0JBQ0EsR0FBQSxnQkFBQSxpQkFBQSxnQkFDQSxjQUFBLFlBR0EsR0FBQSxnQkFBQSxvQkFDQSxHQUFBLFFBQUEsbUJBR0EsR0ExTUEsTUFqQkEsZUFBQSxJQUFBLFNBQUEsSUFpQkEsU0FBQSxJQUFBLGVBQ0EsR0FBQSxrQkFBQSxRQUFBLFFBRUEsY0FBQSxNQUNBLElBQUEsU0FLQSxHQUpBLFNBQUEsSUFBQSxJQUFBLE9BRUEsaUJBQUEsTUFBQSxXQUVBLGlCQUFBLENBQ0EsTUFBQSxJQUFBLE9BQUEsSUFBQSxNQUFBLElBQUEsT0FBQSxLQUNBLFNBQUEsRUFDQSxJQUFBLElBQUEsVUFBQSxHQUdBLElBQUEsT0FBQSxHQUFBLE9BQUEsZUFDQSxPQUFBLEdBQUEsUUFBQSxNQUFBLFFBQUEsY0FDQSxrQkFBQSxPQUFBLE1BQUEsS0FFQSxpQkFBQSxTQUNBLGlCQUFBLGdCQUFBLHNCQUNBLFNBR0EsaUJBQUEscUJBQUEsa0JBQ0EsaUJBQUEsZ0JBQUEsaUJBQUEsUUFDQSw0QkFBQSxzQkFDQSxpQkFBQSxTQUNBLGlCQUFBLGdCQUFBLHFCQUdBLE1BQUEsVUFBQSxpQkFFQSxNQUFBLGdCQUFBLGlCQUFBLGNBRUEsS0FBQSxXQUNBLE1BQUEsZ0JBQUEsSUFBQSxjQUVBLFNBQ0EsTUFBQSxnQkFBQSxLQUFBLG1CQXlYQSxRQUFBLGNBRUEsS0FBQSxNQUFBLGFBQUEsb0JBQUEsU0FBQSxXQUFBLG1CQUNBLE1BQUEsVUFBQSxTQUFBLFVBQ0EsV0FBQSxXQUFBLFdBQ0EscUJBSUEsUUFBQSxlQUNBLEtBQUEsTUFBQSxXQUFBLG9CQUFBLFNBQUEsU0FBQSxtQkFDQSxNQUFBLFVBQUEsU0FBQSxVQUNBLFNBQUEsTUFBQSxXQUNBLHFCQVlBLFFBQUEsVUFBQSxTQUFBLGtCQUVBLFFBQUEsVUFBQSxLQUFBLFVBQUEsVUFFQSxRQUFBLE1BQUEsSUFDQSxNQUFBLFVBQUEsT0FDQSxTQUNBLFFBQUEsRUFDQSxHQUFBLEtBQUEsS0FBQSxTQUxBLEdBQUEsU0FBQSxDQVNBLFFBQUEsS0FBQSxXQUFBLEtBQUEsV0FpQkEsUUFBQSxXQUNBLEtBQUEsU0FBQSxPQUFBLEdBNEJBLFFBQUEsWUFBQSxRQUFBLElBQ0EsTUFBQSxVQUFBLE9BQ0EsR0FBQSxLQUFBLFFBQUEsUUFJQSxRQUFBLGNBQUEsT0FDQSxHQUFBLElBQUEsUUFBQSxPQUVBLFNBQUEsTUFBQSxRQUNBLE1BQUEsa0JBQUEsRUFDQSxNQUFBLFFBQUEsU0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxPQUFBLEdBQUEsSUFBQSxFQUFBLENBQ0EsUUFBQSxRQUFBLEdBQUEsR0FDQSxHQUFBLFFBQUEsR0FBQSxNQUFBLE9BQ0EsS0FDQSxXQUFBLElBQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxRQUNBLElBQUEsTUFBQSxPQUNBLFFBQUEsUUFBQSxNQUFBLE9BRUEsUUFBQSxPQUFBLE1BQUEsT0FFQSxNQUFBLEdBQ0EsUUFBQSxPQUFBLEdBQ0EsaUJBQUEsS0FLQSxRQUFBLHNCQUFBLFFBQ0EsTUFBQSxrQkFBQSxNQUFBLFVBQ0EsTUFBQSxrQkFBQSxFQUNBLFNBQUEsV0FBQSxhQUFBLFVBR0EsUUFBQSxZQUNBLEtBQUEsUUFBQSxHQUFBLFNBRUEsS0FBQSxRQUFBLFdBQUEsS0FBQSxLQUFBLFNBQ0EsS0FBQSxPQUFBLFdBQUEsS0FBQSxLQUFBLFFBQ0EsS0FBQSxPQUFBLFdBQUEsS0FBQSxLQUFBLFFBZ0xBLFFBQUEsS0FBQSxVQUNBLEdBQUEsVUFBQSxHQUFBLFVBQ0EsUUFBQSxFQUNBLFFBQUEsUUFBQSxlQWtCQSxPQWhCQSxTQUFBLFNBQUEsU0FBQSxRQUFBLEtBQ0EsVUFDQSxLQUFBLFNBQUEsS0FBQSxTQUFBLE9BQ0EsUUFBQSxlQUFBLE9BQ0EsUUFBQSxLQUFBLFFBQ0EsU0FBQSxTQUFBLFFBQUEsV0FDQSxTQUFBLFFBQ0EsUUFBQSxlQUFBLE1BQ0EsU0FBQSxPQUFBLFlBSUEsSUFBQSxTQUNBLFNBQUEsUUFBQSxTQUdBLFNBQUEsUUF2U0EsR0FBQSxVQUFBLE9BQUEsS0FBQSxXQXdCQSxNQUFBLFdBQ0EsTUFBQSxJQUFBLFVBT0EsU0FBQSxXQUNBLEtBQUEsU0FBQSxZQUFBLFdBQUEsY0FDQSxHQUFBLFFBQUEsR0FBQSxTQU1BLE9BSkEsTUFBQSxRQUFBLFFBQUEsS0FBQSxRQUFBLFlBQ0EsS0FBQSxRQUFBLFFBQUEsTUFBQSxPQUFBLFlBQUEsV0FBQSxlQUNBLEtBQUEsUUFBQSxPQUFBLEdBQUEscUJBQUEsS0FBQSxTQUVBLE9BQUEsU0FHQSxRQUFBLFNBQUEsVUFDQSxNQUFBLE1BQUEsS0FBQSxLQUFBLFdBR0EsVUFBQSxTQUFBLFNBQUEsY0FDQSxNQUFBLE1BQUEsS0FBQSxTQUFBLE9BQ0EsTUFBQSxnQkFBQSxPQUFBLEVBQUEsV0FDQSxTQUFBLE9BQ0EsTUFBQSxnQkFBQSxPQUFBLEVBQUEsV0FDQSxnQkFpREEsU0FBQSxXQUNBLFFBQUEsU0FBQSxLQUNBLEtBQUEsUUFBQSxRQUFBLFNBQ0EsTUFBQSxLQUFBLFFBQ0EsS0FBQSxTQUFBLFNBQ0EsU0FDQSxxRUFDQSxNQUdBLEtBQUEsVUFBQSxPQUtBLFVBQUEsU0FBQSxLQUNBLEdBQUEsTUFBQSxHQUVBLEtBQUEsU0FBQSxLQUFBLEtBQUEsVUFBQSxLQUFBLFNBQ0EsTUFDQSxTQUFBLE1BQUEsV0FBQSxRQUFBLEtBQUEsS0FBQSxJQUFBLE1BQ0EsV0FBQSxPQUNBLEtBQUEsUUFBQSxRQUFBLE9BQUEsR0FDQSxLQUFBLEtBQUEsSUFBQSxJQUFBLEdBQUEsSUFBQSxHQUFBLEtBQUEsVUFFQSxLQUFBLFFBQUEsUUFBQSxNQUFBLElBQ0EsS0FBQSxRQUFBLFFBQUEsT0FBQSxFQUNBLHFCQUFBLEtBQUEsUUFBQSxVQUVBLE1BQUEsR0FDQSxJQUFBLEdBQUEsR0FDQSxpQkFBQSxLQUlBLE9BQUEsU0FBQSxRQUNBLEtBQUEsUUFBQSxRQUFBLFFBQ0EsS0FBQSxTQUFBLFNBR0EsU0FBQSxTQUFBLFFBQ0EsS0FBQSxRQUFBLFFBQUEsTUFBQSxPQUNBLEtBQUEsUUFBQSxRQUFBLE9BQUEsRUFDQSxxQkFBQSxLQUFBLFFBQUEsVUFHQSxPQUFBLFNBQUEsVUFDQSxHQUFBLFdBQUEsS0FBQSxRQUFBLFFBQUEsT0FFQSxNQUFBLFFBQUEsUUFBQSxRQUFBLEdBQUEsV0FBQSxVQUFBLFFBQ0EsU0FBQSxXQUVBLElBQUEsR0FEQSxVQUFBLE9BQ0EsRUFBQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEdBQUEsRUFBQSxJQUFBLENBQ0EsT0FBQSxVQUFBLEdBQUEsR0FDQSxTQUFBLFVBQUEsR0FBQSxFQUNBLEtBQ0EsT0FBQSxPQUFBLFdBQUEsVUFBQSxTQUFBLFVBQUEsVUFDQSxNQUFBLEdBQ0EsaUJBQUEsUUE0Q0EsSUFBQSxRQUFBLFNBQUEsUUFDQSxHQUFBLFFBQUEsR0FBQSxTQUVBLE9BREEsUUFBQSxPQUFBLFFBQ0EsT0FBQSxTQUdBLFlBQUEsU0FBQSxNQUFBLFVBQ0EsR0FBQSxRQUFBLEdBQUEsU0FNQSxPQUxBLFVBQ0EsT0FBQSxRQUFBLE9BRUEsT0FBQSxPQUFBLE9BRUEsT0FBQSxTQUdBLGVBQUEsU0FBQSxNQUFBLFdBQUEsVUFDQSxHQUFBLGdCQUFBLElBQ0EsS0FDQSxXQUFBLFlBQUEsZUFBQSxZQUNBLE1BQUEsR0FDQSxNQUFBLGFBQUEsR0FBQSxHQUVBLE1BQUEsZUFBQSxnQkFDQSxlQUFBLEtBQUEsV0FDQSxNQUFBLGFBQUEsTUFBQSxhQUNBLFNBQUEsT0FDQSxNQUFBLGFBQUEsT0FBQSxLQUdBLFlBQUEsTUFBQSxhQW1CQSxLQUFBLFNBQUEsTUFBQSxTQUFBLFFBQUEsY0FDQSxHQUFBLFFBQUEsR0FBQSxTQUVBLE9BREEsUUFBQSxRQUFBLE9BQ0EsT0FBQSxRQUFBLEtBQUEsU0FBQSxRQUFBLGVBMkNBLEdBQUEsUUFBQSxHQUFBLFVBWUEsUUFBQSxXQUFBLE9BQ0EsU0FBQSxRQUFBLE9BR0EsUUFBQSxVQUFBLFFBQ0EsU0FBQSxPQUFBLFFBaEJBLElBQUEsV0FBQSxVQUNBLEtBQUEsVUFBQSxVQUFBLGlDQUFBLFNBR0EsTUFBQSxlQUFBLElBRUEsTUFBQSxJQUFBLEdBQUEsU0FHQSxJQUFBLFVBQUEsR0FBQSxTQVlBLE9BRkEsVUFBQSxVQUFBLFVBRUEsU0FBQSxRQVFBLE9BTEEsSUFBQSxNQUFBLE1BQ0EsR0FBQSxPQUFBLE9BQ0EsR0FBQSxLQUFBLEtBQ0EsR0FBQSxJQUFBLElBRUEsR0FHQSxRQUFBLGlCQUNBLEtBQUEsTUFBQSxVQUFBLFdBQUEsU0FBQSxRQUFBLFVBQ0EsR0FBQSx1QkFBQSxRQUFBLHVCQUNBLFFBQUEsNkJBQ0EsUUFBQSx5QkFFQSxxQkFBQSxRQUFBLHNCQUNBLFFBQUEsNEJBQ0EsUUFBQSx5QkFDQSxRQUFBLGtDQUVBLGVBQUEsc0JBQ0EsSUFBQSxhQUNBLFNBQUEsSUFDQSxHQUFBLElBQUEsc0JBQUEsR0FDQSxPQUFBLFlBQ0EscUJBQUEsTUFHQSxTQUFBLElBQ0EsR0FBQSxPQUFBLFNBQUEsR0FBQSxPQUFBLEVBQ0EsT0FBQSxZQUNBLFNBQUEsT0FBQSxRQU1BLE9BRkEsS0FBQSxVQUFBLGFBRUEsTUF1RUEsUUFBQSxzQkFDQSxHQUFBLEtBQUEsR0FDQSxpQkFBQSxPQUFBLGNBQ0EsZUFBQSxLQUNBLGFBQUEsSUFFQSxNQUFBLFVBQUEsU0FBQSxPQUlBLE1BSEEsV0FBQSxTQUNBLElBQUEsT0FFQSxLQUdBLEtBQUEsTUFBQSxZQUFBLG9CQUFBLFNBQUEsV0FDQSxTQUFBLFVBQUEsa0JBQUEsT0FBQSxVQTBDQSxRQUFBLFNBQ0EsS0FBQSxJQUFBLFVBQ0EsS0FBQSxRQUFBLEtBQUEsUUFBQSxLQUFBLFdBQ0EsS0FBQSxjQUFBLEtBQUEsY0FDQSxLQUFBLFlBQUEsS0FBQSxZQUFBLEtBQ0EsS0FBQSxRQUFBLEtBQUEsTUFBQSxLQUNBLEtBQUEsYUFBQSxFQUNBLEtBQUEsZ0JBQ0EsS0FBQSxxQkFDQSxLQUFBLGVBQ0EsS0FBQSxtQkFDQSxLQUFBLGtCQUFBLEtBQ0EsS0FBQSxxQkFpbUNBLFFBQUEsWUFBQSxPQUNBLEdBQUEsV0FBQSxRQUNBLEtBQUEsa0JBQUEsU0FBQSwwQkFBQSxXQUFBLFFBR0EsWUFBQSxRQUFBLE1BR0EsUUFBQSxjQUNBLFdBQUEsUUFBQSxLQUlBLFFBQUEsd0JBQUEsUUFBQSxNQUFBLE1BQ0EsRUFDQSxTQUFBLGdCQUFBLE9BQUEsTUFFQSxJQUFBLFFBQUEsZ0JBQUEsYUFDQSxTQUFBLGdCQUFBLFlBRUEsUUFBQSxRQUFBLFNBT0EsUUFBQSxpQkFFQSxRQUFBLG1CQUVBLElBREEsR0FBQSxPQUFBLFdBQUEsa0JBQ0EsTUFBQSxRQUNBLElBQ0EsTUFBQSxVQUNBLE1BQUEsR0FDQSxrQkFBQSxHQUdBLGFBQUEsS0FHQSxRQUFBLHNCQUNBLE9BQUEsZUFDQSxhQUFBLFNBQUEsTUFBQSxXQUNBLFdBQUEsT0FBQSxvQkFsbkNBLE1BQUEsV0FDQSxZQUFBLE1Bd0JBLEtBQUEsU0FBQSxTQUNBLEdBQUEsTUFpQ0EsT0EvQkEsVUFDQSxNQUFBLEdBQUEsT0FDQSxNQUFBLE1BQUEsS0FBQSxNQUVBLE1BQUEsYUFBQSxLQUFBLGFBQ0EsTUFBQSxrQkFBQSxLQUFBLG9CQUlBLEtBQUEsZUFDQSxLQUFBLGFBQUEsV0FDQSxLQUFBLFdBQUEsS0FBQSxjQUNBLEtBQUEsWUFBQSxLQUFBLFlBQUEsS0FDQSxLQUFBLGVBQ0EsS0FBQSxtQkFDQSxLQUFBLElBQUEsVUFDQSxLQUFBLGFBQUEsTUFFQSxLQUFBLGFBQUEsVUFBQSxNQUVBLE1BQUEsR0FBQSxNQUFBLGNBRUEsTUFBQSxRQUFBLE1BQ0EsTUFBQSxRQUFBLEtBQ0EsTUFBQSxjQUFBLEtBQUEsWUFDQSxLQUFBLGFBQ0EsS0FBQSxZQUFBLGNBQUEsTUFDQSxLQUFBLFlBQUEsT0FFQSxLQUFBLFlBQUEsS0FBQSxZQUFBLE1BRUEsT0F1SEEsT0FBQSxTQUFBLFNBQUEsU0FBQSxnQkFDQSxHQUFBLEtBQUEsT0FBQSxTQUVBLElBQUEsSUFBQSxnQkFDQSxNQUFBLEtBQUEsZ0JBQUEsS0FBQSxTQUFBLGVBQUEsSUFFQSxJQUFBLE9BQUEsS0FDQSxNQUFBLE1BQUEsV0FDQSxTQUNBLEdBQUEsU0FDQSxLQUFBLGFBQ0EsSUFBQSxJQUNBLElBQUEsU0FDQSxLQUFBLGVBZ0JBLE9BYkEsZ0JBQUEsS0FFQSxXQUFBLFlBQ0EsUUFBQSxHQUFBLE1BR0EsUUFDQSxNQUFBLE1BQUEsZUFJQSxNQUFBLFFBQUEsU0FFQSxXQUNBLFlBQUEsTUFBQSxTQUNBLGVBQUEsT0E2QkEsWUFBQSxTQUFBLGlCQUFBLFVBd0NBLFFBQUEsb0JBQ0EseUJBQUEsRUFFQSxVQUNBLFVBQUEsRUFDQSxTQUFBLFVBQUEsVUFBQSxPQUVBLFNBQUEsVUFBQSxVQUFBLE1BOUNBLEdBQUEsV0FBQSxHQUFBLE9BQUEsaUJBQUEsUUFDQSxVQUFBLEdBQUEsT0FBQSxpQkFBQSxRQUNBLGlCQUNBLEtBQUEsS0FDQSx5QkFBQSxFQUNBLFVBQUEsQ0FFQSxLQUFBLGlCQUFBLE9BQUEsQ0FFQSxHQUFBLGFBQUEsQ0FJQSxPQUhBLE1BQUEsV0FBQSxXQUNBLFlBQUEsU0FBQSxVQUFBLFVBQUEsUUFFQSxXQUNBLFlBQUEsR0FJQSxNQUFBLEtBQUEsaUJBQUEsT0FFQSxLQUFBLE9BQUEsaUJBQUEsR0FBQSxTQUFBLE1BQUEsU0FBQSxPQUNBLFVBQUEsR0FBQSxNQUNBLFVBQUEsR0FBQSxTQUNBLFNBQUEsVUFBQSxRQUFBLFNBQUEsVUFBQSxVQUFBLFVBSUEsUUFBQSxpQkFBQSxTQUFBLEtBQUEsR0FDQSxHQUFBLFdBQUEsS0FBQSxPQUFBLEtBQUEsU0FBQSxNQUFBLFVBQ0EsVUFBQSxHQUFBLE1BQ0EsVUFBQSxHQUFBLFNBQ0EsMEJBQ0EseUJBQUEsRUFDQSxLQUFBLFdBQUEsb0JBR0EsZUFBQSxLQUFBLGFBY0EsV0FDQSxLQUFBLGNBQUEsUUFDQSxjQUFBLGFBNkRBLGlCQUFBLFNBQUEsSUFBQSxVQW9CQSxRQUFBLDZCQUFBLFFBQ0EsU0FBQSxNQUNBLElBQUEsV0FBQSxJQUFBLFFBQUEsUUFBQSxPQUVBLElBQUEsU0FBQSxVQUtBLEdBQUEsWUFBQSxVQUFBLENBQ0EsV0FBQSxnQkFFQSxTQUFBLGNBQ0EsVUFBQSxTQUFBLE9BQUEsRUFDQSxrQkFHQSxVQUFBLFNBQUEsT0FFQSxZQUFBLFlBRUEsaUJBQ0EsU0FBQSxPQUFBLFVBQUEsVUFHQSxLQUFBLEdBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxJQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsU0FBQSxHQUVBLFFBQUEsVUFBQSxTQUFBLFVBQUEsUUFDQSxTQUFBLFVBQUEsVUFDQSxpQkFDQSxTQUFBLEdBQUEsYUFHQSxDQUNBLFdBQUEsaUJBRUEsU0FBQSxrQkFDQSxVQUFBLEVBQ0Esa0JBR0EsVUFBQSxDQUNBLEtBQUEsTUFBQSxVQUNBLFNBQUEsZUFBQSxPQUNBLFlBQ0EsUUFBQSxTQUFBLEtBQ0EsUUFBQSxTQUFBLEtBRUEsTUFBQSxXQUNBLFFBQUEsVUFBQSxTQUFBLFVBQUEsUUFDQSxTQUFBLFVBQUEsVUFDQSxpQkFDQSxTQUFBLEtBQUEsV0FHQSxZQUNBLFNBQUEsS0FBQSxRQUNBLGtCQUlBLElBQUEsVUFBQSxVQUFBLENBRUEsZ0JBQ0EsS0FBQSxNQUFBLFVBQ0EsU0FBQSxlQUFBLE9BQ0Esa0JBQ0EsVUFBQSxXQWhFQSxZQUFBLFdBQ0EsU0FBQSxTQUNBLGlCQW1FQSxPQUFBLGdCQUdBLFFBQUEsMEJBU0EsR0FSQSxTQUNBLFNBQUEsRUFDQSxTQUFBLFNBQUEsU0FBQSxPQUVBLFNBQUEsU0FBQSxhQUFBLE1BSUEsa0JBQ0EsR0FBQSxTQUFBLFVBR0EsR0FBQSxZQUFBLFVBQUEsQ0FDQSxhQUFBLEdBQUEsT0FBQSxTQUFBLE9BQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLGFBQUEsR0FBQSxTQUFBLE9BRUEsQ0FDQSxlQUNBLEtBQUEsR0FBQSxPQUFBLFVBQ0EsZUFBQSxLQUFBLFNBQUEsT0FDQSxhQUFBLEtBQUEsU0FBQSxVQVZBLGNBQUEsU0E1R0EsNEJBQUEsV0FBQSxDQUVBLElBRUEsVUFHQSxTQUVBLGFBUEEsS0FBQSxLQVNBLGtCQUFBLFNBQUEsT0FBQSxFQUNBLGVBQUEsRUFDQSxlQUFBLE9BQUEsSUFBQSw2QkFDQSxpQkFDQSxrQkFDQSxTQUFBLEVBQ0EsVUFBQSxDQTRHQSxPQUFBLE1BQUEsT0FBQSxlQUFBLHlCQXNEQSxRQUFBLFdBQ0EsR0FBQSxPQUFBLE1BQUEsS0FDQSxTQUdBLE9BQ0EsTUFDQSxLQUFBLFFBRUEsT0FBQSxPQUFBLFVBTkEsV0FBQSxLQUFBLGFBQ0EsZ0JBQUEsS0FBQSxrQkFFQSxJQUFBLElBQ0EsT0FBQSxLQUNBLFdBR0EsWUFBQSxXQUVBLFNBQUEsbUJBRUEsT0FBQSxZQUFBLE9BQUEsZUFHQSxTQUFBLE1BQUEsT0FBQSxjQUNBLG1CQUdBLGVBQUEsSUFFQSxHQUFBLENBSUEsSUFIQSxPQUFBLEVBQ0EsUUFBQSxPQUVBLFdBQUEsUUFBQSxDQUNBLElBQ0EsVUFBQSxXQUFBLFFBQ0EsVUFBQSxNQUFBLE1BQUEsVUFBQSxZQUNBLE1BQUEsR0FDQSxrQkFBQSxHQUVBLGVBQUEsS0FHQSxtQkFDQSxFQUFBLENBQ0EsR0FBQSxTQUFBLFFBQUEsV0FHQSxJQURBLE9BQUEsU0FBQSxPQUNBLFVBQ0EsSUFJQSxHQUhBLE1BQUEsU0FBQSxRQUlBLElBQUEsTUFBQSxNQUFBLElBQUEsYUFBQSxLQUFBLE1BQUEsUUFDQSxNQUFBLEdBQ0EsT0FBQSxNQUFBLE1BQ0EsZ0JBQUEsUUFBQSxnQkFBQSxPQUNBLE1BQUEsUUFBQSxNQUFBLFFBY0EsR0FBQSxRQUFBLGVBQUEsQ0FHQSxPQUFBLENBQ0EsTUFBQSx5QkFqQkEsUUFBQSxFQUNBLGVBQUEsTUFDQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsTUFBQSxNQUFBLE1BQ0EsTUFBQSxHQUFBLE1BQUEsT0FBQSxhQUFBLE1BQUEsS0FBQSxTQUNBLEVBQUEsTUFDQSxPQUFBLEVBQUEsSUFDQSxTQUFBLFVBQUEsU0FBQSxZQUNBLE9BQUEsV0FBQSxNQUFBLEtBQ0EsUUFBQSxNQUFBLElBQUEsTUFBQSxNQUFBLElBQUEsWUFDQSxNQUFBLElBQ0EsUUFBQSxhQUFBLE9BQUEsT0FBQSxhQUFBLE9BQUEsTUFDQSxTQUFBLFFBQUEsS0FBQSxTQVNBLE1BQUEsR0FDQSxrQkFBQSxHQVFBLEtBQUEsS0FBQSxRQUFBLGFBQ0EsVUFBQSxRQUFBLFFBQUEsZUFDQSxLQUFBLFVBQUEsVUFBQSxLQUFBLFFBQUEsZ0JBQ0EsUUFBQSxRQUFBLGNBR0EsUUFBQSxLQUlBLEtBQUEsT0FBQSxXQUFBLFVBQUEsTUFFQSxLQURBLGNBQ0EsaUJBQUEsU0FDQSw0RkFFQSxJQUFBLE9BQUEsaUJBR0EsT0FBQSxXQUFBLE9BSUEsS0FGQSxhQUVBLGdCQUFBLFFBQ0EsSUFDQSxnQkFBQSxVQUNBLE1BQUEsR0FDQSxrQkFBQSxLQXdDQSxTQUFBLFdBRUEsSUFBQSxLQUFBLFlBQUEsQ0FDQSxHQUFBLFFBQUEsS0FBQSxPQUlBLElBRkEsS0FBQSxXQUFBLFlBQ0EsS0FBQSxhQUFBLEVBQ0EsT0FBQSxXQUFBLENBRUEsSUFBQSxHQUFBLGFBQUEsTUFBQSxnQkFDQSx1QkFBQSxLQUFBLEtBQUEsZ0JBQUEsV0FBQSxVQUtBLFFBQUEsYUFBQSxPQUFBLE9BQUEsWUFBQSxLQUFBLGVBQ0EsT0FBQSxhQUFBLE9BQUEsT0FBQSxZQUFBLEtBQUEsZUFDQSxLQUFBLGdCQUFBLEtBQUEsY0FBQSxjQUFBLEtBQUEsZUFDQSxLQUFBLGdCQUFBLEtBQUEsY0FBQSxjQUFBLEtBQUEsZUFXQSxLQUFBLFFBQUEsS0FBQSxjQUFBLEtBQUEsY0FBQSxLQUFBLFlBQ0EsS0FBQSxZQUFBLEtBQUEsTUFBQSxLQUdBLEtBQUEsZUFDQSxLQUFBLFdBQUEsS0FBQSxhQUFBLEtBQUEscUJBR0EsS0FBQSxTQUFBLEtBQUEsUUFBQSxLQUFBLE9BQUEsS0FDQSxLQUFBLElBQUEsS0FBQSxPQUFBLEtBQUEsWUFBQSxXQUFBLE1BQUEsVUErQkEsTUFBQSxTQUFBLEtBQUEsUUFDQSxNQUFBLFFBQUEsTUFBQSxLQUFBLFNBZ0NBLFdBQUEsU0FBQSxNQUdBLFdBQUEsU0FBQSxXQUFBLGFBQUEsUUFDQSxTQUFBLE1BQUEsV0FDQSxXQUFBLGFBQUEsUUFDQSxXQUFBLFlBS0EsS0FBQSxhQUFBLE1BQUEsTUFBQSxLQUFBLFdBQUEsUUFHQSxhQUFBLFNBQUEsSUFDQSxLQUFBLGtCQUFBLEtBQUEsS0FnREEsT0FBQSxTQUFBLE1BQ0EsSUFFQSxNQURBLFlBQUEsVUFDQSxLQUFBLE1BQUEsTUFDQSxNQUFBLEdBQ0Esa0JBQUEsR0FDQSxRQUNBLFlBQ0EsS0FDQSxXQUFBLFVBQ0EsTUFBQSxHQUVBLEtBREEsbUJBQUEsR0FDQSxLQXNCQSxZQUFBLFNBQUEsTUFLQSxRQUFBLHlCQUNBLE1BQUEsTUFBQSxNQUxBLEdBQUEsT0FBQSxJQUNBLE9BQUEsV0FBQSxrQkFBQSxLQUFBLHVCQUNBLHNCQWtDQSxJQUFBLFNBQUEsS0FBQSxVQUNBLEdBQUEsZ0JBQUEsS0FBQSxZQUFBLEtBQ0Esa0JBQ0EsS0FBQSxZQUFBLE1BQUEsbUJBRUEsZUFBQSxLQUFBLFNBRUEsSUFBQSxTQUFBLElBQ0EsR0FDQSxTQUFBLGdCQUFBLFFBQ0EsUUFBQSxnQkFBQSxNQUFBLEdBRUEsUUFBQSxnQkFBQSxjQUNBLFFBQUEsUUFBQSxRQUVBLElBQUEsTUFBQSxJQUNBLE9BQUEsWUFDQSxlQUFBLGVBQUEsUUFBQSxXQUFBLEtBQ0EsdUJBQUEsS0FBQSxFQUFBLFFBMkJBLE1BQUEsU0FBQSxNQUNBLEdBQ0EsZ0JBYUEsRUFBQSxPQWRBLFNBRUEsTUFBQSxLQUNBLGlCQUFBLEVBQ0EsT0FDQSxLQUFBLEtBQ0EsWUFBQSxNQUNBLGdCQUFBLFdBQUEsaUJBQUEsR0FDQSxlQUFBLFdBQ0EsTUFBQSxrQkFBQSxHQUVBLGtCQUFBLEdBRUEsYUFBQSxRQUFBLE9BQUEsVUFBQSxFQUdBLEdBQUEsQ0FHQSxJQUZBLGVBQUEsTUFBQSxZQUFBLE9BQUEsTUFDQSxNQUFBLGFBQUEsTUFDQSxFQUFBLEVBQUEsT0FBQSxlQUFBLE9BQUEsT0FBQSxFQUFBLElBR0EsR0FBQSxlQUFBLEdBTUEsSUFFQSxlQUFBLEdBQUEsTUFBQSxLQUFBLGNBQ0EsTUFBQSxHQUNBLGtCQUFBLE9BVEEsZ0JBQUEsT0FBQSxFQUFBLEdBQ0EsSUFDQSxRQVdBLElBQUEsZ0JBRUEsTUFEQSxPQUFBLGFBQUEsS0FDQSxLQUdBLE9BQUEsTUFBQSxjQUNBLE1BSUEsT0FGQSxPQUFBLGFBQUEsS0FFQSxPQXlCQSxXQUFBLFNBQUEsTUFDQSxHQUFBLFFBQUEsS0FDQSxRQUFBLE9BQ0EsS0FBQSxPQUNBLE9BQ0EsS0FBQSxLQUNBLFlBQUEsT0FDQSxlQUFBLFdBQ0EsTUFBQSxrQkFBQSxHQUVBLGtCQUFBLEVBR0EsS0FBQSxPQUFBLGdCQUFBLE1BQUEsTUFBQSxNQU1BLEtBSkEsR0FDQSxXQUFBLEVBQUEsT0FEQSxhQUFBLFFBQUEsT0FBQSxVQUFBLEdBSUEsUUFBQSxNQUFBLENBR0EsSUFGQSxNQUFBLGFBQUEsUUFDQSxVQUFBLFFBQUEsWUFBQSxVQUNBLEVBQUEsRUFBQSxPQUFBLFVBQUEsT0FBQSxPQUFBLEVBQUEsSUFFQSxHQUFBLFVBQUEsR0FPQSxJQUNBLFVBQUEsR0FBQSxNQUFBLEtBQUEsY0FDQSxNQUFBLEdBQ0Esa0JBQUEsT0FUQSxXQUFBLE9BQUEsRUFBQSxHQUNBLElBQ0EsUUFlQSxNQUFBLEtBQUEsUUFBQSxnQkFBQSxPQUFBLFFBQUEsYUFDQSxVQUFBLFFBQUEsUUFBQSxlQUNBLEtBQUEsVUFBQSxVQUFBLEtBQUEsUUFBQSxnQkFDQSxRQUFBLFFBQUEsUUFNQSxNQURBLE9BQUEsYUFBQSxLQUNBLE9BSUEsSUFBQSxZQUFBLEdBQUEsTUFFQSxPQUFBLGNBMERBLFFBQUEseUJBQ0EsR0FBQSw0QkFBQSxvQ0FDQSw0QkFBQSw0Q0FrQkEsTUFBQSwyQkFBQSxTQUFBLFFBQ0EsTUFBQSxXQUFBLFNBQ0EsMkJBQUEsT0FDQSxNQUVBLDRCQW9CQSxLQUFBLDRCQUFBLFNBQUEsUUFDQSxNQUFBLFdBQUEsU0FDQSw0QkFBQSxPQUNBLE1BRUEsNkJBR0EsS0FBQSxLQUFBLFdBQ0EsTUFBQSxVQUFBLElBQUEsU0FDQSxHQUNBLGVBREEsTUFBQSxRQUFBLDRCQUFBLDBCQUdBLE9BQUEsU0FBQSxNQUFBLEtBQ0EsY0FBQSxXQUFBLEtBQUEsS0FDQSxLQUFBLGVBQUEsY0FBQSxNQUFBLFFBSUEsSUFIQSxVQUFBLGdCQXlCQSxRQUFBLGlCQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsZ0NBQUEsUUFDQSxRQUFBLFFBQUEsU0FJQSxRQUFBLGVBQUEsU0FDQSxHQUFBLFNBQUEsUUFDQSxNQUFBLFFBQ0EsSUFBQSxTQUFBLFNBQUEsQ0FLQSxHQUFBLFFBQUEsUUFBQSxPQUFBLEdBQ0EsS0FBQSxZQUFBLFNBQ0EsdURBQUEsUUFLQSxPQUhBLFNBQUEsZ0JBQUEsU0FDQSxRQUFBLFNBQUEsTUFDQSxRQUFBLE1BQUEsY0FDQSxHQUFBLFFBQUEsSUFBQSxRQUFBLEtBQ0EsR0FBQSxTQUFBLFNBSUEsTUFBQSxJQUFBLFFBQUEsSUFBQSxRQUFBLE9BQUEsSUFFQSxNQUFBLFlBQUEsV0FDQSxrRUFLQSxRQUFBLGdCQUFBLFVBQ0EsR0FBQSxvQkFNQSxPQUxBLFdBQUEsV0FDQSxRQUFBLFNBQUEsU0FBQSxTQUNBLGlCQUFBLEtBQUEsY0FBQSxZQUdBLGlCQXVFQSxRQUFBLHdCQUNBLEtBQUEsYUFBQSxZQUdBLElBQUEsdUJBQUEsUUFDQSx1QkF3QkEsTUFBQSxxQkFBQSxTQUFBLE9BSUEsTUFIQSxXQUFBLFNBQ0EscUJBQUEsZUFBQSxRQUVBLHNCQThCQSxLQUFBLHFCQUFBLFNBQUEsT0FJQSxNQUhBLFdBQUEsU0FDQSxxQkFBQSxlQUFBLFFBRUEsc0JBR0EsS0FBQSxNQUFBLFlBQUEsU0FBQSxXQVdBLFFBQUEsVUFBQSxRQUFBLFdBQ0EsTUFBQSxTQUFBLFFBQ0EsZ0JBQUEsYUFHQSxRQUFBLEtBQUEsVUFBQSxNQUlBLFFBQUEsOEJBQUEsS0FDQSxHQUNBLEdBQUEsRUFEQSxVQUFBLFdBQUEsSUFBQSxZQUNBLFNBQUEsQ0FFQSxLQUFBLEVBQUEsRUFBQSxFQUFBLHFCQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxTQUFBLHFCQUFBLEdBQUEsV0FBQSxDQUNBLFNBQUEsQ0FDQSxPQUdBLEdBQUEsUUFFQSxJQUFBLEVBQUEsRUFBQSxFQUFBLHFCQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxTQUFBLHFCQUFBLEdBQUEsV0FBQSxDQUNBLFNBQUEsQ0FDQSxPQUlBLE1BQUEsU0FHQSxRQUFBLG9CQUFBLE1BQ0EsR0FBQSxZQUFBLFNBQUEsY0FDQSxLQUFBLHFCQUFBLFdBQ0EsTUFBQSxlQVlBLE9BVEEsUUFDQSxXQUFBLFVBQUEsR0FBQSxPQUVBLFdBQUEsVUFBQSxRQUFBLFdBQ0EsTUFBQSxNQUFBLHdCQUVBLFdBQUEsVUFBQSxTQUFBLFdBQ0EsTUFBQSxNQUFBLHVCQUFBLFlBRUEsV0E2QkEsUUFBQSxTQUFBLEtBQUEsY0FDQSxHQUFBLGFBQUEsT0FBQSxlQUFBLE1BQUEsT0FBQSxNQUFBLElBQ0EsS0FBQSxZQUNBLEtBQUEsWUFBQSxXQUNBLDBFQUNBLEtBQUEsYUFFQSxJQUFBLE9BQUEsY0FBQSxlQUFBLFdBQUEsS0FBQSxhQUNBLE1BQUEsYUFJQSxJQUFBLGdCQUFBLGNBQ0EsS0FBQSxZQUFBLFFBQ0Esc0ZBQ0EsS0FFQSxPQUFBLElBQUEsYUFBQSxjQXFCQSxRQUFBLFNBQUEsY0FDQSxNQUFBLHdCQUFBLHdCQUNBLGFBQUEsdUJBRUEsYUFtQkEsUUFBQSxZQUFBLEtBQUEsY0FDQSxHQUFBLE9BQUEsY0FBQSxlQUFBLFdBQUEsS0FBQSxhQUNBLE1BQUEsYUFFQSxJQUFBLGFBQUEsT0FBQSxlQUFBLE1BQUEsT0FBQSxNQUFBLElBQ0EsSUFBQSxhQUFBLHVCQUFBLGFBQ0EsTUFBQSxjQUFBLHNCQUtBLElBQUEsT0FBQSxhQUFBLGFBQUEsQ0FDQSxHQUFBLDZCQUFBLGNBQ0EsTUFBQSxhQUVBLE1BQUEsWUFBQSxXQUNBLGtGQUNBLGFBQUEsWUFFQSxHQUFBLE9BQUEsYUFBQSxLQUNBLE1BQUEsZUFBQSxhQUVBLE1BQUEsWUFBQSxTQUFBLHdEQXZLQSxHQUFBLGVBQUEsV0FDQSxLQUFBLFlBQUEsU0FBQSx3REFHQSxXQUFBLElBQUEsZUFDQSxjQUFBLFVBQUEsSUFBQSxhQXFEQSxJQUFBLHdCQUFBLHFCQUNBLFNBK0dBLE9BN0dBLFFBQUEsYUFBQSxNQUFBLG1CQUFBLHdCQUNBLE9BQUEsYUFBQSxLQUFBLG1CQUFBLHdCQUNBLE9BQUEsYUFBQSxLQUFBLG1CQUFBLHdCQUNBLE9BQUEsYUFBQSxJQUFBLG1CQUFBLHdCQUNBLE9BQUEsYUFBQSxjQUFBLG1CQUFBLE9BQUEsYUFBQSxPQXlHQSxRQUFBLFFBQ0EsV0FBQSxXQUNBLFFBQUEsV0E4UkEsUUFBQSxnQkFDQSxHQUFBLFVBQUEsQ0FhQSxNQUFBLFFBQUEsU0FBQSxPQUlBLE1BSEEsV0FBQSxTQUNBLFVBQUEsT0FFQSxTQWtEQSxLQUFBLE1BQUEsU0FBQSxXQUFBLGVBQUEsU0FDQSxPQUFBLFNBQUEsY0FHQSxHQUFBLFNBQUEsU0FBQSxNQUFBLFNBQUEsaUJBQUEsRUFDQSxLQUFBLFlBQUEsV0FDQSxvUEFLQSxJQUFBLEtBQUEsWUFBQSxhQWFBLEtBQUEsVUFBQSxXQUNBLE1BQUEsVUFFQSxJQUFBLFFBQUEsYUFBQSxRQUNBLElBQUEsV0FBQSxhQUFBLFdBQ0EsSUFBQSxRQUFBLGFBQUEsUUFFQSxVQUNBLElBQUEsUUFBQSxJQUFBLFdBQUEsU0FBQSxLQUFBLE9BQUEsTUFBQSxRQUNBLElBQUEsUUFBQSxVQXNCQSxJQUFBLFFBQUEsU0FBQSxLQUFBLE1BQ0EsR0FBQSxRQUFBLE9BQUEsS0FDQSxPQUFBLFFBQUEsU0FBQSxPQUFBLFNBQ0EsT0FFQSxPQUFBLEtBQUEsU0FBQSxPQUNBLE1BQUEsS0FBQSxXQUFBLEtBQUEsU0F3UEEsSUFBQSxPQUFBLElBQUEsUUFDQSxXQUFBLElBQUEsV0FDQSxRQUFBLElBQUEsT0FlQSxPQWJBLFNBQUEsYUFBQSxTQUFBLFVBQUEsTUFDQSxHQUFBLE9BQUEsVUFBQSxLQUNBLEtBQUEsVUFBQSxZQUFBLFFBQUEsU0FBQSxNQUNBLE1BQUEsT0FBQSxVQUFBLE9BRUEsSUFBQSxVQUFBLGVBQUEsUUFBQSxTQUFBLE9BQ0EsTUFBQSxZQUFBLFVBQUEsUUFFQSxJQUFBLFVBQUEsWUFBQSxRQUFBLFNBQUEsT0FDQSxNQUFBLFNBQUEsVUFBQSxVQUlBLE1BbUJBLFFBQUEsb0JBQ0EsS0FBQSxNQUFBLFVBQUEsWUFBQSxTQUFBLFFBQUEsV0FDQSxHQU1BLGNBS0EsTUFYQSxnQkFDQSxRQUNBLEtBQUEsZ0JBQUEsS0FBQSxXQUFBLFFBQUEsZUFBQSxpQkFBQSxJQUNBLE1BQUEsU0FBQSxNQUFBLFFBQUEsZUFBQSxXQUNBLFNBQUEsVUFBQSxPQUNBLGFBQUEsU0FBQSxhQUVBLFlBQUEsOEJBQ0EsVUFBQSxTQUFBLE1BQUEsU0FBQSxLQUFBLE1BQ0EsYUFBQSxFQUNBLFlBQUEsQ0FHQSxJQUFBLFVBQUEsQ0FDQSxJQUFBLEdBQUEsUUFBQSxXQUNBLEdBQUEsTUFBQSxZQUFBLEtBQUEsTUFBQSxDQUNBLGFBQUEsTUFBQSxHQUNBLGFBQUEsYUFBQSxPQUFBLEVBQUEsR0FBQSxjQUFBLGFBQUEsT0FBQSxFQUNBLE9BSUEsZUFDQSxhQUFBLGlCQUFBLFlBQUEsVUFHQSxlQUFBLGNBQUEsWUFBQSxhQUFBLGNBQUEsWUFDQSxjQUFBLGFBQUEsWUFBQSxhQUFBLGFBQUEsYUFFQSxTQUFBLGFBQUEsYUFDQSxZQUFBLFNBQUEsU0FBQSxLQUFBLE1BQUEsa0JBQ0EsV0FBQSxTQUFBLFNBQUEsS0FBQSxNQUFBLGtCQUtBLE9BVUEsV0FBQSxRQUFBLFVBQUEsUUFBQSxRQUFBLFdBQUEsRUFBQSxTQUFBLE9BRUEsV0FBQSxnQkFBQSxZQUVBLGNBQUEsYUFBQSxHQUNBLFNBQUEsU0FBQSxPQUlBLEdBQUEsU0FBQSxPQUFBLEdBQUEsS0FBQSxPQUFBLENBRUEsSUFBQSxZQUFBLGFBQUEsUUFBQSxDQUNBLEdBQUEsUUFBQSxTQUFBLGNBQUEsTUFDQSxjQUFBLE9BQUEsS0FBQSxRQUFBLFFBR0EsTUFBQSxjQUFBLFFBRUEsSUFBQSxNQUNBLGFBQUEsYUFDQSxZQUFBLFlBQ0EsV0FBQSxXQUNBLFFBQUEsUUFDQSxLQUFBLEtBQ0EsaUJBQUEsZ0JBd0JBLFFBQUEsNEJBQ0EsS0FBQSxNQUFBLGlCQUFBLFFBQUEsS0FBQSxTQUFBLGVBQUEsTUFBQSxJQUNBLFFBQUEsaUJBQUEsSUFBQSxvQkFnQkEsUUFBQSxlQUVBLEdBREEsS0FBQSx3QkFDQSxtQkFDQSxLQUFBLGdCQUFBLFNBQUEsK0JBQUEsSUFFQSxPQUFBLElBQUEsU0FwQkEsR0FBQSxNQUFBLGVBR0EsT0FGQSxNQUFBLHVCQUVBLE1BQUEsSUFBQSxLQUFBLE1BQUEsaUJBQ0EsS0FBQSxTQUFBLFVBQ0EsR0FBQSxNQUFBLFNBQUEsSUFDQSxPQUFBLE9BQUEsSUFBQSxLQUFBLFFBSUEsS0FBQSx1QkFDQSxlQUFBLElBQUEsSUFBQSxNQUNBLE1BTEEsZUFNQSxhQWFBLE1BRkEsaUJBQUEscUJBQUEsRUFFQSxrQkFJQSxRQUFBLHlCQUNBLEtBQUEsTUFBQSxhQUFBLFdBQUEsWUFDQSxTQUFBLFdBQUEsU0FBQSxXQVNBLEdBQUEsZUFvR0EsT0F0RkEsYUFBQSxhQUFBLFNBQUEsUUFBQSxXQUFBLGdCQUNBLEdBQUEsVUFBQSxRQUFBLHVCQUFBLGNBQ0EsVUFrQkEsT0FqQkEsU0FBQSxTQUFBLFNBQUEsU0FDQSxHQUFBLGFBQUEsUUFBQSxRQUFBLFNBQUEsS0FBQSxXQUNBLGNBQ0EsUUFBQSxZQUFBLFNBQUEsYUFDQSxHQUFBLGVBQUEsQ0FDQSxHQUFBLFNBQUEsR0FBQSxRQUFBLFVBQUEsV0FBQSxjQUNBLFNBQUEsS0FBQSxjQUNBLFFBQUEsS0FBQTtLQUdBLElBQUEsWUFBQSxRQUFBLGFBQ0EsUUFBQSxLQUFBLGFBTUEsU0FlQSxZQUFBLFdBQUEsU0FBQSxRQUFBLFdBQUEsZ0JBRUEsSUFBQSxHQURBLFdBQUEsTUFBQSxXQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsU0FBQSxTQUFBLEVBQUEsQ0FDQSxHQUFBLGlCQUFBLGVBQUEsSUFBQSxLQUNBLFNBQUEsSUFBQSxTQUFBLEdBQUEsUUFBQSxnQkFBQSxJQUFBLFdBQUEsS0FDQSxTQUFBLFFBQUEsaUJBQUEsU0FDQSxJQUFBLFNBQUEsT0FDQSxNQUFBLFlBWUEsWUFBQSxZQUFBLFdBQ0EsTUFBQSxXQUFBLE9BWUEsWUFBQSxZQUFBLFNBQUEsS0FDQSxNQUFBLFVBQUEsUUFDQSxVQUFBLElBQUEsS0FDQSxXQUFBLFlBWUEsWUFBQSxXQUFBLFNBQUEsVUFDQSxTQUFBLGdDQUFBLFdBR0EsY0FJQSxRQUFBLG9CQUNBLEtBQUEsTUFBQSxhQUFBLFdBQUEsS0FBQSxNQUFBLG9CQUNBLFNBQUEsV0FBQSxTQUFBLEdBQUEsSUFBQSxtQkE2QkEsUUFBQSxTQUFBLEdBQUEsTUFBQSxhQUNBLEdBR0EsV0FIQSxVQUFBLFVBQUEsZUFBQSxZQUNBLFVBQUEsVUFBQSxJQUFBLElBQUEsUUFDQSxRQUFBLFNBQUEsT0FvQkEsT0FqQkEsV0FBQSxTQUFBLE1BQUEsV0FDQSxJQUNBLFNBQUEsUUFBQSxNQUNBLE1BQUEsR0FDQSxTQUFBLE9BQUEsR0FDQSxrQkFBQSxHQUVBLGNBQ0EsV0FBQSxRQUFBLGFBR0EsV0FBQSxXQUFBLFVBQ0EsT0FFQSxRQUFBLFlBQUEsVUFDQSxVQUFBLFdBQUEsU0FFQSxRQW5EQSxHQUFBLGFBNEVBLE9BVEEsU0FBQSxPQUFBLFNBQUEsU0FDQSxNQUFBLFVBQUEsUUFBQSxjQUFBLFlBQ0EsVUFBQSxRQUFBLGFBQUEsT0FBQSxrQkFDQSxXQUFBLFFBQUEsYUFDQSxTQUFBLE1BQUEsT0FBQSxRQUFBLGVBRUEsR0FHQSxVQW1FQSxRQUFBLFlBQUEsS0FDQSxHQUFBLE1BQUEsR0FZQSxPQVZBLFFBR0EsZUFBQSxhQUFBLE9BQUEsTUFDQSxLQUFBLGVBQUEsTUFHQSxlQUFBLGFBQUEsT0FBQSxPQUlBLEtBQUEsZUFBQSxLQUNBLFNBQUEsZUFBQSxTQUFBLGVBQUEsU0FBQSxRQUFBLEtBQUEsSUFBQSxHQUNBLEtBQUEsZUFBQSxLQUNBLE9BQUEsZUFBQSxPQUFBLGVBQUEsT0FBQSxRQUFBLE1BQUEsSUFBQSxHQUNBLEtBQUEsZUFBQSxLQUFBLGVBQUEsS0FBQSxRQUFBLEtBQUEsSUFBQSxHQUNBLFNBQUEsZUFBQSxTQUNBLEtBQUEsZUFBQSxLQUNBLFNBQUEsTUFBQSxlQUFBLFNBQUEsT0FBQSxHQUNBLGVBQUEsU0FDQSxJQUFBLGVBQUEsVUFXQSxRQUFBLGlCQUFBLFlBQ0EsR0FBQSxRQUFBLFNBQUEsWUFBQSxXQUFBLFlBQUEsVUFDQSxPQUFBLFFBQUEsV0FBQSxVQUFBLFVBQ0EsT0FBQSxPQUFBLFVBQUEsS0E0Q0EsUUFBQSxtQkFDQSxLQUFBLEtBQUEsUUFBQSxRQWdHQSxRQUFBLGlCQUFBLFVBV0EsUUFBQSxVQUFBLEtBQUEsU0FDQSxHQUFBLFNBQUEsTUFBQSxDQUNBLEdBQUEsV0FJQSxPQUhBLFNBQUEsS0FBQSxTQUFBLE9BQUEsS0FDQSxRQUFBLEtBQUEsU0FBQSxJQUFBLFVBRUEsUUFFQSxNQUFBLFVBQUEsUUFBQSxLQUFBLE9BQUEsU0FsQkEsR0FBQSxRQUFBLFFBcUJBLE1BQUEsU0FBQSxTQUVBLEtBQUEsTUFBQSxZQUFBLFNBQUEsV0FDQSxNQUFBLFVBQUEsTUFDQSxNQUFBLFdBQUEsSUFBQSxLQUFBLFdBa0JBLFNBQUEsV0FBQSxnQkFDQSxTQUFBLE9BQUEsWUFDQSxTQUFBLFNBQUEsY0FDQSxTQUFBLE9BQUEsWUFDQSxTQUFBLFVBQUEsZUFDQSxTQUFBLFlBQUEsaUJBQ0EsU0FBQSxTQUFBLGNBQ0EsU0FBQSxVQUFBLGVBQ0EsU0FBQSxZQUFBLGlCQXNIQSxRQUFBLGdCQUNBLE1BQUEsVUFBQSxNQUFBLFdBQUEsWUFDQSxJQUFBLFFBQUEsT0FBQSxNQUFBLE1BRUEsSUFBQSxzQkFBQSxZQUNBLGFBRUEsWUFBQSxNQUFBLFNBQUEsTUFBQSxPQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxXQUFBLE9BQUEsSUFDQSxJQUFBLFdBQUEsR0FBQSxNQUFBLE9BQ0EsT0FBQSxDQUdBLFFBQUEsR0FHQSxhQUFBLGlCQUVBLFdBREEsWUFBQSxnQkFBQSxXQUNBLFNBQUEsSUFBQSxNQUNBLE1BQUEsU0FBQSxPQUFBLElBQUEsT0FHQSxTQUFBLElBQUEsTUFDQSxHQUFBLEtBQUEsTUFBQSxnQkFBQSxNQUFBLGdCQUFBLE1BQUEsQ0FDQSxJQUFBLEdBQUEsVUFBQSxLQUNBLEdBQUEsTUFBQSxPQUFBLE9BQUEsSUFBQSxlQUFBLEtBQUEsSUFBQSxTQUNBLFdBQUEsSUFBQSxRQUFBLEtBQUEsU0FDQSxPQUFBLENBR0EsUUFBQSxFQUdBLE1BREEsT0FBQSxHQUFBLE1BQUEsZUFDQSxHQUFBLEtBQUEsY0FBQSxRQUFBLE1BQUEsSUFLQSxJQUFBLFFBQUEsU0FBQSxJQUFBLE1BQ0EsR0FBQSxnQkFBQSxPQUFBLE1BQUEsS0FBQSxPQUFBLEdBQ0EsT0FBQSxPQUFBLElBQUEsS0FBQSxPQUFBLEdBRUEsY0FBQSxNQUNBLElBQUEsVUFDQSxJQUFBLFNBQ0EsSUFBQSxTQUNBLE1BQUEsWUFBQSxJQUFBLEtBQ0EsS0FBQSxTQUNBLGFBQUEsT0FDQSxJQUFBLFNBQ0EsTUFBQSxZQUFBLElBQUEsS0FDQSxTQUNBLElBQUEsR0FBQSxVQUFBLEtBQ0EsR0FBQSxNQUFBLE9BQUEsT0FBQSxJQUFBLE9BQUEsSUFBQSxRQUFBLE1BQ0EsT0FBQSxFQUtBLE9BQUEsQ0FDQSxLQUFBLFFBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsT0FBQSxJQUNBLEdBQUEsT0FBQSxJQUFBLEdBQUEsTUFDQSxPQUFBLENBR0EsUUFBQSxDQUNBLFNBQ0EsT0FBQSxHQUdBLGNBQUEsYUFDQSxJQUFBLFVBQ0EsSUFBQSxTQUNBLElBQUEsU0FFQSxZQUFBLEVBQUEsV0FFQSxLQUFBLFNBRUEsSUFBQSxHQUFBLE9BQUEsYUFDQSxTQUFBLE1BQ0EsbUJBQUEsWUFBQSxPQUNBLFdBQUEsS0FBQSxTQUFBLE9BQ0EsTUFBQSxRQUFBLEtBQUEsS0FBQSxNQUFBLE9BQUEsTUFBQSxNQUFBLFdBQUEsVUFFQSxJQUVBLE1BQ0EsS0FBQSxXQUNBLFdBQUEsS0FBQSxXQUNBLE1BQ0EsU0FDQSxNQUFBLE9BR0EsSUFBQSxHQURBLGFBQ0EsRUFBQSxFQUFBLEVBQUEsTUFBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLE9BQUEsTUFBQSxFQUNBLFlBQUEsTUFBQSxNQUFBLElBQ0EsU0FBQSxLQUFBLE9BR0EsTUFBQSxXQXFEQSxRQUFBLGdCQUFBLFNBQ0EsR0FBQSxTQUFBLFFBQUEsY0FDQSxPQUFBLFVBQUEsT0FBQSxnQkFJQSxNQUhBLGFBQUEsa0JBQUEsZUFBQSxRQUFBLGNBR0EsTUFBQSxPQUNBLE9BQ0EsYUFBQSxPQUFBLFFBQUEsU0FBQSxHQUFBLFFBQUEsVUFBQSxRQUFBLFlBQUEsR0FDQSxRQUFBLFVBQUEsaUJBd0RBLFFBQUEsY0FBQSxTQUNBLEdBQUEsU0FBQSxRQUFBLGNBQ0EsT0FBQSxVQUFBLE9BQUEsY0FHQSxNQUFBLE9BQUEsT0FDQSxPQUNBLGFBQUEsT0FBQSxRQUFBLFNBQUEsR0FBQSxRQUFBLFVBQUEsUUFBQSxZQUNBLGVBS0EsUUFBQSxjQUFBLE9BQUEsUUFBQSxTQUFBLFdBQUEsY0FDQSxJQUFBLFNBQUEsU0FBQSxTQUFBLFFBQUEsTUFBQSxFQUVBLElBQUEsWUFBQSxFQUFBLE1BQ0EsUUFBQSxLQUFBLElBQUEsT0FDQSxJQUFBLFFBQUEsT0FBQSxHQUNBLGFBQUEsR0FDQSxTQUVBLGFBQUEsQ0FDQSxJQUFBLEtBQUEsT0FBQSxRQUFBLEtBQUEsQ0FDQSxHQUFBLE9BQUEsT0FBQSxNQUFBLHNCQUNBLFFBQUEsS0FBQSxNQUFBLElBQUEsTUFBQSxHQUFBLGFBQUEsR0FDQSxPQUFBLElBQ0EsT0FBQSxJQUVBLGFBQUEsT0FDQSxhQUFBLEdBSUEsR0FBQSxZQWtEQSxhQUFBLEdBQUEsT0FBQSxJQUFBLEVBQUEsU0FDQSxhQUFBLE9BQUEsUUFBQSxtQkFuREEsQ0FDQSxHQUFBLGNBQUEsT0FBQSxNQUFBLGFBQUEsSUFBQSxJQUFBLE1BR0EsYUFBQSxnQkFDQSxhQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsUUFBQSxRQUFBLGFBQUEsUUFBQSxVQU1BLFNBQUEsS0FBQSxRQUFBLE9BQUEsV0FBQSxJQUFBLGVBQUEsV0FBQSxLQUFBLGNBRUEsSUFBQSxTQUNBLFlBQUEsRUFHQSxJQUFBLFdBQUEsR0FBQSxRQUFBLE1BQUEsYUFDQSxNQUFBLFNBQUEsRUFDQSxVQUFBLFNBQUEsSUFBQSxFQUVBLElBQUEsR0FBQSxJQUFBLEVBQ0EsT0FBQSxRQUFBLE9BQ0EsTUFBQSxRQUFBLEtBRUEsSUFBQSxNQUFBLFFBQUEsT0FBQSxNQUVBLElBREEsSUFBQSxNQUFBLE9BQUEsT0FDQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEtBQ0EsSUFBQSxHQUFBLFFBQUEsR0FBQSxJQUFBLElBQ0EsY0FBQSxVQUVBLGNBQUEsTUFBQSxPQUFBLEVBSUEsS0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLE9BQUEsS0FDQSxNQUFBLE9BQUEsR0FBQSxTQUFBLEdBQUEsSUFBQSxJQUNBLGNBQUEsVUFFQSxjQUFBLE1BQUEsT0FBQSxFQUlBLE1BQUEsU0FBQSxPQUFBLGNBQ0EsVUFBQSxHQUdBLGVBQUEsTUFBQSxlQUFBLGNBQUEsV0FBQSxTQUFBLE9BQUEsRUFBQSxlQVdBLE1BSEEsT0FBQSxLQUFBLFdBQUEsUUFBQSxPQUFBLFFBQUEsUUFDQSxNQUFBLEtBQUEsY0FDQSxNQUFBLEtBQUEsV0FBQSxRQUFBLE9BQUEsUUFBQSxRQUNBLE1BQUEsS0FBQSxJQUdBLFFBQUEsV0FBQSxJQUFBLE9BQUEsTUFDQSxHQUFBLEtBQUEsRUFNQSxLQUxBLEVBQUEsTUFDQSxJQUFBLElBQ0EsS0FBQSxLQUVBLElBQUEsR0FBQSxJQUNBLElBQUEsT0FBQSxRQUFBLElBQUEsSUFBQSxHQUdBLE9BRkEsUUFDQSxJQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsU0FDQSxJQUFBLElBSUEsUUFBQSxZQUFBLEtBQUEsS0FBQSxPQUFBLE1BRUEsTUFEQSxRQUFBLFFBQUEsRUFDQSxTQUFBLE1BQ0EsR0FBQSxPQUFBLEtBQUEsTUFBQSxPQUlBLFFBSEEsT0FBQSxHQUFBLE9BQUEsVUFDQSxPQUFBLFFBQ0EsSUFBQSxPQUFBLEtBQUEsU0FBQSxNQUFBLElBQ0EsVUFBQSxNQUFBLEtBQUEsT0FJQSxRQUFBLGVBQUEsS0FBQSxXQUNBLE1BQUEsVUFBQSxLQUFBLFNBQ0EsR0FBQSxPQUFBLEtBQUEsTUFBQSxRQUNBLElBQUEsVUFBQSxVQUFBLFFBQUEsS0FBQSxLQUVBLE9BQUEsU0FBQSxLQUFBLFFBSUEsUUFBQSxnQkFBQSxNQUNBLEdBQUEsTUFBQSxHQUFBLEtBQUEsb0JBQ0EsV0FBQSxNQUFBLEVBQUEsSUFBQSxFQUtBLE9BSEEsYUFBQSxVQUFBLEtBQUEsS0FBQSxFQUFBLFFBQUEsUUFBQSxLQUFBLElBQUEsR0FDQSxVQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsR0FLQSxRQUFBLHdCQUFBLE1BRUEsR0FBQSxrQkFBQSxHQUFBLE1BQUEsS0FBQSxFQUFBLEdBQUEsUUFHQSxPQUFBLElBQUEsTUFBQSxLQUFBLEdBQUEsR0FBQSxpQkFBQSxFQUFBLElBQUEsa0JBR0EsUUFBQSxxQkFBQSxVQUNBLE1BQUEsSUFBQSxNQUFBLFNBQUEsY0FBQSxTQUFBLFdBRUEsU0FBQSxXQUFBLEVBQUEsU0FBQSxXQUdBLFFBQUEsWUFBQSxNQUNBLE1BQUEsVUFBQSxNQUNBLEdBQUEsWUFBQSx1QkFBQSxLQUFBLGVBQ0EsVUFBQSxvQkFBQSxNQUVBLE1BQUEsV0FBQSxXQUNBLE9BQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxPQUVBLE9BQUEsV0FBQSxPQUFBLE9BSUEsUUFBQSxZQUFBLEtBQUEsU0FDQSxNQUFBLE1BQUEsV0FBQSxHQUFBLFFBQUEsTUFBQSxHQUFBLFFBQUEsTUFBQSxHQTZIQSxRQUFBLFlBQUEsU0FLQSxRQUFBLGtCQUFBLFFBQ0EsR0FBQSxNQUNBLElBQUEsTUFBQSxPQUFBLE1BQUEsZUFBQSxDQUNBLEdBQUEsTUFBQSxHQUFBLE1BQUEsR0FDQSxPQUFBLEVBQ0EsTUFBQSxFQUNBLFdBQUEsTUFBQSxHQUFBLEtBQUEsZUFBQSxLQUFBLFlBQ0EsV0FBQSxNQUFBLEdBQUEsS0FBQSxZQUFBLEtBQUEsUUFFQSxPQUFBLEtBQ0EsT0FBQSxJQUFBLE1BQUEsR0FBQSxNQUFBLEtBQ0EsTUFBQSxJQUFBLE1BQUEsR0FBQSxNQUFBLE1BRUEsV0FBQSxLQUFBLEtBQUEsSUFBQSxNQUFBLElBQUEsSUFBQSxNQUFBLElBQUEsRUFBQSxJQUFBLE1BQUEsSUFDQSxJQUFBLEdBQUEsSUFBQSxNQUFBLElBQUEsR0FBQSxPQUNBLEVBQUEsSUFBQSxNQUFBLElBQUEsR0FBQSxNQUNBLEVBQUEsSUFBQSxNQUFBLElBQUEsR0FDQSxHQUFBLEtBQUEsTUFBQSxJQUFBLFdBQUEsTUFBQSxNQUFBLElBQUEsSUFFQSxPQURBLFlBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsS0FFQSxNQUFBLFFBdkJBLEdBQUEsZUFBQSxzR0EyQkEsT0FBQSxVQUFBLEtBQUEsT0FBQSxVQUNBLEdBRUEsSUFBQSxNQUZBLEtBQUEsR0FDQSxRQWFBLElBVkEsT0FBQSxRQUFBLGFBQ0EsT0FBQSxRQUFBLGlCQUFBLFNBQUEsT0FDQSxTQUFBLFFBQ0EsS0FBQSxjQUFBLEtBQUEsTUFBQSxJQUFBLE1BQUEsaUJBQUEsT0FHQSxTQUFBLFFBQ0EsS0FBQSxHQUFBLE1BQUEsUUFHQSxPQUFBLE1BQ0EsTUFBQSxLQUdBLE1BQUEsUUFDQSxNQUFBLG1CQUFBLEtBQUEsUUFDQSxPQUNBLE1BQUEsT0FBQSxNQUFBLE1BQUEsR0FDQSxPQUFBLE1BQUEsUUFFQSxNQUFBLEtBQUEsUUFDQSxPQUFBLEtBY0EsT0FWQSxXQUFBLFFBQUEsV0FDQSxLQUFBLEdBQUEsTUFBQSxLQUFBLFdBQ0EsS0FBQSxXQUFBLEtBQUEsYUFBQSxLQUFBLHNCQUVBLFFBQUEsTUFBQSxTQUFBLE9BQ0EsR0FBQSxhQUFBLE9BQ0EsTUFBQSxHQUFBLEdBQUEsS0FBQSxRQUFBLGtCQUNBLE1BQUEsUUFBQSxXQUFBLElBQUEsUUFBQSxNQUFBLE9BR0EsTUFpQ0EsUUFBQSxjQUNBLE1BQUEsVUFBQSxRQUNBLE1BQUEsUUFBQSxRQUFBLElBK0dBLFFBQUEsaUJBQ0EsTUFBQSxVQUFBLE1BQUEsT0FFQSxHQURBLFNBQUEsU0FBQSxNQUFBLE1BQUEsYUFDQSxRQUFBLFNBQUEsU0FBQSxPQUFBLE1BQUEsTUFRQSxJQUxBLE1BREEsTUFBQSxLQUFBLElBQUEsT0FBQSxRQUNBLE9BQUEsT0FFQSxJQUFBLE9BR0EsU0FBQSxPQUVBLE1BQUEsT0FDQSxPQUFBLEVBQUEsTUFBQSxNQUFBLEVBQUEsT0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLFFBRUEsRUFJQSxJQUNBLEdBQUEsRUFEQSxNQWlCQSxLQWJBLE1BQUEsTUFBQSxPQUNBLE1BQUEsTUFBQSxPQUNBLE9BQUEsTUFBQSxTQUNBLE9BQUEsTUFBQSxRQUVBLE1BQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxRQUVBLEVBQUEsTUFBQSxPQUFBLE1BQ0EsRUFBQSxNQUFBLFFBR0EsRUFBQSxFQUFBLElBQ0EsSUFBQSxLQUFBLE1BQUEsR0FHQSxPQUFBLE1BcUhBLFFBQUEsZUFBQSxRQUNBLE1BQUEsVUFBQSxNQUFBLGNBQUEsY0EyQkEsUUFBQSxZQUFBLEdBQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsY0FBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLE1BQUEsY0FBQSxHQUFBLEdBQUEsR0FDQSxJQUFBLElBQUEsS0FBQSxNQUFBLE1BRUEsTUFBQSxHQUVBLFFBQUEsbUJBQUEsS0FBQSxZQUNBLE1BQUEsWUFDQSxTQUFBLEVBQUEsR0FBQSxNQUFBLE1BQUEsRUFBQSxJQUNBLEtBRUEsUUFBQSxTQUFBLEdBQUEsSUFDQSxHQUFBLFVBQUEsSUFDQSxTQUFBLEdBQ0EsT0FBQSxLQUFBLElBQ0EsT0FBQSxLQUFBLE9BQUEsTUFDQSxHQUFBLEdBQUEsVUFDQSxHQUFBLEdBQUEsV0FFQSxVQUFBLEtBQ0EsR0FBQSxHQUFBLGNBQ0EsR0FBQSxHQUFBLGVBRUEsS0FBQSxHQUFBLEVBQ0EsR0FBQSxHQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsR0FBQSxFQXJEQSxJQUFBLFlBQUEsT0FBQSxNQUFBLE1BQ0EsS0FBQSxjQUFBLE1BQUEsTUFDQSxlQUFBLFFBQUEsZUFBQSxlQUFBLGVBQ0EsY0FBQSxJQUFBLGNBQUEsU0FBQSxXQUNBLEdBQUEsYUFBQSxFQUFBLElBQUEsV0FBQSxRQUNBLElBQUEsU0FBQSxjQUNBLEtBQUEsVUFBQSxPQUFBLElBQUEsS0FBQSxVQUFBLE9BQUEsTUFDQSxXQUFBLEtBQUEsVUFBQSxPQUFBLEdBQ0EsVUFBQSxVQUFBLFVBQUEsSUFFQSxJQUFBLE9BQUEsV0FDQSxJQUFBLFVBQUEsQ0FDQSxHQUFBLEtBQUEsS0FDQSxPQUFBLG1CQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsU0FBQSxFQUFBLEtBQUEsRUFBQSxPQUNBLFlBR0EsTUFBQSxtQkFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLFNBQUEsSUFBQSxHQUFBLElBQUEsS0FDQSxhQUdBLEtBQUEsR0FEQSxjQUNBLEVBQUEsRUFBQSxFQUFBLE1BQUEsT0FBQSxJQUFBLFVBQUEsS0FBQSxNQUFBLEdBQ0EsT0FBQSxXQUFBLEtBQUEsa0JBQUEsV0FBQSxnQkFtQ0EsUUFBQSxhQUFBLFdBT0EsTUFOQSxZQUFBLGFBQ0EsV0FDQSxLQUFBLFlBR0EsVUFBQSxTQUFBLFVBQUEsVUFBQSxLQUNBLFFBQUEsV0ErZ0JBLFFBQUEsZ0JBQUEsUUFBQSxNQUFBLE9BQUEsVUFDQSxHQUFBLE1BQUEsS0FDQSxXQUFBLFFBQUEsU0FBQSxXQUFBLFNBQUEsYUFDQSxXQUdBLE1BQUEsVUFDQSxLQUFBLGFBQ0EsS0FBQSxTQUFBLFVBQ0EsS0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE9BQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxXQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxZQUFBLEVBRUEsV0FBQSxZQUFBLE1BR0EsUUFBQSxTQUFBLGdCQWFBLEtBQUEsbUJBQUEsV0FDQSxRQUFBLFNBQUEsU0FBQSxTQUNBLFFBQUEsd0JBZUEsS0FBQSxpQkFBQSxXQUNBLFFBQUEsU0FBQSxTQUFBLFNBQ0EsUUFBQSxzQkFhQSxLQUFBLFlBQUEsU0FBQSxTQUdBLHdCQUFBLFFBQUEsTUFBQSxTQUNBLFNBQUEsS0FBQSxTQUVBLFFBQUEsUUFDQSxLQUFBLFFBQUEsT0FBQSxVQWFBLEtBQUEsZUFBQSxTQUFBLFNBQ0EsUUFBQSxPQUFBLEtBQUEsUUFBQSxTQUFBLGVBQ0EsTUFBQSxRQUFBLE9BRUEsUUFBQSxLQUFBLFNBQUEsU0FBQSxNQUFBLE1BQ0EsS0FBQSxhQUFBLEtBQUEsS0FBQSxXQUVBLFFBQUEsS0FBQSxPQUFBLFNBQUEsTUFBQSxNQUNBLEtBQUEsYUFBQSxLQUFBLEtBQUEsV0FHQSxZQUFBLFNBQUEsVUFhQSxzQkFDQSxLQUFBLEtBQ0EsU0FBQSxRQUNBLElBQUEsU0FBQSxPQUFBLFNBQUEsU0FDQSxHQUFBLE1BQUEsT0FBQSxTQUNBLElBQUEsS0FFQSxDQUNBLEdBQUEsT0FBQSxLQUFBLFFBQUEsUUFDQSxNQUFBLE9BQ0EsS0FBQSxLQUFBLGFBSkEsUUFBQSxXQUFBLFVBUUEsTUFBQSxTQUFBLE9BQUEsU0FBQSxTQUNBLEdBQUEsTUFBQSxPQUFBLFNBQ0EsUUFHQSxZQUFBLEtBQUEsU0FDQSxJQUFBLEtBQUEsY0FDQSxRQUFBLFlBR0EsV0FBQSxXQUNBLFNBQUEsV0FhQSxLQUFBLFVBQUEsV0FDQSxTQUFBLFlBQUEsUUFBQSxnQkFDQSxTQUFBLFNBQUEsUUFBQSxhQUNBLEtBQUEsUUFBQSxFQUNBLEtBQUEsV0FBQSxFQUNBLFdBQUEsYUFpQkEsS0FBQSxhQUFBLFdBQ0EsU0FBQSxTQUFBLFFBQUEsZUFBQSxZQUFBLElBQUEsaUJBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxXQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQ0EsUUFBQSxTQUFBLFNBQUEsU0FDQSxRQUFBLGtCQVdBLEtBQUEsY0FBQSxXQUNBLFNBQUEsU0FBQSxRQUFBLGlCQUNBLEtBQUEsWUFBQSxFQUNBLFdBQUEsaUJBZ25DQSxRQUFBLHNCQUFBLE1BQ0EsS0FBQSxZQUFBLEtBQUEsU0FBQSxPQUNBLE1BQUEsTUFBQSxTQUFBLE9BQUEsTUFBQSxNQUFBLGFBSUEsUUFBQSxlQUFBLE1BQUEsUUFBQSxLQUFBLEtBQUEsU0FBQSxVQUNBLGNBQUEsTUFBQSxRQUFBLEtBQUEsS0FBQSxTQUFBLFVBQ0EscUJBQUEsTUFHQSxRQUFBLGVBQUEsTUFBQSxRQUFBLEtBQUEsS0FBQSxTQUFBLFVBQ0EsR0FDQSxjQURBLFFBQUEsS0FBQSx5QkFDQSxRQUFBLEdBQUEsYUFBQSxXQUNBLEtBQUEsVUFBQSxRQUFBLEdBQUEsS0FLQSxLQUFBLFNBQUEsUUFBQSxDQUNBLEdBQUEsWUFBQSxDQUVBLFNBQUEsR0FBQSxtQkFBQSxXQUNBLFdBQUEsSUFHQSxRQUFBLEdBQUEsaUJBQUEsV0FDQSxXQUFBLEVBQ0EsYUFJQSxHQUFBLFVBQUEsU0FBQSxJQUNBLElBQUEsVUFBQSxDQUNBLEdBQUEsT0FBQSxRQUFBLE1BQ0EsTUFBQSxJQUFBLEdBQUEsSUFNQSxJQUFBLE1BQUEsV0FBQSxJQUFBLFNBQUEsTUFBQSxRQUFBLEdBQUEsY0FBQSxZQUVBLFlBREEsWUFBQSxRQUFBLEdBQUEsWUFPQSxjQUFBLE1BQUEsS0FBQSxRQUFBLFVBQUEsS0FBQSxTQUNBLE1BQUEsS0FBQSxTQU1BLEtBQUEsYUFBQSxPQUFBLEtBQUEsT0FBQSxLQUFBLHdCQUNBLEtBQUEsY0FBQSxNQUFBLFFBTUEsSUFBQSxTQUFBLFNBQUEsU0FDQSxRQUFBLEdBQUEsUUFBQSxjQUNBLENBQ0EsR0FBQSxTQUVBLGNBQUEsU0FBQSxJQUNBLFVBQ0EsUUFBQSxTQUFBLE1BQUEsV0FDQSxTQUFBLElBQ0EsUUFBQSxRQUtBLFNBQUEsR0FBQSxVQUFBLFNBQUEsT0FDQSxHQUFBLEtBQUEsTUFBQSxPQUlBLE1BQUEsS0FBQSxJQUFBLElBQUEsR0FBQSxLQUFBLEtBQUEsSUFBQSxJQUFBLEtBRUEsY0FBQSxTQUlBLFNBQUEsU0FBQSxVQUNBLFFBQUEsR0FBQSxZQUFBLGVBTUEsUUFBQSxHQUFBLFNBQUEsVUFFQSxLQUFBLFFBQUEsV0FDQSxRQUFBLElBQUEsS0FBQSxTQUFBLEtBQUEsYUFBQSxHQUFBLEtBQUEsYUFJQSxRQUFBLFlBQUEsUUFBQSxjQUNBLEdBQUEsT0FBQSxTQUNBLE1BQUEsUUFHQSxJQUFBLFNBQUEsU0FBQSxDQUNBLFlBQUEsVUFBQSxDQUNBLElBQUEsT0FBQSxZQUFBLEtBQUEsUUFDQSxJQUFBLE1BQUEsQ0FDQSxHQUFBLE9BQUEsTUFBQSxHQUNBLE1BQUEsTUFBQSxHQUNBLE1BQUEsRUFDQSxRQUFBLEVBQ0EsUUFBQSxFQUNBLGFBQUEsRUFDQSxXQUFBLHVCQUFBLE1BQ0EsUUFBQSxHQUFBLEtBQUEsRUFTQSxPQVBBLGdCQUNBLE1BQUEsYUFBQSxXQUNBLFFBQUEsYUFBQSxhQUNBLFFBQUEsYUFBQSxhQUNBLGFBQUEsYUFBQSxtQkFHQSxHQUFBLE1BQUEsS0FBQSxFQUFBLFdBQUEsVUFBQSxRQUFBLE1BQUEsUUFBQSxRQUFBLGVBSUEsTUFBQSxLQUdBLFFBQUEsa0JBQUEsT0FBQSxTQUNBLE1BQUEsVUFBQSxJQUFBLE1BQ0EsR0FBQSxPQUFBLEdBRUEsSUFBQSxPQUFBLEtBQ0EsTUFBQSxJQUdBLElBQUEsU0FBQSxLQUFBLENBT0EsR0FIQSxLQUFBLElBQUEsT0FBQSxJQUFBLEtBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxLQUNBLElBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQSxPQUFBLElBRUEsZ0JBQUEsS0FBQSxLQUNBLE1BQUEsSUFBQSxNQUFBLElBS0EsSUFIQSxPQUFBLFVBQUEsRUFDQSxNQUFBLE9BQUEsS0FBQSxLQXVCQSxNQXBCQSxPQUFBLFFBRUEsSUFEQSxNQUVBLEtBQUEsS0FBQSxjQUNBLEdBQUEsS0FBQSxXQUFBLEVBQ0EsR0FBQSxLQUFBLFVBQ0EsR0FBQSxLQUFBLFdBQ0EsR0FBQSxLQUFBLGFBQ0EsR0FBQSxLQUFBLGFBQ0EsSUFBQSxLQUFBLG9CQUdBLEtBQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsR0FHQSxRQUFBLE1BQUEsU0FBQSxLQUFBLE9BQ0EsTUFBQSxRQUFBLFNBQ0EsSUFBQSxRQUFBLFNBQUEsUUFHQSxHQUFBLE1BQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxFQUFBLElBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxHQUFBLElBQUEsSUFBQSxFQUFBLElBQUEsS0FBQSxHQUlBLE1BQUEsTUFJQSxRQUFBLHFCQUFBLEtBQUEsT0FBQSxVQUFBLFFBQ0EsTUFBQSxVQUFBLE1BQUEsUUFBQSxLQUFBLEtBQUEsU0FBQSxTQUFBLFNBb0RBLFFBQUEsd0JBQUEsS0FDQSxNQUFBLFdBQUEsS0FBQSxPQUFBLEtBQUEsSUFBQSxVQUFBLEtBQUEsVUFwREEsZ0JBQUEsTUFBQSxRQUFBLEtBQUEsTUFDQSxjQUFBLE1BQUEsUUFBQSxLQUFBLEtBQUEsU0FBQSxTQUNBLElBQUEsVUFBQSxNQUFBLEtBQUEsVUFBQSxLQUFBLFNBQUEsUUEyQkEsSUF6QkEsS0FBQSxhQUFBLEtBQ0EsS0FBQSxTQUFBLEtBQUEsU0FBQSxPQUNBLEdBQUEsS0FBQSxTQUFBLE9BQUEsTUFBQSxLQUNBLElBQUEsT0FBQSxLQUFBLE9BQUEsQ0FDQSxHQUFBLGNBQUEsS0FBQSxXQUNBLElBQUEsY0FBQSxRQUFBLFNBQUEsQ0FDQSxHQUFBLGdCQUFBLElBQUEsYUFBQSxtQkFDQSxjQUFBLEdBQUEsTUFBQSxhQUFBLFVBQUEsZ0JBRUEsR0FBQSxZQUFBLFVBQUEsTUFBQSxhQUlBLE9BSEEsUUFBQSxVQUNBLFdBQUEsV0FBQSxXQUFBLGFBQUEsV0FBQSxxQkFFQSxXQUVBLE1BQUEsYUFHQSxLQUFBLFlBQUEsS0FBQSxTQUFBLE9BQ0EsTUFBQSxRQUFBLE9BQ0EsUUFBQSxRQUFBLE1BQUEsT0FBQSxVQUVBLEtBR0EsVUFBQSxLQUFBLE1BQUEsS0FBQSxNQUFBLENBQ0EsR0FBQSxPQUNBLE1BQUEsWUFBQSxJQUFBLFNBQUEsT0FDQSxNQUFBLE1BQUEsU0FBQSxRQUFBLFlBQUEsU0FBQSxVQUFBLFFBQUEsUUFFQSxLQUFBLFNBQUEsTUFBQSxTQUFBLEtBQ0EsT0FBQSx1QkFBQSxLQUNBLEtBQUEsY0FJQSxHQUFBLFVBQUEsS0FBQSxNQUFBLEtBQUEsTUFBQSxDQUNBLEdBQUEsT0FDQSxNQUFBLFlBQUEsSUFBQSxTQUFBLE9BQ0EsTUFBQSxNQUFBLFNBQUEsUUFBQSxZQUFBLFNBQUEsVUFBQSxRQUFBLFFBRUEsS0FBQSxTQUFBLE1BQUEsU0FBQSxLQUNBLE9BQUEsdUJBQUEsS0FDQSxLQUFBLGdCQVVBLFFBQUEsaUJBQUEsTUFBQSxRQUFBLEtBQUEsTUFDQSxHQUFBLE1BQUEsUUFBQSxHQUNBLGlCQUFBLEtBQUEsc0JBQUEsU0FBQSxLQUFBLFNBQ0EsbUJBQ0EsS0FBQSxTQUFBLEtBQUEsU0FBQSxPQUNBLEdBQUEsVUFBQSxRQUFBLEtBQUEsNEJBS0EsT0FBQSxVQUFBLFdBQUEsU0FBQSxhQUFBLFVBQUEsUUFLQSxRQUFBLGlCQUFBLE1BQUEsUUFBQSxLQUFBLEtBQUEsU0FBQSxVQXFCQSxHQXBCQSxnQkFBQSxNQUFBLFFBQUEsS0FBQSxNQUNBLGNBQUEsTUFBQSxRQUFBLEtBQUEsS0FBQSxTQUFBLFVBRUEsS0FBQSxhQUFBLFNBQ0EsS0FBQSxTQUFBLEtBQUEsU0FBQSxPQUNBLE1BQUEsTUFBQSxTQUFBLE9BQUEsS0FDQSxjQUFBLEtBQUEsT0FBQSxXQUFBLE9BQ0EsWUFHQSxLQUFBLFlBQUEsS0FBQSxTQUFBLE9BQ0EsSUFBQSxLQUFBLFNBQUEsT0FBQSxDQUNBLElBQUEsU0FBQSxPQUNBLEtBQUEsZ0JBQUEsU0FBQSxnQ0FBQSxNQUVBLE9BQUEsTUFBQSxXQUVBLE1BQUEsU0FHQSxLQUFBLEtBQUEsS0FBQSxNQUFBLENBQ0EsR0FBQSxPQUNBLE1BQUEsWUFBQSxJQUFBLFNBQUEsT0FDQSxNQUFBLE1BQUEsU0FBQSxRQUFBLFlBQUEsU0FBQSxPQUFBLFFBR0EsS0FBQSxTQUFBLE1BQUEsU0FBQSxLQUNBLFVBQUEsT0FBQSxTQUFBLE9BQ0EsSUFBQSxXQUFBLElBQUEsS0FFQSxPQUFBLFNBQUEsT0FBQSxNQUFBLEtBQUEsSUFBQSxVQUVBLEtBQUEsY0FJQSxHQUFBLEtBQUEsS0FBQSxLQUFBLE1BQUEsQ0FDQSxHQUFBLE9BQ0EsTUFBQSxZQUFBLElBQUEsU0FBQSxPQUNBLE1BQUEsTUFBQSxTQUFBLFFBQUEsWUFBQSxTQUFBLFFBQUEsT0FHQSxLQUFBLFNBQUEsTUFBQSxTQUFBLEtBQ0EsVUFBQSxPQUFBLFNBQUEsT0FDQSxJQUFBLFdBQUEsSUFBQSxLQUVBLE9BQUEsU0FBQSxPQUFBLE1BQUEsS0FBQSxJQUFBLFVBRUEsS0FBQSxlQUtBLFFBQUEsY0FBQSxNQUFBLFFBQUEsS0FBQSxLQUFBLFNBQUEsVUFHQSxjQUFBLE1BQUEsUUFBQSxLQUFBLEtBQUEsU0FBQSxVQUNBLHFCQUFBLE1BRUEsS0FBQSxhQUFBLE1BQ0EsS0FBQSxZQUFBLElBQUEsU0FBQSxPQUNBLE1BQUEsTUFBQSxTQUFBLFFBQUEsV0FBQSxLQUFBLFFBSUEsUUFBQSxnQkFBQSxNQUFBLFFBQUEsS0FBQSxLQUFBLFNBQUEsVUFHQSxjQUFBLE1BQUEsUUFBQSxLQUFBLEtBQUEsU0FBQSxVQUNBLHFCQUFBLE1BRUEsS0FBQSxhQUFBLFFBQ0EsS0FBQSxZQUFBLE1BQUEsU0FBQSxPQUNBLE1BQUEsTUFBQSxTQUFBLFFBQUEsYUFBQSxLQUFBLFFBSUEsUUFBQSxnQkFBQSxNQUFBLFFBQUEsS0FBQSxNQUVBLFlBQUEsS0FBQSxPQUNBLFFBQUEsS0FBQSxPQUFBLFVBR0EsSUFBQSxVQUFBLFNBQUEsSUFDQSxRQUFBLEdBQUEsU0FDQSxLQUFBLGNBQUEsS0FBQSxNQUFBLElBQUEsR0FBQSxNQUlBLFNBQUEsR0FBQSxRQUFBLFVBRUEsS0FBQSxRQUFBLFdBQ0EsR0FBQSxPQUFBLEtBQUEsS0FDQSxTQUFBLEdBQUEsUUFBQSxPQUFBLEtBQUEsWUFHQSxLQUFBLFNBQUEsUUFBQSxLQUFBLFNBR0EsUUFBQSxtQkFBQSxPQUFBLFFBQUEsS0FBQSxXQUFBLFVBQ0EsR0FBQSxRQUNBLElBQUEsVUFBQSxZQUFBLENBRUEsR0FEQSxRQUFBLE9BQUEsYUFDQSxRQUFBLFNBQ0EsS0FBQSxRQUFBLFdBQUEsWUFBQSx5REFDQSxLQUFBLFdBRUEsT0FBQSxTQUFBLFNBRUEsTUFBQSxVQUdBLFFBQUEsbUJBQUEsTUFBQSxRQUFBLEtBQUEsS0FBQSxTQUFBLFNBQUEsUUFBQSxRQUNBLEdBQUEsV0FBQSxrQkFBQSxPQUFBLE1BQUEsY0FBQSxLQUFBLGFBQUEsR0FDQSxXQUFBLGtCQUFBLE9BQUEsTUFBQSxlQUFBLEtBQUEsY0FBQSxHQUVBLFNBQUEsU0FBQSxJQUNBLEtBQUEsY0FBQSxRQUFBLEdBQUEsUUFBQSxJQUFBLEdBQUEsTUFHQSxTQUFBLEdBQUEsUUFBQSxVQUVBLEtBQUEsUUFBQSxXQUNBLFFBQUEsR0FBQSxRQUFBLEtBQUEsWUFJQSxLQUFBLFNBQUEsU0FBQSxPQUNBLE1BQUEsU0FBQSxXQUdBLEtBQUEsWUFBQSxLQUFBLFNBQUEsT0FDQSxNQUFBLFFBQUEsTUFBQSxhQUdBLEtBQUEsU0FBQSxLQUFBLFNBQUEsT0FDQSxNQUFBLE9BQUEsVUFBQSxhQXVuREEsUUFBQSxzQkFBQSxTQVlBLFFBQUEsYUFBQSxtQkFBQSxNQUFBLFNBQ0EsUUFBQSxVQUNBLGFBQUEsV0FBQSxtQkFBQSxTQUVBLGdCQUFBLFdBQUEsbUJBQUEsU0FFQSxVQUFBLE9BSUEsT0FDQSxNQUFBLEtBQUEsT0FBQSxtQkFBQSxTQUNBLElBQUEsS0FBQSxVQUFBLG1CQUFBLFdBRUEsSUFBQSxLQUFBLE9BQUEsbUJBQUEsU0FDQSxNQUFBLEtBQUEsVUFBQSxtQkFBQSxXQVJBLE1BQUEsS0FBQSxPQUFBLG1CQUFBLFNBQ0EsTUFBQSxLQUFBLFVBQUEsbUJBQUEsVUFVQSxLQUFBLFVBQ0Esa0JBQUEsZUFBQSxHQUNBLEtBQUEsT0FBQSxLQUFBLFNBQUEsVUFDQSxvQkFBQSxHQUFBLFFBRUEsa0JBQUEsZUFBQSxHQUNBLEtBQUEsT0FBQSxjQUFBLEtBQUEsUUFDQSxLQUFBLFVBQUEsS0FBQSxPQUNBLG9CQUFBLEdBQUEsS0FBQSxRQU9BLElBQUEsY0FFQSxlQURBLEtBQUEsVUFBQSxLQUFBLFNBQUEsb0JBQ0EsVUFDQSxLQUFBLE9BQUEscUJBQ0EsRUFDQSxLQUFBLFVBQUEscUJBQ0EsRUFFQSxLQUVBLG9CQUFBLG1CQUFBLGVBQ0EsV0FBQSxhQUFBLG1CQUFBLGNBQUEsTUFHQSxRQUFBLGNBQUEsS0FBQSxNQUFBLFNBQ0EsS0FBQSxRQUNBLEtBQUEsVUFFQSxJQUFBLEtBQUEsTUFBQSxNQUFBLFNBR0EsUUFBQSxpQkFBQSxLQUFBLE1BQUEsU0FDQSxLQUFBLE9BQ0EsTUFBQSxLQUFBLE1BQUEsTUFBQSxTQUVBLGNBQUEsS0FBQSxTQUNBLEtBQUEsTUFBQSxXQUlBLFFBQUEsbUJBQUEsVUFBQSxhQUNBLGNBQUEsV0FBQSxZQUNBLFNBQUEsU0FBQSxTQUFBLFdBQ0EsV0FBQSxZQUFBLElBQ0EsYUFBQSxXQUFBLGFBQ0EsU0FBQSxZQUFBLFNBQUEsV0FDQSxXQUFBLFlBQUEsR0FJQSxRQUFBLHFCQUFBLG1CQUFBLFNBQ0EsbUJBQUEsbUJBQUEsSUFBQSxXQUFBLG1CQUFBLEtBQUEsR0FFQSxrQkFBQSxZQUFBLG1CQUFBLFdBQUEsR0FDQSxrQkFBQSxjQUFBLG1CQUFBLFdBQUEsR0F4RkEsR0FBQSxNQUFBLFFBQUEsS0FDQSxTQUFBLFFBQUEsU0FDQSxjQUNBLElBQUEsUUFBQSxJQUNBLE1BQUEsUUFBQSxNQUNBLFdBQUEsUUFBQSxXQUNBLFNBQUEsUUFBQSxRQUVBLE1BQUEsYUFBQSxZQUNBLG9CQUFBLElBQUEsR0FtRkEsUUFBQSxlQUFBLEtBQ0EsR0FBQSxJQUNBLElBQUEsR0FBQSxRQUFBLEtBQ0EsT0FBQSxDQUdBLFFBQUEsRUFnTkEsUUFBQSxnQkFBQSxLQUFBLFVBRUEsTUFEQSxNQUFBLFVBQUEsTUFDQSxXQUFBLFNBQUEsVUErRUEsUUFBQSxpQkFBQSxRQUFBLFNBQ0EsR0FBQSxVQUVBLE9BQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxJQUFBLENBRUEsSUFBQSxHQURBLE9BQUEsUUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxJQUNBLEdBQUEsT0FBQSxRQUFBLEdBQUEsUUFBQSxNQUVBLFFBQUEsS0FBQSxPQUVBLE1BQUEsUUFHQSxRQUFBLGNBQUEsVUFDQSxHQUFBLFFBQUEsVUFDQSxNQUFBLFNBQ0EsSUFBQSxTQUFBLFVBQ0EsTUFBQSxVQUFBLE1BQUEsSUFDQSxJQUFBLFNBQUEsVUFBQSxDQUNBLEdBQUEsV0FNQSxPQUxBLFNBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxJQUNBLFFBQUEsUUFBQSxPQUFBLEVBQUEsTUFBQSxTQUdBLFFBRUEsTUFBQSxVQTFHQSxPQUNBLFNBQUEsS0FDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BdUJBLFFBQUEsWUFBQSxTQUNBLEdBQUEsWUFBQSxrQkFBQSxRQUFBLEVBQ0EsTUFBQSxVQUFBLFlBR0EsUUFBQSxlQUFBLFNBQ0EsR0FBQSxZQUFBLGtCQUFBLFFBQUEsR0FDQSxNQUFBLGFBQUEsWUFHQSxRQUFBLG1CQUFBLFFBQUEsT0FDQSxHQUFBLGFBQUEsUUFBQSxLQUFBLG9CQUNBLGtCQVVBLE9BVEEsU0FBQSxRQUFBLFNBQUEsWUFDQSxNQUFBLEdBQUEsWUFBQSxjQUNBLFlBQUEsWUFBQSxZQUFBLFlBQUEsR0FBQSxNQUNBLFlBQUEsZUFBQSxNQUFBLElBQ0EsZ0JBQUEsS0FBQSxjQUlBLFFBQUEsS0FBQSxlQUFBLGFBQ0EsZ0JBQUEsS0FBQSxLQUdBLFFBQUEsZUFBQSxXQUFBLFlBQ0EsR0FBQSxPQUFBLGdCQUFBLFdBQUEsWUFDQSxTQUFBLGdCQUFBLFdBQUEsV0FDQSxPQUFBLGtCQUFBLE1BQUEsR0FDQSxTQUFBLGtCQUFBLFNBQUEsSUFDQSxPQUFBLE1BQUEsUUFDQSxTQUFBLFNBQUEsUUFBQSxPQUVBLFVBQUEsU0FBQSxRQUNBLFNBQUEsWUFBQSxRQUFBLFVBSUEsUUFBQSxvQkFBQSxRQUNBLEdBQUEsWUFBQSxHQUFBLE1BQUEsT0FBQSxJQUFBLFNBQUEsQ0FDQSxHQUFBLFlBQUEsYUFBQSxXQUNBLElBQUEsUUFFQSxJQUFBLE9BQUEsT0FBQSxRQUFBLENBQ0EsR0FBQSxZQUFBLGFBQUEsT0FDQSxlQUFBLFdBQUEsaUJBSEEsWUFBQSxZQU1BLE9BQUEsWUFBQSxRQXRFQSxHQUFBLE9BRUEsT0FBQSxPQUFBLEtBQUEsTUFBQSxvQkFBQSxHQUVBLEtBQUEsU0FBQSxRQUFBLFdBQ0EsbUJBQUEsTUFBQSxNQUFBLEtBQUEsVUFJQSxZQUFBLE1BQ0EsTUFBQSxPQUFBLFNBQUEsU0FBQSxPQUFBLFdBRUEsR0FBQSxLQUFBLEVBQUEsTUFDQSxJQUFBLE9BQUEsRUFBQSxXQUFBLENBQ0EsR0FBQSxTQUFBLGFBQUEsTUFBQSxNQUFBLEtBQUEsT0FDQSxPQUFBLFNBQ0EsV0FBQSxTQUNBLGNBQUEsZ0JBM3RvQkEsR0FBQSxxQkFBQSxxQkFJQSx3QkFBQSxXQVlBLFVBQUEsU0FBQSxRQUFBLE1BQUEsVUFBQSxRQUFBLE9BQUEsY0FBQSxRQUNBLGVBQUEsT0FBQSxVQUFBLGVBWUEsVUFBQSxTQUFBLFFBQUEsTUFBQSxVQUFBLFFBQUEsT0FBQSxjQUFBLFFBR0EsZ0JBQUEsU0FBQSxHQUVBLE1BQUEsVUFBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLFNBQUEsSUFBQSxNQUFBLFFBQUEsYUFBQSxHQUFBLEdBQUEsV0FBQSxNQUNBLEdBRUEsZ0JBQUEsU0FBQSxHQUVBLE1BQUEsVUFBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLFNBQUEsSUFBQSxNQUFBLFFBQUEsYUFBQSxJQUFBLEdBQUEsV0FBQSxNQUNBLEVBT0EsT0FBQSxJQUFBLGdCQUNBLFVBQUEsZ0JBQ0EsVUFBQSxnQkFJQSxJQUNBLE1BQ0EsT0FDQSxPQVFBLGNBUEEsU0FBQSxNQUNBLFFBQUEsS0FDQSxTQUFBLE9BQUEsVUFBQSxTQUNBLFNBQUEsT0FBQSxNQUdBLFFBQUEsT0FBQSxVQUFBLE9BQUEsWUFFQSxJQUFBLENBTUEsTUFBQSxLQUFBLGFBQUEsS0FBQSxVQUFBLFVBQUEsaUJBQUEsSUFDQSxNQUFBLFFBQ0EsS0FBQSxLQUFBLHdCQUFBLEtBQUEsVUFBQSxVQUFBLGlCQUFBLEtBeU1BLEtBQUEsV0FvQkEsU0FBQSxVQWlIQSxJQW84QkEsa0NBcDhCQSxRQUFBLE1BQUEsUUFrRUEsS0FBQSxTQUFBLE9BQ0EsTUFBQSxVQUFBLE9BQUEsTUFBQSxPQUFBLE9BcVVBLElBQUEsV0FDQSxHQUFBLFVBQUEsSUFBQSxXQUFBLE1BQUEsS0FBQSxTQUVBLElBQUEsV0FBQSxTQUFBLGNBQUEsY0FDQSxTQUFBLGNBQUEsaUJBRUEsS0FBQSxPQUNBLElBRUEsR0FBQSxVQUFBLElBRUEsTUFBQSxHQUNBLFFBQUEsRUFJQSxNQUFBLEtBQUEsVUFBQSxRQTRPQSxnQkFBQSxNQUFBLFdBQUEsTUFBQSxTQXVUQSxrQkFBQSxTQVFBLGlCQUFBLEVBc2pCQSxTQUNBLEtBQUEsYUFDQSxNQUFBLEVBQ0EsTUFBQSxFQUNBLElBQUEsRUFDQSxTQUFBLHFCQTJPQSxRQUFBLFFBQUEsT0FFQSxJQUFBLFNBQUEsT0FBQSxTQUNBLEtBQUEsRUFDQSxtQkFBQSxTQUFBLFFBQUEsS0FBQSxJQUNBLFFBQUEsaUJBQUEsS0FBQSxJQUFBLElBRUEsc0JBQUEsU0FBQSxRQUFBLEtBQUEsSUFDQSxRQUFBLG9CQUFBLEtBQUEsSUFBQSxHQU1BLFFBQUEsTUFBQSxTQUFBLE1BRUEsTUFBQSxNQUFBLE1BQUEsS0FBQSxLQUFBLGNBTUEsSUFBQSxzQkFBQSxrQkFDQSxnQkFBQSxjQUNBLGlCQUFBLFdBQUEsV0FBQSxXQUFBLGFBQ0EsYUFBQSxPQUFBLFVBZUEsa0JBQUEsNkJBQ0EsWUFBQSxZQUNBLGdCQUFBLFlBQ0EsaUJBQUEsMEVBRUEsU0FDQSxRQUFBLEVBQUEsK0JBQUEsYUFFQSxPQUFBLEVBQUEsVUFBQSxZQUNBLEtBQUEsRUFBQSxvQkFBQSx1QkFDQSxJQUFBLEVBQUEsaUJBQUEsb0JBQ0EsSUFBQSxFQUFBLHFCQUFBLHlCQUNBLFVBQUEsRUFBQSxHQUFBLElBR0EsU0FBQSxTQUFBLFFBQUEsT0FDQSxRQUFBLE1BQUEsUUFBQSxNQUFBLFFBQUEsU0FBQSxRQUFBLFFBQUEsUUFBQSxNQUNBLFFBQUEsR0FBQSxRQUFBLEVBeVNBLElBQUEsaUJBQUEsT0FBQSxXQUNBLE1BQUEsU0FBQSxJQUdBLFFBQUEsV0FDQSxRQUNBLE9BQUEsRUFDQSxNQUxBLEdBQUEsUUFBQSxDQVNBLGNBQUEsU0FBQSxXQUNBLFdBQUEsVUFFQSxLQUFBLEdBQUEsbUJBQUEsU0FHQSxPQUFBLFFBQUEsR0FBQSxPQUFBLFNBRUEsS0FBQSxHQUFBLG1CQUFBLFdBR0EsU0FBQSxXQUNBLEdBQUEsU0FFQSxPQURBLFNBQUEsS0FBQSxTQUFBLEdBQUEsTUFBQSxLQUFBLEdBQUEsS0FDQSxJQUFBLE1BQUEsS0FBQSxNQUFBLEtBR0EsR0FBQSxTQUFBLE9BQ0EsTUFBQSxRQUFBLE9BQUEsRUFBQSxLQUFBLE9BQUEsS0FBQSxLQUFBLE9BQUEsU0FHQSxPQUFBLEVBQ0EsS0FBQSxLQUNBLFFBQUEsS0FDQSxVQUFBLFFBUUEsZUFDQSxTQUFBLDREQUFBLE1BQUEsS0FBQSxTQUFBLE9BQ0EsYUFBQSxVQUFBLFFBQUEsT0FFQSxJQUFBLG9CQUNBLFNBQUEsbURBQUEsTUFBQSxLQUFBLFNBQUEsT0FDQSxpQkFBQSxRQUFBLEdBRUEsSUFBQSxlQUNBLFlBQUEsWUFDQSxZQUFBLFlBQ0EsTUFBQSxNQUNBLE1BQUEsTUFDQSxVQUFBLFVBZ0JBLFVBQ0EsS0FBQSxXQUNBLFdBQUEsa0JBQ0EsU0FBQSxHQUFBLE1BQ0EsT0FBQSxNQUFBLEtBR0EsU0FDQSxLQUFBLFdBQ0EsY0FBQSxvQkFFQSxNQUFBLFNBQUEsU0FFQSxNQUFBLFFBQUEsS0FBQSxRQUFBLFdBQUEsb0JBQUEsUUFBQSxZQUFBLFNBQUEsZ0JBQUEsWUFHQSxhQUFBLFNBQUEsU0FFQSxNQUFBLFFBQUEsS0FBQSxRQUFBLGtCQUFBLE9BQUEsS0FBQSxRQUFBLDRCQUdBLFdBQUEsaUJBRUEsU0FBQSxTQUFBLFNBQ0EsTUFBQSxxQkFBQSxRQUFBLGNBR0EsV0FBQSxTQUFBLFFBQUEsTUFDQSxRQUFBLGdCQUFBLE9BR0EsU0FBQSxlQUVBLElBQUEsU0FBQSxRQUFBLEtBQUEsT0FHQSxNQUZBLE1BQUEsVUFBQSxNQUVBLFVBQUEsWUFDQSxRQUFBLE1BQUEsTUFBQSxPQUVBLFFBQUEsTUFBQSxPQUlBLEtBQUEsU0FBQSxRQUFBLEtBQUEsT0FDQSxHQUFBLGdCQUFBLFVBQUEsS0FDQSxJQUFBLGFBQUEsZ0JBQUEsQ0FDQSxJQUFBLFVBQUEsT0FTQSxNQUFBLFNBQUEsUUFDQSxRQUFBLFdBQUEsYUFBQSxPQUFBLE1BQUEsVUFDQSxlQUNBLFNBWEEsUUFDQSxRQUFBLE9BQUEsRUFDQSxRQUFBLGFBQUEsS0FBQSxrQkFFQSxRQUFBLE9BQUEsRUFDQSxRQUFBLGdCQUFBLHFCQVFBLElBQUEsVUFBQSxPQUNBLFFBQUEsYUFBQSxLQUFBLFdBQ0EsSUFBQSxRQUFBLGFBQUEsQ0FHQSxHQUFBLEtBQUEsUUFBQSxhQUFBLEtBQUEsRUFFQSxPQUFBLFFBQUEsSUFBQSxVQUFBLE1BSUEsS0FBQSxTQUFBLFFBQUEsS0FBQSxPQUNBLE1BQUEsV0FBQSxZQUNBLFFBQUEsTUFBQSxPQUVBLFFBQUEsT0FJQSxLQUFBLFdBSUEsUUFBQSxTQUFBLFFBQUEsT0FDQSxHQUFBLFlBQUEsT0FBQSxDQUNBLEdBQUEsVUFBQSxRQUFBLFFBQ0EsT0FBQSxLQUFBLFVBQUEsSUFBQSxTQUFBLFFBQUEsWUFBQSxHQUVBLFFBQUEsWUFBQSxNQVBBLE1BREEsU0FBQSxJQUFBLEdBQ0EsV0FXQSxJQUFBLFNBQUEsUUFBQSxPQUNBLEdBQUEsWUFBQSxPQUFBLENBQ0EsR0FBQSxRQUFBLFVBQUEsV0FBQSxVQUFBLFNBQUEsQ0FDQSxHQUFBLFVBTUEsT0FMQSxTQUFBLFFBQUEsUUFBQSxTQUFBLFFBQ0EsT0FBQSxVQUNBLE9BQUEsS0FBQSxPQUFBLE9BQUEsT0FBQSxRQUdBLElBQUEsT0FBQSxPQUFBLEtBQUEsT0FFQSxNQUFBLFNBQUEsTUFFQSxRQUFBLE1BQUEsT0FHQSxLQUFBLFNBQUEsUUFBQSxPQUNBLE1BQUEsYUFBQSxPQUNBLFFBQUEsV0FFQSxhQUFBLFNBQUEsUUFDQSxRQUFBLFVBQUEsU0FHQSxNQUFBLGFBQ0EsU0FBQSxHQUFBLE1BSUEsT0FBQSxVQUFBLE1BQUEsU0FBQSxLQUFBLE1BQ0EsR0FBQSxHQUFBLElBQ0EsVUFBQSxLQUFBLE1BS0EsSUFBQSxLQUFBLGNBQ0EsR0FBQSxHQUFBLFFBQUEsS0FBQSxnQkFBQSxLQUFBLGlCQUFBLEtBQUEsUUFBQSxVQUFBLENBQ0EsR0FBQSxTQUFBLE1BQUEsQ0FHQSxJQUFBLEVBQUEsRUFBQSxVQUFBLEVBQUEsSUFDQSxHQUFBLEtBQUEsV0FFQSxHQUFBLEtBQUEsR0FBQSxVQUVBLEtBQUEsTUFBQSxNQUNBLEdBQUEsS0FBQSxHQUFBLElBQUEsS0FBQSxLQUtBLE9BQUEsTUFPQSxJQUFBLEdBSEEsT0FBQSxHQUFBLElBRUEsR0FBQSxRQUFBLFVBQUEsS0FBQSxJQUFBLFVBQUEsR0FBQSxVQUNBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsV0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBLEtBQ0EsT0FBQSxNQUFBLE1BQUEsVUFBQSxVQUVBLE1BQUEsT0FJQSxJQUFBLEVBQUEsRUFBQSxVQUFBLEVBQUEsSUFDQSxHQUFBLEtBQUEsR0FBQSxLQUFBLEtBR0EsT0FBQSxTQTJEQSxTQUNBLFdBQUEsaUJBRUEsR0FBQSxRQUFBLFVBQUEsUUFBQSxLQUFBLEdBQUEsYUFDQSxHQUFBLFVBQUEsYUFBQSxLQUFBLGNBQUEsU0FBQSx3RUFHQSxJQUFBLGtCQUFBLFNBQUEsQ0FJQSxHQUFBLGNBQUEsbUJBQUEsU0FBQSxHQUNBLE9BQUEsYUFBQSxPQUNBLE9BQUEsYUFBQSxNQUVBLFVBQ0EsT0FBQSxhQUFBLE9BQUEsbUJBQUEsUUFBQSxRQU9BLEtBSEEsR0FBQSxPQUFBLEtBQUEsUUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLE1BQUEsTUFDQSxFQUFBLE1BQUEsT0FFQSxLQUFBLENBQ0EsS0FBQSxNQUFBLEVBQ0EsSUFBQSxVQUFBLE9BQUEsS0FFQSxZQUNBLE9BQUEsU0FFQSxlQUFBLE1BQUEsZUFBQSxLQUtBLFNBQUEsUUFBQSxnQkFBQSxNQUFBLFNBQUEsT0FDQSxHQUFBLFFBQUEsS0FBQSxRQUFBLE1BQUEsZ0JBR0EsU0FBQSxVQUFBLFNBQUEsT0FBQSxTQUFBLFdBQ0EsT0FBQSxNQUFBO0dBS0EsYUFBQSxNQUNBLG1CQUFBLFFBQUEsS0FBQSxRQUdBLFNBQUEsT0FBQSxPQUVBLFNBQUEsS0FBQSxPQUlBLElBQUEsVUFFQSxJQUFBLFNBQUEsUUFBQSxLQUFBLElBQ0EsUUFBQSxPQUFBLFNBS0EsUUFBQSxHQUFBLEtBQUEsUUFBQSxRQUNBLFFBQUEsSUFBQSxLQUFBLElBQ0EsUUFBQSxJQUFBLEtBQUEsUUFFQSxRQUFBLEdBQUEsS0FBQSxLQUdBLFlBQUEsU0FBQSxRQUFBLGFBQ0EsR0FBQSxPQUFBLE9BQUEsUUFBQSxVQUNBLGNBQUEsU0FDQSxRQUFBLEdBQUEsUUFBQSxhQUFBLFNBQUEsTUFDQSxNQUNBLE9BQUEsYUFBQSxLQUFBLE1BQUEsYUFFQSxPQUFBLGFBQUEsS0FBQSxTQUVBLE1BQUEsUUFJQSxTQUFBLFNBQUEsU0FDQSxHQUFBLFlBS0EsT0FKQSxTQUFBLFFBQUEsV0FBQSxTQUFBLFNBQ0EsSUFBQSxRQUFBLFVBQ0EsU0FBQSxLQUFBLFdBRUEsVUFHQSxTQUFBLFNBQUEsU0FDQSxNQUFBLFNBQUEsaUJBQUEsUUFBQSxnQkFHQSxPQUFBLFNBQUEsUUFBQSxNQUNBLEdBQUEsVUFBQSxRQUFBLFFBQ0EsSUFBQSxJQUFBLFVBQUEsS0FBQSxTQUFBLENBRUEsS0FBQSxHQUFBLFFBQUEsS0FFQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSxPQUFBLEdBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxPQUFBLEtBQUEsRUFDQSxTQUFBLFlBQUEsVUFJQSxRQUFBLFNBQUEsUUFBQSxNQUNBLEdBQUEsSUFBQSxRQUFBLFNBQUEsQ0FDQSxHQUFBLE9BQUEsUUFBQSxVQUNBLFNBQUEsR0FBQSxRQUFBLE1BQUEsU0FBQSxPQUNBLFFBQUEsYUFBQSxNQUFBLFdBS0EsS0FBQSxTQUFBLFFBQUEsVUFDQSxTQUFBLE9BQUEsVUFBQSxHQUFBLEdBQUEsUUFBQSxFQUNBLElBQUEsUUFBQSxRQUFBLFVBQ0EsU0FDQSxPQUFBLGFBQUEsU0FBQSxTQUVBLFNBQUEsWUFBQSxVQUdBLE9BQUEsYUFFQSxPQUFBLFNBQUEsU0FDQSxhQUFBLFNBQUEsSUFHQSxNQUFBLFNBQUEsUUFBQSxZQUNBLEdBQUEsT0FBQSxRQUFBLE9BQUEsUUFBQSxVQUNBLFlBQUEsR0FBQSxRQUFBLFdBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLFdBQUEsT0FBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsTUFBQSxXQUFBLEVBQ0EsUUFBQSxhQUFBLEtBQUEsTUFBQSxhQUNBLE1BQUEsT0FJQSxTQUFBLGVBQ0EsWUFBQSxrQkFFQSxZQUFBLFNBQUEsUUFBQSxTQUFBLFdBQ0EsVUFDQSxRQUFBLFNBQUEsTUFBQSxLQUFBLFNBQUEsV0FDQSxHQUFBLGdCQUFBLFNBQ0EsYUFBQSxrQkFDQSxnQkFBQSxlQUFBLFFBQUEsYUFFQSxlQUFBLGVBQUEsbUJBQUEsUUFBQSxjQUtBLE9BQUEsU0FBQSxTQUNBLEdBQUEsUUFBQSxRQUFBLFVBQ0EsT0FBQSxTQUFBLEtBQUEsT0FBQSxTQUFBLE9BQUEsTUFHQSxLQUFBLFNBQUEsU0FDQSxNQUFBLFNBQUEsb0JBR0EsS0FBQSxTQUFBLFFBQUEsVUFDQSxNQUFBLFNBQUEscUJBQ0EsUUFBQSxxQkFBQSxjQU1BLE1BQUEsWUFFQSxlQUFBLFNBQUEsUUFBQSxNQUFBLGlCQUVBLEdBQUEsWUFBQSxhQUFBLFlBQ0EsVUFBQSxNQUFBLE1BQUEsTUFDQSxhQUFBLG1CQUFBLFNBQ0EsT0FBQSxjQUFBLGFBQUEsT0FDQSxTQUFBLFFBQUEsT0FBQSxVQUVBLFlBRUEsWUFDQSxlQUFBLFdBQUEsS0FBQSxrQkFBQSxHQUNBLG1CQUFBLFdBQUEsTUFBQSxNQUFBLG9CQUFBLEdBQ0EseUJBQUEsV0FBQSxLQUFBLDZCQUFBLEdBQ0EsOEJBQUEsV0FBQSxNQUFBLE1BQUEsK0JBQUEsR0FDQSxnQkFBQSxLQUNBLEtBQUEsVUFDQSxPQUFBLFNBSUEsTUFBQSxPQUNBLFdBQUEsT0FBQSxXQUFBLFFBSUEsYUFBQSxZQUFBLFVBQ0EsWUFBQSxpQkFBQSxZQUFBLE9BQUEsa0JBQUEsWUFFQSxRQUFBLGFBQUEsU0FBQSxJQUNBLFdBQUEsaUNBQ0EsR0FBQSxNQUFBLFFBQUEsa0JBS0EsU0FBQSxHQUFBLE1BSUEsT0FBQSxVQUFBLE1BQUEsU0FBQSxLQUFBLEtBQUEsTUFHQSxJQUFBLEdBRkEsT0FFQSxFQUFBLEVBQUEsR0FBQSxLQUFBLE9BQUEsR0FBQSxFQUFBLElBQ0EsWUFBQSxRQUNBLE1BQUEsR0FBQSxLQUFBLEdBQUEsS0FBQSxLQUFBLE1BQ0EsVUFBQSxTQUVBLE1BQUEsT0FBQSxTQUdBLGVBQUEsTUFBQSxHQUFBLEtBQUEsR0FBQSxLQUFBLEtBQUEsTUFHQSxPQUFBLFdBQUEsT0FBQSxNQUFBLE1BSUEsT0FBQSxVQUFBLEtBQUEsT0FBQSxVQUFBLEdBQ0EsT0FBQSxVQUFBLE9BQUEsT0FBQSxVQUFBLE1BK0NBLFFBQUEsV0FNQSxJQUFBLFNBQUEsSUFBQSxPQUNBLEtBQUEsUUFBQSxJQUFBLEtBQUEsVUFBQSxPQU9BLElBQUEsU0FBQSxLQUNBLE1BQUEsTUFBQSxRQUFBLElBQUEsS0FBQSxXQU9BLE9BQUEsU0FBQSxLQUNBLEdBQUEsT0FBQSxLQUFBLElBQUEsUUFBQSxJQUFBLEtBQUEsU0FFQSxjQURBLE1BQUEsS0FDQSxPQWlFQSxJQUFBLFNBQUEscUNBQ0EsYUFBQSxJQUNBLE9BQUEsdUJBQ0EsZUFBQSxtQ0FDQSxnQkFBQSxPQUFBLFlBeXZCQSxnQkFBQSxXQUFBLFFBeUdBLElBQUEsZ0JBQUEsT0FBQSxZQWVBLGtCQUFBLFdBQUEsU0FBQSxVQUdBLEtBQUEsZUFrQ0EsS0FBQSxTQUFBLFNBQUEsS0FBQSxTQUNBLEdBQUEsS0FBQSxLQUFBLFlBQ0EsSUFBQSxNQUFBLEtBQUEsS0FBQSxPQUFBLEdBQUEsS0FBQSxnQkFBQSxVQUNBLHdEQUFBLEtBQ0EsTUFBQSxZQUFBLEtBQUEsT0FBQSxJQUFBLElBQ0EsU0FBQSxRQUFBLElBQUEsVUFpQkEsS0FBQSxnQkFBQSxTQUFBLFlBSUEsTUFIQSxLQUFBLFVBQUEsU0FDQSxLQUFBLGtCQUFBLHFCQUFBLFFBQUEsV0FBQSxNQUVBLEtBQUEsbUJBR0EsS0FBQSxNQUFBLE1BQUEsa0JBQUEsU0FBQSxJQUFBLGlCQUdBLFFBQUEsZ0JBU0EsTUFQQSxnQkFDQSxhQUFBLElBQUEsUUFDQSxnQkFBQSxXQUNBLGFBQUEsVUFDQSxhQUFBLFFBR0EsYUFBQSxRQVZBLEdBQUEsYUE4QkEsUUFpQkEsTUFBQSxTQUFBLFFBQUEsT0FBQSxPQUdBLE1BRkEsT0FBQSxNQUFBLE1BQUEsU0FDQSxPQUFBLFFBQUEsU0FDQSxnQkFhQSxNQUFBLFNBQUEsU0FFQSxNQURBLFNBQUEsU0FDQSxnQkFvQkEsS0FBQSxTQUFBLFFBQUEsT0FBQSxPQUdBLE1BQUEsTUFBQSxNQUFBLFFBQUEsT0FBQSxRQWVBLFNBQUEsU0FBQSxRQUFBLFdBT0EsTUFOQSxXQUFBLFNBQUEsV0FFQSxVQURBLFFBQUEsV0FBQSxVQUFBLEtBQUEsS0FBQSxHQUVBLFFBQUEsUUFBQSxTQUFBLFNBQ0EsZUFBQSxRQUFBLGFBRUEsZ0JBZUEsWUFBQSxTQUFBLFFBQUEsV0FPQSxNQU5BLFdBQUEsU0FBQSxXQUVBLFVBREEsUUFBQSxXQUFBLFVBQUEsS0FBQSxLQUFBLEdBRUEsUUFBQSxRQUFBLFNBQUEsU0FDQSxrQkFBQSxRQUFBLGFBRUEsZ0JBZ0JBLFNBQUEsU0FBQSxRQUFBLElBQUEsUUFHQSxNQUZBLE1BQUEsU0FBQSxRQUFBLEtBQ0EsS0FBQSxZQUFBLFFBQUEsUUFDQSxnQkFHQSxRQUFBLEtBQ0EsT0FBQSxVQTQwQ0EsZUFBQSxPQUFBLFdBUUEsa0JBQUEsU0FBQSxXQUFBLHdCQThxREEsSUFBQSxlQUFBLDJCQStpREEsbUJBQUEsT0FBQSxnQkE4bEJBLFdBQUEsa0NBQ0EsZUFBQSxLQUFBLEdBQUEsTUFBQSxJQUFBLElBQUEsSUFDQSxnQkFBQSxPQUFBLFlBNlNBLDRCQUFBLFVBQ0Esb0JBQUEsVUFDQSxpQkFBQSxXQU1BLFNBQUEsRUFNQSxXQUFBLEVBY0EsT0FBQSxlQUFBLFlBZ0JBLElBQUEsU0FBQSxLQUNBLEdBQUEsWUFBQSxLQUNBLE1BQUEsTUFBQSxLQUVBLElBQUEsT0FBQSxXQUFBLEtBQUEsSUFLQSxPQUpBLE9BQUEsSUFBQSxLQUFBLEtBQUEsbUJBQUEsTUFBQSxNQUNBLE1BQUEsSUFBQSxNQUFBLEtBQUEsS0FBQSxPQUFBLE1BQUEsSUFBQSxJQUNBLEtBQUEsS0FBQSxNQUFBLElBQUEsSUFFQSxNQWNBLFNBQUEsZUFBQSxjQWFBLEtBQUEsZUFBQSxVQWFBLEtBQUEsZUFBQSxVQW1CQSxLQUFBLHFCQUFBLFNBQUEsU0FBQSxNQUVBLE1BREEsTUFBQSxLQUFBLEtBQUEsV0FBQSxHQUNBLEtBQUEsS0FBQSxPQUFBLEdBQUEsS0FBQSxJQUFBLE9BaURBLE9BQUEsU0FBQSxPQUFBLFlBQ0EsT0FBQSxVQUFBLFFBQ0EsSUFBQSxHQUNBLE1BQUEsTUFBQSxRQUNBLEtBQUEsR0FDQSxHQUFBLFNBQUEsU0FBQSxTQUFBLFFBQ0EsT0FBQSxPQUFBLFdBQ0EsS0FBQSxTQUFBLGNBQUEsWUFDQSxDQUFBLElBQUEsU0FBQSxRQVFBLEtBQUEsaUJBQUEsV0FDQSxxRkFQQSxTQUFBLE9BQUEsU0FBQSxNQUFBLEtBQ0EsTUFBQSxhQUFBLFFBQUEsT0FHQSxLQUFBLFNBQUEsT0FLQSxLQUNBLFNBQ0EsWUFBQSxhQUFBLE9BQUEsaUJBQ0EsTUFBQSxTQUFBLFFBRUEsS0FBQSxTQUFBLFFBQUEsV0FLQSxNQURBLE1BQUEsWUFDQSxNQWlCQSxLQUFBLHFCQUFBLFNBQUEsU0FBQSxNQUNBLE1BQUEsTUFBQSxLQUFBLFdBQUEsS0FXQSxRQUFBLFdBRUEsTUFEQSxNQUFBLFdBQUEsRUFDQSxNQWtaQSxJQUFBLGNBQUEsT0FBQSxVQThEQSxLQUFBLFNBQUEsVUFBQSxLQUNBLE1BQUEsU0FBQSxVQUFBLE1BQ0EsS0FBQSxTQUFBLFVBQUEsS0FpQkEsVUFBQSxXQUNBLFVBQ0EsT0FBQSxXQUFBLE1BQUEsT0FDQSxPQUFBLFdBQUEsT0FBQSxHQUNBLFFBQUEsV0FBQSxPQUFBLEdBQ0EsVUFBQSxjQUNBLFNBQUEsZUFBQSxNQUNBLGVBQUEsU0FBQSxlQUFBLFFBQUEsZUFBQSxjQUFBLEVBQ0EsVUFBQSxNQUFBLGdCQUlBLElBQUEsV0FBQSxPQUFBLGFBRUEsSUFBQSxTQUFBLEtBQUEsT0FBQSxFQUFBLEdBRUEsTUFEQSxHQUFBLEVBQUEsS0FBQSxRQUFBLEVBQUEsRUFBQSxLQUFBLFFBQ0EsVUFBQSxHQUNBLFVBQUEsR0FDQSxFQUFBLEVBRUEsRUFFQSxVQUFBLEdBQUEsRUFBQSxXQUNBLElBQUEsU0FBQSxLQUFBLE9BQUEsRUFBQSxHQUVBLE1BREEsR0FBQSxFQUFBLEtBQUEsUUFBQSxFQUFBLEVBQUEsS0FBQSxTQUNBLFVBQUEsR0FBQSxFQUFBLElBQUEsVUFBQSxHQUFBLEVBQUEsSUFFQSxJQUFBLFNBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxRQUFBLEVBQUEsS0FBQSxTQUNBLElBQUEsU0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxLQUFBLFFBQUEsRUFBQSxLQUFBLFNBQ0EsSUFBQSxTQUFBLEtBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEtBQUEsUUFBQSxFQUFBLEtBQUEsU0FDQSxJQUFBLFNBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxRQUFBLEVBQUEsS0FBQSxTQUNBLE1BQUEsU0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxLQUFBLFVBQUEsRUFBQSxLQUFBLFNBQ0EsTUFBQSxTQUFBLEtBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEtBQUEsVUFBQSxFQUFBLEtBQUEsU0FDQSxLQUFBLFNBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxTQUNBLEtBQUEsU0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFNBQ0EsSUFBQSxTQUFBLEtBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEtBQUEsUUFBQSxFQUFBLEtBQUEsU0FDQSxJQUFBLFNBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxRQUFBLEVBQUEsS0FBQSxTQUNBLEtBQUEsU0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFNBQ0EsS0FBQSxTQUFBLEtBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEtBQUEsU0FDQSxLQUFBLFNBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxTQUNBLEtBQUEsU0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFNBQ0EsSUFBQSxTQUFBLEtBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEtBQUEsUUFBQSxFQUFBLEtBQUEsU0FDQSxJQUFBLFNBQUEsS0FBQSxPQUFBLEdBQUEsT0FBQSxFQUFBLEtBQUEsU0FHQSxLQUFBLEVBQ0EsS0FBQSxJQUdBLFFBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxLQVNBLE1BQUEsU0FBQSxTQUNBLEtBQUEsUUFBQSxRQUdBLE9BQUEsV0FDQSxZQUFBLE1BRUEsSUFBQSxTQUFBLE1BTUEsSUFMQSxLQUFBLEtBQUEsS0FDQSxLQUFBLE1BQUEsRUFDQSxLQUFBLEdBQUEsVUFDQSxLQUFBLFVBRUEsS0FBQSxNQUFBLEtBQUEsS0FBQSxRQUVBLEdBREEsS0FBQSxHQUFBLEtBQUEsS0FBQSxPQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsT0FDQSxLQUFBLFdBQUEsS0FBQSxRQUNBLElBQUEsS0FBQSxTQUFBLEtBQUEsS0FBQSxLQUFBLEdBQUEsTUFBQSxLQUFBLFNBQUEsS0FBQSxRQUNBLEtBQUEsaUJBQ0EsSUFBQSxLQUFBLFFBQUEsS0FBQSxJQUNBLEtBQUEsZ0JBQ0EsSUFBQSxLQUFBLEdBQUEsZUFDQSxLQUFBLE9BQUEsTUFDQSxNQUFBLEtBQUEsTUFDQSxLQUFBLEtBQUEsS0FFQSxLQUFBLFlBQ0EsSUFBQSxLQUFBLGFBQUEsS0FBQSxJQUNBLEtBQUEsWUFDQSxDQUNBLEdBQUEsS0FBQSxLQUFBLEdBQUEsS0FBQSxPQUNBLElBQUEsSUFBQSxLQUFBLEtBQUEsR0FDQSxHQUFBLFVBQUEsS0FBQSxJQUNBLElBQUEsVUFBQSxLQUNBLElBQUEsVUFBQSxJQUNBLE1BQ0EsS0FBQSxPQUFBLE1BQUEsTUFBQSxLQUFBLE1BQUEsS0FBQSxJQUFBLEdBQUEsTUFDQSxLQUFBLE9BQUEsR0FDQSxLQUNBLEtBQUEsT0FBQSxNQUFBLE1BQUEsS0FBQSxNQUFBLEtBQUEsSUFBQSxHQUFBLE1BQ0EsS0FBQSxPQUFBLEdBQ0EsSUFDQSxLQUFBLE9BQUEsTUFDQSxNQUFBLEtBQUEsTUFDQSxLQUFBLEtBQUEsR0FDQSxHQUFBLEtBRUEsS0FBQSxPQUFBLEdBRUEsS0FBQSxXQUFBLDZCQUFBLEtBQUEsTUFBQSxLQUFBLE1BQUEsR0FJQSxNQUFBLE1BQUEsUUFHQSxHQUFBLFNBQUEsT0FDQSxNQUFBLEtBQUEsTUFBQSxRQUFBLEtBQUEsS0FHQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEtBQUEsR0FBQSxDQUNBLE9BQUEsTUFBQSxNQUFBLElBQUEsS0FBQSxLQUFBLE9BQUEsS0FBQSxLQUFBLE9BQUEsS0FBQSxNQUFBLE1BQUEsR0FHQSxTQUFBLFNBQUEsSUFDQSxNQUFBLEtBQUEsS0FBQSxLQUFBLElBR0EsYUFBQSxTQUFBLElBRUEsTUFBQSxNQUFBLElBQUEsT0FBQSxJQUFBLE1BQUEsSUFDQSxPQUFBLElBQUEsTUFBQSxJQUFBLE1BQUEsSUFHQSxRQUFBLFNBQUEsSUFDQSxNQUFBLEtBQUEsS0FBQSxLQUFBLElBQ0EsSUFBQSxLQUFBLEtBQUEsSUFDQSxNQUFBLElBQUEsTUFBQSxJQUdBLGNBQUEsU0FBQSxJQUNBLE1BQUEsTUFBQSxJQUFBLE1BQUEsSUFBQSxLQUFBLFNBQUEsS0FHQSxXQUFBLFNBQUEsTUFBQSxNQUFBLEtBQ0EsSUFBQSxLQUFBLEtBQUEsS0FDQSxJQUFBLFFBQUEsVUFBQSxPQUNBLEtBQUEsTUFBQSxJQUFBLEtBQUEsTUFBQSxLQUFBLEtBQUEsS0FBQSxVQUFBLE1BQUEsS0FBQSxJQUNBLElBQUEsR0FDQSxNQUFBLGNBQUEsU0FBQSxxREFDQSxNQUFBLE9BQUEsS0FBQSxPQUdBLFdBQUEsV0FHQSxJQUZBLEdBQUEsUUFBQSxHQUNBLE1BQUEsS0FBQSxNQUNBLEtBQUEsTUFBQSxLQUFBLEtBQUEsUUFBQSxDQUNBLEdBQUEsSUFBQSxVQUFBLEtBQUEsS0FBQSxPQUFBLEtBQUEsT0FDQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFNBQUEsSUFDQSxRQUFBLE9BQ0EsQ0FDQSxHQUFBLFFBQUEsS0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLEtBQUEsY0FBQSxRQUNBLFFBQUEsT0FDQSxJQUFBLEtBQUEsY0FBQSxLQUNBLFFBQUEsS0FBQSxTQUFBLFNBQ0EsS0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLEdBQ0EsUUFBQSxPQUNBLENBQUEsSUFBQSxLQUFBLGNBQUEsS0FDQSxRQUFBLEtBQUEsU0FBQSxTQUNBLEtBQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxHQUdBLEtBRkEsTUFBQSxXQUFBLHFCQUtBLEtBQUEsUUFFQSxPQUFBLEVBQUEsT0FDQSxLQUFBLE9BQUEsTUFDQSxNQUFBLE1BQ0EsS0FBQSxPQUNBLFVBQUEsRUFDQSxHQUFBLFdBQUEsTUFBQSxZQUlBLFVBQUEsV0FRQSxJQVBBLEdBS0EsU0FBQSxVQUFBLFdBQUEsR0FMQSxXQUFBLEtBQUEsS0FFQSxNQUFBLEdBQ0EsTUFBQSxLQUFBLE1BSUEsS0FBQSxNQUFBLEtBQUEsS0FBQSxTQUNBLEdBQUEsS0FBQSxLQUFBLE9BQUEsS0FBQSxPQUNBLE1BQUEsSUFBQSxLQUFBLFFBQUEsS0FBQSxLQUFBLFNBQUEsTUFDQSxNQUFBLEtBQUEsUUFBQSxLQUFBLE9BQ0EsT0FBQSxHQUlBLEtBQUEsT0FjQSxJQVZBLFNBQUEsTUFBQSxNQUFBLE1BQUEsT0FBQSxLQUNBLEtBQUEsUUFDQSxNQUFBLE1BQUEsTUFBQSxFQUFBLElBQ0EsUUFBQSxNQUFBLFlBQUEsS0FDQSxLQUFBLFVBQ0EsUUFBQSxZQUtBLFFBRUEsSUFEQSxVQUFBLEtBQUEsTUFDQSxVQUFBLEtBQUEsS0FBQSxRQUFBLENBRUEsR0FEQSxHQUFBLEtBQUEsS0FBQSxPQUFBLFdBQ0EsTUFBQSxHQUFBLENBQ0EsV0FBQSxNQUFBLE9BQUEsUUFBQSxNQUFBLEdBQ0EsTUFBQSxNQUFBLE9BQUEsRUFBQSxRQUFBLE9BQ0EsS0FBQSxNQUFBLFNBQ0EsT0FFQSxJQUFBLEtBQUEsYUFBQSxJQUdBLEtBRkEsYUFPQSxLQUFBLE9BQUEsTUFDQSxNQUFBLE1BQ0EsS0FBQSxNQUNBLEdBQUEsVUFBQSxRQUFBLFNBQUEsTUFBQSxLQUFBLFFBQUEsY0FHQSxhQUNBLEtBQUEsT0FBQSxNQUNBLE1BQUEsUUFDQSxLQUFBLE1BRUEsS0FBQSxPQUFBLE1BQ0EsTUFBQSxRQUFBLEVBQ0EsS0FBQSxlQUtBLFdBQUEsU0FBQSxPQUNBLEdBQUEsT0FBQSxLQUFBLEtBQ0EsTUFBQSxPQUlBLEtBSEEsR0FBQSxRQUFBLEdBQ0EsVUFBQSxNQUNBLFFBQUEsRUFDQSxLQUFBLE1BQUEsS0FBQSxLQUFBLFFBQUEsQ0FDQSxHQUFBLElBQUEsS0FBQSxLQUFBLE9BQUEsS0FBQSxNQUVBLElBREEsV0FBQSxHQUNBLE9BQUEsQ0FDQSxHQUFBLE1BQUEsR0FBQSxDQUNBLEdBQUEsS0FBQSxLQUFBLEtBQUEsVUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsRUFDQSxLQUFBLE1BQUEsZ0JBQ0EsS0FBQSxXQUFBLDhCQUFBLElBQUEsS0FDQSxLQUFBLE9BQUEsRUFDQSxRQUFBLE9BQUEsYUFBQSxTQUFBLElBQUEsU0FDQSxDQUNBLEdBQUEsS0FBQSxPQUFBLEdBQ0EsU0FBQSxLQUFBLEdBRUEsUUFBQSxNQUNBLElBQUEsT0FBQSxHQUNBLFFBQUEsTUFDQSxDQUFBLEdBQUEsS0FBQSxNQVNBLE1BUkEsTUFBQSxZQUNBLE1BQUEsT0FBQSxNQUNBLE1BQUEsTUFDQSxLQUFBLFVBQ0EsT0FBQSxPQUNBLFVBQUEsRUFDQSxHQUFBLFdBQUEsTUFBQSxVQUlBLFNBQUEsR0FFQSxLQUFBLFFBRUEsS0FBQSxXQUFBLHFCQUFBLFFBWUEsSUFBQSxRQUFBLFNBQUEsTUFBQSxRQUFBLFNBQ0EsS0FBQSxNQUFBLE1BQ0EsS0FBQSxRQUFBLFFBQ0EsS0FBQSxRQUFBLFFBR0EsUUFBQSxLQUFBLE9BQUEsV0FDQSxNQUFBLEtBRUEsY0FBQSxFQUNBLFVBQUEsSUFHQSxPQUFBLFdBQ0EsWUFBQSxPQUVBLE1BQUEsU0FBQSxNQUNBLEtBQUEsS0FBQSxLQUNBLEtBQUEsT0FBQSxLQUFBLE1BQUEsSUFBQSxLQUVBLElBQUEsT0FBQSxLQUFBLFlBU0EsT0FQQSxLQUFBLEtBQUEsT0FBQSxRQUNBLEtBQUEsV0FBQSx5QkFBQSxLQUFBLE9BQUEsSUFHQSxNQUFBLFVBQUEsTUFBQSxRQUNBLE1BQUEsV0FBQSxNQUFBLFNBRUEsT0FHQSxRQUFBLFdBQ0EsR0FBQSxRQUNBLElBQUEsS0FBQSxPQUFBLEtBQ0EsUUFBQSxLQUFBLGNBQ0EsS0FBQSxRQUFBLFNBQ0EsSUFBQSxLQUFBLE9BQUEsS0FDQSxRQUFBLEtBQUEsdUJBQ0EsSUFBQSxLQUFBLE9BQUEsS0FDQSxRQUFBLEtBQUEsYUFDQSxDQUNBLEdBQUEsT0FBQSxLQUFBLFFBQ0EsU0FBQSxNQUFBLEdBQ0EsU0FDQSxLQUFBLFdBQUEsMkJBQUEsT0FFQSxNQUFBLFdBQ0EsUUFBQSxVQUFBLEVBQ0EsUUFBQSxTQUFBLEdBS0EsSUFEQSxHQUFBLE1BQUEsUUFDQSxLQUFBLEtBQUEsT0FBQSxJQUFBLElBQUEsTUFDQSxNQUFBLEtBQUEsTUFDQSxRQUFBLEtBQUEsYUFBQSxRQUFBLFNBQ0EsUUFBQSxNQUNBLE1BQUEsS0FBQSxNQUNBLFFBQUEsUUFDQSxRQUFBLEtBQUEsWUFBQSxVQUNBLE1BQUEsS0FBQSxNQUNBLFFBQUEsUUFDQSxRQUFBLEtBQUEsWUFBQSxVQUVBLEtBQUEsV0FBQSxhQUdBLE9BQUEsVUFHQSxXQUFBLFNBQUEsSUFBQSxPQUNBLEtBQUEsY0FBQSxTQUNBLHlGQUNBLE1BQUEsS0FBQSxJQUFBLE1BQUEsTUFBQSxFQUFBLEtBQUEsS0FBQSxLQUFBLEtBQUEsVUFBQSxNQUFBLFNBR0EsVUFBQSxXQUNBLEdBQUEsSUFBQSxLQUFBLE9BQUEsT0FDQSxLQUFBLGNBQUEsT0FBQSxvQ0FBQSxLQUFBLEtBQ0EsT0FBQSxNQUFBLE9BQUEsSUFHQSxLQUFBLFNBQUEsR0FBQSxHQUFBLEdBQUEsSUFDQSxHQUFBLEtBQUEsT0FBQSxPQUFBLEVBQUEsQ0FDQSxHQUFBLE9BQUEsS0FBQSxPQUFBLEdBQ0EsRUFBQSxNQUFBLElBQ0EsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLEtBQ0EsS0FBQSxLQUFBLEtBQUEsR0FDQSxNQUFBLE9BR0EsT0FBQSxHQUdBLE9BQUEsU0FBQSxHQUFBLEdBQUEsR0FBQSxJQUNBLEdBQUEsT0FBQSxLQUFBLEtBQUEsR0FBQSxHQUFBLEdBQUEsR0FDQSxPQUFBLFFBQ0EsS0FBQSxPQUFBLFFBQ0EsUUFFQSxHQUdBLFFBQUEsU0FBQSxJQUNBLEtBQUEsT0FBQSxLQUNBLEtBQUEsV0FBQSw2QkFBQSxHQUFBLElBQUEsS0FBQSxTQUlBLFFBQUEsU0FBQSxHQUFBLE9BQ0EsTUFBQSxRQUFBLFNBQUEsS0FBQSxRQUNBLE1BQUEsSUFBQSxLQUFBLE9BQUEsU0FFQSxTQUFBLE1BQUEsU0FDQSxRQUFBLFVBSUEsU0FBQSxTQUFBLEtBQUEsR0FBQSxNQUFBLGFBQ0EsTUFBQSxRQUFBLFNBQUEsS0FBQSxRQUNBLE1BQUEsSUFBQSxLQUFBLE9BQUEsS0FBQSxTQUVBLFNBQUEsS0FBQSxVQUFBLE1BQUEsU0FDQSxRQUFBLGNBQUEsS0FBQSxVQUlBLFdBQUEsV0FFQSxJQURBLEdBQUEsaUJBSUEsR0FGQSxLQUFBLE9BQUEsT0FBQSxJQUFBLEtBQUEsS0FBQSxJQUFBLElBQUEsSUFBQSxNQUNBLFdBQUEsS0FBQSxLQUFBLGdCQUNBLEtBQUEsT0FBQSxLQUdBLE1BQUEsS0FBQSxXQUFBLE9BQ0EsV0FBQSxHQUNBLFNBQUEsS0FBQSxRQUVBLElBQUEsR0FEQSxPQUNBLEVBQUEsRUFBQSxHQUFBLFdBQUEsT0FBQSxHQUFBLEVBQUEsSUFDQSxNQUFBLFdBQUEsR0FBQSxLQUFBLE9BRUEsT0FBQSxTQU1BLFlBQUEsV0FHQSxJQUZBLEdBQ0EsT0FEQSxLQUFBLEtBQUEsYUFFQSxNQUFBLEtBQUEsT0FBQSxNQUNBLEtBQUEsS0FBQSxPQUFBLEtBRUEsT0FBQSxPQUdBLE9BQUEsU0FBQSxTQUNBLEdBRUEsUUFDQSxLQUhBLE1BQUEsS0FBQSxTQUNBLEdBQUEsS0FBQSxRQUFBLE1BQUEsS0FJQSxJQUFBLEtBQUEsS0FBQSxLQUdBLElBRkEsVUFDQSxRQUNBLEtBQUEsT0FBQSxNQUNBLE9BQUEsS0FBQSxLQUFBLGFBSUEsSUFBQSxTQUFBLFNBQUEsT0FBQSxXQUVBLE9BQUEsUUFBQSxTQUFBLEtBQUEsUUFDQSxHQUFBLE9BQUEsUUFBQSxLQUFBLE9BQ0EsSUFBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEtBR0EsS0FEQSxHQUFBLEdBQUEsT0FBQSxPQUNBLEtBQ0EsS0FBQSxFQUFBLEdBQUEsT0FBQSxHQUFBLEtBQUEsT0FHQSxPQUFBLElBQUEsTUFBQSxVQUFBLE1BR0EsTUFBQSxJQUFBLFNBRUEsVUFBQSxHQUFBLFdBQUEsT0FBQSxNQUFBLFlBQ0EsUUFBQSxHQUFBLFdBQUEsVUFJQSxXQUFBLFdBQ0EsTUFBQSxNQUFBLGNBR0EsV0FBQSxXQUNBLEdBQ0EsT0FDQSxNQUZBLEtBQUEsS0FBQSxTQUdBLFFBQUEsTUFBQSxLQUFBLE9BQUEsT0FDQSxLQUFBLFFBQ0EsS0FBQSxXQUFBLDJCQUNBLEtBQUEsS0FBQSxVQUFBLEVBQUEsTUFBQSxPQUFBLDJCQUFBLE9BRUEsTUFBQSxLQUFBLFVBQ0EsT0FBQSxTQUFBLE1BQUEsUUFDQSxNQUFBLE1BQUEsT0FBQSxNQUFBLE1BQUEsTUFBQSxRQUFBLFVBRUEsUUFBQSxLQUFBLFVBR0EsTUFHQSxRQUFBLFdBQ0EsR0FDQSxRQUNBLE1BRkEsS0FBQSxLQUFBLFdBR0EsSUFBQSxNQUFBLEtBQUEsT0FBQSxLQUFBLENBRUEsR0FEQSxPQUFBLEtBQUEsYUFDQSxNQUFBLEtBQUEsT0FBQSxLQUFBLENBQ0EsR0FBQSxPQUFBLEtBQUEsWUFFQSxPQUFBLFFBQUEsU0FBQSxLQUFBLFFBQ0EsTUFBQSxNQUFBLEtBQUEsUUFBQSxPQUFBLEtBQUEsUUFBQSxNQUFBLEtBQUEsVUFFQSxTQUFBLEtBQUEsVUFBQSxPQUFBLFVBQUEsTUFBQSxXQUlBLEtBQUEsV0FBQSxhQUFBLE9BSUEsTUFBQSxPQUdBLFVBQUEsV0FHQSxJQUZBLEdBQ0EsT0FEQSxLQUFBLEtBQUEsYUFFQSxNQUFBLEtBQUEsT0FBQSxPQUNBLEtBQUEsS0FBQSxTQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsY0FBQSxFQUVBLE9BQUEsT0FHQSxXQUFBLFdBQ0EsR0FDQSxPQURBLEtBQUEsS0FBQSxVQUtBLFFBSEEsTUFBQSxLQUFBLE9BQUEsU0FDQSxLQUFBLEtBQUEsU0FBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLGNBQUEsSUFFQSxNQUdBLFNBQUEsV0FDQSxHQUNBLE9BREEsS0FBQSxLQUFBLFlBS0EsUUFIQSxNQUFBLEtBQUEsT0FBQSxLQUFBLEtBQUEsTUFBQSxVQUNBLEtBQUEsS0FBQSxTQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsYUFFQSxNQUdBLFdBQUEsV0FDQSxHQUNBLE9BREEsS0FBQSxLQUFBLFVBS0EsUUFIQSxNQUFBLEtBQUEsT0FBQSxJQUFBLElBQUEsS0FBQSxTQUNBLEtBQUEsS0FBQSxTQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsZUFFQSxNQUdBLFNBQUEsV0FHQSxJQUZBLEdBQ0EsT0FEQSxLQUFBLEtBQUEsaUJBRUEsTUFBQSxLQUFBLE9BQUEsSUFBQSxNQUNBLEtBQUEsS0FBQSxTQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsaUJBRUEsT0FBQSxPQUdBLGVBQUEsV0FHQSxJQUZBLEdBQ0EsT0FEQSxLQUFBLEtBQUEsUUFFQSxNQUFBLEtBQUEsT0FBQSxJQUFBLElBQUEsTUFDQSxLQUFBLEtBQUEsU0FBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLFFBRUEsT0FBQSxPQUdBLE1BQUEsV0FDQSxHQUFBLE1BQ0EsT0FBQSxNQUFBLE9BQUEsS0FDQSxLQUFBLFdBQ0EsTUFBQSxLQUFBLE9BQUEsTUFDQSxLQUFBLFNBQUEsT0FBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLFVBQ0EsTUFBQSxLQUFBLE9BQUEsTUFDQSxLQUFBLFFBQUEsTUFBQSxHQUFBLEtBQUEsU0FFQSxLQUFBLFdBSUEsWUFBQSxTQUFBLFFBQ0EsR0FBQSxZQUFBLEtBQUEsS0FDQSxNQUFBLEtBQUEsU0FBQSxLQUNBLE9BQUEsU0FBQSxNQUFBLEtBQUEsUUFBQSxXQUVBLE9BQUEsUUFBQSxTQUFBLE1BQUEsT0FBQSxNQUNBLE1BQUEsUUFBQSxNQUFBLE9BQUEsTUFBQSxXQUVBLE9BQUEsU0FBQSxNQUFBLE1BQUEsUUFDQSxHQUFBLEdBQUEsT0FBQSxNQUFBLE9BRUEsT0FEQSxJQUFBLE9BQUEsT0FBQSxNQUFBLE1BQ0EsT0FBQSxFQUFBLE1BQUEsTUFBQSxnQkFLQSxZQUFBLFNBQUEsS0FDQSxHQUFBLFlBQUEsS0FBQSxLQUVBLFFBQUEsS0FBQSxZQUdBLE9BRkEsTUFBQSxRQUFBLEtBRUEsT0FBQSxTQUFBLEtBQUEsUUFDQSxHQUVBLEdBRkEsRUFBQSxJQUFBLEtBQUEsUUFDQSxFQUFBLFFBQUEsS0FBQSxPQUlBLE9BREEsc0JBQUEsRUFBQSxZQUNBLEVBQ0EsRUFBQSxpQkFBQSxFQUFBLEdBQUEsWUFEQSxZQUlBLE9BQUEsU0FBQSxLQUFBLE1BQUEsUUFDQSxHQUFBLEtBQUEscUJBQUEsUUFBQSxLQUFBLFFBQUEsWUFFQSxFQUFBLGlCQUFBLElBQUEsS0FBQSxRQUFBLFdBRUEsT0FEQSxJQUFBLElBQUEsT0FBQSxLQUFBLE1BQ0EsRUFBQSxLQUFBLFVBS0EsYUFBQSxTQUFBLFNBQUEsZUFDQSxHQUFBLFVBQ0EsSUFBQSxNQUFBLEtBQUEsWUFBQSxLQUNBLEVBQ0EsUUFBQSxLQUFBLEtBQUEsb0JBQ0EsS0FBQSxPQUFBLEtBRUEsTUFBQSxRQUFBLElBRUEsSUFBQSxnQkFBQSxLQUFBLEtBRUEsS0FBQSxPQUFBLFVBQUEsSUFFQSxPQUFBLFVBQUEsTUFBQSxRQUNBLEdBQUEsU0FBQSxjQUFBLGNBQUEsTUFBQSxRQUFBLE1BQ0EsR0FBQSxTQUFBLE1BQUEsT0FBQSxVQUFBLElBRUEsSUFBQSxLQUVBLElBREEsR0FBQSxHQUFBLE9BQUEsT0FDQSxLQUNBLEtBQUEsR0FBQSxpQkFBQSxPQUFBLEdBQUEsTUFBQSxRQUFBLGVBSUEsa0JBQUEsUUFBQSxnQkFDQSxtQkFBQSxHQUFBLGVBR0EsSUFBQSxHQUFBLEdBQUEsTUFDQSxHQUFBLE1BQUEsUUFBQSxNQUNBLEdBQUEsS0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUEsR0FFQSxPQUFBLGtCQUFBLEVBQUEsa0JBS0EsaUJBQUEsV0FDQSxHQUFBLGNBQ0EsSUFBQSxNQUFBLEtBQUEsWUFBQSxLQUNBLEVBQUEsQ0FDQSxHQUFBLEtBQUEsS0FBQSxLQUVBLEtBRUEsSUFBQSxXQUFBLEtBQUEsWUFDQSxZQUFBLEtBQUEsaUJBQ0EsS0FBQSxPQUFBLEtBSUEsT0FGQSxNQUFBLFFBQUEsS0FFQSxPQUFBLFNBQUEsS0FBQSxRQUVBLElBQUEsR0FEQSxVQUNBLEVBQUEsRUFBQSxHQUFBLFdBQUEsT0FBQSxHQUFBLEVBQUEsSUFDQSxNQUFBLEtBQUEsV0FBQSxHQUFBLEtBQUEsUUFFQSxPQUFBLFNBRUEsU0FBQSxFQUNBLFNBQUEsV0FBQSxNQUFBLFlBQ0EsT0FBQSxjQUlBLE9BQUEsV0FDQSxHQUFBLFNBQUEsV0FDQSxJQUFBLE1BQUEsS0FBQSxZQUFBLEtBQ0EsRUFBQSxDQUNBLEdBQUEsS0FBQSxLQUFBLEtBRUEsS0FFQSxJQUFBLE9BQUEsS0FBQSxRQUNBLE1BQUEsS0FBQSxNQUFBLFFBQUEsTUFBQSxNQUNBLEtBQUEsUUFBQSxJQUNBLElBQUEsT0FBQSxLQUFBLFlBQ0EsVUFBQSxLQUFBLGFBQ0EsS0FBQSxPQUFBLEtBSUEsT0FGQSxNQUFBLFFBQUEsS0FFQSxPQUFBLFNBQUEsS0FBQSxRQUVBLElBQUEsR0FEQSxXQUNBLEVBQUEsRUFBQSxHQUFBLFNBQUEsT0FBQSxHQUFBLEVBQUEsSUFDQSxPQUFBLEtBQUEsSUFBQSxTQUFBLEdBQUEsS0FBQSxPQUVBLE9BQUEsVUFFQSxTQUFBLEVBQ0EsU0FBQSxTQUFBLE1BQUEsWUFDQSxPQUFBLFlBNkJBLElBQUEsZUFBQSxZQW96RUEsV0FBQSxPQUFBLFFBRUEsY0FDQSxLQUFBLE9BQ0EsSUFBQSxNQUNBLElBQUEsTUFHQSxhQUFBLGNBQ0EsR0FBQSxNQW9uQ0EsZUFBQSxPQUFBLFlBaVFBLGVBQUEsU0FBQSxjQUFBLEtBQ0EsVUFBQSxXQUFBLE9BQUEsU0FBQSxNQUFBLEVBd09BLGlCQUFBLFNBQUEsWUFxVUEsZUFBQSxTQUFBLFdBaUVBLGFBQUEsU0FBQSxVQWFBLElBQUEsYUFBQSxJQTZKQSxjQUNBLEtBQUEsV0FBQSxXQUFBLEdBQ0EsR0FBQSxXQUFBLFdBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxXQUFBLFdBQUEsR0FDQSxLQUFBLGNBQUEsU0FDQSxJQUFBLGNBQUEsU0FBQSxHQUNBLEdBQUEsV0FBQSxRQUFBLEVBQUEsR0FDQSxFQUFBLFdBQUEsUUFBQSxFQUFBLEdBQ0EsR0FBQSxXQUFBLE9BQUEsR0FDQSxFQUFBLFdBQUEsT0FBQSxHQUNBLEdBQUEsV0FBQSxRQUFBLEdBQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUFBLFdBQUEsUUFBQSxFQUFBLEtBQ0EsRUFBQSxXQUFBLFFBQUEsRUFBQSxLQUNBLEdBQUEsV0FBQSxVQUFBLEdBQ0EsRUFBQSxXQUFBLFVBQUEsR0FDQSxHQUFBLFdBQUEsVUFBQSxHQUNBLEVBQUEsV0FBQSxVQUFBLEdBR0EsSUFBQSxXQUFBLGVBQUEsR0FDQSxLQUFBLGNBQUEsT0FDQSxJQUFBLGNBQUEsT0FBQSxHQUNBLEVBQUEsV0FDQSxFQUFBLGVBQ0EsR0FBQSxXQUFBLEdBQ0EsRUFBQSxXQUFBLElBR0EsbUJBQUEsbUZBQ0EsY0FBQSxVQTJGQSxZQUFBLFNBQUEsVUF1SEEsSUFBQSxpQkFBQSxRQUFBLFdBV0EsZ0JBQUEsUUFBQSxVQW9QQSxlQUFBLFNBQUEsU0FxRkEsSUFBQSxxQkFBQSxTQUNBLFNBQUEsSUFDQSxRQUFBLFNBQUEsUUFBQSxNQWlCQSxNQWZBLElBQUEsT0FJQSxLQUFBLE1BQUEsS0FBQSxNQUNBLEtBQUEsS0FBQSxPQUFBLElBT0EsUUFBQSxPQUFBLFNBQUEsY0FBQSxZQUdBLEtBQUEsTUFBQSxLQUFBLFdBQUEsS0FBQSxLQUFBLE9BQ0EsU0FBQSxNQUFBLFNBRUEsR0FBQSxNQUFBLCtCQUFBLFNBQUEsS0FBQSxRQUFBLEtBQUEsU0FDQSxhQUFBLE1BQ0EsU0FBQSxHQUFBLFFBQUEsU0FBQSxPQUVBLFFBQUEsS0FBQSxPQUNBLE1BQUEsdUJBNFZBLDZCQUlBLFNBQUEsYUFBQSxTQUFBLFNBQUEsVUFFQSxHQUFBLFlBQUEsU0FBQSxDQUVBLEdBQUEsWUFBQSxtQkFBQSxNQUFBLFNBQ0EsNEJBQUEsWUFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsSUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BQ0EsTUFBQSxPQUFBLEtBQUEsWUFBQSxTQUFBLE9BQ0EsS0FBQSxLQUFBLFdBQUEsZUFRQSxRQUFBLGFBQUEsU0FBQSxTQUFBLFFBQ0EsMkJBQUEsUUFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFHQSxHQUFBLGNBQUEsUUFBQSxLQUFBLEtBQUEsVUFBQSxPQUFBLEdBQUEsQ0FDQSxHQUFBLE9BQUEsS0FBQSxVQUFBLE1BQUEsb0JBQ0EsSUFBQSxNQUVBLFdBREEsTUFBQSxLQUFBLFlBQUEsR0FBQSxRQUFBLE1BQUEsR0FBQSxNQUFBLEtBS0EsTUFBQSxPQUFBLEtBQUEsUUFBQSxTQUFBLE9BQ0EsS0FBQSxLQUFBLE9BQUEsY0FRQSxTQUFBLE1BQUEsU0FBQSxRQUFBLFNBQUEsVUFDQSxHQUFBLFlBQUEsbUJBQUEsTUFBQSxTQUNBLDRCQUFBLFlBQUEsV0FDQSxPQUNBLFNBQUEsR0FDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BQ0EsR0FBQSxVQUFBLFNBQ0EsS0FBQSxRQUVBLFVBQUEsVUFDQSwrQkFBQSxTQUFBLEtBQUEsUUFBQSxLQUFBLFdBQ0EsS0FBQSxZQUNBLEtBQUEsTUFBQSxNQUFBLGFBQ0EsU0FBQSxNQUdBLEtBQUEsU0FBQSxXQUFBLFNBQUEsT0FDQSxNQUFBLFFBT0EsS0FBQSxLQUFBLEtBQUEsWUFNQSxNQUFBLFVBQUEsUUFBQSxLQUFBLFNBQUEsS0FBQSxjQVpBLFNBQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxhQW9CQSxJQUFBLGVBQ0EsWUFBQSxLQUNBLGVBQUEsS0FDQSxhQUFBLEtBQ0EsYUFBQSxLQUNBLFVBQUEsS0FDQSxhQUFBLEtBQ0EsY0FBQSxLQUNBLHVCQUFBLE1BRUEsZ0JBQUEsY0F1Q0EsZ0JBQUEsU0FBQSxXQUFBLFNBQUEsU0FBQSxXQXNXQSxJQUFBLHNCQUFBLFNBQUEsVUFDQSxPQUFBLFdBQUEsU0FBQSxVQUNBLEdBQUEsZ0JBQ0EsS0FBQSxPQUNBLFNBQUEsU0FBQSxNQUFBLElBQ0EsV0FBQSxlQUNBLFFBQUEsV0FDQSxPQUNBLElBQUEsU0FBQSxNQUFBLFlBQUEsS0FBQSxZQUNBLElBQUEsS0FBQSxPQUFBLENBT0EsR0FBQSxzQkFBQSxTQUFBLE9BQ0EsTUFBQSxPQUFBLFdBQ0EsV0FBQSxtQkFDQSxXQUFBLGtCQUdBLE1BQUEsZUFDQSxNQUFBLGlCQUNBLE1BQUEsYUFBQSxFQUdBLG9CQUFBLFlBQUEsR0FBQSxTQUFBLHNCQUlBLFlBQUEsR0FBQSxXQUFBLFdBQ0EsU0FBQSxXQUNBLHNCQUFBLFlBQUEsR0FBQSxTQUFBLHVCQUNBLEdBQUEsS0FJQSxHQUFBLGdCQUFBLFlBQUEsU0FBQSxXQUFBLFFBQ0EsTUFBQSxLQUFBLE1BQUEsS0FBQSxNQUVBLFFBQ0EsT0FBQSxNQUFBLE1BQUEsV0FBQSxPQUVBLGdCQUNBLFlBQUEsR0FBQSxXQUFBLFdBQ0EsZUFBQSxlQUFBLFlBQ0EsT0FDQSxPQUFBLE1BQUEsTUFBQSxVQUFBLE9BRUEsT0FBQSxXQUFBLG1CQVFBLE9BQUEsa0JBSUEsY0FBQSx1QkFDQSxnQkFBQSxzQkFBQSxHQVdBLGdCQUFBLDJFQUNBLFdBQUEsc0ZBQ0EsYUFBQSxvR0FDQSxjQUFBLHFDQUNBLFlBQUEsNEJBQ0EscUJBQUEsb0RBQ0EsWUFBQSxvQkFDQSxhQUFBLG1CQUNBLFlBQUEsOEJBQ0EsZUFBQSx3QkFFQSxlQUFBLEdBQUEsUUFBQSxXQUVBLFdBa0ZBLEtBQUEsY0F3RkEsS0FBQSxvQkFBQSxPQUFBLFlBQ0EsaUJBQUEsYUFBQSxPQUFBLEtBQUEsT0FDQSxjQXNGQSxpQkFBQSxvQkFBQSxnQkFBQSxxQkFDQSxpQkFBQSxzQkFBQSxPQUFBLEtBQUEsS0FBQSxLQUFBLEtBQUEsT0FDQSx1QkF1RkEsS0FBQSxvQkFBQSxPQUFBLFlBQ0EsaUJBQUEsYUFBQSxLQUFBLEtBQUEsT0FDQSxZQXNGQSxLQUFBLG9CQUFBLE9BQUEsWUFBQSxXQUFBLFlBdUZBLE1BQUEsb0JBQUEsUUFBQSxhQUNBLGlCQUFBLGNBQUEsT0FBQSxPQUNBLFdBNkVBLE9BQUEsZ0JBNkVBLElBQUEsYUE0RUEsTUFBQSxlQW9EQSxNQUFBLGVBb0RBLFNBQUEsa0JBRUEsT0FBQSxLQUNBLE9BQUEsS0FDQSxPQUFBLEtBQ0EsTUFBQSxLQUNBLEtBQUEsTUFpakJBLGdCQUFBLFdBQUEsV0FBQSxVQUFBLFNBQ0EsU0FBQSxTQUFBLFNBQUEsUUFBQSxRQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsWUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLEtBQUEsT0FDQSxNQUFBLEtBQ0EsVUFBQSxVQUFBLEtBQUEsUUFBQSxVQUFBLE1BQUEsTUFBQSxRQUFBLEtBQUEsTUFBQSxHQUFBLFNBQ0EsU0FBQSxRQUFBLFlBTUEsWUFBQSxXQUNBLGNBQUEsYUFDQSxlQUFBLGNBQ0EsWUFBQSxXQUNBLGdCQUFBLGVBQ0EsY0FBQSxhQUNBLGNBQUEsYUE4TEEsbUJBQUEsU0FBQSxvQkFBQSxTQUFBLFdBQUEsU0FBQSxXQUFBLFdBQUEsYUFBQSxLQUNBLFNBQUEsT0FBQSxrQkFBQSxNQUFBLFNBQUEsT0FBQSxTQUFBLFNBQUEsV0FBQSxJQUNBLEtBQUEsV0FBQSxPQUFBLElBQ0EsS0FBQSxZQUFBLE9BQUEsSUFDQSxLQUFBLGVBQ0EsS0FBQSxvQkFDQSxLQUFBLFlBQ0EsS0FBQSxlQUNBLEtBQUEsd0JBQ0EsS0FBQSxZQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxXQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxVQUNBLEtBQUEsYUFDQSxLQUFBLFNBQUEsVUFDQSxLQUFBLE1BQUEsTUFBQSxJQUdBLElBQUEsZUFBQSxPQUFBLE1BQUEsU0FDQSxnQkFBQSxLQUNBLEtBQUEsS0FFQSxXQUFBLFdBQ0EsR0FBQSxZQUFBLGNBQUEsT0FJQSxPQUhBLE1BQUEsVUFBQSxLQUFBLFNBQUEsY0FBQSxXQUFBLGNBQ0EsV0FBQSxjQUVBLFlBR0EsV0FBQSxXQUNBLEdBQUEsYUFDQSxNQUFBLFVBQUEsS0FBQSxTQUFBLGNBQ0EsV0FBQSxhQUFBLGNBQUEsU0FFQSxhQUFBLEtBQUEsYUFFQSxjQUFBLE9BQUEsT0FBQSxLQUFBLGFBSUEsTUFBQSxhQUFBLFNBQUEsU0FHQSxHQUZBLEtBQUEsU0FBQSxVQUVBLGNBQUEsUUFBQSxTQUFBLFFBQUEsY0FDQSxLQUFBLGdCQUFBLFlBQUEsbURBQ0EsTUFBQSxRQUFBLFlBQUEsWUF3QkEsS0FBQSxRQUFBLEtBbUJBLEtBQUEsU0FBQSxTQUFBLE9BQ0EsTUFBQSxhQUFBLFFBQUEsS0FBQSxPQUFBLE9BQUEsT0FBQSxRQUFBLE1BR0EsSUFBQSxZQUFBLFNBQUEsY0FBQSxvQkFBQSxhQUNBLHVCQUFBLENBR0EsVUFDQSxTQUFBLGdCQUNBLFNBQUEsaUJBcUJBLHNCQUNBLEtBQUEsS0FDQSxTQUFBLFNBQ0EsSUFBQSxTQUFBLE9BQUEsVUFDQSxPQUFBLFdBQUEsR0FFQSxNQUFBLFNBQUEsT0FBQSxnQkFDQSxRQUFBLFdBRUEsV0FBQSxXQUNBLFNBQUEsV0FjQSxLQUFBLGFBQUEsV0FDQSxLQUFBLFFBQUEsRUFDQSxLQUFBLFdBQUEsRUFDQSxTQUFBLFlBQUEsU0FBQSxhQUNBLFNBQUEsU0FBQSxTQUFBLGlCQWVBLEtBQUEsY0FBQSxXQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsWUFBQSxFQUNBLFNBQUEsU0FBQSxTQUFBLGdCQUFBLGdCQWVBLEtBQUEsWUFBQSxXQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsWUFBQSxFQUNBLFNBQUEsU0FBQSxTQUFBLGNBQUEsa0JBOERBLEtBQUEsbUJBQUEsV0FDQSxTQUFBLE9BQUEsaUJBQ0EsS0FBQSxXQUFBLEtBQUEseUJBQ0EsS0FBQSxXQVVBLEtBQUEsVUFBQSxXQUVBLFNBQUEsS0FBQSxjQUFBLE1BQUEsS0FBQSxjQUdBLEtBQUEsc0JBR0EsS0FBQSxnQkFBQSxTQUFBLFdBQUEsV0FBQSxVQUFBLGNBZUEsUUFBQSxvQkFBQSxZQUNBLEdBQUEsVUFBQSxLQUFBLGNBQUEsT0FDQSxJQUFBLGFBQUEsVUFDQSxZQUFBLFNBQUEsVUFHQSxJQURBLFlBQUEsU0FBQSxhQUNBLFdBT0EsTUFOQSxTQUFBLEtBQUEsWUFBQSxTQUFBLEVBQUEsTUFDQSxZQUFBLEtBQUEsUUFFQSxRQUFBLEtBQUEsaUJBQUEsU0FBQSxFQUFBLE1BQ0EsWUFBQSxLQUFBLFNBRUEsQ0FHQSxRQUFBLEVBR0EsUUFBQSx5QkFDQSxHQUFBLHNCQUFBLENBTUEsT0FMQSxTQUFBLEtBQUEsWUFBQSxTQUFBLFVBQUEsTUFDQSxHQUFBLFFBQUEsVUFBQSxXQUFBLFVBQ0EscUJBQUEscUJBQUEsT0FDQSxZQUFBLEtBQUEsVUFFQSxxQkFNQSxHQUxBLFFBQUEsS0FBQSxpQkFBQSxTQUFBLEVBQUEsTUFDQSxZQUFBLEtBQUEsU0FFQSxHQUtBLFFBQUEsMEJBQ0EsR0FBQSxzQkFDQSxVQUFBLENBQ0EsU0FBQSxLQUFBLGlCQUFBLFNBQUEsVUFBQSxNQUNBLEdBQUEsU0FBQSxVQUFBLFdBQUEsVUFDQSxLQUFBLGNBQUEsU0FDQSxLQUFBLGdCQUFBLG1CQUNBLDZFQUFBLFFBRUEsYUFBQSxLQUFBLFdBQ0Esa0JBQUEsS0FBQSxRQUFBLEtBQUEsV0FDQSxZQUFBLE1BQUEsSUFDQSxXQUNBLFVBQUEsRUFDQSxZQUFBLE1BQUEsUUFHQSxrQkFBQSxPQUdBLEdBQUEsSUFBQSxtQkFBQSxLQUFBLFdBQ0EsZUFBQSxXQUNBLE1BSkEsZ0JBQUEsR0FRQSxRQUFBLGFBQUEsS0FBQSxTQUNBLHVCQUFBLHdCQUNBLEtBQUEsYUFBQSxLQUFBLFNBSUEsUUFBQSxnQkFBQSxVQUNBLHVCQUFBLHdCQUVBLGFBQUEsVUFwRkEsd0JBQ0EsSUFBQSxzQkFBQSxzQkFHQSxPQUFBLG9CQUFBLGFBSUEsNEJBSUEsOEJBUEEsaUJBQUEsSUErRkEsS0FBQSxpQkFBQSxXQUNBLEdBQUEsV0FBQSxLQUFBLFVBRUEsVUFBQSxPQUFBLGtCQUtBLEtBQUEsMkJBQUEsV0FBQSxLQUFBLFdBQUEsS0FBQSx5QkFHQSxLQUFBLHlCQUFBLFVBR0EsS0FBQSxZQUNBLEtBQUEsUUFBQSxFQUNBLEtBQUEsV0FBQSxFQUNBLFNBQUEsWUFBQSxTQUFBLGdCQUNBLFNBQUEsU0FBQSxTQUFBLGFBQ0EsV0FBQSxhQUVBLEtBQUEsdUJBR0EsS0FBQSxtQkFBQSxXQWdDQSxRQUFBLHdCQUNBLEtBQUEsY0FBQSxnQkFDQSxLQUFBLHNCQTlCQSxJQUFBLEdBSEEsY0FBQSxFQUNBLFVBQUEsS0FBQSx5QkFDQSxXQUFBLFVBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLE9BQUEsSUFFQSxHQURBLFdBQUEsS0FBQSxTQUFBLEdBQUEsWUFDQSxZQUFBLFlBQUEsQ0FDQSxhQUFBLENBQ0EsT0FHQSxTQUFBLEtBQUEsY0FBQSxNQUFBLEtBQUEsZUFFQSxLQUFBLFlBQUEsYUFFQSxJQUFBLGdCQUFBLEtBQUEsWUFDQSxhQUFBLEtBQUEsVUFBQSxLQUFBLFNBQUEsWUFDQSxnQkFDQSxLQUFBLFlBQUEsV0FDQSx3QkFFQSxLQUFBLGdCQUFBLFlBQUEsV0FBQSxVQUFBLFNBQUEsVUFDQSxlQUtBLEtBQUEsWUFBQSxTQUFBLFdBQUEsVUFDQSwyQkFXQSxLQUFBLG9CQUFBLFdBQ0EsV0FBQSxLQUFBLGFBQ0EsUUFBQSxLQUFBLHFCQUFBLFNBQUEsVUFDQSxJQUNBLFdBQ0EsTUFBQSxHQUNBLGtCQUFBO0tBNkNBLEtBQUEsY0FBQSxTQUFBLE1BQUEsU0FDQSxLQUFBLFdBQUEsUUFDQSxLQUFBLFVBQUEsS0FBQSxTQUFBLGtCQUNBLEtBQUEsMEJBQUEsVUFJQSxLQUFBLDBCQUFBLFNBQUEsU0FDQSxHQUVBLFVBRkEsY0FBQSxFQUNBLFFBQUEsS0FBQSxRQUdBLFVBQUEsVUFBQSxRQUFBLFlBQ0EsU0FBQSxRQUFBLFNBQ0EsU0FBQSxVQUNBLGNBQUEsU0FDQSxTQUFBLFNBQUEsVUFDQSxjQUFBLFNBQUEsU0FDQSxTQUFBLFNBQUEsY0FDQSxjQUFBLFNBQUEsYUFJQSxTQUFBLE9BQUEsaUJBQ0EsY0FDQSxnQkFBQSxTQUFBLFdBQ0EsS0FBQSxvQkFDQSxlQUNBLFdBQUEsUUFDQSxLQUFBLG1CQUVBLE9BQUEsT0FBQSxXQUNBLEtBQUEsc0JBYUEsT0FBQSxPQUFBLFdBQ0EsR0FBQSxZQUFBLFlBSUEsSUFBQSxhQUFBLEtBQUEsWUFBQSxDQUNBLEtBQUEsWUFBQSxVQU1BLEtBSkEsR0FBQSxZQUFBLEtBQUEsWUFDQSxJQUFBLFdBQUEsT0FFQSxVQUFBLFdBQ0EsT0FDQSxVQUFBLFdBQUEsS0FBQSxVQUVBLE1BQUEsYUFBQSxZQUNBLEtBQUEsV0FBQSxLQUFBLHlCQUFBLFVBQ0EsS0FBQSxVQUVBLEtBQUEsZ0JBQUEsVUFBQSxXQUFBLFVBQUEsT0FJQSxNQUFBLGdCQWtLQSxpQkFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsVUFBQSxTQUFBLG9CQUNBLFdBQUEsa0JBQ0EsTUFDQSxJQUFBLFNBQUEsTUFBQSxRQUFBLEtBQUEsT0FDQSxHQUFBLFdBQUEsTUFBQSxHQUNBLFNBQUEsTUFBQSxJQUFBLFlBRUEsV0FBQSxhQUFBLE1BQUEsSUFBQSxNQUFBLEdBQUEsVUFHQSxTQUFBLFlBQUEsV0FFQSxNQUFBLElBQUEsV0FBQSxXQUNBLFNBQUEsZUFBQSxjQUdBLEtBQUEsU0FBQSxNQUFBLFFBQUEsS0FBQSxPQUNBLEdBQUEsV0FBQSxNQUFBLEVBQ0EsV0FBQSxVQUFBLFVBQUEsU0FBQSxVQUNBLFFBQUEsR0FBQSxVQUFBLFNBQUEsU0FBQSxTQUFBLElBQ0EsVUFBQSwwQkFBQSxJQUFBLEdBQUEsUUFJQSxRQUFBLEdBQUEsT0FBQSxXQUNBLFVBQUEsVUFFQSxNQUFBLE9BQUEsV0FDQSxVQUFBLHNCQTRFQSxrQkFBQSxTQUNBLFNBQUEsSUFDQSxRQUFBLFVBQ0EsS0FBQSxTQUFBLE1BQUEsUUFBQSxLQUFBLE1BQ0EsS0FBQSxxQkFBQSxLQUFBLFdBQ0EsTUFBQSxNQUFBLEtBQUEsZUFNQSxrQkFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFFBQUEsV0FDQSxLQUFBLFNBQUEsTUFBQSxJQUFBLEtBQUEsTUFDQSxPQUNBLEtBQUEsVUFBQSxFQUVBLEtBQUEsWUFBQSxTQUFBLFNBQUEsT0FDQSxPQUFBLEtBQUEsV0FBQSxLQUFBLFNBQUEsUUFHQSxLQUFBLFNBQUEsV0FBQSxXQUNBLEtBQUEsa0JBT0EsaUJBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLE1BQUEsSUFBQSxLQUFBLE1BQ0EsR0FBQSxLQUFBLENBRUEsR0FBQSxRQUFBLFdBQUEsS0FBQSxXQUFBLEtBQUEsT0FDQSxNQUFBLFNBQUEsVUFBQSxTQUFBLE9BS0EsR0FKQSxTQUFBLFFBQUEsTUFBQSxPQUFBLElBQ0EsTUFBQSxHQUFBLFFBQUEsUUFHQSxRQUFBLE1BQUEsS0FDQSxLQUFBLFFBQUEsYUFBQSxXQUNBLHdEQUFBLFdBQ0EsTUFBQSxZQUFBLEtBR0EsUUFBQSxPQUFBLFVBQ0EsS0FBQSxjQUdBLEtBQUEsWUFBQSxRQUFBLFNBQUEsT0FDQSxNQUFBLE1BQUEsU0FBQSxRQUFBLFlBQUEsU0FBQSxPQUFBLEtBQUEsWUFPQSxtQkFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFFBQUEsV0FDQSxLQUFBLFNBQUEsTUFBQSxJQUFBLEtBQUEsTUFDQSxHQUFBLEtBQUEsQ0FFQSxHQUFBLFdBQUEsQ0FDQSxNQUFBLFNBQUEsWUFBQSxTQUFBLE9BQ0EsVUFBQSxJQUFBLFFBQUEsRUFDQSxLQUFBLGNBRUEsS0FBQSxZQUFBLFVBQUEsU0FBQSxXQUFBLFdBQ0EsTUFBQSxNQUFBLFNBQUEsYUFBQSxVQUFBLFFBQUEsZUFNQSxtQkFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFFBQUEsV0FDQSxLQUFBLFNBQUEsTUFBQSxJQUFBLEtBQUEsTUFDQSxHQUFBLEtBQUEsQ0FFQSxHQUFBLFdBQUEsQ0FDQSxNQUFBLFNBQUEsWUFBQSxTQUFBLE9BQ0EsVUFBQSxJQUFBLFFBQUEsRUFDQSxLQUFBLGNBRUEsS0FBQSxZQUFBLFVBQUEsU0FBQSxXQUFBLFdBQ0EsTUFBQSxNQUFBLFNBQUEsYUFBQSxVQUFBLFFBQUEsZUF5RkEsZ0JBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsS0FBQSxNQUdBLEdBQUEsUUFBQSxRQUFBLEtBQUEsS0FBQSxNQUFBLFNBQUEsS0FDQSxXQUFBLFVBQUEsS0FBQSxPQUNBLFVBQUEsV0FBQSxLQUFBLFFBQUEsT0FFQSxNQUFBLFNBQUEsV0FFQSxJQUFBLFlBQUEsV0FBQSxDQUVBLEdBQUEsUUFRQSxPQU5BLFlBQ0EsUUFBQSxVQUFBLE1BQUEsV0FBQSxTQUFBLE9BQ0EsT0FBQSxLQUFBLEtBQUEsV0FBQSxLQUFBLE9BQUEsU0FJQSxNQUdBLE1BQUEsU0FBQSxLQUFBLE9BQ0EsS0FBQSxZQUFBLEtBQUEsU0FBQSxPQUNBLE1BQUEsU0FBQSxPQUNBLE1BQUEsS0FBQSxRQUdBLFlBSUEsS0FBQSxTQUFBLFNBQUEsT0FDQSxPQUFBLFFBQUEsTUFBQSxXQU9BLHNCQUFBLHFCQXFEQSxpQkFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsSUFDQSxRQUFBLFNBQUEsSUFBQSxTQUNBLE1BQUEsdUJBQUEsS0FBQSxRQUFBLFNBQ0EsU0FBQSxNQUFBLElBQUEsTUFDQSxLQUFBLEtBQUEsUUFBQSxNQUFBLE1BQUEsS0FBQSxXQUdBLFNBQUEsTUFBQSxJQUFBLE1BQ0EsTUFBQSxPQUFBLEtBQUEsUUFBQSxTQUFBLE9BQ0EsS0FBQSxLQUFBLFFBQUEsYUE4SkEsd0JBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxZQUFBLFNBQUEsU0FBQSxTQUFBLE9BQUEsUUFDQSxHQUFBLE1BQUEsSUFDQSxNQUFBLFNBQUEsT0FBQSxNQUFBLE9BQUEsZ0JBRUEsS0FBQSxTQUFBLFdBQUEsV0FDQSxLQUFBLFNBQUEsaUJBQUEsRUFFQSxLQUFBLFNBQUEsU0FBQSxLQUFBLEtBQUEsU0FBQSxTQUFBLFFBQUEsZUFBQSxXQUVBLE1BREEsTUFBQSxTQUFBLGlCQUFBLEVBQ0EsUUFHQSxLQUFBLFNBQUEsaUJBQUEsTUFnS0EsaUJBQUEsV0FBQSxTQUFBLFVBQ0EsT0FDQSxTQUFBLEtBQ0EsUUFBQSxTQUFBLGlCQUVBLE1BREEsVUFBQSxrQkFBQSxpQkFDQSxTQUFBLE1BQUEsUUFBQSxNQUNBLFNBQUEsaUJBQUEsUUFBQSxLQUFBLFFBQ0EsTUFBQSxPQUFBLEtBQUEsT0FBQSxTQUFBLE9BSUEsUUFBQSxLQUFBLE9BQUEsVUFBQSxHQUFBLGNBMkRBLHlCQUFBLGVBQUEsV0FBQSxTQUFBLGFBQUEsVUFDQSxPQUNBLFFBQUEsU0FBQSxpQkFFQSxNQURBLFVBQUEsa0JBQUEsaUJBQ0EsU0FBQSxNQUFBLFFBQUEsTUFDQSxHQUFBLGVBQUEsYUFBQSxRQUFBLEtBQUEsS0FBQSxNQUFBLGdCQUNBLFVBQUEsaUJBQUEsUUFBQSxjQUFBLGFBQ0EsS0FBQSxTQUFBLGlCQUFBLFNBQUEsT0FDQSxRQUFBLEtBQUEsY0FxREEscUJBQUEsT0FBQSxTQUFBLFdBQUEsU0FBQSxLQUFBLE9BQUEsVUFDQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFNBQUEsU0FBQSxRQUNBLEdBQUEsa0JBQUEsT0FBQSxPQUFBLFlBQ0EsZ0JBQUEsT0FBQSxPQUFBLFdBQUEsU0FBQSxPQUNBLE9BQUEsT0FBQSxJQUFBLFlBSUEsT0FGQSxVQUFBLGtCQUFBLFVBRUEsU0FBQSxNQUFBLFFBQUEsTUFDQSxTQUFBLGlCQUFBLFFBQUEsS0FBQSxZQUVBLE1BQUEsT0FBQSxnQkFBQSxXQUdBLFFBQUEsS0FBQSxLQUFBLGVBQUEsaUJBQUEsU0FBQSxXQXlRQSxpQkFBQSxlQUFBLElBQUEsR0FnREEsb0JBQUEsZUFBQSxNQUFBLEdBZ0RBLHFCQUFBLGVBQUEsT0FBQSxHQTBEQSxpQkFBQSxhQUNBLFFBQUEsU0FBQSxRQUFBLE1BQ0EsS0FBQSxLQUFBLFVBQUEsV0FDQSxRQUFBLFlBQUEsZUFxT0EsdUJBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxPQUFBLEVBQ0EsV0FBQSxJQUNBLFNBQUEsT0FpR0EscUJBS0Esa0JBQ0EsTUFBQSxFQUNBLE9BQUEsRUFFQSxTQUNBLDhJQUFBLE1BQUEsS0FDQSxTQUFBLFdBQ0EsR0FBQSxlQUFBLG1CQUFBLE1BQUEsVUFDQSxtQkFBQSxnQkFBQSxTQUFBLGFBQUEsU0FBQSxPQUFBLFlBQ0EsT0FDQSxTQUFBLElBQ0EsUUFBQSxTQUFBLFNBQUEsTUFDQSxHQUFBLElBQUEsT0FBQSxLQUFBLGVBQ0EsT0FBQSxVQUFBLE1BQUEsU0FDQSxRQUFBLEdBQUEsVUFBQSxTQUFBLE9BQ0EsR0FBQSxVQUFBLFdBQ0EsR0FBQSxPQUFBLE9BQUEsUUFFQSxrQkFBQSxZQUFBLFdBQUEsUUFDQSxNQUFBLFdBQUEsVUFFQSxNQUFBLE9BQUEsa0JBOGVBLElBQUEsZ0JBQUEsV0FBQSxTQUFBLFVBQ0EsT0FDQSxjQUFBLEVBQ0EsV0FBQSxVQUNBLFNBQUEsSUFDQSxVQUFBLEVBQ0EsU0FBQSxJQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsT0FBQSxTQUFBLE1BQUEsS0FBQSxhQUNBLEdBQUEsT0FBQSxXQUFBLGdCQUNBLFFBQUEsT0FBQSxNQUFBLEtBQUEsU0FBQSxPQUVBLE1BQ0EsWUFDQSxZQUFBLFNBQUEsTUFBQSxVQUNBLFdBQUEsU0FDQSxNQUFBLE1BQUEsVUFBQSxTQUFBLGNBQUEsY0FBQSxNQUFBLEtBQUEsS0FJQSxPQUNBLE1BQUEsT0FFQSxTQUFBLE1BQUEsTUFBQSxTQUFBLFNBQUEsYUFJQSxtQkFDQSxpQkFBQSxTQUNBLGlCQUFBLE1BRUEsYUFDQSxXQUFBLFdBQ0EsV0FBQSxNQUVBLFFBQ0EsaUJBQUEsY0FBQSxNQUFBLE9BQ0EsU0FBQSxNQUFBLGtCQUFBLEtBQUEsV0FDQSxpQkFBQSxPQUVBLE1BQUEsYUEwTEEsb0JBQUEsbUJBQUEsZ0JBQUEsV0FBQSxPQUNBLFNBQUEsaUJBQUEsY0FBQSxTQUFBLE1BQ0EsT0FDQSxTQUFBLE1BQ0EsU0FBQSxJQUNBLFVBQUEsRUFDQSxXQUFBLFVBQ0EsV0FBQSxRQUFBLEtBQ0EsUUFBQSxTQUFBLFFBQUEsTUFDQSxHQUFBLFFBQUEsS0FBQSxXQUFBLEtBQUEsSUFDQSxVQUFBLEtBQUEsUUFBQSxHQUNBLGNBQUEsS0FBQSxVQUVBLE9BQUEsVUFBQSxNQUFBLFNBQUEsTUFBQSxLQUFBLGFBQ0EsR0FDQSxjQUNBLGdCQUNBLGVBSEEsY0FBQSxFQUtBLDBCQUFBLFdBQ0Esa0JBQ0EsZ0JBQUEsU0FDQSxnQkFBQSxNQUVBLGVBQ0EsYUFBQSxXQUNBLGFBQUEsTUFFQSxpQkFDQSxTQUFBLE1BQUEsZ0JBQUEsS0FBQSxXQUNBLGdCQUFBLE9BRUEsZ0JBQUEsZUFDQSxlQUFBLE1BSUEsT0FBQSxPQUFBLEtBQUEsbUJBQUEsUUFBQSxTQUFBLEtBQ0EsR0FBQSxnQkFBQSxZQUNBLFVBQUEsZ0JBQUEsZ0JBQUEsTUFBQSxNQUFBLGdCQUNBLGlCQUdBLGVBQUEsYUFFQSxNQUdBLGlCQUFBLEtBQUEsR0FBQSxLQUFBLFNBQUEsVUFDQSxHQUFBLGVBQUEsY0FBQSxDQUNBLEdBQUEsVUFBQSxNQUFBLE1BQ0EsTUFBQSxTQUFBLFFBUUEsSUFBQSxPQUFBLFlBQUEsU0FBQSxTQUFBLE9BQ0EsNEJBQ0EsU0FBQSxNQUFBLE1BQUEsS0FBQSxVQUFBLEtBQUEsaUJBR0EsY0FBQSxTQUNBLGVBQUEsTUFFQSxhQUFBLE1BQUEsd0JBQUEsS0FDQSxNQUFBLE1BQUEsYUFDQSxXQUNBLGVBQUEsZ0JBQ0EsNEJBQ0EsTUFBQSxNQUFBLHVCQUFBLFFBR0EsTUFBQSxNQUFBLDJCQUFBLE9BRUEsNEJBQ0EsS0FBQSxTQUFBLGFBYUEsK0JBQUEsV0FDQSxTQUFBLFVBQ0EsT0FDQSxTQUFBLE1BQ0EsU0FBQSxLQUNBLFFBQUEsWUFDQSxLQUFBLFNBQUEsTUFBQSxTQUFBLE1BQUEsTUFDQSxNQUFBLE1BQUEsS0FBQSxTQUFBLEdBQUEsYUFJQSxTQUFBLFlBQ0EsVUFBQSxvQkFBQSxLQUFBLFNBQUEsVUFBQSxZQUFBLE1BQ0EsU0FBQSxPQUNBLFNBQUEsT0FBQSxRQUNBLFVBQUEsVUFBQSxZQUlBLFNBQUEsS0FBQSxLQUFBLGNBQ0EsVUFBQSxTQUFBLFlBQUEsWUE2REEsZ0JBQUEsYUFDQSxTQUFBLElBQ0EsUUFBQSxXQUNBLE9BQ0EsSUFBQSxTQUFBLE1BQUEsUUFBQSxPQUNBLE1BQUEsTUFBQSxNQUFBLGFBc0NBLHVCQUFBLGFBQUEsVUFBQSxFQUFBLFNBQUEsTUE4S0Esc0JBQUEsVUFBQSxlQUFBLFNBQUEsUUFBQSxjQUNBLEdBQUEsT0FBQSxLQUNBLFFBQ0EsU0FBQSxLQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFDQSxHQUFBLFdBQUEsS0FBQSxNQUNBLFFBQUEsS0FBQSxNQUFBLE1BQUEsUUFBQSxLQUFBLEtBQUEsTUFBQSxNQUNBLE9BQUEsS0FBQSxRQUFBLEVBQ0EsTUFBQSxNQUFBLE1BQUEsYUFDQSxlQUNBLFlBQUEsYUFBQSxjQUNBLFVBQUEsYUFBQSxZQUNBLE9BQUEsb0JBRUEsU0FBQSxLQUFBLFNBQUEsV0FBQSxlQUNBLE9BQUEsS0FBQSxpQkFDQSxNQUFBLFVBQUEsY0FBQSxRQUFBLE9BQUEsSUFBQSxRQUFBLFFBQUEsT0FDQSxRQUFBLEtBQUEsS0FBQSxNQUFBLG1CQUdBLFFBQUEsTUFBQSxTQUFBLFdBQUEsS0FDQSxZQUFBLEtBQ0EsYUFBQSxXQUFBLFFBQUEsTUFBQSxZQUFBLFVBQUEsSUFDQSxPQUFBLGNBR0EsTUFBQSxPQUFBLFdBQ0EsR0FBQSxPQUFBLFdBQUEsTUFBQSxNQUFBLFdBRUEsT0FBQSxPQUFBLE9BTUEsSUFIQSxRQUFBLFNBQUEsTUFBQSxRQUFBLFVBQUEsTUFBQSxTQUNBLFlBQUEsT0FBQSxTQUlBLFNBQUEsUUFDQSxRQUFBLEtBQUEsY0FzTkEsbUJBQUEsU0FBQSxXQUFBLFNBQUEsT0FBQSxVQUNBLEdBQUEsWUFBQSxlQUNBLGVBQUEsT0FBQSxZQUVBLFlBQUEsU0FBQSxNQUFBLE1BQUEsZ0JBQUEsTUFBQSxjQUFBLElBQUEsYUFFQSxNQUFBLGlCQUFBLE1BQ0EsZ0JBQUEsTUFBQSxlQUFBLEtBQ0EsTUFBQSxPQUFBLE1BQ0EsTUFBQSxPQUFBLElBQUEsTUFDQSxNQUFBLE1BQUEsUUFBQSxZQUFBLEVBQ0EsTUFBQSxVQUFBLE1BQUEsUUFBQSxNQUFBLE9BRUEsTUFBQSxPQUFBLE1BQUEsTUFBQSxLQUFBLEVBQUEsU0FJQSxjQUFBLFNBQUEsT0FDQSxNQUFBLE9BQUEsTUFBQSxJQUdBLFlBQUEsU0FBQSxPQUNBLE1BQUEsT0FBQSxNQUFBLE1BQUEsTUFBQSxPQUFBLEdBSUEsUUFDQSxTQUFBLElBQ0EsY0FBQSxFQUNBLFdBQUEsVUFDQSxTQUFBLElBQ0EsVUFBQSxFQUNBLE9BQUEsRUFDQSxRQUFBLFNBQUEsU0FBQSxPQUNBLEdBQUEsWUFBQSxNQUFBLFNBQ0EsbUJBQUEsU0FBQSxjQUFBLGtCQUFBLFdBQUEsS0FFQSxNQUFBLFdBQUEsTUFBQSw2RkFFQSxLQUFBLE1BQ0EsS0FBQSxnQkFBQSxPQUFBLHlGQUNBLFdBR0EsSUFBQSxLQUFBLE1BQUEsR0FDQSxJQUFBLE1BQUEsR0FDQSxRQUFBLE1BQUEsR0FDQSxXQUFBLE1BQUEsRUFJQSxJQUZBLE1BQUEsSUFBQSxNQUFBLGtEQUVBLE1BQ0EsS0FBQSxnQkFBQSxTQUFBLGdIQUNBLElBRUEsSUFBQSxpQkFBQSxNQUFBLElBQUEsTUFBQSxHQUNBLGNBQUEsTUFBQSxFQUVBLElBQUEsV0FBQSw2QkFBQSxLQUFBLFVBQ0EsZ0ZBQUEsS0FBQSxVQUNBLEtBQUEsZ0JBQUEsV0FBQSx5RkFDQSxRQUdBLElBQUEsa0JBQUEsZUFBQSxpQkFBQSxlQUNBLGNBQUEsSUFBQSxRQWFBLE9BWEEsWUFDQSxpQkFBQSxPQUFBLGFBRUEsaUJBQUEsU0FBQSxJQUFBLE9BQ0EsTUFBQSxTQUFBLFFBRUEsZUFBQSxTQUFBLEtBQ0EsTUFBQSxPQUlBLFNBQUEsT0FBQSxTQUFBLE1BQUEsS0FBQSxhQUVBLG1CQUNBLGVBQUEsU0FBQSxJQUFBLE1BQUEsT0FLQSxNQUhBLGlCQUFBLGFBQUEsZUFBQSxLQUNBLGFBQUEsaUJBQUEsTUFDQSxhQUFBLE9BQUEsTUFDQSxpQkFBQSxPQUFBLGVBWUEsSUFBQSxjQUFBLFdBR0EsUUFBQSxpQkFBQSxJQUFBLFNBQUEsWUFDQSxHQUFBLE9BQUEsT0FHQSxTQUlBLGlCQUNBLElBQUEsTUFDQSxVQUNBLFlBQ0EsZUFDQSxNQUNBLGVBQ0EsaUJBYkEsYUFBQSxTQUFBLEdBS0EsYUFBQSxXQWNBLElBSkEsVUFDQSxPQUFBLFNBQUEsWUFHQSxZQUFBLFlBQ0EsZUFBQSxXQUNBLFlBQUEsZ0JBQUEscUJBQ0EsQ0FDQSxZQUFBLGdCQUFBLGVBRUEsaUJBQ0EsS0FBQSxHQUFBLFdBQUEsWUFDQSxXQUFBLGVBQUEsVUFBQSxLQUFBLFFBQUEsT0FBQSxJQUNBLGVBQUEsS0FBQSxRQUdBLGdCQUFBLE9BT0EsSUFKQSxpQkFBQSxlQUFBLE9BQ0EsZUFBQSxHQUFBLE9BQUEsa0JBR0EsTUFBQSxFQUFBLGlCQUFBLE1BQUEsUUFJQSxHQUhBLElBQUEsYUFBQSxlQUFBLE1BQUEsZUFBQSxPQUNBLE1BQUEsV0FBQSxLQUNBLFVBQUEsWUFBQSxJQUFBLE1BQUEsT0FDQSxhQUFBLFdBRUEsTUFBQSxhQUFBLGlCQUNBLGNBQUEsV0FDQSxhQUFBLFdBQUEsTUFDQSxlQUFBLE9BQUEsVUFDQSxDQUFBLEdBQUEsYUFBQSxXQUtBLEtBSEEsU0FBQSxlQUFBLFNBQUEsT0FDQSxPQUFBLE1BQUEsUUFBQSxhQUFBLE1BQUEsSUFBQSxTQUVBLGVBQUEsUUFDQSxzSkFDQSxXQUFBLFVBQUEsT0FBQSxPQUdBLGdCQUFBLFFBQUEsR0FBQSxVQUFBLE1BQUEsVUFBQSxNQUFBLFdBQ0EsYUFBQSxZQUFBLEVBS0EsSUFBQSxHQUFBLFlBQUEsY0FBQSxDQUlBLEdBSEEsTUFBQSxhQUFBLFVBQ0EsaUJBQUEsY0FBQSxNQUFBLE9BQ0EsU0FBQSxNQUFBLGtCQUNBLGlCQUFBLEdBQUEsV0FHQSxJQUFBLE1BQUEsRUFBQSxPQUFBLGlCQUFBLE9BQUEsT0FBQSxNQUFBLFFBQ0EsaUJBQUEsT0FBQSxhQUFBLENBR0EsT0FBQSxNQUFBLFdBSUEsSUFBQSxNQUFBLEVBQUEsaUJBQUEsTUFBQSxRQUtBLEdBSkEsSUFBQSxhQUFBLGVBQUEsTUFBQSxlQUFBLE9BQ0EsTUFBQSxXQUFBLEtBQ0EsTUFBQSxlQUFBLE9BRUEsTUFBQSxNQUFBLENBSUEsU0FBQSxZQUdBLEdBQ0EsVUFBQSxTQUFBLGtCQUNBLFVBQUEsU0FBQSxZQUVBLGVBQUEsUUFBQSxVQUVBLFNBQUEsS0FBQSxjQUFBLE1BQUEsT0FBQSxLQUFBLE9BQUEsZUFFQSxhQUFBLFlBQUEsT0FDQSxZQUFBLE1BQUEsTUFBQSxNQUFBLGdCQUFBLE1BQUEsY0FBQSxJQUFBLHNCQUdBLGFBQUEsU0FBQSxNQUFBLE9BQ0EsTUFBQSxNQUFBLEtBRUEsSUFBQSxTQUFBLG1CQUFBLFdBQUEsRUFDQSxPQUFBLE1BQUEsVUFBQSxRQUdBLFNBQUEsTUFBQSxNQUFBLEtBQUEsT0FBQSxlQUNBLGFBQUEsUUFJQSxNQUFBLE1BQUEsTUFDQSxhQUFBLE1BQUEsSUFBQSxNQUNBLFlBQUEsTUFBQSxNQUFBLE1BQUEsZ0JBQUEsTUFBQSxjQUFBLElBQUEsbUJBSUEsY0FBQSxvQkFrS0EsaUJBQUEsV0FBQSxTQUFBLFVBQ0EsT0FDQSxTQUFBLElBQ0EsY0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFDQSxNQUFBLE9BQUEsS0FBQSxPQUFBLFNBQUEsT0FDQSxTQUFBLE1BQUEsY0FBQSxZQUFBLFFBQUEsaUJBcUpBLGlCQUFBLFdBQUEsU0FBQSxVQUNBLE9BQ0EsU0FBQSxJQUNBLGNBQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BQ0EsTUFBQSxPQUFBLEtBQUEsT0FBQSxTQUFBLE9BQ0EsU0FBQSxNQUFBLFdBQUEsZUFBQSxRQUFBLGlCQW9EQSxpQkFBQSxZQUFBLFNBQUEsTUFBQSxRQUFBLE1BQ0EsTUFBQSxPQUFBLEtBQUEsUUFBQSxTQUFBLFVBQUEsV0FDQSxXQUFBLFlBQUEsV0FDQSxRQUFBLFVBQUEsU0FBQSxJQUFBLE9BQUEsUUFBQSxJQUFBLE1BQUEsTUFFQSxXQUFBLFFBQUEsSUFBQSxhQUNBLEtBbUlBLG1CQUFBLFdBQUEsU0FBQSxVQUNBLE9BQ0EsU0FBQSxLQUNBLFFBQUEsV0FHQSxZQUFBLFNBQUEsV0FDQSxLQUFBLFdBRUEsS0FBQSxTQUFBLE1BQUEsUUFBQSxLQUFBLG9CQUNBLEdBQUEsV0FBQSxLQUFBLFVBQUEsS0FBQSxHQUNBLHVCQUNBLG9CQUNBLDJCQUNBLGtCQUVBLGNBQUEsU0FBQSxNQUFBLE9BQ0EsTUFBQSxZQUFBLE1BQUEsT0FBQSxNQUFBLElBR0EsT0FBQSxPQUFBLFVBQUEsU0FBQSxPQUNBLEdBQUEsR0FBQSxFQUNBLEtBQUEsRUFBQSxFQUFBLEdBQUEsd0JBQUEsT0FBQSxHQUFBLElBQUEsRUFDQSxTQUFBLE9BQUEsd0JBQUEsR0FJQSxLQUZBLHdCQUFBLE9BQUEsRUFFQSxFQUFBLEVBQUEsR0FBQSxlQUFBLE9BQUEsR0FBQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLFVBQUEsY0FBQSxpQkFBQSxHQUFBLE1BQ0EsZ0JBQUEsR0FBQSxVQUNBLElBQUEsU0FBQSx3QkFBQSxHQUFBLFNBQUEsTUFBQSxTQUNBLFNBQUEsS0FBQSxjQUFBLHdCQUFBLElBR0EsaUJBQUEsT0FBQSxFQUNBLGVBQUEsT0FBQSxHQUVBLG9CQUFBLG1CQUFBLE1BQUEsSUFBQSxRQUFBLG1CQUFBLE1BQUEsT0FDQSxRQUFBLG9CQUFBLFNBQUEsb0JBQ0EsbUJBQUEsV0FBQSxTQUFBLFlBQUEsZUFDQSxlQUFBLEtBQUEsY0FDQSxJQUFBLFFBQUEsbUJBQUEsT0FDQSxhQUFBLFlBQUEsVUFBQSxTQUFBLGNBQUEsc0JBQ0EsSUFBQSxRQUFBLE1BQUEsWUFFQSxrQkFBQSxLQUFBLE9BQ0EsU0FBQSxNQUFBLFlBQUEsT0FBQSxTQUFBLGtCQVNBLHNCQUFBLGFBQ0EsV0FBQSxVQUNBLFNBQUEsS0FDQSxRQUFBLFlBQ0EsY0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFBQSxLQUFBLGFBQ0EsS0FBQSxNQUFBLElBQUEsTUFBQSxjQUFBLEtBQUEsTUFBQSxJQUFBLE1BQUEsa0JBQ0EsS0FBQSxNQUFBLElBQUEsTUFBQSxjQUFBLE1BQUEsV0FBQSxZQUFBLFFBQUEsYUFJQSx5QkFBQSxhQUNBLFdBQUEsVUFDQSxTQUFBLEtBQ0EsUUFBQSxZQUNBLGNBQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLEtBQUEsS0FBQSxhQUNBLEtBQUEsTUFBQSxLQUFBLEtBQUEsTUFBQSxTQUNBLEtBQUEsTUFBQSxLQUFBLE1BQUEsV0FBQSxZQUFBLFFBQUEsYUEwREEsc0JBQUEsYUFDQSxTQUFBLE1BQ0EsS0FBQSxTQUFBLE9BQUEsU0FBQSxPQUFBLFdBQUEsYUFDQSxJQUFBLFlBQ0EsS0FBQSxRQUFBLGdCQUFBLFNBQ0EsOEhBR0EsWUFBQSxVQUdBLGFBQUEsU0FBQSxPQUNBLFNBQUEsUUFDQSxTQUFBLE9BQUEsWUFzQ0EsaUJBQUEsaUJBQUEsU0FBQSxnQkFDQSxPQUNBLFNBQUEsSUFDQSxVQUFBLEVBQ0EsUUFBQSxTQUFBLFFBQUEsTUFDQSxHQUFBLG9CQUFBLEtBQUEsS0FBQSxDQUNBLEdBQUEsYUFBQSxLQUFBLEdBRUEsS0FBQSxRQUFBLEdBQUEsSUFFQSxnQkFBQSxJQUFBLFlBQUEsV0FNQSxnQkFBQSxPQUFBLGFBdUlBLG1CQUFBLFNBQ0EsU0FBQSxJQUNBLFVBQUEsSUFJQSxpQkFBQSxXQUFBLFNBQUEsU0FBQSxTQUFBLFFBRUEsR0FBQSxtQkFBQSx5TUFDQSxlQUFBLGNBQUEsS0FHQSxRQUNBLFNBQUEsSUFDQSxTQUFBLFNBQUEsWUFDQSxZQUFBLFdBQUEsU0FBQSxTQUFBLFNBQUEsU0FBQSxPQUFBLFFBQ0EsR0FHQSxZQUNBLGNBSkEsS0FBQSxLQUNBLGNBQ0EsWUFBQSxhQUtBLE1BQUEsVUFBQSxPQUFBLFFBR0EsS0FBQSxLQUFBLFNBQUEsYUFBQSxZQUFBLGdCQUNBLFlBQUEsYUFDQSxXQUFBLFlBQ0EsY0FBQSxnQkFJQSxLQUFBLFVBQUEsU0FBQSxNQUFBLFNBQ0Esd0JBQUEsTUFBQSxrQkFDQSxXQUFBLFFBQUEsRUFFQSxZQUFBLFlBQUEsUUFDQSxTQUFBLElBQUEsT0FDQSxjQUFBLFVBQUEsY0FBQSxVQUtBLFFBQUEsR0FBQSxhQUFBLGNBQ0EsUUFBQSxHQUFBLFVBQUEsSUFLQSxLQUFBLGFBQUEsU0FBQSxPQUNBLEtBQUEsVUFBQSxlQUNBLFlBQUEsT0FDQSxZQUFBLFlBQUEsT0FDQSxLQUFBLG9CQUFBLFNBTUEsS0FBQSxvQkFBQSxTQUFBLEtBQ0EsR0FBQSxZQUFBLEtBQUEsUUFBQSxLQUFBLElBQ0EsZUFBQSxJQUFBLFlBQ0EsU0FBQSxRQUFBLGVBQ0EsU0FBQSxJQUFBLFlBQ0EsY0FBQSxLQUFBLFlBQUEsSUFJQSxLQUFBLFVBQUEsU0FBQSxPQUNBLE1BQUEsWUFBQSxlQUFBLFFBR0EsT0FBQSxJQUFBLFdBQUEsV0FFQSxLQUFBLG9CQUFBLFNBSUEsS0FBQSxTQUFBLE1BQUEsUUFBQSxLQUFBLE9BMkNBLFFBQUEsZUFBQSxNQUFBLGNBQUEsWUFBQSxZQUNBLFlBQUEsUUFBQSxXQUNBLEdBQUEsV0FBQSxZQUFBLFVBRUEsWUFBQSxVQUFBLFlBQ0EsY0FBQSxVQUFBLGNBQUEsU0FDQSxjQUFBLElBQUEsV0FDQSxLQUFBLFdBQUEsWUFBQSxLQUFBLFlBQUEsSUFFQSxZQUFBLFlBQUEsWUFDQSxjQUFBLElBQUEsSUFFQSxXQUFBLG9CQUFBLFlBS0EsY0FBQSxHQUFBLFNBQUEsV0FDQSxNQUFBLE9BQUEsV0FDQSxjQUFBLFVBQUEsY0FBQSxTQUNBLFlBQUEsY0FBQSxjQUFBLFdBS0EsUUFBQSxpQkFBQSxNQUFBLGNBQUEsTUFDQSxHQUFBLFNBQ0EsTUFBQSxRQUFBLFdBQ0EsR0FBQSxPQUFBLEdBQUEsU0FBQSxLQUFBLFdBQ0EsU0FBQSxjQUFBLEtBQUEsVUFBQSxTQUFBLFFBQ0EsT0FBQSxTQUFBLFVBQUEsTUFBQSxJQUFBLE9BQUEsV0FNQSxNQUFBLE9BQUEsV0FDQSxPQUFBLFNBQUEsS0FBQSxjQUNBLFNBQUEsWUFBQSxLQUFBLFlBQ0EsS0FBQSxhQUlBLGNBQUEsR0FBQSxTQUFBLFdBQ0EsTUFBQSxPQUFBLFdBQ0EsR0FBQSxTQUNBLFNBQUEsY0FBQSxLQUFBLFVBQUEsU0FBQSxRQUNBLE9BQUEsVUFDQSxNQUFBLEtBQUEsT0FBQSxTQUdBLEtBQUEsY0FBQSxXQUtBLFFBQUEsZ0JBQUEsTUFBQSxjQUFBLE1Bd0hBLFFBQUEsa0JBQ0EsR0FBQSxjQUFBLENBQ0EsSUFBQSxTQUFBLENBQ0EsR0FBQSxZQUFBLEtBQUEsV0FDQSxJQUFBLFNBQUEsUUFBQSxZQUFBLENBQ0EsWUFBQSxHQUFBLFlBRUEsS0FBQSxHQURBLFdBQ0EsV0FBQSxFQUFBLFdBQUEsV0FBQSxPQUFBLGFBQ0EsT0FBQSxXQUFBLFdBQUEsWUFDQSxZQUFBLElBQUEsUUFBQSxNQUFBLFFBQUEsV0FBQSxpQkFHQSxhQUFBLEdBQUEsU0FBQSxZQUdBLE1BQUEsYUFJQSxRQUFBLHFCQUNBLGtCQUNBLE1BQUEsYUFBQSxRQUNBLGlCQUFBLEdBS0EsUUFBQSxVQUNBLGlCQUFBLENBR0EsSUFFQSxpQkFDQSxZQUNBLE9BQ0EsZUFBQSxnQkFBQSxlQUlBLElBQ0EsWUFBQSxPQUNBLFdBQUEsTUFFQSxTQUVBLFlBQ0EsUUFDQSxNQWpCQSxjQUFBLE9BQ0Esa0JBQUEsSUFLQSxXQUFBLEtBQUEsWUFDQSxPQUFBLFNBQUEsV0FDQSxLQUFBLFFBQUEsV0FBQSxRQUFBLE9BSUEsVUFFQSxZQUFBLGdCQU9BLEtBQUEsTUFBQSxFQUFBLE9BQUEsS0FBQSxPQUFBLE9BQUEsTUFBQSxRQUFBLENBR0EsR0FEQSxJQUFBLE1BQ0EsUUFBQSxDQUVBLEdBREEsSUFBQSxLQUFBLE9BQ0EsTUFBQSxJQUFBLE9BQUEsR0FBQSxRQUNBLFFBQUEsU0FBQSxJQVVBLEdBUEEsT0FBQSxXQUFBLE9BQUEsS0FFQSxnQkFBQSxVQUFBLE1BQUEsU0FBQSxJQUNBLFlBQUEsYUFBQSxvQkFDQSxZQUFBLGFBQUEsb0JBQ0EsaUJBQUEsS0FBQSxrQkFFQSxTQUNBLFNBQUEsVUFDQSxZQUFBLE9BQUEsUUFBQSxRQUFBLE1BQUEsUUFBQSxRQUFBLE1BQUEsY0FFQSxDQUNBLEdBQUEsUUFBQSxDQUNBLEdBQUEsYUFDQSxXQUFBLFdBQUEsV0FDQSxTQUFBLFFBQUEsTUFBQSxhQUFBLFFBQUEsTUFBQSxZQUVBLFVBQUEsYUFBQSxRQUFBLE1BQUEsT0FFQSxhQUFBLGFBQUEsU0FFQSxNQUFBLFVBQUEsTUFBQSxRQUdBLE1BQUEsVUFBQSxPQUFBLE1BQUEsR0FDQSxZQUFBLE1BRUEsR0FBQSxRQUFBLFFBQUEsTUFBQSxRQUFBLFFBQUEsS0FBQSxPQUFBLE1BQ0EsTUFBQSxNQUNBLFNBQUEsV0FjQSxJQVhBLFdBQ0EsWUFBQSxPQUFBLFdBRUEsYUFBQSxJQUFBLFNBQUEsR0FBQSxHQUFBLE1BQUEsR0FBQSxVQUFBLGNBQ0EsYUFFQSxhQUFBLElBQUEsU0FBQSxHQUFBLElBQUEsTUFBQSxHQUFBLFVBQUEsS0FLQSxXQUFBLEVBQUEsWUFBQSxpQkFBQSxPQUNBLFlBQUEsV0FDQSxhQUFBLENBMkJBLElBekJBLGdCQUFBLGlCQUFBLFlBR0EsWUFBQSxhQUFBLGlCQUVBLGtCQUFBLFFBQUEsWUFFQSxnQkFDQSxRQUFBLGlCQUFBLFFBQUEsS0FBQSxRQUFBLGlCQUNBLE1BQUEsWUFBQSxPQUVBLGlCQUFBLGdCQUNBLGtCQUFBLEtBQUEsaUJBQ0EsY0FBQSxPQUFBLGVBQUEsV0FFQSxnQkFBQSxrQkFBQSxZQUNBLGVBQUEsZ0JBQUEsR0FHQSxlQUFBLE9BQUEsaUJBQ0EsZUFBQSxRQUFBLEtBQUEsUUFBQSxlQUFBLE1BQUEsa0JBSUEsWUFBQSxLQUNBLE1BQUEsRUFBQSxPQUFBLFlBQUEsT0FBQSxPQUFBLE1BQUEsUUFDQSxPQUFBLFlBQUEsUUFDQSxlQUFBLGdCQUFBLE1BQUEsS0FFQSxZQUFBLGVBQUEsUUFDQSxlQUFBLFFBQUEsT0FBQSxPQUNBLFlBQUEsS0FBQSxlQUFBLE1BQUEsT0FBQSxPQUVBLGVBQUEsS0FBQSxPQUFBLElBQ0EsWUFBQSxJQUFBLGVBQUEsR0FBQSxPQUFBLElBR0EsWUFBQSxHQUFBLFdBQUEsT0FBQSxXQUNBLFlBQUEsS0FBQSxXQUFBLGVBQUEsU0FBQSxPQUFBLFVBQ0EsTUFJQSxZQUFBLEtBQUEsV0FBQSxlQUFBLGFBT0EsS0FBQSxPQUFBLElBQUEsV0FFQSxRQUFBLFlBS0EsUUFBQSxlQUFBLFNBQ0EsSUFBQSxPQUFBLElBQ0EsS0FBQSxXQUFBLE9BQUEsVUFDQSxLQUFBLFdBQUEsT0FBQSxVQUNBLEtBQUEsT0FBQSxPQUdBLGdCQUFBLEtBQUEsZ0JBQ0EsUUFBQSxRQUNBLE1BQUEsT0FBQSxNQUNBLEdBQUEsT0FBQSxHQUNBLFNBQUEsT0FBQSxXQUVBLFlBQ0EsWUFBQSxNQUFBLFNBRUEsZUFBQSxRQUFBLE9BQUEsU0FFQSxZQUFBLFFBS0EsS0FEQSxRQUNBLGdCQUFBLE9BQUEsT0FDQSxnQkFBQSxNQUFBLFFBQUEsU0FJQSxLQUFBLGtCQUFBLE9BQUEsWUFDQSxrQkFBQSxNQUFBLEdBQUEsUUFBQSxTQXpUQSxHQUFBLE1BRUEsTUFBQSxNQUFBLFdBQUEsTUFBQSxvQkFDQSxLQUFBLGlCQUFBLE9BQ0EsMkhBR0EsV0FBQSxZQUFBLGVBR0EsSUFBQSxXQUFBLE9BQUEsTUFBQSxJQUFBLE1BQUEsSUFDQSxVQUFBLE1BQUEsSUFBQSxNQUFBLEdBQ0EsUUFBQSxNQUFBLEdBQ0EsVUFBQSxPQUFBLE1BQUEsSUFBQSxJQUNBLFFBQUEsT0FBQSxNQUFBLEdBQUEsTUFBQSxHQUFBLFdBQ0EsU0FBQSxPQUFBLE1BQUEsSUFDQSxNQUFBLE1BQUEsR0FDQSxRQUFBLE1BQUEsT0FBQSxNQUFBLElBQUEsS0FLQSxxQkFBQSxRQUFBLGNBQUEsTUFBQSxLQUVBLGNBRUEsU0FBQSxZQUFBLE9BSUEsV0FBQSxZQUFBLFlBSUEsV0FBQSxVQUlBLGNBQUEsUUFFQSxjQUFBLEdBQUEsU0FBQSxXQUNBLE1BQUEsT0FBQSxXQUNBLEdBQUEsYUFHQSxJQUFBLE1BQUEsY0FBQSxNQUFBLFdBQUEsT0FBQSxZQUFBLFdBRkEsV0FBQSxTQUFBLFdBQ0EsU0FHQSxJQUFBLFVBRUEsSUFEQSxTQUNBLFdBQUEsRUFBQSxZQUFBLGtCQUFBLE9BQ0EsWUFBQSxXQUNBLGFBSUEsSUFGQSxZQUFBLGtCQUFBLFlBRUEsTUFBQSxFQUFBLE9BQUEsWUFBQSxPQUFBLE9BQUEsTUFBQSxRQUNBLElBQUEsY0FBQSxZQUFBLE9BQUEsU0FBQSxHQUFBLFNBQUEsQ0FHQSxHQUZBLElBQUEsY0FBQSxNQUNBLFVBQUEsT0FBQSxTQUFBLEtBQ0EsUUFDQSxJQUFBLFdBQUEsRUFBQSxXQUFBLFdBQUEsU0FDQSxPQUFBLFdBQUEsV0FBQSxZQUNBLFFBQUEsTUFBQSxTQUFBLEtBRkEsa0JBS0EsUUFBQSxXQUFBLFdBQUEsSUFFQSxPQUFBLEtBQUEsUUFBQSxNQUFBLGNBTUEsSUFEQSxJQUFBLGNBQUEsTUFDQSxLQUFBLElBQ0EsTUFBQSxjQUNBLElBQUEsS0FBQSxJQUNBLE1BQUEsU0FFQSxJQUFBLFNBQ0EsSUFBQSxXQUFBLEVBQUEsV0FBQSxXQUFBLE9BQUEsYUFFQSxHQURBLE9BQUEsV0FBQSxXQUFBLFlBQ0EsUUFBQSxNQUFBLFNBQUEsSUFBQSxDQUNBLE1BQUEsUUFBQSxNQUFBLE9BQ0EsWUFJQSxRQUFBLFdBQUEsV0FBQSxLQUNBLFVBQUEsT0FBQSxTQUFBLEtBQ0EsTUFBQSxRQUFBLE1BQUEsT0FJQSxNQUFBLGNBQUEsT0FDQSxhQUlBLEtBQUEsUUFBQSxPQUVBLE1BQUEsaUJBQUEsU0FBQSxtQkFDQSxNQUFBLGlCQUFBLFdBQ0EsR0FBQSxXQUNBLE9BQUEsU0FBQSxNQUNBLElBQUEsT0FBQSxDQUVBLElBQUEsR0FEQSxXQUFBLEdBQUEsT0FBQSxPQUFBLFFBQ0EsRUFBQSxFQUFBLEdBQUEsT0FBQSxPQUFBLEdBQUEsRUFBQSxJQUNBLE9BQUEsV0FBQSxPQUFBLEdBQ0EsVUFBQSxHQUFBLFVBQUEsTUFBQSxPQUVBLE9BQUEsYUFFQSxtQkFFQSxVQUNBLE1BQUEsaUJBQUEsV0FBQSxNQUFBLE1BQUEsYUFBQSxtQkFyTkEsR0FBQSxNQUFBLEdBQUEsQ0FnQkEsSUFBQSxHQVRBLGFBTEEsV0FBQSxNQUFBLEdBQ0EsWUFBQSxNQUFBLEdBQ0EsU0FBQSxLQUFBLFNBQ0EsV0FBQSxLQUFBLFVBQ0EsWUFBQSxFQUVBLGlCQUFBLEVBR0EsZUFBQSxPQUFBLFNBQUEsY0FBQSxXQUNBLGlCQUFBLE9BQUEsU0FBQSxjQUFBLGFBQ0EsY0FBQSxlQUFBLFFBR0EsRUFBQSxFQUFBLFNBQUEsUUFBQSxXQUFBLEdBQUEsU0FBQSxPQUFBLEdBQUEsRUFBQSxJQUNBLEdBQUEsS0FBQSxTQUFBLEdBQUEsTUFBQSxDQUNBLFlBQUEsV0FBQSxTQUFBLEdBQUEsRUFDQSxPQUlBLFdBQUEsS0FBQSxZQUFBLFdBQUEsZUFHQSxXQUNBLFlBQUEsU0FBQSxTQUFBLE9BQ0EsT0FBQSxPQUFBLElBQUEsTUFBQSxTQUlBLFdBQUEsZUFBQSxNQUFBLFFBQUEsYUFDQSxTQUFBLGdCQUFBLE1BQUEsUUFBQSxhQUNBLGNBQUEsTUFBQSxRQUFBLFlBQUEsaUJBaVlBLGlCQUFBLGVBQUEsU0FBQSxjQUNBLEdBQUEsaUJBQ0EsVUFBQSxLQUNBLGFBQUEsS0FHQSxRQUNBLFNBQUEsSUFDQSxTQUFBLElBQ0EsUUFBQSxTQUFBLFFBQUEsTUFDQSxHQUFBLFlBQUEsS0FBQSxPQUFBLENBQ0EsR0FBQSxlQUFBLGFBQUEsUUFBQSxRQUFBLEVBQ0EsZ0JBQ0EsS0FBQSxLQUFBLFFBQUEsUUFBQSxRQUlBLE1BQUEsVUFBQSxNQUFBLFFBQUEsTUFDQSxHQUFBLGdCQUFBLG9CQUNBLE9BQUEsUUFBQSxTQUNBLFdBQUEsT0FBQSxLQUFBLGlCQUNBLE9BQUEsU0FBQSxLQUFBLGVBRUEsYUFBQSxXQUFBLFVBR0EsUUFBQSxLQUFBLFlBQUEsR0FFQSxXQUFBLGVBR0EsY0FDQSxNQUFBLE9BQUEsY0FBQSxTQUFBLE9BQUEsUUFDQSxLQUFBLEtBQUEsUUFBQSxRQUNBLFNBQUEsUUFDQSxXQUFBLGFBQUEsUUFFQSxXQUFBLFVBQUEsT0FBQSxXQUdBLFdBQUEsVUFBQSxLQUFBLE1BQUEsU0FHQSxRQUFBLEdBQUEsV0FBQSxXQUNBLFdBQUEsYUFBQSxLQUFBLGNBT0EsZUFBQSxTQUNBLFNBQUEsSUFDQSxVQUFBLEdBR0EsT0FBQSxRQUFBLFFBQUEsY0FFQSxTQUFBLElBQUEsbURBTUEsYUFFQSxtQkFBQSxhQUVBLFFBQUEsVUFBQSxNQUFBLFdBQ0EsWUFBQSxTQUFBLGVBR0EsT0FBQSxXQUVBLE9BQUEsUUFBQSxTQUFBLE9BQUEsUUFBQSxRQUFBLFVBQUEsS0FBQSxRQUFBLFFBQUEsMk1DeGp3QkEsU0FBQSxPQUFBLFFBQUEsV0FBQSxZQXFVQSxTQUFBLE9BQUEsYUFBQSxPQWdCQSxVQUFBLG9CQUFBLFdBQ0EsR0FBQSxxQkFBQSxxQkFDQSxPQUFBLFVBQUEsTUFBQSxRQUFBLE9BQ0EsR0FBQSxLQUFBLE1BQUEsaUJBQ0EsU0FBQSxTQUFBLE1BQUEsSUFBQSxJQUFBLE9BQ0EsUUFBQSxLQUFBLHFCQUFBLEdBRUEsTUFBQSxPQUFBLElBQUEsU0FBQSxPQUNBLFFBQUEsS0FBQSxzQkFBQSxZQVVBLFFBQUEsbUJBQUEsUUFBQSxZQUFBLFNBQUEsTUFBQSxXQUNBLEdBQUEsS0FBQSxVQUFBLEdBQUEsSUFDQSxPQUFBLFVBQUEsSUFFQSxNQUFBLE9BQUEsV0FNQSxJQUFBLFlBQUEsQ0FDQSxZQUtBLFFBQUEsV0FBQSxtQkFBQSxTQUFBLFNBQUEsa0JBWUEsUUFBQSxvQkFBQSxTQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxRQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsS0FBQSxRQUFBLEVBQ0EsSUFBQSxJQUFBLFVBQUEsYUFDQSxNQUFBLE1BS0EsUUFBQSxnQkFBQSxTQUNBLE1BQUEsVUFBQSxRQUFBLFFBQUEsU0FHQSxRQUFBLDBCQUFBLFNBQ0EsTUFBQSxTQUFBLFFBQUEsbUJBQUEsVUFHQSxRQUFBLG1CQUFBLEtBQUEsTUFDQSxNQUFBLG9CQUFBLE9BQUEsbUJBQUEsTUE3QkEsR0FBQSxNQUFBLFFBQUEsS0FDQSxRQUFBLFFBQUEsUUFDQSxVQUFBLGlCQUFBLFlBQ0EsUUFBQSxRQUFBLFFBRUEsYUFBQSxFQUNBLGlCQUFBLG1CQUNBLG9CQUFBLHNCQUNBLHNCQUFBLGFBQ0Esa0JBQUEsU0FBQSxFQXVCQSxVQUFBLFVBQUEsWUFDQSxZQUFBLE1BQUEsWUFBQSxXQUFBLGVBQUEsa0JBQUEsYUFBQSxZQUFBLG1CQUNBLFNBQUEsVUFBQSxJQUFBLFVBQUEsU0FBQSxhQUFBLGdCQUFBLFdBQUEsVUFBQSxrQkFxQ0EsUUFBQSw2QkFBQSxRQUFBLFFBQ0EsR0FBQSxNQUFBLFFBQUEsS0FBQSxxQkFNQSxPQUxBLFVBQ0EsS0FBQSxTQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQ0EsUUFBQSxLQUFBLGlCQUFBLE9BRUEsS0FBQSxVQUFBLEtBQUEsU0FBQSxLQUFBLFdBR0EsUUFBQSx3QkFBQSxJQUNBLEdBQUEsVUFBQSxNQUFBLElBQUEsT0FTQSxPQVJBLE9BQUEsUUFBQSxXQUFBLFdBQ0EsVUFBQSxZQUVBLFdBQUEsYUFBQSxXQUNBLFNBQUEsR0FBQSxXQUNBLE1BQUEsY0FHQSxNQUFBLFFBR0EsUUFBQSx1QkFBQSxRQUFBLE1BQUEsbUJBQ0Esa0JBQUEscUJBQ0EsSUFBQSxPQUVBLFNBQUEsTUFBQSxJQUFBLFNBQUEsV0FDQSxXQUFBLFVBQUEsU0FDQSxJQUFBLFdBQUEsSUFBQSxZQUFBLEVBQ0EsSUFBQTtHQUlBLFFBQUEsTUFBQSxPQUFBLFNBQUEsV0FDQSxXQUFBLFVBQUEsU0FDQSxJQUFBLFdBQUEsSUFBQSxZQUFBLEVBQ0EsSUFBQSxlQUlBLElBQUEsVUFDQSxTQUFBLGtCQUFBLFNBQUEsS0FBQSxVQUNBLFFBQUEsU0FBQSxNQUFBLEtBQUEsU0FBQSxHQUNBLE9BQUEsR0FBQSxRQUlBLElBQUEsVUFBQSxXQTBCQSxPQXpCQSxTQUFBLElBQUEsU0FBQSxPQUFBLFdBQ0EsR0FBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLEdBQUEsV0FDQSxrQkFBQSxPQUFBLGNBVUEsR0FBQSxRQUVBLFVBQUEsWUFBQSxrQkFBQSxRQUNBLFNBQUEsS0FBQSxXQUVBLE9BQUEsSUFFQSxVQUFBLGVBQUEsa0JBQUEsT0FDQSxNQUFBLEtBQUEsY0FLQSxNQUFBLE9BQUEsU0FBQSxPQUFBLElBQUEsTUFBQSxLQUFBLEtBQUEsU0FBQSxLQUFBLE1BR0EsUUFBQSxRQUFBLE1BQ0EsR0FBQSxLQUFBLENBQ0EsR0FBQSxZQUNBLFdBQ0EsUUFBQSxLQUFBLE9BQUEsR0FBQSxNQUFBLE1BVUEsU0FBQSxhQUFBLFNBQUEsYUFDQSxRQUFBLEtBQUEsVUFBQSxJQUFBLFVBQUEsS0FHQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsUUFBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLE9BQUEsUUFBQSxHQUNBLG9CQUFBLFVBQUEsTUFDQSx1QkFBQSxRQUFBLFNBQ0EsUUFBQSxLQUFBLFVBQUEsSUFBQSxzQkFDQSxRQUFBLFFBQUEsR0FHQSxNQUFBLFVBSUEsUUFBQSxpQkFBQSxRQUFBLGVBQUEsV0FtREEsUUFBQSxtQkFBQSxpQkFBQSxPQUNBLEdBQUEsU0FBQSxpQkFBQSxPQUNBLFNBQUEsaUJBQUEsU0FBQSxNQUFBLE9BQUEsR0FBQSxjQUFBLE1BQUEsT0FBQSxHQUNBLE9BQUEsVUFBQSxVQUNBLFNBQUEsUUFDQSxTQUFBLFFBRUEsUUFBQSxNQUVBLE1BQUEsTUFDQSxNQUFBLE1BQUEsR0FBQSxVQUVBLE9BQUEsTUFDQSxNQUFBLE1BQUEsR0FBQSxZQUVBLEdBWkEsT0FnQkEsUUFBQSxLQUFBLElBQUEsY0FBQSxlQU9BLFFBQUEsd0JBQUEsT0FDQSxHQUFBLGNBQUEsQ0FFQSxJQURBLGNBQUEsUUFBQSxVQUNBLE1BQUEsV0FBQSxPQUFBLE1BQ0EsZUFBQSxLQUVBLGdCQVpBLEdBQUEsY0FDQSxTQUFBLElBQUEsU0FBQSxXQUNBLFVBQUEsSUFBQSxXQUFBLEtBQUEsWUFHQSxJQUFBLE9BQUEsQ0FhQSxTQUFBLFdBQUEsU0FBQSxVQUFBLE9BQ0EsR0FBQSxVQUFBLFdBQ0EsdUJBQUEsT0FFQSxRQUFBLFVBQUEsT0FDQSxJQUFBLFdBQ0EsY0FBQSxLQUFBLFVBQUEsR0FBQSxRQUFBLGFBQUEsZ0JBQUEsVUFDQSxNQUNBLEtBQUEsV0FDQSxjQUFBLEtBQUEsVUFBQSxHQUFBLFFBQUEsY0FBQSxVQUFBLFVBQ0EsTUFDQSxLQUFBLGNBQ0EsY0FBQSxLQUFBLFVBQUEsR0FBQSxRQUFBLGlCQUFBLFVBQUEsVUFDQSxNQUNBLFNBQ0EsY0FBQSxLQUFBLFVBQUEsR0FBQSxRQUFBLGNBS0EsZUFBQSxJQUFBLGNBQUEsUUFDQSxnQkEzR0EsR0FBQSxNQUFBLFFBQUEsRUFDQSxJQUFBLEtBQUEsQ0FJQSxHQUFBLGNBQ0EsZUFDQSxTQUFBLGFBQ0EsYUFBQSxVQUFBLEdBQ0EsZ0JBQUEsVUFBQSxHQUNBLGFBR0EsZ0JBSUEsVUFBQSxhQUFBLElBQUEsaUJBSEEsVUFBQSxhQUNBLGVBQUEsYUFKQSxVQUFBLGdCQUNBLGVBQUEsZUFTQSxJQUFBLHFCQUFBLFlBQUEsZUFDQSxhQUFBLHFCQUNBLFlBQUEsZ0JBQ0EsZUFBQSxlQUVBLGlCQUFBLFFBQUEsS0FBQSxTQUNBLFFBQUEsaUJBQUEsSUFBQSxTQUNBLElBQUEsc0JBQUEsU0FBQSxDQUlBLEdBQUEsZ0JBQUEsS0FDQSxnQkFDQSxVQUNBLGNBQUEsS0FDQSxlQUNBLFNBRUEsaUJBQUEsSUFBQSxTQUFBLFFBQUEsT0FBQSxJQXdFQSxPQXZFQSxTQUFBLE9BQUEsaUJBQUEsU0FBQSxrQkFDQSxHQUFBLFNBQUEsa0JBQUEsaUJBQUEsaUJBQ0EsU0FBQSxzQkFDQSxrQkFBQSxpQkFBQSxZQUNBLGtCQUFBLGlCQUFBLG1CQW9FQSxLQUFBLEtBQ0EsTUFBQSxlQUNBLFVBQUEsVUFDQSxhQUFBLGFBQ0Esb0JBQUEsb0JBQ0EsT0FBQSxTQUFBLGVBQ0EsZUFBQSxjQUNBLElBQUEsT0FBQSxhQUFBLFdBQ0EsZUFBQSxLQUNBLG1CQUdBLE1BQUEsU0FBQSxlQUNBLGNBQUEsY0FDQSxJQUFBLE1BQUEsWUFBQSxXQUNBLGNBQUEsS0FDQSxtQkFHQSxPQUFBLFdBQ0EsZUFDQSxRQUFBLGFBQUEsU0FBQSxXQUNBLFVBQUEsT0FBQSxLQUVBLGdCQUFBLElBRUEsY0FDQSxRQUFBLFlBQUEsU0FBQSxXQUNBLFVBQUEsT0FBQSxLQUVBLGVBQUEsUUFzWUEsUUFBQSxrQkFBQSxlQUFBLFVBQUEsUUFBQSxjQUFBLGFBQUEsYUFBQSxjQTRJQSxRQUFBLGlCQUFBLGdCQUNBLEdBQUEsV0FBQSxZQUFBLGNBQ0EsZ0JBQUEsY0FBQSxZQUFBLGNBQUEsV0FBQSxPQUFBLEdBQ0EsZ0JBQUEsV0FDQSxRQUFBLGVBQUEsV0FDQSxNQUFBLGVBQ0EsVUFBQSxjQU1BLFFBQUEsMkJBQ0EsZ0JBQUEsVUFHQSxRQUFBLDBCQUNBLGdCQUFBLFNBR0EsUUFBQSx5QkFDQSxnQkFBQSxTQUNBLGVBS0EsUUFBQSxvQkFDQSxpQkFBQSxhQUNBLGlCQUFBLFlBQUEsRUFDQSxnQkFJQSxRQUFBLGtCQUNBLElBQUEsZUFBQSxXQUFBLENBQ0EsZUFBQSxZQUFBLENBQ0EsSUFBQSxNQUFBLFFBQUEsS0FBQSxpQkFDQSxRQUtBLFFBQUEsT0FBQSxhQUNBLFFBQUEsUUFBQSxZQUVBLGdCQUFBLFdBQ0EsR0FBQSxNQUFBLFFBQUEsS0FBQSxxQkFDQSxzQkFBQSxLQUFBLE9BQ0EsUUFBQSxRQUFBLFVBQUEsa0JBR0EsUUFBQSxLQUFBLGlCQUFBLFFBR0EseUJBak1BLEdBQUEsWUFBQSxLQUNBLE9BQUEsZ0JBQUEsUUFBQSxlQUFBLFVBQ0EsS0FBQSxPQUtBLE1BSkEsb0JBQ0EsMEJBQ0EseUJBQ0EsaUJBQ0EsVUFHQSxnQkFBQSxPQUFBLE1BQ0EsVUFBQSxPQUFBLFNBQ0EsSUFBQSxlQUFBLFFBQUEsUUFBQSxNQUFBLE9BQUEsS0FXQSxJQVZBLGNBQUEsZUFBQSxjQUFBLE9BRUEsZ0JBQ0EsY0FBQSxhQUFBLGFBQUEsU0FBQSxRQUFBLFVBT0EsbUJBQUEsUUFBQSxlQUtBLE1BSkEsb0JBQ0EsMEJBQ0EseUJBQ0EsaUJBQ0EsVUFHQSxJQUFBLGdCQUFBLFFBQUEsS0FBQSxzQkFDQSxrQkFBQSxlQUFBLFdBQ0Esc0JBQUEsZUFBQSxhQUFBLEVBQ0EsY0FBQSxlQUFBLEtBQ0EsZUFBQSxDQUVBLElBQUEsc0JBQUEsRUFBQSxDQUNBLEdBQUEsc0JBQ0EsSUFBQSxPQUFBLGNBV0EsR0FBQSxZQUFBLGNBQUEsTUFDQSxtQkFBQSxLQUFBLGVBQ0EsUUFBQSxRQUFBLGVBRUEsSUFBQSxrQkFBQSxXQUFBLENBQ0EsR0FBQSxTQUFBLGtCQUFBLFVBQ0EsU0FBQSxPQUFBLGVBQ0EsZUFBQSxHQUVBLG1CQUFBLEtBQUEsU0FDQSxRQUFBLFFBQUEsaUJBcEJBLElBQUEsU0FBQSxnQkFBQSxrQkFBQSxZQUNBLGVBQUEsTUFDQSxDQUVBLElBQUEsR0FBQSxTQUFBLG1CQUNBLG1CQUFBLEtBQUEsa0JBQUEsT0FFQSxtQkFDQSxRQUFBLFNBQUEsR0FnQkEsbUJBQUEsT0FBQSxHQUNBLFFBQUEsbUJBQUEsU0FBQSxXQUNBLFVBQUEsV0FTQSxJQUpBLE9BQUEsY0FBQSxPQUFBLHFCQUFBLGdCQUNBLGNBQUEsWUFBQSxnQkFBQSxRQUFBLFNBQUEsWUFHQSxjQUtBLE1BSkEsb0JBQ0EsMEJBQ0EseUJBQ0Esd0JBQ0EsVUFHQSxtQkFBQSxlQUFBLFdBQ0Esc0JBQUEsZUFBQSxhQUFBLEVBRUEsU0FBQSxnQkFJQSxRQUFBLElBQUEsV0FBQSxXQUNBLEdBQUEsU0FBQSxRQUFBLFFBQUEsTUFDQSxNQUFBLFFBQUEsS0FBQSxpQkFDQSxJQUFBLE1BQUEsQ0FDQSxHQUFBLHNCQUFBLE1BQUEsT0FBQSxXQUNBLHdCQUNBLHFCQUFBLFNBQ0EsUUFBQSxRQUFBLGdCQVFBLFFBQUEsU0FBQSxzQkFFQSxJQUFBLHFCQUFBLHdCQTZCQSxPQTVCQSx5QkFDQSxrQkFBQSxXQUFBLE9BRUEsUUFBQSxLQUFBLGtCQUNBLEtBQUEsT0FDQSxPQUFBLGtCQUNBLE1BQUEsb0JBQ0EsWUFBQSx3QkFLQSwwQkFDQSxPQUFBLE9BQUEsU0FBQSxXQUNBLEdBQUEsTUFBQSxRQUFBLEtBQUEsaUJBQ0EsV0FBQSxZQUNBLE9BQUEsS0FBQSxPQUFBLFlBQ0EsT0FBQSxjQUFBLEtBQUEsT0FBQSxXQUFBLE9BQUEsZUFFQSxtQkFDQSxhQUFBLEVBQ0Esa0JBRUEseUJBQ0EsT0FBQSxNQUFBLG1CQUlBLE9BQUEsT0E4REEsUUFBQSx1QkFBQSxTQUNBLEdBQUEsTUFBQSxtQkFBQSxRQUNBLElBQUEsS0FBQSxDQUNBLEdBQUEsT0FBQSxRQUFBLFdBQUEsS0FBQSx3QkFDQSxLQUFBLHVCQUFBLHVCQUNBLEtBQUEsaUJBQUEsSUFBQSxzQkFDQSxTQUFBLE1BQUEsU0FBQSxTQUNBLFFBQUEsUUFBQSxRQUFBLFFBQ0EsSUFBQSxNQUFBLFFBQUEsS0FBQSxpQkFDQSxPQUFBLEtBQUEsUUFDQSxRQUFBLEtBQUEsT0FBQSxTQUFBLFFBQ0EsT0FBQSxjQU9BLFFBQUEsU0FBQSxRQUFBLFdBQ0EsR0FBQSxrQkFBQSxRQUFBLGNBQ0EsaUJBQUEsV0FDQSxpQkFBQSxTQUFBLEVBQ0EsaUJBQUEsWUFBQSxPQUVBLElBQUEsVUFBQSxDQUNBLEdBQUEsTUFBQSxRQUFBLEtBQUEsc0JBRUEsaUJBQUEsYUFBQSxHQUNBLGtCQUFBLEtBQUEsUUFBQSxLQUFBLE9BQUEsYUFDQSxLQUFBLG9CQUNBLE1BQUEsT0FBQSxhQUdBLG1CQUFBLEtBQUEsZUFDQSxRQUFBLFlBQUEsdUJBQ0EsUUFBQSxXQUFBLG9CQUtBLFFBQUEsb0JBQUEsUUFBQSxlQUNBLEdBQUEsaUJBQUEsU0FDQSxPQUFBLENBR0EsSUFBQSxrQkFBQSxRQUFBLGNBQ0EsTUFBQSxrQkFBQSxPQUdBLElBQUEsc0JBQUEsdUJBQUEsU0FDQSxHQUFBLENBSUEsR0FBQSxJQUFBLGNBQUEsT0FBQSxLQUVBLElBQUEsUUFBQSxrQkFBQSxjQUFBLGNBQ0EsTUFBQSxPQUFBLGlCQUFBLGNBQUEsS0FBQSxxQkFDQSxJQUFBLE1BQUEsU0FDQSxPQUFBLENBV0EsSUFOQSxTQUNBLFdBQUEsR0FLQSx3QkFBQSxFQUFBLENBQ0EsR0FBQSxxQkFBQSxjQUFBLEtBQUEsb0JBQ0EsU0FBQSxVQUFBLHVCQUNBLHFCQUFBLHFCQUlBLHVCQUFBLHdCQUNBLE1BQUEsU0FDQSxNQUFBLE9BQUEsTUFBQSxLQUFBLG1CQUVBLGNBQUEsY0FBQSxTQUVBLFFBQUEsWUFBQSxzQkFBQSx1QkFoOEJBLGFBQUEsS0FBQSxpQkFBQSxpQkFNQSxJQUFBLGlCQUFBLFdBQUEsT0FDQSxXQUFBLE1BQUEsa0JBQUEsc0JBQ0EsU0FBQSxLQUNBLElBQUEsTUFDQSxrQkFTQSxXQUFBLGFBQUEsV0FDQSxXQUFBLGFBQUEsV0FDQSxpQkFBQSxTQUFBLFNBTUEsdUJBQUEsRUFDQSxnQkFBQSxpQkFBQSxrQkFDQSxzQkFBQSxnQkFFQSxTQUFBLFdBQ0EsTUFBQSxpQkFBQSxLQUFBLFlBRkEsV0FBQSxPQUFBLEVBa1VBLFFBaUNBLE1BQUEsU0FBQSxRQUFBLGNBQUEsY0FPQSxNQU5BLFNBQUEsUUFBQSxRQUFBLFNBQ0EsY0FBQSxlQUFBLGVBQ0EsYUFBQSxlQUFBLGNBRUEsNEJBQUEsU0FBQSxHQUNBLFVBQUEsTUFBQSxRQUFBLGNBQUEsY0FDQSx1QkFBQSxTQUFBLE1BQ0EsTUFBQSxrQkFBQSxRQUFBLFdBQUEseUJBQUEsU0FBQSxjQUFBLGFBQUEsS0FBQSxTQWtDQSxNQUFBLFNBQUEsU0FNQSxNQUxBLFNBQUEsUUFBQSxRQUFBLFNBRUEsc0JBQUEsU0FDQSw0QkFBQSxTQUFBLEdBQ0EsS0FBQSxTQUFBLEVBQUEsU0FDQSx1QkFBQSxTQUFBLE1BQ0EsTUFBQSxrQkFBQSxRQUFBLFdBQUEseUJBQUEsU0FBQSxLQUFBLEtBQUEsV0FDQSxVQUFBLE1BQUEsVUFDQSxTQXFDQSxLQUFBLFNBQUEsUUFBQSxjQUFBLGNBUUEsTUFQQSxTQUFBLFFBQUEsUUFBQSxTQUNBLGNBQUEsZUFBQSxlQUNBLGFBQUEsZUFBQSxjQUVBLHNCQUFBLFNBQ0EsNEJBQUEsU0FBQSxHQUNBLFVBQUEsS0FBQSxRQUFBLGNBQUEsY0FDQSx1QkFBQSxTQUFBLE1BQ0EsTUFBQSxrQkFBQSxPQUFBLFVBQUEseUJBQUEsU0FBQSxjQUFBLGFBQUEsS0FBQSxTQWlDQSxTQUFBLFNBQUEsUUFBQSxXQUNBLE1BQUEsTUFBQSxTQUFBLFFBQUEsZUFnQ0EsWUFBQSxTQUFBLFFBQUEsV0FDQSxNQUFBLE1BQUEsU0FBQSxXQUFBLFlBOEJBLFNBQUEsU0FBQSxRQUFBLElBQUEsUUFDQSxHQUFBLGFBQUEsa0JBSUEsSUFIQSxRQUFBLFFBQUEsUUFBQSxTQUNBLFFBQUEseUJBQUEsU0FFQSw0QkFBQSxTQUNBLE1BQUEsV0FBQSxTQUFBLFFBQUEsSUFBQSxPQUdBLEtBQUEsUUFBQSxLQUFBLElBQUEsSUFBQSxNQUFBLEtBQ0EsT0FBQSxRQUFBLFFBQUEsT0FBQSxPQUFBLE1BQUEsSUFFQSxJQUFBLE9BQUEsUUFBQSxLQUFBLFlBQ0EsT0FBQSxRQUNBLE1BQUEsSUFBQSxNQUFBLElBQUEsT0FBQSxLQUNBLE1BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxRQUdBLE1BQUEsVUFFQSxRQUFBLEtBQUEsWUFBQSxPQUNBLElBQUEsSUFDQSxPQUFBLFNBSUEsTUFBQSxRQUFBLHVCQUFBLFNBQUEsTUFDQSxHQUFBLE9BQUEsUUFBQSxLQUFBLFlBQ0EsU0FBQSxXQUFBLFlBRUEsSUFBQSxPQUFBLFFBQUEsS0FBQSxzQkFDQSxRQUFBLHNCQUFBLFFBQUEsTUFBQSxNQUFBLE9BQ0EsT0FBQSxTQUVBLGlCQUFBLFdBQUEsUUFBQSxRQUFBLEtBQUEsS0FBQSxXQUNBLFVBQUEsU0FBQSxRQUFBLFFBQUEsR0FBQSxRQUFBLEtBQ0EsTUFIQSxXQWlCQSxPQUFBLFNBQUEsU0FDQSxRQUFBLGNBZ0JBLFFBQUEsU0FBQSxNQUFBLFNBQ0EsT0FBQSxVQUFBLFFBQ0EsSUFBQSxHQUNBLEdBQUEsTUFDQSxRQUFBLGFBQ0EsQ0FDQSxHQUFBLE1BQUEsUUFBQSxLQUFBLHFCQUNBLE1BQUEsVUFBQSxFQUNBLFFBQUEsS0FBQSxpQkFBQSxNQUVBLEtBRUEsS0FBQSxHQUNBLGlCQUFBLFVBQUEsS0FDQSxNQUVBLFNBQ0EsT0FBQSxpQkFBQSxTQUdBLFFBQUEsV0EwU0EsaUJBQUEsU0FBQSxJQUFBLFVBQUEsV0FBQSxXQUFBLGtCQUNBLFNBQUEsUUFBQSxTQUFBLFNBQUEsaUJBNkNBLFFBQUEsYUFBQSxRQUFBLFVBQ0EsdUJBQ0Esd0JBRUEscUJBQUEsS0FBQSxVQUNBLHNCQUFBLGdCQUFBLFdBQ0EsUUFBQSxxQkFBQSxTQUFBLElBQ0EsT0FHQSx3QkFDQSxzQkFBQSxLQUNBLGlCQU9BLFFBQUEsdUJBQUEsUUFBQSxXQUNBLEdBQUEsTUFBQSxtQkFBQSxRQUNBLFNBQUEsUUFBQSxRQUFBLE1BSUEsc0JBQUEsS0FBQSxRQUlBLElBQUEsaUJBQUEsS0FBQSxNQUFBLFNBQ0EsbUJBQUEsa0JBSUEsU0FBQSxPQUFBLGNBRUEsaUJBQUEsZ0JBQ0EsYUFBQSxTQUFBLFdBQ0EsbUJBQUEsdUJBQ0EsMEJBQ0EsV0FBQSxJQUdBLFFBQUEsb0JBQUEsVUFDQSxRQUFBLFNBQUEsU0FBQSxTQUNBLEdBQUEsYUFBQSxRQUFBLEtBQUEsd0JBQ0EsY0FDQSxRQUFBLFlBQUEsa0JBQUEsU0FBQSxJQUNBLFNBTUEsUUFBQSw0QkFBQSxRQUFBLFVBQ0EsR0FBQSxNQUFBLFNBQUEsWUFBQSxVQUFBLElBQ0EsS0FBQSxLQUFBLENBQ0EsR0FBQSxvQkFBQSxFQUNBLGdCQUFBLEVBQ0Esa0JBQUEsRUFDQSxlQUFBLENBR0EsU0FBQSxRQUFBLFNBQUEsU0FDQSxHQUFBLFFBQUEsVUFBQSxhQUFBLENBQ0EsR0FBQSxlQUFBLFFBQUEsaUJBQUEsYUFFQSx3QkFBQSxjQUFBLGdCQUFBLGFBQ0Esb0JBQUEsS0FBQSxJQUFBLGFBQUEseUJBQUEsbUJBRUEsSUFBQSxzQkFBQSxjQUFBLGdCQUFBLFVBQ0EsaUJBQUEsS0FBQSxJQUFBLGFBQUEsc0JBQUEsZ0JBRUEsRUFBQSxjQUFBLGVBQUEsV0FDQSxlQUFBLEtBQUEsSUFBQSxhQUFBLGNBQUEsZUFBQSxZQUFBLGVBRUEsSUFBQSxXQUFBLGFBQUEsY0FBQSxlQUFBLGNBRUEsV0FBQSxJQUNBLFdBQUEsU0FBQSxjQUFBLGVBQUEsK0JBQUEsS0FBQSxHQUVBLGtCQUFBLEtBQUEsSUFBQSxVQUFBLHNCQUdBLE1BQ0EsTUFBQSxFQUNBLGdCQUFBLGdCQUNBLG1CQUFBLG1CQUNBLGVBQUEsZUFDQSxrQkFBQSxtQkFFQSxXQUNBLFlBQUEsVUFBQSxNQUdBLE1BQUEsTUFHQSxRQUFBLGNBQUEsS0FDQSxHQUFBLFVBQUEsRUFDQSxPQUFBLFFBQUEsU0FBQSxLQUNBLElBQUEsTUFBQSxhQUtBLE9BSEEsU0FBQSxPQUFBLFNBQUEsT0FDQSxTQUFBLEtBQUEsSUFBQSxXQUFBLFFBQUEsRUFBQSxZQUVBLFNBR0EsUUFBQSxhQUFBLFNBQ0EsR0FBQSxlQUFBLFFBQUEsU0FDQSxTQUFBLGNBQUEsS0FBQSxzQkFLQSxPQUpBLFlBQ0EsY0FBQSxLQUFBLHdCQUFBLGVBQ0EsU0FBQSxlQUVBLFNBQUEsSUFBQSxtQkFBQSxTQUFBLGFBQUEsU0FHQSxRQUFBLGNBQUEsZUFBQSxRQUFBLFdBQ0EsR0FBQSxhQUFBLFdBQUEsV0FBQSxXQUFBLFFBQUEsWUFBQSxFQUVBLFNBQUEsWUFBQSxTQUNBLGNBQUEsU0FBQSxJQUFBLFVBQ0EsVUFBQSxZQUFBLGlCQUFBLFlBQUEsZUFBQSxNQUFBLEVBRUEsVUFDQSxJQUFBLFVBQUEsRUFBQSxDQUNBLEdBQUEsa0JBQUEsVUFBQSxXQUNBLGdCQUFBLFNBQUEsSUFBQSxpQkFDQSxjQUFBLFlBQUEsZ0JBRUEsZUFBQSxRQUFBLFNBQUEsa0JBRUEsUUFBQSwyQkFBQSxRQUFBLGlCQUVBLGNBQUEsUUFBQSxZQUFBLGtCQUdBLFFBQUEsU0FBQSxVQUVBLElBQUEsWUFBQSxRQUFBLEtBQUEsNkJBQ0EsUUFBQSwyQkFBQSxRQUFBLGVBQ0EsbUJBQUEsUUFBQSxtQkFDQSxrQkFBQSxRQUFBLGlCQUVBLElBQUEsWUFBQSxJQUFBLG9CQUFBLElBQUEsa0JBRUEsTUFEQSxTQUFBLFlBQUEsWUFDQSxDQUdBLElBQUEsaUJBQUEsWUFBQSxtQkFBQSxFQUNBLGVBQUEsa0JBQUEsR0FDQSxRQUFBLGVBQUEsR0FDQSxJQUFBLFFBQUEsa0JBRUEsa0JBQUEsV0FBQSxxQkFDQSxTQUFBLEtBQUEseUJBQ0EsUUFBQSxRQUNBLFNBQUEsY0FDQSxRQUFBLFdBQUEsU0FBQSxFQUNBLFVBQUEsVUFDQSxnQkFBQSxnQkFDQSxrQkFBQSxtQkFHQSxJQUFBLE1BQUEsbUJBQUEsUUFVQSxPQVJBLGtCQUNBLGlCQUFBLE1BQUEsR0FHQSxnQkFDQSxnQkFBQSxNQUFBLElBR0EsRUFHQSxRQUFBLFlBQUEsZUFBQSxRQUFBLFVBQUEseUJBbUdBLFFBQUEsU0FDQSxRQUFBLElBQUEsb0JBQUEscUJBQ0EsUUFBQSxZQUFBLGlCQUNBLFFBQUEsWUFBQSxrQkFDQSxnQkFDQSxTQUFBLE9BQUEsZ0JBRUEsYUFBQSxRQUFBLFVBQ0EsSUFBQSxNQUFBLG1CQUFBLFFBQ0EsS0FBQSxHQUFBLEtBQUEsZUFDQSxLQUFBLE1BQUEsZUFBQSxjQUFBLElBSUEsUUFBQSxxQkFBQSxPQUNBLE1BQUEsaUJBQ0EsSUFBQSxJQUFBLE1BQUEsZUFBQSxNQUNBLFVBQUEsR0FBQSxrQkFBQSxHQUFBLFdBQUEsS0FBQSxNQUlBLFlBQUEsV0FBQSxHQUFBLFlBQUEsUUFBQSxpQ0FTQSxNQUFBLElBQUEsVUFBQSxVQUFBLElBQUEsY0FBQSxhQUFBLGFBQ0EsMEJBaklBLEdBQUEsTUFBQSxtQkFBQSxTQUNBLFlBQUEsUUFBQSxLQUFBLHdCQUNBLElBQUEsSUFBQSxLQUFBLGFBQUEsU0FBQSxRQUFBLGFBQUEsWUFFQSxXQURBLDBCQUlBLGFBQUEsaUJBQ0EsaUJBQUEsTUFBQSxFQUdBLElBQUEsaUJBQUEsR0FDQSxpQkFBQSxFQUNBLFNBQUEsVUFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBLEdBQ0EsR0FBQSxTQUFBLEVBQUEsRUFBQSxJQUFBLElBQUEsS0FDQSxrQkFBQSxPQUFBLFVBQ0Esa0JBQUEsT0FBQSxZQUdBLElBQUEsT0FBQSxHQUNBLGlCQUNBLFVBQUEsWUFBQSxVQUNBLFFBQUEsWUFBQSxRQUNBLFlBQUEsQ0FDQSxJQUFBLFVBQUEsRUFBQSxDQUNBLEdBQUEsd0JBQUEsQ0FDQSxTQUFBLGdCQUFBLEdBQUEsSUFBQSxRQUFBLHFCQUNBLHVCQUFBLFFBQUEsZ0JBQUEsVUFHQSxJQUFBLHVCQUFBLENBQ0EsU0FBQSxlQUFBLEdBQUEsSUFBQSxRQUFBLG9CQUNBLHNCQUFBLFFBQUEsZUFBQSxVQUNBLGNBQUEsS0FBQSxXQUFBLHlCQUdBLFlBQUEsS0FBQSxNQUFBLElBQUEsS0FBQSxJQUFBLHVCQUFBLHdCQUFBLElBR0EsYUFDQSxRQUFBLFNBQUEsZ0JBR0EsSUFBQSxlQUFBLFlBQUEsU0FBQSxJQUFBLGdCQUNBLFFBQUEsMkJBQUEsUUFBQSxlQUNBLFlBQUEsS0FBQSxJQUFBLFFBQUEsbUJBQUEsUUFBQSxrQkFDQSxJQUFBLElBQUEsWUFJQSxNQUhBLFNBQUEsWUFBQSxpQkFDQSxhQUFBLFFBQUEsZUFDQSwwQkFJQSxJQUFBLFVBQUEsS0FBQSxJQUFBLFFBQUEsZ0JBQUEsUUFBQSxnQkFDQSxhQUFBLFNBQUEsVUFFQSxJQUFBLGNBQUEsT0FBQSxFQUFBLENBSUEsR0FBQSxVQUFBLEtBQUEsYUFBQSxVQUFBLEVBQ0EsT0FBQSxTQUFBLE9BQUEsU0FBQSxPQUFBLEtBQ0EsVUFBQSxLQUVBLEtBQUEsYUFBQSxRQUFBLFNBQUEsSUFBQSxPQUdBLEdBS0EsZ0JBTEEsVUFBQSxLQUFBLE1BQ0Esb0JBQUEsbUJBQUEsSUFBQSxvQkFDQSxlQUFBLFNBQUEsYUFBQSxvQkFDQSxXQUFBLFlBQUEsZUFBQSxVQXVCQSxPQXBCQSxhQUFBLElBQ0EsUUFBQSxTQUFBLGtCQUNBLGVBQUEsU0FBQSxXQUNBLGVBQUEsS0FDQSxRQUFBLFNBQUEsaUJBQ0EsUUFBQSxZQUFBLGtCQUNBLFFBQUEsa0JBQUEsR0FDQSxnQkFBQSxNQUFBLElBRUEsWUFBQSxZQUFBLElBR0EsUUFBQSxHQUFBLG9CQUFBLHFCQUNBLFlBQUEsa0JBQUEsS0FBQSxXQUNBLFFBQ0EsNEJBR0EsWUFBQSxVQUNBLHNCQUFBLFFBQUEsV0FDQSxNQXlDQSxRQUFBLGtCQUFBLEtBQUEsTUFDQSxLQUFBLE1BQUEsZ0JBQUEsY0FBQSxLQUFBLE9BQUEsR0FHQSxRQUFBLGlCQUFBLEtBQUEsTUFDQSxLQUFBLE1BQUEsZUFBQSx5QkFBQSxLQUFBLFNBQUEsR0FHQSxRQUFBLGVBQUEsZUFBQSxRQUFBLFVBQUEsc0JBQ0EsTUFBQSxjQUFBLGVBQUEsUUFBQSxVQUFBLHNCQUNBLFNBQUEsV0FDQSxXQUFBLGFBQUEsUUFBQSxZQUZBLE9BT0EsUUFBQSxjQUFBLGVBQUEsUUFBQSxVQUFBLHdCQUNBLE1BQUEsU0FBQSxLQUFBLHlCQUNBLFdBQUEsZUFBQSxRQUFBLFVBQUEseUJBRUEsYUFBQSxRQUFBLGVBQ0EsMkJBSUEsUUFBQSxTQUFBLGVBQUEsUUFBQSxVQUFBLG1CQUlBLEdBQUEsdUJBQUEsY0FBQSxlQUFBLFFBQUEsVUFDQSxLQUFBLHNCQUVBLFdBREEsb0JBU0EsSUFBQSxRQUFBLHFCQVFBLE9BUEEsYUFBQSxRQUFBLFdBSUEsT0FBQSxhQUFBLGVBQUEsUUFBQSxVQUFBLHFCQUdBLFNBQUEsWUFDQSxRQUFBLE1BQUEsWUFJQSxRQUFBLGNBQUEsUUFBQSxXQUNBLFFBQUEsWUFBQSxVQUNBLElBQUEsTUFBQSxRQUFBLEtBQUEsd0JBQ0EsUUFDQSxLQUFBLFNBQ0EsS0FBQSxVQUVBLEtBQUEsU0FBQSxJQUFBLEtBQUEsU0FDQSxRQUFBLFdBQUEsMEJBK0RBLFFBQUEsZUFBQSxRQUFBLFFBQ0EsR0FBQSxXQUFBLEVBT0EsT0FOQSxTQUFBLFFBQUEsU0FBQSxRQUFBLFFBQUEsTUFBQSxPQUNBLFFBQUEsUUFBQSxTQUFBLE1BQUEsR0FDQSxPQUFBLE1BQUEsT0FBQSxJQUNBLFlBQUEsRUFBQSxFQUFBLElBQUEsSUFBQSxNQUFBLFVBR0EsVUF6ZUEsR0FBQSxpQkFBQSxvQkFBQSxlQUFBLG1CQUFBLFdBQUEsRUFVQSxRQUFBLGtCQUFBLFdBQUEsT0FBQSx3QkFBQSxXQUNBLFdBQUEsV0FDQSxnQkFBQSxtQkFDQSxvQkFBQSxzQ0FFQSxnQkFBQSxhQUNBLG9CQUFBLGlCQUdBLE9BQUEsaUJBQUEsV0FBQSxPQUFBLHVCQUFBLFdBQ0EsV0FBQSxXQUNBLGVBQUEsa0JBQ0EsbUJBQUEsb0NBRUEsZUFBQSxZQUNBLG1CQUFBLGVBR0EsSUFjQSx1QkFkQSxhQUFBLFdBQ0EsYUFBQSxXQUNBLFVBQUEsUUFDQSw4QkFBQSxpQkFDQSx3QkFBQSxZQUNBLHNCQUFBLGlCQUNBLHdCQUFBLHNCQUNBLGdDQUFBLEVBQ0Esb0JBQUEsSUFDQSxXQUFBLElBRUEsZUFDQSxjQUFBLEVBQ0Esd0JBa0JBLGFBQUEsS0FDQSxpQkFBQSxFQUNBLHdCQTBXQSxRQUNBLE1BQUEsU0FBQSxRQUFBLG9CQUNBLE1BQUEsU0FBQSxRQUFBLFFBQUEsV0FBQSxxQkFHQSxNQUFBLFNBQUEsUUFBQSxvQkFDQSxNQUFBLFNBQUEsUUFBQSxRQUFBLFdBQUEscUJBR0EsS0FBQSxTQUFBLFFBQUEsb0JBQ0EsTUFBQSxTQUFBLE9BQUEsUUFBQSxVQUFBLHFCQUdBLGVBQUEsU0FBQSxRQUFBLElBQUEsT0FBQSxvQkFDQSxHQUFBLFdBQUEsY0FBQSxPQUFBLFdBQUEsSUFDQSxjQUFBLElBQUEsUUFDQSxtQkFBQSxjQUFBLFdBQUEsUUFBQSxVQUNBLE9BQUEscUJBQ0EsWUFBQSxRQUFBLG9CQUNBLHdCQUVBLHVCQUdBLGVBQUEsU0FBQSxRQUFBLFVBQUEsb0JBQ0EsR0FBQSxvQkFBQSxjQUFBLFdBQUEsUUFBQSxjQUFBLFVBQUEsUUFDQSxPQUFBLHFCQUNBLFlBQUEsUUFBQSxvQkFDQSx3QkFFQSx1QkFHQSxrQkFBQSxTQUFBLFFBQUEsVUFBQSxvQkFDQSxHQUFBLG9CQUFBLGNBQUEsY0FBQSxRQUFBLGNBQUEsVUFBQSxXQUNBLE9BQUEscUJBQ0EsWUFBQSxRQUFBLG9CQUNBLHdCQUVBLHVCQUdBLFNBQUEsU0FBQSxRQUFBLElBQUEsT0FBQSxvQkFDQSxPQUFBLGNBQUEsT0FBQSxXQUNBLElBQUEsY0FBQSxJQUFBLE9BQ0EsSUFBQSxXQUFBLE9BQUEsSUFBQSxHQUNBLE9BQUEsY0FBQSxXQUFBLFFBQUEsVUFBQSxxQkFHQSxTQUFBLFNBQUEsUUFBQSxVQUFBLG9CQUNBLE1BQUEsY0FBQSxXQUFBLFFBQUEsY0FBQSxVQUFBLFFBQUEscUJBR0EsWUFBQSxTQUFBLFFBQUEsVUFBQSxvQkFDQSxNQUFBLGNBQUEsY0FBQSxRQUFBLGNBQUEsVUFBQSxXQUFBLDZCQWtCQSxPQUFBLE9BQUEsU0NoMURBLFNBQUEsT0FBQSxVQUNBLFlBRUEsU0FBQSxPQUFBLGtCQUNBLHVCQUNBLHVCQUNBLHVCQUNBLHdCQUNBLHdCQUNBLDRCQUNBLDRCQUNBLHdCQUNBLHlCQUNBLHlCQUNBLDBCQUNBLDJCQUNBLDJCQUNBLHVCQUNBLHFCQUNBLDRCQUlBLFFBQUEsT0FBQSx3QkFBQSxvQ0FBQSxvQ0FFQSxTQUFBLFNBQUEsV0FFQSxHQUFBLFVBQUEsS0FBQSxVQUNBLFVBQUEsT0FHQSxNQUFBLE1BQUEsVUFBQSxXQUFBLGFBQUEsU0FBQSxRQUFBLFNBQUEsWUFLQSxRQUFBLGNBQUEsUUFBQSxRQWlKQSxRQUFBLHVCQUFBLE1BQUEsU0FBQSxlQUVBLEdBQUEsV0FBQSxlQUNBLGFBQUEsaUJBRUEsT0FBQSxZQUFBLFVBQ0EsTUFDQSxPQUFBLE9BQUEsVUFBQSxPQUFBLFNBQUEsSUFDQSxTQUNBLE9BQUEsY0FBQSxTQUFBLElBQUEsY0FBQSxpQkFBQSxhQUFBLGFBQ0EsU0FFQSxTQUtBLFFBQUEsZ0JBQ0EsTUFBQSxVQUFBLEtBQUEsUUFBQSxRQUFBLFlBQUEsU0FBQSxHQUFBLFVBR0EsUUFBQSxtQkFDQSxNQUFBLFVBQUEsS0FBQSxRQUFBLFFBQUEsU0FBQSxLQUFBLGFBQUEsU0FBQSxHQUFBLGFBcktBLEdBQUEsV0FHQSxRQUFBLFFBQUEsVUFBQSxTQUFBLFFBQ0EsU0FBQSxRQUFBLE9BR0EsTUFBQSwrQkFDQSxnQkFBQSxFQUNBLGlCQUFBLEVBQ0EsVUFBQSxFQUNBLGFBQUEsRUFDQSxRQUFBLEtBQ0EsTUFBQSxLQUVBLE9BQUEsUUFBQSxRQUVBLElBQUEsUUFBQSxhQUNBLEdBQUEsUUFBQSxhQUFBLE1BQUEsU0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxRQUFBLGFBQUEsRUFBQSxJQUNBLE9BQUEsT0FBQSxhQUlBLFFBQUEsUUFBQSxRQUFBLFFBQUEsYUFpSkEsT0E3SUEsUUFBQSxLQUFBLFdBRUEsT0FBQSxnQkFDQSxpQkFBQSxXQUFBLE9BQUEsUUFBQSxJQUFBLElBQUEsZ0JBR0EsU0FBQSxHQUFBLFNBQUEsT0FBQSxlQUNBLFNBQUEsR0FBQSxRQUFBLE9BQUEsNEJBQ0EsU0FBQSxHQUFBLFNBQUEsT0FBQSxvQkFJQSxPQUFBLGdCQUNBLE9BQUEsOEJBSUEsT0FBQSxRQUFBLFdBR0EsU0FBQSxJQUFBLFNBQUEsT0FBQSxlQUNBLFNBQUEsSUFBQSxRQUFBLE9BQUEsNEJBQ0EsU0FBQSxJQUFBLFNBQUEsT0FBQSxxQkFJQSxPQUFBLDJCQUFBLFdBRUEsV0FBQSxPQUFBLGNBQUEsSUFJQSxPQUFBLGNBQUEsV0FHQSxHQUFBLFdBQUEsZUFDQSxTQUFBLFdBQUEsT0FBQSxRQUFBLElBQ0EsY0FBQSxXQUFBLE9BQUEsUUFBQSxJQUdBLE1BQUEsc0JBQUEsTUFBQSxTQUFBLGNBR0EsV0FBQSxRQUNBLFFBQUEsTUFHQSxRQUFBLFlBQUEsT0FBQSxTQUFBLFNBQUEsV0FBQSxNQUFBLElBQUEsTUFBQSxLQUVBLFFBQUEsT0FDQSxNQUFBLEtBQ0EsUUFBQSxJQUFBLFdBQUEsUUFBQSxhQUFBLEdBQUEsWUFDQSxRQUFBLElBQUEsTUFBQSxLQUNBLFdBQUEsT0FFQSxNQURBLFFBQUEsY0FDQSxFQUFBLFFBQUEsYUFLQSxTQUFBLElBQUEsVUFFQSxRQUFBLElBQUEsV0FBQSxRQUFBLGFBQUEsR0FBQSxZQUNBLFFBQUEsSUFBQSxNQUFBLFFBQUEsYUFBQSxHQUFBLE9BQUEsR0FBQSxhQUFBLGFBQUEsY0FBQSxpQkFBQSxRQUVBLE1BQUEsS0FDQSxRQUFBLElBQUEsV0FBQSxTQUNBLFFBQUEsSUFBQSxNQUFBLGdCQUFBLFNBS0EsT0FBQSxVQUFBLFdBQ0EsT0FBQSxnQkFDQSxPQUFBLGlCQUVBLE9BQUEsbUJBQUEsU0FBQSxPQUFBLFVBQUEsSUFFQSxPQUFBLGNBQUEsV0FHQSxRQUFBLElBQUEsV0FBQSxRQUFBLGFBQUEsR0FBQSxZQUVBLFFBQUEsWUFDQSxTQUFBLFFBQUEsWUFDQSxRQUFBLFVBQUEsTUFFQSxRQUFBLFVBQUEsTUFBQSxjQUNBLGdCQUFBLEdBQUEsUUFBQSxVQUVBLFVBREEsUUFBQSxhQUNBLFdBQUEsT0FBQSxPQUFBLElBQUEsSUFBQSxFQUFBLFFBQUEsVUFHQSxXQUFBLE9BQUEsUUFBQSxJQUFBLElBQUEsV0FBQSxJQUFBLFFBQUEsR0FBQSxhQUFBLEdBQUEsRUFBQSxRQUFBLFdBSUEsVUFBQSxFQUFBLFFBQUEsV0FJQSxRQUFBLGVBR0EsYUFGQSxRQUFBLGNBQUEsUUFBQSxhQUFBLE1BQUEsYUFFQSxtQkFBQSxXQUFBLE9BQUEsT0FBQSxJQUFBLElBQUEsV0FBQSxPQUFBLE9BQUEsS0FBQSxFQUFBLFFBQUEsYUFBQSxFQUdBLEVBQUEsUUFBQSxlQWlDQSxPQUFBLE9BQ0EsT0E5S0EsR0FBQSxRQUFBLFFBQUEsUUFBQSxRQUFBLFNBQUEsTUFDQSxTQUFBLFFBQUEsUUFBQSxRQWlMQSxPQUFBLGtCQU1BLFVBQUEsV0FBQSxTQUFBLFVBQUEsU0FBQSxPQUFBLFNBRUEsT0FDQSxTQUFBLE1BQ0EsUUFBQSxrQkFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLEtBQUEsYUFFQSxHQUFBLFVBQUEsTUFBQSxNQUFBLFVBQUEsT0FBQSxPQUFBLFlBQUEsWUFBQSxTQUFBLFFBQUEsUUFBQSxTQUNBLFNBQUEsU0FBQSxZQUFBLGVBQUEsZUFBQSxlQUFBLFNBQUEsS0FDQSxRQUFBLFVBQUEsS0FBQSxRQUFBLFFBQUEsS0FBQSxLQUFBLE9BR0EsSUFBQSxPQUFBLE9BQUEsUUFBQSxRQUNBLE9BQUEsSUFBQSxXQUFBLFdBQ0EsT0FBQSxNQUFBLFVBQ0EsUUFBQSxLQUNBLE1BQUEsWUFRQSxVQUFBLGdCQUFBLFdBQ0EsT0FDQSxZQUFBLFdBQUEsU0FBQSxVQUNBLEtBQUEsU0FBQSxjQU1BLFFBQUEsT0FBQSx3QkFBQSx5QkFFQSxTQUFBLFNBQUEsV0FFQSxHQUFBLFVBQUEsS0FBQSxVQUNBLFVBQUEsMEJBQ0EsWUFBQSxRQUNBLFVBQUEsUUFDQSxTQUFBLHVCQUNBLGlCQUFBLEVBQ0EsV0FBQSxFQUNBLFFBQUEsS0FDQSxVQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBR0EsTUFBQSxNQUFBLFNBQUEsU0FBQSxRQUVBLFFBQUEsY0FBQSxRQUVBLEdBQUEsV0FHQSxRQUFBLFFBQUEsVUFBQSxTQUFBLE9BSUEsT0FGQSxRQUFBLE9BQUEsU0FNQSxNQUFBLGtCQU1BLFVBQUEsV0FBQSxVQUFBLE9BQUEsU0FBQSxTQUFBLFFBQUEsS0FBQSxRQUVBLFFBQUEsdUJBQUEsUUFBQSxVQUVBLFFBQ0EsU0FBQSxNQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BRUEsR0FBQSxVQUFBLE1BQUEsTUFBQSxRQUFBLFFBQUEsTUFBQSxFQUNBLFNBQUEsU0FBQSxXQUFBLGtCQUFBLFlBQUEsV0FBQSxXQUFBLE9BQUEsWUFBQSxhQUFBLFNBQUEsS0FDQSxRQUFBLFVBQUEsS0FBQSxRQUFBLFFBQUEsS0FBQSxLQUFBLFFBSUEsUUFBQSxTQUFBLFFBQUEsV0FBQSxTQUFBLEtBQ0EsS0FBQSxNQUFBLEtBQUEsU0FBQSxJQUFBLFNBQUEsVUFDQSxNQUFBLEtBQUEsS0FBQSxZQUFBLGNBS0EsS0FBQSxTQUFBLE1BQUEsT0FBQSxLQUFBLFFBQUEsU0FBQSxVQUNBLFFBQUEsU0FBQSxVQUNBLFFBQUEsT0FBQSxNQUFBLFVBRUEsTUFBQSxRQUFBLFdBRUEsRUFHQSxJQUFBLE9BQUEsT0FBQSxRQUdBLFNBQUEsR0FBQSxLQUFBLFNBQUEsUUFBQSxNQUFBLFFBR0EsTUFBQSxJQUFBLFdBQUEsV0FDQSxPQUFBLE1BQUEsVUFDQSxRQUFBLEtBQ0EsTUFBQSxZQWFBLFFBQUEsT0FBQSx3QkFBQSx5QkFFQSxTQUFBLFNBQUEsV0FFQSxHQUFBLFVBQUEsS0FBQSxVQUNBLFVBQUEsVUFDQSxZQUFBLFFBQ0EsVUFBQSxLQUNBLFNBQUEsdUJBQ0EsV0FBQSxFQUNBLFFBQUEsS0FDQSxVQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFFQSxVQUFBLEVBQ0EsTUFBQSxFQUNBLGFBQUEsRUFHQSxNQUFBLE1BQUEsU0FBQSxXQUFBLFNBQUEsT0FBQSxVQUVBLFFBQUEsY0FBQSxRQUVBLEdBQUEsV0FHQSxRQUFBLFFBQUEsVUFBQSxTQUFBLE9BRUEsUUFBQSxPQUFBLFNBR0EsT0FBQSxPQUFBLGNBQUEsUUFBQSxZQUNBLFFBQUEsT0FDQSxPQUFBLE9BQUEsS0FBQSxRQUFBLEtBSUEsSUFBQSxNQUFBLE9BQUEsSUFVQSxPQVRBLFNBQUEsV0FDQSxPQUFBLEtBQUEsV0FDQSxPQUNBLFNBQUEsV0FDQSxPQUFBLFFBQ0EsSUFBQSxRQUFBLFlBSUEsT0FJQSxNQUFBLGtCQU1BLFVBQUEsV0FBQSxVQUFBLE9BQUEsU0FBQSxTQUFBLFFBQUEsS0FBQSxRQUVBLFFBQUEsdUJBQUEsUUFBQSxVQUVBLFFBQ0EsU0FBQSxNQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BR0EsR0FBQSxVQUFBLE1BQUEsTUFBQSxRQUFBLFFBQUEsTUFBQSxFQUNBLFNBQUEsU0FBQSxXQUFBLFlBQUEsV0FBQSxPQUFBLFlBQUEsWUFBQSxXQUFBLGVBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsUUFJQSxRQUFBLFNBQUEsUUFBQSxVQUFBLFFBQUEsU0FBQSxLQUNBLEtBQUEsTUFBQSxLQUFBLFNBQUEsSUFBQSxTQUFBLFVBQ0EsTUFBQSxLQUFBLEtBQUEsWUFBQSxjQUtBLEtBQUEsU0FBQSxNQUFBLE9BQUEsS0FBQSxRQUFBLFNBQUEsVUFDQSxRQUFBLFNBQUEsVUFDQSxRQUFBLE9BQUEsTUFBQSxVQUVBLE1BQUEsUUFBQSxXQUVBLEVBR0EsSUFBQSxPQUFBLE9BQUEsUUFHQSxTQUFBLEdBQUEsS0FBQSxTQUFBLFFBQUEsTUFBQSxRQUdBLE1BQUEsSUFBQSxXQUFBLFdBQ0EsT0FBQSxNQUFBLFVBQ0EsUUFBQSxLQUNBLE1BQUEsWUFTQSxRQUFBLE9BQUEsNEJBRUEsU0FBQSxVQUFBLFdBRUEsR0FBQSxVQUFBLEtBQUEsVUFDQSxZQUFBLFNBQ0EsWUFBQSxRQUdBLE1BQUEsS0FBQSxXQUNBLE9BQUEsU0FBQSxhQUtBLFVBQUEsa0JBQUEsV0FFQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFVBQ0EsUUFBQSxTQUFBLFFBQUEsTUFDQSxRQUFBLEtBQUEsY0FBQSxXQUNBLFFBQUEsV0FBQSxXQUNBLElBQUEsVUFBQSxRQUFBLEdBQUEsaUJBQUEseUJBQ0E7UUFBQSxRQUFBLFNBQUEsU0FBQSxPQUNBLEdBQUEsU0FBQSxRQUFBLFFBQUEsTUFDQSxTQUFBLEtBQUEsY0FBQSxJQUNBLFFBQUEsS0FBQSxXQUFBLEtBQUEsUUFBQSxJQUFBLFFBQUEsS0FBQSxnQkFRQSxVQUFBLGNBQUEsVUFBQSxRQUFBLFNBQUEsUUFBQSxPQUVBLEdBQUEsVUFBQSxRQUFBLFNBQ0Esb0JBQUEsb0JBRUEsUUFDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsS0FBQSxZQUVBLEdBQUEsU0FBQSxTQUdBLFFBQUEsVUFBQSxRQUFBLEdBQUEsU0FDQSxjQUFBLFFBQUEsUUFBQSxTQUFBLFFBRUEsVUFBQSxRQUFBLFVBQUEsS0FBQSxXQUFBLEtBQUEsV0FBQSxDQUNBLHFCQUFBLEtBQUEsS0FBQSxhQUNBLFVBQUEsTUFBQSxNQUFBLEtBQUEsV0FFQSxJQUFBLFlBQUEsUUFBQSxVQUFBLEtBQUEsWUFBQSxLQUFBLFlBQUEsQ0FDQSxxQkFBQSxLQUFBLEtBQUEsY0FDQSxXQUFBLE1BQUEsTUFBQSxLQUFBLFlBSUEsSUFBQSxpQkFBQSxpQkFBQSxZQUFBLGlCQUFBLFdBQ0EsbUJBQ0EsV0FBQSxTQUFBLEtBQUEsU0FBQSxXQUVBLE1BQUEsV0FBQSxVQUFBLGFBR0EsTUFBQSxPQUFBLEtBQUEsUUFBQSxXQUNBLFdBQUEsYUFLQSxXQUFBLFFBQUEsV0FFQSxHQUFBLFVBQUEsUUFBQSxPQUFBLFdBQUEsWUFBQSxVQUNBLE9BQUEsV0FDQSxVQUFBLFFBQUEsR0FBQSxRQUFBLFVBQ0EsY0FBQSxZQUFBLFFBQUEsWUFBQSxhQUtBLFFBQUEsS0FBQSxRQUFBLFlBQUEsV0FDQSxNQUFBLE9BQUEsV0FFQSxTQUNBLFdBQUEsZUFBQSxjQUFBLFNBQUEsV0FFQSxpQkFDQSxXQUFBLG1CQVdBLFVBQUEsZUFBQSxXQUVBLE9BQ0EsU0FBQSxJQUNBLFFBQUEsVUFDQSxRQUFBLFNBQUEsUUFBQSxNQUNBLFFBQUEsS0FBQSxjQUFBLFdBQ0EsUUFBQSxXQUFBLFdBQ0EsSUFBQSxVQUFBLFFBQUEsR0FBQSxpQkFBQSxzQkFDQSxTQUFBLFFBQUEsU0FBQSxTQUFBLE9BQ0EsUUFBQSxRQUFBLE9BQUEsS0FBQSxXQUFBLElBQ0EsUUFBQSxRQUFBLE9BQUEsS0FBQSxXQUFBLEtBQUEsZUFRQSxVQUFBLFdBQUEsVUFBQSxRQUFBLFNBQUEsUUFBQSxPQUVBLEdBQUEsVUFBQSxRQUFBLFNBQ0Esb0JBQUEsb0JBRUEsUUFDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsS0FBQSxZQUVBLEdBQUEsU0FBQSxTQUdBLFFBQUEsVUFBQSxRQUFBLEdBQUEsU0FDQSxjQUFBLFFBQUEsUUFBQSxTQUFBLFFBRUEsTUFBQSxvQkFBQSxLQUFBLEtBQUEsT0FBQSxNQUFBLE1BQUEsS0FBQSxPQUFBLEtBQUEsS0FHQSxZQUFBLFFBQUEsV0FFQSxHQUFBLFVBQUEsUUFBQSxPQUFBLFdBQUEsWUFBQSxNQUNBLE9BQUEsV0FDQSxVQUFBLFFBQUEsR0FBQSxRQUFBLFVBQ0EsY0FBQSxZQUFBLFFBQUEsWUFBQSxhQUtBLFFBQUEsS0FBQSxRQUFBLFlBQUEsV0FDQSxNQUFBLE9BQUEsV0FFQSxXQUFBLGNBQUEsT0FDQSxXQUFBLG1CQVdBLFFBQUEsT0FBQSw4QkFFQSxTQUFBLFlBQUEsV0FFQSxHQUFBLFVBQUEsS0FBQSxVQUNBLFVBQUEsY0FDQSxnQkFBQSxFQUNBLFlBQUEsTUFHQSxXQUFBLEtBQUEsV0FBQSxTQUFBLE9BQUEsU0FBQSxRQUNBLEdBQUEsTUFBQSxJQUdBLE1BQUEsU0FBQSxRQUFBLEtBQUEsVUFDQSxRQUFBLFNBQUEsWUFBQSxpQkFBQSxlQUFBLFNBQUEsS0FDQSxRQUFBLFVBQUEsT0FBQSxRQUFBLEtBQUEsU0FBQSxLQUFBLE9BQUEsUUFHQSxLQUFBLFlBQ0EsS0FBQSxZQUVBLEtBQUEsd0JBRUEsS0FBQSxnQkFBQSxTQUFBLFNBQ0EsS0FBQSxTQUFBLEtBQUEsVUFFQSxLQUFBLGdCQUFBLFNBQUEsU0FDQSxLQUFBLFNBQUEsS0FBQSxVQUdBLEtBQUEsU0FBQSxRQUFBLEVBQ0EsS0FBQSxXQUFBLE9BQUEsV0FBQSxTQUFBLE9BSUEsS0FBQSxTQUFBLFFBSEEsS0FBQSxTQUFBLGVBR0EsTUFGQSxLQUFBLFNBQUEsVUFBQSxNQUFBLEdBQUEsTUFJQSxLQUFBLHFCQUFBLFFBQUEsU0FBQSxJQUNBLFFBTUEsTUFBQSxLQUFBLFdBQ0EsR0FBQSxhQUdBLE9BRkEsV0FBQSxTQUFBLFNBQ0EsVUFBQSxXQUFBLFdBQ0EsYUFLQSxVQUFBLGNBQUEsVUFBQSxXQUFBLFlBQUEsU0FBQSxRQUFBLFNBQUEsV0FFQSxVQUFBLFFBRUEsUUFDQSxTQUFBLFdBQUEsY0FDQSxZQUFBLFNBQUEsV0FBQSxTQUFBLFVBQUEsWUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BQUEsYUFFQSxHQUFBLGFBQUEsWUFBQSxHQUNBLGVBQUEsWUFBQSxFQUVBLGVBR0EsZUFBQSxxQkFBQSxLQUFBLFdBQ0EsWUFBQSxjQUFBLGVBQUEsU0FBQSxXQUlBLFlBQUEsWUFBQSxLQUFBLFNBQUEsWUFHQSxNQURBLGdCQUFBLFdBQUEsRUFBQSxZQUNBLG1CQVVBLFVBQUEsbUJBQUEsV0FFQSxPQUNBLFNBQUEsWUFBQSxlQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFBQSxhQUVBLEdBQ0EsaUJBREEsWUFBQSxHQUNBLFlBQUEsR0FHQSxTQUFBLEtBQUEsY0FBQSxZQUdBLGVBQUEsZ0JBQUEsU0FDQSxRQUFBLEdBQUEsUUFBQSxXQUNBLEdBQUEsT0FBQSxNQUFBLGtCQUFBLGVBQUEsU0FBQSxRQUFBLFFBQ0EsZ0JBQUEsV0FBQSxFQUFBLE9BQ0EsTUFBQSxlQVFBLFVBQUEsb0JBQUEsV0FBQSxTQUFBLFVBRUEsT0FDQSxTQUFBLFlBQUEsZUFFQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BQUEsYUFnQkEsUUFBQSxVQUNBLEdBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxTQUNBLE9BQUEsZUFBQSxTQUFBLE9BQ0EsVUFBQSxRQUFBLE9BQUEsV0FBQSxlQUFBLFFBQUEsZUFBQSxTQUFBLGFBakJBLEdBQ0EsaUJBREEsWUFBQSxHQUNBLFlBQUEsR0FHQSxTQUFBLFNBQUEsWUFHQSxlQUFBLFNBQUEsV0FDQSxRQUFBLFNBQUEsZUFBQSxTQUFBLFdBSUEsZUFBQSxnQkFBQSxTQVFBLGVBQUEscUJBQUEsS0FBQSxXQUNBLFdBRUEsY0FRQSxRQUFBLE9BQUEsNkJBQUEsb0NBQUEsMkJBRUEsU0FBQSxjQUFBLFdBRUEsR0FBQSxVQUFBLEtBQUEsVUFDQSxVQUFBLFVBQ0EsWUFBQSxhQUNBLFVBQUEsY0FDQSxTQUFBLGlDQUNBLFFBQUEsUUFDQSxXQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBRUEsV0FBQSxFQUNBLFNBQUEsT0FDQSxXQUFBLFlBQ0EsZ0JBQUEsS0FDQSxVQUFBLEtBQ0EsY0FBQSxFQUNBLFdBQUEsRUFDQSxTQUFBLElBQ0EsU0FBQSxJQUNBLFVBQUEsRUFDQSxRQUFBLEVBQ0EsVUFBQSxFQUNBLG1CQUFBLEdBQ0EsU0FBQSxtQ0FDQSxVQUFBLG9DQUdBLE1BQUEsTUFBQSxVQUFBLFlBQUEsYUFBQSxPQUFBLFVBQUEsYUFBQSxrQkFBQSxXQUFBLFNBQUEsUUFBQSxVQUFBLFdBQUEsS0FBQSxRQUFBLFdBQUEsZ0JBQUEsVUFPQSxRQUFBLG1CQUFBLFFBQUEsV0FBQSxRQXdJQSxRQUFBLGdCQUFBLElBQ0EsR0FBQSxTQUFBLFlBQUEsWUFBQSxHQUFBLE1BR0EsUUFBQSxnQkFDQSxRQUFBLEdBQUEsUUEzSUEsR0FBQSxhQUFBLFNBQUEsUUFBQSxRQUFBLFVBQUEsU0FBQSxTQUNBLFlBQUEsT0FBQSxNQUNBLFFBQUEsWUFBQSxTQUNBLE1BQUEsWUFBQSxNQUNBLFNBQUEsWUFBQSxRQUFBLFdBQUEsUUFBQSxRQUlBLElBQUEsYUFBQSxnQkFBQSxZQUNBLGFBQUEsT0FBQSxZQUFBLEtBQ0EsSUFBQSxVQUFBLFlBQUEsUUFDQSxPQUFBLE1BQUEsUUFBQSxVQUNBLE1BQUEsVUFBQSxRQUFBLFNBQ0EsTUFBQSxXQUFBLFFBQUEsU0FDQSxJQUFBLFNBQUEsWUFBQSxPQUFBLE1BQUEsTUFJQSxPQUFBLFFBQUEsU0FBQSxNQUNBLFlBQUEsT0FBQSxPQUVBLE1BQUEsWUFBQSxTQUFBLE9BQ0EsWUFBQSxZQUFBLFFBRUEsTUFBQSxZQUFBLFdBQ0EsWUFBQSxTQUFBLE1BQUEsTUFBQSxHQUFBLFlBQUEsT0FBQSxTQUtBLFlBQUEsT0FBQSxTQUFBLE1BRUEsUUFBQSxPQUFBLFFBQUEsTUFBQSxLQUFBLGFBQ0EsWUFBQSxNQUFBLEtBQ0EsUUFBQSxPQUFBLEtBQUEsUUFBQSxPQUdBLFlBQUEsUUFBQSxJQUdBLFlBQUEsb0JBQUEsU0FBQSxZQUNBLFFBQUEsbUJBQUEsVUFDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsUUFBQSxRQUFBLE1BQUEsS0FBQSxHQUFBLFlBQUEsaUJBSUEsWUFBQSxPQUFBLFNBQUEsS0FBQSxNQUVBLFFBQUEsT0FBQSxXQUFBLGNBQUEsV0FBQSxXQUFBLEdBQUEsTUFBQSxRQUNBLE1BQUEsT0FBQSxNQUNBLFdBQUEsY0FBQSxRQUFBLEtBQUEsT0FDQSxXQUFBLFVBQ0EsUUFBQSxZQUFBLE1BQ0EsWUFBQSxNQUFBLEtBR0EsUUFBQSxPQUFBLFVBQUEsS0FBQSxLQUFBLGNBQUEsTUFBQSxLQUFBLFdBQUEsS0FBQSxLQUFBLFlBQ0EsWUFBQSxRQUFBLE1BQUEsTUFBQSxHQUNBLFlBQUEsV0FJQSxZQUFBLFFBQUEsU0FBQSxNQUVBLE1BQUEsTUFBQSxLQUNBLFFBQUEsWUFBQSxPQUFBLE1BQUEsT0FDQSxZQUFBLFVBS0EsWUFBQSxPQUFBLFNBQUEsVUFFQSxZQUFBLEdBQUEsUUFBQSxRQUNBLFlBQUEsR0FBQSxRQUFBLFFBQ0EsUUFBQSxNQUFBLEtBQUEsVUFHQSxZQUFBLGdCQUFBLFdBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLE1BQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLFFBQUEsUUFBQSxNQUFBLEtBQUEsR0FBQSxpQkFJQSxZQUFBLFlBQUEsU0FBQSxNQUNBLE1BQUEsU0FBQSxXQUFBLE9BR0EsWUFBQSxlQUFBLFNBQUEsSUFDQSxHQUFBLFNBQUEsUUFBQSxXQUFBLEdBQUEsT0FHQSxZQUFBLFlBQUEsU0FBQSxPQUNBLEdBQUEsT0FBQSxRQUFBLE1BQ0EsV0FBQSxHQUFBLE1BQUEsS0FBQSxJQUFBLFNBQUEsTUFBQSxNQUFBLE1BQUEsR0FBQSxNQUFBLFNBQUEsT0FBQSxNQUFBLE9BQUEsR0FBQSxNQUFBLFNBQUEsTUFBQSxNQUFBLEtBQUEsR0FBQSxPQUNBLFNBQUEsT0FBQSxVQUFBLEtBQUEsV0FBQSxpQkFBQSxNQUFBLFdBQUEsY0FBQSxLQUFBLFdBQUEsZUFDQSxZQUFBLFVBR0EsWUFBQSxhQUFBLFNBQUEsS0FLQSxHQUhBLElBQUEsaUJBQ0EsSUFBQSxrQkFFQSxRQUFBLENBQ0EsR0FBQSxVQUFBLFFBQUEsUUFBQSxJQUFBLE9BQ0EsWUFBQSxTQUFBLEdBQUEsU0FBQSxnQkFDQSxTQUFBLFNBQUEsVUFFQSxTQUFBLGVBQUEsV0FJQSxZQUFBLFdBQUEsU0FBQSxLQUNBLEdBQUEsbUJBQUEsS0FBQSxJQUFBLFdBQUEsSUFBQSxXQUFBLElBQUEsT0FBQSxDQUlBLEdBSEEsSUFBQSxpQkFDQSxJQUFBLGtCQUVBLEtBQUEsSUFBQSxRQUNBLE1BQUEsT0FBQSxNQUdBLE1BQUEsT0FBQSxXQUFBLFlBQUEsUUFBQSxNQUFBLE1BQUEsS0FGQSxZQUFBLE1BQUEsRUFPQSxTQUFBLFVBQUEsS0FDQSxZQUFBLFdBZUEsSUFBQSxPQUFBLFlBQUEsSUFDQSxhQUFBLEtBQUEsV0FDQSxNQUFBLFdBQUEsUUFBQSxXQUNBLFFBQUEsS0FBQSxPQUFBLFlBQ0EsU0FBQSxJQUFBLHFCQUFBLGVBRUEsVUFDQSxRQUFBLEtBQUEsT0FBQSxRQUNBLFFBQUEsS0FBQSxXQUFBLFFBQ0EsUUFBQSxHQUFBLFFBQUEsbUJBRUEsVUFHQSxJQUFBLFVBQUEsWUFBQSxPQUNBLGFBQUEsUUFBQSxXQUNBLFVBQUEsUUFBQSxXQUNBLFFBQUEsSUFBQSxRQUFBLGNBRUEsV0FHQSxJQUFBLE9BQUEsWUFBQSxJQUNBLGFBQUEsS0FBQSxXQUNBLFFBQ0EsV0FBQSxXQUNBLFlBQUEsU0FBQSxHQUFBLFFBQUEsYUFBQSxZQUFBLFlBQUEsY0FDQSxRQUFBLFVBQ0EsUUFBQSxHQUFBLFVBQUEsWUFBQSxjQUtBLElBQUEsT0FBQSxZQUFBLElBU0EsT0FSQSxhQUFBLEtBQUEsU0FBQSxNQUNBLFlBQUEsU0FBQSxJQUFBLFFBQUEsYUFBQSxZQUFBLFlBQUEsY0FDQSxRQUFBLFVBQ0EsUUFBQSxJQUFBLFVBQUEsWUFBQSxZQUVBLE1BQUEsT0FHQSxZQWpNQSxHQUNBLFdBREEsUUFBQSxRQUFBLFFBQUEsU0FBQSxNQUNBLDhCQUFBLEtBQUEsUUFBQSxVQUFBLFlBQ0EsUUFBQSxlQUFBLFNBQUEsVUFBQSxRQW9NQSxPQW5NQSxVQUFBLE9BQUEsU0FBQSxLQUFBLFFBQUEsSUFrTUEsa0JBQUEsU0FBQSxTQUNBLHNCQU1BLFVBQUEsZ0JBQUEsVUFBQSxTQUFBLEtBQUEsVUFBQSxhQUFBLGNBQUEsY0FBQSxXQUFBLFNBQUEsUUFBQSxPQUFBLEdBQUEsUUFBQSxXQUFBLFlBQUEsYUFFQSxHQUNBLFdBREEsWUFBQSxTQUNBLDhCQUFBLEtBQUEsUUFBQSxVQUFBLFlBQ0EsVUFBQSxTQUFBLEdBQ0EsT0FBQSxNQUFBLFdBQUEsS0FBQSxTQUFBLEdBR0EsUUFDQSxTQUFBLE1BQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsS0FBQSxZQWtEQSxRQUFBLHFCQUFBLFFBQ0EsTUFBQSxTQUFBLE9BQUEsT0FDQSxPQURBLEtBaERBLEdBQUEsVUFBQSxNQUFBLE1BQUEsV0FBQSxXQUNBLFNBQUEsU0FBQSxZQUFBLFlBQUEsUUFBQSxVQUFBLFdBQUEsT0FBQSxZQUFBLFdBQUEsWUFBQSxXQUFBLGFBQUEsa0JBQUEsWUFBQSxlQUFBLFlBQUEsWUFBQSxZQUFBLE9BQUEsWUFBQSxVQUFBLFdBQUEsWUFBQSxzQkFBQSxTQUFBLEtBQ0EsUUFBQSxVQUFBLEtBQUEsUUFBQSxRQUFBLEtBQUEsS0FBQSxRQUlBLEtBQUEsUUFBQSxNQUFBLE9BQUEsS0FBQSxPQUFBLFNBQUEsVUFDQSxZQUFBLFFBQUEsVUFBQSxZQUNBLFFBQUEsU0FBQSxZQUFBLFdBQUEsU0FBQSxNQUFBLHFCQUNBLFlBQUEsRUFBQSxXQUFBLE9BQUEsV0FBQSxTQUlBLElBQUEsWUFBQSxZQUFBLFFBQUEsV0FBQSxRQUNBLFNBQUEsV0FBQSxTQUVBLFVBQUEsUUFBQSxZQUFBLFFBQUEsV0FBQSxjQUdBLFFBQUEsU0FBQSxVQUFBLFdBQUEsU0FBQSxLQUVBLFFBQUEsVUFBQSxLQUFBLE9BQUEsS0FBQSxTQUFBLElBQUEsU0FBQSxVQUVBLEdBQUEsVUFBQSxTQUFBLENBQ0EsR0FBQSxPQUFBLEdBQUEsS0FDQSxZQUFBLFNBQUEsTUFBQSxHQUFBLE1BQUEsTUFBQSxjQUFBLE1BQUEsV0FBQSxNQUFBLFdBQUEsWUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxZQUFBLElBQUEsRUFBQSxRQUVBLFlBQUEsU0FBQSxLQURBLFFBQUEsU0FBQSxXQUFBLFNBQUEsTUFBQSxXQUNBLEdBQUEsTUFBQSxTQUFBLE9BQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxVQUFBLFdBQ0EsR0FBQSxNQUFBLFNBQUEsU0FBQSxLQUNBLFFBQUEsU0FBQSxXQUFBLElBQUEsU0FBQSxPQUNBLFlBQUEsS0FBQSxLQUFBLEtBRUEsR0FBQSxNQUFBLFdBR0EsTUFBQSxXQUFBLFNBQUEsT0FBQSxXQUFBLFFBQUEsT0FLQSxNQUFBLE9BQUEsS0FBQSxRQUFBLFdBQ0EsV0FBQSxPQUFBLFdBQUEsY0FDQSxHQVNBLFFBQUEsVUFBQSxLQUFBLGdCQUNBLE1BQUEsT0FBQSxLQUFBLGNBQUEsU0FBQSxlQUFBLGVBQ0EsZUFBQSxvQkFBQSxnQkFDQSxjQUFBLG9CQUFBLGVBRUEsaUJBQUEsZUFDQSxXQUFBLG9CQUFBLGlCQUtBLElBQUEsWUFBQSxhQUFBLE9BQUEsUUFBQSxXQUFBLEtBQUEsUUFBQSxLQUFBLE9BQUEsUUFBQSxjQUdBLFlBQUEsU0FBQSxRQUFBLFNBQUEsV0FHQSxJQUFBLFVBRUEsV0FEQSxZQUFBLGFBQUEsUUFBQSxFQUdBLElBQUEsWUFBQSxXQUFBLE1BQUEsVUFBQSxXQUFBLFdBQ0EsS0FBQSxZQUFBLE1BQUEsV0FBQSxXQUVBLFdBREEsWUFBQSxhQUFBLFFBQUEsRUFHQSxJQUFBLFlBQUEsTUFBQSxXQUFBLFNBQUEsVUFBQSxXQUFBLFdBQUEsV0FBQSxTQUFBLFFBQ0EsV0FBQSxNQUFBLFdBQUEsU0FBQSxVQUFBLFdBQUEsV0FBQSxXQUFBLFNBQUEsUUFDQSxRQUFBLFlBQUEsVUFPQSxPQU5BLFlBQUEsYUFBQSxPQUFBLFNBQ0EsV0FBQSxhQUFBLE1BQUEsWUFDQSxXQUFBLGFBQUEsTUFBQSxZQUVBLFVBQUEsV0FBQSxXQUFBLFlBRUEsV0FBQSxRQUFBLFNBQ0EsV0FBQSxXQUFBLFFBQUEsaUJBQUEsUUFBQSxZQUNBLFdBQUEsUUFBQSxTQUNBLFdBQUEsV0FBQSxVQUNBLFFBQUEsUUFBQSxTQUNBLFdBQUEsV0FBQSxjQUVBLEdBQUEsTUFBQSxXQUFBLGNBS0EsV0FBQSxZQUFBLEtBQUEsU0FBQSxZQUVBLEdBQUEsS0FnQkEsT0FkQSxNQURBLFFBQUEsWUFBQSxhQUFBLE9BQUEsV0FDQSxJQUNBLFFBQUEsT0FBQSxZQUNBLFdBQ0EsV0FBQSxRQUFBLFNBQ0EsV0FBQSxNQUFBLFdBQUEsS0FBQSxRQUFBLGlCQUVBLEdBQUEsTUFBQSxZQU9BLFdBQUEsV0FBQSxLQUNBLFdBQUEsYUFJQSxXQUFBLFFBQUEsV0FFQSxRQUFBLEtBQUEsV0FBQSxZQUFBLE1BQUEsV0FBQSxXQUFBLFdBQUEsR0FBQSxXQUFBLFdBQUEsV0FBQSxRQUFBLGNBSUEsTUFBQSxJQUFBLFdBQUEsV0FDQSxZQUFBLFdBQUEsVUFDQSxRQUFBLEtBQ0EsV0FBQSxZQVFBLFNBQUEsa0JBQUEsV0FRQSxRQUFBLE9BQUEsSUFBQSxNQUVBLElBREEsR0FBQSxXQUNBLElBQUEsT0FBQSxHQUNBLE9BQUEsS0FBQSxJQUFBLE9BQUEsRUFBQSxNQUVBLE9BQUEsUUFJQSxRQUFBLEtBQUEsRUFBQSxHQUNBLE9BQUEsRUFBQSxFQUFBLEdBQUEsRUFoQkEsS0FBQSxVQUNBLFVBQUEsS0FDQSxTQUFBLEVBaUJBLE1BQUEsTUFBQSxVQUFBLE9BQUEsYUFBQSxTQUFBLFFBQUEsS0FBQSxZQUVBLE1BQUEsVUFBQSxRQUVBLEdBQUEsT0FBQSxPQUFBLE9BQ0EsUUFBQSxPQUFBLFNBRUEsWUFBQSxRQUFBLGlCQUFBLFNBQ0EsZUFBQSxZQUFBLE1BQUEsUUFBQSxXQUFBLE9BQUEsWUFBQSxNQUFBLEVBQUEsUUFBQSxZQUNBLG1CQUFBLEtBQUEsWUFBQSwrQkFBQSxlQUFBLEtBQUEscUNBQUEsU0FFQSxVQUFBLE9BQUEsUUFBQSxRQUFBLFVBQUEsR0FBQSxNQUFBLFFBQUEsV0FBQSxHQUFBLE9BQ0EsVUFBQSxLQUFBLFVBQUEsY0FBQSxNQUFBLFVBQUEsV0FBQSxLQUFBLFVBQUEsV0FHQSxPQUZBLElBQUEsVUFBQSxzQkFHQSxPQUFBLFFBQUEsVUFDQSxNQUFBLEVBQ0EsT0FBQSxNQUFBLEdBQ0EsT0FBQSxTQUFBLEtBQUEsUUFDQSxLQUFBLE9BQUEsT0FBQSxLQUFBLGdCQUFBLFNBQUEsTUFBQSxLQUFBLGFBQUEsU0FBQSxPQUNBLFFBQUEsT0FBQSxVQUFBLEtBQUEsT0FBQSxNQUFBLGNBQUEsTUFBQSxPQUFBLE1BQUEsV0FBQSxLQUFBLE9BQUEsTUFBQSxZQUNBLE9BQUEsVUFDQSxLQUFBLFlBQUEsU0FBQSxPQUNBLFNBQUEsS0FBQSxPQUFBLE1BQUEsVUFDQSxPQUFBLG9CQUdBLE1BQUEsV0FDQSxHQUFBLGlCQUFBLEdBQUEsTUFBQSxTQUFBLEtBQUEsU0FBQSxNQUFBLEdBQUEsc0JBQUEsZ0JBQUEsb0JBQ0EsVUFBQSxHQUFBLE9BQUEsZ0JBQUEsTUFBQSxJQUFBLGdCQUFBLFNBQUEsUUFBQSxVQUFBLElBQUEsZ0JBQUEsVUFBQSxvQkFDQSxPQUFBLEdBQUEsT0FBQSxjQUVBLG1CQUFBLHdCQUFBLFVBQUEsR0FBQSxPQUFBLFVBQUEsS0FBQSxnQkFBQSx3QkFFQSxLQUFBLEdBREEsS0FBQSxRQUNBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsTUFBQSxVQUFBLGNBQUEsVUFBQSxXQUFBLFVBQUEsVUFBQSxHQUNBLEtBQUEsTUFBQSxLQUFBLElBQUEsUUFBQSxJQUFBLGlCQUFBLE1BQUEsTUFBQSxXQUFBLElBQUEsS0FBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLEtBQUEsV0FBQSxLQUFBLE1BQUEsSUFBQSxhQUFBLFNBQUEsTUFBQSxTQUFBLEtBQUEsV0FBQSxNQUVBLE9BQUEsTUFBQSxXQUFBLGdCQUFBLGFBQ0EsTUFBQSxZQUFBLEVBQ0EsTUFBQSxPQUFBLG1CQUNBLE1BQUEsS0FBQSxNQUFBLEtBQUEsS0FBQSxPQUNBLEtBQUEsT0FBQSxHQUVBLFdBQUEsU0FBQSxNQUNBLE1BQUEsUUFBQSxPQUFBLEtBQUEsZ0JBQUEsT0FBQSxNQUFBLGVBQUEsS0FBQSxhQUFBLE9BQUEsTUFBQSxZQUFBLEtBQUEsWUFBQSxPQUFBLE1BQUEsV0FFQSxXQUFBLFNBQUEsTUFDQSxHQUFBLE1BQUEsS0FBQSxTQUdBLElBQUEsS0FBQSxRQUFBLFNBQUEsS0FBQSxRQUFBLFFBQUEsT0FBQSxDQUdBLElBQUEsS0FBQSxRQUFBLG1CQUFBLFFBQUEsS0FBQSxVQUFBLE9BQUEsQ0FHQSxJQUFBLFFBQUEsbUJBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFFBQUEsbUJBQUEsT0FBQSxJQUNBLEdBQUEsTUFBQSxRQUFBLG1CQUFBLEdBQUEsTUFDQSxNQUFBLE9BQUEsUUFBQSxtQkFBQSxHQUFBLEtBQUEsR0FJQSxDQUtBLFFBQUEsR0FFQSxVQUFBLFNBQUEsS0FDQSxHQUNBLFNBREEsV0FBQSxPQUFBLE1BQUEsU0FHQSxNQUFBLElBQUEsUUFBQSxRQUFBLEdBQUEsTUFBQSxXQUFBLE9BQ0EsS0FBQSxJQUFBLFFBQUEsUUFBQSxHQUFBLE1BQUEsV0FBQSxRQUNBLEtBQUEsSUFBQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFdBQUEsT0FDQSxLQUFBLElBQUEsVUFBQSxRQUFBLEdBQUEsTUFBQSxXQUFBLFNBRUEsS0FBQSxXQUFBLFVBQUEsT0FBQSxPQUFBLFNBQUEsTUFHQSxLQUFBLFFBQ0EsT0FBQSxNQUNBLE1BQUEsRUFDQSxPQUFBLEtBQUEsR0FDQSxPQUFBLFNBQUEsTUFDQSxLQUFBLE9BQUEsS0FBQSxnQkFBQSxTQUFBLEtBR0EsS0FBQSxhQUFBLFNBQUEsUUFDQSxRQUFBLE9BQUEsVUFBQSxNQUFBLE9BQUEsTUFBQSxXQUFBLEtBQUEsT0FBQSxNQUFBLFlBQ0EsT0FBQSxvQkFKQSxRQUFBLE9BQUEsVUFBQSxLQUFBLE9BQUEsTUFBQSxjQUFBLE1BQUEsT0FBQSxNQUFBLFdBQUEsS0FBQSxPQUFBLE1BQUEsWUFDQSxPQUFBLFdBTUEsTUFBQSxXQUdBLElBQUEsR0FEQSxPQUFBLFFBREEsR0FBQSxNQUFBLFNBQUEsS0FBQSxFQUFBLE9BRUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLE1BQUEsR0FBQSxNQUFBLFNBQUEsS0FBQSxFQUFBLEdBQ0EsT0FBQSxNQUFBLEtBQUEsTUFBQSxNQUFBLFdBQUEsTUFBQSxLQUFBLFFBQUEsU0FBQSxPQUFBLFlBQUEsT0FBQSxTQUFBLEtBQUEsV0FBQSxRQUVBLE9BQUEsTUFBQSxXQUFBLE1BQUEsUUFDQSxNQUFBLFlBQUEsRUFDQSxNQUFBLEtBQUEsTUFBQSxPQUFBLEtBQUEsT0FDQSxLQUFBLE9BQUEsR0FFQSxXQUFBLFNBQUEsTUFDQSxNQUFBLFFBQUEsT0FBQSxLQUFBLGdCQUFBLE9BQUEsTUFBQSxlQUFBLEtBQUEsYUFBQSxPQUFBLE1BQUEsWUFFQSxXQUFBLFNBQUEsTUFDQSxHQUFBLFdBQUEsR0FBQSxNQUFBLEtBQUEsY0FBQSxLQUFBLFdBQUEsRUFBQSxFQUNBLE9BQUEsVUFBQSxRQUFBLFNBQUEsS0FBQSxVQUFBLFFBQUEsU0FFQSxVQUFBLFNBQUEsS0FDQSxHQUFBLGFBQUEsT0FBQSxNQUFBLFdBQ0EsUUFBQSxHQUFBLE1BQUEsT0FBQSxNQUVBLE1BQUEsSUFBQSxRQUFBLFFBQUEsU0FBQSxZQUFBLEdBQ0EsS0FBQSxJQUFBLFFBQUEsUUFBQSxTQUFBLFlBQUEsR0FDQSxLQUFBLElBQUEsUUFBQSxRQUFBLFNBQUEsWUFBQSxHQUNBLEtBQUEsSUFBQSxTQUFBLFFBQUEsU0FBQSxZQUFBLEdBRUEsS0FBQSxXQUFBLFVBQUEsT0FBQSxPQUFBLFNBQUEsTUFHQSxLQUFBLE9BQ0EsT0FBQSxPQUNBLE1BQUEsRUFDQSxPQUFBLEtBQUEsSUFDQSxPQUFBLFNBQUEsS0FBQSxRQUNBLEtBQUEsT0FBQSxPQUFBLFNBQUEsS0FBQSxjQUFBLEdBQUEsTUFBQSxTQUFBLFNBQUEsS0FBQSxHQUFBLEtBQ0EsUUFBQSxPQUFBLFVBQUEsS0FBQSxPQUFBLE1BQUEsY0FBQSxNQUFBLE9BQUEsTUFBQSxXQUFBLEtBQUEsT0FBQSxNQUFBLFlBQ0EsT0FBQSxVQUNBLEtBQUEsZ0JBQUEsU0FBQSxPQUNBLFFBQUEsT0FBQSxVQUFBLEtBQUEsT0FBQSxNQUFBLGNBQUEsTUFBQSxPQUFBLE1BQUEsV0FBQSxLQUFBLE9BQUEsTUFBQSxZQUNBLE9BQUEsb0JBR0EsTUFBQSxXQUdBLElBQUEsR0FEQSxNQURBLFVBQUEsU0FBQSxLQUFBLFNBQUEsTUFBQSxFQUFBLEtBQUEsT0FDQSxTQUNBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsTUFBQSxVQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxLQUFBLEtBQUEsTUFBQSxXQUFBLEtBQUEsS0FBQSxRQUFBLFNBQUEsT0FBQSxZQUFBLE1BQUEsU0FBQSxLQUFBLFdBQUEsT0FFQSxPQUFBLE1BQUEsTUFBQSxHQUFBLE1BQUEsSUFBQSxNQUFBLE1BQUEsT0FBQSxHQUFBLE1BQ0EsTUFBQSxZQUFBLEVBQ0EsTUFBQSxLQUFBLE1BQUEsTUFBQSxLQUFBLE9BQ0EsS0FBQSxPQUFBLEdBRUEsV0FBQSxTQUFBLE1BQ0EsTUFBQSxRQUFBLE9BQUEsS0FBQSxnQkFBQSxPQUFBLE1BQUEsZUFFQSxXQUFBLFNBQUEsTUFDQSxHQUFBLFdBQUEsR0FBQSxNQUFBLEtBQUEsY0FBQSxFQUFBLEVBQUEsRUFDQSxPQUFBLFVBQUEsUUFBQSxTQUFBLEtBQUEsVUFBQSxRQUFBLFNBRUEsVUFBQSxTQUFBLEtBQ0EsR0FBQSxZQUFBLE9BQUEsTUFBQSxjQUNBLFFBQUEsR0FBQSxNQUFBLE9BQUEsTUFFQSxNQUFBLElBQUEsUUFBQSxRQUFBLFFBQUEsV0FBQSxHQUNBLEtBQUEsSUFBQSxRQUFBLFFBQUEsUUFBQSxXQUFBLEdBQ0EsS0FBQSxJQUFBLFFBQUEsUUFBQSxRQUFBLFdBQUEsR0FDQSxLQUFBLElBQUEsU0FBQSxRQUFBLFFBQUEsV0FBQSxHQUVBLEtBQUEsV0FBQSxVQUFBLE9BQUEsT0FBQSxTQUFBLE1BSUEsUUFDQSxNQUFBLFFBQUEsUUFBQSxNQUFBLFVBQUEsTUFBQSxLQUFBLE1BQUEsUUFBQSxTQUFBLE1BQ0EsU0FBQSxlQVVBLFFBQUEsT0FBQSwyQkFBQSwyQkFFQSxTQUFBLFlBQUEsV0FFQSxHQUFBLFVBQUEsS0FBQSxVQUNBLFVBQUEsVUFDQSxZQUFBLFdBQ0EsVUFBQSxjQUNBLFNBQUEsNkJBQ0EsUUFBQSxRQUNBLFdBQUEsRUFDQSxVQUFBLEVBQ0EsTUFBQSxFQUNBLE1BQUEsRUFHQSxNQUFBLE1BQUEsVUFBQSxhQUFBLFdBQUEsU0FBQSxRQUFBLFdBQUEsVUFLQSxRQUFBLGlCQUFBLFFBQUEsUUF3REEsUUFBQSxhQUFBLEtBQ0EsTUFBQSxLQUFBLFNBQUEsUUFBQSxHQUNBLElBQUEsU0FBQSxRQUFBLElBQUEsVUFBQSxPQURBLE9BdkRBLENBQUEsR0FBQSxjQUdBLFFBQUEsUUFBQSxVQUFBLFNBQUEsT0FDQSxXQUFBLE9BQUEsUUFBQSxPQUFBLFFBQUEsTUFBQSxRQUFBLFdBQUEsT0FFQSxVQUFBLFNBQUEsUUFBQSxRQUNBLElBQUEsVUFBQSxRQUFBLFFBSUEsV0FBQSxXQUFBLFNBQUEsS0FDQSxHQUFBLFVBQUEsS0FBQSxJQUFBLFNBQUEsQ0FDQSxJQUFBLGlCQUNBLElBQUEsaUJBR0EsSUFBQSxPQUFBLFFBQUEsUUFBQSxVQUFBLFNBQUEsR0FBQSxpQkFBQSxzQkFDQSxJQUFBLE1BQUEsT0FBQSxDQUNBLEdBQUEsTUFDQSxTQUFBLFFBQUEsTUFBQSxTQUFBLEdBQUEsR0FDQSxpQkFBQSxnQkFBQSxLQUFBLEdBQUEsWUFBQSxNQUFBLEtBSUEsS0FBQSxJQUFBLFNBQUEsTUFBQSxFQUFBLFFBQ0EsS0FBQSxJQUFBLFNBQUEsTUFBQSxNQUFBLE9BQUEsRUFBQSxRQUNBLFFBQUEsWUFBQSxTQUFBLE1BQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxHQUFBLFVBTUEsSUFBQSxNQUFBLFVBQUEsSUFDQSxXQUFBLEtBQUEsV0FDQSxPQUNBLFdBQUEsV0FDQSxRQUFBLFVBQUEsVUFBQSxTQUFBLEdBQUEsVUFBQSxVQUFBLFlBQ0EsT0FBQSxHQUFBLFFBQUEsZUFFQSxTQUFBLFNBQUEsYUFBQSxTQUFBLFNBQUEsUUFHQSxJQUFBLE1BQUEsVUFBQSxJQWVBLE9BZEEsV0FBQSxLQUFBLFdBQ0EsUUFBQSxVQUFBLFVBQUEsU0FBQSxJQUFBLFVBQUEsVUFBQSxZQUNBLE9BQUEsSUFBQSxRQUFBLGFBQ0EsU0FBQSxTQUFBLGFBQUEsU0FBQSxZQUFBLFFBQ0EsUUFVQSxVQWhFQSxHQUFBLFFBQUEsUUFBQSxRQUFBLFFBQUEsU0FBQSxNQUNBLGdCQUFBLFFBQUEsVUFBQSxpQkFBQSxRQUFBLFVBQUEsdUJBQUEsUUFBQSxVQUFBLG9CQUFBLFFBQUEsVUFBQSxtQkFBQSxRQUFBLFVBQUEsZ0JBbUVBLE9BQUEscUJBTUEsVUFBQSxjQUFBLFVBQUEsT0FBQSxZQUFBLFNBQUEsUUFBQSxLQUFBLFdBRUEsT0FDQSxTQUFBLE1BQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFHQSxHQUFBLFVBQUEsTUFBQSxNQUNBLFNBQUEsU0FBQSxZQUFBLFlBQUEsUUFBQSxVQUFBLFdBQUEsT0FBQSxZQUFBLFlBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsUUFJQSxLQUFBLFlBQUEsTUFBQSxPQUFBLEtBQUEsV0FBQSxTQUFBLFVBQ0EsTUFBQSxRQUFBLFdBQ0EsR0FHQSxLQUFBLFFBQUEsTUFBQSxPQUFBLEtBQUEsT0FBQSxTQUFBLFVBQ0EsVUFBQSxRQUFBLFVBQUEsWUFDQSxRQUFBLFNBQUEsWUFBQSxXQUFBLFNBQUEsTUFBQSxtQkFDQSxZQUFBLEVBQUEsU0FBQSxPQUFBLFNBQUEsU0FJQSxJQUFBLFVBQUEsVUFBQSxRQUFBLFFBR0EsT0FBQSxJQUFBLFdBQUEsV0FDQSxVQUFBLFNBQUEsVUFDQSxRQUFBLEtBQ0EsU0FBQSxZQVNBLFFBQUEsT0FBQSx3Q0FFQSxTQUFBLGVBQUEsa0JBQUEsV0FJQSxRQUFBLFNBRkEsR0FBQSxPQUFBLEtBQUEsVUFTQSxTQUFBLEtBQUEsVUFDQSxPQUFBLFlBQ0EsUUFBQSxFQUdBLE1BQUEsTUFBQSxVQUFBLGFBQUEsU0FBQSxRQUFBLFlBRUEsR0FBQSxtQkFBQSxTQUFBLFFBa0ZBLFFBQUEsaUJBQUEsUUFDQSxHQUFBLEdBQUEsS0FBQSxPQUFBLEtBQUEsVUFDQSxPQUFBLGFBRUEsYUFBQSxNQUNBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLElBQ0EsR0FBQSxPQUFBLE1BQUEsS0FBQSxJQUFBLE9BQUEsRUFBQSxDQUNBLEdBQUEsT0FBQSxhQUFBLE9BQUEsS0FBQSxHQUNBLFFBQUEsT0FBQSxNQUFBLEtBQUEsSUFBQSxLQUFBLElBQ0EsU0FBQSxLQUFBLE1BQ0EsSUFBQSxPQUFBLFNBQUEsS0FBQSxLQVVBLE1BTEEsU0FBQSxRQUFBLElBQUEsU0FBQSxHQUdBLEdBQUEsVUFBQSxLQUFBLEtBRUEsVUFHQSxRQUFBLHVCQUFBLE1BQ0EsTUFBQSxNQUFBLFFBQUEsTUFBQSxTQUFBLFFBQUEsT0FBQSxPQUFBLFFBQUEsTUFBQSxPQUFBLFFBQUEsT0FBQSxTQUdBLFFBQUEsaUJBQUEsUUFDQSxHQUFBLEdBQUEsS0FBQSxPQUFBLEtBQUEsV0FFQSxHQUFBLE1BRUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsSUFDQSxHQUFBLEdBQUEsTUFBQSxLQUFBLElBQUEsS0FBQSxLQUFBLEVBQUEsSUFHQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxJQUNBLEdBQUEsR0FBQSxNQUFBLEtBQUEsRUFBQSxLQUFBLEtBQUEsSUFBQSxVQUFBLEtBQUEsSUFBQSxJQUlBLE9BRkEsUUFBQSxzQkFBQSxRQUVBLEdBQUEsUUFBQSxJQUFBLEdBQUEsS0FBQSxNQXpIQSxHQW9EQSxPQUFBLE9BcERBLFFBQUEsUUFBQSxVQUFBLFNBQUEsUUFFQSxlQUVBLFdBQ0EsSUFBQSxXQUNBLEdBQUEsYUFDQSxFQUFBLFFBQUEsT0FBQSxjQUFBLG1CQUNBLEdBQUEsYUFDQSxFQUFBLFFBQUEsT0FBQSxjQUFBLG1CQUNBLEdBQUEsbUJBQ0EsRUFBQSxRQUFBLE9BQUEsaUJBQUEsb0JBQ0EsR0FBQSxvQkFDQSxFQUFBLFFBQUEsT0FBQSxlQUFBLGlCQUNBLEVBQUEsUUFDQSxLQUFBLFFBQUEsaUJBQUEsSUFBQSxLQUFBLEtBQ0EsSUFBQSxRQUFBLGlCQUFBLFNBQUEsS0FBQSxLQUNBLEdBQUEseUJBQ0EsRUFBQSxRQUFBLE9BQUEseUJBQUEsMkJBQ0EsS0FBQSxRQUFBLGlCQUFBLE1BQUEsS0FBQSxLQUNBLElBQUEsUUFBQSxpQkFBQSxXQUFBLEtBQUEsS0FDQSxHQUFBLGdCQUNBLEVBQUEsUUFBQSxPQUFBLGVBQUEsaUJBQ0EsS0FBQSxnQ0FDQSxHQUFBLFdBQ0EsRUFBQSxRQUFBLE9BQUEsd0JBQUEsa0JBR0EsVUFDQSxJQUFBLE1BQUEsZ0JBQ0EsR0FBQSxNQUFBLFdBQ0EsRUFBQSxNQUFBLFdBQ0EsR0FBQSxNQUFBLFdBQ0EsRUFBQSxNQUFBLFdBQ0EsR0FBQSxNQUFBLFNBQ0EsRUFBQSxNQUFBLFNBQ0EsR0FBQSxNQUFBLFNBQ0EsRUFBQSxNQUFBLFNBQ0EsS0FBQSxLQUNBLElBQUEsS0FDQSxHQUFBLE1BQUEsUUFDQSxFQUFBLE1BQUEsUUFDQSxFQUFBLFNBQUEsT0FBQSxHQUFBLE9BQUEsS0FBQSxVQUFBLE9BQUEsTUFBQSxTQUFBLE1BQUEsTUFBQSxPQUFBLE1BQUEsR0FBQSxRQUNBLEtBQUEsU0FBQSxPQUFBLE1BQUEsTUFBQSxTQUFBLFFBQUEsaUJBQUEsTUFBQSxRQUFBLFNBQ0EsSUFBQSxTQUFBLE9BQUEsTUFBQSxNQUFBLFNBQUEsUUFBQSxpQkFBQSxXQUFBLFFBQUEsU0FDQSxHQUFBLFNBQUEsT0FBQSxNQUFBLE1BQUEsU0FBQSxFQUFBLE1BQUEsSUFDQSxFQUFBLFNBQUEsT0FBQSxNQUFBLE1BQUEsU0FBQSxFQUFBLE1BQUEsSUFDQSxLQUFBLE1BQUEsWUFDQSxHQUFBLFNBQUEsT0FBQSxNQUFBLE1BQUEsWUFBQSxJQUFBLEVBQUEsUUFDQSxFQUFBLE1BQUEsWUE0RUEsT0F2RUEsYUFBQSxLQUFBLFdBQ0EsWUFBQSxRQUFBLFFBQUEsaUJBQUEsUUFBQSxTQUFBLFFBQUEsT0FDQSxNQUFBLGdCQUFBLFlBQUEsU0FDQSxPQUFBLGdCQUFBLFlBQUEsVUFHQSxZQUFBLFFBQUEsU0FBQSxNQUNBLE1BQUEsU0FBQSxPQUFBLE9BQUEsTUFBQSxLQUFBLFdBQ0EsTUFBQSxLQUFBLE9BR0EsWUFBQSxNQUFBLFNBQUEsTUFBQSxTQUFBLFFBQ0EsUUFBQSxPQUFBLFNBQUEsTUFBQSxXQUFBLE1BQUEsUUFBQSxZQUFBLFNBQ0EsSUFBQSxhQUFBLE9BQUEsZ0JBQUEsUUFBQSxNQUNBLGFBQUEsT0FBQSxnQkFBQSxRQUFBLE9BQ0EsUUFBQSxZQUFBLEtBQUEsTUFDQSxLQUFBLFFBQUEsT0FBQSxDQUVBLEtBQUEsR0FEQSxNQUFBLFVBQUEsR0FBQSxNQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxFQUFBLElBQ0EsYUFBQSxJQUFBLGFBQUEsR0FBQSxLQUFBLEtBQUEsUUFBQSxFQUFBLEdBRUEsT0FBQSxPQWlEQSxZQUFBLE9BQ0EsWUFJQSxPQUFBLHdCQU9BLFFBQUEsT0FBQSxzQ0FJQSxTQUFBLFdBQUEsU0FBQSxLQUFBLEtBQUEsV0FDQSxHQUFBLFNBQUEsS0FBQSxRQUFBLFVBQUEsTUFDQSxPQUFBLFlBQ0EsUUFBQSxLQUNBLEtBQUEsVUFDQSxVQUFBLEdBQUEsS0FDQSxJQUFBLE9BQUEsV0FDQSxHQUFBLE1BQUEsR0FBQSxNQUFBLFNBQ0EsTUFBQSxLQUNBLFFBQUEsV0FBQSxNQUFBLEtBQUEsT0FFQSxRQUFBLEtBQ0EsWUFBQSxPQUFBLEtBQUEsTUFBQSxRQUFBLFNBR0EsUUFBQSxZQUFBLE9BS0EsT0FKQSxXQUNBLFFBQUEsV0FBQSxNQUFBLE9BRUEsVUFBQSxPQUFBLEtBQUEsTUFBQSxRQUFBLE9BQ0EsVUFPQSxTQUFBLFdBQUEsU0FBQSxLQUFBLEtBQUEsU0FDQSxHQUFBLFNBQUEsS0FBQSxPQUNBLFFBQUEsS0FDQSxTQUFBLENBQ0EsV0FBQSxXQUNBLElBQUEsT0FBQSxXQUNBLFNBQUEsUUFBQSxXQUFBLEVBQUEsRUFBQSxHQUFBLE1BQ0EsUUFBQSxLQUNBLE9BQUEsS0FBQSxNQUFBLFFBQUEsTUFFQSxPQUFBLFlBQ0EsR0FBQSxLQUFBLEdBQUEsS0FDQSxXQUFBLFFBQUEsV0FBQSxJQUFBLFNBQUEsSUFDQSxJQUFBLFdBQUEsTUFBQSxJQUFBLFNBV0EsT0FWQSxTQUFBLEtBQ0EsS0FBQSxVQUNBLEdBQUEsV0FDQSxhQUFBLFNBQ0EsUUFBQSxLQUNBLFNBQUEsSUFDQSxPQUFBLEtBQUEsTUFBQSxRQUFBLE9BQ0EsU0FBQSxRQUFBLFlBQUEsSUFDQSxRQUFBLFdBQUEsTUFBQSxZQUVBLFVBS0EsUUFBQSxPQUFBLHdDQUVBLFFBQUEsY0FBQSxZQUFBLFVBQUEsV0FFQSxHQUNBLEtBREEsUUFBQSxZQVFBLFNBQUEsR0FBQSxTQUFBLFNBQUEsUUFBQSxNQUNBLE1BQUEsU0FBQSxVQUFBLFFBQUEsU0FBQSxnQkFBQSxLQUFBLGNBU0EsSUFBQSxJQUFBLFNBQUEsUUFBQSxLQUFBLE9BQ0EsR0FBQSxNQVFBLE9BTkEsT0FEQSxRQUFBLGFBQ0EsUUFBQSxhQUFBLE1BQ0EsT0FBQSxpQkFDQSxPQUFBLGlCQUFBLFNBQUEsTUFFQSxRQUFBLE1BQUEsTUFFQSxTQUFBLEVBQUEsV0FBQSxRQUFBLEVBQUEsT0FTQSxHQUFBLE9BQUEsU0FBQSxTQUNBLEdBQUEsU0FBQSxRQUFBLHdCQUNBLFdBQUEsUUFBQSxhQUNBLFFBQ0EsTUFBQSxRQUFBLE9BQUEsUUFBQSxZQUNBLE9BQUEsUUFBQSxRQUFBLFFBQUEsYUFDQSxJQUFBLFFBQUEsS0FBQSxPQUFBLGFBQUEsV0FBQSxnQkFBQSxZQUFBLFdBQUEsZ0JBQUEsV0FBQSxHQUNBLEtBQUEsUUFBQSxNQUFBLE9BQUEsYUFBQSxXQUFBLGdCQUFBLGFBQUEsV0FBQSxnQkFBQSxZQUFBLEtBVUEsR0FBQSxTQUFBLFNBQUEsU0FFQSxHQUNBLHFCQUNBLE9BRkEsa0JBQUEsSUFBQSxFQUFBLEtBQUEsRUE0QkEsT0F2QkEsVUFBQSxHQUFBLElBQUEsUUFBQSxZQUdBLE9BQUEsUUFBQSx5QkFLQSxvQkFBQSxhQUFBLFNBQ0EsT0FBQSxHQUFBLE9BQUEsU0FHQSxPQUFBLEdBQUEsT0FBQSxTQUNBLFNBQUEsb0JBQUEsVUFDQSxpQkFBQSxHQUFBLE9BQUEsc0JBSUEsaUJBQUEsS0FBQSxHQUFBLElBQUEsb0JBQUEsa0JBQUEsR0FDQSxpQkFBQSxNQUFBLEdBQUEsSUFBQSxvQkFBQSxtQkFBQSxLQUtBLE1BQUEsUUFBQSxZQUNBLE9BQUEsUUFBQSxhQUNBLElBQUEsT0FBQSxJQUFBLGlCQUFBLElBQUEsR0FBQSxJQUFBLFFBQUEsYUFBQSxHQUNBLEtBQUEsT0FBQSxLQUFBLGlCQUFBLEtBQUEsR0FBQSxJQUFBLFFBQUEsY0FBQSxJQVVBLElBQUEsY0FBQSxTQUFBLFNBQ0EsR0FBQSxZQUFBLFFBQUEsY0FDQSxhQUFBLFFBQUEsY0FBQSxVQUNBLElBQUEsU0FBQSxhQUFBLGFBQUEsTUFBQSxZQUFBLGVBQ0EsTUFBQSxlQUFBLFNBQUEsYUFBQSxTQUFBLFdBQUEsR0FBQSxJQUFBLGFBQUEsYUFDQSxhQUFBLGFBQUEsWUFFQSxPQUFBLGVBQUEsV0FBQSxnQkFxQ0EsT0EzQkEsSUFBQSxPQUFBLFNBQUEsUUFBQSxPQUNBLEdBQUEsT0FBQSxRQUFBLFlBTUEsT0FMQSxPQUNBLE9BQUEsR0FBQSxJQUFBLFFBQUEsYUFBQSxHQUFBLEdBQUEsSUFBQSxRQUFBLGdCQUFBLEdBRUEsT0FBQSxHQUFBLElBQUEsUUFBQSxjQUFBLEdBQUEsR0FBQSxJQUFBLFFBQUEsaUJBQUEsR0FBQSxHQUFBLElBQUEsUUFBQSxrQkFBQSxHQUFBLEdBQUEsSUFBQSxRQUFBLHFCQUFBLEdBRUEsT0FVQSxHQUFBLE1BQUEsU0FBQSxRQUFBLE9BQ0EsR0FBQSxPQUFBLFFBQUEsV0FNQSxPQUxBLE9BQ0EsT0FBQSxHQUFBLElBQUEsUUFBQSxjQUFBLEdBQUEsR0FBQSxJQUFBLFFBQUEsZUFBQSxHQUVBLE9BQUEsR0FBQSxJQUFBLFFBQUEsZUFBQSxHQUFBLEdBQUEsSUFBQSxRQUFBLGdCQUFBLEdBQUEsR0FBQSxJQUFBLFFBQUEsbUJBQUEsR0FBQSxHQUFBLElBQUEsUUFBQSxvQkFBQSxHQUVBLE9BR0EsTUFLQSxRQUFBLE9BQUEsMENBRUEsU0FBQSxnQkFBQSxXQUVBLEdBQUEsVUFBQSxLQUFBLFVBQ0EsT0FBQSwrS0FHQSxNQUFBLE1BQUEsU0FBQSxLQUFBLFNBQUEsT0FBQSxJQUVBLFFBQUEscUJBQUEsS0FBQSxRQStCQSxRQUFBLGFBQUEsT0FBQSxPQUNBLE1BQUEsUUFBQSxJQUFBLFNBQUEsTUFBQSxPQUNBLEdBQUEsT0FBQSxNQUFBLFNBSUEsT0FIQSxRQUFBLFdBQUEsTUFDQSxNQUFBLFVBQUEsTUFBQSxRQUNBLE1BQUEsUUFBQSxNQUFBLFNBQUEsT0FDQSxNQUFBLE1BQUEsTUFBQSxTQW5DQSxHQUFBLGtCQUdBLFFBQUEsUUFBQSxVQUFBLFNBQUEsT0FDQSxlQUFBLFVBR0EsSUFBQSxPQUFBLFVBQUEsVUFBQSxRQUFBLFVBQUEsUUFBQSxRQWlDQSxPQS9CQSxlQUFBLEtBQUEsV0FDQSxjQUFBLE9BQUEsTUFBQSxLQUFBLE1BQUEsUUFBQSxRQUNBLFVBQUEsT0FBQSxNQUFBLElBQUEsTUFBQSxJQUNBLFVBQUEsTUFBQSxJQUFBLE1BQUEsR0FDQSxRQUFBLE1BQUEsR0FDQSxVQUFBLE9BQUEsTUFBQSxJQUFBLElBQ0EsUUFBQSxPQUFBLE1BQUEsR0FBQSxNQUFBLEdBQUEsV0FDQSxTQUFBLE9BQUEsTUFBQSxLQUdBLGNBQUEsU0FBQSxTQUFBLE1BQUEsWUFDQSxNQUFBLElBQUEsS0FBQSxTQUFBLE1BQUEsYUFDQSxLQUFBLFNBQUEsUUFFQSxNQURBLGVBQUEsUUFBQSxPQUFBLFlBQUEsT0FBQSxVQUNBLGNBQUEsV0FnQkEsY0FBQSxPQUNBLGNBSUEsTUFBQSx5QkFPQSxRQUFBLFFBQUEsTUFBQSxHQUFBLFFBQUEsUUFBQSxJQUFBLElBQUEsUUFBQSxPQUFBLE1BRUEsUUFBQSxTQUFBLFVBQUEsV0FBQSxTQUFBLFFBQUEsVUFFQSxHQUFBLHVCQUFBLFFBQUEsdUJBQ0EsUUFBQSw2QkFDQSxRQUFBLHlCQUVBLHFCQUFBLFFBQUEsc0JBQ0EsUUFBQSw0QkFDQSxRQUFBLHlCQUNBLFFBQUEsa0NBRUEsZUFBQSxzQkFDQSxJQUFBLGFBQ0EsU0FBQSxJQUNBLEdBQUEsSUFBQSxzQkFBQSxHQUNBLE9BQUEsWUFDQSxxQkFBQSxNQUdBLFNBQUEsSUFDQSxHQUFBLE9BQUEsU0FBQSxHQUFBLE9BQUEsRUFDQSxPQUFBLFlBQ0EsU0FBQSxPQUFBLFFBTUEsT0FGQSxLQUFBLFVBQUEsYUFFQSxPQXdCQSxRQUFBLE9BQUEsd0JBQUEsc0NBRUEsU0FBQSxTQUFBLFdBRUEsR0FBQSxVQUFBLEtBQUEsVUFDQSxVQUFBLFVBQ0Esa0JBQUEsVUFDQSxZQUFBLFFBQ0EsWUFBQSxRQUNBLFVBQUEsTUFDQSxTQUFBLHVCQUNBLGlCQUFBLEVBQ0EsV0FBQSxFQUNBLFFBQUEsS0FDQSxVQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBR0E7S0FBQSxNQUFBLFVBQUEsYUFBQSxXQUFBLEtBQUEsaUJBQUEsUUFBQSxXQUFBLFdBQUEsT0FBQSxhQUFBLFNBQUEsUUFBQSxXQUFBLFNBQUEsR0FBQSxlQUFBLE1BQUEsU0FBQSxTQUFBLE1BUUEsUUFBQSxjQUFBLFFBK0xBLFFBQUEscUJBQUEsS0FDQSxJQUFBLFNBQUEsSUFBQSxnQkFDQSxXQUFBLFFBQUEsU0FBQSxPQUFBLFFBQUEsT0FBQSxRQS9MQSxHQUFBLFdBR0EsUUFBQSxPQUFBLFNBQUEsUUFBQSxVQUFBLFNBQUEsT0FDQSxRQUFBLFNBQUEsY0FBQSxRQUFBLFNBQ0EsSUFBQSxPQUFBLE9BQUEsT0FBQSxRQUFBLE9BQUEsUUFBQSxNQUFBLFFBQUEsV0FBQSxNQUNBLFNBQUEsU0FBQSxRQUFBLFlBQ0EsUUFBQSxVQUFBLFFBSUEsU0FBQSxRQUFBLFdBQUEsU0FBQSxLQUNBLFFBQUEsT0FBQSxNQUFBLEtBQUEsS0FBQSxZQUFBLFFBQUEsU0FJQSxNQUFBLE1BQUEsV0FDQSxNQUFBLGFBQUEsV0FDQSxPQUFBLFVBR0EsTUFBQSxNQUFBLFdBQ0EsTUFBQSxhQUFBLFdBQ0EsT0FBQSxVQUdBLE1BQUEsUUFBQSxXQUNBLE1BQUEsYUFBQSxXQUNBLE9BQUEsWUFLQSxRQUFBLGtCQUNBLE9BQUEsU0FBQSxPQUFBLFNBQUEsS0FBQSxTQUFBLFVBQ0EsR0FBQSxZQUFBLFFBQUEsUUFBQSxTQUNBLE9BQUEsZUFBQSxRQUFBLGlCQUNBLEtBQUEsU0FBQSxpQkFDQSxHQUFBLFdBQUEsWUFBQSxzQkFBQSxXQUFBLElBQUEsV0FBQSxXQUFBLEtBQUEsZ0JBR0EsT0FEQSxRQUFBLFVBQUEsVUFBQSxPQUFBLFNBQ0EsV0FBQSxHQUFBLGNBTUEsSUFBQSxhQUFBLGFBQ0EsZ0JBQUEsUUFBQSxRQUFBLGVBQUEsUUFBQSxZQUFBLGVBa0pBLE9BakpBLFFBQUEsU0FBQSxLQUFBLFNBQUEsVUFDQSxRQUFBLFNBQUEsWUFBQSxTQUFBLFNBQUEsTUFDQSxRQUFBLE9BQUEsU0FBQSxTQUFBLFFBQUEsa0JBQUEsbUJBQ0EsU0FBQSxLQUFBLE1BQUEsVUFDQSxZQUFBLFNBQUEsVUFDQSxPQUFBLFNBR0EsT0FBQSxLQUFBLFdBR0EsUUFBQSxNQUNBLE1BQUEsYUFBQSxXQUNBLE9BQUEsVUFNQSxPQUFBLFFBQUEsV0FHQSxlQUNBLGFBQUEsU0FDQSxhQUFBLE1BRUEsa0JBQ0EsZ0JBQUEsU0FDQSxnQkFBQSxNQUlBLE1BQUEsWUFJQSxPQUFBLEtBQUEsV0FFQSxNQUFBLE1BQUEsUUFBQSxZQUFBLGVBQUEsT0FDQSxJQUFBLE9BRUEsUUFEQSxRQUFBLFVBQUEsUUFBQSxXQUNBLFFBQUEsVUFFQSxRQUFBLFVBQUEsWUFBQSxRQUFBLFdBQUEsSUFFQSxJQUFBLE9BQUEsUUFBQSxVQUFBLEtBQUEsUUFBQSxPQUdBLGNBQUEsT0FBQSxTQUFBLFlBQUEsTUFBQSxjQUdBLGFBQUEsS0FBQSxRQUFBLFVBQUEsU0FBQSxRQUFBLFdBR0EsUUFBQSxZQUNBLFFBQUEsVUFDQSxnQkFBQSxTQUFBLFFBQUEsbUJBRUEsYUFBQSxTQUFBLFFBQUEsWUFHQSxRQUFBLFVBQ0EsU0FBQSxNQUFBLGdCQUFBLFlBQUEsS0FBQSxjQUVBLFNBQUEsTUFBQSxhQUFBLE9BQUEsTUFBQSxXQUNBLE1BQUEsTUFBQSxRQUFBLFlBQUEsUUFBQSxVQUVBLE1BQUEsVUFBQSxFQUNBLE1BQUEsU0FBQSxNQUFBLE9BQUEsTUFBQSxNQUFBLFNBQUEsTUFBQSxTQUdBLElBQUEsSUFBQSxhQUFBLEVBQ0EsdUJBQUEsV0FDQSxHQUFBLFVBR0EsWUFBQSxTQUFBLFFBQUEsWUFBQSxTQUNBLFFBQUEsV0FDQSxZQUFBLFNBQUEsUUFBQSxZQUFBLFNBQUEsUUFBQSxXQUlBLFFBQUEsV0FDQSxhQUFBLEdBQUEsUUFBQSxxQkFDQSxnQkFBQSxHQUFBLFFBQUEsc0JBRUEsUUFBQSxVQUNBLGFBQUEsR0FBQSxRQUFBLE9BQUEsV0FJQSxPQUFBLEtBQUEsV0FFQSxNQUFBLE1BQUEsUUFBQSxZQUFBLGVBQUEsUUFDQSxTQUFBLE1BQUEsYUFBQSxXQUNBLE1BQUEsTUFBQSxRQUFBLFlBQUEsUUFBQSxRQUNBLFlBQUEsWUFBQSxRQUFBLFlBQUEsU0FDQSxRQUFBLFdBQ0EsWUFBQSxZQUFBLFFBQUEsWUFBQSxTQUFBLFFBQUEsYUFHQSxRQUFBLFVBQ0EsU0FBQSxNQUFBLGdCQUFBLGNBRUEsTUFBQSxVQUFBLEVBQ0EsTUFBQSxTQUFBLE1BQUEsT0FBQSxNQUFBLE1BQUEsU0FBQSxNQUFBLFVBR0EsUUFBQSxXQUNBLGFBQUEsSUFBQSxRQUFBLHFCQUNBLGdCQUFBLElBQUEsUUFBQSxzQkFFQSxRQUFBLFVBQ0EsYUFBQSxJQUFBLFFBQUEsT0FBQSxXQUlBLE9BQUEsT0FBQSxXQUVBLE1BQUEsU0FBQSxPQUFBLE9BQUEsT0FBQSxRQUlBLE9BQUEsTUFBQSxXQUNBLGFBQUEsR0FBQSxTQUtBLE9BQUEsU0FBQSxTQUFBLEtBRUEsS0FBQSxJQUFBLE9BQUEsTUFBQSxXQUNBLE9BQUEsT0FDQSxJQUFBLG9CQVlBLE9BTUEsUUFBQSxhQUFBLE1BQUEsU0FDQSxNQUFBLFNBQUEsU0FBQSxTQUFBLFVBQUEsaUJBQUEsUUFHQSxRQUFBLGVBQUEsVUFDQSxNQUFBLElBQUEsS0FBQSxlQUFBLElBQUEsV0FBQSxNQUFBLElBQUEsV0FDQSxLQUFBLFNBQUEsS0FDQSxNQUFBLFNBQUEsU0FBQSxNQUNBLGVBQUEsSUFBQSxTQUFBLElBQUEsTUFDQSxJQUFBLE1BRUEsTUEzTkEsR0FBQSxTQUFBLFFBQUEsUUFDQSxLQUFBLE9BQUEsVUFBQSxLQUNBLHNCQUFBLFFBQUEsdUJBQUEsUUFBQSxXQUNBLFlBQUEsUUFBQSxRQUFBLFFBQUEsU0FBQSxNQUNBLGtCQUFBLGFBMk5BLE9BQUEsa0JBTUEsVUFBQSxXQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsUUFBQSxLQUFBLFFBRUEsT0FDQSxTQUFBLE1BQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFHQSxHQUFBLFVBQUEsTUFBQSxNQUFBLFFBQUEsUUFBQSxNQUFBLEVBQ0EsU0FBQSxTQUFBLFdBQUEsa0JBQUEsWUFBQSxXQUFBLFdBQUEsT0FBQSxZQUFBLGFBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsUUFJQSxRQUFBLFNBQUEsUUFBQSxXQUFBLFNBQUEsS0FDQSxLQUFBLE1BQUEsS0FBQSxTQUFBLElBQUEsU0FBQSxVQUNBLE1BQUEsS0FBQSxLQUFBLFlBQUEsY0FLQSxLQUFBLFNBQUEsTUFBQSxPQUFBLEtBQUEsUUFBQSxTQUFBLFVBQ0EsUUFBQSxTQUFBLFVBQ0EsUUFBQSxPQUFBLE1BQUEsVUFFQSxNQUFBLFFBQUEsV0FFQSxFQUdBLElBQUEsT0FBQSxPQUFBLFFBR0EsU0FBQSxHQUFBLEtBQUEsU0FBQSxRQUFBLE1BQUEsUUFHQSxNQUFBLElBQUEsV0FBQSxXQUNBLE9BQUEsTUFBQSxVQUNBLFFBQUEsS0FDQSxNQUFBLFlBU0EsUUFBQSxPQUFBLDRCQUVBLFNBQUEsVUFBQSxXQUVBLEdBQUEsVUFBQSxLQUFBLFVBQ0EsWUFBQSxTQUNBLFVBQUEsbUJBQ0EsUUFBQSxFQUdBLE1BQUEsS0FBQSxXQUNBLE9BQUEsU0FBQSxhQUtBLFVBQUEsWUFBQSxVQUFBLFlBQUEsVUFBQSxTQUFBLFFBQUEsVUFBQSxTQUVBLEdBQUEsVUFBQSxRQUFBLFFBRUEsUUFDQSxTQUFBLElBQ0EsS0FBQSxTQUFBLE1BQUEsUUFBQSxNQUdBLEdBQUEsU0FBQSxRQUFBLEtBQUEsU0FDQSxTQUFBLFFBQUEsT0FBQSxLQUFBLFVBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsUUFJQSxNQUFBLE9BQUEsV0FFQSxNQUFBLFdBQUEsUUFFQSxTQUFBLFVBRUEsR0FBQSxZQUFBLFFBQUEsR0FBQSxpQkFBQSxNQUFBLFFBQUEsVUFBQSxJQUVBLFNBQUEsUUFBQSxXQUFBLFNBQUEsSUFFQSxHQUFBLFdBQUEsUUFBQSxRQUFBLElBQ0EsUUFBQSxVQUFBLEtBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxNQUNBLFNBQUEsU0FDQSxRQUFBLElBQUEsUUFBQSxJQUVBLElBQUEsUUFBQSxHQUFBLFFBQUEsU0FBQSxLQUVBLFFBQUEsS0FBQSxVQUNBLFVBQUEsU0FBQSxRQUFBLGFBRUEsVUFBQSxZQUFBLFFBQUEsc0JBY0EsUUFBQSxPQUFBLDBCQUFBLDJCQUVBLFNBQUEsV0FBQSxXQUVBLEdBQUEsVUFBQSxLQUFBLFVBQ0EsVUFBQSxVQUNBLFlBQUEsR0FDQSxXQUFBLEVBQ0EsUUFBQSxFQUNBLFVBQUEsUUFDQSxTQUFBLDJCQUNBLGlCQUFBLEVBQ0EsUUFBQSxRQUNBLFVBQUEsRUFDQSxNQUFBLEVBQ0EsTUFBQSxHQUNBLFFBQUEsR0FDQSxNQUFBLEVBR0EsTUFBQSxNQUFBLFdBQUEsU0FBQSxVQUVBLFFBQUEsZ0JBQUEsUUFBQSxRQUdBLEdBQUEsU0FBQSxRQUFBLFVBQUEsU0FBQSxRQUVBLFNBQUEsU0FBQSxRQUFBLFFBT0EsT0FKQSxTQUFBLFVBQ0EsU0FBQSxPQUFBLFFBQUEsUUFBQSxTQUdBLFNBSUEsTUFBQSxvQkFNQSxVQUFBLGFBQUEsVUFBQSxPQUFBLFdBQUEsU0FBQSxRQUFBLEtBQUEsVUFFQSxHQUFBLHVCQUFBLFFBQUEsdUJBQUEsUUFBQSxVQUVBLFFBQ0EsU0FBQSxNQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BR0EsR0FBQSxVQUFBLE1BQUEsTUFDQSxTQUFBLFNBQUEsV0FBQSxrQkFBQSxZQUFBLFlBQUEsU0FBQSxRQUFBLFVBQUEsV0FBQSxPQUFBLFlBQUEsZUFBQSxTQUFBLEtBQ0EsUUFBQSxVQUFBLEtBQUEsUUFBQSxRQUFBLEtBQUEsS0FBQSxRQUlBLFFBQUEsU0FBQSxRQUFBLFdBQUEsU0FBQSxLQUNBLEtBQUEsTUFBQSxLQUFBLFNBQUEsSUFBQSxTQUFBLFNBQUEsVUFDQSxNQUFBLEtBQUEsS0FBQSxZQUFBLFVBQ0EsUUFBQSxVQUFBLFdBQUEsc0JBQUEsV0FDQSxTQUFBLFFBQUEsd0JBTUEsS0FBQSxXQUFBLE1BQUEsT0FBQSxLQUFBLFVBQUEsU0FBQSxTQUFBLFVBQ0EsUUFBQSxTQUFBLFVBQ0EsUUFBQSxPQUFBLE1BQUEsVUFFQSxNQUFBLFFBQUEsU0FFQSxRQUFBLFVBQUEsV0FBQSxzQkFBQSxXQUNBLFNBQUEsUUFBQSxzQkFFQSxHQUdBLEtBQUEsUUFBQSxNQUFBLE9BQUEsS0FBQSxPQUFBLFNBQUEsVUFDQSxTQUFBLFFBQUEsVUFBQSxZQUNBLFFBQUEsU0FBQSxZQUFBLFdBQUEsU0FBQSxNQUFBLGtCQUNBLFlBQUEsRUFBQSxRQUFBLE9BQUEsUUFBQSxTQUlBLElBQUEsU0FBQSxTQUFBLFFBQUEsUUFHQSxPQUFBLElBQUEsV0FBQSxXQUNBLFNBQUEsUUFBQSxVQUNBLFFBQUEsS0FDQSxRQUFBLFlBU0EsUUFBQSxPQUFBLDRCQUFBLGtDQUFBLHNDQUVBLFNBQUEsYUFBQSxXQUdBLEdBQUEsT0FBQSxLQUFBLFdBRUEsU0FBQSxLQUFBLFVBQ0EsU0FBQSxJQUNBLFNBQUEsSUFDQSxPQUFBLElBR0EsTUFBQSxNQUFBLFVBQUEsWUFBQSxhQUFBLGFBQUEsV0FBQSxXQUFBLFNBQUEsUUFBQSxVQUFBLFdBQUEsV0FBQSxTQUFBLFVBUUEsUUFBQSxVQUFBLFFBQUEsTUFDQSxNQUFBLFNBQUEsR0FBQSxVQUFBLFFBQUEsR0FBQSxTQUFBLGdCQUFBLEtBQUEsY0FHQSxRQUFBLGtCQUFBLFFBR0EsR0FBQSxTQUFBLFFBQUEsVUFBQSxTQUFBLE9BQ0EsU0FBQSxVQUFBLFFBQUEsUUFBQSxPQUNBLElBQUEsYUFBQSxTQUFBLFFBQUEsUUFBQSxRQUNBLFNBQUEsWUFBQSxTQUFBLFFBQUEsUUFDQSxTQUFBLFlBQUEsU0FBQSxRQUFBLEVBR0EsSUFBQSxNQUFBLFVBRUEsTUFEQSxPQUFBLFVBQUEsVUFDQSxNQUFBLFNBR0EsSUFHQSx5QkFBQSwyQkFHQSxhQUNBLHVCQUNBLHVCQUNBLHNCQUNBLGVBQ0EsVUFYQSxjQUlBLGdCQUFBLFdBQUEsb0JBQ0EsaUJBdUpBLE9BL0lBLFlBQUEsS0FBQSxXQUdBLEtBQUEsUUFBQSxFQUdBLHVCQUFBLFNBQUEsS0FBQSxjQUFBLFFBQUEsVUFDQSx1QkFBQSxTQUFBLEtBQUEsY0FBQSxRQUFBLFVBQ0EsU0FBQSxHQUFBLFFBQUEsS0FBQSw0QkFDQSxTQUFBLEdBQUEsU0FBQSx3QkFDQSxTQUFBLEdBQUEsU0FBQSx3QkFFQSxzQkFBQSxTQUFBLEtBQUEsYUFBQSxRQUFBLFVBQ0Esd0JBQUEsV0FBQSxJQUFBLHFCQUFBLHVCQUNBLDJCQUFBLFdBQUEsSUFBQSx3QkFBQSx1QkFDQSx3QkFHQSxXQUNBLE1BQUEsVUFBQSxhQUtBLFdBQUEsUUFBQSxXQUdBLEtBQUEsVUFDQSxLQUFBLFFBQUEsSUFLQSxTQUFBLElBQUEsUUFBQSxLQUFBLDRCQUNBLFNBQUEsSUFBQSxTQUFBLHdCQUNBLFNBQUEsSUFBQSxTQUFBLHdCQUNBLDBCQUNBLDZCQUNBLGdCQUNBLE9BQUEsWUFJQSxXQUFBLGNBQUEsV0FHQSxHQUFBLGVBQUEsT0FBQSxDQVNBLEdBTkEsV0FBQSxZQUFBLFFBQUEsWUFBQSxTQUFBLEtBQUEsZUFBQSxFQUdBLGVBQUEsS0FBQSxJQUFBLFFBQUEsWUFBQSxNQUFBLEtBQUEsaUJBR0EsVUFBQSxlQUFBLEdBQUEsV0FBQSxlQUFBLGVBQUEsR0FBQSxPQUNBLE1BQUEsWUFBQSxpQkFBQSxlQUFBLEdBSUEsS0FBQSxHQUFBLEdBQUEsZUFBQSxPQUFBLEtBQ0EsSUFBQSxRQUFBLFlBQUEsZUFBQSxHQUFBLFlBQUEsT0FBQSxlQUFBLEdBQUEsV0FDQSxlQUFBLGVBQUEsR0FBQSxVQUNBLFVBQUEsZUFBQSxHQUFBLFdBQ0EsZUFBQSxFQUFBLElBQUEsVUFBQSxlQUFBLEVBQUEsR0FBQSxXQUNBLE1BQUEsWUFBQSxpQkFBQSxlQUFBLE1BS0EsV0FBQSwyQkFBQSxXQUNBLFdBQUEsS0FBQSxjQUFBLElBS0EsV0FBQSxpQkFBQSxTQUFBLFNBQ0EsR0FBQSxhQUFBLENBQ0EsR0FBQSxlQUFBLFdBQUEsbUJBQUEsYUFDQSxpQkFDQSxjQUFBLE9BQUEsWUFBQSxVQUNBLFNBQUEsY0FBQSxPQUFBLE9BQUEsU0FBQSxjQUFBLE9BQUEsU0FBQSxTQUFBLE9BQ0EsY0FBQSxPQUFBLFNBQUEsU0FBQSxZQUFBLFdBSUEsYUFBQSxRQUFBLE9BQ0EsUUFBQSxPQUFBLFNBQUEsVUFDQSxTQUFBLFFBQUEsT0FBQSxPQUFBLFNBQUEsUUFBQSxPQUFBLFNBQUEsU0FBQSxPQUNBLFFBQUEsT0FBQSxTQUFBLFNBQUEsU0FBQSxXQUlBLFdBQUEsbUJBQUEsU0FBQSxRQUNBLE1BQUEsaUJBQUEsT0FBQSxTQUFBLEtBQ0EsTUFBQSxLQUFBLFNBQUEsU0FDQSxJQUtBLFdBQUEsYUFBQSxXQUVBLFFBQUEsUUFBQSxnQkFBQSxTQUFBLGdCQUNBLEdBQUEsZUFBQSxTQUFBLGNBQUEsZUFBQSxPQUNBLGdCQUFBLFVBQUEsY0FBQSxXQUFBLE9BQUEsZUFBQSxJQUFBLEtBQ0EsUUFBQSxRQUFBLE9BQUEsZUFBQSxZQUFBLGVBQUEsV0FBQSxFQUFBLFFBQUEsVUFHQSxlQUFBLGdCQUNBLE9BQUEsU0FBQSxJQUNBLE1BQUEsUUFBQSxHQUFBLFlBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsVUFBQSxFQUFBLFlBR0EsMEJBSUEsV0FBQSxhQUFBLFNBQUEsT0FBQSxRQUNBLGdCQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsVUFHQSxXQUFBLGVBQUEsU0FBQSxPQUFBLFFBRUEsSUFBQSxHQURBLFVBQ0EsRUFBQSxnQkFBQSxPQUFBLEtBQ0EsR0FBQSxnQkFBQSxHQUFBLFNBQUEsUUFBQSxnQkFBQSxHQUFBLFNBQUEsT0FBQSxDQUNBLFNBQUEsQ0FDQSxPQUdBLGdCQUFBLGdCQUFBLE9BQUEsU0FBQSxJQUdBLFdBQUEsU0FBQSxTQUFBLEdBQ0EsZ0JBQUEsR0FBQSxTQUFBLFdBS0EsV0FBQSxPQUNBLFdBckxBLEdBQUEsVUFBQSxRQUFBLFFBQUEsU0FDQSxNQUFBLFFBQUEsUUFBQSxVQUFBLEtBQUEsb0JBQ0EsT0FBQSxRQUFBLFFBQUEsUUFBQSxTQUFBLEtBdUxBLE9BQUEsc0JBTUEsVUFBQSxlQUFBLGFBQUEsV0FBQSxhQUFBLGFBQUEsU0FBQSxXQUFBLFNBQUEsV0FBQSxZQUVBLE9BQ0EsU0FBQSxNQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFFQSxHQUFBLFVBQUEsTUFBQSxNQUNBLFNBQUEsU0FBQSxTQUFBLFVBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsT0FHQSxJQUFBLFdBQUEsV0FBQSxRQUNBLFdBQUEsYUFBQSxRQUFBLE9BQUEsU0FFQSxNQUFBLElBQUEsV0FBQSxXQUNBLFlBQ0EsVUFBQSxlQUFBLFFBQUEsT0FBQSxTQUNBLFVBQUEsV0FFQSxRQUFBLEtBQ0EsVUFBQSxZQVNBLFVBQUEsbUJBQUEsYUFBQSxXQUFBLGFBQUEsYUFBQSxXQUVBLE9BQ0EsU0FBQSxJQUNBLFFBQUEsU0FBQSxTQUNBLEdBQUEsVUFBQSxRQUFBLEdBQUEsaUJBQUEsZUFDQSxTQUFBLFFBQUEsU0FBQSxTQUFBLE9BQ0EsR0FBQSxTQUFBLFFBQUEsUUFBQSxNQUNBLFNBQUEsU0FBQSxLQUFBLGVBQUEsSUFBQSxLQUFBLGNBQUEsUUFBQSxLQUFBLGdCQVNBLFFBQUEsT0FBQSx5QkFBQSx5QkFBQSx3Q0FFQSxTQUFBLFVBQUEsV0FFQSxHQUFBLFVBQUEsS0FBQSxVQUNBLFVBQUEsVUFDQSxZQUFBLFNBQ0EsWUFBQSxVQUNBLFVBQUEsY0FDQSxTQUFBLHlCQUNBLFFBQUEsUUFDQSxXQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBQ0EsVUFBQSxFQUNBLGdCQUFBLEVBQ0EsTUFBQSxFQUNBLFVBQUEsb0NBQ0EsWUFBQSxnQ0FDQSxVQUFBLEVBQ0EsY0FBQSxXQUNBLGNBQUEseUJBR0EsTUFBQSxNQUFBLFVBQUEsWUFBQSxhQUFBLFdBQUEsU0FBQSxRQUFBLFVBQUEsV0FBQSxVQU1BLFFBQUEsZUFBQSxRQUFBLFdBQUEsUUFFQSxHQUFBLFlBR0EsUUFBQSxRQUFBLFVBQUEsU0FBQSxPQUVBLFNBQUEsU0FBQSxRQUFBLFFBQ0EsSUFBQSxPQUFBLFFBQUEsTUFFQSxPQUFBLFlBQ0EsTUFBQSxhQUFBLEVBQ0EsTUFBQSxZQUFBLFFBQUEsU0FDQSxNQUFBLG9CQUFBLFFBQUEsZ0JBQUEsUUFBQSxTQUNBLE1BQUEsZUFBQSxRQUFBLGNBRUEsTUFBQSxVQUFBLFNBQUEsT0FDQSxNQUFBLGFBQUEsV0FDQSxRQUFBLFNBQUEsVUFJQSxNQUFBLFFBQUEsU0FBQSxPQUNBLE1BQUEsYUFBQSxXQUNBLFFBQUEsT0FBQSxVQUlBLE1BQUEsV0FBQSxXQUNBLE1BQUEsU0FBQSxjQUdBLE1BQUEsVUFBQSxTQUFBLE9BQ0EsTUFBQSxTQUFBLFVBQUEsUUFHQSxNQUFBLFdBQUEsV0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxTQUFBLE9BQUEsSUFDQSxNQUFBLFVBQUEsSUFDQSxNQUFBLFFBQUEsSUFLQSxNQUFBLFlBQUEsV0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxTQUFBLE9BQUEsSUFDQSxNQUFBLFVBQUEsSUFDQSxNQUFBLFFBQUEsSUFPQSxRQUFBLE9BQUEsU0FBQSxTQUNBLE1BQUEsU0FBQSxRQUNBLFFBQUEsc0JBR0EsUUFBQSxTQUFBLFNBQUEsT0FRQSxNQVBBLFNBQUEsVUFDQSxNQUFBLGFBQUEsT0FDQSxRQUFBLFVBQUEsT0FBQSxNQUFBLGFBQUEsT0FBQSxNQUFBLGFBQUEsUUFBQSxPQUFBLEdBQUEsTUFBQSxhQUFBLEtBQUEsT0FDQSxRQUFBLE1BQUEsTUFBQSxhQUFBLFFBRUEsTUFBQSxhQUFBLE1BRUEsTUFBQSxjQUdBLFFBQUEsT0FBQSxTQUFBLE9BQ0EsR0FBQSxPQUFBLE1BQUEsU0FBQSxPQUFBLEtBQ0EsT0FBQSxPQUFBLFdBQ0EsUUFBQSxTQUFBLE9BQ0EsUUFBQSxTQUNBLFdBQUEsY0FBQSxNQUFBLGFBQUEsSUFBQSxTQUFBLE9BQ0EsTUFBQSxPQUFBLFNBQUEsT0FBQSxVQUdBLFdBQUEsY0FBQSxPQUVBLFFBQUEsVUFJQSxNQUFBLE1BQUEsUUFBQSxZQUFBLFVBQUEsTUFBQSxRQUtBLFFBQUEsbUJBQUEsV0FDQSxXQUFBLGFBQUEsTUFBQSxTQUFBLE9BRUEsTUFBQSxhQURBLFFBQUEsVUFBQSxRQUFBLFFBQUEsV0FBQSxhQUNBLFdBQUEsWUFBQSxJQUFBLFNBQUEsT0FDQSxNQUFBLFNBQUEsVUFBQSxTQUdBLFFBQUEsVUFBQSxXQUFBLGFBRUEsTUFBQSxjQUFBLE1BQUEsU0FBQSxTQUNBLE1BQUEsYUFBQSxRQUFBLFlBQUEsSUFJQSxRQUFBLFdBQUEsV0FDQSxNQUFBLFNBQUEsV0FBQSxXQUlBLE1BQUEsU0FBQSxRQUFBLFdBQUEsV0FBQSxRQUFBLFFBQUEsVUFIQSxNQUFBLFNBQUEsUUFNQSxRQUFBLFVBQUEsU0FBQSxPQUNBLE1BQUEsU0FBQSxTQUNBLEtBQUEsTUFBQSxhQUFBLFFBQUEsT0FFQSxNQUFBLGVBQUEsT0FJQSxRQUFBLFVBQUEsU0FBQSxPQUNBLEdBQUEsR0FBQSxNQUFBLFNBQUEsT0FBQSxFQUFBLENBQ0EsSUFBQSxFQUFBLENBQ0EsSUFBQSxFQUFBLEVBQUEsS0FDQSxNQUFBLFNBQUEsR0FBQSxRQUFBLFFBRUEsS0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUdBLFFBQUEsYUFBQSxTQUFBLEtBS0EsR0FIQSxJQUFBLGlCQUNBLElBQUEsa0JBRUEsUUFBQSxDQUNBLEdBQUEsVUFBQSxRQUFBLFFBQUEsSUFBQSxPQUNBLFVBQUEsZUFBQSxXQUlBLFFBQUEsV0FBQSxTQUFBLEtBQ0EsR0FBQSxlQUFBLEtBQUEsSUFBQSxTQUFBLENBS0EsR0FKQSxJQUFBLGlCQUNBLElBQUEsbUJBR0EsUUFBQSxXQUFBLEtBQUEsSUFBQSxTQUFBLElBQUEsSUFBQSxTQUNBLE1BQUEsU0FBQSxPQUFBLE1BQUEsYUFJQSxNQUFBLElBQUEsU0FBQSxNQUFBLGFBQUEsRUFBQSxNQUFBLGVBQ0EsS0FBQSxJQUFBLFNBQUEsTUFBQSxhQUFBLE1BQUEsU0FBQSxPQUFBLEVBQUEsTUFBQSxlQUNBLFFBQUEsWUFBQSxNQUFBLGdCQUFBLE1BQUEsYUFBQSxHQUNBLE1BQUEsV0FLQSxJQUFBLE9BQUEsUUFBQSxJQUNBLFNBQUEsS0FBQSxXQUNBLFFBQ0EsUUFBQSxVQUNBLFFBQUEsU0FBQSxTQUFBLG1CQUVBLFdBQUEsV0FDQSxRQUFBLFNBQUEsR0FBQSxRQUFBLGFBQUEsWUFBQSxRQUFBLGNBQ0EsUUFBQSxVQUNBLFFBQUEsR0FBQSxVQUFBLFFBQUEsY0FLQSxJQUFBLE9BQUEsUUFBQSxJQVNBLE9BUkEsU0FBQSxLQUFBLFdBQ0EsUUFBQSxTQUFBLElBQUEsUUFBQSxhQUFBLFlBQUEsUUFBQSxjQUNBLFFBQUEsVUFDQSxRQUFBLElBQUEsVUFBQSxRQUFBLFlBRUEsT0FBQSxJQUdBLFFBM0xBLEdBQ0EsV0FEQSxRQUFBLFFBQUEsUUFBQSxTQUFBLE1BQ0EsOEJBQUEsS0FBQSxRQUFBLFVBQUEsWUFDQSxRQUFBLGVBQUEsU0FBQSxVQUFBLFFBOExBLE9BREEsZUFBQSxTQUFBLFNBQ0Esa0JBTUEsVUFBQSxZQUFBLFVBQUEsU0FBQSxLQUFBLFVBQUEsZ0JBQUEsU0FBQSxRQUFBLE9BQUEsR0FBQSxRQUFBLGVBRUEsR0FBQSxVQUFBLFFBQUEsUUFFQSxRQUNBLFNBQUEsTUFDQSxRQUFBLFVBQ0EsS0FBQSxTQUFBLE1BQUEsUUFBQSxLQUFBLFlBR0EsR0FBQSxVQUFBLE1BQUEsTUFNQSxJQUxBLFFBQUEsU0FBQSxZQUFBLFlBQUEsUUFBQSxVQUFBLFdBQUEsT0FBQSxZQUFBLFdBQUEsY0FBQSxXQUFBLGlCQUFBLFlBQUEsaUJBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsUUFJQSxXQUFBLFFBQUEsR0FBQSxTQUFBLGNBQUEsQ0FDQSxHQUFBLFNBQUEsT0FDQSxTQUFBLElBQUEsVUFBQSxRQUNBLFFBQUEsUUFBQSxRQUFBLDJEQUNBLFFBQUEsTUFBQSxTQUlBLEdBQUEsZUFBQSxjQUFBLEtBQUEsV0FHQSxPQUFBLFFBQUEsUUFBQSxXQUFBLFNBR0EsZUFBQSxjQUFBLE9BQUEsR0FBQSxRQUFBLE9BQUEsSUFBQSxNQUNBLE9BQUEsT0FBQSxlQUFBLFdBRUEsY0FBQSxTQUFBLE1BQUEsWUFDQSxLQUFBLFNBQUEsUUFDQSxPQUFBLE9BQUEsUUFDQSxXQUFBLGNBRUEsR0FHQSxNQUFBLE9BQUEsS0FBQSxRQUFBLFdBRUEsT0FBQSxxQkFDQSxXQUFBLFlBQ0EsR0FHQSxXQUFBLFFBQUEsV0FFQSxHQUFBLFVBQUEsS0FDQSxTQUFBLFVBQUEsUUFBQSxRQUFBLFdBQUEsY0FDQSxTQUFBLFdBQUEsWUFBQSxJQUFBLFNBQUEsT0FFQSxNQURBLE9BQUEsT0FBQSxVQUFBLE9BQ0EsUUFBQSxVQUFBLE9BQUEsT0FBQSxPQUFBLFNBQUEsT0FBQSxPQUFBLElBQ0EsT0FBQSxRQUFBLFdBRUEsU0FEQSxTQUFBLFFBQUEsUUFBQSxXQUFBLFNBQUEsV0FDQSxTQUFBLE9BQUEsS0FBQSxRQUFBLGVBQUEsU0FBQSxlQUVBLFNBQUEsS0FBQSxRQUdBLE1BQUEsT0FBQSxVQUFBLFdBQUEsYUFDQSxTQUFBLFFBQUEsVUFBQSxPQUFBLE9BQUEsT0FBQSxTQUFBLE9BQUEsT0FBQSxHQUVBLFFBQUEsTUFBQSxTQUFBLFNBQUEsS0FBQSxhQUFBLFNBQUEsYUFBQSxTQUFBLFlBSUEsTUFBQSxJQUFBLFdBQUEsV0FDQSxRQUFBLE9BQUEsVUFDQSxRQUFBLEtBQ0EsT0FBQSxZQVNBLFFBQUEsT0FBQSx5QkFFQSxTQUFBLE9BQUEsV0FFQSxHQUFBLFVBQUEsS0FBQSxVQUNBLFVBQUEsVUFDQSxTQUFBLG1CQUNBLFNBQUEsV0FDQSxZQUFBLFVBR0EsV0FBQSxLQUFBLFdBQUEsU0FBQSxPQUFBLFNBQUEsUUFDQSxHQUFBLE1BQUEsSUFHQSxNQUFBLFNBQUEsUUFBQSxLQUFBLFVBQ0EsUUFBQSxTQUFBLFlBQUEsV0FBQSxlQUFBLFNBQUEsS0FDQSxRQUFBLFVBQUEsT0FBQSxRQUFBLEtBQUEsU0FBQSxLQUFBLE9BQUEsUUFJQSxPQUFBLFVBQUEsS0FBQSxTQUFBLFNBQ0EsT0FBQSxhQUFBLEtBQUEsU0FBQSxZQUVBLEtBQUEsT0FBQSxPQUFBLFVBRUEsS0FBQSx3QkFFQSxLQUFBLE1BQUEsU0FBQSxNQUNBLEtBQUEsT0FBQSxLQUFBLE9BR0EsS0FBQSxPQUFBLFFBQUEsRUFDQSxLQUFBLFdBQUEsT0FBQSxXQUFBLFNBQUEsT0FDQSxLQUFBLE9BQUEsUUFBQSxNQUNBLEtBQUEscUJBQUEsUUFBQSxTQUFBLElBQ0EsUUFNQSxNQUFBLEtBQUEsV0FDQSxHQUFBLFFBR0EsT0FGQSxNQUFBLFNBQUEsU0FDQSxLQUFBLFdBQUEsV0FDQSxRQUtBLFVBQUEsVUFBQSxVQUFBLFdBQUEsT0FBQSxTQUFBLFFBQUEsU0FBQSxNQUVBLEdBQUEsVUFBQSxLQUFBLFFBRUEsUUFDQSxTQUFBLFdBQUEsVUFDQSxZQUFBLEVBQ0EsT0FBQSxFQUNBLFlBQUEsU0FBQSxXQUFBLFNBQUEsS0FBQSxZQUNBLFlBQUEsU0FBQSxRQUFBLE1BQ0EsTUFBQSxNQUFBLFVBQUEsU0FBQSxVQUVBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFBQSxhQUVBLEdBQUEsYUFBQSxZQUFBLEdBQ0EsV0FBQSxZQUFBLEVBRUEsZUFHQSxXQUFBLHFCQUFBLEtBQUEsV0FDQSxZQUFBLGNBQUEsV0FBQSxPQUFBLFdBSUEsWUFBQSxZQUFBLEtBQUEsU0FBQSxZQUdBLE1BREEsWUFBQSxXQUFBLEVBQUEsWUFDQSxtQkFVQSxVQUFBLFVBQUEsVUFBQSxXQUFBLE9BQUEsU0FBQSxRQUFBLFNBQUEsTUFFQSxPQUNBLFNBQUEsWUFBQSxXQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE1BQUEsYUFxQkEsUUFBQSxVQUNBLEdBQUEsT0FBQSxXQUFBLE9BQUEsUUFBQSxPQUNBLE9BQUEsV0FBQSxPQUFBLE9BQ0EsVUFBQSxRQUFBLE9BQUEsV0FBQSxlQUFBLFFBQUEsV0FBQSxTQUFBLGFBdEJBLEdBQ0EsYUFEQSxZQUFBLEdBQ0EsWUFBQSxHQUdBLFNBQUEsU0FBQSxZQUdBLE1BQUEsU0FBQSxRQUFBLFNBQUEsVUFDQSxNQUFBLE1BQUEsS0FBQSxZQUFBLFlBSUEsV0FBQSxTQUFBLFdBQ0EsUUFBQSxTQUFBLFdBQUEsU0FBQSxXQUlBLFdBQUEsTUFBQSxPQVFBLFdBQUEscUJBQUEsS0FBQSxXQUNBLFdBRUEsY0FRQSxRQUFBLE9BQUEsNkJBQUEsb0NBQUEsMkJBRUEsU0FBQSxjQUFBLFdBRUEsR0FBQSxVQUFBLEtBQUEsVUFDQSxVQUFBLFVBQ0EsWUFBQSxhQUNBLFVBQUEsY0FDQSxTQUFBLGlDQUNBLFFBQUEsUUFDQSxXQUFBLEVBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBRUEsV0FBQSxFQUNBLFNBQUEsT0FDQSxXQUFBLFlBQ0EsZ0JBQUEsS0FDQSxXQUFBLEVBQ0EsU0FBQSxJQUNBLFNBQUEsSUFDQSxPQUFBLEVBQ0EsU0FBQSxFQUNBLFdBQUEsRUFDQSxPQUFBLGlDQUNBLFNBQUEsbUNBQ0EsY0FBQSxRQUdBLE1BQUEsTUFBQSxVQUFBLFlBQUEsYUFBQSxPQUFBLFVBQUEsYUFBQSxXQUFBLFNBQUEsUUFBQSxVQUFBLFdBQUEsS0FBQSxRQUFBLFdBQUEsVUFPQSxRQUFBLG1CQUFBLFFBQUEsV0FBQSxRQXVNQSxRQUFBLGlCQUFBLE1BQUEsS0FDQSxHQUFBLFFBQUEsR0FBQSxnQkFBQSxDQUNBLEdBQUEsVUFBQSxRQUFBLEdBQUEsaUJBQ0EsVUFBQSxVQUFBLEdBQ0EsU0FBQSxVQUFBLFlBQUEsT0FDQSxTQUFBLFFBQUEsWUFBQSxLQUNBLFNBQUEsYUFDQSxTQUFBLEdBQUEsa0JBQ0EsUUFBQSxHQUFBLGtCQUFBLE1BQUEsS0FDQSxRQUFBLFlBQUEsUUFBQSxHQUFBLGtCQUNBLFFBQUEsR0FBQSxlQUFBLE1BQ0EsUUFBQSxHQUFBLGFBQUEsS0FJQSxRQUFBLGdCQUNBLFFBQUEsR0FBQSxRQXJOQSxHQUFBLGFBQUEsU0FBQSxRQUFBLFFBQUEsVUFBQSxTQUFBLFNBQ0EsWUFBQSxPQUFBLE1BQ0EsUUFBQSxZQUFBLFNBQ0EsTUFBQSxZQUFBLE9BSUEsY0FBQSxFQUNBLFVBQUEsV0FBQSxZQUFBLEdBQUEsTUFDQSxVQUFBLEtBQUEsVUFBQSxXQUFBLFNBQUEsVUFBQSxXQUFBLEdBQUEsT0FBQSxVQUFBLGFBQUEsT0FBQSxVQUFBLGFBQUEsWUFBQSxVQUFBLG1CQUVBLE9BQUEsUUFBQSxpQkFBQSxRQUFBLGFBQUEsUUFBQSxXQUNBLFFBQUEsNEJBQUEsS0FBQSxRQUFBLE1BQUEsRUFDQSxPQUFBLFFBQUEsUUFBQSxPQUNBLE1BQUEsVUFBQSxRQUFBLFNBSUEsTUFBQSxRQUFBLFNBQUEsS0FBQSxPQUNBLFlBQUEsT0FBQSxLQUFBLFFBRUEsTUFBQSxXQUFBLFNBQUEsTUFBQSxPQUNBLFlBQUEsV0FBQSxNQUFBLFFBRUEsTUFBQSxnQkFBQSxTQUFBLE1BQ0EsWUFBQSxlQUFBLE9BS0EsWUFBQSxPQUFBLFNBQUEsTUFFQSxRQUFBLE9BQUEsUUFBQSxNQUFBLEtBQUEsWUFDQSxZQUFBLE1BQUEsS0FDQSxRQUFBLE9BQUEsVUFBQSxLQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsYUFBQSxPQUFBLEtBQUEsYUFBQSxZQUFBLEtBQUEsb0JBQ0EsWUFBQSxVQUNBLFlBQUEsVUFDQSxZQUFBLFVBSUEsWUFBQSxPQUFBLFNBQUEsS0FBQSxNQUFBLFFBRUEsV0FBQSxZQUFBLE1BQUEsV0FBQSxXQUFBLGNBQUEsV0FBQSxXQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsSUFDQSxRQUFBLE9BQUEsUUFBQSxLQUFBLEdBQUEsTUFBQSxPQUNBLElBQUEsTUFBQSxXQUFBLFdBQUEsU0FBQSxLQUFBLFlBQ0EsSUFBQSxPQUFBLFdBQUEsV0FBQSxXQUFBLEtBQUEsY0FDQSxXQUFBLGNBQUEsV0FBQSxZQUNBLFdBQUEsVUFDQSxRQUFBLFlBQUEsTUFDQSxZQUFBLE1BQUEsSUFJQSxZQUFBLGVBQUEsU0FBQSxNQUNBLEdBQUEsUUFBQSxNQUFBLFdBQUEsWUFBQSxVQUNBLFlBQUEsV0FBQSxTQUFBLEdBQUEsTUFBQSxNQUFBLEdBQUEsTUFBQSxJQUNBLFdBQUEsY0FBQSxXQUFBLFlBQ0EsV0FBQSxXQUtBLFlBQUEsT0FBQSxXQUVBLEdBQUEsR0FDQSxLQURBLFNBQUEsTUFBQSxTQUFBLFNBQUEsUUFBQSxPQUFBLEVBQUEsSUFDQSxRQUNBLEtBQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxPQUFBLElBQ0EsS0FBQSxHQUFBLE1BQUEsS0FBQSxFQUFBLEVBQUEsU0FBQSxNQUFBLFNBQUEsR0FBQSxRQUFBLFVBQ0EsTUFBQSxNQUFBLEtBQUEsS0FBQSxNQUFBLFdBQUEsS0FBQSxRQUFBLElBQUEsU0FBQSxZQUFBLE9BQUEsWUFBQSxZQUFBLEtBQUEsR0FBQSxTQUFBLFlBQUEsWUFBQSxLQUFBLElBRUEsSUFBQSxRQUFBLFVBQ0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxRQUFBLE9BQUEsSUFDQSxPQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsUUFBQSxTQUFBLEdBQUEsUUFBQSxZQUNBLFFBQUEsTUFBQSxLQUFBLE9BQUEsTUFBQSxXQUFBLE9BQUEsUUFBQSxJQUFBLFNBQUEsWUFBQSxPQUFBLFlBQUEsWUFBQSxPQUFBLEdBQUEsU0FBQSxZQUFBLFlBQUEsT0FBQSxJQUdBLElBQUEsUUFDQSxLQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxJQUNBLEtBQUEsTUFBQSxNQUFBLEdBQUEsUUFBQSxJQUVBLE9BQUEsS0FBQSxLQUNBLE1BQUEsU0FBQSxRQUFBLEdBQ0EsTUFBQSxNQUFBLFlBQUEsT0FBQSxNQUFBLFVBQUEsTUFBQSxXQUFBLEdBQ0EsTUFBQSxjQUFBLFFBQUEsR0FDQSxZQUFBLFVBQUEsR0FHQSxZQUFBLFlBQUEsU0FBQSxLQUFBLE9BQ0EsTUFBQSxhQUFBLE1BQ0EsSUFBQSxNQUNBLEtBQUEsYUFBQSxZQUFBLE1BQUEsV0FDQSxJQUFBLE1BQ0EsS0FBQSxlQUFBLFlBQUEsTUFBQSxhQURBLFFBSEEsR0FRQSxZQUFBLFlBQUEsU0FBQSxLQUFBLE9BQ0EsR0FBQSxhQU1BLE9BTEEsS0FBQSxNQUNBLGFBQUEsS0FBQSxVQUFBLElBQUEsU0FBQSxPQUNBLElBQUEsUUFDQSxhQUFBLEtBQUEsVUFBQSxLQUFBLFNBQUEsTUFFQSxhQUFBLEVBQUEsUUFBQSxTQUFBLGFBQUEsRUFBQSxRQUFBLFNBR0EsTUFBQSxhQUFBLFNBQUEsTUFBQSxPQUNBLFdBQUEsUUFBQSxjQUNBLFlBQUEsZUFBQSxNQUFBLE9BRUEsWUFBQSxXQUFBLE1BQUEsUUFJQSxZQUFBLGVBQUEsU0FBQSxNQUFBLE9BQ0EsQ0FBQSxHQUFBLFNBQUEsR0FBQSxNQUFBLFlBQUEsT0FDQSxNQUFBLFFBQUEsV0FDQSxTQURBLFdBQUEsUUFBQSxLQUFBLE9BQ0EsUUFBQSxhQUFBLFlBQUEsUUFBQSxNQUFBLE9BQ0EsSUFBQSxNQUNBLFFBQUEsU0FBQSxNQUFBLFNBQUEsUUFBQSxTQUFBLElBQUEsT0FHQSxRQUFBLFdBQUEsUUFBQSxTQUFBLFFBQUEsV0FBQSxJQUFBLE9BRUEsWUFBQSxPQUFBLFFBQUEsT0FBQSxHQUNBLFlBQUEsV0FHQSxZQUFBLFdBQUEsU0FBQSxNQUFBLE9BQ0EsR0FBQSxXQUNBLEtBQUEsT0FDQSxXQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLEtBQUEsTUFBQSxRQUFBLE9BQUEsU0FBQSxRQUNBLFFBQUEsT0FBQSxVQUFBLEtBQUEsV0FBQSxjQUNBLElBQUEsUUFDQSxXQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLEtBQUEsU0FBQSxPQUFBLE1BQUEsUUFBQSxPQUFBLFFBQUEsWUFDQSxRQUFBLE9BQUEsVUFBQSxPQUFBLFdBQUEsZ0JBRUEsWUFBQSxVQUdBLFlBQUEsYUFBQSxTQUFBLEtBS0EsR0FIQSxVQUFBLElBQUEsT0FBQSxTQUFBLGVBQUEsSUFBQSxpQkFDQSxJQUFBLGtCQUVBLFFBQUEsQ0FDQSxHQUFBLFVBQUEsUUFBQSxRQUFBLElBQUEsT0FDQSxZQUFBLFNBQUEsR0FBQSxTQUFBLGdCQUNBLFNBQUEsU0FBQSxVQUVBLFNBQUEsZUFBQSxXQUlBLFlBQUEsV0FBQSxTQUFBLEtBQ0EsR0FBQSxtQkFBQSxLQUFBLElBQUEsV0FBQSxJQUFBLFdBQUEsSUFBQSxPQUFBLENBS0EsR0FKQSxJQUFBLGlCQUNBLElBQUEsa0JBR0EsS0FBQSxJQUFBLFFBQUEsTUFBQSxhQUFBLE1BQUEsRUFHQSxJQUFBLFNBQUEsR0FBQSxNQUFBLFlBQUEsT0FDQSxNQUFBLFFBQUEsV0FBQSxZQUFBLFdBQUEsUUFBQSxLQUFBLE9BQ0EsUUFBQSxRQUFBLGFBQUEsY0FBQSxXQUFBLFFBQUEsTUFBQSxPQUNBLFlBQUEsVUFBQSxLQUFBLElBQUEsU0FDQSxNQUFBLEVBQUEsSUFBQSxRQUFBLEVBR0EsZUFDQSxLQUFBLElBQUEsUUFBQSxjQUFBLEVBQUEsY0FBQSxNQUFBLEVBQUEsY0FBQSxFQUNBLEtBQUEsSUFBQSxVQUFBLGNBQUEsTUFBQSxFQUFBLGNBQUEsY0FBQSxFQUFBLEdBSUEsSUFBQSxjQUFBLEVBQUEsWUFDQSxLQUFBLGVBQ0EsS0FBQSxJQUFBLFFBQUEsUUFBQSxTQUFBLE1BQUEsU0FBQSxRQUFBLFNBQUEsS0FDQSxLQUFBLElBQUEsU0FBQSxRQUFBLFNBQUEsTUFBQSxTQUFBLFFBQUEsU0FBQSxLQUNBLGFBQUEsRUFBQSxjQUNBLElBQUEsZUFDQSxLQUFBLElBQUEsUUFBQSxRQUFBLFdBQUEsUUFBQSxTQUFBLFFBQUEsV0FBQSxLQUNBLEtBQUEsSUFBQSxTQUFBLFFBQUEsV0FBQSxRQUFBLFNBQUEsUUFBQSxXQUFBLEtBQ0EsYUFBQSxZQUFBLEVBQUEsWUFBQSxFQUFBLGdCQUNBLElBQUEsZ0JBQ0EsYUFBQSxZQUFBLGlCQUNBLGFBQUEsWUFBQSxFQUFBLGNBQUEsRUFBQSxZQUFBLEVBQUEsY0FBQSxJQUVBLFlBQUEsT0FBQSxRQUFBLGVBQUEsR0FDQSxnQkFBQSxZQUFBLEdBQUEsWUFBQSxJQUNBLFlBQUEsV0EwQkEsSUFBQSxPQUFBLFlBQUEsSUFDQSxhQUFBLEtBQUEsV0FDQSxNQUFBLFdBQUEsUUFBQSxXQUNBLFFBQUEsS0FBQSxPQUFBLFlBQ0EsU0FBQSxJQUFBLHFCQUFBLGVBRUEsVUFDQSxRQUFBLEtBQUEsT0FBQSxRQUNBLFFBQUEsS0FBQSxXQUFBLFFBQ0EsUUFBQSxHQUFBLFFBQUEsbUJBRUEsVUFHQSxJQUFBLFVBQUEsWUFBQSxPQUNBLGFBQUEsUUFBQSxXQUNBLFVBQUEsUUFBQSxXQUNBLFFBQUEsSUFBQSxRQUFBLGNBRUEsV0FHQSxJQUFBLE9BQUEsWUFBQSxJQUNBLGFBQUEsS0FBQSxXQUNBLFFBQ0EsV0FBQSxXQUNBLFlBQUEsU0FBQSxHQUFBLFFBQUEsYUFBQSxZQUFBLFlBQUEsY0FDQSxRQUFBLFVBQ0EsUUFBQSxHQUFBLFVBQUEsWUFBQSxjQUtBLElBQUEsT0FBQSxZQUFBLElBU0EsT0FSQSxhQUFBLEtBQUEsU0FBQSxNQUNBLFlBQUEsU0FBQSxJQUFBLFFBQUEsYUFBQSxZQUFBLFlBQUEsY0FDQSxRQUFBLFVBQ0EsUUFBQSxJQUFBLFVBQUEsWUFBQSxZQUVBLE1BQUEsT0FHQSxZQTNRQSxHQUNBLFdBREEsUUFBQSxRQUFBLFFBQUEsU0FBQSxNQUNBLDhCQUFBLEtBQUEsUUFBQSxVQUFBLFlBQ0EsUUFBQSxlQUFBLFNBQUEsVUFBQSxRQThRQSxPQTdRQSxVQUFBLE9BQUEsU0FBQSxLQUFBLFFBQUEsSUE0UUEsa0JBQUEsU0FBQSxTQUNBLHNCQU9BLFVBQUEsZ0JBQUEsVUFBQSxTQUFBLEtBQUEsVUFBQSxhQUFBLGNBQUEsY0FBQSxXQUFBLFNBQUEsUUFBQSxPQUFBLEdBQUEsUUFBQSxXQUFBLFlBQUEsYUFFQSxDQUFBLEdBQUEsVUFBQSxZQUFBLFNBQ0EsU0FBQSw4QkFBQSxLQUFBLFFBQUEsVUFBQSxVQUNBLFNBQUEsdUJBQUEsUUFBQSxXQUVBLE9BQ0EsU0FBQSxNQUNBLFFBQUEsVUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLEtBQUEsWUFHQSxHQUFBLFVBQUEsTUFBQSxNQUFBLFdBQUEsV0FDQSxTQUFBLFNBQUEsWUFBQSxZQUFBLFFBQUEsVUFBQSxXQUFBLE9BQUEsWUFBQSxXQUFBLFlBQUEsV0FBQSxhQUFBLGtCQUFBLFlBQUEsV0FBQSxhQUFBLFNBQUEsaUJBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsUUFJQSxLQUFBLFFBQUEsTUFBQSxPQUFBLEtBQUEsT0FBQSxTQUFBLFVBQ0EsWUFBQSxRQUFBLFVBQUEsWUFDQSxRQUFBLFNBQUEsWUFBQSxXQUFBLFNBQUEsTUFBQSxxQkFDQSxZQUFBLEVBQUEsV0FBQSxPQUFBLFdBQUEsVUFJQSxXQUFBLFFBQUEsV0FBQSxTQUFBLGFBQUEsUUFBQSxXQUFBLFFBQ0EsSUFBQSxZQUFBLFlBQUEsUUFBQSxXQUFBLFFBQ0EsU0FBQSxXQUFBLFFBR0EsSUFBQSxZQUFBLGFBQUEsT0FBQSxRQUFBLFdBQUEsS0FBQSxRQUFBLE1BR0EsU0FBQSxTQUFBLFVBQUEsV0FBQSxTQUFBLEtBRUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxLQUFBLFNBQUEsSUFBQSxTQUFBLFVBRUEsV0FBQSxTQUFBLEtBREEsUUFBQSxVQUNBLEdBQUEsT0FBQSxZQUFBLEtBQUEsRUFBQSxHQUNBLFFBQUEsU0FBQSxXQUFBLFNBQUEsTUFBQSxXQUNBLEdBQUEsTUFBQSxTQUFBLE9BQUEsRUFBQSxTQUFBLE9BQUEsSUFFQSxXQUFBLE1BQUEsU0FBQSxHQUFBLE1BQUEsS0FBQSxFQUFBLEVBQUEsS0FFQSxNQUFBLFdBQUEsU0FBQSxPQUFBLFdBQUEsYUFLQSxNQUFBLE9BQUEsS0FBQSxRQUFBLFdBRUEsV0FBQSxPQUFBLFdBQUEsY0FDQSxHQUdBLFdBQUEsU0FBQSxRQUFBLFNBQUEsV0FHQSxJQUFBLFVBRUEsV0FEQSxZQUFBLGFBQUEsUUFBQSxFQUdBLElBQUEsWUFBQSxRQUFBLE9BQUEsV0FBQSxVQUFBLFdBQUEsTUFBQSxVQUFBLFdBQUEsV0FDQTtJQUFBLFlBQUEsTUFBQSxXQUFBLFdBQ0EsV0FBQSxhQUFBLFFBQUEsT0FDQSxDQUNBLEdBQUEsU0FBQSxXQUFBLFdBQUEsUUFBQSxTQUFBLFdBQUEsV0FBQSxRQUFBLE9BQ0EsWUFBQSxhQUFBLE9BQUEsU0FFQSxVQUFBLFdBQUEsV0FBQSxZQUVBLE1BQUEsV0FBQSxRQUFBLFNBQ0EsV0FBQSxXQUFBLFFBQUEsaUJBQUEsUUFBQSxZQUNBLFdBQUEsUUFBQSxTQUNBLFdBQUEsV0FBQSxVQUNBLFFBQUEsUUFBQSxTQUNBLFdBQUEsV0FBQSxjQUVBLEdBQUEsTUFBQSxXQUFBLGNBS0EsV0FBQSxZQUFBLEtBQUEsU0FBQSxZQUVBLEdBQUEsS0FhQSxPQVhBLE1BREEsUUFBQSxZQUFBLGFBQUEsT0FBQSxXQUNBLElBQ0EsUUFBQSxPQUFBLFlBQ0EsV0FDQSxXQUFBLFFBQUEsU0FDQSxXQUFBLE1BQUEsV0FBQSxLQUFBLFFBQUEsaUJBRUEsR0FBQSxNQUFBLFlBSUEsV0FBQSxXQUFBLEtBQ0EsV0FBQSxhQUlBLFdBQUEsUUFBQSxXQUVBLFFBQUEsS0FBQSxXQUFBLFlBQUEsTUFBQSxXQUFBLFdBQUEsV0FBQSxHQUFBLFdBQUEsV0FBQSxXQUFBLFFBQUEsY0FJQSxNQUFBLElBQUEsV0FBQSxXQUNBLFlBQUEsV0FBQSxVQUNBLFFBQUEsS0FDQSxXQUFBLFlBU0EsUUFBQSxPQUFBLDBCQUFBLHNDQUVBLFNBQUEsV0FBQSxXQUVBLEdBQUEsVUFBQSxLQUFBLFVBQ0EsVUFBQSxVQUNBLFlBQUEsR0FDQSxZQUFBLFVBQ0EsWUFBQSxVQUNBLFdBQUEsRUFDQSxRQUFBLEVBQ0EsVUFBQSxNQUNBLFNBQUEsMkJBQ0EsaUJBQUEsRUFDQSxRQUFBLGNBQ0EsVUFBQSxFQUNBLE1BQUEsRUFDQSxNQUFBLEVBQ0EsTUFBQSxHQUNBLEtBQUEsR0FDQSxNQUFBLEVBR0EsTUFBQSxNQUFBLFVBQUEsYUFBQSxXQUFBLEtBQUEsaUJBQUEsUUFBQSxXQUFBLGFBQUEsUUFBQSxTQUFBLFFBQUEsV0FBQSxTQUFBLEdBQUEsZUFBQSxNQUFBLFNBQUEsV0FBQSxPQU1BLFFBQUEsZ0JBQUEsUUFBQSxRQXVTQSxRQUFBLGVBQ0EsTUFBQSxTQUFBLFFBQUEsVUFDQSxXQUFBLE9BQUEsUUFBQSxPQUFBLElBQUEsUUFBQSxJQUVBLFdBQUEsU0FBQSxRQUFBLE9BQUEsSUFBQSxRQUFBLElBSUEsUUFBQSxxQkFBQSxVQUFBLFNBQUEsWUFBQSxjQUNBLEdBQUEsUUFDQSxNQUFBLFVBQUEsTUFBQSxJQUVBLFFBQUEsTUFBQSxJQUNBLElBQUEsUUFDQSxRQUNBLElBQUEsU0FBQSxJQUFBLFNBQUEsT0FBQSxFQUFBLGFBQUEsRUFDQSxLQUFBLFNBQUEsS0FBQSxTQUFBLE1BRUEsTUFDQSxLQUFBLFNBQ0EsUUFDQSxJQUFBLFNBQUEsSUFBQSxTQUFBLE9BQ0EsS0FBQSxTQUFBLEtBQUEsU0FBQSxNQUFBLEVBQUEsWUFBQSxFQUVBLE1BQ0EsS0FBQSxPQUNBLFFBQ0EsSUFBQSxTQUFBLElBQUEsU0FBQSxPQUFBLEVBQUEsYUFBQSxFQUNBLEtBQUEsU0FBQSxLQUFBLFlBRUEsTUFDQSxTQUNBLFFBQ0EsSUFBQSxTQUFBLElBQUEsYUFDQSxLQUFBLFNBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxZQUFBLEdBS0EsSUFBQSxNQUFBLEdBQ0EsTUFBQSxPQUlBLElBQUEsUUFBQSxNQUFBLElBQUEsV0FBQSxNQUFBLEdBQ0EsT0FBQSxNQUFBLElBQ0EsSUFBQSxPQUNBLE9BQUEsS0FBQSxTQUFBLElBQ0EsTUFDQSxLQUFBLFFBQ0EsT0FBQSxLQUFBLFNBQUEsS0FBQSxTQUFBLE1BQUEsZ0JBRUEsSUFBQSxTQUFBLE1BQUEsSUFBQSxVQUFBLE1BQUEsR0FDQSxPQUFBLE1BQUEsSUFDQSxJQUFBLE1BQ0EsT0FBQSxJQUFBLFNBQUEsSUFBQSxZQUNBLE1BQ0EsS0FBQSxTQUNBLE9BQUEsSUFBQSxTQUFBLElBQUEsU0FBQSxPQUlBLE1BQUEsUUFuV0EsR0FBQSxhQUdBLFNBQUEsUUFBQSxHQUFBLFNBQUEsY0FDQSxRQUFBLFNBQUEsU0FBQSxRQUFBLFVBQUEsU0FBQSxPQUNBLFVBQUEsU0FBQSxjQUFBLFFBQUEsU0FDQSxJQUFBLE9BQUEsU0FBQSxPQUFBLFFBQUEsT0FBQSxRQUFBLE1BQUEsUUFBQSxXQUFBLE1BQ0EsU0FBQSxPQUFBLFFBQUEsU0FBQSxRQUFBLFNBQ0EsUUFBQSxNQUFBLFdBQUEsUUFBQSxRQUlBLFFBQUEsUUFDQSxTQUFBLE9BQUEsTUFBQSxRQUFBLE9BSUEsTUFBQSxNQUFBLFdBQ0EsTUFBQSxhQUFBLFdBQ0EsU0FBQSxVQUdBLE1BQUEsTUFBQSxXQUNBLE1BQUEsYUFBQSxXQUNBLFNBQUEsVUFHQSxNQUFBLFFBQUEsV0FDQSxNQUFBLGFBQUEsV0FDQSxTQUFBLFlBR0EsU0FBQSxTQUFBLE1BQUEsVUFBQSxDQUdBLElBQUEsU0FBQSxVQUdBLFNBQUEsa0JBQ0EsU0FBQSxTQUFBLFNBQUEsU0FBQSxLQUFBLFNBQUEsVUFDQSxHQUFBLFlBQUEsUUFBQSxRQUFBLFNBQ0EsT0FBQSxlQUFBLFFBQUEsaUJBQ0EsS0FBQSxTQUFBLGlCQUNBLEdBQUEsV0FBQSxZQUFBLHNCQUFBLFdBQUEsR0FHQSxPQUZBLFdBQUEsU0FBQSxVQUFBLFlBQUEsb0JBQUEsV0FBQSxLQUNBLFVBQUEsV0FBQSxXQUFBLEtBQUEsaUJBQ0EsV0FBQSxHQUFBLGNBTUEsSUFBQSxXQUFBLFdBQUEsWUFBQSxZQWtUQSxPQWpUQSxVQUFBLFNBQUEsS0FBQSxTQUFBLFVBQ0EsUUFBQSxTQUFBLFlBQUEsU0FBQSxTQUFBLE1BQ0EsUUFBQSxPQUFBLFNBQUEsU0FBQSxRQUFBLGtCQUFBLG1CQUNBLFNBQUEsS0FBQSxNQUFBLFVBQ0EsWUFBQSxTQUNBLFVBQUEsU0FBQSxVQUNBLFNBQUEsU0FHQSxTQUFBLEtBQUEsV0FHQSxRQUFBLE9BQUEsUUFBQSxTQUFBLFFBQUEsU0FDQSxRQUFBLE9BQ0EsS0FBQSxRQUFBLE1BQ0EsS0FBQSxRQUFBLFFBVUEsU0FBQSxRQUFBLFVBQ0EsYUFBQSxRQUNBLFFBQUEsVUFBQSxRQUFBLFdBQ0EsYUFBQSxRQUFBLFVBQ0EsUUFBQSxZQUNBLGFBQUEsWUFBQSxRQUFBLFdBSUEsSUFBQSxVQUFBLFFBQUEsUUFBQSxNQUFBLElBQ0EsU0FBQSxRQUFBLFNBQUEsU0FBQSxTQUNBLFVBQUEsUUFDQSxRQUFBLEdBQUEsUUFBQSxTQUFBLFFBQ0EsV0FBQSxVQUNBLFFBQUEsR0FBQSxVQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsT0FDQSxRQUFBLEdBQUEsVUFBQSxRQUFBLGFBQUEsT0FBQSxTQUFBLE9BQ0EsV0FBQSxVQUFBLFVBQUEsU0FBQSxRQUFBLEdBQUEsUUFBQSxhQUFBLFlBQUEsU0FBQSw2QkFLQSxRQUFBLFNBQ0EsUUFBQSxPQUFBLFFBQUEsVUFBQSxRQUFBLFFBQUEsUUFBQSxPQUFBLFlBQUEsUUFBQSxTQUlBLFFBQUEsTUFDQSxNQUFBLGFBQUEsV0FDQSxVQUFBLFFBQUEsUUFBQSxRQUFBLEdBQUEsUUFBQSxTQUFBLFVBTUEsU0FBQSxRQUFBLFdBSUEsSUFBQSxHQURBLFVBQUEsUUFBQSxRQUFBLE1BQUEsS0FDQSxFQUFBLFNBQUEsT0FBQSxLQUFBLENBQ0EsR0FBQSxTQUFBLFNBQUEsRUFDQSxXQUFBLFFBQ0EsUUFBQSxJQUFBLFFBQUEsU0FBQSxRQUNBLFdBQUEsVUFDQSxRQUFBLElBQUEsVUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLE9BQ0EsUUFBQSxJQUFBLFVBQUEsUUFBQSxhQUFBLE9BQUEsU0FBQSxPQUNBLFdBQUEsVUFBQSxVQUFBLFNBQUEsUUFBQSxJQUFBLFFBQUEsYUFBQSxZQUFBLFNBQUEsMkJBS0EsYUFDQSxXQUFBLFNBQ0EsV0FBQSxNQUlBLGFBQUEsU0FHQSxNQUFBLFlBSUEsU0FBQSxNQUFBLFdBSUEsTUFGQSxjQUFBLFNBQ0EsV0FBQSxLQUNBLFFBQUEsT0FBQSxRQUFBLE1BQUEsVUFJQSxRQUFBLFdBQUEsV0FDQSxPQUFBLFlBQUEsU0FBQSxRQUNBLFFBQUEsTUFBQSxPQUxBLFNBQUEsUUFTQSxTQUFBLEtBQUEsV0FFQSxNQUFBLE1BQUEsUUFBQSxZQUFBLGVBQUEsU0FDQSxJQUFBLFFBQUEsUUFBQSxVQUFBLGFBQUEsS0FDQSxNQUFBLFFBQUEsVUFBQSxLQUFBLE9BR0EsYUFBQSxXQUFBLFNBRUEsV0FBQSxTQUFBLFNBQUEsVUFBQSxNQUFBLGNBSUEsV0FBQSxLQUFBLElBQUEsVUFBQSxLQUFBLFVBQUEsUUFBQSxRQUFBLFdBQUEsV0FBQSxTQUFBLFFBQUEsV0FHQSxRQUFBLFdBQUEsV0FBQSxTQUFBLFFBQUEsV0FFQSxRQUFBLE1BQUEsV0FBQSxTQUFBLFFBQUEsWUFBQSxJQUFBLFFBQUEsTUFFQSxRQUFBLGFBQUEsV0FBQSxTQUFBLFFBQUEsYUFFQSxTQUFBLE1BQUEsV0FBQSxPQUFBLE1BQUEsV0FDQSxNQUFBLE1BQUEsUUFBQSxZQUFBLFFBQUEsWUFFQSxTQUFBLFNBQUEsTUFBQSxVQUFBLEVBQ0EsTUFBQSxTQUFBLE1BQUEsT0FBQSxNQUFBLE1BQUEsU0FBQSxNQUFBLFVBQ0EsTUFBQSxXQUNBLFNBQUEsa0JBR0EsV0FBQSxLQUFBLFdBQUEsY0FJQSxRQUFBLFdBQ0EsVUFBQSxRQUFBLFNBQ0EsU0FBQSxRQUNBLFdBQUEsR0FBQSxRQUFBLFNBQUEsV0FFQSxRQUFBLEdBQUEsUUFBQSxTQUFBLGlCQU1BLFNBQUEsTUFBQSxXQUlBLE1BRkEsY0FBQSxTQUNBLFdBQUEsTUFDQSxRQUFBLE9BQUEsUUFBQSxNQUFBLFVBR0EsUUFBQSxXQUFBLFdBQ0EsUUFBQSxZQUNBLFNBQUEsUUFFQSxRQUFBLE1BQUEsT0FOQSxTQUFBLFFBVUEsU0FBQSxLQUFBLFNBQUEsTUFFQSxTQUFBLFdBQ0EsTUFBQSxNQUFBLFFBQUEsWUFBQSxlQUFBLFVBRUEsU0FBQSxNQUFBLFdBQUEsV0FJQSxNQUhBLE9BQUEsTUFBQSxRQUFBLFlBQUEsUUFBQSxVQUdBLE1BQUEsVUFBQSxRQUFBLFFBQ0EsUUFBQSxHQUFBLE9BREEsU0FLQSxTQUFBLFNBQUEsTUFBQSxVQUFBLEVBQ0EsTUFBQSxTQUFBLE1BQUEsT0FBQSxNQUFBLE1BQUEsU0FBQSxNQUFBLFVBR0EsUUFBQSxVQUFBLE9BQUEsWUFDQSxXQUFBLElBQUEsUUFBQSxTQUFBLFlBS0EsU0FBQSxPQUFBLFdBQ0EsU0FBQSxTQUFBLFNBQUEsUUFBQSxTQUFBLFNBR0EsU0FBQSxNQUFBLFdBQ0EsV0FBQSxHQUFBLFNBS0EsU0FBQSxnQkFBQSxXQUNBLEdBQUEsV0FBQSxDQUdBLEdBQUEsaUJBQUEsY0FHQSxTQUFBLFdBQUEsS0FBQSxlQUNBLFVBQUEsV0FBQSxLQUFBLGdCQUdBLFlBQUEsb0JBQUEsUUFBQSxVQUFBLGdCQUFBLFNBQUEsVUFHQSxhQUFBLEtBQUEsS0FDQSxZQUFBLE1BQUEsS0FDQSxXQUFBLElBQUEsZUFJQSxTQUFBLFNBQUEsU0FBQSxLQUNBLEtBQUEsSUFBQSxPQUFBLFNBQUEsV0FDQSxTQUFBLE9BQ0EsSUFBQSxvQkFJQSxTQUFBLGNBQUEsU0FBQSxLQUNBLEtBQUEsSUFBQSxRQUNBLFFBQUEsR0FBQSxPQUNBLElBQUEsb0JBSUEsU0FBQSx5QkFBQSxTQUFBLEtBQ0EsSUFBQSxpQkFDQSxJQUFBLGtCQUVBLFNBQUEsU0FBQSxRQUFBLEdBQUEsT0FBQSxRQUFBLEdBQUEsU0FzRUEsU0FNQSxRQUFBLGFBQUEsTUFBQSxTQUNBLE1BQUEsU0FBQSxTQUFBLFNBQUEsVUFBQSxpQkFBQSxRQUdBLFFBQUEsZUFBQSxVQUNBLE1BQUEsSUFBQSxLQUFBLGVBQUEsSUFBQSxXQUFBLE1BQUEsSUFBQSxXQUNBLEtBQUEsU0FBQSxLQUNBLE1BQUEsU0FBQSxTQUFBLE1BQ0EsZUFBQSxJQUFBLFNBQUEsSUFBQSxNQUNBLElBQUEsTUFFQSxNQTdYQSxHQUFBLE1BQUEsT0FBQSxVQUFBLEtBQ0EsUUFBQSxlQUFBLFNBQUEsU0FDQSxrQkFBQSxhQStYQSxPQUFBLG9CQU1BLFVBQUEsYUFBQSxVQUFBLFlBQUEsT0FBQSxXQUFBLFFBQUEsU0FBQSxRQUFBLFVBQUEsS0FBQSxTQUFBLE9BRUEsT0FDQSxTQUFBLE1BQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFHQSxHQUFBLFVBQUEsTUFBQSxNQUNBLFNBQUEsU0FBQSxXQUFBLGtCQUFBLFlBQUEsWUFBQSxTQUFBLFFBQUEsVUFBQSxXQUFBLE9BQUEsWUFBQSxPQUFBLGVBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsUUFJQSxRQUFBLFNBQUEsU0FBQSxTQUFBLEtBQ0EsS0FBQSxTQUFBLElBQUEsU0FBQSxTQUFBLFVBQ0EsTUFBQSxLQUFBLEtBQUEsWUFBQSxVQUNBLFFBQUEsVUFBQSxXQUFBLE1BQUEsV0FDQSxTQUFBLFFBQUEsd0JBTUEsS0FBQSxXQUFBLE1BQUEsT0FBQSxLQUFBLFVBQUEsU0FBQSxTQUFBLFVBQ0EsUUFBQSxTQUFBLFVBQ0EsUUFBQSxPQUFBLE1BQUEsVUFFQSxNQUFBLE1BQUEsU0FFQSxRQUFBLFVBQUEsV0FBQSxNQUFBLFdBQ0EsU0FBQSxRQUFBLHNCQUVBLEdBR0EsS0FBQSxRQUFBLE1BQUEsT0FBQSxLQUFBLE9BQUEsU0FBQSxVQUNBLFNBQUEsUUFBQSxVQUFBLFlBQ0EsUUFBQSxTQUFBLFlBQUEsV0FBQSxTQUFBLE1BQUEsa0JBQ0EsWUFBQSxFQUFBLFFBQUEsT0FBQSxRQUFBLFNBSUEsSUFBQSxTQUFBLFNBQUEsUUFBQSxRQUdBLE9BQUEsSUFBQSxXQUFBLFdBQ0EsU0FBQSxRQUFBLFVBQ0EsUUFBQSxLQUNBLFFBQUEsWUFTQSxRQUFBLE9BQUEsNEJBQUEseUJBQUEsd0NBRUEsU0FBQSxhQUFBLFdBRUEsR0FBQSxVQUFBLEtBQUEsVUFDQSxVQUFBLFVBQ0EsWUFBQSxZQUNBLFlBQUEsYUFDQSxVQUFBLGNBQ0EsU0FBQSwrQkFDQSxRQUFBLFFBQ0EsV0FBQSxFQUNBLFVBQUEsRUFDQSxNQUFBLEVBQ0EsTUFBQSxFQUNBLFVBQUEsRUFDQSxPQUFBLFNBQ0EsTUFBQSxFQUdBLE1BQUEsTUFBQSxVQUFBLGFBQUEsV0FBQSxTQUFBLFFBQUEsV0FBQSxVQUlBLFFBQUEsa0JBQUEsUUFBQSxXQUFBLFFBRUEsR0FBQSxlQUdBLFFBQUEsUUFBQSxVQUFBLFNBQUEsT0FFQSxZQUFBLFNBQUEsUUFBQSxRQUNBLElBQUEsYUFBQSxPQUFBLE1BQ0EsTUFBQSxXQUFBLE1BRUEsT0FBQSxjQUFBLFdBQ0EsTUFBQSxZQUNBLE1BQUEsYUFBQSxHQUVBLE1BQUEsZ0JBRUEsTUFBQSxVQUFBLFNBQUEsT0FDQSxNQUFBLGFBQUEsV0FDQSxXQUFBLFNBQUEsVUFJQSxNQUFBLFFBQUEsU0FBQSxPQUNBLE1BQUEsYUFBQSxXQUNBLFdBQUEsT0FBQSxVQUlBLE1BQUEsV0FBQSxXQUNBLE1BQUEsWUFBQSxjQUtBLFdBQUEsT0FBQSxTQUFBLFNBQ0EsTUFBQSxTQUFBLFFBQ0EsTUFBQSxjQUFBLFFBQUEsU0FDQSxNQUFBLGFBQUEsSUFJQSxXQUFBLFNBQUEsU0FBQSxPQUNBLE1BQUEsYUFBQSxPQUdBLFdBQUEsT0FBQSxTQUFBLE9BQ0EsR0FBQSxPQUFBLE1BQUEsU0FBQSxPQUFBLEtBQ0EsWUFBQSxjQUFBLE9BQ0EsV0FBQSxVQUNBLE1BQUEsZ0JBQ0EsYUFBQSxZQUFBLFVBRUEsTUFBQSxNQUFBLFFBQUEsWUFBQSxVQUFBLE1BQUEsUUFLQSxXQUFBLFdBQUEsV0FDQSxNQUFBLFNBQUEsV0FBQSxXQUlBLE1BQUEsU0FBQSxRQUFBLFFBQUEsU0FBQSxXQUFBLGFBQUEsV0FBQSxXQUFBLFFBQUEsUUFBQSxZQUhBLE1BQUEsU0FBQSxRQU1BLFdBQUEsVUFBQSxTQUFBLE9BQ0EsR0FBQSxHQUFBLE1BQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsRUFBQSxLQUNBLE1BQUEsU0FBQSxHQUFBLFFBQUEsUUFFQSxLQUFBLEVBQUEsR0FDQSxNQUFBLEtBR0EsV0FBQSxhQUFBLFNBQUEsS0FFQSxJQUFBLGlCQUNBLElBQUEsbUJBR0EsV0FBQSxXQUFBLFNBQUEsS0FDQSxhQUFBLEtBQUEsSUFBQSxXQUdBLFdBQUEsZUFDQSxJQUFBLGlCQUNBLElBQUEsbUJBSUEsS0FBQSxJQUFBLFNBQUEsTUFBQSxTQUFBLE9BQ0EsV0FBQSxPQUFBLE1BQUEsY0FJQSxLQUFBLElBQUEsU0FBQSxNQUFBLGFBQUEsRUFBQSxNQUFBLGVBQ0EsS0FBQSxJQUFBLFNBQUEsTUFBQSxhQUFBLE1BQUEsU0FBQSxPQUFBLEVBQUEsTUFBQSxlQUNBLFFBQUEsWUFBQSxNQUFBLGdCQUFBLE1BQUEsYUFBQSxHQUNBLE1BQUEsV0FLQSxJQUFBLE1BQUEsV0FBQSxJQUNBLFlBQUEsS0FBQSxXQUNBLE9BQ0EsV0FBQSxXQUNBLFdBQUEsU0FBQSxHQUFBLFlBQUEsV0FBQSxjQUNBLFFBQUEsVUFDQSxRQUFBLEdBQUEsVUFBQSxXQUFBLGNBS0EsSUFBQSxNQUFBLFdBQUEsSUFTQSxPQVJBLFlBQUEsS0FBQSxXQUNBLFdBQUEsU0FBQSxJQUFBLFlBQUEsV0FBQSxjQUNBLFFBQUEsVUFDQSxRQUFBLElBQUEsVUFBQSxXQUFBLFlBRUEsUUFHQSxXQS9IQSxRQUFBLFFBQUEsUUFBQSxTQUFBLEtBb0lBLE9BREEsa0JBQUEsU0FBQSxTQUNBLHFCQU1BLFVBQUEsZUFBQSxVQUFBLFNBQUEsS0FBQSxhQUFBLGdCQUFBLFNBQUEsUUFBQSxPQUFBLEdBQUEsV0FBQSxlQUVBLEdBQUEsVUFBQSxXQUFBLFFBRUEsUUFDQSxTQUFBLE1BQ0EsUUFBQSxVQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsS0FBQSxZQUdBLEdBQUEsVUFBQSxNQUFBLE1BQ0EsU0FBQSxTQUFBLFlBQUEsWUFBQSxRQUFBLFVBQUEsV0FBQSxPQUFBLFlBQUEsV0FBQSxTQUFBLFFBQUEsWUFBQSxlQUFBLGNBQUEsU0FBQSxLQUNBLFFBQUEsVUFBQSxLQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsT0FJQSxJQUFBLFFBQUEsUUFBQSxRQUFBLFNBQUEsT0FDQSxNQUFBLFFBQUEsT0FBQSxTQUFBLE1BQ0EsVUFBQSxLQUFBLFNBQ0EsVUFBQSxXQUFBLE1BQUEsT0FBQSxlQUNBLFFBQUEsV0FBQSxjQUFBLE1BQ0EsSUFBQSxlQUFBLGNBQUEsV0FHQSxVQUFBLFdBQUEsUUFBQSxXQUFBLFFBR0EsSUFBQSxRQUFBLGFBQUEsQ0FFQSxHQUFBLGdCQUFBLGNBQUEsT0FBQSxHQUFBLFFBQUEsT0FBQSxJQUFBLFFBQUEsVUFBQSxJQUFBLE1BQ0EsT0FBQSxPQUFBLGVBQUEsV0FFQSxjQUFBLFNBQUEsTUFBQSxZQUFBLEtBQUEsU0FBQSxRQUNBLFVBQUEsT0FBQSxRQUNBLFdBQUEsY0FFQSxHQUlBLE1BQUEsT0FBQSxLQUFBLFFBQUEsU0FBQSxVQUVBLE1BQUEsWUFBQSxTQUNBLGNBQUEsU0FBQSxNQUFBLFlBQ0EsS0FBQSxTQUFBLFFBR0EsR0FBQSxRQUFBLGFBQUEsT0FBQSxRQUFBLFNBQUEsT0FBQSxFQUVBLFdBREEsWUFBQSxjQUFBLFdBQUEsV0FBQSxVQUFBLEVBQUEsV0FBQSxXQUFBLE9BQUEsR0FHQSxRQUFBLE9BQUEsUUFBQSxPQUFBLE9BQUEsTUFBQSxFQUFBLE9BQ0EsSUFBQSxXQUFBLFVBQUEsWUFDQSxZQUFBLFVBQUEsT0FBQSxTQUVBLElBQUEsT0FBQSxRQUFBLE9BQUEsR0FBQSxRQUFBLGFBQ0EsV0FBQSxVQUFBLE9BQUEsUUFFQSxXQUFBLGVBS0EsV0FBQSxRQUFBLFdBRUEsR0FBQSxXQUFBLFNBQUEsV0FBQSxZQUFBLE1BQUEsU0FBQSxJQUFBLEdBQ0EsSUFBQSxPQUFBLFVBQUEsVUFBQSxXQUFBLGFBQ0EsU0FBQSxRQUFBLFVBQUEsT0FBQSxVQUFBLE9BQUEsU0FBQSxPQUFBLE1BQUEsV0FBQSxVQUNBLFVBQUEsUUFBQSxTQUFBLFVBQUEsU0FBQSxNQUFBLFNBQ0EsUUFBQSxJQUFBLFNBQUEsUUFBQSxpQkFBQSxJQUFBLFNBSUEsTUFBQSxJQUFBLFdBQUEsV0FDQSxXQUFBLFVBQUEsVUFDQSxRQUFBLEtBQ0EsVUFBQSxhQVFBLE9BQUEsVUM3cklBLFdBQ0EsWUFHQSxTQUFBLE9BQUEsd0JBQUEsS0FBQSxpQkFBQSxTQUFBLGdCQUVBLGVBQUEsSUFBQSx1QkFBQSxrUUFLQSxRQUFBLE9BQUEsd0JBQUEsS0FBQSxpQkFBQSxTQUFBLGdCQUVBLGVBQUEsSUFBQSx1QkFBQSxnY0FLQSxRQUFBLE9BQUEsNkJBQUEsS0FBQSxpQkFBQSxTQUFBLGdCQUVBLGVBQUEsSUFBQSxpQ0FBQSxrdUNBS0EsUUFBQSxPQUFBLDJCQUFBLEtBQUEsaUJBQUEsU0FBQSxnQkFFQSxlQUFBLElBQUEsNkJBQUEsOGNBS0EsUUFBQSxPQUFBLHdCQUFBLEtBQUEsaUJBQUEsU0FBQSxnQkFFQSxlQUFBLElBQUEsdUJBQUEsZ2NBS0EsUUFBQSxPQUFBLDBCQUFBLEtBQUEsaUJBQUEsU0FBQSxnQkFFQSxlQUFBLElBQUEsMkJBQUEsK0tBS0EsUUFBQSxPQUFBLHlCQUFBLEtBQUEsaUJBQUEsU0FBQSxnQkFFQSxlQUFBLElBQUEseUJBQUEsb3FCQUtBLFFBQUEsT0FBQSxzQkFBQSxLQUFBLGlCQUFBLFNBQUEsZ0JBRUEsZUFBQSxJQUFBLG1CQUFBLG1VQUtBLFFBQUEsT0FBQSw2QkFBQSxLQUFBLGlCQUFBLFNBQUEsZ0JBRUEsZUFBQSxJQUFBLGlDQUFBLGdpRUFLQSxRQUFBLE9BQUEsNEJBQUEsS0FBQSxpQkFBQSxTQUFBLGdCQUVBLGVBQUEsSUFBQSwrQkFBQSx3U0FLQSxRQUFBLE9BQUEsMEJBQUEsS0FBQSxpQkFBQSxTQUFBLGdCQUVBLGVBQUEsSUFBQSwyQkFBQSx3SUFLQSxPQUFBLFVDOUVBLFdBaUtBLFFBQUEsYUFBQSxNQUFBLE1BQUEsV0FJQSxJQUhBLEdBQUEsUUFBQSxXQUFBLEdBQUEsRUFDQSxPQUFBLE1BQUEsTUFBQSxPQUFBLElBRUEsTUFBQSxRQUNBLEdBQUEsTUFBQSxTQUFBLE1BQ0EsTUFBQSxNQUdBLE9BQUEsR0FhQSxRQUFBLGNBQUEsTUFBQSxPQUNBLEdBQUEsWUFBQSxNQUdBLElBRkEsTUFBQSxNQUFBLE1BRUEsV0FBQSxNQUFBLE1BQUEsTUFDQSxNQUFBLE9BQUEsT0FBQSxFQUFBLEVBRUEsV0FBQSxNQUFBLFVBQUEsT0FDQSxLQUFBLFNBRUEsSUFBQSxLQUFBLFVBQUEsS0FBQSxNQUFBLFVBQUEsS0FHQSxPQUZBLFFBQUEsTUFBQSxNQUFBLFFBQUEsTUFBQSxLQUVBLFVBQUEsS0FBQSxPQUFBLFlBQUEsTUFBQSxPQUFBLEdBQUEsRUFBQSxHQUFBLE1BQUEsRUFBQSxHQVVBLFFBQUEsV0FBQSxPQUNBLEdBQUEsT0FBQSxLQUFBLE1BQ0EsV0FBQSxNQUVBLElBQUEsV0FBQSxNQUFBLE1BQUEsTUFDQSxNQUFBLFFBQUEsTUFDQSxDQUNBLFVBQUEsTUFBQSxVQUFBLE9BQ0EsS0FBQSxTQUVBLElBQUEsS0FBQSxVQUFBLEtBQUEsTUFBQSxVQUFBLE1BQ0EsVUFBQSxNQUFBLFFBQUEsTUFBQSxTQUVBLFdBQUEsTUFDQSxVQUFBLE9BQUEsVUFBQSxVQUFBLEtBQUEsT0FFQSxVQUFBLE1BQUEsR0FjQSxRQUFBLGdCQUFBLE9BQ0EsTUFBQSxPQUFBLFdBQUEsR0FhQSxRQUFBLGtCQUFBLEVBQUEsR0FNQSxJQUxBLEdBQUEsSUFBQSxFQUFBLFNBQ0EsR0FBQSxFQUFBLFNBQ0EsTUFBQSxHQUNBLE9BQUEsR0FBQSxTQUVBLE1BQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxHQUFBLE9BQ0EsTUFBQSxHQUFBLE1BRUEsSUFBQSxRQUFBLE1BQUEsQ0FDQSxHQUFBLE1BQUEsT0FBQSxtQkFBQSxPQUNBLE1BQUEsRUFFQSxJQUFBLE1BQUEsT0FBQSxtQkFBQSxPQUNBLE1BQUEsSUFVQSxNQUFBLEdBQUEsTUFBQSxFQUFBLE1BV0EsUUFBQSxhQUFBLE9BQ0EsR0FBQSxPQUFBLEdBQ0EsT0FBQSxNQUFBLE9BQ0EsTUFBQSxNQUFBLEdBQ0EsSUFBQSxNQUFBLE9BQUEsRUFBQSxHQUNBLEtBQUEsTUFBQSxPQUFBLEVBRUEsSUFBQSxPQUFBLGdCQUFBLFFBQ0EsS0FBQSxnQkFBQSxNQUFBLE1BQUEsZ0JBQUEsTUFDQSxPQUFBLENBRUEsSUFBQSxPQUFBLFdBQ0EsT0FBQSxTQUFBLE1BQUEsUUFBQSxNQUFBLFFBQUEsTUFBQSxXQUFBLENBRUEsSUFBQSxRQUFBLFdBS0EsS0FKQSxPQUFBLE1BQUEsTUFDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLEtBQUEsWUFFQSxNQUFBLFFBQ0EsT0FBQSxLQUFBLE1BQUEsT0FFQSxPQUFBLFFBWUEsUUFBQSxrQkFBQSxPQUNBLE1BQUEsS0FBQSxjQUFBLE9BVUEsUUFBQSxZQUNBLE1BQUEsV0FBQSxVQVVBLFFBQUEsYUFDQSxNQUFBLFlBQUEsUUFDQSxNQUFBLEtBQ0EsTUFBQSxLQUNBLFNBQUEsS0FDQSxTQUFBLEVBQ0EsTUFBQSxFQUNBLFFBQUEsRUFDQSxPQUFBLEtBQ0EsT0FBQSxLQUNBLEtBQUEsS0FDQSxPQUFBLEtBQ0EsUUFBQSxFQUNBLFdBQUEsRUFDQSxNQUFBLE1BV0EsUUFBQSxjQUFBLE9BQ0EsTUFBQSxPQUFBLEVBQ0EsVUFBQSxPQUFBLGFBQ0EsVUFBQSxLQUFBLE9BV0EsUUFBQSxlQUFBLFFBQ0EsR0FBQSxPQUFBLE9BQUEsS0FDQSxRQUNBLGNBQUEsT0FFQSxPQUFBLE1BQUEsT0FBQSxNQUFBLE9BQUEsU0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsS0FDQSxXQUFBLE9BQUEsYUFDQSxXQUFBLEtBQUEsUUFrQkEsUUFBQSxPQUFBLE1BQUEsTUFBQSxLQUNBLFFBQUEsTUFBQSxHQUNBLG1CQUFBLE9BQ0EsSUFBQSxNQUFBLE1BQUEsT0FBQSxFQU1BLEtBSkEsR0FBQSxPQUFBLEdBQ0EsT0FBQSxJQUFBLE9BQUEsRUFDQSxPQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsVUFFQSxNQUFBLFFBQ0EsT0FBQSxPQUFBLE1BQUEsTUFBQSxNQUVBLE9BQUEsUUFlQSxRQUFBLGNBQUEsU0E0SkEsUUFBQSxRQUFBLE9BRUEsTUFBQSxRQUFBLGdCQUFBLFNBQUEsUUFBQSxRQUFBLGVBQUEsS0FBQSxNQUFBLGVBQUEsTUFBQSxHQUFBLGVBQUEsT0FZQSxRQUFBLGVBQUEsTUFBQSxVQUNBLEtBQUEsWUFBQSxTQUNBLEtBQUEsWUFBQSxNQXVHQSxRQUFBLFVBQUEsVUFLQSxRQUFBLFNBR0EsR0FBQSxZQUFBLENBSUEsR0FBQSxNQUFBLE1BQUEsWUFDQSxNQUFBLE1BQUEsS0FBQSxXQUlBLEdBQUEsZUFBQSxPQUFBLENBRUEsR0FBQSxhQUFBLFdBQUEsS0FBQSxXQUNBLE9BQUEsS0FBQSxNQUFBLFlBQUEsTUFBQSxVQUNBLE9BQUEsVUFBQSxRQUFBLE9BQUEsWUFFQSxNQUFBLE1BQUEsTUFBQSxRQUFBLE1BQUEsV0F0QkEsR0FBQSxNQUFBLFNBQUEsR0FDQSxZQUFBLFNBQUEsR0FDQSxRQUFBLFNBQUEsRUF1QkEsT0FEQSxhQUFBLE1BQUEsVUFDQSxNQWdCQSxRQUFBLFdBQUEsTUFBQSxPQUFBLFNBQUEsT0FBQSxRQUNBLEdBQUEsU0FBQSxDQUNBLEdBQUEsUUFBQSxTQUFBLE1BQ0EsSUFBQSxtQkFBQSxRQUNBLE1BQUEsUUFJQSxHQUFBLE9BQUEsU0FBQSxNQUNBLEtBQUEsTUFxQkEsTUFBQSxNQXBCQSxJQUFBLFdBQUEsU0FBQSxLQUFBLE1BQ0EsS0FBQSxpQkFBQSxXQUNBLE1BQUEsTUFFQSxJQUFBLE1BQUEsWUFBQSxVQUNBLFFBQUEsV0FDQSxJQUFBLFdBQ0EsSUFBQSxXQUNBLE1BQUEsSUFBQSxPQUFBLE1BRUEsS0FBQSxhQUNBLElBQUEsYUFDQSxNQUFBLElBQUEsTUFBQSxNQUVBLEtBQUEsYUFHQSxNQUZBLFFBQUEsS0FBQSxNQUFBLE9BQUEsUUFBQSxLQUFBLFFBQ0EsT0FBQSxVQUFBLE1BQUEsVUFDQSxPQUtBLEdBQUEsT0FBQSxRQUFBLE1BQ0EsSUFBQSxPQUFBLENBRUEsR0FBQSxjQUFBLE1BQ0EsVUFBQSxPQUFBLFlBQ0EsU0FBQSxPQUFBLFdBR0EsS0FEQSxHQUFBLFFBQUEsT0FBQSxPQUNBLFVBQ0EsR0FBQSxPQUFBLFNBQUEsTUFDQSxNQUFBLFFBQUEsT0FHQSxRQUFBLE1BQUEsS0FBQSxNQUFBLGVBRUEsUUFBQSxNQUFBLE1BQUEsT0FBQSxVQUFBLE1BWUEsT0FUQSxTQUNBLGVBQUEsS0FBQSxNQUFBLFdBQ0EsT0FBQSxNQUFBLE1BQUEsT0FFQSxlQUFBLEtBQUEsTUFBQSxXQUNBLE9BQUEsTUFBQSxNQUFBLFFBSUEsUUFLQSxPQUFBLEtBQUEsT0FDQSxPQUFBLEtBQUEsU0FHQSxNQUFBLFFBQUEsUUFBQSxNQUFBLFNBQUEsU0FBQSxLQUNBLE9BQUEsS0FBQSxVQUFBLFNBQUEsT0FBQSxTQUFBLE9BQUEsVUFHQSxjQUNBLGFBQUEsUUFDQSxhQUFBLFNBRUEsUUFoQkEsT0E0QkEsUUFBQSxZQUFBLFdBQ0EsTUFBQSxVQUFBLFdBQUEsYUFBQSxjQTRCQSxRQUFBLG9CQUFBLEtBQUEsUUFBQSxVQUNBLEdBQUEsa0JBQUEsTUFDQSxNQUFBLFNBR0EsSUFBQSxtQkFBQSxZQUFBLGFBQUEsT0FDQSxNQUFBLEtBRUEsSUFBQSxVQUFBLEtBQUEsWUFDQSxJQUFBLG1CQUFBLFlBQ0EsUUFBQSxZQUNBLFVBQUEsS0FBQSxNQUVBLFNBQUEsV0FBQSxRQUFBLFlBQ0EsVUFBQSxDQUNBLEdBQUEsUUFBQSxXQUFBLEtBQUEsS0FDQSxTQUFBLFlBQ0EsVUFBQSxXQUFBLEtBQUEsU0FFQSxXQUVBLFNBQUEsT0FBQSxLQUFBLFFBQ0EsWUFBQSxLQUFBLFdBS0EsR0FBQSxZQUFBLEdBQUEsWUFBQSxHQUFBLEVBQUEsU0FBQSxHQUNBLE1BQUEsS0FFQSxRQUFBLFVBQ0EsSUFBQSxHQUNBLE1BQUEsVUFBQSxPQUNBLE1BQUEsTUFBQSxLQUFBLFFBQUEsT0FFQSxLQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsS0FBQSxRQUFBLEVBQUEsR0FFQSxLQUFBLEdBQ0EsTUFBQSxVQUFBLE1BQUEsTUFBQSxZQUNBLE1BQUEsTUFBQSxLQUFBLFFBQUEsTUFBQSxNQUFBLFlBRUEsS0FBQSxHQUNBLE1BQUEsVUFBQSxZQUFBLE1BQUEsTUFBQSxZQUNBLE1BQUEsTUFBQSxLQUFBLFFBQUEsWUFBQSxNQUFBLE1BQUEsYUFHQSxNQUFBLE1BQUEsS0FBQSxTQVlBLFFBQUEsbUJBQUEsVUFjQSxRQUFBLFNBQ0EsR0FBQSxhQUFBLE9BQUEsUUFBQSxJQUNBLElBQUEsWUFBQSxDQUNBLEdBQUEsTUFBQSxNQUFBLFlBQ0EsTUFBQSxNQUFBLEtBQUEsV0FFQSxJQUFBLGtCQUFBLFdBQ0EsT0FBQSxLQUFBLE1BQUEsWUFDQSxrQkFDQSxLQUFBLE1BQUEsS0FBQSxrQkFFQSxTQUFBLEtBQUEsT0FBQSxPQUVBLE1BREEsVUFBQSxHQUNBLG1CQUFBLEtBQUEsYUFBQSxRQUFBLEdBQUEsUUFBQSxLQUFBLEtBQUEsUUFBQSxPQU9BLElBSkEsT0FBQSxLQUFBLFdBQ0EsWUFDQSxLQUFBLFlBQUEsTUFFQSxlQUFBLE9BQUEsQ0FDQSxZQUFBLFdBQUEsS0FBQSxVQUNBLElBQUEsUUFBQSxLQUFBLE1BQUEsWUFBQSxLQUNBLE9BQUEsVUFBQSxRQUFBLE9BQUEsWUFFQSxNQUFBLE1BQUEsTUFBQSxZQUFBLE1BdENBLEdBQUEsTUFBQSxTQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsWUFBQSxTQUFBLEdBQ0EsaUJBQUEsU0FBQSxHQUNBLFFBQUEsU0FBQSxHQUNBLE1BQUEsU0FBQSxHQUVBLE9BQUEsRUFBQSxRQUNBLFVBQUEsRUFBQSxRQUNBLFFBQUEsRUFBQSxRQUNBLGFBQUEsRUFBQSxRQUNBLElBQUEsSUE4QkEsT0FEQSxhQUFBLE1BQUEsVUFDQSxNQWFBLFFBQUEsZ0JBQUEsTUFBQSxRQUNBLEdBQUEsT0FBQSxHQUNBLFFBQUEsYUFDQSxPQUFBLE1BQUEsTUFBQSxPQUFBLEVBQ0EsUUFBQSxRQUFBLGdCQUFBLFVBQUEsWUFDQSxTQUVBLElBQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxZQUFBLE9BQ0EsUUFDQSxRQUFBLGFBQ0EsT0FBQSxPQUVBLFNBQUEsRUFHQSxPQUFBLE1BQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxNQUFBLE1BQ0EsU0FBQSxPQUFBLE9BQUEsR0FDQSxPQUFBLEtBQUEsT0FNQSxNQUhBLFVBQ0EsY0FBQSxRQUVBLE9BZUEsUUFBQSxhQUFBLE1BQUEsVUFBQSxTQUFBLFdBS0EsSUFKQSxHQUFBLFFBQUEsV0FBQSxHQUFBLEVBQ0EsT0FBQSxNQUFBLE1BQUEsT0FBQSxFQUNBLFlBRUEsTUFBQSxRQUFBLENBQ0EsR0FBQSxPQUFBLE1BQUEsTUFFQSxJQUFBLE9BQUEsZ0JBQUEsUUFBQSxnQkFBQSxPQUFBLFNBQUEsUUFBQSxRQUFBLFlBQUEsUUFBQSxDQUVBLFlBQ0EsTUFBQSxZQUFBLE1BQUEsVUFBQSxVQUVBLElBQUEsVUFBQSxHQUNBLFVBQUEsTUFBQSxPQUNBLFNBQUEsT0FBQSxNQUdBLEtBREEsT0FBQSxRQUFBLFlBQ0EsU0FBQSxXQUNBLE9BQUEsWUFBQSxNQUFBLGNBRUEsV0FDQSxPQUFBLEtBQUEsT0FHQSxNQUFBLFFBaUJBLFFBQUEsYUFBQSxFQUFBLEVBQUEsU0FBQSxRQUFBLE9BQUEsUUFFQSxHQUFBLFNBQUEsQ0FDQSxHQUFBLFFBQUEsU0FBQSxFQUFBLEVBQ0EsSUFBQSxtQkFBQSxRQUNBLFFBQUEsT0FJQSxHQUFBLElBQUEsRUFFQSxNQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxDQUVBLElBQUEsWUFBQSxHQUNBLGdCQUFBLEVBR0EsTUFBQSxJQUFBLEdBQUEsR0FBQSxZQUFBLE9BQUEsR0FBQSxZQUFBLFlBQ0EsT0FBQSxDQUlBLElBQUEsTUFBQSxHQUFBLE1BQUEsRUFDQSxNQUFBLEtBQUEsQ0FHQSxJQUFBLFdBQUEsU0FBQSxLQUFBLEdBQ0EsV0FBQSxTQUFBLEtBQUEsRUFRQSxJQU5BLFdBQUEsWUFDQSxVQUFBLGFBRUEsWUFBQSxZQUNBLFdBQUEsYUFFQSxXQUFBLFdBQ0EsT0FBQSxDQUVBLFFBQUEsV0FDQSxJQUFBLFdBQ0EsSUFBQSxXQUdBLE9BQUEsSUFBQSxDQUVBLEtBQUEsYUFFQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBRUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxDQUVBLEtBQUEsYUFDQSxJQUFBLGFBR0EsTUFBQSxJQUFBLE9BQUEsR0FFQSxHQUFBLE9BQUEsV0FBQSxVQUNBLEtBQUEsTUFBQSxDQUVBLEdBQUEsVUFBQSxlQUFBLEtBQUEsRUFBQSxlQUNBLFNBQUEsZUFBQSxLQUFBLEVBQUEsY0FFQSxJQUFBLFVBQUEsU0FDQSxNQUFBLGFBQUEsU0FBQSxFQUFBLFlBQUEsRUFBQSxTQUFBLEVBQUEsWUFBQSxFQUFBLFNBQUEsUUFBQSxPQUFBLE9BR0EsSUFBQSxXQUFBLFlBQ0EsT0FBQSxDQUdBLElBQUEsT0FBQSxFQUFBLFlBQ0EsTUFBQSxFQUFBLFdBR0EsSUFBQSxPQUFBLFNBQUEsV0FBQSxRQUFBLGdCQUFBLFFBQUEsV0FBQSxRQUFBLGdCQUFBLFNBQ0EsZUFBQSxJQUFBLGVBQUEsR0FFQSxPQUFBLEVBTUEsR0FBQSxjQUFBLE1BQ0EsVUFBQSxPQUFBLFlBQ0EsU0FBQSxPQUFBLFdBR0EsS0FEQSxHQUFBLFFBQUEsT0FBQSxPQUNBLFVBQ0EsR0FBQSxPQUFBLFNBQUEsRUFDQSxNQUFBLFFBQUEsU0FBQSxDQUdBLElBQUEsTUFBQSxDQVFBLElBUEEsUUFBQSxFQUdBLE9BQUEsS0FBQSxHQUNBLE9BQUEsS0FBQSxHQUdBLE9BTUEsR0FKQSxPQUFBLEVBQUEsT0FDQSxLQUFBLEVBQUEsT0FDQSxPQUFBLE1BQUEsT0FFQSxRQUFBLFFBRUEsS0FBQSxRQUFBLENBQ0EsR0FBQSxPQUFBLE9BQ0EsTUFBQSxFQUFBLEtBRUEsSUFBQSxRQUNBLEtBQUEsV0FDQSxPQUFBLFlBQUEsRUFBQSxPQUFBLE1BQUEsU0FBQSxRQUFBLE9BQUEsZUFJQSxNQUFBLE9BQUEsWUFBQSxFQUFBLE1BQUEsTUFBQSxTQUFBLFFBQUEsT0FBQSxTQUNBLFdBT0EsT0FBQSxFQUFBLFNBQUEsTUFBQSxJQUFBLEdBQ0EsTUFBQSxnQkFBQSxLQUFBLEVBQUEsTUFFQSxPQUVBLE9BQUEsZUFBQSxLQUFBLEVBQUEsTUFBQSxZQUFBLEVBQUEsS0FBQSxNQUFBLFNBQUEsUUFBQSxPQUFBLFNBSkE7R0FRQSxTQUFBLFNBRUEsTUFBQSxFQUFBLFNBQUEsTUFBQSxJQUFBLEdBQ0EsTUFBQSxnQkFBQSxLQUFBLEVBQUEsS0FFQSxTQUFBLEtBQUEsR0FGQSxRQWNBLE9BUEEsUUFBQSxNQUNBLE9BQUEsTUFFQSxjQUNBLGFBQUEsUUFDQSxhQUFBLFNBRUEsT0FlQSxRQUFBLFdBQUEsT0FBQSxPQUFBLFNBQUEsT0FBQSxTQUNBLFFBQUEsUUFBQSxRQUFBLFFBQUEsT0FBQSxTQUFBLE9BQUEsS0FDQSxHQUFBLE9BQ0EsTUFDQSxPQUFBLE9BQ0EsTUFBQSxPQUFBLElBRUEsSUFBQSxVQUFBLE1BQUEsUUFBQSxVQUFBLGNBQUEsU0FBQSxDQUdBLElBREEsR0FBQSxhQUFBLE9BQUEsT0FDQSxlQUNBLEdBQUEsTUFBQSxPQUFBLGNBQUEsT0FBQSxDQUNBLE1BQUEsT0FBQSxZQUNBLE9BR0EsSUFBQSxNQUFBLENBQ0EsR0FBQSxVQUNBLFlBQ0EsT0FBQSxTQUFBLE1BQUEsU0FDQSxVQUFBLG1CQUFBLFdBQ0EsTUFBQSxTQUdBLFlBQ0EsTUFBQSxNQUFBLFFBQUEsT0FBQSxTQUFBLGNBQUEsT0FBQSxVQUdBLE9BQUEsS0FBQSxRQUNBLE9BQUEsS0FBQSxPQUdBLFdBQ0EsVUFBQSxNQUFBLE9BQUEsU0FBQSxPQUFBLGFBSUEsWUFDQSxPQUFBLFNBQUEsTUFBQSxRQUNBLG1CQUFBLFVBQ0EsT0FBQSxTQUdBLG1CQUFBLFVBQ0EsTUFBQSxPQUdBLFFBQUEsS0FBQSxRQWNBLFFBQUEsWUFBQSxJQUFBLEtBQ0EsTUFBQSxLQUFBLE1BQUEsZ0JBQUEsSUFBQSxJQUFBLElBY0EsUUFBQSxVQUFBLE1BQUEsU0FBQSxVQUNBLEdBQUEsT0FBQSxHQUNBLFFBQUEsYUFDQSxPQUFBLE1BQUEsTUFBQSxPQUFBLEVBQ0EsVUFFQSxTQUFBLFVBQUEsUUFBQSxnQkFBQSxVQUFBLFlBQ0EsS0FBQSxVQUFBLFFBQUEsV0FBQSxNQUVBLElBQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxZQUFBLEtBQ0EsU0FBQSxhQUNBLEtBQUEsTUFFQSxPQUFBLE1BQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxNQUFBLE9BQ0EsU0FBQSxTQUFBLFNBQUEsTUFBQSxNQUFBLE9BQUEsT0FFQSxVQUFBLE9BQUEsS0FBQSxLQUFBLE9BQUEsS0FBQSxTQUFBLFFBQUEsS0FBQSxVQUFBLE1BQ0EsVUFBQSxVQUNBLEtBQUEsS0FBQSxVQUVBLE9BQUEsS0FBQSxRQVNBLE1BTkEsVUFDQSxhQUFBLEtBQUEsT0FDQSxjQUFBLE9BQ0EsVUFDQSxhQUFBLE1BRUEsT0FjQSxRQUFBLGtCQUFBLFFBQ0EsTUFBQSxVQUFBLFdBQUEsU0FBQSxTQUNBLEdBQUEsVUFDQSxVQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsRUFFQSxJQUFBLE9BQUEsR0FDQSxPQUFBLFdBQUEsV0FBQSxPQUFBLENBRUEsSUFBQSxnQkFBQSxRQUNBLE9BQUEsTUFBQSxRQUFBLENBQ0EsR0FBQSxPQUFBLFdBQUEsTUFDQSxRQUFBLE9BQUEsTUFBQSxTQUFBLE1BQUEsTUFBQSxZQUFBLGdCQUdBLFFBQUEsV0FBQSxTQUFBLE1BQUEsSUFBQSxZQUNBLE9BQUEsT0FBQSxNQUFBLFNBQUEsTUFBQSxJQUFBLFlBQUEsYUFHQSxPQUFBLFNBMkJBLFFBQUEsZUFBQSxLQUFBLFFBQUEsWUFBQSxpQkFBQSxRQUFBLE9BQ0EsR0FBQSxRQUFBLEVBQUEsUUFDQSxVQUFBLEVBQUEsUUFDQSxRQUFBLEVBQUEsUUFFQSxVQUFBLEdBQUEsUUFDQSxlQUFBLEdBQUEsT0FFQSxLQUFBLFlBQUEsV0FBQSxNQUNBLEtBQUEsSUFBQSxVQUVBLGFBQUEsWUFBQSxTQUNBLFNBQUEsSUFDQSxVQUFBLGFBQUEsR0FFQSxpQkFBQSxpQkFBQSxTQUNBLFNBQUEsSUFDQSxlQUFBLGtCQUFBLEVBRUEsSUFBQSxVQUFBLE1BQUEsS0FBQSxZQUNBLElBQUEsVUFBQSxZQUFBLEVBK0JBLE1BN0JBLFVBQUEsTUFBQSxVQUNBLFNBQUEsS0FDQSxTQUFBLEdBQUEsTUFBQSxTQUFBLEtBRUEsU0FBQSxLQUNBLFNBQUEsR0FBQSxNQUFBLFNBQUEsTUFHQSxRQUFBLEVBQUEsU0FBQSxLQUNBLFNBQUEsR0FBQSxVQUdBLFFBQUEsRUFBQSxTQUFBLEtBQ0EsU0FBQSxJQUdBLFNBQUEsRUFBQSxTQUFBLEtBQ0EsU0FBQSxHQUFBLE9BR0EsV0FDQSxLQUFBLE1BQUEsU0FBQSxLQUFBLFNBQUEsT0FBQSxhQUdBLGdCQUNBLFFBQUEsTUFBQSxTQUFBLEtBQUEsU0FBQSxPQUFBLGtCQUdBLFNBQUEsSUFBQSxRQUNBLGNBQUEsTUFBQSxLQUFBLFNBR0EsSUFBQSxTQUFBLEdBQUEsU0FBQSxLQUFBLFFBQUEsU0FBQSxpQkFDQSxPQUFBLFVBQUEsS0FBQSxRQUFBLFlBQUEsaUJBQUEsUUFBQSxRQVdBLFFBQUEsZ0JBQUEsT0FDQSxNQUFBLGFBQUEsT0FZQSxRQUFBLGNBQ0EsR0FBQSxTQUFBLE9BQUEsT0FBQSxXQUFBLFFBQUEsWUFBQSxNQUNBLE9BQUEsUUFXQSxRQUFBLFVBQUEsT0FDQSxNQUFBLGtCQUFBLFFBQUEsU0FBQSxLQUFBLE9BMEJBLFFBQUEsbUJBQUEsT0FDQSxHQUFBLE1BQ0EsTUFHQSxPQUFBLFFBQUEsU0FBQSxLQUFBLFFBQUEsY0FDQSxLQUFBLE1BQUEsYUFBQSxXQUFBLE9BQUEsZUFBQSxRQU1BLE1BQUEsTUFBQSxTQUFBLE1BQUEsS0FDQSxPQUFBLE1BRUEsbUJBQUEsU0FBQSxlQUFBLEtBQUEsTUFBQSxVQVJBLEVBbUJBLFFBQUEsa0JBQUEsT0FDQSxNQUFBLGVBQUEsT0FzQkEsUUFBQSxhQUFBLE9BQ0EsTUFBQSxRQUFBLGdCQUFBLFFBQUEsZ0JBQUEsT0FBQSxRQUNBLFNBQUEsS0FBQSxRQUFBLFlBQUEsRUErTEEsUUFBQSxPQUFBLE1BQUEsT0FBQSxTQUFBLFNBUUEsTUFMQSxpQkFBQSxTQUFBLE1BQUEsU0FDQSxRQUFBLFNBQ0EsU0FBQSxPQUNBLFFBQUEsR0FFQSxVQUFBLE1BQUEsT0FBQSxrQkFBQSxXQUFBLG1CQUFBLFNBQUEsUUFBQSxJQTZDQSxRQUFBLFdBQUEsTUFBQSxTQUFBLFNBQ0EsTUFBQSxXQUFBLE9BQUEsRUFBQSxrQkFBQSxXQUFBLG1CQUFBLFNBQUEsUUFBQSxJQW1DQSxRQUFBLFFBQUEsVUFBQSxZQUNBLEdBQUEsUUFBQSxXQUFBLFVBQ0EsT0FBQSxZQUFBLE9BQUEsT0FBQSxZQUFBLE9Bd0ZBLFFBQUEsU0FBQSxPQUFBLFNBQUEsU0FDQSxHQUFBLE9BUUEsT0FQQSxVQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsR0FDQSxPQUFBLE9BQUEsU0FBQSxNQUFBLElBQUEsUUFDQSxNQUFBLFVBQUEsTUFBQSxJQUFBLFNBQ0EsT0FBQSxLQUNBLEdBRkEsU0FLQSxPQTZDQSxRQUFBLGFBQUEsT0FBQSxTQUFBLFNBQ0EsR0FBQSxPQVFBLE9BUEEsVUFBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLEdBQ0EsWUFBQSxPQUFBLFNBQUEsTUFBQSxJQUFBLFFBQ0EsTUFBQSxVQUFBLE1BQUEsSUFBQSxTQUNBLE9BQUEsS0FDQSxHQUZBLFNBS0EsT0EyRUEsUUFBQSxZQUFBLE9BQUEsU0FBQSxTQUNBLEdBQUEsU0FFQSxPQUFBLE9BQUEsU0FBQSxNQUFBLEtBQ0EsTUFBQSxLQUFBLElBQUEsUUFHQSxJQUFBLFFBQUEsTUFBQSxNQUVBLEtBREEsU0FBQSxtQkFBQSxTQUFBLFFBQUEsR0FDQSxVQUNBLFNBQUEsTUFBQSxVQUFBLE1BQUEsUUFBQSxXQUFBLElBSUEsTUFBQSxRQTREQSxRQUFBLGFBQUEsT0FBQSxTQUFBLFNBQ0EsR0FBQSxPQUFBLEtBQUEsUUFDQSxPQUFBLE1BQUEsTUFHQSxLQURBLFNBQUEsbUJBQUEsU0FBQSxRQUFBLEdBQ0EsVUFBQSxDQUNBLEdBQUEsS0FBQSxNQUFBLE9BQ0EsSUFBQSxTQUFBLE9BQUEsS0FBQSxJQUFBLFdBQUEsRUFDQSxNQUdBLE1BQUEsUUFtQkEsUUFBQSxXQUFBLFFBQ0EsR0FBQSxVQU1BLE9BTEEsT0FBQSxPQUFBLFNBQUEsTUFBQSxLQUNBLFdBQUEsUUFDQSxPQUFBLEtBQUEsT0FHQSxPQUFBLE9BbUJBLFFBQUEsS0FBQSxPQUFBLEtBQ0EsTUFBQSxRQUFBLGVBQUEsS0FBQSxPQUFBLE1BQUEsRUFpQkEsUUFBQSxRQUFBLFFBTUEsSUFMQSxHQUFBLE9BQUEsR0FDQSxNQUFBLEtBQUEsUUFDQSxPQUFBLE1BQUEsT0FDQSxZQUVBLE1BQUEsUUFBQSxDQUNBLEdBQUEsS0FBQSxNQUFBLE1BQ0EsUUFBQSxPQUFBLE1BQUEsSUFFQSxNQUFBLFFBaUJBLFFBQUEsV0FBQSxPQUNBLE1BQUEsVUFBQSxHQUFBLFNBQUEsR0FDQSxPQUFBLGdCQUFBLFFBQUEsU0FBQSxLQUFBLFFBQUEsWUFBQSxFQWlCQSxRQUFBLFFBQUEsT0FDQSxNQUFBLFFBQUEsZ0JBQUEsUUFBQSxTQUFBLEtBQUEsUUFBQSxZQUFBLEVBaUJBLFFBQUEsV0FBQSxPQUNBLE1BQUEsUUFBQSxJQUFBLE1BQUEsV0FBQSxFQXlCQSxRQUFBLFNBQUEsT0FDQSxHQUFBLFNBQUEsQ0FDQSxLQUFBLE1BQ0EsTUFBQSxPQUVBLElBQUEsV0FBQSxTQUFBLEtBQUEsT0FDQSxPQUFBLE1BQUEsTUFFQSxPQUFBLFlBQUEsWUFBQSxXQUFBLGFBQUEsV0FBQSxXQUNBLFdBQUEsYUFBQSxnQkFBQSxTQUFBLFdBQUEsTUFBQSxTQUNBLFFBRUEsT0FBQSxNQUFBLFdBQ0EsTUFBQSxTQUFBLElBRUEsUUEwQ0EsUUFBQSxTQUFBLEVBQUEsRUFBQSxTQUFBLFNBQ0EsTUFBQSxhQUFBLEVBQUEsRUFBQSxrQkFBQSxXQUFBLG1CQUFBLFNBQUEsUUFBQSxJQWdDQSxRQUFBLFVBQUEsT0FDQSxNQUFBLGdCQUFBLFNBQUEsWUFBQSxXQUFBLFFBaUJBLFFBQUEsWUFBQSxPQUNBLE1BQUEsa0JBQUEsT0F3QkEsUUFBQSxVQUFBLE9BS0EsU0FBQSxRQUFBLGtCQUFBLFNBNkJBLFFBQUEsT0FBQSxPQUdBLE1BQUEsVUFBQSxRQUFBLFFBQUEsTUFvQkEsUUFBQSxRQUFBLE9BQ0EsTUFBQSxRQUFBLE1BbUJBLFFBQUEsVUFBQSxPQUNBLE1BQUEsZ0JBQUEsUUFDQSxPQUFBLGdCQUFBLFFBQUEsU0FBQSxLQUFBLFFBQUEsY0FBQSxFQW1EQSxRQUFBLFVBQUEsT0FDQSxNQUFBLFFBQUEsZ0JBQUEsUUFBQSxTQUFBLEtBQUEsUUFBQSxjQUFBLEVBaUJBLFFBQUEsVUFBQSxPQUNBLE1BQUEsZ0JBQUEsUUFDQSxPQUFBLGdCQUFBLFFBQUEsU0FBQSxLQUFBLFFBQUEsY0FBQSxFQWlCQSxRQUFBLGFBQUEsT0FDQSxNQUFBLG1CQUFBLE9Bd0NBLFFBQUEsV0FBQSxPQUFBLFNBQUEsU0FDQSxHQUFBLFVBTUEsT0FMQSxVQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsR0FFQSxPQUFBLE9BQUEsU0FBQSxNQUFBLElBQUEsUUFDQSxPQUFBLEtBQUEsU0FBQSxNQUFBLElBQUEsVUFFQSxPQXVEQSxRQUFBLE9BQUEsUUFDQSxHQUFBLE1BQUEsVUFDQSxPQUFBLENBRUEsS0FBQSxTQUFBLFFBQ0EsTUFBQSxPQU9BLElBSEEsZ0JBQUEsTUFBQSxLQUNBLE9BQUEsS0FBQSxRQUVBLE9BQUEsR0FBQSxrQkFBQSxNQUFBLE9BQUEsR0FDQSxHQUFBLFVBQUEsbUJBQUEsT0FBQSxPQUFBLEdBQUEsS0FBQSxVQUFBLE9BQ0EsUUFBQSxHQUFBLGtCQUFBLE1BQUEsT0FBQSxLQUNBLFNBQUEsT0FBQSxRQU9BLEtBTEEsR0FBQSxTQUFBLE1BQUEsVUFBQSxFQUFBLFFBQ0EsTUFBQSxHQUNBLE9BQUEsV0FDQSxPQUFBLGFBRUEsTUFBQSxRQUNBLFVBQUEsT0FBQSxRQUFBLE9BQUEsU0FBQSxPQUFBLE9BSUEsT0FGQSxjQUFBLFFBQ0EsYUFBQSxRQUNBLE9BOEJBLFFBQUEsTUFBQSxPQUFBLFNBQUEsU0FDQSxHQUFBLFVBQ0EsSUFBQSxrQkFBQSxVQUFBLENBQ0EsR0FBQSxTQUNBLE9BQUEsT0FBQSxTQUFBLE1BQUEsS0FDQSxNQUFBLEtBQUEsT0FFQSxNQUFBLGVBQUEsTUFBQSxZQUFBLFdBQUEsR0FBQSxFQUFBLEdBS0EsS0FIQSxHQUFBLE9BQUEsR0FDQSxPQUFBLE1BQUEsU0FFQSxNQUFBLFFBQUEsQ0FDQSxHQUFBLEtBQUEsTUFBQSxNQUNBLFFBQUEsS0FBQSxPQUFBLFVBR0EsVUFBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLEdBQ0EsTUFBQSxPQUFBLFNBQUEsTUFBQSxJQUFBLFFBQ0EsU0FBQSxNQUFBLElBQUEsVUFDQSxPQUFBLEtBQUEsUUFJQSxPQUFBLFFBa0JBLFFBQUEsT0FBQSxRQU1BLElBTEEsR0FBQSxPQUFBLEdBQ0EsTUFBQSxLQUFBLFFBQ0EsT0FBQSxNQUFBLE9BQ0EsT0FBQSxNQUFBLFVBRUEsTUFBQSxRQUFBLENBQ0EsR0FBQSxLQUFBLE1BQUEsTUFDQSxRQUFBLFFBQUEsSUFBQSxPQUFBLE1BRUEsTUFBQSxRQStCQSxRQUFBLE1BQUEsT0FBQSxTQUFBLFNBQ0EsR0FBQSxVQUNBLElBQUEsa0JBQUEsVUFLQSxJQUpBLEdBQUEsT0FBQSxHQUNBLE1BQUEsWUFBQSxXQUFBLEdBQUEsRUFBQSxHQUNBLE9BQUEsU0FBQSxRQUFBLE1BQUEsT0FBQSxJQUVBLE1BQUEsUUFBQSxDQUNBLEdBQUEsS0FBQSxNQUFBLE1BQ0EsT0FBQSxVQUNBLE9BQUEsS0FBQSxPQUFBLFVBSUEsVUFBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLEdBQ0EsTUFBQSxPQUFBLFNBQUEsTUFBQSxJQUFBLFFBQ0EsU0FBQSxNQUFBLElBQUEsVUFDQSxPQUFBLEtBQUEsUUFJQSxPQUFBLFFBbUNBLFFBQUEsV0FBQSxPQUFBLFNBQUEsWUFBQSxTQUNBLEdBQUEsT0FBQSxRQUFBLE9BQ0EsSUFBQSxNQUFBLFlBQ0EsR0FBQSxNQUNBLG1CQUNBLENBQ0EsR0FBQSxNQUFBLFFBQUEsT0FBQSxZQUNBLE1BQUEsTUFBQSxLQUFBLFNBRUEsYUFBQSxXQUFBLE9BU0EsTUFOQSxZQUNBLFNBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxJQUNBLE1BQUEsUUFBQSxRQUFBLE9BQUEsU0FBQSxNQUFBLE1BQUEsUUFDQSxNQUFBLFVBQUEsWUFBQSxNQUFBLE1BQUEsV0FHQSxZQWlCQSxRQUFBLFFBQUEsUUFNQSxJQUxBLEdBQUEsT0FBQSxHQUNBLE1BQUEsS0FBQSxRQUNBLE9BQUEsTUFBQSxPQUNBLE9BQUEsTUFBQSxVQUVBLE1BQUEsUUFDQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BRUEsT0FBQSxRQTJCQSxRQUFBLElBQUEsWUFPQSxJQU5BLEdBQUEsTUFBQSxVQUNBLE1BQUEsR0FDQSxNQUFBLFlBQUEsTUFBQSxHQUFBLEVBQUEsR0FDQSxPQUFBLEtBQUEsSUFBQSxLQUFBLEdBQUEsS0FBQSxNQUFBLFdBQUEsRUFBQSxNQUFBLE9BQ0EsT0FBQSxNQUFBLFVBRUEsTUFBQSxRQUNBLE9BQUEsT0FBQSxXQUFBLE1BQUEsT0FFQSxPQUFBLFFBK0JBLFFBQUEsVUFBQSxXQUFBLE9BQUEsV0FDQSxHQUFBLE9BQUEsR0FDQSxRQUFBLGFBQ0EsT0FBQSxXQUFBLFdBQUEsT0FBQSxFQUNBLFFBQUEsQ0FjQSxPQVpBLFlBQUEsRUFBQSxVQUFBLFVBQUEsRUFBQSxPQUFBLFdBQUEsWUFBQSxFQUNBLFFBQUEsWUFDQSxPQUFBLFFBQUEsV0FBQSxPQUFBLFdBQUEsR0FDQSxnQkFBQSxRQUNBLFFBQUEsU0FBQSxZQUFBLFdBQUEsUUFBQSxPQUFBLFdBQUEsUUFBQSxXQUFBLE9BQUEsWUFBQSxHQUVBLE9BQUEsV0FBQSxTQUFBLE9BQ0EsUUFBQSxPQUFBLFlBQ0EsT0FBQSxRQUFBLFFBREEsU0FLQSxPQW1GQSxRQUFBLE9BQUEsV0FBQSxTQUFBLFNBQ0EsR0FBQSxTQUFBLENBQ0EsVUFBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLEVBRUEsSUFBQSxPQUFBLEdBQ0EsT0FBQSxXQUFBLFdBQUEsT0FBQSxDQUVBLElBQUEsZ0JBQUEsUUFDQSxPQUFBLE1BQUEsU0FDQSxTQUFBLFNBQUEsV0FBQSxPQUFBLE1BQUEsbUJBS0EsUUFBQSxXQUFBLFNBQUEsTUFBQSxNQUFBLFlBQ0EsTUFBQSxVQUFBLFNBQUEsTUFBQSxNQUFBLGFBR0EsT0FBQSxRQTRDQSxRQUFBLFFBQUEsV0FBQSxTQUFBLFNBQ0EsR0FBQSxVQUNBLFVBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxFQUVBLElBQUEsT0FBQSxHQUNBLE9BQUEsV0FBQSxXQUFBLE9BQUEsQ0FFQSxJQUFBLGdCQUFBLFFBQ0EsT0FBQSxNQUFBLFFBQUEsQ0FDQSxHQUFBLE9BQUEsV0FBQSxNQUNBLFVBQUEsTUFBQSxNQUFBLGFBQ0EsT0FBQSxLQUFBLFdBSUEsUUFBQSxXQUFBLFNBQUEsTUFBQSxNQUFBLFlBQ0EsU0FBQSxNQUFBLE1BQUEsYUFDQSxPQUFBLEtBQUEsUUFJQSxPQUFBLFFBK0NBLFFBQUEsTUFBQSxXQUFBLFNBQUEsU0FDQSxTQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsRUFFQSxJQUFBLE9BQUEsR0FDQSxPQUFBLFdBQUEsV0FBQSxPQUFBLENBRUEsSUFBQSxnQkFBQSxRQU9BLENBQ0EsR0FBQSxPQU9BLE9BTkEsUUFBQSxXQUFBLFNBQUEsTUFBQSxNQUFBLFlBQ0EsTUFBQSxVQUFBLE1BQUEsTUFBQSxhQUNBLE9BQUEsT0FDQSxHQUZBLFNBS0EsT0FkQSxPQUFBLE1BQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxXQUFBLE1BQ0EsSUFBQSxTQUFBLE1BQUEsTUFBQSxZQUNBLE1BQUEsUUFvQ0EsUUFBQSxVQUFBLFdBQUEsU0FBQSxTQUNBLEdBQUEsT0FRQSxPQVBBLFVBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxHQUNBLGFBQUEsV0FBQSxTQUFBLE1BQUEsTUFBQSxZQUNBLE1BQUEsVUFBQSxNQUFBLE1BQUEsYUFDQSxPQUFBLE9BQ0EsR0FGQSxTQUtBLE9BOEJBLFFBQUEsU0FBQSxXQUFBLFNBQUEsU0FDQSxHQUFBLE9BQUEsR0FDQSxPQUFBLFdBQUEsV0FBQSxPQUFBLENBR0EsSUFEQSxTQUFBLFVBQUEsbUJBQUEsU0FBQSxTQUFBLG1CQUFBLFNBQUEsUUFBQSxHQUNBLGdCQUFBLFFBQ0EsT0FBQSxNQUFBLFFBQ0EsU0FBQSxXQUFBLE9BQUEsTUFBQSxlQUFBLFFBS0EsUUFBQSxXQUFBLFNBRUEsT0FBQSxZQXFCQSxRQUFBLGNBQUEsV0FBQSxTQUFBLFNBQ0EsR0FBQSxRQUFBLFdBQUEsV0FBQSxPQUFBLENBRUEsSUFEQSxTQUFBLFVBQUEsbUJBQUEsU0FBQSxTQUFBLG1CQUFBLFNBQUEsUUFBQSxHQUNBLGdCQUFBLFFBQ0EsS0FBQSxVQUNBLFNBQUEsV0FBQSxRQUFBLE9BQUEsZUFBQSxRQUlBLENBQ0EsR0FBQSxPQUFBLEtBQUEsV0FDQSxRQUFBLE1BQUEsT0FDQSxPQUFBLFdBQUEsU0FBQSxNQUFBLElBQUEsWUFFQSxNQURBLEtBQUEsTUFBQSxRQUFBLFVBQUEsT0FDQSxTQUFBLFdBQUEsS0FBQSxJQUFBLGNBR0EsTUFBQSxZQTRHQSxRQUFBLFFBQUEsV0FBQSxZQUNBLEdBQUEsTUFBQSxNQUFBLFVBQUEsR0FDQSxNQUFBLEdBQ0EsT0FBQSxrQkFBQSxZQUNBLE9BQUEsV0FBQSxXQUFBLE9BQUEsRUFDQSxPQUFBLE1BQUEsZ0JBQUEsUUFBQSxPQUFBLEVBS0EsT0FIQSxTQUFBLFdBQUEsU0FBQSxPQUNBLFNBQUEsUUFBQSxPQUFBLFdBQUEsTUFBQSxhQUFBLE1BQUEsTUFBQSxRQUVBLE9BMkNBLFFBQUEsS0FBQSxXQUFBLFNBQUEsU0FDQSxHQUFBLE9BQUEsR0FDQSxPQUFBLFdBQUEsV0FBQSxPQUFBLENBR0EsSUFEQSxTQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsR0FDQSxnQkFBQSxRQUVBLElBREEsR0FBQSxRQUFBLE1BQUEsVUFDQSxNQUFBLFFBQ0EsT0FBQSxPQUFBLFNBQUEsV0FBQSxPQUFBLE1BQUEsZ0JBR0EsV0FDQSxPQUFBLFdBQUEsU0FBQSxNQUFBLElBQUEsWUFDQSxTQUFBLE9BQUEsU0FBQSxNQUFBLElBQUEsYUFHQSxPQUFBLFFBNENBLFFBQUEsS0FBQSxXQUFBLFNBQUEsU0FDQSxHQUFBLFdBQUEsSUFDQSxPQUFBLFFBT0EsSUFIQSxrQkFBQSxXQUFBLFNBQUEsUUFBQSxZQUFBLGFBQ0EsU0FBQSxNQUVBLE1BQUEsVUFBQSxRQUFBLFlBSUEsSUFIQSxHQUFBLE9BQUEsR0FDQSxPQUFBLFdBQUEsU0FFQSxNQUFBLFFBQUEsQ0FDQSxHQUFBLE9BQUEsV0FBQSxNQUNBLE9BQUEsU0FDQSxPQUFBLFdBSUEsVUFBQSxNQUFBLFVBQUEsU0FBQSxZQUFBLGVBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxHQUVBLFFBQUEsV0FBQSxTQUFBLE1BQUEsTUFBQSxZQUNBLEdBQUEsU0FBQSxTQUFBLE1BQUEsTUFBQSxXQUNBLFNBQUEsV0FDQSxTQUFBLFFBQ0EsT0FBQSxRQUlBLE9BQUEsUUE0Q0EsUUFBQSxLQUFBLFdBQUEsU0FBQSxTQUNBLEdBQUEsVUFBQSxJQUNBLE9BQUEsUUFPQSxJQUhBLGtCQUFBLFdBQUEsU0FBQSxRQUFBLFlBQUEsYUFDQSxTQUFBLE1BRUEsTUFBQSxVQUFBLFFBQUEsWUFJQSxJQUhBLEdBQUEsT0FBQSxHQUNBLE9BQUEsV0FBQSxTQUVBLE1BQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxXQUFBLE1BQ0EsUUFBQSxRQUNBLE9BQUEsV0FJQSxVQUFBLE1BQUEsVUFBQSxTQUFBLFlBQUEsZUFBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLEdBRUEsUUFBQSxXQUFBLFNBQUEsTUFBQSxNQUFBLFlBQ0EsR0FBQSxTQUFBLFNBQUEsTUFBQSxNQUFBLFdBQ0EsVUFBQSxVQUNBLFNBQUEsUUFDQSxPQUFBLFFBSUEsT0FBQSxRQXdEQSxRQUFBLFFBQUEsV0FBQSxTQUFBLFlBQUEsU0FDQSxJQUFBLFdBQUEsTUFBQSxZQUNBLElBQUEsU0FBQSxVQUFBLE9BQUEsQ0FDQSxVQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsRUFFQSxJQUFBLE9BQUEsR0FDQSxPQUFBLFdBQUEsTUFFQSxJQUFBLGdCQUFBLFFBSUEsSUFIQSxVQUNBLFlBQUEsYUFBQSxVQUVBLE1BQUEsUUFDQSxZQUFBLFNBQUEsWUFBQSxXQUFBLE9BQUEsTUFBQSxnQkFHQSxRQUFBLFdBQUEsU0FBQSxNQUFBLE1BQUEsWUFDQSxZQUFBLFNBQUEsU0FBQSxFQUFBLE9BQUEsU0FBQSxZQUFBLE1BQUEsTUFBQSxhQUdBLE9BQUEsYUF1QkEsUUFBQSxhQUFBLFdBQUEsU0FBQSxZQUFBLFNBQ0EsR0FBQSxTQUFBLFVBQUEsT0FBQSxDQUtBLE9BSkEsVUFBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLEdBQ0EsYUFBQSxXQUFBLFNBQUEsTUFBQSxNQUFBLFlBQ0EsWUFBQSxTQUFBLFNBQUEsRUFBQSxPQUFBLFNBQUEsWUFBQSxNQUFBLE1BQUEsY0FFQSxZQTBDQSxRQUFBLFFBQUEsV0FBQSxTQUFBLFNBRUEsTUFEQSxVQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsR0FDQSxPQUFBLFdBQUEsU0FBQSxNQUFBLE1BQUEsWUFDQSxPQUFBLFNBQUEsTUFBQSxNQUFBLGNBd0JBLFFBQUEsUUFBQSxXQUFBLEVBQUEsT0FJQSxHQUhBLFlBQUEsZ0JBQUEsWUFBQSxTQUNBLFdBQUEsT0FBQSxhQUVBLE1BQUEsR0FBQSxNQUNBLE1BQUEsWUFBQSxXQUFBLFdBQUEsRUFBQSxXQUFBLE9BQUEsSUFBQSxTQUVBLElBQUEsUUFBQSxRQUFBLFdBRUEsT0FEQSxRQUFBLE9BQUEsVUFBQSxVQUFBLEVBQUEsR0FBQSxPQUFBLFFBQ0EsT0FrQkEsUUFBQSxTQUFBLFlBQ0EsR0FBQSxPQUFBLEdBQ0EsT0FBQSxXQUFBLFdBQUEsT0FBQSxFQUNBLE9BQUEsTUFBQSxnQkFBQSxRQUFBLE9BQUEsRUFPQSxPQUxBLFNBQUEsV0FBQSxTQUFBLE9BQ0EsR0FBQSxNQUFBLFdBQUEsSUFBQSxNQUNBLFFBQUEsT0FBQSxPQUFBLE1BQ0EsT0FBQSxNQUFBLFFBRUEsT0F3QkEsUUFBQSxNQUFBLFlBQ0EsR0FBQSxRQUFBLFdBQUEsV0FBQSxPQUFBLENBQ0EsT0FBQSxnQkFBQSxRQUFBLE9BQUEsS0FBQSxZQUFBLE9BOENBLFFBQUEsTUFBQSxXQUFBLFNBQUEsU0FDQSxHQUFBLE9BQ0EsVUFBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLEVBRUEsSUFBQSxPQUFBLEdBQ0EsT0FBQSxXQUFBLFdBQUEsT0FBQSxDQUVBLElBQUEsZ0JBQUEsUUFDQSxPQUFBLE1BQUEsVUFDQSxPQUFBLFNBQUEsV0FBQSxPQUFBLE1BQUEsbUJBS0EsUUFBQSxXQUFBLFNBQUEsTUFBQSxNQUFBLFlBQ0EsUUFBQSxPQUFBLFNBQUEsTUFBQSxNQUFBLGNBR0EsU0FBQSxPQXFEQSxRQUFBLFFBQUEsV0FBQSxTQUFBLFNBQ0EsR0FBQSxPQUFBLEdBQ0EsTUFBQSxRQUFBLFVBQ0EsT0FBQSxXQUFBLFdBQUEsT0FBQSxFQUNBLE9BQUEsTUFBQSxnQkFBQSxRQUFBLE9BQUEsRUFvQkEsS0FsQkEsUUFDQSxTQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsSUFFQSxRQUFBLFdBQUEsU0FBQSxNQUFBLElBQUEsWUFDQSxHQUFBLFFBQUEsU0FBQSxPQUFBLFdBQ0EsT0FDQSxPQUFBLFNBQUEsSUFBQSxTQUFBLFNBQUEsS0FDQSxNQUFBLE9BQUEsUUFHQSxPQUFBLFNBQUEsWUFBQSxHQUFBLFNBQUEsTUFBQSxJQUFBLFlBRUEsT0FBQSxNQUFBLE1BQ0EsT0FBQSxNQUFBLFFBR0EsT0FBQSxPQUFBLE9BQ0EsT0FBQSxLQUFBLGtCQUNBLFVBQUEsQ0FDQSxHQUFBLFFBQUEsT0FBQSxPQUNBLFFBQUEsUUFBQSxPQUFBLE1BQ0EsT0FDQSxhQUFBLE9BQUEsVUFFQSxjQUFBLFFBRUEsTUFBQSxRQWlCQSxRQUFBLFNBQUEsWUFDQSxNQUFBLGFBQUEsZ0JBQUEsWUFBQSxPQUNBLE1BQUEsWUFFQSxPQUFBLFlBK0NBLFFBQUEsU0FBQSxPQUtBLElBSkEsR0FBQSxPQUFBLEdBQ0EsT0FBQSxNQUFBLE1BQUEsT0FBQSxFQUNBLFlBRUEsTUFBQSxRQUFBLENBQ0EsR0FBQSxPQUFBLE1BQUEsTUFDQSxRQUNBLE9BQUEsS0FBQSxPQUdBLE1BQUEsUUFtQkEsUUFBQSxZQUFBLE9BQ0EsTUFBQSxnQkFBQSxNQUFBLFlBQUEsV0FBQSxHQUFBLEVBQUEsSUE2Q0EsUUFBQSxXQUFBLE1BQUEsU0FBQSxTQUNBLEdBQUEsT0FBQSxHQUNBLE9BQUEsTUFBQSxNQUFBLE9BQUEsQ0FHQSxLQURBLFNBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxLQUNBLE1BQUEsUUFDQSxHQUFBLFNBQUEsTUFBQSxPQUFBLE1BQUEsT0FDQSxNQUFBLE1BR0EsT0FBQSxHQTZDQSxRQUFBLGVBQUEsTUFBQSxTQUFBLFNBQ0EsR0FBQSxRQUFBLE1BQUEsTUFBQSxPQUFBLENBRUEsS0FEQSxTQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsR0FDQSxVQUNBLEdBQUEsU0FBQSxNQUFBLFFBQUEsT0FBQSxPQUNBLE1BQUEsT0FHQSxPQUFBLEdBdURBLFFBQUEsT0FBQSxNQUFBLFNBQUEsU0FDQSxHQUFBLEdBQUEsRUFDQSxPQUFBLE1BQUEsTUFBQSxPQUFBLENBRUEsSUFBQSxnQkFBQSxXQUFBLE1BQUEsU0FBQSxDQUNBLEdBQUEsT0FBQSxFQUVBLEtBREEsU0FBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLEtBQ0EsTUFBQSxRQUFBLFNBQUEsTUFBQSxPQUFBLE1BQUEsUUFDQSxRQUlBLElBREEsRUFBQSxTQUNBLE1BQUEsR0FBQSxRQUNBLE1BQUEsT0FBQSxNQUFBLEdBQUEsU0FHQSxPQUFBLE9BQUEsTUFBQSxFQUFBLFVBQUEsVUFBQSxFQUFBLEdBQUEsU0E2Q0EsUUFBQSxTQUFBLE1BQUEsVUFBQSxTQUFBLFNBVUEsTUFSQSxpQkFBQSxZQUFBLE1BQUEsWUFDQSxRQUFBLFNBQ0EsU0FBQSxrQkFBQSxZQUFBLFNBQUEsUUFBQSxhQUFBLE1BQUEsS0FBQSxVQUNBLFdBQUEsR0FFQSxNQUFBLFdBQ0EsTUFBQSxJQUFBLE1BQUEsU0FBQSxVQUVBLFlBQUEsTUFBQSxXQTRCQSxRQUFBLFNBQUEsTUFBQSxNQUFBLFdBQ0EsR0FBQSxnQkFBQSxXQUFBLENBQ0EsR0FBQSxRQUFBLE1BQUEsTUFBQSxPQUFBLENBQ0EsV0FBQSxFQUFBLFVBQUEsVUFBQSxFQUFBLE9BQUEsV0FBQSxXQUFBLE1BQ0EsSUFBQSxVQUFBLENBQ0EsR0FBQSxPQUFBLFlBQUEsTUFBQSxNQUNBLE9BQUEsT0FBQSxTQUFBLE1BQUEsTUFBQSxHQUVBLE1BQUEsYUFBQSxNQUFBLE1BQUEsV0FzREEsUUFBQSxTQUFBLE1BQUEsU0FBQSxTQUNBLEdBQUEsR0FBQSxFQUNBLE9BQUEsTUFBQSxNQUFBLE9BQUEsQ0FFQSxJQUFBLGdCQUFBLFdBQUEsTUFBQSxTQUFBLENBQ0EsR0FBQSxPQUFBLE1BRUEsS0FEQSxTQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsR0FDQSxTQUFBLFNBQUEsTUFBQSxPQUFBLE1BQUEsUUFDQSxRQUdBLEdBQUEsTUFBQSxVQUFBLFFBQUEsRUFBQSxVQUFBLENBRUEsT0FBQSxPQUFBLE1BQUEsRUFBQSxVQUFBLFVBQUEsRUFBQSxPQUFBLEdBQUEsU0FrQkEsUUFBQSxnQkFTQSxJQVJBLEdBQUEsU0FDQSxVQUFBLEdBQ0EsV0FBQSxVQUFBLE9BQ0EsT0FBQSxXQUNBLFFBQUEsYUFDQSxhQUFBLFVBQUEsWUFDQSxLQUFBLGFBRUEsVUFBQSxZQUFBLENBQ0EsR0FBQSxPQUFBLFVBQUEsWUFDQSxRQUFBLFFBQUEsWUFBQSxVQUNBLEtBQUEsS0FBQSxPQUNBLE9BQUEsS0FBQSxjQUFBLE1BQUEsUUFBQSxnQkFDQSxZQUFBLFVBQUEsS0FBQSxXQUFBLFFBR0EsR0FBQSxPQUFBLEtBQUEsR0FDQSxNQUFBLEdBQ0EsT0FBQSxNQUFBLE1BQUEsT0FBQSxFQUNBLFNBRUEsT0FBQSxPQUFBLE1BQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxPQUFBLEVBR0EsSUFGQSxNQUFBLE1BQUEsUUFFQSxNQUFBLGFBQUEsTUFBQSxPQUFBLFFBQUEsS0FBQSxRQUFBLEVBQUEsQ0FHQSxJQUZBLFVBQUEsWUFDQSxPQUFBLE1BQUEsS0FBQSxTQUNBLFdBRUEsR0FEQSxNQUFBLE9BQUEsWUFDQSxNQUFBLGFBQUEsTUFBQSxPQUFBLFFBQUEsS0FBQSxXQUFBLFFBQUEsRUFDQSxRQUFBLE1BR0EsUUFBQSxLQUFBLFFBR0EsS0FBQSxjQUNBLE1BQUEsT0FBQSxZQUNBLE9BQ0EsY0FBQSxNQUtBLE9BRkEsY0FBQSxRQUNBLGFBQUEsTUFDQSxPQXNEQSxRQUFBLE1BQUEsTUFBQSxTQUFBLFNBQ0EsR0FBQSxHQUFBLEVBQ0EsT0FBQSxNQUFBLE1BQUEsT0FBQSxDQUVBLElBQUEsZ0JBQUEsV0FBQSxNQUFBLFNBQUEsQ0FDQSxHQUFBLE9BQUEsTUFFQSxLQURBLFNBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxHQUNBLFNBQUEsU0FBQSxNQUFBLE9BQUEsTUFBQSxRQUNBLFFBSUEsSUFEQSxFQUFBLFNBQ0EsTUFBQSxHQUFBLFFBQ0EsTUFBQSxPQUFBLE1BQUEsT0FBQSxHQUFBLFNBR0EsT0FBQSxPQUFBLE1BQUEsVUFBQSxFQUFBLE9BQUEsSUErQkEsUUFBQSxhQUFBLE1BQUEsTUFBQSxXQUNBLEdBQUEsT0FBQSxNQUFBLE1BQUEsT0FBQSxDQUlBLEtBSEEsZ0JBQUEsYUFDQSxPQUFBLEVBQUEsVUFBQSxVQUFBLEVBQUEsTUFBQSxXQUFBLFVBQUEsVUFBQSxNQUFBLElBQUEsR0FFQSxTQUNBLEdBQUEsTUFBQSxTQUFBLE1BQ0EsTUFBQSxNQUdBLE9BQUEsR0FxQkEsUUFBQSxNQUFBLE9BTUEsSUFMQSxHQUFBLE1BQUEsVUFDQSxVQUFBLEVBQ0EsV0FBQSxLQUFBLE9BQ0EsT0FBQSxNQUFBLE1BQUEsT0FBQSxJQUVBLFVBQUEsWUFHQSxJQUZBLEdBQUEsT0FBQSxHQUNBLE1BQUEsS0FBQSxhQUNBLE1BQUEsUUFDQSxNQUFBLFNBQUEsUUFDQSxPQUFBLEtBQUEsTUFBQSxRQUFBLEdBQ0EsU0FJQSxPQUFBLE9Bb0NBLFFBQUEsT0FBQSxNQUFBLElBQUEsTUFDQSxPQUFBLE9BQUEsRUFDQSxLQUFBLGdCQUFBLE1BQUEsTUFBQSxNQUFBLEVBRUEsTUFBQSxNQUNBLElBQUEsTUFDQSxNQUFBLEVBUUEsS0FKQSxHQUFBLE9BQUEsR0FDQSxPQUFBLFVBQUEsRUFBQSxNQUFBLElBQUEsUUFBQSxNQUFBLEtBQ0EsT0FBQSxNQUFBLFVBRUEsTUFBQSxRQUNBLE9BQUEsT0FBQSxNQUNBLE9BQUEsSUFFQSxPQUFBLFFBb0NBLFFBQUEsUUFBQSxNQUFBLFNBQUEsU0FDQSxHQUFBLE9BQUEsR0FDQSxPQUFBLE1BQUEsTUFBQSxPQUFBLEVBQ0EsU0FHQSxLQURBLFNBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxLQUNBLE1BQUEsUUFBQSxDQUNBLEdBQUEsT0FBQSxNQUFBLE1BQ0EsVUFBQSxNQUFBLE1BQUEsU0FDQSxPQUFBLEtBQUEsT0FDQSxPQUFBLEtBQUEsTUFBQSxRQUFBLEdBQ0EsVUFHQSxNQUFBLFFBd0RBLFFBQUEsTUFBQSxNQUFBLFNBQUEsU0FDQSxHQUFBLGdCQUFBLFdBQUEsTUFBQSxTQUFBLENBQ0EsR0FBQSxHQUFBLEVBQ0EsTUFBQSxHQUNBLE9BQUEsTUFBQSxNQUFBLE9BQUEsQ0FHQSxLQURBLFNBQUEsT0FBQSxlQUFBLFNBQUEsUUFBQSxLQUNBLE1BQUEsUUFBQSxTQUFBLE1BQUEsT0FBQSxNQUFBLFFBQ0EsUUFHQSxHQUFBLE1BQUEsVUFBQSxRQUFBLEVBQUEsVUFBQSxFQUFBLFNBRUEsT0FBQSxPQUFBLE1BQUEsR0FvREEsUUFBQSxhQUFBLE1BQUEsTUFBQSxTQUFBLFNBQ0EsR0FBQSxLQUFBLEVBQ0EsS0FBQSxNQUFBLE1BQUEsT0FBQSxHQU1BLEtBSEEsU0FBQSxTQUFBLE9BQUEsZUFBQSxTQUFBLFFBQUEsR0FBQSxTQUNBLE1BQUEsU0FBQSxPQUVBLEtBQUEsS0FBQSxDQUNBLEdBQUEsS0FBQSxJQUFBLE9BQUEsQ0FDQSxVQUFBLE1BQUEsTUFBQSxNQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsSUFFQSxNQUFBLEtBa0JBLFFBQUEsU0FDQSxNQUFBLFVBQUEsWUFBQSxXQUFBLEdBQUEsSUFnREEsUUFBQSxNQUFBLE1BQUEsU0FBQSxTQUFBLFNBVUEsTUFSQSxpQkFBQSxXQUFBLE1BQUEsV0FDQSxRQUFBLFNBQ0EsU0FBQSxrQkFBQSxXQUFBLFNBQUEsUUFBQSxZQUFBLE1BQUEsS0FBQSxTQUNBLFVBQUEsR0FFQSxNQUFBLFdBQ0EsU0FBQSxPQUFBLGVBQUEsU0FBQSxRQUFBLElBRUEsU0FBQSxNQUFBLFNBQUEsVUFtQkEsUUFBQSxTQUFBLE9BQ0EsTUFBQSxnQkFBQSxNQUFBLE1BQUEsVUFBQSxJQXFCQSxRQUFBLE9BSUEsSUFIQSxHQUFBLE9BQUEsR0FDQSxPQUFBLFVBQUEsU0FFQSxNQUFBLFFBQUEsQ0FDQSxHQUFBLE9BQUEsVUFBQSxNQUNBLElBQUEsUUFBQSxRQUFBLFlBQUEsT0FDQSxHQUFBLFFBQUEsT0FBQSxTQUFBLGVBQUEsT0FBQSxPQUFBLE9BQUEsZUFBQSxNQUFBLFVBQUEsTUFHQSxNQUFBLFlBb0JBLFFBQUEsT0FNQSxJQUxBLEdBQUEsT0FBQSxVQUFBLE9BQUEsRUFBQSxVQUFBLFVBQUEsR0FDQSxNQUFBLEdBQ0EsT0FBQSxNQUFBLElBQUEsTUFBQSxNQUFBLFdBQUEsRUFDQSxPQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsVUFFQSxNQUFBLFFBQ0EsT0FBQSxPQUFBLE1BQUEsTUFBQSxNQUVBLE9BQUEsUUFzQkEsUUFBQSxXQUFBLEtBQUEsUUFDQSxHQUFBLE9BQUEsR0FDQSxPQUFBLEtBQUEsS0FBQSxPQUFBLEVBQ0EsU0FLQSxLQUhBLFNBQUEsUUFBQSxRQUFBLEtBQUEsTUFDQSxhQUVBLE1BQUEsUUFBQSxDQUNBLEdBQUEsS0FBQSxLQUFBLE1BQ0EsUUFDQSxPQUFBLEtBQUEsT0FBQSxPQUNBLE1BQ0EsT0FBQSxJQUFBLElBQUEsSUFBQSxJQUdBLE1BQUEsUUE4QkEsUUFBQSxPQUFBLEVBQUEsTUFDQSxJQUFBLFdBQUEsTUFDQSxLQUFBLElBQUEsVUFFQSxPQUFBLFlBQ0EsUUFBQSxFQUFBLEVBQ0EsS0FBQSxNQUFBLEtBQUEsV0FEQSxRQTZCQSxRQUFBLE1BQUEsS0FBQSxTQUNBLE1BQUEsV0FBQSxPQUFBLEVBQUEsY0FBQSxLQUFBLEdBQUEsTUFBQSxVQUFBLEdBQUEsS0FBQSxTQUFBLGNBQUEsS0FBQSxFQUFBLEtBQUEsS0FBQSxTQTRCQSxRQUFBLFNBQUEsUUFLQSxJQUpBLEdBQUEsT0FBQSxVQUFBLE9BQUEsRUFBQSxZQUFBLFdBQUEsR0FBQSxFQUFBLEdBQUEsVUFBQSxRQUNBLE1BQUEsR0FDQSxPQUFBLE1BQUEsU0FFQSxNQUFBLFFBQUEsQ0FDQSxHQUFBLEtBQUEsTUFBQSxNQUNBLFFBQUEsS0FBQSxjQUFBLE9BQUEsS0FBQSxFQUFBLEtBQUEsS0FBQSxRQUVBLE1BQUEsUUFzQ0EsUUFBQSxTQUFBLE9BQUEsS0FDQSxNQUFBLFdBQUEsT0FBQSxFQUFBLGNBQUEsSUFBQSxHQUFBLE1BQUEsVUFBQSxHQUFBLEtBQUEsUUFBQSxjQUFBLElBQUEsRUFBQSxLQUFBLEtBQUEsUUFrQ0EsUUFBQSxXQUlBLElBSEEsR0FBQSxPQUFBLFVBQ0EsT0FBQSxNQUFBLE9BRUEsVUFDQSxJQUFBLFdBQUEsTUFBQSxTQUNBLEtBQUEsSUFBQSxVQUdBLE9BQUEsWUFJQSxJQUhBLEdBQUEsTUFBQSxVQUNBLE9BQUEsTUFBQSxPQUVBLFVBQ0EsTUFBQSxNQUFBLFFBQUEsTUFBQSxLQUFBLE1BRUEsT0FBQSxNQUFBLElBaUNBLFFBQUEsT0FBQSxLQUFBLE9BRUEsTUFEQSxPQUFBLGdCQUFBLE9BQUEsT0FBQSxPQUFBLEtBQUEsT0FDQSxjQUFBLEtBQUEsRUFBQSxLQUFBLEtBQUEsS0FBQSxPQTJDQSxRQUFBLFVBQUEsS0FBQSxLQUFBLFNBQ0EsR0FBQSxNQUNBLGFBQ0EsT0FDQSxNQUNBLFFBQ0EsVUFDQSxhQUNBLFdBQUEsRUFDQSxTQUFBLEVBQ0EsVUFBQSxDQUVBLEtBQUEsV0FBQSxNQUNBLEtBQUEsSUFBQSxVQUdBLElBREEsS0FBQSxVQUFBLEVBQUEsT0FBQSxFQUNBLFdBQUEsRUFBQSxDQUNBLEdBQUEsVUFBQSxDQUNBLFdBQUEsTUFDQSxVQUFBLFdBQ0EsUUFBQSxRQUFBLFFBQ0EsUUFBQSxXQUFBLFdBQUEsVUFBQSxLQUFBLFFBQUEsVUFBQSxHQUNBLFNBQUEsWUFBQSxTQUFBLFFBQUEsU0FBQSxTQUVBLElBQUEsU0FBQSxXQUNBLEdBQUEsV0FBQSxNQUFBLE1BQUEsTUFDQSxJQUFBLEdBQUEsVUFBQSxDQUNBLGNBQ0EsYUFBQSxhQUVBLElBQUEsVUFBQSxZQUNBLGNBQUEsVUFBQSxhQUFBLFVBQ0EsV0FDQSxXQUFBLE1BQ0EsT0FBQSxLQUFBLE1BQUEsUUFBQSxNQUNBLFdBQUEsZUFDQSxLQUFBLFFBQUEsV0FJQSxXQUFBLFdBQUEsUUFBQSxZQUlBLFdBQUEsV0FDQSxXQUNBLGFBQUEsV0FFQSxhQUFBLFVBQUEsYUFBQSxXQUNBLFVBQUEsVUFBQSxRQUNBLFdBQUEsTUFDQSxPQUFBLEtBQUEsTUFBQSxRQUFBLE1BQ0EsV0FBQSxlQUNBLEtBQUEsUUFBQSxPQUtBLE9BQUEsWUFNQSxHQUxBLEtBQUEsVUFDQSxNQUFBLE1BQ0EsUUFBQSxLQUNBLGFBQUEsV0FBQSxZQUFBLFNBRUEsV0FBQSxFQUNBLEdBQUEsYUFBQSxVQUFBLGNBQ0EsQ0FDQSxjQUFBLFVBQ0EsV0FBQSxNQUVBLElBQUEsV0FBQSxTQUFBLE1BQUEsWUFDQSxTQUFBLEdBQUEsU0FFQSxXQUNBLGVBQ0EsYUFBQSxhQUFBLGVBRUEsV0FBQSxNQUNBLE9BQUEsS0FBQSxNQUFBLFFBQUEsT0FDQSxlQUNBLGFBQUEsV0FBQSxXQUFBLFlBZUEsTUFaQSxXQUFBLFVBQ0EsVUFBQSxhQUFBLFdBQ0EsV0FBQSxPQUFBLFVBQ0EsVUFBQSxXQUFBLFFBQUEsT0FFQSxjQUNBLFVBQUEsRUFDQSxPQUFBLEtBQUEsTUFBQSxRQUFBLFFBRUEsVUFBQSxXQUFBLGVBQ0EsS0FBQSxRQUFBLE1BRUEsUUFvQkEsUUFBQSxPQUFBLE1BQ0EsSUFBQSxXQUFBLE1BQ0EsS0FBQSxJQUFBLFVBRUEsSUFBQSxNQUFBLE1BQUEsVUFBQSxFQUNBLE9BQUEsWUFBQSxXQUNBLEtBQUEsTUFBQSxVQUFBLE9BQ0EsR0FvQkEsUUFBQSxPQUFBLEtBQUEsTUFDQSxJQUFBLFdBQUEsTUFDQSxLQUFBLElBQUEsVUFFQSxJQUFBLE1BQUEsTUFBQSxVQUFBLEVBQ0EsT0FBQSxZQUFBLFdBQ0EsS0FBQSxNQUFBLFVBQUEsT0FDQSxNQXlDQSxRQUFBLFNBQUEsS0FBQSxVQUNBLElBQUEsV0FBQSxNQUNBLEtBQUEsSUFBQSxVQUVBLElBQUEsVUFBQSxXQUNBLEdBQUEsT0FBQSxTQUFBLE1BQ0EsSUFBQSxTQUFBLFNBQUEsTUFBQSxLQUFBLFdBQUEsVUFBQSxVQUFBLEVBRUEsT0FBQSxnQkFBQSxLQUFBLE1BQUEsS0FBQSxNQUFBLEtBQUEsTUFBQSxLQUFBLEtBQUEsTUFBQSxLQUFBLFdBR0EsT0FEQSxVQUFBLFNBQ0EsU0FxQkEsUUFBQSxNQUFBLE1BQ0EsR0FBQSxLQUNBLE1BRUEsS0FBQSxXQUFBLE1BQ0EsS0FBQSxJQUFBLFVBRUEsT0FBQSxZQUNBLE1BQUEsS0FDQSxRQUVBLEtBQUEsRUFDQSxPQUFBLEtBQUEsTUFBQSxLQUFBLFdBR0EsS0FBQSxLQUNBLFNBdUJBLFFBQUEsU0FBQSxNQUNBLE1BQUEsZUFBQSxLQUFBLEdBQUEsTUFBQSxVQUFBLElBK0JBLFFBQUEsY0FBQSxNQUNBLE1BQUEsZUFBQSxLQUFBLEdBQUEsS0FBQSxNQUFBLFVBQUEsSUFtQ0EsUUFBQSxVQUFBLEtBQUEsS0FBQSxTQUNBLEdBQUEsVUFBQSxFQUNBLFVBQUEsQ0FFQSxLQUFBLFdBQUEsTUFDQSxLQUFBLElBQUEsVUFZQSxPQVZBLFlBQUEsRUFDQSxTQUFBLEVBQ0EsU0FBQSxXQUNBLFFBQUEsV0FBQSxTQUFBLFFBQUEsUUFBQSxRQUNBLFNBQUEsWUFBQSxTQUFBLFFBQUEsU0FBQSxVQUVBLGdCQUFBLFFBQUEsUUFDQSxnQkFBQSxRQUFBLEtBQ0EsZ0JBQUEsU0FBQSxTQUVBLFNBQUEsS0FBQSxLQUFBLGlCQXlCQSxRQUFBLE1BQUEsTUFBQSxTQUNBLE1BQUEsZUFBQSxRQUFBLElBQUEsUUFxQkEsUUFBQSxVQUFBLE9BQ0EsTUFBQSxZQUNBLE1BQUEsUUFvQ0EsUUFBQSxnQkFBQSxLQUFBLFFBQUEsVUFDQSxHQUFBLFlBQUEsS0FDQSxJQUFBLE1BQUEsTUFBQSxZQUFBLEtBQ0EsTUFBQSxvQkFBQSxLQUFBLFFBQUEsU0FHQSxJQUFBLFVBQUEsS0FDQSxNQUFBLFVBQUEsS0FFQSxJQUFBLE9BQUEsS0FBQSxNQUNBLElBQUEsTUFBQSxHQUNBLEVBQUEsS0FBQSxJQUdBLE9BQUEsSUFBQSxNQUFBLFFBQUEsSUFBQSxHQUFBLFNBQUEsR0FRQSxTQUFBLFFBSUEsSUFIQSxHQUFBLFFBQUEsTUFBQSxPQUNBLFFBQUEsRUFFQSxXQUNBLE9BQUEsWUFBQSxPQUFBLE1BQUEsU0FBQSxLQUFBLE1BQUEsU0FBQSxNQUFBLE1BSUEsTUFBQSxTQWRBLFNBQUEsUUFDQSxHQUFBLEdBQUEsT0FBQSxJQUNBLE9BQUEsS0FBQSxJQUFBLElBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxJQStCQSxRQUFBLFFBQUEsUUFDQSxNQUFBLE9BQUEsT0FBQSxHQUFBLE9BQUEsUUFBQSxRQUFBLGdCQUFBLGdCQWtCQSxRQUFBLFVBQUEsT0FDQSxNQUFBLE9BZ0NBLFFBQUEsT0FBQSxPQUFBLE9BQUEsU0FDQSxHQUFBLFFBQUEsRUFDQSxZQUFBLFFBQUEsVUFBQSxPQUVBLFVBQUEsU0FBQSxZQUFBLFVBQ0EsTUFBQSxVQUNBLFFBQUEsUUFFQSxLQUFBLGNBQ0EsT0FBQSxPQUNBLE9BQUEsT0FDQSxZQUFBLFVBQUEsU0FFQSxXQUFBLEVBQ0EsT0FBQSxFQUNBLFNBQUEsVUFBQSxTQUFBLFdBQ0EsTUFBQSxRQUFBLE1BRUEsSUFBQSxNQUFBLE9BQ0EsT0FBQSxXQUFBLEtBRUEsU0FBQSxZQUFBLFNBQUEsWUFDQSxHQUFBLE1BQUEsT0FBQSxZQUFBLE9BQUEsV0FDQSxVQUNBLEtBQUEsVUFBQSxZQUFBLFdBQ0EsR0FBQSxVQUFBLEtBQUEsVUFDQSxNQUFBLEtBQUEsWUFDQSxNQUFBLE1BRUEsTUFBQSxNQUFBLEtBQUEsVUFDQSxJQUFBLFFBQUEsS0FBQSxNQUFBLE9BQUEsS0FDQSxJQUFBLE9BQUEsU0FBQSxDQUNBLEdBQUEsUUFBQSxRQUFBLFNBQUEsUUFDQSxNQUFBLEtBRUEsUUFBQSxHQUFBLE1BQUEsUUFDQSxPQUFBLFVBQUEsU0FFQSxNQUFBLFlBbUJBLFFBQUEsY0FFQSxNQURBLFNBQUEsRUFBQSxRQUNBLEtBZ0JBLFFBQUEsU0FzRUEsUUFBQSxVQUFBLEtBQ0EsTUFBQSxVQUFBLFFBQ0EsTUFBQSxRQUFBLE1BZ0NBLFFBQUEsUUFBQSxJQUFBLElBQUEsVUFDQSxHQUFBLE9BQUEsTUFBQSxJQUNBLE1BQUEsTUFBQSxHQXFCQSxJQW5CQSxNQUFBLFdBQ0EsaUJBQUEsTUFBQSxPQUNBLFNBQUEsSUFDQSxJQUFBLEdBQ0EsT0FBQSxpQkFBQSxPQUNBLFNBQUEsSUFDQSxPQUFBLElBR0EsT0FBQSxRQUNBLElBQUEsR0FFQSxLQUFBLEtBQUEsRUFDQSxPQUNBLElBQUEsSUFDQSxJQUFBLEdBRUEsS0FBQSxLQUFBLEVBRUEsVUFBQSxJQUFBLEdBQUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxNQUFBLGNBQ0EsT0FBQSxXQUFBLElBQUEsTUFBQSxJQUFBLElBQUEsV0FBQSxRQUFBLEtBQUEsSUFBQSxPQUFBLEtBQUEsS0FFQSxNQUFBLFlBQUEsSUFBQSxLQStCQSxRQUFBLFFBQUEsT0FBQSxLQUNBLEdBQUEsT0FBQSxDQUNBLEdBQUEsT0FBQSxPQUFBLElBQ0EsT0FBQSxZQUFBLE9BQUEsT0FBQSxPQUFBLE9BMkZBLFFBQUEsVUFBQSxLQUFBLEtBQUEsU0FLQSxHQUFBLFVBQUEsT0FBQSxnQkFDQSxNQUFBLE9BQUEsTUFBQSxJQUdBLFFBQUEsWUFBQSxRQUFBLFNBRUEsSUFJQSxjQUpBLFFBQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxTQUNBLFlBQUEsS0FBQSxTQUNBLGNBQUEsT0FBQSxTQUdBLE1BQUEsRUFDQSxZQUFBLFFBQUEsYUFBQSxVQUNBLE9BQUEsV0FHQSxhQUFBLFFBQ0EsUUFBQSxRQUFBLFdBQUEsT0FBQSxJQUNBLFlBQUEsT0FBQSxLQUNBLGNBQUEsY0FBQSxhQUFBLFdBQUEsT0FBQSxLQUNBLFFBQUEsVUFBQSxXQUFBLE9BQUEsS0FBQSxJQUVBLE1BQUEsUUFBQSxhQUFBLFNBQUEsTUFBQSxZQUFBLGlCQUFBLGdCQUFBLGNBQUEsUUFxQkEsTUFwQkEsb0JBQUEsaUJBQUEsaUJBR0EsUUFBQSxLQUFBLE1BQUEsTUFBQSxRQUFBLFFBQUEsa0JBQUEsa0JBR0EsY0FDQSxRQUFBLFlBQUEsWUFBQSxVQUVBLGdCQUNBLGNBQUEsRUFDQSxRQUFBLE9BQUEsY0FBQSxlQUVBLG1CQUNBLFFBQUEsaUJBQUEsaUJBQUEsK0JBRUEsTUFBQSxPQUFBLE1BQUEsT0FJQSxRQUdBLFFBQUEsTUFJQSxJQUFBLFVBQUEsUUFBQSxTQUNBLFlBQUEsUUFFQSxlQUNBLFNBQUEsTUFDQSxPQUFBLFNBQUEsU0FBQSxRQUFBLE9BQUEsU0FHQSxRQUFBLGFBQUEsT0FBQSxRQUFBLHFCQUFBLElBQUEsUUFDQSxRQUFBLG9CQUFBLE1BQ0EsUUFBQSxzQkFBQSxPQUdBLE9BQUEsWUFBQSxTQUFBLFNBQ0EsWUFBQSxHQUFBLFNBQUEsUUFBQSxTQUFBLGFBQ0EscUNBQ0EsYUFBQSx1RkFDQSxPQUVBLE9BQ0EsZUFJQSxJQUFBLFdBQUEsd0JBQUEsUUFBQSxXQUFBLDJCQUFBLG1CQUFBLEtBQUEsTUFFQSxLQUNBLEdBQUEsUUFBQSxTQUFBLFlBQUEsVUFBQSxPQUFBLFdBQUEsTUFBQSxVQUFBLGVBQ0EsTUFBQSxHQUVBLEtBREEsR0FBQSxPQUFBLE9BQ0EsRUFFQSxNQUFBLE1BQ0EsT0FBQSxPQUtBLE9BQUEsT0FBQSxPQUNBLFFBMkJBLFFBQUEsT0FBQSxFQUFBLFNBQUEsU0FDQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsQ0FDQSxJQUFBLE9BQUEsR0FDQSxPQUFBLE1BQUEsRUFHQSxLQURBLFNBQUEsbUJBQUEsU0FBQSxRQUFBLEtBQ0EsTUFBQSxHQUNBLE9BQUEsT0FBQSxTQUFBLE1BRUEsT0FBQSxRQW1CQSxRQUFBLFVBQUEsUUFDQSxNQUFBLE9BQUEsT0FBQSxHQUFBLE9BQUEsUUFBQSxRQUFBLGNBQUEsa0JBb0JBLFFBQUEsVUFBQSxRQUNBLEdBQUEsTUFBQSxTQUNBLE9BQUEsUUFBQSxNQUFBLE9BQUEsR0FBQSxRQUFBO0NBOEJBLFFBQUEsT0FBQSxPQUdBLE1BRkEsT0FBQSxHQUFBLGVBQUEsT0FDQSxNQUFBLFdBQUEsRUFDQSxNQXdCQSxRQUFBLEtBQUEsTUFBQSxhQUVBLE1BREEsYUFBQSxPQUNBLE1BNkJBLFFBQUEsZ0JBRUEsTUFEQSxNQUFBLFdBQUEsRUFDQSxLQWdCQSxRQUFBLG1CQUNBLE1BQUEsUUFBQSxLQUFBLGFBaUJBLFFBQUEsa0JBQ0EsTUFBQSxNQUFBLFlBamlNQSxRQUFBLFFBQUEsRUFBQSxTQUFBLEtBQUEsU0FBQSxRQUFBLEVBQUEsS0FBQSxLQUFBLGVBQUEsSUFHQSxJQUFBLE9BQUEsUUFBQSxNQUNBLFFBQUEsUUFBQSxRQUNBLEtBQUEsUUFBQSxLQUNBLFNBQUEsUUFBQSxTQUNBLEtBQUEsUUFBQSxLQUNBLE9BQUEsUUFBQSxPQUNBLE9BQUEsUUFBQSxPQUNBLE9BQUEsUUFBQSxPQUNBLE9BQUEsUUFBQSxPQUNBLFVBQUEsUUFBQSxVQVFBLFlBR0EsWUFBQSxPQUFBLFVBR0EsUUFBQSxRQUFBLEVBR0EsU0FBQSxZQUFBLFNBR0EsU0FBQSxPQUFBLElBQ0EsT0FBQSxVQUNBLFFBQUEsc0JBQUEsUUFDQSxRQUFBLHdCQUFBLE9BQUEsS0FJQSxLQUFBLEtBQUEsS0FDQSxhQUFBLFFBQUEsYUFDQSxNQUFBLEtBQUEsTUFDQSxXQUFBLFNBQUEsVUFBQSxTQUNBLGVBQUEsU0FBQSxlQUFBLE9BQUEsaUJBQUEsZUFDQSxlQUFBLFlBQUEsZUFDQSxLQUFBLFNBQUEsS0FDQSxXQUFBLFFBQUEsV0FDQSxPQUFBLFNBQUEsT0FDQSxRQUFBLFNBQUEsUUFHQSxlQUFBLFdBRUEsSUFDQSxHQUFBLE1BQ0EsS0FBQSxTQUFBLEtBQUEsT0FBQSxpQkFBQSxLQUNBLE9BQUEsS0FBQSxFQUFBLEVBQUEsSUFBQSxLQUNBLE1BQUEsSUFDQSxNQUFBLFdBSUEsYUFBQSxTQUFBLGFBQUEsT0FBQSxTQUFBLGFBQ0EsY0FBQSxTQUFBLGNBQUEsTUFBQSxVQUFBLGNBQ0EsZUFBQSxRQUFBLFNBQ0EsWUFBQSxRQUFBLE1BQ0EsV0FBQSxTQUFBLFdBQUEsT0FBQSxPQUFBLFdBQ0EsVUFBQSxLQUFBLElBQ0EsVUFBQSxLQUFBLElBQ0EsZUFBQSxRQUFBLFNBQ0EsYUFBQSxLQUFBLE9BR0EsY0FDQSxhQUFBLFlBQUEsTUFDQSxZQUFBLFdBQUEsUUFDQSxZQUFBLFdBQUEsS0FDQSxZQUFBLFdBQUEsU0FDQSxZQUFBLGFBQUEsT0FDQSxZQUFBLGFBQUEsT0FDQSxZQUFBLGFBQUEsT0FDQSxZQUFBLGFBQUEsT0F5RkEsY0FBQSxVQUFBLE9BQUEsU0FTQSxJQUFBLFNBQUEsT0FBQSxVQVNBLFNBQUEsWUFBQSxTQUFBLFFBQUEsYUFBQSxPQUFBLEtBQUEsY0FRQSxRQUFBLFVBQUEsZ0JBQUEsVUFBQSxLQVdBLE9BQUEsa0JBUUEsT0FBQSxtQkFRQSxTQUFBLGtCQVFBLFlBQUEsY0FRQSxTQUFBLEdBUUEsU0FRQSxFQUFBLFNBcUpBLGVBQ0EsV0FBQSxXQUNBLFFBQUEsV0FDQSxNQUFBLFVBQUEsV0FDQSxHQUFBLFNBQUEsV0FBQSxDQUNBLE9BQUEsVUFBQSxTQUNBLElBQUEsUUFBQSxHQUFBLE9BQ0EsUUFBQSxVQUFBLEtBRUEsTUFBQSxTQUFBLFFBQUEsYUEyb0JBLElBQUEsYUFBQSxlQUFBLFNBQUEsS0FBQSxPQUNBLFdBQUEsTUFBQSxNQUNBLGVBQUEsS0FBQSxlQUFBLGFBRkEsS0F1RkEsUUFBQSxlQUFBLFNBQUEsT0FDQSxNQUFBLFFBQUEsZ0JBQUEsUUFBQSxnQkFBQSxPQUFBLFFBQ0EsU0FBQSxLQUFBLFFBQUEsYUFBQSxHQVlBLFNBQUEsU0FBQSxRQUNBLEdBQUEsT0FBQSxTQUFBLE9BQ0EsU0FDQSxLQUFBLFNBQUEsTUFBQSxPQUNBLEtBQUEsa0JBQUEsU0FBQSxNQUFBLE9BQ0EsS0FBQSxRQUFBLFVBQ0EsZUFBQSxLQUFBLFNBQUEsUUFDQSxPQUFBLEtBQUEsTUFHQSxPQUFBLFNBZ0JBLEtBQUEsV0FBQSxTQUFBLFFBQ0EsTUFBQSxVQUFBLFFBR0EsV0FBQSxZQUpBLFNBZUEsYUFDQSxJQUFBLFFBQ0EsSUFBQSxPQUNBLElBQUEsT0FDQSxJQUFBLFNBQ0EsSUFBQSxTQUlBLGNBQUEsT0FBQSxhQUdBLGNBQUEsT0FBQSxJQUFBLEtBQUEsZUFBQSxLQUFBLEtBQUEsSUFBQSxLQUNBLGdCQUFBLE9BQUEsSUFBQSxLQUFBLGFBQUEsS0FBQSxJQUFBLElBQUEsS0FrQ0EsT0FBQSxTQUFBLE9BQUEsT0FBQSxPQUNBLEdBQUEsT0FBQSxTQUFBLE9BQ0EsT0FBQSxRQUNBLEtBQUEsU0FBQSxNQUFBLE9BQ0EsSUFBQSxNQUFBLFVBQ0EsVUFBQSxFQUNBLFdBQUEsZ0JBQUEsT0FBQSxFQUFBLEtBQUEsTUFDQSxJQUFBLFdBQUEsR0FBQSxrQkFBQSxNQUFBLFdBQUEsR0FDQSxHQUFBLFVBQUEsbUJBQUEsT0FBQSxXQUFBLEdBQUEsS0FBQSxjQUFBLE9BQ0EsWUFBQSxHQUFBLGtCQUFBLE1BQUEsV0FBQSxLQUNBLFNBQUEsT0FBQSxZQUVBLFFBQUEsVUFBQSxZQUVBLEdBREEsU0FBQSxLQUFBLFdBQ0EsVUFBQSxrQkFBQSxXQUtBLElBSkEsR0FBQSxVQUFBLEdBQ0EsU0FBQSxrQkFBQSxZQUFBLEtBQUEsVUFDQSxPQUFBLFNBQUEsU0FBQSxPQUFBLElBRUEsU0FBQSxRQUNBLE1BQUEsU0FBQSxVQUNBLE9BQUEsT0FBQSxTQUFBLFNBQUEsT0FBQSxPQUFBLFNBQUEsUUFBQSxTQUFBLE1BSUEsT0FBQSxTQThKQSxTQUFBLFNBQUEsT0FBQSxPQUFBLE9BQ0EsR0FBQSxPQUFBLFNBQUEsT0FDQSxPQUFBLFFBQ0EsS0FBQSxTQUFBLE1BQUEsT0FJQSxLQUhBLEdBQUEsTUFBQSxVQUNBLFVBQUEsRUFDQSxXQUFBLGdCQUFBLE9BQUEsRUFBQSxLQUFBLFNBQ0EsVUFBQSxZQUVBLEdBREEsU0FBQSxLQUFBLFdBQ0EsVUFBQSxrQkFBQSxXQUtBLElBSkEsR0FBQSxVQUFBLEdBQ0EsU0FBQSxrQkFBQSxZQUFBLEtBQUEsVUFDQSxPQUFBLFNBQUEsU0FBQSxPQUFBLElBRUEsU0FBQSxRQUNBLE1BQUEsU0FBQSxVQUNBLG1CQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsU0FBQSxPQUlBLE9BQUEsU0E4SUEsTUFBQSxTQUFBLFdBQUEsU0FBQSxTQUNBLEdBQUEsT0FBQSxTQUFBLFdBQ0EsT0FBQSxRQUNBLEtBQUEsU0FBQSxNQUFBLE9BQ0EsS0FBQSxrQkFBQSxXQUFBLE1BQUEsT0FDQSxVQUFBLFVBQUEsbUJBQUEsU0FBQSxTQUFBLG1CQUFBLFNBQUEsUUFBQSxFQUNBLEtBQUEsUUFBQSxVQUNBLEdBQUEsU0FBQSxTQUFBLE9BQUEsTUFBQSxlQUFBLEVBQUEsTUFBQSxPQUVBLE9BQUEsU0FzRUEsT0FBQSxTQUFBLFdBQUEsU0FBQSxTQUNBLEdBQUEsT0FBQSxTQUFBLFdBQ0EsT0FBQSxRQUNBLEtBQUEsU0FBQSxNQUFBLE9BQ0EsS0FBQSxrQkFBQSxXQUFBLE1BQUEsT0FDQSxVQUFBLFVBQUEsbUJBQUEsU0FBQSxTQUFBLG1CQUFBLFNBQUEsUUFBQSxFQUtBLEtBSkEsR0FBQSxVQUFBLEdBQ0EsU0FBQSxrQkFBQSxZQUFBLEtBQUEsVUFDQSxPQUFBLFNBQUEsU0FBQSxPQUFBLElBRUEsU0FBQSxRQUVBLEdBREEsTUFBQSxTQUFBLFVBQ0EsU0FBQSxTQUFBLE9BQUEsTUFBQSxlQUFBLEVBQUEsTUFBQSxPQUVBLE9BQUEsU0F5YUEsY0FBQSxlQUFBLFNBQUEsT0FDQSxJQUFBLE9BQUEsU0FBQSxLQUFBLFFBQUEsWUFDQSxPQUFBLENBRUEsSUFBQSxTQUFBLE1BQUEsUUFDQSxTQUFBLFNBQUEsV0FBQSxTQUFBLGVBQUEsV0FBQSxlQUFBLFNBRUEsT0FBQSxVQUFBLE9BQUEsVUFBQSxlQUFBLFFBQUEsU0FBQSxrQkFBQSxRQVBBLGtCQStnQkEsUUFBQSxpQkFBQSxTQUFBLE9BQUEsTUFBQSxLQUNBLGVBQUEsS0FBQSxPQUFBLEtBQUEsT0FBQSxPQUFBLE9BQUEsS0FBQSxJQThWQSxRQUFBLGlCQUFBLFNBQUEsT0FBQSxNQUFBLE1BQ0EsZUFBQSxLQUFBLE9BQUEsS0FBQSxPQUFBLEtBQUEsT0FBQSxTQUFBLEtBQUEsU0EwQ0EsUUFBQSxpQkFBQSxTQUFBLE9BQUEsTUFBQSxLQUNBLE9BQUEsS0FBQSxRQTBRQSxNQUFBLElBNFpBLE1BQUEsT0FxNERBLElBQUEsU0FBQSxJQUFBLEtBQUEsTUFBQSxLQUFBLFdBQ0EsT0FBQSxHQUFBLE9BQUEsV0FzQkEsU0FBQSxHQUFBLGVBQUEsV0FBQSxNQUFBLGVBQUEsU0FBQSxNQUFBLE9BRUEsTUFBQSxnQkFBQSxTQUFBLE9BQUEsTUFBQSxRQUFBLHdCQUFBLElBQUEsTUFBQSxPQUFBLEdBd3VCQSxPQW5PQSxRQUFBLE1BQUEsTUFDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLEdBQUEsR0FDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLFNBQUEsU0FDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLGVBQUEsZUFDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLFNBQUEsU0FDQSxPQUFBLFNBQUEsU0FDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLFdBQUEsV0FDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLGFBQUEsYUFDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLFdBQUEsV0FDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLFlBQUEsWUFDQSxPQUFBLFVBQUEsVUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLGFBQUEsYUFDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLElBQUEsSUFDQSxPQUFBLFVBQUEsVUFDQSxPQUFBLElBQUEsSUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLElBQUEsSUFDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLGFBQUEsYUFDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLFNBQUEsU0FDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLElBQUEsSUFDQSxPQUFBLFNBQUEsU0FDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLFVBQUEsVUFDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLE1BQUEsTUFDQSxPQUFBLFFBQUEsUUFDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLElBQUEsSUFDQSxPQUFBLElBQUEsSUFDQSxPQUFBLFVBQUEsVUFHQSxPQUFBLFFBQUEsSUFDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLEtBQUEsUUFDQSxPQUFBLFVBQUEsYUFDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLFFBQUEsVUFDQSxPQUFBLE9BQUEsVUFDQSxPQUFBLE9BQUEsT0FDQSxPQUFBLEtBQUEsS0FDQSxPQUFBLE9BQUEsS0FDQSxPQUFBLE1BQUEsSUFHQSxNQUFBLFFBS0EsT0FBQSxNQUFBLE1BQ0EsT0FBQSxVQUFBLFVBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxPQUFBLE9BQ0EsT0FBQSxNQUFBLE1BQ0EsT0FBQSxLQUFBLEtBQ0EsT0FBQSxVQUFBLFVBQ0EsT0FBQSxRQUFBLFFBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxjQUFBLGNBQ0EsT0FBQSxZQUFBLFlBQ0EsT0FBQSxJQUFBLElBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxRQUFBLFFBQ0EsT0FBQSxZQUFBLFlBQ0EsT0FBQSxRQUFBLFFBQ0EsT0FBQSxVQUFBLFVBQ0EsT0FBQSxPQUFBLE9BQ0EsT0FBQSxVQUFBLFVBQ0EsT0FBQSxRQUFBLFFBQ0EsT0FBQSxRQUFBLFFBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxXQUFBLFdBQ0EsT0FBQSxNQUFBLE1BQ0EsT0FBQSxPQUFBLE9BQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxjQUFBLGNBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxZQUFBLFlBQ0EsT0FBQSxZQUFBLFlBQ0EsT0FBQSxNQUFBLE1BQ0EsT0FBQSxXQUFBLFdBQ0EsT0FBQSxLQUFBLEtBQ0EsT0FBQSxJQUFBLElBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxPQUFBLE9BQ0EsT0FBQSxPQUFBLE9BQ0EsT0FBQSxZQUFBLFlBQ0EsT0FBQSxPQUFBLE9BQ0EsT0FBQSxhQUFBLGFBQ0EsT0FBQSxLQUFBLEtBQ0EsT0FBQSxLQUFBLEtBQ0EsT0FBQSxZQUFBLFlBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxTQUFBLFNBQ0EsT0FBQSxTQUFBLFNBR0EsT0FBQSxJQUFBLE1BQ0EsT0FBQSxJQUFBLEtBQ0EsT0FBQSxPQUFBLEtBQ0EsT0FBQSxVQUFBLEtBQ0EsT0FBQSxNQUFBLE9BQ0EsT0FBQSxNQUFBLFlBQ0EsT0FBQSxRQUFBLFNBQ0EsT0FBQSxPQUFBLE9BRUEsTUFBQSxXQUNBLEdBQUEsVUFNQSxPQUxBLFFBQUEsT0FBQSxTQUFBLEtBQUEsWUFDQSxPQUFBLFVBQUEsY0FDQSxPQUFBLFlBQUEsUUFHQSxXQUNBLEdBS0EsT0FBQSxNQUFBLE1BQ0EsT0FBQSxLQUFBLEtBQ0EsT0FBQSxPQUFBLE9BR0EsT0FBQSxLQUFBLE1BQ0EsT0FBQSxLQUFBLE1BRUEsT0FBQSxPQUFBLFNBQUEsS0FBQSxZQUNBLEdBQUEsY0FBQSxXQUFBLFVBQ0EsUUFBQSxVQUFBLGNBQ0EsT0FBQSxVQUFBLFlBQUEsU0FBQSxFQUFBLE9BQ0EsR0FBQSxVQUFBLEtBQUEsVUFDQSxPQUFBLEtBQUEsS0FBQSxZQUFBLEVBQUEsTUFFQSxPQUFBLFdBQUEsTUFBQSxLQUFBLE9BQUEsY0FBQSxrQkFBQSxJQUFBLEdBQUEsZUFBQSxPQUFBLFVBQUEsV0FjQSxPQUFBLFFBQUEsUUFHQSxPQUFBLFVBQUEsTUFBQSxhQUNBLE9BQUEsVUFBQSxTQUFBLGdCQUNBLE9BQUEsVUFBQSxNQUFBLGVBQ0EsT0FBQSxVQUFBLFFBQUEsZUFHQSxTQUFBLE9BQUEsTUFBQSxTQUFBLFNBQUEsWUFDQSxHQUFBLE1BQUEsU0FBQSxXQUNBLFFBQUEsVUFBQSxZQUFBLFdBQ0EsR0FBQSxVQUFBLEtBQUEsVUFDQSxPQUFBLEtBQUEsTUFBQSxLQUFBLFlBQUEsVUFFQSxPQUFBLFVBQUEsR0FBQSxlQUFBLE9BQUEsVUFBQSxVQUtBLFNBQUEsT0FBQSxVQUFBLE9BQUEsV0FBQSxTQUFBLFlBQ0EsR0FBQSxNQUFBLFNBQUEsV0FDQSxRQUFBLFVBQUEsWUFBQSxXQUVBLE1BREEsTUFBQSxNQUFBLEtBQUEsWUFBQSxXQUNBLFFBS0EsU0FBQSxTQUFBLFFBQUEsVUFBQSxTQUFBLFlBQ0EsR0FBQSxNQUFBLFNBQUEsV0FDQSxRQUFBLFVBQUEsWUFBQSxXQUNBLE1BQUEsSUFBQSxlQUFBLEtBQUEsTUFBQSxLQUFBLFlBQUEsV0FBQSxLQUFBLGNBSUEsT0E3ck5BLEdBQUEsV0FHQSxhQUNBLGNBR0EsVUFBQSxFQUdBLFdBQUEsR0FBQSxNQUFBLEdBR0EsZUFBQSxHQUdBLFlBQUEsR0FHQSxXQUFBLDBDQVlBLHFCQUFBLGlCQUNBLG9CQUFBLHFCQUNBLHNCQUFBLGdDQU1BLGFBQUEsa0NBR0EsUUFBQSxPQUdBLFdBQUEsMkJBR0EsY0FBQSxtQkFHQSx3QkFBQSxPQUFBLEtBQUEsV0FBQSxjQUdBLFVBQUEsT0FHQSxPQUFBLFdBR0Esa0JBQUEsMkJBR0EsY0FDQSxRQUFBLFVBQUEsT0FBQSxXQUFBLE9BQUEsU0FBQSxTQUNBLFNBQUEsU0FBQSxJQUFBLGNBQUEsZUFBQSxXQUFBLFFBQ0EsV0FBQSxjQUlBLGdCQUFBLEVBR0EsVUFBQSxxQkFDQSxXQUFBLGlCQUNBLFVBQUEsbUJBQ0EsVUFBQSxnQkFDQSxVQUFBLG9CQUNBLFlBQUEsa0JBQ0EsWUFBQSxrQkFDQSxZQUFBLGtCQUNBLFlBQUEsa0JBR0EsbUJBQ0Esa0JBQUEsWUFBQSxFQUNBLGlCQUFBLFdBQUEsaUJBQUEsWUFDQSxpQkFBQSxXQUFBLGlCQUFBLFdBQ0EsaUJBQUEsYUFBQSxpQkFBQSxhQUNBLGlCQUFBLGFBQUEsaUJBQUEsY0FBQSxDQUdBLElBQUEsa0JBQ0EsU0FBQSxFQUNBLFFBQUEsRUFDQSxVQUFBLEdBSUEsWUFDQSxjQUFBLEVBQ0EsWUFBQSxFQUNBLE1BQUEsS0FDQSxVQUFBLEdBSUEsYUFDQSxXQUFBLEVBQ0EsWUFBQSxFQUNBLFFBQUEsRUFDQSxRQUFBLEVBQ0EsUUFBQSxFQUNBLFdBQUEsR0FJQSxlQUNBLEtBQUEsS0FDQSxJQUFBLElBQ0EsS0FBQSxJQUNBLEtBQUEsSUFDQSxJQUFBLElBQ0EsU0FBQSxRQUNBLFNBQUEsU0FJQSxLQUFBLGtCQUFBLFVBQUEsUUFBQSxLQUdBLFlBQUEsa0JBQUEsV0FBQSxVQUFBLFFBQUEsVUFBQSxRQUdBLFdBQUEsa0JBQUEsVUFBQSxTQUFBLE9BQUEsVUFBQSxPQUdBLGNBQUEsWUFBQSxXQUFBLFVBQUEsYUFBQSxZQUdBLFdBQUEsa0JBQUEsVUFBQSxRQUNBLFlBQUEsV0FBQSxTQUFBLFlBQUEsV0FBQSxTQUFBLGFBQ0EsS0FBQSxXQXFqTkEsSUFBQSxHQUFBLGNBR0EsbUJBQUEsU0FBQSxnQkFBQSxRQUFBLEtBQUEsT0FBQSxLQUlBLEtBQUEsRUFBQSxFQUlBLE9BQUEsV0FDQSxNQUFBLE1BSUEsYUFBQSxXQUVBLGVBQ0EsV0FBQSxRQUFBLEdBQUEsRUFBQSxFQUlBLFlBQUEsRUFBQSxFQUlBLEtBQUEsRUFBQSxHQUVBLEtBQUEiLCJmaWxlIjoidmVuZG9yLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuMy4wLXJjLjJcclxuICogKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcclxuICogTGljZW5zZTogTUlUXHJcbiAqL1xyXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7J3VzZSBzdHJpY3QnO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBUaGlzIG9iamVjdCBwcm92aWRlcyBhIHV0aWxpdHkgZm9yIHByb2R1Y2luZyByaWNoIEVycm9yIG1lc3NhZ2VzIHdpdGhpblxyXG4gKiBBbmd1bGFyLiBJdCBjYW4gYmUgY2FsbGVkIGFzIGZvbGxvd3M6XHJcbiAqXHJcbiAqIHZhciBleGFtcGxlTWluRXJyID0gbWluRXJyKCdleGFtcGxlJyk7XHJcbiAqIHRocm93IGV4YW1wbGVNaW5FcnIoJ29uZScsICdUaGlzIHswfSBpcyB7MX0nLCBmb28sIGJhcik7XHJcbiAqXHJcbiAqIFRoZSBhYm92ZSBjcmVhdGVzIGFuIGluc3RhbmNlIG9mIG1pbkVyciBpbiB0aGUgZXhhbXBsZSBuYW1lc3BhY2UuIFRoZVxyXG4gKiByZXN1bHRpbmcgZXJyb3Igd2lsbCBoYXZlIGEgbmFtZXNwYWNlZCBlcnJvciBjb2RlIG9mIGV4YW1wbGUub25lLiAgVGhlXHJcbiAqIHJlc3VsdGluZyBlcnJvciB3aWxsIHJlcGxhY2UgezB9IHdpdGggdGhlIHZhbHVlIG9mIGZvbywgYW5kIHsxfSB3aXRoIHRoZVxyXG4gKiB2YWx1ZSBvZiBiYXIuIFRoZSBvYmplY3QgaXMgbm90IHJlc3RyaWN0ZWQgaW4gdGhlIG51bWJlciBvZiBhcmd1bWVudHMgaXQgY2FuXHJcbiAqIHRha2UuXHJcbiAqXHJcbiAqIElmIGZld2VyIGFyZ3VtZW50cyBhcmUgc3BlY2lmaWVkIHRoYW4gbmVjZXNzYXJ5IGZvciBpbnRlcnBvbGF0aW9uLCB0aGUgZXh0cmFcclxuICogaW50ZXJwb2xhdGlvbiBtYXJrZXJzIHdpbGwgYmUgcHJlc2VydmVkIGluIHRoZSBmaW5hbCBzdHJpbmcuXHJcbiAqXHJcbiAqIFNpbmNlIGRhdGEgd2lsbCBiZSBwYXJzZWQgc3RhdGljYWxseSBkdXJpbmcgYSBidWlsZCBzdGVwLCBzb21lIHJlc3RyaWN0aW9uc1xyXG4gKiBhcmUgYXBwbGllZCB3aXRoIHJlc3BlY3QgdG8gaG93IG1pbkVyciBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYW5kIGNhbGxlZC5cclxuICogSW5zdGFuY2VzIHNob3VsZCBoYXZlIG5hbWVzIG9mIHRoZSBmb3JtIG5hbWVzcGFjZU1pbkVyciBmb3IgYSBtaW5FcnIgY3JlYXRlZFxyXG4gKiB1c2luZyBtaW5FcnIoJ25hbWVzcGFjZScpIC4gRXJyb3IgY29kZXMsIG5hbWVzcGFjZXMgYW5kIHRlbXBsYXRlIHN0cmluZ3NcclxuICogc2hvdWxkIGFsbCBiZSBzdGF0aWMgc3RyaW5ncywgbm90IHZhcmlhYmxlcyBvciBnZW5lcmFsIGV4cHJlc3Npb25zLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlIFRoZSBuYW1lc3BhY2UgdG8gdXNlIGZvciB0aGUgbmV3IG1pbkVyciBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtmdW5jdGlvbn0gRXJyb3JDb25zdHJ1Y3RvciBDdXN0b20gZXJyb3IgY29uc3RydWN0b3IgdG8gYmUgaW5zdGFudGlhdGVkIHdoZW4gcmV0dXJuaW5nXHJcbiAqICAgZXJyb3IgZnJvbSByZXR1cm5lZCBmdW5jdGlvbiwgZm9yIGNhc2VzIHdoZW4gYSBwYXJ0aWN1bGFyIHR5cGUgb2YgZXJyb3IgaXMgdXNlZnVsLlxyXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29kZTpzdHJpbmcsIHRlbXBsYXRlOnN0cmluZywgLi4udGVtcGxhdGVBcmdzKTogRXJyb3J9IG1pbkVyciBpbnN0YW5jZVxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIG1pbkVycihtb2R1bGUsIEVycm9yQ29uc3RydWN0b3IpIHtcclxuICBFcnJvckNvbnN0cnVjdG9yID0gRXJyb3JDb25zdHJ1Y3RvciB8fCBFcnJvcjtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGNvZGUgPSBhcmd1bWVudHNbMF0sXHJcbiAgICAgIHByZWZpeCA9ICdbJyArIChtb2R1bGUgPyBtb2R1bGUgKyAnOicgOiAnJykgKyBjb2RlICsgJ10gJyxcclxuICAgICAgdGVtcGxhdGUgPSBhcmd1bWVudHNbMV0sXHJcbiAgICAgIHRlbXBsYXRlQXJncyA9IGFyZ3VtZW50cyxcclxuICAgICAgc3RyaW5naWZ5ID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLCAnJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgcmV0dXJuICd1bmRlZmluZWQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iaiAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICB9LFxyXG4gICAgICBtZXNzYWdlLCBpO1xyXG5cclxuICAgIG1lc3NhZ2UgPSBwcmVmaXggKyB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXGQrXFx9L2csIGZ1bmN0aW9uIChtYXRjaCkge1xyXG4gICAgICB2YXIgaW5kZXggPSArbWF0Y2guc2xpY2UoMSwgLTEpLCBhcmc7XHJcblxyXG4gICAgICBpZiAoaW5kZXggKyAyIDwgdGVtcGxhdGVBcmdzLmxlbmd0aCkge1xyXG4gICAgICAgIGFyZyA9IHRlbXBsYXRlQXJnc1tpbmRleCArIDJdO1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCkucmVwbGFjZSgvID9cXHtbXFxzXFxTXSokLywgJycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIHJldHVybiAndW5kZWZpbmVkJztcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmcgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICByZXR1cm4gdG9Kc29uKGFyZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG1hdGNoO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnXFxuaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuMy4wLXJjLjIvJyArXHJcbiAgICAgIChtb2R1bGUgPyBtb2R1bGUgKyAnLycgOiAnJykgKyBjb2RlO1xyXG4gICAgZm9yIChpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBtZXNzYWdlID0gbWVzc2FnZSArIChpID09IDIgPyAnPycgOiAnJicpICsgJ3AnICsgKGktMikgKyAnPScgK1xyXG4gICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnkoYXJndW1lbnRzW2ldKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IEVycm9yQ29uc3RydWN0b3IobWVzc2FnZSk7XHJcbiAgfTtcclxufVxyXG5cclxuLyogV2UgbmVlZCB0byB0ZWxsIGpzaGludCB3aGF0IHZhcmlhYmxlcyBhcmUgYmVpbmcgZXhwb3J0ZWQgKi9cclxuLyogZ2xvYmFsIGFuZ3VsYXI6IHRydWUsXHJcbiAgbXNpZTogdHJ1ZSxcclxuICBqcUxpdGU6IHRydWUsXHJcbiAgalF1ZXJ5OiB0cnVlLFxyXG4gIHNsaWNlOiB0cnVlLFxyXG4gIHB1c2g6IHRydWUsXHJcbiAgdG9TdHJpbmc6IHRydWUsXHJcbiAgbmdNaW5FcnI6IHRydWUsXHJcbiAgYW5ndWxhck1vZHVsZTogdHJ1ZSxcclxuICB1aWQ6IHRydWUsXHJcbiAgUkVHRVhfU1RSSU5HX1JFR0VYUDogdHJ1ZSxcclxuICBWQUxJRElUWV9TVEFURV9QUk9QRVJUWTogdHJ1ZSxcclxuXHJcbiAgbG93ZXJjYXNlOiB0cnVlLFxyXG4gIHVwcGVyY2FzZTogdHJ1ZSxcclxuICBtYW51YWxMb3dlcmNhc2U6IHRydWUsXHJcbiAgbWFudWFsVXBwZXJjYXNlOiB0cnVlLFxyXG4gIG5vZGVOYW1lXzogdHJ1ZSxcclxuICBpc0FycmF5TGlrZTogdHJ1ZSxcclxuICBmb3JFYWNoOiB0cnVlLFxyXG4gIHNvcnRlZEtleXM6IHRydWUsXHJcbiAgZm9yRWFjaFNvcnRlZDogdHJ1ZSxcclxuICByZXZlcnNlUGFyYW1zOiB0cnVlLFxyXG4gIG5leHRVaWQ6IHRydWUsXHJcbiAgc2V0SGFzaEtleTogdHJ1ZSxcclxuICBleHRlbmQ6IHRydWUsXHJcbiAgaW50OiB0cnVlLFxyXG4gIGluaGVyaXQ6IHRydWUsXHJcbiAgbm9vcDogdHJ1ZSxcclxuICBpZGVudGl0eTogdHJ1ZSxcclxuICB2YWx1ZUZuOiB0cnVlLFxyXG4gIGlzVW5kZWZpbmVkOiB0cnVlLFxyXG4gIGlzRGVmaW5lZDogdHJ1ZSxcclxuICBpc09iamVjdDogdHJ1ZSxcclxuICBpc1N0cmluZzogdHJ1ZSxcclxuICBpc051bWJlcjogdHJ1ZSxcclxuICBpc0RhdGU6IHRydWUsXHJcbiAgaXNBcnJheTogdHJ1ZSxcclxuICBpc0Z1bmN0aW9uOiB0cnVlLFxyXG4gIGlzUmVnRXhwOiB0cnVlLFxyXG4gIGlzV2luZG93OiB0cnVlLFxyXG4gIGlzU2NvcGU6IHRydWUsXHJcbiAgaXNGaWxlOiB0cnVlLFxyXG4gIGlzQmxvYjogdHJ1ZSxcclxuICBpc0Jvb2xlYW46IHRydWUsXHJcbiAgaXNQcm9taXNlTGlrZTogdHJ1ZSxcclxuICB0cmltOiB0cnVlLFxyXG4gIGlzRWxlbWVudDogdHJ1ZSxcclxuICBtYWtlTWFwOiB0cnVlLFxyXG4gIG1hcDogdHJ1ZSxcclxuICBzaXplOiB0cnVlLFxyXG4gIGluY2x1ZGVzOiB0cnVlLFxyXG4gIGFycmF5UmVtb3ZlOiB0cnVlLFxyXG4gIGlzTGVhZk5vZGU6IHRydWUsXHJcbiAgY29weTogdHJ1ZSxcclxuICBzaGFsbG93Q29weTogdHJ1ZSxcclxuICBlcXVhbHM6IHRydWUsXHJcbiAgY3NwOiB0cnVlLFxyXG4gIGNvbmNhdDogdHJ1ZSxcclxuICBzbGljZUFyZ3M6IHRydWUsXHJcbiAgYmluZDogdHJ1ZSxcclxuICB0b0pzb25SZXBsYWNlcjogdHJ1ZSxcclxuICB0b0pzb246IHRydWUsXHJcbiAgZnJvbUpzb246IHRydWUsXHJcbiAgc3RhcnRpbmdUYWc6IHRydWUsXHJcbiAgdHJ5RGVjb2RlVVJJQ29tcG9uZW50OiB0cnVlLFxyXG4gIHBhcnNlS2V5VmFsdWU6IHRydWUsXHJcbiAgdG9LZXlWYWx1ZTogdHJ1ZSxcclxuICBlbmNvZGVVcmlTZWdtZW50OiB0cnVlLFxyXG4gIGVuY29kZVVyaVF1ZXJ5OiB0cnVlLFxyXG4gIGFuZ3VsYXJJbml0OiB0cnVlLFxyXG4gIGJvb3RzdHJhcDogdHJ1ZSxcclxuICBnZXRUZXN0YWJpbGl0eTogdHJ1ZSxcclxuICBzbmFrZV9jYXNlOiB0cnVlLFxyXG4gIGJpbmRKUXVlcnk6IHRydWUsXHJcbiAgYXNzZXJ0QXJnOiB0cnVlLFxyXG4gIGFzc2VydEFyZ0ZuOiB0cnVlLFxyXG4gIGFzc2VydE5vdEhhc093blByb3BlcnR5OiB0cnVlLFxyXG4gIGdldHRlcjogdHJ1ZSxcclxuICBnZXRCbG9ja05vZGVzOiB0cnVlLFxyXG4gIGhhc093blByb3BlcnR5OiB0cnVlLFxyXG4gIGNyZWF0ZU1hcDogdHJ1ZSxcclxuKi9cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtb2R1bGVcclxuICogQG5hbWUgbmdcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogIyBuZyAoY29yZSBtb2R1bGUpXHJcbiAqIFRoZSBuZyBtb2R1bGUgaXMgbG9hZGVkIGJ5IGRlZmF1bHQgd2hlbiBhbiBBbmd1bGFySlMgYXBwbGljYXRpb24gaXMgc3RhcnRlZC4gVGhlIG1vZHVsZSBpdHNlbGZcclxuICogY29udGFpbnMgdGhlIGVzc2VudGlhbCBjb21wb25lbnRzIGZvciBhbiBBbmd1bGFySlMgYXBwbGljYXRpb24gdG8gZnVuY3Rpb24uIFRoZSB0YWJsZSBiZWxvd1xyXG4gKiBsaXN0cyBhIGhpZ2ggbGV2ZWwgYnJlYWtkb3duIG9mIGVhY2ggb2YgdGhlIHNlcnZpY2VzL2ZhY3RvcmllcywgZmlsdGVycywgZGlyZWN0aXZlcyBhbmQgdGVzdGluZ1xyXG4gKiBjb21wb25lbnRzIGF2YWlsYWJsZSB3aXRoaW4gdGhpcyBjb3JlIG1vZHVsZS5cclxuICpcclxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ1wiPjwvZGl2PlxyXG4gKi9cclxuXHJcbnZhciBSRUdFWF9TVFJJTkdfUkVHRVhQID0gL15cXC8oLispXFwvKFthLXpdKikkLztcclxuXHJcbi8vIFRoZSBuYW1lIG9mIGEgZm9ybSBjb250cm9sJ3MgVmFsaWRpdHlTdGF0ZSBwcm9wZXJ0eS5cclxuLy8gVGhpcyBpcyB1c2VkIHNvIHRoYXQgaXQncyBwb3NzaWJsZSBmb3IgaW50ZXJuYWwgdGVzdHMgdG8gY3JlYXRlIG1vY2sgVmFsaWRpdHlTdGF0ZXMuXHJcbnZhciBWQUxJRElUWV9TVEFURV9QUk9QRVJUWSA9ICd2YWxpZGl0eSc7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIubG93ZXJjYXNlXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uIENvbnZlcnRzIHRoZSBzcGVjaWZpZWQgc3RyaW5nIHRvIGxvd2VyY2FzZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBTdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGxvd2VyY2FzZS5cclxuICogQHJldHVybnMge3N0cmluZ30gTG93ZXJjYXNlZCBzdHJpbmcuXHJcbiAqL1xyXG52YXIgbG93ZXJjYXNlID0gZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gaXNTdHJpbmcoc3RyaW5nKSA/IHN0cmluZy50b0xvd2VyQ2FzZSgpIDogc3RyaW5nO307XHJcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIudXBwZXJjYXNlXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uIENvbnZlcnRzIHRoZSBzcGVjaWZpZWQgc3RyaW5nIHRvIHVwcGVyY2FzZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBTdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIHVwcGVyY2FzZS5cclxuICogQHJldHVybnMge3N0cmluZ30gVXBwZXJjYXNlZCBzdHJpbmcuXHJcbiAqL1xyXG52YXIgdXBwZXJjYXNlID0gZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gaXNTdHJpbmcoc3RyaW5nKSA/IHN0cmluZy50b1VwcGVyQ2FzZSgpIDogc3RyaW5nO307XHJcblxyXG5cclxudmFyIG1hbnVhbExvd2VyY2FzZSA9IGZ1bmN0aW9uKHMpIHtcclxuICAvKiBqc2hpbnQgYml0d2lzZTogZmFsc2UgKi9cclxuICByZXR1cm4gaXNTdHJpbmcocylcclxuICAgICAgPyBzLnJlcGxhY2UoL1tBLVpdL2csIGZ1bmN0aW9uKGNoKSB7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2guY2hhckNvZGVBdCgwKSB8IDMyKTt9KVxyXG4gICAgICA6IHM7XHJcbn07XHJcbnZhciBtYW51YWxVcHBlcmNhc2UgPSBmdW5jdGlvbihzKSB7XHJcbiAgLyoganNoaW50IGJpdHdpc2U6IGZhbHNlICovXHJcbiAgcmV0dXJuIGlzU3RyaW5nKHMpXHJcbiAgICAgID8gcy5yZXBsYWNlKC9bYS16XS9nLCBmdW5jdGlvbihjaCkge3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoLmNoYXJDb2RlQXQoMCkgJiB+MzIpO30pXHJcbiAgICAgIDogcztcclxufTtcclxuXHJcblxyXG4vLyBTdHJpbmcjdG9Mb3dlckNhc2UgYW5kIFN0cmluZyN0b1VwcGVyQ2FzZSBkb24ndCBwcm9kdWNlIGNvcnJlY3QgcmVzdWx0cyBpbiBicm93c2VycyB3aXRoIFR1cmtpc2hcclxuLy8gbG9jYWxlLCBmb3IgdGhpcyByZWFzb24gd2UgbmVlZCB0byBkZXRlY3QgdGhpcyBjYXNlIGFuZCByZWRlZmluZSBsb3dlcmNhc2UvdXBwZXJjYXNlIG1ldGhvZHNcclxuLy8gd2l0aCBjb3JyZWN0IGJ1dCBzbG93ZXIgYWx0ZXJuYXRpdmVzLlxyXG5pZiAoJ2knICE9PSAnSScudG9Mb3dlckNhc2UoKSkge1xyXG4gIGxvd2VyY2FzZSA9IG1hbnVhbExvd2VyY2FzZTtcclxuICB1cHBlcmNhc2UgPSBtYW51YWxVcHBlcmNhc2U7XHJcbn1cclxuXHJcblxyXG52YXIgLyoqIGhvbGRzIG1ham9yIHZlcnNpb24gbnVtYmVyIGZvciBJRSBvciBOYU4gZm9yIHJlYWwgYnJvd3NlcnMgKi9cclxuICAgIG1zaWUsXHJcbiAgICBqcUxpdGUsICAgICAgICAgICAvLyBkZWxheSBiaW5kaW5nIHNpbmNlIGpRdWVyeSBjb3VsZCBiZSBsb2FkZWQgYWZ0ZXIgdXMuXHJcbiAgICBqUXVlcnksICAgICAgICAgICAvLyBkZWxheSBiaW5kaW5nXHJcbiAgICBzbGljZSAgICAgICAgICAgICA9IFtdLnNsaWNlLFxyXG4gICAgcHVzaCAgICAgICAgICAgICAgPSBbXS5wdXNoLFxyXG4gICAgdG9TdHJpbmcgICAgICAgICAgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLFxyXG4gICAgbmdNaW5FcnIgICAgICAgICAgPSBtaW5FcnIoJ25nJyksXHJcblxyXG4gICAgLyoqIEBuYW1lIGFuZ3VsYXIgKi9cclxuICAgIGFuZ3VsYXIgICAgICAgICAgID0gd2luZG93LmFuZ3VsYXIgfHwgKHdpbmRvdy5hbmd1bGFyID0ge30pLFxyXG4gICAgYW5ndWxhck1vZHVsZSxcclxuICAgIHVpZCAgICAgICAgICAgICAgID0gMDtcclxuXHJcbi8qKlxyXG4gKiBJRSAxMSBjaGFuZ2VkIHRoZSBmb3JtYXQgb2YgdGhlIFVzZXJBZ2VudCBzdHJpbmcuXHJcbiAqIFNlZSBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1Mzc1MDMuYXNweFxyXG4gKi9cclxubXNpZSA9IGludCgoL21zaWUgKFxcZCspLy5leGVjKGxvd2VyY2FzZShuYXZpZ2F0b3IudXNlckFnZW50KSkgfHwgW10pWzFdKTtcclxuaWYgKGlzTmFOKG1zaWUpKSB7XHJcbiAgbXNpZSA9IGludCgoL3RyaWRlbnRcXC8uKjsgcnY6KFxcZCspLy5leGVjKGxvd2VyY2FzZShuYXZpZ2F0b3IudXNlckFnZW50KSkgfHwgW10pWzFdKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0geyp9IG9ialxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgYG9iamAgaXMgYW4gYXJyYXkgb3IgYXJyYXktbGlrZSBvYmplY3QgKE5vZGVMaXN0LCBBcmd1bWVudHMsXHJcbiAqICAgICAgICAgICAgICAgICAgIFN0cmluZyAuLi4pXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0FycmF5TGlrZShvYmopIHtcclxuICBpZiAob2JqID09IG51bGwgfHwgaXNXaW5kb3cob2JqKSkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdmFyIGxlbmd0aCA9IG9iai5sZW5ndGg7XHJcblxyXG4gIGlmIChvYmoubm9kZVR5cGUgPT09IDEgJiYgbGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBpc1N0cmluZyhvYmopIHx8IGlzQXJyYXkob2JqKSB8fCBsZW5ndGggPT09IDAgfHxcclxuICAgICAgICAgdHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgJiYgbGVuZ3RoID4gMCAmJiAobGVuZ3RoIC0gMSkgaW4gb2JqO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZm9yRWFjaFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBJbnZva2VzIHRoZSBgaXRlcmF0b3JgIGZ1bmN0aW9uIG9uY2UgZm9yIGVhY2ggaXRlbSBpbiBgb2JqYCBjb2xsZWN0aW9uLCB3aGljaCBjYW4gYmUgZWl0aGVyIGFuXHJcbiAqIG9iamVjdCBvciBhbiBhcnJheS4gVGhlIGBpdGVyYXRvcmAgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoIGBpdGVyYXRvcih2YWx1ZSwga2V5LCBvYmopYCwgd2hlcmUgYHZhbHVlYFxyXG4gKiBpcyB0aGUgdmFsdWUgb2YgYW4gb2JqZWN0IHByb3BlcnR5IG9yIGFuIGFycmF5IGVsZW1lbnQsIGBrZXlgIGlzIHRoZSBvYmplY3QgcHJvcGVydHkga2V5IG9yXHJcbiAqIGFycmF5IGVsZW1lbnQgaW5kZXggYW5kIG9iaiBpcyB0aGUgYG9iamAgaXRzZWxmLiBTcGVjaWZ5aW5nIGEgYGNvbnRleHRgIGZvciB0aGUgZnVuY3Rpb24gaXMgb3B0aW9uYWwuXHJcbiAqXHJcbiAqIEl0IGlzIHdvcnRoIG5vdGluZyB0aGF0IGAuZm9yRWFjaGAgZG9lcyBub3QgaXRlcmF0ZSBvdmVyIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlY2F1c2UgaXQgZmlsdGVyc1xyXG4gKiB1c2luZyB0aGUgYGhhc093blByb3BlcnR5YCBtZXRob2QuXHJcbiAqXHJcbiAgIGBgYGpzXHJcbiAgICAgdmFyIHZhbHVlcyA9IHtuYW1lOiAnbWlza28nLCBnZW5kZXI6ICdtYWxlJ307XHJcbiAgICAgdmFyIGxvZyA9IFtdO1xyXG4gICAgIGFuZ3VsYXIuZm9yRWFjaCh2YWx1ZXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgIHRoaXMucHVzaChrZXkgKyAnOiAnICsgdmFsdWUpO1xyXG4gICAgIH0sIGxvZyk7XHJcbiAgICAgZXhwZWN0KGxvZykudG9FcXVhbChbJ25hbWU6IG1pc2tvJywgJ2dlbmRlcjogbWFsZSddKTtcclxuICAgYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogT2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3IgSXRlcmF0b3IgZnVuY3Rpb24uXHJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gY29udGV4dCBPYmplY3QgdG8gYmVjb21lIGNvbnRleHQgKGB0aGlzYCkgZm9yIHRoZSBpdGVyYXRvciBmdW5jdGlvbi5cclxuICogQHJldHVybnMge09iamVjdHxBcnJheX0gUmVmZXJlbmNlIHRvIGBvYmpgLlxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xyXG4gIHZhciBrZXksIGxlbmd0aDtcclxuICBpZiAob2JqKSB7XHJcbiAgICBpZiAoaXNGdW5jdGlvbihvYmopKSB7XHJcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xyXG4gICAgICAgIC8vIE5lZWQgdG8gY2hlY2sgaWYgaGFzT3duUHJvcGVydHkgZXhpc3RzLFxyXG4gICAgICAgIC8vIGFzIG9uIElFOCB0aGUgcmVzdWx0IG9mIHF1ZXJ5U2VsZWN0b3JBbGwgaXMgYW4gb2JqZWN0IHdpdGhvdXQgYSBoYXNPd25Qcm9wZXJ0eSBmdW5jdGlvblxyXG4gICAgICAgIGlmIChrZXkgIT0gJ3Byb3RvdHlwZScgJiYga2V5ICE9ICdsZW5ndGgnICYmIGtleSAhPSAnbmFtZScgJiYgKCFvYmouaGFzT3duUHJvcGVydHkgfHwgb2JqLmhhc093blByb3BlcnR5KGtleSkpKSB7XHJcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqKSB8fCBpc0FycmF5TGlrZShvYmopKSB7XHJcbiAgICAgIHZhciBpc1ByaW1pdGl2ZSA9IHR5cGVvZiBvYmogIT09ICdvYmplY3QnO1xyXG4gICAgICBmb3IgKGtleSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcclxuICAgICAgICBpZiAoaXNQcmltaXRpdmUgfHwga2V5IGluIG9iaikge1xyXG4gICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChvYmouZm9yRWFjaCAmJiBvYmouZm9yRWFjaCAhPT0gZm9yRWFjaCkge1xyXG4gICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0LCBvYmopO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvcnRlZEtleXMob2JqKSB7XHJcbiAgdmFyIGtleXMgPSBbXTtcclxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAga2V5cy5wdXNoKGtleSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBrZXlzLnNvcnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9yRWFjaFNvcnRlZChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XHJcbiAgdmFyIGtleXMgPSBzb3J0ZWRLZXlzKG9iaik7XHJcbiAgZm9yICggdmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5c1tpXV0sIGtleXNbaV0pO1xyXG4gIH1cclxuICByZXR1cm4ga2V5cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiB3aGVuIHVzaW5nIGZvckVhY2ggdGhlIHBhcmFtcyBhcmUgdmFsdWUsIGtleSwgYnV0IGl0IGlzIG9mdGVuIHVzZWZ1bCB0byBoYXZlIGtleSwgdmFsdWUuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCAqKX0gaXRlcmF0b3JGblxyXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oKiwgc3RyaW5nKX1cclxuICovXHJcbmZ1bmN0aW9uIHJldmVyc2VQYXJhbXMoaXRlcmF0b3JGbikge1xyXG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSwga2V5KSB7IGl0ZXJhdG9yRm4oa2V5LCB2YWx1ZSk7IH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGNvbnNpc3RlbnQgd2F5IG9mIGNyZWF0aW5nIHVuaXF1ZSBJRHMgaW4gYW5ndWxhci5cclxuICpcclxuICogVXNpbmcgc2ltcGxlIG51bWJlcnMgYWxsb3dzIHVzIHRvIGdlbmVyYXRlIDI4LjYgbWlsbGlvbiB1bmlxdWUgaWRzIHBlciBzZWNvbmQgZm9yIDEwIHllYXJzIGJlZm9yZVxyXG4gKiB3ZSBoaXQgbnVtYmVyIHByZWNpc2lvbiBpc3N1ZXMgaW4gSmF2YVNjcmlwdC5cclxuICpcclxuICogTWF0aC5wb3coMiw1MykgLyA2MCAvIDYwIC8gMjQgLyAzNjUgLyAxMCA9IDI4LjZNXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGFuIHVuaXF1ZSBhbHBoYS1udW1lcmljIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gbmV4dFVpZCgpIHtcclxuICByZXR1cm4gKyt1aWQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogU2V0IG9yIGNsZWFyIHRoZSBoYXNoa2V5IGZvciBhbiBvYmplY3QuXHJcbiAqIEBwYXJhbSBvYmogb2JqZWN0XHJcbiAqIEBwYXJhbSBoIHRoZSBoYXNoa2V5ICghdHJ1dGh5IHRvIGRlbGV0ZSB0aGUgaGFzaGtleSlcclxuICovXHJcbmZ1bmN0aW9uIHNldEhhc2hLZXkob2JqLCBoKSB7XHJcbiAgaWYgKGgpIHtcclxuICAgIG9iai4kJGhhc2hLZXkgPSBoO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGRlbGV0ZSBvYmouJCRoYXNoS2V5O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmV4dGVuZFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFeHRlbmRzIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QgYGRzdGAgYnkgY29weWluZyBhbGwgb2YgdGhlIHByb3BlcnRpZXMgZnJvbSB0aGUgYHNyY2Agb2JqZWN0KHMpXHJcbiAqIHRvIGBkc3RgLiBZb3UgY2FuIHNwZWNpZnkgbXVsdGlwbGUgYHNyY2Agb2JqZWN0cy5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGRzdCBEZXN0aW5hdGlvbiBvYmplY3QuXHJcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBzcmMgU291cmNlIG9iamVjdChzKS5cclxuICogQHJldHVybnMge09iamVjdH0gUmVmZXJlbmNlIHRvIGBkc3RgLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0ZW5kKGRzdCkge1xyXG4gIHZhciBoID0gZHN0LiQkaGFzaEtleTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDEsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgIHZhciBvYmogPSBhcmd1bWVudHNbaV07XHJcbiAgICBpZiAob2JqKSB7XHJcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcclxuICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0ga2V5cy5sZW5ndGg7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGtleXNbal07XHJcbiAgICAgICAgZHN0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0SGFzaEtleShkc3QsIGgpO1xyXG4gIHJldHVybiBkc3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGludChzdHIpIHtcclxuICByZXR1cm4gcGFyc2VJbnQoc3RyLCAxMCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpbmhlcml0KHBhcmVudCwgZXh0cmEpIHtcclxuICByZXR1cm4gZXh0ZW5kKG5ldyAoZXh0ZW5kKGZ1bmN0aW9uKCkge30sIHtwcm90b3R5cGU6cGFyZW50fSkpKCksIGV4dHJhKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLm5vb3BcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIG5vIG9wZXJhdGlvbnMuIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWZ1bCB3aGVuIHdyaXRpbmcgY29kZSBpbiB0aGVcclxuICogZnVuY3Rpb25hbCBzdHlsZS5cclxuICAgYGBganNcclxuICAgICBmdW5jdGlvbiBmb28oY2FsbGJhY2spIHtcclxuICAgICAgIHZhciByZXN1bHQgPSBjYWxjdWxhdGVSZXN1bHQoKTtcclxuICAgICAgIChjYWxsYmFjayB8fCBhbmd1bGFyLm5vb3ApKHJlc3VsdCk7XHJcbiAgICAgfVxyXG4gICBgYGBcclxuICovXHJcbmZ1bmN0aW9uIG5vb3AoKSB7fVxyXG5ub29wLiRpbmplY3QgPSBbXTtcclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuaWRlbnRpdHlcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgaXRzIGZpcnN0IGFyZ3VtZW50LiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWZ1bCB3aGVuIHdyaXRpbmcgY29kZSBpbiB0aGVcclxuICogZnVuY3Rpb25hbCBzdHlsZS5cclxuICpcclxuICAgYGBganNcclxuICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1lcih0cmFuc2Zvcm1hdGlvbkZuLCB2YWx1ZSkge1xyXG4gICAgICAgcmV0dXJuICh0cmFuc2Zvcm1hdGlvbkZuIHx8IGFuZ3VsYXIuaWRlbnRpdHkpKHZhbHVlKTtcclxuICAgICB9O1xyXG4gICBgYGBcclxuICovXHJcbmZ1bmN0aW9uIGlkZW50aXR5KCQpIHtyZXR1cm4gJDt9XHJcbmlkZW50aXR5LiRpbmplY3QgPSBbXTtcclxuXHJcblxyXG5mdW5jdGlvbiB2YWx1ZUZuKHZhbHVlKSB7cmV0dXJuIGZ1bmN0aW9uKCkge3JldHVybiB2YWx1ZTt9O31cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc1VuZGVmaW5lZFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIHVuZGVmaW5lZC5cclxuICpcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgdW5kZWZpbmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO31cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuaXNEZWZpbmVkXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgZGVmaW5lZC5cclxuICpcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgZGVmaW5lZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzRGVmaW5lZCh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCc7fVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc09iamVjdFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGFuIGBPYmplY3RgLiBVbmxpa2UgYHR5cGVvZmAgaW4gSmF2YVNjcmlwdCwgYG51bGxgcyBhcmUgbm90XHJcbiAqIGNvbnNpZGVyZWQgdG8gYmUgb2JqZWN0cy4gTm90ZSB0aGF0IEphdmFTY3JpcHQgYXJyYXlzIGFyZSBvYmplY3RzLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgT2JqZWN0YCBidXQgbm90IGBudWxsYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKXtcclxuICAvLyBodHRwOi8vanNwZXJmLmNvbS9pc29iamVjdDRcclxuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc1N0cmluZ1xyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGEgYFN0cmluZ2AuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYFN0cmluZ2AuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZyc7fVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc051bWJlclxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGEgYE51bWJlcmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYE51bWJlcmAuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc051bWJlcih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcic7fVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc0RhdGVcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGV0ZXJtaW5lcyBpZiBhIHZhbHVlIGlzIGEgZGF0ZS5cclxuICpcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgRGF0ZWAuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcclxuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IERhdGVdJztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc0FycmF5XHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYW4gYEFycmF5YC5cclxuICpcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYW4gYEFycmF5YC5cclxuICovXHJcbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc0Z1bmN0aW9uXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgRnVuY3Rpb25gLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBGdW5jdGlvbmAuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO31cclxuXHJcblxyXG4vKipcclxuICogRGV0ZXJtaW5lcyBpZiBhIHZhbHVlIGlzIGEgcmVndWxhciBleHByZXNzaW9uIG9iamVjdC5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgUmVnRXhwYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVnRXhwKHZhbHVlKSB7XHJcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBSZWdFeHBdJztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYG9iamAgaXMgYSB3aW5kb3cgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0geyp9IG9iaiBPYmplY3QgdG8gY2hlY2tcclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYG9iamAgaXMgYSB3aW5kb3cgb2JqLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNXaW5kb3cob2JqKSB7XHJcbiAgcmV0dXJuIG9iaiAmJiBvYmoud2luZG93ID09PSBvYmo7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc1Njb3BlKG9iaikge1xyXG4gIHJldHVybiBvYmogJiYgb2JqLiRldmFsQXN5bmMgJiYgb2JqLiR3YXRjaDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlzRmlsZShvYmopIHtcclxuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBGaWxlXSc7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc0Jsb2Iob2JqKSB7XHJcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7XHJcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNQcm9taXNlTGlrZShvYmopIHtcclxuICByZXR1cm4gb2JqICYmIGlzRnVuY3Rpb24ob2JqLnRoZW4pO1xyXG59XHJcblxyXG5cclxudmFyIHRyaW0gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gIHJldHVybiBpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZS50cmltKCkgOiB2YWx1ZTtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuaXNFbGVtZW50XHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBET00gZWxlbWVudCAob3Igd3JhcHBlZCBqUXVlcnkgZWxlbWVudCkuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgRE9NIGVsZW1lbnQgKG9yIHdyYXBwZWQgalF1ZXJ5IGVsZW1lbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcclxuICByZXR1cm4gISEobm9kZSAmJlxyXG4gICAgKG5vZGUubm9kZU5hbWUgIC8vIHdlIGFyZSBhIGRpcmVjdCBlbGVtZW50XHJcbiAgICB8fCAobm9kZS5wcm9wICYmIG5vZGUuYXR0ciAmJiBub2RlLmZpbmQpKSk7ICAvLyB3ZSBoYXZlIGFuIG9uIGFuZCBmaW5kIG1ldGhvZCBwYXJ0IG9mIGpRdWVyeSBBUElcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSBzdHIgJ2tleTEsa2V5MiwuLi4nXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IGluIHRoZSBmb3JtIG9mIHtrZXkxOnRydWUsIGtleTI6dHJ1ZSwgLi4ufVxyXG4gKi9cclxuZnVuY3Rpb24gbWFrZU1hcChzdHIpIHtcclxuICB2YXIgb2JqID0ge30sIGl0ZW1zID0gc3RyLnNwbGl0KFwiLFwiKSwgaTtcclxuICBmb3IgKCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrIClcclxuICAgIG9ialsgaXRlbXNbaV0gXSA9IHRydWU7XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG5vZGVOYW1lXyhlbGVtZW50KSB7XHJcbiAgcmV0dXJuIGxvd2VyY2FzZShlbGVtZW50Lm5vZGVOYW1lIHx8IGVsZW1lbnRbMF0ubm9kZU5hbWUpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gbWFwKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcclxuICB2YXIgcmVzdWx0cyA9IFtdO1xyXG4gIGZvckVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcclxuICAgIHJlc3VsdHMucHVzaChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpO1xyXG4gIH0pO1xyXG4gIHJldHVybiByZXN1bHRzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gYXJyYXksIHRoZSBudW1iZXIgb2YgcHJvcGVydGllcyBhbiBvYmplY3QgaGFzLCBvclxyXG4gKiB0aGUgbGVuZ3RoIG9mIGEgc3RyaW5nLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXVnbWVudCB0aGUgT2JqZWN0IHR5cGUgaW4gQW5ndWxhciBleHByZXNzaW9ucy4gU2VlXHJcbiAqIHtAbGluayBhbmd1bGFyLk9iamVjdH0gZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgQW5ndWxhciBhcnJheXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fHN0cmluZ30gb2JqIE9iamVjdCwgYXJyYXksIG9yIHN0cmluZyB0byBpbnNwZWN0LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvd25Qcm9wc09ubHk9ZmFsc2VdIENvdW50IG9ubHkgXCJvd25cIiBwcm9wZXJ0aWVzIGluIGFuIG9iamVjdFxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgc2l6ZSBvZiBgb2JqYCBvciBgMGAgaWYgYG9iamAgaXMgbmVpdGhlciBhbiBvYmplY3Qgbm9yIGFuIGFycmF5LlxyXG4gKi9cclxuZnVuY3Rpb24gc2l6ZShvYmosIG93blByb3BzT25seSkge1xyXG4gIHZhciBjb3VudCA9IDAsIGtleTtcclxuXHJcbiAgaWYgKGlzQXJyYXkob2JqKSB8fCBpc1N0cmluZyhvYmopKSB7XHJcbiAgICByZXR1cm4gb2JqLmxlbmd0aDtcclxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9iaikpIHtcclxuICAgIGZvciAoa2V5IGluIG9iailcclxuICAgICAgaWYgKCFvd25Qcm9wc09ubHkgfHwgb2JqLmhhc093blByb3BlcnR5KGtleSkpXHJcbiAgICAgICAgY291bnQrKztcclxuICB9XHJcblxyXG4gIHJldHVybiBjb3VudDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGluY2x1ZGVzKGFycmF5LCBvYmopIHtcclxuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhcnJheSwgb2JqKSAhPSAtMTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXJyYXlSZW1vdmUoYXJyYXksIHZhbHVlKSB7XHJcbiAgdmFyIGluZGV4ID0gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XHJcbiAgaWYgKGluZGV4ID49MClcclxuICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcbiAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0xlYWZOb2RlIChub2RlKSB7XHJcbiAgaWYgKG5vZGUpIHtcclxuICAgIHN3aXRjaCAobm9kZU5hbWVfKG5vZGUpKSB7XHJcbiAgICBjYXNlIFwib3B0aW9uXCI6XHJcbiAgICBjYXNlIFwicHJlXCI6XHJcbiAgICBjYXNlIFwidGl0bGVcIjpcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmNvcHlcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYCwgd2hpY2ggc2hvdWxkIGJlIGFuIG9iamVjdCBvciBhbiBhcnJheS5cclxuICpcclxuICogKiBJZiBubyBkZXN0aW5hdGlvbiBpcyBzdXBwbGllZCwgYSBjb3B5IG9mIHRoZSBvYmplY3Qgb3IgYXJyYXkgaXMgY3JlYXRlZC5cclxuICogKiBJZiBhIGRlc3RpbmF0aW9uIGlzIHByb3ZpZGVkLCBhbGwgb2YgaXRzIGVsZW1lbnRzIChmb3IgYXJyYXkpIG9yIHByb3BlcnRpZXMgKGZvciBvYmplY3RzKVxyXG4gKiAgIGFyZSBkZWxldGVkIGFuZCB0aGVuIGFsbCBlbGVtZW50cy9wcm9wZXJ0aWVzIGZyb20gdGhlIHNvdXJjZSBhcmUgY29waWVkIHRvIGl0LlxyXG4gKiAqIElmIGBzb3VyY2VgIGlzIG5vdCBhbiBvYmplY3Qgb3IgYXJyYXkgKGluYy4gYG51bGxgIGFuZCBgdW5kZWZpbmVkYCksIGBzb3VyY2VgIGlzIHJldHVybmVkLlxyXG4gKiAqIElmIGBzb3VyY2VgIGlzIGlkZW50aWNhbCB0byAnZGVzdGluYXRpb24nIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93bi5cclxuICpcclxuICogQHBhcmFtIHsqfSBzb3VyY2UgVGhlIHNvdXJjZSB0aGF0IHdpbGwgYmUgdXNlZCB0byBtYWtlIGEgY29weS5cclxuICogICAgICAgICAgICAgICAgICAgQ2FuIGJlIGFueSB0eXBlLCBpbmNsdWRpbmcgcHJpbWl0aXZlcywgYG51bGxgLCBhbmQgYHVuZGVmaW5lZGAuXHJcbiAqIEBwYXJhbSB7KE9iamVjdHxBcnJheSk9fSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBpbnRvIHdoaWNoIHRoZSBzb3VyY2UgaXMgY29waWVkLiBJZlxyXG4gKiAgICAgcHJvdmlkZWQsIG11c3QgYmUgb2YgdGhlIHNhbWUgdHlwZSBhcyBgc291cmNlYC5cclxuICogQHJldHVybnMgeyp9IFRoZSBjb3B5IG9yIHVwZGF0ZWQgYGRlc3RpbmF0aW9uYCwgaWYgYGRlc3RpbmF0aW9uYCB3YXMgc3BlY2lmaWVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gPGV4YW1wbGUgbW9kdWxlPVwiY29weUV4YW1wbGVcIj5cclxuIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gPGZvcm0gbm92YWxpZGF0ZSBjbGFzcz1cInNpbXBsZS1mb3JtXCI+XHJcbiBOYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIubmFtZVwiIC8+PGJyIC8+XHJcbiBFLW1haWw6IDxpbnB1dCB0eXBlPVwiZW1haWxcIiBuZy1tb2RlbD1cInVzZXIuZW1haWxcIiAvPjxiciAvPlxyXG4gR2VuZGVyOiA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJ1c2VyLmdlbmRlclwiIHZhbHVlPVwibWFsZVwiIC8+bWFsZVxyXG4gPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwidXNlci5nZW5kZXJcIiB2YWx1ZT1cImZlbWFsZVwiIC8+ZmVtYWxlPGJyIC8+XHJcbiA8YnV0dG9uIG5nLWNsaWNrPVwicmVzZXQoKVwiPlJFU0VUPC9idXR0b24+XHJcbiA8YnV0dG9uIG5nLWNsaWNrPVwidXBkYXRlKHVzZXIpXCI+U0FWRTwvYnV0dG9uPlxyXG4gPC9mb3JtPlxyXG4gPHByZT5mb3JtID0ge3t1c2VyIHwganNvbn19PC9wcmU+XHJcbiA8cHJlPm1hc3RlciA9IHt7bWFzdGVyIHwganNvbn19PC9wcmU+XHJcbiA8L2Rpdj5cclxuXHJcbiA8c2NyaXB0PlxyXG4gIGFuZ3VsYXIubW9kdWxlKCdjb3B5RXhhbXBsZScsIFtdKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgJHNjb3BlLm1hc3Rlcj0ge307XHJcblxyXG4gICAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xyXG4gICAgICAgIC8vIEV4YW1wbGUgd2l0aCAxIGFyZ3VtZW50XHJcbiAgICAgICAgJHNjb3BlLm1hc3Rlcj0gYW5ndWxhci5jb3B5KHVzZXIpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gRXhhbXBsZSB3aXRoIDIgYXJndW1lbnRzXHJcbiAgICAgICAgYW5ndWxhci5jb3B5KCRzY29wZS5tYXN0ZXIsICRzY29wZS51c2VyKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgICRzY29wZS5yZXNldCgpO1xyXG4gICAgfV0pO1xyXG4gPC9zY3JpcHQ+XHJcbiA8L2ZpbGU+XHJcbiA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiBjb3B5KHNvdXJjZSwgZGVzdGluYXRpb24sIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpIHtcclxuICBpZiAoaXNXaW5kb3coc291cmNlKSB8fCBpc1Njb3BlKHNvdXJjZSkpIHtcclxuICAgIHRocm93IG5nTWluRXJyKCdjcHdzJyxcclxuICAgICAgXCJDYW4ndCBjb3B5ISBNYWtpbmcgY29waWVzIG9mIFdpbmRvdyBvciBTY29wZSBpbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZC5cIik7XHJcbiAgfVxyXG5cclxuICBpZiAoIWRlc3RpbmF0aW9uKSB7XHJcbiAgICBkZXN0aW5hdGlvbiA9IHNvdXJjZTtcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgaWYgKGlzQXJyYXkoc291cmNlKSkge1xyXG4gICAgICAgIGRlc3RpbmF0aW9uID0gY29weShzb3VyY2UsIFtdLCBzdGFja1NvdXJjZSwgc3RhY2tEZXN0KTtcclxuICAgICAgfSBlbHNlIGlmIChpc0RhdGUoc291cmNlKSkge1xyXG4gICAgICAgIGRlc3RpbmF0aW9uID0gbmV3IERhdGUoc291cmNlLmdldFRpbWUoKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWdFeHAoc291cmNlKSkge1xyXG4gICAgICAgIGRlc3RpbmF0aW9uID0gbmV3IFJlZ0V4cChzb3VyY2Uuc291cmNlLCBzb3VyY2UudG9TdHJpbmcoKS5tYXRjaCgvW15cXC9dKiQvKVswXSk7XHJcbiAgICAgICAgZGVzdGluYXRpb24ubGFzdEluZGV4ID0gc291cmNlLmxhc3RJbmRleDtcclxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChzb3VyY2UpKSB7XHJcbiAgICAgICAgdmFyIGVtcHR5T2JqZWN0ID0gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2Yoc291cmNlKSk7XHJcbiAgICAgICAgZGVzdGluYXRpb24gPSBjb3B5KHNvdXJjZSwgZW1wdHlPYmplY3QsIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGlmIChzb3VyY2UgPT09IGRlc3RpbmF0aW9uKSB0aHJvdyBuZ01pbkVycignY3BpJyxcclxuICAgICAgXCJDYW4ndCBjb3B5ISBTb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGFyZSBpZGVudGljYWwuXCIpO1xyXG5cclxuICAgIHN0YWNrU291cmNlID0gc3RhY2tTb3VyY2UgfHwgW107XHJcbiAgICBzdGFja0Rlc3QgPSBzdGFja0Rlc3QgfHwgW107XHJcblxyXG4gICAgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcclxuICAgICAgdmFyIGluZGV4ID0gc3RhY2tTb3VyY2UuaW5kZXhPZihzb3VyY2UpO1xyXG4gICAgICBpZiAoaW5kZXggIT09IC0xKSByZXR1cm4gc3RhY2tEZXN0W2luZGV4XTtcclxuXHJcbiAgICAgIHN0YWNrU291cmNlLnB1c2goc291cmNlKTtcclxuICAgICAgc3RhY2tEZXN0LnB1c2goZGVzdGluYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciByZXN1bHQ7XHJcbiAgICBpZiAoaXNBcnJheShzb3VyY2UpKSB7XHJcbiAgICAgIGRlc3RpbmF0aW9uLmxlbmd0aCA9IDA7XHJcbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHJlc3VsdCA9IGNvcHkoc291cmNlW2ldLCBudWxsLCBzdGFja1NvdXJjZSwgc3RhY2tEZXN0KTtcclxuICAgICAgICBpZiAoaXNPYmplY3Qoc291cmNlW2ldKSkge1xyXG4gICAgICAgICAgc3RhY2tTb3VyY2UucHVzaChzb3VyY2VbaV0pO1xyXG4gICAgICAgICAgc3RhY2tEZXN0LnB1c2gocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVzdGluYXRpb24ucHVzaChyZXN1bHQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgaCA9IGRlc3RpbmF0aW9uLiQkaGFzaEtleTtcclxuICAgICAgaWYgKGlzQXJyYXkoZGVzdGluYXRpb24pKSB7XHJcbiAgICAgICAgZGVzdGluYXRpb24ubGVuZ3RoID0gMDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3JFYWNoKGRlc3RpbmF0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICBkZWxldGUgZGVzdGluYXRpb25ba2V5XTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKCB2YXIga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICAgIGlmKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICByZXN1bHQgPSBjb3B5KHNvdXJjZVtrZXldLCBudWxsLCBzdGFja1NvdXJjZSwgc3RhY2tEZXN0KTtcclxuICAgICAgICAgIGlmIChpc09iamVjdChzb3VyY2Vba2V5XSkpIHtcclxuICAgICAgICAgICAgc3RhY2tTb3VyY2UucHVzaChzb3VyY2Vba2V5XSk7XHJcbiAgICAgICAgICAgIHN0YWNrRGVzdC5wdXNoKHJlc3VsdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBkZXN0aW5hdGlvbltrZXldID0gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBzZXRIYXNoS2V5KGRlc3RpbmF0aW9uLGgpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbiAgcmV0dXJuIGRlc3RpbmF0aW9uO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNoYWxsb3cgY29weSBvZiBhbiBvYmplY3QsIGFuIGFycmF5IG9yIGEgcHJpbWl0aXZlLlxyXG4gKlxyXG4gKiBBc3N1bWVzIHRoYXQgdGhlcmUgYXJlIG5vIHByb3RvIHByb3BlcnRpZXMgZm9yIG9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzaGFsbG93Q29weShzcmMsIGRzdCkge1xyXG4gIGlmIChpc0FycmF5KHNyYykpIHtcclxuICAgIGRzdCA9IGRzdCB8fCBbXTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzcmMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICBkc3RbaV0gPSBzcmNbaV07XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChpc09iamVjdChzcmMpKSB7XHJcbiAgICBkc3QgPSBkc3QgfHwge307XHJcblxyXG4gICAgZm9yICh2YXIga2V5IGluIHNyYykge1xyXG4gICAgICBpZiAoIShrZXkuY2hhckF0KDApID09PSAnJCcgJiYga2V5LmNoYXJBdCgxKSA9PT0gJyQnKSkge1xyXG4gICAgICAgIGRzdFtrZXldID0gc3JjW2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBkc3QgfHwgc3JjO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmVxdWFsc1xyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIHR3byBvYmplY3RzIG9yIHR3byB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQuIFN1cHBvcnRzIHZhbHVlIHR5cGVzLCByZWd1bGFyXHJcbiAqIGV4cHJlc3Npb25zLCBhcnJheXMgYW5kIG9iamVjdHMuXHJcbiAqXHJcbiAqIFR3byBvYmplY3RzIG9yIHZhbHVlcyBhcmUgY29uc2lkZXJlZCBlcXVpdmFsZW50IGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgZm9sbG93aW5nIGlzIHRydWU6XHJcbiAqXHJcbiAqICogQm90aCBvYmplY3RzIG9yIHZhbHVlcyBwYXNzIGA9PT1gIGNvbXBhcmlzb24uXHJcbiAqICogQm90aCBvYmplY3RzIG9yIHZhbHVlcyBhcmUgb2YgdGhlIHNhbWUgdHlwZSBhbmQgYWxsIG9mIHRoZWlyIHByb3BlcnRpZXMgYXJlIGVxdWFsIGJ5XHJcbiAqICAgY29tcGFyaW5nIHRoZW0gd2l0aCBgYW5ndWxhci5lcXVhbHNgLlxyXG4gKiAqIEJvdGggdmFsdWVzIGFyZSBOYU4uIChJbiBKYXZhU2NyaXB0LCBOYU4gPT0gTmFOID0+IGZhbHNlLiBCdXQgd2UgY29uc2lkZXIgdHdvIE5hTiBhcyBlcXVhbClcclxuICogKiBCb3RoIHZhbHVlcyByZXByZXNlbnQgdGhlIHNhbWUgcmVndWxhciBleHByZXNzaW9uIChJbiBKYXZhU2NyaXB0LFxyXG4gKiAgIC9hYmMvID09IC9hYmMvID0+IGZhbHNlLiBCdXQgd2UgY29uc2lkZXIgdHdvIHJlZ3VsYXIgZXhwcmVzc2lvbnMgYXMgZXF1YWwgd2hlbiB0aGVpciB0ZXh0dWFsXHJcbiAqICAgcmVwcmVzZW50YXRpb24gbWF0Y2hlcykuXHJcbiAqXHJcbiAqIER1cmluZyBhIHByb3BlcnR5IGNvbXBhcmlzb24sIHByb3BlcnRpZXMgb2YgYGZ1bmN0aW9uYCB0eXBlIGFuZCBwcm9wZXJ0aWVzIHdpdGggbmFtZXNcclxuICogdGhhdCBiZWdpbiB3aXRoIGAkYCBhcmUgaWdub3JlZC5cclxuICpcclxuICogU2NvcGUgYW5kIERPTVdpbmRvdyBvYmplY3RzIGFyZSBiZWluZyBjb21wYXJlZCBvbmx5IGJ5IGlkZW50aWZ5IChgPT09YCkuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gbzEgT2JqZWN0IG9yIHZhbHVlIHRvIGNvbXBhcmUuXHJcbiAqIEBwYXJhbSB7Kn0gbzIgT2JqZWN0IG9yIHZhbHVlIHRvIGNvbXBhcmUuXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGFyZ3VtZW50cyBhcmUgZXF1YWwuXHJcbiAqL1xyXG5mdW5jdGlvbiBlcXVhbHMobzEsIG8yKSB7XHJcbiAgaWYgKG8xID09PSBvMikgcmV0dXJuIHRydWU7XHJcbiAgaWYgKG8xID09PSBudWxsIHx8IG8yID09PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgaWYgKG8xICE9PSBvMSAmJiBvMiAhPT0gbzIpIHJldHVybiB0cnVlOyAvLyBOYU4gPT09IE5hTlxyXG4gIHZhciB0MSA9IHR5cGVvZiBvMSwgdDIgPSB0eXBlb2YgbzIsIGxlbmd0aCwga2V5LCBrZXlTZXQ7XHJcbiAgaWYgKHQxID09IHQyKSB7XHJcbiAgICBpZiAodDEgPT0gJ29iamVjdCcpIHtcclxuICAgICAgaWYgKGlzQXJyYXkobzEpKSB7XHJcbiAgICAgICAgaWYgKCFpc0FycmF5KG8yKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICgobGVuZ3RoID0gbzEubGVuZ3RoKSA9PSBvMi5sZW5ndGgpIHtcclxuICAgICAgICAgIGZvcihrZXk9MDsga2V5PGxlbmd0aDsga2V5KyspIHtcclxuICAgICAgICAgICAgaWYgKCFlcXVhbHMobzFba2V5XSwgbzJba2V5XSkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChpc0RhdGUobzEpKSB7XHJcbiAgICAgICAgaWYgKCFpc0RhdGUobzIpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIGVxdWFscyhvMS5nZXRUaW1lKCksIG8yLmdldFRpbWUoKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWdFeHAobzEpICYmIGlzUmVnRXhwKG8yKSkge1xyXG4gICAgICAgIHJldHVybiBvMS50b1N0cmluZygpID09IG8yLnRvU3RyaW5nKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGlzU2NvcGUobzEpIHx8IGlzU2NvcGUobzIpIHx8IGlzV2luZG93KG8xKSB8fCBpc1dpbmRvdyhvMikgfHwgaXNBcnJheShvMikpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBrZXlTZXQgPSB7fTtcclxuICAgICAgICBmb3Ioa2V5IGluIG8xKSB7XHJcbiAgICAgICAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyQnIHx8IGlzRnVuY3Rpb24obzFba2V5XSkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgaWYgKCFlcXVhbHMobzFba2V5XSwgbzJba2V5XSkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIGtleVNldFtrZXldID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGtleSBpbiBvMikge1xyXG4gICAgICAgICAgaWYgKCFrZXlTZXQuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxyXG4gICAgICAgICAgICAgIGtleS5jaGFyQXQoMCkgIT09ICckJyAmJlxyXG4gICAgICAgICAgICAgIG8yW2tleV0gIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAgICFpc0Z1bmN0aW9uKG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxudmFyIGNzcCA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmIChpc0RlZmluZWQoY3NwLmlzQWN0aXZlXykpIHJldHVybiBjc3AuaXNBY3RpdmVfO1xyXG5cclxuICB2YXIgYWN0aXZlID0gISEoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25nLWNzcF0nKSB8fFxyXG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uZy1jc3BdJykpO1xyXG5cclxuICBpZiAoIWFjdGl2ZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLyoganNoaW50IC1XMDMxLCAtVzA1NCAqL1xyXG4gICAgICBuZXcgRnVuY3Rpb24oJycpO1xyXG4gICAgICAvKiBqc2hpbnQgK1cwMzEsICtXMDU0ICovXHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGFjdGl2ZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKGNzcC5pc0FjdGl2ZV8gPSBhY3RpdmUpO1xyXG59O1xyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBjb25jYXQoYXJyYXkxLCBhcnJheTIsIGluZGV4KSB7XHJcbiAgcmV0dXJuIGFycmF5MS5jb25jYXQoc2xpY2UuY2FsbChhcnJheTIsIGluZGV4KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaWNlQXJncyhhcmdzLCBzdGFydEluZGV4KSB7XHJcbiAgcmV0dXJuIHNsaWNlLmNhbGwoYXJncywgc3RhcnRJbmRleCB8fCAwKTtcclxufVxyXG5cclxuXHJcbi8qIGpzaGludCAtVzEwMSAqL1xyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuYmluZFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggY2FsbHMgZnVuY3Rpb24gYGZuYCBib3VuZCB0byBgc2VsZmAgKGBzZWxmYCBiZWNvbWVzIHRoZSBgdGhpc2AgZm9yXHJcbiAqIGBmbmApLiBZb3UgY2FuIHN1cHBseSBvcHRpb25hbCBgYXJnc2AgdGhhdCBhcmUgcHJlYm91bmQgdG8gdGhlIGZ1bmN0aW9uLiBUaGlzIGZlYXR1cmUgaXMgYWxzb1xyXG4gKiBrbm93biBhcyBbcGFydGlhbCBhcHBsaWNhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXJ0aWFsX2FwcGxpY2F0aW9uKSwgYXNcclxuICogZGlzdGluZ3Vpc2hlZCBmcm9tIFtmdW5jdGlvbiBjdXJyeWluZ10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DdXJyeWluZyNDb250cmFzdF93aXRoX3BhcnRpYWxfZnVuY3Rpb25fYXBwbGljYXRpb24pLlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gc2VsZiBDb250ZXh0IHdoaWNoIGBmbmAgc2hvdWxkIGJlIGV2YWx1YXRlZCBpbi5cclxuICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBGdW5jdGlvbiB0byBiZSBib3VuZC5cclxuICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIGFyZ3VtZW50cyB0byBiZSBwcmVib3VuZCB0byB0aGUgYGZuYCBmdW5jdGlvbiBjYWxsLlxyXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gRnVuY3Rpb24gdGhhdCB3cmFwcyB0aGUgYGZuYCB3aXRoIGFsbCB0aGUgc3BlY2lmaWVkIGJpbmRpbmdzLlxyXG4gKi9cclxuLyoganNoaW50ICtXMTAxICovXHJcbmZ1bmN0aW9uIGJpbmQoc2VsZiwgZm4pIHtcclxuICB2YXIgY3VycnlBcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBzbGljZUFyZ3MoYXJndW1lbnRzLCAyKSA6IFtdO1xyXG4gIGlmIChpc0Z1bmN0aW9uKGZuKSAmJiAhKGZuIGluc3RhbmNlb2YgUmVnRXhwKSkge1xyXG4gICAgcmV0dXJuIGN1cnJ5QXJncy5sZW5ndGhcclxuICAgICAgPyBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAgICAgICAgID8gZm4uYXBwbHkoc2VsZiwgY3VycnlBcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpKVxyXG4gICAgICAgICAgICA6IGZuLmFwcGx5KHNlbGYsIGN1cnJ5QXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcclxuICAgICAgICAgICAgPyBmbi5hcHBseShzZWxmLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIDogZm4uY2FsbChzZWxmKTtcclxuICAgICAgICB9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBpbiBJRSwgbmF0aXZlIG1ldGhvZHMgYXJlIG5vdCBmdW5jdGlvbnMgc28gdGhleSBjYW5ub3QgYmUgYm91bmQgKG5vdGU6IHRoZXkgZG9uJ3QgbmVlZCB0byBiZSlcclxuICAgIHJldHVybiBmbjtcclxuICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiB0b0pzb25SZXBsYWNlcihrZXksIHZhbHVlKSB7XHJcbiAgdmFyIHZhbCA9IHZhbHVlO1xyXG5cclxuICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5LmNoYXJBdCgwKSA9PT0gJyQnICYmIGtleS5jaGFyQXQoMSkgPT09ICckJykge1xyXG4gICAgdmFsID0gdW5kZWZpbmVkO1xyXG4gIH0gZWxzZSBpZiAoaXNXaW5kb3codmFsdWUpKSB7XHJcbiAgICB2YWwgPSAnJFdJTkRPVyc7XHJcbiAgfSBlbHNlIGlmICh2YWx1ZSAmJiAgZG9jdW1lbnQgPT09IHZhbHVlKSB7XHJcbiAgICB2YWwgPSAnJERPQ1VNRU5UJztcclxuICB9IGVsc2UgaWYgKGlzU2NvcGUodmFsdWUpKSB7XHJcbiAgICB2YWwgPSAnJFNDT1BFJztcclxuICB9XHJcblxyXG4gIHJldHVybiB2YWw7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIudG9Kc29uXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNlcmlhbGl6ZXMgaW5wdXQgaW50byBhIEpTT04tZm9ybWF0dGVkIHN0cmluZy4gUHJvcGVydGllcyB3aXRoIGxlYWRpbmcgJCQgY2hhcmFjdGVycyB3aWxsIGJlXHJcbiAqIHN0cmlwcGVkIHNpbmNlIGFuZ3VsYXIgdXNlcyB0aGlzIG5vdGF0aW9uIGludGVybmFsbHkuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fERhdGV8c3RyaW5nfG51bWJlcn0gb2JqIElucHV0IHRvIGJlIHNlcmlhbGl6ZWQgaW50byBKU09OLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBwcmV0dHkgSWYgc2V0IHRvIHRydWUsIHRoZSBKU09OIG91dHB1dCB3aWxsIGNvbnRhaW4gbmV3bGluZXMgYW5kIHdoaXRlc3BhY2UuXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBKU09OLWlmaWVkIHN0cmluZyByZXByZXNlbnRpbmcgYG9iamAuXHJcbiAqL1xyXG5mdW5jdGlvbiB0b0pzb24ob2JqLCBwcmV0dHkpIHtcclxuICBpZiAodHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgdG9Kc29uUmVwbGFjZXIsIHByZXR0eSA/ICcgICcgOiBudWxsKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5mcm9tSnNvblxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXNlcmlhbGl6ZXMgYSBKU09OIHN0cmluZy5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGpzb24gSlNPTiBzdHJpbmcgdG8gZGVzZXJpYWxpemUuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R8QXJyYXl8c3RyaW5nfG51bWJlcn0gRGVzZXJpYWxpemVkIHRoaW5neS5cclxuICovXHJcbmZ1bmN0aW9uIGZyb21Kc29uKGpzb24pIHtcclxuICByZXR1cm4gaXNTdHJpbmcoanNvbilcclxuICAgICAgPyBKU09OLnBhcnNlKGpzb24pXHJcbiAgICAgIDoganNvbjtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGVsZW1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydGluZ1RhZyhlbGVtZW50KSB7XHJcbiAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KS5jbG9uZSgpO1xyXG4gIHRyeSB7XHJcbiAgICAvLyB0dXJucyBvdXQgSUUgZG9lcyBub3QgbGV0IHlvdSBzZXQgLmh0bWwoKSBvbiBlbGVtZW50cyB3aGljaFxyXG4gICAgLy8gYXJlIG5vdCBhbGxvd2VkIHRvIGhhdmUgY2hpbGRyZW4uIFNvIHdlIGp1c3QgaWdub3JlIGl0LlxyXG4gICAgZWxlbWVudC5lbXB0eSgpO1xyXG4gIH0gY2F0Y2goZSkge31cclxuICAvLyBBcyBQZXIgRE9NIFN0YW5kYXJkc1xyXG4gIHZhciBURVhUX05PREUgPSAzO1xyXG4gIHZhciBlbGVtSHRtbCA9IGpxTGl0ZSgnPGRpdj4nKS5hcHBlbmQoZWxlbWVudCkuaHRtbCgpO1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gZWxlbWVudFswXS5ub2RlVHlwZSA9PT0gVEVYVF9OT0RFID8gbG93ZXJjYXNlKGVsZW1IdG1sKSA6XHJcbiAgICAgICAgZWxlbUh0bWwuXHJcbiAgICAgICAgICBtYXRjaCgvXig8W14+XSs+KS8pWzFdLlxyXG4gICAgICAgICAgcmVwbGFjZSgvXjwoW1xcd1xcLV0rKS8sIGZ1bmN0aW9uKG1hdGNoLCBub2RlTmFtZSkgeyByZXR1cm4gJzwnICsgbG93ZXJjYXNlKG5vZGVOYW1lKTsgfSk7XHJcbiAgfSBjYXRjaChlKSB7XHJcbiAgICByZXR1cm4gbG93ZXJjYXNlKGVsZW1IdG1sKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLyoqXHJcbiAqIFRyaWVzIHRvIGRlY29kZSB0aGUgVVJJIGNvbXBvbmVudCB3aXRob3V0IHRocm93aW5nIGFuIGV4Y2VwdGlvbi5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHN0ciB2YWx1ZSBwb3RlbnRpYWwgVVJJIGNvbXBvbmVudCB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBjYW4gYmUgZGVjb2RlZFxyXG4gKiB3aXRoIHRoZSBkZWNvZGVVUklDb21wb25lbnQgZnVuY3Rpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiB0cnlEZWNvZGVVUklDb21wb25lbnQodmFsdWUpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgfSBjYXRjaChlKSB7XHJcbiAgICAvLyBJZ25vcmUgYW55IGludmFsaWQgdXJpIGNvbXBvbmVudFxyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgYW4gZXNjYXBlZCB1cmwgcXVlcnkgc3RyaW5nIGludG8ga2V5LXZhbHVlIHBhaXJzLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsYm9vbGVhbnxBcnJheT59XHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZUtleVZhbHVlKC8qKnN0cmluZyova2V5VmFsdWUpIHtcclxuICB2YXIgb2JqID0ge30sIGtleV92YWx1ZSwga2V5O1xyXG4gIGZvckVhY2goKGtleVZhbHVlIHx8IFwiXCIpLnNwbGl0KCcmJyksIGZ1bmN0aW9uKGtleVZhbHVlKSB7XHJcbiAgICBpZiAoIGtleVZhbHVlICkge1xyXG4gICAgICBrZXlfdmFsdWUgPSBrZXlWYWx1ZS5yZXBsYWNlKC9cXCsvZywnJTIwJykuc3BsaXQoJz0nKTtcclxuICAgICAga2V5ID0gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KGtleV92YWx1ZVswXSk7XHJcbiAgICAgIGlmICggaXNEZWZpbmVkKGtleSkgKSB7XHJcbiAgICAgICAgdmFyIHZhbCA9IGlzRGVmaW5lZChrZXlfdmFsdWVbMV0pID8gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KGtleV92YWx1ZVsxXSkgOiB0cnVlO1xyXG4gICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgIG9ialtrZXldID0gdmFsO1xyXG4gICAgICAgIH0gZWxzZSBpZihpc0FycmF5KG9ialtrZXldKSkge1xyXG4gICAgICAgICAgb2JqW2tleV0ucHVzaCh2YWwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvYmpba2V5XSA9IFtvYmpba2V5XSx2YWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvS2V5VmFsdWUob2JqKSB7XHJcbiAgdmFyIHBhcnRzID0gW107XHJcbiAgZm9yRWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbihhcnJheVZhbHVlKSB7XHJcbiAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXksIHRydWUpICtcclxuICAgICAgICAgICAgICAgICAgIChhcnJheVZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeShhcnJheVZhbHVlLCB0cnVlKSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSkgK1xyXG4gICAgICAgICAgICAgICAodmFsdWUgPT09IHRydWUgPyAnJyA6ICc9JyArIGVuY29kZVVyaVF1ZXJ5KHZhbHVlLCB0cnVlKSkpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiBwYXJ0cy5sZW5ndGggPyBwYXJ0cy5qb2luKCcmJykgOiAnJztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBXZSBuZWVkIG91ciBjdXN0b20gbWV0aG9kIGJlY2F1c2UgZW5jb2RlVVJJQ29tcG9uZW50IGlzIHRvbyBhZ2dyZXNzaXZlIGFuZCBkb2Vzbid0IGZvbGxvd1xyXG4gKiBodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmMzOTg2LnR4dCB3aXRoIHJlZ2FyZHMgdG8gdGhlIGNoYXJhY3RlciBzZXQgKHBjaGFyKSBhbGxvd2VkIGluIHBhdGhcclxuICogc2VnbWVudHM6XHJcbiAqICAgIHNlZ21lbnQgICAgICAgPSAqcGNoYXJcclxuICogICAgcGNoYXIgICAgICAgICA9IHVucmVzZXJ2ZWQgLyBwY3QtZW5jb2RlZCAvIHN1Yi1kZWxpbXMgLyBcIjpcIiAvIFwiQFwiXHJcbiAqICAgIHBjdC1lbmNvZGVkICAgPSBcIiVcIiBIRVhESUcgSEVYRElHXHJcbiAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcclxuICogICAgc3ViLWRlbGltcyAgICA9IFwiIVwiIC8gXCIkXCIgLyBcIiZcIiAvIFwiJ1wiIC8gXCIoXCIgLyBcIilcIlxyXG4gKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlVXJpU2VnbWVudCh2YWwpIHtcclxuICByZXR1cm4gZW5jb2RlVXJpUXVlcnkodmFsLCB0cnVlKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyNi9naSwgJyYnKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyUzRC9naSwgJz0nKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyQi9naSwgJysnKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZW5jb2RpbmcgKmtleSogb3IgKnZhbHVlKiBwYXJ0cyBvZiBxdWVyeSBjb21wb25lbnQuIFdlIG5lZWQgYSBjdXN0b21cclxuICogbWV0aG9kIGJlY2F1c2UgZW5jb2RlVVJJQ29tcG9uZW50IGlzIHRvbyBhZ2dyZXNzaXZlIGFuZCBlbmNvZGVzIHN0dWZmIHRoYXQgZG9lc24ndCBoYXZlIHRvIGJlXHJcbiAqIGVuY29kZWQgcGVyIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODY6XHJcbiAqICAgIHF1ZXJ5ICAgICAgID0gKiggcGNoYXIgLyBcIi9cIiAvIFwiP1wiIClcclxuICogICAgcGNoYXIgICAgICAgICA9IHVucmVzZXJ2ZWQgLyBwY3QtZW5jb2RlZCAvIHN1Yi1kZWxpbXMgLyBcIjpcIiAvIFwiQFwiXHJcbiAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcclxuICogICAgcGN0LWVuY29kZWQgICA9IFwiJVwiIEhFWERJRyBIRVhESUdcclxuICogICAgc3ViLWRlbGltcyAgICA9IFwiIVwiIC8gXCIkXCIgLyBcIiZcIiAvIFwiJ1wiIC8gXCIoXCIgLyBcIilcIlxyXG4gKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlVXJpUXVlcnkodmFsLCBwY3RFbmNvZGVTcGFjZXMpIHtcclxuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyUzQi9naSwgJzsnKS5cclxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyMC9nLCAocGN0RW5jb2RlU3BhY2VzID8gJyUyMCcgOiAnKycpKTtcclxufVxyXG5cclxudmFyIG5nQXR0clByZWZpeGVzID0gWyduZy0nLCAnZGF0YS1uZy0nLCAnbmc6JywgJ3gtbmctJ107XHJcblxyXG5mdW5jdGlvbiBnZXROZ0F0dHJpYnV0ZShlbGVtZW50LCBuZ0F0dHIpIHtcclxuICB2YXIgYXR0ciwgaSwgaWkgPSBuZ0F0dHJQcmVmaXhlcy5sZW5ndGg7XHJcbiAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KTtcclxuICBmb3IgKGk9MDsgaTxpaTsgKytpKSB7XHJcbiAgICBhdHRyID0gbmdBdHRyUHJlZml4ZXNbaV0gKyBuZ0F0dHI7XHJcbiAgICBpZiAoaXNTdHJpbmcoYXR0ciA9IGVsZW1lbnQuYXR0cihhdHRyKSkpIHtcclxuICAgICAgcmV0dXJuIGF0dHI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0FwcFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2FuZ3VsYXIuTW9kdWxlfSBuZ0FwcCBhbiBvcHRpb25hbCBhcHBsaWNhdGlvblxyXG4gKiAgIHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGV9IG5hbWUgdG8gbG9hZC5cclxuICogQHBhcmFtIHtib29sZWFuPX0gbmdTdHJpY3REaSBpZiB0aGlzIGF0dHJpYnV0ZSBpcyBwcmVzZW50IG9uIHRoZSBhcHAgZWxlbWVudCwgdGhlIGluamVjdG9yIHdpbGwgYmVcclxuICogICBjcmVhdGVkIGluIFwic3RyaWN0LWRpXCIgbW9kZS4gVGhpcyBtZWFucyB0aGF0IHRoZSBhcHBsaWNhdGlvbiB3aWxsIGZhaWwgdG8gaW52b2tlIGZ1bmN0aW9ucyB3aGljaFxyXG4gKiAgIGRvIG5vdCB1c2UgZXhwbGljaXQgZnVuY3Rpb24gYW5ub3RhdGlvbiAoYW5kIGFyZSB0aHVzIHVuc3VpdGFibGUgZm9yIG1pbmlmaWNhdGlvbiksIGFzIGRlc2NyaWJlZFxyXG4gKiAgIGluIHtAbGluayBndWlkZS9kaSB0aGUgRGVwZW5kZW5jeSBJbmplY3Rpb24gZ3VpZGV9LCBhbmQgdXNlZnVsIGRlYnVnZ2luZyBpbmZvIHdpbGwgYXNzaXN0IGluXHJcbiAqICAgdHJhY2tpbmcgZG93biB0aGUgcm9vdCBvZiB0aGVzZSBidWdzLlxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogVXNlIHRoaXMgZGlyZWN0aXZlIHRvICoqYXV0by1ib290c3RyYXAqKiBhbiBBbmd1bGFySlMgYXBwbGljYXRpb24uIFRoZSBgbmdBcHBgIGRpcmVjdGl2ZVxyXG4gKiBkZXNpZ25hdGVzIHRoZSAqKnJvb3QgZWxlbWVudCoqIG9mIHRoZSBhcHBsaWNhdGlvbiBhbmQgaXMgdHlwaWNhbGx5IHBsYWNlZCBuZWFyIHRoZSByb290IGVsZW1lbnRcclxuICogb2YgdGhlIHBhZ2UgLSBlLmcuIG9uIHRoZSBgPGJvZHk+YCBvciBgPGh0bWw+YCB0YWdzLlxyXG4gKlxyXG4gKiBPbmx5IG9uZSBBbmd1bGFySlMgYXBwbGljYXRpb24gY2FuIGJlIGF1dG8tYm9vdHN0cmFwcGVkIHBlciBIVE1MIGRvY3VtZW50LiBUaGUgZmlyc3QgYG5nQXBwYFxyXG4gKiBmb3VuZCBpbiB0aGUgZG9jdW1lbnQgd2lsbCBiZSB1c2VkIHRvIGRlZmluZSB0aGUgcm9vdCBlbGVtZW50IHRvIGF1dG8tYm9vdHN0cmFwIGFzIGFuXHJcbiAqIGFwcGxpY2F0aW9uLiBUbyBydW4gbXVsdGlwbGUgYXBwbGljYXRpb25zIGluIGFuIEhUTUwgZG9jdW1lbnQgeW91IG11c3QgbWFudWFsbHkgYm9vdHN0cmFwIHRoZW0gdXNpbmdcclxuICoge0BsaW5rIGFuZ3VsYXIuYm9vdHN0cmFwfSBpbnN0ZWFkLiBBbmd1bGFySlMgYXBwbGljYXRpb25zIGNhbm5vdCBiZSBuZXN0ZWQgd2l0aGluIGVhY2ggb3RoZXIuXHJcbiAqXHJcbiAqIFlvdSBjYW4gc3BlY2lmeSBhbiAqKkFuZ3VsYXJKUyBtb2R1bGUqKiB0byBiZSB1c2VkIGFzIHRoZSByb290IG1vZHVsZSBmb3IgdGhlIGFwcGxpY2F0aW9uLiAgVGhpc1xyXG4gKiBtb2R1bGUgd2lsbCBiZSBsb2FkZWQgaW50byB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yfSB3aGVuIHRoZSBhcHBsaWNhdGlvbiBpcyBib290c3RyYXBwZWQgYW5kXHJcbiAqIHNob3VsZCBjb250YWluIHRoZSBhcHBsaWNhdGlvbiBjb2RlIG5lZWRlZCBvciBoYXZlIGRlcGVuZGVuY2llcyBvbiBvdGhlciBtb2R1bGVzIHRoYXQgd2lsbFxyXG4gKiBjb250YWluIHRoZSBjb2RlLiBTZWUge0BsaW5rIGFuZ3VsYXIubW9kdWxlfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuICpcclxuICogSW4gdGhlIGV4YW1wbGUgYmVsb3cgaWYgdGhlIGBuZ0FwcGAgZGlyZWN0aXZlIHdlcmUgbm90IHBsYWNlZCBvbiB0aGUgYGh0bWxgIGVsZW1lbnQgdGhlbiB0aGVcclxuICogZG9jdW1lbnQgd291bGQgbm90IGJlIGNvbXBpbGVkLCB0aGUgYEFwcENvbnRyb2xsZXJgIHdvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgYW5kIHRoZSBge3sgYStiIH19YFxyXG4gKiB3b3VsZCBub3QgYmUgcmVzb2x2ZWQgdG8gYDNgLlxyXG4gKlxyXG4gKiBgbmdBcHBgIGlzIHRoZSBlYXNpZXN0LCBhbmQgbW9zdCBjb21tb24sIHdheSB0byBib290c3RyYXAgYW4gYXBwbGljYXRpb24uXHJcbiAqXHJcbiA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FwcERlbW9cIj5cclxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgPGRpdiBuZy1jb250cm9sbGVyPVwibmdBcHBEZW1vQ29udHJvbGxlclwiPlxyXG4gICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cclxuICAgPC9kaXY+XHJcbiAgIDwvZmlsZT5cclxuICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICBhbmd1bGFyLm1vZHVsZSgnbmdBcHBEZW1vJywgW10pLmNvbnRyb2xsZXIoJ25nQXBwRGVtb0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAkc2NvcGUuYSA9IDE7XHJcbiAgICAgJHNjb3BlLmIgPSAyO1xyXG4gICB9KTtcclxuICAgPC9maWxlPlxyXG4gPC9leGFtcGxlPlxyXG4gKlxyXG4gKiBVc2luZyBgbmdTdHJpY3REaWAsIHlvdSB3b3VsZCBzZWUgc29tZXRoaW5nIGxpa2UgdGhpczpcclxuICpcclxuIDxleGFtcGxlIG5nLWFwcC1pbmNsdWRlZD1cInRydWVcIj5cclxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgPGRpdiBuZy1hcHA9XCJuZ0FwcFN0cmljdERlbW9cIiBuZy1zdHJpY3QtZGk+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHb29kQ29udHJvbGxlcjFcIj5cclxuICAgICAgICAgICBJIGNhbiBhZGQ6IHt7YX19ICsge3tifX0gPSAge3sgYStiIH19XHJcblxyXG4gICAgICAgICAgIDxwPlRoaXMgcmVuZGVycyBiZWNhdXNlIHRoZSBjb250cm9sbGVyIGRvZXMgbm90IGZhaWwgdG9cclxuICAgICAgICAgICAgICBpbnN0YW50aWF0ZSwgYnkgdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbiBzdHlsZSAoc2VlXHJcbiAgICAgICAgICAgICAgc2NyaXB0LmpzIGZvciBkZXRhaWxzKVxyXG4gICAgICAgICAgIDwvcD5cclxuICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkdvb2RDb250cm9sbGVyMlwiPlxyXG4gICAgICAgICAgIE5hbWU6IDxpbnB1dCBuZy1tb2RlbD1cIm5hbWVcIj48YnIgLz5cclxuICAgICAgICAgICBIZWxsbywge3tuYW1lfX0hXHJcblxyXG4gICAgICAgICAgIDxwPlRoaXMgcmVuZGVycyBiZWNhdXNlIHRoZSBjb250cm9sbGVyIGRvZXMgbm90IGZhaWwgdG9cclxuICAgICAgICAgICAgICBpbnN0YW50aWF0ZSwgYnkgdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbiBzdHlsZVxyXG4gICAgICAgICAgICAgIChzZWUgc2NyaXB0LmpzIGZvciBkZXRhaWxzKVxyXG4gICAgICAgICAgIDwvcD5cclxuICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkJhZENvbnRyb2xsZXJcIj5cclxuICAgICAgICAgICBJIGNhbiBhZGQ6IHt7YX19ICsge3tifX0gPSAge3sgYStiIH19XHJcblxyXG4gICAgICAgICAgIDxwPlRoZSBjb250cm9sbGVyIGNvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQsIGR1ZSB0byByZWx5aW5nXHJcbiAgICAgICAgICAgICAgb24gYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb25zICh3aGljaCBhcmUgZGlzYWJsZWQgaW5cclxuICAgICAgICAgICAgICBzdHJpY3QgbW9kZSkuIEFzIHN1Y2gsIHRoZSBjb250ZW50IG9mIHRoaXMgc2VjdGlvbiBpcyBub3RcclxuICAgICAgICAgICAgICBpbnRlcnBvbGF0ZWQsIGFuZCB0aGVyZSBzaG91bGQgYmUgYW4gZXJyb3IgaW4geW91ciB3ZWIgY29uc29sZS5cclxuICAgICAgICAgICA8L3A+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgPC9kaXY+XHJcbiAgIDwvZmlsZT5cclxuICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICBhbmd1bGFyLm1vZHVsZSgnbmdBcHBTdHJpY3REZW1vJywgW10pXHJcbiAgICAgLy8gQmFkQ29udHJvbGxlciB3aWxsIGZhaWwgdG8gaW5zdGFudGlhdGUsIGR1ZSB0byByZWx5aW5nIG9uIGF1dG9tYXRpYyBmdW5jdGlvbiBhbm5vdGF0aW9uLFxyXG4gICAgIC8vIHJhdGhlciB0aGFuIGFuIGV4cGxpY2l0IGFubm90YXRpb25cclxuICAgICAuY29udHJvbGxlcignQmFkQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgJHNjb3BlLmEgPSAxO1xyXG4gICAgICAgJHNjb3BlLmIgPSAyO1xyXG4gICAgIH0pXHJcbiAgICAgLy8gVW5saWtlIEJhZENvbnRyb2xsZXIsIEdvb2RDb250cm9sbGVyMSBhbmQgR29vZENvbnRyb2xsZXIyIHdpbGwgbm90IGZhaWwgdG8gYmUgaW5zdGFudGlhdGVkLFxyXG4gICAgIC8vIGR1ZSB0byB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9ucyB1c2luZyB0aGUgYXJyYXkgc3R5bGUgYW5kICRpbmplY3QgcHJvcGVydHksIHJlc3BlY3RpdmVseS5cclxuICAgICAuY29udHJvbGxlcignR29vZENvbnRyb2xsZXIxJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICRzY29wZS5hID0gMTtcclxuICAgICAgICRzY29wZS5iID0gMjtcclxuICAgICB9XSlcclxuICAgICAuY29udHJvbGxlcignR29vZENvbnRyb2xsZXIyJywgR29vZENvbnRyb2xsZXIyKTtcclxuICAgICBmdW5jdGlvbiBHb29kQ29udHJvbGxlcjIoJHNjb3BlKSB7XHJcbiAgICAgICAkc2NvcGUubmFtZSA9IFwiV29ybGRcIjtcclxuICAgICB9XHJcbiAgICAgR29vZENvbnRyb2xsZXIyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgZGl2W25nLWNvbnRyb2xsZXJdIHtcclxuICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcclxuICAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgYm9yZGVyOiAxcHggc29saWQ7XHJcbiAgICAgICBwYWRkaW5nOiAuNWVtO1xyXG4gICB9XHJcbiAgIGRpdltuZy1jb250cm9sbGVyXj1Hb29kXSB7XHJcbiAgICAgICBib3JkZXItY29sb3I6ICNkNmU5YzY7XHJcbiAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGZmMGQ4O1xyXG4gICAgICAgY29sb3I6ICMzYzc2M2Q7XHJcbiAgIH1cclxuICAgZGl2W25nLWNvbnRyb2xsZXJePUJhZF0ge1xyXG4gICAgICAgYm9yZGVyLWNvbG9yOiAjZWJjY2QxO1xyXG4gICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YyZGVkZTtcclxuICAgICAgIGNvbG9yOiAjYTk0NDQyO1xyXG4gICAgICAgbWFyZ2luLWJvdHRvbTogMDtcclxuICAgfVxyXG4gICA8L2ZpbGU+XHJcbiA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiBhbmd1bGFySW5pdChlbGVtZW50LCBib290c3RyYXApIHtcclxuICB2YXIgYXBwRWxlbWVudCxcclxuICAgICAgbW9kdWxlLFxyXG4gICAgICBjb25maWcgPSB7fTtcclxuXHJcbiAgLy8gVGhlIGVsZW1lbnQgYGVsZW1lbnRgIGhhcyBwcmlvcml0eSBvdmVyIGFueSBvdGhlciBlbGVtZW50XHJcbiAgZm9yRWFjaChuZ0F0dHJQcmVmaXhlcywgZnVuY3Rpb24ocHJlZml4KSB7XHJcbiAgICB2YXIgbmFtZSA9IHByZWZpeCArICdhcHAnO1xyXG5cclxuICAgIGlmICghYXBwRWxlbWVudCAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZShuYW1lKSkge1xyXG4gICAgICBhcHBFbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgbW9kdWxlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgZm9yRWFjaChuZ0F0dHJQcmVmaXhlcywgZnVuY3Rpb24ocHJlZml4KSB7XHJcbiAgICB2YXIgbmFtZSA9IHByZWZpeCArICdhcHAnO1xyXG4gICAgdmFyIGNhbmRpZGF0ZTtcclxuXHJcbiAgICBpZiAoIWFwcEVsZW1lbnQgJiYgKGNhbmRpZGF0ZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignWycgKyBuYW1lLnJlcGxhY2UoJzonLCAnXFxcXDonKSArICddJykpKSB7XHJcbiAgICAgIGFwcEVsZW1lbnQgPSBjYW5kaWRhdGU7XHJcbiAgICAgIG1vZHVsZSA9IGNhbmRpZGF0ZS5nZXRBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgaWYgKGFwcEVsZW1lbnQpIHtcclxuICAgIGNvbmZpZy5zdHJpY3REaSA9IGdldE5nQXR0cmlidXRlKGFwcEVsZW1lbnQsIFwic3RyaWN0LWRpXCIpICE9PSBudWxsO1xyXG4gICAgYm9vdHN0cmFwKGFwcEVsZW1lbnQsIG1vZHVsZSA/IFttb2R1bGVdIDogW10sIGNvbmZpZyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuYm9vdHN0cmFwXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIG1hbnVhbGx5IHN0YXJ0IHVwIGFuZ3VsYXIgYXBwbGljYXRpb24uXHJcbiAqXHJcbiAqIFNlZToge0BsaW5rIGd1aWRlL2Jvb3RzdHJhcCBCb290c3RyYXB9XHJcbiAqXHJcbiAqIE5vdGUgdGhhdCBQcm90cmFjdG9yIGJhc2VkIGVuZC10by1lbmQgdGVzdHMgY2Fubm90IHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGJvb3RzdHJhcCBtYW51YWxseS5cclxuICogVGhleSBtdXN0IHVzZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQXBwIG5nQXBwfS5cclxuICpcclxuICogQW5ndWxhciB3aWxsIGRldGVjdCBpZiBpdCBoYXMgYmVlbiBsb2FkZWQgaW50byB0aGUgYnJvd3NlciBtb3JlIHRoYW4gb25jZSBhbmQgb25seSBhbGxvdyB0aGVcclxuICogZmlyc3QgbG9hZGVkIHNjcmlwdCB0byBiZSBib290c3RyYXBwZWQgYW5kIHdpbGwgcmVwb3J0IGEgd2FybmluZyB0byB0aGUgYnJvd3NlciBjb25zb2xlIGZvclxyXG4gKiBlYWNoIG9mIHRoZSBzdWJzZXF1ZW50IHNjcmlwdHMuIFRoaXMgcHJldmVudHMgc3RyYW5nZSByZXN1bHRzIGluIGFwcGxpY2F0aW9ucywgd2hlcmUgb3RoZXJ3aXNlXHJcbiAqIG11bHRpcGxlIGluc3RhbmNlcyBvZiBBbmd1bGFyIHRyeSB0byB3b3JrIG9uIHRoZSBET00uXHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPCFkb2N0eXBlIGh0bWw+XHJcbiAqIDxodG1sPlxyXG4gKiA8Ym9keT5cclxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiV2VsY29tZUNvbnRyb2xsZXJcIj5cclxuICogICB7e2dyZWV0aW5nfX1cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqIDxzY3JpcHQgc3JjPVwiYW5ndWxhci5qc1wiPjwvc2NyaXB0PlxyXG4gKiA8c2NyaXB0PlxyXG4gKiAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZGVtbycsIFtdKVxyXG4gKiAgIC5jb250cm9sbGVyKCdXZWxjb21lQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gKiAgICAgICAkc2NvcGUuZ3JlZXRpbmcgPSAnV2VsY29tZSEnO1xyXG4gKiAgIH0pO1xyXG4gKiAgIGFuZ3VsYXIuYm9vdHN0cmFwKGRvY3VtZW50LCBbJ2RlbW8nXSk7XHJcbiAqIDwvc2NyaXB0PlxyXG4gKiA8L2JvZHk+XHJcbiAqIDwvaHRtbD5cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCBET00gZWxlbWVudCB3aGljaCBpcyB0aGUgcm9vdCBvZiBhbmd1bGFyIGFwcGxpY2F0aW9uLlxyXG4gKiBAcGFyYW0ge0FycmF5PFN0cmluZ3xGdW5jdGlvbnxBcnJheT49fSBtb2R1bGVzIGFuIGFycmF5IG9mIG1vZHVsZXMgdG8gbG9hZCBpbnRvIHRoZSBhcHBsaWNhdGlvbi5cclxuICogICAgIEVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgc2hvdWxkIGJlIHRoZSBuYW1lIG9mIGEgcHJlZGVmaW5lZCBtb2R1bGUgb3IgYSAoREkgYW5ub3RhdGVkKVxyXG4gKiAgICAgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgYnkgdGhlIGluamVjdG9yIGFzIGEgcnVuIGJsb2NrLlxyXG4gKiAgICAgU2VlOiB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlc31cclxuICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgYW4gb2JqZWN0IGZvciBkZWZpbmluZyBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBhcHBsaWNhdGlvbi4gVGhlXHJcbiAqICAgICBmb2xsb3dpbmcga2V5cyBhcmUgc3VwcG9ydGVkOlxyXG4gKlxyXG4gKiAgICAgLSBgc3RyaWN0RGlgOiBkaXNhYmxlIGF1dG9tYXRpYyBmdW5jdGlvbiBhbm5vdGF0aW9uIGZvciB0aGUgYXBwbGljYXRpb24uIFRoaXMgaXMgbWVhbnQgdG9cclxuICogICAgICAgYXNzaXN0IGluIGZpbmRpbmcgYnVncyB3aGljaCBicmVhayBtaW5pZmllZCBjb2RlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7YXV0by4kaW5qZWN0b3J9IFJldHVybnMgdGhlIG5ld2x5IGNyZWF0ZWQgaW5qZWN0b3IgZm9yIHRoaXMgYXBwLlxyXG4gKi9cclxuZnVuY3Rpb24gYm9vdHN0cmFwKGVsZW1lbnQsIG1vZHVsZXMsIGNvbmZpZykge1xyXG4gIGlmICghaXNPYmplY3QoY29uZmlnKSkgY29uZmlnID0ge307XHJcbiAgdmFyIGRlZmF1bHRDb25maWcgPSB7XHJcbiAgICBzdHJpY3REaTogZmFsc2VcclxuICB9O1xyXG4gIGNvbmZpZyA9IGV4dGVuZChkZWZhdWx0Q29uZmlnLCBjb25maWcpO1xyXG4gIHZhciBkb0Jvb3RzdHJhcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KTtcclxuXHJcbiAgICBpZiAoZWxlbWVudC5pbmplY3RvcigpKSB7XHJcbiAgICAgIHZhciB0YWcgPSAoZWxlbWVudFswXSA9PT0gZG9jdW1lbnQpID8gJ2RvY3VtZW50JyA6IHN0YXJ0aW5nVGFnKGVsZW1lbnQpO1xyXG4gICAgICAvL0VuY29kZSBhbmdsZSBicmFja2V0cyB0byBwcmV2ZW50IGlucHV0IGZyb20gYmVpbmcgc2FuaXRpemVkIHRvIGVtcHR5IHN0cmluZyAjODY4M1xyXG4gICAgICB0aHJvdyBuZ01pbkVycihcclxuICAgICAgICAgICdidHN0cnBkJyxcclxuICAgICAgICAgIFwiQXBwIEFscmVhZHkgQm9vdHN0cmFwcGVkIHdpdGggdGhpcyBFbGVtZW50ICd7MH0nXCIsXHJcbiAgICAgICAgICB0YWcucmVwbGFjZSgvPC8sJyZsdDsnKS5yZXBsYWNlKC8+LywnJmd0OycpKTtcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGVzID0gbW9kdWxlcyB8fCBbXTtcclxuICAgIG1vZHVsZXMudW5zaGlmdChbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcclxuICAgICAgJHByb3ZpZGUudmFsdWUoJyRyb290RWxlbWVudCcsIGVsZW1lbnQpO1xyXG4gICAgfV0pO1xyXG5cclxuICAgIGlmIChjb25maWcuZGVidWdJbmZvRW5hYmxlZCkge1xyXG4gICAgICAvLyBQdXNoaW5nIHNvIHRoYXQgdGhpcyBvdmVycmlkZXMgYGRlYnVnSW5mb0VuYWJsZWRgIHNldHRpbmcgZGVmaW5lZCBpbiB1c2VyJ3MgYG1vZHVsZXNgLlxyXG4gICAgICBtb2R1bGVzLnB1c2goWyckY29tcGlsZVByb3ZpZGVyJywgZnVuY3Rpb24oJGNvbXBpbGVQcm92aWRlcikge1xyXG4gICAgICAgICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZCh0cnVlKTtcclxuICAgICAgfV0pO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZXMudW5zaGlmdCgnbmcnKTtcclxuICAgIHZhciBpbmplY3RvciA9IGNyZWF0ZUluamVjdG9yKG1vZHVsZXMsIGNvbmZpZy5zdHJpY3REaSk7XHJcbiAgICBpbmplY3Rvci5pbnZva2UoWyckcm9vdFNjb3BlJywgJyRyb290RWxlbWVudCcsICckY29tcGlsZScsICckaW5qZWN0b3InLFxyXG4gICAgICAgZnVuY3Rpb24gYm9vdHN0cmFwQXBwbHkoc2NvcGUsIGVsZW1lbnQsIGNvbXBpbGUsIGluamVjdG9yKSB7XHJcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWxlbWVudC5kYXRhKCckaW5qZWN0b3InLCBpbmplY3Rvcik7XHJcbiAgICAgICAgICBjb21waWxlKGVsZW1lbnQpKHNjb3BlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfV1cclxuICAgICk7XHJcbiAgICByZXR1cm4gaW5qZWN0b3I7XHJcbiAgfTtcclxuXHJcbiAgdmFyIE5HX0VOQUJMRV9ERUJVR19JTkZPID0gL15OR19FTkFCTEVfREVCVUdfSU5GTyEvO1xyXG4gIHZhciBOR19ERUZFUl9CT09UU1RSQVAgPSAvXk5HX0RFRkVSX0JPT1RTVFJBUCEvO1xyXG5cclxuICBpZiAod2luZG93ICYmIE5HX0VOQUJMRV9ERUJVR19JTkZPLnRlc3Qod2luZG93Lm5hbWUpKSB7XHJcbiAgICBjb25maWcuZGVidWdJbmZvRW5hYmxlZCA9IHRydWU7XHJcbiAgICB3aW5kb3cubmFtZSA9IHdpbmRvdy5uYW1lLnJlcGxhY2UoTkdfRU5BQkxFX0RFQlVHX0lORk8sICcnKTtcclxuICB9XHJcblxyXG4gIGlmICh3aW5kb3cgJiYgIU5HX0RFRkVSX0JPT1RTVFJBUC50ZXN0KHdpbmRvdy5uYW1lKSkge1xyXG4gICAgcmV0dXJuIGRvQm9vdHN0cmFwKCk7XHJcbiAgfVxyXG5cclxuICB3aW5kb3cubmFtZSA9IHdpbmRvdy5uYW1lLnJlcGxhY2UoTkdfREVGRVJfQk9PVFNUUkFQLCAnJyk7XHJcbiAgYW5ndWxhci5yZXN1bWVCb290c3RyYXAgPSBmdW5jdGlvbihleHRyYU1vZHVsZXMpIHtcclxuICAgIGZvckVhY2goZXh0cmFNb2R1bGVzLCBmdW5jdGlvbihtb2R1bGUpIHtcclxuICAgICAgbW9kdWxlcy5wdXNoKG1vZHVsZSk7XHJcbiAgICB9KTtcclxuICAgIGRvQm9vdHN0cmFwKCk7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLnJlbG9hZFdpdGhEZWJ1Z0luZm9cclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVXNlIHRoaXMgZnVuY3Rpb24gdG8gcmVsb2FkIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uIHdpdGggZGVidWcgaW5mb3JtYXRpb24gdHVybmVkIG9uLlxyXG4gKiBUaGlzIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBhIGNhbGwgdG8gYCRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZChmYWxzZSlgLlxyXG4gKlxyXG4gKiBTZWUge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGVidWdJbmZvRW5hYmxlZH0gZm9yIG1vcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWxvYWRXaXRoRGVidWdJbmZvKCkge1xyXG4gIHdpbmRvdy5uYW1lID0gJ05HX0VOQUJMRV9ERUJVR19JTkZPIScgKyB3aW5kb3cubmFtZTtcclxuICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmFtZSBhbmd1bGFyLmdldFRlc3RhYmlsaXR5XHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEdldCB0aGUgdGVzdGFiaWxpdHkgc2VydmljZSBmb3IgdGhlIGluc3RhbmNlIG9mIEFuZ3VsYXIgb24gdGhlIGdpdmVuXHJcbiAqIGVsZW1lbnQuXHJcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCBET00gZWxlbWVudCB3aGljaCBpcyB0aGUgcm9vdCBvZiBhbmd1bGFyIGFwcGxpY2F0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VGVzdGFiaWxpdHkocm9vdEVsZW1lbnQpIHtcclxuICByZXR1cm4gYW5ndWxhci5lbGVtZW50KHJvb3RFbGVtZW50KS5pbmplY3RvcigpLmdldCgnJCR0ZXN0YWJpbGl0eScpO1xyXG59XHJcblxyXG52YXIgU05BS0VfQ0FTRV9SRUdFWFAgPSAvW0EtWl0vZztcclxuZnVuY3Rpb24gc25ha2VfY2FzZShuYW1lLCBzZXBhcmF0b3IpIHtcclxuICBzZXBhcmF0b3IgPSBzZXBhcmF0b3IgfHwgJ18nO1xyXG4gIHJldHVybiBuYW1lLnJlcGxhY2UoU05BS0VfQ0FTRV9SRUdFWFAsIGZ1bmN0aW9uKGxldHRlciwgcG9zKSB7XHJcbiAgICByZXR1cm4gKHBvcyA/IHNlcGFyYXRvciA6ICcnKSArIGxldHRlci50b0xvd2VyQ2FzZSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG52YXIgYmluZEpRdWVyeUZpcmVkID0gZmFsc2U7XHJcbnZhciBza2lwRGVzdHJveU9uTmV4dEpRdWVyeUNsZWFuRGF0YTtcclxuZnVuY3Rpb24gYmluZEpRdWVyeSgpIHtcclxuICB2YXIgb3JpZ2luYWxDbGVhbkRhdGE7XHJcblxyXG4gIGlmIChiaW5kSlF1ZXJ5RmlyZWQpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIGJpbmQgdG8galF1ZXJ5IGlmIHByZXNlbnQ7XHJcbiAgalF1ZXJ5ID0gd2luZG93LmpRdWVyeTtcclxuICAvLyBVc2UgalF1ZXJ5IGlmIGl0IGV4aXN0cyB3aXRoIHByb3BlciBmdW5jdGlvbmFsaXR5LCBvdGhlcndpc2UgZGVmYXVsdCB0byB1cy5cclxuICAvLyBBbmd1bGFyIDEuMisgcmVxdWlyZXMgalF1ZXJ5IDEuNysgZm9yIG9uKCkvb2ZmKCkgc3VwcG9ydC5cclxuICAvLyBBbmd1bGFyIDEuMysgdGVjaG5pY2FsbHkgcmVxdWlyZXMgYXQgbGVhc3QgalF1ZXJ5IDIuMSsgYnV0IGl0IG1heSB3b3JrIHdpdGggb2xkZXJcclxuICAvLyB2ZXJzaW9ucy4gSXQgd2lsbCBub3Qgd29yayBmb3Igc3VyZSB3aXRoIGpRdWVyeSA8MS43LCB0aG91Z2guXHJcbiAgaWYgKGpRdWVyeSAmJiBqUXVlcnkuZm4ub24pIHtcclxuICAgIGpxTGl0ZSA9IGpRdWVyeTtcclxuICAgIGV4dGVuZChqUXVlcnkuZm4sIHtcclxuICAgICAgc2NvcGU6IEpRTGl0ZVByb3RvdHlwZS5zY29wZSxcclxuICAgICAgaXNvbGF0ZVNjb3BlOiBKUUxpdGVQcm90b3R5cGUuaXNvbGF0ZVNjb3BlLFxyXG4gICAgICBjb250cm9sbGVyOiBKUUxpdGVQcm90b3R5cGUuY29udHJvbGxlcixcclxuICAgICAgaW5qZWN0b3I6IEpRTGl0ZVByb3RvdHlwZS5pbmplY3RvcixcclxuICAgICAgaW5oZXJpdGVkRGF0YTogSlFMaXRlUHJvdG90eXBlLmluaGVyaXRlZERhdGFcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFsbCBub2RlcyByZW1vdmVkIGZyb20gdGhlIERPTSB2aWEgdmFyaW91cyBqUXVlcnkgQVBJcyBsaWtlIC5yZW1vdmUoKVxyXG4gICAgLy8gYXJlIHBhc3NlZCB0aHJvdWdoIGpRdWVyeS5jbGVhbkRhdGEuIE1vbmtleS1wYXRjaCB0aGlzIG1ldGhvZCB0byBmaXJlXHJcbiAgICAvLyB0aGUgJGRlc3Ryb3kgZXZlbnQgb24gYWxsIHJlbW92ZWQgbm9kZXMuXHJcbiAgICBvcmlnaW5hbENsZWFuRGF0YSA9IGpRdWVyeS5jbGVhbkRhdGE7XHJcbiAgICBqUXVlcnkuY2xlYW5EYXRhID0gZnVuY3Rpb24oZWxlbXMpIHtcclxuICAgICAgdmFyIGV2ZW50cztcclxuICAgICAgaWYgKCFza2lwRGVzdHJveU9uTmV4dEpRdWVyeUNsZWFuRGF0YSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBlbGVtOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKyspIHtcclxuICAgICAgICAgIGV2ZW50cyA9IGpRdWVyeS5fZGF0YShlbGVtLCBcImV2ZW50c1wiKTtcclxuICAgICAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzLiRkZXN0cm95KSB7XHJcbiAgICAgICAgICAgIGpRdWVyeShlbGVtKS50cmlnZ2VySGFuZGxlcignJGRlc3Ryb3knKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2tpcERlc3Ryb3lPbk5leHRKUXVlcnlDbGVhbkRhdGEgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBvcmlnaW5hbENsZWFuRGF0YShlbGVtcyk7XHJcbiAgICB9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICBqcUxpdGUgPSBKUUxpdGU7XHJcbiAgfVxyXG5cclxuICBhbmd1bGFyLmVsZW1lbnQgPSBqcUxpdGU7XHJcblxyXG4gIC8vIFByZXZlbnQgZG91YmxlLXByb3h5aW5nLlxyXG4gIGJpbmRKUXVlcnlGaXJlZCA9IHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiB0aHJvdyBlcnJvciBpZiB0aGUgYXJndW1lbnQgaXMgZmFsc3kuXHJcbiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRBcmcoYXJnLCBuYW1lLCByZWFzb24pIHtcclxuICBpZiAoIWFyZykge1xyXG4gICAgdGhyb3cgbmdNaW5FcnIoJ2FyZXEnLCBcIkFyZ3VtZW50ICd7MH0nIGlzIHsxfVwiLCAobmFtZSB8fCAnPycpLCAocmVhc29uIHx8IFwicmVxdWlyZWRcIikpO1xyXG4gIH1cclxuICByZXR1cm4gYXJnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhc3NlcnRBcmdGbihhcmcsIG5hbWUsIGFjY2VwdEFycmF5QW5ub3RhdGlvbikge1xyXG4gIGlmIChhY2NlcHRBcnJheUFubm90YXRpb24gJiYgaXNBcnJheShhcmcpKSB7XHJcbiAgICAgIGFyZyA9IGFyZ1thcmcubGVuZ3RoIC0gMV07XHJcbiAgfVxyXG5cclxuICBhc3NlcnRBcmcoaXNGdW5jdGlvbihhcmcpLCBuYW1lLCAnbm90IGEgZnVuY3Rpb24sIGdvdCAnICtcclxuICAgICAgKGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyA/IGFyZy5jb25zdHJ1Y3Rvci5uYW1lIHx8ICdPYmplY3QnIDogdHlwZW9mIGFyZykpO1xyXG4gIHJldHVybiBhcmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiB0aHJvdyBlcnJvciBpZiB0aGUgbmFtZSBnaXZlbiBpcyBoYXNPd25Qcm9wZXJ0eVxyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgICAgdGhlIG5hbWUgdG8gdGVzdFxyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGNvbnRleHQgdGhlIGNvbnRleHQgaW4gd2hpY2ggdGhlIG5hbWUgaXMgdXNlZCwgc3VjaCBhcyBtb2R1bGUgb3IgZGlyZWN0aXZlXHJcbiAqL1xyXG5mdW5jdGlvbiBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCBjb250ZXh0KSB7XHJcbiAgaWYgKG5hbWUgPT09ICdoYXNPd25Qcm9wZXJ0eScpIHtcclxuICAgIHRocm93IG5nTWluRXJyKCdiYWRuYW1lJywgXCJoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZVwiLCBjb250ZXh0KTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gdGhlIHZhbHVlIGFjY2Vzc2libGUgZnJvbSB0aGUgb2JqZWN0IGJ5IHBhdGguIEFueSB1bmRlZmluZWQgdHJhdmVyc2FscyBhcmUgaWdub3JlZFxyXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIHN0YXJ0aW5nIG9iamVjdFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aCBwYXRoIHRvIHRyYXZlcnNlXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JpbmRGblRvU2NvcGU9dHJ1ZV1cclxuICogQHJldHVybnMge09iamVjdH0gdmFsdWUgYXMgYWNjZXNzaWJsZSBieSBwYXRoXHJcbiAqL1xyXG4vL1RPRE8obWlza28pOiB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJlbW92ZWRcclxuZnVuY3Rpb24gZ2V0dGVyKG9iaiwgcGF0aCwgYmluZEZuVG9TY29wZSkge1xyXG4gIGlmICghcGF0aCkgcmV0dXJuIG9iajtcclxuICB2YXIga2V5cyA9IHBhdGguc3BsaXQoJy4nKTtcclxuICB2YXIga2V5O1xyXG4gIHZhciBsYXN0SW5zdGFuY2UgPSBvYmo7XHJcbiAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICBrZXkgPSBrZXlzW2ldO1xyXG4gICAgaWYgKG9iaikge1xyXG4gICAgICBvYmogPSAobGFzdEluc3RhbmNlID0gb2JqKVtrZXldO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoIWJpbmRGblRvU2NvcGUgJiYgaXNGdW5jdGlvbihvYmopKSB7XHJcbiAgICByZXR1cm4gYmluZChsYXN0SW5zdGFuY2UsIG9iaik7XHJcbiAgfVxyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gdGhlIERPTSBzaWJsaW5ncyBiZXR3ZWVuIHRoZSBmaXJzdCBhbmQgbGFzdCBub2RlIGluIHRoZSBnaXZlbiBhcnJheS5cclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgbGlrZSBvYmplY3RcclxuICogQHJldHVybnMge2pxTGl0ZX0ganFMaXRlIGNvbGxlY3Rpb24gY29udGFpbmluZyB0aGUgbm9kZXNcclxuICovXHJcbmZ1bmN0aW9uIGdldEJsb2NrTm9kZXMobm9kZXMpIHtcclxuICAvLyBUT0RPKHBlcmYpOiBqdXN0IGNoZWNrIGlmIGFsbCBpdGVtcyBpbiBgbm9kZXNgIGFyZSBzaWJsaW5ncyBhbmQgaWYgdGhleSBhcmUgcmV0dXJuIHRoZSBvcmlnaW5hbFxyXG4gIC8vICAgICAgICAgICAgIGNvbGxlY3Rpb24sIG90aGVyd2lzZSB1cGRhdGUgdGhlIG9yaWdpbmFsIGNvbGxlY3Rpb24uXHJcbiAgdmFyIG5vZGUgPSBub2Rlc1swXTtcclxuICB2YXIgZW5kTm9kZSA9IG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdO1xyXG4gIHZhciBibG9ja05vZGVzID0gW25vZGVdO1xyXG5cclxuICBkbyB7XHJcbiAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcclxuICAgIGlmICghbm9kZSkgYnJlYWs7XHJcbiAgICBibG9ja05vZGVzLnB1c2gobm9kZSk7XHJcbiAgfSB3aGlsZSAobm9kZSAhPT0gZW5kTm9kZSk7XHJcblxyXG4gIHJldHVybiBqcUxpdGUoYmxvY2tOb2Rlcyk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2l0aG91dCBhIHByb3RvdHlwZS4gVGhpcyBvYmplY3QgaXMgdXNlZnVsIGZvciBsb29rdXAgd2l0aG91dCBoYXZpbmcgdG9cclxuICogZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGljYWxseSBpbmhlcml0ZWQgcHJvcGVydGllcyB2aWEgaGFzT3duUHJvcGVydHkuXHJcbiAqXHJcbiAqIFJlbGF0ZWQgbWljcm8tYmVuY2htYXJrczpcclxuICogLSBodHRwOi8vanNwZXJmLmNvbS9vYmplY3QtY3JlYXRlMlxyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL3Byb3RvLW1hcC1sb29rdXAvMlxyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL2Zvci1pbi12cy1vYmplY3Qta2V5czJcclxuICpcclxuICogQHJldHVybnMge09iamVjdH1cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1hcCgpIHtcclxuICByZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyB0eXBlXHJcbiAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIEludGVyZmFjZSBmb3IgY29uZmlndXJpbmcgYW5ndWxhciB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlc30uXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gc2V0dXBNb2R1bGVMb2FkZXIod2luZG93KSB7XHJcblxyXG4gIHZhciAkaW5qZWN0b3JNaW5FcnIgPSBtaW5FcnIoJyRpbmplY3RvcicpO1xyXG4gIHZhciBuZ01pbkVyciA9IG1pbkVycignbmcnKTtcclxuXHJcbiAgZnVuY3Rpb24gZW5zdXJlKG9iaiwgbmFtZSwgZmFjdG9yeSkge1xyXG4gICAgcmV0dXJuIG9ialtuYW1lXSB8fCAob2JqW25hbWVdID0gZmFjdG9yeSgpKTtcclxuICB9XHJcblxyXG4gIHZhciBhbmd1bGFyID0gZW5zdXJlKHdpbmRvdywgJ2FuZ3VsYXInLCBPYmplY3QpO1xyXG5cclxuICAvLyBXZSBuZWVkIHRvIGV4cG9zZSBgYW5ndWxhci4kJG1pbkVycmAgdG8gbW9kdWxlcyBzdWNoIGFzIGBuZ1Jlc291cmNlYCB0aGF0IHJlZmVyZW5jZSBpdCBkdXJpbmcgYm9vdHN0cmFwXHJcbiAgYW5ndWxhci4kJG1pbkVyciA9IGFuZ3VsYXIuJCRtaW5FcnIgfHwgbWluRXJyO1xyXG5cclxuICByZXR1cm4gZW5zdXJlKGFuZ3VsYXIsICdtb2R1bGUnLCBmdW5jdGlvbigpIHtcclxuICAgIC8qKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsIGFuZ3VsYXIuTW9kdWxlPn0gKi9cclxuICAgIHZhciBtb2R1bGVzID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgZnVuY3Rpb25cclxuICAgICAqIEBuYW1lIGFuZ3VsYXIubW9kdWxlXHJcbiAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBUaGUgYGFuZ3VsYXIubW9kdWxlYCBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXJcclxuICAgICAqIG1vZHVsZXMuXHJcbiAgICAgKiBBbGwgbW9kdWxlcyAoYW5ndWxhciBjb3JlIG9yIDNyZCBwYXJ0eSkgdGhhdCBzaG91bGQgYmUgYXZhaWxhYmxlIHRvIGFuIGFwcGxpY2F0aW9uIG11c3QgYmVcclxuICAgICAqIHJlZ2lzdGVyZWQgdXNpbmcgdGhpcyBtZWNoYW5pc20uXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiBwYXNzZWQgdHdvIG9yIG1vcmUgYXJndW1lbnRzLCBhIG5ldyBtb2R1bGUgaXMgY3JlYXRlZC4gIElmIHBhc3NlZCBvbmx5IG9uZSBhcmd1bWVudCwgYW5cclxuICAgICAqIGV4aXN0aW5nIG1vZHVsZSAodGhlIG5hbWUgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBgbW9kdWxlYCkgaXMgcmV0cmlldmVkLlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAjIE1vZHVsZVxyXG4gICAgICpcclxuICAgICAqIEEgbW9kdWxlIGlzIGEgY29sbGVjdGlvbiBvZiBzZXJ2aWNlcywgZGlyZWN0aXZlcywgY29udHJvbGxlcnMsIGZpbHRlcnMsIGFuZCBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uLlxyXG4gICAgICogYGFuZ3VsYXIubW9kdWxlYCBpcyB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uXHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIC8vIENyZWF0ZSBhIG5ldyBtb2R1bGVcclxuICAgICAqIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdteU1vZHVsZScsIFtdKTtcclxuICAgICAqXHJcbiAgICAgKiAvLyByZWdpc3RlciBhIG5ldyBzZXJ2aWNlXHJcbiAgICAgKiBteU1vZHVsZS52YWx1ZSgnYXBwTmFtZScsICdNeUNvb2xBcHAnKTtcclxuICAgICAqXHJcbiAgICAgKiAvLyBjb25maWd1cmUgZXhpc3Rpbmcgc2VydmljZXMgaW5zaWRlIGluaXRpYWxpemF0aW9uIGJsb2Nrcy5cclxuICAgICAqIG15TW9kdWxlLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAqICAgLy8gQ29uZmlndXJlIGV4aXN0aW5nIHByb3ZpZGVyc1xyXG4gICAgICogICAkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCchJyk7XHJcbiAgICAgKiB9XSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBUaGVuIHlvdSBjYW4gY3JlYXRlIGFuIGluamVjdG9yIGFuZCBsb2FkIHlvdXIgbW9kdWxlcyBsaWtlIHRoaXM6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIHZhciBpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoWyduZycsICdteU1vZHVsZSddKVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogSG93ZXZlciBpdCdzIG1vcmUgbGlrZWx5IHRoYXQgeW91J2xsIGp1c3QgdXNlXHJcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQXBwIG5nQXBwfSBvclxyXG4gICAgICoge0BsaW5rIGFuZ3VsYXIuYm9vdHN0cmFwfSB0byBzaW1wbGlmeSB0aGlzIHByb2Nlc3MgZm9yIHlvdS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyFzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIG1vZHVsZSB0byBjcmVhdGUgb3IgcmV0cmlldmUuXHJcbiAgICAgKiBAcGFyYW0geyFBcnJheS48c3RyaW5nPj19IHJlcXVpcmVzIElmIHNwZWNpZmllZCB0aGVuIG5ldyBtb2R1bGUgaXMgYmVpbmcgY3JlYXRlZC4gSWZcclxuICAgICAqICAgICAgICB1bnNwZWNpZmllZCB0aGVuIHRoZSBtb2R1bGUgaXMgYmVpbmcgcmV0cmlldmVkIGZvciBmdXJ0aGVyIGNvbmZpZ3VyYXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gY29uZmlnRm4gT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmdW5jdGlvbiBmb3IgdGhlIG1vZHVsZS4gU2FtZSBhc1xyXG4gICAgICogICAgICAgIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWcgTW9kdWxlI2NvbmZpZygpfS5cclxuICAgICAqIEByZXR1cm5zIHttb2R1bGV9IG5ldyBtb2R1bGUgd2l0aCB0aGUge0BsaW5rIGFuZ3VsYXIuTW9kdWxlfSBhcGkuXHJcbiAgICAgKi9cclxuICAgIHJldHVybiBmdW5jdGlvbiBtb2R1bGUobmFtZSwgcmVxdWlyZXMsIGNvbmZpZ0ZuKSB7XHJcbiAgICAgIHZhciBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uKG5hbWUsIGNvbnRleHQpIHtcclxuICAgICAgICBpZiAobmFtZSA9PT0gJ2hhc093blByb3BlcnR5Jykge1xyXG4gICAgICAgICAgdGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCAnaGFzT3duUHJvcGVydHkgaXMgbm90IGEgdmFsaWQgezB9IG5hbWUnLCBjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnbW9kdWxlJyk7XHJcbiAgICAgIGlmIChyZXF1aXJlcyAmJiBtb2R1bGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgbW9kdWxlc1tuYW1lXSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGVuc3VyZShtb2R1bGVzLCBuYW1lLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIXJlcXVpcmVzKSB7XHJcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ25vbW9kJywgXCJNb2R1bGUgJ3swfScgaXMgbm90IGF2YWlsYWJsZSEgWW91IGVpdGhlciBtaXNzcGVsbGVkIFwiICtcclxuICAgICAgICAgICAgIFwidGhlIG1vZHVsZSBuYW1lIG9yIGZvcmdvdCB0byBsb2FkIGl0LiBJZiByZWdpc3RlcmluZyBhIG1vZHVsZSBlbnN1cmUgdGhhdCB5b3UgXCIgK1xyXG4gICAgICAgICAgICAgXCJzcGVjaWZ5IHRoZSBkZXBlbmRlbmNpZXMgYXMgdGhlIHNlY29uZCBhcmd1bWVudC5cIiwgbmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogQHR5cGUgeyFBcnJheS48QXJyYXkuPCo+Pn0gKi9cclxuICAgICAgICB2YXIgaW52b2tlUXVldWUgPSBbXTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXkuPEZ1bmN0aW9uPn0gKi9cclxuICAgICAgICB2YXIgY29uZmlnQmxvY2tzID0gW107XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5LjxGdW5jdGlvbj59ICovXHJcbiAgICAgICAgdmFyIHJ1bkJsb2NrcyA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgY29uZmlnID0gaW52b2tlTGF0ZXIoJyRpbmplY3RvcicsICdpbnZva2UnLCAncHVzaCcsIGNvbmZpZ0Jsb2Nrcyk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7YW5ndWxhci5Nb2R1bGV9ICovXHJcbiAgICAgICAgdmFyIG1vZHVsZUluc3RhbmNlID0ge1xyXG4gICAgICAgICAgLy8gUHJpdmF0ZSBzdGF0ZVxyXG4gICAgICAgICAgX2ludm9rZVF1ZXVlOiBpbnZva2VRdWV1ZSxcclxuICAgICAgICAgIF9jb25maWdCbG9ja3M6IGNvbmZpZ0Jsb2NrcyxcclxuICAgICAgICAgIF9ydW5CbG9ja3M6IHJ1bkJsb2NrcyxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjcmVxdWlyZXNcclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIEhvbGRzIHRoZSBsaXN0IG9mIG1vZHVsZXMgd2hpY2ggdGhlIGluamVjdG9yIHdpbGwgbG9hZCBiZWZvcmUgdGhlIGN1cnJlbnQgbW9kdWxlIGlzXHJcbiAgICAgICAgICAgKiBsb2FkZWQuXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIHJlcXVpcmVzOiByZXF1aXJlcyxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjbmFtZVxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogTmFtZSBvZiB0aGUgbW9kdWxlLlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBuYW1lOiBuYW1lLFxyXG5cclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3Byb3ZpZGVyXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3ZpZGVyVHlwZSBDb25zdHJ1Y3Rpb24gZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiB0aGVcclxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIHByb3ZpZGVyOiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAncHJvdmlkZXInKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2ZhY3RvcnlcclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdmlkZXJGdW5jdGlvbiBGdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIHRoZSBzZXJ2aWNlLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjZmFjdG9yeSAkcHJvdmlkZS5mYWN0b3J5KCl9LlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBmYWN0b3J5OiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAnZmFjdG9yeScpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjc2VydmljZVxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBBIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnN0YW50aWF0ZWQuXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIHNlcnZpY2U6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICdzZXJ2aWNlJyksXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSN2YWx1ZVxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXHJcbiAgICAgICAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBTZXJ2aWNlIGluc3RhbmNlIG9iamVjdC5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlICRwcm92aWRlLnZhbHVlKCl9LlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICB2YWx1ZTogaW52b2tlTGF0ZXIoJyRwcm92aWRlJywgJ3ZhbHVlJyksXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNjb25zdGFudFxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgY29uc3RhbnQgbmFtZVxyXG4gICAgICAgICAgICogQHBhcmFtIHsqfSBvYmplY3QgQ29uc3RhbnQgdmFsdWUuXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIEJlY2F1c2UgdGhlIGNvbnN0YW50IGFyZSBmaXhlZCwgdGhleSBnZXQgYXBwbGllZCBiZWZvcmUgb3RoZXIgcHJvdmlkZSBtZXRob2RzLlxyXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI2NvbnN0YW50ICRwcm92aWRlLmNvbnN0YW50KCl9LlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBjb25zdGFudDogaW52b2tlTGF0ZXIoJyRwcm92aWRlJywgJ2NvbnN0YW50JywgJ3Vuc2hpZnQnKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2FuaW1hdGlvblxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgYW5pbWF0aW9uIG5hbWVcclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFuaW1hdGlvbkZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIGFuXHJcbiAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqICoqTk9URSoqOiBhbmltYXRpb25zIHRha2UgZWZmZWN0IG9ubHkgaWYgdGhlICoqbmdBbmltYXRlKiogbW9kdWxlIGlzIGxvYWRlZC5cclxuICAgICAgICAgICAqXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogRGVmaW5lcyBhbiBhbmltYXRpb24gaG9vayB0aGF0IGNhbiBiZSBsYXRlciB1c2VkIHdpdGhcclxuICAgICAgICAgICAqIHtAbGluayBuZ0FuaW1hdGUuJGFuaW1hdGUgJGFuaW1hdGV9IHNlcnZpY2UgYW5kIGRpcmVjdGl2ZXMgdGhhdCB1c2UgdGhpcyBzZXJ2aWNlLlxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICAgKiBtb2R1bGUuYW5pbWF0aW9uKCcuYW5pbWF0aW9uLW5hbWUnLCBmdW5jdGlvbigkaW5qZWN0MSwgJGluamVjdDIpIHtcclxuICAgICAgICAgICAqICAgcmV0dXJuIHtcclxuICAgICAgICAgICAqICAgICBldmVudE5hbWUgOiBmdW5jdGlvbihlbGVtZW50LCBkb25lKSB7XHJcbiAgICAgICAgICAgKiAgICAgICAvL2NvZGUgdG8gcnVuIHRoZSBhbmltYXRpb25cclxuICAgICAgICAgICAqICAgICAgIC8vb25jZSBjb21wbGV0ZSwgdGhlbiBydW4gZG9uZSgpXHJcbiAgICAgICAgICAgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gY2FuY2VsbGF0aW9uRnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICogICAgICAgICAvL2NvZGUgdG8gY2FuY2VsIHRoZSBhbmltYXRpb25cclxuICAgICAgICAgICAqICAgICAgIH1cclxuICAgICAgICAgICAqICAgICB9XHJcbiAgICAgICAgICAgKiAgIH1cclxuICAgICAgICAgICAqIH0pXHJcbiAgICAgICAgICAgKiBgYGBcclxuICAgICAgICAgICAqXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nQW5pbWF0ZS4kYW5pbWF0ZVByb3ZpZGVyI3JlZ2lzdGVyICRhbmltYXRlUHJvdmlkZXIucmVnaXN0ZXIoKX0gYW5kXHJcbiAgICAgICAgICAgKiB7QGxpbmsgbmdBbmltYXRlIG5nQW5pbWF0ZSBtb2R1bGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBhbmltYXRpb246IGludm9rZUxhdGVyKCckYW5pbWF0ZVByb3ZpZGVyJywgJ3JlZ2lzdGVyJyksXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNmaWx0ZXJcclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEZpbHRlciBuYW1lLlxyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmlsdGVyRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2YgZmlsdGVyLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRmaWx0ZXJQcm92aWRlciNyZWdpc3RlciAkZmlsdGVyUHJvdmlkZXIucmVnaXN0ZXIoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIGZpbHRlcjogaW52b2tlTGF0ZXIoJyRmaWx0ZXJQcm92aWRlcicsICdyZWdpc3RlcicpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29udHJvbGxlclxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIENvbnRyb2xsZXIgbmFtZSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBjb250cm9sbGVycyB3aGVyZSB0aGVcclxuICAgICAgICAgICAqICAgIGtleXMgYXJlIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbnN0cnVjdG9ycy5cclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbnN0cnVjdG9yIENvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb24uXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbnRyb2xsZXJQcm92aWRlciNyZWdpc3RlciAkY29udHJvbGxlclByb3ZpZGVyLnJlZ2lzdGVyKCl9LlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBjb250cm9sbGVyOiBpbnZva2VMYXRlcignJGNvbnRyb2xsZXJQcm92aWRlcicsICdyZWdpc3RlcicpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjZGlyZWN0aXZlXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgRGlyZWN0aXZlIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgZGlyZWN0aXZlcyB3aGVyZSB0aGVcclxuICAgICAgICAgICAqICAgIGtleXMgYXJlIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGZhY3Rvcmllcy5cclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGRpcmVjdGl2ZUZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mXHJcbiAgICAgICAgICAgKiBkaXJlY3RpdmVzLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlICRjb21waWxlUHJvdmlkZXIuZGlyZWN0aXZlKCl9LlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBkaXJlY3RpdmU6IGludm9rZUxhdGVyKCckY29tcGlsZVByb3ZpZGVyJywgJ2RpcmVjdGl2ZScpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29uZmlnXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25maWdGbiBFeGVjdXRlIHRoaXMgZnVuY3Rpb24gb24gbW9kdWxlIGxvYWQuIFVzZWZ1bCBmb3Igc2VydmljZVxyXG4gICAgICAgICAgICogICAgY29uZmlndXJhdGlvbi5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHJlZ2lzdGVyIHdvcmsgd2hpY2ggbmVlZHMgdG8gYmUgcGVyZm9ybWVkIG9uIG1vZHVsZSBsb2FkaW5nLlxyXG4gICAgICAgICAgICogRm9yIG1vcmUgYWJvdXQgaG93IHRvIGNvbmZpZ3VyZSBzZXJ2aWNlcywgc2VlXHJcbiAgICAgICAgICAgKiB7QGxpbmsgcHJvdmlkZXJzI3Byb3ZpZGVyc19wcm92aWRlci1yZWNpcGUgUHJvdmlkZXIgUmVjaXBlfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNydW5cclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluaXRpYWxpemF0aW9uRm4gRXhlY3V0ZSB0aGlzIGZ1bmN0aW9uIGFmdGVyIGluamVjdG9yIGNyZWF0aW9uLlxyXG4gICAgICAgICAgICogICAgVXNlZnVsIGZvciBhcHBsaWNhdGlvbiBpbml0aWFsaXphdGlvbi5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHJlZ2lzdGVyIHdvcmsgd2hpY2ggc2hvdWxkIGJlIHBlcmZvcm1lZCB3aGVuIHRoZSBpbmplY3RvciBpcyBkb25lXHJcbiAgICAgICAgICAgKiBsb2FkaW5nIGFsbCBtb2R1bGVzLlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBydW46IGZ1bmN0aW9uKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIHJ1bkJsb2Nrcy5wdXNoKGJsb2NrKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGNvbmZpZ0ZuKSB7XHJcbiAgICAgICAgICBjb25maWcoY29uZmlnRm4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICBtb2R1bGVJbnN0YW5jZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nPX0gaW5zZXJ0TWV0aG9kXHJcbiAgICAgICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGludm9rZUxhdGVyKHByb3ZpZGVyLCBtZXRob2QsIGluc2VydE1ldGhvZCwgcXVldWUpIHtcclxuICAgICAgICAgIGlmICghcXVldWUpIHF1ZXVlID0gaW52b2tlUXVldWU7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlW2luc2VydE1ldGhvZCB8fCAncHVzaCddKFtwcm92aWRlciwgbWV0aG9kLCBhcmd1bWVudHNdKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZUluc3RhbmNlO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9KTtcclxuXHJcbn1cclxuXHJcbi8qIGdsb2JhbCBhbmd1bGFyTW9kdWxlOiB0cnVlLFxyXG4gIHZlcnNpb246IHRydWUsXHJcblxyXG4gICRMb2NhbGVQcm92aWRlcixcclxuICAkQ29tcGlsZVByb3ZpZGVyLFxyXG5cclxuICBodG1sQW5jaG9yRGlyZWN0aXZlLFxyXG4gIGlucHV0RGlyZWN0aXZlLFxyXG4gIGlucHV0RGlyZWN0aXZlLFxyXG4gIGZvcm1EaXJlY3RpdmUsXHJcbiAgc2NyaXB0RGlyZWN0aXZlLFxyXG4gIHNlbGVjdERpcmVjdGl2ZSxcclxuICBzdHlsZURpcmVjdGl2ZSxcclxuICBvcHRpb25EaXJlY3RpdmUsXHJcbiAgbmdCaW5kRGlyZWN0aXZlLFxyXG4gIG5nQmluZEh0bWxEaXJlY3RpdmUsXHJcbiAgbmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUsXHJcbiAgbmdDbGFzc0RpcmVjdGl2ZSxcclxuICBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxcclxuICBuZ0NsYXNzT2RkRGlyZWN0aXZlLFxyXG4gIG5nQ3NwRGlyZWN0aXZlLFxyXG4gIG5nQ2xvYWtEaXJlY3RpdmUsXHJcbiAgbmdDb250cm9sbGVyRGlyZWN0aXZlLFxyXG4gIG5nRm9ybURpcmVjdGl2ZSxcclxuICBuZ0hpZGVEaXJlY3RpdmUsXHJcbiAgbmdJZkRpcmVjdGl2ZSxcclxuICBuZ0luY2x1ZGVEaXJlY3RpdmUsXHJcbiAgbmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmUsXHJcbiAgbmdJbml0RGlyZWN0aXZlLFxyXG4gIG5nTm9uQmluZGFibGVEaXJlY3RpdmUsXHJcbiAgbmdQbHVyYWxpemVEaXJlY3RpdmUsXHJcbiAgbmdSZXBlYXREaXJlY3RpdmUsXHJcbiAgbmdTaG93RGlyZWN0aXZlLFxyXG4gIG5nU3R5bGVEaXJlY3RpdmUsXHJcbiAgbmdTd2l0Y2hEaXJlY3RpdmUsXHJcbiAgbmdTd2l0Y2hXaGVuRGlyZWN0aXZlLFxyXG4gIG5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxcclxuICBuZ09wdGlvbnNEaXJlY3RpdmUsXHJcbiAgbmdUcmFuc2NsdWRlRGlyZWN0aXZlLFxyXG4gIG5nTW9kZWxEaXJlY3RpdmUsXHJcbiAgbmdMaXN0RGlyZWN0aXZlLFxyXG4gIG5nQ2hhbmdlRGlyZWN0aXZlLFxyXG4gIHBhdHRlcm5EaXJlY3RpdmUsXHJcbiAgcGF0dGVybkRpcmVjdGl2ZSxcclxuICByZXF1aXJlZERpcmVjdGl2ZSxcclxuICByZXF1aXJlZERpcmVjdGl2ZSxcclxuICBtaW5sZW5ndGhEaXJlY3RpdmUsXHJcbiAgbWlubGVuZ3RoRGlyZWN0aXZlLFxyXG4gIG1heGxlbmd0aERpcmVjdGl2ZSxcclxuICBtYXhsZW5ndGhEaXJlY3RpdmUsXHJcbiAgbmdWYWx1ZURpcmVjdGl2ZSxcclxuICBuZ01vZGVsT3B0aW9uc0RpcmVjdGl2ZSxcclxuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyxcclxuICBuZ0V2ZW50RGlyZWN0aXZlcyxcclxuXHJcbiAgJEFuY2hvclNjcm9sbFByb3ZpZGVyLFxyXG4gICRBbmltYXRlUHJvdmlkZXIsXHJcbiAgJEJyb3dzZXJQcm92aWRlcixcclxuICAkQ2FjaGVGYWN0b3J5UHJvdmlkZXIsXHJcbiAgJENvbnRyb2xsZXJQcm92aWRlcixcclxuICAkRG9jdW1lbnRQcm92aWRlcixcclxuICAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyLFxyXG4gICRGaWx0ZXJQcm92aWRlcixcclxuICAkSW50ZXJwb2xhdGVQcm92aWRlcixcclxuICAkSW50ZXJ2YWxQcm92aWRlcixcclxuICAkSHR0cFByb3ZpZGVyLFxyXG4gICRIdHRwQmFja2VuZFByb3ZpZGVyLFxyXG4gICRMb2NhdGlvblByb3ZpZGVyLFxyXG4gICRMb2dQcm92aWRlcixcclxuICAkUGFyc2VQcm92aWRlcixcclxuICAkUm9vdFNjb3BlUHJvdmlkZXIsXHJcbiAgJFFQcm92aWRlcixcclxuICAkJFFQcm92aWRlcixcclxuICAkJFNhbml0aXplVXJpUHJvdmlkZXIsXHJcbiAgJFNjZVByb3ZpZGVyLFxyXG4gICRTY2VEZWxlZ2F0ZVByb3ZpZGVyLFxyXG4gICRTbmlmZmVyUHJvdmlkZXIsXHJcbiAgJFRlbXBsYXRlQ2FjaGVQcm92aWRlcixcclxuICAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIsXHJcbiAgJCRUZXN0YWJpbGl0eVByb3ZpZGVyLFxyXG4gICRUaW1lb3V0UHJvdmlkZXIsXHJcbiAgJCRSQUZQcm92aWRlcixcclxuICAkJEFzeW5jQ2FsbGJhY2tQcm92aWRlcixcclxuICAkV2luZG93UHJvdmlkZXJcclxuKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIG9iamVjdFxyXG4gKiBAbmFtZSBhbmd1bGFyLnZlcnNpb25cclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgQW5ndWxhckpTIHZlcnNpb24uIFRoaXMgb2JqZWN0IGhhcyB0aGVcclxuICogZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAqXHJcbiAqIC0gYGZ1bGxgIOKAkyBge3N0cmluZ31gIOKAkyBGdWxsIHZlcnNpb24gc3RyaW5nLCBzdWNoIGFzIFwiMC45LjE4XCIuXHJcbiAqIC0gYG1ham9yYCDigJMgYHtudW1iZXJ9YCDigJMgTWFqb3IgdmVyc2lvbiBudW1iZXIsIHN1Y2ggYXMgXCIwXCIuXHJcbiAqIC0gYG1pbm9yYCDigJMgYHtudW1iZXJ9YCDigJMgTWlub3IgdmVyc2lvbiBudW1iZXIsIHN1Y2ggYXMgXCI5XCIuXHJcbiAqIC0gYGRvdGAg4oCTIGB7bnVtYmVyfWAg4oCTIERvdCB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjE4XCIuXHJcbiAqIC0gYGNvZGVOYW1lYCDigJMgYHtzdHJpbmd9YCDigJMgQ29kZSBuYW1lIG9mIHRoZSByZWxlYXNlLCBzdWNoIGFzIFwiamlnZ2xpbmctYXJtZmF0XCIuXHJcbiAqL1xyXG52YXIgdmVyc2lvbiA9IHtcclxuICBmdWxsOiAnMS4zLjAtcmMuMicsICAgIC8vIGFsbCBvZiB0aGVzZSBwbGFjZWhvbGRlciBzdHJpbmdzIHdpbGwgYmUgcmVwbGFjZWQgYnkgZ3J1bnQnc1xyXG4gIG1ham9yOiAxLCAgICAvLyBwYWNrYWdlIHRhc2tcclxuICBtaW5vcjogMyxcclxuICBkb3Q6IDAsXHJcbiAgY29kZU5hbWU6ICd0YWN0aWxlLXBlcmNlcHRpb24nXHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gcHVibGlzaEV4dGVybmFsQVBJKGFuZ3VsYXIpe1xyXG4gIGV4dGVuZChhbmd1bGFyLCB7XHJcbiAgICAnYm9vdHN0cmFwJzogYm9vdHN0cmFwLFxyXG4gICAgJ2NvcHknOiBjb3B5LFxyXG4gICAgJ2V4dGVuZCc6IGV4dGVuZCxcclxuICAgICdlcXVhbHMnOiBlcXVhbHMsXHJcbiAgICAnZWxlbWVudCc6IGpxTGl0ZSxcclxuICAgICdmb3JFYWNoJzogZm9yRWFjaCxcclxuICAgICdpbmplY3Rvcic6IGNyZWF0ZUluamVjdG9yLFxyXG4gICAgJ25vb3AnOiBub29wLFxyXG4gICAgJ2JpbmQnOiBiaW5kLFxyXG4gICAgJ3RvSnNvbic6IHRvSnNvbixcclxuICAgICdmcm9tSnNvbic6IGZyb21Kc29uLFxyXG4gICAgJ2lkZW50aXR5JzogaWRlbnRpdHksXHJcbiAgICAnaXNVbmRlZmluZWQnOiBpc1VuZGVmaW5lZCxcclxuICAgICdpc0RlZmluZWQnOiBpc0RlZmluZWQsXHJcbiAgICAnaXNTdHJpbmcnOiBpc1N0cmluZyxcclxuICAgICdpc0Z1bmN0aW9uJzogaXNGdW5jdGlvbixcclxuICAgICdpc09iamVjdCc6IGlzT2JqZWN0LFxyXG4gICAgJ2lzTnVtYmVyJzogaXNOdW1iZXIsXHJcbiAgICAnaXNFbGVtZW50JzogaXNFbGVtZW50LFxyXG4gICAgJ2lzQXJyYXknOiBpc0FycmF5LFxyXG4gICAgJ3ZlcnNpb24nOiB2ZXJzaW9uLFxyXG4gICAgJ2lzRGF0ZSc6IGlzRGF0ZSxcclxuICAgICdsb3dlcmNhc2UnOiBsb3dlcmNhc2UsXHJcbiAgICAndXBwZXJjYXNlJzogdXBwZXJjYXNlLFxyXG4gICAgJ2NhbGxiYWNrcyc6IHtjb3VudGVyOiAwfSxcclxuICAgICdnZXRUZXN0YWJpbGl0eSc6IGdldFRlc3RhYmlsaXR5LFxyXG4gICAgJyQkbWluRXJyJzogbWluRXJyLFxyXG4gICAgJyQkY3NwJzogY3NwLFxyXG4gICAgJ3JlbG9hZFdpdGhEZWJ1Z0luZm8nOiByZWxvYWRXaXRoRGVidWdJbmZvLFxyXG4gICAgJyQkaGFzQ2xhc3MnOiBqcUxpdGVIYXNDbGFzc1xyXG4gIH0pO1xyXG5cclxuICBhbmd1bGFyTW9kdWxlID0gc2V0dXBNb2R1bGVMb2FkZXIod2luZG93KTtcclxuICB0cnkge1xyXG4gICAgYW5ndWxhck1vZHVsZSgnbmdMb2NhbGUnKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBhbmd1bGFyTW9kdWxlKCduZ0xvY2FsZScsIFtdKS5wcm92aWRlcignJGxvY2FsZScsICRMb2NhbGVQcm92aWRlcik7XHJcbiAgfVxyXG5cclxuICBhbmd1bGFyTW9kdWxlKCduZycsIFsnbmdMb2NhbGUnXSwgWyckcHJvdmlkZScsXHJcbiAgICBmdW5jdGlvbiBuZ01vZHVsZSgkcHJvdmlkZSkge1xyXG4gICAgICAvLyAkJHNhbml0aXplVXJpUHJvdmlkZXIgbmVlZHMgdG8gYmUgYmVmb3JlICRjb21waWxlUHJvdmlkZXIgYXMgaXQgaXMgdXNlZCBieSBpdC5cclxuICAgICAgJHByb3ZpZGUucHJvdmlkZXIoe1xyXG4gICAgICAgICQkc2FuaXRpemVVcmk6ICQkU2FuaXRpemVVcmlQcm92aWRlclxyXG4gICAgICB9KTtcclxuICAgICAgJHByb3ZpZGUucHJvdmlkZXIoJyRjb21waWxlJywgJENvbXBpbGVQcm92aWRlcikuXHJcbiAgICAgICAgZGlyZWN0aXZlKHtcclxuICAgICAgICAgICAgYTogaHRtbEFuY2hvckRpcmVjdGl2ZSxcclxuICAgICAgICAgICAgaW5wdXQ6IGlucHV0RGlyZWN0aXZlLFxyXG4gICAgICAgICAgICB0ZXh0YXJlYTogaW5wdXREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIGZvcm06IGZvcm1EaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIHNjcmlwdDogc2NyaXB0RGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBzZWxlY3Q6IHNlbGVjdERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgc3R5bGU6IHN0eWxlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBvcHRpb246IG9wdGlvbkRpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdCaW5kOiBuZ0JpbmREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQmluZEh0bWw6IG5nQmluZEh0bWxEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQmluZFRlbXBsYXRlOiBuZ0JpbmRUZW1wbGF0ZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdDbGFzczogbmdDbGFzc0RpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdDbGFzc0V2ZW46IG5nQ2xhc3NFdmVuRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0NsYXNzT2RkOiBuZ0NsYXNzT2RkRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0Nsb2FrOiBuZ0Nsb2FrRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0NvbnRyb2xsZXI6IG5nQ29udHJvbGxlckRpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdGb3JtOiBuZ0Zvcm1EaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nSGlkZTogbmdIaWRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0lmOiBuZ0lmRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0luY2x1ZGU6IG5nSW5jbHVkZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdJbml0OiBuZ0luaXREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nTm9uQmluZGFibGU6IG5nTm9uQmluZGFibGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nUGx1cmFsaXplOiBuZ1BsdXJhbGl6ZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdSZXBlYXQ6IG5nUmVwZWF0RGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1Nob3c6IG5nU2hvd0RpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdTdHlsZTogbmdTdHlsZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdTd2l0Y2g6IG5nU3dpdGNoRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1N3aXRjaFdoZW46IG5nU3dpdGNoV2hlbkRpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdTd2l0Y2hEZWZhdWx0OiBuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nT3B0aW9uczogbmdPcHRpb25zRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1RyYW5zY2x1ZGU6IG5nVHJhbnNjbHVkZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdNb2RlbDogbmdNb2RlbERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdMaXN0OiBuZ0xpc3REaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQ2hhbmdlOiBuZ0NoYW5nZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgcGF0dGVybjogcGF0dGVybkRpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdQYXR0ZXJuOiBwYXR0ZXJuRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nUmVxdWlyZWQ6IHJlcXVpcmVkRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBtaW5sZW5ndGg6IG1pbmxlbmd0aERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdNaW5sZW5ndGg6IG1pbmxlbmd0aERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbWF4bGVuZ3RoOiBtYXhsZW5ndGhEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nTWF4bGVuZ3RoOiBtYXhsZW5ndGhEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nVmFsdWU6IG5nVmFsdWVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nTW9kZWxPcHRpb25zOiBuZ01vZGVsT3B0aW9uc0RpcmVjdGl2ZVxyXG4gICAgICAgIH0pLlxyXG4gICAgICAgIGRpcmVjdGl2ZSh7XHJcbiAgICAgICAgICBuZ0luY2x1ZGU6IG5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgZGlyZWN0aXZlKG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzKS5cclxuICAgICAgICBkaXJlY3RpdmUobmdFdmVudERpcmVjdGl2ZXMpO1xyXG4gICAgICAkcHJvdmlkZS5wcm92aWRlcih7XHJcbiAgICAgICAgJGFuY2hvclNjcm9sbDogJEFuY2hvclNjcm9sbFByb3ZpZGVyLFxyXG4gICAgICAgICRhbmltYXRlOiAkQW5pbWF0ZVByb3ZpZGVyLFxyXG4gICAgICAgICRicm93c2VyOiAkQnJvd3NlclByb3ZpZGVyLFxyXG4gICAgICAgICRjYWNoZUZhY3Rvcnk6ICRDYWNoZUZhY3RvcnlQcm92aWRlcixcclxuICAgICAgICAkY29udHJvbGxlcjogJENvbnRyb2xsZXJQcm92aWRlcixcclxuICAgICAgICAkZG9jdW1lbnQ6ICREb2N1bWVudFByb3ZpZGVyLFxyXG4gICAgICAgICRleGNlcHRpb25IYW5kbGVyOiAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyLFxyXG4gICAgICAgICRmaWx0ZXI6ICRGaWx0ZXJQcm92aWRlcixcclxuICAgICAgICAkaW50ZXJwb2xhdGU6ICRJbnRlcnBvbGF0ZVByb3ZpZGVyLFxyXG4gICAgICAgICRpbnRlcnZhbDogJEludGVydmFsUHJvdmlkZXIsXHJcbiAgICAgICAgJGh0dHA6ICRIdHRwUHJvdmlkZXIsXHJcbiAgICAgICAgJGh0dHBCYWNrZW5kOiAkSHR0cEJhY2tlbmRQcm92aWRlcixcclxuICAgICAgICAkbG9jYXRpb246ICRMb2NhdGlvblByb3ZpZGVyLFxyXG4gICAgICAgICRsb2c6ICRMb2dQcm92aWRlcixcclxuICAgICAgICAkcGFyc2U6ICRQYXJzZVByb3ZpZGVyLFxyXG4gICAgICAgICRyb290U2NvcGU6ICRSb290U2NvcGVQcm92aWRlcixcclxuICAgICAgICAkcTogJFFQcm92aWRlcixcclxuICAgICAgICAkJHE6ICQkUVByb3ZpZGVyLFxyXG4gICAgICAgICRzY2U6ICRTY2VQcm92aWRlcixcclxuICAgICAgICAkc2NlRGVsZWdhdGU6ICRTY2VEZWxlZ2F0ZVByb3ZpZGVyLFxyXG4gICAgICAgICRzbmlmZmVyOiAkU25pZmZlclByb3ZpZGVyLFxyXG4gICAgICAgICR0ZW1wbGF0ZUNhY2hlOiAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyLFxyXG4gICAgICAgICR0ZW1wbGF0ZVJlcXVlc3Q6ICRUZW1wbGF0ZVJlcXVlc3RQcm92aWRlcixcclxuICAgICAgICAkJHRlc3RhYmlsaXR5OiAkJFRlc3RhYmlsaXR5UHJvdmlkZXIsXHJcbiAgICAgICAgJHRpbWVvdXQ6ICRUaW1lb3V0UHJvdmlkZXIsXHJcbiAgICAgICAgJHdpbmRvdzogJFdpbmRvd1Byb3ZpZGVyLFxyXG4gICAgICAgICQkckFGOiAkJFJBRlByb3ZpZGVyLFxyXG4gICAgICAgICQkYXN5bmNDYWxsYmFjayA6ICQkQXN5bmNDYWxsYmFja1Byb3ZpZGVyXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIF0pO1xyXG59XHJcblxyXG4vKiBnbG9iYWwgSlFMaXRlUHJvdG90eXBlOiB0cnVlLFxyXG4gIGFkZEV2ZW50TGlzdGVuZXJGbjogdHJ1ZSxcclxuICByZW1vdmVFdmVudExpc3RlbmVyRm46IHRydWUsXHJcbiAgQk9PTEVBTl9BVFRSOiB0cnVlLFxyXG4gIEFMSUFTRURfQVRUUjogdHJ1ZSxcclxuKi9cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy9KUUxpdGVcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmVsZW1lbnRcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogV3JhcHMgYSByYXcgRE9NIGVsZW1lbnQgb3IgSFRNTCBzdHJpbmcgYXMgYSBbalF1ZXJ5XShodHRwOi8vanF1ZXJ5LmNvbSkgZWxlbWVudC5cclxuICpcclxuICogSWYgalF1ZXJ5IGlzIGF2YWlsYWJsZSwgYGFuZ3VsYXIuZWxlbWVudGAgaXMgYW4gYWxpYXMgZm9yIHRoZVxyXG4gKiBbalF1ZXJ5XShodHRwOi8vYXBpLmpxdWVyeS5jb20valF1ZXJ5LykgZnVuY3Rpb24uIElmIGpRdWVyeSBpcyBub3QgYXZhaWxhYmxlLCBgYW5ndWxhci5lbGVtZW50YFxyXG4gKiBkZWxlZ2F0ZXMgdG8gQW5ndWxhcidzIGJ1aWx0LWluIHN1YnNldCBvZiBqUXVlcnksIGNhbGxlZCBcImpRdWVyeSBsaXRlXCIgb3IgXCJqcUxpdGUuXCJcclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5qcUxpdGUgaXMgYSB0aW55LCBBUEktY29tcGF0aWJsZSBzdWJzZXQgb2YgalF1ZXJ5IHRoYXQgYWxsb3dzXHJcbiAqIEFuZ3VsYXIgdG8gbWFuaXB1bGF0ZSB0aGUgRE9NIGluIGEgY3Jvc3MtYnJvd3NlciBjb21wYXRpYmxlIHdheS4gKipqcUxpdGUqKiBpbXBsZW1lbnRzIG9ubHkgdGhlIG1vc3RcclxuICogY29tbW9ubHkgbmVlZGVkIGZ1bmN0aW9uYWxpdHkgd2l0aCB0aGUgZ29hbCBvZiBoYXZpbmcgYSB2ZXJ5IHNtYWxsIGZvb3RwcmludC48L2Rpdj5cclxuICpcclxuICogVG8gdXNlIGpRdWVyeSwgc2ltcGx5IGxvYWQgaXQgYmVmb3JlIGBET01Db250ZW50TG9hZGVkYCBldmVudCBmaXJlZC5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0XCI+KipOb3RlOioqIGFsbCBlbGVtZW50IHJlZmVyZW5jZXMgaW4gQW5ndWxhciBhcmUgYWx3YXlzIHdyYXBwZWQgd2l0aCBqUXVlcnkgb3JcclxuICoganFMaXRlOyB0aGV5IGFyZSBuZXZlciByYXcgRE9NIHJlZmVyZW5jZXMuPC9kaXY+XHJcbiAqXHJcbiAqICMjIEFuZ3VsYXIncyBqcUxpdGVcclxuICoganFMaXRlIHByb3ZpZGVzIG9ubHkgdGhlIGZvbGxvd2luZyBqUXVlcnkgbWV0aG9kczpcclxuICpcclxuICogLSBbYGFkZENsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYWRkQ2xhc3MvKVxyXG4gKiAtIFtgYWZ0ZXIoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9hZnRlci8pXHJcbiAqIC0gW2BhcHBlbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9hcHBlbmQvKVxyXG4gKiAtIFtgYXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2F0dHIvKVxyXG4gKiAtIFtgYmluZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2JpbmQvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcywgc2VsZWN0b3JzIG9yIGV2ZW50RGF0YVxyXG4gKiAtIFtgY2hpbGRyZW4oKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jaGlsZHJlbi8pIC0gRG9lcyBub3Qgc3VwcG9ydCBzZWxlY3RvcnNcclxuICogLSBbYGNsb25lKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vY2xvbmUvKVxyXG4gKiAtIFtgY29udGVudHMoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jb250ZW50cy8pXHJcbiAqIC0gW2Bjc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jc3MvKVxyXG4gKiAtIFtgZGF0YSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2RhdGEvKVxyXG4gKiAtIFtgZGV0YWNoKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZGV0YWNoLylcclxuICogLSBbYGVtcHR5KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZW1wdHkvKVxyXG4gKiAtIFtgZXEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lcS8pXHJcbiAqIC0gW2BmaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZmluZC8pIC0gTGltaXRlZCB0byBsb29rdXBzIGJ5IHRhZyBuYW1lXHJcbiAqIC0gW2BoYXNDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2hhc0NsYXNzLylcclxuICogLSBbYGh0bWwoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9odG1sLylcclxuICogLSBbYG5leHQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9uZXh0LykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xyXG4gKiAtIFtgb24oKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vbi8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzLCBzZWxlY3RvcnMgb3IgZXZlbnREYXRhXHJcbiAqIC0gW2BvZmYoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmYvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcyBvciBzZWxlY3RvcnNcclxuICogLSBbYG9uZSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29uZS8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzIG9yIHNlbGVjdG9yc1xyXG4gKiAtIFtgcGFyZW50KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcGFyZW50LykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xyXG4gKiAtIFtgcHJlcGVuZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ByZXBlbmQvKVxyXG4gKiAtIFtgcHJvcCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3Byb3AvKVxyXG4gKiAtIFtgcmVhZHkoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZWFkeS8pXHJcbiAqIC0gW2ByZW1vdmUoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmUvKVxyXG4gKiAtIFtgcmVtb3ZlQXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZUF0dHIvKVxyXG4gKiAtIFtgcmVtb3ZlQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmVDbGFzcy8pXHJcbiAqIC0gW2ByZW1vdmVEYXRhKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlRGF0YS8pXHJcbiAqIC0gW2ByZXBsYWNlV2l0aCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlcGxhY2VXaXRoLylcclxuICogLSBbYHRleHQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90ZXh0LylcclxuICogLSBbYHRvZ2dsZUNsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdG9nZ2xlQ2xhc3MvKVxyXG4gKiAtIFtgdHJpZ2dlckhhbmRsZXIoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90cmlnZ2VySGFuZGxlci8pIC0gUGFzc2VzIGEgZHVtbXkgZXZlbnQgb2JqZWN0IHRvIGhhbmRsZXJzLlxyXG4gKiAtIFtgdW5iaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdW5iaW5kLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXNcclxuICogLSBbYHZhbCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ZhbC8pXHJcbiAqIC0gW2B3cmFwKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vd3JhcC8pXHJcbiAqXHJcbiAqICMjIGpRdWVyeS9qcUxpdGUgRXh0cmFzXHJcbiAqIEFuZ3VsYXIgYWxzbyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgZXZlbnRzIHRvIGJvdGggalF1ZXJ5IGFuZCBqcUxpdGU6XHJcbiAqXHJcbiAqICMjIyBFdmVudHNcclxuICogLSBgJGRlc3Ryb3lgIC0gQW5ndWxhckpTIGludGVyY2VwdHMgYWxsIGpxTGl0ZS9qUXVlcnkncyBET00gZGVzdHJ1Y3Rpb24gYXBpcyBhbmQgZmlyZXMgdGhpcyBldmVudFxyXG4gKiAgICBvbiBhbGwgRE9NIG5vZGVzIGJlaW5nIHJlbW92ZWQuICBUaGlzIGNhbiBiZSB1c2VkIHRvIGNsZWFuIHVwIGFueSAzcmQgcGFydHkgYmluZGluZ3MgdG8gdGhlIERPTVxyXG4gKiAgICBlbGVtZW50IGJlZm9yZSBpdCBpcyByZW1vdmVkLlxyXG4gKlxyXG4gKiAjIyMgTWV0aG9kc1xyXG4gKiAtIGBjb250cm9sbGVyKG5hbWUpYCAtIHJldHJpZXZlcyB0aGUgY29udHJvbGxlciBvZiB0aGUgY3VycmVudCBlbGVtZW50IG9yIGl0cyBwYXJlbnQuIEJ5IGRlZmF1bHRcclxuICogICByZXRyaWV2ZXMgY29udHJvbGxlciBhc3NvY2lhdGVkIHdpdGggdGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZS4gSWYgYG5hbWVgIGlzIHByb3ZpZGVkIGFzXHJcbiAqICAgY2FtZWxDYXNlIGRpcmVjdGl2ZSBuYW1lLCB0aGVuIHRoZSBjb250cm9sbGVyIGZvciB0aGlzIGRpcmVjdGl2ZSB3aWxsIGJlIHJldHJpZXZlZCAoZS5nLlxyXG4gKiAgIGAnbmdNb2RlbCdgKS5cclxuICogLSBgaW5qZWN0b3IoKWAgLSByZXRyaWV2ZXMgdGhlIGluamVjdG9yIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC5cclxuICogLSBgc2NvcGUoKWAgLSByZXRyaWV2ZXMgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIHNjb3BlfSBvZiB0aGUgY3VycmVudFxyXG4gKiAgIGVsZW1lbnQgb3IgaXRzIHBhcmVudC5cclxuICogLSBgaXNvbGF0ZVNjb3BlKClgIC0gcmV0cmlldmVzIGFuIGlzb2xhdGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9IGlmIG9uZSBpcyBhdHRhY2hlZCBkaXJlY3RseSB0byB0aGVcclxuICogICBjdXJyZW50IGVsZW1lbnQuIFRoaXMgZ2V0dGVyIHNob3VsZCBiZSB1c2VkIG9ubHkgb24gZWxlbWVudHMgdGhhdCBjb250YWluIGEgZGlyZWN0aXZlIHdoaWNoIHN0YXJ0cyBhIG5ldyBpc29sYXRlXHJcbiAqICAgc2NvcGUuIENhbGxpbmcgYHNjb3BlKClgIG9uIHRoaXMgZWxlbWVudCBhbHdheXMgcmV0dXJucyB0aGUgb3JpZ2luYWwgbm9uLWlzb2xhdGUgc2NvcGUuXHJcbiAqIC0gYGluaGVyaXRlZERhdGEoKWAgLSBzYW1lIGFzIGBkYXRhKClgLCBidXQgd2Fsa3MgdXAgdGhlIERPTSB1bnRpbCBhIHZhbHVlIGlzIGZvdW5kIG9yIHRoZSB0b3BcclxuICogICBwYXJlbnQgZWxlbWVudCBpcyByZWFjaGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ3xET01FbGVtZW50fSBlbGVtZW50IEhUTUwgc3RyaW5nIG9yIERPTUVsZW1lbnQgdG8gYmUgd3JhcHBlZCBpbnRvIGpRdWVyeS5cclxuICogQHJldHVybnMge09iamVjdH0galF1ZXJ5IG9iamVjdC5cclxuICovXHJcblxyXG5KUUxpdGUuZXhwYW5kbyA9ICduZzMzOSc7XHJcblxyXG52YXIganFDYWNoZSA9IEpRTGl0ZS5jYWNoZSA9IHt9LFxyXG4gICAganFJZCA9IDEsXHJcbiAgICBhZGRFdmVudExpc3RlbmVyRm4gPSBmdW5jdGlvbihlbGVtZW50LCB0eXBlLCBmbikge1xyXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGZhbHNlKTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVFdmVudExpc3RlbmVyRm4gPSBmdW5jdGlvbihlbGVtZW50LCB0eXBlLCBmbikge1xyXG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGZhbHNlKTtcclxuICAgIH07XHJcblxyXG4vKlxyXG4gKiAhISEgVGhpcyBpcyBhbiB1bmRvY3VtZW50ZWQgXCJwcml2YXRlXCIgZnVuY3Rpb24gISEhXHJcbiAqL1xyXG5KUUxpdGUuX2RhdGEgPSBmdW5jdGlvbihub2RlKSB7XHJcbiAgLy9qUXVlcnkgYWx3YXlzIHJldHVybnMgYW4gb2JqZWN0IG9uIGNhY2hlIG1pc3NcclxuICByZXR1cm4gdGhpcy5jYWNoZVtub2RlW3RoaXMuZXhwYW5kb11dIHx8IHt9O1xyXG59O1xyXG5cclxuZnVuY3Rpb24ganFOZXh0SWQoKSB7IHJldHVybiArK2pxSWQ7IH1cclxuXHJcblxyXG52YXIgU1BFQ0lBTF9DSEFSU19SRUdFWFAgPSAvKFtcXDpcXC1cXF9dKyguKSkvZztcclxudmFyIE1PWl9IQUNLX1JFR0VYUCA9IC9ebW96KFtBLVpdKS87XHJcbnZhciBNT1VTRV9FVkVOVF9NQVA9IHsgbW91c2VsZWF2ZSA6IFwibW91c2VvdXRcIiwgbW91c2VlbnRlciA6IFwibW91c2VvdmVyXCJ9O1xyXG52YXIganFMaXRlTWluRXJyID0gbWluRXJyKCdqcUxpdGUnKTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBzbmFrZV9jYXNlIHRvIGNhbWVsQ2FzZS5cclxuICogQWxzbyB0aGVyZSBpcyBzcGVjaWFsIGNhc2UgZm9yIE1veiBwcmVmaXggc3RhcnRpbmcgd2l0aCB1cHBlciBjYXNlIGxldHRlci5cclxuICogQHBhcmFtIG5hbWUgTmFtZSB0byBub3JtYWxpemVcclxuICovXHJcbmZ1bmN0aW9uIGNhbWVsQ2FzZShuYW1lKSB7XHJcbiAgcmV0dXJuIG5hbWUuXHJcbiAgICByZXBsYWNlKFNQRUNJQUxfQ0hBUlNfUkVHRVhQLCBmdW5jdGlvbihfLCBzZXBhcmF0b3IsIGxldHRlciwgb2Zmc2V0KSB7XHJcbiAgICAgIHJldHVybiBvZmZzZXQgPyBsZXR0ZXIudG9VcHBlckNhc2UoKSA6IGxldHRlcjtcclxuICAgIH0pLlxyXG4gICAgcmVwbGFjZShNT1pfSEFDS19SRUdFWFAsICdNb3okMScpO1xyXG59XHJcblxyXG52YXIgU0lOR0xFX1RBR19SRUdFWFAgPSAvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC87XHJcbnZhciBIVE1MX1JFR0VYUCA9IC88fCYjP1xcdys7LztcclxudmFyIFRBR19OQU1FX1JFR0VYUCA9IC88KFtcXHc6XSspLztcclxudmFyIFhIVE1MX1RBR19SRUdFWFAgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2k7XHJcblxyXG52YXIgd3JhcE1hcCA9IHtcclxuICAnb3B0aW9uJzogWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J10sXHJcblxyXG4gICd0aGVhZCc6IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddLFxyXG4gICdjb2wnOiBbMiwgJzx0YWJsZT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcclxuICAndHInOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcclxuICAndGQnOiBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXSxcclxuICAnX2RlZmF1bHQnOiBbMCwgXCJcIiwgXCJcIl1cclxufTtcclxuXHJcbndyYXBNYXAub3B0Z3JvdXAgPSB3cmFwTWFwLm9wdGlvbjtcclxud3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDtcclxud3JhcE1hcC50aCA9IHdyYXBNYXAudGQ7XHJcblxyXG5cclxuZnVuY3Rpb24ganFMaXRlSXNUZXh0Tm9kZShodG1sKSB7XHJcbiAgcmV0dXJuICFIVE1MX1JFR0VYUC50ZXN0KGh0bWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVBY2NlcHRzRGF0YShub2RlKSB7XHJcbiAgLy8gVGhlIHdpbmRvdyBvYmplY3QgY2FuIGFjY2VwdCBkYXRhIGJ1dCBoYXMgbm8gbm9kZVR5cGVcclxuICAvLyBPdGhlcndpc2Ugd2UgYXJlIG9ubHkgaW50ZXJlc3RlZCBpbiBlbGVtZW50cyAoMSkgYW5kIGRvY3VtZW50cyAoOSlcclxuICB2YXIgbm9kZVR5cGUgPSBub2RlLm5vZGVUeXBlO1xyXG4gIHJldHVybiBub2RlVHlwZSA9PT0gMSB8fCAhbm9kZVR5cGUgfHwgbm9kZVR5cGUgPT09IDk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUJ1aWxkRnJhZ21lbnQoaHRtbCwgY29udGV4dCkge1xyXG4gIHZhciB0bXAsIHRhZywgd3JhcCxcclxuICAgICAgZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcclxuICAgICAgbm9kZXMgPSBbXSwgaTtcclxuXHJcbiAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoaHRtbCkpIHtcclxuICAgIC8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZVxyXG4gICAgbm9kZXMucHVzaChjb250ZXh0LmNyZWF0ZVRleHROb2RlKGh0bWwpKTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gQ29udmVydCBodG1sIGludG8gRE9NIG5vZGVzXHJcbiAgICB0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoY29udGV4dC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcclxuICAgIHRhZyA9IChUQUdfTkFNRV9SRUdFWFAuZXhlYyhodG1sKSB8fCBbXCJcIiwgXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB3cmFwID0gd3JhcE1hcFt0YWddIHx8IHdyYXBNYXAuX2RlZmF1bHQ7XHJcbiAgICB0bXAuaW5uZXJIVE1MID0gd3JhcFsxXSArIGh0bWwucmVwbGFjZShYSFRNTF9UQUdfUkVHRVhQLCBcIjwkMT48LyQyPlwiKSArIHdyYXBbMl07XHJcblxyXG4gICAgLy8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XHJcbiAgICBpID0gd3JhcFswXTtcclxuICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgdG1wID0gdG1wLmxhc3RDaGlsZDtcclxuICAgIH1cclxuXHJcbiAgICBub2RlcyA9IGNvbmNhdChub2RlcywgdG1wLmNoaWxkTm9kZXMpO1xyXG5cclxuICAgIHRtcCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XHJcbiAgICB0bXAudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxyXG4gIGZyYWdtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICBmcmFnbWVudC5pbm5lckhUTUwgPSBcIlwiOyAvLyBDbGVhciBpbm5lciBIVE1MXHJcbiAgZm9yRWFjaChub2RlcywgZnVuY3Rpb24obm9kZSkge1xyXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBmcmFnbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlUGFyc2VIVE1MKGh0bWwsIGNvbnRleHQpIHtcclxuICBjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcclxuICB2YXIgcGFyc2VkO1xyXG5cclxuICBpZiAoKHBhcnNlZCA9IFNJTkdMRV9UQUdfUkVHRVhQLmV4ZWMoaHRtbCkpKSB7XHJcbiAgICByZXR1cm4gW2NvbnRleHQuY3JlYXRlRWxlbWVudChwYXJzZWRbMV0pXTtcclxuICB9XHJcblxyXG4gIGlmICgocGFyc2VkID0ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSkpIHtcclxuICAgIHJldHVybiBwYXJzZWQuY2hpbGROb2RlcztcclxuICB9XHJcblxyXG4gIHJldHVybiBbXTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmZ1bmN0aW9uIEpRTGl0ZShlbGVtZW50KSB7XHJcbiAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBKUUxpdGUpIHtcclxuICAgIHJldHVybiBlbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgdmFyIGFyZ0lzU3RyaW5nO1xyXG5cclxuICBpZiAoaXNTdHJpbmcoZWxlbWVudCkpIHtcclxuICAgIGVsZW1lbnQgPSB0cmltKGVsZW1lbnQpO1xyXG4gICAgYXJnSXNTdHJpbmcgPSB0cnVlO1xyXG4gIH1cclxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSlFMaXRlKSkge1xyXG4gICAgaWYgKGFyZ0lzU3RyaW5nICYmIGVsZW1lbnQuY2hhckF0KDApICE9ICc8Jykge1xyXG4gICAgICB0aHJvdyBqcUxpdGVNaW5FcnIoJ25vc2VsJywgJ0xvb2tpbmcgdXAgZWxlbWVudHMgdmlhIHNlbGVjdG9ycyBpcyBub3Qgc3VwcG9ydGVkIGJ5IGpxTGl0ZSEgU2VlOiBodHRwOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9hbmd1bGFyLmVsZW1lbnQnKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgSlFMaXRlKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGFyZ0lzU3RyaW5nKSB7XHJcbiAgICBqcUxpdGVBZGROb2Rlcyh0aGlzLCBqcUxpdGVQYXJzZUhUTUwoZWxlbWVudCkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBqcUxpdGVBZGROb2Rlcyh0aGlzLCBlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUNsb25lKGVsZW1lbnQpIHtcclxuICByZXR1cm4gZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZURlYWxvYyhlbGVtZW50LCBvbmx5RGVzY2VuZGFudHMpe1xyXG4gIGlmICghb25seURlc2NlbmRhbnRzKSBqcUxpdGVSZW1vdmVEYXRhKGVsZW1lbnQpO1xyXG5cclxuICBpZiAoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7XHJcbiAgICB2YXIgZGVzY2VuZGFudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gZGVzY2VuZGFudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIGpxTGl0ZVJlbW92ZURhdGEoZGVzY2VuZGFudHNbaV0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlT2ZmKGVsZW1lbnQsIHR5cGUsIGZuLCB1bnN1cHBvcnRlZCkge1xyXG4gIGlmIChpc0RlZmluZWQodW5zdXBwb3J0ZWQpKSB0aHJvdyBqcUxpdGVNaW5FcnIoJ29mZmFyZ3MnLCAnanFMaXRlI29mZigpIGRvZXMgbm90IHN1cHBvcnQgdGhlIGBzZWxlY3RvcmAgYXJndW1lbnQnKTtcclxuXHJcbiAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50KTtcclxuICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5ldmVudHM7XHJcbiAgdmFyIGhhbmRsZSA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuaGFuZGxlO1xyXG5cclxuICBpZiAoIWhhbmRsZSkgcmV0dXJuOyAvL25vIGxpc3RlbmVycyByZWdpc3RlcmVkXHJcblxyXG4gIGlmICghdHlwZSkge1xyXG4gICAgZm9yICh0eXBlIGluIGV2ZW50cykge1xyXG4gICAgICBpZiAodHlwZSAhPT0gJyRkZXN0cm95Jykge1xyXG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihlbGVtZW50LCB0eXBlLCBldmVudHNbdHlwZV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGZvckVhY2godHlwZS5zcGxpdCgnICcpLCBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgIGlmIChpc1VuZGVmaW5lZChmbikpIHtcclxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyRm4oZWxlbWVudCwgdHlwZSwgZXZlbnRzW3R5cGVdKTtcclxuICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFycmF5UmVtb3ZlKGV2ZW50c1t0eXBlXSB8fCBbXSwgZm4pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZVJlbW92ZURhdGEoZWxlbWVudCwgbmFtZSkge1xyXG4gIHZhciBleHBhbmRvSWQgPSBlbGVtZW50Lm5nMzM5O1xyXG4gIHZhciBleHBhbmRvU3RvcmUgPSBleHBhbmRvSWQgJiYganFDYWNoZVtleHBhbmRvSWRdO1xyXG5cclxuICBpZiAoZXhwYW5kb1N0b3JlKSB7XHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICBkZWxldGUgZXhwYW5kb1N0b3JlLmRhdGFbbmFtZV07XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXhwYW5kb1N0b3JlLmhhbmRsZSkge1xyXG4gICAgICBpZiAoZXhwYW5kb1N0b3JlLmV2ZW50cy4kZGVzdHJveSkge1xyXG4gICAgICAgIGV4cGFuZG9TdG9yZS5oYW5kbGUoe30sICckZGVzdHJveScpO1xyXG4gICAgICB9XHJcbiAgICAgIGpxTGl0ZU9mZihlbGVtZW50KTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSBqcUNhY2hlW2V4cGFuZG9JZF07XHJcbiAgICBlbGVtZW50Lm5nMzM5ID0gdW5kZWZpbmVkOyAvLyBkb24ndCBkZWxldGUgRE9NIGV4cGFuZG9zLiBJRSBhbmQgQ2hyb21lIGRvbid0IGxpa2UgaXRcclxuICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwgY3JlYXRlSWZOZWNlc3NhcnkpIHtcclxuICB2YXIgZXhwYW5kb0lkID0gZWxlbWVudC5uZzMzOSxcclxuICAgICAgZXhwYW5kb1N0b3JlID0gZXhwYW5kb0lkICYmIGpxQ2FjaGVbZXhwYW5kb0lkXTtcclxuXHJcbiAgaWYgKGNyZWF0ZUlmTmVjZXNzYXJ5ICYmICFleHBhbmRvU3RvcmUpIHtcclxuICAgIGVsZW1lbnQubmczMzkgPSBleHBhbmRvSWQgPSBqcU5leHRJZCgpO1xyXG4gICAgZXhwYW5kb1N0b3JlID0ganFDYWNoZVtleHBhbmRvSWRdID0ge2V2ZW50czoge30sIGRhdGE6IHt9LCBoYW5kbGU6IHVuZGVmaW5lZH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZXhwYW5kb1N0b3JlO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24ganFMaXRlRGF0YShlbGVtZW50LCBrZXksIHZhbHVlKSB7XHJcbiAgaWYgKGpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSB7XHJcblxyXG4gICAgdmFyIGlzU2ltcGxlU2V0dGVyID0gaXNEZWZpbmVkKHZhbHVlKTtcclxuICAgIHZhciBpc1NpbXBsZUdldHRlciA9ICFpc1NpbXBsZVNldHRlciAmJiBrZXkgJiYgIWlzT2JqZWN0KGtleSk7XHJcbiAgICB2YXIgbWFzc0dldHRlciA9ICFrZXk7XHJcbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsICFpc1NpbXBsZUdldHRlcik7XHJcbiAgICB2YXIgZGF0YSA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuZGF0YTtcclxuXHJcbiAgICBpZiAoaXNTaW1wbGVTZXR0ZXIpIHsgLy8gZGF0YSgna2V5JywgdmFsdWUpXHJcbiAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKG1hc3NHZXR0ZXIpIHsgIC8vIGRhdGEoKVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChpc1NpbXBsZUdldHRlcikgeyAvLyBkYXRhKCdrZXknKVxyXG4gICAgICAgICAgLy8gZG9uJ3QgZm9yY2UgY3JlYXRpb24gb2YgZXhwYW5kb1N0b3JlIGlmIGl0IGRvZXNuJ3QgZXhpc3QgeWV0XHJcbiAgICAgICAgICByZXR1cm4gZGF0YSAmJiBkYXRhW2tleV07XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gbWFzcy1zZXR0ZXI6IGRhdGEoe2tleTE6IHZhbDEsIGtleTI6IHZhbDJ9KVxyXG4gICAgICAgICAgZXh0ZW5kKGRhdGEsIGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVIYXNDbGFzcyhlbGVtZW50LCBzZWxlY3Rvcikge1xyXG4gIGlmICghZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHJldHVybiBmYWxzZTtcclxuICByZXR1cm4gKChcIiBcIiArIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyBcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpLlxyXG4gICAgICBpbmRleE9mKCBcIiBcIiArIHNlbGVjdG9yICsgXCIgXCIgKSA+IC0xKTtcclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlQ2xhc3MoZWxlbWVudCwgY3NzQ2xhc3Nlcykge1xyXG4gIGlmIChjc3NDbGFzc2VzICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XHJcbiAgICBmb3JFYWNoKGNzc0NsYXNzZXMuc3BsaXQoJyAnKSwgZnVuY3Rpb24oY3NzQ2xhc3MpIHtcclxuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdHJpbShcclxuICAgICAgICAgIChcIiBcIiArIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyBcIiBcIilcclxuICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCBcIiBcIilcclxuICAgICAgICAgIC5yZXBsYWNlKFwiIFwiICsgdHJpbShjc3NDbGFzcykgKyBcIiBcIiwgXCIgXCIpKVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVBZGRDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XHJcbiAgaWYgKGNzc0NsYXNzZXMgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcclxuICAgIHZhciBleGlzdGluZ0NsYXNzZXMgPSAoJyAnICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICcgJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCBcIiBcIik7XHJcblxyXG4gICAgZm9yRWFjaChjc3NDbGFzc2VzLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNzc0NsYXNzKSB7XHJcbiAgICAgIGNzc0NsYXNzID0gdHJpbShjc3NDbGFzcyk7XHJcbiAgICAgIGlmIChleGlzdGluZ0NsYXNzZXMuaW5kZXhPZignICcgKyBjc3NDbGFzcyArICcgJykgPT09IC0xKSB7XHJcbiAgICAgICAgZXhpc3RpbmdDbGFzc2VzICs9IGNzc0NsYXNzICsgJyAnO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB0cmltKGV4aXN0aW5nQ2xhc3NlcykpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUFkZE5vZGVzKHJvb3QsIGVsZW1lbnRzKSB7XHJcbiAgLy8gVEhJUyBDT0RFIElTIFZFUlkgSE9ULiBEb24ndCBtYWtlIGNoYW5nZXMgd2l0aG91dCBiZW5jaG1hcmtpbmcuXHJcblxyXG4gIGlmIChlbGVtZW50cykge1xyXG5cclxuICAgIC8vIGlmIGEgTm9kZSAodGhlIG1vc3QgY29tbW9uIGNhc2UpXHJcbiAgICBpZiAoZWxlbWVudHMubm9kZVR5cGUpIHtcclxuICAgICAgcm9vdFtyb290Lmxlbmd0aCsrXSA9IGVsZW1lbnRzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcclxuXHJcbiAgICAgIC8vIGlmIGFuIEFycmF5IG9yIE5vZGVMaXN0IGFuZCBub3QgYSBXaW5kb3dcclxuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInICYmIGVsZW1lbnRzLndpbmRvdyAhPT0gZWxlbWVudHMpIHtcclxuICAgICAgICBpZiAobGVuZ3RoKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJvb3Rbcm9vdC5sZW5ndGgrK10gPSBlbGVtZW50c1tpXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm9vdFtyb290Lmxlbmd0aCsrXSA9IGVsZW1lbnRzO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24ganFMaXRlQ29udHJvbGxlcihlbGVtZW50LCBuYW1lKSB7XHJcbiAgcmV0dXJuIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgJyQnICsgKG5hbWUgfHwgJ25nQ29udHJvbGxlcicgKSArICdDb250cm9sbGVyJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcclxuICAvLyBpZiBlbGVtZW50IGlzIHRoZSBkb2N1bWVudCBvYmplY3Qgd29yayB3aXRoIHRoZSBodG1sIGVsZW1lbnQgaW5zdGVhZFxyXG4gIC8vIHRoaXMgbWFrZXMgJChkb2N1bWVudCkuc2NvcGUoKSBwb3NzaWJsZVxyXG4gIGlmKGVsZW1lbnQubm9kZVR5cGUgPT0gOSkge1xyXG4gICAgZWxlbWVudCA9IGVsZW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gIH1cclxuICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gbmFtZSA6IFtuYW1lXTtcclxuXHJcbiAgd2hpbGUgKGVsZW1lbnQpIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5hbWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgaWYgKCh2YWx1ZSA9IGpxTGl0ZS5kYXRhKGVsZW1lbnQsIG5hbWVzW2ldKSkgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGRlYWxpbmcgd2l0aCBhIGRvY3VtZW50IGZyYWdtZW50IG5vZGUgd2l0aCBhIGhvc3QgZWxlbWVudCwgYW5kIG5vIHBhcmVudCwgdXNlIHRoZSBob3N0XHJcbiAgICAvLyBlbGVtZW50IGFzIHRoZSBwYXJlbnQuIFRoaXMgZW5hYmxlcyBkaXJlY3RpdmVzIHdpdGhpbiBhIFNoYWRvdyBET00gb3IgcG9seWZpbGxlZCBTaGFkb3cgRE9NXHJcbiAgICAvLyB0byBsb29rdXAgcGFyZW50IGNvbnRyb2xsZXJzLlxyXG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCAoZWxlbWVudC5ub2RlVHlwZSA9PT0gMTEgJiYgZWxlbWVudC5ob3N0KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUVtcHR5KGVsZW1lbnQpIHtcclxuICBqcUxpdGVEZWFsb2MoZWxlbWVudCwgdHJ1ZSk7XHJcbiAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlKGVsZW1lbnQsIGtlZXBEYXRhKSB7XHJcbiAgaWYgKCFrZWVwRGF0YSkganFMaXRlRGVhbG9jKGVsZW1lbnQpO1xyXG4gIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gRnVuY3Rpb25zIHdoaWNoIGFyZSBkZWNsYXJlZCBkaXJlY3RseS5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnZhciBKUUxpdGVQcm90b3R5cGUgPSBKUUxpdGUucHJvdG90eXBlID0ge1xyXG4gIHJlYWR5OiBmdW5jdGlvbihmbikge1xyXG4gICAgdmFyIGZpcmVkID0gZmFsc2U7XHJcblxyXG4gICAgZnVuY3Rpb24gdHJpZ2dlcigpIHtcclxuICAgICAgaWYgKGZpcmVkKSByZXR1cm47XHJcbiAgICAgIGZpcmVkID0gdHJ1ZTtcclxuICAgICAgZm4oKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjaGVjayBpZiBkb2N1bWVudCBpcyBhbHJlYWR5IGxvYWRlZFxyXG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpe1xyXG4gICAgICBzZXRUaW1lb3V0KHRyaWdnZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vbignRE9NQ29udGVudExvYWRlZCcsIHRyaWdnZXIpOyAvLyB3b3JrcyBmb3IgbW9kZXJuIGJyb3dzZXJzIGFuZCBJRTlcclxuICAgICAgLy8gd2UgY2FuIG5vdCB1c2UganFMaXRlIHNpbmNlIHdlIGFyZSBub3QgZG9uZSBsb2FkaW5nIGFuZCBqUXVlcnkgY291bGQgYmUgbG9hZGVkIGxhdGVyLlxyXG4gICAgICAvLyBqc2hpbnQgLVcwNjRcclxuICAgICAgSlFMaXRlKHdpbmRvdykub24oJ2xvYWQnLCB0cmlnZ2VyKTsgLy8gZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCBmb3Igb3RoZXJzXHJcbiAgICAgIC8vIGpzaGludCArVzA2NFxyXG4gICAgICB0aGlzLm9uKCdET01Db250ZW50TG9hZGVkJywgdHJpZ2dlcik7XHJcbiAgICB9XHJcbiAgfSxcclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdmFsdWUgPSBbXTtcclxuICAgIGZvckVhY2godGhpcywgZnVuY3Rpb24oZSl7IHZhbHVlLnB1c2goJycgKyBlKTt9KTtcclxuICAgIHJldHVybiAnWycgKyB2YWx1ZS5qb2luKCcsICcpICsgJ10nO1xyXG4gIH0sXHJcblxyXG4gIGVxOiBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICByZXR1cm4gKGluZGV4ID49IDApID8ganFMaXRlKHRoaXNbaW5kZXhdKSA6IGpxTGl0ZSh0aGlzW3RoaXMubGVuZ3RoICsgaW5kZXhdKTtcclxuICB9LFxyXG5cclxuICBsZW5ndGg6IDAsXHJcbiAgcHVzaDogcHVzaCxcclxuICBzb3J0OiBbXS5zb3J0LFxyXG4gIHNwbGljZTogW10uc3BsaWNlXHJcbn07XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gRnVuY3Rpb25zIGl0ZXJhdGluZyBnZXR0ZXIvc2V0dGVycy5cclxuLy8gdGhlc2UgZnVuY3Rpb25zIHJldHVybiBzZWxmIG9uIHNldHRlciBhbmRcclxuLy8gdmFsdWUgb24gZ2V0LlxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxudmFyIEJPT0xFQU5fQVRUUiA9IHt9O1xyXG5mb3JFYWNoKCdtdWx0aXBsZSxzZWxlY3RlZCxjaGVja2VkLGRpc2FibGVkLHJlYWRPbmx5LHJlcXVpcmVkLG9wZW4nLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgQk9PTEVBTl9BVFRSW2xvd2VyY2FzZSh2YWx1ZSldID0gdmFsdWU7XHJcbn0pO1xyXG52YXIgQk9PTEVBTl9FTEVNRU5UUyA9IHt9O1xyXG5mb3JFYWNoKCdpbnB1dCxzZWxlY3Qsb3B0aW9uLHRleHRhcmVhLGJ1dHRvbixmb3JtLGRldGFpbHMnLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgQk9PTEVBTl9FTEVNRU5UU1t2YWx1ZV0gPSB0cnVlO1xyXG59KTtcclxudmFyIEFMSUFTRURfQVRUUiA9IHtcclxuICAnbmdNaW5sZW5ndGgnIDogJ21pbmxlbmd0aCcsXHJcbiAgJ25nTWF4bGVuZ3RoJyA6ICdtYXhsZW5ndGgnLFxyXG4gICduZ01pbicgOiAnbWluJyxcclxuICAnbmdNYXgnIDogJ21heCcsXHJcbiAgJ25nUGF0dGVybicgOiAncGF0dGVybidcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldEJvb2xlYW5BdHRyTmFtZShlbGVtZW50LCBuYW1lKSB7XHJcbiAgLy8gY2hlY2sgZG9tIGxhc3Qgc2luY2Ugd2Ugd2lsbCBtb3N0IGxpa2VseSBmYWlsIG9uIG5hbWVcclxuICB2YXIgYm9vbGVhbkF0dHIgPSBCT09MRUFOX0FUVFJbbmFtZS50b0xvd2VyQ2FzZSgpXTtcclxuXHJcbiAgLy8gYm9vbGVhbkF0dHIgaXMgaGVyZSB0d2ljZSB0byBtaW5pbWl6ZSBET00gYWNjZXNzXHJcbiAgcmV0dXJuIGJvb2xlYW5BdHRyICYmIEJPT0xFQU5fRUxFTUVOVFNbbm9kZU5hbWVfKGVsZW1lbnQpXSAmJiBib29sZWFuQXR0cjtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QWxpYXNlZEF0dHJOYW1lKGVsZW1lbnQsIG5hbWUpIHtcclxuICB2YXIgbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lO1xyXG4gIHJldHVybiAobm9kZU5hbWUgPT09ICdJTlBVVCcgfHwgbm9kZU5hbWUgPT09ICdURVhUQVJFQScpICYmIEFMSUFTRURfQVRUUltuYW1lXTtcclxufVxyXG5cclxuZm9yRWFjaCh7XHJcbiAgZGF0YToganFMaXRlRGF0YSxcclxuICByZW1vdmVEYXRhOiBqcUxpdGVSZW1vdmVEYXRhXHJcbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKSB7XHJcbiAgSlFMaXRlW25hbWVdID0gZm47XHJcbn0pO1xyXG5cclxuZm9yRWFjaCh7XHJcbiAgZGF0YToganFMaXRlRGF0YSxcclxuICBpbmhlcml0ZWREYXRhOiBqcUxpdGVJbmhlcml0ZWREYXRhLFxyXG5cclxuICBzY29wZTogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgLy8gQ2FuJ3QgdXNlIGpxTGl0ZURhdGEgaGVyZSBkaXJlY3RseSBzbyB3ZSBzdGF5IGNvbXBhdGlibGUgd2l0aCBqUXVlcnkhXHJcbiAgICByZXR1cm4ganFMaXRlLmRhdGEoZWxlbWVudCwgJyRzY29wZScpIHx8IGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudC5wYXJlbnROb2RlIHx8IGVsZW1lbnQsIFsnJGlzb2xhdGVTY29wZScsICckc2NvcGUnXSk7XHJcbiAgfSxcclxuXHJcbiAgaXNvbGF0ZVNjb3BlOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAvLyBDYW4ndCB1c2UganFMaXRlRGF0YSBoZXJlIGRpcmVjdGx5IHNvIHdlIHN0YXkgY29tcGF0aWJsZSB3aXRoIGpRdWVyeSFcclxuICAgIHJldHVybiBqcUxpdGUuZGF0YShlbGVtZW50LCAnJGlzb2xhdGVTY29wZScpIHx8IGpxTGl0ZS5kYXRhKGVsZW1lbnQsICckaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZScpO1xyXG4gIH0sXHJcblxyXG4gIGNvbnRyb2xsZXI6IGpxTGl0ZUNvbnRyb2xsZXIsXHJcblxyXG4gIGluamVjdG9yOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICByZXR1cm4ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCAnJGluamVjdG9yJyk7XHJcbiAgfSxcclxuXHJcbiAgcmVtb3ZlQXR0cjogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSkge1xyXG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XHJcbiAgfSxcclxuXHJcbiAgaGFzQ2xhc3M6IGpxTGl0ZUhhc0NsYXNzLFxyXG5cclxuICBjc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBuYW1lID0gY2FtZWxDYXNlKG5hbWUpO1xyXG5cclxuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgIGVsZW1lbnQuc3R5bGVbbmFtZV0gPSB2YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50LnN0eWxlW25hbWVdO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGF0dHI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUsIHZhbHVlKXtcclxuICAgIHZhciBsb3dlcmNhc2VkTmFtZSA9IGxvd2VyY2FzZShuYW1lKTtcclxuICAgIGlmIChCT09MRUFOX0FUVFJbbG93ZXJjYXNlZE5hbWVdKSB7XHJcbiAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgaWYgKCEhdmFsdWUpIHtcclxuICAgICAgICAgIGVsZW1lbnRbbmFtZV0gPSB0cnVlO1xyXG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgbG93ZXJjYXNlZE5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBlbGVtZW50W25hbWVdID0gZmFsc2U7XHJcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShsb3dlcmNhc2VkTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAoZWxlbWVudFtuYW1lXSB8fFxyXG4gICAgICAgICAgICAgICAgIChlbGVtZW50LmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKG5hbWUpfHwgbm9vcCkuc3BlY2lmaWVkKVxyXG4gICAgICAgICAgICAgICA/IGxvd2VyY2FzZWROYW1lXHJcbiAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xyXG4gICAgfSBlbHNlIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xyXG4gICAgICAvLyB0aGUgZXh0cmEgYXJndW1lbnQgXCIyXCIgaXMgdG8gZ2V0IHRoZSByaWdodCB0aGluZyBmb3IgYS5ocmVmIGluIElFLCBzZWUgalF1ZXJ5IGNvZGVcclxuICAgICAgLy8gc29tZSBlbGVtZW50cyAoZS5nLiBEb2N1bWVudCkgZG9uJ3QgaGF2ZSBnZXQgYXR0cmlidXRlLCBzbyByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAgIHZhciByZXQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lLCAyKTtcclxuICAgICAgLy8gbm9ybWFsaXplIG5vbi1leGlzdGluZyBhdHRyaWJ1dGVzIHRvIHVuZGVmaW5lZCAoYXMgalF1ZXJ5KVxyXG4gICAgICByZXR1cm4gcmV0ID09PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHByb3A6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICBlbGVtZW50W25hbWVdID0gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZWxlbWVudFtuYW1lXTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICB0ZXh0OiAoZnVuY3Rpb24oKSB7XHJcbiAgICBnZXRUZXh0LiRkdiA9ICcnO1xyXG4gICAgcmV0dXJuIGdldFRleHQ7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VGV4dChlbGVtZW50LCB2YWx1ZSkge1xyXG4gICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcclxuICAgICAgICByZXR1cm4gKG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSAzKSA/IGVsZW1lbnQudGV4dENvbnRlbnQgOiAnJztcclxuICAgICAgfVxyXG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfSkoKSxcclxuXHJcbiAgdmFsOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkge1xyXG4gICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICBpZiAoZWxlbWVudC5tdWx0aXBsZSAmJiBub2RlTmFtZV8oZWxlbWVudCkgPT09ICdzZWxlY3QnKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGZvckVhY2goZWxlbWVudC5vcHRpb25zLCBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9wdGlvbi52YWx1ZSB8fCBvcHRpb24udGV4dCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPT09IDAgPyBudWxsIDogcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xyXG4gIH0sXHJcblxyXG4gIGh0bWw6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50LmlubmVySFRNTDtcclxuICAgIH1cclxuICAgIGpxTGl0ZURlYWxvYyhlbGVtZW50LCB0cnVlKTtcclxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgfSxcclxuXHJcbiAgZW1wdHk6IGpxTGl0ZUVtcHR5XHJcbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKXtcclxuICAvKipcclxuICAgKiBQcm9wZXJ0aWVzOiB3cml0ZXMgcmV0dXJuIHNlbGVjdGlvbiwgcmVhZHMgcmV0dXJuIGZpcnN0IHZhbHVlXHJcbiAgICovXHJcbiAgSlFMaXRlLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKGFyZzEsIGFyZzIpIHtcclxuICAgIHZhciBpLCBrZXk7XHJcbiAgICB2YXIgbm9kZUNvdW50ID0gdGhpcy5sZW5ndGg7XHJcblxyXG4gICAgLy8ganFMaXRlSGFzQ2xhc3MgaGFzIG9ubHkgdHdvIGFyZ3VtZW50cywgYnV0IGlzIGEgZ2V0dGVyLW9ubHkgZm4sIHNvIHdlIG5lZWQgdG8gc3BlY2lhbC1jYXNlIGl0XHJcbiAgICAvLyBpbiBhIHdheSB0aGF0IHN1cnZpdmVzIG1pbmlmaWNhdGlvbi5cclxuICAgIC8vIGpxTGl0ZUVtcHR5IHRha2VzIG5vIGFyZ3VtZW50cyBidXQgaXMgYSBzZXR0ZXIuXHJcbiAgICBpZiAoZm4gIT09IGpxTGl0ZUVtcHR5ICYmXHJcbiAgICAgICAgKCgoZm4ubGVuZ3RoID09IDIgJiYgKGZuICE9PSBqcUxpdGVIYXNDbGFzcyAmJiBmbiAhPT0ganFMaXRlQ29udHJvbGxlcikpID8gYXJnMSA6IGFyZzIpID09PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgIGlmIChpc09iamVjdChhcmcxKSkge1xyXG5cclxuICAgICAgICAvLyB3ZSBhcmUgYSB3cml0ZSwgYnV0IHRoZSBvYmplY3QgcHJvcGVydGllcyBhcmUgdGhlIGtleS92YWx1ZXNcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpKyspIHtcclxuICAgICAgICAgIGlmIChmbiA9PT0ganFMaXRlRGF0YSkge1xyXG4gICAgICAgICAgICAvLyBkYXRhKCkgdGFrZXMgdGhlIHdob2xlIG9iamVjdCBpbiBqUXVlcnlcclxuICAgICAgICAgICAgZm4odGhpc1tpXSwgYXJnMSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGtleSBpbiBhcmcxKSB7XHJcbiAgICAgICAgICAgICAgZm4odGhpc1tpXSwga2V5LCBhcmcxW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJldHVybiBzZWxmIGZvciBjaGFpbmluZ1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHdlIGFyZSBhIHJlYWQsIHNvIHJlYWQgdGhlIGZpcnN0IGNoaWxkLlxyXG4gICAgICAgIC8vIFRPRE86IGRvIHdlIHN0aWxsIG5lZWQgdGhpcz9cclxuICAgICAgICB2YXIgdmFsdWUgPSBmbi4kZHY7XHJcbiAgICAgICAgLy8gT25seSBpZiB3ZSBoYXZlICRkdiBkbyB3ZSBpdGVyYXRlIG92ZXIgYWxsLCBvdGhlcndpc2UgaXQgaXMganVzdCB0aGUgZmlyc3QgZWxlbWVudC5cclxuICAgICAgICB2YXIgamogPSAodmFsdWUgPT09IHVuZGVmaW5lZCkgPyBNYXRoLm1pbihub2RlQ291bnQsIDEpIDogbm9kZUNvdW50O1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgamo7IGorKykge1xyXG4gICAgICAgICAgdmFyIG5vZGVWYWx1ZSA9IGZuKHRoaXNbal0sIGFyZzEsIGFyZzIpO1xyXG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZSA/IHZhbHVlICsgbm9kZVZhbHVlIDogbm9kZVZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIHdlIGFyZSBhIHdyaXRlLCBzbyBhcHBseSB0byBhbGwgY2hpbGRyZW5cclxuICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGVDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgZm4odGhpc1tpXSwgYXJnMSwgYXJnMik7XHJcbiAgICAgIH1cclxuICAgICAgLy8gcmV0dXJuIHNlbGYgZm9yIGNoYWluaW5nXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gIH07XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cykge1xyXG4gIHZhciBldmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIHR5cGUpIHtcclxuICAgIC8vIGpRdWVyeSBzcGVjaWZpYyBhcGlcclxuICAgIGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gZXZlbnQuZGVmYXVsdFByZXZlbnRlZDtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGUgfHwgZXZlbnQudHlwZV07XHJcbiAgICB2YXIgZXZlbnRGbnNMZW5ndGggPSBldmVudEZucyA/IGV2ZW50Rm5zLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgaWYgKCFldmVudEZuc0xlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgIGlmIChpc1VuZGVmaW5lZChldmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpKSB7XHJcbiAgICAgIHZhciBvcmlnaW5hbFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9IGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtcclxuICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgIG9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uLmNhbGwoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gZXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID09PSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBDb3B5IGV2ZW50IGhhbmRsZXJzIGluIGNhc2UgZXZlbnQgaGFuZGxlcnMgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIGV4ZWN1dGlvbi5cclxuICAgIGlmICgoZXZlbnRGbnNMZW5ndGggPiAxKSkge1xyXG4gICAgICBldmVudEZucyA9IHNoYWxsb3dDb3B5KGV2ZW50Rm5zKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50Rm5zTGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKCFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XHJcbiAgICAgICAgZXZlbnRGbnNbaV0uY2FsbChlbGVtZW50LCBldmVudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBUT0RPOiB0aGlzIGlzIGEgaGFjayBmb3IgYW5ndWxhck1vY2tzL2NsZWFyRGF0YUNhY2hlIHRoYXQgbWFrZXMgaXQgcG9zc2libGUgdG8gZGVyZWdpc3RlciBhbGxcclxuICAvLyAgICAgICBldmVudHMgb24gYGVsZW1lbnRgXHJcbiAgZXZlbnRIYW5kbGVyLmVsZW0gPSBlbGVtZW50O1xyXG4gIHJldHVybiBldmVudEhhbmRsZXI7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBGdW5jdGlvbnMgaXRlcmF0aW5nIHRyYXZlcnNhbC5cclxuLy8gVGhlc2UgZnVuY3Rpb25zIGNoYWluIHJlc3VsdHMgaW50byBhIHNpbmdsZVxyXG4vLyBzZWxlY3Rvci5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmZvckVhY2goe1xyXG4gIHJlbW92ZURhdGE6IGpxTGl0ZVJlbW92ZURhdGEsXHJcblxyXG4gIG9uOiBmdW5jdGlvbiBqcUxpdGVPbihlbGVtZW50LCB0eXBlLCBmbiwgdW5zdXBwb3J0ZWQpe1xyXG4gICAgaWYgKGlzRGVmaW5lZCh1bnN1cHBvcnRlZCkpIHRocm93IGpxTGl0ZU1pbkVycignb25hcmdzJywgJ2pxTGl0ZSNvbigpIGRvZXMgbm90IHN1cHBvcnQgdGhlIGBzZWxlY3RvcmAgb3IgYGV2ZW50RGF0YWAgcGFyYW1ldGVycycpO1xyXG5cclxuICAgIC8vIERvIG5vdCBhZGQgZXZlbnQgaGFuZGxlcnMgdG8gbm9uLWVsZW1lbnRzIGJlY2F1c2UgdGhleSB3aWxsIG5vdCBiZSBjbGVhbmVkIHVwLlxyXG4gICAgaWYgKCFqcUxpdGVBY2NlcHRzRGF0YShlbGVtZW50KSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCB0cnVlKTtcclxuICAgIHZhciBldmVudHMgPSBleHBhbmRvU3RvcmUuZXZlbnRzO1xyXG4gICAgdmFyIGhhbmRsZSA9IGV4cGFuZG9TdG9yZS5oYW5kbGU7XHJcblxyXG4gICAgaWYgKCFoYW5kbGUpIHtcclxuICAgICAgaGFuZGxlID0gZXhwYW5kb1N0b3JlLmhhbmRsZSA9IGNyZWF0ZUV2ZW50SGFuZGxlcihlbGVtZW50LCBldmVudHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3N0cmluZy1pbmRleG9mLXZzLXNwbGl0XHJcbiAgICB2YXIgdHlwZXMgPSB0eXBlLmluZGV4T2YoJyAnKSA+PSAwID8gdHlwZS5zcGxpdCgnICcpIDogW3R5cGVdO1xyXG4gICAgdmFyIGkgPSB0eXBlcy5sZW5ndGg7XHJcblxyXG4gICAgd2hpbGUgKGktLSkge1xyXG4gICAgICB0eXBlID0gdHlwZXNbaV07XHJcbiAgICAgIHZhciBldmVudEZucyA9IGV2ZW50c1t0eXBlXTtcclxuXHJcbiAgICAgIGlmICghZXZlbnRGbnMpIHtcclxuICAgICAgICBldmVudHNbdHlwZV0gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdtb3VzZWVudGVyJyB8fCB0eXBlID09PSAnbW91c2VsZWF2ZScpIHtcclxuICAgICAgICAgIC8vIFJlZmVyIHRvIGpRdWVyeSdzIGltcGxlbWVudGF0aW9uIG9mIG1vdXNlZW50ZXIgJiBtb3VzZWxlYXZlXHJcbiAgICAgICAgICAvLyBSZWFkIGFib3V0IG1vdXNlZW50ZXIgYW5kIG1vdXNlbGVhdmU6XHJcbiAgICAgICAgICAvLyBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2V2ZW50c19tb3VzZS5odG1sI2xpbms4XHJcblxyXG4gICAgICAgICAganFMaXRlT24oZWxlbWVudCwgTU9VU0VfRVZFTlRfTUFQW3R5cGVdLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcywgcmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7XHJcbiAgICAgICAgICAgIC8vIEZvciBtb3VzZW50ZXIvbGVhdmUgY2FsbCB0aGUgaGFuZGxlciBpZiByZWxhdGVkIGlzIG91dHNpZGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgLy8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcclxuICAgICAgICAgICAgaWYgKCAhcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGFyZ2V0ICYmICF0YXJnZXQuY29udGFpbnMocmVsYXRlZCkpICl7XHJcbiAgICAgICAgICAgICAgaGFuZGxlKGV2ZW50LCB0eXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAodHlwZSAhPT0gJyRkZXN0cm95Jykge1xyXG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyRm4oZWxlbWVudCwgdHlwZSwgaGFuZGxlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnRGbnMgPSBldmVudHNbdHlwZV07XHJcbiAgICAgIH1cclxuICAgICAgZXZlbnRGbnMucHVzaChmbik7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgb2ZmOiBqcUxpdGVPZmYsXHJcblxyXG4gIG9uZTogZnVuY3Rpb24oZWxlbWVudCwgdHlwZSwgZm4pIHtcclxuICAgIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XHJcblxyXG4gICAgLy9hZGQgdGhlIGxpc3RlbmVyIHR3aWNlIHNvIHRoYXQgd2hlbiBpdCBpcyBjYWxsZWRcclxuICAgIC8veW91IGNhbiByZW1vdmUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIGFuZCBzdGlsbCBiZVxyXG4gICAgLy9hYmxlIHRvIGNhbGwgZWxlbWVudC5vZmYoZXYsIGZuKSBub3JtYWxseVxyXG4gICAgZWxlbWVudC5vbih0eXBlLCBmdW5jdGlvbiBvbkZuKCkge1xyXG4gICAgICBlbGVtZW50Lm9mZih0eXBlLCBmbik7XHJcbiAgICAgIGVsZW1lbnQub2ZmKHR5cGUsIG9uRm4pO1xyXG4gICAgfSk7XHJcbiAgICBlbGVtZW50Lm9uKHR5cGUsIGZuKTtcclxuICB9LFxyXG5cclxuICByZXBsYWNlV2l0aDogZnVuY3Rpb24oZWxlbWVudCwgcmVwbGFjZU5vZGUpIHtcclxuICAgIHZhciBpbmRleCwgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAganFMaXRlRGVhbG9jKGVsZW1lbnQpO1xyXG4gICAgZm9yRWFjaChuZXcgSlFMaXRlKHJlcGxhY2VOb2RlKSwgZnVuY3Rpb24obm9kZSl7XHJcbiAgICAgIGlmIChpbmRleCkge1xyXG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgaW5kZXgubmV4dFNpYmxpbmcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobm9kZSwgZWxlbWVudCk7XHJcbiAgICAgIH1cclxuICAgICAgaW5kZXggPSBub2RlO1xyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgY2hpbGRyZW46IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIHZhciBjaGlsZHJlbiA9IFtdO1xyXG4gICAgZm9yRWFjaChlbGVtZW50LmNoaWxkTm9kZXMsIGZ1bmN0aW9uKGVsZW1lbnQpe1xyXG4gICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gMSlcclxuICAgICAgICBjaGlsZHJlbi5wdXNoKGVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gY2hpbGRyZW47XHJcbiAgfSxcclxuXHJcbiAgY29udGVudHM6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIHJldHVybiBlbGVtZW50LmNvbnRlbnREb2N1bWVudCB8fCBlbGVtZW50LmNoaWxkTm9kZXMgfHwgW107XHJcbiAgfSxcclxuXHJcbiAgYXBwZW5kOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7XHJcbiAgICB2YXIgbm9kZVR5cGUgPSBlbGVtZW50Lm5vZGVUeXBlO1xyXG4gICAgaWYgKG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSAxMSkgcmV0dXJuO1xyXG5cclxuICAgIG5vZGUgPSBuZXcgSlFMaXRlKG5vZGUpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5vZGUubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICB2YXIgY2hpbGQgPSBub2RlW2ldO1xyXG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBwcmVwZW5kOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7XHJcbiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gMSkge1xyXG4gICAgICB2YXIgaW5kZXggPSBlbGVtZW50LmZpcnN0Q2hpbGQ7XHJcbiAgICAgIGZvckVhY2gobmV3IEpRTGl0ZShub2RlKSwgZnVuY3Rpb24oY2hpbGQpe1xyXG4gICAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBpbmRleCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHdyYXA6IGZ1bmN0aW9uKGVsZW1lbnQsIHdyYXBOb2RlKSB7XHJcbiAgICB3cmFwTm9kZSA9IGpxTGl0ZSh3cmFwTm9kZSkuZXEoMCkuY2xvbmUoKVswXTtcclxuICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQod3JhcE5vZGUsIGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgd3JhcE5vZGUuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgfSxcclxuXHJcbiAgcmVtb3ZlOiBqcUxpdGVSZW1vdmUsXHJcblxyXG4gIGRldGFjaDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAganFMaXRlUmVtb3ZlKGVsZW1lbnQsIHRydWUpO1xyXG4gIH0sXHJcblxyXG4gIGFmdGVyOiBmdW5jdGlvbihlbGVtZW50LCBuZXdFbGVtZW50KSB7XHJcbiAgICB2YXIgaW5kZXggPSBlbGVtZW50LCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICBuZXdFbGVtZW50ID0gbmV3IEpRTGl0ZShuZXdFbGVtZW50KTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBuZXdFbGVtZW50Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgdmFyIG5vZGUgPSBuZXdFbGVtZW50W2ldO1xyXG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIGluZGV4Lm5leHRTaWJsaW5nKTtcclxuICAgICAgaW5kZXggPSBub2RlO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGFkZENsYXNzOiBqcUxpdGVBZGRDbGFzcyxcclxuICByZW1vdmVDbGFzczoganFMaXRlUmVtb3ZlQ2xhc3MsXHJcblxyXG4gIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3RvciwgY29uZGl0aW9uKSB7XHJcbiAgICBpZiAoc2VsZWN0b3IpIHtcclxuICAgICAgZm9yRWFjaChzZWxlY3Rvci5zcGxpdCgnICcpLCBmdW5jdGlvbihjbGFzc05hbWUpe1xyXG4gICAgICAgIHZhciBjbGFzc0NvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQoY2xhc3NDb25kaXRpb24pKSB7XHJcbiAgICAgICAgICBjbGFzc0NvbmRpdGlvbiA9ICFqcUxpdGVIYXNDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAoY2xhc3NDb25kaXRpb24gPyBqcUxpdGVBZGRDbGFzcyA6IGpxTGl0ZVJlbW92ZUNsYXNzKShlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBwYXJlbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xyXG4gIH0sXHJcblxyXG4gIG5leHQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIHJldHVybiBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZztcclxuICB9LFxyXG5cclxuICBmaW5kOiBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3Rvcikge1xyXG4gICAgaWYgKGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUpIHtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGNsb25lOiBqcUxpdGVDbG9uZSxcclxuXHJcbiAgdHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIGV2ZW50LCBleHRyYVBhcmFtZXRlcnMpIHtcclxuXHJcbiAgICB2YXIgZHVtbXlFdmVudCwgZXZlbnRGbnNDb3B5LCBoYW5kbGVyQXJncztcclxuICAgIHZhciBldmVudE5hbWUgPSBldmVudC50eXBlIHx8IGV2ZW50O1xyXG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50KTtcclxuICAgIHZhciBldmVudHMgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmV2ZW50cztcclxuICAgIHZhciBldmVudEZucyA9IGV2ZW50cyAmJiBldmVudHNbZXZlbnROYW1lXTtcclxuXHJcbiAgICBpZiAoZXZlbnRGbnMpIHtcclxuICAgICAgLy8gQ3JlYXRlIGEgZHVtbXkgZXZlbnQgdG8gcGFzcyB0byB0aGUgaGFuZGxlcnNcclxuICAgICAgZHVtbXlFdmVudCA9IHtcclxuICAgICAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7IHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7IH0sXHJcbiAgICAgICAgaXNEZWZhdWx0UHJldmVudGVkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdHJ1ZTsgfSxcclxuICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgeyB0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7IH0sXHJcbiAgICAgICAgaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPT09IHRydWU7IH0sXHJcbiAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBub29wLFxyXG4gICAgICAgIHR5cGU6IGV2ZW50TmFtZSxcclxuICAgICAgICB0YXJnZXQ6IGVsZW1lbnRcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIElmIGEgY3VzdG9tIGV2ZW50IHdhcyBwcm92aWRlZCB0aGVuIGV4dGVuZCBvdXIgZHVtbXkgZXZlbnQgd2l0aCBpdFxyXG4gICAgICBpZiAoZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGR1bW15RXZlbnQgPSBleHRlbmQoZHVtbXlFdmVudCwgZXZlbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDb3B5IGV2ZW50IGhhbmRsZXJzIGluIGNhc2UgZXZlbnQgaGFuZGxlcnMgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIGV4ZWN1dGlvbi5cclxuICAgICAgZXZlbnRGbnNDb3B5ID0gc2hhbGxvd0NvcHkoZXZlbnRGbnMpO1xyXG4gICAgICBoYW5kbGVyQXJncyA9IGV4dHJhUGFyYW1ldGVycyA/IFtkdW1teUV2ZW50XS5jb25jYXQoZXh0cmFQYXJhbWV0ZXJzKSA6IFtkdW1teUV2ZW50XTtcclxuXHJcbiAgICAgIGZvckVhY2goZXZlbnRGbnNDb3B5LCBmdW5jdGlvbihmbikge1xyXG4gICAgICAgIGlmICghZHVtbXlFdmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XHJcbiAgICAgICAgICBmbi5hcHBseShlbGVtZW50LCBoYW5kbGVyQXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKXtcclxuICAvKipcclxuICAgKiBjaGFpbmluZyBmdW5jdGlvbnNcclxuICAgKi9cclxuICBKUUxpdGUucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oYXJnMSwgYXJnMiwgYXJnMykge1xyXG4gICAgdmFyIHZhbHVlO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDAsIGlpID0gdGhpcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICB2YWx1ZSA9IGZuKHRoaXNbaV0sIGFyZzEsIGFyZzIsIGFyZzMpO1xyXG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgICAvLyBhbnkgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIHZhbHVlIG5lZWRzIHRvIGJlIHdyYXBwZWRcclxuICAgICAgICAgIHZhbHVlID0ganFMaXRlKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAganFMaXRlQWRkTm9kZXModmFsdWUsIGZuKHRoaXNbaV0sIGFyZzEsIGFyZzIsIGFyZzMpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzRGVmaW5lZCh2YWx1ZSkgPyB2YWx1ZSA6IHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLy8gYmluZCBsZWdhY3kgYmluZC91bmJpbmQgdG8gb24vb2ZmXHJcbiAgSlFMaXRlLnByb3RvdHlwZS5iaW5kID0gSlFMaXRlLnByb3RvdHlwZS5vbjtcclxuICBKUUxpdGUucHJvdG90eXBlLnVuYmluZCA9IEpRTGl0ZS5wcm90b3R5cGUub2ZmO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBDb21wdXRlcyBhIGhhc2ggb2YgYW4gJ29iaicuXHJcbiAqIEhhc2ggb2YgYTpcclxuICogIHN0cmluZyBpcyBzdHJpbmdcclxuICogIG51bWJlciBpcyBudW1iZXIgYXMgc3RyaW5nXHJcbiAqICBvYmplY3QgaXMgZWl0aGVyIHJlc3VsdCBvZiBjYWxsaW5nICQkaGFzaEtleSBmdW5jdGlvbiBvbiB0aGUgb2JqZWN0IG9yIHVuaXF1ZWx5IGdlbmVyYXRlZCBpZCxcclxuICogICAgICAgICB0aGF0IGlzIGFsc28gYXNzaWduZWQgdG8gdGhlICQkaGFzaEtleSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGhhc2ggc3RyaW5nIHN1Y2ggdGhhdCB0aGUgc2FtZSBpbnB1dCB3aWxsIGhhdmUgdGhlIHNhbWUgaGFzaCBzdHJpbmcuXHJcbiAqICAgICAgICAgVGhlIHJlc3VsdGluZyBzdHJpbmcga2V5IGlzIGluICd0eXBlOmhhc2hLZXknIGZvcm1hdC5cclxuICovXHJcbmZ1bmN0aW9uIGhhc2hLZXkob2JqLCBuZXh0VWlkRm4pIHtcclxuICB2YXIga2V5ID0gb2JqICYmIG9iai4kJGhhc2hLZXk7XHJcblxyXG4gIGlmIChrZXkpIHtcclxuICAgIGlmICh0eXBlb2Yga2V5ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGtleSA9IG9iai4kJGhhc2hLZXkoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBrZXk7XHJcbiAgfVxyXG5cclxuICB2YXIgb2JqVHlwZSA9IHR5cGVvZiBvYmo7XHJcbiAgaWYgKG9ialR5cGUgPT0gJ2Z1bmN0aW9uJyB8fCAob2JqVHlwZSA9PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwpKSB7XHJcbiAgICBrZXkgPSBvYmouJCRoYXNoS2V5ID0gb2JqVHlwZSArICc6JyArIChuZXh0VWlkRm4gfHwgbmV4dFVpZCkoKTtcclxuICB9IGVsc2Uge1xyXG4gICAga2V5ID0gb2JqVHlwZSArICc6JyArIG9iajtcclxuICB9XHJcblxyXG4gIHJldHVybiBrZXk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYXNoTWFwIHdoaWNoIGNhbiB1c2Ugb2JqZWN0cyBhcyBrZXlzXHJcbiAqL1xyXG5mdW5jdGlvbiBIYXNoTWFwKGFycmF5LCBpc29sYXRlZFVpZCkge1xyXG4gIGlmIChpc29sYXRlZFVpZCkge1xyXG4gICAgdmFyIHVpZCA9IDA7XHJcbiAgICB0aGlzLm5leHRVaWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuICsrdWlkO1xyXG4gICAgfTtcclxuICB9XHJcbiAgZm9yRWFjaChhcnJheSwgdGhpcy5wdXQsIHRoaXMpO1xyXG59XHJcbkhhc2hNYXAucHJvdG90eXBlID0ge1xyXG4gIC8qKlxyXG4gICAqIFN0b3JlIGtleSB2YWx1ZSBwYWlyXHJcbiAgICogQHBhcmFtIGtleSBrZXkgdG8gc3RvcmUgY2FuIGJlIGFueSB0eXBlXHJcbiAgICogQHBhcmFtIHZhbHVlIHZhbHVlIHRvIHN0b3JlIGNhbiBiZSBhbnkgdHlwZVxyXG4gICAqL1xyXG4gIHB1dDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgdGhpc1toYXNoS2V5KGtleSwgdGhpcy5uZXh0VWlkKV0gPSB2YWx1ZTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ga2V5XHJcbiAgICogQHJldHVybnMge09iamVjdH0gdGhlIHZhbHVlIGZvciB0aGUga2V5XHJcbiAgICovXHJcbiAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcclxuICAgIHJldHVybiB0aGlzW2hhc2hLZXkoa2V5LCB0aGlzLm5leHRVaWQpXTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgdGhlIGtleS92YWx1ZSBwYWlyXHJcbiAgICogQHBhcmFtIGtleVxyXG4gICAqL1xyXG4gIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7XHJcbiAgICB2YXIgdmFsdWUgPSB0aGlzW2tleSA9IGhhc2hLZXkoa2V5LCB0aGlzLm5leHRVaWQpXTtcclxuICAgIGRlbGV0ZSB0aGlzW2tleV07XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBuYW1lIGFuZ3VsYXIuaW5qZWN0b3JcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIENyZWF0ZXMgYW4gaW5qZWN0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCBmb3IgcmV0cmlldmluZyBzZXJ2aWNlcyBhcyB3ZWxsIGFzIGZvclxyXG4gKiBkZXBlbmRlbmN5IGluamVjdGlvbiAoc2VlIHtAbGluayBndWlkZS9kaSBkZXBlbmRlbmN5IGluamVjdGlvbn0pLlxyXG4gKlxyXG5cclxuICogQHBhcmFtIHtBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gbW9kdWxlcyBBIGxpc3Qgb2YgbW9kdWxlIGZ1bmN0aW9ucyBvciB0aGVpciBhbGlhc2VzLiBTZWVcclxuICogICAgICAgIHtAbGluayBhbmd1bGFyLm1vZHVsZX0uIFRoZSBgbmdgIG1vZHVsZSBtdXN0IGJlIGV4cGxpY2l0bHkgYWRkZWQuXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBJbmplY3RvciBmdW5jdGlvbi4gU2VlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBUeXBpY2FsIHVzYWdlXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gY3JlYXRlIGFuIGluamVjdG9yXHJcbiAqICAgdmFyICRpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoWyduZyddKTtcclxuICpcclxuICogICAvLyB1c2UgdGhlIGluamVjdG9yIHRvIGtpY2sgb2ZmIHlvdXIgYXBwbGljYXRpb25cclxuICogICAvLyB1c2UgdGhlIHR5cGUgaW5mZXJlbmNlIHRvIGF1dG8gaW5qZWN0IGFyZ3VtZW50cywgb3IgdXNlIGltcGxpY2l0IGluamVjdGlvblxyXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oJHJvb3RTY29wZSwgJGNvbXBpbGUsICRkb2N1bWVudCkge1xyXG4gKiAgICAgJGNvbXBpbGUoJGRvY3VtZW50KSgkcm9vdFNjb3BlKTtcclxuICogICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogU29tZXRpbWVzIHlvdSB3YW50IHRvIGdldCBhY2Nlc3MgdG8gdGhlIGluamVjdG9yIG9mIGEgY3VycmVudGx5IHJ1bm5pbmcgQW5ndWxhciBhcHBcclxuICogZnJvbSBvdXRzaWRlIEFuZ3VsYXIuIFBlcmhhcHMsIHlvdSB3YW50IHRvIGluamVjdCBhbmQgY29tcGlsZSBzb21lIG1hcmt1cCBhZnRlciB0aGVcclxuICogYXBwbGljYXRpb24gaGFzIGJlZW4gYm9vdHN0cmFwcGVkLiBZb3UgY2FuIGRvIHRoaXMgdXNpbmcgdGhlIGV4dHJhIGBpbmplY3RvcigpYCBhZGRlZFxyXG4gKiB0byBKUXVlcnkvanFMaXRlIGVsZW1lbnRzLiBTZWUge0BsaW5rIGFuZ3VsYXIuZWxlbWVudH0uXHJcbiAqXHJcbiAqICpUaGlzIGlzIGZhaXJseSByYXJlIGJ1dCBjb3VsZCBiZSB0aGUgY2FzZSBpZiBhIHRoaXJkIHBhcnR5IGxpYnJhcnkgaXMgaW5qZWN0aW5nIHRoZVxyXG4gKiBtYXJrdXAuKlxyXG4gKlxyXG4gKiBJbiB0aGUgZm9sbG93aW5nIGV4YW1wbGUgYSBuZXcgYmxvY2sgb2YgSFRNTCBjb250YWluaW5nIGEgYG5nLWNvbnRyb2xsZXJgXHJcbiAqIGRpcmVjdGl2ZSBpcyBhZGRlZCB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCBib2R5IGJ5IEpRdWVyeS4gV2UgdGhlbiBjb21waWxlIGFuZCBsaW5rXHJcbiAqIGl0IGludG8gdGhlIGN1cnJlbnQgQW5ndWxhckpTIHNjb3BlLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiB2YXIgJGRpdiA9ICQoJzxkaXYgbmctY29udHJvbGxlcj1cIk15Q3RybFwiPnt7Y29udGVudC5sYWJlbH19PC9kaXY+Jyk7XHJcbiAqICQoZG9jdW1lbnQuYm9keSkuYXBwZW5kKCRkaXYpO1xyXG4gKlxyXG4gKiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmluamVjdG9yKCkuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlKSB7XHJcbiAqICAgdmFyIHNjb3BlID0gYW5ndWxhci5lbGVtZW50KCRkaXYpLnNjb3BlKCk7XHJcbiAqICAgJGNvbXBpbGUoJGRpdikoc2NvcGUpO1xyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbW9kdWxlXHJcbiAqIEBuYW1lIGF1dG9cclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIEltcGxpY2l0IG1vZHVsZSB3aGljaCBnZXRzIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gZWFjaCB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cclxuICovXHJcblxyXG52YXIgRk5fQVJHUyA9IC9eZnVuY3Rpb25cXHMqW15cXChdKlxcKFxccyooW15cXCldKilcXCkvbTtcclxudmFyIEZOX0FSR19TUExJVCA9IC8sLztcclxudmFyIEZOX0FSRyA9IC9eXFxzKihfPykoXFxTKz8pXFwxXFxzKiQvO1xyXG52YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWc7XHJcbnZhciAkaW5qZWN0b3JNaW5FcnIgPSBtaW5FcnIoJyRpbmplY3RvcicpO1xyXG5cclxuZnVuY3Rpb24gYW5vbkZuKGZuKSB7XHJcbiAgLy8gRm9yIGFub255bW91cyBmdW5jdGlvbnMsIHNob3dpbmcgYXQgdGhlIHZlcnkgbGVhc3QgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBjYW4gaGVscCBpblxyXG4gIC8vIGRlYnVnZ2luZy5cclxuICB2YXIgZm5UZXh0ID0gZm4udG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyksXHJcbiAgICAgIGFyZ3MgPSBmblRleHQubWF0Y2goRk5fQVJHUyk7XHJcbiAgaWYgKGFyZ3MpIHtcclxuICAgIHJldHVybiAnZnVuY3Rpb24oJyArIChhcmdzWzFdIHx8ICcnKS5yZXBsYWNlKC9bXFxzXFxyXFxuXSsvLCAnICcpICsgJyknO1xyXG4gIH1cclxuICByZXR1cm4gJ2ZuJztcclxufVxyXG5cclxuZnVuY3Rpb24gYW5ub3RhdGUoZm4sIHN0cmljdERpLCBuYW1lKSB7XHJcbiAgdmFyICRpbmplY3QsXHJcbiAgICAgIGZuVGV4dCxcclxuICAgICAgYXJnRGVjbCxcclxuICAgICAgbGFzdDtcclxuXHJcbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgaWYgKCEoJGluamVjdCA9IGZuLiRpbmplY3QpKSB7XHJcbiAgICAgICRpbmplY3QgPSBbXTtcclxuICAgICAgaWYgKGZuLmxlbmd0aCkge1xyXG4gICAgICAgIGlmIChzdHJpY3REaSkge1xyXG4gICAgICAgICAgaWYgKCFpc1N0cmluZyhuYW1lKSB8fCAhbmFtZSkge1xyXG4gICAgICAgICAgICBuYW1lID0gZm4ubmFtZSB8fCBhbm9uRm4oZm4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdzdHJpY3RkaScsXHJcbiAgICAgICAgICAgICd7MH0gaXMgbm90IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gYW5kIGNhbm5vdCBiZSBpbnZva2VkIGluIHN0cmljdCBtb2RlJywgbmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZuVGV4dCA9IGZuLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywgJycpO1xyXG4gICAgICAgIGFyZ0RlY2wgPSBmblRleHQubWF0Y2goRk5fQVJHUyk7XHJcbiAgICAgICAgZm9yRWFjaChhcmdEZWNsWzFdLnNwbGl0KEZOX0FSR19TUExJVCksIGZ1bmN0aW9uKGFyZykge1xyXG4gICAgICAgICAgYXJnLnJlcGxhY2UoRk5fQVJHLCBmdW5jdGlvbihhbGwsIHVuZGVyc2NvcmUsIG5hbWUpIHtcclxuICAgICAgICAgICAgJGluamVjdC5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZm4uJGluamVjdCA9ICRpbmplY3Q7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChpc0FycmF5KGZuKSkge1xyXG4gICAgbGFzdCA9IGZuLmxlbmd0aCAtIDE7XHJcbiAgICBhc3NlcnRBcmdGbihmbltsYXN0XSwgJ2ZuJyk7XHJcbiAgICAkaW5qZWN0ID0gZm4uc2xpY2UoMCwgbGFzdCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFzc2VydEFyZ0ZuKGZuLCAnZm4nLCB0cnVlKTtcclxuICB9XHJcbiAgcmV0dXJuICRpbmplY3Q7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRpbmplY3RvclxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogYCRpbmplY3RvcmAgaXMgdXNlZCB0byByZXRyaWV2ZSBvYmplY3QgaW5zdGFuY2VzIGFzIGRlZmluZWQgYnlcclxuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUgcHJvdmlkZXJ9LCBpbnN0YW50aWF0ZSB0eXBlcywgaW52b2tlIG1ldGhvZHMsXHJcbiAqIGFuZCBsb2FkIG1vZHVsZXMuXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgYWx3YXlzIGhvbGRzIHRydWU6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgdmFyICRpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoKTtcclxuICogICBleHBlY3QoJGluamVjdG9yLmdldCgnJGluamVjdG9yJykpLnRvQmUoJGluamVjdG9yKTtcclxuICogICBleHBlY3QoJGluamVjdG9yLmludm9rZShmdW5jdGlvbigkaW5qZWN0b3IpIHtcclxuICogICAgIHJldHVybiAkaW5qZWN0b3I7XHJcbiAqICAgfSkudG9CZSgkaW5qZWN0b3IpO1xyXG4gKiBgYGBcclxuICpcclxuICogIyBJbmplY3Rpb24gRnVuY3Rpb24gQW5ub3RhdGlvblxyXG4gKlxyXG4gKiBKYXZhU2NyaXB0IGRvZXMgbm90IGhhdmUgYW5ub3RhdGlvbnMsIGFuZCBhbm5vdGF0aW9ucyBhcmUgbmVlZGVkIGZvciBkZXBlbmRlbmN5IGluamVjdGlvbi4gVGhlXHJcbiAqIGZvbGxvd2luZyBhcmUgYWxsIHZhbGlkIHdheXMgb2YgYW5ub3RhdGluZyBmdW5jdGlvbiB3aXRoIGluamVjdGlvbiBhcmd1bWVudHMgYW5kIGFyZSBlcXVpdmFsZW50LlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIC8vIGluZmVycmVkIChvbmx5IHdvcmtzIGlmIGNvZGUgbm90IG1pbmlmaWVkL29iZnVzY2F0ZWQpXHJcbiAqICAgJGluamVjdG9yLmludm9rZShmdW5jdGlvbihzZXJ2aWNlQSl7fSk7XHJcbiAqXHJcbiAqICAgLy8gYW5ub3RhdGVkXHJcbiAqICAgZnVuY3Rpb24gZXhwbGljaXQoc2VydmljZUEpIHt9O1xyXG4gKiAgIGV4cGxpY2l0LiRpbmplY3QgPSBbJ3NlcnZpY2VBJ107XHJcbiAqICAgJGluamVjdG9yLmludm9rZShleHBsaWNpdCk7XHJcbiAqXHJcbiAqICAgLy8gaW5saW5lXHJcbiAqICAgJGluamVjdG9yLmludm9rZShbJ3NlcnZpY2VBJywgZnVuY3Rpb24oc2VydmljZUEpe31dKTtcclxuICogYGBgXHJcbiAqXHJcbiAqICMjIEluZmVyZW5jZVxyXG4gKlxyXG4gKiBJbiBKYXZhU2NyaXB0IGNhbGxpbmcgYHRvU3RyaW5nKClgIG9uIGEgZnVuY3Rpb24gcmV0dXJucyB0aGUgZnVuY3Rpb24gZGVmaW5pdGlvbi4gVGhlIGRlZmluaXRpb25cclxuICogY2FuIHRoZW4gYmUgcGFyc2VkIGFuZCB0aGUgZnVuY3Rpb24gYXJndW1lbnRzIGNhbiBiZSBleHRyYWN0ZWQuICpOT1RFOiogVGhpcyBkb2VzIG5vdCB3b3JrIHdpdGhcclxuICogbWluaWZpY2F0aW9uLCBhbmQgb2JmdXNjYXRpb24gdG9vbHMgc2luY2UgdGhlc2UgdG9vbHMgY2hhbmdlIHRoZSBhcmd1bWVudCBuYW1lcy5cclxuICpcclxuICogIyMgYCRpbmplY3RgIEFubm90YXRpb25cclxuICogQnkgYWRkaW5nIGFuIGAkaW5qZWN0YCBwcm9wZXJ0eSBvbnRvIGEgZnVuY3Rpb24gdGhlIGluamVjdGlvbiBwYXJhbWV0ZXJzIGNhbiBiZSBzcGVjaWZpZWQuXHJcbiAqXHJcbiAqICMjIElubGluZVxyXG4gKiBBcyBhbiBhcnJheSBvZiBpbmplY3Rpb24gbmFtZXMsIHdoZXJlIHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGFycmF5IGlzIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRpbmplY3RvciNnZXRcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFJldHVybiBhbiBpbnN0YW5jZSBvZiB0aGUgc2VydmljZS5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlIHRvIHJldHJpZXZlLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgaW5zdGFuY2UuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJGluamVjdG9yI2ludm9rZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogSW52b2tlIHRoZSBtZXRob2QgYW5kIHN1cHBseSB0aGUgbWV0aG9kIGFyZ3VtZW50cyBmcm9tIHRoZSBgJGluamVjdG9yYC5cclxuICpcclxuICogQHBhcmFtIHshRnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuIEZ1bmN0aW9uIHBhcmFtZXRlcnMgYXJlIGluamVjdGVkIGFjY29yZGluZyB0byB0aGVcclxuICogICB7QGxpbmsgZ3VpZGUvZGkgJGluamVjdCBBbm5vdGF0aW9ufSBydWxlcy5cclxuICogQHBhcmFtIHtPYmplY3Q9fSBzZWxmIFRoZSBgdGhpc2AgZm9yIHRoZSBpbnZva2VkIG1ldGhvZC5cclxuICogQHBhcmFtIHtPYmplY3Q9fSBsb2NhbHMgT3B0aW9uYWwgb2JqZWN0LiBJZiBwcmVzZXQgdGhlbiBhbnkgYXJndW1lbnQgbmFtZXMgYXJlIHJlYWQgZnJvbSB0aGlzXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCBmaXJzdCwgYmVmb3JlIHRoZSBgJGluamVjdG9yYCBpcyBjb25zdWx0ZWQuXHJcbiAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGludm9rZWQgYGZuYCBmdW5jdGlvbi5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkaW5qZWN0b3IjaGFzXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcXVlcnkgaWYgdGhlIHBhcnRpY3VsYXIgc2VydmljZSBleGlzdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBOYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIHF1ZXJ5LlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gcmV0dXJucyB0cnVlIGlmIGluamVjdG9yIGhhcyBnaXZlbiBzZXJ2aWNlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRpbmplY3RvciNpbnN0YW50aWF0ZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEpTIHR5cGUuIFRoZSBtZXRob2QgdGFrZXMgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiwgaW52b2tlcyB0aGUgbmV3XHJcbiAqIG9wZXJhdG9yLCBhbmQgc3VwcGxpZXMgYWxsIG9mIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGFzIHNwZWNpZmllZCBieSB0aGVcclxuICogY29uc3RydWN0b3IgYW5ub3RhdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gVHlwZSBBbm5vdGF0ZWQgY29uc3RydWN0b3IgZnVuY3Rpb24uXHJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gbG9jYWxzIE9wdGlvbmFsIG9iamVjdC4gSWYgcHJlc2V0IHRoZW4gYW55IGFyZ3VtZW50IG5hbWVzIGFyZSByZWFkIGZyb20gdGhpc1xyXG4gKiBvYmplY3QgZmlyc3QsIGJlZm9yZSB0aGUgYCRpbmplY3RvcmAgaXMgY29uc3VsdGVkLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBuZXcgaW5zdGFuY2Ugb2YgYFR5cGVgLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRpbmplY3RvciNhbm5vdGF0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogUmV0dXJucyBhbiBhcnJheSBvZiBzZXJ2aWNlIG5hbWVzIHdoaWNoIHRoZSBmdW5jdGlvbiBpcyByZXF1ZXN0aW5nIGZvciBpbmplY3Rpb24uIFRoaXMgQVBJIGlzXHJcbiAqIHVzZWQgYnkgdGhlIGluamVjdG9yIHRvIGRldGVybWluZSB3aGljaCBzZXJ2aWNlcyBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGZ1bmN0aW9uIHdoZW4gdGhlXHJcbiAqIGZ1bmN0aW9uIGlzIGludm9rZWQuIFRoZXJlIGFyZSB0aHJlZSB3YXlzIGluIHdoaWNoIHRoZSBmdW5jdGlvbiBjYW4gYmUgYW5ub3RhdGVkIHdpdGggdGhlIG5lZWRlZFxyXG4gKiBkZXBlbmRlbmNpZXMuXHJcbiAqXHJcbiAqICMgQXJndW1lbnQgbmFtZXNcclxuICpcclxuICogVGhlIHNpbXBsZXN0IGZvcm0gaXMgdG8gZXh0cmFjdCB0aGUgZGVwZW5kZW5jaWVzIGZyb20gdGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24uIFRoaXMgaXMgZG9uZVxyXG4gKiBieSBjb252ZXJ0aW5nIHRoZSBmdW5jdGlvbiBpbnRvIGEgc3RyaW5nIHVzaW5nIGB0b1N0cmluZygpYCBtZXRob2QgYW5kIGV4dHJhY3RpbmcgdGhlIGFyZ3VtZW50XHJcbiAqIG5hbWVzLlxyXG4gKiBgYGBqc1xyXG4gKiAgIC8vIEdpdmVuXHJcbiAqICAgZnVuY3Rpb24gTXlDb250cm9sbGVyKCRzY29wZSwgJHJvdXRlKSB7XHJcbiAqICAgICAvLyAuLi5cclxuICogICB9XHJcbiAqXHJcbiAqICAgLy8gVGhlblxyXG4gKiAgIGV4cGVjdChpbmplY3Rvci5hbm5vdGF0ZShNeUNvbnRyb2xsZXIpKS50b0VxdWFsKFsnJHNjb3BlJywgJyRyb3V0ZSddKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHdvcmsgd2l0aCBjb2RlIG1pbmlmaWNhdGlvbiAvIG9iZnVzY2F0aW9uLiBGb3IgdGhpcyByZWFzb24gdGhlIGZvbGxvd2luZ1xyXG4gKiBhbm5vdGF0aW9uIHN0cmF0ZWdpZXMgYXJlIHN1cHBvcnRlZC5cclxuICpcclxuICogIyBUaGUgYCRpbmplY3RgIHByb3BlcnR5XHJcbiAqXHJcbiAqIElmIGEgZnVuY3Rpb24gaGFzIGFuIGAkaW5qZWN0YCBwcm9wZXJ0eSBhbmQgaXRzIHZhbHVlIGlzIGFuIGFycmF5IG9mIHN0cmluZ3MsIHRoZW4gdGhlIHN0cmluZ3NcclxuICogcmVwcmVzZW50IG5hbWVzIG9mIHNlcnZpY2VzIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGZ1bmN0aW9uLlxyXG4gKiBgYGBqc1xyXG4gKiAgIC8vIEdpdmVuXHJcbiAqICAgdmFyIE15Q29udHJvbGxlciA9IGZ1bmN0aW9uKG9iZnVzY2F0ZWRTY29wZSwgb2JmdXNjYXRlZFJvdXRlKSB7XHJcbiAqICAgICAvLyAuLi5cclxuICogICB9XHJcbiAqICAgLy8gRGVmaW5lIGZ1bmN0aW9uIGRlcGVuZGVuY2llc1xyXG4gKiAgIE15Q29udHJvbGxlclsnJGluamVjdCddID0gWyckc2NvcGUnLCAnJHJvdXRlJ107XHJcbiAqXHJcbiAqICAgLy8gVGhlblxyXG4gKiAgIGV4cGVjdChpbmplY3Rvci5hbm5vdGF0ZShNeUNvbnRyb2xsZXIpKS50b0VxdWFsKFsnJHNjb3BlJywgJyRyb3V0ZSddKTtcclxuICogYGBgXHJcbiAqXHJcbiAqICMgVGhlIGFycmF5IG5vdGF0aW9uXHJcbiAqXHJcbiAqIEl0IGlzIG9mdGVuIGRlc2lyYWJsZSB0byBpbmxpbmUgSW5qZWN0ZWQgZnVuY3Rpb25zIGFuZCB0aGF0J3Mgd2hlbiBzZXR0aW5nIHRoZSBgJGluamVjdGAgcHJvcGVydHlcclxuICogaXMgdmVyeSBpbmNvbnZlbmllbnQuIEluIHRoZXNlIHNpdHVhdGlvbnMgdXNpbmcgdGhlIGFycmF5IG5vdGF0aW9uIHRvIHNwZWNpZnkgdGhlIGRlcGVuZGVuY2llcyBpblxyXG4gKiBhIHdheSB0aGF0IHN1cnZpdmVzIG1pbmlmaWNhdGlvbiBpcyBhIGJldHRlciBjaG9pY2U6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gV2Ugd2lzaCB0byB3cml0ZSB0aGlzIChub3QgbWluaWZpY2F0aW9uIC8gb2JmdXNjYXRpb24gc2FmZSlcclxuICogICBpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oJGNvbXBpbGUsICRyb290U2NvcGUpIHtcclxuICogICAgIC8vIC4uLlxyXG4gKiAgIH0pO1xyXG4gKlxyXG4gKiAgIC8vIFdlIGFyZSBmb3JjZWQgdG8gd3JpdGUgYnJlYWsgaW5saW5pbmdcclxuICogICB2YXIgdG1wRm4gPSBmdW5jdGlvbihvYmZ1c2NhdGVkQ29tcGlsZSwgb2JmdXNjYXRlZFJvb3RTY29wZSkge1xyXG4gKiAgICAgLy8gLi4uXHJcbiAqICAgfTtcclxuICogICB0bXBGbi4kaW5qZWN0ID0gWyckY29tcGlsZScsICckcm9vdFNjb3BlJ107XHJcbiAqICAgaW5qZWN0b3IuaW52b2tlKHRtcEZuKTtcclxuICpcclxuICogICAvLyBUbyBiZXR0ZXIgc3VwcG9ydCBpbmxpbmUgZnVuY3Rpb24gdGhlIGlubGluZSBhbm5vdGF0aW9uIGlzIHN1cHBvcnRlZFxyXG4gKiAgIGluamVjdG9yLmludm9rZShbJyRjb21waWxlJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbihvYmZDb21waWxlLCBvYmZSb290U2NvcGUpIHtcclxuICogICAgIC8vIC4uLlxyXG4gKiAgIH1dKTtcclxuICpcclxuICogICAvLyBUaGVyZWZvcmVcclxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoXHJcbiAqICAgICAgWyckY29tcGlsZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24ob2JmdXNfJGNvbXBpbGUsIG9iZnVzXyRyb290U2NvcGUpIHt9XSlcclxuICogICAgKS50b0VxdWFsKFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZSddKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb258QXJyYXkuPHN0cmluZ3xGdW5jdGlvbj59IGZuIEZ1bmN0aW9uIGZvciB3aGljaCBkZXBlbmRlbnQgc2VydmljZSBuYW1lcyBuZWVkIHRvXHJcbiAqIGJlIHJldHJpZXZlZCBhcyBkZXNjcmliZWQgYWJvdmUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtBcnJheS48c3RyaW5nPn0gVGhlIG5hbWVzIG9mIHRoZSBzZXJ2aWNlcyB3aGljaCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXHJcbiAqL1xyXG5cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRwcm92aWRlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBUaGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGEgbnVtYmVyIG9mIG1ldGhvZHMgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudHNcclxuICogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIE1hbnkgb2YgdGhlc2UgZnVuY3Rpb25zIGFyZSBhbHNvIGV4cG9zZWQgb25cclxuICoge0BsaW5rIGFuZ3VsYXIuTW9kdWxlfS5cclxuICpcclxuICogQW4gQW5ndWxhciAqKnNlcnZpY2UqKiBpcyBhIHNpbmdsZXRvbiBvYmplY3QgY3JlYXRlZCBieSBhICoqc2VydmljZSBmYWN0b3J5KiouICBUaGVzZSAqKnNlcnZpY2VcclxuICogZmFjdG9yaWVzKiogYXJlIGZ1bmN0aW9ucyB3aGljaCwgaW4gdHVybiwgYXJlIGNyZWF0ZWQgYnkgYSAqKnNlcnZpY2UgcHJvdmlkZXIqKi5cclxuICogVGhlICoqc2VydmljZSBwcm92aWRlcnMqKiBhcmUgY29uc3RydWN0b3IgZnVuY3Rpb25zLiBXaGVuIGluc3RhbnRpYXRlZCB0aGV5IG11c3QgY29udGFpbiBhXHJcbiAqIHByb3BlcnR5IGNhbGxlZCBgJGdldGAsIHdoaWNoIGhvbGRzIHRoZSAqKnNlcnZpY2UgZmFjdG9yeSoqIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBXaGVuIHlvdSByZXF1ZXN0IGEgc2VydmljZSwgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9IGlzIHJlc3BvbnNpYmxlIGZvciBmaW5kaW5nIHRoZVxyXG4gKiBjb3JyZWN0ICoqc2VydmljZSBwcm92aWRlcioqLCBpbnN0YW50aWF0aW5nIGl0IGFuZCB0aGVuIGNhbGxpbmcgaXRzIGAkZ2V0YCAqKnNlcnZpY2UgZmFjdG9yeSoqXHJcbiAqIGZ1bmN0aW9uIHRvIGdldCB0aGUgaW5zdGFuY2Ugb2YgdGhlICoqc2VydmljZSoqLlxyXG4gKlxyXG4gKiBPZnRlbiBzZXJ2aWNlcyBoYXZlIG5vIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBhbmQgdGhlcmUgaXMgbm8gbmVlZCB0byBhZGQgbWV0aG9kcyB0byB0aGUgc2VydmljZVxyXG4gKiBwcm92aWRlci4gIFRoZSBwcm92aWRlciB3aWxsIGJlIG5vIG1vcmUgdGhhbiBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHdpdGggYSBgJGdldGAgcHJvcGVydHkuIEZvclxyXG4gKiB0aGVzZSBjYXNlcyB0aGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHMgdG8gcmVnaXN0ZXJcclxuICogc2VydmljZXMgd2l0aG91dCBzcGVjaWZ5aW5nIGEgcHJvdmlkZXIuXHJcbiAqXHJcbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgcHJvdmlkZXIocHJvdmlkZXIpfSAtIHJlZ2lzdGVycyBhICoqc2VydmljZSBwcm92aWRlcioqIHdpdGggdGhlXHJcbiAqICAgICB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfVxyXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2NvbnN0YW50IGNvbnN0YW50KG9iail9IC0gcmVnaXN0ZXJzIGEgdmFsdWUvb2JqZWN0IHRoYXQgY2FuIGJlIGFjY2Vzc2VkIGJ5XHJcbiAqICAgICBwcm92aWRlcnMgYW5kIHNlcnZpY2VzLlxyXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlKG9iail9IC0gcmVnaXN0ZXJzIGEgdmFsdWUvb2JqZWN0IHRoYXQgY2FuIG9ubHkgYmUgYWNjZXNzZWQgYnlcclxuICogICAgIHNlcnZpY2VzLCBub3QgcHJvdmlkZXJzLlxyXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2ZhY3RvcnkgZmFjdG9yeShmbil9IC0gcmVnaXN0ZXJzIGEgc2VydmljZSAqKmZhY3RvcnkgZnVuY3Rpb24qKiwgYGZuYCxcclxuICogICAgIHRoYXQgd2lsbCBiZSB3cmFwcGVkIGluIGEgKipzZXJ2aWNlIHByb3ZpZGVyKiogb2JqZWN0LCB3aG9zZSBgJGdldGAgcHJvcGVydHkgd2lsbCBjb250YWluIHRoZVxyXG4gKiAgICAgZ2l2ZW4gZmFjdG9yeSBmdW5jdGlvbi5cclxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlIHNlcnZpY2UoY2xhc3MpfSAtIHJlZ2lzdGVycyBhICoqY29uc3RydWN0b3IgZnVuY3Rpb24qKiwgYGNsYXNzYFxyXG4gKiAgICAgdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSAqKnNlcnZpY2UgcHJvdmlkZXIqKiBvYmplY3QsIHdob3NlIGAkZ2V0YCBwcm9wZXJ0eSB3aWxsIGluc3RhbnRpYXRlXHJcbiAqICAgICAgYSBuZXcgb2JqZWN0IHVzaW5nIHRoZSBnaXZlbiBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cclxuICpcclxuICogU2VlIHRoZSBpbmRpdmlkdWFsIG1ldGhvZHMgZm9yIG1vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRwcm92aWRlI3Byb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBSZWdpc3RlciBhICoqcHJvdmlkZXIgZnVuY3Rpb24qKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gUHJvdmlkZXIgZnVuY3Rpb25zXHJcbiAqIGFyZSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMsIHdob3NlIGluc3RhbmNlcyBhcmUgcmVzcG9uc2libGUgZm9yIFwicHJvdmlkaW5nXCIgYSBmYWN0b3J5IGZvciBhXHJcbiAqIHNlcnZpY2UuXHJcbiAqXHJcbiAqIFNlcnZpY2UgcHJvdmlkZXIgbmFtZXMgc3RhcnQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgc2VydmljZSB0aGV5IHByb3ZpZGUgZm9sbG93ZWQgYnkgYFByb3ZpZGVyYC5cclxuICogRm9yIGV4YW1wbGUsIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIGhhcyBhIHByb3ZpZGVyIGNhbGxlZFxyXG4gKiB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyICRsb2dQcm92aWRlcn0uXHJcbiAqXHJcbiAqIFNlcnZpY2UgcHJvdmlkZXIgb2JqZWN0cyBjYW4gaGF2ZSBhZGRpdGlvbmFsIG1ldGhvZHMgd2hpY2ggYWxsb3cgY29uZmlndXJhdGlvbiBvZiB0aGUgcHJvdmlkZXJcclxuICogYW5kIGl0cyBzZXJ2aWNlLiBJbXBvcnRhbnRseSwgeW91IGNhbiBjb25maWd1cmUgd2hhdCBraW5kIG9mIHNlcnZpY2UgaXMgY3JlYXRlZCBieSB0aGUgYCRnZXRgXHJcbiAqIG1ldGhvZCwgb3IgaG93IHRoYXQgc2VydmljZSB3aWxsIGFjdC4gRm9yIGV4YW1wbGUsIHRoZSB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyICRsb2dQcm92aWRlcn0gaGFzIGFcclxuICogbWV0aG9kIHtAbGluayBuZy4kbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkIGRlYnVnRW5hYmxlZH1cclxuICogd2hpY2ggbGV0cyB5b3Ugc3BlY2lmeSB3aGV0aGVyIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIHdpbGwgbG9nIGRlYnVnIG1lc3NhZ2VzIHRvIHRoZVxyXG4gKiBjb25zb2xlIG9yIG5vdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLiBOT1RFOiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBhdmFpbGFibGUgdW5kZXIgYG5hbWUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnUHJvdmlkZXInYCBrZXkuXHJcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbigpKX0gcHJvdmlkZXIgSWYgdGhlIHByb3ZpZGVyIGlzOlxyXG4gKlxyXG4gKiAgIC0gYE9iamVjdGA6IHRoZW4gaXQgc2hvdWxkIGhhdmUgYSBgJGdldGAgbWV0aG9kLiBUaGUgYCRnZXRgIG1ldGhvZCB3aWxsIGJlIGludm9rZWQgdXNpbmdcclxuICogICAgIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgJGluamVjdG9yLmludm9rZSgpfSB3aGVuIGFuIGluc3RhbmNlIG5lZWRzIHRvIGJlIGNyZWF0ZWQuXHJcbiAqICAgLSBgQ29uc3RydWN0b3JgOiBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBjcmVhdGVkIHVzaW5nXHJcbiAqICAgICB7QGxpbmsgYXV0by4kaW5qZWN0b3IjaW5zdGFudGlhdGUgJGluamVjdG9yLmluc3RhbnRpYXRlKCl9LCB0aGVuIHRyZWF0ZWQgYXMgYG9iamVjdGAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcclxuXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gY3JlYXRlIGEgc2ltcGxlIGV2ZW50IHRyYWNraW5nIHNlcnZpY2UgYW5kIHJlZ2lzdGVyIGl0IHVzaW5nXHJcbiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3Byb3ZpZGVyICRwcm92aWRlLnByb3ZpZGVyKCl9LlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgLy8gRGVmaW5lIHRoZSBldmVudFRyYWNrZXIgcHJvdmlkZXJcclxuICogIGZ1bmN0aW9uIEV2ZW50VHJhY2tlclByb3ZpZGVyKCkge1xyXG4gKiAgICB2YXIgdHJhY2tpbmdVcmwgPSAnL3RyYWNrJztcclxuICpcclxuICogICAgLy8gQSBwcm92aWRlciBtZXRob2QgZm9yIGNvbmZpZ3VyaW5nIHdoZXJlIHRoZSB0cmFja2VkIGV2ZW50cyBzaG91bGQgYmVlbiBzYXZlZFxyXG4gKiAgICB0aGlzLnNldFRyYWNraW5nVXJsID0gZnVuY3Rpb24odXJsKSB7XHJcbiAqICAgICAgdHJhY2tpbmdVcmwgPSB1cmw7XHJcbiAqICAgIH07XHJcbiAqXHJcbiAqICAgIC8vIFRoZSBzZXJ2aWNlIGZhY3RvcnkgZnVuY3Rpb25cclxuICogICAgdGhpcy4kZ2V0ID0gWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XHJcbiAqICAgICAgdmFyIHRyYWNrZWRFdmVudHMgPSB7fTtcclxuICogICAgICByZXR1cm4ge1xyXG4gKiAgICAgICAgLy8gQ2FsbCB0aGlzIHRvIHRyYWNrIGFuIGV2ZW50XHJcbiAqICAgICAgICBldmVudDogZnVuY3Rpb24oZXZlbnQpIHtcclxuICogICAgICAgICAgdmFyIGNvdW50ID0gdHJhY2tlZEV2ZW50c1tldmVudF0gfHwgMDtcclxuICogICAgICAgICAgY291bnQgKz0gMTtcclxuICogICAgICAgICAgdHJhY2tlZEV2ZW50c1tldmVudF0gPSBjb3VudDtcclxuICogICAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gKiAgICAgICAgfSxcclxuICogICAgICAgIC8vIENhbGwgdGhpcyB0byBzYXZlIHRoZSB0cmFja2VkIGV2ZW50cyB0byB0aGUgdHJhY2tpbmdVcmxcclxuICogICAgICAgIHNhdmU6IGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICAgICAkaHR0cC5wb3N0KHRyYWNraW5nVXJsLCB0cmFja2VkRXZlbnRzKTtcclxuICogICAgICAgIH1cclxuICogICAgICB9O1xyXG4gKiAgICB9XTtcclxuICogIH1cclxuICpcclxuICogIGRlc2NyaWJlKCdldmVudFRyYWNrZXInLCBmdW5jdGlvbigpIHtcclxuICogICAgdmFyIHBvc3RTcHk7XHJcbiAqXHJcbiAqICAgIGJlZm9yZUVhY2gobW9kdWxlKGZ1bmN0aW9uKCRwcm92aWRlKSB7XHJcbiAqICAgICAgLy8gUmVnaXN0ZXIgdGhlIGV2ZW50VHJhY2tlciBwcm92aWRlclxyXG4gKiAgICAgICRwcm92aWRlLnByb3ZpZGVyKCdldmVudFRyYWNrZXInLCBFdmVudFRyYWNrZXJQcm92aWRlcik7XHJcbiAqICAgIH0pKTtcclxuICpcclxuICogICAgYmVmb3JlRWFjaChtb2R1bGUoZnVuY3Rpb24oZXZlbnRUcmFja2VyUHJvdmlkZXIpIHtcclxuICogICAgICAvLyBDb25maWd1cmUgZXZlbnRUcmFja2VyIHByb3ZpZGVyXHJcbiAqICAgICAgZXZlbnRUcmFja2VyUHJvdmlkZXIuc2V0VHJhY2tpbmdVcmwoJy9jdXN0b20tdHJhY2snKTtcclxuICogICAgfSkpO1xyXG4gKlxyXG4gKiAgICBpdCgndHJhY2tzIGV2ZW50cycsIGluamVjdChmdW5jdGlvbihldmVudFRyYWNrZXIpIHtcclxuICogICAgICBleHBlY3QoZXZlbnRUcmFja2VyLmV2ZW50KCdsb2dpbicpKS50b0VxdWFsKDEpO1xyXG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMik7XHJcbiAqICAgIH0pKTtcclxuICpcclxuICogICAgaXQoJ3NhdmVzIHRvIHRoZSB0cmFja2luZyB1cmwnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyLCAkaHR0cCkge1xyXG4gKiAgICAgIHBvc3RTcHkgPSBzcHlPbigkaHR0cCwgJ3Bvc3QnKTtcclxuICogICAgICBldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJyk7XHJcbiAqICAgICAgZXZlbnRUcmFja2VyLnNhdmUoKTtcclxuICogICAgICBleHBlY3QocG9zdFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gKiAgICAgIGV4cGVjdChwb3N0U3B5Lm1vc3RSZWNlbnRDYWxsLmFyZ3NbMF0pLm5vdC50b0VxdWFsKCcvdHJhY2snKTtcclxuICogICAgICBleHBlY3QocG9zdFNweS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdKS50b0VxdWFsKCcvY3VzdG9tLXRyYWNrJyk7XHJcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkubW9zdFJlY2VudENhbGwuYXJnc1sxXSkudG9FcXVhbCh7ICdsb2dpbic6IDEgfSk7XHJcbiAqICAgIH0pKTtcclxuICogIH0pO1xyXG4gKiBgYGBcclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkcHJvdmlkZSNmYWN0b3J5XHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBSZWdpc3RlciBhICoqc2VydmljZSBmYWN0b3J5KiosIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHRvIHJldHVybiB0aGUgc2VydmljZSBpbnN0YW5jZS5cclxuICogVGhpcyBpcyBzaG9ydCBmb3IgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHdoZXJlIGl0cyBwcm92aWRlciBjb25zaXN0cyBvZiBvbmx5IGEgYCRnZXRgIHByb3BlcnR5LFxyXG4gKiB3aGljaCBpcyB0aGUgZ2l2ZW4gc2VydmljZSBmYWN0b3J5IGZ1bmN0aW9uLlxyXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoZ2V0Rm4pfSBpZiB5b3UgZG8gbm90IG5lZWQgdG9cclxuICogY29uZmlndXJlIHlvdXIgc2VydmljZSBpbiBhIHByb3ZpZGVyLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gJGdldEZuIFRoZSAkZ2V0Rm4gZm9yIHRoZSBpbnN0YW5jZSBjcmVhdGlvbi4gSW50ZXJuYWxseSB0aGlzIGlzIGEgc2hvcnQgaGFuZFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgYCRwcm92aWRlLnByb3ZpZGVyKG5hbWUsIHskZ2V0OiAkZ2V0Rm59KWAuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcclxuICpcclxuICogQGV4YW1wbGVcclxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIHJlZ2lzdGVyaW5nIGEgc2VydmljZVxyXG4gKiBgYGBqc1xyXG4gKiAgICRwcm92aWRlLmZhY3RvcnkoJ3BpbmcnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcclxuICogICAgIHJldHVybiBmdW5jdGlvbiBwaW5nKCkge1xyXG4gKiAgICAgICByZXR1cm4gJGh0dHAuc2VuZCgnL3BpbmcnKTtcclxuICogICAgIH07XHJcbiAqICAgfV0pO1xyXG4gKiBgYGBcclxuICogWW91IHdvdWxkIHRoZW4gaW5qZWN0IGFuZCB1c2UgdGhpcyBzZXJ2aWNlIGxpa2UgdGhpczpcclxuICogYGBganNcclxuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XHJcbiAqICAgICBwaW5nKCk7XHJcbiAqICAgfV0pO1xyXG4gKiBgYGBcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJHByb3ZpZGUjc2VydmljZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogUmVnaXN0ZXIgYSAqKnNlcnZpY2UgY29uc3RydWN0b3IqKiwgd2hpY2ggd2lsbCBiZSBpbnZva2VkIHdpdGggYG5ld2AgdG8gY3JlYXRlIHRoZSBzZXJ2aWNlXHJcbiAqIGluc3RhbmNlLlxyXG4gKiBUaGlzIGlzIHNob3J0IGZvciByZWdpc3RlcmluZyBhIHNlcnZpY2Ugd2hlcmUgaXRzIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIHRoZSBzZXJ2aWNlXHJcbiAqIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGluc3RhbnRpYXRlIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfSBpZiB5b3UgZGVmaW5lIHlvdXIgc2VydmljZVxyXG4gKiBhcyBhIHR5cGUvY2xhc3MuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY29uc3RydWN0b3IgQSBjbGFzcyAoY29uc3RydWN0b3IgZnVuY3Rpb24pIHRoYXQgd2lsbCBiZSBpbnN0YW50aWF0ZWQuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcclxuICpcclxuICogQGV4YW1wbGVcclxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB1c2luZ1xyXG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfS5cclxuICogYGBganNcclxuICogICB2YXIgUGluZyA9IGZ1bmN0aW9uKCRodHRwKSB7XHJcbiAqICAgICB0aGlzLiRodHRwID0gJGh0dHA7XHJcbiAqICAgfTtcclxuICpcclxuICogICBQaW5nLiRpbmplY3QgPSBbJyRodHRwJ107XHJcbiAqXHJcbiAqICAgUGluZy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZ2V0KCcvcGluZycpO1xyXG4gKiAgIH07XHJcbiAqICAgJHByb3ZpZGUuc2VydmljZSgncGluZycsIFBpbmcpO1xyXG4gKiBgYGBcclxuICogWW91IHdvdWxkIHRoZW4gaW5qZWN0IGFuZCB1c2UgdGhpcyBzZXJ2aWNlIGxpa2UgdGhpczpcclxuICogYGBganNcclxuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XHJcbiAqICAgICBwaW5nLnNlbmQoKTtcclxuICogICB9XSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkcHJvdmlkZSN2YWx1ZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogUmVnaXN0ZXIgYSAqKnZhbHVlIHNlcnZpY2UqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgc3VjaCBhcyBhIHN0cmluZywgYVxyXG4gKiBudW1iZXIsIGFuIGFycmF5LCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbi4gIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHNcclxuICogcHJvdmlkZXIncyBgJGdldGAgcHJvcGVydHkgaXMgYSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRzIGFuZCByZXR1cm5zIHRoZSAqKnZhbHVlXHJcbiAqIHNlcnZpY2UqKi5cclxuICpcclxuICogVmFsdWUgc2VydmljZXMgYXJlIHNpbWlsYXIgdG8gY29uc3RhbnQgc2VydmljZXMsIGV4Y2VwdCB0aGF0IHRoZXkgY2Fubm90IGJlIGluamVjdGVkIGludG8gYVxyXG4gKiBtb2R1bGUgY29uZmlndXJhdGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWd9KSBidXQgdGhleSBjYW4gYmUgb3ZlcnJpZGRlbiBieVxyXG4gKiBhbiBBbmd1bGFyXHJcbiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIHByb3ZpZGVyIGluc3RhbmNlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEhlcmUgYXJlIHNvbWUgZXhhbXBsZXMgb2YgY3JlYXRpbmcgdmFsdWUgc2VydmljZXMuXHJcbiAqIGBgYGpzXHJcbiAqICAgJHByb3ZpZGUudmFsdWUoJ0FETUlOX1VTRVInLCAnYWRtaW4nKTtcclxuICpcclxuICogICAkcHJvdmlkZS52YWx1ZSgnUm9sZUxvb2t1cCcsIHsgYWRtaW46IDAsIHdyaXRlcjogMSwgcmVhZGVyOiAyIH0pO1xyXG4gKlxyXG4gKiAgICRwcm92aWRlLnZhbHVlKCdoYWxmT2YnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gKiAgICAgcmV0dXJuIHZhbHVlIC8gMjtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRwcm92aWRlI2NvbnN0YW50XHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBSZWdpc3RlciBhICoqY29uc3RhbnQgc2VydmljZSoqLCBzdWNoIGFzIGEgc3RyaW5nLCBhIG51bWJlciwgYW4gYXJyYXksIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLFxyXG4gKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gVW5saWtlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlfSBpdCBjYW4gYmVcclxuICogaW5qZWN0ZWQgaW50byBhIG1vZHVsZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIChzZWUge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZ30pIGFuZCBpdCBjYW5ub3RcclxuICogYmUgb3ZlcnJpZGRlbiBieSBhbiBBbmd1bGFyIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgY29uc3RhbnQuXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIGNvbnN0YW50IHZhbHVlLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIGluc3RhbmNlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEhlcmUgYSBzb21lIGV4YW1wbGVzIG9mIGNyZWF0aW5nIGNvbnN0YW50czpcclxuICogYGBganNcclxuICogICAkcHJvdmlkZS5jb25zdGFudCgnU0hBUkRfSEVJR0hUJywgMzA2KTtcclxuICpcclxuICogICAkcHJvdmlkZS5jb25zdGFudCgnTVlfQ09MT1VSUycsIFsncmVkJywgJ2JsdWUnLCAnZ3JleSddKTtcclxuICpcclxuICogICAkcHJvdmlkZS5jb25zdGFudCgnZG91YmxlJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICogICAgIHJldHVybiB2YWx1ZSAqIDI7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkcHJvdmlkZSNkZWNvcmF0b3JcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFJlZ2lzdGVyIGEgKipzZXJ2aWNlIGRlY29yYXRvcioqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBBIHNlcnZpY2UgZGVjb3JhdG9yXHJcbiAqIGludGVyY2VwdHMgdGhlIGNyZWF0aW9uIG9mIGEgc2VydmljZSwgYWxsb3dpbmcgaXQgdG8gb3ZlcnJpZGUgb3IgbW9kaWZ5IHRoZSBiZWhhdmlvdXIgb2YgdGhlXHJcbiAqIHNlcnZpY2UuIFRoZSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGRlY29yYXRvciBtYXkgYmUgdGhlIG9yaWdpbmFsIHNlcnZpY2UsIG9yIGEgbmV3IHNlcnZpY2VcclxuICogb2JqZWN0IHdoaWNoIHJlcGxhY2VzIG9yIHdyYXBzIGFuZCBkZWxlZ2F0ZXMgdG8gdGhlIG9yaWdpbmFsIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIGRlY29yYXRlLlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGRlY29yYXRvciBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBzZXJ2aWNlIG5lZWRzIHRvIGJlXHJcbiAqICAgIGluc3RhbnRpYXRlZCBhbmQgc2hvdWxkIHJldHVybiB0aGUgZGVjb3JhdGVkIHNlcnZpY2UgaW5zdGFuY2UuIFRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgdXNpbmdcclxuICogICAgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgaW5qZWN0b3IuaW52b2tlfSBtZXRob2QgYW5kIGlzIHRoZXJlZm9yZSBmdWxseSBpbmplY3RhYmxlLlxyXG4gKiAgICBMb2NhbCBpbmplY3Rpb24gYXJndW1lbnRzOlxyXG4gKlxyXG4gKiAgICAqIGAkZGVsZWdhdGVgIC0gVGhlIG9yaWdpbmFsIHNlcnZpY2UgaW5zdGFuY2UsIHdoaWNoIGNhbiBiZSBtb25rZXkgcGF0Y2hlZCwgY29uZmlndXJlZCxcclxuICogICAgICBkZWNvcmF0ZWQgb3IgZGVsZWdhdGVkIHRvLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBIZXJlIHdlIGRlY29yYXRlIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIHRvIGNvbnZlcnQgd2FybmluZ3MgdG8gZXJyb3JzIGJ5IGludGVyY2VwdGluZ1xyXG4gKiBjYWxscyB0byB7QGxpbmsgbmcuJGxvZyNlcnJvciAkbG9nLndhcm4oKX0uXHJcbiAqIGBgYGpzXHJcbiAqICAgJHByb3ZpZGUuZGVjb3JhdG9yKCckbG9nJywgWyckZGVsZWdhdGUnLCBmdW5jdGlvbigkZGVsZWdhdGUpIHtcclxuICogICAgICRkZWxlZ2F0ZS53YXJuID0gJGRlbGVnYXRlLmVycm9yO1xyXG4gKiAgICAgcmV0dXJuICRkZWxlZ2F0ZTtcclxuICogICB9XSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVJbmplY3Rvcihtb2R1bGVzVG9Mb2FkLCBzdHJpY3REaSkge1xyXG4gIHN0cmljdERpID0gKHN0cmljdERpID09PSB0cnVlKTtcclxuICB2YXIgSU5TVEFOVElBVElORyA9IHt9LFxyXG4gICAgICBwcm92aWRlclN1ZmZpeCA9ICdQcm92aWRlcicsXHJcbiAgICAgIHBhdGggPSBbXSxcclxuICAgICAgbG9hZGVkTW9kdWxlcyA9IG5ldyBIYXNoTWFwKFtdLCB0cnVlKSxcclxuICAgICAgcHJvdmlkZXJDYWNoZSA9IHtcclxuICAgICAgICAkcHJvdmlkZToge1xyXG4gICAgICAgICAgICBwcm92aWRlcjogc3VwcG9ydE9iamVjdChwcm92aWRlciksXHJcbiAgICAgICAgICAgIGZhY3Rvcnk6IHN1cHBvcnRPYmplY3QoZmFjdG9yeSksXHJcbiAgICAgICAgICAgIHNlcnZpY2U6IHN1cHBvcnRPYmplY3Qoc2VydmljZSksXHJcbiAgICAgICAgICAgIHZhbHVlOiBzdXBwb3J0T2JqZWN0KHZhbHVlKSxcclxuICAgICAgICAgICAgY29uc3RhbnQ6IHN1cHBvcnRPYmplY3QoY29uc3RhbnQpLFxyXG4gICAgICAgICAgICBkZWNvcmF0b3I6IGRlY29yYXRvclxyXG4gICAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBwcm92aWRlckluamVjdG9yID0gKHByb3ZpZGVyQ2FjaGUuJGluamVjdG9yID1cclxuICAgICAgICAgIGNyZWF0ZUludGVybmFsSW5qZWN0b3IocHJvdmlkZXJDYWNoZSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycigndW5wcicsIFwiVW5rbm93biBwcm92aWRlcjogezB9XCIsIHBhdGguam9pbignIDwtICcpKTtcclxuICAgICAgICAgIH0pKSxcclxuICAgICAgaW5zdGFuY2VDYWNoZSA9IHt9LFxyXG4gICAgICBpbnN0YW5jZUluamVjdG9yID0gKGluc3RhbmNlQ2FjaGUuJGluamVjdG9yID1cclxuICAgICAgICAgIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoaW5zdGFuY2VDYWNoZSwgZnVuY3Rpb24oc2VydmljZW5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoc2VydmljZW5hbWUgKyBwcm92aWRlclN1ZmZpeCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZUluamVjdG9yLmludm9rZShwcm92aWRlci4kZ2V0LCBwcm92aWRlciwgdW5kZWZpbmVkLCBzZXJ2aWNlbmFtZSk7XHJcbiAgICAgICAgICB9KSk7XHJcblxyXG5cclxuICBmb3JFYWNoKGxvYWRNb2R1bGVzKG1vZHVsZXNUb0xvYWQpLCBmdW5jdGlvbihmbikgeyBpbnN0YW5jZUluamVjdG9yLmludm9rZShmbiB8fCBub29wKTsgfSk7XHJcblxyXG4gIHJldHVybiBpbnN0YW5jZUluamVjdG9yO1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyAkcHJvdmlkZXJcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgZnVuY3Rpb24gc3VwcG9ydE9iamVjdChkZWxlZ2F0ZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgaWYgKGlzT2JqZWN0KGtleSkpIHtcclxuICAgICAgICBmb3JFYWNoKGtleSwgcmV2ZXJzZVBhcmFtcyhkZWxlZ2F0ZSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBkZWxlZ2F0ZShrZXksIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByb3ZpZGVyKG5hbWUsIHByb3ZpZGVyXykge1xyXG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ3NlcnZpY2UnKTtcclxuICAgIGlmIChpc0Z1bmN0aW9uKHByb3ZpZGVyXykgfHwgaXNBcnJheShwcm92aWRlcl8pKSB7XHJcbiAgICAgIHByb3ZpZGVyXyA9IHByb3ZpZGVySW5qZWN0b3IuaW5zdGFudGlhdGUocHJvdmlkZXJfKTtcclxuICAgIH1cclxuICAgIGlmICghcHJvdmlkZXJfLiRnZXQpIHtcclxuICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdwZ2V0JywgXCJQcm92aWRlciAnezB9JyBtdXN0IGRlZmluZSAkZ2V0IGZhY3RvcnkgbWV0aG9kLlwiLCBuYW1lKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm92aWRlckNhY2hlW25hbWUgKyBwcm92aWRlclN1ZmZpeF0gPSBwcm92aWRlcl87XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBmYWN0b3J5KG5hbWUsIGZhY3RvcnlGbikgeyByZXR1cm4gcHJvdmlkZXIobmFtZSwgeyAkZ2V0OiBmYWN0b3J5Rm4gfSk7IH1cclxuXHJcbiAgZnVuY3Rpb24gc2VydmljZShuYW1lLCBjb25zdHJ1Y3Rvcikge1xyXG4gICAgcmV0dXJuIGZhY3RvcnkobmFtZSwgWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcclxuICAgICAgcmV0dXJuICRpbmplY3Rvci5pbnN0YW50aWF0ZShjb25zdHJ1Y3Rvcik7XHJcbiAgICB9XSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB2YWx1ZShuYW1lLCB2YWwpIHsgcmV0dXJuIGZhY3RvcnkobmFtZSwgdmFsdWVGbih2YWwpKTsgfVxyXG5cclxuICBmdW5jdGlvbiBjb25zdGFudChuYW1lLCB2YWx1ZSkge1xyXG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ2NvbnN0YW50Jyk7XHJcbiAgICBwcm92aWRlckNhY2hlW25hbWVdID0gdmFsdWU7XHJcbiAgICBpbnN0YW5jZUNhY2hlW25hbWVdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkZWNvcmF0b3Ioc2VydmljZU5hbWUsIGRlY29yRm4pIHtcclxuICAgIHZhciBvcmlnUHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChzZXJ2aWNlTmFtZSArIHByb3ZpZGVyU3VmZml4KSxcclxuICAgICAgICBvcmlnJGdldCA9IG9yaWdQcm92aWRlci4kZ2V0O1xyXG5cclxuICAgIG9yaWdQcm92aWRlci4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBvcmlnSW5zdGFuY2UgPSBpbnN0YW5jZUluamVjdG9yLmludm9rZShvcmlnJGdldCwgb3JpZ1Byb3ZpZGVyKTtcclxuICAgICAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGRlY29yRm4sIG51bGwsIHskZGVsZWdhdGU6IG9yaWdJbnN0YW5jZX0pO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vIE1vZHVsZSBMb2FkaW5nXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgZnVuY3Rpb24gbG9hZE1vZHVsZXMobW9kdWxlc1RvTG9hZCl7XHJcbiAgICB2YXIgcnVuQmxvY2tzID0gW10sIG1vZHVsZUZuO1xyXG4gICAgZm9yRWFjaChtb2R1bGVzVG9Mb2FkLCBmdW5jdGlvbihtb2R1bGUpIHtcclxuICAgICAgaWYgKGxvYWRlZE1vZHVsZXMuZ2V0KG1vZHVsZSkpIHJldHVybjtcclxuICAgICAgbG9hZGVkTW9kdWxlcy5wdXQobW9kdWxlLCB0cnVlKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJ1bkludm9rZVF1ZXVlKHF1ZXVlKSB7XHJcbiAgICAgICAgdmFyIGksIGlpO1xyXG4gICAgICAgIGZvcihpID0gMCwgaWkgPSBxdWV1ZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgaW52b2tlQXJncyA9IHF1ZXVlW2ldLFxyXG4gICAgICAgICAgICAgIHByb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoaW52b2tlQXJnc1swXSk7XHJcblxyXG4gICAgICAgICAgcHJvdmlkZXJbaW52b2tlQXJnc1sxXV0uYXBwbHkocHJvdmlkZXIsIGludm9rZUFyZ3NbMl0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICBpZiAoaXNTdHJpbmcobW9kdWxlKSkge1xyXG4gICAgICAgICAgbW9kdWxlRm4gPSBhbmd1bGFyTW9kdWxlKG1vZHVsZSk7XHJcbiAgICAgICAgICBydW5CbG9ja3MgPSBydW5CbG9ja3MuY29uY2F0KGxvYWRNb2R1bGVzKG1vZHVsZUZuLnJlcXVpcmVzKSkuY29uY2F0KG1vZHVsZUZuLl9ydW5CbG9ja3MpO1xyXG4gICAgICAgICAgcnVuSW52b2tlUXVldWUobW9kdWxlRm4uX2ludm9rZVF1ZXVlKTtcclxuICAgICAgICAgIHJ1bkludm9rZVF1ZXVlKG1vZHVsZUZuLl9jb25maWdCbG9ja3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihtb2R1bGUpKSB7XHJcbiAgICAgICAgICAgIHJ1bkJsb2Nrcy5wdXNoKHByb3ZpZGVySW5qZWN0b3IuaW52b2tlKG1vZHVsZSkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShtb2R1bGUpKSB7XHJcbiAgICAgICAgICAgIHJ1bkJsb2Nrcy5wdXNoKHByb3ZpZGVySW5qZWN0b3IuaW52b2tlKG1vZHVsZSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhc3NlcnRBcmdGbihtb2R1bGUsICdtb2R1bGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoaXNBcnJheShtb2R1bGUpKSB7XHJcbiAgICAgICAgICBtb2R1bGUgPSBtb2R1bGVbbW9kdWxlLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZS5tZXNzYWdlICYmIGUuc3RhY2sgJiYgZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSkgPT0gLTEpIHtcclxuICAgICAgICAgIC8vIFNhZmFyaSAmIEZGJ3Mgc3RhY2sgdHJhY2VzIGRvbid0IGNvbnRhaW4gZXJyb3IubWVzc2FnZSBjb250ZW50XHJcbiAgICAgICAgICAvLyB1bmxpa2UgdGhvc2Ugb2YgQ2hyb21lIGFuZCBJRVxyXG4gICAgICAgICAgLy8gU28gaWYgc3RhY2sgZG9lc24ndCBjb250YWluIG1lc3NhZ2UsIHdlIGNyZWF0ZSBhIG5ldyBzdHJpbmcgdGhhdCBjb250YWlucyBib3RoLlxyXG4gICAgICAgICAgLy8gU2luY2UgZXJyb3Iuc3RhY2sgaXMgcmVhZC1vbmx5IGluIFNhZmFyaSwgSSdtIG92ZXJyaWRpbmcgZSBhbmQgbm90IGUuc3RhY2sgaGVyZS5cclxuICAgICAgICAgIC8qIGpzaGludCAtVzAyMiAqL1xyXG4gICAgICAgICAgZSA9IGUubWVzc2FnZSArICdcXG4nICsgZS5zdGFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdtb2R1bGVycicsIFwiRmFpbGVkIHRvIGluc3RhbnRpYXRlIG1vZHVsZSB7MH0gZHVlIHRvOlxcbnsxfVwiLFxyXG4gICAgICAgICAgICAgICAgICBtb2R1bGUsIGUuc3RhY2sgfHwgZS5tZXNzYWdlIHx8IGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBydW5CbG9ja3M7XHJcbiAgfVxyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyBpbnRlcm5hbCBJbmplY3RvclxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVJbnRlcm5hbEluamVjdG9yKGNhY2hlLCBmYWN0b3J5KSB7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0U2VydmljZShzZXJ2aWNlTmFtZSkge1xyXG4gICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoc2VydmljZU5hbWUpKSB7XHJcbiAgICAgICAgaWYgKGNhY2hlW3NlcnZpY2VOYW1lXSA9PT0gSU5TVEFOVElBVElORykge1xyXG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdjZGVwJywgJ0NpcmN1bGFyIGRlcGVuZGVuY3kgZm91bmQ6IHswfScsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZU5hbWUgKyAnIDwtICcgKyBwYXRoLmpvaW4oJyA8LSAnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHBhdGgudW5zaGlmdChzZXJ2aWNlTmFtZSk7XHJcbiAgICAgICAgICBjYWNoZVtzZXJ2aWNlTmFtZV0gPSBJTlNUQU5USUFUSU5HO1xyXG4gICAgICAgICAgcmV0dXJuIGNhY2hlW3NlcnZpY2VOYW1lXSA9IGZhY3Rvcnkoc2VydmljZU5hbWUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgaWYgKGNhY2hlW3NlcnZpY2VOYW1lXSA9PT0gSU5TVEFOVElBVElORykge1xyXG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbc2VydmljZU5hbWVdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBwYXRoLnNoaWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW52b2tlKGZuLCBzZWxmLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbG9jYWxzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHNlcnZpY2VOYW1lID0gbG9jYWxzO1xyXG4gICAgICAgIGxvY2FscyA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBhcmdzID0gW10sXHJcbiAgICAgICAgICAkaW5qZWN0ID0gYW5ub3RhdGUoZm4sIHN0cmljdERpLCBzZXJ2aWNlTmFtZSksXHJcbiAgICAgICAgICBsZW5ndGgsIGksXHJcbiAgICAgICAgICBrZXk7XHJcblxyXG4gICAgICBmb3IoaSA9IDAsIGxlbmd0aCA9ICRpbmplY3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBrZXkgPSAkaW5qZWN0W2ldO1xyXG4gICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdpdGtuJyxcclxuICAgICAgICAgICAgICAgICAgJ0luY29ycmVjdCBpbmplY3Rpb24gdG9rZW4hIEV4cGVjdGVkIHNlcnZpY2UgbmFtZSBhcyBzdHJpbmcsIGdvdCB7MH0nLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhcmdzLnB1c2goXHJcbiAgICAgICAgICBsb2NhbHMgJiYgbG9jYWxzLmhhc093blByb3BlcnR5KGtleSlcclxuICAgICAgICAgID8gbG9jYWxzW2tleV1cclxuICAgICAgICAgIDogZ2V0U2VydmljZShrZXkpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaXNBcnJheShmbikpIHtcclxuICAgICAgICBmbiA9IGZuW2xlbmd0aF07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2FuZ3VsYXJqcy1pbnZva2UtYXBwbHktdnMtc3dpdGNoXHJcbiAgICAgIC8vICM1Mzg4XHJcbiAgICAgIHJldHVybiBmbi5hcHBseShzZWxmLCBhcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbnN0YW50aWF0ZShUeXBlLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XHJcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCkge30sXHJcbiAgICAgICAgICBpbnN0YW5jZSwgcmV0dXJuZWRWYWx1ZTtcclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIFR5cGUgaXMgYW5ub3RhdGVkIGFuZCB1c2UganVzdCB0aGUgZ2l2ZW4gZnVuY3Rpb24gYXQgbi0xIGFzIHBhcmFtZXRlclxyXG4gICAgICAvLyBlLmcuIHNvbWVNb2R1bGUuZmFjdG9yeSgnZ3JlZXRlcicsIFsnJHdpbmRvdycsIGZ1bmN0aW9uKHJlbmFtZWQkd2luZG93KSB7fV0pO1xyXG4gICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSAoaXNBcnJheShUeXBlKSA/IFR5cGVbVHlwZS5sZW5ndGggLSAxXSA6IFR5cGUpLnByb3RvdHlwZTtcclxuICAgICAgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcclxuICAgICAgcmV0dXJuZWRWYWx1ZSA9IGludm9rZShUeXBlLCBpbnN0YW5jZSwgbG9jYWxzLCBzZXJ2aWNlTmFtZSk7XHJcblxyXG4gICAgICByZXR1cm4gaXNPYmplY3QocmV0dXJuZWRWYWx1ZSkgfHwgaXNGdW5jdGlvbihyZXR1cm5lZFZhbHVlKSA/IHJldHVybmVkVmFsdWUgOiBpbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpbnZva2U6IGludm9rZSxcclxuICAgICAgaW5zdGFudGlhdGU6IGluc3RhbnRpYXRlLFxyXG4gICAgICBnZXQ6IGdldFNlcnZpY2UsXHJcbiAgICAgIGFubm90YXRlOiBhbm5vdGF0ZSxcclxuICAgICAgaGFzOiBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyQ2FjaGUuaGFzT3duUHJvcGVydHkobmFtZSArIHByb3ZpZGVyU3VmZml4KSB8fCBjYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmNyZWF0ZUluamVjdG9yLiQkYW5ub3RhdGUgPSBhbm5vdGF0ZTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkYW5jaG9yU2Nyb2xsXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqIEByZXF1aXJlcyAkd2luZG93XHJcbiAqIEByZXF1aXJlcyAkbG9jYXRpb25cclxuICogQHJlcXVpcmVzICRyb290U2NvcGVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFdoZW4gY2FsbGVkLCBpdCBjaGVja3MgY3VycmVudCB2YWx1ZSBvZiBgJGxvY2F0aW9uLmhhc2goKWAgYW5kIHNjcm9sbHMgdG8gdGhlIHJlbGF0ZWQgZWxlbWVudCxcclxuICogYWNjb3JkaW5nIHRvIHJ1bGVzIHNwZWNpZmllZCBpblxyXG4gKiBbSHRtbDUgc3BlY10oaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy9PdmVydmlldy5odG1sI3RoZS1pbmRpY2F0ZWQtcGFydC1vZi10aGUtZG9jdW1lbnQpLlxyXG4gKlxyXG4gKiBJdCBhbHNvIHdhdGNoZXMgdGhlIGAkbG9jYXRpb24uaGFzaCgpYCBhbmQgc2Nyb2xscyB3aGVuZXZlciBpdCBjaGFuZ2VzIHRvIG1hdGNoIGFueSBhbmNob3IuXHJcbiAqIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IGNhbGxpbmcgYCRhbmNob3JTY3JvbGxQcm92aWRlci5kaXNhYmxlQXV0b1Njcm9sbGluZygpYC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwiYW5jaG9yU2Nyb2xsRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8ZGl2IGlkPVwic2Nyb2xsQXJlYVwiIG5nLWNvbnRyb2xsZXI9XCJTY3JvbGxDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxhIG5nLWNsaWNrPVwiZ290b0JvdHRvbSgpXCI+R28gdG8gYm90dG9tPC9hPlxyXG4gICAgICAgICA8YSBpZD1cImJvdHRvbVwiPjwvYT4gWW91J3JlIGF0IHRoZSBib3R0b20hXHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2FuY2hvclNjcm9sbEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgLmNvbnRyb2xsZXIoJ1Njcm9sbENvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnJGFuY2hvclNjcm9sbCcsXHJcbiAgICAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCAkYW5jaG9yU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUuZ290b0JvdHRvbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAvLyBzZXQgdGhlIGxvY2F0aW9uLmhhc2ggdG8gdGhlIGlkIG9mXHJcbiAgICAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IHlvdSB3aXNoIHRvIHNjcm9sbCB0by5cclxuICAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2JvdHRvbScpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gY2FsbCAkYW5jaG9yU2Nyb2xsKClcclxuICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xyXG4gICAgICAgICAgICAgfTtcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgICNzY3JvbGxBcmVhIHtcclxuICAgICAgICAgaGVpZ2h0OiAzNTBweDtcclxuICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XHJcbiAgICAgICB9XHJcblxyXG4gICAgICAgI2JvdHRvbSB7XHJcbiAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICBtYXJnaW4tdG9wOiAyMDAwcHg7XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiAkQW5jaG9yU2Nyb2xsUHJvdmlkZXIoKSB7XHJcblxyXG4gIHZhciBhdXRvU2Nyb2xsaW5nRW5hYmxlZCA9IHRydWU7XHJcblxyXG4gIHRoaXMuZGlzYWJsZUF1dG9TY3JvbGxpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgIGF1dG9TY3JvbGxpbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHdpbmRvdywgJGxvY2F0aW9uLCAkcm9vdFNjb3BlKSB7XHJcbiAgICB2YXIgZG9jdW1lbnQgPSAkd2luZG93LmRvY3VtZW50O1xyXG5cclxuICAgIC8vIGhlbHBlciBmdW5jdGlvbiB0byBnZXQgZmlyc3QgYW5jaG9yIGZyb20gYSBOb2RlTGlzdFxyXG4gICAgLy8gY2FuJ3QgdXNlIGZpbHRlci5maWx0ZXIsIGFzIGl0IGFjY2VwdHMgb25seSBpbnN0YW5jZXMgb2YgQXJyYXlcclxuICAgIC8vIGFuZCBJRSBjYW4ndCBjb252ZXJ0IE5vZGVMaXN0IHRvIGFuIGFycmF5IHVzaW5nIFtdLnNsaWNlXHJcbiAgICAvLyBUT0RPKHZvanRhKTogdXNlIGZpbHRlciBpZiB3ZSBjaGFuZ2UgaXQgdG8gYWNjZXB0IGxpc3RzIGFzIHdlbGxcclxuICAgIGZ1bmN0aW9uIGdldEZpcnN0QW5jaG9yKGxpc3QpIHtcclxuICAgICAgdmFyIHJlc3VsdCA9IG51bGw7XHJcbiAgICAgIGZvckVhY2gobGlzdCwgZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgIGlmICghcmVzdWx0ICYmIG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ2EnKSByZXN1bHQgPSBlbGVtZW50O1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY3JvbGwoKSB7XHJcbiAgICAgIHZhciBoYXNoID0gJGxvY2F0aW9uLmhhc2goKSwgZWxtO1xyXG5cclxuICAgICAgLy8gZW1wdHkgaGFzaCwgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcclxuICAgICAgaWYgKCFoYXNoKSAkd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG5cclxuICAgICAgLy8gZWxlbWVudCB3aXRoIGdpdmVuIGlkXHJcbiAgICAgIGVsc2UgaWYgKChlbG0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKSkpIGVsbS5zY3JvbGxJbnRvVmlldygpO1xyXG5cclxuICAgICAgLy8gZmlyc3QgYW5jaG9yIHdpdGggZ2l2ZW4gbmFtZSA6LURcclxuICAgICAgZWxzZSBpZiAoKGVsbSA9IGdldEZpcnN0QW5jaG9yKGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGhhc2gpKSkpIGVsbS5zY3JvbGxJbnRvVmlldygpO1xyXG5cclxuICAgICAgLy8gbm8gZWxlbWVudCBhbmQgaGFzaCA9PSAndG9wJywgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcclxuICAgICAgZWxzZSBpZiAoaGFzaCA9PT0gJ3RvcCcpICR3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG9lcyBub3Qgc2Nyb2xsIHdoZW4gdXNlciBjbGlja3Mgb24gYW5jaG9yIGxpbmsgdGhhdCBpcyBjdXJyZW50bHkgb25cclxuICAgIC8vIChubyB1cmwgY2hhbmdlLCBubyAkbG9jYXRpb24uaGFzaCgpIGNoYW5nZSksIGJyb3dzZXIgbmF0aXZlIGRvZXMgc2Nyb2xsXHJcbiAgICBpZiAoYXV0b1Njcm9sbGluZ0VuYWJsZWQpIHtcclxuICAgICAgJHJvb3RTY29wZS4kd2F0Y2goZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoKCkge3JldHVybiAkbG9jYXRpb24uaGFzaCgpO30sXHJcbiAgICAgICAgZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoQWN0aW9uKCkge1xyXG4gICAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKHNjcm9sbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNjcm9sbDtcclxuICB9XTtcclxufVxyXG5cclxudmFyICRhbmltYXRlTWluRXJyID0gbWluRXJyKCckYW5pbWF0ZScpO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mICRhbmltYXRlIHRoYXQgZG9lc24ndCBwZXJmb3JtIGFueSBhbmltYXRpb25zLCBpbnN0ZWFkIGp1c3RcclxuICogc3luY2hyb25vdXNseSBwZXJmb3JtcyBET01cclxuICogdXBkYXRlcyBhbmQgY2FsbHMgZG9uZSgpIGNhbGxiYWNrcy5cclxuICpcclxuICogSW4gb3JkZXIgdG8gZW5hYmxlIGFuaW1hdGlvbnMgdGhlIG5nQW5pbWF0ZSBtb2R1bGUgaGFzIHRvIGJlIGxvYWRlZC5cclxuICpcclxuICogVG8gc2VlIHRoZSBmdW5jdGlvbmFsIGltcGxlbWVudGF0aW9uIGNoZWNrIG91dCBzcmMvbmdBbmltYXRlL2FuaW1hdGUuanNcclxuICovXHJcbnZhciAkQW5pbWF0ZVByb3ZpZGVyID0gWyckcHJvdmlkZScsIGZ1bmN0aW9uKCRwcm92aWRlKSB7XHJcblxyXG5cclxuICB0aGlzLiQkc2VsZWN0b3JzID0ge307XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNyZWdpc3RlclxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmVnaXN0ZXJzIGEgbmV3IGluamVjdGFibGUgYW5pbWF0aW9uIGZhY3RvcnkgZnVuY3Rpb24uIFRoZSBmYWN0b3J5IGZ1bmN0aW9uIHByb2R1Y2VzIHRoZVxyXG4gICAqIGFuaW1hdGlvbiBvYmplY3Qgd2hpY2ggY29udGFpbnMgY2FsbGJhY2sgZnVuY3Rpb25zIGZvciBlYWNoIGV2ZW50IHRoYXQgaXMgZXhwZWN0ZWQgdG8gYmVcclxuICAgKiBhbmltYXRlZC5cclxuICAgKlxyXG4gICAqICAgKiBgZXZlbnRGbmA6IGBmdW5jdGlvbihFbGVtZW50LCBkb25lRnVuY3Rpb24pYCBUaGUgZWxlbWVudCB0byBhbmltYXRlLCB0aGUgYGRvbmVGdW5jdGlvbmBcclxuICAgKiAgIG11c3QgYmUgY2FsbGVkIG9uY2UgdGhlIGVsZW1lbnQgYW5pbWF0aW9uIGlzIGNvbXBsZXRlLiBJZiBhIGZ1bmN0aW9uIGlzIHJldHVybmVkIHRoZW4gdGhlXHJcbiAgICogICBhbmltYXRpb24gc2VydmljZSB3aWxsIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uIHdoZW5ldmVyIGEgY2FuY2VsIGV2ZW50IGlzXHJcbiAgICogICB0cmlnZ2VyZWQuXHJcbiAgICpcclxuICAgKlxyXG4gICAqIGBgYGpzXHJcbiAgICogICByZXR1cm4ge1xyXG4gICAgICogICAgIGV2ZW50Rm4gOiBmdW5jdGlvbihlbGVtZW50LCBkb25lKSB7XHJcbiAgICAgKiAgICAgICAvL2NvZGUgdG8gcnVuIHRoZSBhbmltYXRpb25cclxuICAgICAqICAgICAgIC8vb25jZSBjb21wbGV0ZSwgdGhlbiBydW4gZG9uZSgpXHJcbiAgICAgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gY2FuY2VsbGF0aW9uRnVuY3Rpb24oKSB7XHJcbiAgICAgKiAgICAgICAgIC8vY29kZSB0byBjYW5jZWwgdGhlIGFuaW1hdGlvblxyXG4gICAgICogICAgICAgfVxyXG4gICAgICogICAgIH1cclxuICAgICAqICAgfVxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGFuaW1hdGlvbi5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmYWN0b3J5IFRoZSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB0byByZXR1cm4gdGhlIGFuaW1hdGlvblxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LlxyXG4gICAqL1xyXG4gIHRoaXMucmVnaXN0ZXIgPSBmdW5jdGlvbihuYW1lLCBmYWN0b3J5KSB7XHJcbiAgICB2YXIga2V5ID0gbmFtZSArICctYW5pbWF0aW9uJztcclxuICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApICE9ICcuJykgdGhyb3cgJGFuaW1hdGVNaW5FcnIoJ25vdGNzZWwnLFxyXG4gICAgICAgIFwiRXhwZWN0aW5nIGNsYXNzIHNlbGVjdG9yIHN0YXJ0aW5nIHdpdGggJy4nIGdvdCAnezB9Jy5cIiwgbmFtZSk7XHJcbiAgICB0aGlzLiQkc2VsZWN0b3JzW25hbWUuc3Vic3RyKDEpXSA9IGtleTtcclxuICAgICRwcm92aWRlLmZhY3Rvcnkoa2V5LCBmYWN0b3J5KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNjbGFzc05hbWVGaWx0ZXJcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldHMgYW5kL29yIHJldHVybnMgdGhlIENTUyBjbGFzcyByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyBjaGVja2VkIHdoZW4gcGVyZm9ybWluZ1xyXG4gICAqIGFuIGFuaW1hdGlvbi4gVXBvbiBib290c3RyYXAgdGhlIGNsYXNzTmFtZUZpbHRlciB2YWx1ZSBpcyBub3Qgc2V0IGF0IGFsbCBhbmQgd2lsbFxyXG4gICAqIHRoZXJlZm9yZSBlbmFibGUgJGFuaW1hdGUgdG8gYXR0ZW1wdCB0byBwZXJmb3JtIGFuIGFuaW1hdGlvbiBvbiBhbnkgZWxlbWVudC5cclxuICAgKiBXaGVuIHNldHRpbmcgdGhlIGNsYXNzTmFtZUZpbHRlciB2YWx1ZSwgYW5pbWF0aW9ucyB3aWxsIG9ubHkgYmUgcGVyZm9ybWVkIG9uIGVsZW1lbnRzXHJcbiAgICogdGhhdCBzdWNjZXNzZnVsbHkgbWF0Y2ggdGhlIGZpbHRlciBleHByZXNzaW9uLiBUaGlzIGluIHR1cm4gY2FuIGJvb3N0IHBlcmZvcm1hbmNlXHJcbiAgICogZm9yIGxvdy1wb3dlcmVkIGRldmljZXMgYXMgd2VsbCBhcyBhcHBsaWNhdGlvbnMgY29udGFpbmluZyBhIGxvdCBvZiBzdHJ1Y3R1cmFsIG9wZXJhdGlvbnMuXHJcbiAgICogQHBhcmFtIHtSZWdFeHA9fSBleHByZXNzaW9uIFRoZSBjbGFzc05hbWUgZXhwcmVzc2lvbiB3aGljaCB3aWxsIGJlIGNoZWNrZWQgYWdhaW5zdCBhbGwgYW5pbWF0aW9uc1xyXG4gICAqIEByZXR1cm4ge1JlZ0V4cH0gVGhlIGN1cnJlbnQgQ1NTIGNsYXNzTmFtZSBleHByZXNzaW9uIHZhbHVlLiBJZiBudWxsIHRoZW4gdGhlcmUgaXMgbm8gZXhwcmVzc2lvbiB2YWx1ZVxyXG4gICAqL1xyXG4gIHRoaXMuY2xhc3NOYW1lRmlsdGVyID0gZnVuY3Rpb24oZXhwcmVzc2lvbikge1xyXG4gICAgaWYoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICB0aGlzLiQkY2xhc3NOYW1lRmlsdGVyID0gKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBSZWdFeHApID8gZXhwcmVzc2lvbiA6IG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcjtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyQkcScsICckJGFzeW5jQ2FsbGJhY2snLCBmdW5jdGlvbigkJHEsICQkYXN5bmNDYWxsYmFjaykge1xyXG5cclxuICAgIHZhciBjdXJyZW50RGVmZXI7XHJcbiAgICBmdW5jdGlvbiBhc3luY1Byb21pc2UoKSB7XHJcbiAgICAgIC8vIG9ubHkgc2VydmUgb25lIGluc3RhbmNlIG9mIGEgcHJvbWlzZSBpbiBvcmRlciB0byBzYXZlIENQVSBjeWNsZXNcclxuICAgICAgaWYgKCFjdXJyZW50RGVmZXIpIHtcclxuICAgICAgICBjdXJyZW50RGVmZXIgPSAkJHEuZGVmZXIoKTtcclxuICAgICAgICAkJGFzeW5jQ2FsbGJhY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjdXJyZW50RGVmZXIucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgY3VycmVudERlZmVyID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY3VycmVudERlZmVyLnByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBuYW1lICRhbmltYXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlICRhbmltYXRlIHNlcnZpY2UgcHJvdmlkZXMgcnVkaW1lbnRhcnkgRE9NIG1hbmlwdWxhdGlvbiBmdW5jdGlvbnMgdG9cclxuICAgICAqIGluc2VydCwgcmVtb3ZlIGFuZCBtb3ZlIGVsZW1lbnRzIHdpdGhpbiB0aGUgRE9NLCBhcyB3ZWxsIGFzIGFkZGluZyBhbmQgcmVtb3ZpbmcgY2xhc3Nlcy5cclxuICAgICAqIFRoaXMgc2VydmljZSBpcyB0aGUgY29yZSBzZXJ2aWNlIHVzZWQgYnkgdGhlIG5nQW5pbWF0ZSAkYW5pbWF0b3Igc2VydmljZSB3aGljaCBwcm92aWRlc1xyXG4gICAgICogaGlnaC1sZXZlbCBhbmltYXRpb24gaG9va3MgZm9yIENTUyBhbmQgSmF2YVNjcmlwdC5cclxuICAgICAqXHJcbiAgICAgKiAkYW5pbWF0ZSBpcyBhdmFpbGFibGUgaW4gdGhlIEFuZ3VsYXJKUyBjb3JlLCBob3dldmVyLCB0aGUgbmdBbmltYXRlIG1vZHVsZSBtdXN0IGJlIGluY2x1ZGVkXHJcbiAgICAgKiB0byBlbmFibGUgZnVsbCBvdXQgYW5pbWF0aW9uIHN1cHBvcnQuIE90aGVyd2lzZSwgJGFuaW1hdGUgd2lsbCBvbmx5IHBlcmZvcm0gc2ltcGxlIERPTVxyXG4gICAgICogbWFuaXB1bGF0aW9uIG9wZXJhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogVG8gbGVhcm4gbW9yZSBhYm91dCBlbmFibGluZyBhbmltYXRpb24gc3VwcG9ydCwgY2xpY2sgaGVyZSB0byB2aXNpdCB0aGUge0BsaW5rIG5nQW5pbWF0ZVxyXG4gICAgICogbmdBbmltYXRlIG1vZHVsZSBwYWdlfSBhcyB3ZWxsIGFzIHRoZSB7QGxpbmsgbmdBbmltYXRlLiRhbmltYXRlIG5nQW5pbWF0ZSAkYW5pbWF0ZSBzZXJ2aWNlXHJcbiAgICAgKiBwYWdlfS5cclxuICAgICAqL1xyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2VudGVyXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBJbnNlcnRzIHRoZSBlbGVtZW50IGludG8gdGhlIERPTSBlaXRoZXIgYWZ0ZXIgdGhlIGBhZnRlcmAgZWxlbWVudCBvclxyXG4gICAgICAgKiBhcyB0aGUgZmlyc3QgY2hpbGQgd2l0aGluIHRoZSBgcGFyZW50YCBlbGVtZW50LiBXaGVuIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgYSBwcm9taXNlXHJcbiAgICAgICAqIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIGluc2VydGVkIGludG8gdGhlIERPTVxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudCB0aGUgcGFyZW50IGVsZW1lbnQgd2hpY2ggd2lsbCBhcHBlbmQgdGhlIGVsZW1lbnQgYXNcclxuICAgICAgICogICBhIGNoaWxkIChpZiB0aGUgYWZ0ZXIgZWxlbWVudCBpcyBub3QgcHJlc2VudClcclxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBhZnRlciB0aGUgc2libGluZyBlbGVtZW50IHdoaWNoIHdpbGwgYXBwZW5kIHRoZSBlbGVtZW50XHJcbiAgICAgICAqICAgYWZ0ZXIgaXRzZWxmXHJcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgKi9cclxuICAgICAgZW50ZXIgOiBmdW5jdGlvbihlbGVtZW50LCBwYXJlbnQsIGFmdGVyKSB7XHJcbiAgICAgICAgYWZ0ZXIgPyBhZnRlci5hZnRlcihlbGVtZW50KVxyXG4gICAgICAgICAgICAgIDogcGFyZW50LnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICAgICAgcmV0dXJuIGFzeW5jUHJvbWlzZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjbGVhdmVcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICogQGRlc2NyaXB0aW9uIFJlbW92ZXMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NLiBXaGVuIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgYSBwcm9taXNlXHJcbiAgICAgICAqIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgRE9NXHJcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgKi9cclxuICAgICAgbGVhdmUgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICpcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNtb3ZlXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBNb3ZlcyB0aGUgcG9zaXRpb24gb2YgdGhlIHByb3ZpZGVkIGVsZW1lbnQgd2l0aGluIHRoZSBET00gdG8gYmUgcGxhY2VkXHJcbiAgICAgICAqIGVpdGhlciBhZnRlciB0aGUgYGFmdGVyYCBlbGVtZW50IG9yIGluc2lkZSBvZiB0aGUgYHBhcmVudGAgZWxlbWVudC4gV2hlbiB0aGUgZnVuY3Rpb25cclxuICAgICAgICogaXMgY2FsbGVkIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYXQgYSBsYXRlciB0aW1lLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSBtb3ZlZCBhcm91bmQgd2l0aGluIHRoZVxyXG4gICAgICAgKiAgIERPTVxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudCB0aGUgcGFyZW50IGVsZW1lbnQgd2hlcmUgdGhlIGVsZW1lbnQgd2lsbCBiZVxyXG4gICAgICAgKiAgIGluc2VydGVkIGludG8gKGlmIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGFmdGVyIHRoZSBzaWJsaW5nIGVsZW1lbnQgd2hlcmUgdGhlIGVsZW1lbnQgd2lsbCBiZVxyXG4gICAgICAgKiAgIHBvc2l0aW9uZWQgbmV4dCB0b1xyXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICovXHJcbiAgICAgIG1vdmUgOiBmdW5jdGlvbihlbGVtZW50LCBwYXJlbnQsIGFmdGVyKSB7XHJcbiAgICAgICAgLy8gRG8gbm90IHJlbW92ZSBlbGVtZW50IGJlZm9yZSBpbnNlcnQuIFJlbW92aW5nIHdpbGwgY2F1c2UgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlXHJcbiAgICAgICAgLy8gZWxlbWVudCB0byBiZSBkcm9wcGVkLiBJbnNlcnQgd2lsbCBpbXBsaWNpdGx5IGRvIHRoZSByZW1vdmUuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50ZXIoZWxlbWVudCwgcGFyZW50LCBhZnRlcik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICpcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNhZGRDbGFzc1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyB0aGUgcHJvdmlkZWQgY2xhc3NOYW1lIENTUyBjbGFzcyB2YWx1ZSB0byB0aGUgcHJvdmlkZWQgZWxlbWVudC5cclxuICAgICAgICogV2hlbiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYXQgYSBsYXRlciB0aW1lLlxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBoYXZlIHRoZSBjbGFzc05hbWUgdmFsdWVcclxuICAgICAgICogICBhZGRlZCB0byBpdFxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3Mgd2hpY2ggd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudFxyXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICovXHJcbiAgICAgIGFkZENsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgY2xhc3NOYW1lID0gIWlzU3RyaW5nKGNsYXNzTmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoaXNBcnJheShjbGFzc05hbWUpID8gY2xhc3NOYW1lLmpvaW4oJyAnKSA6ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNsYXNzTmFtZTtcclxuICAgICAgICBmb3JFYWNoKGVsZW1lbnQsIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICBqcUxpdGVBZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBhc3luY1Byb21pc2UoKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3JlbW92ZUNsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIHRoZSBwcm92aWRlZCBjbGFzc05hbWUgQ1NTIGNsYXNzIHZhbHVlIGZyb20gdGhlIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAgICAgICAqIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2UgaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGF0IGEgbGF0ZXIgdGltZS5cclxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgaGF2ZSB0aGUgY2xhc3NOYW1lIHZhbHVlXHJcbiAgICAgICAqICAgcmVtb3ZlZCBmcm9tIGl0XHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgdGhlIENTUyBjbGFzcyB3aGljaCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudFxyXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICovXHJcbiAgICAgIHJlbW92ZUNsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgY2xhc3NOYW1lID0gIWlzU3RyaW5nKGNsYXNzTmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoaXNBcnJheShjbGFzc05hbWUpID8gY2xhc3NOYW1lLmpvaW4oJyAnKSA6ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNsYXNzTmFtZTtcclxuICAgICAgICBmb3JFYWNoKGVsZW1lbnQsIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICBqcUxpdGVSZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBhc3luY1Byb21pc2UoKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3NldENsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRzIGFuZC9vciByZW1vdmVzIHRoZSBnaXZlbiBDU1MgY2xhc3NlcyB0byBhbmQgZnJvbSB0aGUgZWxlbWVudC5cclxuICAgICAgICogV2hlbiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYXQgYSBsYXRlciB0aW1lLlxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBoYXZlIGl0cyBDU1MgY2xhc3NlcyBjaGFuZ2VkXHJcbiAgICAgICAqICAgcmVtb3ZlZCBmcm9tIGl0XHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhZGQgdGhlIENTUyBjbGFzc2VzIHdoaWNoIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVsZW1lbnRcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJlbW92ZSB0aGUgQ1NTIGNsYXNzIHdoaWNoIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XHJcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgKi9cclxuICAgICAgc2V0Q2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBhZGQsIHJlbW92ZSkge1xyXG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoZWxlbWVudCwgYWRkKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKGVsZW1lbnQsIHJlbW92ZSk7XHJcbiAgICAgICAgcmV0dXJuIGFzeW5jUHJvbWlzZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZW5hYmxlZCA6IG5vb3AsXHJcbiAgICAgIGNhbmNlbCA6IG5vb3BcclxuICAgIH07XHJcbiAgfV07XHJcbn1dO1xyXG5cclxuZnVuY3Rpb24gJCRBc3luY0NhbGxiYWNrUHJvdmlkZXIoKXtcclxuICB0aGlzLiRnZXQgPSBbJyQkckFGJywgJyR0aW1lb3V0JywgZnVuY3Rpb24oJCRyQUYsICR0aW1lb3V0KSB7XHJcbiAgICByZXR1cm4gJCRyQUYuc3VwcG9ydGVkXHJcbiAgICAgID8gZnVuY3Rpb24oZm4pIHsgcmV0dXJuICQkckFGKGZuKTsgfVxyXG4gICAgICA6IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgcmV0dXJuICR0aW1lb3V0KGZuLCAwLCBmYWxzZSk7XHJcbiAgICAgIH07XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiAhIFRoaXMgaXMgYSBwcml2YXRlIHVuZG9jdW1lbnRlZCBzZXJ2aWNlICFcclxuICpcclxuICogQG5hbWUgJGJyb3dzZXJcclxuICogQHJlcXVpcmVzICRsb2dcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoaXMgb2JqZWN0IGhhcyB0d28gZ29hbHM6XHJcbiAqXHJcbiAqIC0gaGlkZSBhbGwgdGhlIGdsb2JhbCBzdGF0ZSBpbiB0aGUgYnJvd3NlciBjYXVzZWQgYnkgdGhlIHdpbmRvdyBvYmplY3RcclxuICogLSBhYnN0cmFjdCBhd2F5IGFsbCB0aGUgYnJvd3NlciBzcGVjaWZpYyBmZWF0dXJlcyBhbmQgaW5jb25zaXN0ZW5jaWVzXHJcbiAqXHJcbiAqIEZvciB0ZXN0cyB3ZSBwcm92aWRlIHtAbGluayBuZ01vY2suJGJyb3dzZXIgbW9jayBpbXBsZW1lbnRhdGlvbn0gb2YgdGhlIGAkYnJvd3NlcmBcclxuICogc2VydmljZSwgd2hpY2ggY2FuIGJlIHVzZWQgZm9yIGNvbnZlbmllbnQgdGVzdGluZyBvZiB0aGUgYXBwbGljYXRpb24gd2l0aG91dCB0aGUgaW50ZXJhY3Rpb24gd2l0aFxyXG4gKiB0aGUgcmVhbCBicm93c2VyIGFwaXMuXHJcbiAqL1xyXG4vKipcclxuICogQHBhcmFtIHtvYmplY3R9IHdpbmRvdyBUaGUgZ2xvYmFsIHdpbmRvdyBvYmplY3QuXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkb2N1bWVudCBqUXVlcnkgd3JhcHBlZCBkb2N1bWVudC5cclxuICogQHBhcmFtIHtmdW5jdGlvbigpfSBYSFIgWE1MSHR0cFJlcXVlc3QgY29uc3RydWN0b3IuXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSAkbG9nIGNvbnNvbGUubG9nIG9yIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIGludGVyZmFjZS5cclxuICogQHBhcmFtIHtvYmplY3R9ICRzbmlmZmVyICRzbmlmZmVyIHNlcnZpY2VcclxuICovXHJcbmZ1bmN0aW9uIEJyb3dzZXIod2luZG93LCBkb2N1bWVudCwgJGxvZywgJHNuaWZmZXIpIHtcclxuICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgIHJhd0RvY3VtZW50ID0gZG9jdW1lbnRbMF0sXHJcbiAgICAgIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxyXG4gICAgICBoaXN0b3J5ID0gd2luZG93Lmhpc3RvcnksXHJcbiAgICAgIHNldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCxcclxuICAgICAgY2xlYXJUaW1lb3V0ID0gd2luZG93LmNsZWFyVGltZW91dCxcclxuICAgICAgcGVuZGluZ0RlZmVySWRzID0ge307XHJcblxyXG4gIHNlbGYuaXNNb2NrID0gZmFsc2U7XHJcblxyXG4gIHZhciBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9IDA7XHJcbiAgdmFyIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcyA9IFtdO1xyXG5cclxuICAvLyBUT0RPKHZvanRhKTogcmVtb3ZlIHRoaXMgdGVtcG9yYXJ5IGFwaVxyXG4gIHNlbGYuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCA9IGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0O1xyXG4gIHNlbGYuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9IGZ1bmN0aW9uKCkgeyBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCsrOyB9O1xyXG5cclxuICAvKipcclxuICAgKiBFeGVjdXRlcyB0aGUgYGZuYCBmdW5jdGlvbihzdXBwb3J0cyBjdXJyeWluZykgYW5kIGRlY3JlbWVudHMgdGhlIGBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3NgXHJcbiAgICogY291bnRlci4gSWYgdGhlIGNvdW50ZXIgcmVhY2hlcyAwLCBhbGwgdGhlIGBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3NgIGFyZSBleGVjdXRlZC5cclxuICAgKi9cclxuICBmdW5jdGlvbiBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgZm4uYXBwbHkobnVsbCwgc2xpY2VBcmdzKGFyZ3VtZW50cywgMSkpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQtLTtcclxuICAgICAgaWYgKG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID09PSAwKSB7XHJcbiAgICAgICAgd2hpbGUob3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLnBvcCgpKCk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICRsb2cuZXJyb3IoZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIE5vdGU6IHRoaXMgbWV0aG9kIGlzIHVzZWQgb25seSBieSBzY2VuYXJpbyBydW5uZXJcclxuICAgKiBUT0RPKHZvanRhKTogcHJlZml4IHRoaXMgbWV0aG9kIHdpdGggJCQgP1xyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2sgRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIG5vIG91dHN0YW5kaW5nIHJlcXVlc3RcclxuICAgKi9cclxuICBzZWxmLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgLy8gZm9yY2UgYnJvd3NlciB0byBleGVjdXRlIGFsbCBwb2xsRm5zIC0gdGhpcyBpcyBuZWVkZWQgc28gdGhhdCBjb29raWVzIGFuZCBvdGhlciBwb2xsZXJzIGZpcmVcclxuICAgIC8vIGF0IHNvbWUgZGV0ZXJtaW5pc3RpYyB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIHRlc3QgcnVubmVyJ3MgYWN0aW9ucy4gTGVhdmluZyB0aGluZ3MgdXAgdG8gdGhlXHJcbiAgICAvLyByZWd1bGFyIHBvbGxlciB3b3VsZCByZXN1bHQgaW4gZmxha3kgdGVzdHMuXHJcbiAgICBmb3JFYWNoKHBvbGxGbnMsIGZ1bmN0aW9uKHBvbGxGbil7IHBvbGxGbigpOyB9KTtcclxuXHJcbiAgICBpZiAob3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPT09IDApIHtcclxuICAgICAgY2FsbGJhY2soKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vIFBvbGwgV2F0Y2hlciBBUElcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIHZhciBwb2xsRm5zID0gW10sXHJcbiAgICAgIHBvbGxUaW1lb3V0O1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSAkYnJvd3NlciNhZGRQb2xsRm5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gUG9sbCBmdW5jdGlvbiB0byBhZGRcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEFkZHMgYSBmdW5jdGlvbiB0byB0aGUgbGlzdCBvZiBmdW5jdGlvbnMgdGhhdCBwb2xsZXIgcGVyaW9kaWNhbGx5IGV4ZWN1dGVzLFxyXG4gICAqIGFuZCBzdGFydHMgcG9sbGluZyBpZiBub3Qgc3RhcnRlZCB5ZXQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gdGhlIGFkZGVkIGZ1bmN0aW9uXHJcbiAgICovXHJcbiAgc2VsZi5hZGRQb2xsRm4gPSBmdW5jdGlvbihmbikge1xyXG4gICAgaWYgKGlzVW5kZWZpbmVkKHBvbGxUaW1lb3V0KSkgc3RhcnRQb2xsZXIoMTAwLCBzZXRUaW1lb3V0KTtcclxuICAgIHBvbGxGbnMucHVzaChmbik7XHJcbiAgICByZXR1cm4gZm47XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGludGVydmFsIEhvdyBvZnRlbiBzaG91bGQgYnJvd3NlciBjYWxsIHBvbGwgZnVuY3Rpb25zIChtcylcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IHNldFRpbWVvdXQgUmVmZXJlbmNlIHRvIGEgcmVhbCBvciBmYWtlIGBzZXRUaW1lb3V0YCBmdW5jdGlvbi5cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENvbmZpZ3VyZXMgdGhlIHBvbGxlciB0byBydW4gaW4gdGhlIHNwZWNpZmllZCBpbnRlcnZhbHMsIHVzaW5nIHRoZSBzcGVjaWZpZWRcclxuICAgKiBzZXRUaW1lb3V0IGZuIGFuZCBraWNrcyBpdCBvZmYuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gc3RhcnRQb2xsZXIoaW50ZXJ2YWwsIHNldFRpbWVvdXQpIHtcclxuICAgIChmdW5jdGlvbiBjaGVjaygpIHtcclxuICAgICAgZm9yRWFjaChwb2xsRm5zLCBmdW5jdGlvbihwb2xsRm4peyBwb2xsRm4oKTsgfSk7XHJcbiAgICAgIHBvbGxUaW1lb3V0ID0gc2V0VGltZW91dChjaGVjaywgaW50ZXJ2YWwpO1xyXG4gICAgfSkoKTtcclxuICB9XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gVVJMIEFQSVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIHZhciBsYXN0QnJvd3NlclVybCA9IGxvY2F0aW9uLmhyZWYsXHJcbiAgICAgIGJhc2VFbGVtZW50ID0gZG9jdW1lbnQuZmluZCgnYmFzZScpLFxyXG4gICAgICBuZXdMb2NhdGlvbiA9IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI3VybFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogR0VUVEVSOlxyXG4gICAqIFdpdGhvdXQgYW55IGFyZ3VtZW50LCB0aGlzIG1ldGhvZCBqdXN0IHJldHVybnMgY3VycmVudCB2YWx1ZSBvZiBsb2NhdGlvbi5ocmVmLlxyXG4gICAqXHJcbiAgICogU0VUVEVSOlxyXG4gICAqIFdpdGggYXQgbGVhc3Qgb25lIGFyZ3VtZW50LCB0aGlzIG1ldGhvZCBzZXRzIHVybCB0byBuZXcgdmFsdWUuXHJcbiAgICogSWYgaHRtbDUgaGlzdG9yeSBhcGkgc3VwcG9ydGVkLCBwdXNoU3RhdGUvcmVwbGFjZVN0YXRlIGlzIHVzZWQsIG90aGVyd2lzZVxyXG4gICAqIGxvY2F0aW9uLmhyZWYvbG9jYXRpb24ucmVwbGFjZSBpcyB1c2VkLlxyXG4gICAqIFJldHVybnMgaXRzIG93biBpbnN0YW5jZSB0byBhbGxvdyBjaGFpbmluZ1xyXG4gICAqXHJcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5IHRoZSAkbG9jYXRpb24gc2VydmljZS4gUGxlYXNlIHVzZSB0aGVcclxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbiBzZXJ2aWNlfSB0byBjaGFuZ2UgdXJsLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBOZXcgdXJsICh3aGVuIHVzZWQgYXMgc2V0dGVyKVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlcGxhY2UgU2hvdWxkIG5ldyB1cmwgcmVwbGFjZSBjdXJyZW50IGhpc3RvcnkgcmVjb3JkID9cclxuICAgKi9cclxuICBzZWxmLnVybCA9IGZ1bmN0aW9uKHVybCwgcmVwbGFjZSkge1xyXG4gICAgLy8gQW5kcm9pZCBCcm93c2VyIEJGQ2FjaGUgY2F1c2VzIGxvY2F0aW9uLCBoaXN0b3J5IHJlZmVyZW5jZSB0byBiZWNvbWUgc3RhbGUuXHJcbiAgICBpZiAobG9jYXRpb24gIT09IHdpbmRvdy5sb2NhdGlvbikgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XHJcbiAgICBpZiAoaGlzdG9yeSAhPT0gd2luZG93Lmhpc3RvcnkpIGhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcclxuXHJcbiAgICAvLyBzZXR0ZXJcclxuICAgIGlmICh1cmwpIHtcclxuICAgICAgaWYgKGxhc3RCcm93c2VyVXJsID09IHVybCkgcmV0dXJuO1xyXG4gICAgICBsYXN0QnJvd3NlclVybCA9IHVybDtcclxuICAgICAgaWYgKCRzbmlmZmVyLmhpc3RvcnkpIHtcclxuICAgICAgICBpZiAocmVwbGFjZSkgaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsIHVybCk7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnJywgdXJsKTtcclxuICAgICAgICAgIC8vIENyYXp5IE9wZXJhIEJ1ZzogaHR0cDovL215Lm9wZXJhLmNvbS9jb21tdW5pdHkvZm9ydW1zL3RvcGljLmRtbD9pZD0xMTg1NDYyXHJcbiAgICAgICAgICBiYXNlRWxlbWVudC5hdHRyKCdocmVmJywgYmFzZUVsZW1lbnQuYXR0cignaHJlZicpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmV3TG9jYXRpb24gPSB1cmw7XHJcbiAgICAgICAgaWYgKHJlcGxhY2UpIHtcclxuICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UodXJsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICAvLyBnZXR0ZXJcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIC0gbmV3TG9jYXRpb24gaXMgYSB3b3JrYXJvdW5kIGZvciBhbiBJRTctOSBpc3N1ZSB3aXRoIGxvY2F0aW9uLnJlcGxhY2UgYW5kIGxvY2F0aW9uLmhyZWZcclxuICAgICAgLy8gICBtZXRob2RzIG5vdCB1cGRhdGluZyBsb2NhdGlvbi5ocmVmIHN5bmNocm9ub3VzbHkuXHJcbiAgICAgIC8vIC0gdGhlIHJlcGxhY2VtZW50IGlzIGEgd29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDA3MTcyXHJcbiAgICAgIHJldHVybiBuZXdMb2NhdGlvbiB8fCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyUyNy9nLFwiJ1wiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgdXJsQ2hhbmdlTGlzdGVuZXJzID0gW10sXHJcbiAgICAgIHVybENoYW5nZUluaXQgPSBmYWxzZTtcclxuXHJcbiAgZnVuY3Rpb24gZmlyZVVybENoYW5nZSgpIHtcclxuICAgIG5ld0xvY2F0aW9uID0gbnVsbDtcclxuICAgIGlmIChsYXN0QnJvd3NlclVybCA9PSBzZWxmLnVybCgpKSByZXR1cm47XHJcblxyXG4gICAgbGFzdEJyb3dzZXJVcmwgPSBzZWxmLnVybCgpO1xyXG4gICAgZm9yRWFjaCh1cmxDaGFuZ2VMaXN0ZW5lcnMsIGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICAgIGxpc3RlbmVyKHNlbGYudXJsKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSAkYnJvd3NlciNvblVybENoYW5nZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmVnaXN0ZXIgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCwgd2hlbiB1cmwgY2hhbmdlcy5cclxuICAgKlxyXG4gICAqIEl0J3Mgb25seSBjYWxsZWQgd2hlbiB0aGUgdXJsIGlzIGNoYW5nZWQgZnJvbSBvdXRzaWRlIG9mIGFuZ3VsYXI6XHJcbiAgICogLSB1c2VyIHR5cGVzIGRpZmZlcmVudCB1cmwgaW50byBhZGRyZXNzIGJhclxyXG4gICAqIC0gdXNlciBjbGlja3Mgb24gaGlzdG9yeSAoZm9yd2FyZC9iYWNrKSBidXR0b25cclxuICAgKiAtIHVzZXIgY2xpY2tzIG9uIGEgbGlua1xyXG4gICAqXHJcbiAgICogSXQncyBub3QgY2FsbGVkIHdoZW4gdXJsIGlzIGNoYW5nZWQgYnkgJGJyb3dzZXIudXJsKCkgbWV0aG9kXHJcbiAgICpcclxuICAgKiBUaGUgbGlzdGVuZXIgZ2V0cyBjYWxsZWQgd2l0aCBuZXcgdXJsIGFzIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIE5PVEU6IHRoaXMgYXBpIGlzIGludGVuZGVkIGZvciB1c2Ugb25seSBieSB0aGUgJGxvY2F0aW9uIHNlcnZpY2UuIFBsZWFzZSB1c2UgdGhlXHJcbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiAkbG9jYXRpb24gc2VydmljZX0gdG8gbW9uaXRvciB1cmwgY2hhbmdlcyBpbiBhbmd1bGFyIGFwcHMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHVybCBjaGFuZ2VzLlxyXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9uKHN0cmluZyl9IFJldHVybnMgdGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXIgZm4gLSBoYW5keSBpZiB0aGUgZm4gaXMgYW5vbnltb3VzLlxyXG4gICAqL1xyXG4gIHNlbGYub25VcmxDaGFuZ2UgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgLy8gVE9ETyh2b2p0YSk6IHJlZmFjdG9yIHRvIHVzZSBub2RlJ3Mgc3ludGF4IGZvciBldmVudHNcclxuICAgIGlmICghdXJsQ2hhbmdlSW5pdCkge1xyXG4gICAgICAvLyBXZSBsaXN0ZW4gb24gYm90aCAoaGFzaGNoYW5nZS9wb3BzdGF0ZSkgd2hlbiBhdmFpbGFibGUsIGFzIHNvbWUgYnJvd3NlcnMgKGUuZy4gT3BlcmEpXHJcbiAgICAgIC8vIGRvbid0IGZpcmUgcG9wc3RhdGUgd2hlbiB1c2VyIGNoYW5nZSB0aGUgYWRkcmVzcyBiYXIgYW5kIGRvbid0IGZpcmUgaGFzaGNoYW5nZSB3aGVuIHVybFxyXG4gICAgICAvLyBjaGFuZ2VkIGJ5IHB1c2gvcmVwbGFjZVN0YXRlXHJcblxyXG4gICAgICAvLyBodG1sNSBoaXN0b3J5IGFwaSAtIHBvcHN0YXRlIGV2ZW50XHJcbiAgICAgIGlmICgkc25pZmZlci5oaXN0b3J5KSBqcUxpdGUod2luZG93KS5vbigncG9wc3RhdGUnLCBmaXJlVXJsQ2hhbmdlKTtcclxuICAgICAgLy8gaGFzaGNoYW5nZSBldmVudFxyXG4gICAgICBpZiAoJHNuaWZmZXIuaGFzaGNoYW5nZSkganFMaXRlKHdpbmRvdykub24oJ2hhc2hjaGFuZ2UnLCBmaXJlVXJsQ2hhbmdlKTtcclxuICAgICAgLy8gcG9sbGluZ1xyXG4gICAgICBlbHNlIHNlbGYuYWRkUG9sbEZuKGZpcmVVcmxDaGFuZ2UpO1xyXG5cclxuICAgICAgdXJsQ2hhbmdlSW5pdCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdXJsQ2hhbmdlTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgcmV0dXJuIGNhbGxiYWNrO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSB1cmwgaGFzIGNoYW5nZWQgb3V0c2lkZSBvZiBBbmd1bGFyLlxyXG4gICAqIE5lZWRzIHRvIGJlIGV4cG9ydGVkIHRvIGJlIGFibGUgdG8gY2hlY2sgZm9yIGNoYW5nZXMgdGhhdCBoYXZlIGJlZW4gZG9uZSBpbiBzeW5jLFxyXG4gICAqIGFzIGhhc2hjaGFuZ2UvcG9wc3RhdGUgZXZlbnRzIGZpcmUgaW4gYXN5bmMuXHJcbiAgICovXHJcbiAgc2VsZi4kJGNoZWNrVXJsQ2hhbmdlID0gZmlyZVVybENoYW5nZTtcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyBNaXNjIEFQSVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2Jhc2VIcmVmXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXR1cm5zIGN1cnJlbnQgPGJhc2UgaHJlZj5cclxuICAgKiAoYWx3YXlzIHJlbGF0aXZlIC0gd2l0aG91dCBkb21haW4pXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY3VycmVudCBiYXNlIGhyZWZcclxuICAgKi9cclxuICBzZWxmLmJhc2VIcmVmID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaHJlZiA9IGJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnKTtcclxuICAgIHJldHVybiBocmVmID8gaHJlZi5yZXBsYWNlKC9eKGh0dHBzP1xcOik/XFwvXFwvW15cXC9dKi8sICcnKSA6ICcnO1xyXG4gIH07XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gQ29va2llcyBBUElcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIHZhciBsYXN0Q29va2llcyA9IHt9O1xyXG4gIHZhciBsYXN0Q29va2llU3RyaW5nID0gJyc7XHJcbiAgdmFyIGNvb2tpZVBhdGggPSBzZWxmLmJhc2VIcmVmKCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2Nvb2tpZXNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBDb29raWUgbmFtZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdmFsdWUgQ29va2llIHZhbHVlXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUaGUgY29va2llcyBtZXRob2QgcHJvdmlkZXMgYSAncHJpdmF0ZScgbG93IGxldmVsIGFjY2VzcyB0byBicm93c2VyIGNvb2tpZXMuXHJcbiAgICogSXQgaXMgbm90IG1lYW50IHRvIGJlIHVzZWQgZGlyZWN0bHksIHVzZSB0aGUgJGNvb2tpZSBzZXJ2aWNlIGluc3RlYWQuXHJcbiAgICpcclxuICAgKiBUaGUgcmV0dXJuIHZhbHVlcyB2YXJ5IGRlcGVuZGluZyBvbiB0aGUgYXJndW1lbnRzIHRoYXQgdGhlIG1ldGhvZCB3YXMgY2FsbGVkIHdpdGggYXMgZm9sbG93czpcclxuICAgKlxyXG4gICAqIC0gY29va2llcygpIC0+IGhhc2ggb2YgYWxsIGNvb2tpZXMsIHRoaXMgaXMgTk9UIGEgY29weSBvZiB0aGUgaW50ZXJuYWwgc3RhdGUsIHNvIGRvIG5vdCBtb2RpZnlcclxuICAgKiAgIGl0XHJcbiAgICogLSBjb29raWVzKG5hbWUsIHZhbHVlKSAtPiBzZXQgbmFtZSB0byB2YWx1ZSwgaWYgdmFsdWUgaXMgdW5kZWZpbmVkIGRlbGV0ZSB0aGUgY29va2llXHJcbiAgICogLSBjb29raWVzKG5hbWUpIC0+IHRoZSBzYW1lIGFzIChuYW1lLCB1bmRlZmluZWQpID09IERFTEVURVMgKG5vIG9uZSBjYWxscyBpdCByaWdodCBub3cgdGhhdFxyXG4gICAqICAgd2F5KVxyXG4gICAqXHJcbiAgICogQHJldHVybnMge09iamVjdH0gSGFzaCBvZiBhbGwgY29va2llcyAoaWYgY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlcilcclxuICAgKi9cclxuICBzZWxmLmNvb2tpZXMgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xyXG4gICAgdmFyIGNvb2tpZUxlbmd0aCwgY29va2llQXJyYXksIGNvb2tpZSwgaSwgaW5kZXg7XHJcblxyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByYXdEb2N1bWVudC5jb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyBcIj07cGF0aD1cIiArIGNvb2tpZVBhdGggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVRcIjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XHJcbiAgICAgICAgICBjb29raWVMZW5ndGggPSAocmF3RG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJztwYXRoPScgKyBjb29raWVQYXRoKS5sZW5ndGggKyAxO1xyXG5cclxuICAgICAgICAgIC8vIHBlciBodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmMyMTA5LnR4dCBicm93c2VyIG11c3QgYWxsb3cgYXQgbWluaW11bTpcclxuICAgICAgICAgIC8vIC0gMzAwIGNvb2tpZXNcclxuICAgICAgICAgIC8vIC0gMjAgY29va2llcyBwZXIgdW5pcXVlIGRvbWFpblxyXG4gICAgICAgICAgLy8gLSA0MDk2IGJ5dGVzIHBlciBjb29raWVcclxuICAgICAgICAgIGlmIChjb29raWVMZW5ndGggPiA0MDk2KSB7XHJcbiAgICAgICAgICAgICRsb2cud2FybihcIkNvb2tpZSAnXCIrIG5hbWUgK1xyXG4gICAgICAgICAgICAgIFwiJyBwb3NzaWJseSBub3Qgc2V0IG9yIG92ZXJmbG93ZWQgYmVjYXVzZSBpdCB3YXMgdG9vIGxhcmdlIChcIitcclxuICAgICAgICAgICAgICBjb29raWVMZW5ndGggKyBcIiA+IDQwOTYgYnl0ZXMpIVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChyYXdEb2N1bWVudC5jb29raWUgIT09IGxhc3RDb29raWVTdHJpbmcpIHtcclxuICAgICAgICBsYXN0Q29va2llU3RyaW5nID0gcmF3RG9jdW1lbnQuY29va2llO1xyXG4gICAgICAgIGNvb2tpZUFycmF5ID0gbGFzdENvb2tpZVN0cmluZy5zcGxpdChcIjsgXCIpO1xyXG4gICAgICAgIGxhc3RDb29raWVzID0ge307XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb29raWVBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgY29va2llID0gY29va2llQXJyYXlbaV07XHJcbiAgICAgICAgICBpbmRleCA9IGNvb2tpZS5pbmRleE9mKCc9Jyk7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7IC8vaWdub3JlIG5hbWVsZXNzIGNvb2tpZXNcclxuICAgICAgICAgICAgbmFtZSA9IGRlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKDAsIGluZGV4KSk7XHJcbiAgICAgICAgICAgIC8vIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IGlzIHNlZW4gZm9yIGEgY29va2llIGlzIHRoZSBtb3N0XHJcbiAgICAgICAgICAgIC8vIHNwZWNpZmljIG9uZS4gIHZhbHVlcyBmb3IgdGhlIHNhbWUgY29va2llIG5hbWUgdGhhdFxyXG4gICAgICAgICAgICAvLyBmb2xsb3cgYXJlIGZvciBsZXNzIHNwZWNpZmljIHBhdGhzLlxyXG4gICAgICAgICAgICBpZiAobGFzdENvb2tpZXNbbmFtZV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIGxhc3RDb29raWVzW25hbWVdID0gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcoaW5kZXggKyAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGxhc3RDb29raWVzO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSAkYnJvd3NlciNkZWZlclxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiwgd2hvJ3MgZXhlY3V0aW9uIHNob3VsZCBiZSBkZWZlcnJlZC5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IFtkZWxheT0wXSBvZiBtaWxsaXNlY29uZHMgdG8gZGVmZXIgdGhlIGZ1bmN0aW9uIGV4ZWN1dGlvbi5cclxuICAgKiBAcmV0dXJucyB7Kn0gRGVmZXJJZCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNhbmNlbCB0aGUgdGFzayB2aWEgYCRicm93c2VyLmRlZmVyLmNhbmNlbCgpYC5cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEV4ZWN1dGVzIGEgZm4gYXN5bmNocm9ub3VzbHkgdmlhIGBzZXRUaW1lb3V0KGZuLCBkZWxheSlgLlxyXG4gICAqXHJcbiAgICogVW5saWtlIHdoZW4gY2FsbGluZyBgc2V0VGltZW91dGAgZGlyZWN0bHksIGluIHRlc3QgdGhpcyBmdW5jdGlvbiBpcyBtb2NrZWQgYW5kIGluc3RlYWQgb2YgdXNpbmdcclxuICAgKiBgc2V0VGltZW91dGAgaW4gdGVzdHMsIHRoZSBmbnMgYXJlIHF1ZXVlZCBpbiBhbiBhcnJheSwgd2hpY2ggY2FuIGJlIHByb2dyYW1tYXRpY2FsbHkgZmx1c2hlZFxyXG4gICAqIHZpYSBgJGJyb3dzZXIuZGVmZXIuZmx1c2goKWAuXHJcbiAgICpcclxuICAgKi9cclxuICBzZWxmLmRlZmVyID0gZnVuY3Rpb24oZm4sIGRlbGF5KSB7XHJcbiAgICB2YXIgdGltZW91dElkO1xyXG4gICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKztcclxuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGRlbGV0ZSBwZW5kaW5nRGVmZXJJZHNbdGltZW91dElkXTtcclxuICAgICAgY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoZm4pO1xyXG4gICAgfSwgZGVsYXkgfHwgMCk7XHJcbiAgICBwZW5kaW5nRGVmZXJJZHNbdGltZW91dElkXSA9IHRydWU7XHJcbiAgICByZXR1cm4gdGltZW91dElkO1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSAkYnJvd3NlciNkZWZlci5jYW5jZWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbmNlbHMgYSBkZWZlcnJlZCB0YXNrIGlkZW50aWZpZWQgd2l0aCBgZGVmZXJJZGAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IGRlZmVySWQgVG9rZW4gcmV0dXJuZWQgYnkgdGhlIGAkYnJvd3Nlci5kZWZlcmAgZnVuY3Rpb24uXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB0YXNrIGhhc24ndCBleGVjdXRlZCB5ZXQgYW5kIHdhcyBzdWNjZXNzZnVsbHlcclxuICAgKiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWQuXHJcbiAgICovXHJcbiAgc2VsZi5kZWZlci5jYW5jZWwgPSBmdW5jdGlvbihkZWZlcklkKSB7XHJcbiAgICBpZiAocGVuZGluZ0RlZmVySWRzW2RlZmVySWRdKSB7XHJcbiAgICAgIGRlbGV0ZSBwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF07XHJcbiAgICAgIGNsZWFyVGltZW91dChkZWZlcklkKTtcclxuICAgICAgY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Qobm9vcCk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiAkQnJvd3NlclByb3ZpZGVyKCl7XHJcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRsb2cnLCAnJHNuaWZmZXInLCAnJGRvY3VtZW50JyxcclxuICAgICAgZnVuY3Rpb24oICR3aW5kb3csICAgJGxvZywgICAkc25pZmZlciwgICAkZG9jdW1lbnQpe1xyXG4gICAgICAgIHJldHVybiBuZXcgQnJvd3Nlcigkd2luZG93LCAkZG9jdW1lbnQsICRsb2csICRzbmlmZmVyKTtcclxuICAgICAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkY2FjaGVGYWN0b3J5XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBGYWN0b3J5IHRoYXQgY29uc3RydWN0cyB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0cyBhbmQgZ2l2ZXMgYWNjZXNzIHRvXHJcbiAqIHRoZW0uXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqXHJcbiAqICB2YXIgY2FjaGUgPSAkY2FjaGVGYWN0b3J5KCdjYWNoZUlkJyk7XHJcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ2NhY2hlSWQnKSkudG9CZShjYWNoZSk7XHJcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ25vU3VjaENhY2hlSWQnKSkubm90LnRvQmVEZWZpbmVkKCk7XHJcbiAqXHJcbiAqICBjYWNoZS5wdXQoXCJrZXlcIiwgXCJ2YWx1ZVwiKTtcclxuICogIGNhY2hlLnB1dChcImFub3RoZXIga2V5XCIsIFwiYW5vdGhlciB2YWx1ZVwiKTtcclxuICpcclxuICogIC8vIFdlJ3ZlIHNwZWNpZmllZCBubyBvcHRpb25zIG9uIGNyZWF0aW9uXHJcbiAqICBleHBlY3QoY2FjaGUuaW5mbygpKS50b0VxdWFsKHtpZDogJ2NhY2hlSWQnLCBzaXplOiAyfSk7XHJcbiAqXHJcbiAqIGBgYFxyXG4gKlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVJZCBOYW1lIG9yIGlkIG9mIHRoZSBuZXdseSBjcmVhdGVkIGNhY2hlLlxyXG4gKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgT3B0aW9ucyBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGNhY2hlIGJlaGF2aW9yLiBQcm9wZXJ0aWVzOlxyXG4gKlxyXG4gKiAgIC0gYHtudW1iZXI9fWAgYGNhcGFjaXR5YCDigJQgdHVybnMgdGhlIGNhY2hlIGludG8gTFJVIGNhY2hlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBOZXdseSBjcmVhdGVkIGNhY2hlIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgc2V0IG9mIG1ldGhvZHM6XHJcbiAqXHJcbiAqIC0gYHtvYmplY3R9YCBgaW5mbygpYCDigJQgUmV0dXJucyBpZCwgc2l6ZSwgYW5kIG9wdGlvbnMgb2YgY2FjaGUuXHJcbiAqIC0gYHt7Kn19YCBgcHV0KHtzdHJpbmd9IGtleSwgeyp9IHZhbHVlKWAg4oCUIFB1dHMgYSBuZXcga2V5LXZhbHVlIHBhaXIgaW50byB0aGUgY2FjaGUgYW5kIHJldHVybnNcclxuICogICBpdC5cclxuICogLSBge3sqfX1gIGBnZXQoe3N0cmluZ30ga2V5KWAg4oCUIFJldHVybnMgY2FjaGVkIHZhbHVlIGZvciBga2V5YCBvciB1bmRlZmluZWQgZm9yIGNhY2hlIG1pc3MuXHJcbiAqIC0gYHt2b2lkfWAgYHJlbW92ZSh7c3RyaW5nfSBrZXkpYCDigJQgUmVtb3ZlcyBhIGtleS12YWx1ZSBwYWlyIGZyb20gdGhlIGNhY2hlLlxyXG4gKiAtIGB7dm9pZH1gIGByZW1vdmVBbGwoKWAg4oCUIFJlbW92ZXMgYWxsIGNhY2hlZCB2YWx1ZXMuXHJcbiAqIC0gYHt2b2lkfWAgYGRlc3Ryb3koKWAg4oCUIFJlbW92ZXMgcmVmZXJlbmNlcyB0byB0aGlzIGNhY2hlIGZyb20gJGNhY2hlRmFjdG9yeS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwiY2FjaGVFeGFtcGxlQXBwXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkNhY2hlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJuZXdDYWNoZUtleVwiIHBsYWNlaG9sZGVyPVwiS2V5XCI+XHJcbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlVmFsdWVcIiBwbGFjZWhvbGRlcj1cIlZhbHVlXCI+XHJcbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJwdXQobmV3Q2FjaGVLZXksIG5ld0NhY2hlVmFsdWUpXCI+Q2FjaGU8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgIDxwIG5nLWlmPVwia2V5cy5sZW5ndGhcIj5DYWNoZWQgVmFsdWVzPC9wPlxyXG4gICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cImtleSBpbiBrZXlzXCI+XHJcbiAgICAgICAgICAgPHNwYW4gbmctYmluZD1cImtleVwiPjwvc3Bhbj5cclxuICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cclxuICAgICAgICAgICA8YiBuZy1iaW5kPVwiY2FjaGUuZ2V0KGtleSlcIj48L2I+XHJcbiAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgPHA+Q2FjaGUgSW5mbzwvcD5cclxuICAgICAgICAgPGRpdiBuZy1yZXBlYXQ9XCIoa2V5LCB2YWx1ZSkgaW4gY2FjaGUuaW5mbygpXCI+XHJcbiAgICAgICAgICAgPHNwYW4gbmctYmluZD1cImtleVwiPjwvc3Bhbj5cclxuICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cclxuICAgICAgICAgICA8YiBuZy1iaW5kPVwidmFsdWVcIj48L2I+XHJcbiAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjYWNoZUV4YW1wbGVBcHAnLCBbXSkuXHJcbiAgICAgICAgIGNvbnRyb2xsZXIoJ0NhY2hlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRjYWNoZUZhY3RvcnknLCBmdW5jdGlvbigkc2NvcGUsICRjYWNoZUZhY3RvcnkpIHtcclxuICAgICAgICAgICAkc2NvcGUua2V5cyA9IFtdO1xyXG4gICAgICAgICAgICRzY29wZS5jYWNoZSA9ICRjYWNoZUZhY3RvcnkoJ2NhY2hlSWQnKTtcclxuICAgICAgICAgICAkc2NvcGUucHV0ID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgaWYgKCRzY29wZS5jYWNoZS5nZXQoa2V5KSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICRzY29wZS5jYWNoZS5wdXQoa2V5LCB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlKTtcclxuICAgICAgICAgICB9O1xyXG4gICAgICAgICB9XSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgIHAge1xyXG4gICAgICAgICBtYXJnaW46IDEwcHggMCAzcHg7XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiAkQ2FjaGVGYWN0b3J5UHJvdmlkZXIoKSB7XHJcblxyXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGNhY2hlcyA9IHt9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNhY2hlRmFjdG9yeShjYWNoZUlkLCBvcHRpb25zKSB7XHJcbiAgICAgIGlmIChjYWNoZUlkIGluIGNhY2hlcykge1xyXG4gICAgICAgIHRocm93IG1pbkVycignJGNhY2hlRmFjdG9yeScpKCdpaWQnLCBcIkNhY2hlSWQgJ3swfScgaXMgYWxyZWFkeSB0YWtlbiFcIiwgY2FjaGVJZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBzaXplID0gMCxcclxuICAgICAgICAgIHN0YXRzID0gZXh0ZW5kKHt9LCBvcHRpb25zLCB7aWQ6IGNhY2hlSWR9KSxcclxuICAgICAgICAgIGRhdGEgPSB7fSxcclxuICAgICAgICAgIGNhcGFjaXR5ID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5jYXBhY2l0eSkgfHwgTnVtYmVyLk1BWF9WQUxVRSxcclxuICAgICAgICAgIGxydUhhc2ggPSB7fSxcclxuICAgICAgICAgIGZyZXNoRW5kID0gbnVsbCxcclxuICAgICAgICAgIHN0YWxlRW5kID0gbnVsbDtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgdHlwZVxyXG4gICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBBIGNhY2hlIG9iamVjdCB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBkYXRhLCBwcmltYXJpbHkgdXNlZCBieVxyXG4gICAgICAgKiB7QGxpbmsgJGh0dHAgJGh0dHB9IGFuZCB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpzY3JpcHQgc2NyaXB0fSBkaXJlY3RpdmUgdG8gY2FjaGVcclxuICAgICAgICogdGVtcGxhdGVzIGFuZCBvdGhlciBkYXRhLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgKiAgYW5ndWxhci5tb2R1bGUoJ3N1cGVyQ2FjaGUnKVxyXG4gICAgICAgKiAgICAuZmFjdG9yeSgnc3VwZXJDYWNoZScsIFsnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRjYWNoZUZhY3RvcnkpIHtcclxuICAgICAgICogICAgICByZXR1cm4gJGNhY2hlRmFjdG9yeSgnc3VwZXItY2FjaGUnKTtcclxuICAgICAgICogICAgfV0pO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICogRXhhbXBsZSB0ZXN0OlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgKiAgaXQoJ3Nob3VsZCBiZWhhdmUgbGlrZSBhIGNhY2hlJywgaW5qZWN0KGZ1bmN0aW9uKHN1cGVyQ2FjaGUpIHtcclxuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2tleScsICd2YWx1ZScpO1xyXG4gICAgICAgKiAgICBzdXBlckNhY2hlLnB1dCgnYW5vdGhlciBrZXknLCAnYW5vdGhlciB2YWx1ZScpO1xyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5pbmZvKCkpLnRvRXF1YWwoe1xyXG4gICAgICAgKiAgICAgIGlkOiAnc3VwZXItY2FjaGUnLFxyXG4gICAgICAgKiAgICAgIHNpemU6IDJcclxuICAgICAgICogICAgfSk7XHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgIHN1cGVyQ2FjaGUucmVtb3ZlKCdhbm90aGVyIGtleScpO1xyXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5nZXQoJ2Fub3RoZXIga2V5JykpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICpcclxuICAgICAgICogICAgc3VwZXJDYWNoZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICogICAgZXhwZWN0KHN1cGVyQ2FjaGUuaW5mbygpKS50b0VxdWFsKHtcclxuICAgICAgICogICAgICBpZDogJ3N1cGVyLWNhY2hlJyxcclxuICAgICAgICogICAgICBzaXplOiAwXHJcbiAgICAgICAqICAgIH0pO1xyXG4gICAgICAgKiAgfSkpO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICovXHJcbiAgICAgIHJldHVybiBjYWNoZXNbY2FjaGVJZF0gPSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3B1dFxyXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBJbnNlcnRzIGEgbmFtZWQgZW50cnkgaW50byB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdCB0byBiZVxyXG4gICAgICAgICAqIHJldHJpZXZlZCBsYXRlciwgYW5kIGluY3JlbWVudGluZyB0aGUgc2l6ZSBvZiB0aGUgY2FjaGUgaWYgdGhlIGtleSB3YXMgbm90IGFscmVhZHlcclxuICAgICAgICAgKiBwcmVzZW50IGluIHRoZSBjYWNoZS4gSWYgYmVoYXZpbmcgbGlrZSBhbiBMUlUgY2FjaGUsIGl0IHdpbGwgYWxzbyByZW1vdmUgc3RhbGVcclxuICAgICAgICAgKiBlbnRyaWVzIGZyb20gdGhlIHNldC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEl0IHdpbGwgbm90IGluc2VydCB1bmRlZmluZWQgdmFsdWVzIGludG8gdGhlIGNhY2hlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IHVuZGVyIHdoaWNoIHRoZSBjYWNoZWQgZGF0YSBpcyBzdG9yZWQuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSB0aGUgdmFsdWUgdG8gc3RvcmUgYWxvbmdzaWRlIHRoZSBrZXkuIElmIGl0IGlzIHVuZGVmaW5lZCwgdGhlIGtleVxyXG4gICAgICAgICAqICAgIHdpbGwgbm90IGJlIHN0b3JlZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHN0b3JlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgIGlmIChjYXBhY2l0eSA8IE51bWJlci5NQVhfVkFMVUUpIHtcclxuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldIHx8IChscnVIYXNoW2tleV0gPSB7a2V5OiBrZXl9KTtcclxuXHJcbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybjtcclxuICAgICAgICAgIGlmICghKGtleSBpbiBkYXRhKSkgc2l6ZSsrO1xyXG4gICAgICAgICAgZGF0YVtrZXldID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgaWYgKHNpemUgPiBjYXBhY2l0eSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZShzdGFsZUVuZC5rZXkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNnZXRcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0cmlldmVzIG5hbWVkIGRhdGEgc3RvcmVkIGluIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IG9mIHRoZSBkYXRhIHRvIGJlIHJldHJpZXZlZFxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgc3RvcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZiAoY2FwYWNpdHkgPCBOdW1iZXIuTUFYX1ZBTFVFKSB7XHJcbiAgICAgICAgICAgIHZhciBscnVFbnRyeSA9IGxydUhhc2hba2V5XTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbHJ1RW50cnkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3JlbW92ZVxyXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZW1vdmVzIGFuIGVudHJ5IGZyb20gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGJlIHJlbW92ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xyXG4gICAgICAgICAgICB2YXIgbHJ1RW50cnkgPSBscnVIYXNoW2tleV07XHJcblxyXG4gICAgICAgICAgICBpZiAoIWxydUVudHJ5KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAobHJ1RW50cnkgPT0gZnJlc2hFbmQpIGZyZXNoRW5kID0gbHJ1RW50cnkucDtcclxuICAgICAgICAgICAgaWYgKGxydUVudHJ5ID09IHN0YWxlRW5kKSBzdGFsZUVuZCA9IGxydUVudHJ5Lm47XHJcbiAgICAgICAgICAgIGxpbmsobHJ1RW50cnkubixscnVFbnRyeS5wKTtcclxuXHJcbiAgICAgICAgICAgIGRlbGV0ZSBscnVIYXNoW2tleV07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcclxuICAgICAgICAgIHNpemUtLTtcclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjcmVtb3ZlQWxsXHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENsZWFycyB0aGUgY2FjaGUgb2JqZWN0IG9mIGFueSBlbnRyaWVzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZUFsbDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBkYXRhID0ge307XHJcbiAgICAgICAgICBzaXplID0gMDtcclxuICAgICAgICAgIGxydUhhc2ggPSB7fTtcclxuICAgICAgICAgIGZyZXNoRW5kID0gc3RhbGVFbmQgPSBudWxsO1xyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNkZXN0cm95XHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIERlc3Ryb3lzIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0IGVudGlyZWx5LFxyXG4gICAgICAgICAqIHJlbW92aW5nIGl0IGZyb20gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5ICRjYWNoZUZhY3Rvcnl9IHNldC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGRhdGEgPSBudWxsO1xyXG4gICAgICAgICAgc3RhdHMgPSBudWxsO1xyXG4gICAgICAgICAgbHJ1SGFzaCA9IG51bGw7XHJcbiAgICAgICAgICBkZWxldGUgY2FjaGVzW2NhY2hlSWRdO1xyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNpbmZvXHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHJpZXZlIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBhIHBhcnRpY3VsYXIge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge29iamVjdH0gYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxyXG4gICAgICAgICAqICAgPHVsPlxyXG4gICAgICAgICAqICAgICA8bGk+KippZCoqOiB0aGUgaWQgb2YgdGhlIGNhY2hlIGluc3RhbmNlPC9saT5cclxuICAgICAgICAgKiAgICAgPGxpPioqc2l6ZSoqOiB0aGUgbnVtYmVyIG9mIGVudHJpZXMga2VwdCBpbiB0aGUgY2FjaGUgaW5zdGFuY2U8L2xpPlxyXG4gICAgICAgICAqICAgICA8bGk+KiouLi4qKjogYW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCB3aGVuIGNyZWF0aW5nIHRoZVxyXG4gICAgICAgICAqICAgICAgIGNhY2hlLjwvbGk+XHJcbiAgICAgICAgICogICA8L3VsPlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluZm86IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgc3RhdHMsIHtzaXplOiBzaXplfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBtYWtlcyB0aGUgYGVudHJ5YCB0aGUgZnJlc2hFbmQgb2YgdGhlIExSVSBsaW5rZWQgbGlzdFxyXG4gICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gcmVmcmVzaChlbnRyeSkge1xyXG4gICAgICAgIGlmIChlbnRyeSAhPSBmcmVzaEVuZCkge1xyXG4gICAgICAgICAgaWYgKCFzdGFsZUVuZCkge1xyXG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5O1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChzdGFsZUVuZCA9PSBlbnRyeSkge1xyXG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5Lm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGluayhlbnRyeS5uLCBlbnRyeS5wKTtcclxuICAgICAgICAgIGxpbmsoZW50cnksIGZyZXNoRW5kKTtcclxuICAgICAgICAgIGZyZXNoRW5kID0gZW50cnk7XHJcbiAgICAgICAgICBmcmVzaEVuZC5uID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogYmlkaXJlY3Rpb25hbGx5IGxpbmtzIHR3byBlbnRyaWVzIG9mIHRoZSBMUlUgbGlua2VkIGxpc3RcclxuICAgICAgICovXHJcbiAgICAgIGZ1bmN0aW9uIGxpbmsobmV4dEVudHJ5LCBwcmV2RW50cnkpIHtcclxuICAgICAgICBpZiAobmV4dEVudHJ5ICE9IHByZXZFbnRyeSkge1xyXG4gICAgICAgICAgaWYgKG5leHRFbnRyeSkgbmV4dEVudHJ5LnAgPSBwcmV2RW50cnk7IC8vcCBzdGFuZHMgZm9yIHByZXZpb3VzLCAncHJldicgZGlkbid0IG1pbmlmeVxyXG4gICAgICAgICAgaWYgKHByZXZFbnRyeSkgcHJldkVudHJ5Lm4gPSBuZXh0RW50cnk7IC8vbiBzdGFuZHMgZm9yIG5leHQsICduZXh0JyBkaWRuJ3QgbWluaWZ5XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGNhY2hlRmFjdG9yeSNpbmZvXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBHZXQgaW5mb3JtYXRpb24gYWJvdXQgYWxsIHRoZSBjYWNoZXMgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZFxyXG4gICAqXHJcbiAgICogQHJldHVybnMge09iamVjdH0gLSBrZXktdmFsdWUgbWFwIG9mIGBjYWNoZUlkYCB0byB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgYGNhY2hlI2luZm9gXHJcbiAgICovXHJcbiAgICBjYWNoZUZhY3RvcnkuaW5mbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgaW5mbyA9IHt9O1xyXG4gICAgICBmb3JFYWNoKGNhY2hlcywgZnVuY3Rpb24oY2FjaGUsIGNhY2hlSWQpIHtcclxuICAgICAgICBpbmZvW2NhY2hlSWRdID0gY2FjaGUuaW5mbygpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGluZm87XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRjYWNoZUZhY3RvcnkjZ2V0XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBHZXQgYWNjZXNzIHRvIGEgY2FjaGUgb2JqZWN0IGJ5IHRoZSBgY2FjaGVJZGAgdXNlZCB3aGVuIGl0IHdhcyBjcmVhdGVkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNhY2hlSWQgTmFtZSBvciBpZCBvZiBhIGNhY2hlIHRvIGFjY2Vzcy5cclxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBDYWNoZSBvYmplY3QgaWRlbnRpZmllZCBieSB0aGUgY2FjaGVJZCBvciB1bmRlZmluZWQgaWYgbm8gc3VjaCBjYWNoZS5cclxuICAgKi9cclxuICAgIGNhY2hlRmFjdG9yeS5nZXQgPSBmdW5jdGlvbihjYWNoZUlkKSB7XHJcbiAgICAgIHJldHVybiBjYWNoZXNbY2FjaGVJZF07XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gY2FjaGVGYWN0b3J5O1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkdGVtcGxhdGVDYWNoZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGZpcnN0IHRpbWUgYSB0ZW1wbGF0ZSBpcyB1c2VkLCBpdCBpcyBsb2FkZWQgaW4gdGhlIHRlbXBsYXRlIGNhY2hlIGZvciBxdWljayByZXRyaWV2YWwuIFlvdVxyXG4gKiBjYW4gbG9hZCB0ZW1wbGF0ZXMgZGlyZWN0bHkgaW50byB0aGUgY2FjaGUgaW4gYSBgc2NyaXB0YCB0YWcsIG9yIGJ5IGNvbnN1bWluZyB0aGVcclxuICogYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlIGRpcmVjdGx5LlxyXG4gKlxyXG4gKiBBZGRpbmcgdmlhIHRoZSBgc2NyaXB0YCB0YWc6XHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L25nLXRlbXBsYXRlXCIgaWQ9XCJ0ZW1wbGF0ZUlkLmh0bWxcIj5cclxuICogICAgIDxwPlRoaXMgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlPC9wPlxyXG4gKiAgIDwvc2NyaXB0PlxyXG4gKiBgYGBcclxuICpcclxuICogKipOb3RlOioqIHRoZSBgc2NyaXB0YCB0YWcgY29udGFpbmluZyB0aGUgdGVtcGxhdGUgZG9lcyBub3QgbmVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYGhlYWRgIG9mXHJcbiAqIHRoZSBkb2N1bWVudCwgYnV0IGl0IG11c3QgYmUgYmVsb3cgdGhlIGBuZy1hcHBgIGRlZmluaXRpb24uXHJcbiAqXHJcbiAqIEFkZGluZyB2aWEgdGhlICR0ZW1wbGF0ZUNhY2hlIHNlcnZpY2U6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIHZhciBteUFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFtdKTtcclxuICogbXlBcHAucnVuKGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcbiAqICAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0ZW1wbGF0ZUlkLmh0bWwnLCAnVGhpcyBpcyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGUnKTtcclxuICogfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUbyByZXRyaWV2ZSB0aGUgdGVtcGxhdGUgbGF0ZXIsIHNpbXBseSB1c2UgaXQgaW4geW91ciBIVE1MOlxyXG4gKiBgYGBodG1sXHJcbiAqIDxkaXYgbmctaW5jbHVkZT1cIiAndGVtcGxhdGVJZC5odG1sJyBcIj48L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIG9yIGdldCBpdCB2aWEgSmF2YXNjcmlwdDpcclxuICogYGBganNcclxuICogJHRlbXBsYXRlQ2FjaGUuZ2V0KCd0ZW1wbGF0ZUlkLmh0bWwnKVxyXG4gKiBgYGBcclxuICpcclxuICogU2VlIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5ICRjYWNoZUZhY3Rvcnl9LlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gJFRlbXBsYXRlQ2FjaGVQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRjYWNoZUZhY3RvcnknLCBmdW5jdGlvbigkY2FjaGVGYWN0b3J5KSB7XHJcbiAgICByZXR1cm4gJGNhY2hlRmFjdG9yeSgndGVtcGxhdGVzJyk7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qICEgVkFSSUFCTEUvRlVOQ1RJT04gTkFNSU5HIENPTlZFTlRJT05TIFRIQVQgQVBQTFkgVE8gVEhJUyBGSUxFIVxyXG4gKlxyXG4gKiBET00tcmVsYXRlZCB2YXJpYWJsZXM6XHJcbiAqXHJcbiAqIC0gXCJub2RlXCIgLSBET00gTm9kZVxyXG4gKiAtIFwiZWxlbWVudFwiIC0gRE9NIEVsZW1lbnQgb3IgTm9kZVxyXG4gKiAtIFwiJG5vZGVcIiBvciBcIiRlbGVtZW50XCIgLSBqcUxpdGUtd3JhcHBlZCBub2RlIG9yIGVsZW1lbnRcclxuICpcclxuICpcclxuICogQ29tcGlsZXIgcmVsYXRlZCBzdHVmZjpcclxuICpcclxuICogLSBcImxpbmtGblwiIC0gbGlua2luZyBmbiBvZiBhIHNpbmdsZSBkaXJlY3RpdmVcclxuICogLSBcIm5vZGVMaW5rRm5cIiAtIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhbGwgbGlua2luZyBmbnMgZm9yIGEgcGFydGljdWxhciBub2RlXHJcbiAqIC0gXCJjaGlsZExpbmtGblwiIC0gIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhbGwgbGlua2luZyBmbnMgZm9yIGNoaWxkIG5vZGVzIG9mIGEgcGFydGljdWxhciBub2RlXHJcbiAqIC0gXCJjb21wb3NpdGVMaW5rRm5cIiAtIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhbGwgbGlua2luZyBmbnMgZm9yIGEgY29tcGlsYXRpb24gcm9vdCAobm9kZUxpc3QpXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkY29tcGlsZVxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ29tcGlsZXMgYW4gSFRNTCBzdHJpbmcgb3IgRE9NIGludG8gYSB0ZW1wbGF0ZSBhbmQgcHJvZHVjZXMgYSB0ZW1wbGF0ZSBmdW5jdGlvbiwgd2hpY2hcclxuICogY2FuIHRoZW4gYmUgdXNlZCB0byBsaW5rIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIGBzY29wZWB9IGFuZCB0aGUgdGVtcGxhdGUgdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBjb21waWxhdGlvbiBpcyBhIHByb2Nlc3Mgb2Ygd2Fsa2luZyB0aGUgRE9NIHRyZWUgYW5kIG1hdGNoaW5nIERPTSBlbGVtZW50cyB0b1xyXG4gKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqTm90ZToqKiBUaGlzIGRvY3VtZW50IGlzIGFuIGluLWRlcHRoIHJlZmVyZW5jZSBvZiBhbGwgZGlyZWN0aXZlIG9wdGlvbnMuXHJcbiAqIEZvciBhIGdlbnRsZSBpbnRyb2R1Y3Rpb24gdG8gZGlyZWN0aXZlcyB3aXRoIGV4YW1wbGVzIG9mIGNvbW1vbiB1c2UgY2FzZXMsXHJcbiAqIHNlZSB0aGUge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmUgZ3VpZGV9LlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogIyMgQ29tcHJlaGVuc2l2ZSBEaXJlY3RpdmUgQVBJXHJcbiAqXHJcbiAqIFRoZXJlIGFyZSBtYW55IGRpZmZlcmVudCBvcHRpb25zIGZvciBhIGRpcmVjdGl2ZS5cclxuICpcclxuICogVGhlIGRpZmZlcmVuY2UgcmVzaWRlcyBpbiB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmYWN0b3J5IGZ1bmN0aW9uLlxyXG4gKiBZb3UgY2FuIGVpdGhlciByZXR1cm4gYSBcIkRpcmVjdGl2ZSBEZWZpbml0aW9uIE9iamVjdFwiIChzZWUgYmVsb3cpIHRoYXQgZGVmaW5lcyB0aGUgZGlyZWN0aXZlIHByb3BlcnRpZXMsXHJcbiAqIG9yIGp1c3QgdGhlIGBwb3N0TGlua2AgZnVuY3Rpb24gKGFsbCBvdGhlciBwcm9wZXJ0aWVzIHdpbGwgaGF2ZSB0aGUgZGVmYXVsdCB2YWx1ZXMpLlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxyXG4gKiAqKkJlc3QgUHJhY3RpY2U6KiogSXQncyByZWNvbW1lbmRlZCB0byB1c2UgdGhlIFwiZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0XCIgZm9ybS5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqIEhlcmUncyBhbiBleGFtcGxlIGRpcmVjdGl2ZSBkZWNsYXJlZCB3aXRoIGEgRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0OlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKC4uLik7XHJcbiAqXHJcbiAqICAgbXlNb2R1bGUuZGlyZWN0aXZlKCdkaXJlY3RpdmVOYW1lJywgZnVuY3Rpb24gZmFjdG9yeShpbmplY3RhYmxlcykge1xyXG4gKiAgICAgdmFyIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3QgPSB7XHJcbiAqICAgICAgIHByaW9yaXR5OiAwLFxyXG4gKiAgICAgICB0ZW1wbGF0ZTogJzxkaXY+PC9kaXY+JywgLy8gb3IgLy8gZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykgeyAuLi4gfSxcclxuICogICAgICAgLy8gb3JcclxuICogICAgICAgLy8gdGVtcGxhdGVVcmw6ICdkaXJlY3RpdmUuaHRtbCcsIC8vIG9yIC8vIGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHsgLi4uIH0sXHJcbiAqICAgICAgIHRyYW5zY2x1ZGU6IGZhbHNlLFxyXG4gKiAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gKiAgICAgICBzY29wZTogZmFsc2UsXHJcbiAqICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHRyYW5zY2x1ZGUsIG90aGVySW5qZWN0YWJsZXMpIHsgLi4uIH0sXHJcbiAqICAgICAgIGNvbnRyb2xsZXJBczogJ3N0cmluZ0FsaWFzJyxcclxuICogICAgICAgcmVxdWlyZTogJ3NpYmxpbmdEaXJlY3RpdmVOYW1lJywgLy8gb3IgLy8gWydecGFyZW50RGlyZWN0aXZlTmFtZScsICc/b3B0aW9uYWxEaXJlY3RpdmVOYW1lJywgJz9eb3B0aW9uYWxQYXJlbnQnXSxcclxuICogICAgICAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7XHJcbiAqICAgICAgICAgcmV0dXJuIHtcclxuICogICAgICAgICAgIHByZTogZnVuY3Rpb24gcHJlTGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfSxcclxuICogICAgICAgICAgIHBvc3Q6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9XHJcbiAqICAgICAgICAgfVxyXG4gKiAgICAgICAgIC8vIG9yXHJcbiAqICAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XHJcbiAqICAgICAgIH0sXHJcbiAqICAgICAgIC8vIG9yXHJcbiAqICAgICAgIC8vIGxpbms6IHtcclxuICogICAgICAgLy8gIHByZTogZnVuY3Rpb24gcHJlTGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfSxcclxuICogICAgICAgLy8gIHBvc3Q6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9XHJcbiAqICAgICAgIC8vIH1cclxuICogICAgICAgLy8gb3JcclxuICogICAgICAgLy8gbGluazogZnVuY3Rpb24gcG9zdExpbmsoIC4uLiApIHsgLi4uIH1cclxuICogICAgIH07XHJcbiAqICAgICByZXR1cm4gZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdDtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqTm90ZToqKiBBbnkgdW5zcGVjaWZpZWQgb3B0aW9ucyB3aWxsIHVzZSB0aGUgZGVmYXVsdCB2YWx1ZS4gWW91IGNhbiBzZWUgdGhlIGRlZmF1bHQgdmFsdWVzIGJlbG93LlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogVGhlcmVmb3JlIHRoZSBhYm92ZSBjYW4gYmUgc2ltcGxpZmllZCBhczpcclxuICpcclxuICogYGBganNcclxuICogICB2YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSguLi4pO1xyXG4gKlxyXG4gKiAgIG15TW9kdWxlLmRpcmVjdGl2ZSgnZGlyZWN0aXZlTmFtZScsIGZ1bmN0aW9uIGZhY3RvcnkoaW5qZWN0YWJsZXMpIHtcclxuICogICAgIHZhciBkaXJlY3RpdmVEZWZpbml0aW9uT2JqZWN0ID0ge1xyXG4gKiAgICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycykgeyAuLi4gfVxyXG4gKiAgICAgfTtcclxuICogICAgIHJldHVybiBkaXJlY3RpdmVEZWZpbml0aW9uT2JqZWN0O1xyXG4gKiAgICAgLy8gb3JcclxuICogICAgIC8vIHJldHVybiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycykgeyAuLi4gfVxyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICpcclxuICpcclxuICogIyMjIERpcmVjdGl2ZSBEZWZpbml0aW9uIE9iamVjdFxyXG4gKlxyXG4gKiBUaGUgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0IHByb3ZpZGVzIGluc3RydWN0aW9ucyB0byB0aGUge0BsaW5rIG5nLiRjb21waWxlXHJcbiAqIGNvbXBpbGVyfS4gVGhlIGF0dHJpYnV0ZXMgYXJlOlxyXG4gKlxyXG4gKiAjIyMjIGBtdWx0aUVsZW1lbnRgXHJcbiAqIFdoZW4gdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIEhUTUwgY29tcGlsZXIgd2lsbCBjb2xsZWN0IERPTSBub2RlcyBiZXR3ZWVuXHJcbiAqIG5vZGVzIHdpdGggdGhlIGF0dHJpYnV0ZXMgYGRpcmVjdGl2ZS1uYW1lLXN0YXJ0YCBhbmQgYGRpcmVjdGl2ZS1uYW1lLWVuZGAsIGFuZCBncm91cCB0aGVtXHJcbiAqIHRvZ2V0aGVyIGFzIHRoZSBkaXJlY3RpdmUgZWxlbWVudHMuIEl0IGlzIHJlY29tZW5kZWQgdGhhdCB0aGlzIGZlYXR1cmUgYmUgdXNlZCBvbiBkaXJlY3RpdmVzXHJcbiAqIHdoaWNoIGFyZSBub3Qgc3RyaWN0bHkgYmVoYXZpb3VyYWwgKHN1Y2ggYXMge0BsaW5rIGFwaS9uZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSksIGFuZCB3aGljaFxyXG4gKiBkbyBub3QgbWFuaXB1bGF0ZSBvciByZXBsYWNlIGNoaWxkIG5vZGVzIChzdWNoIGFzIHtAbGluayBhcGkvbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBuZ0luY2x1ZGV9KS5cclxuICpcclxuICogIyMjIyBgcHJpb3JpdHlgXHJcbiAqIFdoZW4gdGhlcmUgYXJlIG11bHRpcGxlIGRpcmVjdGl2ZXMgZGVmaW5lZCBvbiBhIHNpbmdsZSBET00gZWxlbWVudCwgc29tZXRpbWVzIGl0XHJcbiAqIGlzIG5lY2Vzc2FyeSB0byBzcGVjaWZ5IHRoZSBvcmRlciBpbiB3aGljaCB0aGUgZGlyZWN0aXZlcyBhcmUgYXBwbGllZC4gVGhlIGBwcmlvcml0eWAgaXMgdXNlZFxyXG4gKiB0byBzb3J0IHRoZSBkaXJlY3RpdmVzIGJlZm9yZSB0aGVpciBgY29tcGlsZWAgZnVuY3Rpb25zIGdldCBjYWxsZWQuIFByaW9yaXR5IGlzIGRlZmluZWQgYXMgYVxyXG4gKiBudW1iZXIuIERpcmVjdGl2ZXMgd2l0aCBncmVhdGVyIG51bWVyaWNhbCBgcHJpb3JpdHlgIGFyZSBjb21waWxlZCBmaXJzdC4gUHJlLWxpbmsgZnVuY3Rpb25zXHJcbiAqIGFyZSBhbHNvIHJ1biBpbiBwcmlvcml0eSBvcmRlciwgYnV0IHBvc3QtbGluayBmdW5jdGlvbnMgYXJlIHJ1biBpbiByZXZlcnNlIG9yZGVyLiBUaGUgb3JkZXJcclxuICogb2YgZGlyZWN0aXZlcyB3aXRoIHRoZSBzYW1lIHByaW9yaXR5IGlzIHVuZGVmaW5lZC4gVGhlIGRlZmF1bHQgcHJpb3JpdHkgaXMgYDBgLlxyXG4gKlxyXG4gKiAjIyMjIGB0ZXJtaW5hbGBcclxuICogSWYgc2V0IHRvIHRydWUgdGhlbiB0aGUgY3VycmVudCBgcHJpb3JpdHlgIHdpbGwgYmUgdGhlIGxhc3Qgc2V0IG9mIGRpcmVjdGl2ZXNcclxuICogd2hpY2ggd2lsbCBleGVjdXRlIChhbnkgZGlyZWN0aXZlcyBhdCB0aGUgY3VycmVudCBwcmlvcml0eSB3aWxsIHN0aWxsIGV4ZWN1dGVcclxuICogYXMgdGhlIG9yZGVyIG9mIGV4ZWN1dGlvbiBvbiBzYW1lIGBwcmlvcml0eWAgaXMgdW5kZWZpbmVkKS5cclxuICpcclxuICogIyMjIyBgc2NvcGVgXHJcbiAqICoqSWYgc2V0IHRvIGB0cnVlYCwqKiB0aGVuIGEgbmV3IHNjb3BlIHdpbGwgYmUgY3JlYXRlZCBmb3IgdGhpcyBkaXJlY3RpdmUuIElmIG11bHRpcGxlIGRpcmVjdGl2ZXMgb24gdGhlXHJcbiAqIHNhbWUgZWxlbWVudCByZXF1ZXN0IGEgbmV3IHNjb3BlLCBvbmx5IG9uZSBuZXcgc2NvcGUgaXMgY3JlYXRlZC4gVGhlIG5ldyBzY29wZSBydWxlIGRvZXMgbm90XHJcbiAqIGFwcGx5IGZvciB0aGUgcm9vdCBvZiB0aGUgdGVtcGxhdGUgc2luY2UgdGhlIHJvb3Qgb2YgdGhlIHRlbXBsYXRlIGFsd2F5cyBnZXRzIGEgbmV3IHNjb3BlLlxyXG4gKlxyXG4gKiAqKklmIHNldCB0byBge31gIChvYmplY3QgaGFzaCksKiogdGhlbiBhIG5ldyBcImlzb2xhdGVcIiBzY29wZSBpcyBjcmVhdGVkLiBUaGUgJ2lzb2xhdGUnIHNjb3BlIGRpZmZlcnMgZnJvbVxyXG4gKiBub3JtYWwgc2NvcGUgaW4gdGhhdCBpdCBkb2VzIG5vdCBwcm90b3R5cGljYWxseSBpbmhlcml0IGZyb20gdGhlIHBhcmVudCBzY29wZS4gVGhpcyBpcyB1c2VmdWxcclxuICogd2hlbiBjcmVhdGluZyByZXVzYWJsZSBjb21wb25lbnRzLCB3aGljaCBzaG91bGQgbm90IGFjY2lkZW50YWxseSByZWFkIG9yIG1vZGlmeSBkYXRhIGluIHRoZVxyXG4gKiBwYXJlbnQgc2NvcGUuXHJcbiAqXHJcbiAqIFRoZSAnaXNvbGF0ZScgc2NvcGUgdGFrZXMgYW4gb2JqZWN0IGhhc2ggd2hpY2ggZGVmaW5lcyBhIHNldCBvZiBsb2NhbCBzY29wZSBwcm9wZXJ0aWVzXHJcbiAqIGRlcml2ZWQgZnJvbSB0aGUgcGFyZW50IHNjb3BlLiBUaGVzZSBsb2NhbCBwcm9wZXJ0aWVzIGFyZSB1c2VmdWwgZm9yIGFsaWFzaW5nIHZhbHVlcyBmb3JcclxuICogdGVtcGxhdGVzLiBMb2NhbHMgZGVmaW5pdGlvbiBpcyBhIGhhc2ggb2YgbG9jYWwgc2NvcGUgcHJvcGVydHkgdG8gaXRzIHNvdXJjZTpcclxuICpcclxuICogKiBgQGAgb3IgYEBhdHRyYCAtIGJpbmQgYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSB0byB0aGUgdmFsdWUgb2YgRE9NIGF0dHJpYnV0ZS4gVGhlIHJlc3VsdCBpc1xyXG4gKiAgIGFsd2F5cyBhIHN0cmluZyBzaW5jZSBET00gYXR0cmlidXRlcyBhcmUgc3RyaW5ncy4gSWYgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkICB0aGVuIHRoZVxyXG4gKiAgIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsIG5hbWUuXHJcbiAqICAgR2l2ZW4gYDx3aWRnZXQgbXktYXR0cj1cImhlbGxvIHt7bmFtZX19XCI+YCBhbmQgd2lkZ2V0IGRlZmluaXRpb25cclxuICogICBvZiBgc2NvcGU6IHsgbG9jYWxOYW1lOidAbXlBdHRyJyB9YCwgdGhlbiB3aWRnZXQgc2NvcGUgcHJvcGVydHkgYGxvY2FsTmFtZWAgd2lsbCByZWZsZWN0XHJcbiAqICAgdGhlIGludGVycG9sYXRlZCB2YWx1ZSBvZiBgaGVsbG8ge3tuYW1lfX1gLiBBcyB0aGUgYG5hbWVgIGF0dHJpYnV0ZSBjaGFuZ2VzIHNvIHdpbGwgdGhlXHJcbiAqICAgYGxvY2FsTmFtZWAgcHJvcGVydHkgb24gdGhlIHdpZGdldCBzY29wZS4gVGhlIGBuYW1lYCBpcyByZWFkIGZyb20gdGhlIHBhcmVudCBzY29wZSAobm90XHJcbiAqICAgY29tcG9uZW50IHNjb3BlKS5cclxuICpcclxuICogKiBgPWAgb3IgYD1hdHRyYCAtIHNldCB1cCBiaS1kaXJlY3Rpb25hbCBiaW5kaW5nIGJldHdlZW4gYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSBhbmQgdGhlXHJcbiAqICAgcGFyZW50IHNjb3BlIHByb3BlcnR5IG9mIG5hbWUgZGVmaW5lZCB2aWEgdGhlIHZhbHVlIG9mIHRoZSBgYXR0cmAgYXR0cmlidXRlLiBJZiBubyBgYXR0cmBcclxuICogICBuYW1lIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBhdHRyaWJ1dGUgbmFtZSBpcyBhc3N1bWVkIHRvIGJlIHRoZSBzYW1lIGFzIHRoZSBsb2NhbCBuYW1lLlxyXG4gKiAgIEdpdmVuIGA8d2lkZ2V0IG15LWF0dHI9XCJwYXJlbnRNb2RlbFwiPmAgYW5kIHdpZGdldCBkZWZpbml0aW9uIG9mXHJcbiAqICAgYHNjb3BlOiB7IGxvY2FsTW9kZWw6Jz1teUF0dHInIH1gLCB0aGVuIHdpZGdldCBzY29wZSBwcm9wZXJ0eSBgbG9jYWxNb2RlbGAgd2lsbCByZWZsZWN0IHRoZVxyXG4gKiAgIHZhbHVlIG9mIGBwYXJlbnRNb2RlbGAgb24gdGhlIHBhcmVudCBzY29wZS4gQW55IGNoYW5nZXMgdG8gYHBhcmVudE1vZGVsYCB3aWxsIGJlIHJlZmxlY3RlZFxyXG4gKiAgIGluIGBsb2NhbE1vZGVsYCBhbmQgYW55IGNoYW5nZXMgaW4gYGxvY2FsTW9kZWxgIHdpbGwgcmVmbGVjdCBpbiBgcGFyZW50TW9kZWxgLiBJZiB0aGUgcGFyZW50XHJcbiAqICAgc2NvcGUgcHJvcGVydHkgZG9lc24ndCBleGlzdCwgaXQgd2lsbCB0aHJvdyBhIE5PTl9BU1NJR05BQkxFX01PREVMX0VYUFJFU1NJT04gZXhjZXB0aW9uLiBZb3VcclxuICogICBjYW4gYXZvaWQgdGhpcyBiZWhhdmlvciB1c2luZyBgPT9gIG9yIGA9P2F0dHJgIGluIG9yZGVyIHRvIGZsYWcgdGhlIHByb3BlcnR5IGFzIG9wdGlvbmFsLlxyXG4gKlxyXG4gKiAqIGAmYCBvciBgJmF0dHJgIC0gcHJvdmlkZXMgYSB3YXkgdG8gZXhlY3V0ZSBhbiBleHByZXNzaW9uIGluIHRoZSBjb250ZXh0IG9mIHRoZSBwYXJlbnQgc2NvcGUuXHJcbiAqICAgSWYgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlXHJcbiAqICAgbG9jYWwgbmFtZS4gR2l2ZW4gYDx3aWRnZXQgbXktYXR0cj1cImNvdW50ID0gY291bnQgKyB2YWx1ZVwiPmAgYW5kIHdpZGdldCBkZWZpbml0aW9uIG9mXHJcbiAqICAgYHNjb3BlOiB7IGxvY2FsRm46JyZteUF0dHInIH1gLCB0aGVuIGlzb2xhdGUgc2NvcGUgcHJvcGVydHkgYGxvY2FsRm5gIHdpbGwgcG9pbnQgdG9cclxuICogICBhIGZ1bmN0aW9uIHdyYXBwZXIgZm9yIHRoZSBgY291bnQgPSBjb3VudCArIHZhbHVlYCBleHByZXNzaW9uLiBPZnRlbiBpdCdzIGRlc2lyYWJsZSB0b1xyXG4gKiAgIHBhc3MgZGF0YSBmcm9tIHRoZSBpc29sYXRlZCBzY29wZSB2aWEgYW4gZXhwcmVzc2lvbiB0byB0aGUgcGFyZW50IHNjb3BlLCB0aGlzIGNhbiBiZVxyXG4gKiAgIGRvbmUgYnkgcGFzc2luZyBhIG1hcCBvZiBsb2NhbCB2YXJpYWJsZSBuYW1lcyBhbmQgdmFsdWVzIGludG8gdGhlIGV4cHJlc3Npb24gd3JhcHBlciBmbi5cclxuICogICBGb3IgZXhhbXBsZSwgaWYgdGhlIGV4cHJlc3Npb24gaXMgYGluY3JlbWVudChhbW91bnQpYCB0aGVuIHdlIGNhbiBzcGVjaWZ5IHRoZSBhbW91bnQgdmFsdWVcclxuICogICBieSBjYWxsaW5nIHRoZSBgbG9jYWxGbmAgYXMgYGxvY2FsRm4oe2Ftb3VudDogMjJ9KWAuXHJcbiAqXHJcbiAqXHJcbiAqICMjIyMgYGJpbmRUb0NvbnRyb2xsZXJgXHJcbiAqIFdoZW4gYW4gaXNvbGF0ZSBzY29wZSBpcyB1c2VkIGZvciBhIGNvbXBvbmVudCAoc2VlIGFib3ZlKSwgYW5kIGBjb250cm9sbGVyQXNgIGlzIHVzZWQsIGBiaW5kVG9Db250cm9sbGVyYCB3aWxsXHJcbiAqIGFsbG93IGEgY29tcG9uZW50IHRvIGhhdmUgaXRzIHByb3BlcnRpZXMgYm91bmQgdG8gdGhlIGNvbnRyb2xsZXIsIHJhdGhlciB0aGFuIHRvIHNjb3BlLiBXaGVuIHRoZSBjb250cm9sbGVyXHJcbiAqIGlzIGluc3RhbnRpYXRlZCwgdGhlIGluaXRpYWwgdmFsdWVzIG9mIHRoZSBpc29sYXRlIHNjb3BlIGJpbmRpbmdzIGFyZSBhbHJlYWR5IGF2YWlsYWJsZS5cclxuICpcclxuICogIyMjIyBgY29udHJvbGxlcmBcclxuICogQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gVGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGJlZm9yZSB0aGVcclxuICogcHJlLWxpbmtpbmcgcGhhc2UgYW5kIGl0IGlzIHNoYXJlZCB3aXRoIG90aGVyIGRpcmVjdGl2ZXMgKHNlZVxyXG4gKiBgcmVxdWlyZWAgYXR0cmlidXRlKS4gVGhpcyBhbGxvd3MgdGhlIGRpcmVjdGl2ZXMgdG8gY29tbXVuaWNhdGUgd2l0aCBlYWNoIG90aGVyIGFuZCBhdWdtZW50XHJcbiAqIGVhY2ggb3RoZXIncyBiZWhhdmlvci4gVGhlIGNvbnRyb2xsZXIgaXMgaW5qZWN0YWJsZSAoYW5kIHN1cHBvcnRzIGJyYWNrZXQgbm90YXRpb24pIHdpdGggdGhlIGZvbGxvd2luZyBsb2NhbHM6XHJcbiAqXHJcbiAqICogYCRzY29wZWAgLSBDdXJyZW50IHNjb3BlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudFxyXG4gKiAqIGAkZWxlbWVudGAgLSBDdXJyZW50IGVsZW1lbnRcclxuICogKiBgJGF0dHJzYCAtIEN1cnJlbnQgYXR0cmlidXRlcyBvYmplY3QgZm9yIHRoZSBlbGVtZW50XHJcbiAqICogYCR0cmFuc2NsdWRlYCAtIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uIHByZS1ib3VuZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGU6XHJcbiAqICAgYGZ1bmN0aW9uKFtzY29wZV0sIGNsb25lTGlua2luZ0ZuLCBmdXR1cmVQYXJlbnRFbGVtZW50KWAuXHJcbiAqICAgICogYHNjb3BlYDogb3B0aW9uYWwgYXJndW1lbnQgdG8gb3ZlcnJpZGUgdGhlIHNjb3BlLlxyXG4gKiAgICAqIGBjbG9uZUxpbmtpbmdGbmA6IG9wdGlvbmFsIGFyZ3VtZW50IHRvIGNyZWF0ZSBjbG9uZXMgb2YgdGhlIG9yaWdpbmFsIHRyYW5zY2x1ZGVkIGNvbnRlbnQuXHJcbiAqICAgICogYGZ1dHVyZVBhcmVudEVsZW1lbnRgOlxyXG4gKiAgICAgICAgKiBkZWZpbmVzIHRoZSBwYXJlbnQgdG8gd2hpY2ggdGhlIGBjbG9uZUxpbmtpbmdGbmAgd2lsbCBhZGQgdGhlIGNsb25lZCBlbGVtZW50cy5cclxuICogICAgICAgICogZGVmYXVsdDogYCRlbGVtZW50LnBhcmVudCgpYCByZXNwLiBgJGVsZW1lbnRgIGZvciBgdHJhbnNjbHVkZTonZWxlbWVudCdgIHJlc3AuIGB0cmFuc2NsdWRlOnRydWVgLlxyXG4gKiAgICAgICAgKiBvbmx5IG5lZWRlZCBmb3IgdHJhbnNjbHVkZXMgdGhhdCBhcmUgYWxsb3dlZCB0byBjb250YWluIG5vbiBodG1sIGVsZW1lbnRzIChlLmcuIFNWRyBlbGVtZW50cylcclxuICogICAgICAgICAgYW5kIHdoZW4gdGhlIGBjbG9uZUxpbmtpbkZuYCBpcyBwYXNzZWQsXHJcbiAqICAgICAgICAgIGFzIHRob3NlIGVsZW1lbnRzIG5lZWQgdG8gY3JlYXRlZCBhbmQgY2xvbmVkIGluIGEgc3BlY2lhbCB3YXkgd2hlbiB0aGV5IGFyZSBkZWZpbmVkIG91dHNpZGUgdGhlaXJcclxuICogICAgICAgICAgdXN1YWwgY29udGFpbmVycyAoZS5nLiBsaWtlIGA8c3ZnPmApLlxyXG4gKiAgICAgICAgKiBTZWUgYWxzbyB0aGUgYGRpcmVjdGl2ZS50ZW1wbGF0ZU5hbWVzcGFjZWAgcHJvcGVydHkuXHJcbiAqXHJcbiAqXHJcbiAqICMjIyMgYHJlcXVpcmVgXHJcbiAqIFJlcXVpcmUgYW5vdGhlciBkaXJlY3RpdmUgYW5kIGluamVjdCBpdHMgY29udHJvbGxlciBhcyB0aGUgZm91cnRoIGFyZ3VtZW50IHRvIHRoZSBsaW5raW5nIGZ1bmN0aW9uLiBUaGVcclxuICogYHJlcXVpcmVgIHRha2VzIGEgc3RyaW5nIG5hbWUgKG9yIGFycmF5IG9mIHN0cmluZ3MpIG9mIHRoZSBkaXJlY3RpdmUocykgdG8gcGFzcyBpbi4gSWYgYW4gYXJyYXkgaXMgdXNlZCwgdGhlXHJcbiAqIGluamVjdGVkIGFyZ3VtZW50IHdpbGwgYmUgYW4gYXJyYXkgaW4gY29ycmVzcG9uZGluZyBvcmRlci4gSWYgbm8gc3VjaCBkaXJlY3RpdmUgY2FuIGJlXHJcbiAqIGZvdW5kLCBvciBpZiB0aGUgZGlyZWN0aXZlIGRvZXMgbm90IGhhdmUgYSBjb250cm9sbGVyLCB0aGVuIGFuIGVycm9yIGlzIHJhaXNlZC4gVGhlIG5hbWUgY2FuIGJlIHByZWZpeGVkIHdpdGg6XHJcbiAqXHJcbiAqICogKG5vIHByZWZpeCkgLSBMb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgb24gdGhlIGN1cnJlbnQgZWxlbWVudC4gVGhyb3cgYW4gZXJyb3IgaWYgbm90IGZvdW5kLlxyXG4gKiAqIGA/YCAtIEF0dGVtcHQgdG8gbG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIG9yIHBhc3MgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxyXG4gKiAqIGBeYCAtIExvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQgYW5kIGl0cyBwYXJlbnRzLiBUaHJvdyBhbiBlcnJvciBpZiBub3QgZm91bmQuXHJcbiAqICogYD9eYCAtIEF0dGVtcHQgdG8gbG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCBhbmQgaXRzIHBhcmVudHMgb3IgcGFzc1xyXG4gKiAgIGBudWxsYCB0byB0aGUgYGxpbmtgIGZuIGlmIG5vdCBmb3VuZC5cclxuICpcclxuICpcclxuICogIyMjIyBgY29udHJvbGxlckFzYFxyXG4gKiBDb250cm9sbGVyIGFsaWFzIGF0IHRoZSBkaXJlY3RpdmUgc2NvcGUuIEFuIGFsaWFzIGZvciB0aGUgY29udHJvbGxlciBzbyBpdFxyXG4gKiBjYW4gYmUgcmVmZXJlbmNlZCBhdCB0aGUgZGlyZWN0aXZlIHRlbXBsYXRlLiBUaGUgZGlyZWN0aXZlIG5lZWRzIHRvIGRlZmluZSBhIHNjb3BlIGZvciB0aGlzXHJcbiAqIGNvbmZpZ3VyYXRpb24gdG8gYmUgdXNlZC4gVXNlZnVsIGluIHRoZSBjYXNlIHdoZW4gZGlyZWN0aXZlIGlzIHVzZWQgYXMgY29tcG9uZW50LlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMjIGByZXN0cmljdGBcclxuICogU3RyaW5nIG9mIHN1YnNldCBvZiBgRUFDTWAgd2hpY2ggcmVzdHJpY3RzIHRoZSBkaXJlY3RpdmUgdG8gYSBzcGVjaWZpYyBkaXJlY3RpdmVcclxuICogZGVjbGFyYXRpb24gc3R5bGUuIElmIG9taXR0ZWQsIHRoZSBkZWZhdWx0cyAoZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXMpIGFyZSB1c2VkLlxyXG4gKlxyXG4gKiAqIGBFYCAtIEVsZW1lbnQgbmFtZSAoZGVmYXVsdCk6IGA8bXktZGlyZWN0aXZlPjwvbXktZGlyZWN0aXZlPmBcclxuICogKiBgQWAgLSBBdHRyaWJ1dGUgKGRlZmF1bHQpOiBgPGRpdiBteS1kaXJlY3RpdmU9XCJleHBcIj48L2Rpdj5gXHJcbiAqICogYENgIC0gQ2xhc3M6IGA8ZGl2IGNsYXNzPVwibXktZGlyZWN0aXZlOiBleHA7XCI+PC9kaXY+YFxyXG4gKiAqIGBNYCAtIENvbW1lbnQ6IGA8IS0tIGRpcmVjdGl2ZTogbXktZGlyZWN0aXZlIGV4cCAtLT5gXHJcbiAqXHJcbiAqXHJcbiAqICMjIyMgYHRlbXBsYXRlTmFtZXNwYWNlYFxyXG4gKiBTdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkb2N1bWVudCB0eXBlIHVzZWQgYnkgdGhlIG1hcmt1cCBpbiB0aGUgdGVtcGxhdGUuXHJcbiAqIEFuZ3VsYXJKUyBuZWVkcyB0aGlzIGluZm9ybWF0aW9uIGFzIHRob3NlIGVsZW1lbnRzIG5lZWQgdG8gYmUgY3JlYXRlZCBhbmQgY2xvbmVkXHJcbiAqIGluIGEgc3BlY2lhbCB3YXkgd2hlbiB0aGV5IGFyZSBkZWZpbmVkIG91dHNpZGUgdGhlaXIgdXN1YWwgY29udGFpbmVycyBsaWtlIGA8c3ZnPmAgYW5kIGA8bWF0aD5gLlxyXG4gKlxyXG4gKiAqIGBodG1sYCAtIEFsbCByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgSFRNTC4gUm9vdCBub2RlcyBtYXkgYWxzbyBiZVxyXG4gKiAgIHRvcC1sZXZlbCBlbGVtZW50cyBzdWNoIGFzIGA8c3ZnPmAgb3IgYDxtYXRoPmAuXHJcbiAqICogYHN2Z2AgLSBUaGUgcm9vdCBub2RlcyBpbiB0aGUgdGVtcGxhdGUgYXJlIFNWRyBlbGVtZW50cyAoZXhjbHVkaW5nIGA8bWF0aD5gKS5cclxuICogKiBgbWF0aGAgLSBUaGUgcm9vdCBub2RlcyBpbiB0aGUgdGVtcGxhdGUgYXJlIE1hdGhNTCBlbGVtZW50cyAoZXhjbHVkaW5nIGA8c3ZnPmApLlxyXG4gKlxyXG4gKiBJZiBubyBgdGVtcGxhdGVOYW1lc3BhY2VgIGlzIHNwZWNpZmllZCwgdGhlbiB0aGUgbmFtZXNwYWNlIGlzIGNvbnNpZGVyZWQgdG8gYmUgYGh0bWxgLlxyXG4gKlxyXG4gKiAjIyMjIGB0ZW1wbGF0ZWBcclxuICogSFRNTCBtYXJrdXAgdGhhdCBtYXk6XHJcbiAqICogUmVwbGFjZSB0aGUgY29udGVudHMgb2YgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgKGRlZmF1bHQpLlxyXG4gKiAqIFJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgaXRzZWxmIChpZiBgcmVwbGFjZWAgaXMgdHJ1ZSAtIERFUFJFQ0FURUQpLlxyXG4gKiAqIFdyYXAgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50IChpZiBgdHJhbnNjbHVkZWAgaXMgdHJ1ZSkuXHJcbiAqXHJcbiAqIFZhbHVlIG1heSBiZTpcclxuICpcclxuICogKiBBIHN0cmluZy4gRm9yIGV4YW1wbGUgYDxkaXYgcmVkLW9uLWhvdmVyPnt7ZGVsZXRlX3N0cn19PC9kaXY+YC5cclxuICogKiBBIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHR3byBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgXHJcbiAqICAgZnVuY3Rpb24gYXBpIGJlbG93KSBhbmQgcmV0dXJucyBhIHN0cmluZyB2YWx1ZS5cclxuICpcclxuICpcclxuICogIyMjIyBgdGVtcGxhdGVVcmxgXHJcbiAqIFRoaXMgaXMgc2ltaWxhciB0byBgdGVtcGxhdGVgIGJ1dCB0aGUgdGVtcGxhdGUgaXMgbG9hZGVkIGZyb20gdGhlIHNwZWNpZmllZCBVUkwsIGFzeW5jaHJvbm91c2x5LlxyXG4gKlxyXG4gKiBCZWNhdXNlIHRlbXBsYXRlIGxvYWRpbmcgaXMgYXN5bmNocm9ub3VzIHRoZSBjb21waWxlciB3aWxsIHN1c3BlbmQgY29tcGlsYXRpb24gb2YgZGlyZWN0aXZlcyBvbiB0aGF0IGVsZW1lbnRcclxuICogZm9yIGxhdGVyIHdoZW4gdGhlIHRlbXBsYXRlIGhhcyBiZWVuIHJlc29sdmVkLiAgSW4gdGhlIG1lYW50aW1lIGl0IHdpbGwgY29udGludWUgdG8gY29tcGlsZSBhbmQgbGlua1xyXG4gKiBzaWJsaW5nIGFuZCBwYXJlbnQgZWxlbWVudHMgYXMgdGhvdWdoIHRoaXMgZWxlbWVudCBoYWQgbm90IGNvbnRhaW5lZCBhbnkgZGlyZWN0aXZlcy5cclxuICpcclxuICogVGhlIGNvbXBpbGVyIGRvZXMgbm90IHN1c3BlbmQgdGhlIGVudGlyZSBjb21waWxhdGlvbiB0byB3YWl0IGZvciB0ZW1wbGF0ZXMgdG8gYmUgbG9hZGVkIGJlY2F1c2UgdGhpc1xyXG4gKiB3b3VsZCByZXN1bHQgaW4gdGhlIHdob2xlIGFwcCBcInN0YWxsaW5nXCIgdW50aWwgYWxsIHRlbXBsYXRlcyBhcmUgbG9hZGVkIGFzeW5jaHJvbm91c2x5IC0gZXZlbiBpbiB0aGVcclxuICogY2FzZSB3aGVuIG9ubHkgb25lIGRlZXBseSBuZXN0ZWQgZGlyZWN0aXZlIGhhcyBgdGVtcGxhdGVVcmxgLlxyXG4gKlxyXG4gKiBUZW1wbGF0ZSBsb2FkaW5nIGlzIGFzeW5jaHJvbm91cyBldmVuIGlmIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiBwcmVsb2FkZWQgaW50byB0aGUge0BsaW5rICR0ZW1wbGF0ZUNhY2hlfVxyXG4gKlxyXG4gKiBZb3UgY2FuIHNwZWNpZnkgYHRlbXBsYXRlVXJsYCBhcyBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIFVSTCBvciBhcyBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHR3b1xyXG4gKiBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgIGZ1bmN0aW9uIGFwaSBiZWxvdykgYW5kIHJldHVybnNcclxuICogYSBzdHJpbmcgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSB1cmwuICBJbiBlaXRoZXIgY2FzZSwgdGhlIHRlbXBsYXRlIFVSTCBpcyBwYXNzZWQgdGhyb3VnaCB7QGxpbmtcclxuICogYXBpL25nLiRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsfS5cclxuICpcclxuICpcclxuICogIyMjIyBgcmVwbGFjZWAgKFsqREVQUkVDQVRFRCohXSwgd2lsbCBiZSByZW1vdmVkIGluIG5leHQgbWFqb3IgcmVsZWFzZSAtIGkuZS4gdjIuMClcclxuICogc3BlY2lmeSB3aGF0IHRoZSB0ZW1wbGF0ZSBzaG91bGQgcmVwbGFjZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cclxuICpcclxuICogKiBgdHJ1ZWAgLSB0aGUgdGVtcGxhdGUgd2lsbCByZXBsYWNlIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50LlxyXG4gKiAqIGBmYWxzZWAgLSB0aGUgdGVtcGxhdGUgd2lsbCByZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cclxuICpcclxuICogVGhlIHJlcGxhY2VtZW50IHByb2Nlc3MgbWlncmF0ZXMgYWxsIG9mIHRoZSBhdHRyaWJ1dGVzIC8gY2xhc3NlcyBmcm9tIHRoZSBvbGQgZWxlbWVudCB0byB0aGUgbmV3XHJcbiAqIG9uZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI2NyZWF0aW5nLWN1c3RvbS1kaXJlY3RpdmVzX2NyZWF0aW5nLWRpcmVjdGl2ZXNfdGVtcGxhdGUtZXhwYW5kaW5nLWRpcmVjdGl2ZVxyXG4gKiBEaXJlY3RpdmVzIEd1aWRlfSBmb3IgYW4gZXhhbXBsZS5cclxuICpcclxuICogVGhlcmUgYXJlIHZlcnkgZmV3IHNjZW5hcmlvcyB3aGVyZSBlbGVtZW50IHJlcGxhY2VtZW50IGlzIHJlcXVpcmVkIGZvciB0aGUgYXBwbGljYXRpb24gZnVuY3Rpb24sXHJcbiAqIHRoZSBtYWluIG9uZSBiZWluZyByZXVzYWJsZSBjdXN0b20gY29tcG9uZW50cyB0aGF0IGFyZSB1c2VkIHdpdGhpbiBTVkcgY29udGV4dHNcclxuICogKGJlY2F1c2UgU1ZHIGRvZXNuJ3Qgd29yayB3aXRoIGN1c3RvbSBlbGVtZW50cyBpbiB0aGUgRE9NIHRyZWUpLlxyXG4gKlxyXG4gKiAjIyMjIGB0cmFuc2NsdWRlYFxyXG4gKiBjb21waWxlIHRoZSBjb250ZW50IG9mIHRoZSBlbGVtZW50IGFuZCBtYWtlIGl0IGF2YWlsYWJsZSB0byB0aGUgZGlyZWN0aXZlLlxyXG4gKiBUeXBpY2FsbHkgdXNlZCB3aXRoIHtAbGluayBuZy5kaXJlY3RpdmU6bmdUcmFuc2NsdWRlXHJcbiAqIG5nVHJhbnNjbHVkZX0uIFRoZSBhZHZhbnRhZ2Ugb2YgdHJhbnNjbHVzaW9uIGlzIHRoYXQgdGhlIGxpbmtpbmcgZnVuY3Rpb24gcmVjZWl2ZXMgYVxyXG4gKiB0cmFuc2NsdXNpb24gZnVuY3Rpb24gd2hpY2ggaXMgcHJlLWJvdW5kIHRvIHRoZSBjb3JyZWN0IHNjb3BlLiBJbiBhIHR5cGljYWwgc2V0dXAgdGhlIHdpZGdldFxyXG4gKiBjcmVhdGVzIGFuIGBpc29sYXRlYCBzY29wZSwgYnV0IHRoZSB0cmFuc2NsdXNpb24gaXMgbm90IGEgY2hpbGQsIGJ1dCBhIHNpYmxpbmcgb2YgdGhlIGBpc29sYXRlYFxyXG4gKiBzY29wZS4gVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgdGhlIHdpZGdldCB0byBoYXZlIHByaXZhdGUgc3RhdGUsIGFuZCB0aGUgdHJhbnNjbHVzaW9uIHRvXHJcbiAqIGJlIGJvdW5kIHRvIHRoZSBwYXJlbnQgKHByZS1gaXNvbGF0ZWApIHNjb3BlLlxyXG4gKlxyXG4gKiAqIGB0cnVlYCAtIHRyYW5zY2x1ZGUgdGhlIGNvbnRlbnQgb2YgdGhlIGRpcmVjdGl2ZS5cclxuICogKiBgJ2VsZW1lbnQnYCAtIHRyYW5zY2x1ZGUgdGhlIHdob2xlIGVsZW1lbnQgaW5jbHVkaW5nIGFueSBkaXJlY3RpdmVzIGRlZmluZWQgYXQgbG93ZXIgcHJpb3JpdHkuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqTm90ZToqKiBXaGVuIHRlc3RpbmcgYW4gZWxlbWVudCB0cmFuc2NsdWRlIGRpcmVjdGl2ZSB5b3UgbXVzdCBub3QgcGxhY2UgdGhlIGRpcmVjdGl2ZSBhdCB0aGUgcm9vdCBvZiB0aGVcclxuICogRE9NIGZyYWdtZW50IHRoYXQgaXMgYmVpbmcgY29tcGlsZWQuIFNlZSB7QGxpbmsgZ3VpZGUvdW5pdC10ZXN0aW5nI3Rlc3RpbmctdHJhbnNjbHVzaW9uLWRpcmVjdGl2ZXNcclxuICogVGVzdGluZyBUcmFuc2NsdXNpb24gRGlyZWN0aXZlc30uXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiAjIyMjIGBjb21waWxlYFxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIGZ1bmN0aW9uIGNvbXBpbGUodEVsZW1lbnQsIHRBdHRycywgdHJhbnNjbHVkZSkgeyAuLi4gfVxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGNvbXBpbGUgZnVuY3Rpb24gZGVhbHMgd2l0aCB0cmFuc2Zvcm1pbmcgdGhlIHRlbXBsYXRlIERPTS4gU2luY2UgbW9zdCBkaXJlY3RpdmVzIGRvIG5vdCBkb1xyXG4gKiB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiwgaXQgaXMgbm90IHVzZWQgb2Z0ZW4uIFRoZSBjb21waWxlIGZ1bmN0aW9uIHRha2VzIHRoZSBmb2xsb3dpbmcgYXJndW1lbnRzOlxyXG4gKlxyXG4gKiAgICogYHRFbGVtZW50YCAtIHRlbXBsYXRlIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB3aGVyZSB0aGUgZGlyZWN0aXZlIGhhcyBiZWVuIGRlY2xhcmVkLiBJdCBpc1xyXG4gKiAgICAgc2FmZSB0byBkbyB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiBvbiB0aGUgZWxlbWVudCBhbmQgY2hpbGQgZWxlbWVudHMgb25seS5cclxuICpcclxuICogICAqIGB0QXR0cnNgIC0gdGVtcGxhdGUgYXR0cmlidXRlcyAtIE5vcm1hbGl6ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzIGRlY2xhcmVkIG9uIHRoaXMgZWxlbWVudCBzaGFyZWRcclxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBjb21waWxlIGZ1bmN0aW9ucy5cclxuICpcclxuICogICAqIGB0cmFuc2NsdWRlYCAtICBbKkRFUFJFQ0FURUQqIV0gQSB0cmFuc2NsdWRlIGxpbmtpbmcgZnVuY3Rpb246IGBmdW5jdGlvbihzY29wZSwgY2xvbmVMaW5raW5nRm4pYFxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGU6KiogVGhlIHRlbXBsYXRlIGluc3RhbmNlIGFuZCB0aGUgbGluayBpbnN0YW5jZSBtYXkgYmUgZGlmZmVyZW50IG9iamVjdHMgaWYgdGhlIHRlbXBsYXRlIGhhc1xyXG4gKiBiZWVuIGNsb25lZC4gRm9yIHRoaXMgcmVhc29uIGl0IGlzICoqbm90Kiogc2FmZSB0byBkbyBhbnl0aGluZyBvdGhlciB0aGFuIERPTSB0cmFuc2Zvcm1hdGlvbnMgdGhhdFxyXG4gKiBhcHBseSB0byBhbGwgY2xvbmVkIERPTSBub2RlcyB3aXRoaW4gdGhlIGNvbXBpbGUgZnVuY3Rpb24uIFNwZWNpZmljYWxseSwgRE9NIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxyXG4gKiBzaG91bGQgYmUgZG9uZSBpbiBhIGxpbmtpbmcgZnVuY3Rpb24gcmF0aGVyIHRoYW4gaW4gYSBjb21waWxlIGZ1bmN0aW9uLlxyXG4gKiA8L2Rpdj5cclxuXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqTm90ZToqKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBjYW5ub3QgaGFuZGxlIGRpcmVjdGl2ZXMgdGhhdCByZWN1cnNpdmVseSB1c2UgdGhlbXNlbHZlcyBpbiB0aGVpclxyXG4gKiBvd24gdGVtcGxhdGVzIG9yIGNvbXBpbGUgZnVuY3Rpb25zLiBDb21waWxpbmcgdGhlc2UgZGlyZWN0aXZlcyByZXN1bHRzIGluIGFuIGluZmluaXRlIGxvb3AgYW5kIGFcclxuICogc3RhY2sgb3ZlcmZsb3cgZXJyb3JzLlxyXG4gKlxyXG4gKiBUaGlzIGNhbiBiZSBhdm9pZGVkIGJ5IG1hbnVhbGx5IHVzaW5nICRjb21waWxlIGluIHRoZSBwb3N0TGluayBmdW5jdGlvbiB0byBpbXBlcmF0aXZlbHkgY29tcGlsZVxyXG4gKiBhIGRpcmVjdGl2ZSdzIHRlbXBsYXRlIGluc3RlYWQgb2YgcmVseWluZyBvbiBhdXRvbWF0aWMgdGVtcGxhdGUgY29tcGlsYXRpb24gdmlhIGB0ZW1wbGF0ZWAgb3JcclxuICogYHRlbXBsYXRlVXJsYCBkZWNsYXJhdGlvbiBvciBtYW51YWwgY29tcGlsYXRpb24gaW5zaWRlIHRoZSBjb21waWxlIGZ1bmN0aW9uLlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWVycm9yXCI+XHJcbiAqICoqTm90ZToqKiBUaGUgYHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBjb21waWxlIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQsIGFzIGl0XHJcbiAqICAgZS5nLiBkb2VzIG5vdCBrbm93IGFib3V0IHRoZSByaWdodCBvdXRlciBzY29wZS4gUGxlYXNlIHVzZSB0aGUgdHJhbnNjbHVkZSBmdW5jdGlvbiB0aGF0IGlzIHBhc3NlZFxyXG4gKiAgIHRvIHRoZSBsaW5rIGZ1bmN0aW9uIGluc3RlYWQuXHJcbiAqIDwvZGl2PlxyXG5cclxuICogQSBjb21waWxlIGZ1bmN0aW9uIGNhbiBoYXZlIGEgcmV0dXJuIHZhbHVlIHdoaWNoIGNhbiBiZSBlaXRoZXIgYSBmdW5jdGlvbiBvciBhbiBvYmplY3QuXHJcbiAqXHJcbiAqICogcmV0dXJuaW5nIGEgKHBvc3QtbGluaykgZnVuY3Rpb24gLSBpcyBlcXVpdmFsZW50IHRvIHJlZ2lzdGVyaW5nIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHZpYSB0aGVcclxuICogICBgbGlua2AgcHJvcGVydHkgb2YgdGhlIGNvbmZpZyBvYmplY3Qgd2hlbiB0aGUgY29tcGlsZSBmdW5jdGlvbiBpcyBlbXB0eS5cclxuICpcclxuICogKiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggZnVuY3Rpb24ocykgcmVnaXN0ZXJlZCB2aWEgYHByZWAgYW5kIGBwb3N0YCBwcm9wZXJ0aWVzIC0gYWxsb3dzIHlvdSB0b1xyXG4gKiAgIGNvbnRyb2wgd2hlbiBhIGxpbmtpbmcgZnVuY3Rpb24gc2hvdWxkIGJlIGNhbGxlZCBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UuIFNlZSBpbmZvIGFib3V0XHJcbiAqICAgcHJlLWxpbmtpbmcgYW5kIHBvc3QtbGlua2luZyBmdW5jdGlvbnMgYmVsb3cuXHJcbiAqXHJcbiAqXHJcbiAqICMjIyMgYGxpbmtgXHJcbiAqIFRoaXMgcHJvcGVydHkgaXMgdXNlZCBvbmx5IGlmIHRoZSBgY29tcGlsZWAgcHJvcGVydHkgaXMgbm90IGRlZmluZWQuXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgZnVuY3Rpb24gbGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlciwgdHJhbnNjbHVkZUZuKSB7IC4uLiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgbGluayBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgcmVnaXN0ZXJpbmcgRE9NIGxpc3RlbmVycyBhcyB3ZWxsIGFzIHVwZGF0aW5nIHRoZSBET00uIEl0IGlzXHJcbiAqIGV4ZWN1dGVkIGFmdGVyIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiBjbG9uZWQuIFRoaXMgaXMgd2hlcmUgbW9zdCBvZiB0aGUgZGlyZWN0aXZlIGxvZ2ljIHdpbGwgYmVcclxuICogcHV0LlxyXG4gKlxyXG4gKiAgICogYHNjb3BlYCAtIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIFNjb3BlfSAtIFRoZSBzY29wZSB0byBiZSB1c2VkIGJ5IHRoZVxyXG4gKiAgICAgZGlyZWN0aXZlIGZvciByZWdpc3RlcmluZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlc30uXHJcbiAqXHJcbiAqICAgKiBgaUVsZW1lbnRgIC0gaW5zdGFuY2UgZWxlbWVudCAtIFRoZSBlbGVtZW50IHdoZXJlIHRoZSBkaXJlY3RpdmUgaXMgdG8gYmUgdXNlZC4gSXQgaXMgc2FmZSB0b1xyXG4gKiAgICAgbWFuaXB1bGF0ZSB0aGUgY2hpbGRyZW4gb2YgdGhlIGVsZW1lbnQgb25seSBpbiBgcG9zdExpbmtgIGZ1bmN0aW9uIHNpbmNlIHRoZSBjaGlsZHJlbiBoYXZlXHJcbiAqICAgICBhbHJlYWR5IGJlZW4gbGlua2VkLlxyXG4gKlxyXG4gKiAgICogYGlBdHRyc2AgLSBpbnN0YW5jZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxyXG4gKiAgICAgYmV0d2VlbiBhbGwgZGlyZWN0aXZlIGxpbmtpbmcgZnVuY3Rpb25zLlxyXG4gKlxyXG4gKiAgICogYGNvbnRyb2xsZXJgIC0gYSBjb250cm9sbGVyIGluc3RhbmNlIC0gQSBjb250cm9sbGVyIGluc3RhbmNlIGlmIGF0IGxlYXN0IG9uZSBkaXJlY3RpdmUgb24gdGhlXHJcbiAqICAgICBlbGVtZW50IGRlZmluZXMgYSBjb250cm9sbGVyLiBUaGUgY29udHJvbGxlciBpcyBzaGFyZWQgYW1vbmcgYWxsIHRoZSBkaXJlY3RpdmVzLCB3aGljaCBhbGxvd3NcclxuICogICAgIHRoZSBkaXJlY3RpdmVzIHRvIHVzZSB0aGUgY29udHJvbGxlcnMgYXMgYSBjb21tdW5pY2F0aW9uIGNoYW5uZWwuXHJcbiAqXHJcbiAqICAgKiBgdHJhbnNjbHVkZUZuYCAtIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uIHByZS1ib3VuZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGUuXHJcbiAqICAgICBUaGlzIGlzIHRoZSBzYW1lIGFzIHRoZSBgJHRyYW5zY2x1ZGVgXHJcbiAqICAgICBwYXJhbWV0ZXIgb2YgZGlyZWN0aXZlIGNvbnRyb2xsZXJzLCBzZWUgdGhlcmUgZm9yIGRldGFpbHMuXHJcbiAqICAgICBgZnVuY3Rpb24oW3Njb3BlXSwgY2xvbmVMaW5raW5nRm4sIGZ1dHVyZVBhcmVudEVsZW1lbnQpYC5cclxuICpcclxuICogIyMjIyBQcmUtbGlua2luZyBmdW5jdGlvblxyXG4gKlxyXG4gKiBFeGVjdXRlZCBiZWZvcmUgdGhlIGNoaWxkIGVsZW1lbnRzIGFyZSBsaW5rZWQuIE5vdCBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBzaW5jZSB0aGVcclxuICogY29tcGlsZXIgbGlua2luZyBmdW5jdGlvbiB3aWxsIGZhaWwgdG8gbG9jYXRlIHRoZSBjb3JyZWN0IGVsZW1lbnRzIGZvciBsaW5raW5nLlxyXG4gKlxyXG4gKiAjIyMjIFBvc3QtbGlua2luZyBmdW5jdGlvblxyXG4gKlxyXG4gKiBFeGVjdXRlZCBhZnRlciB0aGUgY2hpbGQgZWxlbWVudHMgYXJlIGxpbmtlZC5cclxuICpcclxuICogTm90ZSB0aGF0IGNoaWxkIGVsZW1lbnRzIHRoYXQgY29udGFpbiBgdGVtcGxhdGVVcmxgIGRpcmVjdGl2ZXMgd2lsbCBub3QgaGF2ZSBiZWVuIGNvbXBpbGVkXHJcbiAqIGFuZCBsaW5rZWQgc2luY2UgdGhleSBhcmUgd2FpdGluZyBmb3IgdGhlaXIgdGVtcGxhdGUgdG8gbG9hZCBhc3luY2hyb25vdXNseSBhbmQgdGhlaXIgb3duXHJcbiAqIGNvbXBpbGF0aW9uIGFuZCBsaW5raW5nIGhhcyBiZWVuIHN1c3BlbmRlZCB1bnRpbCB0aGF0IG9jY3Vycy5cclxuICpcclxuICogSXQgaXMgc2FmZSB0byBkbyBET00gdHJhbnNmb3JtYXRpb24gaW4gdGhlIHBvc3QtbGlua2luZyBmdW5jdGlvbiBvbiBlbGVtZW50cyB0aGF0IGFyZSBub3Qgd2FpdGluZ1xyXG4gKiBmb3IgdGhlaXIgYXN5bmMgdGVtcGxhdGVzIHRvIGJlIHJlc29sdmVkLlxyXG4gKlxyXG4gKiA8YSBuYW1lPVwiQXR0cmlidXRlc1wiPjwvYT5cclxuICogIyMjIEF0dHJpYnV0ZXNcclxuICpcclxuICogVGhlIHtAbGluayBuZy4kY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyBBdHRyaWJ1dGVzfSBvYmplY3QgLSBwYXNzZWQgYXMgYSBwYXJhbWV0ZXIgaW4gdGhlXHJcbiAqIGBsaW5rKClgIG9yIGBjb21waWxlKClgIGZ1bmN0aW9ucy4gSXQgaGFzIGEgdmFyaWV0eSBvZiB1c2VzLlxyXG4gKlxyXG4gKiBhY2Nlc3NpbmcgKk5vcm1hbGl6ZWQgYXR0cmlidXRlIG5hbWVzOipcclxuICogRGlyZWN0aXZlcyBsaWtlICduZ0JpbmQnIGNhbiBiZSBleHByZXNzZWQgaW4gbWFueSB3YXlzOiAnbmc6YmluZCcsIGBkYXRhLW5nLWJpbmRgLCBvciAneC1uZy1iaW5kJy5cclxuICogdGhlIGF0dHJpYnV0ZXMgb2JqZWN0IGFsbG93cyBmb3Igbm9ybWFsaXplZCBhY2Nlc3MgdG9cclxuICogICB0aGUgYXR0cmlidXRlcy5cclxuICpcclxuICogKiAqRGlyZWN0aXZlIGludGVyLWNvbW11bmljYXRpb246KiBBbGwgZGlyZWN0aXZlcyBzaGFyZSB0aGUgc2FtZSBpbnN0YW5jZSBvZiB0aGUgYXR0cmlidXRlc1xyXG4gKiAgIG9iamVjdCB3aGljaCBhbGxvd3MgdGhlIGRpcmVjdGl2ZXMgdG8gdXNlIHRoZSBhdHRyaWJ1dGVzIG9iamVjdCBhcyBpbnRlciBkaXJlY3RpdmVcclxuICogICBjb21tdW5pY2F0aW9uLlxyXG4gKlxyXG4gKiAqICpTdXBwb3J0cyBpbnRlcnBvbGF0aW9uOiogSW50ZXJwb2xhdGlvbiBhdHRyaWJ1dGVzIGFyZSBhc3NpZ25lZCB0byB0aGUgYXR0cmlidXRlIG9iamVjdFxyXG4gKiAgIGFsbG93aW5nIG90aGVyIGRpcmVjdGl2ZXMgdG8gcmVhZCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlLlxyXG4gKlxyXG4gKiAqICpPYnNlcnZpbmcgaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZXM6KiBVc2UgYCRvYnNlcnZlYCB0byBvYnNlcnZlIHRoZSB2YWx1ZSBjaGFuZ2VzIG9mIGF0dHJpYnV0ZXNcclxuICogICB0aGF0IGNvbnRhaW4gaW50ZXJwb2xhdGlvbiAoZS5nLiBgc3JjPVwie3tiYXJ9fVwiYCkuIE5vdCBvbmx5IGlzIHRoaXMgdmVyeSBlZmZpY2llbnQgYnV0IGl0J3MgYWxzb1xyXG4gKiAgIHRoZSBvbmx5IHdheSB0byBlYXNpbHkgZ2V0IHRoZSBhY3R1YWwgdmFsdWUgYmVjYXVzZSBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UgdGhlIGludGVycG9sYXRpb25cclxuICogICBoYXNuJ3QgYmVlbiBldmFsdWF0ZWQgeWV0IGFuZCBzbyB0aGUgdmFsdWUgaXMgYXQgdGhpcyB0aW1lIHNldCB0byBgdW5kZWZpbmVkYC5cclxuICpcclxuICogYGBganNcclxuICogZnVuY3Rpb24gbGlua2luZ0ZuKHNjb3BlLCBlbG0sIGF0dHJzLCBjdHJsKSB7XHJcbiAqICAgLy8gZ2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWVcclxuICogICBjb25zb2xlLmxvZyhhdHRycy5uZ01vZGVsKTtcclxuICpcclxuICogICAvLyBjaGFuZ2UgdGhlIGF0dHJpYnV0ZVxyXG4gKiAgIGF0dHJzLiRzZXQoJ25nTW9kZWwnLCAnbmV3IHZhbHVlJyk7XHJcbiAqXHJcbiAqICAgLy8gb2JzZXJ2ZSBjaGFuZ2VzIHRvIGludGVycG9sYXRlZCBhdHRyaWJ1dGVcclxuICogICBhdHRycy4kb2JzZXJ2ZSgnbmdNb2RlbCcsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZygnbmdNb2RlbCBoYXMgY2hhbmdlZCB2YWx1ZSB0byAnICsgdmFsdWUpO1xyXG4gKiAgIH0pO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBCZWxvdyBpcyBhbiBleGFtcGxlIHVzaW5nIGAkY29tcGlsZVByb3ZpZGVyYC5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlKio6IFR5cGljYWxseSBkaXJlY3RpdmVzIGFyZSByZWdpc3RlcmVkIHdpdGggYG1vZHVsZS5kaXJlY3RpdmVgLiBUaGUgZXhhbXBsZSBiZWxvdyBpc1xyXG4gKiB0byBpbGx1c3RyYXRlIGhvdyBgJGNvbXBpbGVgIHdvcmtzLlxyXG4gKiA8L2Rpdj5cclxuICpcclxuIDxleGFtcGxlIG1vZHVsZT1cImNvbXBpbGVFeGFtcGxlXCI+XHJcbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICA8c2NyaXB0PlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnY29tcGlsZUV4YW1wbGUnLCBbXSwgZnVuY3Rpb24oJGNvbXBpbGVQcm92aWRlcikge1xyXG4gICAgICAgIC8vIGNvbmZpZ3VyZSBuZXcgJ2NvbXBpbGUnIGRpcmVjdGl2ZSBieSBwYXNzaW5nIGEgZGlyZWN0aXZlXHJcbiAgICAgICAgLy8gZmFjdG9yeSBmdW5jdGlvbi4gVGhlIGZhY3RvcnkgZnVuY3Rpb24gaW5qZWN0cyB0aGUgJyRjb21waWxlJ1xyXG4gICAgICAgICRjb21waWxlUHJvdmlkZXIuZGlyZWN0aXZlKCdjb21waWxlJywgZnVuY3Rpb24oJGNvbXBpbGUpIHtcclxuICAgICAgICAgIC8vIGRpcmVjdGl2ZSBmYWN0b3J5IGNyZWF0ZXMgYSBsaW5rIGZ1bmN0aW9uXHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaChcclxuICAgICAgICAgICAgICBmdW5jdGlvbihzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgIC8vIHdhdGNoIHRoZSAnY29tcGlsZScgZXhwcmVzc2lvbiBmb3IgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRldmFsKGF0dHJzLmNvbXBpbGUpO1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlICdjb21waWxlJyBleHByZXNzaW9uIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBpdCBpbnRvIHRoZSBjdXJyZW50IERPTVxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5odG1sKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb21waWxlIHRoZSBuZXcgRE9NIGFuZCBsaW5rIGl0IHRvIHRoZSBjdXJyZW50XHJcbiAgICAgICAgICAgICAgICAvLyBzY29wZS5cclxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IHdlIG9ubHkgY29tcGlsZSAuY2hpbGROb2RlcyBzbyB0aGF0XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBnZXQgaW50byBpbmZpbml0ZSBsb29wIGNvbXBpbGluZyBvdXJzZWx2ZXNcclxuICAgICAgICAgICAgICAgICRjb21waWxlKGVsZW1lbnQuY29udGVudHMoKSkoc2NvcGUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jb250cm9sbGVyKCdHcmVldGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgJHNjb3BlLm5hbWUgPSAnQW5ndWxhcic7XHJcbiAgICAgICAgJHNjb3BlLmh0bWwgPSAnSGVsbG8ge3tuYW1lfX0nO1xyXG4gICAgICB9XSk7XHJcbiAgICA8L3NjcmlwdD5cclxuICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkdyZWV0ZXJDb250cm9sbGVyXCI+XHJcbiAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5hbWVcIj4gPGJyPlxyXG4gICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJodG1sXCI+PC90ZXh0YXJlYT4gPGJyPlxyXG4gICAgICA8ZGl2IGNvbXBpbGU9XCJodG1sXCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgPC9maWxlPlxyXG4gICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgaXQoJ3Nob3VsZCBhdXRvIGNvbXBpbGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgIHZhciB0ZXh0YXJlYSA9ICQoJ3RleHRhcmVhJyk7XHJcbiAgICAgICB2YXIgb3V0cHV0ID0gJCgnZGl2W2NvbXBpbGVdJyk7XHJcbiAgICAgICAvLyBUaGUgaW5pdGlhbCBzdGF0ZSByZWFkcyAnSGVsbG8gQW5ndWxhcicuXHJcbiAgICAgICBleHBlY3Qob3V0cHV0LmdldFRleHQoKSkudG9CZSgnSGVsbG8gQW5ndWxhcicpO1xyXG4gICAgICAgdGV4dGFyZWEuY2xlYXIoKTtcclxuICAgICAgIHRleHRhcmVhLnNlbmRLZXlzKCd7e25hbWV9fSEnKTtcclxuICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0JlKCdBbmd1bGFyIScpO1xyXG4gICAgIH0pO1xyXG4gICA8L2ZpbGU+XHJcbiA8L2V4YW1wbGU+XHJcblxyXG4gKlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ3xET01FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgb3IgSFRNTCBzdHJpbmcgdG8gY29tcGlsZSBpbnRvIGEgdGVtcGxhdGUgZnVuY3Rpb24uXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oYW5ndWxhci5TY29wZSwgY2xvbmVBdHRhY2hGbj0pfSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGF2YWlsYWJsZSB0byBkaXJlY3RpdmVzLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UHJpb3JpdHkgb25seSBhcHBseSBkaXJlY3RpdmVzIGxvd2VyIHRoYW4gZ2l2ZW4gcHJpb3JpdHkgKE9ubHkgZWZmZWN0cyB0aGVcclxuICogICAgICAgICAgICAgICAgIHJvb3QgZWxlbWVudChzKSwgbm90IHRoZWlyIGNoaWxkcmVuKVxyXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc2NvcGUsIGNsb25lQXR0YWNoRm49KX0gYSBsaW5rIGZ1bmN0aW9uIHdoaWNoIGlzIHVzZWQgdG8gYmluZCB0ZW1wbGF0ZVxyXG4gKiAoYSBET00gZWxlbWVudC90cmVlKSB0byBhIHNjb3BlLiBXaGVyZTpcclxuICpcclxuICogICogYHNjb3BlYCAtIEEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IHRvIGJpbmQgdG8uXHJcbiAqICAqIGBjbG9uZUF0dGFjaEZuYCAtIElmIGBjbG9uZUF0dGFjaEZuYCBpcyBwcm92aWRlZCwgdGhlbiB0aGUgbGluayBmdW5jdGlvbiB3aWxsIGNsb25lIHRoZVxyXG4gKiAgYHRlbXBsYXRlYCBhbmQgY2FsbCB0aGUgYGNsb25lQXR0YWNoRm5gIGZ1bmN0aW9uIGFsbG93aW5nIHRoZSBjYWxsZXIgdG8gYXR0YWNoIHRoZVxyXG4gKiAgY2xvbmVkIGVsZW1lbnRzIHRvIHRoZSBET00gZG9jdW1lbnQgYXQgdGhlIGFwcHJvcHJpYXRlIHBsYWNlLiBUaGUgYGNsb25lQXR0YWNoRm5gIGlzXHJcbiAqICBjYWxsZWQgYXM6IDxicj4gYGNsb25lQXR0YWNoRm4oY2xvbmVkRWxlbWVudCwgc2NvcGUpYCB3aGVyZTpcclxuICpcclxuICogICAgICAqIGBjbG9uZWRFbGVtZW50YCAtIGlzIGEgY2xvbmUgb2YgdGhlIG9yaWdpbmFsIGBlbGVtZW50YCBwYXNzZWQgaW50byB0aGUgY29tcGlsZXIuXHJcbiAqICAgICAgKiBgc2NvcGVgIC0gaXMgdGhlIGN1cnJlbnQgc2NvcGUgd2l0aCB3aGljaCB0aGUgbGlua2luZyBmdW5jdGlvbiBpcyB3b3JraW5nIHdpdGguXHJcbiAqXHJcbiAqIENhbGxpbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb24gcmV0dXJucyB0aGUgZWxlbWVudCBvZiB0aGUgdGVtcGxhdGUuIEl0IGlzIGVpdGhlciB0aGUgb3JpZ2luYWxcclxuICogZWxlbWVudCBwYXNzZWQgaW4sIG9yIHRoZSBjbG9uZSBvZiB0aGUgZWxlbWVudCBpZiB0aGUgYGNsb25lQXR0YWNoRm5gIGlzIHByb3ZpZGVkLlxyXG4gKlxyXG4gKiBBZnRlciBsaW5raW5nIHRoZSB2aWV3IGlzIG5vdCB1cGRhdGVkIHVudGlsIGFmdGVyIGEgY2FsbCB0byAkZGlnZXN0IHdoaWNoIHR5cGljYWxseSBpcyBkb25lIGJ5XHJcbiAqIEFuZ3VsYXIgYXV0b21hdGljYWxseS5cclxuICpcclxuICogSWYgeW91IG5lZWQgYWNjZXNzIHRvIHRoZSBib3VuZCB2aWV3LCB0aGVyZSBhcmUgdHdvIHdheXMgdG8gZG8gaXQ6XHJcbiAqXHJcbiAqIC0gSWYgeW91IGFyZSBub3QgYXNraW5nIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHRvIGNsb25lIHRoZSB0ZW1wbGF0ZSwgY3JlYXRlIHRoZSBET00gZWxlbWVudChzKVxyXG4gKiAgIGJlZm9yZSB5b3Ugc2VuZCB0aGVtIHRvIHRoZSBjb21waWxlciBhbmQga2VlcCB0aGlzIHJlZmVyZW5jZSBhcm91bmQuXHJcbiAqICAgYGBganNcclxuICogICAgIHZhciBlbGVtZW50ID0gJGNvbXBpbGUoJzxwPnt7dG90YWx9fTwvcD4nKShzY29wZSk7XHJcbiAqICAgYGBgXHJcbiAqXHJcbiAqIC0gaWYgb24gdGhlIG90aGVyIGhhbmQsIHlvdSBuZWVkIHRoZSBlbGVtZW50IHRvIGJlIGNsb25lZCwgdGhlIHZpZXcgcmVmZXJlbmNlIGZyb20gdGhlIG9yaWdpbmFsXHJcbiAqICAgZXhhbXBsZSB3b3VsZCBub3QgcG9pbnQgdG8gdGhlIGNsb25lLCBidXQgcmF0aGVyIHRvIHRoZSBvcmlnaW5hbCB0ZW1wbGF0ZSB0aGF0IHdhcyBjbG9uZWQuIEluXHJcbiAqICAgdGhpcyBjYXNlLCB5b3UgY2FuIGFjY2VzcyB0aGUgY2xvbmUgdmlhIHRoZSBjbG9uZUF0dGFjaEZuOlxyXG4gKiAgIGBgYGpzXHJcbiAqICAgICB2YXIgdGVtcGxhdGVFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCc8cD57e3RvdGFsfX08L3A+JyksXHJcbiAqICAgICAgICAgc2NvcGUgPSAuLi4uO1xyXG4gKlxyXG4gKiAgICAgdmFyIGNsb25lZEVsZW1lbnQgPSAkY29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpKHNjb3BlLCBmdW5jdGlvbihjbG9uZWRFbGVtZW50LCBzY29wZSkge1xyXG4gKiAgICAgICAvL2F0dGFjaCB0aGUgY2xvbmUgdG8gRE9NIGRvY3VtZW50IGF0IHRoZSByaWdodCBwbGFjZVxyXG4gKiAgICAgfSk7XHJcbiAqXHJcbiAqICAgICAvL25vdyB3ZSBoYXZlIHJlZmVyZW5jZSB0byB0aGUgY2xvbmVkIERPTSB2aWEgYGNsb25lZEVsZW1lbnRgXHJcbiAqICAgYGBgXHJcbiAqXHJcbiAqXHJcbiAqIEZvciBpbmZvcm1hdGlvbiBvbiBob3cgdGhlIGNvbXBpbGVyIHdvcmtzLCBzZWUgdGhlXHJcbiAqIHtAbGluayBndWlkZS9jb21waWxlciBBbmd1bGFyIEhUTUwgQ29tcGlsZXJ9IHNlY3Rpb24gb2YgdGhlIERldmVsb3BlciBHdWlkZS5cclxuICovXHJcblxyXG52YXIgJGNvbXBpbGVNaW5FcnIgPSBtaW5FcnIoJyRjb21waWxlJyk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRjb21waWxlUHJvdmlkZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqL1xyXG4kQ29tcGlsZVByb3ZpZGVyLiRpbmplY3QgPSBbJyRwcm92aWRlJywgJyQkc2FuaXRpemVVcmlQcm92aWRlciddO1xyXG5mdW5jdGlvbiAkQ29tcGlsZVByb3ZpZGVyKCRwcm92aWRlLCAkJHNhbml0aXplVXJpUHJvdmlkZXIpIHtcclxuICB2YXIgaGFzRGlyZWN0aXZlcyA9IHt9LFxyXG4gICAgICBTdWZmaXggPSAnRGlyZWN0aXZlJyxcclxuICAgICAgQ09NTUVOVF9ESVJFQ1RJVkVfUkVHRVhQID0gL15cXHMqZGlyZWN0aXZlXFw6XFxzKihbXFxkXFx3X1xcLV0rKVxccysoLiopJC8sXHJcbiAgICAgIENMQVNTX0RJUkVDVElWRV9SRUdFWFAgPSAvKChbXFxkXFx3X1xcLV0rKSg/OlxcOihbXjtdKykpPzs/KS8sXHJcbiAgICAgIEFMTF9PUl9OT1RISU5HX0FUVFJTID0gbWFrZU1hcCgnbmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldCcpO1xyXG5cclxuICAvLyBSZWY6IGh0dHA6Ly9kZXZlbG9wZXJzLndoYXR3Zy5vcmcvd2ViYXBwYXBpcy5odG1sI2V2ZW50LWhhbmRsZXItaWRsLWF0dHJpYnV0ZXNcclxuICAvLyBUaGUgYXNzdW1wdGlvbiBpcyB0aGF0IGZ1dHVyZSBET00gZXZlbnQgYXR0cmlidXRlIG5hbWVzIHdpbGwgYmVnaW4gd2l0aFxyXG4gIC8vICdvbicgYW5kIGJlIGNvbXBvc2VkIG9mIG9ubHkgRW5nbGlzaCBsZXR0ZXJzLlxyXG4gIHZhciBFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQID0gL14ob25bYS16XSt8Zm9ybWFjdGlvbikkLztcclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VJc29sYXRlQmluZGluZ3Moc2NvcGUsIGRpcmVjdGl2ZU5hbWUpIHtcclxuICAgIHZhciBMT0NBTF9SRUdFWFAgPSAvXlxccyooW0A9Jl0pKFxcPz8pXFxzKihcXHcqKVxccyokLztcclxuXHJcbiAgICB2YXIgYmluZGluZ3MgPSB7fTtcclxuXHJcbiAgICBmb3JFYWNoKHNjb3BlLCBmdW5jdGlvbihkZWZpbml0aW9uLCBzY29wZU5hbWUpIHtcclxuICAgICAgdmFyIG1hdGNoID0gZGVmaW5pdGlvbi5tYXRjaChMT0NBTF9SRUdFWFApO1xyXG5cclxuICAgICAgaWYgKCFtYXRjaCkge1xyXG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdpc2NwJyxcclxuICAgICAgICAgICAgXCJJbnZhbGlkIGlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiBmb3IgZGlyZWN0aXZlICd7MH0nLlwiICtcclxuICAgICAgICAgICAgXCIgRGVmaW5pdGlvbjogey4uLiB7MX06ICd7Mn0nIC4uLn1cIixcclxuICAgICAgICAgICAgZGlyZWN0aXZlTmFtZSwgc2NvcGVOYW1lLCBkZWZpbml0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYmluZGluZ3Nbc2NvcGVOYW1lXSA9IHtcclxuICAgICAgICBhdHRyTmFtZTogbWF0Y2hbM10gfHwgc2NvcGVOYW1lLFxyXG4gICAgICAgIG1vZGU6IG1hdGNoWzFdLFxyXG4gICAgICAgIG9wdGlvbmFsOiBtYXRjaFsyXSA9PT0gJz8nXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gYmluZGluZ3M7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmVcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmVnaXN0ZXIgYSBuZXcgZGlyZWN0aXZlIHdpdGggdGhlIGNvbXBpbGVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIE5hbWUgb2YgdGhlIGRpcmVjdGl2ZSBpbiBjYW1lbC1jYXNlIChpLmUuIDxjb2RlPm5nQmluZDwvY29kZT4gd2hpY2hcclxuICAgKiAgICB3aWxsIG1hdGNoIGFzIDxjb2RlPm5nLWJpbmQ8L2NvZGU+KSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBkaXJlY3RpdmVzIHdoZXJlIHRoZSBrZXlzIGFyZSB0aGVcclxuICAgKiAgICBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGZhY3Rvcmllcy5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5fSBkaXJlY3RpdmVGYWN0b3J5IEFuIGluamVjdGFibGUgZGlyZWN0aXZlIGZhY3RvcnkgZnVuY3Rpb24uIFNlZVxyXG4gICAqICAgIHtAbGluayBndWlkZS9kaXJlY3RpdmV9IGZvciBtb3JlIGluZm8uXHJcbiAgICogQHJldHVybnMge25nLiRjb21waWxlUHJvdmlkZXJ9IFNlbGYgZm9yIGNoYWluaW5nLlxyXG4gICAqL1xyXG4gICB0aGlzLmRpcmVjdGl2ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVyRGlyZWN0aXZlKG5hbWUsIGRpcmVjdGl2ZUZhY3RvcnkpIHtcclxuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdkaXJlY3RpdmUnKTtcclxuICAgIGlmIChpc1N0cmluZyhuYW1lKSkge1xyXG4gICAgICBhc3NlcnRBcmcoZGlyZWN0aXZlRmFjdG9yeSwgJ2RpcmVjdGl2ZUZhY3RvcnknKTtcclxuICAgICAgaWYgKCFoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgaGFzRGlyZWN0aXZlc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgICRwcm92aWRlLmZhY3RvcnkobmFtZSArIFN1ZmZpeCwgWyckaW5qZWN0b3InLCAnJGV4Y2VwdGlvbkhhbmRsZXInLFxyXG4gICAgICAgICAgZnVuY3Rpb24oJGluamVjdG9yLCAkZXhjZXB0aW9uSGFuZGxlcikge1xyXG4gICAgICAgICAgICB2YXIgZGlyZWN0aXZlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3JFYWNoKGhhc0RpcmVjdGl2ZXNbbmFtZV0sIGZ1bmN0aW9uKGRpcmVjdGl2ZUZhY3RvcnksIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBkaXJlY3RpdmUgPSAkaW5qZWN0b3IuaW52b2tlKGRpcmVjdGl2ZUZhY3RvcnkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZGlyZWN0aXZlKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUgPSB7IGNvbXBpbGU6IHZhbHVlRm4oZGlyZWN0aXZlKSB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZGlyZWN0aXZlLmNvbXBpbGUgJiYgZGlyZWN0aXZlLmxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLmNvbXBpbGUgPSB2YWx1ZUZuKGRpcmVjdGl2ZS5saW5rKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5wcmlvcml0eSA9IGRpcmVjdGl2ZS5wcmlvcml0eSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUubmFtZSA9IGRpcmVjdGl2ZS5uYW1lIHx8IG5hbWU7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucmVxdWlyZSA9IGRpcmVjdGl2ZS5yZXF1aXJlIHx8IChkaXJlY3RpdmUuY29udHJvbGxlciAmJiBkaXJlY3RpdmUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucmVzdHJpY3QgPSBkaXJlY3RpdmUucmVzdHJpY3QgfHwgJ0VBJztcclxuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdChkaXJlY3RpdmUuc2NvcGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncyA9IHBhcnNlSXNvbGF0ZUJpbmRpbmdzKGRpcmVjdGl2ZS5zY29wZSwgZGlyZWN0aXZlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZXM7XHJcbiAgICAgICAgICB9XSk7XHJcbiAgICAgIH1cclxuICAgICAgaGFzRGlyZWN0aXZlc1tuYW1lXS5wdXNoKGRpcmVjdGl2ZUZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yRWFjaChuYW1lLCByZXZlcnNlUGFyYW1zKHJlZ2lzdGVyRGlyZWN0aXZlKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIGZvciB3aGl0ZWxpc3Rpbmcgb2Ygc2FmZVxyXG4gICAqIHVybHMgZHVyaW5nIGFbaHJlZl0gc2FuaXRpemF0aW9uLlxyXG4gICAqXHJcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cclxuICAgKlxyXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gYVtocmVmXSB2aWEgZGF0YS1iaW5kaW5nIGlzIGZpcnN0IG5vcm1hbGl6ZWQgYW5kIHR1cm5lZCBpbnRvXHJcbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0YFxyXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxyXG4gICAqIHRoZSBhYnNvbHV0ZSB1cmwgaXMgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCBzdHJpbmcgYW5kIG9ubHkgdGhlbiBpcyBpdCB3cml0dGVuIGludG8gdGhlIERPTS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cclxuICAgKiBAcmV0dXJucyB7UmVnRXhwfG5nLiRjb21waWxlUHJvdmlkZXJ9IEN1cnJlbnQgUmVnRXhwIGlmIGNhbGxlZCB3aXRob3V0IHZhbHVlIG9yIHNlbGYgZm9yXHJcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxyXG4gICAqL1xyXG4gIHRoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcclxuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xyXG4gICAgICAkJHNhbml0aXplVXJpUHJvdmlkZXIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QocmVnZXhwKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2ltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXHJcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxyXG4gICAqXHJcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cclxuICAgKlxyXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gaW1nW3NyY10gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xyXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXHJcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXHJcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxyXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgdGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcclxuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xyXG4gICAgICAkJHNhbml0aXplVXJpUHJvdmlkZXIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KHJlZ2V4cCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICQkc2FuaXRpemVVcmlQcm92aWRlci5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgICRjb21waWxlUHJvdmlkZXIjZGVidWdJbmZvRW5hYmxlZFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZW5hYmxlZCB1cGRhdGUgdGhlIGRlYnVnSW5mb0VuYWJsZWQgc3RhdGUgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBqdXN0IHJldHVybiB0aGVcclxuICAgKiBjdXJyZW50IGRlYnVnSW5mb0VuYWJsZWQgc3RhdGVcclxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxyXG4gICAqXHJcbiAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbGwgdGhpcyBtZXRob2QgdG8gZW5hYmxlL2Rpc2FibGUgdmFyaW91cyBkZWJ1ZyBydW50aW1lIGluZm9ybWF0aW9uIGluIHRoZSBjb21waWxlciBzdWNoIGFzIGFkZGluZ1xyXG4gICAqIGJpbmRpbmcgaW5mb3JtYXRpb24gYW5kIGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHNjb3BlIG9uIHRvIERPTSBlbGVtZW50cy5cclxuICAgKiBJZiBlbmFibGVkLCB0aGUgY29tcGlsZXIgd2lsbCBhZGQgdGhlIGZvbGxvd2luZyB0byBET00gZWxlbWVudHMgdGhhdCBoYXZlIGJlZW4gYm91bmQgdG8gdGhlIHNjb3BlXHJcbiAgICogKiBgbmctYmluZGluZ2AgQ1NTIGNsYXNzXHJcbiAgICogKiBgJGJpbmRpbmdgIGRhdGEgcHJvcGVydHkgY29udGFpbmluZyBhbiBhcnJheSBvZiB0aGUgYmluZGluZyBleHByZXNzaW9uc1xyXG4gICAqXHJcbiAgICogWW91IG1heSB3YW50IHRvIHVzZSB0aGlzIGluIHByb2R1Y3Rpb24gZm9yIGEgc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgYm9vc3QuIFNlZVxyXG4gICAqIHtAbGluayBndWlkZS9wcm9kdWN0aW9uI2Rpc2FibGluZy1kZWJ1Zy1kYXRhIERpc2FibGluZyBEZWJ1ZyBEYXRhfSBmb3IgbW9yZS5cclxuICAgKlxyXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRydWUuXHJcbiAgICovXHJcbiAgdmFyIGRlYnVnSW5mb0VuYWJsZWQgPSB0cnVlO1xyXG4gIHRoaXMuZGVidWdJbmZvRW5hYmxlZCA9IGZ1bmN0aW9uKGVuYWJsZWQpIHtcclxuICAgIGlmKGlzRGVmaW5lZChlbmFibGVkKSkge1xyXG4gICAgICBkZWJ1Z0luZm9FbmFibGVkID0gZW5hYmxlZDtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVidWdJbmZvRW5hYmxlZDtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBbXHJcbiAgICAgICAgICAgICckaW5qZWN0b3InLCAnJGludGVycG9sYXRlJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyR0ZW1wbGF0ZVJlcXVlc3QnLCAnJHBhcnNlJyxcclxuICAgICAgICAgICAgJyRjb250cm9sbGVyJywgJyRyb290U2NvcGUnLCAnJGRvY3VtZW50JywgJyRzY2UnLCAnJGFuaW1hdGUnLCAnJCRzYW5pdGl6ZVVyaScsXHJcbiAgICBmdW5jdGlvbigkaW5qZWN0b3IsICAgJGludGVycG9sYXRlLCAgICRleGNlcHRpb25IYW5kbGVyLCAgICR0ZW1wbGF0ZVJlcXVlc3QsICAgJHBhcnNlLFxyXG4gICAgICAgICAgICAgJGNvbnRyb2xsZXIsICAgJHJvb3RTY29wZSwgICAkZG9jdW1lbnQsICAgJHNjZSwgICAkYW5pbWF0ZSwgICAkJHNhbml0aXplVXJpKSB7XHJcblxyXG4gICAgdmFyIEF0dHJpYnV0ZXMgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGVzVG9Db3B5KSB7XHJcbiAgICAgIGlmIChhdHRyaWJ1dGVzVG9Db3B5KSB7XHJcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzVG9Db3B5KTtcclxuICAgICAgICB2YXIgaSwgbCwga2V5O1xyXG5cclxuICAgICAgICBmb3IgKGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgIGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgICB0aGlzW2tleV0gPSBhdHRyaWJ1dGVzVG9Db3B5W2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJGF0dHIgPSB7fTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy4kJGVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBBdHRyaWJ1dGVzLnByb3RvdHlwZSA9IHtcclxuICAgICAgJG5vcm1hbGl6ZTogZGlyZWN0aXZlTm9ybWFsaXplLFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRhZGRDbGFzc1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogQWRkcyB0aGUgQ1NTIGNsYXNzIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgY2xhc3NWYWwgcGFyYW1ldGVyIHRvIHRoZSBlbGVtZW50LiBJZiBhbmltYXRpb25zXHJcbiAgICAgICAqIGFyZSBlbmFibGVkIHRoZW4gYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGZvciB0aGUgY2xhc3MgYWRkaXRpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1ZhbCBUaGUgY2xhc3NOYW1lIHZhbHVlIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudFxyXG4gICAgICAgKi9cclxuICAgICAgJGFkZENsYXNzIDogZnVuY3Rpb24oY2xhc3NWYWwpIHtcclxuICAgICAgICBpZihjbGFzc1ZhbCAmJiBjbGFzc1ZhbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgY2xhc3NWYWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRyZW1vdmVDbGFzc1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogUmVtb3ZlcyB0aGUgQ1NTIGNsYXNzIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgY2xhc3NWYWwgcGFyYW1ldGVyIGZyb20gdGhlIGVsZW1lbnQuIElmXHJcbiAgICAgICAqIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQgdGhlbiBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgZm9yIHRoZSBjbGFzcyByZW1vdmFsLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NWYWwgVGhlIGNsYXNzTmFtZSB2YWx1ZSB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XHJcbiAgICAgICAqL1xyXG4gICAgICAkcmVtb3ZlQ2xhc3MgOiBmdW5jdGlvbihjbGFzc1ZhbCkge1xyXG4gICAgICAgIGlmKGNsYXNzVmFsICYmIGNsYXNzVmFsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBjbGFzc1ZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHVwZGF0ZUNsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBBZGRzIGFuZCByZW1vdmVzIHRoZSBhcHByb3ByaWF0ZSBDU1MgY2xhc3MgdmFsdWVzIHRvIHRoZSBlbGVtZW50IGJhc2VkIG9uIHRoZSBkaWZmZXJlbmNlXHJcbiAgICAgICAqIGJldHdlZW4gdGhlIG5ldyBhbmQgb2xkIENTUyBjbGFzcyB2YWx1ZXMgKHNwZWNpZmllZCBhcyBuZXdDbGFzc2VzIGFuZCBvbGRDbGFzc2VzKS5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5ld0NsYXNzZXMgVGhlIGN1cnJlbnQgQ1NTIGNsYXNzTmFtZSB2YWx1ZVxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gb2xkQ2xhc3NlcyBUaGUgZm9ybWVyIENTUyBjbGFzc05hbWUgdmFsdWVcclxuICAgICAgICovXHJcbiAgICAgICR1cGRhdGVDbGFzcyA6IGZ1bmN0aW9uKG5ld0NsYXNzZXMsIG9sZENsYXNzZXMpIHtcclxuICAgICAgICB2YXIgdG9BZGQgPSB0b2tlbkRpZmZlcmVuY2UobmV3Q2xhc3Nlcywgb2xkQ2xhc3Nlcyk7XHJcbiAgICAgICAgaWYgKHRvQWRkICYmIHRvQWRkLmxlbmd0aCkge1xyXG4gICAgICAgICAgJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIHRvQWRkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0b1JlbW92ZSA9IHRva2VuRGlmZmVyZW5jZShvbGRDbGFzc2VzLCBuZXdDbGFzc2VzKTtcclxuICAgICAgICBpZiAodG9SZW1vdmUgJiYgdG9SZW1vdmUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgdG9SZW1vdmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZXQgYSBub3JtYWxpemVkIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBpbiBhIHdheSBzdWNoIHRoYXQgYWxsIGRpcmVjdGl2ZXNcclxuICAgICAgICogY2FuIHNoYXJlIHRoZSBhdHRyaWJ1dGUuIFRoaXMgZnVuY3Rpb24gcHJvcGVybHkgaGFuZGxlcyBib29sZWFuIGF0dHJpYnV0ZXMuXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgTm9ybWFsaXplZCBrZXkuIChpZSBuZ0F0dHJpYnV0ZSlcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd8Ym9vbGVhbn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4gSWYgYG51bGxgIGF0dHJpYnV0ZSB3aWxsIGJlIGRlbGV0ZWQuXHJcbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHdyaXRlQXR0ciBJZiBmYWxzZSwgZG9lcyBub3Qgd3JpdGUgdGhlIHZhbHVlIHRvIERPTSBlbGVtZW50IGF0dHJpYnV0ZS5cclxuICAgICAgICogICAgIERlZmF1bHRzIHRvIHRydWUuXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYXR0ck5hbWUgT3B0aW9uYWwgbm9uZSBub3JtYWxpemVkIG5hbWUuIERlZmF1bHRzIHRvIGtleS5cclxuICAgICAgICovXHJcbiAgICAgICRzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIHdyaXRlQXR0ciwgYXR0ck5hbWUpIHtcclxuICAgICAgICAvLyBUT0RPOiBkZWNpZGUgd2hldGhlciBvciBub3QgdG8gdGhyb3cgYW4gZXJyb3IgaWYgXCJjbGFzc1wiXHJcbiAgICAgICAgLy9pcyBzZXQgdGhyb3VnaCB0aGlzIGZ1bmN0aW9uIHNpbmNlIGl0IG1heSBjYXVzZSAkdXBkYXRlQ2xhc3MgdG9cclxuICAgICAgICAvL2JlY29tZSB1bnN0YWJsZS5cclxuXHJcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLiQkZWxlbWVudFswXSxcclxuICAgICAgICAgICAgYm9vbGVhbktleSA9IGdldEJvb2xlYW5BdHRyTmFtZShub2RlLCBrZXkpLFxyXG4gICAgICAgICAgICBhbGlhc2VkS2V5ID0gZ2V0QWxpYXNlZEF0dHJOYW1lKG5vZGUsIGtleSksXHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ga2V5LFxyXG4gICAgICAgICAgICBub3JtYWxpemVkVmFsLFxyXG4gICAgICAgICAgICBub2RlTmFtZTtcclxuXHJcbiAgICAgICAgaWYgKGJvb2xlYW5LZXkpIHtcclxuICAgICAgICAgIHRoaXMuJCRlbGVtZW50LnByb3Aoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICBhdHRyTmFtZSA9IGJvb2xlYW5LZXk7XHJcbiAgICAgICAgfSBlbHNlIGlmKGFsaWFzZWRLZXkpIHtcclxuICAgICAgICAgIHRoaXNbYWxpYXNlZEtleV0gPSB2YWx1ZTtcclxuICAgICAgICAgIG9ic2VydmVyID0gYWxpYXNlZEtleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAvLyB0cmFuc2xhdGUgbm9ybWFsaXplZCBrZXkgdG8gYWN0dWFsIGtleVxyXG4gICAgICAgIGlmIChhdHRyTmFtZSkge1xyXG4gICAgICAgICAgdGhpcy4kYXR0cltrZXldID0gYXR0ck5hbWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGF0dHJOYW1lID0gdGhpcy4kYXR0cltrZXldO1xyXG4gICAgICAgICAgaWYgKCFhdHRyTmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLiRhdHRyW2tleV0gPSBhdHRyTmFtZSA9IHNuYWtlX2Nhc2Uoa2V5LCAnLScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbm9kZU5hbWUgPSBub2RlTmFtZV8odGhpcy4kJGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBzYW5pdGl6ZSBhW2hyZWZdIGFuZCBpbWdbc3JjXSB2YWx1ZXNcclxuICAgICAgICBpZiAoKG5vZGVOYW1lID09PSAnYScgJiYga2V5ID09PSAnaHJlZicpIHx8XHJcbiAgICAgICAgICAgIChub2RlTmFtZSA9PT0gJ2ltZycgJiYga2V5ID09PSAnc3JjJykpIHtcclxuICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlID0gJCRzYW5pdGl6ZVVyaSh2YWx1ZSwga2V5ID09PSAnc3JjJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAod3JpdGVBdHRyICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy4kJGVsZW1lbnQucmVtb3ZlQXR0cihhdHRyTmFtZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiQkZWxlbWVudC5hdHRyKGF0dHJOYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaXJlIG9ic2VydmVyc1xyXG4gICAgICAgIHZhciAkJG9ic2VydmVycyA9IHRoaXMuJCRvYnNlcnZlcnM7XHJcbiAgICAgICAgJCRvYnNlcnZlcnMgJiYgZm9yRWFjaCgkJG9ic2VydmVyc1tvYnNlcnZlcl0sIGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmbih2YWx1ZSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRvYnNlcnZlXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBPYnNlcnZlcyBhbiBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgb2JzZXJ2ZXIgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIG9uY2UgZHVyaW5nIHRoZSBuZXh0IGAkZGlnZXN0YCBmb2xsb3dpbmdcclxuICAgICAgICogY29tcGlsYXRpb24uIFRoZSBvYnNlcnZlciBpcyB0aGVuIGludm9rZWQgd2hlbmV2ZXIgdGhlIGludGVycG9sYXRlZCB2YWx1ZVxyXG4gICAgICAgKiBjaGFuZ2VzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IE5vcm1hbGl6ZWQga2V5LiAoaWUgbmdBdHRyaWJ1dGUpIC5cclxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihpbnRlcnBvbGF0ZWRWYWx1ZSl9IGZuIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXJcclxuICAgICAgICAgICAgICAgIHRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBjaGFuZ2VzLlxyXG4gICAgICAgKiAgICAgICAgU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI0F0dHJpYnV0ZXMgRGlyZWN0aXZlc30gZ3VpZGUgZm9yIG1vcmUgaW5mby5cclxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBvYnNlcnZlci5cclxuICAgICAgICovXHJcbiAgICAgICRvYnNlcnZlOiBmdW5jdGlvbihrZXksIGZuKSB7XHJcbiAgICAgICAgdmFyIGF0dHJzID0gdGhpcyxcclxuICAgICAgICAgICAgJCRvYnNlcnZlcnMgPSAoYXR0cnMuJCRvYnNlcnZlcnMgfHwgKGF0dHJzLiQkb2JzZXJ2ZXJzID0ge30pKSxcclxuICAgICAgICAgICAgbGlzdGVuZXJzID0gKCQkb2JzZXJ2ZXJzW2tleV0gfHwgKCQkb2JzZXJ2ZXJzW2tleV0gPSBbXSkpO1xyXG5cclxuICAgICAgICBsaXN0ZW5lcnMucHVzaChmbik7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCFsaXN0ZW5lcnMuJCRpbnRlcikge1xyXG4gICAgICAgICAgICAvLyBubyBvbmUgcmVnaXN0ZXJlZCBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiwgc28gbGV0cyBjYWxsIGl0IG1hbnVhbGx5XHJcbiAgICAgICAgICAgIGZuKGF0dHJzW2tleV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBhcnJheVJlbW92ZShsaXN0ZW5lcnMsIGZuKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzYWZlQWRkQ2xhc3MoJGVsZW1lbnQsIGNsYXNzTmFtZSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7XHJcbiAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgIC8vIGlnbm9yZSwgc2luY2UgaXQgbWVhbnMgdGhhdCB3ZSBhcmUgdHJ5aW5nIHRvIHNldCBjbGFzcyBvblxyXG4gICAgICAgIC8vIFNWRyBlbGVtZW50LCB3aGVyZSBjbGFzcyBuYW1lIGlzIHJlYWQtb25seS5cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgc3RhcnRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2woKSxcclxuICAgICAgICBlbmRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksXHJcbiAgICAgICAgZGVub3JtYWxpemVUZW1wbGF0ZSA9IChzdGFydFN5bWJvbCA9PSAne3snIHx8IGVuZFN5bWJvbCAgPT0gJ319JylcclxuICAgICAgICAgICAgPyBpZGVudGl0eVxyXG4gICAgICAgICAgICA6IGZ1bmN0aW9uIGRlbm9ybWFsaXplVGVtcGxhdGUodGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZSgvXFx7XFx7L2csIHN0YXJ0U3ltYm9sKS5yZXBsYWNlKC99fS9nLCBlbmRTeW1ib2wpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTkdfQVRUUl9CSU5ESU5HID0gL15uZ0F0dHJbQS1aXS87XHJcblxyXG4gICAgY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkQmluZGluZ0luZm8oJGVsZW1lbnQsIGJpbmRpbmcpIHtcclxuICAgICAgdmFyIGJpbmRpbmdzID0gJGVsZW1lbnQuZGF0YSgnJGJpbmRpbmcnKSB8fCBbXTtcclxuXHJcbiAgICAgIGlmIChpc0FycmF5KGJpbmRpbmcpKSB7XHJcbiAgICAgICAgYmluZGluZ3MgPSBiaW5kaW5ncy5jb25jYXQoYmluZGluZyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmluZGluZ3MucHVzaChiaW5kaW5nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJGVsZW1lbnQuZGF0YSgnJGJpbmRpbmcnLCBiaW5kaW5ncyk7XHJcbiAgICB9IDogbm9vcDtcclxuXHJcbiAgICBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkQmluZGluZ0NsYXNzKCRlbGVtZW50KSB7XHJcbiAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgJ25nLWJpbmRpbmcnKTtcclxuICAgIH0gOiBub29wO1xyXG5cclxuICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8gPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRTY29wZUluZm8oJGVsZW1lbnQsIHNjb3BlLCBpc29sYXRlZCwgbm9UZW1wbGF0ZSkge1xyXG4gICAgICB2YXIgZGF0YU5hbWUgPSBpc29sYXRlZCA/IChub1RlbXBsYXRlID8gJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyA6ICckaXNvbGF0ZVNjb3BlJykgOiAnJHNjb3BlJztcclxuICAgICAgJGVsZW1lbnQuZGF0YShkYXRhTmFtZSwgc2NvcGUpO1xyXG4gICAgfSA6IG5vb3A7XHJcblxyXG4gICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MgPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRTY29wZUNsYXNzKCRlbGVtZW50LCBpc29sYXRlZCkge1xyXG4gICAgICBzYWZlQWRkQ2xhc3MoJGVsZW1lbnQsIGlzb2xhdGVkID8gJ25nLWlzb2xhdGUtc2NvcGUnIDogJ25nLXNjb3BlJyk7XHJcbiAgICB9IDogbm9vcDtcclxuXHJcbiAgICByZXR1cm4gY29tcGlsZTtcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGlsZSgkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcclxuICAgICAgaWYgKCEoJGNvbXBpbGVOb2RlcyBpbnN0YW5jZW9mIGpxTGl0ZSkpIHtcclxuICAgICAgICAvLyBqcXVlcnkgYWx3YXlzIHJld3JhcHMsIHdoZXJlYXMgd2UgbmVlZCB0byBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgc2VsZWN0b3Igc28gdGhhdCB3ZSBjYW5cclxuICAgICAgICAvLyBtb2RpZnkgaXQuXHJcbiAgICAgICAgJGNvbXBpbGVOb2RlcyA9IGpxTGl0ZSgkY29tcGlsZU5vZGVzKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBXZSBjYW4gbm90IGNvbXBpbGUgdG9wIGxldmVsIHRleHQgZWxlbWVudHMgc2luY2UgdGV4dCBub2RlcyBjYW4gYmUgbWVyZ2VkIGFuZCB3ZSB3aWxsXHJcbiAgICAgIC8vIG5vdCBiZSBhYmxlIHRvIGF0dGFjaCBzY29wZSBkYXRhIHRvIHRoZW0sIHNvIHdlIHdpbGwgd3JhcCB0aGVtIGluIDxzcGFuPlxyXG4gICAgICBmb3JFYWNoKCRjb21waWxlTm9kZXMsIGZ1bmN0aW9uKG5vZGUsIGluZGV4KXtcclxuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzIC8qIHRleHQgbm9kZSAqLyAmJiBub2RlLm5vZGVWYWx1ZS5tYXRjaCgvXFxTKy8pIC8qIG5vbi1lbXB0eSAqLyApIHtcclxuICAgICAgICAgICRjb21waWxlTm9kZXNbaW5kZXhdID0ganFMaXRlKG5vZGUpLndyYXAoJzxzcGFuPjwvc3Bhbj4nKS5wYXJlbnQoKVswXTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB2YXIgY29tcG9zaXRlTGlua0ZuID1cclxuICAgICAgICAgICAgICBjb21waWxlTm9kZXMoJGNvbXBpbGVOb2RlcywgdHJhbnNjbHVkZUZuLCAkY29tcGlsZU5vZGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtcclxuICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoJGNvbXBpbGVOb2Rlcyk7XHJcbiAgICAgIHZhciBuYW1lc3BhY2UgPSBudWxsO1xyXG4gICAgICB2YXIgbmFtZXNwYWNlQWRhcHRlZENvbXBpbGVOb2RlcyA9ICRjb21waWxlTm9kZXM7XHJcbiAgICAgIHZhciBsYXN0Q29tcGlsZU5vZGU7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBwdWJsaWNMaW5rRm4oc2NvcGUsIGNsb25lQ29ubmVjdEZuLCB0cmFuc2NsdWRlQ29udHJvbGxlcnMsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLCBmdXR1cmVQYXJlbnRFbGVtZW50KXtcclxuICAgICAgICBhc3NlcnRBcmcoc2NvcGUsICdzY29wZScpO1xyXG4gICAgICAgIGlmICghbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgICBuYW1lc3BhY2UgPSBkZXRlY3ROYW1lc3BhY2VGb3JDaGlsZEVsZW1lbnRzKGZ1dHVyZVBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmFtZXNwYWNlICE9PSAnaHRtbCcgJiYgJGNvbXBpbGVOb2Rlc1swXSAhPT0gbGFzdENvbXBpbGVOb2RlKSB7XHJcbiAgICAgICAgICBuYW1lc3BhY2VBZGFwdGVkQ29tcGlsZU5vZGVzID0ganFMaXRlKFxyXG4gICAgICAgICAgICB3cmFwVGVtcGxhdGUobmFtZXNwYWNlLCBqcUxpdGUoJzxkaXY+JykuYXBwZW5kKCRjb21waWxlTm9kZXMpLmh0bWwoKSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdoZW4gdXNpbmcgYSBkaXJlY3RpdmUgd2l0aCByZXBsYWNlOnRydWUgYW5kIHRlbXBsYXRlVXJsIHRoZSAkY29tcGlsZU5vZGVzXHJcbiAgICAgICAgLy8gbWlnaHQgY2hhbmdlLCBzbyB3ZSBuZWVkIHRvIHJlY3JlYXRlIHRoZSBuYW1lc3BhY2UgYWRhcHRlZCBjb21waWxlTm9kZXMuXHJcbiAgICAgICAgbGFzdENvbXBpbGVOb2RlID0gJGNvbXBpbGVOb2Rlc1swXTtcclxuXHJcbiAgICAgICAgLy8gaW1wb3J0YW50ISE6IHdlIG11c3QgY2FsbCBvdXIganFMaXRlLmNsb25lKCkgc2luY2UgdGhlIGpRdWVyeSBvbmUgaXMgdHJ5aW5nIHRvIGJlIHNtYXJ0XHJcbiAgICAgICAgLy8gYW5kIHNvbWV0aW1lcyBjaGFuZ2VzIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIERPTS5cclxuICAgICAgICB2YXIgJGxpbmtOb2RlID0gY2xvbmVDb25uZWN0Rm5cclxuICAgICAgICAgID8gSlFMaXRlUHJvdG90eXBlLmNsb25lLmNhbGwobmFtZXNwYWNlQWRhcHRlZENvbXBpbGVOb2RlcykgLy8gSU1QT1JUQU5UISEhXHJcbiAgICAgICAgICA6IG5hbWVzcGFjZUFkYXB0ZWRDb21waWxlTm9kZXM7XHJcblxyXG4gICAgICAgIGlmICh0cmFuc2NsdWRlQ29udHJvbGxlcnMpIHtcclxuICAgICAgICAgIGZvciAodmFyIGNvbnRyb2xsZXJOYW1lIGluIHRyYW5zY2x1ZGVDb250cm9sbGVycykge1xyXG4gICAgICAgICAgICAkbGlua05vZGUuZGF0YSgnJCcgKyBjb250cm9sbGVyTmFtZSArICdDb250cm9sbGVyJywgdHJhbnNjbHVkZUNvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXS5pbnN0YW5jZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVJbmZvKCRsaW5rTm9kZSwgc2NvcGUpO1xyXG5cclxuICAgICAgICBpZiAoY2xvbmVDb25uZWN0Rm4pIGNsb25lQ29ubmVjdEZuKCRsaW5rTm9kZSwgc2NvcGUpO1xyXG4gICAgICAgIGlmIChjb21wb3NpdGVMaW5rRm4pIGNvbXBvc2l0ZUxpbmtGbihzY29wZSwgJGxpbmtOb2RlLCAkbGlua05vZGUsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICByZXR1cm4gJGxpbmtOb2RlO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRldGVjdE5hbWVzcGFjZUZvckNoaWxkRWxlbWVudHMocGFyZW50RWxlbWVudCkge1xyXG4gICAgICAvLyBUT0RPOiBNYWtlIHRoaXMgZGV0ZWN0IE1hdGhNTCBhcyB3ZWxsLi4uXHJcbiAgICAgIHZhciBub2RlID0gcGFyZW50RWxlbWVudCAmJiBwYXJlbnRFbGVtZW50WzBdO1xyXG4gICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICByZXR1cm4gJ2h0bWwnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBub2RlTmFtZV8obm9kZSkgIT09ICdmb3JlaWdub2JqZWN0JyAmJiBub2RlLnRvU3RyaW5nKCkubWF0Y2goL1NWRy8pID8gJ3N2Zyc6ICdodG1sJztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcGlsZSBmdW5jdGlvbiBtYXRjaGVzIGVhY2ggbm9kZSBpbiBub2RlTGlzdCBhZ2FpbnN0IHRoZSBkaXJlY3RpdmVzLiBPbmNlIGFsbCBkaXJlY3RpdmVzXHJcbiAgICAgKiBmb3IgYSBwYXJ0aWN1bGFyIG5vZGUgYXJlIGNvbGxlY3RlZCB0aGVpciBjb21waWxlIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQuIFRoZSBjb21waWxlXHJcbiAgICAgKiBmdW5jdGlvbnMgcmV0dXJuIHZhbHVlcyAtIHRoZSBsaW5raW5nIGZ1bmN0aW9ucyAtIGFyZSBjb21iaW5lZCBpbnRvIGEgY29tcG9zaXRlIGxpbmtpbmdcclxuICAgICAqIGZ1bmN0aW9uLCB3aGljaCBpcyB0aGUgYSBsaW5raW5nIGZ1bmN0aW9uIGZvciB0aGUgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdCBhbiBhcnJheSBvZiBub2RlcyBvciBOb2RlTGlzdCB0byBjb21waWxlXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGFuZ3VsYXIuU2NvcGUsIGNsb25lQXR0YWNoRm49KX0gdHJhbnNjbHVkZUZuIEEgbGlua2luZyBmdW5jdGlvbiwgd2hlcmUgdGhlXHJcbiAgICAgKiAgICAgICAgc2NvcGUgYXJndW1lbnQgaXMgYXV0by1nZW5lcmF0ZWQgdG8gdGhlIG5ldyBjaGlsZCBvZiB0aGUgdHJhbnNjbHVkZWQgcGFyZW50IHNjb3BlLlxyXG4gICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gJHJvb3RFbGVtZW50IElmIHRoZSBub2RlTGlzdCBpcyB0aGUgcm9vdCBvZiB0aGUgY29tcGlsYXRpb24gdHJlZSB0aGVuXHJcbiAgICAgKiAgICAgICAgdGhlIHJvb3RFbGVtZW50IG11c3QgYmUgc2V0IHRoZSBqcUxpdGUgY29sbGVjdGlvbiBvZiB0aGUgY29tcGlsZSByb290LiBUaGlzIGlzXHJcbiAgICAgKiAgICAgICAgbmVlZGVkIHNvIHRoYXQgdGhlIGpxTGl0ZSBjb2xsZWN0aW9uIGl0ZW1zIGNhbiBiZSByZXBsYWNlZCB3aXRoIHdpZGdldHMuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1heFByaW9yaXR5IE1heCBkaXJlY3RpdmUgcHJpb3JpdHkuXHJcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgY29tcG9zaXRlIGxpbmtpbmcgZnVuY3Rpb24gb2YgYWxsIG9mIHRoZSBtYXRjaGVkIGRpcmVjdGl2ZXMgb3IgbnVsbC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY29tcGlsZU5vZGVzKG5vZGVMaXN0LCB0cmFuc2NsdWRlRm4sICRyb290RWxlbWVudCwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcclxuICAgICAgdmFyIGxpbmtGbnMgPSBbXSxcclxuICAgICAgICAgIGF0dHJzLCBkaXJlY3RpdmVzLCBub2RlTGlua0ZuLCBjaGlsZE5vZGVzLCBjaGlsZExpbmtGbiwgbGlua0ZuRm91bmQsIG5vZGVMaW5rRm5Gb3VuZDtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBhdHRycyA9IG5ldyBBdHRyaWJ1dGVzKCk7XHJcblxyXG4gICAgICAgIC8vIHdlIG11c3QgYWx3YXlzIHJlZmVyIHRvIG5vZGVMaXN0W2ldIHNpbmNlIHRoZSBub2RlcyBjYW4gYmUgcmVwbGFjZWQgdW5kZXJuZWF0aCB1cy5cclxuICAgICAgICBkaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMobm9kZUxpc3RbaV0sIFtdLCBhdHRycywgaSA9PT0gMCA/IG1heFByaW9yaXR5IDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlRGlyZWN0aXZlKTtcclxuXHJcbiAgICAgICAgbm9kZUxpbmtGbiA9IChkaXJlY3RpdmVzLmxlbmd0aClcclxuICAgICAgICAgICAgPyBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgbm9kZUxpc3RbaV0sIGF0dHJzLCB0cmFuc2NsdWRlRm4sICRyb290RWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLCBbXSwgW10sIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi5zY29wZSkge1xyXG4gICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoYXR0cnMuJCRlbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNoaWxkTGlua0ZuID0gKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgIShjaGlsZE5vZGVzID0gbm9kZUxpc3RbaV0uY2hpbGROb2RlcykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICFjaGlsZE5vZGVzLmxlbmd0aClcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogY29tcGlsZU5vZGVzKGNoaWxkTm9kZXMsXHJcbiAgICAgICAgICAgICAgICAgbm9kZUxpbmtGbiA/IChcclxuICAgICAgICAgICAgICAgICAgKG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQgfHwgIW5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAmJiBub2RlTGlua0ZuLnRyYW5zY2x1ZGUpIDogdHJhbnNjbHVkZUZuKTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGVMaW5rRm4gfHwgY2hpbGRMaW5rRm4pIHtcclxuICAgICAgICAgIGxpbmtGbnMucHVzaChpLCBub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XHJcbiAgICAgICAgICBsaW5rRm5Gb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICBub2RlTGlua0ZuRm91bmQgPSBub2RlTGlua0ZuRm91bmQgfHwgbm9kZUxpbmtGbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vdXNlIHRoZSBwcmV2aW91cyBjb250ZXh0IG9ubHkgZm9yIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSB2aXJ0dWFsIGdyb3VwXHJcbiAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJldHVybiBhIGxpbmtpbmcgZnVuY3Rpb24gaWYgd2UgaGF2ZSBmb3VuZCBhbnl0aGluZywgbnVsbCBvdGhlcndpc2VcclxuICAgICAgcmV0dXJuIGxpbmtGbkZvdW5kID8gY29tcG9zaXRlTGlua0ZuIDogbnVsbDtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbihzY29wZSwgbm9kZUxpc3QsICRyb290RWxlbWVudCwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pIHtcclxuICAgICAgICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGUsIGNoaWxkU2NvcGUsIGksIGlpLCBpZHgsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm47XHJcbiAgICAgICAgdmFyIHN0YWJsZU5vZGVMaXN0O1xyXG5cclxuXHJcbiAgICAgICAgaWYgKG5vZGVMaW5rRm5Gb3VuZCkge1xyXG4gICAgICAgICAgLy8gY29weSBub2RlTGlzdCBzbyB0aGF0IGlmIGEgbm9kZUxpbmtGbiByZW1vdmVzIG9yIGFkZHMgYW4gZWxlbWVudCBhdCB0aGlzIERPTSBsZXZlbCBvdXJcclxuICAgICAgICAgIC8vIG9mZnNldHMgZG9uJ3QgZ2V0IHNjcmV3ZWQgdXBcclxuICAgICAgICAgIHZhciBub2RlTGlzdExlbmd0aCA9IG5vZGVMaXN0Lmxlbmd0aDtcclxuICAgICAgICAgIHN0YWJsZU5vZGVMaXN0ID0gbmV3IEFycmF5KG5vZGVMaXN0TGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAvLyBjcmVhdGUgYSBzcGFyc2UgYXJyYXkgYnkgb25seSBjb3B5aW5nIHRoZSBlbGVtZW50cyB3aGljaCBoYXZlIGEgbGlua0ZuXHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlua0Zucy5sZW5ndGg7IGkrPTMpIHtcclxuICAgICAgICAgICAgaWR4ID0gbGlua0Zuc1tpXTtcclxuICAgICAgICAgICAgc3RhYmxlTm9kZUxpc3RbaWR4XSA9IG5vZGVMaXN0W2lkeF07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN0YWJsZU5vZGVMaXN0ID0gbm9kZUxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IoaSA9IDAsIGlpID0gbGlua0Zucy5sZW5ndGg7IGkgPCBpaTspIHtcclxuICAgICAgICAgIG5vZGUgPSBzdGFibGVOb2RlTGlzdFtsaW5rRm5zW2krK11dO1xyXG4gICAgICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcclxuICAgICAgICAgIGNoaWxkTGlua0ZuID0gbGlua0Zuc1tpKytdO1xyXG5cclxuICAgICAgICAgIGlmIChub2RlTGlua0ZuKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlTGlua0ZuLnNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IHNjb3BlLiRuZXcoKTtcclxuICAgICAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVJbmZvKGpxTGl0ZShub2RlKSwgY2hpbGRTY29wZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQgKSB7XHJcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKFxyXG4gICAgICAgICAgICAgICAgICBzY29wZSwgbm9kZUxpbmtGbi50cmFuc2NsdWRlLCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbixcclxuICAgICAgICAgICAgICAgICAgbm9kZUxpbmtGbi5lbGVtZW50VHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmICghbm9kZUxpbmtGbi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQgJiYgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pIHtcclxuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gcGFyZW50Qm91bmRUcmFuc2NsdWRlRm47XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiAmJiB0cmFuc2NsdWRlRm4pIHtcclxuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIHRyYW5zY2x1ZGVGbik7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBub2RlTGlua0ZuKGNoaWxkTGlua0ZuLCBjaGlsZFNjb3BlLCBub2RlLCAkcm9vdEVsZW1lbnQsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xyXG5cclxuICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGRMaW5rRm4pIHtcclxuICAgICAgICAgICAgY2hpbGRMaW5rRm4oc2NvcGUsIG5vZGUuY2hpbGROb2RlcywgdW5kZWZpbmVkLCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIHRyYW5zY2x1ZGVGbiwgcHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbiwgZWxlbWVudFRyYW5zY2x1c2lvbikge1xyXG5cclxuICAgICAgdmFyIGJvdW5kVHJhbnNjbHVkZUZuID0gZnVuY3Rpb24odHJhbnNjbHVkZWRTY29wZSwgY2xvbmVGbiwgY29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgc2NvcGVDcmVhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICghdHJhbnNjbHVkZWRTY29wZSkge1xyXG4gICAgICAgICAgdHJhbnNjbHVkZWRTY29wZSA9IHNjb3BlLiRuZXcoKTtcclxuICAgICAgICAgIHRyYW5zY2x1ZGVkU2NvcGUuJCR0cmFuc2NsdWRlZCA9IHRydWU7XHJcbiAgICAgICAgICBzY29wZUNyZWF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNsb25lID0gdHJhbnNjbHVkZUZuKHRyYW5zY2x1ZGVkU2NvcGUsIGNsb25lRm4sIGNvbnRyb2xsZXJzLCBwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuLCBmdXR1cmVQYXJlbnRFbGVtZW50KTtcclxuICAgICAgICBpZiAoc2NvcGVDcmVhdGVkICYmICFlbGVtZW50VHJhbnNjbHVzaW9uKSB7XHJcbiAgICAgICAgICBjbG9uZS5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsgdHJhbnNjbHVkZWRTY29wZS4kZGVzdHJveSgpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9va3MgZm9yIGRpcmVjdGl2ZXMgb24gdGhlIGdpdmVuIG5vZGUgYW5kIGFkZHMgdGhlbSB0byB0aGUgZGlyZWN0aXZlIGNvbGxlY3Rpb24gd2hpY2ggaXNcclxuICAgICAqIHNvcnRlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbm9kZSBOb2RlIHRvIHNlYXJjaC5cclxuICAgICAqIEBwYXJhbSBkaXJlY3RpdmVzIEFuIGFycmF5IHRvIHdoaWNoIHRoZSBkaXJlY3RpdmVzIGFyZSBhZGRlZCB0by4gVGhpcyBhcnJheSBpcyBzb3J0ZWQgYmVmb3JlXHJcbiAgICAgKiAgICAgICAgdGhlIGZ1bmN0aW9uIHJldHVybnMuXHJcbiAgICAgKiBAcGFyYW0gYXR0cnMgVGhlIHNoYXJlZCBhdHRycyBvYmplY3Qgd2hpY2ggaXMgdXNlZCB0byBwb3B1bGF0ZSB0aGUgbm9ybWFsaXplZCBhdHRyaWJ1dGVzLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBtYXhQcmlvcml0eSBNYXggZGlyZWN0aXZlIHByaW9yaXR5LlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjb2xsZWN0RGlyZWN0aXZlcyhub2RlLCBkaXJlY3RpdmVzLCBhdHRycywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSkge1xyXG4gICAgICB2YXIgbm9kZVR5cGUgPSBub2RlLm5vZGVUeXBlLFxyXG4gICAgICAgICAgYXR0cnNNYXAgPSBhdHRycy4kYXR0cixcclxuICAgICAgICAgIG1hdGNoLFxyXG4gICAgICAgICAgY2xhc3NOYW1lO1xyXG5cclxuICAgICAgc3dpdGNoKG5vZGVUeXBlKSB7XHJcbiAgICAgICAgY2FzZSAxOiAvKiBFbGVtZW50ICovXHJcbiAgICAgICAgICAvLyB1c2UgdGhlIG5vZGUgbmFtZTogPGRpcmVjdGl2ZT5cclxuICAgICAgICAgIGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLFxyXG4gICAgICAgICAgICAgIGRpcmVjdGl2ZU5vcm1hbGl6ZShub2RlTmFtZV8obm9kZSkpLCAnRScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpO1xyXG5cclxuICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgYXR0cmlidXRlc1xyXG4gICAgICAgICAgZm9yICh2YXIgYXR0ciwgbmFtZSwgbk5hbWUsIG5nQXR0ck5hbWUsIHZhbHVlLCBpc05nQXR0ciwgbkF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgICAgICAgICAgaiA9IDAsIGpqID0gbkF0dHJzICYmIG5BdHRycy5sZW5ndGg7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyU3RhcnROYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBhdHRyRW5kTmFtZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgYXR0ciA9IG5BdHRyc1tqXTtcclxuICAgICAgICAgICAgaWYgKCFtc2llIHx8IG1zaWUgPj0gOCB8fCBhdHRyLnNwZWNpZmllZCkge1xyXG4gICAgICAgICAgICAgIG5hbWUgPSBhdHRyLm5hbWU7XHJcbiAgICAgICAgICAgICAgdmFsdWUgPSB0cmltKGF0dHIudmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBzdXBwb3J0IG5nQXR0ciBhdHRyaWJ1dGUgYmluZGluZ1xyXG4gICAgICAgICAgICAgIG5nQXR0ck5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobmFtZSk7XHJcbiAgICAgICAgICAgICAgaWYgKGlzTmdBdHRyID0gTkdfQVRUUl9CSU5ESU5HLnRlc3QobmdBdHRyTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBzbmFrZV9jYXNlKG5nQXR0ck5hbWUuc3Vic3RyKDYpLCAnLScpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZU5OYW1lID0gbmdBdHRyTmFtZS5yZXBsYWNlKC8oU3RhcnR8RW5kKSQvLCAnJyk7XHJcbiAgICAgICAgICAgICAgaWYgKGRpcmVjdGl2ZUlzTXVsdGlFbGVtZW50KGRpcmVjdGl2ZU5OYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5nQXR0ck5hbWUgPT09IGRpcmVjdGl2ZU5OYW1lICsgJ1N0YXJ0Jykge1xyXG4gICAgICAgICAgICAgICAgICBhdHRyU3RhcnROYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgICAgICAgYXR0ckVuZE5hbWUgPSBuYW1lLnN1YnN0cigwLCBuYW1lLmxlbmd0aCAtIDUpICsgJ2VuZCc7XHJcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigwLCBuYW1lLmxlbmd0aCAtIDYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgbk5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobmFtZS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgICBhdHRyc01hcFtuTmFtZV0gPSBuYW1lO1xyXG4gICAgICAgICAgICAgIGlmIChpc05nQXR0ciB8fCAhYXR0cnMuaGFzT3duUHJvcGVydHkobk5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZ2V0Qm9vbGVhbkF0dHJOYW1lKG5vZGUsIG5OYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHRydWU7IC8vIHByZXNlbmNlIG1lYW5zIHRydWVcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUobm9kZSwgZGlyZWN0aXZlcywgdmFsdWUsIG5OYW1lLCBpc05nQXR0cik7XHJcbiAgICAgICAgICAgICAgYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnQScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIGF0dHJTdGFydE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyRW5kTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyB1c2UgY2xhc3MgYXMgZGlyZWN0aXZlXHJcbiAgICAgICAgICBjbGFzc05hbWUgPSBub2RlLmNsYXNzTmFtZTtcclxuICAgICAgICAgIGlmIChpc1N0cmluZyhjbGFzc05hbWUpICYmIGNsYXNzTmFtZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgd2hpbGUgKG1hdGNoID0gQ0xBU1NfRElSRUNUSVZFX1JFR0VYUC5leGVjKGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgICBuTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShtYXRjaFsyXSk7XHJcbiAgICAgICAgICAgICAgaWYgKGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLCBuTmFtZSwgJ0MnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSkge1xyXG4gICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdHJpbShtYXRjaFszXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zdWJzdHIobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6IC8qIFRleHQgTm9kZSAqL1xyXG4gICAgICAgICAgYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5vZGUubm9kZVZhbHVlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgODogLyogQ29tbWVudCAqL1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbWF0Y2ggPSBDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAuZXhlYyhub2RlLm5vZGVWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICAgIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG1hdGNoWzFdKTtcclxuICAgICAgICAgICAgICBpZiAoYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnTScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB0cmltKG1hdGNoWzJdKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gdHVybnMgb3V0IHRoYXQgdW5kZXIgc29tZSBjaXJjdW1zdGFuY2VzIElFOSB0aHJvd3MgZXJyb3JzIHdoZW4gb25lIGF0dGVtcHRzIHRvIHJlYWRcclxuICAgICAgICAgICAgLy8gY29tbWVudCdzIG5vZGUgdmFsdWUuXHJcbiAgICAgICAgICAgIC8vIEp1c3QgaWdub3JlIGl0IGFuZCBjb250aW51ZS4gKENhbid0IHNlZW0gdG8gcmVwcm9kdWNlIGluIHRlc3QgY2FzZS4pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgZGlyZWN0aXZlcy5zb3J0KGJ5UHJpb3JpdHkpO1xyXG4gICAgICByZXR1cm4gZGlyZWN0aXZlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgbm9kZSB3aXRoIGFuIGRpcmVjdGl2ZS1zdGFydCBpdCBjb2xsZWN0cyBhbGwgb2YgdGhlIHNpYmxpbmdzIHVudGlsIGl0IGZpbmRzXHJcbiAgICAgKiBkaXJlY3RpdmUtZW5kLlxyXG4gICAgICogQHBhcmFtIG5vZGVcclxuICAgICAqIEBwYXJhbSBhdHRyU3RhcnRcclxuICAgICAqIEBwYXJhbSBhdHRyRW5kXHJcbiAgICAgKiBAcmV0dXJucyB7Kn1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ3JvdXBTY2FuKG5vZGUsIGF0dHJTdGFydCwgYXR0ckVuZCkge1xyXG4gICAgICB2YXIgbm9kZXMgPSBbXTtcclxuICAgICAgdmFyIGRlcHRoID0gMDtcclxuICAgICAgaWYgKGF0dHJTdGFydCAmJiBub2RlLmhhc0F0dHJpYnV0ZSAmJiBub2RlLmhhc0F0dHJpYnV0ZShhdHRyU3RhcnQpKSB7XHJcbiAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IG5vZGU7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCd1dGVyZGlyJyxcclxuICAgICAgICAgICAgICAgICAgICAgIFwiVW50ZXJtaW5hdGVkIGF0dHJpYnV0ZSwgZm91bmQgJ3swfScgYnV0IG5vIG1hdGNoaW5nICd7MX0nIGZvdW5kLlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgYXR0clN0YXJ0LCBhdHRyRW5kKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgLyoqIEVsZW1lbnQgKiovKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZShhdHRyU3RhcnQpKSBkZXB0aCsrO1xyXG4gICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoYXR0ckVuZCkpIGRlcHRoLS07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgfSB3aGlsZSAoZGVwdGggPiAwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4ganFMaXRlKG5vZGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyYXBwZXIgZm9yIGxpbmtpbmcgZnVuY3Rpb24gd2hpY2ggY29udmVydHMgbm9ybWFsIGxpbmtpbmcgZnVuY3Rpb24gaW50byBhIGdyb3VwZWRcclxuICAgICAqIGxpbmtpbmcgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gbGlua0ZuXHJcbiAgICAgKiBAcGFyYW0gYXR0clN0YXJ0XHJcbiAgICAgKiBAcGFyYW0gYXR0ckVuZFxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihsaW5rRm4sIGF0dHJTdGFydCwgYXR0ckVuZCkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKSB7XHJcbiAgICAgICAgZWxlbWVudCA9IGdyb3VwU2NhbihlbGVtZW50WzBdLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xyXG4gICAgICAgIHJldHVybiBsaW5rRm4oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uY2UgdGhlIGRpcmVjdGl2ZXMgaGF2ZSBiZWVuIGNvbGxlY3RlZCwgdGhlaXIgY29tcGlsZSBmdW5jdGlvbnMgYXJlIGV4ZWN1dGVkLiBUaGlzIG1ldGhvZFxyXG4gICAgICogaXMgcmVzcG9uc2libGUgZm9yIGlubGluaW5nIGRpcmVjdGl2ZSB0ZW1wbGF0ZXMgYXMgd2VsbCBhcyB0ZXJtaW5hdGluZyB0aGUgYXBwbGljYXRpb25cclxuICAgICAqIG9mIHRoZSBkaXJlY3RpdmVzIGlmIHRoZSB0ZXJtaW5hbCBkaXJlY3RpdmUgaGFzIGJlZW4gcmVhY2hlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzIEFycmF5IG9mIGNvbGxlY3RlZCBkaXJlY3RpdmVzIHRvIGV4ZWN1dGUgdGhlaXIgY29tcGlsZSBmdW5jdGlvbi5cclxuICAgICAqICAgICAgICB0aGlzIG5lZWRzIHRvIGJlIHByZS1zb3J0ZWQgYnkgcHJpb3JpdHkgb3JkZXIuXHJcbiAgICAgKiBAcGFyYW0ge05vZGV9IGNvbXBpbGVOb2RlIFRoZSByYXcgRE9NIG5vZGUgdG8gYXBwbHkgdGhlIGNvbXBpbGUgZnVuY3Rpb25zIHRvXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVtcGxhdGVBdHRycyBUaGUgc2hhcmVkIGF0dHJpYnV0ZSBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGVGbiBBIGxpbmtpbmcgZnVuY3Rpb24sIHdoZXJlIHRoZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlIGFyZ3VtZW50IGlzIGF1dG8tZ2VuZXJhdGVkIHRvIHRoZSBuZXdcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCBvZiB0aGUgdHJhbnNjbHVkZWQgcGFyZW50IHNjb3BlLlxyXG4gICAgICogQHBhcmFtIHtKUUxpdGV9IGpxQ29sbGVjdGlvbiBJZiB3ZSBhcmUgd29ya2luZyBvbiB0aGUgcm9vdCBvZiB0aGUgY29tcGlsZSB0cmVlIHRoZW4gdGhpc1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudCBoYXMgdGhlIHJvb3QganFMaXRlIGFycmF5IHNvIHRoYXQgd2UgY2FuIHJlcGxhY2Ugbm9kZXNcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gaXQuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSBBbiBvcHRpb25hbCBkaXJlY3RpdmUgdGhhdCB3aWxsIGJlIGlnbm9yZWQgd2hlblxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsaW5nIHRoZSB0cmFuc2NsdXNpb24uXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxGdW5jdGlvbj59IHByZUxpbmtGbnNcclxuICAgICAqIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcG9zdExpbmtGbnNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcmV2aW91c0NvbXBpbGVDb250ZXh0IENvbnRleHQgdXNlZCBmb3IgcHJldmlvdXMgY29tcGlsYXRpb24gb2YgdGhlIGN1cnJlbnRcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVcclxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gbGlua0ZuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLCBjb21waWxlTm9kZSwgdGVtcGxhdGVBdHRycywgdHJhbnNjbHVkZUZuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpxQ29sbGVjdGlvbiwgb3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XHJcbiAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0IHx8IHt9O1xyXG5cclxuICAgICAgdmFyIHRlcm1pbmFsUHJpb3JpdHkgPSAtTnVtYmVyLk1BWF9WQUxVRSxcclxuICAgICAgICAgIG5ld1Njb3BlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXMgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0LmNvbnRyb2xsZXJEaXJlY3RpdmVzLFxyXG4gICAgICAgICAgY29udHJvbGxlcnMsXHJcbiAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxcclxuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC50ZW1wbGF0ZURpcmVjdGl2ZSxcclxuICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlID0gZmFsc2UsXHJcbiAgICAgICAgICBoYXNUZW1wbGF0ZSA9IGZhbHNlLFxyXG4gICAgICAgICAgaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgJGNvbXBpbGVOb2RlID0gdGVtcGxhdGVBdHRycy4kJGVsZW1lbnQgPSBqcUxpdGUoY29tcGlsZU5vZGUpLFxyXG4gICAgICAgICAgZGlyZWN0aXZlLFxyXG4gICAgICAgICAgZGlyZWN0aXZlTmFtZSxcclxuICAgICAgICAgICR0ZW1wbGF0ZSxcclxuICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgPSBvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUsXHJcbiAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiA9IHRyYW5zY2x1ZGVGbixcclxuICAgICAgICAgIGxpbmtGbixcclxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlO1xyXG5cclxuICAgICAgLy8gZXhlY3V0ZXMgYWxsIGRpcmVjdGl2ZXMgb24gdGhlIGN1cnJlbnQgZWxlbWVudFxyXG4gICAgICBmb3IodmFyIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XHJcbiAgICAgICAgdmFyIGF0dHJTdGFydCA9IGRpcmVjdGl2ZS4kJHN0YXJ0O1xyXG4gICAgICAgIHZhciBhdHRyRW5kID0gZGlyZWN0aXZlLiQkZW5kO1xyXG5cclxuICAgICAgICAvLyBjb2xsZWN0IG11bHRpYmxvY2sgc2VjdGlvbnNcclxuICAgICAgICBpZiAoYXR0clN0YXJ0KSB7XHJcbiAgICAgICAgICAkY29tcGlsZU5vZGUgPSBncm91cFNjYW4oY29tcGlsZU5vZGUsIGF0dHJTdGFydCwgYXR0ckVuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICR0ZW1wbGF0ZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHRlcm1pbmFsUHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpIHtcclxuICAgICAgICAgIGJyZWFrOyAvLyBwcmV2ZW50IGZ1cnRoZXIgcHJvY2Vzc2luZyBvZiBkaXJlY3RpdmVzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUuc2NvcGUpIHtcclxuXHJcbiAgICAgICAgICAvLyBza2lwIHRoZSBjaGVjayBmb3IgZGlyZWN0aXZlcyB3aXRoIGFzeW5jIHRlbXBsYXRlcywgd2UnbGwgY2hlY2sgdGhlIGRlcml2ZWQgc3luY1xyXG4gICAgICAgICAgLy8gZGlyZWN0aXZlIHdoZW4gdGhlIHRlbXBsYXRlIGFycml2ZXNcclxuICAgICAgICAgIGlmICghZGlyZWN0aXZlLnRlbXBsYXRlVXJsKSB7XHJcbiAgICAgICAgICAgIGlmIChpc09iamVjdChkaXJlY3RpdmVWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyB0cnlpbmcgdG8gYWRkIGFuIGlzb2xhdGVkIHNjb3BlLlxyXG4gICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGhlcmUgaXMgbm8gc2NvcGUgb2YgYW55IGtpbmQgYWxyZWFkeVxyXG4gICAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCduZXcvaXNvbGF0ZWQgc2NvcGUnLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHwgbmV3U2NvcGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyB0cnlpbmcgdG8gYWRkIGEgY2hpbGQgc2NvcGUuXHJcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBubyBpc29sYXRlZCBzY29wZSBhbHJlYWR5XHJcbiAgICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSwgZGlyZWN0aXZlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBuZXdTY29wZURpcmVjdGl2ZSA9IG5ld1Njb3BlRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmUubmFtZTtcclxuXHJcbiAgICAgICAgaWYgKCFkaXJlY3RpdmUudGVtcGxhdGVVcmwgJiYgZGlyZWN0aXZlLmNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gZGlyZWN0aXZlLmNvbnRyb2xsZXI7XHJcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlcyA9IGNvbnRyb2xsZXJEaXJlY3RpdmVzIHx8IHt9O1xyXG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoXCInXCIgKyBkaXJlY3RpdmVOYW1lICsgXCInIGNvbnRyb2xsZXJcIixcclxuICAgICAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXNbZGlyZWN0aXZlTmFtZV0gPSBkaXJlY3RpdmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUudHJhbnNjbHVkZSkge1xyXG4gICAgICAgICAgaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIG5nSWYgYW5kIG5nUmVwZWF0IHNvIHRoYXQgd2UgZG9uJ3QgY29tcGxhaW4gYWJvdXQgZHVwbGljYXRlIHRyYW5zY2x1c2lvbi5cclxuICAgICAgICAgIC8vIFRoaXMgb3B0aW9uIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgZGlyZWN0aXZlcyB0aGF0IGtub3cgaG93IHRvIHNhZmVseSBoYW5kbGUgZWxlbWVudCB0cmFuc2NsdXNpb24sXHJcbiAgICAgICAgICAvLyB3aGVyZSB0aGUgdHJhbnNjbHVkZWQgbm9kZXMgYXJlIGFkZGVkIG9yIHJlcGxhY2VkIGFmdGVyIGxpbmtpbmcuXHJcbiAgICAgICAgICBpZiAoIWRpcmVjdGl2ZS4kJHRsYikge1xyXG4gICAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgndHJhbnNjbHVzaW9uJywgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChkaXJlY3RpdmVWYWx1ZSA9PSAnZWxlbWVudCcpIHtcclxuICAgICAgICAgICAgaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0ZXJtaW5hbFByaW9yaXR5ID0gZGlyZWN0aXZlLnByaW9yaXR5O1xyXG4gICAgICAgICAgICAkdGVtcGxhdGUgPSAkY29tcGlsZU5vZGU7XHJcbiAgICAgICAgICAgICRjb21waWxlTm9kZSA9IHRlbXBsYXRlQXR0cnMuJCRlbGVtZW50ID1cclxuICAgICAgICAgICAgICAgIGpxTGl0ZShkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgJyArIGRpcmVjdGl2ZU5hbWUgKyAnOiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlQXR0cnNbZGlyZWN0aXZlTmFtZV0gKyAnICcpKTtcclxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkY29tcGlsZU5vZGVbMF07XHJcbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbiwgc2xpY2VBcmdzKCR0ZW1wbGF0ZSksIGNvbXBpbGVOb2RlKTtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gY29tcGlsZSgkdGVtcGxhdGUsIHRyYW5zY2x1ZGVGbiwgdGVybWluYWxQcmlvcml0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgJiYgcmVwbGFjZURpcmVjdGl2ZS5uYW1lLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHBhc3MgaW46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gY29udHJvbGxlckRpcmVjdGl2ZXMgLSBvdGhlcndpc2Ugd2UnbGwgY3JlYXRlIGR1cGxpY2F0ZXMgY29udHJvbGxlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgb3IgdGVtcGxhdGVEaXJlY3RpdmUgLSBjb21iaW5pbmcgdGVtcGxhdGVzIHdpdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlbGVtZW50IHRyYW5zY2x1c2lvbiBkb2Vzbid0IG1ha2Ugc2Vuc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgb25seSBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlIHNvIHRoYXQgd2UgcHJldmVudCBwdXR0aW5nIHRyYW5zY2x1c2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0aGUgc2FtZSBlbGVtZW50IG1vcmUgdGhhbiBvbmNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOiBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZSA9IGpxTGl0ZShqcUxpdGVDbG9uZShjb21waWxlTm9kZSkpLmNvbnRlbnRzKCk7XHJcbiAgICAgICAgICAgICRjb21waWxlTm9kZS5lbXB0eSgpOyAvLyBjbGVhciBjb250ZW50c1xyXG4gICAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiA9IGNvbXBpbGUoJHRlbXBsYXRlLCB0cmFuc2NsdWRlRm4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgaGFzVGVtcGxhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ3RlbXBsYXRlJywgdGVtcGxhdGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcclxuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xyXG5cclxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gKGlzRnVuY3Rpb24oZGlyZWN0aXZlLnRlbXBsYXRlKSlcclxuICAgICAgICAgICAgICA/IGRpcmVjdGl2ZS50ZW1wbGF0ZSgkY29tcGlsZU5vZGUsIHRlbXBsYXRlQXR0cnMpXHJcbiAgICAgICAgICAgICAgOiBkaXJlY3RpdmUudGVtcGxhdGU7XHJcblxyXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGRpcmVjdGl2ZVZhbHVlKTtcclxuXHJcbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLnJlcGxhY2UpIHtcclxuICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcclxuICAgICAgICAgICAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoZGlyZWN0aXZlVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gW107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0ganFMaXRlKHdyYXBUZW1wbGF0ZShkaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2UsIHRyaW0oZGlyZWN0aXZlVmFsdWUpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkdGVtcGxhdGVbMF07XHJcblxyXG4gICAgICAgICAgICBpZiAoJHRlbXBsYXRlLmxlbmd0aCAhPSAxIHx8IGNvbXBpbGVOb2RlLm5vZGVUeXBlICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JyxcclxuICAgICAgICAgICAgICAgICAgXCJUZW1wbGF0ZSBmb3IgZGlyZWN0aXZlICd7MH0nIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfVwiLFxyXG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbiwgJGNvbXBpbGVOb2RlLCBjb21waWxlTm9kZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV3VGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xyXG5cclxuICAgICAgICAgICAgLy8gY29tYmluZSBkaXJlY3RpdmVzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUgYW5kIGZyb20gdGhlIHRlbXBsYXRlOlxyXG4gICAgICAgICAgICAvLyAtIHRha2UgdGhlIGFycmF5IG9mIGRpcmVjdGl2ZXMgZm9yIHRoaXMgZWxlbWVudFxyXG4gICAgICAgICAgICAvLyAtIHNwbGl0IGl0IGludG8gdHdvIHBhcnRzLCB0aG9zZSB0aGF0IGFscmVhZHkgYXBwbGllZCAocHJvY2Vzc2VkKSBhbmQgdGhvc2UgdGhhdCB3ZXJlbid0ICh1bnByb2Nlc3NlZClcclxuICAgICAgICAgICAgLy8gLSBjb2xsZWN0IGRpcmVjdGl2ZXMgZnJvbSB0aGUgdGVtcGxhdGUgYW5kIHNvcnQgdGhlbSBieSBwcmlvcml0eVxyXG4gICAgICAgICAgICAvLyAtIGNvbWJpbmUgZGlyZWN0aXZlcyBhczogcHJvY2Vzc2VkICsgdGVtcGxhdGUgKyB1bnByb2Nlc3NlZFxyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVEaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsIFtdLCBuZXdUZW1wbGF0ZUF0dHJzKTtcclxuICAgICAgICAgICAgdmFyIHVucHJvY2Vzc2VkRGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXMuc3BsaWNlKGkgKyAxLCBkaXJlY3RpdmVzLmxlbmd0aCAtIChpICsgMSkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgICAgIG1hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXMuY29uY2F0KHRlbXBsYXRlRGlyZWN0aXZlcykuY29uY2F0KHVucHJvY2Vzc2VkRGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRlbXBsYXRlQXR0cnMsIG5ld1RlbXBsYXRlQXR0cnMpO1xyXG5cclxuICAgICAgICAgICAgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRjb21waWxlTm9kZS5odG1sKGRpcmVjdGl2ZVZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkaXJlY3RpdmUudGVtcGxhdGVVcmwpIHtcclxuICAgICAgICAgIGhhc1RlbXBsYXRlID0gdHJ1ZTtcclxuICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsIHRlbXBsYXRlRGlyZWN0aXZlLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcclxuXHJcbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLnJlcGxhY2UpIHtcclxuICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBub2RlTGlua0ZuID0gY29tcGlsZVRlbXBsYXRlVXJsKGRpcmVjdGl2ZXMuc3BsaWNlKGksIGRpcmVjdGl2ZXMubGVuZ3RoIC0gaSksICRjb21waWxlTm9kZSxcclxuICAgICAgICAgICAgICB0ZW1wbGF0ZUF0dHJzLCBqcUNvbGxlY3Rpb24sIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgJiYgY2hpbGRUcmFuc2NsdWRlRm4sIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLCB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlczogY29udHJvbGxlckRpcmVjdGl2ZXMsXHJcbiAgICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlOiB0ZW1wbGF0ZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6IG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmVcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3RpdmUuY29tcGlsZSkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGlua0ZuID0gZGlyZWN0aXZlLmNvbXBpbGUoJGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzLCBjaGlsZFRyYW5zY2x1ZGVGbik7XHJcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpbmtGbikpIHtcclxuICAgICAgICAgICAgICBhZGRMaW5rRm5zKG51bGwsIGxpbmtGbiwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rRm4pIHtcclxuICAgICAgICAgICAgICBhZGRMaW5rRm5zKGxpbmtGbi5wcmUsIGxpbmtGbi5wb3N0LCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUsIHN0YXJ0aW5nVGFnKCRjb21waWxlTm9kZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZXJtaW5hbCkge1xyXG4gICAgICAgICAgbm9kZUxpbmtGbi50ZXJtaW5hbCA9IHRydWU7XHJcbiAgICAgICAgICB0ZXJtaW5hbFByaW9yaXR5ID0gTWF0aC5tYXgodGVybWluYWxQcmlvcml0eSwgZGlyZWN0aXZlLnByaW9yaXR5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBub2RlTGlua0ZuLnNjb3BlID0gbmV3U2NvcGVEaXJlY3RpdmUgJiYgbmV3U2NvcGVEaXJlY3RpdmUuc2NvcGUgPT09IHRydWU7XHJcbiAgICAgIG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQgPSBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlO1xyXG4gICAgICBub2RlTGlua0ZuLmVsZW1lbnRUcmFuc2NsdWRlT25UaGlzRWxlbWVudCA9IGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlO1xyXG4gICAgICBub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCA9IGhhc1RlbXBsYXRlO1xyXG4gICAgICBub2RlTGlua0ZuLnRyYW5zY2x1ZGUgPSBjaGlsZFRyYW5zY2x1ZGVGbjtcclxuXHJcbiAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZTtcclxuXHJcbiAgICAgIC8vIG1pZ2h0IGJlIG5vcm1hbCBvciBkZWxheWVkIG5vZGVMaW5rRm4gZGVwZW5kaW5nIG9uIGlmIHRlbXBsYXRlVXJsIGlzIHByZXNlbnRcclxuICAgICAgcmV0dXJuIG5vZGVMaW5rRm47XHJcblxyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgZnVuY3Rpb24gYWRkTGlua0ZucyhwcmUsIHBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCkge1xyXG4gICAgICAgIGlmIChwcmUpIHtcclxuICAgICAgICAgIGlmIChhdHRyU3RhcnQpIHByZSA9IGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKHByZSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcclxuICAgICAgICAgIHByZS5yZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmU7XHJcbiAgICAgICAgICBwcmUuZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5hbWU7XHJcbiAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID09PSBkaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlKSB7XHJcbiAgICAgICAgICAgIHByZSA9IGNsb25lQW5kQW5ub3RhdGVGbihwcmUsIHtpc29sYXRlU2NvcGU6IHRydWV9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHByZUxpbmtGbnMucHVzaChwcmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocG9zdCkge1xyXG4gICAgICAgICAgaWYgKGF0dHJTdGFydCkgcG9zdCA9IGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKHBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCk7XHJcbiAgICAgICAgICBwb3N0LnJlcXVpcmUgPSBkaXJlY3RpdmUucmVxdWlyZTtcclxuICAgICAgICAgIHBvc3QuZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5hbWU7XHJcbiAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID09PSBkaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlKSB7XHJcbiAgICAgICAgICAgIHBvc3QgPSBjbG9uZUFuZEFubm90YXRlRm4ocG9zdCwge2lzb2xhdGVTY29wZTogdHJ1ZX0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcG9zdExpbmtGbnMucHVzaChwb3N0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRDb250cm9sbGVycyhkaXJlY3RpdmVOYW1lLCByZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlLCByZXRyaWV2YWxNZXRob2QgPSAnZGF0YScsIG9wdGlvbmFsID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHJlcXVpcmUpKSB7XHJcbiAgICAgICAgICB3aGlsZSgodmFsdWUgPSByZXF1aXJlLmNoYXJBdCgwKSkgPT0gJ14nIHx8IHZhbHVlID09ICc/Jykge1xyXG4gICAgICAgICAgICByZXF1aXJlID0gcmVxdWlyZS5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAnXicpIHtcclxuICAgICAgICAgICAgICByZXRyaWV2YWxNZXRob2QgPSAnaW5oZXJpdGVkRGF0YSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3B0aW9uYWwgPSBvcHRpb25hbCB8fCB2YWx1ZSA9PSAnPyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YWx1ZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgaWYgKGVsZW1lbnRDb250cm9sbGVycyAmJiByZXRyaWV2YWxNZXRob2QgPT09ICdkYXRhJykge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPSBlbGVtZW50Q29udHJvbGxlcnNbcmVxdWlyZV0pIHtcclxuICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmluc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlIHx8ICRlbGVtZW50W3JldHJpZXZhbE1ldGhvZF0oJyQnICsgcmVxdWlyZSArICdDb250cm9sbGVyJyk7XHJcblxyXG4gICAgICAgICAgaWYgKCF2YWx1ZSAmJiAhb3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2N0cmVxJyxcclxuICAgICAgICAgICAgICAgIFwiQ29udHJvbGxlciAnezB9JywgcmVxdWlyZWQgYnkgZGlyZWN0aXZlICd7MX0nLCBjYW4ndCBiZSBmb3VuZCFcIixcclxuICAgICAgICAgICAgICAgIHJlcXVpcmUsIGRpcmVjdGl2ZU5hbWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShyZXF1aXJlKSkge1xyXG4gICAgICAgICAgdmFsdWUgPSBbXTtcclxuICAgICAgICAgIGZvckVhY2gocmVxdWlyZSwgZnVuY3Rpb24ocmVxdWlyZSkge1xyXG4gICAgICAgICAgICB2YWx1ZS5wdXNoKGdldENvbnRyb2xsZXJzKGRpcmVjdGl2ZU5hbWUsIHJlcXVpcmUsICRlbGVtZW50LCBlbGVtZW50Q29udHJvbGxlcnMpKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICBmdW5jdGlvbiBub2RlTGlua0ZuKGNoaWxkTGlua0ZuLCBzY29wZSwgbGlua05vZGUsICRyb290RWxlbWVudCwgYm91bmRUcmFuc2NsdWRlRm4pIHtcclxuICAgICAgICB2YXIgaSwgaWksIGxpbmtGbiwgY29udHJvbGxlciwgaXNvbGF0ZVNjb3BlLCBlbGVtZW50Q29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbiwgJGVsZW1lbnQsXHJcbiAgICAgICAgICAgIGF0dHJzO1xyXG5cclxuICAgICAgICBpZiAoY29tcGlsZU5vZGUgPT09IGxpbmtOb2RlKSB7XHJcbiAgICAgICAgICBhdHRycyA9IHRlbXBsYXRlQXR0cnM7XHJcbiAgICAgICAgICAkZWxlbWVudCA9IHRlbXBsYXRlQXR0cnMuJCRlbGVtZW50O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkZWxlbWVudCA9IGpxTGl0ZShsaW5rTm9kZSk7XHJcbiAgICAgICAgICBhdHRycyA9IG5ldyBBdHRyaWJ1dGVzKCRlbGVtZW50LCB0ZW1wbGF0ZUF0dHJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpIHtcclxuICAgICAgICAgIGlzb2xhdGVTY29wZSA9IHNjb3BlLiRuZXcodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cmFuc2NsdWRlRm4gPSBib3VuZFRyYW5zY2x1ZGVGbiAmJiBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZTtcclxuICAgICAgICBpZiAoY29udHJvbGxlckRpcmVjdGl2ZXMpIHtcclxuICAgICAgICAgIC8vIFRPRE86IG1lcmdlIGBjb250cm9sbGVyc2AgYW5kIGBlbGVtZW50Q29udHJvbGxlcnNgIGludG8gc2luZ2xlIG9iamVjdC5cclxuICAgICAgICAgIGNvbnRyb2xsZXJzID0ge307XHJcbiAgICAgICAgICBlbGVtZW50Q29udHJvbGxlcnMgPSB7fTtcclxuICAgICAgICAgIGZvckVhY2goY29udHJvbGxlckRpcmVjdGl2ZXMsIGZ1bmN0aW9uKGRpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgICB2YXIgbG9jYWxzID0ge1xyXG4gICAgICAgICAgICAgICRzY29wZTogZGlyZWN0aXZlID09PSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXHJcbiAgICAgICAgICAgICAgJGVsZW1lbnQ6ICRlbGVtZW50LFxyXG4gICAgICAgICAgICAgICRhdHRyczogYXR0cnMsXHJcbiAgICAgICAgICAgICAgJHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGVGblxyXG4gICAgICAgICAgICB9LCBjb250cm9sbGVySW5zdGFuY2U7XHJcblxyXG4gICAgICAgICAgICBjb250cm9sbGVyID0gZGlyZWN0aXZlLmNvbnRyb2xsZXI7XHJcbiAgICAgICAgICAgIGlmIChjb250cm9sbGVyID09ICdAJykge1xyXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBhdHRyc1tkaXJlY3RpdmUubmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZSA9ICRjb250cm9sbGVyKGNvbnRyb2xsZXIsIGxvY2FscywgdHJ1ZSwgZGlyZWN0aXZlLmNvbnRyb2xsZXJBcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBGb3IgZGlyZWN0aXZlcyB3aXRoIGVsZW1lbnQgdHJhbnNjbHVzaW9uIHRoZSBlbGVtZW50IGlzIGEgY29tbWVudCxcclxuICAgICAgICAgICAgLy8gYnV0IGpRdWVyeSAuZGF0YSBkb2Vzbid0IHN1cHBvcnQgYXR0YWNoaW5nIGRhdGEgdG8gY29tbWVudCBub2RlcyBhcyBpdCdzIGhhcmQgdG9cclxuICAgICAgICAgICAgLy8gY2xlYW4gdXAgKGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzgzMzUpLlxyXG4gICAgICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBzYXZlIHRoZSBjb250cm9sbGVycyBmb3IgdGhlIGVsZW1lbnQgaW4gYSBsb2NhbCBoYXNoIGFuZCBhdHRhY2ggdG8gLmRhdGFcclxuICAgICAgICAgICAgLy8gbGF0ZXIsIG9uY2Ugd2UgaGF2ZSB0aGUgYWN0dWFsIGVsZW1lbnQuXHJcbiAgICAgICAgICAgIGVsZW1lbnRDb250cm9sbGVyc1tkaXJlY3RpdmUubmFtZV0gPSBjb250cm9sbGVySW5zdGFuY2U7XHJcbiAgICAgICAgICAgIGlmICghaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKCckJyArIGRpcmVjdGl2ZS5uYW1lICsgJ0NvbnRyb2xsZXInLCBjb250cm9sbGVySW5zdGFuY2UuaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb250cm9sbGVyc1tkaXJlY3RpdmUubmFtZV0gPSBjb250cm9sbGVySW5zdGFuY2U7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpIHtcclxuICAgICAgICAgIHZhciBMT0NBTF9SRUdFWFAgPSAvXlxccyooW0A9Jl0pKFxcPz8pXFxzKihcXHcqKVxccyokLztcclxuXHJcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVJbmZvKCRlbGVtZW50LCBpc29sYXRlU2NvcGUsIHRydWUsICEodGVtcGxhdGVEaXJlY3RpdmUgJiYgKHRlbXBsYXRlRGlyZWN0aXZlID09PSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHxcclxuICAgICAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLiQkb3JpZ2luYWxEaXJlY3RpdmUpKSk7XHJcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcygkZWxlbWVudCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgdmFyIGlzb2xhdGVTY29wZUNvbnRyb2xsZXIgPSBjb250cm9sbGVycyAmJiBjb250cm9sbGVyc1tuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUubmFtZV07XHJcbiAgICAgICAgICB2YXIgaXNvbGF0ZUJpbmRpbmdDb250ZXh0ID0gaXNvbGF0ZVNjb3BlO1xyXG4gICAgICAgICAgaWYgKGlzb2xhdGVTY29wZUNvbnRyb2xsZXIgJiYgaXNvbGF0ZVNjb3BlQ29udHJvbGxlci5pZGVudGlmaWVyICYmXHJcbiAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLmJpbmRUb0NvbnRyb2xsZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgaXNvbGF0ZUJpbmRpbmdDb250ZXh0ID0gaXNvbGF0ZVNjb3BlQ29udHJvbGxlci5pbnN0YW5jZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmb3JFYWNoKGlzb2xhdGVTY29wZS4kJGlzb2xhdGVCaW5kaW5ncyA9IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncywgZnVuY3Rpb24oZGVmaW5pdGlvbiwgc2NvcGVOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyTmFtZSA9IGRlZmluaXRpb24uYXR0ck5hbWUsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25hbCA9IGRlZmluaXRpb24ub3B0aW9uYWwsXHJcbiAgICAgICAgICAgICAgICBtb2RlID0gZGVmaW5pdGlvbi5tb2RlLCAvLyBALCA9LCBvciAmXHJcbiAgICAgICAgICAgICAgICBsYXN0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBwYXJlbnRHZXQsIHBhcmVudFNldCwgY29tcGFyZTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAobW9kZSkge1xyXG5cclxuICAgICAgICAgICAgICBjYXNlICdAJzpcclxuICAgICAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKGF0dHJOYW1lLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhdHRycy4kJG9ic2VydmVyc1thdHRyTmFtZV0uJCRzY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICAgICAgaWYoIGF0dHJzW2F0dHJOYW1lXSApIHtcclxuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBoYXMgYmVlbiBwcm92aWRlZCB0aGVuIHdlIHRyaWdnZXIgYW4gaW50ZXJwb2xhdGlvbiB0byBlbnN1cmVcclxuICAgICAgICAgICAgICAgICAgLy8gdGhlIHZhbHVlIGlzIHRoZXJlIGZvciB1c2UgaW4gdGhlIGxpbmsgZm5cclxuICAgICAgICAgICAgICAgICAgaXNvbGF0ZUJpbmRpbmdDb250ZXh0W3Njb3BlTmFtZV0gPSAkaW50ZXJwb2xhdGUoYXR0cnNbYXR0ck5hbWVdKShzY29wZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgY2FzZSAnPSc6XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwgJiYgIWF0dHJzW2F0dHJOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRHZXQgPSAkcGFyc2UoYXR0cnNbYXR0ck5hbWVdKTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRHZXQubGl0ZXJhbCkge1xyXG4gICAgICAgICAgICAgICAgICBjb21wYXJlID0gZXF1YWxzO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgY29tcGFyZSA9IGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gYSA9PT0gYiB8fCAoYSAhPT0gYSAmJiBiICE9PSBiKTsgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhcmVudFNldCA9IHBhcmVudEdldC5hc3NpZ24gfHwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBjaGFuZ2UsIG9yIHdlIHdpbGwgdGhyb3cgdGhpcyBleGNlcHRpb24gb24gZXZlcnkgJGRpZ2VzdFxyXG4gICAgICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdub25hc3NpZ24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJFeHByZXNzaW9uICd7MH0nIHVzZWQgd2l0aCBkaXJlY3RpdmUgJ3sxfScgaXMgbm9uLWFzc2lnbmFibGUhXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0sIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50VmFsdWVXYXRjaCA9IGZ1bmN0aW9uIHBhcmVudFZhbHVlV2F0Y2gocGFyZW50VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFjb21wYXJlKHBhcmVudFZhbHVlLCBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgb3V0IG9mIHN5bmMgYW5kIG5lZWQgdG8gY29weVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29tcGFyZShwYXJlbnRWYWx1ZSwgbGFzdFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gcGFyZW50IGNoYW5nZWQgYW5kIGl0IGhhcyBwcmVjZWRlbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHBhcmVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcGFyZW50IGNhbiBiZSBhc3NpZ25lZCB0aGVuIGRvIHNvXHJcbiAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRTZXQoc2NvcGUsIHBhcmVudFZhbHVlID0gaXNvbGF0ZUJpbmRpbmdDb250ZXh0W3Njb3BlTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFZhbHVlID0gcGFyZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcGFyZW50VmFsdWVXYXRjaC4kc3RhdGVmdWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSwgcGFyZW50VmFsdWVXYXRjaCksIG51bGwsIHBhcmVudEdldC5saXRlcmFsKTtcclxuICAgICAgICAgICAgICAgIGlzb2xhdGVTY29wZS4kb24oJyRkZXN0cm95JywgdW53YXRjaCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgY2FzZSAnJic6XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRHZXQgPSAkcGFyc2UoYXR0cnNbYXR0ck5hbWVdKTtcclxuICAgICAgICAgICAgICAgIGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gZnVuY3Rpb24obG9jYWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnRHZXQoc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udHJvbGxlcnMpIHtcclxuICAgICAgICAgIGZvckVhY2goY29udHJvbGxlcnMsIGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgY29udHJvbGxlcigpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb250cm9sbGVycyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQUkVMSU5LSU5HXHJcbiAgICAgICAgZm9yKGkgPSAwLCBpaSA9IHByZUxpbmtGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgbGlua0ZuID0gcHJlTGlua0Zuc1tpXTtcclxuICAgICAgICAgIGludm9rZUxpbmtGbihsaW5rRm4sXHJcbiAgICAgICAgICAgICAgbGlua0ZuLmlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxyXG4gICAgICAgICAgICAgICRlbGVtZW50LFxyXG4gICAgICAgICAgICAgIGF0dHJzLFxyXG4gICAgICAgICAgICAgIGxpbmtGbi5yZXF1aXJlICYmIGdldENvbnRyb2xsZXJzKGxpbmtGbi5kaXJlY3RpdmVOYW1lLCBsaW5rRm4ucmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyksXHJcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUkVDVVJTSU9OXHJcbiAgICAgICAgLy8gV2Ugb25seSBwYXNzIHRoZSBpc29sYXRlIHNjb3BlLCBpZiB0aGUgaXNvbGF0ZSBkaXJlY3RpdmUgaGFzIGEgdGVtcGxhdGUsXHJcbiAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBjaGlsZCBlbGVtZW50cyBkbyBub3QgYmVsb25nIHRvIHRoZSBpc29sYXRlIGRpcmVjdGl2ZS5cclxuICAgICAgICB2YXIgc2NvcGVUb0NoaWxkID0gc2NvcGU7XHJcbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSAmJiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlIHx8IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS50ZW1wbGF0ZVVybCA9PT0gbnVsbCkpIHtcclxuICAgICAgICAgIHNjb3BlVG9DaGlsZCA9IGlzb2xhdGVTY29wZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hpbGRMaW5rRm4gJiYgY2hpbGRMaW5rRm4oc2NvcGVUb0NoaWxkLCBsaW5rTm9kZS5jaGlsZE5vZGVzLCB1bmRlZmluZWQsIGJvdW5kVHJhbnNjbHVkZUZuKTtcclxuXHJcbiAgICAgICAgLy8gUE9TVExJTktJTkdcclxuICAgICAgICBmb3IoaSA9IHBvc3RMaW5rRm5zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICBsaW5rRm4gPSBwb3N0TGlua0Zuc1tpXTtcclxuICAgICAgICAgIGludm9rZUxpbmtGbihsaW5rRm4sXHJcbiAgICAgICAgICAgICAgbGlua0ZuLmlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxyXG4gICAgICAgICAgICAgICRlbGVtZW50LFxyXG4gICAgICAgICAgICAgIGF0dHJzLFxyXG4gICAgICAgICAgICAgIGxpbmtGbi5yZXF1aXJlICYmIGdldENvbnRyb2xsZXJzKGxpbmtGbi5kaXJlY3RpdmVOYW1lLCBsaW5rRm4ucmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyksXHJcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZnVuY3Rpb24gdGhhdCBpcyBpbmplY3RlZCBhcyBgJHRyYW5zY2x1ZGVgLlxyXG4gICAgICAgIC8vIE5vdGU6IGFsbCBhcmd1bWVudHMgYXJlIG9wdGlvbmFsIVxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCBmdXR1cmVQYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICB2YXIgdHJhbnNjbHVkZUNvbnRyb2xsZXJzO1xyXG5cclxuICAgICAgICAgIC8vIE5vIHNjb3BlIHBhc3NlZCBpbjpcclxuICAgICAgICAgIGlmICghaXNTY29wZShzY29wZSkpIHtcclxuICAgICAgICAgICAgZnV0dXJlUGFyZW50RWxlbWVudCA9IGNsb25lQXR0YWNoRm47XHJcbiAgICAgICAgICAgIGNsb25lQXR0YWNoRm4gPSBzY29wZTtcclxuICAgICAgICAgICAgc2NvcGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGVDb250cm9sbGVycyA9IGVsZW1lbnRDb250cm9sbGVycztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghZnV0dXJlUGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPyAkZWxlbWVudC5wYXJlbnQoKSA6ICRlbGVtZW50O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCB0cmFuc2NsdWRlQ29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1hcmtEaXJlY3RpdmVzQXNJc29sYXRlKGRpcmVjdGl2ZXMpIHtcclxuICAgICAgLy8gbWFyayBhbGwgZGlyZWN0aXZlcyBhcyBuZWVkaW5nIGlzb2xhdGUgc2NvcGUuXHJcbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xyXG4gICAgICAgIGRpcmVjdGl2ZXNbal0gPSBpbmhlcml0KGRpcmVjdGl2ZXNbal0sIHskJGlzb2xhdGVTY29wZTogdHJ1ZX0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBsb29rcyB1cCB0aGUgZGlyZWN0aXZlIGFuZCBkZWNvcmF0ZXMgaXQgd2l0aCBleGNlcHRpb24gaGFuZGxpbmcgYW5kIHByb3BlciBwYXJhbWV0ZXJzLiBXZVxyXG4gICAgICogY2FsbCB0aGlzIHRoZSBib3VuZERpcmVjdGl2ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBkaXJlY3RpdmUgdG8gbG9vayB1cC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBUaGUgZGlyZWN0aXZlIG11c3QgYmUgZm91bmQgaW4gc3BlY2lmaWMgZm9ybWF0LlxyXG4gICAgICogICBTdHJpbmcgY29udGFpbmluZyBhbnkgb2YgdGhlc2VzIGNoYXJhY3RlcnM6XHJcbiAgICAgKlxyXG4gICAgICogICAqIGBFYDogZWxlbWVudCBuYW1lXHJcbiAgICAgKiAgICogYEEnOiBhdHRyaWJ1dGVcclxuICAgICAqICAgKiBgQ2A6IGNsYXNzXHJcbiAgICAgKiAgICogYE1gOiBjb21tZW50XHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBkaXJlY3RpdmUgd2FzIGFkZGVkLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhZGREaXJlY3RpdmUodERpcmVjdGl2ZXMsIG5hbWUsIGxvY2F0aW9uLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBzdGFydEF0dHJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEF0dHJOYW1lKSB7XHJcbiAgICAgIGlmIChuYW1lID09PSBpZ25vcmVEaXJlY3RpdmUpIHJldHVybiBudWxsO1xyXG4gICAgICB2YXIgbWF0Y2ggPSBudWxsO1xyXG4gICAgICBpZiAoaGFzRGlyZWN0aXZlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIGZvcih2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcclxuICAgICAgICAgICAgaSA9IDAsIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7IGk8aWk7IGkrKykge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZGlyZWN0aXZlID0gZGlyZWN0aXZlc1tpXTtcclxuICAgICAgICAgICAgaWYgKCAobWF4UHJpb3JpdHkgPT09IHVuZGVmaW5lZCB8fCBtYXhQcmlvcml0eSA+IGRpcmVjdGl2ZS5wcmlvcml0eSkgJiZcclxuICAgICAgICAgICAgICAgICBkaXJlY3RpdmUucmVzdHJpY3QuaW5kZXhPZihsb2NhdGlvbikgIT0gLTEpIHtcclxuICAgICAgICAgICAgICBpZiAoc3RhcnRBdHRyTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlID0gaW5oZXJpdChkaXJlY3RpdmUsIHskJHN0YXJ0OiBzdGFydEF0dHJOYW1lLCAkJGVuZDogZW5kQXR0ck5hbWV9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdERpcmVjdGl2ZXMucHVzaChkaXJlY3RpdmUpO1xyXG4gICAgICAgICAgICAgIG1hdGNoID0gZGlyZWN0aXZlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoKGUpIHsgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG1hdGNoO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIGxvb2tzIHVwIHRoZSBkaXJlY3RpdmUgYW5kIHJldHVybnMgdHJ1ZSBpZiBpdCBpcyBhIG11bHRpLWVsZW1lbnQgZGlyZWN0aXZlLFxyXG4gICAgICogYW5kIHRoZXJlZm9yZSByZXF1aXJlcyBET00gbm9kZXMgYmV0d2VlbiAtc3RhcnQgYW5kIC1lbmQgbWFya2VycyB0byBiZSBncm91cGVkXHJcbiAgICAgKiB0b2dldGhlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBkaXJlY3RpdmUgdG8gbG9vayB1cC5cclxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgZGlyZWN0aXZlIHdhcyByZWdpc3RlcmVkIGFzIG11bHRpLWVsZW1lbnQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZUlzTXVsdGlFbGVtZW50KG5hbWUpIHtcclxuICAgICAgaWYgKGhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICBmb3IodmFyIGRpcmVjdGl2ZSwgZGlyZWN0aXZlcyA9ICRpbmplY3Rvci5nZXQobmFtZSArIFN1ZmZpeCksXHJcbiAgICAgICAgICAgIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpPGlpOyBpKyspIHtcclxuICAgICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XHJcbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLm11bHRpRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB0aGUgZWxlbWVudCBpcyByZXBsYWNlZCB3aXRoIEhUTUwgdGVtcGxhdGUgdGhlbiB0aGUgbmV3IGF0dHJpYnV0ZXNcclxuICAgICAqIG9uIHRoZSB0ZW1wbGF0ZSBuZWVkIHRvIGJlIG1lcmdlZCB3aXRoIHRoZSBleGlzdGluZyBhdHRyaWJ1dGVzIGluIHRoZSBET00uXHJcbiAgICAgKiBUaGUgZGVzaXJlZCBlZmZlY3QgaXMgdG8gaGF2ZSBib3RoIG9mIHRoZSBhdHRyaWJ1dGVzIHByZXNlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGRzdCBkZXN0aW5hdGlvbiBhdHRyaWJ1dGVzIChvcmlnaW5hbCBET00pXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gc3JjIHNvdXJjZSBhdHRyaWJ1dGVzIChmcm9tIHRoZSBkaXJlY3RpdmUgdGVtcGxhdGUpXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKGRzdCwgc3JjKSB7XHJcbiAgICAgIHZhciBzcmNBdHRyID0gc3JjLiRhdHRyLFxyXG4gICAgICAgICAgZHN0QXR0ciA9IGRzdC4kYXR0cixcclxuICAgICAgICAgICRlbGVtZW50ID0gZHN0LiQkZWxlbWVudDtcclxuXHJcbiAgICAgIC8vIHJlYXBwbHkgdGhlIG9sZCBhdHRyaWJ1dGVzIHRvIHRoZSBuZXcgZWxlbWVudFxyXG4gICAgICBmb3JFYWNoKGRzdCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgIGlmIChrZXkuY2hhckF0KDApICE9ICckJykge1xyXG4gICAgICAgICAgaWYgKHNyY1trZXldICYmIHNyY1trZXldICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSArPSAoa2V5ID09PSAnc3R5bGUnID8gJzsnIDogJyAnKSArIHNyY1trZXldO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZHN0LiRzZXQoa2V5LCB2YWx1ZSwgdHJ1ZSwgc3JjQXR0cltrZXldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gY29weSB0aGUgbmV3IGF0dHJpYnV0ZXMgb24gdGhlIG9sZCBhdHRycyBvYmplY3RcclxuICAgICAgZm9yRWFjaChzcmMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICBpZiAoa2V5ID09ICdjbGFzcycpIHtcclxuICAgICAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgdmFsdWUpO1xyXG4gICAgICAgICAgZHN0WydjbGFzcyddID0gKGRzdFsnY2xhc3MnXSA/IGRzdFsnY2xhc3MnXSArICcgJyA6ICcnKSArIHZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09ICdzdHlsZScpIHtcclxuICAgICAgICAgICRlbGVtZW50LmF0dHIoJ3N0eWxlJywgJGVsZW1lbnQuYXR0cignc3R5bGUnKSArICc7JyArIHZhbHVlKTtcclxuICAgICAgICAgIGRzdFsnc3R5bGUnXSA9IChkc3RbJ3N0eWxlJ10gPyBkc3RbJ3N0eWxlJ10gKyAnOycgOiAnJykgKyB2YWx1ZTtcclxuICAgICAgICAgIC8vIGBkc3RgIHdpbGwgbmV2ZXIgY29udGFpbiBoYXNPd25Qcm9wZXJ0eSBhcyBET00gcGFyc2VyIHdvbid0IGxldCBpdC5cclxuICAgICAgICAgIC8vIFlvdSB3aWxsIGdldCBhbiBcIkludmFsaWRDaGFyYWN0ZXJFcnJvcjogRE9NIEV4Y2VwdGlvbiA1XCIgZXJyb3IgaWYgeW91XHJcbiAgICAgICAgICAvLyBoYXZlIGFuIGF0dHJpYnV0ZSBsaWtlIFwiaGFzLW93bi1wcm9wZXJ0eVwiIG9yIFwiZGF0YS1oYXMtb3duLXByb3BlcnR5XCIsIGV0Yy5cclxuICAgICAgICB9IGVsc2UgaWYgKGtleS5jaGFyQXQoMCkgIT0gJyQnICYmICFkc3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgZHN0W2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgIGRzdEF0dHJba2V5XSA9IHNyY0F0dHJba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjb21waWxlVGVtcGxhdGVVcmwoZGlyZWN0aXZlcywgJGNvbXBpbGVOb2RlLCB0QXR0cnMsXHJcbiAgICAgICAgJHJvb3RFbGVtZW50LCBjaGlsZFRyYW5zY2x1ZGVGbiwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcclxuICAgICAgdmFyIGxpbmtRdWV1ZSA9IFtdLFxyXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4sXHJcbiAgICAgICAgICBhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sXHJcbiAgICAgICAgICBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlID0gJGNvbXBpbGVOb2RlWzBdLFxyXG4gICAgICAgICAgb3JpZ0FzeW5jRGlyZWN0aXZlID0gZGlyZWN0aXZlcy5zaGlmdCgpLFxyXG4gICAgICAgICAgLy8gVGhlIGZhY3QgdGhhdCB3ZSBoYXZlIHRvIGNvcHkgYW5kIHBhdGNoIHRoZSBkaXJlY3RpdmUgc2VlbXMgd3JvbmchXHJcbiAgICAgICAgICBkZXJpdmVkU3luY0RpcmVjdGl2ZSA9IGV4dGVuZCh7fSwgb3JpZ0FzeW5jRGlyZWN0aXZlLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBudWxsLCB0cmFuc2NsdWRlOiBudWxsLCByZXBsYWNlOiBudWxsLCAkJG9yaWdpbmFsRGlyZWN0aXZlOiBvcmlnQXN5bmNEaXJlY3RpdmVcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgdGVtcGxhdGVVcmwgPSAoaXNGdW5jdGlvbihvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwpKVxyXG4gICAgICAgICAgICAgID8gb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsKCRjb21waWxlTm9kZSwgdEF0dHJzKVxyXG4gICAgICAgICAgICAgIDogb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsLFxyXG4gICAgICAgICAgdGVtcGxhdGVOYW1lc3BhY2UgPSBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2U7XHJcblxyXG4gICAgICAkY29tcGlsZU5vZGUuZW1wdHkoKTtcclxuXHJcbiAgICAgICR0ZW1wbGF0ZVJlcXVlc3QoJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodGVtcGxhdGVVcmwpKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuICAgICAgICAgIHZhciBjb21waWxlTm9kZSwgdGVtcFRlbXBsYXRlQXR0cnMsICR0ZW1wbGF0ZSwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcclxuXHJcbiAgICAgICAgICBjb250ZW50ID0gZGVub3JtYWxpemVUZW1wbGF0ZShjb250ZW50KTtcclxuXHJcbiAgICAgICAgICBpZiAob3JpZ0FzeW5jRGlyZWN0aXZlLnJlcGxhY2UpIHtcclxuICAgICAgICAgICAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoY29udGVudCkpIHtcclxuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBqcUxpdGUod3JhcFRlbXBsYXRlKHRlbXBsYXRlTmFtZXNwYWNlLCB0cmltKGNvbnRlbnQpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkdGVtcGxhdGVbMF07XHJcblxyXG4gICAgICAgICAgICBpZiAoJHRlbXBsYXRlLmxlbmd0aCAhPSAxIHx8IGNvbXBpbGVOb2RlLm5vZGVUeXBlICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JyxcclxuICAgICAgICAgICAgICAgICAgXCJUZW1wbGF0ZSBmb3IgZGlyZWN0aXZlICd7MH0nIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfVwiLFxyXG4gICAgICAgICAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUubmFtZSwgdGVtcGxhdGVVcmwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0ZW1wVGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xyXG4gICAgICAgICAgICByZXBsYWNlV2l0aCgkcm9vdEVsZW1lbnQsICRjb21waWxlTm9kZSwgY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVEaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsIFtdLCB0ZW1wVGVtcGxhdGVBdHRycyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNPYmplY3Qob3JpZ0FzeW5jRGlyZWN0aXZlLnNjb3BlKSkge1xyXG4gICAgICAgICAgICAgIG1hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGlyZWN0aXZlcyA9IHRlbXBsYXRlRGlyZWN0aXZlcy5jb25jYXQoZGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRBdHRycywgdGVtcFRlbXBsYXRlQXR0cnMpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlO1xyXG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuaHRtbChjb250ZW50KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBkaXJlY3RpdmVzLnVuc2hpZnQoZGVyaXZlZFN5bmNEaXJlY3RpdmUpO1xyXG5cclxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuID0gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIGNvbXBpbGVOb2RlLCB0QXR0cnMsXHJcbiAgICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4sICRjb21waWxlTm9kZSwgb3JpZ0FzeW5jRGlyZWN0aXZlLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucyxcclxuICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtcclxuICAgICAgICAgIGZvckVhY2goJHJvb3RFbGVtZW50LCBmdW5jdGlvbihub2RlLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlID09IGNvbXBpbGVOb2RlKSB7XHJcbiAgICAgICAgICAgICAgJHJvb3RFbGVtZW50W2ldID0gJGNvbXBpbGVOb2RlWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbiA9IGNvbXBpbGVOb2RlcygkY29tcGlsZU5vZGVbMF0uY2hpbGROb2RlcywgY2hpbGRUcmFuc2NsdWRlRm4pO1xyXG5cclxuICAgICAgICAgIHdoaWxlKGxpbmtRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIHNjb3BlID0gbGlua1F1ZXVlLnNoaWZ0KCksXHJcbiAgICAgICAgICAgICAgICBiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlID0gbGlua1F1ZXVlLnNoaWZ0KCksXHJcbiAgICAgICAgICAgICAgICBsaW5rUm9vdEVsZW1lbnQgPSBsaW5rUXVldWUuc2hpZnQoKSxcclxuICAgICAgICAgICAgICAgIGJvdW5kVHJhbnNjbHVkZUZuID0gbGlua1F1ZXVlLnNoaWZ0KCksXHJcbiAgICAgICAgICAgICAgICBsaW5rTm9kZSA9ICRjb21waWxlTm9kZVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlICE9PSBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG9sZENsYXNzZXMgPSBiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlLmNsYXNzTmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCEocHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSAmJlxyXG4gICAgICAgICAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUucmVwbGFjZSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGl0IHdhcyBjbG9uZWQgdGhlcmVmb3JlIHdlIGhhdmUgdG8gY2xvbmUgYXMgd2VsbC5cclxuICAgICAgICAgICAgICAgIGxpbmtOb2RlID0ganFMaXRlQ2xvbmUoY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXBsYWNlV2l0aChsaW5rUm9vdEVsZW1lbnQsIGpxTGl0ZShiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlKSwgbGlua05vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBDb3B5IGluIENTUyBjbGFzc2VzIGZyb20gb3JpZ2luYWwgbm9kZVxyXG4gICAgICAgICAgICAgIHNhZmVBZGRDbGFzcyhqcUxpdGUobGlua05vZGUpLCBvbGRDbGFzc2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGUsIGJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gYm91bmRUcmFuc2NsdWRlRm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4oYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuLCBzY29wZSwgbGlua05vZGUsICRyb290RWxlbWVudCxcclxuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxpbmtRdWV1ZSA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gZGVsYXllZE5vZGVMaW5rRm4oaWdub3JlQ2hpbGRMaW5rRm4sIHNjb3BlLCBub2RlLCByb290RWxlbWVudCwgYm91bmRUcmFuc2NsdWRlRm4pIHtcclxuICAgICAgICB2YXIgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuO1xyXG4gICAgICAgIGlmIChsaW5rUXVldWUpIHtcclxuICAgICAgICAgIGxpbmtRdWV1ZS5wdXNoKHNjb3BlKTtcclxuICAgICAgICAgIGxpbmtRdWV1ZS5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2gocm9vdEVsZW1lbnQpO1xyXG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2goY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChhZnRlclRlbXBsYXRlTm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGUsIGJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuKGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbiwgc2NvcGUsIG5vZGUsIHJvb3RFbGVtZW50LCBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU29ydGluZyBmdW5jdGlvbiBmb3IgYm91bmQgZGlyZWN0aXZlcy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYnlQcmlvcml0eShhLCBiKSB7XHJcbiAgICAgIHZhciBkaWZmID0gYi5wcmlvcml0eSAtIGEucHJpb3JpdHk7XHJcbiAgICAgIGlmIChkaWZmICE9PSAwKSByZXR1cm4gZGlmZjtcclxuICAgICAgaWYgKGEubmFtZSAhPT0gYi5uYW1lKSByZXR1cm4gKGEubmFtZSA8IGIubmFtZSkgPyAtMSA6IDE7XHJcbiAgICAgIHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYXNzZXJ0Tm9EdXBsaWNhdGUod2hhdCwgcHJldmlvdXNEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgZWxlbWVudCkge1xyXG4gICAgICBpZiAocHJldmlvdXNEaXJlY3RpdmUpIHtcclxuICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbXVsdGlkaXInLCAnTXVsdGlwbGUgZGlyZWN0aXZlcyBbezB9LCB7MX1dIGFza2luZyBmb3IgezJ9IG9uOiB7M30nLFxyXG4gICAgICAgICAgICBwcmV2aW91c0RpcmVjdGl2ZS5uYW1lLCBkaXJlY3RpdmUubmFtZSwgd2hhdCwgc3RhcnRpbmdUYWcoZWxlbWVudCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZShkaXJlY3RpdmVzLCB0ZXh0KSB7XHJcbiAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKHRleHQsIHRydWUpO1xyXG4gICAgICBpZiAoaW50ZXJwb2xhdGVGbikge1xyXG4gICAgICAgIGRpcmVjdGl2ZXMucHVzaCh7XHJcbiAgICAgICAgICBwcmlvcml0eTogMCxcclxuICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZUNvbXBpbGVGbih0ZW1wbGF0ZU5vZGUpIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlTm9kZVBhcmVudCA9IHRlbXBsYXRlTm9kZS5wYXJlbnQoKSxcclxuICAgICAgICAgICAgICAgIGhhc0NvbXBpbGVQYXJlbnQgPSAhIXRlbXBsYXRlTm9kZVBhcmVudC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAvLyBXaGVuIHRyYW5zY2x1ZGluZyBhIHRlbXBsYXRlIHRoYXQgaGFzIGJpbmRpbmdzIGluIHRoZSByb290XHJcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYSBwYXJlbnQgYW5kIHRodXMgbmVlZCB0byBhZGQgdGhlIGNsYXNzIGR1cmluZyBsaW5raW5nIGZuLlxyXG4gICAgICAgICAgICBpZiAoaGFzQ29tcGlsZVBhcmVudCkgY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0ZW1wbGF0ZU5vZGVQYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZUxpbmtGbihzY29wZSwgbm9kZSkge1xyXG4gICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgIGlmICghaGFzQ29tcGlsZVBhcmVudCkgY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyhwYXJlbnQpO1xyXG4gICAgICAgICAgICAgIGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhwYXJlbnQsIGludGVycG9sYXRlRm4uZXhwcmVzc2lvbnMpO1xyXG4gICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChpbnRlcnBvbGF0ZUZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGVbMF0ubm9kZVZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gd3JhcFRlbXBsYXRlKHR5cGUsIHRlbXBsYXRlKSB7XHJcbiAgICAgIHR5cGUgPSBsb3dlcmNhc2UodHlwZSB8fCAnaHRtbCcpO1xyXG4gICAgICBzd2l0Y2godHlwZSkge1xyXG4gICAgICBjYXNlICdzdmcnOlxyXG4gICAgICBjYXNlICdtYXRoJzpcclxuICAgICAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gJzwnK3R5cGUrJz4nK3RlbXBsYXRlKyc8LycrdHlwZSsnPic7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBwZXIuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRUcnVzdGVkQ29udGV4dChub2RlLCBhdHRyTm9ybWFsaXplZE5hbWUpIHtcclxuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcInNyY2RvY1wiKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY2UuSFRNTDtcclxuICAgICAgfVxyXG4gICAgICB2YXIgdGFnID0gbm9kZU5hbWVfKG5vZGUpO1xyXG4gICAgICAvLyBtYWN0aW9uW3hsaW5rOmhyZWZdIGNhbiBzb3VyY2UgU1ZHLiAgSXQncyBub3QgbGltaXRlZCB0byA8bWFjdGlvbj4uXHJcbiAgICAgIGlmIChhdHRyTm9ybWFsaXplZE5hbWUgPT0gXCJ4bGlua0hyZWZcIiB8fFxyXG4gICAgICAgICAgKHRhZyA9PSBcImZvcm1cIiAmJiBhdHRyTm9ybWFsaXplZE5hbWUgPT0gXCJhY3Rpb25cIikgfHxcclxuICAgICAgICAgICh0YWcgIT0gXCJpbWdcIiAmJiAoYXR0ck5vcm1hbGl6ZWROYW1lID09IFwic3JjXCIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcIm5nU3JjXCIpKSkge1xyXG4gICAgICAgIHJldHVybiAkc2NlLlJFU09VUkNFX1VSTDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUobm9kZSwgZGlyZWN0aXZlcywgdmFsdWUsIG5hbWUsIGFsbE9yTm90aGluZykge1xyXG4gICAgICB2YXIgaW50ZXJwb2xhdGVGbiA9ICRpbnRlcnBvbGF0ZSh2YWx1ZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAvLyBubyBpbnRlcnBvbGF0aW9uIGZvdW5kIC0+IGlnbm9yZVxyXG4gICAgICBpZiAoIWludGVycG9sYXRlRm4pIHJldHVybjtcclxuXHJcblxyXG4gICAgICBpZiAobmFtZSA9PT0gXCJtdWx0aXBsZVwiICYmIG5vZGVOYW1lXyhub2RlKSA9PT0gXCJzZWxlY3RcIikge1xyXG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKFwic2VsbXVsdGlcIixcclxuICAgICAgICAgICAgXCJCaW5kaW5nIHRvIHRoZSAnbXVsdGlwbGUnIGF0dHJpYnV0ZSBpcyBub3Qgc3VwcG9ydGVkLiBFbGVtZW50OiB7MH1cIixcclxuICAgICAgICAgICAgc3RhcnRpbmdUYWcobm9kZSkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkaXJlY3RpdmVzLnB1c2goe1xyXG4gICAgICAgIHByaW9yaXR5OiAxMDAsXHJcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgcHJlOiBmdW5jdGlvbiBhdHRySW50ZXJwb2xhdGVQcmVMaW5rRm4oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkJG9ic2VydmVycyA9IChhdHRyLiQkb2JzZXJ2ZXJzIHx8IChhdHRyLiQkb2JzZXJ2ZXJzID0ge30pKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoRVZFTlRfSEFORExFUl9BVFRSX1JFR0VYUC50ZXN0KG5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdub2RvbWV2ZW50cycsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcIkludGVycG9sYXRpb25zIGZvciBIVE1MIERPTSBldmVudCBhdHRyaWJ1dGVzIGFyZSBkaXNhbGxvd2VkLiAgUGxlYXNlIHVzZSB0aGUgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwibmctIHZlcnNpb25zIChzdWNoIGFzIG5nLWNsaWNrIGluc3RlYWQgb2Ygb25jbGljaykgaW5zdGVhZC5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBpbnRlcnBvbGF0ZSBhZ2FpbiwgaW4gY2FzZSB0aGUgYXR0cmlidXRlIHZhbHVlIGhhcyBiZWVuIHVwZGF0ZWRcclxuICAgICAgICAgICAgICAgIC8vIChlLmcuIGJ5IGFub3RoZXIgZGlyZWN0aXZlJ3MgY29tcGlsZSBmdW5jdGlvbilcclxuICAgICAgICAgICAgICAgIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUoYXR0cltuYW1lXSwgdHJ1ZSwgZ2V0VHJ1c3RlZENvbnRleHQobm9kZSwgbmFtZSksXHJcbiAgICAgICAgICAgICAgICAgICAgQUxMX09SX05PVEhJTkdfQVRUUlNbbmFtZV0gfHwgYWxsT3JOb3RoaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBhdHRyaWJ1dGUgd2FzIHVwZGF0ZWQgc28gdGhhdCB0aGVyZSBpcyBubyBpbnRlcnBvbGF0aW9uIGdvaW5nIG9uIHdlIGRvbid0IHdhbnQgdG9cclxuICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGFueSBvYnNlcnZlcnNcclxuICAgICAgICAgICAgICAgIGlmICghaW50ZXJwb2xhdGVGbikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgYXR0ciBvYmplY3Qgc28gdGhhdCBpdCdzIHJlYWR5IGluIGNhc2Ugd2UgbmVlZCB0aGUgdmFsdWUgZm9yIGlzb2xhdGVcclxuICAgICAgICAgICAgICAgIC8vIHNjb3BlIGluaXRpYWxpemF0aW9uLCBvdGhlcndpc2UgdGhlIHZhbHVlIHdvdWxkIG5vdCBiZSBhdmFpbGFibGUgZnJvbSBpc29sYXRlXHJcbiAgICAgICAgICAgICAgICAvLyBkaXJlY3RpdmUncyBsaW5raW5nIGZuIGR1cmluZyBsaW5raW5nIHBoYXNlXHJcbiAgICAgICAgICAgICAgICBhdHRyW25hbWVdID0gaW50ZXJwb2xhdGVGbihzY29wZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgKCQkb2JzZXJ2ZXJzW25hbWVdIHx8ICgkJG9ic2VydmVyc1tuYW1lXSA9IFtdKSkuJCRpbnRlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAoYXR0ci4kJG9ic2VydmVycyAmJiBhdHRyLiQkb2JzZXJ2ZXJzW25hbWVdLiQkc2NvcGUgfHwgc2NvcGUpLlxyXG4gICAgICAgICAgICAgICAgICAkd2F0Y2goaW50ZXJwb2xhdGVGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVGbldhdGNoQWN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc3BlY2lhbCBjYXNlIGZvciBjbGFzcyBhdHRyaWJ1dGUgYWRkaXRpb24gKyByZW1vdmFsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zbyB0aGF0IGNsYXNzIGNoYW5nZXMgY2FuIHRhcCBpbnRvIHRoZSBhbmltYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAvL2hvb2tzIHByb3ZpZGVkIGJ5IHRoZSAkYW5pbWF0ZSBzZXJ2aWNlLiBCZSBzdXJlIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgLy9za2lwIGFuaW1hdGlvbnMgd2hlbiB0aGUgZmlyc3QgZGlnZXN0IG9jY3VycyAod2hlblxyXG4gICAgICAgICAgICAgICAgICAgIC8vYm90aCB0aGUgbmV3IGFuZCB0aGUgb2xkIHZhbHVlcyBhcmUgdGhlIHNhbWUpIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGUgQ1NTIGNsYXNzZXMgYXJlIHRoZSBub24taW50ZXJwb2xhdGVkIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5hbWUgPT09ICdjbGFzcycgJiYgbmV3VmFsdWUgIT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGF0dHIuJHVwZGF0ZUNsYXNzKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGF0dHIuJHNldChuYW1lLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgaXMgYSBzcGVjaWFsIGpxTGl0ZS5yZXBsYWNlV2l0aCwgd2hpY2ggY2FuIHJlcGxhY2UgaXRlbXMgd2hpY2hcclxuICAgICAqIGhhdmUgbm8gcGFyZW50cywgcHJvdmlkZWQgdGhhdCB0aGUgY29udGFpbmluZyBqcUxpdGUgY29sbGVjdGlvbiBpcyBwcm92aWRlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0pxTGl0ZT19ICRyb290RWxlbWVudCBUaGUgcm9vdCBvZiB0aGUgY29tcGlsZSB0cmVlLiBVc2VkIHNvIHRoYXQgd2UgY2FuIHJlcGxhY2Ugbm9kZXNcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSByb290IG9mIHRoZSB0cmVlLlxyXG4gICAgICogQHBhcmFtIHtKcUxpdGV9IGVsZW1lbnRzVG9SZW1vdmUgVGhlIGpxTGl0ZSBlbGVtZW50IHdoaWNoIHdlIGFyZSBnb2luZyB0byByZXBsYWNlLiBXZSBrZWVwXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgc2hlbGwsIGJ1dCByZXBsYWNlIGl0cyBET00gbm9kZSByZWZlcmVuY2UuXHJcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5ld05vZGUgVGhlIG5ldyBET00gbm9kZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVwbGFjZVdpdGgoJHJvb3RFbGVtZW50LCBlbGVtZW50c1RvUmVtb3ZlLCBuZXdOb2RlKSB7XHJcbiAgICAgIHZhciBmaXJzdEVsZW1lbnRUb1JlbW92ZSA9IGVsZW1lbnRzVG9SZW1vdmVbMF0sXHJcbiAgICAgICAgICByZW1vdmVDb3VudCA9IGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoLFxyXG4gICAgICAgICAgcGFyZW50ID0gZmlyc3RFbGVtZW50VG9SZW1vdmUucGFyZW50Tm9kZSxcclxuICAgICAgICAgIGksIGlpO1xyXG5cclxuICAgICAgaWYgKCRyb290RWxlbWVudCkge1xyXG4gICAgICAgIGZvcihpID0gMCwgaWkgPSAkcm9vdEVsZW1lbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgaWYgKCRyb290RWxlbWVudFtpXSA9PSBmaXJzdEVsZW1lbnRUb1JlbW92ZSkge1xyXG4gICAgICAgICAgICAkcm9vdEVsZW1lbnRbaSsrXSA9IG5ld05vZGU7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpLCBqMiA9IGogKyByZW1vdmVDb3VudCAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgIGpqID0gJHJvb3RFbGVtZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICBqIDwgamo7IGorKywgajIrKykge1xyXG4gICAgICAgICAgICAgIGlmIChqMiA8IGpqKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdEVsZW1lbnRbal0gPSAkcm9vdEVsZW1lbnRbajJdO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgJHJvb3RFbGVtZW50W2pdO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkcm9vdEVsZW1lbnQubGVuZ3RoIC09IHJlbW92ZUNvdW50IC0gMTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSByZXBsYWNlZCBlbGVtZW50IGlzIGFsc28gdGhlIGpRdWVyeSAuY29udGV4dCB0aGVuIHJlcGxhY2UgaXRcclxuICAgICAgICAgICAgLy8gLmNvbnRleHQgaXMgYSBkZXByZWNhdGVkIGpRdWVyeSBhcGksIHNvIHdlIHNob3VsZCBzZXQgaXQgb25seSB3aGVuIGpRdWVyeSBzZXQgaXRcclxuICAgICAgICAgICAgLy8gaHR0cDovL2FwaS5qcXVlcnkuY29tL2NvbnRleHQvXHJcbiAgICAgICAgICAgIGlmICgkcm9vdEVsZW1lbnQuY29udGV4dCA9PT0gZmlyc3RFbGVtZW50VG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgICAkcm9vdEVsZW1lbnQuY29udGV4dCA9IG5ld05vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdOb2RlLCBmaXJzdEVsZW1lbnRUb1JlbW92ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRPRE8ocGVyZik6IHdoYXQncyB0aGlzIGRvY3VtZW50IGZyYWdtZW50IGZvcj8gaXMgaXQgbmVlZGVkPyBjYW4gd2UgYXQgbGVhc3QgcmV1c2UgaXQ/XHJcbiAgICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZmlyc3RFbGVtZW50VG9SZW1vdmUpO1xyXG5cclxuICAgICAgLy8gQ29weSBvdmVyIHVzZXIgZGF0YSAodGhhdCBpbmNsdWRlcyBBbmd1bGFyJ3MgJHNjb3BlIGV0Yy4pLiBEb24ndCBjb3B5IHByaXZhdGVcclxuICAgICAgLy8gZGF0YSBoZXJlIGJlY2F1c2UgdGhlcmUncyBubyBwdWJsaWMgaW50ZXJmYWNlIGluIGpRdWVyeSB0byBkbyB0aGF0IGFuZCBjb3B5aW5nIG92ZXJcclxuICAgICAgLy8gZXZlbnQgbGlzdGVuZXJzICh3aGljaCBpcyB0aGUgbWFpbiB1c2Ugb2YgcHJpdmF0ZSBkYXRhKSB3b3VsZG4ndCB3b3JrIGFueXdheS5cclxuICAgICAganFMaXRlKG5ld05vZGUpLmRhdGEoanFMaXRlKGZpcnN0RWxlbWVudFRvUmVtb3ZlKS5kYXRhKCkpO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIGRhdGEgb2YgdGhlIHJlcGxhY2VkIGVsZW1lbnQuIFdlIGNhbm5vdCBqdXN0IGNhbGwgLnJlbW92ZSgpXHJcbiAgICAgIC8vIG9uIHRoZSBlbGVtZW50IGl0IHNpbmNlIHRoYXQgd291bGQgZGVhbGxvY2F0ZSBzY29wZSB0aGF0IGlzIG5lZWRlZFxyXG4gICAgICAvLyBmb3IgdGhlIG5ldyBub2RlLiBJbnN0ZWFkLCByZW1vdmUgdGhlIGRhdGEgXCJtYW51YWxseVwiLlxyXG4gICAgICBpZiAoIWpRdWVyeSkge1xyXG4gICAgICAgIGRlbGV0ZSBqcUxpdGUuY2FjaGVbZmlyc3RFbGVtZW50VG9SZW1vdmVbanFMaXRlLmV4cGFuZG9dXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBqUXVlcnkgMi54IGRvZXNuJ3QgZXhwb3NlIHRoZSBkYXRhIHN0b3JhZ2UuIFVzZSBqUXVlcnkuY2xlYW5EYXRhIHRvIGNsZWFuIHVwIGFmdGVyXHJcbiAgICAgICAgLy8gdGhlIHJlcGxhY2VkIGVsZW1lbnQuIFRoZSBjbGVhbkRhdGEgdmVyc2lvbiBtb25rZXktcGF0Y2hlZCBieSBBbmd1bGFyIHdvdWxkIGNhdXNlXHJcbiAgICAgICAgLy8gdGhlIHNjb3BlIHRvIGJlIHRyYXNoZWQgYW5kIHdlIGRvIG5lZWQgdGhlIHZlcnkgc2FtZSBzY29wZSB0byB3b3JrIHdpdGggdGhlIG5ld1xyXG4gICAgICAgIC8vIGVsZW1lbnQuIEhvd2V2ZXIsIHdlIGNhbm5vdCBqdXN0IGNhY2hlIHRoZSBub24tcGF0Y2hlZCB2ZXJzaW9uIGFuZCB1c2UgaXQgaGVyZSBhc1xyXG4gICAgICAgIC8vIHRoYXQgd291bGQgYnJlYWsgaWYgYW5vdGhlciBsaWJyYXJ5IHBhdGNoZXMgdGhlIG1ldGhvZCBhZnRlciBBbmd1bGFyIGRvZXMgKG9uZVxyXG4gICAgICAgIC8vIGV4YW1wbGUgaXMgalF1ZXJ5IFVJKS4gSW5zdGVhZCwgc2V0IGEgZmxhZyBpbmRpY2F0aW5nIHNjb3BlIGRlc3Ryb3lpbmcgc2hvdWxkIGJlXHJcbiAgICAgICAgLy8gc2tpcHBlZCB0aGlzIG9uZSB0aW1lLlxyXG4gICAgICAgIHNraXBEZXN0cm95T25OZXh0SlF1ZXJ5Q2xlYW5EYXRhID0gdHJ1ZTtcclxuICAgICAgICBqUXVlcnkuY2xlYW5EYXRhKFtmaXJzdEVsZW1lbnRUb1JlbW92ZV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKHZhciBrID0gMSwga2sgPSBlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aDsgayA8IGtrOyBrKyspIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzVG9SZW1vdmVba107XHJcbiAgICAgICAganFMaXRlKGVsZW1lbnQpLnJlbW92ZSgpOyAvLyBtdXN0IGRvIHRoaXMgd2F5IHRvIGNsZWFuIHVwIGV4cGFuZG9cclxuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICBkZWxldGUgZWxlbWVudHNUb1JlbW92ZVtrXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZWxlbWVudHNUb1JlbW92ZVswXSA9IG5ld05vZGU7XHJcbiAgICAgIGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoID0gMTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY2xvbmVBbmRBbm5vdGF0ZUZuKGZuLCBhbm5vdGF0aW9uKSB7XHJcbiAgICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24oKSB7IHJldHVybiBmbi5hcHBseShudWxsLCBhcmd1bWVudHMpOyB9LCBmbiwgYW5ub3RhdGlvbik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGludm9rZUxpbmtGbihsaW5rRm4sIHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBsaW5rRm4oc2NvcGUsICRlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbik7XHJcbiAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUsIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxudmFyIFBSRUZJWF9SRUdFWFAgPSAvXih4W1xcOlxcLV9dfGRhdGFbXFw6XFwtX10pL2k7XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhbGwgYWNjZXB0ZWQgZGlyZWN0aXZlcyBmb3JtYXQgaW50byBwcm9wZXIgZGlyZWN0aXZlIG5hbWUuXHJcbiAqIEFsbCBvZiB0aGVzZSB3aWxsIGJlY29tZSAnbXlEaXJlY3RpdmUnOlxyXG4gKiAgIG15OkRpcmVjdGl2ZVxyXG4gKiAgIG15LWRpcmVjdGl2ZVxyXG4gKiAgIHgtbXktZGlyZWN0aXZlXHJcbiAqICAgZGF0YS1teTpkaXJlY3RpdmVcclxuICpcclxuICogQWxzbyB0aGVyZSBpcyBzcGVjaWFsIGNhc2UgZm9yIE1veiBwcmVmaXggc3RhcnRpbmcgd2l0aCB1cHBlciBjYXNlIGxldHRlci5cclxuICogQHBhcmFtIG5hbWUgTmFtZSB0byBub3JtYWxpemVcclxuICovXHJcbmZ1bmN0aW9uIGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKSB7XHJcbiAgcmV0dXJuIGNhbWVsQ2FzZShuYW1lLnJlcGxhY2UoUFJFRklYX1JFR0VYUCwgJycpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyB0eXBlXHJcbiAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBIHNoYXJlZCBvYmplY3QgYmV0d2VlbiBkaXJlY3RpdmUgY29tcGlsZSAvIGxpbmtpbmcgZnVuY3Rpb25zIHdoaWNoIGNvbnRhaW5zIG5vcm1hbGl6ZWQgRE9NXHJcbiAqIGVsZW1lbnQgYXR0cmlidXRlcy4gVGhlIHZhbHVlcyByZWZsZWN0IGN1cnJlbnQgYmluZGluZyBzdGF0ZSBge3sgfX1gLiBUaGUgbm9ybWFsaXphdGlvbiBpc1xyXG4gKiBuZWVkZWQgc2luY2UgYWxsIG9mIHRoZXNlIGFyZSB0cmVhdGVkIGFzIGVxdWl2YWxlbnQgaW4gQW5ndWxhcjpcclxuICpcclxuICogYGBgXHJcbiAqICAgIDxzcGFuIG5nOmJpbmQ9XCJhXCIgbmctYmluZD1cImFcIiBkYXRhLW5nLWJpbmQ9XCJhXCIgeC1uZy1iaW5kPVwiYVwiPlxyXG4gKiBgYGBcclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3BlcnR5XHJcbiAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRhdHRyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBIG1hcCBvZiBET00gZWxlbWVudCBhdHRyaWJ1dGUgbmFtZXMgdG8gdGhlIG5vcm1hbGl6ZWQgbmFtZS4gVGhpcyBpc1xyXG4gKiBuZWVkZWQgdG8gZG8gcmV2ZXJzZSBsb29rdXAgZnJvbSBub3JtYWxpemVkIG5hbWUgYmFjayB0byBhY3R1YWwgbmFtZS5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHNldFxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU2V0IERPTSBlbGVtZW50IGF0dHJpYnV0ZSB2YWx1ZS5cclxuICpcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTm9ybWFsaXplZCBlbGVtZW50IGF0dHJpYnV0ZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBtb2RpZnkuIFRoZSBuYW1lIGlzXHJcbiAqICAgICAgICAgIHJldmVyc2UtdHJhbnNsYXRlZCB1c2luZyB0aGUge0BsaW5rIG5nLiRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRhdHRyICRhdHRyfVxyXG4gKiAgICAgICAgICBwcm9wZXJ0eSB0byB0aGUgb3JpZ2luYWwgbmFtZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHNldCB0aGUgYXR0cmlidXRlIHRvLiBUaGUgdmFsdWUgY2FuIGJlIGFuIGludGVycG9sYXRlZCBzdHJpbmcuXHJcbiAqL1xyXG5cclxuXHJcblxyXG4vKipcclxuICogQ2xvc3VyZSBjb21waWxlciB0eXBlIGluZm9ybWF0aW9uXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gbm9kZXNldExpbmtpbmdGbihcclxuICAvKiBhbmd1bGFyLlNjb3BlICovIHNjb3BlLFxyXG4gIC8qIE5vZGVMaXN0ICovIG5vZGVMaXN0LFxyXG4gIC8qIEVsZW1lbnQgKi8gcm9vdEVsZW1lbnQsXHJcbiAgLyogZnVuY3Rpb24oRnVuY3Rpb24pICovIGJvdW5kVHJhbnNjbHVkZUZuXHJcbil7fVxyXG5cclxuZnVuY3Rpb24gZGlyZWN0aXZlTGlua2luZ0ZuKFxyXG4gIC8qIG5vZGVzZXRMaW5raW5nRm4gKi8gbm9kZXNldExpbmtpbmdGbixcclxuICAvKiBhbmd1bGFyLlNjb3BlICovIHNjb3BlLFxyXG4gIC8qIE5vZGUgKi8gbm9kZSxcclxuICAvKiBFbGVtZW50ICovIHJvb3RFbGVtZW50LFxyXG4gIC8qIGZ1bmN0aW9uKEZ1bmN0aW9uKSAqLyBib3VuZFRyYW5zY2x1ZGVGblxyXG4pe31cclxuXHJcbmZ1bmN0aW9uIHRva2VuRGlmZmVyZW5jZShzdHIxLCBzdHIyKSB7XHJcbiAgdmFyIHZhbHVlcyA9ICcnLFxyXG4gICAgICB0b2tlbnMxID0gc3RyMS5zcGxpdCgvXFxzKy8pLFxyXG4gICAgICB0b2tlbnMyID0gc3RyMi5zcGxpdCgvXFxzKy8pO1xyXG5cclxuICBvdXRlcjpcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdG9rZW5zMS5sZW5ndGg7IGkrKykge1xyXG4gICAgdmFyIHRva2VuID0gdG9rZW5zMVtpXTtcclxuICAgIGZvcih2YXIgaiA9IDA7IGogPCB0b2tlbnMyLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGlmKHRva2VuID09IHRva2VuczJbal0pIGNvbnRpbnVlIG91dGVyO1xyXG4gICAgfVxyXG4gICAgdmFsdWVzICs9ICh2YWx1ZXMubGVuZ3RoID4gMCA/ICcgJyA6ICcnKSArIHRva2VuO1xyXG4gIH1cclxuICByZXR1cm4gdmFsdWVzO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXJcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSB7QGxpbmsgbmcuJGNvbnRyb2xsZXIgJGNvbnRyb2xsZXIgc2VydmljZX0gaXMgdXNlZCBieSBBbmd1bGFyIHRvIGNyZWF0ZSBuZXdcclxuICogY29udHJvbGxlcnMuXHJcbiAqXHJcbiAqIFRoaXMgcHJvdmlkZXIgYWxsb3dzIGNvbnRyb2xsZXIgcmVnaXN0cmF0aW9uIHZpYSB0aGVcclxuICoge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIjcmVnaXN0ZXIgcmVnaXN0ZXJ9IG1ldGhvZC5cclxuICovXHJcbmZ1bmN0aW9uICRDb250cm9sbGVyUHJvdmlkZXIoKSB7XHJcbiAgdmFyIGNvbnRyb2xsZXJzID0ge30sXHJcbiAgICAgIGdsb2JhbHMgPSBmYWxzZSxcclxuICAgICAgQ05UUkxfUkVHID0gL14oXFxTKykoXFxzK2FzXFxzKyhcXHcrKSk/JC87XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGNvbnRyb2xsZXJQcm92aWRlciNyZWdpc3RlclxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBDb250cm9sbGVyIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgY29udHJvbGxlcnMgd2hlcmUgdGhlIGtleXMgYXJlXHJcbiAgICogICAgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29uc3RydWN0b3JzLlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258QXJyYXl9IGNvbnN0cnVjdG9yIENvbnRyb2xsZXIgY29uc3RydWN0b3IgZm4gKG9wdGlvbmFsbHkgZGVjb3JhdGVkIHdpdGggRElcclxuICAgKiAgICBhbm5vdGF0aW9ucyBpbiB0aGUgYXJyYXkgbm90YXRpb24pLlxyXG4gICAqL1xyXG4gIHRoaXMucmVnaXN0ZXIgPSBmdW5jdGlvbihuYW1lLCBjb25zdHJ1Y3Rvcikge1xyXG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ2NvbnRyb2xsZXInKTtcclxuICAgIGlmIChpc09iamVjdChuYW1lKSkge1xyXG4gICAgICBleHRlbmQoY29udHJvbGxlcnMsIG5hbWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29udHJvbGxlcnNbbmFtZV0gPSBjb25zdHJ1Y3RvcjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGNvbnRyb2xsZXJQcm92aWRlciNhbGxvd0dsb2JhbHNcclxuICAgKiBAZGVzY3JpcHRpb24gSWYgY2FsbGVkLCBhbGxvd3MgYCRjb250cm9sbGVyYCB0byBmaW5kIGNvbnRyb2xsZXIgY29uc3RydWN0b3JzIG9uIGB3aW5kb3dgXHJcbiAgICovXHJcbiAgdGhpcy5hbGxvd0dsb2JhbHMgPSBmdW5jdGlvbigpIHtcclxuICAgIGdsb2JhbHMgPSB0cnVlO1xyXG4gIH07XHJcblxyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckd2luZG93JywgZnVuY3Rpb24oJGluamVjdG9yLCAkd2luZG93KSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgJGNvbnRyb2xsZXJcclxuICAgICAqIEByZXF1aXJlcyAkaW5qZWN0b3JcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gY29uc3RydWN0b3IgSWYgY2FsbGVkIHdpdGggYSBmdW5jdGlvbiB0aGVuIGl0J3MgY29uc2lkZXJlZCB0byBiZSB0aGVcclxuICAgICAqICAgIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb24uIE90aGVyd2lzZSBpdCdzIGNvbnNpZGVyZWQgdG8gYmUgYSBzdHJpbmcgd2hpY2ggaXMgdXNlZFxyXG4gICAgICogICAgdG8gcmV0cmlldmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgdXNpbmcgdGhlIGZvbGxvd2luZyBzdGVwczpcclxuICAgICAqXHJcbiAgICAgKiAgICAqIGNoZWNrIGlmIGEgY29udHJvbGxlciB3aXRoIGdpdmVuIG5hbWUgaXMgcmVnaXN0ZXJlZCB2aWEgYCRjb250cm9sbGVyUHJvdmlkZXJgXHJcbiAgICAgKiAgICAqIGNoZWNrIGlmIGV2YWx1YXRpbmcgdGhlIHN0cmluZyBvbiB0aGUgY3VycmVudCBzY29wZSByZXR1cm5zIGEgY29uc3RydWN0b3JcclxuICAgICAqICAgICogaWYgJGNvbnRyb2xsZXJQcm92aWRlciNhbGxvd0dsb2JhbHMsIGNoZWNrIGB3aW5kb3dbY29uc3RydWN0b3JdYCBvbiB0aGUgZ2xvYmFsXHJcbiAgICAgKiAgICAgIGB3aW5kb3dgIG9iamVjdCAobm90IHJlY29tbWVuZGVkKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsb2NhbHMgSW5qZWN0aW9uIGxvY2FscyBmb3IgQ29udHJvbGxlci5cclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gSW5zdGFuY2Ugb2YgZ2l2ZW4gY29udHJvbGxlci5cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIGAkY29udHJvbGxlcmAgc2VydmljZSBpcyByZXNwb25zaWJsZSBmb3IgaW5zdGFudGlhdGluZyBjb250cm9sbGVycy5cclxuICAgICAqXHJcbiAgICAgKiBJdCdzIGp1c3QgYSBzaW1wbGUgY2FsbCB0byB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgYnV0IGV4dHJhY3RlZCBpbnRvXHJcbiAgICAgKiBhIHNlcnZpY2UsIHNvIHRoYXQgb25lIGNhbiBvdmVycmlkZSB0aGlzIHNlcnZpY2Ugd2l0aCBbQkMgdmVyc2lvbl0oaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTY0OTc4OCkuXHJcbiAgICAgKi9cclxuICAgIHJldHVybiBmdW5jdGlvbihleHByZXNzaW9uLCBsb2NhbHMsIGxhdGVyLCBpZGVudCkge1xyXG4gICAgICAvLyBQUklWQVRFIEFQSTpcclxuICAgICAgLy8gICBwYXJhbSBgbGF0ZXJgIC0tLSBpbmRpY2F0ZXMgdGhhdCB0aGUgY29udHJvbGxlcidzIGNvbnN0cnVjdG9yIGlzIGludm9rZWQgYXQgYSBsYXRlciB0aW1lLlxyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIElmIHRydWUsICRjb250cm9sbGVyIHdpbGwgYWxsb2NhdGUgdGhlIG9iamVjdCB3aXRoIHRoZSBjb3JyZWN0XHJcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcHJvdG90eXBlIGNoYWluLCBidXQgd2lsbCBub3QgaW52b2tlIHRoZSBjb250cm9sbGVyIHVudGlsIGEgcmV0dXJuZWRcclxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayBpcyBpbnZva2VkLlxyXG4gICAgICAvLyAgIHBhcmFtIGBpZGVudGAgLS0tIEFuIG9wdGlvbmFsIGxhYmVsIHdoaWNoIG92ZXJyaWRlcyB0aGUgbGFiZWwgcGFyc2VkIGZyb20gdGhlIGNvbnRyb2xsZXJcclxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uLCBpZiBhbnkuXHJcbiAgICAgIHZhciBpbnN0YW5jZSwgbWF0Y2gsIGNvbnN0cnVjdG9yLCBpZGVudGlmaWVyO1xyXG4gICAgICBsYXRlciA9IGxhdGVyID09PSB0cnVlO1xyXG4gICAgICBpZiAoaWRlbnQgJiYgaXNTdHJpbmcoaWRlbnQpKSB7XHJcbiAgICAgICAgaWRlbnRpZmllciA9IGlkZW50O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZihpc1N0cmluZyhleHByZXNzaW9uKSkge1xyXG4gICAgICAgIG1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaChDTlRSTF9SRUcpLFxyXG4gICAgICAgIGNvbnN0cnVjdG9yID0gbWF0Y2hbMV0sXHJcbiAgICAgICAgaWRlbnRpZmllciA9IGlkZW50aWZpZXIgfHwgbWF0Y2hbM107XHJcbiAgICAgICAgZXhwcmVzc2lvbiA9IGNvbnRyb2xsZXJzLmhhc093blByb3BlcnR5KGNvbnN0cnVjdG9yKVxyXG4gICAgICAgICAgICA/IGNvbnRyb2xsZXJzW2NvbnN0cnVjdG9yXVxyXG4gICAgICAgICAgICA6IGdldHRlcihsb2NhbHMuJHNjb3BlLCBjb25zdHJ1Y3RvciwgdHJ1ZSkgfHxcclxuICAgICAgICAgICAgICAgIChnbG9iYWxzID8gZ2V0dGVyKCR3aW5kb3csIGNvbnN0cnVjdG9yLCB0cnVlKSA6IHVuZGVmaW5lZCk7XHJcblxyXG4gICAgICAgIGFzc2VydEFyZ0ZuKGV4cHJlc3Npb24sIGNvbnN0cnVjdG9yLCB0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGxhdGVyKSB7XHJcbiAgICAgICAgLy8gSW5zdGFudGlhdGUgY29udHJvbGxlciBsYXRlcjpcclxuICAgICAgICAvLyBUaGlzIG1hY2hpbmVyeSBpcyB1c2VkIHRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgb2JqZWN0IGJlZm9yZSBjYWxsaW5nIHRoZVxyXG4gICAgICAgIC8vIGNvbnRyb2xsZXIncyBjb25zdHJ1Y3RvciBpdHNlbGYuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBUaGlzIGFsbG93cyBwcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBjb250cm9sbGVyIGJlZm9yZSB0aGUgY29uc3RydWN0b3IgaXNcclxuICAgICAgICAvLyBpbnZva2VkLiBQcmltYXJpbHksIHRoaXMgaXMgdXNlZCBmb3IgaXNvbGF0ZSBzY29wZSBiaW5kaW5ncyBpbiAkY29tcGlsZS5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFRoaXMgZmVhdHVyZSBpcyBub3QgaW50ZW5kZWQgZm9yIHVzZSBieSBhcHBsaWNhdGlvbnMsIGFuZCBpcyB0aHVzIG5vdCBkb2N1bWVudGVkXHJcbiAgICAgICAgLy8gcHVibGljbHkuXHJcbiAgICAgICAgdmFyIENvbnN0cnVjdG9yID0gZnVuY3Rpb24oKSB7fTtcclxuICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSAoaXNBcnJheShleHByZXNzaW9uKSA/XHJcbiAgICAgICAgICBleHByZXNzaW9uW2V4cHJlc3Npb24ubGVuZ3RoIC0gMV0gOiBleHByZXNzaW9uKS5wcm90b3R5cGU7XHJcbiAgICAgICAgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcclxuXHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcclxuICAgICAgICAgIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgY29uc3RydWN0b3IgfHwgZXhwcmVzc2lvbi5uYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkaW5qZWN0b3IuaW52b2tlKGV4cHJlc3Npb24sIGluc3RhbmNlLCBsb2NhbHMsIGNvbnN0cnVjdG9yKTtcclxuICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2UsXHJcbiAgICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGluc3RhbmNlID0gJGluamVjdG9yLmluc3RhbnRpYXRlKGV4cHJlc3Npb24sIGxvY2FscywgY29uc3RydWN0b3IpO1xyXG5cclxuICAgICAgaWYgKGlkZW50aWZpZXIpIHtcclxuICAgICAgICBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIGNvbnN0cnVjdG9yIHx8IGV4cHJlc3Npb24ubmFtZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBuYW1lKSB7XHJcbiAgICAgIGlmICghKGxvY2FscyAmJiBpc09iamVjdChsb2NhbHMuJHNjb3BlKSkpIHtcclxuICAgICAgICB0aHJvdyBtaW5FcnIoJyRjb250cm9sbGVyJykoJ25vc2NwJyxcclxuICAgICAgICAgIFwiQ2Fubm90IGV4cG9ydCBjb250cm9sbGVyICd7MH0nIGFzICd7MX0nISBObyAkc2NvcGUgb2JqZWN0IHByb3ZpZGVkIHZpYSBgbG9jYWxzYC5cIixcclxuICAgICAgICAgIG5hbWUsIGlkZW50aWZpZXIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsb2NhbHMuJHNjb3BlW2lkZW50aWZpZXJdID0gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkZG9jdW1lbnRcclxuICogQHJlcXVpcmVzICR3aW5kb3dcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEEge0BsaW5rIGFuZ3VsYXIuZWxlbWVudCBqUXVlcnkgb3IganFMaXRlfSB3cmFwcGVyIGZvciB0aGUgYnJvd3NlcidzIGB3aW5kb3cuZG9jdW1lbnRgIG9iamVjdC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwiZG9jdW1lbnRFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxwPiRkb2N1bWVudCB0aXRsZTogPGIgbmctYmluZD1cInRpdGxlXCI+PC9iPjwvcD5cclxuICAgICAgICAgPHA+d2luZG93LmRvY3VtZW50IHRpdGxlOiA8YiBuZy1iaW5kPVwid2luZG93VGl0bGVcIj48L2I+PC9wPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkb2N1bWVudEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJHNjb3BlLCAkZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAkc2NvcGUudGl0bGUgPSAkZG9jdW1lbnRbMF0udGl0bGU7XHJcbiAgICAgICAgICAgJHNjb3BlLndpbmRvd1RpdGxlID0gYW5ndWxhci5lbGVtZW50KHdpbmRvdy5kb2N1bWVudClbMF0udGl0bGU7XHJcbiAgICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uICREb2N1bWVudFByb3ZpZGVyKCl7XHJcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgZnVuY3Rpb24od2luZG93KXtcclxuICAgIHJldHVybiBqcUxpdGUod2luZG93LmRvY3VtZW50KTtcclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRleGNlcHRpb25IYW5kbGVyXHJcbiAqIEByZXF1aXJlcyBuZy4kbG9nXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBbnkgdW5jYXVnaHQgZXhjZXB0aW9uIGluIGFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGVsZWdhdGVkIHRvIHRoaXMgc2VydmljZS5cclxuICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gc2ltcGx5IGRlbGVnYXRlcyB0byBgJGxvZy5lcnJvcmAgd2hpY2ggbG9ncyBpdCBpbnRvXHJcbiAqIHRoZSBicm93c2VyIGNvbnNvbGUuXHJcbiAqXHJcbiAqIEluIHVuaXQgdGVzdHMsIGlmIGBhbmd1bGFyLW1vY2tzLmpzYCBpcyBsb2FkZWQsIHRoaXMgc2VydmljZSBpcyBvdmVycmlkZGVuIGJ5XHJcbiAqIHtAbGluayBuZ01vY2suJGV4Y2VwdGlvbkhhbmRsZXIgbW9jayAkZXhjZXB0aW9uSGFuZGxlcn0gd2hpY2ggYWlkcyBpbiB0ZXN0aW5nLlxyXG4gKlxyXG4gKiAjIyBFeGFtcGxlOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIGFuZ3VsYXIubW9kdWxlKCdleGNlcHRpb25PdmVycmlkZScsIFtdKS5mYWN0b3J5KCckZXhjZXB0aW9uSGFuZGxlcicsIGZ1bmN0aW9uICgpIHtcclxuICogICAgIHJldHVybiBmdW5jdGlvbiAoZXhjZXB0aW9uLCBjYXVzZSkge1xyXG4gKiAgICAgICBleGNlcHRpb24ubWVzc2FnZSArPSAnIChjYXVzZWQgYnkgXCInICsgY2F1c2UgKyAnXCIpJztcclxuICogICAgICAgdGhyb3cgZXhjZXB0aW9uO1xyXG4gKiAgICAgfTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIFRoaXMgZXhhbXBsZSB3aWxsIG92ZXJyaWRlIHRoZSBub3JtYWwgYWN0aW9uIG9mIGAkZXhjZXB0aW9uSGFuZGxlcmAsIHRvIG1ha2UgYW5ndWxhclxyXG4gKiBleGNlcHRpb25zIGZhaWwgaGFyZCB3aGVuIHRoZXkgaGFwcGVuLCBpbnN0ZWFkIG9mIGp1c3QgbG9nZ2luZyB0byB0aGUgY29uc29sZS5cclxuICpcclxuICogQHBhcmFtIHtFcnJvcn0gZXhjZXB0aW9uIEV4Y2VwdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIGVycm9yLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IGNhdXNlIG9wdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb250ZXh0IGluIHdoaWNoXHJcbiAqICAgICAgIHRoZSBlcnJvciB3YXMgdGhyb3duLlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRsb2cnLCBmdW5jdGlvbigkbG9nKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZXhjZXB0aW9uLCBjYXVzZSkge1xyXG4gICAgICAkbG9nLmVycm9yLmFwcGx5KCRsb2csIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gIH1dO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgaGVhZGVycyBpbnRvIGtleSB2YWx1ZSBvYmplY3RcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGhlYWRlcnMgUmF3IGhlYWRlcnMgYXMgYSBzdHJpbmdcclxuICogQHJldHVybnMge09iamVjdH0gUGFyc2VkIGhlYWRlcnMgYXMga2V5IHZhbHVlIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcclxuICB2YXIgcGFyc2VkID0ge30sIGtleSwgdmFsLCBpO1xyXG5cclxuICBpZiAoIWhlYWRlcnMpIHJldHVybiBwYXJzZWQ7XHJcblxyXG4gIGZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcclxuICAgIGtleSA9IGxvd2VyY2FzZSh0cmltKGxpbmUuc3Vic3RyKDAsIGkpKSk7XHJcbiAgICB2YWwgPSB0cmltKGxpbmUuc3Vic3RyKGkgKyAxKSk7XHJcblxyXG4gICAgaWYgKGtleSkge1xyXG4gICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gcGFyc2VkO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBwYXJzZWQgaGVhZGVycy5cclxuICpcclxuICogSGVhZGVycyBhcmUgbGF6eSBwYXJzZWQgd2hlbiBmaXJzdCByZXF1ZXN0ZWQuXHJcbiAqIEBzZWUgcGFyc2VIZWFkZXJzXHJcbiAqXHJcbiAqIEBwYXJhbSB7KHN0cmluZ3xPYmplY3QpfSBoZWFkZXJzIEhlYWRlcnMgdG8gcHJvdmlkZSBhY2Nlc3MgdG8uXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmc9KX0gUmV0dXJucyBhIGdldHRlciBmdW5jdGlvbiB3aGljaCBpZiBjYWxsZWQgd2l0aDpcclxuICpcclxuICogICAtIGlmIGNhbGxlZCB3aXRoIHNpbmdsZSBhbiBhcmd1bWVudCByZXR1cm5zIGEgc2luZ2xlIGhlYWRlciB2YWx1ZSBvciBudWxsXHJcbiAqICAgLSBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgaGVhZGVycy5cclxuICovXHJcbmZ1bmN0aW9uIGhlYWRlcnNHZXR0ZXIoaGVhZGVycykge1xyXG4gIHZhciBoZWFkZXJzT2JqID0gaXNPYmplY3QoaGVhZGVycykgPyBoZWFkZXJzIDogdW5kZWZpbmVkO1xyXG5cclxuICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgaWYgKCFoZWFkZXJzT2JqKSBoZWFkZXJzT2JqID0gIHBhcnNlSGVhZGVycyhoZWFkZXJzKTtcclxuXHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICByZXR1cm4gaGVhZGVyc09ialtsb3dlcmNhc2UobmFtZSldIHx8IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhlYWRlcnNPYmo7XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGFpbiBhbGwgZ2l2ZW4gZnVuY3Rpb25zXHJcbiAqXHJcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBmb3IgYm90aCByZXF1ZXN0IGFuZCByZXNwb25zZSB0cmFuc2Zvcm1pbmdcclxuICpcclxuICogQHBhcmFtIHsqfSBkYXRhIERhdGEgdG8gdHJhbnNmb3JtLlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZz0pfSBoZWFkZXJzIEh0dHAgaGVhZGVycyBnZXR0ZXIgZm4uXHJcbiAqIEBwYXJhbSB7KEZ1bmN0aW9ufEFycmF5LjxGdW5jdGlvbj4pfSBmbnMgRnVuY3Rpb24gb3IgYW4gYXJyYXkgb2YgZnVuY3Rpb25zLlxyXG4gKiBAcmV0dXJucyB7Kn0gVHJhbnNmb3JtZWQgZGF0YS5cclxuICovXHJcbmZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XHJcbiAgaWYgKGlzRnVuY3Rpb24oZm5zKSlcclxuICAgIHJldHVybiBmbnMoZGF0YSwgaGVhZGVycyk7XHJcblxyXG4gIGZvckVhY2goZm5zLCBmdW5jdGlvbihmbikge1xyXG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlzU3VjY2VzcyhzdGF0dXMpIHtcclxuICByZXR1cm4gMjAwIDw9IHN0YXR1cyAmJiBzdGF0dXMgPCAzMDA7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRodHRwUHJvdmlkZXJcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzZSBgJGh0dHBQcm92aWRlcmAgdG8gY2hhbmdlIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IHNlcnZpY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uICRIdHRwUHJvdmlkZXIoKSB7XHJcbiAgdmFyIEpTT05fU1RBUlQgPSAvXlxccyooXFxbfFxce1teXFx7XSkvLFxyXG4gICAgICBKU09OX0VORCA9IC9bXFx9XFxdXVxccyokLyxcclxuICAgICAgUFJPVEVDVElPTl9QUkVGSVggPSAvXlxcKVxcXVxcfScsP1xcbi8sXHJcbiAgICAgIENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OID0geydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04J307XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAqIEBuYW1lICRodHRwUHJvdmlkZXIjZGVmYXVsdHNcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIE9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzIGZvciBhbGwge0BsaW5rIG5nLiRodHRwICRodHRwfSByZXF1ZXN0cy5cclxuICAgKlxyXG4gICAqIC0gKipgZGVmYXVsdHMueHNyZkNvb2tpZU5hbWVgKiogLSB7c3RyaW5nfSAtIE5hbWUgb2YgY29va2llIGNvbnRhaW5pbmcgdGhlIFhTUkYgdG9rZW4uXHJcbiAgICogRGVmYXVsdHMgdmFsdWUgaXMgYCdYU1JGLVRPS0VOJ2AuXHJcbiAgICpcclxuICAgKiAtICoqYGRlZmF1bHRzLnhzcmZIZWFkZXJOYW1lYCoqIC0ge3N0cmluZ30gLSBOYW1lIG9mIEhUVFAgaGVhZGVyIHRvIHBvcHVsYXRlIHdpdGggdGhlXHJcbiAgICogWFNSRiB0b2tlbi4gRGVmYXVsdHMgdmFsdWUgaXMgYCdYLVhTUkYtVE9LRU4nYC5cclxuICAgKlxyXG4gICAqIC0gKipgZGVmYXVsdHMuaGVhZGVyc2AqKiAtIHtPYmplY3R9IC0gRGVmYXVsdCBoZWFkZXJzIGZvciBhbGwgJGh0dHAgcmVxdWVzdHMuXHJcbiAgICogUmVmZXIgdG8ge0BsaW5rIG5nLiRodHRwI3NldHRpbmctaHR0cC1oZWFkZXJzICRodHRwfSBmb3IgZG9jdW1lbnRhdGlvbiBvblxyXG4gICAqIHNldHRpbmcgZGVmYXVsdCBoZWFkZXJzLlxyXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMuY29tbW9uYCoqXHJcbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5wb3N0YCoqXHJcbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5wdXRgKipcclxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnBhdGNoYCoqXHJcbiAgICoqL1xyXG4gIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAvLyB0cmFuc2Zvcm0gaW5jb21pbmcgcmVzcG9uc2UgZGF0YVxyXG4gICAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChpc1N0cmluZyhkYXRhKSkge1xyXG4gICAgICAgIC8vIHN0cmlwIGpzb24gdnVsbmVyYWJpbGl0eSBwcm90ZWN0aW9uIHByZWZpeFxyXG4gICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoUFJPVEVDVElPTl9QUkVGSVgsICcnKTtcclxuICAgICAgICBpZiAoSlNPTl9TVEFSVC50ZXN0KGRhdGEpICYmIEpTT05fRU5ELnRlc3QoZGF0YSkpXHJcbiAgICAgICAgICBkYXRhID0gZnJvbUpzb24oZGF0YSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XSxcclxuXHJcbiAgICAvLyB0cmFuc2Zvcm0gb3V0Z29pbmcgcmVxdWVzdCBkYXRhXHJcbiAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24oZCkge1xyXG4gICAgICByZXR1cm4gaXNPYmplY3QoZCkgJiYgIWlzRmlsZShkKSAmJiAhaXNCbG9iKGQpID8gdG9Kc29uKGQpIDogZDtcclxuICAgIH1dLFxyXG5cclxuICAgIC8vIGRlZmF1bHQgaGVhZGVyc1xyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBjb21tb246IHtcclxuICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKidcclxuICAgICAgfSxcclxuICAgICAgcG9zdDogICBzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiksXHJcbiAgICAgIHB1dDogICAgc2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pLFxyXG4gICAgICBwYXRjaDogIHNoYWxsb3dDb3B5KENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OKVxyXG4gICAgfSxcclxuXHJcbiAgICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxyXG4gICAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nXHJcbiAgfTtcclxuXHJcbiAgdmFyIHVzZUFwcGx5QXN5bmMgPSBmYWxzZTtcclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciN1c2VBcHBseUFzeW5jXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBDb25maWd1cmUgJGh0dHAgc2VydmljZSB0byBjb21iaW5lIHByb2Nlc3Npbmcgb2YgbXVsdGlwbGUgaHR0cCByZXNwb25zZXMgcmVjZWl2ZWQgYXQgYXJvdW5kXHJcbiAgICogdGhlIHNhbWUgdGltZSB2aWEge0BsaW5rIG5nLiRyb290U2NvcGUjYXBwbHlBc3luYyAkcm9vdFNjb3BlLiRhcHBseUFzeW5jfS4gVGhpcyBjYW4gcmVzdWx0IGluXHJcbiAgICogc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnQgZm9yIGJpZ2dlciBhcHBsaWNhdGlvbnMgdGhhdCBtYWtlIG1hbnkgSFRUUCByZXF1ZXN0c1xyXG4gICAqIGNvbmN1cnJlbnRseSAoY29tbW9uIGR1cmluZyBhcHBsaWNhdGlvbiBib290c3RyYXApLlxyXG4gICAqXHJcbiAgICogRGVmYXVsdHMgdG8gZmFsc2UuIElmIG5vIHZhbHVlIGlzIHNwZWNpZmVkLCByZXR1cm5zIHRoZSBjdXJyZW50IGNvbmZpZ3VyZWQgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiB0cnVlLCB3aGVuIHJlcXVlc3RzIGFyZSBsb2FkZWQsIHRoZXkgd2lsbCBzY2hlZHVsZSBhIGRlZmVycmVkXHJcbiAgICogICAgXCJhcHBseVwiIG9uIHRoZSBuZXh0IHRpY2ssIGdpdmluZyB0aW1lIGZvciBzdWJzZXF1ZW50IHJlcXVlc3RzIGluIGEgcm91Z2hseSB+MTBtcyB3aW5kb3dcclxuICAgKiAgICB0byBsb2FkIGFuZCBzaGFyZSB0aGUgc2FtZSBkaWdlc3QgY3ljbGUuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxPYmplY3R9IElmIGEgdmFsdWUgaXMgc3BlY2lmaWVkLCByZXR1cm5zIHRoZSAkaHR0cFByb3ZpZGVyIGZvciBjaGFpbmluZy5cclxuICAgKiAgICBvdGhlcndpc2UsIHJldHVybnMgdGhlIGN1cnJlbnQgY29uZmlndXJlZCB2YWx1ZS5cclxuICAgKiovXHJcbiAgdGhpcy51c2VBcHBseUFzeW5jID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgIHVzZUFwcGx5QXN5bmMgPSAhIXZhbHVlO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VBcHBseUFzeW5jO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEFyZSBvcmRlcmVkIGJ5IHJlcXVlc3QsIGkuZS4gdGhleSBhcmUgYXBwbGllZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGVcclxuICAgKiBhcnJheSwgb24gcmVxdWVzdCwgYnV0IHJldmVyc2Ugb3JkZXIsIG9uIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHZhciBpbnRlcmNlcHRvckZhY3RvcmllcyA9IHRoaXMuaW50ZXJjZXB0b3JzID0gW107XHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJGh0dHBCYWNrZW5kJywgJyRicm93c2VyJywgJyRjYWNoZUZhY3RvcnknLCAnJHJvb3RTY29wZScsICckcScsICckaW5qZWN0b3InLFxyXG4gICAgICBmdW5jdGlvbigkaHR0cEJhY2tlbmQsICRicm93c2VyLCAkY2FjaGVGYWN0b3J5LCAkcm9vdFNjb3BlLCAkcSwgJGluamVjdG9yKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRDYWNoZSA9ICRjYWNoZUZhY3RvcnkoJyRodHRwJyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcmNlcHRvcnMgc3RvcmVkIGluIHJldmVyc2Ugb3JkZXIuIElubmVyIGludGVyY2VwdG9ycyBiZWZvcmUgb3V0ZXIgaW50ZXJjZXB0b3JzLlxyXG4gICAgICogVGhlIHJldmVyc2FsIGlzIG5lZWRlZCBzbyB0aGF0IHdlIGNhbiBidWlsZCB1cCB0aGUgaW50ZXJjZXB0aW9uIGNoYWluIGFyb3VuZCB0aGVcclxuICAgICAqIHNlcnZlciByZXF1ZXN0LlxyXG4gICAgICovXHJcbiAgICB2YXIgcmV2ZXJzZWRJbnRlcmNlcHRvcnMgPSBbXTtcclxuXHJcbiAgICBmb3JFYWNoKGludGVyY2VwdG9yRmFjdG9yaWVzLCBmdW5jdGlvbihpbnRlcmNlcHRvckZhY3RvcnkpIHtcclxuICAgICAgcmV2ZXJzZWRJbnRlcmNlcHRvcnMudW5zaGlmdChpc1N0cmluZyhpbnRlcmNlcHRvckZhY3RvcnkpXHJcbiAgICAgICAgICA/ICRpbmplY3Rvci5nZXQoaW50ZXJjZXB0b3JGYWN0b3J5KSA6ICRpbmplY3Rvci5pbnZva2UoaW50ZXJjZXB0b3JGYWN0b3J5KSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICogQG5hbWUgJGh0dHBcclxuICAgICAqIEByZXF1aXJlcyBuZy4kaHR0cEJhY2tlbmRcclxuICAgICAqIEByZXF1aXJlcyAkY2FjaGVGYWN0b3J5XHJcbiAgICAgKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxyXG4gICAgICogQHJlcXVpcmVzICRxXHJcbiAgICAgKiBAcmVxdWlyZXMgJGluamVjdG9yXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBUaGUgYCRodHRwYCBzZXJ2aWNlIGlzIGEgY29yZSBBbmd1bGFyIHNlcnZpY2UgdGhhdCBmYWNpbGl0YXRlcyBjb21tdW5pY2F0aW9uIHdpdGggdGhlIHJlbW90ZVxyXG4gICAgICogSFRUUCBzZXJ2ZXJzIHZpYSB0aGUgYnJvd3NlcidzIFtYTUxIdHRwUmVxdWVzdF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4veG1saHR0cHJlcXVlc3QpXHJcbiAgICAgKiBvYmplY3Qgb3IgdmlhIFtKU09OUF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OUCkuXHJcbiAgICAgKlxyXG4gICAgICogRm9yIHVuaXQgdGVzdGluZyBhcHBsaWNhdGlvbnMgdGhhdCB1c2UgYCRodHRwYCBzZXJ2aWNlLCBzZWVcclxuICAgICAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cclxuICAgICAqXHJcbiAgICAgKiBGb3IgYSBoaWdoZXIgbGV2ZWwgb2YgYWJzdHJhY3Rpb24sIHBsZWFzZSBjaGVjayBvdXQgdGhlIHtAbGluayBuZ1Jlc291cmNlLiRyZXNvdXJjZVxyXG4gICAgICogJHJlc291cmNlfSBzZXJ2aWNlLlxyXG4gICAgICpcclxuICAgICAqIFRoZSAkaHR0cCBBUEkgaXMgYmFzZWQgb24gdGhlIHtAbGluayBuZy4kcSBkZWZlcnJlZC9wcm9taXNlIEFQSXN9IGV4cG9zZWQgYnlcclxuICAgICAqIHRoZSAkcSBzZXJ2aWNlLiBXaGlsZSBmb3Igc2ltcGxlIHVzYWdlIHBhdHRlcm5zIHRoaXMgZG9lc24ndCBtYXR0ZXIgbXVjaCwgZm9yIGFkdmFuY2VkIHVzYWdlXHJcbiAgICAgKiBpdCBpcyBpbXBvcnRhbnQgdG8gZmFtaWxpYXJpemUgeW91cnNlbGYgd2l0aCB0aGVzZSBBUElzIGFuZCB0aGUgZ3VhcmFudGVlcyB0aGV5IHByb3ZpZGUuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICMjIEdlbmVyYWwgdXNhZ2VcclxuICAgICAqIFRoZSBgJGh0dHBgIHNlcnZpY2UgaXMgYSBmdW5jdGlvbiB3aGljaCB0YWtlcyBhIHNpbmdsZSBhcmd1bWVudCDigJQgYSBjb25maWd1cmF0aW9uIG9iamVjdCDigJRcclxuICAgICAqIHRoYXQgaXMgdXNlZCB0byBnZW5lcmF0ZSBhbiBIVFRQIHJlcXVlc3QgYW5kIHJldHVybnMgIGEge0BsaW5rIG5nLiRxIHByb21pc2V9XHJcbiAgICAgKiB3aXRoIHR3byAkaHR0cCBzcGVjaWZpYyBtZXRob2RzOiBgc3VjY2Vzc2AgYW5kIGBlcnJvcmAuXHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqICAgJGh0dHAoe21ldGhvZDogJ0dFVCcsIHVybDogJy9zb21lVXJsJ30pLlxyXG4gICAgICogICAgIHN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcclxuICAgICAqICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgYXN5bmNocm9ub3VzbHlcclxuICAgICAqICAgICAgIC8vIHdoZW4gdGhlIHJlc3BvbnNlIGlzIGF2YWlsYWJsZVxyXG4gICAgICogICAgIH0pLlxyXG4gICAgICogICAgIGVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XHJcbiAgICAgKiAgICAgICAvLyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgaWYgYW4gZXJyb3Igb2NjdXJzXHJcbiAgICAgKiAgICAgICAvLyBvciBzZXJ2ZXIgcmV0dXJucyByZXNwb25zZSB3aXRoIGFuIGVycm9yIHN0YXR1cy5cclxuICAgICAqICAgICB9KTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFNpbmNlIHRoZSByZXR1cm5lZCB2YWx1ZSBvZiBjYWxsaW5nIHRoZSAkaHR0cCBmdW5jdGlvbiBpcyBhIGBwcm9taXNlYCwgeW91IGNhbiBhbHNvIHVzZVxyXG4gICAgICogdGhlIGB0aGVuYCBtZXRob2QgdG8gcmVnaXN0ZXIgY2FsbGJhY2tzLCBhbmQgdGhlc2UgY2FsbGJhY2tzIHdpbGwgcmVjZWl2ZSBhIHNpbmdsZSBhcmd1bWVudCDigJNcclxuICAgICAqIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJlc3BvbnNlLiBTZWUgdGhlIEFQSSBzaWduYXR1cmUgYW5kIHR5cGUgaW5mbyBiZWxvdyBmb3IgbW9yZVxyXG4gICAgICogZGV0YWlscy5cclxuICAgICAqXHJcbiAgICAgKiBBIHJlc3BvbnNlIHN0YXR1cyBjb2RlIGJldHdlZW4gMjAwIGFuZCAyOTkgaXMgY29uc2lkZXJlZCBhIHN1Y2Nlc3Mgc3RhdHVzIGFuZFxyXG4gICAgICogd2lsbCByZXN1bHQgaW4gdGhlIHN1Y2Nlc3MgY2FsbGJhY2sgYmVpbmcgY2FsbGVkLiBOb3RlIHRoYXQgaWYgdGhlIHJlc3BvbnNlIGlzIGEgcmVkaXJlY3QsXHJcbiAgICAgKiBYTUxIdHRwUmVxdWVzdCB3aWxsIHRyYW5zcGFyZW50bHkgZm9sbG93IGl0LCBtZWFuaW5nIHRoYXQgdGhlIGVycm9yIGNhbGxiYWNrIHdpbGwgbm90IGJlXHJcbiAgICAgKiBjYWxsZWQgZm9yIHN1Y2ggcmVzcG9uc2VzLlxyXG4gICAgICpcclxuICAgICAqICMjIFdyaXRpbmcgVW5pdCBUZXN0cyB0aGF0IHVzZSAkaHR0cFxyXG4gICAgICogV2hlbiB1bml0IHRlc3RpbmcgKHVzaW5nIHtAbGluayBuZ01vY2sgbmdNb2NrfSksIGl0IGlzIG5lY2Vzc2FyeSB0byBjYWxsXHJcbiAgICAgKiB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCNmbHVzaCAkaHR0cEJhY2tlbmQuZmx1c2goKX0gdG8gZmx1c2ggZWFjaCBwZW5kaW5nXHJcbiAgICAgKiByZXF1ZXN0IHVzaW5nIHRyYWluZWQgcmVzcG9uc2VzLlxyXG4gICAgICpcclxuICAgICAqIGBgYFxyXG4gICAgICogJGh0dHBCYWNrZW5kLmV4cGVjdEdFVCguLi4pO1xyXG4gICAgICogJGh0dHAuZ2V0KC4uLik7XHJcbiAgICAgKiAkaHR0cEJhY2tlbmQuZmx1c2goKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIFNob3J0Y3V0IG1ldGhvZHNcclxuICAgICAqXHJcbiAgICAgKiBTaG9ydGN1dCBtZXRob2RzIGFyZSBhbHNvIGF2YWlsYWJsZS4gQWxsIHNob3J0Y3V0IG1ldGhvZHMgcmVxdWlyZSBwYXNzaW5nIGluIHRoZSBVUkwsIGFuZFxyXG4gICAgICogcmVxdWVzdCBkYXRhIG11c3QgYmUgcGFzc2VkIGluIGZvciBQT1NUL1BVVCByZXF1ZXN0cy5cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogICAkaHR0cC5nZXQoJy9zb21lVXJsJykuc3VjY2VzcyhzdWNjZXNzQ2FsbGJhY2spO1xyXG4gICAgICogICAkaHR0cC5wb3N0KCcvc29tZVVybCcsIGRhdGEpLnN1Y2Nlc3Moc3VjY2Vzc0NhbGxiYWNrKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIENvbXBsZXRlIGxpc3Qgb2Ygc2hvcnRjdXQgbWV0aG9kczpcclxuICAgICAqXHJcbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNnZXQgJGh0dHAuZ2V0fVxyXG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjaGVhZCAkaHR0cC5oZWFkfVxyXG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjcG9zdCAkaHR0cC5wb3N0fVxyXG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjcHV0ICRodHRwLnB1dH1cclxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2RlbGV0ZSAkaHR0cC5kZWxldGV9XHJcbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNqc29ucCAkaHR0cC5qc29ucH1cclxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI3BhdGNoICRodHRwLnBhdGNofVxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAjIyBTZXR0aW5nIEhUVFAgSGVhZGVyc1xyXG4gICAgICpcclxuICAgICAqIFRoZSAkaHR0cCBzZXJ2aWNlIHdpbGwgYXV0b21hdGljYWxseSBhZGQgY2VydGFpbiBIVFRQIGhlYWRlcnMgdG8gYWxsIHJlcXVlc3RzLiBUaGVzZSBkZWZhdWx0c1xyXG4gICAgICogY2FuIGJlIGZ1bGx5IGNvbmZpZ3VyZWQgYnkgYWNjZXNzaW5nIHRoZSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzYCBjb25maWd1cmF0aW9uXHJcbiAgICAgKiBvYmplY3QsIHdoaWNoIGN1cnJlbnRseSBjb250YWlucyB0aGlzIGRlZmF1bHQgY29uZmlndXJhdGlvbjpcclxuICAgICAqXHJcbiAgICAgKiAtIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uYCAoaGVhZGVycyB0aGF0IGFyZSBjb21tb24gZm9yIGFsbCByZXF1ZXN0cyk6XHJcbiAgICAgKiAgIC0gYEFjY2VwdDogYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKiAvICpgXHJcbiAgICAgKiAtIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucG9zdGA6IChoZWFkZXIgZGVmYXVsdHMgZm9yIFBPU1QgcmVxdWVzdHMpXHJcbiAgICAgKiAgIC0gYENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbmBcclxuICAgICAqIC0gYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wdXRgIChoZWFkZXIgZGVmYXVsdHMgZm9yIFBVVCByZXF1ZXN0cylcclxuICAgICAqICAgLSBgQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uYFxyXG4gICAgICpcclxuICAgICAqIFRvIGFkZCBvciBvdmVyd3JpdGUgdGhlc2UgZGVmYXVsdHMsIHNpbXBseSBhZGQgb3IgcmVtb3ZlIGEgcHJvcGVydHkgZnJvbSB0aGVzZSBjb25maWd1cmF0aW9uXHJcbiAgICAgKiBvYmplY3RzLiBUbyBhZGQgaGVhZGVycyBmb3IgYW4gSFRUUCBtZXRob2Qgb3RoZXIgdGhhbiBQT1NUIG9yIFBVVCwgc2ltcGx5IGFkZCBhIG5ldyBvYmplY3RcclxuICAgICAqIHdpdGggdGhlIGxvd2VyY2FzZWQgSFRUUCBtZXRob2QgbmFtZSBhcyB0aGUga2V5LCBlLmcuXHJcbiAgICAgKiBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldCA9IHsgJ015LUhlYWRlcicgOiAndmFsdWUnIH0uXHJcbiAgICAgKlxyXG4gICAgICogVGhlIGRlZmF1bHRzIGNhbiBhbHNvIGJlIHNldCBhdCBydW50aW1lIHZpYSB0aGUgYCRodHRwLmRlZmF1bHRzYCBvYmplY3QgaW4gdGhlIHNhbWVcclxuICAgICAqIGZhc2hpb24uIEZvciBleGFtcGxlOlxyXG4gICAgICpcclxuICAgICAqIGBgYFxyXG4gICAgICogbW9kdWxlLnJ1bihmdW5jdGlvbigkaHR0cCkge1xyXG4gICAgICogICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gJ0Jhc2ljIFltVmxjRHBpYjI5dydcclxuICAgICAqIH0pO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogSW4gYWRkaXRpb24sIHlvdSBjYW4gc3VwcGx5IGEgYGhlYWRlcnNgIHByb3BlcnR5IGluIHRoZSBjb25maWcgb2JqZWN0IHBhc3NlZCB3aGVuXHJcbiAgICAgKiBjYWxsaW5nIGAkaHR0cChjb25maWcpYCwgd2hpY2ggb3ZlcnJpZGVzIHRoZSBkZWZhdWx0cyB3aXRob3V0IGNoYW5naW5nIHRoZW0gZ2xvYmFsbHkuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICMjIFRyYW5zZm9ybWluZyBSZXF1ZXN0cyBhbmQgUmVzcG9uc2VzXHJcbiAgICAgKlxyXG4gICAgICogQm90aCByZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIGNhbiBiZSB0cmFuc2Zvcm1lZCB1c2luZyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnM6IGB0cmFuc2Zvcm1SZXF1ZXN0YFxyXG4gICAgICogYW5kIGB0cmFuc2Zvcm1SZXNwb25zZWAuIFRoZXNlIHByb3BlcnRpZXMgY2FuIGJlIGEgc2luZ2xlIGZ1bmN0aW9uIHRoYXQgcmV0dXJuc1xyXG4gICAgICogdGhlIHRyYW5zZm9ybWVkIHZhbHVlIChge2Z1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpYCkgb3IgYW4gYXJyYXkgb2Ygc3VjaCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMsXHJcbiAgICAgKiB3aGljaCBhbGxvd3MgeW91IHRvIGBwdXNoYCBvciBgdW5zaGlmdGAgYSBuZXcgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb24gaW50byB0aGUgdHJhbnNmb3JtYXRpb24gY2hhaW4uXHJcbiAgICAgKlxyXG4gICAgICogIyMjIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zXHJcbiAgICAgKlxyXG4gICAgICogVGhlIGAkaHR0cFByb3ZpZGVyYCBwcm92aWRlciBhbmQgYCRodHRwYCBzZXJ2aWNlIGV4cG9zZSBgZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGAgYW5kXHJcbiAgICAgKiBgZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMuIElmIGEgcmVxdWVzdCBkb2VzIG5vdCBwcm92aWRlIGl0cyBvd24gdHJhbnNmb3JtYXRpb25zXHJcbiAgICAgKiB0aGVuIHRoZXNlIHdpbGwgYmUgYXBwbGllZC5cclxuICAgICAqXHJcbiAgICAgKiBZb3UgY2FuIGF1Z21lbnQgb3IgcmVwbGFjZSB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgYnkgbW9kaWZ5aW5nIHRoZXNlIHByb3BlcnRpZXMgYnkgYWRkaW5nIHRvIG9yXHJcbiAgICAgKiByZXBsYWNpbmcgdGhlIGFycmF5LlxyXG4gICAgICpcclxuICAgICAqIEFuZ3VsYXIgcHJvdmlkZXMgdGhlIGZvbGxvd2luZyBkZWZhdWx0IHRyYW5zZm9ybWF0aW9uczpcclxuICAgICAqXHJcbiAgICAgKiBSZXF1ZXN0IHRyYW5zZm9ybWF0aW9ucyAoYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGAgYW5kIGAkaHR0cC5kZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCk6XHJcbiAgICAgKlxyXG4gICAgICogLSBJZiB0aGUgYGRhdGFgIHByb3BlcnR5IG9mIHRoZSByZXF1ZXN0IGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5zIGFuIG9iamVjdCwgc2VyaWFsaXplIGl0XHJcbiAgICAgKiAgIGludG8gSlNPTiBmb3JtYXQuXHJcbiAgICAgKlxyXG4gICAgICogUmVzcG9uc2UgdHJhbnNmb3JtYXRpb25zIChgJGh0dHBQcm92aWRlci5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZWAgYW5kIGAkaHR0cC5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZWApOlxyXG4gICAgICpcclxuICAgICAqICAtIElmIFhTUkYgcHJlZml4IGlzIGRldGVjdGVkLCBzdHJpcCBpdCAoc2VlIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zIHNlY3Rpb24gYmVsb3cpLlxyXG4gICAgICogIC0gSWYgSlNPTiByZXNwb25zZSBpcyBkZXRlY3RlZCwgZGVzZXJpYWxpemUgaXQgdXNpbmcgYSBKU09OIHBhcnNlci5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogIyMjIE92ZXJyaWRpbmcgdGhlIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zIFBlciBSZXF1ZXN0XHJcbiAgICAgKlxyXG4gICAgICogSWYgeW91IHdpc2ggb3ZlcnJpZGUgdGhlIHJlcXVlc3QvcmVzcG9uc2UgdHJhbnNmb3JtYXRpb25zIG9ubHkgZm9yIGEgc2luZ2xlIHJlcXVlc3QgdGhlbiBwcm92aWRlXHJcbiAgICAgKiBgdHJhbnNmb3JtUmVxdWVzdGAgYW5kL29yIGB0cmFuc2Zvcm1SZXNwb25zZWAgcHJvcGVydGllcyBvbiB0aGUgY29uZmlndXJhdGlvbiBvYmplY3QgcGFzc2VkXHJcbiAgICAgKiBpbnRvIGAkaHR0cGAuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IGlmIHlvdSBwcm92aWRlIHRoZXNlIHByb3BlcnRpZXMgb24gdGhlIGNvbmZpZyBvYmplY3QgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zIHdpbGwgYmVcclxuICAgICAqIG92ZXJ3cml0dGVuLiBJZiB5b3Ugd2lzaCB0byBhdWdtZW50IHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyB0aGVuIHlvdSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB5b3VyXHJcbiAgICAgKiBsb2NhbCB0cmFuc2Zvcm1hdGlvbiBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgZm9sbG93aW5nIGNvZGUgZGVtb25zdHJhdGVzIGFkZGluZyBhIG5ldyByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbiB0byBiZSBydW4gYWZ0ZXIgdGhlIGRlZmF1bHQgcmVzcG9uc2VcclxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyBoYXZlIGJlZW4gcnVuLlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBmdW5jdGlvbiBhcHBlbmRUcmFuc2Zvcm0oZGVmYXVsdHMsIHRyYW5zZm9ybSkge1xyXG4gICAgICpcclxuICAgICAqICAgLy8gV2UgY2FuJ3QgZ3VhcmFudGVlIHRoYXQgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb24gaXMgYW4gYXJyYXlcclxuICAgICAqICAgZGVmYXVsdHMgPSBhbmd1bGFyLmlzQXJyYXkoZGVmYXVsdHMpID8gZGVmYXVsdHMgOiBbZGVmYXVsdHNdO1xyXG4gICAgICpcclxuICAgICAqICAgLy8gQXBwZW5kIHRoZSBuZXcgdHJhbnNmb3JtYXRpb24gdG8gdGhlIGRlZmF1bHRzXHJcbiAgICAgKiAgIHJldHVybiBkZWZhdWx0cy5jb25jYXQodHJhbnNmb3JtKTtcclxuICAgICAqIH1cclxuICAgICAqXHJcbiAgICAgKiAkaHR0cCh7XHJcbiAgICAgKiAgIHVybDogJy4uLicsXHJcbiAgICAgKiAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgKiAgIHRyYW5zZm9ybVJlc3BvbnNlOiBhcHBlbmRUcmFuc2Zvcm0oJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2UsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgKiAgICAgcmV0dXJuIGRvVHJhbnNmb3JtKHZhbHVlKTtcclxuICAgICAqICAgfSlcclxuICAgICAqIH0pO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICMjIENhY2hpbmdcclxuICAgICAqXHJcbiAgICAgKiBUbyBlbmFibGUgY2FjaGluZywgc2V0IHRoZSByZXF1ZXN0IGNvbmZpZ3VyYXRpb24gYGNhY2hlYCBwcm9wZXJ0eSB0byBgdHJ1ZWAgKHRvIHVzZSBkZWZhdWx0XHJcbiAgICAgKiBjYWNoZSkgb3IgdG8gYSBjdXN0b20gY2FjaGUgb2JqZWN0IChidWlsdCB3aXRoIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5IGAkY2FjaGVGYWN0b3J5YH0pLlxyXG4gICAgICogV2hlbiB0aGUgY2FjaGUgaXMgZW5hYmxlZCwgYCRodHRwYCBzdG9yZXMgdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciBpbiB0aGUgc3BlY2lmaWVkXHJcbiAgICAgKiBjYWNoZS4gVGhlIG5leHQgdGltZSB0aGUgc2FtZSByZXF1ZXN0IGlzIG1hZGUsIHRoZSByZXNwb25zZSBpcyBzZXJ2ZWQgZnJvbSB0aGUgY2FjaGUgd2l0aG91dFxyXG4gICAgICogc2VuZGluZyBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlIHRoYXQgZXZlbiBpZiB0aGUgcmVzcG9uc2UgaXMgc2VydmVkIGZyb20gY2FjaGUsIGRlbGl2ZXJ5IG9mIHRoZSBkYXRhIGlzIGFzeW5jaHJvbm91cyBpblxyXG4gICAgICogdGhlIHNhbWUgd2F5IHRoYXQgcmVhbCByZXF1ZXN0cyBhcmUuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhlcmUgYXJlIG11bHRpcGxlIEdFVCByZXF1ZXN0cyBmb3IgdGhlIHNhbWUgVVJMIHRoYXQgc2hvdWxkIGJlIGNhY2hlZCB1c2luZyB0aGUgc2FtZVxyXG4gICAgICogY2FjaGUsIGJ1dCB0aGUgY2FjaGUgaXMgbm90IHBvcHVsYXRlZCB5ZXQsIG9ubHkgb25lIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB3aWxsIGJlIG1hZGUgYW5kXHJcbiAgICAgKiB0aGUgcmVtYWluaW5nIHJlcXVlc3RzIHdpbGwgYmUgZnVsZmlsbGVkIHVzaW5nIHRoZSByZXNwb25zZSBmcm9tIHRoZSBmaXJzdCByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIFlvdSBjYW4gY2hhbmdlIHRoZSBkZWZhdWx0IGNhY2hlIHRvIGEgbmV3IG9iamVjdCAoYnVpbHQgd2l0aFxyXG4gICAgICoge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgYCRjYWNoZUZhY3RvcnlgfSkgYnkgdXBkYXRpbmcgdGhlXHJcbiAgICAgKiB7QGxpbmsgbmcuJGh0dHAjcHJvcGVydGllc19kZWZhdWx0cyBgJGh0dHAuZGVmYXVsdHMuY2FjaGVgfSBwcm9wZXJ0eS4gQWxsIHJlcXVlc3RzIHdobyBzZXRcclxuICAgICAqIHRoZWlyIGBjYWNoZWAgcHJvcGVydHkgdG8gYHRydWVgIHdpbGwgbm93IHVzZSB0aGlzIGNhY2hlIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBJZiB5b3Ugc2V0IHRoZSBkZWZhdWx0IGNhY2hlIHRvIGBmYWxzZWAgdGhlbiBvbmx5IHJlcXVlc3RzIHRoYXQgc3BlY2lmeSB0aGVpciBvd24gY3VzdG9tXHJcbiAgICAgKiBjYWNoZSBvYmplY3Qgd2lsbCBiZSBjYWNoZWQuXHJcbiAgICAgKlxyXG4gICAgICogIyMgSW50ZXJjZXB0b3JzXHJcbiAgICAgKlxyXG4gICAgICogQmVmb3JlIHlvdSBzdGFydCBjcmVhdGluZyBpbnRlcmNlcHRvcnMsIGJlIHN1cmUgdG8gdW5kZXJzdGFuZCB0aGVcclxuICAgICAqIHtAbGluayBuZy4kcSAkcSBhbmQgZGVmZXJyZWQvcHJvbWlzZSBBUElzfS5cclxuICAgICAqXHJcbiAgICAgKiBGb3IgcHVycG9zZXMgb2YgZ2xvYmFsIGVycm9yIGhhbmRsaW5nLCBhdXRoZW50aWNhdGlvbiwgb3IgYW55IGtpbmQgb2Ygc3luY2hyb25vdXMgb3JcclxuICAgICAqIGFzeW5jaHJvbm91cyBwcmUtcHJvY2Vzc2luZyBvZiByZXF1ZXN0IG9yIHBvc3Rwcm9jZXNzaW5nIG9mIHJlc3BvbnNlcywgaXQgaXMgZGVzaXJhYmxlIHRvIGJlXHJcbiAgICAgKiBhYmxlIHRvIGludGVyY2VwdCByZXF1ZXN0cyBiZWZvcmUgdGhleSBhcmUgaGFuZGVkIHRvIHRoZSBzZXJ2ZXIgYW5kXHJcbiAgICAgKiByZXNwb25zZXMgYmVmb3JlIHRoZXkgYXJlIGhhbmRlZCBvdmVyIHRvIHRoZSBhcHBsaWNhdGlvbiBjb2RlIHRoYXRcclxuICAgICAqIGluaXRpYXRlZCB0aGVzZSByZXF1ZXN0cy4gVGhlIGludGVyY2VwdG9ycyBsZXZlcmFnZSB0aGUge0BsaW5rIG5nLiRxXHJcbiAgICAgKiBwcm9taXNlIEFQSXN9IHRvIGZ1bGZpbGwgdGhpcyBuZWVkIGZvciBib3RoIHN5bmNocm9ub3VzIGFuZCBhc3luY2hyb25vdXMgcHJlLXByb2Nlc3NpbmcuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIGludGVyY2VwdG9ycyBhcmUgc2VydmljZSBmYWN0b3JpZXMgdGhhdCBhcmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBgJGh0dHBQcm92aWRlcmAgYnlcclxuICAgICAqIGFkZGluZyB0aGVtIHRvIHRoZSBgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnNgIGFycmF5LiBUaGUgZmFjdG9yeSBpcyBjYWxsZWQgYW5kXHJcbiAgICAgKiBpbmplY3RlZCB3aXRoIGRlcGVuZGVuY2llcyAoaWYgc3BlY2lmaWVkKSBhbmQgcmV0dXJucyB0aGUgaW50ZXJjZXB0b3IuXHJcbiAgICAgKlxyXG4gICAgICogVGhlcmUgYXJlIHR3byBraW5kcyBvZiBpbnRlcmNlcHRvcnMgKGFuZCB0d28ga2luZHMgb2YgcmVqZWN0aW9uIGludGVyY2VwdG9ycyk6XHJcbiAgICAgKlxyXG4gICAgICogICAqIGByZXF1ZXN0YDogaW50ZXJjZXB0b3JzIGdldCBjYWxsZWQgd2l0aCBhIGh0dHAgYGNvbmZpZ2Agb2JqZWN0LiBUaGUgZnVuY3Rpb24gaXMgZnJlZSB0b1xyXG4gICAgICogICAgIG1vZGlmeSB0aGUgYGNvbmZpZ2Agb2JqZWN0IG9yIGNyZWF0ZSBhIG5ldyBvbmUuIFRoZSBmdW5jdGlvbiBuZWVkcyB0byByZXR1cm4gdGhlIGBjb25maWdgXHJcbiAgICAgKiAgICAgb2JqZWN0IGRpcmVjdGx5LCBvciBhIHByb21pc2UgY29udGFpbmluZyB0aGUgYGNvbmZpZ2Agb3IgYSBuZXcgYGNvbmZpZ2Agb2JqZWN0LlxyXG4gICAgICogICAqIGByZXF1ZXN0RXJyb3JgOiBpbnRlcmNlcHRvciBnZXRzIGNhbGxlZCB3aGVuIGEgcHJldmlvdXMgaW50ZXJjZXB0b3IgdGhyZXcgYW4gZXJyb3Igb3JcclxuICAgICAqICAgICByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLlxyXG4gICAgICogICAqIGByZXNwb25zZWA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggaHR0cCBgcmVzcG9uc2VgIG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cclxuICAgICAqICAgICBtb2RpZnkgdGhlIGByZXNwb25zZWAgb2JqZWN0IG9yIGNyZWF0ZSBhIG5ldyBvbmUuIFRoZSBmdW5jdGlvbiBuZWVkcyB0byByZXR1cm4gdGhlIGByZXNwb25zZWBcclxuICAgICAqICAgICBvYmplY3QgZGlyZWN0bHksIG9yIGFzIGEgcHJvbWlzZSBjb250YWluaW5nIHRoZSBgcmVzcG9uc2VgIG9yIGEgbmV3IGByZXNwb25zZWAgb2JqZWN0LlxyXG4gICAgICogICAqIGByZXNwb25zZUVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXHJcbiAgICAgKiAgICAgcmVzb2x2ZWQgd2l0aCBhIHJlamVjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqICAgLy8gcmVnaXN0ZXIgdGhlIGludGVyY2VwdG9yIGFzIGEgc2VydmljZVxyXG4gICAgICogICAkcHJvdmlkZS5mYWN0b3J5KCdteUh0dHBJbnRlcmNlcHRvcicsIGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcclxuICAgICAqICAgICByZXR1cm4ge1xyXG4gICAgICogICAgICAgLy8gb3B0aW9uYWwgbWV0aG9kXHJcbiAgICAgKiAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgICogICAgICAgICAvLyBkbyBzb21ldGhpbmcgb24gc3VjY2Vzc1xyXG4gICAgICogICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICogICAgICAgfSxcclxuICAgICAqXHJcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcclxuICAgICAqICAgICAgJ3JlcXVlc3RFcnJvcic6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xyXG4gICAgICogICAgICAgICAvLyBkbyBzb21ldGhpbmcgb24gZXJyb3JcclxuICAgICAqICAgICAgICAgaWYgKGNhblJlY292ZXIocmVqZWN0aW9uKSkge1xyXG4gICAgICogICAgICAgICAgIHJldHVybiByZXNwb25zZU9yTmV3UHJvbWlzZVxyXG4gICAgICogICAgICAgICB9XHJcbiAgICAgKiAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcclxuICAgICAqICAgICAgIH0sXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcclxuICAgICAqICAgICAgICdyZXNwb25zZSc6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBzdWNjZXNzXHJcbiAgICAgKiAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAqICAgICAgIH0sXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgLy8gb3B0aW9uYWwgbWV0aG9kXHJcbiAgICAgKiAgICAgICdyZXNwb25zZUVycm9yJzogZnVuY3Rpb24ocmVqZWN0aW9uKSB7XHJcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBlcnJvclxyXG4gICAgICogICAgICAgICBpZiAoY2FuUmVjb3ZlcihyZWplY3Rpb24pKSB7XHJcbiAgICAgKiAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlT3JOZXdQcm9taXNlXHJcbiAgICAgKiAgICAgICAgIH1cclxuICAgICAqICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xyXG4gICAgICogICAgICAgfVxyXG4gICAgICogICAgIH07XHJcbiAgICAgKiAgIH0pO1xyXG4gICAgICpcclxuICAgICAqICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnbXlIdHRwSW50ZXJjZXB0b3InKTtcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogICAvLyBhbHRlcm5hdGl2ZWx5LCByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgdmlhIGFuIGFub255bW91cyBmYWN0b3J5XHJcbiAgICAgKiAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goZnVuY3Rpb24oJHEsIGRlcGVuZGVuY3kxLCBkZXBlbmRlbmN5Mikge1xyXG4gICAgICogICAgIHJldHVybiB7XHJcbiAgICAgKiAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XHJcbiAgICAgKiAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlXHJcbiAgICAgKiAgICAgICB9LFxyXG4gICAgICpcclxuICAgICAqICAgICAgICdyZXNwb25zZSc6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgKiAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlXHJcbiAgICAgKiAgICAgICB9XHJcbiAgICAgKiAgICAgfTtcclxuICAgICAqICAgfSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAjIyBTZWN1cml0eSBDb25zaWRlcmF0aW9uc1xyXG4gICAgICpcclxuICAgICAqIFdoZW4gZGVzaWduaW5nIHdlYiBhcHBsaWNhdGlvbnMsIGNvbnNpZGVyIHNlY3VyaXR5IHRocmVhdHMgZnJvbTpcclxuICAgICAqXHJcbiAgICAgKiAtIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcclxuICAgICAqIC0gW1hTUkZdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ3Jvc3Mtc2l0ZV9yZXF1ZXN0X2ZvcmdlcnkpXHJcbiAgICAgKlxyXG4gICAgICogQm90aCBzZXJ2ZXIgYW5kIHRoZSBjbGllbnQgbXVzdCBjb29wZXJhdGUgaW4gb3JkZXIgdG8gZWxpbWluYXRlIHRoZXNlIHRocmVhdHMuIEFuZ3VsYXIgY29tZXNcclxuICAgICAqIHByZS1jb25maWd1cmVkIHdpdGggc3RyYXRlZ2llcyB0aGF0IGFkZHJlc3MgdGhlc2UgaXNzdWVzLCBidXQgZm9yIHRoaXMgdG8gd29yayBiYWNrZW5kIHNlcnZlclxyXG4gICAgICogY29vcGVyYXRpb24gaXMgcmVxdWlyZWQuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIEpTT04gVnVsbmVyYWJpbGl0eSBQcm90ZWN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQSBbSlNPTiB2dWxuZXJhYmlsaXR5XShodHRwOi8vaGFhY2tlZC5jb20vYXJjaGl2ZS8yMDA4LzExLzIwL2FuYXRvbXktb2YtYS1zdWJ0bGUtanNvbi12dWxuZXJhYmlsaXR5LmFzcHgpXHJcbiAgICAgKiBhbGxvd3MgdGhpcmQgcGFydHkgd2Vic2l0ZSB0byB0dXJuIHlvdXIgSlNPTiByZXNvdXJjZSBVUkwgaW50b1xyXG4gICAgICogW0pTT05QXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0pTT05QKSByZXF1ZXN0IHVuZGVyIHNvbWUgY29uZGl0aW9ucy4gVG9cclxuICAgICAqIGNvdW50ZXIgdGhpcyB5b3VyIHNlcnZlciBjYW4gcHJlZml4IGFsbCBKU09OIHJlcXVlc3RzIHdpdGggZm9sbG93aW5nIHN0cmluZyBgXCIpXX0nLFxcblwiYC5cclxuICAgICAqIEFuZ3VsYXIgd2lsbCBhdXRvbWF0aWNhbGx5IHN0cmlwIHRoZSBwcmVmaXggYmVmb3JlIHByb2Nlc3NpbmcgaXQgYXMgSlNPTi5cclxuICAgICAqXHJcbiAgICAgKiBGb3IgZXhhbXBsZSBpZiB5b3VyIHNlcnZlciBuZWVkcyB0byByZXR1cm46XHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogWydvbmUnLCd0d28nXVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogd2hpY2ggaXMgdnVsbmVyYWJsZSB0byBhdHRhY2ssIHlvdXIgc2VydmVyIGNhbiByZXR1cm46XHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogKV19JyxcclxuICAgICAqIFsnb25lJywndHdvJ11cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEFuZ3VsYXIgd2lsbCBzdHJpcCB0aGUgcHJlZml4LCBiZWZvcmUgcHJvY2Vzc2luZyB0aGUgSlNPTi5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogIyMjIENyb3NzIFNpdGUgUmVxdWVzdCBGb3JnZXJ5IChYU1JGKSBQcm90ZWN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogW1hTUkZdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ3Jvc3Mtc2l0ZV9yZXF1ZXN0X2ZvcmdlcnkpIGlzIGEgdGVjaG5pcXVlIGJ5IHdoaWNoXHJcbiAgICAgKiBhbiB1bmF1dGhvcml6ZWQgc2l0ZSBjYW4gZ2FpbiB5b3VyIHVzZXIncyBwcml2YXRlIGRhdGEuIEFuZ3VsYXIgcHJvdmlkZXMgYSBtZWNoYW5pc21cclxuICAgICAqIHRvIGNvdW50ZXIgWFNSRi4gV2hlbiBwZXJmb3JtaW5nIFhIUiByZXF1ZXN0cywgdGhlICRodHRwIHNlcnZpY2UgcmVhZHMgYSB0b2tlbiBmcm9tIGEgY29va2llXHJcbiAgICAgKiAoYnkgZGVmYXVsdCwgYFhTUkYtVE9LRU5gKSBhbmQgc2V0cyBpdCBhcyBhbiBIVFRQIGhlYWRlciAoYFgtWFNSRi1UT0tFTmApLiBTaW5jZSBvbmx5XHJcbiAgICAgKiBKYXZhU2NyaXB0IHRoYXQgcnVucyBvbiB5b3VyIGRvbWFpbiBjb3VsZCByZWFkIHRoZSBjb29raWUsIHlvdXIgc2VydmVyIGNhbiBiZSBhc3N1cmVkIHRoYXRcclxuICAgICAqIHRoZSBYSFIgY2FtZSBmcm9tIEphdmFTY3JpcHQgcnVubmluZyBvbiB5b3VyIGRvbWFpbi4gVGhlIGhlYWRlciB3aWxsIG5vdCBiZSBzZXQgZm9yXHJcbiAgICAgKiBjcm9zcy1kb21haW4gcmVxdWVzdHMuXHJcbiAgICAgKlxyXG4gICAgICogVG8gdGFrZSBhZHZhbnRhZ2Ugb2YgdGhpcywgeW91ciBzZXJ2ZXIgbmVlZHMgdG8gc2V0IGEgdG9rZW4gaW4gYSBKYXZhU2NyaXB0IHJlYWRhYmxlIHNlc3Npb25cclxuICAgICAqIGNvb2tpZSBjYWxsZWQgYFhTUkYtVE9LRU5gIG9uIHRoZSBmaXJzdCBIVFRQIEdFVCByZXF1ZXN0LiBPbiBzdWJzZXF1ZW50IFhIUiByZXF1ZXN0cyB0aGVcclxuICAgICAqIHNlcnZlciBjYW4gdmVyaWZ5IHRoYXQgdGhlIGNvb2tpZSBtYXRjaGVzIGBYLVhTUkYtVE9LRU5gIEhUVFAgaGVhZGVyLCBhbmQgdGhlcmVmb3JlIGJlIHN1cmVcclxuICAgICAqIHRoYXQgb25seSBKYXZhU2NyaXB0IHJ1bm5pbmcgb24geW91ciBkb21haW4gY291bGQgaGF2ZSBzZW50IHRoZSByZXF1ZXN0LiBUaGUgdG9rZW4gbXVzdCBiZVxyXG4gICAgICogdW5pcXVlIGZvciBlYWNoIHVzZXIgYW5kIG11c3QgYmUgdmVyaWZpYWJsZSBieSB0aGUgc2VydmVyICh0byBwcmV2ZW50IHRoZSBKYXZhU2NyaXB0IGZyb21cclxuICAgICAqIG1ha2luZyB1cCBpdHMgb3duIHRva2VucykuIFdlIHJlY29tbWVuZCB0aGF0IHRoZSB0b2tlbiBpcyBhIGRpZ2VzdCBvZiB5b3VyIHNpdGUnc1xyXG4gICAgICogYXV0aGVudGljYXRpb24gY29va2llIHdpdGggYSBbc2FsdF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2FsdF8oY3J5cHRvZ3JhcGh5JiM0MTspXHJcbiAgICAgKiBmb3IgYWRkZWQgc2VjdXJpdHkuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGhlYWRlcnMgY2FuIGJlIHNwZWNpZmllZCB1c2luZyB0aGUgeHNyZkhlYWRlck5hbWUgYW5kIHhzcmZDb29raWVOYW1lXHJcbiAgICAgKiBwcm9wZXJ0aWVzIG9mIGVpdGhlciAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzIGF0IGNvbmZpZy10aW1lLCAkaHR0cC5kZWZhdWx0cyBhdCBydW4tdGltZSxcclxuICAgICAqIG9yIHRoZSBwZXItcmVxdWVzdCBjb25maWcgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIE9iamVjdCBkZXNjcmliaW5nIHRoZSByZXF1ZXN0IHRvIGJlIG1hZGUgYW5kIGhvdyBpdCBzaG91bGQgYmVcclxuICAgICAqICAgIHByb2Nlc3NlZC4gVGhlIG9iamVjdCBoYXMgZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAgICAgKlxyXG4gICAgICogICAgLSAqKm1ldGhvZCoqIOKAkyBge3N0cmluZ31gIOKAkyBIVFRQIG1ldGhvZCAoZS5nLiAnR0VUJywgJ1BPU1QnLCBldGMpXHJcbiAgICAgKiAgICAtICoqdXJsKiog4oCTIGB7c3RyaW5nfWAg4oCTIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyBiZWluZyByZXF1ZXN0ZWQuXHJcbiAgICAgKiAgICAtICoqcGFyYW1zKiog4oCTIGB7T2JqZWN0LjxzdHJpbmd8T2JqZWN0Pn1gIOKAkyBNYXAgb2Ygc3RyaW5ncyBvciBvYmplY3RzIHdoaWNoIHdpbGwgYmUgdHVybmVkXHJcbiAgICAgKiAgICAgIHRvIGA/a2V5MT12YWx1ZTEma2V5Mj12YWx1ZTJgIGFmdGVyIHRoZSB1cmwuIElmIHRoZSB2YWx1ZSBpcyBub3QgYSBzdHJpbmcsIGl0IHdpbGwgYmVcclxuICAgICAqICAgICAgSlNPTmlmaWVkLlxyXG4gICAgICogICAgLSAqKmRhdGEqKiDigJMgYHtzdHJpbmd8T2JqZWN0fWAg4oCTIERhdGEgdG8gYmUgc2VudCBhcyB0aGUgcmVxdWVzdCBtZXNzYWdlIGRhdGEuXHJcbiAgICAgKiAgICAtICoqaGVhZGVycyoqIOKAkyBge09iamVjdH1gIOKAkyBNYXAgb2Ygc3RyaW5ncyBvciBmdW5jdGlvbnMgd2hpY2ggcmV0dXJuIHN0cmluZ3MgcmVwcmVzZW50aW5nXHJcbiAgICAgKiAgICAgIEhUVFAgaGVhZGVycyB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuIElmIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBmdW5jdGlvbiBpcyBudWxsLCB0aGVcclxuICAgICAqICAgICAgaGVhZGVyIHdpbGwgbm90IGJlIHNlbnQuXHJcbiAgICAgKiAgICAtICoqeHNyZkhlYWRlck5hbWUqKiDigJMgYHtzdHJpbmd9YCDigJMgTmFtZSBvZiBIVFRQIGhlYWRlciB0byBwb3B1bGF0ZSB3aXRoIHRoZSBYU1JGIHRva2VuLlxyXG4gICAgICogICAgLSAqKnhzcmZDb29raWVOYW1lKiog4oCTIGB7c3RyaW5nfWAg4oCTIE5hbWUgb2YgY29va2llIGNvbnRhaW5pbmcgdGhlIFhTUkYgdG9rZW4uXHJcbiAgICAgKiAgICAtICoqdHJhbnNmb3JtUmVxdWVzdCoqIOKAk1xyXG4gICAgICogICAgICBge2Z1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpfEFycmF5LjxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKT59YCDigJNcclxuICAgICAqICAgICAgdHJhbnNmb3JtIGZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIHN1Y2ggZnVuY3Rpb25zLiBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHRha2VzIHRoZSBodHRwXHJcbiAgICAgKiAgICAgIHJlcXVlc3QgYm9keSBhbmQgaGVhZGVycyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBzZXJpYWxpemVkKSB2ZXJzaW9uLlxyXG4gICAgICogICAgICBTZWUge0BsaW5rICNvdmVycmlkaW5nLXRoZS1kZWZhdWx0LXRyYW5zZm9ybWF0aW9ucy1wZXItcmVxdWVzdCBPdmVycmlkaW5nIHRoZSBEZWZhdWx0IFRyYW5zZm9ybWF0aW9uc31cclxuICAgICAqICAgIC0gKip0cmFuc2Zvcm1SZXNwb25zZSoqIOKAk1xyXG4gICAgICogICAgICBge2Z1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpfEFycmF5LjxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKT59YCDigJNcclxuICAgICAqICAgICAgdHJhbnNmb3JtIGZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIHN1Y2ggZnVuY3Rpb25zLiBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHRha2VzIHRoZSBodHRwXHJcbiAgICAgKiAgICAgIHJlc3BvbnNlIGJvZHkgYW5kIGhlYWRlcnMgYW5kIHJldHVybnMgaXRzIHRyYW5zZm9ybWVkICh0eXBpY2FsbHkgZGVzZXJpYWxpemVkKSB2ZXJzaW9uLlxyXG4gICAgICogICAgICBTZWUge0BsaW5rICNvdmVycmlkaW5nLXRoZS1kZWZhdWx0LXRyYW5zZm9ybWF0aW9ucy1wZXItcmVxdWVzdCBPdmVycmlkaW5nIHRoZSBEZWZhdWx0IFRyYW5zZm9ybWF0aW9uc31cclxuICAgICAqICAgIC0gKipjYWNoZSoqIOKAkyBge2Jvb2xlYW58Q2FjaGV9YCDigJMgSWYgdHJ1ZSwgYSBkZWZhdWx0ICRodHRwIGNhY2hlIHdpbGwgYmUgdXNlZCB0byBjYWNoZSB0aGVcclxuICAgICAqICAgICAgR0VUIHJlcXVlc3QsIG90aGVyd2lzZSBpZiBhIGNhY2hlIGluc3RhbmNlIGJ1aWx0IHdpdGhcclxuICAgICAqICAgICAge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgJGNhY2hlRmFjdG9yeX0sIHRoaXMgY2FjaGUgd2lsbCBiZSB1c2VkIGZvclxyXG4gICAgICogICAgICBjYWNoaW5nLlxyXG4gICAgICogICAgLSAqKnRpbWVvdXQqKiDigJMgYHtudW1iZXJ8UHJvbWlzZX1gIOKAkyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcywgb3Ige0BsaW5rIG5nLiRxIHByb21pc2V9XHJcbiAgICAgKiAgICAgIHRoYXQgc2hvdWxkIGFib3J0IHRoZSByZXF1ZXN0IHdoZW4gcmVzb2x2ZWQuXHJcbiAgICAgKiAgICAtICoqd2l0aENyZWRlbnRpYWxzKiogLSBge2Jvb2xlYW59YCAtIHdoZXRoZXIgdG8gc2V0IHRoZSBgd2l0aENyZWRlbnRpYWxzYCBmbGFnIG9uIHRoZVxyXG4gICAgICogICAgICBYSFIgb2JqZWN0LiBTZWUgW3JlcXVlc3RzIHdpdGggY3JlZGVudGlhbHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0hUVFAvQWNjZXNzX2NvbnRyb2xfQ09SUyNSZXF1ZXN0c193aXRoX2NyZWRlbnRpYWxzKVxyXG4gICAgICogICAgICBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuICAgICAqICAgIC0gKipyZXNwb25zZVR5cGUqKiAtIGB7c3RyaW5nfWAgLSBzZWVcclxuICAgICAqICAgICAgW3JlcXVlc3RUeXBlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9YTUxIdHRwUmVxdWVzdCNyZXNwb25zZVR5cGUpLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gUmV0dXJucyBhIHtAbGluayBuZy4kcSBwcm9taXNlfSBvYmplY3Qgd2l0aCB0aGVcclxuICAgICAqICAgc3RhbmRhcmQgYHRoZW5gIG1ldGhvZCBhbmQgdHdvIGh0dHAgc3BlY2lmaWMgbWV0aG9kczogYHN1Y2Nlc3NgIGFuZCBgZXJyb3JgLiBUaGUgYHRoZW5gXHJcbiAgICAgKiAgIG1ldGhvZCB0YWtlcyB0d28gYXJndW1lbnRzIGEgc3VjY2VzcyBhbmQgYW4gZXJyb3IgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2l0aCBhXHJcbiAgICAgKiAgIHJlc3BvbnNlIG9iamVjdC4gVGhlIGBzdWNjZXNzYCBhbmQgYGVycm9yYCBtZXRob2RzIHRha2UgYSBzaW5nbGUgYXJndW1lbnQgLSBhIGZ1bmN0aW9uIHRoYXRcclxuICAgICAqICAgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgcmVxdWVzdCBzdWNjZWVkcyBvciBmYWlscyByZXNwZWN0aXZlbHkuIFRoZSBhcmd1bWVudHMgcGFzc2VkIGludG9cclxuICAgICAqICAgdGhlc2UgZnVuY3Rpb25zIGFyZSBkZXN0cnVjdHVyZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlc3BvbnNlIG9iamVjdCBwYXNzZWQgaW50byB0aGVcclxuICAgICAqICAgYHRoZW5gIG1ldGhvZC4gVGhlIHJlc3BvbnNlIG9iamVjdCBoYXMgdGhlc2UgcHJvcGVydGllczpcclxuICAgICAqXHJcbiAgICAgKiAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBUaGUgcmVzcG9uc2UgYm9keSB0cmFuc2Zvcm1lZCB3aXRoIHRoZSB0cmFuc2Zvcm1cclxuICAgICAqICAgICBmdW5jdGlvbnMuXHJcbiAgICAgKiAgIC0gKipzdGF0dXMqKiDigJMgYHtudW1iZXJ9YCDigJMgSFRUUCBzdGF0dXMgY29kZSBvZiB0aGUgcmVzcG9uc2UuXHJcbiAgICAgKiAgIC0gKipoZWFkZXJzKiog4oCTIGB7ZnVuY3Rpb24oW2hlYWRlck5hbWVdKX1gIOKAkyBIZWFkZXIgZ2V0dGVyIGZ1bmN0aW9uLlxyXG4gICAgICogICAtICoqY29uZmlnKiog4oCTIGB7T2JqZWN0fWAg4oCTIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCB0aGF0IHdhcyB1c2VkIHRvIGdlbmVyYXRlIHRoZSByZXF1ZXN0LlxyXG4gICAgICogICAtICoqc3RhdHVzVGV4dCoqIOKAkyBge3N0cmluZ31gIOKAkyBIVFRQIHN0YXR1cyB0ZXh0IG9mIHRoZSByZXNwb25zZS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJvcGVydHkge0FycmF5LjxPYmplY3Q+fSBwZW5kaW5nUmVxdWVzdHMgQXJyYXkgb2YgY29uZmlnIG9iamVjdHMgZm9yIGN1cnJlbnRseSBwZW5kaW5nXHJcbiAgICAgKiAgIHJlcXVlc3RzLiBUaGlzIGlzIHByaW1hcmlseSBtZWFudCB0byBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbjxleGFtcGxlIG1vZHVsZT1cImh0dHBFeGFtcGxlXCI+XHJcbjxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgPGRpdiBuZy1jb250cm9sbGVyPVwiRmV0Y2hDb250cm9sbGVyXCI+XHJcbiAgICA8c2VsZWN0IG5nLW1vZGVsPVwibWV0aG9kXCI+XHJcbiAgICAgIDxvcHRpb24+R0VUPC9vcHRpb24+XHJcbiAgICAgIDxvcHRpb24+SlNPTlA8L29wdGlvbj5cclxuICAgIDwvc2VsZWN0PlxyXG4gICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1cmxcIiBzaXplPVwiODBcIi8+XHJcbiAgICA8YnV0dG9uIGlkPVwiZmV0Y2hidG5cIiBuZy1jbGljaz1cImZldGNoKClcIj5mZXRjaDwvYnV0dG9uPjxicj5cclxuICAgIDxidXR0b24gaWQ9XCJzYW1wbGVnZXRidG5cIiBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdHRVQnLCAnaHR0cC1oZWxsby5odG1sJylcIj5TYW1wbGUgR0VUPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGlkPVwic2FtcGxlanNvbnBidG5cIlxyXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vYW5ndWxhcmpzLm9yZy9ncmVldC5waHA/Y2FsbGJhY2s9SlNPTl9DQUxMQkFDSyZuYW1lPVN1cGVyJTIwSGVybycpXCI+XHJcbiAgICAgIFNhbXBsZSBKU09OUFxyXG4gICAgPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGlkPVwiaW52YWxpZGpzb25wYnRuXCJcclxuICAgICAgbmctY2xpY2s9XCJ1cGRhdGVNb2RlbCgnSlNPTlAnLCAnaHR0cHM6Ly9hbmd1bGFyanMub3JnL2RvZXNudGV4aXN0JmNhbGxiYWNrPUpTT05fQ0FMTEJBQ0snKVwiPlxyXG4gICAgICAgIEludmFsaWQgSlNPTlBcclxuICAgICAgPC9idXR0b24+XHJcbiAgICA8cHJlPmh0dHAgc3RhdHVzIGNvZGU6IHt7c3RhdHVzfX08L3ByZT5cclxuICAgIDxwcmU+aHR0cCByZXNwb25zZSBkYXRhOiB7e2RhdGF9fTwvcHJlPlxyXG4gIDwvZGl2PlxyXG48L2ZpbGU+XHJcbjxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICBhbmd1bGFyLm1vZHVsZSgnaHR0cEV4YW1wbGUnLCBbXSlcclxuICAgIC5jb250cm9sbGVyKCdGZXRjaENvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsXHJcbiAgICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICR0ZW1wbGF0ZUNhY2hlKSB7XHJcbiAgICAgICAgJHNjb3BlLm1ldGhvZCA9ICdHRVQnO1xyXG4gICAgICAgICRzY29wZS51cmwgPSAnaHR0cC1oZWxsby5odG1sJztcclxuXHJcbiAgICAgICAgJHNjb3BlLmZldGNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkc2NvcGUuY29kZSA9IG51bGw7XHJcbiAgICAgICAgICAkc2NvcGUucmVzcG9uc2UgPSBudWxsO1xyXG5cclxuICAgICAgICAgICRodHRwKHttZXRob2Q6ICRzY29wZS5tZXRob2QsIHVybDogJHNjb3BlLnVybCwgY2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuXHJcbiAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHN0YXR1cztcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIH0pLlxyXG4gICAgICAgICAgICBlcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IGRhdGEgfHwgXCJSZXF1ZXN0IGZhaWxlZFwiO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbihtZXRob2QsIHVybCkge1xyXG4gICAgICAgICAgJHNjb3BlLm1ldGhvZCA9IG1ldGhvZDtcclxuICAgICAgICAgICRzY29wZS51cmwgPSB1cmw7XHJcbiAgICAgICAgfTtcclxuICAgICAgfV0pO1xyXG48L2ZpbGU+XHJcbjxmaWxlIG5hbWU9XCJodHRwLWhlbGxvLmh0bWxcIj5cclxuICBIZWxsbywgJGh0dHAhXHJcbjwvZmlsZT5cclxuPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gIHZhciBzdGF0dXMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3N0YXR1cycpKTtcclxuICB2YXIgZGF0YSA9IGVsZW1lbnQoYnkuYmluZGluZygnZGF0YScpKTtcclxuICB2YXIgZmV0Y2hCdG4gPSBlbGVtZW50KGJ5LmlkKCdmZXRjaGJ0bicpKTtcclxuICB2YXIgc2FtcGxlR2V0QnRuID0gZWxlbWVudChieS5pZCgnc2FtcGxlZ2V0YnRuJykpO1xyXG4gIHZhciBzYW1wbGVKc29ucEJ0biA9IGVsZW1lbnQoYnkuaWQoJ3NhbXBsZWpzb25wYnRuJykpO1xyXG4gIHZhciBpbnZhbGlkSnNvbnBCdG4gPSBlbGVtZW50KGJ5LmlkKCdpbnZhbGlkanNvbnBidG4nKSk7XHJcblxyXG4gIGl0KCdzaG91bGQgbWFrZSBhbiB4aHIgR0VUIHJlcXVlc3QnLCBmdW5jdGlvbigpIHtcclxuICAgIHNhbXBsZUdldEJ0bi5jbGljaygpO1xyXG4gICAgZmV0Y2hCdG4uY2xpY2soKTtcclxuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcyMDAnKTtcclxuICAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgvSGVsbG8sIFxcJGh0dHAhLyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgbWFrZSBhIEpTT05QIHJlcXVlc3QgdG8gYW5ndWxhcmpzLm9yZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgc2FtcGxlSnNvbnBCdG4uY2xpY2soKTtcclxuICAgIGZldGNoQnRuLmNsaWNrKCk7XHJcbiAgICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMjAwJyk7XHJcbiAgICBleHBlY3QoZGF0YS5nZXRUZXh0KCkpLnRvTWF0Y2goL1N1cGVyIEhlcm8hLyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgbWFrZSBKU09OUCByZXF1ZXN0IHRvIGludmFsaWQgVVJMIGFuZCBpbnZva2UgdGhlIGVycm9yIGhhbmRsZXInLFxyXG4gICAgICBmdW5jdGlvbigpIHtcclxuICAgIGludmFsaWRKc29ucEJ0bi5jbGljaygpO1xyXG4gICAgZmV0Y2hCdG4uY2xpY2soKTtcclxuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcwJyk7XHJcbiAgICBleHBlY3QoZGF0YS5nZXRUZXh0KCkpLnRvTWF0Y2goJ1JlcXVlc3QgZmFpbGVkJyk7XHJcbiAgfSk7XHJcbjwvZmlsZT5cclxuPC9leGFtcGxlPlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAkaHR0cChyZXF1ZXN0Q29uZmlnKSB7XHJcbiAgICAgIHZhciBjb25maWcgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnZ2V0JyxcclxuICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0LFxyXG4gICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBkZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZVxyXG4gICAgICB9O1xyXG4gICAgICB2YXIgaGVhZGVycyA9IG1lcmdlSGVhZGVycyhyZXF1ZXN0Q29uZmlnKTtcclxuXHJcbiAgICAgIGV4dGVuZChjb25maWcsIHJlcXVlc3RDb25maWcpO1xyXG4gICAgICBjb25maWcuaGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICAgIGNvbmZpZy5tZXRob2QgPSB1cHBlcmNhc2UoY29uZmlnLm1ldGhvZCk7XHJcblxyXG4gICAgICB2YXIgc2VydmVyUmVxdWVzdCA9IGZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgICAgIGhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICAgICAgICB2YXIgcmVxRGF0YSA9IHRyYW5zZm9ybURhdGEoY29uZmlnLmRhdGEsIGhlYWRlcnNHZXR0ZXIoaGVhZGVycyksIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0KTtcclxuXHJcbiAgICAgICAgLy8gc3RyaXAgY29udGVudC10eXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXHJcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHJlcURhdGEpKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBoZWFkZXIpIHtcclxuICAgICAgICAgICAgaWYgKGxvd2VyY2FzZShoZWFkZXIpID09PSAnY29udGVudC10eXBlJykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbaGVhZGVyXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQoY29uZmlnLndpdGhDcmVkZW50aWFscykgJiYgIWlzVW5kZWZpbmVkKGRlZmF1bHRzLndpdGhDcmVkZW50aWFscykpIHtcclxuICAgICAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgPSBkZWZhdWx0cy53aXRoQ3JlZGVudGlhbHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZW5kIHJlcXVlc3RcclxuICAgICAgICByZXR1cm4gc2VuZFJlcShjb25maWcsIHJlcURhdGEsIGhlYWRlcnMpLnRoZW4odHJhbnNmb3JtUmVzcG9uc2UsIHRyYW5zZm9ybVJlc3BvbnNlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBjaGFpbiA9IFtzZXJ2ZXJSZXF1ZXN0LCB1bmRlZmluZWRdO1xyXG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLndoZW4oY29uZmlnKTtcclxuXHJcbiAgICAgIC8vIGFwcGx5IGludGVyY2VwdG9yc1xyXG4gICAgICBmb3JFYWNoKHJldmVyc2VkSW50ZXJjZXB0b3JzLCBmdW5jdGlvbihpbnRlcmNlcHRvcikge1xyXG4gICAgICAgIGlmIChpbnRlcmNlcHRvci5yZXF1ZXN0IHx8IGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcikge1xyXG4gICAgICAgICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5yZXF1ZXN0LCBpbnRlcmNlcHRvci5yZXF1ZXN0RXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW50ZXJjZXB0b3IucmVzcG9uc2UgfHwgaW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcikge1xyXG4gICAgICAgICAgY2hhaW4ucHVzaChpbnRlcmNlcHRvci5yZXNwb25zZSwgaW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHdoaWxlKGNoYWluLmxlbmd0aCkge1xyXG4gICAgICAgIHZhciB0aGVuRm4gPSBjaGFpbi5zaGlmdCgpO1xyXG4gICAgICAgIHZhciByZWplY3RGbiA9IGNoYWluLnNoaWZ0KCk7XHJcblxyXG4gICAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4odGhlbkZuLCByZWplY3RGbik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHByb21pc2Uuc3VjY2VzcyA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICBmbihyZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmhlYWRlcnMsIGNvbmZpZyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBwcm9taXNlLmVycm9yID0gZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICBwcm9taXNlLnRoZW4obnVsbCwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgIGZuKHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UuaGVhZGVycywgY29uZmlnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiBwcm9taXNlO1xyXG5cclxuICAgICAgZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgICAgICAvLyBtYWtlIGEgY29weSBzaW5jZSB0aGUgcmVzcG9uc2UgbXVzdCBiZSBjYWNoZWFibGVcclxuICAgICAgICB2YXIgcmVzcCA9IGV4dGVuZCh7fSwgcmVzcG9uc2UsIHtcclxuICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybURhdGEocmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UuaGVhZGVycywgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAoaXNTdWNjZXNzKHJlc3BvbnNlLnN0YXR1cykpXHJcbiAgICAgICAgICA/IHJlc3BcclxuICAgICAgICAgIDogJHEucmVqZWN0KHJlc3ApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBtZXJnZUhlYWRlcnMoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIGRlZkhlYWRlcnMgPSBkZWZhdWx0cy5oZWFkZXJzLFxyXG4gICAgICAgICAgICByZXFIZWFkZXJzID0gZXh0ZW5kKHt9LCBjb25maWcuaGVhZGVycyksXHJcbiAgICAgICAgICAgIGRlZkhlYWRlck5hbWUsIGxvd2VyY2FzZURlZkhlYWRlck5hbWUsIHJlcUhlYWRlck5hbWU7XHJcblxyXG4gICAgICAgIGRlZkhlYWRlcnMgPSBleHRlbmQoe30sIGRlZkhlYWRlcnMuY29tbW9uLCBkZWZIZWFkZXJzW2xvd2VyY2FzZShjb25maWcubWV0aG9kKV0pO1xyXG5cclxuICAgICAgICAvLyB1c2luZyBmb3ItaW4gaW5zdGVhZCBvZiBmb3JFYWNoIHRvIGF2b2lkIHVuZWNlc3NhcnkgaXRlcmF0aW9uIGFmdGVyIGhlYWRlciBoYXMgYmVlbiBmb3VuZFxyXG4gICAgICAgIGRlZmF1bHRIZWFkZXJzSXRlcmF0aW9uOlxyXG4gICAgICAgIGZvciAoZGVmSGVhZGVyTmFtZSBpbiBkZWZIZWFkZXJzKSB7XHJcbiAgICAgICAgICBsb3dlcmNhc2VEZWZIZWFkZXJOYW1lID0gbG93ZXJjYXNlKGRlZkhlYWRlck5hbWUpO1xyXG5cclxuICAgICAgICAgIGZvciAocmVxSGVhZGVyTmFtZSBpbiByZXFIZWFkZXJzKSB7XHJcbiAgICAgICAgICAgIGlmIChsb3dlcmNhc2UocmVxSGVhZGVyTmFtZSkgPT09IGxvd2VyY2FzZURlZkhlYWRlck5hbWUpIHtcclxuICAgICAgICAgICAgICBjb250aW51ZSBkZWZhdWx0SGVhZGVyc0l0ZXJhdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJlcUhlYWRlcnNbZGVmSGVhZGVyTmFtZV0gPSBkZWZIZWFkZXJzW2RlZkhlYWRlck5hbWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZXhlY3V0ZSBpZiBoZWFkZXIgdmFsdWUgaXMgYSBmdW5jdGlvbiBmb3IgbWVyZ2VkIGhlYWRlcnNcclxuICAgICAgICBleGVjSGVhZGVycyhyZXFIZWFkZXJzKTtcclxuICAgICAgICByZXR1cm4gcmVxSGVhZGVycztcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhlY0hlYWRlcnMoaGVhZGVycykge1xyXG4gICAgICAgICAgdmFyIGhlYWRlckNvbnRlbnQ7XHJcblxyXG4gICAgICAgICAgZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbihoZWFkZXJGbiwgaGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGhlYWRlckZuKSkge1xyXG4gICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQgPSBoZWFkZXJGbigpO1xyXG4gICAgICAgICAgICAgIGlmIChoZWFkZXJDb250ZW50ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnNbaGVhZGVyXSA9IGhlYWRlckNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBoZWFkZXJzW2hlYWRlcl07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAkaHR0cC5wZW5kaW5nUmVxdWVzdHMgPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRodHRwI2dldFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYEdFVGAgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaHR0cCNkZWxldGVcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBERUxFVEVgIHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJGh0dHAjaGVhZFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYEhFQURgIHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJGh0dHAjanNvbnBcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBKU09OUGAgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdC5cclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIGNhbGxiYWNrIHNob3VsZCBiZSB0aGUgc3RyaW5nIGBKU09OX0NBTExCQUNLYC5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcclxuICAgICAqL1xyXG4gICAgY3JlYXRlU2hvcnRNZXRob2RzKCdnZXQnLCAnZGVsZXRlJywgJ2hlYWQnLCAnanNvbnAnKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRodHRwI3Bvc3RcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBQT1NUYCByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XHJcbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRodHRwI3B1dFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBVVGAgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHsqfSBkYXRhIFJlcXVlc3QgY29udGVudFxyXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxyXG4gICAgICovXHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgKiBAbmFtZSAkaHR0cCNwYXRjaFxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBBVENIYCByZXF1ZXN0LlxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcclxuICAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XHJcbiAgICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcclxuICAgICAgKi9cclxuICAgIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKCdwb3N0JywgJ3B1dCcsICdwYXRjaCcpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgcHJvcGVydHlcclxuICAgICAgICAgKiBAbmFtZSAkaHR0cCNkZWZhdWx0c1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUnVudGltZSBlcXVpdmFsZW50IG9mIHRoZSBgJGh0dHBQcm92aWRlci5kZWZhdWx0c2AgcHJvcGVydHkuIEFsbG93cyBjb25maWd1cmF0aW9uIG9mXHJcbiAgICAgICAgICogZGVmYXVsdCBoZWFkZXJzLCB3aXRoQ3JlZGVudGlhbHMgYXMgd2VsbCBhcyByZXF1ZXN0IGFuZCByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBTZWUgXCJTZXR0aW5nIEhUVFAgSGVhZGVyc1wiIGFuZCBcIlRyYW5zZm9ybWluZyBSZXF1ZXN0cyBhbmQgUmVzcG9uc2VzXCIgc2VjdGlvbnMgYWJvdmUuXHJcbiAgICAgICAgICovXHJcbiAgICAkaHR0cC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xyXG5cclxuXHJcbiAgICByZXR1cm4gJGh0dHA7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kcyhuYW1lcykge1xyXG4gICAgICBmb3JFYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICRodHRwW25hbWVdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcclxuICAgICAgICAgIHJldHVybiAkaHR0cChleHRlbmQoY29uZmlnIHx8IHt9LCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogbmFtZSxcclxuICAgICAgICAgICAgdXJsOiB1cmxcclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU2hvcnRNZXRob2RzV2l0aERhdGEobmFtZSkge1xyXG4gICAgICBmb3JFYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICRodHRwW25hbWVdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcclxuICAgICAgICAgIHJldHVybiAkaHR0cChleHRlbmQoY29uZmlnIHx8IHt9LCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogbmFtZSxcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWtlcyB0aGUgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiAhISEgQUNDRVNTRVMgQ0xPU1VSRSBWQVJTOlxyXG4gICAgICogJGh0dHBCYWNrZW5kLCBkZWZhdWx0cywgJGxvZywgJHJvb3RTY29wZSwgZGVmYXVsdENhY2hlLCAkaHR0cC5wZW5kaW5nUmVxdWVzdHNcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2VuZFJlcShjb25maWcsIHJlcURhdGEsIHJlcUhlYWRlcnMpIHtcclxuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKSxcclxuICAgICAgICAgIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlLFxyXG4gICAgICAgICAgY2FjaGUsXHJcbiAgICAgICAgICBjYWNoZWRSZXNwLFxyXG4gICAgICAgICAgdXJsID0gYnVpbGRVcmwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcyk7XHJcblxyXG4gICAgICAkaHR0cC5wZW5kaW5nUmVxdWVzdHMucHVzaChjb25maWcpO1xyXG4gICAgICBwcm9taXNlLnRoZW4ocmVtb3ZlUGVuZGluZ1JlcSwgcmVtb3ZlUGVuZGluZ1JlcSk7XHJcblxyXG5cclxuICAgICAgaWYgKChjb25maWcuY2FjaGUgfHwgZGVmYXVsdHMuY2FjaGUpICYmIGNvbmZpZy5jYWNoZSAhPT0gZmFsc2UgJiZcclxuICAgICAgICAgIChjb25maWcubWV0aG9kID09PSAnR0VUJyB8fCBjb25maWcubWV0aG9kID09PSAnSlNPTlAnKSkge1xyXG4gICAgICAgIGNhY2hlID0gaXNPYmplY3QoY29uZmlnLmNhY2hlKSA/IGNvbmZpZy5jYWNoZVxyXG4gICAgICAgICAgICAgIDogaXNPYmplY3QoZGVmYXVsdHMuY2FjaGUpID8gZGVmYXVsdHMuY2FjaGVcclxuICAgICAgICAgICAgICA6IGRlZmF1bHRDYWNoZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNhY2hlKSB7XHJcbiAgICAgICAgY2FjaGVkUmVzcCA9IGNhY2hlLmdldCh1cmwpO1xyXG4gICAgICAgIGlmIChpc0RlZmluZWQoY2FjaGVkUmVzcCkpIHtcclxuICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKGNhY2hlZFJlc3ApKSB7XHJcbiAgICAgICAgICAgIC8vIGNhY2hlZCByZXF1ZXN0IGhhcyBhbHJlYWR5IGJlZW4gc2VudCwgYnV0IHRoZXJlIGlzIG5vIHJlc3BvbnNlIHlldFxyXG4gICAgICAgICAgICBjYWNoZWRSZXNwLnRoZW4ocmVtb3ZlUGVuZGluZ1JlcSwgcmVtb3ZlUGVuZGluZ1JlcSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRSZXNwO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2VydmluZyBmcm9tIGNhY2hlXHJcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGNhY2hlZFJlc3ApKSB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcFsxXSwgY2FjaGVkUmVzcFswXSwgc2hhbGxvd0NvcHkoY2FjaGVkUmVzcFsyXSksIGNhY2hlZFJlc3BbM10pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKGNhY2hlZFJlc3AsIDIwMCwge30sICdPSycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIHB1dCB0aGUgcHJvbWlzZSBmb3IgdGhlIG5vbi10cmFuc2Zvcm1lZCByZXNwb25zZSBpbnRvIGNhY2hlIGFzIGEgcGxhY2Vob2xkZXJcclxuICAgICAgICAgIGNhY2hlLnB1dCh1cmwsIHByb21pc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8vIGlmIHdlIHdvbid0IGhhdmUgdGhlIHJlc3BvbnNlIGluIGNhY2hlLCBzZXQgdGhlIHhzcmYgaGVhZGVycyBhbmRcclxuICAgICAgLy8gc2VuZCB0aGUgcmVxdWVzdCB0byB0aGUgYmFja2VuZFxyXG4gICAgICBpZiAoaXNVbmRlZmluZWQoY2FjaGVkUmVzcCkpIHtcclxuICAgICAgICB2YXIgeHNyZlZhbHVlID0gdXJsSXNTYW1lT3JpZ2luKGNvbmZpZy51cmwpXHJcbiAgICAgICAgICAgID8gJGJyb3dzZXIuY29va2llcygpW2NvbmZpZy54c3JmQ29va2llTmFtZSB8fCBkZWZhdWx0cy54c3JmQ29va2llTmFtZV1cclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKHhzcmZWYWx1ZSkge1xyXG4gICAgICAgICAgcmVxSGVhZGVyc1soY29uZmlnLnhzcmZIZWFkZXJOYW1lIHx8IGRlZmF1bHRzLnhzcmZIZWFkZXJOYW1lKV0gPSB4c3JmVmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkaHR0cEJhY2tlbmQoY29uZmlnLm1ldGhvZCwgdXJsLCByZXFEYXRhLCBkb25lLCByZXFIZWFkZXJzLCBjb25maWcudGltZW91dCxcclxuICAgICAgICAgICAgY29uZmlnLndpdGhDcmVkZW50aWFscywgY29uZmlnLnJlc3BvbnNlVHlwZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBwcm9taXNlO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDYWxsYmFjayByZWdpc3RlcmVkIHRvICRodHRwQmFja2VuZCgpOlxyXG4gICAgICAgKiAgLSBjYWNoZXMgdGhlIHJlc3BvbnNlIGlmIGRlc2lyZWRcclxuICAgICAgICogIC0gcmVzb2x2ZXMgdGhlIHJhdyAkaHR0cCBwcm9taXNlXHJcbiAgICAgICAqICAtIGNhbGxzICRhcHBseVxyXG4gICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gZG9uZShzdGF0dXMsIHJlc3BvbnNlLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0KSB7XHJcbiAgICAgICAgaWYgKGNhY2hlKSB7XHJcbiAgICAgICAgICBpZiAoaXNTdWNjZXNzKHN0YXR1cykpIHtcclxuICAgICAgICAgICAgY2FjaGUucHV0KHVybCwgW3N0YXR1cywgcmVzcG9uc2UsIHBhcnNlSGVhZGVycyhoZWFkZXJzU3RyaW5nKSwgc3RhdHVzVGV4dF0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIHByb21pc2UgZnJvbSB0aGUgY2FjaGVcclxuICAgICAgICAgICAgY2FjaGUucmVtb3ZlKHVybCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlSHR0cFByb21pc2UoKSB7XHJcbiAgICAgICAgICByZXNvbHZlUHJvbWlzZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1c2VBcHBseUFzeW5jKSB7XHJcbiAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseUFzeW5jKHJlc29sdmVIdHRwUHJvbWlzZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc29sdmVIdHRwUHJvbWlzZSgpO1xyXG4gICAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlc29sdmVzIHRoZSByYXcgJGh0dHAgcHJvbWlzZS5cclxuICAgICAgICovXHJcbiAgICAgIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMsIHN0YXR1c1RleHQpIHtcclxuICAgICAgICAvLyBub3JtYWxpemUgaW50ZXJuYWwgc3RhdHVzZXMgdG8gMFxyXG4gICAgICAgIHN0YXR1cyA9IE1hdGgubWF4KHN0YXR1cywgMCk7XHJcblxyXG4gICAgICAgIChpc1N1Y2Nlc3Moc3RhdHVzKSA/IGRlZmVycmVkLnJlc29sdmUgOiBkZWZlcnJlZC5yZWplY3QpKHtcclxuICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXHJcbiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLFxyXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXHJcbiAgICAgICAgICBzdGF0dXNUZXh0IDogc3RhdHVzVGV4dFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgZnVuY3Rpb24gcmVtb3ZlUGVuZGluZ1JlcSgpIHtcclxuICAgICAgICB2YXIgaWR4ID0gJGh0dHAucGVuZGluZ1JlcXVlc3RzLmluZGV4T2YoY29uZmlnKTtcclxuICAgICAgICBpZiAoaWR4ICE9PSAtMSkgJGh0dHAucGVuZGluZ1JlcXVlc3RzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGJ1aWxkVXJsKHVybCwgcGFyYW1zKSB7XHJcbiAgICAgIGlmICghcGFyYW1zKSByZXR1cm4gdXJsO1xyXG4gICAgICB2YXIgcGFydHMgPSBbXTtcclxuICAgICAgZm9yRWFjaFNvcnRlZChwYXJhbXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgaXNVbmRlZmluZWQodmFsdWUpKSByZXR1cm47XHJcbiAgICAgICAgaWYgKCFpc0FycmF5KHZhbHVlKSkgdmFsdWUgPSBbdmFsdWVdO1xyXG5cclxuICAgICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICBpZiAoaXNPYmplY3QodikpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGF0ZSh2KSl7XHJcbiAgICAgICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB2ID0gdG9Kc29uKHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSkgKyAnPScgK1xyXG4gICAgICAgICAgICAgICAgICAgICBlbmNvZGVVcmlRdWVyeSh2KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZihwYXJ0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdXJsICs9ICgodXJsLmluZGV4T2YoJz8nKSA9PSAtMSkgPyAnPycgOiAnJicpICsgcGFydHMuam9pbignJicpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVhocihtZXRob2QpIHtcclxuICAgIC8vaWYgSUUgYW5kIHRoZSBtZXRob2QgaXMgbm90IFJGQzI2MTYgY29tcGxpYW50LCBvciBpZiBYTUxIdHRwUmVxdWVzdFxyXG4gICAgLy9pcyBub3QgYXZhaWxhYmxlLCB0cnkgZ2V0dGluZyBhbiBBY3RpdmVYT2JqZWN0LiBPdGhlcndpc2UsIHVzZSBYTUxIdHRwUmVxdWVzdFxyXG4gICAgLy9pZiBpdCBpcyBhdmFpbGFibGVcclxuICAgIGlmIChtc2llIDw9IDggJiYgKCFtZXRob2QubWF0Y2goL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pKSB8fFxyXG4gICAgICAhd2luZG93LlhNTEh0dHBSZXF1ZXN0KSkge1xyXG4gICAgICByZXR1cm4gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7XHJcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCkge1xyXG4gICAgICByZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRocm93IG1pbkVycignJGh0dHBCYWNrZW5kJykoJ25veGhyJywgXCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdC5cIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcclxuICogQHJlcXVpcmVzICR3aW5kb3dcclxuICogQHJlcXVpcmVzICRkb2N1bWVudFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogSFRUUCBiYWNrZW5kIHVzZWQgYnkgdGhlIHtAbGluayBuZy4kaHR0cCBzZXJ2aWNlfSB0aGF0IGRlbGVnYXRlcyB0b1xyXG4gKiBYTUxIdHRwUmVxdWVzdCBvYmplY3Qgb3IgSlNPTlAgYW5kIGRlYWxzIHdpdGggYnJvd3NlciBpbmNvbXBhdGliaWxpdGllcy5cclxuICpcclxuICogWW91IHNob3VsZCBuZXZlciBuZWVkIHRvIHVzZSB0aGlzIHNlcnZpY2UgZGlyZWN0bHksIGluc3RlYWQgdXNlIHRoZSBoaWdoZXItbGV2ZWwgYWJzdHJhY3Rpb25zOlxyXG4gKiB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IG9yIHtAbGluayBuZ1Jlc291cmNlLiRyZXNvdXJjZSAkcmVzb3VyY2V9LlxyXG4gKlxyXG4gKiBEdXJpbmcgdGVzdGluZyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIHN3YXBwZWQgd2l0aCB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCBtb2NrXHJcbiAqICRodHRwQmFja2VuZH0gd2hpY2ggY2FuIGJlIHRyYWluZWQgd2l0aCByZXNwb25zZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiAkSHR0cEJhY2tlbmRQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyR3aW5kb3cnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJGJyb3dzZXIsICR3aW5kb3csICRkb2N1bWVudCkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUh0dHBCYWNrZW5kKCRicm93c2VyLCBjcmVhdGVYaHIsICRicm93c2VyLmRlZmVyLCAkd2luZG93LmFuZ3VsYXIuY2FsbGJhY2tzLCAkZG9jdW1lbnRbMF0pO1xyXG4gIH1dO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVIdHRwQmFja2VuZCgkYnJvd3NlciwgY3JlYXRlWGhyLCAkYnJvd3NlckRlZmVyLCBjYWxsYmFja3MsIHJhd0RvY3VtZW50KSB7XHJcbiAgdmFyIEFCT1JURUQgPSAtMTtcclxuXHJcbiAgLy8gVE9ETyh2b2p0YSk6IGZpeCB0aGUgc2lnbmF0dXJlXHJcbiAgcmV0dXJuIGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBwb3N0LCBjYWxsYmFjaywgaGVhZGVycywgdGltZW91dCwgd2l0aENyZWRlbnRpYWxzLCByZXNwb25zZVR5cGUpIHtcclxuICAgIHZhciBzdGF0dXM7XHJcbiAgICAkYnJvd3Nlci4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50KCk7XHJcbiAgICB1cmwgPSB1cmwgfHwgJGJyb3dzZXIudXJsKCk7XHJcblxyXG4gICAgaWYgKGxvd2VyY2FzZShtZXRob2QpID09ICdqc29ucCcpIHtcclxuICAgICAgdmFyIGNhbGxiYWNrSWQgPSAnXycgKyAoY2FsbGJhY2tzLmNvdW50ZXIrKykudG9TdHJpbmcoMzYpO1xyXG4gICAgICBjYWxsYmFja3NbY2FsbGJhY2tJZF0gPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgY2FsbGJhY2tzW2NhbGxiYWNrSWRdLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIGNhbGxiYWNrc1tjYWxsYmFja0lkXS5jYWxsZWQgPSB0cnVlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGpzb25wRG9uZSA9IGpzb25wUmVxKHVybC5yZXBsYWNlKCdKU09OX0NBTExCQUNLJywgJ2FuZ3VsYXIuY2FsbGJhY2tzLicgKyBjYWxsYmFja0lkKSxcclxuICAgICAgICAgIGNhbGxiYWNrSWQsIGZ1bmN0aW9uKHN0YXR1cywgdGV4dCkge1xyXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgc3RhdHVzLCBjYWxsYmFja3NbY2FsbGJhY2tJZF0uZGF0YSwgXCJcIiwgdGV4dCk7XHJcbiAgICAgICAgY2FsbGJhY2tzW2NhbGxiYWNrSWRdID0gbm9vcDtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgdmFyIHhociA9IGNyZWF0ZVhocihtZXRob2QpO1xyXG5cclxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xyXG4gICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gSW4gSUU2IGFuZCA3LCB0aGlzIG1pZ2h0IGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IHdoZW4geGhyLnNlbmQgYmVsb3cgaXMgY2FsbGVkIGFuZCB0aGVcclxuICAgICAgLy8gcmVzcG9uc2UgaXMgaW4gdGhlIGNhY2hlLiB0aGUgcHJvbWlzZSBhcGkgd2lsbCBlbnN1cmUgdGhhdCB0byB0aGUgYXBwIGNvZGUgdGhlIGFwaSBpc1xyXG4gICAgICAvLyBhbHdheXMgYXN5bmNcclxuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIG9ucmVhZHlzdGF0ZWNoYW5nZSBtaWdodCBnZXQgY2FsbGVkIG11bHRpcGxlIHRpbWVzIHdpdGggcmVhZHlTdGF0ZSA9PT0gNCBvbiBtb2JpbGUgd2Via2l0IGNhdXNlZCBieVxyXG4gICAgICAgIC8vIHhocnMgdGhhdCBhcmUgcmVzb2x2ZWQgd2hpbGUgdGhlIGFwcCBpcyBpbiB0aGUgYmFja2dyb3VuZCAoc2VlICM1NDI2KS5cclxuICAgICAgICAvLyBzaW5jZSBjYWxsaW5nIGNvbXBsZXRlUmVxdWVzdCBzZXRzIHRoZSBgeGhyYCB2YXJpYWJsZSB0byBudWxsLCB3ZSBqdXN0IGNoZWNrIGlmIGl0J3Mgbm90IG51bGwgYmVmb3JlXHJcbiAgICAgICAgLy8gY29udGludWluZ1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gd2UgY2FuJ3Qgc2V0IHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgdG8gdW5kZWZpbmVkIG9yIGRlbGV0ZSBpdCBiZWNhdXNlIHRoYXQgYnJlYWtzIElFOCAobWV0aG9kPVBBVENIKSBhbmRcclxuICAgICAgICAvLyBTYWZhcmkgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgIGlmICh4aHIgJiYgeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xyXG4gICAgICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9IG51bGwsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBudWxsLFxyXG4gICAgICAgICAgICAgIHN0YXR1c1RleHQgPSAnJztcclxuXHJcbiAgICAgICAgICBpZihzdGF0dXMgIT09IEFCT1JURUQpIHtcclxuICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVzcG9uc2VUZXh0IGlzIHRoZSBvbGQtc2Nob29sIHdheSBvZiByZXRyaWV2aW5nIHJlc3BvbnNlIChzdXBwb3J0ZWQgYnkgSUU4ICYgOSlcclxuICAgICAgICAgICAgLy8gcmVzcG9uc2UvcmVzcG9uc2VUeXBlIHByb3BlcnRpZXMgd2VyZSBpbnRyb2R1Y2VkIGluIFhIUiBMZXZlbDIgc3BlYyAoc3VwcG9ydGVkIGJ5IElFMTApXHJcbiAgICAgICAgICAgIHJlc3BvbnNlID0gKCdyZXNwb25zZScgaW4geGhyKSA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQWNjZXNzaW5nIHN0YXR1c1RleHQgb24gYW4gYWJvcnRlZCB4aHIgb2JqZWN0IHdpbGxcclxuICAgICAgICAgIC8vIHRocm93IGFuICdjMDBjMDIzZiBlcnJvcicgaW4gSUU5IGFuZCBsb3dlciwgZG9uJ3QgdG91Y2ggaXQuXHJcbiAgICAgICAgICBpZiAoIShzdGF0dXMgPT09IEFCT1JURUQgJiYgbXNpZSA8IDEwKSkge1xyXG4gICAgICAgICAgICBzdGF0dXNUZXh0ID0geGhyLnN0YXR1c1RleHQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29tcGxldGVSZXF1ZXN0KGNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgIHN0YXR1cyB8fCB4aHIuc3RhdHVzLFxyXG4gICAgICAgICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVycyxcclxuICAgICAgICAgICAgICBzdGF0dXNUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAod2l0aENyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChyZXNwb25zZVR5cGUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAvLyBXZWJLaXQgYWRkZWQgc3VwcG9ydCBmb3IgdGhlIGpzb24gcmVzcG9uc2VUeXBlIHZhbHVlIG9uIDA5LzAzLzIwMTNcclxuICAgICAgICAgIC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD03MzY0OC4gVmVyc2lvbnMgb2YgU2FmYXJpIHByaW9yIHRvIDcgYXJlXHJcbiAgICAgICAgICAvLyBrbm93biB0byB0aHJvdyB3aGVuIHNldHRpbmcgdGhlIHZhbHVlIFwianNvblwiIGFzIHRoZSByZXNwb25zZSB0eXBlLiBPdGhlciBvbGRlclxyXG4gICAgICAgICAgLy8gYnJvd3NlcnMgaW1wbGVtZW50aW5nIHRoZSByZXNwb25zZVR5cGVcclxuICAgICAgICAgIC8vXHJcbiAgICAgICAgICAvLyBUaGUganNvbiByZXNwb25zZSB0eXBlIGNhbiBiZSBpZ25vcmVkIGlmIG5vdCBzdXBwb3J0ZWQsIGJlY2F1c2UgSlNPTiBwYXlsb2FkcyBhcmVcclxuICAgICAgICAgIC8vIHBhcnNlZCBvbiB0aGUgY2xpZW50LXNpZGUgcmVnYXJkbGVzcy5cclxuICAgICAgICAgIGlmIChyZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgeGhyLnNlbmQocG9zdCB8fCBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGltZW91dCA+IDApIHtcclxuICAgICAgdmFyIHRpbWVvdXRJZCA9ICRicm93c2VyRGVmZXIodGltZW91dFJlcXVlc3QsIHRpbWVvdXQpO1xyXG4gICAgfSBlbHNlIGlmIChpc1Byb21pc2VMaWtlKHRpbWVvdXQpKSB7XHJcbiAgICAgIHRpbWVvdXQudGhlbih0aW1lb3V0UmVxdWVzdCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHRpbWVvdXRSZXF1ZXN0KCkge1xyXG4gICAgICBzdGF0dXMgPSBBQk9SVEVEO1xyXG4gICAgICBqc29ucERvbmUgJiYganNvbnBEb25lKCk7XHJcbiAgICAgIHhociAmJiB4aHIuYWJvcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQpIHtcclxuICAgICAgLy8gY2FuY2VsIHRpbWVvdXQgYW5kIHN1YnNlcXVlbnQgdGltZW91dCBwcm9taXNlIHJlc29sdXRpb25cclxuICAgICAgdGltZW91dElkICYmICRicm93c2VyRGVmZXIuY2FuY2VsKHRpbWVvdXRJZCk7XHJcbiAgICAgIGpzb25wRG9uZSA9IHhociA9IG51bGw7XHJcblxyXG4gICAgICAvLyBmaXggc3RhdHVzIGNvZGUgd2hlbiBpdCBpcyAwICgwIHN0YXR1cyBpcyB1bmRvY3VtZW50ZWQpLlxyXG4gICAgICAvLyBPY2N1cnMgd2hlbiBhY2Nlc3NpbmcgZmlsZSByZXNvdXJjZXMgb3Igb24gQW5kcm9pZCA0LjEgc3RvY2sgYnJvd3NlclxyXG4gICAgICAvLyB3aGlsZSByZXRyaWV2aW5nIGZpbGVzIGZyb20gYXBwbGljYXRpb24gY2FjaGUuXHJcbiAgICAgIGlmIChzdGF0dXMgPT09IDApIHtcclxuICAgICAgICBzdGF0dXMgPSByZXNwb25zZSA/IDIwMCA6IHVybFJlc29sdmUodXJsKS5wcm90b2NvbCA9PSAnZmlsZScgPyA0MDQgOiAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBub3JtYWxpemUgSUUgYnVnIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xNDUwKVxyXG4gICAgICBzdGF0dXMgPSBzdGF0dXMgPT09IDEyMjMgPyAyMDQgOiBzdGF0dXM7XHJcbiAgICAgIHN0YXR1c1RleHQgPSBzdGF0dXNUZXh0IHx8ICcnO1xyXG5cclxuICAgICAgY2FsbGJhY2soc3RhdHVzLCByZXNwb25zZSwgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCk7XHJcbiAgICAgICRicm93c2VyLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Qobm9vcCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24ganNvbnBSZXEodXJsLCBjYWxsYmFja0lkLCBkb25lKSB7XHJcbiAgICAvLyB3ZSBjYW4ndCB1c2UgalF1ZXJ5L2pxTGl0ZSBoZXJlIGJlY2F1c2UgalF1ZXJ5IGRvZXMgY3Jhenkgc2hpdCB3aXRoIHNjcmlwdCBlbGVtZW50cywgZS5nLjpcclxuICAgIC8vIC0gZmV0Y2hlcyBsb2NhbCBzY3JpcHRzIHZpYSBYSFIgYW5kIGV2YWxzIHRoZW1cclxuICAgIC8vIC0gYWRkcyBhbmQgaW1tZWRpYXRlbHkgcmVtb3ZlcyBzY3JpcHQgZWxlbWVudHMgZnJvbSB0aGUgZG9jdW1lbnRcclxuICAgIHZhciBzY3JpcHQgPSByYXdEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSwgY2FsbGJhY2sgPSBudWxsO1xyXG4gICAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gICAgc2NyaXB0LnNyYyA9IHVybDtcclxuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcblxyXG4gICAgY2FsbGJhY2sgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyRm4oc2NyaXB0LCBcImxvYWRcIiwgY2FsbGJhY2spO1xyXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyRm4oc2NyaXB0LCBcImVycm9yXCIsIGNhbGxiYWNrKTtcclxuICAgICAgcmF3RG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xyXG4gICAgICBzY3JpcHQgPSBudWxsO1xyXG4gICAgICB2YXIgc3RhdHVzID0gLTE7XHJcbiAgICAgIHZhciB0ZXh0ID0gXCJ1bmtub3duXCI7XHJcblxyXG4gICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJsb2FkXCIgJiYgIWNhbGxiYWNrc1tjYWxsYmFja0lkXS5jYWxsZWQpIHtcclxuICAgICAgICAgIGV2ZW50ID0geyB0eXBlOiBcImVycm9yXCIgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGV4dCA9IGV2ZW50LnR5cGU7XHJcbiAgICAgICAgc3RhdHVzID0gZXZlbnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZG9uZSkge1xyXG4gICAgICAgIGRvbmUoc3RhdHVzLCB0ZXh0KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhZGRFdmVudExpc3RlbmVyRm4oc2NyaXB0LCBcImxvYWRcIiwgY2FsbGJhY2spO1xyXG4gICAgYWRkRXZlbnRMaXN0ZW5lckZuKHNjcmlwdCwgXCJlcnJvclwiLCBjYWxsYmFjayk7XHJcbiAgICByYXdEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICByZXR1cm4gY2FsbGJhY2s7XHJcbiAgfVxyXG59XHJcblxyXG52YXIgJGludGVycG9sYXRlTWluRXJyID0gbWluRXJyKCckaW50ZXJwb2xhdGUnKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHRoZSBpbnRlcnBvbGF0aW9uIG1hcmt1cC4gRGVmYXVsdHMgdG8gYHt7YCBhbmQgYH19YC5cclxuICpcclxuICogQGV4YW1wbGVcclxuPGV4YW1wbGUgbW9kdWxlPVwiY3VzdG9tSW50ZXJwb2xhdGlvbkFwcFwiPlxyXG48ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG48c2NyaXB0PlxyXG4gIHZhciBjdXN0b21JbnRlcnBvbGF0aW9uQXBwID0gYW5ndWxhci5tb2R1bGUoJ2N1c3RvbUludGVycG9sYXRpb25BcHAnLCBbXSk7XHJcblxyXG4gIGN1c3RvbUludGVycG9sYXRpb25BcHAuY29uZmlnKGZ1bmN0aW9uKCRpbnRlcnBvbGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5zdGFydFN5bWJvbCgnLy8nKTtcclxuICAgICRpbnRlcnBvbGF0ZVByb3ZpZGVyLmVuZFN5bWJvbCgnLy8nKTtcclxuICB9KTtcclxuXHJcblxyXG4gIGN1c3RvbUludGVycG9sYXRpb25BcHAuY29udHJvbGxlcignRGVtb0NvbnRyb2xsZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgdGhpcy5sYWJlbCA9IFwiVGhpcyBiaW5kaW5nIGlzIGJyb3VnaHQgeW91IGJ5IC8vIGludGVycG9sYXRpb24gc3ltYm9scy5cIjtcclxuICB9KTtcclxuPC9zY3JpcHQ+XHJcbjxkaXYgbmctYXBwPVwiQXBwXCIgbmctY29udHJvbGxlcj1cIkRlbW9Db250cm9sbGVyIGFzIGRlbW9cIj5cclxuICAgIC8vZGVtby5sYWJlbC8vXHJcbjwvZGl2PlxyXG48L2ZpbGU+XHJcbjxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICBpdCgnc2hvdWxkIGludGVycG9sYXRlIGJpbmRpbmcgd2l0aCBjdXN0b20gc3ltYm9scycsIGZ1bmN0aW9uKCkge1xyXG4gICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnZGVtby5sYWJlbCcpKS5nZXRUZXh0KCkpLnRvQmUoJ1RoaXMgYmluZGluZyBpcyBicm91Z2h0IHlvdSBieSAvLyBpbnRlcnBvbGF0aW9uIHN5bWJvbHMuJyk7XHJcbiAgfSk7XHJcbjwvZmlsZT5cclxuPC9leGFtcGxlPlxyXG4gKi9cclxuZnVuY3Rpb24gJEludGVycG9sYXRlUHJvdmlkZXIoKSB7XHJcbiAgdmFyIHN0YXJ0U3ltYm9sID0gJ3t7JztcclxuICB2YXIgZW5kU3ltYm9sID0gJ319JztcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRpbnRlcnBvbGF0ZVByb3ZpZGVyI3N0YXJ0U3ltYm9sXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU3ltYm9sIHRvIGRlbm90ZSBzdGFydCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBge3tgLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgdG8gc2V0IHRoZSBzdGFydGluZyBzeW1ib2wgdG8uXHJcbiAgICogQHJldHVybnMge3N0cmluZ3xzZWxmfSBSZXR1cm5zIHRoZSBzeW1ib2wgd2hlbiB1c2VkIGFzIGdldHRlciBhbmQgc2VsZiBpZiB1c2VkIGFzIHNldHRlci5cclxuICAgKi9cclxuICB0aGlzLnN0YXJ0U3ltYm9sID0gZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHN0YXJ0U3ltYm9sID0gdmFsdWU7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlciNlbmRTeW1ib2xcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTeW1ib2wgdG8gZGVub3RlIHRoZSBlbmQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYH19YC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdmFsdWUgbmV3IHZhbHVlIHRvIHNldCB0aGUgZW5kaW5nIHN5bWJvbCB0by5cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfHNlbGZ9IFJldHVybnMgdGhlIHN5bWJvbCB3aGVuIHVzZWQgYXMgZ2V0dGVyIGFuZCBzZWxmIGlmIHVzZWQgYXMgc2V0dGVyLlxyXG4gICAqL1xyXG4gIHRoaXMuZW5kU3ltYm9sID0gZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIGVuZFN5bWJvbCA9IHZhbHVlO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBlbmRTeW1ib2w7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJHBhcnNlJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyRzY2UnLCBmdW5jdGlvbigkcGFyc2UsICRleGNlcHRpb25IYW5kbGVyLCAkc2NlKSB7XHJcbiAgICB2YXIgc3RhcnRTeW1ib2xMZW5ndGggPSBzdGFydFN5bWJvbC5sZW5ndGgsXHJcbiAgICAgICAgZW5kU3ltYm9sTGVuZ3RoID0gZW5kU3ltYm9sLmxlbmd0aCxcclxuICAgICAgICBlc2NhcGVkU3RhcnRSZWdleHAgPSBuZXcgUmVnRXhwKHN0YXJ0U3ltYm9sLnJlcGxhY2UoLy4vZywgZXNjYXBlKSwgJ2cnKSxcclxuICAgICAgICBlc2NhcGVkRW5kUmVnZXhwID0gbmV3IFJlZ0V4cChlbmRTeW1ib2wucmVwbGFjZSgvLi9nLCBlc2NhcGUpLCAnZycpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGVzY2FwZShjaCkge1xyXG4gICAgICByZXR1cm4gJ1xcXFxcXFxcXFxcXCcgKyBjaDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgKiBAbmFtZSAkaW50ZXJwb2xhdGVcclxuICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHJlcXVpcmVzICRwYXJzZVxyXG4gICAgICogQHJlcXVpcmVzICRzY2VcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBDb21waWxlcyBhIHN0cmluZyB3aXRoIG1hcmt1cCBpbnRvIGFuIGludGVycG9sYXRpb24gZnVuY3Rpb24uIFRoaXMgc2VydmljZSBpcyB1c2VkIGJ5IHRoZVxyXG4gICAgICogSFRNTCB7QGxpbmsgbmcuJGNvbXBpbGUgJGNvbXBpbGV9IHNlcnZpY2UgZm9yIGRhdGEgYmluZGluZy4gU2VlXHJcbiAgICAgKiB7QGxpbmsgbmcuJGludGVycG9sYXRlUHJvdmlkZXIgJGludGVycG9sYXRlUHJvdmlkZXJ9IGZvciBjb25maWd1cmluZyB0aGVcclxuICAgICAqIGludGVycG9sYXRpb24gbWFya3VwLlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogICB2YXIgJGludGVycG9sYXRlID0gLi4uOyAvLyBpbmplY3RlZFxyXG4gICAgICogICB2YXIgZXhwID0gJGludGVycG9sYXRlKCdIZWxsbyB7e25hbWUgfCB1cHBlcmNhc2V9fSEnKTtcclxuICAgICAqICAgZXhwZWN0KGV4cCh7bmFtZTonQW5ndWxhcid9KS50b0VxdWFsKCdIZWxsbyBBTkdVTEFSIScpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogYCRpbnRlcnBvbGF0ZWAgdGFrZXMgYW4gb3B0aW9uYWwgZm91cnRoIGFyZ3VtZW50LCBgYWxsT3JOb3RoaW5nYC4gSWYgYGFsbE9yTm90aGluZ2AgaXNcclxuICAgICAqIGB0cnVlYCwgdGhlIGludGVycG9sYXRpb24gZnVuY3Rpb24gd2lsbCByZXR1cm4gYHVuZGVmaW5lZGAgdW5sZXNzIGFsbCBlbWJlZGRlZCBleHByZXNzaW9uc1xyXG4gICAgICogZXZhbHVhdGUgdG8gYSB2YWx1ZSBvdGhlciB0aGFuIGB1bmRlZmluZWRgLlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiAgIHZhciAkaW50ZXJwb2xhdGUgPSAuLi47IC8vIGluamVjdGVkXHJcbiAgICAgKiAgIHZhciBjb250ZXh0ID0ge2dyZWV0aW5nOiAnSGVsbG8nLCBuYW1lOiB1bmRlZmluZWQgfTtcclxuICAgICAqXHJcbiAgICAgKiAgIC8vIGRlZmF1bHQgXCJmb3JnaXZpbmdcIiBtb2RlXHJcbiAgICAgKiAgIHZhciBleHAgPSAkaW50ZXJwb2xhdGUoJ3t7Z3JlZXRpbmd9fSB7e25hbWV9fSEnKTtcclxuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9FcXVhbCgnSGVsbG8gIScpO1xyXG4gICAgICpcclxuICAgICAqICAgLy8gXCJhbGxPck5vdGhpbmdcIiBtb2RlXHJcbiAgICAgKiAgIGV4cCA9ICRpbnRlcnBvbGF0ZSgne3tncmVldGluZ319IHt7bmFtZX19IScsIGZhbHNlLCBudWxsLCB0cnVlKTtcclxuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICogICBjb250ZXh0Lm5hbWUgPSAnQW5ndWxhcic7XHJcbiAgICAgKiAgIGV4cGVjdChleHAoY29udGV4dCkpLnRvRXF1YWwoJ0hlbGxvIEFuZ3VsYXIhJyk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBgYWxsT3JOb3RoaW5nYCBpcyB1c2VmdWwgZm9yIGludGVycG9sYXRpbmcgVVJMcy4gYG5nU3JjYCBhbmQgYG5nU3Jjc2V0YCB1c2UgdGhpcyBiZWhhdmlvci5cclxuICAgICAqXHJcbiAgICAgKiAjIyMjRXNjYXBlZCBJbnRlcnBvbGF0aW9uXHJcbiAgICAgKiAkaW50ZXJwb2xhdGUgcHJvdmlkZXMgYSBtZWNoYW5pc20gZm9yIGVzY2FwaW5nIGludGVycG9sYXRpb24gbWFya2Vycy4gU3RhcnQgYW5kIGVuZCBtYXJrZXJzXHJcbiAgICAgKiBjYW4gYmUgZXNjYXBlZCBieSBwcmVjZWRpbmcgZWFjaCBvZiB0aGVpciBjaGFyYWN0ZXJzIHdpdGggYSBSRVZFUlNFIFNPTElEVVMgVSswMDVDIChiYWNrc2xhc2gpLlxyXG4gICAgICogSXQgd2lsbCBiZSByZW5kZXJlZCBhcyBhIHJlZ3VsYXIgc3RhcnQvZW5kIG1hcmtlciwgYW5kIHdpbGwgbm90IGJlIGludGVycHJldGVkIGFzIGFuIGV4cHJlc3Npb25cclxuICAgICAqIG9yIGJpbmRpbmcuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBlbmFibGVzIHdlYi1zZXJ2ZXJzIHRvIHByZXZlbnQgc2NyaXB0IGluamVjdGlvbiBhdHRhY2tzIGFuZCBkZWZhY2luZyBhdHRhY2tzLCB0byBzb21lXHJcbiAgICAgKiBkZWdyZWUsIHdoaWxlIGFsc28gZW5hYmxpbmcgY29kZSBleGFtcGxlcyB0byB3b3JrIHdpdGhvdXQgcmVseWluZyBvbiB0aGVcclxuICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdOb25CaW5kYWJsZSBuZ05vbkJpbmRhYmxlfSBkaXJlY3RpdmUuXHJcbiAgICAgKlxyXG4gICAgICogKipGb3Igc2VjdXJpdHkgcHVycG9zZXMsIGl0IGlzIHN0cm9uZ2x5IGVuY291cmFnZWQgdGhhdCB3ZWIgc2VydmVycyBlc2NhcGUgdXNlci1zdXBwbGllZCBkYXRhLFxyXG4gICAgICogcmVwbGFjaW5nIGFuZ2xlIGJyYWNrZXRzICgmbHQ7LCAmZ3Q7KSB3aXRoICZhbXA7bHQ7IGFuZCAmYW1wO2d0OyByZXNwZWN0aXZlbHksIGFuZCByZXBsYWNpbmcgYWxsXHJcbiAgICAgKiBpbnRlcnBvbGF0aW9uIHN0YXJ0L2VuZCBtYXJrZXJzIHdpdGggdGhlaXIgZXNjYXBlZCBjb3VudGVycGFydHMuKipcclxuICAgICAqXHJcbiAgICAgKiBFc2NhcGVkIGludGVycG9sYXRpb24gbWFya2VycyBhcmUgb25seSByZXBsYWNlZCB3aXRoIHRoZSBhY3R1YWwgaW50ZXJwb2xhdGlvbiBtYXJrZXJzIGluIHJlbmRlcmVkXHJcbiAgICAgKiBvdXRwdXQgd2hlbiB0aGUgJGludGVycG9sYXRlIHNlcnZpY2UgcHJvY2Vzc2VzIHRoZSB0ZXh0LiBTbywgZm9yIEhUTUwgZWxlbWVudHMgaW50ZXJwb2xhdGVkXHJcbiAgICAgKiBieSB7QGxpbmsgbmcuJGNvbXBpbGUgJGNvbXBpbGV9LCBvciBvdGhlcndpc2UgaW50ZXJwb2xhdGVkIHdpdGggdGhlIGBtdXN0SGF2ZUV4cHJlc3Npb25gIHBhcmFtZXRlclxyXG4gICAgICogc2V0IHRvIGB0cnVlYCwgdGhlIGludGVycG9sYXRlZCB0ZXh0IG11c3QgY29udGFpbiBhbiB1bmVzY2FwZWQgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uLiBBcyBzdWNoLFxyXG4gICAgICogdGhpcyBpcyB0eXBpY2FsbHkgdXNlZnVsIG9ubHkgd2hlbiB1c2VyLWRhdGEgaXMgdXNlZCBpbiByZW5kZXJpbmcgYSB0ZW1wbGF0ZSBmcm9tIHRoZSBzZXJ2ZXIsIG9yXHJcbiAgICAgKiB3aGVuIG90aGVyd2lzZSB1bnRydXN0ZWQgZGF0YSBpcyB1c2VkIGJ5IGEgZGlyZWN0aXZlLlxyXG4gICAgICpcclxuICAgICAqIDxleGFtcGxlPlxyXG4gICAgICogIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgKiAgICA8ZGl2IG5nLWluaXQ9XCJ1c2VybmFtZT0nQSB1c2VyJ1wiPlxyXG4gICAgICogICAgICA8cCBuZy1pbml0PVwiYXBwdGl0bGU9J0VzY2FwaW5nIGRlbW8nXCI+e3thcHB0aXRsZX19OiBcXHtcXHsgdXNlcm5hbWUgPSBcImRlZmFjZWQgdmFsdWVcIjsgXFx9XFx9XHJcbiAgICAgKiAgICAgICAgPC9wPlxyXG4gICAgICogICAgICA8cD48c3Ryb25nPnt7dXNlcm5hbWV9fTwvc3Ryb25nPiBhdHRlbXB0cyB0byBpbmplY3QgY29kZSB3aGljaCB3aWxsIGRlZmFjZSB0aGVcclxuICAgICAqICAgICAgICBhcHBsaWNhdGlvbiwgYnV0IGZhaWxzIHRvIGFjY29tcGxpc2ggdGhlaXIgdGFzaywgYmVjYXVzZSB0aGUgc2VydmVyIGhhcyBjb3JyZWN0bHlcclxuICAgICAqICAgICAgICBlc2NhcGVkIHRoZSBpbnRlcnBvbGF0aW9uIHN0YXJ0L2VuZCBtYXJrZXJzIHdpdGggUkVWRVJTRSBTT0xJRFVTIFUrMDA1QyAoYmFja3NsYXNoKVxyXG4gICAgICogICAgICAgIGNoYXJhY3RlcnMuPC9wPlxyXG4gICAgICogICAgICA8cD5JbnN0ZWFkLCB0aGUgcmVzdWx0IG9mIHRoZSBhdHRlbXB0ZWQgc2NyaXB0IGluamVjdGlvbiBpcyB2aXNpYmxlLCBhbmQgY2FuIGJlIHJlbW92ZWRcclxuICAgICAqICAgICAgICBmcm9tIHRoZSBkYXRhYmFzZSBieSBhbiBhZG1pbmlzdHJhdG9yLjwvcD5cclxuICAgICAqICAgIDwvZGl2PlxyXG4gICAgICogIDwvZmlsZT5cclxuICAgICAqIDwvZXhhbXBsZT5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB3aXRoIG1hcmt1cCB0byBpbnRlcnBvbGF0ZS5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG11c3RIYXZlRXhwcmVzc2lvbiBpZiBzZXQgdG8gdHJ1ZSB0aGVuIHRoZSBpbnRlcnBvbGF0aW9uIHN0cmluZyBtdXN0IGhhdmVcclxuICAgICAqICAgIGVtYmVkZGVkIGV4cHJlc3Npb24gaW4gb3JkZXIgdG8gcmV0dXJuIGFuIGludGVycG9sYXRpb24gZnVuY3Rpb24uIFN0cmluZ3Mgd2l0aCBub1xyXG4gICAgICogICAgZW1iZWRkZWQgZXhwcmVzc2lvbiB3aWxsIHJldHVybiBudWxsIGZvciB0aGUgaW50ZXJwb2xhdGlvbiBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gdHJ1c3RlZENvbnRleHQgd2hlbiBwcm92aWRlZCwgdGhlIHJldHVybmVkIGZ1bmN0aW9uIHBhc3NlcyB0aGUgaW50ZXJwb2xhdGVkXHJcbiAgICAgKiAgICByZXN1bHQgdGhyb3VnaCB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZChpbnRlcnBvbGF0ZWRSZXN1bHQsXHJcbiAgICAgKiAgICB0cnVzdGVkQ29udGV4dCl9IGJlZm9yZSByZXR1cm5pbmcgaXQuICBSZWZlciB0byB0aGUge0BsaW5rIG5nLiRzY2UgJHNjZX0gc2VydmljZSB0aGF0XHJcbiAgICAgKiAgICBwcm92aWRlcyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBmb3IgZGV0YWlscy5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IGFsbE9yTm90aGluZyBpZiBgdHJ1ZWAsIHRoZW4gdGhlIHJldHVybmVkIGZ1bmN0aW9uIHJldHVybnMgdW5kZWZpbmVkXHJcbiAgICAgKiAgICB1bmxlc3MgYWxsIGVtYmVkZGVkIGV4cHJlc3Npb25zIGV2YWx1YXRlIHRvIGEgdmFsdWUgb3RoZXIgdGhhbiBgdW5kZWZpbmVkYC5cclxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0KX0gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIGNvbXB1dGUgdGhlXHJcbiAgICAgKiAgICBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBUaGUgZnVuY3Rpb24gaGFzIHRoZXNlIHBhcmFtZXRlcnM6XHJcbiAgICAgKlxyXG4gICAgICogLSBgY29udGV4dGA6IGV2YWx1YXRpb24gY29udGV4dCBmb3IgYWxsIGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBpbnRlcnBvbGF0ZWQgdGV4dFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAkaW50ZXJwb2xhdGUodGV4dCwgbXVzdEhhdmVFeHByZXNzaW9uLCB0cnVzdGVkQ29udGV4dCwgYWxsT3JOb3RoaW5nKSB7XHJcbiAgICAgIGFsbE9yTm90aGluZyA9ICEhYWxsT3JOb3RoaW5nO1xyXG4gICAgICB2YXIgc3RhcnRJbmRleCxcclxuICAgICAgICAgIGVuZEluZGV4LFxyXG4gICAgICAgICAgaW5kZXggPSAwLFxyXG4gICAgICAgICAgZXhwcmVzc2lvbnMgPSBbXSxcclxuICAgICAgICAgIHBhcnNlRm5zID0gW10sXHJcbiAgICAgICAgICB0ZXh0TGVuZ3RoID0gdGV4dC5sZW5ndGgsXHJcbiAgICAgICAgICBleHAsXHJcbiAgICAgICAgICBjb25jYXQgPSBbXSxcclxuICAgICAgICAgIGV4cHJlc3Npb25Qb3NpdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgIHdoaWxlKGluZGV4IDwgdGV4dExlbmd0aCkge1xyXG4gICAgICAgIGlmICggKChzdGFydEluZGV4ID0gdGV4dC5pbmRleE9mKHN0YXJ0U3ltYm9sLCBpbmRleCkpICE9IC0xKSAmJlxyXG4gICAgICAgICAgICAgKChlbmRJbmRleCA9IHRleHQuaW5kZXhPZihlbmRTeW1ib2wsIHN0YXJ0SW5kZXggKyBzdGFydFN5bWJvbExlbmd0aCkpICE9IC0xKSApIHtcclxuICAgICAgICAgIGlmIChpbmRleCAhPT0gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgICBjb25jYXQucHVzaCh1bmVzY2FwZVRleHQodGV4dC5zdWJzdHJpbmcoaW5kZXgsIHN0YXJ0SW5kZXgpKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBleHAgPSB0ZXh0LnN1YnN0cmluZyhzdGFydEluZGV4ICsgc3RhcnRTeW1ib2xMZW5ndGgsIGVuZEluZGV4KTtcclxuICAgICAgICAgIGV4cHJlc3Npb25zLnB1c2goZXhwKTtcclxuICAgICAgICAgIHBhcnNlRm5zLnB1c2goJHBhcnNlKGV4cCwgcGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvcikpO1xyXG4gICAgICAgICAgaW5kZXggPSBlbmRJbmRleCArIGVuZFN5bWJvbExlbmd0aDtcclxuICAgICAgICAgIGV4cHJlc3Npb25Qb3NpdGlvbnMucHVzaChjb25jYXQubGVuZ3RoKTtcclxuICAgICAgICAgIGNvbmNhdC5wdXNoKCcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gd2UgZGlkIG5vdCBmaW5kIGFuIGludGVycG9sYXRpb24sIHNvIHdlIGhhdmUgdG8gYWRkIHRoZSByZW1haW5kZXIgdG8gdGhlIHNlcGFyYXRvcnMgYXJyYXlcclxuICAgICAgICAgIGlmIChpbmRleCAhPT0gdGV4dExlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25jYXQucHVzaCh1bmVzY2FwZVRleHQodGV4dC5zdWJzdHJpbmcoaW5kZXgpKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENvbmNhdGVuYXRpbmcgZXhwcmVzc2lvbnMgbWFrZXMgaXQgaGFyZCB0byByZWFzb24gYWJvdXQgd2hldGhlciBzb21lIGNvbWJpbmF0aW9uIG9mXHJcbiAgICAgIC8vIGNvbmNhdGVuYXRlZCB2YWx1ZXMgYXJlIHVuc2FmZSB0byB1c2UgYW5kIGNvdWxkIGVhc2lseSBsZWFkIHRvIFhTUy4gIEJ5IHJlcXVpcmluZyB0aGF0IGFcclxuICAgICAgLy8gc2luZ2xlIGV4cHJlc3Npb24gYmUgdXNlZCBmb3IgaWZyYW1lW3NyY10sIG9iamVjdFtzcmNdLCBldGMuLCB3ZSBlbnN1cmUgdGhhdCB0aGUgdmFsdWVcclxuICAgICAgLy8gdGhhdCdzIHVzZWQgaXMgYXNzaWduZWQgb3IgY29uc3RydWN0ZWQgYnkgc29tZSBKUyBjb2RlIHNvbWV3aGVyZSB0aGF0IGlzIG1vcmUgdGVzdGFibGUgb3JcclxuICAgICAgLy8gbWFrZSBpdCBvYnZpb3VzIHRoYXQgeW91IGJvdW5kIHRoZSB2YWx1ZSB0byBzb21lIHVzZXIgY29udHJvbGxlZCB2YWx1ZS4gIFRoaXMgaGVscHMgcmVkdWNlXHJcbiAgICAgIC8vIHRoZSBsb2FkIHdoZW4gYXVkaXRpbmcgZm9yIFhTUyBpc3N1ZXMuXHJcbiAgICAgIGlmICh0cnVzdGVkQ29udGV4dCAmJiBjb25jYXQubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgdGhyb3cgJGludGVycG9sYXRlTWluRXJyKCdub2NvbmNhdCcsXHJcbiAgICAgICAgICAgICAgXCJFcnJvciB3aGlsZSBpbnRlcnBvbGF0aW5nOiB7MH1cXG5TdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBkaXNhbGxvd3MgXCIgK1xyXG4gICAgICAgICAgICAgIFwiaW50ZXJwb2xhdGlvbnMgdGhhdCBjb25jYXRlbmF0ZSBtdWx0aXBsZSBleHByZXNzaW9ucyB3aGVuIGEgdHJ1c3RlZCB2YWx1ZSBpcyBcIiArXHJcbiAgICAgICAgICAgICAgXCJyZXF1aXJlZC4gIFNlZSBodHRwOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy4kc2NlXCIsIHRleHQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIW11c3RIYXZlRXhwcmVzc2lvbiB8fCBleHByZXNzaW9ucy5sZW5ndGgpIHtcclxuICAgICAgICB2YXIgY29tcHV0ZSA9IGZ1bmN0aW9uKHZhbHVlcykge1xyXG4gICAgICAgICAgZm9yKHZhciBpID0gMCwgaWkgPSBleHByZXNzaW9ucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChhbGxPck5vdGhpbmcgJiYgaXNVbmRlZmluZWQodmFsdWVzW2ldKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25jYXRbZXhwcmVzc2lvblBvc2l0aW9uc1tpXV0gPSB2YWx1ZXNbaV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gY29uY2F0LmpvaW4oJycpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRydXN0ZWRDb250ZXh0ID9cclxuICAgICAgICAgICAgJHNjZS5nZXRUcnVzdGVkKHRydXN0ZWRDb250ZXh0LCB2YWx1ZSkgOlxyXG4gICAgICAgICAgICAkc2NlLnZhbHVlT2YodmFsdWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzdHJpbmdpZnkgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7IC8vIG51bGwgfHwgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6IHtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdudW1iZXInOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWUgPSAnJyArIHZhbHVlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICB2YWx1ZSA9IHRvSnNvbih2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiBpbnRlcnBvbGF0aW9uRm4oY29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBpaSA9IGV4cHJlc3Npb25zLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheShpaSk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGZvciAoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVzW2ldID0gcGFyc2VGbnNbaV0oY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gY29tcHV0ZSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgICAgICAgIHZhciBuZXdFcnIgPSAkaW50ZXJwb2xhdGVNaW5FcnIoJ2ludGVycicsIFwiQ2FuJ3QgaW50ZXJwb2xhdGU6IHswfVxcbnsxfVwiLCB0ZXh0LFxyXG4gICAgICAgICAgICAgICAgICBlcnIudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIobmV3RXJyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH0sIHtcclxuICAgICAgICAgIC8vIGFsbCBvZiB0aGVzZSBwcm9wZXJ0aWVzIGFyZSB1bmRvY3VtZW50ZWQgZm9yIG5vd1xyXG4gICAgICAgICAgZXhwOiB0ZXh0LCAvL2p1c3QgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCByZWd1bGFyIHdhdGNoZXJzIGNyZWF0ZWQgdmlhICR3YXRjaFxyXG4gICAgICAgICAgZXhwcmVzc2lvbnM6IGV4cHJlc3Npb25zLFxyXG4gICAgICAgICAgJCR3YXRjaERlbGVnYXRlOiBmdW5jdGlvbiAoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSkge1xyXG4gICAgICAgICAgICB2YXIgbGFzdFZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoR3JvdXAocGFyc2VGbnMsIGZ1bmN0aW9uIGludGVycG9sYXRlRm5XYXRjaGVyKHZhbHVlcywgb2xkVmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGN1cnJWYWx1ZSA9IGNvbXB1dGUodmFsdWVzKTtcclxuICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcikpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgY3VyclZhbHVlLCB2YWx1ZXMgIT09IG9sZFZhbHVlcyA/IGxhc3RWYWx1ZSA6IGN1cnJWYWx1ZSwgc2NvcGUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBjdXJyVmFsdWU7XHJcbiAgICAgICAgICAgIH0sIG9iamVjdEVxdWFsaXR5KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gdW5lc2NhcGVUZXh0KHRleHQpIHtcclxuICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKGVzY2FwZWRTdGFydFJlZ2V4cCwgc3RhcnRTeW1ib2wpLlxyXG4gICAgICAgICAgcmVwbGFjZShlc2NhcGVkRW5kUmVnZXhwLCBlbmRTeW1ib2wpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBwYXJzZVN0cmluZ2lmeUludGVyY2VwdG9yKHZhbHVlKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHJldHVybiBzdHJpbmdpZnkoZ2V0VmFsdWUodmFsdWUpKTtcclxuICAgICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgICAgdmFyIG5ld0VyciA9ICRpbnRlcnBvbGF0ZU1pbkVycignaW50ZXJyJywgXCJDYW4ndCBpbnRlcnBvbGF0ZTogezB9XFxuezF9XCIsIHRleHQsXHJcbiAgICAgICAgICAgIGVyci50b1N0cmluZygpKTtcclxuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKG5ld0Vycik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlI3N0YXJ0U3ltYm9sXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIHN0YXJ0IG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB7e2AuXHJcbiAgICAgKlxyXG4gICAgICogVXNlIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciNzdGFydFN5bWJvbCBgJGludGVycG9sYXRlUHJvdmlkZXIuc3RhcnRTeW1ib2xgfSB0byBjaGFuZ2VcclxuICAgICAqIHRoZSBzeW1ib2wuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gc3RhcnQgc3ltYm9sLlxyXG4gICAgICovXHJcbiAgICAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2wgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaW50ZXJwb2xhdGUjZW5kU3ltYm9sXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIGVuZCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBgfX1gLlxyXG4gICAgICpcclxuICAgICAqIFVzZSB7QGxpbmsgbmcuJGludGVycG9sYXRlUHJvdmlkZXIjZW5kU3ltYm9sIGAkaW50ZXJwb2xhdGVQcm92aWRlci5lbmRTeW1ib2xgfSB0byBjaGFuZ2VcclxuICAgICAqIHRoZSBzeW1ib2wuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gZW5kIHN5bWJvbC5cclxuICAgICAqL1xyXG4gICAgJGludGVycG9sYXRlLmVuZFN5bWJvbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gZW5kU3ltYm9sO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gJGludGVycG9sYXRlO1xyXG4gIH1dO1xyXG59XHJcblxyXG5mdW5jdGlvbiAkSW50ZXJ2YWxQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJHdpbmRvdycsICckcScsICckJHEnLFxyXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkd2luZG93LCAgICRxLCAgICQkcSkge1xyXG4gICAgdmFyIGludGVydmFscyA9IHt9O1xyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAgKiBAbmFtZSAkaW50ZXJ2YWxcclxuICAgICAgKlxyXG4gICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAqIEFuZ3VsYXIncyB3cmFwcGVyIGZvciBgd2luZG93LnNldEludGVydmFsYC4gVGhlIGBmbmAgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZXZlcnkgYGRlbGF5YFxyXG4gICAgICAqIG1pbGxpc2Vjb25kcy5cclxuICAgICAgKlxyXG4gICAgICAqIFRoZSByZXR1cm4gdmFsdWUgb2YgcmVnaXN0ZXJpbmcgYW4gaW50ZXJ2YWwgZnVuY3Rpb24gaXMgYSBwcm9taXNlLiBUaGlzIHByb21pc2Ugd2lsbCBiZVxyXG4gICAgICAqIG5vdGlmaWVkIHVwb24gZWFjaCB0aWNrIG9mIHRoZSBpbnRlcnZhbCwgYW5kIHdpbGwgYmUgcmVzb2x2ZWQgYWZ0ZXIgYGNvdW50YCBpdGVyYXRpb25zLCBvclxyXG4gICAgICAqIHJ1biBpbmRlZmluaXRlbHkgaWYgYGNvdW50YCBpcyBub3QgZGVmaW5lZC4gVGhlIHZhbHVlIG9mIHRoZSBub3RpZmljYXRpb24gd2lsbCBiZSB0aGVcclxuICAgICAgKiBudW1iZXIgb2YgaXRlcmF0aW9ucyB0aGF0IGhhdmUgcnVuLlxyXG4gICAgICAqIFRvIGNhbmNlbCBhbiBpbnRlcnZhbCwgY2FsbCBgJGludGVydmFsLmNhbmNlbChwcm9taXNlKWAuXHJcbiAgICAgICpcclxuICAgICAgKiBJbiB0ZXN0cyB5b3UgY2FuIHVzZSB7QGxpbmsgbmdNb2NrLiRpbnRlcnZhbCNmbHVzaCBgJGludGVydmFsLmZsdXNoKG1pbGxpcylgfSB0b1xyXG4gICAgICAqIG1vdmUgZm9yd2FyZCBieSBgbWlsbGlzYCBtaWxsaXNlY29uZHMgYW5kIHRyaWdnZXIgYW55IGZ1bmN0aW9ucyBzY2hlZHVsZWQgdG8gcnVuIGluIHRoYXRcclxuICAgICAgKiB0aW1lLlxyXG4gICAgICAqXHJcbiAgICAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICAgICAgKiAqKk5vdGUqKjogSW50ZXJ2YWxzIGNyZWF0ZWQgYnkgdGhpcyBzZXJ2aWNlIG11c3QgYmUgZXhwbGljaXRseSBkZXN0cm95ZWQgd2hlbiB5b3UgYXJlIGZpbmlzaGVkXHJcbiAgICAgICogd2l0aCB0aGVtLiAgSW4gcGFydGljdWxhciB0aGV5IGFyZSBub3QgYXV0b21hdGljYWxseSBkZXN0cm95ZWQgd2hlbiBhIGNvbnRyb2xsZXIncyBzY29wZSBvciBhXHJcbiAgICAgICogZGlyZWN0aXZlJ3MgZWxlbWVudCBhcmUgZGVzdHJveWVkLlxyXG4gICAgICAqIFlvdSBzaG91bGQgdGFrZSB0aGlzIGludG8gY29uc2lkZXJhdGlvbiBhbmQgbWFrZSBzdXJlIHRvIGFsd2F5cyBjYW5jZWwgdGhlIGludGVydmFsIGF0IHRoZVxyXG4gICAgICAqIGFwcHJvcHJpYXRlIG1vbWVudC4gIFNlZSB0aGUgZXhhbXBsZSBiZWxvdyBmb3IgbW9yZSBkZXRhaWxzIG9uIGhvdyBhbmQgd2hlbiB0byBkbyB0aGlzLlxyXG4gICAgICAqIDwvZGl2PlxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCByZXBlYXRlZGx5LlxyXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZWFjaCBmdW5jdGlvbiBjYWxsLlxyXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gW2NvdW50PTBdIE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQuIElmIG5vdCBzZXQsIG9yIDAsIHdpbGwgcmVwZWF0XHJcbiAgICAgICogICBpbmRlZmluaXRlbHkuXHJcbiAgICAgICogQHBhcmFtIHtib29sZWFuPX0gW2ludm9rZUFwcGx5PXRydWVdIElmIHNldCB0byBgZmFsc2VgIHNraXBzIG1vZGVsIGRpcnR5IGNoZWNraW5nLCBvdGhlcndpc2VcclxuICAgICAgKiAgIHdpbGwgaW52b2tlIGBmbmAgd2l0aGluIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHkgJGFwcGx5fSBibG9jay5cclxuICAgICAgKiBAcmV0dXJucyB7cHJvbWlzZX0gQSBwcm9taXNlIHdoaWNoIHdpbGwgYmUgbm90aWZpZWQgb24gZWFjaCBpdGVyYXRpb24uXHJcbiAgICAgICpcclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqIDxleGFtcGxlIG1vZHVsZT1cImludGVydmFsRXhhbXBsZVwiPlxyXG4gICAgICAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICogICA8c2NyaXB0PlxyXG4gICAgICAqICAgICBhbmd1bGFyLm1vZHVsZSgnaW50ZXJ2YWxFeGFtcGxlJywgW10pXHJcbiAgICAgICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGludGVydmFsJyxcclxuICAgICAgKiAgICAgICAgIGZ1bmN0aW9uKCRzY29wZSwgJGludGVydmFsKSB7XHJcbiAgICAgICogICAgICAgICAgICRzY29wZS5mb3JtYXQgPSAnTS9kL3l5IGg6bW06c3MgYSc7XHJcbiAgICAgICogICAgICAgICAgICRzY29wZS5ibG9vZF8xID0gMTAwO1xyXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9IDEyMDtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICB2YXIgc3RvcDtcclxuICAgICAgKiAgICAgICAgICAgJHNjb3BlLmZpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICogICAgICAgICAgICAgLy8gRG9uJ3Qgc3RhcnQgYSBuZXcgZmlnaHQgaWYgd2UgYXJlIGFscmVhZHkgZmlnaHRpbmdcclxuICAgICAgKiAgICAgICAgICAgICBpZiAoIGFuZ3VsYXIuaXNEZWZpbmVkKHN0b3ApICkgcmV0dXJuO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAgIHN0b3AgPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICogICAgICAgICAgICAgaWYgKCRzY29wZS5ibG9vZF8xID4gMCAmJiAkc2NvcGUuYmxvb2RfMiA+IDApIHtcclxuICAgICAgKiAgICAgICAgICAgICAgICRzY29wZS5ibG9vZF8xID0gJHNjb3BlLmJsb29kXzEgLSAzO1xyXG4gICAgICAqICAgICAgICAgICAgICAgJHNjb3BlLmJsb29kXzIgPSAkc2NvcGUuYmxvb2RfMiAtIDQ7XHJcbiAgICAgICogICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgKiAgICAgICAgICAgICAgICRzY29wZS5zdG9wRmlnaHQoKTtcclxuICAgICAgKiAgICAgICAgICAgICB9XHJcbiAgICAgICogICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICogICAgICAgICB9O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICogICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChzdG9wKSkge1xyXG4gICAgICAqICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcCk7XHJcbiAgICAgICogICAgICAgICAgICAgc3RvcCA9IHVuZGVmaW5lZDtcclxuICAgICAgKiAgICAgICAgICAgfVxyXG4gICAgICAqICAgICAgICAgfTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgJHNjb3BlLnJlc2V0RmlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgKiAgICAgICAgICAgJHNjb3BlLmJsb29kXzEgPSAxMDA7XHJcbiAgICAgICogICAgICAgICAgICRzY29wZS5ibG9vZF8yID0gMTIwO1xyXG4gICAgICAqICAgICAgICAgfTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgKiAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGludGVydmFsIGlzIGRlc3Ryb3llZCB0b29cclxuICAgICAgKiAgICAgICAgICAgJHNjb3BlLnN0b3BGaWdodCgpO1xyXG4gICAgICAqICAgICAgICAgfSk7XHJcbiAgICAgICogICAgICAgfV0pXHJcbiAgICAgICogICAgICAgLy8gUmVnaXN0ZXIgdGhlICdteUN1cnJlbnRUaW1lJyBkaXJlY3RpdmUgZmFjdG9yeSBtZXRob2QuXHJcbiAgICAgICogICAgICAgLy8gV2UgaW5qZWN0ICRpbnRlcnZhbCBhbmQgZGF0ZUZpbHRlciBzZXJ2aWNlIHNpbmNlIHRoZSBmYWN0b3J5IG1ldGhvZCBpcyBESS5cclxuICAgICAgKiAgICAgICAuZGlyZWN0aXZlKCdteUN1cnJlbnRUaW1lJywgWyckaW50ZXJ2YWwnLCAnZGF0ZUZpbHRlcicsXHJcbiAgICAgICogICAgICAgICBmdW5jdGlvbigkaW50ZXJ2YWwsIGRhdGVGaWx0ZXIpIHtcclxuICAgICAgKiAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBkaXJlY3RpdmUgbGluayBmdW5jdGlvbi4gKGNvbXBpbGUgZnVuY3Rpb24gbm90IG5lZWRlZClcclxuICAgICAgKiAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAqICAgICAgICAgICAgIHZhciBmb3JtYXQsICAvLyBkYXRlIGZvcm1hdFxyXG4gICAgICAqICAgICAgICAgICAgICAgICBzdG9wVGltZTsgLy8gc28gdGhhdCB3ZSBjYW4gY2FuY2VsIHRoZSB0aW1lIHVwZGF0ZXNcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICAgIC8vIHVzZWQgdG8gdXBkYXRlIHRoZSBVSVxyXG4gICAgICAqICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWUoKSB7XHJcbiAgICAgICogICAgICAgICAgICAgICBlbGVtZW50LnRleHQoZGF0ZUZpbHRlcihuZXcgRGF0ZSgpLCBmb3JtYXQpKTtcclxuICAgICAgKiAgICAgICAgICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgICAgICAvLyB3YXRjaCB0aGUgZXhwcmVzc2lvbiwgYW5kIHVwZGF0ZSB0aGUgVUkgb24gY2hhbmdlLlxyXG4gICAgICAqICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5teUN1cnJlbnRUaW1lLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAqICAgICAgICAgICAgICAgZm9ybWF0ID0gdmFsdWU7XHJcbiAgICAgICogICAgICAgICAgICAgICB1cGRhdGVUaW1lKCk7XHJcbiAgICAgICogICAgICAgICAgICAgfSk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgICAgICBzdG9wVGltZSA9ICRpbnRlcnZhbCh1cGRhdGVUaW1lLCAxMDAwKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICAgIC8vIGxpc3RlbiBvbiBET00gZGVzdHJveSAocmVtb3ZhbCkgZXZlbnQsIGFuZCBjYW5jZWwgdGhlIG5leHQgVUkgdXBkYXRlXHJcbiAgICAgICogICAgICAgICAgICAgLy8gdG8gcHJldmVudCB1cGRhdGluZyB0aW1lIGFmdGVyIHRoZSBET00gZWxlbWVudCB3YXMgcmVtb3ZlZC5cclxuICAgICAgKiAgICAgICAgICAgICBlbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAqICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChzdG9wVGltZSk7XHJcbiAgICAgICogICAgICAgICAgICAgfSk7XHJcbiAgICAgICogICAgICAgICAgIH1cclxuICAgICAgKiAgICAgICAgIH1dKTtcclxuICAgICAgKiAgIDwvc2NyaXB0PlxyXG4gICAgICAqXHJcbiAgICAgICogICA8ZGl2PlxyXG4gICAgICAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAqICAgICAgIERhdGUgZm9ybWF0OiA8aW5wdXQgbmctbW9kZWw9XCJmb3JtYXRcIj4gPGhyLz5cclxuICAgICAgKiAgICAgICBDdXJyZW50IHRpbWUgaXM6IDxzcGFuIG15LWN1cnJlbnQtdGltZT1cImZvcm1hdFwiPjwvc3Bhbj5cclxuICAgICAgKiAgICAgICA8aHIvPlxyXG4gICAgICAqICAgICAgIEJsb29kIDEgOiA8Zm9udCBjb2xvcj0ncmVkJz57e2Jsb29kXzF9fTwvZm9udD5cclxuICAgICAgKiAgICAgICBCbG9vZCAyIDogPGZvbnQgY29sb3I9J3JlZCc+e3tibG9vZF8yfX08L2ZvbnQ+XHJcbiAgICAgICogICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1uZy1jbGljaz1cImZpZ2h0KClcIj5GaWdodDwvYnV0dG9uPlxyXG4gICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJzdG9wRmlnaHQoKVwiPlN0b3BGaWdodDwvYnV0dG9uPlxyXG4gICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJyZXNldEZpZ2h0KClcIj5yZXNldEZpZ2h0PC9idXR0b24+XHJcbiAgICAgICogICAgIDwvZGl2PlxyXG4gICAgICAqICAgPC9kaXY+XHJcbiAgICAgICpcclxuICAgICAgKiA8L2ZpbGU+XHJcbiAgICAgICogPC9leGFtcGxlPlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gaW50ZXJ2YWwoZm4sIGRlbGF5LCBjb3VudCwgaW52b2tlQXBwbHkpIHtcclxuICAgICAgdmFyIHNldEludGVydmFsID0gJHdpbmRvdy5zZXRJbnRlcnZhbCxcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwgPSAkd2luZG93LmNsZWFySW50ZXJ2YWwsXHJcbiAgICAgICAgICBpdGVyYXRpb24gPSAwLFxyXG4gICAgICAgICAgc2tpcEFwcGx5ID0gKGlzRGVmaW5lZChpbnZva2VBcHBseSkgJiYgIWludm9rZUFwcGx5KSxcclxuICAgICAgICAgIGRlZmVycmVkID0gKHNraXBBcHBseSA/ICQkcSA6ICRxKS5kZWZlcigpLFxyXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XHJcblxyXG4gICAgICBjb3VudCA9IGlzRGVmaW5lZChjb3VudCkgPyBjb3VudCA6IDA7XHJcblxyXG4gICAgICBwcm9taXNlLnRoZW4obnVsbCwgbnVsbCwgZm4pO1xyXG5cclxuICAgICAgcHJvbWlzZS4kJGludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiB0aWNrKCkge1xyXG4gICAgICAgIGRlZmVycmVkLm5vdGlmeShpdGVyYXRpb24rKyk7XHJcblxyXG4gICAgICAgIGlmIChjb3VudCA+IDAgJiYgaXRlcmF0aW9uID49IGNvdW50KSB7XHJcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGl0ZXJhdGlvbik7XHJcbiAgICAgICAgICBjbGVhckludGVydmFsKHByb21pc2UuJCRpbnRlcnZhbElkKTtcclxuICAgICAgICAgIGRlbGV0ZSBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XHJcblxyXG4gICAgICB9LCBkZWxheSk7XHJcblxyXG4gICAgICBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdID0gZGVmZXJyZWQ7XHJcblxyXG4gICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgKiBAbmFtZSAkaW50ZXJ2YWwjY2FuY2VsXHJcbiAgICAgICpcclxuICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgKiBDYW5jZWxzIGEgdGFzayBhc3NvY2lhdGVkIHdpdGggdGhlIGBwcm9taXNlYC5cclxuICAgICAgKlxyXG4gICAgICAqIEBwYXJhbSB7cHJvbWlzZX0gcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYCRpbnRlcnZhbGAgZnVuY3Rpb24uXHJcbiAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB0YXNrIHdhcyBzdWNjZXNzZnVsbHkgY2FuY2VsZWQuXHJcbiAgICAgICovXHJcbiAgICBpbnRlcnZhbC5jYW5jZWwgPSBmdW5jdGlvbihwcm9taXNlKSB7XHJcbiAgICAgIGlmIChwcm9taXNlICYmIHByb21pc2UuJCRpbnRlcnZhbElkIGluIGludGVydmFscykge1xyXG4gICAgICAgIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF0ucmVqZWN0KCdjYW5jZWxlZCcpO1xyXG4gICAgICAgICR3aW5kb3cuY2xlYXJJbnRlcnZhbChwcm9taXNlLiQkaW50ZXJ2YWxJZCk7XHJcbiAgICAgICAgZGVsZXRlIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF07XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gaW50ZXJ2YWw7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkbG9jYWxlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiAkbG9jYWxlIHNlcnZpY2UgcHJvdmlkZXMgbG9jYWxpemF0aW9uIHJ1bGVzIGZvciB2YXJpb3VzIEFuZ3VsYXIgY29tcG9uZW50cy4gQXMgb2YgcmlnaHQgbm93IHRoZVxyXG4gKiBvbmx5IHB1YmxpYyBhcGkgaXM6XHJcbiAqXHJcbiAqICogYGlkYCDigJMgYHtzdHJpbmd9YCDigJMgbG9jYWxlIGlkIGZvcm1hdHRlZCBhcyBgbGFuZ3VhZ2VJZC1jb3VudHJ5SWRgIChlLmcuIGBlbi11c2ApXHJcbiAqL1xyXG5mdW5jdGlvbiAkTG9jYWxlUHJvdmlkZXIoKXtcclxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiAnZW4tdXMnLFxyXG5cclxuICAgICAgTlVNQkVSX0ZPUk1BVFM6IHtcclxuICAgICAgICBERUNJTUFMX1NFUDogJy4nLFxyXG4gICAgICAgIEdST1VQX1NFUDogJywnLFxyXG4gICAgICAgIFBBVFRFUk5TOiBbXHJcbiAgICAgICAgICB7IC8vIERlY2ltYWwgUGF0dGVyblxyXG4gICAgICAgICAgICBtaW5JbnQ6IDEsXHJcbiAgICAgICAgICAgIG1pbkZyYWM6IDAsXHJcbiAgICAgICAgICAgIG1heEZyYWM6IDMsXHJcbiAgICAgICAgICAgIHBvc1ByZTogJycsXHJcbiAgICAgICAgICAgIHBvc1N1ZjogJycsXHJcbiAgICAgICAgICAgIG5lZ1ByZTogJy0nLFxyXG4gICAgICAgICAgICBuZWdTdWY6ICcnLFxyXG4gICAgICAgICAgICBnU2l6ZTogMyxcclxuICAgICAgICAgICAgbGdTaXplOiAzXHJcbiAgICAgICAgICB9LHsgLy9DdXJyZW5jeSBQYXR0ZXJuXHJcbiAgICAgICAgICAgIG1pbkludDogMSxcclxuICAgICAgICAgICAgbWluRnJhYzogMixcclxuICAgICAgICAgICAgbWF4RnJhYzogMixcclxuICAgICAgICAgICAgcG9zUHJlOiAnXFx1MDBBNCcsXHJcbiAgICAgICAgICAgIHBvc1N1ZjogJycsXHJcbiAgICAgICAgICAgIG5lZ1ByZTogJyhcXHUwMEE0JyxcclxuICAgICAgICAgICAgbmVnU3VmOiAnKScsXHJcbiAgICAgICAgICAgIGdTaXplOiAzLFxyXG4gICAgICAgICAgICBsZ1NpemU6IDNcclxuICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIENVUlJFTkNZX1NZTTogJyQnXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBEQVRFVElNRV9GT1JNQVRTOiB7XHJcbiAgICAgICAgTU9OVEg6XHJcbiAgICAgICAgICAgICdKYW51YXJ5LEZlYnJ1YXJ5LE1hcmNoLEFwcmlsLE1heSxKdW5lLEp1bHksQXVndXN0LFNlcHRlbWJlcixPY3RvYmVyLE5vdmVtYmVyLERlY2VtYmVyJ1xyXG4gICAgICAgICAgICAuc3BsaXQoJywnKSxcclxuICAgICAgICBTSE9SVE1PTlRIOiAgJ0phbixGZWIsTWFyLEFwcixNYXksSnVuLEp1bCxBdWcsU2VwLE9jdCxOb3YsRGVjJy5zcGxpdCgnLCcpLFxyXG4gICAgICAgIERBWTogJ1N1bmRheSxNb25kYXksVHVlc2RheSxXZWRuZXNkYXksVGh1cnNkYXksRnJpZGF5LFNhdHVyZGF5Jy5zcGxpdCgnLCcpLFxyXG4gICAgICAgIFNIT1JUREFZOiAnU3VuLE1vbixUdWUsV2VkLFRodSxGcmksU2F0Jy5zcGxpdCgnLCcpLFxyXG4gICAgICAgIEFNUE1TOiBbJ0FNJywnUE0nXSxcclxuICAgICAgICBtZWRpdW06ICdNTU0gZCwgeSBoOm1tOnNzIGEnLFxyXG4gICAgICAgIHNob3J0OiAnTS9kL3l5IGg6bW0gYScsXHJcbiAgICAgICAgZnVsbERhdGU6ICdFRUVFLCBNTU1NIGQsIHknLFxyXG4gICAgICAgIGxvbmdEYXRlOiAnTU1NTSBkLCB5JyxcclxuICAgICAgICBtZWRpdW1EYXRlOiAnTU1NIGQsIHknLFxyXG4gICAgICAgIHNob3J0RGF0ZTogJ00vZC95eScsXHJcbiAgICAgICAgbWVkaXVtVGltZTogJ2g6bW06c3MgYScsXHJcbiAgICAgICAgc2hvcnRUaW1lOiAnaDptbSBhJ1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgcGx1cmFsQ2F0OiBmdW5jdGlvbihudW0pIHtcclxuICAgICAgICBpZiAobnVtID09PSAxKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ29uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnb3RoZXInO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH07XHJcbn1cclxuXHJcbnZhciBQQVRIX01BVENIID0gL14oW15cXD8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JC8sXHJcbiAgICBERUZBVUxUX1BPUlRTID0geydodHRwJzogODAsICdodHRwcyc6IDQ0MywgJ2Z0cCc6IDIxfTtcclxudmFyICRsb2NhdGlvbk1pbkVyciA9IG1pbkVycignJGxvY2F0aW9uJyk7XHJcblxyXG5cclxuLyoqXHJcbiAqIEVuY29kZSBwYXRoIHVzaW5nIGVuY29kZVVyaVNlZ21lbnQsIGlnbm9yaW5nIGZvcndhcmQgc2xhc2hlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlUGF0aChwYXRoKSB7XHJcbiAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLycpLFxyXG4gICAgICBpID0gc2VnbWVudHMubGVuZ3RoO1xyXG5cclxuICB3aGlsZSAoaS0tKSB7XHJcbiAgICBzZWdtZW50c1tpXSA9IGVuY29kZVVyaVNlZ21lbnQoc2VnbWVudHNbaV0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHNlZ21lbnRzLmpvaW4oJy8nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VBYnNvbHV0ZVVybChhYnNvbHV0ZVVybCwgbG9jYXRpb25PYmosIGFwcEJhc2UpIHtcclxuICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZShhYnNvbHV0ZVVybCwgYXBwQmFzZSk7XHJcblxyXG4gIGxvY2F0aW9uT2JqLiQkcHJvdG9jb2wgPSBwYXJzZWRVcmwucHJvdG9jb2w7XHJcbiAgbG9jYXRpb25PYmouJCRob3N0ID0gcGFyc2VkVXJsLmhvc3RuYW1lO1xyXG4gIGxvY2F0aW9uT2JqLiQkcG9ydCA9IGludChwYXJzZWRVcmwucG9ydCkgfHwgREVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdIHx8IG51bGw7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBwYXJzZUFwcFVybChyZWxhdGl2ZVVybCwgbG9jYXRpb25PYmosIGFwcEJhc2UpIHtcclxuICB2YXIgcHJlZml4ZWQgPSAocmVsYXRpdmVVcmwuY2hhckF0KDApICE9PSAnLycpO1xyXG4gIGlmIChwcmVmaXhlZCkge1xyXG4gICAgcmVsYXRpdmVVcmwgPSAnLycgKyByZWxhdGl2ZVVybDtcclxuICB9XHJcbiAgdmFyIG1hdGNoID0gdXJsUmVzb2x2ZShyZWxhdGl2ZVVybCwgYXBwQmFzZSk7XHJcbiAgbG9jYXRpb25PYmouJCRwYXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KHByZWZpeGVkICYmIG1hdGNoLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nID9cclxuICAgICAgbWF0Y2gucGF0aG5hbWUuc3Vic3RyaW5nKDEpIDogbWF0Y2gucGF0aG5hbWUpO1xyXG4gIGxvY2F0aW9uT2JqLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShtYXRjaC5zZWFyY2gpO1xyXG4gIGxvY2F0aW9uT2JqLiQkaGFzaCA9IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaC5oYXNoKTtcclxuXHJcbiAgLy8gbWFrZSBzdXJlIHBhdGggc3RhcnRzIHdpdGggJy8nO1xyXG4gIGlmIChsb2NhdGlvbk9iai4kJHBhdGggJiYgbG9jYXRpb25PYmouJCRwYXRoLmNoYXJBdCgwKSAhPSAnLycpIHtcclxuICAgIGxvY2F0aW9uT2JqLiQkcGF0aCA9ICcvJyArIGxvY2F0aW9uT2JqLiQkcGF0aDtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGJlZ2luXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB3aG9sZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSByZXR1cm5zIHRleHQgZnJvbSB3aG9sZSBhZnRlciBiZWdpbiBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgYmVnaW4gd2l0aFxyXG4gKiAgICAgICAgICAgICAgICAgICBleHBlY3RlZCBzdHJpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBiZWdpbnNXaXRoKGJlZ2luLCB3aG9sZSkge1xyXG4gIGlmICh3aG9sZS5pbmRleE9mKGJlZ2luKSA9PT0gMCkge1xyXG4gICAgcmV0dXJuIHdob2xlLnN1YnN0cihiZWdpbi5sZW5ndGgpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHN0cmlwSGFzaCh1cmwpIHtcclxuICB2YXIgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xyXG4gIHJldHVybiBpbmRleCA9PSAtMSA/IHVybCA6IHVybC5zdWJzdHIoMCwgaW5kZXgpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc3RyaXBGaWxlKHVybCkge1xyXG4gIHJldHVybiB1cmwuc3Vic3RyKDAsIHN0cmlwSGFzaCh1cmwpLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcclxufVxyXG5cclxuLyogcmV0dXJuIHRoZSBzZXJ2ZXIgb25seSAoc2NoZW1lOi8vaG9zdDpwb3J0KSAqL1xyXG5mdW5jdGlvbiBzZXJ2ZXJCYXNlKHVybCkge1xyXG4gIHJldHVybiB1cmwuc3Vic3RyaW5nKDAsIHVybC5pbmRleE9mKCcvJywgdXJsLmluZGV4T2YoJy8vJykgKyAyKSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTG9jYXRpb25IdG1sNVVybCByZXByZXNlbnRzIGFuIHVybFxyXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gSFRNTDUgbW9kZSBpcyBlbmFibGVkIGFuZCBzdXBwb3J0ZWRcclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlUHJlZml4IHVybCBwYXRoIHByZWZpeFxyXG4gKi9cclxuZnVuY3Rpb24gTG9jYXRpb25IdG1sNVVybChhcHBCYXNlLCBiYXNlUHJlZml4KSB7XHJcbiAgdGhpcy4kJGh0bWw1ID0gdHJ1ZTtcclxuICBiYXNlUHJlZml4ID0gYmFzZVByZWZpeCB8fCAnJztcclxuICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcclxuICBwYXJzZUFic29sdXRlVXJsKGFwcEJhc2UsIHRoaXMsIGFwcEJhc2UpO1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUGFyc2UgZ2l2ZW4gaHRtbDUgKHJlZ3VsYXIpIHVybCBzdHJpbmcgaW50byBwcm9wZXJ0aWVzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld0Fic29sdXRlVXJsIEhUTUw1IHVybFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgdGhpcy4kJHBhcnNlID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgICB2YXIgcGF0aFVybCA9IGJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSwgdXJsKTtcclxuICAgIGlmICghaXNTdHJpbmcocGF0aFVybCkpIHtcclxuICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdpcHRocHJmeCcsICdJbnZhbGlkIHVybCBcInswfVwiLCBtaXNzaW5nIHBhdGggcHJlZml4IFwiezF9XCIuJywgdXJsLFxyXG4gICAgICAgICAgYXBwQmFzZU5vRmlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VBcHBVcmwocGF0aFVybCwgdGhpcywgYXBwQmFzZSk7XHJcblxyXG4gICAgaWYgKCF0aGlzLiQkcGF0aCkge1xyXG4gICAgICB0aGlzLiQkcGF0aCA9ICcvJztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLiQkY29tcG9zZSgpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXBvc2UgdXJsIGFuZCB1cGRhdGUgYGFic1VybGAgcHJvcGVydHlcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2VhcmNoID0gdG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxcclxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xyXG5cclxuICAgIHRoaXMuJCR1cmwgPSBlbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyBoYXNoO1xyXG4gICAgdGhpcy4kJGFic1VybCA9IGFwcEJhc2VOb0ZpbGUgKyB0aGlzLiQkdXJsLnN1YnN0cigxKTsgLy8gZmlyc3QgY2hhciBpcyBhbHdheXMgJy8nXHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xyXG4gICAgaWYgKHJlbEhyZWYgJiYgcmVsSHJlZlswXSA9PT0gJyMnKSB7XHJcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgbGlua3MgdG8gaGFzaCBmcmFnbWVudHM6XHJcbiAgICAgIC8vIGtlZXAgdGhlIG9sZCB1cmwgYW5kIG9ubHkgcmVwbGFjZSB0aGUgaGFzaCBmcmFnbWVudFxyXG4gICAgICB0aGlzLmhhc2gocmVsSHJlZi5zbGljZSgxKSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgdmFyIGFwcFVybCwgcHJldkFwcFVybDtcclxuICAgIHZhciByZXdyaXR0ZW5Vcmw7XHJcblxyXG4gICAgaWYgKCAoYXBwVXJsID0gYmVnaW5zV2l0aChhcHBCYXNlLCB1cmwpKSAhPT0gdW5kZWZpbmVkICkge1xyXG4gICAgICBwcmV2QXBwVXJsID0gYXBwVXJsO1xyXG4gICAgICBpZiAoIChhcHBVcmwgPSBiZWdpbnNXaXRoKGJhc2VQcmVmaXgsIGFwcFVybCkpICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZU5vRmlsZSArIChiZWdpbnNXaXRoKCcvJywgYXBwVXJsKSB8fCBhcHBVcmwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2UgKyBwcmV2QXBwVXJsO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKCAoYXBwVXJsID0gYmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLCB1cmwpKSAhPT0gdW5kZWZpbmVkICkge1xyXG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlICsgYXBwVXJsO1xyXG4gICAgfSBlbHNlIGlmIChhcHBCYXNlTm9GaWxlID09IHVybCArICcvJykge1xyXG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xyXG4gICAgfVxyXG4gICAgaWYgKHJld3JpdHRlblVybCkge1xyXG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcclxuICAgIH1cclxuICAgIHJldHVybiAhIXJld3JpdHRlblVybDtcclxuICB9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIExvY2F0aW9uSGFzaGJhbmdVcmwgcmVwcmVzZW50cyB1cmxcclxuICogVGhpcyBvYmplY3QgaXMgZXhwb3NlZCBhcyAkbG9jYXRpb24gc2VydmljZSB3aGVuIGRldmVsb3BlciBkb2Vzbid0IG9wdCBpbnRvIGh0bWw1IG1vZGUuXHJcbiAqIEl0IGFsc28gc2VydmVzIGFzIHRoZSBiYXNlIGNsYXNzIGZvciBodG1sNSBtb2RlIGZhbGxiYWNrIG9uIGxlZ2FjeSBicm93c2Vycy5cclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoUHJlZml4IGhhc2hiYW5nIHByZWZpeFxyXG4gKi9cclxuZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ1VybChhcHBCYXNlLCBoYXNoUHJlZml4KSB7XHJcbiAgdmFyIGFwcEJhc2VOb0ZpbGUgPSBzdHJpcEZpbGUoYXBwQmFzZSk7XHJcblxyXG4gIHBhcnNlQWJzb2x1dGVVcmwoYXBwQmFzZSwgdGhpcywgYXBwQmFzZSk7XHJcblxyXG5cclxuICAvKipcclxuICAgKiBQYXJzZSBnaXZlbiBoYXNoYmFuZyB1cmwgaW50byBwcm9wZXJ0aWVzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBIYXNoYmFuZyB1cmxcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHRoaXMuJCRwYXJzZSA9IGZ1bmN0aW9uKHVybCkge1xyXG4gICAgdmFyIHdpdGhvdXRCYXNlVXJsID0gYmVnaW5zV2l0aChhcHBCYXNlLCB1cmwpIHx8IGJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSwgdXJsKTtcclxuICAgIHZhciB3aXRob3V0SGFzaFVybCA9IHdpdGhvdXRCYXNlVXJsLmNoYXJBdCgwKSA9PSAnIydcclxuICAgICAgICA/IGJlZ2luc1dpdGgoaGFzaFByZWZpeCwgd2l0aG91dEJhc2VVcmwpXHJcbiAgICAgICAgOiAodGhpcy4kJGh0bWw1KVxyXG4gICAgICAgICAgPyB3aXRob3V0QmFzZVVybFxyXG4gICAgICAgICAgOiAnJztcclxuXHJcbiAgICBpZiAoIWlzU3RyaW5nKHdpdGhvdXRIYXNoVXJsKSkge1xyXG4gICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2loc2hwcmZ4JywgJ0ludmFsaWQgdXJsIFwiezB9XCIsIG1pc3NpbmcgaGFzaCBwcmVmaXggXCJ7MX1cIi4nLCB1cmwsXHJcbiAgICAgICAgICBoYXNoUHJlZml4KTtcclxuICAgIH1cclxuICAgIHBhcnNlQXBwVXJsKHdpdGhvdXRIYXNoVXJsLCB0aGlzLCBhcHBCYXNlKTtcclxuXHJcbiAgICB0aGlzLiQkcGF0aCA9IHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUodGhpcy4kJHBhdGgsIHdpdGhvdXRIYXNoVXJsLCBhcHBCYXNlKTtcclxuXHJcbiAgICB0aGlzLiQkY29tcG9zZSgpO1xyXG5cclxuICAgIC8qXHJcbiAgICAgKiBJbiBXaW5kb3dzLCBvbiBhbiBhbmNob3Igbm9kZSBvbiBkb2N1bWVudHMgbG9hZGVkIGZyb21cclxuICAgICAqIHRoZSBmaWxlc3lzdGVtLCB0aGUgYnJvd3NlciB3aWxsIHJldHVybiBhIHBhdGhuYW1lXHJcbiAgICAgKiBwcmVmaXhlZCB3aXRoIHRoZSBkcml2ZSBuYW1lICgnL0M6L3BhdGgnKSB3aGVuIGFcclxuICAgICAqIHBhdGhuYW1lIHdpdGhvdXQgYSBkcml2ZSBpcyBzZXQ6XHJcbiAgICAgKiAgKiBhLnNldEF0dHJpYnV0ZSgnaHJlZicsICcvZm9vJylcclxuICAgICAqICAgKiBhLnBhdGhuYW1lID09PSAnL0M6L2ZvbycgLy90cnVlXHJcbiAgICAgKlxyXG4gICAgICogSW5zaWRlIG9mIEFuZ3VsYXIsIHdlJ3JlIGFsd2F5cyB1c2luZyBwYXRobmFtZXMgdGhhdFxyXG4gICAgICogZG8gbm90IGluY2x1ZGUgZHJpdmUgbmFtZXMgZm9yIHJvdXRpbmcuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUgKHBhdGgsIHVybCwgYmFzZSkge1xyXG4gICAgICAvKlxyXG4gICAgICBNYXRjaGVzIHBhdGhzIGZvciBmaWxlIHByb3RvY29sIG9uIHdpbmRvd3MsXHJcbiAgICAgIHN1Y2ggYXMgL0M6L2Zvby9iYXIsIGFuZCBjYXB0dXJlcyBvbmx5IC9mb28vYmFyLlxyXG4gICAgICAqL1xyXG4gICAgICB2YXIgd2luZG93c0ZpbGVQYXRoRXhwID0gL15cXC9bQS1aXTooXFwvLiopLztcclxuXHJcbiAgICAgIHZhciBmaXJzdFBhdGhTZWdtZW50TWF0Y2g7XHJcblxyXG4gICAgICAvL0dldCB0aGUgcmVsYXRpdmUgcGF0aCBmcm9tIHRoZSBpbnB1dCBVUkwuXHJcbiAgICAgIGlmICh1cmwuaW5kZXhPZihiYXNlKSA9PT0gMCkge1xyXG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKGJhc2UsICcnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVGhlIGlucHV0IFVSTCBpbnRlbnRpb25hbGx5IGNvbnRhaW5zIGEgZmlyc3QgcGF0aCBzZWdtZW50IHRoYXQgZW5kcyB3aXRoIGEgY29sb24uXHJcbiAgICAgIGlmICh3aW5kb3dzRmlsZVBhdGhFeHAuZXhlYyh1cmwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA9IHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHBhdGgpO1xyXG4gICAgICByZXR1cm4gZmlyc3RQYXRoU2VnbWVudE1hdGNoID8gZmlyc3RQYXRoU2VnbWVudE1hdGNoWzFdIDogcGF0aDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDb21wb3NlIGhhc2hiYW5nIHVybCBhbmQgdXBkYXRlIGBhYnNVcmxgIHByb3BlcnR5XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICB0aGlzLiQkY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXHJcbiAgICAgICAgaGFzaCA9IHRoaXMuJCRoYXNoID8gJyMnICsgZW5jb2RlVXJpU2VnbWVudCh0aGlzLiQkaGFzaCkgOiAnJztcclxuXHJcbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcclxuICAgIHRoaXMuJCRhYnNVcmwgPSBhcHBCYXNlICsgKHRoaXMuJCR1cmwgPyBoYXNoUHJlZml4ICsgdGhpcy4kJHVybCA6ICcnKTtcclxuICB9O1xyXG5cclxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XHJcbiAgICBpZihzdHJpcEhhc2goYXBwQmFzZSkgPT0gc3RyaXBIYXNoKHVybCkpIHtcclxuICAgICAgdGhpcy4kJHBhcnNlKHVybCk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIHVybFxyXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gaHRtbDUgaGlzdG9yeSBhcGkgaXMgZW5hYmxlZCBidXQgdGhlIGJyb3dzZXJcclxuICogZG9lcyBub3Qgc3VwcG9ydCBpdC5cclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoUHJlZml4IGhhc2hiYW5nIHByZWZpeFxyXG4gKi9cclxuZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmwoYXBwQmFzZSwgaGFzaFByZWZpeCkge1xyXG4gIHRoaXMuJCRodG1sNSA9IHRydWU7XHJcbiAgTG9jYXRpb25IYXNoYmFuZ1VybC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cclxuICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcclxuXHJcbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xyXG4gICAgaWYgKHJlbEhyZWYgJiYgcmVsSHJlZlswXSA9PT0gJyMnKSB7XHJcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgbGlua3MgdG8gaGFzaCBmcmFnbWVudHM6XHJcbiAgICAgIC8vIGtlZXAgdGhlIG9sZCB1cmwgYW5kIG9ubHkgcmVwbGFjZSB0aGUgaGFzaCBmcmFnbWVudFxyXG4gICAgICB0aGlzLmhhc2gocmVsSHJlZi5zbGljZSgxKSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciByZXdyaXR0ZW5Vcmw7XHJcbiAgICB2YXIgYXBwVXJsO1xyXG5cclxuICAgIGlmICggYXBwQmFzZSA9PSBzdHJpcEhhc2godXJsKSApIHtcclxuICAgICAgcmV3cml0dGVuVXJsID0gdXJsO1xyXG4gICAgfSBlbHNlIGlmICggKGFwcFVybCA9IGJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSwgdXJsKSkgKSB7XHJcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2UgKyBoYXNoUHJlZml4ICsgYXBwVXJsO1xyXG4gICAgfSBlbHNlIGlmICggYXBwQmFzZU5vRmlsZSA9PT0gdXJsICsgJy8nKSB7XHJcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGU7XHJcbiAgICB9XHJcbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XHJcbiAgICAgIHRoaXMuJCRwYXJzZShyZXdyaXR0ZW5VcmwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2VhcmNoID0gdG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxcclxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xyXG5cclxuICAgIHRoaXMuJCR1cmwgPSBlbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyBoYXNoO1xyXG4gICAgLy8gaW5jbHVkZSBoYXNoUHJlZml4IGluICQkYWJzVXJsIHdoZW4gJCR1cmwgaXMgZW1wdHkgc28gSUU4ICYgOSBkbyBub3QgcmVsb2FkIHBhZ2UgYmVjYXVzZSBvZiByZW1vdmFsIG9mICcjJ1xyXG4gICAgdGhpcy4kJGFic1VybCA9IGFwcEJhc2UgKyBoYXNoUHJlZml4ICsgdGhpcy4kJHVybDtcclxuICB9O1xyXG5cclxufVxyXG5cclxuXHJcbkxvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsLnByb3RvdHlwZSA9XHJcbiAgTG9jYXRpb25IYXNoYmFuZ1VybC5wcm90b3R5cGUgPVxyXG4gIExvY2F0aW9uSHRtbDVVcmwucHJvdG90eXBlID0ge1xyXG5cclxuICAvKipcclxuICAgKiBBcmUgd2UgaW4gaHRtbDUgbW9kZT9cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gICQkaHRtbDU6IGZhbHNlLFxyXG5cclxuICAvKipcclxuICAgKiBIYXMgYW55IGNoYW5nZSBiZWVuIHJlcGxhY2luZyA/XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICAkJHJlcGxhY2U6IGZhbHNlLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI2Fic1VybFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXHJcbiAgICpcclxuICAgKiBSZXR1cm4gZnVsbCB1cmwgcmVwcmVzZW50YXRpb24gd2l0aCBhbGwgc2VnbWVudHMgZW5jb2RlZCBhY2NvcmRpbmcgdG8gcnVsZXMgc3BlY2lmaWVkIGluXHJcbiAgICogW1JGQyAzOTg2XShodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmMzOTg2LnR4dCkuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGZ1bGwgdXJsXHJcbiAgICovXHJcbiAgYWJzVXJsOiBsb2NhdGlvbkdldHRlcignJCRhYnNVcmwnKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiN1cmxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cclxuICAgKlxyXG4gICAqIFJldHVybiB1cmwgKGUuZy4gYC9wYXRoP2E9YiNoYXNoYCkgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogQ2hhbmdlIHBhdGgsIHNlYXJjaCBhbmQgaGFzaCwgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdXJsIE5ldyB1cmwgd2l0aG91dCBiYXNlIHByZWZpeCAoZS5nLiBgL3BhdGg/YT1iI2hhc2hgKVxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gdXJsXHJcbiAgICovXHJcbiAgdXJsOiBmdW5jdGlvbih1cmwpIHtcclxuICAgIGlmIChpc1VuZGVmaW5lZCh1cmwpKVxyXG4gICAgICByZXR1cm4gdGhpcy4kJHVybDtcclxuXHJcbiAgICB2YXIgbWF0Y2ggPSBQQVRIX01BVENILmV4ZWModXJsKTtcclxuICAgIGlmIChtYXRjaFsxXSkgdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFsxXSkpO1xyXG4gICAgaWYgKG1hdGNoWzJdIHx8IG1hdGNoWzFdKSB0aGlzLnNlYXJjaChtYXRjaFszXSB8fCAnJyk7XHJcbiAgICB0aGlzLmhhc2gobWF0Y2hbNV0gfHwgJycpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jcHJvdG9jb2xcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxyXG4gICAqXHJcbiAgICogUmV0dXJuIHByb3RvY29sIG9mIGN1cnJlbnQgdXJsLlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSBwcm90b2NvbCBvZiBjdXJyZW50IHVybFxyXG4gICAqL1xyXG4gIHByb3RvY29sOiBsb2NhdGlvbkdldHRlcignJCRwcm90b2NvbCcpLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hvc3RcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxyXG4gICAqXHJcbiAgICogUmV0dXJuIGhvc3Qgb2YgY3VycmVudCB1cmwuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGhvc3Qgb2YgY3VycmVudCB1cmwuXHJcbiAgICovXHJcbiAgaG9zdDogbG9jYXRpb25HZXR0ZXIoJyQkaG9zdCcpLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI3BvcnRcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxyXG4gICAqXHJcbiAgICogUmV0dXJuIHBvcnQgb2YgY3VycmVudCB1cmwuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHBvcnRcclxuICAgKi9cclxuICBwb3J0OiBsb2NhdGlvbkdldHRlcignJCRwb3J0JyksXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jcGF0aFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxyXG4gICAqXHJcbiAgICogUmV0dXJuIHBhdGggb2YgY3VycmVudCB1cmwgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogQ2hhbmdlIHBhdGggd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cclxuICAgKlxyXG4gICAqIE5vdGU6IFBhdGggc2hvdWxkIGFsd2F5cyBiZWdpbiB3aXRoIGZvcndhcmQgc2xhc2ggKC8pLCB0aGlzIG1ldGhvZCB3aWxsIGFkZCB0aGUgZm9yd2FyZCBzbGFzaFxyXG4gICAqIGlmIGl0IGlzIG1pc3NpbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IHBhdGggTmV3IHBhdGhcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHBhdGhcclxuICAgKi9cclxuICBwYXRoOiBsb2NhdGlvbkdldHRlclNldHRlcignJCRwYXRoJywgZnVuY3Rpb24ocGF0aCkge1xyXG4gICAgcGF0aCA9IHBhdGggPyBwYXRoLnRvU3RyaW5nKCkgOiAnJztcclxuICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PSAnLycgPyBwYXRoIDogJy8nICsgcGF0aDtcclxuICB9KSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiNzZWFyY2hcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cclxuICAgKlxyXG4gICAqIFJldHVybiBzZWFyY2ggcGFydCAoYXMgb2JqZWN0KSBvZiBjdXJyZW50IHVybCB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBDaGFuZ2Ugc2VhcmNoIHBhcnQgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cclxuICAgKlxyXG4gICAqXHJcbiAgICogYGBganNcclxuICAgKiAvLyBnaXZlbiB1cmwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cclxuICAgKiB2YXIgc2VhcmNoT2JqZWN0ID0gJGxvY2F0aW9uLnNlYXJjaCgpO1xyXG4gICAqIC8vID0+IHtmb286ICdiYXInLCBiYXo6ICd4b3hvJ31cclxuICAgKlxyXG4gICAqXHJcbiAgICogLy8gc2V0IGZvbyB0byAneWlwZWUnXHJcbiAgICogJGxvY2F0aW9uLnNlYXJjaCgnZm9vJywgJ3lpcGVlJyk7XHJcbiAgICogLy8gPT4gJGxvY2F0aW9uXHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZz58T2JqZWN0LjxBcnJheS48c3RyaW5nPj59IHNlYXJjaCBOZXcgc2VhcmNoIHBhcmFtcyAtIHN0cmluZyBvclxyXG4gICAqIGhhc2ggb2JqZWN0LlxyXG4gICAqXHJcbiAgICogV2hlbiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCB0aGUgbWV0aG9kIGFjdHMgYXMgYSBzZXR0ZXIsIHNldHRpbmcgdGhlIGBzZWFyY2hgIGNvbXBvbmVudFxyXG4gICAqIG9mIGAkbG9jYXRpb25gIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUuXHJcbiAgICpcclxuICAgKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBoYXNoIG9iamVjdCBjb250YWluaW5nIGFuIGFycmF5IG9mIHZhbHVlcywgdGhlc2UgdmFsdWVzIHdpbGwgYmUgZW5jb2RlZFxyXG4gICAqIGFzIGR1cGxpY2F0ZSBzZWFyY2ggcGFyYW1ldGVycyBpbiB0aGUgdXJsLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsoc3RyaW5nfE51bWJlcnxBcnJheTxzdHJpbmc+fGJvb2xlYW4pPX0gcGFyYW1WYWx1ZSBJZiBgc2VhcmNoYCBpcyBhIHN0cmluZyBvciBudW1iZXIsIHRoZW4gYHBhcmFtVmFsdWVgXHJcbiAgICogd2lsbCBvdmVycmlkZSBvbmx5IGEgc2luZ2xlIHNlYXJjaCBwcm9wZXJ0eS5cclxuICAgKlxyXG4gICAqIElmIGBwYXJhbVZhbHVlYCBpcyBhbiBhcnJheSwgaXQgd2lsbCBvdmVycmlkZSB0aGUgcHJvcGVydHkgb2YgdGhlIGBzZWFyY2hgIGNvbXBvbmVudCBvZlxyXG4gICAqIGAkbG9jYXRpb25gIHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50LlxyXG4gICAqXHJcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGBudWxsYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgZGVsZXRlZC5cclxuICAgKlxyXG4gICAqIElmIGBwYXJhbVZhbHVlYCBpcyBgdHJ1ZWAsIHRoZSBwcm9wZXJ0eSBzcGVjaWZpZWQgdmlhIHRoZSBmaXJzdCBhcmd1bWVudCB3aWxsIGJlIGFkZGVkIHdpdGggbm9cclxuICAgKiB2YWx1ZSBub3IgdHJhaWxpbmcgZXF1YWwgc2lnbi5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gSWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzIHJldHVybnMgdGhlIHBhcnNlZCBgc2VhcmNoYCBvYmplY3QuIElmIGNhbGxlZCB3aXRoXHJcbiAgICogb25lIG9yIG1vcmUgYXJndW1lbnRzIHJldHVybnMgYCRsb2NhdGlvbmAgb2JqZWN0IGl0c2VsZi5cclxuICAgKi9cclxuICBzZWFyY2g6IGZ1bmN0aW9uKHNlYXJjaCwgcGFyYW1WYWx1ZSkge1xyXG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgIGNhc2UgMDpcclxuICAgICAgICByZXR1cm4gdGhpcy4kJHNlYXJjaDtcclxuICAgICAgY2FzZSAxOlxyXG4gICAgICAgIGlmIChpc1N0cmluZyhzZWFyY2gpIHx8IGlzTnVtYmVyKHNlYXJjaCkpIHtcclxuICAgICAgICAgIHNlYXJjaCA9IHNlYXJjaC50b1N0cmluZygpO1xyXG4gICAgICAgICAgdGhpcy4kJHNlYXJjaCA9IHBhcnNlS2V5VmFsdWUoc2VhcmNoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNlYXJjaCkpIHtcclxuICAgICAgICAgIC8vIHJlbW92ZSBvYmplY3QgdW5kZWZpbmVkIG9yIG51bGwgcHJvcGVydGllc1xyXG4gICAgICAgICAgZm9yRWFjaChzZWFyY2gsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIGRlbGV0ZSBzZWFyY2hba2V5XTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHRoaXMuJCRzZWFyY2ggPSBzZWFyY2g7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignaXNyY2hhcmcnLFxyXG4gICAgICAgICAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgb2YgdGhlIGAkbG9jYXRpb24jc2VhcmNoKClgIGNhbGwgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBvYmplY3QuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChwYXJhbVZhbHVlKSB8fCBwYXJhbVZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICBkZWxldGUgdGhpcy4kJHNlYXJjaFtzZWFyY2hdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLiQkc2VhcmNoW3NlYXJjaF0gPSBwYXJhbVZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLiQkY29tcG9zZSgpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiNoYXNoXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXHJcbiAgICpcclxuICAgKiBSZXR1cm4gaGFzaCBmcmFnbWVudCB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBDaGFuZ2UgaGFzaCBmcmFnbWVudCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcik9fSBoYXNoIE5ldyBoYXNoIGZyYWdtZW50XHJcbiAgICogQHJldHVybiB7c3RyaW5nfSBoYXNoXHJcbiAgICovXHJcbiAgaGFzaDogbG9jYXRpb25HZXR0ZXJTZXR0ZXIoJyQkaGFzaCcsIGZ1bmN0aW9uKGhhc2gpIHtcclxuICAgIHJldHVybiBoYXNoID8gaGFzaC50b1N0cmluZygpIDogJyc7XHJcbiAgfSksXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jcmVwbGFjZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogSWYgY2FsbGVkLCBhbGwgY2hhbmdlcyB0byAkbG9jYXRpb24gZHVyaW5nIGN1cnJlbnQgYCRkaWdlc3RgIHdpbGwgYmUgcmVwbGFjaW5nIGN1cnJlbnQgaGlzdG9yeVxyXG4gICAqIHJlY29yZCwgaW5zdGVhZCBvZiBhZGRpbmcgbmV3IG9uZS5cclxuICAgKi9cclxuICByZXBsYWNlOiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuJCRyZXBsYWNlID0gdHJ1ZTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIGxvY2F0aW9uR2V0dGVyKHByb3BlcnR5KSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXNbcHJvcGVydHldO1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBsb2NhdGlvbkdldHRlclNldHRlcihwcm9wZXJ0eSwgcHJlcHJvY2Vzcykge1xyXG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcclxuICAgICAgcmV0dXJuIHRoaXNbcHJvcGVydHldO1xyXG5cclxuICAgIHRoaXNbcHJvcGVydHldID0gcHJlcHJvY2Vzcyh2YWx1ZSk7XHJcbiAgICB0aGlzLiQkY29tcG9zZSgpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJGxvY2F0aW9uXHJcbiAqXHJcbiAqIEByZXF1aXJlcyAkcm9vdEVsZW1lbnRcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSAkbG9jYXRpb24gc2VydmljZSBwYXJzZXMgdGhlIFVSTCBpbiB0aGUgYnJvd3NlciBhZGRyZXNzIGJhciAoYmFzZWQgb24gdGhlXHJcbiAqIFt3aW5kb3cubG9jYXRpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL3dpbmRvdy5sb2NhdGlvbikpIGFuZCBtYWtlcyB0aGUgVVJMXHJcbiAqIGF2YWlsYWJsZSB0byB5b3VyIGFwcGxpY2F0aW9uLiBDaGFuZ2VzIHRvIHRoZSBVUkwgaW4gdGhlIGFkZHJlc3MgYmFyIGFyZSByZWZsZWN0ZWQgaW50b1xyXG4gKiAkbG9jYXRpb24gc2VydmljZSBhbmQgY2hhbmdlcyB0byAkbG9jYXRpb24gYXJlIHJlZmxlY3RlZCBpbnRvIHRoZSBicm93c2VyIGFkZHJlc3MgYmFyLlxyXG4gKlxyXG4gKiAqKlRoZSAkbG9jYXRpb24gc2VydmljZToqKlxyXG4gKlxyXG4gKiAtIEV4cG9zZXMgdGhlIGN1cnJlbnQgVVJMIGluIHRoZSBicm93c2VyIGFkZHJlc3MgYmFyLCBzbyB5b3UgY2FuXHJcbiAqICAgLSBXYXRjaCBhbmQgb2JzZXJ2ZSB0aGUgVVJMLlxyXG4gKiAgIC0gQ2hhbmdlIHRoZSBVUkwuXHJcbiAqIC0gU3luY2hyb25pemVzIHRoZSBVUkwgd2l0aCB0aGUgYnJvd3NlciB3aGVuIHRoZSB1c2VyXHJcbiAqICAgLSBDaGFuZ2VzIHRoZSBhZGRyZXNzIGJhci5cclxuICogICAtIENsaWNrcyB0aGUgYmFjayBvciBmb3J3YXJkIGJ1dHRvbiAob3IgY2xpY2tzIGEgSGlzdG9yeSBsaW5rKS5cclxuICogICAtIENsaWNrcyBvbiBhIGxpbmsuXHJcbiAqIC0gUmVwcmVzZW50cyB0aGUgVVJMIG9iamVjdCBhcyBhIHNldCBvZiBtZXRob2RzIChwcm90b2NvbCwgaG9zdCwgcG9ydCwgcGF0aCwgc2VhcmNoLCBoYXNoKS5cclxuICpcclxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIHtAbGluayBndWlkZS8kbG9jYXRpb24gRGV2ZWxvcGVyIEd1aWRlOiBVc2luZyAkbG9jYXRpb259XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkbG9jYXRpb25Qcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVXNlIHRoZSBgJGxvY2F0aW9uUHJvdmlkZXJgIHRvIGNvbmZpZ3VyZSBob3cgdGhlIGFwcGxpY2F0aW9uIGRlZXAgbGlua2luZyBwYXRocyBhcmUgc3RvcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gJExvY2F0aW9uUHJvdmlkZXIoKXtcclxuICB2YXIgaGFzaFByZWZpeCA9ICcnLFxyXG4gICAgICBodG1sNU1vZGUgPSBmYWxzZTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvblByb3ZpZGVyI2hhc2hQcmVmaXhcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHByZWZpeCBQcmVmaXggZm9yIGhhc2ggcGFydCAoY29udGFpbmluZyBwYXRoIGFuZCBzZWFyY2gpXHJcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcclxuICAgKi9cclxuICB0aGlzLmhhc2hQcmVmaXggPSBmdW5jdGlvbihwcmVmaXgpIHtcclxuICAgIGlmIChpc0RlZmluZWQocHJlZml4KSkge1xyXG4gICAgICBoYXNoUHJlZml4ID0gcHJlZml4O1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBoYXNoUHJlZml4O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb25Qcm92aWRlciNodG1sNU1vZGVcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBtb2RlIFVzZSBIVE1MNSBzdHJhdGVneSBpZiBhdmFpbGFibGUuXHJcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcclxuICAgKi9cclxuICB0aGlzLmh0bWw1TW9kZSA9IGZ1bmN0aW9uKG1vZGUpIHtcclxuICAgIGlmIChpc0RlZmluZWQobW9kZSkpIHtcclxuICAgICAgaHRtbDVNb2RlID0gbW9kZTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gaHRtbDVNb2RlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBldmVudFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiMkbG9jYXRpb25DaGFuZ2VTdGFydFxyXG4gICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHJvb3Qgc2NvcGVcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBCcm9hZGNhc3RlZCBiZWZvcmUgYSBVUkwgd2lsbCBjaGFuZ2UuIFRoaXMgY2hhbmdlIGNhbiBiZSBwcmV2ZW50ZWQgYnkgY2FsbGluZ1xyXG4gICAqIGBwcmV2ZW50RGVmYXVsdGAgbWV0aG9kIG9mIHRoZSBldmVudC4gU2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0gZm9yIG1vcmVcclxuICAgKiBkZXRhaWxzIGFib3V0IGV2ZW50IG9iamVjdC4gVXBvbiBzdWNjZXNzZnVsIGNoYW5nZVxyXG4gICAqIHtAbGluayBuZy4kbG9jYXRpb24jZXZlbnRzXyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc30gaXMgZmlyZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld1VybCBOZXcgVVJMXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGV2ZW50XHJcbiAgICogQG5hbWUgJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcclxuICAgKiBAZXZlbnRUeXBlIGJyb2FkY2FzdCBvbiByb290IHNjb3BlXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQnJvYWRjYXN0ZWQgYWZ0ZXIgYSBVUkwgd2FzIGNoYW5nZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld1VybCBOZXcgVVJMXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cclxuICAgKi9cclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRicm93c2VyJywgJyRzbmlmZmVyJywgJyRyb290RWxlbWVudCcsXHJcbiAgICAgIGZ1bmN0aW9uKCAkcm9vdFNjb3BlLCAgICRicm93c2VyLCAgICRzbmlmZmVyLCAgICRyb290RWxlbWVudCkge1xyXG4gICAgdmFyICRsb2NhdGlvbixcclxuICAgICAgICBMb2NhdGlvbk1vZGUsXHJcbiAgICAgICAgYmFzZUhyZWYgPSAkYnJvd3Nlci5iYXNlSHJlZigpLCAvLyBpZiBiYXNlW2hyZWZdIGlzIHVuZGVmaW5lZCwgaXQgZGVmYXVsdHMgdG8gJydcclxuICAgICAgICBpbml0aWFsVXJsID0gJGJyb3dzZXIudXJsKCksXHJcbiAgICAgICAgYXBwQmFzZTtcclxuXHJcbiAgICBpZiAoaHRtbDVNb2RlKSB7XHJcbiAgICAgIGlmICghYmFzZUhyZWYpIHtcclxuICAgICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ25vYmFzZScsXHJcbiAgICAgICAgICBcIiRsb2NhdGlvbiBpbiBIVE1MNSBtb2RlIHJlcXVpcmVzIGEgPGJhc2U+IHRhZyB0byBiZSBwcmVzZW50IVwiKTtcclxuICAgICAgfVxyXG4gICAgICBhcHBCYXNlID0gc2VydmVyQmFzZShpbml0aWFsVXJsKSArIChiYXNlSHJlZiB8fCAnLycpO1xyXG4gICAgICBMb2NhdGlvbk1vZGUgPSAkc25pZmZlci5oaXN0b3J5ID8gTG9jYXRpb25IdG1sNVVybCA6IExvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXBwQmFzZSA9IHN0cmlwSGFzaChpbml0aWFsVXJsKTtcclxuICAgICAgTG9jYXRpb25Nb2RlID0gTG9jYXRpb25IYXNoYmFuZ1VybDtcclxuICAgIH1cclxuICAgICRsb2NhdGlvbiA9IG5ldyBMb2NhdGlvbk1vZGUoYXBwQmFzZSwgJyMnICsgaGFzaFByZWZpeCk7XHJcbiAgICAkbG9jYXRpb24uJCRwYXJzZUxpbmtVcmwoaW5pdGlhbFVybCwgaW5pdGlhbFVybCk7XHJcblxyXG4gICAgdmFyIElHTk9SRV9VUklfUkVHRVhQID0gL15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtcclxuXHJcbiAgICAkcm9vdEVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgLy8gVE9ETyh2b2p0YSk6IHJld3JpdGUgbGluayB3aGVuIG9wZW5pbmcgaW4gbmV3IHRhYi93aW5kb3cgKGluIGxlZ2FjeSBicm93c2VyKVxyXG4gICAgICAvLyBjdXJyZW50bHkgd2Ugb3BlbiBuaWNlIHVybCBsaW5rIGFuZCByZWRpcmVjdCB0aGVuXHJcblxyXG4gICAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LndoaWNoID09IDIpIHJldHVybjtcclxuXHJcbiAgICAgIHZhciBlbG0gPSBqcUxpdGUoZXZlbnQudGFyZ2V0KTtcclxuXHJcbiAgICAgIC8vIHRyYXZlcnNlIHRoZSBET00gdXAgdG8gZmluZCBmaXJzdCBBIHRhZ1xyXG4gICAgICB3aGlsZSAobm9kZU5hbWVfKGVsbVswXSkgIT09ICdhJykge1xyXG4gICAgICAgIC8vIGlnbm9yZSByZXdyaXRpbmcgaWYgbm8gQSB0YWcgKHJlYWNoZWQgcm9vdCBlbGVtZW50LCBvciBubyBwYXJlbnQgLSByZW1vdmVkIGZyb20gZG9jdW1lbnQpXHJcbiAgICAgICAgaWYgKGVsbVswXSA9PT0gJHJvb3RFbGVtZW50WzBdIHx8ICEoZWxtID0gZWxtLnBhcmVudCgpKVswXSkgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgYWJzSHJlZiA9IGVsbS5wcm9wKCdocmVmJyk7XHJcbiAgICAgIC8vIGdldCB0aGUgYWN0dWFsIGhyZWYgYXR0cmlidXRlIC0gc2VlXHJcbiAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kZDM0NzE0OCh2PXZzLjg1KS5hc3B4XHJcbiAgICAgIHZhciByZWxIcmVmID0gZWxtLmF0dHIoJ2hyZWYnKSB8fCBlbG0uYXR0cigneGxpbms6aHJlZicpO1xyXG5cclxuICAgICAgaWYgKGlzT2JqZWN0KGFic0hyZWYpICYmIGFic0hyZWYudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xyXG4gICAgICAgIC8vIFNWR0FuaW1hdGVkU3RyaW5nLmFuaW1WYWwgc2hvdWxkIGJlIGlkZW50aWNhbCB0byBTVkdBbmltYXRlZFN0cmluZy5iYXNlVmFsLCB1bmxlc3MgZHVyaW5nXHJcbiAgICAgICAgLy8gYW4gYW5pbWF0aW9uLlxyXG4gICAgICAgIGFic0hyZWYgPSB1cmxSZXNvbHZlKGFic0hyZWYuYW5pbVZhbCkuaHJlZjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWdub3JlIHdoZW4gdXJsIGlzIHN0YXJ0ZWQgd2l0aCBqYXZhc2NyaXB0OiBvciBtYWlsdG86XHJcbiAgICAgIGlmIChJR05PUkVfVVJJX1JFR0VYUC50ZXN0KGFic0hyZWYpKSByZXR1cm47XHJcblxyXG4gICAgICBpZiAoYWJzSHJlZiAmJiAhZWxtLmF0dHIoJ3RhcmdldCcpICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xyXG4gICAgICAgIGlmICgkbG9jYXRpb24uJCRwYXJzZUxpbmtVcmwoYWJzSHJlZiwgcmVsSHJlZikpIHtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAvLyB1cGRhdGUgbG9jYXRpb24gbWFudWFsbHlcclxuICAgICAgICAgIGlmICgkbG9jYXRpb24uYWJzVXJsKCkgIT0gJGJyb3dzZXIudXJsKCkpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgLy8gaGFjayB0byB3b3JrIGFyb3VuZCBGRjYgYnVnIDY4NDIwOCB3aGVuIHNjZW5hcmlvIHJ1bm5lciBjbGlja3Mgb24gbGlua3NcclxuICAgICAgICAgICAgd2luZG93LmFuZ3VsYXJbJ2ZmLTY4NDIwOC1wcmV2ZW50RGVmYXVsdCddID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvLyByZXdyaXRlIGhhc2hiYW5nIHVybCA8PiBodG1sNSB1cmxcclxuICAgIGlmICgkbG9jYXRpb24uYWJzVXJsKCkgIT0gaW5pdGlhbFVybCkge1xyXG4gICAgICAkYnJvd3Nlci51cmwoJGxvY2F0aW9uLmFic1VybCgpLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB1cGRhdGUgJGxvY2F0aW9uIHdoZW4gJGJyb3dzZXIgdXJsIGNoYW5nZXNcclxuICAgICRicm93c2VyLm9uVXJsQ2hhbmdlKGZ1bmN0aW9uKG5ld1VybCkge1xyXG4gICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9IG5ld1VybCkge1xyXG4gICAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBvbGRVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XHJcblxyXG4gICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2UobmV3VXJsKTtcclxuICAgICAgICAgIGlmICgkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRVcmwpLmRlZmF1bHRQcmV2ZW50ZWQpIHtcclxuICAgICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcclxuICAgICAgICAgICAgJGJyb3dzZXIudXJsKG9sZFVybCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhZnRlckxvY2F0aW9uQ2hhbmdlKG9sZFVybCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyB1cGRhdGUgYnJvd3NlclxyXG4gICAgdmFyIGNoYW5nZUNvdW50ZXIgPSAwO1xyXG4gICAgJHJvb3RTY29wZS4kd2F0Y2goZnVuY3Rpb24gJGxvY2F0aW9uV2F0Y2goKSB7XHJcbiAgICAgIHZhciBvbGRVcmwgPSAkYnJvd3Nlci51cmwoKTtcclxuICAgICAgdmFyIGN1cnJlbnRSZXBsYWNlID0gJGxvY2F0aW9uLiQkcmVwbGFjZTtcclxuXHJcbiAgICAgIGlmICghY2hhbmdlQ291bnRlciB8fCBvbGRVcmwgIT0gJGxvY2F0aW9uLmFic1VybCgpKSB7XHJcbiAgICAgICAgY2hhbmdlQ291bnRlcisrO1xyXG4gICAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgJGxvY2F0aW9uLmFic1VybCgpLCBvbGRVcmwpLlxyXG4gICAgICAgICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQpIHtcclxuICAgICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRicm93c2VyLnVybCgkbG9jYXRpb24uYWJzVXJsKCksIGN1cnJlbnRSZXBsYWNlKTtcclxuICAgICAgICAgICAgYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgICRsb2NhdGlvbi4kJHJlcGxhY2UgPSBmYWxzZTtcclxuXHJcbiAgICAgIHJldHVybiBjaGFuZ2VDb3VudGVyO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICRsb2NhdGlvbjtcclxuXHJcbiAgICBmdW5jdGlvbiBhZnRlckxvY2F0aW9uQ2hhbmdlKG9sZFVybCkge1xyXG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCAkbG9jYXRpb24uYWJzVXJsKCksIG9sZFVybCk7XHJcbiAgICB9XHJcbn1dO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJGxvZ1xyXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU2ltcGxlIHNlcnZpY2UgZm9yIGxvZ2dpbmcuIERlZmF1bHQgaW1wbGVtZW50YXRpb24gc2FmZWx5IHdyaXRlcyB0aGUgbWVzc2FnZVxyXG4gKiBpbnRvIHRoZSBicm93c2VyJ3MgY29uc29sZSAoaWYgcHJlc2VudCkuXHJcbiAqXHJcbiAqIFRoZSBtYWluIHB1cnBvc2Ugb2YgdGhpcyBzZXJ2aWNlIGlzIHRvIHNpbXBsaWZ5IGRlYnVnZ2luZyBhbmQgdHJvdWJsZXNob290aW5nLlxyXG4gKlxyXG4gKiBUaGUgZGVmYXVsdCBpcyB0byBsb2cgYGRlYnVnYCBtZXNzYWdlcy4gWW91IGNhbiB1c2VcclxuICoge0BsaW5rIG5nLiRsb2dQcm92aWRlciBuZy4kbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkfSB0byBjaGFuZ2UgdGhpcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwibG9nRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdsb2dFeGFtcGxlJywgW10pXHJcbiAgICAgICAgIC5jb250cm9sbGVyKCdMb2dDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvZycsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZykge1xyXG4gICAgICAgICAgICRzY29wZS4kbG9nID0gJGxvZztcclxuICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9ICdIZWxsbyBXb3JsZCEnO1xyXG4gICAgICAgICB9XSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJMb2dDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxwPlJlbG9hZCB0aGlzIHBhZ2Ugd2l0aCBvcGVuIGNvbnNvbGUsIGVudGVyIHRleHQgYW5kIGhpdCB0aGUgbG9nIGJ1dHRvbi4uLjwvcD5cclxuICAgICAgICAgTWVzc2FnZTpcclxuICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJtZXNzYWdlXCIvPlxyXG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5sb2cobWVzc2FnZSlcIj5sb2c8L2J1dHRvbj5cclxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cud2FybihtZXNzYWdlKVwiPndhcm48L2J1dHRvbj5cclxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cuaW5mbyhtZXNzYWdlKVwiPmluZm88L2J1dHRvbj5cclxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cuZXJyb3IobWVzc2FnZSlcIj5lcnJvcjwvYnV0dG9uPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkbG9nUHJvdmlkZXJcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzZSB0aGUgYCRsb2dQcm92aWRlcmAgdG8gY29uZmlndXJlIGhvdyB0aGUgYXBwbGljYXRpb24gbG9ncyBtZXNzYWdlc1xyXG4gKi9cclxuZnVuY3Rpb24gJExvZ1Byb3ZpZGVyKCl7XHJcbiAgdmFyIGRlYnVnID0gdHJ1ZSxcclxuICAgICAgc2VsZiA9IHRoaXM7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZmxhZyBlbmFibGUgb3IgZGlzYWJsZSBkZWJ1ZyBsZXZlbCBtZXNzYWdlc1xyXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXHJcbiAgICovXHJcbiAgdGhpcy5kZWJ1Z0VuYWJsZWQgPSBmdW5jdGlvbihmbGFnKSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKGZsYWcpKSB7XHJcbiAgICAgIGRlYnVnID0gZmxhZztcclxuICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGRlYnVnO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGxvZyNsb2dcclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFdyaXRlIGEgbG9nIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIGxvZzogY29uc29sZUxvZygnbG9nJyksXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkbG9nI2luZm9cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFdyaXRlIGFuIGluZm9ybWF0aW9uIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIGluZm86IGNvbnNvbGVMb2coJ2luZm8nKSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRsb2cjd2FyblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogV3JpdGUgYSB3YXJuaW5nIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIHdhcm46IGNvbnNvbGVMb2coJ3dhcm4nKSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRsb2cjZXJyb3JcclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFdyaXRlIGFuIGVycm9yIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIGVycm9yOiBjb25zb2xlTG9nKCdlcnJvcicpLFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGxvZyNkZWJ1Z1xyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogV3JpdGUgYSBkZWJ1ZyBtZXNzYWdlXHJcbiAgICAgICAqL1xyXG4gICAgICBkZWJ1ZzogKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZm4gPSBjb25zb2xlTG9nKCdkZWJ1ZycpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZGVidWcpIHtcclxuICAgICAgICAgICAgZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KCkpXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGZvcm1hdEVycm9yKGFyZykge1xyXG4gICAgICBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICBpZiAoYXJnLnN0YWNrKSB7XHJcbiAgICAgICAgICBhcmcgPSAoYXJnLm1lc3NhZ2UgJiYgYXJnLnN0YWNrLmluZGV4T2YoYXJnLm1lc3NhZ2UpID09PSAtMSlcclxuICAgICAgICAgICAgICA/ICdFcnJvcjogJyArIGFyZy5tZXNzYWdlICsgJ1xcbicgKyBhcmcuc3RhY2tcclxuICAgICAgICAgICAgICA6IGFyZy5zdGFjaztcclxuICAgICAgICB9IGVsc2UgaWYgKGFyZy5zb3VyY2VVUkwpIHtcclxuICAgICAgICAgIGFyZyA9IGFyZy5tZXNzYWdlICsgJ1xcbicgKyBhcmcuc291cmNlVVJMICsgJzonICsgYXJnLmxpbmU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhcmc7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29uc29sZUxvZyh0eXBlKSB7XHJcbiAgICAgIHZhciBjb25zb2xlID0gJHdpbmRvdy5jb25zb2xlIHx8IHt9LFxyXG4gICAgICAgICAgbG9nRm4gPSBjb25zb2xlW3R5cGVdIHx8IGNvbnNvbGUubG9nIHx8IG5vb3AsXHJcbiAgICAgICAgICBoYXNBcHBseSA9IGZhbHNlO1xyXG5cclxuICAgICAgLy8gTm90ZTogcmVhZGluZyBsb2dGbi5hcHBseSB0aHJvd3MgYW4gZXJyb3IgaW4gSUUxMSBpbiBJRTggZG9jdW1lbnQgbW9kZS5cclxuICAgICAgLy8gVGhlIHJlYXNvbiBiZWhpbmQgdGhpcyBpcyB0aGF0IGNvbnNvbGUubG9nIGhhcyB0eXBlIFwib2JqZWN0XCIgaW4gSUU4Li4uXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaGFzQXBwbHkgPSAhIWxvZ0ZuLmFwcGx5O1xyXG4gICAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgICAgaWYgKGhhc0FwcGx5KSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihhcmcpIHtcclxuICAgICAgICAgICAgYXJncy5wdXNoKGZvcm1hdEVycm9yKGFyZykpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm4gbG9nRm4uYXBwbHkoY29uc29sZSwgYXJncyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gd2UgYXJlIElFIHdoaWNoIGVpdGhlciBkb2Vzbid0IGhhdmUgd2luZG93LmNvbnNvbGUgPT4gdGhpcyBpcyBub29wIGFuZCB3ZSBkbyBub3RoaW5nLFxyXG4gICAgICAvLyBvciB3ZSBhcmUgSUUgd2hlcmUgY29uc29sZS5sb2cgZG9lc24ndCBoYXZlIGFwcGx5IHNvIHdlIGxvZyBhdCBsZWFzdCBmaXJzdCAyIGFyZ3NcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFyZzEsIGFyZzIpIHtcclxuICAgICAgICBsb2dGbihhcmcxLCBhcmcyID09IG51bGwgPyAnJyA6IGFyZzIpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1dO1xyXG59XHJcblxyXG52YXIgJHBhcnNlTWluRXJyID0gbWluRXJyKCckcGFyc2UnKTtcclxuXHJcbi8vIFNhbmRib3hpbmcgQW5ndWxhciBFeHByZXNzaW9uc1xyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gQW5ndWxhciBleHByZXNzaW9ucyBhcmUgZ2VuZXJhbGx5IGNvbnNpZGVyZWQgc2FmZSBiZWNhdXNlIHRoZXNlIGV4cHJlc3Npb25zIG9ubHkgaGF2ZSBkaXJlY3RcclxuLy8gYWNjZXNzIHRvICRzY29wZSBhbmQgbG9jYWxzLiBIb3dldmVyLCBvbmUgY2FuIG9idGFpbiB0aGUgYWJpbGl0eSB0byBleGVjdXRlIGFyYml0cmFyeSBKUyBjb2RlIGJ5XHJcbi8vIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byBuYXRpdmUgSlMgZnVuY3Rpb25zIHN1Y2ggYXMgdGhlIEZ1bmN0aW9uIGNvbnN0cnVjdG9yLlxyXG4vL1xyXG4vLyBBcyBhbiBleGFtcGxlLCBjb25zaWRlciB0aGUgZm9sbG93aW5nIEFuZ3VsYXIgZXhwcmVzc2lvbjpcclxuLy9cclxuLy8gICB7fS50b1N0cmluZy5jb25zdHJ1Y3RvcignYWxlcnQoXCJldmlsIEpTIGNvZGVcIiknKVxyXG4vL1xyXG4vLyBUaGlzIHNhbmRib3hpbmcgdGVjaG5pcXVlIGlzIG5vdCBwZXJmZWN0IGFuZCBkb2Vzbid0IGFpbSB0byBiZS4gVGhlIGdvYWwgaXMgdG8gcHJldmVudCBleHBsb2l0c1xyXG4vLyBhZ2FpbnN0IHRoZSBleHByZXNzaW9uIGxhbmd1YWdlLCBidXQgbm90IHRvIHByZXZlbnQgZXhwbG9pdHMgdGhhdCB3ZXJlIGVuYWJsZWQgYnkgZXhwb3NpbmdcclxuLy8gc2Vuc2l0aXZlIEphdmFTY3JpcHQgb3IgYnJvd3NlciBhcGlzIG9uIFNjb3BlLiBFeHBvc2luZyBzdWNoIG9iamVjdHMgb24gYSBTY29wZSBpcyBuZXZlciBhIGdvb2RcclxuLy8gcHJhY3RpY2UgYW5kIHRoZXJlZm9yZSB3ZSBhcmUgbm90IGV2ZW4gdHJ5aW5nIHRvIHByb3RlY3QgYWdhaW5zdCBpbnRlcmFjdGlvbiB3aXRoIGFuIG9iamVjdFxyXG4vLyBleHBsaWNpdGx5IGV4cG9zZWQgaW4gdGhpcyB3YXkuXHJcbi8vXHJcbi8vIEluIGdlbmVyYWwsIGl0IGlzIG5vdCBwb3NzaWJsZSB0byBhY2Nlc3MgYSBXaW5kb3cgb2JqZWN0IGZyb20gYW4gYW5ndWxhciBleHByZXNzaW9uIHVubGVzcyBhXHJcbi8vIHdpbmRvdyBvciBzb21lIERPTSBvYmplY3QgdGhhdCBoYXMgYSByZWZlcmVuY2UgdG8gd2luZG93IGlzIHB1Ymxpc2hlZCBvbnRvIGEgU2NvcGUuXHJcbi8vIFNpbWlsYXJseSB3ZSBwcmV2ZW50IGludm9jYXRpb25zIG9mIGZ1bmN0aW9uIGtub3duIHRvIGJlIGRhbmdlcm91cywgYXMgd2VsbCBhcyBhc3NpZ25tZW50cyB0b1xyXG4vLyBuYXRpdmUgb2JqZWN0cy5cclxuXHJcblxyXG5mdW5jdGlvbiBlbnN1cmVTYWZlTWVtYmVyTmFtZShuYW1lLCBmdWxsRXhwcmVzc2lvbikge1xyXG4gIGlmIChuYW1lID09PSBcIl9fZGVmaW5lR2V0dGVyX19cIiB8fCBuYW1lID09PSBcIl9fZGVmaW5lU2V0dGVyX19cIlxyXG4gICAgICB8fCBuYW1lID09PSBcIl9fbG9va3VwR2V0dGVyX19cIiB8fCBuYW1lID09PSBcIl9fbG9va3VwU2V0dGVyX19cIlxyXG4gICAgICB8fCBuYW1lID09PSBcIl9fcHJvdG9fX1wiKSB7XHJcbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmbGQnLFxyXG4gICAgICAgICdBdHRlbXB0aW5nIHRvIGFjY2VzcyBhIGRpc2FsbG93ZWQgZmllbGQgaW4gQW5ndWxhciBleHByZXNzaW9ucyEgJ1xyXG4gICAgICAgICsnRXhwcmVzc2lvbjogezB9JywgZnVsbEV4cHJlc3Npb24pO1xyXG4gIH1cclxuICByZXR1cm4gbmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5zdXJlU2FmZU9iamVjdChvYmosIGZ1bGxFeHByZXNzaW9uKSB7XHJcbiAgLy8gbmlmdHkgY2hlY2sgaWYgb2JqIGlzIEZ1bmN0aW9uIHRoYXQgaXMgZmFzdCBhbmQgd29ya3MgYWNyb3NzIGlmcmFtZXMgYW5kIG90aGVyIGNvbnRleHRzXHJcbiAgaWYgKG9iaikge1xyXG4gICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gb2JqKSB7XHJcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2ZuJyxcclxuICAgICAgICAgICdSZWZlcmVuY2luZyBGdW5jdGlvbiBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsXHJcbiAgICAgICAgICBmdWxsRXhwcmVzc2lvbik7XHJcbiAgICB9IGVsc2UgaWYgKC8vIGlzV2luZG93KG9iailcclxuICAgICAgICBvYmoud2luZG93ID09PSBvYmopIHtcclxuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCdpc2Vjd2luZG93JyxcclxuICAgICAgICAgICdSZWZlcmVuY2luZyB0aGUgV2luZG93IGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxcclxuICAgICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcclxuICAgIH0gZWxzZSBpZiAoLy8gaXNFbGVtZW50KG9iailcclxuICAgICAgICBvYmouY2hpbGRyZW4gJiYgKG9iai5ub2RlTmFtZSB8fCAob2JqLnByb3AgJiYgb2JqLmF0dHIgJiYgb2JqLmZpbmQpKSkge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNkb20nLFxyXG4gICAgICAgICAgJ1JlZmVyZW5jaW5nIERPTSBub2RlcyBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsXHJcbiAgICAgICAgICBmdWxsRXhwcmVzc2lvbik7XHJcbiAgICB9IGVsc2UgaWYgKC8vIGJsb2NrIE9iamVjdCBzbyB0aGF0IHdlIGNhbid0IGdldCBob2xkIG9mIGRhbmdlcm91cyBPYmplY3QuKiBtZXRob2RzXHJcbiAgICAgICAgb2JqID09PSBPYmplY3QpIHtcclxuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCdpc2Vjb2JqJyxcclxuICAgICAgICAgICdSZWZlcmVuY2luZyBPYmplY3QgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxyXG4gICAgICAgICAgZnVsbEV4cHJlc3Npb24pO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG52YXIgQ0FMTCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO1xyXG52YXIgQVBQTFkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XHJcbnZhciBCSU5EID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7XHJcblxyXG5mdW5jdGlvbiBlbnN1cmVTYWZlRnVuY3Rpb24ob2JqLCBmdWxsRXhwcmVzc2lvbikge1xyXG4gIGlmIChvYmopIHtcclxuICAgIGlmIChvYmouY29uc3RydWN0b3IgPT09IG9iaikge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmbicsXHJcbiAgICAgICAgJ1JlZmVyZW5jaW5nIEZ1bmN0aW9uIGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxcclxuICAgICAgICBmdWxsRXhwcmVzc2lvbik7XHJcbiAgICB9IGVsc2UgaWYgKG9iaiA9PT0gQ0FMTCB8fCBvYmogPT09IEFQUExZIHx8IG9iaiA9PT0gQklORCkge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmZicsXHJcbiAgICAgICAgJ1JlZmVyZW5jaW5nIGNhbGwsIGFwcGx5IG9yIGJpbmQgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxyXG4gICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vS2V5d29yZCBjb25zdGFudHNcclxudmFyIENPTlNUQU5UUyA9IGNyZWF0ZU1hcCgpO1xyXG5mb3JFYWNoKHtcclxuICAnbnVsbCc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbnVsbDsgfSxcclxuICAndHJ1ZSc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcclxuICAnZmFsc2UnOiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9LFxyXG4gICd1bmRlZmluZWQnOiBmdW5jdGlvbigpIHt9XHJcbn0sIGZ1bmN0aW9uKGNvbnN0YW50R2V0dGVyLCBuYW1lKSB7XHJcbiAgY29uc3RhbnRHZXR0ZXIuY29uc3RhbnQgPSBjb25zdGFudEdldHRlci5saXRlcmFsID0gY29uc3RhbnRHZXR0ZXIuc2hhcmVkR2V0dGVyID0gdHJ1ZTtcclxuICBDT05TVEFOVFNbbmFtZV0gPSBjb25zdGFudEdldHRlcjtcclxufSk7XHJcblxyXG4vL09wZXJhdG9ycyAtIHdpbGwgYmUgd3JhcHBlZCBieSBiaW5hcnlGbi91bmFyeUZuL2Fzc2lnbm1lbnQvZmlsdGVyXHJcbnZhciBPUEVSQVRPUlMgPSBleHRlbmQoY3JlYXRlTWFwKCksIHtcclxuICAgIC8qIGpzaGludCBiaXR3aXNlIDogZmFsc2UgKi9cclxuICAgICcrJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7XHJcbiAgICAgIGE9YShzZWxmLCBsb2NhbHMpOyBiPWIoc2VsZiwgbG9jYWxzKTtcclxuICAgICAgaWYgKGlzRGVmaW5lZChhKSkge1xyXG4gICAgICAgIGlmIChpc0RlZmluZWQoYikpIHtcclxuICAgICAgICAgIHJldHVybiBhICsgYjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGlzRGVmaW5lZChiKT9iOnVuZGVmaW5lZDt9LFxyXG4gICAgJy0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtcclxuICAgICAgICAgIGE9YShzZWxmLCBsb2NhbHMpOyBiPWIoc2VsZiwgbG9jYWxzKTtcclxuICAgICAgICAgIHJldHVybiAoaXNEZWZpbmVkKGEpP2E6MCktKGlzRGVmaW5lZChiKT9iOjApO1xyXG4gICAgICAgIH0sXHJcbiAgICAnKic6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2FscykqYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnLyc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2FscykvYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnJSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2FscyklYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnXic6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2FscyleYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnPT09JzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsIGIpe3JldHVybiBhKHNlbGYsIGxvY2Fscyk9PT1iKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICchPT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSE9PWIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJz09JzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKT09YihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnIT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtyZXR1cm4gYShzZWxmLCBsb2NhbHMpIT1iKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICc8JzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKTxiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICc+JzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKT5iKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICc8PSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2Fscyk8PWIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJz49JzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsYil7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKT49YihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnJiYnOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtyZXR1cm4gYShzZWxmLCBsb2NhbHMpJiZiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICd8fCc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLGIpe3JldHVybiBhKHNlbGYsIGxvY2Fscyl8fGIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJyYnOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSxiKXtyZXR1cm4gYShzZWxmLCBsb2NhbHMpJmIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJyEnOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSl7cmV0dXJuICFhKHNlbGYsIGxvY2Fscyk7fSxcclxuXHJcbiAgICAvL1Rva2VuaXplZCBhcyBvcGVyYXRvcnMgYnV0IHBhcnNlZCBhcyBhc3NpZ25tZW50L2ZpbHRlcnNcclxuICAgICc9Jzp0cnVlLFxyXG4gICAgJ3wnOnRydWVcclxufSk7XHJcbi8qIGpzaGludCBiaXR3aXNlOiB0cnVlICovXHJcbnZhciBFU0NBUEUgPSB7XCJuXCI6XCJcXG5cIiwgXCJmXCI6XCJcXGZcIiwgXCJyXCI6XCJcXHJcIiwgXCJ0XCI6XCJcXHRcIiwgXCJ2XCI6XCJcXHZcIiwgXCInXCI6XCInXCIsICdcIic6J1wiJ307XHJcblxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG52YXIgTGV4ZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbn07XHJcblxyXG5MZXhlci5wcm90b3R5cGUgPSB7XHJcbiAgY29uc3RydWN0b3I6IExleGVyLFxyXG5cclxuICBsZXg6IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xyXG4gICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICB0aGlzLmNoID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy50b2tlbnMgPSBbXTtcclxuXHJcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5jaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XHJcbiAgICAgIGlmICh0aGlzLmlzKCdcIlxcJycpKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkU3RyaW5nKHRoaXMuY2gpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNOdW1iZXIodGhpcy5jaCkgfHwgdGhpcy5pcygnLicpICYmIHRoaXMuaXNOdW1iZXIodGhpcy5wZWVrKCkpKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkTnVtYmVyKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0lkZW50KHRoaXMuY2gpKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkSWRlbnQoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzKCcoKXt9W10uLDs6PycpKSB7XHJcbiAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7XHJcbiAgICAgICAgICBpbmRleDogdGhpcy5pbmRleCxcclxuICAgICAgICAgIHRleHQ6IHRoaXMuY2hcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1doaXRlc3BhY2UodGhpcy5jaCkpIHtcclxuICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGNoMiA9IHRoaXMuY2ggKyB0aGlzLnBlZWsoKTtcclxuICAgICAgICB2YXIgY2gzID0gY2gyICsgdGhpcy5wZWVrKDIpO1xyXG4gICAgICAgIHZhciBmbiA9IE9QRVJBVE9SU1t0aGlzLmNoXTtcclxuICAgICAgICB2YXIgZm4yID0gT1BFUkFUT1JTW2NoMl07XHJcbiAgICAgICAgdmFyIGZuMyA9IE9QRVJBVE9SU1tjaDNdO1xyXG4gICAgICAgIGlmIChmbjMpIHtcclxuICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiBjaDMsIGZuOiBmbjN9KTtcclxuICAgICAgICAgIHRoaXMuaW5kZXggKz0gMztcclxuICAgICAgICB9IGVsc2UgaWYgKGZuMikge1xyXG4gICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6IHRoaXMuaW5kZXgsIHRleHQ6IGNoMiwgZm46IGZuMn0pO1xyXG4gICAgICAgICAgdGhpcy5pbmRleCArPSAyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZm4pIHtcclxuICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe1xyXG4gICAgICAgICAgICBpbmRleDogdGhpcy5pbmRleCxcclxuICAgICAgICAgICAgdGV4dDogdGhpcy5jaCxcclxuICAgICAgICAgICAgZm46IGZuXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHRoaXMuaW5kZXggKz0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdVbmV4cGVjdGVkIG5leHQgY2hhcmFjdGVyICcsIHRoaXMuaW5kZXgsIHRoaXMuaW5kZXggKyAxKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnRva2VucztcclxuICB9LFxyXG5cclxuICBpczogZnVuY3Rpb24oY2hhcnMpIHtcclxuICAgIHJldHVybiBjaGFycy5pbmRleE9mKHRoaXMuY2gpICE9PSAtMTtcclxuICB9LFxyXG5cclxuICBwZWVrOiBmdW5jdGlvbihpKSB7XHJcbiAgICB2YXIgbnVtID0gaSB8fCAxO1xyXG4gICAgcmV0dXJuICh0aGlzLmluZGV4ICsgbnVtIDwgdGhpcy50ZXh0Lmxlbmd0aCkgPyB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXggKyBudW0pIDogZmFsc2U7XHJcbiAgfSxcclxuXHJcbiAgaXNOdW1iZXI6IGZ1bmN0aW9uKGNoKSB7XHJcbiAgICByZXR1cm4gKCcwJyA8PSBjaCAmJiBjaCA8PSAnOScpO1xyXG4gIH0sXHJcblxyXG4gIGlzV2hpdGVzcGFjZTogZnVuY3Rpb24oY2gpIHtcclxuICAgIC8vIElFIHRyZWF0cyBub24tYnJlYWtpbmcgc3BhY2UgYXMgXFx1MDBBMFxyXG4gICAgcmV0dXJuIChjaCA9PT0gJyAnIHx8IGNoID09PSAnXFxyJyB8fCBjaCA9PT0gJ1xcdCcgfHxcclxuICAgICAgICAgICAgY2ggPT09ICdcXG4nIHx8IGNoID09PSAnXFx2JyB8fCBjaCA9PT0gJ1xcdTAwQTAnKTtcclxuICB9LFxyXG5cclxuICBpc0lkZW50OiBmdW5jdGlvbihjaCkge1xyXG4gICAgcmV0dXJuICgnYScgPD0gY2ggJiYgY2ggPD0gJ3onIHx8XHJcbiAgICAgICAgICAgICdBJyA8PSBjaCAmJiBjaCA8PSAnWicgfHxcclxuICAgICAgICAgICAgJ18nID09PSBjaCB8fCBjaCA9PT0gJyQnKTtcclxuICB9LFxyXG5cclxuICBpc0V4cE9wZXJhdG9yOiBmdW5jdGlvbihjaCkge1xyXG4gICAgcmV0dXJuIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKycgfHwgdGhpcy5pc051bWJlcihjaCkpO1xyXG4gIH0sXHJcblxyXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKGVycm9yLCBzdGFydCwgZW5kKSB7XHJcbiAgICBlbmQgPSBlbmQgfHwgdGhpcy5pbmRleDtcclxuICAgIHZhciBjb2xTdHIgPSAoaXNEZWZpbmVkKHN0YXJ0KVxyXG4gICAgICAgICAgICA/ICdzICcgKyBzdGFydCArICAnLScgKyB0aGlzLmluZGV4ICsgJyBbJyArIHRoaXMudGV4dC5zdWJzdHJpbmcoc3RhcnQsIGVuZCkgKyAnXSdcclxuICAgICAgICAgICAgOiAnICcgKyBlbmQpO1xyXG4gICAgdGhyb3cgJHBhcnNlTWluRXJyKCdsZXhlcnInLCAnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLFxyXG4gICAgICAgIGVycm9yLCBjb2xTdHIsIHRoaXMudGV4dCk7XHJcbiAgfSxcclxuXHJcbiAgcmVhZE51bWJlcjogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbnVtYmVyID0gJyc7XHJcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xyXG4gICAgd2hpbGUgKHRoaXMuaW5kZXggPCB0aGlzLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgIHZhciBjaCA9IGxvd2VyY2FzZSh0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpKTtcclxuICAgICAgaWYgKGNoID09ICcuJyB8fCB0aGlzLmlzTnVtYmVyKGNoKSkge1xyXG4gICAgICAgIG51bWJlciArPSBjaDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgcGVla0NoID0gdGhpcy5wZWVrKCk7XHJcbiAgICAgICAgaWYgKGNoID09ICdlJyAmJiB0aGlzLmlzRXhwT3BlcmF0b3IocGVla0NoKSkge1xyXG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0V4cE9wZXJhdG9yKGNoKSAmJlxyXG4gICAgICAgICAgICBwZWVrQ2ggJiYgdGhpcy5pc051bWJlcihwZWVrQ2gpICYmXHJcbiAgICAgICAgICAgIG51bWJlci5jaGFyQXQobnVtYmVyLmxlbmd0aCAtIDEpID09ICdlJykge1xyXG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0V4cE9wZXJhdG9yKGNoKSAmJlxyXG4gICAgICAgICAgICAoIXBlZWtDaCB8fCAhdGhpcy5pc051bWJlcihwZWVrQ2gpKSAmJlxyXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PSAnZScpIHtcclxuICAgICAgICAgIHRoaXMudGhyb3dFcnJvcignSW52YWxpZCBleHBvbmVudCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgfVxyXG4gICAgbnVtYmVyID0gMSAqIG51bWJlcjtcclxuICAgIHRoaXMudG9rZW5zLnB1c2goe1xyXG4gICAgICBpbmRleDogc3RhcnQsXHJcbiAgICAgIHRleHQ6IG51bWJlcixcclxuICAgICAgY29uc3RhbnQ6IHRydWUsXHJcbiAgICAgIGZuOiBmdW5jdGlvbigpIHsgcmV0dXJuIG51bWJlcjsgfVxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgcmVhZElkZW50OiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBleHByZXNzaW9uID0gdGhpcy50ZXh0O1xyXG5cclxuICAgIHZhciBpZGVudCA9ICcnO1xyXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5pbmRleDtcclxuXHJcbiAgICB2YXIgbGFzdERvdCwgcGVla0luZGV4LCBtZXRob2ROYW1lLCBjaDtcclxuXHJcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcclxuICAgICAgY2ggPSB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO1xyXG4gICAgICBpZiAoY2ggPT09ICcuJyB8fCB0aGlzLmlzSWRlbnQoY2gpIHx8IHRoaXMuaXNOdW1iZXIoY2gpKSB7XHJcbiAgICAgICAgaWYgKGNoID09PSAnLicpIGxhc3REb3QgPSB0aGlzLmluZGV4O1xyXG4gICAgICAgIGlkZW50ICs9IGNoO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgIH1cclxuXHJcbiAgICAvL2NoZWNrIGlmIHRoZSBpZGVudGlmaWVyIGVuZHMgd2l0aCAuIGFuZCBpZiBzbyBtb3ZlIGJhY2sgb25lIGNoYXJcclxuICAgIGlmIChsYXN0RG90ICYmIGlkZW50W2lkZW50Lmxlbmd0aCAtIDFdID09PSAnLicpIHtcclxuICAgICAgdGhpcy5pbmRleC0tO1xyXG4gICAgICBpZGVudCA9IGlkZW50LnNsaWNlKDAsIC0xKTtcclxuICAgICAgbGFzdERvdCA9IGlkZW50Lmxhc3RJbmRleE9mKCcuJyk7XHJcbiAgICAgIGlmIChsYXN0RG90ID09PSAtMSkge1xyXG4gICAgICAgIGxhc3REb3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL2NoZWNrIGlmIHRoaXMgaXMgbm90IGEgbWV0aG9kIGludm9jYXRpb24gYW5kIGlmIGl0IGlzIGJhY2sgb3V0IHRvIGxhc3QgZG90XHJcbiAgICBpZiAobGFzdERvdCkge1xyXG4gICAgICBwZWVrSW5kZXggPSB0aGlzLmluZGV4O1xyXG4gICAgICB3aGlsZSAocGVla0luZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgIGNoID0gdGhpcy50ZXh0LmNoYXJBdChwZWVrSW5kZXgpO1xyXG4gICAgICAgIGlmIChjaCA9PT0gJygnKSB7XHJcbiAgICAgICAgICBtZXRob2ROYW1lID0gaWRlbnQuc3Vic3RyKGxhc3REb3QgLSBzdGFydCArIDEpO1xyXG4gICAgICAgICAgaWRlbnQgPSBpZGVudC5zdWJzdHIoMCwgbGFzdERvdCAtIHN0YXJ0KTtcclxuICAgICAgICAgIHRoaXMuaW5kZXggPSBwZWVrSW5kZXg7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNXaGl0ZXNwYWNlKGNoKSkge1xyXG4gICAgICAgICAgcGVla0luZGV4Kys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudG9rZW5zLnB1c2goe1xyXG4gICAgICBpbmRleDogc3RhcnQsXHJcbiAgICAgIHRleHQ6IGlkZW50LFxyXG4gICAgICBmbjogQ09OU1RBTlRTW2lkZW50XSB8fCBnZXR0ZXJGbihpZGVudCwgdGhpcy5vcHRpb25zLCBleHByZXNzaW9uKVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKG1ldGhvZE5hbWUpIHtcclxuICAgICAgdGhpcy50b2tlbnMucHVzaCh7XHJcbiAgICAgICAgaW5kZXg6IGxhc3REb3QsXHJcbiAgICAgICAgdGV4dDogJy4nXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnRva2Vucy5wdXNoKHtcclxuICAgICAgICBpbmRleDogbGFzdERvdCArIDEsXHJcbiAgICAgICAgdGV4dDogbWV0aG9kTmFtZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICByZWFkU3RyaW5nOiBmdW5jdGlvbihxdW90ZSkge1xyXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5pbmRleDtcclxuICAgIHRoaXMuaW5kZXgrKztcclxuICAgIHZhciBzdHJpbmcgPSAnJztcclxuICAgIHZhciByYXdTdHJpbmcgPSBxdW90ZTtcclxuICAgIHZhciBlc2NhcGUgPSBmYWxzZTtcclxuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xyXG4gICAgICB2YXIgY2ggPSB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO1xyXG4gICAgICByYXdTdHJpbmcgKz0gY2g7XHJcbiAgICAgIGlmIChlc2NhcGUpIHtcclxuICAgICAgICBpZiAoY2ggPT09ICd1Jykge1xyXG4gICAgICAgICAgdmFyIGhleCA9IHRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCArIDEsIHRoaXMuaW5kZXggKyA1KTtcclxuICAgICAgICAgIGlmICghaGV4Lm1hdGNoKC9bXFxkYS1mXXs0fS9pKSlcclxuICAgICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIFtcXFxcdScgKyBoZXggKyAnXScpO1xyXG4gICAgICAgICAgdGhpcy5pbmRleCArPSA0O1xyXG4gICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoaGV4LCAxNikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YXIgcmVwID0gRVNDQVBFW2NoXTtcclxuICAgICAgICAgIHN0cmluZyA9IHN0cmluZyArIChyZXAgfHwgY2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlc2NhcGUgPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIGlmIChjaCA9PT0gJ1xcXFwnKSB7XHJcbiAgICAgICAgZXNjYXBlID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIGlmIChjaCA9PT0gcXVvdGUpIHtcclxuICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7XHJcbiAgICAgICAgICBpbmRleDogc3RhcnQsXHJcbiAgICAgICAgICB0ZXh0OiByYXdTdHJpbmcsXHJcbiAgICAgICAgICBzdHJpbmc6IHN0cmluZyxcclxuICAgICAgICAgIGNvbnN0YW50OiB0cnVlLFxyXG4gICAgICAgICAgZm46IGZ1bmN0aW9uKCkgeyByZXR1cm4gc3RyaW5nOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0cmluZyArPSBjaDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRocm93RXJyb3IoJ1VudGVybWluYXRlZCBxdW90ZScsIHN0YXJ0KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gaXNDb25zdGFudChleHApIHtcclxuICByZXR1cm4gZXhwLmNvbnN0YW50O1xyXG59XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG52YXIgUGFyc2VyID0gZnVuY3Rpb24gKGxleGVyLCAkZmlsdGVyLCBvcHRpb25zKSB7XHJcbiAgdGhpcy5sZXhlciA9IGxleGVyO1xyXG4gIHRoaXMuJGZpbHRlciA9ICRmaWx0ZXI7XHJcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxufTtcclxuXHJcblBhcnNlci5aRVJPID0gZXh0ZW5kKGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gMDtcclxufSwge1xyXG4gIHNoYXJlZEdldHRlcjogdHJ1ZSxcclxuICBjb25zdGFudDogdHJ1ZVxyXG59KTtcclxuXHJcblBhcnNlci5wcm90b3R5cGUgPSB7XHJcbiAgY29uc3RydWN0b3I6IFBhcnNlcixcclxuXHJcbiAgcGFyc2U6IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xyXG4gICAgdGhpcy50b2tlbnMgPSB0aGlzLmxleGVyLmxleCh0ZXh0KTtcclxuXHJcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnN0YXRlbWVudHMoKTtcclxuXHJcbiAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgIHRoaXMudGhyb3dFcnJvcignaXMgYW4gdW5leHBlY3RlZCB0b2tlbicsIHRoaXMudG9rZW5zWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWx1ZS5saXRlcmFsID0gISF2YWx1ZS5saXRlcmFsO1xyXG4gICAgdmFsdWUuY29uc3RhbnQgPSAhIXZhbHVlLmNvbnN0YW50O1xyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9LFxyXG5cclxuICBwcmltYXJ5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcHJpbWFyeTtcclxuICAgIGlmICh0aGlzLmV4cGVjdCgnKCcpKSB7XHJcbiAgICAgIHByaW1hcnkgPSB0aGlzLmZpbHRlckNoYWluKCk7XHJcbiAgICAgIHRoaXMuY29uc3VtZSgnKScpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmV4cGVjdCgnWycpKSB7XHJcbiAgICAgIHByaW1hcnkgPSB0aGlzLmFycmF5RGVjbGFyYXRpb24oKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5leHBlY3QoJ3snKSkge1xyXG4gICAgICBwcmltYXJ5ID0gdGhpcy5vYmplY3QoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciB0b2tlbiA9IHRoaXMuZXhwZWN0KCk7XHJcbiAgICAgIHByaW1hcnkgPSB0b2tlbi5mbjtcclxuICAgICAgaWYgKCFwcmltYXJ5KSB7XHJcbiAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdub3QgYSBwcmltYXJ5IGV4cHJlc3Npb24nLCB0b2tlbik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRva2VuLmNvbnN0YW50KSB7XHJcbiAgICAgICAgcHJpbWFyeS5jb25zdGFudCA9IHRydWU7XHJcbiAgICAgICAgcHJpbWFyeS5saXRlcmFsID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBuZXh0LCBjb250ZXh0O1xyXG4gICAgd2hpbGUgKChuZXh0ID0gdGhpcy5leHBlY3QoJygnLCAnWycsICcuJykpKSB7XHJcbiAgICAgIGlmIChuZXh0LnRleHQgPT09ICcoJykge1xyXG4gICAgICAgIHByaW1hcnkgPSB0aGlzLmZ1bmN0aW9uQ2FsbChwcmltYXJ5LCBjb250ZXh0KTtcclxuICAgICAgICBjb250ZXh0ID0gbnVsbDtcclxuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICdbJykge1xyXG4gICAgICAgIGNvbnRleHQgPSBwcmltYXJ5O1xyXG4gICAgICAgIHByaW1hcnkgPSB0aGlzLm9iamVjdEluZGV4KHByaW1hcnkpO1xyXG4gICAgICB9IGVsc2UgaWYgKG5leHQudGV4dCA9PT0gJy4nKSB7XHJcbiAgICAgICAgY29udGV4dCA9IHByaW1hcnk7XHJcbiAgICAgICAgcHJpbWFyeSA9IHRoaXMuZmllbGRBY2Nlc3MocHJpbWFyeSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwcmltYXJ5O1xyXG4gIH0sXHJcblxyXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKG1zZywgdG9rZW4pIHtcclxuICAgIHRocm93ICRwYXJzZU1pbkVycignc3ludGF4JyxcclxuICAgICAgICAnU3ludGF4IEVycm9yOiBUb2tlbiBcXCd7MH1cXCcgezF9IGF0IGNvbHVtbiB7Mn0gb2YgdGhlIGV4cHJlc3Npb24gW3szfV0gc3RhcnRpbmcgYXQgW3s0fV0uJyxcclxuICAgICAgICAgIHRva2VuLnRleHQsIG1zZywgKHRva2VuLmluZGV4ICsgMSksIHRoaXMudGV4dCwgdGhpcy50ZXh0LnN1YnN0cmluZyh0b2tlbi5pbmRleCkpO1xyXG4gIH0sXHJcblxyXG4gIHBlZWtUb2tlbjogZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID09PSAwKVxyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ3Vlb2UnLCAnVW5leHBlY3RlZCBlbmQgb2YgZXhwcmVzc2lvbjogezB9JywgdGhpcy50ZXh0KTtcclxuICAgIHJldHVybiB0aGlzLnRva2Vuc1swXTtcclxuICB9LFxyXG5cclxuICBwZWVrOiBmdW5jdGlvbihlMSwgZTIsIGUzLCBlNCkge1xyXG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdmFyIHRva2VuID0gdGhpcy50b2tlbnNbMF07XHJcbiAgICAgIHZhciB0ID0gdG9rZW4udGV4dDtcclxuICAgICAgaWYgKHQgPT09IGUxIHx8IHQgPT09IGUyIHx8IHQgPT09IGUzIHx8IHQgPT09IGU0IHx8XHJcbiAgICAgICAgICAoIWUxICYmICFlMiAmJiAhZTMgJiYgIWU0KSkge1xyXG4gICAgICAgIHJldHVybiB0b2tlbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sXHJcblxyXG4gIGV4cGVjdDogZnVuY3Rpb24oZTEsIGUyLCBlMywgZTQpe1xyXG4gICAgdmFyIHRva2VuID0gdGhpcy5wZWVrKGUxLCBlMiwgZTMsIGU0KTtcclxuICAgIGlmICh0b2tlbikge1xyXG4gICAgICB0aGlzLnRva2Vucy5zaGlmdCgpO1xyXG4gICAgICByZXR1cm4gdG9rZW47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSxcclxuXHJcbiAgY29uc3VtZTogZnVuY3Rpb24oZTEpe1xyXG4gICAgaWYgKCF0aGlzLmV4cGVjdChlMSkpIHtcclxuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyB1bmV4cGVjdGVkLCBleHBlY3RpbmcgWycgKyBlMSArICddJywgdGhpcy5wZWVrKCkpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHVuYXJ5Rm46IGZ1bmN0aW9uKGZuLCByaWdodCkge1xyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VVbmFyeUZuKHNlbGYsIGxvY2Fscykge1xyXG4gICAgICByZXR1cm4gZm4oc2VsZiwgbG9jYWxzLCByaWdodCk7XHJcbiAgICB9LCB7XHJcbiAgICAgIGNvbnN0YW50OnJpZ2h0LmNvbnN0YW50LFxyXG4gICAgICBpbnB1dHM6IFtyaWdodF1cclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIGJpbmFyeUZuOiBmdW5jdGlvbihsZWZ0LCBmbiwgcmlnaHQsIGlzQnJhbmNoaW5nKSB7XHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUJpbmFyeUZuKHNlbGYsIGxvY2Fscykge1xyXG4gICAgICByZXR1cm4gZm4oc2VsZiwgbG9jYWxzLCBsZWZ0LCByaWdodCk7XHJcbiAgICB9LCB7XHJcbiAgICAgIGNvbnN0YW50OiBsZWZ0LmNvbnN0YW50ICYmIHJpZ2h0LmNvbnN0YW50LFxyXG4gICAgICBpbnB1dHM6ICFpc0JyYW5jaGluZyAmJiBbbGVmdCwgcmlnaHRdXHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBzdGF0ZW1lbnRzOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzdGF0ZW1lbnRzID0gW107XHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID4gMCAmJiAhdGhpcy5wZWVrKCd9JywgJyknLCAnOycsICddJykpXHJcbiAgICAgICAgc3RhdGVtZW50cy5wdXNoKHRoaXMuZmlsdGVyQ2hhaW4oKSk7XHJcbiAgICAgIGlmICghdGhpcy5leHBlY3QoJzsnKSkge1xyXG4gICAgICAgIC8vIG9wdGltaXplIGZvciB0aGUgY29tbW9uIGNhc2Ugd2hlcmUgdGhlcmUgaXMgb25seSBvbmUgc3RhdGVtZW50LlxyXG4gICAgICAgIC8vIFRPRE8oc2l6ZSk6IG1heWJlIHdlIHNob3VsZCBub3Qgc3VwcG9ydCBtdWx0aXBsZSBzdGF0ZW1lbnRzP1xyXG4gICAgICAgIHJldHVybiAoc3RhdGVtZW50cy5sZW5ndGggPT09IDEpXHJcbiAgICAgICAgICAgID8gc3RhdGVtZW50c1swXVxyXG4gICAgICAgICAgICA6IGZ1bmN0aW9uICRwYXJzZVN0YXRlbWVudHMoc2VsZiwgbG9jYWxzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzdGF0ZW1lbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzdGF0ZW1lbnRzW2ldKHNlbGYsIGxvY2Fscyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGZpbHRlckNoYWluOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy5leHByZXNzaW9uKCk7XHJcbiAgICB2YXIgdG9rZW47XHJcbiAgICB3aGlsZSAoKHRva2VuID0gdGhpcy5leHBlY3QoJ3wnKSkpIHtcclxuICAgICAgbGVmdCA9IHRoaXMuZmlsdGVyKGxlZnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgZmlsdGVyOiBmdW5jdGlvbihpbnB1dEZuKSB7XHJcbiAgICB2YXIgdG9rZW4gPSB0aGlzLmV4cGVjdCgpO1xyXG4gICAgdmFyIGZuID0gdGhpcy4kZmlsdGVyKHRva2VuLnRleHQpO1xyXG4gICAgdmFyIGFyZ3NGbjtcclxuICAgIHZhciBhcmdzO1xyXG5cclxuICAgIGlmICh0aGlzLnBlZWsoJzonKSkge1xyXG4gICAgICBhcmdzRm4gPSBbXTtcclxuICAgICAgYXJncyA9IFtdOyAvLyB3ZSBjYW4gc2FmZWx5IHJldXNlIHRoZSBhcnJheVxyXG4gICAgICB3aGlsZSAodGhpcy5leHBlY3QoJzonKSkge1xyXG4gICAgICAgIGFyZ3NGbi5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbnB1dHMgPSBbaW5wdXRGbl0uY29uY2F0KGFyZ3NGbiB8fCBbXSk7XHJcblxyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VGaWx0ZXIoc2VsZiwgbG9jYWxzKSB7XHJcbiAgICAgIHZhciBpbnB1dCA9IGlucHV0Rm4oc2VsZiwgbG9jYWxzKTtcclxuICAgICAgaWYgKGFyZ3MpIHtcclxuICAgICAgICBhcmdzWzBdID0gaW5wdXQ7XHJcblxyXG4gICAgICAgIHZhciBpID0gYXJnc0ZuLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICBhcmdzW2kgKyAxXSA9IGFyZ3NGbltpXShzZWxmLCBsb2NhbHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmbihpbnB1dCk7XHJcbiAgICB9LCB7XHJcbiAgICAgIGNvbnN0YW50OiAhZm4uJHN0YXRlZnVsICYmIGlucHV0cy5ldmVyeShpc0NvbnN0YW50KSxcclxuICAgICAgaW5wdXRzOiAhZm4uJHN0YXRlZnVsICYmIGlucHV0c1xyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgZXhwcmVzc2lvbjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hc3NpZ25tZW50KCk7XHJcbiAgfSxcclxuXHJcbiAgYXNzaWdubWVudDogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMudGVybmFyeSgpO1xyXG4gICAgdmFyIHJpZ2h0O1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgaWYgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc9JykpKSB7XHJcbiAgICAgIGlmICghbGVmdC5hc3NpZ24pIHtcclxuICAgICAgICB0aGlzLnRocm93RXJyb3IoJ2ltcGxpZXMgYXNzaWdubWVudCBidXQgWycgK1xyXG4gICAgICAgICAgICB0aGlzLnRleHQuc3Vic3RyaW5nKDAsIHRva2VuLmluZGV4KSArICddIGNhbiBub3QgYmUgYXNzaWduZWQgdG8nLCB0b2tlbik7XHJcbiAgICAgIH1cclxuICAgICAgcmlnaHQgPSB0aGlzLnRlcm5hcnkoKTtcclxuICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VBc3NpZ25tZW50KHNjb3BlLCBsb2NhbHMpIHtcclxuICAgICAgICByZXR1cm4gbGVmdC5hc3NpZ24oc2NvcGUsIHJpZ2h0KHNjb3BlLCBsb2NhbHMpLCBsb2NhbHMpO1xyXG4gICAgICB9LCB7XHJcbiAgICAgICAgaW5wdXRzOiBbbGVmdCwgcmlnaHRdXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgdGVybmFyeTogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMubG9naWNhbE9SKCk7XHJcbiAgICB2YXIgbWlkZGxlO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgaWYgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc/JykpKSB7XHJcbiAgICAgIG1pZGRsZSA9IHRoaXMuYXNzaWdubWVudCgpO1xyXG4gICAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJzonKSkpIHtcclxuICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmFzc2lnbm1lbnQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VUZXJuYXJ5KHNlbGYsIGxvY2Fscyl7XHJcbiAgICAgICAgICByZXR1cm4gbGVmdChzZWxmLCBsb2NhbHMpID8gbWlkZGxlKHNlbGYsIGxvY2FscykgOiByaWdodChzZWxmLCBsb2NhbHMpO1xyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgIGNvbnN0YW50OiBsZWZ0LmNvbnN0YW50ICYmIG1pZGRsZS5jb25zdGFudCAmJiByaWdodC5jb25zdGFudFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnRocm93RXJyb3IoJ2V4cGVjdGVkIDonLCB0b2tlbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICBsb2dpY2FsT1I6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxlZnQgPSB0aGlzLmxvZ2ljYWxBTkQoKTtcclxuICAgIHZhciB0b2tlbjtcclxuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnfHwnKSkpIHtcclxuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4uZm4sIHRoaXMubG9naWNhbEFORCgpLCB0cnVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsZWZ0O1xyXG4gIH0sXHJcblxyXG4gIGxvZ2ljYWxBTkQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxlZnQgPSB0aGlzLmVxdWFsaXR5KCk7XHJcbiAgICB2YXIgdG9rZW47XHJcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJyYmJykpKSB7XHJcbiAgICAgIGxlZnQgPSB0aGlzLmJpbmFyeUZuKGxlZnQsIHRva2VuLmZuLCB0aGlzLmxvZ2ljYWxBTkQoKSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICBlcXVhbGl0eTogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMucmVsYXRpb25hbCgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgaWYgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc9PScsJyE9JywnPT09JywnIT09JykpKSB7XHJcbiAgICAgIGxlZnQgPSB0aGlzLmJpbmFyeUZuKGxlZnQsIHRva2VuLmZuLCB0aGlzLmVxdWFsaXR5KCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgcmVsYXRpb25hbDogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMuYWRkaXRpdmUoKTtcclxuICAgIHZhciB0b2tlbjtcclxuICAgIGlmICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnPCcsICc+JywgJzw9JywgJz49JykpKSB7XHJcbiAgICAgIGxlZnQgPSB0aGlzLmJpbmFyeUZuKGxlZnQsIHRva2VuLmZuLCB0aGlzLnJlbGF0aW9uYWwoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICBhZGRpdGl2ZTogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMubXVsdGlwbGljYXRpdmUoKTtcclxuICAgIHZhciB0b2tlbjtcclxuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKycsJy0nKSkpIHtcclxuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4uZm4sIHRoaXMubXVsdGlwbGljYXRpdmUoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICBtdWx0aXBsaWNhdGl2ZTogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMudW5hcnkoKTtcclxuICAgIHZhciB0b2tlbjtcclxuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKicsJy8nLCclJykpKSB7XHJcbiAgICAgIGxlZnQgPSB0aGlzLmJpbmFyeUZuKGxlZnQsIHRva2VuLmZuLCB0aGlzLnVuYXJ5KCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgdW5hcnk6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgaWYgKHRoaXMuZXhwZWN0KCcrJykpIHtcclxuICAgICAgcmV0dXJuIHRoaXMucHJpbWFyeSgpO1xyXG4gICAgfSBlbHNlIGlmICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnLScpKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5iaW5hcnlGbihQYXJzZXIuWkVSTywgdG9rZW4uZm4sIHRoaXMudW5hcnkoKSk7XHJcbiAgICB9IGVsc2UgaWYgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCchJykpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnVuYXJ5Rm4odG9rZW4uZm4sIHRoaXMudW5hcnkoKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdGhpcy5wcmltYXJ5KCk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgZmllbGRBY2Nlc3M6IGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLnRleHQ7XHJcbiAgICB2YXIgZmllbGQgPSB0aGlzLmV4cGVjdCgpLnRleHQ7XHJcbiAgICB2YXIgZ2V0dGVyID0gZ2V0dGVyRm4oZmllbGQsIHRoaXMub3B0aW9ucywgZXhwcmVzc2lvbik7XHJcblxyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VGaWVsZEFjY2VzcyhzY29wZSwgbG9jYWxzLCBzZWxmKSB7XHJcbiAgICAgIHJldHVybiBnZXR0ZXIoc2VsZiB8fCBvYmplY3Qoc2NvcGUsIGxvY2FscykpO1xyXG4gICAgfSwge1xyXG4gICAgICBhc3NpZ246IGZ1bmN0aW9uKHNjb3BlLCB2YWx1ZSwgbG9jYWxzKSB7XHJcbiAgICAgICAgdmFyIG8gPSBvYmplY3Qoc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgaWYgKCFvKSBvYmplY3QuYXNzaWduKHNjb3BlLCBvID0ge30pO1xyXG4gICAgICAgIHJldHVybiBzZXR0ZXIobywgZmllbGQsIHZhbHVlLCBleHByZXNzaW9uKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgb2JqZWN0SW5kZXg6IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLnRleHQ7XHJcblxyXG4gICAgdmFyIGluZGV4Rm4gPSB0aGlzLmV4cHJlc3Npb24oKTtcclxuICAgIHRoaXMuY29uc3VtZSgnXScpO1xyXG5cclxuICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlT2JqZWN0SW5kZXgoc2VsZiwgbG9jYWxzKSB7XHJcbiAgICAgIHZhciBvID0gb2JqKHNlbGYsIGxvY2FscyksXHJcbiAgICAgICAgICBpID0gaW5kZXhGbihzZWxmLCBsb2NhbHMpLFxyXG4gICAgICAgICAgdjtcclxuXHJcbiAgICAgIGVuc3VyZVNhZmVNZW1iZXJOYW1lKGksIGV4cHJlc3Npb24pO1xyXG4gICAgICBpZiAoIW8pIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgIHYgPSBlbnN1cmVTYWZlT2JqZWN0KG9baV0sIGV4cHJlc3Npb24pO1xyXG4gICAgICByZXR1cm4gdjtcclxuICAgIH0sIHtcclxuICAgICAgYXNzaWduOiBmdW5jdGlvbihzZWxmLCB2YWx1ZSwgbG9jYWxzKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGVuc3VyZVNhZmVNZW1iZXJOYW1lKGluZGV4Rm4oc2VsZiwgbG9jYWxzKSwgZXhwcmVzc2lvbik7XHJcbiAgICAgICAgLy8gcHJldmVudCBvdmVyd3JpdGluZyBvZiBGdW5jdGlvbi5jb25zdHJ1Y3RvciB3aGljaCB3b3VsZCBicmVhayBlbnN1cmVTYWZlT2JqZWN0IGNoZWNrXHJcbiAgICAgICAgdmFyIG8gPSBlbnN1cmVTYWZlT2JqZWN0KG9iaihzZWxmLCBsb2NhbHMpLCBleHByZXNzaW9uKTtcclxuICAgICAgICBpZiAoIW8pIG9iai5hc3NpZ24oc2VsZiwgbyA9IHt9KTtcclxuICAgICAgICByZXR1cm4gb1trZXldID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIGZ1bmN0aW9uQ2FsbDogZnVuY3Rpb24oZm5HZXR0ZXIsIGNvbnRleHRHZXR0ZXIpIHtcclxuICAgIHZhciBhcmdzRm4gPSBbXTtcclxuICAgIGlmICh0aGlzLnBlZWtUb2tlbigpLnRleHQgIT09ICcpJykge1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgYXJnc0ZuLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xyXG4gICAgICB9IHdoaWxlICh0aGlzLmV4cGVjdCgnLCcpKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29uc3VtZSgnKScpO1xyXG5cclxuICAgIHZhciBleHByZXNzaW9uVGV4dCA9IHRoaXMudGV4dDtcclxuICAgIC8vIHdlIGNhbiBzYWZlbHkgcmV1c2UgdGhlIGFycmF5IGFjcm9zcyBpbnZvY2F0aW9uc1xyXG4gICAgdmFyIGFyZ3MgPSBhcmdzRm4ubGVuZ3RoID8gW10gOiBudWxsO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAkcGFyc2VGdW5jdGlvbkNhbGwoc2NvcGUsIGxvY2Fscykge1xyXG4gICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRHZXR0ZXIgPyBjb250ZXh0R2V0dGVyKHNjb3BlLCBsb2NhbHMpIDogc2NvcGU7XHJcbiAgICAgIHZhciBmbiA9IGZuR2V0dGVyKHNjb3BlLCBsb2NhbHMsIGNvbnRleHQpIHx8IG5vb3A7XHJcblxyXG4gICAgICBpZiAoYXJncykge1xyXG4gICAgICAgIHZhciBpID0gYXJnc0ZuLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICBhcmdzW2ldID0gZW5zdXJlU2FmZU9iamVjdChhcmdzRm5baV0oc2NvcGUsIGxvY2FscyksIGV4cHJlc3Npb25UZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVuc3VyZVNhZmVPYmplY3QoY29udGV4dCwgZXhwcmVzc2lvblRleHQpO1xyXG4gICAgICBlbnN1cmVTYWZlRnVuY3Rpb24oZm4sIGV4cHJlc3Npb25UZXh0KTtcclxuXHJcbiAgICAgIC8vIElFIHN0dXBpZGl0eSEgKElFIGRvZXNuJ3QgaGF2ZSBhcHBseSBmb3Igc29tZSBuYXRpdmUgZnVuY3Rpb25zKVxyXG4gICAgICB2YXIgdiA9IGZuLmFwcGx5XHJcbiAgICAgICAgICAgID8gZm4uYXBwbHkoY29udGV4dCwgYXJncylcclxuICAgICAgICAgICAgOiBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdKTtcclxuXHJcbiAgICAgIHJldHVybiBlbnN1cmVTYWZlT2JqZWN0KHYsIGV4cHJlc3Npb25UZXh0KTtcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgLy8gVGhpcyBpcyB1c2VkIHdpdGgganNvbiBhcnJheSBkZWNsYXJhdGlvblxyXG4gIGFycmF5RGVjbGFyYXRpb246IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBlbGVtZW50Rm5zID0gW107XHJcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnXScpIHtcclxuICAgICAgZG8ge1xyXG4gICAgICAgIGlmICh0aGlzLnBlZWsoJ10nKSkge1xyXG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlbGVtZW50Rm4gPSB0aGlzLmV4cHJlc3Npb24oKTtcclxuICAgICAgICBlbGVtZW50Rm5zLnB1c2goZWxlbWVudEZuKTtcclxuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbnN1bWUoJ10nKTtcclxuXHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUFycmF5TGl0ZXJhbChzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgdmFyIGFycmF5ID0gW107XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVsZW1lbnRGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgIGFycmF5LnB1c2goZWxlbWVudEZuc1tpXShzZWxmLCBsb2NhbHMpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9LCB7XHJcbiAgICAgIGxpdGVyYWw6IHRydWUsXHJcbiAgICAgIGNvbnN0YW50OiBlbGVtZW50Rm5zLmV2ZXJ5KGlzQ29uc3RhbnQpLFxyXG4gICAgICBpbnB1dHM6IGVsZW1lbnRGbnNcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIG9iamVjdDogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGtleXMgPSBbXSwgdmFsdWVGbnMgPSBbXTtcclxuICAgIGlmICh0aGlzLnBlZWtUb2tlbigpLnRleHQgIT09ICd9Jykge1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgaWYgKHRoaXMucGVlaygnfScpKSB7XHJcbiAgICAgICAgICAvLyBTdXBwb3J0IHRyYWlsaW5nIGNvbW1hcyBwZXIgRVM1LjEuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5leHBlY3QoKTtcclxuICAgICAgICBrZXlzLnB1c2godG9rZW4uc3RyaW5nIHx8IHRva2VuLnRleHQpO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZXhwcmVzc2lvbigpO1xyXG4gICAgICAgIHZhbHVlRm5zLnB1c2godmFsdWUpO1xyXG4gICAgICB9IHdoaWxlICh0aGlzLmV4cGVjdCgnLCcpKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29uc3VtZSgnfScpO1xyXG5cclxuICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlT2JqZWN0TGl0ZXJhbChzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB2YWx1ZUZucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgb2JqZWN0W2tleXNbaV1dID0gdmFsdWVGbnNbaV0oc2VsZiwgbG9jYWxzKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgfSwge1xyXG4gICAgICBsaXRlcmFsOiB0cnVlLFxyXG4gICAgICBjb25zdGFudDogdmFsdWVGbnMuZXZlcnkoaXNDb25zdGFudCksXHJcbiAgICAgIGlucHV0czogdmFsdWVGbnNcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBQYXJzZXIgaGVscGVyIGZ1bmN0aW9uc1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gc2V0dGVyKG9iaiwgcGF0aCwgc2V0VmFsdWUsIGZ1bGxFeHApIHtcclxuICBlbnN1cmVTYWZlT2JqZWN0KG9iaiwgZnVsbEV4cCk7XHJcblxyXG4gIHZhciBlbGVtZW50ID0gcGF0aC5zcGxpdCgnLicpLCBrZXk7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGVsZW1lbnQubGVuZ3RoID4gMTsgaSsrKSB7XHJcbiAgICBrZXkgPSBlbnN1cmVTYWZlTWVtYmVyTmFtZShlbGVtZW50LnNoaWZ0KCksIGZ1bGxFeHApO1xyXG4gICAgdmFyIHByb3BlcnR5T2JqID0gZW5zdXJlU2FmZU9iamVjdChvYmpba2V5XSwgZnVsbEV4cCk7XHJcbiAgICBpZiAoIXByb3BlcnR5T2JqKSB7XHJcbiAgICAgIHByb3BlcnR5T2JqID0ge307XHJcbiAgICAgIG9ialtrZXldID0gcHJvcGVydHlPYmo7XHJcbiAgICB9XHJcbiAgICBvYmogPSBwcm9wZXJ0eU9iajtcclxuICB9XHJcbiAga2V5ID0gZW5zdXJlU2FmZU1lbWJlck5hbWUoZWxlbWVudC5zaGlmdCgpLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlT2JqZWN0KG9ialtrZXldLCBmdWxsRXhwKTtcclxuICBvYmpba2V5XSA9IHNldFZhbHVlO1xyXG4gIHJldHVybiBzZXRWYWx1ZTtcclxufVxyXG5cclxudmFyIGdldHRlckZuQ2FjaGUgPSBjcmVhdGVNYXAoKTtcclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgXCJCbGFjayBIb2xlXCIgdmFyaWFudCBmcm9tOlxyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL2FuZ3VsYXJqcy1wYXJzZS1nZXR0ZXIvNFxyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL3BhdGgtZXZhbHVhdGlvbi1zaW1wbGlmaWVkLzdcclxuICovXHJcbmZ1bmN0aW9uIGNzcFNhZmVHZXR0ZXJGbihrZXkwLCBrZXkxLCBrZXkyLCBrZXkzLCBrZXk0LCBmdWxsRXhwKSB7XHJcbiAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MCwgZnVsbEV4cCk7XHJcbiAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MSwgZnVsbEV4cCk7XHJcbiAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MiwgZnVsbEV4cCk7XHJcbiAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MywgZnVsbEV4cCk7XHJcbiAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5NCwgZnVsbEV4cCk7XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbiBjc3BTYWZlR2V0dGVyKHNjb3BlLCBsb2NhbHMpIHtcclxuICAgIHZhciBwYXRoVmFsID0gKGxvY2FscyAmJiBsb2NhbHMuaGFzT3duUHJvcGVydHkoa2V5MCkpID8gbG9jYWxzIDogc2NvcGU7XHJcblxyXG4gICAgaWYgKHBhdGhWYWwgPT0gbnVsbCkgcmV0dXJuIHBhdGhWYWw7XHJcbiAgICBwYXRoVmFsID0gcGF0aFZhbFtrZXkwXTtcclxuXHJcbiAgICBpZiAoIWtleTEpIHJldHVybiBwYXRoVmFsO1xyXG4gICAgaWYgKHBhdGhWYWwgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIHBhdGhWYWwgPSBwYXRoVmFsW2tleTFdO1xyXG5cclxuICAgIGlmICgha2V5MikgcmV0dXJuIHBhdGhWYWw7XHJcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgcGF0aFZhbCA9IHBhdGhWYWxba2V5Ml07XHJcblxyXG4gICAgaWYgKCFrZXkzKSByZXR1cm4gcGF0aFZhbDtcclxuICAgIGlmIChwYXRoVmFsID09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBwYXRoVmFsID0gcGF0aFZhbFtrZXkzXTtcclxuXHJcbiAgICBpZiAoIWtleTQpIHJldHVybiBwYXRoVmFsO1xyXG4gICAgaWYgKHBhdGhWYWwgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIHBhdGhWYWwgPSBwYXRoVmFsW2tleTRdO1xyXG5cclxuICAgIHJldHVybiBwYXRoVmFsO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldHRlckZuKHBhdGgsIG9wdGlvbnMsIGZ1bGxFeHApIHtcclxuICB2YXIgZm4gPSBnZXR0ZXJGbkNhY2hlW3BhdGhdO1xyXG5cclxuICBpZiAoZm4pIHJldHVybiBmbjtcclxuXHJcbiAgdmFyIHBhdGhLZXlzID0gcGF0aC5zcGxpdCgnLicpLFxyXG4gICAgICBwYXRoS2V5c0xlbmd0aCA9IHBhdGhLZXlzLmxlbmd0aDtcclxuXHJcbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vYW5ndWxhcmpzLXBhcnNlLWdldHRlci82XHJcbiAgaWYgKG9wdGlvbnMuY3NwKSB7XHJcbiAgICBpZiAocGF0aEtleXNMZW5ndGggPCA2KSB7XHJcbiAgICAgIGZuID0gY3NwU2FmZUdldHRlckZuKHBhdGhLZXlzWzBdLCBwYXRoS2V5c1sxXSwgcGF0aEtleXNbMl0sIHBhdGhLZXlzWzNdLCBwYXRoS2V5c1s0XSwgZnVsbEV4cCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmbiA9IGZ1bmN0aW9uIGNzcFNhZmVHZXR0ZXIoc2NvcGUsIGxvY2Fscykge1xyXG4gICAgICAgIHZhciBpID0gMCwgdmFsO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgIHZhbCA9IGNzcFNhZmVHZXR0ZXJGbihwYXRoS2V5c1tpKytdLCBwYXRoS2V5c1tpKytdLCBwYXRoS2V5c1tpKytdLCBwYXRoS2V5c1tpKytdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhLZXlzW2krK10sIGZ1bGxFeHApKHNjb3BlLCBsb2NhbHMpO1xyXG5cclxuICAgICAgICAgIGxvY2FscyA9IHVuZGVmaW5lZDsgLy8gY2xlYXIgYWZ0ZXIgZmlyc3QgaXRlcmF0aW9uXHJcbiAgICAgICAgICBzY29wZSA9IHZhbDtcclxuICAgICAgICB9IHdoaWxlIChpIDwgcGF0aEtleXNMZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhciBjb2RlID0gJyc7XHJcbiAgICBmb3JFYWNoKHBhdGhLZXlzLCBmdW5jdGlvbihrZXksIGluZGV4KSB7XHJcbiAgICAgIGVuc3VyZVNhZmVNZW1iZXJOYW1lKGtleSwgZnVsbEV4cCk7XHJcbiAgICAgIGNvZGUgKz0gJ2lmKHMgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcXG4nICtcclxuICAgICAgICAgICAgICAncz0nKyAoaW5kZXhcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHNpbXBseSBkZXJlZmVyZW5jZSAncycgb24gYW55IC5kb3Qgbm90YXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgID8gJ3MnXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgaWYgd2UgYXJlIGZpcnN0IHRoZW4gd2UgY2hlY2sgbG9jYWxzIGZpcnN0LCBhbmQgaWYgc28gcmVhZCBpdCBmaXJzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgOiAnKChsJiZsLmhhc093blByb3BlcnR5KFwiJyArIGtleSArICdcIikpP2w6cyknKSArICcuJyArIGtleSArICc7XFxuJztcclxuICAgIH0pO1xyXG4gICAgY29kZSArPSAncmV0dXJuIHM7JztcclxuXHJcbiAgICAvKiBqc2hpbnQgLVcwNTQgKi9cclxuICAgIHZhciBldmFsZWRGbkdldHRlciA9IG5ldyBGdW5jdGlvbigncycsICdsJywgY29kZSk7IC8vIHM9c2NvcGUsIGw9bG9jYWxzXHJcbiAgICAvKiBqc2hpbnQgK1cwNTQgKi9cclxuICAgIGV2YWxlZEZuR2V0dGVyLnRvU3RyaW5nID0gdmFsdWVGbihjb2RlKTtcclxuXHJcbiAgICBmbiA9IGV2YWxlZEZuR2V0dGVyO1xyXG4gIH1cclxuXHJcbiAgZm4uc2hhcmVkR2V0dGVyID0gdHJ1ZTtcclxuICBmbi5hc3NpZ24gPSBmdW5jdGlvbihzZWxmLCB2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHNldHRlcihzZWxmLCBwYXRoLCB2YWx1ZSwgcGF0aCk7XHJcbiAgfTtcclxuICBnZXR0ZXJGbkNhY2hlW3BhdGhdID0gZm47XHJcbiAgcmV0dXJuIGZuO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRwYXJzZVxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogQ29udmVydHMgQW5ndWxhciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpbnRvIGEgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgdmFyIGdldHRlciA9ICRwYXJzZSgndXNlci5uYW1lJyk7XHJcbiAqICAgdmFyIHNldHRlciA9IGdldHRlci5hc3NpZ247XHJcbiAqICAgdmFyIGNvbnRleHQgPSB7dXNlcjp7bmFtZTonYW5ndWxhcid9fTtcclxuICogICB2YXIgbG9jYWxzID0ge3VzZXI6e25hbWU6J2xvY2FsJ319O1xyXG4gKlxyXG4gKiAgIGV4cGVjdChnZXR0ZXIoY29udGV4dCkpLnRvRXF1YWwoJ2FuZ3VsYXInKTtcclxuICogICBzZXR0ZXIoY29udGV4dCwgJ25ld1ZhbHVlJyk7XHJcbiAqICAgZXhwZWN0KGNvbnRleHQudXNlci5uYW1lKS50b0VxdWFsKCduZXdWYWx1ZScpO1xyXG4gKiAgIGV4cGVjdChnZXR0ZXIoY29udGV4dCwgbG9jYWxzKSkudG9FcXVhbCgnbG9jYWwnKTtcclxuICogYGBgXHJcbiAqXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XHJcbiAqXHJcbiAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcclxuICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXHJcbiAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cclxuICogICAgICBgY29udGV4dGAuXHJcbiAqXHJcbiAqICAgIFRoZSByZXR1cm5lZCBmdW5jdGlvbiBhbHNvIGhhcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAqICAgICAgKiBgbGl0ZXJhbGAg4oCTIGB7Ym9vbGVhbn1gIOKAkyB3aGV0aGVyIHRoZSBleHByZXNzaW9uJ3MgdG9wLWxldmVsIG5vZGUgaXMgYSBKYXZhU2NyaXB0XHJcbiAqICAgICAgICBsaXRlcmFsLlxyXG4gKiAgICAgICogYGNvbnN0YW50YCDigJMgYHtib29sZWFufWAg4oCTIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24gaXMgbWFkZSBlbnRpcmVseSBvZiBKYXZhU2NyaXB0XHJcbiAqICAgICAgICBjb25zdGFudCBsaXRlcmFscy5cclxuICogICAgICAqIGBhc3NpZ25gIOKAkyBgez9mdW5jdGlvbihjb250ZXh0LCB2YWx1ZSl9YCDigJMgaWYgdGhlIGV4cHJlc3Npb24gaXMgYXNzaWduYWJsZSwgdGhpcyB3aWxsIGJlXHJcbiAqICAgICAgICBzZXQgdG8gYSBmdW5jdGlvbiB0byBjaGFuZ2UgaXRzIHZhbHVlIG9uIHRoZSBnaXZlbiBjb250ZXh0LlxyXG4gKlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRwYXJzZVByb3ZpZGVyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBgJHBhcnNlUHJvdmlkZXJgIGNhbiBiZSB1c2VkIGZvciBjb25maWd1cmluZyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUge0BsaW5rIG5nLiRwYXJzZSAkcGFyc2V9XHJcbiAqICBzZXJ2aWNlLlxyXG4gKi9cclxuZnVuY3Rpb24gJFBhcnNlUHJvdmlkZXIoKSB7XHJcbiAgdmFyIGNhY2hlID0gY3JlYXRlTWFwKCk7XHJcblxyXG4gIHZhciAkcGFyc2VPcHRpb25zID0ge1xyXG4gICAgY3NwOiBmYWxzZVxyXG4gIH07XHJcblxyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRmaWx0ZXInLCAnJHNuaWZmZXInLCBmdW5jdGlvbigkZmlsdGVyLCAkc25pZmZlcikge1xyXG4gICAgJHBhcnNlT3B0aW9ucy5jc3AgPSAkc25pZmZlci5jc3A7XHJcblxyXG4gICAgZnVuY3Rpb24gd3JhcFNoYXJlZEV4cHJlc3Npb24oZXhwKSB7XHJcbiAgICAgIHZhciB3cmFwcGVkID0gZXhwO1xyXG5cclxuICAgICAgaWYgKGV4cC5zaGFyZWRHZXR0ZXIpIHtcclxuICAgICAgICB3cmFwcGVkID0gZnVuY3Rpb24gJHBhcnNlV3JhcHBlcihzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgICAgIHJldHVybiBleHAoc2VsZiwgbG9jYWxzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdyYXBwZWQubGl0ZXJhbCA9IGV4cC5saXRlcmFsO1xyXG4gICAgICAgIHdyYXBwZWQuY29uc3RhbnQgPSBleHAuY29uc3RhbnQ7XHJcbiAgICAgICAgd3JhcHBlZC5hc3NpZ24gPSBleHAuYXNzaWduO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gd3JhcHBlZDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gJHBhcnNlKGV4cCwgaW50ZXJjZXB0b3JGbikge1xyXG4gICAgICB2YXIgcGFyc2VkRXhwcmVzc2lvbiwgb25lVGltZSwgY2FjaGVLZXk7XHJcblxyXG4gICAgICBzd2l0Y2ggKHR5cGVvZiBleHApIHtcclxuICAgICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICAgICAgY2FjaGVLZXkgPSBleHAgPSBleHAudHJpbSgpO1xyXG5cclxuICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBjYWNoZVtjYWNoZUtleV07XHJcblxyXG4gICAgICAgICAgaWYgKCFwYXJzZWRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChleHAuY2hhckF0KDApID09PSAnOicgJiYgZXhwLmNoYXJBdCgxKSA9PT0gJzonKSB7XHJcbiAgICAgICAgICAgICAgb25lVGltZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgZXhwID0gZXhwLnN1YnN0cmluZygyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGxleGVyID0gbmV3IExleGVyKCRwYXJzZU9wdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VyID0gbmV3IFBhcnNlcihsZXhlciwgJGZpbHRlciwgJHBhcnNlT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBwYXJzZXIucGFyc2UoZXhwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJzZWRFeHByZXNzaW9uLmNvbnN0YW50KSB7XHJcbiAgICAgICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBjb25zdGFudFdhdGNoRGVsZWdhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob25lVGltZSkge1xyXG4gICAgICAgICAgICAgIC8vb25lVGltZSBpcyBub3QgcGFydCBvZiB0aGUgZXhwIHBhc3NlZCB0byB0aGUgUGFyc2VyIHNvIHdlIG1heSBoYXZlIHRvXHJcbiAgICAgICAgICAgICAgLy93cmFwIHRoZSBwYXJzZWRFeHByZXNzaW9uIGJlZm9yZSBhZGRpbmcgYSAkJHdhdGNoRGVsZWdhdGVcclxuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uID0gd3JhcFNoYXJlZEV4cHJlc3Npb24ocGFyc2VkRXhwcmVzc2lvbik7XHJcbiAgICAgICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBwYXJzZWRFeHByZXNzaW9uLmxpdGVyYWwgP1xyXG4gICAgICAgICAgICAgICAgb25lVGltZUxpdGVyYWxXYXRjaERlbGVnYXRlIDogb25lVGltZVdhdGNoRGVsZWdhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMpIHtcclxuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSA9IGlucHV0c1dhdGNoRGVsZWdhdGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNhY2hlW2NhY2hlS2V5XSA9IHBhcnNlZEV4cHJlc3Npb247XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gYWRkSW50ZXJjZXB0b3IocGFyc2VkRXhwcmVzc2lvbiwgaW50ZXJjZXB0b3JGbik7XHJcblxyXG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgICAgIHJldHVybiBhZGRJbnRlcmNlcHRvcihleHAsIGludGVyY2VwdG9yRm4pO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmV0dXJuIGFkZEludGVyY2VwdG9yKG5vb3AsIGludGVyY2VwdG9yRm4pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbGxlY3RFeHByZXNzaW9uSW5wdXRzKGlucHV0cywgbGlzdCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGlucHV0c1tpXTtcclxuICAgICAgICBpZiAoIWlucHV0LmNvbnN0YW50KSB7XHJcbiAgICAgICAgICBpZiAoaW5wdXQuaW5wdXRzKSB7XHJcbiAgICAgICAgICAgIGNvbGxlY3RFeHByZXNzaW9uSW5wdXRzKGlucHV0LmlucHV0cywgbGlzdCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGxpc3QuaW5kZXhPZihpbnB1dCkgPT09IC0xKSB7IC8vIFRPRE8ocGVyZikgY2FuIHdlIGRvIGJldHRlcj9cclxuICAgICAgICAgICAgbGlzdC5wdXNoKGlucHV0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3VmFsdWUsIG9sZFZhbHVlT2ZWYWx1ZSkge1xyXG5cclxuICAgICAgaWYgKG5ld1ZhbHVlID09IG51bGwgfHwgb2xkVmFsdWVPZlZhbHVlID09IG51bGwpIHsgLy8gbnVsbC91bmRlZmluZWRcclxuICAgICAgICByZXR1cm4gbmV3VmFsdWUgPT09IG9sZFZhbHVlT2ZWYWx1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuXHJcbiAgICAgICAgLy8gYXR0ZW1wdCB0byBjb252ZXJ0IHRoZSB2YWx1ZSB0byBhIHByaW1pdGl2ZSB0eXBlXHJcbiAgICAgICAgLy8gVE9ETyhkb2NzKTogYWRkIGEgbm90ZSB0byBkb2NzIHRoYXQgYnkgaW1wbGVtZW50aW5nIHZhbHVlT2YgZXZlbiBvYmplY3RzIGFuZCBhcnJheXMgY2FuXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYmUgY2hlYXBseSBkaXJ0eS1jaGVja2VkXHJcbiAgICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZS52YWx1ZU9mKCk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAvLyBvYmplY3RzL2FycmF5cyBhcmUgbm90IHN1cHBvcnRlZCAtIGRlZXAtd2F0Y2hpbmcgdGhlbSB3b3VsZCBiZSB0b28gZXhwZW5zaXZlXHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmYWxsLXRocm91Z2ggdG8gdGhlIHByaW1pdGl2ZSBlcXVhbGl0eSBjaGVja1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL1ByaW1pdGl2ZSBvciBOYU5cclxuICAgICAgcmV0dXJuIG5ld1ZhbHVlID09PSBvbGRWYWx1ZU9mVmFsdWUgfHwgKG5ld1ZhbHVlICE9PSBuZXdWYWx1ZSAmJiBvbGRWYWx1ZU9mVmFsdWUgIT09IG9sZFZhbHVlT2ZWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW5wdXRzV2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uKSB7XHJcbiAgICAgIHZhciBpbnB1dEV4cHJlc3Npb25zID0gcGFyc2VkRXhwcmVzc2lvbi4kJGlucHV0cyB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChwYXJzZWRFeHByZXNzaW9uLiQkaW5wdXRzID0gY29sbGVjdEV4cHJlc3Npb25JbnB1dHMocGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMsIFtdKSk7XHJcblxyXG4gICAgICB2YXIgbGFzdFJlc3VsdDtcclxuXHJcbiAgICAgIGlmIChpbnB1dEV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgIHZhciBvbGRJbnB1dFZhbHVlID0gZXhwcmVzc2lvbklucHV0RGlydHlDaGVjazsgLy8gaW5pdCB0byBzb21ldGhpbmcgdW5pcXVlIHNvIHRoYXQgZXF1YWxzIGNoZWNrIGZhaWxzXHJcbiAgICAgICAgaW5wdXRFeHByZXNzaW9ucyA9IGlucHV0RXhwcmVzc2lvbnNbMF07XHJcbiAgICAgICAgcmV0dXJuIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBleHByZXNzaW9uSW5wdXRXYXRjaChzY29wZSkge1xyXG4gICAgICAgICAgdmFyIG5ld0lucHV0VmFsdWUgPSBpbnB1dEV4cHJlc3Npb25zKHNjb3BlKTtcclxuICAgICAgICAgIGlmICghZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayhuZXdJbnB1dFZhbHVlLCBvbGRJbnB1dFZhbHVlKSkge1xyXG4gICAgICAgICAgICBsYXN0UmVzdWx0ID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XHJcbiAgICAgICAgICAgIG9sZElucHV0VmFsdWUgPSBuZXdJbnB1dFZhbHVlICYmIG5ld0lucHV0VmFsdWUudmFsdWVPZigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XHJcbiAgICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIG9sZElucHV0VmFsdWVPZlZhbHVlcyA9IFtdO1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dEV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXNbaV0gPSBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrOyAvLyBpbml0IHRvIHNvbWV0aGluZyB1bmlxdWUgc28gdGhhdCBlcXVhbHMgY2hlY2sgZmFpbHNcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBleHByZXNzaW9uSW5wdXRzV2F0Y2goc2NvcGUpIHtcclxuICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dEV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgIHZhciBuZXdJbnB1dFZhbHVlID0gaW5wdXRFeHByZXNzaW9uc1tpXShzY29wZSk7XHJcbiAgICAgICAgICBpZiAoY2hhbmdlZCB8fCAoY2hhbmdlZCA9ICFleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrKG5ld0lucHV0VmFsdWUsIG9sZElucHV0VmFsdWVPZlZhbHVlc1tpXSkpKSB7XHJcbiAgICAgICAgICAgIG9sZElucHV0VmFsdWVPZlZhbHVlc1tpXSA9IG5ld0lucHV0VmFsdWUgJiYgbmV3SW5wdXRWYWx1ZS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgICAgbGFzdFJlc3VsdCA9IHBhcnNlZEV4cHJlc3Npb24oc2NvcGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XHJcbiAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25lVGltZVdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xyXG4gICAgICB2YXIgdW53YXRjaCwgbGFzdFZhbHVlO1xyXG4gICAgICByZXR1cm4gdW53YXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiBvbmVUaW1lV2F0Y2goc2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uIG9uZVRpbWVMaXN0ZW5lcih2YWx1ZSwgb2xkLCBzY29wZSkge1xyXG4gICAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQobGFzdFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgIHVud2F0Y2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBvYmplY3RFcXVhbGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25lVGltZUxpdGVyYWxXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24pIHtcclxuICAgICAgdmFyIHVud2F0Y2g7XHJcbiAgICAgIHJldHVybiB1bndhdGNoID0gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG9uZVRpbWVXYXRjaChzY29wZSkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcclxuICAgICAgfSwgZnVuY3Rpb24gb25lVGltZUxpc3RlbmVyKHZhbHVlLCBvbGQsIHNjb3BlKSB7XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIHZhbHVlLCBvbGQsIHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzQWxsRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKGlzQWxsRGVmaW5lZCh2YWx1ZSkpIHVud2F0Y2goKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgb2JqZWN0RXF1YWxpdHkpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gaXNBbGxEZWZpbmVkKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGFsbERlZmluZWQgPSB0cnVlO1xyXG4gICAgICAgIGZvckVhY2godmFsdWUsIGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgIGlmICghaXNEZWZpbmVkKHZhbCkpIGFsbERlZmluZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYWxsRGVmaW5lZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnN0YW50V2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uKSB7XHJcbiAgICAgIHZhciB1bndhdGNoO1xyXG4gICAgICByZXR1cm4gdW53YXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiBjb25zdGFudFdhdGNoKHNjb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb24oc2NvcGUpO1xyXG4gICAgICB9LCBmdW5jdGlvbiBjb25zdGFudExpc3RlbmVyKHZhbHVlLCBvbGQsIHNjb3BlKSB7XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1bndhdGNoKCk7XHJcbiAgICAgIH0sIG9iamVjdEVxdWFsaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRJbnRlcmNlcHRvcihwYXJzZWRFeHByZXNzaW9uLCBpbnRlcmNlcHRvckZuKSB7XHJcbiAgICAgIGlmICghaW50ZXJjZXB0b3JGbikgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb247XHJcblxyXG4gICAgICB2YXIgZm4gPSBmdW5jdGlvbiBpbnRlcmNlcHRlZEV4cHJlc3Npb24oc2NvcGUsIGxvY2Fscykge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlZEV4cHJlc3Npb24oc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGludGVyY2VwdG9yRm4odmFsdWUsIHNjb3BlLCBsb2NhbHMpO1xyXG4gICAgICAgIC8vIHdlIG9ubHkgcmV0dXJuIHRoZSBpbnRlcmNlcHRvcidzIHJlc3VsdCBpZiB0aGVcclxuICAgICAgICAvLyBpbml0aWFsIHZhbHVlIGlzIGRlZmluZWQgKGZvciBiaW5kLW9uY2UpXHJcbiAgICAgICAgcmV0dXJuIGlzRGVmaW5lZCh2YWx1ZSkgPyByZXN1bHQgOiB2YWx1ZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFByb3BhZ2F0ZSAkJHdhdGNoRGVsZWdhdGVzIG90aGVyIHRoZW4gaW5wdXRzV2F0Y2hEZWxlZ2F0ZVxyXG4gICAgICBpZiAocGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgJiZcclxuICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlICE9PSBpbnB1dHNXYXRjaERlbGVnYXRlKSB7XHJcbiAgICAgICAgZm4uJCR3YXRjaERlbGVnYXRlID0gcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGU7XHJcbiAgICAgIH0gZWxzZSBpZiAoIWludGVyY2VwdG9yRm4uJHN0YXRlZnVsKSB7XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gaW50ZXJjZXB0b3IsIGJ1dCBubyB3YXRjaERlbGVnYXRlIHRoZW4gdHJlYXQgdGhlIGludGVyY2VwdG9yIGxpa2VcclxuICAgICAgICAvLyB3ZSB0cmVhdCBmaWx0ZXJzIC0gaXQgaXMgYXNzdW1lZCB0byBiZSBhIHB1cmUgZnVuY3Rpb24gdW5sZXNzIGZsYWdnZWQgd2l0aCAkc3RhdGVmdWxcclxuICAgICAgICBmbi4kJHdhdGNoRGVsZWdhdGUgPSBpbnB1dHNXYXRjaERlbGVnYXRlO1xyXG4gICAgICAgIGZuLmlucHV0cyA9IFtwYXJzZWRFeHByZXNzaW9uXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGZuO1xyXG4gICAgfVxyXG4gIH1dO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHFcclxuICogQHJlcXVpcmVzICRyb290U2NvcGVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEEgcHJvbWlzZS9kZWZlcnJlZCBpbXBsZW1lbnRhdGlvbiBpbnNwaXJlZCBieSBbS3JpcyBLb3dhbCdzIFFdKGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcSkuXHJcbiAqXHJcbiAqICRxIGNhbiBiZSB1c2VkIGluIHR3byBmYXNoaW9ucyAtLS0gb25lIHdoaWNoIGlzIG1vcmUgc2ltaWxhciB0byBLcmlzIEtvd2FsJ3MgUSBvciBqUXVlcnkncyBEZWZlcnJlZFxyXG4gKiBpbXBsZW1lbnRhdGlvbnMsIGFuZCB0aGUgb3RoZXIgd2hpY2ggcmVzZW1ibGVzIEVTNiBwcm9taXNlcyB0byBzb21lIGRlZ3JlZS5cclxuICpcclxuICogIyAkcSBjb25zdHJ1Y3RvclxyXG4gKlxyXG4gKiBUaGUgc3RyZWFtbGluZWQgRVM2IHN0eWxlIHByb21pc2UgaXMgZXNzZW50aWFsbHkganVzdCB1c2luZyAkcSBhcyBhIGNvbnN0cnVjdG9yIHdoaWNoIHRha2VzIGEgYHJlc29sdmVyYFxyXG4gKiBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQuIFRoaXMgaXMgc2ltaWxhciB0byB0aGUgbmF0aXZlIFByb21pc2UgaW1wbGVtZW50YXRpb24gZnJvbSBFUzYgSGFybW9ueSxcclxuICogc2VlIFtNRE5dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UpLlxyXG4gKlxyXG4gKiBXaGlsZSB0aGUgY29uc3RydWN0b3Itc3R5bGUgdXNlIGlzIHN1cHBvcnRlZCwgbm90IGFsbCBvZiB0aGUgc3VwcG9ydGluZyBtZXRob2RzIGZyb20gRVM2IEhhcm1vbnkgcHJvbWlzZXMgYXJlXHJcbiAqIGF2YWlsYWJsZSB5ZXQuXHJcbiAqXHJcbiAqIEl0IGNhbiBiZSB1c2VkIGxpa2Ugc286XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICogICAvLyBwZXJmb3JtIHNvbWUgYXN5bmNocm9ub3VzIG9wZXJhdGlvbiwgcmVzb2x2ZSBvciByZWplY3QgdGhlIHByb21pc2Ugd2hlbiBhcHByb3ByaWF0ZS5cclxuICogICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICogICAgIGlmIChwb2xsU3RhdHVzID4gMCkge1xyXG4gKiAgICAgICByZXNvbHZlKHBvbGxlZFZhbHVlKTtcclxuICogICAgIH0gZWxzZSBpZiAocG9sbFN0YXR1cyA8IDApIHtcclxuICogICAgICAgcmVqZWN0KHBvbGxlZFZhbHVlKTtcclxuICogICAgIH0gZWxzZSB7XHJcbiAqICAgICAgIHBvbGxTdGF0dXMgPSBwb2xsQWdhaW4oZnVuY3Rpb24odmFsdWUpIHtcclxuICogICAgICAgICBwb2xsZWRWYWx1ZSA9IHZhbHVlO1xyXG4gKiAgICAgICB9KTtcclxuICogICAgIH1cclxuICogICB9LCAxMDAwMCk7XHJcbiAqIH0pLlxyXG4gKiAgIHRoZW4oZnVuY3Rpb24odmFsdWUpIHtcclxuICogICAgIC8vIGhhbmRsZSBzdWNjZXNzXHJcbiAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAqICAgICAvLyBoYW5kbGUgZmFpbHVyZVxyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogTm90ZTogcHJvZ3Jlc3Mvbm90aWZ5IGNhbGxiYWNrcyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgdmlhIHRoZSBFUzYtc3R5bGUgaW50ZXJmYWNlLlxyXG4gKlxyXG4gKiBIb3dldmVyLCB0aGUgbW9yZSB0cmFkaXRpb25hbCBDb21tb25KUy1zdHlsZSB1c2FnZSBpcyBzdGlsbCBhdmFpbGFibGUsIGFuZCBkb2N1bWVudGVkIGJlbG93LlxyXG4gKlxyXG4gKiBbVGhlIENvbW1vbkpTIFByb21pc2UgcHJvcG9zYWxdKGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1Byb21pc2VzKSBkZXNjcmliZXMgYSBwcm9taXNlIGFzIGFuXHJcbiAqIGludGVyZmFjZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgYW4gYWN0aW9uIHRoYXQgaXNcclxuICogcGVyZm9ybWVkIGFzeW5jaHJvbm91c2x5LCBhbmQgbWF5IG9yIG1heSBub3QgYmUgZmluaXNoZWQgYXQgYW55IGdpdmVuIHBvaW50IGluIHRpbWUuXHJcbiAqXHJcbiAqIEZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIGRlYWxpbmcgd2l0aCBlcnJvciBoYW5kbGluZywgZGVmZXJyZWQgYW5kIHByb21pc2UgQVBJcyBhcmUgdG9cclxuICogYXN5bmNocm9ub3VzIHByb2dyYW1taW5nIHdoYXQgYHRyeWAsIGBjYXRjaGAgYW5kIGB0aHJvd2Aga2V5d29yZHMgYXJlIHRvIHN5bmNocm9ub3VzIHByb2dyYW1taW5nLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIC8vIGZvciB0aGUgcHVycG9zZSBvZiB0aGlzIGV4YW1wbGUgbGV0J3MgYXNzdW1lIHRoYXQgdmFyaWFibGVzIGAkcWAsIGBzY29wZWAgYW5kIGBva1RvR3JlZXRgXHJcbiAqICAgLy8gYXJlIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBsZXhpY2FsIHNjb3BlICh0aGV5IGNvdWxkIGhhdmUgYmVlbiBpbmplY3RlZCBvciBwYXNzZWQgaW4pLlxyXG4gKlxyXG4gKiAgIGZ1bmN0aW9uIGFzeW5jR3JlZXQobmFtZSkge1xyXG4gKiAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICpcclxuICogICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGRlZmVycmVkLm5vdGlmeSgnQWJvdXQgdG8gZ3JlZXQgJyArIG5hbWUgKyAnLicpO1xyXG4gKlxyXG4gKiAgICAgICBpZiAob2tUb0dyZWV0KG5hbWUpKSB7XHJcbiAqICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnSGVsbG8sICcgKyBuYW1lICsgJyEnKTtcclxuICogICAgICAgfSBlbHNlIHtcclxuICogICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ0dyZWV0aW5nICcgKyBuYW1lICsgJyBpcyBub3QgYWxsb3dlZC4nKTtcclxuICogICAgICAgfVxyXG4gKiAgICAgfSwgMTAwMCk7XHJcbiAqXHJcbiAqICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICogICB9XHJcbiAqXHJcbiAqICAgdmFyIHByb21pc2UgPSBhc3luY0dyZWV0KCdSb2JpbiBIb29kJyk7XHJcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XHJcbiAqICAgICBhbGVydCgnU3VjY2VzczogJyArIGdyZWV0aW5nKTtcclxuICogICB9LCBmdW5jdGlvbihyZWFzb24pIHtcclxuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xyXG4gKiAgIH0sIGZ1bmN0aW9uKHVwZGF0ZSkge1xyXG4gKiAgICAgYWxlcnQoJ0dvdCBub3RpZmljYXRpb246ICcgKyB1cGRhdGUpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQXQgZmlyc3QgaXQgbWlnaHQgbm90IGJlIG9idmlvdXMgd2h5IHRoaXMgZXh0cmEgY29tcGxleGl0eSBpcyB3b3J0aCB0aGUgdHJvdWJsZS4gVGhlIHBheW9mZlxyXG4gKiBjb21lcyBpbiB0aGUgd2F5IG9mIGd1YXJhbnRlZXMgdGhhdCBwcm9taXNlIGFuZCBkZWZlcnJlZCBBUElzIG1ha2UsIHNlZVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3VuY29tbW9uanMvYmxvYi9tYXN0ZXIvcHJvbWlzZXMvc3BlY2lmaWNhdGlvbi5tZC5cclxuICpcclxuICogQWRkaXRpb25hbGx5IHRoZSBwcm9taXNlIGFwaSBhbGxvd3MgZm9yIGNvbXBvc2l0aW9uIHRoYXQgaXMgdmVyeSBoYXJkIHRvIGRvIHdpdGggdGhlXHJcbiAqIHRyYWRpdGlvbmFsIGNhbGxiYWNrIChbQ1BTXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbnRpbnVhdGlvbi1wYXNzaW5nX3N0eWxlKSkgYXBwcm9hY2guXHJcbiAqIEZvciBtb3JlIG9uIHRoaXMgcGxlYXNlIHNlZSB0aGUgW1EgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xKSBlc3BlY2lhbGx5IHRoZVxyXG4gKiBzZWN0aW9uIG9uIHNlcmlhbCBvciBwYXJhbGxlbCBqb2luaW5nIG9mIHByb21pc2VzLlxyXG4gKlxyXG4gKiAjIFRoZSBEZWZlcnJlZCBBUElcclxuICpcclxuICogQSBuZXcgaW5zdGFuY2Ugb2YgZGVmZXJyZWQgaXMgY29uc3RydWN0ZWQgYnkgY2FsbGluZyBgJHEuZGVmZXIoKWAuXHJcbiAqXHJcbiAqIFRoZSBwdXJwb3NlIG9mIHRoZSBkZWZlcnJlZCBvYmplY3QgaXMgdG8gZXhwb3NlIHRoZSBhc3NvY2lhdGVkIFByb21pc2UgaW5zdGFuY2UgYXMgd2VsbCBhcyBBUElzXHJcbiAqIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHNpZ25hbGluZyB0aGUgc3VjY2Vzc2Z1bCBvciB1bnN1Y2Nlc3NmdWwgY29tcGxldGlvbiwgYXMgd2VsbCBhcyB0aGUgc3RhdHVzXHJcbiAqIG9mIHRoZSB0YXNrLlxyXG4gKlxyXG4gKiAqKk1ldGhvZHMqKlxyXG4gKlxyXG4gKiAtIGByZXNvbHZlKHZhbHVlKWAg4oCTIHJlc29sdmVzIHRoZSBkZXJpdmVkIHByb21pc2Ugd2l0aCB0aGUgYHZhbHVlYC4gSWYgdGhlIHZhbHVlIGlzIGEgcmVqZWN0aW9uXHJcbiAqICAgY29uc3RydWN0ZWQgdmlhIGAkcS5yZWplY3RgLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIGluc3RlYWQuXHJcbiAqIC0gYHJlamVjdChyZWFzb24pYCDigJMgcmVqZWN0cyB0aGUgZGVyaXZlZCBwcm9taXNlIHdpdGggdGhlIGByZWFzb25gLiBUaGlzIGlzIGVxdWl2YWxlbnQgdG9cclxuICogICByZXNvbHZpbmcgaXQgd2l0aCBhIHJlamVjdGlvbiBjb25zdHJ1Y3RlZCB2aWEgYCRxLnJlamVjdGAuXHJcbiAqIC0gYG5vdGlmeSh2YWx1ZSlgIC0gcHJvdmlkZXMgdXBkYXRlcyBvbiB0aGUgc3RhdHVzIG9mIHRoZSBwcm9taXNlJ3MgZXhlY3V0aW9uLiBUaGlzIG1heSBiZSBjYWxsZWRcclxuICogICBtdWx0aXBsZSB0aW1lcyBiZWZvcmUgdGhlIHByb21pc2UgaXMgZWl0aGVyIHJlc29sdmVkIG9yIHJlamVjdGVkLlxyXG4gKlxyXG4gKiAqKlByb3BlcnRpZXMqKlxyXG4gKlxyXG4gKiAtIHByb21pc2Ug4oCTIGB7UHJvbWlzZX1gIOKAkyBwcm9taXNlIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBkZWZlcnJlZC5cclxuICpcclxuICpcclxuICogIyBUaGUgUHJvbWlzZSBBUElcclxuICpcclxuICogQSBuZXcgcHJvbWlzZSBpbnN0YW5jZSBpcyBjcmVhdGVkIHdoZW4gYSBkZWZlcnJlZCBpbnN0YW5jZSBpcyBjcmVhdGVkIGFuZCBjYW4gYmUgcmV0cmlldmVkIGJ5XHJcbiAqIGNhbGxpbmcgYGRlZmVycmVkLnByb21pc2VgLlxyXG4gKlxyXG4gKiBUaGUgcHVycG9zZSBvZiB0aGUgcHJvbWlzZSBvYmplY3QgaXMgdG8gYWxsb3cgZm9yIGludGVyZXN0ZWQgcGFydGllcyB0byBnZXQgYWNjZXNzIHRvIHRoZSByZXN1bHRcclxuICogb2YgdGhlIGRlZmVycmVkIHRhc2sgd2hlbiBpdCBjb21wbGV0ZXMuXHJcbiAqXHJcbiAqICoqTWV0aG9kcyoqXHJcbiAqXHJcbiAqIC0gYHRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBub3RpZnlDYWxsYmFjaylgIOKAkyByZWdhcmRsZXNzIG9mIHdoZW4gdGhlIHByb21pc2Ugd2FzIG9yXHJcbiAqICAgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCwgYHRoZW5gIGNhbGxzIG9uZSBvZiB0aGUgc3VjY2VzcyBvciBlcnJvciBjYWxsYmFja3MgYXN5bmNocm9ub3VzbHlcclxuICogICBhcyBzb29uIGFzIHRoZSByZXN1bHQgaXMgYXZhaWxhYmxlLiBUaGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudDogdGhlIHJlc3VsdFxyXG4gKiAgIG9yIHJlamVjdGlvbiByZWFzb24uIEFkZGl0aW9uYWxseSwgdGhlIG5vdGlmeSBjYWxsYmFjayBtYXkgYmUgY2FsbGVkIHplcm8gb3IgbW9yZSB0aW1lcyB0b1xyXG4gKiAgIHByb3ZpZGUgYSBwcm9ncmVzcyBpbmRpY2F0aW9uLCBiZWZvcmUgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqXHJcbiAqICAgVGhpcyBtZXRob2QgKnJldHVybnMgYSBuZXcgcHJvbWlzZSogd2hpY2ggaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgdmlhIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlXHJcbiAqICAgYHN1Y2Nlc3NDYWxsYmFja2AsIGBlcnJvckNhbGxiYWNrYC4gSXQgYWxzbyBub3RpZmllcyB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGVcclxuICogICBgbm90aWZ5Q2FsbGJhY2tgIG1ldGhvZC4gVGhlIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIGZyb20gdGhlIG5vdGlmeUNhbGxiYWNrXHJcbiAqICAgbWV0aG9kLlxyXG4gKlxyXG4gKiAtIGBjYXRjaChlcnJvckNhbGxiYWNrKWAg4oCTIHNob3J0aGFuZCBmb3IgYHByb21pc2UudGhlbihudWxsLCBlcnJvckNhbGxiYWNrKWBcclxuICpcclxuICogLSBgZmluYWxseShjYWxsYmFjaylgIOKAkyBhbGxvd3MgeW91IHRvIG9ic2VydmUgZWl0aGVyIHRoZSBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gb2YgYSBwcm9taXNlLFxyXG4gKiAgIGJ1dCB0byBkbyBzbyB3aXRob3V0IG1vZGlmeWluZyB0aGUgZmluYWwgdmFsdWUuIFRoaXMgaXMgdXNlZnVsIHRvIHJlbGVhc2UgcmVzb3VyY2VzIG9yIGRvIHNvbWVcclxuICogICBjbGVhbi11cCB0aGF0IG5lZWRzIHRvIGJlIGRvbmUgd2hldGhlciB0aGUgcHJvbWlzZSB3YXMgcmVqZWN0ZWQgb3IgcmVzb2x2ZWQuIFNlZSB0aGUgW2Z1bGxcclxuICogICBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3Evd2lraS9BUEktUmVmZXJlbmNlI3Byb21pc2VmaW5hbGx5Y2FsbGJhY2spIGZvclxyXG4gKiAgIG1vcmUgaW5mb3JtYXRpb24uXHJcbiAqXHJcbiAqICAgQmVjYXVzZSBgZmluYWxseWAgaXMgYSByZXNlcnZlZCB3b3JkIGluIEphdmFTY3JpcHQgYW5kIHJlc2VydmVkIGtleXdvcmRzIGFyZSBub3Qgc3VwcG9ydGVkIGFzXHJcbiAqICAgcHJvcGVydHkgbmFtZXMgYnkgRVMzLCB5b3UnbGwgbmVlZCB0byBpbnZva2UgdGhlIG1ldGhvZCBsaWtlIGBwcm9taXNlWydmaW5hbGx5J10oY2FsbGJhY2spYCB0b1xyXG4gKiAgIG1ha2UgeW91ciBjb2RlIElFOCBhbmQgQW5kcm9pZCAyLnggY29tcGF0aWJsZS5cclxuICpcclxuICogIyBDaGFpbmluZyBwcm9taXNlc1xyXG4gKlxyXG4gKiBCZWNhdXNlIGNhbGxpbmcgdGhlIGB0aGVuYCBtZXRob2Qgb2YgYSBwcm9taXNlIHJldHVybnMgYSBuZXcgZGVyaXZlZCBwcm9taXNlLCBpdCBpcyBlYXNpbHlcclxuICogcG9zc2libGUgdG8gY3JlYXRlIGEgY2hhaW4gb2YgcHJvbWlzZXM6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgcHJvbWlzZUIgPSBwcm9taXNlQS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gKiAgICAgcmV0dXJuIHJlc3VsdCArIDE7XHJcbiAqICAgfSk7XHJcbiAqXHJcbiAqICAgLy8gcHJvbWlzZUIgd2lsbCBiZSByZXNvbHZlZCBpbW1lZGlhdGVseSBhZnRlciBwcm9taXNlQSBpcyByZXNvbHZlZCBhbmQgaXRzIHZhbHVlXHJcbiAqICAgLy8gd2lsbCBiZSB0aGUgcmVzdWx0IG9mIHByb21pc2VBIGluY3JlbWVudGVkIGJ5IDFcclxuICogYGBgXHJcbiAqXHJcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGNyZWF0ZSBjaGFpbnMgb2YgYW55IGxlbmd0aCBhbmQgc2luY2UgYSBwcm9taXNlIGNhbiBiZSByZXNvbHZlZCB3aXRoIGFub3RoZXJcclxuICogcHJvbWlzZSAod2hpY2ggd2lsbCBkZWZlciBpdHMgcmVzb2x1dGlvbiBmdXJ0aGVyKSwgaXQgaXMgcG9zc2libGUgdG8gcGF1c2UvZGVmZXIgcmVzb2x1dGlvbiBvZlxyXG4gKiB0aGUgcHJvbWlzZXMgYXQgYW55IHBvaW50IGluIHRoZSBjaGFpbi4gVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSB0byBpbXBsZW1lbnQgcG93ZXJmdWwgQVBJcyBsaWtlXHJcbiAqICRodHRwJ3MgcmVzcG9uc2UgaW50ZXJjZXB0b3JzLlxyXG4gKlxyXG4gKlxyXG4gKiAjIERpZmZlcmVuY2VzIGJldHdlZW4gS3JpcyBLb3dhbCdzIFEgYW5kICRxXHJcbiAqXHJcbiAqICBUaGVyZSBhcmUgdHdvIG1haW4gZGlmZmVyZW5jZXM6XHJcbiAqXHJcbiAqIC0gJHEgaXMgaW50ZWdyYXRlZCB3aXRoIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZX0gU2NvcGUgbW9kZWwgb2JzZXJ2YXRpb25cclxuICogICBtZWNoYW5pc20gaW4gYW5ndWxhciwgd2hpY2ggbWVhbnMgZmFzdGVyIHByb3BhZ2F0aW9uIG9mIHJlc29sdXRpb24gb3IgcmVqZWN0aW9uIGludG8geW91clxyXG4gKiAgIG1vZGVscyBhbmQgYXZvaWRpbmcgdW5uZWNlc3NhcnkgYnJvd3NlciByZXBhaW50cywgd2hpY2ggd291bGQgcmVzdWx0IGluIGZsaWNrZXJpbmcgVUkuXHJcbiAqIC0gUSBoYXMgbWFueSBtb3JlIGZlYXR1cmVzIHRoYW4gJHEsIGJ1dCB0aGF0IGNvbWVzIGF0IGEgY29zdCBvZiBieXRlcy4gJHEgaXMgdGlueSwgYnV0IGNvbnRhaW5zXHJcbiAqICAgYWxsIHRoZSBpbXBvcnRhbnQgZnVuY3Rpb25hbGl0eSBuZWVkZWQgZm9yIGNvbW1vbiBhc3luYyB0YXNrcy5cclxuICpcclxuICogICMgVGVzdGluZ1xyXG4gKlxyXG4gKiAgYGBganNcclxuICogICAgaXQoJ3Nob3VsZCBzaW11bGF0ZSBwcm9taXNlJywgaW5qZWN0KGZ1bmN0aW9uKCRxLCAkcm9vdFNjb3BlKSB7XHJcbiAqICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICogICAgICB2YXIgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XHJcbiAqICAgICAgdmFyIHJlc29sdmVkVmFsdWU7XHJcbiAqXHJcbiAqICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7IHJlc29sdmVkVmFsdWUgPSB2YWx1ZTsgfSk7XHJcbiAqICAgICAgZXhwZWN0KHJlc29sdmVkVmFsdWUpLnRvQmVVbmRlZmluZWQoKTtcclxuICpcclxuICogICAgICAvLyBTaW11bGF0ZSByZXNvbHZpbmcgb2YgcHJvbWlzZVxyXG4gKiAgICAgIGRlZmVycmVkLnJlc29sdmUoMTIzKTtcclxuICogICAgICAvLyBOb3RlIHRoYXQgdGhlICd0aGVuJyBmdW5jdGlvbiBkb2VzIG5vdCBnZXQgY2FsbGVkIHN5bmNocm9ub3VzbHkuXHJcbiAqICAgICAgLy8gVGhpcyBpcyBiZWNhdXNlIHdlIHdhbnQgdGhlIHByb21pc2UgQVBJIHRvIGFsd2F5cyBiZSBhc3luYywgd2hldGhlciBvciBub3RcclxuICogICAgICAvLyBpdCBnb3QgY2FsbGVkIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3VzbHkuXHJcbiAqICAgICAgZXhwZWN0KHJlc29sdmVkVmFsdWUpLnRvQmVVbmRlZmluZWQoKTtcclxuICpcclxuICogICAgICAvLyBQcm9wYWdhdGUgcHJvbWlzZSByZXNvbHV0aW9uIHRvICd0aGVuJyBmdW5jdGlvbnMgdXNpbmcgJGFwcGx5KCkuXHJcbiAqICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcclxuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9FcXVhbCgxMjMpO1xyXG4gKiAgICB9KSk7XHJcbiAqICBgYGBcclxuICpcclxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbiwgZnVuY3Rpb24pfSByZXNvbHZlciBGdW5jdGlvbiB3aGljaCBpcyByZXNwb25zaWJsZSBmb3IgcmVzb2x2aW5nIG9yXHJcbiAqICAgcmVqZWN0aW5nIHRoZSBuZXdseSBjcmVhdGVkIHByb21pc2UuIFRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB3aGljaCByZXNvbHZlcyB0aGVcclxuICogICBwcm9taXNlLCB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyBhIGZ1bmN0aW9uIHdoaWNoIHJlamVjdHMgdGhlIHByb21pc2UuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgbmV3bHkgY3JlYXRlZCBwcm9taXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gJFFQcm92aWRlcigpIHtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcclxuICAgIHJldHVybiBxRmFjdG9yeShmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoY2FsbGJhY2spO1xyXG4gICAgfSwgJGV4Y2VwdGlvbkhhbmRsZXIpO1xyXG4gIH1dO1xyXG59XHJcblxyXG5mdW5jdGlvbiAkJFFQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24oJGJyb3dzZXIsICRleGNlcHRpb25IYW5kbGVyKSB7XHJcbiAgICByZXR1cm4gcUZhY3RvcnkoZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgJGJyb3dzZXIuZGVmZXIoY2FsbGJhY2spO1xyXG4gICAgfSwgJGV4Y2VwdGlvbkhhbmRsZXIpO1xyXG4gIH1dO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhIHByb21pc2UgbWFuYWdlci5cclxuICpcclxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbil9IG5leHRUaWNrIEZ1bmN0aW9uIGZvciBleGVjdXRpbmcgZnVuY3Rpb25zIGluIHRoZSBuZXh0IHR1cm4uXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uKil9IGV4Y2VwdGlvbkhhbmRsZXIgRnVuY3Rpb24gaW50byB3aGljaCB1bmV4cGVjdGVkIGV4Y2VwdGlvbnMgYXJlIHBhc3NlZCBmb3JcclxuICogICAgIGRlYnVnZ2luZyBwdXJwb3Nlcy5cclxuICogQHJldHVybnMge29iamVjdH0gUHJvbWlzZSBtYW5hZ2VyLlxyXG4gKi9cclxuZnVuY3Rpb24gcUZhY3RvcnkobmV4dFRpY2ssIGV4Y2VwdGlvbkhhbmRsZXIpIHtcclxuICB2YXIgJHFNaW5FcnIgPSBtaW5FcnIoJyRxJywgVHlwZUVycm9yKTtcclxuICBmdW5jdGlvbiBjYWxsT25jZShzZWxmLCByZXNvbHZlRm4sIHJlamVjdEZuKSB7XHJcbiAgICB2YXIgY2FsbGVkID0gZmFsc2U7XHJcbiAgICBmdW5jdGlvbiB3cmFwKGZuKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIGlmIChjYWxsZWQpIHJldHVybjtcclxuICAgICAgICBjYWxsZWQgPSB0cnVlO1xyXG4gICAgICAgIGZuLmNhbGwoc2VsZiwgdmFsdWUpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBbd3JhcChyZXNvbHZlRm4pLCB3cmFwKHJlamVjdEZuKV07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmcuJHEjZGVmZXJcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ3JlYXRlcyBhIGBEZWZlcnJlZGAgb2JqZWN0IHdoaWNoIHJlcHJlc2VudHMgYSB0YXNrIHdoaWNoIHdpbGwgZmluaXNoIGluIHRoZSBmdXR1cmUuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7RGVmZXJyZWR9IFJldHVybnMgYSBuZXcgaW5zdGFuY2Ugb2YgZGVmZXJyZWQuXHJcbiAgICovXHJcbiAgdmFyIGRlZmVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbmV3IERlZmVycmVkKCk7XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gUHJvbWlzZSgpIHtcclxuICAgIHRoaXMuJCRzdGF0ZSA9IHsgc3RhdHVzOiAwIH07XHJcbiAgfVxyXG5cclxuICBQcm9taXNlLnByb3RvdHlwZSA9IHtcclxuICAgIHRoZW46IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9ncmVzc0JhY2spIHtcclxuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBEZWZlcnJlZCgpO1xyXG5cclxuICAgICAgdGhpcy4kJHN0YXRlLnBlbmRpbmcgPSB0aGlzLiQkc3RhdGUucGVuZGluZyB8fCBbXTtcclxuICAgICAgdGhpcy4kJHN0YXRlLnBlbmRpbmcucHVzaChbcmVzdWx0LCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcHJvZ3Jlc3NCYWNrXSk7XHJcbiAgICAgIGlmICh0aGlzLiQkc3RhdGUuc3RhdHVzID4gMCkgc2NoZWR1bGVQcm9jZXNzUXVldWUodGhpcy4kJHN0YXRlKTtcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQucHJvbWlzZTtcclxuICAgIH0sXHJcblxyXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIGNhbGxiYWNrKTtcclxuICAgIH0sXHJcblxyXG4gICAgXCJmaW5hbGx5XCI6IGZ1bmN0aW9uKGNhbGxiYWNrLCBwcm9ncmVzc0JhY2spIHtcclxuICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBoYW5kbGVDYWxsYmFjayh2YWx1ZSwgdHJ1ZSwgY2FsbGJhY2spO1xyXG4gICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBoYW5kbGVDYWxsYmFjayhlcnJvciwgZmFsc2UsIGNhbGxiYWNrKTtcclxuICAgICAgfSwgcHJvZ3Jlc3NCYWNrKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL0Zhc3RlciwgbW9yZSBiYXNpYyB0aGFuIGFuZ3VsYXIuYmluZCBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyLWJpbmQtdnMtY3VzdG9tLXZzLW5hdGl2ZVxyXG4gIGZ1bmN0aW9uIHNpbXBsZUJpbmQoY29udGV4dCwgZm4pIHtcclxuICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICBmbi5jYWxsKGNvbnRleHQsIHZhbHVlKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwcm9jZXNzUXVldWUoc3RhdGUpIHtcclxuICAgIHZhciBmbiwgcHJvbWlzZSwgcGVuZGluZztcclxuXHJcbiAgICBwZW5kaW5nID0gc3RhdGUucGVuZGluZztcclxuICAgIHN0YXRlLnByb2Nlc3NTY2hlZHVsZWQgPSBmYWxzZTtcclxuICAgIHN0YXRlLnBlbmRpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwZW5kaW5nLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcclxuICAgICAgcHJvbWlzZSA9IHBlbmRpbmdbaV1bMF07XHJcbiAgICAgIGZuID0gcGVuZGluZ1tpXVtzdGF0ZS5zdGF0dXNdO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xyXG4gICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKGZuKHN0YXRlLnZhbHVlKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5zdGF0dXMgPT09IDEpIHtcclxuICAgICAgICAgIHByb21pc2UucmVzb2x2ZShzdGF0ZS52YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHByb21pc2UucmVqZWN0KHN0YXRlLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgIHByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHN0YXRlKSB7XHJcbiAgICBpZiAoc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCB8fCAhc3RhdGUucGVuZGluZykgcmV0dXJuO1xyXG4gICAgc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCA9IHRydWU7XHJcbiAgICBuZXh0VGljayhmdW5jdGlvbigpIHsgcHJvY2Vzc1F1ZXVlKHN0YXRlKTsgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBEZWZlcnJlZCgpIHtcclxuICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCk7XHJcbiAgICAvL05lY2Vzc2FyeSB0byBzdXBwb3J0IHVuYm91bmQgZXhlY3V0aW9uIDovXHJcbiAgICB0aGlzLnJlc29sdmUgPSBzaW1wbGVCaW5kKHRoaXMsIHRoaXMucmVzb2x2ZSk7XHJcbiAgICB0aGlzLnJlamVjdCA9IHNpbXBsZUJpbmQodGhpcywgdGhpcy5yZWplY3QpO1xyXG4gICAgdGhpcy5ub3RpZnkgPSBzaW1wbGVCaW5kKHRoaXMsIHRoaXMubm90aWZ5KTtcclxuICB9XHJcblxyXG4gIERlZmVycmVkLnByb3RvdHlwZSA9IHtcclxuICAgIHJlc29sdmU6IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICBpZiAodGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzKSByZXR1cm47XHJcbiAgICAgIGlmICh2YWwgPT09IHRoaXMucHJvbWlzZSkge1xyXG4gICAgICAgIHRoaXMuJCRyZWplY3QoJHFNaW5FcnIoXHJcbiAgICAgICAgICAncWN5Y2xlJyxcclxuICAgICAgICAgIFwiRXhwZWN0ZWQgcHJvbWlzZSB0byBiZSByZXNvbHZlZCB3aXRoIHZhbHVlIG90aGVyIHRoYW4gaXRzZWxmICd7MH0nXCIsXHJcbiAgICAgICAgICB2YWwpKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLiQkcmVzb2x2ZSh2YWwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAkJHJlc29sdmU6IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICB2YXIgdGhlbiwgZm5zO1xyXG5cclxuICAgICAgZm5zID0gY2FsbE9uY2UodGhpcywgdGhpcy4kJHJlc29sdmUsIHRoaXMuJCRyZWplY3QpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICgoaXNPYmplY3QodmFsKSB8fCBpc0Z1bmN0aW9uKHZhbCkpKSB0aGVuID0gdmFsICYmIHZhbC50aGVuO1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoZW4pKSB7XHJcbiAgICAgICAgICB0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAtMTtcclxuICAgICAgICAgIHRoZW4uY2FsbCh2YWwsIGZuc1swXSwgZm5zWzFdLCB0aGlzLm5vdGlmeSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgdGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzID0gMTtcclxuICAgICAgICAgIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHRoaXMucHJvbWlzZS4kJHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgIGZuc1sxXShlKTtcclxuICAgICAgICBleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJlamVjdDogZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICAgIGlmICh0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMpIHJldHVybjtcclxuICAgICAgdGhpcy4kJHJlamVjdChyZWFzb24pO1xyXG4gICAgfSxcclxuXHJcbiAgICAkJHJlamVjdDogZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICAgIHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlID0gcmVhc29uO1xyXG4gICAgICB0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAyO1xyXG4gICAgICBzY2hlZHVsZVByb2Nlc3NRdWV1ZSh0aGlzLnByb21pc2UuJCRzdGF0ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG5vdGlmeTogZnVuY3Rpb24ocHJvZ3Jlc3MpIHtcclxuICAgICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMucHJvbWlzZS4kJHN0YXRlLnBlbmRpbmc7XHJcblxyXG4gICAgICBpZiAoKHRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA8PSAwKSAmJiBjYWxsYmFja3MgJiYgY2FsbGJhY2tzLmxlbmd0aCkge1xyXG4gICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIGNhbGxiYWNrLCByZXN1bHQ7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBjYWxsYmFja3NbaV1bMF07XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldWzNdO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIHJlc3VsdC5ub3RpZnkoaXNGdW5jdGlvbihjYWxsYmFjaykgPyBjYWxsYmFjayhwcm9ncmVzcykgOiBwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkcSNyZWplY3RcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ3JlYXRlcyBhIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCBhcyByZWplY3RlZCB3aXRoIHRoZSBzcGVjaWZpZWQgYHJlYXNvbmAuIFRoaXMgYXBpIHNob3VsZCBiZVxyXG4gICAqIHVzZWQgdG8gZm9yd2FyZCByZWplY3Rpb24gaW4gYSBjaGFpbiBvZiBwcm9taXNlcy4gSWYgeW91IGFyZSBkZWFsaW5nIHdpdGggdGhlIGxhc3QgcHJvbWlzZSBpblxyXG4gICAqIGEgcHJvbWlzZSBjaGFpbiwgeW91IGRvbid0IG5lZWQgdG8gd29ycnkgYWJvdXQgaXQuXHJcbiAgICpcclxuICAgKiBXaGVuIGNvbXBhcmluZyBkZWZlcnJlZHMvcHJvbWlzZXMgdG8gdGhlIGZhbWlsaWFyIGJlaGF2aW9yIG9mIHRyeS9jYXRjaC90aHJvdywgdGhpbmsgb2ZcclxuICAgKiBgcmVqZWN0YCBhcyB0aGUgYHRocm93YCBrZXl3b3JkIGluIEphdmFTY3JpcHQuIFRoaXMgYWxzbyBtZWFucyB0aGF0IGlmIHlvdSBcImNhdGNoXCIgYW4gZXJyb3IgdmlhXHJcbiAgICogYSBwcm9taXNlIGVycm9yIGNhbGxiYWNrIGFuZCB5b3Ugd2FudCB0byBmb3J3YXJkIHRoZSBlcnJvciB0byB0aGUgcHJvbWlzZSBkZXJpdmVkIGZyb20gdGhlXHJcbiAgICogY3VycmVudCBwcm9taXNlLCB5b3UgaGF2ZSB0byBcInJldGhyb3dcIiB0aGUgZXJyb3IgYnkgcmV0dXJuaW5nIGEgcmVqZWN0aW9uIGNvbnN0cnVjdGVkIHZpYVxyXG4gICAqIGByZWplY3RgLlxyXG4gICAqXHJcbiAgICogYGBganNcclxuICAgKiAgIHByb21pc2VCID0gcHJvbWlzZUEudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgKiAgICAgLy8gc3VjY2VzczogZG8gc29tZXRoaW5nIGFuZCByZXNvbHZlIHByb21pc2VCXHJcbiAgICogICAgIC8vICAgICAgICAgIHdpdGggdGhlIG9sZCBvciBhIG5ldyByZXN1bHRcclxuICAgKiAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAqICAgICAvLyBlcnJvcjogaGFuZGxlIHRoZSBlcnJvciBpZiBwb3NzaWJsZSBhbmRcclxuICAgKiAgICAgLy8gICAgICAgIHJlc29sdmUgcHJvbWlzZUIgd2l0aCBuZXdQcm9taXNlT3JWYWx1ZSxcclxuICAgKiAgICAgLy8gICAgICAgIG90aGVyd2lzZSBmb3J3YXJkIHRoZSByZWplY3Rpb24gdG8gcHJvbWlzZUJcclxuICAgKiAgICAgaWYgKGNhbkhhbmRsZShyZWFzb24pKSB7XHJcbiAgICogICAgICAvLyBoYW5kbGUgdGhlIGVycm9yIGFuZCByZWNvdmVyXHJcbiAgICogICAgICByZXR1cm4gbmV3UHJvbWlzZU9yVmFsdWU7XHJcbiAgICogICAgIH1cclxuICAgKiAgICAgcmV0dXJuICRxLnJlamVjdChyZWFzb24pO1xyXG4gICAqICAgfSk7XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHJlYXNvbiBDb25zdGFudCwgbWVzc2FnZSwgZXhjZXB0aW9uIG9yIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJlamVjdGlvbiByZWFzb24uXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2FzIGFscmVhZHkgcmVzb2x2ZWQgYXMgcmVqZWN0ZWQgd2l0aCB0aGUgYHJlYXNvbmAuXHJcbiAgICovXHJcbiAgdmFyIHJlamVjdCA9IGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgdmFyIHJlc3VsdCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgcmVzdWx0LnJlamVjdChyZWFzb24pO1xyXG4gICAgcmV0dXJuIHJlc3VsdC5wcm9taXNlO1xyXG4gIH07XHJcblxyXG4gIHZhciBtYWtlUHJvbWlzZSA9IGZ1bmN0aW9uIG1ha2VQcm9taXNlKHZhbHVlLCByZXNvbHZlZCkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgaWYgKHJlc29sdmVkKSB7XHJcbiAgICAgIHJlc3VsdC5yZXNvbHZlKHZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc3VsdC5yZWplY3QodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdC5wcm9taXNlO1xyXG4gIH07XHJcblxyXG4gIHZhciBoYW5kbGVDYWxsYmFjayA9IGZ1bmN0aW9uIGhhbmRsZUNhbGxiYWNrKHZhbHVlLCBpc1Jlc29sdmVkLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGNhbGxiYWNrT3V0cHV0ID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkgY2FsbGJhY2tPdXRwdXQgPSBjYWxsYmFjaygpO1xyXG4gICAgfSBjYXRjaChlKSB7XHJcbiAgICAgIHJldHVybiBtYWtlUHJvbWlzZShlLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNQcm9taXNlTGlrZShjYWxsYmFja091dHB1dCkpIHtcclxuICAgICAgcmV0dXJuIGNhbGxiYWNrT3V0cHV0LnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1ha2VQcm9taXNlKHZhbHVlLCBpc1Jlc29sdmVkKTtcclxuICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gbWFrZVByb21pc2UoZXJyb3IsIGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbWFrZVByb21pc2UodmFsdWUsIGlzUmVzb2x2ZWQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkcSN3aGVuXHJcbiAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFdyYXBzIGFuIG9iamVjdCB0aGF0IG1pZ2h0IGJlIGEgdmFsdWUgb3IgYSAoM3JkIHBhcnR5KSB0aGVuLWFibGUgcHJvbWlzZSBpbnRvIGEgJHEgcHJvbWlzZS5cclxuICAgKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHlvdSBhcmUgZGVhbGluZyB3aXRoIGFuIG9iamVjdCB0aGF0IG1pZ2h0IG9yIG1pZ2h0IG5vdCBiZSBhIHByb21pc2UsIG9yIGlmXHJcbiAgICogdGhlIHByb21pc2UgY29tZXMgZnJvbSBhIHNvdXJjZSB0aGF0IGNhbid0IGJlIHRydXN0ZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIG9yIGEgcHJvbWlzZVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgcHJvbWlzZSBvZiB0aGUgcGFzc2VkIHZhbHVlIG9yIHByb21pc2VcclxuICAgKi9cclxuXHJcblxyXG4gIHZhciB3aGVuID0gZnVuY3Rpb24odmFsdWUsIGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spIHtcclxuICAgIHZhciByZXN1bHQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHJlc3VsdC5yZXNvbHZlKHZhbHVlKTtcclxuICAgIHJldHVybiByZXN1bHQucHJvbWlzZS50aGVuKGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkcSNhbGxcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ29tYmluZXMgbXVsdGlwbGUgcHJvbWlzZXMgaW50byBhIHNpbmdsZSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBhbGwgb2YgdGhlIGlucHV0XHJcbiAgICogcHJvbWlzZXMgYXJlIHJlc29sdmVkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheS48UHJvbWlzZT58T2JqZWN0LjxQcm9taXNlPn0gcHJvbWlzZXMgQW4gYXJyYXkgb3IgaGFzaCBvZiBwcm9taXNlcy5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHNpbmdsZSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIGFuIGFycmF5L2hhc2ggb2YgdmFsdWVzLFxyXG4gICAqICAgZWFjaCB2YWx1ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm9taXNlIGF0IHRoZSBzYW1lIGluZGV4L2tleSBpbiB0aGUgYHByb21pc2VzYCBhcnJheS9oYXNoLlxyXG4gICAqICAgSWYgYW55IG9mIHRoZSBwcm9taXNlcyBpcyByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLCB0aGlzIHJlc3VsdGluZyBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWRcclxuICAgKiAgIHdpdGggdGhlIHNhbWUgcmVqZWN0aW9uIHZhbHVlLlxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcclxuICAgIHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpLFxyXG4gICAgICAgIGNvdW50ZXIgPSAwLFxyXG4gICAgICAgIHJlc3VsdHMgPSBpc0FycmF5KHByb21pc2VzKSA/IFtdIDoge307XHJcblxyXG4gICAgZm9yRWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSwga2V5KSB7XHJcbiAgICAgIGNvdW50ZXIrKztcclxuICAgICAgd2hlbihwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHJlc3VsdHMuaGFzT3duUHJvcGVydHkoa2V5KSkgcmV0dXJuO1xyXG4gICAgICAgIHJlc3VsdHNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIGlmICghKC0tY291bnRlcikpIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICAgIGlmIChyZXN1bHRzLmhhc093blByb3BlcnR5KGtleSkpIHJldHVybjtcclxuICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoY291bnRlciA9PT0gMCkge1xyXG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgdmFyICRRID0gZnVuY3Rpb24gUShyZXNvbHZlcikge1xyXG4gICAgaWYgKCFpc0Z1bmN0aW9uKHJlc29sdmVyKSkge1xyXG4gICAgICB0aHJvdyAkcU1pbkVycignbm9yc2x2cicsIFwiRXhwZWN0ZWQgcmVzb2x2ZXJGbiwgZ290ICd7MH0nXCIsIHJlc29sdmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUSkpIHtcclxuICAgICAgLy8gTW9yZSB1c2VmdWwgd2hlbiAkUSBpcyB0aGUgUHJvbWlzZSBpdHNlbGYuXHJcbiAgICAgIHJldHVybiBuZXcgUShyZXNvbHZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzb2x2ZUZuKHZhbHVlKSB7XHJcbiAgICAgIGRlZmVycmVkLnJlc29sdmUodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlamVjdEZuKHJlYXNvbikge1xyXG4gICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNvbHZlcihyZXNvbHZlRm4sIHJlamVjdEZuKTtcclxuXHJcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICB9O1xyXG5cclxuICAkUS5kZWZlciA9IGRlZmVyO1xyXG4gICRRLnJlamVjdCA9IHJlamVjdDtcclxuICAkUS53aGVuID0gd2hlbjtcclxuICAkUS5hbGwgPSBhbGw7XHJcblxyXG4gIHJldHVybiAkUTtcclxufVxyXG5cclxuZnVuY3Rpb24gJCRSQUZQcm92aWRlcigpeyAvL3JBRlxyXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckdGltZW91dCcsIGZ1bmN0aW9uKCR3aW5kb3csICR0aW1lb3V0KSB7XHJcbiAgICB2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG5cclxuICAgIHZhciBjYW5jZWxBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG5cclxuICAgIHZhciByYWZTdXBwb3J0ZWQgPSAhIXJlcXVlc3RBbmltYXRpb25GcmFtZTtcclxuICAgIHZhciByYWYgPSByYWZTdXBwb3J0ZWRcclxuICAgICAgPyBmdW5jdGlvbihmbikge1xyXG4gICAgICAgICAgdmFyIGlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZuKTtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIDogZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICAgIHZhciB0aW1lciA9ICR0aW1lb3V0KGZuLCAxNi42NiwgZmFsc2UpOyAvLyAxMDAwIC8gNjAgPSAxNi42NjZcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICByYWYuc3VwcG9ydGVkID0gcmFmU3VwcG9ydGVkO1xyXG5cclxuICAgIHJldHVybiByYWY7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBERVNJR04gTk9URVNcclxuICpcclxuICogVGhlIGRlc2lnbiBkZWNpc2lvbnMgYmVoaW5kIHRoZSBzY29wZSBhcmUgaGVhdmlseSBmYXZvcmVkIGZvciBzcGVlZCBhbmQgbWVtb3J5IGNvbnN1bXB0aW9uLlxyXG4gKlxyXG4gKiBUaGUgdHlwaWNhbCB1c2Ugb2Ygc2NvcGUgaXMgdG8gd2F0Y2ggdGhlIGV4cHJlc3Npb25zLCB3aGljaCBtb3N0IG9mIHRoZSB0aW1lIHJldHVybiB0aGUgc2FtZVxyXG4gKiB2YWx1ZSBhcyBsYXN0IHRpbWUgc28gd2Ugb3B0aW1pemUgdGhlIG9wZXJhdGlvbi5cclxuICpcclxuICogQ2xvc3VyZXMgY29uc3RydWN0aW9uIGlzIGV4cGVuc2l2ZSBpbiB0ZXJtcyBvZiBzcGVlZCBhcyB3ZWxsIGFzIG1lbW9yeTpcclxuICogICAtIE5vIGNsb3N1cmVzLCBpbnN0ZWFkIHVzZSBwcm90b3R5cGljYWwgaW5oZXJpdGFuY2UgZm9yIEFQSVxyXG4gKiAgIC0gSW50ZXJuYWwgc3RhdGUgbmVlZHMgdG8gYmUgc3RvcmVkIG9uIHNjb3BlIGRpcmVjdGx5LCB3aGljaCBtZWFucyB0aGF0IHByaXZhdGUgc3RhdGUgaXNcclxuICogICAgIGV4cG9zZWQgYXMgJCRfX19fIHByb3BlcnRpZXNcclxuICpcclxuICogTG9vcCBvcGVyYXRpb25zIGFyZSBvcHRpbWl6ZWQgYnkgdXNpbmcgd2hpbGUoY291bnQtLSkgeyAuLi4gfVxyXG4gKiAgIC0gdGhpcyBtZWFucyB0aGF0IGluIG9yZGVyIHRvIGtlZXAgdGhlIHNhbWUgb3JkZXIgb2YgZXhlY3V0aW9uIGFzIGFkZGl0aW9uIHdlIGhhdmUgdG8gYWRkXHJcbiAqICAgICBpdGVtcyB0byB0aGUgYXJyYXkgYXQgdGhlIGJlZ2lubmluZyAodW5zaGlmdCkgaW5zdGVhZCBvZiBhdCB0aGUgZW5kIChwdXNoKVxyXG4gKlxyXG4gKiBDaGlsZCBzY29wZXMgYXJlIGNyZWF0ZWQgYW5kIHJlbW92ZWQgb2Z0ZW5cclxuICogICAtIFVzaW5nIGFuIGFycmF5IHdvdWxkIGJlIHNsb3cgc2luY2UgaW5zZXJ0cyBpbiBtaWRkbGUgYXJlIGV4cGVuc2l2ZSBzbyB3ZSB1c2UgbGlua2VkIGxpc3RcclxuICpcclxuICogVGhlcmUgYXJlIGZldyB3YXRjaGVzIHRoZW4gYSBsb3Qgb2Ygb2JzZXJ2ZXJzLiBUaGlzIGlzIHdoeSB5b3UgZG9uJ3Qgd2FudCB0aGUgb2JzZXJ2ZXIgdG8gYmVcclxuICogaW1wbGVtZW50ZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHdhdGNoLiBXYXRjaCByZXF1aXJlcyByZXR1cm4gb2YgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gd2hpY2hcclxuICogYXJlIGV4cGVuc2l2ZSB0byBjb25zdHJ1Y3QuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJHJvb3RTY29wZVByb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBQcm92aWRlciBmb3IgdGhlICRyb290U2NvcGUgc2VydmljZS5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkcm9vdFNjb3BlUHJvdmlkZXIjZGlnZXN0VHRsXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBTZXRzIHRoZSBudW1iZXIgb2YgYCRkaWdlc3RgIGl0ZXJhdGlvbnMgdGhlIHNjb3BlIHNob3VsZCBhdHRlbXB0IHRvIGV4ZWN1dGUgYmVmb3JlIGdpdmluZyB1cCBhbmRcclxuICogYXNzdW1pbmcgdGhhdCB0aGUgbW9kZWwgaXMgdW5zdGFibGUuXHJcbiAqXHJcbiAqIFRoZSBjdXJyZW50IGRlZmF1bHQgaXMgMTAgaXRlcmF0aW9ucy5cclxuICpcclxuICogSW4gY29tcGxleCBhcHBsaWNhdGlvbnMgaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBkZXBlbmRlbmNpZXMgYmV0d2VlbiBgJHdhdGNoYHMgd2lsbCByZXN1bHQgaW5cclxuICogc2V2ZXJhbCBkaWdlc3QgaXRlcmF0aW9ucy4gSG93ZXZlciBpZiBhbiBhcHBsaWNhdGlvbiBuZWVkcyBtb3JlIHRoYW4gdGhlIGRlZmF1bHQgMTAgZGlnZXN0XHJcbiAqIGl0ZXJhdGlvbnMgZm9yIGl0cyBtb2RlbCB0byBzdGFiaWxpemUgdGhlbiB5b3Ugc2hvdWxkIGludmVzdGlnYXRlIHdoYXQgaXMgY2F1c2luZyB0aGUgbW9kZWwgdG9cclxuICogY29udGludW91c2x5IGNoYW5nZSBkdXJpbmcgdGhlIGRpZ2VzdC5cclxuICpcclxuICogSW5jcmVhc2luZyB0aGUgVFRMIGNvdWxkIGhhdmUgcGVyZm9ybWFuY2UgaW1wbGljYXRpb25zLCBzbyB5b3Ugc2hvdWxkIG5vdCBjaGFuZ2UgaXQgd2l0aG91dFxyXG4gKiBwcm9wZXIganVzdGlmaWNhdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IFRoZSBudW1iZXIgb2YgZGlnZXN0IGl0ZXJhdGlvbnMuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkcm9vdFNjb3BlXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBFdmVyeSBhcHBsaWNhdGlvbiBoYXMgYSBzaW5nbGUgcm9vdCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0uXHJcbiAqIEFsbCBvdGhlciBzY29wZXMgYXJlIGRlc2NlbmRhbnQgc2NvcGVzIG9mIHRoZSByb290IHNjb3BlLiBTY29wZXMgcHJvdmlkZSBzZXBhcmF0aW9uXHJcbiAqIGJldHdlZW4gdGhlIG1vZGVsIGFuZCB0aGUgdmlldywgdmlhIGEgbWVjaGFuaXNtIGZvciB3YXRjaGluZyB0aGUgbW9kZWwgZm9yIGNoYW5nZXMuXHJcbiAqIFRoZXkgYWxzbyBwcm92aWRlIGFuIGV2ZW50IGVtaXNzaW9uL2Jyb2FkY2FzdCBhbmQgc3Vic2NyaXB0aW9uIGZhY2lsaXR5LiBTZWUgdGhlXHJcbiAqIHtAbGluayBndWlkZS9zY29wZSBkZXZlbG9wZXIgZ3VpZGUgb24gc2NvcGVzfS5cclxuICovXHJcbmZ1bmN0aW9uICRSb290U2NvcGVQcm92aWRlcigpe1xyXG4gIHZhciBUVEwgPSAxMDtcclxuICB2YXIgJHJvb3RTY29wZU1pbkVyciA9IG1pbkVycignJHJvb3RTY29wZScpO1xyXG4gIHZhciBsYXN0RGlydHlXYXRjaCA9IG51bGw7XHJcbiAgdmFyIGFwcGx5QXN5bmNJZCA9IG51bGw7XHJcblxyXG4gIHRoaXMuZGlnZXN0VHRsID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgIFRUTCA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFRUTDtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckZXhjZXB0aW9uSGFuZGxlcicsICckcGFyc2UnLCAnJGJyb3dzZXInLFxyXG4gICAgICBmdW5jdGlvbiggJGluamVjdG9yLCAgICRleGNlcHRpb25IYW5kbGVyLCAgICRwYXJzZSwgICAkYnJvd3Nlcikge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHR5cGVcclxuICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGVcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIEEgcm9vdCBzY29wZSBjYW4gYmUgcmV0cmlldmVkIHVzaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZSAkcm9vdFNjb3BlfSBrZXkgZnJvbSB0aGVcclxuICAgICAqIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBDaGlsZCBzY29wZXMgYXJlIGNyZWF0ZWQgdXNpbmcgdGhlXHJcbiAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkbmV3ICRuZXcoKX0gbWV0aG9kLiAoTW9zdCBzY29wZXMgYXJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSB3aGVuXHJcbiAgICAgKiBjb21waWxlZCBIVE1MIHRlbXBsYXRlIGlzIGV4ZWN1dGVkLilcclxuICAgICAqXHJcbiAgICAgKiBIZXJlIGlzIGEgc2ltcGxlIHNjb3BlIHNuaXBwZXQgdG8gc2hvdyBob3cgeW91IGNhbiBpbnRlcmFjdCB3aXRoIHRoZSBzY29wZS5cclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDxmaWxlIHNyYz1cIi4vdGVzdC9uZy9yb290U2NvcGVTcGVjLmpzXCIgdGFnPVwiZG9jczFcIiAvPlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyBJbmhlcml0YW5jZVxyXG4gICAgICogQSBzY29wZSBjYW4gaW5oZXJpdCBmcm9tIGEgcGFyZW50IHNjb3BlLCBhcyBpbiB0aGlzIGV4YW1wbGU6XHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICAgICB2YXIgcGFyZW50ID0gJHJvb3RTY29wZTtcclxuICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50LiRuZXcoKTtcclxuXHJcbiAgICAgICAgIHBhcmVudC5zYWx1dGF0aW9uID0gXCJIZWxsb1wiO1xyXG4gICAgICAgICBjaGlsZC5uYW1lID0gXCJXb3JsZFwiO1xyXG4gICAgICAgICBleHBlY3QoY2hpbGQuc2FsdXRhdGlvbikudG9FcXVhbCgnSGVsbG8nKTtcclxuXHJcbiAgICAgICAgIGNoaWxkLnNhbHV0YXRpb24gPSBcIldlbGNvbWVcIjtcclxuICAgICAgICAgZXhwZWN0KGNoaWxkLnNhbHV0YXRpb24pLnRvRXF1YWwoJ1dlbGNvbWUnKTtcclxuICAgICAgICAgZXhwZWN0KHBhcmVudC5zYWx1dGF0aW9uKS50b0VxdWFsKCdIZWxsbycpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uKCk+PX0gcHJvdmlkZXJzIE1hcCBvZiBzZXJ2aWNlIGZhY3Rvcnkgd2hpY2ggbmVlZCB0byBiZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZCBmb3IgdGhlIGN1cnJlbnQgc2NvcGUuIERlZmF1bHRzIHRvIHtAbGluayBuZ30uXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCAqPj19IGluc3RhbmNlQ2FjaGUgUHJvdmlkZXMgcHJlLWluc3RhbnRpYXRlZCBzZXJ2aWNlcyB3aGljaCBzaG91bGRcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kL292ZXJyaWRlIHNlcnZpY2VzIHByb3ZpZGVkIGJ5IGBwcm92aWRlcnNgLiBUaGlzIGlzIGhhbmR5XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gdW5pdC10ZXN0aW5nIGFuZCBoYXZpbmcgdGhlIG5lZWQgdG8gb3ZlcnJpZGUgYSBkZWZhdWx0XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2UuXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBOZXdseSBjcmVhdGVkIHNjb3BlLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gU2NvcGUoKSB7XHJcbiAgICAgIHRoaXMuJGlkID0gbmV4dFVpZCgpO1xyXG4gICAgICB0aGlzLiQkcGhhc2UgPSB0aGlzLiRwYXJlbnQgPSB0aGlzLiQkd2F0Y2hlcnMgPVxyXG4gICAgICAgICAgICAgICAgICAgICB0aGlzLiQkbmV4dFNpYmxpbmcgPSB0aGlzLiQkcHJldlNpYmxpbmcgPVxyXG4gICAgICAgICAgICAgICAgICAgICB0aGlzLiQkY2hpbGRIZWFkID0gdGhpcy4kJGNoaWxkVGFpbCA9IG51bGw7XHJcbiAgICAgIHRoaXNbJ3RoaXMnXSA9IHRoaXMuJHJvb3QgPSAgdGhpcztcclxuICAgICAgdGhpcy4kJGRlc3Ryb3llZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLiQkYXN5bmNRdWV1ZSA9IFtdO1xyXG4gICAgICB0aGlzLiQkcG9zdERpZ2VzdFF1ZXVlID0gW107XHJcbiAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcclxuICAgICAgdGhpcy4kJGxpc3RlbmVyQ291bnQgPSB7fTtcclxuICAgICAgdGhpcy4kJGlzb2xhdGVCaW5kaW5ncyA9IG51bGw7XHJcbiAgICAgIHRoaXMuJCRhcHBseUFzeW5jUXVldWUgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkaWRcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFVuaXF1ZSBzY29wZSBJRCAobW9ub3RvbmljYWxseSBpbmNyZWFzaW5nKSB1c2VmdWwgZm9yIGRlYnVnZ2luZy5cclxuICAgICAqL1xyXG5cclxuICAgICAvKipcclxuICAgICAgKiBAbmdkb2MgcHJvcGVydHlcclxuICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRwYXJlbnRcclxuICAgICAgKlxyXG4gICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAqIFJlZmVyZW5jZSB0byB0aGUgcGFyZW50IHNjb3BlLlxyXG4gICAgICAqL1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRyb290XHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHJvb3Qgc2NvcGUuXHJcbiAgICAgICAqL1xyXG5cclxuICAgIFNjb3BlLnByb3RvdHlwZSA9IHtcclxuICAgICAgY29uc3RydWN0b3I6IFNjb3BlLFxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRuZXdcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIENyZWF0ZXMgYSBuZXcgY2hpbGQge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgcGFyZW50IHNjb3BlIHdpbGwgcHJvcGFnYXRlIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gZXZlbnQuXHJcbiAgICAgICAqIFRoZSBzY29wZSBjYW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBzY29wZSBoaWVyYXJjaHkgdXNpbmcge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3kgJGRlc3Ryb3koKX0uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkZXN0cm95ICRkZXN0cm95KCl9IG11c3QgYmUgY2FsbGVkIG9uIGEgc2NvcGUgd2hlbiBpdCBpc1xyXG4gICAgICAgKiBkZXNpcmVkIGZvciB0aGUgc2NvcGUgYW5kIGl0cyBjaGlsZCBzY29wZXMgdG8gYmUgcGVybWFuZW50bHkgZGV0YWNoZWQgZnJvbSB0aGUgcGFyZW50IGFuZFxyXG4gICAgICAgKiB0aHVzIHN0b3AgcGFydGljaXBhdGluZyBpbiBtb2RlbCBjaGFuZ2UgZGV0ZWN0aW9uIGFuZCBsaXN0ZW5lciBub3RpZmljYXRpb24gYnkgaW52b2tpbmcuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNvbGF0ZSBJZiB0cnVlLCB0aGVuIHRoZSBzY29wZSBkb2VzIG5vdCBwcm90b3R5cGljYWxseSBpbmhlcml0IGZyb20gdGhlXHJcbiAgICAgICAqICAgICAgICAgcGFyZW50IHNjb3BlLiBUaGUgc2NvcGUgaXMgaXNvbGF0ZWQsIGFzIGl0IGNhbiBub3Qgc2VlIHBhcmVudCBzY29wZSBwcm9wZXJ0aWVzLlxyXG4gICAgICAgKiAgICAgICAgIFdoZW4gY3JlYXRpbmcgd2lkZ2V0cywgaXQgaXMgdXNlZnVsIGZvciB0aGUgd2lkZ2V0IHRvIG5vdCBhY2NpZGVudGFsbHkgcmVhZCBwYXJlbnRcclxuICAgICAgICogICAgICAgICBzdGF0ZS5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybnMge09iamVjdH0gVGhlIG5ld2x5IGNyZWF0ZWQgY2hpbGQgc2NvcGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqL1xyXG4gICAgICAkbmV3OiBmdW5jdGlvbihpc29sYXRlKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkO1xyXG5cclxuICAgICAgICBpZiAoaXNvbGF0ZSkge1xyXG4gICAgICAgICAgY2hpbGQgPSBuZXcgU2NvcGUoKTtcclxuICAgICAgICAgIGNoaWxkLiRyb290ID0gdGhpcy4kcm9vdDtcclxuICAgICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZXJlIGlzIGp1c3Qgb25lIGFzeW5jIHF1ZXVlIHBlciAkcm9vdFNjb3BlIGFuZCBpdHMgY2hpbGRyZW5cclxuICAgICAgICAgIGNoaWxkLiQkYXN5bmNRdWV1ZSA9IHRoaXMuJCRhc3luY1F1ZXVlO1xyXG4gICAgICAgICAgY2hpbGQuJCRwb3N0RGlnZXN0UXVldWUgPSB0aGlzLiQkcG9zdERpZ2VzdFF1ZXVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBPbmx5IGNyZWF0ZSBhIGNoaWxkIHNjb3BlIGNsYXNzIGlmIHNvbWVib2R5IGFza3MgZm9yIG9uZSxcclxuICAgICAgICAgIC8vIGJ1dCBjYWNoZSBpdCB0byBhbGxvdyB0aGUgVk0gdG8gb3B0aW1pemUgbG9va3Vwcy5cclxuICAgICAgICAgIGlmICghdGhpcy4kJENoaWxkU2NvcGUpIHtcclxuICAgICAgICAgICAgdGhpcy4kJENoaWxkU2NvcGUgPSBmdW5jdGlvbiBDaGlsZFNjb3BlKCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuJCR3YXRjaGVycyA9IHRoaXMuJCRuZXh0U2libGluZyA9XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuJCRjaGlsZEhlYWQgPSB0aGlzLiQkY2hpbGRUYWlsID0gbnVsbDtcclxuICAgICAgICAgICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XHJcbiAgICAgICAgICAgICAgdGhpcy4kJGxpc3RlbmVyQ291bnQgPSB7fTtcclxuICAgICAgICAgICAgICB0aGlzLiRpZCA9IG5leHRVaWQoKTtcclxuICAgICAgICAgICAgICB0aGlzLiQkQ2hpbGRTY29wZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuJCRDaGlsZFNjb3BlLnByb3RvdHlwZSA9IHRoaXM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjaGlsZCA9IG5ldyB0aGlzLiQkQ2hpbGRTY29wZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGlsZFsndGhpcyddID0gY2hpbGQ7XHJcbiAgICAgICAgY2hpbGQuJHBhcmVudCA9IHRoaXM7XHJcbiAgICAgICAgY2hpbGQuJCRwcmV2U2libGluZyA9IHRoaXMuJCRjaGlsZFRhaWw7XHJcbiAgICAgICAgaWYgKHRoaXMuJCRjaGlsZEhlYWQpIHtcclxuICAgICAgICAgIHRoaXMuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZyA9IGNoaWxkO1xyXG4gICAgICAgICAgdGhpcy4kJGNoaWxkVGFpbCA9IGNoaWxkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLiQkY2hpbGRIZWFkID0gdGhpcy4kJGNoaWxkVGFpbCA9IGNoaWxkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaFxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogUmVnaXN0ZXJzIGEgYGxpc3RlbmVyYCBjYWxsYmFjayB0byBiZSBleGVjdXRlZCB3aGVuZXZlciB0aGUgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cclxuICAgICAgICpcclxuICAgICAgICogLSBUaGUgYHdhdGNoRXhwcmVzc2lvbmAgaXMgY2FsbGVkIG9uIGV2ZXJ5IGNhbGwgdG8ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdFxyXG4gICAgICAgKiAgICRkaWdlc3QoKX0gYW5kIHNob3VsZCByZXR1cm4gdGhlIHZhbHVlIHRoYXQgd2lsbCBiZSB3YXRjaGVkLiAoU2luY2VcclxuICAgICAgICogICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gcmVydW5zIHdoZW4gaXQgZGV0ZWN0cyBjaGFuZ2VzIHRoZVxyXG4gICAgICAgKiAgIGB3YXRjaEV4cHJlc3Npb25gIGNhbiBleGVjdXRlIG11bHRpcGxlIHRpbWVzIHBlclxyXG4gICAgICAgKiAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBhbmQgc2hvdWxkIGJlIGlkZW1wb3RlbnQuKVxyXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCBvbmx5IHdoZW4gdGhlIHZhbHVlIGZyb20gdGhlIGN1cnJlbnQgYHdhdGNoRXhwcmVzc2lvbmAgYW5kIHRoZVxyXG4gICAgICAgKiAgIHByZXZpb3VzIGNhbGwgdG8gYHdhdGNoRXhwcmVzc2lvbmAgYXJlIG5vdCBlcXVhbCAod2l0aCB0aGUgZXhjZXB0aW9uIG9mIHRoZSBpbml0aWFsIHJ1bixcclxuICAgICAgICogICBzZWUgYmVsb3cpLiBJbmVxdWFsaXR5IGlzIGRldGVybWluZWQgYWNjb3JkaW5nIHRvIHJlZmVyZW5jZSBpbmVxdWFsaXR5LFxyXG4gICAgICAgKiAgIFtzdHJpY3QgY29tcGFyaXNvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL0NvbXBhcmlzb25fT3BlcmF0b3JzKVxyXG4gICAgICAgKiAgICB2aWEgdGhlIGAhPT1gIEphdmFzY3JpcHQgb3BlcmF0b3IsIHVubGVzcyBgb2JqZWN0RXF1YWxpdHkgPT0gdHJ1ZWBcclxuICAgICAgICogICAoc2VlIG5leHQgcG9pbnQpXHJcbiAgICAgICAqIC0gV2hlbiBgb2JqZWN0RXF1YWxpdHkgPT0gdHJ1ZWAsIGluZXF1YWxpdHkgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gIGlzIGRldGVybWluZWRcclxuICAgICAgICogICBhY2NvcmRpbmcgdG8gdGhlIHtAbGluayBhbmd1bGFyLmVxdWFsc30gZnVuY3Rpb24uIFRvIHNhdmUgdGhlIHZhbHVlIG9mIHRoZSBvYmplY3QgZm9yXHJcbiAgICAgICAqICAgbGF0ZXIgY29tcGFyaXNvbiwgdGhlIHtAbGluayBhbmd1bGFyLmNvcHl9IGZ1bmN0aW9uIGlzIHVzZWQuIFRoaXMgdGhlcmVmb3JlIG1lYW5zIHRoYXRcclxuICAgICAgICogICB3YXRjaGluZyBjb21wbGV4IG9iamVjdHMgd2lsbCBoYXZlIGFkdmVyc2UgbWVtb3J5IGFuZCBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMuXHJcbiAgICAgICAqIC0gVGhlIHdhdGNoIGBsaXN0ZW5lcmAgbWF5IGNoYW5nZSB0aGUgbW9kZWwsIHdoaWNoIG1heSB0cmlnZ2VyIG90aGVyIGBsaXN0ZW5lcmBzIHRvIGZpcmUuXHJcbiAgICAgICAqICAgVGhpcyBpcyBhY2hpZXZlZCBieSByZXJ1bm5pbmcgdGhlIHdhdGNoZXJzIHVudGlsIG5vIGNoYW5nZXMgYXJlIGRldGVjdGVkLiBUaGUgcmVydW5cclxuICAgICAgICogICBpdGVyYXRpb24gbGltaXQgaXMgMTAgdG8gcHJldmVudCBhbiBpbmZpbml0ZSBsb29wIGRlYWRsb2NrLlxyXG4gICAgICAgKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBJZiB5b3Ugd2FudCB0byBiZSBub3RpZmllZCB3aGVuZXZlciB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGlzIGNhbGxlZCxcclxuICAgICAgICogeW91IGNhbiByZWdpc3RlciBhIGB3YXRjaEV4cHJlc3Npb25gIGZ1bmN0aW9uIHdpdGggbm8gYGxpc3RlbmVyYC4gKFNpbmNlIGB3YXRjaEV4cHJlc3Npb25gXHJcbiAgICAgICAqIGNhbiBleGVjdXRlIG11bHRpcGxlIHRpbWVzIHBlciB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGN5Y2xlIHdoZW4gYVxyXG4gICAgICAgKiBjaGFuZ2UgaXMgZGV0ZWN0ZWQsIGJlIHByZXBhcmVkIGZvciBtdWx0aXBsZSBjYWxscyB0byB5b3VyIGxpc3RlbmVyLilcclxuICAgICAgICpcclxuICAgICAgICogQWZ0ZXIgYSB3YXRjaGVyIGlzIHJlZ2lzdGVyZWQgd2l0aCB0aGUgc2NvcGUsIHRoZSBgbGlzdGVuZXJgIGZuIGlzIGNhbGxlZCBhc3luY2hyb25vdXNseVxyXG4gICAgICAgKiAodmlhIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRldmFsQXN5bmMgJGV2YWxBc3luY30pIHRvIGluaXRpYWxpemUgdGhlXHJcbiAgICAgICAqIHdhdGNoZXIuIEluIHJhcmUgY2FzZXMsIHRoaXMgaXMgdW5kZXNpcmFibGUgYmVjYXVzZSB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkIHdoZW4gdGhlIHJlc3VsdFxyXG4gICAgICAgKiBvZiBgd2F0Y2hFeHByZXNzaW9uYCBkaWRuJ3QgY2hhbmdlLiBUbyBkZXRlY3QgdGhpcyBzY2VuYXJpbyB3aXRoaW4gdGhlIGBsaXN0ZW5lcmAgZm4sIHlvdVxyXG4gICAgICAgKiBjYW4gY29tcGFyZSB0aGUgYG5ld1ZhbGAgYW5kIGBvbGRWYWxgLiBJZiB0aGVzZSB0d28gdmFsdWVzIGFyZSBpZGVudGljYWwgKGA9PT1gKSB0aGVuIHRoZVxyXG4gICAgICAgKiBsaXN0ZW5lciB3YXMgY2FsbGVkIGR1ZSB0byBpbml0aWFsaXphdGlvbi5cclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICogIyBFeGFtcGxlXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICAgLy8gbGV0J3MgYXNzdW1lIHRoYXQgc2NvcGUgd2FzIGRlcGVuZGVuY3kgaW5qZWN0ZWQgYXMgdGhlICRyb290U2NvcGVcclxuICAgICAgICAgICB2YXIgc2NvcGUgPSAkcm9vdFNjb3BlO1xyXG4gICAgICAgICAgIHNjb3BlLm5hbWUgPSAnbWlza28nO1xyXG4gICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSAwO1xyXG5cclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgwKTtcclxuICAgICAgICAgICBzY29wZS4kd2F0Y2goJ25hbWUnLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgwKTtcclxuXHJcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgIC8vIHRoZSBsaXN0ZW5lciBpcyBhbHdheXMgY2FsbGVkIGR1cmluZyB0aGUgZmlyc3QgJGRpZ2VzdCBsb29wIGFmdGVyIGl0IHdhcyByZWdpc3RlcmVkXHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XHJcblxyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgxKTtcclxuXHJcbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcclxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMik7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgLy8gVXNpbmcgYSBmdW5jdGlvbiBhcyBhIHdhdGNoRXhwcmVzc2lvblxyXG4gICAgICAgICAgIHZhciBmb29kO1xyXG4gICAgICAgICAgIHNjb3BlLmZvb2RDb3VudGVyID0gMDtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XHJcbiAgICAgICAgICAgc2NvcGUuJHdhdGNoKFxyXG4gICAgICAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSB2YWx1ZSBiZWluZyB3YXRjaGVkLiBJdCBpcyBjYWxsZWQgZm9yIGVhY2ggdHVybiBvZiB0aGUgJGRpZ2VzdCBsb29wXHJcbiAgICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIGZvb2Q7IH0sXHJcbiAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBjaGFuZ2UgbGlzdGVuZXIsIGNhbGxlZCB3aGVuIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBhYm92ZSBmdW5jdGlvbiBjaGFuZ2VzXHJcbiAgICAgICAgICAgICBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgaWYgKCBuZXdWYWx1ZSAhPT0gb2xkVmFsdWUgKSB7XHJcbiAgICAgICAgICAgICAgICAgLy8gT25seSBpbmNyZW1lbnQgdGhlIGNvdW50ZXIgaWYgdGhlIHZhbHVlIGNoYW5nZWRcclxuICAgICAgICAgICAgICAgICBzY29wZS5mb29kQ291bnRlciA9IHNjb3BlLmZvb2RDb3VudGVyICsgMTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICk7XHJcbiAgICAgICAgICAgLy8gTm8gZGlnZXN0IGhhcyBiZWVuIHJ1biBzbyB0aGUgY291bnRlciB3aWxsIGJlIHplcm9cclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XHJcblxyXG4gICAgICAgICAgIC8vIFJ1biB0aGUgZGlnZXN0IGJ1dCBzaW5jZSBmb29kIGhhcyBub3QgY2hhbmdlZCBjb3VudCB3aWxsIHN0aWxsIGJlIHplcm9cclxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmZvb2RDb3VudGVyKS50b0VxdWFsKDApO1xyXG5cclxuICAgICAgICAgICAvLyBVcGRhdGUgZm9vZCBhbmQgcnVuIGRpZ2VzdC4gIE5vdyB0aGUgY291bnRlciB3aWxsIGluY3JlbWVudFxyXG4gICAgICAgICAgIGZvb2QgPSAnY2hlZXNlYnVyZ2VyJztcclxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmZvb2RDb3VudGVyKS50b0VxdWFsKDEpO1xyXG5cclxuICAgICAgICogYGBgXHJcbiAgICAgICAqXHJcbiAgICAgICAqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7KGZ1bmN0aW9uKCl8c3RyaW5nKX0gd2F0Y2hFeHByZXNzaW9uIEV4cHJlc3Npb24gdGhhdCBpcyBldmFsdWF0ZWQgb24gZWFjaFxyXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGN5Y2xlLiBBIGNoYW5nZSBpbiB0aGUgcmV0dXJuIHZhbHVlIHRyaWdnZXJzXHJcbiAgICAgICAqICAgIGEgY2FsbCB0byB0aGUgYGxpc3RlbmVyYC5cclxuICAgICAgICpcclxuICAgICAgICogICAgLSBgc3RyaW5nYDogRXZhbHVhdGVkIGFzIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259XHJcbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGNhbGxlZCB3aXRoIGN1cnJlbnQgYHNjb3BlYCBhcyBhIHBhcmFtZXRlci5cclxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCwgc2NvcGUpfSBsaXN0ZW5lciBDYWxsYmFjayBjYWxsZWQgd2hlbmV2ZXIgdGhlIHZhbHVlXHJcbiAgICAgICAqICAgIG9mIGB3YXRjaEV4cHJlc3Npb25gIGNoYW5nZXMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgIC0gYG5ld1ZhbGAgY29udGFpbnMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gXHJcbiAgICAgICAqICAgIC0gYG9sZFZhbGAgY29udGFpbnMgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uYFxyXG4gICAgICAgKiAgICAtIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlXHJcbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9iamVjdEVxdWFsaXR5IENvbXBhcmUgZm9yIG9iamVjdCBlcXVhbGl0eSB1c2luZyB7QGxpbmsgYW5ndWxhci5lcXVhbHN9IGluc3RlYWQgb2ZcclxuICAgICAgICogICAgIGNvbXBhcmluZyBmb3IgcmVmZXJlbmNlIGVxdWFsaXR5LlxyXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIGxpc3RlbmVyLlxyXG4gICAgICAgKi9cclxuICAgICAgJHdhdGNoOiBmdW5jdGlvbih3YXRjaEV4cCwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KSB7XHJcbiAgICAgICAgdmFyIGdldCA9ICRwYXJzZSh3YXRjaEV4cCk7XHJcblxyXG4gICAgICAgIGlmIChnZXQuJCR3YXRjaERlbGVnYXRlKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ2V0LiQkd2F0Y2hEZWxlZ2F0ZSh0aGlzLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIGdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzY29wZSA9IHRoaXMsXHJcbiAgICAgICAgICAgIGFycmF5ID0gc2NvcGUuJCR3YXRjaGVycyxcclxuICAgICAgICAgICAgd2F0Y2hlciA9IHtcclxuICAgICAgICAgICAgICBmbjogbGlzdGVuZXIsXHJcbiAgICAgICAgICAgICAgbGFzdDogaW5pdFdhdGNoVmFsLFxyXG4gICAgICAgICAgICAgIGdldDogZ2V0LFxyXG4gICAgICAgICAgICAgIGV4cDogd2F0Y2hFeHAsXHJcbiAgICAgICAgICAgICAgZXE6ICEhb2JqZWN0RXF1YWxpdHlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICB3YXRjaGVyLmZuID0gbm9vcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYXJyYXkpIHtcclxuICAgICAgICAgIGFycmF5ID0gc2NvcGUuJCR3YXRjaGVycyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB3ZSB1c2UgdW5zaGlmdCBzaW5jZSB3ZSB1c2UgYSB3aGlsZSBsb29wIGluICRkaWdlc3QgZm9yIHNwZWVkLlxyXG4gICAgICAgIC8vIHRoZSB3aGlsZSBsb29wIHJlYWRzIGluIHJldmVyc2Ugb3JkZXIuXHJcbiAgICAgICAgYXJyYXkudW5zaGlmdCh3YXRjaGVyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaCgpIHtcclxuICAgICAgICAgIGFycmF5UmVtb3ZlKGFycmF5LCB3YXRjaGVyKTtcclxuICAgICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hHcm91cFxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogQSB2YXJpYW50IG9mIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX0gd2hlcmUgaXQgd2F0Y2hlcyBhbiBhcnJheSBvZiBgd2F0Y2hFeHByZXNzaW9uc2AuXHJcbiAgICAgICAqIElmIGFueSBvbmUgZXhwcmVzc2lvbiBpbiB0aGUgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBgbGlzdGVuZXJgIGlzIGV4ZWN1dGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAtIFRoZSBpdGVtcyBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGFyZSBvYnNlcnZlZCB2aWEgc3RhbmRhcmQgJHdhdGNoIG9wZXJhdGlvbiBhbmQgYXJlIGV4YW1pbmVkIG9uIGV2ZXJ5XHJcbiAgICAgICAqICAgY2FsbCB0byAkZGlnZXN0KCkgdG8gc2VlIGlmIGFueSBpdGVtcyBjaGFuZ2VzLlxyXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnkgZXhwcmVzc2lvbiBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGNoYW5nZXMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZ3xGdW5jdGlvbihzY29wZSk+fSB3YXRjaEV4cHJlc3Npb25zIEFycmF5IG9mIGV4cHJlc3Npb25zIHRoYXQgd2lsbCBiZSBpbmRpdmlkdWFsbHlcclxuICAgICAgICogd2F0Y2hlZCB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9XHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3VmFsdWVzLCBvbGRWYWx1ZXMsIHNjb3BlKX0gbGlzdGVuZXIgQ2FsbGJhY2sgY2FsbGVkIHdoZW5ldmVyIHRoZSByZXR1cm4gdmFsdWUgb2YgYW55XHJcbiAgICAgICAqICAgIGV4cHJlc3Npb24gaW4gYHdhdGNoRXhwcmVzc2lvbnNgIGNoYW5nZXNcclxuICAgICAgICogICAgVGhlIGBuZXdWYWx1ZXNgIGFycmF5IGNvbnRhaW5zIHRoZSBjdXJyZW50IHZhbHVlcyBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgLCB3aXRoIHRoZSBpbmRleGVzIG1hdGNoaW5nXHJcbiAgICAgICAqICAgIHRob3NlIG9mIGB3YXRjaEV4cHJlc3Npb25gXHJcbiAgICAgICAqICAgIGFuZCB0aGUgYG9sZFZhbHVlc2AgYXJyYXkgY29udGFpbnMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgLCB3aXRoIHRoZSBpbmRleGVzIG1hdGNoaW5nXHJcbiAgICAgICAqICAgIHRob3NlIG9mIGB3YXRjaEV4cHJlc3Npb25gXHJcbiAgICAgICAqICAgIFRoZSBgc2NvcGVgIHJlZmVycyB0byB0aGUgY3VycmVudCBzY29wZS5cclxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIGFsbCBsaXN0ZW5lcnMuXHJcbiAgICAgICAqL1xyXG4gICAgICAkd2F0Y2hHcm91cDogZnVuY3Rpb24od2F0Y2hFeHByZXNzaW9ucywgbGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgb2xkVmFsdWVzID0gbmV3IEFycmF5KHdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoKTtcclxuICAgICAgICB2YXIgbmV3VmFsdWVzID0gbmV3IEFycmF5KHdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoKTtcclxuICAgICAgICB2YXIgZGVyZWdpc3RlckZucyA9IFtdO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgY2hhbmdlUmVhY3Rpb25TY2hlZHVsZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgZmlyc3RSdW4gPSB0cnVlO1xyXG5cclxuICAgICAgICBpZiAoIXdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAvLyBObyBleHByZXNzaW9ucyBtZWFucyB3ZSBjYWxsIHRoZSBsaXN0ZW5lciBBU0FQXHJcbiAgICAgICAgICB2YXIgc2hvdWxkQ2FsbCA9IHRydWU7XHJcbiAgICAgICAgICBzZWxmLiRldmFsQXN5bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoc2hvdWxkQ2FsbCkgbGlzdGVuZXIobmV3VmFsdWVzLCBuZXdWYWx1ZXMsIHNlbGYpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XHJcbiAgICAgICAgICAgIHNob3VsZENhbGwgPSBmYWxzZTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAod2F0Y2hFeHByZXNzaW9ucy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBzaXplIG9mIG9uZVxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuJHdhdGNoKHdhdGNoRXhwcmVzc2lvbnNbMF0sIGZ1bmN0aW9uIHdhdGNoR3JvdXBBY3Rpb24odmFsdWUsIG9sZFZhbHVlLCBzY29wZSkge1xyXG4gICAgICAgICAgICBuZXdWYWx1ZXNbMF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgb2xkVmFsdWVzWzBdID0gb2xkVmFsdWU7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgKHZhbHVlID09PSBvbGRWYWx1ZSkgPyBuZXdWYWx1ZXMgOiBvbGRWYWx1ZXMsIHNjb3BlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yRWFjaCh3YXRjaEV4cHJlc3Npb25zLCBmdW5jdGlvbiAoZXhwciwgaSkge1xyXG4gICAgICAgICAgdmFyIHVud2F0Y2hGbiA9IHNlbGYuJHdhdGNoKGV4cHIsIGZ1bmN0aW9uIHdhdGNoR3JvdXBTdWJBY3Rpb24odmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIG5ld1ZhbHVlc1tpXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBvbGRWYWx1ZXNbaV0gPSBvbGRWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKCFjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCkge1xyXG4gICAgICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBzZWxmLiRldmFsQXN5bmMod2F0Y2hHcm91cEFjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZGVyZWdpc3RlckZucy5wdXNoKHVud2F0Y2hGbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdhdGNoR3JvdXBBY3Rpb24oKSB7XHJcbiAgICAgICAgICBjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgIGlmIChmaXJzdFJ1bikge1xyXG4gICAgICAgICAgICBmaXJzdFJ1biA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsIG5ld1ZhbHVlcywgc2VsZik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsIG9sZFZhbHVlcywgc2VsZik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XHJcbiAgICAgICAgICB3aGlsZSAoZGVyZWdpc3RlckZucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZGVyZWdpc3RlckZucy5zaGlmdCgpKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaENvbGxlY3Rpb25cclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFNoYWxsb3cgd2F0Y2hlcyB0aGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QgYW5kIGZpcmVzIHdoZW5ldmVyIGFueSBvZiB0aGUgcHJvcGVydGllcyBjaGFuZ2VcclxuICAgICAgICogKGZvciBhcnJheXMsIHRoaXMgaW1wbGllcyB3YXRjaGluZyB0aGUgYXJyYXkgaXRlbXM7IGZvciBvYmplY3QgbWFwcywgdGhpcyBpbXBsaWVzIHdhdGNoaW5nXHJcbiAgICAgICAqIHRoZSBwcm9wZXJ0aWVzKS4gSWYgYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQsIHRoZSBgbGlzdGVuZXJgIGNhbGxiYWNrIGlzIGZpcmVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAtIFRoZSBgb2JqYCBjb2xsZWN0aW9uIGlzIG9ic2VydmVkIHZpYSBzdGFuZGFyZCAkd2F0Y2ggb3BlcmF0aW9uIGFuZCBpcyBleGFtaW5lZCBvbiBldmVyeVxyXG4gICAgICAgKiAgIGNhbGwgdG8gJGRpZ2VzdCgpIHRvIHNlZSBpZiBhbnkgaXRlbXMgaGF2ZSBiZWVuIGFkZGVkLCByZW1vdmVkLCBvciBtb3ZlZC5cclxuICAgICAgICogLSBUaGUgYGxpc3RlbmVyYCBpcyBjYWxsZWQgd2hlbmV2ZXIgYW55dGhpbmcgd2l0aGluIHRoZSBgb2JqYCBoYXMgY2hhbmdlZC4gRXhhbXBsZXMgaW5jbHVkZVxyXG4gICAgICAgKiAgIGFkZGluZywgcmVtb3ZpbmcsIGFuZCBtb3ZpbmcgaXRlbXMgYmVsb25naW5nIHRvIGFuIG9iamVjdCBvciBhcnJheS5cclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICogIyBFeGFtcGxlXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ2lnb3InLCAnbWF0aWFzJywgJ21pc2tvJywgJ2phbWVzJ107XHJcbiAgICAgICAgICAkc2NvcGUuZGF0YUNvdW50ID0gNDtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignbmFtZXMnLCBmdW5jdGlvbihuZXdOYW1lcywgb2xkTmFtZXMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGFDb3VudCA9IG5ld05hbWVzLmxlbmd0aDtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDQpO1xyXG4gICAgICAgICAgJHNjb3BlLiRkaWdlc3QoKTtcclxuXHJcbiAgICAgICAgICAvL3N0aWxsIGF0IDQgLi4uIG5vIGNoYW5nZXNcclxuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDQpO1xyXG5cclxuICAgICAgICAgICRzY29wZS5uYW1lcy5wb3AoKTtcclxuICAgICAgICAgICRzY29wZS4kZGlnZXN0KCk7XHJcblxyXG4gICAgICAgICAgLy9ub3cgdGhlcmUncyBiZWVuIGEgY2hhbmdlXHJcbiAgICAgICAgICBleHBlY3QoJHNjb3BlLmRhdGFDb3VudCkudG9FcXVhbCgzKTtcclxuICAgICAgICogYGBgXHJcbiAgICAgICAqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9uKHNjb3BlKX0gb2JqIEV2YWx1YXRlZCBhcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS4gVGhlXHJcbiAgICAgICAqICAgIGV4cHJlc3Npb24gdmFsdWUgc2hvdWxkIGV2YWx1YXRlIHRvIGFuIG9iamVjdCBvciBhbiBhcnJheSB3aGljaCBpcyBvYnNlcnZlZCBvbiBlYWNoXHJcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEFueSBzaGFsbG93IGNoYW5nZSB3aXRoaW4gdGhlXHJcbiAgICAgICAqICAgIGNvbGxlY3Rpb24gd2lsbCB0cmlnZ2VyIGEgY2FsbCB0byB0aGUgYGxpc3RlbmVyYC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdDb2xsZWN0aW9uLCBvbGRDb2xsZWN0aW9uLCBzY29wZSl9IGxpc3RlbmVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAqICAgIHdoZW4gYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQuXHJcbiAgICAgICAqICAgIC0gVGhlIGBuZXdDb2xsZWN0aW9uYCBvYmplY3QgaXMgdGhlIG5ld2x5IG1vZGlmaWVkIGRhdGEgb2J0YWluZWQgZnJvbSB0aGUgYG9iamAgZXhwcmVzc2lvblxyXG4gICAgICAgKiAgICAtIFRoZSBgb2xkQ29sbGVjdGlvbmAgb2JqZWN0IGlzIGEgY29weSBvZiB0aGUgZm9ybWVyIGNvbGxlY3Rpb24gZGF0YS5cclxuICAgICAgICogICAgICBEdWUgdG8gcGVyZm9ybWFuY2UgY29uc2lkZXJhdGlvbnMsIHRoZWBvbGRDb2xsZWN0aW9uYCB2YWx1ZSBpcyBjb21wdXRlZCBvbmx5IGlmIHRoZVxyXG4gICAgICAgKiAgICAgIGBsaXN0ZW5lcmAgZnVuY3Rpb24gZGVjbGFyZXMgdHdvIG9yIG1vcmUgYXJndW1lbnRzLlxyXG4gICAgICAgKiAgICAtIFRoZSBgc2NvcGVgIGFyZ3VtZW50IHJlZmVycyB0byB0aGUgY3VycmVudCBzY29wZS5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuIFdoZW4gdGhlXHJcbiAgICAgICAqICAgIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBpcyBleGVjdXRlZCwgdGhlIGludGVybmFsIHdhdGNoIG9wZXJhdGlvbiBpcyB0ZXJtaW5hdGVkLlxyXG4gICAgICAgKi9cclxuICAgICAgJHdhdGNoQ29sbGVjdGlvbjogZnVuY3Rpb24ob2JqLCBsaXN0ZW5lcikge1xyXG4gICAgICAgICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvci4kc3RhdGVmdWwgPSB0cnVlO1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy8gdGhlIGN1cnJlbnQgdmFsdWUsIHVwZGF0ZWQgb24gZWFjaCBkaXJ0eS1jaGVjayBydW5cclxuICAgICAgICB2YXIgbmV3VmFsdWU7XHJcbiAgICAgICAgLy8gYSBzaGFsbG93IGNvcHkgb2YgdGhlIG5ld1ZhbHVlIGZyb20gdGhlIGxhc3QgZGlydHktY2hlY2sgcnVuLFxyXG4gICAgICAgIC8vIHVwZGF0ZWQgdG8gbWF0Y2ggbmV3VmFsdWUgZHVyaW5nIGRpcnR5LWNoZWNrIHJ1blxyXG4gICAgICAgIHZhciBvbGRWYWx1ZTtcclxuICAgICAgICAvLyBhIHNoYWxsb3cgY29weSBvZiB0aGUgbmV3VmFsdWUgZnJvbSB3aGVuIHRoZSBsYXN0IGNoYW5nZSBoYXBwZW5lZFxyXG4gICAgICAgIHZhciB2ZXJ5T2xkVmFsdWU7XHJcbiAgICAgICAgLy8gb25seSB0cmFjayB2ZXJ5T2xkVmFsdWUgaWYgdGhlIGxpc3RlbmVyIGlzIGFza2luZyBmb3IgaXRcclxuICAgICAgICB2YXIgdHJhY2tWZXJ5T2xkVmFsdWUgPSAobGlzdGVuZXIubGVuZ3RoID4gMSk7XHJcbiAgICAgICAgdmFyIGNoYW5nZURldGVjdGVkID0gMDtcclxuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0b3IgPSAkcGFyc2Uob2JqLCAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IpO1xyXG4gICAgICAgIHZhciBpbnRlcm5hbEFycmF5ID0gW107XHJcbiAgICAgICAgdmFyIGludGVybmFsT2JqZWN0ID0ge307XHJcbiAgICAgICAgdmFyIGluaXRSdW4gPSB0cnVlO1xyXG4gICAgICAgIHZhciBvbGRMZW5ndGggPSAwO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IoX3ZhbHVlKSB7XHJcbiAgICAgICAgICBuZXdWYWx1ZSA9IF92YWx1ZTtcclxuICAgICAgICAgIHZhciBuZXdMZW5ndGgsIGtleSwgYm90aE5hTiwgbmV3SXRlbSwgb2xkSXRlbTtcclxuXHJcbiAgICAgICAgICBpZiAoIWlzT2JqZWN0KG5ld1ZhbHVlKSkgeyAvLyBpZiBwcmltaXRpdmVcclxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5TGlrZShuZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBpbnRlcm5hbEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBhcnJheSBpbnRvIGFycmF5LlxyXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gaW50ZXJuYWxBcnJheTtcclxuICAgICAgICAgICAgICBvbGRMZW5ndGggPSBvbGRWYWx1ZS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ld0xlbmd0aCA9IG5ld1ZhbHVlLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvbGRMZW5ndGggIT09IG5ld0xlbmd0aCkge1xyXG4gICAgICAgICAgICAgIC8vIGlmIGxlbmd0aHMgZG8gbm90IG1hdGNoIHdlIG5lZWQgdG8gdHJpZ2dlciBjaGFuZ2Ugbm90aWZpY2F0aW9uXHJcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcclxuICAgICAgICAgICAgICBvbGRWYWx1ZS5sZW5ndGggPSBvbGRMZW5ndGggPSBuZXdMZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29weSB0aGUgaXRlbXMgdG8gb2xkVmFsdWUgYW5kIGxvb2sgZm9yIGNoYW5nZXMuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBvbGRJdGVtID0gb2xkVmFsdWVbaV07XHJcbiAgICAgICAgICAgICAgbmV3SXRlbSA9IG5ld1ZhbHVlW2ldO1xyXG5cclxuICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcclxuICAgICAgICAgICAgICBpZiAoIWJvdGhOYU4gJiYgKG9sZEl0ZW0gIT09IG5ld0l0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICAgICAgb2xkVmFsdWVbaV0gPSBuZXdJdGVtO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBpbnRlcm5hbE9iamVjdCkge1xyXG4gICAgICAgICAgICAgIC8vIHdlIGFyZSB0cmFuc2l0aW9uaW5nIGZyb20gc29tZXRoaW5nIHdoaWNoIHdhcyBub3QgYW4gb2JqZWN0IGludG8gb2JqZWN0LlxyXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gaW50ZXJuYWxPYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICBvbGRMZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29weSB0aGUgaXRlbXMgdG8gb2xkVmFsdWUgYW5kIGxvb2sgZm9yIGNoYW5nZXMuXHJcbiAgICAgICAgICAgIG5ld0xlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIG5ld0xlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IG5ld1ZhbHVlW2tleV07XHJcbiAgICAgICAgICAgICAgICBvbGRJdGVtID0gb2xkVmFsdWVba2V5XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGJvdGhOYU4gPSAob2xkSXRlbSAhPT0gb2xkSXRlbSkgJiYgKG5ld0l0ZW0gIT09IG5ld0l0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoIWJvdGhOYU4gJiYgKG9sZEl0ZW0gIT09IG5ld0l0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZVtrZXldID0gbmV3SXRlbTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgb2xkTGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICAgIG9sZFZhbHVlW2tleV0gPSBuZXdJdGVtO1xyXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2xkTGVuZ3RoID4gbmV3TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgdXNlZCB0byBoYXZlIG1vcmUga2V5cywgbmVlZCB0byBmaW5kIHRoZW0gYW5kIGRlc3Ryb3kgdGhlbS5cclxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICAgIGZvcihrZXkgaW4gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghbmV3VmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICBvbGRMZW5ndGgtLTtcclxuICAgICAgICAgICAgICAgICAgZGVsZXRlIG9sZFZhbHVlW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gY2hhbmdlRGV0ZWN0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uQWN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGluaXRSdW4pIHtcclxuICAgICAgICAgICAgaW5pdFJ1biA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZSwgbmV3VmFsdWUsIHNlbGYpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIHZlcnlPbGRWYWx1ZSwgc2VsZik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gbWFrZSBhIGNvcHkgZm9yIHRoZSBuZXh0IHRpbWUgYSBjb2xsZWN0aW9uIGlzIGNoYW5nZWRcclxuICAgICAgICAgIGlmICh0cmFja1ZlcnlPbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWlzT2JqZWN0KG5ld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICAgIC8vcHJpbWl0aXZlXHJcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheUxpa2UobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3IEFycmF5KG5ld1ZhbHVlLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdWYWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlW2ldID0gbmV3VmFsdWVbaV07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBpZiBvYmplY3RcclxuICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWUgPSB7fTtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG5ld1ZhbHVlLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZVtrZXldID0gbmV3VmFsdWVba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLiR3YXRjaChjaGFuZ2VEZXRlY3RvciwgJHdhdGNoQ29sbGVjdGlvbkFjdGlvbik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3RcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFByb2Nlc3NlcyBhbGwgb2YgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyc30gb2YgdGhlIGN1cnJlbnQgc2NvcGUgYW5kXHJcbiAgICAgICAqIGl0cyBjaGlsZHJlbi4gQmVjYXVzZSBhIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyfSdzIGxpc3RlbmVyIGNhbiBjaGFuZ2VcclxuICAgICAgICogdGhlIG1vZGVsLCB0aGUgYCRkaWdlc3QoKWAga2VlcHMgY2FsbGluZyB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNoZXJzfVxyXG4gICAgICAgKiB1bnRpbCBubyBtb3JlIGxpc3RlbmVycyBhcmUgZmlyaW5nLiBUaGlzIG1lYW5zIHRoYXQgaXQgaXMgcG9zc2libGUgdG8gZ2V0IGludG8gYW4gaW5maW5pdGVcclxuICAgICAgICogbG9vcC4gVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGAnTWF4aW11bSBpdGVyYXRpb24gbGltaXQgZXhjZWVkZWQuJ2AgaWYgdGhlIG51bWJlciBvZlxyXG4gICAgICAgKiBpdGVyYXRpb25zIGV4Y2VlZHMgMTAuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFVzdWFsbHksIHlvdSBkb24ndCBjYWxsIGAkZGlnZXN0KClgIGRpcmVjdGx5IGluXHJcbiAgICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDb250cm9sbGVyIGNvbnRyb2xsZXJzfSBvciBpblxyXG4gICAgICAgKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXHJcbiAgICAgICAqIEluc3RlYWQsIHlvdSBzaG91bGQgY2FsbCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHkgJGFwcGx5KCl9ICh0eXBpY2FsbHkgZnJvbSB3aXRoaW5cclxuICAgICAgICogYSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlfSksIHdoaWNoIHdpbGwgZm9yY2UgYSBgJGRpZ2VzdCgpYC5cclxuICAgICAgICpcclxuICAgICAgICogSWYgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQgd2hlbmV2ZXIgYCRkaWdlc3QoKWAgaXMgY2FsbGVkLFxyXG4gICAgICAgKiB5b3UgY2FuIHJlZ2lzdGVyIGEgYHdhdGNoRXhwcmVzc2lvbmAgZnVuY3Rpb24gd2l0aFxyXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9IHdpdGggbm8gYGxpc3RlbmVyYC5cclxuICAgICAgICpcclxuICAgICAgICogSW4gdW5pdCB0ZXN0cywgeW91IG1heSBuZWVkIHRvIGNhbGwgYCRkaWdlc3QoKWAgdG8gc2ltdWxhdGUgdGhlIHNjb3BlIGxpZmUgY3ljbGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqICMgRXhhbXBsZVxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAgIHZhciBzY29wZSA9IC4uLjtcclxuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcclxuICAgICAgICAgICBzY29wZS5jb3VudGVyID0gMDtcclxuXHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XHJcbiAgICAgICAgICAgc2NvcGUuJHdhdGNoKCduYW1lJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICBzY29wZS5jb3VudGVyID0gc2NvcGUuY291bnRlciArIDE7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XHJcblxyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICAvLyB0aGUgbGlzdGVuZXIgaXMgYWx3YXlzIGNhbGxlZCBkdXJpbmcgdGhlIGZpcnN0ICRkaWdlc3QgbG9vcCBhZnRlciBpdCB3YXMgcmVnaXN0ZXJlZFxyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDEpO1xyXG5cclxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgLy8gYnV0IG5vdyBpdCB3aWxsIG5vdCBiZSBjYWxsZWQgdW5sZXNzIHRoZSB2YWx1ZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XHJcblxyXG4gICAgICAgICAgIHNjb3BlLm5hbWUgPSAnYWRhbSc7XHJcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDIpO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICovXHJcbiAgICAgICRkaWdlc3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB3YXRjaCwgdmFsdWUsIGxhc3QsXHJcbiAgICAgICAgICAgIHdhdGNoZXJzLFxyXG4gICAgICAgICAgICBhc3luY1F1ZXVlID0gdGhpcy4kJGFzeW5jUXVldWUsXHJcbiAgICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZSA9IHRoaXMuJCRwb3N0RGlnZXN0UXVldWUsXHJcbiAgICAgICAgICAgIGxlbmd0aCxcclxuICAgICAgICAgICAgZGlydHksIHR0bCA9IFRUTCxcclxuICAgICAgICAgICAgbmV4dCwgY3VycmVudCwgdGFyZ2V0ID0gdGhpcyxcclxuICAgICAgICAgICAgd2F0Y2hMb2cgPSBbXSxcclxuICAgICAgICAgICAgbG9nSWR4LCBsb2dNc2csIGFzeW5jVGFzaztcclxuXHJcbiAgICAgICAgYmVnaW5QaGFzZSgnJGRpZ2VzdCcpO1xyXG4gICAgICAgIC8vIENoZWNrIGZvciBjaGFuZ2VzIHRvIGJyb3dzZXIgdXJsIHRoYXQgaGFwcGVuZWQgaW4gc3luYyBiZWZvcmUgdGhlIGNhbGwgdG8gJGRpZ2VzdFxyXG4gICAgICAgICRicm93c2VyLiQkY2hlY2tVcmxDaGFuZ2UoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMgPT09ICRyb290U2NvcGUgJiYgYXBwbHlBc3luY0lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSByb290IHNjb3BlLCBhbmQgJGFwcGx5QXN5bmMgaGFzIHNjaGVkdWxlZCBhIGRlZmVycmVkICRhcHBseSgpLCB0aGVuXHJcbiAgICAgICAgICAvLyBjYW5jZWwgdGhlIHNjaGVkdWxlZCAkYXBwbHkgYW5kIGZsdXNoIHRoZSBxdWV1ZSBvZiBleHByZXNzaW9ucyB0byBiZSBldmFsdWF0ZWQuXHJcbiAgICAgICAgICAkYnJvd3Nlci5kZWZlci5jYW5jZWwoYXBwbHlBc3luY0lkKTtcclxuICAgICAgICAgIGZsdXNoQXBwbHlBc3luYygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xyXG5cclxuICAgICAgICBkbyB7IC8vIFwid2hpbGUgZGlydHlcIiBsb29wXHJcbiAgICAgICAgICBkaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgY3VycmVudCA9IHRhcmdldDtcclxuXHJcbiAgICAgICAgICB3aGlsZShhc3luY1F1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGFzeW5jVGFzayA9IGFzeW5jUXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICBhc3luY1Rhc2suc2NvcGUuJGV2YWwoYXN5bmNUYXNrLmV4cHJlc3Npb24pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRyYXZlcnNlU2NvcGVzTG9vcDpcclxuICAgICAgICAgIGRvIHsgLy8gXCJ0cmF2ZXJzZSB0aGUgc2NvcGVzXCIgbG9vcFxyXG4gICAgICAgICAgICBpZiAoKHdhdGNoZXJzID0gY3VycmVudC4kJHdhdGNoZXJzKSkge1xyXG4gICAgICAgICAgICAgIC8vIHByb2Nlc3Mgb3VyIHdhdGNoZXNcclxuICAgICAgICAgICAgICBsZW5ndGggPSB3YXRjaGVycy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB3YXRjaCA9IHdhdGNoZXJzW2xlbmd0aF07XHJcbiAgICAgICAgICAgICAgICAgIC8vIE1vc3QgY29tbW9uIHdhdGNoZXMgYXJlIG9uIHByaW1pdGl2ZXMsIGluIHdoaWNoIGNhc2Ugd2UgY2FuIHNob3J0XHJcbiAgICAgICAgICAgICAgICAgIC8vIGNpcmN1aXQgaXQgd2l0aCA9PT0gb3BlcmF0b3IsIG9ubHkgd2hlbiA9PT0gZmFpbHMgZG8gd2UgdXNlIC5lcXVhbHNcclxuICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSA9IHdhdGNoLmdldChjdXJyZW50KSkgIT09IChsYXN0ID0gd2F0Y2gubGFzdCkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgISh3YXRjaC5lcVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBlcXVhbHModmFsdWUsIGxhc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHR5cGVvZiBsYXN0ID09PSAnbnVtYmVyJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgaXNOYU4odmFsdWUpICYmIGlzTmFOKGxhc3QpKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIGxhc3REaXJ0eVdhdGNoID0gd2F0Y2g7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3YXRjaC5sYXN0ID0gd2F0Y2guZXEgPyBjb3B5KHZhbHVlLCBudWxsKSA6IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2F0Y2guZm4odmFsdWUsICgobGFzdCA9PT0gaW5pdFdhdGNoVmFsKSA/IHZhbHVlIDogbGFzdCksIGN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR0bCA8IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nSWR4ID0gNCAtIHR0bDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3YXRjaExvZ1tsb2dJZHhdKSB3YXRjaExvZ1tsb2dJZHhdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ01zZyA9IChpc0Z1bmN0aW9uKHdhdGNoLmV4cCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdmbjogJyArICh3YXRjaC5leHAubmFtZSB8fCB3YXRjaC5leHAudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogd2F0Y2guZXhwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dNc2cgKz0gJzsgbmV3VmFsOiAnICsgdG9Kc29uKHZhbHVlKSArICc7IG9sZFZhbDogJyArIHRvSnNvbihsYXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hMb2dbbG9nSWR4XS5wdXNoKGxvZ01zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3YXRjaCA9PT0gbGFzdERpcnR5V2F0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBtb3N0IHJlY2VudGx5IGRpcnR5IHdhdGNoZXIgaXMgbm93IGNsZWFuLCBzaG9ydCBjaXJjdWl0IHNpbmNlIHRoZSByZW1haW5pbmcgd2F0Y2hlcnNcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgYWxyZWFkeSBiZWVuIHRlc3RlZC5cclxuICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICBicmVhayB0cmF2ZXJzZVNjb3Blc0xvb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSW5zYW5pdHkgV2FybmluZzogc2NvcGUgZGVwdGgtZmlyc3QgdHJhdmVyc2FsXHJcbiAgICAgICAgICAgIC8vIHllcywgdGhpcyBjb2RlIGlzIGEgYml0IGNyYXp5LCBidXQgaXQgd29ya3MgYW5kIHdlIGhhdmUgdGVzdHMgdG8gcHJvdmUgaXQhXHJcbiAgICAgICAgICAgIC8vIHRoaXMgcGllY2Ugc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSB0cmF2ZXJzYWwgaW4gJGJyb2FkY2FzdFxyXG4gICAgICAgICAgICBpZiAoIShuZXh0ID0gKGN1cnJlbnQuJCRjaGlsZEhlYWQgfHxcclxuICAgICAgICAgICAgICAgIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgY3VycmVudC4kJG5leHRTaWJsaW5nKSkpKSB7XHJcbiAgICAgICAgICAgICAgd2hpbGUoY3VycmVudCAhPT0gdGFyZ2V0ICYmICEobmV4dCA9IGN1cnJlbnQuJCRuZXh0U2libGluZykpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IHdoaWxlICgoY3VycmVudCA9IG5leHQpKTtcclxuXHJcbiAgICAgICAgICAvLyBgYnJlYWsgdHJhdmVyc2VTY29wZXNMb29wO2AgdGFrZXMgdXMgdG8gaGVyZVxyXG5cclxuICAgICAgICAgIGlmKChkaXJ0eSB8fCBhc3luY1F1ZXVlLmxlbmd0aCkgJiYgISh0dGwtLSkpIHtcclxuICAgICAgICAgICAgY2xlYXJQaGFzZSgpO1xyXG4gICAgICAgICAgICB0aHJvdyAkcm9vdFNjb3BlTWluRXJyKCdpbmZkaWcnLFxyXG4gICAgICAgICAgICAgICAgJ3swfSAkZGlnZXN0KCkgaXRlcmF0aW9ucyByZWFjaGVkLiBBYm9ydGluZyFcXG4nICtcclxuICAgICAgICAgICAgICAgICdXYXRjaGVycyBmaXJlZCBpbiB0aGUgbGFzdCA1IGl0ZXJhdGlvbnM6IHsxfScsXHJcbiAgICAgICAgICAgICAgICBUVEwsIHRvSnNvbih3YXRjaExvZykpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IHdoaWxlIChkaXJ0eSB8fCBhc3luY1F1ZXVlLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGNsZWFyUGhhc2UoKTtcclxuXHJcbiAgICAgICAgd2hpbGUocG9zdERpZ2VzdFF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcG9zdERpZ2VzdFF1ZXVlLnNoaWZ0KCkoKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgZXZlbnRcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveVxyXG4gICAgICAgKiBAZXZlbnRUeXBlIGJyb2FkY2FzdCBvbiBzY29wZSBiZWluZyBkZXN0cm95ZWRcclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIEJyb2FkY2FzdGVkIHdoZW4gYSBzY29wZSBhbmQgaXRzIGNoaWxkcmVuIGFyZSBiZWluZyBkZXN0cm95ZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIE5vdGUgdGhhdCwgaW4gQW5ndWxhckpTLCB0aGVyZSBpcyBhbHNvIGEgYCRkZXN0cm95YCBqUXVlcnkgZXZlbnQsIHdoaWNoIGNhbiBiZSB1c2VkIHRvXHJcbiAgICAgICAqIGNsZWFuIHVwIERPTSBiaW5kaW5ncyBiZWZvcmUgYW4gZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cclxuICAgICAgICovXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRkZXN0cm95XHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IHNjb3BlIChhbmQgYWxsIG9mIGl0cyBjaGlsZHJlbikgZnJvbSB0aGUgcGFyZW50IHNjb3BlLiBSZW1vdmFsIGltcGxpZXNcclxuICAgICAgICogdGhhdCBjYWxscyB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gd2lsbCBubyBsb25nZXJcclxuICAgICAgICogcHJvcGFnYXRlIHRvIHRoZSBjdXJyZW50IHNjb3BlIGFuZCBpdHMgY2hpbGRyZW4uIFJlbW92YWwgYWxzbyBpbXBsaWVzIHRoYXQgdGhlIGN1cnJlbnRcclxuICAgICAgICogc2NvcGUgaXMgZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbi5cclxuICAgICAgICpcclxuICAgICAgICogVGhlIGAkZGVzdHJveSgpYCBpcyB1c3VhbGx5IHVzZWQgYnkgZGlyZWN0aXZlcyBzdWNoIGFzXHJcbiAgICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9IGZvciBtYW5hZ2luZyB0aGVcclxuICAgICAgICogdW5yb2xsaW5nIG9mIHRoZSBsb29wLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBKdXN0IGJlZm9yZSBhIHNjb3BlIGlzIGRlc3Ryb3llZCwgYSBgJGRlc3Ryb3lgIGV2ZW50IGlzIGJyb2FkY2FzdGVkIG9uIHRoaXMgc2NvcGUuXHJcbiAgICAgICAqIEFwcGxpY2F0aW9uIGNvZGUgY2FuIHJlZ2lzdGVyIGEgYCRkZXN0cm95YCBldmVudCBoYW5kbGVyIHRoYXQgd2lsbCBnaXZlIGl0IGEgY2hhbmNlIHRvXHJcbiAgICAgICAqIHBlcmZvcm0gYW55IG5lY2Vzc2FyeSBjbGVhbnVwLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBOb3RlIHRoYXQsIGluIEFuZ3VsYXJKUywgdGhlcmUgaXMgYWxzbyBhIGAkZGVzdHJveWAgalF1ZXJ5IGV2ZW50LCB3aGljaCBjYW4gYmUgdXNlZCB0b1xyXG4gICAgICAgKiBjbGVhbiB1cCBET00gYmluZGluZ3MgYmVmb3JlIGFuIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00uXHJcbiAgICAgICAqL1xyXG4gICAgICAkZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgZGVzdHJveSB0aGUgcm9vdCBzY29wZSBvciBhIHNjb3BlIHRoYXQgaGFzIGJlZW4gYWxyZWFkeSBkZXN0cm95ZWRcclxuICAgICAgICBpZiAodGhpcy4kJGRlc3Ryb3llZCkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuJGJyb2FkY2FzdCgnJGRlc3Ryb3knKTtcclxuICAgICAgICB0aGlzLiQkZGVzdHJveWVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcyA9PT0gJHJvb3RTY29wZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gdGhpcy4kJGxpc3RlbmVyQ291bnQpIHtcclxuICAgICAgICAgIGRlY3JlbWVudExpc3RlbmVyQ291bnQodGhpcywgdGhpcy4kJGxpc3RlbmVyQ291bnRbZXZlbnROYW1lXSwgZXZlbnROYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNldmVyIGFsbCB0aGUgcmVmZXJlbmNlcyB0byBwYXJlbnQgc2NvcGVzIChhZnRlciB0aGlzIGNsZWFudXAsIHRoZSBjdXJyZW50IHNjb3BlIHNob3VsZFxyXG4gICAgICAgIC8vIG5vdCBiZSByZXRhaW5lZCBieSBhbnkgb2Ygb3VyIHJlZmVyZW5jZXMgYW5kIHNob3VsZCBiZSBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uKVxyXG4gICAgICAgIGlmIChwYXJlbnQuJCRjaGlsZEhlYWQgPT0gdGhpcykgcGFyZW50LiQkY2hpbGRIZWFkID0gdGhpcy4kJG5leHRTaWJsaW5nO1xyXG4gICAgICAgIGlmIChwYXJlbnQuJCRjaGlsZFRhaWwgPT0gdGhpcykgcGFyZW50LiQkY2hpbGRUYWlsID0gdGhpcy4kJHByZXZTaWJsaW5nO1xyXG4gICAgICAgIGlmICh0aGlzLiQkcHJldlNpYmxpbmcpIHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nID0gdGhpcy4kJG5leHRTaWJsaW5nO1xyXG4gICAgICAgIGlmICh0aGlzLiQkbmV4dFNpYmxpbmcpIHRoaXMuJCRuZXh0U2libGluZy4kJHByZXZTaWJsaW5nID0gdGhpcy4kJHByZXZTaWJsaW5nO1xyXG5cclxuXHJcbiAgICAgICAgLy8gQWxsIG9mIHRoZSBjb2RlIGJlbG93IGlzIGJvZ3VzIGNvZGUgdGhhdCB3b3JrcyBhcm91bmQgVjgncyBtZW1vcnkgbGVhayB2aWEgb3B0aW1pemVkIGNvZGVcclxuICAgICAgICAvLyBhbmQgaW5saW5lIGNhY2hlcy5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIHNlZTpcclxuICAgICAgICAvLyAtIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMDczI2MyNlxyXG4gICAgICAgIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvNjc5NCNpc3N1ZWNvbW1lbnQtMzg2NDg5MDlcclxuICAgICAgICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzEzMTMjaXNzdWVjb21tZW50LTEwMzc4NDUxXHJcblxyXG4gICAgICAgIHRoaXMuJHBhcmVudCA9IHRoaXMuJCRuZXh0U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZyA9IHRoaXMuJCRjaGlsZEhlYWQgPVxyXG4gICAgICAgICAgICB0aGlzLiQkY2hpbGRUYWlsID0gdGhpcy4kcm9vdCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIGRvbid0IHJlc2V0IHRoZXNlIHRvIG51bGwgaW4gY2FzZSBzb21lIGFzeW5jIHRhc2sgdHJpZXMgdG8gcmVnaXN0ZXIgYSBsaXN0ZW5lci93YXRjaC90YXNrXHJcbiAgICAgICAgdGhpcy4kJGxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuJCR3YXRjaGVycyA9IHRoaXMuJCRhc3luY1F1ZXVlID0gdGhpcy4kJHBvc3REaWdlc3RRdWV1ZSA9IFtdO1xyXG5cclxuICAgICAgICAvLyBwcmV2ZW50IE5QRXMgc2luY2UgdGhlc2UgbWV0aG9kcyBoYXZlIHJlZmVyZW5jZXMgdG8gcHJvcGVydGllcyB3ZSBudWxsZWQgb3V0XHJcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IHRoaXMuJGRpZ2VzdCA9IHRoaXMuJGFwcGx5ID0gbm9vcDtcclxuICAgICAgICB0aGlzLiRvbiA9IHRoaXMuJHdhdGNoID0gdGhpcy4kd2F0Y2hHcm91cCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9vcDsgfTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGV2YWxcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIEV4ZWN1dGVzIHRoZSBgZXhwcmVzc2lvbmAgb24gdGhlIGN1cnJlbnQgc2NvcGUgYW5kIHJldHVybnMgdGhlIHJlc3VsdC4gQW55IGV4Y2VwdGlvbnMgaW5cclxuICAgICAgICogdGhlIGV4cHJlc3Npb24gYXJlIHByb3BhZ2F0ZWQgKHVuY2F1Z2h0KS4gVGhpcyBpcyB1c2VmdWwgd2hlbiBldmFsdWF0aW5nIEFuZ3VsYXJcclxuICAgICAgICogZXhwcmVzc2lvbnMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqICMgRXhhbXBsZVxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAgIHZhciBzY29wZSA9IG5nLiRyb290U2NvcGUuU2NvcGUoKTtcclxuICAgICAgICAgICBzY29wZS5hID0gMTtcclxuICAgICAgICAgICBzY29wZS5iID0gMjtcclxuXHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLiRldmFsKCdhK2InKSkudG9FcXVhbCgzKTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuJGV2YWwoZnVuY3Rpb24oc2NvcGUpeyByZXR1cm4gc2NvcGUuYSArIHNjb3BlLmI7IH0pKS50b0VxdWFsKDMpO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwcmVzc2lvbiBBbiBhbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IGV4ZWN1dGUgdXNpbmcgdGhlIHJ1bGVzIGFzIGRlZmluZWQgaW4gIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxyXG4gICAgICAgKiAgICAtIGBmdW5jdGlvbihzY29wZSlgOiBleGVjdXRlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0geyhvYmplY3QpPX0gbG9jYWxzIExvY2FsIHZhcmlhYmxlcyBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW4gc2NvcGUuXHJcbiAgICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb24uXHJcbiAgICAgICAqL1xyXG4gICAgICAkZXZhbDogZnVuY3Rpb24oZXhwciwgbG9jYWxzKSB7XHJcbiAgICAgICAgcmV0dXJuICRwYXJzZShleHByKSh0aGlzLCBsb2NhbHMpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZXZhbEFzeW5jXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBFeGVjdXRlcyB0aGUgZXhwcmVzc2lvbiBvbiB0aGUgY3VycmVudCBzY29wZSBhdCBhIGxhdGVyIHBvaW50IGluIHRpbWUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFRoZSBgJGV2YWxBc3luY2AgbWFrZXMgbm8gZ3VhcmFudGVlcyBhcyB0byB3aGVuIHRoZSBgZXhwcmVzc2lvbmAgd2lsbCBiZSBleGVjdXRlZCwgb25seVxyXG4gICAgICAgKiB0aGF0OlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAgIC0gaXQgd2lsbCBleGVjdXRlIGFmdGVyIHRoZSBmdW5jdGlvbiB0aGF0IHNjaGVkdWxlZCB0aGUgZXZhbHVhdGlvbiAocHJlZmVyYWJseSBiZWZvcmUgRE9NXHJcbiAgICAgICAqICAgICByZW5kZXJpbmcpLlxyXG4gICAgICAgKiAgIC0gYXQgbGVhc3Qgb25lIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCBjeWNsZX0gd2lsbCBiZSBwZXJmb3JtZWQgYWZ0ZXJcclxuICAgICAgICogICAgIGBleHByZXNzaW9uYCBleGVjdXRpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEFueSBleGNlcHRpb25zIGZyb20gdGhlIGV4ZWN1dGlvbiBvZiB0aGUgZXhwcmVzc2lvbiBhcmUgZm9yd2FyZGVkIHRvIHRoZVxyXG4gICAgICAgKiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIF9fTm90ZTpfXyBpZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvdXRzaWRlIG9mIGEgYCRkaWdlc3RgIGN5Y2xlLCBhIG5ldyBgJGRpZ2VzdGAgY3ljbGVcclxuICAgICAgICogd2lsbCBiZSBzY2hlZHVsZWQuIEhvd2V2ZXIsIGl0IGlzIGVuY291cmFnZWQgdG8gYWx3YXlzIGNhbGwgY29kZSB0aGF0IGNoYW5nZXMgdGhlIG1vZGVsXHJcbiAgICAgICAqIGZyb20gd2l0aGluIGFuIGAkYXBwbHlgIGNhbGwuIFRoYXQgaW5jbHVkZXMgY29kZSBldmFsdWF0ZWQgdmlhIGAkZXZhbEFzeW5jYC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwcmVzc2lvbiBBbiBhbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IGV4ZWN1dGUgdXNpbmcgdGhlIHJ1bGVzIGFzIGRlZmluZWQgaW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0uXHJcbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGN1cnJlbnQgYHNjb3BlYCBwYXJhbWV0ZXIuXHJcbiAgICAgICAqXHJcbiAgICAgICAqL1xyXG4gICAgICAkZXZhbEFzeW5jOiBmdW5jdGlvbihleHByKSB7XHJcbiAgICAgICAgLy8gaWYgd2UgYXJlIG91dHNpZGUgb2YgYW4gJGRpZ2VzdCBsb29wIGFuZCB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHdlIGFyZSBzY2hlZHVsaW5nIGFzeW5jXHJcbiAgICAgICAgLy8gdGFzayBhbHNvIHNjaGVkdWxlIGFzeW5jIGF1dG8tZmx1c2hcclxuICAgICAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSAmJiAhJHJvb3RTY29wZS4kJGFzeW5jUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCRyb290U2NvcGUuJCRhc3luY1F1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuJCRhc3luY1F1ZXVlLnB1c2goe3Njb3BlOiB0aGlzLCBleHByZXNzaW9uOiBleHByfSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAkJHBvc3REaWdlc3QgOiBmdW5jdGlvbihmbikge1xyXG4gICAgICAgIHRoaXMuJCRwb3N0RGlnZXN0UXVldWUucHVzaChmbik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRhcHBseVxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogYCRhcHBseSgpYCBpcyB1c2VkIHRvIGV4ZWN1dGUgYW4gZXhwcmVzc2lvbiBpbiBhbmd1bGFyIGZyb20gb3V0c2lkZSBvZiB0aGUgYW5ndWxhclxyXG4gICAgICAgKiBmcmFtZXdvcmsuIChGb3IgZXhhbXBsZSBmcm9tIGJyb3dzZXIgRE9NIGV2ZW50cywgc2V0VGltZW91dCwgWEhSIG9yIHRoaXJkIHBhcnR5IGxpYnJhcmllcykuXHJcbiAgICAgICAqIEJlY2F1c2Ugd2UgYXJlIGNhbGxpbmcgaW50byB0aGUgYW5ndWxhciBmcmFtZXdvcmsgd2UgbmVlZCB0byBwZXJmb3JtIHByb3BlciBzY29wZSBsaWZlXHJcbiAgICAgICAqIGN5Y2xlIG9mIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciBleGNlcHRpb24gaGFuZGxpbmd9LFxyXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0IGV4ZWN1dGluZyB3YXRjaGVzfS5cclxuICAgICAgICpcclxuICAgICAgICogIyMgTGlmZSBjeWNsZVxyXG4gICAgICAgKlxyXG4gICAgICAgKiAjIFBzZXVkby1Db2RlIG9mIGAkYXBwbHkoKWBcclxuICAgICAgICogYGBganNcclxuICAgICAgICAgICBmdW5jdGlvbiAkYXBwbHkoZXhwcikge1xyXG4gICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgcmV0dXJuICRldmFsKGV4cHIpO1xyXG4gICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICRyb290LiRkaWdlc3QoKTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICAqIGBgYFxyXG4gICAgICAgKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBTY29wZSdzIGAkYXBwbHkoKWAgbWV0aG9kIHRyYW5zaXRpb25zIHRocm91Z2ggdGhlIGZvbGxvd2luZyBzdGFnZXM6XHJcbiAgICAgICAqXHJcbiAgICAgICAqIDEuIFRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyBleGVjdXRlZCB1c2luZyB0aGVcclxuICAgICAgICogICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWwgJGV2YWwoKX0gbWV0aG9kLlxyXG4gICAgICAgKiAyLiBBbnkgZXhjZXB0aW9ucyBmcm9tIHRoZSBleGVjdXRpb24gb2YgdGhlIGV4cHJlc3Npb24gYXJlIGZvcndhcmRlZCB0byB0aGVcclxuICAgICAgICogICAge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxyXG4gICAgICAgKiAzLiBUaGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNofSBsaXN0ZW5lcnMgYXJlIGZpcmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZVxyXG4gICAgICAgKiAgICBleHByZXNzaW9uIHdhcyBleGVjdXRlZCB1c2luZyB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IG1ldGhvZC5cclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwIEFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICpcclxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cclxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uLlxyXG4gICAgICAgKi9cclxuICAgICAgJGFwcGx5OiBmdW5jdGlvbihleHByKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGJlZ2luUGhhc2UoJyRhcHBseScpO1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuJGV2YWwoZXhwcik7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgIGNsZWFyUGhhc2UoKTtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRhcHBseUFzeW5jXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBTY2hlZHVsZSB0aGUgaW52b2thdGlvbiBvZiAkYXBwbHkgdG8gb2NjdXIgYXQgYSBsYXRlciB0aW1lLiBUaGUgYWN0dWFsIHRpbWUgZGlmZmVyZW5jZVxyXG4gICAgICAgKiB2YXJpZXMgYWNyb3NzIGJyb3dzZXJzLCBidXQgaXMgdHlwaWNhbGx5IGFyb3VuZCB+MTAgbWlsbGlzZWNvbmRzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHVwIG11bHRpcGxlIGV4cHJlc3Npb25zIHdoaWNoIG5lZWQgdG8gYmUgZXZhbHVhdGVkIGluIHRoZSBzYW1lXHJcbiAgICAgICAqIGRpZ2VzdC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwIEFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cclxuICAgICAgICpcclxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cclxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxyXG4gICAgICAgKi9cclxuICAgICAgJGFwcGx5QXN5bmM6IGZ1bmN0aW9uKGV4cHIpIHtcclxuICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xyXG4gICAgICAgIGV4cHIgJiYgJHJvb3RTY29wZS4kJGFwcGx5QXN5bmNRdWV1ZS5wdXNoKCRhcHBseUFzeW5jRXhwcmVzc2lvbik7XHJcbiAgICAgICAgc2NoZWR1bGVBcHBseUFzeW5jKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uICRhcHBseUFzeW5jRXhwcmVzc2lvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiRldmFsKGV4cHIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJG9uXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBMaXN0ZW5zIG9uIGV2ZW50cyBvZiBhIGdpdmVuIHR5cGUuIFNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZW1pdCAkZW1pdH0gZm9yXHJcbiAgICAgICAqIGRpc2N1c3Npb24gb2YgZXZlbnQgbGlmZSBjeWNsZS5cclxuICAgICAgICpcclxuICAgICAgICogVGhlIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIGZvcm1hdCBpczogYGZ1bmN0aW9uKGV2ZW50LCBhcmdzLi4uKWAuIFRoZSBgZXZlbnRgIG9iamVjdFxyXG4gICAgICAgKiBwYXNzZWQgaW50byB0aGUgbGlzdGVuZXIgaGFzIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlczpcclxuICAgICAgICpcclxuICAgICAgICogICAtIGB0YXJnZXRTY29wZWAgLSBge1Njb3BlfWA6IHRoZSBzY29wZSBvbiB3aGljaCB0aGUgZXZlbnQgd2FzIGAkZW1pdGAtZWQgb3JcclxuICAgICAgICogICAgIGAkYnJvYWRjYXN0YC1lZC5cclxuICAgICAgICogICAtIGBjdXJyZW50U2NvcGVgIC0gYHtTY29wZX1gOiB0aGUgc2NvcGUgdGhhdCBpcyBjdXJyZW50bHkgaGFuZGxpbmcgdGhlIGV2ZW50LiBPbmNlIHRoZVxyXG4gICAgICAgKiAgICAgZXZlbnQgcHJvcGFnYXRlcyB0aHJvdWdoIHRoZSBzY29wZSBoaWVyYXJjaHksIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIG51bGwuXHJcbiAgICAgICAqICAgLSBgbmFtZWAgLSBge3N0cmluZ31gOiBuYW1lIG9mIHRoZSBldmVudC5cclxuICAgICAgICogICAtIGBzdG9wUHJvcGFnYXRpb25gIC0gYHtmdW5jdGlvbj19YDogY2FsbGluZyBgc3RvcFByb3BhZ2F0aW9uYCBmdW5jdGlvbiB3aWxsIGNhbmNlbFxyXG4gICAgICAgKiAgICAgZnVydGhlciBldmVudCBwcm9wYWdhdGlvbiAoYXZhaWxhYmxlIG9ubHkgZm9yIGV2ZW50cyB0aGF0IHdlcmUgYCRlbWl0YC1lZCkuXHJcbiAgICAgICAqICAgLSBgcHJldmVudERlZmF1bHRgIC0gYHtmdW5jdGlvbn1gOiBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgc2V0cyBgZGVmYXVsdFByZXZlbnRlZGAgZmxhZ1xyXG4gICAgICAgKiAgICAgdG8gdHJ1ZS5cclxuICAgICAgICogICAtIGBkZWZhdWx0UHJldmVudGVkYCAtIGB7Ym9vbGVhbn1gOiB0cnVlIGlmIGBwcmV2ZW50RGVmYXVsdGAgd2FzIGNhbGxlZC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXZlbnQgbmFtZSB0byBsaXN0ZW4gb24uXHJcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQsIC4uLmFyZ3MpfSBsaXN0ZW5lciBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGlzIGVtaXR0ZWQuXHJcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXHJcbiAgICAgICAqL1xyXG4gICAgICAkb246IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIG5hbWVkTGlzdGVuZXJzID0gdGhpcy4kJGxpc3RlbmVyc1tuYW1lXTtcclxuICAgICAgICBpZiAoIW5hbWVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICB0aGlzLiQkbGlzdGVuZXJzW25hbWVdID0gbmFtZWRMaXN0ZW5lcnMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmFtZWRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcztcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICBpZiAoIWN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdKys7XHJcbiAgICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIG5hbWVkTGlzdGVuZXJzW25hbWVkTGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpXSA9IG51bGw7XHJcbiAgICAgICAgICBkZWNyZW1lbnRMaXN0ZW5lckNvdW50KHNlbGYsIDEsIG5hbWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZW1pdFxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBgbmFtZWAgdXB3YXJkcyB0aHJvdWdoIHRoZSBzY29wZSBoaWVyYXJjaHkgbm90aWZ5aW5nIHRoZVxyXG4gICAgICAgKiByZWdpc3RlcmVkIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0gbGlzdGVuZXJzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgZXZlbnQgbGlmZSBjeWNsZSBzdGFydHMgYXQgdGhlIHNjb3BlIG9uIHdoaWNoIGAkZW1pdGAgd2FzIGNhbGxlZC4gQWxsXHJcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IGxpc3RlbmluZyBmb3IgYG5hbWVgIGV2ZW50IG9uIHRoaXMgc2NvcGUgZ2V0XHJcbiAgICAgICAqIG5vdGlmaWVkLiBBZnRlcndhcmRzLCB0aGUgZXZlbnQgdHJhdmVyc2VzIHVwd2FyZHMgdG93YXJkIHRoZSByb290IHNjb3BlIGFuZCBjYWxscyBhbGxcclxuICAgICAgICogcmVnaXN0ZXJlZCBsaXN0ZW5lcnMgYWxvbmcgdGhlIHdheS4gVGhlIGV2ZW50IHdpbGwgc3RvcCBwcm9wYWdhdGluZyBpZiBvbmUgb2YgdGhlIGxpc3RlbmVyc1xyXG4gICAgICAgKiBjYW5jZWxzIGl0LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBBbnkgZXhjZXB0aW9uIGVtaXR0ZWQgZnJvbSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gd2lsbCBiZSBwYXNzZWRcclxuICAgICAgICogb250byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFdmVudCBuYW1lIHRvIGVtaXQuXHJcbiAgICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyBPcHRpb25hbCBvbmUgb3IgbW9yZSBhcmd1bWVudHMgd2hpY2ggd2lsbCBiZSBwYXNzZWQgb250byB0aGUgZXZlbnQgbGlzdGVuZXJzLlxyXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEV2ZW50IG9iamVjdCAoc2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0pLlxyXG4gICAgICAgKi9cclxuICAgICAgJGVtaXQ6IGZ1bmN0aW9uKG5hbWUsIGFyZ3MpIHtcclxuICAgICAgICB2YXIgZW1wdHkgPSBbXSxcclxuICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnMsXHJcbiAgICAgICAgICAgIHNjb3BlID0gdGhpcyxcclxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgdGFyZ2V0U2NvcGU6IHNjb3BlLFxyXG4gICAgICAgICAgICAgIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7c3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTt9LFxyXG4gICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZGVmYXVsdFByZXZlbnRlZDogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGlzdGVuZXJBcmdzID0gY29uY2F0KFtldmVudF0sIGFyZ3VtZW50cywgMSksXHJcbiAgICAgICAgICAgIGksIGxlbmd0aDtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgbmFtZWRMaXN0ZW5lcnMgPSBzY29wZS4kJGxpc3RlbmVyc1tuYW1lXSB8fCBlbXB0eTtcclxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgZm9yIChpPTAsIGxlbmd0aD1uYW1lZExpc3RlbmVycy5sZW5ndGg7IGk8bGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIGxpc3RlbmVycyB3ZXJlIGRlcmVnaXN0ZXJlZCwgZGVmcmFnbWVudCB0aGUgYXJyYXlcclxuICAgICAgICAgICAgaWYgKCFuYW1lZExpc3RlbmVyc1tpXSkge1xyXG4gICAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgICAgbGVuZ3RoLS07XHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAvL2FsbG93IGFsbCBsaXN0ZW5lcnMgYXR0YWNoZWQgdG8gdGhlIGN1cnJlbnQgc2NvcGUgdG8gcnVuXHJcbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgbGlzdGVuZXJBcmdzKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvL2lmIGFueSBsaXN0ZW5lciBvbiB0aGUgY3VycmVudCBzY29wZSBzdG9wcyBwcm9wYWdhdGlvbiwgcHJldmVudCBidWJibGluZ1xyXG4gICAgICAgICAgaWYgKHN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gZXZlbnQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvL3RyYXZlcnNlIHVwd2FyZHNcclxuICAgICAgICAgIHNjb3BlID0gc2NvcGUuJHBhcmVudDtcclxuICAgICAgICB9IHdoaWxlIChzY29wZSk7XHJcblxyXG4gICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHJldHVybiBldmVudDtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRicm9hZGNhc3RcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYG5hbWVgIGRvd253YXJkcyB0byBhbGwgY2hpbGQgc2NvcGVzIChhbmQgdGhlaXIgY2hpbGRyZW4pIG5vdGlmeWluZyB0aGVcclxuICAgICAgICogcmVnaXN0ZXJlZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259IGxpc3RlbmVycy5cclxuICAgICAgICpcclxuICAgICAgICogVGhlIGV2ZW50IGxpZmUgY3ljbGUgc3RhcnRzIGF0IHRoZSBzY29wZSBvbiB3aGljaCBgJGJyb2FkY2FzdGAgd2FzIGNhbGxlZC4gQWxsXHJcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IGxpc3RlbmluZyBmb3IgYG5hbWVgIGV2ZW50IG9uIHRoaXMgc2NvcGUgZ2V0XHJcbiAgICAgICAqIG5vdGlmaWVkLiBBZnRlcndhcmRzLCB0aGUgZXZlbnQgcHJvcGFnYXRlcyB0byBhbGwgZGlyZWN0IGFuZCBpbmRpcmVjdCBzY29wZXMgb2YgdGhlIGN1cnJlbnRcclxuICAgICAgICogc2NvcGUgYW5kIGNhbGxzIGFsbCByZWdpc3RlcmVkIGxpc3RlbmVycyBhbG9uZyB0aGUgd2F5LiBUaGUgZXZlbnQgY2Fubm90IGJlIGNhbmNlbGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBBbnkgZXhjZXB0aW9uIGVtaXR0ZWQgZnJvbSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gd2lsbCBiZSBwYXNzZWRcclxuICAgICAgICogb250byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFdmVudCBuYW1lIHRvIGJyb2FkY2FzdC5cclxuICAgICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIG9uZSBvciBtb3JlIGFyZ3VtZW50cyB3aGljaCB3aWxsIGJlIHBhc3NlZCBvbnRvIHRoZSBldmVudCBsaXN0ZW5lcnMuXHJcbiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gRXZlbnQgb2JqZWN0LCBzZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufVxyXG4gICAgICAgKi9cclxuICAgICAgJGJyb2FkY2FzdDogZnVuY3Rpb24obmFtZSwgYXJncykge1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLFxyXG4gICAgICAgICAgICBjdXJyZW50ID0gdGFyZ2V0LFxyXG4gICAgICAgICAgICBuZXh0ID0gdGFyZ2V0LFxyXG4gICAgICAgICAgICBldmVudCA9IHtcclxuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgIHRhcmdldFNjb3BlOiB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoIXRhcmdldC4kJGxpc3RlbmVyQ291bnRbbmFtZV0pIHJldHVybiBldmVudDtcclxuXHJcbiAgICAgICAgdmFyIGxpc3RlbmVyQXJncyA9IGNvbmNhdChbZXZlbnRdLCBhcmd1bWVudHMsIDEpLFxyXG4gICAgICAgICAgICBsaXN0ZW5lcnMsIGksIGxlbmd0aDtcclxuXHJcbiAgICAgICAgLy9kb3duIHdoaWxlIHlvdSBjYW4sIHRoZW4gdXAgYW5kIG5leHQgc2libGluZyBvciB1cCBhbmQgbmV4dCBzaWJsaW5nIHVudGlsIGJhY2sgYXQgcm9vdFxyXG4gICAgICAgIHdoaWxlICgoY3VycmVudCA9IG5leHQpKSB7XHJcbiAgICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBjdXJyZW50O1xyXG4gICAgICAgICAgbGlzdGVuZXJzID0gY3VycmVudC4kJGxpc3RlbmVyc1tuYW1lXSB8fCBbXTtcclxuICAgICAgICAgIGZvciAoaT0wLCBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoOyBpPGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIGxpc3RlbmVycyB3ZXJlIGRlcmVnaXN0ZXJlZCwgZGVmcmFnbWVudCB0aGUgYXJyYXlcclxuICAgICAgICAgICAgaWYgKCFsaXN0ZW5lcnNbaV0pIHtcclxuICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICBsZW5ndGgtLTtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgbGlzdGVuZXJBcmdzKTtcclxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBJbnNhbml0eSBXYXJuaW5nOiBzY29wZSBkZXB0aC1maXJzdCB0cmF2ZXJzYWxcclxuICAgICAgICAgIC8vIHllcywgdGhpcyBjb2RlIGlzIGEgYml0IGNyYXp5LCBidXQgaXQgd29ya3MgYW5kIHdlIGhhdmUgdGVzdHMgdG8gcHJvdmUgaXQhXHJcbiAgICAgICAgICAvLyB0aGlzIHBpZWNlIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgdHJhdmVyc2FsIGluICRkaWdlc3RcclxuICAgICAgICAgIC8vICh0aG91Z2ggaXQgZGlmZmVycyBkdWUgdG8gaGF2aW5nIHRoZSBleHRyYSBjaGVjayBmb3IgJCRsaXN0ZW5lckNvdW50KVxyXG4gICAgICAgICAgaWYgKCEobmV4dCA9ICgoY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gJiYgY3VycmVudC4kJGNoaWxkSGVhZCkgfHxcclxuICAgICAgICAgICAgICAoY3VycmVudCAhPT0gdGFyZ2V0ICYmIGN1cnJlbnQuJCRuZXh0U2libGluZykpKSkge1xyXG4gICAgICAgICAgICB3aGlsZShjdXJyZW50ICE9PSB0YXJnZXQgJiYgIShuZXh0ID0gY3VycmVudC4kJG5leHRTaWJsaW5nKSkge1xyXG4gICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciAkcm9vdFNjb3BlID0gbmV3IFNjb3BlKCk7XHJcblxyXG4gICAgcmV0dXJuICRyb290U2NvcGU7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGJlZ2luUGhhc2UocGhhc2UpIHtcclxuICAgICAgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xyXG4gICAgICAgIHRocm93ICRyb290U2NvcGVNaW5FcnIoJ2lucHJvZycsICd7MH0gYWxyZWFkeSBpbiBwcm9ncmVzcycsICRyb290U2NvcGUuJCRwaGFzZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRyb290U2NvcGUuJCRwaGFzZSA9IHBoYXNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsZWFyUGhhc2UoKSB7XHJcbiAgICAgICRyb290U2NvcGUuJCRwaGFzZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGRlY3JlbWVudExpc3RlbmVyQ291bnQoY3VycmVudCwgY291bnQsIG5hbWUpIHtcclxuICAgICAgZG8ge1xyXG4gICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdIC09IGNvdW50O1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gPT09IDApIHtcclxuICAgICAgICAgIGRlbGV0ZSBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gd2hpbGUgKChjdXJyZW50ID0gY3VycmVudC4kcGFyZW50KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB1c2VkIGFzIGFuIGluaXRpYWwgdmFsdWUgZm9yIHdhdGNoZXJzLlxyXG4gICAgICogYmVjYXVzZSBpdCdzIHVuaXF1ZSB3ZSBjYW4gZWFzaWx5IHRlbGwgaXQgYXBhcnQgZnJvbSBvdGhlciB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gaW5pdFdhdGNoVmFsKCkge31cclxuXHJcbiAgICBmdW5jdGlvbiBmbHVzaEFwcGx5QXN5bmMoKSB7XHJcbiAgICAgIHZhciBxdWV1ZSA9ICRyb290U2NvcGUuJCRhcHBseUFzeW5jUXVldWU7XHJcbiAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgcXVldWUuc2hpZnQoKSgpO1xyXG4gICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGFwcGx5QXN5bmNJZCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVBcHBseUFzeW5jKCkge1xyXG4gICAgICBpZiAoYXBwbHlBc3luY0lkID09PSBudWxsKSB7XHJcbiAgICAgICAgYXBwbHlBc3luY0lkID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmbHVzaEFwcGx5QXN5bmMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogUHJpdmF0ZSBzZXJ2aWNlIHRvIHNhbml0aXplIHVyaXMgZm9yIGxpbmtzIGFuZCBpbWFnZXMuIFVzZWQgYnkgJGNvbXBpbGUgYW5kICRzYW5pdGl6ZS5cclxuICovXHJcbmZ1bmN0aW9uICQkU2FuaXRpemVVcmlQcm92aWRlcigpIHtcclxuICB2YXIgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSAvXlxccyooaHR0cHM/fGZ0cHxtYWlsdG98dGVsfGZpbGUpOi8sXHJcbiAgICBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSAvXlxccyooKGh0dHBzP3xmdHB8ZmlsZXxibG9iKTp8ZGF0YTppbWFnZVxcLykvO1xyXG5cclxuICAvKipcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXHJcbiAgICogdXJscyBkdXJpbmcgYVtocmVmXSBzYW5pdGl6YXRpb24uXHJcbiAgICpcclxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxyXG4gICAqXHJcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBhW2hyZWZdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cclxuICAgKiBhbiBhYnNvbHV0ZSB1cmwuIEFmdGVyd2FyZHMsIHRoZSB1cmwgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXHJcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXHJcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxyXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgdGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xyXG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XHJcbiAgICAgIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gcmVnZXhwO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdDtcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIGZvciB3aGl0ZWxpc3Rpbmcgb2Ygc2FmZVxyXG4gICAqIHVybHMgZHVyaW5nIGltZ1tzcmNdIHNhbml0aXphdGlvbi5cclxuICAgKlxyXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnQgWFNTIGF0dGFja3MgdmlhIGh0bWwgbGlua3MuXHJcbiAgICpcclxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGltZ1tzcmNdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cclxuICAgKiBhbiBhYnNvbHV0ZSB1cmwuIEFmdGVyd2FyZHMsIHRoZSB1cmwgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0YFxyXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxyXG4gICAqIHRoZSBhYnNvbHV0ZSB1cmwgaXMgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCBzdHJpbmcgYW5kIG9ubHkgdGhlbiBpcyBpdCB3cml0dGVuIGludG8gdGhlIERPTS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cclxuICAgKiBAcmV0dXJucyB7UmVnRXhwfG5nLiRjb21waWxlUHJvdmlkZXJ9IEN1cnJlbnQgUmVnRXhwIGlmIGNhbGxlZCB3aXRob3V0IHZhbHVlIG9yIHNlbGYgZm9yXHJcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxyXG4gICAqL1xyXG4gIHRoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKHJlZ2V4cCkpIHtcclxuICAgICAgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gcmVnZXhwO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gc2FuaXRpemVVcmkodXJpLCBpc0ltYWdlKSB7XHJcbiAgICAgIHZhciByZWdleCA9IGlzSW1hZ2UgPyBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgOiBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdDtcclxuICAgICAgdmFyIG5vcm1hbGl6ZWRWYWw7XHJcbiAgICAgIC8vIE5PVEU6IHVybFJlc29sdmUoKSBkb2Vzbid0IHN1cHBvcnQgSUUgPCA4IHNvIHdlIGRvbid0IHNhbml0aXplIGZvciB0aGF0IGNhc2UuXHJcbiAgICAgIGlmICghbXNpZSB8fCBtc2llID49IDggKSB7XHJcbiAgICAgICAgbm9ybWFsaXplZFZhbCA9IHVybFJlc29sdmUodXJpKS5ocmVmO1xyXG4gICAgICAgIGlmIChub3JtYWxpemVkVmFsICE9PSAnJyAmJiAhbm9ybWFsaXplZFZhbC5tYXRjaChyZWdleCkpIHtcclxuICAgICAgICAgIHJldHVybiAndW5zYWZlOicrbm9ybWFsaXplZFZhbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHVyaTtcclxuICAgIH07XHJcbiAgfTtcclxufVxyXG5cclxudmFyICRzY2VNaW5FcnIgPSBtaW5FcnIoJyRzY2UnKTtcclxuXHJcbnZhciBTQ0VfQ09OVEVYVFMgPSB7XHJcbiAgSFRNTDogJ2h0bWwnLFxyXG4gIENTUzogJ2NzcycsXHJcbiAgVVJMOiAndXJsJyxcclxuICAvLyBSRVNPVVJDRV9VUkwgaXMgYSBzdWJ0eXBlIG9mIFVSTCB1c2VkIGluIGNvbnRleHRzIHdoZXJlIGEgcHJpdmlsZWdlZCByZXNvdXJjZSBpcyBzb3VyY2VkIGZyb20gYVxyXG4gIC8vIHVybC4gIChlLmcuIG5nLWluY2x1ZGUsIHNjcmlwdCBzcmMsIHRlbXBsYXRlVXJsKVxyXG4gIFJFU09VUkNFX1VSTDogJ3Jlc291cmNlVXJsJyxcclxuICBKUzogJ2pzJ1xyXG59O1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb2xsb3cuXHJcblxyXG4vLyBDb3BpZWQgZnJvbTpcclxuLy8gaHR0cDovL2RvY3MuY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL2dpdC9jbG9zdXJlX2dvb2dfc3RyaW5nX3N0cmluZy5qcy5zb3VyY2UuaHRtbCNsaW5lOTYyXHJcbi8vIFByZXJlcTogcyBpcyBhIHN0cmluZy5cclxuZnVuY3Rpb24gZXNjYXBlRm9yUmVnZXhwKHMpIHtcclxuICByZXR1cm4gcy5yZXBsYWNlKC8oWy0oKVxcW1xcXXt9Kz8qLiRcXF58LDojPCFcXFxcXSkvZywgJ1xcXFwkMScpLlxyXG4gICAgICAgICAgIHJlcGxhY2UoL1xceDA4L2csICdcXFxceDA4Jyk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBhZGp1c3RNYXRjaGVyKG1hdGNoZXIpIHtcclxuICBpZiAobWF0Y2hlciA9PT0gJ3NlbGYnKSB7XHJcbiAgICByZXR1cm4gbWF0Y2hlcjtcclxuICB9IGVsc2UgaWYgKGlzU3RyaW5nKG1hdGNoZXIpKSB7XHJcbiAgICAvLyBTdHJpbmdzIG1hdGNoIGV4YWN0bHkgZXhjZXB0IGZvciAyIHdpbGRjYXJkcyAtICcqJyBhbmQgJyoqJy5cclxuICAgIC8vICcqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgZXhjZXB0IHRob3NlIGZyb20gdGhlIHNldCAnOi8uPyYnLlxyXG4gICAgLy8gJyoqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgKGxpa2UgLiogaW4gYSBSZWdFeHApLlxyXG4gICAgLy8gTW9yZSB0aGFuIDIgKidzIHJhaXNlcyBhbiBlcnJvciBhcyBpdCdzIGlsbCBkZWZpbmVkLlxyXG4gICAgaWYgKG1hdGNoZXIuaW5kZXhPZignKioqJykgPiAtMSkge1xyXG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpd2NhcmQnLFxyXG4gICAgICAgICAgJ0lsbGVnYWwgc2VxdWVuY2UgKioqIGluIHN0cmluZyBtYXRjaGVyLiAgU3RyaW5nOiB7MH0nLCBtYXRjaGVyKTtcclxuICAgIH1cclxuICAgIG1hdGNoZXIgPSBlc2NhcGVGb3JSZWdleHAobWF0Y2hlcikuXHJcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2UoJ1xcXFwqXFxcXConLCAnLionKS5cclxuICAgICAgICAgICAgICAgICAgcmVwbGFjZSgnXFxcXConLCAnW146Ly4/JjtdKicpO1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgbWF0Y2hlciArICckJyk7XHJcbiAgfSBlbHNlIGlmIChpc1JlZ0V4cChtYXRjaGVyKSkge1xyXG4gICAgLy8gVGhlIG9ubHkgb3RoZXIgdHlwZSBvZiBtYXRjaGVyIGFsbG93ZWQgaXMgYSBSZWdleHAuXHJcbiAgICAvLyBNYXRjaCBlbnRpcmUgVVJMIC8gZGlzYWxsb3cgcGFydGlhbCBtYXRjaGVzLlxyXG4gICAgLy8gRmxhZ3MgYXJlIHJlc2V0IChpLmUuIG5vIGdsb2JhbCwgaWdub3JlQ2FzZSBvciBtdWx0aWxpbmUpXHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBtYXRjaGVyLnNvdXJjZSArICckJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93ICRzY2VNaW5FcnIoJ2ltYXRjaGVyJyxcclxuICAgICAgICAnTWF0Y2hlcnMgbWF5IG9ubHkgYmUgXCJzZWxmXCIsIHN0cmluZyBwYXR0ZXJucyBvciBSZWdFeHAgb2JqZWN0cycpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFkanVzdE1hdGNoZXJzKG1hdGNoZXJzKSB7XHJcbiAgdmFyIGFkanVzdGVkTWF0Y2hlcnMgPSBbXTtcclxuICBpZiAoaXNEZWZpbmVkKG1hdGNoZXJzKSkge1xyXG4gICAgZm9yRWFjaChtYXRjaGVycywgZnVuY3Rpb24obWF0Y2hlcikge1xyXG4gICAgICBhZGp1c3RlZE1hdGNoZXJzLnB1c2goYWRqdXN0TWF0Y2hlcihtYXRjaGVyKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgcmV0dXJuIGFkanVzdGVkTWF0Y2hlcnM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHNjZURlbGVnYXRlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBgJHNjZURlbGVnYXRlYCBpcyBhIHNlcnZpY2UgdGhhdCBpcyB1c2VkIGJ5IHRoZSBgJHNjZWAgc2VydmljZSB0byBwcm92aWRlIHtAbGluayBuZy4kc2NlIFN0cmljdFxyXG4gKiBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfSBzZXJ2aWNlcyB0byBBbmd1bGFySlMuXHJcbiAqXHJcbiAqIFR5cGljYWxseSwgeW91IHdvdWxkIGNvbmZpZ3VyZSBvciBvdmVycmlkZSB0aGUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSAkc2NlRGVsZWdhdGV9IGluc3RlYWQgb2ZcclxuICogdGhlIGAkc2NlYCBzZXJ2aWNlIHRvIGN1c3RvbWl6ZSB0aGUgd2F5IFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIHdvcmtzIGluIEFuZ3VsYXJKUy4gIFRoaXMgaXNcclxuICogYmVjYXVzZSwgd2hpbGUgdGhlIGAkc2NlYCBwcm92aWRlcyBudW1lcm91cyBzaG9ydGhhbmQgbWV0aG9kcywgZXRjLiwgeW91IHJlYWxseSBvbmx5IG5lZWQgdG9cclxuICogb3ZlcnJpZGUgMyBjb3JlIGZ1bmN0aW9ucyAoYHRydXN0QXNgLCBgZ2V0VHJ1c3RlZGAgYW5kIGB2YWx1ZU9mYCkgdG8gcmVwbGFjZSB0aGUgd2F5IHRoaW5nc1xyXG4gKiB3b3JrIGJlY2F1c2UgYCRzY2VgIGRlbGVnYXRlcyB0byBgJHNjZURlbGVnYXRlYCBmb3IgdGhlc2Ugb3BlcmF0aW9ucy5cclxuICpcclxuICogUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSB0byBjb25maWd1cmUgdGhpcyBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBUaGUgZGVmYXVsdCBpbnN0YW5jZSBvZiBgJHNjZURlbGVnYXRlYCBzaG91bGQgd29yayBvdXQgb2YgdGhlIGJveCB3aXRoIGxpdHRsZSBwYWluLiAgV2hpbGUgeW91XHJcbiAqIGNhbiBvdmVycmlkZSBpdCBjb21wbGV0ZWx5IHRvIGNoYW5nZSB0aGUgYmVoYXZpb3Igb2YgYCRzY2VgLCB0aGUgY29tbW9uIGNhc2Ugd291bGRcclxuICogaW52b2x2ZSBjb25maWd1cmluZyB0aGUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBpbnN0ZWFkIGJ5IHNldHRpbmdcclxuICogeW91ciBvd24gd2hpdGVsaXN0cyBhbmQgYmxhY2tsaXN0cyBmb3IgdHJ1c3RpbmcgVVJMcyB1c2VkIGZvciBsb2FkaW5nIEFuZ3VsYXJKUyByZXNvdXJjZXMgc3VjaCBhc1xyXG4gKiB0ZW1wbGF0ZXMuICBSZWZlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3RcclxuICogJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxXaGl0ZWxpc3R9IGFuZCB7QGxpbmtcclxuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkc2NlRGVsZWdhdGVQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogVGhlIGAkc2NlRGVsZWdhdGVQcm92aWRlcmAgcHJvdmlkZXIgYWxsb3dzIGRldmVsb3BlcnMgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlXHJcbiAqICRzY2VEZWxlZ2F0ZX0gc2VydmljZS4gIFRoaXMgYWxsb3dzIG9uZSB0byBnZXQvc2V0IHRoZSB3aGl0ZWxpc3RzIGFuZCBibGFja2xpc3RzIHVzZWQgdG8gZW5zdXJlXHJcbiAqIHRoYXQgdGhlIFVSTHMgdXNlZCBmb3Igc291cmNpbmcgQW5ndWxhciB0ZW1wbGF0ZXMgYXJlIHNhZmUuICBSZWZlciB7QGxpbmtcclxuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxXaGl0ZWxpc3R9IGFuZFxyXG4gKiB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XHJcbiAqXHJcbiAqIEZvciB0aGUgZ2VuZXJhbCBkZXRhaWxzIGFib3V0IHRoaXMgc2VydmljZSBpbiBBbmd1bGFyLCByZWFkIHRoZSBtYWluIHBhZ2UgZm9yIHtAbGluayBuZy4kc2NlXHJcbiAqIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cclxuICpcclxuICogKipFeGFtcGxlKio6ICBDb25zaWRlciB0aGUgZm9sbG93aW5nIGNhc2UuIDxhIG5hbWU9XCJleGFtcGxlXCI+PC9hPlxyXG4gKlxyXG4gKiAtIHlvdXIgYXBwIGlzIGhvc3RlZCBhdCB1cmwgYGh0dHA6Ly9teWFwcC5leGFtcGxlLmNvbS9gXHJcbiAqIC0gYnV0IHNvbWUgb2YgeW91ciB0ZW1wbGF0ZXMgYXJlIGhvc3RlZCBvbiBvdGhlciBkb21haW5zIHlvdSBjb250cm9sIHN1Y2ggYXNcclxuICogICBgaHR0cDovL3NydjAxLmFzc2V0cy5leGFtcGxlLmNvbS9gLMKgIGBodHRwOi8vc3J2MDIuYXNzZXRzLmV4YW1wbGUuY29tL2AsIGV0Yy5cclxuICogLSBhbmQgeW91IGhhdmUgYW4gb3BlbiByZWRpcmVjdCBhdCBgaHR0cDovL215YXBwLmV4YW1wbGUuY29tL2NsaWNrVGhydT8uLi5gLlxyXG4gKlxyXG4gKiBIZXJlIGlzIHdoYXQgYSBzZWN1cmUgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBzY2VuYXJpbyBtaWdodCBsb29rIGxpa2U6XHJcbiAqXHJcbiAqIGBgYFxyXG4gKiAgYW5ndWxhci5tb2R1bGUoJ215QXBwJywgW10pLmNvbmZpZyhmdW5jdGlvbigkc2NlRGVsZWdhdGVQcm92aWRlcikge1xyXG4gKiAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdChbXHJcbiAqICAgICAgLy8gQWxsb3cgc2FtZSBvcmlnaW4gcmVzb3VyY2UgbG9hZHMuXHJcbiAqICAgICAgJ3NlbGYnLFxyXG4gKiAgICAgIC8vIEFsbG93IGxvYWRpbmcgZnJvbSBvdXIgYXNzZXRzIGRvbWFpbi4gIE5vdGljZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuICogYW5kICoqLlxyXG4gKiAgICAgICdodHRwOi8vc3J2Ki5hc3NldHMuZXhhbXBsZS5jb20vKionXHJcbiAqICAgIF0pO1xyXG4gKlxyXG4gKiAgICAvLyBUaGUgYmxhY2tsaXN0IG92ZXJyaWRlcyB0aGUgd2hpdGVsaXN0IHNvIHRoZSBvcGVuIHJlZGlyZWN0IGhlcmUgaXMgYmxvY2tlZC5cclxuICogICAgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3QoW1xyXG4gKiAgICAgICdodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vY2xpY2tUaHJ1KionXHJcbiAqICAgIF0pO1xyXG4gKiAgfSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uICRTY2VEZWxlZ2F0ZVByb3ZpZGVyKCkge1xyXG4gIHRoaXMuU0NFX0NPTlRFWFRTID0gU0NFX0NPTlRFWFRTO1xyXG5cclxuICAvLyBSZXNvdXJjZSBVUkxzIGNhbiBhbHNvIGJlIHRydXN0ZWQgYnkgcG9saWN5LlxyXG4gIHZhciByZXNvdXJjZVVybFdoaXRlbGlzdCA9IFsnc2VsZiddLFxyXG4gICAgICByZXNvdXJjZVVybEJsYWNrbGlzdCA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3RcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheT19IHdoaXRlbGlzdCBXaGVuIHByb3ZpZGVkLCByZXBsYWNlcyB0aGUgcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2l0aCB0aGUgdmFsdWVcclxuICAgKiAgICAgcHJvdmlkZWQuICBUaGlzIG11c3QgYmUgYW4gYXJyYXkgb3IgbnVsbC4gIEEgc25hcHNob3Qgb2YgdGhpcyBhcnJheSBpcyB1c2VkIHNvIGZ1cnRoZXJcclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuXHJcbiAgICpcclxuICAgKiAgICAgRm9sbG93IHtAbGluayBuZy4kc2NlI3Jlc291cmNlVXJsUGF0dGVybkl0ZW0gdGhpcyBsaW5rfSBmb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaXRlbXNcclxuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LlxyXG4gICAqXHJcbiAgICogICAgIE5vdGU6ICoqYW4gZW1wdHkgd2hpdGVsaXN0IGFycmF5IHdpbGwgYmxvY2sgYWxsIFVSTHMqKiFcclxuICAgKlxyXG4gICAqIEByZXR1cm4ge0FycmF5fSB0aGUgY3VycmVudGx5IHNldCB3aGl0ZWxpc3QgYXJyYXkuXHJcbiAgICpcclxuICAgKiBUaGUgKipkZWZhdWx0IHZhbHVlKiogd2hlbiBubyB3aGl0ZWxpc3QgaGFzIGJlZW4gZXhwbGljaXRseSBzZXQgaXMgYFsnc2VsZiddYCBhbGxvd2luZyBvbmx5XHJcbiAgICogc2FtZSBvcmlnaW4gcmVzb3VyY2UgcmVxdWVzdHMuXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzL0dldHMgdGhlIHdoaXRlbGlzdCBvZiB0cnVzdGVkIHJlc291cmNlIFVSTHMuXHJcbiAgICovXHJcbiAgdGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgcmVzb3VyY2VVcmxXaGl0ZWxpc3QgPSBhZGp1c3RNYXRjaGVycyh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzb3VyY2VVcmxXaGl0ZWxpc3Q7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0XHJcbiAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXk9fSBibGFja2xpc3QgV2hlbiBwcm92aWRlZCwgcmVwbGFjZXMgdGhlIHJlc291cmNlVXJsQmxhY2tsaXN0IHdpdGggdGhlIHZhbHVlXHJcbiAgICogICAgIHByb3ZpZGVkLiAgVGhpcyBtdXN0IGJlIGFuIGFycmF5IG9yIG51bGwuICBBIHNuYXBzaG90IG9mIHRoaXMgYXJyYXkgaXMgdXNlZCBzbyBmdXJ0aGVyXHJcbiAgICogICAgIGNoYW5nZXMgdG8gdGhlIGFycmF5IGFyZSBpZ25vcmVkLlxyXG4gICAqXHJcbiAgICogICAgIEZvbGxvdyB7QGxpbmsgbmcuJHNjZSNyZXNvdXJjZVVybFBhdHRlcm5JdGVtIHRoaXMgbGlua30gZm9yIGEgZGVzY3JpcHRpb24gb2YgdGhlIGl0ZW1zXHJcbiAgICogICAgIGFsbG93ZWQgaW4gdGhpcyBhcnJheS5cclxuICAgKlxyXG4gICAqICAgICBUaGUgdHlwaWNhbCB1c2FnZSBmb3IgdGhlIGJsYWNrbGlzdCBpcyB0byAqKmJsb2NrXHJcbiAgICogICAgIFtvcGVuIHJlZGlyZWN0c10oaHR0cDovL2N3ZS5taXRyZS5vcmcvZGF0YS9kZWZpbml0aW9ucy82MDEuaHRtbCkqKiBzZXJ2ZWQgYnkgeW91ciBkb21haW4gYXNcclxuICAgKiAgICAgdGhlc2Ugd291bGQgb3RoZXJ3aXNlIGJlIHRydXN0ZWQgYnV0IGFjdHVhbGx5IHJldHVybiBjb250ZW50IGZyb20gdGhlIHJlZGlyZWN0ZWQgZG9tYWluLlxyXG4gICAqXHJcbiAgICogICAgIEZpbmFsbHksICoqdGhlIGJsYWNrbGlzdCBvdmVycmlkZXMgdGhlIHdoaXRlbGlzdCoqIGFuZCBoYXMgdGhlIGZpbmFsIHNheS5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge0FycmF5fSB0aGUgY3VycmVudGx5IHNldCBibGFja2xpc3QgYXJyYXkuXHJcbiAgICpcclxuICAgKiBUaGUgKipkZWZhdWx0IHZhbHVlKiogd2hlbiBubyB3aGl0ZWxpc3QgaGFzIGJlZW4gZXhwbGljaXRseSBzZXQgaXMgdGhlIGVtcHR5IGFycmF5IChpLmUuIHRoZXJlXHJcbiAgICogaXMgbm8gYmxhY2tsaXN0LilcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldHMvR2V0cyB0aGUgYmxhY2tsaXN0IG9mIHRydXN0ZWQgcmVzb3VyY2UgVVJMcy5cclxuICAgKi9cclxuXHJcbiAgdGhpcy5yZXNvdXJjZVVybEJsYWNrbGlzdCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgcmVzb3VyY2VVcmxCbGFja2xpc3QgPSBhZGp1c3RNYXRjaGVycyh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzb3VyY2VVcmxCbGFja2xpc3Q7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcclxuXHJcbiAgICB2YXIgaHRtbFNhbml0aXplciA9IGZ1bmN0aW9uIGh0bWxTYW5pdGl6ZXIoaHRtbCkge1xyXG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCAnQXR0ZW1wdGluZyB0byB1c2UgYW4gdW5zYWZlIHZhbHVlIGluIGEgc2FmZSBjb250ZXh0LicpO1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoJGluamVjdG9yLmhhcygnJHNhbml0aXplJykpIHtcclxuICAgICAgaHRtbFNhbml0aXplciA9ICRpbmplY3Rvci5nZXQoJyRzYW5pdGl6ZScpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBtYXRjaFVybChtYXRjaGVyLCBwYXJzZWRVcmwpIHtcclxuICAgICAgaWYgKG1hdGNoZXIgPT09ICdzZWxmJykge1xyXG4gICAgICAgIHJldHVybiB1cmxJc1NhbWVPcmlnaW4ocGFyc2VkVXJsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBkZWZpbml0ZWx5IGEgcmVnZXguICBTZWUgYWRqdXN0TWF0Y2hlcnMoKVxyXG4gICAgICAgIHJldHVybiAhIW1hdGNoZXIuZXhlYyhwYXJzZWRVcmwuaHJlZik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc1Jlc291cmNlVXJsQWxsb3dlZEJ5UG9saWN5KHVybCkge1xyXG4gICAgICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZSh1cmwudG9TdHJpbmcoKSk7XHJcbiAgICAgIHZhciBpLCBuLCBhbGxvd2VkID0gZmFsc2U7XHJcbiAgICAgIC8vIEVuc3VyZSB0aGF0IGF0IGxlYXN0IG9uZSBpdGVtIGZyb20gdGhlIHdoaXRlbGlzdCBhbGxvd3MgdGhpcyB1cmwuXHJcbiAgICAgIGZvciAoaSA9IDAsIG4gPSByZXNvdXJjZVVybFdoaXRlbGlzdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICBpZiAobWF0Y2hVcmwocmVzb3VyY2VVcmxXaGl0ZWxpc3RbaV0sIHBhcnNlZFVybCkpIHtcclxuICAgICAgICAgIGFsbG93ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChhbGxvd2VkKSB7XHJcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgbm8gaXRlbSBmcm9tIHRoZSBibGFja2xpc3QgYmxvY2tlZCB0aGlzIHVybC5cclxuICAgICAgICBmb3IgKGkgPSAwLCBuID0gcmVzb3VyY2VVcmxCbGFja2xpc3QubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAobWF0Y2hVcmwocmVzb3VyY2VVcmxCbGFja2xpc3RbaV0sIHBhcnNlZFVybCkpIHtcclxuICAgICAgICAgICAgYWxsb3dlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGFsbG93ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVIb2xkZXJUeXBlKEJhc2UpIHtcclxuICAgICAgdmFyIGhvbGRlclR5cGUgPSBmdW5jdGlvbiBUcnVzdGVkVmFsdWVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVzdGVkVmFsdWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICAgICAgaWYgKEJhc2UpIHtcclxuICAgICAgICBob2xkZXJUeXBlLnByb3RvdHlwZSA9IG5ldyBCYXNlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uIHNjZVZhbHVlT2YoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtcclxuICAgICAgfTtcclxuICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiBzY2VUb1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpLnRvU3RyaW5nKCk7XHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBob2xkZXJUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB0cnVzdGVkVmFsdWVIb2xkZXJCYXNlID0gZ2VuZXJhdGVIb2xkZXJUeXBlKCksXHJcbiAgICAgICAgYnlUeXBlID0ge307XHJcblxyXG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5IVE1MXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcclxuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuQ1NTXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcclxuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuVVJMXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcclxuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuSlNdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xyXG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5SRVNPVVJDRV9VUkxdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKGJ5VHlwZVtTQ0VfQ09OVEVYVFMuVVJMXSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjdHJ1c3RBc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBpcyB0cnVzdGVkIGJ5IGFuZ3VsYXIgZm9yIHVzZSBpbiBzcGVjaWZpZWQgc3RyaWN0XHJcbiAgICAgKiBjb250ZXh0dWFsIGVzY2FwaW5nIGNvbnRleHRzIChzdWNoIGFzIG5nLWJpbmQtaHRtbCwgbmctaW5jbHVkZSwgYW55IHNyY1xyXG4gICAgICogYXR0cmlidXRlIGludGVycG9sYXRpb24sIGFueSBkb20gZXZlbnQgYmluZGluZyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvblxyXG4gICAgICogc3VjaCBhcyBmb3Igb25jbGljaywgIGV0Yy4pIHRoYXQgdXNlcyB0aGUgcHJvdmlkZWQgdmFsdWUuXHJcbiAgICAgKiBTZWUge0BsaW5rIG5nLiRzY2UgJHNjZX0gZm9yIGVuYWJsaW5nIHN0cmljdCBjb250ZXh0dWFsIGVzY2FwaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBraW5kIG9mIGNvbnRleHQgaW4gd2hpY2ggdGhpcyB2YWx1ZSBpcyBzYWZlIGZvciB1c2UuICBlLmcuIHVybCxcclxuICAgICAqICAgcmVzb3VyY2VVcmwsIGh0bWwsIGpzIGFuZCBjc3MuXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0aGF0IHRoYXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC9zYWZlLlxyXG4gICAgICogQHJldHVybnMgeyp9IEEgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB0byBzdGFuZCBpbiBmb3IgdGhlIHByb3ZpZGVkIGB2YWx1ZWAgaW4gcGxhY2VzXHJcbiAgICAgKiB3aGVyZSBBbmd1bGFyIGV4cGVjdHMgYSAkc2NlLnRydXN0QXMoKSByZXR1cm4gdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHRydXN0QXModHlwZSwgdHJ1c3RlZFZhbHVlKSB7XHJcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IChieVR5cGUuaGFzT3duUHJvcGVydHkodHlwZSkgPyBieVR5cGVbdHlwZV0gOiBudWxsKTtcclxuICAgICAgaWYgKCFDb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2ljb250ZXh0JyxcclxuICAgICAgICAgICAgJ0F0dGVtcHRlZCB0byB0cnVzdCBhIHZhbHVlIGluIGludmFsaWQgY29udGV4dC4gQ29udGV4dDogezB9OyBWYWx1ZTogezF9JyxcclxuICAgICAgICAgICAgdHlwZSwgdHJ1c3RlZFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHJ1c3RlZFZhbHVlID09PSBudWxsIHx8IHRydXN0ZWRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHRydXN0ZWRWYWx1ZSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gdHJ1c3RlZFZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEFsbCB0aGUgY3VycmVudCBjb250ZXh0cyBpbiBTQ0VfQ09OVEVYVFMgaGFwcGVuIHRvIGJlIHN0cmluZ3MuICBJbiBvcmRlciB0byBhdm9pZCB0cnVzdGluZ1xyXG4gICAgICAvLyBtdXRhYmxlIG9iamVjdHMsIHdlIGVuc3VyZSBoZXJlIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbiBpcyBhY3R1YWxseSBhIHN0cmluZy5cclxuICAgICAgaWYgKHR5cGVvZiB0cnVzdGVkVmFsdWUgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaXR5cGUnLFxyXG4gICAgICAgICAgICAnQXR0ZW1wdGVkIHRvIHRydXN0IGEgbm9uLXN0cmluZyB2YWx1ZSBpbiBhIGNvbnRlbnQgcmVxdWlyaW5nIGEgc3RyaW5nOiBDb250ZXh0OiB7MH0nLFxyXG4gICAgICAgICAgICB0eXBlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRydXN0ZWRWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjdmFsdWVPZlxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogSWYgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgaGFkIGJlZW4gcmV0dXJuZWQgYnkgYSBwcmlvciBjYWxsIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xyXG4gICAgICogYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0sIHJldHVybnMgdGhlIHZhbHVlIHRoYXQgaGFkIGJlZW4gcGFzc2VkIHRvIHtAbGlua1xyXG4gICAgICogbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0uXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgaXMgbm90IGEgdmFsdWUgdGhhdCBoYWQgYmVlbiByZXR1cm5lZCBieSB7QGxpbmtcclxuICAgICAqIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LCByZXR1cm5zIGl0IGFzLWlzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfVxyXG4gICAgICogICAgICBjYWxsIG9yIGFueXRoaW5nIGVsc2UuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIGB2YWx1ZWAgdGhhdCB3YXMgb3JpZ2luYWxseSBwcm92aWRlZCB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcclxuICAgICAqICAgICBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBpZiBgdmFsdWVgIGlzIHRoZSByZXN1bHQgb2Ygc3VjaCBhIGNhbGwuICBPdGhlcndpc2UsIHJldHVybnNcclxuICAgICAqICAgICBgdmFsdWVgIHVuY2hhbmdlZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdmFsdWVPZihtYXliZVRydXN0ZWQpIHtcclxuICAgICAgaWYgKG1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpIHtcclxuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZURlbGVnYXRlI2dldFRydXN0ZWRcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFRha2VzIHRoZSByZXN1bHQgb2YgYSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gY2FsbCBhbmRcclxuICAgICAqIHJldHVybnMgdGhlIG9yaWdpbmFsbHkgc3VwcGxpZWQgdmFsdWUgaWYgdGhlIHF1ZXJpZWQgY29udGV4dCB0eXBlIGlzIGEgc3VwZXJ0eXBlIG9mIHRoZVxyXG4gICAgICogY3JlYXRlZCB0eXBlLiAgSWYgdGhpcyBjb25kaXRpb24gaXNuJ3Qgc2F0aXNmaWVkLCB0aHJvd3MgYW4gZXhjZXB0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBraW5kIG9mIGNvbnRleHQgaW4gd2hpY2ggdGhpcyB2YWx1ZSBpcyB0byBiZSB1c2VkLlxyXG4gICAgICogQHBhcmFtIHsqfSBtYXliZVRydXN0ZWQgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xyXG4gICAgICogICAgIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9IGNhbGwuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIHRoZSB3YXMgb3JpZ2luYWxseSBwcm92aWRlZCB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcclxuICAgICAqICAgICBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBpZiB2YWxpZCBpbiB0aGlzIGNvbnRleHQuICBPdGhlcndpc2UsIHRocm93cyBhbiBleGNlcHRpb24uXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldFRydXN0ZWQodHlwZSwgbWF5YmVUcnVzdGVkKSB7XHJcbiAgICAgIGlmIChtYXliZVRydXN0ZWQgPT09IG51bGwgfHwgbWF5YmVUcnVzdGVkID09PSB1bmRlZmluZWQgfHwgbWF5YmVUcnVzdGVkID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQ7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGNvbnN0cnVjdG9yID0gKGJ5VHlwZS5oYXNPd25Qcm9wZXJ0eSh0eXBlKSA/IGJ5VHlwZVt0eXBlXSA6IG51bGwpO1xyXG4gICAgICBpZiAoY29uc3RydWN0b3IgJiYgbWF5YmVUcnVzdGVkIGluc3RhbmNlb2YgY29uc3RydWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUsIHRoZW4gd2UgbWF5IG9ubHkgdGFrZSBvbmUgb2YgdHdvIGFjdGlvbnMuXHJcbiAgICAgIC8vIDEuIHNhbml0aXplIHRoZSB2YWx1ZSBmb3IgdGhlIHJlcXVlc3RlZCB0eXBlLCBvclxyXG4gICAgICAvLyAyLiB0aHJvdyBhbiBleGNlcHRpb24uXHJcbiAgICAgIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuUkVTT1VSQ0VfVVJMKSB7XHJcbiAgICAgICAgaWYgKGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kobWF5YmVUcnVzdGVkKSkge1xyXG4gICAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaW5zZWN1cmwnLFxyXG4gICAgICAgICAgICAgICdCbG9ja2VkIGxvYWRpbmcgcmVzb3VyY2UgZnJvbSB1cmwgbm90IGFsbG93ZWQgYnkgJHNjZURlbGVnYXRlIHBvbGljeS4gIFVSTDogezB9JyxcclxuICAgICAgICAgICAgICBtYXliZVRydXN0ZWQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFNDRV9DT05URVhUUy5IVE1MKSB7XHJcbiAgICAgICAgcmV0dXJuIGh0bWxTYW5pdGl6ZXIobWF5YmVUcnVzdGVkKTtcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCAnQXR0ZW1wdGluZyB0byB1c2UgYW4gdW5zYWZlIHZhbHVlIGluIGEgc2FmZSBjb250ZXh0LicpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHRydXN0QXM6IHRydXN0QXMsXHJcbiAgICAgICAgICAgICBnZXRUcnVzdGVkOiBnZXRUcnVzdGVkLFxyXG4gICAgICAgICAgICAgdmFsdWVPZjogdmFsdWVPZiB9O1xyXG4gIH1dO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkc2NlUHJvdmlkZXJcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFRoZSAkc2NlUHJvdmlkZXIgcHJvdmlkZXIgYWxsb3dzIGRldmVsb3BlcnMgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBzZXJ2aWNlLlxyXG4gKiAtICAgZW5hYmxlL2Rpc2FibGUgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSkgaW4gYSBtb2R1bGVcclxuICogLSAgIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHdpdGggYSBjdXN0b20gZGVsZWdhdGVcclxuICpcclxuICogUmVhZCBtb3JlIGFib3V0IHtAbGluayBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cclxuICovXHJcblxyXG4vKiBqc2hpbnQgbWF4bGVuOiBmYWxzZSovXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHNjZVxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogYCRzY2VgIGlzIGEgc2VydmljZSB0aGF0IHByb3ZpZGVzIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIHNlcnZpY2VzIHRvIEFuZ3VsYXJKUy5cclxuICpcclxuICogIyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZ1xyXG4gKlxyXG4gKiBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKSBpcyBhIG1vZGUgaW4gd2hpY2ggQW5ndWxhckpTIHJlcXVpcmVzIGJpbmRpbmdzIGluIGNlcnRhaW5cclxuICogY29udGV4dHMgdG8gcmVzdWx0IGluIGEgdmFsdWUgdGhhdCBpcyBtYXJrZWQgYXMgc2FmZSB0byB1c2UgZm9yIHRoYXQgY29udGV4dC4gIE9uZSBleGFtcGxlIG9mXHJcbiAqIHN1Y2ggYSBjb250ZXh0IGlzIGJpbmRpbmcgYXJiaXRyYXJ5IGh0bWwgY29udHJvbGxlZCBieSB0aGUgdXNlciB2aWEgYG5nLWJpbmQtaHRtbGAuICBXZSByZWZlclxyXG4gKiB0byB0aGVzZSBjb250ZXh0cyBhcyBwcml2aWxlZ2VkIG9yIFNDRSBjb250ZXh0cy5cclxuICpcclxuICogQXMgb2YgdmVyc2lvbiAxLjIsIEFuZ3VsYXIgc2hpcHMgd2l0aCBTQ0UgZW5hYmxlZCBieSBkZWZhdWx0LlxyXG4gKlxyXG4gKiBOb3RlOiAgV2hlbiBlbmFibGVkICh0aGUgZGVmYXVsdCksIElFOCBpbiBxdWlya3MgbW9kZSBpcyBub3Qgc3VwcG9ydGVkLiAgSW4gdGhpcyBtb2RlLCBJRTggYWxsb3dzXHJcbiAqIG9uZSB0byBleGVjdXRlIGFyYml0cmFyeSBqYXZhc2NyaXB0IGJ5IHRoZSB1c2Ugb2YgdGhlIGV4cHJlc3Npb24oKSBzeW50YXguICBSZWZlclxyXG4gKiA8aHR0cDovL2Jsb2dzLm1zZG4uY29tL2IvaWUvYXJjaGl2ZS8yMDA4LzEwLzE2L2VuZGluZy1leHByZXNzaW9ucy5hc3B4PiB0byBsZWFybiBtb3JlIGFib3V0IHRoZW0uXHJcbiAqIFlvdSBjYW4gZW5zdXJlIHlvdXIgZG9jdW1lbnQgaXMgaW4gc3RhbmRhcmRzIG1vZGUgYW5kIG5vdCBxdWlya3MgbW9kZSBieSBhZGRpbmcgYDwhZG9jdHlwZSBodG1sPmBcclxuICogdG8gdGhlIHRvcCBvZiB5b3VyIEhUTUwgZG9jdW1lbnQuXHJcbiAqXHJcbiAqIFNDRSBhc3Npc3RzIGluIHdyaXRpbmcgY29kZSBpbiB3YXkgdGhhdCAoYSkgaXMgc2VjdXJlIGJ5IGRlZmF1bHQgYW5kIChiKSBtYWtlcyBhdWRpdGluZyBmb3JcclxuICogc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzIHN1Y2ggYXMgWFNTLCBjbGlja2phY2tpbmcsIGV0Yy4gYSBsb3QgZWFzaWVyLlxyXG4gKlxyXG4gKiBIZXJlJ3MgYW4gZXhhbXBsZSBvZiBhIGJpbmRpbmcgaW4gYSBwcml2aWxlZ2VkIGNvbnRleHQ6XHJcbiAqXHJcbiAqIGBgYFxyXG4gKiA8aW5wdXQgbmctbW9kZWw9XCJ1c2VySHRtbFwiPlxyXG4gKiA8ZGl2IG5nLWJpbmQtaHRtbD1cInVzZXJIdG1sXCI+PC9kaXY+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBOb3RpY2UgdGhhdCBgbmctYmluZC1odG1sYCBpcyBib3VuZCB0byBgdXNlckh0bWxgIGNvbnRyb2xsZWQgYnkgdGhlIHVzZXIuICBXaXRoIFNDRVxyXG4gKiBkaXNhYmxlZCwgdGhpcyBhcHBsaWNhdGlvbiBhbGxvd3MgdGhlIHVzZXIgdG8gcmVuZGVyIGFyYml0cmFyeSBIVE1MIGludG8gdGhlIERJVi5cclxuICogSW4gYSBtb3JlIHJlYWxpc3RpYyBleGFtcGxlLCBvbmUgbWF5IGJlIHJlbmRlcmluZyB1c2VyIGNvbW1lbnRzLCBibG9nIGFydGljbGVzLCBldGMuIHZpYVxyXG4gKiBiaW5kaW5ncy4gIChIVE1MIGlzIGp1c3Qgb25lIGV4YW1wbGUgb2YgYSBjb250ZXh0IHdoZXJlIHJlbmRlcmluZyB1c2VyIGNvbnRyb2xsZWQgaW5wdXQgY3JlYXRlc1xyXG4gKiBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMuKVxyXG4gKlxyXG4gKiBGb3IgdGhlIGNhc2Ugb2YgSFRNTCwgeW91IG1pZ2h0IHVzZSBhIGxpYnJhcnksIGVpdGhlciBvbiB0aGUgY2xpZW50IHNpZGUsIG9yIG9uIHRoZSBzZXJ2ZXIgc2lkZSxcclxuICogdG8gc2FuaXRpemUgdW5zYWZlIEhUTUwgYmVmb3JlIGJpbmRpbmcgdG8gdGhlIHZhbHVlIGFuZCByZW5kZXJpbmcgaXQgaW4gdGhlIGRvY3VtZW50LlxyXG4gKlxyXG4gKiBIb3cgd291bGQgeW91IGVuc3VyZSB0aGF0IGV2ZXJ5IHBsYWNlIHRoYXQgdXNlZCB0aGVzZSB0eXBlcyBvZiBiaW5kaW5ncyB3YXMgYm91bmQgdG8gYSB2YWx1ZSB0aGF0XHJcbiAqIHdhcyBzYW5pdGl6ZWQgYnkgeW91ciBsaWJyYXJ5IChvciByZXR1cm5lZCBhcyBzYWZlIGZvciByZW5kZXJpbmcgYnkgeW91ciBzZXJ2ZXI/KSAgSG93IGNhbiB5b3VcclxuICogZW5zdXJlIHRoYXQgeW91IGRpZG4ndCBhY2NpZGVudGFsbHkgZGVsZXRlIHRoZSBsaW5lIHRoYXQgc2FuaXRpemVkIHRoZSB2YWx1ZSwgb3IgcmVuYW1lZCBzb21lXHJcbiAqIHByb3BlcnRpZXMvZmllbGRzIGFuZCBmb3Jnb3QgdG8gdXBkYXRlIHRoZSBiaW5kaW5nIHRvIHRoZSBzYW5pdGl6ZWQgdmFsdWU/XHJcbiAqXHJcbiAqIFRvIGJlIHNlY3VyZSBieSBkZWZhdWx0LCB5b3Ugd2FudCB0byBlbnN1cmUgdGhhdCBhbnkgc3VjaCBiaW5kaW5ncyBhcmUgZGlzYWxsb3dlZCB1bmxlc3MgeW91IGNhblxyXG4gKiBkZXRlcm1pbmUgdGhhdCBzb21ldGhpbmcgZXhwbGljaXRseSBzYXlzIGl0J3Mgc2FmZSB0byB1c2UgYSB2YWx1ZSBmb3IgYmluZGluZyBpbiB0aGF0XHJcbiAqIGNvbnRleHQuICBZb3UgY2FuIHRoZW4gYXVkaXQgeW91ciBjb2RlIChhIHNpbXBsZSBncmVwIHdvdWxkIGRvKSB0byBlbnN1cmUgdGhhdCB0aGlzIGlzIG9ubHkgZG9uZVxyXG4gKiBmb3IgdGhvc2UgdmFsdWVzIHRoYXQgeW91IGNhbiBlYXNpbHkgdGVsbCBhcmUgc2FmZSAtIGJlY2F1c2UgdGhleSB3ZXJlIHJlY2VpdmVkIGZyb20geW91ciBzZXJ2ZXIsXHJcbiAqIHNhbml0aXplZCBieSB5b3VyIGxpYnJhcnksIGV0Yy4gIFlvdSBjYW4gb3JnYW5pemUgeW91ciBjb2RlYmFzZSB0byBoZWxwIHdpdGggdGhpcyAtIHBlcmhhcHNcclxuICogYWxsb3dpbmcgb25seSB0aGUgZmlsZXMgaW4gYSBzcGVjaWZpYyBkaXJlY3RvcnkgdG8gZG8gdGhpcy4gIEVuc3VyaW5nIHRoYXQgdGhlIGludGVybmFsIEFQSVxyXG4gKiBleHBvc2VkIGJ5IHRoYXQgY29kZSBkb2Vzbid0IG1hcmt1cCBhcmJpdHJhcnkgdmFsdWVzIGFzIHNhZmUgdGhlbiBiZWNvbWVzIGEgbW9yZSBtYW5hZ2VhYmxlIHRhc2suXHJcbiAqXHJcbiAqIEluIHRoZSBjYXNlIG9mIEFuZ3VsYXJKUycgU0NFIHNlcnZpY2UsIG9uZSB1c2VzIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfVxyXG4gKiAoYW5kIHNob3J0aGFuZCBtZXRob2RzIHN1Y2ggYXMge0BsaW5rIG5nLiRzY2UjdHJ1c3RBc0h0bWwgJHNjZS50cnVzdEFzSHRtbH0sIGV0Yy4pIHRvXHJcbiAqIG9idGFpbiB2YWx1ZXMgdGhhdCB3aWxsIGJlIGFjY2VwdGVkIGJ5IFNDRSAvIHByaXZpbGVnZWQgY29udGV4dHMuXHJcbiAqXHJcbiAqXHJcbiAqICMjIEhvdyBkb2VzIGl0IHdvcms/XHJcbiAqXHJcbiAqIEluIHByaXZpbGVnZWQgY29udGV4dHMsIGRpcmVjdGl2ZXMgYW5kIGNvZGUgd2lsbCBiaW5kIHRvIHRoZSByZXN1bHQgb2Yge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFxyXG4gKiAkc2NlLmdldFRydXN0ZWQoY29udGV4dCwgdmFsdWUpfSByYXRoZXIgdGhhbiB0byB0aGUgdmFsdWUgZGlyZWN0bHkuICBEaXJlY3RpdmVzIHVzZSB7QGxpbmtcclxuICogbmcuJHNjZSNwYXJzZSAkc2NlLnBhcnNlQXN9IHJhdGhlciB0aGFuIGAkcGFyc2VgIHRvIHdhdGNoIGF0dHJpYnV0ZSBiaW5kaW5ncywgd2hpY2ggcGVyZm9ybXMgdGhlXHJcbiAqIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkfSBiZWhpbmQgdGhlIHNjZW5lcyBvbiBub24tY29uc3RhbnQgbGl0ZXJhbHMuXHJcbiAqXHJcbiAqIEFzIGFuIGV4YW1wbGUsIHtAbGluayBuZy5kaXJlY3RpdmU6bmdCaW5kSHRtbCBuZ0JpbmRIdG1sfSB1c2VzIHtAbGlua1xyXG4gKiBuZy4kc2NlI3BhcnNlQXNIdG1sICRzY2UucGFyc2VBc0h0bWwoYmluZGluZyBleHByZXNzaW9uKX0uICBIZXJlJ3MgdGhlIGFjdHVhbCBjb2RlIChzbGlnaHRseVxyXG4gKiBzaW1wbGlmaWVkKTpcclxuICpcclxuICogYGBgXHJcbiAqIHZhciBuZ0JpbmRIdG1sRGlyZWN0aXZlID0gWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xyXG4gKiAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gKiAgICAgc2NvcGUuJHdhdGNoKCRzY2UucGFyc2VBc0h0bWwoYXR0ci5uZ0JpbmRIdG1sKSwgZnVuY3Rpb24odmFsdWUpIHtcclxuICogICAgICAgZWxlbWVudC5odG1sKHZhbHVlIHx8ICcnKTtcclxuICogICAgIH0pO1xyXG4gKiAgIH07XHJcbiAqIH1dO1xyXG4gKiBgYGBcclxuICpcclxuICogIyMgSW1wYWN0IG9uIGxvYWRpbmcgdGVtcGxhdGVzXHJcbiAqXHJcbiAqIFRoaXMgYXBwbGllcyBib3RoIHRvIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmctaW5jbHVkZWB9IGRpcmVjdGl2ZSBhcyB3ZWxsIGFzXHJcbiAqIGB0ZW1wbGF0ZVVybGAncyBzcGVjaWZpZWQgYnkge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS5cclxuICpcclxuICogQnkgZGVmYXVsdCwgQW5ndWxhciBvbmx5IGxvYWRzIHRlbXBsYXRlcyBmcm9tIHRoZSBzYW1lIGRvbWFpbiBhbmQgcHJvdG9jb2wgYXMgdGhlIGFwcGxpY2F0aW9uXHJcbiAqIGRvY3VtZW50LiAgVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXHJcbiAqICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsfSBvbiB0aGUgdGVtcGxhdGUgVVJMLiAgVG8gbG9hZCB0ZW1wbGF0ZXMgZnJvbSBvdGhlciBkb21haW5zIGFuZC9vclxyXG4gKiBwcm90b2NvbHMsIHlvdSBtYXkgZWl0aGVyIGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0XHJcbiAqIHRoZW19IG9yIHtAbGluayBuZy4kc2NlI3RydXN0QXNSZXNvdXJjZVVybCB3cmFwIGl0fSBpbnRvIGEgdHJ1c3RlZCB2YWx1ZS5cclxuICpcclxuICogKlBsZWFzZSBub3RlKjpcclxuICogVGhlIGJyb3dzZXInc1xyXG4gKiBbU2FtZSBPcmlnaW4gUG9saWN5XShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Jyb3dzZXJzZWMvd2lraS9QYXJ0MiNTYW1lLW9yaWdpbl9wb2xpY3lfZm9yX1hNTEh0dHBSZXF1ZXN0KVxyXG4gKiBhbmQgW0Nyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nIChDT1JTKV0oaHR0cDovL3d3dy53My5vcmcvVFIvY29ycy8pXHJcbiAqIHBvbGljeSBhcHBseSBpbiBhZGRpdGlvbiB0byB0aGlzIGFuZCBtYXkgZnVydGhlciByZXN0cmljdCB3aGV0aGVyIHRoZSB0ZW1wbGF0ZSBpcyBzdWNjZXNzZnVsbHlcclxuICogbG9hZGVkLiAgVGhpcyBtZWFucyB0aGF0IHdpdGhvdXQgdGhlIHJpZ2h0IENPUlMgcG9saWN5LCBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIGEgZGlmZmVyZW50IGRvbWFpblxyXG4gKiB3b24ndCB3b3JrIG9uIGFsbCBicm93c2Vycy4gIEFsc28sIGxvYWRpbmcgdGVtcGxhdGVzIGZyb20gYGZpbGU6Ly9gIFVSTCBkb2VzIG5vdCB3b3JrIG9uIHNvbWVcclxuICogYnJvd3NlcnMuXHJcbiAqXHJcbiAqICMjIFRoaXMgZmVlbHMgbGlrZSB0b28gbXVjaCBvdmVyaGVhZFxyXG4gKlxyXG4gKiBJdCdzIGltcG9ydGFudCB0byByZW1lbWJlciB0aGF0IFNDRSBvbmx5IGFwcGxpZXMgdG8gaW50ZXJwb2xhdGlvbiBleHByZXNzaW9ucy5cclxuICpcclxuICogSWYgeW91ciBleHByZXNzaW9ucyBhcmUgY29uc3RhbnQgbGl0ZXJhbHMsIHRoZXkncmUgYXV0b21hdGljYWxseSB0cnVzdGVkIGFuZCB5b3UgZG9uJ3QgbmVlZCB0b1xyXG4gKiBjYWxsIGAkc2NlLnRydXN0QXNgIG9uIHRoZW0gKHJlbWVtYmVyIHRvIGluY2x1ZGUgdGhlIGBuZ1Nhbml0aXplYCBtb2R1bGUpIChlLmcuXHJcbiAqIGA8ZGl2IG5nLWJpbmQtaHRtbD1cIic8Yj5pbXBsaWNpdGx5IHRydXN0ZWQ8L2I+J1wiPjwvZGl2PmApIGp1c3Qgd29ya3MuXHJcbiAqXHJcbiAqIEFkZGl0aW9uYWxseSwgYGFbaHJlZl1gIGFuZCBgaW1nW3NyY11gIGF1dG9tYXRpY2FsbHkgc2FuaXRpemUgdGhlaXIgVVJMcyBhbmQgZG8gbm90IHBhc3MgdGhlbVxyXG4gKiB0aHJvdWdoIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkfS4gIFNDRSBkb2Vzbid0IHBsYXkgYSByb2xlIGhlcmUuXHJcbiAqXHJcbiAqIFRoZSBpbmNsdWRlZCB7QGxpbmsgbmcuJHNjZURlbGVnYXRlICRzY2VEZWxlZ2F0ZX0gY29tZXMgd2l0aCBzYW5lIGRlZmF1bHRzIHRvIGFsbG93IHlvdSB0byBsb2FkXHJcbiAqIHRlbXBsYXRlcyBpbiBgbmctaW5jbHVkZWAgZnJvbSB5b3VyIGFwcGxpY2F0aW9uJ3MgZG9tYWluIHdpdGhvdXQgaGF2aW5nIHRvIGV2ZW4ga25vdyBhYm91dCBTQ0UuXHJcbiAqIEl0IGJsb2NrcyBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgbG9hZGluZyB0ZW1wbGF0ZXMgb3ZlciBodHRwIGZyb20gYW4gaHR0cHNcclxuICogc2VydmVkIGRvY3VtZW50LiAgWW91IGNhbiBjaGFuZ2UgdGhlc2UgYnkgc2V0dGluZyB5b3VyIG93biBjdXN0b20ge0BsaW5rXHJcbiAqIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHdoaXRlbGlzdHN9IGFuZCB7QGxpbmtcclxuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgYmxhY2tsaXN0c30gZm9yIG1hdGNoaW5nIHN1Y2ggVVJMcy5cclxuICpcclxuICogVGhpcyBzaWduaWZpY2FudGx5IHJlZHVjZXMgdGhlIG92ZXJoZWFkLiAgSXQgaXMgZmFyIGVhc2llciB0byBwYXkgdGhlIHNtYWxsIG92ZXJoZWFkIGFuZCBoYXZlIGFuXHJcbiAqIGFwcGxpY2F0aW9uIHRoYXQncyBzZWN1cmUgYW5kIGNhbiBiZSBhdWRpdGVkIHRvIHZlcmlmeSB0aGF0IHdpdGggbXVjaCBtb3JlIGVhc2UgdGhhbiBib2x0aW5nXHJcbiAqIHNlY3VyaXR5IG9udG8gYW4gYXBwbGljYXRpb24gbGF0ZXIuXHJcbiAqXHJcbiAqIDxhIG5hbWU9XCJjb250ZXh0c1wiPjwvYT5cclxuICogIyMgV2hhdCB0cnVzdGVkIGNvbnRleHQgdHlwZXMgYXJlIHN1cHBvcnRlZD9cclxuICpcclxuICogfCBDb250ZXh0ICAgICAgICAgICAgIHwgTm90ZXMgICAgICAgICAgfFxyXG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS18XHJcbiAqIHwgYCRzY2UuSFRNTGAgICAgICAgICB8IEZvciBIVE1MIHRoYXQncyBzYWZlIHRvIHNvdXJjZSBpbnRvIHRoZSBhcHBsaWNhdGlvbi4gIFRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQmluZEh0bWwgbmdCaW5kSHRtbH0gZGlyZWN0aXZlIHVzZXMgdGhpcyBjb250ZXh0IGZvciBiaW5kaW5ncy4gSWYgYW4gdW5zYWZlIHZhbHVlIGlzIGVuY291bnRlcmVkIGFuZCB0aGUge0BsaW5rIG5nU2FuaXRpemUgJHNhbml0aXplfSBtb2R1bGUgaXMgcHJlc2VudCB0aGlzIHdpbGwgc2FuaXRpemUgdGhlIHZhbHVlIGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IuIHxcclxuICogfCBgJHNjZS5DU1NgICAgICAgICAgIHwgRm9yIENTUyB0aGF0J3Mgc2FmZSB0byBzb3VyY2UgaW50byB0aGUgYXBwbGljYXRpb24uICBDdXJyZW50bHkgdW51c2VkLiAgRmVlbCBmcmVlIHRvIHVzZSBpdCBpbiB5b3VyIG93biBkaXJlY3RpdmVzLiB8XHJcbiAqIHwgYCRzY2UuVVJMYCAgICAgICAgICB8IEZvciBVUkxzIHRoYXQgYXJlIHNhZmUgdG8gZm9sbG93IGFzIGxpbmtzLiAgQ3VycmVudGx5IHVudXNlZCAoYDxhIGhyZWY9YCBhbmQgYDxpbWcgc3JjPWAgc2FuaXRpemUgdGhlaXIgdXJscyBhbmQgZG9uJ3QgY29uc3RpdHV0ZSBhbiBTQ0UgY29udGV4dC4gfFxyXG4gKiB8IGAkc2NlLlJFU09VUkNFX1VSTGAgfCBGb3IgVVJMcyB0aGF0IGFyZSBub3Qgb25seSBzYWZlIHRvIGZvbGxvdyBhcyBsaW5rcywgYnV0IHdob3NlIGNvbnRlbnRzIGFyZSBhbHNvIHNhZmUgdG8gaW5jbHVkZSBpbiB5b3VyIGFwcGxpY2F0aW9uLiAgRXhhbXBsZXMgaW5jbHVkZSBgbmctaW5jbHVkZWAsIGBzcmNgIC8gYG5nU3JjYCBiaW5kaW5ncyBmb3IgdGFncyBvdGhlciB0aGFuIGBJTUdgIChlLmcuIGBJRlJBTUVgLCBgT0JKRUNUYCwgZXRjLikgIDxicj48YnI+Tm90ZSB0aGF0IGAkc2NlLlJFU09VUkNFX1VSTGAgbWFrZXMgYSBzdHJvbmdlciBzdGF0ZW1lbnQgYWJvdXQgdGhlIFVSTCB0aGFuIGAkc2NlLlVSTGAgZG9lcyBhbmQgdGhlcmVmb3JlIGNvbnRleHRzIHJlcXVpcmluZyB2YWx1ZXMgdHJ1c3RlZCBmb3IgYCRzY2UuUkVTT1VSQ0VfVVJMYCBjYW4gYmUgdXNlZCBhbnl3aGVyZSB0aGF0IHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5VUkxgIGFyZSByZXF1aXJlZC4gfFxyXG4gKiB8IGAkc2NlLkpTYCAgICAgICAgICAgfCBGb3IgSmF2YVNjcmlwdCB0aGF0IGlzIHNhZmUgdG8gZXhlY3V0ZSBpbiB5b3VyIGFwcGxpY2F0aW9uJ3MgY29udGV4dC4gIEN1cnJlbnRseSB1bnVzZWQuICBGZWVsIGZyZWUgdG8gdXNlIGl0IGluIHlvdXIgb3duIGRpcmVjdGl2ZXMuIHxcclxuICpcclxuICogIyMgRm9ybWF0IG9mIGl0ZW1zIGluIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCByZXNvdXJjZVVybFdoaXRlbGlzdH0ve0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0IEJsYWNrbGlzdH0gPGEgbmFtZT1cInJlc291cmNlVXJsUGF0dGVybkl0ZW1cIj48L2E+XHJcbiAqXHJcbiAqICBFYWNoIGVsZW1lbnQgaW4gdGhlc2UgYXJyYXlzIG11c3QgYmUgb25lIG9mIHRoZSBmb2xsb3dpbmc6XHJcbiAqXHJcbiAqICAtICoqJ3NlbGYnKipcclxuICogICAgLSBUaGUgc3BlY2lhbCAqKnN0cmluZyoqLCBgJ3NlbGYnYCwgY2FuIGJlIHVzZWQgdG8gbWF0Y2ggYWdhaW5zdCBhbGwgVVJMcyBvZiB0aGUgKipzYW1lXHJcbiAqICAgICAgZG9tYWluKiogYXMgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50IHVzaW5nIHRoZSAqKnNhbWUgcHJvdG9jb2wqKi5cclxuICogIC0gKipTdHJpbmcqKiAoZXhjZXB0IHRoZSBzcGVjaWFsIHZhbHVlIGAnc2VsZidgKVxyXG4gKiAgICAtIFRoZSBzdHJpbmcgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBmdWxsICpub3JtYWxpemVkIC8gYWJzb2x1dGUgVVJMKiBvZiB0aGUgcmVzb3VyY2VcclxuICogICAgICBiZWluZyB0ZXN0ZWQgKHN1YnN0cmluZyBtYXRjaGVzIGFyZSBub3QgZ29vZCBlbm91Z2guKVxyXG4gKiAgICAtIFRoZXJlIGFyZSBleGFjdGx5ICoqdHdvIHdpbGRjYXJkIHNlcXVlbmNlcyoqIC0gYCpgIGFuZCBgKipgLiAgQWxsIG90aGVyIGNoYXJhY3RlcnNcclxuICogICAgICBtYXRjaCB0aGVtc2VsdmVzLlxyXG4gKiAgICAtIGAqYDogbWF0Y2hlcyB6ZXJvIG9yIG1vcmUgb2NjdXJyZW5jZXMgb2YgYW55IGNoYXJhY3RlciBvdGhlciB0aGFuIG9uZSBvZiB0aGUgZm9sbG93aW5nIDZcclxuICogICAgICBjaGFyYWN0ZXJzOiAnYDpgJywgJ2AvYCcsICdgLmAnLCAnYD9gJywgJ2AmYCcgYW5kICc7Jy4gIEl0J3MgYSB1c2VmdWwgd2lsZGNhcmQgZm9yIHVzZVxyXG4gKiAgICAgIGluIGEgd2hpdGVsaXN0LlxyXG4gKiAgICAtIGAqKmA6IG1hdGNoZXMgemVybyBvciBtb3JlIG9jY3VycmVuY2VzIG9mICphbnkqIGNoYXJhY3Rlci4gIEFzIHN1Y2gsIGl0J3Mgbm90XHJcbiAqICAgICAgbm90IGFwcHJvcHJpYXRlIHRvIHVzZSBpbiBmb3IgYSBzY2hlbWUsIGRvbWFpbiwgZXRjLiBhcyBpdCB3b3VsZCBtYXRjaCB0b28gbXVjaC4gIChlLmcuXHJcbiAqICAgICAgaHR0cDovLyoqLmV4YW1wbGUuY29tLyB3b3VsZCBtYXRjaCBodHRwOi8vZXZpbC5jb20vP2lnbm9yZT0uZXhhbXBsZS5jb20vIGFuZCB0aGF0IG1pZ2h0XHJcbiAqICAgICAgbm90IGhhdmUgYmVlbiB0aGUgaW50ZW50aW9uLikgIEl0cyB1c2FnZSBhdCB0aGUgdmVyeSBlbmQgb2YgdGhlIHBhdGggaXMgb2suICAoZS5nLlxyXG4gKiAgICAgIGh0dHA6Ly9mb28uZXhhbXBsZS5jb20vdGVtcGxhdGVzLyoqKS5cclxuICogIC0gKipSZWdFeHAqKiAoKnNlZSBjYXZlYXQgYmVsb3cqKVxyXG4gKiAgICAtICpDYXZlYXQqOiAgV2hpbGUgcmVndWxhciBleHByZXNzaW9ucyBhcmUgcG93ZXJmdWwgYW5kIG9mZmVyIGdyZWF0IGZsZXhpYmlsaXR5LCAgdGhlaXIgc3ludGF4XHJcbiAqICAgICAgKGFuZCBhbGwgdGhlIGluZXZpdGFibGUgZXNjYXBpbmcpIG1ha2VzIHRoZW0gKmhhcmRlciB0byBtYWludGFpbiouICBJdCdzIGVhc3kgdG9cclxuICogICAgICBhY2NpZGVudGFsbHkgaW50cm9kdWNlIGEgYnVnIHdoZW4gb25lIHVwZGF0ZXMgYSBjb21wbGV4IGV4cHJlc3Npb24gKGltaG8sIGFsbCByZWdleGVzIHNob3VsZFxyXG4gKiAgICAgIGhhdmUgZ29vZCB0ZXN0IGNvdmVyYWdlLikuICBGb3IgaW5zdGFuY2UsIHRoZSB1c2Ugb2YgYC5gIGluIHRoZSByZWdleCBpcyBjb3JyZWN0IG9ubHkgaW4gYVxyXG4gKiAgICAgIHNtYWxsIG51bWJlciBvZiBjYXNlcy4gIEEgYC5gIGNoYXJhY3RlciBpbiB0aGUgcmVnZXggdXNlZCB3aGVuIG1hdGNoaW5nIHRoZSBzY2hlbWUgb3IgYVxyXG4gKiAgICAgIHN1YmRvbWFpbiBjb3VsZCBiZSBtYXRjaGVkIGFnYWluc3QgYSBgOmAgb3IgbGl0ZXJhbCBgLmAgdGhhdCB3YXMgbGlrZWx5IG5vdCBpbnRlbmRlZC4gICBJdFxyXG4gKiAgICAgIGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgdGhlIHN0cmluZyBwYXR0ZXJucyBhbmQgb25seSBmYWxsIGJhY2sgdG8gcmVndWxhciBleHByZXNzaW9uc1xyXG4gKiAgICAgIGlmIHRoZXkgYXMgYSBsYXN0IHJlc29ydC5cclxuICogICAgLSBUaGUgcmVndWxhciBleHByZXNzaW9uIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVnRXhwIChpLmUuIG5vdCBhIHN0cmluZy4pICBJdCBpc1xyXG4gKiAgICAgIG1hdGNoZWQgYWdhaW5zdCB0aGUgKiplbnRpcmUqKiAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlIGJlaW5nIHRlc3RlZFxyXG4gKiAgICAgIChldmVuIHdoZW4gdGhlIFJlZ0V4cCBkaWQgbm90IGhhdmUgdGhlIGBeYCBhbmQgYCRgIGNvZGVzLikgIEluIGFkZGl0aW9uLCBhbnkgZmxhZ3NcclxuICogICAgICBwcmVzZW50IG9uIHRoZSBSZWdFeHAgKHN1Y2ggYXMgbXVsdGlsaW5lLCBnbG9iYWwsIGlnbm9yZUNhc2UpIGFyZSBpZ25vcmVkLlxyXG4gKiAgICAtIElmIHlvdSBhcmUgZ2VuZXJhdGluZyB5b3VyIEphdmFTY3JpcHQgZnJvbSBzb21lIG90aGVyIHRlbXBsYXRpbmcgZW5naW5lIChub3RcclxuICogICAgICByZWNvbW1lbmRlZCwgZS5nLiBpbiBpc3N1ZSBbIzQwMDZdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzQwMDYpKSxcclxuICogICAgICByZW1lbWJlciB0byBlc2NhcGUgeW91ciByZWd1bGFyIGV4cHJlc3Npb24gKGFuZCBiZSBhd2FyZSB0aGF0IHlvdSBtaWdodCBuZWVkIG1vcmUgdGhhblxyXG4gKiAgICAgIG9uZSBsZXZlbCBvZiBlc2NhcGluZyBkZXBlbmRpbmcgb24geW91ciB0ZW1wbGF0aW5nIGVuZ2luZSBhbmQgdGhlIHdheSB5b3UgaW50ZXJwb2xhdGVkXHJcbiAqICAgICAgdGhlIHZhbHVlLikgIERvIG1ha2UgdXNlIG9mIHlvdXIgcGxhdGZvcm0ncyBlc2NhcGluZyBtZWNoYW5pc20gYXMgaXQgbWlnaHQgYmUgZ29vZFxyXG4gKiAgICAgIGVub3VnaCBiZWZvcmUgY29kaW5nIHlvdXIgb3duLiAgZS5nLiBSdWJ5IGhhc1xyXG4gKiAgICAgIFtSZWdleHAuZXNjYXBlKHN0cildKGh0dHA6Ly93d3cucnVieS1kb2Mub3JnL2NvcmUtMi4wLjAvUmVnZXhwLmh0bWwjbWV0aG9kLWMtZXNjYXBlKVxyXG4gKiAgICAgIGFuZCBQeXRob24gaGFzIFtyZS5lc2NhcGVdKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9yZS5odG1sI3JlLmVzY2FwZSkuXHJcbiAqICAgICAgSmF2YXNjcmlwdCBsYWNrcyBhIHNpbWlsYXIgYnVpbHQgaW4gZnVuY3Rpb24gZm9yIGVzY2FwaW5nLiAgVGFrZSBhIGxvb2sgYXQgR29vZ2xlXHJcbiAqICAgICAgQ2xvc3VyZSBsaWJyYXJ5J3MgW2dvb2cuc3RyaW5nLnJlZ0V4cEVzY2FwZShzKV0oXHJcbiAqICAgICAgaHR0cDovL2RvY3MuY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL2dpdC9jbG9zdXJlX2dvb2dfc3RyaW5nX3N0cmluZy5qcy5zb3VyY2UuaHRtbCNsaW5lOTYyKS5cclxuICpcclxuICogUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBmb3IgYW4gZXhhbXBsZS5cclxuICpcclxuICogIyMgU2hvdyBtZSBhbiBleGFtcGxlIHVzaW5nIFNDRS5cclxuICpcclxuICogPGV4YW1wbGUgbW9kdWxlPVwibXlTY2VBcHBcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxyXG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgIDxkaXYgbmctY29udHJvbGxlcj1cIkFwcENvbnRyb2xsZXIgYXMgbXlDdHJsXCI+XHJcbiAqICAgICA8aSBuZy1iaW5kLWh0bWw9XCJteUN0cmwuZXhwbGljaXRseVRydXN0ZWRIdG1sXCIgaWQ9XCJleHBsaWNpdGx5VHJ1c3RlZEh0bWxcIj48L2k+PGJyPjxicj5cclxuICogICAgIDxiPlVzZXIgY29tbWVudHM8L2I+PGJyPlxyXG4gKiAgICAgQnkgZGVmYXVsdCwgSFRNTCB0aGF0IGlzbid0IGV4cGxpY2l0bHkgdHJ1c3RlZCAoZS5nLiBBbGljZSdzIGNvbW1lbnQpIGlzIHNhbml0aXplZCB3aGVuXHJcbiAqICAgICAkc2FuaXRpemUgaXMgYXZhaWxhYmxlLiAgSWYgJHNhbml0aXplIGlzbid0IGF2YWlsYWJsZSwgdGhpcyByZXN1bHRzIGluIGFuIGVycm9yIGluc3RlYWQgb2YgYW5cclxuICogICAgIGV4cGxvaXQuXHJcbiAqICAgICA8ZGl2IGNsYXNzPVwid2VsbFwiPlxyXG4gKiAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInVzZXJDb21tZW50IGluIG15Q3RybC51c2VyQ29tbWVudHNcIj5cclxuICogICAgICAgICA8Yj57e3VzZXJDb21tZW50Lm5hbWV9fTwvYj46XHJcbiAqICAgICAgICAgPHNwYW4gbmctYmluZC1odG1sPVwidXNlckNvbW1lbnQuaHRtbENvbW1lbnRcIiBjbGFzcz1cImh0bWxDb21tZW50XCI+PC9zcGFuPlxyXG4gKiAgICAgICAgIDxicj5cclxuICogICAgICAgPC9kaXY+XHJcbiAqICAgICA8L2Rpdj5cclxuICogICA8L2Rpdj5cclxuICogPC9maWxlPlxyXG4gKlxyXG4gKiA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAqICAgYW5ndWxhci5tb2R1bGUoJ215U2NlQXBwJywgWyduZ1Nhbml0aXplJ10pXHJcbiAqICAgICAuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIFsnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnLCAnJHNjZScsXHJcbiAqICAgICAgIGZ1bmN0aW9uKCRodHRwLCAkdGVtcGxhdGVDYWNoZSwgJHNjZSkge1xyXG4gKiAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICogICAgICAgICAkaHR0cC5nZXQoXCJ0ZXN0X2RhdGEuanNvblwiLCB7Y2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuc3VjY2VzcyhmdW5jdGlvbih1c2VyQ29tbWVudHMpIHtcclxuICogICAgICAgICAgIHNlbGYudXNlckNvbW1lbnRzID0gdXNlckNvbW1lbnRzO1xyXG4gKiAgICAgICAgIH0pO1xyXG4gKiAgICAgICAgIHNlbGYuZXhwbGljaXRseVRydXN0ZWRIdG1sID0gJHNjZS50cnVzdEFzSHRtbChcclxuICogICAgICAgICAgICAgJzxzcGFuIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD0mcXVvdDtFeHBsaWNpdGx5IHRydXN0ZWQgSFRNTCBieXBhc3NlcyAnICtcclxuICogICAgICAgICAgICAgJ3Nhbml0aXphdGlvbi4mcXVvdDtcIj5Ib3ZlciBvdmVyIHRoaXMgdGV4dC48L3NwYW4+Jyk7XHJcbiAqICAgICAgIH1dKTtcclxuICogPC9maWxlPlxyXG4gKlxyXG4gKiA8ZmlsZSBuYW1lPVwidGVzdF9kYXRhLmpzb25cIj5cclxuICogW1xyXG4gKiAgIHsgXCJuYW1lXCI6IFwiQWxpY2VcIixcclxuICogICAgIFwiaHRtbENvbW1lbnRcIjpcclxuICogICAgICAgICBcIjxzcGFuIG9ubW91c2VvdmVyPSd0aGlzLnRleHRDb250ZW50PVxcXCJQV04zRCFcXFwiJz5JcyA8aT5hbnlvbmU8L2k+IHJlYWRpbmcgdGhpcz88L3NwYW4+XCJcclxuICogICB9LFxyXG4gKiAgIHsgXCJuYW1lXCI6IFwiQm9iXCIsXHJcbiAqICAgICBcImh0bWxDb21tZW50XCI6IFwiPGk+WWVzITwvaT4gIEFtIEkgdGhlIG9ubHkgb3RoZXIgb25lP1wiXHJcbiAqICAgfVxyXG4gKiBdXHJcbiAqIDwvZmlsZT5cclxuICpcclxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gKiAgIGRlc2NyaWJlKCdTQ0UgZG9jIGRlbW8nLCBmdW5jdGlvbigpIHtcclxuICogICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdW50cnVzdGVkIHZhbHVlcycsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcuaHRtbENvbW1lbnQnKSkuZmlyc3QoKS5nZXRJbm5lckh0bWwoKSlcclxuICogICAgICAgICAgIC50b0JlKCc8c3Bhbj5JcyA8aT5hbnlvbmU8L2k+IHJlYWRpbmcgdGhpcz88L3NwYW4+Jyk7XHJcbiAqICAgICB9KTtcclxuICpcclxuICogICAgIGl0KCdzaG91bGQgTk9UIHNhbml0aXplIGV4cGxpY2l0bHkgdHJ1c3RlZCB2YWx1ZXMnLCBmdW5jdGlvbigpIHtcclxuICogICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2V4cGxpY2l0bHlUcnVzdGVkSHRtbCcpKS5nZXRJbm5lckh0bWwoKSkudG9CZShcclxuICogICAgICAgICAgICc8c3BhbiBvbm1vdXNlb3Zlcj1cInRoaXMudGV4dENvbnRlbnQ9JnF1b3Q7RXhwbGljaXRseSB0cnVzdGVkIEhUTUwgYnlwYXNzZXMgJyArXHJcbiAqICAgICAgICAgICAnc2FuaXRpemF0aW9uLiZxdW90O1wiPkhvdmVyIG92ZXIgdGhpcyB0ZXh0Ljwvc3Bhbj4nKTtcclxuICogICAgIH0pO1xyXG4gKiAgIH0pO1xyXG4gKiA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICpcclxuICpcclxuICogIyMgQ2FuIEkgZGlzYWJsZSBTQ0UgY29tcGxldGVseT9cclxuICpcclxuICogWWVzLCB5b3UgY2FuLiAgSG93ZXZlciwgdGhpcyBpcyBzdHJvbmdseSBkaXNjb3VyYWdlZC4gIFNDRSBnaXZlcyB5b3UgYSBsb3Qgb2Ygc2VjdXJpdHkgYmVuZWZpdHNcclxuICogZm9yIGxpdHRsZSBjb2Rpbmcgb3ZlcmhlYWQuICBJdCB3aWxsIGJlIG11Y2ggaGFyZGVyIHRvIHRha2UgYW4gU0NFIGRpc2FibGVkIGFwcGxpY2F0aW9uIGFuZFxyXG4gKiBlaXRoZXIgc2VjdXJlIGl0IG9uIHlvdXIgb3duIG9yIGVuYWJsZSBTQ0UgYXQgYSBsYXRlciBzdGFnZS4gIEl0IG1pZ2h0IG1ha2Ugc2Vuc2UgdG8gZGlzYWJsZSBTQ0VcclxuICogZm9yIGNhc2VzIHdoZXJlIHlvdSBoYXZlIGEgbG90IG9mIGV4aXN0aW5nIGNvZGUgdGhhdCB3YXMgd3JpdHRlbiBiZWZvcmUgU0NFIHdhcyBpbnRyb2R1Y2VkIGFuZFxyXG4gKiB5b3UncmUgbWlncmF0aW5nIHRoZW0gYSBtb2R1bGUgYXQgYSB0aW1lLlxyXG4gKlxyXG4gKiBUaGF0IHNhaWQsIGhlcmUncyBob3cgeW91IGNhbiBjb21wbGV0ZWx5IGRpc2FibGUgU0NFOlxyXG4gKlxyXG4gKiBgYGBcclxuICogYW5ndWxhci5tb2R1bGUoJ215QXBwV2l0aFNjZURpc2FibGVkbXlBcHAnLCBbXSkuY29uZmlnKGZ1bmN0aW9uKCRzY2VQcm92aWRlcikge1xyXG4gKiAgIC8vIENvbXBsZXRlbHkgZGlzYWJsZSBTQ0UuICBGb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IVxyXG4gKiAgIC8vIERvIG5vdCB1c2UgaW4gbmV3IHByb2plY3RzLlxyXG4gKiAgICRzY2VQcm92aWRlci5lbmFibGVkKGZhbHNlKTtcclxuICogfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKi9cclxuLyoganNoaW50IG1heGxlbjogMTAwICovXHJcblxyXG5mdW5jdGlvbiAkU2NlUHJvdmlkZXIoKSB7XHJcbiAgdmFyIGVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJHNjZVByb3ZpZGVyI2VuYWJsZWRcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFuPX0gdmFsdWUgSWYgcHJvdmlkZWQsIHRoZW4gZW5hYmxlcy9kaXNhYmxlcyBTQ0UuXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBTQ0UgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogRW5hYmxlcy9kaXNhYmxlcyBTQ0UgYW5kIHJldHVybnMgdGhlIGN1cnJlbnQgdmFsdWUuXHJcbiAgICovXHJcbiAgdGhpcy5lbmFibGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICBlbmFibGVkID0gISF2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbmFibGVkO1xyXG4gIH07XHJcblxyXG5cclxuICAvKiBEZXNpZ24gbm90ZXMgb24gdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gZm9yIFNDRS5cclxuICAgKlxyXG4gICAqIFRoZSBBUEkgY29udHJhY3QgZm9yIHRoZSBTQ0UgZGVsZWdhdGVcclxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICogVGhlIFNDRSBkZWxlZ2F0ZSBvYmplY3QgbXVzdCBwcm92aWRlIHRoZSBmb2xsb3dpbmcgMyBtZXRob2RzOlxyXG4gICAqXHJcbiAgICogLSB0cnVzdEFzKGNvbnRleHRFbnVtLCB2YWx1ZSlcclxuICAgKiAgICAgVGhpcyBtZXRob2QgaXMgdXNlZCB0byB0ZWxsIHRoZSBTQ0Ugc2VydmljZSB0aGF0IHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBPSyB0byB1c2UgaW4gdGhlXHJcbiAgICogICAgIGNvbnRleHRzIHNwZWNpZmllZCBieSBjb250ZXh0RW51bS4gIEl0IG11c3QgcmV0dXJuIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgYWNjZXB0ZWQgYnlcclxuICAgKiAgICAgZ2V0VHJ1c3RlZCgpIGZvciBhIGNvbXBhdGlibGUgY29udGV4dEVudW0gYW5kIHJldHVybiB0aGlzIHZhbHVlLlxyXG4gICAqXHJcbiAgICogLSB2YWx1ZU9mKHZhbHVlKVxyXG4gICAqICAgICBGb3IgdmFsdWVzIHRoYXQgd2VyZSBub3QgcHJvZHVjZWQgYnkgdHJ1c3RBcygpLCByZXR1cm4gdGhlbSBhcyBpcy4gIEZvciB2YWx1ZXMgdGhhdCB3ZXJlXHJcbiAgICogICAgIHByb2R1Y2VkIGJ5IHRydXN0QXMoKSwgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIGlucHV0IHZhbHVlIHRvIHRydXN0QXMuICBCYXNpY2FsbHksIGlmXHJcbiAgICogICAgIHRydXN0QXMgaXMgd3JhcHBpbmcgdGhlIGdpdmVuIHZhbHVlcyBpbnRvIHNvbWUgdHlwZSwgdGhpcyBvcGVyYXRpb24gdW53cmFwcyBpdCB3aGVuIGdpdmVuXHJcbiAgICogICAgIHN1Y2ggYSB2YWx1ZS5cclxuICAgKlxyXG4gICAqIC0gZ2V0VHJ1c3RlZChjb250ZXh0RW51bSwgdmFsdWUpXHJcbiAgICogICAgIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJldHVybiB0aGUgYSB2YWx1ZSB0aGF0IGlzIHNhZmUgdG8gdXNlIGluIHRoZSBjb250ZXh0IHNwZWNpZmllZCBieVxyXG4gICAqICAgICBjb250ZXh0RW51bSBvciB0aHJvdyBhbmQgZXhjZXB0aW9uIG90aGVyd2lzZS5cclxuICAgKlxyXG4gICAqIE5PVEU6IFRoaXMgY29udHJhY3QgZGVsaWJlcmF0ZWx5IGRvZXMgTk9UIHN0YXRlIHRoYXQgdmFsdWVzIHJldHVybmVkIGJ5IHRydXN0QXMoKSBtdXN0IGJlXHJcbiAgICogb3BhcXVlIG9yIHdyYXBwZWQgaW4gc29tZSBob2xkZXIgb2JqZWN0LiAgVGhhdCBoYXBwZW5zIHRvIGJlIGFuIGltcGxlbWVudGF0aW9uIGRldGFpbC4gIEZvclxyXG4gICAqIGluc3RhbmNlLCBhbiBpbXBsZW1lbnRhdGlvbiBjb3VsZCBtYWludGFpbiBhIHJlZ2lzdHJ5IG9mIGFsbCB0cnVzdGVkIG9iamVjdHMgYnkgY29udGV4dC4gIEluXHJcbiAgICogc3VjaCBhIGNhc2UsIHRydXN0QXMoKSB3b3VsZCByZXR1cm4gdGhlIHNhbWUgb2JqZWN0IHRoYXQgd2FzIHBhc3NlZCBpbi4gIGdldFRydXN0ZWQoKSB3b3VsZFxyXG4gICAqIHJldHVybiB0aGUgc2FtZSBvYmplY3QgcGFzc2VkIGluIGlmIGl0IHdhcyBmb3VuZCBpbiB0aGUgcmVnaXN0cnkgdW5kZXIgYSBjb21wYXRpYmxlIGNvbnRleHQgb3JcclxuICAgKiB0aHJvdyBhbiBleGNlcHRpb24gb3RoZXJ3aXNlLiAgQW4gaW1wbGVtZW50YXRpb24gbWlnaHQgb25seSB3cmFwIHZhbHVlcyBzb21lIG9mIHRoZSB0aW1lIGJhc2VkXHJcbiAgICogb24gc29tZSBjcml0ZXJpYS4gIGdldFRydXN0ZWQoKSBtaWdodCByZXR1cm4gYSB2YWx1ZSBhbmQgbm90IHRocm93IGFuIGV4Y2VwdGlvbiBmb3Igc3BlY2lhbFxyXG4gICAqIGNvbnN0YW50cyBvciBvYmplY3RzIGV2ZW4gaWYgbm90IHdyYXBwZWQuICBBbGwgc3VjaCBpbXBsZW1lbnRhdGlvbnMgZnVsZmlsbCB0aGlzIGNvbnRyYWN0LlxyXG4gICAqXHJcbiAgICpcclxuICAgKiBBIG5vdGUgb24gdGhlIGluaGVyaXRhbmNlIG1vZGVsIGZvciBTQ0UgY29udGV4dHNcclxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiBJJ3ZlIHVzZWQgaW5oZXJpdGFuY2UgYW5kIG1hZGUgUkVTT1VSQ0VfVVJMIHdyYXBwZWQgdHlwZXMgYSBzdWJ0eXBlIG9mIFVSTCB3cmFwcGVkIHR5cGVzLiAgVGhpc1xyXG4gICAqIGlzIHB1cmVseSBhbiBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLlxyXG4gICAqXHJcbiAgICogVGhlIGNvbnRyYWN0IGlzIHNpbXBseSB0aGlzOlxyXG4gICAqXHJcbiAgICogICAgIGdldFRydXN0ZWQoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKSBzdWNjZWVkaW5nIGltcGxpZXMgdGhhdCBnZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlcclxuICAgKiAgICAgd2lsbCBhbHNvIHN1Y2NlZWQuXHJcbiAgICpcclxuICAgKiBJbmhlcml0YW5jZSBoYXBwZW5zIHRvIGNhcHR1cmUgdGhpcyBpbiBhIG5hdHVyYWwgd2F5LiAgSW4gc29tZSBmdXR1cmUsIHdlXHJcbiAgICogbWF5IG5vdCB1c2UgaW5oZXJpdGFuY2UgYW55bW9yZS4gIFRoYXQgaXMgT0sgYmVjYXVzZSBubyBjb2RlIG91dHNpZGUgb2ZcclxuICAgKiBzY2UuanMgYW5kIHNjZVNwZWNzLmpzIHdvdWxkIG5lZWQgdG8gYmUgYXdhcmUgb2YgdGhpcyBkZXRhaWwuXHJcbiAgICovXHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJHBhcnNlJywgJyRzbmlmZmVyJywgJyRzY2VEZWxlZ2F0ZScsIGZ1bmN0aW9uKFxyXG4gICAgICAgICAgICAgICAgJHBhcnNlLCAgICRzbmlmZmVyLCAgICRzY2VEZWxlZ2F0ZSkge1xyXG4gICAgLy8gUHJlcmVxOiBFbnN1cmUgdGhhdCB3ZSdyZSBub3QgcnVubmluZyBpbiBJRTggcXVpcmtzIG1vZGUuICBJbiB0aGF0IG1vZGUsIElFIGFsbG93c1xyXG4gICAgLy8gdGhlIFwiZXhwcmVzc2lvbihqYXZhc2NyaXB0IGV4cHJlc3Npb24pXCIgc3ludGF4IHdoaWNoIGlzIGluc2VjdXJlLlxyXG4gICAgaWYgKGVuYWJsZWQgJiYgJHNuaWZmZXIubXNpZSAmJiAkc25pZmZlci5tc2llRG9jdW1lbnRNb2RlIDwgOCkge1xyXG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpZXF1aXJrcycsXHJcbiAgICAgICAgJ1N0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIGRvZXMgbm90IHN1cHBvcnQgSW50ZXJuZXQgRXhwbG9yZXIgdmVyc2lvbiA8IDkgaW4gcXVpcmtzICcgK1xyXG4gICAgICAgICdtb2RlLiAgWW91IGNhbiBmaXggdGhpcyBieSBhZGRpbmcgdGhlIHRleHQgPCFkb2N0eXBlIGh0bWw+IHRvIHRoZSB0b3Agb2YgeW91ciBIVE1MICcgK1xyXG4gICAgICAgICdkb2N1bWVudC4gIFNlZSBodHRwOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy4kc2NlIGZvciBtb3JlIGluZm9ybWF0aW9uLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzY2UgPSBzaGFsbG93Q29weShTQ0VfQ09OVEVYVFMpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNpc0VuYWJsZWRcclxuICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBTQ0UgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLiAgSWYgeW91IHdhbnQgdG8gc2V0IHRoZSB2YWx1ZSwgeW91XHJcbiAgICAgKiBoYXZlIHRvIGRvIGl0IGF0IG1vZHVsZSBjb25maWcgdGltZSBvbiB7QGxpbmsgbmcuJHNjZVByb3ZpZGVyICRzY2VQcm92aWRlcn0uXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIFNDRSBpcyBlbmFibGVkLlxyXG4gICAgICovXHJcbiAgICBzY2UuaXNFbmFibGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gZW5hYmxlZDtcclxuICAgIH07XHJcbiAgICBzY2UudHJ1c3RBcyA9ICRzY2VEZWxlZ2F0ZS50cnVzdEFzO1xyXG4gICAgc2NlLmdldFRydXN0ZWQgPSAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZDtcclxuICAgIHNjZS52YWx1ZU9mID0gJHNjZURlbGVnYXRlLnZhbHVlT2Y7XHJcblxyXG4gICAgaWYgKCFlbmFibGVkKSB7XHJcbiAgICAgIHNjZS50cnVzdEFzID0gc2NlLmdldFRydXN0ZWQgPSBmdW5jdGlvbih0eXBlLCB2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XHJcbiAgICAgIHNjZS52YWx1ZU9mID0gaWRlbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnZlcnRzIEFuZ3VsYXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaW50byBhIGZ1bmN0aW9uLiAgVGhpcyBpcyBsaWtlIHtAbGlua1xyXG4gICAgICogbmcuJHBhcnNlICRwYXJzZX0gYW5kIGlzIGlkZW50aWNhbCB3aGVuIHRoZSBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCBjb25zdGFudC4gIE90aGVyd2lzZSwgaXRcclxuICAgICAqIHdyYXBzIHRoZSBleHByZXNzaW9uIGluIGEgY2FsbCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZCgqdHlwZSosXHJcbiAgICAgKiAqcmVzdWx0Kil9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgU0NFIGNvbnRleHQgaW4gd2hpY2ggdGhpcyByZXN1bHQgd2lsbCBiZSB1c2VkLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cclxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XHJcbiAgICAgKlxyXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xyXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXHJcbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXHJcbiAgICAgKiAgICAgIGBjb250ZXh0YC5cclxuICAgICAqL1xyXG4gICAgc2NlLnBhcnNlQXMgPSBmdW5jdGlvbiBzY2VQYXJzZUFzKHR5cGUsIGV4cHIpIHtcclxuICAgICAgdmFyIHBhcnNlZCA9ICRwYXJzZShleHByKTtcclxuICAgICAgaWYgKHBhcnNlZC5saXRlcmFsICYmIHBhcnNlZC5jb25zdGFudCkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICRwYXJzZShleHByLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgIHJldHVybiBzY2UuZ2V0VHJ1c3RlZCh0eXBlLCB2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIERlbGVnYXRlcyB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0uICBBcyBzdWNoLFxyXG4gICAgICogcmV0dXJucyBhbiBvYmplY3QgdGhhdCBpcyB0cnVzdGVkIGJ5IGFuZ3VsYXIgZm9yIHVzZSBpbiBzcGVjaWZpZWQgc3RyaWN0IGNvbnRleHR1YWxcclxuICAgICAqIGVzY2FwaW5nIGNvbnRleHRzIChzdWNoIGFzIG5nLWJpbmQtaHRtbCwgbmctaW5jbHVkZSwgYW55IHNyYyBhdHRyaWJ1dGVcclxuICAgICAqIGludGVycG9sYXRpb24sIGFueSBkb20gZXZlbnQgYmluZGluZyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBzdWNoIGFzIGZvciBvbmNsaWNrLCAgZXRjLilcclxuICAgICAqIHRoYXQgdXNlcyB0aGUgcHJvdmlkZWQgdmFsdWUuICBTZWUgKiB7QGxpbmsgbmcuJHNjZSAkc2NlfSBmb3IgZW5hYmxpbmcgc3RyaWN0IGNvbnRleHR1YWxcclxuICAgICAqIGVzY2FwaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBraW5kIG9mIGNvbnRleHQgaW4gd2hpY2ggdGhpcyB2YWx1ZSBpcyBzYWZlIGZvciB1c2UuICBlLmcuIHVybCxcclxuICAgICAqICAgcmVzb3VyY2VfdXJsLCBodG1sLCBqcyBhbmQgY3NzLlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdGhhdCB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRydXN0ZWQvc2FmZS5cclxuICAgICAqIEByZXR1cm5zIHsqfSBBIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgdG8gc3RhbmQgaW4gZm9yIHRoZSBwcm92aWRlZCBgdmFsdWVgIGluIHBsYWNlc1xyXG4gICAgICogd2hlcmUgQW5ndWxhciBleHBlY3RzIGEgJHNjZS50cnVzdEFzKCkgcmV0dXJuIHZhbHVlLlxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNIdG1sXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc0h0bWwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuSFRNTCwgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB0cnVzdEFzLlxyXG4gICAgICogQHJldHVybnMgeyp9IEFuIG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8ge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZEh0bWxcclxuICAgICAqICAgICAkc2NlLmdldFRydXN0ZWRIdG1sKHZhbHVlKX0gdG8gb2J0YWluIHRoZSBvcmlnaW5hbCB2YWx1ZS4gIChwcml2aWxlZ2VkIGRpcmVjdGl2ZXNcclxuICAgICAqICAgICBvbmx5IGFjY2VwdCBleHByZXNzaW9ucyB0aGF0IGFyZSBlaXRoZXIgbGl0ZXJhbCBjb25zdGFudHMgb3IgYXJlIHRoZVxyXG4gICAgICogICAgIHJldHVybiB2YWx1ZSBvZiB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc30uKVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNVcmxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzVXJsKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLlVSTCwgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB0cnVzdEFzLlxyXG4gICAgICogQHJldHVybnMgeyp9IEFuIG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8ge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFVybFxyXG4gICAgICogICAgICRzY2UuZ2V0VHJ1c3RlZFVybCh2YWx1ZSl9IHRvIG9idGFpbiB0aGUgb3JpZ2luYWwgdmFsdWUuICAocHJpdmlsZWdlZCBkaXJlY3RpdmVzXHJcbiAgICAgKiAgICAgb25seSBhY2NlcHQgZXhwcmVzc2lvbnMgdGhhdCBhcmUgZWl0aGVyIGxpdGVyYWwgY29uc3RhbnRzIG9yIGFyZSB0aGVcclxuICAgICAqICAgICByZXR1cm4gdmFsdWUgb2Yge0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyAkc2NlLnRydXN0QXN9LilcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRydXN0QXMuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gQW4gb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmxcclxuICAgICAqICAgICAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh2YWx1ZSl9IHRvIG9idGFpbiB0aGUgb3JpZ2luYWwgdmFsdWUuICAocHJpdmlsZWdlZCBkaXJlY3RpdmVzXHJcbiAgICAgKiAgICAgb25seSBhY2NlcHQgZXhwcmVzc2lvbnMgdGhhdCBhcmUgZWl0aGVyIGxpdGVyYWwgY29uc3RhbnRzIG9yIGFyZSB0aGUgcmV0dXJuXHJcbiAgICAgKiAgICAgdmFsdWUgb2Yge0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyAkc2NlLnRydXN0QXN9LilcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzSnNcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzSnModmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuSlMsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gdHJ1c3RBcy5cclxuICAgICAqIEByZXR1cm5zIHsqfSBBbiBvYmplY3QgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWRKc1xyXG4gICAgICogICAgICRzY2UuZ2V0VHJ1c3RlZEpzKHZhbHVlKX0gdG8gb2J0YWluIHRoZSBvcmlnaW5hbCB2YWx1ZS4gIChwcml2aWxlZ2VkIGRpcmVjdGl2ZXNcclxuICAgICAqICAgICBvbmx5IGFjY2VwdCBleHByZXNzaW9ucyB0aGF0IGFyZSBlaXRoZXIgbGl0ZXJhbCBjb25zdGFudHMgb3IgYXJlIHRoZVxyXG4gICAgICogICAgIHJldHVybiB2YWx1ZSBvZiB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc30uKVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIERlbGVnYXRlcyB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkYH0uICBBcyBzdWNoLFxyXG4gICAgICogdGFrZXMgdGhlIHJlc3VsdCBvZiBhIHtAbGluayBuZy4kc2NlI3RydXN0QXMgYCRzY2UudHJ1c3RBc2B9KCkgY2FsbCBhbmQgcmV0dXJucyB0aGVcclxuICAgICAqIG9yaWdpbmFsbHkgc3VwcGxpZWQgdmFsdWUgaWYgdGhlIHF1ZXJpZWQgY29udGV4dCB0eXBlIGlzIGEgc3VwZXJ0eXBlIG9mIHRoZSBjcmVhdGVkIHR5cGUuXHJcbiAgICAgKiBJZiB0aGlzIGNvbmRpdGlvbiBpc24ndCBzYXRpc2ZpZWQsIHRocm93cyBhbiBleGNlcHRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHRvIGJlIHVzZWQuXHJcbiAgICAgKiBAcGFyYW0geyp9IG1heWJlVHJ1c3RlZCBUaGUgcmVzdWx0IG9mIGEgcHJpb3Ige0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyBgJHNjZS50cnVzdEFzYH1cclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGwuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIHRoZSB3YXMgb3JpZ2luYWxseSBwcm92aWRlZCB0b1xyXG4gICAgICogICAgICAgICAgICAgIHtAbGluayBuZy4kc2NlI3RydXN0QXMgYCRzY2UudHJ1c3RBc2B9IGlmIHZhbGlkIGluIHRoaXMgY29udGV4dC5cclxuICAgICAqICAgICAgICAgICAgICBPdGhlcndpc2UsIHRocm93cyBhbiBleGNlcHRpb24uXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZEh0bWxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkSHRtbCh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5IVE1MLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuSFRNTCwgdmFsdWUpYFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRDc3NcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkQ3NzKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkNTUywgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlLmdldFRydXN0ZWRgLlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLkNTUywgdmFsdWUpYFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRVcmxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkVXJsKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLlVSTCwgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlLmdldFRydXN0ZWRgLlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLlVSTCwgdmFsdWUpYFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWRgLlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRKc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRKcyh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5KUywgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlLmdldFRydXN0ZWRgLlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLkpTLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc0h0bWxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzSHRtbChleHByZXNzaW9uIHN0cmluZylgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlIGAkc2NlLnBhcnNlQXMoJHNjZS5IVE1MLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXHJcbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxyXG4gICAgICpcclxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcclxuICAgICAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxyXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxyXG4gICAgICogICAgICBgY29udGV4dGAuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc0Nzc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNDc3ModmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZSBgJHNjZS5wYXJzZUFzKCRzY2UuQ1NTLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXHJcbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxyXG4gICAgICpcclxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcclxuICAgICAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxyXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxyXG4gICAgICogICAgICBgY29udGV4dGAuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1VybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZSBgJHNjZS5wYXJzZUFzKCRzY2UuVVJMLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXHJcbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxyXG4gICAgICpcclxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcclxuICAgICAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxyXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxyXG4gICAgICogICAgICBgY29udGV4dGAuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1Jlc291cmNlVXJsXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc1Jlc291cmNlVXJsKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2UgYCRzY2UucGFyc2VBcygkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxyXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcclxuICAgICAqXHJcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXHJcbiAgICAgKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cclxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cclxuICAgICAqICAgICAgYGNvbnRleHRgLlxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNKc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNKcyh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlIGAkc2NlLnBhcnNlQXMoJHNjZS5KUywgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxyXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcclxuICAgICAqXHJcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXHJcbiAgICAgKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cclxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cclxuICAgICAqICAgICAgYGNvbnRleHRgLlxyXG4gICAgICovXHJcblxyXG4gICAgLy8gU2hvcnRoYW5kIGRlbGVnYXRpb25zLlxyXG4gICAgdmFyIHBhcnNlID0gc2NlLnBhcnNlQXMsXHJcbiAgICAgICAgZ2V0VHJ1c3RlZCA9IHNjZS5nZXRUcnVzdGVkLFxyXG4gICAgICAgIHRydXN0QXMgPSBzY2UudHJ1c3RBcztcclxuXHJcbiAgICBmb3JFYWNoKFNDRV9DT05URVhUUywgZnVuY3Rpb24gKGVudW1WYWx1ZSwgbmFtZSkge1xyXG4gICAgICB2YXIgbE5hbWUgPSBsb3dlcmNhc2UobmFtZSk7XHJcbiAgICAgIHNjZVtjYW1lbENhc2UoXCJwYXJzZV9hc19cIiArIGxOYW1lKV0gPSBmdW5jdGlvbiAoZXhwcikge1xyXG4gICAgICAgIHJldHVybiBwYXJzZShlbnVtVmFsdWUsIGV4cHIpO1xyXG4gICAgICB9O1xyXG4gICAgICBzY2VbY2FtZWxDYXNlKFwiZ2V0X3RydXN0ZWRfXCIgKyBsTmFtZSldID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldFRydXN0ZWQoZW51bVZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHNjZVtjYW1lbENhc2UoXCJ0cnVzdF9hc19cIiArIGxOYW1lKV0gPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1c3RBcyhlbnVtVmFsdWUsIHZhbHVlKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBzY2U7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiAhISEgVGhpcyBpcyBhbiB1bmRvY3VtZW50ZWQgXCJwcml2YXRlXCIgc2VydmljZSAhISFcclxuICpcclxuICogQG5hbWUgJHNuaWZmZXJcclxuICogQHJlcXVpcmVzICR3aW5kb3dcclxuICogQHJlcXVpcmVzICRkb2N1bWVudFxyXG4gKlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhpc3RvcnkgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IGh0bWw1IGhpc3RvcnkgYXBpID9cclxuICogQHByb3BlcnR5IHtib29sZWFufSBoYXNoY2hhbmdlIERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCBoYXNoY2hhbmdlIGV2ZW50ID9cclxuICogQHByb3BlcnR5IHtib29sZWFufSB0cmFuc2l0aW9ucyBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgQ1NTIHRyYW5zaXRpb24gZXZlbnRzID9cclxuICogQHByb3BlcnR5IHtib29sZWFufSBhbmltYXRpb25zIERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCBDU1MgYW5pbWF0aW9uIGV2ZW50cyA/XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGlzIGlzIHZlcnkgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIHRlc3RpbmcgYnJvd3NlcidzIGZlYXR1cmVzLlxyXG4gKi9cclxuZnVuY3Rpb24gJFNuaWZmZXJQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJHdpbmRvdywgJGRvY3VtZW50KSB7XHJcbiAgICB2YXIgZXZlbnRTdXBwb3J0ID0ge30sXHJcbiAgICAgICAgYW5kcm9pZCA9XHJcbiAgICAgICAgICBpbnQoKC9hbmRyb2lkIChcXGQrKS8uZXhlYyhsb3dlcmNhc2UoKCR3aW5kb3cubmF2aWdhdG9yIHx8IHt9KS51c2VyQWdlbnQpKSB8fCBbXSlbMV0pLFxyXG4gICAgICAgIGJveGVlID0gL0JveGVlL2kudGVzdCgoJHdpbmRvdy5uYXZpZ2F0b3IgfHwge30pLnVzZXJBZ2VudCksXHJcbiAgICAgICAgZG9jdW1lbnQgPSAkZG9jdW1lbnRbMF0gfHwge30sXHJcbiAgICAgICAgZG9jdW1lbnRNb2RlID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlLFxyXG4gICAgICAgIHZlbmRvclByZWZpeCxcclxuICAgICAgICB2ZW5kb3JSZWdleCA9IC9eKE1venx3ZWJraXR8T3xtcykoPz1bQS1aXSkvLFxyXG4gICAgICAgIGJvZHlTdHlsZSA9IGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5zdHlsZSxcclxuICAgICAgICB0cmFuc2l0aW9ucyA9IGZhbHNlLFxyXG4gICAgICAgIGFuaW1hdGlvbnMgPSBmYWxzZSxcclxuICAgICAgICBtYXRjaDtcclxuXHJcbiAgICBpZiAoYm9keVN0eWxlKSB7XHJcbiAgICAgIGZvcih2YXIgcHJvcCBpbiBib2R5U3R5bGUpIHtcclxuICAgICAgICBpZihtYXRjaCA9IHZlbmRvclJlZ2V4LmV4ZWMocHJvcCkpIHtcclxuICAgICAgICAgIHZlbmRvclByZWZpeCA9IG1hdGNoWzBdO1xyXG4gICAgICAgICAgdmVuZG9yUHJlZml4ID0gdmVuZG9yUHJlZml4LnN1YnN0cigwLCAxKS50b1VwcGVyQ2FzZSgpICsgdmVuZG9yUHJlZml4LnN1YnN0cigxKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYoIXZlbmRvclByZWZpeCkge1xyXG4gICAgICAgIHZlbmRvclByZWZpeCA9ICgnV2Via2l0T3BhY2l0eScgaW4gYm9keVN0eWxlKSAmJiAnd2Via2l0JztcclxuICAgICAgfVxyXG5cclxuICAgICAgdHJhbnNpdGlvbnMgPSAhISgoJ3RyYW5zaXRpb24nIGluIGJvZHlTdHlsZSkgfHwgKHZlbmRvclByZWZpeCArICdUcmFuc2l0aW9uJyBpbiBib2R5U3R5bGUpKTtcclxuICAgICAgYW5pbWF0aW9ucyAgPSAhISgoJ2FuaW1hdGlvbicgaW4gYm9keVN0eWxlKSB8fCAodmVuZG9yUHJlZml4ICsgJ0FuaW1hdGlvbicgaW4gYm9keVN0eWxlKSk7XHJcblxyXG4gICAgICBpZiAoYW5kcm9pZCAmJiAoIXRyYW5zaXRpb25zfHwhYW5pbWF0aW9ucykpIHtcclxuICAgICAgICB0cmFuc2l0aW9ucyA9IGlzU3RyaW5nKGRvY3VtZW50LmJvZHkuc3R5bGUud2Via2l0VHJhbnNpdGlvbik7XHJcbiAgICAgICAgYW5pbWF0aW9ucyA9IGlzU3RyaW5nKGRvY3VtZW50LmJvZHkuc3R5bGUud2Via2l0QW5pbWF0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAvLyBBbmRyb2lkIGhhcyBoaXN0b3J5LnB1c2hTdGF0ZSwgYnV0IGl0IGRvZXMgbm90IHVwZGF0ZSBsb2NhdGlvbiBjb3JyZWN0bHlcclxuICAgICAgLy8gc28gbGV0J3Mgbm90IHVzZSB0aGUgaGlzdG9yeSBBUEkgYXQgYWxsLlxyXG4gICAgICAvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYW5kcm9pZC9pc3N1ZXMvZGV0YWlsP2lkPTE3NDcxXHJcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzkwNFxyXG5cclxuICAgICAgLy8gb2xkZXIgd2Via2l0IGJyb3dzZXIgKDUzMy45KSBvbiBCb3hlZSBib3ggaGFzIGV4YWN0bHkgdGhlIHNhbWUgcHJvYmxlbSBhcyBBbmRyb2lkIGhhc1xyXG4gICAgICAvLyBzbyBsZXQncyBub3QgdXNlIHRoZSBoaXN0b3J5IEFQSSBhbHNvXHJcbiAgICAgIC8vIFdlIGFyZSBwdXJwb3NlZnVsbHkgdXNpbmcgYCEoYW5kcm9pZCA8IDQpYCB0byBjb3ZlciB0aGUgY2FzZSB3aGVuIGBhbmRyb2lkYCBpcyB1bmRlZmluZWRcclxuICAgICAgLy8ganNoaW50IC1XMDE4XHJcbiAgICAgIGhpc3Rvcnk6ICEhKCR3aW5kb3cuaGlzdG9yeSAmJiAkd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlICYmICEoYW5kcm9pZCA8IDQpICYmICFib3hlZSksXHJcbiAgICAgIC8vIGpzaGludCArVzAxOFxyXG4gICAgICBoYXNoY2hhbmdlOiAnb25oYXNoY2hhbmdlJyBpbiAkd2luZG93ICYmXHJcbiAgICAgICAgICAgICAgICAgIC8vIElFOCBjb21wYXRpYmxlIG1vZGUgbGllc1xyXG4gICAgICAgICAgICAgICAgICAoIWRvY3VtZW50TW9kZSB8fCBkb2N1bWVudE1vZGUgPiA3KSxcclxuICAgICAgaGFzRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gSUU5IGltcGxlbWVudHMgJ2lucHV0JyBldmVudCBpdCdzIHNvIGZ1YmFyZWQgdGhhdCB3ZSByYXRoZXIgcHJldGVuZCB0aGF0IGl0IGRvZXNuJ3QgaGF2ZVxyXG4gICAgICAgIC8vIGl0LiBJbiBwYXJ0aWN1bGFyIHRoZSBldmVudCBpcyBub3QgZmlyZWQgd2hlbiBiYWNrc3BhY2Ugb3IgZGVsZXRlIGtleSBhcmUgcHJlc3NlZCBvclxyXG4gICAgICAgIC8vIHdoZW4gY3V0IG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQuXHJcbiAgICAgICAgaWYgKGV2ZW50ID09ICdpbnB1dCcgJiYgbXNpZSA9PSA5KSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChldmVudFN1cHBvcnRbZXZlbnRdKSkge1xyXG4gICAgICAgICAgdmFyIGRpdkVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgZXZlbnRTdXBwb3J0W2V2ZW50XSA9ICdvbicgKyBldmVudCBpbiBkaXZFbG07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZXZlbnRTdXBwb3J0W2V2ZW50XTtcclxuICAgICAgfSxcclxuICAgICAgY3NwOiBjc3AoKSxcclxuICAgICAgdmVuZG9yUHJlZml4OiB2ZW5kb3JQcmVmaXgsXHJcbiAgICAgIHRyYW5zaXRpb25zIDogdHJhbnNpdGlvbnMsXHJcbiAgICAgIGFuaW1hdGlvbnMgOiBhbmltYXRpb25zLFxyXG4gICAgICBhbmRyb2lkOiBhbmRyb2lkLFxyXG4gICAgICBtc2llIDogbXNpZSxcclxuICAgICAgbXNpZURvY3VtZW50TW9kZTogZG9jdW1lbnRNb2RlXHJcbiAgICB9O1xyXG4gIH1dO1xyXG59XHJcblxyXG52YXIgJGNvbXBpbGVNaW5FcnIgPSBtaW5FcnIoJyRjb21waWxlJyk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHRlbXBsYXRlUmVxdWVzdFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGAkdGVtcGxhdGVSZXF1ZXN0YCBzZXJ2aWNlIGRvd25sb2FkcyB0aGUgcHJvdmlkZWQgdGVtcGxhdGUgdXNpbmcgYCRodHRwYCBhbmQsIHVwb24gc3VjY2VzcyxcclxuICogc3RvcmVzIHRoZSBjb250ZW50cyBpbnNpZGUgb2YgYCR0ZW1wbGF0ZUNhY2hlYC4gSWYgdGhlIEhUVFAgcmVxdWVzdCBmYWlscyBvciB0aGUgcmVzcG9uc2UgZGF0YVxyXG4gKiBvZiB0aGUgSFRUUCByZXF1ZXN0IGlzIGVtcHR5IHRoZW4gYSBgJGNvbXBpbGVgIGVycm9yIHdpbGwgYmUgdGhyb3duICh0aGUgZXhjZXB0aW9uIGNhbiBiZSB0aHdhcnRlZFxyXG4gKiBieSBzZXR0aW5nIHRoZSAybmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiB0byB0cnVlKS5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHRwbCBUaGUgSFRUUCByZXF1ZXN0IHRlbXBsYXRlIFVSTFxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBpZ25vcmVSZXF1ZXN0RXJyb3IgV2hldGhlciBvciBub3QgdG8gaWdub3JlIHRoZSBleGNlcHRpb24gd2hlbiB0aGUgcmVxdWVzdCBmYWlscyBvciB0aGUgdGVtcGxhdGUgaXMgZW1wdHlcclxuICpcclxuICogQHJldHVybiB7UHJvbWlzZX0gdGhlIEhUVFAgUHJvbWlzZSBmb3IgdGhlIGdpdmVuLlxyXG4gKlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gdG90YWxQZW5kaW5nUmVxdWVzdHMgdG90YWwgYW1vdW50IG9mIHBlbmRpbmcgdGVtcGxhdGUgcmVxdWVzdHMgYmVpbmcgZG93bmxvYWRlZC5cclxuICovXHJcbmZ1bmN0aW9uICRUZW1wbGF0ZVJlcXVlc3RQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyR0ZW1wbGF0ZUNhY2hlJywgJyRodHRwJywgJyRxJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkcSkge1xyXG4gICAgZnVuY3Rpb24gaGFuZGxlUmVxdWVzdEZuKHRwbCwgaWdub3JlUmVxdWVzdEVycm9yKSB7XHJcbiAgICAgIHZhciBzZWxmID0gaGFuZGxlUmVxdWVzdEZuO1xyXG4gICAgICBzZWxmLnRvdGFsUGVuZGluZ1JlcXVlc3RzKys7XHJcblxyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KHRwbCwgeyBjYWNoZSA6ICR0ZW1wbGF0ZUNhY2hlIH0pXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgIHZhciBodG1sID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgIGlmKCFodG1sIHx8IGh0bWwubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcigpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHNlbGYudG90YWxQZW5kaW5nUmVxdWVzdHMtLTtcclxuICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCh0cGwsIGh0bWwpO1xyXG4gICAgICAgICAgcmV0dXJuIGh0bWw7XHJcbiAgICAgICAgfSwgaGFuZGxlRXJyb3IpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tO1xyXG4gICAgICAgIGlmICghaWdub3JlUmVxdWVzdEVycm9yKSB7XHJcbiAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndHBsb2FkJywgJ0ZhaWxlZCB0byBsb2FkIHRlbXBsYXRlOiB7MH0nLCB0cGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJHEucmVqZWN0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVSZXF1ZXN0Rm4udG90YWxQZW5kaW5nUmVxdWVzdHMgPSAwO1xyXG5cclxuICAgIHJldHVybiBoYW5kbGVSZXF1ZXN0Rm47XHJcbiAgfV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uICQkVGVzdGFiaWxpdHlQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJGJyb3dzZXInLCAnJGxvY2F0aW9uJyxcclxuICAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICAgJGJyb3dzZXIsICAgJGxvY2F0aW9uKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSAkdGVzdGFiaWxpdHlcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFRoZSBwcml2YXRlICQkdGVzdGFiaWxpdHkgc2VydmljZSBwcm92aWRlcyBhIGNvbGxlY3Rpb24gb2YgbWV0aG9kcyBmb3IgdXNlIHdoZW4gZGVidWdnaW5nXHJcbiAgICAgKiBvciBieSBhdXRvbWF0ZWQgdGVzdCBhbmQgZGVidWdnaW5nIHRvb2xzLlxyXG4gICAgICovXHJcbiAgICB2YXIgdGVzdGFiaWxpdHkgPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZmluZEJpbmRpbmdzXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgYXJlIGJvdW5kICh2aWEgbmctYmluZCBvciB7e319KVxyXG4gICAgICogdG8gZXhwcmVzc2lvbnMgbWF0Y2hpbmcgdGhlIGlucHV0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCByb290IHRvIHNlYXJjaCBmcm9tLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gVGhlIGJpbmRpbmcgZXhwcmVzc2lvbiB0byBtYXRjaC5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X2V4YWN0TWF0Y2ggSWYgdHJ1ZSwgb25seSByZXR1cm5zIGV4YWN0IG1hdGNoZXNcclxuICAgICAqICAgICBmb3IgdGhlIGV4cHJlc3Npb24uIEZpbHRlcnMgYW5kIHdoaXRlc3BhY2UgYXJlIGlnbm9yZWQuXHJcbiAgICAgKi9cclxuICAgIHRlc3RhYmlsaXR5LmZpbmRCaW5kaW5ncyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGV4cHJlc3Npb24sIG9wdF9leGFjdE1hdGNoKSB7XHJcbiAgICAgIHZhciBiaW5kaW5ncyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmctYmluZGluZycpO1xyXG4gICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xyXG4gICAgICBmb3JFYWNoKGJpbmRpbmdzLCBmdW5jdGlvbihiaW5kaW5nKSB7XHJcbiAgICAgICAgdmFyIGRhdGFCaW5kaW5nID0gYW5ndWxhci5lbGVtZW50KGJpbmRpbmcpLmRhdGEoJyRiaW5kaW5nJyk7XHJcbiAgICAgICAgaWYgKGRhdGFCaW5kaW5nKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKGRhdGFCaW5kaW5nLCBmdW5jdGlvbihiaW5kaW5nTmFtZSkge1xyXG4gICAgICAgICAgICBpZiAob3B0X2V4YWN0TWF0Y2gpIHtcclxuICAgICAgICAgICAgICB2YXIgbWF0Y2hlciA9IG5ldyBSZWdFeHAoJyhefFxcXFxzKScgKyBleHByZXNzaW9uICsgJyhcXFxcc3xcXFxcfHwkKScpO1xyXG4gICAgICAgICAgICAgIGlmIChtYXRjaGVyLnRlc3QoYmluZGluZ05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goYmluZGluZyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmIChiaW5kaW5nTmFtZS5pbmRleE9mKGV4cHJlc3Npb24pICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goYmluZGluZyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbWF0Y2hlcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSAkJHRlc3RhYmlsaXR5I2ZpbmRNb2RlbHNcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBhcmUgdHdvLXdheSBmb3VuZCB2aWEgbmctbW9kZWwgdG9cclxuICAgICAqIGV4cHJlc3Npb25zIG1hdGNoaW5nIHRoZSBpbnB1dC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgcm9vdCB0byBzZWFyY2ggZnJvbS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFRoZSBtb2RlbCBleHByZXNzaW9uIHRvIG1hdGNoLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRfZXhhY3RNYXRjaCBJZiB0cnVlLCBvbmx5IHJldHVybnMgZXhhY3QgbWF0Y2hlc1xyXG4gICAgICogICAgIGZvciB0aGUgZXhwcmVzc2lvbi5cclxuICAgICAqL1xyXG4gICAgdGVzdGFiaWxpdHkuZmluZE1vZGVscyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGV4cHJlc3Npb24sIG9wdF9leGFjdE1hdGNoKSB7XHJcbiAgICAgIHZhciBwcmVmaXhlcyA9IFsnbmctJywgJ2RhdGEtbmctJywgJ25nXFxcXDonXTtcclxuICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBwcmVmaXhlcy5sZW5ndGg7ICsrcCkge1xyXG4gICAgICAgIHZhciBhdHRyaWJ1dGVFcXVhbHMgPSBvcHRfZXhhY3RNYXRjaCA/ICc9JyA6ICcqPSc7XHJcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gJ1snICsgcHJlZml4ZXNbcF0gKyAnbW9kZWwnICsgYXR0cmlidXRlRXF1YWxzICsgJ1wiJyArIGV4cHJlc3Npb24gKyAnXCJdJztcclxuICAgICAgICB2YXIgZWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgIHJldHVybiBlbGVtZW50cztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSAkJHRlc3RhYmlsaXR5I2dldExvY2F0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGN1dCBmb3IgZ2V0dGluZyB0aGUgbG9jYXRpb24gaW4gYSBicm93c2VyIGFnbm9zdGljIHdheS4gUmV0dXJuc1xyXG4gICAgICogICAgIHRoZSBwYXRoLCBzZWFyY2gsIGFuZCBoYXNoLiAoZS5nLiAvcGF0aD9hPWIjaGFzaClcclxuICAgICAqL1xyXG4gICAgdGVzdGFiaWxpdHkuZ2V0TG9jYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuICRsb2NhdGlvbi51cmwoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSAkJHRlc3RhYmlsaXR5I3NldExvY2F0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGN1dCBmb3IgbmF2aWdhdGluZyB0byBhIGxvY2F0aW9uIHdpdGhvdXQgZG9pbmcgYSBmdWxsIHBhZ2UgcmVsb2FkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGxvY2F0aW9uIHVybCAocGF0aCwgc2VhcmNoIGFuZCBoYXNoLFxyXG4gICAgICogICAgIGUuZy4gL3BhdGg/YT1iI2hhc2gpIHRvIGdvIHRvLlxyXG4gICAgICovXHJcbiAgICB0ZXN0YWJpbGl0eS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICBpZiAodXJsICE9PSAkbG9jYXRpb24udXJsKCkpIHtcclxuICAgICAgICAkbG9jYXRpb24udXJsKHVybCk7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSAkJHRlc3RhYmlsaXR5I3doZW5TdGFibGVcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENhbGxzIHRoZSBjYWxsYmFjayB3aGVuICR0aW1lb3V0IGFuZCAkaHR0cCByZXF1ZXN0cyBhcmUgY29tcGxldGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIHRlc3RhYmlsaXR5LndoZW5TdGFibGUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAkYnJvd3Nlci5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzKGNhbGxiYWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRlc3RhYmlsaXR5O1xyXG4gIH1dO1xyXG59XHJcblxyXG5mdW5jdGlvbiAkVGltZW91dFByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckcScsICckJHEnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLFxyXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkYnJvd3NlciwgICAkcSwgICAkJHEsICAgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcclxuICAgIHZhciBkZWZlcnJlZHMgPSB7fTtcclxuXHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgICogQG5hbWUgJHRpbWVvdXRcclxuICAgICAgKlxyXG4gICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAqIEFuZ3VsYXIncyB3cmFwcGVyIGZvciBgd2luZG93LnNldFRpbWVvdXRgLiBUaGUgYGZuYCBmdW5jdGlvbiBpcyB3cmFwcGVkIGludG8gYSB0cnkvY2F0Y2hcclxuICAgICAgKiBibG9jayBhbmQgZGVsZWdhdGVzIGFueSBleGNlcHRpb25zIHRvXHJcbiAgICAgICoge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxyXG4gICAgICAqXHJcbiAgICAgICogVGhlIHJldHVybiB2YWx1ZSBvZiByZWdpc3RlcmluZyBhIHRpbWVvdXQgZnVuY3Rpb24gaXMgYSBwcm9taXNlLCB3aGljaCB3aWxsIGJlIHJlc29sdmVkIHdoZW5cclxuICAgICAgKiB0aGUgdGltZW91dCBpcyByZWFjaGVkIGFuZCB0aGUgdGltZW91dCBmdW5jdGlvbiBpcyBleGVjdXRlZC5cclxuICAgICAgKlxyXG4gICAgICAqIFRvIGNhbmNlbCBhIHRpbWVvdXQgcmVxdWVzdCwgY2FsbCBgJHRpbWVvdXQuY2FuY2VsKHByb21pc2UpYC5cclxuICAgICAgKlxyXG4gICAgICAqIEluIHRlc3RzIHlvdSBjYW4gdXNlIHtAbGluayBuZ01vY2suJHRpbWVvdXQgYCR0aW1lb3V0LmZsdXNoKClgfSB0b1xyXG4gICAgICAqIHN5bmNocm9ub3VzbHkgZmx1c2ggdGhlIHF1ZXVlIG9mIGRlZmVycmVkIGZ1bmN0aW9ucy5cclxuICAgICAgKlxyXG4gICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiwgd2hvc2UgZXhlY3V0aW9uIHNob3VsZCBiZSBkZWxheWVkLlxyXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gW2RlbGF5PTBdIERlbGF5IGluIG1pbGxpc2Vjb25kcy5cclxuICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW52b2tlQXBwbHk9dHJ1ZV0gSWYgc2V0IHRvIGBmYWxzZWAgc2tpcHMgbW9kZWwgZGlydHkgY2hlY2tpbmcsIG90aGVyd2lzZVxyXG4gICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxyXG4gICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aGVuIHRoZSB0aW1lb3V0IGlzIHJlYWNoZWQuIFRoZSB2YWx1ZSB0aGlzXHJcbiAgICAgICogICBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCBpcyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBgZm5gIGZ1bmN0aW9uLlxyXG4gICAgICAqXHJcbiAgICAgICovXHJcbiAgICBmdW5jdGlvbiB0aW1lb3V0KGZuLCBkZWxheSwgaW52b2tlQXBwbHkpIHtcclxuICAgICAgdmFyIHNraXBBcHBseSA9IChpc0RlZmluZWQoaW52b2tlQXBwbHkpICYmICFpbnZva2VBcHBseSksXHJcbiAgICAgICAgICBkZWZlcnJlZCA9IChza2lwQXBwbHkgPyAkJHEgOiAkcSkuZGVmZXIoKSxcclxuICAgICAgICAgIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlLFxyXG4gICAgICAgICAgdGltZW91dElkO1xyXG5cclxuICAgICAgdGltZW91dElkID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZm4oKSk7XHJcbiAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZSk7XHJcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICBkZWxldGUgZGVmZXJyZWRzW3Byb21pc2UuJCR0aW1lb3V0SWRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgIH0sIGRlbGF5KTtcclxuXHJcbiAgICAgIHByb21pc2UuJCR0aW1lb3V0SWQgPSB0aW1lb3V0SWQ7XHJcbiAgICAgIGRlZmVycmVkc1t0aW1lb3V0SWRdID0gZGVmZXJyZWQ7XHJcblxyXG4gICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgKiBAbmFtZSAkdGltZW91dCNjYW5jZWxcclxuICAgICAgKlxyXG4gICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLiBBcyBhIHJlc3VsdCBvZiB0aGlzLCB0aGUgcHJvbWlzZSB3aWxsIGJlXHJcbiAgICAgICogcmVzb2x2ZWQgd2l0aCBhIHJlamVjdGlvbi5cclxuICAgICAgKlxyXG4gICAgICAqIEBwYXJhbSB7UHJvbWlzZT19IHByb21pc2UgUHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYCR0aW1lb3V0YCBmdW5jdGlvbi5cclxuICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgaGFzbid0IGV4ZWN1dGVkIHlldCBhbmQgd2FzIHN1Y2Nlc3NmdWxseVxyXG4gICAgICAqICAgY2FuY2VsZWQuXHJcbiAgICAgICovXHJcbiAgICB0aW1lb3V0LmNhbmNlbCA9IGZ1bmN0aW9uKHByb21pc2UpIHtcclxuICAgICAgaWYgKHByb21pc2UgJiYgcHJvbWlzZS4kJHRpbWVvdXRJZCBpbiBkZWZlcnJlZHMpIHtcclxuICAgICAgICBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF0ucmVqZWN0KCdjYW5jZWxlZCcpO1xyXG4gICAgICAgIGRlbGV0ZSBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF07XHJcbiAgICAgICAgcmV0dXJuICRicm93c2VyLmRlZmVyLmNhbmNlbChwcm9taXNlLiQkdGltZW91dElkKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB0aW1lb3V0O1xyXG4gIH1dO1xyXG59XHJcblxyXG4vLyBOT1RFOiAgVGhlIHVzYWdlIG9mIHdpbmRvdyBhbmQgZG9jdW1lbnQgaW5zdGVhZCBvZiAkd2luZG93IGFuZCAkZG9jdW1lbnQgaGVyZSBpc1xyXG4vLyBkZWxpYmVyYXRlLiAgVGhpcyBzZXJ2aWNlIGRlcGVuZHMgb24gdGhlIHNwZWNpZmljIGJlaGF2aW9yIG9mIGFuY2hvciBub2RlcyBjcmVhdGVkIGJ5IHRoZVxyXG4vLyBicm93c2VyIChyZXNvbHZpbmcgYW5kIHBhcnNpbmcgVVJMcykgdGhhdCBpcyB1bmxpa2VseSB0byBiZSBwcm92aWRlZCBieSBtb2NrIG9iamVjdHMgYW5kXHJcbi8vIGNhdXNlIHVzIHRvIGJyZWFrIHRlc3RzLiAgSW4gYWRkaXRpb24sIHdoZW4gdGhlIGJyb3dzZXIgcmVzb2x2ZXMgYSBVUkwgZm9yIFhIUiwgaXRcclxuLy8gZG9lc24ndCBrbm93IGFib3V0IG1vY2tlZCBsb2NhdGlvbnMgYW5kIHJlc29sdmVzIFVSTHMgdG8gdGhlIHJlYWwgZG9jdW1lbnQgLSB3aGljaCBpc1xyXG4vLyBleGFjdGx5IHRoZSBiZWhhdmlvciBuZWVkZWQgaGVyZS4gIFRoZXJlIGlzIGxpdHRsZSB2YWx1ZSBpcyBtb2NraW5nIHRoZXNlIG91dCBmb3IgdGhpc1xyXG4vLyBzZXJ2aWNlLlxyXG52YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxudmFyIG9yaWdpblVybCA9IHVybFJlc29sdmUod2luZG93LmxvY2F0aW9uLmhyZWYsIHRydWUpO1xyXG5cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBJbXBsZW1lbnRhdGlvbiBOb3RlcyBmb3Igbm9uLUlFIGJyb3dzZXJzXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogQXNzaWduaW5nIGEgVVJMIHRvIHRoZSBocmVmIHByb3BlcnR5IG9mIGFuIGFuY2hvciBET00gbm9kZSwgZXZlbiBvbmUgYXR0YWNoZWQgdG8gdGhlIERPTSxcclxuICogcmVzdWx0cyBib3RoIGluIHRoZSBub3JtYWxpemluZyBhbmQgcGFyc2luZyBvZiB0aGUgVVJMLiAgTm9ybWFsaXppbmcgbWVhbnMgdGhhdCBhIHJlbGF0aXZlXHJcbiAqIFVSTCB3aWxsIGJlIHJlc29sdmVkIGludG8gYW4gYWJzb2x1dGUgVVJMIGluIHRoZSBjb250ZXh0IG9mIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudC5cclxuICogUGFyc2luZyBtZWFucyB0aGF0IHRoZSBhbmNob3Igbm9kZSdzIGhvc3QsIGhvc3RuYW1lLCBwcm90b2NvbCwgcG9ydCwgcGF0aG5hbWUgYW5kIHJlbGF0ZWRcclxuICogcHJvcGVydGllcyBhcmUgYWxsIHBvcHVsYXRlZCB0byByZWZsZWN0IHRoZSBub3JtYWxpemVkIFVSTC4gIFRoaXMgYXBwcm9hY2ggaGFzIHdpZGVcclxuICogY29tcGF0aWJpbGl0eSAtIFNhZmFyaSAxKywgTW96aWxsYSAxKywgT3BlcmEgNyssZSBldGMuICBTZWVcclxuICogaHR0cDovL3d3dy5hcHRhbmEuY29tL3JlZmVyZW5jZS9odG1sL2FwaS9IVE1MQW5jaG9yRWxlbWVudC5odG1sXHJcbiAqXHJcbiAqIEltcGxlbWVudGF0aW9uIE5vdGVzIGZvciBJRVxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogSUUgPj0gOCBhbmQgPD0gMTAgbm9ybWFsaXplcyB0aGUgVVJMIHdoZW4gYXNzaWduZWQgdG8gdGhlIGFuY2hvciBub2RlIHNpbWlsYXIgdG8gdGhlIG90aGVyXHJcbiAqIGJyb3dzZXJzLiAgSG93ZXZlciwgdGhlIHBhcnNlZCBjb21wb25lbnRzIHdpbGwgbm90IGJlIHNldCBpZiB0aGUgVVJMIGFzc2lnbmVkIGRpZCBub3Qgc3BlY2lmeVxyXG4gKiB0aGVtLiAgKGUuZy4gaWYgeW91IGFzc2lnbiBhLmhyZWYgPSBcImZvb1wiLCB0aGVuIGEucHJvdG9jb2wsIGEuaG9zdCwgZXRjLiB3aWxsIGJlIGVtcHR5LikgIFdlXHJcbiAqIHdvcmsgYXJvdW5kIHRoYXQgYnkgcGVyZm9ybWluZyB0aGUgcGFyc2luZyBpbiBhIDJuZCBzdGVwIGJ5IHRha2luZyBhIHByZXZpb3VzbHkgbm9ybWFsaXplZFxyXG4gKiBVUkwgKGUuZy4gYnkgYXNzaWduaW5nIHRvIGEuaHJlZikgYW5kIGFzc2lnbmluZyBpdCBhLmhyZWYgYWdhaW4uICBUaGlzIGNvcnJlY3RseSBwb3B1bGF0ZXMgdGhlXHJcbiAqIHByb3BlcnRpZXMgc3VjaCBhcyBwcm90b2NvbCwgaG9zdG5hbWUsIHBvcnQsIGV0Yy5cclxuICpcclxuICogSUU3IGRvZXMgbm90IG5vcm1hbGl6ZSB0aGUgVVJMIHdoZW4gYXNzaWduZWQgdG8gYW4gYW5jaG9yIG5vZGUuICAoQXBwYXJlbnRseSwgaXQgZG9lcywgaWYgb25lXHJcbiAqIHVzZXMgdGhlIGlubmVyIEhUTUwgYXBwcm9hY2ggdG8gYXNzaWduIHRoZSBVUkwgYXMgcGFydCBvZiBhbiBIVE1MIHNuaXBwZXQgLVxyXG4gKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NzI3MjkpICBIb3dldmVyLCBzZXR0aW5nIGltZ1tzcmNdIGRvZXMgbm9ybWFsaXplIHRoZSBVUkwuXHJcbiAqIFVuZm9ydHVuYXRlbHksIHNldHRpbmcgaW1nW3NyY10gdG8gc29tZXRoaW5nIGxpa2UgXCJqYXZhc2NyaXB0OmZvb1wiIG9uIElFIHRocm93cyBhbiBleGNlcHRpb24uXHJcbiAqIFNpbmNlIHRoZSBwcmltYXJ5IHVzYWdlIGZvciBub3JtYWxpemluZyBVUkxzIGlzIHRvIHNhbml0aXplIHN1Y2ggVVJMcywgd2UgY2FuJ3QgdXNlIHRoYXRcclxuICogbWV0aG9kIGFuZCBJRSA8IDggaXMgdW5zdXBwb3J0ZWQuXHJcbiAqXHJcbiAqIFJlZmVyZW5jZXM6XHJcbiAqICAgaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTEFuY2hvckVsZW1lbnRcclxuICogICBodHRwOi8vd3d3LmFwdGFuYS5jb20vcmVmZXJlbmNlL2h0bWwvYXBpL0hUTUxBbmNob3JFbGVtZW50Lmh0bWxcclxuICogICBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcclxuICogICBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMjkwMlxyXG4gKiAgIGh0dHA6Ly9qYW1lcy5wYWRvbHNleS5jb20vamF2YXNjcmlwdC9wYXJzaW5nLXVybHMtd2l0aC10aGUtZG9tL1xyXG4gKlxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkLlxyXG4gKiBAZGVzY3JpcHRpb24gTm9ybWFsaXplcyBhbmQgcGFyc2VzIGEgVVJMLlxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBSZXR1cm5zIHRoZSBub3JtYWxpemVkIFVSTCBhcyBhIGRpY3Rpb25hcnkuXHJcbiAqXHJcbiAqICAgfCBtZW1iZXIgbmFtZSAgIHwgRGVzY3JpcHRpb24gICAgfFxyXG4gKiAgIHwtLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXxcclxuICogICB8IGhyZWYgICAgICAgICAgfCBBIG5vcm1hbGl6ZWQgdmVyc2lvbiBvZiB0aGUgcHJvdmlkZWQgVVJMIGlmIGl0IHdhcyBub3QgYW4gYWJzb2x1dGUgVVJMIHxcclxuICogICB8IHByb3RvY29sICAgICAgfCBUaGUgcHJvdG9jb2wgaW5jbHVkaW5nIHRoZSB0cmFpbGluZyBjb2xvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogICB8IGhvc3QgICAgICAgICAgfCBUaGUgaG9zdCBhbmQgcG9ydCAoaWYgdGhlIHBvcnQgaXMgbm9uLWRlZmF1bHQpIG9mIHRoZSBub3JtYWxpemVkVXJsICAgIHxcclxuICogICB8IHNlYXJjaCAgICAgICAgfCBUaGUgc2VhcmNoIHBhcmFtcywgbWludXMgdGhlIHF1ZXN0aW9uIG1hcmsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogICB8IGhhc2ggICAgICAgICAgfCBUaGUgaGFzaCBzdHJpbmcsIG1pbnVzIHRoZSBoYXNoIHN5bWJvbFxyXG4gKiAgIHwgaG9zdG5hbWUgICAgICB8IFRoZSBob3N0bmFtZVxyXG4gKiAgIHwgcG9ydCAgICAgICAgICB8IFRoZSBwb3J0LCB3aXRob3V0IFwiOlwiXHJcbiAqICAgfCBwYXRobmFtZSAgICAgIHwgVGhlIHBhdGhuYW1lLCBiZWdpbm5pbmcgd2l0aCBcIi9cIlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gdXJsUmVzb2x2ZSh1cmwsIGJhc2UpIHtcclxuICB2YXIgaHJlZiA9IHVybDtcclxuXHJcbiAgaWYgKG1zaWUpIHtcclxuICAgIC8vIE5vcm1hbGl6ZSBiZWZvcmUgcGFyc2UuICBSZWZlciBJbXBsZW1lbnRhdGlvbiBOb3RlcyBvbiB3aHkgdGhpcyBpc1xyXG4gICAgLy8gZG9uZSBpbiB0d28gc3RlcHMgb24gSUUuXHJcbiAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGhyZWYpO1xyXG4gICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7XHJcbiAgfVxyXG5cclxuICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcclxuXHJcbiAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xyXG4gIHJldHVybiB7XHJcbiAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxyXG4gICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcclxuICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXHJcbiAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXHJcbiAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxyXG4gICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxyXG4gICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcclxuICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpXHJcbiAgICAgID8gdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcclxuICAgICAgOiAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBhIHJlcXVlc3QgVVJMIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGEgc2FtZS1vcmlnaW4gcmVxdWVzdCBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVxdWVzdFVybCBUaGUgdXJsIG9mIHRoZSByZXF1ZXN0IGFzIGEgc3RyaW5nIHRoYXQgd2lsbCBiZSByZXNvbHZlZFxyXG4gKiBvciBhIHBhcnNlZCBVUkwgb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcmVxdWVzdCBpcyBmb3IgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudC5cclxuICovXHJcbmZ1bmN0aW9uIHVybElzU2FtZU9yaWdpbihyZXF1ZXN0VXJsKSB7XHJcbiAgdmFyIHBhcnNlZCA9IChpc1N0cmluZyhyZXF1ZXN0VXJsKSkgPyB1cmxSZXNvbHZlKHJlcXVlc3RVcmwpIDogcmVxdWVzdFVybDtcclxuICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVXJsLnByb3RvY29sICYmXHJcbiAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVXJsLmhvc3QpO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHdpbmRvd1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSByZWZlcmVuY2UgdG8gdGhlIGJyb3dzZXIncyBgd2luZG93YCBvYmplY3QuIFdoaWxlIGB3aW5kb3dgXHJcbiAqIGlzIGdsb2JhbGx5IGF2YWlsYWJsZSBpbiBKYXZhU2NyaXB0LCBpdCBjYXVzZXMgdGVzdGFiaWxpdHkgcHJvYmxlbXMsIGJlY2F1c2VcclxuICogaXQgaXMgYSBnbG9iYWwgdmFyaWFibGUuIEluIGFuZ3VsYXIgd2UgYWx3YXlzIHJlZmVyIHRvIGl0IHRocm91Z2ggdGhlXHJcbiAqIGAkd2luZG93YCBzZXJ2aWNlLCBzbyBpdCBtYXkgYmUgb3ZlcnJpZGRlbiwgcmVtb3ZlZCBvciBtb2NrZWQgZm9yIHRlc3RpbmcuXHJcbiAqXHJcbiAqIEV4cHJlc3Npb25zLCBsaWtlIHRoZSBvbmUgZGVmaW5lZCBmb3IgdGhlIGBuZ0NsaWNrYCBkaXJlY3RpdmUgaW4gdGhlIGV4YW1wbGVcclxuICogYmVsb3csIGFyZSBldmFsdWF0ZWQgd2l0aCByZXNwZWN0IHRvIHRoZSBjdXJyZW50IHNjb3BlLiAgVGhlcmVmb3JlLCB0aGVyZSBpc1xyXG4gKiBubyByaXNrIG9mIGluYWR2ZXJ0ZW50bHkgY29kaW5nIGluIGEgZGVwZW5kZW5jeSBvbiBhIGdsb2JhbCB2YWx1ZSBpbiBzdWNoIGFuXHJcbiAqIGV4cHJlc3Npb24uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cIndpbmRvd0V4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3dpbmRvd0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckd2luZG93JywgZnVuY3Rpb24gKCRzY29wZSwgJHdpbmRvdykge1xyXG4gICAgICAgICAgICAgJHNjb3BlLmdyZWV0aW5nID0gJ0hlbGxvLCBXb3JsZCEnO1xyXG4gICAgICAgICAgICAgJHNjb3BlLmRvR3JlZXRpbmcgPSBmdW5jdGlvbihncmVldGluZykge1xyXG4gICAgICAgICAgICAgICAkd2luZG93LmFsZXJ0KGdyZWV0aW5nKTtcclxuICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgfV0pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImdyZWV0aW5nXCIgLz5cclxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImRvR3JlZXRpbmcoZ3JlZXRpbmcpXCI+QUxFUlQ8L2J1dHRvbj5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIGl0KCdzaG91bGQgZGlzcGxheSB0aGUgZ3JlZXRpbmcgaW4gdGhlIGlucHV0IGJveCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgZWxlbWVudChieS5tb2RlbCgnZ3JlZXRpbmcnKSkuc2VuZEtleXMoJ0hlbGxvLCBFMkUgVGVzdHMnKTtcclxuICAgICAgIC8vIElmIHdlIGNsaWNrIHRoZSBidXR0b24gaXQgd2lsbCBibG9jayB0aGUgdGVzdCBydW5uZXJcclxuICAgICAgIC8vIGVsZW1lbnQoJzpidXR0b24nKS5jbGljaygpO1xyXG4gICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uICRXaW5kb3dQcm92aWRlcigpe1xyXG4gIHRoaXMuJGdldCA9IHZhbHVlRm4od2luZG93KTtcclxufVxyXG5cclxuLyogZ2xvYmFsIGN1cnJlbmN5RmlsdGVyOiB0cnVlLFxyXG4gZGF0ZUZpbHRlcjogdHJ1ZSxcclxuIGZpbHRlckZpbHRlcjogdHJ1ZSxcclxuIGpzb25GaWx0ZXI6IHRydWUsXHJcbiBsaW1pdFRvRmlsdGVyOiB0cnVlLFxyXG4gbG93ZXJjYXNlRmlsdGVyOiB0cnVlLFxyXG4gbnVtYmVyRmlsdGVyOiB0cnVlLFxyXG4gb3JkZXJCeUZpbHRlcjogdHJ1ZSxcclxuIHVwcGVyY2FzZUZpbHRlcjogdHJ1ZSxcclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRmaWx0ZXJQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogRmlsdGVycyBhcmUganVzdCBmdW5jdGlvbnMgd2hpY2ggdHJhbnNmb3JtIGlucHV0IHRvIGFuIG91dHB1dC4gSG93ZXZlciBmaWx0ZXJzIG5lZWQgdG8gYmVcclxuICogRGVwZW5kZW5jeSBJbmplY3RlZC4gVG8gYWNoaWV2ZSB0aGlzIGEgZmlsdGVyIGRlZmluaXRpb24gY29uc2lzdHMgb2YgYSBmYWN0b3J5IGZ1bmN0aW9uIHdoaWNoIGlzXHJcbiAqIGFubm90YXRlZCB3aXRoIGRlcGVuZGVuY2llcyBhbmQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIGEgZmlsdGVyIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIC8vIEZpbHRlciByZWdpc3RyYXRpb25cclxuICogICBmdW5jdGlvbiBNeU1vZHVsZSgkcHJvdmlkZSwgJGZpbHRlclByb3ZpZGVyKSB7XHJcbiAqICAgICAvLyBjcmVhdGUgYSBzZXJ2aWNlIHRvIGRlbW9uc3RyYXRlIGluamVjdGlvbiAobm90IGFsd2F5cyBuZWVkZWQpXHJcbiAqICAgICAkcHJvdmlkZS52YWx1ZSgnZ3JlZXQnLCBmdW5jdGlvbihuYW1lKXtcclxuICogICAgICAgcmV0dXJuICdIZWxsbyAnICsgbmFtZSArICchJztcclxuICogICAgIH0pO1xyXG4gKlxyXG4gKiAgICAgLy8gcmVnaXN0ZXIgYSBmaWx0ZXIgZmFjdG9yeSB3aGljaCB1c2VzIHRoZVxyXG4gKiAgICAgLy8gZ3JlZXQgc2VydmljZSB0byBkZW1vbnN0cmF0ZSBESS5cclxuICogICAgICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcignZ3JlZXQnLCBmdW5jdGlvbihncmVldCl7XHJcbiAqICAgICAgIC8vIHJldHVybiB0aGUgZmlsdGVyIGZ1bmN0aW9uIHdoaWNoIHVzZXMgdGhlIGdyZWV0IHNlcnZpY2VcclxuICogICAgICAgLy8gdG8gZ2VuZXJhdGUgc2FsdXRhdGlvblxyXG4gKiAgICAgICByZXR1cm4gZnVuY3Rpb24odGV4dCkge1xyXG4gKiAgICAgICAgIC8vIGZpbHRlcnMgbmVlZCB0byBiZSBmb3JnaXZpbmcgc28gY2hlY2sgaW5wdXQgdmFsaWRpdHlcclxuICogICAgICAgICByZXR1cm4gdGV4dCAmJiBncmVldCh0ZXh0KSB8fCB0ZXh0O1xyXG4gKiAgICAgICB9O1xyXG4gKiAgICAgfSk7XHJcbiAqICAgfVxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGZpbHRlciBmdW5jdGlvbiBpcyByZWdpc3RlcmVkIHdpdGggdGhlIGAkaW5qZWN0b3JgIHVuZGVyIHRoZSBmaWx0ZXIgbmFtZSBzdWZmaXggd2l0aFxyXG4gKiBgRmlsdGVyYC5cclxuICpcclxuICogYGBganNcclxuICogICBpdCgnc2hvdWxkIGJlIHRoZSBzYW1lIGluc3RhbmNlJywgaW5qZWN0KFxyXG4gKiAgICAgZnVuY3Rpb24oJGZpbHRlclByb3ZpZGVyKSB7XHJcbiAqICAgICAgICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcigncmV2ZXJzZScsIGZ1bmN0aW9uKCl7XHJcbiAqICAgICAgICAgcmV0dXJuIC4uLjtcclxuICogICAgICAgfSk7XHJcbiAqICAgICB9LFxyXG4gKiAgICAgZnVuY3Rpb24oJGZpbHRlciwgcmV2ZXJzZUZpbHRlcikge1xyXG4gKiAgICAgICBleHBlY3QoJGZpbHRlcigncmV2ZXJzZScpKS50b0JlKHJldmVyc2VGaWx0ZXIpO1xyXG4gKiAgICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKlxyXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgYW5ndWxhciBmaWx0ZXJzIHdvcmssIGFuZCBob3cgdG8gY3JlYXRlIHlvdXIgb3duIGZpbHRlcnMsIHNlZVxyXG4gKiB7QGxpbmsgZ3VpZGUvZmlsdGVyIEZpbHRlcnN9IGluIHRoZSBBbmd1bGFyIERldmVsb3BlciBHdWlkZS5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJGZpbHRlclxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRmlsdGVycyBhcmUgdXNlZCBmb3IgZm9ybWF0dGluZyBkYXRhIGRpc3BsYXllZCB0byB0aGUgdXNlci5cclxuICpcclxuICogVGhlIGdlbmVyYWwgc3ludGF4IGluIHRlbXBsYXRlcyBpcyBhcyBmb2xsb3dzOlxyXG4gKlxyXG4gKiAgICAgICAgIHt7IGV4cHJlc3Npb24gW3wgZmlsdGVyX25hbWVbOnBhcmFtZXRlcl92YWx1ZV0gLi4uIF0gfX1cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgZmlsdGVyIGZ1bmN0aW9uIHRvIHJldHJpZXZlXHJcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aGUgZmlsdGVyIGZ1bmN0aW9uXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG5hbWU9XCIkZmlsdGVyXCIgbW9kdWxlPVwiZmlsdGVyRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJNYWluQ3RybFwiPlxyXG4gICAgICAgIDxoMz57eyBvcmlnaW5hbFRleHQgfX08L2gzPlxyXG4gICAgICAgIDxoMz57eyBmaWx0ZXJlZFRleHQgfX08L2gzPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG5cclxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdmaWx0ZXJFeGFtcGxlJywgW10pXHJcbiAgICAgIC5jb250cm9sbGVyKCdNYWluQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGZpbHRlcikge1xyXG4gICAgICAgICRzY29wZS5vcmlnaW5hbFRleHQgPSAnaGVsbG8nO1xyXG4gICAgICAgICRzY29wZS5maWx0ZXJlZFRleHQgPSAkZmlsdGVyKCd1cHBlcmNhc2UnKSgkc2NvcGUub3JpZ2luYWxUZXh0KTtcclxuICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAgKi9cclxuJEZpbHRlclByb3ZpZGVyLiRpbmplY3QgPSBbJyRwcm92aWRlJ107XHJcbmZ1bmN0aW9uICRGaWx0ZXJQcm92aWRlcigkcHJvdmlkZSkge1xyXG4gIHZhciBzdWZmaXggPSAnRmlsdGVyJztcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRmaWx0ZXJQcm92aWRlciNyZWdpc3RlclxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBmaWx0ZXIgZnVuY3Rpb24sIG9yIGFuIG9iamVjdCBtYXAgb2YgZmlsdGVycyB3aGVyZVxyXG4gICAqICAgIHRoZSBrZXlzIGFyZSB0aGUgZmlsdGVyIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgZmlsdGVyIGZhY3Rvcmllcy5cclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZWdpc3RlcmVkIGZpbHRlciBpbnN0YW5jZSwgb3IgaWYgYSBtYXAgb2YgZmlsdGVycyB3YXMgcHJvdmlkZWQgdGhlbiBhIG1hcFxyXG4gICAqICAgIG9mIHRoZSByZWdpc3RlcmVkIGZpbHRlciBpbnN0YW5jZXMuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gcmVnaXN0ZXIobmFtZSwgZmFjdG9yeSkge1xyXG4gICAgaWYoaXNPYmplY3QobmFtZSkpIHtcclxuICAgICAgdmFyIGZpbHRlcnMgPSB7fTtcclxuICAgICAgZm9yRWFjaChuYW1lLCBmdW5jdGlvbihmaWx0ZXIsIGtleSkge1xyXG4gICAgICAgIGZpbHRlcnNba2V5XSA9IHJlZ2lzdGVyKGtleSwgZmlsdGVyKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmaWx0ZXJzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICRwcm92aWRlLmZhY3RvcnkobmFtZSArIHN1ZmZpeCwgZmFjdG9yeSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHRoaXMucmVnaXN0ZXIgPSByZWdpc3RlcjtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgIHJldHVybiAkaW5qZWN0b3IuZ2V0KG5hbWUgKyBzdWZmaXgpO1xyXG4gICAgfTtcclxuICB9XTtcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAvKiBnbG9iYWxcclxuICAgIGN1cnJlbmN5RmlsdGVyOiBmYWxzZSxcclxuICAgIGRhdGVGaWx0ZXI6IGZhbHNlLFxyXG4gICAgZmlsdGVyRmlsdGVyOiBmYWxzZSxcclxuICAgIGpzb25GaWx0ZXI6IGZhbHNlLFxyXG4gICAgbGltaXRUb0ZpbHRlcjogZmFsc2UsXHJcbiAgICBsb3dlcmNhc2VGaWx0ZXI6IGZhbHNlLFxyXG4gICAgbnVtYmVyRmlsdGVyOiBmYWxzZSxcclxuICAgIG9yZGVyQnlGaWx0ZXI6IGZhbHNlLFxyXG4gICAgdXBwZXJjYXNlRmlsdGVyOiBmYWxzZSxcclxuICAqL1xyXG5cclxuICByZWdpc3RlcignY3VycmVuY3knLCBjdXJyZW5jeUZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ2RhdGUnLCBkYXRlRmlsdGVyKTtcclxuICByZWdpc3RlcignZmlsdGVyJywgZmlsdGVyRmlsdGVyKTtcclxuICByZWdpc3RlcignanNvbicsIGpzb25GaWx0ZXIpO1xyXG4gIHJlZ2lzdGVyKCdsaW1pdFRvJywgbGltaXRUb0ZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ2xvd2VyY2FzZScsIGxvd2VyY2FzZUZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ251bWJlcicsIG51bWJlckZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ29yZGVyQnknLCBvcmRlckJ5RmlsdGVyKTtcclxuICByZWdpc3RlcigndXBwZXJjYXNlJywgdXBwZXJjYXNlRmlsdGVyKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUgZmlsdGVyXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTZWxlY3RzIGEgc3Vic2V0IG9mIGl0ZW1zIGZyb20gYGFycmF5YCBhbmQgcmV0dXJucyBpdCBhcyBhIG5ldyBhcnJheS5cclxuICpcclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvdXJjZSBhcnJheS5cclxuICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fGZ1bmN0aW9uKCl9IGV4cHJlc3Npb24gVGhlIHByZWRpY2F0ZSB0byBiZSB1c2VkIGZvciBzZWxlY3RpbmcgaXRlbXMgZnJvbVxyXG4gKiAgIGBhcnJheWAuXHJcbiAqXHJcbiAqICAgQ2FuIGJlIG9uZSBvZjpcclxuICpcclxuICogICAtIGBzdHJpbmdgOiBUaGUgc3RyaW5nIGlzIGV2YWx1YXRlZCBhcyBhbiBleHByZXNzaW9uIGFuZCB0aGUgcmVzdWx0aW5nIHZhbHVlIGlzIHVzZWQgZm9yIHN1YnN0cmluZyBtYXRjaCBhZ2FpbnN0XHJcbiAqICAgICB0aGUgY29udGVudHMgb2YgdGhlIGBhcnJheWAuIEFsbCBzdHJpbmdzIG9yIG9iamVjdHMgd2l0aCBzdHJpbmcgcHJvcGVydGllcyBpbiBgYXJyYXlgIHRoYXQgY29udGFpbiB0aGlzIHN0cmluZ1xyXG4gKiAgICAgd2lsbCBiZSByZXR1cm5lZC4gVGhlIHByZWRpY2F0ZSBjYW4gYmUgbmVnYXRlZCBieSBwcmVmaXhpbmcgdGhlIHN0cmluZyB3aXRoIGAhYC5cclxuICpcclxuICogICAtIGBPYmplY3RgOiBBIHBhdHRlcm4gb2JqZWN0IGNhbiBiZSB1c2VkIHRvIGZpbHRlciBzcGVjaWZpYyBwcm9wZXJ0aWVzIG9uIG9iamVjdHMgY29udGFpbmVkXHJcbiAqICAgICBieSBgYXJyYXlgLiBGb3IgZXhhbXBsZSBge25hbWU6XCJNXCIsIHBob25lOlwiMVwifWAgcHJlZGljYXRlIHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIGl0ZW1zXHJcbiAqICAgICB3aGljaCBoYXZlIHByb3BlcnR5IGBuYW1lYCBjb250YWluaW5nIFwiTVwiIGFuZCBwcm9wZXJ0eSBgcGhvbmVgIGNvbnRhaW5pbmcgXCIxXCIuIEEgc3BlY2lhbFxyXG4gKiAgICAgcHJvcGVydHkgbmFtZSBgJGAgY2FuIGJlIHVzZWQgKGFzIGluIGB7JDpcInRleHRcIn1gKSB0byBhY2NlcHQgYSBtYXRjaCBhZ2FpbnN0IGFueVxyXG4gKiAgICAgcHJvcGVydHkgb2YgdGhlIG9iamVjdC4gVGhhdCdzIGVxdWl2YWxlbnQgdG8gdGhlIHNpbXBsZSBzdWJzdHJpbmcgbWF0Y2ggd2l0aCBhIGBzdHJpbmdgXHJcbiAqICAgICBhcyBkZXNjcmliZWQgYWJvdmUuIFRoZSBwcmVkaWNhdGUgY2FuIGJlIG5lZ2F0ZWQgYnkgcHJlZml4aW5nIHRoZSBzdHJpbmcgd2l0aCBgIWAuXHJcbiAqICAgICBGb3IgRXhhbXBsZSBge25hbWU6IFwiIU1cIn1gIHByZWRpY2F0ZSB3aWxsIHJldHVybiBhbiBhcnJheSBvZiBpdGVtcyB3aGljaCBoYXZlIHByb3BlcnR5IGBuYW1lYFxyXG4gKiAgICAgbm90IGNvbnRhaW5pbmcgXCJNXCIuXHJcbiAqXHJcbiAqICAgLSBgZnVuY3Rpb24odmFsdWUsIGluZGV4KWA6IEEgcHJlZGljYXRlIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHdyaXRlIGFyYml0cmFyeSBmaWx0ZXJzLiBUaGVcclxuICogICAgIGZ1bmN0aW9uIGlzIGNhbGxlZCBmb3IgZWFjaCBlbGVtZW50IG9mIGBhcnJheWAuIFRoZSBmaW5hbCByZXN1bHQgaXMgYW4gYXJyYXkgb2YgdGhvc2VcclxuICogICAgIGVsZW1lbnRzIHRoYXQgdGhlIHByZWRpY2F0ZSByZXR1cm5lZCB0cnVlIGZvci5cclxuICpcclxuICogQHBhcmFtIHtmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKXx0cnVlfHVuZGVmaW5lZH0gY29tcGFyYXRvciBDb21wYXJhdG9yIHdoaWNoIGlzIHVzZWQgaW5cclxuICogICAgIGRldGVybWluaW5nIGlmIHRoZSBleHBlY3RlZCB2YWx1ZSAoZnJvbSB0aGUgZmlsdGVyIGV4cHJlc3Npb24pIGFuZCBhY3R1YWwgdmFsdWUgKGZyb21cclxuICogICAgIHRoZSBvYmplY3QgaW4gdGhlIGFycmF5KSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIG1hdGNoLlxyXG4gKlxyXG4gKiAgIENhbiBiZSBvbmUgb2Y6XHJcbiAqXHJcbiAqICAgLSBgZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZClgOlxyXG4gKiAgICAgVGhlIGZ1bmN0aW9uIHdpbGwgYmUgZ2l2ZW4gdGhlIG9iamVjdCB2YWx1ZSBhbmQgdGhlIHByZWRpY2F0ZSB2YWx1ZSB0byBjb21wYXJlIGFuZFxyXG4gKiAgICAgc2hvdWxkIHJldHVybiB0cnVlIGlmIHRoZSBpdGVtIHNob3VsZCBiZSBpbmNsdWRlZCBpbiBmaWx0ZXJlZCByZXN1bHQuXHJcbiAqXHJcbiAqICAgLSBgdHJ1ZWA6IEEgc2hvcnRoYW5kIGZvciBgZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZCkgeyByZXR1cm4gYW5ndWxhci5lcXVhbHMoZXhwZWN0ZWQsIGFjdHVhbCl9YC5cclxuICogICAgIHRoaXMgaXMgZXNzZW50aWFsbHkgc3RyaWN0IGNvbXBhcmlzb24gb2YgZXhwZWN0ZWQgYW5kIGFjdHVhbC5cclxuICpcclxuICogICAtIGBmYWxzZXx1bmRlZmluZWRgOiBBIHNob3J0IGhhbmQgZm9yIGEgZnVuY3Rpb24gd2hpY2ggd2lsbCBsb29rIGZvciBhIHN1YnN0cmluZyBtYXRjaCBpbiBjYXNlXHJcbiAqICAgICBpbnNlbnNpdGl2ZSB3YXkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8ZGl2IG5nLWluaXQ9XCJmcmllbmRzID0gW3tuYW1lOidKb2huJywgcGhvbmU6JzU1NS0xMjc2J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J01hcnknLCBwaG9uZTonODAwLUJJRy1NQVJZJ30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J01pa2UnLCBwaG9uZTonNTU1LTQzMjEnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonQWRhbScsIHBob25lOic1NTUtNTY3OCd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidKdWxpZScsIHBob25lOic1NTUtODc2NSd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidKdWxpZXR0ZScsIHBob25lOic1NTUtNTY3OCd9XVwiPjwvZGl2PlxyXG5cclxuICAgICAgIFNlYXJjaDogPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoVGV4dFwiPlxyXG4gICAgICAgPHRhYmxlIGlkPVwic2VhcmNoVGV4dFJlc3VsdHNcIj5cclxuICAgICAgICAgPHRyPjx0aD5OYW1lPC90aD48dGg+UGhvbmU8L3RoPjwvdHI+XHJcbiAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IGZpbHRlcjpzZWFyY2hUZXh0XCI+XHJcbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XHJcbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kLnBob25lfX08L3RkPlxyXG4gICAgICAgICA8L3RyPlxyXG4gICAgICAgPC90YWJsZT5cclxuICAgICAgIDxocj5cclxuICAgICAgIEFueTogPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoLiRcIj4gPGJyPlxyXG4gICAgICAgTmFtZSBvbmx5IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaC5uYW1lXCI+PGJyPlxyXG4gICAgICAgUGhvbmUgb25seSA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2gucGhvbmVcIj48YnI+XHJcbiAgICAgICBFcXVhbGl0eSA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJzdHJpY3RcIj48YnI+XHJcbiAgICAgICA8dGFibGUgaWQ9XCJzZWFyY2hPYmpSZXN1bHRzXCI+XHJcbiAgICAgICAgIDx0cj48dGg+TmFtZTwvdGg+PHRoPlBob25lPC90aD48L3RyPlxyXG4gICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kT2JqIGluIGZyaWVuZHMgfCBmaWx0ZXI6c2VhcmNoOnN0cmljdFwiPlxyXG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZE9iai5uYW1lfX08L3RkPlxyXG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZE9iai5waG9uZX19PC90ZD5cclxuICAgICAgICAgPC90cj5cclxuICAgICAgIDwvdGFibGU+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIHZhciBleHBlY3RGcmllbmROYW1lcyA9IGZ1bmN0aW9uKGV4cGVjdGVkTmFtZXMsIGtleSkge1xyXG4gICAgICAgICBlbGVtZW50LmFsbChieS5yZXBlYXRlcihrZXkgKyAnIGluIGZyaWVuZHMnKS5jb2x1bW4oa2V5ICsgJy5uYW1lJykpLnRoZW4oZnVuY3Rpb24oYXJyKSB7XHJcbiAgICAgICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24od2QsIGkpIHtcclxuICAgICAgICAgICAgIGV4cGVjdCh3ZC5nZXRUZXh0KCkpLnRvTWF0Y2goZXhwZWN0ZWROYW1lc1tpXSk7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICAgfTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIHNlYXJjaCBhY3Jvc3MgYWxsIGZpZWxkcyB3aGVuIGZpbHRlcmluZyB3aXRoIGEgc3RyaW5nJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIHZhciBzZWFyY2hUZXh0ID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoVGV4dCcpKTtcclxuICAgICAgICAgc2VhcmNoVGV4dC5jbGVhcigpO1xyXG4gICAgICAgICBzZWFyY2hUZXh0LnNlbmRLZXlzKCdtJyk7XHJcbiAgICAgICAgIGV4cGVjdEZyaWVuZE5hbWVzKFsnTWFyeScsICdNaWtlJywgJ0FkYW0nXSwgJ2ZyaWVuZCcpO1xyXG5cclxuICAgICAgICAgc2VhcmNoVGV4dC5jbGVhcigpO1xyXG4gICAgICAgICBzZWFyY2hUZXh0LnNlbmRLZXlzKCc3NicpO1xyXG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ0pvaG4nLCAnSnVsaWUnXSwgJ2ZyaWVuZCcpO1xyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggaW4gc3BlY2lmaWMgZmllbGRzIHdoZW4gZmlsdGVyaW5nIHdpdGggYSBwcmVkaWNhdGUgb2JqZWN0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIHZhciBzZWFyY2hBbnkgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2guJCcpKTtcclxuICAgICAgICAgc2VhcmNoQW55LmNsZWFyKCk7XHJcbiAgICAgICAgIHNlYXJjaEFueS5zZW5kS2V5cygnaScpO1xyXG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ01hcnknLCAnTWlrZScsICdKdWxpZScsICdKdWxpZXR0ZSddLCAnZnJpZW5kT2JqJyk7XHJcbiAgICAgICB9KTtcclxuICAgICAgIGl0KCdzaG91bGQgdXNlIGEgZXF1YWwgY29tcGFyaXNvbiB3aGVuIGNvbXBhcmF0b3IgaXMgdHJ1ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgc2VhcmNoTmFtZSA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlYXJjaC5uYW1lJykpO1xyXG4gICAgICAgICB2YXIgc3RyaWN0ID0gZWxlbWVudChieS5tb2RlbCgnc3RyaWN0JykpO1xyXG4gICAgICAgICBzZWFyY2hOYW1lLmNsZWFyKCk7XHJcbiAgICAgICAgIHNlYXJjaE5hbWUuc2VuZEtleXMoJ0p1bGllJyk7XHJcbiAgICAgICAgIHN0cmljdC5jbGljaygpO1xyXG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ0p1bGllJ10sICdmcmllbmRPYmonKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuZnVuY3Rpb24gZmlsdGVyRmlsdGVyKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbihhcnJheSwgZXhwcmVzc2lvbiwgY29tcGFyYXRvcikge1xyXG4gICAgaWYgKCFpc0FycmF5KGFycmF5KSkgcmV0dXJuIGFycmF5O1xyXG5cclxuICAgIHZhciBjb21wYXJhdG9yVHlwZSA9IHR5cGVvZihjb21wYXJhdG9yKSxcclxuICAgICAgICBwcmVkaWNhdGVzID0gW107XHJcblxyXG4gICAgcHJlZGljYXRlcy5jaGVjayA9IGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHByZWRpY2F0ZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBpZighcHJlZGljYXRlc1tqXSh2YWx1ZSwgaW5kZXgpKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoY29tcGFyYXRvclR5cGUgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgaWYgKGNvbXBhcmF0b3JUeXBlID09PSAnYm9vbGVhbicgJiYgY29tcGFyYXRvcikge1xyXG4gICAgICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbihvYmosIHRleHQpIHtcclxuICAgICAgICAgIHJldHVybiBhbmd1bGFyLmVxdWFscyhvYmosIHRleHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uKG9iaiwgdGV4dCkge1xyXG4gICAgICAgICAgaWYgKG9iaiAmJiB0ZXh0ICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHR5cGVvZiB0ZXh0ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBvYmpLZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9iaktleS5jaGFyQXQoMCkgIT09ICckJyAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgb2JqS2V5KSAmJlxyXG4gICAgICAgICAgICAgICAgICBjb21wYXJhdG9yKG9ialtvYmpLZXldLCB0ZXh0W29iaktleV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGV4dCA9ICgnJyt0ZXh0KS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgcmV0dXJuICgnJytvYmopLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih0ZXh0KSA+IC0xO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2VhcmNoID0gZnVuY3Rpb24ob2JqLCB0ZXh0KXtcclxuICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09ICdzdHJpbmcnICYmIHRleHQuY2hhckF0KDApID09PSAnIScpIHtcclxuICAgICAgICByZXR1cm4gIXNlYXJjaChvYmosIHRleHQuc3Vic3RyKDEpKTtcclxuICAgICAgfVxyXG4gICAgICBzd2l0Y2ggKHR5cGVvZiBvYmopIHtcclxuICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxyXG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcclxuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XHJcbiAgICAgICAgICByZXR1cm4gY29tcGFyYXRvcihvYmosIHRleHQpO1xyXG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcclxuICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHRleHQpIHtcclxuICAgICAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxyXG4gICAgICAgICAgICAgIHJldHVybiBjb21wYXJhdG9yKG9iaiwgdGV4dCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgZm9yICggdmFyIG9iaktleSBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmpLZXkuY2hhckF0KDApICE9PSAnJCcgJiYgc2VhcmNoKG9ialtvYmpLZXldLCB0ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgY2FzZSBcImFycmF5XCI6XHJcbiAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHNlYXJjaChvYmpbaV0sIHRleHQpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgc3dpdGNoICh0eXBlb2YgZXhwcmVzc2lvbikge1xyXG4gICAgICBjYXNlIFwiYm9vbGVhblwiOlxyXG4gICAgICBjYXNlIFwibnVtYmVyXCI6XHJcbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcclxuICAgICAgICAvLyBTZXQgdXAgZXhwcmVzc2lvbiBvYmplY3QgYW5kIGZhbGwgdGhyb3VnaFxyXG4gICAgICAgIGV4cHJlc3Npb24gPSB7JDpleHByZXNzaW9ufTtcclxuICAgICAgICAvLyBqc2hpbnQgLVcwODZcclxuICAgICAgY2FzZSBcIm9iamVjdFwiOlxyXG4gICAgICAgIC8vIGpzaGludCArVzA4NlxyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBleHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAoZnVuY3Rpb24ocGF0aCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGV4cHJlc3Npb25bcGF0aF0gPT09ICd1bmRlZmluZWQnKSByZXR1cm47XHJcbiAgICAgICAgICAgIHByZWRpY2F0ZXMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBzZWFyY2gocGF0aCA9PSAnJCcgPyB2YWx1ZSA6ICh2YWx1ZSAmJiB2YWx1ZVtwYXRoXSksIGV4cHJlc3Npb25bcGF0aF0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdmdW5jdGlvbic6XHJcbiAgICAgICAgcHJlZGljYXRlcy5wdXNoKGV4cHJlc3Npb24pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuICAgIHZhciBmaWx0ZXJlZCA9IFtdO1xyXG4gICAgZm9yICggdmFyIGogPSAwOyBqIDwgYXJyYXkubGVuZ3RoOyBqKyspIHtcclxuICAgICAgdmFyIHZhbHVlID0gYXJyYXlbal07XHJcbiAgICAgIGlmIChwcmVkaWNhdGVzLmNoZWNrKHZhbHVlLCBqKSkge1xyXG4gICAgICAgIGZpbHRlcmVkLnB1c2godmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlsdGVyZWQ7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUgY3VycmVuY3lcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEZvcm1hdHMgYSBudW1iZXIgYXMgYSBjdXJyZW5jeSAoaWUgJDEsMjM0LjU2KS4gV2hlbiBubyBjdXJyZW5jeSBzeW1ib2wgaXMgcHJvdmlkZWQsIGRlZmF1bHRcclxuICogc3ltYm9sIGZvciBjdXJyZW50IGxvY2FsZSBpcyB1c2VkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IElucHV0IHRvIGZpbHRlci5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBzeW1ib2wgQ3VycmVuY3kgc3ltYm9sIG9yIGlkZW50aWZpZXIgdG8gYmUgZGlzcGxheWVkLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgbnVtYmVyLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJjdXJyZW5jeUV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2N1cnJlbmN5RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUuYW1vdW50ID0gMTIzNC41NjtcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJhbW91bnRcIj4gPGJyPlxyXG4gICAgICAgICBkZWZhdWx0IGN1cnJlbmN5IHN5bWJvbCAoJCk6IDxzcGFuIGlkPVwiY3VycmVuY3ktZGVmYXVsdFwiPnt7YW1vdW50IHwgY3VycmVuY3l9fTwvc3Bhbj48YnI+XHJcbiAgICAgICAgIGN1c3RvbSBjdXJyZW5jeSBpZGVudGlmaWVyIChVU0QkKTogPHNwYW4+e3thbW91bnQgfCBjdXJyZW5jeTpcIlVTRCRcIn19PC9zcGFuPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgaW5pdCB3aXRoIDEyMzQuNTYnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCckMSwyMzQuNTYnKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnYW1vdW50IHwgY3VycmVuY3k6XCJVU0QkXCInKSkuZ2V0VGV4dCgpKS50b0JlKCdVU0QkMSwyMzQuNTYnKTtcclxuICAgICAgIH0pO1xyXG4gICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ3NhZmFyaScpIHtcclxuICAgICAgICAgICAvLyBTYWZhcmkgZG9lcyBub3QgdW5kZXJzdGFuZCB0aGUgbWludXMga2V5LiBTZWVcclxuICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODFcclxuICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnYW1vdW50JykpLmNsZWFyKCk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2Ftb3VudCcpKS5zZW5kS2V5cygnLTEyMzQnKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCcoJDEsMjM0LjAwKScpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdhbW91bnQgfCBjdXJyZW5jeTpcIlVTRCRcIicpKS5nZXRUZXh0KCkpLnRvQmUoJyhVU0QkMSwyMzQuMDApJyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmN1cnJlbmN5RmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcclxuZnVuY3Rpb24gY3VycmVuY3lGaWx0ZXIoJGxvY2FsZSkge1xyXG4gIHZhciBmb3JtYXRzID0gJGxvY2FsZS5OVU1CRVJfRk9STUFUUztcclxuICByZXR1cm4gZnVuY3Rpb24oYW1vdW50LCBjdXJyZW5jeVN5bWJvbCl7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQoY3VycmVuY3lTeW1ib2wpKSBjdXJyZW5jeVN5bWJvbCA9IGZvcm1hdHMuQ1VSUkVOQ1lfU1lNO1xyXG5cclxuICAgIC8vIGlmIG51bGwgb3IgdW5kZWZpbmVkIHBhc3MgaXQgdGhyb3VnaFxyXG4gICAgcmV0dXJuIChhbW91bnQgPT0gbnVsbClcclxuICAgICAgICA/IGFtb3VudFxyXG4gICAgICAgIDogZm9ybWF0TnVtYmVyKGFtb3VudCwgZm9ybWF0cy5QQVRURVJOU1sxXSwgZm9ybWF0cy5HUk9VUF9TRVAsIGZvcm1hdHMuREVDSU1BTF9TRVAsIDIpLlxyXG4gICAgICAgICAgICByZXBsYWNlKC9cXHUwMEE0L2csIGN1cnJlbmN5U3ltYm9sKTtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBudW1iZXJcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEZvcm1hdHMgYSBudW1iZXIgYXMgdGV4dC5cclxuICpcclxuICogSWYgdGhlIGlucHV0IGlzIG5vdCBhIG51bWJlciBhbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gbnVtYmVyIE51bWJlciB0byBmb3JtYXQuXHJcbiAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpPX0gZnJhY3Rpb25TaXplIE51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byByb3VuZCB0aGUgbnVtYmVyIHRvLlxyXG4gKiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCB0aGVuIHRoZSBmcmFjdGlvbiBzaXplIGlzIGNvbXB1dGVkIGZyb20gdGhlIGN1cnJlbnQgbG9jYWxlJ3MgbnVtYmVyXHJcbiAqIGZvcm1hdHRpbmcgcGF0dGVybi4gSW4gdGhlIGNhc2Ugb2YgdGhlIGRlZmF1bHQgbG9jYWxlLCBpdCB3aWxsIGJlIDMuXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IE51bWJlciByb3VuZGVkIHRvIGRlY2ltYWxQbGFjZXMgYW5kIHBsYWNlcyBhIOKAnCzigJ0gYWZ0ZXIgZWFjaCB0aGlyZCBkaWdpdC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwibnVtYmVyRmlsdGVyRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbnVtYmVyRmlsdGVyRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUudmFsID0gMTIzNC41Njc4OTtcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIEVudGVyIG51bWJlcjogPGlucHV0IG5nLW1vZGVsPSd2YWwnPjxicj5cclxuICAgICAgICAgRGVmYXVsdCBmb3JtYXR0aW5nOiA8c3BhbiBpZD0nbnVtYmVyLWRlZmF1bHQnPnt7dmFsIHwgbnVtYmVyfX08L3NwYW4+PGJyPlxyXG4gICAgICAgICBObyBmcmFjdGlvbnM6IDxzcGFuPnt7dmFsIHwgbnVtYmVyOjB9fTwvc3Bhbj48YnI+XHJcbiAgICAgICAgIE5lZ2F0aXZlIG51bWJlcjogPHNwYW4+e3stdmFsIHwgbnVtYmVyOjR9fTwvc3Bhbj5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGZvcm1hdCBudW1iZXJzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzEsMjM0LjU2OCcpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd2YWwgfCBudW1iZXI6MCcpKS5nZXRUZXh0KCkpLnRvQmUoJzEsMjM1Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJy12YWwgfCBudW1iZXI6NCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0xLDIzNC41Njc5Jyk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWwnKSkuY2xlYXIoKTtcclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgndmFsJykpLnNlbmRLZXlzKCczMzc0LjMzMycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbnVtYmVyLWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCczLDM3NC4zMzMnKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndmFsIHwgbnVtYmVyOjAnKSkuZ2V0VGV4dCgpKS50b0JlKCczLDM3NCcpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCctdmFsIHwgbnVtYmVyOjQnKSkuZ2V0VGV4dCgpKS50b0JlKCctMywzNzQuMzMzMCcpO1xyXG4gICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxubnVtYmVyRmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcclxuZnVuY3Rpb24gbnVtYmVyRmlsdGVyKCRsb2NhbGUpIHtcclxuICB2YXIgZm9ybWF0cyA9ICRsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKG51bWJlciwgZnJhY3Rpb25TaXplKSB7XHJcblxyXG4gICAgLy8gaWYgbnVsbCBvciB1bmRlZmluZWQgcGFzcyBpdCB0aHJvdWdoXHJcbiAgICByZXR1cm4gKG51bWJlciA9PSBudWxsKVxyXG4gICAgICAgID8gbnVtYmVyXHJcbiAgICAgICAgOiBmb3JtYXROdW1iZXIobnVtYmVyLCBmb3JtYXRzLlBBVFRFUk5TWzBdLCBmb3JtYXRzLkdST1VQX1NFUCwgZm9ybWF0cy5ERUNJTUFMX1NFUCxcclxuICAgICAgICAgICAgICAgICAgICAgICBmcmFjdGlvblNpemUpO1xyXG4gIH07XHJcbn1cclxuXHJcbnZhciBERUNJTUFMX1NFUCA9ICcuJztcclxuZnVuY3Rpb24gZm9ybWF0TnVtYmVyKG51bWJlciwgcGF0dGVybiwgZ3JvdXBTZXAsIGRlY2ltYWxTZXAsIGZyYWN0aW9uU2l6ZSkge1xyXG4gIGlmICghaXNGaW5pdGUobnVtYmVyKSB8fCBpc09iamVjdChudW1iZXIpKSByZXR1cm4gJyc7XHJcblxyXG4gIHZhciBpc05lZ2F0aXZlID0gbnVtYmVyIDwgMDtcclxuICBudW1iZXIgPSBNYXRoLmFicyhudW1iZXIpO1xyXG4gIHZhciBudW1TdHIgPSBudW1iZXIgKyAnJyxcclxuICAgICAgZm9ybWF0ZWRUZXh0ID0gJycsXHJcbiAgICAgIHBhcnRzID0gW107XHJcblxyXG4gIHZhciBoYXNFeHBvbmVudCA9IGZhbHNlO1xyXG4gIGlmIChudW1TdHIuaW5kZXhPZignZScpICE9PSAtMSkge1xyXG4gICAgdmFyIG1hdGNoID0gbnVtU3RyLm1hdGNoKC8oW1xcZFxcLl0rKWUoLT8pKFxcZCspLyk7XHJcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0gPT0gJy0nICYmIG1hdGNoWzNdID4gZnJhY3Rpb25TaXplICsgMSkge1xyXG4gICAgICBudW1TdHIgPSAnMCc7XHJcbiAgICAgIG51bWJlciA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3JtYXRlZFRleHQgPSBudW1TdHI7XHJcbiAgICAgIGhhc0V4cG9uZW50ID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmICghaGFzRXhwb25lbnQpIHtcclxuICAgIHZhciBmcmFjdGlvbkxlbiA9IChudW1TdHIuc3BsaXQoREVDSU1BTF9TRVApWzFdIHx8ICcnKS5sZW5ndGg7XHJcblxyXG4gICAgLy8gZGV0ZXJtaW5lIGZyYWN0aW9uU2l6ZSBpZiBpdCBpcyBub3Qgc3BlY2lmaWVkXHJcbiAgICBpZiAoaXNVbmRlZmluZWQoZnJhY3Rpb25TaXplKSkge1xyXG4gICAgICBmcmFjdGlvblNpemUgPSBNYXRoLm1pbihNYXRoLm1heChwYXR0ZXJuLm1pbkZyYWMsIGZyYWN0aW9uTGVuKSwgcGF0dGVybi5tYXhGcmFjKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzYWZlbHkgcm91bmQgbnVtYmVycyBpbiBKUyB3aXRob3V0IGhpdHRpbmcgaW1wcmVjaXNpb25zIG9mIGZsb2F0aW5nLXBvaW50IGFyaXRobWV0aWNzXHJcbiAgICAvLyBpbnNwaXJlZCBieTpcclxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL01hdGgvcm91bmRcclxuICAgIG51bWJlciA9ICsoTWF0aC5yb3VuZCgrKG51bWJlci50b1N0cmluZygpICsgJ2UnICsgZnJhY3Rpb25TaXplKSkudG9TdHJpbmcoKSArICdlJyArIC1mcmFjdGlvblNpemUpO1xyXG5cclxuICAgIGlmIChudW1iZXIgPT09IDApIHtcclxuICAgICAgaXNOZWdhdGl2ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmcmFjdGlvbiA9ICgnJyArIG51bWJlcikuc3BsaXQoREVDSU1BTF9TRVApO1xyXG4gICAgdmFyIHdob2xlID0gZnJhY3Rpb25bMF07XHJcbiAgICBmcmFjdGlvbiA9IGZyYWN0aW9uWzFdIHx8ICcnO1xyXG5cclxuICAgIHZhciBpLCBwb3MgPSAwLFxyXG4gICAgICAgIGxncm91cCA9IHBhdHRlcm4ubGdTaXplLFxyXG4gICAgICAgIGdyb3VwID0gcGF0dGVybi5nU2l6ZTtcclxuXHJcbiAgICBpZiAod2hvbGUubGVuZ3RoID49IChsZ3JvdXAgKyBncm91cCkpIHtcclxuICAgICAgcG9zID0gd2hvbGUubGVuZ3RoIC0gbGdyb3VwO1xyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcG9zOyBpKyspIHtcclxuICAgICAgICBpZiAoKHBvcyAtIGkpJWdyb3VwID09PSAwICYmIGkgIT09IDApIHtcclxuICAgICAgICAgIGZvcm1hdGVkVGV4dCArPSBncm91cFNlcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9ybWF0ZWRUZXh0ICs9IHdob2xlLmNoYXJBdChpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAoaSA9IHBvczsgaSA8IHdob2xlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICgod2hvbGUubGVuZ3RoIC0gaSklbGdyb3VwID09PSAwICYmIGkgIT09IDApIHtcclxuICAgICAgICBmb3JtYXRlZFRleHQgKz0gZ3JvdXBTZXA7XHJcbiAgICAgIH1cclxuICAgICAgZm9ybWF0ZWRUZXh0ICs9IHdob2xlLmNoYXJBdChpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmb3JtYXQgZnJhY3Rpb24gcGFydC5cclxuICAgIHdoaWxlKGZyYWN0aW9uLmxlbmd0aCA8IGZyYWN0aW9uU2l6ZSkge1xyXG4gICAgICBmcmFjdGlvbiArPSAnMCc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZyYWN0aW9uU2l6ZSAmJiBmcmFjdGlvblNpemUgIT09IFwiMFwiKSBmb3JtYXRlZFRleHQgKz0gZGVjaW1hbFNlcCArIGZyYWN0aW9uLnN1YnN0cigwLCBmcmFjdGlvblNpemUpO1xyXG4gIH0gZWxzZSB7XHJcblxyXG4gICAgaWYgKGZyYWN0aW9uU2l6ZSA+IDAgJiYgbnVtYmVyID4gLTEgJiYgbnVtYmVyIDwgMSkge1xyXG4gICAgICBmb3JtYXRlZFRleHQgPSBudW1iZXIudG9GaXhlZChmcmFjdGlvblNpemUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcGFydHMucHVzaChpc05lZ2F0aXZlID8gcGF0dGVybi5uZWdQcmUgOiBwYXR0ZXJuLnBvc1ByZSk7XHJcbiAgcGFydHMucHVzaChmb3JtYXRlZFRleHQpO1xyXG4gIHBhcnRzLnB1c2goaXNOZWdhdGl2ZSA/IHBhdHRlcm4ubmVnU3VmIDogcGF0dGVybi5wb3NTdWYpO1xyXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFkTnVtYmVyKG51bSwgZGlnaXRzLCB0cmltKSB7XHJcbiAgdmFyIG5lZyA9ICcnO1xyXG4gIGlmIChudW0gPCAwKSB7XHJcbiAgICBuZWcgPSAgJy0nO1xyXG4gICAgbnVtID0gLW51bTtcclxuICB9XHJcbiAgbnVtID0gJycgKyBudW07XHJcbiAgd2hpbGUobnVtLmxlbmd0aCA8IGRpZ2l0cykgbnVtID0gJzAnICsgbnVtO1xyXG4gIGlmICh0cmltKVxyXG4gICAgbnVtID0gbnVtLnN1YnN0cihudW0ubGVuZ3RoIC0gZGlnaXRzKTtcclxuICByZXR1cm4gbmVnICsgbnVtO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZGF0ZUdldHRlcihuYW1lLCBzaXplLCBvZmZzZXQsIHRyaW0pIHtcclxuICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcclxuICByZXR1cm4gZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgdmFyIHZhbHVlID0gZGF0ZVsnZ2V0JyArIG5hbWVdKCk7XHJcbiAgICBpZiAob2Zmc2V0ID4gMCB8fCB2YWx1ZSA+IC1vZmZzZXQpXHJcbiAgICAgIHZhbHVlICs9IG9mZnNldDtcclxuICAgIGlmICh2YWx1ZSA9PT0gMCAmJiBvZmZzZXQgPT0gLTEyICkgdmFsdWUgPSAxMjtcclxuICAgIHJldHVybiBwYWROdW1iZXIodmFsdWUsIHNpemUsIHRyaW0pO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRhdGVTdHJHZXR0ZXIobmFtZSwgc2hvcnRGb3JtKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUsIGZvcm1hdHMpIHtcclxuICAgIHZhciB2YWx1ZSA9IGRhdGVbJ2dldCcgKyBuYW1lXSgpO1xyXG4gICAgdmFyIGdldCA9IHVwcGVyY2FzZShzaG9ydEZvcm0gPyAoJ1NIT1JUJyArIG5hbWUpIDogbmFtZSk7XHJcblxyXG4gICAgcmV0dXJuIGZvcm1hdHNbZ2V0XVt2YWx1ZV07XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gdGltZVpvbmVHZXR0ZXIoZGF0ZSkge1xyXG4gIHZhciB6b25lID0gLTEgKiBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XHJcbiAgdmFyIHBhZGRlZFpvbmUgPSAoem9uZSA+PSAwKSA/IFwiK1wiIDogXCJcIjtcclxuXHJcbiAgcGFkZGVkWm9uZSArPSBwYWROdW1iZXIoTWF0aFt6b25lID4gMCA/ICdmbG9vcicgOiAnY2VpbCddKHpvbmUgLyA2MCksIDIpICtcclxuICAgICAgICAgICAgICAgIHBhZE51bWJlcihNYXRoLmFicyh6b25lICUgNjApLCAyKTtcclxuXHJcbiAgcmV0dXJuIHBhZGRlZFpvbmU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZpcnN0VGh1cnNkYXlPZlllYXIoeWVhcikge1xyXG4gICAgLy8gMCA9IGluZGV4IG9mIEphbnVhcnlcclxuICAgIHZhciBkYXlPZldlZWtPbkZpcnN0ID0gKG5ldyBEYXRlKHllYXIsIDAsIDEpKS5nZXREYXkoKTtcclxuICAgIC8vIDQgPSBpbmRleCBvZiBUaHVyc2RheSAoKzEgdG8gYWNjb3VudCBmb3IgMXN0ID0gNSlcclxuICAgIC8vIDExID0gaW5kZXggb2YgKm5leHQqIFRodXJzZGF5ICgrMSBhY2NvdW50IGZvciAxc3QgPSAxMilcclxuICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCAwLCAoKGRheU9mV2Vla09uRmlyc3QgPD0gNCkgPyA1IDogMTIpIC0gZGF5T2ZXZWVrT25GaXJzdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRodXJzZGF5VGhpc1dlZWsoZGF0ZXRpbWUpIHtcclxuICAgIHJldHVybiBuZXcgRGF0ZShkYXRldGltZS5nZXRGdWxsWWVhcigpLCBkYXRldGltZS5nZXRNb250aCgpLFxyXG4gICAgICAvLyA0ID0gaW5kZXggb2YgVGh1cnNkYXlcclxuICAgICAgZGF0ZXRpbWUuZ2V0RGF0ZSgpICsgKDQgLSBkYXRldGltZS5nZXREYXkoKSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3ZWVrR2V0dGVyKHNpemUpIHtcclxuICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgdmFyIGZpcnN0VGh1cnMgPSBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSksXHJcbiAgICAgICAgIHRoaXNUaHVycyA9IGdldFRodXJzZGF5VGhpc1dlZWsoZGF0ZSk7XHJcblxyXG4gICAgICB2YXIgZGlmZiA9ICt0aGlzVGh1cnMgLSArZmlyc3RUaHVycyxcclxuICAgICAgICAgcmVzdWx0ID0gMSArIE1hdGgucm91bmQoZGlmZiAvIDYuMDQ4ZTgpOyAvLyA2LjA0OGU4IG1zIHBlciB3ZWVrXHJcblxyXG4gICAgICByZXR1cm4gcGFkTnVtYmVyKHJlc3VsdCwgc2l6ZSk7XHJcbiAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFtcG1HZXR0ZXIoZGF0ZSwgZm9ybWF0cykge1xyXG4gIHJldHVybiBkYXRlLmdldEhvdXJzKCkgPCAxMiA/IGZvcm1hdHMuQU1QTVNbMF0gOiBmb3JtYXRzLkFNUE1TWzFdO1xyXG59XHJcblxyXG52YXIgREFURV9GT1JNQVRTID0ge1xyXG4gIHl5eXk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgNCksXHJcbiAgICB5eTogZGF0ZUdldHRlcignRnVsbFllYXInLCAyLCAwLCB0cnVlKSxcclxuICAgICB5OiBkYXRlR2V0dGVyKCdGdWxsWWVhcicsIDEpLFxyXG4gIE1NTU06IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJyksXHJcbiAgIE1NTTogZGF0ZVN0ckdldHRlcignTW9udGgnLCB0cnVlKSxcclxuICAgIE1NOiBkYXRlR2V0dGVyKCdNb250aCcsIDIsIDEpLFxyXG4gICAgIE06IGRhdGVHZXR0ZXIoJ01vbnRoJywgMSwgMSksXHJcbiAgICBkZDogZGF0ZUdldHRlcignRGF0ZScsIDIpLFxyXG4gICAgIGQ6IGRhdGVHZXR0ZXIoJ0RhdGUnLCAxKSxcclxuICAgIEhIOiBkYXRlR2V0dGVyKCdIb3VycycsIDIpLFxyXG4gICAgIEg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMSksXHJcbiAgICBoaDogZGF0ZUdldHRlcignSG91cnMnLCAyLCAtMTIpLFxyXG4gICAgIGg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMSwgLTEyKSxcclxuICAgIG1tOiBkYXRlR2V0dGVyKCdNaW51dGVzJywgMiksXHJcbiAgICAgbTogZGF0ZUdldHRlcignTWludXRlcycsIDEpLFxyXG4gICAgc3M6IGRhdGVHZXR0ZXIoJ1NlY29uZHMnLCAyKSxcclxuICAgICBzOiBkYXRlR2V0dGVyKCdTZWNvbmRzJywgMSksXHJcbiAgICAgLy8gd2hpbGUgSVNPIDg2MDEgcmVxdWlyZXMgZnJhY3Rpb25zIHRvIGJlIHByZWZpeGVkIHdpdGggYC5gIG9yIGAsYFxyXG4gICAgIC8vIHdlIGNhbiBiZSBqdXN0IHNhZmVseSByZWx5IG9uIHVzaW5nIGBzc3NgIHNpbmNlIHdlIGN1cnJlbnRseSBkb24ndCBzdXBwb3J0IHNpbmdsZSBvciB0d28gZGlnaXQgZnJhY3Rpb25zXHJcbiAgIHNzczogZGF0ZUdldHRlcignTWlsbGlzZWNvbmRzJywgMyksXHJcbiAgRUVFRTogZGF0ZVN0ckdldHRlcignRGF5JyksXHJcbiAgIEVFRTogZGF0ZVN0ckdldHRlcignRGF5JywgdHJ1ZSksXHJcbiAgICAgYTogYW1wbUdldHRlcixcclxuICAgICBaOiB0aW1lWm9uZUdldHRlcixcclxuICAgIHd3OiB3ZWVrR2V0dGVyKDIpLFxyXG4gICAgIHc6IHdlZWtHZXR0ZXIoMSlcclxufTtcclxuXHJcbnZhciBEQVRFX0ZPUk1BVFNfU1BMSVQgPSAvKCg/OlteeU1kSGhtc2FaRXcnXSspfCg/OicoPzpbXiddfCcnKSonKXwoPzpFK3x5K3xNK3xkK3xIK3xoK3xtK3xzK3xhfFp8dyspKSguKikvLFxyXG4gICAgTlVNQkVSX1NUUklORyA9IC9eXFwtP1xcZCskLztcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIGRhdGVcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqICAgRm9ybWF0cyBgZGF0ZWAgdG8gYSBzdHJpbmcgYmFzZWQgb24gdGhlIHJlcXVlc3RlZCBgZm9ybWF0YC5cclxuICpcclxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZWxlbWVudHM6XHJcbiAqXHJcbiAqICAgKiBgJ3l5eXknYDogNCBkaWdpdCByZXByZXNlbnRhdGlvbiBvZiB5ZWFyIChlLmcuIEFEIDEgPT4gMDAwMSwgQUQgMjAxMCA9PiAyMDEwKVxyXG4gKiAgICogYCd5eSdgOiAyIGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIsIHBhZGRlZCAoMDAtOTkpLiAoZS5nLiBBRCAyMDAxID0+IDAxLCBBRCAyMDEwID0+IDEwKVxyXG4gKiAgICogYCd5J2A6IDEgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciwgZS5nLiAoQUQgMSA9PiAxLCBBRCAxOTkgPT4gMTk5KVxyXG4gKiAgICogYCdNTU1NJ2A6IE1vbnRoIGluIHllYXIgKEphbnVhcnktRGVjZW1iZXIpXHJcbiAqICAgKiBgJ01NTSdgOiBNb250aCBpbiB5ZWFyIChKYW4tRGVjKVxyXG4gKiAgICogYCdNTSdgOiBNb250aCBpbiB5ZWFyLCBwYWRkZWQgKDAxLTEyKVxyXG4gKiAgICogYCdNJ2A6IE1vbnRoIGluIHllYXIgKDEtMTIpXHJcbiAqICAgKiBgJ2RkJ2A6IERheSBpbiBtb250aCwgcGFkZGVkICgwMS0zMSlcclxuICogICAqIGAnZCdgOiBEYXkgaW4gbW9udGggKDEtMzEpXHJcbiAqICAgKiBgJ0VFRUUnYDogRGF5IGluIFdlZWssKFN1bmRheS1TYXR1cmRheSlcclxuICogICAqIGAnRUVFJ2A6IERheSBpbiBXZWVrLCAoU3VuLVNhdClcclxuICogICAqIGAnSEgnYDogSG91ciBpbiBkYXksIHBhZGRlZCAoMDAtMjMpXHJcbiAqICAgKiBgJ0gnYDogSG91ciBpbiBkYXkgKDAtMjMpXHJcbiAqICAgKiBgJ2hoJ2A6IEhvdXIgaW4gQU0vUE0sIHBhZGRlZCAoMDEtMTIpXHJcbiAqICAgKiBgJ2gnYDogSG91ciBpbiBBTS9QTSwgKDEtMTIpXHJcbiAqICAgKiBgJ21tJ2A6IE1pbnV0ZSBpbiBob3VyLCBwYWRkZWQgKDAwLTU5KVxyXG4gKiAgICogYCdtJ2A6IE1pbnV0ZSBpbiBob3VyICgwLTU5KVxyXG4gKiAgICogYCdzcydgOiBTZWNvbmQgaW4gbWludXRlLCBwYWRkZWQgKDAwLTU5KVxyXG4gKiAgICogYCdzJ2A6IFNlY29uZCBpbiBtaW51dGUgKDAtNTkpXHJcbiAqICAgKiBgJy5zc3MnIG9yICcsc3NzJ2A6IE1pbGxpc2Vjb25kIGluIHNlY29uZCwgcGFkZGVkICgwMDAtOTk5KVxyXG4gKiAgICogYCdhJ2A6IEFNL1BNIG1hcmtlclxyXG4gKiAgICogYCdaJ2A6IDQgZGlnaXQgKCtzaWduKSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGltZXpvbmUgb2Zmc2V0ICgtMTIwMC0rMTIwMClcclxuICogICAqIGAnd3cnYDogSVNPLTg2MDEgd2VlayBvZiB5ZWFyICgwMC01MylcclxuICogICAqIGAndydgOiBJU08tODYwMSB3ZWVrIG9mIHllYXIgKDAtNTMpXHJcbiAqXHJcbiAqICAgYGZvcm1hdGAgc3RyaW5nIGNhbiBhbHNvIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHByZWRlZmluZWRcclxuICogICB7QGxpbmsgZ3VpZGUvaTE4biBsb2NhbGl6YWJsZSBmb3JtYXRzfTpcclxuICpcclxuICogICAqIGAnbWVkaXVtJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU0gZCwgeSBoOm1tOnNzIGEnYCBmb3IgZW5fVVMgbG9jYWxlXHJcbiAqICAgICAoZS5nLiBTZXAgMywgMjAxMCAxMjowNTowOCBQTSlcclxuICogICAqIGAnc2hvcnQnYDogZXF1aXZhbGVudCB0byBgJ00vZC95eSBoOm1tIGEnYCBmb3IgZW5fVVMgIGxvY2FsZSAoZS5nLiA5LzMvMTAgMTI6MDUgUE0pXHJcbiAqICAgKiBgJ2Z1bGxEYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdFRUVFLCBNTU1NIGQsIHknYCBmb3IgZW5fVVMgIGxvY2FsZVxyXG4gKiAgICAgKGUuZy4gRnJpZGF5LCBTZXB0ZW1iZXIgMywgMjAxMClcclxuICogICAqIGAnbG9uZ0RhdGUnYDogZXF1aXZhbGVudCB0byBgJ01NTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIFNlcHRlbWJlciAzLCAyMDEwKVxyXG4gKiAgICogYCdtZWRpdW1EYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIFNlcCAzLCAyMDEwKVxyXG4gKiAgICogYCdzaG9ydERhdGUnYDogZXF1aXZhbGVudCB0byBgJ00vZC95eSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gOS8zLzEwKVxyXG4gKiAgICogYCdtZWRpdW1UaW1lJ2A6IGVxdWl2YWxlbnQgdG8gYCdoOm1tOnNzIGEnYCBmb3IgZW5fVVMgbG9jYWxlIChlLmcuIDEyOjA1OjA4IFBNKVxyXG4gKiAgICogYCdzaG9ydFRpbWUnYDogZXF1aXZhbGVudCB0byBgJ2g6bW0gYSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gMTI6MDUgUE0pXHJcbiAqXHJcbiAqICAgYGZvcm1hdGAgc3RyaW5nIGNhbiBjb250YWluIGxpdGVyYWwgdmFsdWVzLiBUaGVzZSBuZWVkIHRvIGJlIGVzY2FwZWQgYnkgc3Vycm91bmRpbmcgd2l0aCBzaW5nbGUgcXVvdGVzIChlLmcuXHJcbiAqICAgYFwiaCAnaW4gdGhlIG1vcm5pbmcnXCJgKS4gSW4gb3JkZXIgdG8gb3V0cHV0IGEgc2luZ2xlIHF1b3RlLCBlc2NhcGUgaXQgLSBpLmUuLCB0d28gc2luZ2xlIHF1b3RlcyBpbiBhIHNlcXVlbmNlXHJcbiAqICAgKGUuZy4gYFwiaCAnbycnY2xvY2snXCJgKS5cclxuICpcclxuICogQHBhcmFtIHsoRGF0ZXxudW1iZXJ8c3RyaW5nKX0gZGF0ZSBEYXRlIHRvIGZvcm1hdCBlaXRoZXIgYXMgRGF0ZSBvYmplY3QsIG1pbGxpc2Vjb25kcyAoc3RyaW5nIG9yXHJcbiAqICAgIG51bWJlcikgb3IgdmFyaW91cyBJU08gODYwMSBkYXRldGltZSBzdHJpbmcgZm9ybWF0cyAoZS5nLiB5eXl5LU1NLWRkVEhIOm1tOnNzLnNzc1ogYW5kIGl0c1xyXG4gKiAgICBzaG9ydGVyIHZlcnNpb25zIGxpa2UgeXl5eS1NTS1kZFRISDptbVosIHl5eXktTU0tZGQgb3IgeXl5eU1NZGRUSEhtbXNzWikuIElmIG5vIHRpbWV6b25lIGlzXHJcbiAqICAgIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGlucHV0LCB0aGUgdGltZSBpcyBjb25zaWRlcmVkIHRvIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBmb3JtYXQgRm9ybWF0dGluZyBydWxlcyAoc2VlIERlc2NyaXB0aW9uKS4gSWYgbm90IHNwZWNpZmllZCxcclxuICogICAgYG1lZGl1bURhdGVgIGlzIHVzZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gdGltZXpvbmUgVGltZXpvbmUgdG8gYmUgdXNlZCBmb3IgZm9ybWF0dGluZy4gUmlnaHQgbm93LCBvbmx5IGAnVVRDJ2AgaXMgc3VwcG9ydGVkLlxyXG4gKiAgICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIgd2lsbCBiZSB1c2VkLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgc3RyaW5nIG9yIHRoZSBpbnB1dCBpZiBpbnB1dCBpcyBub3QgcmVjb2duaXplZCBhcyBkYXRlL21pbGxpcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOidtZWRpdW0nfX08L3NwYW4+OlxyXG4gICAgICAgICAgIDxzcGFuPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSd9fTwvc3Bhbj48YnI+XHJcbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ319PC9zcGFuPjpcclxuICAgICAgICAgIDxzcGFuPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWid9fTwvc3Bhbj48YnI+XHJcbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ319PC9zcGFuPjpcclxuICAgICAgICAgIDxzcGFuPnt7JzEyODgzMjM2MjMwMDYnIHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ319PC9zcGFuPjxicj5cclxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOlwiTU0vZGQveXl5eSAnYXQnIGg6bW1hXCJ9fTwvc3Bhbj46XHJcbiAgICAgICAgICA8c3Bhbj57eycxMjg4MzIzNjIzMDA2JyB8IGRhdGU6XCJNTS9kZC95eXl5ICdhdCcgaDptbWFcIn19PC9zcGFuPjxicj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBmb3JtYXQgZGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiMTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSdcIikpLmdldFRleHQoKSkuXHJcbiAgICAgICAgICAgIHRvTWF0Y2goL09jdCAyXFxkLCAyMDEwIFxcZHsxLDJ9OlxcZHsyfTpcXGR7Mn0gKEFNfFBNKS8pO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiMTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWidcIikpLmdldFRleHQoKSkuXHJcbiAgICAgICAgICAgIHRvTWF0Y2goLzIwMTBcXC0xMFxcLTJcXGQgXFxkezJ9OlxcZHsyfTpcXGR7Mn0gKFxcLXxcXCspP1xcZHs0fS8pO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiJzEyODgzMjM2MjMwMDYnIHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ1wiKSkuZ2V0VGV4dCgpKS5cclxuICAgICAgICAgICAgdG9NYXRjaCgvMTBcXC8yXFxkXFwvMjAxMCBAIFxcZHsxLDJ9OlxcZHsyfShBTXxQTSkvKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIicxMjg4MzIzNjIzMDA2JyB8IGRhdGU6XFxcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVxcXCJcIikpLmdldFRleHQoKSkuXHJcbiAgICAgICAgICAgIHRvTWF0Y2goLzEwXFwvMlxcZFxcLzIwMTAgYXQgXFxkezEsMn06XFxkezJ9KEFNfFBNKS8pO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5kYXRlRmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcclxuZnVuY3Rpb24gZGF0ZUZpbHRlcigkbG9jYWxlKSB7XHJcblxyXG5cclxuICB2YXIgUl9JU084NjAxX1NUUiA9IC9eKFxcZHs0fSktPyhcXGRcXGQpLT8oXFxkXFxkKSg/OlQoXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86XFwuKFxcZCspKT8pPyk/KFp8KFsrLV0pKFxcZFxcZCk6PyhcXGRcXGQpKT8pPyQvO1xyXG4gICAgICAgICAgICAgICAgICAgICAvLyAxICAgICAgICAyICAgICAgIDMgICAgICAgICA0ICAgICAgICAgIDUgICAgICAgICAgNiAgICAgICAgICA3ICAgICAgICAgIDggIDkgICAgIDEwICAgICAgMTFcclxuICBmdW5jdGlvbiBqc29uU3RyaW5nVG9EYXRlKHN0cmluZykge1xyXG4gICAgdmFyIG1hdGNoO1xyXG4gICAgaWYgKG1hdGNoID0gc3RyaW5nLm1hdGNoKFJfSVNPODYwMV9TVFIpKSB7XHJcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCksXHJcbiAgICAgICAgICB0ekhvdXIgPSAwLFxyXG4gICAgICAgICAgdHpNaW4gID0gMCxcclxuICAgICAgICAgIGRhdGVTZXR0ZXIgPSBtYXRjaFs4XSA/IGRhdGUuc2V0VVRDRnVsbFllYXIgOiBkYXRlLnNldEZ1bGxZZWFyLFxyXG4gICAgICAgICAgdGltZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENIb3VycyA6IGRhdGUuc2V0SG91cnM7XHJcblxyXG4gICAgICBpZiAobWF0Y2hbOV0pIHtcclxuICAgICAgICB0ekhvdXIgPSBpbnQobWF0Y2hbOV0gKyBtYXRjaFsxMF0pO1xyXG4gICAgICAgIHR6TWluID0gaW50KG1hdGNoWzldICsgbWF0Y2hbMTFdKTtcclxuICAgICAgfVxyXG4gICAgICBkYXRlU2V0dGVyLmNhbGwoZGF0ZSwgaW50KG1hdGNoWzFdKSwgaW50KG1hdGNoWzJdKSAtIDEsIGludChtYXRjaFszXSkpO1xyXG4gICAgICB2YXIgaCA9IGludChtYXRjaFs0XXx8MCkgLSB0ekhvdXI7XHJcbiAgICAgIHZhciBtID0gaW50KG1hdGNoWzVdfHwwKSAtIHR6TWluO1xyXG4gICAgICB2YXIgcyA9IGludChtYXRjaFs2XXx8MCk7XHJcbiAgICAgIHZhciBtcyA9IE1hdGgucm91bmQocGFyc2VGbG9hdCgnMC4nICsgKG1hdGNoWzddfHwwKSkgKiAxMDAwKTtcclxuICAgICAgdGltZVNldHRlci5jYWxsKGRhdGUsIGgsIG0sIHMsIG1zKTtcclxuICAgICAgcmV0dXJuIGRhdGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RyaW5nO1xyXG4gIH1cclxuXHJcblxyXG4gIHJldHVybiBmdW5jdGlvbihkYXRlLCBmb3JtYXQsIHRpbWV6b25lKSB7XHJcbiAgICB2YXIgdGV4dCA9ICcnLFxyXG4gICAgICAgIHBhcnRzID0gW10sXHJcbiAgICAgICAgZm4sIG1hdGNoO1xyXG5cclxuICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnbWVkaXVtRGF0ZSc7XHJcbiAgICBmb3JtYXQgPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFNbZm9ybWF0XSB8fCBmb3JtYXQ7XHJcbiAgICBpZiAoaXNTdHJpbmcoZGF0ZSkpIHtcclxuICAgICAgZGF0ZSA9IE5VTUJFUl9TVFJJTkcudGVzdChkYXRlKSA/IGludChkYXRlKSA6IGpzb25TdHJpbmdUb0RhdGUoZGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzTnVtYmVyKGRhdGUpKSB7XHJcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWlzRGF0ZShkYXRlKSkge1xyXG4gICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICB3aGlsZShmb3JtYXQpIHtcclxuICAgICAgbWF0Y2ggPSBEQVRFX0ZPUk1BVFNfU1BMSVQuZXhlYyhmb3JtYXQpO1xyXG4gICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICBwYXJ0cyA9IGNvbmNhdChwYXJ0cywgbWF0Y2gsIDEpO1xyXG4gICAgICAgIGZvcm1hdCA9IHBhcnRzLnBvcCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhcnRzLnB1c2goZm9ybWF0KTtcclxuICAgICAgICBmb3JtYXQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRpbWV6b25lICYmIHRpbWV6b25lID09PSAnVVRDJykge1xyXG4gICAgICBkYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgICBkYXRlLnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkgKyBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkpO1xyXG4gICAgfVxyXG4gICAgZm9yRWFjaChwYXJ0cywgZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICBmbiA9IERBVEVfRk9STUFUU1t2YWx1ZV07XHJcbiAgICAgIHRleHQgKz0gZm4gPyBmbihkYXRlLCAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMpXHJcbiAgICAgICAgICAgICAgICAgOiB2YWx1ZS5yZXBsYWNlKC8oXid8JyQpL2csICcnKS5yZXBsYWNlKC8nJy9nLCBcIidcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdGV4dDtcclxuICB9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUganNvblxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogICBBbGxvd3MgeW91IHRvIGNvbnZlcnQgYSBKYXZhU2NyaXB0IG9iamVjdCBpbnRvIEpTT04gc3RyaW5nLlxyXG4gKlxyXG4gKiAgIFRoaXMgZmlsdGVyIGlzIG1vc3RseSB1c2VmdWwgZm9yIGRlYnVnZ2luZy4gV2hlbiB1c2luZyB0aGUgZG91YmxlIGN1cmx5IHt7dmFsdWV9fSBub3RhdGlvblxyXG4gKiAgIHRoZSBiaW5kaW5nIGlzIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIEpTT04uXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IEFueSBKYXZhU2NyaXB0IG9iamVjdCAoaW5jbHVkaW5nIGFycmF5cyBhbmQgcHJpbWl0aXZlIHR5cGVzKSB0byBmaWx0ZXIuXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEpTT04gc3RyaW5nLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHByZT57eyB7J25hbWUnOid2YWx1ZSd9IHwganNvbiB9fTwvcHJlPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGpzb25pZnkgZmlsdGVyZWQgb2JqZWN0cycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwieyduYW1lJzondmFsdWUnfVwiKSkuZ2V0VGV4dCgpKS50b01hdGNoKC9cXHtcXG4gIFwibmFtZVwiOiA/XCJ2YWx1ZVwiXFxufS8pO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRmlsdGVyKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcclxuICAgIHJldHVybiB0b0pzb24ob2JqZWN0LCB0cnVlKTtcclxuICB9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUgbG93ZXJjYXNlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDb252ZXJ0cyBzdHJpbmcgdG8gbG93ZXJjYXNlLlxyXG4gKiBAc2VlIGFuZ3VsYXIubG93ZXJjYXNlXHJcbiAqL1xyXG52YXIgbG93ZXJjYXNlRmlsdGVyID0gdmFsdWVGbihsb3dlcmNhc2UpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIHVwcGVyY2FzZVxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ29udmVydHMgc3RyaW5nIHRvIHVwcGVyY2FzZS5cclxuICogQHNlZSBhbmd1bGFyLnVwcGVyY2FzZVxyXG4gKi9cclxudmFyIHVwcGVyY2FzZUZpbHRlciA9IHZhbHVlRm4odXBwZXJjYXNlKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIGxpbWl0VG9cclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIENyZWF0ZXMgYSBuZXcgYXJyYXkgb3Igc3RyaW5nIGNvbnRhaW5pbmcgb25seSBhIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMuIFRoZSBlbGVtZW50c1xyXG4gKiBhcmUgdGFrZW4gZnJvbSBlaXRoZXIgdGhlIGJlZ2lubmluZyBvciB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXksIHN0cmluZyBvciBudW1iZXIsIGFzIHNwZWNpZmllZCBieVxyXG4gKiB0aGUgdmFsdWUgYW5kIHNpZ24gKHBvc2l0aXZlIG9yIG5lZ2F0aXZlKSBvZiBgbGltaXRgLiBJZiBhIG51bWJlciBpcyB1c2VkIGFzIGlucHV0LCBpdCBpc1xyXG4gKiBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfG51bWJlcn0gaW5wdXQgU291cmNlIGFycmF5LCBzdHJpbmcgb3IgbnVtYmVyIHRvIGJlIGxpbWl0ZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gbGltaXQgVGhlIGxlbmd0aCBvZiB0aGUgcmV0dXJuZWQgYXJyYXkgb3Igc3RyaW5nLiBJZiB0aGUgYGxpbWl0YCBudW1iZXJcclxuICogICAgIGlzIHBvc2l0aXZlLCBgbGltaXRgIG51bWJlciBvZiBpdGVtcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBhcnJheS9zdHJpbmcgYXJlIGNvcGllZC5cclxuICogICAgIElmIHRoZSBudW1iZXIgaXMgbmVnYXRpdmUsIGBsaW1pdGAgbnVtYmVyICBvZiBpdGVtcyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBhcnJheS9zdHJpbmdcclxuICogICAgIGFyZSBjb3BpZWQuIFRoZSBgbGltaXRgIHdpbGwgYmUgdHJpbW1lZCBpZiBpdCBleGNlZWRzIGBhcnJheS5sZW5ndGhgXHJcbiAqIEByZXR1cm5zIHtBcnJheXxzdHJpbmd9IEEgbmV3IHN1Yi1hcnJheSBvciBzdWJzdHJpbmcgb2YgbGVuZ3RoIGBsaW1pdGAgb3IgbGVzcyBpZiBpbnB1dCBhcnJheVxyXG4gKiAgICAgaGFkIGxlc3MgdGhhbiBgbGltaXRgIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJsaW1pdFRvRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbGltaXRUb0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgJHNjb3BlLm51bWJlcnMgPSBbMSwyLDMsNCw1LDYsNyw4LDldO1xyXG4gICAgICAgICAgICAgJHNjb3BlLmxldHRlcnMgPSBcImFiY2RlZmdoaVwiO1xyXG4gICAgICAgICAgICAgJHNjb3BlLmxvbmdOdW1iZXIgPSAyMzQ1NDMyMzQyO1xyXG4gICAgICAgICAgICAgJHNjb3BlLm51bUxpbWl0ID0gMztcclxuICAgICAgICAgICAgICRzY29wZS5sZXR0ZXJMaW1pdCA9IDM7XHJcbiAgICAgICAgICAgICAkc2NvcGUubG9uZ051bWJlckxpbWl0ID0gMztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIExpbWl0IHt7bnVtYmVyc319IHRvOiA8aW5wdXQgdHlwZT1cImludGVnZXJcIiBuZy1tb2RlbD1cIm51bUxpbWl0XCI+XHJcbiAgICAgICAgIDxwPk91dHB1dCBudW1iZXJzOiB7eyBudW1iZXJzIHwgbGltaXRUbzpudW1MaW1pdCB9fTwvcD5cclxuICAgICAgICAgTGltaXQge3tsZXR0ZXJzfX0gdG86IDxpbnB1dCB0eXBlPVwiaW50ZWdlclwiIG5nLW1vZGVsPVwibGV0dGVyTGltaXRcIj5cclxuICAgICAgICAgPHA+T3V0cHV0IGxldHRlcnM6IHt7IGxldHRlcnMgfCBsaW1pdFRvOmxldHRlckxpbWl0IH19PC9wPlxyXG4gICAgICAgICBMaW1pdCB7e2xvbmdOdW1iZXJ9fSB0bzogPGlucHV0IHR5cGU9XCJpbnRlZ2VyXCIgbmctbW9kZWw9XCJsb25nTnVtYmVyTGltaXRcIj5cclxuICAgICAgICAgPHA+T3V0cHV0IGxvbmcgbnVtYmVyOiB7eyBsb25nTnVtYmVyIHwgbGltaXRUbzpsb25nTnVtYmVyTGltaXQgfX08L3A+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgdmFyIG51bUxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdudW1MaW1pdCcpKTtcclxuICAgICAgIHZhciBsZXR0ZXJMaW1pdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbGV0dGVyTGltaXQnKSk7XHJcbiAgICAgICB2YXIgbG9uZ051bWJlckxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsb25nTnVtYmVyTGltaXQnKSk7XHJcbiAgICAgICB2YXIgbGltaXRlZE51bWJlcnMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ251bWJlcnMgfCBsaW1pdFRvOm51bUxpbWl0JykpO1xyXG4gICAgICAgdmFyIGxpbWl0ZWRMZXR0ZXJzID0gZWxlbWVudChieS5iaW5kaW5nKCdsZXR0ZXJzIHwgbGltaXRUbzpsZXR0ZXJMaW1pdCcpKTtcclxuICAgICAgIHZhciBsaW1pdGVkTG9uZ051bWJlciA9IGVsZW1lbnQoYnkuYmluZGluZygnbG9uZ051bWJlciB8IGxpbWl0VG86bG9uZ051bWJlckxpbWl0JykpO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgbGltaXQgdGhlIG51bWJlciBhcnJheSB0byBmaXJzdCB0aHJlZSBpdGVtcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QobnVtTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcclxuICAgICAgICAgZXhwZWN0KGxldHRlckxpbWl0SW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCczJyk7XHJcbiAgICAgICAgIGV4cGVjdChsb25nTnVtYmVyTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcclxuICAgICAgICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFsxLDIsM10nKTtcclxuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMZXR0ZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxldHRlcnM6IGFiYycpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDIzNCcpO1xyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgdGhlIG91dHB1dCB3aGVuIC0zIGlzIGVudGVyZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgbnVtTGltaXRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBudW1MaW1pdElucHV0LnNlbmRLZXlzKCctMycpO1xyXG4gICAgICAgICBsZXR0ZXJMaW1pdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgIGxldHRlckxpbWl0SW5wdXQuc2VuZEtleXMoJy0zJyk7XHJcbiAgICAgICAgIGxvbmdOdW1iZXJMaW1pdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgIGxvbmdOdW1iZXJMaW1pdElucHV0LnNlbmRLZXlzKCctMycpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZE51bWJlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbnVtYmVyczogWzcsOCw5XScpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogZ2hpJyk7XHJcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTG9uZ051bWJlci5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsb25nIG51bWJlcjogMzQyJyk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIG5vdCBleGNlZWQgdGhlIG1heGltdW0gc2l6ZSBvZiBpbnB1dCBhcnJheScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBudW1MaW1pdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgIG51bUxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xyXG4gICAgICAgICBsZXR0ZXJMaW1pdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgIGxldHRlckxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xyXG4gICAgICAgICBsb25nTnVtYmVyTGltaXRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBsb25nTnVtYmVyTGltaXRJbnB1dC5zZW5kS2V5cygnMTAwJyk7XHJcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTnVtYmVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBudW1iZXJzOiBbMSwyLDMsNCw1LDYsNyw4LDldJyk7XHJcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTGV0dGVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsZXR0ZXJzOiBhYmNkZWZnaGknKTtcclxuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMb25nTnVtYmVyLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxvbmcgbnVtYmVyOiAyMzQ1NDMyMzQyJyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uIGxpbWl0VG9GaWx0ZXIoKXtcclxuICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIGxpbWl0KSB7XHJcbiAgICBpZiAoaXNOdW1iZXIoaW5wdXQpKSBpbnB1dCA9IGlucHV0LnRvU3RyaW5nKCk7XHJcbiAgICBpZiAoIWlzQXJyYXkoaW5wdXQpICYmICFpc1N0cmluZyhpbnB1dCkpIHJldHVybiBpbnB1dDtcclxuXHJcbiAgICBpZiAoTWF0aC5hYnMoTnVtYmVyKGxpbWl0KSkgPT09IEluZmluaXR5KSB7XHJcbiAgICAgIGxpbWl0ID0gTnVtYmVyKGxpbWl0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxpbWl0ID0gaW50KGxpbWl0KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNTdHJpbmcoaW5wdXQpKSB7XHJcbiAgICAgIC8vTmFOIGNoZWNrIG9uIGxpbWl0XHJcbiAgICAgIGlmIChsaW1pdCkge1xyXG4gICAgICAgIHJldHVybiBsaW1pdCA+PSAwID8gaW5wdXQuc2xpY2UoMCwgbGltaXQpIDogaW5wdXQuc2xpY2UobGltaXQsIGlucHV0Lmxlbmd0aCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgb3V0ID0gW10sXHJcbiAgICAgIGksIG47XHJcblxyXG4gICAgLy8gaWYgYWJzKGxpbWl0KSBleGNlZWRzIG1heGltdW0gbGVuZ3RoLCB0cmltIGl0XHJcbiAgICBpZiAobGltaXQgPiBpbnB1dC5sZW5ndGgpXHJcbiAgICAgIGxpbWl0ID0gaW5wdXQubGVuZ3RoO1xyXG4gICAgZWxzZSBpZiAobGltaXQgPCAtaW5wdXQubGVuZ3RoKVxyXG4gICAgICBsaW1pdCA9IC1pbnB1dC5sZW5ndGg7XHJcblxyXG4gICAgaWYgKGxpbWl0ID4gMCkge1xyXG4gICAgICBpID0gMDtcclxuICAgICAgbiA9IGxpbWl0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaSA9IGlucHV0Lmxlbmd0aCArIGxpbWl0O1xyXG4gICAgICBuID0gaW5wdXQubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoOyBpPG47IGkrKykge1xyXG4gICAgICBvdXQucHVzaChpbnB1dFtpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG91dDtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBvcmRlckJ5XHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBPcmRlcnMgYSBzcGVjaWZpZWQgYGFycmF5YCBieSB0aGUgYGV4cHJlc3Npb25gIHByZWRpY2F0ZS4gSXQgaXMgb3JkZXJlZCBhbHBoYWJldGljYWxseVxyXG4gKiBmb3Igc3RyaW5ncyBhbmQgbnVtZXJpY2FsbHkgZm9yIG51bWJlcnMuIE5vdGU6IGlmIHlvdSBub3RpY2UgbnVtYmVycyBhcmUgbm90IGJlaW5nIHNvcnRlZFxyXG4gKiBjb3JyZWN0bHksIG1ha2Ugc3VyZSB0aGV5IGFyZSBhY3R1YWxseSBiZWluZyBzYXZlZCBhcyBudW1iZXJzIGFuZCBub3Qgc3RyaW5ncy5cclxuICpcclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNvcnQuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil8c3RyaW5nfEFycmF5LjwoZnVuY3Rpb24oKil8c3RyaW5nKT59IGV4cHJlc3Npb24gQSBwcmVkaWNhdGUgdG8gYmVcclxuICogICAgdXNlZCBieSB0aGUgY29tcGFyYXRvciB0byBkZXRlcm1pbmUgdGhlIG9yZGVyIG9mIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiAgICBDYW4gYmUgb25lIG9mOlxyXG4gKlxyXG4gKiAgICAtIGBmdW5jdGlvbmA6IEdldHRlciBmdW5jdGlvbi4gVGhlIHJlc3VsdCBvZiB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgc29ydGVkIHVzaW5nIHRoZVxyXG4gKiAgICAgIGA8YCwgYD1gLCBgPmAgb3BlcmF0b3IuXHJcbiAqICAgIC0gYHN0cmluZ2A6IEFuIEFuZ3VsYXIgZXhwcmVzc2lvbi4gVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gaXMgdXNlZCB0byBjb21wYXJlIGVsZW1lbnRzXHJcbiAqICAgICAgKGZvciBleGFtcGxlIGBuYW1lYCB0byBzb3J0IGJ5IGEgcHJvcGVydHkgY2FsbGVkIGBuYW1lYCBvciBgbmFtZS5zdWJzdHIoMCwgMylgIHRvIHNvcnQgYnlcclxuICogICAgICAzIGZpcnN0IGNoYXJhY3RlcnMgb2YgYSBwcm9wZXJ0eSBjYWxsZWQgYG5hbWVgKS4gVGhlIHJlc3VsdCBvZiBhIGNvbnN0YW50IGV4cHJlc3Npb25cclxuICogICAgICBpcyBpbnRlcnByZXRlZCBhcyBhIHByb3BlcnR5IG5hbWUgdG8gYmUgdXNlZCBpbiBjb21wYXJpc29ucyAoZm9yIGV4YW1wbGUgYFwic3BlY2lhbCBuYW1lXCJgXHJcbiAqICAgICAgdG8gc29ydCBvYmplY3QgYnkgdGhlIHZhbHVlIG9mIHRoZWlyIGBzcGVjaWFsIG5hbWVgIHByb3BlcnR5KS4gQW4gZXhwcmVzc2lvbiBjYW4gYmVcclxuICogICAgICBvcHRpb25hbGx5IHByZWZpeGVkIHdpdGggYCtgIG9yIGAtYCB0byBjb250cm9sIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nIHNvcnQgb3JkZXJcclxuICogICAgICAoZm9yIGV4YW1wbGUsIGArbmFtZWAgb3IgYC1uYW1lYCkuXHJcbiAqICAgIC0gYEFycmF5YDogQW4gYXJyYXkgb2YgZnVuY3Rpb24gb3Igc3RyaW5nIHByZWRpY2F0ZXMuIFRoZSBmaXJzdCBwcmVkaWNhdGUgaW4gdGhlIGFycmF5XHJcbiAqICAgICAgaXMgdXNlZCBmb3Igc29ydGluZywgYnV0IHdoZW4gdHdvIGl0ZW1zIGFyZSBlcXVpdmFsZW50LCB0aGUgbmV4dCBwcmVkaWNhdGUgaXMgdXNlZC5cclxuICpcclxuICogQHBhcmFtIHtib29sZWFuPX0gcmV2ZXJzZSBSZXZlcnNlIHRoZSBvcmRlciBvZiB0aGUgYXJyYXkuXHJcbiAqIEByZXR1cm5zIHtBcnJheX0gU29ydGVkIGNvcHkgb2YgdGhlIHNvdXJjZSBhcnJheS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwib3JkZXJCeUV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICRzY29wZS5mcmllbmRzID1cclxuICAgICAgICAgICAgICAgICBbe25hbWU6J0pvaG4nLCBwaG9uZTonNTU1LTEyMTInLCBhZ2U6MTB9LFxyXG4gICAgICAgICAgICAgICAgICB7bmFtZTonTWFyeScsIHBob25lOic1NTUtOTg3NicsIGFnZToxOX0sXHJcbiAgICAgICAgICAgICAgICAgIHtuYW1lOidNaWtlJywgcGhvbmU6JzU1NS00MzIxJywgYWdlOjIxfSxcclxuICAgICAgICAgICAgICAgICAge25hbWU6J0FkYW0nLCBwaG9uZTonNTU1LTU2NzgnLCBhZ2U6MzV9LFxyXG4gICAgICAgICAgICAgICAgICB7bmFtZTonSnVsaWUnLCBwaG9uZTonNTU1LTg3NjUnLCBhZ2U6Mjl9XTtcclxuICAgICAgICAgICAgICRzY29wZS5wcmVkaWNhdGUgPSAnLWFnZSc7XHJcbiAgICAgICAgICAgfV0pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICA8cHJlPlNvcnRpbmcgcHJlZGljYXRlID0ge3twcmVkaWNhdGV9fTsgcmV2ZXJzZSA9IHt7cmV2ZXJzZX19PC9wcmU+XHJcbiAgICAgICAgIDxoci8+XHJcbiAgICAgICAgIFsgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicHJlZGljYXRlPScnXCI+dW5zb3J0ZWQ8L2E+IF1cclxuICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kXCI+XHJcbiAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgPHRoPjxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInByZWRpY2F0ZSA9ICduYW1lJzsgcmV2ZXJzZT1mYWxzZVwiPk5hbWU8L2E+XHJcbiAgICAgICAgICAgICAgICAgKDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInByZWRpY2F0ZSA9ICctbmFtZSc7IHJldmVyc2U9ZmFsc2VcIj5ePC9hPik8L3RoPlxyXG4gICAgICAgICAgICAgPHRoPjxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInByZWRpY2F0ZSA9ICdwaG9uZSc7IHJldmVyc2U9IXJldmVyc2VcIj5QaG9uZSBOdW1iZXI8L2E+PC90aD5cclxuICAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJwcmVkaWNhdGUgPSAnYWdlJzsgcmV2ZXJzZT0hcmV2ZXJzZVwiPkFnZTwvYT48L3RoPlxyXG4gICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgb3JkZXJCeTpwcmVkaWNhdGU6cmV2ZXJzZVwiPlxyXG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XHJcbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XHJcbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuYWdlfX08L3RkPlxyXG4gICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICpcclxuICogSXQncyBhbHNvIHBvc3NpYmxlIHRvIGNhbGwgdGhlIG9yZGVyQnkgZmlsdGVyIG1hbnVhbGx5LCBieSBpbmplY3RpbmcgYCRmaWx0ZXJgLCByZXRyaWV2aW5nIHRoZVxyXG4gKiBmaWx0ZXIgcm91dGluZSB3aXRoIGAkZmlsdGVyKCdvcmRlckJ5JylgLCBhbmQgY2FsbGluZyB0aGUgcmV0dXJuZWQgZmlsdGVyIHJvdXRpbmUgd2l0aCB0aGVcclxuICogZGVzaXJlZCBwYXJhbWV0ZXJzLlxyXG4gKlxyXG4gKiBFeGFtcGxlOlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gIDxleGFtcGxlIG1vZHVsZT1cIm9yZGVyQnlFeGFtcGxlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cImZyaWVuZFwiPlxyXG4gICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGg+PGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicmV2ZXJzZT1mYWxzZTtvcmRlcignbmFtZScsIGZhbHNlKVwiPk5hbWU8L2E+XHJcbiAgICAgICAgICAgICAgKDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cIm9yZGVyKCctbmFtZScsZmFsc2UpXCI+XjwvYT4pPC90aD5cclxuICAgICAgICAgICAgPHRoPjxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInJldmVyc2U9IXJldmVyc2U7b3JkZXIoJ3Bob25lJywgcmV2ZXJzZSlcIj5QaG9uZSBOdW1iZXI8L2E+PC90aD5cclxuICAgICAgICAgICAgPHRoPjxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInJldmVyc2U9IXJldmVyc2U7b3JkZXIoJ2FnZScscmV2ZXJzZSlcIj5BZ2U8L2E+PC90aD5cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHNcIj5cclxuICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cclxuICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90YWJsZT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcblxyXG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnb3JkZXJCeUV4YW1wbGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckZmlsdGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkZmlsdGVyKSB7XHJcbiAgICAgICAgICB2YXIgb3JkZXJCeSA9ICRmaWx0ZXIoJ29yZGVyQnknKTtcclxuICAgICAgICAgICRzY29wZS5mcmllbmRzID0gW1xyXG4gICAgICAgICAgICB7IG5hbWU6ICdKb2huJywgICAgcGhvbmU6ICc1NTUtMTIxMicsICAgIGFnZTogMTAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnTWFyeScsICAgIHBob25lOiAnNTU1LTk4NzYnLCAgICBhZ2U6IDE5IH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ01pa2UnLCAgICBwaG9uZTogJzU1NS00MzIxJywgICAgYWdlOiAyMSB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdBZGFtJywgICAgcGhvbmU6ICc1NTUtNTY3OCcsICAgIGFnZTogMzUgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnSnVsaWUnLCAgIHBob25lOiAnNTU1LTg3NjUnLCAgICBhZ2U6IDI5IH1cclxuICAgICAgICAgIF07XHJcbiAgICAgICAgICAkc2NvcGUub3JkZXIgPSBmdW5jdGlvbihwcmVkaWNhdGUsIHJldmVyc2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBvcmRlckJ5KCRzY29wZS5mcmllbmRzLCBwcmVkaWNhdGUsIHJldmVyc2UpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgICRzY29wZS5vcmRlcignLWFnZScsZmFsc2UpO1xyXG4gICAgICAgIH1dKTtcclxuICAgIDwvZmlsZT5cclxuPC9leGFtcGxlPlxyXG4gKi9cclxub3JkZXJCeUZpbHRlci4kaW5qZWN0ID0gWyckcGFyc2UnXTtcclxuZnVuY3Rpb24gb3JkZXJCeUZpbHRlcigkcGFyc2Upe1xyXG4gIHJldHVybiBmdW5jdGlvbihhcnJheSwgc29ydFByZWRpY2F0ZSwgcmV2ZXJzZU9yZGVyKSB7XHJcbiAgICBpZiAoIShpc0FycmF5TGlrZShhcnJheSkpKSByZXR1cm4gYXJyYXk7XHJcbiAgICBpZiAoIXNvcnRQcmVkaWNhdGUpIHJldHVybiBhcnJheTtcclxuICAgIHNvcnRQcmVkaWNhdGUgPSBpc0FycmF5KHNvcnRQcmVkaWNhdGUpID8gc29ydFByZWRpY2F0ZTogW3NvcnRQcmVkaWNhdGVdO1xyXG4gICAgc29ydFByZWRpY2F0ZSA9IG1hcChzb3J0UHJlZGljYXRlLCBmdW5jdGlvbihwcmVkaWNhdGUpe1xyXG4gICAgICB2YXIgZGVzY2VuZGluZyA9IGZhbHNlLCBnZXQgPSBwcmVkaWNhdGUgfHwgaWRlbnRpdHk7XHJcbiAgICAgIGlmIChpc1N0cmluZyhwcmVkaWNhdGUpKSB7XHJcbiAgICAgICAgaWYgKChwcmVkaWNhdGUuY2hhckF0KDApID09ICcrJyB8fCBwcmVkaWNhdGUuY2hhckF0KDApID09ICctJykpIHtcclxuICAgICAgICAgIGRlc2NlbmRpbmcgPSBwcmVkaWNhdGUuY2hhckF0KDApID09ICctJztcclxuICAgICAgICAgIHByZWRpY2F0ZSA9IHByZWRpY2F0ZS5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldCA9ICRwYXJzZShwcmVkaWNhdGUpO1xyXG4gICAgICAgIGlmIChnZXQuY29uc3RhbnQpIHtcclxuICAgICAgICAgIHZhciBrZXkgPSBnZXQoKTtcclxuICAgICAgICAgIHJldHVybiByZXZlcnNlQ29tcGFyYXRvcihmdW5jdGlvbihhLGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmUoYVtrZXldLCBiW2tleV0pO1xyXG4gICAgICAgICAgfSwgZGVzY2VuZGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXZlcnNlQ29tcGFyYXRvcihmdW5jdGlvbihhLGIpe1xyXG4gICAgICAgIHJldHVybiBjb21wYXJlKGdldChhKSxnZXQoYikpO1xyXG4gICAgICB9LCBkZXNjZW5kaW5nKTtcclxuICAgIH0pO1xyXG4gICAgdmFyIGFycmF5Q29weSA9IFtdO1xyXG4gICAgZm9yICggdmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsgYXJyYXlDb3B5LnB1c2goYXJyYXlbaV0pOyB9XHJcbiAgICByZXR1cm4gYXJyYXlDb3B5LnNvcnQocmV2ZXJzZUNvbXBhcmF0b3IoY29tcGFyYXRvciwgcmV2ZXJzZU9yZGVyKSk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGFyYXRvcihvMSwgbzIpe1xyXG4gICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBzb3J0UHJlZGljYXRlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNvbXAgPSBzb3J0UHJlZGljYXRlW2ldKG8xLCBvMik7XHJcbiAgICAgICAgaWYgKGNvbXAgIT09IDApIHJldHVybiBjb21wO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmV2ZXJzZUNvbXBhcmF0b3IoY29tcCwgZGVzY2VuZGluZykge1xyXG4gICAgICByZXR1cm4gZGVzY2VuZGluZ1xyXG4gICAgICAgICAgPyBmdW5jdGlvbihhLGIpe3JldHVybiBjb21wKGIsYSk7fVxyXG4gICAgICAgICAgOiBjb21wO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY29tcGFyZSh2MSwgdjIpe1xyXG4gICAgICB2YXIgdDEgPSB0eXBlb2YgdjE7XHJcbiAgICAgIHZhciB0MiA9IHR5cGVvZiB2MjtcclxuICAgICAgaWYgKHQxID09IHQyKSB7XHJcbiAgICAgICAgaWYgKGlzRGF0ZSh2MSkgJiYgaXNEYXRlKHYyKSkge1xyXG4gICAgICAgICAgdjEgPSB2MS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICB2MiA9IHYyLnZhbHVlT2YoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHQxID09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICB2MSA9IHYxLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgdjIgPSB2Mi50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodjEgPT09IHYyKSByZXR1cm4gMDtcclxuICAgICAgICByZXR1cm4gdjEgPCB2MiA/IC0xIDogMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdDEgPCB0MiA/IC0xIDogMTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5nRGlyZWN0aXZlKGRpcmVjdGl2ZSkge1xyXG4gIGlmIChpc0Z1bmN0aW9uKGRpcmVjdGl2ZSkpIHtcclxuICAgIGRpcmVjdGl2ZSA9IHtcclxuICAgICAgbGluazogZGlyZWN0aXZlXHJcbiAgICB9O1xyXG4gIH1cclxuICBkaXJlY3RpdmUucmVzdHJpY3QgPSBkaXJlY3RpdmUucmVzdHJpY3QgfHwgJ0FDJztcclxuICByZXR1cm4gdmFsdWVGbihkaXJlY3RpdmUpO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBhXHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBNb2RpZmllcyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUgaHRtbCBBIHRhZyBzbyB0aGF0IHRoZSBkZWZhdWx0IGFjdGlvbiBpcyBwcmV2ZW50ZWQgd2hlblxyXG4gKiB0aGUgaHJlZiBhdHRyaWJ1dGUgaXMgZW1wdHkuXHJcbiAqXHJcbiAqIFRoaXMgY2hhbmdlIHBlcm1pdHMgdGhlIGVhc3kgY3JlYXRpb24gb2YgYWN0aW9uIGxpbmtzIHdpdGggdGhlIGBuZ0NsaWNrYCBkaXJlY3RpdmVcclxuICogd2l0aG91dCBjaGFuZ2luZyB0aGUgbG9jYXRpb24gb3IgY2F1c2luZyBwYWdlIHJlbG9hZHMsIGUuZy46XHJcbiAqIGA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJsaXN0LmFkZEl0ZW0oKVwiPkFkZCBJdGVtPC9hPmBcclxuICovXHJcbnZhciBodG1sQW5jaG9yRGlyZWN0aXZlID0gdmFsdWVGbih7XHJcbiAgcmVzdHJpY3Q6ICdFJyxcclxuICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XHJcblxyXG4gICAgaWYgKG1zaWUgPD0gOCkge1xyXG5cclxuICAgICAgLy8gdHVybiA8YSBocmVmIG5nLWNsaWNrPVwiLi5cIj5saW5rPC9hPiBpbnRvIGEgc3R5bGFibGUgbGluayBpbiBJRVxyXG4gICAgICAvLyBidXQgb25seSBpZiBpdCBkb2Vzbid0IGhhdmUgbmFtZSBhdHRyaWJ1dGUsIGluIHdoaWNoIGNhc2UgaXQncyBhbiBhbmNob3JcclxuICAgICAgaWYgKCFhdHRyLmhyZWYgJiYgIWF0dHIubmFtZSkge1xyXG4gICAgICAgIGF0dHIuJHNldCgnaHJlZicsICcnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gYWRkIGEgY29tbWVudCBub2RlIHRvIGFuY2hvcnMgdG8gd29ya2Fyb3VuZCBJRSBidWcgdGhhdCBjYXVzZXMgZWxlbWVudCBjb250ZW50IHRvIGJlIHJlc2V0XHJcbiAgICAgIC8vIHRvIG5ldyBhdHRyaWJ1dGUgY29udGVudCBpZiBhdHRyaWJ1dGUgaXMgdXBkYXRlZCB3aXRoIHZhbHVlIGNvbnRhaW5pbmcgQCBhbmQgZWxlbWVudCBhbHNvXHJcbiAgICAgIC8vIGNvbnRhaW5zIHZhbHVlIHdpdGggQFxyXG4gICAgICAvLyBzZWUgaXNzdWUgIzE5NDlcclxuICAgICAgZWxlbWVudC5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnSUUgZml4JykpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghYXR0ci5ocmVmICYmICFhdHRyLnhsaW5rSHJlZiAmJiAhYXR0ci5uYW1lKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCkge1xyXG4gICAgICAgIC8vIFNWR0FFbGVtZW50IGRvZXMgbm90IHVzZSB0aGUgaHJlZiBhdHRyaWJ1dGUsIGJ1dCByYXRoZXIgdGhlICd4bGlua0hyZWYnIGF0dHJpYnV0ZS5cclxuICAgICAgICB2YXIgaHJlZiA9IHRvU3RyaW5nLmNhbGwoZWxlbWVudC5wcm9wKCdocmVmJykpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nID9cclxuICAgICAgICAgICAgICAgICAgICd4bGluazpocmVmJyA6ICdocmVmJztcclxuICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbm8gaHJlZiB1cmwsIHRoZW4gZG9uJ3QgbmF2aWdhdGUgYW55d2hlcmUuXHJcbiAgICAgICAgICBpZiAoIWVsZW1lbnQuYXR0cihocmVmKSkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0hyZWZcclxuICogQHJlc3RyaWN0IEFcclxuICogQHByaW9yaXR5IDk5XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBVc2luZyBBbmd1bGFyIG1hcmt1cCBsaWtlIGB7e2hhc2h9fWAgaW4gYW4gaHJlZiBhdHRyaWJ1dGUgd2lsbFxyXG4gKiBtYWtlIHRoZSBsaW5rIGdvIHRvIHRoZSB3cm9uZyBVUkwgaWYgdGhlIHVzZXIgY2xpY2tzIGl0IGJlZm9yZVxyXG4gKiBBbmd1bGFyIGhhcyBhIGNoYW5jZSB0byByZXBsYWNlIHRoZSBge3toYXNofX1gIG1hcmt1cCB3aXRoIGl0c1xyXG4gKiB2YWx1ZS4gVW50aWwgQW5ndWxhciByZXBsYWNlcyB0aGUgbWFya3VwIHRoZSBsaW5rIHdpbGwgYmUgYnJva2VuXHJcbiAqIGFuZCB3aWxsIG1vc3QgbGlrZWx5IHJldHVybiBhIDQwNCBlcnJvci5cclxuICpcclxuICogVGhlIGBuZ0hyZWZgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtLlxyXG4gKlxyXG4gKiBUaGUgd3Jvbmcgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxhIGhyZWY9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIj5saW5rMTwvYT5cclxuICogYGBgXHJcbiAqXHJcbiAqIFRoZSBjb3JyZWN0IHdheSB0byB3cml0ZSBpdDpcclxuICogYGBgaHRtbFxyXG4gKiA8YSBuZy1ocmVmPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCI+bGluazE8L2E+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZWxlbWVudCBBXHJcbiAqIEBwYXJhbSB7dGVtcGxhdGV9IG5nSHJlZiBhbnkgc3RyaW5nIHdoaWNoIGNhbiBjb250YWluIGB7e319YCBtYXJrdXAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyB2YXJpb3VzIGNvbWJpbmF0aW9ucyBvZiBgaHJlZmAsIGBuZy1ocmVmYCBhbmQgYG5nLWNsaWNrYCBhdHRyaWJ1dGVzXHJcbiAqIGluIGxpbmtzIGFuZCB0aGVpciBkaWZmZXJlbnQgYmVoYXZpb3JzOlxyXG4gICAgPGV4YW1wbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidmFsdWVcIiAvPjxiciAvPlxyXG4gICAgICAgIDxhIGlkPVwibGluay0xXCIgaHJlZiBuZy1jbGljaz1cInZhbHVlID0gMVwiPmxpbmsgMTwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstMlwiIGhyZWY9XCJcIiBuZy1jbGljaz1cInZhbHVlID0gMlwiPmxpbmsgMjwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstM1wiIG5nLWhyZWY9XCIve3snMTIzJ319XCI+bGluayAzPC9hPiAobGluaywgcmVsb2FkISk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstNFwiIGhyZWY9XCJcIiBuYW1lPVwieHhcIiBuZy1jbGljaz1cInZhbHVlID0gNFwiPmFuY2hvcjwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstNVwiIG5hbWU9XCJ4eHhcIiBuZy1jbGljaz1cInZhbHVlID0gNVwiPmFuY2hvcjwvYT4gKG5vIGxpbmspPGJyIC8+XHJcbiAgICAgICAgPGEgaWQ9XCJsaW5rLTZcIiBuZy1ocmVmPVwie3t2YWx1ZX19XCI+bGluazwvYT4gKGxpbmssIGNoYW5nZSBsb2NhdGlvbilcclxuICAgICAgPC9maWxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gaHJlZiB3aXRob3V0IHZhbHVlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzEnKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBocmVmIGVtcHR5IHN0cmluZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay0yJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCcyJyk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay0yJykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGFuZCBjaGFuZ2UgdXJsIHdoZW4gbmctaHJlZiBzcGVjaWZpZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvTWF0Y2goL1xcLzEyMyQvKTtcclxuXHJcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB3ZSBuYXZpZ2F0ZSBhd2F5IGZyb20gYW4gQW5ndWxhciBwYWdlLCBzbyB3ZSBuZWVkXHJcbiAgICAgICAgICAvLyB0byB1c2UgYnJvd3Nlci5kcml2ZXIgdG8gZ2V0IHRoZSBiYXNlIHdlYmRyaXZlci5cclxuXHJcbiAgICAgICAgICBicm93c2VyLndhaXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBicm93c2VyLmRyaXZlci5nZXRDdXJyZW50VXJsKCkudGhlbihmdW5jdGlvbih1cmwpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKC9cXC8xMjMkLyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC8xMjMnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgeGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nIGFuZCBuYW1lIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay00JykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCc0Jyk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay00JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gbm8gaHJlZiBidXQgbmFtZSBzcGVjaWZpZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5jbGljaygpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnNScpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZShudWxsKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBvbmx5IGNoYW5nZSB1cmwgd2hlbiBvbmx5IG5nLWhyZWYnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmNsZWFyKCk7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5zZW5kS2V5cygnNicpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9NYXRjaCgvXFwvNiQvKTtcclxuXHJcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTYnKSkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB3ZSBuYXZpZ2F0ZSBhd2F5IGZyb20gYW4gQW5ndWxhciBwYWdlLCBzbyB3ZSBuZWVkXHJcbiAgICAgICAgICAvLyB0byB1c2UgYnJvd3Nlci5kcml2ZXIgdG8gZ2V0IHRoZSBiYXNlIHdlYmRyaXZlci5cclxuICAgICAgICAgIGJyb3dzZXIud2FpdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB1cmwubWF0Y2goL1xcLzYkLyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC82Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1NyY1xyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgOTlcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzaW5nIEFuZ3VsYXIgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhIGBzcmNgIGF0dHJpYnV0ZSBkb2Vzbid0XHJcbiAqIHdvcmsgcmlnaHQ6IFRoZSBicm93c2VyIHdpbGwgZmV0Y2ggZnJvbSB0aGUgVVJMIHdpdGggdGhlIGxpdGVyYWxcclxuICogdGV4dCBge3toYXNofX1gIHVudGlsIEFuZ3VsYXIgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXHJcbiAqIGB7e2hhc2h9fWAuIFRoZSBgbmdTcmNgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtLlxyXG4gKlxyXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxpbWcgc3JjPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCIvPlxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGNvcnJlY3Qgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxpbWcgbmctc3JjPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCIvPlxyXG4gKiBgYGBcclxuICpcclxuICogQGVsZW1lbnQgSU1HXHJcbiAqIEBwYXJhbSB7dGVtcGxhdGV9IG5nU3JjIGFueSBzdHJpbmcgd2hpY2ggY2FuIGNvbnRhaW4gYHt7fX1gIG1hcmt1cC5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1NyY3NldFxyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgOTlcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzaW5nIEFuZ3VsYXIgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhIGBzcmNzZXRgIGF0dHJpYnV0ZSBkb2Vzbid0XHJcbiAqIHdvcmsgcmlnaHQ6IFRoZSBicm93c2VyIHdpbGwgZmV0Y2ggZnJvbSB0aGUgVVJMIHdpdGggdGhlIGxpdGVyYWxcclxuICogdGV4dCBge3toYXNofX1gIHVudGlsIEFuZ3VsYXIgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXHJcbiAqIGB7e2hhc2h9fWAuIFRoZSBgbmdTcmNzZXRgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtLlxyXG4gKlxyXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxpbWcgc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIvPlxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGNvcnJlY3Qgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxpbWcgbmctc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIvPlxyXG4gKiBgYGBcclxuICpcclxuICogQGVsZW1lbnQgSU1HXHJcbiAqIEBwYXJhbSB7dGVtcGxhdGV9IG5nU3Jjc2V0IGFueSBzdHJpbmcgd2hpY2ggY2FuIGNvbnRhaW4gYHt7fX1gIG1hcmt1cC5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0Rpc2FibGVkXHJcbiAqIEByZXN0cmljdCBBXHJcbiAqIEBwcmlvcml0eSAxMDBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFdlIHNob3VsZG4ndCBkbyB0aGlzLCBiZWNhdXNlIGl0IHdpbGwgbWFrZSB0aGUgYnV0dG9uIGVuYWJsZWQgb24gQ2hyb21lL0ZpcmVmb3ggYnV0IG5vdCBvbiBJRTggYW5kIG9sZGVyIElFczpcclxuICogYGBgaHRtbFxyXG4gKiA8ZGl2IG5nLWluaXQ9XCJzY29wZSA9IHsgaXNEaXNhYmxlZDogZmFsc2UgfVwiPlxyXG4gKiAgPGJ1dHRvbiBkaXNhYmxlZD1cInt7c2NvcGUuaXNEaXNhYmxlZH19XCI+RGlzYWJsZWQ8L2J1dHRvbj5cclxuICogPC9kaXY+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgSFRNTCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IHJlcXVpcmUgYnJvd3NlcnMgdG8gcHJlc2VydmUgdGhlIHZhbHVlcyBvZiBib29sZWFuIGF0dHJpYnV0ZXNcclxuICogc3VjaCBhcyBkaXNhYmxlZC4gKFRoZWlyIHByZXNlbmNlIG1lYW5zIHRydWUgYW5kIHRoZWlyIGFic2VuY2UgbWVhbnMgZmFsc2UuKVxyXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxyXG4gKiBiaW5kaW5nIGluZm9ybWF0aW9uIHdvdWxkIGJlIGxvc3Qgd2hlbiB0aGUgYnJvd3NlciByZW1vdmVzIHRoZSBhdHRyaWJ1dGUuXHJcbiAqIFRoZSBgbmdEaXNhYmxlZGAgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0gZm9yIHRoZSBgZGlzYWJsZWRgIGF0dHJpYnV0ZS5cclxuICogVGhpcyBjb21wbGVtZW50YXJ5IGRpcmVjdGl2ZSBpcyBub3QgcmVtb3ZlZCBieSB0aGUgYnJvd3NlciBhbmQgc28gcHJvdmlkZXNcclxuICogYSBwZXJtYW5lbnQgcmVsaWFibGUgcGxhY2UgdG8gc3RvcmUgdGhlIGJpbmRpbmcgaW5mb3JtYXRpb24uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICBDbGljayBtZSB0byB0b2dnbGU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIj48YnIvPlxyXG4gICAgICAgIDxidXR0b24gbmctbW9kZWw9XCJidXR0b25cIiBuZy1kaXNhYmxlZD1cImNoZWNrZWRcIj5CdXR0b248L2J1dHRvbj5cclxuICAgICAgPC9maWxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgYnV0dG9uJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJ2J1dHRvbicpKS5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpLnRvQmVGYWxzeSgpO1xyXG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCdidXR0b24nKSkuZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICpcclxuICogQGVsZW1lbnQgSU5QVVRcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0Rpc2FibGVkIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXHJcbiAqICAgICB0aGVuIHNwZWNpYWwgYXR0cmlidXRlIFwiZGlzYWJsZWRcIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0NoZWNrZWRcclxuICogQHJlc3RyaWN0IEFcclxuICogQHByaW9yaXR5IDEwMFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIEhUTUwgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCByZXF1aXJlIGJyb3dzZXJzIHRvIHByZXNlcnZlIHRoZSB2YWx1ZXMgb2YgYm9vbGVhbiBhdHRyaWJ1dGVzXHJcbiAqIHN1Y2ggYXMgY2hlY2tlZC4gKFRoZWlyIHByZXNlbmNlIG1lYW5zIHRydWUgYW5kIHRoZWlyIGFic2VuY2UgbWVhbnMgZmFsc2UuKVxyXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxyXG4gKiBiaW5kaW5nIGluZm9ybWF0aW9uIHdvdWxkIGJlIGxvc3Qgd2hlbiB0aGUgYnJvd3NlciByZW1vdmVzIHRoZSBhdHRyaWJ1dGUuXHJcbiAqIFRoZSBgbmdDaGVja2VkYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGBjaGVja2VkYCBhdHRyaWJ1dGUuXHJcbiAqIFRoaXMgY29tcGxlbWVudGFyeSBkaXJlY3RpdmUgaXMgbm90IHJlbW92ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIHNvIHByb3ZpZGVzXHJcbiAqIGEgcGVybWFuZW50IHJlbGlhYmxlIHBsYWNlIHRvIHN0b3JlIHRoZSBiaW5kaW5nIGluZm9ybWF0aW9uLlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgQ2hlY2sgbWUgdG8gY2hlY2sgYm90aDogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwibWFzdGVyXCI+PGJyLz5cclxuICAgICAgICA8aW5wdXQgaWQ9XCJjaGVja1NsYXZlXCIgdHlwZT1cImNoZWNrYm94XCIgbmctY2hlY2tlZD1cIm1hc3RlclwiPlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIGNoZWNrIGJvdGggY2hlY2tCb3hlcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2NoZWNrU2xhdmUnKSkuZ2V0QXR0cmlidXRlKCdjaGVja2VkJykpLnRvQmVGYWxzeSgpO1xyXG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnbWFzdGVyJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY2hlY2tTbGF2ZScpKS5nZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIEBlbGVtZW50IElOUFVUXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDaGVja2VkIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXHJcbiAqICAgICB0aGVuIHNwZWNpYWwgYXR0cmlidXRlIFwiY2hlY2tlZFwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nUmVhZG9ubHlcclxuICogQHJlc3RyaWN0IEFcclxuICogQHByaW9yaXR5IDEwMFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIEhUTUwgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCByZXF1aXJlIGJyb3dzZXJzIHRvIHByZXNlcnZlIHRoZSB2YWx1ZXMgb2YgYm9vbGVhbiBhdHRyaWJ1dGVzXHJcbiAqIHN1Y2ggYXMgcmVhZG9ubHkuIChUaGVpciBwcmVzZW5jZSBtZWFucyB0cnVlIGFuZCB0aGVpciBhYnNlbmNlIG1lYW5zIGZhbHNlLilcclxuICogSWYgd2UgcHV0IGFuIEFuZ3VsYXIgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uIGludG8gc3VjaCBhbiBhdHRyaWJ1dGUgdGhlbiB0aGVcclxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxyXG4gKiBUaGUgYG5nUmVhZG9ubHlgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtIGZvciB0aGUgYHJlYWRvbmx5YCBhdHRyaWJ1dGUuXHJcbiAqIFRoaXMgY29tcGxlbWVudGFyeSBkaXJlY3RpdmUgaXMgbm90IHJlbW92ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIHNvIHByb3ZpZGVzXHJcbiAqIGEgcGVybWFuZW50IHJlbGlhYmxlIHBsYWNlIHRvIHN0b3JlIHRoZSBiaW5kaW5nIGluZm9ybWF0aW9uLlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgQ2hlY2sgbWUgdG8gbWFrZSB0ZXh0IHJlYWRvbmx5OiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCI+PGJyLz5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1yZWFkb25seT1cImNoZWNrZWRcIiB2YWx1ZT1cIkknbSBBbmd1bGFyXCIvPlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIHRvZ2dsZSByZWFkb25seSBhdHRyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJ1t0eXBlPVwidGV4dFwiXScpKS5nZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JykpLnRvQmVGYWxzeSgpO1xyXG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCdbdHlwZT1cInRleHRcIl0nKSkuZ2V0QXR0cmlidXRlKCdyZWFkb25seScpKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICpcclxuICogQGVsZW1lbnQgSU5QVVRcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1JlYWRvbmx5IElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXHJcbiAqICAgICB0aGVuIHNwZWNpYWwgYXR0cmlidXRlIFwicmVhZG9ubHlcIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1NlbGVjdGVkXHJcbiAqIEByZXN0cmljdCBBXHJcbiAqIEBwcmlvcml0eSAxMDBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBIVE1MIHNwZWNpZmljYXRpb24gZG9lcyBub3QgcmVxdWlyZSBicm93c2VycyB0byBwcmVzZXJ2ZSB0aGUgdmFsdWVzIG9mIGJvb2xlYW4gYXR0cmlidXRlc1xyXG4gKiBzdWNoIGFzIHNlbGVjdGVkLiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXHJcbiAqIElmIHdlIHB1dCBhbiBBbmd1bGFyIGludGVycG9sYXRpb24gZXhwcmVzc2lvbiBpbnRvIHN1Y2ggYW4gYXR0cmlidXRlIHRoZW4gdGhlXHJcbiAqIGJpbmRpbmcgaW5mb3JtYXRpb24gd291bGQgYmUgbG9zdCB3aGVuIHRoZSBicm93c2VyIHJlbW92ZXMgdGhlIGF0dHJpYnV0ZS5cclxuICogVGhlIGBuZ1NlbGVjdGVkYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGBzZWxlY3RlZGAgYXR0cmlidXRlLlxyXG4gKiBUaGlzIGNvbXBsZW1lbnRhcnkgZGlyZWN0aXZlIGlzIG5vdCByZW1vdmVkIGJ5IHRoZSBicm93c2VyIGFuZCBzbyBwcm92aWRlc1xyXG4gKiBhIHBlcm1hbmVudCByZWxpYWJsZSBwbGFjZSB0byBzdG9yZSB0aGUgYmluZGluZyBpbmZvcm1hdGlvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIENoZWNrIG1lIHRvIHNlbGVjdDogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRcIj48YnIvPlxyXG4gICAgICAgIDxzZWxlY3Q+XHJcbiAgICAgICAgICA8b3B0aW9uPkhlbGxvITwvb3B0aW9uPlxyXG4gICAgICAgICAgPG9wdGlvbiBpZD1cImdyZWV0XCIgbmctc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiPkdyZWV0aW5ncyE8L29wdGlvbj5cclxuICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgPC9maWxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzZWxlY3QgR3JlZXRpbmdzIScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2dyZWV0JykpLmdldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzZWxlY3RlZCcpKS5jbGljaygpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2dyZWV0JykpLmdldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnKSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIEBlbGVtZW50IE9QVElPTlxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU2VsZWN0ZWQgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcclxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJzZWxlY3RlZFwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdPcGVuXHJcbiAqIEByZXN0cmljdCBBXHJcbiAqIEBwcmlvcml0eSAxMDBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBIVE1MIHNwZWNpZmljYXRpb24gZG9lcyBub3QgcmVxdWlyZSBicm93c2VycyB0byBwcmVzZXJ2ZSB0aGUgdmFsdWVzIG9mIGJvb2xlYW4gYXR0cmlidXRlc1xyXG4gKiBzdWNoIGFzIG9wZW4uIChUaGVpciBwcmVzZW5jZSBtZWFucyB0cnVlIGFuZCB0aGVpciBhYnNlbmNlIG1lYW5zIGZhbHNlLilcclxuICogSWYgd2UgcHV0IGFuIEFuZ3VsYXIgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uIGludG8gc3VjaCBhbiBhdHRyaWJ1dGUgdGhlbiB0aGVcclxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxyXG4gKiBUaGUgYG5nT3BlbmAgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0gZm9yIHRoZSBgb3BlbmAgYXR0cmlidXRlLlxyXG4gKiBUaGlzIGNvbXBsZW1lbnRhcnkgZGlyZWN0aXZlIGlzIG5vdCByZW1vdmVkIGJ5IHRoZSBicm93c2VyIGFuZCBzbyBwcm92aWRlc1xyXG4gKiBhIHBlcm1hbmVudCByZWxpYWJsZSBwbGFjZSB0byBzdG9yZSB0aGUgYmluZGluZyBpbmZvcm1hdGlvbi5cclxuICogQGV4YW1wbGVcclxuICAgICA8ZXhhbXBsZT5cclxuICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgIENoZWNrIG1lIGNoZWNrIG11bHRpcGxlOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJvcGVuXCI+PGJyLz5cclxuICAgICAgICAgPGRldGFpbHMgaWQ9XCJkZXRhaWxzXCIgbmctb3Blbj1cIm9wZW5cIj5cclxuICAgICAgICAgICAgPHN1bW1hcnk+U2hvdy9IaWRlIG1lPC9zdW1tYXJ5PlxyXG4gICAgICAgICA8L2RldGFpbHM+XHJcbiAgICAgICA8L2ZpbGU+XHJcbiAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgIGl0KCdzaG91bGQgdG9nZ2xlIG9wZW4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZGV0YWlscycpKS5nZXRBdHRyaWJ1dGUoJ29wZW4nKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnb3BlbicpKS5jbGljaygpO1xyXG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdkZXRhaWxzJykpLmdldEF0dHJpYnV0ZSgnb3BlbicpKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICAgPC9maWxlPlxyXG4gICAgIDwvZXhhbXBsZT5cclxuICpcclxuICogQGVsZW1lbnQgREVUQUlMU1xyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nT3BlbiBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxyXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcIm9wZW5cIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxyXG4gKi9cclxuXHJcbnZhciBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyA9IHt9O1xyXG5cclxuXHJcbi8vIGJvb2xlYW4gYXR0cnMgYXJlIGV2YWx1YXRlZFxyXG5mb3JFYWNoKEJPT0xFQU5fQVRUUiwgZnVuY3Rpb24ocHJvcE5hbWUsIGF0dHJOYW1lKSB7XHJcbiAgLy8gYmluZGluZyB0byBtdWx0aXBsZSBpcyBub3Qgc3VwcG9ydGVkXHJcbiAgaWYgKHByb3BOYW1lID09IFwibXVsdGlwbGVcIikgcmV0dXJuO1xyXG5cclxuICB2YXIgbm9ybWFsaXplZCA9IGRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJyArIGF0dHJOYW1lKTtcclxuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlc1tub3JtYWxpemVkXSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgcHJpb3JpdHk6IDEwMCxcclxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0cltub3JtYWxpemVkXSwgZnVuY3Rpb24gbmdCb29sZWFuQXR0cldhdGNoQWN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBhdHRyLiRzZXQoYXR0ck5hbWUsICEhdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH07XHJcbn0pO1xyXG5cclxuLy8gYWxpYXNlZCBpbnB1dCBhdHRycyBhcmUgZXZhbHVhdGVkXHJcbmZvckVhY2goQUxJQVNFRF9BVFRSLCBmdW5jdGlvbihodG1sQXR0ciwgbmdBdHRyKSB7XHJcbiAgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXNbbmdBdHRyXSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcHJpb3JpdHk6IDEwMCxcclxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAvL3NwZWNpYWwgY2FzZSBuZ1BhdHRlcm4gd2hlbiBhIGxpdGVyYWwgcmVndWxhciBleHByZXNzaW9uIHZhbHVlXHJcbiAgICAgICAgLy9pcyB1c2VkIGFzIHRoZSBleHByZXNzaW9uICh0aGlzIHdheSB3ZSBkb24ndCBoYXZlIHRvIHdhdGNoIGFueXRoaW5nKS5cclxuICAgICAgICBpZiAobmdBdHRyID09PSBcIm5nUGF0dGVyblwiICYmIGF0dHIubmdQYXR0ZXJuLmNoYXJBdCgwKSA9PSBcIi9cIikge1xyXG4gICAgICAgICAgdmFyIG1hdGNoID0gYXR0ci5uZ1BhdHRlcm4ubWF0Y2goUkVHRVhfU1RSSU5HX1JFR0VYUCk7XHJcbiAgICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgYXR0ci4kc2V0KFwibmdQYXR0ZXJuXCIsIG5ldyBSZWdFeHAobWF0Y2hbMV0sIG1hdGNoWzJdKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyW25nQXR0cl0sIGZ1bmN0aW9uIG5nQXR0ckFsaWFzV2F0Y2hBY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIGF0dHIuJHNldChuZ0F0dHIsIHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9O1xyXG59KTtcclxuXHJcbi8vIG5nLXNyYywgbmctc3Jjc2V0LCBuZy1ocmVmIGFyZSBpbnRlcnBvbGF0ZWRcclxuZm9yRWFjaChbJ3NyYycsICdzcmNzZXQnLCAnaHJlZiddLCBmdW5jdGlvbihhdHRyTmFtZSkge1xyXG4gIHZhciBub3JtYWxpemVkID0gZGlyZWN0aXZlTm9ybWFsaXplKCduZy0nICsgYXR0ck5hbWUpO1xyXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcmlvcml0eTogOTksIC8vIGl0IG5lZWRzIHRvIHJ1biBhZnRlciB0aGUgYXR0cmlidXRlcyBhcmUgaW50ZXJwb2xhdGVkXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgdmFyIHByb3BOYW1lID0gYXR0ck5hbWUsXHJcbiAgICAgICAgICAgIG5hbWUgPSBhdHRyTmFtZTtcclxuXHJcbiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAnaHJlZicgJiZcclxuICAgICAgICAgICAgdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSkgPT09ICdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXScpIHtcclxuICAgICAgICAgIG5hbWUgPSAneGxpbmtIcmVmJztcclxuICAgICAgICAgIGF0dHIuJGF0dHJbbmFtZV0gPSAneGxpbms6aHJlZic7XHJcbiAgICAgICAgICBwcm9wTmFtZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhdHRyLiRvYnNlcnZlKG5vcm1hbGl6ZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ2hyZWYnKSB7XHJcbiAgICAgICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBhdHRyLiRzZXQobmFtZSwgdmFsdWUpO1xyXG5cclxuICAgICAgICAgIC8vIG9uIElFLCBpZiBcIm5nOnNyY1wiIGRpcmVjdGl2ZSBkZWNsYXJhdGlvbiBpcyB1c2VkIGFuZCBcInNyY1wiIGF0dHJpYnV0ZSBkb2Vzbid0IGV4aXN0XHJcbiAgICAgICAgICAvLyB0aGVuIGNhbGxpbmcgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsICdmb28nKSBkb2Vzbid0IGRvIGFueXRoaW5nLCBzbyB3ZSBuZWVkXHJcbiAgICAgICAgICAvLyB0byBzZXQgdGhlIHByb3BlcnR5IGFzIHdlbGwgdG8gYWNoaWV2ZSB0aGUgZGVzaXJlZCBlZmZlY3QuXHJcbiAgICAgICAgICAvLyB3ZSB1c2UgYXR0clthdHRyTmFtZV0gdmFsdWUgc2luY2UgJHNldCBjYW4gc2FuaXRpemUgdGhlIHVybC5cclxuICAgICAgICAgIGlmIChtc2llICYmIHByb3BOYW1lKSBlbGVtZW50LnByb3AocHJvcE5hbWUsIGF0dHJbbmFtZV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH07XHJcbn0pO1xyXG5cclxuLyogZ2xvYmFsIC1udWxsRm9ybUN0cmwsIC1TVUJNSVRURURfQ0xBU1MsIGFkZFNldFZhbGlkaXR5TWV0aG9kOiB0cnVlXHJcbiAqL1xyXG52YXIgbnVsbEZvcm1DdHJsID0ge1xyXG4gICRhZGRDb250cm9sOiBub29wLFxyXG4gICRyZW1vdmVDb250cm9sOiBub29wLFxyXG4gICRzZXRWYWxpZGl0eTogbm9vcCxcclxuICAkJHNldFBlbmRpbmc6IG5vb3AsXHJcbiAgJHNldERpcnR5OiBub29wLFxyXG4gICRzZXRQcmlzdGluZTogbm9vcCxcclxuICAkc2V0U3VibWl0dGVkOiBub29wLFxyXG4gICQkY2xlYXJDb250cm9sVmFsaWRpdHk6IG5vb3BcclxufSxcclxuU1VCTUlUVEVEX0NMQVNTID0gJ25nLXN1Ym1pdHRlZCc7XHJcblxyXG4vKipcclxuICogQG5nZG9jIHR5cGVcclxuICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlclxyXG4gKlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGZvcm0geWV0LlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRkaXJ0eSBUcnVlIGlmIHVzZXIgaGFzIGFscmVhZHkgaW50ZXJhY3RlZCB3aXRoIHRoZSBmb3JtLlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR2YWxpZCBUcnVlIGlmIGFsbCBvZiB0aGUgY29udGFpbmluZyBmb3JtcyBhbmQgY29udHJvbHMgYXJlIHZhbGlkLlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGNvbnRhaW5pbmcgY29udHJvbCBvciBmb3JtIGlzIGludmFsaWQuXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHN1Ym1pdHRlZCBUcnVlIGlmIHVzZXIgaGFzIHN1Ym1pdHRlZCB0aGUgZm9ybSBldmVuIGlmIGl0cyBpbnZhbGlkLlxyXG4gKlxyXG4gKiBAcHJvcGVydHkge09iamVjdH0gJGVycm9yIElzIGFuIG9iamVjdCBoYXNoLCBjb250YWluaW5nIHJlZmVyZW5jZXMgdG8gY29udHJvbHMgb3JcclxuICogIGZvcm1zIHdpdGggZmFpbGluZyB2YWxpZGF0b3JzLCB3aGVyZTpcclxuICpcclxuICogIC0ga2V5cyBhcmUgdmFsaWRhdGlvbiB0b2tlbnMgKGVycm9yIG5hbWVzKSxcclxuICogIC0gdmFsdWVzIGFyZSBhcnJheXMgb2YgY29udHJvbHMgb3IgZm9ybXMgdGhhdCBoYXZlIGEgZmFpbGluZyB2YWxpZGF0b3IgZm9yIGdpdmVuIGVycm9yIG5hbWUuXHJcbiAqXHJcbiAqICBCdWlsdC1pbiB2YWxpZGF0aW9uIHRva2VuczpcclxuICpcclxuICogIC0gYGVtYWlsYFxyXG4gKiAgLSBgbWF4YFxyXG4gKiAgLSBgbWF4bGVuZ3RoYFxyXG4gKiAgLSBgbWluYFxyXG4gKiAgLSBgbWlubGVuZ3RoYFxyXG4gKiAgLSBgbnVtYmVyYFxyXG4gKiAgLSBgcGF0dGVybmBcclxuICogIC0gYHJlcXVpcmVkYFxyXG4gKiAgLSBgdXJsYFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogYEZvcm1Db250cm9sbGVyYCBrZWVwcyB0cmFjayBvZiBhbGwgaXRzIGNvbnRyb2xzIGFuZCBuZXN0ZWQgZm9ybXMgYXMgd2VsbCBhcyB0aGUgc3RhdGUgb2YgdGhlbSxcclxuICogc3VjaCBhcyBiZWluZyB2YWxpZC9pbnZhbGlkIG9yIGRpcnR5L3ByaXN0aW5lLlxyXG4gKlxyXG4gKiBFYWNoIHtAbGluayBuZy5kaXJlY3RpdmU6Zm9ybSBmb3JtfSBkaXJlY3RpdmUgY3JlYXRlcyBhbiBpbnN0YW5jZVxyXG4gKiBvZiBgRm9ybUNvbnRyb2xsZXJgLlxyXG4gKlxyXG4gKi9cclxuLy9hc2tzIGZvciAkc2NvcGUgdG8gZm9vbCB0aGUgQkMgY29udHJvbGxlciBtb2R1bGVcclxuRm9ybUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGVsZW1lbnQnLCAnJGF0dHJzJywgJyRzY29wZScsICckYW5pbWF0ZSddO1xyXG5mdW5jdGlvbiBGb3JtQ29udHJvbGxlcihlbGVtZW50LCBhdHRycywgJHNjb3BlLCAkYW5pbWF0ZSkge1xyXG4gIHZhciBmb3JtID0gdGhpcyxcclxuICAgICAgcGFyZW50Rm9ybSA9IGVsZW1lbnQucGFyZW50KCkuY29udHJvbGxlcignZm9ybScpIHx8IG51bGxGb3JtQ3RybCxcclxuICAgICAgY29udHJvbHMgPSBbXTtcclxuXHJcbiAgLy8gaW5pdCBzdGF0ZVxyXG4gIGZvcm0uJGVycm9yID0ge307XHJcbiAgZm9ybS4kJHN1Y2Nlc3MgPSB7fTtcclxuICBmb3JtLiRwZW5kaW5nID0gdW5kZWZpbmVkO1xyXG4gIGZvcm0uJG5hbWUgPSBhdHRycy5uYW1lIHx8IGF0dHJzLm5nRm9ybTtcclxuICBmb3JtLiRkaXJ0eSA9IGZhbHNlO1xyXG4gIGZvcm0uJHByaXN0aW5lID0gdHJ1ZTtcclxuICBmb3JtLiR2YWxpZCA9IHRydWU7XHJcbiAgZm9ybS4kaW52YWxpZCA9IGZhbHNlO1xyXG4gIGZvcm0uJHN1Ym1pdHRlZCA9IGZhbHNlO1xyXG5cclxuICBwYXJlbnRGb3JtLiRhZGRDb250cm9sKGZvcm0pO1xyXG5cclxuICAvLyBTZXR1cCBpbml0aWFsIHN0YXRlIG9mIHRoZSBjb250cm9sXHJcbiAgZWxlbWVudC5hZGRDbGFzcyhQUklTVElORV9DTEFTUyk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRyb2xsYmFja1ZpZXdWYWx1ZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUm9sbGJhY2sgYWxsIGZvcm0gY29udHJvbHMgcGVuZGluZyB1cGRhdGVzIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxyXG4gICAqXHJcbiAgICogVXBkYXRlcyBtYXkgYmUgcGVuZGluZyBieSBhIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBhIHNvbWUgZnV0dXJlXHJcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIFRoaXMgbWV0aG9kIGlzIHR5cGljYWxseSBuZWVkZWQgYnkgdGhlIHJlc2V0IGJ1dHRvbiBvZlxyXG4gICAqIGEgZm9ybSB0aGF0IHVzZXMgYG5nLW1vZGVsLW9wdGlvbnNgIHRvIHBlbmQgdXBkYXRlcy5cclxuICAgKi9cclxuICBmb3JtLiRyb2xsYmFja1ZpZXdWYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yRWFjaChjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xyXG4gICAgICBjb250cm9sLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJGNvbW1pdFZpZXdWYWx1ZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ29tbWl0IGFsbCBmb3JtIGNvbnRyb2xzIHBlbmRpbmcgdXBkYXRlcyB0byB0aGUgYCRtb2RlbFZhbHVlYC5cclxuICAgKlxyXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxyXG4gICAqIGV2ZW50IGRlZmluZWQgaW4gYG5nLW1vZGVsLW9wdGlvbnNgLiBUaGlzIG1ldGhvZCBpcyByYXJlbHkgbmVlZGVkIGFzIGBOZ01vZGVsQ29udHJvbGxlcmBcclxuICAgKiB1c3VhbGx5IGhhbmRsZXMgY2FsbGluZyB0aGlzIGluIHJlc3BvbnNlIHRvIGlucHV0IGV2ZW50cy5cclxuICAgKi9cclxuICBmb3JtLiRjb21taXRWaWV3VmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvckVhY2goY29udHJvbHMsIGZ1bmN0aW9uKGNvbnRyb2wpIHtcclxuICAgICAgY29udHJvbC4kY29tbWl0Vmlld1ZhbHVlKCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkYWRkQ29udHJvbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmVnaXN0ZXIgYSBjb250cm9sIHdpdGggdGhlIGZvcm0uXHJcbiAgICpcclxuICAgKiBJbnB1dCBlbGVtZW50cyB1c2luZyBuZ01vZGVsQ29udHJvbGxlciBkbyB0aGlzIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGV5IGFyZSBsaW5rZWQuXHJcbiAgICovXHJcbiAgZm9ybS4kYWRkQ29udHJvbCA9IGZ1bmN0aW9uKGNvbnRyb2wpIHtcclxuICAgIC8vIEJyZWFraW5nIGNoYW5nZSAtIGJlZm9yZSwgaW5wdXRzIHdob3NlIG5hbWUgd2FzIFwiaGFzT3duUHJvcGVydHlcIiB3ZXJlIHF1aWV0bHkgaWdub3JlZFxyXG4gICAgLy8gYW5kIG5vdCBhZGRlZCB0byB0aGUgc2NvcGUuICBOb3cgd2UgdGhyb3cgYW4gZXJyb3IuXHJcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShjb250cm9sLiRuYW1lLCAnaW5wdXQnKTtcclxuICAgIGNvbnRyb2xzLnB1c2goY29udHJvbCk7XHJcblxyXG4gICAgaWYgKGNvbnRyb2wuJG5hbWUpIHtcclxuICAgICAgZm9ybVtjb250cm9sLiRuYW1lXSA9IGNvbnRyb2w7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHJlbW92ZUNvbnRyb2xcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIERlcmVnaXN0ZXIgYSBjb250cm9sIGZyb20gdGhlIGZvcm0uXHJcbiAgICpcclxuICAgKiBJbnB1dCBlbGVtZW50cyB1c2luZyBuZ01vZGVsQ29udHJvbGxlciBkbyB0aGlzIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGV5IGFyZSBkZXN0cm95ZWQuXHJcbiAgICovXHJcbiAgZm9ybS4kcmVtb3ZlQ29udHJvbCA9IGZ1bmN0aW9uKGNvbnRyb2wpIHtcclxuICAgIGlmIChjb250cm9sLiRuYW1lICYmIGZvcm1bY29udHJvbC4kbmFtZV0gPT09IGNvbnRyb2wpIHtcclxuICAgICAgZGVsZXRlIGZvcm1bY29udHJvbC4kbmFtZV07XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoKGZvcm0uJHBlbmRpbmcsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XHJcbiAgICAgIGZvcm0uJHNldFZhbGlkaXR5KG5hbWUsIG51bGwsIGNvbnRyb2wpO1xyXG4gICAgfSk7XHJcbiAgICBmb3JFYWNoKGZvcm0uJGVycm9yLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xyXG4gICAgICBmb3JtLiRzZXRWYWxpZGl0eShuYW1lLCBudWxsLCBjb250cm9sKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFycmF5UmVtb3ZlKGNvbnRyb2xzLCBjb250cm9sKTtcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFZhbGlkaXR5XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSB2YWxpZGl0eSBvZiBhIGZvcm0gY29udHJvbC5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gcGFyZW50IGZvcm1zLlxyXG4gICAqL1xyXG4gIGFkZFNldFZhbGlkaXR5TWV0aG9kKHtcclxuICAgIGN0cmw6IHRoaXMsXHJcbiAgICAkZWxlbWVudDogZWxlbWVudCxcclxuICAgIHNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgY29udHJvbCkge1xyXG4gICAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XHJcbiAgICAgIGlmICghbGlzdCkge1xyXG4gICAgICAgIG9iamVjdFtwcm9wZXJ0eV0gPSBbY29udHJvbF07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gbGlzdC5pbmRleE9mKGNvbnRyb2wpO1xyXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgIGxpc3QucHVzaChjb250cm9sKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB1bnNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgY29udHJvbCkge1xyXG4gICAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XHJcbiAgICAgIGlmICghbGlzdCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBhcnJheVJlbW92ZShsaXN0LCBjb250cm9sKTtcclxuICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBwYXJlbnRGb3JtOiBwYXJlbnRGb3JtLFxyXG4gICAgJGFuaW1hdGU6ICRhbmltYXRlXHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXREaXJ0eVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgZm9ybSB0byBhIGRpcnR5IHN0YXRlLlxyXG4gICAqXHJcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byBhZGQgdGhlICduZy1kaXJ0eScgY2xhc3MgYW5kIHNldCB0aGUgZm9ybSB0byBhIGRpcnR5XHJcbiAgICogc3RhdGUgKG5nLWRpcnR5IGNsYXNzKS4gVGhpcyBtZXRob2Qgd2lsbCBhbHNvIHByb3BhZ2F0ZSB0byBwYXJlbnQgZm9ybXMuXHJcbiAgICovXHJcbiAgZm9ybS4kc2V0RGlydHkgPSBmdW5jdGlvbigpIHtcclxuICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcclxuICAgICRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcclxuICAgIGZvcm0uJGRpcnR5ID0gdHJ1ZTtcclxuICAgIGZvcm0uJHByaXN0aW5lID0gZmFsc2U7XHJcbiAgICBwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRQcmlzdGluZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgZm9ybSB0byBpdHMgcHJpc3RpbmUgc3RhdGUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgJ25nLWRpcnR5JyBjbGFzcyBhbmQgc2V0IHRoZSBmb3JtIHRvIGl0cyBwcmlzdGluZVxyXG4gICAqIHN0YXRlIChuZy1wcmlzdGluZSBjbGFzcykuIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gYWxsIHRoZSBjb250cm9scyBjb250YWluZWRcclxuICAgKiBpbiB0aGlzIGZvcm0uXHJcbiAgICpcclxuICAgKiBTZXR0aW5nIGEgZm9ybSBiYWNrIHRvIGEgcHJpc3RpbmUgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gd2Ugd2FudCB0byAncmV1c2UnIGEgZm9ybSBhZnRlclxyXG4gICAqIHNhdmluZyBvciByZXNldHRpbmcgaXQuXHJcbiAgICovXHJcbiAgZm9ybS4kc2V0UHJpc3RpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkYW5pbWF0ZS5zZXRDbGFzcyhlbGVtZW50LCBQUklTVElORV9DTEFTUywgRElSVFlfQ0xBU1MgKyAnICcgKyBTVUJNSVRURURfQ0xBU1MpO1xyXG4gICAgZm9ybS4kZGlydHkgPSBmYWxzZTtcclxuICAgIGZvcm0uJHByaXN0aW5lID0gdHJ1ZTtcclxuICAgIGZvcm0uJHN1Ym1pdHRlZCA9IGZhbHNlO1xyXG4gICAgZm9yRWFjaChjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xyXG4gICAgICBjb250cm9sLiRzZXRQcmlzdGluZSgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFN1Ym1pdHRlZFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgZm9ybSB0byBpdHMgc3VibWl0dGVkIHN0YXRlLlxyXG4gICAqL1xyXG4gIGZvcm0uJHNldFN1Ym1pdHRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsIFNVQk1JVFRFRF9DTEFTUyk7XHJcbiAgICBmb3JtLiRzdWJtaXR0ZWQgPSB0cnVlO1xyXG4gICAgcGFyZW50Rm9ybS4kc2V0U3VibWl0dGVkKCk7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdGb3JtXHJcbiAqIEByZXN0cmljdCBFQUNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIE5lc3RhYmxlIGFsaWFzIG9mIHtAbGluayBuZy5kaXJlY3RpdmU6Zm9ybSBgZm9ybWB9IGRpcmVjdGl2ZS4gSFRNTFxyXG4gKiBkb2VzIG5vdCBhbGxvdyBuZXN0aW5nIG9mIGZvcm0gZWxlbWVudHMuIEl0IGlzIHVzZWZ1bCB0byBuZXN0IGZvcm1zLCBmb3IgZXhhbXBsZSBpZiB0aGUgdmFsaWRpdHkgb2YgYVxyXG4gKiBzdWItZ3JvdXAgb2YgY29udHJvbHMgbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZC5cclxuICpcclxuICogTm90ZTogdGhlIHB1cnBvc2Ugb2YgYG5nRm9ybWAgaXMgdG8gZ3JvdXAgY29udHJvbHMsXHJcbiAqIGJ1dCBub3QgdG8gYmUgYSByZXBsYWNlbWVudCBmb3IgdGhlIGA8Zm9ybT5gIHRhZyB3aXRoIGFsbCBvZiBpdHMgY2FwYWJpbGl0aWVzXHJcbiAqIChlLmcuIHBvc3RpbmcgdG8gdGhlIHNlcnZlciwgLi4uKS5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0Zvcm18bmFtZSBOYW1lIG9mIHRoZSBmb3JtLiBJZiBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgd2lsbCBiZSBwdWJsaXNoZWQgaW50b1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZCBzY29wZSwgdW5kZXIgdGhpcyBuYW1lLlxyXG4gKlxyXG4gKi9cclxuXHJcbiAvKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBmb3JtXHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEaXJlY3RpdmUgdGhhdCBpbnN0YW50aWF0ZXNcclxuICoge0BsaW5rIGZvcm0uRm9ybUNvbnRyb2xsZXIgRm9ybUNvbnRyb2xsZXJ9LlxyXG4gKlxyXG4gKiBJZiB0aGUgYG5hbWVgIGF0dHJpYnV0ZSBpcyBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgaXMgcHVibGlzaGVkIG9udG8gdGhlIGN1cnJlbnQgc2NvcGUgdW5kZXJcclxuICogdGhpcyBuYW1lLlxyXG4gKlxyXG4gKiAjIEFsaWFzOiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nRm9ybSBgbmdGb3JtYH1cclxuICpcclxuICogSW4gQW5ndWxhciBmb3JtcyBjYW4gYmUgbmVzdGVkLiBUaGlzIG1lYW5zIHRoYXQgdGhlIG91dGVyIGZvcm0gaXMgdmFsaWQgd2hlbiBhbGwgb2YgdGhlIGNoaWxkXHJcbiAqIGZvcm1zIGFyZSB2YWxpZCBhcyB3ZWxsLiBIb3dldmVyLCBicm93c2VycyBkbyBub3QgYWxsb3cgbmVzdGluZyBvZiBgPGZvcm0+YCBlbGVtZW50cywgc29cclxuICogQW5ndWxhciBwcm92aWRlcyB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0Zvcm0gYG5nRm9ybWB9IGRpcmVjdGl2ZSB3aGljaCBiZWhhdmVzIGlkZW50aWNhbGx5IHRvXHJcbiAqIGA8Zm9ybT5gIGJ1dCBjYW4gYmUgbmVzdGVkLiAgVGhpcyBhbGxvd3MgeW91IHRvIGhhdmUgbmVzdGVkIGZvcm1zLCB3aGljaCBpcyB2ZXJ5IHVzZWZ1bCB3aGVuXHJcbiAqIHVzaW5nIEFuZ3VsYXIgdmFsaWRhdGlvbiBkaXJlY3RpdmVzIGluIGZvcm1zIHRoYXQgYXJlIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCB1c2luZyB0aGVcclxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBgbmdSZXBlYXRgfSBkaXJlY3RpdmUuIFNpbmNlIHlvdSBjYW5ub3QgZHluYW1pY2FsbHkgZ2VuZXJhdGUgdGhlIGBuYW1lYFxyXG4gKiBhdHRyaWJ1dGUgb2YgaW5wdXQgZWxlbWVudHMgdXNpbmcgaW50ZXJwb2xhdGlvbiwgeW91IGhhdmUgdG8gd3JhcCBlYWNoIHNldCBvZiByZXBlYXRlZCBpbnB1dHMgaW4gYW5cclxuICogYG5nRm9ybWAgZGlyZWN0aXZlIGFuZCBuZXN0IHRoZXNlIGluIGFuIG91dGVyIGBmb3JtYCBlbGVtZW50LlxyXG4gKlxyXG4gKlxyXG4gKiAjIENTUyBjbGFzc2VzXHJcbiAqICAtIGBuZy12YWxpZGAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIHZhbGlkLlxyXG4gKiAgLSBgbmctaW52YWxpZGAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIGludmFsaWQuXHJcbiAqICAtIGBuZy1wcmlzdGluZWAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIHByaXN0aW5lLlxyXG4gKiAgLSBgbmctZGlydHlgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBkaXJ0eS5cclxuICogIC0gYG5nLXN1Ym1pdHRlZGAgaXMgc2V0IGlmIHRoZSBmb3JtIHdhcyBzdWJtaXR0ZWQuXHJcbiAqXHJcbiAqIEtlZXAgaW4gbWluZCB0aGF0IG5nQW5pbWF0ZSBjYW4gZGV0ZWN0IGVhY2ggb2YgdGhlc2UgY2xhc3NlcyB3aGVuIGFkZGVkIGFuZCByZW1vdmVkLlxyXG4gKlxyXG4gKlxyXG4gKiAjIFN1Ym1pdHRpbmcgYSBmb3JtIGFuZCBwcmV2ZW50aW5nIHRoZSBkZWZhdWx0IGFjdGlvblxyXG4gKlxyXG4gKiBTaW5jZSB0aGUgcm9sZSBvZiBmb3JtcyBpbiBjbGllbnQtc2lkZSBBbmd1bGFyIGFwcGxpY2F0aW9ucyBpcyBkaWZmZXJlbnQgdGhhbiBpbiBjbGFzc2ljYWxcclxuICogcm91bmR0cmlwIGFwcHMsIGl0IGlzIGRlc2lyYWJsZSBmb3IgdGhlIGJyb3dzZXIgbm90IHRvIHRyYW5zbGF0ZSB0aGUgZm9ybSBzdWJtaXNzaW9uIGludG8gYSBmdWxsXHJcbiAqIHBhZ2UgcmVsb2FkIHRoYXQgc2VuZHMgdGhlIGRhdGEgdG8gdGhlIHNlcnZlci4gSW5zdGVhZCBzb21lIGphdmFzY3JpcHQgbG9naWMgc2hvdWxkIGJlIHRyaWdnZXJlZFxyXG4gKiB0byBoYW5kbGUgdGhlIGZvcm0gc3VibWlzc2lvbiBpbiBhbiBhcHBsaWNhdGlvbi1zcGVjaWZpYyB3YXkuXHJcbiAqXHJcbiAqIEZvciB0aGlzIHJlYXNvbiwgQW5ndWxhciBwcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gKGZvcm0gc3VibWlzc2lvbiB0byB0aGUgc2VydmVyKSB1bmxlc3MgdGhlXHJcbiAqIGA8Zm9ybT5gIGVsZW1lbnQgaGFzIGFuIGBhY3Rpb25gIGF0dHJpYnV0ZSBzcGVjaWZpZWQuXHJcbiAqXHJcbiAqIFlvdSBjYW4gdXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHR3byB3YXlzIHRvIHNwZWNpZnkgd2hhdCBqYXZhc2NyaXB0IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIHdoZW5cclxuICogYSBmb3JtIGlzIHN1Ym1pdHRlZDpcclxuICpcclxuICogLSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU3VibWl0IG5nU3VibWl0fSBkaXJlY3RpdmUgb24gdGhlIGZvcm0gZWxlbWVudFxyXG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSBkaXJlY3RpdmUgb24gdGhlIGZpcnN0XHJcbiAgKiAgYnV0dG9uIG9yIGlucHV0IGZpZWxkIG9mIHR5cGUgc3VibWl0IChpbnB1dFt0eXBlPXN1Ym1pdF0pXHJcbiAqXHJcbiAqIFRvIHByZXZlbnQgZG91YmxlIGV4ZWN1dGlvbiBvZiB0aGUgaGFuZGxlciwgdXNlIG9ubHkgb25lIG9mIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU3VibWl0IG5nU3VibWl0fVxyXG4gKiBvciB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja30gZGlyZWN0aXZlcy5cclxuICogVGhpcyBpcyBiZWNhdXNlIG9mIHRoZSBmb2xsb3dpbmcgZm9ybSBzdWJtaXNzaW9uIHJ1bGVzIGluIHRoZSBIVE1MIHNwZWNpZmljYXRpb246XHJcbiAqXHJcbiAqIC0gSWYgYSBmb3JtIGhhcyBvbmx5IG9uZSBpbnB1dCBmaWVsZCB0aGVuIGhpdHRpbmcgZW50ZXIgaW4gdGhpcyBmaWVsZCB0cmlnZ2VycyBmb3JtIHN1Ym1pdFxyXG4gKiAoYG5nU3VibWl0YClcclxuICogLSBpZiBhIGZvcm0gaGFzIDIrIGlucHV0IGZpZWxkcyBhbmQgbm8gYnV0dG9ucyBvciBpbnB1dFt0eXBlPXN1Ym1pdF0gdGhlbiBoaXR0aW5nIGVudGVyXHJcbiAqIGRvZXNuJ3QgdHJpZ2dlciBzdWJtaXRcclxuICogLSBpZiBhIGZvcm0gaGFzIG9uZSBvciBtb3JlIGlucHV0IGZpZWxkcyBhbmQgb25lIG9yIG1vcmUgYnV0dG9ucyBvciBpbnB1dFt0eXBlPXN1Ym1pdF0gdGhlblxyXG4gKiBoaXR0aW5nIGVudGVyIGluIGFueSBvZiB0aGUgaW5wdXQgZmllbGRzIHdpbGwgdHJpZ2dlciB0aGUgY2xpY2sgaGFuZGxlciBvbiB0aGUgKmZpcnN0KiBidXR0b24gb3JcclxuICogaW5wdXRbdHlwZT1zdWJtaXRdIChgbmdDbGlja2ApICphbmQqIGEgc3VibWl0IGhhbmRsZXIgb24gdGhlIGVuY2xvc2luZyBmb3JtIChgbmdTdWJtaXRgKVxyXG4gKlxyXG4gKiBBbnkgcGVuZGluZyBgbmdNb2RlbE9wdGlvbnNgIGNoYW5nZXMgd2lsbCB0YWtlIHBsYWNlIGltbWVkaWF0ZWx5IHdoZW4gYW4gZW5jbG9zaW5nIGZvcm0gaXNcclxuICogc3VibWl0dGVkLiBOb3RlIHRoYXQgYG5nQ2xpY2tgIGV2ZW50cyB3aWxsIG9jY3VyIGJlZm9yZSB0aGUgbW9kZWwgaXMgdXBkYXRlZC4gVXNlIGBuZ1N1Ym1pdGBcclxuICogdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHVwZGF0ZWQgbW9kZWwuXHJcbiAqXHJcbiAqICMjIEFuaW1hdGlvbiBIb29rc1xyXG4gKlxyXG4gKiBBbmltYXRpb25zIGluIG5nRm9ybSBhcmUgdHJpZ2dlcmVkIHdoZW4gYW55IG9mIHRoZSBhc3NvY2lhdGVkIENTUyBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZC5cclxuICogVGhlc2UgY2xhc3NlcyBhcmU6IGAubmctcHJpc3RpbmVgLCBgLm5nLWRpcnR5YCwgYC5uZy1pbnZhbGlkYCBhbmQgYC5uZy12YWxpZGAgYXMgd2VsbCBhcyBhbnlcclxuICogb3RoZXIgdmFsaWRhdGlvbnMgdGhhdCBhcmUgcGVyZm9ybWVkIHdpdGhpbiB0aGUgZm9ybS4gQW5pbWF0aW9ucyBpbiBuZ0Zvcm0gYXJlIHNpbWlsYXIgdG8gaG93XHJcbiAqIHRoZXkgd29yayBpbiBuZ0NsYXNzIGFuZCBhbmltYXRpb25zIGNhbiBiZSBob29rZWQgaW50byB1c2luZyBDU1MgdHJhbnNpdGlvbnMsIGtleWZyYW1lcyBhcyB3ZWxsXHJcbiAqIGFzIEpTIGFuaW1hdGlvbnMuXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBhIHNpbXBsZSB3YXkgdG8gdXRpbGl6ZSBDU1MgdHJhbnNpdGlvbnMgdG8gc3R5bGUgYSBmb3JtIGVsZW1lbnRcclxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcclxuICpcclxuICogPHByZT5cclxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXHJcbiAqIC8vYWR2YW5jZWQgYW5pbWF0aW9uc1xyXG4gKiAubXktZm9ybSB7XHJcbiAqICAgdHJhbnNpdGlvbjowLjVzIGxpbmVhciBhbGw7XHJcbiAqICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAqIH1cclxuICogLm15LWZvcm0ubmctaW52YWxpZCB7XHJcbiAqICAgYmFja2dyb3VuZDogcmVkO1xyXG4gKiAgIGNvbG9yOndoaXRlO1xyXG4gKiB9XHJcbiAqIDwvcHJlPlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgZml4QmFzZT1cInRydWVcIiBtb2R1bGU9XCJmb3JtRXhhbXBsZVwiPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2Zvcm1FeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0Zvcm1Db250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICRzY29wZS51c2VyVHlwZSA9ICdndWVzdCc7XHJcbiAgICAgICAgICAgfV0pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICA8c3R5bGU+XHJcbiAgICAgICAgLm15LWZvcm0ge1xyXG4gICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcclxuICAgICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5teS1mb3JtLm5nLWludmFsaWQge1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogcmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgIDwvc3R5bGU+XHJcbiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkZvcm1Db250cm9sbGVyXCIgY2xhc3M9XCJteS1mb3JtXCI+XHJcbiAgICAgICAgIHVzZXJUeXBlOiA8aW5wdXQgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ1c2VyVHlwZVwiIHJlcXVpcmVkPlxyXG4gICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5SZXF1aXJlZCE8L3NwYW4+PGJyPlxyXG4gICAgICAgICA8dHQ+dXNlclR5cGUgPSB7e3VzZXJUeXBlfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnI+XHJcbiAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnI+XHJcbiAgICAgICAgPC9mb3JtPlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB1c2VyVHlwZSA9IGVsZW1lbnQoYnkuYmluZGluZygndXNlclR5cGUnKSk7XHJcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHVzZXJUeXBlLmdldFRleHQoKSkudG9Db250YWluKCdndWVzdCcpO1xyXG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHVzZXJUeXBlID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyVHlwZScpKTtcclxuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuICAgICAgICAgIHZhciB1c2VySW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyVHlwZScpKTtcclxuXHJcbiAgICAgICAgICB1c2VySW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgIHVzZXJJbnB1dC5zZW5kS2V5cygnJyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHVzZXJUeXBlLmdldFRleHQoKSkudG9FcXVhbCgndXNlclR5cGUgPScpO1xyXG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBOYW1lIG9mIHRoZSBmb3JtLiBJZiBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgd2lsbCBiZSBwdWJsaXNoZWQgaW50b1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZCBzY29wZSwgdW5kZXIgdGhpcyBuYW1lLlxyXG4gKi9cclxudmFyIGZvcm1EaXJlY3RpdmVGYWN0b3J5ID0gZnVuY3Rpb24oaXNOZ0Zvcm0pIHtcclxuICByZXR1cm4gWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XHJcbiAgICB2YXIgZm9ybURpcmVjdGl2ZSA9IHtcclxuICAgICAgbmFtZTogJ2Zvcm0nLFxyXG4gICAgICByZXN0cmljdDogaXNOZ0Zvcm0gPyAnRUFDJyA6ICdFJyxcclxuICAgICAgY29udHJvbGxlcjogRm9ybUNvbnRyb2xsZXIsXHJcbiAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBwcmU6IGZ1bmN0aW9uKHNjb3BlLCBmb3JtRWxlbWVudCwgYXR0ciwgY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICBpZiAoIWF0dHIuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgY2FuJ3QgdXNlIGpxIGV2ZW50cyBiZWNhdXNlIGlmIGEgZm9ybSBpcyBkZXN0cm95ZWQgZHVyaW5nIHN1Ym1pc3Npb24gdGhlIGRlZmF1bHRcclxuICAgICAgICAgICAgICAvLyBhY3Rpb24gaXMgbm90IHByZXZlbnRlZC4gc2VlICMxMjM4XHJcbiAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAvLyBJRSA5IGlzIG5vdCBhZmZlY3RlZCBiZWNhdXNlIGl0IGRvZXNuJ3QgZmlyZSBhIHN1Ym1pdCBldmVudCBhbmQgdHJ5IHRvIGRvIGEgZnVsbFxyXG4gICAgICAgICAgICAgIC8vIHBhZ2UgcmVsb2FkIGlmIHRoZSBmb3JtIHdhcyBkZXN0cm95ZWQgYnkgc3VibWlzc2lvbiBvZiB0aGUgZm9ybSB2aWEgYSBjbGljayBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgLy8gb24gYSBidXR0b24gaW4gdGhlIGZvcm0uIExvb2tzIGxpa2UgYW4gSUU5IHNwZWNpZmljIGJ1Zy5cclxuICAgICAgICAgICAgICB2YXIgaGFuZGxlRm9ybVN1Ym1pc3Npb24gPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRjb21taXRWaWV3VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0U3VibWl0dGVkKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdFxyXG4gICAgICAgICAgICAgICAgICA/IGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgICAgOiBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlOyAvLyBJRVxyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXJGbihmb3JtRWxlbWVudFswXSwgJ3N1Ym1pdCcsIGhhbmRsZUZvcm1TdWJtaXNzaW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gdW5yZWdpc3RlciB0aGUgcHJldmVudERlZmF1bHQgbGlzdGVuZXIgc28gdGhhdCB3ZSBkb24ndCBub3QgbGVhayBtZW1vcnkgYnV0IGluIGFcclxuICAgICAgICAgICAgICAvLyB3YXkgdGhhdCB3aWxsIGFjaGlldmUgdGhlIHByZXZlbnRpb24gb2YgdGhlIGRlZmF1bHQgYWN0aW9uLlxyXG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihmb3JtRWxlbWVudFswXSwgJ3N1Ym1pdCcsIGhhbmRsZUZvcm1TdWJtaXNzaW9uKTtcclxuICAgICAgICAgICAgICAgIH0sIDAsIGZhbHNlKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHBhcmVudEZvcm1DdHJsID0gZm9ybUVsZW1lbnQucGFyZW50KCkuY29udHJvbGxlcignZm9ybScpLFxyXG4gICAgICAgICAgICAgICAgYWxpYXMgPSBhdHRyLm5hbWUgfHwgYXR0ci5uZ0Zvcm07XHJcblxyXG4gICAgICAgICAgICBpZiAoYWxpYXMpIHtcclxuICAgICAgICAgICAgICBzZXR0ZXIoc2NvcGUsIGFsaWFzLCBjb250cm9sbGVyLCBhbGlhcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhcmVudEZvcm1DdHJsKSB7XHJcbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRGb3JtQ3RybC4kcmVtb3ZlQ29udHJvbChjb250cm9sbGVyKTtcclxuICAgICAgICAgICAgICAgIGlmIChhbGlhcykge1xyXG4gICAgICAgICAgICAgICAgICBzZXR0ZXIoc2NvcGUsIGFsaWFzLCB1bmRlZmluZWQsIGFsaWFzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV4dGVuZChjb250cm9sbGVyLCBudWxsRm9ybUN0cmwpOyAvL3N0b3AgcHJvcGFnYXRpbmcgY2hpbGQgZGVzdHJ1Y3Rpb24gaGFuZGxlcnMgdXB3YXJkc1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZm9ybURpcmVjdGl2ZTtcclxuICB9XTtcclxufTtcclxuXHJcbnZhciBmb3JtRGlyZWN0aXZlID0gZm9ybURpcmVjdGl2ZUZhY3RvcnkoKTtcclxudmFyIG5nRm9ybURpcmVjdGl2ZSA9IGZvcm1EaXJlY3RpdmVGYWN0b3J5KHRydWUpO1xyXG5cclxuLyogZ2xvYmFsIFZBTElEX0NMQVNTOiB0cnVlLFxyXG4gIElOVkFMSURfQ0xBU1M6IHRydWUsXHJcbiAgUFJJU1RJTkVfQ0xBU1M6IHRydWUsXHJcbiAgRElSVFlfQ0xBU1M6IHRydWUsXHJcbiAgVU5UT1VDSEVEX0NMQVNTOiB0cnVlLFxyXG4gIFRPVUNIRURfQ0xBU1M6IHRydWUsXHJcbiovXHJcblxyXG4vLyBSZWdleCBjb2RlIGlzIG9idGFpbmVkIGZyb20gU086IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMxNDMwNzAvamF2YXNjcmlwdC1yZWdleC1pc28tZGF0ZXRpbWUjYW5zd2VyLTMxNDMyMzFcclxudmFyIElTT19EQVRFX1JFR0VYUCA9IC9cXGR7NH0tWzAxXVxcZC1bMC0zXVxcZFRbMC0yXVxcZDpbMC01XVxcZDpbMC01XVxcZFxcLlxcZCsoWystXVswLTJdXFxkOlswLTVdXFxkfFopLztcclxudmFyIFVSTF9SRUdFWFAgPSAvXihmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8kLztcclxudmFyIEVNQUlMX1JFR0VYUCA9IC9eW2EtejAtOSEjJCUmJyorXFwvPT9eX2B7fH1+Li1dK0BbYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPyhcXC5bYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPykqJC9pO1xyXG52YXIgTlVNQkVSX1JFR0VYUCA9IC9eXFxzKihcXC18XFwrKT8oXFxkK3woXFxkKihcXC5cXGQqKSkpXFxzKiQvO1xyXG52YXIgREFURV9SRUdFWFAgPSAvXihcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pJC87XHJcbnZhciBEQVRFVElNRUxPQ0FMX1JFR0VYUCA9IC9eKFxcZHs0fSktKFxcZFxcZCktKFxcZFxcZClUKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkpPyQvO1xyXG52YXIgV0VFS19SRUdFWFAgPSAvXihcXGR7NH0pLVcoXFxkXFxkKSQvO1xyXG52YXIgTU9OVEhfUkVHRVhQID0gL14oXFxkezR9KS0oXFxkXFxkKSQvO1xyXG52YXIgVElNRV9SRUdFWFAgPSAvXihcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKT8kLztcclxudmFyIERFRkFVTFRfUkVHRVhQID0gLyhcXHMrfF4pZGVmYXVsdChcXHMrfCQpLztcclxuXHJcbnZhciAkbmdNb2RlbE1pbkVyciA9IG5ldyBtaW5FcnIoJ25nTW9kZWwnKTtcclxuXHJcbnZhciBpbnB1dFR5cGUgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAqIEBuYW1lIGlucHV0W3RleHRdXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTdGFuZGFyZCBIVE1MIHRleHQgaW5wdXQgd2l0aCBhbmd1bGFyIGRhdGEgYmluZGluZywgaW5oZXJpdGVkIGJ5IG1vc3Qgb2YgdGhlIGBpbnB1dGAgZWxlbWVudHMuXHJcbiAgICpcclxuICAgKiAqTk9URSogTm90IGV2ZXJ5IGZlYXR1cmUgb2ZmZXJlZCBpcyBhdmFpbGFibGUgZm9yIGFsbCBpbnB1dCB0eXBlcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xyXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cclxuICAgKiAgICBtaW5sZW5ndGguXHJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxyXG4gICAqICAgIG1heGxlbmd0aC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlXHJcbiAgICogICAgUmVnRXhwIHBhdHRlcm4gZXhwcmVzc2lvbi4gRXhwZWN0ZWQgdmFsdWUgaXMgYC9yZWdleHAvYCBmb3IgaW5saW5lIHBhdHRlcm5zIG9yIGByZWdleHBgIGZvclxyXG4gICAqICAgIHBhdHRlcm5zIGRlZmluZWQgYXMgc2NvcGUgZXhwcmVzc2lvbnMuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXHJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFyIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgdHJpbSB0aGUgaW5wdXQuXHJcbiAgICogICAgVGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZCBmb3IgaW5wdXRbdHlwZT1wYXNzd29yZF0gY29udHJvbHMsIHdoaWNoIHdpbGwgbmV2ZXIgdHJpbSB0aGVcclxuICAgKiAgICBpbnB1dC5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJ0ZXh0LWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInRleHRJbnB1dEV4YW1wbGVcIj5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd0ZXh0SW5wdXRFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9ICdndWVzdCc7XHJcbiAgICAgICAgICAgICAgICRzY29wZS53b3JkID0gL15cXHMqXFx3KlxccyokLztcclxuICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgICBTaW5nbGUgd29yZDogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nLXBhdHRlcm49XCJ3b3JkXCIgcmVxdWlyZWQgbmctdHJpbT1cImZhbHNlXCI+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnBhdHRlcm5cIj5cclxuICAgICAgICAgICAgIFNpbmdsZSB3b3JkIG9ubHkhPC9zcGFuPlxyXG5cclxuICAgICAgICAgICA8dHQ+dGV4dCA9IHt7dGV4dH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3RleHQnKSk7XHJcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0ZXh0JykpO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignZ3Vlc3QnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG11bHRpIHdvcmQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2hlbGxvIHdvcmxkJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgIDwvZXhhbXBsZT5cclxuICAgKi9cclxuICAndGV4dCc6IHRleHRJbnB1dFR5cGUsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgaW5wdXRcclxuICAgICAqIEBuYW1lIGlucHV0W2RhdGVdXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBJbnB1dCB3aXRoIGRhdGUgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XHJcbiAgICAgKiB0aGUgSFRNTDUgZGF0ZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcclxuICAgICAqIGRhdGUgZm9ybWF0ICh5eXl5LU1NLWRkKSwgZm9yIGV4YW1wbGU6IGAyMDA5LTAxLTA2YC4gU2luY2UgbWFueVxyXG4gICAgICogbW9kZXJuIGJyb3dzZXJzIGRvIG5vdCB5ZXQgc3VwcG9ydCB0aGlzIGlucHV0IHR5cGUsIGl0IGlzIGltcG9ydGFudCB0byBwcm92aWRlIGN1ZXMgdG8gdXNlcnMgb24gdGhlXHJcbiAgICAgKiBleHBlY3RlZCBpbnB1dCBmb3JtYXQgdmlhIGEgcGxhY2Vob2xkZXIgb3IgbGFiZWwuIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcclxuICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuIFRoaXMgbXVzdCBiZSBhXHJcbiAgICAgKiB2YWxpZCBJU08gZGF0ZSBzdHJpbmcgKHl5eXktTU0tZGQpLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcclxuICAgICAqIGEgdmFsaWQgSVNPIGRhdGUgc3RyaW5nICh5eXl5LU1NLWRkKS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xyXG4gICAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXHJcbiAgICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgPGV4YW1wbGUgbmFtZT1cImRhdGUtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiZGF0ZUlucHV0RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2RhdGVJbnB1dEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUudmFsdWUgPSBuZXcgRGF0ZSgyMDEzLCA5LCAyMik7XHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxyXG4gICAgICAgICAgUGljayBhIGRhdGUgaW4gMjAxMzpcclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwiZXhhbXBsZUlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ2YWx1ZVwiXHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NLWRkXCIgbWluPVwiMjAxMy0wMS0wMVwiIG1heD1cIjIwMTMtMTItMzFcIiByZXF1aXJlZCAvPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLmRhdGVcIj5cclxuICAgICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cclxuICAgICAgICAgICA8dHQ+dmFsdWUgPSB7e3ZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkXCJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgICA8L2Zvcm0+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkXCInKSk7XHJcbiAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpO1xyXG5cclxuICAgICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxyXG4gICAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcclxuICAgICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XHJcbiAgICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxyXG4gICAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xyXG4gICAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xyXG4gICAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xyXG4gICAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy0xMC0yMicpO1xyXG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNldElucHV0KCcnKTtcclxuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcclxuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2V0SW5wdXQoJzIwMTUtMDEtMDEnKTtcclxuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgICA8L2V4YW1wbGU+XHJcbiAgICAgKi9cclxuICAnZGF0ZSc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ2RhdGUnLCBEQVRFX1JFR0VYUCxcclxuICAgICAgICAgY3JlYXRlRGF0ZVBhcnNlcihEQVRFX1JFR0VYUCwgWyd5eXl5JywgJ01NJywgJ2RkJ10pLFxyXG4gICAgICAgICAneXl5eS1NTS1kZCcpLFxyXG5cclxuICAgLyoqXHJcbiAgICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAgKiBAbmFtZSBpbnB1dFtkYXRlVGltZUxvY2FsXVxyXG4gICAgKlxyXG4gICAgKiBAZGVzY3JpcHRpb25cclxuICAgICogSW5wdXQgd2l0aCBkYXRldGltZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcclxuICAgICogdGhlIEhUTUw1IGRhdGUgaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0aGUgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxyXG4gICAgKiBsb2NhbCBkYXRldGltZSBmb3JtYXQgKHl5eXktTU0tZGRUSEg6bW06c3MpLCBmb3IgZXhhbXBsZTogYDIwMTAtMTItMjhUMTQ6NTc6MDBgLiBUaGUgbW9kZWwgbXVzdCBiZSBhIERhdGUgb2JqZWN0LlxyXG4gICAgKlxyXG4gICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXHJcbiAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cclxuICAgICpcclxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlIGFcclxuICAgICogdmFsaWQgSVNPIGRhdGV0aW1lIGZvcm1hdCAoeXl5eS1NTS1kZFRISDptbTpzcykuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC4gVGhpcyBtdXN0IGJlXHJcbiAgICAqIGEgdmFsaWQgSVNPIGRhdGV0aW1lIGZvcm1hdCAoeXl5eS1NTS1kZFRISDptbTpzcykuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgICpcclxuICAgICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlIG5hbWU9XCJkYXRldGltZWxvY2FsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImRhdGVFeGFtcGxlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8c2NyaXB0PlxyXG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkYXRlRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZhbHVlID0gbmV3IERhdGUoMjAxMCwgMTEsIDI4LCAxNCwgNTcpO1xyXG4gICAgICAgICAgfV0pO1xyXG4gICAgICA8L3NjcmlwdD5cclxuICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxyXG4gICAgICAgIFBpY2sgYSBkYXRlIGJldHdlZW4gaW4gMjAxMzpcclxuICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGV0aW1lLWxvY2FsXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInZhbHVlXCJcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCIgbWluPVwiMjAwMS0wMS0wMVQwMDowMDowMFwiIG1heD1cIjIwMTMtMTItMzFUMDA6MDA6MDBcIiByZXF1aXJlZCAvPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLmRhdGV0aW1lbG9jYWxcIj5cclxuICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XHJcbiAgICAgICAgPHR0PnZhbHVlID0ge3t2YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFRISDptbTpzc1wifX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxyXG4gICAgICA8L2Zvcm0+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygndmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRUSEg6bW06c3NcIicpKTtcclxuICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xyXG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKTtcclxuXHJcbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcclxuICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXHJcbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xyXG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXHJcbiAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xyXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcclxuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XHJcbiAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMC0xMi0yOFQxNDo1NzowMCcpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRJbnB1dCgnJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2V0SW5wdXQoJzIwMTUtMDEtMDFUMjM6NTk6MDAnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gICAgKi9cclxuICAnZGF0ZXRpbWUtbG9jYWwnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCdkYXRldGltZWxvY2FsJywgREFURVRJTUVMT0NBTF9SRUdFWFAsXHJcbiAgICAgIGNyZWF0ZURhdGVQYXJzZXIoREFURVRJTUVMT0NBTF9SRUdFWFAsIFsneXl5eScsICdNTScsICdkZCcsICdISCcsICdtbScsICdzcyddKSxcclxuICAgICAgJ3l5eXktTU0tZGRUSEg6bW06c3MnKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbdGltZV1cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIElucHV0IHdpdGggdGltZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcclxuICAgKiB0aGUgSFRNTDUgZGF0ZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXHJcbiAgICogbG9jYWwgdGltZSBmb3JtYXQgKEhIOm1tOnNzKSwgZm9yIGV4YW1wbGU6IGAxNDo1NzowMGAuIE1vZGVsIG11c3QgYmUgYSBEYXRlIG9iamVjdC4gVGhpcyBiaW5kaW5nIHdpbGwgYWx3YXlzIG91dHB1dCBhXHJcbiAgICogRGF0ZSBvYmplY3QgdG8gdGhlIG1vZGVsIG9mIEphbnVhcnkgMSwgMTk3MCwgb3IgbG9jYWwgZGF0ZSBgbmV3IERhdGUoMTk3MCwgMCwgMSwgSEgsIG1tLCBzcylgLlxyXG4gICAqXHJcbiAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xyXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmUgYVxyXG4gICAqIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC4gVGhpcyBtdXN0IGJlIGFcclxuICAgKiB2YWxpZCBJU08gdGltZSBmb3JtYXQgKEhIOm1tOnNzKS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbmFtZT1cInRpbWUtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwidGltZUV4YW1wbGVcIj5cclxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICA8c2NyaXB0PlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgndGltZUV4YW1wbGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnZhbHVlID0gbmV3IERhdGUoMTk3MCwgMCwgMSwgMTQsIDU3LCAwKTtcclxuICAgICAgICB9XSk7XHJcbiAgICAgPC9zY3JpcHQ+XHJcbiAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxyXG4gICAgICAgIFBpY2sgYSBiZXR3ZWVuIDhhbSBhbmQgNXBtOlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGltZVwiIGlkPVwiZXhhbXBsZUlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ2YWx1ZVwiXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiSEg6bW06c3NcIiBtaW49XCIwODowMDowMFwiIG1heD1cIjE3OjAwOjAwXCIgcmVxdWlyZWQgLz5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci50aW1lXCI+XHJcbiAgICAgICAgICAgIE5vdCBhIHZhbGlkIGRhdGUhPC9zcGFuPlxyXG4gICAgICAgIDx0dD52YWx1ZSA9IHt7dmFsdWUgfCBkYXRlOiBcIkhIOm1tOnNzXCJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgPC9mb3JtPlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCd2YWx1ZSB8IGRhdGU6IFwiSEg6bW06c3NcIicpKTtcclxuICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xyXG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKTtcclxuXHJcbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcclxuICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXHJcbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xyXG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXHJcbiAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xyXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcclxuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XHJcbiAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMTQ6NTc6MDAnKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2V0SW5wdXQoJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcyMzo1OTowMCcpO1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcbiAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICd0aW1lJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgndGltZScsIFRJTUVfUkVHRVhQLFxyXG4gICAgICBjcmVhdGVEYXRlUGFyc2VyKFRJTUVfUkVHRVhQLCBbJ0hIJywgJ21tJywgJ3NzJ10pLFxyXG4gICAgICdISDptbTpzcycpLFxyXG5cclxuICAgLyoqXHJcbiAgICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAgKiBAbmFtZSBpbnB1dFt3ZWVrXVxyXG4gICAgKlxyXG4gICAgKiBAZGVzY3JpcHRpb25cclxuICAgICogSW5wdXQgd2l0aCB3ZWVrLW9mLXRoZS15ZWFyIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uIHRvIERhdGUuIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XHJcbiAgICAqIHRoZSBIVE1MNSB3ZWVrIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcclxuICAgICogd2VlayBmb3JtYXQgKHl5eXktVyMjKSwgZm9yIGV4YW1wbGU6IGAyMDEzLVcwMmAuIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LlxyXG4gICAgKlxyXG4gICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXHJcbiAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cclxuICAgICpcclxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlIGFcclxuICAgICogdmFsaWQgSVNPIHdlZWsgZm9ybWF0ICh5eXl5LVcjIykuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC4gVGhpcyBtdXN0IGJlXHJcbiAgICAqIGEgdmFsaWQgSVNPIHdlZWsgZm9ybWF0ICh5eXl5LVcjIykuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgICpcclxuICAgICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlIG5hbWU9XCJ3ZWVrLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIndlZWtFeGFtcGxlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8c2NyaXB0PlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnd2Vla0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnZhbHVlID0gbmV3IERhdGUoMjAxMywgMCwgMyk7XHJcbiAgICAgICAgfV0pO1xyXG4gICAgICA8L3NjcmlwdD5cclxuICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxyXG4gICAgICAgIFBpY2sgYSBkYXRlIGJldHdlZW4gaW4gMjAxMzpcclxuICAgICAgICA8aW5wdXQgaWQ9XCJleGFtcGxlSW5wdXRcIiB0eXBlPVwid2Vla1wiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwidmFsdWVcIlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIllZWVktVyMjXCIgbWluPVwiMjAxMi1XMzJcIiBtYXg9XCIyMDEzLVc1MlwiIHJlcXVpcmVkIC8+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3Iud2Vla1wiPlxyXG4gICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cclxuICAgICAgICA8dHQ+dmFsdWUgPSB7e3ZhbHVlIHwgZGF0ZTogXCJ5eXl5LVd3d1wifX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxyXG4gICAgICA8L2Zvcm0+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygndmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCInKSk7XHJcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSk7XHJcblxyXG4gICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxyXG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXHJcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxyXG4gICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcclxuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxyXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcclxuICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXHJcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xyXG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzIwMTMtVzAxJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRJbnB1dCgnMjAxNS1XMDEnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gICAgKi9cclxuICAnd2Vlayc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ3dlZWsnLCBXRUVLX1JFR0VYUCwgd2Vla1BhcnNlciwgJ3l5eXktV3d3JyksXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAqIEBuYW1lIGlucHV0W21vbnRoXVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogSW5wdXQgd2l0aCBtb250aCB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcclxuICAgKiB0aGUgSFRNTDUgbW9udGggaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0aGUgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxyXG4gICAqIG1vbnRoIGZvcm1hdCAoeXl5eS1NTSksIGZvciBleGFtcGxlOiBgMjAwOS0wMWAuIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LiBJbiB0aGUgZXZlbnQgdGhlIG1vZGVsIGlzXHJcbiAgICogbm90IHNldCB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLCB0aGUgZmlyc3Qgb2YgdGhhdCBtb2RlbCdzIG1vbnRoIGlzIGFzc3VtZWQuXHJcbiAgICpcclxuICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXHJcbiAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuIFRoaXMgbXVzdCBiZVxyXG4gICAqIGEgdmFsaWQgSVNPIG1vbnRoIGZvcm1hdCAoeXl5eS1NTSkuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3RcclxuICAgKiBiZSBhIHZhbGlkIElTTyBtb250aCBmb3JtYXQgKHl5eXktTU0pLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxyXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBuYW1lPVwibW9udGgtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwibW9udGhFeGFtcGxlXCI+XHJcbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgPHNjcmlwdD5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ21vbnRoRXhhbXBsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUudmFsdWUgPSBuZXcgRGF0ZSgyMDEzLCA5LCAxKTtcclxuICAgICAgICB9XSk7XHJcbiAgICAgPC9zY3JpcHQ+XHJcbiAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxyXG4gICAgICAgUGljayBhIG1vbnRoIGludCAyMDEzOlxyXG4gICAgICAgPGlucHV0IGlkPVwiZXhhbXBsZUlucHV0XCIgdHlwZT1cIm1vbnRoXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ2YWx1ZVwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cInl5eXktTU1cIiBtaW49XCIyMDEzLTAxXCIgbWF4PVwiMjAxMy0xMlwiIHJlcXVpcmVkIC8+XHJcbiAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5tb250aFwiPlxyXG4gICAgICAgICAgTm90IGEgdmFsaWQgbW9udGghPC9zcGFuPlxyXG4gICAgICAgPHR0PnZhbHVlID0ge3t2YWx1ZSB8IGRhdGU6IFwieXl5eS1NTVwifX08L3R0Pjxici8+XHJcbiAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgPC9mb3JtPlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCd2YWx1ZSB8IGRhdGU6IFwieXl5eS1NTVwiJykpO1xyXG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpO1xyXG5cclxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcclxuICAgICAgLy8gc2VuZGluZyBrZXlzIHRvIGFsbCBrbm93biBIVE1MNSBpbnB1dCBjb250cm9sc1xyXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cclxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XHJcbiAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cclxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXHJcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xyXG4gICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcclxuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLTEwJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRJbnB1dCgnMjAxNS0wMScpO1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcbiAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICdtb250aCc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ21vbnRoJywgTU9OVEhfUkVHRVhQLFxyXG4gICAgIGNyZWF0ZURhdGVQYXJzZXIoTU9OVEhfUkVHRVhQLCBbJ3l5eXknLCAnTU0nXSksXHJcbiAgICAgJ3l5eXktTU0nKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbbnVtYmVyXVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGV4dCBpbnB1dCB3aXRoIG51bWJlciB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gU2V0cyB0aGUgYG51bWJlcmAgdmFsaWRhdGlvblxyXG4gICAqIGVycm9yIGlmIG5vdCBhIHZhbGlkIG51bWJlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxyXG4gICAqICAgIG1pbmxlbmd0aC5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAgICogICAgbWF4bGVuZ3RoLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCB0aGVcclxuICAgKiAgICBSZWdFeHAgcGF0dGVybiBleHByZXNzaW9uLiBFeHBlY3RlZCB2YWx1ZSBpcyBgL3JlZ2V4cC9gIGZvciBpbmxpbmUgcGF0dGVybnMgb3IgYHJlZ2V4cGAgZm9yXHJcbiAgICogICAgcGF0dGVybnMgZGVmaW5lZCBhcyBzY29wZSBleHByZXNzaW9ucy5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICAgPGV4YW1wbGUgbmFtZT1cIm51bWJlci1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJudW1iZXJFeGFtcGxlXCI+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbnVtYmVyRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlID0gMTI7XHJcbiAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICAgTnVtYmVyOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwidmFsdWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbj1cIjBcIiBtYXg9XCI5OVwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxyXG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5udW1iZXJcIj5cclxuICAgICAgICAgICAgIE5vdCB2YWxpZCBudW1iZXIhPC9zcGFuPlxyXG4gICAgICAgICAgIDx0dD52YWx1ZSA9IHt7dmFsdWV9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygndmFsdWUnKSk7XHJcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcxMicpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcxMjMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgIDwvZXhhbXBsZT5cclxuICAgKi9cclxuICAnbnVtYmVyJzogbnVtYmVySW5wdXRUeXBlLFxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbdXJsXVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGV4dCBpbnB1dCB3aXRoIFVSTCB2YWxpZGF0aW9uLiBTZXRzIHRoZSBgdXJsYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgY29udGVudCBpcyBub3QgYVxyXG4gICAqIHZhbGlkIFVSTC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xyXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cclxuICAgKiAgICBtaW5sZW5ndGguXHJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxyXG4gICAqICAgIG1heGxlbmd0aC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlXHJcbiAgICogICAgUmVnRXhwIHBhdHRlcm4gZXhwcmVzc2lvbi4gRXhwZWN0ZWQgdmFsdWUgaXMgYC9yZWdleHAvYCBmb3IgaW5saW5lIHBhdHRlcm5zIG9yIGByZWdleHBgIGZvclxyXG4gICAqICAgIHBhdHRlcm5zIGRlZmluZWQgYXMgc2NvcGUgZXhwcmVzc2lvbnMuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXHJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJ1cmwtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwidXJsRXhhbXBsZVwiPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3VybEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJ2h0dHA6Ly9nb29nbGUuY29tJztcclxuICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgICBVUkw6IDxpbnB1dCB0eXBlPVwidXJsXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ0ZXh0XCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnVybFwiPlxyXG4gICAgICAgICAgICAgTm90IHZhbGlkIHVybCE8L3NwYW4+XHJcbiAgICAgICAgICAgPHR0PnRleHQgPSB7e3RleHR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IudXJsID0ge3shIW15Rm9ybS4kZXJyb3IudXJsfX08L3R0Pjxici8+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICAgIHZhciB0ZXh0ID0gZWxlbWVudChieS5iaW5kaW5nKCd0ZXh0JykpO1xyXG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xyXG4gICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndGV4dCcpKTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2h0dHA6Ly9nb29nbGUuY29tJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9FcXVhbCgndGV4dCA9Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgdXJsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCdib3gnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICd1cmwnOiB1cmxJbnB1dFR5cGUsXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgaW5wdXRcclxuICAgKiBAbmFtZSBpbnB1dFtlbWFpbF1cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRleHQgaW5wdXQgd2l0aCBlbWFpbCB2YWxpZGF0aW9uLiBTZXRzIHRoZSBgZW1haWxgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIG5vdCBhIHZhbGlkIGVtYWlsXHJcbiAgICogYWRkcmVzcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xyXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cclxuICAgKiAgICBtaW5sZW5ndGguXHJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxyXG4gICAqICAgIG1heGxlbmd0aC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlXHJcbiAgICogICAgUmVnRXhwIHBhdHRlcm4gZXhwcmVzc2lvbi4gRXhwZWN0ZWQgdmFsdWUgaXMgYC9yZWdleHAvYCBmb3IgaW5saW5lIHBhdHRlcm5zIG9yIGByZWdleHBgIGZvclxyXG4gICAqICAgIHBhdHRlcm5zIGRlZmluZWQgYXMgc2NvcGUgZXhwcmVzc2lvbnMuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXHJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJlbWFpbC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJlbWFpbEV4YW1wbGVcIj5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdlbWFpbEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJ21lQGV4YW1wbGUuY29tJztcclxuICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgICAgRW1haWw6IDxpbnB1dCB0eXBlPVwiZW1haWxcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInRleHRcIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZW1haWxcIj5cclxuICAgICAgICAgICAgICAgTm90IHZhbGlkIGVtYWlsITwvc3Bhbj5cclxuICAgICAgICAgICAgIDx0dD50ZXh0ID0ge3t0ZXh0fX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5lbWFpbCA9IHt7ISFteUZvcm0uJGVycm9yLmVtYWlsfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICA8L2ZpbGU+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3RleHQnKSk7XHJcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0ZXh0JykpO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignbWVAZXhhbXBsZS5jb20nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xyXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3RleHQgPScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbm90IGVtYWlsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCd4eHgnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICdlbWFpbCc6IGVtYWlsSW5wdXRUeXBlLFxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbcmFkaW9dXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBIVE1MIHJhZGlvIGJ1dHRvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBleHByZXNzaW9uIHNob3VsZCBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXHJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdWYWx1ZSBBbmd1bGFyIGV4cHJlc3Npb24gd2hpY2ggc2V0cyB0aGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkXHJcbiAgICogICAgYmUgc2V0IHdoZW4gc2VsZWN0ZWQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZVxyXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwicmFkaW8taW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwicmFkaW9FeGFtcGxlXCI+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgncmFkaW9FeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgICAkc2NvcGUuY29sb3IgPSAnYmx1ZSc7XHJcbiAgICAgICAgICAgICAgICRzY29wZS5zcGVjaWFsVmFsdWUgPSB7XHJcbiAgICAgICAgICAgICAgICAgXCJpZFwiOiBcIjEyMzQ1XCIsXHJcbiAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBcImdyZWVuXCJcclxuICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJjb2xvclwiIHZhbHVlPVwicmVkXCI+ICBSZWQgPGJyLz5cclxuICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJjb2xvclwiIG5nLXZhbHVlPVwic3BlY2lhbFZhbHVlXCI+IEdyZWVuIDxici8+XHJcbiAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwiY29sb3JcIiB2YWx1ZT1cImJsdWVcIj4gQmx1ZSA8YnIvPlxyXG4gICAgICAgICAgIDx0dD5jb2xvciA9IHt7Y29sb3IgfCBqc29ufX08L3R0Pjxici8+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICBOb3RlIHRoYXQgYG5nLXZhbHVlPVwic3BlY2lhbFZhbHVlXCJgIHNldHMgcmFkaW8gaXRlbSdzIHZhbHVlIHRvIGJlIHRoZSB2YWx1ZSBvZiBgJHNjb3BlLnNwZWNpYWxWYWx1ZWAuXHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHN0YXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvciA9IGVsZW1lbnQoYnkuYmluZGluZygnY29sb3InKSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoY29sb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2JsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5Lm1vZGVsKCdjb2xvcicpKS5nZXQoMCkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChjb2xvci5nZXRUZXh0KCkpLnRvQ29udGFpbigncmVkJyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgIDwvZXhhbXBsZT5cclxuICAgKi9cclxuICAncmFkaW8nOiByYWRpb0lucHV0VHlwZSxcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAqIEBuYW1lIGlucHV0W2NoZWNrYm94XVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogSFRNTCBjaGVja2JveC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtleHByZXNzaW9uPX0gbmdUcnVlVmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBleHByZXNzaW9uIHNob3VsZCBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cclxuICAgKiBAcGFyYW0ge2V4cHJlc3Npb249fSBuZ0ZhbHNlVmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBleHByZXNzaW9uIHNob3VsZCBiZSBzZXQgd2hlbiBub3Qgc2VsZWN0ZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXHJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJjaGVja2JveC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJjaGVja2JveEV4YW1wbGVcIj5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjaGVja2JveEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS52YWx1ZTEgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAkc2NvcGUudmFsdWUyID0gJ1lFUydcclxuICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgICBWYWx1ZTE6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInZhbHVlMVwiPiA8YnIvPlxyXG4gICAgICAgICAgIFZhbHVlMjogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwidmFsdWUyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZy10cnVlLXZhbHVlPVwiJ1lFUydcIiBuZy1mYWxzZS12YWx1ZT1cIidOTydcIj4gPGJyLz5cclxuICAgICAgICAgICA8dHQ+dmFsdWUxID0ge3t2YWx1ZTF9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+dmFsdWUyID0ge3t2YWx1ZTJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2Ugc3RhdGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlMSA9IGVsZW1lbnQoYnkuYmluZGluZygndmFsdWUxJykpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUyID0gZWxlbWVudChieS5iaW5kaW5nKCd2YWx1ZTInKSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUxLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1lFUycpO1xyXG5cclxuICAgICAgICAgICAgZWxlbWVudChieS5tb2RlbCgndmFsdWUxJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlMicpKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMS5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMi5nZXRUZXh0KCkpLnRvQ29udGFpbignTk8nKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICdjaGVja2JveCc6IGNoZWNrYm94SW5wdXRUeXBlLFxyXG5cclxuICAnaGlkZGVuJzogbm9vcCxcclxuICAnYnV0dG9uJzogbm9vcCxcclxuICAnc3VibWl0Jzogbm9vcCxcclxuICAncmVzZXQnOiBub29wLFxyXG4gICdmaWxlJzogbm9vcFxyXG59O1xyXG5cclxuZnVuY3Rpb24gdGVzdEZsYWdzKHZhbGlkaXR5LCBmbGFncykge1xyXG4gIHZhciBpLCBmbGFnO1xyXG4gIGlmIChmbGFncykge1xyXG4gICAgZm9yIChpPTA7IGk8ZmxhZ3MubGVuZ3RoOyArK2kpIHtcclxuICAgICAgZmxhZyA9IGZsYWdzW2ldO1xyXG4gICAgICBpZiAodmFsaWRpdHlbZmxhZ10pIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpIHtcclxuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSA/IHZhbHVlIDogdmFsdWUudG9TdHJpbmcoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdGV4dElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XHJcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcclxuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XHJcbiAgdmFyIHZhbGlkaXR5ID0gZWxlbWVudC5wcm9wKFZBTElESVRZX1NUQVRFX1BST1BFUlRZKTtcclxuICB2YXIgcGxhY2Vob2xkZXIgPSBlbGVtZW50WzBdLnBsYWNlaG9sZGVyLCBub2V2ZW50ID0ge307XHJcbiAgdmFyIHR5cGUgPSBsb3dlcmNhc2UoZWxlbWVudFswXS50eXBlKTtcclxuXHJcbiAgLy8gSW4gY29tcG9zaXRpb24gbW9kZSwgdXNlcnMgYXJlIHN0aWxsIGlucHV0aW5nIGludGVybWVkaWF0ZSB0ZXh0IGJ1ZmZlcixcclxuICAvLyBob2xkIHRoZSBsaXN0ZW5lciB1bnRpbCBjb21wb3NpdGlvbiBpcyBkb25lLlxyXG4gIC8vIE1vcmUgYWJvdXQgY29tcG9zaXRpb24gZXZlbnRzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ29tcG9zaXRpb25FdmVudFxyXG4gIGlmICghJHNuaWZmZXIuYW5kcm9pZCkge1xyXG4gICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xyXG5cclxuICAgIGVsZW1lbnQub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGNvbXBvc2luZyA9IHRydWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBlbGVtZW50Lm9uKCdjb21wb3NpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb21wb3NpbmcgPSBmYWxzZTtcclxuICAgICAgbGlzdGVuZXIoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcclxuICAgIGlmIChjb21wb3NpbmcpIHJldHVybjtcclxuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsKCksXHJcbiAgICAgICAgZXZlbnQgPSBldiAmJiBldi50eXBlO1xyXG5cclxuICAgIC8vIElFICgxMSBhbmQgdW5kZXIpIHNlZW0gdG8gZW1pdCBhbiAnaW5wdXQnIGV2ZW50IGlmIHRoZSBwbGFjZWhvbGRlciB2YWx1ZSBjaGFuZ2VzLlxyXG4gICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBkaXJ0eSB0aGUgdmFsdWUgd2hlbiB0aGlzIGhhcHBlbnMsIHNvIHdlIGFib3J0IGhlcmUuIFVuZm9ydHVuYXRlbHksXHJcbiAgICAvLyBJRSBhbHNvIHNlbmRzIGlucHV0IGV2ZW50cyBmb3Igb3RoZXIgbm9uLWlucHV0LXJlbGF0ZWQgdGhpbmdzLCAoc3VjaCBhcyBmb2N1c2luZyBvbiBhXHJcbiAgICAvLyBmb3JtIGNvbnRyb2wpLCBzbyB0aGlzIGNoYW5nZSBpcyBub3QgZW50aXJlbHkgZW5vdWdoIHRvIHNvbHZlIHRoaXMuXHJcbiAgICBpZiAobXNpZSAmJiAoZXYgfHwgbm9ldmVudCkudHlwZSA9PT0gJ2lucHV0JyAmJiBlbGVtZW50WzBdLnBsYWNlaG9sZGVyICE9PSBwbGFjZWhvbGRlcikge1xyXG4gICAgICBwbGFjZWhvbGRlciA9IGVsZW1lbnRbMF0ucGxhY2Vob2xkZXI7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCeSBkZWZhdWx0IHdlIHdpbGwgdHJpbSB0aGUgdmFsdWVcclxuICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgbmctdHJpbSBleGlzdHMgd2Ugd2lsbCBhdm9pZCB0cmltbWluZ1xyXG4gICAgLy8gSWYgaW5wdXQgdHlwZSBpcyAncGFzc3dvcmQnLCB0aGUgdmFsdWUgaXMgbmV2ZXIgdHJpbW1lZFxyXG4gICAgaWYgKHR5cGUgIT09ICdwYXNzd29yZCcgJiYgKCFhdHRyLm5nVHJpbSB8fCBhdHRyLm5nVHJpbSAhPT0gJ2ZhbHNlJykpIHtcclxuICAgICAgdmFsdWUgPSB0cmltKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBhIGNvbnRyb2wgaXMgc3VmZmVyaW5nIGZyb20gYmFkIGlucHV0IChkdWUgdG8gbmF0aXZlIHZhbGlkYXRvcnMpLCBicm93c2VycyBkaXNjYXJkIGl0c1xyXG4gICAgLy8gdmFsdWUsIHNvIGl0IG1heSBiZSBuZWNlc3NhcnkgdG8gcmV2YWxpZGF0ZSAoYnkgY2FsbGluZyAkc2V0Vmlld1ZhbHVlIGFnYWluKSBldmVuIGlmIHRoZVxyXG4gICAgLy8gY29udHJvbCdzIHZhbHVlIGlzIHRoZSBzYW1lIGVtcHR5IHZhbHVlIHR3aWNlIGluIGEgcm93LlxyXG4gICAgaWYgKGN0cmwuJHZpZXdWYWx1ZSAhPT0gdmFsdWUgfHwgKHZhbHVlID09PSAnJyAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykpIHtcclxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlLCBldmVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gaWYgdGhlIGJyb3dzZXIgZG9lcyBzdXBwb3J0IFwiaW5wdXRcIiBldmVudCwgd2UgYXJlIGZpbmUgLSBleGNlcHQgb24gSUU5IHdoaWNoIGRvZXNuJ3QgZmlyZSB0aGVcclxuICAvLyBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UsIGRlbGV0ZSBvciBjdXRcclxuICBpZiAoJHNuaWZmZXIuaGFzRXZlbnQoJ2lucHV0JykpIHtcclxuICAgIGVsZW1lbnQub24oJ2lucHV0JywgbGlzdGVuZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB2YXIgdGltZW91dDtcclxuXHJcbiAgICB2YXIgZGVmZXJMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgIGlmICghdGltZW91dCkge1xyXG4gICAgICAgIHRpbWVvdXQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxpc3RlbmVyKGV2KTtcclxuICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGVsZW1lbnQub24oJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZTtcclxuXHJcbiAgICAgIC8vIGlnbm9yZVxyXG4gICAgICAvLyAgICBjb21tYW5kICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgICAgICAgICAgIGFycm93c1xyXG4gICAgICBpZiAoa2V5ID09PSA5MSB8fCAoMTUgPCBrZXkgJiYga2V5IDwgMTkpIHx8ICgzNyA8PSBrZXkgJiYga2V5IDw9IDQwKSkgcmV0dXJuO1xyXG5cclxuICAgICAgZGVmZXJMaXN0ZW5lcihldmVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBpZiB1c2VyIG1vZGlmaWVzIGlucHV0IHZhbHVlIHVzaW5nIGNvbnRleHQgbWVudSBpbiBJRSwgd2UgbmVlZCBcInBhc3RlXCIgYW5kIFwiY3V0XCIgZXZlbnRzIHRvIGNhdGNoIGl0XHJcbiAgICBpZiAoJHNuaWZmZXIuaGFzRXZlbnQoJ3Bhc3RlJykpIHtcclxuICAgICAgZWxlbWVudC5vbigncGFzdGUgY3V0JywgZGVmZXJMaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBpZiB1c2VyIHBhc3RlIGludG8gaW5wdXQgdXNpbmcgbW91c2Ugb24gb2xkZXIgYnJvd3NlclxyXG4gIC8vIG9yIGZvcm0gYXV0b2NvbXBsZXRlIG9uIG5ld2VyIGJyb3dzZXIsIHdlIG5lZWQgXCJjaGFuZ2VcIiBldmVudCB0byBjYXRjaCBpdFxyXG4gIGVsZW1lbnQub24oJ2NoYW5nZScsIGxpc3RlbmVyKTtcclxuXHJcbiAgY3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICBlbGVtZW50LnZhbChjdHJsLiRpc0VtcHR5KGN0cmwuJG1vZGVsVmFsdWUpID8gJycgOiBjdHJsLiR2aWV3VmFsdWUpO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdlZWtQYXJzZXIoaXNvV2VlaywgZXhpc3RpbmdEYXRlKSB7XHJcbiAgaWYgKGlzRGF0ZShpc29XZWVrKSkge1xyXG4gICAgcmV0dXJuIGlzb1dlZWs7XHJcbiAgfVxyXG5cclxuICBpZiAoaXNTdHJpbmcoaXNvV2VlaykpIHtcclxuICAgIFdFRUtfUkVHRVhQLmxhc3RJbmRleCA9IDA7XHJcbiAgICB2YXIgcGFydHMgPSBXRUVLX1JFR0VYUC5leGVjKGlzb1dlZWspO1xyXG4gICAgaWYgKHBhcnRzKSB7XHJcbiAgICAgIHZhciB5ZWFyID0gK3BhcnRzWzFdLFxyXG4gICAgICAgICAgd2VlayA9ICtwYXJ0c1syXSxcclxuICAgICAgICAgIGhvdXJzID0gMCxcclxuICAgICAgICAgIG1pbnV0ZXMgPSAwLFxyXG4gICAgICAgICAgc2Vjb25kcyA9IDAsXHJcbiAgICAgICAgICBtaWxsaXNlY29uZHMgPSAwLFxyXG4gICAgICAgICAgZmlyc3RUaHVycyA9IGdldEZpcnN0VGh1cnNkYXlPZlllYXIoeWVhciksXHJcbiAgICAgICAgICBhZGREYXlzID0gKHdlZWsgLSAxKSAqIDc7XHJcblxyXG4gICAgICBpZiAoZXhpc3RpbmdEYXRlKSB7XHJcbiAgICAgICAgaG91cnMgPSBleGlzdGluZ0RhdGUuZ2V0SG91cnMoKTtcclxuICAgICAgICBtaW51dGVzID0gZXhpc3RpbmdEYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBzZWNvbmRzID0gZXhpc3RpbmdEYXRlLmdldFNlY29uZHMoKTtcclxuICAgICAgICBtaWxsaXNlY29uZHMgPSBleGlzdGluZ0RhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCAwLCBmaXJzdFRodXJzLmdldERhdGUoKSArIGFkZERheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBtaWxsaXNlY29uZHMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIE5hTjtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihyZWdleHAsIG1hcHBpbmcpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oaXNvLCBkYXRlKSB7XHJcbiAgICB2YXIgcGFydHMsIG1hcDtcclxuXHJcbiAgICBpZiAoaXNEYXRlKGlzbykpIHtcclxuICAgICAgcmV0dXJuIGlzbztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNTdHJpbmcoaXNvKSkge1xyXG4gICAgICAvLyBXaGVuIGEgZGF0ZSBpcyBKU09OJ2lmaWVkIHRvIHdyYXBzIGl0c2VsZiBpbnNpZGUgb2YgYW4gZXh0cmFcclxuICAgICAgLy8gc2V0IG9mIGRvdWJsZSBxdW90ZXMuIFRoaXMgbWFrZXMgdGhlIGRhdGUgcGFyc2luZyBjb2RlIHVuYWJsZVxyXG4gICAgICAvLyB0byBtYXRjaCB0aGUgZGF0ZSBzdHJpbmcgYW5kIHBhcnNlIGl0IGFzIGEgZGF0ZS5cclxuICAgICAgaWYgKGlzby5jaGFyQXQoMCkgPT0gJ1wiJyAmJiBpc28uY2hhckF0KGlzby5sZW5ndGgtMSkgPT0gJ1wiJykge1xyXG4gICAgICAgIGlzbyA9IGlzby5zdWJzdHJpbmcoMSwgaXNvLmxlbmd0aC0xKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoSVNPX0RBVEVfUkVHRVhQLnRlc3QoaXNvKSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShpc28pO1xyXG4gICAgICB9XHJcbiAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSAwO1xyXG4gICAgICBwYXJ0cyA9IHJlZ2V4cC5leGVjKGlzbyk7XHJcblxyXG4gICAgICBpZiAocGFydHMpIHtcclxuICAgICAgICBwYXJ0cy5zaGlmdCgpO1xyXG4gICAgICAgIGlmIChkYXRlKSB7XHJcbiAgICAgICAgICBtYXAgPSB7XHJcbiAgICAgICAgICAgIHl5eXk6IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgTU06IGRhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgIGRkOiBkYXRlLmdldERhdGUoKSxcclxuICAgICAgICAgICAgSEg6IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgbW06IGRhdGUuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICBzczogZGF0ZS5nZXRTZWNvbmRzKCksXHJcbiAgICAgICAgICAgIHNzczogZGF0ZS5nZXRNaWxsaXNlY29uZHMoKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbWFwID0geyB5eXl5OiAxOTcwLCBNTTogMSwgZGQ6IDEsIEhIOiAwLCBtbTogMCwgc3M6IDAsIHNzczogMCB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yRWFjaChwYXJ0cywgZnVuY3Rpb24ocGFydCwgaW5kZXgpIHtcclxuICAgICAgICAgIGlmIChpbmRleCA8IG1hcHBpbmcubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIG1hcFttYXBwaW5nW2luZGV4XV0gPSArcGFydDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUobWFwLnl5eXksIG1hcC5NTSAtIDEsIG1hcC5kZCwgbWFwLkhILCBtYXAubW0sIG1hcC5zcyB8fCAwLCBtYXAuc3NzIHx8IDApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5hTjtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVEYXRlSW5wdXRUeXBlKHR5cGUsIHJlZ2V4cCwgcGFyc2VEYXRlLCBmb3JtYXQpIHtcclxuICByZXR1cm4gZnVuY3Rpb24gZHluYW1pY0RhdGVJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3NlciwgJGZpbHRlcikge1xyXG4gICAgYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKTtcclxuICAgIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XHJcbiAgICB2YXIgdGltZXpvbmUgPSBjdHJsICYmIGN0cmwuJG9wdGlvbnMgJiYgY3RybC4kb3B0aW9ucy50aW1lem9uZTtcclxuXHJcbiAgICBjdHJsLiQkcGFyc2VyTmFtZSA9IHR5cGU7XHJcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgaWYgKGN0cmwuJGlzRW1wdHkodmFsdWUpKSByZXR1cm4gbnVsbDtcclxuICAgICAgaWYgKHJlZ2V4cC50ZXN0KHZhbHVlKSkge1xyXG4gICAgICAgIHZhciBwcmV2aW91c0RhdGUgPSBjdHJsLiRtb2RlbFZhbHVlO1xyXG4gICAgICAgIGlmIChwcmV2aW91c0RhdGUgJiYgdGltZXpvbmUgPT09ICdVVEMnKSB7XHJcbiAgICAgICAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSA2MDAwMCAqIHByZXZpb3VzRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xyXG4gICAgICAgICAgcHJldmlvdXNEYXRlID0gbmV3IERhdGUocHJldmlvdXNEYXRlLmdldFRpbWUoKSArIHRpbWV6b25lT2Zmc2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhcnNlZERhdGUgPSBwYXJzZURhdGUodmFsdWUsIHByZXZpb3VzRGF0ZSk7XHJcbiAgICAgICAgaWYgKHRpbWV6b25lID09PSAnVVRDJykge1xyXG4gICAgICAgICAgcGFyc2VkRGF0ZS5zZXRNaW51dGVzKHBhcnNlZERhdGUuZ2V0TWludXRlcygpIC0gcGFyc2VkRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZERhdGU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH0pO1xyXG5cclxuICAgIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICBpZiAoaXNEYXRlKHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiAkZmlsdGVyKCdkYXRlJykodmFsdWUsIGZvcm1hdCwgdGltZXpvbmUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChpc0RlZmluZWQoYXR0ci5taW4pIHx8IGF0dHIubmdNaW4pIHtcclxuICAgICAgdmFyIG1pblZhbDtcclxuICAgICAgY3RybC4kdmFsaWRhdG9ycy5taW4gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHBhcnNlRGF0ZSh2YWx1ZSkgPj0gbWluVmFsO1xyXG4gICAgICB9O1xyXG4gICAgICBhdHRyLiRvYnNlcnZlKCdtaW4nLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBtaW5WYWwgPSBwYXJzZU9ic2VydmVkRGF0ZVZhbHVlKHZhbCk7XHJcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzRGVmaW5lZChhdHRyLm1heCkgfHwgYXR0ci5uZ01heCkge1xyXG4gICAgICB2YXIgbWF4VmFsO1xyXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgcGFyc2VEYXRlKHZhbHVlKSA8PSBtYXhWYWw7XHJcbiAgICAgIH07XHJcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21heCcsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIG1heFZhbCA9IHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKTtcclxuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYXJzZU9ic2VydmVkRGF0ZVZhbHVlKHZhbCkge1xyXG4gICAgICByZXR1cm4gaXNEZWZpbmVkKHZhbCkgPyAoaXNEYXRlKHZhbCkgPyB2YWwgOiBwYXJzZURhdGUodmFsKSkgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKSB7XHJcbiAgdmFyIG5vZGUgPSBlbGVtZW50WzBdO1xyXG4gIHZhciBuYXRpdmVWYWxpZGF0aW9uID0gY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMgPSBpc09iamVjdChub2RlLnZhbGlkaXR5KTtcclxuICBpZiAobmF0aXZlVmFsaWRhdGlvbikge1xyXG4gICAgY3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHZhciB2YWxpZGl0eSA9IGVsZW1lbnQucHJvcChWQUxJRElUWV9TVEFURV9QUk9QRVJUWSkgfHwge307XHJcbiAgICAgIC8vIERldGVjdCBidWcgaW4gRkYzNSBmb3IgaW5wdXRbZW1haWxdIChodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDY0NDMwKTpcclxuICAgICAgLy8gLSBhbHNvIHNldHMgdmFsaWRpdHkuYmFkSW5wdXQgKHNob3VsZCBvbmx5IGJlIHZhbGlkaXR5LnR5cGVNaXNtYXRjaCkuXHJcbiAgICAgIC8vIC0gc2VlIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjZS1tYWlsLXN0YXRlLSh0eXBlPWVtYWlsKVxyXG4gICAgICAvLyAtIGNhbiBpZ25vcmUgdGhpcyBjYXNlIGFzIHdlIGNhbiBzdGlsbCByZWFkIG91dCB0aGUgZXJyb25lb3VzIGVtYWlsLi4uXHJcbiAgICAgIHJldHVybiB2YWxpZGl0eS5iYWRJbnB1dCAmJiAhdmFsaWRpdHkudHlwZU1pc21hdGNoID8gdW5kZWZpbmVkIDogdmFsdWU7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG51bWJlcklucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XHJcbiAgYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKTtcclxuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xyXG5cclxuICBjdHJsLiQkcGFyc2VyTmFtZSA9ICdudW1iZXInO1xyXG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgaWYgKGN0cmwuJGlzRW1wdHkodmFsdWUpKSAgICAgIHJldHVybiBudWxsO1xyXG4gICAgaWYgKE5VTUJFUl9SRUdFWFAudGVzdCh2YWx1ZSkpIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKTtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfSk7XHJcblxyXG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgaWYgKCFjdHJsLiRpc0VtcHR5KHZhbHVlKSkge1xyXG4gICAgICBpZiAoIWlzTnVtYmVyKHZhbHVlKSkge1xyXG4gICAgICAgIHRocm93ICRuZ01vZGVsTWluRXJyKCdudW1mbXQnLCAnRXhwZWN0ZWQgYHswfWAgdG8gYmUgYSBudW1iZXInLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH0pO1xyXG5cclxuICBpZiAoYXR0ci5taW4gfHwgYXR0ci5uZ01pbikge1xyXG4gICAgdmFyIG1pblZhbDtcclxuICAgIGN0cmwuJHZhbGlkYXRvcnMubWluID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1pblZhbCkgfHwgdmFsdWUgPj0gbWluVmFsO1xyXG4gICAgfTtcclxuXHJcbiAgICBhdHRyLiRvYnNlcnZlKCdtaW4nLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgaWYgKGlzRGVmaW5lZCh2YWwpICYmICFpc051bWJlcih2YWwpKSB7XHJcbiAgICAgICAgdmFsID0gcGFyc2VGbG9hdCh2YWwsIDEwKTtcclxuICAgICAgfVxyXG4gICAgICBtaW5WYWwgPSBpc051bWJlcih2YWwpICYmICFpc05hTih2YWwpID8gdmFsIDogdW5kZWZpbmVkO1xyXG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcclxuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKGF0dHIubWF4IHx8IGF0dHIubmdNYXgpIHtcclxuICAgIHZhciBtYXhWYWw7XHJcbiAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtYXhWYWwpIHx8IHZhbHVlIDw9IG1heFZhbDtcclxuICAgIH07XHJcblxyXG4gICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgIGlmIChpc0RlZmluZWQodmFsKSAmJiAhaXNOdW1iZXIodmFsKSkge1xyXG4gICAgICAgIHZhbCA9IHBhcnNlRmxvYXQodmFsLCAxMCk7XHJcbiAgICAgIH1cclxuICAgICAgbWF4VmFsID0gaXNOdW1iZXIodmFsKSAmJiAhaXNOYU4odmFsKSA/IHZhbCA6IHVuZGVmaW5lZDtcclxuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXHJcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVybElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XHJcbiAgLy8gTm90ZTogbm8gYmFkSW5wdXRDaGVja2VyIGhlcmUgYnkgcHVycG9zZSBhcyBgdXJsYCBpcyBvbmx5IGEgdmFsaWRhdGlvblxyXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXHJcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcclxuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcclxuXHJcbiAgY3RybC4kJHBhcnNlck5hbWUgPSAndXJsJztcclxuICBjdHJsLiR2YWxpZGF0b3JzLnVybCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgVVJMX1JFR0VYUC50ZXN0KHZhbHVlKTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWFpbElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XHJcbiAgLy8gTm90ZTogbm8gYmFkSW5wdXRDaGVja2VyIGhlcmUgYnkgcHVycG9zZSBhcyBgdXJsYCBpcyBvbmx5IGEgdmFsaWRhdGlvblxyXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXHJcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcclxuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcclxuXHJcbiAgY3RybC4kJHBhcnNlck5hbWUgPSAnZW1haWwnO1xyXG4gIGN0cmwuJHZhbGlkYXRvcnMuZW1haWwgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IEVNQUlMX1JFR0VYUC50ZXN0KHZhbHVlKTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiByYWRpb0lucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xyXG4gIC8vIG1ha2UgdGhlIG5hbWUgdW5pcXVlLCBpZiBub3QgZGVmaW5lZFxyXG4gIGlmIChpc1VuZGVmaW5lZChhdHRyLm5hbWUpKSB7XHJcbiAgICBlbGVtZW50LmF0dHIoJ25hbWUnLCBuZXh0VWlkKCkpO1xyXG4gIH1cclxuXHJcbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcclxuICAgIGlmIChlbGVtZW50WzBdLmNoZWNrZWQpIHtcclxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGF0dHIudmFsdWUsIGV2ICYmIGV2LnR5cGUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGVsZW1lbnQub24oJ2NsaWNrJywgbGlzdGVuZXIpO1xyXG5cclxuICBjdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB2YWx1ZSA9IGF0dHIudmFsdWU7XHJcbiAgICBlbGVtZW50WzBdLmNoZWNrZWQgPSAodmFsdWUgPT0gY3RybC4kdmlld1ZhbHVlKTtcclxuICB9O1xyXG5cclxuICBhdHRyLiRvYnNlcnZlKCd2YWx1ZScsIGN0cmwuJHJlbmRlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgY29udGV4dCwgbmFtZSwgZXhwcmVzc2lvbiwgZmFsbGJhY2spIHtcclxuICB2YXIgcGFyc2VGbjtcclxuICBpZiAoaXNEZWZpbmVkKGV4cHJlc3Npb24pKSB7XHJcbiAgICBwYXJzZUZuID0gJHBhcnNlKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKCFwYXJzZUZuLmNvbnN0YW50KSB7XHJcbiAgICAgIHRocm93IG1pbkVycignbmdNb2RlbCcpKCdjb25zdGV4cHInLCAnRXhwZWN0ZWQgY29uc3RhbnQgZXhwcmVzc2lvbiBmb3IgYHswfWAsIGJ1dCBzYXcgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2B7MX1gLicsIG5hbWUsIGV4cHJlc3Npb24pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlRm4oY29udGV4dCk7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxsYmFjaztcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tib3hJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3NlciwgJGZpbHRlciwgJHBhcnNlKSB7XHJcbiAgdmFyIHRydWVWYWx1ZSA9IHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgc2NvcGUsICduZ1RydWVWYWx1ZScsIGF0dHIubmdUcnVlVmFsdWUsIHRydWUpO1xyXG4gIHZhciBmYWxzZVZhbHVlID0gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBzY29wZSwgJ25nRmFsc2VWYWx1ZScsIGF0dHIubmdGYWxzZVZhbHVlLCBmYWxzZSk7XHJcblxyXG4gIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICBjdHJsLiRzZXRWaWV3VmFsdWUoZWxlbWVudFswXS5jaGVja2VkLCBldiAmJiBldi50eXBlKTtcclxuICB9O1xyXG5cclxuICBlbGVtZW50Lm9uKCdjbGljaycsIGxpc3RlbmVyKTtcclxuXHJcbiAgY3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICBlbGVtZW50WzBdLmNoZWNrZWQgPSBjdHJsLiR2aWV3VmFsdWU7XHJcbiAgfTtcclxuXHJcbiAgLy8gT3ZlcnJpZGUgdGhlIHN0YW5kYXJkIGAkaXNFbXB0eWAgYmVjYXVzZSBhbiBlbXB0eSBjaGVja2JveCBpcyBuZXZlciBlcXVhbCB0byB0aGUgdHJ1ZVZhbHVlXHJcbiAgY3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgIT09IHRydWVWYWx1ZTtcclxuICB9O1xyXG5cclxuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiBlcXVhbHModmFsdWUsIHRydWVWYWx1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlID8gdHJ1ZVZhbHVlIDogZmFsc2VWYWx1ZTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIHRleHRhcmVhXHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBIVE1MIHRleHRhcmVhIGVsZW1lbnQgY29udHJvbCB3aXRoIGFuZ3VsYXIgZGF0YS1iaW5kaW5nLiBUaGUgZGF0YS1iaW5kaW5nIGFuZCB2YWxpZGF0aW9uXHJcbiAqIHByb3BlcnRpZXMgb2YgdGhpcyBlbGVtZW50IGFyZSBleGFjdGx5IHRoZSBzYW1lIGFzIHRob3NlIG9mIHRoZVxyXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOmlucHV0IGlucHV0IGVsZW1lbnR9LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXHJcbiAqICAgIG1pbmxlbmd0aC5cclxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxyXG4gKiAgICBtYXhsZW5ndGguXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCB0aGVcclxuICogICAgUmVnRXhwIHBhdHRlcm4gZXhwcmVzc2lvbi4gRXhwZWN0ZWQgdmFsdWUgaXMgYC9yZWdleHAvYCBmb3IgaW5saW5lIHBhdHRlcm5zIG9yIGByZWdleHBgIGZvclxyXG4gKiAgICBwYXR0ZXJucyBkZWZpbmVkIGFzIHNjb3BlIGV4cHJlc3Npb25zLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICogQHBhcmFtIHtib29sZWFuPX0gW25nVHJpbT10cnVlXSBJZiBzZXQgdG8gZmFsc2UgQW5ndWxhciB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBpbnB1dFxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogSFRNTCBpbnB1dCBlbGVtZW50IGNvbnRyb2wgd2l0aCBhbmd1bGFyIGRhdGEtYmluZGluZy4gSW5wdXQgY29udHJvbCBmb2xsb3dzIEhUTUw1IGlucHV0IHR5cGVzXHJcbiAqIGFuZCBwb2x5ZmlsbHMgdGhlIEhUTUw1IHZhbGlkYXRpb24gYmVoYXZpb3IgZm9yIG9sZGVyIGJyb3dzZXJzLlxyXG4gKlxyXG4gKiAqTk9URSogTm90IGV2ZXJ5IGZlYXR1cmUgb2ZmZXJlZCBpcyBhdmFpbGFibGUgZm9yIGFsbCBpbnB1dCB0eXBlcy5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cclxuICogQHBhcmFtIHtib29sZWFuPX0gbmdSZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGlmIHNldCB0byB0cnVlXHJcbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXHJcbiAqICAgIG1pbmxlbmd0aC5cclxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxyXG4gKiAgICBtYXhsZW5ndGguXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCB0aGVcclxuICogICAgUmVnRXhwIHBhdHRlcm4gZXhwcmVzc2lvbi4gRXhwZWN0ZWQgdmFsdWUgaXMgYC9yZWdleHAvYCBmb3IgaW5saW5lIHBhdHRlcm5zIG9yIGByZWdleHBgIGZvclxyXG4gKiAgICBwYXR0ZXJucyBkZWZpbmVkIGFzIHNjb3BlIGV4cHJlc3Npb25zLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICogQHBhcmFtIHtib29sZWFuPX0gW25nVHJpbT10cnVlXSBJZiBzZXQgdG8gZmFsc2UgQW5ndWxhciB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxyXG4gKiAgICBUaGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkIGZvciBpbnB1dFt0eXBlPXBhc3N3b3JkXSBjb250cm9scywgd2hpY2ggd2lsbCBuZXZlciB0cmltIHRoZVxyXG4gKiAgICBpbnB1dC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlIG5hbWU9XCJpbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJpbnB1dEV4YW1wbGVcIj5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnaW5wdXRFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnVzZXIgPSB7bmFtZTogJ2d1ZXN0JywgbGFzdDogJ3Zpc2l0b3InfTtcclxuICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XHJcbiAgICAgICAgICAgVXNlciBuYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIiBuZy1tb2RlbD1cInVzZXIubmFtZVwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLnVzZXJOYW1lLiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPjxicj5cclxuICAgICAgICAgICBMYXN0IG5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJsYXN0TmFtZVwiIG5nLW1vZGVsPVwidXNlci5sYXN0XCJcclxuICAgICAgICAgICAgIG5nLW1pbmxlbmd0aD1cIjNcIiBuZy1tYXhsZW5ndGg9XCIxMFwiPlxyXG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmxhc3ROYW1lLiRlcnJvci5taW5sZW5ndGhcIj5cclxuICAgICAgICAgICAgIFRvbyBzaG9ydCE8L3NwYW4+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubGFzdE5hbWUuJGVycm9yLm1heGxlbmd0aFwiPlxyXG4gICAgICAgICAgICAgVG9vIGxvbmchPC9zcGFuPjxicj5cclxuICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICA8aHI+XHJcbiAgICAgICAgIDx0dD51c2VyID0ge3t1c2VyfX08L3R0Pjxici8+XHJcbiAgICAgICAgIDx0dD5teUZvcm0udXNlck5hbWUuJHZhbGlkID0ge3tteUZvcm0udXNlck5hbWUuJHZhbGlkfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS51c2VyTmFtZS4kZXJyb3IgPSB7e215Rm9ybS51c2VyTmFtZS4kZXJyb3J9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLmxhc3ROYW1lLiR2YWxpZCA9IHt7bXlGb3JtLmxhc3ROYW1lLiR2YWxpZH19PC90dD48YnI+XHJcbiAgICAgICAgIDx0dD5teUZvcm0ubGFzdE5hbWUuJGVycm9yID0ge3tteUZvcm0ubGFzdE5hbWUuJGVycm9yfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IubWlubGVuZ3RoID0ge3shIW15Rm9ybS4kZXJyb3IubWlubGVuZ3RofX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IubWF4bGVuZ3RoID0ge3shIW15Rm9ybS4kZXJyb3IubWF4bGVuZ3RofX08L3R0Pjxicj5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICB2YXIgdXNlciA9IGVsZW1lbnQoYnkuZXhhY3RCaW5kaW5nKCd1c2VyJykpO1xyXG4gICAgICAgIHZhciB1c2VyTmFtZVZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0udXNlck5hbWUuJHZhbGlkJykpO1xyXG4gICAgICAgIHZhciBsYXN0TmFtZVZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0ubGFzdE5hbWUuJHZhbGlkJykpO1xyXG4gICAgICAgIHZhciBsYXN0TmFtZUVycm9yID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0ubGFzdE5hbWUuJGVycm9yJykpO1xyXG4gICAgICAgIHZhciBmb3JtVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS4kdmFsaWQnKSk7XHJcbiAgICAgICAgdmFyIHVzZXJOYW1lSW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLm5hbWUnKSk7XHJcbiAgICAgICAgdmFyIHVzZXJMYXN0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLmxhc3QnKSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCIsXCJsYXN0XCI6XCJ2aXNpdG9yXCJ9Jyk7XHJcbiAgICAgICAgICBleHBlY3QodXNlck5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHkgd2hlbiByZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdXNlck5hbWVJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgdXNlck5hbWVJbnB1dC5zZW5kS2V5cygnJyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcImxhc3RcIjpcInZpc2l0b3JcIn0nKTtcclxuICAgICAgICAgIGV4cGVjdCh1c2VyTmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSB2YWxpZCBpZiBlbXB0eSB3aGVuIG1pbiBsZW5ndGggaXMgc2V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCcnKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIixcImxhc3RcIjpcIlwifScpO1xyXG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGxlc3MgdGhhbiByZXF1aXJlZCBtaW4gbGVuZ3RoJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCd4eCcpO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwifScpO1xyXG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVFcnJvci5nZXRUZXh0KCkpLnRvQ29udGFpbignbWlubGVuZ3RoJyk7XHJcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbG9uZ2VyIHRoYW4gbWF4IGxlbmd0aCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5zZW5kS2V5cygnc29tZSByaWRpY3Vsb3VzbHkgbG9uZyBuYW1lJyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCJ9Jyk7XHJcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZUVycm9yLmdldFRleHQoKSkudG9Db250YWluKCdtYXhsZW5ndGgnKTtcclxuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBpbnB1dERpcmVjdGl2ZSA9IFsnJGJyb3dzZXInLCAnJHNuaWZmZXInLCAnJGZpbHRlcicsICckcGFyc2UnLFxyXG4gICAgZnVuY3Rpb24oJGJyb3dzZXIsICRzbmlmZmVyLCAkZmlsdGVyLCAkcGFyc2UpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgIHJlcXVpcmU6IFsnP25nTW9kZWwnXSxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xyXG4gICAgICBpZiAoY3RybHNbMF0pIHtcclxuICAgICAgICAoaW5wdXRUeXBlW2xvd2VyY2FzZShhdHRyLnR5cGUpXSB8fCBpbnB1dFR5cGUudGV4dCkoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzWzBdLCAkc25pZmZlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGJyb3dzZXIsICRmaWx0ZXIsICRwYXJzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbnZhciBWQUxJRF9DTEFTUyA9ICduZy12YWxpZCcsXHJcbiAgICBJTlZBTElEX0NMQVNTID0gJ25nLWludmFsaWQnLFxyXG4gICAgUFJJU1RJTkVfQ0xBU1MgPSAnbmctcHJpc3RpbmUnLFxyXG4gICAgRElSVFlfQ0xBU1MgPSAnbmctZGlydHknLFxyXG4gICAgVU5UT1VDSEVEX0NMQVNTID0gJ25nLXVudG91Y2hlZCcsXHJcbiAgICBUT1VDSEVEX0NMQVNTID0gJ25nLXRvdWNoZWQnLFxyXG4gICAgUEVORElOR19DTEFTUyA9ICduZy1wZW5kaW5nJztcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgdHlwZVxyXG4gKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSAkdmlld1ZhbHVlIEFjdHVhbCBzdHJpbmcgdmFsdWUgaW4gdGhlIHZpZXcuXHJcbiAqIEBwcm9wZXJ0eSB7Kn0gJG1vZGVsVmFsdWUgVGhlIHZhbHVlIGluIHRoZSBtb2RlbCwgdGhhdCB0aGUgY29udHJvbCBpcyBib3VuZCB0by5cclxuICogQHByb3BlcnR5IHtBcnJheS48RnVuY3Rpb24+fSAkcGFyc2VycyBBcnJheSBvZiBmdW5jdGlvbnMgdG8gZXhlY3V0ZSwgYXMgYSBwaXBlbGluZSwgd2hlbmV2ZXJcclxuICAgICAgIHRoZSBjb250cm9sIHJlYWRzIHZhbHVlIGZyb20gdGhlIERPTS4gIEVhY2ggZnVuY3Rpb24gaXMgY2FsbGVkLCBpbiB0dXJuLCBwYXNzaW5nIHRoZSB2YWx1ZVxyXG4gICAgICAgdGhyb3VnaCB0byB0aGUgbmV4dC4gVGhlIGxhc3QgcmV0dXJuIHZhbHVlIGlzIHVzZWQgdG8gcG9wdWxhdGUgdGhlIG1vZGVsLlxyXG4gICAgICAgVXNlZCB0byBzYW5pdGl6ZSAvIGNvbnZlcnQgdGhlIHZhbHVlIGFzIHdlbGwgYXMgdmFsaWRhdGlvbi4gRm9yIHZhbGlkYXRpb24sXHJcbiAgICAgICB0aGUgcGFyc2VycyBzaG91bGQgdXBkYXRlIHRoZSB2YWxpZGl0eSBzdGF0ZSB1c2luZ1xyXG4gICAgICAge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZhbGlkaXR5ICRzZXRWYWxpZGl0eSgpfSxcclxuICAgICAgIGFuZCByZXR1cm4gYHVuZGVmaW5lZGAgZm9yIGludmFsaWQgdmFsdWVzLlxyXG5cclxuICpcclxuICogQHByb3BlcnR5IHtBcnJheS48RnVuY3Rpb24+fSAkZm9ybWF0dGVycyBBcnJheSBvZiBmdW5jdGlvbnMgdG8gZXhlY3V0ZSwgYXMgYSBwaXBlbGluZSwgd2hlbmV2ZXJcclxuICAgICAgIHRoZSBtb2RlbCB2YWx1ZSBjaGFuZ2VzLiBFYWNoIGZ1bmN0aW9uIGlzIGNhbGxlZCwgaW4gdHVybiwgcGFzc2luZyB0aGUgdmFsdWUgdGhyb3VnaCB0byB0aGVcclxuICAgICAgIG5leHQuIFVzZWQgdG8gZm9ybWF0IC8gY29udmVydCB2YWx1ZXMgZm9yIGRpc3BsYXkgaW4gdGhlIGNvbnRyb2wgYW5kIHZhbGlkYXRpb24uXHJcbiAqIGBgYGpzXHJcbiAqIGZ1bmN0aW9uIGZvcm1hdHRlcih2YWx1ZSkge1xyXG4gKiAgIGlmICh2YWx1ZSkge1xyXG4gKiAgICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJDYXNlKCk7XHJcbiAqICAgfVxyXG4gKiB9XHJcbiAqIG5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmb3JtYXR0ZXIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSAkdmFsaWRhdG9ycyBBIGNvbGxlY3Rpb24gb2YgdmFsaWRhdG9ycyB0aGF0IGFyZSBhcHBsaWVkXHJcbiAqICAgICAgd2hlbmV2ZXIgdGhlIG1vZGVsIHZhbHVlIGNoYW5nZXMuIFRoZSBrZXkgdmFsdWUgd2l0aGluIHRoZSBvYmplY3QgcmVmZXJzIHRvIHRoZSBuYW1lIG9mIHRoZVxyXG4gKiAgICAgIHZhbGlkYXRvciB3aGlsZSB0aGUgZnVuY3Rpb24gcmVmZXJzIHRvIHRoZSB2YWxpZGF0aW9uIG9wZXJhdGlvbi4gVGhlIHZhbGlkYXRpb24gb3BlcmF0aW9uIGlzXHJcbiAqICAgICAgcHJvdmlkZWQgd2l0aCB0aGUgbW9kZWwgdmFsdWUgYXMgYW4gYXJndW1lbnQgYW5kIG11c3QgcmV0dXJuIGEgdHJ1ZSBvciBmYWxzZSB2YWx1ZSBkZXBlbmRpbmdcclxuICogICAgICBvbiB0aGUgcmVzcG9uc2Ugb2YgdGhhdCB2YWxpZGF0aW9uLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBuZ01vZGVsLiR2YWxpZGF0b3JzLnZhbGlkQ2hhcmFjdGVycyA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xyXG4gKiAgIHZhciB2YWx1ZSA9IG1vZGVsVmFsdWUgfHwgdmlld1ZhbHVlO1xyXG4gKiAgIHJldHVybiAvWzAtOV0rLy50ZXN0KHZhbHVlKSAmJlxyXG4gKiAgICAgICAgICAvW2Etel0rLy50ZXN0KHZhbHVlKSAmJlxyXG4gKiAgICAgICAgICAvW0EtWl0rLy50ZXN0KHZhbHVlKSAmJlxyXG4gKiAgICAgICAgICAvXFxXKy8udGVzdCh2YWx1ZSk7XHJcbiAqIH07XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj59ICRhc3luY1ZhbGlkYXRvcnMgQSBjb2xsZWN0aW9uIG9mIHZhbGlkYXRpb25zIHRoYXQgYXJlIGV4cGVjdGVkIHRvXHJcbiAqICAgICAgcGVyZm9ybSBhbiBhc3luY2hyb25vdXMgdmFsaWRhdGlvbiAoZS5nLiBhIEhUVFAgcmVxdWVzdCkuIFRoZSB2YWxpZGF0aW9uIGZ1bmN0aW9uIHRoYXQgaXMgcHJvdmlkZWRcclxuICogICAgICBpcyBleHBlY3RlZCB0byByZXR1cm4gYSBwcm9taXNlIHdoZW4gaXQgaXMgcnVuIGR1cmluZyB0aGUgbW9kZWwgdmFsaWRhdGlvbiBwcm9jZXNzLiBPbmNlIHRoZSBwcm9taXNlXHJcbiAqICAgICAgaXMgZGVsaXZlcmVkIHRoZW4gdGhlIHZhbGlkYXRpb24gc3RhdHVzIHdpbGwgYmUgc2V0IHRvIHRydWUgd2hlbiBmdWxmaWxsZWQgYW5kIGZhbHNlIHdoZW4gcmVqZWN0ZWQuXHJcbiAqICAgICAgV2hlbiB0aGUgYXN5bmNocm9ub3VzIHZhbGlkYXRvcnMgYXJlIHRyaWdnZXJlZCwgZWFjaCBvZiB0aGUgdmFsaWRhdG9ycyB3aWxsIHJ1biBpbiBwYXJhbGxlbCBhbmQgdGhlIG1vZGVsXHJcbiAqICAgICAgdmFsdWUgd2lsbCBvbmx5IGJlIHVwZGF0ZWQgb25jZSBhbGwgdmFsaWRhdG9ycyBoYXZlIGJlZW4gZnVsZmlsbGVkLiBBbHNvLCBrZWVwIGluIG1pbmQgdGhhdCBhbGxcclxuICogICAgICBhc3luY2hyb25vdXMgdmFsaWRhdG9ycyB3aWxsIG9ubHkgcnVuIG9uY2UgYWxsIHN5bmNocm9ub3VzIHZhbGlkYXRvcnMgaGF2ZSBwYXNzZWQuXHJcbiAqXHJcbiAqIFBsZWFzZSBub3RlIHRoYXQgaWYgJGh0dHAgaXMgdXNlZCB0aGVuIGl0IGlzIGltcG9ydGFudCB0aGF0IHRoZSBzZXJ2ZXIgcmV0dXJucyBhIHN1Y2Nlc3MgSFRUUCByZXNwb25zZSBjb2RlXHJcbiAqIGluIG9yZGVyIHRvIGZ1bGZpbGwgdGhlIHZhbGlkYXRpb24gYW5kIGEgc3RhdHVzIGxldmVsIG9mIGA0eHhgIGluIG9yZGVyIHRvIHJlamVjdCB0aGUgdmFsaWRhdGlvbi5cclxuICpcclxuICogYGBganNcclxuICogbmdNb2RlbC4kYXN5bmNWYWxpZGF0b3JzLnVuaXF1ZVVzZXJuYW1lID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XHJcbiAqICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XHJcbiAqXHJcbiAqICAgLy8gTG9va3VwIHVzZXIgYnkgdXNlcm5hbWVcclxuICogICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyB2YWx1ZSkuXHJcbiAqICAgICAgdGhlbihmdW5jdGlvbiByZXNvbHZlZCgpIHtcclxuICogICAgICAgIC8vdXNlcm5hbWUgZXhpc3RzLCB0aGlzIG1lYW5zIHZhbGlkYXRpb24gZmFpbHNcclxuICogICAgICAgIHJldHVybiAkcS5yZWplY3QoJ2V4aXN0cycpO1xyXG4gKiAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdGVkKCkge1xyXG4gKiAgICAgICAgLy91c2VybmFtZSBkb2VzIG5vdCBleGlzdCwgdGhlcmVmb3JlIHRoaXMgdmFsaWRhdGlvbiBwYXNzZXNcclxuICogICAgICAgIHJldHVybiB0cnVlO1xyXG4gKiAgICAgIH0pO1xyXG4gKiB9O1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHZhbGlkYXRvci5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gdmFsaWRhdGlvbkZuIFRoZSB2YWxpZGF0aW9uIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBydW4uXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJHZpZXdDaGFuZ2VMaXN0ZW5lcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUgd2hlbmV2ZXIgdGhlXHJcbiAqICAgICB2aWV3IHZhbHVlIGhhcyBjaGFuZ2VkLiBJdCBpcyBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIGFuZCBpdHMgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXHJcbiAqICAgICBUaGlzIGNhbiBiZSB1c2VkIGluIHBsYWNlIG9mIGFkZGl0aW9uYWwgJHdhdGNoZXMgYWdhaW5zdCB0aGUgbW9kZWwgdmFsdWUuXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkZXJyb3IgQW4gb2JqZWN0IGhhc2ggd2l0aCBhbGwgZmFpbGluZyB2YWxpZGF0b3IgaWRzIGFzIGtleXMuXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkcGVuZGluZyBBbiBvYmplY3QgaGFzaCB3aXRoIGFsbCBwZW5kaW5nIHZhbGlkYXRvciBpZHMgYXMga2V5cy5cclxuICpcclxuICogQHByb3BlcnR5IHtib29sZWFufSAkdW50b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbm90IGxvc3QgZm9jdXMgeWV0LlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR0b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbG9zdCBmb2N1cy5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkcHJpc3RpbmUgVHJ1ZSBpZiB1c2VyIGhhcyBub3QgaW50ZXJhY3RlZCB3aXRoIHRoZSBjb250cm9sIHlldC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgY29udHJvbC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkdmFsaWQgVHJ1ZSBpZiB0aGVyZSBpcyBubyBlcnJvci5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkaW52YWxpZCBUcnVlIGlmIGF0IGxlYXN0IG9uZSBlcnJvciBvbiB0aGUgY29udHJvbC5cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIGBOZ01vZGVsQ29udHJvbGxlcmAgcHJvdmlkZXMgQVBJIGZvciB0aGUgYG5nLW1vZGVsYCBkaXJlY3RpdmUuIFRoZSBjb250cm9sbGVyIGNvbnRhaW5zXHJcbiAqIHNlcnZpY2VzIGZvciBkYXRhLWJpbmRpbmcsIHZhbGlkYXRpb24sIENTUyB1cGRhdGVzLCBhbmQgdmFsdWUgZm9ybWF0dGluZyBhbmQgcGFyc2luZy4gSXRcclxuICogcHVycG9zZWZ1bGx5IGRvZXMgbm90IGNvbnRhaW4gYW55IGxvZ2ljIHdoaWNoIGRlYWxzIHdpdGggRE9NIHJlbmRlcmluZyBvciBsaXN0ZW5pbmcgdG9cclxuICogRE9NIGV2ZW50cy4gU3VjaCBET00gcmVsYXRlZCBsb2dpYyBzaG91bGQgYmUgcHJvdmlkZWQgYnkgb3RoZXIgZGlyZWN0aXZlcyB3aGljaCBtYWtlIHVzZSBvZlxyXG4gKiBgTmdNb2RlbENvbnRyb2xsZXJgIGZvciBkYXRhLWJpbmRpbmcuXHJcbiAqXHJcbiAqICMjIEN1c3RvbSBDb250cm9sIEV4YW1wbGVcclxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYE5nTW9kZWxDb250cm9sbGVyYCB3aXRoIGEgY3VzdG9tIGNvbnRyb2wgdG8gYWNoaWV2ZVxyXG4gKiBkYXRhLWJpbmRpbmcuIE5vdGljZSBob3cgZGlmZmVyZW50IGRpcmVjdGl2ZXMgKGBjb250ZW50ZWRpdGFibGVgLCBgbmctbW9kZWxgLCBhbmQgYHJlcXVpcmVkYClcclxuICogY29sbGFib3JhdGUgdG9nZXRoZXIgdG8gYWNoaWV2ZSB0aGUgZGVzaXJlZCByZXN1bHQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCBgY29udGVudGVkaXRhYmxlYCBpcyBhbiBIVE1MNSBhdHRyaWJ1dGUsIHdoaWNoIHRlbGxzIHRoZSBicm93c2VyIHRvIGxldCB0aGUgZWxlbWVudFxyXG4gKiBjb250ZW50cyBiZSBlZGl0ZWQgaW4gcGxhY2UgYnkgdGhlIHVzZXIuICBUaGlzIHdpbGwgbm90IHdvcmsgb24gb2xkZXIgYnJvd3NlcnMuXHJcbiAqXHJcbiAqIFdlIGFyZSB1c2luZyB0aGUge0BsaW5rIG5nLnNlcnZpY2U6JHNjZSAkc2NlfSBzZXJ2aWNlIGhlcmUgYW5kIGluY2x1ZGUgdGhlIHtAbGluayBuZ1Nhbml0aXplICRzYW5pdGl6ZX1cclxuICogbW9kdWxlIHRvIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIFwiYmFkXCIgY29udGVudCBsaWtlIGlubGluZSBldmVudCBsaXN0ZW5lciAoZS5nLiBgPHNwYW4gb25jbGljaz1cIi4uLlwiPmApLlxyXG4gKiBIb3dldmVyLCBhcyB3ZSBhcmUgdXNpbmcgYCRzY2VgIHRoZSBtb2RlbCBjYW4gc3RpbGwgZGVjaWRlIHRvIHRvIHByb3ZpZGUgdW5zYWZlIGNvbnRlbnQgaWYgaXQgbWFya3NcclxuICogdGhhdCBjb250ZW50IHVzaW5nIHRoZSBgJHNjZWAgc2VydmljZS5cclxuICpcclxuICogPGV4YW1wbGUgbmFtZT1cIk5nTW9kZWxDb250cm9sbGVyXCIgbW9kdWxlPVwiY3VzdG9tQ29udHJvbFwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XHJcbiAgICAgIFtjb250ZW50ZWRpdGFibGVdIHtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgICAgICBtaW4taGVpZ2h0OiAyMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAubmctaW52YWxpZCB7XHJcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmVkO1xyXG4gICAgICB9XHJcblxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tQ29udHJvbCcsIFsnbmdTYW5pdGl6ZSddKS5cclxuICAgICAgICBkaXJlY3RpdmUoJ2NvbnRlbnRlZGl0YWJsZScsIFsnJHNjZScsIGZ1bmN0aW9uKCRzY2UpIHtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsIC8vIG9ubHkgYWN0aXZhdGUgb24gZWxlbWVudCBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJywgLy8gZ2V0IGEgaG9sZCBvZiBOZ01vZGVsQ29udHJvbGxlclxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuICAgICAgICAgICAgICBpZiAoIW5nTW9kZWwpIHJldHVybjsgLy8gZG8gbm90aGluZyBpZiBubyBuZy1tb2RlbFxyXG5cclxuICAgICAgICAgICAgICAvLyBTcGVjaWZ5IGhvdyBVSSBzaG91bGQgYmUgdXBkYXRlZFxyXG4gICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5odG1sKCRzY2UuZ2V0VHJ1c3RlZEh0bWwobmdNb2RlbC4kdmlld1ZhbHVlIHx8ICcnKSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBjaGFuZ2UgZXZlbnRzIHRvIGVuYWJsZSBiaW5kaW5nXHJcbiAgICAgICAgICAgICAgZWxlbWVudC5vbignYmx1ciBrZXl1cCBjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShyZWFkKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICByZWFkKCk7IC8vIGluaXRpYWxpemVcclxuXHJcbiAgICAgICAgICAgICAgLy8gV3JpdGUgZGF0YSB0byB0aGUgbW9kZWxcclxuICAgICAgICAgICAgICBmdW5jdGlvbiByZWFkKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBlbGVtZW50Lmh0bWwoKTtcclxuICAgICAgICAgICAgICAgIC8vIFdoZW4gd2UgY2xlYXIgdGhlIGNvbnRlbnQgZWRpdGFibGUgdGhlIGJyb3dzZXIgbGVhdmVzIGEgPGJyPiBiZWhpbmRcclxuICAgICAgICAgICAgICAgIC8vIElmIHN0cmlwLWJyIGF0dHJpYnV0ZSBpcyBwcm92aWRlZCB0aGVuIHdlIHN0cmlwIHRoaXMgb3V0XHJcbiAgICAgICAgICAgICAgICBpZiAoIGF0dHJzLnN0cmlwQnIgJiYgaHRtbCA9PSAnPGJyPicgKSB7XHJcbiAgICAgICAgICAgICAgICAgIGh0bWwgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShodG1sKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfV0pO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiPlxyXG4gICAgICAgPGRpdiBjb250ZW50ZWRpdGFibGVcclxuICAgICAgICAgICAgbmFtZT1cIm15V2lkZ2V0XCIgbmctbW9kZWw9XCJ1c2VyQ29udGVudFwiXHJcbiAgICAgICAgICAgIHN0cmlwLWJyPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgIHJlcXVpcmVkPkNoYW5nZSBtZSE8L2Rpdj5cclxuICAgICAgICA8c3BhbiBuZy1zaG93PVwibXlGb3JtLm15V2lkZ2V0LiRlcnJvci5yZXF1aXJlZFwiPlJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgIDxocj5cclxuICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInVzZXJDb250ZW50XCI+PC90ZXh0YXJlYT5cclxuICAgICAgPC9mb3JtPlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgaXQoJ3Nob3VsZCBkYXRhLWJpbmQgYW5kIGJlY29tZSBpbnZhbGlkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmIChicm93c2VyLnBhcmFtcy5icm93c2VyID09ICdzYWZhcmknIHx8IGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ2ZpcmVmb3gnKSB7XHJcbiAgICAgICAgLy8gU2FmYXJpRHJpdmVyIGNhbid0IGhhbmRsZSBjb250ZW50ZWRpdGFibGVcclxuICAgICAgICAvLyBhbmQgRmlyZWZveCBkcml2ZXIgY2FuJ3QgY2xlYXIgY29udGVudGVkaXRhYmxlcyB2ZXJ5IHdlbGxcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGNvbnRlbnRFZGl0YWJsZSA9IGVsZW1lbnQoYnkuY3NzKCdbY29udGVudGVkaXRhYmxlXScpKTtcclxuICAgICAgdmFyIGNvbnRlbnQgPSAnQ2hhbmdlIG1lISc7XHJcblxyXG4gICAgICBleHBlY3QoY29udGVudEVkaXRhYmxlLmdldFRleHQoKSkudG9FcXVhbChjb250ZW50KTtcclxuXHJcbiAgICAgIGNvbnRlbnRFZGl0YWJsZS5jbGVhcigpO1xyXG4gICAgICBjb250ZW50RWRpdGFibGUuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuQkFDS19TUEFDRSk7XHJcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0VGV4dCgpKS50b0VxdWFsKCcnKTtcclxuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL25nLWludmFsaWQtcmVxdWlyZWQvKTtcclxuICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gKiA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqXHJcbiAqL1xyXG52YXIgTmdNb2RlbENvbnRyb2xsZXIgPSBbJyRzY29wZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckYXR0cnMnLCAnJGVsZW1lbnQnLCAnJHBhcnNlJywgJyRhbmltYXRlJywgJyR0aW1lb3V0JywgJyRyb290U2NvcGUnLCAnJHEnLFxyXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkZXhjZXB0aW9uSGFuZGxlciwgJGF0dHIsICRlbGVtZW50LCAkcGFyc2UsICRhbmltYXRlLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJHEpIHtcclxuICB0aGlzLiR2aWV3VmFsdWUgPSBOdW1iZXIuTmFOO1xyXG4gIHRoaXMuJG1vZGVsVmFsdWUgPSBOdW1iZXIuTmFOO1xyXG4gIHRoaXMuJHZhbGlkYXRvcnMgPSB7fTtcclxuICB0aGlzLiRhc3luY1ZhbGlkYXRvcnMgPSB7fTtcclxuICB0aGlzLiRwYXJzZXJzID0gW107XHJcbiAgdGhpcy4kZm9ybWF0dGVycyA9IFtdO1xyXG4gIHRoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMgPSBbXTtcclxuICB0aGlzLiR1bnRvdWNoZWQgPSB0cnVlO1xyXG4gIHRoaXMuJHRvdWNoZWQgPSBmYWxzZTtcclxuICB0aGlzLiRwcmlzdGluZSA9IHRydWU7XHJcbiAgdGhpcy4kZGlydHkgPSBmYWxzZTtcclxuICB0aGlzLiR2YWxpZCA9IHRydWU7XHJcbiAgdGhpcy4kaW52YWxpZCA9IGZhbHNlO1xyXG4gIHRoaXMuJGVycm9yID0ge307IC8vIGtlZXAgaW52YWxpZCBrZXlzIGhlcmVcclxuICB0aGlzLiQkc3VjY2VzcyA9IHt9OyAvLyBrZWVwIHZhbGlkIGtleXMgaGVyZVxyXG4gIHRoaXMuJHBlbmRpbmcgPSB1bmRlZmluZWQ7IC8vIGtlZXAgcGVuZGluZyBrZXlzIGhlcmVcclxuICB0aGlzLiRuYW1lID0gJGF0dHIubmFtZTtcclxuXHJcblxyXG4gIHZhciBwYXJzZWROZ01vZGVsID0gJHBhcnNlKCRhdHRyLm5nTW9kZWwpLFxyXG4gICAgICBwZW5kaW5nRGVib3VuY2UgPSBudWxsLFxyXG4gICAgICBjdHJsID0gdGhpcztcclxuXHJcbiAgdmFyIG5nTW9kZWxHZXQgPSBmdW5jdGlvbiBuZ01vZGVsR2V0KCkge1xyXG4gICAgdmFyIG1vZGVsVmFsdWUgPSBwYXJzZWROZ01vZGVsKCRzY29wZSk7XHJcbiAgICBpZiAoY3RybC4kb3B0aW9ucyAmJiBjdHJsLiRvcHRpb25zLmdldHRlclNldHRlciAmJiBpc0Z1bmN0aW9uKG1vZGVsVmFsdWUpKSB7XHJcbiAgICAgIG1vZGVsVmFsdWUgPSBtb2RlbFZhbHVlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbW9kZWxWYWx1ZTtcclxuICB9O1xyXG5cclxuICB2YXIgbmdNb2RlbFNldCA9IGZ1bmN0aW9uIG5nTW9kZWxTZXQobmV3VmFsdWUpIHtcclxuICAgIHZhciBnZXR0ZXJTZXR0ZXI7XHJcbiAgICBpZiAoY3RybC4kb3B0aW9ucyAmJiBjdHJsLiRvcHRpb25zLmdldHRlclNldHRlciAmJlxyXG4gICAgICAgIGlzRnVuY3Rpb24oZ2V0dGVyU2V0dGVyID0gcGFyc2VkTmdNb2RlbCgkc2NvcGUpKSkge1xyXG5cclxuICAgICAgZ2V0dGVyU2V0dGVyKGN0cmwuJG1vZGVsVmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcGFyc2VkTmdNb2RlbC5hc3NpZ24oJHNjb3BlLCBjdHJsLiRtb2RlbFZhbHVlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB0aGlzLiQkc2V0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIGN0cmwuJG9wdGlvbnMgPSBvcHRpb25zO1xyXG5cclxuICAgIGlmICghcGFyc2VkTmdNb2RlbC5hc3NpZ24gJiYgKCFvcHRpb25zIHx8ICFvcHRpb25zLmdldHRlclNldHRlcikpIHtcclxuICAgICAgdGhyb3cgJG5nTW9kZWxNaW5FcnIoJ25vbmFzc2lnbicsIFwiRXhwcmVzc2lvbiAnezB9JyBpcyBub24tYXNzaWduYWJsZS4gRWxlbWVudDogezF9XCIsXHJcbiAgICAgICAgICAkYXR0ci5uZ01vZGVsLCBzdGFydGluZ1RhZygkZWxlbWVudCkpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyZW5kZXJcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHVwZGF0ZWQuIEl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIHVzZXIgb2YgdGhlIG5nLW1vZGVsXHJcbiAgICogZGlyZWN0aXZlIHdpbGwgaW1wbGVtZW50IHRoaXMgbWV0aG9kLlxyXG4gICAqXHJcbiAgICogVGhlIGAkcmVuZGVyKClgIG1ldGhvZCBpcyBpbnZva2VkIGluIHRoZSBmb2xsb3dpbmcgc2l0dWF0aW9uczpcclxuICAgKlxyXG4gICAqICogYCRyb2xsYmFja1ZpZXdWYWx1ZSgpYCBpcyBjYWxsZWQuICBJZiB3ZSBhcmUgcm9sbGluZyBiYWNrIHRoZSB2aWV3IHZhbHVlIHRvIHRoZSBsYXN0XHJcbiAgICogICBjb21taXR0ZWQgdmFsdWUgdGhlbiBgJHJlbmRlcigpYCBpcyBjYWxsZWQgdG8gdXBkYXRlIHRoZSBpbnB1dCBjb250cm9sLlxyXG4gICAqICogVGhlIHZhbHVlIHJlZmVyZW5jZWQgYnkgYG5nLW1vZGVsYCBpcyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHkgYW5kIGJvdGggdGhlIGAkbW9kZWxWYWx1ZWAgYW5kXHJcbiAgICogICB0aGUgYCR2aWV3VmFsdWVgIGFyZSBkaWZmZXJlbnQgdG8gbGFzdCB0aW1lLlxyXG4gICAqXHJcbiAgICogU2luY2UgYG5nLW1vZGVsYCBkb2VzIG5vdCBkbyBhIGRlZXAgd2F0Y2gsIGAkcmVuZGVyKClgIGlzIG9ubHkgaW52b2tlZCBpZiB0aGUgdmFsdWVzIG9mXHJcbiAgICogYCRtb2RlbFZhbHVlYCBhbmQgYCR2aWV3VmFsdWVgIGFyZSBhY3R1YWxseSBkaWZmZXJlbnQgdG8gdGhlaXIgcHJldmlvdXMgdmFsdWUuIElmIGAkbW9kZWxWYWx1ZWBcclxuICAgKiBvciBgJHZpZXdWYWx1ZWAgYXJlIG9iamVjdHMgKHJhdGhlciB0aGFuIGEgc3RyaW5nIG9yIG51bWJlcikgdGhlbiBgJHJlbmRlcigpYCB3aWxsIG5vdCBiZVxyXG4gICAqIGludm9rZWQgaWYgeW91IG9ubHkgY2hhbmdlIGEgcHJvcGVydHkgb24gdGhlIG9iamVjdHMuXHJcbiAgICovXHJcbiAgdGhpcy4kcmVuZGVyID0gbm9vcDtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGlzRW1wdHlcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gd2UgbmVlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHZhbHVlIG9mIHRoZSBpbnB1dCBpcyBlbXB0eS5cclxuICAgKlxyXG4gICAqIEZvciBpbnN0YW5jZSwgdGhlIHJlcXVpcmVkIGRpcmVjdGl2ZSBkb2VzIHRoaXMgdG8gd29yayBvdXQgaWYgdGhlIGlucHV0IGhhcyBkYXRhIG9yIG5vdC5cclxuICAgKiBUaGUgZGVmYXVsdCBgJGlzRW1wdHlgIGZ1bmN0aW9uIGNoZWNrcyB3aGV0aGVyIHRoZSB2YWx1ZSBpcyBgdW5kZWZpbmVkYCwgYCcnYCwgYG51bGxgIG9yIGBOYU5gLlxyXG4gICAqXHJcbiAgICogWW91IGNhbiBvdmVycmlkZSB0aGlzIGZvciBpbnB1dCBkaXJlY3RpdmVzIHdob3NlIGNvbmNlcHQgb2YgYmVpbmcgZW1wdHkgaXMgZGlmZmVyZW50IHRvIHRoZVxyXG4gICAqIGRlZmF1bHQuIFRoZSBgY2hlY2tib3hJbnB1dFR5cGVgIGRpcmVjdGl2ZSBkb2VzIHRoaXMgYmVjYXVzZSBpbiBpdHMgY2FzZSBhIHZhbHVlIG9mIGBmYWxzZWBcclxuICAgKiBpbXBsaWVzIGVtcHR5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBNb2RlbCB2YWx1ZSB0byBjaGVjay5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGVtcHR5LlxyXG4gICAqL1xyXG4gIHRoaXMuJGlzRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgIT09IHZhbHVlO1xyXG4gIH07XHJcblxyXG4gIHZhciBwYXJlbnRGb3JtID0gJGVsZW1lbnQuaW5oZXJpdGVkRGF0YSgnJGZvcm1Db250cm9sbGVyJykgfHwgbnVsbEZvcm1DdHJsLFxyXG4gICAgICBjdXJyZW50VmFsaWRhdGlvblJ1bklkID0gMDtcclxuXHJcbiAgLy8gU2V0dXAgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgY29udHJvbFxyXG4gICRlbGVtZW50XHJcbiAgICAuYWRkQ2xhc3MoUFJJU1RJTkVfQ0xBU1MpXHJcbiAgICAuYWRkQ2xhc3MoVU5UT1VDSEVEX0NMQVNTKTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZhbGlkaXR5XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDaGFuZ2UgdGhlIHZhbGlkaXR5IHN0YXRlLCBhbmQgbm90aWZpZXMgdGhlIGZvcm0uXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHdpdGhpbiAkcGFyc2Vycy8kZm9ybWF0dGVycy4gSG93ZXZlciwgaWYgcG9zc2libGUsIHBsZWFzZSB1c2UgdGhlXHJcbiAgICogICAgICAgIGBuZ01vZGVsLiR2YWxpZGF0b3JzYCBwaXBlbGluZSB3aGljaCBpcyBkZXNpZ25lZCB0byBjYWxsIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsaWRhdGlvbkVycm9yS2V5IE5hbWUgb2YgdGhlIHZhbGlkYXRvci4gdGhlIGB2YWxpZGF0aW9uRXJyb3JLZXlgIHdpbGwgYXNzaWduXHJcbiAgICogICAgICAgIHRvIGAkZXJyb3JbdmFsaWRhdGlvbkVycm9yS2V5XWAgYW5kIGAkcGVuZGluZ1t2YWxpZGF0aW9uRXJyb3JLZXldYFxyXG4gICAqICAgICAgICBzbyB0aGF0IGl0IGlzIGF2YWlsYWJsZSBmb3IgZGF0YS1iaW5kaW5nLlxyXG4gICAqICAgICAgICBUaGUgYHZhbGlkYXRpb25FcnJvcktleWAgc2hvdWxkIGJlIGluIGNhbWVsQ2FzZSBhbmQgd2lsbCBnZXQgY29udmVydGVkIGludG8gZGFzaC1jYXNlXHJcbiAgICogICAgICAgIGZvciBjbGFzcyBuYW1lLiBFeGFtcGxlOiBgbXlFcnJvcmAgd2lsbCByZXN1bHQgaW4gYG5nLXZhbGlkLW15LWVycm9yYCBhbmQgYG5nLWludmFsaWQtbXktZXJyb3JgXHJcbiAgICogICAgICAgIGNsYXNzIGFuZCBjYW4gYmUgYm91bmQgdG8gYXMgIGB7e3NvbWVGb3JtLnNvbWVDb250cm9sLiRlcnJvci5teUVycm9yfX1gIC5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmFsaWQgV2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBpcyB2YWxpZCAodHJ1ZSksIGludmFsaWQgKGZhbHNlKSwgcGVuZGluZyAodW5kZWZpbmVkKSxcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgb3Igc2tpcHBlZCAobnVsbCkuXHJcbiAgICovXHJcbiAgYWRkU2V0VmFsaWRpdHlNZXRob2Qoe1xyXG4gICAgY3RybDogdGhpcyxcclxuICAgICRlbGVtZW50OiAkZWxlbWVudCxcclxuICAgIHNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xyXG4gICAgICBvYmplY3RbcHJvcGVydHldID0gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICB1bnNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xyXG4gICAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcclxuICAgIH0sXHJcbiAgICBwYXJlbnRGb3JtOiBwYXJlbnRGb3JtLFxyXG4gICAgJGFuaW1hdGU6ICRhbmltYXRlXHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRQcmlzdGluZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgcHJpc3RpbmUgc3RhdGUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgJ25nLWRpcnR5JyBjbGFzcyBhbmQgc2V0IHRoZSBjb250cm9sIHRvIGl0cyBwcmlzdGluZVxyXG4gICAqIHN0YXRlIChuZy1wcmlzdGluZSBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSBwcmlzdGluZSB3aGVuIHRoZSBtb2RlbCBoYXMgbm90IGJlZW4gY2hhbmdlZFxyXG4gICAqIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZCB3aXRoaW4gdGhlbiBmb3JtLlxyXG4gICAqL1xyXG4gIHRoaXMuJHNldFByaXN0aW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY3RybC4kZGlydHkgPSBmYWxzZTtcclxuICAgIGN0cmwuJHByaXN0aW5lID0gdHJ1ZTtcclxuICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKCRlbGVtZW50LCBESVJUWV9DTEFTUyk7XHJcbiAgICAkYW5pbWF0ZS5hZGRDbGFzcygkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRVbnRvdWNoZWRcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldHMgdGhlIGNvbnRyb2wgdG8gaXRzIHVudG91Y2hlZCBzdGF0ZS5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSAnbmctdG91Y2hlZCcgY2xhc3MgYW5kIHNldCB0aGUgY29udHJvbCB0byBpdHNcclxuICAgKiB1bnRvdWNoZWQgc3RhdGUgKG5nLXVudG91Y2hlZCBjbGFzcykuIFVwb24gY29tcGlsYXRpb24sIGEgbW9kZWwgaXMgc2V0IGFzIHVudG91Y2hlZFxyXG4gICAqIGJ5IGRlZmF1bHQsIGhvd2V2ZXIgdGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byByZXN0b3JlIHRoYXQgc3RhdGUgaWYgdGhlIG1vZGVsIGhhc1xyXG4gICAqIGFscmVhZHkgYmVlbiB0b3VjaGVkIGJ5IHRoZSB1c2VyLlxyXG4gICAqL1xyXG4gIHRoaXMuJHNldFVudG91Y2hlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY3RybC4kdG91Y2hlZCA9IGZhbHNlO1xyXG4gICAgY3RybC4kdW50b3VjaGVkID0gdHJ1ZTtcclxuICAgICRhbmltYXRlLnNldENsYXNzKCRlbGVtZW50LCBVTlRPVUNIRURfQ0xBU1MsIFRPVUNIRURfQ0xBU1MpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRUb3VjaGVkXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyB0b3VjaGVkIHN0YXRlLlxyXG4gICAqXHJcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlICduZy11bnRvdWNoZWQnIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXHJcbiAgICogdG91Y2hlZCBzdGF0ZSAobmctdG91Y2hlZCBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSB0b3VjaGVkIHdoZW4gdGhlIHVzZXIgaGFzXHJcbiAgICogZmlyc3QgaW50ZXJhY3RlZCAoZm9jdXNzZWQpIG9uIHRoZSBtb2RlbCBpbnB1dCBlbGVtZW50IGFuZCB0aGVuIHNoaWZ0ZWQgZm9jdXMgYXdheSAoYmx1cnJlZClcclxuICAgKiBmcm9tIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHRoaXMuJHNldFRvdWNoZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGN0cmwuJHRvdWNoZWQgPSB0cnVlO1xyXG4gICAgY3RybC4kdW50b3VjaGVkID0gZmFsc2U7XHJcbiAgICAkYW5pbWF0ZS5zZXRDbGFzcygkZWxlbWVudCwgVE9VQ0hFRF9DTEFTUywgVU5UT1VDSEVEX0NMQVNTKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbmNlbCBhbiB1cGRhdGUgYW5kIHJlc2V0IHRoZSBpbnB1dCBlbGVtZW50J3MgdmFsdWUgdG8gcHJldmVudCBhbiB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAsXHJcbiAgICogd2hpY2ggbWF5IGJlIGNhdXNlZCBieSBhIHBlbmRpbmcgZGVib3VuY2VkIGV2ZW50IG9yIGJlY2F1c2UgdGhlIGlucHV0IGlzIHdhaXRpbmcgZm9yIGEgc29tZVxyXG4gICAqIGZ1dHVyZSBldmVudC5cclxuICAgKlxyXG4gICAqIElmIHlvdSBoYXZlIGFuIGlucHV0IHRoYXQgdXNlcyBgbmctbW9kZWwtb3B0aW9uc2AgdG8gc2V0IHVwIGRlYm91bmNlZCBldmVudHMgb3IgZXZlbnRzIHN1Y2hcclxuICAgKiBhcyBibHVyIHlvdSBjYW4gaGF2ZSBhIHNpdHVhdGlvbiB3aGVyZSB0aGVyZSBpcyBhIHBlcmlvZCB3aGVuIHRoZSBgJHZpZXdWYWx1ZWBcclxuICAgKiBpcyBvdXQgb2Ygc3luY2ggd2l0aCB0aGUgbmdNb2RlbCdzIGAkbW9kZWxWYWx1ZWAuXHJcbiAgICpcclxuICAgKiBJbiB0aGlzIGNhc2UsIHlvdSBjYW4gcnVuIGludG8gZGlmZmljdWx0aWVzIGlmIHlvdSB0cnkgdG8gdXBkYXRlIHRoZSBuZ01vZGVsJ3MgYCRtb2RlbFZhbHVlYFxyXG4gICAqIHByb2dyYW1tYXRpY2FsbHkgYmVmb3JlIHRoZXNlIGRlYm91bmNlZC9mdXR1cmUgZXZlbnRzIGhhdmUgcmVzb2x2ZWQvb2NjdXJyZWQsIGJlY2F1c2UgQW5ndWxhcidzXHJcbiAgICogZGlydHkgY2hlY2tpbmcgbWVjaGFuaXNtIGlzIG5vdCBhYmxlIHRvIHRlbGwgd2hldGhlciB0aGUgbW9kZWwgaGFzIGFjdHVhbGx5IGNoYW5nZWQgb3Igbm90LlxyXG4gICAqXHJcbiAgICogVGhlIGAkcm9sbGJhY2tWaWV3VmFsdWUoKWAgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIHByb2dyYW1tYXRpY2FsbHkgY2hhbmdpbmcgdGhlIG1vZGVsIG9mIGFuXHJcbiAgICogaW5wdXQgd2hpY2ggbWF5IGhhdmUgc3VjaCBldmVudHMgcGVuZGluZy4gVGhpcyBpcyBpbXBvcnRhbnQgaW4gb3JkZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlXHJcbiAgICogaW5wdXQgZmllbGQgd2lsbCBiZSB1cGRhdGVkIHdpdGggdGhlIG5ldyBtb2RlbCB2YWx1ZSBhbmQgYW55IHBlbmRpbmcgb3BlcmF0aW9ucyBhcmUgY2FuY2VsbGVkLlxyXG4gICAqXHJcbiAgICogPGV4YW1wbGUgbmFtZT1cIm5nLW1vZGVsLWNhbmNlbC11cGRhdGVcIiBtb2R1bGU9XCJjYW5jZWwtdXBkYXRlLWV4YW1wbGVcIj5cclxuICAgKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cclxuICAgKiAgICAgYW5ndWxhci5tb2R1bGUoJ2NhbmNlbC11cGRhdGUtZXhhbXBsZScsIFtdKVxyXG4gICAqXHJcbiAgICogICAgIC5jb250cm9sbGVyKCdDYW5jZWxVcGRhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgKiAgICAgICAkc2NvcGUucmVzZXRXaXRoQ2FuY2VsID0gZnVuY3Rpb24gKGUpIHtcclxuICAgKiAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHtcclxuICAgKiAgICAgICAgICAgJHNjb3BlLm15Rm9ybS5teUlucHV0MS4kcm9sbGJhY2tWaWV3VmFsdWUoKTtcclxuICAgKiAgICAgICAgICAgJHNjb3BlLm15VmFsdWUgPSAnJztcclxuICAgKiAgICAgICAgIH1cclxuICAgKiAgICAgICB9O1xyXG4gICAqICAgICAgICRzY29wZS5yZXNldFdpdGhvdXRDYW5jZWwgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAqICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNykge1xyXG4gICAqICAgICAgICAgICAkc2NvcGUubXlWYWx1ZSA9ICcnO1xyXG4gICAqICAgICAgICAgfVxyXG4gICAqICAgICAgIH07XHJcbiAgICogICAgIH1dKTtcclxuICAgKiAgIDwvZmlsZT5cclxuICAgKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkNhbmNlbFVwZGF0ZUNvbnRyb2xsZXJcIj5cclxuICAgKiAgICAgICA8cD5UcnkgdHlwaW5nIHNvbWV0aGluZyBpbiBlYWNoIGlucHV0LiAgU2VlIHRoYXQgdGhlIG1vZGVsIG9ubHkgdXBkYXRlcyB3aGVuIHlvdVxyXG4gICAqICAgICAgICAgIGJsdXIgb2ZmIHRoZSBpbnB1dC5cclxuICAgKiAgICAgICAgPC9wPlxyXG4gICAqICAgICAgICA8cD5Ob3cgc2VlIHdoYXQgaGFwcGVucyBpZiB5b3Ugc3RhcnQgdHlwaW5nIHRoZW4gcHJlc3MgdGhlIEVzY2FwZSBrZXk8L3A+XHJcbiAgICpcclxuICAgKiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJyB9XCI+XHJcbiAgICogICAgICAgICA8cD5XaXRoICRyb2xsYmFja1ZpZXdWYWx1ZSgpPC9wPlxyXG4gICAqICAgICAgICAgPGlucHV0IG5hbWU9XCJteUlucHV0MVwiIG5nLW1vZGVsPVwibXlWYWx1ZVwiIG5nLWtleWRvd249XCJyZXNldFdpdGhDYW5jZWwoJGV2ZW50KVwiPjxici8+XHJcbiAgICogICAgICAgICBteVZhbHVlOiBcInt7IG15VmFsdWUgfX1cIlxyXG4gICAqXHJcbiAgICogICAgICAgICA8cD5XaXRob3V0ICRyb2xsYmFja1ZpZXdWYWx1ZSgpPC9wPlxyXG4gICAqICAgICAgICAgPGlucHV0IG5hbWU9XCJteUlucHV0MlwiIG5nLW1vZGVsPVwibXlWYWx1ZVwiIG5nLWtleWRvd249XCJyZXNldFdpdGhvdXRDYW5jZWwoJGV2ZW50KVwiPjxici8+XHJcbiAgICogICAgICAgICBteVZhbHVlOiBcInt7IG15VmFsdWUgfX1cIlxyXG4gICAqICAgICAgIDwvZm9ybT5cclxuICAgKiAgICAgPC9kaXY+XHJcbiAgICogICA8L2ZpbGU+XHJcbiAgICogPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gIHRoaXMuJHJvbGxiYWNrVmlld1ZhbHVlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkdGltZW91dC5jYW5jZWwocGVuZGluZ0RlYm91bmNlKTtcclxuICAgIGN0cmwuJHZpZXdWYWx1ZSA9IGN0cmwuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlO1xyXG4gICAgY3RybC4kcmVuZGVyKCk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRlXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSdW5zIGVhY2ggb2YgdGhlIHJlZ2lzdGVyZWQgdmFsaWRhdG9ycyAoZmlyc3Qgc3luY2hyb25vdXMgdmFsaWRhdG9ycyBhbmQgdGhlbiBhc3luY2hyb25vdXMgdmFsaWRhdG9ycykuXHJcbiAgICovXHJcbiAgdGhpcy4kdmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIGlnbm9yZSAkdmFsaWRhdGUgYmVmb3JlIG1vZGVsIGlzIGluaXRpYWxpemVkXHJcbiAgICBpZiAoaXNOdW1iZXIoY3RybC4kbW9kZWxWYWx1ZSkgJiYgaXNOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUoKTtcclxuICB9O1xyXG5cclxuICB0aGlzLiQkcnVuVmFsaWRhdG9ycyA9IGZ1bmN0aW9uKHBhcnNlVmFsaWQsIG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgZG9uZUNhbGxiYWNrKSB7XHJcbiAgICBjdXJyZW50VmFsaWRhdGlvblJ1bklkKys7XHJcbiAgICB2YXIgbG9jYWxWYWxpZGF0aW9uUnVuSWQgPSBjdXJyZW50VmFsaWRhdGlvblJ1bklkO1xyXG5cclxuICAgIC8vIGNoZWNrIHBhcnNlciBlcnJvclxyXG4gICAgaWYgKCFwcm9jZXNzUGFyc2VFcnJvcnMocGFyc2VWYWxpZCkpIHtcclxuICAgICAgdmFsaWRhdGlvbkRvbmUoZmFsc2UpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIXByb2Nlc3NTeW5jVmFsaWRhdG9ycygpKSB7XHJcbiAgICAgIHZhbGlkYXRpb25Eb25lKGZhbHNlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcHJvY2Vzc0FzeW5jVmFsaWRhdG9ycygpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXJzZUVycm9ycyhwYXJzZVZhbGlkKSB7XHJcbiAgICAgIHZhciBlcnJvcktleSA9IGN0cmwuJCRwYXJzZXJOYW1lIHx8ICdwYXJzZSc7XHJcbiAgICAgIGlmIChwYXJzZVZhbGlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBzZXRWYWxpZGl0eShlcnJvcktleSwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0VmFsaWRpdHkoZXJyb3JLZXksIHBhcnNlVmFsaWQpO1xyXG4gICAgICAgIGlmICghcGFyc2VWYWxpZCkge1xyXG4gICAgICAgICAgZm9yRWFjaChjdHJsLiR2YWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIG51bGwpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBmb3JFYWNoKGN0cmwuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odiwgbmFtZSkge1xyXG4gICAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcm9jZXNzU3luY1ZhbGlkYXRvcnMoKSB7XHJcbiAgICAgIHZhciBzeW5jVmFsaWRhdG9yc1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgZm9yRWFjaChjdHJsLiR2YWxpZGF0b3JzLCBmdW5jdGlvbih2YWxpZGF0b3IsIG5hbWUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gdmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgc3luY1ZhbGlkYXRvcnNWYWxpZCA9IHN5bmNWYWxpZGF0b3JzVmFsaWQgJiYgcmVzdWx0O1xyXG4gICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIHJlc3VsdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoIXN5bmNWYWxpZGF0b3JzVmFsaWQpIHtcclxuICAgICAgICBmb3JFYWNoKGN0cmwuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odiwgbmFtZSkge1xyXG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgbnVsbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHByb2Nlc3NBc3luY1ZhbGlkYXRvcnMoKSB7XHJcbiAgICAgIHZhciB2YWxpZGF0b3JQcm9taXNlcyA9IFtdO1xyXG4gICAgICB2YXIgYWxsVmFsaWQgPSB0cnVlO1xyXG4gICAgICBmb3JFYWNoKGN0cmwuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odmFsaWRhdG9yLCBuYW1lKSB7XHJcbiAgICAgICAgdmFyIHByb21pc2UgPSB2YWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKTtcclxuICAgICAgICBpZiAoIWlzUHJvbWlzZUxpa2UocHJvbWlzZSkpIHtcclxuICAgICAgICAgIHRocm93ICRuZ01vZGVsTWluRXJyKFwiJGFzeW5jVmFsaWRhdG9yc1wiLFxyXG4gICAgICAgICAgICBcIkV4cGVjdGVkIGFzeW5jaHJvbm91cyB2YWxpZGF0b3IgdG8gcmV0dXJuIGEgcHJvbWlzZSBidXQgZ290ICd7MH0nIGluc3RlYWQuXCIsIHByb21pc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIHZhbGlkYXRvclByb21pc2VzLnB1c2gocHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICAgIGFsbFZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKCF2YWxpZGF0b3JQcm9taXNlcy5sZW5ndGgpIHtcclxuICAgICAgICB2YWxpZGF0aW9uRG9uZSh0cnVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkcS5hbGwodmFsaWRhdG9yUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YWxpZGF0aW9uRG9uZShhbGxWYWxpZCk7XHJcbiAgICAgICAgfSwgbm9vcCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRWYWxpZGl0eShuYW1lLCBpc1ZhbGlkKSB7XHJcbiAgICAgIGlmIChsb2NhbFZhbGlkYXRpb25SdW5JZCA9PT0gY3VycmVudFZhbGlkYXRpb25SdW5JZCkge1xyXG4gICAgICAgIGN0cmwuJHNldFZhbGlkaXR5KG5hbWUsIGlzVmFsaWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsaWRhdGlvbkRvbmUoYWxsVmFsaWQpIHtcclxuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSBjdXJyZW50VmFsaWRhdGlvblJ1bklkKSB7XHJcblxyXG4gICAgICAgIGRvbmVDYWxsYmFjayhhbGxWYWxpZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkY29tbWl0Vmlld1ZhbHVlXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDb21taXQgYSBwZW5kaW5nIHVwZGF0ZSB0byB0aGUgYCRtb2RlbFZhbHVlYC5cclxuICAgKlxyXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxyXG4gICAqIGV2ZW50IGRlZmluZWQgaW4gYG5nLW1vZGVsLW9wdGlvbnNgLiB0aGlzIG1ldGhvZCBpcyByYXJlbHkgbmVlZGVkIGFzIGBOZ01vZGVsQ29udHJvbGxlcmBcclxuICAgKiB1c3VhbGx5IGhhbmRsZXMgY2FsbGluZyB0aGlzIGluIHJlc3BvbnNlIHRvIGlucHV0IGV2ZW50cy5cclxuICAgKi9cclxuICB0aGlzLiRjb21taXRWaWV3VmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB2aWV3VmFsdWUgPSBjdHJsLiR2aWV3VmFsdWU7XHJcblxyXG4gICAgJHRpbWVvdXQuY2FuY2VsKHBlbmRpbmdEZWJvdW5jZSk7XHJcblxyXG4gICAgLy8gSWYgdGhlIHZpZXcgdmFsdWUgaGFzIG5vdCBjaGFuZ2VkIHRoZW4gd2Ugc2hvdWxkIGp1c3QgZXhpdCwgZXhjZXB0IGluIHRoZSBjYXNlIHdoZXJlIHRoZXJlIGlzXHJcbiAgICAvLyBhIG5hdGl2ZSB2YWxpZGF0b3Igb24gdGhlIGVsZW1lbnQuIEluIHRoaXMgY2FzZSB0aGUgdmFsaWRhdGlvbiBzdGF0ZSBtYXkgaGF2ZSBjaGFuZ2VkIGV2ZW4gdGhvdWdoXHJcbiAgICAvLyB0aGUgdmlld1ZhbHVlIGhhcyBzdGF5ZWQgZW1wdHkuXHJcbiAgICBpZiAoY3RybC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPT09IHZpZXdWYWx1ZSAmJiAodmlld1ZhbHVlICE9PSAnJyB8fCAhY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGN0cmwuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID0gdmlld1ZhbHVlO1xyXG5cclxuICAgIC8vIGNoYW5nZSB0byBkaXJ0eVxyXG4gICAgaWYgKGN0cmwuJHByaXN0aW5lKSB7XHJcbiAgICAgIGN0cmwuJGRpcnR5ID0gdHJ1ZTtcclxuICAgICAgY3RybC4kcHJpc3RpbmUgPSBmYWxzZTtcclxuICAgICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3MoJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcclxuICAgICAgJGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcclxuICAgICAgcGFyZW50Rm9ybS4kc2V0RGlydHkoKTtcclxuICAgIH1cclxuICAgIHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlKCk7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBwYXJzZXJWYWxpZCA9IHRydWUsXHJcbiAgICAgICAgdmlld1ZhbHVlID0gY3RybC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUsXHJcbiAgICAgICAgbW9kZWxWYWx1ZSA9IHZpZXdWYWx1ZTtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjdHJsLiRwYXJzZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIG1vZGVsVmFsdWUgPSBjdHJsLiRwYXJzZXJzW2ldKG1vZGVsVmFsdWUpO1xyXG4gICAgICBpZiAoaXNVbmRlZmluZWQobW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICBwYXJzZXJWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaXNOdW1iZXIoY3RybC4kbW9kZWxWYWx1ZSkgJiYgaXNOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcclxuICAgICAgLy8gY3RybC4kbW9kZWxWYWx1ZSBoYXMgbm90IGJlZW4gdG91Y2hlZCB5ZXQuLi5cclxuICAgICAgY3RybC4kbW9kZWxWYWx1ZSA9IG5nTW9kZWxHZXQoKTtcclxuICAgIH1cclxuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IGN0cmwuJG1vZGVsVmFsdWU7XHJcbiAgICB2YXIgYWxsb3dJbnZhbGlkID0gY3RybC4kb3B0aW9ucyAmJiBjdHJsLiRvcHRpb25zLmFsbG93SW52YWxpZDtcclxuICAgIGlmIChhbGxvd0ludmFsaWQpIHtcclxuICAgICAgY3RybC4kbW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XHJcbiAgICAgIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCk7XHJcbiAgICB9XHJcbiAgICBjdHJsLiQkcnVuVmFsaWRhdG9ycyhwYXJzZXJWYWxpZCwgbW9kZWxWYWx1ZSwgdmlld1ZhbHVlLCBmdW5jdGlvbihhbGxWYWxpZCkge1xyXG4gICAgICBpZiAoIWFsbG93SW52YWxpZCkge1xyXG4gICAgICAgIC8vIE5vdGU6IERvbid0IGNoZWNrIGN0cmwuJHZhbGlkIGhlcmUsIGFzIHdlIGNvdWxkIGhhdmVcclxuICAgICAgICAvLyBleHRlcm5hbCB2YWxpZGF0b3JzIChlLmcuIGNhbGN1bGF0ZWQgb24gdGhlIHNlcnZlciksXHJcbiAgICAgICAgLy8gdGhhdCBqdXN0IGNhbGwgJHNldFZhbGlkaXR5IGFuZCBuZWVkIHRoZSBtb2RlbCB2YWx1ZVxyXG4gICAgICAgIC8vIHRvIGNhbGN1bGF0ZSB0aGVpciB2YWxpZGl0eS5cclxuICAgICAgICBjdHJsLiRtb2RlbFZhbHVlID0gYWxsVmFsaWQgPyBtb2RlbFZhbHVlIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCkge1xyXG4gICAgICBpZiAoY3RybC4kbW9kZWxWYWx1ZSAhPT0gcHJldk1vZGVsVmFsdWUpIHtcclxuICAgICAgICBjdHJsLiQkd3JpdGVNb2RlbFRvU2NvcGUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHRoaXMuJCR3cml0ZU1vZGVsVG9TY29wZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbmdNb2RlbFNldChjdHJsLiRtb2RlbFZhbHVlKTtcclxuICAgIGZvckVhY2goY3RybC4kdmlld0NoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBsaXN0ZW5lcigpO1xyXG4gICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZpZXdWYWx1ZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVXBkYXRlIHRoZSB2aWV3IHZhbHVlLlxyXG4gICAqXHJcbiAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFuIGlucHV0IGRpcmVjdGl2ZSB3YW50IHRvIGNoYW5nZSB0aGUgdmlldyB2YWx1ZTsgdHlwaWNhbGx5LFxyXG4gICAqIHRoaXMgaXMgZG9uZSBmcm9tIHdpdGhpbiBhIERPTSBldmVudCBoYW5kbGVyLlxyXG4gICAqXHJcbiAgICogRm9yIGV4YW1wbGUge0BsaW5rIG5nLmRpcmVjdGl2ZTppbnB1dCBpbnB1dH0gY2FsbHMgaXQgd2hlbiB0aGUgdmFsdWUgb2YgdGhlIGlucHV0IGNoYW5nZXMgYW5kXHJcbiAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpzZWxlY3Qgc2VsZWN0fSBjYWxscyBpdCB3aGVuIGFuIG9wdGlvbiBpcyBzZWxlY3RlZC5cclxuICAgKlxyXG4gICAqIElmIHRoZSBuZXcgYHZhbHVlYCBpcyBhbiBvYmplY3QgKHJhdGhlciB0aGFuIGEgc3RyaW5nIG9yIGEgbnVtYmVyKSwgd2Ugc2hvdWxkIG1ha2UgYSBjb3B5IG9mIHRoZVxyXG4gICAqIG9iamVjdCBiZWZvcmUgcGFzc2luZyBpdCB0byBgJHNldFZpZXdWYWx1ZWAuICBUaGlzIGlzIGJlY2F1c2UgYG5nTW9kZWxgIGRvZXMgbm90IHBlcmZvcm0gYSBkZWVwXHJcbiAgICogd2F0Y2ggb2Ygb2JqZWN0cywgaXQgb25seSBsb29rcyBmb3IgYSBjaGFuZ2Ugb2YgaWRlbnRpdHkuIElmIHlvdSBvbmx5IGNoYW5nZSB0aGUgcHJvcGVydHkgb2ZcclxuICAgKiB0aGUgb2JqZWN0IHRoZW4gbmdNb2RlbCB3aWxsIG5vdCByZWFsaXNlIHRoYXQgdGhlIG9iamVjdCBoYXMgY2hhbmdlZCBhbmQgd2lsbCBub3QgaW52b2tlIHRoZVxyXG4gICAqIGAkcGFyc2Vyc2AgYW5kIGAkdmFsaWRhdG9yc2AgcGlwZWxpbmVzLlxyXG4gICAqXHJcbiAgICogRm9yIHRoaXMgcmVhc29uLCB5b3Ugc2hvdWxkIG5vdCBjaGFuZ2UgcHJvcGVydGllcyBvZiB0aGUgY29weSBvbmNlIGl0IGhhcyBiZWVuIHBhc3NlZCB0b1xyXG4gICAqIGAkc2V0Vmlld1ZhbHVlYC4gT3RoZXJ3aXNlIHlvdSBtYXkgY2F1c2UgdGhlIG1vZGVsIHZhbHVlIG9uIHRoZSBzY29wZSB0byBjaGFuZ2UgaW5jb3JyZWN0bHkuXHJcbiAgICpcclxuICAgKiBXaGVuIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCwgdGhlIG5ldyBgdmFsdWVgIHdpbGwgYmUgc3RhZ2VkIGZvciBjb21taXR0aW5nIHRocm91Z2ggdGhlIGAkcGFyc2Vyc2BcclxuICAgKiBhbmQgYCR2YWxpZGF0b3JzYCBwaXBlbGluZXMuIElmIHRoZXJlIGFyZSBubyBzcGVjaWFsIHtAbGluayBuZ01vZGVsT3B0aW9uc30gc3BlY2lmaWVkIHRoZW4gdGhlIHN0YWdlZFxyXG4gICAqIHZhbHVlIHNlbnQgZGlyZWN0bHkgZm9yIHByb2Nlc3NpbmcsIGZpbmFsbHkgdG8gYmUgYXBwbGllZCB0byBgJG1vZGVsVmFsdWVgIGFuZCB0aGVuIHRoZVxyXG4gICAqICoqZXhwcmVzc2lvbioqIHNwZWNpZmllZCBpbiB0aGUgYG5nLW1vZGVsYCBhdHRyaWJ1dGUuXHJcbiAgICpcclxuICAgKiBMYXN0bHksIGFsbCB0aGUgcmVnaXN0ZXJlZCBjaGFuZ2UgbGlzdGVuZXJzLCBpbiB0aGUgYCR2aWV3Q2hhbmdlTGlzdGVuZXJzYCBsaXN0LCBhcmUgY2FsbGVkLlxyXG4gICAqXHJcbiAgICogSW4gY2FzZSB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30gZGlyZWN0aXZlIGlzIHVzZWQgd2l0aCBgdXBkYXRlT25gXHJcbiAgICogYW5kIHRoZSBgZGVmYXVsdGAgdHJpZ2dlciBpcyBub3QgbGlzdGVkLCBhbGwgdGhvc2UgYWN0aW9ucyB3aWxsIHJlbWFpbiBwZW5kaW5nIHVudGlsIG9uZSBvZiB0aGVcclxuICAgKiBgdXBkYXRlT25gIGV2ZW50cyBpcyB0cmlnZ2VyZWQgb24gdGhlIERPTSBlbGVtZW50LlxyXG4gICAqIEFsbCB0aGVzZSBhY3Rpb25zIHdpbGwgYmUgZGVib3VuY2VkIGlmIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfVxyXG4gICAqIGRpcmVjdGl2ZSBpcyB1c2VkIHdpdGggYSBjdXN0b20gZGVib3VuY2UgZm9yIHRoaXMgcGFydGljdWxhciBldmVudC5cclxuICAgKlxyXG4gICAqIE5vdGUgdGhhdCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gZG9lcyBub3QgdHJpZ2dlciBhIGAkZGlnZXN0YC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBWYWx1ZSBmcm9tIHRoZSB2aWV3LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmlnZ2VyIEV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoZSB1cGRhdGUuXHJcbiAgICovXHJcbiAgdGhpcy4kc2V0Vmlld1ZhbHVlID0gZnVuY3Rpb24odmFsdWUsIHRyaWdnZXIpIHtcclxuICAgIGN0cmwuJHZpZXdWYWx1ZSA9IHZhbHVlO1xyXG4gICAgaWYgKCFjdHJsLiRvcHRpb25zIHx8IGN0cmwuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0KSB7XHJcbiAgICAgIGN0cmwuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCh0cmlnZ2VyKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB0aGlzLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQgPSBmdW5jdGlvbih0cmlnZ2VyKSB7XHJcbiAgICB2YXIgZGVib3VuY2VEZWxheSA9IDAsXHJcbiAgICAgICAgb3B0aW9ucyA9IGN0cmwuJG9wdGlvbnMsXHJcbiAgICAgICAgZGVib3VuY2U7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMgJiYgaXNEZWZpbmVkKG9wdGlvbnMuZGVib3VuY2UpKSB7XHJcbiAgICAgIGRlYm91bmNlID0gb3B0aW9ucy5kZWJvdW5jZTtcclxuICAgICAgaWYgKGlzTnVtYmVyKGRlYm91bmNlKSkge1xyXG4gICAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZTtcclxuICAgICAgfSBlbHNlIGlmIChpc051bWJlcihkZWJvdW5jZVt0cmlnZ2VyXSkpIHtcclxuICAgICAgICBkZWJvdW5jZURlbGF5ID0gZGVib3VuY2VbdHJpZ2dlcl07XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoZGVib3VuY2VbJ2RlZmF1bHQnXSkpIHtcclxuICAgICAgICBkZWJvdW5jZURlbGF5ID0gZGVib3VuY2VbJ2RlZmF1bHQnXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICR0aW1lb3V0LmNhbmNlbChwZW5kaW5nRGVib3VuY2UpO1xyXG4gICAgaWYgKGRlYm91bmNlRGVsYXkpIHtcclxuICAgICAgcGVuZGluZ0RlYm91bmNlID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY3RybC4kY29tbWl0Vmlld1ZhbHVlKCk7XHJcbiAgICAgIH0sIGRlYm91bmNlRGVsYXkpO1xyXG4gICAgfSBlbHNlIGlmICgkcm9vdFNjb3BlLiQkcGhhc2UpIHtcclxuICAgICAgY3RybC4kY29tbWl0Vmlld1ZhbHVlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGN0cmwuJGNvbW1pdFZpZXdWYWx1ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBtb2RlbCAtPiB2YWx1ZVxyXG4gIC8vIE5vdGU6IHdlIGNhbm5vdCB1c2UgYSBub3JtYWwgc2NvcGUuJHdhdGNoIGFzIHdlIHdhbnQgdG8gZGV0ZWN0IHRoZSBmb2xsb3dpbmc6XHJcbiAgLy8gMS4gc2NvcGUgdmFsdWUgaXMgJ2EnXHJcbiAgLy8gMi4gdXNlciBlbnRlcnMgJ2InXHJcbiAgLy8gMy4gbmctY2hhbmdlIGtpY2tzIGluIGFuZCByZXZlcnRzIHNjb3BlIHZhbHVlIHRvICdhJ1xyXG4gIC8vICAgIC0+IHNjb3BlIHZhbHVlIGRpZCBub3QgY2hhbmdlIHNpbmNlIHRoZSBsYXN0IGRpZ2VzdCBhc1xyXG4gIC8vICAgICAgIG5nLWNoYW5nZSBleGVjdXRlcyBpbiBhcHBseSBwaGFzZVxyXG4gIC8vIDQuIHZpZXcgc2hvdWxkIGJlIGNoYW5nZWQgYmFjayB0byAnYSdcclxuICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG5nTW9kZWxXYXRjaCgpIHtcclxuICAgIHZhciBtb2RlbFZhbHVlID0gbmdNb2RlbEdldCgpO1xyXG5cclxuICAgIC8vIGlmIHNjb3BlIG1vZGVsIHZhbHVlIGFuZCBuZ01vZGVsIHZhbHVlIGFyZSBvdXQgb2Ygc3luY1xyXG4gICAgLy8gVE9ETyhwZXJmKTogd2h5IG5vdCBtb3ZlIHRoaXMgdG8gdGhlIGFjdGlvbiBmbj9cclxuICAgIGlmIChtb2RlbFZhbHVlICE9PSBjdHJsLiRtb2RlbFZhbHVlKSB7XHJcbiAgICAgIGN0cmwuJG1vZGVsVmFsdWUgPSBtb2RlbFZhbHVlO1xyXG5cclxuICAgICAgdmFyIGZvcm1hdHRlcnMgPSBjdHJsLiRmb3JtYXR0ZXJzLFxyXG4gICAgICAgICAgaWR4ID0gZm9ybWF0dGVycy5sZW5ndGg7XHJcblxyXG4gICAgICB2YXIgdmlld1ZhbHVlID0gbW9kZWxWYWx1ZTtcclxuICAgICAgd2hpbGUoaWR4LS0pIHtcclxuICAgICAgICB2aWV3VmFsdWUgPSBmb3JtYXR0ZXJzW2lkeF0odmlld1ZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY3RybC4kdmlld1ZhbHVlICE9PSB2aWV3VmFsdWUpIHtcclxuICAgICAgICBjdHJsLiR2aWV3VmFsdWUgPSBjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSA9IHZpZXdWYWx1ZTtcclxuICAgICAgICBjdHJsLiRyZW5kZXIoKTtcclxuXHJcbiAgICAgICAgY3RybC4kJHJ1blZhbGlkYXRvcnModW5kZWZpbmVkLCBtb2RlbFZhbHVlLCB2aWV3VmFsdWUsIG5vb3ApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1vZGVsVmFsdWU7XHJcbiAgfSk7XHJcbn1dO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW9kZWxcclxuICpcclxuICogQGVsZW1lbnQgaW5wdXRcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdNb2RlbGAgZGlyZWN0aXZlIGJpbmRzIGFuIGBpbnB1dGAsYHNlbGVjdGAsIGB0ZXh0YXJlYWAgKG9yIGN1c3RvbSBmb3JtIGNvbnRyb2wpIHRvIGFcclxuICogcHJvcGVydHkgb24gdGhlIHNjb3BlIHVzaW5nIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIE5nTW9kZWxDb250cm9sbGVyfSxcclxuICogd2hpY2ggaXMgY3JlYXRlZCBhbmQgZXhwb3NlZCBieSB0aGlzIGRpcmVjdGl2ZS5cclxuICpcclxuICogYG5nTW9kZWxgIGlzIHJlc3BvbnNpYmxlIGZvcjpcclxuICpcclxuICogLSBCaW5kaW5nIHRoZSB2aWV3IGludG8gdGhlIG1vZGVsLCB3aGljaCBvdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYGlucHV0YCwgYHRleHRhcmVhYCBvciBgc2VsZWN0YFxyXG4gKiAgIHJlcXVpcmUuXHJcbiAqIC0gUHJvdmlkaW5nIHZhbGlkYXRpb24gYmVoYXZpb3IgKGkuZS4gcmVxdWlyZWQsIG51bWJlciwgZW1haWwsIHVybCkuXHJcbiAqIC0gS2VlcGluZyB0aGUgc3RhdGUgb2YgdGhlIGNvbnRyb2wgKHZhbGlkL2ludmFsaWQsIGRpcnR5L3ByaXN0aW5lLCB0b3VjaGVkL3VudG91Y2hlZCwgdmFsaWRhdGlvbiBlcnJvcnMpLlxyXG4gKiAtIFNldHRpbmcgcmVsYXRlZCBjc3MgY2xhc3NlcyBvbiB0aGUgZWxlbWVudCAoYG5nLXZhbGlkYCwgYG5nLWludmFsaWRgLCBgbmctZGlydHlgLCBgbmctcHJpc3RpbmVgLCBgbmctdG91Y2hlZGAsIGBuZy11bnRvdWNoZWRgKSBpbmNsdWRpbmcgYW5pbWF0aW9ucy5cclxuICogLSBSZWdpc3RlcmluZyB0aGUgY29udHJvbCB3aXRoIGl0cyBwYXJlbnQge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGZvcm19LlxyXG4gKlxyXG4gKiBOb3RlOiBgbmdNb2RlbGAgd2lsbCB0cnkgdG8gYmluZCB0byB0aGUgcHJvcGVydHkgZ2l2ZW4gYnkgZXZhbHVhdGluZyB0aGUgZXhwcmVzc2lvbiBvbiB0aGVcclxuICogY3VycmVudCBzY29wZS4gSWYgdGhlIHByb3BlcnR5IGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBvbiB0aGlzIHNjb3BlLCBpdCB3aWxsIGJlIGNyZWF0ZWRcclxuICogaW1wbGljaXRseSBhbmQgYWRkZWQgdG8gdGhlIHNjb3BlLlxyXG4gKlxyXG4gKiBGb3IgYmVzdCBwcmFjdGljZXMgb24gdXNpbmcgYG5nTW9kZWxgLCBzZWU6XHJcbiAqXHJcbiAqICAtIFtodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3dpa2kvVW5kZXJzdGFuZGluZy1TY29wZXNdXHJcbiAqXHJcbiAqIEZvciBiYXNpYyBleGFtcGxlcywgaG93IHRvIHVzZSBgbmdNb2RlbGAsIHNlZTpcclxuICpcclxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTppbnB1dCBpbnB1dH1cclxuICogICAgLSB7QGxpbmsgaW5wdXRbdGV4dF0gdGV4dH1cclxuICogICAgLSB7QGxpbmsgaW5wdXRbY2hlY2tib3hdIGNoZWNrYm94fVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFtyYWRpb10gcmFkaW99XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W251bWJlcl0gbnVtYmVyfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFtlbWFpbF0gZW1haWx9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W3VybF0gdXJsfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFtkYXRlXSBkYXRlfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFtkYXRlVGltZUxvY2FsXSBkYXRlVGltZUxvY2FsfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFt0aW1lXSB0aW1lfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFttb250aF0gbW9udGh9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W3dlZWtdIHdlZWt9XHJcbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6c2VsZWN0IHNlbGVjdH1cclxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTp0ZXh0YXJlYSB0ZXh0YXJlYX1cclxuICpcclxuICogIyBDU1MgY2xhc3Nlc1xyXG4gKiBUaGUgZm9sbG93aW5nIENTUyBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZCBvbiB0aGUgYXNzb2NpYXRlZCBpbnB1dC9zZWxlY3QvdGV4dGFyZWEgZWxlbWVudFxyXG4gKiBkZXBlbmRpbmcgb24gdGhlIHZhbGlkaXR5IG9mIHRoZSBtb2RlbC5cclxuICpcclxuICogIC0gYG5nLXZhbGlkYCBpcyBzZXQgaWYgdGhlIG1vZGVsIGlzIHZhbGlkLlxyXG4gKiAgLSBgbmctaW52YWxpZGAgaXMgc2V0IGlmIHRoZSBtb2RlbCBpcyBpbnZhbGlkLlxyXG4gKiAgLSBgbmctcHJpc3RpbmVgIGlzIHNldCBpZiB0aGUgbW9kZWwgaXMgcHJpc3RpbmUuXHJcbiAqICAtIGBuZy1kaXJ0eWAgaXMgc2V0IGlmIHRoZSBtb2RlbCBpcyBkaXJ0eS5cclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQgbmdBbmltYXRlIGNhbiBkZXRlY3QgZWFjaCBvZiB0aGVzZSBjbGFzc2VzIHdoZW4gYWRkZWQgYW5kIHJlbW92ZWQuXHJcbiAqXHJcbiAqICMjIEFuaW1hdGlvbiBIb29rc1xyXG4gKlxyXG4gKiBBbmltYXRpb25zIHdpdGhpbiBtb2RlbHMgYXJlIHRyaWdnZXJlZCB3aGVuIGFueSBvZiB0aGUgYXNzb2NpYXRlZCBDU1MgY2xhc3NlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWRcclxuICogb24gdGhlIGlucHV0IGVsZW1lbnQgd2hpY2ggaXMgYXR0YWNoZWQgdG8gdGhlIG1vZGVsLiBUaGVzZSBjbGFzc2VzIGFyZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLFxyXG4gKiBgLm5nLWludmFsaWRgIGFuZCBgLm5nLXZhbGlkYCBhcyB3ZWxsIGFzIGFueSBvdGhlciB2YWxpZGF0aW9ucyB0aGF0IGFyZSBwZXJmb3JtZWQgb24gdGhlIG1vZGVsIGl0c2VsZi5cclxuICogVGhlIGFuaW1hdGlvbnMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdpdGhpbiBuZ01vZGVsIGFyZSBzaW1pbGFyIHRvIGhvdyB0aGV5IHdvcmsgaW4gbmdDbGFzcyBhbmRcclxuICogYW5pbWF0aW9ucyBjYW4gYmUgaG9va2VkIGludG8gdXNpbmcgQ1NTIHRyYW5zaXRpb25zLCBrZXlmcmFtZXMgYXMgd2VsbCBhcyBKUyBhbmltYXRpb25zLlxyXG4gKlxyXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgYSBzaW1wbGUgd2F5IHRvIHV0aWxpemUgQ1NTIHRyYW5zaXRpb25zIHRvIHN0eWxlIGFuIGlucHV0IGVsZW1lbnRcclxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcclxuICpcclxuICogPHByZT5cclxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXHJcbiAqIC8vYWR2YW5jZWQgYW5pbWF0aW9uc1xyXG4gKiAubXktaW5wdXQge1xyXG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xyXG4gKiAgIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gKiB9XHJcbiAqIC5teS1pbnB1dC5uZy1pbnZhbGlkIHtcclxuICogICBiYWNrZ3JvdW5kOiByZWQ7XHJcbiAqICAgY29sb3I6d2hpdGU7XHJcbiAqIH1cclxuICogPC9wcmU+XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIDxleGFtcGxlIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIGZpeEJhc2U9XCJ0cnVlXCIgbW9kdWxlPVwiaW5wdXRFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2lucHV0RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZhbCA9ICcxJztcclxuICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPHN0eWxlPlxyXG4gICAgICAgICAubXktaW5wdXQge1xyXG4gICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgLm15LWlucHV0Lm5nLWludmFsaWQge1xyXG4gICAgICAgICAgIGNvbG9yOndoaXRlO1xyXG4gICAgICAgICAgIGJhY2tncm91bmQ6IHJlZDtcclxuICAgICAgICAgfVxyXG4gICAgICAgPC9zdHlsZT5cclxuICAgICAgIFVwZGF0ZSBpbnB1dCB0byBzZWUgdHJhbnNpdGlvbnMgd2hlbiB2YWxpZC9pbnZhbGlkLlxyXG4gICAgICAgSW50ZWdlciBpcyBhIHZhbGlkIHZhbHVlLlxyXG4gICAgICAgPGZvcm0gbmFtZT1cInRlc3RGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInZhbFwiIG5nLXBhdHRlcm49XCIvXlxcZCskL1wiIG5hbWU9XCJhbmltXCIgY2xhc3M9XCJteS1pbnB1dFwiIC8+XHJcbiAgICAgICA8L2Zvcm0+XHJcbiAgICAgPC9maWxlPlxyXG4gKiA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqICMjIEJpbmRpbmcgdG8gYSBnZXR0ZXIvc2V0dGVyXHJcbiAqXHJcbiAqIFNvbWV0aW1lcyBpdCdzIGhlbHBmdWwgdG8gYmluZCBgbmdNb2RlbGAgdG8gYSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9uLiAgQSBnZXR0ZXIvc2V0dGVyIGlzIGFcclxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1vZGVsIHdoZW4gY2FsbGVkIHdpdGggemVybyBhcmd1bWVudHMsIGFuZCBzZXRzXHJcbiAqIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIG1vZGVsIHdoZW4gY2FsbGVkIHdpdGggYW4gYXJndW1lbnQuIEl0J3Mgc29tZXRpbWVzIHVzZWZ1bCB0byB1c2UgdGhpc1xyXG4gKiBmb3IgbW9kZWxzIHRoYXQgaGF2ZSBhbiBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiB0aGF0J3MgZGlmZmVyZW50IHRoYW4gd2hhdCB0aGUgbW9kZWwgZXhwb3Nlc1xyXG4gKiB0byB0aGUgdmlldy5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cclxuICogKipCZXN0IFByYWN0aWNlOioqIEl0J3MgYmVzdCB0byBrZWVwIGdldHRlcnMgZmFzdCBiZWNhdXNlIEFuZ3VsYXIgaXMgbGlrZWx5IHRvIGNhbGwgdGhlbSBtb3JlXHJcbiAqIGZyZXF1ZW50bHkgdGhhbiBvdGhlciBwYXJ0cyBvZiB5b3VyIGNvZGUuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBZb3UgdXNlIHRoaXMgYmVoYXZpb3IgYnkgYWRkaW5nIGBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiYCB0byBhbiBlbGVtZW50IHRoYXRcclxuICogaGFzIGBuZy1tb2RlbGAgYXR0YWNoZWQgdG8gaXQuIFlvdSBjYW4gYWxzbyBhZGQgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCJgIHRvXHJcbiAqIGEgYDxmb3JtPmAsIHdoaWNoIHdpbGwgZW5hYmxlIHRoaXMgYmVoYXZpb3IgZm9yIGFsbCBgPGlucHV0PmBzIHdpdGhpbiBpdC4gU2VlXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zYH0gZm9yIG1vcmUuXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gdXNlIGBuZ01vZGVsYCB3aXRoIGEgZ2V0dGVyL3NldHRlcjpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWwtZ2V0dGVyLXNldHRlclwiIG1vZHVsZT1cImdldHRlclNldHRlckV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XHJcbiAgICAgICAgICAgTmFtZTpcclxuICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCIgLz5cclxuICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWUoKVwiPjwvc3Bhbj48L3ByZT5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XHJcbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnZ2V0dGVyU2V0dGVyRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgIHZhciBfbmFtZSA9ICdCcmlhbic7XHJcbiAgICAgICAgICAgJHNjb3BlLnVzZXIgPSB7XHJcbiAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbiAobmV3TmFtZSkge1xyXG4gICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQobmV3TmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICBfbmFtZSA9IG5ld05hbWU7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgcmV0dXJuIF9uYW1lO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH07XHJcbiAgICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ01vZGVsRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICByZXF1aXJlOiBbJ25nTW9kZWwnLCAnXj9mb3JtJywgJ14/bmdNb2RlbE9wdGlvbnMnXSxcclxuICAgIGNvbnRyb2xsZXI6IE5nTW9kZWxDb250cm9sbGVyLFxyXG4gICAgbGluazoge1xyXG4gICAgICBwcmU6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xyXG4gICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXSxcclxuICAgICAgICAgICAgZm9ybUN0cmwgPSBjdHJsc1sxXSB8fCBudWxsRm9ybUN0cmw7XHJcblxyXG4gICAgICAgIG1vZGVsQ3RybC4kJHNldE9wdGlvbnMoY3RybHNbMl0gJiYgY3RybHNbMl0uJG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBub3RpZnkgb3RoZXJzLCBlc3BlY2lhbGx5IHBhcmVudCBmb3Jtc1xyXG4gICAgICAgIGZvcm1DdHJsLiRhZGRDb250cm9sKG1vZGVsQ3RybCk7XHJcblxyXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGZvcm1DdHJsLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHBvc3Q6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xyXG4gICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXTtcclxuICAgICAgICBpZiAobW9kZWxDdHJsLiRvcHRpb25zICYmIG1vZGVsQ3RybC4kb3B0aW9ucy51cGRhdGVPbikge1xyXG4gICAgICAgICAgZWxlbWVudC5vbihtb2RlbEN0cmwuJG9wdGlvbnMudXBkYXRlT24sIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KGV2ICYmIGV2LnR5cGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50Lm9uKCdibHVyJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGlmIChtb2RlbEN0cmwuJHRvdWNoZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kc2V0VG91Y2hlZCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ2hhbmdlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFdmFsdWF0ZSB0aGUgZ2l2ZW4gZXhwcmVzc2lvbiB3aGVuIHRoZSB1c2VyIGNoYW5nZXMgdGhlIGlucHV0LlxyXG4gKiBUaGUgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQgaW1tZWRpYXRlbHksIHVubGlrZSB0aGUgSmF2YVNjcmlwdCBvbmNoYW5nZSBldmVudFxyXG4gKiB3aGljaCBvbmx5IHRyaWdnZXJzIGF0IHRoZSBlbmQgb2YgYSBjaGFuZ2UgKHVzdWFsbHksIHdoZW4gdGhlIHVzZXIgbGVhdmVzIHRoZVxyXG4gKiBmb3JtIGVsZW1lbnQgb3IgcHJlc3NlcyB0aGUgcmV0dXJuIGtleSkuXHJcbiAqXHJcbiAqIFRoZSBgbmdDaGFuZ2VgIGV4cHJlc3Npb24gaXMgb25seSBldmFsdWF0ZWQgd2hlbiBhIGNoYW5nZSBpbiB0aGUgaW5wdXQgdmFsdWUgY2F1c2VzXHJcbiAqIGEgbmV3IHZhbHVlIHRvIGJlIGNvbW1pdHRlZCB0byB0aGUgbW9kZWwuXHJcbiAqXHJcbiAqIEl0IHdpbGwgbm90IGJlIGV2YWx1YXRlZDpcclxuICogKiBpZiB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgYCRwYXJzZXJzYCB0cmFuc2Zvcm1hdGlvbiBwaXBlbGluZSBoYXMgbm90IGNoYW5nZWRcclxuICogKiBpZiB0aGUgaW5wdXQgaGFzIGNvbnRpbnVlZCB0byBiZSBpbnZhbGlkIHNpbmNlIHRoZSBtb2RlbCB3aWxsIHN0YXkgYG51bGxgXHJcbiAqICogaWYgdGhlIG1vZGVsIGlzIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSBhbmQgbm90IGJ5IGEgY2hhbmdlIHRvIHRoZSBpbnB1dCB2YWx1ZVxyXG4gKlxyXG4gKlxyXG4gKiBOb3RlLCB0aGlzIGRpcmVjdGl2ZSByZXF1aXJlcyBgbmdNb2RlbGAgdG8gYmUgcHJlc2VudC5cclxuICpcclxuICogQGVsZW1lbnQgaW5wdXRcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NoYW5nZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uIGNoYW5nZVxyXG4gKiBpbiBpbnB1dCB2YWx1ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogPGV4YW1wbGUgbmFtZT1cIm5nQ2hhbmdlLWRpcmVjdGl2ZVwiIG1vZHVsZT1cImNoYW5nZUV4YW1wbGVcIj5cclxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgICAgPHNjcmlwdD5cclxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ2NoYW5nZUV4YW1wbGUnLCBbXSlcclxuICogICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gKiAgICAgICAgICAgJHNjb3BlLmNvdW50ZXIgPSAwO1xyXG4gKiAgICAgICAgICAgJHNjb3BlLmNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICAgICAgICAkc2NvcGUuY291bnRlcisrO1xyXG4gKiAgICAgICAgICAgfTtcclxuICogICAgICAgICB9XSk7XHJcbiAqICAgICA8L3NjcmlwdD5cclxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAqICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbmZpcm1lZFwiIG5nLWNoYW5nZT1cImNoYW5nZSgpXCIgaWQ9XCJuZy1jaGFuZ2UtZXhhbXBsZTFcIiAvPlxyXG4gKiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjb25maXJtZWRcIiBpZD1cIm5nLWNoYW5nZS1leGFtcGxlMlwiIC8+XHJcbiAqICAgICAgIDxsYWJlbCBmb3I9XCJuZy1jaGFuZ2UtZXhhbXBsZTJcIj5Db25maXJtZWQ8L2xhYmVsPjxiciAvPlxyXG4gKiAgICAgICA8dHQ+ZGVidWcgPSB7e2NvbmZpcm1lZH19PC90dD48YnIvPlxyXG4gKiAgICAgICA8dHQ+Y291bnRlciA9IHt7Y291bnRlcn19PC90dD48YnIvPlxyXG4gKiAgICAgPC9kaXY+XHJcbiAqICAgPC9maWxlPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICogICAgIHZhciBjb3VudGVyID0gZWxlbWVudChieS5iaW5kaW5nKCdjb3VudGVyJykpO1xyXG4gKiAgICAgdmFyIGRlYnVnID0gZWxlbWVudChieS5iaW5kaW5nKCdjb25maXJtZWQnKSk7XHJcbiAqXHJcbiAqICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGlmIGNoYW5naW5nIGZyb20gdmlldycsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMCcpO1xyXG4gKlxyXG4gKiAgICAgICBlbGVtZW50KGJ5LmlkKCduZy1jaGFuZ2UtZXhhbXBsZTEnKSkuY2xpY2soKTtcclxuICpcclxuICogICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzEnKTtcclxuICogICAgICAgZXhwZWN0KGRlYnVnLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAqICAgICB9KTtcclxuICpcclxuICogICAgIGl0KCdzaG91bGQgbm90IGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGlmIGNoYW5naW5nIGZyb20gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICogICAgICAgZWxlbWVudChieS5pZCgnbmctY2hhbmdlLWV4YW1wbGUyJykpLmNsaWNrKCk7XHJcblxyXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMCcpO1xyXG4gKiAgICAgICBleHBlY3QoZGVidWcuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICogICAgIH0pO1xyXG4gKiAgIDwvZmlsZT5cclxuICogPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nQ2hhbmdlRGlyZWN0aXZlID0gdmFsdWVGbih7XHJcbiAgcmVzdHJpY3Q6ICdBJyxcclxuICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcclxuICAgIGN0cmwuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgc2NvcGUuJGV2YWwoYXR0ci5uZ0NoYW5nZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuXHJcbnZhciByZXF1aXJlZERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHIsIGN0cmwpIHtcclxuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XHJcbiAgICAgIGF0dHIucmVxdWlyZWQgPSB0cnVlOyAvLyBmb3JjZSB0cnV0aHkgaW4gY2FzZSB3ZSBhcmUgb24gbm9uIGlucHV0IGVsZW1lbnRcclxuXHJcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMucmVxdWlyZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiAhYXR0ci5yZXF1aXJlZCB8fCAhY3RybC4kaXNFbXB0eSh2YWx1ZSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhdHRyLiRvYnNlcnZlKCdyZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxudmFyIHBhdHRlcm5EaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgIGlmICghY3RybCkgcmV0dXJuO1xyXG5cclxuICAgICAgdmFyIHJlZ2V4cCwgcGF0dGVybkV4cCA9IGF0dHIubmdQYXR0ZXJuIHx8IGF0dHIucGF0dGVybjtcclxuICAgICAgYXR0ci4kb2JzZXJ2ZSgncGF0dGVybicsIGZ1bmN0aW9uKHJlZ2V4KSB7XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHJlZ2V4KSAmJiByZWdleC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICByZWdleCA9IG5ldyBSZWdFeHAocmVnZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlZ2V4ICYmICFyZWdleC50ZXN0KSB7XHJcbiAgICAgICAgICB0aHJvdyBtaW5FcnIoJ25nUGF0dGVybicpKCdub3JlZ2V4cCcsXHJcbiAgICAgICAgICAgICdFeHBlY3RlZCB7MH0gdG8gYmUgYSBSZWdFeHAgYnV0IHdhcyB7MX0uIEVsZW1lbnQ6IHsyfScsIHBhdHRlcm5FeHAsXHJcbiAgICAgICAgICAgIHJlZ2V4LCBzdGFydGluZ1RhZyhlbG0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlZ2V4cCA9IHJlZ2V4IHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMucGF0dGVybiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IGlzVW5kZWZpbmVkKHJlZ2V4cCkgfHwgcmVnZXhwLnRlc3QodmFsdWUpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxudmFyIG1heGxlbmd0aERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHIsIGN0cmwpIHtcclxuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XHJcblxyXG4gICAgICB2YXIgbWF4bGVuZ3RoID0gMDtcclxuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4bGVuZ3RoJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBtYXhsZW5ndGggPSBpbnQodmFsdWUpIHx8IDA7XHJcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMubWF4bGVuZ3RoID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkobW9kZWxWYWx1ZSkgfHwgdmlld1ZhbHVlLmxlbmd0aCA8PSBtYXhsZW5ndGg7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcbnZhciBtaW5sZW5ndGhEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgIGlmICghY3RybCkgcmV0dXJuO1xyXG5cclxuICAgICAgdmFyIG1pbmxlbmd0aCA9IDA7XHJcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21pbmxlbmd0aCcsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgbWlubGVuZ3RoID0gaW50KHZhbHVlKSB8fCAwO1xyXG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbmxlbmd0aCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KG1vZGVsVmFsdWUpIHx8IHZpZXdWYWx1ZS5sZW5ndGggPj0gbWlubGVuZ3RoO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdMaXN0XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUZXh0IGlucHV0IHRoYXQgY29udmVydHMgYmV0d2VlbiBhIGRlbGltaXRlZCBzdHJpbmcgYW5kIGFuIGFycmF5IG9mIHN0cmluZ3MuIFRoZSBkZWZhdWx0XHJcbiAqIGRlbGltaXRlciBpcyBhIGNvbW1hIGZvbGxvd2VkIGJ5IGEgc3BhY2UgLSBlcXVpdmFsZW50IHRvIGBuZy1saXN0PVwiLCBcImAuIFlvdSBjYW4gc3BlY2lmeSBhIGN1c3RvbVxyXG4gKiBkZWxpbWl0ZXIgYXMgdGhlIHZhbHVlIG9mIHRoZSBgbmdMaXN0YCBhdHRyaWJ1dGUgLSBmb3IgZXhhbXBsZSwgYG5nLWxpc3Q9XCIgfCBcImAuXHJcbiAqXHJcbiAqIFRoZSBiZWhhdmlvdXIgb2YgdGhlIGRpcmVjdGl2ZSBpcyBhZmZlY3RlZCBieSB0aGUgdXNlIG9mIHRoZSBgbmdUcmltYCBhdHRyaWJ1dGUuXHJcbiAqICogSWYgYG5nVHJpbWAgaXMgc2V0IHRvIGBcImZhbHNlXCJgIHRoZW4gd2hpdGVzcGFjZSBhcm91bmQgYm90aCB0aGUgc2VwYXJhdG9yIGFuZCBlYWNoXHJcbiAqICAgbGlzdCBpdGVtIGlzIHJlc3BlY3RlZC4gVGhpcyBpbXBsaWVzIHRoYXQgdGhlIHVzZXIgb2YgdGhlIGRpcmVjdGl2ZSBpcyByZXNwb25zaWJsZSBmb3JcclxuICogICBkZWFsaW5nIHdpdGggd2hpdGVzcGFjZSBidXQgYWxzbyBhbGxvd3MgeW91IHRvIHVzZSB3aGl0ZXNwYWNlIGFzIGEgZGVsaW1pdGVyLCBzdWNoIGFzIGFcclxuICogICB0YWIgb3IgbmV3bGluZSBjaGFyYWN0ZXIuXHJcbiAqICogT3RoZXJ3aXNlIHdoaXRlc3BhY2UgYXJvdW5kIHRoZSBkZWxpbWl0ZXIgaXMgaWdub3JlZCB3aGVuIHNwbGl0dGluZyAoYWx0aG91Z2ggaXQgaXMgcmVzcGVjdGVkXHJcbiAqICAgd2hlbiBqb2luaW5nIHRoZSBsaXN0IGl0ZW1zIGJhY2sgdG9nZXRoZXIpIGFuZCB3aGl0ZXNwYWNlIGFyb3VuZCBlYWNoIGxpc3QgaXRlbSBpcyBzdHJpcHBlZFxyXG4gKiAgIGJlZm9yZSBpdCBpcyBhZGRlZCB0byB0aGUgbW9kZWwuXHJcbiAqXHJcbiAqICMjIyBFeGFtcGxlIHdpdGggVmFsaWRhdGlvblxyXG4gKlxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdMaXN0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImxpc3RFeGFtcGxlXCI+XHJcbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gKiAgICAgIGFuZ3VsYXIubW9kdWxlKCdsaXN0RXhhbXBsZScsIFtdKVxyXG4gKiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICogICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydtb3JwaGV1cycsICduZW8nLCAndHJpbml0eSddO1xyXG4gKiAgICAgICAgfV0pO1xyXG4gKiAgIDwvZmlsZT5cclxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAqICAgICAgTGlzdDogPGlucHV0IG5hbWU9XCJuYW1lc0lucHV0XCIgbmctbW9kZWw9XCJuYW1lc1wiIG5nLWxpc3QgcmVxdWlyZWQ+XHJcbiAqICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICogICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICogICAgICA8YnI+XHJcbiAqICAgICAgPHR0Pm5hbWVzID0ge3tuYW1lc319PC90dD48YnIvPlxyXG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5uYW1lc0lucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gKiAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAqICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxyXG4gKiAgICAgPC9mb3JtPlxyXG4gKiAgIDwvZmlsZT5cclxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAqICAgICB2YXIgbGlzdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZXMnKSk7XHJcbiAqICAgICB2YXIgbmFtZXMgPSBlbGVtZW50KGJ5LmV4YWN0QmluZGluZygnbmFtZXMnKSk7XHJcbiAqICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZCcpKTtcclxuICogICAgIHZhciBlcnJvciA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmVycm9yJykpO1xyXG4gKlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGV4cGVjdChuYW1lcy5nZXRUZXh0KCkpLnRvQ29udGFpbignW1wibW9ycGhldXNcIixcIm5lb1wiLFwidHJpbml0eVwiXScpO1xyXG4gKiAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICogICAgICAgZXhwZWN0KGVycm9yLmdldENzc1ZhbHVlKCdkaXNwbGF5JykpLnRvQmUoJ25vbmUnKTtcclxuICogICAgIH0pO1xyXG4gKlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGxpc3RJbnB1dC5jbGVhcigpO1xyXG4gKiAgICAgICBsaXN0SW5wdXQuc2VuZEtleXMoJycpO1xyXG4gKlxyXG4gKiAgICAgICBleHBlY3QobmFtZXMuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xyXG4gKiAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAqICAgICAgIGV4cGVjdChlcnJvci5nZXRDc3NWYWx1ZSgnZGlzcGxheScpKS5ub3QudG9CZSgnbm9uZScpO1xyXG4gKiAgICAgfSk7XHJcbiAqICAgPC9maWxlPlxyXG4gKiA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqICMjIyBFeGFtcGxlIC0gc3BsaXR0aW5nIG9uIHdoaXRlc3BhY2VcclxuICogPGV4YW1wbGUgbmFtZT1cIm5nTGlzdC1kaXJlY3RpdmUtbmV3bGluZXNcIj5cclxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJsaXN0XCIgbmctbGlzdD1cIiYjMTA7XCIgbmctdHJpbT1cImZhbHNlXCI+PC90ZXh0YXJlYT5cclxuICogICAgPHByZT57eyBsaXN0IHwganNvbiB9fTwvcHJlPlxyXG4gKiAgIDwvZmlsZT5cclxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAqICAgICBpdChcInNob3VsZCBzcGxpdCB0aGUgdGV4dCBieSBuZXdsaW5lc1wiLCBmdW5jdGlvbigpIHtcclxuICogICAgICAgdmFyIGxpc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2xpc3QnKSk7XHJcbiAqICAgICAgIHZhciBvdXRwdXQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QgfCBqc29uJykpO1xyXG4gKiAgICAgICBsaXN0SW5wdXQuc2VuZEtleXMoJ2FiY1xcbmRlZlxcbmdoaScpO1xyXG4gKiAgICAgICBleHBlY3Qob3V0cHV0LmdldFRleHQoKSkudG9Db250YWluKCdbXFxuICBcImFiY1wiLFxcbiAgXCJkZWZcIixcXG4gIFwiZ2hpXCJcXG5dJyk7XHJcbiAqICAgICB9KTtcclxuICogICA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICogQGVsZW1lbnQgaW5wdXRcclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0xpc3Qgb3B0aW9uYWwgZGVsaW1pdGVyIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gc3BsaXQgdGhlIHZhbHVlLlxyXG4gKi9cclxudmFyIG5nTGlzdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgcHJpb3JpdHk6IDEwMCxcclxuICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgIC8vIFdlIHdhbnQgdG8gY29udHJvbCB3aGl0ZXNwYWNlIHRyaW1taW5nIHNvIHdlIHVzZSB0aGlzIGNvbnZvbHV0ZWQgYXBwcm9hY2hcclxuICAgICAgLy8gdG8gYWNjZXNzIHRoZSBuZ0xpc3QgYXR0cmlidXRlLCB3aGljaCBkb2Vzbid0IHByZS10cmltIHRoZSBhdHRyaWJ1dGVcclxuICAgICAgdmFyIG5nTGlzdCA9IGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyLm5nTGlzdCkgfHwgJywgJztcclxuICAgICAgdmFyIHRyaW1WYWx1ZXMgPSBhdHRyLm5nVHJpbSAhPT0gJ2ZhbHNlJztcclxuICAgICAgdmFyIHNlcGFyYXRvciA9IHRyaW1WYWx1ZXMgPyB0cmltKG5nTGlzdCkgOiBuZ0xpc3Q7XHJcblxyXG4gICAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAvLyBJZiB0aGUgdmlld1ZhbHVlIGlzIGludmFsaWQgKHNheSByZXF1aXJlZCBidXQgZW1wdHkpIGl0IHdpbGwgYmUgYHVuZGVmaW5lZGBcclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQodmlld1ZhbHVlKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgbGlzdCA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodmlld1ZhbHVlKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKHZpZXdWYWx1ZS5zcGxpdChzZXBhcmF0b3IpLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIGxpc3QucHVzaCh0cmltVmFsdWVzID8gdHJpbSh2YWx1ZSkgOiB2YWx1ZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY3RybC4kcGFyc2Vycy5wdXNoKHBhcnNlKTtcclxuICAgICAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdmFsdWUuam9pbihuZ0xpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgJGlzRW1wdHkgYmVjYXVzZSBhbiBlbXB0eSBhcnJheSBtZWFucyB0aGUgaW5wdXQgaXMgZW1wdHkuXHJcbiAgICAgIGN0cmwuJGlzRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiAhdmFsdWUgfHwgIXZhbHVlLmxlbmd0aDtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5cclxuXHJcbnZhciBDT05TVEFOVF9WQUxVRV9SRUdFWFAgPSAvXih0cnVlfGZhbHNlfFxcZCspJC87XHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nVmFsdWVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEJpbmRzIHRoZSBnaXZlbiBleHByZXNzaW9uIHRvIHRoZSB2YWx1ZSBvZiBgaW5wdXRbc2VsZWN0XWAgb3IgYGlucHV0W3JhZGlvXWAsIHNvXHJcbiAqIHRoYXQgd2hlbiB0aGUgZWxlbWVudCBpcyBzZWxlY3RlZCwgdGhlIGBuZ01vZGVsYCBvZiB0aGF0IGVsZW1lbnQgaXMgc2V0IHRvIHRoZVxyXG4gKiBib3VuZCB2YWx1ZS5cclxuICpcclxuICogYG5nVmFsdWVgIGlzIHVzZWZ1bCB3aGVuIGR5bmFtaWNhbGx5IGdlbmVyYXRpbmcgbGlzdHMgb2YgcmFkaW8gYnV0dG9ucyB1c2luZyBgbmctcmVwZWF0YCwgYXNcclxuICogc2hvd24gYmVsb3cuXHJcbiAqXHJcbiAqIEBlbGVtZW50IGlucHV0XHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdWYWx1ZSBhbmd1bGFyIGV4cHJlc3Npb24sIHdob3NlIHZhbHVlIHdpbGwgYmUgYm91bmQgdG8gdGhlIGB2YWx1ZWAgYXR0cmlidXRlXHJcbiAqICAgb2YgdGhlIGBpbnB1dGAgZWxlbWVudFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nVmFsdWUtZGlyZWN0aXZlXCIgbW9kdWxlPVwidmFsdWVFeGFtcGxlXCI+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3ZhbHVlRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5uYW1lcyA9IFsncGl6emEnLCAndW5pY29ybnMnLCAncm9ib3RzJ107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm15ID0geyBmYXZvcml0ZTogJ3VuaWNvcm5zJyB9O1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICA8Zm9ybSBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgIDxoMj5XaGljaCBpcyB5b3VyIGZhdm9yaXRlPzwvaDI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBuZy1yZXBlYXQ9XCJuYW1lIGluIG5hbWVzXCIgZm9yPVwie3tuYW1lfX1cIj5cclxuICAgICAgICAgICAgICB7e25hbWV9fVxyXG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIlxyXG4gICAgICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cIm15LmZhdm9yaXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgbmctdmFsdWU9XCJuYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgaWQ9XCJ7e25hbWV9fVwiXHJcbiAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJmYXZvcml0ZVwiPlxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgPGRpdj5Zb3UgY2hvc2Uge3tteS5mYXZvcml0ZX19PC9kaXY+XHJcbiAgICAgICAgPC9mb3JtPlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICB2YXIgZmF2b3JpdGUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215LmZhdm9yaXRlJykpO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGV4cGVjdChmYXZvcml0ZS5nZXRUZXh0KCkpLnRvQ29udGFpbigndW5pY29ybnMnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpdCgnc2hvdWxkIGJpbmQgdGhlIHZhbHVlcyB0byB0aGUgaW5wdXRzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBlbGVtZW50LmFsbChieS5tb2RlbCgnbXkuZmF2b3JpdGUnKSkuZ2V0KDApLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZmF2b3JpdGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3BpenphJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ1ZhbHVlRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBwcmlvcml0eTogMTAwLFxyXG4gICAgY29tcGlsZTogZnVuY3Rpb24odHBsLCB0cGxBdHRyKSB7XHJcbiAgICAgIGlmIChDT05TVEFOVF9WQUxVRV9SRUdFWFAudGVzdCh0cGxBdHRyLm5nVmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nVmFsdWVDb25zdGFudExpbmsoc2NvcGUsIGVsbSwgYXR0cikge1xyXG4gICAgICAgICAgYXR0ci4kc2V0KCd2YWx1ZScsIHNjb3BlLiRldmFsKGF0dHIubmdWYWx1ZSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nVmFsdWVMaW5rKHNjb3BlLCBlbG0sIGF0dHIpIHtcclxuICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nVmFsdWUsIGZ1bmN0aW9uIHZhbHVlV2F0Y2hBY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgYXR0ci4kc2V0KCd2YWx1ZScsIHZhbHVlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdNb2RlbE9wdGlvbnNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEFsbG93cyB0dW5pbmcgaG93IG1vZGVsIHVwZGF0ZXMgYXJlIGRvbmUuIFVzaW5nIGBuZ01vZGVsT3B0aW9uc2AgeW91IGNhbiBzcGVjaWZ5IGEgY3VzdG9tIGxpc3Qgb2ZcclxuICogZXZlbnRzIHRoYXQgd2lsbCB0cmlnZ2VyIGEgbW9kZWwgdXBkYXRlIGFuZC9vciBhIGRlYm91bmNpbmcgZGVsYXkgc28gdGhhdCB0aGUgYWN0dWFsIHVwZGF0ZSBvbmx5XHJcbiAqIHRha2VzIHBsYWNlIHdoZW4gYSB0aW1lciBleHBpcmVzOyB0aGlzIHRpbWVyIHdpbGwgYmUgcmVzZXQgYWZ0ZXIgYW5vdGhlciBjaGFuZ2UgdGFrZXMgcGxhY2UuXHJcbiAqXHJcbiAqIEdpdmVuIHRoZSBuYXR1cmUgb2YgYG5nTW9kZWxPcHRpb25zYCwgdGhlIHZhbHVlIGRpc3BsYXllZCBpbnNpZGUgaW5wdXQgZmllbGRzIGluIHRoZSB2aWV3IG1pZ2h0XHJcbiAqIGJlIGRpZmZlcmVudCB0aGFuIHRoZSB2YWx1ZSBpbiB0aGUgYWN0dWFsIG1vZGVsLiBUaGlzIG1lYW5zIHRoYXQgaWYgeW91IHVwZGF0ZSB0aGUgbW9kZWwgeW91XHJcbiAqIHNob3VsZCBhbHNvIGludm9rZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciBgJHJvbGxiYWNrVmlld1ZhbHVlYH0gb24gdGhlIHJlbGV2YW50IGlucHV0IGZpZWxkIGluXHJcbiAqIG9yZGVyIHRvIG1ha2Ugc3VyZSBpdCBpcyBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgbW9kZWwgYW5kIHRoYXQgYW55IGRlYm91bmNlZCBhY3Rpb24gaXMgY2FuY2VsZWQuXHJcbiAqXHJcbiAqIFRoZSBlYXNpZXN0IHdheSB0byByZWZlcmVuY2UgdGhlIGNvbnRyb2wncyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciBgJHJvbGxiYWNrVmlld1ZhbHVlYH1cclxuICogbWV0aG9kIGlzIGJ5IG1ha2luZyBzdXJlIHRoZSBpbnB1dCBpcyBwbGFjZWQgaW5zaWRlIGEgZm9ybSB0aGF0IGhhcyBhIGBuYW1lYCBhdHRyaWJ1dGUuIFRoaXMgaXNcclxuICogaW1wb3J0YW50IGJlY2F1c2UgYGZvcm1gIGNvbnRyb2xsZXJzIGFyZSBwdWJsaXNoZWQgdG8gdGhlIHJlbGF0ZWQgc2NvcGUgdW5kZXIgdGhlIG5hbWUgaW4gdGhlaXJcclxuICogYG5hbWVgIGF0dHJpYnV0ZS5cclxuICpcclxuICogQW55IHBlbmRpbmcgY2hhbmdlcyB3aWxsIHRha2UgcGxhY2UgaW1tZWRpYXRlbHkgd2hlbiBhbiBlbmNsb3NpbmcgZm9ybSBpcyBzdWJtaXR0ZWQgdmlhIHRoZVxyXG4gKiBgc3VibWl0YCBldmVudC4gTm90ZSB0aGF0IGBuZ0NsaWNrYCBldmVudHMgd2lsbCBvY2N1ciBiZWZvcmUgdGhlIG1vZGVsIGlzIHVwZGF0ZWQuIFVzZSBgbmdTdWJtaXRgXHJcbiAqIHRvIGhhdmUgYWNjZXNzIHRvIHRoZSB1cGRhdGVkIG1vZGVsLlxyXG4gKlxyXG4gKiBgbmdNb2RlbE9wdGlvbnNgIGhhcyBhbiBlZmZlY3Qgb24gdGhlIGVsZW1lbnQgaXQncyBkZWNsYXJlZCBvbiBhbmQgaXRzIGRlc2NlbmRhbnRzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gbmdNb2RlbE9wdGlvbnMgb3B0aW9ucyB0byBhcHBseSB0byB0aGUgY3VycmVudCBtb2RlbC4gVmFsaWQga2V5cyBhcmU6XHJcbiAqICAgLSBgdXBkYXRlT25gOiBzdHJpbmcgc3BlY2lmeWluZyB3aGljaCBldmVudCBzaG91bGQgYmUgdGhlIGlucHV0IGJvdW5kIHRvLiBZb3UgY2FuIHNldCBzZXZlcmFsXHJcbiAqICAgICBldmVudHMgdXNpbmcgYW4gc3BhY2UgZGVsaW1pdGVkIGxpc3QuIFRoZXJlIGlzIGEgc3BlY2lhbCBldmVudCBjYWxsZWQgYGRlZmF1bHRgIHRoYXRcclxuICogICAgIG1hdGNoZXMgdGhlIGRlZmF1bHQgZXZlbnRzIGJlbG9uZ2luZyBvZiB0aGUgY29udHJvbC5cclxuICogICAtIGBkZWJvdW5jZWA6IGludGVnZXIgdmFsdWUgd2hpY2ggY29udGFpbnMgdGhlIGRlYm91bmNlIG1vZGVsIHVwZGF0ZSB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuIEFcclxuICogICAgIHZhbHVlIG9mIDAgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHVwZGF0ZS4gSWYgYW4gb2JqZWN0IGlzIHN1cHBsaWVkIGluc3RlYWQsIHlvdSBjYW4gc3BlY2lmeSBhXHJcbiAqICAgICBjdXN0b20gdmFsdWUgZm9yIGVhY2ggZXZlbnQuIEZvciBleGFtcGxlOlxyXG4gKiAgICAgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnZGVmYXVsdCBibHVyJywgZGVib3VuY2U6IHsnZGVmYXVsdCc6IDUwMCwgJ2JsdXInOiAwfSB9XCJgXHJcbiAqICAgLSBgYWxsb3dJbnZhbGlkYDogYm9vbGVhbiB2YWx1ZSB3aGljaCBpbmRpY2F0ZXMgdGhhdCB0aGUgbW9kZWwgY2FuIGJlIHNldCB3aXRoIHZhbHVlcyB0aGF0IGRpZFxyXG4gKiAgICAgbm90IHZhbGlkYXRlIGNvcnJlY3RseSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHNldHRpbmcgdGhlIG1vZGVsIHRvIHVuZGVmaW5lZC5cclxuICogICAtIGBnZXR0ZXJTZXR0ZXJgOiBib29sZWFuIHZhbHVlIHdoaWNoIGRldGVybWluZXMgd2hldGhlciBvciBub3QgdG8gdHJlYXQgZnVuY3Rpb25zIGJvdW5kIHRvXHJcbiAgICAgICBgbmdNb2RlbGAgYXMgZ2V0dGVycy9zZXR0ZXJzLlxyXG4gKiAgIC0gYHRpbWV6b25lYDogRGVmaW5lcyB0aGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGZvclxyXG4gKiAgICAgYDxpbnB1dCB0eXBlPVwiZGF0ZVwiPmAsIGA8aW5wdXQgdHlwZT1cInRpbWVcIj5gLCAuLi4gLiBSaWdodCBub3csIHRoZSBvbmx5IHN1cHBvcnRlZCB2YWx1ZSBpcyBgJ1VUQydgLFxyXG4gKiAgICAgb3RoZXJ3aXNlIHRoZSBkZWZhdWx0IHRpbWV6b25lIG9mIHRoZSBicm93c2VyIHdpbGwgYmUgdXNlZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuXHJcbiAgVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBvdmVycmlkZSBpbW1lZGlhdGUgdXBkYXRlcy4gQ2hhbmdlcyBvbiB0aGUgaW5wdXRzIHdpdGhpbiB0aGVcclxuICBmb3JtIHdpbGwgdXBkYXRlIHRoZSBtb2RlbCBvbmx5IHdoZW4gdGhlIGNvbnRyb2wgbG9zZXMgZm9jdXMgKGJsdXIgZXZlbnQpLiBJZiBgZXNjYXBlYCBrZXkgaXNcclxuICBwcmVzc2VkIHdoaWxlIHRoZSBpbnB1dCBmaWVsZCBpcyBmb2N1c2VkLCB0aGUgdmFsdWUgaXMgcmVzZXQgdG8gdGhlIHZhbHVlIGluIHRoZSBjdXJyZW50IG1vZGVsLlxyXG5cclxuICA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbE9wdGlvbnMtZGlyZWN0aXZlLWJsdXJcIiBtb2R1bGU9XCJvcHRpb25zRXhhbXBsZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cclxuICAgICAgICAgIE5hbWU6XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxyXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcclxuICAgICAgICAgICAgICAgICBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2JsdXInIH1cIlxyXG4gICAgICAgICAgICAgICAgIG5nLWtleXVwPVwiY2FuY2VsKCRldmVudClcIiAvPjxiciAvPlxyXG5cclxuICAgICAgICAgIE90aGVyIGRhdGE6XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIuZGF0YVwiIC8+PGJyIC8+XHJcbiAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDxwcmU+dXNlci5uYW1lID0gPHNwYW4gbmctYmluZD1cInVzZXIubmFtZVwiPjwvc3Bhbj48L3ByZT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcHRpb25zRXhhbXBsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUudXNlciA9IHsgbmFtZTogJ3NheScsIGRhdGE6ICcnIH07XHJcblxyXG4gICAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUudXNlckZvcm0udXNlck5hbWUuJHJvbGxiYWNrVmlld1ZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfV0pO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgbW9kZWwgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VzZXIubmFtZScpKTtcclxuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlci5uYW1lJykpO1xyXG4gICAgICB2YXIgb3RoZXIgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLmRhdGEnKSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGFsbG93IGN1c3RvbSBldmVudHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpbnB1dC5zZW5kS2V5cygnIGhlbGxvJyk7XHJcbiAgICAgICAgaW5wdXQuY2xpY2soKTtcclxuICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0VxdWFsKCdzYXknKTtcclxuICAgICAgICBvdGhlci5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3NheSBoZWxsbycpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgJHJvbGxiYWNrVmlld1ZhbHVlIHdoZW4gbW9kZWwgY2hhbmdlcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlucHV0LnNlbmRLZXlzKCcgaGVsbG8nKTtcclxuICAgICAgICBleHBlY3QoaW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCdzYXkgaGVsbG8nKTtcclxuICAgICAgICBpbnB1dC5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5FU0NBUEUpO1xyXG4gICAgICAgIGV4cGVjdChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJ3NheScpO1xyXG4gICAgICAgIG90aGVyLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5Jyk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuXHJcbiAgVGhpcyBvbmUgc2hvd3MgaG93IHRvIGRlYm91bmNlIG1vZGVsIGNoYW5nZXMuIE1vZGVsIHdpbGwgYmUgdXBkYXRlZCBvbmx5IDEgc2VjIGFmdGVyIGxhc3QgY2hhbmdlLlxyXG4gIElmIHRoZSBgQ2xlYXJgIGJ1dHRvbiBpcyBwcmVzc2VkLCBhbnkgZGVib3VuY2VkIGFjdGlvbiBpcyBjYW5jZWxlZCBhbmQgdGhlIHZhbHVlIGJlY29tZXMgZW1wdHkuXHJcblxyXG4gIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZGVib3VuY2VcIiBtb2R1bGU9XCJvcHRpb25zRXhhbXBsZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cclxuICAgICAgICAgIE5hbWU6XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxyXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcclxuICAgICAgICAgICAgICAgICBuZy1tb2RlbC1vcHRpb25zPVwieyBkZWJvdW5jZTogMTAwMCB9XCIgLz5cclxuICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJ1c2VyRm9ybS51c2VyTmFtZS4kcm9sbGJhY2tWaWV3VmFsdWUoKTsgdXNlci5uYW1lPScnXCI+Q2xlYXI8L2J1dHRvbj48YnIgLz5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lXCI+PC9zcGFuPjwvcHJlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ29wdGlvbnNFeGFtcGxlJywgW10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICRzY29wZS51c2VyID0geyBuYW1lOiAnc2F5JyB9O1xyXG4gICAgICAgIH1dKTtcclxuICAgIDwvZmlsZT5cclxuICA8L2V4YW1wbGU+XHJcblxyXG4gIFRoaXMgb25lIHNob3dzIGhvdyB0byBiaW5kIHRvIGdldHRlci9zZXR0ZXJzOlxyXG5cclxuICA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbE9wdGlvbnMtZGlyZWN0aXZlLWdldHRlci1zZXR0ZXJcIiBtb2R1bGU9XCJnZXR0ZXJTZXR0ZXJFeGFtcGxlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxyXG4gICAgICAgICAgTmFtZTpcclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCIgLz5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lKClcIj48L3NwYW4+PC9wcmU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnZ2V0dGVyU2V0dGVyRXhhbXBsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICB2YXIgX25hbWUgPSAnQnJpYW4nO1xyXG4gICAgICAgICAgJHNjb3BlLnVzZXIgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uIChuZXdOYW1lKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKG5ld05hbWUpID8gKF9uYW1lID0gbmV3TmFtZSkgOiBfbmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICckYXR0cnMnLCBmdW5jdGlvbigkc2NvcGUsICRhdHRycykge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnMgPSAkc2NvcGUuJGV2YWwoJGF0dHJzLm5nTW9kZWxPcHRpb25zKTtcclxuICAgICAgLy8gQWxsb3cgYWRkaW5nL292ZXJyaWRpbmcgYm91bmQgZXZlbnRzXHJcbiAgICAgIGlmICh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIGV4dHJhY3QgXCJkZWZhdWx0XCIgcHNldWRvLWV2ZW50IGZyb20gbGlzdCBvZiBldmVudHMgdGhhdCBjYW4gdHJpZ2dlciBhIG1vZGVsIHVwZGF0ZVxyXG4gICAgICAgIHRoaXMuJG9wdGlvbnMudXBkYXRlT24gPSB0cmltKHRoaXMuJG9wdGlvbnMudXBkYXRlT24ucmVwbGFjZShERUZBVUxUX1JFR0VYUCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB0aGF0LiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gJyAnO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1dXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIGhlbHBlciBtZXRob2RzXHJcbmZ1bmN0aW9uIGFkZFNldFZhbGlkaXR5TWV0aG9kKGNvbnRleHQpIHtcclxuICB2YXIgY3RybCA9IGNvbnRleHQuY3RybCxcclxuICAgICAgJGVsZW1lbnQgPSBjb250ZXh0LiRlbGVtZW50LFxyXG4gICAgICBjbGFzc0NhY2hlID0ge30sXHJcbiAgICAgIHNldCA9IGNvbnRleHQuc2V0LFxyXG4gICAgICB1bnNldCA9IGNvbnRleHQudW5zZXQsXHJcbiAgICAgIHBhcmVudEZvcm0gPSBjb250ZXh0LnBhcmVudEZvcm0sXHJcbiAgICAgICRhbmltYXRlID0gY29udGV4dC4kYW5pbWF0ZTtcclxuXHJcbiAgY3RybC4kc2V0VmFsaWRpdHkgPSBzZXRWYWxpZGl0eTtcclxuICB0b2dnbGVWYWxpZGF0aW9uQ3NzKCcnLCB0cnVlKTtcclxuXHJcbiAgZnVuY3Rpb24gc2V0VmFsaWRpdHkodmFsaWRhdGlvbkVycm9yS2V5LCBzdGF0ZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgY3JlYXRlQW5kU2V0KCckcGVuZGluZycsIHZhbGlkYXRpb25FcnJvcktleSwgb3B0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1bnNldEFuZENsZWFudXAoJyRwZW5kaW5nJywgdmFsaWRhdGlvbkVycm9yS2V5LCBvcHRpb25zKTtcclxuICAgIH1cclxuICAgIGlmICghaXNCb29sZWFuKHN0YXRlKSkge1xyXG4gICAgICB1bnNldChjdHJsLiRlcnJvciwgdmFsaWRhdGlvbkVycm9yS2V5LCBvcHRpb25zKTtcclxuICAgICAgdW5zZXQoY3RybC4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgb3B0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgICB1bnNldChjdHJsLiRlcnJvciwgdmFsaWRhdGlvbkVycm9yS2V5LCBvcHRpb25zKTtcclxuICAgICAgICBzZXQoY3RybC4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgb3B0aW9ucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0KGN0cmwuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIG9wdGlvbnMpO1xyXG4gICAgICAgIHVuc2V0KGN0cmwuJCRzdWNjZXNzLCB2YWxpZGF0aW9uRXJyb3JLZXksIG9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY3RybC4kcGVuZGluZykge1xyXG4gICAgICBjYWNoZWRUb2dnbGVDbGFzcyhQRU5ESU5HX0NMQVNTLCB0cnVlKTtcclxuICAgICAgY3RybC4kdmFsaWQgPSBjdHJsLiRpbnZhbGlkID0gdW5kZWZpbmVkO1xyXG4gICAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKCcnLCBudWxsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKFBFTkRJTkdfQ0xBU1MsIGZhbHNlKTtcclxuICAgICAgY3RybC4kdmFsaWQgPSBpc09iamVjdEVtcHR5KGN0cmwuJGVycm9yKTtcclxuICAgICAgY3RybC4kaW52YWxpZCA9ICFjdHJsLiR2YWxpZDtcclxuICAgICAgdG9nZ2xlVmFsaWRhdGlvbkNzcygnJywgY3RybC4kdmFsaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlLXJlYWQgdGhlIHN0YXRlIGFzIHRoZSBzZXQvdW5zZXQgbWV0aG9kcyBjb3VsZCBoYXZlXHJcbiAgICAvLyBjb21iaW5lZCBzdGF0ZSBpbiBjdHJsLiRlcnJvclt2YWxpZGF0aW9uRXJyb3JdICh1c2VkIGZvciBmb3JtcyksXHJcbiAgICAvLyB3aGVyZSBzZXR0aW5nL3Vuc2V0dGluZyBvbmx5IGluY3JlbWVudHMvZGVjcmVtZW50cyB0aGUgdmFsdWUsXHJcbiAgICAvLyBhbmQgZG9lcyBub3QgcmVwbGFjZSBpdC5cclxuICAgIHZhciBjb21iaW5lZFN0YXRlO1xyXG4gICAgaWYgKGN0cmwuJHBlbmRpbmcgJiYgY3RybC4kcGVuZGluZ1t2YWxpZGF0aW9uRXJyb3JLZXldKSB7XHJcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB1bmRlZmluZWQ7XHJcbiAgICB9IGVsc2UgaWYgKGN0cmwuJGVycm9yW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcclxuICAgICAgY29tYmluZWRTdGF0ZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmIChjdHJsLiQkc3VjY2Vzc1t2YWxpZGF0aW9uRXJyb3JLZXldKSB7XHJcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29tYmluZWRTdGF0ZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKHZhbGlkYXRpb25FcnJvcktleSwgY29tYmluZWRTdGF0ZSk7XHJcbiAgICBwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eSh2YWxpZGF0aW9uRXJyb3JLZXksIGNvbWJpbmVkU3RhdGUsIGN0cmwpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlQW5kU2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoIWN0cmxbbmFtZV0pIHtcclxuICAgICAgY3RybFtuYW1lXSA9IHt9O1xyXG4gICAgfVxyXG4gICAgc2V0KGN0cmxbbmFtZV0sIHZhbHVlLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVuc2V0QW5kQ2xlYW51cChuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKGN0cmxbbmFtZV0pIHtcclxuICAgICAgdW5zZXQoY3RybFtuYW1lXSwgdmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzT2JqZWN0RW1wdHkoY3RybFtuYW1lXSkpIHtcclxuICAgICAgY3RybFtuYW1lXSA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhY2hlZFRvZ2dsZUNsYXNzKGNsYXNzTmFtZSwgc3dpdGNoVmFsdWUpIHtcclxuICAgIGlmIChzd2l0Y2hWYWx1ZSAmJiAhY2xhc3NDYWNoZVtjbGFzc05hbWVdKSB7XHJcbiAgICAgICRhbmltYXRlLmFkZENsYXNzKCRlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICBjbGFzc0NhY2hlW2NsYXNzTmFtZV0gPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICghc3dpdGNoVmFsdWUgJiYgY2xhc3NDYWNoZVtjbGFzc05hbWVdKSB7XHJcbiAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKCRlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICBjbGFzc0NhY2hlW2NsYXNzTmFtZV0gPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRvZ2dsZVZhbGlkYXRpb25Dc3ModmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkKSB7XHJcbiAgICB2YWxpZGF0aW9uRXJyb3JLZXkgPSB2YWxpZGF0aW9uRXJyb3JLZXkgPyAnLScgKyBzbmFrZV9jYXNlKHZhbGlkYXRpb25FcnJvcktleSwgJy0nKSA6ICcnO1xyXG5cclxuICAgIGNhY2hlZFRvZ2dsZUNsYXNzKFZBTElEX0NMQVNTICsgdmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkID09PSB0cnVlKTtcclxuICAgIGNhY2hlZFRvZ2dsZUNsYXNzKElOVkFMSURfQ0xBU1MgKyB2YWxpZGF0aW9uRXJyb3JLZXksIGlzVmFsaWQgPT09IGZhbHNlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzT2JqZWN0RW1wdHkob2JqKSB7XHJcbiAgaWYgKG9iaikge1xyXG4gICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdCaW5kXHJcbiAqIEByZXN0cmljdCBBQ1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ0JpbmRgIGF0dHJpYnV0ZSB0ZWxscyBBbmd1bGFyIHRvIHJlcGxhY2UgdGhlIHRleHQgY29udGVudCBvZiB0aGUgc3BlY2lmaWVkIEhUTUwgZWxlbWVudFxyXG4gKiB3aXRoIHRoZSB2YWx1ZSBvZiBhIGdpdmVuIGV4cHJlc3Npb24sIGFuZCB0byB1cGRhdGUgdGhlIHRleHQgY29udGVudCB3aGVuIHRoZSB2YWx1ZSBvZiB0aGF0XHJcbiAqIGV4cHJlc3Npb24gY2hhbmdlcy5cclxuICpcclxuICogVHlwaWNhbGx5LCB5b3UgZG9uJ3QgdXNlIGBuZ0JpbmRgIGRpcmVjdGx5LCBidXQgaW5zdGVhZCB5b3UgdXNlIHRoZSBkb3VibGUgY3VybHkgbWFya3VwIGxpa2VcclxuICogYHt7IGV4cHJlc3Npb24gfX1gIHdoaWNoIGlzIHNpbWlsYXIgYnV0IGxlc3MgdmVyYm9zZS5cclxuICpcclxuICogSXQgaXMgcHJlZmVyYWJsZSB0byB1c2UgYG5nQmluZGAgaW5zdGVhZCBvZiBge3sgZXhwcmVzc2lvbiB9fWAgaWYgYSB0ZW1wbGF0ZSBpcyBtb21lbnRhcmlseVxyXG4gKiBkaXNwbGF5ZWQgYnkgdGhlIGJyb3dzZXIgaW4gaXRzIHJhdyBzdGF0ZSBiZWZvcmUgQW5ndWxhciBjb21waWxlcyBpdC4gU2luY2UgYG5nQmluZGAgaXMgYW5cclxuICogZWxlbWVudCBhdHRyaWJ1dGUsIGl0IG1ha2VzIHRoZSBiaW5kaW5ncyBpbnZpc2libGUgdG8gdGhlIHVzZXIgd2hpbGUgdGhlIHBhZ2UgaXMgbG9hZGluZy5cclxuICpcclxuICogQW4gYWx0ZXJuYXRpdmUgc29sdXRpb24gdG8gdGhpcyBwcm9ibGVtIHdvdWxkIGJlIHVzaW5nIHRoZVxyXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xvYWsgbmdDbG9ha30gZGlyZWN0aXZlLlxyXG4gKlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0JpbmQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEVudGVyIGEgbmFtZSBpbiB0aGUgTGl2ZSBQcmV2aWV3IHRleHQgYm94OyB0aGUgZ3JlZXRpbmcgYmVsb3cgdGhlIHRleHQgYm94IGNoYW5nZXMgaW5zdGFudGx5LlxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnYmluZEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSAnV2hpcmxlZCc7XHJcbiAgICAgICAgICAgfV0pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICBFbnRlciBuYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm5hbWVcIj48YnI+XHJcbiAgICAgICAgIEhlbGxvIDxzcGFuIG5nLWJpbmQ9XCJuYW1lXCI+PC9zcGFuPiFcclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWJpbmQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgdmFyIG5hbWVJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ25hbWUnKSk7XHJcblxyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCduYW1lJykpLmdldFRleHQoKSkudG9CZSgnV2hpcmxlZCcpO1xyXG4gICAgICAgICBuYW1lSW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgbmFtZUlucHV0LnNlbmRLZXlzKCd3b3JsZCcpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCduYW1lJykpLmdldFRleHQoKSkudG9CZSgnd29ybGQnKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nQmluZERpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0FDJyxcclxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZENvbXBpbGUodGVtcGxhdGVFbGVtZW50KSB7XHJcbiAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRlbXBsYXRlRWxlbWVudCk7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0JpbmRMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBhdHRyLm5nQmluZCk7XHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdCaW5kLCBmdW5jdGlvbiBuZ0JpbmRXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgLy8gV2UgYXJlIHB1cnBvc2VmdWxseSB1c2luZyA9PSBoZXJlIHJhdGhlciB0aGFuID09PSBiZWNhdXNlIHdlIHdhbnQgdG9cclxuICAgICAgICAgIC8vIGNhdGNoIHdoZW4gdmFsdWUgaXMgXCJudWxsIG9yIHVuZGVmaW5lZFwiXHJcbiAgICAgICAgICAvLyBqc2hpbnQgLVcwNDFcclxuICAgICAgICAgIGVsZW1lbnQudGV4dCh2YWx1ZSA9PSB1bmRlZmluZWQgPyAnJyA6IHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0JpbmRUZW1wbGF0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ0JpbmRUZW1wbGF0ZWAgZGlyZWN0aXZlIHNwZWNpZmllcyB0aGF0IHRoZSBlbGVtZW50XHJcbiAqIHRleHQgY29udGVudCBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCB0aGUgaW50ZXJwb2xhdGlvbiBvZiB0aGUgdGVtcGxhdGVcclxuICogaW4gdGhlIGBuZ0JpbmRUZW1wbGF0ZWAgYXR0cmlidXRlLlxyXG4gKiBVbmxpa2UgYG5nQmluZGAsIHRoZSBgbmdCaW5kVGVtcGxhdGVgIGNhbiBjb250YWluIG11bHRpcGxlIGB7e2AgYH19YFxyXG4gKiBleHByZXNzaW9ucy4gVGhpcyBkaXJlY3RpdmUgaXMgbmVlZGVkIHNpbmNlIHNvbWUgSFRNTCBlbGVtZW50c1xyXG4gKiAoc3VjaCBhcyBUSVRMRSBhbmQgT1BUSU9OKSBjYW5ub3QgY29udGFpbiBTUEFOIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHBhcmFtIHtzdHJpbmd9IG5nQmluZFRlbXBsYXRlIHRlbXBsYXRlIG9mIGZvcm1cclxuICogICA8dHQ+e3s8L3R0PiA8dHQ+ZXhwcmVzc2lvbjwvdHQ+IDx0dD59fTwvdHQ+IHRvIGV2YWwuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFRyeSBpdCBoZXJlOiBlbnRlciB0ZXh0IGluIHRleHQgYm94IGFuZCB3YXRjaCB0aGUgZ3JlZXRpbmcgY2hhbmdlLlxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnYmluZEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcclxuICAgICAgICAgICAgICRzY29wZS5zYWx1dGF0aW9uID0gJ0hlbGxvJztcclxuICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJ1dvcmxkJztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgU2FsdXRhdGlvbjogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzYWx1dGF0aW9uXCI+PGJyPlxyXG4gICAgICAgIE5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjxicj5cclxuICAgICAgICA8cHJlIG5nLWJpbmQtdGVtcGxhdGU9XCJ7e3NhbHV0YXRpb259fSB7e25hbWV9fSFcIj48L3ByZT5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWJpbmQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgdmFyIHNhbHV0YXRpb25FbGVtID0gZWxlbWVudChieS5iaW5kaW5nKCdzYWx1dGF0aW9uJykpO1xyXG4gICAgICAgICB2YXIgc2FsdXRhdGlvbklucHV0ID0gZWxlbWVudChieS5tb2RlbCgnc2FsdXRhdGlvbicpKTtcclxuICAgICAgICAgdmFyIG5hbWVJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ25hbWUnKSk7XHJcblxyXG4gICAgICAgICBleHBlY3Qoc2FsdXRhdGlvbkVsZW0uZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBXb3JsZCEnKTtcclxuXHJcbiAgICAgICAgIHNhbHV0YXRpb25JbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBzYWx1dGF0aW9uSW5wdXQuc2VuZEtleXMoJ0dyZWV0aW5ncycpO1xyXG4gICAgICAgICBuYW1lSW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgbmFtZUlucHV0LnNlbmRLZXlzKCd1c2VyJyk7XHJcblxyXG4gICAgICAgICBleHBlY3Qoc2FsdXRhdGlvbkVsZW0uZ2V0VGV4dCgpKS50b0JlKCdHcmVldGluZ3MgdXNlciEnKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlID0gWyckaW50ZXJwb2xhdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkaW50ZXJwb2xhdGUsICRjb21waWxlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZFRlbXBsYXRlQ29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpIHtcclxuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVFbGVtZW50KTtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZFRlbXBsYXRlTGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyLm5nQmluZFRlbXBsYXRlKSk7XHJcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBpbnRlcnBvbGF0ZUZuLmV4cHJlc3Npb25zKTtcclxuICAgICAgICBhdHRyLiRvYnNlcnZlKCduZ0JpbmRUZW1wbGF0ZScsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBlbGVtZW50LnRleHQodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQmluZEh0bWxcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIENyZWF0ZXMgYSBiaW5kaW5nIHRoYXQgd2lsbCBpbm5lckhUTUwgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIHRoZSBgZXhwcmVzc2lvbmAgaW50byB0aGUgY3VycmVudFxyXG4gKiBlbGVtZW50IGluIGEgc2VjdXJlIHdheS4gIEJ5IGRlZmF1bHQsIHRoZSBpbm5lckhUTUwtZWQgY29udGVudCB3aWxsIGJlIHNhbml0aXplZCB1c2luZyB0aGUge0BsaW5rXHJcbiAqIG5nU2FuaXRpemUuJHNhbml0aXplICRzYW5pdGl6ZX0gc2VydmljZS4gIFRvIHV0aWxpemUgdGhpcyBmdW5jdGlvbmFsaXR5LCBlbnN1cmUgdGhhdCBgJHNhbml0aXplYFxyXG4gKiBpcyBhdmFpbGFibGUsIGZvciBleGFtcGxlLCBieSBpbmNsdWRpbmcge0BsaW5rIG5nU2FuaXRpemV9IGluIHlvdXIgbW9kdWxlJ3MgZGVwZW5kZW5jaWVzIChub3QgaW5cclxuICogY29yZSBBbmd1bGFyLikgIFlvdSBtYXkgYWxzbyBieXBhc3Mgc2FuaXRpemF0aW9uIGZvciB2YWx1ZXMgeW91IGtub3cgYXJlIHNhZmUuIFRvIGRvIHNvLCBiaW5kIHRvXHJcbiAqIGFuIGV4cGxpY2l0bHkgdHJ1c3RlZCB2YWx1ZSB2aWEge0BsaW5rIG5nLiRzY2UjdHJ1c3RBc0h0bWwgJHNjZS50cnVzdEFzSHRtbH0uICBTZWUgdGhlIGV4YW1wbGVcclxuICogdW5kZXIge0BsaW5rIG5nLiRzY2UjRXhhbXBsZSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0uXHJcbiAqXHJcbiAqIE5vdGU6IElmIGEgYCRzYW5pdGl6ZWAgc2VydmljZSBpcyB1bmF2YWlsYWJsZSBhbmQgdGhlIGJvdW5kIHZhbHVlIGlzbid0IGV4cGxpY2l0bHkgdHJ1c3RlZCwgeW91XHJcbiAqIHdpbGwgaGF2ZSBhbiBleGNlcHRpb24gKGluc3RlYWQgb2YgYW4gZXhwbG9pdC4pXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQmluZEh0bWwge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcblxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kSHRtbEV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgIDxwIG5nLWJpbmQtaHRtbD1cIm15SFRNTFwiPjwvcD5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuXHJcbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2JpbmRIdG1sRXhhbXBsZScsIFsnbmdTYW5pdGl6ZSddKVxyXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICRzY29wZS5teUhUTUwgPVxyXG4gICAgICAgICAgICAgICdJIGFtIGFuIDxjb2RlPkhUTUw8L2NvZGU+c3RyaW5nIHdpdGggJyArXHJcbiAgICAgICAgICAgICAgJzxhIGhyZWY9XCIjXCI+bGlua3MhPC9hPiBhbmQgb3RoZXIgPGVtPnN0dWZmPC9lbT4nO1xyXG4gICAgICAgICB9XSk7XHJcbiAgICAgPC9maWxlPlxyXG5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWJpbmQtaHRtbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdteUhUTUwnKSkuZ2V0VGV4dCgpKS50b0JlKFxyXG4gICAgICAgICAgICAgJ0kgYW0gYW4gSFRNTHN0cmluZyB3aXRoIGxpbmtzISBhbmQgb3RoZXIgc3R1ZmYnKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nQmluZEh0bWxEaXJlY3RpdmUgPSBbJyRzY2UnLCAnJHBhcnNlJywgJyRjb21waWxlJywgZnVuY3Rpb24oJHNjZSwgJHBhcnNlLCAkY29tcGlsZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kSHRtbENvbXBpbGUodEVsZW1lbnQsIHRBdHRycykge1xyXG4gICAgICB2YXIgbmdCaW5kSHRtbEdldHRlciA9ICRwYXJzZSh0QXR0cnMubmdCaW5kSHRtbCk7XHJcbiAgICAgIHZhciBuZ0JpbmRIdG1sV2F0Y2ggPSAkcGFyc2UodEF0dHJzLm5nQmluZEh0bWwsIGZ1bmN0aW9uIGdldFN0cmluZ1ZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuICh2YWx1ZSB8fCAnJykudG9TdHJpbmcoKTtcclxuICAgICAgfSk7XHJcbiAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRFbGVtZW50KTtcclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0JpbmRIdG1sTGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0luZm8oZWxlbWVudCwgYXR0ci5uZ0JpbmRIdG1sKTtcclxuXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKG5nQmluZEh0bWxXYXRjaCwgZnVuY3Rpb24gbmdCaW5kSHRtbFdhdGNoQWN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gd2UgcmUtZXZhbHVhdGUgdGhlIGV4cHIgYmVjYXVzZSB3ZSB3YW50IGEgVHJ1c3RlZFZhbHVlSG9sZGVyVHlwZVxyXG4gICAgICAgICAgLy8gZm9yICRzY2UsIG5vdCBhIHN0cmluZ1xyXG4gICAgICAgICAgZWxlbWVudC5odG1sKCRzY2UuZ2V0VHJ1c3RlZEh0bWwobmdCaW5kSHRtbEdldHRlcihzY29wZSkpIHx8ICcnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbmZ1bmN0aW9uIGNsYXNzRGlyZWN0aXZlKG5hbWUsIHNlbGVjdG9yKSB7XHJcbiAgbmFtZSA9ICduZ0NsYXNzJyArIG5hbWU7XHJcbiAgcmV0dXJuIFsnJGFuaW1hdGUnLCBmdW5jdGlvbigkYW5pbWF0ZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBQycsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgdmFyIG9sZFZhbDtcclxuXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJbbmFtZV0sIG5nQ2xhc3NXYXRjaEFjdGlvbiwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIGF0dHIuJG9ic2VydmUoJ2NsYXNzJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIG5nQ2xhc3NXYXRjaEFjdGlvbihzY29wZS4kZXZhbChhdHRyW25hbWVdKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBpZiAobmFtZSAhPT0gJ25nQ2xhc3MnKSB7XHJcbiAgICAgICAgICBzY29wZS4kd2F0Y2goJyRpbmRleCcsIGZ1bmN0aW9uKCRpbmRleCwgb2xkJGluZGV4KSB7XHJcbiAgICAgICAgICAgIC8vIGpzaGludCBiaXR3aXNlOiBmYWxzZVxyXG4gICAgICAgICAgICB2YXIgbW9kID0gJGluZGV4ICYgMTtcclxuICAgICAgICAgICAgaWYgKG1vZCAhPT0gKG9sZCRpbmRleCAmIDEpKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBhcnJheUNsYXNzZXMoc2NvcGUuJGV2YWwoYXR0cltuYW1lXSkpO1xyXG4gICAgICAgICAgICAgIG1vZCA9PT0gc2VsZWN0b3IgP1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3NlcyhjbGFzc2VzKSA6XHJcbiAgICAgICAgICAgICAgICByZW1vdmVDbGFzc2VzKGNsYXNzZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZENsYXNzZXMoY2xhc3Nlcykge1xyXG4gICAgICAgICAgdmFyIG5ld0NsYXNzZXMgPSBkaWdlc3RDbGFzc0NvdW50cyhjbGFzc2VzLCAxKTtcclxuICAgICAgICAgIGF0dHIuJGFkZENsYXNzKG5ld0NsYXNzZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhjbGFzc2VzKSB7XHJcbiAgICAgICAgICB2YXIgbmV3Q2xhc3NlcyA9IGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzZXMsIC0xKTtcclxuICAgICAgICAgIGF0dHIuJHJlbW92ZUNsYXNzKG5ld0NsYXNzZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGlnZXN0Q2xhc3NDb3VudHMgKGNsYXNzZXMsIGNvdW50KSB7XHJcbiAgICAgICAgICB2YXIgY2xhc3NDb3VudHMgPSBlbGVtZW50LmRhdGEoJyRjbGFzc0NvdW50cycpIHx8IHt9O1xyXG4gICAgICAgICAgdmFyIGNsYXNzZXNUb1VwZGF0ZSA9IFtdO1xyXG4gICAgICAgICAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDAgfHwgY2xhc3NDb3VudHNbY2xhc3NOYW1lXSkge1xyXG4gICAgICAgICAgICAgIGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gPSAoY2xhc3NDb3VudHNbY2xhc3NOYW1lXSB8fCAwKSArIGNvdW50O1xyXG4gICAgICAgICAgICAgIGlmIChjbGFzc0NvdW50c1tjbGFzc05hbWVdID09PSArKGNvdW50ID4gMCkpIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzZXNUb1VwZGF0ZS5wdXNoKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGVsZW1lbnQuZGF0YSgnJGNsYXNzQ291bnRzJywgY2xhc3NDb3VudHMpO1xyXG4gICAgICAgICAgcmV0dXJuIGNsYXNzZXNUb1VwZGF0ZS5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVDbGFzc2VzIChvbGRDbGFzc2VzLCBuZXdDbGFzc2VzKSB7XHJcbiAgICAgICAgICB2YXIgdG9BZGQgPSBhcnJheURpZmZlcmVuY2UobmV3Q2xhc3Nlcywgb2xkQ2xhc3Nlcyk7XHJcbiAgICAgICAgICB2YXIgdG9SZW1vdmUgPSBhcnJheURpZmZlcmVuY2Uob2xkQ2xhc3NlcywgbmV3Q2xhc3Nlcyk7XHJcbiAgICAgICAgICB0b0FkZCA9IGRpZ2VzdENsYXNzQ291bnRzKHRvQWRkLCAxKTtcclxuICAgICAgICAgIHRvUmVtb3ZlID0gZGlnZXN0Q2xhc3NDb3VudHModG9SZW1vdmUsIC0xKTtcclxuICAgICAgICAgIGlmICh0b0FkZCAmJiB0b0FkZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgdG9BZGQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHRvUmVtb3ZlICYmIHRvUmVtb3ZlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LCB0b1JlbW92ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBuZ0NsYXNzV2F0Y2hBY3Rpb24obmV3VmFsKSB7XHJcbiAgICAgICAgICBpZiAoc2VsZWN0b3IgPT09IHRydWUgfHwgc2NvcGUuJGluZGV4ICUgMiA9PT0gc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgdmFyIG5ld0NsYXNzZXMgPSBhcnJheUNsYXNzZXMobmV3VmFsIHx8IFtdKTtcclxuICAgICAgICAgICAgaWYgKCFvbGRWYWwpIHtcclxuICAgICAgICAgICAgICBhZGRDbGFzc2VzKG5ld0NsYXNzZXMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFlcXVhbHMobmV3VmFsLG9sZFZhbCkpIHtcclxuICAgICAgICAgICAgICB2YXIgb2xkQ2xhc3NlcyA9IGFycmF5Q2xhc3NlcyhvbGRWYWwpO1xyXG4gICAgICAgICAgICAgIHVwZGF0ZUNsYXNzZXMob2xkQ2xhc3NlcywgbmV3Q2xhc3Nlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG9sZFZhbCA9IHNoYWxsb3dDb3B5KG5ld1ZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGFycmF5RGlmZmVyZW5jZSh0b2tlbnMxLCB0b2tlbnMyKSB7XHJcbiAgICAgIHZhciB2YWx1ZXMgPSBbXTtcclxuXHJcbiAgICAgIG91dGVyOlxyXG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdG9rZW5zMS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciB0b2tlbiA9IHRva2VuczFbaV07XHJcbiAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHRva2VuczIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIGlmKHRva2VuID09IHRva2VuczJbal0pIGNvbnRpbnVlIG91dGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWx1ZXMucHVzaCh0b2tlbik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhcnJheUNsYXNzZXMgKGNsYXNzVmFsKSB7XHJcbiAgICAgIGlmIChpc0FycmF5KGNsYXNzVmFsKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFzc1ZhbDtcclxuICAgICAgfSBlbHNlIGlmIChpc1N0cmluZyhjbGFzc1ZhbCkpIHtcclxuICAgICAgICByZXR1cm4gY2xhc3NWYWwuc3BsaXQoJyAnKTtcclxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChjbGFzc1ZhbCkpIHtcclxuICAgICAgICB2YXIgY2xhc3NlcyA9IFtdLCBpID0gMDtcclxuICAgICAgICBmb3JFYWNoKGNsYXNzVmFsLCBmdW5jdGlvbih2LCBrKSB7XHJcbiAgICAgICAgICBpZiAodikge1xyXG4gICAgICAgICAgICBjbGFzc2VzID0gY2xhc3Nlcy5jb25jYXQoay5zcGxpdCgnICcpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY2xhc3NlcztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY2xhc3NWYWw7XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ2xhc3NcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQ2xhc3NgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIGR5bmFtaWNhbGx5IHNldCBDU1MgY2xhc3NlcyBvbiBhbiBIVE1MIGVsZW1lbnQgYnkgZGF0YWJpbmRpbmdcclxuICogYW4gZXhwcmVzc2lvbiB0aGF0IHJlcHJlc2VudHMgYWxsIGNsYXNzZXMgdG8gYmUgYWRkZWQuXHJcbiAqXHJcbiAqIFRoZSBkaXJlY3RpdmUgb3BlcmF0ZXMgaW4gdGhyZWUgZGlmZmVyZW50IHdheXMsIGRlcGVuZGluZyBvbiB3aGljaCBvZiB0aHJlZSB0eXBlcyB0aGUgZXhwcmVzc2lvblxyXG4gKiBldmFsdWF0ZXMgdG86XHJcbiAqXHJcbiAqIDEuIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlIHN0cmluZyBzaG91bGQgYmUgb25lIG9yIG1vcmUgc3BhY2UtZGVsaW1pdGVkIGNsYXNzXHJcbiAqIG5hbWVzLlxyXG4gKlxyXG4gKiAyLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYW4gYXJyYXksIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXkgc2hvdWxkIGJlIGEgc3RyaW5nIHRoYXQgaXNcclxuICogb25lIG9yIG1vcmUgc3BhY2UtZGVsaW1pdGVkIGNsYXNzIG5hbWVzLlxyXG4gKlxyXG4gKiAzLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYW4gb2JqZWN0LCB0aGVuIGZvciBlYWNoIGtleS12YWx1ZSBwYWlyIG9mIHRoZVxyXG4gKiBvYmplY3Qgd2l0aCBhIHRydXRoeSB2YWx1ZSB0aGUgY29ycmVzcG9uZGluZyBrZXkgaXMgdXNlZCBhcyBhIGNsYXNzIG5hbWUuXHJcbiAqXHJcbiAqIFRoZSBkaXJlY3RpdmUgd29uJ3QgYWRkIGR1cGxpY2F0ZSBjbGFzc2VzIGlmIGEgcGFydGljdWxhciBjbGFzcyB3YXMgYWxyZWFkeSBzZXQuXHJcbiAqXHJcbiAqIFdoZW4gdGhlIGV4cHJlc3Npb24gY2hhbmdlcywgdGhlIHByZXZpb3VzbHkgYWRkZWQgY2xhc3NlcyBhcmUgcmVtb3ZlZCBhbmQgb25seSB0aGVuIHRoZVxyXG4gKiBuZXcgY2xhc3NlcyBhcmUgYWRkZWQuXHJcbiAqXHJcbiAqIEBhbmltYXRpb25zXHJcbiAqIGFkZCAtIGhhcHBlbnMganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnRcclxuICogcmVtb3ZlIC0gaGFwcGVucyBqdXN0IGJlZm9yZSB0aGUgY2xhc3MgaXMgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3Mge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlIHJlc3VsdFxyXG4gKiAgIG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzXHJcbiAqICAgbmFtZXMsIGFuIGFycmF5LCBvciBhIG1hcCBvZiBjbGFzcyBuYW1lcyB0byBib29sZWFuIHZhbHVlcy4gSW4gdGhlIGNhc2Ugb2YgYSBtYXAsIHRoZVxyXG4gKiAgIG5hbWVzIG9mIHRoZSBwcm9wZXJ0aWVzIHdob3NlIHZhbHVlcyBhcmUgdHJ1dGh5IHdpbGwgYmUgYWRkZWQgYXMgY3NzIGNsYXNzZXMgdG8gdGhlXHJcbiAqICAgZWxlbWVudC5cclxuICpcclxuICogQGV4YW1wbGUgRXhhbXBsZSB0aGF0IGRlbW9uc3RyYXRlcyBiYXNpYyBiaW5kaW5ncyB2aWEgbmdDbGFzcyBkaXJlY3RpdmUuXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8cCBuZy1jbGFzcz1cIntzdHJpa2U6IGRlbGV0ZWQsIGJvbGQ6IGltcG9ydGFudCwgcmVkOiBlcnJvcn1cIj5NYXAgU3ludGF4IEV4YW1wbGU8L3A+XHJcbiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJkZWxldGVkXCI+IGRlbGV0ZWQgKGFwcGx5IFwic3RyaWtlXCIgY2xhc3MpPGJyPlxyXG4gICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiaW1wb3J0YW50XCI+IGltcG9ydGFudCAoYXBwbHkgXCJib2xkXCIgY2xhc3MpPGJyPlxyXG4gICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiZXJyb3JcIj4gZXJyb3IgKGFwcGx5IFwicmVkXCIgY2xhc3MpXHJcbiAgICAgICA8aHI+XHJcbiAgICAgICA8cCBuZy1jbGFzcz1cInN0eWxlXCI+VXNpbmcgU3RyaW5nIFN5bnRheDwvcD5cclxuICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwic3R5bGVcIiBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQgc3RyaWtlIHJlZFwiPlxyXG4gICAgICAgPGhyPlxyXG4gICAgICAgPHAgbmctY2xhc3M9XCJbc3R5bGUxLCBzdHlsZTIsIHN0eWxlM11cIj5Vc2luZyBBcnJheSBTeW50YXg8L3A+XHJcbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTFcIiBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIj48YnI+XHJcbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTJcIiBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIj48YnI+XHJcbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTNcIiBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIj48YnI+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgIC5zdHJpa2Uge1xyXG4gICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcclxuICAgICAgIH1cclxuICAgICAgIC5ib2xkIHtcclxuICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgIH1cclxuICAgICAgIC5yZWQge1xyXG4gICAgICAgICAgIGNvbG9yOiByZWQ7XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIHZhciBwcyA9IGVsZW1lbnQuYWxsKGJ5LmNzcygncCcpKTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHRoZSBjbGFzcycsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgZXhwZWN0KHBzLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5ub3QudG9NYXRjaCgvYm9sZC8pO1xyXG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9yZWQvKTtcclxuXHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2ltcG9ydGFudCcpKS5jbGljaygpO1xyXG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL2JvbGQvKTtcclxuXHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2Vycm9yJykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvcmVkLyk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHN0cmluZyBleGFtcGxlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChwcy5nZXQoMSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b0JlKCcnKTtcclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUnKSkuY2xlYXIoKTtcclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUnKSkuc2VuZEtleXMoJ3JlZCcpO1xyXG4gICAgICAgICBleHBlY3QocHMuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgncmVkJyk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICBpdCgnYXJyYXkgZXhhbXBsZSBzaG91bGQgaGF2ZSAzIGNsYXNzZXMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KHBzLmxhc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJycpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTEnKSkuc2VuZEtleXMoJ2JvbGQnKTtcclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUyJykpLnNlbmRLZXlzKCdzdHJpa2UnKTtcclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUzJykpLnNlbmRLZXlzKCdyZWQnKTtcclxuICAgICAgICAgZXhwZWN0KHBzLmxhc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ2JvbGQgc3RyaWtlIHJlZCcpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcblxyXG4gICAjIyBBbmltYXRpb25zXHJcblxyXG4gICBUaGUgZXhhbXBsZSBiZWxvdyBkZW1vbnN0cmF0ZXMgaG93IHRvIHBlcmZvcm0gYW5pbWF0aW9ucyB1c2luZyBuZ0NsYXNzLlxyXG5cclxuICAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGlucHV0IGlkPVwic2V0YnRuXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwic2V0XCIgbmctY2xpY2s9XCJteVZhcj0nbXktY2xhc3MnXCI+XHJcbiAgICAgIDxpbnB1dCBpZD1cImNsZWFyYnRuXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiY2xlYXJcIiBuZy1jbGljaz1cIm15VmFyPScnXCI+XHJcbiAgICAgIDxicj5cclxuICAgICAgPHNwYW4gY2xhc3M9XCJiYXNlLWNsYXNzXCIgbmctY2xhc3M9XCJteVZhclwiPlNhbXBsZSBUZXh0PC9zcGFuPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XHJcbiAgICAgICAuYmFzZS1jbGFzcyB7XHJcbiAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xyXG4gICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgICB9XHJcblxyXG4gICAgICAgLmJhc2UtY2xhc3MubXktY2xhc3Mge1xyXG4gICAgICAgICBjb2xvcjogcmVkO1xyXG4gICAgICAgICBmb250LXNpemU6M2VtO1xyXG4gICAgICAgfVxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWNsYXNzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmJhc2UtY2xhc3MnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5ub3QuXHJcbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcclxuXHJcbiAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ3NldGJ0bicpKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxyXG4gICAgICAgICAgIHRvTWF0Y2goL215LWNsYXNzLyk7XHJcblxyXG4gICAgICAgICBlbGVtZW50KGJ5LmlkKCdjbGVhcmJ0bicpKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cclxuICAgICAgICAgICB0b01hdGNoKC9teS1jbGFzcy8pO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcblxyXG5cclxuICAgIyMgbmdDbGFzcyBhbmQgcHJlLWV4aXN0aW5nIENTUzMgVHJhbnNpdGlvbnMvQW5pbWF0aW9uc1xyXG4gICBUaGUgbmdDbGFzcyBkaXJlY3RpdmUgc3RpbGwgc3VwcG9ydHMgQ1NTMyBUcmFuc2l0aW9ucy9BbmltYXRpb25zIGV2ZW4gaWYgdGhleSBkbyBub3QgZm9sbG93IHRoZSBuZ0FuaW1hdGUgQ1NTIG5hbWluZyBzdHJ1Y3R1cmUuXHJcbiAgIFVwb24gYW5pbWF0aW9uIG5nQW5pbWF0ZSB3aWxsIGFwcGx5IHN1cHBsZW1lbnRhcnkgQ1NTIGNsYXNzZXMgdG8gdHJhY2sgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgYW4gYW5pbWF0aW9uLCBidXQgdGhpcyB3aWxsIG5vdCBoaW5kZXJcclxuICAgYW55IHByZS1leGlzdGluZyBDU1MgdHJhbnNpdGlvbnMgYWxyZWFkeSBvbiB0aGUgZWxlbWVudC4gVG8gZ2V0IGFuIGlkZWEgb2Ygd2hhdCBoYXBwZW5zIGR1cmluZyBhIGNsYXNzLWJhc2VkIGFuaW1hdGlvbiwgYmUgc3VyZVxyXG4gICB0byB2aWV3IHRoZSBzdGVwIGJ5IHN0ZXAgZGV0YWlscyBvZiB7QGxpbmsgbmdBbmltYXRlLiRhbmltYXRlI2FkZGNsYXNzICRhbmltYXRlLmFkZENsYXNzfSBhbmRcclxuICAge0BsaW5rIG5nQW5pbWF0ZS4kYW5pbWF0ZSNyZW1vdmVjbGFzcyAkYW5pbWF0ZS5yZW1vdmVDbGFzc30uXHJcbiAqL1xyXG52YXIgbmdDbGFzc0RpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCcnLCB0cnVlKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ2xhc3NPZGRcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQ2xhc3NPZGRgIGFuZCBgbmdDbGFzc0V2ZW5gIGRpcmVjdGl2ZXMgd29yayBleGFjdGx5IGFzXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxyXG4gKiBjb25qdW5jdGlvbiB3aXRoIGBuZ1JlcGVhdGAgYW5kIHRha2UgZWZmZWN0IG9ubHkgb24gb2RkIChldmVuKSByb3dzLlxyXG4gKlxyXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cclxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0uXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NPZGQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlIHJlc3VsdFxyXG4gKiAgIG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzIG5hbWVzIG9yIGFuIGFycmF5LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxvbCBuZy1pbml0PVwibmFtZXM9WydKb2huJywgJ01hcnknLCAnQ2F0ZScsICdTdXonXVwiPlxyXG4gICAgICAgICAgPGxpIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIj5cclxuICAgICAgICAgICA8c3BhbiBuZy1jbGFzcy1vZGQ9XCInb2RkJ1wiIG5nLWNsYXNzLWV2ZW49XCInZXZlbidcIj5cclxuICAgICAgICAgICAgIHt7bmFtZX19XHJcbiAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L29sPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XHJcbiAgICAgICAub2RkIHtcclxuICAgICAgICAgY29sb3I6IHJlZDtcclxuICAgICAgIH1cclxuICAgICAgIC5ldmVuIHtcclxuICAgICAgICAgY29sb3I6IGJsdWU7XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3Mtb2RkIGFuZCBuZy1jbGFzcy1ldmVuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDApLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxyXG4gICAgICAgICAgIHRvTWF0Y2goL29kZC8pO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygxKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cclxuICAgICAgICAgICB0b01hdGNoKC9ldmVuLyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ0NsYXNzT2RkRGlyZWN0aXZlID0gY2xhc3NEaXJlY3RpdmUoJ09kZCcsIDApO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDbGFzc0V2ZW5cclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQ2xhc3NPZGRgIGFuZCBgbmdDbGFzc0V2ZW5gIGRpcmVjdGl2ZXMgd29yayBleGFjdGx5IGFzXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxyXG4gKiBjb25qdW5jdGlvbiB3aXRoIGBuZ1JlcGVhdGAgYW5kIHRha2UgZWZmZWN0IG9ubHkgb24gb2RkIChldmVuKSByb3dzLlxyXG4gKlxyXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cclxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0uXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NFdmVuIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuIFRoZVxyXG4gKiAgIHJlc3VsdCBvZiB0aGUgZXZhbHVhdGlvbiBjYW4gYmUgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHNwYWNlIGRlbGltaXRlZCBjbGFzcyBuYW1lcyBvciBhbiBhcnJheS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8b2wgbmctaW5pdD1cIm5hbWVzPVsnSm9obicsICdNYXJ5JywgJ0NhdGUnLCAnU3V6J11cIj5cclxuICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJuYW1lIGluIG5hbWVzXCI+XHJcbiAgICAgICAgICAgPHNwYW4gbmctY2xhc3Mtb2RkPVwiJ29kZCdcIiBuZy1jbGFzcy1ldmVuPVwiJ2V2ZW4nXCI+XHJcbiAgICAgICAgICAgICB7e25hbWV9fSAmbmJzcDsgJm5ic3A7ICZuYnNwO1xyXG4gICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgPC9vbD5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICAgICAgLm9kZCB7XHJcbiAgICAgICAgIGNvbG9yOiByZWQ7XHJcbiAgICAgICB9XHJcbiAgICAgICAuZXZlbiB7XHJcbiAgICAgICAgIGNvbG9yOiBibHVlO1xyXG4gICAgICAgfVxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWNsYXNzLW9kZCBhbmQgbmctY2xhc3MtZXZlbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygwKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cclxuICAgICAgICAgICB0b01hdGNoKC9vZGQvKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMSkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXHJcbiAgICAgICAgICAgdG9NYXRjaCgvZXZlbi8pO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdDbGFzc0V2ZW5EaXJlY3RpdmUgPSBjbGFzc0RpcmVjdGl2ZSgnRXZlbicsIDEpO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDbG9ha1xyXG4gKiBAcmVzdHJpY3QgQUNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdDbG9ha2AgZGlyZWN0aXZlIGlzIHVzZWQgdG8gcHJldmVudCB0aGUgQW5ndWxhciBodG1sIHRlbXBsYXRlIGZyb20gYmVpbmcgYnJpZWZseVxyXG4gKiBkaXNwbGF5ZWQgYnkgdGhlIGJyb3dzZXIgaW4gaXRzIHJhdyAodW5jb21waWxlZCkgZm9ybSB3aGlsZSB5b3VyIGFwcGxpY2F0aW9uIGlzIGxvYWRpbmcuIFVzZSB0aGlzXHJcbiAqIGRpcmVjdGl2ZSB0byBhdm9pZCB0aGUgdW5kZXNpcmFibGUgZmxpY2tlciBlZmZlY3QgY2F1c2VkIGJ5IHRoZSBodG1sIHRlbXBsYXRlIGRpc3BsYXkuXHJcbiAqXHJcbiAqIFRoZSBkaXJlY3RpdmUgY2FuIGJlIGFwcGxpZWQgdG8gdGhlIGA8Ym9keT5gIGVsZW1lbnQsIGJ1dCB0aGUgcHJlZmVycmVkIHVzYWdlIGlzIHRvIGFwcGx5XHJcbiAqIG11bHRpcGxlIGBuZ0Nsb2FrYCBkaXJlY3RpdmVzIHRvIHNtYWxsIHBvcnRpb25zIG9mIHRoZSBwYWdlIHRvIHBlcm1pdCBwcm9ncmVzc2l2ZSByZW5kZXJpbmdcclxuICogb2YgdGhlIGJyb3dzZXIgdmlldy5cclxuICpcclxuICogYG5nQ2xvYWtgIHdvcmtzIGluIGNvb3BlcmF0aW9uIHdpdGggdGhlIGZvbGxvd2luZyBjc3MgcnVsZSBlbWJlZGRlZCB3aXRoaW4gYGFuZ3VsYXIuanNgIGFuZFxyXG4gKiBgYW5ndWxhci5taW4uanNgLlxyXG4gKiBGb3IgQ1NQIG1vZGUgcGxlYXNlIGFkZCBgYW5ndWxhci1jc3AuY3NzYCB0byB5b3VyIGh0bWwgZmlsZSAoc2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cclxuICpcclxuICogYGBgY3NzXHJcbiAqIFtuZ1xcOmNsb2FrXSwgW25nLWNsb2FrXSwgW2RhdGEtbmctY2xvYWtdLCBbeC1uZy1jbG9ha10sIC5uZy1jbG9haywgLngtbmctY2xvYWsge1xyXG4gKiAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogV2hlbiB0aGlzIGNzcyBydWxlIGlzIGxvYWRlZCBieSB0aGUgYnJvd3NlciwgYWxsIGh0bWwgZWxlbWVudHMgKGluY2x1ZGluZyB0aGVpciBjaGlsZHJlbikgdGhhdFxyXG4gKiBhcmUgdGFnZ2VkIHdpdGggdGhlIGBuZ0Nsb2FrYCBkaXJlY3RpdmUgYXJlIGhpZGRlbi4gV2hlbiBBbmd1bGFyIGVuY291bnRlcnMgdGhpcyBkaXJlY3RpdmVcclxuICogZHVyaW5nIHRoZSBjb21waWxhdGlvbiBvZiB0aGUgdGVtcGxhdGUgaXQgZGVsZXRlcyB0aGUgYG5nQ2xvYWtgIGVsZW1lbnQgYXR0cmlidXRlLCBtYWtpbmdcclxuICogdGhlIGNvbXBpbGVkIGVsZW1lbnQgdmlzaWJsZS5cclxuICpcclxuICogRm9yIHRoZSBiZXN0IHJlc3VsdCwgdGhlIGBhbmd1bGFyLmpzYCBzY3JpcHQgbXVzdCBiZSBsb2FkZWQgaW4gdGhlIGhlYWQgc2VjdGlvbiBvZiB0aGUgaHRtbFxyXG4gKiBkb2N1bWVudDsgYWx0ZXJuYXRpdmVseSwgdGhlIGNzcyBydWxlIGFib3ZlIG11c3QgYmUgaW5jbHVkZWQgaW4gdGhlIGV4dGVybmFsIHN0eWxlc2hlZXQgb2YgdGhlXHJcbiAqIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gKiBMZWdhY3kgYnJvd3NlcnMsIGxpa2UgSUU3LCBkbyBub3QgcHJvdmlkZSBhdHRyaWJ1dGUgc2VsZWN0b3Igc3VwcG9ydCAoYWRkZWQgaW4gQ1NTIDIuMSkgc28gdGhleVxyXG4gKiBjYW5ub3QgbWF0Y2ggdGhlIGBbbmdcXDpjbG9ha11gIHNlbGVjdG9yLiBUbyB3b3JrIGFyb3VuZCB0aGlzIGxpbWl0YXRpb24sIHlvdSBtdXN0IGFkZCB0aGUgY3NzXHJcbiAqIGNsYXNzIGBuZy1jbG9ha2AgaW4gYWRkaXRpb24gdG8gdGhlIGBuZ0Nsb2FrYCBkaXJlY3RpdmUgYXMgc2hvd24gaW4gdGhlIGV4YW1wbGUgYmVsb3cuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxkaXYgaWQ9XCJ0ZW1wbGF0ZTFcIiBuZy1jbG9haz57eyAnaGVsbG8nIH19PC9kaXY+XHJcbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMlwiIG5nLWNsb2FrIGNsYXNzPVwibmctY2xvYWtcIj57eyAnaGVsbG8gSUU3JyB9fTwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIHJlbW92ZSB0aGUgdGVtcGxhdGUgZGlyZWN0aXZlIGFuZCBjc3MgY2xhc3MnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KCQoJyN0ZW1wbGF0ZTEnKS5nZXRBdHRyaWJ1dGUoJ25nLWNsb2FrJykpLlxyXG4gICAgICAgICAgIHRvQmVOdWxsKCk7XHJcbiAgICAgICAgIGV4cGVjdCgkKCcjdGVtcGxhdGUyJykuZ2V0QXR0cmlidXRlKCduZy1jbG9haycpKS5cclxuICAgICAgICAgICB0b0JlTnVsbCgpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqL1xyXG52YXIgbmdDbG9ha0RpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcclxuICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XHJcbiAgICBhdHRyLiRzZXQoJ25nQ2xvYWsnLCB1bmRlZmluZWQpO1xyXG4gICAgZWxlbWVudC5yZW1vdmVDbGFzcygnbmctY2xvYWsnKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDb250cm9sbGVyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlIGF0dGFjaGVzIGEgY29udHJvbGxlciBjbGFzcyB0byB0aGUgdmlldy4gVGhpcyBpcyBhIGtleSBhc3BlY3Qgb2YgaG93IGFuZ3VsYXJcclxuICogc3VwcG9ydHMgdGhlIHByaW5jaXBsZXMgYmVoaW5kIHRoZSBNb2RlbC1WaWV3LUNvbnRyb2xsZXIgZGVzaWduIHBhdHRlcm4uXHJcbiAqXHJcbiAqIE1WQyBjb21wb25lbnRzIGluIGFuZ3VsYXI6XHJcbiAqXHJcbiAqICogTW9kZWwg4oCUIE1vZGVscyBhcmUgdGhlIHByb3BlcnRpZXMgb2YgYSBzY29wZTsgc2NvcGVzIGFyZSBhdHRhY2hlZCB0byB0aGUgRE9NIHdoZXJlIHNjb3BlIHByb3BlcnRpZXNcclxuICogICBhcmUgYWNjZXNzZWQgdGhyb3VnaCBiaW5kaW5ncy5cclxuICogKiBWaWV3IOKAlCBUaGUgdGVtcGxhdGUgKEhUTUwgd2l0aCBkYXRhIGJpbmRpbmdzKSB0aGF0IGlzIHJlbmRlcmVkIGludG8gdGhlIFZpZXcuXHJcbiAqICogQ29udHJvbGxlciDigJQgVGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZSBzcGVjaWZpZXMgYSBDb250cm9sbGVyIGNsYXNzOyB0aGUgY2xhc3MgY29udGFpbnMgYnVzaW5lc3NcclxuICogICBsb2dpYyBiZWhpbmQgdGhlIGFwcGxpY2F0aW9uIHRvIGRlY29yYXRlIHRoZSBzY29wZSB3aXRoIGZ1bmN0aW9ucyBhbmQgdmFsdWVzXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB5b3UgY2FuIGFsc28gYXR0YWNoIGNvbnRyb2xsZXJzIHRvIHRoZSBET00gYnkgZGVjbGFyaW5nIGl0IGluIGEgcm91dGUgZGVmaW5pdGlvblxyXG4gKiB2aWEgdGhlIHtAbGluayBuZ1JvdXRlLiRyb3V0ZSAkcm91dGV9IHNlcnZpY2UuIEEgY29tbW9uIG1pc3Rha2UgaXMgdG8gZGVjbGFyZSB0aGUgY29udHJvbGxlclxyXG4gKiBhZ2FpbiB1c2luZyBgbmctY29udHJvbGxlcmAgaW4gdGhlIHRlbXBsYXRlIGl0c2VsZi4gIFRoaXMgd2lsbCBjYXVzZSB0aGUgY29udHJvbGxlciB0byBiZSBhdHRhY2hlZFxyXG4gKiBhbmQgZXhlY3V0ZWQgdHdpY2UuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAc2NvcGVcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NvbnRyb2xsZXIgTmFtZSBvZiBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHJlZ2lzdGVyZWQgd2l0aCB0aGUgY3VycmVudFxyXG4gKiB7QGxpbmsgbmcuJGNvbnRyb2xsZXJQcm92aWRlciAkY29udHJvbGxlclByb3ZpZGVyfSBvciBhbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufVxyXG4gKiB0aGF0IG9uIHRoZSBjdXJyZW50IHNjb3BlIGV2YWx1YXRlcyB0byBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBUaGUgY29udHJvbGxlciBpbnN0YW5jZSBjYW4gYmUgcHVibGlzaGVkIGludG8gYSBzY29wZSBwcm9wZXJ0eSBieSBzcGVjaWZ5aW5nXHJcbiAqIGBuZy1jb250cm9sbGVyPVwiYXMgcHJvcGVydHlOYW1lXCJgLlxyXG4gKlxyXG4gKiBJZiB0aGUgY3VycmVudCBgJGNvbnRyb2xsZXJQcm92aWRlcmAgaXMgY29uZmlndXJlZCB0byB1c2UgZ2xvYmFscyAodmlhXHJcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI2FsbG93R2xvYmFscyBgJGNvbnRyb2xsZXJQcm92aWRlci5hbGxvd0dsb2JhbHMoKWAgfSksIHRoaXMgbWF5XHJcbiAqIGFsc28gYmUgdGhlIG5hbWUgb2YgYSBnbG9iYWxseSBhY2Nlc3NpYmxlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIChub3QgcmVjb21tZW5kZWQpLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBIZXJlIGlzIGEgc2ltcGxlIGZvcm0gZm9yIGVkaXRpbmcgdXNlciBjb250YWN0IGluZm9ybWF0aW9uLiBBZGRpbmcsIHJlbW92aW5nLCBjbGVhcmluZywgYW5kXHJcbiAqIGdyZWV0aW5nIGFyZSBtZXRob2RzIGRlY2xhcmVkIG9uIHRoZSBjb250cm9sbGVyIChzZWUgc291cmNlIHRhYikuIFRoZXNlIG1ldGhvZHMgY2FuXHJcbiAqIGVhc2lseSBiZSBjYWxsZWQgZnJvbSB0aGUgYW5ndWxhciBtYXJrdXAuIEFueSBjaGFuZ2VzIHRvIHRoZSBkYXRhIGFyZSBhdXRvbWF0aWNhbGx5IHJlZmxlY3RlZFxyXG4gKiBpbiB0aGUgVmlldyB3aXRob3V0IHRoZSBuZWVkIGZvciBhIG1hbnVhbCB1cGRhdGUuXHJcbiAqXHJcbiAqIFR3byBkaWZmZXJlbnQgZGVjbGFyYXRpb24gc3R5bGVzIGFyZSBpbmNsdWRlZCBiZWxvdzpcclxuICpcclxuICogKiBvbmUgYmluZHMgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBkaXJlY3RseSBvbnRvIHRoZSBjb250cm9sbGVyIHVzaW5nIGB0aGlzYDpcclxuICogYG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIxIGFzIHNldHRpbmdzXCJgXHJcbiAqICogb25lIGluamVjdHMgYCRzY29wZWAgaW50byB0aGUgY29udHJvbGxlcjpcclxuICogYG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIyXCJgXHJcbiAqXHJcbiAqIFRoZSBzZWNvbmQgb3B0aW9uIGlzIG1vcmUgY29tbW9uIGluIHRoZSBBbmd1bGFyIGNvbW11bml0eSwgYW5kIGlzIGdlbmVyYWxseSB1c2VkIGluIGJvaWxlcnBsYXRlc1xyXG4gKiBhbmQgaW4gdGhpcyBndWlkZS4gSG93ZXZlciwgdGhlcmUgYXJlIGFkdmFudGFnZXMgdG8gYmluZGluZyBwcm9wZXJ0aWVzIGRpcmVjdGx5IHRvIHRoZSBjb250cm9sbGVyXHJcbiAqIGFuZCBhdm9pZGluZyBzY29wZS5cclxuICpcclxuICogKiBVc2luZyBgY29udHJvbGxlciBhc2AgbWFrZXMgaXQgb2J2aW91cyB3aGljaCBjb250cm9sbGVyIHlvdSBhcmUgYWNjZXNzaW5nIGluIHRoZSB0ZW1wbGF0ZSB3aGVuXHJcbiAqIG11bHRpcGxlIGNvbnRyb2xsZXJzIGFwcGx5IHRvIGFuIGVsZW1lbnQuXHJcbiAqICogSWYgeW91IGFyZSB3cml0aW5nIHlvdXIgY29udHJvbGxlcnMgYXMgY2xhc3NlcyB5b3UgaGF2ZSBlYXNpZXIgYWNjZXNzIHRvIHRoZSBwcm9wZXJ0aWVzIGFuZFxyXG4gKiBtZXRob2RzLCB3aGljaCB3aWxsIGFwcGVhciBvbiB0aGUgc2NvcGUsIGZyb20gaW5zaWRlIHRoZSBjb250cm9sbGVyIGNvZGUuXHJcbiAqICogU2luY2UgdGhlcmUgaXMgYWx3YXlzIGEgYC5gIGluIHRoZSBiaW5kaW5ncywgeW91IGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgcHJvdG90eXBhbFxyXG4gKiBpbmhlcml0YW5jZSBtYXNraW5nIHByaW1pdGl2ZXMuXHJcbiAqXHJcbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdGhlIGBjb250cm9sbGVyIGFzYCBzeW50YXguXHJcbiAqXHJcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0NvbnRyb2xsZXJBc1wiIG1vZHVsZT1cImNvbnRyb2xsZXJBc0V4YW1wbGVcIj5cclxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgICA8ZGl2IGlkPVwiY3RybC1hcy1leG1wbFwiIG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIxIGFzIHNldHRpbmdzXCI+XHJcbiAqICAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzZXR0aW5ncy5uYW1lXCIvPlxyXG4gKiAgICAgIFsgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwic2V0dGluZ3MuZ3JlZXQoKVwiPmdyZWV0PC9hPiBdPGJyLz5cclxuICogICAgICBDb250YWN0OlxyXG4gKiAgICAgIDx1bD5cclxuICogICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzXCI+XHJcbiAqICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJjb250YWN0LnR5cGVcIj5cclxuICogICAgICAgICAgICAgPG9wdGlvbj5waG9uZTwvb3B0aW9uPlxyXG4gKiAgICAgICAgICAgICA8b3B0aW9uPmVtYWlsPC9vcHRpb24+XHJcbiAqICAgICAgICAgIDwvc2VsZWN0PlxyXG4gKiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbnRhY3QudmFsdWVcIi8+XHJcbiAqICAgICAgICAgIFsgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwic2V0dGluZ3MuY2xlYXJDb250YWN0KGNvbnRhY3QpXCI+Y2xlYXI8L2E+XHJcbiAqICAgICAgICAgIHwgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwic2V0dGluZ3MucmVtb3ZlQ29udGFjdChjb250YWN0KVwiPlg8L2E+IF1cclxuICogICAgICAgIDwvbGk+XHJcbiAqICAgICAgICA8bGk+WyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJzZXR0aW5ncy5hZGRDb250YWN0KClcIj5hZGQ8L2E+IF08L2xpPlxyXG4gKiAgICAgPC91bD5cclxuICogICAgPC9kaXY+XHJcbiAqICAgPC9maWxlPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cclxuICogICAgYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2xsZXJBc0V4YW1wbGUnLCBbXSlcclxuICogICAgICAuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyMScsIFNldHRpbmdzQ29udHJvbGxlcjEpO1xyXG4gKlxyXG4gKiAgICBmdW5jdGlvbiBTZXR0aW5nc0NvbnRyb2xsZXIxKCkge1xyXG4gKiAgICAgIHRoaXMubmFtZSA9IFwiSm9obiBTbWl0aFwiO1xyXG4gKiAgICAgIHRoaXMuY29udGFjdHMgPSBbXHJcbiAqICAgICAgICB7dHlwZTogJ3Bob25lJywgdmFsdWU6ICc0MDggNTU1IDEyMTInfSxcclxuICogICAgICAgIHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnfSBdO1xyXG4gKiAgICB9XHJcbiAqXHJcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmdyZWV0ID0gZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgYWxlcnQodGhpcy5uYW1lKTtcclxuICogICAgfTtcclxuICpcclxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUuYWRkQ29udGFjdCA9IGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgIHRoaXMuY29udGFjdHMucHVzaCh7dHlwZTogJ2VtYWlsJywgdmFsdWU6ICd5b3VybmFtZUBleGFtcGxlLm9yZyd9KTtcclxuICogICAgfTtcclxuICpcclxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUucmVtb3ZlQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3RUb1JlbW92ZSkge1xyXG4gKiAgICAgdmFyIGluZGV4ID0gdGhpcy5jb250YWN0cy5pbmRleE9mKGNvbnRhY3RUb1JlbW92ZSk7XHJcbiAqICAgICAgdGhpcy5jb250YWN0cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gKiAgICB9O1xyXG4gKlxyXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5jbGVhckNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XHJcbiAqICAgICAgY29udGFjdC50eXBlID0gJ3Bob25lJztcclxuICogICAgICBjb250YWN0LnZhbHVlID0gJyc7XHJcbiAqICAgIH07XHJcbiAqICAgPC9maWxlPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICogICAgIGl0KCdzaG91bGQgY2hlY2sgY29udHJvbGxlciBhcycsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5pZCgnY3RybC1hcy1leG1wbCcpKTtcclxuICogICAgICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkubW9kZWwoJ3NldHRpbmdzLm5hbWUnKSlcclxuICogICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJ0pvaG4gU21pdGgnKTtcclxuICpcclxuICogICAgICAgdmFyIGZpcnN0UmVwZWF0ID1cclxuICogICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzJykucm93KDApKTtcclxuICogICAgICAgdmFyIHNlY29uZFJlcGVhdCA9XHJcbiAqICAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygxKSk7XHJcbiAqXHJcbiAqICAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcclxuICogICAgICAgICAgIC50b0JlKCc0MDggNTU1IDEyMTInKTtcclxuICpcclxuICogICAgICAgZXhwZWN0KHNlY29uZFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcclxuICogICAgICAgICAgIC50b0JlKCdqb2huLnNtaXRoQGV4YW1wbGUub3JnJyk7XHJcbiAqXHJcbiAqICAgICAgIGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubGlua1RleHQoJ2NsZWFyJykpLmNsaWNrKCk7XHJcbiAqXHJcbiAqICAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcclxuICogICAgICAgICAgIC50b0JlKCcnKTtcclxuICpcclxuICogICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkubGlua1RleHQoJ2FkZCcpKS5jbGljaygpO1xyXG4gKlxyXG4gKiAgICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHMnKS5yb3coMikpXHJcbiAqICAgICAgICAgICAuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcclxuICogICAgICAgICAgIC50b0JlKCd5b3VybmFtZUBleGFtcGxlLm9yZycpO1xyXG4gKiAgICAgfSk7XHJcbiAqICAgPC9maWxlPlxyXG4gKiA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdGhlIFwiYXR0YWNoIHRvIGAkc2NvcGVgXCIgc3R5bGUgb2YgY29udHJvbGxlci5cclxuICpcclxuICogPGV4YW1wbGUgbmFtZT1cIm5nQ29udHJvbGxlclwiIG1vZHVsZT1cImNvbnRyb2xsZXJFeGFtcGxlXCI+XHJcbiAqICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgIDxkaXYgaWQ9XCJjdHJsLWV4bXBsXCIgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcIj5cclxuICogICAgIE5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiLz5cclxuICogICAgIFsgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwiZ3JlZXQoKVwiPmdyZWV0PC9hPiBdPGJyLz5cclxuICogICAgIENvbnRhY3Q6XHJcbiAqICAgICA8dWw+XHJcbiAqICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XHJcbiAqICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cImNvbnRhY3QudHlwZVwiPlxyXG4gKiAgICAgICAgICAgIDxvcHRpb24+cGhvbmU8L29wdGlvbj5cclxuICogICAgICAgICAgICA8b3B0aW9uPmVtYWlsPC9vcHRpb24+XHJcbiAqICAgICAgICAgPC9zZWxlY3Q+XHJcbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJjb250YWN0LnZhbHVlXCIvPlxyXG4gKiAgICAgICAgIFsgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwiY2xlYXJDb250YWN0KGNvbnRhY3QpXCI+Y2xlYXI8L2E+XHJcbiAqICAgICAgICAgfCA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJyZW1vdmVDb250YWN0KGNvbnRhY3QpXCI+WDwvYT4gXVxyXG4gKiAgICAgICA8L2xpPlxyXG4gKiAgICAgICA8bGk+WyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJhZGRDb250YWN0KClcIj5hZGQ8L2E+IF08L2xpPlxyXG4gKiAgICA8L3VsPlxyXG4gKiAgIDwvZGl2PlxyXG4gKiAgPC9maWxlPlxyXG4gKiAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gKiAgIGFuZ3VsYXIubW9kdWxlKCdjb250cm9sbGVyRXhhbXBsZScsIFtdKVxyXG4gKiAgICAgLmNvbnRyb2xsZXIoJ1NldHRpbmdzQ29udHJvbGxlcjInLCBbJyRzY29wZScsIFNldHRpbmdzQ29udHJvbGxlcjJdKTtcclxuICpcclxuICogICBmdW5jdGlvbiBTZXR0aW5nc0NvbnRyb2xsZXIyKCRzY29wZSkge1xyXG4gKiAgICAgJHNjb3BlLm5hbWUgPSBcIkpvaG4gU21pdGhcIjtcclxuICogICAgICRzY29wZS5jb250YWN0cyA9IFtcclxuICogICAgICAge3R5cGU6J3Bob25lJywgdmFsdWU6JzQwOCA1NTUgMTIxMid9LFxyXG4gKiAgICAgICB7dHlwZTonZW1haWwnLCB2YWx1ZTonam9obi5zbWl0aEBleGFtcGxlLm9yZyd9IF07XHJcbiAqXHJcbiAqICAgICAkc2NvcGUuZ3JlZXQgPSBmdW5jdGlvbigpIHtcclxuICogICAgICAgYWxlcnQoJHNjb3BlLm5hbWUpO1xyXG4gKiAgICAgfTtcclxuICpcclxuICogICAgICRzY29wZS5hZGRDb250YWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgICRzY29wZS5jb250YWN0cy5wdXNoKHt0eXBlOidlbWFpbCcsIHZhbHVlOid5b3VybmFtZUBleGFtcGxlLm9yZyd9KTtcclxuICogICAgIH07XHJcbiAqXHJcbiAqICAgICAkc2NvcGUucmVtb3ZlQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3RUb1JlbW92ZSkge1xyXG4gKiAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY29udGFjdHMuaW5kZXhPZihjb250YWN0VG9SZW1vdmUpO1xyXG4gKiAgICAgICAkc2NvcGUuY29udGFjdHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICogICAgIH07XHJcbiAqXHJcbiAqICAgICAkc2NvcGUuY2xlYXJDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge1xyXG4gKiAgICAgICBjb250YWN0LnR5cGUgPSAncGhvbmUnO1xyXG4gKiAgICAgICBjb250YWN0LnZhbHVlID0gJyc7XHJcbiAqICAgICB9O1xyXG4gKiAgIH1cclxuICogIDwvZmlsZT5cclxuICogIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICogICAgaXQoJ3Nob3VsZCBjaGVjayBjb250cm9sbGVyJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgdmFyIGNvbnRhaW5lciA9IGVsZW1lbnQoYnkuaWQoJ2N0cmwtZXhtcGwnKSk7XHJcbiAqXHJcbiAqICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5Lm1vZGVsKCduYW1lJykpXHJcbiAqICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJ0pvaG4gU21pdGgnKTtcclxuICpcclxuICogICAgICB2YXIgZmlyc3RSZXBlYXQgPVxyXG4gKiAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBjb250YWN0cycpLnJvdygwKSk7XHJcbiAqICAgICAgdmFyIHNlY29uZFJlcGVhdCA9XHJcbiAqICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDEpKTtcclxuICpcclxuICogICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXHJcbiAqICAgICAgICAgIC50b0JlKCc0MDggNTU1IDEyMTInKTtcclxuICogICAgICBleHBlY3Qoc2Vjb25kUmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAudG9CZSgnam9obi5zbWl0aEBleGFtcGxlLm9yZycpO1xyXG4gKlxyXG4gKiAgICAgIGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubGlua1RleHQoJ2NsZWFyJykpLmNsaWNrKCk7XHJcbiAqXHJcbiAqICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAudG9CZSgnJyk7XHJcbiAqXHJcbiAqICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkubGlua1RleHQoJ2FkZCcpKS5jbGljaygpO1xyXG4gKlxyXG4gKiAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBjb250YWN0cycpLnJvdygyKSlcclxuICogICAgICAgICAgLmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSlcclxuICogICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcclxuICogICAgICAgICAgLnRvQmUoJ3lvdXJuYW1lQGV4YW1wbGUub3JnJyk7XHJcbiAqICAgIH0pO1xyXG4gKiAgPC9maWxlPlxyXG4gKjwvZXhhbXBsZT5cclxuXHJcbiAqL1xyXG52YXIgbmdDb250cm9sbGVyRGlyZWN0aXZlID0gW2Z1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgc2NvcGU6IHRydWUsXHJcbiAgICBjb250cm9sbGVyOiAnQCcsXHJcbiAgICBwcmlvcml0eTogNTAwXHJcbiAgfTtcclxufV07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0NzcFxyXG4gKlxyXG4gKiBAZWxlbWVudCBodG1sXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFbmFibGVzIFtDU1AgKENvbnRlbnQgU2VjdXJpdHkgUG9saWN5KV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vU2VjdXJpdHkvQ1NQKSBzdXBwb3J0LlxyXG4gKlxyXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB3aGVuIGRldmVsb3BpbmcgdGhpbmdzIGxpa2UgR29vZ2xlIENocm9tZSBFeHRlbnNpb25zLlxyXG4gKlxyXG4gKiBDU1AgZm9yYmlkcyBhcHBzIHRvIHVzZSBgZXZhbGAgb3IgYEZ1bmN0aW9uKHN0cmluZylgIGdlbmVyYXRlZCBmdW5jdGlvbnMgKGFtb25nIG90aGVyIHRoaW5ncykuXHJcbiAqIEZvciBBbmd1bGFyIHRvIGJlIENTUCBjb21wYXRpYmxlIHRoZXJlIGFyZSBvbmx5IHR3byB0aGluZ3MgdGhhdCB3ZSBuZWVkIHRvIGRvIGRpZmZlcmVudGx5OlxyXG4gKlxyXG4gKiAtIGRvbid0IHVzZSBgRnVuY3Rpb25gIGNvbnN0cnVjdG9yIHRvIGdlbmVyYXRlIG9wdGltaXplZCB2YWx1ZSBnZXR0ZXJzXHJcbiAqIC0gZG9uJ3QgaW5qZWN0IGN1c3RvbSBzdHlsZXNoZWV0IGludG8gdGhlIGRvY3VtZW50XHJcbiAqXHJcbiAqIEFuZ3VsYXJKUyB1c2VzIGBGdW5jdGlvbihzdHJpbmcpYCBnZW5lcmF0ZWQgZnVuY3Rpb25zIGFzIGEgc3BlZWQgb3B0aW1pemF0aW9uLiBBcHBseWluZyB0aGUgYG5nQ3NwYFxyXG4gKiBkaXJlY3RpdmUgd2lsbCBjYXVzZSBBbmd1bGFyIHRvIHVzZSBDU1AgY29tcGF0aWJpbGl0eSBtb2RlLiBXaGVuIHRoaXMgbW9kZSBpcyBvbiBBbmd1bGFySlMgd2lsbFxyXG4gKiBldmFsdWF0ZSBhbGwgZXhwcmVzc2lvbnMgdXAgdG8gMzAlIHNsb3dlciB0aGFuIGluIG5vbi1DU1AgbW9kZSwgYnV0IG5vIHNlY3VyaXR5IHZpb2xhdGlvbnMgd2lsbFxyXG4gKiBiZSByYWlzZWQuXHJcbiAqXHJcbiAqIENTUCBmb3JiaWRzIEphdmFTY3JpcHQgdG8gaW5saW5lIHN0eWxlc2hlZXQgcnVsZXMuIEluIG5vbiBDU1AgbW9kZSBBbmd1bGFyIGF1dG9tYXRpY2FsbHlcclxuICogaW5jbHVkZXMgc29tZSBDU1MgcnVsZXMgKGUuZy4ge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0Nsb2FrIG5nQ2xvYWt9KS5cclxuICogVG8gbWFrZSB0aG9zZSBkaXJlY3RpdmVzIHdvcmsgaW4gQ1NQIG1vZGUsIGluY2x1ZGUgdGhlIGBhbmd1bGFyLWNzcC5jc3NgIG1hbnVhbGx5LlxyXG4gKlxyXG4gKiBBbmd1bGFyIHRyaWVzIHRvIGF1dG9kZXRlY3QgaWYgQ1NQIGlzIGFjdGl2ZSBhbmQgYXV0b21hdGljYWxseSB0dXJuIG9uIHRoZSBDU1Atc2FmZSBtb2RlLiBUaGlzXHJcbiAqIGF1dG9kZXRlY3Rpb24gaG93ZXZlciB0cmlnZ2VycyBhIENTUCBlcnJvciB0byBiZSBsb2dnZWQgaW4gdGhlIGNvbnNvbGU6XHJcbiAqXHJcbiAqIGBgYFxyXG4gKiBSZWZ1c2VkIHRvIGV2YWx1YXRlIGEgc3RyaW5nIGFzIEphdmFTY3JpcHQgYmVjYXVzZSAndW5zYWZlLWV2YWwnIGlzIG5vdCBhbiBhbGxvd2VkIHNvdXJjZSBvZlxyXG4gKiBzY3JpcHQgaW4gdGhlIGZvbGxvd2luZyBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBkaXJlY3RpdmU6IFwiZGVmYXVsdC1zcmMgJ3NlbGYnXCIuIE5vdGUgdGhhdFxyXG4gKiAnc2NyaXB0LXNyYycgd2FzIG5vdCBleHBsaWNpdGx5IHNldCwgc28gJ2RlZmF1bHQtc3JjJyBpcyB1c2VkIGFzIGEgZmFsbGJhY2suXHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGlzIGVycm9yIGlzIGhhcm1sZXNzIGJ1dCBhbm5veWluZy4gVG8gcHJldmVudCB0aGUgZXJyb3IgZnJvbSBzaG93aW5nIHVwLCBwdXQgdGhlIGBuZ0NzcGBcclxuICogZGlyZWN0aXZlIG9uIHRoZSByb290IGVsZW1lbnQgb2YgdGhlIGFwcGxpY2F0aW9uIG9yIG9uIHRoZSBgYW5ndWxhci5qc2Agc2NyaXB0IHRhZywgd2hpY2hldmVyXHJcbiAqIGFwcGVhcnMgZmlyc3QgaW4gdGhlIGh0bWwgZG9jdW1lbnQuXHJcbiAqXHJcbiAqICpOb3RlOiBUaGlzIGRpcmVjdGl2ZSBpcyBvbmx5IGF2YWlsYWJsZSBpbiB0aGUgYG5nLWNzcGAgYW5kIGBkYXRhLW5nLWNzcGAgYXR0cmlidXRlIGZvcm0uKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHRvIGFwcGx5IHRoZSBgbmdDc3BgIGRpcmVjdGl2ZSB0byB0aGUgYGh0bWxgIHRhZy5cclxuICAgYGBgaHRtbFxyXG4gICAgIDwhZG9jdHlwZSBodG1sPlxyXG4gICAgIDxodG1sIG5nLWFwcCBuZy1jc3A+XHJcbiAgICAgLi4uXHJcbiAgICAgLi4uXHJcbiAgICAgPC9odG1sPlxyXG4gICBgYGBcclxuICovXHJcblxyXG4vLyBuZ0NzcCBpcyBub3QgaW1wbGVtZW50ZWQgYXMgYSBwcm9wZXIgZGlyZWN0aXZlIGFueSBtb3JlLCBiZWNhdXNlIHdlIG5lZWQgaXQgYmUgcHJvY2Vzc2VkIHdoaWxlIHdlXHJcbi8vIGJvb3RzdHJhcCB0aGUgc3lzdGVtIChiZWZvcmUgJHBhcnNlIGlzIGluc3RhbnRpYXRlZCksIGZvciB0aGlzIHJlYXNvbiB3ZSBqdXN0IGhhdmVcclxuLy8gdGhlIGNzcC5pc0FjdGl2ZSgpIGZuIHRoYXQgbG9va3MgZm9yIG5nLWNzcCBhdHRyaWJ1dGUgYW55d2hlcmUgaW4gdGhlIGN1cnJlbnQgZG9jXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0NsaWNrXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgbmdDbGljayBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciB3aGVuXHJcbiAqIGFuIGVsZW1lbnQgaXMgY2xpY2tlZC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGljayB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIGNsaWNrLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnRcclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIDxzcGFuPlxyXG4gICAgICAgIGNvdW50OiB7e2NvdW50fX1cclxuICAgICAgPC9zcGFuPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWNsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50JykpLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50JykpLmdldFRleHQoKSkudG9NYXRjaCgnMScpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG4vKlxyXG4gKiBBIGRpcmVjdGl2ZSB0aGF0IGFsbG93cyBjcmVhdGlvbiBvZiBjdXN0b20gb25jbGljayBoYW5kbGVycyB0aGF0IGFyZSBkZWZpbmVkIGFzIGFuZ3VsYXJcclxuICogZXhwcmVzc2lvbnMgYW5kIGFyZSBjb21waWxlZCBhbmQgZXhlY3V0ZWQgd2l0aGluIHRoZSBjdXJyZW50IHNjb3BlLlxyXG4gKlxyXG4gKiBFdmVudHMgdGhhdCBhcmUgaGFuZGxlZCB2aWEgdGhlc2UgaGFuZGxlciBhcmUgYWx3YXlzIGNvbmZpZ3VyZWQgbm90IHRvIHByb3BhZ2F0ZSBmdXJ0aGVyLlxyXG4gKi9cclxudmFyIG5nRXZlbnREaXJlY3RpdmVzID0ge307XHJcblxyXG4vLyBGb3IgZXZlbnRzIHRoYXQgbWlnaHQgZmlyZSBzeW5jaHJvbm91c2x5IGR1cmluZyBET00gbWFuaXB1bGF0aW9uXHJcbi8vIHdlIG5lZWQgdG8gZXhlY3V0ZSB0aGVpciBldmVudCBoYW5kbGVycyBhc3luY2hyb25vdXNseSB1c2luZyAkZXZhbEFzeW5jLFxyXG4vLyBzbyB0aGF0IHRoZXkgYXJlIG5vdCBleGVjdXRlZCBpbiBhbiBpbmNvbnNpc3RlbnQgc3RhdGUuXHJcbnZhciBmb3JjZUFzeW5jRXZlbnRzID0ge1xyXG4gICdibHVyJzogdHJ1ZSxcclxuICAnZm9jdXMnOiB0cnVlXHJcbn07XHJcbmZvckVhY2goXHJcbiAgJ2NsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZW1vdmUgbW91c2VlbnRlciBtb3VzZWxlYXZlIGtleWRvd24ga2V5dXAga2V5cHJlc3Mgc3VibWl0IGZvY3VzIGJsdXIgY29weSBjdXQgcGFzdGUnLnNwbGl0KCcgJyksXHJcbiAgZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgICB2YXIgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJyArIGV2ZW50TmFtZSk7XHJcbiAgICBuZ0V2ZW50RGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSA9IFsnJHBhcnNlJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcGFyc2UsICRyb290U2NvcGUpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKCRlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICB2YXIgZm4gPSAkcGFyc2UoYXR0cltkaXJlY3RpdmVOYW1lXSk7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdFdmVudEhhbmRsZXIoc2NvcGUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5vbihldmVudE5hbWUsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBmbihzY29wZSwgeyRldmVudDpldmVudH0pO1xyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgaWYgKGZvcmNlQXN5bmNFdmVudHNbZXZlbnROYW1lXSAmJiAkcm9vdFNjb3BlLiQkcGhhc2UpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1dO1xyXG4gIH1cclxuKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nRGJsY2xpY2tcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdEYmxjbGlja2AgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gYSBkYmxjbGljayBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdEYmxjbGljayB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIGEgZGJsY2xpY2suIChUaGUgRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YClcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGJ1dHRvbiBuZy1kYmxjbGljaz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKG9uIGRvdWJsZSBjbGljaylcclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdNb3VzZWRvd25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBuZ01vdXNlZG93biBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZWRvd24gZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2Vkb3duIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogbW91c2Vkb3duLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZWRvd249XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgICAgSW5jcmVtZW50IChvbiBtb3VzZSBkb3duKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ01vdXNldXBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNldXAgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2V1cCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIG1vdXNldXAuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLW1vdXNldXA9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgICAgSW5jcmVtZW50IChvbiBtb3VzZSB1cClcclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ01vdXNlb3ZlclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VvdmVyIGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlb3ZlciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIG1vdXNlb3Zlci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxidXR0b24gbmctbW91c2VvdmVyPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxyXG4gICAgICAgIEluY3JlbWVudCAod2hlbiBtb3VzZSBpcyBvdmVyKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ01vdXNlZW50ZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlZW50ZXIgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VlbnRlciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIG1vdXNlZW50ZXIuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLW1vdXNlZW50ZXI9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGVudGVycylcclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdNb3VzZWxlYXZlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZWxlYXZlIGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlbGVhdmUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBtb3VzZWxlYXZlLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZWxlYXZlPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxyXG4gICAgICAgIEluY3JlbWVudCAod2hlbiBtb3VzZSBsZWF2ZXMpXHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW91c2Vtb3ZlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZW1vdmUgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2Vtb3ZlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogbW91c2Vtb3ZlLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZW1vdmU9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIG1vdmVzKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0tleWRvd25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleWRvd24gZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nS2V5ZG93biB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIGtleWRvd24uIChFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxpbnB1dCBuZy1rZXlkb3duPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxyXG4gICAgICBrZXkgZG93biBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nS2V5dXBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleXVwIGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0tleXVwIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICoga2V5dXAuIChFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8cD5UeXBpbmcgaW4gdGhlIGlucHV0IGJveCBiZWxvdyB1cGRhdGVzIHRoZSBrZXkgY291bnQ8L3A+XHJcbiAgICAgICA8aW5wdXQgbmcta2V5dXA9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+IGtleSB1cCBjb3VudDoge3tjb3VudH19XHJcblxyXG4gICAgICAgPHA+VHlwaW5nIGluIHRoZSBpbnB1dCBib3ggYmVsb3cgdXBkYXRlcyB0aGUga2V5Y29kZTwvcD5cclxuICAgICAgIDxpbnB1dCBuZy1rZXl1cD1cImV2ZW50PSRldmVudFwiPlxyXG4gICAgICAgPHA+ZXZlbnQga2V5Q29kZToge3sgZXZlbnQua2V5Q29kZSB9fTwvcD5cclxuICAgICAgIDxwPmV2ZW50IGFsdEtleToge3sgZXZlbnQuYWx0S2V5IH19PC9wPlxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0tleXByZXNzXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBrZXlwcmVzcyBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdLZXlwcmVzcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIGtleXByZXNzLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfVxyXG4gKiBhbmQgY2FuIGJlIGludGVycm9nYXRlZCBmb3Iga2V5Q29kZSwgYWx0S2V5LCBldGMuKVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgbmcta2V5cHJlc3M9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgIGtleSBwcmVzcyBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nU3VibWl0XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFbmFibGVzIGJpbmRpbmcgYW5ndWxhciBleHByZXNzaW9ucyB0byBvbnN1Ym1pdCBldmVudHMuXHJcbiAqXHJcbiAqIEFkZGl0aW9uYWxseSBpdCBwcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gKHdoaWNoIGZvciBmb3JtIG1lYW5zIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlXHJcbiAqIHNlcnZlciBhbmQgcmVsb2FkaW5nIHRoZSBjdXJyZW50IHBhZ2UpLCBidXQgb25seSBpZiB0aGUgZm9ybSBkb2VzIG5vdCBjb250YWluIGBhY3Rpb25gLFxyXG4gKiBgZGF0YS1hY3Rpb25gLCBvciBgeC1hY3Rpb25gIGF0dHJpYnV0ZXMuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqV2FybmluZzoqKiBCZSBjYXJlZnVsIG5vdCB0byBjYXVzZSBcImRvdWJsZS1zdWJtaXNzaW9uXCIgYnkgdXNpbmcgYm90aCB0aGUgYG5nQ2xpY2tgIGFuZFxyXG4gKiBgbmdTdWJtaXRgIGhhbmRsZXJzIHRvZ2V0aGVyLiBTZWUgdGhlXHJcbiAqIHtAbGluayBmb3JtI3N1Ym1pdHRpbmctYS1mb3JtLWFuZC1wcmV2ZW50aW5nLXRoZS1kZWZhdWx0LWFjdGlvbiBgZm9ybWAgZGlyZWN0aXZlIGRvY3VtZW50YXRpb259XHJcbiAqIGZvciBhIGRldGFpbGVkIGRpc2N1c3Npb24gb2Ygd2hlbiBgbmdTdWJtaXRgIG1heSBiZSB0cmlnZ2VyZWQuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBAZWxlbWVudCBmb3JtXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTdWJtaXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC5cclxuICogKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cInN1Ym1pdEV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8c2NyaXB0PlxyXG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdzdWJtaXRFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUubGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAkc2NvcGUudGV4dCA9ICdoZWxsbyc7XHJcbiAgICAgICAgICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBpZiAoJHNjb3BlLnRleHQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5saXN0LnB1c2godGhpcy50ZXh0KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJyc7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfV0pO1xyXG4gICAgICA8L3NjcmlwdD5cclxuICAgICAgPGZvcm0gbmctc3VibWl0PVwic3VibWl0KClcIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICBFbnRlciB0ZXh0IGFuZCBoaXQgZW50ZXI6XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ0ZXh0XCIgbmFtZT1cInRleHRcIiAvPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgaWQ9XCJzdWJtaXRcIiB2YWx1ZT1cIlN1Ym1pdFwiIC8+XHJcbiAgICAgICAgPHByZT5saXN0PXt7bGlzdH19PC9wcmU+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1zdWJtaXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbGlzdCcpKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3Q9W10nKTtcclxuICAgICAgICAgZWxlbWVudChieS5jc3MoJyNzdWJtaXQnKSkuY2xpY2soKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbGlzdCcpKS5nZXRUZXh0KCkpLnRvQ29udGFpbignaGVsbG8nKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCcnKTtcclxuICAgICAgIH0pO1xyXG4gICAgICAgaXQoJ3Nob3VsZCBpZ25vcmUgZW1wdHkgc3RyaW5ncycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9CZSgnbGlzdD1bXScpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3N1Ym1pdCcpKS5jbGljaygpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3N1Ym1pdCcpKS5jbGljaygpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nRm9jdXNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGZvY3VzIGV2ZW50LlxyXG4gKlxyXG4gKiBOb3RlOiBBcyB0aGUgYGZvY3VzYCBldmVudCBpcyBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gY2FsbGluZyBgaW5wdXQuZm9jdXMoKWBcclxuICogQW5ndWxhckpTIGV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIHVzaW5nIGBzY29wZS4kZXZhbEFzeW5jYCBpZiB0aGUgZXZlbnQgaXMgZmlyZWRcclxuICogZHVyaW5nIGFuIGAkYXBwbHlgIHRvIGVuc3VyZSBhIGNvbnNpc3RlbnQgc3RhdGUuXHJcbiAqXHJcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0ZvY3VzIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogZm9jdXMuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBTZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdCbHVyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBibHVyIGV2ZW50LlxyXG4gKlxyXG4gKiBBIFtibHVyIGV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHMvYmx1cikgZmlyZXMgd2hlblxyXG4gKiBhbiBlbGVtZW50IGhhcyBsb3N0IGZvY3VzLlxyXG4gKlxyXG4gKiBOb3RlOiBBcyB0aGUgYGJsdXJgIGV2ZW50IGlzIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgYWxzbyBkdXJpbmcgRE9NIG1hbmlwdWxhdGlvbnNcclxuICogKGUuZy4gcmVtb3ZpbmcgYSBmb2N1c3NlZCBpbnB1dCksXHJcbiAqIEFuZ3VsYXJKUyBleGVjdXRlcyB0aGUgZXhwcmVzc2lvbiB1c2luZyBgc2NvcGUuJGV2YWxBc3luY2AgaWYgdGhlIGV2ZW50IGlzIGZpcmVkXHJcbiAqIGR1cmluZyBhbiBgJGFwcGx5YCB0byBlbnN1cmUgYSBjb25zaXN0ZW50IHN0YXRlLlxyXG4gKlxyXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCbHVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogYmx1ci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja31cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0NvcHlcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGNvcHkgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NvcHkge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBjb3B5LiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGlucHV0IG5nLWNvcHk9XCJjb3BpZWQ9dHJ1ZVwiIG5nLWluaXQ9XCJjb3BpZWQ9ZmFsc2U7IHZhbHVlPSdjb3B5IG1lJ1wiIG5nLW1vZGVsPVwidmFsdWVcIj5cclxuICAgICAgY29waWVkOiB7e2NvcGllZH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDdXRcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGN1dCBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ3V0IHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogY3V0LiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGlucHV0IG5nLWN1dD1cImN1dD10cnVlXCIgbmctaW5pdD1cImN1dD1mYWxzZTsgdmFsdWU9J2N1dCBtZSdcIiBuZy1tb2RlbD1cInZhbHVlXCI+XHJcbiAgICAgIGN1dDoge3tjdXR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nUGFzdGVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIHBhc3RlIGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdQYXN0ZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIHBhc3RlLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGlucHV0IG5nLXBhc3RlPVwicGFzdGU9dHJ1ZVwiIG5nLWluaXQ9XCJwYXN0ZT1mYWxzZVwiIHBsYWNlaG9sZGVyPSdwYXN0ZSBoZXJlJz5cclxuICAgICAgcGFzdGVkOiB7e3Bhc3RlfX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0lmXHJcbiAqIEByZXN0cmljdCBBXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nSWZgIGRpcmVjdGl2ZSByZW1vdmVzIG9yIHJlY3JlYXRlcyBhIHBvcnRpb24gb2YgdGhlIERPTSB0cmVlIGJhc2VkIG9uIGFuXHJcbiAqIHtleHByZXNzaW9ufS4gSWYgdGhlIGV4cHJlc3Npb24gYXNzaWduZWQgdG8gYG5nSWZgIGV2YWx1YXRlcyB0byBhIGZhbHNlXHJcbiAqIHZhbHVlIHRoZW4gdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00sIG90aGVyd2lzZSBhIGNsb25lIG9mIHRoZVxyXG4gKiBlbGVtZW50IGlzIHJlaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxyXG4gKlxyXG4gKiBgbmdJZmAgZGlmZmVycyBmcm9tIGBuZ1Nob3dgIGFuZCBgbmdIaWRlYCBpbiB0aGF0IGBuZ0lmYCBjb21wbGV0ZWx5IHJlbW92ZXMgYW5kIHJlY3JlYXRlcyB0aGVcclxuICogZWxlbWVudCBpbiB0aGUgRE9NIHJhdGhlciB0aGFuIGNoYW5naW5nIGl0cyB2aXNpYmlsaXR5IHZpYSB0aGUgYGRpc3BsYXlgIGNzcyBwcm9wZXJ0eS4gIEEgY29tbW9uXHJcbiAqIGNhc2Ugd2hlbiB0aGlzIGRpZmZlcmVuY2UgaXMgc2lnbmlmaWNhbnQgaXMgd2hlbiB1c2luZyBjc3Mgc2VsZWN0b3JzIHRoYXQgcmVseSBvbiBhbiBlbGVtZW50J3NcclxuICogcG9zaXRpb24gd2l0aGluIHRoZSBET00sIHN1Y2ggYXMgdGhlIGA6Zmlyc3QtY2hpbGRgIG9yIGA6bGFzdC1jaGlsZGAgcHNldWRvLWNsYXNzZXMuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB3aGVuIGFuIGVsZW1lbnQgaXMgcmVtb3ZlZCB1c2luZyBgbmdJZmAgaXRzIHNjb3BlIGlzIGRlc3Ryb3llZCBhbmQgYSBuZXcgc2NvcGVcclxuICogaXMgY3JlYXRlZCB3aGVuIHRoZSBlbGVtZW50IGlzIHJlc3RvcmVkLiAgVGhlIHNjb3BlIGNyZWF0ZWQgd2l0aGluIGBuZ0lmYCBpbmhlcml0cyBmcm9tXHJcbiAqIGl0cyBwYXJlbnQgc2NvcGUgdXNpbmdcclxuICogW3Byb3RvdHlwYWwgaW5oZXJpdGFuY2VdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvd2lraS9UaGUtTnVhbmNlcy1vZi1TY29wZS1Qcm90b3R5cGFsLUluaGVyaXRhbmNlKS5cclxuICogQW4gaW1wb3J0YW50IGltcGxpY2F0aW9uIG9mIHRoaXMgaXMgaWYgYG5nTW9kZWxgIGlzIHVzZWQgd2l0aGluIGBuZ0lmYCB0byBiaW5kIHRvXHJcbiAqIGEgamF2YXNjcmlwdCBwcmltaXRpdmUgZGVmaW5lZCBpbiB0aGUgcGFyZW50IHNjb3BlLiBJbiB0aGlzIGNhc2UgYW55IG1vZGlmaWNhdGlvbnMgbWFkZSB0byB0aGVcclxuICogdmFyaWFibGUgd2l0aGluIHRoZSBjaGlsZCBzY29wZSB3aWxsIG92ZXJyaWRlIChoaWRlKSB0aGUgdmFsdWUgaW4gdGhlIHBhcmVudCBzY29wZS5cclxuICpcclxuICogQWxzbywgYG5nSWZgIHJlY3JlYXRlcyBlbGVtZW50cyB1c2luZyB0aGVpciBjb21waWxlZCBzdGF0ZS4gQW4gZXhhbXBsZSBvZiB0aGlzIGJlaGF2aW9yXHJcbiAqIGlzIGlmIGFuIGVsZW1lbnQncyBjbGFzcyBhdHRyaWJ1dGUgaXMgZGlyZWN0bHkgbW9kaWZpZWQgYWZ0ZXIgaXQncyBjb21waWxlZCwgdXNpbmcgc29tZXRoaW5nIGxpa2VcclxuICogalF1ZXJ5J3MgYC5hZGRDbGFzcygpYCBtZXRob2QsIGFuZCB0aGUgZWxlbWVudCBpcyBsYXRlciByZW1vdmVkLiBXaGVuIGBuZ0lmYCByZWNyZWF0ZXMgdGhlIGVsZW1lbnRcclxuICogdGhlIGFkZGVkIGNsYXNzIHdpbGwgYmUgbG9zdCBiZWNhdXNlIHRoZSBvcmlnaW5hbCBjb21waWxlZCBzdGF0ZSBpcyB1c2VkIHRvIHJlZ2VuZXJhdGUgdGhlIGVsZW1lbnQuXHJcbiAqXHJcbiAqIEFkZGl0aW9uYWxseSwgeW91IGNhbiBwcm92aWRlIGFuaW1hdGlvbnMgdmlhIHRoZSBgbmdBbmltYXRlYCBtb2R1bGUgdG8gYW5pbWF0ZSB0aGUgYGVudGVyYFxyXG4gKiBhbmQgYGxlYXZlYCBlZmZlY3RzLlxyXG4gKlxyXG4gKiBAYW5pbWF0aW9uc1xyXG4gKiBlbnRlciAtIGhhcHBlbnMganVzdCBhZnRlciB0aGUgbmdJZiBjb250ZW50cyBjaGFuZ2UgYW5kIGEgbmV3IERPTSBlbGVtZW50IGlzIGNyZWF0ZWQgYW5kIGluamVjdGVkIGludG8gdGhlIG5nSWYgY29udGFpbmVyXHJcbiAqIGxlYXZlIC0gaGFwcGVucyBqdXN0IGJlZm9yZSB0aGUgbmdJZiBjb250ZW50cyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBzY29wZVxyXG4gKiBAcHJpb3JpdHkgNjAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdJZiBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgZmFsc3kgdGhlblxyXG4gKiAgICAgdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00gdHJlZS4gSWYgaXQgaXMgdHJ1dGh5IGEgY29weSBvZiB0aGUgY29tcGlsZWRcclxuICogICAgIGVsZW1lbnQgaXMgYWRkZWQgdG8gdGhlIERPTSB0cmVlLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgQ2xpY2sgbWU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBuZy1pbml0PVwiY2hlY2tlZD10cnVlXCIgLz48YnIvPlxyXG4gICAgICBTaG93IHdoZW4gY2hlY2tlZDpcclxuICAgICAgPHNwYW4gbmctaWY9XCJjaGVja2VkXCIgY2xhc3M9XCJhbmltYXRlLWlmXCI+XHJcbiAgICAgICAgSSdtIHJlbW92ZWQgd2hlbiB0aGUgY2hlY2tib3ggaXMgdW5jaGVja2VkLlxyXG4gICAgICA8L3NwYW4+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cclxuICAgICAgLmFuaW1hdGUtaWYge1xyXG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBwYWRkaW5nOjEwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLCAuYW5pbWF0ZS1pZi5uZy1sZWF2ZSB7XHJcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1lbnRlcixcclxuICAgICAgLmFuaW1hdGUtaWYubmctbGVhdmUubmctbGVhdmUtYWN0aXZlIHtcclxuICAgICAgICBvcGFjaXR5OjA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLWlmLm5nLWxlYXZlLFxyXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xyXG4gICAgICAgIG9wYWNpdHk6MTtcclxuICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ0lmRGlyZWN0aXZlID0gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcclxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcclxuICAgIHByaW9yaXR5OiA2MDAsXHJcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAkJHRsYjogdHJ1ZSxcclxuICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCAkYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcclxuICAgICAgICB2YXIgYmxvY2ssIGNoaWxkU2NvcGUsIHByZXZpb3VzRWxlbWVudHM7XHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgkYXR0ci5uZ0lmLCBmdW5jdGlvbiBuZ0lmV2F0Y2hBY3Rpb24odmFsdWUpIHtcclxuXHJcbiAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKCFjaGlsZFNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24gKGNsb25lLCBuZXdTY29wZSkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IG5ld1Njb3BlO1xyXG4gICAgICAgICAgICAgICAgY2xvbmVbY2xvbmUubGVuZ3RoKytdID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnIGVuZCBuZ0lmOiAnICsgJGF0dHIubmdJZiArICcgJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBvbmx5IG5lZWQgdGhlIGZpcnN0L2xhc3Qgbm9kZSBvZiB0aGUgY2xvbmVkIG5vZGVzLlxyXG4gICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgd2UgbmVlZCB0byBrZWVwIHRoZSByZWZlcmVuY2UgdG8gdGhlIGpxbGl0ZSB3cmFwcGVyIGFzIGl0IG1pZ2h0IGJlIGNoYW5nZWQgbGF0ZXJcclxuICAgICAgICAgICAgICAgIC8vIGJ5IGEgZGlyZWN0aXZlIHdpdGggdGVtcGxhdGVVcmwgd2hlbiBpdHMgdGVtcGxhdGUgYXJyaXZlcy5cclxuICAgICAgICAgICAgICAgIGJsb2NrID0ge1xyXG4gICAgICAgICAgICAgICAgICBjbG9uZTogY2xvbmVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgJGVsZW1lbnQucGFyZW50KCksICRlbGVtZW50KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYocHJldmlvdXNFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50cyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoY2hpbGRTY29wZSkge1xyXG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUuJGRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihibG9jaykge1xyXG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMgPSBnZXRCbG9ja05vZGVzKGJsb2NrLmNsb25lKTtcclxuICAgICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShwcmV2aW91c0VsZW1lbnRzKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50cyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgYmxvY2sgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0luY2x1ZGVcclxuICogQHJlc3RyaWN0IEVDQVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRmV0Y2hlcywgY29tcGlsZXMgYW5kIGluY2x1ZGVzIGFuIGV4dGVybmFsIEhUTUwgZnJhZ21lbnQuXHJcbiAqXHJcbiAqIEJ5IGRlZmF1bHQsIHRoZSB0ZW1wbGF0ZSBVUkwgaXMgcmVzdHJpY3RlZCB0byB0aGUgc2FtZSBkb21haW4gYW5kIHByb3RvY29sIGFzIHRoZVxyXG4gKiBhcHBsaWNhdGlvbiBkb2N1bWVudC4gVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXHJcbiAqICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsfSBvbiBpdC4gVG8gbG9hZCB0ZW1wbGF0ZXMgZnJvbSBvdGhlciBkb21haW5zIG9yIHByb3RvY29sc1xyXG4gKiB5b3UgbWF5IGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0IHRoZW19IG9yXHJcbiAqIFt3cmFwIHRoZW1dKG5nLiRzY2UjdHJ1c3RBc1Jlc291cmNlVXJsKSBhcyB0cnVzdGVkIHZhbHVlcy4gUmVmZXIgdG8gQW5ndWxhcidzIHtAbGlua1xyXG4gKiBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nfS5cclxuICpcclxuICogSW4gYWRkaXRpb24sIHRoZSBicm93c2VyJ3NcclxuICogW1NhbWUgT3JpZ2luIFBvbGljeV0oaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9icm93c2Vyc2VjL3dpa2kvUGFydDIjU2FtZS1vcmlnaW5fcG9saWN5X2Zvcl9YTUxIdHRwUmVxdWVzdClcclxuICogYW5kIFtDcm9zcy1PcmlnaW4gUmVzb3VyY2UgU2hhcmluZyAoQ09SUyldKGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvKVxyXG4gKiBwb2xpY3kgbWF5IGZ1cnRoZXIgcmVzdHJpY3Qgd2hldGhlciB0aGUgdGVtcGxhdGUgaXMgc3VjY2Vzc2Z1bGx5IGxvYWRlZC5cclxuICogRm9yIGV4YW1wbGUsIGBuZ0luY2x1ZGVgIHdvbid0IHdvcmsgZm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cyBvbiBhbGwgYnJvd3NlcnMgYW5kIGZvciBgZmlsZTovL2BcclxuICogYWNjZXNzIG9uIHNvbWUgYnJvd3NlcnMuXHJcbiAqXHJcbiAqIEBhbmltYXRpb25zXHJcbiAqIGVudGVyIC0gYW5pbWF0aW9uIGlzIHVzZWQgdG8gYnJpbmcgbmV3IGNvbnRlbnQgaW50byB0aGUgYnJvd3Nlci5cclxuICogbGVhdmUgLSBhbmltYXRpb24gaXMgdXNlZCB0byBhbmltYXRlIGV4aXN0aW5nIGNvbnRlbnQgYXdheS5cclxuICpcclxuICogVGhlIGVudGVyIGFuZCBsZWF2ZSBhbmltYXRpb24gb2NjdXIgY29uY3VycmVudGx5LlxyXG4gKlxyXG4gKiBAc2NvcGVcclxuICogQHByaW9yaXR5IDQwMFxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdJbmNsdWRlfHNyYyBhbmd1bGFyIGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBVUkwuIElmIHRoZSBzb3VyY2UgaXMgYSBzdHJpbmcgY29uc3RhbnQsXHJcbiAqICAgICAgICAgICAgICAgICBtYWtlIHN1cmUgeW91IHdyYXAgaXQgaW4gKipzaW5nbGUqKiBxdW90ZXMsIGUuZy4gYHNyYz1cIidteVBhcnRpYWxUZW1wbGF0ZS5odG1sJ1wiYC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBvbmxvYWQgRXhwcmVzc2lvbiB0byBldmFsdWF0ZSB3aGVuIGEgbmV3IHBhcnRpYWwgaXMgbG9hZGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IGF1dG9zY3JvbGwgV2hldGhlciBgbmdJbmNsdWRlYCBzaG91bGQgY2FsbCB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbFxyXG4gKiAgICAgICAgICAgICAgICAgICRhbmNob3JTY3JvbGx9IHRvIHNjcm9sbCB0aGUgdmlld3BvcnQgYWZ0ZXIgdGhlIGNvbnRlbnQgaXMgbG9hZGVkLlxyXG4gKlxyXG4gKiAgICAgICAgICAgICAgICAgIC0gSWYgdGhlIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LCBkaXNhYmxlIHNjcm9sbGluZy5cclxuICogICAgICAgICAgICAgICAgICAtIElmIHRoZSBhdHRyaWJ1dGUgaXMgc2V0IHdpdGhvdXQgdmFsdWUsIGVuYWJsZSBzY3JvbGxpbmcuXHJcbiAqICAgICAgICAgICAgICAgICAgLSBPdGhlcndpc2UgZW5hYmxlIHNjcm9sbGluZyBvbmx5IGlmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnV0aHkgdmFsdWUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwiaW5jbHVkZUV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJ0ZW1wbGF0ZVwiIG5nLW9wdGlvbnM9XCJ0Lm5hbWUgZm9yIHQgaW4gdGVtcGxhdGVzXCI+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPihibGFuayk8L29wdGlvbj5cclxuICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgdXJsIG9mIHRoZSB0ZW1wbGF0ZTogPHR0Pnt7dGVtcGxhdGUudXJsfX08L3R0PlxyXG4gICAgICAgPGhyLz5cclxuICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtYW5pbWF0ZVwiIG5nLWluY2x1ZGU9XCJ0ZW1wbGF0ZS51cmxcIj48L2Rpdj5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnaW5jbHVkZUV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGVzID1cclxuICAgICAgICAgICAgWyB7IG5hbWU6ICd0ZW1wbGF0ZTEuaHRtbCcsIHVybDogJ3RlbXBsYXRlMS5odG1sJ30sXHJcbiAgICAgICAgICAgICAgeyBuYW1lOiAndGVtcGxhdGUyLmh0bWwnLCB1cmw6ICd0ZW1wbGF0ZTIuaHRtbCd9IF07XHJcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGUgPSAkc2NvcGUudGVtcGxhdGVzWzBdO1xyXG4gICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUxLmh0bWxcIj5cclxuICAgICAgQ29udGVudCBvZiB0ZW1wbGF0ZTEuaHRtbFxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInRlbXBsYXRlMi5odG1sXCI+XHJcbiAgICAgIENvbnRlbnQgb2YgdGVtcGxhdGUyLmh0bWxcclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxyXG4gICAgICAuc2xpZGUtYW5pbWF0ZS1jb250YWluZXIge1xyXG4gICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBoZWlnaHQ6NDBweDtcclxuICAgICAgICBvdmVyZmxvdzpoaWRkZW47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5zbGlkZS1hbmltYXRlIHtcclxuICAgICAgICBwYWRkaW5nOjEwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWVudGVyLCAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZSB7XHJcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xyXG5cclxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICB0b3A6MDtcclxuICAgICAgICBsZWZ0OjA7XHJcbiAgICAgICAgcmlnaHQ6MDtcclxuICAgICAgICBib3R0b206MDtcclxuICAgICAgICBkaXNwbGF5OmJsb2NrO1xyXG4gICAgICAgIHBhZGRpbmc6MTBweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctZW50ZXIge1xyXG4gICAgICAgIHRvcDotNTBweDtcclxuICAgICAgfVxyXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xyXG4gICAgICAgIHRvcDowO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZSB7XHJcbiAgICAgICAgdG9wOjA7XHJcbiAgICAgIH1cclxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctbGVhdmUubmctbGVhdmUtYWN0aXZlIHtcclxuICAgICAgICB0b3A6NTBweDtcclxuICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgdGVtcGxhdGVTZWxlY3QgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0ZW1wbGF0ZScpKTtcclxuICAgICAgdmFyIGluY2x1ZGVFbGVtID0gZWxlbWVudChieS5jc3MoJ1tuZy1pbmNsdWRlXScpKTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZTEuaHRtbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdChpbmNsdWRlRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL0NvbnRlbnQgb2YgdGVtcGxhdGUxLmh0bWwvKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUyLmh0bWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PSAnZmlyZWZveCcpIHtcclxuICAgICAgICAgIC8vIEZpcmVmb3ggY2FuJ3QgaGFuZGxlIHVzaW5nIHNlbGVjdHNcclxuICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODBcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcclxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDIpLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KGluY2x1ZGVFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0ZW1wbGF0ZTIuaHRtbC8pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHRvIGJsYW5rJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ2ZpcmVmb3gnKSB7XHJcbiAgICAgICAgICAvLyBGaXJlZm94IGNhbid0IGhhbmRsZSB1c2luZyBzZWxlY3RzXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRlbXBsYXRlU2VsZWN0LmNsaWNrKCk7XHJcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgwKS5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChpbmNsdWRlRWxlbS5pc1ByZXNlbnQoKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBldmVudFxyXG4gKiBAbmFtZSBuZ0luY2x1ZGUjJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXHJcbiAqIEBldmVudFR5cGUgZW1pdCBvbiB0aGUgc2NvcGUgbmdJbmNsdWRlIHdhcyBkZWNsYXJlZCBpblxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRW1pdHRlZCBldmVyeSB0aW1lIHRoZSBuZ0luY2x1ZGUgY29udGVudCBpcyByZXF1ZXN0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cclxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGV2ZW50XHJcbiAqIEBuYW1lIG5nSW5jbHVkZSMkaW5jbHVkZUNvbnRlbnRMb2FkZWRcclxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBjdXJyZW50IG5nSW5jbHVkZSBzY29wZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRW1pdHRlZCBldmVyeSB0aW1lIHRoZSBuZ0luY2x1ZGUgY29udGVudCBpcyByZWxvYWRlZC5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gc3JjIFVSTCBvZiBjb250ZW50IHRvIGxvYWQuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZXZlbnRcclxuICogQG5hbWUgbmdJbmNsdWRlIyRpbmNsdWRlQ29udGVudEVycm9yXHJcbiAqIEBldmVudFR5cGUgZW1pdCBvbiB0aGUgc2NvcGUgbmdJbmNsdWRlIHdhcyBkZWNsYXJlZCBpblxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRW1pdHRlZCB3aGVuIGEgdGVtcGxhdGUgSFRUUCByZXF1ZXN0IHlpZWxkcyBhbiBlcnJvbm91cyByZXNwb25zZSAoc3RhdHVzIDwgMjAwIHx8IHN0YXR1cyA+IDI5OSlcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gc3JjIFVSTCBvZiBjb250ZW50IHRvIGxvYWQuXHJcbiAqL1xyXG52YXIgbmdJbmNsdWRlRGlyZWN0aXZlID0gWyckdGVtcGxhdGVSZXF1ZXN0JywgJyRhbmNob3JTY3JvbGwnLCAnJGFuaW1hdGUnLCAnJHNjZScsXHJcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCR0ZW1wbGF0ZVJlcXVlc3QsICAgJGFuY2hvclNjcm9sbCwgICAkYW5pbWF0ZSwgICAkc2NlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnRUNBJyxcclxuICAgIHByaW9yaXR5OiA0MDAsXHJcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcclxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcclxuICAgIGNvbnRyb2xsZXI6IGFuZ3VsYXIubm9vcCxcclxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgdmFyIHNyY0V4cCA9IGF0dHIubmdJbmNsdWRlIHx8IGF0dHIuc3JjLFxyXG4gICAgICAgICAgb25sb2FkRXhwID0gYXR0ci5vbmxvYWQgfHwgJycsXHJcbiAgICAgICAgICBhdXRvU2Nyb2xsRXhwID0gYXR0ci5hdXRvc2Nyb2xsO1xyXG5cclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XHJcbiAgICAgICAgdmFyIGNoYW5nZUNvdW50ZXIgPSAwLFxyXG4gICAgICAgICAgICBjdXJyZW50U2NvcGUsXHJcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCxcclxuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHZhciBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZihwcmV2aW91c0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoY3VycmVudFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoY3VycmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoY3VycmVudEVsZW1lbnQpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IGN1cnJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKCRzY2UucGFyc2VBc1Jlc291cmNlVXJsKHNyY0V4cCksIGZ1bmN0aW9uIG5nSW5jbHVkZVdhdGNoQWN0aW9uKHNyYykge1xyXG4gICAgICAgICAgdmFyIGFmdGVyQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQoYXV0b1Njcm9sbEV4cCkgJiYgKCFhdXRvU2Nyb2xsRXhwIHx8IHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKSkge1xyXG4gICAgICAgICAgICAgICRhbmNob3JTY3JvbGwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHZhciB0aGlzQ2hhbmdlSWQgPSArK2NoYW5nZUNvdW50ZXI7XHJcblxyXG4gICAgICAgICAgaWYgKHNyYykge1xyXG4gICAgICAgICAgICAvL3NldCB0aGUgMm5kIHBhcmFtIHRvIHRydWUgdG8gaWdub3JlIHRoZSB0ZW1wbGF0ZSByZXF1ZXN0IGVycm9yIHNvIHRoYXQgdGhlIGlubmVyXHJcbiAgICAgICAgICAgIC8vY29udGVudHMgYW5kIHNjb3BlIGNhbiBiZSBjbGVhbmVkIHVwLlxyXG4gICAgICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0KHNyYywgdHJ1ZSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzQ2hhbmdlSWQgIT09IGNoYW5nZUNvdW50ZXIpIHJldHVybjtcclxuICAgICAgICAgICAgICB2YXIgbmV3U2NvcGUgPSBzY29wZS4kbmV3KCk7XHJcbiAgICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IHJlc3BvbnNlO1xyXG5cclxuICAgICAgICAgICAgICAvLyBOb3RlOiBUaGlzIHdpbGwgYWxzbyBsaW5rIGFsbCBjaGlsZHJlbiBvZiBuZy1pbmNsdWRlIHRoYXQgd2VyZSBjb250YWluZWQgaW4gdGhlIG9yaWdpbmFsXHJcbiAgICAgICAgICAgICAgLy8gaHRtbC4gSWYgdGhhdCBjb250ZW50IGNvbnRhaW5zIGNvbnRyb2xsZXJzLCAuLi4gdGhleSBjb3VsZCBwb2xsdXRlL2NoYW5nZSB0aGUgc2NvcGUuXHJcbiAgICAgICAgICAgICAgLy8gSG93ZXZlciwgdXNpbmcgbmctaW5jbHVkZSBvbiBhbiBlbGVtZW50IHdpdGggYWRkaXRpb25hbCBjb250ZW50IGRvZXMgbm90IG1ha2Ugc2Vuc2UuLi5cclxuICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW4ndCByZW1vdmUgdGhlbSBpbiB0aGUgY2xvbmVBdHRjaEZuIG9mICR0cmFuc2NsdWRlIGFzIHRoYXRcclxuICAgICAgICAgICAgICAvLyBmdW5jdGlvbiBpcyBjYWxsZWQgYmVmb3JlIGxpbmtpbmcgdGhlIGNvbnRlbnQsIHdoaWNoIHdvdWxkIGFwcGx5IGNoaWxkXHJcbiAgICAgICAgICAgICAgLy8gZGlyZWN0aXZlcyB0byBub24gZXhpc3RpbmcgZWxlbWVudHMuXHJcbiAgICAgICAgICAgICAgdmFyIGNsb25lID0gJHRyYW5zY2x1ZGUobmV3U2NvcGUsIGZ1bmN0aW9uKGNsb25lKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgbnVsbCwgJGVsZW1lbnQpLnRoZW4oYWZ0ZXJBbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBuZXdTY29wZTtcclxuICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGNsb25lO1xyXG5cclxuICAgICAgICAgICAgICBjdXJyZW50U2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudExvYWRlZCcsIHNyYyk7XHJcbiAgICAgICAgICAgICAgc2NvcGUuJGV2YWwob25sb2FkRXhwKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXNDaGFuZ2VJZCA9PT0gY2hhbmdlQ291bnRlcikge1xyXG4gICAgICAgICAgICAgICAgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudEVycm9yJywgc3JjKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkJywgc3JjKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQoKTtcclxuICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG4vLyBUaGlzIGRpcmVjdGl2ZSBpcyBjYWxsZWQgZHVyaW5nIHRoZSAkdHJhbnNjbHVkZSBjYWxsIG9mIHRoZSBmaXJzdCBgbmdJbmNsdWRlYCBkaXJlY3RpdmUuXHJcbi8vIEl0IHdpbGwgcmVwbGFjZSBhbmQgY29tcGlsZSB0aGUgY29udGVudCBvZiB0aGUgZWxlbWVudCB3aXRoIHRoZSBsb2FkZWQgdGVtcGxhdGUuXHJcbi8vIFdlIG5lZWQgdGhpcyBkaXJlY3RpdmUgc28gdGhhdCB0aGUgZWxlbWVudCBjb250ZW50IGlzIGFscmVhZHkgZmlsbGVkIHdoZW5cclxuLy8gdGhlIGxpbmsgZnVuY3Rpb24gb2YgYW5vdGhlciBkaXJlY3RpdmUgb24gdGhlIHNhbWUgZWxlbWVudCBhcyBuZ0luY2x1ZGVcclxuLy8gaXMgY2FsbGVkLlxyXG52YXIgbmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmUgPSBbJyRjb21waWxlJyxcclxuICBmdW5jdGlvbigkY29tcGlsZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQ0EnLFxyXG4gICAgICBwcmlvcml0eTogLTQwMCxcclxuICAgICAgcmVxdWlyZTogJ25nSW5jbHVkZScsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwpIHtcclxuICAgICAgICBpZiAoL1NWRy8udGVzdCgkZWxlbWVudFswXS50b1N0cmluZygpKSkge1xyXG4gICAgICAgICAgLy8gV2ViS2l0OiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM1Njk4IC0tLSBTVkcgZWxlbWVudHMgZG8gbm90XHJcbiAgICAgICAgICAvLyBzdXBwb3J0IGlubmVySFRNTCwgc28gZGV0ZWN0IHRoaXMgaGVyZSBhbmQgdHJ5IHRvIGdlbmVyYXRlIHRoZSBjb250ZW50c1xyXG4gICAgICAgICAgLy8gc3BlY2lhbGx5LlxyXG4gICAgICAgICAgJGVsZW1lbnQuZW1wdHkoKTtcclxuICAgICAgICAgICRjb21waWxlKGpxTGl0ZUJ1aWxkRnJhZ21lbnQoY3RybC50ZW1wbGF0ZSwgZG9jdW1lbnQpLmNoaWxkTm9kZXMpKHNjb3BlLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIG5hbWVzcGFjZUFkYXB0ZWRDbG9uZShjbG9uZSkge1xyXG4gICAgICAgICAgICAkZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xyXG4gICAgICAgICAgfSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsICRlbGVtZW50KTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRlbGVtZW50Lmh0bWwoY3RybC50ZW1wbGF0ZSk7XHJcbiAgICAgICAgJGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSkoc2NvcGUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1dO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdJbml0XHJcbiAqIEByZXN0cmljdCBBQ1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ0luaXRgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIGV2YWx1YXRlIGFuIGV4cHJlc3Npb24gaW4gdGhlXHJcbiAqIGN1cnJlbnQgc2NvcGUuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1lcnJvclwiPlxyXG4gKiBUaGUgb25seSBhcHByb3ByaWF0ZSB1c2Ugb2YgYG5nSW5pdGAgaXMgZm9yIGFsaWFzaW5nIHNwZWNpYWwgcHJvcGVydGllcyBvZlxyXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IGBuZ1JlcGVhdGB9LCBhcyBzZWVuIGluIHRoZSBkZW1vIGJlbG93LiBCZXNpZGVzIHRoaXMgY2FzZSwgeW91XHJcbiAqIHNob3VsZCB1c2Uge0BsaW5rIGd1aWRlL2NvbnRyb2xsZXIgY29udHJvbGxlcnN9IHJhdGhlciB0aGFuIGBuZ0luaXRgXHJcbiAqIHRvIGluaXRpYWxpemUgdmFsdWVzIG9uIGEgc2NvcGUuXHJcbiAqIDwvZGl2PlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGUqKjogSWYgeW91IGhhdmUgYXNzaWdubWVudCBpbiBgbmdJbml0YCBhbG9uZyB3aXRoIHtAbGluayBuZy4kZmlsdGVyIGAkZmlsdGVyYH0sIG1ha2VcclxuICogc3VyZSB5b3UgaGF2ZSBwYXJlbnRoZXNpcyBmb3IgY29ycmVjdCBwcmVjZWRlbmNlOlxyXG4gKiA8cHJlIGNsYXNzPVwicHJldHR5cHJpbnRcIj5cclxuICogICA8ZGl2IG5nLWluaXQ9XCJ0ZXN0MSA9IChkYXRhIHwgb3JkZXJCeTonbmFtZScpXCI+PC9kaXY+XHJcbiAqIDwvcHJlPlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogQHByaW9yaXR5IDQ1MFxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0luaXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwiaW5pdEV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICA8c2NyaXB0PlxyXG4gICAgIGFuZ3VsYXIubW9kdWxlKCdpbml0RXhhbXBsZScsIFtdKVxyXG4gICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgJHNjb3BlLmxpc3QgPSBbWydhJywgJ2InXSwgWydjJywgJ2QnXV07XHJcbiAgICAgICB9XSk7XHJcbiAgIDwvc2NyaXB0PlxyXG4gICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgIDxkaXYgbmctcmVwZWF0PVwiaW5uZXJMaXN0IGluIGxpc3RcIiBuZy1pbml0PVwib3V0ZXJJbmRleCA9ICRpbmRleFwiPlxyXG4gICAgICAgPGRpdiBuZy1yZXBlYXQ9XCJ2YWx1ZSBpbiBpbm5lckxpc3RcIiBuZy1pbml0PVwiaW5uZXJJbmRleCA9ICRpbmRleFwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJleGFtcGxlLWluaXRcIj5saXN0WyB7e291dGVySW5kZXh9fSBdWyB7e2lubmVySW5kZXh9fSBdID0ge3t2YWx1ZX19Ozwvc3Bhbj5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZGl2PlxyXG4gICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBhbGlhcyBpbmRleCBwb3NpdGlvbnMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgdmFyIGVsZW1lbnRzID0gZWxlbWVudC5hbGwoYnkuY3NzKCcuZXhhbXBsZS1pbml0JykpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMCBdWyAwIF0gPSBhOycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMCBdWyAxIF0gPSBiOycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDIpLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMSBdWyAwIF0gPSBjOycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDMpLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMSBdWyAxIF0gPSBkOycpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdJbml0RGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xyXG4gIHByaW9yaXR5OiA0NTAsXHJcbiAgY29tcGlsZTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcmU6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgIHNjb3BlLiRldmFsKGF0dHJzLm5nSW5pdCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTm9uQmluZGFibGVcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqIEBwcmlvcml0eSAxMDAwXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nTm9uQmluZGFibGVgIGRpcmVjdGl2ZSB0ZWxscyBBbmd1bGFyIG5vdCB0byBjb21waWxlIG9yIGJpbmQgdGhlIGNvbnRlbnRzIG9mIHRoZSBjdXJyZW50XHJcbiAqIERPTSBlbGVtZW50LiBUaGlzIGlzIHVzZWZ1bCBpZiB0aGUgZWxlbWVudCBjb250YWlucyB3aGF0IGFwcGVhcnMgdG8gYmUgQW5ndWxhciBkaXJlY3RpdmVzIGFuZFxyXG4gKiBiaW5kaW5ncyBidXQgd2hpY2ggc2hvdWxkIGJlIGlnbm9yZWQgYnkgQW5ndWxhci4gVGhpcyBjb3VsZCBiZSB0aGUgY2FzZSBpZiB5b3UgaGF2ZSBhIHNpdGUgdGhhdFxyXG4gKiBkaXNwbGF5cyBzbmlwcGV0cyBvZiBjb2RlLCBmb3IgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBJbiB0aGlzIGV4YW1wbGUgdGhlcmUgYXJlIHR3byBsb2NhdGlvbnMgd2hlcmUgYSBzaW1wbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nIChge3t9fWApIGlzIHByZXNlbnQsXHJcbiAqIGJ1dCB0aGUgb25lIHdyYXBwZWQgaW4gYG5nTm9uQmluZGFibGVgIGlzIGxlZnQgYWxvbmUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8ZGl2Pk5vcm1hbDoge3sxICsgMn19PC9kaXY+XHJcbiAgICAgICAgPGRpdiBuZy1ub24tYmluZGFibGU+SWdub3JlZDoge3sxICsgMn19PC9kaXY+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1ub24tYmluZGFibGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnMSArIDInKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzMnKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnZGl2JykpLmxhc3QoKS5nZXRUZXh0KCkpLnRvTWF0Y2goLzEgXFwrIDIvKTtcclxuICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdOb25CaW5kYWJsZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHsgdGVybWluYWw6IHRydWUsIHByaW9yaXR5OiAxMDAwIH0pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdQbHVyYWxpemVcclxuICogQHJlc3RyaWN0IEVBXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBgbmdQbHVyYWxpemVgIGlzIGEgZGlyZWN0aXZlIHRoYXQgZGlzcGxheXMgbWVzc2FnZXMgYWNjb3JkaW5nIHRvIGVuLVVTIGxvY2FsaXphdGlvbiBydWxlcy5cclxuICogVGhlc2UgcnVsZXMgYXJlIGJ1bmRsZWQgd2l0aCBhbmd1bGFyLmpzLCBidXQgY2FuIGJlIG92ZXJyaWRkZW5cclxuICogKHNlZSB7QGxpbmsgZ3VpZGUvaTE4biBBbmd1bGFyIGkxOG59IGRldiBndWlkZSkuIFlvdSBjb25maWd1cmUgbmdQbHVyYWxpemUgZGlyZWN0aXZlXHJcbiAqIGJ5IHNwZWNpZnlpbmcgdGhlIG1hcHBpbmdzIGJldHdlZW5cclxuICogW3BsdXJhbCBjYXRlZ29yaWVzXShodHRwOi8vdW5pY29kZS5vcmcvcmVwb3MvY2xkci10bXAvdHJ1bmsvZGlmZi9zdXBwbGVtZW50YWwvbGFuZ3VhZ2VfcGx1cmFsX3J1bGVzLmh0bWwpXHJcbiAqIGFuZCB0aGUgc3RyaW5ncyB0byBiZSBkaXNwbGF5ZWQuXHJcbiAqXHJcbiAqICMgUGx1cmFsIGNhdGVnb3JpZXMgYW5kIGV4cGxpY2l0IG51bWJlciBydWxlc1xyXG4gKiBUaGVyZSBhcmUgdHdvXHJcbiAqIFtwbHVyYWwgY2F0ZWdvcmllc10oaHR0cDovL3VuaWNvZGUub3JnL3JlcG9zL2NsZHItdG1wL3RydW5rL2RpZmYvc3VwcGxlbWVudGFsL2xhbmd1YWdlX3BsdXJhbF9ydWxlcy5odG1sKVxyXG4gKiBpbiBBbmd1bGFyJ3MgZGVmYXVsdCBlbi1VUyBsb2NhbGU6IFwib25lXCIgYW5kIFwib3RoZXJcIi5cclxuICpcclxuICogV2hpbGUgYSBwbHVyYWwgY2F0ZWdvcnkgbWF5IG1hdGNoIG1hbnkgbnVtYmVycyAoZm9yIGV4YW1wbGUsIGluIGVuLVVTIGxvY2FsZSwgXCJvdGhlclwiIGNhbiBtYXRjaFxyXG4gKiBhbnkgbnVtYmVyIHRoYXQgaXMgbm90IDEpLCBhbiBleHBsaWNpdCBudW1iZXIgcnVsZSBjYW4gb25seSBtYXRjaCBvbmUgbnVtYmVyLiBGb3IgZXhhbXBsZSwgdGhlXHJcbiAqIGV4cGxpY2l0IG51bWJlciBydWxlIGZvciBcIjNcIiBtYXRjaGVzIHRoZSBudW1iZXIgMy4gVGhlcmUgYXJlIGV4YW1wbGVzIG9mIHBsdXJhbCBjYXRlZ29yaWVzXHJcbiAqIGFuZCBleHBsaWNpdCBudW1iZXIgcnVsZXMgdGhyb3VnaG91dCB0aGUgcmVzdCBvZiB0aGlzIGRvY3VtZW50YXRpb24uXHJcbiAqXHJcbiAqICMgQ29uZmlndXJpbmcgbmdQbHVyYWxpemVcclxuICogWW91IGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZSBieSBwcm92aWRpbmcgMiBhdHRyaWJ1dGVzOiBgY291bnRgIGFuZCBgd2hlbmAuXHJcbiAqIFlvdSBjYW4gYWxzbyBwcm92aWRlIGFuIG9wdGlvbmFsIGF0dHJpYnV0ZSwgYG9mZnNldGAuXHJcbiAqXHJcbiAqIFRoZSB2YWx1ZSBvZiB0aGUgYGNvdW50YCBhdHRyaWJ1dGUgY2FuIGJlIGVpdGhlciBhIHN0cmluZyBvciBhbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvblxyXG4gKiBBbmd1bGFyIGV4cHJlc3Npb259OyB0aGVzZSBhcmUgZXZhbHVhdGVkIG9uIHRoZSBjdXJyZW50IHNjb3BlIGZvciBpdHMgYm91bmQgdmFsdWUuXHJcbiAqXHJcbiAqIFRoZSBgd2hlbmAgYXR0cmlidXRlIHNwZWNpZmllcyB0aGUgbWFwcGluZ3MgYmV0d2VlbiBwbHVyYWwgY2F0ZWdvcmllcyBhbmQgdGhlIGFjdHVhbFxyXG4gKiBzdHJpbmcgdG8gYmUgZGlzcGxheWVkLiBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBzaG91bGQgYmUgYSBKU09OIG9iamVjdC5cclxuICpcclxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBjb25maWd1cmUgbmdQbHVyYWxpemU6XHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCJcclxuICAgICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAnMSBwZXJzb24gaXMgdmlld2luZy4nLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne30gcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XHJcbiAqIDwvbmctcGx1cmFsaXplPlxyXG4gKmBgYFxyXG4gKlxyXG4gKiBJbiB0aGUgZXhhbXBsZSwgYFwiMDogTm9ib2R5IGlzIHZpZXdpbmcuXCJgIGlzIGFuIGV4cGxpY2l0IG51bWJlciBydWxlLiBJZiB5b3UgZGlkIG5vdFxyXG4gKiBzcGVjaWZ5IHRoaXMgcnVsZSwgMCB3b3VsZCBiZSBtYXRjaGVkIHRvIHRoZSBcIm90aGVyXCIgY2F0ZWdvcnkgYW5kIFwiMCBwZW9wbGUgYXJlIHZpZXdpbmdcIlxyXG4gKiB3b3VsZCBiZSBzaG93biBpbnN0ZWFkIG9mIFwiTm9ib2R5IGlzIHZpZXdpbmdcIi4gWW91IGNhbiBzcGVjaWZ5IGFuIGV4cGxpY2l0IG51bWJlciBydWxlIGZvclxyXG4gKiBvdGhlciBudW1iZXJzLCBmb3IgZXhhbXBsZSAxMiwgc28gdGhhdCBpbnN0ZWFkIG9mIHNob3dpbmcgXCIxMiBwZW9wbGUgYXJlIHZpZXdpbmdcIiwgeW91IGNhblxyXG4gKiBzaG93IFwiYSBkb3plbiBwZW9wbGUgYXJlIHZpZXdpbmdcIi5cclxuICpcclxuICogWW91IGNhbiB1c2UgYSBzZXQgb2YgY2xvc2VkIGJyYWNlcyAoYHt9YCkgYXMgYSBwbGFjZWhvbGRlciBmb3IgdGhlIG51bWJlciB0aGF0IHlvdSB3YW50IHN1YnN0aXR1dGVkXHJcbiAqIGludG8gcGx1cmFsaXplZCBzdHJpbmdzLiBJbiB0aGUgcHJldmlvdXMgZXhhbXBsZSwgQW5ndWxhciB3aWxsIHJlcGxhY2UgYHt9YCB3aXRoXHJcbiAqIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT5ge3twZXJzb25Db3VudH19YDwvc3Bhbj4uIFRoZSBjbG9zZWQgYnJhY2VzIGB7fWAgaXMgYSBwbGFjZWhvbGRlclxyXG4gKiBmb3IgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7bnVtYmVyRXhwcmVzc2lvbn19PC9zcGFuPi5cclxuICpcclxuICogIyBDb25maWd1cmluZyBuZ1BsdXJhbGl6ZSB3aXRoIG9mZnNldFxyXG4gKiBUaGUgYG9mZnNldGAgYXR0cmlidXRlIGFsbG93cyBmdXJ0aGVyIGN1c3RvbWl6YXRpb24gb2YgcGx1cmFsaXplZCB0ZXh0LCB3aGljaCBjYW4gcmVzdWx0IGluXHJcbiAqIGEgYmV0dGVyIHVzZXIgZXhwZXJpZW5jZS4gRm9yIGV4YW1wbGUsIGluc3RlYWQgb2YgdGhlIG1lc3NhZ2UgXCI0IHBlb3BsZSBhcmUgdmlld2luZyB0aGlzIGRvY3VtZW50XCIsXHJcbiAqIHlvdSBtaWdodCBkaXNwbGF5IFwiSm9obiwgS2F0ZSBhbmQgMiBvdGhlcnMgYXJlIHZpZXdpbmcgdGhpcyBkb2N1bWVudFwiLlxyXG4gKiBUaGUgb2Zmc2V0IGF0dHJpYnV0ZSBhbGxvd3MgeW91IHRvIG9mZnNldCBhIG51bWJlciBieSBhbnkgZGVzaXJlZCB2YWx1ZS5cclxuICogTGV0J3MgdGFrZSBhIGxvb2sgYXQgYW4gZXhhbXBsZTpcclxuICpcclxuICogYGBgaHRtbFxyXG4gKiA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIiBvZmZzZXQ9MlxyXG4gKiAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcclxuICogICAgICAgICAgICAgICAgICAgICAgJzEnOiAne3twZXJzb24xfX0gaXMgdmlld2luZy4nLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAnMic6ICd7e3BlcnNvbjF9fSBhbmQge3twZXJzb24yfX0gYXJlIHZpZXdpbmcuJyxcclxuICogICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyxcclxuICogICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQge30gb3RoZXIgcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XHJcbiAqIDwvbmctcGx1cmFsaXplPlxyXG4gKiBgYGBcclxuICpcclxuICogTm90aWNlIHRoYXQgd2UgYXJlIHN0aWxsIHVzaW5nIHR3byBwbHVyYWwgY2F0ZWdvcmllcyhvbmUsIG90aGVyKSwgYnV0IHdlIGFkZGVkXHJcbiAqIHRocmVlIGV4cGxpY2l0IG51bWJlciBydWxlcyAwLCAxIGFuZCAyLlxyXG4gKiBXaGVuIG9uZSBwZXJzb24sIHBlcmhhcHMgSm9obiwgdmlld3MgdGhlIGRvY3VtZW50LCBcIkpvaG4gaXMgdmlld2luZ1wiIHdpbGwgYmUgc2hvd24uXHJcbiAqIFdoZW4gdGhyZWUgcGVvcGxlIHZpZXcgdGhlIGRvY3VtZW50LCBubyBleHBsaWNpdCBudW1iZXIgcnVsZSBpcyBmb3VuZCwgc29cclxuICogYW4gb2Zmc2V0IG9mIDIgaXMgdGFrZW4gb2ZmIDMsIGFuZCBBbmd1bGFyIHVzZXMgMSB0byBkZWNpZGUgdGhlIHBsdXJhbCBjYXRlZ29yeS5cclxuICogSW4gdGhpcyBjYXNlLCBwbHVyYWwgY2F0ZWdvcnkgJ29uZScgaXMgbWF0Y2hlZCBhbmQgXCJKb2huLCBNYXJ5IGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nXCJcclxuICogaXMgc2hvd24uXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB3aGVuIHlvdSBzcGVjaWZ5IG9mZnNldHMsIHlvdSBtdXN0IHByb3ZpZGUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIGZvclxyXG4gKiBudW1iZXJzIGZyb20gMCB1cCB0byBhbmQgaW5jbHVkaW5nIHRoZSBvZmZzZXQuIElmIHlvdSB1c2UgYW4gb2Zmc2V0IG9mIDMsIGZvciBleGFtcGxlLFxyXG4gKiB5b3UgbXVzdCBwcm92aWRlIGV4cGxpY2l0IG51bWJlciBydWxlcyBmb3IgMCwgMSwgMiBhbmQgMy4gWW91IG11c3QgYWxzbyBwcm92aWRlIHBsdXJhbCBzdHJpbmdzIGZvclxyXG4gKiBwbHVyYWwgY2F0ZWdvcmllcyBcIm9uZVwiIGFuZCBcIm90aGVyXCIuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfGV4cHJlc3Npb259IGNvdW50IFRoZSB2YXJpYWJsZSB0byBiZSBib3VuZCB0by5cclxuICogQHBhcmFtIHtzdHJpbmd9IHdoZW4gVGhlIG1hcHBpbmcgYmV0d2VlbiBwbHVyYWwgY2F0ZWdvcnkgdG8gaXRzIGNvcnJlc3BvbmRpbmcgc3RyaW5ncy5cclxuICogQHBhcmFtIHtudW1iZXI9fSBvZmZzZXQgT2Zmc2V0IHRvIGRlZHVjdCBmcm9tIHRoZSB0b3RhbCBudW1iZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZSBtb2R1bGU9XCJwbHVyYWxpemVFeGFtcGxlXCI+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdwbHVyYWxpemVFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBlcnNvbjEgPSAnSWdvcic7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBlcnNvbjIgPSAnTWlza28nO1xyXG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb25Db3VudCA9IDE7XHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgUGVyc29uIDE6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb24xXCIgdmFsdWU9XCJJZ29yXCIgLz48YnIvPlxyXG4gICAgICAgICAgUGVyc29uIDI6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb24yXCIgdmFsdWU9XCJNaXNrb1wiIC8+PGJyLz5cclxuICAgICAgICAgIE51bWJlciBvZiBQZW9wbGU6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb25Db3VudFwiIHZhbHVlPVwiMVwiIC8+PGJyLz5cclxuXHJcbiAgICAgICAgICA8IS0tLSBFeGFtcGxlIHdpdGggc2ltcGxlIHBsdXJhbGl6YXRpb24gcnVsZXMgZm9yIGVuIGxvY2FsZSAtLS0+XHJcbiAgICAgICAgICBXaXRob3V0IE9mZnNldDpcclxuICAgICAgICAgIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAnMSBwZXJzb24gaXMgdmlld2luZy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t9IHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxyXG4gICAgICAgICAgPC9uZy1wbHVyYWxpemU+PGJyPlxyXG5cclxuICAgICAgICAgIDwhLS0tIEV4YW1wbGUgd2l0aCBvZmZzZXQgLS0tPlxyXG4gICAgICAgICAgV2l0aCBPZmZzZXQoMik6XHJcbiAgICAgICAgICA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIiBvZmZzZXQ9MlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMSc6ICd7e3BlcnNvbjF9fSBpcyB2aWV3aW5nLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMic6ICd7e3BlcnNvbjF9fSBhbmQge3twZXJzb24yfX0gYXJlIHZpZXdpbmcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCB7fSBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cclxuICAgICAgICAgIDwvbmctcGx1cmFsaXplPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIHNob3cgY29ycmVjdCBwbHVyYWxpemVkIHN0cmluZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHdpdGhvdXRPZmZzZXQgPSBlbGVtZW50LmFsbChieS5jc3MoJ25nLXBsdXJhbGl6ZScpKS5nZXQoMCk7XHJcbiAgICAgICAgICB2YXIgd2l0aE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgxKTtcclxuICAgICAgICAgIHZhciBjb3VudElucHV0ID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uQ291bnQnKSk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCcxIHBlcnNvbiBpcyB2aWV3aW5nLicpO1xyXG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yIGlzIHZpZXdpbmcuJyk7XHJcblxyXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnMCcpO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnTm9ib2R5IGlzIHZpZXdpbmcuJyk7XHJcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ05vYm9keSBpcyB2aWV3aW5nLicpO1xyXG5cclxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzInKTtcclxuXHJcbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzIgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xyXG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yIGFuZCBNaXNrbyBhcmUgdmlld2luZy4nKTtcclxuXHJcbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCczJyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCczIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcclxuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciwgTWlza28gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyk7XHJcblxyXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnNCcpO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnNCBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XHJcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IsIE1pc2tvIGFuZCAyIG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpdCgnc2hvdWxkIHNob3cgZGF0YS1ib3VuZCBuYW1lcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHdpdGhPZmZzZXQgPSBlbGVtZW50LmFsbChieS5jc3MoJ25nLXBsdXJhbGl6ZScpKS5nZXQoMSk7XHJcbiAgICAgICAgICB2YXIgcGVyc29uQ291bnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb25Db3VudCcpKTtcclxuICAgICAgICAgIHZhciBwZXJzb24xID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uMScpKTtcclxuICAgICAgICAgIHZhciBwZXJzb24yID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uMicpKTtcclxuICAgICAgICAgIHBlcnNvbkNvdW50LmNsZWFyKCk7XHJcbiAgICAgICAgICBwZXJzb25Db3VudC5zZW5kS2V5cygnNCcpO1xyXG4gICAgICAgICAgcGVyc29uMS5jbGVhcigpO1xyXG4gICAgICAgICAgcGVyc29uMS5zZW5kS2V5cygnRGknKTtcclxuICAgICAgICAgIHBlcnNvbjIuY2xlYXIoKTtcclxuICAgICAgICAgIHBlcnNvbjIuc2VuZEtleXMoJ1ZvanRhJyk7XHJcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0RpLCBWb2p0YSBhbmQgMiBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ1BsdXJhbGl6ZURpcmVjdGl2ZSA9IFsnJGxvY2FsZScsICckaW50ZXJwb2xhdGUnLCBmdW5jdGlvbigkbG9jYWxlLCAkaW50ZXJwb2xhdGUpIHtcclxuICB2YXIgQlJBQ0UgPSAve30vZztcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICB2YXIgbnVtYmVyRXhwID0gYXR0ci5jb3VudCxcclxuICAgICAgICAgIHdoZW5FeHAgPSBhdHRyLiRhdHRyLndoZW4gJiYgZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIud2hlbiksIC8vIHdlIGhhdmUge3t9fSBpbiBhdHRyc1xyXG4gICAgICAgICAgb2Zmc2V0ID0gYXR0ci5vZmZzZXQgfHwgMCxcclxuICAgICAgICAgIHdoZW5zID0gc2NvcGUuJGV2YWwod2hlbkV4cCkgfHwge30sXHJcbiAgICAgICAgICB3aGVuc0V4cEZucyA9IHt9LFxyXG4gICAgICAgICAgc3RhcnRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2woKSxcclxuICAgICAgICAgIGVuZFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKSxcclxuICAgICAgICAgIGlzV2hlbiA9IC9ed2hlbihNaW51cyk/KC4rKSQvO1xyXG5cclxuICAgICAgZm9yRWFjaChhdHRyLCBmdW5jdGlvbihleHByZXNzaW9uLCBhdHRyaWJ1dGVOYW1lKSB7XHJcbiAgICAgICAgaWYgKGlzV2hlbi50ZXN0KGF0dHJpYnV0ZU5hbWUpKSB7XHJcbiAgICAgICAgICB3aGVuc1tsb3dlcmNhc2UoYXR0cmlidXRlTmFtZS5yZXBsYWNlKCd3aGVuJywgJycpLnJlcGxhY2UoJ01pbnVzJywgJy0nKSldID1cclxuICAgICAgICAgICAgZWxlbWVudC5hdHRyKGF0dHIuJGF0dHJbYXR0cmlidXRlTmFtZV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGZvckVhY2god2hlbnMsIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGtleSkge1xyXG4gICAgICAgIHdoZW5zRXhwRm5zW2tleV0gPVxyXG4gICAgICAgICAgJGludGVycG9sYXRlKGV4cHJlc3Npb24ucmVwbGFjZShCUkFDRSwgc3RhcnRTeW1ib2wgKyBudW1iZXJFeHAgKyAnLScgK1xyXG4gICAgICAgICAgICBvZmZzZXQgKyBlbmRTeW1ib2wpKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gbmdQbHVyYWxpemVXYXRjaCgpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUZsb2F0KHNjb3BlLiRldmFsKG51bWJlckV4cCkpO1xyXG5cclxuICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgLy9pZiBleHBsaWNpdCBudW1iZXIgcnVsZSBzdWNoIGFzIDEsIDIsIDMuLi4gaXMgZGVmaW5lZCwganVzdCB1c2UgaXQuIE90aGVyd2lzZSxcclxuICAgICAgICAgIC8vY2hlY2sgaXQgYWdhaW5zdCBwbHVyYWxpemF0aW9uIHJ1bGVzIGluICRsb2NhbGUgc2VydmljZVxyXG4gICAgICAgICAgaWYgKCEodmFsdWUgaW4gd2hlbnMpKSB2YWx1ZSA9ICRsb2NhbGUucGx1cmFsQ2F0KHZhbHVlIC0gb2Zmc2V0KTtcclxuICAgICAgICAgICByZXR1cm4gd2hlbnNFeHBGbnNbdmFsdWVdKHNjb3BlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgZnVuY3Rpb24gbmdQbHVyYWxpemVXYXRjaEFjdGlvbihuZXdWYWwpIHtcclxuICAgICAgICBlbGVtZW50LnRleHQobmV3VmFsKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1JlcGVhdFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ1JlcGVhdGAgZGlyZWN0aXZlIGluc3RhbnRpYXRlcyBhIHRlbXBsYXRlIG9uY2UgcGVyIGl0ZW0gZnJvbSBhIGNvbGxlY3Rpb24uIEVhY2ggdGVtcGxhdGVcclxuICogaW5zdGFuY2UgZ2V0cyBpdHMgb3duIHNjb3BlLCB3aGVyZSB0aGUgZ2l2ZW4gbG9vcCB2YXJpYWJsZSBpcyBzZXQgdG8gdGhlIGN1cnJlbnQgY29sbGVjdGlvbiBpdGVtLFxyXG4gKiBhbmQgYCRpbmRleGAgaXMgc2V0IHRvIHRoZSBpdGVtIGluZGV4IG9yIGtleS5cclxuICpcclxuICogU3BlY2lhbCBwcm9wZXJ0aWVzIGFyZSBleHBvc2VkIG9uIHRoZSBsb2NhbCBzY29wZSBvZiBlYWNoIHRlbXBsYXRlIGluc3RhbmNlLCBpbmNsdWRpbmc6XHJcbiAqXHJcbiAqIHwgVmFyaWFibGUgIHwgVHlwZSAgICAgICAgICAgIHwgRGV0YWlscyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfC0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxyXG4gKiB8IGAkaW5kZXhgICB8IHtAdHlwZSBudW1iZXJ9ICB8IGl0ZXJhdG9yIG9mZnNldCBvZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCAoMC4ubGVuZ3RoLTEpICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqIHwgYCRmaXJzdGAgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCBpcyBmaXJzdCBpbiB0aGUgaXRlcmF0b3IuICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCBgJG1pZGRsZWAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSByZXBlYXRlZCBlbGVtZW50IGlzIGJldHdlZW4gdGhlIGZpcnN0IGFuZCBsYXN0IGluIHRoZSBpdGVyYXRvci4gfFxyXG4gKiB8IGAkbGFzdGAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgbGFzdCBpbiB0aGUgaXRlcmF0b3IuICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqIHwgYCRldmVuYCAgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgaXRlcmF0b3IgcG9zaXRpb24gYCRpbmRleGAgaXMgZXZlbiAob3RoZXJ3aXNlIGZhbHNlKS4gICAgICAgICAgIHxcclxuICogfCBgJG9kZGAgICAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSBpdGVyYXRvciBwb3NpdGlvbiBgJGluZGV4YCBpcyBvZGQgKG90aGVyd2lzZSBmYWxzZSkuICAgICAgICAgICAgfFxyXG4gKlxyXG4gKiBDcmVhdGluZyBhbGlhc2VzIGZvciB0aGVzZSBwcm9wZXJ0aWVzIGlzIHBvc3NpYmxlIHdpdGgge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0luaXQgYG5nSW5pdGB9LlxyXG4gKiBUaGlzIG1heSBiZSB1c2VmdWwgd2hlbiwgZm9yIGluc3RhbmNlLCBuZXN0aW5nIG5nUmVwZWF0cy5cclxuICpcclxuICogIyBTcGVjaWFsIHJlcGVhdCBzdGFydCBhbmQgZW5kIHBvaW50c1xyXG4gKiBUbyByZXBlYXQgYSBzZXJpZXMgb2YgZWxlbWVudHMgaW5zdGVhZCBvZiBqdXN0IG9uZSBwYXJlbnQgZWxlbWVudCwgbmdSZXBlYXQgKGFzIHdlbGwgYXMgb3RoZXIgbmcgZGlyZWN0aXZlcykgc3VwcG9ydHMgZXh0ZW5kaW5nXHJcbiAqIHRoZSByYW5nZSBvZiB0aGUgcmVwZWF0ZXIgYnkgZGVmaW5pbmcgZXhwbGljaXQgc3RhcnQgYW5kIGVuZCBwb2ludHMgYnkgdXNpbmcgKipuZy1yZXBlYXQtc3RhcnQqKiBhbmQgKipuZy1yZXBlYXQtZW5kKiogcmVzcGVjdGl2ZWx5LlxyXG4gKiBUaGUgKipuZy1yZXBlYXQtc3RhcnQqKiBkaXJlY3RpdmUgd29ya3MgdGhlIHNhbWUgYXMgKipuZy1yZXBlYXQqKiwgYnV0IHdpbGwgcmVwZWF0IGFsbCB0aGUgSFRNTCBjb2RlIChpbmNsdWRpbmcgdGhlIHRhZyBpdCdzIGRlZmluZWQgb24pXHJcbiAqIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIGVuZGluZyBIVE1MIHRhZyB3aGVyZSAqKm5nLXJlcGVhdC1lbmQqKiBpcyBwbGFjZWQuXHJcbiAqXHJcbiAqIFRoZSBleGFtcGxlIGJlbG93IG1ha2VzIHVzZSBvZiB0aGlzIGZlYXR1cmU6XHJcbiAqIGBgYGh0bWxcclxuICogICA8aGVhZGVyIG5nLXJlcGVhdC1zdGFydD1cIml0ZW0gaW4gaXRlbXNcIj5cclxuICogICAgIEhlYWRlciB7eyBpdGVtIH19XHJcbiAqICAgPC9oZWFkZXI+XHJcbiAqICAgPGRpdiBjbGFzcz1cImJvZHlcIj5cclxuICogICAgIEJvZHkge3sgaXRlbSB9fVxyXG4gKiAgIDwvZGl2PlxyXG4gKiAgIDxmb290ZXIgbmctcmVwZWF0LWVuZD5cclxuICogICAgIEZvb3RlciB7eyBpdGVtIH19XHJcbiAqICAgPC9mb290ZXI+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBBbmQgd2l0aCBhbiBpbnB1dCBvZiB7QHR5cGUgWydBJywnQiddfSBmb3IgdGhlIGl0ZW1zIHZhcmlhYmxlIGluIHRoZSBleGFtcGxlIGFib3ZlLCB0aGUgb3V0cHV0IHdpbGwgZXZhbHVhdGUgdG86XHJcbiAqIGBgYGh0bWxcclxuICogICA8aGVhZGVyPlxyXG4gKiAgICAgSGVhZGVyIEFcclxuICogICA8L2hlYWRlcj5cclxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxyXG4gKiAgICAgQm9keSBBXHJcbiAqICAgPC9kaXY+XHJcbiAqICAgPGZvb3Rlcj5cclxuICogICAgIEZvb3RlciBBXHJcbiAqICAgPC9mb290ZXI+XHJcbiAqICAgPGhlYWRlcj5cclxuICogICAgIEhlYWRlciBCXHJcbiAqICAgPC9oZWFkZXI+XHJcbiAqICAgPGRpdiBjbGFzcz1cImJvZHlcIj5cclxuICogICAgIEJvZHkgQlxyXG4gKiAgIDwvZGl2PlxyXG4gKiAgIDxmb290ZXI+XHJcbiAqICAgICBGb290ZXIgQlxyXG4gKiAgIDwvZm9vdGVyPlxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGN1c3RvbSBzdGFydCBhbmQgZW5kIHBvaW50cyBmb3IgbmdSZXBlYXQgYWxzbyBzdXBwb3J0IGFsbCBvdGhlciBIVE1MIGRpcmVjdGl2ZSBzeW50YXggZmxhdm9ycyBwcm92aWRlZCBpbiBBbmd1bGFySlMgKHN1Y2hcclxuICogYXMgKipkYXRhLW5nLXJlcGVhdC1zdGFydCoqLCAqKngtbmctcmVwZWF0LXN0YXJ0KiogYW5kICoqbmc6cmVwZWF0LXN0YXJ0KiopLlxyXG4gKlxyXG4gKiBAYW5pbWF0aW9uc1xyXG4gKiAqKi5lbnRlcioqIC0gd2hlbiBhIG5ldyBpdGVtIGlzIGFkZGVkIHRvIHRoZSBsaXN0IG9yIHdoZW4gYW4gaXRlbSBpcyByZXZlYWxlZCBhZnRlciBhIGZpbHRlclxyXG4gKlxyXG4gKiAqKi5sZWF2ZSoqIC0gd2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSB0aGUgbGlzdCBvciB3aGVuIGFuIGl0ZW0gaXMgZmlsdGVyZWQgb3V0XHJcbiAqXHJcbiAqICoqLm1vdmUqKiAtIHdoZW4gYW4gYWRqYWNlbnQgaXRlbSBpcyBmaWx0ZXJlZCBvdXQgY2F1c2luZyBhIHJlb3JkZXIgb3Igd2hlbiB0aGUgaXRlbSBjb250ZW50cyBhcmUgcmVvcmRlcmVkXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAc2NvcGVcclxuICogQHByaW9yaXR5IDEwMDBcclxuICogQHBhcmFtIHtyZXBlYXRfZXhwcmVzc2lvbn0gbmdSZXBlYXQgVGhlIGV4cHJlc3Npb24gaW5kaWNhdGluZyBob3cgdG8gZW51bWVyYXRlIGEgY29sbGVjdGlvbi4gVGhlc2VcclxuICogICBmb3JtYXRzIGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkOlxyXG4gKlxyXG4gKiAgICogYHZhcmlhYmxlIGluIGV4cHJlc3Npb25gIOKAkyB3aGVyZSB2YXJpYWJsZSBpcyB0aGUgdXNlciBkZWZpbmVkIGxvb3AgdmFyaWFibGUgYW5kIGBleHByZXNzaW9uYFxyXG4gKiAgICAgaXMgYSBzY29wZSBleHByZXNzaW9uIGdpdmluZyB0aGUgY29sbGVjdGlvbiB0byBlbnVtZXJhdGUuXHJcbiAqXHJcbiAqICAgICBGb3IgZXhhbXBsZTogYGFsYnVtIGluIGFydGlzdC5hbGJ1bXNgLlxyXG4gKlxyXG4gKiAgICogYChrZXksIHZhbHVlKSBpbiBleHByZXNzaW9uYCDigJMgd2hlcmUgYGtleWAgYW5kIGB2YWx1ZWAgY2FuIGJlIGFueSB1c2VyIGRlZmluZWQgaWRlbnRpZmllcnMsXHJcbiAqICAgICBhbmQgYGV4cHJlc3Npb25gIGlzIHRoZSBzY29wZSBleHByZXNzaW9uIGdpdmluZyB0aGUgY29sbGVjdGlvbiB0byBlbnVtZXJhdGUuXHJcbiAqXHJcbiAqICAgICBGb3IgZXhhbXBsZTogYChuYW1lLCBhZ2UpIGluIHsnYWRhbSc6MTAsICdhbWFsaWUnOjEyfWAuXHJcbiAqXHJcbiAqICAgKiBgdmFyaWFibGUgaW4gZXhwcmVzc2lvbiB0cmFjayBieSB0cmFja2luZ19leHByZXNzaW9uYCDigJMgWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gb3B0aW9uYWwgdHJhY2tpbmcgZnVuY3Rpb25cclxuICogICAgIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGFzc29jaWF0ZSB0aGUgb2JqZWN0cyBpbiB0aGUgY29sbGVjdGlvbiB3aXRoIHRoZSBET00gZWxlbWVudHMuIElmIG5vIHRyYWNraW5nIGZ1bmN0aW9uXHJcbiAqICAgICBpcyBzcGVjaWZpZWQgdGhlIG5nLXJlcGVhdCBhc3NvY2lhdGVzIGVsZW1lbnRzIGJ5IGlkZW50aXR5IGluIHRoZSBjb2xsZWN0aW9uLiBJdCBpcyBhbiBlcnJvciB0byBoYXZlXHJcbiAqICAgICBtb3JlIHRoYW4gb25lIHRyYWNraW5nIGZ1bmN0aW9uIHRvIHJlc29sdmUgdG8gdGhlIHNhbWUga2V5LiAoVGhpcyB3b3VsZCBtZWFuIHRoYXQgdHdvIGRpc3RpbmN0IG9iamVjdHMgYXJlXHJcbiAqICAgICBtYXBwZWQgdG8gdGhlIHNhbWUgRE9NIGVsZW1lbnQsIHdoaWNoIGlzIG5vdCBwb3NzaWJsZS4pICBGaWx0ZXJzIHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoZSBleHByZXNzaW9uLFxyXG4gKiAgICAgYmVmb3JlIHNwZWNpZnlpbmcgYSB0cmFja2luZyBleHByZXNzaW9uLlxyXG4gKlxyXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zYCBpcyBlcXVpdmFsZW50IHRvIGBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5ICRpZChpdGVtKWAuIFRoaXMgaW1wbGllcyB0aGF0IHRoZSBET00gZWxlbWVudHNcclxuICogICAgIHdpbGwgYmUgYXNzb2NpYXRlZCBieSBpdGVtIGlkZW50aXR5IGluIHRoZSBhcnJheS5cclxuICpcclxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uIGFzIGFsaWFzX2V4cHJlc3Npb25gIOKAkyBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCBhbGlhcyBleHByZXNzaW9uIHdoaWNoIHdpbGwgdGhlbiBzdG9yZSB0aGVcclxuICogICAgIGludGVybWVkaWF0ZSByZXN1bHRzIG9mIHRoZSByZXBlYXRlciBhZnRlciB0aGUgZmlsdGVycyBoYXZlIGJlZW4gYXBwbGllZC4gVHlwaWNhbGx5IHRoaXMgaXMgdXNlZCB0byByZW5kZXIgYSBzcGVjaWFsIG1lc3NhZ2VcclxuICogICAgIHdoZW4gYSBmaWx0ZXIgaXMgYWN0aXZlIG9uIHRoZSByZXBlYXRlciwgYnV0IHRoZSBmaWx0ZXJlZCByZXN1bHQgc2V0IGlzIGVtcHR5LlxyXG4gKlxyXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zIHwgZmlsdGVyOnggYXMgcmVzdWx0c2Agd2lsbCBzdG9yZSB0aGUgZnJhZ21lbnQgb2YgdGhlIHJlcGVhdGVkIGl0ZW1zIGFzIGByZXN1bHRzYCwgYnV0IG9ubHkgYWZ0ZXJcclxuICogICAgIHRoZSBpdGVtcyBoYXZlIGJlZW4gcHJvY2Vzc2VkIHRocm91Z2ggdGhlIGZpbHRlci5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSAkaWQoaXRlbSlgLiBBIGJ1aWx0IGluIGAkaWQoKWAgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYXNzaWduIGEgdW5pcXVlXHJcbiAqICAgICBgJCRoYXNoS2V5YCBwcm9wZXJ0eSB0byBlYWNoIGl0ZW0gaW4gdGhlIGFycmF5LiBUaGlzIHByb3BlcnR5IGlzIHRoZW4gdXNlZCBhcyBhIGtleSB0byBhc3NvY2lhdGVkIERPTSBlbGVtZW50c1xyXG4gKiAgICAgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBpdGVtIGluIHRoZSBhcnJheSBieSBpZGVudGl0eS4gTW92aW5nIHRoZSBzYW1lIG9iamVjdCBpbiBhcnJheSB3b3VsZCBtb3ZlIHRoZSBET01cclxuICogICAgIGVsZW1lbnQgaW4gdGhlIHNhbWUgd2F5IGluIHRoZSBET00uXHJcbiAqXHJcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgaXRlbS5pZGAgaXMgYSB0eXBpY2FsIHBhdHRlcm4gd2hlbiB0aGUgaXRlbXMgY29tZSBmcm9tIHRoZSBkYXRhYmFzZS4gSW4gdGhpc1xyXG4gKiAgICAgY2FzZSB0aGUgb2JqZWN0IGlkZW50aXR5IGRvZXMgbm90IG1hdHRlci4gVHdvIG9iamVjdHMgYXJlIGNvbnNpZGVyZWQgZXF1aXZhbGVudCBhcyBsb25nIGFzIHRoZWlyIGBpZGBcclxuICogICAgIHByb3BlcnR5IGlzIHNhbWUuXHJcbiAqXHJcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgfCBmaWx0ZXI6c2VhcmNoVGV4dCB0cmFjayBieSBpdGVtLmlkYCBpcyBhIHBhdHRlcm4gdGhhdCBtaWdodCBiZSB1c2VkIHRvIGFwcGx5IGEgZmlsdGVyXHJcbiAqICAgICB0byBpdGVtcyBpbiBjb25qdW5jdGlvbiB3aXRoIGEgdHJhY2tpbmcgZXhwcmVzc2lvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogVGhpcyBleGFtcGxlIGluaXRpYWxpemVzIHRoZSBzY29wZSB0byBhIGxpc3Qgb2YgbmFtZXMgYW5kXHJcbiAqIHRoZW4gdXNlcyBgbmdSZXBlYXRgIHRvIGRpc3BsYXkgZXZlcnkgcGVyc29uOlxyXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGRpdiBuZy1pbml0PVwiZnJpZW5kcyA9IFtcclxuICAgICAgICB7bmFtZTonSm9obicsIGFnZToyNSwgZ2VuZGVyOidib3knfSxcclxuICAgICAgICB7bmFtZTonSmVzc2llJywgYWdlOjMwLCBnZW5kZXI6J2dpcmwnfSxcclxuICAgICAgICB7bmFtZTonSm9oYW5uYScsIGFnZToyOCwgZ2VuZGVyOidnaXJsJ30sXHJcbiAgICAgICAge25hbWU6J0pveScsIGFnZToxNSwgZ2VuZGVyOidnaXJsJ30sXHJcbiAgICAgICAge25hbWU6J01hcnknLCBhZ2U6MjgsIGdlbmRlcjonZ2lybCd9LFxyXG4gICAgICAgIHtuYW1lOidQZXRlcicsIGFnZTo5NSwgZ2VuZGVyOidib3knfSxcclxuICAgICAgICB7bmFtZTonU2ViYXN0aWFuJywgYWdlOjUwLCBnZW5kZXI6J2JveSd9LFxyXG4gICAgICAgIHtuYW1lOidFcmlrYScsIGFnZToyNywgZ2VuZGVyOidnaXJsJ30sXHJcbiAgICAgICAge25hbWU6J1BhdHJpY2snLCBhZ2U6NDAsIGdlbmRlcjonYm95J30sXHJcbiAgICAgICAge25hbWU6J1NhbWFudGhhJywgYWdlOjYwLCBnZW5kZXI6J2dpcmwnfVxyXG4gICAgICBdXCI+XHJcbiAgICAgICAgSSBoYXZlIHt7ZnJpZW5kcy5sZW5ndGh9fSBmcmllbmRzLiBUaGV5IGFyZTpcclxuICAgICAgICA8aW5wdXQgdHlwZT1cInNlYXJjaFwiIG5nLW1vZGVsPVwicVwiIHBsYWNlaG9sZGVyPVwiZmlsdGVyIGZyaWVuZHMuLi5cIiAvPlxyXG4gICAgICAgIDx1bCBjbGFzcz1cImV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXJcIj5cclxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBmaWx0ZXI6cSBhcyByZXN1bHRzXCI+XHJcbiAgICAgICAgICAgIFt7eyRpbmRleCArIDF9fV0ge3tmcmllbmQubmFtZX19IHdobyBpcyB7e2ZyaWVuZC5hZ2V9fSB5ZWFycyBvbGQuXHJcbiAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1pZj1cInJlc3VsdHMubGVuZ3RoID09IDBcIj5cclxuICAgICAgICAgICAgPHN0cm9uZz5ObyByZXN1bHRzIGZvdW5kLi4uPC9zdHJvbmc+XHJcbiAgICAgICAgICA8L2xpPlxyXG4gICAgICAgIDwvdWw+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XHJcbiAgICAgIC5leGFtcGxlLWFuaW1hdGUtY29udGFpbmVyIHtcclxuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xyXG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgbGlzdC1zdHlsZTpub25lO1xyXG4gICAgICAgIG1hcmdpbjowO1xyXG4gICAgICAgIHBhZGRpbmc6MCAxMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQge1xyXG4gICAgICAgIGxpbmUtaGVpZ2h0OjQwcHg7XHJcbiAgICAgICAgbGlzdC1zdHlsZTpub25lO1xyXG4gICAgICAgIGJveC1zaXppbmc6Ym9yZGVyLWJveDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUsXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlcixcclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlIHtcclxuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xyXG4gICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUubmctbGVhdmUtYWN0aXZlLFxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZSxcclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyIHtcclxuICAgICAgICBvcGFjaXR5OjA7XHJcbiAgICAgICAgbWF4LWhlaWdodDowO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUsXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLm5nLW1vdmUtYWN0aXZlLFxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcclxuICAgICAgICBvcGFjaXR5OjE7XHJcbiAgICAgICAgbWF4LWhlaWdodDo0MHB4O1xyXG4gICAgICB9XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciBmcmllbmRzID0gZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoJ2ZyaWVuZCBpbiBmcmllbmRzJykpO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCByZW5kZXIgaW5pdGlhbCBkYXRhIHNldCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMTApO1xyXG4gICAgICAgIGV4cGVjdChmcmllbmRzLmdldCgwKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1sxXSBKb2huIHdobyBpcyAyNSB5ZWFycyBvbGQuJyk7XHJcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDEpLmdldFRleHQoKSkudG9FcXVhbCgnWzJdIEplc3NpZSB3aG8gaXMgMzAgeWVhcnMgb2xkLicpO1xyXG4gICAgICAgIGV4cGVjdChmcmllbmRzLmxhc3QoKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1sxMF0gU2FtYW50aGEgd2hvIGlzIDYwIHllYXJzIG9sZC4nKTtcclxuICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdmcmllbmRzLmxlbmd0aCcpKS5nZXRUZXh0KCkpXHJcbiAgICAgICAgICAgIC50b01hdGNoKFwiSSBoYXZlIDEwIGZyaWVuZHMuIFRoZXkgYXJlOlwiKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgcmVwZWF0ZXIgd2hlbiBmaWx0ZXIgcHJlZGljYXRlIGNoYW5nZXMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGZyaWVuZHMuY291bnQoKSkudG9CZSgxMCk7XHJcblxyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdxJykpLnNlbmRLZXlzKCdtYScpO1xyXG5cclxuICAgICAgICAgZXhwZWN0KGZyaWVuZHMuY291bnQoKSkudG9CZSgyKTtcclxuICAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDApLmdldFRleHQoKSkudG9FcXVhbCgnWzFdIE1hcnkgd2hvIGlzIDI4IHllYXJzIG9sZC4nKTtcclxuICAgICAgICAgZXhwZWN0KGZyaWVuZHMubGFzdCgpLmdldFRleHQoKSkudG9FcXVhbCgnWzJdIFNhbWFudGhhIHdobyBpcyA2MCB5ZWFycyBvbGQuJyk7XHJcbiAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nUmVwZWF0RGlyZWN0aXZlID0gWyckcGFyc2UnLCAnJGFuaW1hdGUnLCBmdW5jdGlvbigkcGFyc2UsICRhbmltYXRlKSB7XHJcbiAgdmFyIE5HX1JFTU9WRUQgPSAnJCROR19SRU1PVkVEJztcclxuICB2YXIgbmdSZXBlYXRNaW5FcnIgPSBtaW5FcnIoJ25nUmVwZWF0Jyk7XHJcblxyXG4gIHZhciB1cGRhdGVTY29wZSA9IGZ1bmN0aW9uKHNjb3BlLCBpbmRleCwgdmFsdWVJZGVudGlmaWVyLCB2YWx1ZSwga2V5SWRlbnRpZmllciwga2V5LCBhcnJheUxlbmd0aCkge1xyXG4gICAgLy8gVE9ETyhwZXJmKTogZ2VuZXJhdGUgc2V0dGVycyB0byBzaGF2ZSBvZmYgfjQwbXMgb3IgMS0xLjUlXHJcbiAgICBzY29wZVt2YWx1ZUlkZW50aWZpZXJdID0gdmFsdWU7XHJcbiAgICBpZiAoa2V5SWRlbnRpZmllcikgc2NvcGVba2V5SWRlbnRpZmllcl0gPSBrZXk7XHJcbiAgICBzY29wZS4kaW5kZXggPSBpbmRleDtcclxuICAgIHNjb3BlLiRmaXJzdCA9IChpbmRleCA9PT0gMCk7XHJcbiAgICBzY29wZS4kbGFzdCA9IChpbmRleCA9PT0gKGFycmF5TGVuZ3RoIC0gMSkpO1xyXG4gICAgc2NvcGUuJG1pZGRsZSA9ICEoc2NvcGUuJGZpcnN0IHx8IHNjb3BlLiRsYXN0KTtcclxuICAgIC8vIGpzaGludCBiaXR3aXNlOiBmYWxzZVxyXG4gICAgc2NvcGUuJG9kZCA9ICEoc2NvcGUuJGV2ZW4gPSAoaW5kZXgmMSkgPT09IDApO1xyXG4gICAgLy8ganNoaW50IGJpdHdpc2U6IHRydWVcclxuICB9O1xyXG5cclxuICB2YXIgZ2V0QmxvY2tTdGFydCA9IGZ1bmN0aW9uKGJsb2NrKSB7XHJcbiAgICByZXR1cm4gYmxvY2suY2xvbmVbMF07XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldEJsb2NrRW5kID0gZnVuY3Rpb24oYmxvY2spIHtcclxuICAgIHJldHVybiBibG9jay5jbG9uZVtibG9jay5jbG9uZS5sZW5ndGggLSAxXTtcclxuICB9O1xyXG5cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBtdWx0aUVsZW1lbnQ6IHRydWUsXHJcbiAgICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXHJcbiAgICBwcmlvcml0eTogMTAwMCxcclxuICAgIHRlcm1pbmFsOiB0cnVlLFxyXG4gICAgJCR0bGI6IHRydWUsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ1JlcGVhdENvbXBpbGUoJGVsZW1lbnQsICRhdHRyKSB7XHJcbiAgICAgIHZhciBleHByZXNzaW9uID0gJGF0dHIubmdSZXBlYXQ7XHJcbiAgICAgIHZhciBuZ1JlcGVhdEVuZENvbW1lbnQgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgZW5kIG5nUmVwZWF0OiAnICsgZXhwcmVzc2lvbiArICcgJyk7XHJcblxyXG4gICAgICB2YXIgbWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKC9eXFxzKihbXFxzXFxTXSs/KVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMqJC8pO1xyXG5cclxuICAgICAgaWYgKCFtYXRjaCkge1xyXG4gICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdpZXhwJywgXCJFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgJ19pdGVtXyBpbiBfY29sbGVjdGlvbl9bIHRyYWNrIGJ5IF9pZF9dJyBidXQgZ290ICd7MH0nLlwiLFxyXG4gICAgICAgICAgICBleHByZXNzaW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGxocyA9IG1hdGNoWzFdO1xyXG4gICAgICB2YXIgcmhzID0gbWF0Y2hbMl07XHJcbiAgICAgIHZhciBhbGlhc0FzID0gbWF0Y2hbM107XHJcbiAgICAgIHZhciB0cmFja0J5RXhwID0gbWF0Y2hbNF07XHJcblxyXG4gICAgICBtYXRjaCA9IGxocy5tYXRjaCgvXig/OihbXFwkXFx3XSspfFxcKChbXFwkXFx3XSspXFxzKixcXHMqKFtcXCRcXHddKylcXCkpJC8pO1xyXG5cclxuICAgICAgaWYgKCFtYXRjaCkge1xyXG4gICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdpaWRleHAnLCBcIidfaXRlbV8nIGluICdfaXRlbV8gaW4gX2NvbGxlY3Rpb25fJyBzaG91bGQgYmUgYW4gaWRlbnRpZmllciBvciAnKF9rZXlfLCBfdmFsdWVfKScgZXhwcmVzc2lvbiwgYnV0IGdvdCAnezB9Jy5cIixcclxuICAgICAgICAgICAgbGhzKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgdmFsdWVJZGVudGlmaWVyID0gbWF0Y2hbM10gfHwgbWF0Y2hbMV07XHJcbiAgICAgIHZhciBrZXlJZGVudGlmaWVyID0gbWF0Y2hbMl07XHJcblxyXG4gICAgICBpZiAoYWxpYXNBcyAmJiAoIS9eWyRhLXpBLVpfXVskYS16QS1aMC05X10qJC8udGVzdChhbGlhc0FzKSB8fFxyXG4gICAgICAgICAgL14obnVsbHx1bmRlZmluZWR8dGhpc3xcXCRpbmRleHxcXCRmaXJzdHxcXCRtaWRkbGV8XFwkbGFzdHxcXCRldmVufFxcJG9kZHxcXCRwYXJlbnQpJC8udGVzdChhbGlhc0FzKSkpIHtcclxuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignYmFkaWRlbnQnLCBcImFsaWFzICd7MH0nIGlzIGludmFsaWQgLS0tIG11c3QgYmUgYSB2YWxpZCBKUyBpZGVudGlmaWVyIHdoaWNoIGlzIG5vdCBhIHJlc2VydmVkIG5hbWUuXCIsXHJcbiAgICAgICAgICBhbGlhc0FzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIHRyYWNrQnlFeHBHZXR0ZXIsIHRyYWNrQnlJZEV4cEZuLCB0cmFja0J5SWRBcnJheUZuLCB0cmFja0J5SWRPYmpGbjtcclxuICAgICAgdmFyIGhhc2hGbkxvY2FscyA9IHskaWQ6IGhhc2hLZXl9O1xyXG5cclxuICAgICAgaWYgKHRyYWNrQnlFeHApIHtcclxuICAgICAgICB0cmFja0J5RXhwR2V0dGVyID0gJHBhcnNlKHRyYWNrQnlFeHApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRyYWNrQnlJZEFycmF5Rm4gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGhhc2hLZXkodmFsdWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHJhY2tCeUlkT2JqRm4gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1JlcGVhdExpbmsoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XHJcblxyXG4gICAgICAgIGlmICh0cmFja0J5RXhwR2V0dGVyKSB7XHJcbiAgICAgICAgICB0cmFja0J5SWRFeHBGbiA9IGZ1bmN0aW9uKGtleSwgdmFsdWUsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIC8vIGFzc2lnbiBrZXksIHZhbHVlLCBhbmQgJGluZGV4IHRvIHRoZSBsb2NhbHMgc28gdGhhdCB0aGV5IGNhbiBiZSB1c2VkIGluIGhhc2ggZnVuY3Rpb25zXHJcbiAgICAgICAgICAgIGlmIChrZXlJZGVudGlmaWVyKSBoYXNoRm5Mb2NhbHNba2V5SWRlbnRpZmllcl0gPSBrZXk7XHJcbiAgICAgICAgICAgIGhhc2hGbkxvY2Fsc1t2YWx1ZUlkZW50aWZpZXJdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGhhc2hGbkxvY2Fscy4kaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgcmV0dXJuIHRyYWNrQnlFeHBHZXR0ZXIoJHNjb3BlLCBoYXNoRm5Mb2NhbHMpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIGEgbGlzdCBvZiBlbGVtZW50cyBmcm9tIHByZXZpb3VzIHJ1bi4gVGhpcyBpcyBhIGhhc2ggd2hlcmUga2V5IGlzIHRoZSBpdGVtIGZyb20gdGhlXHJcbiAgICAgICAgLy8gaXRlcmF0b3IsIGFuZCB0aGUgdmFsdWUgaXMgb2JqZWN0cyB3aXRoIGZvbGxvd2luZyBwcm9wZXJ0aWVzLlxyXG4gICAgICAgIC8vICAgLSBzY29wZTogYm91bmQgc2NvcGVcclxuICAgICAgICAvLyAgIC0gZWxlbWVudDogcHJldmlvdXMgZWxlbWVudC5cclxuICAgICAgICAvLyAgIC0gaW5kZXg6IHBvc2l0aW9uXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBXZSBhcmUgdXNpbmcgbm8tcHJvdG8gb2JqZWN0IHNvIHRoYXQgd2UgZG9uJ3QgbmVlZCB0byBndWFyZCBhZ2FpbnN0IGluaGVyaXRlZCBwcm9wcyB2aWFcclxuICAgICAgICAvLyBoYXNPd25Qcm9wZXJ0eS5cclxuICAgICAgICB2YXIgbGFzdEJsb2NrTWFwID0gY3JlYXRlTWFwKCk7XHJcblxyXG4gICAgICAgIC8vd2F0Y2ggcHJvcHNcclxuICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihyaHMsIGZ1bmN0aW9uIG5nUmVwZWF0QWN0aW9uKGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgIHZhciBpbmRleCwgbGVuZ3RoLFxyXG4gICAgICAgICAgICAgIHByZXZpb3VzTm9kZSA9ICRlbGVtZW50WzBdLCAgICAgLy8gbm9kZSB0aGF0IGNsb25lZCBub2RlcyBzaG91bGQgYmUgaW5zZXJ0ZWQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemVkIHRvIHRoZSBjb21tZW50IG5vZGUgYW5jaG9yXHJcbiAgICAgICAgICAgICAgbmV4dE5vZGUsXHJcbiAgICAgICAgICAgICAgLy8gU2FtZSBhcyBsYXN0QmxvY2tNYXAgYnV0IGl0IGhhcyB0aGUgY3VycmVudCBzdGF0ZS4gSXQgd2lsbCBiZWNvbWUgdGhlXHJcbiAgICAgICAgICAgICAgLy8gbGFzdEJsb2NrTWFwIG9uIHRoZSBuZXh0IGl0ZXJhdGlvbi5cclxuICAgICAgICAgICAgICBuZXh0QmxvY2tNYXAgPSBjcmVhdGVNYXAoKSxcclxuICAgICAgICAgICAgICBjb2xsZWN0aW9uTGVuZ3RoLFxyXG4gICAgICAgICAgICAgIGtleSwgdmFsdWUsIC8vIGtleS92YWx1ZSBvZiBpdGVyYXRpb25cclxuICAgICAgICAgICAgICB0cmFja0J5SWQsXHJcbiAgICAgICAgICAgICAgdHJhY2tCeUlkRm4sXHJcbiAgICAgICAgICAgICAgY29sbGVjdGlvbktleXMsXHJcbiAgICAgICAgICAgICAgYmxvY2ssICAgICAgIC8vIGxhc3Qgb2JqZWN0IGluZm9ybWF0aW9uIHtzY29wZSwgZWxlbWVudCwgaWR9XHJcbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXIsXHJcbiAgICAgICAgICAgICAgZWxlbWVudHNUb1JlbW92ZTtcclxuXHJcbiAgICAgICAgICBpZiAoYWxpYXNBcykge1xyXG4gICAgICAgICAgICAkc2NvcGVbYWxpYXNBc10gPSBjb2xsZWN0aW9uO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkge1xyXG4gICAgICAgICAgICBjb2xsZWN0aW9uS2V5cyA9IGNvbGxlY3Rpb247XHJcbiAgICAgICAgICAgIHRyYWNrQnlJZEZuID0gdHJhY2tCeUlkRXhwRm4gfHwgdHJhY2tCeUlkQXJyYXlGbjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyYWNrQnlJZEZuID0gdHJhY2tCeUlkRXhwRm4gfHwgdHJhY2tCeUlkT2JqRm47XHJcbiAgICAgICAgICAgIC8vIGlmIG9iamVjdCwgZXh0cmFjdCBrZXlzLCBzb3J0IHRoZW0gYW5kIHVzZSB0byBkZXRlcm1pbmUgb3JkZXIgb2YgaXRlcmF0aW9uIG92ZXIgb2JqIHByb3BzXHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW1LZXkgaW4gY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmhhc093blByb3BlcnR5KGl0ZW1LZXkpICYmIGl0ZW1LZXkuY2hhckF0KDApICE9ICckJykge1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbktleXMucHVzaChpdGVtS2V5KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sbGVjdGlvbktleXMuc29ydCgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbGxlY3Rpb25MZW5ndGggPSBjb2xsZWN0aW9uS2V5cy5sZW5ndGg7XHJcbiAgICAgICAgICBuZXh0QmxvY2tPcmRlciA9IG5ldyBBcnJheShjb2xsZWN0aW9uTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAvLyBsb2NhdGUgZXhpc3RpbmcgaXRlbXNcclxuICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNvbGxlY3Rpb25MZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAga2V5ID0gKGNvbGxlY3Rpb24gPT09IGNvbGxlY3Rpb25LZXlzKSA/IGluZGV4IDogY29sbGVjdGlvbktleXNbaW5kZXhdO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IGNvbGxlY3Rpb25ba2V5XTtcclxuICAgICAgICAgICAgdHJhY2tCeUlkID0gdHJhY2tCeUlkRm4oa2V5LCB2YWx1ZSwgaW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAobGFzdEJsb2NrTWFwW3RyYWNrQnlJZF0pIHtcclxuICAgICAgICAgICAgICAvLyBmb3VuZCBwcmV2aW91c2x5IHNlZW4gYmxvY2tcclxuICAgICAgICAgICAgICBibG9jayA9IGxhc3RCbG9ja01hcFt0cmFja0J5SWRdO1xyXG4gICAgICAgICAgICAgIGRlbGV0ZSBsYXN0QmxvY2tNYXBbdHJhY2tCeUlkXTtcclxuICAgICAgICAgICAgICBuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXSA9IGJsb2NrO1xyXG4gICAgICAgICAgICAgIG5leHRCbG9ja09yZGVyW2luZGV4XSA9IGJsb2NrO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5leHRCbG9ja01hcFt0cmFja0J5SWRdKSB7XHJcbiAgICAgICAgICAgICAgLy8gaWYgY29sbGlzaW9uIGRldGVjdGVkLiByZXN0b3JlIGxhc3RCbG9ja01hcCBhbmQgdGhyb3cgYW4gZXJyb3JcclxuICAgICAgICAgICAgICBmb3JFYWNoKG5leHRCbG9ja09yZGVyLCBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICAgICAgICAgIGlmIChibG9jayAmJiBibG9jay5zY29wZSkgbGFzdEJsb2NrTWFwW2Jsb2NrLmlkXSA9IGJsb2NrO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdkdXBlcycsXHJcbiAgICAgICAgICAgICAgICAgIFwiRHVwbGljYXRlcyBpbiBhIHJlcGVhdGVyIGFyZSBub3QgYWxsb3dlZC4gVXNlICd0cmFjayBieScgZXhwcmVzc2lvbiB0byBzcGVjaWZ5IHVuaXF1ZSBrZXlzLiBSZXBlYXRlcjogezB9LCBEdXBsaWNhdGUga2V5OiB7MX0sIER1cGxpY2F0ZSB2YWx1ZTogezJ9XCIsXHJcbiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIHRyYWNrQnlJZCwgdG9Kc29uKHZhbHVlKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gbmV3IG5ldmVyIGJlZm9yZSBzZWVuIGJsb2NrXHJcbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXJbaW5kZXhdID0ge2lkOiB0cmFja0J5SWQsIHNjb3BlOiB1bmRlZmluZWQsIGNsb25lOiB1bmRlZmluZWR9O1xyXG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcFt0cmFja0J5SWRdID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIHJlbW92ZSBsZWZ0b3ZlciBpdGVtc1xyXG4gICAgICAgICAgZm9yICh2YXIgYmxvY2tLZXkgaW4gbGFzdEJsb2NrTWFwKSB7XHJcbiAgICAgICAgICAgIGJsb2NrID0gbGFzdEJsb2NrTWFwW2Jsb2NrS2V5XTtcclxuICAgICAgICAgICAgZWxlbWVudHNUb1JlbW92ZSA9IGdldEJsb2NrTm9kZXMoYmxvY2suY2xvbmUpO1xyXG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShlbGVtZW50c1RvUmVtb3ZlKTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRzVG9SZW1vdmVbMF0ucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IHdhcyBub3QgcmVtb3ZlZCB5ZXQgYmVjYXVzZSBvZiBwZW5kaW5nIGFuaW1hdGlvbiwgbWFyayBpdCBhcyBkZWxldGVkXHJcbiAgICAgICAgICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gaWdub3JlIGl0IGxhdGVyXHJcbiAgICAgICAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHNUb1JlbW92ZVtpbmRleF1bTkdfUkVNT1ZFRF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBibG9jay5zY29wZS4kZGVzdHJveSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIHdlIGFyZSBub3QgdXNpbmcgZm9yRWFjaCBmb3IgcGVyZiByZWFzb25zICh0cnlpbmcgdG8gYXZvaWQgI2NhbGwpXHJcbiAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBjb2xsZWN0aW9uTGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGtleSA9IChjb2xsZWN0aW9uID09PSBjb2xsZWN0aW9uS2V5cykgPyBpbmRleCA6IGNvbGxlY3Rpb25LZXlzW2luZGV4XTtcclxuICAgICAgICAgICAgdmFsdWUgPSBjb2xsZWN0aW9uW2tleV07XHJcbiAgICAgICAgICAgIGJsb2NrID0gbmV4dEJsb2NrT3JkZXJbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJsb2NrLnNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhbHJlYWR5IHNlZW4gdGhpcyBvYmplY3QsIHRoZW4gd2UgbmVlZCB0byByZXVzZSB0aGVcclxuICAgICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHNjb3BlL2VsZW1lbnRcclxuXHJcbiAgICAgICAgICAgICAgbmV4dE5vZGUgPSBwcmV2aW91c05vZGU7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHNraXAgbm9kZXMgdGhhdCBhcmUgYWxyZWFkeSBwZW5kaW5nIHJlbW92YWwgdmlhIGxlYXZlIGFuaW1hdGlvblxyXG4gICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dE5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgfSB3aGlsZSAobmV4dE5vZGUgJiYgbmV4dE5vZGVbTkdfUkVNT1ZFRF0pO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoZ2V0QmxvY2tTdGFydChibG9jaykgIT0gbmV4dE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGl0ZW0gd2hpY2ggZ290IG1vdmVkXHJcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5tb3ZlKGdldEJsb2NrTm9kZXMoYmxvY2suY2xvbmUpLCBudWxsLCBqcUxpdGUocHJldmlvdXNOb2RlKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHByZXZpb3VzTm9kZSA9IGdldEJsb2NrRW5kKGJsb2NrKTtcclxuICAgICAgICAgICAgICB1cGRhdGVTY29wZShibG9jay5zY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgY29sbGVjdGlvbkxlbmd0aCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gbmV3IGl0ZW0gd2hpY2ggd2UgZG9uJ3Qga25vdyBhYm91dFxyXG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlKGZ1bmN0aW9uIG5nUmVwZWF0VHJhbnNjbHVkZShjbG9uZSwgc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgIGJsb2NrLnNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9uZS12cy1jcmVhdGVjb21tZW50XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kTm9kZSA9IG5nUmVwZWF0RW5kQ29tbWVudC5jbG9uZU5vZGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgY2xvbmVbY2xvbmUubGVuZ3RoKytdID0gZW5kTm9kZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHBlcmYpOiBzdXBwb3J0IG5ha2VkIHByZXZpb3VzTm9kZSBpbiBgZW50ZXJgIHRvIGF2b2lkIGNyZWF0aW9uIG9mIGpxTGl0ZSB3cmFwcGVyP1xyXG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsIGpxTGl0ZShwcmV2aW91c05vZGUpKTtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzTm9kZSA9IGVuZE5vZGU7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBvbmx5IG5lZWQgdGhlIGZpcnN0L2xhc3Qgbm9kZSBvZiB0aGUgY2xvbmVkIG5vZGVzLlxyXG4gICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgd2UgbmVlZCB0byBrZWVwIHRoZSByZWZlcmVuY2UgdG8gdGhlIGpxbGl0ZSB3cmFwcGVyIGFzIGl0IG1pZ2h0IGJlIGNoYW5nZWQgbGF0ZXJcclxuICAgICAgICAgICAgICAgIC8vIGJ5IGEgZGlyZWN0aXZlIHdpdGggdGVtcGxhdGVVcmwgd2hlbiBpdHMgdGVtcGxhdGUgYXJyaXZlcy5cclxuICAgICAgICAgICAgICAgIGJsb2NrLmNsb25lID0gY2xvbmU7XHJcbiAgICAgICAgICAgICAgICBuZXh0QmxvY2tNYXBbYmxvY2suaWRdID0gYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTY29wZShibG9jay5zY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgY29sbGVjdGlvbkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxhc3RCbG9ja01hcCA9IG5leHRCbG9ja01hcDtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nU2hvd1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ1Nob3dgIGRpcmVjdGl2ZSBzaG93cyBvciBoaWRlcyB0aGUgZ2l2ZW4gSFRNTCBlbGVtZW50IGJhc2VkIG9uIHRoZSBleHByZXNzaW9uXHJcbiAqIHByb3ZpZGVkIHRvIHRoZSBgbmdTaG93YCBhdHRyaWJ1dGUuIFRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiBieSByZW1vdmluZyBvciBhZGRpbmdcclxuICogdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIG9udG8gdGhlIGVsZW1lbnQuIFRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyBwcmVkZWZpbmVkXHJcbiAqIGluIEFuZ3VsYXJKUyBhbmQgc2V0cyB0aGUgZGlzcGxheSBzdHlsZSB0byBub25lICh1c2luZyBhbiAhaW1wb3J0YW50IGZsYWcpLlxyXG4gKiBGb3IgQ1NQIG1vZGUgcGxlYXNlIGFkZCBgYW5ndWxhci1jc3AuY3NzYCB0byB5b3VyIGh0bWwgZmlsZSAoc2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cclxuICpcclxuICogYGBgaHRtbFxyXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgdHJ1dGh5IChlbGVtZW50IGlzIHZpc2libGUpIC0tPlxyXG4gKiA8ZGl2IG5nLXNob3c9XCJteVZhbHVlXCI+PC9kaXY+XHJcbiAqXHJcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyBmYWxzeSAoZWxlbWVudCBpcyBoaWRkZW4pIC0tPlxyXG4gKiA8ZGl2IG5nLXNob3c9XCJteVZhbHVlXCIgY2xhc3M9XCJuZy1oaWRlXCI+PC9kaXY+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBXaGVuIHRoZSBgbmdTaG93YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIGZhbHN5IHZhbHVlIHRoZW4gdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIGFkZGVkIHRvIHRoZSBjbGFzc1xyXG4gKiBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgY2F1c2luZyBpdCB0byBiZWNvbWUgaGlkZGVuLiBXaGVuIHRydXRoeSwgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIHJlbW92ZWRcclxuICogZnJvbSB0aGUgZWxlbWVudCBjYXVzaW5nIHRoZSBlbGVtZW50IG5vdCB0byBhcHBlYXIgaGlkZGVuLlxyXG4gKlxyXG4gKiAjIyBXaHkgaXMgIWltcG9ydGFudCB1c2VkP1xyXG4gKlxyXG4gKiBZb3UgbWF5IGJlIHdvbmRlcmluZyB3aHkgIWltcG9ydGFudCBpcyB1c2VkIGZvciB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MuIFRoaXMgaXMgYmVjYXVzZSB0aGUgYC5uZy1oaWRlYCBzZWxlY3RvclxyXG4gKiBjYW4gYmUgZWFzaWx5IG92ZXJyaWRkZW4gYnkgaGVhdmllciBzZWxlY3RvcnMuIEZvciBleGFtcGxlLCBzb21ldGhpbmcgYXMgc2ltcGxlXHJcbiAqIGFzIGNoYW5naW5nIHRoZSBkaXNwbGF5IHN0eWxlIG9uIGEgSFRNTCBsaXN0IGl0ZW0gd291bGQgbWFrZSBoaWRkZW4gZWxlbWVudHMgYXBwZWFyIHZpc2libGUuXHJcbiAqIFRoaXMgYWxzbyBiZWNvbWVzIGEgYmlnZ2VyIGlzc3VlIHdoZW4gZGVhbGluZyB3aXRoIENTUyBmcmFtZXdvcmtzLlxyXG4gKlxyXG4gKiBCeSB1c2luZyAhaW1wb3J0YW50LCB0aGUgc2hvdyBhbmQgaGlkZSBiZWhhdmlvciB3aWxsIHdvcmsgYXMgZXhwZWN0ZWQgZGVzcGl0ZSBhbnkgY2xhc2ggYmV0d2VlbiBDU1Mgc2VsZWN0b3JcclxuICogc3BlY2lmaWNpdHkgKHdoZW4gIWltcG9ydGFudCBpc24ndCB1c2VkIHdpdGggYW55IGNvbmZsaWN0aW5nIHN0eWxlcykuIElmIGEgZGV2ZWxvcGVyIGNob29zZXMgdG8gb3ZlcnJpZGUgdGhlXHJcbiAqIHN0eWxpbmcgdG8gY2hhbmdlIGhvdyB0byBoaWRlIGFuIGVsZW1lbnQgdGhlbiBpdCBpcyBqdXN0IGEgbWF0dGVyIG9mIHVzaW5nICFpbXBvcnRhbnQgaW4gdGhlaXIgb3duIENTUyBjb2RlLlxyXG4gKlxyXG4gKiAjIyMgT3ZlcnJpZGluZyBgLm5nLWhpZGVgXHJcbiAqXHJcbiAqIEJ5IGRlZmF1bHQsIHRoZSBgLm5nLWhpZGVgIGNsYXNzIHdpbGwgc3R5bGUgdGhlIGVsZW1lbnQgd2l0aCBgZGlzcGxheTpub25lIWltcG9ydGFudGAuIElmIHlvdSB3aXNoIHRvIGNoYW5nZVxyXG4gKiB0aGUgaGlkZSBiZWhhdmlvciB3aXRoIG5nU2hvdy9uZ0hpZGUgdGhlbiB0aGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXN0YXRpbmcgdGhlIHN0eWxlcyBmb3IgdGhlIGAubmctaGlkZWBcclxuICogY2xhc3MgaW4gQ1NTOlxyXG4gKlxyXG4gKiBgYGBjc3NcclxuICogLm5nLWhpZGUge1xyXG4gKiAgIC8mIzQyOyB0aGlzIGlzIGp1c3QgYW5vdGhlciBmb3JtIG9mIGhpZGluZyBhbiBlbGVtZW50ICYjNDI7L1xyXG4gKiAgIGRpc3BsYXk6YmxvY2shaW1wb3J0YW50O1xyXG4gKiAgIHBvc2l0aW9uOmFic29sdXRlO1xyXG4gKiAgIHRvcDotOTk5OXB4O1xyXG4gKiAgIGxlZnQ6LTk5OTlweDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQnkgZGVmYXVsdCB5b3UgZG9uJ3QgbmVlZCB0byBvdmVycmlkZSBpbiBDU1MgYW55dGhpbmcgYW5kIHRoZSBhbmltYXRpb25zIHdpbGwgd29yayBhcm91bmQgdGhlIGRpc3BsYXkgc3R5bGUuXHJcbiAqXHJcbiAqICMjIEEgbm90ZSBhYm91dCBhbmltYXRpb25zIHdpdGggYG5nU2hvd2BcclxuICpcclxuICogQW5pbWF0aW9ucyBpbiBuZ1Nob3cvbmdIaWRlIHdvcmsgd2l0aCB0aGUgc2hvdyBhbmQgaGlkZSBldmVudHMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdoZW4gdGhlIGRpcmVjdGl2ZSBleHByZXNzaW9uXHJcbiAqIGlzIHRydWUgYW5kIGZhbHNlLiBUaGlzIHN5c3RlbSB3b3JrcyBsaWtlIHRoZSBhbmltYXRpb24gc3lzdGVtIHByZXNlbnQgd2l0aCBuZ0NsYXNzIGV4Y2VwdCB0aGF0XHJcbiAqIHlvdSBtdXN0IGFsc28gaW5jbHVkZSB0aGUgIWltcG9ydGFudCBmbGFnIHRvIG92ZXJyaWRlIHRoZSBkaXNwbGF5IHByb3BlcnR5XHJcbiAqIHNvIHRoYXQgeW91IGNhbiBwZXJmb3JtIGFuIGFuaW1hdGlvbiB3aGVuIHRoZSBlbGVtZW50IGlzIGhpZGRlbiBkdXJpbmcgdGhlIHRpbWUgb2YgdGhlIGFuaW1hdGlvbi5cclxuICpcclxuICogYGBgY3NzXHJcbiAqIC8vXHJcbiAqIC8vYSB3b3JraW5nIGV4YW1wbGUgY2FuIGJlIGZvdW5kIGF0IHRoZSBib3R0b20gb2YgdGhpcyBwYWdlXHJcbiAqIC8vXHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLCAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7XHJcbiAqICAgLyYjNDI7IHRoaXMgaXMgcmVxdWlyZWQgYXMgb2YgMS4zeCB0byBwcm9wZXJseVxyXG4gKiAgICAgIGFwcGx5IGFsbCBzdHlsaW5nIGluIGEgc2hvdy9oaWRlIGFuaW1hdGlvbiAmIzQyOy9cclxuICogICB0cmFuc2l0aW9uOjBzIGxpbmVhciBhbGw7XHJcbiAqIH1cclxuICpcclxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQtYWN0aXZlLFxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZS1hY3RpdmUge1xyXG4gKiAgIC8mIzQyOyB0aGUgdHJhbnNpdGlvbiBpcyBkZWZpbmVkIGluIHRoZSBhY3RpdmUgY2xhc3MgJiM0MjsvXHJcbiAqICAgdHJhbnNpdGlvbjoxcyBsaW5lYXIgYWxsO1xyXG4gKiB9XHJcbiAqXHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUgeyAuLi4gfVxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUgeyAuLi4gfVxyXG4gKiBgYGBcclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQsIGFzIG9mIEFuZ3VsYXJKUyB2ZXJzaW9uIDEuMy4wLWJldGEuMTEsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hhbmdlIHRoZSBkaXNwbGF5XHJcbiAqIHByb3BlcnR5IHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzLS1uZ0FuaW1hdGUgd2lsbCBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGF1dG9tYXRpY2FsbHkgZm9yIHlvdS5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogYWRkQ2xhc3M6IGAubmctaGlkZWAgLSBoYXBwZW5zIGFmdGVyIHRoZSBgbmdTaG93YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQgdGhlIGp1c3QgYmVmb3JlIGNvbnRlbnRzIGFyZSBzZXQgdG8gdmlzaWJsZVxyXG4gKiByZW1vdmVDbGFzczogYC5uZy1oaWRlYCAtIGhhcHBlbnMgYWZ0ZXIgdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgbm9uIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gaGlkZGVuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU2hvdyBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5XHJcbiAqICAgICB0aGVuIHRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiByZXNwZWN0aXZlbHkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICBDbGljayBtZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjxici8+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgU2hvdzpcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLXNob3dcIiBuZy1zaG93PVwiY2hlY2tlZFwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRodW1icy11cFwiPjwvc3Bhbj4gSSBzaG93IHVwIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdj5cclxuICAgICAgICBIaWRlOlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGFuaW1hdGUtc2hvd1wiIG5nLWhpZGU9XCJjaGVja2VkXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdGh1bWJzLWRvd25cIj48L3NwYW4+IEkgaGlkZSB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiZ2x5cGhpY29ucy5jc3NcIj5cclxuICAgICAgQGltcG9ydCB1cmwoLy9uZXRkbmEuYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4wLjAvY3NzL2Jvb3RzdHJhcC1nbHlwaGljb25zLmNzcyk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cclxuICAgICAgLmFuaW1hdGUtc2hvdyB7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6MjBweDtcclxuICAgICAgICBvcGFjaXR5OjE7XHJcbiAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtc2hvdy5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUsXHJcbiAgICAgIC5hbmltYXRlLXNob3cubmctaGlkZS1yZW1vdmUubmctaGlkZS1yZW1vdmUtYWN0aXZlIHtcclxuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xyXG4gICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1zaG93Lm5nLWhpZGUge1xyXG4gICAgICAgIGxpbmUtaGVpZ2h0OjA7XHJcbiAgICAgICAgb3BhY2l0eTowO1xyXG4gICAgICAgIHBhZGRpbmc6MCAxMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuY2hlY2stZWxlbWVudCB7XHJcbiAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgdGh1bWJzVXAgPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5nbHlwaGljb24tdGh1bWJzLXVwJykpO1xyXG4gICAgICB2YXIgdGh1bWJzRG93biA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmdseXBoaWNvbi10aHVtYnMtZG93bicpKTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctc2hvdyAvIG5nLWhpZGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QodGh1bWJzVXAuaXNEaXNwbGF5ZWQoKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgZXhwZWN0KHRodW1ic0Rvd24uaXNEaXNwbGF5ZWQoKSkudG9CZVRydXRoeSgpO1xyXG5cclxuICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgIGV4cGVjdCh0aHVtYnNVcC5pc0Rpc3BsYXllZCgpKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgZXhwZWN0KHRodW1ic0Rvd24uaXNEaXNwbGF5ZWQoKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ1Nob3dEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nU2hvdywgZnVuY3Rpb24gbmdTaG93V2F0Y2hBY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICRhbmltYXRlW3ZhbHVlID8gJ3JlbW92ZUNsYXNzJyA6ICdhZGRDbGFzcyddKGVsZW1lbnQsICduZy1oaWRlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nSGlkZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ0hpZGVgIGRpcmVjdGl2ZSBzaG93cyBvciBoaWRlcyB0aGUgZ2l2ZW4gSFRNTCBlbGVtZW50IGJhc2VkIG9uIHRoZSBleHByZXNzaW9uXHJcbiAqIHByb3ZpZGVkIHRvIHRoZSBgbmdIaWRlYCBhdHRyaWJ1dGUuIFRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiBieSByZW1vdmluZyBvciBhZGRpbmdcclxuICogdGhlIGBuZy1oaWRlYCBDU1MgY2xhc3Mgb250byB0aGUgZWxlbWVudC4gVGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIHByZWRlZmluZWRcclxuICogaW4gQW5ndWxhckpTIGFuZCBzZXRzIHRoZSBkaXNwbGF5IHN0eWxlIHRvIG5vbmUgKHVzaW5nIGFuICFpbXBvcnRhbnQgZmxhZykuXHJcbiAqIEZvciBDU1AgbW9kZSBwbGVhc2UgYWRkIGBhbmd1bGFyLWNzcC5jc3NgIHRvIHlvdXIgaHRtbCBmaWxlIChzZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NzcCBuZ0NzcH0pLlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyB0cnV0aHkgKGVsZW1lbnQgaXMgaGlkZGVuKSAtLT5cclxuICogPGRpdiBuZy1oaWRlPVwibXlWYWx1ZVwiIGNsYXNzPVwibmctaGlkZVwiPjwvZGl2PlxyXG4gKlxyXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgZmFsc3kgKGVsZW1lbnQgaXMgdmlzaWJsZSkgLS0+XHJcbiAqIDxkaXYgbmctaGlkZT1cIm15VmFsdWVcIj48L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFdoZW4gdGhlIGBuZ0hpZGVgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlIHRoZW4gdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIGFkZGVkIHRvIHRoZSBjbGFzc1xyXG4gKiBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgY2F1c2luZyBpdCB0byBiZWNvbWUgaGlkZGVuLiBXaGVuIGZhbHN5LCB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcmVtb3ZlZFxyXG4gKiBmcm9tIHRoZSBlbGVtZW50IGNhdXNpbmcgdGhlIGVsZW1lbnQgbm90IHRvIGFwcGVhciBoaWRkZW4uXHJcbiAqXHJcbiAqICMjIFdoeSBpcyAhaW1wb3J0YW50IHVzZWQ/XHJcbiAqXHJcbiAqIFlvdSBtYXkgYmUgd29uZGVyaW5nIHdoeSAhaW1wb3J0YW50IGlzIHVzZWQgZm9yIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcy4gVGhpcyBpcyBiZWNhdXNlIHRoZSBgLm5nLWhpZGVgIHNlbGVjdG9yXHJcbiAqIGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiBieSBoZWF2aWVyIHNlbGVjdG9ycy4gRm9yIGV4YW1wbGUsIHNvbWV0aGluZyBhcyBzaW1wbGVcclxuICogYXMgY2hhbmdpbmcgdGhlIGRpc3BsYXkgc3R5bGUgb24gYSBIVE1MIGxpc3QgaXRlbSB3b3VsZCBtYWtlIGhpZGRlbiBlbGVtZW50cyBhcHBlYXIgdmlzaWJsZS5cclxuICogVGhpcyBhbHNvIGJlY29tZXMgYSBiaWdnZXIgaXNzdWUgd2hlbiBkZWFsaW5nIHdpdGggQ1NTIGZyYW1ld29ya3MuXHJcbiAqXHJcbiAqIEJ5IHVzaW5nICFpbXBvcnRhbnQsIHRoZSBzaG93IGFuZCBoaWRlIGJlaGF2aW9yIHdpbGwgd29yayBhcyBleHBlY3RlZCBkZXNwaXRlIGFueSBjbGFzaCBiZXR3ZWVuIENTUyBzZWxlY3RvclxyXG4gKiBzcGVjaWZpY2l0eSAod2hlbiAhaW1wb3J0YW50IGlzbid0IHVzZWQgd2l0aCBhbnkgY29uZmxpY3Rpbmcgc3R5bGVzKS4gSWYgYSBkZXZlbG9wZXIgY2hvb3NlcyB0byBvdmVycmlkZSB0aGVcclxuICogc3R5bGluZyB0byBjaGFuZ2UgaG93IHRvIGhpZGUgYW4gZWxlbWVudCB0aGVuIGl0IGlzIGp1c3QgYSBtYXR0ZXIgb2YgdXNpbmcgIWltcG9ydGFudCBpbiB0aGVpciBvd24gQ1NTIGNvZGUuXHJcbiAqXHJcbiAqICMjIyBPdmVycmlkaW5nIGAubmctaGlkZWBcclxuICpcclxuICogQnkgZGVmYXVsdCwgdGhlIGAubmctaGlkZWAgY2xhc3Mgd2lsbCBzdHlsZSB0aGUgZWxlbWVudCB3aXRoIGBkaXNwbGF5Om5vbmUhaW1wb3J0YW50YC4gSWYgeW91IHdpc2ggdG8gY2hhbmdlXHJcbiAqIHRoZSBoaWRlIGJlaGF2aW9yIHdpdGggbmdTaG93L25nSGlkZSB0aGVuIHRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJlc3RhdGluZyB0aGUgc3R5bGVzIGZvciB0aGUgYC5uZy1oaWRlYFxyXG4gKiBjbGFzcyBpbiBDU1M6XHJcbiAqXHJcbiAqIGBgYGNzc1xyXG4gKiAubmctaGlkZSB7XHJcbiAqICAgLyYjNDI7IHRoaXMgaXMganVzdCBhbm90aGVyIGZvcm0gb2YgaGlkaW5nIGFuIGVsZW1lbnQgJiM0MjsvXHJcbiAqICAgZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7XHJcbiAqICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAqICAgdG9wOi05OTk5cHg7XHJcbiAqICAgbGVmdDotOTk5OXB4O1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBCeSBkZWZhdWx0IHlvdSBkb24ndCBuZWVkIHRvIG92ZXJyaWRlIGluIENTUyBhbnl0aGluZyBhbmQgdGhlIGFuaW1hdGlvbnMgd2lsbCB3b3JrIGFyb3VuZCB0aGUgZGlzcGxheSBzdHlsZS5cclxuICpcclxuICogIyMgQSBub3RlIGFib3V0IGFuaW1hdGlvbnMgd2l0aCBgbmdIaWRlYFxyXG4gKlxyXG4gKiBBbmltYXRpb25zIGluIG5nU2hvdy9uZ0hpZGUgd29yayB3aXRoIHRoZSBzaG93IGFuZCBoaWRlIGV2ZW50cyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2hlbiB0aGUgZGlyZWN0aXZlIGV4cHJlc3Npb25cclxuICogaXMgdHJ1ZSBhbmQgZmFsc2UuIFRoaXMgc3lzdGVtIHdvcmtzIGxpa2UgdGhlIGFuaW1hdGlvbiBzeXN0ZW0gcHJlc2VudCB3aXRoIG5nQ2xhc3MsIGV4Y2VwdCB0aGF0IHRoZSBgLm5nLWhpZGVgXHJcbiAqIENTUyBjbGFzcyBpcyBhZGRlZCBhbmQgcmVtb3ZlZCBmb3IgeW91IGluc3RlYWQgb2YgeW91ciBvd24gQ1NTIGNsYXNzLlxyXG4gKlxyXG4gKiBgYGBjc3NcclxuICogLy9cclxuICogLy9hIHdvcmtpbmcgZXhhbXBsZSBjYW4gYmUgZm91bmQgYXQgdGhlIGJvdHRvbSBvZiB0aGlzIHBhZ2VcclxuICogLy9cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQsIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHtcclxuICogICB0cmFuc2l0aW9uOjAuNXMgbGluZWFyIGFsbDtcclxuICogfVxyXG4gKlxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCB7IC4uLiB9XHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLm5nLWhpZGUtYWRkLWFjdGl2ZSB7IC4uLiB9XHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUubmctaGlkZS1yZW1vdmUtYWN0aXZlIHsgLi4uIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEtlZXAgaW4gbWluZCB0aGF0LCBhcyBvZiBBbmd1bGFySlMgdmVyc2lvbiAxLjMuMC1iZXRhLjExLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNoYW5nZSB0aGUgZGlzcGxheVxyXG4gKiBwcm9wZXJ0eSB0byBibG9jayBkdXJpbmcgYW5pbWF0aW9uIHN0YXRlcy0tbmdBbmltYXRlIHdpbGwgaGFuZGxlIHRoZSBzdHlsZSB0b2dnbGluZyBhdXRvbWF0aWNhbGx5IGZvciB5b3UuXHJcbiAqXHJcbiAqIEBhbmltYXRpb25zXHJcbiAqIHJlbW92ZUNsYXNzOiBgLm5nLWhpZGVgIC0gaGFwcGVucyBhZnRlciB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSB0cnV0aHkgdmFsdWUgYW5kIGp1c3QgYmVmb3JlIHRoZSBjb250ZW50cyBhcmUgc2V0IHRvIGhpZGRlblxyXG4gKiBhZGRDbGFzczogYC5uZy1oaWRlYCAtIGhhcHBlbnMgYWZ0ZXIgdGhlIGBuZ0hpZGVgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgbm9uIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gdmlzaWJsZVxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0hpZGUgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSB0aGVuXHJcbiAqICAgICB0aGUgZWxlbWVudCBpcyBzaG93biBvciBoaWRkZW4gcmVzcGVjdGl2ZWx5LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgQ2xpY2sgbWU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIj48YnIvPlxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIFNob3c6XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgYW5pbWF0ZS1oaWRlXCIgbmctc2hvdz1cImNoZWNrZWRcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10aHVtYnMtdXBcIj48L3NwYW4+IEkgc2hvdyB1cCB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgSGlkZTpcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLWhpZGVcIiBuZy1oaWRlPVwiY2hlY2tlZFwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRodW1icy1kb3duXCI+PC9zcGFuPiBJIGhpZGUgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImdseXBoaWNvbnMuY3NzXCI+XHJcbiAgICAgIEBpbXBvcnQgdXJsKC8vbmV0ZG5hLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMC4wL2Nzcy9ib290c3RyYXAtZ2x5cGhpY29ucy5jc3MpO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XHJcbiAgICAgIC5hbmltYXRlLWhpZGUge1xyXG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6MjBweDtcclxuICAgICAgICBvcGFjaXR5OjE7XHJcbiAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtaGlkZS5uZy1oaWRlIHtcclxuICAgICAgICBsaW5lLWhlaWdodDowO1xyXG4gICAgICAgIG9wYWNpdHk6MDtcclxuICAgICAgICBwYWRkaW5nOjAgMTBweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmNoZWNrLWVsZW1lbnQge1xyXG4gICAgICAgIHBhZGRpbmc6MTBweDtcclxuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xyXG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XHJcbiAgICAgIH1cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHRodW1ic1VwID0gZWxlbWVudChieS5jc3MoJ3NwYW4uZ2x5cGhpY29uLXRodW1icy11cCcpKTtcclxuICAgICAgdmFyIHRodW1ic0Rvd24gPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5nbHlwaGljb24tdGh1bWJzLWRvd24nKSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLXNob3cgLyBuZy1oaWRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZXhwZWN0KHRodW1ic1VwLmlzRGlzcGxheWVkKCkpLnRvQmVGYWxzeSgpO1xyXG4gICAgICAgIGV4cGVjdCh0aHVtYnNEb3duLmlzRGlzcGxheWVkKCkpLnRvQmVUcnV0aHkoKTtcclxuXHJcbiAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xyXG5cclxuICAgICAgICBleHBlY3QodGh1bWJzVXAuaXNEaXNwbGF5ZWQoKSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIGV4cGVjdCh0aHVtYnNEb3duLmlzRGlzcGxheWVkKCkpLnRvQmVGYWxzeSgpO1xyXG4gICAgICB9KTtcclxuICAgIDwvZmlsZT5cclxuICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdIaWRlRGlyZWN0aXZlID0gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBtdWx0aUVsZW1lbnQ6IHRydWUsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0hpZGUsIGZ1bmN0aW9uIG5nSGlkZVdhdGNoQWN0aW9uKHZhbHVlKXtcclxuICAgICAgICAkYW5pbWF0ZVt2YWx1ZSA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXShlbGVtZW50LCAnbmctaGlkZScpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nU3R5bGVcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nU3R5bGVgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNldCBDU1Mgc3R5bGUgb24gYW4gSFRNTCBlbGVtZW50IGNvbmRpdGlvbmFsbHkuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU3R5bGVcclxuICpcclxuICoge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gd2hpY2ggZXZhbHMgdG8gYW5cclxuICogb2JqZWN0IHdob3NlIGtleXMgYXJlIENTUyBzdHlsZSBuYW1lcyBhbmQgdmFsdWVzIGFyZSBjb3JyZXNwb25kaW5nIHZhbHVlcyBmb3IgdGhvc2UgQ1NTXHJcbiAqIGtleXMuXHJcbiAqXHJcbiAqIFNpbmNlIHNvbWUgQ1NTIHN0eWxlIG5hbWVzIGFyZSBub3QgdmFsaWQga2V5cyBmb3IgYW4gb2JqZWN0LCB0aGV5IG11c3QgYmUgcXVvdGVkLlxyXG4gKiBTZWUgdGhlICdiYWNrZ3JvdW5kLWNvbG9yJyBzdHlsZSBpbiB0aGUgZXhhbXBsZSBiZWxvdy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwic2V0IGNvbG9yXCIgbmctY2xpY2s9XCJteVN0eWxlPXtjb2xvcjoncmVkJ31cIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwic2V0IGJhY2tncm91bmRcIiBuZy1jbGljaz1cIm15U3R5bGU9eydiYWNrZ3JvdW5kLWNvbG9yJzonYmx1ZSd9XCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cImNsZWFyXCIgbmctY2xpY2s9XCJteVN0eWxlPXt9XCI+XHJcbiAgICAgICAgPGJyLz5cclxuICAgICAgICA8c3BhbiBuZy1zdHlsZT1cIm15U3R5bGVcIj5TYW1wbGUgVGV4dDwvc3Bhbj5cclxuICAgICAgICA8cHJlPm15U3R5bGU9e3tteVN0eWxlfX08L3ByZT5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICAgICAgc3BhbiB7XHJcbiAgICAgICAgIGNvbG9yOiBibGFjaztcclxuICAgICAgIH1cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgdmFyIGNvbG9yU3BhbiA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuJykpO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctc3R5bGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGNvbG9yU3Bhbi5nZXRDc3NWYWx1ZSgnY29sb3InKSkudG9CZSgncmdiYSgwLCAwLCAwLCAxKScpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnaW5wdXRbdmFsdWU9XFwnc2V0IGNvbG9yXFwnXScpKS5jbGljaygpO1xyXG4gICAgICAgICBleHBlY3QoY29sb3JTcGFuLmdldENzc1ZhbHVlKCdjb2xvcicpKS50b0JlKCdyZ2JhKDI1NSwgMCwgMCwgMSknKTtcclxuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2lucHV0W3ZhbHVlPWNsZWFyXScpKS5jbGljaygpO1xyXG4gICAgICAgICBleHBlY3QoY29sb3JTcGFuLmdldENzc1ZhbHVlKCdjb2xvcicpKS50b0JlKCdyZ2JhKDAsIDAsIDAsIDEpJyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ1N0eWxlRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICBzY29wZS4kd2F0Y2goYXR0ci5uZ1N0eWxlLCBmdW5jdGlvbiBuZ1N0eWxlV2F0Y2hBY3Rpb24obmV3U3R5bGVzLCBvbGRTdHlsZXMpIHtcclxuICAgIGlmIChvbGRTdHlsZXMgJiYgKG5ld1N0eWxlcyAhPT0gb2xkU3R5bGVzKSkge1xyXG4gICAgICBmb3JFYWNoKG9sZFN0eWxlcywgZnVuY3Rpb24odmFsLCBzdHlsZSkgeyBlbGVtZW50LmNzcyhzdHlsZSwgJycpO30pO1xyXG4gICAgfVxyXG4gICAgaWYgKG5ld1N0eWxlcykgZWxlbWVudC5jc3MobmV3U3R5bGVzKTtcclxuICB9LCB0cnVlKTtcclxufSk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1N3aXRjaFxyXG4gKiBAcmVzdHJpY3QgRUFcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdTd2l0Y2hgIGRpcmVjdGl2ZSBpcyB1c2VkIHRvIGNvbmRpdGlvbmFsbHkgc3dhcCBET00gc3RydWN0dXJlIG9uIHlvdXIgdGVtcGxhdGUgYmFzZWQgb24gYSBzY29wZSBleHByZXNzaW9uLlxyXG4gKiBFbGVtZW50cyB3aXRoaW4gYG5nU3dpdGNoYCBidXQgd2l0aG91dCBgbmdTd2l0Y2hXaGVuYCBvciBgbmdTd2l0Y2hEZWZhdWx0YCBkaXJlY3RpdmVzIHdpbGwgYmUgcHJlc2VydmVkIGF0IHRoZSBsb2NhdGlvblxyXG4gKiBhcyBzcGVjaWZpZWQgaW4gdGhlIHRlbXBsYXRlLlxyXG4gKlxyXG4gKiBUaGUgZGlyZWN0aXZlIGl0c2VsZiB3b3JrcyBzaW1pbGFyIHRvIG5nSW5jbHVkZSwgaG93ZXZlciwgaW5zdGVhZCBvZiBkb3dubG9hZGluZyB0ZW1wbGF0ZSBjb2RlIChvciBsb2FkaW5nIGl0XHJcbiAqIGZyb20gdGhlIHRlbXBsYXRlIGNhY2hlKSwgYG5nU3dpdGNoYCBzaW1wbHkgY2hvb3NlcyBvbmUgb2YgdGhlIG5lc3RlZCBlbGVtZW50cyBhbmQgbWFrZXMgaXQgdmlzaWJsZSBiYXNlZCBvbiB3aGljaCBlbGVtZW50XHJcbiAqIG1hdGNoZXMgdGhlIHZhbHVlIG9idGFpbmVkIGZyb20gdGhlIGV2YWx1YXRlZCBleHByZXNzaW9uLiBJbiBvdGhlciB3b3JkcywgeW91IGRlZmluZSBhIGNvbnRhaW5lciBlbGVtZW50XHJcbiAqICh3aGVyZSB5b3UgcGxhY2UgdGhlIGRpcmVjdGl2ZSksIHBsYWNlIGFuIGV4cHJlc3Npb24gb24gdGhlICoqYG9uPVwiLi4uXCJgIGF0dHJpYnV0ZSoqXHJcbiAqIChvciB0aGUgKipgbmctc3dpdGNoPVwiLi4uXCJgIGF0dHJpYnV0ZSoqKSwgZGVmaW5lIGFueSBpbm5lciBlbGVtZW50cyBpbnNpZGUgb2YgdGhlIGRpcmVjdGl2ZSBhbmQgcGxhY2VcclxuICogYSB3aGVuIGF0dHJpYnV0ZSBwZXIgZWxlbWVudC4gVGhlIHdoZW4gYXR0cmlidXRlIGlzIHVzZWQgdG8gaW5mb3JtIG5nU3dpdGNoIHdoaWNoIGVsZW1lbnQgdG8gZGlzcGxheSB3aGVuIHRoZSBvblxyXG4gKiBleHByZXNzaW9uIGlzIGV2YWx1YXRlZC4gSWYgYSBtYXRjaGluZyBleHByZXNzaW9uIGlzIG5vdCBmb3VuZCB2aWEgYSB3aGVuIGF0dHJpYnV0ZSB0aGVuIGFuIGVsZW1lbnQgd2l0aCB0aGUgZGVmYXVsdFxyXG4gKiBhdHRyaWJ1dGUgaXMgZGlzcGxheWVkLlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxyXG4gKiBCZSBhd2FyZSB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QgY2Fubm90IGJlIGV4cHJlc3Npb25zLiBUaGV5IGFyZSBpbnRlcnByZXRlZFxyXG4gKiBhcyBsaXRlcmFsIHN0cmluZyB2YWx1ZXMgdG8gbWF0Y2ggYWdhaW5zdC5cclxuICogRm9yIGV4YW1wbGUsICoqYG5nLXN3aXRjaC13aGVuPVwic29tZVZhbFwiYCoqIHdpbGwgbWF0Y2ggYWdhaW5zdCB0aGUgc3RyaW5nIGBcInNvbWVWYWxcImAgbm90IGFnYWluc3QgdGhlXHJcbiAqIHZhbHVlIG9mIHRoZSBleHByZXNzaW9uIGAkc2NvcGUuc29tZVZhbGAuXHJcbiAqIDwvZGl2PlxyXG5cclxuICogQGFuaW1hdGlvbnNcclxuICogZW50ZXIgLSBoYXBwZW5zIGFmdGVyIHRoZSBuZ1N3aXRjaCBjb250ZW50cyBjaGFuZ2UgYW5kIHRoZSBtYXRjaGVkIGNoaWxkIGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSB0aGUgY29udGFpbmVyXHJcbiAqIGxlYXZlIC0gaGFwcGVucyBqdXN0IGFmdGVyIHRoZSBuZ1N3aXRjaCBjb250ZW50cyBjaGFuZ2UgYW5kIGp1c3QgYmVmb3JlIHRoZSBmb3JtZXIgY29udGVudHMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgRE9NXHJcbiAqXHJcbiAqIEB1c2FnZVxyXG4gKlxyXG4gKiBgYGBcclxuICogPEFOWSBuZy1zd2l0Y2g9XCJleHByZXNzaW9uXCI+XHJcbiAqICAgPEFOWSBuZy1zd2l0Y2gtd2hlbj1cIm1hdGNoVmFsdWUxXCI+Li4uPC9BTlk+XHJcbiAqICAgPEFOWSBuZy1zd2l0Y2gtd2hlbj1cIm1hdGNoVmFsdWUyXCI+Li4uPC9BTlk+XHJcbiAqICAgPEFOWSBuZy1zd2l0Y2gtZGVmYXVsdD4uLi48L0FOWT5cclxuICogPC9BTlk+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKlxyXG4gKiBAc2NvcGVcclxuICogQHByaW9yaXR5IDEyMDBcclxuICogQHBhcmFtIHsqfSBuZ1N3aXRjaHxvbiBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QgPHR0Pm5nLXN3aXRjaC13aGVuPC90dD4uXHJcbiAqIE9uIGNoaWxkIGVsZW1lbnRzIGFkZDpcclxuICpcclxuICogKiBgbmdTd2l0Y2hXaGVuYDogdGhlIGNhc2Ugc3RhdGVtZW50IHRvIG1hdGNoIGFnYWluc3QuIElmIG1hdGNoIHRoZW4gdGhpc1xyXG4gKiAgIGNhc2Ugd2lsbCBiZSBkaXNwbGF5ZWQuIElmIHRoZSBzYW1lIG1hdGNoIGFwcGVhcnMgbXVsdGlwbGUgdGltZXMsIGFsbCB0aGVcclxuICogICBlbGVtZW50cyB3aWxsIGJlIGRpc3BsYXllZC5cclxuICogKiBgbmdTd2l0Y2hEZWZhdWx0YDogdGhlIGRlZmF1bHQgY2FzZSB3aGVuIG5vIG90aGVyIGNhc2UgbWF0Y2guIElmIHRoZXJlXHJcbiAqICAgYXJlIG11bHRpcGxlIGRlZmF1bHQgY2FzZXMsIGFsbCBvZiB0aGVtIHdpbGwgYmUgZGlzcGxheWVkIHdoZW4gbm8gb3RoZXJcclxuICogICBjYXNlIG1hdGNoLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gIDxleGFtcGxlIG1vZHVsZT1cInN3aXRjaEV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cInNlbGVjdGlvblwiIG5nLW9wdGlvbnM9XCJpdGVtIGZvciBpdGVtIGluIGl0ZW1zXCI+XHJcbiAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgPHR0PnNlbGVjdGlvbj17e3NlbGVjdGlvbn19PC90dD5cclxuICAgICAgICA8aHIvPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaC1jb250YWluZXJcIlxyXG4gICAgICAgICAgbmctc3dpdGNoIG9uPVwic2VsZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaFwiIG5nLXN3aXRjaC13aGVuPVwic2V0dGluZ3NcIj5TZXR0aW5ncyBEaXY8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoXCIgbmctc3dpdGNoLXdoZW49XCJob21lXCI+SG9tZSBTcGFuPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaFwiIG5nLXN3aXRjaC1kZWZhdWx0PmRlZmF1bHQ8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdzd2l0Y2hFeGFtcGxlJywgWyduZ0FuaW1hdGUnXSlcclxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgJHNjb3BlLml0ZW1zID0gWydzZXR0aW5ncycsICdob21lJywgJ290aGVyJ107XHJcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0aW9uID0gJHNjb3BlLml0ZW1zWzBdO1xyXG4gICAgICAgIH1dKTtcclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxyXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gtY29udGFpbmVyIHtcclxuICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcclxuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xyXG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgaGVpZ2h0OjQwcHg7XHJcbiAgICAgICAgb3ZlcmZsb3c6aGlkZGVuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gge1xyXG4gICAgICAgIHBhZGRpbmc6MTBweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWFuaW1hdGUge1xyXG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xyXG4gICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcclxuXHJcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgdG9wOjA7XHJcbiAgICAgICAgbGVmdDowO1xyXG4gICAgICAgIHJpZ2h0OjA7XHJcbiAgICAgICAgYm90dG9tOjA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUsXHJcbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1lbnRlciB7XHJcbiAgICAgICAgdG9wOi01MHB4O1xyXG4gICAgICB9XHJcbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1sZWF2ZSxcclxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XHJcbiAgICAgICAgdG9wOjA7XHJcbiAgICAgIH1cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHN3aXRjaEVsZW0gPSBlbGVtZW50KGJ5LmNzcygnW25nLXN3aXRjaF0nKSk7XHJcbiAgICAgIHZhciBzZWxlY3QgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWxlY3Rpb24nKSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHN0YXJ0IGluIHNldHRpbmdzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZXhwZWN0KHN3aXRjaEVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9TZXR0aW5ncyBEaXYvKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHRvIGhvbWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgxKS5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvSG9tZSBTcGFuLyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpdCgnc2hvdWxkIHNlbGVjdCBkZWZhdWx0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZWN0LmFsbChieS5jc3MoJ29wdGlvbicpKS5nZXQoMikuY2xpY2soKTtcclxuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL2RlZmF1bHQvKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nU3dpdGNoRGlyZWN0aXZlID0gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgcmVxdWlyZTogJ25nU3dpdGNoJyxcclxuXHJcbiAgICAvLyBhc2tzIGZvciAkc2NvcGUgdG8gZm9vbCB0aGUgQkMgY29udHJvbGxlciBtb2R1bGVcclxuICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgZnVuY3Rpb24gbmdTd2l0Y2hDb250cm9sbGVyKCkge1xyXG4gICAgIHRoaXMuY2FzZXMgPSB7fTtcclxuICAgIH1dLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG5nU3dpdGNoQ29udHJvbGxlcikge1xyXG4gICAgICB2YXIgd2F0Y2hFeHByID0gYXR0ci5uZ1N3aXRjaCB8fCBhdHRyLm9uLFxyXG4gICAgICAgICAgc2VsZWN0ZWRUcmFuc2NsdWRlcyA9IFtdLFxyXG4gICAgICAgICAgc2VsZWN0ZWRFbGVtZW50cyA9IFtdLFxyXG4gICAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMgPSBbXSxcclxuICAgICAgICAgIHNlbGVjdGVkU2NvcGVzID0gW107XHJcblxyXG4gICAgICB2YXIgc3BsaWNlRmFjdG9yeSA9IGZ1bmN0aW9uKGFycmF5LCBpbmRleCkge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyBhcnJheS5zcGxpY2UoaW5kZXgsIDEpOyB9O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUuJHdhdGNoKHdhdGNoRXhwciwgZnVuY3Rpb24gbmdTd2l0Y2hXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHZhciBpLCBpaTtcclxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHByZXZpb3VzTGVhdmVBbmltYXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcclxuICAgICAgICAgICRhbmltYXRlLmNhbmNlbChwcmV2aW91c0xlYXZlQW5pbWF0aW9uc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByZXZpb3VzTGVhdmVBbmltYXRpb25zLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gc2VsZWN0ZWRTY29wZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHNlbGVjdGVkID0gZ2V0QmxvY2tOb2RlcyhzZWxlY3RlZEVsZW1lbnRzW2ldLmNsb25lKTtcclxuICAgICAgICAgIHNlbGVjdGVkU2NvcGVzW2ldLiRkZXN0cm95KCk7XHJcbiAgICAgICAgICB2YXIgcHJvbWlzZSA9IHByZXZpb3VzTGVhdmVBbmltYXRpb25zW2ldID0gJGFuaW1hdGUubGVhdmUoc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgcHJvbWlzZS50aGVuKHNwbGljZUZhY3RvcnkocHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMsIGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoID0gMDtcclxuICAgICAgICBzZWxlY3RlZFNjb3Blcy5sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICBpZiAoKHNlbGVjdGVkVHJhbnNjbHVkZXMgPSBuZ1N3aXRjaENvbnRyb2xsZXIuY2FzZXNbJyEnICsgdmFsdWVdIHx8IG5nU3dpdGNoQ29udHJvbGxlci5jYXNlc1snPyddKSkge1xyXG4gICAgICAgICAgZm9yRWFjaChzZWxlY3RlZFRyYW5zY2x1ZGVzLCBmdW5jdGlvbihzZWxlY3RlZFRyYW5zY2x1ZGUpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRUcmFuc2NsdWRlLnRyYW5zY2x1ZGUoZnVuY3Rpb24oY2FzZUVsZW1lbnQsIHNlbGVjdGVkU2NvcGUpIHtcclxuICAgICAgICAgICAgICBzZWxlY3RlZFNjb3Blcy5wdXNoKHNlbGVjdGVkU2NvcGUpO1xyXG4gICAgICAgICAgICAgIHZhciBhbmNob3IgPSBzZWxlY3RlZFRyYW5zY2x1ZGUuZWxlbWVudDtcclxuICAgICAgICAgICAgICBjYXNlRWxlbWVudFtjYXNlRWxlbWVudC5sZW5ndGgrK10gPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgZW5kIG5nU3dpdGNoV2hlbjogJyk7XHJcbiAgICAgICAgICAgICAgdmFyIGJsb2NrID0geyBjbG9uZTogY2FzZUVsZW1lbnQgfTtcclxuXHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50cy5wdXNoKGJsb2NrKTtcclxuICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjYXNlRWxlbWVudCwgYW5jaG9yLnBhcmVudCgpLCBhbmNob3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG52YXIgbmdTd2l0Y2hXaGVuRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xyXG4gIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcclxuICBwcmlvcml0eTogMTIwMCxcclxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcclxuICBtdWx0aUVsZW1lbnQ6IHRydWUsXHJcbiAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xyXG4gICAgY3RybC5jYXNlc1snIScgKyBhdHRycy5uZ1N3aXRjaFdoZW5dID0gKGN0cmwuY2FzZXNbJyEnICsgYXR0cnMubmdTd2l0Y2hXaGVuXSB8fCBbXSk7XHJcbiAgICBjdHJsLmNhc2VzWychJyArIGF0dHJzLm5nU3dpdGNoV2hlbl0ucHVzaCh7IHRyYW5zY2x1ZGU6ICR0cmFuc2NsdWRlLCBlbGVtZW50OiBlbGVtZW50IH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG52YXIgbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xyXG4gIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcclxuICBwcmlvcml0eTogMTIwMCxcclxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcclxuICBtdWx0aUVsZW1lbnQ6IHRydWUsXHJcbiAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XHJcbiAgICBjdHJsLmNhc2VzWyc/J10gPSAoY3RybC5jYXNlc1snPyddIHx8IFtdKTtcclxuICAgIGN0cmwuY2FzZXNbJz8nXS5wdXNoKHsgdHJhbnNjbHVkZTogJHRyYW5zY2x1ZGUsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XHJcbiAgIH1cclxufSk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1RyYW5zY2x1ZGVcclxuICogQHJlc3RyaWN0IEVBQ1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGlyZWN0aXZlIHRoYXQgbWFya3MgdGhlIGluc2VydGlvbiBwb2ludCBmb3IgdGhlIHRyYW5zY2x1ZGVkIERPTSBvZiB0aGUgbmVhcmVzdCBwYXJlbnQgZGlyZWN0aXZlIHRoYXQgdXNlcyB0cmFuc2NsdXNpb24uXHJcbiAqXHJcbiAqIEFueSBleGlzdGluZyBjb250ZW50IG9mIHRoZSBlbGVtZW50IHRoYXQgdGhpcyBkaXJlY3RpdmUgaXMgcGxhY2VkIG9uIHdpbGwgYmUgcmVtb3ZlZCBiZWZvcmUgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgaW5zZXJ0ZWQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJ0cmFuc2NsdWRlRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgndHJhbnNjbHVkZUV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgIC5kaXJlY3RpdmUoJ3BhbmUnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgc2NvcGU6IHsgdGl0bGU6J0AnIH0sXHJcbiAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBzdHlsZT1cImJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IGdyYXlcIj57e3RpdGxlfX08L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxuZy10cmFuc2NsdWRlPjwvbmctdHJhbnNjbHVkZT4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nXHJcbiAgICAgICAgICAgICB9O1xyXG4gICAgICAgICB9KVxyXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICRzY29wZS50aXRsZSA9ICdMb3JlbSBJcHN1bSc7XHJcbiAgICAgICAgICAgJHNjb3BlLnRleHQgPSAnTmVxdWUgcG9ycm8gcXVpc3F1YW0gZXN0IHF1aSBkb2xvcmVtIGlwc3VtIHF1aWEgZG9sb3IuLi4nO1xyXG4gICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInRpdGxlXCI+PGJyPlxyXG4gICAgICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJ0ZXh0XCI+PC90ZXh0YXJlYT4gPGJyLz5cclxuICAgICAgICAgPHBhbmUgdGl0bGU9XCJ7e3RpdGxlfX1cIj57e3RleHR9fTwvcGFuZT5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYXZlIHRyYW5zY2x1ZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgdGl0bGVFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGl0bGUnKSk7XHJcbiAgICAgICAgICB0aXRsZUVsZW1lbnQuY2xlYXIoKTtcclxuICAgICAgICAgIHRpdGxlRWxlbWVudC5zZW5kS2V5cygnVElUTEUnKTtcclxuICAgICAgICAgIHZhciB0ZXh0RWxlbWVudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSk7XHJcbiAgICAgICAgICB0ZXh0RWxlbWVudC5jbGVhcigpO1xyXG4gICAgICAgICAgdGV4dEVsZW1lbnQuc2VuZEtleXMoJ1RFWFQnKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3RpdGxlJykpLmdldFRleHQoKSkudG9FcXVhbCgnVElUTEUnKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3RleHQnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdURVhUJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqL1xyXG52YXIgbmdUcmFuc2NsdWRlRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xyXG4gIHJlc3RyaWN0OiAnRUFDJyxcclxuICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIGNvbnRyb2xsZXIsICR0cmFuc2NsdWRlKSB7XHJcbiAgICBpZiAoISR0cmFuc2NsdWRlKSB7XHJcbiAgICAgIHRocm93IG1pbkVycignbmdUcmFuc2NsdWRlJykoJ29ycGhhbicsXHJcbiAgICAgICAnSWxsZWdhbCB1c2Ugb2YgbmdUcmFuc2NsdWRlIGRpcmVjdGl2ZSBpbiB0aGUgdGVtcGxhdGUhICcgK1xyXG4gICAgICAgJ05vIHBhcmVudCBkaXJlY3RpdmUgdGhhdCByZXF1aXJlcyBhIHRyYW5zY2x1c2lvbiBmb3VuZC4gJyArXHJcbiAgICAgICAnRWxlbWVudDogezB9JyxcclxuICAgICAgIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XHJcbiAgICB9XHJcblxyXG4gICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUpIHtcclxuICAgICAgJGVsZW1lbnQuZW1wdHkoKTtcclxuICAgICAgJGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBzY3JpcHRcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIExvYWQgdGhlIGNvbnRlbnQgb2YgYSBgPHNjcmlwdD5gIGVsZW1lbnQgaW50byB7QGxpbmsgbmcuJHRlbXBsYXRlQ2FjaGUgYCR0ZW1wbGF0ZUNhY2hlYH0sIHNvIHRoYXQgdGhlXHJcbiAqIHRlbXBsYXRlIGNhbiBiZSB1c2VkIGJ5IHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbmNsdWRlIGBuZ0luY2x1ZGVgfSxcclxuICoge0BsaW5rIG5nUm91dGUuZGlyZWN0aXZlOm5nVmlldyBgbmdWaWV3YH0sIG9yIHtAbGluayBndWlkZS9kaXJlY3RpdmUgZGlyZWN0aXZlc30uIFRoZSB0eXBlIG9mIHRoZVxyXG4gKiBgPHNjcmlwdD5gIGVsZW1lbnQgbXVzdCBiZSBzcGVjaWZpZWQgYXMgYHRleHQvbmctdGVtcGxhdGVgLCBhbmQgYSBjYWNoZSBuYW1lIGZvciB0aGUgdGVtcGxhdGUgbXVzdCBiZVxyXG4gKiBhc3NpZ25lZCB0aHJvdWdoIHRoZSBlbGVtZW50J3MgYGlkYCwgd2hpY2ggY2FuIHRoZW4gYmUgdXNlZCBhcyBhIGRpcmVjdGl2ZSdzIGB0ZW1wbGF0ZVVybGAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIE11c3QgYmUgc2V0IHRvIGAndGV4dC9uZy10ZW1wbGF0ZSdgLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQ2FjaGUgbmFtZSBvZiB0aGUgdGVtcGxhdGUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L25nLXRlbXBsYXRlXCIgaWQ9XCIvdHBsLmh0bWxcIj5cclxuICAgICAgICBDb250ZW50IG9mIHRoZSB0ZW1wbGF0ZS5cclxuICAgICAgPC9zY3JpcHQ+XHJcblxyXG4gICAgICA8YSBuZy1jbGljaz1cImN1cnJlbnRUcGw9Jy90cGwuaHRtbCdcIiBpZD1cInRwbC1saW5rXCI+TG9hZCBpbmxpbmVkIHRlbXBsYXRlPC9hPlxyXG4gICAgICA8ZGl2IGlkPVwidHBsLWNvbnRlbnRcIiBuZy1pbmNsdWRlIHNyYz1cImN1cnJlbnRUcGxcIj48L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgaXQoJ3Nob3VsZCBsb2FkIHRlbXBsYXRlIGRlZmluZWQgaW5zaWRlIHNjcmlwdCB0YWcnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3RwbC1saW5rJykpLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjdHBsLWNvbnRlbnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IG9mIHRoZSB0ZW1wbGF0ZS8pO1xyXG4gICAgICB9KTtcclxuICAgIDwvZmlsZT5cclxuICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgc2NyaXB0RGlyZWN0aXZlID0gWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcclxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgaWYgKGF0dHIudHlwZSA9PSAndGV4dC9uZy10ZW1wbGF0ZScpIHtcclxuICAgICAgICB2YXIgdGVtcGxhdGVVcmwgPSBhdHRyLmlkLFxyXG4gICAgICAgICAgICAvLyBJRSBpcyBub3QgY29uc2lzdGVudCwgaW4gc2NyaXB0cyB3ZSBoYXZlIHRvIHJlYWQgLnRleHQgYnV0IGluIG90aGVyIG5vZGVzIHdlIGhhdmUgdG8gcmVhZCAudGV4dENvbnRlbnRcclxuICAgICAgICAgICAgdGV4dCA9IGVsZW1lbnRbMF0udGV4dDtcclxuXHJcbiAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlVXJsLCB0ZXh0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxudmFyIG5nT3B0aW9uc01pbkVyciA9IG1pbkVycignbmdPcHRpb25zJyk7XHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIHNlbGVjdFxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogSFRNTCBgU0VMRUNUYCBlbGVtZW50IHdpdGggYW5ndWxhciBkYXRhLWJpbmRpbmcuXHJcbiAqXHJcbiAqICMgYG5nT3B0aW9uc2BcclxuICpcclxuICogVGhlIGBuZ09wdGlvbnNgIGF0dHJpYnV0ZSBjYW4gYmUgdXNlZCB0byBkeW5hbWljYWxseSBnZW5lcmF0ZSBhIGxpc3Qgb2YgYDxvcHRpb24+YFxyXG4gKiBlbGVtZW50cyBmb3IgdGhlIGA8c2VsZWN0PmAgZWxlbWVudCB1c2luZyB0aGUgYXJyYXkgb3Igb2JqZWN0IG9idGFpbmVkIGJ5IGV2YWx1YXRpbmcgdGhlXHJcbiAqIGBuZ09wdGlvbnNgIGNvbXByZWhlbnNpb25fZXhwcmVzc2lvbi5cclxuICpcclxuICogV2hlbiBhbiBpdGVtIGluIHRoZSBgPHNlbGVjdD5gIG1lbnUgaXMgc2VsZWN0ZWQsIHRoZSBhcnJheSBlbGVtZW50IG9yIG9iamVjdCBwcm9wZXJ0eVxyXG4gKiByZXByZXNlbnRlZCBieSB0aGUgc2VsZWN0ZWQgb3B0aW9uIHdpbGwgYmUgYm91bmQgdG8gdGhlIG1vZGVsIGlkZW50aWZpZWQgYnkgdGhlIGBuZ01vZGVsYFxyXG4gKiBkaXJlY3RpdmUuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqTm90ZToqKiBgbmdNb2RlbGAgY29tcGFyZXMgYnkgcmVmZXJlbmNlLCBub3QgdmFsdWUuIFRoaXMgaXMgaW1wb3J0YW50IHdoZW4gYmluZGluZyB0byBhblxyXG4gKiBhcnJheSBvZiBvYmplY3RzLiBTZWUgYW4gZXhhbXBsZSBbaW4gdGhpcyBqc2ZpZGRsZV0oaHR0cDovL2pzZmlkZGxlLm5ldC9xV3pUYi8pLlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogT3B0aW9uYWxseSwgYSBzaW5nbGUgaGFyZC1jb2RlZCBgPG9wdGlvbj5gIGVsZW1lbnQsIHdpdGggdGhlIHZhbHVlIHNldCB0byBhbiBlbXB0eSBzdHJpbmcsIGNhblxyXG4gKiBiZSBuZXN0ZWQgaW50byB0aGUgYDxzZWxlY3Q+YCBlbGVtZW50LiBUaGlzIGVsZW1lbnQgd2lsbCB0aGVuIHJlcHJlc2VudCB0aGUgYG51bGxgIG9yIFwibm90IHNlbGVjdGVkXCJcclxuICogb3B0aW9uLiBTZWUgZXhhbXBsZSBiZWxvdyBmb3IgZGVtb25zdHJhdGlvbi5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIGBuZ09wdGlvbnNgIHByb3ZpZGVzIGFuIGl0ZXJhdG9yIGZhY2lsaXR5IGZvciB0aGUgYDxvcHRpb24+YCBlbGVtZW50IHdoaWNoIHNob3VsZCBiZSB1c2VkIGluc3RlYWRcclxuICogb2Yge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0gd2hlbiB5b3Ugd2FudCB0aGVcclxuICogYHNlbGVjdGAgbW9kZWwgdG8gYmUgYm91bmQgdG8gYSBub24tc3RyaW5nIHZhbHVlLiBUaGlzIGlzIGJlY2F1c2UgYW4gb3B0aW9uIGVsZW1lbnQgY2FuIG9ubHlcclxuICogYmUgYm91bmQgdG8gc3RyaW5nIHZhbHVlcyBhdCBwcmVzZW50LlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgVGhlIGNvbnRyb2wgaXMgY29uc2lkZXJlZCB2YWxpZCBvbmx5IGlmIHZhbHVlIGlzIGVudGVyZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xyXG4gKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxyXG4gKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICogQHBhcmFtIHtjb21wcmVoZW5zaW9uX2V4cHJlc3Npb249fSBuZ09wdGlvbnMgaW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgZm9ybXM6XHJcbiAqXHJcbiAqICAgKiBmb3IgYXJyYXkgZGF0YSBzb3VyY2VzOlxyXG4gKiAgICAgKiBgbGFiZWxgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWBcclxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXHJcbiAqICAgICAqIGBsYWJlbGAgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxyXG4gKiAgICAgKiBgc2VsZWN0YCAqKmBhc2AqKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YCAqKmB0cmFjayBieWAqKiBgdHJhY2tleHByYFxyXG4gKiAgICogZm9yIG9iamVjdCBkYXRhIHNvdXJjZXM6XHJcbiAqICAgICAqIGBsYWJlbGAgKipgZm9yIChgKipga2V5YCAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXHJcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZm9yIChgKipga2V5YCAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXHJcbiAqICAgICAqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYCAqKmBmb3IgKGAqKmBrZXlgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxyXG4gKiAgICAgKiBgc2VsZWN0YCAqKmBhc2AqKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGBcclxuICogICAgICAgICAqKmBmb3JgIGAoYCoqYGtleWAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXHJcbiAqXHJcbiAqIFdoZXJlOlxyXG4gKlxyXG4gKiAgICogYGFycmF5YCAvIGBvYmplY3RgOiBhbiBleHByZXNzaW9uIHdoaWNoIGV2YWx1YXRlcyB0byBhbiBhcnJheSAvIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXHJcbiAqICAgKiBgdmFsdWVgOiBsb2NhbCB2YXJpYWJsZSB3aGljaCB3aWxsIHJlZmVyIHRvIGVhY2ggaXRlbSBpbiB0aGUgYGFycmF5YCBvciBlYWNoIHByb3BlcnR5IHZhbHVlXHJcbiAqICAgICAgb2YgYG9iamVjdGAgZHVyaW5nIGl0ZXJhdGlvbi5cclxuICogICAqIGBrZXlgOiBsb2NhbCB2YXJpYWJsZSB3aGljaCB3aWxsIHJlZmVyIHRvIGEgcHJvcGVydHkgbmFtZSBpbiBgb2JqZWN0YCBkdXJpbmcgaXRlcmF0aW9uLlxyXG4gKiAgICogYGxhYmVsYDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSB0aGUgbGFiZWwgZm9yIGA8b3B0aW9uPmAgZWxlbWVudC4gVGhlXHJcbiAqICAgICBgZXhwcmVzc2lvbmAgd2lsbCBtb3N0IGxpa2VseSByZWZlciB0byB0aGUgYHZhbHVlYCB2YXJpYWJsZSAoZS5nLiBgdmFsdWUucHJvcGVydHlOYW1lYCkuXHJcbiAqICAgKiBgc2VsZWN0YDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSBib3VuZCB0byB0aGUgbW9kZWwgb2YgdGhlIHBhcmVudCBgPHNlbGVjdD5gXHJcbiAqICAgICAgZWxlbWVudC4gSWYgbm90IHNwZWNpZmllZCwgYHNlbGVjdGAgZXhwcmVzc2lvbiB3aWxsIGRlZmF1bHQgdG8gYHZhbHVlYC5cclxuICogICAqIGBncm91cGA6IFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmUgdXNlZCB0byBncm91cCBvcHRpb25zIHVzaW5nIHRoZSBgPG9wdGdyb3VwPmBcclxuICogICAgICBET00gZWxlbWVudC5cclxuICogICAqIGB0cmFja2V4cHJgOiBVc2VkIHdoZW4gd29ya2luZyB3aXRoIGFuIGFycmF5IG9mIG9iamVjdHMuIFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmVcclxuICogICAgICB1c2VkIHRvIGlkZW50aWZ5IHRoZSBvYmplY3RzIGluIHRoZSBhcnJheS4gVGhlIGB0cmFja2V4cHJgIHdpbGwgbW9zdCBsaWtlbHkgcmVmZXIgdG8gdGhlXHJcbiAqICAgICBgdmFsdWVgIHZhcmlhYmxlIChlLmcuIGB2YWx1ZS5wcm9wZXJ0eU5hbWVgKS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlIG1vZHVsZT1cInNlbGVjdEV4YW1wbGVcIj5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdzZWxlY3RFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY29sb3JzID0gW1xyXG4gICAgICAgICAgICAgIHtuYW1lOidibGFjaycsIHNoYWRlOidkYXJrJ30sXHJcbiAgICAgICAgICAgICAge25hbWU6J3doaXRlJywgc2hhZGU6J2xpZ2h0J30sXHJcbiAgICAgICAgICAgICAge25hbWU6J3JlZCcsIHNoYWRlOidkYXJrJ30sXHJcbiAgICAgICAgICAgICAge25hbWU6J2JsdWUnLCBzaGFkZTonZGFyayd9LFxyXG4gICAgICAgICAgICAgIHtuYW1lOid5ZWxsb3cnLCBzaGFkZTonbGlnaHQnfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAkc2NvcGUubXlDb2xvciA9ICRzY29wZS5jb2xvcnNbMl07IC8vIHJlZFxyXG4gICAgICAgICAgfV0pO1xyXG4gICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJjb2xvciBpbiBjb2xvcnNcIj5cclxuICAgICAgICAgICAgICBOYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJjb2xvci5uYW1lXCI+XHJcbiAgICAgICAgICAgICAgWzxhIGhyZWYgbmctY2xpY2s9XCJjb2xvcnMuc3BsaWNlKCRpbmRleCwgMSlcIj5YPC9hPl1cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgIFs8YSBocmVmIG5nLWNsaWNrPVwiY29sb3JzLnB1c2goe30pXCI+YWRkPC9hPl1cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICA8aHIvPlxyXG4gICAgICAgICAgQ29sb3IgKG51bGwgbm90IGFsbG93ZWQpOlxyXG4gICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm15Q29sb3JcIiBuZy1vcHRpb25zPVwiY29sb3IubmFtZSBmb3IgY29sb3IgaW4gY29sb3JzXCI+PC9zZWxlY3Q+PGJyPlxyXG5cclxuICAgICAgICAgIENvbG9yIChudWxsIGFsbG93ZWQpOlxyXG4gICAgICAgICAgPHNwYW4gIGNsYXNzPVwibnVsbGFibGVcIj5cclxuICAgICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm15Q29sb3JcIiBuZy1vcHRpb25zPVwiY29sb3IubmFtZSBmb3IgY29sb3IgaW4gY29sb3JzXCI+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPi0tIGNob29zZSBjb2xvciAtLTwvb3B0aW9uPlxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgIDwvc3Bhbj48YnIvPlxyXG5cclxuICAgICAgICAgIENvbG9yIGdyb3VwZWQgYnkgc2hhZGU6XHJcbiAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGdyb3VwIGJ5IGNvbG9yLnNoYWRlIGZvciBjb2xvciBpbiBjb2xvcnNcIj5cclxuICAgICAgICAgIDwvc2VsZWN0Pjxici8+XHJcblxyXG5cclxuICAgICAgICAgIFNlbGVjdCA8YSBocmVmIG5nLWNsaWNrPVwibXlDb2xvciA9IHsgbmFtZTonbm90IGluIGxpc3QnLCBzaGFkZTogJ290aGVyJyB9XCI+Ym9ndXM8L2E+Ljxicj5cclxuICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICBDdXJyZW50bHkgc2VsZWN0ZWQ6IHt7IHtzZWxlY3RlZF9jb2xvcjpteUNvbG9yfSB9fVxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJvcmRlcjpzb2xpZCAxcHggYmxhY2s7IGhlaWdodDoyMHB4XCJcclxuICAgICAgICAgICAgICAgbmctc3R5bGU9XCJ7J2JhY2tncm91bmQtY29sb3InOm15Q29sb3IubmFtZX1cIj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1vcHRpb25zJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygne3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9JykpLmdldFRleHQoKSkudG9NYXRjaCgncmVkJyk7XHJcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkubW9kZWwoJ215Q29sb3InKSkuZmlyc3QoKS5jbGljaygpO1xyXG4gICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5LmNzcygnc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXSBvcHRpb24nKSkuZmlyc3QoKS5jbGljaygpO1xyXG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3tzZWxlY3RlZF9jb2xvcjpteUNvbG9yfScpKS5nZXRUZXh0KCkpLnRvTWF0Y2goJ2JsYWNrJyk7XHJcbiAgICAgICAgICAgZWxlbWVudChieS5jc3MoJy5udWxsYWJsZSBzZWxlY3RbbmctbW9kZWw9XCJteUNvbG9yXCJdJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkuY3NzKCcubnVsbGFibGUgc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXSBvcHRpb24nKSkuZmlyc3QoKS5jbGljaygpO1xyXG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3tzZWxlY3RlZF9jb2xvcjpteUNvbG9yfScpKS5nZXRUZXh0KCkpLnRvTWF0Y2goJ251bGwnKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG52YXIgbmdPcHRpb25zRGlyZWN0aXZlID0gdmFsdWVGbih7XHJcbiAgcmVzdHJpY3Q6ICdBJyxcclxuICB0ZXJtaW5hbDogdHJ1ZVxyXG59KTtcclxuXHJcbi8vIGpzaGludCBtYXhsZW46IGZhbHNlXHJcbnZhciBzZWxlY3REaXJlY3RpdmUgPSBbJyRjb21waWxlJywgJyRwYXJzZScsIGZ1bmN0aW9uKCRjb21waWxlLCAgICRwYXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy8wMDAwMTExMTExMTExMTAwMDAwMDAwMDAwMjIyMjIyMjIyMjAwMDAwMDAwMDAwMDAwMDAwMDAwMDMzMzMzMzMzMzMwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDAwMDAwMDAwMDU1NTU1NTU1NTU1NTU1NTAwMDAwMDA2NjY2NjY2NjY2NjY2NjYwMDAwMDAwMDAwMDAwMDA3Nzc3Nzc3Nzc3MDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODhcclxuICB2YXIgTkdfT1BUSU9OU19SRUdFWFAgPSAvXlxccyooW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZ3JvdXBcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMrZm9yXFxzKyg/OihbXFwkXFx3XVtcXCRcXHddKil8KD86XFwoXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqLFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKlxcKSkpXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpPyQvLFxyXG4gICAgICBudWxsTW9kZWxDdHJsID0geyRzZXRWaWV3VmFsdWU6IG5vb3B9O1xyXG4vLyBqc2hpbnQgbWF4bGVuOiAxMDBcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICByZXF1aXJlOiBbJ3NlbGVjdCcsICc/bmdNb2RlbCddLFxyXG4gICAgY29udHJvbGxlcjogWyckZWxlbWVudCcsICckc2NvcGUnLCAnJGF0dHJzJywgZnVuY3Rpb24oJGVsZW1lbnQsICRzY29wZSwgJGF0dHJzKSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgIG9wdGlvbnNNYXAgPSB7fSxcclxuICAgICAgICAgIG5nTW9kZWxDdHJsID0gbnVsbE1vZGVsQ3RybCxcclxuICAgICAgICAgIG51bGxPcHRpb24sXHJcbiAgICAgICAgICB1bmtub3duT3B0aW9uO1xyXG5cclxuXHJcbiAgICAgIHNlbGYuZGF0YWJvdW5kID0gJGF0dHJzLm5nTW9kZWw7XHJcblxyXG5cclxuICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24obmdNb2RlbEN0cmxfLCBudWxsT3B0aW9uXywgdW5rbm93bk9wdGlvbl8pIHtcclxuICAgICAgICBuZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsXztcclxuICAgICAgICBudWxsT3B0aW9uID0gbnVsbE9wdGlvbl87XHJcbiAgICAgICAgdW5rbm93bk9wdGlvbiA9IHVua25vd25PcHRpb25fO1xyXG4gICAgICB9O1xyXG5cclxuXHJcbiAgICAgIHNlbGYuYWRkT3B0aW9uID0gZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcclxuICAgICAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgJ1wib3B0aW9uIHZhbHVlXCInKTtcclxuICAgICAgICBvcHRpb25zTWFwW3ZhbHVlXSA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmIChuZ01vZGVsQ3RybC4kdmlld1ZhbHVlID09IHZhbHVlKSB7XHJcbiAgICAgICAgICAkZWxlbWVudC52YWwodmFsdWUpO1xyXG4gICAgICAgICAgaWYgKHVua25vd25PcHRpb24ucGFyZW50KCkpIHVua25vd25PcHRpb24ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zODE0NTlcclxuICAgICAgICAvLyBBZGRpbmcgYW4gPG9wdGlvbiBzZWxlY3RlZD1cInNlbGVjdGVkXCI+IGVsZW1lbnQgdG8gYSA8c2VsZWN0IHJlcXVpcmVkPVwicmVxdWlyZWRcIj4gc2hvdWxkXHJcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSBzZWxlY3QgdGhlIG5ldyBlbGVtZW50XHJcbiAgICAgICAgaWYgKGVsZW1lbnRbMF0uaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpKSB7XHJcbiAgICAgICAgICBlbGVtZW50WzBdLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG5cclxuICAgICAgc2VsZi5yZW1vdmVPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmhhc09wdGlvbih2YWx1ZSkpIHtcclxuICAgICAgICAgIGRlbGV0ZSBvcHRpb25zTWFwW3ZhbHVlXTtcclxuICAgICAgICAgIGlmIChuZ01vZGVsQ3RybC4kdmlld1ZhbHVlID09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVW5rbm93bk9wdGlvbih2YWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuXHJcbiAgICAgIHNlbGYucmVuZGVyVW5rbm93bk9wdGlvbiA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIHZhciB1bmtub3duVmFsID0gJz8gJyArIGhhc2hLZXkodmFsKSArICcgPyc7XHJcbiAgICAgICAgdW5rbm93bk9wdGlvbi52YWwodW5rbm93blZhbCk7XHJcbiAgICAgICAgJGVsZW1lbnQucHJlcGVuZCh1bmtub3duT3B0aW9uKTtcclxuICAgICAgICAkZWxlbWVudC52YWwodW5rbm93blZhbCk7XHJcbiAgICAgICAgdW5rbm93bk9wdGlvbi5wcm9wKCdzZWxlY3RlZCcsIHRydWUpOyAvLyBuZWVkZWQgZm9yIElFXHJcbiAgICAgIH07XHJcblxyXG5cclxuICAgICAgc2VsZi5oYXNPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zTWFwLmhhc093blByb3BlcnR5KHZhbHVlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gZGlzYWJsZSB1bmtub3duIG9wdGlvbiBzbyB0aGF0IHdlIGRvbid0IGRvIHdvcmsgd2hlbiB0aGUgd2hvbGUgc2VsZWN0IGlzIGJlaW5nIGRlc3Ryb3llZFxyXG4gICAgICAgIHNlbGYucmVuZGVyVW5rbm93bk9wdGlvbiA9IG5vb3A7XHJcbiAgICAgIH0pO1xyXG4gICAgfV0sXHJcblxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XHJcbiAgICAgIC8vIGlmIG5nTW9kZWwgaXMgbm90IGRlZmluZWQsIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcclxuICAgICAgaWYgKCFjdHJsc1sxXSkgcmV0dXJuO1xyXG5cclxuICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1swXSxcclxuICAgICAgICAgIG5nTW9kZWxDdHJsID0gY3RybHNbMV0sXHJcbiAgICAgICAgICBtdWx0aXBsZSA9IGF0dHIubXVsdGlwbGUsXHJcbiAgICAgICAgICBvcHRpb25zRXhwID0gYXR0ci5uZ09wdGlvbnMsXHJcbiAgICAgICAgICBudWxsT3B0aW9uID0gZmFsc2UsIC8vIGlmIGZhbHNlLCB1c2VyIHdpbGwgbm90IGJlIGFibGUgdG8gc2VsZWN0IGl0ICh1c2VkIGJ5IG5nT3B0aW9ucylcclxuICAgICAgICAgIGVtcHR5T3B0aW9uLFxyXG4gICAgICAgICAgcmVuZGVyU2NoZWR1bGVkID0gZmFsc2UsXHJcbiAgICAgICAgICAvLyB3ZSBjYW4ndCBqdXN0IGpxTGl0ZSgnPG9wdGlvbj4nKSBzaW5jZSBqcUxpdGUgaXMgbm90IHNtYXJ0IGVub3VnaFxyXG4gICAgICAgICAgLy8gdG8gY3JlYXRlIGl0IGluIDxzZWxlY3Q+IGFuZCBJRSBiYXJmcyBvdGhlcndpc2UuXHJcbiAgICAgICAgICBvcHRpb25UZW1wbGF0ZSA9IGpxTGl0ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSksXHJcbiAgICAgICAgICBvcHRHcm91cFRlbXBsYXRlID1qcUxpdGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0Z3JvdXAnKSksXHJcbiAgICAgICAgICB1bmtub3duT3B0aW9uID0gb3B0aW9uVGVtcGxhdGUuY2xvbmUoKTtcclxuXHJcbiAgICAgIC8vIGZpbmQgXCJudWxsXCIgb3B0aW9uXHJcbiAgICAgIGZvcih2YXIgaSA9IDAsIGNoaWxkcmVuID0gZWxlbWVudC5jaGlsZHJlbigpLCBpaSA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICBpZiAoY2hpbGRyZW5baV0udmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICBlbXB0eU9wdGlvbiA9IG51bGxPcHRpb24gPSBjaGlsZHJlbi5lcShpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgc2VsZWN0Q3RybC5pbml0KG5nTW9kZWxDdHJsLCBudWxsT3B0aW9uLCB1bmtub3duT3B0aW9uKTtcclxuXHJcbiAgICAgIC8vIHJlcXVpcmVkIHZhbGlkYXRvclxyXG4gICAgICBpZiAobXVsdGlwbGUpIHtcclxuICAgICAgICBuZ01vZGVsQ3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICByZXR1cm4gIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAob3B0aW9uc0V4cCkgc2V0dXBBc09wdGlvbnMoc2NvcGUsIGVsZW1lbnQsIG5nTW9kZWxDdHJsKTtcclxuICAgICAgZWxzZSBpZiAobXVsdGlwbGUpIHNldHVwQXNNdWx0aXBsZShzY29wZSwgZWxlbWVudCwgbmdNb2RlbEN0cmwpO1xyXG4gICAgICBlbHNlIHNldHVwQXNTaW5nbGUoc2NvcGUsIGVsZW1lbnQsIG5nTW9kZWxDdHJsLCBzZWxlY3RDdHJsKTtcclxuXHJcblxyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldHVwQXNTaW5nbGUoc2NvcGUsIHNlbGVjdEVsZW1lbnQsIG5nTW9kZWxDdHJsLCBzZWxlY3RDdHJsKSB7XHJcbiAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHZpZXdWYWx1ZSA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XHJcblxyXG4gICAgICAgICAgaWYgKHNlbGVjdEN0cmwuaGFzT3B0aW9uKHZpZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKHVua25vd25PcHRpb24ucGFyZW50KCkpIHVua25vd25PcHRpb24ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQudmFsKHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh2aWV3VmFsdWUgPT09ICcnKSBlbXB0eU9wdGlvbi5wcm9wKCdzZWxlY3RlZCcsIHRydWUpOyAvLyB0byBtYWtlIElFOSBoYXBweVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZpZXdWYWx1ZSkgJiYgZW1wdHlPcHRpb24pIHtcclxuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LnZhbCgnJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5yZW5kZXJVbmtub3duT3B0aW9uKHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWxlY3RFbGVtZW50Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHVua25vd25PcHRpb24ucGFyZW50KCkpIHVua25vd25PcHRpb24ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoc2VsZWN0RWxlbWVudC52YWwoKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0dXBBc011bHRpcGxlKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBjdHJsKSB7XHJcbiAgICAgICAgdmFyIGxhc3RWaWV3O1xyXG4gICAgICAgIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIGl0ZW1zID0gbmV3IEhhc2hNYXAoY3RybC4kdmlld1ZhbHVlKTtcclxuICAgICAgICAgIGZvckVhY2goc2VsZWN0RWxlbWVudC5maW5kKCdvcHRpb24nKSwgZnVuY3Rpb24ob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGlzRGVmaW5lZChpdGVtcy5nZXQob3B0aW9uLnZhbHVlKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyB3ZSBoYXZlIHRvIGRvIGl0IG9uIGVhY2ggd2F0Y2ggc2luY2UgbmdNb2RlbCB3YXRjaGVzIHJlZmVyZW5jZSwgYnV0XHJcbiAgICAgICAgLy8gd2UgbmVlZCB0byB3b3JrIG9mIGFuIGFycmF5LCBzbyB3ZSBuZWVkIHRvIHNlZSBpZiBhbnl0aGluZyB3YXMgaW5zZXJ0ZWQvcmVtb3ZlZFxyXG4gICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBzZWxlY3RNdWx0aXBsZVdhdGNoKCkge1xyXG4gICAgICAgICAgaWYgKCFlcXVhbHMobGFzdFZpZXcsIGN0cmwuJHZpZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgbGFzdFZpZXcgPSBzaGFsbG93Q29weShjdHJsLiR2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgICBjdHJsLiRyZW5kZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2VsZWN0RWxlbWVudC5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnJheSA9IFtdO1xyXG4gICAgICAgICAgICBmb3JFYWNoKHNlbGVjdEVsZW1lbnQuZmluZCgnb3B0aW9uJyksIGZ1bmN0aW9uKG9wdGlvbikge1xyXG4gICAgICAgICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGFycmF5LnB1c2gob3B0aW9uLnZhbHVlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdHJsLiRzZXRWaWV3VmFsdWUoYXJyYXkpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldHVwQXNPcHRpb25zKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBjdHJsKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoO1xyXG5cclxuICAgICAgICBpZiAoIShtYXRjaCA9IG9wdGlvbnNFeHAubWF0Y2goTkdfT1BUSU9OU19SRUdFWFApKSkge1xyXG4gICAgICAgICAgdGhyb3cgbmdPcHRpb25zTWluRXJyKCdpZXhwJyxcclxuICAgICAgICAgICAgXCJFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgXCIgK1xyXG4gICAgICAgICAgICBcIidfc2VsZWN0XyAoYXMgX2xhYmVsXyk/IGZvciAoX2tleV8sKT9fdmFsdWVfIGluIF9jb2xsZWN0aW9uXydcIiArXHJcbiAgICAgICAgICAgIFwiIGJ1dCBnb3QgJ3swfScuIEVsZW1lbnQ6IHsxfVwiLFxyXG4gICAgICAgICAgICBvcHRpb25zRXhwLCBzdGFydGluZ1RhZyhzZWxlY3RFbGVtZW50KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGlzcGxheUZuID0gJHBhcnNlKG1hdGNoWzJdIHx8IG1hdGNoWzFdKSxcclxuICAgICAgICAgICAgdmFsdWVOYW1lID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNl0sXHJcbiAgICAgICAgICAgIGtleU5hbWUgPSBtYXRjaFs1XSxcclxuICAgICAgICAgICAgZ3JvdXBCeUZuID0gJHBhcnNlKG1hdGNoWzNdIHx8ICcnKSxcclxuICAgICAgICAgICAgdmFsdWVGbiA9ICRwYXJzZShtYXRjaFsyXSA/IG1hdGNoWzFdIDogdmFsdWVOYW1lKSxcclxuICAgICAgICAgICAgdmFsdWVzRm4gPSAkcGFyc2UobWF0Y2hbN10pLFxyXG4gICAgICAgICAgICB0cmFjayA9IG1hdGNoWzhdLFxyXG4gICAgICAgICAgICB0cmFja0ZuID0gdHJhY2sgPyAkcGFyc2UobWF0Y2hbOF0pIDogbnVsbCxcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhbiBhcnJheSBvZiBhcnJheSBvZiBleGlzdGluZyBvcHRpb24gZ3JvdXBzIGluIERPTS5cclxuICAgICAgICAgICAgLy8gV2UgdHJ5IHRvIHJldXNlIHRoZXNlIGlmIHBvc3NpYmxlXHJcbiAgICAgICAgICAgIC8vIC0gb3B0aW9uR3JvdXBzQ2FjaGVbMF0gaXMgdGhlIG9wdGlvbnMgd2l0aCBubyBvcHRpb24gZ3JvdXBcclxuICAgICAgICAgICAgLy8gLSBvcHRpb25Hcm91cHNDYWNoZVs/XVswXSBpcyB0aGUgcGFyZW50OiBlaXRoZXIgdGhlIFNFTEVDVCBvciBPUFRHUk9VUCBlbGVtZW50XHJcbiAgICAgICAgICAgIG9wdGlvbkdyb3Vwc0NhY2hlID0gW1t7ZWxlbWVudDogc2VsZWN0RWxlbWVudCwgbGFiZWw6Jyd9XV07XHJcblxyXG4gICAgICAgIGlmIChudWxsT3B0aW9uKSB7XHJcbiAgICAgICAgICAvLyBjb21waWxlIHRoZSBlbGVtZW50IHNpbmNlIHRoZXJlIG1pZ2h0IGJlIGJpbmRpbmdzIGluIGl0XHJcbiAgICAgICAgICAkY29tcGlsZShudWxsT3B0aW9uKShzY29wZSk7XHJcblxyXG4gICAgICAgICAgLy8gcmVtb3ZlIHRoZSBjbGFzcywgd2hpY2ggaXMgYWRkZWQgYXV0b21hdGljYWxseSBiZWNhdXNlIHdlIHJlY29tcGlsZSB0aGUgZWxlbWVudCBhbmQgaXRcclxuICAgICAgICAgIC8vIGJlY29tZXMgdGhlIGNvbXBpbGF0aW9uIHJvb3RcclxuICAgICAgICAgIG51bGxPcHRpb24ucmVtb3ZlQ2xhc3MoJ25nLXNjb3BlJyk7XHJcblxyXG4gICAgICAgICAgLy8gd2UgbmVlZCB0byByZW1vdmUgaXQgYmVmb3JlIGNhbGxpbmcgc2VsZWN0RWxlbWVudC5lbXB0eSgpIGJlY2F1c2Ugb3RoZXJ3aXNlIElFIHdpbGxcclxuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgbGFiZWwgZnJvbSB0aGUgZWxlbWVudC4gd3RmP1xyXG4gICAgICAgICAgbnVsbE9wdGlvbi5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIGNvbnRlbnRzLCB3ZSdsbCBhZGQgd2hhdCdzIG5lZWRlZCBiYXNlZCBvbiB0aGUgbW9kZWxcclxuICAgICAgICBzZWxlY3RFbGVtZW50LmVtcHR5KCk7XHJcblxyXG4gICAgICAgIHNlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9uR3JvdXAsXHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gdmFsdWVzRm4oc2NvcGUpIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9jYWxzID0ge30sXHJcbiAgICAgICAgICAgICAgICBrZXksIHZhbHVlLCBvcHRpb25FbGVtZW50LCBpbmRleCwgZ3JvdXBJbmRleCwgbGVuZ3RoLCBncm91cExlbmd0aCwgdHJhY2tJbmRleDtcclxuXHJcbiAgICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgIHZhbHVlID0gW107XHJcbiAgICAgICAgICAgICAgZm9yIChncm91cEluZGV4ID0gMCwgZ3JvdXBMZW5ndGggPSBvcHRpb25Hcm91cHNDYWNoZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICBncm91cEluZGV4IDwgZ3JvdXBMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICBncm91cEluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIC8vIGxpc3Qgb2Ygb3B0aW9ucyBmb3IgdGhhdCBncm91cC4gKGZpcnN0IGl0ZW0gaGFzIHRoZSBwYXJlbnQpXHJcbiAgICAgICAgICAgICAgICBvcHRpb25Hcm91cCA9IG9wdGlvbkdyb3Vwc0NhY2hlW2dyb3VwSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihpbmRleCA9IDEsIGxlbmd0aCA9IG9wdGlvbkdyb3VwLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKChvcHRpb25FbGVtZW50ID0gb3B0aW9uR3JvdXBbaW5kZXhdLmVsZW1lbnQpWzBdLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gb3B0aW9uRWxlbWVudC52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5TmFtZSkgbG9jYWxzW2tleU5hbWVdID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFja0ZuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHRyYWNrSW5kZXggPSAwOyB0cmFja0luZGV4IDwgY29sbGVjdGlvbi5sZW5ndGg7IHRyYWNrSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IGNvbGxlY3Rpb25bdHJhY2tJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFja0ZuKHNjb3BlLCBsb2NhbHMpID09IGtleSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gY29sbGVjdGlvbltrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKHZhbHVlRm4oc2NvcGUsIGxvY2FscykpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGtleSA9IHNlbGVjdEVsZW1lbnQudmFsKCk7XHJcbiAgICAgICAgICAgICAgaWYgKGtleSA9PSAnPycpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnJyl7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmFja0ZuKSB7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAodHJhY2tJbmRleCA9IDA7IHRyYWNrSW5kZXggPCBjb2xsZWN0aW9uLmxlbmd0aDsgdHJhY2tJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxzW3ZhbHVlTmFtZV0gPSBjb2xsZWN0aW9uW3RyYWNrSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFja0ZuKHNjb3BlLCBsb2NhbHMpID09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZUZuKHNjb3BlLCBsb2NhbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IGNvbGxlY3Rpb25ba2V5XTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGtleU5hbWUpIGxvY2Fsc1trZXlOYW1lXSA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZUZuKHNjb3BlLCBsb2NhbHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdHJsLiRzZXRWaWV3VmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICByZW5kZXIoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjdHJsLiRyZW5kZXIgPSByZW5kZXI7XHJcblxyXG4gICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24odmFsdWVzRm4sIHNjaGVkdWxlUmVuZGVyaW5nKTtcclxuICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHZhciBsb2NhbHMgPSB7fSxcclxuICAgICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXNGbihzY29wZSk7XHJcbiAgICAgICAgICBpZiAodmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHZhciB0b0Rpc3BsYXkgPSBuZXcgQXJyYXkodmFsdWVzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHZhbHVlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgbG9jYWxzW3ZhbHVlTmFtZV0gPSB2YWx1ZXNbaV07XHJcbiAgICAgICAgICAgICAgdG9EaXNwbGF5W2ldID0gZGlzcGxheUZuKHNjb3BlLCBsb2NhbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0b0Rpc3BsYXk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgc2NoZWR1bGVSZW5kZXJpbmcpO1xyXG5cclxuICAgICAgICBpZiAobXVsdGlwbGUpIHtcclxuICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7IHJldHVybiBjdHJsLiRtb2RlbFZhbHVlOyB9LCBzY2hlZHVsZVJlbmRlcmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRTZXQoKSB7XHJcbiAgICAgICAgICB2YXIgc2VsZWN0ZWRTZXQgPSBmYWxzZTtcclxuICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICB2YXIgbW9kZWxWYWx1ZSA9IGN0cmwuJG1vZGVsVmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0cmFja0ZuICYmIGlzQXJyYXkobW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICBzZWxlY3RlZFNldCA9IG5ldyBIYXNoTWFwKFtdKTtcclxuICAgICAgICAgICAgICB2YXIgbG9jYWxzID0ge307XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgdHJhY2tJbmRleCA9IDA7IHRyYWNrSW5kZXggPCBtb2RlbFZhbHVlLmxlbmd0aDsgdHJhY2tJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IG1vZGVsVmFsdWVbdHJhY2tJbmRleF07XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNldC5wdXQodHJhY2tGbihzY29wZSwgbG9jYWxzKSwgbW9kZWxWYWx1ZVt0cmFja0luZGV4XSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkU2V0ID0gbmV3IEhhc2hNYXAobW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBzZWxlY3RlZFNldDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzY2hlZHVsZVJlbmRlcmluZygpIHtcclxuICAgICAgICAgIGlmICghcmVuZGVyU2NoZWR1bGVkKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChyZW5kZXIpO1xyXG4gICAgICAgICAgICByZW5kZXJTY2hlZHVsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgICAgICAgIHJlbmRlclNjaGVkdWxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAvLyBUZW1wb3JhcnkgbG9jYXRpb24gZm9yIHRoZSBvcHRpb24gZ3JvdXBzIGJlZm9yZSB3ZSByZW5kZXIgdGhlbVxyXG4gICAgICAgICAgdmFyIG9wdGlvbkdyb3VwcyA9IHsnJzpbXX0sXHJcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXBOYW1lcyA9IFsnJ10sXHJcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXBOYW1lLFxyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3VwLFxyXG4gICAgICAgICAgICAgIG9wdGlvbixcclxuICAgICAgICAgICAgICBleGlzdGluZ1BhcmVudCwgZXhpc3RpbmdPcHRpb25zLCBleGlzdGluZ09wdGlvbixcclxuICAgICAgICAgICAgICBtb2RlbFZhbHVlID0gY3RybC4kbW9kZWxWYWx1ZSxcclxuICAgICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXNGbihzY29wZSkgfHwgW10sXHJcbiAgICAgICAgICAgICAga2V5cyA9IGtleU5hbWUgPyBzb3J0ZWRLZXlzKHZhbHVlcykgOiB2YWx1ZXMsXHJcbiAgICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAgIGdyb3VwTGVuZ3RoLCBsZW5ndGgsXHJcbiAgICAgICAgICAgICAgZ3JvdXBJbmRleCwgaW5kZXgsXHJcbiAgICAgICAgICAgICAgbG9jYWxzID0ge30sXHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWQsXHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTZXQgPSBnZXRTZWxlY3RlZFNldCgpLFxyXG4gICAgICAgICAgICAgIGxhc3RFbGVtZW50LFxyXG4gICAgICAgICAgICAgIGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgbGFiZWw7XHJcblxyXG5cclxuICAgICAgICAgIC8vIFdlIG5vdyBidWlsZCB1cCB0aGUgbGlzdCBvZiBvcHRpb25zIHdlIG5lZWQgKHdlIG1lcmdlIGxhdGVyKVxyXG4gICAgICAgICAgZm9yIChpbmRleCA9IDA7IGxlbmd0aCA9IGtleXMubGVuZ3RoLCBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xyXG5cclxuICAgICAgICAgICAga2V5ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIGlmIChrZXlOYW1lKSB7XHJcbiAgICAgICAgICAgICAga2V5ID0ga2V5c1tpbmRleF07XHJcbiAgICAgICAgICAgICAgaWYgKCBrZXkuY2hhckF0KDApID09PSAnJCcgKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICBsb2NhbHNba2V5TmFtZV0gPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gdmFsdWVzW2tleV07XHJcblxyXG4gICAgICAgICAgICBvcHRpb25Hcm91cE5hbWUgPSBncm91cEJ5Rm4oc2NvcGUsIGxvY2FscykgfHwgJyc7XHJcbiAgICAgICAgICAgIGlmICghKG9wdGlvbkdyb3VwID0gb3B0aW9uR3JvdXBzW29wdGlvbkdyb3VwTmFtZV0pKSB7XHJcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXAgPSBvcHRpb25Hcm91cHNbb3B0aW9uR3JvdXBOYW1lXSA9IFtdO1xyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3VwTmFtZXMucHVzaChvcHRpb25Hcm91cE5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkID0gaXNEZWZpbmVkKFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTZXQucmVtb3ZlKHRyYWNrRm4gPyB0cmFja0ZuKHNjb3BlLCBsb2NhbHMpIDogdmFsdWVGbihzY29wZSwgbG9jYWxzKSlcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmICh0cmFja0ZuKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWxDYXN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBtb2RlbENhc3RbdmFsdWVOYW1lXSA9IG1vZGVsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IHRyYWNrRm4oc2NvcGUsIG1vZGVsQ2FzdCkgPT09IHRyYWNrRm4oc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gbW9kZWxWYWx1ZSA9PT0gdmFsdWVGbihzY29wZSwgbG9jYWxzKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTZXQgPSBzZWxlY3RlZFNldCB8fCBzZWxlY3RlZDsgLy8gc2VlIGlmIGF0IGxlYXN0IG9uZSBpdGVtIGlzIHNlbGVjdGVkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGFiZWwgPSBkaXNwbGF5Rm4oc2NvcGUsIGxvY2Fscyk7IC8vIHdoYXQgd2lsbCBiZSBzZWVuIGJ5IHRoZSB1c2VyXHJcblxyXG4gICAgICAgICAgICAvLyBkb2luZyBkaXNwbGF5Rm4oc2NvcGUsIGxvY2FscykgfHwgJycgb3ZlcndyaXRlcyB6ZXJvIHZhbHVlc1xyXG4gICAgICAgICAgICBsYWJlbCA9IGlzRGVmaW5lZChsYWJlbCkgPyBsYWJlbCA6ICcnO1xyXG4gICAgICAgICAgICBvcHRpb25Hcm91cC5wdXNoKHtcclxuICAgICAgICAgICAgICAvLyBlaXRoZXIgdGhlIGluZGV4IGludG8gYXJyYXkgb3Iga2V5IGZyb20gb2JqZWN0XHJcbiAgICAgICAgICAgICAgaWQ6IHRyYWNrRm4gPyB0cmFja0ZuKHNjb3BlLCBsb2NhbHMpIDogKGtleU5hbWUgPyBrZXlzW2luZGV4XSA6IGluZGV4KSxcclxuICAgICAgICAgICAgICBsYWJlbDogbGFiZWwsXHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkICAgICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSBpZiB3ZSBzaG91bGQgYmUgc2VsZWN0ZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoIW11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsT3B0aW9uIHx8IG1vZGVsVmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAvLyBpbnNlcnQgbnVsbCBvcHRpb24gaWYgd2UgaGF2ZSBhIHBsYWNlaG9sZGVyLCBvciB0aGUgbW9kZWwgaXMgbnVsbFxyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3Vwc1snJ10udW5zaGlmdCh7aWQ6JycsIGxhYmVsOicnLCBzZWxlY3RlZDohc2VsZWN0ZWRTZXR9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghc2VsZWN0ZWRTZXQpIHtcclxuICAgICAgICAgICAgICAvLyBvcHRpb24gY291bGQgbm90IGJlIGZvdW5kLCB3ZSBoYXZlIHRvIGluc2VydCB0aGUgdW5kZWZpbmVkIGl0ZW1cclxuICAgICAgICAgICAgICBvcHRpb25Hcm91cHNbJyddLnVuc2hpZnQoe2lkOic/JywgbGFiZWw6JycsIHNlbGVjdGVkOnRydWV9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIE5vdyB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgbGlzdCBvZiBET00gbm9kZXMgdG8gbWF0Y2ggdGhlIG9wdGlvbkdyb3VwcyB3ZSBjb21wdXRlZCBhYm92ZVxyXG4gICAgICAgICAgZm9yIChncm91cEluZGV4ID0gMCwgZ3JvdXBMZW5ndGggPSBvcHRpb25Hcm91cE5hbWVzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgZ3JvdXBJbmRleCA8IGdyb3VwTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICBncm91cEluZGV4KyspIHtcclxuICAgICAgICAgICAgLy8gY3VycmVudCBvcHRpb24gZ3JvdXAgbmFtZSBvciAnJyBpZiBubyBncm91cFxyXG4gICAgICAgICAgICBvcHRpb25Hcm91cE5hbWUgPSBvcHRpb25Hcm91cE5hbWVzW2dyb3VwSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgLy8gbGlzdCBvZiBvcHRpb25zIGZvciB0aGF0IGdyb3VwLiAoZmlyc3QgaXRlbSBoYXMgdGhlIHBhcmVudClcclxuICAgICAgICAgICAgb3B0aW9uR3JvdXAgPSBvcHRpb25Hcm91cHNbb3B0aW9uR3JvdXBOYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25Hcm91cHNDYWNoZS5sZW5ndGggPD0gZ3JvdXBJbmRleCkge1xyXG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZ3JvdyB0aGUgb3B0aW9uR3JvdXBzXHJcbiAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBvcHRHcm91cFRlbXBsYXRlLmNsb25lKCkuYXR0cignbGFiZWwnLCBvcHRpb25Hcm91cE5hbWUpLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IG9wdGlvbkdyb3VwLmxhYmVsXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBleGlzdGluZ09wdGlvbnMgPSBbZXhpc3RpbmdQYXJlbnRdO1xyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3Vwc0NhY2hlLnB1c2goZXhpc3RpbmdPcHRpb25zKTtcclxuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZChleGlzdGluZ1BhcmVudC5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBleGlzdGluZ09wdGlvbnMgPSBvcHRpb25Hcm91cHNDYWNoZVtncm91cEluZGV4XTtcclxuICAgICAgICAgICAgICBleGlzdGluZ1BhcmVudCA9IGV4aXN0aW5nT3B0aW9uc1swXTsgIC8vIGVpdGhlciBTRUxFQ1QgKG5vIGdyb3VwKSBvciBPUFRHUk9VUCBlbGVtZW50XHJcblxyXG4gICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgT1BUR1JPVVAgbGFiZWwgaWYgbm90IHRoZSBzYW1lLlxyXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZ1BhcmVudC5sYWJlbCAhPSBvcHRpb25Hcm91cE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nUGFyZW50LmVsZW1lbnQuYXR0cignbGFiZWwnLCBleGlzdGluZ1BhcmVudC5sYWJlbCA9IG9wdGlvbkdyb3VwTmFtZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsYXN0RWxlbWVudCA9IG51bGw7ICAvLyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nXHJcbiAgICAgICAgICAgIGZvcihpbmRleCA9IDAsIGxlbmd0aCA9IG9wdGlvbkdyb3VwLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICBvcHRpb24gPSBvcHRpb25Hcm91cFtpbmRleF07XHJcbiAgICAgICAgICAgICAgaWYgKChleGlzdGluZ09wdGlvbiA9IGV4aXN0aW5nT3B0aW9uc1tpbmRleCsxXSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJldXNlIGVsZW1lbnRzXHJcbiAgICAgICAgICAgICAgICBsYXN0RWxlbWVudCA9IGV4aXN0aW5nT3B0aW9uLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdPcHRpb24ubGFiZWwgIT09IG9wdGlvbi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC50ZXh0KGV4aXN0aW5nT3B0aW9uLmxhYmVsID0gb3B0aW9uLmxhYmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ09wdGlvbi5pZCAhPT0gb3B0aW9uLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LnZhbChleGlzdGluZ09wdGlvbi5pZCA9IG9wdGlvbi5pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBsYXN0RWxlbWVudC5wcm9wKCdzZWxlY3RlZCcpIHByb3ZpZGVkIGJ5IGpRdWVyeSBoYXMgc2lkZS1lZmZlY3RzXHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdEVsZW1lbnRbMF0uc2VsZWN0ZWQgIT09IG9wdGlvbi5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC5wcm9wKCdzZWxlY3RlZCcsIChleGlzdGluZ09wdGlvbi5zZWxlY3RlZCA9IG9wdGlvbi5zZWxlY3RlZCkpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAobXNpZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlZSAjNzY5MlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBzZWxlY3RlZCBpdGVtIHdvdWxkbid0IHZpc3VhbGx5IHVwZGF0ZSBvbiBJRSB3aXRob3V0IHRoaXMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGVzdGVkIG9uIFdpbjc6IElFOSwgSUUxMCBhbmQgSUUxMS4gRnV0dXJlIElFcyBzaG91bGQgYmUgdGVzdGVkIGFzIHdlbGxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC5wcm9wKCdzZWxlY3RlZCcsIGV4aXN0aW5nT3B0aW9uLnNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBncm93IGVsZW1lbnRzXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgaXQncyBhIG51bGwgb3B0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmlkID09PSAnJyAmJiBudWxsT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIHB1dCBiYWNrIHRoZSBwcmUtY29tcGlsZWQgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICBlbGVtZW50ID0gbnVsbE9wdGlvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGpRdWVyeSh2MS40LjIpIEJ1ZzogV2Ugc2hvdWxkIGJlIGFibGUgdG8gY2hhaW4gdGhlIG1ldGhvZCBjYWxscywgYnV0XHJcbiAgICAgICAgICAgICAgICAgIC8vIGluIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnkgb24gc29tZSBicm93c2VyIHRoZSAudGV4dCgpIHJldHVybnMgYSBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgLy8gcmF0aGVyIHRoZW4gdGhlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgIChlbGVtZW50ID0gb3B0aW9uVGVtcGxhdGUuY2xvbmUoKSlcclxuICAgICAgICAgICAgICAgICAgICAgIC52YWwob3B0aW9uLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnByb3AoJ3NlbGVjdGVkJywgb3B0aW9uLnNlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NlbGVjdGVkJywgb3B0aW9uLnNlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRleHQob3B0aW9uLmxhYmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleGlzdGluZ09wdGlvbnMucHVzaChleGlzdGluZ09wdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBvcHRpb24ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG9wdGlvbi5pZCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogb3B0aW9uLnNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC5hZnRlcihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGFyZW50LmVsZW1lbnQuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGFzdEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyByZW1vdmUgYW55IGV4Y2Vzc2l2ZSBPUFRJT05zIGluIGEgZ3JvdXBcclxuICAgICAgICAgICAgaW5kZXgrKzsgLy8gaW5jcmVtZW50IHNpbmNlIHRoZSBleGlzdGluZ09wdGlvbnNbMF0gaXMgcGFyZW50IGVsZW1lbnQgbm90IE9QVElPTlxyXG4gICAgICAgICAgICB3aGlsZShleGlzdGluZ09wdGlvbnMubGVuZ3RoID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICBleGlzdGluZ09wdGlvbnMucG9wKCkuZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gcmVtb3ZlIGFueSBleGNlc3NpdmUgT1BUR1JPVVBzIGZyb20gc2VsZWN0XHJcbiAgICAgICAgICB3aGlsZShvcHRpb25Hcm91cHNDYWNoZS5sZW5ndGggPiBncm91cEluZGV4KSB7XHJcbiAgICAgICAgICAgIG9wdGlvbkdyb3Vwc0NhY2hlLnBvcCgpWzBdLmVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG52YXIgb3B0aW9uRGlyZWN0aXZlID0gWyckaW50ZXJwb2xhdGUnLCBmdW5jdGlvbigkaW50ZXJwb2xhdGUpIHtcclxuICB2YXIgbnVsbFNlbGVjdEN0cmwgPSB7XHJcbiAgICBhZGRPcHRpb246IG5vb3AsXHJcbiAgICByZW1vdmVPcHRpb246IG5vb3BcclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgIHByaW9yaXR5OiAxMDAsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgIGlmIChpc1VuZGVmaW5lZChhdHRyLnZhbHVlKSkge1xyXG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKGVsZW1lbnQudGV4dCgpLCB0cnVlKTtcclxuICAgICAgICBpZiAoIWludGVycG9sYXRlRm4pIHtcclxuICAgICAgICAgIGF0dHIuJHNldCgndmFsdWUnLCBlbGVtZW50LnRleHQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdEN0cmxOYW1lID0gJyRzZWxlY3RDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgcGFyZW50ID0gZWxlbWVudC5wYXJlbnQoKSxcclxuICAgICAgICAgICAgc2VsZWN0Q3RybCA9IHBhcmVudC5kYXRhKHNlbGVjdEN0cmxOYW1lKSB8fFxyXG4gICAgICAgICAgICAgIHBhcmVudC5wYXJlbnQoKS5kYXRhKHNlbGVjdEN0cmxOYW1lKTsgLy8gaW4gY2FzZSB3ZSBhcmUgaW4gb3B0Z3JvdXBcclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdEN0cmwgJiYgc2VsZWN0Q3RybC5kYXRhYm91bmQpIHtcclxuICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiBPcGVyYSBkZWZhdWx0cyB0byB0cnVlIGFuZCBpZiBub3Qgb3ZlcnJpZGRlbiB0aGlzIG1lc3NlcyB1cCB0aGUgcmVwZWF0ZXIuXHJcbiAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRoZSB2aWV3IHRvIGRyaXZlIHRoZSBpbml0aWFsaXphdGlvbiBvZiB0aGUgbW9kZWwgYW55d2F5LlxyXG4gICAgICAgICAgZWxlbWVudC5wcm9wKCdzZWxlY3RlZCcsIGZhbHNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VsZWN0Q3RybCA9IG51bGxTZWxlY3RDdHJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGludGVycG9sYXRlRm4pIHtcclxuICAgICAgICAgIHNjb3BlLiR3YXRjaChpbnRlcnBvbGF0ZUZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZVdhdGNoQWN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XHJcbiAgICAgICAgICAgIGF0dHIuJHNldCgndmFsdWUnLCBuZXdWYWwpO1xyXG4gICAgICAgICAgICBpZiAob2xkVmFsICE9PSBuZXdWYWwpIHtcclxuICAgICAgICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZU9wdGlvbihvbGRWYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGVjdEN0cmwuYWRkT3B0aW9uKG5ld1ZhbCwgZWxlbWVudCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VsZWN0Q3RybC5hZGRPcHRpb24oYXR0ci52YWx1ZSwgZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2VsZWN0Q3RybC5yZW1vdmVPcHRpb24oYXR0ci52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG52YXIgc3R5bGVEaXJlY3RpdmUgPSB2YWx1ZUZuKHtcclxuICByZXN0cmljdDogJ0UnLFxyXG4gIHRlcm1pbmFsOiBmYWxzZVxyXG59KTtcclxuXHJcbiAgaWYgKHdpbmRvdy5hbmd1bGFyLmJvb3RzdHJhcCkge1xyXG4gICAgLy9Bbmd1bGFySlMgaXMgYWxyZWFkeSBsb2FkZWQsIHNvIHdlIGNhbiByZXR1cm4gaGVyZS4uLlxyXG4gICAgY29uc29sZS5sb2coJ1dBUk5JTkc6IFRyaWVkIHRvIGxvYWQgYW5ndWxhciBtb3JlIHRoYW4gb25jZS4nKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vdHJ5IHRvIGJpbmQgdG8ganF1ZXJ5IG5vdyBzbyB0aGF0IG9uZSBjYW4gd3JpdGUganFMaXRlKGRvY3VtZW50KS5yZWFkeSgpXHJcbiAgLy9idXQgd2Ugd2lsbCByZWJpbmQgb24gYm9vdHN0cmFwIGFnYWluLlxyXG4gIGJpbmRKUXVlcnkoKTtcclxuXHJcbiAgcHVibGlzaEV4dGVybmFsQVBJKGFuZ3VsYXIpO1xyXG5cclxuICBqcUxpdGUoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhckluaXQoZG9jdW1lbnQsIGJvb3RzdHJhcCk7XHJcbiAgfSk7XHJcblxyXG59KSh3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbiF3aW5kb3cuYW5ndWxhci4kJGNzcCgpICYmIHdpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoJ2hlYWQnKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+QGNoYXJzZXQgXCJVVEYtOFwiO1tuZ1xcXFw6Y2xvYWtdLFtuZy1jbG9ha10sW2RhdGEtbmctY2xvYWtdLFt4LW5nLWNsb2FrXSwubmctY2xvYWssLngtbmctY2xvYWssLm5nLWhpZGU6bm90KC5uZy1hbmltYXRlKXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXFxcOmZvcm17ZGlzcGxheTpibG9jazt9PC9zdHlsZT4nKTsiLCIvKipcclxuICogQGxpY2Vuc2UgQW5ndWxhckpTIHYxLjMuMC1yYy4yXHJcbiAqIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXHJcbiAqIExpY2Vuc2U6IE1JVFxyXG4gKi9cclxuKGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhciwgdW5kZWZpbmVkKSB7J3VzZSBzdHJpY3QnO1xyXG5cclxuLyoganNoaW50IG1heGxlbjogZmFsc2UgKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbW9kdWxlXHJcbiAqIEBuYW1lIG5nQW5pbWF0ZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogVGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBwcm92aWRlcyBzdXBwb3J0IGZvciBKYXZhU2NyaXB0LCBDU1MzIHRyYW5zaXRpb24gYW5kIENTUzMga2V5ZnJhbWUgYW5pbWF0aW9uIGhvb2tzIHdpdGhpbiBleGlzdGluZyBjb3JlIGFuZCBjdXN0b20gZGlyZWN0aXZlcy5cclxuICpcclxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ0FuaW1hdGVcIj48L2Rpdj5cclxuICpcclxuICogIyBVc2FnZVxyXG4gKlxyXG4gKiBUbyBzZWUgYW5pbWF0aW9ucyBpbiBhY3Rpb24sIGFsbCB0aGF0IGlzIHJlcXVpcmVkIGlzIHRvIGRlZmluZSB0aGUgYXBwcm9wcmlhdGUgQ1NTIGNsYXNzZXNcclxuICogb3IgdG8gcmVnaXN0ZXIgYSBKYXZhU2NyaXB0IGFuaW1hdGlvbiB2aWEgdGhlIG15TW9kdWxlLmFuaW1hdGlvbigpIGZ1bmN0aW9uLiBUaGUgZGlyZWN0aXZlcyB0aGF0IHN1cHBvcnQgYW5pbWF0aW9uIGF1dG9tYXRpY2FsbHkgYXJlOlxyXG4gKiBgbmdSZXBlYXRgLCBgbmdJbmNsdWRlYCwgYG5nSWZgLCBgbmdTd2l0Y2hgLCBgbmdTaG93YCwgYG5nSGlkZWAsIGBuZ1ZpZXdgIGFuZCBgbmdDbGFzc2AuIEN1c3RvbSBkaXJlY3RpdmVzIGNhbiB0YWtlIGFkdmFudGFnZSBvZiBhbmltYXRpb25cclxuICogYnkgdXNpbmcgdGhlIGAkYW5pbWF0ZWAgc2VydmljZS5cclxuICpcclxuICogQmVsb3cgaXMgYSBtb3JlIGRldGFpbGVkIGJyZWFrZG93biBvZiB0aGUgc3VwcG9ydGVkIGFuaW1hdGlvbiBldmVudHMgcHJvdmlkZWQgYnkgcHJlLWV4aXN0aW5nIG5nIGRpcmVjdGl2ZXM6XHJcbiAqXHJcbiAqIHwgRGlyZWN0aXZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydGVkIEFuaW1hdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxyXG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQjdXNhZ2VfYW5pbWF0aW9ucyBuZ1JlcGVhdH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVudGVyLCBsZWF2ZSBhbmQgbW92ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqIHwge0BsaW5rIG5nUm91dGUuZGlyZWN0aXZlOm5nVmlldyN1c2FnZV9hbmltYXRpb25zIG5nVmlld30gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW50ZXIgYW5kIGxlYXZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSN1c2FnZV9hbmltYXRpb25zIG5nSW5jbHVkZX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlbnRlciBhbmQgbGVhdmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdTd2l0Y2gjdXNhZ2VfYW5pbWF0aW9ucyBuZ1N3aXRjaH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVudGVyIGFuZCBsZWF2ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqIHwge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0lmI3VzYWdlX2FuaW1hdGlvbnMgbmdJZn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW50ZXIgYW5kIGxlYXZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xhc3MjdXNhZ2VfYW5pbWF0aW9ucyBuZ0NsYXNzfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhZGQgYW5kIHJlbW92ZSAodGhlIENTUyBjbGFzcyhlcykgcHJlc2VudCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdTaG93I3VzYWdlX2FuaW1hdGlvbnMgbmdTaG93fSAmIHtAbGluayBuZy5kaXJlY3RpdmU6bmdIaWRlI3VzYWdlX2FuaW1hdGlvbnMgbmdIaWRlfSB8IGFkZCBhbmQgcmVtb3ZlICh0aGUgbmctaGlkZSBjbGFzcyB2YWx1ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqIHwge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtI3VzYWdlX2FuaW1hdGlvbnMgZm9ybX0gJiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWwjdXNhZ2VfYW5pbWF0aW9ucyBuZ01vZGVsfSAgIHwgYWRkIGFuZCByZW1vdmUgKGRpcnR5LCBwcmlzdGluZSwgdmFsaWQsIGludmFsaWQgJiBhbGwgb3RoZXIgdmFsaWRhdGlvbnMpIHxcclxuICogfCB7QGxpbmsgbmdNZXNzYWdlcy5kaXJlY3RpdmU6bmdNZXNzYWdlI3VzYWdlX2FuaW1hdGlvbnMgbmdNZXNzYWdlc30gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhZGQgYW5kIHJlbW92ZSAobmctYWN0aXZlICYgbmctaW5hY3RpdmUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8IHtAbGluayBuZ01lc3NhZ2VzLmRpcmVjdGl2ZTpuZ01lc3NhZ2UjdXNhZ2VfYW5pbWF0aW9ucyBuZ01lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVudGVyIGFuZCBsZWF2ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqXHJcbiAqIFlvdSBjYW4gZmluZCBvdXQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBhbmltYXRpb25zIHVwb24gdmlzaXRpbmcgZWFjaCBkaXJlY3RpdmUgcGFnZS5cclxuICpcclxuICogQmVsb3cgaXMgYW4gZXhhbXBsZSBvZiBob3cgdG8gYXBwbHkgYW5pbWF0aW9ucyB0byBhIGRpcmVjdGl2ZSB0aGF0IHN1cHBvcnRzIGFuaW1hdGlvbiBob29rczpcclxuICpcclxuICogYGBgaHRtbFxyXG4gKiA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+XHJcbiAqIC5zbGlkZS5uZy1lbnRlciwgLnNsaWRlLm5nLWxlYXZlIHtcclxuICogICAtd2Via2l0LXRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xyXG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xyXG4gKiB9XHJcbiAqXHJcbiAqIC5zbGlkZS5uZy1lbnRlciB7IH0gICAgICAgIC8mIzQyOyBzdGFydGluZyBhbmltYXRpb25zIGZvciBlbnRlciAmIzQyOy9cclxuICogLnNsaWRlLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7IH0gLyYjNDI7IHRlcm1pbmFsIGFuaW1hdGlvbnMgZm9yIGVudGVyICYjNDI7L1xyXG4gKiAuc2xpZGUubmctbGVhdmUgeyB9ICAgICAgICAvJiM0Mjsgc3RhcnRpbmcgYW5pbWF0aW9ucyBmb3IgbGVhdmUgJiM0MjsvXHJcbiAqIC5zbGlkZS5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUgeyB9IC8mIzQyOyB0ZXJtaW5hbCBhbmltYXRpb25zIGZvciBsZWF2ZSAmIzQyOy9cclxuICogPC9zdHlsZT5cclxuICpcclxuICogPCEtLVxyXG4gKiB0aGUgYW5pbWF0ZSBzZXJ2aWNlIHdpbGwgYXV0b21hdGljYWxseSBhZGQgLm5nLWVudGVyIGFuZCAubmctbGVhdmUgdG8gdGhlIGVsZW1lbnRcclxuICogdG8gdHJpZ2dlciB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uc1xyXG4gKiAtLT5cclxuICogPEFOWSBjbGFzcz1cInNsaWRlXCIgbmctaW5jbHVkZT1cIi4uLlwiPjwvQU5ZPlxyXG4gKiBgYGBcclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQsIGJ5IGRlZmF1bHQsIGlmIGFuIGFuaW1hdGlvbiBpcyBydW5uaW5nLCBhbnkgY2hpbGQgZWxlbWVudHMgY2Fubm90IGJlIGFuaW1hdGVkXHJcbiAqIHVudGlsIHRoZSBwYXJlbnQgZWxlbWVudCdzIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkLiBUaGlzIGJsb2NraW5nIGZlYXR1cmUgY2FuIGJlIG92ZXJyaWRkZW4gYnlcclxuICogcGxhY2luZyB0aGUgYG5nLWFuaW1hdGUtY2hpbGRyZW5gIGF0dHJpYnV0ZSBvbiBhIHBhcmVudCBjb250YWluZXIgdGFnLlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRpb25cIiBuZy1pZj1cIm9uXCIgbmctYW5pbWF0ZS1jaGlsZHJlbj5cclxuICogICA8ZGl2IGNsYXNzPVwiZmFkZS1hbmltYXRpb25cIiBuZy1pZj1cIm9uXCI+XHJcbiAqICAgICA8ZGl2IGNsYXNzPVwiZXhwbG9kZS1hbmltYXRpb25cIiBuZy1pZj1cIm9uXCI+XHJcbiAqICAgICAgICAuLi5cclxuICogICAgIDwvZGl2PlxyXG4gKiAgIDwvZGl2PlxyXG4gKiA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFdoZW4gdGhlIGBvbmAgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzIGFuZCBhbiBhbmltYXRpb24gaXMgdHJpZ2dlcmVkIHRoZW4gZWFjaCBvZiB0aGUgZWxlbWVudHMgd2l0aGluXHJcbiAqIHdpbGwgYWxsIGFuaW1hdGUgd2l0aG91dCB0aGUgYmxvY2sgYmVpbmcgYXBwbGllZCB0byBjaGlsZCBlbGVtZW50cy5cclxuICpcclxuICogIyMgQXJlIGFuaW1hdGlvbnMgcnVuIHdoZW4gdGhlIGFwcGxpY2F0aW9uIHN0YXJ0cz9cclxuICogTm8gdGhleSBhcmUgbm90LiBXaGVuIGFuIGFwcGxpY2F0aW9uIGlzIGJvb3RzdHJhcHBlZCBBbmd1bGFyIHdpbGwgZGlzYWJsZSBhbmltYXRpb25zIGZyb20gcnVubmluZyB0byBhdm9pZFxyXG4gKiBhIGZyZW56eSBvZiBhbmltYXRpb25zIGZyb20gYmVpbmcgdHJpZ2dlcmVkIGFzIHNvb24gYXMgdGhlIGJyb3dzZXIgaGFzIHJlbmRlcmVkIHRoZSBzY3JlZW4uIEZvciB0aGlzIHRvIHdvcmssXHJcbiAqIEFuZ3VsYXIgd2lsbCB3YWl0IGZvciB0d28gZGlnZXN0IGN5Y2xlcyB1bnRpbCBlbmFibGluZyBhbmltYXRpb25zLiBGcm9tIHRoZXJlIG9uLCBhbnkgYW5pbWF0aW9uLXRyaWdnZXJpbmdcclxuICogbGF5b3V0IGNoYW5nZXMgaW4gdGhlIGFwcGxpY2F0aW9uIHdpbGwgdHJpZ2dlciBhbmltYXRpb25zIGFzIG5vcm1hbC5cclxuICpcclxuICogSW4gYWRkaXRpb24sIHVwb24gYm9vdHN0cmFwLCBpZiB0aGUgcm91dGluZyBzeXN0ZW0gb3IgYW55IGRpcmVjdGl2ZXMgb3IgbG9hZCByZW1vdGUgZGF0YSAodmlhICRodHRwKSB0aGVuIEFuZ3VsYXJcclxuICogd2lsbCBhdXRvbWF0aWNhbGx5IGV4dGVuZCB0aGUgd2FpdCB0aW1lIHRvIGVuYWJsZSBhbmltYXRpb25zIG9uY2UgKiphbGwqKiBvZiB0aGUgb3V0Ym91bmQgSFRUUCByZXF1ZXN0c1xyXG4gKiBhcmUgY29tcGxldGUuXHJcbiAqXHJcbiAqIDxoMj5DU1MtZGVmaW5lZCBBbmltYXRpb25zPC9oMj5cclxuICogVGhlIGFuaW1hdGUgc2VydmljZSB3aWxsIGF1dG9tYXRpY2FsbHkgYXBwbHkgdHdvIENTUyBjbGFzc2VzIHRvIHRoZSBhbmltYXRlZCBlbGVtZW50IGFuZCB0aGVzZSB0d28gQ1NTIGNsYXNzZXNcclxuICogYXJlIGRlc2lnbmVkIHRvIGNvbnRhaW4gdGhlIHN0YXJ0IGFuZCBlbmQgQ1NTIHN0eWxpbmcuIEJvdGggQ1NTIHRyYW5zaXRpb25zIGFuZCBrZXlmcmFtZSBhbmltYXRpb25zIGFyZSBzdXBwb3J0ZWRcclxuICogYW5kIGNhbiBiZSB1c2VkIHRvIHBsYXkgYWxvbmcgd2l0aCB0aGlzIG5hbWluZyBzdHJ1Y3R1cmUuXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgY29kZSBiZWxvdyBkZW1vbnN0cmF0ZXMgaG93IHRvIHBlcmZvcm0gYW5pbWF0aW9ucyB1c2luZyAqKkNTUyB0cmFuc2l0aW9ucyoqIHdpdGggQW5ndWxhcjpcclxuICpcclxuICogYGBgaHRtbFxyXG4gKiA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+XHJcbiAqIC8mIzQyO1xyXG4gKiAgVGhlIGFuaW1hdGUgY2xhc3MgaXMgYXBhcnQgb2YgdGhlIGVsZW1lbnQgYW5kIHRoZSBuZy1lbnRlciBjbGFzc1xyXG4gKiAgaXMgYXR0YWNoZWQgdG8gdGhlIGVsZW1lbnQgb25jZSB0aGUgZW50ZXIgYW5pbWF0aW9uIGV2ZW50IGlzIHRyaWdnZXJlZFxyXG4gKiAmIzQyOy9cclxuICogLnJldmVhbC1hbmltYXRpb24ubmctZW50ZXIge1xyXG4gKiAgLXdlYmtpdC10cmFuc2l0aW9uOiAxcyBsaW5lYXIgYWxsOyAvJiM0MjsgU2FmYXJpL0Nocm9tZSAmIzQyOy9cclxuICogIHRyYW5zaXRpb246IDFzIGxpbmVhciBhbGw7IC8mIzQyOyBBbGwgb3RoZXIgbW9kZXJuIGJyb3dzZXJzIGFuZCBJRTEwKyAmIzQyOy9cclxuICpcclxuICogIC8mIzQyOyBUaGUgYW5pbWF0aW9uIHByZXBhcmF0aW9uIGNvZGUgJiM0MjsvXHJcbiAqICBvcGFjaXR5OiAwO1xyXG4gKiB9XHJcbiAqXHJcbiAqIC8mIzQyO1xyXG4gKiAgS2VlcCBpbiBtaW5kIHRoYXQgeW91IHdhbnQgdG8gY29tYmluZSBib3RoIENTU1xyXG4gKiAgY2xhc3NlcyB0b2dldGhlciB0byBhdm9pZCBhbnkgQ1NTLXNwZWNpZmljaXR5XHJcbiAqICBjb25mbGljdHNcclxuICogJiM0MjsvXHJcbiAqIC5yZXZlYWwtYW5pbWF0aW9uLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XHJcbiAqICAvJiM0MjsgVGhlIGFuaW1hdGlvbiBjb2RlIGl0c2VsZiAmIzQyOy9cclxuICogIG9wYWNpdHk6IDE7XHJcbiAqIH1cclxuICogPC9zdHlsZT5cclxuICpcclxuICogPGRpdiBjbGFzcz1cInZpZXctY29udGFpbmVyXCI+XHJcbiAqICAgPGRpdiBuZy12aWV3IGNsYXNzPVwicmV2ZWFsLWFuaW1hdGlvblwiPjwvZGl2PlxyXG4gKiA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgY29kZSBiZWxvdyBkZW1vbnN0cmF0ZXMgaG93IHRvIHBlcmZvcm0gYW5pbWF0aW9ucyB1c2luZyAqKkNTUyBhbmltYXRpb25zKiogd2l0aCBBbmd1bGFyOlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cclxuICogLnJldmVhbC1hbmltYXRpb24ubmctZW50ZXIge1xyXG4gKiAgIC13ZWJraXQtYW5pbWF0aW9uOiBlbnRlcl9zZXF1ZW5jZSAxcyBsaW5lYXI7IC8mIzQyOyBTYWZhcmkvQ2hyb21lICYjNDI7L1xyXG4gKiAgIGFuaW1hdGlvbjogZW50ZXJfc2VxdWVuY2UgMXMgbGluZWFyOyAvJiM0MjsgSUUxMCsgYW5kIEZ1dHVyZSBCcm93c2VycyAmIzQyOy9cclxuICogfVxyXG4gKiBALXdlYmtpdC1rZXlmcmFtZXMgZW50ZXJfc2VxdWVuY2Uge1xyXG4gKiAgIGZyb20geyBvcGFjaXR5OjA7IH1cclxuICogICB0byB7IG9wYWNpdHk6MTsgfVxyXG4gKiB9XHJcbiAqIEBrZXlmcmFtZXMgZW50ZXJfc2VxdWVuY2Uge1xyXG4gKiAgIGZyb20geyBvcGFjaXR5OjA7IH1cclxuICogICB0byB7IG9wYWNpdHk6MTsgfVxyXG4gKiB9XHJcbiAqIDwvc3R5bGU+XHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJ2aWV3LWNvbnRhaW5lclwiPlxyXG4gKiAgIDxkaXYgbmctdmlldyBjbGFzcz1cInJldmVhbC1hbmltYXRpb25cIj48L2Rpdj5cclxuICogPC9kaXY+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBCb3RoIENTUzMgYW5pbWF0aW9ucyBhbmQgdHJhbnNpdGlvbnMgY2FuIGJlIHVzZWQgdG9nZXRoZXIgYW5kIHRoZSBhbmltYXRlIHNlcnZpY2Ugd2lsbCBmaWd1cmUgb3V0IHRoZSBjb3JyZWN0IGR1cmF0aW9uIGFuZCBkZWxheSB0aW1pbmcuXHJcbiAqXHJcbiAqIFVwb24gRE9NIG11dGF0aW9uLCB0aGUgZXZlbnQgY2xhc3MgaXMgYWRkZWQgZmlyc3QgKHNvbWV0aGluZyBsaWtlIGBuZy1lbnRlcmApLCB0aGVuIHRoZSBicm93c2VyIHByZXBhcmVzIGl0c2VsZiB0byBhZGRcclxuICogdGhlIGFjdGl2ZSBjbGFzcyAoaW4gdGhpcyBjYXNlIGBuZy1lbnRlci1hY3RpdmVgKSB3aGljaCB0aGVuIHRyaWdnZXJzIHRoZSBhbmltYXRpb24uIFRoZSBhbmltYXRpb24gbW9kdWxlIHdpbGwgYXV0b21hdGljYWxseVxyXG4gKiBkZXRlY3QgdGhlIENTUyBjb2RlIHRvIGRldGVybWluZSB3aGVuIHRoZSBhbmltYXRpb24gZW5kcy4gT25jZSB0aGUgYW5pbWF0aW9uIGlzIG92ZXIgdGhlbiBib3RoIENTUyBjbGFzc2VzIHdpbGwgYmVcclxuICogcmVtb3ZlZCBmcm9tIHRoZSBET00uIElmIGEgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IENTUyB0cmFuc2l0aW9ucyBvciBDU1MgYW5pbWF0aW9ucyB0aGVuIHRoZSBhbmltYXRpb24gd2lsbCBzdGFydCBhbmQgZW5kXHJcbiAqIGltbWVkaWF0ZWx5IHJlc3VsdGluZyBpbiBhIERPTSBlbGVtZW50IHRoYXQgaXMgYXQgaXRzIGZpbmFsIHN0YXRlLiBUaGlzIGZpbmFsIHN0YXRlIGlzIHdoZW4gdGhlIERPTSBlbGVtZW50XHJcbiAqIGhhcyBubyBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24gY2xhc3NlcyBhcHBsaWVkIHRvIGl0LlxyXG4gKlxyXG4gKiAjIyMgU3RydWN0dXJhbCB0cmFuc2l0aW9uIGFuaW1hdGlvbnNcclxuICpcclxuICogU3RydWN0dXJhbCB0cmFuc2l0aW9ucyAoc3VjaCBhcyBlbnRlciwgbGVhdmUgYW5kIG1vdmUpIHdpbGwgYWx3YXlzIGFwcGx5IGEgYDBzIG5vbmVgIHRyYW5zaXRpb25cclxuICogdmFsdWUgdG8gZm9yY2UgdGhlIGJyb3dzZXIgaW50byByZW5kZXJpbmcgdGhlIHN0eWxlcyBkZWZpbmVkIGluIHRoZSBzZXR1cCAoLm5nLWVudGVyLCAubmctbGVhdmVcclxuICogb3IgLm5nLW1vdmUpIGNsYXNzLiBUaGlzIG1lYW5zIHRoYXQgYW55IGFjdGl2ZSB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgb3BlcmF0aW5nIG9uIHRoZSBlbGVtZW50XHJcbiAqIHdpbGwgYmUgY3V0IG9mZiB0byBtYWtlIHdheSBmb3IgdGhlIGVudGVyLCBsZWF2ZSBvciBtb3ZlIGFuaW1hdGlvbi5cclxuICpcclxuICogIyMjIENsYXNzLWJhc2VkIHRyYW5zaXRpb24gYW5pbWF0aW9uc1xyXG4gKlxyXG4gKiBDbGFzcy1iYXNlZCB0cmFuc2l0aW9ucyByZWZlciB0byB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdoZW4gYSBDU1MgY2xhc3MgaXNcclxuICogYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICh2aWEgYCRhbmltYXRlLmFkZENsYXNzYCwgYCRhbmltYXRlLnJlbW92ZUNsYXNzYCxcclxuICogYCRhbmltYXRlLnNldENsYXNzYCwgb3IgYnkgZGlyZWN0aXZlcyBzdWNoIGFzIGBuZ0NsYXNzYCwgYG5nTW9kZWxgIGFuZCBgZm9ybWApLlxyXG4gKiBUaGV5IGFyZSBkaWZmZXJlbnQgd2hlbiBjb21wYXJlZCB0byBzdHJ1Y3R1cmFsIGFuaW1hdGlvbnMgc2luY2UgdGhleSAqKmRvIG5vdCBjYW5jZWwgZXhpc3RpbmdcclxuICogYW5pbWF0aW9ucyoqIG5vciBkbyB0aGV5ICoqYmxvY2sgc3VjY2Vzc2l2ZSB0cmFuc2l0aW9ucyoqIGZyb20gcmVuZGVyaW5nIG9uIHRoZSBzYW1lIGVsZW1lbnQuXHJcbiAqIFRoaXMgZGlzdGluY3Rpb24gYWxsb3dzIGZvciAqKm11bHRpcGxlIGNsYXNzLWJhc2VkIHRyYW5zaXRpb25zKiogdG8gYmUgcGVyZm9ybWVkIG9uIHRoZSBzYW1lIGVsZW1lbnQuXHJcbiAqXHJcbiAqIEluIGFkZGl0aW9uIHRvIG5nQW5pbWF0ZSBzdXBwb3J0aW5nIHRoZSBkZWZhdWx0IChuYXR1cmFsKSBmdW5jdGlvbmFsaXR5IG9mIGNsYXNzLWJhc2VkIHRyYW5zaXRpb25cclxuICogYW5pbWF0aW9ucywgbmdBbmltYXRlIGFsc28gZGVjb3JhdGVzIHRoZSBlbGVtZW50IHdpdGggc3RhcnRpbmcgYW5kIGVuZGluZyBDU1MgY2xhc3NlcyB0byBhaWQgdGhlXHJcbiAqIGRldmVsb3BlciBpbiBmdXJ0aGVyIHN0eWxpbmcgdGhlIGVsZW1lbnQgdGhyb3VnaG91dCB0aGUgdHJhbnNpdGlvbiBhbmltYXRpb24uIEVhcmxpZXIgdmVyc2lvbnNcclxuICogb2YgbmdBbmltYXRlIG1heSBoYXZlIGNhdXNlZCBuYXR1cmFsIENTUyB0cmFuc2l0aW9ucyB0byBicmVhayBhbmQgbm90IHJlbmRlciBwcm9wZXJseSBkdWUgdG9cclxuICogJGFuaW1hdGUgdGVtcG9yYXJpbHkgYmxvY2tpbmcgdHJhbnNpdGlvbnMgdXNpbmcgYDBzIG5vbmVgIGluIG9yZGVyIHRvIGFsbG93IHRoZSBzZXR1cCBDU1MgY2xhc3NcclxuICogKHRoZSBgLWFkZGAgb3IgYC1yZW1vdmVgIGNsYXNzKSB0byBiZSBhcHBsaWVkIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBhbmltYXRpb24uIEhvd2V2ZXIsIGFzIG9mXHJcbiAqICoqdmVyc2lvbiAxLjMqKiwgdGhpcyB3b3JrYXJvdW5kIGhhcyBiZWVuIHJlbW92ZWQgd2l0aCBuZ0FuaW1hdGUgYW5kIGFsbCBub24tbmdBbmltYXRlIENTU1xyXG4gKiBjbGFzcyB0cmFuc2l0aW9ucyBhcmUgY29tcGF0aWJsZSB3aXRoIG5nQW5pbWF0ZS5cclxuICpcclxuICogVGhlcmUgaXMsIGhvd2V2ZXIsIG9uZSBzcGVjaWFsIGNhc2Ugd2hlbiBkZWFsaW5nIHdpdGggY2xhc3MtYmFzZWQgdHJhbnNpdGlvbnMgaW4gbmdBbmltYXRlLlxyXG4gKiBXaGVuIHJlbmRlcmluZyBjbGFzcy1iYXNlZCB0cmFuc2l0aW9ucyB0aGF0IG1ha2UgdXNlIG9mIHRoZSBzZXR1cCBhbmQgYWN0aXZlIENTUyBjbGFzc2VzXHJcbiAqIChlLmcuIGAuZmFkZS1hZGRgIGFuZCBgLmZhZGUtYWRkLWFjdGl2ZWAgZm9yIHdoZW4gYC5mYWRlYCBpcyBhZGRlZCkgYmUgc3VyZSB0byBkZWZpbmVcclxuICogdGhlIHRyYW5zaXRpb24gdmFsdWUgKipvbiB0aGUgYWN0aXZlIENTUyBjbGFzcyoqIGFuZCBub3QgdGhlIHNldHVwIGNsYXNzLlxyXG4gKlxyXG4gKiBgYGBjc3NcclxuICogLmZhZGUtYWRkIHtcclxuICogICAvJiM0MjsgcmVtZW1iZXIgdG8gcGxhY2UgYSAwcyB0cmFuc2l0aW9uIGhlcmVcclxuICogICAgICB0byBlbnN1cmUgdGhhdCB0aGUgc3R5bGVzIGFyZSBhcHBsaWVkIGluc3RhbnRseVxyXG4gKiAgICAgIGV2ZW4gaWYgdGhlIGVsZW1lbnQgYWxyZWFkeSBoYXMgYSB0cmFuc2l0aW9uIHN0eWxlICYjNDI7L1xyXG4gKiAgIHRyYW5zaXRpb246MHMgbGluZWFyIGFsbDtcclxuICpcclxuICogICAvJiM0Mjsgc3RhcnRpbmcgQ1NTIHN0eWxlcyAmIzQyOy9cclxuICogICBvcGFjaXR5OjE7XHJcbiAqIH1cclxuICogLmZhZGUtYWRkLmZhZGUtYWRkLWFjdGl2ZSB7XHJcbiAqICAgLyYjNDI7IHRoaXMgd2lsbCBiZSB0aGUgbGVuZ3RoIG9mIHRoZSBhbmltYXRpb24gJiM0MjsvXHJcbiAqICAgdHJhbnNpdGlvbjoxcyBsaW5lYXIgYWxsO1xyXG4gKiAgIG9wYWNpdHk6MDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIHNldHVwIENTUyBjbGFzcyAoaW4gdGhpcyBjYXNlIGAuZmFkZS1hZGRgKSBhbHNvIGhhcyBhIHRyYW5zaXRpb24gc3R5bGUgcHJvcGVydHksIGhvd2V2ZXIsIGl0XHJcbiAqIGhhcyBhIGR1cmF0aW9uIG9mIHplcm8uIFRoaXMgbWF5IG5vdCBiZSByZXF1aXJlZCwgaG93ZXZlciwgaW5jYXNlIHRoZSBicm93c2VyIGlzIHVuYWJsZSB0byByZW5kZXJcclxuICogdGhlIHN0eWxpbmcgcHJlc2VudCBpbiB0aGlzIENTUyBjbGFzcyBpbnN0YW50bHkgdGhlbiBpdCBjb3VsZCBiZSB0aGF0IHRoZSBicm93c2VyIGlzIGF0dGVtcHRpbmdcclxuICogdG8gcGVyZm9ybSBhbiB1bm5lY2Vzc2FyeSB0cmFuc2l0aW9uLlxyXG4gKlxyXG4gKiBUaGlzIHdvcmthcm91bmQsIGhvd2V2ZXIsIGRvZXMgbm90IGFwcGx5IHRvICBzdGFuZGFyZCBjbGFzcy1iYXNlZCB0cmFuc2l0aW9ucyB0aGF0IGFyZSByZW5kZXJlZFxyXG4gKiB3aGVuIGEgQ1NTIGNsYXNzIGNvbnRhaW5pbmcgYSB0cmFuc2l0aW9uIGlzIGFwcGxpZWQgdG8gYW4gZWxlbWVudDpcclxuICpcclxuICogYGBgY3NzXHJcbiAqIC5mYWRlIHtcclxuICogICAvJiM0MjsgdGhpcyB3b3JrcyBhcyBleHBlY3RlZCAmIzQyOy9cclxuICogICB0cmFuc2l0aW9uOjFzIGxpbmVhciBhbGw7XHJcbiAqICAgb3BhY2l0eTowO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBQbGVhc2Uga2VlcCB0aGlzIGluIG1pbmQgd2hlbiBjb2RpbmcgdGhlIENTUyBtYXJrdXAgdGhhdCB3aWxsIGJlIHVzZWQgd2l0aGluIGNsYXNzLWJhc2VkIHRyYW5zaXRpb25zLlxyXG4gKiBBbHNvLCB0cnkgbm90IHRvIG1peCB0aGUgdHdvIGNsYXNzLWJhc2VkIGFuaW1hdGlvbiBmbGF2b3JzIHRvZ2V0aGVyIHNpbmNlIHRoZSBDU1MgY29kZSBtYXkgYmVjb21lXHJcbiAqIG92ZXJseSBjb21wbGV4LlxyXG4gKlxyXG4gKiAjIyMgQ1NTIFN0YWdnZXJpbmcgQW5pbWF0aW9uc1xyXG4gKiBBIFN0YWdnZXJpbmcgYW5pbWF0aW9uIGlzIGEgY29sbGVjdGlvbiBvZiBhbmltYXRpb25zIHRoYXQgYXJlIGlzc3VlZCB3aXRoIGEgc2xpZ2h0IGRlbGF5IGluIGJldHdlZW4gZWFjaCBzdWNjZXNzaXZlIG9wZXJhdGlvbiByZXN1bHRpbmcgaW4gYVxyXG4gKiBjdXJ0YWluLWxpa2UgZWZmZWN0LiBUaGUgbmdBbmltYXRlIG1vZHVsZSwgYXMgb2YgMS4yLjAsIHN1cHBvcnRzIHN0YWdnZXJpbmcgYW5pbWF0aW9ucyBhbmQgdGhlIHN0YWdnZXIgZWZmZWN0IGNhbiBiZVxyXG4gKiBwZXJmb3JtZWQgYnkgY3JlYXRpbmcgYSAqKm5nLUVWRU5ULXN0YWdnZXIqKiBDU1MgY2xhc3MgYW5kIGF0dGFjaGluZyB0aGF0IGNsYXNzIHRvIHRoZSBiYXNlIENTUyBjbGFzcyB1c2VkIGZvclxyXG4gKiB0aGUgYW5pbWF0aW9uLiBUaGUgc3R5bGUgcHJvcGVydHkgZXhwZWN0ZWQgd2l0aGluIHRoZSBzdGFnZ2VyIGNsYXNzIGNhbiBlaXRoZXIgYmUgYSAqKnRyYW5zaXRpb24tZGVsYXkqKiBvciBhblxyXG4gKiAqKmFuaW1hdGlvbi1kZWxheSoqIHByb3BlcnR5IChvciBib3RoIGlmIHlvdXIgYW5pbWF0aW9uIGNvbnRhaW5zIGJvdGggdHJhbnNpdGlvbnMgYW5kIGtleWZyYW1lIGFuaW1hdGlvbnMpLlxyXG4gKlxyXG4gKiBgYGBjc3NcclxuICogLm15LWFuaW1hdGlvbi5uZy1lbnRlciB7XHJcbiAqICAgLyYjNDI7IHN0YW5kYXJkIHRyYW5zaXRpb24gY29kZSAmIzQyOy9cclxuICogICAtd2Via2l0LXRyYW5zaXRpb246IDFzIGxpbmVhciBhbGw7XHJcbiAqICAgdHJhbnNpdGlvbjogMXMgbGluZWFyIGFsbDtcclxuICogICBvcGFjaXR5OjA7XHJcbiAqIH1cclxuICogLm15LWFuaW1hdGlvbi5uZy1lbnRlci1zdGFnZ2VyIHtcclxuICogICAvJiM0MjsgdGhpcyB3aWxsIGhhdmUgYSAxMDBtcyBkZWxheSBiZXR3ZWVuIGVhY2ggc3VjY2Vzc2l2ZSBsZWF2ZSBhbmltYXRpb24gJiM0MjsvXHJcbiAqICAgLXdlYmtpdC10cmFuc2l0aW9uLWRlbGF5OiAwLjFzO1xyXG4gKiAgIHRyYW5zaXRpb24tZGVsYXk6IDAuMXM7XHJcbiAqXHJcbiAqICAgLyYjNDI7IGluIGNhc2UgdGhlIHN0YWdnZXIgZG9lc24ndCB3b3JrIHRoZW4gdGhlc2UgdHdvIHZhbHVlc1xyXG4gKiAgICBtdXN0IGJlIHNldCB0byAwIHRvIGF2b2lkIGFuIGFjY2lkZW50YWwgQ1NTIGluaGVyaXRhbmNlICYjNDI7L1xyXG4gKiAgIC13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbjogMHM7XHJcbiAqICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMHM7XHJcbiAqIH1cclxuICogLm15LWFuaW1hdGlvbi5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xyXG4gKiAgIC8mIzQyOyBzdGFuZGFyZCB0cmFuc2l0aW9uIHN0eWxlcyAmIzQyOy9cclxuICogICBvcGFjaXR5OjE7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIFN0YWdnZXJpbmcgYW5pbWF0aW9ucyB3b3JrIGJ5IGRlZmF1bHQgaW4gbmdSZXBlYXQgKHNvIGxvbmcgYXMgdGhlIENTUyBjbGFzcyBpcyBkZWZpbmVkKS4gT3V0c2lkZSBvZiBuZ1JlcGVhdCwgdG8gdXNlIHN0YWdnZXJpbmcgYW5pbWF0aW9uc1xyXG4gKiBvbiB5b3VyIG93biwgdGhleSBjYW4gYmUgdHJpZ2dlcmVkIGJ5IGZpcmluZyBtdWx0aXBsZSBjYWxscyB0byB0aGUgc2FtZSBldmVudCBvbiAkYW5pbWF0ZS4gSG93ZXZlciwgdGhlIHJlc3RyaWN0aW9ucyBzdXJyb3VuZGluZyB0aGlzXHJcbiAqIGFyZSB0aGF0IGVhY2ggb2YgdGhlIGVsZW1lbnRzIG11c3QgaGF2ZSB0aGUgc2FtZSBDU1MgY2xhc3NOYW1lIHZhbHVlIGFzIHdlbGwgYXMgdGhlIHNhbWUgcGFyZW50IGVsZW1lbnQuIEEgc3RhZ2dlciBvcGVyYXRpb25cclxuICogd2lsbCBhbHNvIGJlIHJlc2V0IGlmIG1vcmUgdGhhbiAxMG1zIGhhcyBwYXNzZWQgYWZ0ZXIgdGhlIGxhc3QgYW5pbWF0aW9uIGhhcyBiZWVuIGZpcmVkLlxyXG4gKlxyXG4gKiBUaGUgZm9sbG93aW5nIGNvZGUgd2lsbCBpc3N1ZSB0aGUgKipuZy1sZWF2ZS1zdGFnZ2VyKiogZXZlbnQgb24gdGhlIGVsZW1lbnQgcHJvdmlkZWQ6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIHZhciBraWRzID0gcGFyZW50LmNoaWxkcmVuKCk7XHJcbiAqXHJcbiAqICRhbmltYXRlLmxlYXZlKGtpZHNbMF0pOyAvL3N0YWdnZXIgaW5kZXg9MFxyXG4gKiAkYW5pbWF0ZS5sZWF2ZShraWRzWzFdKTsgLy9zdGFnZ2VyIGluZGV4PTFcclxuICogJGFuaW1hdGUubGVhdmUoa2lkc1syXSk7IC8vc3RhZ2dlciBpbmRleD0yXHJcbiAqICRhbmltYXRlLmxlYXZlKGtpZHNbM10pOyAvL3N0YWdnZXIgaW5kZXg9M1xyXG4gKiAkYW5pbWF0ZS5sZWF2ZShraWRzWzRdKTsgLy9zdGFnZ2VyIGluZGV4PTRcclxuICpcclxuICogJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAqICAgLy9zdGFnZ2VyIGhhcyByZXNldCBpdHNlbGZcclxuICogICAkYW5pbWF0ZS5sZWF2ZShraWRzWzVdKTsgLy9zdGFnZ2VyIGluZGV4PTBcclxuICogICAkYW5pbWF0ZS5sZWF2ZShraWRzWzZdKTsgLy9zdGFnZ2VyIGluZGV4PTFcclxuICogfSwgMTAwLCBmYWxzZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBTdGFnZ2VyIGFuaW1hdGlvbnMgYXJlIGN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCB3aXRoaW4gQ1NTLWRlZmluZWQgYW5pbWF0aW9ucy5cclxuICpcclxuICogIyMgSmF2YVNjcmlwdC1kZWZpbmVkIEFuaW1hdGlvbnNcclxuICogSW4gdGhlIGV2ZW50IHRoYXQgeW91IGRvIG5vdCB3YW50IHRvIHVzZSBDU1MzIHRyYW5zaXRpb25zIG9yIENTUzMgYW5pbWF0aW9ucyBvciBpZiB5b3Ugd2lzaCB0byBvZmZlciBhbmltYXRpb25zIG9uIGJyb3dzZXJzIHRoYXQgZG8gbm90XHJcbiAqIHlldCBzdXBwb3J0IENTUyB0cmFuc2l0aW9ucy9hbmltYXRpb25zLCB0aGVuIHlvdSBjYW4gbWFrZSB1c2Ugb2YgSmF2YVNjcmlwdCBhbmltYXRpb25zIGRlZmluZWQgaW5zaWRlIG9mIHlvdXIgQW5ndWxhckpTIG1vZHVsZS5cclxuICpcclxuICogYGBganNcclxuICogLy8hYW5ub3RhdGU9XCJZb3VyQXBwXCIgWW91ciBBbmd1bGFySlMgTW9kdWxlfFJlcGxhY2UgdGhpcyBvciBuZ01vZHVsZSB3aXRoIHRoZSBtb2R1bGUgdGhhdCB5b3UgdXNlZCB0byBkZWZpbmUgeW91ciBhcHBsaWNhdGlvbi5cclxuICogdmFyIG5nTW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ1lvdXJBcHAnLCBbJ25nQW5pbWF0ZSddKTtcclxuICogbmdNb2R1bGUuYW5pbWF0aW9uKCcubXktY3JhenktYW5pbWF0aW9uJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgcmV0dXJuIHtcclxuICogICAgIGVudGVyOiBmdW5jdGlvbihlbGVtZW50LCBkb25lKSB7XHJcbiAqICAgICAgIC8vcnVuIHRoZSBhbmltYXRpb24gaGVyZSBhbmQgY2FsbCBkb25lIHdoZW4gdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZVxyXG4gKiAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FuY2VsbGVkKSB7XHJcbiAqICAgICAgICAgLy90aGlzIChvcHRpb25hbCkgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgYW5pbWF0aW9uXHJcbiAqICAgICAgICAgLy9jb21wbGV0ZXMgb3Igd2hlbiB0aGUgYW5pbWF0aW9uIGlzIGNhbmNlbGxlZCAodGhlIGNhbmNlbGxlZFxyXG4gKiAgICAgICAgIC8vZmxhZyB3aWxsIGJlIHNldCB0byB0cnVlIGlmIGNhbmNlbGxlZCkuXHJcbiAqICAgICAgIH07XHJcbiAqICAgICB9LFxyXG4gKiAgICAgbGVhdmU6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHsgfSxcclxuICogICAgIG1vdmU6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHsgfSxcclxuICpcclxuICogICAgIC8vYW5pbWF0aW9uIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIGNsYXNzIGlzIGFkZGVkXHJcbiAqICAgICBiZWZvcmVBZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBkb25lKSB7IH0sXHJcbiAqXHJcbiAqICAgICAvL2FuaW1hdGlvbiB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYWZ0ZXIgdGhlIGNsYXNzIGlzIGFkZGVkXHJcbiAqICAgICBhZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBkb25lKSB7IH0sXHJcbiAqXHJcbiAqICAgICAvL2FuaW1hdGlvbiB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYmVmb3JlIHRoZSBjbGFzcyBpcyByZW1vdmVkXHJcbiAqICAgICBiZWZvcmVSZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBkb25lKSB7IH0sXHJcbiAqXHJcbiAqICAgICAvL2FuaW1hdGlvbiB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYWZ0ZXIgdGhlIGNsYXNzIGlzIHJlbW92ZWRcclxuICogICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGRvbmUpIHsgfVxyXG4gKiAgIH07XHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgYXJlIGNyZWF0ZWQgd2l0aCBhIENTUy1saWtlIGNsYXNzIHNlbGVjdG9yIGFuZCBhIGNvbGxlY3Rpb24gb2YgZXZlbnRzIHdoaWNoIGFyZSBzZXQgdG8gcnVuXHJcbiAqIGEgamF2YXNjcmlwdCBjYWxsYmFjayBmdW5jdGlvbi4gV2hlbiBhbiBhbmltYXRpb24gaXMgdHJpZ2dlcmVkLCAkYW5pbWF0ZSB3aWxsIGxvb2sgZm9yIGEgbWF0Y2hpbmcgYW5pbWF0aW9uIHdoaWNoIGZpdHNcclxuICogdGhlIGVsZW1lbnQncyBDU1MgY2xhc3MgYXR0cmlidXRlIHZhbHVlIGFuZCB0aGVuIHJ1biB0aGUgbWF0Y2hpbmcgYW5pbWF0aW9uIGV2ZW50IGZ1bmN0aW9uIChpZiBmb3VuZCkuXHJcbiAqIEluIG90aGVyIHdvcmRzLCBpZiB0aGUgQ1NTIGNsYXNzZXMgcHJlc2VudCBvbiB0aGUgYW5pbWF0ZWQgZWxlbWVudCBtYXRjaCBhbnkgb2YgdGhlIEphdmFTY3JpcHQgYW5pbWF0aW9ucyB0aGVuIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsXHJcbiAqIGJlIGV4ZWN1dGVkLiBJdCBzaG91bGQgYmUgYWxzbyBub3RlZCB0aGF0IG9ubHkgc2ltcGxlLCBzaW5nbGUgY2xhc3Mgc2VsZWN0b3JzIGFyZSBhbGxvd2VkIChjb21wb3VuZCBjbGFzcyBzZWxlY3RvcnMgYXJlIG5vdCBzdXBwb3J0ZWQpLlxyXG4gKlxyXG4gKiBXaXRoaW4gYSBKYXZhU2NyaXB0IGFuaW1hdGlvbiwgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdmFyaW91cyBldmVudCBjYWxsYmFjayBhbmltYXRpb24gZnVuY3Rpb25zIGlzIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkLlxyXG4gKiBBcyBleHBsYWluZWQgYWJvdmUsIHRoZXNlIGNhbGxiYWNrcyBhcmUgdHJpZ2dlcmVkIGJhc2VkIG9uIHRoZSBhbmltYXRpb24gZXZlbnQuIFRoZXJlZm9yZSBpZiBhbiBlbnRlciBhbmltYXRpb24gaXMgcnVuLFxyXG4gKiBhbmQgdGhlIEphdmFTY3JpcHQgYW5pbWF0aW9uIGlzIGZvdW5kLCB0aGVuIHRoZSBlbnRlciBjYWxsYmFjayB3aWxsIGhhbmRsZSB0aGF0IGFuaW1hdGlvbiAoaW4gYWRkaXRpb24gdG8gdGhlIENTUyBrZXlmcmFtZSBhbmltYXRpb25cclxuICogb3IgdHJhbnNpdGlvbiBjb2RlIHRoYXQgaXMgZGVmaW5lZCB2aWEgYSBzdHlsZXNoZWV0KS5cclxuICpcclxuICovXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbmdBbmltYXRlJywgWyduZyddKVxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgcHJvdmlkZXJcclxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBUaGUgYCRhbmltYXRlUHJvdmlkZXJgIGFsbG93cyBkZXZlbG9wZXJzIHRvIHJlZ2lzdGVyIEphdmFTY3JpcHQgYW5pbWF0aW9uIGV2ZW50IGhhbmRsZXJzIGRpcmVjdGx5IGluc2lkZSBvZiBhIG1vZHVsZS5cclxuICAgKiBXaGVuIGFuIGFuaW1hdGlvbiBpcyB0cmlnZ2VyZWQsIHRoZSAkYW5pbWF0ZSBzZXJ2aWNlIHdpbGwgcXVlcnkgdGhlICRhbmltYXRlIHNlcnZpY2UgdG8gZmluZCBhbnkgYW5pbWF0aW9ucyB0aGF0IG1hdGNoXHJcbiAgICogdGhlIHByb3ZpZGVkIG5hbWUgdmFsdWUuXHJcbiAgICpcclxuICAgKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nQW5pbWF0ZSBgbmdBbmltYXRlYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cclxuICAgKlxyXG4gICAqIFBsZWFzZSB2aXNpdCB0aGUge0BsaW5rIG5nQW5pbWF0ZSBgbmdBbmltYXRlYH0gbW9kdWxlIG92ZXJ2aWV3IHBhZ2UgbGVhcm4gbW9yZSBhYm91dCBob3cgdG8gdXNlIGFuaW1hdGlvbnMgaW4geW91ciBhcHBsaWNhdGlvbi5cclxuICAgKlxyXG4gICAqL1xyXG4gIC5kaXJlY3RpdmUoJ25nQW5pbWF0ZUNoaWxkcmVuJywgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgTkdfQU5JTUFURV9DSElMRFJFTiA9ICckJG5nQW5pbWF0ZUNoaWxkcmVuJztcclxuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgdmFyIHZhbCA9IGF0dHJzLm5nQW5pbWF0ZUNoaWxkcmVuO1xyXG4gICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyh2YWwpICYmIHZhbC5sZW5ndGggPT09IDApIHsgLy9lbXB0eSBhdHRyaWJ1dGVcclxuICAgICAgICBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9DSElMRFJFTiwgdHJ1ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKHZhbCwgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NISUxEUkVOLCAhIXZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9KVxyXG5cclxuICAvL3RoaXMgcHJpdmF0ZSBzZXJ2aWNlIGlzIG9ubHkgdXNlZCB3aXRoaW4gQ1NTLWVuYWJsZWQgYW5pbWF0aW9uc1xyXG4gIC8vSUU4ICsgSUU5IGRvIG5vdCBzdXBwb3J0IHJBRiBuYXRpdmVseSwgYnV0IHRoYXQgaXMgZmluZSBzaW5jZSB0aGV5XHJcbiAgLy9hbHNvIGRvbid0IHN1cHBvcnQgdHJhbnNpdGlvbnMgYW5kIGtleWZyYW1lcyB3aGljaCBtZWFucyB0aGF0IHRoZSBjb2RlXHJcbiAgLy9iZWxvdyB3aWxsIG5ldmVyIGJlIHVzZWQgYnkgdGhlIHR3byBicm93c2Vycy5cclxuICAuZmFjdG9yeSgnJCRhbmltYXRlUmVmbG93JywgWyckJHJBRicsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkJHJBRiwgJGRvY3VtZW50KSB7XHJcbiAgICB2YXIgYm9kID0gJGRvY3VtZW50WzBdLmJvZHk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZm4pIHtcclxuICAgICAgLy90aGUgcmV0dXJuZWQgZnVuY3Rpb24gYWN0cyBhcyB0aGUgY2FuY2VsbGF0aW9uIGZ1bmN0aW9uXHJcbiAgICAgIHJldHVybiAkJHJBRihmdW5jdGlvbigpIHtcclxuICAgICAgICAvL3RoZSBsaW5lIGJlbG93IHdpbGwgZm9yY2UgdGhlIGJyb3dzZXIgdG8gcGVyZm9ybSBhIHJlcGFpbnRcclxuICAgICAgICAvL3NvIHRoYXQgYWxsIHRoZSBhbmltYXRlZCBlbGVtZW50cyB3aXRoaW4gdGhlIGFuaW1hdGlvbiBmcmFtZVxyXG4gICAgICAgIC8vd2lsbCBiZSBwcm9wZXJseSB1cGRhdGVkIGFuZCBkcmF3biBvbiBzY3JlZW4uIFRoaXMgaXNcclxuICAgICAgICAvL3JlcXVpcmVkIHRvIHBlcmZvcm0gbXVsdGktY2xhc3MgQ1NTIGJhc2VkIGFuaW1hdGlvbnMgd2l0aFxyXG4gICAgICAgIC8vRmlyZWZveC4gRE8gTk9UIFJFTU9WRSBUSElTIExJTkUuXHJcbiAgICAgICAgdmFyIGEgPSBib2Qub2Zmc2V0V2lkdGggKyAxO1xyXG4gICAgICAgIGZuKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9XSlcclxuXHJcbiAgLmNvbmZpZyhbJyRwcm92aWRlJywgJyRhbmltYXRlUHJvdmlkZXInLCBmdW5jdGlvbigkcHJvdmlkZSwgJGFuaW1hdGVQcm92aWRlcikge1xyXG4gICAgdmFyIG5vb3AgPSBhbmd1bGFyLm5vb3A7XHJcbiAgICB2YXIgZm9yRWFjaCA9IGFuZ3VsYXIuZm9yRWFjaDtcclxuICAgIHZhciBzZWxlY3RvcnMgPSAkYW5pbWF0ZVByb3ZpZGVyLiQkc2VsZWN0b3JzO1xyXG4gICAgdmFyIGlzQXJyYXkgPSBhbmd1bGFyLmlzQXJyYXk7XHJcblxyXG4gICAgdmFyIEVMRU1FTlRfTk9ERSA9IDE7XHJcbiAgICB2YXIgTkdfQU5JTUFURV9TVEFURSA9ICckJG5nQW5pbWF0ZVN0YXRlJztcclxuICAgIHZhciBOR19BTklNQVRFX0NISUxEUkVOID0gJyQkbmdBbmltYXRlQ2hpbGRyZW4nO1xyXG4gICAgdmFyIE5HX0FOSU1BVEVfQ0xBU1NfTkFNRSA9ICduZy1hbmltYXRlJztcclxuICAgIHZhciByb290QW5pbWF0ZVN0YXRlID0ge3J1bm5pbmc6IHRydWV9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KSB7XHJcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBlbGVtZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGVsbSA9IGVsZW1lbnRbaV07XHJcbiAgICAgICAgaWYgKGVsbS5ub2RlVHlwZSA9PSBFTEVNRU5UX05PREUpIHtcclxuICAgICAgICAgIHJldHVybiBlbG07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHJlcGFyZUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICByZXR1cm4gZWxlbWVudCAmJiBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3RyaXBDb21tZW50c0Zyb21FbGVtZW50KGVsZW1lbnQpIHtcclxuICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudChleHRyYWN0RWxlbWVudE5vZGUoZWxlbWVudCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzTWF0Y2hpbmdFbGVtZW50KGVsbTEsIGVsbTIpIHtcclxuICAgICAgcmV0dXJuIGV4dHJhY3RFbGVtZW50Tm9kZShlbG0xKSA9PSBleHRyYWN0RWxlbWVudE5vZGUoZWxtMik7XHJcbiAgICB9XHJcblxyXG4gICAgJHByb3ZpZGUuZGVjb3JhdG9yKCckYW5pbWF0ZScsXHJcbiAgICAgICAgWyckZGVsZWdhdGUnLCAnJCRxJywgJyRpbmplY3RvcicsICckc25pZmZlcicsICckcm9vdEVsZW1lbnQnLCAnJCRhc3luY0NhbGxiYWNrJywgJyRyb290U2NvcGUnLCAnJGRvY3VtZW50JywgJyR0ZW1wbGF0ZVJlcXVlc3QnLFxyXG4gZnVuY3Rpb24oJGRlbGVnYXRlLCAgICQkcSwgICAkaW5qZWN0b3IsICAgJHNuaWZmZXIsICAgJHJvb3RFbGVtZW50LCAgICQkYXN5bmNDYWxsYmFjaywgICAkcm9vdFNjb3BlLCAgICRkb2N1bWVudCwgICAkdGVtcGxhdGVSZXF1ZXN0KSB7XHJcblxyXG4gICAgICAkcm9vdEVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFLCByb290QW5pbWF0ZVN0YXRlKTtcclxuXHJcbiAgICAgIC8vIFdhaXQgdW50aWwgYWxsIGRpcmVjdGl2ZSBhbmQgcm91dGUtcmVsYXRlZCB0ZW1wbGF0ZXMgYXJlIGRvd25sb2FkZWQgYW5kXHJcbiAgICAgIC8vIGNvbXBpbGVkLiBUaGUgJHRlbXBsYXRlUmVxdWVzdC50b3RhbFBlbmRpbmdSZXF1ZXN0cyB2YXJpYWJsZSBrZWVwcyB0cmFjayBvZlxyXG4gICAgICAvLyBhbGwgb2YgdGhlIHJlbW90ZSB0ZW1wbGF0ZXMgYmVpbmcgY3VycmVudGx5IGRvd25sb2FkZWQuIElmIHRoZXJlIGFyZSBub1xyXG4gICAgICAvLyB0ZW1wbGF0ZXMgY3VycmVudGx5IGRvd25sb2FkaW5nIHRoZW4gdGhlIHdhdGNoZXIgd2lsbCBzdGlsbCBmaXJlIGFueXdheS5cclxuICAgICAgdmFyIGRlcmVnaXN0ZXJXYXRjaCA9ICRyb290U2NvcGUuJHdhdGNoKFxyXG4gICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gJHRlbXBsYXRlUmVxdWVzdC50b3RhbFBlbmRpbmdSZXF1ZXN0czsgfSxcclxuICAgICAgICBmdW5jdGlvbih2YWwsIG9sZFZhbCkge1xyXG4gICAgICAgICAgaWYgKHZhbCAhPT0gMCkgcmV0dXJuO1xyXG4gICAgICAgICAgZGVyZWdpc3RlcldhdGNoKCk7XHJcblxyXG4gICAgICAgICAgLy8gTm93IHRoYXQgYWxsIHRlbXBsYXRlcyBoYXZlIGJlZW4gZG93bmxvYWRlZCwgJGFuaW1hdGUgd2lsbCB3YWl0IHVudGlsXHJcbiAgICAgICAgICAvLyB0aGUgcG9zdCBkaWdlc3QgcXVldWUgaXMgZW1wdHkgYmVmb3JlIGVuYWJsaW5nIGFuaW1hdGlvbnMuIEJ5IGhhdmluZyB0d29cclxuICAgICAgICAgIC8vIGNhbGxzIHRvICRwb3N0RGlnZXN0IGNhbGxzIHdlIGNhbiBlbnN1cmUgdGhhdCB0aGUgZmxhZyBpcyBlbmFibGVkIGF0IHRoZVxyXG4gICAgICAgICAgLy8gdmVyeSBlbmQgb2YgdGhlIHBvc3QgZGlnZXN0IHF1ZXVlLiBTaW5jZSBhbGwgb2YgdGhlIGFuaW1hdGlvbnMgaW4gJGFuaW1hdGVcclxuICAgICAgICAgIC8vIHVzZSAkcG9zdERpZ2VzdCwgaXQncyBpbXBvcnRhbnQgdGhhdCB0aGUgY29kZSBiZWxvdyBleGVjdXRlcyBhdCB0aGUgZW5kLlxyXG4gICAgICAgICAgLy8gVGhpcyBiYXNpY2FsbHkgbWVhbnMgdGhhdCB0aGUgcGFnZSBpcyBmdWxseSBkb3dubG9hZGVkIGFuZCBjb21waWxlZCBiZWZvcmVcclxuICAgICAgICAgIC8vIGFueSBhbmltYXRpb25zIGFyZSB0cmlnZ2VyZWQuXHJcbiAgICAgICAgICAkcm9vdFNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgcm9vdEFuaW1hdGVTdGF0ZS5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG5cclxuICAgICAgdmFyIGdsb2JhbEFuaW1hdGlvbkNvdW50ZXIgPSAwO1xyXG4gICAgICB2YXIgY2xhc3NOYW1lRmlsdGVyID0gJGFuaW1hdGVQcm92aWRlci5jbGFzc05hbWVGaWx0ZXIoKTtcclxuICAgICAgdmFyIGlzQW5pbWF0YWJsZUNsYXNzTmFtZSA9ICFjbGFzc05hbWVGaWx0ZXJcclxuICAgICAgICAgICAgICA/IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgICAgICAgICAgIDogZnVuY3Rpb24oY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3NOYW1lRmlsdGVyLnRlc3QoY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gY2xhc3NCYXNlZEFuaW1hdGlvbnNCbG9ja2VkKGVsZW1lbnQsIHNldHRlcikge1xyXG4gICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpIHx8IHt9O1xyXG4gICAgICAgIGlmIChzZXR0ZXIpIHtcclxuICAgICAgICAgIGRhdGEucnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgICBkYXRhLnN0cnVjdHVyYWwgPSB0cnVlO1xyXG4gICAgICAgICAgZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YS5kaXNhYmxlZCB8fCAoZGF0YS5ydW5uaW5nICYmIGRhdGEuc3RydWN0dXJhbCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJ1bkFuaW1hdGlvblBvc3REaWdlc3QoZm4pIHtcclxuICAgICAgICB2YXIgY2FuY2VsRm4sIGRlZmVyID0gJCRxLmRlZmVyKCk7XHJcbiAgICAgICAgZGVmZXIucHJvbWlzZS4kJGNhbmNlbEZuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjYW5jZWxGbiAmJiBjYW5jZWxGbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHJvb3RTY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjYW5jZWxGbiA9IGZuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBkZWZlci5yZXNvbHZlKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gcmVzb2x2ZUVsZW1lbnRDbGFzc2VzKGVsZW1lbnQsIGNhY2hlLCBydW5uaW5nQW5pbWF0aW9ucykge1xyXG4gICAgICAgIHJ1bm5pbmdBbmltYXRpb25zID0gcnVubmluZ0FuaW1hdGlvbnMgfHwge307XHJcbiAgICAgICAgdmFyIG1hcCA9IHt9O1xyXG5cclxuICAgICAgICBmb3JFYWNoKGNhY2hlLmFkZCwgZnVuY3Rpb24oY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICBpZiAoY2xhc3NOYW1lICYmIGNsYXNzTmFtZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbWFwW2NsYXNzTmFtZV0gPSBtYXBbY2xhc3NOYW1lXSB8fCAwO1xyXG4gICAgICAgICAgICBtYXBbY2xhc3NOYW1lXSsrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmb3JFYWNoKGNhY2hlLnJlbW92ZSwgZnVuY3Rpb24oY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICBpZiAoY2xhc3NOYW1lICYmIGNsYXNzTmFtZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbWFwW2NsYXNzTmFtZV0gPSBtYXBbY2xhc3NOYW1lXSB8fCAwO1xyXG4gICAgICAgICAgICBtYXBbY2xhc3NOYW1lXS0tO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgbG9va3VwID0gW107XHJcbiAgICAgICAgZm9yRWFjaChydW5uaW5nQW5pbWF0aW9ucywgZnVuY3Rpb24oZGF0YSwgc2VsZWN0b3IpIHtcclxuICAgICAgICAgIGZvckVhY2goc2VsZWN0b3Iuc3BsaXQoJyAnKSwgZnVuY3Rpb24ocykge1xyXG4gICAgICAgICAgICBsb29rdXBbc109ZGF0YTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgdG9BZGQgPSBbXSwgdG9SZW1vdmUgPSBbXTtcclxuICAgICAgICBmb3JFYWNoKG1hcCwgZnVuY3Rpb24oc3RhdHVzLCBjbGFzc05hbWUpIHtcclxuICAgICAgICAgIHZhciBoYXNDbGFzcyA9IGFuZ3VsYXIuJCRoYXNDbGFzcyhlbGVtZW50WzBdLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgdmFyIG1hdGNoaW5nQW5pbWF0aW9uID0gbG9va3VwW2NsYXNzTmFtZV0gfHwge307XHJcblxyXG4gICAgICAgICAgLy8gV2hlbiBhZGRDbGFzcyBhbmQgcmVtb3ZlQ2xhc3MgaXMgY2FsbGVkIHRoZW4gJGFuaW1hdGUgd2lsbCBjaGVjayB0b1xyXG4gICAgICAgICAgLy8gc2VlIGlmIGFkZENsYXNzIGFuZCByZW1vdmVDbGFzcyBjYW5jZWwgZWFjaCBvdGhlciBvdXQuIFdoZW4gdGhlcmUgYXJlXHJcbiAgICAgICAgICAvLyBtb3JlIGNhbGxzIHRvIHJlbW92ZUNsYXNzIHRoYW4gYWRkQ2xhc3MgdGhlbiB0aGUgY291bnQgZmFsbHMgYmVsb3cgMFxyXG4gICAgICAgICAgLy8gYW5kIHRoZW4gdGhlIHJlbW92ZUNsYXNzIGFuaW1hdGlvbiB3aWxsIGJlIGFsbG93ZWQuIE90aGVyd2lzZSBpZiB0aGVcclxuICAgICAgICAgIC8vIGNvdW50IGlzIGFib3ZlIDAgdGhlbiB0aGF0IG1lYW5zIGFuIGFkZENsYXNzIGFuaW1hdGlvbiB3aWxsIGNvbW1lbmNlLlxyXG4gICAgICAgICAgLy8gT25jZSBhbiBhbmltYXRpb24gaXMgYWxsb3dlZCB0aGVuIHRoZSBjb2RlIHdpbGwgYWxzbyBjaGVjayB0byBzZWUgaWZcclxuICAgICAgICAgIC8vIHRoZXJlIGV4aXN0cyBhbnkgb24tZ29pbmcgYW5pbWF0aW9uIHRoYXQgaXMgYWxyZWFkeSBhZGRpbmcgb3IgcmVtdm9pbmdcclxuICAgICAgICAgIC8vIHRoZSBtYXRjaGluZyBDU1MgY2xhc3MuXHJcbiAgICAgICAgICBpZiAoc3RhdHVzIDwgMCkge1xyXG4gICAgICAgICAgICAvL2RvZXMgaXQgaGF2ZSB0aGUgY2xhc3Mgb3Igd2lsbCBpdCBoYXZlIHRoZSBjbGFzc1xyXG4gICAgICAgICAgICBpZiAoaGFzQ2xhc3MgfHwgbWF0Y2hpbmdBbmltYXRpb24uZXZlbnQgPT0gJ2FkZENsYXNzJykge1xyXG4gICAgICAgICAgICAgIHRvUmVtb3ZlLnB1c2goY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vaXMgdGhlIGNsYXNzIG1pc3Npbmcgb3Igd2lsbCBpdCBiZSByZW1vdmVkP1xyXG4gICAgICAgICAgICBpZiAoIWhhc0NsYXNzIHx8IG1hdGNoaW5nQW5pbWF0aW9uLmV2ZW50ID09ICdyZW1vdmVDbGFzcycpIHtcclxuICAgICAgICAgICAgICB0b0FkZC5wdXNoKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuICh0b0FkZC5sZW5ndGggKyB0b1JlbW92ZS5sZW5ndGgpID4gMCAmJiBbdG9BZGQuam9pbignICcpLCB0b1JlbW92ZS5qb2luKCcgJyldO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBsb29rdXAobmFtZSkge1xyXG4gICAgICAgIGlmIChuYW1lKSB7XHJcbiAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdLFxyXG4gICAgICAgICAgICAgIGZsYWdNYXAgPSB7fSxcclxuICAgICAgICAgICAgICBjbGFzc2VzID0gbmFtZS5zdWJzdHIoMSkuc3BsaXQoJy4nKTtcclxuXHJcbiAgICAgICAgICAvL3RoZSBlbXB0eSBzdHJpbmcgdmFsdWUgaXMgdGhlIGRlZmF1bHQgYW5pbWF0aW9uXHJcbiAgICAgICAgICAvL29wZXJhdGlvbiB3aGljaCBwZXJmb3JtcyBDU1MgdHJhbnNpdGlvbiBhbmQga2V5ZnJhbWVcclxuICAgICAgICAgIC8vYW5pbWF0aW9ucyBzbmlmZmluZy4gVGhpcyBpcyBhbHdheXMgaW5jbHVkZWQgZm9yIGVhY2hcclxuICAgICAgICAgIC8vZWxlbWVudCBhbmltYXRpb24gcHJvY2VkdXJlIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzXHJcbiAgICAgICAgICAvL3RyYW5zaXRpb25zIGFuZC9vciBrZXlmcmFtZSBhbmltYXRpb25zLiBUaGUgZGVmYXVsdFxyXG4gICAgICAgICAgLy9hbmltYXRpb24gaXMgYWRkZWQgdG8gdGhlIHRvcCBvZiB0aGUgbGlzdCB0byBwcmV2ZW50XHJcbiAgICAgICAgICAvL2FueSBwcmV2aW91cyBhbmltYXRpb25zIGZyb20gYWZmZWN0aW5nIHRoZSBlbGVtZW50IHN0eWxpbmdcclxuICAgICAgICAgIC8vcHJpb3IgdG8gdGhlIGVsZW1lbnQgYmVpbmcgYW5pbWF0ZWQuXHJcbiAgICAgICAgICBpZiAoJHNuaWZmZXIudHJhbnNpdGlvbnMgfHwgJHNuaWZmZXIuYW5pbWF0aW9ucykge1xyXG4gICAgICAgICAgICBtYXRjaGVzLnB1c2goJGluamVjdG9yLmdldChzZWxlY3RvcnNbJyddKSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBrbGFzcyA9IGNsYXNzZXNbaV0sXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvckZhY3RvcnlOYW1lID0gc2VsZWN0b3JzW2tsYXNzXTtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdG9yRmFjdG9yeU5hbWUgJiYgIWZsYWdNYXBba2xhc3NdKSB7XHJcbiAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKCRpbmplY3Rvci5nZXQoc2VsZWN0b3JGYWN0b3J5TmFtZSkpO1xyXG4gICAgICAgICAgICAgIGZsYWdNYXBba2xhc3NdID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIG1hdGNoZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBhbmltYXRpb25SdW5uZXIoZWxlbWVudCwgYW5pbWF0aW9uRXZlbnQsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgIC8vdHJhbnNjbHVkZWQgZGlyZWN0aXZlcyBtYXkgc29tZXRpbWVzIGZpcmUgYW4gYW5pbWF0aW9uIHVzaW5nIG9ubHkgY29tbWVudCBub2Rlc1xyXG4gICAgICAgIC8vYmVzdCB0byBjYXRjaCB0aGlzIGVhcmx5IG9uIHRvIHByZXZlbnQgYW55IGFuaW1hdGlvbiBvcGVyYXRpb25zIGZyb20gb2NjdXJyaW5nXHJcbiAgICAgICAgdmFyIG5vZGUgPSBlbGVtZW50WzBdO1xyXG4gICAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNsYXNzTmFtZUFkZDtcclxuICAgICAgICB2YXIgY2xhc3NOYW1lUmVtb3ZlO1xyXG4gICAgICAgIGlmIChpc0FycmF5KGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgIGNsYXNzTmFtZUFkZCA9IGNsYXNzTmFtZVswXTtcclxuICAgICAgICAgIGNsYXNzTmFtZVJlbW92ZSA9IGNsYXNzTmFtZVsxXTtcclxuICAgICAgICAgIGlmICghY2xhc3NOYW1lQWRkKSB7XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZVJlbW92ZTtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRXZlbnQgPSAncmVtb3ZlQ2xhc3MnO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghY2xhc3NOYW1lUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZUFkZDtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRXZlbnQgPSAnYWRkQ2xhc3MnO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lQWRkICsgJyAnICsgY2xhc3NOYW1lUmVtb3ZlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGlzU2V0Q2xhc3NPcGVyYXRpb24gPSBhbmltYXRpb25FdmVudCA9PSAnc2V0Q2xhc3MnO1xyXG4gICAgICAgIHZhciBpc0NsYXNzQmFzZWQgPSBpc1NldENsYXNzT3BlcmF0aW9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkV2ZW50ID09ICdhZGRDbGFzcycgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uRXZlbnQgPT0gJ3JlbW92ZUNsYXNzJztcclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbnRDbGFzc05hbWUgPSBlbGVtZW50LmF0dHIoJ2NsYXNzJyk7XHJcbiAgICAgICAgdmFyIGNsYXNzZXMgPSBjdXJyZW50Q2xhc3NOYW1lICsgJyAnICsgY2xhc3NOYW1lO1xyXG4gICAgICAgIGlmICghaXNBbmltYXRhYmxlQ2xhc3NOYW1lKGNsYXNzZXMpKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYmVmb3JlQ29tcGxldGUgPSBub29wLFxyXG4gICAgICAgICAgICBiZWZvcmVDYW5jZWwgPSBbXSxcclxuICAgICAgICAgICAgYmVmb3JlID0gW10sXHJcbiAgICAgICAgICAgIGFmdGVyQ29tcGxldGUgPSBub29wLFxyXG4gICAgICAgICAgICBhZnRlckNhbmNlbCA9IFtdLFxyXG4gICAgICAgICAgICBhZnRlciA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgYW5pbWF0aW9uTG9va3VwID0gKCcgJyArIGNsYXNzZXMpLnJlcGxhY2UoL1xccysvZywnLicpO1xyXG4gICAgICAgIGZvckVhY2gobG9va3VwKGFuaW1hdGlvbkxvb2t1cCksIGZ1bmN0aW9uKGFuaW1hdGlvbkZhY3RvcnkpIHtcclxuICAgICAgICAgIHZhciBjcmVhdGVkID0gcmVnaXN0ZXJBbmltYXRpb24oYW5pbWF0aW9uRmFjdG9yeSwgYW5pbWF0aW9uRXZlbnQpO1xyXG4gICAgICAgICAgaWYgKCFjcmVhdGVkICYmIGlzU2V0Q2xhc3NPcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgcmVnaXN0ZXJBbmltYXRpb24oYW5pbWF0aW9uRmFjdG9yeSwgJ2FkZENsYXNzJyk7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQW5pbWF0aW9uKGFuaW1hdGlvbkZhY3RvcnksICdyZW1vdmVDbGFzcycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWdpc3RlckFuaW1hdGlvbihhbmltYXRpb25GYWN0b3J5LCBldmVudCkge1xyXG4gICAgICAgICAgdmFyIGFmdGVyRm4gPSBhbmltYXRpb25GYWN0b3J5W2V2ZW50XTtcclxuICAgICAgICAgIHZhciBiZWZvcmVGbiA9IGFuaW1hdGlvbkZhY3RvcnlbJ2JlZm9yZScgKyBldmVudC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGV2ZW50LnN1YnN0cigxKV07XHJcbiAgICAgICAgICBpZiAoYWZ0ZXJGbiB8fCBiZWZvcmVGbikge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQgPT0gJ2xlYXZlJykge1xyXG4gICAgICAgICAgICAgIGJlZm9yZUZuID0gYWZ0ZXJGbjtcclxuICAgICAgICAgICAgICAvL3doZW4gc2V0IGFzIG51bGwgdGhlbiBhbmltYXRpb24ga25vd3MgdG8gc2tpcCB0aGlzIHBoYXNlXHJcbiAgICAgICAgICAgICAgYWZ0ZXJGbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWZ0ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgZXZlbnQgOiBldmVudCwgZm4gOiBhZnRlckZuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBiZWZvcmUucHVzaCh7XHJcbiAgICAgICAgICAgICAgZXZlbnQgOiBldmVudCwgZm4gOiBiZWZvcmVGblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBydW4oZm5zLCBjYW5jZWxsYXRpb25zLCBhbGxDb21wbGV0ZUZuKSB7XHJcbiAgICAgICAgICB2YXIgYW5pbWF0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgZm9yRWFjaChmbnMsIGZ1bmN0aW9uKGFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICBhbmltYXRpb24uZm4gJiYgYW5pbWF0aW9ucy5wdXNoKGFuaW1hdGlvbik7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgZnVuY3Rpb24gYWZ0ZXJBbmltYXRpb25Db21wbGV0ZShpbmRleCkge1xyXG4gICAgICAgICAgICBpZiAoY2FuY2VsbGF0aW9ucykge1xyXG4gICAgICAgICAgICAgIChjYW5jZWxsYXRpb25zW2luZGV4XSB8fCBub29wKSgpO1xyXG4gICAgICAgICAgICAgIGlmICgrK2NvdW50IDwgYW5pbWF0aW9ucy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICAgICAgICBjYW5jZWxsYXRpb25zID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhbGxDb21wbGV0ZUZuKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy9UaGUgY29kZSBiZWxvdyBhZGRzIGRpcmVjdGx5IHRvIHRoZSBhcnJheSBpbiBvcmRlciB0byB3b3JrIHdpdGhcclxuICAgICAgICAgIC8vYm90aCBzeW5jIGFuZCBhc3luYyBhbmltYXRpb25zLiBTeW5jIGFuaW1hdGlvbnMgYXJlIHdoZW4gdGhlIGRvbmUoKVxyXG4gICAgICAgICAgLy9vcGVyYXRpb24gaXMgY2FsbGVkIHJpZ2h0IGF3YXkuIERPIE5PVCBSRUZBQ1RPUiFcclxuICAgICAgICAgIGZvckVhY2goYW5pbWF0aW9ucywgZnVuY3Rpb24oYW5pbWF0aW9uLCBpbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBhZnRlckFuaW1hdGlvbkNvbXBsZXRlKGluZGV4KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc3dpdGNoKGFuaW1hdGlvbi5ldmVudCkge1xyXG4gICAgICAgICAgICAgIGNhc2UgJ3NldENsYXNzJzpcclxuICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvbnMucHVzaChhbmltYXRpb24uZm4oZWxlbWVudCwgY2xhc3NOYW1lQWRkLCBjbGFzc05hbWVSZW1vdmUsIHByb2dyZXNzKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlICdhZGRDbGFzcyc6XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxsYXRpb25zLnB1c2goYW5pbWF0aW9uLmZuKGVsZW1lbnQsIGNsYXNzTmFtZUFkZCB8fCBjbGFzc05hbWUsICAgICBwcm9ncmVzcykpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgY2FzZSAncmVtb3ZlQ2xhc3MnOlxyXG4gICAgICAgICAgICAgICAgY2FuY2VsbGF0aW9ucy5wdXNoKGFuaW1hdGlvbi5mbihlbGVtZW50LCBjbGFzc05hbWVSZW1vdmUgfHwgY2xhc3NOYW1lLCAgcHJvZ3Jlc3MpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxsYXRpb25zLnB1c2goYW5pbWF0aW9uLmZuKGVsZW1lbnQsIHByb2dyZXNzKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaWYgKGNhbmNlbGxhdGlvbnMgJiYgY2FuY2VsbGF0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgYWxsQ29tcGxldGVGbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG5vZGUgOiBub2RlLFxyXG4gICAgICAgICAgZXZlbnQgOiBhbmltYXRpb25FdmVudCxcclxuICAgICAgICAgIGNsYXNzTmFtZSA6IGNsYXNzTmFtZSxcclxuICAgICAgICAgIGlzQ2xhc3NCYXNlZCA6IGlzQ2xhc3NCYXNlZCxcclxuICAgICAgICAgIGlzU2V0Q2xhc3NPcGVyYXRpb24gOiBpc1NldENsYXNzT3BlcmF0aW9uLFxyXG4gICAgICAgICAgYmVmb3JlIDogZnVuY3Rpb24oYWxsQ29tcGxldGVGbikge1xyXG4gICAgICAgICAgICBiZWZvcmVDb21wbGV0ZSA9IGFsbENvbXBsZXRlRm47XHJcbiAgICAgICAgICAgIHJ1bihiZWZvcmUsIGJlZm9yZUNhbmNlbCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgYmVmb3JlQ29tcGxldGUgPSBub29wO1xyXG4gICAgICAgICAgICAgIGFsbENvbXBsZXRlRm4oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYWZ0ZXIgOiBmdW5jdGlvbihhbGxDb21wbGV0ZUZuKSB7XHJcbiAgICAgICAgICAgIGFmdGVyQ29tcGxldGUgPSBhbGxDb21wbGV0ZUZuO1xyXG4gICAgICAgICAgICBydW4oYWZ0ZXIsIGFmdGVyQ2FuY2VsLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBhZnRlckNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICAgICAgICBhbGxDb21wbGV0ZUZuKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNhbmNlbCA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoYmVmb3JlQ2FuY2VsKSB7XHJcbiAgICAgICAgICAgICAgZm9yRWFjaChiZWZvcmVDYW5jZWwsIGZ1bmN0aW9uKGNhbmNlbEZuKSB7XHJcbiAgICAgICAgICAgICAgICAoY2FuY2VsRm4gfHwgbm9vcCkodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgYmVmb3JlQ29tcGxldGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFmdGVyQ2FuY2VsKSB7XHJcbiAgICAgICAgICAgICAgZm9yRWFjaChhZnRlckNhbmNlbCwgZnVuY3Rpb24oY2FuY2VsRm4pIHtcclxuICAgICAgICAgICAgICAgIChjYW5jZWxGbiB8fCBub29wKSh0cnVlKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBhZnRlckNvbXBsZXRlKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlXHJcbiAgICAgICAqIEBraW5kIG9iamVjdFxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogVGhlIGAkYW5pbWF0ZWAgc2VydmljZSBwcm92aWRlcyBhbmltYXRpb24gZGV0ZWN0aW9uIHN1cHBvcnQgd2hpbGUgcGVyZm9ybWluZyBET00gb3BlcmF0aW9ucyAoZW50ZXIsIGxlYXZlIGFuZCBtb3ZlKSBhcyB3ZWxsIGFzIGR1cmluZyBhZGRDbGFzcyBhbmQgcmVtb3ZlQ2xhc3Mgb3BlcmF0aW9ucy5cclxuICAgICAgICogV2hlbiBhbnkgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgcnVuLCB0aGUgJGFuaW1hdGUgc2VydmljZVxyXG4gICAgICAgKiB3aWxsIGV4YW1pbmUgYW55IEphdmFTY3JpcHQtZGVmaW5lZCBhbmltYXRpb25zICh3aGljaCBhcmUgZGVmaW5lZCBieSB1c2luZyB0aGUgJGFuaW1hdGVQcm92aWRlciBwcm92aWRlciBvYmplY3QpXHJcbiAgICAgICAqIGFzIHdlbGwgYXMgYW55IENTUy1kZWZpbmVkIGFuaW1hdGlvbnMgYWdhaW5zdCB0aGUgQ1NTIGNsYXNzZXMgcHJlc2VudCBvbiB0aGUgZWxlbWVudCBvbmNlIHRoZSBET00gb3BlcmF0aW9uIGlzIHJ1bi5cclxuICAgICAgICpcclxuICAgICAgICogVGhlIGAkYW5pbWF0ZWAgc2VydmljZSBpcyB1c2VkIGJlaGluZCB0aGUgc2NlbmVzIHdpdGggcHJlLWV4aXN0aW5nIGRpcmVjdGl2ZXMgYW5kIGFuaW1hdGlvbiB3aXRoIHRoZXNlIGRpcmVjdGl2ZXNcclxuICAgICAgICogd2lsbCB3b3JrIG91dCBvZiB0aGUgYm94IHdpdGhvdXQgYW55IGV4dHJhIGNvbmZpZ3VyYXRpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFJlcXVpcmVzIHRoZSB7QGxpbmsgbmdBbmltYXRlIGBuZ0FuaW1hdGVgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBQbGVhc2UgdmlzaXQgdGhlIHtAbGluayBuZ0FuaW1hdGUgYG5nQW5pbWF0ZWB9IG1vZHVsZSBvdmVydmlldyBwYWdlIGxlYXJuIG1vcmUgYWJvdXQgaG93IHRvIHVzZSBhbmltYXRpb25zIGluIHlvdXIgYXBwbGljYXRpb24uXHJcbiAgICAgICAqICMjIENhbGxiYWNrIFByb21pc2VzXHJcbiAgICAgICAqIFdpdGggQW5ndWxhckpTIDEuMywgZWFjaCBvZiB0aGUgYW5pbWF0aW9uIG1ldGhvZHMsIG9uIHRoZSBgJGFuaW1hdGVgIHNlcnZpY2UsIHJldHVybiBhIHByb21pc2Ugd2hlbiBjYWxsZWQuIFRoZVxyXG4gICAgICAgKiBwcm9taXNlIGl0c2VsZiBpcyB0aGVuIHJlc29sdmVkIG9uY2UgdGhlIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkIGl0c2VsZiwgaGFzIGJlZW4gY2FuY2VsbGVkIG9yIGhhcyBiZWVuXHJcbiAgICAgICAqIHNraXBwZWQgZHVlIHRvIGFuaW1hdGlvbnMgYmVpbmcgZGlzYWJsZWQuIChOb3RlIHRoYXQgZXZlbiBpZiB0aGUgYW5pbWF0aW9uIGlzIGNhbmNlbGxlZCBpdCB3aWxsIHN0aWxsXHJcbiAgICAgICAqIGNhbGwgdGhlIHJlc29sdmUgZnVuY3Rpb24gb2YgdGhlIGFuaW1hdGlvbi4pXHJcbiAgICAgICAqXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAqICRhbmltYXRlLmVudGVyKGVsZW1lbnQsIGNvbnRhaW5lcikudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICogICAvLy4uLnRoaXMgaXMgY2FsbGVkIG9uY2UgdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZS4uLlxyXG4gICAgICAgKiB9KTtcclxuICAgICAgICogYGBgXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEFsc28gbm90ZSB0aGF0LCBkdWUgdG8gdGhlIG5hdHVyZSBvZiB0aGUgY2FsbGJhY2sgcHJvbWlzZSwgaWYgYW55IEFuZ3VsYXItc3BlY2lmaWMgY29kZSAobGlrZSBjaGFuZ2luZyB0aGUgc2NvcGUsXHJcbiAgICAgICAqIGxvY2F0aW9uIG9mIHRoZSBwYWdlLCBldGMuLi4pIGlzIGV4ZWN1dGVkIHdpdGhpbiB0aGUgY2FsbGJhY2sgcHJvbWlzZSB0aGVuIGJlIHN1cmUgdG8gd3JhcCB0aGUgY29kZSB1c2luZ1xyXG4gICAgICAgKiBgJHNjb3BlLiRhcHBseSguLi4pYDtcclxuICAgICAgICpcclxuICAgICAgICogYGBganNcclxuICAgICAgICogJGFuaW1hdGUubGVhdmUoZWxlbWVudCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICogICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgKiAgICAgJGxvY2F0aW9uLnBhdGgoJy9uZXctcGFnZScpO1xyXG4gICAgICAgKiAgIH0pO1xyXG4gICAgICAgKiB9KTtcclxuICAgICAgICogYGBgXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEFuIGFuaW1hdGlvbiBjYW4gYWxzbyBiZSBjYW5jZWxsZWQgYnkgY2FsbGluZyB0aGUgYCRhbmltYXRlLmNhbmNlbChwcm9taXNlKWAgbWV0aG9kIHdpdGggdGhlIHByb3ZpZGVkXHJcbiAgICAgICAqIHByb21pc2UgdGhhdCB3YXMgcmV0dXJuZWQgd2hlbiB0aGUgYW5pbWF0aW9uIHdhcyBzdGFydGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgKiB2YXIgcHJvbWlzZSA9ICRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsICdzdXBlci1sb25nLWFuaW1hdGlvbicpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAqICAgLy90aGlzIHdpbGwgc3RpbGwgYmUgY2FsbGVkIGV2ZW4gaWYgY2FuY2VsbGVkXHJcbiAgICAgICAqIH0pO1xyXG4gICAgICAgKlxyXG4gICAgICAgKiBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgKiAgIC8vdG9vbyBsYXp5IHRvIHdhaXQgZm9yIHRoZSBhbmltYXRpb24gdG8gZW5kXHJcbiAgICAgICAqICAgJGFuaW1hdGUuY2FuY2VsKHByb21pc2UpO1xyXG4gICAgICAgKiB9KTtcclxuICAgICAgICogYGBgXHJcbiAgICAgICAqXHJcbiAgICAgICAqIChLZWVwIGluIG1pbmQgdGhhdCB0aGUgcHJvbWlzZSBjYW5jZWxsYXRpb24gaXMgdW5pcXVlIHRvIGAkYW5pbWF0ZWAgc2luY2UgcHJvbWlzZXMgaW5cclxuICAgICAgICogZ2VuZXJhbCBjYW5ub3QgYmUgY2FuY2VsbGVkLilcclxuICAgICAgICpcclxuICAgICAgICovXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lICRhbmltYXRlI2VudGVyXHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIEFwcGVuZHMgdGhlIGVsZW1lbnQgdG8gdGhlIHBhcmVudEVsZW1lbnQgZWxlbWVudCB0aGF0IHJlc2lkZXMgaW4gdGhlIGRvY3VtZW50IGFuZCB0aGVuIHJ1bnMgdGhlIGVudGVyIGFuaW1hdGlvbi4gT25jZVxyXG4gICAgICAgICAqIHRoZSBhbmltYXRpb24gaXMgc3RhcnRlZCwgdGhlIGZvbGxvd2luZyBDU1MgY2xhc3NlcyB3aWxsIGJlIHByZXNlbnQgb24gdGhlIGVsZW1lbnQgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQmVsb3cgaXMgYSBicmVha2Rvd24gb2YgZWFjaCBzdGVwIHRoYXQgb2NjdXJzIGR1cmluZyBlbnRlciBhbmltYXRpb246XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB8IEFuaW1hdGlvbiBTdGVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAgICAgICAgICogfCAxLiAkYW5pbWF0ZS5lbnRlciguLi4pIGlzIGNhbGxlZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMi4gZWxlbWVudCBpcyBpbnNlcnRlZCBpbnRvIHRoZSBwYXJlbnRFbGVtZW50IGVsZW1lbnQgb3IgYmVzaWRlIHRoZSBhZnRlckVsZW1lbnQgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDMuICRhbmltYXRlIHdhaXRzIGZvciB0aGUgbmV4dCBkaWdlc3QgdG8gc3RhcnQgdGhlIGFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZVwiICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA0LiAkYW5pbWF0ZSBydW5zIHRoZSBKYXZhU2NyaXB0LWRlZmluZWQgYW5pbWF0aW9ucyBkZXRlY3RlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGVcIiAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNS4gdGhlIC5uZy1lbnRlciBjbGFzcyBpcyBhZGRlZCB0byB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWVudGVyXCIgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDYuICRhbmltYXRlIHNjYW5zIHRoZSBlbGVtZW50IHN0eWxlcyB0byBnZXQgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbiBkdXJhdGlvbiBhbmQgZGVsYXkgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1lbnRlclwiICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA3LiAkYW5pbWF0ZSBibG9ja3MgYWxsIENTUyB0cmFuc2l0aW9ucyBvbiB0aGUgZWxlbWVudCB0byBlbnN1cmUgdGhlIC5uZy1lbnRlciBjbGFzcyBzdHlsaW5nIGlzIGFwcGxpZWQgcmlnaHQgYXdheSB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctZW50ZXJcIiAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgOC4gJGFuaW1hdGUgd2FpdHMgZm9yIGEgc2luZ2xlIGFuaW1hdGlvbiBmcmFtZSAodGhpcyBwZXJmb3JtcyBhIHJlZmxvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWVudGVyXCIgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDkuICRhbmltYXRlIHJlbW92ZXMgdGhlIENTUyB0cmFuc2l0aW9uIGJsb2NrIHBsYWNlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1lbnRlclwiICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAxMC4gdGhlIC5uZy1lbnRlci1hY3RpdmUgY2xhc3MgaXMgYWRkZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctZW50ZXIgbmctZW50ZXItYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgMTEuICRhbmltYXRlIHdhaXRzIGZvciB0aGUgYW5pbWF0aW9uIHRvIGNvbXBsZXRlICh2aWEgZXZlbnRzIGFuZCB0aW1lb3V0KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWVudGVyIG5nLWVudGVyLWFjdGl2ZVwiIHxcclxuICAgICAgICAgKiB8IDEyLiBUaGUgYW5pbWF0aW9uIGVuZHMgYW5kIGFsbCBnZW5lcmF0ZWQgQ1NTIGNsYXNzZXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAxMy4gVGhlIHJldHVybmVkIHByb21pc2UgaXMgcmVzb2x2ZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSB0aGUgZm9jdXMgb2YgdGhlIGVudGVyIGFuaW1hdGlvblxyXG4gICAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50RWxlbWVudCB0aGUgcGFyZW50IGVsZW1lbnQgb2YgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgZW50ZXIgYW5pbWF0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBhZnRlckVsZW1lbnQgdGhlIHNpYmxpbmcgZWxlbWVudCAod2hpY2ggaXMgdGhlIHByZXZpb3VzIGVsZW1lbnQpIG9mIHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSB0aGUgZm9jdXMgb2YgdGhlIGVudGVyIGFuaW1hdGlvblxyXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgICovXHJcbiAgICAgICAgZW50ZXIgOiBmdW5jdGlvbihlbGVtZW50LCBwYXJlbnRFbGVtZW50LCBhZnRlckVsZW1lbnQpIHtcclxuICAgICAgICAgIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gcHJlcGFyZUVsZW1lbnQocGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICBhZnRlckVsZW1lbnQgPSBwcmVwYXJlRWxlbWVudChhZnRlckVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgIGNsYXNzQmFzZWRBbmltYXRpb25zQmxvY2tlZChlbGVtZW50LCB0cnVlKTtcclxuICAgICAgICAgICRkZWxlZ2F0ZS5lbnRlcihlbGVtZW50LCBwYXJlbnRFbGVtZW50LCBhZnRlckVsZW1lbnQpO1xyXG4gICAgICAgICAgcmV0dXJuIHJ1bkFuaW1hdGlvblBvc3REaWdlc3QoZnVuY3Rpb24oZG9uZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGVyZm9ybUFuaW1hdGlvbignZW50ZXInLCAnbmctZW50ZXInLCBzdHJpcENvbW1lbnRzRnJvbUVsZW1lbnQoZWxlbWVudCksIHBhcmVudEVsZW1lbnQsIGFmdGVyRWxlbWVudCwgbm9vcCwgZG9uZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjbGVhdmVcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUnVucyB0aGUgbGVhdmUgYW5pbWF0aW9uIG9wZXJhdGlvbiBhbmQsIHVwb24gY29tcGxldGlvbiwgcmVtb3ZlcyB0aGUgZWxlbWVudCBmcm9tIHRoZSBET00uIE9uY2VcclxuICAgICAgICAgKiB0aGUgYW5pbWF0aW9uIGlzIHN0YXJ0ZWQsIHRoZSBmb2xsb3dpbmcgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhZGRlZCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb246XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBCZWxvdyBpcyBhIGJyZWFrZG93biBvZiBlYWNoIHN0ZXAgdGhhdCBvY2N1cnMgZHVyaW5nIGxlYXZlIGFuaW1hdGlvbjpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHwgQW5pbWF0aW9uIFN0ZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBXaGF0IHRoZSBlbGVtZW50IGNsYXNzIGF0dHJpYnV0ZSBsb29rcyBsaWtlICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcclxuICAgICAgICAgKiB8IDEuICRhbmltYXRlLmxlYXZlKC4uLikgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAyLiAkYW5pbWF0ZSBydW5zIHRoZSBKYXZhU2NyaXB0LWRlZmluZWQgYW5pbWF0aW9ucyBkZXRlY3RlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGVcIiAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMy4gJGFuaW1hdGUgd2FpdHMgZm9yIHRoZSBuZXh0IGRpZ2VzdCB0byBzdGFydCB0aGUgYW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlXCIgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDQuIHRoZSAubmctbGVhdmUgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1sZWF2ZVwiICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA1LiAkYW5pbWF0ZSBzY2FucyB0aGUgZWxlbWVudCBzdHlsZXMgdG8gZ2V0IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24gZHVyYXRpb24gYW5kIGRlbGF5ICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmVcIiAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNi4gJGFuaW1hdGUgYmxvY2tzIGFsbCBDU1MgdHJhbnNpdGlvbnMgb24gdGhlIGVsZW1lbnQgdG8gZW5zdXJlIHRoZSAubmctbGVhdmUgY2xhc3Mgc3R5bGluZyBpcyBhcHBsaWVkIHJpZ2h0IGF3YXkgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWxlYXZl4oCdICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA3LiAkYW5pbWF0ZSB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmVcIiAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgOC4gJGFuaW1hdGUgcmVtb3ZlcyB0aGUgQ1NTIHRyYW5zaXRpb24gYmxvY2sgcGxhY2VkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWxlYXZl4oCdICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA5LiB0aGUgLm5nLWxlYXZlLWFjdGl2ZSBjbGFzcyBpcyBhZGRlZCAodGhpcyB0cmlnZ2VycyB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmUgbmctbGVhdmUtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgMTAuICRhbmltYXRlIHdhaXRzIGZvciB0aGUgYW5pbWF0aW9uIHRvIGNvbXBsZXRlICh2aWEgZXZlbnRzIGFuZCB0aW1lb3V0KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWxlYXZlIG5nLWxlYXZlLWFjdGl2ZVwiIHxcclxuICAgICAgICAgKiB8IDExLiBUaGUgYW5pbWF0aW9uIGVuZHMgYW5kIGFsbCBnZW5lcmF0ZWQgQ1NTIGNsYXNzZXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAxMi4gVGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDEzLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSB0aGUgZm9jdXMgb2YgdGhlIGxlYXZlIGFuaW1hdGlvblxyXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgICovXHJcbiAgICAgICAgbGVhdmUgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgIGNhbmNlbENoaWxkQW5pbWF0aW9ucyhlbGVtZW50KTtcclxuICAgICAgICAgIGNsYXNzQmFzZWRBbmltYXRpb25zQmxvY2tlZChlbGVtZW50LCB0cnVlKTtcclxuICAgICAgICAgIHRoaXMuZW5hYmxlZChmYWxzZSwgZWxlbWVudCk7XHJcbiAgICAgICAgICByZXR1cm4gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwZXJmb3JtQW5pbWF0aW9uKCdsZWF2ZScsICduZy1sZWF2ZScsIHN0cmlwQ29tbWVudHNGcm9tRWxlbWVudChlbGVtZW50KSwgbnVsbCwgbnVsbCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgJGRlbGVnYXRlLmxlYXZlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9LCBkb25lKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNtb3ZlXHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIEZpcmVzIHRoZSBtb3ZlIERPTSBvcGVyYXRpb24uIEp1c3QgYmVmb3JlIHRoZSBhbmltYXRpb24gc3RhcnRzLCB0aGUgYW5pbWF0ZSBzZXJ2aWNlIHdpbGwgZWl0aGVyIGFwcGVuZCBpdCBpbnRvIHRoZSBwYXJlbnRFbGVtZW50IGNvbnRhaW5lciBvclxyXG4gICAgICAgICAqIGFkZCB0aGUgZWxlbWVudCBkaXJlY3RseSBhZnRlciB0aGUgYWZ0ZXJFbGVtZW50IGVsZW1lbnQgaWYgcHJlc2VudC4gVGhlbiB0aGUgbW92ZSBhbmltYXRpb24gd2lsbCBiZSBydW4uIE9uY2VcclxuICAgICAgICAgKiB0aGUgYW5pbWF0aW9uIGlzIHN0YXJ0ZWQsIHRoZSBmb2xsb3dpbmcgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhZGRlZCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb246XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBCZWxvdyBpcyBhIGJyZWFrZG93biBvZiBlYWNoIHN0ZXAgdGhhdCBvY2N1cnMgZHVyaW5nIG1vdmUgYW5pbWF0aW9uOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogfCBBbmltYXRpb24gU3RlcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxyXG4gICAgICAgICAqIHwgMS4gJGFuaW1hdGUubW92ZSguLi4pIGlzIGNhbGxlZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDIuIGVsZW1lbnQgaXMgbW92ZWQgaW50byB0aGUgcGFyZW50RWxlbWVudCBlbGVtZW50IG9yIGJlc2lkZSB0aGUgYWZ0ZXJFbGVtZW50IGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAzLiAkYW5pbWF0ZSB3YWl0cyBmb3IgdGhlIG5leHQgZGlnZXN0IHRvIHN0YXJ0IHRoZSBhbmltYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZVwiICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNC4gJGFuaW1hdGUgcnVucyB0aGUgSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgZGV0ZWN0ZWQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGVcIiAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDUuIHRoZSAubmctbW92ZSBjbGFzcyBpcyBhZGRlZCB0byB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLW1vdmVcIiAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA2LiAkYW5pbWF0ZSBzY2FucyB0aGUgZWxlbWVudCBzdHlsZXMgdG8gZ2V0IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24gZHVyYXRpb24gYW5kIGRlbGF5ICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3ZlXCIgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNy4gJGFuaW1hdGUgYmxvY2tzIGFsbCBDU1MgdHJhbnNpdGlvbnMgb24gdGhlIGVsZW1lbnQgdG8gZW5zdXJlIHRoZSAubmctbW92ZSBjbGFzcyBzdHlsaW5nIGlzIGFwcGxpZWQgcmlnaHQgYXdheSB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbW92ZeKAnSAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA4LiAkYW5pbWF0ZSB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3ZlXCIgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgOS4gJGFuaW1hdGUgcmVtb3ZlcyB0aGUgQ1NTIHRyYW5zaXRpb24gYmxvY2sgcGxhY2VkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbW92ZeKAnSAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAxMC4gdGhlIC5uZy1tb3ZlLWFjdGl2ZSBjbGFzcyBpcyBhZGRlZCAodGhpcyB0cmlnZ2VycyB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3ZlIG5nLW1vdmUtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgMTEuICRhbmltYXRlIHdhaXRzIGZvciB0aGUgYW5pbWF0aW9uIHRvIGNvbXBsZXRlICh2aWEgZXZlbnRzIGFuZCB0aW1lb3V0KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbW92ZSBuZy1tb3ZlLWFjdGl2ZVwiIHxcclxuICAgICAgICAgKiB8IDEyLiBUaGUgYW5pbWF0aW9uIGVuZHMgYW5kIGFsbCBnZW5lcmF0ZWQgQ1NTIGNsYXNzZXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCAxMy4gVGhlIHJldHVybmVkIHByb21pc2UgaXMgcmVzb2x2ZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb25cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSB0aGUgZm9jdXMgb2YgdGhlIG1vdmUgYW5pbWF0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBwYXJlbnRFbGVtZW50IHRoZSBwYXJlbnRFbGVtZW50IGVsZW1lbnQgb2YgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgbW92ZSBhbmltYXRpb25cclxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGFmdGVyRWxlbWVudCB0aGUgc2libGluZyBlbGVtZW50ICh3aGljaCBpcyB0aGUgcHJldmlvdXMgZWxlbWVudCkgb2YgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgbW92ZSBhbmltYXRpb25cclxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICAqL1xyXG4gICAgICAgIG1vdmUgOiBmdW5jdGlvbihlbGVtZW50LCBwYXJlbnRFbGVtZW50LCBhZnRlckVsZW1lbnQpIHtcclxuICAgICAgICAgIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gcHJlcGFyZUVsZW1lbnQocGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICBhZnRlckVsZW1lbnQgPSBwcmVwYXJlRWxlbWVudChhZnRlckVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgIGNhbmNlbENoaWxkQW5pbWF0aW9ucyhlbGVtZW50KTtcclxuICAgICAgICAgIGNsYXNzQmFzZWRBbmltYXRpb25zQmxvY2tlZChlbGVtZW50LCB0cnVlKTtcclxuICAgICAgICAgICRkZWxlZ2F0ZS5tb3ZlKGVsZW1lbnQsIHBhcmVudEVsZW1lbnQsIGFmdGVyRWxlbWVudCk7XHJcbiAgICAgICAgICByZXR1cm4gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwZXJmb3JtQW5pbWF0aW9uKCdtb3ZlJywgJ25nLW1vdmUnLCBzdHJpcENvbW1lbnRzRnJvbUVsZW1lbnQoZWxlbWVudCksIHBhcmVudEVsZW1lbnQsIGFmdGVyRWxlbWVudCwgbm9vcCwgZG9uZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjYWRkQ2xhc3NcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFRyaWdnZXJzIGEgY3VzdG9tIGFuaW1hdGlvbiBldmVudCBiYXNlZCBvZmYgdGhlIGNsYXNzTmFtZSB2YXJpYWJsZSBhbmQgdGhlbiBhdHRhY2hlcyB0aGUgY2xhc3NOYW1lIHZhbHVlIHRvIHRoZSBlbGVtZW50IGFzIGEgQ1NTIGNsYXNzLlxyXG4gICAgICAgICAqIFVubGlrZSB0aGUgb3RoZXIgYW5pbWF0aW9uIG1ldGhvZHMsIHRoZSBhbmltYXRlIHNlcnZpY2Ugd2lsbCBzdWZmaXggdGhlIGNsYXNzTmFtZSB2YWx1ZSB3aXRoIHtAdHlwZSAtYWRkfSBpbiBvcmRlciB0byBwcm92aWRlXHJcbiAgICAgICAgICogdGhlIGFuaW1hdGUgc2VydmljZSB0aGUgc2V0dXAgYW5kIGFjdGl2ZSBDU1MgY2xhc3NlcyBpbiBvcmRlciB0byB0cmlnZ2VyIHRoZSBhbmltYXRpb24gKHRoaXMgd2lsbCBiZSBza2lwcGVkIGlmIG5vIENTUyB0cmFuc2l0aW9uc1xyXG4gICAgICAgICAqIG9yIGtleWZyYW1lcyBhcmUgZGVmaW5lZCBvbiB0aGUgLWFkZC1hY3RpdmUgb3IgYmFzZSBDU1MgY2xhc3MpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQmVsb3cgaXMgYSBicmVha2Rvd24gb2YgZWFjaCBzdGVwIHRoYXQgb2NjdXJzIGR1cmluZyBhZGRDbGFzcyBhbmltYXRpb246XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB8IEFuaW1hdGlvbiBTdGVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxyXG4gICAgICAgICAqIHwgMS4gJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgJ3N1cGVyJykgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMi4gJGFuaW1hdGUgcnVucyB0aGUgSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgZGV0ZWN0ZWQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMy4gdGhlIC5zdXBlci1hZGQgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIHN1cGVyLWFkZFwiICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNC4gJGFuaW1hdGUgd2FpdHMgZm9yIGEgc2luZ2xlIGFuaW1hdGlvbiBmcmFtZSAodGhpcyBwZXJmb3JtcyBhIHJlZmxvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIHN1cGVyLWFkZFwiICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNS4gdGhlIC5zdXBlciBhbmQgLnN1cGVyLWFkZC1hY3RpdmUgY2xhc3NlcyBhcmUgYWRkZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIHN1cGVyIHN1cGVyLWFkZCBzdXBlci1hZGQtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgNi4gJGFuaW1hdGUgc2NhbnMgdGhlIGVsZW1lbnQgc3R5bGVzIHRvIGdldCB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uIGR1cmF0aW9uIGFuZCBkZWxheSAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIHN1cGVyLWFkZFwiICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNy4gJGFuaW1hdGUgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlciBzdXBlci1hZGQgc3VwZXItYWRkLWFjdGl2ZVwiICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgOC4gVGhlIGFuaW1hdGlvbiBlbmRzIGFuZCBhbGwgZ2VuZXJhdGVkIENTUyBjbGFzc2VzIGFyZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlclwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgOS4gVGhlIHN1cGVyIGNsYXNzIGlzIGtlcHQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlclwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMTAuIFRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHJlc29sdmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlclwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSBhbmltYXRlZFxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgdGhlIENTUyBjbGFzcyB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVsZW1lbnQgYW5kIHRoZW4gYW5pbWF0ZWRcclxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICAqL1xyXG4gICAgICAgIGFkZENsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUsIFtdKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjcmVtb3ZlQ2xhc3NcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFRyaWdnZXJzIGEgY3VzdG9tIGFuaW1hdGlvbiBldmVudCBiYXNlZCBvZmYgdGhlIGNsYXNzTmFtZSB2YXJpYWJsZSBhbmQgdGhlbiByZW1vdmVzIHRoZSBDU1MgY2xhc3MgcHJvdmlkZWQgYnkgdGhlIGNsYXNzTmFtZSB2YWx1ZVxyXG4gICAgICAgICAqIGZyb20gdGhlIGVsZW1lbnQuIFVubGlrZSB0aGUgb3RoZXIgYW5pbWF0aW9uIG1ldGhvZHMsIHRoZSBhbmltYXRlIHNlcnZpY2Ugd2lsbCBzdWZmaXggdGhlIGNsYXNzTmFtZSB2YWx1ZSB3aXRoIHtAdHlwZSAtcmVtb3ZlfSBpblxyXG4gICAgICAgICAqIG9yZGVyIHRvIHByb3ZpZGUgdGhlIGFuaW1hdGUgc2VydmljZSB0aGUgc2V0dXAgYW5kIGFjdGl2ZSBDU1MgY2xhc3NlcyBpbiBvcmRlciB0byB0cmlnZ2VyIHRoZSBhbmltYXRpb24gKHRoaXMgd2lsbCBiZSBza2lwcGVkIGlmXHJcbiAgICAgICAgICogbm8gQ1NTIHRyYW5zaXRpb25zIG9yIGtleWZyYW1lcyBhcmUgZGVmaW5lZCBvbiB0aGUgLXJlbW92ZSBvciBiYXNlIENTUyBjbGFzc2VzKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEJlbG93IGlzIGEgYnJlYWtkb3duIG9mIGVhY2ggc3RlcCB0aGF0IG9jY3VycyBkdXJpbmcgcmVtb3ZlQ2xhc3MgYW5pbWF0aW9uOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogfCBBbmltYXRpb24gU3RlcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAgICAgICAgICogfCAxLiAkYW5pbWF0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LCAnc3VwZXInKSBpcyBjYWxsZWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gc3VwZXJcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDIuICRhbmltYXRlIHJ1bnMgdGhlIEphdmFTY3JpcHQtZGVmaW5lZCBhbmltYXRpb25zIGRldGVjdGVkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlciBuZy1hbmltYXRlXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMy4gdGhlIC5zdXBlci1yZW1vdmUgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyIG5nLWFuaW1hdGUgc3VwZXItcmVtb3ZlXCIgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA0LiAkYW5pbWF0ZSB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gc3VwZXIgbmctYW5pbWF0ZSBzdXBlci1yZW1vdmVcIiAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDUuIHRoZSAuc3VwZXItcmVtb3ZlLWFjdGl2ZSBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgLnN1cGVyIGlzIHJlbW92ZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIHN1cGVyLXJlbW92ZSBzdXBlci1yZW1vdmUtYWN0aXZlXCIgfFxyXG4gICAgICAgICAqIHwgNi4gJGFuaW1hdGUgc2NhbnMgdGhlIGVsZW1lbnQgc3R5bGVzIHRvIGdldCB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uIGR1cmF0aW9uIGFuZCBkZWxheSAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyIG5nLWFuaW1hdGUgc3VwZXItcmVtb3ZlXCIgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA3LiAkYW5pbWF0ZSB3YWl0cyBmb3IgdGhlIGFuaW1hdGlvbiB0byBjb21wbGV0ZSAodmlhIGV2ZW50cyBhbmQgdGltZW91dCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBzdXBlci1yZW1vdmUgc3VwZXItcmVtb3ZlLWFjdGl2ZVwiIHxcclxuICAgICAgICAgKiB8IDguIFRoZSBhbmltYXRpb24gZW5kcyBhbmQgYWxsIGdlbmVyYXRlZCBDU1MgY2xhc3NlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvblwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgOS4gVGhlIHJldHVybmVkIHByb21pc2UgaXMgcmVzb2x2ZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgYW5pbWF0ZWRcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3MgdGhhdCB3aWxsIGJlIGFuaW1hdGVkIGFuZCB0aGVuIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudFxyXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcmVtb3ZlQ2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnNldENsYXNzKGVsZW1lbnQsIFtdLCBjbGFzc05hbWUpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lICRhbmltYXRlI3NldENsYXNzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyBhbmQvb3IgcmVtb3ZlcyB0aGUgZ2l2ZW4gQ1NTIGNsYXNzZXMgdG8gYW5kIGZyb20gdGhlIGVsZW1lbnQuXHJcbiAgICAgICAgICogT25jZSBjb21wbGV0ZSwgdGhlIGRvbmUoKSBjYWxsYmFjayB3aWxsIGJlIGZpcmVkIChpZiBwcm92aWRlZCkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB8IEFuaW1hdGlvbiBTdGVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFdoYXQgdGhlIGVsZW1lbnQgY2xhc3MgYXR0cmlidXRlIGxvb2tzIGxpa2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxyXG4gICAgICAgICAqIHwgMS4gJGFuaW1hdGUucmVtb3ZlQ2xhc3MoZWxlbWVudCwg4oCYb27igJksIOKAmG9mZuKAmSkgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlciBvZmbigJ0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgMi4gJGFuaW1hdGUgcnVucyB0aGUgSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgZGV0ZWN0ZWQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2xhc3M9XCJteS1hbmltYXRpb24gc3VwZXIgbmctYW5pbWF0ZSBvZmbigJ0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDMuIHRoZSAub24tYWRkIGFuZCAub2ZmLXJlbW92ZSBjbGFzc2VzIGFyZSBhZGRlZCB0byB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgb24tYWRkIG9mZi1yZW1vdmUgb2Zm4oCdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICogfCA0LiAkYW5pbWF0ZSB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG9uLWFkZCBvZmYtcmVtb3ZlIG9mZuKAnSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAqIHwgNS4gdGhlIC5vbiwgLm9uLWFkZC1hY3RpdmUgYW5kIC5vZmYtcmVtb3ZlLWFjdGl2ZSBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgLm9mZiBpcyByZW1vdmVkICh0aGlzIHRyaWdnZXJzIHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24pIHwgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBvbiBvbi1hZGQgb24tYWRkLWFjdGl2ZSBvZmYtcmVtb3ZlIG9mZi1yZW1vdmUtYWN0aXZl4oCdIHxcclxuICAgICAgICAgKiB8IDYuICRhbmltYXRlIHNjYW5zIHRoZSBlbGVtZW50IHN0eWxlcyB0byBnZXQgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbiBkdXJhdGlvbiBhbmQgZGVsYXkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgb24gb24tYWRkIG9uLWFkZC1hY3RpdmUgb2ZmLXJlbW92ZSBvZmYtcmVtb3ZlLWFjdGl2ZVwiIHxcclxuICAgICAgICAgKiB8IDcuICRhbmltYXRlIHdhaXRzIGZvciB0aGUgYW5pbWF0aW9uIHRvIGNvbXBsZXRlICh2aWEgZXZlbnRzIGFuZCB0aW1lb3V0KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgb24gb24tYWRkIG9uLWFkZC1hY3RpdmUgb2ZmLXJlbW92ZSBvZmYtcmVtb3ZlLWFjdGl2ZVwiIHxcclxuICAgICAgICAgKiB8IDguIFRoZSBhbmltYXRpb24gZW5kcyBhbmQgYWxsIGdlbmVyYXRlZCBDU1MgY2xhc3NlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKiB8IDkuIFRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHJlc29sdmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNsYXNzPVwibXktYW5pbWF0aW9uIG9uXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGhhdmUgaXRzIENTUyBjbGFzc2VzIGNoYW5nZWRcclxuICAgICAgICAgKiAgIHJlbW92ZWQgZnJvbSBpdFxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhZGQgdGhlIENTUyBjbGFzc2VzIHdoaWNoIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVsZW1lbnRcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVtb3ZlIHRoZSBDU1MgY2xhc3Mgd2hpY2ggd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcclxuICAgICAgICAgKiAgIENTUyBjbGFzc2VzIGhhdmUgYmVlbiBzZXQgb24gdGhlIGVsZW1lbnRcclxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXRDbGFzcyA6IGZ1bmN0aW9uKGVsZW1lbnQsIGFkZCwgcmVtb3ZlKSB7XHJcbiAgICAgICAgICB2YXIgU1RPUkFHRV9LRVkgPSAnJCRhbmltYXRlQ2xhc3Nlcyc7XHJcbiAgICAgICAgICBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpO1xyXG4gICAgICAgICAgZWxlbWVudCA9IHN0cmlwQ29tbWVudHNGcm9tRWxlbWVudChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICBpZiAoY2xhc3NCYXNlZEFuaW1hdGlvbnNCbG9ja2VkKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkZGVsZWdhdGUuc2V0Q2xhc3MoZWxlbWVudCwgYWRkLCByZW1vdmUpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGFkZCA9IGlzQXJyYXkoYWRkKSA/IGFkZCA6IGFkZC5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgcmVtb3ZlID0gaXNBcnJheShyZW1vdmUpID8gcmVtb3ZlIDogcmVtb3ZlLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgICAgICAgdmFyIGNhY2hlID0gZWxlbWVudC5kYXRhKFNUT1JBR0VfS0VZKTtcclxuICAgICAgICAgIGlmIChjYWNoZSkge1xyXG4gICAgICAgICAgICBjYWNoZS5hZGQgPSBjYWNoZS5hZGQuY29uY2F0KGFkZCk7XHJcbiAgICAgICAgICAgIGNhY2hlLnJlbW92ZSA9IGNhY2hlLnJlbW92ZS5jb25jYXQocmVtb3ZlKTtcclxuXHJcbiAgICAgICAgICAgIC8vdGhlIGRpZ2VzdCBjeWNsZSB3aWxsIGNvbWJpbmUgYWxsIHRoZSBhbmltYXRpb25zIGludG8gb25lIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZS5wcm9taXNlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWxlbWVudC5kYXRhKFNUT1JBR0VfS0VZLCBjYWNoZSA9IHtcclxuICAgICAgICAgICAgICBhZGQgOiBhZGQsXHJcbiAgICAgICAgICAgICAgcmVtb3ZlIDogcmVtb3ZlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBjYWNoZS5wcm9taXNlID0gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IGVsZW1lbnQuZGF0YShTVE9SQUdFX0tFWSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRGF0YShTVE9SQUdFX0tFWSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge307XHJcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gcmVzb2x2ZUVsZW1lbnRDbGFzc2VzKGVsZW1lbnQsIGNhY2hlLCBzdGF0ZS5hY3RpdmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gIWNsYXNzZXNcclxuICAgICAgICAgICAgICA/IGRvbmUoKVxyXG4gICAgICAgICAgICAgIDogcGVyZm9ybUFuaW1hdGlvbignc2V0Q2xhc3MnLCBjbGFzc2VzLCBlbGVtZW50LCBudWxsLCBudWxsLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgJGRlbGVnYXRlLnNldENsYXNzKGVsZW1lbnQsIGNsYXNzZXNbMF0sIGNsYXNzZXNbMV0pO1xyXG4gICAgICAgICAgICAgICAgfSwgZG9uZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjY2FuY2VsXHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7UHJvbWlzZX0gYW5pbWF0aW9uUHJvbWlzZSBUaGUgYW5pbWF0aW9uIHByb21pc2UgdGhhdCBpcyByZXR1cm5lZCB3aGVuIGFuIGFuaW1hdGlvbiBpcyBzdGFydGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ2FuY2VscyB0aGUgcHJvdmlkZWQgYW5pbWF0aW9uLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgY2FuY2VsIDogZnVuY3Rpb24ocHJvbWlzZSkge1xyXG4gICAgICAgICAgcHJvbWlzZS4kJGNhbmNlbEZuKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lICRhbmltYXRlI2VuYWJsZWRcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gdmFsdWUgSWYgcHJvdmlkZWQgdGhlbiBzZXQgdGhlIGFuaW1hdGlvbiBvbiBvciBvZmYuXHJcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gZWxlbWVudCBJZiBwcm92aWRlZCB0aGVuIHRoZSBlbGVtZW50IHdpbGwgYmUgdXNlZCB0byByZXByZXNlbnQgdGhlIGVuYWJsZS9kaXNhYmxlIG9wZXJhdGlvblxyXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEN1cnJlbnQgYW5pbWF0aW9uIHN0YXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogR2xvYmFsbHkgZW5hYmxlcy9kaXNhYmxlcyBhbmltYXRpb25zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgKi9cclxuICAgICAgICBlbmFibGVkIDogZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFudXAoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICByb290QW5pbWF0ZVN0YXRlLmRpc2FibGVkID0gIXZhbHVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgdmFsdWUgPSAhcm9vdEFuaW1hdGVTdGF0ZS5kaXNhYmxlZDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gISF2YWx1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLypcclxuICAgICAgICBhbGwgYW5pbWF0aW9ucyBjYWxsIHRoaXMgc2hhcmVkIGFuaW1hdGlvbiB0cmlnZ2VyaW5nIGZ1bmN0aW9uIGludGVybmFsbHkuXHJcbiAgICAgICAgVGhlIGFuaW1hdGlvbkV2ZW50IHZhcmlhYmxlIHJlZmVycyB0byB0aGUgSmF2YVNjcmlwdCBhbmltYXRpb24gZXZlbnQgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZFxyXG4gICAgICAgIGFuZCB0aGUgY2xhc3NOYW1lIHZhbHVlIGlzIHRoZSBuYW1lIG9mIHRoZSBhbmltYXRpb24gdGhhdCB3aWxsIGJlIGFwcGxpZWQgd2l0aGluIHRoZVxyXG4gICAgICAgIENTUyBjb2RlLiBFbGVtZW50LCBwYXJlbnRFbGVtZW50IGFuZCBhZnRlckVsZW1lbnQgYXJlIHByb3ZpZGVkIERPTSBlbGVtZW50cyBmb3IgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgIGFuZCB0aGUgb25Db21wbGV0ZSBjYWxsYmFjayB3aWxsIGJlIGZpcmVkIG9uY2UgdGhlIGFuaW1hdGlvbiBpcyBmdWxseSBjb21wbGV0ZS5cclxuICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gcGVyZm9ybUFuaW1hdGlvbihhbmltYXRpb25FdmVudCwgY2xhc3NOYW1lLCBlbGVtZW50LCBwYXJlbnRFbGVtZW50LCBhZnRlckVsZW1lbnQsIGRvbU9wZXJhdGlvbiwgZG9uZUNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgIHZhciBub29wQ2FuY2VsID0gbm9vcDtcclxuICAgICAgICB2YXIgcnVubmVyID0gYW5pbWF0aW9uUnVubmVyKGVsZW1lbnQsIGFuaW1hdGlvbkV2ZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgIGlmICghcnVubmVyKSB7XHJcbiAgICAgICAgICBmaXJlRE9NT3BlcmF0aW9uKCk7XHJcbiAgICAgICAgICBmaXJlQmVmb3JlQ2FsbGJhY2tBc3luYygpO1xyXG4gICAgICAgICAgZmlyZUFmdGVyQ2FsbGJhY2tBc3luYygpO1xyXG4gICAgICAgICAgY2xvc2VBbmltYXRpb24oKTtcclxuICAgICAgICAgIHJldHVybiBub29wQ2FuY2VsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYW5pbWF0aW9uRXZlbnQgPSBydW5uZXIuZXZlbnQ7XHJcbiAgICAgICAgY2xhc3NOYW1lID0gcnVubmVyLmNsYXNzTmFtZTtcclxuICAgICAgICB2YXIgZWxlbWVudEV2ZW50cyA9IGFuZ3VsYXIuZWxlbWVudC5fZGF0YShydW5uZXIubm9kZSk7XHJcbiAgICAgICAgZWxlbWVudEV2ZW50cyA9IGVsZW1lbnRFdmVudHMgJiYgZWxlbWVudEV2ZW50cy5ldmVudHM7XHJcblxyXG4gICAgICAgIGlmICghcGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgcGFyZW50RWxlbWVudCA9IGFmdGVyRWxlbWVudCA/IGFmdGVyRWxlbWVudC5wYXJlbnQoKSA6IGVsZW1lbnQucGFyZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3NraXAgdGhlIGFuaW1hdGlvbiBpZiBhbmltYXRpb25zIGFyZSBkaXNhYmxlZCwgYSBwYXJlbnQgaXMgYWxyZWFkeSBiZWluZyBhbmltYXRlZCxcclxuICAgICAgICAvL3RoZSBlbGVtZW50IGlzIG5vdCBjdXJyZW50bHkgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50IGJvZHkgb3IgdGhlbiBjb21wbGV0ZWx5IGNsb3NlXHJcbiAgICAgICAgLy90aGUgYW5pbWF0aW9uIGlmIGFueSBtYXRjaGluZyBhbmltYXRpb25zIGFyZSBub3QgZm91bmQgYXQgYWxsLlxyXG4gICAgICAgIC8vTk9URTogSUU4ICsgSUU5IHNob3VsZCBjbG9zZSBwcm9wZXJseSAocnVuIGNsb3NlQW5pbWF0aW9uKCkpIGluIGNhc2UgYW4gYW5pbWF0aW9uIHdhcyBmb3VuZC5cclxuICAgICAgICBpZiAoYW5pbWF0aW9uc0Rpc2FibGVkKGVsZW1lbnQsIHBhcmVudEVsZW1lbnQpKSB7XHJcbiAgICAgICAgICBmaXJlRE9NT3BlcmF0aW9uKCk7XHJcbiAgICAgICAgICBmaXJlQmVmb3JlQ2FsbGJhY2tBc3luYygpO1xyXG4gICAgICAgICAgZmlyZUFmdGVyQ2FsbGJhY2tBc3luYygpO1xyXG4gICAgICAgICAgY2xvc2VBbmltYXRpb24oKTtcclxuICAgICAgICAgIHJldHVybiBub29wQ2FuY2VsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5nQW5pbWF0ZVN0YXRlICA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKSB8fCB7fTtcclxuICAgICAgICB2YXIgcnVubmluZ0FuaW1hdGlvbnMgICAgID0gbmdBbmltYXRlU3RhdGUuYWN0aXZlIHx8IHt9O1xyXG4gICAgICAgIHZhciB0b3RhbEFjdGl2ZUFuaW1hdGlvbnMgPSBuZ0FuaW1hdGVTdGF0ZS50b3RhbEFjdGl2ZSB8fCAwO1xyXG4gICAgICAgIHZhciBsYXN0QW5pbWF0aW9uICAgICAgICAgPSBuZ0FuaW1hdGVTdGF0ZS5sYXN0O1xyXG4gICAgICAgIHZhciBza2lwQW5pbWF0aW9uID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh0b3RhbEFjdGl2ZUFuaW1hdGlvbnMgPiAwKSB7XHJcbiAgICAgICAgICB2YXIgYW5pbWF0aW9uc1RvQ2FuY2VsID0gW107XHJcbiAgICAgICAgICBpZiAoIXJ1bm5lci5pc0NsYXNzQmFzZWQpIHtcclxuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkV2ZW50ID09ICdsZWF2ZScgJiYgcnVubmluZ0FuaW1hdGlvbnNbJ25nLWxlYXZlJ10pIHtcclxuICAgICAgICAgICAgICBza2lwQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvL2NhbmNlbCBhbGwgYW5pbWF0aW9ucyB3aGVuIGEgc3RydWN0dXJhbCBhbmltYXRpb24gdGFrZXMgcGxhY2VcclxuICAgICAgICAgICAgICBmb3IodmFyIGtsYXNzIGluIHJ1bm5pbmdBbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zVG9DYW5jZWwucHVzaChydW5uaW5nQW5pbWF0aW9uc1trbGFzc10pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBuZ0FuaW1hdGVTdGF0ZSA9IHt9O1xyXG4gICAgICAgICAgICAgIGNsZWFudXAoZWxlbWVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBpZiAobGFzdEFuaW1hdGlvbi5ldmVudCA9PSAnc2V0Q2xhc3MnKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbnNUb0NhbmNlbC5wdXNoKGxhc3RBbmltYXRpb24pO1xyXG4gICAgICAgICAgICBjbGVhbnVwKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmIChydW5uaW5nQW5pbWF0aW9uc1tjbGFzc05hbWVdKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gcnVubmluZ0FuaW1hdGlvbnNbY2xhc3NOYW1lXTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQuZXZlbnQgPT0gYW5pbWF0aW9uRXZlbnQpIHtcclxuICAgICAgICAgICAgICBza2lwQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBhbmltYXRpb25zVG9DYW5jZWwucHVzaChjdXJyZW50KTtcclxuICAgICAgICAgICAgICBjbGVhbnVwKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uc1RvQ2FuY2VsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yRWFjaChhbmltYXRpb25zVG9DYW5jZWwsIGZ1bmN0aW9uKG9wZXJhdGlvbikge1xyXG4gICAgICAgICAgICAgIG9wZXJhdGlvbi5jYW5jZWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocnVubmVyLmlzQ2xhc3NCYXNlZCAmJiAhcnVubmVyLmlzU2V0Q2xhc3NPcGVyYXRpb24gJiYgIXNraXBBbmltYXRpb24pIHtcclxuICAgICAgICAgIHNraXBBbmltYXRpb24gPSAoYW5pbWF0aW9uRXZlbnQgPT0gJ2FkZENsYXNzJykgPT0gZWxlbWVudC5oYXNDbGFzcyhjbGFzc05hbWUpOyAvL29wcG9zaXRlIG9mIFhPUlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNraXBBbmltYXRpb24pIHtcclxuICAgICAgICAgIGZpcmVET01PcGVyYXRpb24oKTtcclxuICAgICAgICAgIGZpcmVCZWZvcmVDYWxsYmFja0FzeW5jKCk7XHJcbiAgICAgICAgICBmaXJlQWZ0ZXJDYWxsYmFja0FzeW5jKCk7XHJcbiAgICAgICAgICBmaXJlRG9uZUNhbGxiYWNrQXN5bmMoKTtcclxuICAgICAgICAgIHJldHVybiBub29wQ2FuY2VsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcnVubmluZ0FuaW1hdGlvbnMgICAgID0gbmdBbmltYXRlU3RhdGUuYWN0aXZlIHx8IHt9O1xyXG4gICAgICAgIHRvdGFsQWN0aXZlQW5pbWF0aW9ucyA9IG5nQW5pbWF0ZVN0YXRlLnRvdGFsQWN0aXZlIHx8IDA7XHJcblxyXG4gICAgICAgIGlmIChhbmltYXRpb25FdmVudCA9PSAnbGVhdmUnKSB7XHJcbiAgICAgICAgICAvL3RoZXJlJ3Mgbm8gbmVlZCB0byBldmVyIHJlbW92ZSB0aGUgbGlzdGVuZXIgc2luY2UgdGhlIGVsZW1lbnRcclxuICAgICAgICAgIC8vd2lsbCBiZSByZW1vdmVkIChkZXN0cm95ZWQpIGFmdGVyIHRoZSBsZWF2ZSBhbmltYXRpb24gZW5kcyBvclxyXG4gICAgICAgICAgLy9pcyBjYW5jZWxsZWQgbWlkd2F5XHJcbiAgICAgICAgICBlbGVtZW50Lm9uZSgnJGRlc3Ryb3knLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSk7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICAgIHZhciBhY3RpdmVMZWF2ZUFuaW1hdGlvbiA9IHN0YXRlLmFjdGl2ZVsnbmctbGVhdmUnXTtcclxuICAgICAgICAgICAgICBpZiAoYWN0aXZlTGVhdmVBbmltYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxlYXZlQW5pbWF0aW9uLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgY2xlYW51cChlbGVtZW50LCAnbmctbGVhdmUnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy90aGUgbmctYW5pbWF0ZSBjbGFzcyBkb2VzIG5vdGhpbmcsIGJ1dCBpdCdzIGhlcmUgdG8gYWxsb3cgZm9yXHJcbiAgICAgICAgLy9wYXJlbnQgYW5pbWF0aW9ucyB0byBmaW5kIGFuZCBjYW5jZWwgY2hpbGQgYW5pbWF0aW9ucyB3aGVuIG5lZWRlZFxyXG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoTkdfQU5JTUFURV9DTEFTU19OQU1FKTtcclxuXHJcbiAgICAgICAgdmFyIGxvY2FsQW5pbWF0aW9uQ291bnQgPSBnbG9iYWxBbmltYXRpb25Db3VudGVyKys7XHJcbiAgICAgICAgdG90YWxBY3RpdmVBbmltYXRpb25zKys7XHJcbiAgICAgICAgcnVubmluZ0FuaW1hdGlvbnNbY2xhc3NOYW1lXSA9IHJ1bm5lcjtcclxuXHJcbiAgICAgICAgZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUsIHtcclxuICAgICAgICAgIGxhc3QgOiBydW5uZXIsXHJcbiAgICAgICAgICBhY3RpdmUgOiBydW5uaW5nQW5pbWF0aW9ucyxcclxuICAgICAgICAgIGluZGV4IDogbG9jYWxBbmltYXRpb25Db3VudCxcclxuICAgICAgICAgIHRvdGFsQWN0aXZlIDogdG90YWxBY3RpdmVBbmltYXRpb25zXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vZmlyc3Qgd2UgcnVuIHRoZSBiZWZvcmUgYW5pbWF0aW9ucyBhbmQgd2hlbiBhbGwgb2YgdGhvc2UgYXJlIGNvbXBsZXRlXHJcbiAgICAgICAgLy90aGVuIHdlIHBlcmZvcm0gdGhlIERPTSBvcGVyYXRpb24gYW5kIHJ1biB0aGUgbmV4dCBzZXQgb2YgYW5pbWF0aW9uc1xyXG4gICAgICAgIGZpcmVCZWZvcmVDYWxsYmFja0FzeW5jKCk7XHJcbiAgICAgICAgcnVubmVyLmJlZm9yZShmdW5jdGlvbihjYW5jZWxsZWQpIHtcclxuICAgICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpO1xyXG4gICAgICAgICAgY2FuY2VsbGVkID0gY2FuY2VsbGVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFkYXRhIHx8ICFkYXRhLmFjdGl2ZVtjbGFzc05hbWVdIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChydW5uZXIuaXNDbGFzc0Jhc2VkICYmIGRhdGEuYWN0aXZlW2NsYXNzTmFtZV0uZXZlbnQgIT0gYW5pbWF0aW9uRXZlbnQpO1xyXG5cclxuICAgICAgICAgIGZpcmVET01PcGVyYXRpb24oKTtcclxuICAgICAgICAgIGlmIChjYW5jZWxsZWQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgY2xvc2VBbmltYXRpb24oKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZpcmVBZnRlckNhbGxiYWNrQXN5bmMoKTtcclxuICAgICAgICAgICAgcnVubmVyLmFmdGVyKGNsb3NlQW5pbWF0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJ1bm5lci5jYW5jZWw7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpcmVET01DYWxsYmFjayhhbmltYXRpb25QaGFzZSkge1xyXG4gICAgICAgICAgdmFyIGV2ZW50TmFtZSA9ICckYW5pbWF0ZTonICsgYW5pbWF0aW9uUGhhc2U7XHJcbiAgICAgICAgICBpZiAoZWxlbWVudEV2ZW50cyAmJiBlbGVtZW50RXZlbnRzW2V2ZW50TmFtZV0gJiYgZWxlbWVudEV2ZW50c1tldmVudE5hbWVdLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCRhc3luY0NhbGxiYWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQudHJpZ2dlckhhbmRsZXIoZXZlbnROYW1lLCB7XHJcbiAgICAgICAgICAgICAgICBldmVudCA6IGFuaW1hdGlvbkV2ZW50LFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogY2xhc3NOYW1lXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmlyZUJlZm9yZUNhbGxiYWNrQXN5bmMoKSB7XHJcbiAgICAgICAgICBmaXJlRE9NQ2FsbGJhY2soJ2JlZm9yZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmlyZUFmdGVyQ2FsbGJhY2tBc3luYygpIHtcclxuICAgICAgICAgIGZpcmVET01DYWxsYmFjaygnYWZ0ZXInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpcmVEb25lQ2FsbGJhY2tBc3luYygpIHtcclxuICAgICAgICAgIGZpcmVET01DYWxsYmFjaygnY2xvc2UnKTtcclxuICAgICAgICAgIGRvbmVDYWxsYmFjaygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9pdCBpcyBsZXNzIGNvbXBsaWNhdGVkIHRvIHVzZSBhIGZsYWcgdGhhbiBtYW5hZ2luZyBhbmQgY2FuY2VsaW5nXHJcbiAgICAgICAgLy90aW1lb3V0cyBjb250YWluaW5nIG11bHRpcGxlIGNhbGxiYWNrcy5cclxuICAgICAgICBmdW5jdGlvbiBmaXJlRE9NT3BlcmF0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCFmaXJlRE9NT3BlcmF0aW9uLmhhc0JlZW5SdW4pIHtcclxuICAgICAgICAgICAgZmlyZURPTU9wZXJhdGlvbi5oYXNCZWVuUnVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgZG9tT3BlcmF0aW9uKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbG9zZUFuaW1hdGlvbigpIHtcclxuICAgICAgICAgIGlmICghY2xvc2VBbmltYXRpb24uaGFzQmVlblJ1bikge1xyXG4gICAgICAgICAgICBjbG9zZUFuaW1hdGlvbi5oYXNCZWVuUnVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgLyogb25seSBzdHJ1Y3R1cmFsIGFuaW1hdGlvbnMgd2FpdCBmb3IgcmVmbG93IGJlZm9yZSByZW1vdmluZyBhblxyXG4gICAgICAgICAgICAgICAgIGFuaW1hdGlvbiwgYnV0IGNsYXNzLWJhc2VkIGFuaW1hdGlvbnMgZG9uJ3QuIEFuIGV4YW1wbGUgb2YgdGhpc1xyXG4gICAgICAgICAgICAgICAgIGZhaWxpbmcgd291bGQgYmUgd2hlbiBhIHBhcmVudCBIVE1MIHRhZyBoYXMgYSBuZy1jbGFzcyBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgICAgICBjYXVzaW5nIEFMTCBkaXJlY3RpdmVzIGJlbG93IHRvIHNraXAgYW5pbWF0aW9ucyBkdXJpbmcgdGhlIGRpZ2VzdCAqL1xyXG4gICAgICAgICAgICAgIGlmIChydW5uZXIgJiYgcnVubmVyLmlzQ2xhc3NCYXNlZCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYW51cChlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkJGFzeW5jQ2FsbGJhY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgICBpZiAobG9jYWxBbmltYXRpb25Db3VudCA9PSBkYXRhLmluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cChlbGVtZW50LCBjbGFzc05hbWUsIGFuaW1hdGlvbkV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpcmVEb25lQ2FsbGJhY2tBc3luYygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY2FuY2VsQ2hpbGRBbmltYXRpb25zKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KTtcclxuICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgdmFyIG5vZGVzID0gYW5ndWxhci5pc0Z1bmN0aW9uKG5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkgP1xyXG4gICAgICAgICAgICBub2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoTkdfQU5JTUFURV9DTEFTU19OQU1FKSA6XHJcbiAgICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvckFsbCgnLicgKyBOR19BTklNQVRFX0NMQVNTX05BTUUpO1xyXG4gICAgICAgICAgZm9yRWFjaChub2RlcywgZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5hY3RpdmUpIHtcclxuICAgICAgICAgICAgICBmb3JFYWNoKGRhdGEuYWN0aXZlLCBmdW5jdGlvbihydW5uZXIpIHtcclxuICAgICAgICAgICAgICAgIHJ1bm5lci5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBjbGVhbnVwKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgIGlmIChpc01hdGNoaW5nRWxlbWVudChlbGVtZW50LCAkcm9vdEVsZW1lbnQpKSB7XHJcbiAgICAgICAgICBpZiAoIXJvb3RBbmltYXRlU3RhdGUuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgcm9vdEFuaW1hdGVTdGF0ZS5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJvb3RBbmltYXRlU3RhdGUuc3RydWN0dXJhbCA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICB2YXIgZGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKSB8fCB7fTtcclxuXHJcbiAgICAgICAgICB2YXIgcmVtb3ZlQW5pbWF0aW9ucyA9IGNsYXNzTmFtZSA9PT0gdHJ1ZTtcclxuICAgICAgICAgIGlmICghcmVtb3ZlQW5pbWF0aW9ucyAmJiBkYXRhLmFjdGl2ZSAmJiBkYXRhLmFjdGl2ZVtjbGFzc05hbWVdKSB7XHJcbiAgICAgICAgICAgIGRhdGEudG90YWxBY3RpdmUtLTtcclxuICAgICAgICAgICAgZGVsZXRlIGRhdGEuYWN0aXZlW2NsYXNzTmFtZV07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHJlbW92ZUFuaW1hdGlvbnMgfHwgIWRhdGEudG90YWxBY3RpdmUpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhOR19BTklNQVRFX0NMQVNTX05BTUUpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZURhdGEoTkdfQU5JTUFURV9TVEFURSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBhbmltYXRpb25zRGlzYWJsZWQoZWxlbWVudCwgcGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgIGlmIChyb290QW5pbWF0ZVN0YXRlLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc01hdGNoaW5nRWxlbWVudChlbGVtZW50LCAkcm9vdEVsZW1lbnQpKSB7XHJcbiAgICAgICAgICByZXR1cm4gcm9vdEFuaW1hdGVTdGF0ZS5ydW5uaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFsbG93Q2hpbGRBbmltYXRpb25zLCBwYXJlbnRSdW5uaW5nQW5pbWF0aW9uLCBoYXNQYXJlbnQ7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgLy90aGUgZWxlbWVudCBkaWQgbm90IHJlYWNoIHRoZSByb290IGVsZW1lbnQgd2hpY2ggbWVhbnMgdGhhdCBpdFxyXG4gICAgICAgICAgLy9pcyBub3QgYXBhcnQgb2YgdGhlIERPTS4gVGhlcmVmb3JlIHRoZXJlIGlzIG5vIHJlYXNvbiB0byBkb1xyXG4gICAgICAgICAgLy9hbnkgYW5pbWF0aW9ucyBvbiBpdFxyXG4gICAgICAgICAgaWYgKHBhcmVudEVsZW1lbnQubGVuZ3RoID09PSAwKSBicmVhaztcclxuXHJcbiAgICAgICAgICB2YXIgaXNSb290ID0gaXNNYXRjaGluZ0VsZW1lbnQocGFyZW50RWxlbWVudCwgJHJvb3RFbGVtZW50KTtcclxuICAgICAgICAgIHZhciBzdGF0ZSA9IGlzUm9vdCA/IHJvb3RBbmltYXRlU3RhdGUgOiAocGFyZW50RWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpIHx8IHt9KTtcclxuICAgICAgICAgIGlmIChzdGF0ZS5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvL25vIG1hdHRlciB3aGF0LCBmb3IgYW4gYW5pbWF0aW9uIHRvIHdvcmsgaXQgbXVzdCByZWFjaCB0aGUgcm9vdCBlbGVtZW50XHJcbiAgICAgICAgICAvL3RoaXMgaW1wbGllcyB0aGF0IHRoZSBlbGVtZW50IGlzIGF0dGFjaGVkIHRvIHRoZSBET00gd2hlbiB0aGUgYW5pbWF0aW9uIGlzIHJ1blxyXG4gICAgICAgICAgaWYgKGlzUm9vdCkge1xyXG4gICAgICAgICAgICBoYXNQYXJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vb25jZSBhIGZsYWcgaXMgZm91bmQgdGhhdCBpcyBzdHJpY3RseSBmYWxzZSB0aGVuIGV2ZXJ5dGhpbmcgYmVmb3JlXHJcbiAgICAgICAgICAvL2l0IHdpbGwgYmUgZGlzY2FyZGVkIGFuZCBhbGwgY2hpbGQgYW5pbWF0aW9ucyB3aWxsIGJlIHJlc3RyaWN0ZWRcclxuICAgICAgICAgIGlmIChhbGxvd0NoaWxkQW5pbWF0aW9ucyAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdmFyIGFuaW1hdGVDaGlsZHJlbkZsYWcgPSBwYXJlbnRFbGVtZW50LmRhdGEoTkdfQU5JTUFURV9DSElMRFJFTik7XHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChhbmltYXRlQ2hpbGRyZW5GbGFnKSkge1xyXG4gICAgICAgICAgICAgIGFsbG93Q2hpbGRBbmltYXRpb25zID0gYW5pbWF0ZUNoaWxkcmVuRmxhZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHBhcmVudFJ1bm5pbmdBbmltYXRpb24gPSBwYXJlbnRSdW5uaW5nQW5pbWF0aW9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUucnVubmluZyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdGF0ZS5sYXN0ICYmICFzdGF0ZS5sYXN0LmlzQ2xhc3NCYXNlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlKHBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50LnBhcmVudCgpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICFoYXNQYXJlbnQgfHwgKCFhbGxvd0NoaWxkQW5pbWF0aW9ucyAmJiBwYXJlbnRSdW5uaW5nQW5pbWF0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgICRhbmltYXRlUHJvdmlkZXIucmVnaXN0ZXIoJycsIFsnJHdpbmRvdycsICckc25pZmZlcicsICckdGltZW91dCcsICckJGFuaW1hdGVSZWZsb3cnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigkd2luZG93LCAgICRzbmlmZmVyLCAgICR0aW1lb3V0LCAgICQkYW5pbWF0ZVJlZmxvdykge1xyXG4gICAgICAvLyBEZXRlY3QgcHJvcGVyIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGV2ZW50IG5hbWVzLlxyXG4gICAgICB2YXIgQ1NTX1BSRUZJWCA9ICcnLCBUUkFOU0lUSU9OX1BST1AsIFRSQU5TSVRJT05FTkRfRVZFTlQsIEFOSU1BVElPTl9QUk9QLCBBTklNQVRJT05FTkRfRVZFTlQ7XHJcblxyXG4gICAgICAvLyBJZiB1bnByZWZpeGVkIGV2ZW50cyBhcmUgbm90IHN1cHBvcnRlZCBidXQgd2Via2l0LXByZWZpeGVkIGFyZSwgdXNlIHRoZSBsYXR0ZXIuXHJcbiAgICAgIC8vIE90aGVyd2lzZSwganVzdCB1c2UgVzNDIG5hbWVzLCBicm93c2VycyBub3Qgc3VwcG9ydGluZyB0aGVtIGF0IGFsbCB3aWxsIGp1c3QgaWdub3JlIHRoZW0uXHJcbiAgICAgIC8vIE5vdGU6IENocm9tZSBpbXBsZW1lbnRzIGB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmRgIGFuZCBkb2Vzbid0IGltcGxlbWVudCBgd2luZG93Lm9uYW5pbWF0aW9uZW5kYFxyXG4gICAgICAvLyBidXQgYXQgdGhlIHNhbWUgdGltZSBkaXNwYXRjaGVzIHRoZSBgYW5pbWF0aW9uZW5kYCBldmVudCBhbmQgbm90IGB3ZWJraXRBbmltYXRpb25FbmRgLlxyXG4gICAgICAvLyBSZWdpc3RlciBib3RoIGV2ZW50cyBpbiBjYXNlIGB3aW5kb3cub25hbmltYXRpb25lbmRgIGlzIG5vdCBzdXBwb3J0ZWQgYmVjYXVzZSBvZiB0aGF0LFxyXG4gICAgICAvLyBkbyB0aGUgc2FtZSBmb3IgYHRyYW5zaXRpb25lbmRgIGFzIFNhZmFyaSBpcyBsaWtlbHkgdG8gZXhoaWJpdCBzaW1pbGFyIGJlaGF2aW9yLlxyXG4gICAgICAvLyBBbHNvLCB0aGUgb25seSBtb2Rlcm4gYnJvd3NlciB0aGF0IHVzZXMgdmVuZG9yIHByZWZpeGVzIGZvciB0cmFuc2l0aW9ucy9rZXlmcmFtZXMgaXMgd2Via2l0XHJcbiAgICAgIC8vIHRoZXJlZm9yZSB0aGVyZSBpcyBubyByZWFzb24gdG8gdGVzdCBhbnltb3JlIGZvciBvdGhlciB2ZW5kb3IgcHJlZml4ZXM6IGh0dHA6Ly9jYW5pdXNlLmNvbS8jc2VhcmNoPXRyYW5zaXRpb25cclxuICAgICAgaWYgKHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBDU1NfUFJFRklYID0gJy13ZWJraXQtJztcclxuICAgICAgICBUUkFOU0lUSU9OX1BST1AgPSAnV2Via2l0VHJhbnNpdGlvbic7XHJcbiAgICAgICAgVFJBTlNJVElPTkVORF9FVkVOVCA9ICd3ZWJraXRUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIFRSQU5TSVRJT05fUFJPUCA9ICd0cmFuc2l0aW9uJztcclxuICAgICAgICBUUkFOU0lUSU9ORU5EX0VWRU5UID0gJ3RyYW5zaXRpb25lbmQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAod2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBDU1NfUFJFRklYID0gJy13ZWJraXQtJztcclxuICAgICAgICBBTklNQVRJT05fUFJPUCA9ICdXZWJraXRBbmltYXRpb24nO1xyXG4gICAgICAgIEFOSU1BVElPTkVORF9FVkVOVCA9ICd3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBBTklNQVRJT05fUFJPUCA9ICdhbmltYXRpb24nO1xyXG4gICAgICAgIEFOSU1BVElPTkVORF9FVkVOVCA9ICdhbmltYXRpb25lbmQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgRFVSQVRJT05fS0VZID0gJ0R1cmF0aW9uJztcclxuICAgICAgdmFyIFBST1BFUlRZX0tFWSA9ICdQcm9wZXJ0eSc7XHJcbiAgICAgIHZhciBERUxBWV9LRVkgPSAnRGVsYXknO1xyXG4gICAgICB2YXIgQU5JTUFUSU9OX0lURVJBVElPTl9DT1VOVF9LRVkgPSAnSXRlcmF0aW9uQ291bnQnO1xyXG4gICAgICB2YXIgQU5JTUFUSU9OX1BMQVlTVEFURV9LRVkgPSAnUGxheVN0YXRlJztcclxuICAgICAgdmFyIE5HX0FOSU1BVEVfUEFSRU5UX0tFWSA9ICckJG5nQW5pbWF0ZUtleSc7XHJcbiAgICAgIHZhciBOR19BTklNQVRFX0NTU19EQVRBX0tFWSA9ICckJG5nQW5pbWF0ZUNTUzNEYXRhJztcclxuICAgICAgdmFyIEVMQVBTRURfVElNRV9NQVhfREVDSU1BTF9QTEFDRVMgPSAzO1xyXG4gICAgICB2YXIgQ0xPU0lOR19USU1FX0JVRkZFUiA9IDEuNTtcclxuICAgICAgdmFyIE9ORV9TRUNPTkQgPSAxMDAwO1xyXG5cclxuICAgICAgdmFyIGxvb2t1cENhY2hlID0ge307XHJcbiAgICAgIHZhciBwYXJlbnRDb3VudGVyID0gMDtcclxuICAgICAgdmFyIGFuaW1hdGlvblJlZmxvd1F1ZXVlID0gW107XHJcbiAgICAgIHZhciBjYW5jZWxBbmltYXRpb25SZWZsb3c7XHJcbiAgICAgIGZ1bmN0aW9uIGFmdGVyUmVmbG93KGVsZW1lbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKGNhbmNlbEFuaW1hdGlvblJlZmxvdykge1xyXG4gICAgICAgICAgY2FuY2VsQW5pbWF0aW9uUmVmbG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFuaW1hdGlvblJlZmxvd1F1ZXVlLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgIGNhbmNlbEFuaW1hdGlvblJlZmxvdyA9ICQkYW5pbWF0ZVJlZmxvdyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGZvckVhY2goYW5pbWF0aW9uUmVmbG93UXVldWUsIGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBhbmltYXRpb25SZWZsb3dRdWV1ZSA9IFtdO1xyXG4gICAgICAgICAgY2FuY2VsQW5pbWF0aW9uUmVmbG93ID0gbnVsbDtcclxuICAgICAgICAgIGxvb2t1cENhY2hlID0ge307XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBjbG9zaW5nVGltZXIgPSBudWxsO1xyXG4gICAgICB2YXIgY2xvc2luZ1RpbWVzdGFtcCA9IDA7XHJcbiAgICAgIHZhciBhbmltYXRpb25FbGVtZW50UXVldWUgPSBbXTtcclxuICAgICAgZnVuY3Rpb24gYW5pbWF0aW9uQ2xvc2VIYW5kbGVyKGVsZW1lbnQsIHRvdGFsVGltZSkge1xyXG4gICAgICAgIHZhciBub2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGVsZW1lbnQpO1xyXG4gICAgICAgIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQobm9kZSk7XHJcblxyXG4gICAgICAgIC8vdGhpcyBpdGVtIHdpbGwgYmUgZ2FyYmFnZSBjb2xsZWN0ZWQgYnkgdGhlIGNsb3NpbmdcclxuICAgICAgICAvL2FuaW1hdGlvbiB0aW1lb3V0XHJcbiAgICAgICAgYW5pbWF0aW9uRWxlbWVudFF1ZXVlLnB1c2goZWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vYnV0IGl0IG1heSBub3QgbmVlZCB0byBjYW5jZWwgb3V0IHRoZSBleGlzdGluZyB0aW1lb3V0XHJcbiAgICAgICAgLy9pZiB0aGUgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiB0aGUgcHJldmlvdXMgb25lXHJcbiAgICAgICAgdmFyIGZ1dHVyZVRpbWVzdGFtcCA9IERhdGUubm93KCkgKyB0b3RhbFRpbWU7XHJcbiAgICAgICAgaWYgKGZ1dHVyZVRpbWVzdGFtcCA8PSBjbG9zaW5nVGltZXN0YW1wKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkdGltZW91dC5jYW5jZWwoY2xvc2luZ1RpbWVyKTtcclxuXHJcbiAgICAgICAgY2xvc2luZ1RpbWVzdGFtcCA9IGZ1dHVyZVRpbWVzdGFtcDtcclxuICAgICAgICBjbG9zaW5nVGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGNsb3NlQWxsQW5pbWF0aW9ucyhhbmltYXRpb25FbGVtZW50UXVldWUpO1xyXG4gICAgICAgICAgYW5pbWF0aW9uRWxlbWVudFF1ZXVlID0gW107XHJcbiAgICAgICAgfSwgdG90YWxUaW1lLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNsb3NlQWxsQW5pbWF0aW9ucyhlbGVtZW50cykge1xyXG4gICAgICAgIGZvckVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgIHZhciBlbGVtZW50RGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NTU19EQVRBX0tFWSk7XHJcbiAgICAgICAgICBpZiAoZWxlbWVudERhdGEpIHtcclxuICAgICAgICAgICAgZm9yRWFjaChlbGVtZW50RGF0YS5jbG9zZUFuaW1hdGlvbkZucywgZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICAgICAgICBmbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZ2V0RWxlbWVudEFuaW1hdGlvbkRldGFpbHMoZWxlbWVudCwgY2FjaGVLZXkpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IGNhY2hlS2V5ID8gbG9va3VwQ2FjaGVbY2FjaGVLZXldIDogbnVsbDtcclxuICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSAwO1xyXG4gICAgICAgICAgdmFyIHRyYW5zaXRpb25EZWxheSA9IDA7XHJcbiAgICAgICAgICB2YXIgYW5pbWF0aW9uRHVyYXRpb24gPSAwO1xyXG4gICAgICAgICAgdmFyIGFuaW1hdGlvbkRlbGF5ID0gMDtcclxuXHJcbiAgICAgICAgICAvL3dlIHdhbnQgYWxsIHRoZSBzdHlsZXMgZGVmaW5lZCBiZWZvcmUgYW5kIGFmdGVyXHJcbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT0gRUxFTUVOVF9OT0RFKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGVsZW1lbnRTdHlsZXMgPSAkd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkgfHwge307XHJcblxyXG4gICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb25TdHlsZSA9IGVsZW1lbnRTdHlsZXNbVFJBTlNJVElPTl9QUk9QICsgRFVSQVRJT05fS0VZXTtcclxuICAgICAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24gPSBNYXRoLm1heChwYXJzZU1heFRpbWUodHJhbnNpdGlvbkR1cmF0aW9uU3R5bGUpLCB0cmFuc2l0aW9uRHVyYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbkRlbGF5U3R5bGUgPSBlbGVtZW50U3R5bGVzW1RSQU5TSVRJT05fUFJPUCArIERFTEFZX0tFWV07XHJcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5ICA9IE1hdGgubWF4KHBhcnNlTWF4VGltZSh0cmFuc2l0aW9uRGVsYXlTdHlsZSksIHRyYW5zaXRpb25EZWxheSk7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBhbmltYXRpb25EZWxheVN0eWxlID0gZWxlbWVudFN0eWxlc1tBTklNQVRJT05fUFJPUCArIERFTEFZX0tFWV07XHJcbiAgICAgICAgICAgICAgYW5pbWF0aW9uRGVsYXkgICA9IE1hdGgubWF4KHBhcnNlTWF4VGltZShlbGVtZW50U3R5bGVzW0FOSU1BVElPTl9QUk9QICsgREVMQVlfS0VZXSksIGFuaW1hdGlvbkRlbGF5KTtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIGFEdXJhdGlvbiAgPSBwYXJzZU1heFRpbWUoZWxlbWVudFN0eWxlc1tBTklNQVRJT05fUFJPUCArIERVUkFUSU9OX0tFWV0pO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoYUR1cmF0aW9uID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYUR1cmF0aW9uICo9IHBhcnNlSW50KGVsZW1lbnRTdHlsZXNbQU5JTUFUSU9OX1BST1AgKyBBTklNQVRJT05fSVRFUkFUSU9OX0NPVU5UX0tFWV0sIDEwKSB8fCAxO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbiA9IE1hdGgubWF4KGFEdXJhdGlvbiwgYW5pbWF0aW9uRHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRvdGFsIDogMCxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiB0cmFuc2l0aW9uRGVsYXksXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogdHJhbnNpdGlvbkR1cmF0aW9uLFxyXG4gICAgICAgICAgICBhbmltYXRpb25EZWxheTogYW5pbWF0aW9uRGVsYXksXHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiBhbmltYXRpb25EdXJhdGlvblxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGlmIChjYWNoZUtleSkge1xyXG4gICAgICAgICAgICBsb29rdXBDYWNoZVtjYWNoZUtleV0gPSBkYXRhO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gcGFyc2VNYXhUaW1lKHN0cikge1xyXG4gICAgICAgIHZhciBtYXhWYWx1ZSA9IDA7XHJcbiAgICAgICAgdmFyIHZhbHVlcyA9IGFuZ3VsYXIuaXNTdHJpbmcoc3RyKSA/XHJcbiAgICAgICAgICBzdHIuc3BsaXQoL1xccyosXFxzKi8pIDpcclxuICAgICAgICAgIFtdO1xyXG4gICAgICAgIGZvckVhY2godmFsdWVzLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgbWF4VmFsdWUgPSBNYXRoLm1heChwYXJzZUZsb2F0KHZhbHVlKSB8fCAwLCBtYXhWYWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG1heFZhbHVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRDYWNoZUtleShlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSBlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwYXJlbnRJRCA9IHBhcmVudEVsZW1lbnQuZGF0YShOR19BTklNQVRFX1BBUkVOVF9LRVkpO1xyXG4gICAgICAgIGlmICghcGFyZW50SUQpIHtcclxuICAgICAgICAgIHBhcmVudEVsZW1lbnQuZGF0YShOR19BTklNQVRFX1BBUkVOVF9LRVksICsrcGFyZW50Q291bnRlcik7XHJcbiAgICAgICAgICBwYXJlbnRJRCA9IHBhcmVudENvdW50ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXJlbnRJRCArICctJyArIGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGFuaW1hdGVTZXR1cChhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgdmFyIHN0cnVjdHVyYWwgPSBbJ25nLWVudGVyJywnbmctbGVhdmUnLCduZy1tb3ZlJ10uaW5kZXhPZihjbGFzc05hbWUpID49IDA7XHJcblxyXG4gICAgICAgIHZhciBjYWNoZUtleSA9IGdldENhY2hlS2V5KGVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBldmVudENhY2hlS2V5ID0gY2FjaGVLZXkgKyAnICcgKyBjbGFzc05hbWU7XHJcbiAgICAgICAgdmFyIGl0ZW1JbmRleCA9IGxvb2t1cENhY2hlW2V2ZW50Q2FjaGVLZXldID8gKytsb29rdXBDYWNoZVtldmVudENhY2hlS2V5XS50b3RhbCA6IDA7XHJcblxyXG4gICAgICAgIHZhciBzdGFnZ2VyID0ge307XHJcbiAgICAgICAgaWYgKGl0ZW1JbmRleCA+IDApIHtcclxuICAgICAgICAgIHZhciBzdGFnZ2VyQ2xhc3NOYW1lID0gY2xhc3NOYW1lICsgJy1zdGFnZ2VyJztcclxuICAgICAgICAgIHZhciBzdGFnZ2VyQ2FjaGVLZXkgPSBjYWNoZUtleSArICcgJyArIHN0YWdnZXJDbGFzc05hbWU7XHJcbiAgICAgICAgICB2YXIgYXBwbHlDbGFzc2VzID0gIWxvb2t1cENhY2hlW3N0YWdnZXJDYWNoZUtleV07XHJcblxyXG4gICAgICAgICAgYXBwbHlDbGFzc2VzICYmIGVsZW1lbnQuYWRkQ2xhc3Moc3RhZ2dlckNsYXNzTmFtZSk7XHJcblxyXG4gICAgICAgICAgc3RhZ2dlciA9IGdldEVsZW1lbnRBbmltYXRpb25EZXRhaWxzKGVsZW1lbnQsIHN0YWdnZXJDYWNoZUtleSk7XHJcblxyXG4gICAgICAgICAgYXBwbHlDbGFzc2VzICYmIGVsZW1lbnQucmVtb3ZlQ2xhc3Moc3RhZ2dlckNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7XHJcblxyXG4gICAgICAgIHZhciBmb3JtZXJEYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKSB8fCB7fTtcclxuICAgICAgICB2YXIgdGltaW5ncyA9IGdldEVsZW1lbnRBbmltYXRpb25EZXRhaWxzKGVsZW1lbnQsIGV2ZW50Q2FjaGVLZXkpO1xyXG4gICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSB0aW1pbmdzLnRyYW5zaXRpb25EdXJhdGlvbjtcclxuICAgICAgICB2YXIgYW5pbWF0aW9uRHVyYXRpb24gPSB0aW1pbmdzLmFuaW1hdGlvbkR1cmF0aW9uO1xyXG5cclxuICAgICAgICBpZiAoc3RydWN0dXJhbCAmJiB0cmFuc2l0aW9uRHVyYXRpb24gPT09IDAgJiYgYW5pbWF0aW9uRHVyYXRpb24gPT09IDApIHtcclxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBibG9ja1RyYW5zaXRpb24gPSBzdHJ1Y3R1cmFsICYmIHRyYW5zaXRpb25EdXJhdGlvbiA+IDA7XHJcbiAgICAgICAgdmFyIGJsb2NrQW5pbWF0aW9uID0gYW5pbWF0aW9uRHVyYXRpb24gPiAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhZ2dlci5hbmltYXRpb25EZWxheSA+IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFnZ2VyLmFuaW1hdGlvbkR1cmF0aW9uID09PSAwO1xyXG5cclxuICAgICAgICB2YXIgY2xvc2VBbmltYXRpb25GbnMgPSBmb3JtZXJEYXRhLmNsb3NlQW5pbWF0aW9uRm5zIHx8IFtdO1xyXG4gICAgICAgIGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NTU19EQVRBX0tFWSwge1xyXG4gICAgICAgICAgc3RhZ2dlciA6IHN0YWdnZXIsXHJcbiAgICAgICAgICBjYWNoZUtleSA6IGV2ZW50Q2FjaGVLZXksXHJcbiAgICAgICAgICBydW5uaW5nIDogZm9ybWVyRGF0YS5ydW5uaW5nIHx8IDAsXHJcbiAgICAgICAgICBpdGVtSW5kZXggOiBpdGVtSW5kZXgsXHJcbiAgICAgICAgICBibG9ja1RyYW5zaXRpb24gOiBibG9ja1RyYW5zaXRpb24sXHJcbiAgICAgICAgICBjbG9zZUFuaW1hdGlvbkZucyA6IGNsb3NlQW5pbWF0aW9uRm5zXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBub2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAoYmxvY2tUcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICBibG9ja1RyYW5zaXRpb25zKG5vZGUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGJsb2NrQW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICBibG9ja0FuaW1hdGlvbnMobm9kZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYW5pbWF0ZVJ1bihhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBhY3RpdmVBbmltYXRpb25Db21wbGV0ZSkge1xyXG4gICAgICAgIHZhciBub2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBlbGVtZW50RGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NTU19EQVRBX0tFWSk7XHJcbiAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpLmluZGV4T2YoY2xhc3NOYW1lKSA9PSAtMSB8fCAhZWxlbWVudERhdGEpIHtcclxuICAgICAgICAgIGFjdGl2ZUFuaW1hdGlvbkNvbXBsZXRlKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZWxlbWVudERhdGEuYmxvY2tUcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICBibG9ja1RyYW5zaXRpb25zKG5vZGUsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhY3RpdmVDbGFzc05hbWUgPSAnJztcclxuICAgICAgICB2YXIgcGVuZGluZ0NsYXNzTmFtZSA9ICcnO1xyXG4gICAgICAgIGZvckVhY2goY2xhc3NOYW1lLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGtsYXNzLCBpKSB7XHJcbiAgICAgICAgICB2YXIgcHJlZml4ID0gKGkgPiAwID8gJyAnIDogJycpICsga2xhc3M7XHJcbiAgICAgICAgICBhY3RpdmVDbGFzc05hbWUgKz0gcHJlZml4ICsgJy1hY3RpdmUnO1xyXG4gICAgICAgICAgcGVuZGluZ0NsYXNzTmFtZSArPSBwcmVmaXggKyAnLXBlbmRpbmcnO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgc3R5bGUgPSAnJztcclxuICAgICAgICB2YXIgYXBwbGllZFN0eWxlcyA9IFtdO1xyXG4gICAgICAgIHZhciBpdGVtSW5kZXggPSBlbGVtZW50RGF0YS5pdGVtSW5kZXg7XHJcbiAgICAgICAgdmFyIHN0YWdnZXIgPSBlbGVtZW50RGF0YS5zdGFnZ2VyO1xyXG4gICAgICAgIHZhciBzdGFnZ2VyVGltZSA9IDA7XHJcbiAgICAgICAgaWYgKGl0ZW1JbmRleCA+IDApIHtcclxuICAgICAgICAgIHZhciB0cmFuc2l0aW9uU3RhZ2dlckRlbGF5ID0gMDtcclxuICAgICAgICAgIGlmIChzdGFnZ2VyLnRyYW5zaXRpb25EZWxheSA+IDAgJiYgc3RhZ2dlci50cmFuc2l0aW9uRHVyYXRpb24gPT09IDApIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvblN0YWdnZXJEZWxheSA9IHN0YWdnZXIudHJhbnNpdGlvbkRlbGF5ICogaXRlbUluZGV4O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBhbmltYXRpb25TdGFnZ2VyRGVsYXkgPSAwO1xyXG4gICAgICAgICAgaWYgKHN0YWdnZXIuYW5pbWF0aW9uRGVsYXkgPiAwICYmIHN0YWdnZXIuYW5pbWF0aW9uRHVyYXRpb24gPT09IDApIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uU3RhZ2dlckRlbGF5ID0gc3RhZ2dlci5hbmltYXRpb25EZWxheSAqIGl0ZW1JbmRleDtcclxuICAgICAgICAgICAgYXBwbGllZFN0eWxlcy5wdXNoKENTU19QUkVGSVggKyAnYW5pbWF0aW9uLXBsYXktc3RhdGUnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBzdGFnZ2VyVGltZSA9IE1hdGgucm91bmQoTWF0aC5tYXgodHJhbnNpdGlvblN0YWdnZXJEZWxheSwgYW5pbWF0aW9uU3RhZ2dlckRlbGF5KSAqIDEwMCkgLyAxMDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXN0YWdnZXJUaW1lKSB7XHJcbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKGFjdGl2ZUNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZXZlbnRDYWNoZUtleSA9IGVsZW1lbnREYXRhLmNhY2hlS2V5ICsgJyAnICsgYWN0aXZlQ2xhc3NOYW1lO1xyXG4gICAgICAgIHZhciB0aW1pbmdzID0gZ2V0RWxlbWVudEFuaW1hdGlvbkRldGFpbHMoZWxlbWVudCwgZXZlbnRDYWNoZUtleSk7XHJcbiAgICAgICAgdmFyIG1heER1cmF0aW9uID0gTWF0aC5tYXgodGltaW5ncy50cmFuc2l0aW9uRHVyYXRpb24sIHRpbWluZ3MuYW5pbWF0aW9uRHVyYXRpb24pO1xyXG4gICAgICAgIGlmIChtYXhEdXJhdGlvbiA9PT0gMCkge1xyXG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhhY3RpdmVDbGFzc05hbWUpO1xyXG4gICAgICAgICAgYW5pbWF0ZUNsb3NlKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICBhY3RpdmVBbmltYXRpb25Db21wbGV0ZSgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG1heERlbGF5ID0gTWF0aC5tYXgodGltaW5ncy50cmFuc2l0aW9uRGVsYXksIHRpbWluZ3MuYW5pbWF0aW9uRGVsYXkpO1xyXG4gICAgICAgIHZhciBtYXhEZWxheVRpbWUgPSBtYXhEZWxheSAqIE9ORV9TRUNPTkQ7XHJcblxyXG4gICAgICAgIGlmIChhcHBsaWVkU3R5bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIC8vdGhlIGVsZW1lbnQgYmVpbmcgYW5pbWF0ZWQgbWF5IHNvbWV0aW1lcyBjb250YWluIGNvbW1lbnQgbm9kZXMgaW5cclxuICAgICAgICAgIC8vdGhlIGpxTGl0ZSBvYmplY3QsIHNvIHdlJ3JlIHNhZmUgdG8gdXNlIGEgc2luZ2xlIHZhcmlhYmxlIHRvIGhvdXNlXHJcbiAgICAgICAgICAvL3RoZSBzdHlsZXMgc2luY2UgdGhlcmUgaXMgYWx3YXlzIG9ubHkgb25lIGVsZW1lbnQgYmVpbmcgYW5pbWF0ZWRcclxuICAgICAgICAgIHZhciBvbGRTdHlsZSA9IG5vZGUuZ2V0QXR0cmlidXRlKCdzdHlsZScpIHx8ICcnO1xyXG4gICAgICAgICAgaWYgKG9sZFN0eWxlLmNoYXJBdChvbGRTdHlsZS5sZW5ndGgtMSkgIT09ICc7Jykge1xyXG4gICAgICAgICAgICBvbGRTdHlsZSArPSAnOyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBvbGRTdHlsZSArICcgJyArIHN0eWxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHZhciBjc3MzQW5pbWF0aW9uRXZlbnRzID0gQU5JTUFUSU9ORU5EX0VWRU5UICsgJyAnICsgVFJBTlNJVElPTkVORF9FVkVOVDtcclxuICAgICAgICB2YXIgYW5pbWF0aW9uVGltZSAgICAgPSAobWF4RGVsYXkgKyBtYXhEdXJhdGlvbikgKiBDTE9TSU5HX1RJTUVfQlVGRkVSO1xyXG4gICAgICAgIHZhciB0b3RhbFRpbWUgICAgICAgICA9IChzdGFnZ2VyVGltZSArIGFuaW1hdGlvblRpbWUpICogT05FX1NFQ09ORDtcclxuXHJcbiAgICAgICAgdmFyIHN0YWdnZXJUaW1lb3V0O1xyXG4gICAgICAgIGlmIChzdGFnZ2VyVGltZSA+IDApIHtcclxuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MocGVuZGluZ0NsYXNzTmFtZSk7XHJcbiAgICAgICAgICBzdGFnZ2VyVGltZW91dCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzdGFnZ2VyVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoYWN0aXZlQ2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhwZW5kaW5nQ2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgaWYgKHRpbWluZ3MuYW5pbWF0aW9uRHVyYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgYmxvY2tBbmltYXRpb25zKG5vZGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgc3RhZ2dlclRpbWUgKiBPTkVfU0VDT05ELCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50Lm9uKGNzczNBbmltYXRpb25FdmVudHMsIG9uQW5pbWF0aW9uUHJvZ3Jlc3MpO1xyXG4gICAgICAgIGVsZW1lbnREYXRhLmNsb3NlQW5pbWF0aW9uRm5zLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBvbkVuZCgpO1xyXG4gICAgICAgICAgYWN0aXZlQW5pbWF0aW9uQ29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWxlbWVudERhdGEucnVubmluZysrO1xyXG4gICAgICAgIGFuaW1hdGlvbkNsb3NlSGFuZGxlcihlbGVtZW50LCB0b3RhbFRpbWUpO1xyXG4gICAgICAgIHJldHVybiBvbkVuZDtcclxuXHJcbiAgICAgICAgLy8gVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgY2FsbGVkIGJ5ICRhbmltYXRlIHNvXHJcbiAgICAgICAgLy8gdGhlcmUgaXMgbm8gbmVlZCB0byBhdHRhY2ggdGhpcyBpbnRlcm5hbGx5IHRvIHRoZVxyXG4gICAgICAgIC8vIHRpbWVvdXQgZG9uZSBtZXRob2QuXHJcbiAgICAgICAgZnVuY3Rpb24gb25FbmQoY2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICBlbGVtZW50Lm9mZihjc3MzQW5pbWF0aW9uRXZlbnRzLCBvbkFuaW1hdGlvblByb2dyZXNzKTtcclxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3NOYW1lKTtcclxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MocGVuZGluZ0NsYXNzTmFtZSk7XHJcbiAgICAgICAgICBpZiAoc3RhZ2dlclRpbWVvdXQpIHtcclxuICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHN0YWdnZXJUaW1lb3V0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFuaW1hdGVDbG9zZShlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgdmFyIG5vZGUgPSBleHRyYWN0RWxlbWVudE5vZGUoZWxlbWVudCk7XHJcbiAgICAgICAgICBmb3IgKHZhciBpIGluIGFwcGxpZWRTdHlsZXMpIHtcclxuICAgICAgICAgICAgbm9kZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShhcHBsaWVkU3R5bGVzW2ldKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uQW5pbWF0aW9uUHJvZ3Jlc3MoZXZlbnQpIHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgdmFyIGV2ID0gZXZlbnQub3JpZ2luYWxFdmVudCB8fCBldmVudDtcclxuICAgICAgICAgIHZhciB0aW1lU3RhbXAgPSBldi4kbWFudWFsVGltZVN0YW1wIHx8IGV2LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xyXG5cclxuICAgICAgICAgIC8qIEZpcmVmb3ggKG9yIHBvc3NpYmx5IGp1c3QgR2Vja28pIGxpa2VzIHRvIG5vdCByb3VuZCB2YWx1ZXMgdXBcclxuICAgICAgICAgICAqIHdoZW4gYSBtcyBtZWFzdXJlbWVudCBpcyB1c2VkIGZvciB0aGUgYW5pbWF0aW9uICovXHJcbiAgICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBwYXJzZUZsb2F0KGV2LmVsYXBzZWRUaW1lLnRvRml4ZWQoRUxBUFNFRF9USU1FX01BWF9ERUNJTUFMX1BMQUNFUykpO1xyXG5cclxuICAgICAgICAgIC8qICRtYW51YWxUaW1lU3RhbXAgaXMgYSBtb2NrZWQgdGltZVN0YW1wIHZhbHVlIHdoaWNoIGlzIHNldFxyXG4gICAgICAgICAgICogd2l0aGluIGJyb3dzZXJUcmlnZ2VyKCkuIFRoaXMgaXMgb25seSBoZXJlIHNvIHRoYXQgdGVzdHMgY2FuXHJcbiAgICAgICAgICAgKiBtb2NrIGFuaW1hdGlvbnMgcHJvcGVybHkuIFJlYWwgZXZlbnRzIGZhbGxiYWNrIHRvIGV2ZW50LnRpbWVTdGFtcCxcclxuICAgICAgICAgICAqIG9yLCBpZiB0aGV5IGRvbid0LCB0aGVuIGEgdGltZVN0YW1wIGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCBmb3IgdGhlbS5cclxuICAgICAgICAgICAqIFdlJ3JlIGNoZWNraW5nIHRvIHNlZSBpZiB0aGUgdGltZVN0YW1wIHN1cnBhc3NlcyB0aGUgZXhwZWN0ZWQgZGVsYXksXHJcbiAgICAgICAgICAgKiBidXQgd2UncmUgdXNpbmcgZWxhcHNlZFRpbWUgaW5zdGVhZCBvZiB0aGUgdGltZVN0YW1wIG9uIHRoZSAybmRcclxuICAgICAgICAgICAqIHByZS1jb25kaXRpb24gc2luY2UgYW5pbWF0aW9ucyBzb21ldGltZXMgY2xvc2Ugb2ZmIGVhcmx5ICovXHJcbiAgICAgICAgICBpZiAoTWF0aC5tYXgodGltZVN0YW1wIC0gc3RhcnRUaW1lLCAwKSA+PSBtYXhEZWxheVRpbWUgJiYgZWxhcHNlZFRpbWUgPj0gbWF4RHVyYXRpb24pIHtcclxuICAgICAgICAgICAgYWN0aXZlQW5pbWF0aW9uQ29tcGxldGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGJsb2NrVHJhbnNpdGlvbnMobm9kZSwgYm9vbCkge1xyXG4gICAgICAgIG5vZGUuc3R5bGVbVFJBTlNJVElPTl9QUk9QICsgUFJPUEVSVFlfS0VZXSA9IGJvb2wgPyAnbm9uZScgOiAnJztcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYmxvY2tBbmltYXRpb25zKG5vZGUsIGJvb2wpIHtcclxuICAgICAgICBub2RlLnN0eWxlW0FOSU1BVElPTl9QUk9QICsgQU5JTUFUSU9OX1BMQVlTVEFURV9LRVldID0gYm9vbCA/ICdwYXVzZWQnIDogJyc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGFuaW1hdGVCZWZvcmUoYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgY2FsY3VsYXRpb25EZWNvcmF0b3IpIHtcclxuICAgICAgICBpZiAoYW5pbWF0ZVNldHVwKGFuaW1hdGlvbkV2ZW50LCBlbGVtZW50LCBjbGFzc05hbWUsIGNhbGN1bGF0aW9uRGVjb3JhdG9yKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICBjYW5jZWxsZWQgJiYgYW5pbWF0ZUNsb3NlKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYW5pbWF0ZUFmdGVyKGFuaW1hdGlvbkV2ZW50LCBlbGVtZW50LCBjbGFzc05hbWUsIGFmdGVyQW5pbWF0aW9uQ29tcGxldGUpIHtcclxuICAgICAgICBpZiAoZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGFuaW1hdGVSdW4oYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgYWZ0ZXJBbmltYXRpb25Db21wbGV0ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFuaW1hdGVDbG9zZShlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgYWZ0ZXJBbmltYXRpb25Db21wbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYW5pbWF0ZShhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZSkge1xyXG4gICAgICAgIC8vSWYgdGhlIGFuaW1hdGVTZXR1cCBmdW5jdGlvbiBkb2Vzbid0IGJvdGhlciByZXR1cm5pbmcgYVxyXG4gICAgICAgIC8vY2FuY2VsbGF0aW9uIGZ1bmN0aW9uIHRoZW4gaXQgbWVhbnMgdGhhdCB0aGVyZSBpcyBubyBhbmltYXRpb25cclxuICAgICAgICAvL3RvIHBlcmZvcm0gYXQgYWxsXHJcbiAgICAgICAgdmFyIHByZVJlZmxvd0NhbmNlbGxhdGlvbiA9IGFuaW1hdGVCZWZvcmUoYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgaWYgKCFwcmVSZWZsb3dDYW5jZWxsYXRpb24pIHtcclxuICAgICAgICAgIGFuaW1hdGlvbkNvbXBsZXRlKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1RoZXJlIGFyZSB0d28gY2FuY2VsbGF0aW9uIGZ1bmN0aW9uczogb25lIGlzIGJlZm9yZSB0aGUgZmlyc3RcclxuICAgICAgICAvL3JlZmxvdyBhbmltYXRpb24gYW5kIHRoZSBzZWNvbmQgaXMgZHVyaW5nIHRoZSBhY3RpdmUgc3RhdGVcclxuICAgICAgICAvL2FuaW1hdGlvbi4gVGhlIGZpcnN0IGZ1bmN0aW9uIHdpbGwgdGFrZSBjYXJlIG9mIHJlbW92aW5nIHRoZVxyXG4gICAgICAgIC8vZGF0YSBmcm9tIHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgbm90IG1ha2UgdGhlIDJuZCBhbmltYXRpb25cclxuICAgICAgICAvL2hhcHBlbiBpbiB0aGUgZmlyc3QgcGxhY2VcclxuICAgICAgICB2YXIgY2FuY2VsID0gcHJlUmVmbG93Q2FuY2VsbGF0aW9uO1xyXG4gICAgICAgIGFmdGVyUmVmbG93KGVsZW1lbnQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy9vbmNlIHRoZSByZWZsb3cgaXMgY29tcGxldGUgdGhlbiB3ZSBwb2ludCBjYW5jZWwgdG9cclxuICAgICAgICAgIC8vdGhlIG5ldyBjYW5jZWxsYXRpb24gZnVuY3Rpb24gd2hpY2ggd2lsbCByZW1vdmUgYWxsIG9mIHRoZVxyXG4gICAgICAgICAgLy9hbmltYXRpb24gcHJvcGVydGllcyBmcm9tIHRoZSBhY3RpdmUgYW5pbWF0aW9uXHJcbiAgICAgICAgICBjYW5jZWwgPSBhbmltYXRlQWZ0ZXIoYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgYW5pbWF0aW9uQ29tcGxldGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAoY2FuY2VsIHx8IG5vb3ApKGNhbmNlbGxlZCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYW5pbWF0ZUNsb3NlKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtcclxuICAgICAgICB2YXIgZGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NTU19EQVRBX0tFWSk7XHJcbiAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgIGlmIChkYXRhLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgZGF0YS5ydW5uaW5nLS07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoIWRhdGEucnVubmluZyB8fCBkYXRhLnJ1bm5pbmcgPT09IDApIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVEYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgZW50ZXIgOiBmdW5jdGlvbihlbGVtZW50LCBhbmltYXRpb25Db21wbGV0ZWQpIHtcclxuICAgICAgICAgIHJldHVybiBhbmltYXRlKCdlbnRlcicsIGVsZW1lbnQsICduZy1lbnRlcicsIGFuaW1hdGlvbkNvbXBsZXRlZCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbGVhdmUgOiBmdW5jdGlvbihlbGVtZW50LCBhbmltYXRpb25Db21wbGV0ZWQpIHtcclxuICAgICAgICAgIHJldHVybiBhbmltYXRlKCdsZWF2ZScsIGVsZW1lbnQsICduZy1sZWF2ZScsIGFuaW1hdGlvbkNvbXBsZXRlZCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbW92ZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIGFuaW1hdGlvbkNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGFuaW1hdGUoJ21vdmUnLCBlbGVtZW50LCAnbmctbW92ZScsIGFuaW1hdGlvbkNvbXBsZXRlZCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYmVmb3JlU2V0Q2xhc3MgOiBmdW5jdGlvbihlbGVtZW50LCBhZGQsIHJlbW92ZSwgYW5pbWF0aW9uQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gc3VmZml4Q2xhc3NlcyhyZW1vdmUsICctcmVtb3ZlJykgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeENsYXNzZXMoYWRkLCAnLWFkZCcpO1xyXG4gICAgICAgICAgdmFyIGNhbmNlbGxhdGlvbk1ldGhvZCA9IGFuaW1hdGVCZWZvcmUoJ3NldENsYXNzJywgZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgIGlmIChjYW5jZWxsYXRpb25NZXRob2QpIHtcclxuICAgICAgICAgICAgYWZ0ZXJSZWZsb3coZWxlbWVudCwgYW5pbWF0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbmNlbGxhdGlvbk1ldGhvZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFuaW1hdGlvbkNvbXBsZXRlZCgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJlZm9yZUFkZENsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZWQpIHtcclxuICAgICAgICAgIHZhciBjYW5jZWxsYXRpb25NZXRob2QgPSBhbmltYXRlQmVmb3JlKCdhZGRDbGFzcycsIGVsZW1lbnQsIHN1ZmZpeENsYXNzZXMoY2xhc3NOYW1lLCAnLWFkZCcpKTtcclxuICAgICAgICAgIGlmIChjYW5jZWxsYXRpb25NZXRob2QpIHtcclxuICAgICAgICAgICAgYWZ0ZXJSZWZsb3coZWxlbWVudCwgYW5pbWF0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbmNlbGxhdGlvbk1ldGhvZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFuaW1hdGlvbkNvbXBsZXRlZCgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJlZm9yZVJlbW92ZUNsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZWQpIHtcclxuICAgICAgICAgIHZhciBjYW5jZWxsYXRpb25NZXRob2QgPSBhbmltYXRlQmVmb3JlKCdyZW1vdmVDbGFzcycsIGVsZW1lbnQsIHN1ZmZpeENsYXNzZXMoY2xhc3NOYW1lLCAnLXJlbW92ZScpKTtcclxuICAgICAgICAgIGlmIChjYW5jZWxsYXRpb25NZXRob2QpIHtcclxuICAgICAgICAgICAgYWZ0ZXJSZWZsb3coZWxlbWVudCwgYW5pbWF0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbmNlbGxhdGlvbk1ldGhvZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFuaW1hdGlvbkNvbXBsZXRlZCgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNldENsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgYWRkLCByZW1vdmUsIGFuaW1hdGlvbkNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgcmVtb3ZlID0gc3VmZml4Q2xhc3NlcyhyZW1vdmUsICctcmVtb3ZlJyk7XHJcbiAgICAgICAgICBhZGQgPSBzdWZmaXhDbGFzc2VzKGFkZCwgJy1hZGQnKTtcclxuICAgICAgICAgIHZhciBjbGFzc05hbWUgPSByZW1vdmUgKyAnICcgKyBhZGQ7XHJcbiAgICAgICAgICByZXR1cm4gYW5pbWF0ZUFmdGVyKCdzZXRDbGFzcycsIGVsZW1lbnQsIGNsYXNzTmFtZSwgYW5pbWF0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBhZGRDbGFzcyA6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgYW5pbWF0aW9uQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICByZXR1cm4gYW5pbWF0ZUFmdGVyKCdhZGRDbGFzcycsIGVsZW1lbnQsIHN1ZmZpeENsYXNzZXMoY2xhc3NOYW1lLCAnLWFkZCcpLCBhbmltYXRpb25Db21wbGV0ZWQpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlbW92ZUNsYXNzIDogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZWQpIHtcclxuICAgICAgICAgIHJldHVybiBhbmltYXRlQWZ0ZXIoJ3JlbW92ZUNsYXNzJywgZWxlbWVudCwgc3VmZml4Q2xhc3NlcyhjbGFzc05hbWUsICctcmVtb3ZlJyksIGFuaW1hdGlvbkNvbXBsZXRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gc3VmZml4Q2xhc3NlcyhjbGFzc2VzLCBzdWZmaXgpIHtcclxuICAgICAgICB2YXIgY2xhc3NOYW1lID0gJyc7XHJcbiAgICAgICAgY2xhc3NlcyA9IGlzQXJyYXkoY2xhc3NlcykgPyBjbGFzc2VzIDogY2xhc3Nlcy5zcGxpdCgvXFxzKy8pO1xyXG4gICAgICAgIGZvckVhY2goY2xhc3NlcywgZnVuY3Rpb24oa2xhc3MsIGkpIHtcclxuICAgICAgICAgIGlmIChrbGFzcyAmJiBrbGFzcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSAoaSA+IDAgPyAnICcgOiAnJykgKyBrbGFzcyArIHN1ZmZpeDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY2xhc3NOYW1lO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcbiAgfV0pO1xyXG5cclxuXHJcbn0pKHdpbmRvdywgd2luZG93LmFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogYW5ndWxhci1zdHJhcFxyXG4gKiBAdmVyc2lvbiB2Mi4xLjAgLSAyMDE0LTA5LTA1XHJcbiAqIEBsaW5rIGh0dHA6Ly9tZ2NyZWEuZ2l0aHViLmlvL2FuZ3VsYXItc3RyYXBcclxuICogQGF1dGhvciBPbGl2aWVyIExvdXZpZ25lcyAob2xpdmllckBtZy1jcmVhLmNvbSlcclxuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXHJcbiAqL1xyXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcbid1c2Ugc3RyaWN0JztcclxuLy8gU291cmNlOiBtb2R1bGUuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwJywgW1xyXG4gICdtZ2NyZWEubmdTdHJhcC5tb2RhbCcsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLmFzaWRlJyxcclxuICAnbWdjcmVhLm5nU3RyYXAuYWxlcnQnLFxyXG4gICdtZ2NyZWEubmdTdHJhcC5idXR0b24nLFxyXG4gICdtZ2NyZWEubmdTdHJhcC5zZWxlY3QnLFxyXG4gICdtZ2NyZWEubmdTdHJhcC5kYXRlcGlja2VyJyxcclxuICAnbWdjcmVhLm5nU3RyYXAudGltZXBpY2tlcicsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLm5hdmJhcicsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLnRvb2x0aXAnLFxyXG4gICdtZ2NyZWEubmdTdHJhcC5wb3BvdmVyJyxcclxuICAnbWdjcmVhLm5nU3RyYXAuZHJvcGRvd24nLFxyXG4gICdtZ2NyZWEubmdTdHJhcC50eXBlYWhlYWQnLFxyXG4gICdtZ2NyZWEubmdTdHJhcC5zY3JvbGxzcHknLFxyXG4gICdtZ2NyZWEubmdTdHJhcC5hZmZpeCcsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLnRhYicsXHJcbiAgJ21nY3JlYS5uZ1N0cmFwLmNvbGxhcHNlJ1xyXG5dKTtcclxuXHJcbi8vIFNvdXJjZTogYWZmaXguanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmFmZml4JywgWydtZ2NyZWEubmdTdHJhcC5oZWxwZXJzLmRpbWVuc2lvbnMnLCAnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kZWJvdW5jZSddKVxyXG5cclxuICAucHJvdmlkZXIoJyRhZmZpeCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIG9mZnNldFRvcDogJ2F1dG8nXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IFtcIiR3aW5kb3dcIiwgXCJkZWJvdW5jZVwiLCBcImRpbWVuc2lvbnNcIiwgZnVuY3Rpb24oJHdpbmRvdywgZGVib3VuY2UsIGRpbWVuc2lvbnMpIHtcclxuXHJcbiAgICAgIHZhciBib2R5RWwgPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdy5kb2N1bWVudC5ib2R5KTtcclxuICAgICAgdmFyIHdpbmRvd0VsID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gQWZmaXhGYWN0b3J5KGVsZW1lbnQsIGNvbmZpZykge1xyXG5cclxuICAgICAgICB2YXIgJGFmZml4ID0ge307XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiB2YXJzXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcbiAgICAgICAgdmFyIHRhcmdldEVsID0gb3B0aW9ucy50YXJnZXQ7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWwgcHJpdmF0ZSB2YXJzXHJcbiAgICAgICAgdmFyIHJlc2V0ID0gJ2FmZml4IGFmZml4LXRvcCBhZmZpeC1ib3R0b20nLFxyXG4gICAgICAgICAgICBpbml0aWFsQWZmaXhUb3AgPSAwLFxyXG4gICAgICAgICAgICBpbml0aWFsT2Zmc2V0VG9wID0gMCxcclxuICAgICAgICAgICAgb2Zmc2V0VG9wID0gMCxcclxuICAgICAgICAgICAgb2Zmc2V0Qm90dG9tID0gMCxcclxuICAgICAgICAgICAgYWZmaXhlZCA9IG51bGwsXHJcbiAgICAgICAgICAgIHVucGluID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50KCk7XHJcbiAgICAgICAgLy8gT3B0aW9uczogY3VzdG9tIHBhcmVudFxyXG4gICAgICAgIGlmIChvcHRpb25zLm9mZnNldFBhcmVudCkge1xyXG4gICAgICAgICAgaWYgKG9wdGlvbnMub2Zmc2V0UGFyZW50Lm1hdGNoKC9eXFxkKyQvKSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChvcHRpb25zLm9mZnNldFBhcmVudCAqIDEpIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyZW50ID0gYW5ndWxhci5lbGVtZW50KG9wdGlvbnMub2Zmc2V0UGFyZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRhZmZpeC5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgJGFmZml4LiRwYXJzZU9mZnNldHMoKTtcclxuICAgICAgICAgIGluaXRpYWxPZmZzZXRUb3AgPSBkaW1lbnNpb25zLm9mZnNldChlbGVtZW50WzBdKS50b3AgKyBpbml0aWFsQWZmaXhUb3A7XHJcblxyXG4gICAgICAgICAgLy8gQmluZCBldmVudHNcclxuICAgICAgICAgIHRhcmdldEVsLm9uKCdzY3JvbGwnLCAkYWZmaXguY2hlY2tQb3NpdGlvbik7XHJcbiAgICAgICAgICB0YXJnZXRFbC5vbignY2xpY2snLCAkYWZmaXguY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3ApO1xyXG4gICAgICAgICAgd2luZG93RWwub24oJ3Jlc2l6ZScsICRhZmZpeC4kZGVib3VuY2VkT25SZXNpemUpO1xyXG5cclxuICAgICAgICAgIC8vIEJvdGggb2YgdGhlc2UgY2hlY2tQb3NpdGlvbigpIGNhbGxzIGFyZSBuZWNlc3NhcnkgZm9yIHRoZSBjYXNlIHdoZXJlXHJcbiAgICAgICAgICAvLyB0aGUgdXNlciBoaXRzIHJlZnJlc2ggYWZ0ZXIgc2Nyb2xsaW5nIHRvIHRoZSBib3R0b20gb2YgdGhlIHBhZ2UuXHJcbiAgICAgICAgICAkYWZmaXguY2hlY2tQb3NpdGlvbigpO1xyXG4gICAgICAgICAgJGFmZml4LmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wKCk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRhZmZpeC5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgLy8gVW5iaW5kIGV2ZW50c1xyXG4gICAgICAgICAgdGFyZ2V0RWwub2ZmKCdzY3JvbGwnLCAkYWZmaXguY2hlY2tQb3NpdGlvbik7XHJcbiAgICAgICAgICB0YXJnZXRFbC5vZmYoJ2NsaWNrJywgJGFmZml4LmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wKTtcclxuICAgICAgICAgIHdpbmRvd0VsLm9mZigncmVzaXplJywgJGFmZml4LiRkZWJvdW5jZWRPblJlc2l6ZSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRhZmZpeC5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIHNldFRpbWVvdXQoJGFmZml4LmNoZWNrUG9zaXRpb24sIDEpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkYWZmaXguY2hlY2tQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gaWYgKCF0aGlzLiRlbGVtZW50LmlzKCc6dmlzaWJsZScpKSByZXR1cm5cclxuXHJcbiAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gZ2V0U2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICB2YXIgcG9zaXRpb24gPSBkaW1lbnNpb25zLm9mZnNldChlbGVtZW50WzBdKTtcclxuICAgICAgICAgIHZhciBlbGVtZW50SGVpZ2h0ID0gZGltZW5zaW9ucy5oZWlnaHQoZWxlbWVudFswXSk7XHJcblxyXG4gICAgICAgICAgLy8gR2V0IHJlcXVpcmVkIGFmZml4IGNsYXNzIGFjY29yZGluZyB0byBwb3NpdGlvblxyXG4gICAgICAgICAgdmFyIGFmZml4ID0gZ2V0UmVxdWlyZWRBZmZpeENsYXNzKHVucGluLCBwb3NpdGlvbiwgZWxlbWVudEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgLy8gRGlkIGFmZml4IHN0YXR1cyBjaGFuZ2VkIHRoaXMgbGFzdCBjaGVjaz9cclxuICAgICAgICAgIGlmKGFmZml4ZWQgPT09IGFmZml4KSByZXR1cm47XHJcbiAgICAgICAgICBhZmZpeGVkID0gYWZmaXg7XHJcblxyXG4gICAgICAgICAgLy8gQWRkIHByb3BlciBhZmZpeCBjbGFzc1xyXG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhyZXNldCkuYWRkQ2xhc3MoJ2FmZml4JyArICgoYWZmaXggIT09ICdtaWRkbGUnKSA/ICctJyArIGFmZml4IDogJycpKTtcclxuXHJcbiAgICAgICAgICBpZihhZmZpeCA9PT0gJ3RvcCcpIHtcclxuICAgICAgICAgICAgdW5waW4gPSBudWxsO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygncG9zaXRpb24nLCAob3B0aW9ucy5vZmZzZXRQYXJlbnQpID8gJycgOiAncmVsYXRpdmUnKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3MoJ3RvcCcsICcnKTtcclxuICAgICAgICAgIH0gZWxzZSBpZihhZmZpeCA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMub2Zmc2V0VW5waW4pIHtcclxuICAgICAgICAgICAgICB1bnBpbiA9IC0ob3B0aW9ucy5vZmZzZXRVbnBpbiAqIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB1bnBpbiB0aHJlc2hvbGQgd2hlbiBhZmZpeGVkIHRvIGJvdHRvbS5cclxuICAgICAgICAgICAgICAvLyBIb3BlZnVsbHkgdGhlIGJyb3dzZXIgc2Nyb2xscyBwaXhlbCBieSBwaXhlbC5cclxuICAgICAgICAgICAgICB1bnBpbiA9IHBvc2l0aW9uLnRvcCAtIHNjcm9sbFRvcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygncG9zaXRpb24nLCAob3B0aW9ucy5vZmZzZXRQYXJlbnQpID8gJycgOiAncmVsYXRpdmUnKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3MoJ3RvcCcsIChvcHRpb25zLm9mZnNldFBhcmVudCkgPyAnJyA6ICgoYm9keUVsWzBdLm9mZnNldEhlaWdodCAtIG9mZnNldEJvdHRvbSAtIGVsZW1lbnRIZWlnaHQgLSBpbml0aWFsT2Zmc2V0VG9wKSArICdweCcpKTtcclxuICAgICAgICAgIH0gZWxzZSB7IC8vIGFmZml4ID09PSAnbWlkZGxlJ1xyXG4gICAgICAgICAgICB1bnBpbiA9IG51bGw7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKCdwb3NpdGlvbicsICdmaXhlZCcpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygndG9wJywgaW5pdGlhbEFmZml4VG9wICsgJ3B4Jyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRhZmZpeC4kb25SZXNpemUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRhZmZpeC4kcGFyc2VPZmZzZXRzKCk7XHJcbiAgICAgICAgICAkYWZmaXguY2hlY2tQb3NpdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJGFmZml4LiRkZWJvdW5jZWRPblJlc2l6ZSA9IGRlYm91bmNlKCRhZmZpeC4kb25SZXNpemUsIDUwKTtcclxuXHJcbiAgICAgICAgJGFmZml4LiRwYXJzZU9mZnNldHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAvLyBSZXNldCBwb3NpdGlvbiB0byBjYWxjdWxhdGUgY29ycmVjdCBvZmZzZXRUb3BcclxuICAgICAgICAgIGVsZW1lbnQuY3NzKCdwb3NpdGlvbicsIChvcHRpb25zLm9mZnNldFBhcmVudCkgPyAnJyA6ICdyZWxhdGl2ZScpO1xyXG5cclxuICAgICAgICAgIGlmKG9wdGlvbnMub2Zmc2V0VG9wKSB7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMub2Zmc2V0VG9wID09PSAnYXV0bycpIHtcclxuICAgICAgICAgICAgICBvcHRpb25zLm9mZnNldFRvcCA9ICcrMCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYob3B0aW9ucy5vZmZzZXRUb3AubWF0Y2goL15bLStdXFxkKyQvKSkge1xyXG4gICAgICAgICAgICAgIGluaXRpYWxBZmZpeFRvcCA9IC0gb3B0aW9ucy5vZmZzZXRUb3AgKiAxO1xyXG4gICAgICAgICAgICAgIGlmKG9wdGlvbnMub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRUb3AgPSBkaW1lbnNpb25zLm9mZnNldChwYXJlbnRbMF0pLnRvcCArIChvcHRpb25zLm9mZnNldFRvcCAqIDEpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldFRvcCA9IGRpbWVuc2lvbnMub2Zmc2V0KGVsZW1lbnRbMF0pLnRvcCAtIGRpbWVuc2lvbnMuY3NzKGVsZW1lbnRbMF0sICdtYXJnaW5Ub3AnLCB0cnVlKSArIChvcHRpb25zLm9mZnNldFRvcCAqIDEpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBvZmZzZXRUb3AgPSBvcHRpb25zLm9mZnNldFRvcCAqIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZihvcHRpb25zLm9mZnNldEJvdHRvbSkge1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLm9mZnNldFBhcmVudCAmJiBvcHRpb25zLm9mZnNldEJvdHRvbS5tYXRjaCgvXlstK11cXGQrJC8pKSB7XHJcbiAgICAgICAgICAgICAgLy8gYWRkIDEgcGl4ZWwgZHVlIHRvIHJvdW5kaW5nIHByb2JsZW1zLi4uXHJcbiAgICAgICAgICAgICAgb2Zmc2V0Qm90dG9tID0gZ2V0U2Nyb2xsSGVpZ2h0KCkgLSAoZGltZW5zaW9ucy5vZmZzZXQocGFyZW50WzBdKS50b3AgKyBkaW1lbnNpb25zLmhlaWdodChwYXJlbnRbMF0pKSArIChvcHRpb25zLm9mZnNldEJvdHRvbSAqIDEpICsgMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBvZmZzZXRCb3R0b20gPSBvcHRpb25zLm9mZnNldEJvdHRvbSAqIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFJlcXVpcmVkQWZmaXhDbGFzcyh1bnBpbiwgcG9zaXRpb24sIGVsZW1lbnRIZWlnaHQpIHtcclxuXHJcbiAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gZ2V0U2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICB2YXIgc2Nyb2xsSGVpZ2h0ID0gZ2V0U2Nyb2xsSGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgaWYoc2Nyb2xsVG9wIDw9IG9mZnNldFRvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ3RvcCc7XHJcbiAgICAgICAgICB9IGVsc2UgaWYodW5waW4gIT09IG51bGwgJiYgKHNjcm9sbFRvcCArIHVucGluIDw9IHBvc2l0aW9uLnRvcCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdtaWRkbGUnO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKG9mZnNldEJvdHRvbSAhPT0gbnVsbCAmJiAocG9zaXRpb24udG9wICsgZWxlbWVudEhlaWdodCArIGluaXRpYWxBZmZpeFRvcCA+PSBzY3JvbGxIZWlnaHQgLSBvZmZzZXRCb3R0b20pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYm90dG9tJztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnbWlkZGxlJztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRTY3JvbGxUb3AoKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0RWxbMF0gPT09ICR3aW5kb3cgPyAkd2luZG93LnBhZ2VZT2Zmc2V0IDogdGFyZ2V0RWxbMF0uc2Nyb2xsVG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2Nyb2xsSGVpZ2h0KCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRhcmdldEVsWzBdID09PSAkd2luZG93ID8gJHdpbmRvdy5kb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCA6IHRhcmdldEVsWzBdLnNjcm9sbEhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRhZmZpeC5pbml0KCk7XHJcbiAgICAgICAgcmV0dXJuICRhZmZpeDtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBBZmZpeEZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzQWZmaXgnLCBbXCIkYWZmaXhcIiwgXCIkd2luZG93XCIsIGZ1bmN0aW9uKCRhZmZpeCwgJHdpbmRvdykge1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUFDJyxcclxuICAgICAgcmVxdWlyZTogJ14/YnNBZmZpeFRhcmdldCcsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBhZmZpeFRhcmdldCkge1xyXG5cclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGUsIG9mZnNldFRvcDogJ2F1dG8nLCB0YXJnZXQ6IGFmZml4VGFyZ2V0ID8gYWZmaXhUYXJnZXQuJGVsZW1lbnQgOiBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdyl9O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ29mZnNldFRvcCcsICdvZmZzZXRCb3R0b20nLCAnb2Zmc2V0UGFyZW50JywgJ29mZnNldFVucGluJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSkgb3B0aW9uc1trZXldID0gYXR0cltrZXldO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgYWZmaXggPSAkYWZmaXgoZWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgYWZmaXggJiYgYWZmaXguZGVzdHJveSgpO1xyXG4gICAgICAgICAgb3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICBhZmZpeCA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNBZmZpeFRhcmdldCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY29udHJvbGxlcjogW1wiJGVsZW1lbnRcIiwgZnVuY3Rpb24oJGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XHJcbiAgICAgIH1dXHJcbiAgICB9O1xyXG4gIH0pO1xyXG5cclxuLy8gU291cmNlOiBhc2lkZS5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuYXNpZGUnLCBbJ21nY3JlYS5uZ1N0cmFwLm1vZGFsJ10pXHJcblxyXG4gIC5wcm92aWRlcignJGFzaWRlJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tZmFkZS1hbmQtc2xpZGUtcmlnaHQnLFxyXG4gICAgICBwcmVmaXhDbGFzczogJ2FzaWRlJyxcclxuICAgICAgcGxhY2VtZW50OiAncmlnaHQnLFxyXG4gICAgICB0ZW1wbGF0ZTogJ2FzaWRlL2FzaWRlLnRwbC5odG1sJyxcclxuICAgICAgY29udGVudFRlbXBsYXRlOiBmYWxzZSxcclxuICAgICAgY29udGFpbmVyOiBmYWxzZSxcclxuICAgICAgZWxlbWVudDogbnVsbCxcclxuICAgICAgYmFja2Ryb3A6IHRydWUsXHJcbiAgICAgIGtleWJvYXJkOiB0cnVlLFxyXG4gICAgICBodG1sOiBmYWxzZSxcclxuICAgICAgc2hvdzogdHJ1ZVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkbW9kYWxcIiwgZnVuY3Rpb24oJG1vZGFsKSB7XHJcblxyXG4gICAgICBmdW5jdGlvbiBBc2lkZUZhY3RvcnkoY29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciAkYXNpZGUgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gQ29tbW9uIHZhcnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBkZWZhdWx0cywgY29uZmlnKTtcclxuXHJcbiAgICAgICAgJGFzaWRlID0gJG1vZGFsKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gJGFzaWRlO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIEFzaWRlRmFjdG9yeTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNBc2lkZScsIFtcIiR3aW5kb3dcIiwgXCIkc2NlXCIsIFwiJGFzaWRlXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRzY2UsICRhc2lkZSkge1xyXG5cclxuICAgIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCAkd2luZG93LnNldFRpbWVvdXQ7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHRyYW5zY2x1c2lvbikge1xyXG4gICAgICAgIC8vIERpcmVjdGl2ZSBvcHRpb25zXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7c2NvcGU6IHNjb3BlLCBlbGVtZW50OiBlbGVtZW50LCBzaG93OiBmYWxzZX07XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsndGVtcGxhdGUnLCAnY29udGVudFRlbXBsYXRlJywgJ3BsYWNlbWVudCcsICdiYWNrZHJvcCcsICdrZXlib2FyZCcsICdodG1sJywgJ2NvbnRhaW5lcicsICdhbmltYXRpb24nXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgZGF0YS1hdHRyc1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3RpdGxlJywgJ2NvbnRlbnQnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBhdHRyW2tleV0gJiYgYXR0ci4kb2JzZXJ2ZShrZXksIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBzY29wZVtrZXldID0gJHNjZS50cnVzdEFzSHRtbChuZXdWYWx1ZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBhbiBvYmplY3RcclxuICAgICAgICBhdHRyLmJzQXNpZGUgJiYgc2NvcGUuJHdhdGNoKGF0dHIuYnNBc2lkZSwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzT2JqZWN0KG5ld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChzY29wZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGFzaWRlXHJcbiAgICAgICAgdmFyIGFzaWRlID0gJGFzaWRlKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBUcmlnZ2VyXHJcbiAgICAgICAgZWxlbWVudC5vbihhdHRyLnRyaWdnZXIgfHwgJ2NsaWNrJywgYXNpZGUudG9nZ2xlKTtcclxuXHJcbiAgICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGFzaWRlKSBhc2lkZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICAgIGFzaWRlID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogYWxlcnQuanNcclxuLy8gQEJVRzogZm9sbG93aW5nIHNuaXBwZXQgd29uJ3QgY29tcGlsZSBjb3JyZWN0bHlcclxuLy8gQFRPRE86IHN1Ym1pdCBpc3N1ZSB0byBjb3JlXHJcbi8vICc8c3BhbiBuZy1pZj1cInRpdGxlXCI+PHN0cm9uZyBuZy1iaW5kPVwidGl0bGVcIj48L3N0cm9uZz4mbmJzcDs8L3NwYW4+PHNwYW4gbmctYmluZC1odG1sPVwiY29udGVudFwiPjwvc3Bhbj4nICtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5hbGVydCcsIFsnbWdjcmVhLm5nU3RyYXAubW9kYWwnXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckYWxlcnQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBhbmltYXRpb246ICdhbS1mYWRlJyxcclxuICAgICAgcHJlZml4Q2xhc3M6ICdhbGVydCcsXHJcbiAgICAgIHBsYWNlbWVudDogbnVsbCxcclxuICAgICAgdGVtcGxhdGU6ICdhbGVydC9hbGVydC50cGwuaHRtbCcsXHJcbiAgICAgIGNvbnRhaW5lcjogZmFsc2UsXHJcbiAgICAgIGVsZW1lbnQ6IG51bGwsXHJcbiAgICAgIGJhY2tkcm9wOiBmYWxzZSxcclxuICAgICAga2V5Ym9hcmQ6IHRydWUsXHJcbiAgICAgIHNob3c6IHRydWUsXHJcbiAgICAgIC8vIFNwZWNpZmljIG9wdGlvbnNcclxuICAgICAgZHVyYXRpb246IGZhbHNlLFxyXG4gICAgICB0eXBlOiBmYWxzZSxcclxuICAgICAgZGlzbWlzc2FibGU6IHRydWVcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJG1vZGFsXCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24oJG1vZGFsLCAkdGltZW91dCkge1xyXG5cclxuICAgICAgZnVuY3Rpb24gQWxlcnRGYWN0b3J5KGNvbmZpZykge1xyXG5cclxuICAgICAgICB2YXIgJGFsZXJ0ID0ge307XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiB2YXJzXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcblxyXG4gICAgICAgICRhbGVydCA9ICRtb2RhbChvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBzdHJpbmcgb3B0aW9ucyBbLyp0aXRsZSwgY29udGVudCwgKi8gdHlwZSwgZGlzbWlzc2FibGVdXHJcbiAgICAgICAgJGFsZXJ0LiRzY29wZS5kaXNtaXNzYWJsZSA9ICEhb3B0aW9ucy5kaXNtaXNzYWJsZTtcclxuICAgICAgICBpZihvcHRpb25zLnR5cGUpIHtcclxuICAgICAgICAgICRhbGVydC4kc2NvcGUudHlwZSA9IG9wdGlvbnMudHlwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgYXV0by1jbG9zZSBkdXJhdGlvblxyXG4gICAgICAgIHZhciBzaG93ID0gJGFsZXJ0LnNob3c7XHJcbiAgICAgICAgaWYob3B0aW9ucy5kdXJhdGlvbikge1xyXG4gICAgICAgICAgJGFsZXJ0LnNob3cgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2hvdygpO1xyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAkYWxlcnQuaGlkZSgpO1xyXG4gICAgICAgICAgICB9LCBvcHRpb25zLmR1cmF0aW9uICogMTAwMCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICRhbGVydDtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBBbGVydEZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzQWxlcnQnLCBbXCIkd2luZG93XCIsIFwiJHNjZVwiLCBcIiRhbGVydFwiLCBmdW5jdGlvbigkd2luZG93LCAkc2NlLCAkYWxlcnQpIHtcclxuXHJcbiAgICB2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgJHdpbmRvdy5zZXRUaW1lb3V0O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUFDJyxcclxuICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCB0cmFuc2NsdXNpb24pIHtcclxuXHJcbiAgICAgICAgLy8gRGlyZWN0aXZlIG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGUsIGVsZW1lbnQ6IGVsZW1lbnQsIHNob3c6IGZhbHNlfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWyd0ZW1wbGF0ZScsICdwbGFjZW1lbnQnLCAna2V5Ym9hcmQnLCAnaHRtbCcsICdjb250YWluZXInLCAnYW5pbWF0aW9uJywgJ2R1cmF0aW9uJywgJ2Rpc21pc3NhYmxlJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSkgb3B0aW9uc1trZXldID0gYXR0cltrZXldO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHNjb3BlIGFzIGRhdGEtYXR0cnNcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWyd0aXRsZScsICdjb250ZW50JywgJ3R5cGUnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBhdHRyW2tleV0gJiYgYXR0ci4kb2JzZXJ2ZShrZXksIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBzY29wZVtrZXldID0gJHNjZS50cnVzdEFzSHRtbChuZXdWYWx1ZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBhbiBvYmplY3RcclxuICAgICAgICBhdHRyLmJzQWxlcnQgJiYgc2NvcGUuJHdhdGNoKGF0dHIuYnNBbGVydCwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzT2JqZWN0KG5ld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChzY29wZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGFsZXJ0XHJcbiAgICAgICAgdmFyIGFsZXJ0ID0gJGFsZXJ0KG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBUcmlnZ2VyXHJcbiAgICAgICAgZWxlbWVudC5vbihhdHRyLnRyaWdnZXIgfHwgJ2NsaWNrJywgYWxlcnQudG9nZ2xlKTtcclxuXHJcbiAgICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGFsZXJ0KSBhbGVydC5kZXN0cm95KCk7XHJcbiAgICAgICAgICBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICAgIGFsZXJ0ID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogYnV0dG9uLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5idXR0b24nLCBbXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckYnV0dG9uJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYWN0aXZlQ2xhc3M6J2FjdGl2ZScsXHJcbiAgICAgIHRvZ2dsZUV2ZW50OidjbGljaydcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB7ZGVmYXVsdHM6IGRlZmF1bHRzfTtcclxuICAgIH07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzQ2hlY2tib3hHcm91cCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgY29tcGlsZTogZnVuY3Rpb24gcG9zdExpbmsoZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIGVsZW1lbnQuYXR0cignZGF0YS10b2dnbGUnLCAnYnV0dG9ucycpO1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cignbmctbW9kZWwnKTtcclxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBlbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24oY2hpbGQpIHtcclxuICAgICAgICAgIHZhciBjaGlsZEVsID0gYW5ndWxhci5lbGVtZW50KGNoaWxkKTtcclxuICAgICAgICAgIGNoaWxkRWwuYXR0cignYnMtY2hlY2tib3gnLCAnJyk7XHJcbiAgICAgICAgICBjaGlsZEVsLmF0dHIoJ25nLW1vZGVsJywgYXR0ci5uZ01vZGVsICsgJy4nICsgY2hpbGRFbC5hdHRyKCd2YWx1ZScpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzQ2hlY2tib3gnLCBbXCIkYnV0dG9uXCIsIFwiJCRyQUZcIiwgZnVuY3Rpb24oJGJ1dHRvbiwgJCRyQUYpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSAkYnV0dG9uLmRlZmF1bHRzO1xyXG4gICAgdmFyIGNvbnN0YW50VmFsdWVSZWdFeHAgPSAvXih0cnVlfGZhbHNlfFxcZCspJC87XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY29udHJvbGxlcikge1xyXG5cclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGRlZmF1bHRzO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IGxhYmVsID4gaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdXHJcbiAgICAgICAgdmFyIGlzSW5wdXQgPSBlbGVtZW50WzBdLm5vZGVOYW1lID09PSAnSU5QVVQnO1xyXG4gICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gaXNJbnB1dCA/IGVsZW1lbnQucGFyZW50KCkgOiBlbGVtZW50O1xyXG5cclxuICAgICAgICB2YXIgdHJ1ZVZhbHVlID0gYW5ndWxhci5pc0RlZmluZWQoYXR0ci50cnVlVmFsdWUpID8gYXR0ci50cnVlVmFsdWUgOiB0cnVlO1xyXG4gICAgICAgIGlmKGNvbnN0YW50VmFsdWVSZWdFeHAudGVzdChhdHRyLnRydWVWYWx1ZSkpIHtcclxuICAgICAgICAgIHRydWVWYWx1ZSA9IHNjb3BlLiRldmFsKGF0dHIudHJ1ZVZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZhbHNlVmFsdWUgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRyLmZhbHNlVmFsdWUpID8gYXR0ci5mYWxzZVZhbHVlIDogZmFsc2U7XHJcbiAgICAgICAgaWYoY29uc3RhbnRWYWx1ZVJlZ0V4cC50ZXN0KGF0dHIuZmFsc2VWYWx1ZSkpIHtcclxuICAgICAgICAgIGZhbHNlVmFsdWUgPSBzY29wZS4kZXZhbChhdHRyLmZhbHNlVmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGFyc2UgZXhvdGljIHZhbHVlc1xyXG4gICAgICAgIHZhciBoYXNFeG90aWNWYWx1ZXMgPSB0eXBlb2YgdHJ1ZVZhbHVlICE9PSAnYm9vbGVhbicgfHwgdHlwZW9mIGZhbHNlVmFsdWUgIT09ICdib29sZWFuJztcclxuICAgICAgICBpZihoYXNFeG90aWNWYWx1ZXMpIHtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCckcGFyc2VyJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCAndmlld1ZhbHVlJywgdmlld1ZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZpZXdWYWx1ZSA/IHRydWVWYWx1ZSA6IGZhbHNlVmFsdWU7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIC8vIEZpeCByZW5kZXJpbmcgZm9yIGV4b3RpYyB2YWx1ZXNcclxuICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nTW9kZWwsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbW9kZWwgLT4gdmlld1xyXG4gICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHJlbmRlcicsIGVsZW1lbnQuYXR0cignbmctbW9kZWwnKSwgJ2NvbnRyb2xsZXIuJG1vZGVsVmFsdWUnLCB0eXBlb2YgY29udHJvbGxlci4kbW9kZWxWYWx1ZSwgY29udHJvbGxlci4kbW9kZWxWYWx1ZSwgJ2NvbnRyb2xsZXIuJHZpZXdWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiR2aWV3VmFsdWUsIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICB2YXIgaXNBY3RpdmUgPSBhbmd1bGFyLmVxdWFscyhjb250cm9sbGVyLiRtb2RlbFZhbHVlLCB0cnVlVmFsdWUpO1xyXG4gICAgICAgICAgJCRyQUYoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmKGlzSW5wdXQpIGVsZW1lbnRbMF0uY2hlY2tlZCA9IGlzQWN0aXZlO1xyXG4gICAgICAgICAgICBhY3RpdmVFbGVtZW50LnRvZ2dsZUNsYXNzKG9wdGlvbnMuYWN0aXZlQ2xhc3MsIGlzQWN0aXZlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHZpZXcgLT4gbW9kZWxcclxuICAgICAgICBlbGVtZW50LmJpbmQob3B0aW9ucy50b2dnbGVFdmVudCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyFjbGljaycsIGVsZW1lbnQuYXR0cignbmctbW9kZWwnKSwgJ2NvbnRyb2xsZXIuJHZpZXdWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiR2aWV3VmFsdWUsIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSwgJ2NvbnRyb2xsZXIuJG1vZGVsVmFsdWUnLCB0eXBlb2YgY29udHJvbGxlci4kbW9kZWxWYWx1ZSwgY29udHJvbGxlci4kbW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmKCFpc0lucHV0KSB7XHJcbiAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKCFhY3RpdmVFbGVtZW50Lmhhc0NsYXNzKCdhY3RpdmUnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIWhhc0V4b3RpY1ZhbHVlcykge1xyXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICB9XSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNSYWRpb0dyb3VwJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICBjb21waWxlOiBmdW5jdGlvbiBwb3N0TGluayhlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgZWxlbWVudC5hdHRyKCdkYXRhLXRvZ2dsZScsICdidXR0b25zJyk7XHJcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyKCduZy1tb2RlbCcpO1xyXG4gICAgICAgIHZhciBjaGlsZHJlbiA9IGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdJyk7XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGNoaWxkKS5hdHRyKCdicy1yYWRpbycsICcnKTtcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChjaGlsZCkuYXR0cignbmctbW9kZWwnLCBhdHRyLm5nTW9kZWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNSYWRpbycsIFtcIiRidXR0b25cIiwgXCIkJHJBRlwiLCBmdW5jdGlvbigkYnV0dG9uLCAkJHJBRikge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9ICRidXR0b24uZGVmYXVsdHM7XHJcbiAgICB2YXIgY29uc3RhbnRWYWx1ZVJlZ0V4cCA9IC9eKHRydWV8ZmFsc2V8XFxkKykkLztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjb250cm9sbGVyKSB7XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0gZGVmYXVsdHM7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgYGxhYmVsID4gaW5wdXRbdHlwZT1cInJhZGlvXCJdYCBtYXJrdXBcclxuICAgICAgICB2YXIgaXNJbnB1dCA9IGVsZW1lbnRbMF0ubm9kZU5hbWUgPT09ICdJTlBVVCc7XHJcbiAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBpc0lucHV0ID8gZWxlbWVudC5wYXJlbnQoKSA6IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHZhciB2YWx1ZSA9IGNvbnN0YW50VmFsdWVSZWdFeHAudGVzdChhdHRyLnZhbHVlKSA/IHNjb3BlLiRldmFsKGF0dHIudmFsdWUpIDogYXR0ci52YWx1ZTtcclxuXHJcbiAgICAgICAgLy8gbW9kZWwgLT4gdmlld1xyXG4gICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHJlbmRlcicsIGVsZW1lbnQuYXR0cigndmFsdWUnKSwgJ2NvbnRyb2xsZXIuJG1vZGVsVmFsdWUnLCB0eXBlb2YgY29udHJvbGxlci4kbW9kZWxWYWx1ZSwgY29udHJvbGxlci4kbW9kZWxWYWx1ZSwgJ2NvbnRyb2xsZXIuJHZpZXdWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiR2aWV3VmFsdWUsIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICB2YXIgaXNBY3RpdmUgPSBhbmd1bGFyLmVxdWFscyhjb250cm9sbGVyLiRtb2RlbFZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAkJHJBRihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYoaXNJbnB1dCkgZWxlbWVudFswXS5jaGVja2VkID0gaXNBY3RpdmU7XHJcbiAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQudG9nZ2xlQ2xhc3Mob3B0aW9ucy5hY3RpdmVDbGFzcywgaXNBY3RpdmUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gdmlldyAtPiBtb2RlbFxyXG4gICAgICAgIGVsZW1lbnQuYmluZChvcHRpb25zLnRvZ2dsZUV2ZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybignIWNsaWNrJywgZWxlbWVudC5hdHRyKCd2YWx1ZScpLCAnY29udHJvbGxlci4kdmlld1ZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSwgY29udHJvbGxlci4kdmlld1ZhbHVlLCAnY29udHJvbGxlci4kbW9kZWxWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCBjb250cm9sbGVyLiRtb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kcmVuZGVyKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IGNvbGxhcHNlLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5jb2xsYXBzZScsIFtdKVxyXG5cclxuICAucHJvdmlkZXIoJyRjb2xsYXBzZScsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWNvbGxhcHNlJyxcclxuICAgICAgZGlzYWxsb3dUb2dnbGU6IGZhbHNlLFxyXG4gICAgICBhY3RpdmVDbGFzczogJ2luJ1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgY29udHJvbGxlciA9IHRoaXMuY29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAvLyBBdHRyaWJ1dGVzIG9wdGlvbnNcclxuICAgICAgc2VsZi4kb3B0aW9ucyA9IGFuZ3VsYXIuY29weShkZWZhdWx0cyk7XHJcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ2FuaW1hdGlvbicsICdkaXNhbGxvd1RvZ2dsZScsICdhY3RpdmVDbGFzcyddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnNba2V5XSkpIHNlbGYuJG9wdGlvbnNba2V5XSA9ICRhdHRyc1trZXldO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNlbGYuJHRvZ2dsZXMgPSBbXTtcclxuICAgICAgc2VsZi4kdGFyZ2V0cyA9IFtdO1xyXG5cclxuICAgICAgc2VsZi4kdmlld0NoYW5nZUxpc3RlbmVycyA9IFtdO1xyXG5cclxuICAgICAgc2VsZi4kcmVnaXN0ZXJUb2dnbGUgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgc2VsZi4kdG9nZ2xlcy5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICB9O1xyXG4gICAgICBzZWxmLiRyZWdpc3RlclRhcmdldCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICBzZWxmLiR0YXJnZXRzLnB1c2goZWxlbWVudCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzZWxmLiR0YXJnZXRzLiRhY3RpdmUgPSAwO1xyXG4gICAgICBzZWxmLiRzZXRBY3RpdmUgPSAkc2NvcGUuJHNldEFjdGl2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYoIXNlbGYuJG9wdGlvbnMuZGlzYWxsb3dUb2dnbGUpIHtcclxuICAgICAgICAgIHNlbGYuJHRhcmdldHMuJGFjdGl2ZSA9IHNlbGYuJHRhcmdldHMuJGFjdGl2ZSA9PT0gdmFsdWUgPyAtMSA6IHZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWxmLiR0YXJnZXRzLiRhY3RpdmUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi4kdmlld0NoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICBmbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciAkY29sbGFwc2UgPSB7fTtcclxuICAgICAgJGNvbGxhcHNlLmRlZmF1bHRzID0gZGVmYXVsdHM7XHJcbiAgICAgICRjb2xsYXBzZS5jb250cm9sbGVyID0gY29udHJvbGxlcjtcclxuICAgICAgcmV0dXJuICRjb2xsYXBzZTtcclxuICAgIH07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzQ29sbGFwc2UnLCBbXCIkd2luZG93XCIsIFwiJGFuaW1hdGVcIiwgXCIkY29sbGFwc2VcIiwgZnVuY3Rpb24oJHdpbmRvdywgJGFuaW1hdGUsICRjb2xsYXBzZSkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9ICRjb2xsYXBzZS5kZWZhdWx0cztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXF1aXJlOiBbJz9uZ01vZGVsJywgJ2JzQ29sbGFwc2UnXSxcclxuICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJywgJGNvbGxhcHNlLmNvbnRyb2xsZXJdLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzKSB7XHJcblxyXG4gICAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGNvbnRyb2xsZXJzWzBdO1xyXG4gICAgICAgIHZhciBic0NvbGxhcHNlQ3RybCA9IGNvbnRyb2xsZXJzWzFdO1xyXG5cclxuICAgICAgICBpZihuZ01vZGVsQ3RybCkge1xyXG5cclxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbW9kZWxWYWx1ZSBmb2xsb3dpbmdcclxuICAgICAgICAgIGJzQ29sbGFwc2VDdHJsLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoYnNDb2xsYXBzZUN0cmwuJHRhcmdldHMuJGFjdGl2ZSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBtb2RlbFZhbHVlIC0+ICRmb3JtYXR0ZXJzIC0+IHZpZXdWYWx1ZVxyXG4gICAgICAgICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihtb2RlbFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJGZvcm1hdHRlcihcIiVzXCIpOiBtb2RlbFZhbHVlPSVvICglbyknLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIG1vZGVsVmFsdWUsIHR5cGVvZiBtb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgYnNDb2xsYXBzZUN0cmwuJHNldEFjdGl2ZShtb2RlbFZhbHVlICogMSk7XHJcbiAgICAgICAgICAgIHJldHVybiBtb2RlbFZhbHVlO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKVxyXG5cclxuICAuZGlyZWN0aXZlKCdic0NvbGxhcHNlVG9nZ2xlJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVxdWlyZTogWydeP25nTW9kZWwnLCAnXmJzQ29sbGFwc2UnXSxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycykge1xyXG5cclxuICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjb250cm9sbGVyc1swXTtcclxuICAgICAgICB2YXIgYnNDb2xsYXBzZUN0cmwgPSBjb250cm9sbGVyc1sxXTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGJhc2UgYXR0clxyXG4gICAgICAgIGVsZW1lbnQuYXR0cignZGF0YS10b2dnbGUnLCAnY29sbGFwc2UnKTtcclxuXHJcbiAgICAgICAgLy8gUHVzaCBwYW5lIHRvIHBhcmVudCBic0NvbGxhcHNlIGNvbnRyb2xsZXJcclxuICAgICAgICBic0NvbGxhcHNlQ3RybC4kcmVnaXN0ZXJUb2dnbGUoZWxlbWVudCk7XHJcbiAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBpbmRleCA9IGF0dHJzLmJzQ29sbGFwc2VUb2dnbGUgfHwgYnNDb2xsYXBzZUN0cmwuJHRvZ2dsZXMuaW5kZXhPZihlbGVtZW50KTtcclxuICAgICAgICAgIGJzQ29sbGFwc2VDdHJsLiRzZXRBY3RpdmUoaW5kZXggKiAxKTtcclxuICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNDb2xsYXBzZVRhcmdldCcsIFtcIiRhbmltYXRlXCIsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVxdWlyZTogWydeP25nTW9kZWwnLCAnXmJzQ29sbGFwc2UnXSxcclxuICAgICAgLy8gc2NvcGU6IHRydWUsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMpIHtcclxuXHJcbiAgICAgICAgdmFyIG5nTW9kZWxDdHJsID0gY29udHJvbGxlcnNbMF07XHJcbiAgICAgICAgdmFyIGJzQ29sbGFwc2VDdHJsID0gY29udHJvbGxlcnNbMV07XHJcblxyXG4gICAgICAgIC8vIEFkZCBiYXNlIGNsYXNzXHJcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnY29sbGFwc2UnKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGFuaW1hdGlvbiBjbGFzc1xyXG4gICAgICAgIGlmKGJzQ29sbGFwc2VDdHJsLiRvcHRpb25zLmFuaW1hdGlvbikge1xyXG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhic0NvbGxhcHNlQ3RybC4kb3B0aW9ucy5hbmltYXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUHVzaCBwYW5lIHRvIHBhcmVudCBic0NvbGxhcHNlIGNvbnRyb2xsZXJcclxuICAgICAgICBic0NvbGxhcHNlQ3RybC4kcmVnaXN0ZXJUYXJnZXQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgICAgICAgIHZhciBpbmRleCA9IGJzQ29sbGFwc2VDdHJsLiR0YXJnZXRzLmluZGV4T2YoZWxlbWVudCk7XHJcbiAgICAgICAgICB2YXIgYWN0aXZlID0gYnNDb2xsYXBzZUN0cmwuJHRhcmdldHMuJGFjdGl2ZTtcclxuICAgICAgICAgICRhbmltYXRlW2luZGV4ID09PSBhY3RpdmUgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oZWxlbWVudCwgYnNDb2xsYXBzZUN0cmwuJG9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYnNDb2xsYXBzZUN0cmwuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlbmRlcigpO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxuLy8gU291cmNlOiBkYXRlcGlja2VyLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5kYXRlcGlja2VyJywgWydtZ2NyZWEubmdTdHJhcC5oZWxwZXJzLmRhdGVQYXJzZXInLCAnbWdjcmVhLm5nU3RyYXAudG9vbHRpcCddKVxyXG5cclxuICAucHJvdmlkZXIoJyRkYXRlcGlja2VyJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tZmFkZScsXHJcbiAgICAgIHByZWZpeENsYXNzOiAnZGF0ZXBpY2tlcicsXHJcbiAgICAgIHBsYWNlbWVudDogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgdGVtcGxhdGU6ICdkYXRlcGlja2VyL2RhdGVwaWNrZXIudHBsLmh0bWwnLFxyXG4gICAgICB0cmlnZ2VyOiAnZm9jdXMnLFxyXG4gICAgICBjb250YWluZXI6IGZhbHNlLFxyXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcclxuICAgICAgaHRtbDogZmFsc2UsXHJcbiAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAvLyBsYW5nOiAkbG9jYWxlLmlkLFxyXG4gICAgICB1c2VOYXRpdmU6IGZhbHNlLFxyXG4gICAgICBkYXRlVHlwZTogJ2RhdGUnLFxyXG4gICAgICBkYXRlRm9ybWF0OiAnc2hvcnREYXRlJyxcclxuICAgICAgbW9kZWxEYXRlRm9ybWF0OiBudWxsLFxyXG4gICAgICBkYXlGb3JtYXQ6ICdkZCcsXHJcbiAgICAgIHN0cmljdEZvcm1hdDogZmFsc2UsXHJcbiAgICAgIGF1dG9jbG9zZTogZmFsc2UsXHJcbiAgICAgIG1pbkRhdGU6IC1JbmZpbml0eSxcclxuICAgICAgbWF4RGF0ZTogK0luZmluaXR5LFxyXG4gICAgICBzdGFydFZpZXc6IDAsXHJcbiAgICAgIG1pblZpZXc6IDAsXHJcbiAgICAgIHN0YXJ0V2VlazogMCxcclxuICAgICAgZGF5c09mV2Vla0Rpc2FibGVkOiAnJyxcclxuICAgICAgaWNvbkxlZnQ6ICdnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdCcsXHJcbiAgICAgIGljb25SaWdodDogJ2dseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodCdcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHdpbmRvd1wiLCBcIiRkb2N1bWVudFwiLCBcIiRyb290U2NvcGVcIiwgXCIkc2NlXCIsIFwiJGxvY2FsZVwiLCBcImRhdGVGaWx0ZXJcIiwgXCJkYXRlcGlja2VyVmlld3NcIiwgXCIkdG9vbHRpcFwiLCBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQsICRyb290U2NvcGUsICRzY2UsICRsb2NhbGUsIGRhdGVGaWx0ZXIsIGRhdGVwaWNrZXJWaWV3cywgJHRvb2x0aXApIHtcclxuXHJcbiAgICAgIHZhciBib2R5RWwgPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdy5kb2N1bWVudC5ib2R5KTtcclxuICAgICAgdmFyIGlzTmF0aXZlID0gLyhpcChhfG8pZHxpcGhvbmV8YW5kcm9pZCkvaWcudGVzdCgkd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgICB2YXIgaXNUb3VjaCA9ICgnY3JlYXRlVG91Y2gnIGluICR3aW5kb3cuZG9jdW1lbnQpICYmIGlzTmF0aXZlO1xyXG4gICAgICBpZighZGVmYXVsdHMubGFuZykgZGVmYXVsdHMubGFuZyA9ICRsb2NhbGUuaWQ7XHJcblxyXG4gICAgICBmdW5jdGlvbiBEYXRlcGlja2VyRmFjdG9yeShlbGVtZW50LCBjb250cm9sbGVyLCBjb25maWcpIHtcclxuXHJcbiAgICAgICAgdmFyICRkYXRlcGlja2VyID0gJHRvb2x0aXAoZWxlbWVudCwgYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpKTtcclxuICAgICAgICB2YXIgcGFyZW50U2NvcGUgPSBjb25maWcuc2NvcGU7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAkZGF0ZXBpY2tlci4kb3B0aW9ucztcclxuICAgICAgICB2YXIgc2NvcGUgPSAkZGF0ZXBpY2tlci4kc2NvcGU7XHJcbiAgICAgICAgaWYob3B0aW9ucy5zdGFydFZpZXcpIG9wdGlvbnMuc3RhcnRWaWV3IC09IG9wdGlvbnMubWluVmlldztcclxuXHJcbiAgICAgICAgLy8gVmlldyB2YXJzXHJcblxyXG4gICAgICAgIHZhciBwaWNrZXJWaWV3cyA9IGRhdGVwaWNrZXJWaWV3cygkZGF0ZXBpY2tlcik7XHJcbiAgICAgICAgJGRhdGVwaWNrZXIuJHZpZXdzID0gcGlja2VyVmlld3Mudmlld3M7XHJcbiAgICAgICAgdmFyIHZpZXdEYXRlID0gcGlja2VyVmlld3Mudmlld0RhdGU7XHJcbiAgICAgICAgc2NvcGUuJG1vZGUgPSBvcHRpb25zLnN0YXJ0VmlldztcclxuICAgICAgICBzY29wZS4kaWNvbkxlZnQgPSBvcHRpb25zLmljb25MZWZ0O1xyXG4gICAgICAgIHNjb3BlLiRpY29uUmlnaHQgPSBvcHRpb25zLmljb25SaWdodDtcclxuICAgICAgICB2YXIgJHBpY2tlciA9ICRkYXRlcGlja2VyLiR2aWV3c1tzY29wZS4kbW9kZV07XHJcblxyXG4gICAgICAgIC8vIFNjb3BlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgc2NvcGUuJHNlbGVjdCA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgICRkYXRlcGlja2VyLnNlbGVjdChkYXRlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNjb3BlLiRzZWxlY3RQYW5lID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICRkYXRlcGlja2VyLiRzZWxlY3RQYW5lKHZhbHVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNjb3BlLiR0b2dnbGVNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkZGF0ZXBpY2tlci5zZXRNb2RlKChzY29wZS4kbW9kZSArIDEpICUgJGRhdGVwaWNrZXIuJHZpZXdzLmxlbmd0aCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgJGRhdGVwaWNrZXIudXBkYXRlID0gZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckZGF0ZXBpY2tlci51cGRhdGUoKSBuZXdWYWx1ZT0lbycsIGRhdGUpO1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RhdGUoZGF0ZSkgJiYgIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgICAkZGF0ZXBpY2tlci4kZGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgICAgICRwaWNrZXIudXBkYXRlLmNhbGwoJHBpY2tlciwgZGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBCdWlsZCBvbmx5IGlmIHByaXN0aW5lXHJcbiAgICAgICAgICAkZGF0ZXBpY2tlci4kYnVpbGQodHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGRhdGVwaWNrZXIudXBkYXRlRGlzYWJsZWREYXRlcyA9IGZ1bmN0aW9uKGRhdGVSYW5nZXMpIHtcclxuICAgICAgICAgIG9wdGlvbnMuZGlzYWJsZWREYXRlUmFuZ2VzID0gZGF0ZVJhbmdlcztcclxuICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSBzY29wZS5yb3dzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goc2NvcGUucm93c1tpXSwgJGRhdGVwaWNrZXIuJHNldERpc2FibGVkRWwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRkYXRlcGlja2VyLnNlbGVjdCA9IGZ1bmN0aW9uKGRhdGUsIGtlZXApIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJGRhdGVwaWNrZXIuc2VsZWN0JywgZGF0ZSwgc2NvcGUuJG1vZGUpO1xyXG4gICAgICAgICAgaWYoIWFuZ3VsYXIuaXNEYXRlKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSkpIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgaWYoIXNjb3BlLiRtb2RlIHx8IGtlZXApIHtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKGFuZ3VsYXIuY29weShkYXRlKSk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlcigpO1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLmF1dG9jbG9zZSAmJiAha2VlcCkge1xyXG4gICAgICAgICAgICAgICRkYXRlcGlja2VyLmhpZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHZpZXdEYXRlLCB7eWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLCBtb250aDogZGF0ZS5nZXRNb250aCgpLCBkYXRlOiBkYXRlLmdldERhdGUoKX0pO1xyXG4gICAgICAgICAgICAkZGF0ZXBpY2tlci5zZXRNb2RlKHNjb3BlLiRtb2RlIC0gMSk7XHJcbiAgICAgICAgICAgICRkYXRlcGlja2VyLiRidWlsZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRkYXRlcGlja2VyLnNldE1vZGUgPSBmdW5jdGlvbihtb2RlKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRkYXRlcGlja2VyLnNldE1vZGUnLCBtb2RlKTtcclxuICAgICAgICAgIHNjb3BlLiRtb2RlID0gbW9kZTtcclxuICAgICAgICAgICRwaWNrZXIgPSAkZGF0ZXBpY2tlci4kdmlld3Nbc2NvcGUuJG1vZGVdO1xyXG4gICAgICAgICAgJGRhdGVwaWNrZXIuJGJ1aWxkKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHJvdGVjdGVkIG1ldGhvZHNcclxuXHJcbiAgICAgICAgJGRhdGVwaWNrZXIuJGJ1aWxkID0gZnVuY3Rpb24ocHJpc3RpbmUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJGRhdGVwaWNrZXIuJGJ1aWxkKCkgdmlld0RhdGU9JW8nLCB2aWV3RGF0ZSk7XHJcbiAgICAgICAgICBpZihwcmlzdGluZSA9PT0gdHJ1ZSAmJiAkcGlja2VyLmJ1aWx0KSByZXR1cm47XHJcbiAgICAgICAgICBpZihwcmlzdGluZSA9PT0gZmFsc2UgJiYgISRwaWNrZXIuYnVpbHQpIHJldHVybjtcclxuICAgICAgICAgICRwaWNrZXIuYnVpbGQuY2FsbCgkcGlja2VyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkZGF0ZXBpY2tlci4kdXBkYXRlU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSBzY29wZS5yb3dzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goc2NvcGUucm93c1tpXSwgdXBkYXRlU2VsZWN0ZWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRkYXRlcGlja2VyLiRpc1NlbGVjdGVkID0gZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgcmV0dXJuICRwaWNrZXIuaXNTZWxlY3RlZChkYXRlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkZGF0ZXBpY2tlci4kc2V0RGlzYWJsZWRFbCA9IGZ1bmN0aW9uKGVsKSB7XHJcbiAgICAgICAgICBlbC5kaXNhYmxlZCA9ICRwaWNrZXIuaXNEaXNhYmxlZChlbC5kYXRlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkZGF0ZXBpY2tlci4kc2VsZWN0UGFuZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICB2YXIgc3RlcHMgPSAkcGlja2VyLnN0ZXBzO1xyXG4gICAgICAgICAgdmFyIHRhcmdldERhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQyh2aWV3RGF0ZS55ZWFyICsgKChzdGVwcy55ZWFyIHx8IDApICogdmFsdWUpLCB2aWV3RGF0ZS5tb250aCArICgoc3RlcHMubW9udGggfHwgMCkgKiB2YWx1ZSksIHZpZXdEYXRlLmRhdGUgKyAoKHN0ZXBzLmRheSB8fCAwKSAqIHZhbHVlKSkpO1xyXG4gICAgICAgICAgYW5ndWxhci5leHRlbmQodmlld0RhdGUsIHt5ZWFyOiB0YXJnZXREYXRlLmdldFVUQ0Z1bGxZZWFyKCksIG1vbnRoOiB0YXJnZXREYXRlLmdldFVUQ01vbnRoKCksIGRhdGU6IHRhcmdldERhdGUuZ2V0VVRDRGF0ZSgpfSk7XHJcbiAgICAgICAgICAkZGF0ZXBpY2tlci4kYnVpbGQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkZGF0ZXBpY2tlci4kb25Nb3VzZURvd24gPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIC8vIFByZXZlbnQgYmx1ciBvbiBtb3VzZWRvd24gb24gLmRyb3Bkb3duLW1lbnVcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgLy8gRW11bGF0ZSBjbGljayBmb3IgbW9iaWxlIGRldmljZXNcclxuICAgICAgICAgIGlmKGlzVG91Y2gpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldEVsID0gYW5ndWxhci5lbGVtZW50KGV2dC50YXJnZXQpO1xyXG4gICAgICAgICAgICBpZih0YXJnZXRFbFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnYnV0dG9uJykge1xyXG4gICAgICAgICAgICAgIHRhcmdldEVsID0gdGFyZ2V0RWwucGFyZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGFyZ2V0RWwudHJpZ2dlckhhbmRsZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGRhdGVwaWNrZXIuJG9uS2V5RG93biA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgaWYgKCEvKDM4fDM3fDM5fDQwfDEzKS8udGVzdChldnQua2V5Q29kZSkgfHwgZXZ0LnNoaWZ0S2V5IHx8IGV2dC5hbHRLZXkpIHJldHVybjtcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgIGlmKGV2dC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICBpZighc2NvcGUuJG1vZGUpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gJGRhdGVwaWNrZXIuaGlkZSh0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkgeyAkZGF0ZXBpY2tlci5zZXRNb2RlKHNjb3BlLiRtb2RlIC0gMSk7IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gTmF2aWdhdGUgd2l0aCBrZXlib2FyZFxyXG4gICAgICAgICAgJHBpY2tlci5vbktleURvd24oZXZ0KTtcclxuICAgICAgICAgIHBhcmVudFNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkKGVsKSB7XHJcbiAgICAgICAgICBlbC5zZWxlY3RlZCA9ICRkYXRlcGlja2VyLiRpc1NlbGVjdGVkKGVsLmRhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZm9jdXNFbGVtZW50KCkge1xyXG4gICAgICAgICAgZWxlbWVudFswXS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gT3ZlcnJpZGVzXHJcblxyXG4gICAgICAgIHZhciBfaW5pdCA9ICRkYXRlcGlja2VyLmluaXQ7XHJcbiAgICAgICAgJGRhdGVwaWNrZXIuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYoaXNOYXRpdmUgJiYgb3B0aW9ucy51c2VOYXRpdmUpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5wcm9wKCd0eXBlJywgJ2RhdGUnKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3MoJy13ZWJraXQtYXBwZWFyYW5jZScsICd0ZXh0ZmllbGQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGlzVG91Y2gpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5wcm9wKCd0eXBlJywgJ3RleHQnKTtcclxuICAgICAgICAgICAgZWxlbWVudC5hdHRyKCdyZWFkb25seScsICd0cnVlJyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgZm9jdXNFbGVtZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF9pbml0KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9kZXN0cm95ID0gJGRhdGVwaWNrZXIuZGVzdHJveTtcclxuICAgICAgICAkZGF0ZXBpY2tlci5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZihpc05hdGl2ZSAmJiBvcHRpb25zLnVzZU5hdGl2ZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9mZignY2xpY2snLCBmb2N1c0VsZW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgX2Rlc3Ryb3koKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX3Nob3cgPSAkZGF0ZXBpY2tlci5zaG93O1xyXG4gICAgICAgICRkYXRlcGlja2VyLnNob3cgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIF9zaG93KCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkZGF0ZXBpY2tlci4kZWxlbWVudC5vbihpc1RvdWNoID8gJ3RvdWNoc3RhcnQnIDogJ21vdXNlZG93bicsICRkYXRlcGlja2VyLiRvbk1vdXNlRG93bik7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMua2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgJGRhdGVwaWNrZXIuJG9uS2V5RG93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBfaGlkZSA9ICRkYXRlcGlja2VyLmhpZGU7XHJcbiAgICAgICAgJGRhdGVwaWNrZXIuaGlkZSA9IGZ1bmN0aW9uKGJsdXIpIHtcclxuICAgICAgICAgICRkYXRlcGlja2VyLiRlbGVtZW50Lm9mZihpc1RvdWNoID8gJ3RvdWNoc3RhcnQnIDogJ21vdXNlZG93bicsICRkYXRlcGlja2VyLiRvbk1vdXNlRG93bik7XHJcbiAgICAgICAgICBpZihvcHRpb25zLmtleWJvYXJkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub2ZmKCdrZXlkb3duJywgJGRhdGVwaWNrZXIuJG9uS2V5RG93bik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBfaGlkZShibHVyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gJGRhdGVwaWNrZXI7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBEYXRlcGlja2VyRmFjdG9yeS5kZWZhdWx0cyA9IGRlZmF1bHRzO1xyXG4gICAgICByZXR1cm4gRGF0ZXBpY2tlckZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzRGF0ZXBpY2tlcicsIFtcIiR3aW5kb3dcIiwgXCIkcGFyc2VcIiwgXCIkcVwiLCBcIiRsb2NhbGVcIiwgXCJkYXRlRmlsdGVyXCIsIFwiJGRhdGVwaWNrZXJcIiwgXCIkZGF0ZVBhcnNlclwiLCBcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uKCR3aW5kb3csICRwYXJzZSwgJHEsICRsb2NhbGUsIGRhdGVGaWx0ZXIsICRkYXRlcGlja2VyLCAkZGF0ZVBhcnNlciwgJHRpbWVvdXQpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSAkZGF0ZXBpY2tlci5kZWZhdWx0cztcclxuICAgIHZhciBpc05hdGl2ZSA9IC8oaXAoYXxvKWR8aXBob25lfGFuZHJvaWQpL2lnLnRlc3QoJHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgIHZhciBpc051bWVyaWMgPSBmdW5jdGlvbihuKSB7XHJcbiAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUFDJyxcclxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY29udHJvbGxlcikge1xyXG5cclxuICAgICAgICAvLyBEaXJlY3RpdmUgb3B0aW9uc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge3Njb3BlOiBzY29wZSwgY29udHJvbGxlcjogY29udHJvbGxlcn07XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsncGxhY2VtZW50JywgJ2NvbnRhaW5lcicsICdkZWxheScsICd0cmlnZ2VyJywgJ2tleWJvYXJkJywgJ2h0bWwnLCAnYW5pbWF0aW9uJywgJ3RlbXBsYXRlJywgJ2F1dG9jbG9zZScsICdkYXRlVHlwZScsICdkYXRlRm9ybWF0JywgJ21vZGVsRGF0ZUZvcm1hdCcsICdkYXlGb3JtYXQnLCAnc3RyaWN0Rm9ybWF0JywgJ3N0YXJ0V2VlaycsICdzdGFydERhdGUnLCAndXNlTmF0aXZlJywgJ2xhbmcnLCAnc3RhcnRWaWV3JywgJ21pblZpZXcnLCAnaWNvbkxlZnQnLCAnaWNvblJpZ2h0JywgJ2RheXNPZldlZWtEaXNhYmxlZCddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJba2V5XSkpIG9wdGlvbnNba2V5XSA9IGF0dHJba2V5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBiaW5kaW5nIHN1cHBvcnRcclxuICAgICAgICBhdHRyLmJzU2hvdyAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic1Nob3csIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgaWYoIWRhdGVwaWNrZXIgfHwgIWFuZ3VsYXIuaXNEZWZpbmVkKG5ld1ZhbHVlKSkgcmV0dXJuO1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc1N0cmluZyhuZXdWYWx1ZSkpIG5ld1ZhbHVlID0gISFuZXdWYWx1ZS5tYXRjaCgnLD8oZGF0ZXBpY2tlciksPycpO1xyXG4gICAgICAgICAgbmV3VmFsdWUgPT09IHRydWUgPyBkYXRlcGlja2VyLnNob3coKSA6IGRhdGVwaWNrZXIuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGRhdGVwaWNrZXJcclxuICAgICAgICB2YXIgZGF0ZXBpY2tlciA9ICRkYXRlcGlja2VyKGVsZW1lbnQsIGNvbnRyb2xsZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgIG9wdGlvbnMgPSBkYXRlcGlja2VyLiRvcHRpb25zO1xyXG4gICAgICAgIC8vIFNldCBleHBlY3RlZCBpT1MgZm9ybWF0XHJcbiAgICAgICAgaWYoaXNOYXRpdmUgJiYgb3B0aW9ucy51c2VOYXRpdmUpIG9wdGlvbnMuZGF0ZUZvcm1hdCA9ICd5eXl5LU1NLWRkJztcclxuXHJcbiAgICAgICAgLy8gT2JzZXJ2ZSBhdHRyaWJ1dGVzIGZvciBjaGFuZ2VzXHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsnbWluRGF0ZScsICdtYXhEYXRlJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCdhdHRyLiRvYnNlcnZlKCVzKScsIGtleSwgYXR0cltrZXldKTtcclxuICAgICAgICAgIGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJba2V5XSkgJiYgYXR0ci4kb2JzZXJ2ZShrZXksIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybignYXR0ci4kb2JzZXJ2ZSglcyk9JW8nLCBrZXksIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgaWYobmV3VmFsdWUgPT09ICd0b2RheScpIHtcclxuICAgICAgICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgIGRhdGVwaWNrZXIuJG9wdGlvbnNba2V5XSA9ICtuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpLCB0b2RheS5nZXREYXRlKCkgKyAoa2V5ID09PSAnbWF4RGF0ZScgPyAxIDogMCksIDAsIDAsIDAsIChrZXkgPT09ICdtaW5EYXRlJyA/IDAgOiAtMSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYoYW5ndWxhci5pc1N0cmluZyhuZXdWYWx1ZSkgJiYgbmV3VmFsdWUubWF0Y2goL15cIi4rXCIkLykpIHsgLy8gU3VwcG9ydCB7eyBkYXRlT2JqIH19XHJcbiAgICAgICAgICAgICAgZGF0ZXBpY2tlci4kb3B0aW9uc1trZXldID0gK25ldyBEYXRlKG5ld1ZhbHVlLnN1YnN0cigxLCBuZXdWYWx1ZS5sZW5ndGggLSAyKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihpc051bWVyaWMobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgZGF0ZXBpY2tlci4kb3B0aW9uc1trZXldID0gK25ldyBEYXRlKHBhcnNlSW50KG5ld1ZhbHVlLCAxMCkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNTdHJpbmcobmV3VmFsdWUpICYmIDAgPT09IG5ld1ZhbHVlLmxlbmd0aCkgeyAvLyBSZXNldCBkYXRlXHJcbiAgICAgICAgICAgICAgZGF0ZXBpY2tlci4kb3B0aW9uc1trZXldID0ga2V5ID09PSAnbWF4RGF0ZScgPyArSW5maW5pdHkgOiAtSW5maW5pdHk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZGF0ZXBpY2tlci4kb3B0aW9uc1trZXldID0gK25ldyBEYXRlKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBCdWlsZCBvbmx5IGlmIGRpcnR5XHJcbiAgICAgICAgICAgICFpc05hTihkYXRlcGlja2VyLiRvcHRpb25zW2tleV0pICYmIGRhdGVwaWNrZXIuJGJ1aWxkKGZhbHNlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBXYXRjaCBtb2RlbCBmb3IgY2hhbmdlc1xyXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nTW9kZWwsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgZGF0ZXBpY2tlci51cGRhdGUoY29udHJvbGxlci4kZGF0ZVZhbHVlKTtcclxuICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gTm9ybWFsaXplIHVuZGVmaW5lZC9udWxsL2VtcHR5IGFycmF5LFxyXG4gICAgICAgIC8vIHNvIHRoYXQgd2UgZG9uJ3QgdHJlYXQgY2hhbmdpbmcgZnJvbSB1bmRlZmluZWQtPm51bGwgYXMgYSBjaGFuZ2UuXHJcbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplRGF0ZVJhbmdlcyhyYW5nZXMpIHtcclxuICAgICAgICAgIGlmICghcmFuZ2VzIHx8ICFyYW5nZXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIHJldHVybiByYW5nZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoYXR0ci5kaXNhYmxlZERhdGVzKSkge1xyXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIuZGlzYWJsZWREYXRlcywgZnVuY3Rpb24oZGlzYWJsZWRSYW5nZXMsIHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICAgICAgZGlzYWJsZWRSYW5nZXMgPSBub3JtYWxpemVEYXRlUmFuZ2VzKGRpc2FibGVkUmFuZ2VzKTtcclxuICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IG5vcm1hbGl6ZURhdGVSYW5nZXMocHJldmlvdXNWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGlzYWJsZWRSYW5nZXMgIT09IHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICAgICAgICBkYXRlcGlja2VyLnVwZGF0ZURpc2FibGVkRGF0ZXMoZGlzYWJsZWRSYW5nZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkYXRlUGFyc2VyID0gJGRhdGVQYXJzZXIoe2Zvcm1hdDogb3B0aW9ucy5kYXRlRm9ybWF0LCBsYW5nOiBvcHRpb25zLmxhbmcsIHN0cmljdDogb3B0aW9ucy5zdHJpY3RGb3JtYXR9KTtcclxuXHJcbiAgICAgICAgLy8gdmlld1ZhbHVlIC0+ICRwYXJzZXJzIC0+IG1vZGVsVmFsdWVcclxuICAgICAgICBjb250cm9sbGVyLiRwYXJzZXJzLnVuc2hpZnQoZnVuY3Rpb24odmlld1ZhbHVlKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRwYXJzZXIoXCIlc1wiKTogdmlld1ZhbHVlPSVvJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCB2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgLy8gTnVsbCB2YWx1ZXMgc2hvdWxkIGNvcnJlY3RseSByZXNldCB0aGUgbW9kZWwgdmFsdWUgJiB2YWxpZGl0eVxyXG4gICAgICAgICAgaWYoIXZpZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgnZGF0ZScsIHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgcGFyc2VkRGF0ZSA9IGRhdGVQYXJzZXIucGFyc2Uodmlld1ZhbHVlLCBjb250cm9sbGVyLiRkYXRlVmFsdWUpO1xyXG4gICAgICAgICAgaWYoIXBhcnNlZERhdGUgfHwgaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZhbGlkaXR5KCdkYXRlJywgZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgaXNNaW5WYWxpZCA9IGlzTmFOKGRhdGVwaWNrZXIuJG9wdGlvbnMubWluRGF0ZSkgfHwgcGFyc2VkRGF0ZS5nZXRUaW1lKCkgPj0gZGF0ZXBpY2tlci4kb3B0aW9ucy5taW5EYXRlO1xyXG4gICAgICAgICAgICB2YXIgaXNNYXhWYWxpZCA9IGlzTmFOKGRhdGVwaWNrZXIuJG9wdGlvbnMubWF4RGF0ZSkgfHwgcGFyc2VkRGF0ZS5nZXRUaW1lKCkgPD0gZGF0ZXBpY2tlci4kb3B0aW9ucy5tYXhEYXRlO1xyXG4gICAgICAgICAgICB2YXIgaXNWYWxpZCA9IGlzTWluVmFsaWQgJiYgaXNNYXhWYWxpZDtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kc2V0VmFsaWRpdHkoJ2RhdGUnLCBpc1ZhbGlkKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kc2V0VmFsaWRpdHkoJ21pbicsIGlzTWluVmFsaWQpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgnbWF4JywgaXNNYXhWYWxpZCk7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSBtb2RlbCB3aGVuIHdlIGhhdmUgYSB2YWxpZCBkYXRlXHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSA9IHBhcnNlZERhdGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihvcHRpb25zLmRhdGVUeXBlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZUZpbHRlcihwYXJzZWREYXRlLCBvcHRpb25zLm1vZGVsRGF0ZUZvcm1hdCB8fCBvcHRpb25zLmRhdGVGb3JtYXQpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKG9wdGlvbnMuZGF0ZVR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLiRkYXRlVmFsdWUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKG9wdGlvbnMuZGF0ZVR5cGUgPT09ICdpc28nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLiRkYXRlVmFsdWUudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShjb250cm9sbGVyLiRkYXRlVmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBtb2RlbFZhbHVlIC0+ICRmb3JtYXR0ZXJzIC0+IHZpZXdWYWx1ZVxyXG4gICAgICAgIGNvbnRyb2xsZXIuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihtb2RlbFZhbHVlKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRmb3JtYXR0ZXIoXCIlc1wiKTogbW9kZWxWYWx1ZT0lbyAoJW8pJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCBtb2RlbFZhbHVlLCB0eXBlb2YgbW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgICB2YXIgZGF0ZTtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobW9kZWxWYWx1ZSkgfHwgbW9kZWxWYWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBkYXRlID0gTmFOO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGFuZ3VsYXIuaXNEYXRlKG1vZGVsVmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSBtb2RlbFZhbHVlO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKG9wdGlvbnMuZGF0ZVR5cGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSBkYXRlUGFyc2VyLnBhcnNlKG1vZGVsVmFsdWUsIG51bGwsIG9wdGlvbnMubW9kZWxEYXRlRm9ybWF0KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShtb2RlbFZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIFNldHVwIGRlZmF1bHQgdmFsdWU/XHJcbiAgICAgICAgICAvLyBpZihpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICAgIC8vICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgIC8vICAgZGF0ZSA9IG5ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksIHRvZGF5LmdldE1vbnRoKCksIHRvZGF5LmdldERhdGUoKSwgMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRkYXRlVmFsdWUgPSBkYXRlO1xyXG4gICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gdmlld1ZhbHVlIC0+IGVsZW1lbnRcclxuICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHJlbmRlcihcIiVzXCIpOiB2aWV3VmFsdWU9JW8nLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICBlbGVtZW50LnZhbCghY29udHJvbGxlci4kZGF0ZVZhbHVlIHx8IGlzTmFOKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS5nZXRUaW1lKCkpID8gJycgOiBkYXRlRmlsdGVyKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSwgb3B0aW9ucy5kYXRlRm9ybWF0KSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYoZGF0ZXBpY2tlcikgZGF0ZXBpY2tlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICAgIGRhdGVwaWNrZXIgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pXHJcblxyXG4gIC5wcm92aWRlcignZGF0ZXBpY2tlclZpZXdzJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgZGF5Rm9ybWF0OiAnZGQnLFxyXG4gICAgICBkYXlTcGxpdDogN1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTcGxpdCBhcnJheSBpbnRvIHNtYWxsZXIgYXJyYXlzXHJcbiAgICBmdW5jdGlvbiBzcGxpdChhcnIsIHNpemUpIHtcclxuICAgICAgdmFyIGFycmF5cyA9IFtdO1xyXG4gICAgICB3aGlsZShhcnIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGFycmF5cy5wdXNoKGFyci5zcGxpY2UoMCwgc2l6ZSkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhcnJheXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW9kdWx1cyBvcGVyYXRvclxyXG4gICAgZnVuY3Rpb24gbW9kKG4sIG0pIHtcclxuICAgICAgcmV0dXJuICgobiAlIG0pICsgbSkgJSBtO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJGdldCA9IFtcIiRsb2NhbGVcIiwgXCIkc2NlXCIsIFwiZGF0ZUZpbHRlclwiLCBmdW5jdGlvbigkbG9jYWxlLCAkc2NlLCBkYXRlRmlsdGVyKSB7XHJcblxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24ocGlja2VyKSB7XHJcblxyXG4gICAgICAgIHZhciBzY29wZSA9IHBpY2tlci4kc2NvcGU7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBwaWNrZXIuJG9wdGlvbnM7XHJcblxyXG4gICAgICAgIHZhciB3ZWVrRGF5c01pbiA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWTtcclxuICAgICAgICB2YXIgd2Vla0RheXNMYWJlbHMgPSB3ZWVrRGF5c01pbi5zbGljZShvcHRpb25zLnN0YXJ0V2VlaykuY29uY2F0KHdlZWtEYXlzTWluLnNsaWNlKDAsIG9wdGlvbnMuc3RhcnRXZWVrKSk7XHJcbiAgICAgICAgdmFyIHdlZWtEYXlzTGFiZWxzSHRtbCA9ICRzY2UudHJ1c3RBc0h0bWwoJzx0aCBjbGFzcz1cImRvdyB0ZXh0LWNlbnRlclwiPicgKyB3ZWVrRGF5c0xhYmVscy5qb2luKCc8L3RoPjx0aCBjbGFzcz1cImRvdyB0ZXh0LWNlbnRlclwiPicpICsgJzwvdGg+Jyk7XHJcblxyXG4gICAgICAgIHZhciBzdGFydERhdGUgPSBwaWNrZXIuJGRhdGUgfHwgKG9wdGlvbnMuc3RhcnREYXRlID8gbmV3IERhdGUob3B0aW9ucy5zdGFydERhdGUpIDogbmV3IERhdGUoKSk7XHJcbiAgICAgICAgdmFyIHZpZXdEYXRlID0ge3llYXI6IHN0YXJ0RGF0ZS5nZXRGdWxsWWVhcigpLCBtb250aDogc3RhcnREYXRlLmdldE1vbnRoKCksIGRhdGU6IHN0YXJ0RGF0ZS5nZXREYXRlKCl9O1xyXG4gICAgICAgIHZhciB0aW1lem9uZU9mZnNldCA9IHN0YXJ0RGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNmU0O1xyXG5cclxuICAgICAgICB2YXIgdmlld3MgPSBbe1xyXG4gICAgICAgICAgICBmb3JtYXQ6IG9wdGlvbnMuZGF5Rm9ybWF0LFxyXG4gICAgICAgICAgICBzcGxpdDogNyxcclxuICAgICAgICAgICAgc3RlcHM6IHsgbW9udGg6IDEgfSxcclxuICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbihkYXRlLCBmb3JjZSkge1xyXG4gICAgICAgICAgICAgIGlmKCF0aGlzLmJ1aWx0IHx8IGZvcmNlIHx8IGRhdGUuZ2V0RnVsbFllYXIoKSAhPT0gdmlld0RhdGUueWVhciB8fCBkYXRlLmdldE1vbnRoKCkgIT09IHZpZXdEYXRlLm1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge3llYXI6IHBpY2tlci4kZGF0ZS5nZXRGdWxsWWVhcigpLCBtb250aDogcGlja2VyLiRkYXRlLmdldE1vbnRoKCksIGRhdGU6IHBpY2tlci4kZGF0ZS5nZXREYXRlKCl9KTtcclxuICAgICAgICAgICAgICAgIHBpY2tlci4kYnVpbGQoKTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYoZGF0ZS5nZXREYXRlKCkgIT09IHZpZXdEYXRlLmRhdGUpIHtcclxuICAgICAgICAgICAgICAgIHZpZXdEYXRlLmRhdGUgPSBwaWNrZXIuJGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcGlja2VyLiR1cGRhdGVTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHZhciBmaXJzdERheU9mTW9udGggPSBuZXcgRGF0ZSh2aWV3RGF0ZS55ZWFyLCB2aWV3RGF0ZS5tb250aCwgMSksIGZpcnN0RGF5T2ZNb250aE9mZnNldCA9IGZpcnN0RGF5T2ZNb250aC5nZXRUaW1lem9uZU9mZnNldCgpO1xyXG4gICAgICAgICAgICAgIHZhciBmaXJzdERhdGUgPSBuZXcgRGF0ZSgrZmlyc3REYXlPZk1vbnRoIC0gbW9kKGZpcnN0RGF5T2ZNb250aC5nZXREYXkoKSAtIG9wdGlvbnMuc3RhcnRXZWVrLCA3KSAqIDg2NGU1KSwgZmlyc3REYXRlT2Zmc2V0ID0gZmlyc3REYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XHJcbiAgICAgICAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAvLyBIYW5kbGUgZGF5bGlnaHQgdGltZSBzd2l0Y2hcclxuICAgICAgICAgICAgICBpZihmaXJzdERhdGVPZmZzZXQgIT09IGZpcnN0RGF5T2ZNb250aE9mZnNldCkgZmlyc3REYXRlID0gbmV3IERhdGUoK2ZpcnN0RGF0ZSArIChmaXJzdERhdGVPZmZzZXQgLSBmaXJzdERheU9mTW9udGhPZmZzZXQpICogNjBlMyk7XHJcbiAgICAgICAgICAgICAgdmFyIGRheXMgPSBbXSwgZGF5O1xyXG4gICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0MjsgaSsrKSB7IC8vIDwgNyAqIDZcclxuICAgICAgICAgICAgICAgIGRheSA9IG5ldyBEYXRlKGZpcnN0RGF0ZS5nZXRGdWxsWWVhcigpLCBmaXJzdERhdGUuZ2V0TW9udGgoKSwgZmlyc3REYXRlLmdldERhdGUoKSArIGkpO1xyXG4gICAgICAgICAgICAgICAgZGF5cy5wdXNoKHtkYXRlOiBkYXksIGlzVG9kYXk6IGRheS50b0RhdGVTdHJpbmcoKSA9PT0gdG9kYXksIGxhYmVsOiBkYXRlRmlsdGVyKGRheSwgdGhpcy5mb3JtYXQpLCBzZWxlY3RlZDogcGlja2VyLiRkYXRlICYmIHRoaXMuaXNTZWxlY3RlZChkYXkpLCBtdXRlZDogZGF5LmdldE1vbnRoKCkgIT09IHZpZXdEYXRlLm1vbnRoLCBkaXNhYmxlZDogdGhpcy5pc0Rpc2FibGVkKGRheSl9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgc2NvcGUudGl0bGUgPSBkYXRlRmlsdGVyKGZpcnN0RGF5T2ZNb250aCwgJ01NTU0geXl5eScpO1xyXG4gICAgICAgICAgICAgIHNjb3BlLnNob3dMYWJlbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIHNjb3BlLmxhYmVscyA9IHdlZWtEYXlzTGFiZWxzSHRtbDtcclxuICAgICAgICAgICAgICBzY29wZS5yb3dzID0gc3BsaXQoZGF5cywgdGhpcy5zcGxpdCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5idWlsdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzU2VsZWN0ZWQ6IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcGlja2VyLiRkYXRlICYmIGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gcGlja2VyLiRkYXRlLmdldEZ1bGxZZWFyKCkgJiYgZGF0ZS5nZXRNb250aCgpID09PSBwaWNrZXIuJGRhdGUuZ2V0TW9udGgoKSAmJiBkYXRlLmdldERhdGUoKSA9PT0gcGlja2VyLiRkYXRlLmdldERhdGUoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNEaXNhYmxlZDogZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgICAgIHZhciB0aW1lID0gZGF0ZS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIERpc2FibGVkIGJlY2F1c2Ugb2YgbWluL21heCBkYXRlLlxyXG4gICAgICAgICAgICAgIGlmICh0aW1lIDwgb3B0aW9ucy5taW5EYXRlIHx8IHRpbWUgPiBvcHRpb25zLm1heERhdGUpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAvLyBEaXNhYmxlZCBkdWUgdG8gYmVpbmcgYSBkaXNhYmxlZCBkYXkgb2YgdGhlIHdlZWtcclxuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kYXlzT2ZXZWVrRGlzYWJsZWQuaW5kZXhPZihkYXRlLmdldERheSgpKSAhPT0gLTEpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAvLyBEaXNhYmxlZCBiZWNhdXNlIG9mIGRpc2FibGVkIGRhdGUgcmFuZ2UuXHJcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZWREYXRlUmFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMuZGlzYWJsZWREYXRlUmFuZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0aW1lID49IG9wdGlvbnMuZGlzYWJsZWREYXRlUmFuZ2VzW2ldLnN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPD0gb3B0aW9ucy5kaXNhYmxlZERhdGVSYW5nZXNbaV0uZW5kKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGRpc2FibGVkRGF0ZVJhbmdlcyBpcyBleHBlY3RlZCB0byBiZSBzb3J0ZWQsIHNvIGlmIHRpbWUgPj0gc3RhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Uga25vdyBpdCdzIG5vdCBkaXNhYmxlZC5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgICAgICB2YXIgYWN0dWFsVGltZSA9IHBpY2tlci4kZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdmFyIG5ld0RhdGU7XHJcblxyXG4gICAgICAgICAgICAgIGlmKGV2dC5rZXlDb2RlID09PSAzNykgbmV3RGF0ZSA9IG5ldyBEYXRlKGFjdHVhbFRpbWUgLSAxICogODY0ZTUpO1xyXG4gICAgICAgICAgICAgIGVsc2UgaWYoZXZ0LmtleUNvZGUgPT09IDM4KSBuZXdEYXRlID0gbmV3IERhdGUoYWN0dWFsVGltZSAtIDcgKiA4NjRlNSk7XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gMzkpIG5ld0RhdGUgPSBuZXcgRGF0ZShhY3R1YWxUaW1lICsgMSAqIDg2NGU1KTtcclxuICAgICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSA0MCkgbmV3RGF0ZSA9IG5ldyBEYXRlKGFjdHVhbFRpbWUgKyA3ICogODY0ZTUpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEaXNhYmxlZChuZXdEYXRlKSkgcGlja2VyLnNlbGVjdChuZXdEYXRlLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBuYW1lOiAnbW9udGgnLFxyXG4gICAgICAgICAgICBmb3JtYXQ6ICdNTU0nLFxyXG4gICAgICAgICAgICBzcGxpdDogNCxcclxuICAgICAgICAgICAgc3RlcHM6IHsgeWVhcjogMSB9LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKGRhdGUsIGZvcmNlKSB7XHJcbiAgICAgICAgICAgICAgaWYoIXRoaXMuYnVpbHQgfHwgZGF0ZS5nZXRGdWxsWWVhcigpICE9PSB2aWV3RGF0ZS55ZWFyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge3llYXI6IHBpY2tlci4kZGF0ZS5nZXRGdWxsWWVhcigpLCBtb250aDogcGlja2VyLiRkYXRlLmdldE1vbnRoKCksIGRhdGU6IHBpY2tlci4kZGF0ZS5nZXREYXRlKCl9KTtcclxuICAgICAgICAgICAgICAgIHBpY2tlci4kYnVpbGQoKTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYoZGF0ZS5nZXRNb250aCgpICE9PSB2aWV3RGF0ZS5tb250aCkge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQodmlld0RhdGUsIHttb250aDogcGlja2VyLiRkYXRlLmdldE1vbnRoKCksIGRhdGU6IHBpY2tlci4kZGF0ZS5nZXREYXRlKCl9KTtcclxuICAgICAgICAgICAgICAgIHBpY2tlci4kdXBkYXRlU2VsZWN0ZWQoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJ1aWxkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICB2YXIgZmlyc3RNb250aCA9IG5ldyBEYXRlKHZpZXdEYXRlLnllYXIsIDAsIDEpO1xyXG4gICAgICAgICAgICAgIHZhciBtb250aHMgPSBbXSwgbW9udGg7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBtb250aCA9IG5ldyBEYXRlKHZpZXdEYXRlLnllYXIsIGksIDEpO1xyXG4gICAgICAgICAgICAgICAgbW9udGhzLnB1c2goe2RhdGU6IG1vbnRoLCBsYWJlbDogZGF0ZUZpbHRlcihtb250aCwgdGhpcy5mb3JtYXQpLCBzZWxlY3RlZDogcGlja2VyLiRpc1NlbGVjdGVkKG1vbnRoKSwgZGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZChtb250aCl9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgc2NvcGUudGl0bGUgPSBkYXRlRmlsdGVyKG1vbnRoLCAneXl5eScpO1xyXG4gICAgICAgICAgICAgIHNjb3BlLnNob3dMYWJlbHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBzY29wZS5yb3dzID0gc3BsaXQobW9udGhzLCB0aGlzLnNwbGl0KTtcclxuICAgICAgICAgICAgICB0aGlzLmJ1aWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNTZWxlY3RlZDogZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBwaWNrZXIuJGRhdGUgJiYgZGF0ZS5nZXRGdWxsWWVhcigpID09PSBwaWNrZXIuJGRhdGUuZ2V0RnVsbFllYXIoKSAmJiBkYXRlLmdldE1vbnRoKCkgPT09IHBpY2tlci4kZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc0Rpc2FibGVkOiBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGxhc3REYXRlID0gK25ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpICsgMSwgMCk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGxhc3REYXRlIDwgb3B0aW9ucy5taW5EYXRlIHx8IGRhdGUuZ2V0VGltZSgpID4gb3B0aW9ucy5tYXhEYXRlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbktleURvd246IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgICAgIHZhciBhY3R1YWxNb250aCA9IHBpY2tlci4kZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICAgIHZhciBuZXdEYXRlID0gbmV3IERhdGUocGlja2VyLiRkYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDM3KSBuZXdEYXRlLnNldE1vbnRoKGFjdHVhbE1vbnRoIC0gMSk7XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gMzgpIG5ld0RhdGUuc2V0TW9udGgoYWN0dWFsTW9udGggLSA0KTtcclxuICAgICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSAzOSkgbmV3RGF0ZS5zZXRNb250aChhY3R1YWxNb250aCArIDEpO1xyXG4gICAgICAgICAgICAgIGVsc2UgaWYoZXZ0LmtleUNvZGUgPT09IDQwKSBuZXdEYXRlLnNldE1vbnRoKGFjdHVhbE1vbnRoICsgNCk7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKG5ld0RhdGUpKSBwaWNrZXIuc2VsZWN0KG5ld0RhdGUsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG5hbWU6ICd5ZWFyJyxcclxuICAgICAgICAgICAgZm9ybWF0OiAneXl5eScsXHJcbiAgICAgICAgICAgIHNwbGl0OiA0LFxyXG4gICAgICAgICAgICBzdGVwczogeyB5ZWFyOiAxMiB9LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKGRhdGUsIGZvcmNlKSB7XHJcbiAgICAgICAgICAgICAgaWYoIXRoaXMuYnVpbHQgfHwgZm9yY2UgfHwgcGFyc2VJbnQoZGF0ZS5nZXRGdWxsWWVhcigpLzIwLCAxMCkgIT09IHBhcnNlSW50KHZpZXdEYXRlLnllYXIvMjAsIDEwKSkge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQodmlld0RhdGUsIHt5ZWFyOiBwaWNrZXIuJGRhdGUuZ2V0RnVsbFllYXIoKSwgbW9udGg6IHBpY2tlci4kZGF0ZS5nZXRNb250aCgpLCBkYXRlOiBwaWNrZXIuJGRhdGUuZ2V0RGF0ZSgpfSk7XHJcbiAgICAgICAgICAgICAgICBwaWNrZXIuJGJ1aWxkKCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmKGRhdGUuZ2V0RnVsbFllYXIoKSAhPT0gdmlld0RhdGUueWVhcikge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQodmlld0RhdGUsIHt5ZWFyOiBwaWNrZXIuJGRhdGUuZ2V0RnVsbFllYXIoKSwgbW9udGg6IHBpY2tlci4kZGF0ZS5nZXRNb250aCgpLCBkYXRlOiBwaWNrZXIuJGRhdGUuZ2V0RGF0ZSgpfSk7XHJcbiAgICAgICAgICAgICAgICBwaWNrZXIuJHVwZGF0ZVNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBidWlsZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGZpcnN0WWVhciA9IHZpZXdEYXRlLnllYXIgLSB2aWV3RGF0ZS55ZWFyICUgKHRoaXMuc3BsaXQgKiAzKTtcclxuICAgICAgICAgICAgICB2YXIgeWVhcnMgPSBbXSwgeWVhcjtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHllYXIgPSBuZXcgRGF0ZShmaXJzdFllYXIgKyBpLCAwLCAxKTtcclxuICAgICAgICAgICAgICAgIHllYXJzLnB1c2goe2RhdGU6IHllYXIsIGxhYmVsOiBkYXRlRmlsdGVyKHllYXIsIHRoaXMuZm9ybWF0KSwgc2VsZWN0ZWQ6IHBpY2tlci4kaXNTZWxlY3RlZCh5ZWFyKSwgZGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZCh5ZWFyKX0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBzY29wZS50aXRsZSA9IHllYXJzWzBdLmxhYmVsICsgJy0nICsgeWVhcnNbeWVhcnMubGVuZ3RoIC0gMV0ubGFiZWw7XHJcbiAgICAgICAgICAgICAgc2NvcGUuc2hvd0xhYmVscyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIHNjb3BlLnJvd3MgPSBzcGxpdCh5ZWFycywgdGhpcy5zcGxpdCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5idWlsdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzU2VsZWN0ZWQ6IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcGlja2VyLiRkYXRlICYmIGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gcGlja2VyLiRkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzRGlzYWJsZWQ6IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgICAgICB2YXIgbGFzdERhdGUgPSArbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpICsgMSwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGxhc3REYXRlIDwgb3B0aW9ucy5taW5EYXRlIHx8IGRhdGUuZ2V0VGltZSgpID4gb3B0aW9ucy5tYXhEYXRlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbktleURvd246IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgICAgIHZhciBhY3R1YWxZZWFyID0gcGlja2VyLiRkYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICAgIG5ld0RhdGUgPSBuZXcgRGF0ZShwaWNrZXIuJGRhdGUpO1xyXG5cclxuICAgICAgICAgICAgICBpZihldnQua2V5Q29kZSA9PT0gMzcpIG5ld0RhdGUuc2V0WWVhcihhY3R1YWxZZWFyIC0gMSk7XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gMzgpIG5ld0RhdGUuc2V0WWVhcihhY3R1YWxZZWFyIC0gNCk7XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gMzkpIG5ld0RhdGUuc2V0WWVhcihhY3R1YWxZZWFyICsgMSk7XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gNDApIG5ld0RhdGUuc2V0WWVhcihhY3R1YWxZZWFyICsgNCk7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKG5ld0RhdGUpKSBwaWNrZXIuc2VsZWN0KG5ld0RhdGUsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHZpZXdzOiBvcHRpb25zLm1pblZpZXcgPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh2aWV3cywgb3B0aW9ucy5taW5WaWV3KSA6IHZpZXdzLFxyXG4gICAgICAgICAgdmlld0RhdGU6IHZpZXdEYXRlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgIH07XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pO1xyXG5cclxuLy8gU291cmNlOiBkcm9wZG93bi5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuZHJvcGRvd24nLCBbJ21nY3JlYS5uZ1N0cmFwLnRvb2x0aXAnXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckZHJvcGRvd24nLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBhbmltYXRpb246ICdhbS1mYWRlJyxcclxuICAgICAgcHJlZml4Q2xhc3M6ICdkcm9wZG93bicsXHJcbiAgICAgIHBsYWNlbWVudDogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgdGVtcGxhdGU6ICdkcm9wZG93bi9kcm9wZG93bi50cGwuaHRtbCcsXHJcbiAgICAgIHRyaWdnZXI6ICdjbGljaycsXHJcbiAgICAgIGNvbnRhaW5lcjogZmFsc2UsXHJcbiAgICAgIGtleWJvYXJkOiB0cnVlLFxyXG4gICAgICBodG1sOiBmYWxzZSxcclxuICAgICAgZGVsYXk6IDBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHdpbmRvd1wiLCBcIiRyb290U2NvcGVcIiwgXCIkdG9vbHRpcFwiLCBmdW5jdGlvbigkd2luZG93LCAkcm9vdFNjb3BlLCAkdG9vbHRpcCkge1xyXG5cclxuICAgICAgdmFyIGJvZHlFbCA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG4gICAgICB2YXIgbWF0Y2hlc1NlbGVjdG9yID0gRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUub01hdGNoZXNTZWxlY3RvcjtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIERyb3Bkb3duRmFjdG9yeShlbGVtZW50LCBjb25maWcpIHtcclxuXHJcbiAgICAgICAgdmFyICRkcm9wZG93biA9IHt9O1xyXG5cclxuICAgICAgICAvLyBDb21tb24gdmFyc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG4gICAgICAgIHZhciBzY29wZSA9ICRkcm9wZG93bi4kc2NvcGUgPSBvcHRpb25zLnNjb3BlICYmIG9wdGlvbnMuc2NvcGUuJG5ldygpIHx8ICRyb290U2NvcGUuJG5ldygpO1xyXG5cclxuICAgICAgICAkZHJvcGRvd24gPSAkdG9vbHRpcChlbGVtZW50LCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgcGFyZW50RWwgPSBlbGVtZW50LnBhcmVudCgpO1xyXG5cclxuICAgICAgICAvLyBQcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAkZHJvcGRvd24uJG9uS2V5RG93biA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgaWYgKCEvKDM4fDQwKS8udGVzdChldnQua2V5Q29kZSkpIHJldHVybjtcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgIC8vIFJldHJpZXZlIGZvY3VzZWQgaW5kZXhcclxuICAgICAgICAgIHZhciBpdGVtcyA9IGFuZ3VsYXIuZWxlbWVudCgkZHJvcGRvd24uJGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbCgnbGk6bm90KC5kaXZpZGVyKSBhJykpO1xyXG4gICAgICAgICAgaWYoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICAgICAgdmFyIGluZGV4O1xyXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihlbCwgaSkge1xyXG4gICAgICAgICAgICBpZihtYXRjaGVzU2VsZWN0b3IgJiYgbWF0Y2hlc1NlbGVjdG9yLmNhbGwoZWwsICc6Zm9jdXMnKSkgaW5kZXggPSBpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLy8gTmF2aWdhdGUgd2l0aCBrZXlib2FyZFxyXG4gICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDM4ICYmIGluZGV4ID4gMCkgaW5kZXgtLTtcclxuICAgICAgICAgIGVsc2UgaWYoZXZ0LmtleUNvZGUgPT09IDQwICYmIGluZGV4IDwgaXRlbXMubGVuZ3RoIC0gMSkgaW5kZXgrKztcclxuICAgICAgICAgIGVsc2UgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChpbmRleCkpIGluZGV4ID0gMDtcclxuICAgICAgICAgIGl0ZW1zLmVxKGluZGV4KVswXS5mb2N1cygpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBPdmVycmlkZXNcclxuXHJcbiAgICAgICAgdmFyIHNob3cgPSAkZHJvcGRvd24uc2hvdztcclxuICAgICAgICAkZHJvcGRvd24uc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2hvdygpO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5rZXlib2FyZCAmJiAkZHJvcGRvd24uJGVsZW1lbnQub24oJ2tleWRvd24nLCAkZHJvcGRvd24uJG9uS2V5RG93bik7XHJcbiAgICAgICAgICAgIGJvZHlFbC5vbignY2xpY2snLCBvbkJvZHlDbGljayk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHBhcmVudEVsLmhhc0NsYXNzKCdkcm9wZG93bicpICYmIHBhcmVudEVsLmFkZENsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGhpZGUgPSAkZHJvcGRvd24uaGlkZTtcclxuICAgICAgICAkZHJvcGRvd24uaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgb3B0aW9ucy5rZXlib2FyZCAmJiAkZHJvcGRvd24uJGVsZW1lbnQub2ZmKCdrZXlkb3duJywgJGRyb3Bkb3duLiRvbktleURvd24pO1xyXG4gICAgICAgICAgYm9keUVsLm9mZignY2xpY2snLCBvbkJvZHlDbGljayk7XHJcbiAgICAgICAgICBwYXJlbnRFbC5oYXNDbGFzcygnZHJvcGRvd24nKSAmJiBwYXJlbnRFbC5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgaGlkZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByaXZhdGUgZnVuY3Rpb25zXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uQm9keUNsaWNrKGV2dCkge1xyXG4gICAgICAgICAgaWYoZXZ0LnRhcmdldCA9PT0gZWxlbWVudFswXSkgcmV0dXJuO1xyXG4gICAgICAgICAgcmV0dXJuIGV2dC50YXJnZXQgIT09IGVsZW1lbnRbMF0gJiYgJGRyb3Bkb3duLmhpZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAkZHJvcGRvd247XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gRHJvcGRvd25GYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic0Ryb3Bkb3duJywgW1wiJHdpbmRvd1wiLCBcIiRzY2VcIiwgXCIkZHJvcGRvd25cIiwgZnVuY3Rpb24oJHdpbmRvdywgJHNjZSwgJGRyb3Bkb3duKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHRyYW5zY2x1c2lvbikge1xyXG5cclxuICAgICAgICAvLyBEaXJlY3RpdmUgb3B0aW9uc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge3Njb3BlOiBzY29wZX07XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsncGxhY2VtZW50JywgJ2NvbnRhaW5lcicsICdkZWxheScsICd0cmlnZ2VyJywgJ2tleWJvYXJkJywgJ2h0bWwnLCAnYW5pbWF0aW9uJywgJ3RlbXBsYXRlJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSkgb3B0aW9uc1trZXldID0gYXR0cltrZXldO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHNjb3BlIGFzIGFuIG9iamVjdFxyXG4gICAgICAgIGF0dHIuYnNEcm9wZG93biAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic0Ryb3Bkb3duLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIHNjb3BlLmNvbnRlbnQgPSBuZXdWYWx1ZTtcclxuICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBiaW5kaW5nIHN1cHBvcnRcclxuICAgICAgICBhdHRyLmJzU2hvdyAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic1Nob3csIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgaWYoIWRyb3Bkb3duIHx8ICFhbmd1bGFyLmlzRGVmaW5lZChuZXdWYWx1ZSkpIHJldHVybjtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNTdHJpbmcobmV3VmFsdWUpKSBuZXdWYWx1ZSA9ICEhbmV3VmFsdWUubWF0Y2goJyw/KGRyb3Bkb3duKSw/Jyk7XHJcbiAgICAgICAgICBuZXdWYWx1ZSA9PT0gdHJ1ZSA/IGRyb3Bkb3duLnNob3coKSA6IGRyb3Bkb3duLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBkcm9wZG93blxyXG4gICAgICAgIHZhciBkcm9wZG93biA9ICRkcm9wZG93bihlbGVtZW50LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRyb3Bkb3duKSBkcm9wZG93bi5kZXN0cm95KCk7XHJcbiAgICAgICAgICBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICAgIGRyb3Bkb3duID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogZGF0ZS1wYXJzZXIuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMuZGF0ZVBhcnNlcicsIFtdKVxyXG5cclxuLnByb3ZpZGVyKCckZGF0ZVBhcnNlcicsIFtcIiRsb2NhbGVQcm92aWRlclwiLCBmdW5jdGlvbigkbG9jYWxlUHJvdmlkZXIpIHtcclxuXHJcbiAgdmFyIHByb3RvID0gRGF0ZS5wcm90b3R5cGU7XHJcblxyXG4gIGZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc051bWVyaWMobikge1xyXG4gICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcclxuICB9XHJcblxyXG4gIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICBmb3JtYXQ6ICdzaG9ydERhdGUnLFxyXG4gICAgc3RyaWN0OiBmYWxzZVxyXG4gIH07XHJcblxyXG4gIHRoaXMuJGdldCA9IFtcIiRsb2NhbGVcIiwgXCJkYXRlRmlsdGVyXCIsIGZ1bmN0aW9uKCRsb2NhbGUsIGRhdGVGaWx0ZXIpIHtcclxuXHJcbiAgICB2YXIgRGF0ZVBhcnNlckZhY3RvcnkgPSBmdW5jdGlvbihjb25maWcpIHtcclxuXHJcbiAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG5cclxuICAgICAgdmFyICRkYXRlUGFyc2VyID0ge307XHJcblxyXG4gICAgICB2YXIgcmVnRXhwTWFwID0ge1xyXG4gICAgICAgICdzc3MnICAgOiAnWzAtOV17M30nLFxyXG4gICAgICAgICdzcycgICAgOiAnWzAtNV1bMC05XScsXHJcbiAgICAgICAgJ3MnICAgICA6IG9wdGlvbnMuc3RyaWN0ID8gJ1sxLTVdP1swLTldJyA6ICdbMC05XXxbMC01XVswLTldJyxcclxuICAgICAgICAnbW0nICAgIDogJ1swLTVdWzAtOV0nLFxyXG4gICAgICAgICdtJyAgICAgOiBvcHRpb25zLnN0cmljdCA/ICdbMS01XT9bMC05XScgOiAnWzAtOV18WzAtNV1bMC05XScsXHJcbiAgICAgICAgJ0hIJyAgICA6ICdbMDFdWzAtOV18MlswLTNdJyxcclxuICAgICAgICAnSCcgICAgIDogb3B0aW9ucy5zdHJpY3QgPyAnMT9bMC05XXwyWzAtM10nIDogJ1swMV0/WzAtOV18MlswLTNdJyxcclxuICAgICAgICAnaGgnICAgIDogJ1swXVsxLTldfFsxXVswMTJdJyxcclxuICAgICAgICAnaCcgICAgIDogb3B0aW9ucy5zdHJpY3QgPyAnWzEtOV18MVswMTJdJyA6ICcwP1sxLTldfDFbMDEyXScsXHJcbiAgICAgICAgJ2EnICAgICA6ICdBTXxQTScsXHJcbiAgICAgICAgJ0VFRUUnICA6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5EQVkuam9pbignfCcpLFxyXG4gICAgICAgICdFRUUnICAgOiAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlREQVkuam9pbignfCcpLFxyXG4gICAgICAgICdkZCcgICAgOiAnMFsxLTldfFsxMl1bMC05XXwzWzAxXScsXHJcbiAgICAgICAgJ2QnICAgICA6IG9wdGlvbnMuc3RyaWN0ID8gJ1sxLTldfFsxLTJdWzAtOV18M1swMV0nIDogJzA/WzEtOV18WzEtMl1bMC05XXwzWzAxXScsXHJcbiAgICAgICAgJ01NTU0nICA6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5NT05USC5qb2luKCd8JyksXHJcbiAgICAgICAgJ01NTScgICA6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVE1PTlRILmpvaW4oJ3wnKSxcclxuICAgICAgICAnTU0nICAgIDogJzBbMS05XXwxWzAxMl0nLFxyXG4gICAgICAgICdNJyAgICAgOiBvcHRpb25zLnN0cmljdCA/ICdbMS05XXwxWzAxMl0nIDogJzA/WzEtOV18MVswMTJdJyxcclxuICAgICAgICAneXl5eScgIDogJ1sxXXsxfVswLTldezN9fFsyXXsxfVswLTldezN9JyxcclxuICAgICAgICAneXknICAgIDogJ1swLTldezJ9JyxcclxuICAgICAgICAneScgICAgIDogb3B0aW9ucy5zdHJpY3QgPyAnLT8oMHxbMS05XVswLTldezAsM30pJyA6ICctPzAqWzAtOV17MSw0fScsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgc2V0Rm5NYXAgPSB7XHJcbiAgICAgICAgJ3NzcycgICA6IHByb3RvLnNldE1pbGxpc2Vjb25kcyxcclxuICAgICAgICAnc3MnICAgIDogcHJvdG8uc2V0U2Vjb25kcyxcclxuICAgICAgICAncycgICAgIDogcHJvdG8uc2V0U2Vjb25kcyxcclxuICAgICAgICAnbW0nICAgIDogcHJvdG8uc2V0TWludXRlcyxcclxuICAgICAgICAnbScgICAgIDogcHJvdG8uc2V0TWludXRlcyxcclxuICAgICAgICAnSEgnICAgIDogcHJvdG8uc2V0SG91cnMsXHJcbiAgICAgICAgJ0gnICAgICA6IHByb3RvLnNldEhvdXJzLFxyXG4gICAgICAgICdoaCcgICAgOiBwcm90by5zZXRIb3VycyxcclxuICAgICAgICAnaCcgICAgIDogcHJvdG8uc2V0SG91cnMsXHJcbiAgICAgICAgJ0VFRUUnICA6IG5vb3AsXHJcbiAgICAgICAgJ0VFRScgICA6IG5vb3AsXHJcbiAgICAgICAgJ2RkJyAgICA6IHByb3RvLnNldERhdGUsXHJcbiAgICAgICAgJ2QnICAgICA6IHByb3RvLnNldERhdGUsXHJcbiAgICAgICAgJ2EnICAgICA6IGZ1bmN0aW9uKHZhbHVlKSB7IHZhciBob3VycyA9IHRoaXMuZ2V0SG91cnMoKTsgcmV0dXJuIHRoaXMuc2V0SG91cnModmFsdWUubWF0Y2goL3BtL2kpID8gaG91cnMgKyAxMiA6IGhvdXJzKTsgfSxcclxuICAgICAgICAnTU1NTScgIDogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHRoaXMuc2V0TW9udGgoJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLk1PTlRILmluZGV4T2YodmFsdWUpKTsgfSxcclxuICAgICAgICAnTU1NJyAgIDogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHRoaXMuc2V0TW9udGgoJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguaW5kZXhPZih2YWx1ZSkpOyB9LFxyXG4gICAgICAgICdNTScgICAgOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdGhpcy5zZXRNb250aCgxICogdmFsdWUgLSAxKTsgfSxcclxuICAgICAgICAnTScgICAgIDogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHRoaXMuc2V0TW9udGgoMSAqIHZhbHVlIC0gMSk7IH0sXHJcbiAgICAgICAgJ3l5eXknICA6IHByb3RvLnNldEZ1bGxZZWFyLFxyXG4gICAgICAgICd5eScgICAgOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdGhpcy5zZXRGdWxsWWVhcigyMDAwICsgMSAqIHZhbHVlKTsgfSxcclxuICAgICAgICAneScgICAgIDogcHJvdG8uc2V0RnVsbFllYXJcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciByZWdleCwgc2V0TWFwO1xyXG5cclxuICAgICAgJGRhdGVQYXJzZXIuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRkYXRlUGFyc2VyLiRmb3JtYXQgPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFNbb3B0aW9ucy5mb3JtYXRdIHx8IG9wdGlvbnMuZm9ybWF0O1xyXG4gICAgICAgIHJlZ2V4ID0gcmVnRXhwRm9yRm9ybWF0KCRkYXRlUGFyc2VyLiRmb3JtYXQpO1xyXG4gICAgICAgIHNldE1hcCA9IHNldE1hcEZvckZvcm1hdCgkZGF0ZVBhcnNlci4kZm9ybWF0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgICRkYXRlUGFyc2VyLmlzVmFsaWQgPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgaWYoYW5ndWxhci5pc0RhdGUoZGF0ZSkpIHJldHVybiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIHJldHVybiByZWdleC50ZXN0KGRhdGUpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJGRhdGVQYXJzZXIucGFyc2UgPSBmdW5jdGlvbih2YWx1ZSwgYmFzZURhdGUsIGZvcm1hdCkge1xyXG4gICAgICAgIGlmKGFuZ3VsYXIuaXNEYXRlKHZhbHVlKSkgdmFsdWUgPSBkYXRlRmlsdGVyKHZhbHVlLCBmb3JtYXQgfHwgJGRhdGVQYXJzZXIuJGZvcm1hdCk7XHJcbiAgICAgICAgdmFyIGZvcm1hdFJlZ2V4ID0gZm9ybWF0ID8gcmVnRXhwRm9yRm9ybWF0KGZvcm1hdCkgOiByZWdleDtcclxuICAgICAgICB2YXIgZm9ybWF0U2V0TWFwID0gZm9ybWF0ID8gc2V0TWFwRm9yRm9ybWF0KGZvcm1hdCkgOiBzZXRNYXA7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSBmb3JtYXRSZWdleC5leGVjKHZhbHVlKTtcclxuICAgICAgICBpZighbWF0Y2hlcykgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHZhciBkYXRlID0gYmFzZURhdGUgfHwgbmV3IERhdGUoMCwgMCwgMSk7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG1hdGNoZXMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICBmb3JtYXRTZXRNYXBbaV0gJiYgZm9ybWF0U2V0TWFwW2ldLmNhbGwoZGF0ZSwgbWF0Y2hlc1tpKzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBQcml2YXRlIGZ1bmN0aW9uc1xyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0TWFwRm9yRm9ybWF0KGZvcm1hdCkge1xyXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2V0Rm5NYXApLCBpO1xyXG4gICAgICAgIHZhciBtYXAgPSBbXSwgc29ydGVkTWFwID0gW107XHJcbiAgICAgICAgLy8gTWFwIHRvIHNldEZuXHJcbiAgICAgICAgdmFyIGNsb25lZEZvcm1hdCA9IGZvcm1hdDtcclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZihmb3JtYXQuc3BsaXQoa2V5c1tpXSkubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBjbG9uZWRGb3JtYXQuc2VhcmNoKGtleXNbaV0pO1xyXG4gICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQuc3BsaXQoa2V5c1tpXSkuam9pbignJyk7XHJcbiAgICAgICAgICAgIGlmKHNldEZuTWFwW2tleXNbaV1dKSB7XHJcbiAgICAgICAgICAgICAgbWFwW2luZGV4XSA9IHNldEZuTWFwW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNvcnQgcmVzdWx0IG1hcFxyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChtYXAsIGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgIC8vIGNvbmRpdGlvbmFsIHJlcXVpcmVkIHNpbmNlIGFuZ3VsYXIuZm9yRWFjaCBicm9rZSBhcm91bmQgdjEuMi4yMVxyXG4gICAgICAgICAgLy8gcmVsYXRlZCBwcjogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9wdWxsLzg1MjVcclxuICAgICAgICAgIGlmKHYpIHNvcnRlZE1hcC5wdXNoKHYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzb3J0ZWRNYXA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGVzY2FwZVJlc2VydmVkU3ltYm9scyh0ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvXFwvL2csICdbXFxcXC9dJykucmVwbGFjZSgnLy0vZycsICdbLV0nKS5yZXBsYWNlKC9cXC4vZywgJ1suXScpLnJlcGxhY2UoL1xcXFxzL2csICdbXFxcXHNdJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlZ0V4cEZvckZvcm1hdChmb3JtYXQpIHtcclxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHJlZ0V4cE1hcCksIGk7XHJcblxyXG4gICAgICAgIHZhciByZSA9IGZvcm1hdDtcclxuICAgICAgICAvLyBBYnN0cmFjdCByZXBsYWNlcyB0byBhdm9pZCBjb2xsaXNpb25zXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgcmUgPSByZS5zcGxpdChrZXlzW2ldKS5qb2luKCckeycgKyBpICsgJ30nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVwbGFjZSBhYnN0cmFjdGVkIHZhbHVlc1xyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHJlID0gcmUuc3BsaXQoJyR7JyArIGkgKyAnfScpLmpvaW4oJygnICsgcmVnRXhwTWFwW2tleXNbaV1dICsgJyknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9ybWF0ID0gZXNjYXBlUmVzZXJ2ZWRTeW1ib2xzKGZvcm1hdCk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIHJlICsgJyQnLCBbJ2knXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRkYXRlUGFyc2VyLmluaXQoKTtcclxuICAgICAgcmV0dXJuICRkYXRlUGFyc2VyO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIERhdGVQYXJzZXJGYWN0b3J5O1xyXG5cclxuICB9XTtcclxuXHJcbn1dKTtcclxuXHJcbi8vIFNvdXJjZTogZGVib3VuY2UuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMuZGVib3VuY2UnLCBbXSlcclxuXHJcbi8vIEBzb3VyY2UgamFzaGtlbmFzL3VuZGVyc2NvcmVcclxuLy8gQHVybCBodHRwczovL2dpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvYmxvYi8xLjUuMi91bmRlcnNjb3JlLmpzI0w2OTNcclxuLmNvbnN0YW50KCdkZWJvdW5jZScsIGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xyXG4gIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICBjb250ZXh0ID0gdGhpcztcclxuICAgIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBsYXN0ID0gKG5ldyBEYXRlKCkpIC0gdGltZXN0YW1wO1xyXG4gICAgICBpZiAobGFzdCA8IHdhaXQpIHtcclxuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgIGlmICghaW1tZWRpYXRlKSByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XHJcbiAgICBpZiAoIXRpbWVvdXQpIHtcclxuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNhbGxOb3cpIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH07XHJcbn0pXHJcblxyXG5cclxuLy8gQHNvdXJjZSBqYXNoa2VuYXMvdW5kZXJzY29yZVxyXG4vLyBAdXJsIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9ibG9iLzEuNS4yL3VuZGVyc2NvcmUuanMjTDY2MVxyXG4uY29uc3RhbnQoJ3Rocm90dGxlJywgZnVuY3Rpb24oZnVuYywgd2FpdCwgb3B0aW9ucykge1xyXG4gIHZhciBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XHJcbiAgdmFyIHRpbWVvdXQgPSBudWxsO1xyXG4gIHZhciBwcmV2aW91cyA9IDA7XHJcbiAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcclxuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBuZXcgRGF0ZSgpO1xyXG4gICAgdGltZW91dCA9IG51bGw7XHJcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gIH07XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xyXG4gICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xyXG4gICAgY29udGV4dCA9IHRoaXM7XHJcbiAgICBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgIHByZXZpb3VzID0gbm93O1xyXG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xyXG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfTtcclxufSk7XHJcblxyXG4vLyBTb3VyY2U6IGRpbWVuc2lvbnMuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMuZGltZW5zaW9ucycsIFtdKVxyXG5cclxuICAuZmFjdG9yeSgnZGltZW5zaW9ucycsIFtcIiRkb2N1bWVudFwiLCBcIiR3aW5kb3dcIiwgZnVuY3Rpb24oJGRvY3VtZW50LCAkd2luZG93KSB7XHJcblxyXG4gICAgdmFyIGpxTGl0ZSA9IGFuZ3VsYXIuZWxlbWVudDtcclxuICAgIHZhciBmbiA9IHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGVzdCB0aGUgZWxlbWVudCBub2RlTmFtZVxyXG4gICAgICogQHBhcmFtIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBuYW1lXHJcbiAgICAgKi9cclxuICAgIHZhciBub2RlTmFtZSA9IGZuLm5vZGVOYW1lID0gZnVuY3Rpb24oZWxlbWVudCwgbmFtZSkge1xyXG4gICAgICByZXR1cm4gZWxlbWVudC5ub2RlTmFtZSAmJiBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBlbGVtZW50IGNvbXB1dGVkIHN0eWxlXHJcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxyXG4gICAgICogQHBhcmFtIHByb3BcclxuICAgICAqIEBwYXJhbSBleHRyYVxyXG4gICAgICovXHJcbiAgICBmbi5jc3MgPSBmdW5jdGlvbihlbGVtZW50LCBwcm9wLCBleHRyYSkge1xyXG4gICAgICB2YXIgdmFsdWU7XHJcbiAgICAgIGlmIChlbGVtZW50LmN1cnJlbnRTdHlsZSkgeyAvL0lFXHJcbiAgICAgICAgdmFsdWUgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtwcm9wXTtcclxuICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkge1xyXG4gICAgICAgIHZhbHVlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudClbcHJvcF07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFsdWUgPSBlbGVtZW50LnN0eWxlW3Byb3BdO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBleHRyYSA9PT0gdHJ1ZSA/IHBhcnNlRmxvYXQodmFsdWUpIHx8IDAgOiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm92aWRlcyByZWFkLW9ubHkgZXF1aXZhbGVudCBvZiBqUXVlcnkncyBvZmZzZXQgZnVuY3Rpb246XHJcbiAgICAgKiBAcmVxdWlyZWQtYnkgYm9vdHN0cmFwLXRvb2x0aXAsIGJvb3RzdHJhcC1hZmZpeFxyXG4gICAgICogQHVybCBodHRwOi8vYXBpLmpxdWVyeS5jb20vb2Zmc2V0L1xyXG4gICAgICogQHBhcmFtIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZm4ub2Zmc2V0ID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICB2YXIgYm94UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIHZhciBkb2NFbGVtZW50ID0gZWxlbWVudC5vd25lckRvY3VtZW50O1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHdpZHRoOiBib3hSZWN0LndpZHRoIHx8IGVsZW1lbnQub2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBib3hSZWN0LmhlaWdodCB8fCBlbGVtZW50Lm9mZnNldEhlaWdodCxcclxuICAgICAgICB0b3A6IGJveFJlY3QudG9wICsgKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2NFbGVtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIC0gKGRvY0VsZW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFRvcCB8fCAwKSxcclxuICAgICAgICBsZWZ0OiBib3hSZWN0LmxlZnQgKyAod2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY0VsZW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQpIC0gKGRvY0VsZW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudExlZnQgfHwgMClcclxuICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm92aWRlcyByZWFkLW9ubHkgZXF1aXZhbGVudCBvZiBqUXVlcnkncyBwb3NpdGlvbiBmdW5jdGlvblxyXG4gICAgICogQHJlcXVpcmVkLWJ5IGJvb3RzdHJhcC10b29sdGlwLCBib290c3RyYXAtYWZmaXhcclxuICAgICAqIEB1cmwgaHR0cDovL2FwaS5qcXVlcnkuY29tL29mZnNldC9cclxuICAgICAqIEBwYXJhbSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIGZuLnBvc2l0aW9uID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG5cclxuICAgICAgdmFyIG9mZnNldFBhcmVudFJlY3QgPSB7dG9wOiAwLCBsZWZ0OiAwfSxcclxuICAgICAgICAgIG9mZnNldFBhcmVudEVsZW1lbnQsXHJcbiAgICAgICAgICBvZmZzZXQ7XHJcblxyXG4gICAgICAvLyBGaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gd2luZG93IChwYXJlbnRPZmZzZXQgPSB7dG9wOjAsIGxlZnQ6IDB9LCBiZWNhdXNlIGl0IGlzIGl0J3Mgb25seSBvZmZzZXQgcGFyZW50XHJcbiAgICAgIGlmIChmbi5jc3MoZWxlbWVudCwgJ3Bvc2l0aW9uJykgPT09ICdmaXhlZCcpIHtcclxuXHJcbiAgICAgICAgLy8gV2UgYXNzdW1lIHRoYXQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIGF2YWlsYWJsZSB3aGVuIGNvbXB1dGVkIHBvc2l0aW9uIGlzIGZpeGVkXHJcbiAgICAgICAgb2Zmc2V0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIC8vIEdldCAqcmVhbCogb2Zmc2V0UGFyZW50RWxlbWVudFxyXG4gICAgICAgIG9mZnNldFBhcmVudEVsZW1lbnQgPSBvZmZzZXRQYXJlbnQoZWxlbWVudCk7XHJcbiAgICAgICAgb2Zmc2V0ID0gZm4ub2Zmc2V0KGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBHZXQgY29ycmVjdCBvZmZzZXRzXHJcbiAgICAgICAgb2Zmc2V0ID0gZm4ub2Zmc2V0KGVsZW1lbnQpO1xyXG4gICAgICAgIGlmICghbm9kZU5hbWUob2Zmc2V0UGFyZW50RWxlbWVudCwgJ2h0bWwnKSkge1xyXG4gICAgICAgICAgb2Zmc2V0UGFyZW50UmVjdCA9IGZuLm9mZnNldChvZmZzZXRQYXJlbnRFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBvZmZzZXRQYXJlbnQgYm9yZGVyc1xyXG4gICAgICAgIG9mZnNldFBhcmVudFJlY3QudG9wICs9IGZuLmNzcyhvZmZzZXRQYXJlbnRFbGVtZW50LCAnYm9yZGVyVG9wV2lkdGgnLCB0cnVlKTtcclxuICAgICAgICBvZmZzZXRQYXJlbnRSZWN0LmxlZnQgKz0gZm4uY3NzKG9mZnNldFBhcmVudEVsZW1lbnQsICdib3JkZXJMZWZ0V2lkdGgnLCB0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHdpZHRoOiBlbGVtZW50Lm9mZnNldFdpZHRoLFxyXG4gICAgICAgIGhlaWdodDogZWxlbWVudC5vZmZzZXRIZWlnaHQsXHJcbiAgICAgICAgdG9wOiBvZmZzZXQudG9wIC0gb2Zmc2V0UGFyZW50UmVjdC50b3AgLSBmbi5jc3MoZWxlbWVudCwgJ21hcmdpblRvcCcsIHRydWUpLFxyXG4gICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0IC0gb2Zmc2V0UGFyZW50UmVjdC5sZWZ0IC0gZm4uY3NzKGVsZW1lbnQsICdtYXJnaW5MZWZ0JywgdHJ1ZSlcclxuICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY2xvc2VzdCwgbm9uLXN0YXRpY2FsbHkgcG9zaXRpb25lZCBvZmZzZXRQYXJlbnQgb2YgYSBnaXZlbiBlbGVtZW50XHJcbiAgICAgKiBAcmVxdWlyZWQtYnkgZm4ucG9zaXRpb25cclxuICAgICAqIEBwYXJhbSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHZhciBvZmZzZXRQYXJlbnQgPSBmdW5jdGlvbiBvZmZzZXRQYXJlbnRFbGVtZW50KGVsZW1lbnQpIHtcclxuICAgICAgdmFyIGRvY0VsZW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XHJcbiAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudCB8fCBkb2NFbGVtZW50O1xyXG4gICAgICBpZihub2RlTmFtZShvZmZzZXRQYXJlbnQsICcjZG9jdW1lbnQnKSkgcmV0dXJuIGRvY0VsZW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICB3aGlsZShvZmZzZXRQYXJlbnQgJiYgIW5vZGVOYW1lKG9mZnNldFBhcmVudCwgJ2h0bWwnKSAmJiBmbi5jc3Mob2Zmc2V0UGFyZW50LCAncG9zaXRpb24nKSA9PT0gJ3N0YXRpYycpIHtcclxuICAgICAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jRWxlbWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgZXF1aXZhbGVudCBvZiBqUXVlcnkncyBoZWlnaHQgZnVuY3Rpb25cclxuICAgICAqIEByZXF1aXJlZC1ieSBib290c3RyYXAtYWZmaXhcclxuICAgICAqIEB1cmwgaHR0cDovL2FwaS5qcXVlcnkuY29tL2hlaWdodC9cclxuICAgICAqIEBwYXJhbSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gb3V0ZXJcclxuICAgICAqL1xyXG4gICAgZm4uaGVpZ2h0ID0gZnVuY3Rpb24oZWxlbWVudCwgb3V0ZXIpIHtcclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgIGlmKG91dGVyKSB7XHJcbiAgICAgICAgdmFsdWUgKz0gZm4uY3NzKGVsZW1lbnQsICdtYXJnaW5Ub3AnLCB0cnVlKSArIGZuLmNzcyhlbGVtZW50LCAnbWFyZ2luQm90dG9tJywgdHJ1ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFsdWUgLT0gZm4uY3NzKGVsZW1lbnQsICdwYWRkaW5nVG9wJywgdHJ1ZSkgKyBmbi5jc3MoZWxlbWVudCwgJ3BhZGRpbmdCb3R0b20nLCB0cnVlKSArIGZuLmNzcyhlbGVtZW50LCAnYm9yZGVyVG9wV2lkdGgnLCB0cnVlKSArIGZuLmNzcyhlbGVtZW50LCAnYm9yZGVyQm90dG9tV2lkdGgnLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgZXF1aXZhbGVudCBvZiBqUXVlcnkncyB3aWR0aCBmdW5jdGlvblxyXG4gICAgICogQHJlcXVpcmVkLWJ5IGJvb3RzdHJhcC1hZmZpeFxyXG4gICAgICogQHVybCBodHRwOi8vYXBpLmpxdWVyeS5jb20vd2lkdGgvXHJcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxyXG4gICAgICogQHBhcmFtIG91dGVyXHJcbiAgICAgKi9cclxuICAgIGZuLndpZHRoID0gZnVuY3Rpb24oZWxlbWVudCwgb3V0ZXIpIHtcclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgaWYob3V0ZXIpIHtcclxuICAgICAgICB2YWx1ZSArPSBmbi5jc3MoZWxlbWVudCwgJ21hcmdpbkxlZnQnLCB0cnVlKSArIGZuLmNzcyhlbGVtZW50LCAnbWFyZ2luUmlnaHQnLCB0cnVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWx1ZSAtPSBmbi5jc3MoZWxlbWVudCwgJ3BhZGRpbmdMZWZ0JywgdHJ1ZSkgKyBmbi5jc3MoZWxlbWVudCwgJ3BhZGRpbmdSaWdodCcsIHRydWUpICsgZm4uY3NzKGVsZW1lbnQsICdib3JkZXJMZWZ0V2lkdGgnLCB0cnVlKSArIGZuLmNzcyhlbGVtZW50LCAnYm9yZGVyUmlnaHRXaWR0aCcsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGZuO1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IHBhcnNlLW9wdGlvbnMuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMucGFyc2VPcHRpb25zJywgW10pXHJcblxyXG4gIC5wcm92aWRlcignJHBhcnNlT3B0aW9ucycsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIHJlZ2V4cDogL15cXHMqKC4qPykoPzpcXHMrYXNcXHMrKC4qPykpPyg/Olxccytncm91cFxccytieVxccysoLiopKT9cXHMrZm9yXFxzKyg/OihbXFwkXFx3XVtcXCRcXHddKil8KD86XFwoXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqLFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKlxcKSkpXFxzK2luXFxzKyguKj8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyguKj8pKT8kL1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkcGFyc2VcIiwgXCIkcVwiLCBmdW5jdGlvbigkcGFyc2UsICRxKSB7XHJcblxyXG4gICAgICBmdW5jdGlvbiBQYXJzZU9wdGlvbnNGYWN0b3J5KGF0dHIsIGNvbmZpZykge1xyXG5cclxuICAgICAgICB2YXIgJHBhcnNlT3B0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICAvLyBDb21tb24gdmFyc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG4gICAgICAgICRwYXJzZU9wdGlvbnMuJHZhbHVlcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIHZhcnNcclxuICAgICAgICB2YXIgbWF0Y2gsIGRpc3BsYXlGbiwgdmFsdWVOYW1lLCBrZXlOYW1lLCBncm91cEJ5Rm4sIHZhbHVlRm4sIHZhbHVlc0ZuO1xyXG5cclxuICAgICAgICAkcGFyc2VPcHRpb25zLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRwYXJzZU9wdGlvbnMuJG1hdGNoID0gbWF0Y2ggPSBhdHRyLm1hdGNoKG9wdGlvbnMucmVnZXhwKTtcclxuICAgICAgICAgIGRpc3BsYXlGbiA9ICRwYXJzZShtYXRjaFsyXSB8fCBtYXRjaFsxXSksXHJcbiAgICAgICAgICB2YWx1ZU5hbWUgPSBtYXRjaFs0XSB8fCBtYXRjaFs2XSxcclxuICAgICAgICAgIGtleU5hbWUgPSBtYXRjaFs1XSxcclxuICAgICAgICAgIGdyb3VwQnlGbiA9ICRwYXJzZShtYXRjaFszXSB8fCAnJyksXHJcbiAgICAgICAgICB2YWx1ZUZuID0gJHBhcnNlKG1hdGNoWzJdID8gbWF0Y2hbMV0gOiB2YWx1ZU5hbWUpLFxyXG4gICAgICAgICAgdmFsdWVzRm4gPSAkcGFyc2UobWF0Y2hbN10pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRwYXJzZU9wdGlvbnMudmFsdWVzRm4gPSBmdW5jdGlvbihzY29wZSwgY29udHJvbGxlcikge1xyXG4gICAgICAgICAgcmV0dXJuICRxLndoZW4odmFsdWVzRm4oc2NvcGUsIGNvbnRyb2xsZXIpKVxyXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24odmFsdWVzKSB7XHJcbiAgICAgICAgICAgICRwYXJzZU9wdGlvbnMuJHZhbHVlcyA9IHZhbHVlcyA/IHBhcnNlVmFsdWVzKHZhbHVlcywgc2NvcGUpIDoge307XHJcbiAgICAgICAgICAgIHJldHVybiAkcGFyc2VPcHRpb25zLiR2YWx1ZXM7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIGZ1bmN0aW9uc1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBwYXJzZVZhbHVlcyh2YWx1ZXMsIHNjb3BlKSB7XHJcbiAgICAgICAgICByZXR1cm4gdmFsdWVzLm1hcChmdW5jdGlvbihtYXRjaCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGxvY2FscyA9IHt9LCBsYWJlbCwgdmFsdWU7XHJcbiAgICAgICAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gbWF0Y2g7XHJcbiAgICAgICAgICAgIGxhYmVsID0gZGlzcGxheUZuKHNjb3BlLCBsb2NhbHMpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlRm4oc2NvcGUsIGxvY2FscykgfHwgaW5kZXg7XHJcbiAgICAgICAgICAgIHJldHVybiB7bGFiZWw6IGxhYmVsLCB2YWx1ZTogdmFsdWV9O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkcGFyc2VPcHRpb25zLmluaXQoKTtcclxuICAgICAgICByZXR1cm4gJHBhcnNlT3B0aW9ucztcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBQYXJzZU9wdGlvbnNGYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KTtcclxuXHJcbi8vIFNvdXJjZTogcmFmLmpzXHJcbihhbmd1bGFyLnZlcnNpb24ubWlub3IgPCAzICYmIGFuZ3VsYXIudmVyc2lvbi5kb3QgPCAxNCkgJiYgYW5ndWxhci5tb2R1bGUoJ25nJylcclxuXHJcbi5mYWN0b3J5KCckJHJBRicsIFtcIiR3aW5kb3dcIiwgXCIkdGltZW91dFwiLCBmdW5jdGlvbigkd2luZG93LCAkdGltZW91dCkge1xyXG5cclxuICB2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblxyXG4gIHZhciBjYW5jZWxBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG5cclxuICB2YXIgcmFmU3VwcG9ydGVkID0gISFyZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcbiAgdmFyIHJhZiA9IHJhZlN1cHBvcnRlZCA/XHJcbiAgICBmdW5jdGlvbihmbikge1xyXG4gICAgICB2YXIgaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pO1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xyXG4gICAgICB9O1xyXG4gICAgfSA6XHJcbiAgICBmdW5jdGlvbihmbikge1xyXG4gICAgICB2YXIgdGltZXIgPSAkdGltZW91dChmbiwgMTYuNjYsIGZhbHNlKTsgLy8gMTAwMCAvIDYwID0gMTYuNjY2XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgcmFmLnN1cHBvcnRlZCA9IHJhZlN1cHBvcnRlZDtcclxuXHJcbiAgcmV0dXJuIHJhZjtcclxuXHJcbn1dKTtcclxuXHJcbi8vIC5mYWN0b3J5KCckJGFuaW1hdGVSZWZsb3cnLCBmdW5jdGlvbigkJHJBRiwgJGRvY3VtZW50KSB7XHJcblxyXG4vLyAgIHZhciBib2R5RWwgPSAkZG9jdW1lbnRbMF0uYm9keTtcclxuXHJcbi8vICAgcmV0dXJuIGZ1bmN0aW9uKGZuKSB7XHJcbi8vICAgICAvL3RoZSByZXR1cm5lZCBmdW5jdGlvbiBhY3RzIGFzIHRoZSBjYW5jZWxsYXRpb24gZnVuY3Rpb25cclxuLy8gICAgIHJldHVybiAkJHJBRihmdW5jdGlvbigpIHtcclxuLy8gICAgICAgLy90aGUgbGluZSBiZWxvdyB3aWxsIGZvcmNlIHRoZSBicm93c2VyIHRvIHBlcmZvcm0gYSByZXBhaW50XHJcbi8vICAgICAgIC8vc28gdGhhdCBhbGwgdGhlIGFuaW1hdGVkIGVsZW1lbnRzIHdpdGhpbiB0aGUgYW5pbWF0aW9uIGZyYW1lXHJcbi8vICAgICAgIC8vd2lsbCBiZSBwcm9wZXJseSB1cGRhdGVkIGFuZCBkcmF3biBvbiBzY3JlZW4uIFRoaXMgaXNcclxuLy8gICAgICAgLy9yZXF1aXJlZCB0byBwZXJmb3JtIG11bHRpLWNsYXNzIENTUyBiYXNlZCBhbmltYXRpb25zIHdpdGhcclxuLy8gICAgICAgLy9GaXJlZm94LiBETyBOT1QgUkVNT1ZFIFRISVMgTElORS5cclxuLy8gICAgICAgdmFyIGEgPSBib2R5RWwub2Zmc2V0V2lkdGggKyAxO1xyXG4vLyAgICAgICBmbigpO1xyXG4vLyAgICAgfSk7XHJcbi8vICAgfTtcclxuXHJcbi8vIH0pO1xyXG5cclxuLy8gU291cmNlOiBtb2RhbC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAubW9kYWwnLCBbJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMuZGltZW5zaW9ucyddKVxyXG5cclxuICAucHJvdmlkZXIoJyRtb2RhbCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICBiYWNrZHJvcEFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICBwcmVmaXhDbGFzczogJ21vZGFsJyxcclxuICAgICAgcHJlZml4RXZlbnQ6ICdtb2RhbCcsXHJcbiAgICAgIHBsYWNlbWVudDogJ3RvcCcsXHJcbiAgICAgIHRlbXBsYXRlOiAnbW9kYWwvbW9kYWwudHBsLmh0bWwnLFxyXG4gICAgICBjb250ZW50VGVtcGxhdGU6IGZhbHNlLFxyXG4gICAgICBjb250YWluZXI6IGZhbHNlLFxyXG4gICAgICBlbGVtZW50OiBudWxsLFxyXG4gICAgICBiYWNrZHJvcDogdHJ1ZSxcclxuICAgICAga2V5Ym9hcmQ6IHRydWUsXHJcbiAgICAgIGh0bWw6IGZhbHNlLFxyXG4gICAgICBzaG93OiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IFtcIiR3aW5kb3dcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJGNvbXBpbGVcIiwgXCIkcVwiLCBcIiR0ZW1wbGF0ZUNhY2hlXCIsIFwiJGh0dHBcIiwgXCIkYW5pbWF0ZVwiLCBcIiR0aW1lb3V0XCIsIFwiJHNjZVwiLCBcImRpbWVuc2lvbnNcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHJvb3RTY29wZSwgJGNvbXBpbGUsICRxLCAkdGVtcGxhdGVDYWNoZSwgJGh0dHAsICRhbmltYXRlLCAkdGltZW91dCwgJHNjZSwgZGltZW5zaW9ucykge1xyXG5cclxuICAgICAgdmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XHJcbiAgICAgIHZhciB0cmltID0gU3RyaW5nLnByb3RvdHlwZS50cmltO1xyXG4gICAgICB2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgJHdpbmRvdy5zZXRUaW1lb3V0O1xyXG4gICAgICB2YXIgYm9keUVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdy5kb2N1bWVudC5ib2R5KTtcclxuICAgICAgdmFyIGh0bWxSZXBsYWNlUmVnRXhwID0gL25nLWJpbmQ9XCIvaWc7XHJcblxyXG4gICAgICBmdW5jdGlvbiBNb2RhbEZhY3RvcnkoY29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciAkbW9kYWwgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gQ29tbW9uIHZhcnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9ICRtb2RhbC4kb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBkZWZhdWx0cywgY29uZmlnKTtcclxuICAgICAgICAkbW9kYWwuJHByb21pc2UgPSBmZXRjaFRlbXBsYXRlKG9wdGlvbnMudGVtcGxhdGUpO1xyXG4gICAgICAgIHZhciBzY29wZSA9ICRtb2RhbC4kc2NvcGUgPSBvcHRpb25zLnNjb3BlICYmIG9wdGlvbnMuc2NvcGUuJG5ldygpIHx8ICRyb290U2NvcGUuJG5ldygpO1xyXG4gICAgICAgIGlmKCFvcHRpb25zLmVsZW1lbnQgJiYgIW9wdGlvbnMuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICBvcHRpb25zLmNvbnRhaW5lciA9ICdib2R5JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgc3RyaW5nIG9wdGlvbnNcclxuICAgICAgICBmb3JFYWNoKFsndGl0bGUnLCAnY29udGVudCddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmKG9wdGlvbnNba2V5XSkgc2NvcGVba2V5XSA9ICRzY2UudHJ1c3RBc0h0bWwob3B0aW9uc1trZXldKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUHJvdmlkZSBzY29wZSBoZWxwZXJzXHJcbiAgICAgICAgc2NvcGUuJGhpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsLmhpZGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2NvcGUuJHNob3cgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsLnNob3coKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2NvcGUuJHRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwudG9nZ2xlKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IGNvbnRlbnRUZW1wbGF0ZSBvcHRpb25cclxuICAgICAgICBpZihvcHRpb25zLmNvbnRlbnRUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgJG1vZGFsLiRwcm9taXNlID0gJG1vZGFsLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24odGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlRWwgPSBhbmd1bGFyLmVsZW1lbnQodGVtcGxhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmV0Y2hUZW1wbGF0ZShvcHRpb25zLmNvbnRlbnRUZW1wbGF0ZSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29udGVudFRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGNvbnRlbnRFbCA9IGZpbmRFbGVtZW50KCdbbmctYmluZD1cImNvbnRlbnRcIl0nLCB0ZW1wbGF0ZUVsWzBdKS5yZW1vdmVBdHRyKCduZy1iaW5kJykuaHRtbChjb250ZW50VGVtcGxhdGUpO1xyXG4gICAgICAgICAgICAgIC8vIERyb3AgdGhlIGRlZmF1bHQgZm9vdGVyIGFzIHlvdSBwcm9iYWJseSBkb24ndCB3YW50IGl0IGlmIHlvdSB1c2UgYSBjdXN0b20gY29udGVudFRlbXBsYXRlXHJcbiAgICAgICAgICAgICAgaWYoIWNvbmZpZy50ZW1wbGF0ZSkgY29udGVudEVsLm5leHQoKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVFbFswXS5vdXRlckhUTUw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGZXRjaCwgY29tcGlsZSB0aGVuIGluaXRpYWxpemUgbW9kYWxcclxuICAgICAgICB2YXIgbW9kYWxMaW5rZXIsIG1vZGFsRWxlbWVudDtcclxuICAgICAgICB2YXIgYmFja2Ryb3BFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiJyArIG9wdGlvbnMucHJlZml4Q2xhc3MgKyAnLWJhY2tkcm9wXCIvPicpO1xyXG4gICAgICAgICRtb2RhbC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHRlbXBsYXRlKSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzT2JqZWN0KHRlbXBsYXRlKSkgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5kYXRhO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5odG1sKSB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoaHRtbFJlcGxhY2VSZWdFeHAsICduZy1iaW5kLWh0bWw9XCInKTtcclxuICAgICAgICAgIHRlbXBsYXRlID0gdHJpbS5hcHBseSh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgICBtb2RhbExpbmtlciA9ICRjb21waWxlKHRlbXBsYXRlKTtcclxuICAgICAgICAgICRtb2RhbC5pbml0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRtb2RhbC5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgLy8gT3B0aW9uczogc2hvd1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5zaG93KSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAkbW9kYWwuc2hvdygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJG1vZGFsLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAvLyBSZW1vdmUgZWxlbWVudFxyXG4gICAgICAgICAgaWYobW9kYWxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIG1vZGFsRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgbW9kYWxFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKGJhY2tkcm9wRWxlbWVudCkge1xyXG4gICAgICAgICAgICBiYWNrZHJvcEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIGJhY2tkcm9wRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gRGVzdHJveSBzY29wZVxyXG4gICAgICAgICAgc2NvcGUuJGRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJG1vZGFsLnNob3cgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICBzY29wZS4kZW1pdChvcHRpb25zLnByZWZpeEV2ZW50ICsgJy5zaG93LmJlZm9yZScsICRtb2RhbCk7XHJcbiAgICAgICAgICB2YXIgcGFyZW50O1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0VsZW1lbnQob3B0aW9ucy5jb250YWluZXIpKSB7XHJcbiAgICAgICAgICAgIHBhcmVudCA9IG9wdGlvbnMuY29udGFpbmVyO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFyZW50ID0gb3B0aW9ucy5jb250YWluZXIgPyBmaW5kRWxlbWVudChvcHRpb25zLmNvbnRhaW5lcikgOiBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIGFmdGVyID0gb3B0aW9ucy5jb250YWluZXIgPyBudWxsIDogb3B0aW9ucy5lbGVtZW50O1xyXG5cclxuICAgICAgICAgIC8vIEZldGNoIGEgY2xvbmVkIGVsZW1lbnQgbGlua2VkIGZyb20gdGVtcGxhdGVcclxuICAgICAgICAgIG1vZGFsRWxlbWVudCA9ICRtb2RhbC4kZWxlbWVudCA9IG1vZGFsTGlua2VyKHNjb3BlLCBmdW5jdGlvbihjbG9uZWRFbGVtZW50LCBzY29wZSkge30pO1xyXG5cclxuICAgICAgICAgIC8vIFNldCB0aGUgaW5pdGlhbCBwb3NpdGlvbmluZy5cclxuICAgICAgICAgIG1vZGFsRWxlbWVudC5jc3Moe2Rpc3BsYXk6ICdibG9jayd9KS5hZGRDbGFzcyhvcHRpb25zLnBsYWNlbWVudCk7XHJcblxyXG4gICAgICAgICAgLy8gT3B0aW9uczogYW5pbWF0aW9uXHJcbiAgICAgICAgICBpZihvcHRpb25zLmFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLmJhY2tkcm9wKSB7XHJcbiAgICAgICAgICAgICAgYmFja2Ryb3BFbGVtZW50LmFkZENsYXNzKG9wdGlvbnMuYmFja2Ryb3BBbmltYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1vZGFsRWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLmFuaW1hdGlvbik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYob3B0aW9ucy5iYWNrZHJvcCkge1xyXG4gICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihiYWNrZHJvcEVsZW1lbnQsIGJvZHlFbGVtZW50LCBudWxsLCBmdW5jdGlvbigpIHt9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRhbmltYXRlLmVudGVyKG1vZGFsRWxlbWVudCwgcGFyZW50LCBhZnRlciwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KG9wdGlvbnMucHJlZml4RXZlbnQgKyAnLnNob3cnLCAkbW9kYWwpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBzY29wZS4kaXNTaG93biA9IHRydWU7XHJcbiAgICAgICAgICBzY29wZS4kJHBoYXNlIHx8IChzY29wZS4kcm9vdCAmJiBzY29wZS4kcm9vdC4kJHBoYXNlKSB8fCBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAvLyBGb2N1cyBvbmNlIHRoZSBlbnRlci1hbmltYXRpb24gaGFzIHN0YXJ0ZWRcclxuICAgICAgICAgIC8vIFdlaXJkIFBoYW50b21KUyBidWcgaGFja1xyXG4gICAgICAgICAgdmFyIGVsID0gbW9kYWxFbGVtZW50WzBdO1xyXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBlbC5mb2N1cygpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgYm9keUVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy5wcmVmaXhDbGFzcyArICctb3BlbicpO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5hbmltYXRpb24pIHtcclxuICAgICAgICAgICAgYm9keUVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy5wcmVmaXhDbGFzcyArICctd2l0aC0nICsgb3B0aW9ucy5hbmltYXRpb24pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIEJpbmQgZXZlbnRzXHJcbiAgICAgICAgICBpZihvcHRpb25zLmJhY2tkcm9wKSB7XHJcbiAgICAgICAgICAgIG1vZGFsRWxlbWVudC5vbignY2xpY2snLCBoaWRlT25CYWNrZHJvcENsaWNrKTtcclxuICAgICAgICAgICAgYmFja2Ryb3BFbGVtZW50Lm9uKCdjbGljaycsIGhpZGVPbkJhY2tkcm9wQ2xpY2spO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICBtb2RhbEVsZW1lbnQub24oJ2tleXVwJywgJG1vZGFsLiRvbktleVVwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkbW9kYWwuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIHNjb3BlLiRlbWl0KG9wdGlvbnMucHJlZml4RXZlbnQgKyAnLmhpZGUuYmVmb3JlJywgJG1vZGFsKTtcclxuICAgICAgICAgICRhbmltYXRlLmxlYXZlKG1vZGFsRWxlbWVudCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KG9wdGlvbnMucHJlZml4RXZlbnQgKyAnLmhpZGUnLCAkbW9kYWwpO1xyXG4gICAgICAgICAgICBib2R5RWxlbWVudC5yZW1vdmVDbGFzcyhvcHRpb25zLnByZWZpeENsYXNzICsgJy1vcGVuJyk7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMuYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgYm9keUVsZW1lbnQucmVtb3ZlQ2xhc3Mob3B0aW9ucy5wcmVmaXhDbGFzcyArICctd2l0aC0nICsgb3B0aW9ucy5hbmltYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGlmKG9wdGlvbnMuYmFja2Ryb3ApIHtcclxuICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoYmFja2Ryb3BFbGVtZW50LCBmdW5jdGlvbigpIHt9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNjb3BlLiRpc1Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgICBzY29wZS4kJHBoYXNlIHx8IChzY29wZS4kcm9vdCAmJiBzY29wZS4kcm9vdC4kJHBoYXNlKSB8fCBzY29wZS4kZGlnZXN0KCk7XHJcblxyXG4gICAgICAgICAgLy8gVW5iaW5kIGV2ZW50c1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5iYWNrZHJvcCkge1xyXG4gICAgICAgICAgICBtb2RhbEVsZW1lbnQub2ZmKCdjbGljaycsIGhpZGVPbkJhY2tkcm9wQ2xpY2spO1xyXG4gICAgICAgICAgICBiYWNrZHJvcEVsZW1lbnQub2ZmKCdjbGljaycsIGhpZGVPbkJhY2tkcm9wQ2xpY2spO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICBtb2RhbEVsZW1lbnQub2ZmKCdrZXl1cCcsICRtb2RhbC4kb25LZXlVcCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJG1vZGFsLnRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIHNjb3BlLiRpc1Nob3duID8gJG1vZGFsLmhpZGUoKSA6ICRtb2RhbC5zaG93KCk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRtb2RhbC5mb2N1cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbW9kYWxFbGVtZW50WzBdLmZvY3VzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHJvdGVjdGVkIG1ldGhvZHNcclxuXHJcbiAgICAgICAgJG1vZGFsLiRvbktleVVwID0gZnVuY3Rpb24oZXZ0KSB7XHJcblxyXG4gICAgICAgICAgaWYgKGV2dC53aGljaCA9PT0gMjcgJiYgc2NvcGUuJGlzU2hvd24pIHtcclxuICAgICAgICAgICAgJG1vZGFsLmhpZGUoKTtcclxuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGlkZU9uQmFja2Ryb3BDbGljayhldnQpIHtcclxuICAgICAgICAgIGlmKGV2dC50YXJnZXQgIT09IGV2dC5jdXJyZW50VGFyZ2V0KSByZXR1cm47XHJcbiAgICAgICAgICBvcHRpb25zLmJhY2tkcm9wID09PSAnc3RhdGljJyA/ICRtb2RhbC5mb2N1cygpIDogJG1vZGFsLmhpZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAkbW9kYWw7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBIZWxwZXIgZnVuY3Rpb25zXHJcblxyXG4gICAgICBmdW5jdGlvbiBmaW5kRWxlbWVudChxdWVyeSwgZWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiBhbmd1bGFyLmVsZW1lbnQoKGVsZW1lbnQgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZmV0Y2hUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAkcS53aGVuKCR0ZW1wbGF0ZUNhY2hlLmdldCh0ZW1wbGF0ZSkgfHwgJGh0dHAuZ2V0KHRlbXBsYXRlKSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3QocmVzKSkge1xyXG4gICAgICAgICAgICAkdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGUsIHJlcy5kYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIE1vZGFsRmFjdG9yeTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNNb2RhbCcsIFtcIiR3aW5kb3dcIiwgXCIkc2NlXCIsIFwiJG1vZGFsXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRzY2UsICRtb2RhbCkge1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUFDJyxcclxuICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCB0cmFuc2NsdXNpb24pIHtcclxuXHJcbiAgICAgICAgLy8gRGlyZWN0aXZlIG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGUsIGVsZW1lbnQ6IGVsZW1lbnQsIHNob3c6IGZhbHNlfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWyd0ZW1wbGF0ZScsICdjb250ZW50VGVtcGxhdGUnLCAncGxhY2VtZW50JywgJ2JhY2tkcm9wJywgJ2tleWJvYXJkJywgJ2h0bWwnLCAnY29udGFpbmVyJywgJ2FuaW1hdGlvbiddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJba2V5XSkpIG9wdGlvbnNba2V5XSA9IGF0dHJba2V5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydCBzY29wZSBhcyBkYXRhLWF0dHJzXHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsndGl0bGUnLCAnY29udGVudCddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgIGF0dHJba2V5XSAmJiBhdHRyLiRvYnNlcnZlKGtleSwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHNjb3BlW2tleV0gPSAkc2NlLnRydXN0QXNIdG1sKG5ld1ZhbHVlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHNjb3BlIGFzIGFuIG9iamVjdFxyXG4gICAgICAgIGF0dHIuYnNNb2RhbCAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic01vZGFsLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3QobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHNjb3BlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzY29wZS5jb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgbW9kYWxcclxuICAgICAgICB2YXIgbW9kYWwgPSAkbW9kYWwob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXJcclxuICAgICAgICBlbGVtZW50Lm9uKGF0dHIudHJpZ2dlciB8fCAnY2xpY2snLCBtb2RhbC50b2dnbGUpO1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAobW9kYWwpIG1vZGFsLmRlc3Ryb3koKTtcclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgbW9kYWwgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxuLy8gU291cmNlOiBuYXZiYXIuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLm5hdmJhcicsIFtdKVxyXG5cclxuICAucHJvdmlkZXIoJyRuYXZiYXInLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBhY3RpdmVDbGFzczogJ2FjdGl2ZScsXHJcbiAgICAgIHJvdXRlQXR0cjogJ2RhdGEtbWF0Y2gtcm91dGUnLFxyXG4gICAgICBzdHJpY3Q6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4ge2RlZmF1bHRzOiBkZWZhdWx0c307XHJcbiAgICB9O1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic05hdmJhcicsIFtcIiR3aW5kb3dcIiwgXCIkbG9jYXRpb25cIiwgXCIkbmF2YmFyXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRsb2NhdGlvbiwgJG5hdmJhcikge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9ICRuYXZiYXIuZGVmYXVsdHM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGNvbnRyb2xsZXIpIHtcclxuXHJcbiAgICAgICAgLy8gRGlyZWN0aXZlIG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuY29weShkZWZhdWx0cyk7XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKE9iamVjdC5rZXlzKGRlZmF1bHRzKSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFdhdGNoIGZvciB0aGUgJGxvY2F0aW9uXHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIHJldHVybiAkbG9jYXRpb24ucGF0aCgpO1xyXG5cclxuICAgICAgICB9LCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuXHJcbiAgICAgICAgICB2YXIgbGlFbGVtZW50cyA9IGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbCgnbGlbJyArIG9wdGlvbnMucm91dGVBdHRyICsgJ10nKTtcclxuXHJcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobGlFbGVtZW50cywgZnVuY3Rpb24obGkpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaUVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQobGkpO1xyXG4gICAgICAgICAgICB2YXIgcGF0dGVybiA9IGxpRWxlbWVudC5hdHRyKG9wdGlvbnMucm91dGVBdHRyKS5yZXBsYWNlKCcvJywgJ1xcXFwvJyk7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMuc3RyaWN0KSB7XHJcbiAgICAgICAgICAgICAgcGF0dGVybiA9ICdeJyArIHBhdHRlcm4gKyAnJCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAocGF0dGVybiwgWydpJ10pO1xyXG5cclxuICAgICAgICAgICAgaWYocmVnZXhwLnRlc3QobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgbGlFbGVtZW50LmFkZENsYXNzKG9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxpRWxlbWVudC5yZW1vdmVDbGFzcyhvcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IHBvcG92ZXIuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnBvcG92ZXInLCBbJ21nY3JlYS5uZ1N0cmFwLnRvb2x0aXAnXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckcG9wb3ZlcicsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICBjdXN0b21DbGFzczogJycsXHJcbiAgICAgIGNvbnRhaW5lcjogZmFsc2UsXHJcbiAgICAgIHRhcmdldDogZmFsc2UsXHJcbiAgICAgIHBsYWNlbWVudDogJ3JpZ2h0JyxcclxuICAgICAgdGVtcGxhdGU6ICdwb3BvdmVyL3BvcG92ZXIudHBsLmh0bWwnLFxyXG4gICAgICBjb250ZW50VGVtcGxhdGU6IGZhbHNlLFxyXG4gICAgICB0cmlnZ2VyOiAnY2xpY2snLFxyXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcclxuICAgICAgaHRtbDogZmFsc2UsXHJcbiAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgY29udGVudDogJycsXHJcbiAgICAgIGRlbGF5OiAwXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IFtcIiR0b29sdGlwXCIsIGZ1bmN0aW9uKCR0b29sdGlwKSB7XHJcblxyXG4gICAgICBmdW5jdGlvbiBQb3BvdmVyRmFjdG9yeShlbGVtZW50LCBjb25maWcpIHtcclxuXHJcbiAgICAgICAgLy8gQ29tbW9uIHZhcnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBkZWZhdWx0cywgY29uZmlnKTtcclxuXHJcbiAgICAgICAgdmFyICRwb3BvdmVyID0gJHRvb2x0aXAoZWxlbWVudCwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgc3RyaW5nIG9wdGlvbnMgWy8qdGl0bGUsICovY29udGVudF1cclxuICAgICAgICBpZihvcHRpb25zLmNvbnRlbnQpIHtcclxuICAgICAgICAgICRwb3BvdmVyLiRzY29wZS5jb250ZW50ID0gb3B0aW9ucy5jb250ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICRwb3BvdmVyO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIFBvcG92ZXJGYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic1BvcG92ZXInLCBbXCIkd2luZG93XCIsIFwiJHNjZVwiLCBcIiRwb3BvdmVyXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRzY2UsICRwb3BvdmVyKSB7XHJcblxyXG4gICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8ICR3aW5kb3cuc2V0VGltZW91dDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG5cclxuICAgICAgICAvLyBEaXJlY3RpdmUgb3B0aW9uc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0ge3Njb3BlOiBzY29wZX07XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsndGVtcGxhdGUnLCAnY29udGVudFRlbXBsYXRlJywgJ3BsYWNlbWVudCcsICdjb250YWluZXInLCAndGFyZ2V0JywgJ2RlbGF5JywgJ3RyaWdnZXInLCAna2V5Ym9hcmQnLCAnaHRtbCcsICdhbmltYXRpb24nLCAnY3VzdG9tQ2xhc3MnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgZGF0YS1hdHRyc1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3RpdGxlJywgJ2NvbnRlbnQnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBhdHRyW2tleV0gJiYgYXR0ci4kb2JzZXJ2ZShrZXksIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBzY29wZVtrZXldID0gJHNjZS50cnVzdEFzSHRtbChuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuaXNEZWZpbmVkKG9sZFZhbHVlKSAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgcG9wb3ZlciAmJiBwb3BvdmVyLiRhcHBseVBsYWNlbWVudCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHNjb3BlIGFzIGFuIG9iamVjdFxyXG4gICAgICAgIGF0dHIuYnNQb3BvdmVyICYmIHNjb3BlLiR3YXRjaChhdHRyLmJzUG9wb3ZlciwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzT2JqZWN0KG5ld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChzY29wZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYW5ndWxhci5pc0RlZmluZWQob2xkVmFsdWUpICYmIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcG9wb3ZlciAmJiBwb3BvdmVyLiRhcHBseVBsYWNlbWVudCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIFZpc2liaWxpdHkgYmluZGluZyBzdXBwb3J0XHJcbiAgICAgICAgYXR0ci5ic1Nob3cgJiYgc2NvcGUuJHdhdGNoKGF0dHIuYnNTaG93LCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIGlmKCFwb3BvdmVyIHx8ICFhbmd1bGFyLmlzRGVmaW5lZChuZXdWYWx1ZSkpIHJldHVybjtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNTdHJpbmcobmV3VmFsdWUpKSBuZXdWYWx1ZSA9ICEhbmV3VmFsdWUubWF0Y2goJyw/KHBvcG92ZXIpLD8nKTtcclxuICAgICAgICAgIG5ld1ZhbHVlID09PSB0cnVlID8gcG9wb3Zlci5zaG93KCkgOiBwb3BvdmVyLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBwb3BvdmVyXHJcbiAgICAgICAgdmFyIHBvcG92ZXIgPSAkcG9wb3ZlcihlbGVtZW50LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHBvcG92ZXIpIHBvcG92ZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgb3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICBwb3BvdmVyID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogc2Nyb2xsc3B5LmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5zY3JvbGxzcHknLCBbJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMuZGVib3VuY2UnLCAnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kaW1lbnNpb25zJ10pXHJcblxyXG4gIC5wcm92aWRlcignJHNjcm9sbHNweScsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIC8vIFBvb2wgb2YgcmVnaXN0ZXJlZCBzcGllc1xyXG4gICAgdmFyIHNwaWVzID0gdGhpcy4kJHNwaWVzID0ge307XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgZGVib3VuY2U6IDE1MCxcclxuICAgICAgdGhyb3R0bGU6IDEwMCxcclxuICAgICAgb2Zmc2V0OiAxMDBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHdpbmRvd1wiLCBcIiRkb2N1bWVudFwiLCBcIiRyb290U2NvcGVcIiwgXCJkaW1lbnNpb25zXCIsIFwiZGVib3VuY2VcIiwgXCJ0aHJvdHRsZVwiLCBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQsICRyb290U2NvcGUsIGRpbWVuc2lvbnMsIGRlYm91bmNlLCB0aHJvdHRsZSkge1xyXG5cclxuICAgICAgdmFyIHdpbmRvd0VsID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpO1xyXG4gICAgICB2YXIgZG9jRWwgPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50LnByb3AoJ2RvY3VtZW50RWxlbWVudCcpKTtcclxuICAgICAgdmFyIGJvZHlFbCA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG5cclxuICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uc1xyXG5cclxuICAgICAgZnVuY3Rpb24gbm9kZU5hbWUoZWxlbWVudCwgbmFtZSkge1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50WzBdLm5vZGVOYW1lICYmIGVsZW1lbnRbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBTY3JvbGxTcHlGYWN0b3J5KGNvbmZpZykge1xyXG5cclxuICAgICAgICAvLyBDb21tb24gdmFyc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG4gICAgICAgIGlmKCFvcHRpb25zLmVsZW1lbnQpIG9wdGlvbnMuZWxlbWVudCA9IGJvZHlFbDtcclxuICAgICAgICB2YXIgaXNXaW5kb3dTcHkgPSBub2RlTmFtZShvcHRpb25zLmVsZW1lbnQsICdib2R5Jyk7XHJcbiAgICAgICAgdmFyIHNjcm9sbEVsID0gaXNXaW5kb3dTcHkgPyB3aW5kb3dFbCA6IG9wdGlvbnMuZWxlbWVudDtcclxuICAgICAgICB2YXIgc2Nyb2xsSWQgPSBpc1dpbmRvd1NweSA/ICd3aW5kb3cnIDogb3B0aW9ucy5pZDtcclxuXHJcbiAgICAgICAgLy8gVXNlIGV4aXN0aW5nIHNweVxyXG4gICAgICAgIGlmKHNwaWVzW3Njcm9sbElkXSkge1xyXG4gICAgICAgICAgc3BpZXNbc2Nyb2xsSWRdLiQkY291bnQrKztcclxuICAgICAgICAgIHJldHVybiBzcGllc1tzY3JvbGxJZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgJHNjcm9sbHNweSA9IHt9O1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIHZhcnNcclxuICAgICAgICB2YXIgdW5iaW5kVmlld0NvbnRlbnRMb2FkZWQsIHVuYmluZEluY2x1ZGVDb250ZW50TG9hZGVkO1xyXG4gICAgICAgIHZhciB0cmFja2VkRWxlbWVudHMgPSAkc2Nyb2xsc3B5LiR0cmFja2VkRWxlbWVudHMgPSBbXTtcclxuICAgICAgICB2YXIgc29ydGVkRWxlbWVudHMgPSBbXTtcclxuICAgICAgICB2YXIgYWN0aXZlVGFyZ2V0O1xyXG4gICAgICAgIHZhciBkZWJvdW5jZWRDaGVja1Bvc2l0aW9uO1xyXG4gICAgICAgIHZhciB0aHJvdHRsZWRDaGVja1Bvc2l0aW9uO1xyXG4gICAgICAgIHZhciBkZWJvdW5jZWRDaGVja09mZnNldHM7XHJcbiAgICAgICAgdmFyIHZpZXdwb3J0SGVpZ2h0O1xyXG4gICAgICAgIHZhciBzY3JvbGxUb3A7XHJcblxyXG4gICAgICAgICRzY3JvbGxzcHkuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIC8vIFNldHVwIGludGVybmFsIHJlZiBjb3VudGVyXHJcbiAgICAgICAgICB0aGlzLiQkY291bnQgPSAxO1xyXG5cclxuICAgICAgICAgIC8vIEJpbmQgZXZlbnRzXHJcbiAgICAgICAgICBkZWJvdW5jZWRDaGVja1Bvc2l0aW9uID0gZGVib3VuY2UodGhpcy5jaGVja1Bvc2l0aW9uLCBvcHRpb25zLmRlYm91bmNlKTtcclxuICAgICAgICAgIHRocm90dGxlZENoZWNrUG9zaXRpb24gPSB0aHJvdHRsZSh0aGlzLmNoZWNrUG9zaXRpb24sIG9wdGlvbnMudGhyb3R0bGUpO1xyXG4gICAgICAgICAgc2Nyb2xsRWwub24oJ2NsaWNrJywgdGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCk7XHJcbiAgICAgICAgICB3aW5kb3dFbC5vbigncmVzaXplJywgZGVib3VuY2VkQ2hlY2tQb3NpdGlvbik7XHJcbiAgICAgICAgICBzY3JvbGxFbC5vbignc2Nyb2xsJywgdGhyb3R0bGVkQ2hlY2tQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgZGVib3VuY2VkQ2hlY2tPZmZzZXRzID0gZGVib3VuY2UodGhpcy5jaGVja09mZnNldHMsIG9wdGlvbnMuZGVib3VuY2UpO1xyXG4gICAgICAgICAgdW5iaW5kVmlld0NvbnRlbnRMb2FkZWQgPSAkcm9vdFNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZGVib3VuY2VkQ2hlY2tPZmZzZXRzKTtcclxuICAgICAgICAgIHVuYmluZEluY2x1ZGVDb250ZW50TG9hZGVkID0gJHJvb3RTY29wZS4kb24oJyRpbmNsdWRlQ29udGVudExvYWRlZCcsIGRlYm91bmNlZENoZWNrT2Zmc2V0cyk7XHJcbiAgICAgICAgICBkZWJvdW5jZWRDaGVja09mZnNldHMoKTtcclxuXHJcbiAgICAgICAgICAvLyBSZWdpc3RlciBzcHkgZm9yIHJldXNlXHJcbiAgICAgICAgICBpZihzY3JvbGxJZCkge1xyXG4gICAgICAgICAgICBzcGllc1tzY3JvbGxJZF0gPSAkc2Nyb2xsc3B5O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAvLyBDaGVjayBpbnRlcm5hbCByZWYgY291bnRlclxyXG4gICAgICAgICAgdGhpcy4kJGNvdW50LS07XHJcbiAgICAgICAgICBpZih0aGlzLiQkY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBVbmJpbmQgZXZlbnRzXHJcbiAgICAgICAgICBzY3JvbGxFbC5vZmYoJ2NsaWNrJywgdGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCk7XHJcbiAgICAgICAgICB3aW5kb3dFbC5vZmYoJ3Jlc2l6ZScsIGRlYm91bmNlZENoZWNrUG9zaXRpb24pO1xyXG4gICAgICAgICAgc2Nyb2xsRWwub2ZmKCdzY3JvbGwnLCBkZWJvdW5jZWRDaGVja1Bvc2l0aW9uKTtcclxuICAgICAgICAgIHVuYmluZFZpZXdDb250ZW50TG9hZGVkKCk7XHJcbiAgICAgICAgICB1bmJpbmRJbmNsdWRlQ29udGVudExvYWRlZCgpO1xyXG4gICAgICAgICAgaWYgKHNjcm9sbElkKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBzcGllc1tzY3JvbGxJZF07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjcm9sbHNweS5jaGVja1Bvc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgLy8gTm90IHJlYWR5IHlldFxyXG4gICAgICAgICAgaWYoIXNvcnRlZEVsZW1lbnRzLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgICAgICBzY3JvbGxUb3AgPSAoaXNXaW5kb3dTcHkgPyAkd2luZG93LnBhZ2VZT2Zmc2V0IDogc2Nyb2xsRWwucHJvcCgnc2Nyb2xsVG9wJykpIHx8IDA7XHJcblxyXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSB2aWV3cG9ydCBoZWlnaHQgZm9yIHVzZSBieSB0aGUgY29tcG9uZW50c1xyXG4gICAgICAgICAgdmlld3BvcnRIZWlnaHQgPSBNYXRoLm1heCgkd2luZG93LmlubmVySGVpZ2h0LCBkb2NFbC5wcm9wKCdjbGllbnRIZWlnaHQnKSk7XHJcblxyXG4gICAgICAgICAgLy8gQWN0aXZhdGUgZmlyc3QgZWxlbWVudCBpZiBzY3JvbGwgaXMgc21hbGxlclxyXG4gICAgICAgICAgaWYoc2Nyb2xsVG9wIDwgc29ydGVkRWxlbWVudHNbMF0ub2Zmc2V0VG9wICYmIGFjdGl2ZVRhcmdldCAhPT0gc29ydGVkRWxlbWVudHNbMF0udGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkc2Nyb2xsc3B5LiRhY3RpdmF0ZUVsZW1lbnQoc29ydGVkRWxlbWVudHNbMF0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIEFjdGl2YXRlIHByb3BlciBlbGVtZW50XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gc29ydGVkRWxlbWVudHMubGVuZ3RoOyBpLS07KSB7XHJcbiAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoc29ydGVkRWxlbWVudHNbaV0ub2Zmc2V0VG9wKSB8fCBzb3J0ZWRFbGVtZW50c1tpXS5vZmZzZXRUb3AgPT09IG51bGwpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZihhY3RpdmVUYXJnZXQgPT09IHNvcnRlZEVsZW1lbnRzW2ldLnRhcmdldCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmKHNjcm9sbFRvcCA8IHNvcnRlZEVsZW1lbnRzW2ldLm9mZnNldFRvcCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmKHNvcnRlZEVsZW1lbnRzW2kgKyAxXSAmJiBzY3JvbGxUb3AgPiBzb3J0ZWRFbGVtZW50c1tpICsgMV0ub2Zmc2V0VG9wKSBjb250aW51ZTtcclxuICAgICAgICAgICAgcmV0dXJuICRzY3JvbGxzcHkuJGFjdGl2YXRlRWxlbWVudChzb3J0ZWRFbGVtZW50c1tpXSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY3JvbGxzcHkuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3AgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jaGVja1Bvc2l0aW9uLCAxKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LiRhY3RpdmF0ZUVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICBpZihhY3RpdmVUYXJnZXQpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSAkc2Nyb2xsc3B5LiRnZXRUcmFja2VkRWxlbWVudChhY3RpdmVUYXJnZXQpO1xyXG4gICAgICAgICAgICBpZihhY3RpdmVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudC5zb3VyY2UucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgIGlmKG5vZGVOYW1lKGFjdGl2ZUVsZW1lbnQuc291cmNlLCAnbGknKSAmJiBub2RlTmFtZShhY3RpdmVFbGVtZW50LnNvdXJjZS5wYXJlbnQoKS5wYXJlbnQoKSwgJ2xpJykpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQuc291cmNlLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFjdGl2ZVRhcmdldCA9IGVsZW1lbnQudGFyZ2V0O1xyXG4gICAgICAgICAgZWxlbWVudC5zb3VyY2UuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgaWYobm9kZU5hbWUoZWxlbWVudC5zb3VyY2UsICdsaScpICYmIG5vZGVOYW1lKGVsZW1lbnQuc291cmNlLnBhcmVudCgpLnBhcmVudCgpLCAnbGknKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnNvdXJjZS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjcm9sbHNweS4kZ2V0VHJhY2tlZEVsZW1lbnQgPSBmdW5jdGlvbih0YXJnZXQpIHtcclxuICAgICAgICAgIHJldHVybiB0cmFja2VkRWxlbWVudHMuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqLnRhcmdldCA9PT0gdGFyZ2V0O1xyXG4gICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gVHJhY2sgb2Zmc2V0cyBiZWhhdmlvclxyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LmNoZWNrT2Zmc2V0cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0cmFja2VkRWxlbWVudHMsIGZ1bmN0aW9uKHRyYWNrZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0cmFja2VkRWxlbWVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICB0cmFja2VkRWxlbWVudC5vZmZzZXRUb3AgPSB0YXJnZXRFbGVtZW50ID8gZGltZW5zaW9ucy5vZmZzZXQodGFyZ2V0RWxlbWVudCkudG9wIDogbnVsbDtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5vZmZzZXQgJiYgdHJhY2tlZEVsZW1lbnQub2Zmc2V0VG9wICE9PSBudWxsKSB0cmFja2VkRWxlbWVudC5vZmZzZXRUb3AgLT0gb3B0aW9ucy5vZmZzZXQgKiAxO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgc29ydGVkRWxlbWVudHMgPSB0cmFja2VkRWxlbWVudHNcclxuICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsLm9mZnNldFRvcCAhPT0gbnVsbDtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLm9mZnNldFRvcCAtIGIub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgZGVib3VuY2VkQ2hlY2tQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LnRyYWNrRWxlbWVudCA9IGZ1bmN0aW9uKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICAgICAgICB0cmFja2VkRWxlbWVudHMucHVzaCh7dGFyZ2V0OiB0YXJnZXQsIHNvdXJjZTogc291cmNlfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjcm9sbHNweS51bnRyYWNrRWxlbWVudCA9IGZ1bmN0aW9uKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICAgICAgICB2YXIgdG9EZWxldGU7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gdHJhY2tlZEVsZW1lbnRzLmxlbmd0aDsgaS0tOykge1xyXG4gICAgICAgICAgICBpZih0cmFja2VkRWxlbWVudHNbaV0udGFyZ2V0ID09PSB0YXJnZXQgJiYgdHJhY2tlZEVsZW1lbnRzW2ldLnNvdXJjZSA9PT0gc291cmNlKSB7XHJcbiAgICAgICAgICAgICAgdG9EZWxldGUgPSBpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0cmFja2VkRWxlbWVudHMgPSB0cmFja2VkRWxlbWVudHMuc3BsaWNlKHRvRGVsZXRlLCAxKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LmFjdGl2YXRlID0gZnVuY3Rpb24oaSkge1xyXG4gICAgICAgICAgdHJhY2tlZEVsZW1lbnRzW2ldLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIHBsdWdpblxyXG5cclxuICAgICAgICAkc2Nyb2xsc3B5LmluaXQoKTtcclxuICAgICAgICByZXR1cm4gJHNjcm9sbHNweTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBTY3JvbGxTcHlGYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic1Njcm9sbHNweScsIFtcIiRyb290U2NvcGVcIiwgXCJkZWJvdW5jZVwiLCBcImRpbWVuc2lvbnNcIiwgXCIkc2Nyb2xsc3B5XCIsIGZ1bmN0aW9uKCRyb290U2NvcGUsIGRlYm91bmNlLCBkaW1lbnNpb25zLCAkc2Nyb2xsc3B5KSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG5cclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGV9O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ29mZnNldCcsICd0YXJnZXQnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBzY3JvbGxzcHkgPSAkc2Nyb2xsc3B5KG9wdGlvbnMpO1xyXG4gICAgICAgIHNjcm9sbHNweS50cmFja0VsZW1lbnQob3B0aW9ucy50YXJnZXQsIGVsZW1lbnQpO1xyXG5cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoc2Nyb2xsc3B5KSB7XHJcbiAgICAgICAgICAgIHNjcm9sbHNweS51bnRyYWNrRWxlbWVudChvcHRpb25zLnRhcmdldCwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgIHNjcm9sbHNweS5kZXN0cm95KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICAgIHNjcm9sbHNweSA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSlcclxuXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzU2Nyb2xsc3B5TGlzdCcsIFtcIiRyb290U2NvcGVcIiwgXCJkZWJvdW5jZVwiLCBcImRpbWVuc2lvbnNcIiwgXCIkc2Nyb2xsc3B5XCIsIGZ1bmN0aW9uKCRyb290U2NvcGUsIGRlYm91bmNlLCBkaW1lbnNpb25zLCAkc2Nyb2xsc3B5KSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgY29tcGlsZTogZnVuY3Rpb24gcG9zdExpbmsoZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIHZhciBjaGlsZHJlbiA9IGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbCgnbGkgPiBhW2hyZWZdJyk7XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xyXG4gICAgICAgICAgdmFyIGNoaWxkRWwgPSBhbmd1bGFyLmVsZW1lbnQoY2hpbGQpO1xyXG4gICAgICAgICAgY2hpbGRFbC5wYXJlbnQoKS5hdHRyKCdicy1zY3JvbGxzcHknLCAnJykuYXR0cignZGF0YS10YXJnZXQnLCBjaGlsZEVsLmF0dHIoJ2hyZWYnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IHNlbGVjdC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuc2VsZWN0JywgWydtZ2NyZWEubmdTdHJhcC50b29sdGlwJywgJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMucGFyc2VPcHRpb25zJ10pXHJcblxyXG4gIC5wcm92aWRlcignJHNlbGVjdCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICBwcmVmaXhDbGFzczogJ3NlbGVjdCcsXHJcbiAgICAgIHByZWZpeEV2ZW50OiAnJHNlbGVjdCcsXHJcbiAgICAgIHBsYWNlbWVudDogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgdGVtcGxhdGU6ICdzZWxlY3Qvc2VsZWN0LnRwbC5odG1sJyxcclxuICAgICAgdHJpZ2dlcjogJ2ZvY3VzJyxcclxuICAgICAgY29udGFpbmVyOiBmYWxzZSxcclxuICAgICAga2V5Ym9hcmQ6IHRydWUsXHJcbiAgICAgIGh0bWw6IGZhbHNlLFxyXG4gICAgICBkZWxheTogMCxcclxuICAgICAgbXVsdGlwbGU6IGZhbHNlLFxyXG4gICAgICBhbGxOb25lQnV0dG9uczogZmFsc2UsXHJcbiAgICAgIHNvcnQ6IHRydWUsXHJcbiAgICAgIGNhcmV0SHRtbDogJyZuYnNwOzxzcGFuIGNsYXNzPVwiY2FyZXRcIj48L3NwYW4+JyxcclxuICAgICAgcGxhY2Vob2xkZXI6ICdDaG9vc2UgYW1vbmcgdGhlIGZvbGxvd2luZy4uLicsXHJcbiAgICAgIG1heExlbmd0aDogMyxcclxuICAgICAgbWF4TGVuZ3RoSHRtbDogJ3NlbGVjdGVkJyxcclxuICAgICAgaWNvbkNoZWNrbWFyazogJ2dseXBoaWNvbiBnbHlwaGljb24tb2snXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IFtcIiR3aW5kb3dcIiwgXCIkZG9jdW1lbnRcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJHRvb2x0aXBcIiwgZnVuY3Rpb24oJHdpbmRvdywgJGRvY3VtZW50LCAkcm9vdFNjb3BlLCAkdG9vbHRpcCkge1xyXG5cclxuICAgICAgdmFyIGJvZHlFbCA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG4gICAgICB2YXIgaXNOYXRpdmUgPSAvKGlwKGF8bylkfGlwaG9uZXxhbmRyb2lkKS9pZy50ZXN0KCR3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICAgIHZhciBpc1RvdWNoID0gKCdjcmVhdGVUb3VjaCcgaW4gJHdpbmRvdy5kb2N1bWVudCkgJiYgaXNOYXRpdmU7XHJcblxyXG4gICAgICBmdW5jdGlvbiBTZWxlY3RGYWN0b3J5KGVsZW1lbnQsIGNvbnRyb2xsZXIsIGNvbmZpZykge1xyXG5cclxuICAgICAgICB2YXIgJHNlbGVjdCA9IHt9O1xyXG5cclxuICAgICAgICAvLyBDb21tb24gdmFyc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG5cclxuICAgICAgICAkc2VsZWN0ID0gJHRvb2x0aXAoZWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgICAgICAgdmFyIHNjb3BlID0gJHNlbGVjdC4kc2NvcGU7XHJcblxyXG4gICAgICAgIHNjb3BlLiRtYXRjaGVzID0gW107XHJcbiAgICAgICAgc2NvcGUuJGFjdGl2ZUluZGV4ID0gMDtcclxuICAgICAgICBzY29wZS4kaXNNdWx0aXBsZSA9IG9wdGlvbnMubXVsdGlwbGU7XHJcbiAgICAgICAgc2NvcGUuJHNob3dBbGxOb25lQnV0dG9ucyA9IG9wdGlvbnMuYWxsTm9uZUJ1dHRvbnMgJiYgb3B0aW9ucy5tdWx0aXBsZTtcclxuICAgICAgICBzY29wZS4kaWNvbkNoZWNrbWFyayA9IG9wdGlvbnMuaWNvbkNoZWNrbWFyaztcclxuXHJcbiAgICAgICAgc2NvcGUuJGFjdGl2YXRlID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNlbGVjdC5hY3RpdmF0ZShpbmRleCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzY29wZS4kc2VsZWN0ID0gZnVuY3Rpb24oaW5kZXgsIGV2dCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2VsZWN0LnNlbGVjdChpbmRleCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzY29wZS4kaXNWaXNpYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJHNlbGVjdC4kaXNWaXNpYmxlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2NvcGUuJGlzQWN0aXZlID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgIHJldHVybiAkc2VsZWN0LiRpc0FjdGl2ZShpbmRleCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2NvcGUuJHNlbGVjdEFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NvcGUuJG1hdGNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCFzY29wZS4kaXNBY3RpdmUoaSkpIHtcclxuICAgICAgICAgICAgICBzY29wZS4kc2VsZWN0KGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2NvcGUuJHNlbGVjdE5vbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjb3BlLiRtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzY29wZS4kaXNBY3RpdmUoaSkpIHtcclxuICAgICAgICAgICAgICBzY29wZS4kc2VsZWN0KGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgJHNlbGVjdC51cGRhdGUgPSBmdW5jdGlvbihtYXRjaGVzKSB7XHJcbiAgICAgICAgICBzY29wZS4kbWF0Y2hlcyA9IG1hdGNoZXM7XHJcbiAgICAgICAgICAkc2VsZWN0LiR1cGRhdGVBY3RpdmVJbmRleCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzZWxlY3QuYWN0aXZhdGUgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgICBzY29wZS4kYWN0aXZlSW5kZXguc29ydCgpO1xyXG4gICAgICAgICAgICAkc2VsZWN0LiRpc0FjdGl2ZShpbmRleCkgPyBzY29wZS4kYWN0aXZlSW5kZXguc3BsaWNlKHNjb3BlLiRhY3RpdmVJbmRleC5pbmRleE9mKGluZGV4KSwgMSkgOiBzY29wZS4kYWN0aXZlSW5kZXgucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMuc29ydCkgc2NvcGUuJGFjdGl2ZUluZGV4LnNvcnQoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiRhY3RpdmVJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHNjb3BlLiRhY3RpdmVJbmRleDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2VsZWN0LnNlbGVjdCA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICB2YXIgdmFsdWUgPSBzY29wZS4kbWF0Y2hlc1tpbmRleF0udmFsdWU7XHJcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzZWxlY3QuYWN0aXZhdGUoaW5kZXgpO1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLm11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKHNjb3BlLiRhY3RpdmVJbmRleC5tYXAoZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzY29wZS4kbWF0Y2hlc1tpbmRleF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZpZXdWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgLy8gSGlkZSBpZiBzaW5nbGUgc2VsZWN0XHJcbiAgICAgICAgICAgICAgJHNlbGVjdC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgLy8gRW1pdCBldmVudFxyXG4gICAgICAgICAgc2NvcGUuJGVtaXQob3B0aW9ucy5wcmVmaXhFdmVudCArICcuc2VsZWN0JywgdmFsdWUsIGluZGV4KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAkc2VsZWN0LiR1cGRhdGVBY3RpdmVJbmRleCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYoY29udHJvbGxlci4kbW9kZWxWYWx1ZSAmJiBzY29wZS4kbWF0Y2hlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5tdWx0aXBsZSAmJiBhbmd1bGFyLmlzQXJyYXkoY29udHJvbGxlci4kbW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICBzY29wZS4kYWN0aXZlSW5kZXggPSBjb250cm9sbGVyLiRtb2RlbFZhbHVlLm1hcChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzZWxlY3QuJGdldEluZGV4KHZhbHVlKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzY29wZS4kYWN0aXZlSW5kZXggPSAkc2VsZWN0LiRnZXRJbmRleChjb250cm9sbGVyLiRtb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmKHNjb3BlLiRhY3RpdmVJbmRleCA+PSBzY29wZS4kbWF0Y2hlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2NvcGUuJGFjdGl2ZUluZGV4ID0gb3B0aW9ucy5tdWx0aXBsZSA/IFtdIDogMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2VsZWN0LiRpc1Zpc2libGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKCFvcHRpb25zLm1pbkxlbmd0aCB8fCAhY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2NvcGUuJG1hdGNoZXMubGVuZ3RoO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gbWluTGVuZ3RoIHN1cHBvcnRcclxuICAgICAgICAgIHJldHVybiBzY29wZS4kbWF0Y2hlcy5sZW5ndGggJiYgY29udHJvbGxlci4kdmlld1ZhbHVlLmxlbmd0aCA+PSBvcHRpb25zLm1pbkxlbmd0aDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2VsZWN0LiRpc0FjdGl2ZSA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICBpZihvcHRpb25zLm11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzY29wZS4kYWN0aXZlSW5kZXguaW5kZXhPZihpbmRleCkgIT09IC0xO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRhY3RpdmVJbmRleCA9PT0gaW5kZXg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNlbGVjdC4kZ2V0SW5kZXggPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgdmFyIGwgPSBzY29wZS4kbWF0Y2hlcy5sZW5ndGgsIGkgPSBsO1xyXG4gICAgICAgICAgaWYoIWwpIHJldHVybjtcclxuICAgICAgICAgIGZvcihpID0gbDsgaS0tOykge1xyXG4gICAgICAgICAgICBpZihzY29wZS4kbWF0Y2hlc1tpXS52YWx1ZSA9PT0gdmFsdWUpIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoaSA8IDApIHJldHVybjtcclxuICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzZWxlY3QuJG9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAvLyBQcmV2ZW50IGJsdXIgb24gbW91c2Vkb3duIG9uIC5kcm9wZG93bi1tZW51XHJcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIC8vIEVtdWxhdGUgY2xpY2sgZm9yIG1vYmlsZSBkZXZpY2VzXHJcbiAgICAgICAgICBpZihpc1RvdWNoKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbCA9IGFuZ3VsYXIuZWxlbWVudChldnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdGFyZ2V0RWwudHJpZ2dlckhhbmRsZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNlbGVjdC4kb25LZXlEb3duID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICBpZiAoIS8oOXwxM3wzOHw0MCkvLnRlc3QoZXZ0LmtleUNvZGUpKSByZXR1cm47XHJcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAvLyBTZWxlY3Qgd2l0aCBlbnRlclxyXG4gICAgICAgICAgaWYoIW9wdGlvbnMubXVsdGlwbGUgJiYgKGV2dC5rZXlDb2RlID09PSAxMyB8fCBldnQua2V5Q29kZSA9PT0gOSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzZWxlY3Quc2VsZWN0KHNjb3BlLiRhY3RpdmVJbmRleCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gTmF2aWdhdGUgd2l0aCBrZXlib2FyZFxyXG4gICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDM4ICYmIHNjb3BlLiRhY3RpdmVJbmRleCA+IDApIHNjb3BlLiRhY3RpdmVJbmRleC0tO1xyXG4gICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gNDAgJiYgc2NvcGUuJGFjdGl2ZUluZGV4IDwgc2NvcGUuJG1hdGNoZXMubGVuZ3RoIC0gMSkgc2NvcGUuJGFjdGl2ZUluZGV4Kys7XHJcbiAgICAgICAgICBlbHNlIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoc2NvcGUuJGFjdGl2ZUluZGV4KSkgc2NvcGUuJGFjdGl2ZUluZGV4ID0gMDtcclxuICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBPdmVycmlkZXNcclxuXHJcbiAgICAgICAgdmFyIF9zaG93ID0gJHNlbGVjdC5zaG93O1xyXG4gICAgICAgICRzZWxlY3Quc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgX3Nob3coKTtcclxuICAgICAgICAgIGlmKG9wdGlvbnMubXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgJHNlbGVjdC4kZWxlbWVudC5hZGRDbGFzcygnc2VsZWN0LW11bHRpcGxlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2VsZWN0LiRlbGVtZW50Lm9uKGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgJHNlbGVjdC4kb25Nb3VzZURvd24pO1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLmtleWJvYXJkKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudC5vbigna2V5ZG93bicsICRzZWxlY3QuJG9uS2V5RG93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBfaGlkZSA9ICRzZWxlY3QuaGlkZTtcclxuICAgICAgICAkc2VsZWN0LmhpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRzZWxlY3QuJGVsZW1lbnQub2ZmKGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgJHNlbGVjdC4kb25Nb3VzZURvd24pO1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9mZigna2V5ZG93bicsICRzZWxlY3QuJG9uS2V5RG93bik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBfaGlkZSh0cnVlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gJHNlbGVjdDtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFNlbGVjdEZhY3RvcnkuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgcmV0dXJuIFNlbGVjdEZhY3Rvcnk7XHJcblxyXG4gICAgfV07XHJcblxyXG4gIH0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzU2VsZWN0JywgW1wiJHdpbmRvd1wiLCBcIiRwYXJzZVwiLCBcIiRxXCIsIFwiJHNlbGVjdFwiLCBcIiRwYXJzZU9wdGlvbnNcIiwgZnVuY3Rpb24oJHdpbmRvdywgJHBhcnNlLCAkcSwgJHNlbGVjdCwgJHBhcnNlT3B0aW9ucykge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9ICRzZWxlY3QuZGVmYXVsdHM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjb250cm9sbGVyKSB7XHJcblxyXG4gICAgICAgIC8vIERpcmVjdGl2ZSBvcHRpb25zXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7c2NvcGU6IHNjb3BlfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWydwbGFjZW1lbnQnLCAnY29udGFpbmVyJywgJ2RlbGF5JywgJ3RyaWdnZXInLCAna2V5Ym9hcmQnLCAnaHRtbCcsICdhbmltYXRpb24nLCAndGVtcGxhdGUnLCAncGxhY2Vob2xkZXInLCAnbXVsdGlwbGUnLCAnYWxsTm9uZUJ1dHRvbnMnLCAnbWF4TGVuZ3RoJywgJ21heExlbmd0aEh0bWwnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChhdHRyW2tleV0pKSBvcHRpb25zW2tleV0gPSBhdHRyW2tleV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBzdXBwb3J0IGZvciBzZWxlY3QgbWFya3VwXHJcbiAgICAgICAgaWYoZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc2VsZWN0Jykge1xyXG4gICAgICAgICAgdmFyIGlucHV0RWwgPSBlbGVtZW50O1xyXG4gICAgICAgICAgaW5wdXRFbC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIj48L2J1dHRvbj4nKTtcclxuICAgICAgICAgIGlucHV0RWwuYWZ0ZXIoZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCdWlsZCBwcm9wZXIgbmdPcHRpb25zXHJcbiAgICAgICAgdmFyIHBhcnNlZE9wdGlvbnMgPSAkcGFyc2VPcHRpb25zKGF0dHIubmdPcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzZWxlY3RcclxuICAgICAgICB2YXIgc2VsZWN0ID0gJHNlbGVjdChlbGVtZW50LCBjb250cm9sbGVyLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gV2F0Y2ggbmdPcHRpb25zIHZhbHVlcyBiZWZvcmUgZmlsdGVyaW5nIGZvciBjaGFuZ2VzXHJcbiAgICAgICAgdmFyIHdhdGNoZWRPcHRpb25zID0gcGFyc2VkT3B0aW9ucy4kbWF0Y2hbN10ucmVwbGFjZSgvXFx8LisvLCAnJykudHJpbSgpO1xyXG4gICAgICAgIHNjb3BlLiR3YXRjaCh3YXRjaGVkT3B0aW9ucywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJ3Njb3BlLiR3YXRjaCglcyknLCB3YXRjaGVkT3B0aW9ucywgbmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAgIHBhcnNlZE9wdGlvbnMudmFsdWVzRm4oc2NvcGUsIGNvbnRyb2xsZXIpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbih2YWx1ZXMpIHtcclxuICAgICAgICAgICAgc2VsZWN0LnVwZGF0ZSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBXYXRjaCBtb2RlbCBmb3IgY2hhbmdlc1xyXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nTW9kZWwsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCdzY29wZS4kd2F0Y2goJXMpJywgYXR0ci5uZ01vZGVsLCBuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgc2VsZWN0LiR1cGRhdGVBY3RpdmVJbmRleCgpO1xyXG4gICAgICAgICAgY29udHJvbGxlci4kcmVuZGVyKCk7XHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIE1vZGVsIHJlbmRlcmluZyBpbiB2aWV3XHJcbiAgICAgICAgY29udHJvbGxlci4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckcmVuZGVyJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCAnY29udHJvbGxlci4kbW9kZWxWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCAnY29udHJvbGxlci4kdmlld1ZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSwgY29udHJvbGxlci4kdmlld1ZhbHVlKTtcclxuICAgICAgICAgIHZhciBzZWxlY3RlZCwgaW5kZXg7XHJcbiAgICAgICAgICBpZihvcHRpb25zLm11bHRpcGxlICYmIGFuZ3VsYXIuaXNBcnJheShjb250cm9sbGVyLiRtb2RlbFZhbHVlKSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZCA9IGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgaW5kZXggPSBzZWxlY3QuJGdldEluZGV4KHZhbHVlKTtcclxuICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5pc0RlZmluZWQoaW5kZXgpID8gc2VsZWN0LiRzY29wZS4kbWF0Y2hlc1tpbmRleF0ubGFiZWwgOiBmYWxzZTtcclxuICAgICAgICAgICAgfSkuZmlsdGVyKGFuZ3VsYXIuaXNEZWZpbmVkKTtcclxuICAgICAgICAgICAgaWYoc2VsZWN0ZWQubGVuZ3RoID4gKG9wdGlvbnMubWF4TGVuZ3RoIHx8IGRlZmF1bHRzLm1heExlbmd0aCkpIHtcclxuICAgICAgICAgICAgICBzZWxlY3RlZCA9IHNlbGVjdGVkLmxlbmd0aCArICcgJyArIChvcHRpb25zLm1heExlbmd0aEh0bWwgfHwgZGVmYXVsdHMubWF4TGVuZ3RoSHRtbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBzZWxlY3RlZC5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmRleCA9IHNlbGVjdC4kZ2V0SW5kZXgoY29udHJvbGxlci4kbW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkID0gYW5ndWxhci5pc0RlZmluZWQoaW5kZXgpID8gc2VsZWN0LiRzY29wZS4kbWF0Y2hlc1tpbmRleF0ubGFiZWwgOiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsZW1lbnQuaHRtbCgoc2VsZWN0ZWQgPyBzZWxlY3RlZCA6IGF0dHIucGxhY2Vob2xkZXIgfHwgZGVmYXVsdHMucGxhY2Vob2xkZXIpICsgZGVmYXVsdHMuY2FyZXRIdG1sKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoc2VsZWN0KSBzZWxlY3QuZGVzdHJveSgpO1xyXG4gICAgICAgICAgb3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICBzZWxlY3QgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pO1xyXG5cclxuLy8gU291cmNlOiB0YWIuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnRhYicsIFtdKVxyXG5cclxuICAucHJvdmlkZXIoJyR0YWInLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xyXG4gICAgICBhbmltYXRpb246ICdhbS1mYWRlJyxcclxuICAgICAgdGVtcGxhdGU6ICd0YWIvdGFiLnRwbC5odG1sJyxcclxuICAgICAgbmF2Q2xhc3M6ICduYXYtdGFicycsXHJcbiAgICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJ1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgY29udHJvbGxlciA9IHRoaXMuY29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAvLyBBdHRyaWJ1dGVzIG9wdGlvbnNcclxuICAgICAgc2VsZi4kb3B0aW9ucyA9IGFuZ3VsYXIuY29weShkZWZhdWx0cyk7XHJcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ2FuaW1hdGlvbicsICduYXZDbGFzcycsICdhY3RpdmVDbGFzcyddLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnNba2V5XSkpIHNlbGYuJG9wdGlvbnNba2V5XSA9ICRhdHRyc1trZXldO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFB1Ymxpc2ggb3B0aW9ucyBvbiBzY29wZVxyXG4gICAgICAkc2NvcGUuJG5hdkNsYXNzID0gc2VsZi4kb3B0aW9ucy5uYXZDbGFzcztcclxuICAgICAgJHNjb3BlLiRhY3RpdmVDbGFzcyA9IHNlbGYuJG9wdGlvbnMuYWN0aXZlQ2xhc3M7XHJcblxyXG4gICAgICBzZWxmLiRwYW5lcyA9ICRzY29wZS4kcGFuZXMgPSBbXTtcclxuXHJcbiAgICAgIHNlbGYuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMgPSBbXTtcclxuXHJcbiAgICAgIHNlbGYuJHB1c2ggPSBmdW5jdGlvbihwYW5lKSB7XHJcbiAgICAgICAgc2VsZi4kcGFuZXMucHVzaChwYW5lKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNlbGYuJHBhbmVzLiRhY3RpdmUgPSAwO1xyXG4gICAgICBzZWxmLiRzZXRBY3RpdmUgPSAkc2NvcGUuJHNldEFjdGl2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgc2VsZi4kcGFuZXMuJGFjdGl2ZSA9IHZhbHVlO1xyXG4gICAgICAgIHNlbGYuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihmbikge1xyXG4gICAgICAgICAgZm4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgJHRhYiA9IHt9O1xyXG4gICAgICAkdGFiLmRlZmF1bHRzID0gZGVmYXVsdHM7XHJcbiAgICAgICR0YWIuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XHJcbiAgICAgIHJldHVybiAkdGFiO1xyXG4gICAgfTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNUYWJzJywgW1wiJHdpbmRvd1wiLCBcIiRhbmltYXRlXCIsIFwiJHRhYlwiLCBmdW5jdGlvbigkd2luZG93LCAkYW5pbWF0ZSwgJHRhYikge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9ICR0YWIuZGVmYXVsdHM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVxdWlyZTogWyc/bmdNb2RlbCcsICdic1RhYnMnXSxcclxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsICR0YWIuY29udHJvbGxlcl0sXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgcmV0dXJuIGF0dHIudGVtcGxhdGUgfHwgZGVmYXVsdHMudGVtcGxhdGU7XHJcbiAgICAgIH0sXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMpIHtcclxuXHJcbiAgICAgICAgdmFyIG5nTW9kZWxDdHJsID0gY29udHJvbGxlcnNbMF07XHJcbiAgICAgICAgdmFyIGJzVGFic0N0cmwgPSBjb250cm9sbGVyc1sxXTtcclxuXHJcbiAgICAgICAgaWYobmdNb2RlbEN0cmwpIHtcclxuXHJcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIG1vZGVsVmFsdWUgZm9sbG93aW5nXHJcbiAgICAgICAgICBic1RhYnNDdHJsLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoYnNUYWJzQ3RybC4kcGFuZXMuJGFjdGl2ZSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBtb2RlbFZhbHVlIC0+ICRmb3JtYXR0ZXJzIC0+IHZpZXdWYWx1ZVxyXG4gICAgICAgICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihtb2RlbFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJGZvcm1hdHRlcihcIiVzXCIpOiBtb2RlbFZhbHVlPSVvICglbyknLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIG1vZGVsVmFsdWUsIHR5cGVvZiBtb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgYnNUYWJzQ3RybC4kc2V0QWN0aXZlKG1vZGVsVmFsdWUgKiAxKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWU7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgfV0pXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzUGFuZScsIFtcIiR3aW5kb3dcIiwgXCIkYW5pbWF0ZVwiLCBcIiRzY2VcIiwgZnVuY3Rpb24oJHdpbmRvdywgJGFuaW1hdGUsICRzY2UpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXF1aXJlOiBbJ14/bmdNb2RlbCcsICdeYnNUYWJzJ10sXHJcbiAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzKSB7XHJcblxyXG4gICAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGNvbnRyb2xsZXJzWzBdO1xyXG4gICAgICAgIHZhciBic1RhYnNDdHJsID0gY29udHJvbGxlcnNbMV07XHJcblxyXG4gICAgICAgIC8vIEFkZCBiYXNlIGNsYXNzXHJcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygndGFiLXBhbmUnKTtcclxuXHJcbiAgICAgICAgLy8gT2JzZXJ2ZSB0aXRsZSBhdHRyaWJ1dGUgZm9yIGNoYW5nZVxyXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCd0aXRsZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgc2NvcGUudGl0bGUgPSAkc2NlLnRydXN0QXNIdG1sKG5ld1ZhbHVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGFuaW1hdGlvbiBjbGFzc1xyXG4gICAgICAgIGlmKGJzVGFic0N0cmwuJG9wdGlvbnMuYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKGJzVGFic0N0cmwuJG9wdGlvbnMuYW5pbWF0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFB1c2ggcGFuZSB0byBwYXJlbnQgYnNUYWJzIGNvbnRyb2xsZXJcclxuICAgICAgICBic1RhYnNDdHJsLiRwdXNoKHNjb3BlKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICAgICAgICAgdmFyIGluZGV4ID0gYnNUYWJzQ3RybC4kcGFuZXMuaW5kZXhPZihzY29wZSk7XHJcbiAgICAgICAgICB2YXIgYWN0aXZlID0gYnNUYWJzQ3RybC4kcGFuZXMuJGFjdGl2ZTtcclxuICAgICAgICAgICRhbmltYXRlW2luZGV4ID09PSBhY3RpdmUgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oZWxlbWVudCwgYnNUYWJzQ3RybC4kb3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBic1RhYnNDdHJsLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZW5kZXIoKTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbi8vIFNvdXJjZTogdGltZXBpY2tlci5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAudGltZXBpY2tlcicsIFsnbWdjcmVhLm5nU3RyYXAuaGVscGVycy5kYXRlUGFyc2VyJywgJ21nY3JlYS5uZ1N0cmFwLnRvb2x0aXAnXSlcclxuXHJcbiAgLnByb3ZpZGVyKCckdGltZXBpY2tlcicsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICBwcmVmaXhDbGFzczogJ3RpbWVwaWNrZXInLFxyXG4gICAgICBwbGFjZW1lbnQ6ICdib3R0b20tbGVmdCcsXHJcbiAgICAgIHRlbXBsYXRlOiAndGltZXBpY2tlci90aW1lcGlja2VyLnRwbC5odG1sJyxcclxuICAgICAgdHJpZ2dlcjogJ2ZvY3VzJyxcclxuICAgICAgY29udGFpbmVyOiBmYWxzZSxcclxuICAgICAga2V5Ym9hcmQ6IHRydWUsXHJcbiAgICAgIGh0bWw6IGZhbHNlLFxyXG4gICAgICBkZWxheTogMCxcclxuICAgICAgLy8gbGFuZzogJGxvY2FsZS5pZCxcclxuICAgICAgdXNlTmF0aXZlOiB0cnVlLFxyXG4gICAgICB0aW1lVHlwZTogJ2RhdGUnLFxyXG4gICAgICB0aW1lRm9ybWF0OiAnc2hvcnRUaW1lJyxcclxuICAgICAgbW9kZWxUaW1lRm9ybWF0OiBudWxsLFxyXG4gICAgICBhdXRvY2xvc2U6IGZhbHNlLFxyXG4gICAgICBtaW5UaW1lOiAtSW5maW5pdHksXHJcbiAgICAgIG1heFRpbWU6ICtJbmZpbml0eSxcclxuICAgICAgbGVuZ3RoOiA1LFxyXG4gICAgICBob3VyU3RlcDogMSxcclxuICAgICAgbWludXRlU3RlcDogNSxcclxuICAgICAgaWNvblVwOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwJyxcclxuICAgICAgaWNvbkRvd246ICdnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93bicsXHJcbiAgICAgIGFycm93QmVoYXZpb3I6ICdwYWdlcidcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHdpbmRvd1wiLCBcIiRkb2N1bWVudFwiLCBcIiRyb290U2NvcGVcIiwgXCIkc2NlXCIsIFwiJGxvY2FsZVwiLCBcImRhdGVGaWx0ZXJcIiwgXCIkdG9vbHRpcFwiLCBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQsICRyb290U2NvcGUsICRzY2UsICRsb2NhbGUsIGRhdGVGaWx0ZXIsICR0b29sdGlwKSB7XHJcblxyXG4gICAgICB2YXIgYm9keUVsID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cuZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgIHZhciBpc05hdGl2ZSA9IC8oaXAoYXxvKWR8aXBob25lfGFuZHJvaWQpL2lnLnRlc3QoJHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgICAgdmFyIGlzVG91Y2ggPSAoJ2NyZWF0ZVRvdWNoJyBpbiAkd2luZG93LmRvY3VtZW50KSAmJiBpc05hdGl2ZTtcclxuICAgICAgaWYoIWRlZmF1bHRzLmxhbmcpIGRlZmF1bHRzLmxhbmcgPSAkbG9jYWxlLmlkO1xyXG5cclxuICAgICAgZnVuY3Rpb24gdGltZXBpY2tlckZhY3RvcnkoZWxlbWVudCwgY29udHJvbGxlciwgY29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciAkdGltZXBpY2tlciA9ICR0b29sdGlwKGVsZW1lbnQsIGFuZ3VsYXIuZXh0ZW5kKHt9LCBkZWZhdWx0cywgY29uZmlnKSk7XHJcbiAgICAgICAgdmFyIHBhcmVudFNjb3BlID0gY29uZmlnLnNjb3BlO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gJHRpbWVwaWNrZXIuJG9wdGlvbnM7XHJcbiAgICAgICAgdmFyIHNjb3BlID0gJHRpbWVwaWNrZXIuJHNjb3BlO1xyXG5cclxuICAgICAgICAvLyBWaWV3IHZhcnNcclxuXHJcbiAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgICAgIHZhciBzdGFydERhdGUgPSBjb250cm9sbGVyLiRkYXRlVmFsdWUgfHwgbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgdmlld0RhdGUgPSB7aG91cjogc3RhcnREYXRlLmdldEhvdXJzKCksIG1lcmlkaWFuOiBzdGFydERhdGUuZ2V0SG91cnMoKSA8IDEyLCBtaW51dGU6IHN0YXJ0RGF0ZS5nZXRNaW51dGVzKCksIHNlY29uZDogc3RhcnREYXRlLmdldFNlY29uZHMoKSwgbWlsbGlzZWNvbmQ6IHN0YXJ0RGF0ZS5nZXRNaWxsaXNlY29uZHMoKX07XHJcblxyXG4gICAgICAgIHZhciBmb3JtYXQgPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFNbb3B0aW9ucy50aW1lRm9ybWF0XSB8fCBvcHRpb25zLnRpbWVGb3JtYXQ7XHJcbiAgICAgICAgdmFyIGZvcm1hdHMgPSAvKGgrKShbOlxcLl0pPyhtKylbIF0/KGE/KS9pLmV4ZWMoZm9ybWF0KS5zbGljZSgxKTtcclxuICAgICAgICBzY29wZS4kaWNvblVwID0gb3B0aW9ucy5pY29uVXA7XHJcbiAgICAgICAgc2NvcGUuJGljb25Eb3duID0gb3B0aW9ucy5pY29uRG93bjtcclxuXHJcbiAgICAgICAgLy8gU2NvcGUgbWV0aG9kc1xyXG5cclxuICAgICAgICBzY29wZS4kc2VsZWN0ID0gZnVuY3Rpb24oZGF0ZSwgaW5kZXgpIHtcclxuICAgICAgICAgICR0aW1lcGlja2VyLnNlbGVjdChkYXRlLCBpbmRleCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzY29wZS4kbW92ZUluZGV4ID0gZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XHJcbiAgICAgICAgICAkdGltZXBpY2tlci4kbW92ZUluZGV4KHZhbHVlLCBpbmRleCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzY29wZS4kc3dpdGNoTWVyaWRpYW4gPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICAkdGltZXBpY2tlci5zd2l0Y2hNZXJpZGlhbihkYXRlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAkdGltZXBpY2tlci51cGRhdGUgPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyR0aW1lcGlja2VyLnVwZGF0ZSgpIG5ld1ZhbHVlPSVvJywgZGF0ZSk7XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzRGF0ZShkYXRlKSAmJiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgICAgICR0aW1lcGlja2VyLiRkYXRlID0gZGF0ZTtcclxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQodmlld0RhdGUsIHtob3VyOiBkYXRlLmdldEhvdXJzKCksIG1pbnV0ZTogZGF0ZS5nZXRNaW51dGVzKCksIHNlY29uZDogZGF0ZS5nZXRTZWNvbmRzKCksIG1pbGxpc2Vjb25kOiBkYXRlLmdldE1pbGxpc2Vjb25kcygpfSk7XHJcbiAgICAgICAgICAgICR0aW1lcGlja2VyLiRidWlsZCgpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKCEkdGltZXBpY2tlci4kaXNCdWlsdCkge1xyXG4gICAgICAgICAgICAkdGltZXBpY2tlci4kYnVpbGQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdGltZXBpY2tlci5zZWxlY3QgPSBmdW5jdGlvbihkYXRlLCBpbmRleCwga2VlcCkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckdGltZXBpY2tlci5zZWxlY3QnLCBkYXRlLCBzY29wZS4kbW9kZSk7XHJcbiAgICAgICAgICBpZighY29udHJvbGxlci4kZGF0ZVZhbHVlIHx8IGlzTmFOKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS5nZXRUaW1lKCkpKSBjb250cm9sbGVyLiRkYXRlVmFsdWUgPSBuZXcgRGF0ZSgxOTcwLCAwLCAxKTtcclxuICAgICAgICAgIGlmKCFhbmd1bGFyLmlzRGF0ZShkYXRlKSkgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgaWYoaW5kZXggPT09IDApIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS5zZXRIb3VycyhkYXRlLmdldEhvdXJzKCkpO1xyXG4gICAgICAgICAgZWxzZSBpZihpbmRleCA9PT0gMSkgY29udHJvbGxlci4kZGF0ZVZhbHVlLnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkpO1xyXG4gICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIoKTtcclxuICAgICAgICAgIGlmKG9wdGlvbnMuYXV0b2Nsb3NlICYmICFrZWVwKSB7XHJcbiAgICAgICAgICAgICR0aW1lcGlja2VyLmhpZGUodHJ1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRpbWVwaWNrZXIuc3dpdGNoTWVyaWRpYW4gPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICB2YXIgaG91cnMgPSAoZGF0ZSB8fCBjb250cm9sbGVyLiRkYXRlVmFsdWUpLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRkYXRlVmFsdWUuc2V0SG91cnMoaG91cnMgPCAxMiA/IGhvdXJzICsgMTIgOiBob3VycyAtIDEyKTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZpZXdWYWx1ZShjb250cm9sbGVyLiRkYXRlVmFsdWUpO1xyXG4gICAgICAgICAgY29udHJvbGxlci4kcmVuZGVyKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHJvdGVjdGVkIG1ldGhvZHNcclxuXHJcbiAgICAgICAgJHRpbWVwaWNrZXIuJGJ1aWxkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyR0aW1lcGlja2VyLiRidWlsZCgpIHZpZXdEYXRlPSVvJywgdmlld0RhdGUpO1xyXG4gICAgICAgICAgdmFyIGksIG1pZEluZGV4ID0gc2NvcGUubWlkSW5kZXggPSBwYXJzZUludChvcHRpb25zLmxlbmd0aCAvIDIsIDEwKTtcclxuICAgICAgICAgIHZhciBob3VycyA9IFtdLCBob3VyO1xyXG4gICAgICAgICAgZm9yKGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBob3VyID0gbmV3IERhdGUoMTk3MCwgMCwgMSwgdmlld0RhdGUuaG91ciAtIChtaWRJbmRleCAtIGkpICogb3B0aW9ucy5ob3VyU3RlcCk7XHJcbiAgICAgICAgICAgIGhvdXJzLnB1c2goe2RhdGU6IGhvdXIsIGxhYmVsOiBkYXRlRmlsdGVyKGhvdXIsIGZvcm1hdHNbMF0pLCBzZWxlY3RlZDogJHRpbWVwaWNrZXIuJGRhdGUgJiYgJHRpbWVwaWNrZXIuJGlzU2VsZWN0ZWQoaG91ciwgMCksIGRpc2FibGVkOiAkdGltZXBpY2tlci4kaXNEaXNhYmxlZChob3VyLCAwKX0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIG1pbnV0ZXMgPSBbXSwgbWludXRlO1xyXG4gICAgICAgICAgZm9yKGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBtaW51dGUgPSBuZXcgRGF0ZSgxOTcwLCAwLCAxLCAwLCB2aWV3RGF0ZS5taW51dGUgLSAobWlkSW5kZXggLSBpKSAqIG9wdGlvbnMubWludXRlU3RlcCk7XHJcbiAgICAgICAgICAgIG1pbnV0ZXMucHVzaCh7ZGF0ZTogbWludXRlLCBsYWJlbDogZGF0ZUZpbHRlcihtaW51dGUsIGZvcm1hdHNbMl0pLCBzZWxlY3RlZDogJHRpbWVwaWNrZXIuJGRhdGUgJiYgJHRpbWVwaWNrZXIuJGlzU2VsZWN0ZWQobWludXRlLCAxKSwgZGlzYWJsZWQ6ICR0aW1lcGlja2VyLiRpc0Rpc2FibGVkKG1pbnV0ZSwgMSl9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgcm93cyA9IFtdO1xyXG4gICAgICAgICAgZm9yKGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICByb3dzLnB1c2goW2hvdXJzW2ldLCBtaW51dGVzW2ldXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzY29wZS5yb3dzID0gcm93cztcclxuICAgICAgICAgIHNjb3BlLnNob3dBTSA9ICEhZm9ybWF0c1szXTtcclxuICAgICAgICAgIHNjb3BlLmlzQU0gPSAoJHRpbWVwaWNrZXIuJGRhdGUgfHwgaG91cnNbbWlkSW5kZXhdLmRhdGUpLmdldEhvdXJzKCkgPCAxMjtcclxuICAgICAgICAgIHNjb3BlLnRpbWVTZXBhcmF0b3IgPSBmb3JtYXRzWzFdO1xyXG4gICAgICAgICAgJHRpbWVwaWNrZXIuJGlzQnVpbHQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0aW1lcGlja2VyLiRpc1NlbGVjdGVkID0gZnVuY3Rpb24oZGF0ZSwgaW5kZXgpIHtcclxuICAgICAgICAgIGlmKCEkdGltZXBpY2tlci4kZGF0ZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgZWxzZSBpZihpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpID09PSAkdGltZXBpY2tlci4kZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGluZGV4ID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlLmdldE1pbnV0ZXMoKSA9PT0gJHRpbWVwaWNrZXIuJGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0aW1lcGlja2VyLiRpc0Rpc2FibGVkID0gZnVuY3Rpb24oZGF0ZSwgaW5kZXgpIHtcclxuICAgICAgICAgIHZhciBzZWxlY3RlZFRpbWU7XHJcbiAgICAgICAgICBpZihpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFRpbWUgPSBkYXRlLmdldFRpbWUoKSArIHZpZXdEYXRlLm1pbnV0ZSAqIDZlNDtcclxuICAgICAgICAgIH0gZWxzZSBpZihpbmRleCA9PT0gMSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFRpbWUgPSBkYXRlLmdldFRpbWUoKSArIHZpZXdEYXRlLmhvdXIgKiAzNmU1O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdGVkVGltZSA8IG9wdGlvbnMubWluVGltZSAqIDEgfHwgc2VsZWN0ZWRUaW1lID4gb3B0aW9ucy5tYXhUaW1lICogMTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzY29wZS4kYXJyb3dBY3Rpb24gPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAob3B0aW9ucy5hcnJvd0JlaGF2aW9yID09PSAncGlja2VyJykge1xyXG4gICAgICAgICAgICAkdGltZXBpY2tlci4kc2V0VGltZUJ5U3RlcCh2YWx1ZSxpbmRleCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkdGltZXBpY2tlci4kbW92ZUluZGV4KHZhbHVlLGluZGV4KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdGltZXBpY2tlci4kc2V0VGltZUJ5U3RlcCA9IGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xyXG4gICAgICAgICAgdmFyIG5ld0RhdGUgPSBuZXcgRGF0ZSgkdGltZXBpY2tlci4kZGF0ZSk7XHJcbiAgICAgICAgICB2YXIgaG91cnMgPSBuZXdEYXRlLmdldEhvdXJzKCksIGhvdXJzTGVuZ3RoID0gZGF0ZUZpbHRlcihuZXdEYXRlLCAnaCcpLmxlbmd0aDtcclxuICAgICAgICAgIHZhciBtaW51dGVzID0gbmV3RGF0ZS5nZXRNaW51dGVzKCksIG1pbnV0ZXNMZW5ndGggPSBkYXRlRmlsdGVyKG5ld0RhdGUsICdtbScpLmxlbmd0aDtcclxuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICBuZXdEYXRlLnNldEhvdXJzKGhvdXJzIC0gKHBhcnNlSW50KG9wdGlvbnMuaG91clN0ZXAsIDEwKSAqIHZhbHVlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbmV3RGF0ZS5zZXRNaW51dGVzKG1pbnV0ZXMgLSAocGFyc2VJbnQob3B0aW9ucy5taW51dGVTdGVwLCAxMCkgKiB2YWx1ZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJHRpbWVwaWNrZXIuc2VsZWN0KG5ld0RhdGUsIGluZGV4LCB0cnVlKTtcclxuICAgICAgICAgIHBhcmVudFNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdGltZXBpY2tlci4kbW92ZUluZGV4ID0gZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XHJcbiAgICAgICAgICB2YXIgdGFyZ2V0RGF0ZTtcclxuICAgICAgICAgIGlmKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRhcmdldERhdGUgPSBuZXcgRGF0ZSgxOTcwLCAwLCAxLCB2aWV3RGF0ZS5ob3VyICsgKHZhbHVlICogb3B0aW9ucy5sZW5ndGgpLCB2aWV3RGF0ZS5taW51dGUpO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge2hvdXI6IHRhcmdldERhdGUuZ2V0SG91cnMoKX0pO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGluZGV4ID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRhcmdldERhdGUgPSBuZXcgRGF0ZSgxOTcwLCAwLCAxLCB2aWV3RGF0ZS5ob3VyLCB2aWV3RGF0ZS5taW51dGUgKyAodmFsdWUgKiBvcHRpb25zLmxlbmd0aCAqIG9wdGlvbnMubWludXRlU3RlcCkpO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2aWV3RGF0ZSwge21pbnV0ZTogdGFyZ2V0RGF0ZS5nZXRNaW51dGVzKCl9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICR0aW1lcGlja2VyLiRidWlsZCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0aW1lcGlja2VyLiRvbk1vdXNlRG93biA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgLy8gUHJldmVudCBibHVyIG9uIG1vdXNlZG93biBvbiAuZHJvcGRvd24tbWVudVxyXG4gICAgICAgICAgaWYoZXZ0LnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnaW5wdXQnKSBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIC8vIEVtdWxhdGUgY2xpY2sgZm9yIG1vYmlsZSBkZXZpY2VzXHJcbiAgICAgICAgICBpZihpc1RvdWNoKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbCA9IGFuZ3VsYXIuZWxlbWVudChldnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYodGFyZ2V0RWxbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2J1dHRvbicpIHtcclxuICAgICAgICAgICAgICB0YXJnZXRFbCA9IHRhcmdldEVsLnBhcmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhcmdldEVsLnRyaWdnZXJIYW5kbGVyKCdjbGljaycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0aW1lcGlja2VyLiRvbktleURvd24gPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIGlmICghLygzOHwzN3wzOXw0MHwxMykvLnRlc3QoZXZ0LmtleUNvZGUpIHx8IGV2dC5zaGlmdEtleSB8fCBldnQuYWx0S2V5KSByZXR1cm47XHJcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAvLyBDbG9zZSBvbiBlbnRlclxyXG4gICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDEzKSByZXR1cm4gJHRpbWVwaWNrZXIuaGlkZSh0cnVlKTtcclxuXHJcbiAgICAgICAgICAvLyBOYXZpZ2F0ZSB3aXRoIGtleWJvYXJkXHJcbiAgICAgICAgICB2YXIgbmV3RGF0ZSA9IG5ldyBEYXRlKCR0aW1lcGlja2VyLiRkYXRlKTtcclxuICAgICAgICAgIHZhciBob3VycyA9IG5ld0RhdGUuZ2V0SG91cnMoKSwgaG91cnNMZW5ndGggPSBkYXRlRmlsdGVyKG5ld0RhdGUsICdoJykubGVuZ3RoO1xyXG4gICAgICAgICAgdmFyIG1pbnV0ZXMgPSBuZXdEYXRlLmdldE1pbnV0ZXMoKSwgbWludXRlc0xlbmd0aCA9IGRhdGVGaWx0ZXIobmV3RGF0ZSwgJ21tJykubGVuZ3RoO1xyXG4gICAgICAgICAgdmFyIGxhdGVyYWxNb3ZlID0gLygzN3wzOSkvLnRlc3QoZXZ0LmtleUNvZGUpO1xyXG4gICAgICAgICAgdmFyIGNvdW50ID0gMiArICEhZm9ybWF0c1szXSAqIDE7XHJcblxyXG4gICAgICAgICAgLy8gTmF2aWdhdGUgaW5kZXhlcyAobGVmdCwgcmlnaHQpXHJcbiAgICAgICAgICBpZiAobGF0ZXJhbE1vdmUpIHtcclxuICAgICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDM3KSBzZWxlY3RlZEluZGV4ID0gc2VsZWN0ZWRJbmRleCA8IDEgPyBjb3VudCAtIDEgOiBzZWxlY3RlZEluZGV4IC0gMTtcclxuICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gMzkpIHNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4IDwgY291bnQgLSAxID8gc2VsZWN0ZWRJbmRleCArIDEgOiAwO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFVwZGF0ZSB2YWx1ZXMgKHVwLCBkb3duKVxyXG4gICAgICAgICAgdmFyIHNlbGVjdFJhbmdlID0gWzAsIGhvdXJzTGVuZ3RoXTtcclxuICAgICAgICAgIGlmKHNlbGVjdGVkSW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT09IDM4KSBuZXdEYXRlLnNldEhvdXJzKGhvdXJzIC0gcGFyc2VJbnQob3B0aW9ucy5ob3VyU3RlcCwgMTApKTtcclxuICAgICAgICAgICAgZWxzZSBpZihldnQua2V5Q29kZSA9PT0gNDApIG5ld0RhdGUuc2V0SG91cnMoaG91cnMgKyBwYXJzZUludChvcHRpb25zLmhvdXJTdGVwLCAxMCkpO1xyXG4gICAgICAgICAgICBzZWxlY3RSYW5nZSA9IFswLCBob3Vyc0xlbmd0aF07XHJcbiAgICAgICAgICB9IGVsc2UgaWYoc2VsZWN0ZWRJbmRleCA9PT0gMSkge1xyXG4gICAgICAgICAgICBpZihldnQua2V5Q29kZSA9PT0gMzgpIG5ld0RhdGUuc2V0TWludXRlcyhtaW51dGVzIC0gcGFyc2VJbnQob3B0aW9ucy5taW51dGVTdGVwLCAxMCkpO1xyXG4gICAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSA0MCkgbmV3RGF0ZS5zZXRNaW51dGVzKG1pbnV0ZXMgKyBwYXJzZUludChvcHRpb25zLm1pbnV0ZVN0ZXAsIDEwKSk7XHJcbiAgICAgICAgICAgIHNlbGVjdFJhbmdlID0gW2hvdXJzTGVuZ3RoICsgMSwgaG91cnNMZW5ndGggKyAxICsgbWludXRlc0xlbmd0aF07XHJcbiAgICAgICAgICB9IGVsc2UgaWYoc2VsZWN0ZWRJbmRleCA9PT0gMikge1xyXG4gICAgICAgICAgICBpZighbGF0ZXJhbE1vdmUpICR0aW1lcGlja2VyLnN3aXRjaE1lcmlkaWFuKCk7XHJcbiAgICAgICAgICAgIHNlbGVjdFJhbmdlID0gW2hvdXJzTGVuZ3RoICsgMSArIG1pbnV0ZXNMZW5ndGggKyAxLCBob3Vyc0xlbmd0aCArIDEgKyBtaW51dGVzTGVuZ3RoICsgM107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkdGltZXBpY2tlci5zZWxlY3QobmV3RGF0ZSwgc2VsZWN0ZWRJbmRleCwgdHJ1ZSk7XHJcbiAgICAgICAgICBjcmVhdGVTZWxlY3Rpb24oc2VsZWN0UmFuZ2VbMF0sIHNlbGVjdFJhbmdlWzFdKTtcclxuICAgICAgICAgIHBhcmVudFNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVNlbGVjdGlvbihzdGFydCwgZW5kKSB7XHJcbiAgICAgICAgICBpZihlbGVtZW50WzBdLmNyZWF0ZVRleHRSYW5nZSkge1xyXG4gICAgICAgICAgICB2YXIgc2VsUmFuZ2UgPSBlbGVtZW50WzBdLmNyZWF0ZVRleHRSYW5nZSgpO1xyXG4gICAgICAgICAgICBzZWxSYW5nZS5jb2xsYXBzZSh0cnVlKTtcclxuICAgICAgICAgICAgc2VsUmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBzdGFydCk7XHJcbiAgICAgICAgICAgIHNlbFJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCk7XHJcbiAgICAgICAgICAgIHNlbFJhbmdlLnNlbGVjdCgpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKGVsZW1lbnRbMF0uc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgICAgICAgICAgZWxlbWVudFswXS5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCwgZW5kKTtcclxuICAgICAgICAgIH0gZWxzZSBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGVsZW1lbnRbMF0uc2VsZWN0aW9uU3RhcnQpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRbMF0uc2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcclxuICAgICAgICAgICAgZWxlbWVudFswXS5zZWxlY3Rpb25FbmQgPSBlbmQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmb2N1c0VsZW1lbnQoKSB7XHJcbiAgICAgICAgICBlbGVtZW50WzBdLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBPdmVycmlkZXNcclxuXHJcbiAgICAgICAgdmFyIF9pbml0ID0gJHRpbWVwaWNrZXIuaW5pdDtcclxuICAgICAgICAkdGltZXBpY2tlci5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZihpc05hdGl2ZSAmJiBvcHRpb25zLnVzZU5hdGl2ZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnByb3AoJ3R5cGUnLCAndGltZScpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygnLXdlYmtpdC1hcHBlYXJhbmNlJywgJ3RleHRmaWVsZCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9IGVsc2UgaWYoaXNUb3VjaCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnByb3AoJ3R5cGUnLCAndGV4dCcpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmF0dHIoJ3JlYWRvbmx5JywgJ3RydWUnKTtcclxuICAgICAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmb2N1c0VsZW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgX2luaXQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX2Rlc3Ryb3kgPSAkdGltZXBpY2tlci5kZXN0cm95O1xyXG4gICAgICAgICR0aW1lcGlja2VyLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKGlzTmF0aXZlICYmIG9wdGlvbnMudXNlTmF0aXZlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub2ZmKCdjbGljaycsIGZvY3VzRWxlbWVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBfZGVzdHJveSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBfc2hvdyA9ICR0aW1lcGlja2VyLnNob3c7XHJcbiAgICAgICAgJHRpbWVwaWNrZXIuc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgX3Nob3coKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICR0aW1lcGlja2VyLiRlbGVtZW50Lm9uKGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgJHRpbWVwaWNrZXIuJG9uTW91c2VEb3duKTtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQub24oJ2tleWRvd24nLCAkdGltZXBpY2tlci4kb25LZXlEb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9oaWRlID0gJHRpbWVwaWNrZXIuaGlkZTtcclxuICAgICAgICAkdGltZXBpY2tlci5oaWRlID0gZnVuY3Rpb24oYmx1cikge1xyXG4gICAgICAgICAgJHRpbWVwaWNrZXIuJGVsZW1lbnQub2ZmKGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgJHRpbWVwaWNrZXIuJG9uTW91c2VEb3duKTtcclxuICAgICAgICAgIGlmKG9wdGlvbnMua2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5vZmYoJ2tleWRvd24nLCAkdGltZXBpY2tlci4kb25LZXlEb3duKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF9oaWRlKGJsdXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAkdGltZXBpY2tlcjtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRpbWVwaWNrZXJGYWN0b3J5LmRlZmF1bHRzID0gZGVmYXVsdHM7XHJcbiAgICAgIHJldHVybiB0aW1lcGlja2VyRmFjdG9yeTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSlcclxuXHJcblxyXG4gIC5kaXJlY3RpdmUoJ2JzVGltZXBpY2tlcicsIFtcIiR3aW5kb3dcIiwgXCIkcGFyc2VcIiwgXCIkcVwiLCBcIiRsb2NhbGVcIiwgXCJkYXRlRmlsdGVyXCIsIFwiJHRpbWVwaWNrZXJcIiwgXCIkZGF0ZVBhcnNlclwiLCBcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uKCR3aW5kb3csICRwYXJzZSwgJHEsICRsb2NhbGUsIGRhdGVGaWx0ZXIsICR0aW1lcGlja2VyLCAkZGF0ZVBhcnNlciwgJHRpbWVvdXQpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdHMgPSAkdGltZXBpY2tlci5kZWZhdWx0cztcclxuICAgIHZhciBpc05hdGl2ZSA9IC8oaXAoYXxvKWR8aXBob25lfGFuZHJvaWQpL2lnLnRlc3QoJHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCAkd2luZG93LnNldFRpbWVvdXQ7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxyXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjb250cm9sbGVyKSB7XHJcblxyXG4gICAgICAgIC8vIERpcmVjdGl2ZSBvcHRpb25zXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7c2NvcGU6IHNjb3BlLCBjb250cm9sbGVyOiBjb250cm9sbGVyfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWydwbGFjZW1lbnQnLCAnY29udGFpbmVyJywgJ2RlbGF5JywgJ3RyaWdnZXInLCAna2V5Ym9hcmQnLCAnaHRtbCcsICdhbmltYXRpb24nLCAndGVtcGxhdGUnLCAnYXV0b2Nsb3NlJywgJ3RpbWVUeXBlJywgJ3RpbWVGb3JtYXQnLCAnbW9kZWxUaW1lRm9ybWF0JywgJ3VzZU5hdGl2ZScsICdob3VyU3RlcCcsICdtaW51dGVTdGVwJywgJ2xlbmd0aCcsICdhcnJvd0JlaGF2aW9yJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSkgb3B0aW9uc1trZXldID0gYXR0cltrZXldO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBWaXNpYmlsaXR5IGJpbmRpbmcgc3VwcG9ydFxyXG4gICAgICAgIGF0dHIuYnNTaG93ICYmIHNjb3BlLiR3YXRjaChhdHRyLmJzU2hvdywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBpZighdGltZXBpY2tlciB8fCAhYW5ndWxhci5pc0RlZmluZWQobmV3VmFsdWUpKSByZXR1cm47XHJcbiAgICAgICAgICBpZihhbmd1bGFyLmlzU3RyaW5nKG5ld1ZhbHVlKSkgbmV3VmFsdWUgPSAhIW5ld1ZhbHVlLm1hdGNoKCcsPyh0aW1lcGlja2VyKSw/Jyk7XHJcbiAgICAgICAgICBuZXdWYWx1ZSA9PT0gdHJ1ZSA/IHRpbWVwaWNrZXIuc2hvdygpIDogdGltZXBpY2tlci5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGltZXBpY2tlclxyXG4gICAgICAgIGlmKGlzTmF0aXZlICYmIChvcHRpb25zLnVzZU5hdGl2ZSB8fCBkZWZhdWx0cy51c2VOYXRpdmUpKSBvcHRpb25zLnRpbWVGb3JtYXQgPSAnSEg6bW0nO1xyXG4gICAgICAgIHZhciB0aW1lcGlja2VyID0gJHRpbWVwaWNrZXIoZWxlbWVudCwgY29udHJvbGxlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgb3B0aW9ucyA9IHRpbWVwaWNrZXIuJG9wdGlvbnM7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgcGFyc2VyXHJcbiAgICAgICAgdmFyIGRhdGVQYXJzZXIgPSAkZGF0ZVBhcnNlcih7Zm9ybWF0OiBvcHRpb25zLnRpbWVGb3JtYXQsIGxhbmc6IG9wdGlvbnMubGFuZ30pO1xyXG5cclxuICAgICAgICAvLyBPYnNlcnZlIGF0dHJpYnV0ZXMgZm9yIGNoYW5nZXNcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWydtaW5UaW1lJywgJ21heFRpbWUnXSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJ2F0dHIuJG9ic2VydmUoJXMpJywga2V5LCBhdHRyW2tleV0pO1xyXG4gICAgICAgICAgYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSAmJiBhdHRyLiRvYnNlcnZlKGtleSwgZnVuY3Rpb24obmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgaWYobmV3VmFsdWUgPT09ICdub3cnKSB7XHJcbiAgICAgICAgICAgICAgdGltZXBpY2tlci4kb3B0aW9uc1trZXldID0gbmV3IERhdGUoKS5zZXRGdWxsWWVhcigxOTcwLCAwLCAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGFuZ3VsYXIuaXNTdHJpbmcobmV3VmFsdWUpICYmIG5ld1ZhbHVlLm1hdGNoKC9eXCIuK1wiJC8pKSB7XHJcbiAgICAgICAgICAgICAgdGltZXBpY2tlci4kb3B0aW9uc1trZXldID0gK25ldyBEYXRlKG5ld1ZhbHVlLnN1YnN0cigxLCBuZXdWYWx1ZS5sZW5ndGggLSAyKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGltZXBpY2tlci4kb3B0aW9uc1trZXldID0gZGF0ZVBhcnNlci5wYXJzZShuZXdWYWx1ZSwgbmV3IERhdGUoMTk3MCwgMCwgMSwgMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICFpc05hTih0aW1lcGlja2VyLiRvcHRpb25zW2tleV0pICYmIHRpbWVwaWNrZXIuJGJ1aWxkKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gV2F0Y2ggbW9kZWwgZm9yIGNoYW5nZXNcclxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ01vZGVsLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2Fybignc2NvcGUuJHdhdGNoKCVzKScsIGF0dHIubmdNb2RlbCwgbmV3VmFsdWUsIG9sZFZhbHVlLCBjb250cm9sbGVyLiRkYXRlVmFsdWUpO1xyXG4gICAgICAgICAgdGltZXBpY2tlci51cGRhdGUoY29udHJvbGxlci4kZGF0ZVZhbHVlKTtcclxuICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gdmlld1ZhbHVlIC0+ICRwYXJzZXJzIC0+IG1vZGVsVmFsdWVcclxuICAgICAgICBjb250cm9sbGVyLiRwYXJzZXJzLnVuc2hpZnQoZnVuY3Rpb24odmlld1ZhbHVlKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRwYXJzZXIoXCIlc1wiKTogdmlld1ZhbHVlPSVvJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCB2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgLy8gTnVsbCB2YWx1ZXMgc2hvdWxkIGNvcnJlY3RseSByZXNldCB0aGUgbW9kZWwgdmFsdWUgJiB2YWxpZGl0eVxyXG4gICAgICAgICAgaWYoIXZpZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgnZGF0ZScsIHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgcGFyc2VkVGltZSA9IGFuZ3VsYXIuaXNEYXRlKHZpZXdWYWx1ZSkgPyB2aWV3VmFsdWUgOiBkYXRlUGFyc2VyLnBhcnNlKHZpZXdWYWx1ZSwgY29udHJvbGxlci4kZGF0ZVZhbHVlKTtcclxuICAgICAgICAgIGlmKCFwYXJzZWRUaW1lIHx8IGlzTmFOKHBhcnNlZFRpbWUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgnZGF0ZScsIGZhbHNlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gcGFyc2VkVGltZS5nZXRUaW1lKCkgPj0gb3B0aW9ucy5taW5UaW1lICYmIHBhcnNlZFRpbWUuZ2V0VGltZSgpIDw9IG9wdGlvbnMubWF4VGltZTtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kc2V0VmFsaWRpdHkoJ2RhdGUnLCBpc1ZhbGlkKTtcclxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIG1vZGVsIHdoZW4gd2UgaGF2ZSBhIHZhbGlkIGRhdGVcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCkgY29udHJvbGxlci4kZGF0ZVZhbHVlID0gcGFyc2VkVGltZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKG9wdGlvbnMudGltZVR5cGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRmlsdGVyKHBhcnNlZFRpbWUsIG9wdGlvbnMubW9kZWxUaW1lRm9ybWF0IHx8IG9wdGlvbnMudGltZUZvcm1hdCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYob3B0aW9ucy50aW1lVHlwZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYob3B0aW9ucy50aW1lVHlwZSA9PT0gJ2lzbycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuJGRhdGVWYWx1ZS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGNvbnRyb2xsZXIuJGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIG1vZGVsVmFsdWUgLT4gJGZvcm1hdHRlcnMgLT4gdmlld1ZhbHVlXHJcbiAgICAgICAgY29udHJvbGxlci4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJGZvcm1hdHRlcihcIiVzXCIpOiBtb2RlbFZhbHVlPSVvICglbyknLCBlbGVtZW50LmF0dHIoJ25nLW1vZGVsJyksIG1vZGVsVmFsdWUsIHR5cGVvZiBtb2RlbFZhbHVlKTtcclxuICAgICAgICAgIHZhciBkYXRlO1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtb2RlbFZhbHVlKSB8fCBtb2RlbFZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSBOYU47XHJcbiAgICAgICAgICB9IGVsc2UgaWYoYW5ndWxhci5pc0RhdGUobW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgZGF0ZSA9IG1vZGVsVmFsdWU7XHJcbiAgICAgICAgICB9IGVsc2UgaWYob3B0aW9ucy50aW1lVHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZGF0ZSA9IGRhdGVQYXJzZXIucGFyc2UobW9kZWxWYWx1ZSwgbnVsbCwgb3B0aW9ucy5tb2RlbFRpbWVGb3JtYXQpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gU2V0dXAgZGVmYXVsdCB2YWx1ZT9cclxuICAgICAgICAgIC8vIGlmKGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkgZGF0ZSA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0TWludXRlcygwKSArIDM2ZTUpO1xyXG4gICAgICAgICAgY29udHJvbGxlci4kZGF0ZVZhbHVlID0gZGF0ZTtcclxuICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLiRkYXRlVmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHZpZXdWYWx1ZSAtPiBlbGVtZW50XHJcbiAgICAgICAgY29udHJvbGxlci4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJyRyZW5kZXIoXCIlc1wiKTogdmlld1ZhbHVlPSVvJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCBjb250cm9sbGVyLiR2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgZWxlbWVudC52YWwoIWNvbnRyb2xsZXIuJGRhdGVWYWx1ZSB8fCBpc05hTihjb250cm9sbGVyLiRkYXRlVmFsdWUuZ2V0VGltZSgpKSA/ICcnIDogZGF0ZUZpbHRlcihjb250cm9sbGVyLiRkYXRlVmFsdWUsIG9wdGlvbnMudGltZUZvcm1hdCkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEdhcmJhZ2UgY29sbGVjdGlvblxyXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICh0aW1lcGlja2VyKSB0aW1lcGlja2VyLmRlc3Ryb3koKTtcclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgdGltZXBpY2tlciA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IHRvb2x0aXAuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnRvb2x0aXAnLCBbJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMuZGltZW5zaW9ucyddKVxyXG5cclxuICAucHJvdmlkZXIoJyR0b29sdGlwJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgICAgYW5pbWF0aW9uOiAnYW0tZmFkZScsXHJcbiAgICAgIGN1c3RvbUNsYXNzOiAnJyxcclxuICAgICAgcHJlZml4Q2xhc3M6ICd0b29sdGlwJyxcclxuICAgICAgcHJlZml4RXZlbnQ6ICd0b29sdGlwJyxcclxuICAgICAgY29udGFpbmVyOiBmYWxzZSxcclxuICAgICAgdGFyZ2V0OiBmYWxzZSxcclxuICAgICAgcGxhY2VtZW50OiAndG9wJyxcclxuICAgICAgdGVtcGxhdGU6ICd0b29sdGlwL3Rvb2x0aXAudHBsLmh0bWwnLFxyXG4gICAgICBjb250ZW50VGVtcGxhdGU6IGZhbHNlLFxyXG4gICAgICB0cmlnZ2VyOiAnaG92ZXIgZm9jdXMnLFxyXG4gICAgICBrZXlib2FyZDogZmFsc2UsXHJcbiAgICAgIGh0bWw6IGZhbHNlLFxyXG4gICAgICBzaG93OiBmYWxzZSxcclxuICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICB0eXBlOiAnJyxcclxuICAgICAgZGVsYXk6IDBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy4kZ2V0ID0gW1wiJHdpbmRvd1wiLCBcIiRyb290U2NvcGVcIiwgXCIkY29tcGlsZVwiLCBcIiRxXCIsIFwiJHRlbXBsYXRlQ2FjaGVcIiwgXCIkaHR0cFwiLCBcIiRhbmltYXRlXCIsIFwiZGltZW5zaW9uc1wiLCBcIiQkckFGXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRyb290U2NvcGUsICRjb21waWxlLCAkcSwgJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkYW5pbWF0ZSwgZGltZW5zaW9ucywgJCRyQUYpIHtcclxuXHJcbiAgICAgIHZhciB0cmltID0gU3RyaW5nLnByb3RvdHlwZS50cmltO1xyXG4gICAgICB2YXIgaXNUb3VjaCA9ICdjcmVhdGVUb3VjaCcgaW4gJHdpbmRvdy5kb2N1bWVudDtcclxuICAgICAgdmFyIGh0bWxSZXBsYWNlUmVnRXhwID0gL25nLWJpbmQ9XCIvaWc7XHJcblxyXG4gICAgICBmdW5jdGlvbiBUb29sdGlwRmFjdG9yeShlbGVtZW50LCBjb25maWcpIHtcclxuXHJcbiAgICAgICAgdmFyICR0b29sdGlwID0ge307XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiB2YXJzXHJcbiAgICAgICAgdmFyIG5vZGVOYW1lID0gZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gJHRvb2x0aXAuJG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XHJcbiAgICAgICAgJHRvb2x0aXAuJHByb21pc2UgPSBmZXRjaFRlbXBsYXRlKG9wdGlvbnMudGVtcGxhdGUpO1xyXG4gICAgICAgIHZhciBzY29wZSA9ICR0b29sdGlwLiRzY29wZSA9IG9wdGlvbnMuc2NvcGUgJiYgb3B0aW9ucy5zY29wZS4kbmV3KCkgfHwgJHJvb3RTY29wZS4kbmV3KCk7XHJcbiAgICAgICAgaWYob3B0aW9ucy5kZWxheSAmJiBhbmd1bGFyLmlzU3RyaW5nKG9wdGlvbnMuZGVsYXkpKSB7XHJcbiAgICAgICAgICBvcHRpb25zLmRlbGF5ID0gcGFyc2VGbG9hdChvcHRpb25zLmRlbGF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgc3RyaW5nIG9wdGlvbnNcclxuICAgICAgICBpZihvcHRpb25zLnRpdGxlKSB7XHJcbiAgICAgICAgICAkdG9vbHRpcC4kc2NvcGUudGl0bGUgPSBvcHRpb25zLnRpdGxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUHJvdmlkZSBzY29wZSBoZWxwZXJzXHJcbiAgICAgICAgc2NvcGUuJGhpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHRvb2x0aXAuaGlkZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzY29wZS4kc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkdG9vbHRpcC5zaG93KCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNjb3BlLiR0b2dnbGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHRvb2x0aXAudG9nZ2xlKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICR0b29sdGlwLiRpc1Nob3duID0gc2NvcGUuJGlzU2hvd24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gUHJpdmF0ZSB2YXJzXHJcbiAgICAgICAgdmFyIHRpbWVvdXQsIGhvdmVyU3RhdGU7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgY29udGVudFRlbXBsYXRlIG9wdGlvblxyXG4gICAgICAgIGlmKG9wdGlvbnMuY29udGVudFRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAkdG9vbHRpcC4kcHJvbWlzZSA9ICR0b29sdGlwLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24odGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlRWwgPSBhbmd1bGFyLmVsZW1lbnQodGVtcGxhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmV0Y2hUZW1wbGF0ZShvcHRpb25zLmNvbnRlbnRUZW1wbGF0ZSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29udGVudFRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGNvbnRlbnRFbCA9IGZpbmRFbGVtZW50KCdbbmctYmluZD1cImNvbnRlbnRcIl0nLCB0ZW1wbGF0ZUVsWzBdKTtcclxuICAgICAgICAgICAgICBpZighY29udGVudEVsLmxlbmd0aCkgY29udGVudEVsID0gZmluZEVsZW1lbnQoJ1tuZy1iaW5kPVwidGl0bGVcIl0nLCB0ZW1wbGF0ZUVsWzBdKTtcclxuICAgICAgICAgICAgICBjb250ZW50RWwucmVtb3ZlQXR0cignbmctYmluZCcpLmh0bWwoY29udGVudFRlbXBsYXRlKTtcclxuICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVFbFswXS5vdXRlckhUTUw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGZXRjaCwgY29tcGlsZSB0aGVuIGluaXRpYWxpemUgdG9vbHRpcFxyXG4gICAgICAgIHZhciB0aXBMaW5rZXIsIHRpcEVsZW1lbnQsIHRpcFRlbXBsYXRlLCB0aXBDb250YWluZXI7XHJcbiAgICAgICAgJHRvb2x0aXAuJHByb21pc2UudGhlbihmdW5jdGlvbih0ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc09iamVjdCh0ZW1wbGF0ZSkpIHRlbXBsYXRlID0gdGVtcGxhdGUuZGF0YTtcclxuICAgICAgICAgIGlmKG9wdGlvbnMuaHRtbCkgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKGh0bWxSZXBsYWNlUmVnRXhwLCAnbmctYmluZC1odG1sPVwiJyk7XHJcbiAgICAgICAgICB0ZW1wbGF0ZSA9IHRyaW0uYXBwbHkodGVtcGxhdGUpO1xyXG4gICAgICAgICAgdGlwVGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgICAgICAgIHRpcExpbmtlciA9ICRjb21waWxlKHRlbXBsYXRlKTtcclxuICAgICAgICAgICR0b29sdGlwLmluaXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHRvb2x0aXAuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIC8vIE9wdGlvbnM6IGRlbGF5XHJcbiAgICAgICAgICBpZiAob3B0aW9ucy5kZWxheSAmJiBhbmd1bGFyLmlzTnVtYmVyKG9wdGlvbnMuZGVsYXkpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuZGVsYXkgPSB7XHJcbiAgICAgICAgICAgICAgc2hvdzogb3B0aW9ucy5kZWxheSxcclxuICAgICAgICAgICAgICBoaWRlOiBvcHRpb25zLmRlbGF5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gUmVwbGFjZSB0cmlnZ2VyIG9uIHRvdWNoIGRldmljZXMgP1xyXG4gICAgICAgICAgLy8gaWYoaXNUb3VjaCAmJiBvcHRpb25zLnRyaWdnZXIgPT09IGRlZmF1bHRzLnRyaWdnZXIpIHtcclxuICAgICAgICAgIC8vICAgb3B0aW9ucy50cmlnZ2VyLnJlcGxhY2UoL2hvdmVyL2csICdjbGljaycpO1xyXG4gICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgIC8vIE9wdGlvbnMgOiBjb250YWluZXJcclxuICAgICAgICAgIGlmKG9wdGlvbnMuY29udGFpbmVyID09PSAnc2VsZicpIHtcclxuICAgICAgICAgICAgdGlwQ29udGFpbmVyID0gZWxlbWVudDtcclxuICAgICAgICAgIH0gZWxzZSBpZihhbmd1bGFyLmlzRWxlbWVudChvcHRpb25zLmNvbnRhaW5lcikpIHtcclxuICAgICAgICAgICAgdGlwQ29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XHJcbiAgICAgICAgICB9IGVsc2UgaWYob3B0aW9ucy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgdGlwQ29udGFpbmVyID0gZmluZEVsZW1lbnQob3B0aW9ucy5jb250YWluZXIpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIE9wdGlvbnM6IHRyaWdnZXJcclxuICAgICAgICAgIHZhciB0cmlnZ2VycyA9IG9wdGlvbnMudHJpZ2dlci5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHRyaWdnZXJzLCBmdW5jdGlvbih0cmlnZ2VyKSB7XHJcbiAgICAgICAgICAgIGlmKHRyaWdnZXIgPT09ICdjbGljaycpIHtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsICR0b29sdGlwLnRvZ2dsZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZih0cmlnZ2VyICE9PSAnbWFudWFsJykge1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQub24odHJpZ2dlciA9PT0gJ2hvdmVyJyA/ICdtb3VzZWVudGVyJyA6ICdmb2N1cycsICR0b29sdGlwLmVudGVyKTtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9uKHRyaWdnZXIgPT09ICdob3ZlcicgPyAnbW91c2VsZWF2ZScgOiAnYmx1cicsICR0b29sdGlwLmxlYXZlKTtcclxuICAgICAgICAgICAgICBub2RlTmFtZSA9PT0gJ2J1dHRvbicgJiYgdHJpZ2dlciAhPT0gJ2hvdmVyJyAmJiBlbGVtZW50Lm9uKGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgJHRvb2x0aXAuJG9uRm9jdXNFbGVtZW50TW91c2VEb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLy8gT3B0aW9uczogdGFyZ2V0XHJcbiAgICAgICAgICBpZihvcHRpb25zLnRhcmdldCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLnRhcmdldCA9IGFuZ3VsYXIuaXNFbGVtZW50KG9wdGlvbnMudGFyZ2V0KSA/IG9wdGlvbnMudGFyZ2V0IDogZmluZEVsZW1lbnQob3B0aW9ucy50YXJnZXQpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIE9wdGlvbnM6IHNob3dcclxuICAgICAgICAgIGlmKG9wdGlvbnMuc2hvdykge1xyXG4gICAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgb3B0aW9ucy50cmlnZ2VyID09PSAnZm9jdXMnID8gZWxlbWVudFswXS5mb2N1cygpIDogJHRvb2x0aXAuc2hvdygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRvb2x0aXAuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIC8vIFVuYmluZCBldmVudHNcclxuICAgICAgICAgIHZhciB0cmlnZ2VycyA9IG9wdGlvbnMudHJpZ2dlci5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IHRyaWdnZXJzLmxlbmd0aDsgaS0tOykge1xyXG4gICAgICAgICAgICB2YXIgdHJpZ2dlciA9IHRyaWdnZXJzW2ldO1xyXG4gICAgICAgICAgICBpZih0cmlnZ2VyID09PSAnY2xpY2snKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudC5vZmYoJ2NsaWNrJywgJHRvb2x0aXAudG9nZ2xlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHRyaWdnZXIgIT09ICdtYW51YWwnKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudC5vZmYodHJpZ2dlciA9PT0gJ2hvdmVyJyA/ICdtb3VzZWVudGVyJyA6ICdmb2N1cycsICR0b29sdGlwLmVudGVyKTtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9mZih0cmlnZ2VyID09PSAnaG92ZXInID8gJ21vdXNlbGVhdmUnIDogJ2JsdXInLCAkdG9vbHRpcC5sZWF2ZSk7XHJcbiAgICAgICAgICAgICAgbm9kZU5hbWUgPT09ICdidXR0b24nICYmIHRyaWdnZXIgIT09ICdob3ZlcicgJiYgZWxlbWVudC5vZmYoaXNUb3VjaCA/ICd0b3VjaHN0YXJ0JyA6ICdtb3VzZWRvd24nLCAkdG9vbHRpcC4kb25Gb2N1c0VsZW1lbnRNb3VzZURvd24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gUmVtb3ZlIGVsZW1lbnRcclxuICAgICAgICAgIGlmKHRpcEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGlwRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdGlwRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQ2FuY2VsIHBlbmRpbmcgY2FsbGJhY2tzXHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcblxyXG4gICAgICAgICAgLy8gRGVzdHJveSBzY29wZVxyXG4gICAgICAgICAgc2NvcGUuJGRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRvb2x0aXAuZW50ZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgICBob3ZlclN0YXRlID0gJ2luJztcclxuICAgICAgICAgIGlmICghb3B0aW9ucy5kZWxheSB8fCAhb3B0aW9ucy5kZWxheS5zaG93KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkdG9vbHRpcC5zaG93KCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChob3ZlclN0YXRlID09PSdpbicpICR0b29sdGlwLnNob3coKTtcclxuICAgICAgICAgIH0sIG9wdGlvbnMuZGVsYXkuc2hvdyk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0b29sdGlwLnNob3cgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICBzY29wZS4kZW1pdChvcHRpb25zLnByZWZpeEV2ZW50ICsgJy5zaG93LmJlZm9yZScsICR0b29sdGlwKTtcclxuICAgICAgICAgIHZhciBwYXJlbnQgPSBvcHRpb25zLmNvbnRhaW5lciA/IHRpcENvbnRhaW5lciA6IG51bGw7XHJcbiAgICAgICAgICB2YXIgYWZ0ZXIgPSBvcHRpb25zLmNvbnRhaW5lciA/IG51bGwgOiBlbGVtZW50O1xyXG5cclxuICAgICAgICAgIC8vIEhpZGUgYW55IGV4aXN0aW5nIHRpcEVsZW1lbnRcclxuICAgICAgICAgIGlmKHRpcEVsZW1lbnQpIHRpcEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAvLyBGZXRjaCBhIGNsb25lZCBlbGVtZW50IGxpbmtlZCBmcm9tIHRlbXBsYXRlXHJcbiAgICAgICAgICB0aXBFbGVtZW50ID0gJHRvb2x0aXAuJGVsZW1lbnQgPSB0aXBMaW5rZXIoc2NvcGUsIGZ1bmN0aW9uKGNsb25lZEVsZW1lbnQsIHNjb3BlKSB7fSk7XHJcblxyXG4gICAgICAgICAgLy8gU2V0IHRoZSBpbml0aWFsIHBvc2l0aW9uaW5nLiAgTWFrZSB0aGUgdG9vbHRpcCBpbnZpc2libGVcclxuICAgICAgICAgIC8vIHNvIElFIGRvZXNuJ3QgdHJ5IHRvIGZvY3VzIG9uIGl0IG9mZiBzY3JlZW4uXHJcbiAgICAgICAgICB0aXBFbGVtZW50LmNzcyh7dG9wOiAnLTk5OTlweCcsIGxlZnQ6ICctOTk5OXB4JywgZGlzcGxheTogJ2Jsb2NrJywgdmlzaWJpbGl0eTogJ2hpZGRlbid9KS5hZGRDbGFzcyhvcHRpb25zLnBsYWNlbWVudCk7XHJcblxyXG4gICAgICAgICAgLy8gT3B0aW9uczogYW5pbWF0aW9uXHJcbiAgICAgICAgICBpZihvcHRpb25zLmFuaW1hdGlvbikgdGlwRWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLmFuaW1hdGlvbik7XHJcbiAgICAgICAgICAvLyBPcHRpb25zOiB0eXBlXHJcbiAgICAgICAgICBpZihvcHRpb25zLnR5cGUpIHRpcEVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy5wcmVmaXhDbGFzcyArICctJyArIG9wdGlvbnMudHlwZSk7XHJcbiAgICAgICAgICAvLyBPcHRpb25zOiBjdXN0b20gY2xhc3Nlc1xyXG4gICAgICAgICAgaWYob3B0aW9ucy5jdXN0b21DbGFzcykgdGlwRWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLmN1c3RvbUNsYXNzKTtcclxuXHJcbiAgICAgICAgICAkYW5pbWF0ZS5lbnRlcih0aXBFbGVtZW50LCBwYXJlbnQsIGFmdGVyLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2NvcGUuJGVtaXQob3B0aW9ucy5wcmVmaXhFdmVudCArICcuc2hvdycsICR0b29sdGlwKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgJHRvb2x0aXAuJGlzU2hvd24gPSBzY29wZS4kaXNTaG93biA9IHRydWU7XHJcbiAgICAgICAgICBzY29wZS4kJHBoYXNlIHx8IChzY29wZS4kcm9vdCAmJiBzY29wZS4kcm9vdC4kJHBoYXNlKSB8fCBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAkJHJBRihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICR0b29sdGlwLiRhcHBseVBsYWNlbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gT25jZSBwbGFjZWQsIG1ha2UgdGhlIHRvb2x0aXAgdmlzaWJsZVxyXG4gICAgICAgICAgICB0aXBFbGVtZW50LmNzcyh7dmlzaWJpbGl0eTogJ3Zpc2libGUnfSk7XHJcbiAgICAgICAgICB9KTsgLy8gdmFyIGEgPSBib2R5RWwub2Zmc2V0V2lkdGggKyAxOyA/XHJcblxyXG4gICAgICAgICAgLy8gQmluZCBldmVudHNcclxuICAgICAgICAgIGlmKG9wdGlvbnMua2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy50cmlnZ2VyICE9PSAnZm9jdXMnKSB7XHJcbiAgICAgICAgICAgICAgJHRvb2x0aXAuZm9jdXMoKTtcclxuICAgICAgICAgICAgICB0aXBFbGVtZW50Lm9uKCdrZXl1cCcsICR0b29sdGlwLiRvbktleVVwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXl1cCcsICR0b29sdGlwLiRvbkZvY3VzS2V5VXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0b29sdGlwLmxlYXZlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgaG92ZXJTdGF0ZSA9ICdvdXQnO1xyXG4gICAgICAgICAgaWYgKCFvcHRpb25zLmRlbGF5IHx8ICFvcHRpb25zLmRlbGF5LmhpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICR0b29sdGlwLmhpZGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGhvdmVyU3RhdGUgPT09ICdvdXQnKSB7XHJcbiAgICAgICAgICAgICAgJHRvb2x0aXAuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCBvcHRpb25zLmRlbGF5LmhpZGUpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdG9vbHRpcC5oaWRlID0gZnVuY3Rpb24oYmx1cikge1xyXG5cclxuICAgICAgICAgIGlmKCEkdG9vbHRpcC4kaXNTaG93bikgcmV0dXJuO1xyXG4gICAgICAgICAgc2NvcGUuJGVtaXQob3B0aW9ucy5wcmVmaXhFdmVudCArICcuaGlkZS5iZWZvcmUnLCAkdG9vbHRpcCk7XHJcblxyXG4gICAgICAgICAgJGFuaW1hdGUubGVhdmUodGlwRWxlbWVudCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KG9wdGlvbnMucHJlZml4RXZlbnQgKyAnLmhpZGUnLCAkdG9vbHRpcCk7XHJcblxyXG4gICAgICAgICAgICAvLyBBbGxvdyB0byBibHVyIHRoZSBpbnB1dCB3aGVuIGhpZGRlbiwgbGlrZSB3aGVuIHByZXNzaW5nIGVudGVyIGtleVxyXG4gICAgICAgICAgICBpZihibHVyICYmIG9wdGlvbnMudHJpZ2dlciA9PT0gJ2ZvY3VzJykge1xyXG4gICAgICAgICAgICAgIHJldHVybiBlbGVtZW50WzBdLmJsdXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgJHRvb2x0aXAuJGlzU2hvd24gPSBzY29wZS4kaXNTaG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgc2NvcGUuJCRwaGFzZSB8fCAoc2NvcGUuJHJvb3QgJiYgc2NvcGUuJHJvb3QuJCRwaGFzZSkgfHwgc2NvcGUuJGRpZ2VzdCgpO1xyXG5cclxuICAgICAgICAgIC8vIFVuYmluZCBldmVudHNcclxuICAgICAgICAgIGlmKG9wdGlvbnMua2V5Ym9hcmQgJiYgdGlwRWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aXBFbGVtZW50Lm9mZigna2V5dXAnLCAkdG9vbHRpcC4kb25LZXlVcCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0b29sdGlwLnRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHRvb2x0aXAuJGlzU2hvd24gPyAkdG9vbHRpcC5sZWF2ZSgpIDogJHRvb2x0aXAuZW50ZXIoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdG9vbHRpcC5mb2N1cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdGlwRWxlbWVudFswXS5mb2N1cygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByb3RlY3RlZCBtZXRob2RzXHJcblxyXG4gICAgICAgICR0b29sdGlwLiRhcHBseVBsYWNlbWVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYoIXRpcEVsZW1lbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAvLyBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSB0b29sdGlwIGVsZW1lbnQuXHJcbiAgICAgICAgICB2YXIgZWxlbWVudFBvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgICAvLyBHZXQgdGhlIGhlaWdodCBhbmQgd2lkdGggb2YgdGhlIHRvb2x0aXAgc28gd2UgY2FuIGNlbnRlciBpdC5cclxuICAgICAgICAgIHZhciB0aXBXaWR0aCA9IHRpcEVsZW1lbnQucHJvcCgnb2Zmc2V0V2lkdGgnKSxcclxuICAgICAgICAgICAgICB0aXBIZWlnaHQgPSB0aXBFbGVtZW50LnByb3AoJ29mZnNldEhlaWdodCcpO1xyXG5cclxuICAgICAgICAgIC8vIEdldCB0aGUgdG9vbHRpcCdzIHRvcCBhbmQgbGVmdCBjb29yZGluYXRlcyB0byBjZW50ZXIgaXQgd2l0aCB0aGlzIGRpcmVjdGl2ZS5cclxuICAgICAgICAgIHZhciB0aXBQb3NpdGlvbiA9IGdldENhbGN1bGF0ZWRPZmZzZXQob3B0aW9ucy5wbGFjZW1lbnQsIGVsZW1lbnRQb3NpdGlvbiwgdGlwV2lkdGgsIHRpcEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgLy8gTm93IHNldCB0aGUgY2FsY3VsYXRlZCBwb3NpdGlvbmluZy5cclxuICAgICAgICAgIHRpcFBvc2l0aW9uLnRvcCArPSAncHgnO1xyXG4gICAgICAgICAgdGlwUG9zaXRpb24ubGVmdCArPSAncHgnO1xyXG4gICAgICAgICAgdGlwRWxlbWVudC5jc3ModGlwUG9zaXRpb24pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdG9vbHRpcC4kb25LZXlVcCA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgaWYgKGV2dC53aGljaCA9PT0gMjcgJiYgJHRvb2x0aXAuJGlzU2hvd24pIHtcclxuICAgICAgICAgICAgJHRvb2x0aXAuaGlkZSgpO1xyXG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHRvb2x0aXAuJG9uRm9jdXNLZXlVcCA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgaWYgKGV2dC53aGljaCA9PT0gMjcpIHtcclxuICAgICAgICAgICAgZWxlbWVudFswXS5ibHVyKCk7XHJcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdG9vbHRpcC4kb25Gb2N1c0VsZW1lbnRNb3VzZURvd24gPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgLy8gU29tZSBicm93c2VycyBkbyBub3QgYXV0by1mb2N1cyBidXR0b25zIChlZy4gU2FmYXJpKVxyXG4gICAgICAgICAgJHRvb2x0aXAuJGlzU2hvd24gPyBlbGVtZW50WzBdLmJsdXIoKSA6IGVsZW1lbnRbMF0uZm9jdXMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UG9zaXRpb24oKSB7XHJcbiAgICAgICAgICBpZihvcHRpb25zLmNvbnRhaW5lciA9PT0gJ2JvZHknKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkaW1lbnNpb25zLm9mZnNldChvcHRpb25zLnRhcmdldFswXSB8fCBlbGVtZW50WzBdKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkaW1lbnNpb25zLnBvc2l0aW9uKG9wdGlvbnMudGFyZ2V0WzBdIHx8IGVsZW1lbnRbMF0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2FsY3VsYXRlZE9mZnNldChwbGFjZW1lbnQsIHBvc2l0aW9uLCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KSB7XHJcbiAgICAgICAgICB2YXIgb2Zmc2V0O1xyXG4gICAgICAgICAgdmFyIHNwbGl0ID0gcGxhY2VtZW50LnNwbGl0KCctJyk7XHJcblxyXG4gICAgICAgICAgc3dpdGNoIChzcGxpdFswXSkge1xyXG4gICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICBvZmZzZXQgPSB7XHJcbiAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgKyBwb3NpdGlvbi5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMixcclxuICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgcG9zaXRpb24ud2lkdGhcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgICAgICBvZmZzZXQgPSB7XHJcbiAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgKyBwb3NpdGlvbi5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCArIHBvc2l0aW9uLndpZHRoIC8gMiAtIGFjdHVhbFdpZHRoIC8gMlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICBvZmZzZXQgPSB7XHJcbiAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgKyBwb3NpdGlvbi5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMixcclxuICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0IC0gYWN0dWFsV2lkdGhcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBvZmZzZXQgPSB7XHJcbiAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgLSBhY3R1YWxIZWlnaHQsXHJcbiAgICAgICAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCArIHBvc2l0aW9uLndpZHRoIC8gMiAtIGFjdHVhbFdpZHRoIC8gMlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZighc3BsaXRbMV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9mZnNldDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBBZGQgc3VwcG9ydCBmb3IgY29ybmVycyBAdG9kbyBjc3NcclxuICAgICAgICAgIGlmKHNwbGl0WzBdID09PSAndG9wJyB8fCBzcGxpdFswXSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChzcGxpdFsxXSkge1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICBvZmZzZXQubGVmdCA9IHBvc2l0aW9uLmxlZnQ7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgICAgICBvZmZzZXQubGVmdCA9ICBwb3NpdGlvbi5sZWZ0ICsgcG9zaXRpb24ud2lkdGggLSBhY3R1YWxXaWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmKHNwbGl0WzBdID09PSAnbGVmdCcgfHwgc3BsaXRbMF0gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChzcGxpdFsxXSkge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICAgIG9mZnNldC50b3AgPSBwb3NpdGlvbi50b3AgLSBhY3R1YWxIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgICAgICAgb2Zmc2V0LnRvcCA9IHBvc2l0aW9uLnRvcCArIHBvc2l0aW9uLmhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBvZmZzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJHRvb2x0aXA7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBIZWxwZXIgZnVuY3Rpb25zXHJcblxyXG4gICAgICBmdW5jdGlvbiBmaW5kRWxlbWVudChxdWVyeSwgZWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiBhbmd1bGFyLmVsZW1lbnQoKGVsZW1lbnQgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZmV0Y2hUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAkcS53aGVuKCR0ZW1wbGF0ZUNhY2hlLmdldCh0ZW1wbGF0ZSkgfHwgJGh0dHAuZ2V0KHRlbXBsYXRlKSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3QocmVzKSkge1xyXG4gICAgICAgICAgICAkdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGUsIHJlcy5kYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIFRvb2x0aXBGYWN0b3J5O1xyXG5cclxuICAgIH1dO1xyXG5cclxuICB9KVxyXG5cclxuICAuZGlyZWN0aXZlKCdic1Rvb2x0aXAnLCBbXCIkd2luZG93XCIsIFwiJGxvY2F0aW9uXCIsIFwiJHNjZVwiLCBcIiR0b29sdGlwXCIsIFwiJCRyQUZcIiwgZnVuY3Rpb24oJHdpbmRvdywgJGxvY2F0aW9uLCAkc2NlLCAkdG9vbHRpcCwgJCRyQUYpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgdHJhbnNjbHVzaW9uKSB7XHJcblxyXG4gICAgICAgIC8vIERpcmVjdGl2ZSBvcHRpb25zXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7c2NvcGU6IHNjb3BlfTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goWyd0ZW1wbGF0ZScsICdjb250ZW50VGVtcGxhdGUnLCAncGxhY2VtZW50JywgJ2NvbnRhaW5lcicsICd0YXJnZXQnLCAnZGVsYXknLCAndHJpZ2dlcicsICdrZXlib2FyZCcsICdodG1sJywgJ2FuaW1hdGlvbicsICd0eXBlJywgJ2N1c3RvbUNsYXNzJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSkgb3B0aW9uc1trZXldID0gYXR0cltrZXldO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBPYnNlcnZlIHNjb3BlIGF0dHJpYnV0ZXMgZm9yIGNoYW5nZVxyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3RpdGxlJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgYXR0ci4kb2JzZXJ2ZShrZXksIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBzY29wZVtrZXldID0gJHNjZS50cnVzdEFzSHRtbChuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuaXNEZWZpbmVkKG9sZFZhbHVlKSAmJiAkJHJBRihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICB0b29sdGlwICYmIHRvb2x0aXAuJGFwcGx5UGxhY2VtZW50KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgc2NvcGUgYXMgYW4gb2JqZWN0XHJcbiAgICAgICAgYXR0ci5ic1Rvb2x0aXAgJiYgc2NvcGUuJHdhdGNoKGF0dHIuYnNUb29sdGlwLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3QobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHNjb3BlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzY29wZS50aXRsZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYW5ndWxhci5pc0RlZmluZWQob2xkVmFsdWUpICYmICQkckFGKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0b29sdGlwICYmIHRvb2x0aXAuJGFwcGx5UGxhY2VtZW50KCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBiaW5kaW5nIHN1cHBvcnRcclxuICAgICAgICBhdHRyLmJzU2hvdyAmJiBzY29wZS4kd2F0Y2goYXR0ci5ic1Nob3csIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgaWYoIXRvb2x0aXAgfHwgIWFuZ3VsYXIuaXNEZWZpbmVkKG5ld1ZhbHVlKSkgcmV0dXJuO1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc1N0cmluZyhuZXdWYWx1ZSkpIG5ld1ZhbHVlID0gISFuZXdWYWx1ZS5tYXRjaCgnLD8odG9vbHRpcCksPycpO1xyXG4gICAgICAgICAgbmV3VmFsdWUgPT09IHRydWUgPyB0b29sdGlwLnNob3coKSA6IHRvb2x0aXAuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIHBvcG92ZXJcclxuICAgICAgICB2YXIgdG9vbHRpcCA9ICR0b29sdGlwKGVsZW1lbnQsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3Rpb25cclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZih0b29sdGlwKSB0b29sdGlwLmRlc3Ryb3koKTtcclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgdG9vbHRpcCA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XSk7XHJcblxyXG4vLyBTb3VyY2U6IHR5cGVhaGVhZC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAudHlwZWFoZWFkJywgWydtZ2NyZWEubmdTdHJhcC50b29sdGlwJywgJ21nY3JlYS5uZ1N0cmFwLmhlbHBlcnMucGFyc2VPcHRpb25zJ10pXHJcblxyXG4gIC5wcm92aWRlcignJHR5cGVhaGVhZCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFuaW1hdGlvbjogJ2FtLWZhZGUnLFxyXG4gICAgICBwcmVmaXhDbGFzczogJ3R5cGVhaGVhZCcsXHJcbiAgICAgIHByZWZpeEV2ZW50OiAnJHR5cGVhaGVhZCcsXHJcbiAgICAgIHBsYWNlbWVudDogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgdGVtcGxhdGU6ICd0eXBlYWhlYWQvdHlwZWFoZWFkLnRwbC5odG1sJyxcclxuICAgICAgdHJpZ2dlcjogJ2ZvY3VzJyxcclxuICAgICAgY29udGFpbmVyOiBmYWxzZSxcclxuICAgICAga2V5Ym9hcmQ6IHRydWUsXHJcbiAgICAgIGh0bWw6IGZhbHNlLFxyXG4gICAgICBkZWxheTogMCxcclxuICAgICAgbWluTGVuZ3RoOiAxLFxyXG4gICAgICBmaWx0ZXI6ICdmaWx0ZXInLFxyXG4gICAgICBsaW1pdDogNlxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLiRnZXQgPSBbXCIkd2luZG93XCIsIFwiJHJvb3RTY29wZVwiLCBcIiR0b29sdGlwXCIsIGZ1bmN0aW9uKCR3aW5kb3csICRyb290U2NvcGUsICR0b29sdGlwKSB7XHJcblxyXG4gICAgICB2YXIgYm9keUVsID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cuZG9jdW1lbnQuYm9keSk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBUeXBlYWhlYWRGYWN0b3J5KGVsZW1lbnQsIGNvbnRyb2xsZXIsIGNvbmZpZykge1xyXG5cclxuICAgICAgICB2YXIgJHR5cGVhaGVhZCA9IHt9O1xyXG5cclxuICAgICAgICAvLyBDb21tb24gdmFyc1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRzLCBjb25maWcpO1xyXG5cclxuICAgICAgICAkdHlwZWFoZWFkID0gJHRvb2x0aXAoZWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgICAgICAgdmFyIHBhcmVudFNjb3BlID0gY29uZmlnLnNjb3BlO1xyXG4gICAgICAgIHZhciBzY29wZSA9ICR0eXBlYWhlYWQuJHNjb3BlO1xyXG5cclxuICAgICAgICBzY29wZS4kcmVzZXRNYXRjaGVzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgIHNjb3BlLiRtYXRjaGVzID0gW107XHJcbiAgICAgICAgICBzY29wZS4kYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2NvcGUuJHJlc2V0TWF0Y2hlcygpO1xyXG5cclxuICAgICAgICBzY29wZS4kYWN0aXZhdGUgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkdHlwZWFoZWFkLmFjdGl2YXRlKGluZGV4KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLiRzZWxlY3QgPSBmdW5jdGlvbihpbmRleCwgZXZ0KSB7XHJcbiAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICR0eXBlYWhlYWQuc2VsZWN0KGluZGV4KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLiRpc1Zpc2libGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiAkdHlwZWFoZWFkLiRpc1Zpc2libGUoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBQdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAkdHlwZWFoZWFkLnVwZGF0ZSA9IGZ1bmN0aW9uKG1hdGNoZXMpIHtcclxuICAgICAgICAgIHNjb3BlLiRtYXRjaGVzID0gbWF0Y2hlcztcclxuICAgICAgICAgIGlmKHNjb3BlLiRhY3RpdmVJbmRleCA+PSBtYXRjaGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzY29wZS4kYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0eXBlYWhlYWQuYWN0aXZhdGUgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgc2NvcGUuJGFjdGl2ZUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHR5cGVhaGVhZC5zZWxlY3QgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgdmFyIHZhbHVlID0gc2NvcGUuJG1hdGNoZXNbaW5kZXhdLnZhbHVlO1xyXG4gICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlcigpO1xyXG4gICAgICAgICAgc2NvcGUuJHJlc2V0TWF0Y2hlcygpO1xyXG4gICAgICAgICAgaWYocGFyZW50U2NvcGUpIHBhcmVudFNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgIC8vIEVtaXQgZXZlbnRcclxuICAgICAgICAgIHNjb3BlLiRlbWl0KG9wdGlvbnMucHJlZml4RXZlbnQgKyAnLnNlbGVjdCcsIHZhbHVlLCBpbmRleCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUHJvdGVjdGVkIG1ldGhvZHNcclxuXHJcbiAgICAgICAgJHR5cGVhaGVhZC4kaXNWaXNpYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZighb3B0aW9ucy5taW5MZW5ndGggfHwgIWNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhc2NvcGUuJG1hdGNoZXMubGVuZ3RoO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gbWluTGVuZ3RoIHN1cHBvcnRcclxuICAgICAgICAgIHJldHVybiBzY29wZS4kbWF0Y2hlcy5sZW5ndGggJiYgYW5ndWxhci5pc1N0cmluZyhjb250cm9sbGVyLiR2aWV3VmFsdWUpICYmIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZS5sZW5ndGggPj0gb3B0aW9ucy5taW5MZW5ndGg7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHR5cGVhaGVhZC4kZ2V0SW5kZXggPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgdmFyIGwgPSBzY29wZS4kbWF0Y2hlcy5sZW5ndGgsIGkgPSBsO1xyXG4gICAgICAgICAgaWYoIWwpIHJldHVybjtcclxuICAgICAgICAgIGZvcihpID0gbDsgaS0tOykge1xyXG4gICAgICAgICAgICBpZihzY29wZS4kbWF0Y2hlc1tpXS52YWx1ZSA9PT0gdmFsdWUpIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoaSA8IDApIHJldHVybjtcclxuICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0eXBlYWhlYWQuJG9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAvLyBQcmV2ZW50IGJsdXIgb24gbW91c2Vkb3duXHJcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdHlwZWFoZWFkLiRvbktleURvd24gPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIGlmKCEvKDM4fDQwfDEzKS8udGVzdChldnQua2V5Q29kZSkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAvLyBMZXQgbmdTdWJtaXQgcGFzcyBpZiB0aGUgdHlwZWFoZWFkIHRpcCBpcyBoaWRkZW5cclxuICAgICAgICAgIGlmKCR0eXBlYWhlYWQuJGlzVmlzaWJsZSgpKSB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gU2VsZWN0IHdpdGggZW50ZXJcclxuICAgICAgICAgIGlmKGV2dC5rZXlDb2RlID09PSAxMyAmJiBzY29wZS4kbWF0Y2hlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJHR5cGVhaGVhZC5zZWxlY3Qoc2NvcGUuJGFjdGl2ZUluZGV4KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBOYXZpZ2F0ZSB3aXRoIGtleWJvYXJkXHJcbiAgICAgICAgICBlbHNlIGlmKGV2dC5rZXlDb2RlID09PSAzOCAmJiBzY29wZS4kYWN0aXZlSW5kZXggPiAwKSBzY29wZS4kYWN0aXZlSW5kZXgtLTtcclxuICAgICAgICAgIGVsc2UgaWYoZXZ0LmtleUNvZGUgPT09IDQwICYmIHNjb3BlLiRhY3RpdmVJbmRleCA8IHNjb3BlLiRtYXRjaGVzLmxlbmd0aCAtIDEpIHNjb3BlLiRhY3RpdmVJbmRleCsrO1xyXG4gICAgICAgICAgZWxzZSBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHNjb3BlLiRhY3RpdmVJbmRleCkpIHNjb3BlLiRhY3RpdmVJbmRleCA9IDA7XHJcbiAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gT3ZlcnJpZGVzXHJcblxyXG4gICAgICAgIHZhciBzaG93ID0gJHR5cGVhaGVhZC5zaG93O1xyXG4gICAgICAgICR0eXBlYWhlYWQuc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2hvdygpO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHR5cGVhaGVhZC4kZWxlbWVudC5vbignbW91c2Vkb3duJywgJHR5cGVhaGVhZC4kb25Nb3VzZURvd24pO1xyXG4gICAgICAgICAgICBpZihvcHRpb25zLmtleWJvYXJkKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudC5vbigna2V5ZG93bicsICR0eXBlYWhlYWQuJG9uS2V5RG93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBoaWRlID0gJHR5cGVhaGVhZC5oaWRlO1xyXG4gICAgICAgICR0eXBlYWhlYWQuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHR5cGVhaGVhZC4kZWxlbWVudC5vZmYoJ21vdXNlZG93bicsICR0eXBlYWhlYWQuJG9uTW91c2VEb3duKTtcclxuICAgICAgICAgIGlmKG9wdGlvbnMua2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5vZmYoJ2tleWRvd24nLCAkdHlwZWFoZWFkLiRvbktleURvd24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaGlkZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAkdHlwZWFoZWFkO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgVHlwZWFoZWFkRmFjdG9yeS5kZWZhdWx0cyA9IGRlZmF1bHRzO1xyXG4gICAgICByZXR1cm4gVHlwZWFoZWFkRmFjdG9yeTtcclxuXHJcbiAgICB9XTtcclxuXHJcbiAgfSlcclxuXHJcbiAgLmRpcmVjdGl2ZSgnYnNUeXBlYWhlYWQnLCBbXCIkd2luZG93XCIsIFwiJHBhcnNlXCIsIFwiJHFcIiwgXCIkdHlwZWFoZWFkXCIsIFwiJHBhcnNlT3B0aW9uc1wiLCBmdW5jdGlvbigkd2luZG93LCAkcGFyc2UsICRxLCAkdHlwZWFoZWFkLCAkcGFyc2VPcHRpb25zKSB7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0gJHR5cGVhaGVhZC5kZWZhdWx0cztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGNvbnRyb2xsZXIpIHtcclxuXHJcbiAgICAgICAgLy8gRGlyZWN0aXZlIG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtzY29wZTogc2NvcGV9O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ3BsYWNlbWVudCcsICdjb250YWluZXInLCAnZGVsYXknLCAndHJpZ2dlcicsICdrZXlib2FyZCcsICdodG1sJywgJ2FuaW1hdGlvbicsICd0ZW1wbGF0ZScsICdmaWx0ZXInLCAnbGltaXQnLCAnbWluTGVuZ3RoJywgJ3dhdGNoT3B0aW9ucycsICdzZWxlY3RNb2RlJ10sIGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0cltrZXldKSkgb3B0aW9uc1trZXldID0gYXR0cltrZXldO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBCdWlsZCBwcm9wZXIgbmdPcHRpb25zXHJcbiAgICAgICAgdmFyIGZpbHRlciA9IG9wdGlvbnMuZmlsdGVyIHx8IGRlZmF1bHRzLmZpbHRlcjtcclxuICAgICAgICB2YXIgbGltaXQgPSBvcHRpb25zLmxpbWl0IHx8IGRlZmF1bHRzLmxpbWl0O1xyXG4gICAgICAgIHZhciBuZ09wdGlvbnMgPSBhdHRyLm5nT3B0aW9ucztcclxuICAgICAgICBpZihmaWx0ZXIpIG5nT3B0aW9ucyArPSAnIHwgJyArIGZpbHRlciArICc6JHZpZXdWYWx1ZSc7XHJcbiAgICAgICAgaWYobGltaXQpIG5nT3B0aW9ucyArPSAnIHwgbGltaXRUbzonICsgbGltaXQ7XHJcbiAgICAgICAgdmFyIHBhcnNlZE9wdGlvbnMgPSAkcGFyc2VPcHRpb25zKG5nT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdHlwZWFoZWFkXHJcbiAgICAgICAgdmFyIHR5cGVhaGVhZCA9ICR0eXBlYWhlYWQoZWxlbWVudCwgY29udHJvbGxlciwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIFdhdGNoIG9wdGlvbnMgb24gZGVtYW5kXHJcbiAgICAgICAgaWYob3B0aW9ucy53YXRjaE9wdGlvbnMpIHtcclxuICAgICAgICAgIC8vIFdhdGNoIG5nT3B0aW9ucyB2YWx1ZXMgYmVmb3JlIGZpbHRlcmluZyBmb3IgY2hhbmdlcywgZHJvcCBmdW5jdGlvbiBjYWxsc1xyXG4gICAgICAgICAgdmFyIHdhdGNoZWRPcHRpb25zID0gcGFyc2VkT3B0aW9ucy4kbWF0Y2hbN10ucmVwbGFjZSgvXFx8LisvLCAnJykucmVwbGFjZSgvXFwoLipcXCkvZywgJycpLnRyaW0oKTtcclxuICAgICAgICAgIHNjb3BlLiR3YXRjaCh3YXRjaGVkT3B0aW9ucywgZnVuY3Rpb24gKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJ3Njb3BlLiR3YXRjaCglcyknLCB3YXRjaGVkT3B0aW9ucywgbmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAgICAgcGFyc2VkT3B0aW9ucy52YWx1ZXNGbihzY29wZSwgY29udHJvbGxlcikudGhlbihmdW5jdGlvbiAodmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgdHlwZWFoZWFkLnVwZGF0ZSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0sIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gV2F0Y2ggbW9kZWwgZm9yIGNoYW5nZXNcclxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ01vZGVsLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUud2FybignJHdhdGNoJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICBzY29wZS4kbW9kZWxWYWx1ZSA9IG5ld1ZhbHVlOyAvLyBQdWJsaXNoIG1vZGVsVmFsdWUgb24gc2NvcGUgZm9yIGN1c3RvbSB0ZW1wbGF0ZXNcclxuICAgICAgICAgIHBhcnNlZE9wdGlvbnMudmFsdWVzRm4oc2NvcGUsIGNvbnRyb2xsZXIpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbih2YWx1ZXMpIHtcclxuICAgICAgICAgICAgLy8gUHJldmVudCBpbnB1dCB3aXRoIG5vIGZ1dHVyZSBwcm9zcGVjdCBpZiBzZWxlY3RNb2RlIGlzIHRydXRoeVxyXG4gICAgICAgICAgICAvLyBAVE9ETyB0ZXN0IHNlbGVjdE1vZGVcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5zZWxlY3RNb2RlICYmICF2YWx1ZXMubGVuZ3RoICYmIG5ld1ZhbHVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoY29udHJvbGxlci4kdmlld1ZhbHVlLnN1YnN0cmluZygwLCBjb250cm9sbGVyLiR2aWV3VmFsdWUubGVuZ3RoIC0gMSkpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih2YWx1ZXMubGVuZ3RoID4gbGltaXQpIHZhbHVlcyA9IHZhbHVlcy5zbGljZSgwLCBsaW1pdCk7XHJcbiAgICAgICAgICAgIHZhciBpc1Zpc2libGUgPSB0eXBlYWhlYWQuJGlzVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICBpc1Zpc2libGUgJiYgdHlwZWFoZWFkLnVwZGF0ZSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICAvLyBEbyBub3QgcmUtcXVldWUgYW4gdXBkYXRlIGlmIGEgY29ycmVjdCB2YWx1ZSBoYXMgYmVlbiBzZWxlY3RlZFxyXG4gICAgICAgICAgICBpZih2YWx1ZXMubGVuZ3RoID09PSAxICYmIHZhbHVlc1swXS52YWx1ZSA9PT0gbmV3VmFsdWUpIHJldHVybjtcclxuICAgICAgICAgICAgIWlzVmlzaWJsZSAmJiB0eXBlYWhlYWQudXBkYXRlKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIC8vIFF1ZXVlIGEgbmV3IHJlbmRlcmluZyB0aGF0IHdpbGwgbGV2ZXJhZ2UgY29sbGVjdGlvbiBsb2FkaW5nXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlcigpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE1vZGVsIHJlbmRlcmluZyBpbiB2aWV3XHJcbiAgICAgICAgY29udHJvbGxlci4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKCckcmVuZGVyJywgZWxlbWVudC5hdHRyKCduZy1tb2RlbCcpLCAnY29udHJvbGxlci4kbW9kZWxWYWx1ZScsIHR5cGVvZiBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCBjb250cm9sbGVyLiRtb2RlbFZhbHVlLCAnY29udHJvbGxlci4kdmlld1ZhbHVlJywgdHlwZW9mIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSwgY29udHJvbGxlci4kdmlld1ZhbHVlKTtcclxuICAgICAgICAgIGlmKGNvbnRyb2xsZXIuJGlzRW1wdHkoY29udHJvbGxlci4kdmlld1ZhbHVlKSkgcmV0dXJuIGVsZW1lbnQudmFsKCcnKTtcclxuICAgICAgICAgIHZhciBpbmRleCA9IHR5cGVhaGVhZC4kZ2V0SW5kZXgoY29udHJvbGxlci4kbW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBhbmd1bGFyLmlzRGVmaW5lZChpbmRleCkgPyB0eXBlYWhlYWQuJHNjb3BlLiRtYXRjaGVzW2luZGV4XS5sYWJlbCA6IGNvbnRyb2xsZXIuJHZpZXdWYWx1ZTtcclxuICAgICAgICAgIHNlbGVjdGVkID0gYW5ndWxhci5pc09iamVjdChzZWxlY3RlZCkgPyBzZWxlY3RlZC5sYWJlbCA6IHNlbGVjdGVkO1xyXG4gICAgICAgICAgZWxlbWVudC52YWwoc2VsZWN0ZWQucmVwbGFjZSgvPCg/Oi58XFxuKSo/Pi9nbSwgJycpLnRyaW0oKSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHR5cGVhaGVhZCkgdHlwZWFoZWFkLmRlc3Ryb3koKTtcclxuICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgdHlwZWFoZWFkID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIH1dKTtcclxuXHJcbn0pKHdpbmRvdywgZG9jdW1lbnQpO1xyXG4iLCIvKipcclxuICogYW5ndWxhci1zdHJhcFxyXG4gKiBAdmVyc2lvbiB2Mi4xLjAgLSAyMDE0LTA5LTA1XHJcbiAqIEBsaW5rIGh0dHA6Ly9tZ2NyZWEuZ2l0aHViLmlvL2FuZ3VsYXItc3RyYXBcclxuICogQGF1dGhvciBPbGl2aWVyIExvdXZpZ25lcyAob2xpdmllckBtZy1jcmVhLmNvbSlcclxuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXHJcbiAqL1xyXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8vIFNvdXJjZTogYWxlcnQudHBsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5hbGVydCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuXHJcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhbGVydC9hbGVydC50cGwuaHRtbCcsICc8ZGl2IGNsYXNzPVwiYWxlcnRcIiB0YWJpbmRleD1cIi0xXCIgbmctY2xhc3M9XCJbdHlwZSA/IFxcJ2FsZXJ0LVxcJyArIHR5cGUgOiBudWxsXVwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBuZy1pZj1cImRpc21pc3NhYmxlXCIgbmctY2xpY2s9XCIkaGlkZSgpXCI+JnRpbWVzOzwvYnV0dG9uPiA8c3Ryb25nIG5nLWJpbmQ9XCJ0aXRsZVwiPjwvc3Ryb25nPiZuYnNwOzxzcGFuIG5nLWJpbmQtaHRtbD1cImNvbnRlbnRcIj48L3NwYW4+PC9kaXY+Jyk7XHJcblxyXG59XSk7XHJcblxyXG4vLyBTb3VyY2U6IGFzaWRlLnRwbC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAuYXNpZGUnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcblxyXG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXNpZGUvYXNpZGUudHBsLmh0bWwnLCAnPGRpdiBjbGFzcz1cImFzaWRlXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj48ZGl2IGNsYXNzPVwiYXNpZGUtZGlhbG9nXCI+PGRpdiBjbGFzcz1cImFzaWRlLWNvbnRlbnRcIj48ZGl2IGNsYXNzPVwiYXNpZGUtaGVhZGVyXCIgbmctc2hvdz1cInRpdGxlXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIG5nLWNsaWNrPVwiJGhpZGUoKVwiPiZ0aW1lczs8L2J1dHRvbj48aDQgY2xhc3M9XCJhc2lkZS10aXRsZVwiIG5nLWJpbmQ9XCJ0aXRsZVwiPjwvaDQ+PC9kaXY+PGRpdiBjbGFzcz1cImFzaWRlLWJvZHlcIiBuZy1iaW5kPVwiY29udGVudFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJhc2lkZS1mb290ZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIG5nLWNsaWNrPVwiJGhpZGUoKVwiPkNsb3NlPC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG59XSk7XHJcblxyXG4vLyBTb3VyY2U6IGRhdGVwaWNrZXIudHBsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5kYXRlcGlja2VyJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG5cclxuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2RhdGVwaWNrZXIvZGF0ZXBpY2tlci50cGwuaHRtbCcsICc8ZGl2IGNsYXNzPVwiZHJvcGRvd24tbWVudSBkYXRlcGlja2VyXCIgbmctY2xhc3M9XCJcXCdkYXRlcGlja2VyLW1vZGUtXFwnICsgJG1vZGVcIiBzdHlsZT1cIm1heC13aWR0aDogMzIwcHhcIj48dGFibGUgc3R5bGU9XCJ0YWJsZS1sYXlvdXQ6IGZpeGVkOyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMDAlXCI+PHRoZWFkPjx0ciBjbGFzcz1cInRleHQtY2VudGVyXCI+PHRoPjxidXR0b24gdGFiaW5kZXg9XCItMVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBwdWxsLWxlZnRcIiBuZy1jbGljaz1cIiRzZWxlY3RQYW5lKC0xKVwiPjxpIGNsYXNzPVwie3skaWNvbkxlZnR9fVwiPjwvaT48L2J1dHRvbj48L3RoPjx0aCBjb2xzcGFuPVwie3sgcm93c1swXS5sZW5ndGggLSAyIH19XCI+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1ibG9jayB0ZXh0LXN0cm9uZ1wiIG5nLWNsaWNrPVwiJHRvZ2dsZU1vZGUoKVwiPjxzdHJvbmcgc3R5bGU9XCJ0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZVwiIG5nLWJpbmQ9XCJ0aXRsZVwiPjwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+PHRoPjxidXR0b24gdGFiaW5kZXg9XCItMVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBwdWxsLXJpZ2h0XCIgbmctY2xpY2s9XCIkc2VsZWN0UGFuZSgrMSlcIj48aSBjbGFzcz1cInt7JGljb25SaWdodH19XCI+PC9pPjwvYnV0dG9uPjwvdGg+PC90cj48dHIgbmctc2hvdz1cInNob3dMYWJlbHNcIiBuZy1iaW5kLWh0bWw9XCJsYWJlbHNcIj48L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBuZy1yZXBlYXQ9XCIoaSwgcm93KSBpbiByb3dzXCIgaGVpZ2h0PVwie3sgMTAwIC8gcm93cy5sZW5ndGggfX0lXCI+PHRkIGNsYXNzPVwidGV4dC1jZW50ZXJcIiBuZy1yZXBlYXQ9XCIoaiwgZWwpIGluIHJvd1wiPjxidXR0b24gdGFiaW5kZXg9XCItMVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIHN0eWxlPVwid2lkdGg6IDEwMCVcIiBuZy1jbGFzcz1cIntcXCdidG4tcHJpbWFyeVxcJzogZWwuc2VsZWN0ZWQsIFxcJ2J0bi1pbmZvIGJ0bi10b2RheVxcJzogZWwuaXNUb2RheSAmJiAhZWwuc2VsZWN0ZWR9XCIgbmctY2xpY2s9XCIkc2VsZWN0KGVsLmRhdGUpXCIgbmctZGlzYWJsZWQ9XCJlbC5kaXNhYmxlZFwiPjxzcGFuIG5nLWNsYXNzPVwie1xcJ3RleHQtbXV0ZWRcXCc6IGVsLm11dGVkfVwiIG5nLWJpbmQ9XCJlbC5sYWJlbFwiPjwvc3Bhbj48L2J1dHRvbj48L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PicpO1xyXG5cclxufV0pO1xyXG5cclxuLy8gU291cmNlOiBkcm9wZG93bi50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLmRyb3Bkb3duJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG5cclxuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2Ryb3Bkb3duL2Ryb3Bkb3duLnRwbC5odG1sJywgJzx1bCB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgcm9sZT1cIm1lbnVcIj48bGkgcm9sZT1cInByZXNlbnRhdGlvblwiIG5nLWNsYXNzPVwie2RpdmlkZXI6IGl0ZW0uZGl2aWRlcn1cIiBuZy1yZXBlYXQ9XCJpdGVtIGluIGNvbnRlbnRcIj48YSByb2xlPVwibWVudWl0ZW1cIiB0YWJpbmRleD1cIi0xXCIgbmctaHJlZj1cInt7aXRlbS5ocmVmfX1cIiBuZy1pZj1cIiFpdGVtLmRpdmlkZXIgJiYgaXRlbS5ocmVmXCIgdGFyZ2V0PVwie3tpdGVtLnRhcmdldCB8fCBcXCdcXCd9fVwiIG5nLWJpbmQ9XCJpdGVtLnRleHRcIj48L2E+IDxhIHJvbGU9XCJtZW51aXRlbVwiIHRhYmluZGV4PVwiLTFcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgbmctaWY9XCIhaXRlbS5kaXZpZGVyICYmIGl0ZW0uY2xpY2tcIiBuZy1jbGljaz1cIiRldmFsKGl0ZW0uY2xpY2spOyRoaWRlKClcIiBuZy1iaW5kPVwiaXRlbS50ZXh0XCI+PC9hPjwvbGk+PC91bD4nKTtcclxuXHJcbn1dKTtcclxuXHJcbi8vIFNvdXJjZTogbW9kYWwudHBsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC5tb2RhbCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuXHJcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdtb2RhbC9tb2RhbC50cGwuaHRtbCcsICc8ZGl2IGNsYXNzPVwibW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPjxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj48ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIiBuZy1zaG93PVwidGl0bGVcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgbmctY2xpY2s9XCIkaGlkZSgpXCI+JnRpbWVzOzwvYnV0dG9uPjxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCIgbmctYmluZD1cInRpdGxlXCI+PC9oND48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiIG5nLWJpbmQ9XCJjb250ZW50XCI+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgbmctY2xpY2s9XCIkaGlkZSgpXCI+Q2xvc2U8L2J1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuXHJcbn1dKTtcclxuXHJcbi8vIFNvdXJjZTogcG9wb3Zlci50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnBvcG92ZXInKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcblxyXG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncG9wb3Zlci9wb3BvdmVyLnRwbC5odG1sJywgJzxkaXYgY2xhc3M9XCJwb3BvdmVyXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiIG5nLWJpbmQ9XCJ0aXRsZVwiIG5nLXNob3c9XCJ0aXRsZVwiPjwvaDM+PGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiIG5nLWJpbmQ9XCJjb250ZW50XCI+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG59XSk7XHJcblxyXG4vLyBTb3VyY2U6IHNlbGVjdC50cGwuanNcclxuYW5ndWxhci5tb2R1bGUoJ21nY3JlYS5uZ1N0cmFwLnNlbGVjdCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuXHJcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdzZWxlY3Qvc2VsZWN0LnRwbC5odG1sJywgJzx1bCB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJzZWxlY3QgZHJvcGRvd24tbWVudVwiIG5nLXNob3c9XCIkaXNWaXNpYmxlKClcIiByb2xlPVwic2VsZWN0XCI+PGxpIG5nLWlmPVwiJHNob3dBbGxOb25lQnV0dG9uc1wiPjxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDVweDsgbWFyZ2luLWxlZnQ6IDVweFwiPjxidXR0b24gY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCIgbmctY2xpY2s9XCIkc2VsZWN0QWxsKClcIj5BbGw8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4teHNcIiBuZy1jbGljaz1cIiRzZWxlY3ROb25lKClcIj5Ob25lPC9idXR0b24+PC9kaXY+PC9saT48bGkgcm9sZT1cInByZXNlbnRhdGlvblwiIG5nLXJlcGVhdD1cIm1hdGNoIGluICRtYXRjaGVzXCIgbmctY2xhc3M9XCJ7YWN0aXZlOiAkaXNBY3RpdmUoJGluZGV4KX1cIj48YSBzdHlsZT1cImN1cnNvcjogZGVmYXVsdFwiIHJvbGU9XCJtZW51aXRlbVwiIHRhYmluZGV4PVwiLTFcIiBuZy1jbGljaz1cIiRzZWxlY3QoJGluZGV4LCAkZXZlbnQpXCI+PHNwYW4gbmctYmluZD1cIm1hdGNoLmxhYmVsXCI+PC9zcGFuPiA8aSBjbGFzcz1cInt7JGljb25DaGVja21hcmt9fSBwdWxsLXJpZ2h0XCIgbmctaWY9XCIkaXNNdWx0aXBsZSAmJiAkaXNBY3RpdmUoJGluZGV4KVwiPjwvaT48L2E+PC9saT48L3VsPicpO1xyXG5cclxufV0pO1xyXG5cclxuLy8gU291cmNlOiB0YWIudHBsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC50YWInKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcblxyXG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgndGFiL3RhYi50cGwuaHRtbCcsICc8dWwgY2xhc3M9XCJuYXZcIiBuZy1jbGFzcz1cIiRuYXZDbGFzc1wiIHJvbGU9XCJ0YWJsaXN0XCI+PGxpIG5nLXJlcGVhdD1cIiRwYW5lIGluICRwYW5lc1wiIG5nLWNsYXNzPVwiJGluZGV4ID09ICRwYW5lcy4kYWN0aXZlID8gJGFjdGl2ZUNsYXNzIDogXFwnXFwnXCI+PGEgcm9sZT1cInRhYlwiIGRhdGEtdG9nZ2xlPVwidGFiXCIgbmctY2xpY2s9XCIkc2V0QWN0aXZlKCRpbmRleClcIiBkYXRhLWluZGV4PVwie3sgJGluZGV4IH19XCIgbmctYmluZC1odG1sPVwiJHBhbmUudGl0bGVcIj48L2E+PC9saT48L3VsPjxkaXYgbmctdHJhbnNjbHVkZSBjbGFzcz1cInRhYi1jb250ZW50XCI+PC9kaXY+Jyk7XHJcblxyXG59XSk7XHJcblxyXG4vLyBTb3VyY2U6IHRpbWVwaWNrZXIudHBsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC50aW1lcGlja2VyJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG5cclxuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3RpbWVwaWNrZXIvdGltZXBpY2tlci50cGwuaHRtbCcsICc8ZGl2IGNsYXNzPVwiZHJvcGRvd24tbWVudSB0aW1lcGlja2VyXCIgc3R5bGU9XCJtaW4td2lkdGg6IDBweDt3aWR0aDogYXV0b1wiPjx0YWJsZSBoZWlnaHQ9XCIxMDAlXCI+PHRoZWFkPjx0ciBjbGFzcz1cInRleHQtY2VudGVyXCI+PHRoPjxidXR0b24gdGFiaW5kZXg9XCItMVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBwdWxsLWxlZnRcIiBuZy1jbGljaz1cIiRhcnJvd0FjdGlvbigtMSwgMClcIj48aSBjbGFzcz1cInt7ICRpY29uVXAgfX1cIj48L2k+PC9idXR0b24+PC90aD48dGg+Jm5ic3A7PC90aD48dGg+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IHB1bGwtbGVmdFwiIG5nLWNsaWNrPVwiJGFycm93QWN0aW9uKC0xLCAxKVwiPjxpIGNsYXNzPVwie3sgJGljb25VcCB9fVwiPjwvaT48L2J1dHRvbj48L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyIG5nLXJlcGVhdD1cIihpLCByb3cpIGluIHJvd3NcIj48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPjxidXR0b24gdGFiaW5kZXg9XCItMVwiIHN0eWxlPVwid2lkdGg6IDEwMCVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBuZy1jbGFzcz1cIntcXCdidG4tcHJpbWFyeVxcJzogcm93WzBdLnNlbGVjdGVkfVwiIG5nLWNsaWNrPVwiJHNlbGVjdChyb3dbMF0uZGF0ZSwgMClcIiBuZy1kaXNhYmxlZD1cInJvd1swXS5kaXNhYmxlZFwiPjxzcGFuIG5nLWNsYXNzPVwie1xcJ3RleHQtbXV0ZWRcXCc6IHJvd1swXS5tdXRlZH1cIiBuZy1iaW5kPVwicm93WzBdLmxhYmVsXCI+PC9zcGFuPjwvYnV0dG9uPjwvdGQ+PHRkPjxzcGFuIG5nLWJpbmQ9XCJpID09IG1pZEluZGV4ID8gdGltZVNlcGFyYXRvciA6IFxcJyBcXCdcIj48L3NwYW4+PC90ZD48dGQgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPjxidXR0b24gdGFiaW5kZXg9XCItMVwiIG5nLWlmPVwicm93WzFdLmRhdGVcIiBzdHlsZT1cIndpZHRoOiAxMDAlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgbmctY2xhc3M9XCJ7XFwnYnRuLXByaW1hcnlcXCc6IHJvd1sxXS5zZWxlY3RlZH1cIiBuZy1jbGljaz1cIiRzZWxlY3Qocm93WzFdLmRhdGUsIDEpXCIgbmctZGlzYWJsZWQ9XCJyb3dbMV0uZGlzYWJsZWRcIj48c3BhbiBuZy1jbGFzcz1cIntcXCd0ZXh0LW11dGVkXFwnOiByb3dbMV0ubXV0ZWR9XCIgbmctYmluZD1cInJvd1sxXS5sYWJlbFwiPjwvc3Bhbj48L2J1dHRvbj48L3RkPjx0ZCBuZy1pZj1cInNob3dBTVwiPiZuYnNwOzwvdGQ+PHRkIG5nLWlmPVwic2hvd0FNXCI+PGJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgbmctc2hvdz1cImkgPT0gbWlkSW5kZXggLSAhaXNBTSAqIDFcIiBzdHlsZT1cIndpZHRoOiAxMDAlXCIgdHlwZT1cImJ1dHRvblwiIG5nLWNsYXNzPVwie1xcJ2J0bi1wcmltYXJ5XFwnOiAhIWlzQU19XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBuZy1jbGljaz1cIiRzd2l0Y2hNZXJpZGlhbigpXCIgbmctZGlzYWJsZWQ9XCJlbC5kaXNhYmxlZFwiPkFNPC9idXR0b24+IDxidXR0b24gdGFiaW5kZXg9XCItMVwiIG5nLXNob3c9XCJpID09IG1pZEluZGV4ICsgMSAtICFpc0FNICogMVwiIHN0eWxlPVwid2lkdGg6IDEwMCVcIiB0eXBlPVwiYnV0dG9uXCIgbmctY2xhc3M9XCJ7XFwnYnRuLXByaW1hcnlcXCc6ICFpc0FNfVwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgbmctY2xpY2s9XCIkc3dpdGNoTWVyaWRpYW4oKVwiIG5nLWRpc2FibGVkPVwiZWwuZGlzYWJsZWRcIj5QTTwvYnV0dG9uPjwvdGQ+PC90cj48L3Rib2R5Pjx0Zm9vdD48dHIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPjx0aD48YnV0dG9uIHRhYmluZGV4PVwiLTFcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgcHVsbC1sZWZ0XCIgbmctY2xpY2s9XCIkYXJyb3dBY3Rpb24oMSwgMClcIj48aSBjbGFzcz1cInt7ICRpY29uRG93biB9fVwiPjwvaT48L2J1dHRvbj48L3RoPjx0aD4mbmJzcDs8L3RoPjx0aD48YnV0dG9uIHRhYmluZGV4PVwiLTFcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgcHVsbC1sZWZ0XCIgbmctY2xpY2s9XCIkYXJyb3dBY3Rpb24oMSwgMSlcIj48aSBjbGFzcz1cInt7ICRpY29uRG93biB9fVwiPjwvaT48L2J1dHRvbj48L3RoPjwvdHI+PC90Zm9vdD48L3RhYmxlPjwvZGl2PicpO1xyXG5cclxufV0pO1xyXG5cclxuLy8gU291cmNlOiB0eXBlYWhlYWQudHBsLmpzXHJcbmFuZ3VsYXIubW9kdWxlKCdtZ2NyZWEubmdTdHJhcC50eXBlYWhlYWQnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcblxyXG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgndHlwZWFoZWFkL3R5cGVhaGVhZC50cGwuaHRtbCcsICc8dWwgdGFiaW5kZXg9XCItMVwiIGNsYXNzPVwidHlwZWFoZWFkIGRyb3Bkb3duLW1lbnVcIiBuZy1zaG93PVwiJGlzVmlzaWJsZSgpXCIgcm9sZT1cInNlbGVjdFwiPjxsaSByb2xlPVwicHJlc2VudGF0aW9uXCIgbmctcmVwZWF0PVwibWF0Y2ggaW4gJG1hdGNoZXNcIiBuZy1jbGFzcz1cInthY3RpdmU6ICRpbmRleCA9PSAkYWN0aXZlSW5kZXh9XCI+PGEgcm9sZT1cIm1lbnVpdGVtXCIgdGFiaW5kZXg9XCItMVwiIG5nLWNsaWNrPVwiJHNlbGVjdCgkaW5kZXgsICRldmVudClcIiBuZy1iaW5kPVwibWF0Y2gubGFiZWxcIj48L2E+PC9saT48L3VsPicpO1xyXG5cclxufV0pO1xyXG5cclxuLy8gU291cmNlOiB0b29sdGlwLnRwbC5qc1xyXG5hbmd1bGFyLm1vZHVsZSgnbWdjcmVhLm5nU3RyYXAudG9vbHRpcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcclxuXHJcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0b29sdGlwL3Rvb2x0aXAudHBsLmh0bWwnLCAnPGRpdiBjbGFzcz1cInRvb2x0aXAgaW5cIiBuZy1zaG93PVwidGl0bGVcIj48ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCIgbmctYmluZD1cInRpdGxlXCI+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG59XSk7XHJcblxyXG5cclxufSkod2luZG93LCBkb2N1bWVudCk7XHJcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBMby1EYXNoIDIuNC4xIChDdXN0b20gQnVpbGQpIDxodHRwOi8vbG9kYXNoLmNvbS8+XHJcbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiAtbyAuL2Rpc3QvbG9kYXNoLmpzYFxyXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDEzIFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxyXG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuNS4yIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxyXG4gKiBDb3B5cmlnaHQgMjAwOS0yMDEzIEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXHJcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cDovL2xvZGFzaC5jb20vbGljZW5zZT5cclxuICovXHJcbjtcclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAvKiogVXNlZCBhcyBhIHNhZmUgcmVmZXJlbmNlIGZvciBgdW5kZWZpbmVkYCBpbiBwcmUgRVM1IGVudmlyb25tZW50cyAqL1xyXG4gICAgdmFyIHVuZGVmaW5lZDtcclxuXHJcbiAgICAvKiogVXNlZCB0byBwb29sIGFycmF5cyBhbmQgb2JqZWN0cyB1c2VkIGludGVybmFsbHkgKi9cclxuICAgIHZhciBhcnJheVBvb2wgPSBbXSxcclxuICAgICAgICBvYmplY3RQb29sID0gW107XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gZ2VuZXJhdGUgdW5pcXVlIElEcyAqL1xyXG4gICAgdmFyIGlkQ291bnRlciA9IDA7XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gcHJlZml4IGtleXMgdG8gYXZvaWQgaXNzdWVzIHdpdGggYF9fcHJvdG9fX2AgYW5kIHByb3BlcnRpZXMgb24gYE9iamVjdC5wcm90b3R5cGVgICovXHJcbiAgICB2YXIga2V5UHJlZml4ID0gK25ldyBEYXRlICsgJyc7XHJcblxyXG4gICAgLyoqIFVzZWQgYXMgdGhlIHNpemUgd2hlbiBvcHRpbWl6YXRpb25zIGFyZSBlbmFibGVkIGZvciBsYXJnZSBhcnJheXMgKi9cclxuICAgIHZhciBsYXJnZUFycmF5U2l6ZSA9IDc1O1xyXG5cclxuICAgIC8qKiBVc2VkIGFzIHRoZSBtYXggc2l6ZSBvZiB0aGUgYGFycmF5UG9vbGAgYW5kIGBvYmplY3RQb29sYCAqL1xyXG4gICAgdmFyIG1heFBvb2xTaXplID0gNDA7XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gZGV0ZWN0IGFuZCB0ZXN0IHdoaXRlc3BhY2UgKi9cclxuICAgIHZhciB3aGl0ZXNwYWNlID0gKFxyXG4gICAgICAgIC8vIHdoaXRlc3BhY2VcclxuICAgICAgICAnIFxcdFxceDBCXFxmXFx4QTBcXHVmZWZmJyArXHJcblxyXG4gICAgICAgIC8vIGxpbmUgdGVybWluYXRvcnNcclxuICAgICAgICAnXFxuXFxyXFx1MjAyOFxcdTIwMjknICtcclxuXHJcbiAgICAgICAgLy8gdW5pY29kZSBjYXRlZ29yeSBcIlpzXCIgc3BhY2Ugc2VwYXJhdG9yc1xyXG4gICAgICAgICdcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwJ1xyXG4gICAgKTtcclxuXHJcbiAgICAvKiogVXNlZCB0byBtYXRjaCBlbXB0eSBzdHJpbmcgbGl0ZXJhbHMgaW4gY29tcGlsZWQgdGVtcGxhdGUgc291cmNlICovXHJcbiAgICB2YXIgcmVFbXB0eVN0cmluZ0xlYWRpbmcgPSAvXFxiX19wIFxcKz0gJyc7L2csXHJcbiAgICAgICAgcmVFbXB0eVN0cmluZ01pZGRsZSA9IC9cXGIoX19wIFxcKz0pICcnIFxcKy9nLFxyXG4gICAgICAgIHJlRW1wdHlTdHJpbmdUcmFpbGluZyA9IC8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSkgXFwrXFxuJyc7L2c7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIG1hdGNoIEVTNiB0ZW1wbGF0ZSBkZWxpbWl0ZXJzXHJcbiAgICAgKiBodHRwOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1saXRlcmFscy1zdHJpbmctbGl0ZXJhbHNcclxuICAgICAqL1xyXG4gICAgdmFyIHJlRXNUZW1wbGF0ZSA9IC9cXCRcXHsoW15cXFxcfV0qKD86XFxcXC5bXlxcXFx9XSopKilcXH0vZztcclxuXHJcbiAgICAvKiogVXNlZCB0byBtYXRjaCByZWdleHAgZmxhZ3MgZnJvbSB0aGVpciBjb2VyY2VkIHN0cmluZyB2YWx1ZXMgKi9cclxuICAgIHZhciByZUZsYWdzID0gL1xcdyokLztcclxuXHJcbiAgICAvKiogVXNlZCB0byBkZXRlY3RlZCBuYW1lZCBmdW5jdGlvbnMgKi9cclxuICAgIHZhciByZUZ1bmNOYW1lID0gL15cXHMqZnVuY3Rpb25bIFxcblxcclxcdF0rXFx3LztcclxuXHJcbiAgICAvKiogVXNlZCB0byBtYXRjaCBcImludGVycG9sYXRlXCIgdGVtcGxhdGUgZGVsaW1pdGVycyAqL1xyXG4gICAgdmFyIHJlSW50ZXJwb2xhdGUgPSAvPCU9KFtcXHNcXFNdKz8pJT4vZztcclxuXHJcbiAgICAvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIHdoaXRlc3BhY2UgYW5kIHplcm9zIHRvIGJlIHJlbW92ZWQgKi9cclxuICAgIHZhciByZUxlYWRpbmdTcGFjZXNBbmRaZXJvcyA9IFJlZ0V4cCgnXlsnICsgd2hpdGVzcGFjZSArICddKjArKD89LiQpJyk7XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gZW5zdXJlIGNhcHR1cmluZyBvcmRlciBvZiB0ZW1wbGF0ZSBkZWxpbWl0ZXJzICovXHJcbiAgICB2YXIgcmVOb01hdGNoID0gLygkXikvO1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIGRldGVjdCBmdW5jdGlvbnMgY29udGFpbmluZyBhIGB0aGlzYCByZWZlcmVuY2UgKi9cclxuICAgIHZhciByZVRoaXMgPSAvXFxidGhpc1xcYi87XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gbWF0Y2ggdW5lc2NhcGVkIGNoYXJhY3RlcnMgaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzICovXHJcbiAgICB2YXIgcmVVbmVzY2FwZWRTdHJpbmcgPSAvWydcXG5cXHJcXHRcXHUyMDI4XFx1MjAyOVxcXFxdL2c7XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gYXNzaWduIGRlZmF1bHQgYGNvbnRleHRgIG9iamVjdCBwcm9wZXJ0aWVzICovXHJcbiAgICB2YXIgY29udGV4dFByb3BzID0gW1xyXG4gICAgICAgICdBcnJheScsICdCb29sZWFuJywgJ0RhdGUnLCAnRnVuY3Rpb24nLCAnTWF0aCcsICdOdW1iZXInLCAnT2JqZWN0JyxcclxuICAgICAgICAnUmVnRXhwJywgJ1N0cmluZycsICdfJywgJ2F0dGFjaEV2ZW50JywgJ2NsZWFyVGltZW91dCcsICdpc0Zpbml0ZScsICdpc05hTicsXHJcbiAgICAgICAgJ3BhcnNlSW50JywgJ3NldFRpbWVvdXQnXHJcbiAgICBdO1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIG1ha2UgdGVtcGxhdGUgc291cmNlVVJMcyBlYXNpZXIgdG8gaWRlbnRpZnkgKi9cclxuICAgIHZhciB0ZW1wbGF0ZUNvdW50ZXIgPSAwO1xyXG5cclxuICAgIC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgc2hvcnRjdXRzICovXHJcbiAgICB2YXIgYXJnc0NsYXNzID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXHJcbiAgICAgICAgYXJyYXlDbGFzcyA9ICdbb2JqZWN0IEFycmF5XScsXHJcbiAgICAgICAgYm9vbENsYXNzID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxyXG4gICAgICAgIGRhdGVDbGFzcyA9ICdbb2JqZWN0IERhdGVdJyxcclxuICAgICAgICBmdW5jQ2xhc3MgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxyXG4gICAgICAgIG51bWJlckNsYXNzID0gJ1tvYmplY3QgTnVtYmVyXScsXHJcbiAgICAgICAgb2JqZWN0Q2xhc3MgPSAnW29iamVjdCBPYmplY3RdJyxcclxuICAgICAgICByZWdleHBDbGFzcyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxyXG4gICAgICAgIHN0cmluZ0NsYXNzID0gJ1tvYmplY3QgU3RyaW5nXSc7XHJcblxyXG4gICAgLyoqIFVzZWQgdG8gaWRlbnRpZnkgb2JqZWN0IGNsYXNzaWZpY2F0aW9ucyB0aGF0IGBfLmNsb25lYCBzdXBwb3J0cyAqL1xyXG4gICAgdmFyIGNsb25lYWJsZUNsYXNzZXMgPSB7fTtcclxuICAgIGNsb25lYWJsZUNsYXNzZXNbZnVuY0NsYXNzXSA9IGZhbHNlO1xyXG4gICAgY2xvbmVhYmxlQ2xhc3Nlc1thcmdzQ2xhc3NdID0gY2xvbmVhYmxlQ2xhc3Nlc1thcnJheUNsYXNzXSA9XHJcbiAgICAgICAgY2xvbmVhYmxlQ2xhc3Nlc1tib29sQ2xhc3NdID0gY2xvbmVhYmxlQ2xhc3Nlc1tkYXRlQ2xhc3NdID1cclxuICAgICAgICBjbG9uZWFibGVDbGFzc2VzW251bWJlckNsYXNzXSA9IGNsb25lYWJsZUNsYXNzZXNbb2JqZWN0Q2xhc3NdID1cclxuICAgICAgICBjbG9uZWFibGVDbGFzc2VzW3JlZ2V4cENsYXNzXSA9IGNsb25lYWJsZUNsYXNzZXNbc3RyaW5nQ2xhc3NdID0gdHJ1ZTtcclxuXHJcbiAgICAvKiogVXNlZCBhcyBhbiBpbnRlcm5hbCBgXy5kZWJvdW5jZWAgb3B0aW9ucyBvYmplY3QgKi9cclxuICAgIHZhciBkZWJvdW5jZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgJ2xlYWRpbmcnOiBmYWxzZSxcclxuICAgICAgICAnbWF4V2FpdCc6IDAsXHJcbiAgICAgICAgJ3RyYWlsaW5nJzogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgLyoqIFVzZWQgYXMgdGhlIHByb3BlcnR5IGRlc2NyaXB0b3IgZm9yIGBfX2JpbmREYXRhX19gICovXHJcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcclxuICAgICAgICAnY29uZmlndXJhYmxlJzogZmFsc2UsXHJcbiAgICAgICAgJ2VudW1lcmFibGUnOiBmYWxzZSxcclxuICAgICAgICAndmFsdWUnOiBudWxsLFxyXG4gICAgICAgICd3cml0YWJsZSc6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBVc2VkIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgYXJlIG9mIHRoZSBsYW5ndWFnZSB0eXBlIE9iamVjdCAqL1xyXG4gICAgdmFyIG9iamVjdFR5cGVzID0ge1xyXG4gICAgICAgICdib29sZWFuJzogZmFsc2UsXHJcbiAgICAgICAgJ2Z1bmN0aW9uJzogdHJ1ZSxcclxuICAgICAgICAnb2JqZWN0JzogdHJ1ZSxcclxuICAgICAgICAnbnVtYmVyJzogZmFsc2UsXHJcbiAgICAgICAgJ3N0cmluZyc6IGZhbHNlLFxyXG4gICAgICAgICd1bmRlZmluZWQnOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICAvKiogVXNlZCB0byBlc2NhcGUgY2hhcmFjdGVycyBmb3IgaW5jbHVzaW9uIGluIGNvbXBpbGVkIHN0cmluZyBsaXRlcmFscyAqL1xyXG4gICAgdmFyIHN0cmluZ0VzY2FwZXMgPSB7XHJcbiAgICAgICAgJ1xcXFwnOiAnXFxcXCcsXHJcbiAgICAgICAgXCInXCI6IFwiJ1wiLFxyXG4gICAgICAgICdcXG4nOiAnbicsXHJcbiAgICAgICAgJ1xccic6ICdyJyxcclxuICAgICAgICAnXFx0JzogJ3QnLFxyXG4gICAgICAgICdcXHUyMDI4JzogJ3UyMDI4JyxcclxuICAgICAgICAnXFx1MjAyOSc6ICd1MjAyOSdcclxuICAgIH07XHJcblxyXG4gICAgLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QgKi9cclxuICAgIHZhciByb290ID0gKG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdykgfHwgdGhpcztcclxuXHJcbiAgICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgICovXHJcbiAgICB2YXIgZnJlZUV4cG9ydHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0c10gJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xyXG5cclxuICAgIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYCAqL1xyXG4gICAgdmFyIGZyZWVNb2R1bGUgPSBvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XHJcblxyXG4gICAgLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYCAqL1xyXG4gICAgdmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHMgJiYgZnJlZUV4cG9ydHM7XHJcblxyXG4gICAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcyBvciBCcm93c2VyaWZpZWQgY29kZSBhbmQgdXNlIGl0IGFzIGByb290YCAqL1xyXG4gICAgdmFyIGZyZWVHbG9iYWwgPSBvYmplY3RUeXBlc1t0eXBlb2YgZ2xvYmFsXSAmJiBnbG9iYWw7XHJcbiAgICBpZiAoZnJlZUdsb2JhbCAmJiAoZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwpKSB7XHJcbiAgICAgICAgcm9vdCA9IGZyZWVHbG9iYWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pbmRleE9mYCB3aXRob3V0IHN1cHBvcnQgZm9yIGJpbmFyeSBzZWFyY2hlc1xyXG4gICAgICogb3IgYGZyb21JbmRleGAgY29uc3RyYWludHMuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUgb3IgYC0xYC5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gKGZyb21JbmRleCB8fCAwKSAtIDEsXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jb250YWluc2AgZm9yIGNhY2hlIG9iamVjdHMgdGhhdCBtaW1pY3MgdGhlIHJldHVyblxyXG4gICAgICogc2lnbmF0dXJlIG9mIGBfLmluZGV4T2ZgIGJ5IHJldHVybmluZyBgMGAgaWYgdGhlIHZhbHVlIGlzIGZvdW5kLCBlbHNlIGAtMWAuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYWNoZSBUaGUgY2FjaGUgb2JqZWN0IHRvIGluc3BlY3QuXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgMGAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgLTFgLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gY2FjaGVJbmRleE9mKGNhY2hlLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xyXG4gICAgICAgIGNhY2hlID0gY2FjaGUuY2FjaGU7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09ICdib29sZWFuJyB8fCB2YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZVt2YWx1ZV0gPyAwIDogLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlICE9ICdudW1iZXInICYmIHR5cGUgIT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdHlwZSA9ICdvYmplY3QnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIga2V5ID0gdHlwZSA9PSAnbnVtYmVyJyA/IHZhbHVlIDoga2V5UHJlZml4ICsgdmFsdWU7XHJcbiAgICAgICAgY2FjaGUgPSAoY2FjaGUgPSBjYWNoZVt0eXBlXSkgJiYgY2FjaGVba2V5XTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT0gJ29iamVjdCcgPyAoY2FjaGUgJiYgYmFzZUluZGV4T2YoY2FjaGUsIHZhbHVlKSA+IC0xID8gMCA6IC0xKSA6IChjYWNoZSA/IDAgOiAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgZ2l2ZW4gdmFsdWUgdG8gdGhlIGNvcnJlc3BvbmRpbmcgY2FjaGUgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhZGQgdG8gdGhlIGNhY2hlLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gY2FjaGVQdXNoKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSxcclxuICAgICAgICAgICAgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ2Jvb2xlYW4nIHx8IHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgY2FjaGVbdmFsdWVdID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZSAhPSAnbnVtYmVyJyAmJiB0eXBlICE9ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJ29iamVjdCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGtleSA9IHR5cGUgPT0gJ251bWJlcicgPyB2YWx1ZSA6IGtleVByZWZpeCArIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgdHlwZUNhY2hlID0gY2FjaGVbdHlwZV0gfHwgKGNhY2hlW3R5cGVdID0ge30pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICh0eXBlQ2FjaGVba2V5XSB8fCAodHlwZUNhY2hlW2tleV0gPSBbXSkpLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHlwZUNhY2hlW2tleV0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCBieSBgXy5tYXhgIGFuZCBgXy5taW5gIGFzIHRoZSBkZWZhdWx0IGNhbGxiYWNrIHdoZW4gYSBnaXZlblxyXG4gICAgICogY29sbGVjdGlvbiBpcyBhIHN0cmluZyB2YWx1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSBjaGFyYWN0ZXIgdG8gaW5zcGVjdC5cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvZGUgdW5pdCBvZiBnaXZlbiBjaGFyYWN0ZXIuXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFyQXRDYWxsYmFjayh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS5jaGFyQ29kZUF0KDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCBieSBgc29ydEJ5YCB0byBjb21wYXJlIHRyYW5zZm9ybWVkIGBjb2xsZWN0aW9uYCBlbGVtZW50cywgc3RhYmxlIHNvcnRpbmdcclxuICAgICAqIHRoZW0gaW4gYXNjZW5kaW5nIG9yZGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGNvbXBhcmUgdG8gYGJgLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb21wYXJlIHRvIGBhYC5cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHNvcnQgb3JkZXIgaW5kaWNhdG9yIG9mIGAxYCBvciBgLTFgLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGFyZUFzY2VuZGluZyhhLCBiKSB7XHJcbiAgICAgICAgdmFyIGFjID0gYS5jcml0ZXJpYSxcclxuICAgICAgICAgICAgYmMgPSBiLmNyaXRlcmlhLFxyXG4gICAgICAgICAgICBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICBsZW5ndGggPSBhYy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFjW2luZGV4XSxcclxuICAgICAgICAgICAgICAgIG90aGVyID0gYmNbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBvdGhlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gb3RoZXIgfHwgdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPCBvdGhlciB8fCB0eXBlb2Ygb3RoZXIgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRml4ZXMgYW4gYEFycmF5I3NvcnRgIGJ1ZyBpbiB0aGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIGFwcGxpY2F0aW9uc1xyXG4gICAgICAgIC8vIHRoYXQgY2F1c2VzIGl0LCB1bmRlciBjZXJ0YWluIGNpcmN1bXN0YW5jZXMsIHRvIHJldHVybiB0aGUgc2FtZSB2YWx1ZSBmb3JcclxuICAgICAgICAvLyBgYWAgYW5kIGBiYC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9wdWxsLzEyNDdcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFRoaXMgYWxzbyBlbnN1cmVzIGEgc3RhYmxlIHNvcnQgaW4gVjggYW5kIG90aGVyIGVuZ2luZXMuXHJcbiAgICAgICAgLy8gU2VlIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTkwXHJcbiAgICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNhY2hlIG9iamVjdCB0byBvcHRpbWl6ZSBsaW5lYXIgc2VhcmNoZXMgb2YgbGFyZ2UgYXJyYXlzLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXk9W11dIFRoZSBhcnJheSB0byBzZWFyY2guXHJcbiAgICAgKiBAcmV0dXJucyB7bnVsbHxPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIG9iamVjdCBvciBgbnVsbGAgaWYgY2FjaGluZyBzaG91bGQgbm90IGJlIHVzZWQuXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVDYWNoZShhcnJheSkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGZpcnN0ID0gYXJyYXlbMF0sXHJcbiAgICAgICAgICAgIG1pZCA9IGFycmF5WyhsZW5ndGggLyAyKSB8IDBdLFxyXG4gICAgICAgICAgICBsYXN0ID0gYXJyYXlbbGVuZ3RoIC0gMV07XHJcblxyXG4gICAgICAgIGlmIChmaXJzdCAmJiB0eXBlb2YgZmlyc3QgPT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgbWlkICYmIHR5cGVvZiBtaWQgPT0gJ29iamVjdCcgJiYgbGFzdCAmJiB0eXBlb2YgbGFzdCA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjYWNoZSA9IGdldE9iamVjdCgpO1xyXG4gICAgICAgIGNhY2hlWydmYWxzZSddID0gY2FjaGVbJ251bGwnXSA9IGNhY2hlWyd0cnVlJ10gPSBjYWNoZVsndW5kZWZpbmVkJ10gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGdldE9iamVjdCgpO1xyXG4gICAgICAgIHJlc3VsdC5hcnJheSA9IGFycmF5O1xyXG4gICAgICAgIHJlc3VsdC5jYWNoZSA9IGNhY2hlO1xyXG4gICAgICAgIHJlc3VsdC5wdXNoID0gY2FjaGVQdXNoO1xyXG5cclxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChhcnJheVtpbmRleF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCBieSBgdGVtcGxhdGVgIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWRcclxuICAgICAqIHN0cmluZyBsaXRlcmFscy5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGVzY2FwZVN0cmluZ0NoYXIobWF0Y2gpIHtcclxuICAgICAgICByZXR1cm4gJ1xcXFwnICsgc3RyaW5nRXNjYXBlc1ttYXRjaF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGFuIGFycmF5IGZyb20gdGhlIGFycmF5IHBvb2wgb3IgY3JlYXRlcyBhIG5ldyBvbmUgaWYgdGhlIHBvb2wgaXMgZW1wdHkuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gVGhlIGFycmF5IGZyb20gdGhlIHBvb2wuXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRBcnJheSgpIHtcclxuICAgICAgICByZXR1cm4gYXJyYXlQb29sLnBvcCgpIHx8IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBhbiBvYmplY3QgZnJvbSB0aGUgb2JqZWN0IHBvb2wgb3IgY3JlYXRlcyBhIG5ldyBvbmUgaWYgdGhlIHBvb2wgaXMgZW1wdHkuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBvYmplY3QgZnJvbSB0aGUgcG9vbC5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldE9iamVjdCgpIHtcclxuICAgICAgICByZXR1cm4gb2JqZWN0UG9vbC5wb3AoKSB8fCB7XHJcbiAgICAgICAgICAgICdhcnJheSc6IG51bGwsXHJcbiAgICAgICAgICAgICdjYWNoZSc6IG51bGwsXHJcbiAgICAgICAgICAgICdjcml0ZXJpYSc6IG51bGwsXHJcbiAgICAgICAgICAgICdmYWxzZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnaW5kZXgnOiAwLFxyXG4gICAgICAgICAgICAnbnVsbCc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnbnVtYmVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ29iamVjdCc6IG51bGwsXHJcbiAgICAgICAgICAgICdwdXNoJzogbnVsbCxcclxuICAgICAgICAgICAgJ3N0cmluZyc6IG51bGwsXHJcbiAgICAgICAgICAgICd0cnVlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICd1bmRlZmluZWQnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWxlYXNlcyB0aGUgZ2l2ZW4gYXJyYXkgYmFjayB0byB0aGUgYXJyYXkgcG9vbC5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gcmVsZWFzZS5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlbGVhc2VBcnJheShhcnJheSkge1xyXG4gICAgICAgIGFycmF5Lmxlbmd0aCA9IDA7XHJcbiAgICAgICAgaWYgKGFycmF5UG9vbC5sZW5ndGggPCBtYXhQb29sU2l6ZSkge1xyXG4gICAgICAgICAgICBhcnJheVBvb2wucHVzaChhcnJheSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVsZWFzZXMgdGhlIGdpdmVuIG9iamVjdCBiYWNrIHRvIHRoZSBvYmplY3QgcG9vbC5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcmVsZWFzZS5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlbGVhc2VPYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIGNhY2hlID0gb2JqZWN0LmNhY2hlO1xyXG4gICAgICAgIGlmIChjYWNoZSkge1xyXG4gICAgICAgICAgICByZWxlYXNlT2JqZWN0KGNhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqZWN0LmFycmF5ID0gb2JqZWN0LmNhY2hlID0gb2JqZWN0LmNyaXRlcmlhID0gb2JqZWN0Lm9iamVjdCA9IG9iamVjdC5udW1iZXIgPSBvYmplY3Quc3RyaW5nID0gb2JqZWN0LnZhbHVlID0gbnVsbDtcclxuICAgICAgICBpZiAob2JqZWN0UG9vbC5sZW5ndGggPCBtYXhQb29sU2l6ZSkge1xyXG4gICAgICAgICAgICBvYmplY3RQb29sLnB1c2gob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTbGljZXMgdGhlIGBjb2xsZWN0aW9uYCBmcm9tIHRoZSBgc3RhcnRgIGluZGV4IHVwIHRvLCBidXQgbm90IGluY2x1ZGluZyxcclxuICAgICAqIHRoZSBgZW5kYCBpbmRleC5cclxuICAgICAqXHJcbiAgICAgKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgaW5zdGVhZCBvZiBgQXJyYXkjc2xpY2VgIHRvIHN1cHBvcnQgbm9kZSBsaXN0c1xyXG4gICAgICogaW4gSUUgPCA5IGFuZCB0byBlbnN1cmUgZGVuc2UgYXJyYXlzIGFyZSByZXR1cm5lZC5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNsaWNlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBzdGFydCBpbmRleC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBpbmRleC5cclxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5LlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gc2xpY2UoYXJyYXksIHN0YXJ0LCBlbmQpIHtcclxuICAgICAgICBzdGFydCB8fCAoc3RhcnQgPSAwKTtcclxuICAgICAgICBpZiAodHlwZW9mIGVuZCA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBlbmQgPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICBsZW5ndGggPSBlbmQgLSBzdGFydCB8fCAwLFxyXG4gICAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGggPCAwID8gMCA6IGxlbmd0aCk7XHJcblxyXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheVtzdGFydCArIGluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIG5ldyBgbG9kYXNoYCBmdW5jdGlvbiB1c2luZyB0aGUgZ2l2ZW4gY29udGV4dCBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG1lbWJlck9mIF9cclxuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dD1yb290XSBUaGUgY29udGV4dCBvYmplY3QuXHJcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gcnVuSW5Db250ZXh0KGNvbnRleHQpIHtcclxuICAgICAgICAvLyBBdm9pZCBpc3N1ZXMgd2l0aCBzb21lIEVTMyBlbnZpcm9ubWVudHMgdGhhdCBhdHRlbXB0IHRvIHVzZSB2YWx1ZXMsIG5hbWVkXHJcbiAgICAgICAgLy8gYWZ0ZXIgYnVpbHQtaW4gY29uc3RydWN0b3JzIGxpa2UgYE9iamVjdGAsIGZvciB0aGUgY3JlYXRpb24gb2YgbGl0ZXJhbHMuXHJcbiAgICAgICAgLy8gRVM1IGNsZWFycyB0aGlzIHVwIGJ5IHN0YXRpbmcgdGhhdCBsaXRlcmFscyBtdXN0IHVzZSBidWlsdC1pbiBjb25zdHJ1Y3RvcnMuXHJcbiAgICAgICAgLy8gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTEuMS41LlxyXG4gICAgICAgIGNvbnRleHQgPSBjb250ZXh0ID8gXy5kZWZhdWx0cyhyb290Lk9iamVjdCgpLCBjb250ZXh0LCBfLnBpY2socm9vdCwgY29udGV4dFByb3BzKSkgOiByb290O1xyXG5cclxuICAgICAgICAvKiogTmF0aXZlIGNvbnN0cnVjdG9yIHJlZmVyZW5jZXMgKi9cclxuICAgICAgICB2YXIgQXJyYXkgPSBjb250ZXh0LkFycmF5LFxyXG4gICAgICAgICAgICBCb29sZWFuID0gY29udGV4dC5Cb29sZWFuLFxyXG4gICAgICAgICAgICBEYXRlID0gY29udGV4dC5EYXRlLFxyXG4gICAgICAgICAgICBGdW5jdGlvbiA9IGNvbnRleHQuRnVuY3Rpb24sXHJcbiAgICAgICAgICAgIE1hdGggPSBjb250ZXh0Lk1hdGgsXHJcbiAgICAgICAgICAgIE51bWJlciA9IGNvbnRleHQuTnVtYmVyLFxyXG4gICAgICAgICAgICBPYmplY3QgPSBjb250ZXh0Lk9iamVjdCxcclxuICAgICAgICAgICAgUmVnRXhwID0gY29udGV4dC5SZWdFeHAsXHJcbiAgICAgICAgICAgIFN0cmluZyA9IGNvbnRleHQuU3RyaW5nLFxyXG4gICAgICAgICAgICBUeXBlRXJyb3IgPSBjb250ZXh0LlR5cGVFcnJvcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXNlZCBmb3IgYEFycmF5YCBtZXRob2QgcmVmZXJlbmNlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vcm1hbGx5IGBBcnJheS5wcm90b3R5cGVgIHdvdWxkIHN1ZmZpY2UsIGhvd2V2ZXIsIHVzaW5nIGFuIGFycmF5IGxpdGVyYWxcclxuICAgICAgICAgKiBhdm9pZHMgaXNzdWVzIGluIE5hcndoYWwuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGFycmF5UmVmID0gW107XHJcblxyXG4gICAgICAgIC8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgKi9cclxuICAgICAgICB2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xyXG5cclxuICAgICAgICAvKiogVXNlZCB0byByZXN0b3JlIHRoZSBvcmlnaW5hbCBgX2AgcmVmZXJlbmNlIGluIGBub0NvbmZsaWN0YCAqL1xyXG4gICAgICAgIHZhciBvbGREYXNoID0gY29udGV4dC5fO1xyXG5cclxuICAgICAgICAvKiogVXNlZCB0byByZXNvbHZlIHRoZSBpbnRlcm5hbCBbW0NsYXNzXV0gb2YgdmFsdWVzICovXHJcbiAgICAgICAgdmFyIHRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUgKi9cclxuICAgICAgICB2YXIgcmVOYXRpdmUgPSBSZWdFeHAoJ14nICtcclxuICAgICAgICAgICAgU3RyaW5nKHRvU3RyaW5nKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvdG9TdHJpbmd8IGZvciBbXlxcXV0rL2csICcuKj8nKSArICckJ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8qKiBOYXRpdmUgbWV0aG9kIHNob3J0Y3V0cyAqL1xyXG4gICAgICAgIHZhciBjZWlsID0gTWF0aC5jZWlsLFxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQgPSBjb250ZXh0LmNsZWFyVGltZW91dCxcclxuICAgICAgICAgICAgZmxvb3IgPSBNYXRoLmZsb29yLFxyXG4gICAgICAgICAgICBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLFxyXG4gICAgICAgICAgICBnZXRQcm90b3R5cGVPZiA9IGlzTmF0aXZlKGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKSAmJiBnZXRQcm90b3R5cGVPZixcclxuICAgICAgICAgICAgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eSxcclxuICAgICAgICAgICAgcHVzaCA9IGFycmF5UmVmLnB1c2gsXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQgPSBjb250ZXh0LnNldFRpbWVvdXQsXHJcbiAgICAgICAgICAgIHNwbGljZSA9IGFycmF5UmVmLnNwbGljZSxcclxuICAgICAgICAgICAgdW5zaGlmdCA9IGFycmF5UmVmLnVuc2hpZnQ7XHJcblxyXG4gICAgICAgIC8qKiBVc2VkIHRvIHNldCBtZXRhIGRhdGEgb24gZnVuY3Rpb25zICovXHJcbiAgICAgICAgdmFyIGRlZmluZVByb3BlcnR5ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gSUUgOCBvbmx5IGFjY2VwdHMgRE9NIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbyA9IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmMgPSBpc05hdGl2ZShmdW5jID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KSAmJiBmdW5jLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMobywgbywgbykgJiYgZnVuYztcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSgpKTtcclxuXHJcbiAgICAgICAgLyogTmF0aXZlIG1ldGhvZCBzaG9ydGN1dHMgZm9yIG1ldGhvZHMgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMgKi9cclxuICAgICAgICB2YXIgbmF0aXZlQ3JlYXRlID0gaXNOYXRpdmUobmF0aXZlQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSkgJiYgbmF0aXZlQ3JlYXRlLFxyXG4gICAgICAgICAgICBuYXRpdmVJc0FycmF5ID0gaXNOYXRpdmUobmF0aXZlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkpICYmIG5hdGl2ZUlzQXJyYXksXHJcbiAgICAgICAgICAgIG5hdGl2ZUlzRmluaXRlID0gY29udGV4dC5pc0Zpbml0ZSxcclxuICAgICAgICAgICAgbmF0aXZlSXNOYU4gPSBjb250ZXh0LmlzTmFOLFxyXG4gICAgICAgICAgICBuYXRpdmVLZXlzID0gaXNOYXRpdmUobmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzKSAmJiBuYXRpdmVLZXlzLFxyXG4gICAgICAgICAgICBuYXRpdmVNYXggPSBNYXRoLm1heCxcclxuICAgICAgICAgICAgbmF0aXZlTWluID0gTWF0aC5taW4sXHJcbiAgICAgICAgICAgIG5hdGl2ZVBhcnNlSW50ID0gY29udGV4dC5wYXJzZUludCxcclxuICAgICAgICAgICAgbmF0aXZlUmFuZG9tID0gTWF0aC5yYW5kb207XHJcblxyXG4gICAgICAgIC8qKiBVc2VkIHRvIGxvb2t1cCBhIGJ1aWx0LWluIGNvbnN0cnVjdG9yIGJ5IFtbQ2xhc3NdXSAqL1xyXG4gICAgICAgIHZhciBjdG9yQnlDbGFzcyA9IHt9O1xyXG4gICAgICAgIGN0b3JCeUNsYXNzW2FycmF5Q2xhc3NdID0gQXJyYXk7XHJcbiAgICAgICAgY3RvckJ5Q2xhc3NbYm9vbENsYXNzXSA9IEJvb2xlYW47XHJcbiAgICAgICAgY3RvckJ5Q2xhc3NbZGF0ZUNsYXNzXSA9IERhdGU7XHJcbiAgICAgICAgY3RvckJ5Q2xhc3NbZnVuY0NsYXNzXSA9IEZ1bmN0aW9uO1xyXG4gICAgICAgIGN0b3JCeUNsYXNzW29iamVjdENsYXNzXSA9IE9iamVjdDtcclxuICAgICAgICBjdG9yQnlDbGFzc1tudW1iZXJDbGFzc10gPSBOdW1iZXI7XHJcbiAgICAgICAgY3RvckJ5Q2xhc3NbcmVnZXhwQ2xhc3NdID0gUmVnRXhwO1xyXG4gICAgICAgIGN0b3JCeUNsYXNzW3N0cmluZ0NsYXNzXSA9IFN0cmluZztcclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBgbG9kYXNoYCBvYmplY3Qgd2hpY2ggd3JhcHMgdGhlIGdpdmVuIHZhbHVlIHRvIGVuYWJsZSBpbnR1aXRpdmVcclxuICAgICAgICAgKiBtZXRob2QgY2hhaW5pbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJbiBhZGRpdGlvbiB0byBMby1EYXNoIG1ldGhvZHMsIHdyYXBwZXJzIGFsc28gaGF2ZSB0aGUgZm9sbG93aW5nIGBBcnJheWAgbWV0aG9kczpcclxuICAgICAgICAgKiBgY29uY2F0YCwgYGpvaW5gLCBgcG9wYCwgYHB1c2hgLCBgcmV2ZXJzZWAsIGBzaGlmdGAsIGBzbGljZWAsIGBzb3J0YCwgYHNwbGljZWAsXHJcbiAgICAgICAgICogYW5kIGB1bnNoaWZ0YFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQ2hhaW5pbmcgaXMgc3VwcG9ydGVkIGluIGN1c3RvbSBidWlsZHMgYXMgbG9uZyBhcyB0aGUgYHZhbHVlYCBtZXRob2QgaXNcclxuICAgICAgICAgKiBpbXBsaWNpdGx5IG9yIGV4cGxpY2l0bHkgaW5jbHVkZWQgaW4gdGhlIGJ1aWxkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhlIGNoYWluYWJsZSB3cmFwcGVyIGZ1bmN0aW9ucyBhcmU6XHJcbiAgICAgICAgICogYGFmdGVyYCwgYGFzc2lnbmAsIGBiaW5kYCwgYGJpbmRBbGxgLCBgYmluZEtleWAsIGBjaGFpbmAsIGBjb21wYWN0YCxcclxuICAgICAgICAgKiBgY29tcG9zZWAsIGBjb25jYXRgLCBgY291bnRCeWAsIGBjcmVhdGVgLCBgY3JlYXRlQ2FsbGJhY2tgLCBgY3VycnlgLFxyXG4gICAgICAgICAqIGBkZWJvdW5jZWAsIGBkZWZhdWx0c2AsIGBkZWZlcmAsIGBkZWxheWAsIGBkaWZmZXJlbmNlYCwgYGZpbHRlcmAsIGBmbGF0dGVuYCxcclxuICAgICAgICAgKiBgZm9yRWFjaGAsIGBmb3JFYWNoUmlnaHRgLCBgZm9ySW5gLCBgZm9ySW5SaWdodGAsIGBmb3JPd25gLCBgZm9yT3duUmlnaHRgLFxyXG4gICAgICAgICAqIGBmdW5jdGlvbnNgLCBgZ3JvdXBCeWAsIGBpbmRleEJ5YCwgYGluaXRpYWxgLCBgaW50ZXJzZWN0aW9uYCwgYGludmVydGAsXHJcbiAgICAgICAgICogYGludm9rZWAsIGBrZXlzYCwgYG1hcGAsIGBtYXhgLCBgbWVtb2l6ZWAsIGBtZXJnZWAsIGBtaW5gLCBgb2JqZWN0YCwgYG9taXRgLFxyXG4gICAgICAgICAqIGBvbmNlYCwgYHBhaXJzYCwgYHBhcnRpYWxgLCBgcGFydGlhbFJpZ2h0YCwgYHBpY2tgLCBgcGx1Y2tgLCBgcHVsbGAsIGBwdXNoYCxcclxuICAgICAgICAgKiBgcmFuZ2VgLCBgcmVqZWN0YCwgYHJlbW92ZWAsIGByZXN0YCwgYHJldmVyc2VgLCBgc2h1ZmZsZWAsIGBzbGljZWAsIGBzb3J0YCxcclxuICAgICAgICAgKiBgc29ydEJ5YCwgYHNwbGljZWAsIGB0YXBgLCBgdGhyb3R0bGVgLCBgdGltZXNgLCBgdG9BcnJheWAsIGB0cmFuc2Zvcm1gLFxyXG4gICAgICAgICAqIGB1bmlvbmAsIGB1bmlxYCwgYHVuc2hpZnRgLCBgdW56aXBgLCBgdmFsdWVzYCwgYHdoZXJlYCwgYHdpdGhvdXRgLCBgd3JhcGAsXHJcbiAgICAgICAgICogYW5kIGB6aXBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgbm9uLWNoYWluYWJsZSB3cmFwcGVyIGZ1bmN0aW9ucyBhcmU6XHJcbiAgICAgICAgICogYGNsb25lYCwgYGNsb25lRGVlcGAsIGBjb250YWluc2AsIGBlc2NhcGVgLCBgZXZlcnlgLCBgZmluZGAsIGBmaW5kSW5kZXhgLFxyXG4gICAgICAgICAqIGBmaW5kS2V5YCwgYGZpbmRMYXN0YCwgYGZpbmRMYXN0SW5kZXhgLCBgZmluZExhc3RLZXlgLCBgaGFzYCwgYGlkZW50aXR5YCxcclxuICAgICAgICAgKiBgaW5kZXhPZmAsIGBpc0FyZ3VtZW50c2AsIGBpc0FycmF5YCwgYGlzQm9vbGVhbmAsIGBpc0RhdGVgLCBgaXNFbGVtZW50YCxcclxuICAgICAgICAgKiBgaXNFbXB0eWAsIGBpc0VxdWFsYCwgYGlzRmluaXRlYCwgYGlzRnVuY3Rpb25gLCBgaXNOYU5gLCBgaXNOdWxsYCwgYGlzTnVtYmVyYCxcclxuICAgICAgICAgKiBgaXNPYmplY3RgLCBgaXNQbGFpbk9iamVjdGAsIGBpc1JlZ0V4cGAsIGBpc1N0cmluZ2AsIGBpc1VuZGVmaW5lZGAsIGBqb2luYCxcclxuICAgICAgICAgKiBgbGFzdEluZGV4T2ZgLCBgbWl4aW5gLCBgbm9Db25mbGljdGAsIGBwYXJzZUludGAsIGBwb3BgLCBgcmFuZG9tYCwgYHJlZHVjZWAsXHJcbiAgICAgICAgICogYHJlZHVjZVJpZ2h0YCwgYHJlc3VsdGAsIGBzaGlmdGAsIGBzaXplYCwgYHNvbWVgLCBgc29ydGVkSW5kZXhgLCBgcnVuSW5Db250ZXh0YCxcclxuICAgICAgICAgKiBgdGVtcGxhdGVgLCBgdW5lc2NhcGVgLCBgdW5pcXVlSWRgLCBhbmQgYHZhbHVlYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhlIHdyYXBwZXIgZnVuY3Rpb25zIGBmaXJzdGAgYW5kIGBsYXN0YCByZXR1cm4gd3JhcHBlZCB2YWx1ZXMgd2hlbiBgbmAgaXNcclxuICAgICAgICAgKiBwcm92aWRlZCwgb3RoZXJ3aXNlIHRoZXkgcmV0dXJuIHVud3JhcHBlZCB2YWx1ZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBFeHBsaWNpdCBjaGFpbmluZyBjYW4gYmUgZW5hYmxlZCBieSB1c2luZyB0aGUgYF8uY2hhaW5gIG1ldGhvZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBuYW1lIF9cclxuICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwIGluIGEgYGxvZGFzaGAgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhIGBsb2Rhc2hgIGluc3RhbmNlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgd3JhcHBlZCA9IF8oWzEsIDIsIDNdKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHJldHVybnMgYW4gdW53cmFwcGVkIHZhbHVlXHJcbiAgICAgICAgICogd3JhcHBlZC5yZWR1Y2UoZnVuY3Rpb24oc3VtLCBudW0pIHtcclxuICAgICAgICAgKiAgIHJldHVybiBzdW0gKyBudW07XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gNlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gcmV0dXJucyBhIHdyYXBwZWQgdmFsdWVcclxuICAgICAgICAgKiB2YXIgc3F1YXJlcyA9IHdyYXBwZWQubWFwKGZ1bmN0aW9uKG51bSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIG51bSAqIG51bTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNBcnJheShzcXVhcmVzKTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0FycmF5KHNxdWFyZXMudmFsdWUoKSk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2Rhc2godmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gZG9uJ3Qgd3JhcCBpZiBhbHJlYWR5IHdyYXBwZWQsIGV2ZW4gaWYgd3JhcHBlZCBieSBhIGRpZmZlcmVudCBgbG9kYXNoYCBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICByZXR1cm4gKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiAhaXNBcnJheSh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ19fd3JhcHBlZF9fJykpID8gdmFsdWUgOiBuZXcgbG9kYXNoV3JhcHBlcih2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGZhc3QgcGF0aCBmb3IgY3JlYXRpbmcgYGxvZGFzaGAgd3JhcHBlciBvYmplY3RzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwIGluIGEgYGxvZGFzaGAgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBjaGFpbkFsbCBBIGZsYWcgdG8gZW5hYmxlIGNoYWluaW5nIGZvciBhbGwgbWV0aG9kc1xyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYSBgbG9kYXNoYCBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9kYXNoV3JhcHBlcih2YWx1ZSwgY2hhaW5BbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fX2NoYWluX18gPSAhIWNoYWluQWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9fd3JhcHBlZF9fID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGVuc3VyZSBgbmV3IGxvZGFzaFdyYXBwZXJgIGlzIGFuIGluc3RhbmNlIG9mIGBsb2Rhc2hgXHJcbiAgICAgICAgbG9kYXNoV3JhcHBlci5wcm90b3R5cGUgPSBsb2Rhc2gucHJvdG90eXBlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBvYmplY3QgdXNlZCB0byBmbGFnIGVudmlyb25tZW50cyBmZWF0dXJlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzdXBwb3J0ID0gbG9kYXNoLnN1cHBvcnQgPSB7fTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZWN0IGlmIGZ1bmN0aW9ucyBjYW4gYmUgZGVjb21waWxlZCBieSBgRnVuY3Rpb24jdG9TdHJpbmdgXHJcbiAgICAgICAgICogKGFsbCBidXQgUFMzIGFuZCBvbGRlciBPcGVyYSBtb2JpbGUgYnJvd3NlcnMgJiBhdm9pZGVkIGluIFdpbmRvd3MgOCBhcHBzKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfLnN1cHBvcnRcclxuICAgICAgICAgKiBAdHlwZSBib29sZWFuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3VwcG9ydC5mdW5jRGVjb21wID0gIWlzTmF0aXZlKGNvbnRleHQuV2luUlRFcnJvcikgJiYgcmVUaGlzLnRlc3QocnVuSW5Db250ZXh0KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZWN0IGlmIGBGdW5jdGlvbiNuYW1lYCBpcyBzdXBwb3J0ZWQgKGFsbCBidXQgSUUpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQG1lbWJlck9mIF8uc3VwcG9ydFxyXG4gICAgICAgICAqIEB0eXBlIGJvb2xlYW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdXBwb3J0LmZ1bmNOYW1lcyA9IHR5cGVvZiBGdW5jdGlvbi5uYW1lID09ICdzdHJpbmcnO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCeSBkZWZhdWx0LCB0aGUgdGVtcGxhdGUgZGVsaW1pdGVycyB1c2VkIGJ5IExvLURhc2ggYXJlIHNpbWlsYXIgdG8gdGhvc2UgaW5cclxuICAgICAgICAgKiBlbWJlZGRlZCBSdWJ5IChFUkIpLiBDaGFuZ2UgdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmVcclxuICAgICAgICAgKiBkZWxpbWl0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbG9kYXNoLnRlbXBsYXRlU2V0dGluZ3MgPSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVXNlZCB0byBkZXRlY3QgYGRhdGFgIHByb3BlcnR5IHZhbHVlcyB0byBiZSBIVE1MLWVzY2FwZWQuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcclxuICAgICAgICAgICAgICogQHR5cGUgUmVnRXhwXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAnZXNjYXBlJzogLzwlLShbXFxzXFxTXSs/KSU+L2csXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVXNlZCB0byBkZXRlY3QgY29kZSB0byBiZSBldmFsdWF0ZWQuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcclxuICAgICAgICAgICAgICogQHR5cGUgUmVnRXhwXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAnZXZhbHVhdGUnOiAvPCUoW1xcc1xcU10rPyklPi9nLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gaW5qZWN0LlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXHJcbiAgICAgICAgICAgICAqIEB0eXBlIFJlZ0V4cFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgJ2ludGVycG9sYXRlJzogcmVJbnRlcnBvbGF0ZSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBVc2VkIHRvIHJlZmVyZW5jZSB0aGUgZGF0YSBvYmplY3QgaW4gdGhlIHRlbXBsYXRlIHRleHQuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcclxuICAgICAgICAgICAgICogQHR5cGUgc3RyaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAndmFyaWFibGUnOiAnJyxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBVc2VkIHRvIGltcG9ydCB2YXJpYWJsZXMgaW50byB0aGUgY29tcGlsZWQgdGVtcGxhdGUuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcclxuICAgICAgICAgICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAnaW1wb3J0cyc6IHtcclxuXHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cclxuICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzLmltcG9ydHNcclxuICAgICAgICAgICAgICAgICAqIEB0eXBlIEZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICdfJzogbG9kYXNoXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uYmluZGAgdGhhdCBjcmVhdGVzIHRoZSBib3VuZCBmdW5jdGlvbiBhbmRcclxuICAgICAgICAgKiBzZXRzIGl0cyBtZXRhIGRhdGEuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGJpbmREYXRhIFRoZSBiaW5kIGRhdGEgYXJyYXkuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJhc2VCaW5kKGJpbmREYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBmdW5jID0gYmluZERhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICBwYXJ0aWFsQXJncyA9IGJpbmREYXRhWzJdLFxyXG4gICAgICAgICAgICAgICAgdGhpc0FyZyA9IGJpbmREYXRhWzRdO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYm91bmQoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBgRnVuY3Rpb24jYmluZGAgc3BlY1xyXG4gICAgICAgICAgICAgICAgLy8gaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4zLjQuNVxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxBcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgYGFyZ3VtZW50c2Agb2JqZWN0IGRlb3B0aW1pemF0aW9ucyBieSB1c2luZyBgc2xpY2VgIGluc3RlYWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBvZiBgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGxgIGFuZCBub3QgYXNzaWduaW5nIGBhcmd1bWVudHNgIHRvIGFcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXJpYWJsZSBhcyBhIHRlcm5hcnkgZXhwcmVzc2lvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gc2xpY2UocGFydGlhbEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIG1pbWljIHRoZSBjb25zdHJ1Y3RvcidzIGByZXR1cm5gIGJlaGF2aW9yXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDEzLjIuMlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZSBgbmV3IGJvdW5kYCBpcyBhbiBpbnN0YW5jZSBvZiBgZnVuY2BcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc0JpbmRpbmcgPSBiYXNlQ3JlYXRlKGZ1bmMucHJvdG90eXBlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQmluZGluZywgYXJncyB8fCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogdGhpc0JpbmRpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzIHx8IGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0QmluZERhdGEoYm91bmQsIGJpbmREYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJvdW5kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY2xvbmVgIHdpdGhvdXQgYXJndW1lbnQganVnZ2xpbmcgb3Igc3VwcG9ydFxyXG4gICAgICAgICAqIGZvciBgdGhpc0FyZ2AgYmluZGluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2xvbmUuXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwPWZhbHNlXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIGNsb25lcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZUNsb25lKHZhbHVlLCBpc0RlZXAsIGNhbGxiYWNrLCBzdGFja0EsIHN0YWNrQikge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaW5zcGVjdCBbW0NsYXNzXV1cclxuICAgICAgICAgICAgdmFyIGlzT2JqID0gaXNPYmplY3QodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoaXNPYmopIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmICghY2xvbmVhYmxlQ2xhc3Nlc1tjbGFzc05hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGN0b3IgPSBjdG9yQnlDbGFzc1tjbGFzc05hbWVdO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGJvb2xDbGFzczpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGRhdGVDbGFzczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBjdG9yKCt2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgbnVtYmVyQ2xhc3M6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBzdHJpbmdDbGFzczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBjdG9yKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSByZWdleHBDbGFzczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY3Rvcih2YWx1ZS5zb3VyY2UsIHJlRmxhZ3MuZXhlYyh2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubGFzdEluZGV4ID0gdmFsdWUubGFzdEluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoaXNEZWVwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBmb3IgY2lyY3VsYXIgcmVmZXJlbmNlcyBhbmQgcmV0dXJuIGNvcnJlc3BvbmRpbmcgY2xvbmVcclxuICAgICAgICAgICAgICAgIHZhciBpbml0ZWRTdGFjayA9ICFzdGFja0E7XHJcbiAgICAgICAgICAgICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IGdldEFycmF5KCkpO1xyXG4gICAgICAgICAgICAgICAgc3RhY2tCIHx8IChzdGFja0IgPSBnZXRBcnJheSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2tCW2xlbmd0aF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaXNBcnIgPyBjdG9yKHZhbHVlLmxlbmd0aCkgOiB7fTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGlzQXJyID8gc2xpY2UodmFsdWUpIDogYXNzaWduKHt9LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gYWRkIGFycmF5IHByb3BlcnRpZXMgYXNzaWduZWQgYnkgYFJlZ0V4cCNleGVjYFxyXG4gICAgICAgICAgICBpZiAoaXNBcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnaW5kZXgnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pbmRleCA9IHZhbHVlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdpbnB1dCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmlucHV0ID0gdmFsdWUuaW5wdXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXhpdCBmb3Igc2hhbGxvdyBjbG9uZVxyXG4gICAgICAgICAgICBpZiAoIWlzRGVlcCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNvdXJjZSB2YWx1ZSB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHNcclxuICAgICAgICAgICAgLy8gYW5kIGFzc29jaWF0ZSBpdCB3aXRoIGl0cyBjbG9uZVxyXG4gICAgICAgICAgICBzdGFja0EucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHN0YWNrQi5wdXNoKHJlc3VsdCk7XHJcblxyXG4gICAgICAgICAgICAvLyByZWN1cnNpdmVseSBwb3B1bGF0ZSBjbG9uZSAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpXHJcbiAgICAgICAgICAgIChpc0FyciA/IGZvckVhY2ggOiBmb3JPd24pKHZhbHVlLCBmdW5jdGlvbiAob2JqVmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBiYXNlQ2xvbmUob2JqVmFsdWUsIGlzRGVlcCwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5pdGVkU3RhY2spIHtcclxuICAgICAgICAgICAgICAgIHJlbGVhc2VBcnJheShzdGFja0EpO1xyXG4gICAgICAgICAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNyZWF0ZWAgd2l0aG91dCBzdXBwb3J0IGZvciBhc3NpZ25pbmdcclxuICAgICAgICAgKiBwcm9wZXJ0aWVzIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvdHlwZSBUaGUgb2JqZWN0IHRvIGluaGVyaXQgZnJvbS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiYXNlQ3JlYXRlKHByb3RvdHlwZSwgcHJvcGVydGllcykge1xyXG4gICAgICAgICAgICByZXR1cm4gaXNPYmplY3QocHJvdG90eXBlKSA/IG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpIDoge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZhbGxiYWNrIGZvciBicm93c2VycyB3aXRob3V0IGBPYmplY3QuY3JlYXRlYFxyXG4gICAgICAgIGlmICghbmF0aXZlQ3JlYXRlKSB7XHJcbiAgICAgICAgICAgIGJhc2VDcmVhdGUgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gT2JqZWN0KCkgeyB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHByb3RvdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc09iamVjdChwcm90b3R5cGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUgPSBwcm90b3R5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QucHJvdG90eXBlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBjb250ZXh0Lk9iamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNyZWF0ZUNhbGxiYWNrYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNyZWF0aW5nXHJcbiAgICAgICAgICogXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0geyp9IFtmdW5jPWlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBjYWxsYmFjay5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyZ0NvdW50XSBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGUgY2FsbGJhY2sgYWNjZXB0cy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYSBjYWxsYmFjayBmdW5jdGlvbi5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZUNyZWF0ZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWRlbnRpdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXhpdCBlYXJseSBmb3Igbm8gYHRoaXNBcmdgIG9yIGFscmVhZHkgYm91bmQgYnkgYEZ1bmN0aW9uI2JpbmRgXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc0FyZyA9PSAndW5kZWZpbmVkJyB8fCAhKCdwcm90b3R5cGUnIGluIGZ1bmMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYmluZERhdGEgPSBmdW5jLl9fYmluZERhdGFfXztcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBiaW5kRGF0YSA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnQuZnVuY05hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmluZERhdGEgPSAhZnVuYy5uYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYmluZERhdGEgPSBiaW5kRGF0YSB8fCAhc3VwcG9ydC5mdW5jRGVjb21wO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFiaW5kRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBmblRvU3RyaW5nLmNhbGwoZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdXBwb3J0LmZ1bmNOYW1lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YSA9ICFyZUZ1bmNOYW1lLnRlc3Qoc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiaW5kRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVja3MgaWYgYGZ1bmNgIHJlZmVyZW5jZXMgdGhlIGB0aGlzYCBrZXl3b3JkIGFuZCBzdG9yZXMgdGhlIHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YSA9IHJlVGhpcy50ZXN0KHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEJpbmREYXRhKGZ1bmMsIGJpbmREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXhpdCBlYXJseSBpZiB0aGVyZSBhcmUgbm8gYHRoaXNgIHJlZmVyZW5jZXMgb3IgYGZ1bmNgIGlzIGJvdW5kXHJcbiAgICAgICAgICAgIGlmIChiaW5kRGF0YSA9PT0gZmFsc2UgfHwgKGJpbmREYXRhICE9PSB0cnVlICYmIGJpbmREYXRhWzFdICYgMSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAoYXJnQ291bnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYSwgYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBiaW5kKGZ1bmMsIHRoaXNBcmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGNyZWF0ZVdyYXBwZXJgIHRoYXQgY3JlYXRlcyB0aGUgd3JhcHBlciBhbmRcclxuICAgICAgICAgKiBzZXRzIGl0cyBtZXRhIGRhdGEuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGJpbmREYXRhIFRoZSBiaW5kIGRhdGEgYXJyYXkuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJhc2VDcmVhdGVXcmFwcGVyKGJpbmREYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBmdW5jID0gYmluZERhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICBiaXRtYXNrID0gYmluZERhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICBwYXJ0aWFsQXJncyA9IGJpbmREYXRhWzJdLFxyXG4gICAgICAgICAgICAgICAgcGFydGlhbFJpZ2h0QXJncyA9IGJpbmREYXRhWzNdLFxyXG4gICAgICAgICAgICAgICAgdGhpc0FyZyA9IGJpbmREYXRhWzRdLFxyXG4gICAgICAgICAgICAgICAgYXJpdHkgPSBiaW5kRGF0YVs1XTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpc0JpbmQgPSBiaXRtYXNrICYgMSxcclxuICAgICAgICAgICAgICAgIGlzQmluZEtleSA9IGJpdG1hc2sgJiAyLFxyXG4gICAgICAgICAgICAgICAgaXNDdXJyeSA9IGJpdG1hc2sgJiA0LFxyXG4gICAgICAgICAgICAgICAgaXNDdXJyeUJvdW5kID0gYml0bWFzayAmIDgsXHJcbiAgICAgICAgICAgICAgICBrZXkgPSBmdW5jO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYm91bmQoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0JpbmRpbmcgPSBpc0JpbmQgPyB0aGlzQXJnIDogdGhpcztcclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0aWFsQXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gc2xpY2UocGFydGlhbEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0aWFsUmlnaHRBcmdzIHx8IGlzQ3VycnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzIHx8IChhcmdzID0gc2xpY2UoYXJndW1lbnRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxSaWdodEFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBwYXJ0aWFsUmlnaHRBcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ3VycnkgJiYgYXJncy5sZW5ndGggPCBhcml0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRtYXNrIHw9IDE2ICYgfjMyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFzZUNyZWF0ZVdyYXBwZXIoW2Z1bmMsIChpc0N1cnJ5Qm91bmQgPyBiaXRtYXNrIDogYml0bWFzayAmIH4zKSwgYXJncywgbnVsbCwgdGhpc0FyZywgYXJpdHldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcmdzIHx8IChhcmdzID0gYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0JpbmRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdW5jID0gdGhpc0JpbmRpbmdba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQmluZGluZyA9IGJhc2VDcmVhdGUoZnVuYy5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNPYmplY3QocmVzdWx0KSA/IHJlc3VsdCA6IHRoaXNCaW5kaW5nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldEJpbmREYXRhKGJvdW5kLCBiaW5kRGF0YSk7XHJcbiAgICAgICAgICAgIHJldHVybiBib3VuZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmRpZmZlcmVuY2VgIHRoYXQgYWNjZXB0cyBhIHNpbmdsZSBhcnJheVxyXG4gICAgICAgICAqIG9mIHZhbHVlcyB0byBleGNsdWRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgYXJyYXkgb2YgdmFsdWVzIHRvIGV4Y2x1ZGUuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZURpZmZlcmVuY2UoYXJyYXksIHZhbHVlcykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICBpc0xhcmdlID0gbGVuZ3RoID49IGxhcmdlQXJyYXlTaXplICYmIGluZGV4T2YgPT09IGJhc2VJbmRleE9mLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNMYXJnZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlID0gY3JlYXRlQ2FjaGUodmFsdWVzKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4T2YgPSBjYWNoZUluZGV4T2Y7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gY2FjaGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTGFyZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4T2YodmFsdWVzLCB2YWx1ZSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc0xhcmdlKSB7XHJcbiAgICAgICAgICAgICAgICByZWxlYXNlT2JqZWN0KHZhbHVlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZsYXR0ZW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcclxuICAgICAgICAgKiBzaG9ydGhhbmRzIG9yIGB0aGlzQXJnYCBiaW5kaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmxhdHRlbi5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NoYWxsb3c9ZmFsc2VdIEEgZmxhZyB0byByZXN0cmljdCBmbGF0dGVuaW5nIHRvIGEgc2luZ2xlIGxldmVsLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU3RyaWN0PWZhbHNlXSBBIGZsYWcgdG8gcmVzdHJpY3QgZmxhdHRlbmluZyB0byBhcnJheXMgYW5kIGBhcmd1bWVudHNgIG9iamVjdHMuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHN0YXJ0IGZyb20uXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGZsYXR0ZW5lZCBhcnJheS5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZUZsYXR0ZW4oYXJyYXksIGlzU2hhbGxvdywgaXNTdHJpY3QsIGZyb21JbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAoZnJvbUluZGV4IHx8IDApIC0gMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5sZW5ndGggPT0gJ251bWJlcicgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmVseSBmbGF0dGVuIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1NoYWxsb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBiYXNlRmxhdHRlbih2YWx1ZSwgaXNTaGFsbG93LCBpc1N0cmljdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWxJbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxMZW5ndGggPSB2YWx1ZS5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc0luZGV4ID0gcmVzdWx0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lmxlbmd0aCArPSB2YWxMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCsrdmFsSW5kZXggPCB2YWxMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc0luZGV4KytdID0gdmFsdWVbdmFsSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCwgd2l0aG91dCBzdXBwb3J0IGZvciBgdGhpc0FyZ2AgYmluZGluZyxcclxuICAgICAgICAgKiB0aGF0IGFsbG93cyBwYXJ0aWFsIFwiXy53aGVyZVwiIHN0eWxlIGNvbXBhcmlzb25zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0geyp9IGEgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBiIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpc1doZXJlPWZhbHNlXSBBIGZsYWcgdG8gaW5kaWNhdGUgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYGFgIG9iamVjdHMuXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgYmAgb2JqZWN0cy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiYXNlSXNFcXVhbChhLCBiLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpIHtcclxuICAgICAgICAgICAgLy8gdXNlZCB0byBpbmRpY2F0ZSB0aGF0IHdoZW4gY29tcGFyaW5nIG9iamVjdHMsIGBhYCBoYXMgYXQgbGVhc3QgdGhlIHByb3BlcnRpZXMgb2YgYGJgXHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKGEsIGIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFyZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXhpdCBlYXJseSBmb3IgaWRlbnRpY2FsIHZhbHVlc1xyXG4gICAgICAgICAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJlYXQgYCswYCB2cy4gYC0wYCBhcyBub3QgZXF1YWxcclxuICAgICAgICAgICAgICAgIHJldHVybiBhICE9PSAwIHx8ICgxIC8gYSA9PSAxIC8gYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgYSxcclxuICAgICAgICAgICAgICAgIG90aGVyVHlwZSA9IHR5cGVvZiBiO1xyXG5cclxuICAgICAgICAgICAgLy8gZXhpdCBlYXJseSBmb3IgdW5saWtlIHByaW1pdGl2ZSB2YWx1ZXNcclxuICAgICAgICAgICAgaWYgKGEgPT09IGEgJiYgIShhICYmIG9iamVjdFR5cGVzW3R5cGVdKSAmJiAhKGIgJiYgb2JqZWN0VHlwZXNbb3RoZXJUeXBlXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBleGl0IGVhcmx5IGZvciBgbnVsbGAgYW5kIGB1bmRlZmluZWRgIGF2b2lkaW5nIEVTMydzIEZ1bmN0aW9uI2NhbGwgYmVoYXZpb3JcclxuICAgICAgICAgICAgLy8gaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4zLjQuNFxyXG4gICAgICAgICAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgPT09IGI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29tcGFyZSBbW0NsYXNzXV0gbmFtZXNcclxuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwoYSksXHJcbiAgICAgICAgICAgICAgICBvdGhlckNsYXNzID0gdG9TdHJpbmcuY2FsbChiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT0gYXJnc0NsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBvYmplY3RDbGFzcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3RoZXJDbGFzcyA9PSBhcmdzQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIG90aGVyQ2xhc3MgPSBvYmplY3RDbGFzcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2xhc3NOYW1lICE9IG90aGVyQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBib29sQ2xhc3M6XHJcbiAgICAgICAgICAgICAgICBjYXNlIGRhdGVDbGFzczpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWJlcnMsIGRhdGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgYm9vbGVhbnNcclxuICAgICAgICAgICAgICAgICAgICAvLyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhcyBub3QgZXF1YWxcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gK2EgPT0gK2I7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBudW1iZXJDbGFzczpcclxuICAgICAgICAgICAgICAgICAgICAvLyB0cmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWxcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGEgIT0gK2EpID8gYiAhPSArYlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCB0cmVhdCBgKzBgIHZzLiBgLTBgIGFzIG5vdCBlcXVhbFxyXG4gICAgICAgICAgICAgICAgICAgIDogKGEgPT0gMCA/ICgxIC8gYSA9PSAxIC8gYikgOiBhID09ICtiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIHJlZ2V4cENsYXNzOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBzdHJpbmdDbGFzczpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIChodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEwLjYuNClcclxuICAgICAgICAgICAgICAgICAgICAvLyB0cmVhdCBzdHJpbmcgcHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3QgaW5zdGFuY2VzIGFzIGVxdWFsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPT0gU3RyaW5nKGIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBpc0FyciA9IGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzO1xyXG4gICAgICAgICAgICBpZiAoIWlzQXJyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1bndyYXAgYW55IGBsb2Rhc2hgIHdyYXBwZWQgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICB2YXIgYVdyYXBwZWQgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKGEsICdfX3dyYXBwZWRfXycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJXcmFwcGVkID0gaGFzT3duUHJvcGVydHkuY2FsbChiLCAnX193cmFwcGVkX18nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYVdyYXBwZWQgfHwgYldyYXBwZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFzZUlzRXF1YWwoYVdyYXBwZWQgPyBhLl9fd3JhcHBlZF9fIDogYSwgYldyYXBwZWQgPyBiLl9fd3JhcHBlZF9fIDogYiwgY2FsbGJhY2ssIGlzV2hlcmUsIHN0YWNrQSwgc3RhY2tCKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGV4aXQgZm9yIGZ1bmN0aW9ucyBhbmQgRE9NIG5vZGVzXHJcbiAgICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lICE9IG9iamVjdENsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gaW4gb2xkZXIgdmVyc2lvbnMgb2YgT3BlcmEsIGBhcmd1bWVudHNgIG9iamVjdHMgaGF2ZSBgQXJyYXlgIGNvbnN0cnVjdG9yc1xyXG4gICAgICAgICAgICAgICAgdmFyIGN0b3JBID0gYS5jb25zdHJ1Y3RvcixcclxuICAgICAgICAgICAgICAgICAgICBjdG9yQiA9IGIuY29uc3RydWN0b3I7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWxcclxuICAgICAgICAgICAgICAgIGlmIChjdG9yQSAhPSBjdG9yQiAmJiAhKGlzRnVuY3Rpb24oY3RvckEpICYmIGN0b3JBIGluc3RhbmNlb2YgY3RvckEgJiYgaXNGdW5jdGlvbihjdG9yQikgJiYgY3RvckIgaW5zdGFuY2VvZiBjdG9yQikgJiZcclxuICAgICAgICAgICAgICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBhICYmICdjb25zdHJ1Y3RvcicgaW4gYilcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhc3N1bWUgY3ljbGljIHN0cnVjdHVyZXMgYXJlIGVxdWFsXHJcbiAgICAgICAgICAgIC8vIHRoZSBhbGdvcml0aG0gZm9yIGRldGVjdGluZyBjeWNsaWMgc3RydWN0dXJlcyBpcyBhZGFwdGVkIGZyb20gRVMgNS4xXHJcbiAgICAgICAgICAgIC8vIHNlY3Rpb24gMTUuMTIuMywgYWJzdHJhY3Qgb3BlcmF0aW9uIGBKT2AgKGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMTIuMylcclxuICAgICAgICAgICAgdmFyIGluaXRlZFN0YWNrID0gIXN0YWNrQTtcclxuICAgICAgICAgICAgc3RhY2tBIHx8IChzdGFja0EgPSBnZXRBcnJheSgpKTtcclxuICAgICAgICAgICAgc3RhY2tCIHx8IChzdGFja0IgPSBnZXRBcnJheSgpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xyXG4gICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSBhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdID09IGI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNpemUgPSAwO1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gYWRkIGBhYCBhbmQgYGJgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0c1xyXG4gICAgICAgICAgICBzdGFja0EucHVzaChhKTtcclxuICAgICAgICAgICAgc3RhY2tCLnB1c2goYik7XHJcblxyXG4gICAgICAgICAgICAvLyByZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpXHJcbiAgICAgICAgICAgIGlmIChpc0Fycikge1xyXG4gICAgICAgICAgICAgICAgLy8gY29tcGFyZSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnlcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgc2l6ZSA9IGIubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gc2l6ZSA9PSBsZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCB8fCBpc1doZXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVlcCBjb21wYXJlIHRoZSBjb250ZW50cywgaWdub3Jpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllc1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChzaXplLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gbGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBiW3NpemVdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzV2hlcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChpbmRleC0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyZXN1bHQgPSBiYXNlSXNFcXVhbChhW2luZGV4XSwgdmFsdWUsIGNhbGxiYWNrLCBpc1doZXJlLCBzdGFja0EsIHN0YWNrQikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghKHJlc3VsdCA9IGJhc2VJc0VxdWFsKGFbc2l6ZV0sIHZhbHVlLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWVwIGNvbXBhcmUgb2JqZWN0cyB1c2luZyBgZm9ySW5gLCBpbnN0ZWFkIG9mIGBmb3JPd25gLCB0byBhdm9pZCBgT2JqZWN0LmtleXNgXHJcbiAgICAgICAgICAgICAgICAvLyB3aGljaCwgaW4gdGhpcyBjYXNlLCBpcyBtb3JlIGNvc3RseVxyXG4gICAgICAgICAgICAgICAgZm9ySW4oYiwgZnVuY3Rpb24gKHZhbHVlLCBrZXksIGIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChiLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50IHRoZSBudW1iZXIgb2YgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWVwIGNvbXBhcmUgZWFjaCBwcm9wZXJ0eSB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKGEsIGtleSkgJiYgYmFzZUlzRXF1YWwoYVtrZXldLCB2YWx1ZSwgY2FsbGJhY2ssIGlzV2hlcmUsIHN0YWNrQSwgc3RhY2tCKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiAhaXNXaGVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZSBib3RoIG9iamVjdHMgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgcHJvcGVydGllc1xyXG4gICAgICAgICAgICAgICAgICAgIGZvckluKGEsIGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGEsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBzaXplYCB3aWxsIGJlIGAtMWAgaWYgYGFgIGhhcyBtb3JlIHByb3BlcnRpZXMgdGhhbiBgYmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAocmVzdWx0ID0gLS1zaXplID4gLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3RhY2tBLnBvcCgpO1xyXG4gICAgICAgICAgICBzdGFja0IucG9wKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5pdGVkU3RhY2spIHtcclxuICAgICAgICAgICAgICAgIHJlbGVhc2VBcnJheShzdGFja0EpO1xyXG4gICAgICAgICAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1lcmdlYCB3aXRob3V0IGFyZ3VtZW50IGp1Z2dsaW5nIG9yIHN1cHBvcnRcclxuICAgICAgICAgKiBmb3IgYHRoaXNBcmdgIGJpbmRpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnaW5nIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIHZhbHVlcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKSB7XHJcbiAgICAgICAgICAgIChpc0FycmF5KHNvdXJjZSkgPyBmb3JFYWNoIDogZm9yT3duKShzb3VyY2UsIGZ1bmN0aW9uIChzb3VyY2UsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQXJyLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNvdXJjZSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UgJiYgKChpc0FyciA9IGlzQXJyYXkoc291cmNlKSkgfHwgaXNQbGFpbk9iamVjdChzb3VyY2UpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIG1lcmdpbmcgcHJldmlvdXNseSBtZXJnZWQgY3ljbGljIHNvdXJjZXNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhY2tMZW5ndGggPSBzdGFja0EubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChzdGFja0xlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZm91bmQgPSBzdGFja0Fbc3RhY2tMZW5ndGhdID09IHNvdXJjZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc3RhY2tCW3N0YWNrTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2hhbGxvdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjYWxsYmFjayh2YWx1ZSwgc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaXNTaGFsbG93ID0gdHlwZW9mIHJlc3VsdCAhPSAndW5kZWZpbmVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzU2hhbGxvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBpc0FyciA/IChpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW10pIDogKGlzUGxhaW5PYmplY3QodmFsdWUpID8gdmFsdWUgOiB7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGBzb3VyY2VgIGFuZCBhc3NvY2lhdGVkIGB2YWx1ZWAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrQS5wdXNoKHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrQi5wdXNoKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IG1lcmdlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNTaGFsbG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlTWVyZ2UodmFsdWUsIHNvdXJjZSwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrKHZhbHVlLCBzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gc291cmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmFuZG9tYCB3aXRob3V0IGFyZ3VtZW50IGp1Z2dsaW5nIG9yIHN1cHBvcnRcclxuICAgICAgICAgKiBmb3IgcmV0dXJuaW5nIGZsb2F0aW5nLXBvaW50IG51bWJlcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gVGhlIG1pbmltdW0gcG9zc2libGUgdmFsdWUuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG1heCBUaGUgbWF4aW11bSBwb3NzaWJsZSB2YWx1ZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGEgcmFuZG9tIG51bWJlci5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZVJhbmRvbShtaW4sIG1heCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWluICsgZmxvb3IobmF0aXZlUmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udW5pcWAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzXHJcbiAgICAgICAgICogb3IgYHRoaXNBcmdgIGJpbmRpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU29ydGVkPWZhbHNlXSBBIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCBgYXJyYXlgIGlzIHNvcnRlZC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBkdXBsaWNhdGUtdmFsdWUtZnJlZSBhcnJheS5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZVVuaXEoYXJyYXksIGlzU29ydGVkLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpc0xhcmdlID0gIWlzU29ydGVkICYmIGxlbmd0aCA+PSBsYXJnZUFycmF5U2l6ZSAmJiBpbmRleE9mID09PSBiYXNlSW5kZXhPZixcclxuICAgICAgICAgICAgICAgIHNlZW4gPSAoY2FsbGJhY2sgfHwgaXNMYXJnZSkgPyBnZXRBcnJheSgpIDogcmVzdWx0O1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzTGFyZ2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWNoZSA9IGNyZWF0ZUNhY2hlKHNlZW4pO1xyXG4gICAgICAgICAgICAgICAgaW5kZXhPZiA9IGNhY2hlSW5kZXhPZjtcclxuICAgICAgICAgICAgICAgIHNlZW4gPSBjYWNoZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkID0gY2FsbGJhY2sgPyBjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGFycmF5KSA6IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpc1NvcnRlZCA/ICFpbmRleCB8fCBzZWVuW3NlZW4ubGVuZ3RoIC0gMV0gIT09IGNvbXB1dGVkIDogaW5kZXhPZihzZWVuLCBjb21wdXRlZCkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrIHx8IGlzTGFyZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc0xhcmdlKSB7XHJcbiAgICAgICAgICAgICAgICByZWxlYXNlQXJyYXkoc2Vlbi5hcnJheSk7XHJcbiAgICAgICAgICAgICAgICByZWxlYXNlT2JqZWN0KHNlZW4pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICByZWxlYXNlQXJyYXkoc2Vlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYSBjb2xsZWN0aW9uLCBjcmVhdGluZyBhbiBvYmplY3QgY29tcG9zZWRcclxuICAgICAgICAgKiBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmcgZWFjaCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgICogdGhyb3VnaCBhIGNhbGxiYWNrLiBUaGUgZ2l2ZW4gYHNldHRlcmAgZnVuY3Rpb24gc2V0cyB0aGUga2V5cyBhbmQgdmFsdWVzXHJcbiAgICAgICAgICogb2YgdGhlIGNvbXBvc2VkIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0dGVyIFRoZSBzZXR0ZXIgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWdncmVnYXRvciBmdW5jdGlvbi5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQWdncmVnYXRvcihzZXR0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGVyKHJlc3VsdCwgdmFsdWUsIGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbiksIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRlcihyZXN1bHQsIHZhbHVlLCBjYWxsYmFjayh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCBlaXRoZXIgY3VycmllcyBvciBpbnZva2VzIGBmdW5jYFxyXG4gICAgICAgICAqIHdpdGggYW4gb3B0aW9uYWwgYHRoaXNgIGJpbmRpbmcgYW5kIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IGZ1bmMgVGhlIGZ1bmN0aW9uIG9yIG1ldGhvZCBuYW1lIHRvIHJlZmVyZW5jZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBtZXRob2QgZmxhZ3MgdG8gY29tcG9zZS5cclxuICAgICAgICAgKiAgVGhlIGJpdG1hc2sgbWF5IGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZmxhZ3M6XHJcbiAgICAgICAgICogIDEgLSBgXy5iaW5kYFxyXG4gICAgICAgICAqICAyIC0gYF8uYmluZEtleWBcclxuICAgICAgICAgKiAgNCAtIGBfLmN1cnJ5YFxyXG4gICAgICAgICAqICA4IC0gYF8uY3VycnlgIChib3VuZClcclxuICAgICAgICAgKiAgMTYgLSBgXy5wYXJ0aWFsYFxyXG4gICAgICAgICAqICAzMiAtIGBfLnBhcnRpYWxSaWdodGBcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbEFyZ3NdIEFuIGFycmF5IG9mIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlXHJcbiAgICAgICAgICogIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW3BhcnRpYWxSaWdodEFyZ3NdIEFuIGFycmF5IG9mIGFyZ3VtZW50cyB0byBhcHBlbmQgdG8gdGhvc2VcclxuICAgICAgICAgKiAgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHldIFRoZSBhcml0eSBvZiBgZnVuY2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZnVuYywgYml0bWFzaywgcGFydGlhbEFyZ3MsIHBhcnRpYWxSaWdodEFyZ3MsIHRoaXNBcmcsIGFyaXR5KSB7XHJcbiAgICAgICAgICAgIHZhciBpc0JpbmQgPSBiaXRtYXNrICYgMSxcclxuICAgICAgICAgICAgICAgIGlzQmluZEtleSA9IGJpdG1hc2sgJiAyLFxyXG4gICAgICAgICAgICAgICAgaXNDdXJyeSA9IGJpdG1hc2sgJiA0LFxyXG4gICAgICAgICAgICAgICAgaXNDdXJyeUJvdW5kID0gYml0bWFzayAmIDgsXHJcbiAgICAgICAgICAgICAgICBpc1BhcnRpYWwgPSBiaXRtYXNrICYgMTYsXHJcbiAgICAgICAgICAgICAgICBpc1BhcnRpYWxSaWdodCA9IGJpdG1hc2sgJiAzMjtcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNCaW5kS2V5ICYmICFpc0Z1bmN0aW9uKGZ1bmMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc1BhcnRpYWwgJiYgIXBhcnRpYWxBcmdzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgYml0bWFzayAmPSB+MTY7XHJcbiAgICAgICAgICAgICAgICBpc1BhcnRpYWwgPSBwYXJ0aWFsQXJncyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc1BhcnRpYWxSaWdodCAmJiAhcGFydGlhbFJpZ2h0QXJncy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGJpdG1hc2sgJj0gfjMyO1xyXG4gICAgICAgICAgICAgICAgaXNQYXJ0aWFsUmlnaHQgPSBwYXJ0aWFsUmlnaHRBcmdzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGJpbmREYXRhID0gZnVuYyAmJiBmdW5jLl9fYmluZERhdGFfXztcclxuICAgICAgICAgICAgaWYgKGJpbmREYXRhICYmIGJpbmREYXRhICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjbG9uZSBgYmluZERhdGFgXHJcbiAgICAgICAgICAgICAgICBiaW5kRGF0YSA9IHNsaWNlKGJpbmREYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChiaW5kRGF0YVsyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJpbmREYXRhWzJdID0gc2xpY2UoYmluZERhdGFbMl0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGJpbmREYXRhWzNdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmluZERhdGFbM10gPSBzbGljZShiaW5kRGF0YVszXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgYHRoaXNCaW5kaW5nYCBpcyBub3QgcHJldmlvdXNseSBib3VuZFxyXG4gICAgICAgICAgICAgICAgaWYgKGlzQmluZCAmJiAhKGJpbmREYXRhWzFdICYgMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YVs0XSA9IHRoaXNBcmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgaWYgcHJldmlvdXNseSBib3VuZCBidXQgbm90IGN1cnJlbnRseSAoc3Vic2VxdWVudCBjdXJyaWVkIGZ1bmN0aW9ucylcclxuICAgICAgICAgICAgICAgIGlmICghaXNCaW5kICYmIGJpbmREYXRhWzFdICYgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJpdG1hc2sgfD0gODtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyaWVkIGFyaXR5IGlmIG5vdCB5ZXQgc2V0XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNDdXJyeSAmJiAhKGJpbmREYXRhWzFdICYgNCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YVs1XSA9IGFyaXR5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gYXBwZW5kIHBhcnRpYWwgbGVmdCBhcmd1bWVudHNcclxuICAgICAgICAgICAgICAgIGlmIChpc1BhcnRpYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBwdXNoLmFwcGx5KGJpbmREYXRhWzJdIHx8IChiaW5kRGF0YVsyXSA9IFtdKSwgcGFydGlhbEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gYXBwZW5kIHBhcnRpYWwgcmlnaHQgYXJndW1lbnRzXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNQYXJ0aWFsUmlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB1bnNoaWZ0LmFwcGx5KGJpbmREYXRhWzNdIHx8IChiaW5kRGF0YVszXSA9IFtdKSwgcGFydGlhbFJpZ2h0QXJncyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBtZXJnZSBmbGFnc1xyXG4gICAgICAgICAgICAgICAgYmluZERhdGFbMV0gfD0gYml0bWFzaztcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyLmFwcGx5KG51bGwsIGJpbmREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBmYXN0IHBhdGggZm9yIGBfLmJpbmRgXHJcbiAgICAgICAgICAgIHZhciBjcmVhdGVyID0gKGJpdG1hc2sgPT0gMSB8fCBiaXRtYXNrID09PSAxNykgPyBiYXNlQmluZCA6IGJhc2VDcmVhdGVXcmFwcGVyO1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlcihbZnVuYywgYml0bWFzaywgcGFydGlhbEFyZ3MsIHBhcnRpYWxSaWdodEFyZ3MsIHRoaXNBcmcsIGFyaXR5XSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVc2VkIGJ5IGBlc2NhcGVgIHRvIGNvbnZlcnQgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWF0Y2ggVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXNjYXBlSHRtbENoYXIobWF0Y2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGh0bWxFc2NhcGVzW21hdGNoXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGFwcHJvcHJpYXRlIFwiaW5kZXhPZlwiIGZ1bmN0aW9uLiBJZiB0aGUgYF8uaW5kZXhPZmAgbWV0aG9kIGlzXHJcbiAgICAgICAgICogY3VzdG9taXplZCwgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgY3VzdG9tIG1ldGhvZCwgb3RoZXJ3aXNlIGl0IHJldHVybnNcclxuICAgICAgICAgKiB0aGUgYGJhc2VJbmRleE9mYCBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBcImluZGV4T2ZcIiBmdW5jdGlvbi5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0SW5kZXhPZigpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IChyZXN1bHQgPSBsb2Rhc2guaW5kZXhPZikgPT09IGluZGV4T2YgPyBiYXNlSW5kZXhPZiA6IHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nICYmIHJlTmF0aXZlLnRlc3QodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0cyBgdGhpc2AgYmluZGluZyBkYXRhIG9uIGEgZ2l2ZW4gZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHNldCBkYXRhIG9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlIFRoZSBkYXRhIGFycmF5IHRvIHNldC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2V0QmluZERhdGEgPSAhZGVmaW5lUHJvcGVydHkgPyBub29wIDogZnVuY3Rpb24gKGZ1bmMsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgZGVmaW5lUHJvcGVydHkoZnVuYywgJ19fYmluZERhdGFfXycsIGRlc2NyaXB0b3IpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgZmFsbGJhY2sgaW1wbGVtZW50YXRpb24gb2YgYGlzUGxhaW5PYmplY3RgIHdoaWNoIGNoZWNrcyBpZiBhIGdpdmVuIHZhbHVlXHJcbiAgICAgICAgICogaXMgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLCBhc3N1bWluZyBvYmplY3RzIGNyZWF0ZWRcclxuICAgICAgICAgKiBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IgaGF2ZSBubyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGFuZCB0aGF0XHJcbiAgICAgICAgICogdGhlcmUgYXJlIG5vIGBPYmplY3QucHJvdG90eXBlYCBleHRlbnNpb25zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzaGltSXNQbGFpbk9iamVjdCh2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3RvcixcclxuICAgICAgICAgICAgICAgIHJlc3VsdDtcclxuXHJcbiAgICAgICAgICAgIC8vIGF2b2lkIG5vbiBPYmplY3Qgb2JqZWN0cywgYGFyZ3VtZW50c2Agb2JqZWN0cywgYW5kIERPTSBlbGVtZW50c1xyXG4gICAgICAgICAgICBpZiAoISh2YWx1ZSAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBvYmplY3RDbGFzcykgfHxcclxuICAgICAgICAgICAgICAgIChjdG9yID0gdmFsdWUuY29uc3RydWN0b3IsIGlzRnVuY3Rpb24oY3RvcikgJiYgIShjdG9yIGluc3RhbmNlb2YgY3RvcikpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSW4gbW9zdCBlbnZpcm9ubWVudHMgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMgYXJlIGl0ZXJhdGVkIGJlZm9yZVxyXG4gICAgICAgICAgICAvLyBpdHMgaW5oZXJpdGVkIHByb3BlcnRpZXMuIElmIHRoZSBsYXN0IGl0ZXJhdGVkIHByb3BlcnR5IGlzIGFuIG9iamVjdCdzXHJcbiAgICAgICAgICAgIC8vIG93biBwcm9wZXJ0eSB0aGVuIHRoZXJlIGFyZSBubyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICBmb3JJbih2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGtleTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcmVzdWx0ID09ICd1bmRlZmluZWQnIHx8IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVc2VkIGJ5IGB1bmVzY2FwZWAgdG8gY29udmVydCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtYXRjaCBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gdW5lc2NhcGUuXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdW5lc2NhcGVkIGNoYXJhY3Rlci5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdW5lc2NhcGVIdG1sQ2hhcihtYXRjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaHRtbFVuZXNjYXBlc1ttYXRjaF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIChmdW5jdGlvbigpIHsgcmV0dXJuIF8uaXNBcmd1bWVudHMoYXJndW1lbnRzKTsgfSkoMSwgMiwgMyk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmxlbmd0aCA9PSAnbnVtYmVyJyAmJlxyXG4gICAgICAgICAgICAgICAgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc0NsYXNzIHx8IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIChmdW5jdGlvbigpIHsgcmV0dXJuIF8uaXNBcnJheShhcmd1bWVudHMpOyB9KSgpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5sZW5ndGggPT0gJ251bWJlcicgJiZcclxuICAgICAgICAgICAgICAgIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5Q2xhc3MgfHwgZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBvZiBgT2JqZWN0LmtleXNgIHdoaWNoIHByb2R1Y2VzIGFuIGFycmF5IG9mIHRoZVxyXG4gICAgICAgICAqIGdpdmVuIG9iamVjdCdzIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2hpbUtleXMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCwgaXRlcmFibGUgPSBvYmplY3QsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKCEob2JqZWN0VHlwZXNbdHlwZW9mIG9iamVjdF0pKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICBmb3IgKGluZGV4IGluIGl0ZXJhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChpdGVyYWJsZSwgaW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGNvbXBvc2VkIG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5rZXlzKHsgJ29uZSc6IDEsICd0d28nOiAyLCAndGhyZWUnOiAzIH0pO1xyXG4gICAgICAgICAqIC8vID0+IFsnb25lJywgJ3R3bycsICd0aHJlZSddIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBrZXlzID0gIW5hdGl2ZUtleXMgPyBzaGltS2V5cyA6IGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUtleXMob2JqZWN0KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVc2VkIHRvIGNvbnZlcnQgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhvdWdoIHRoZSBgPmAgY2hhcmFjdGVyIGlzIGVzY2FwZWQgZm9yIHN5bW1ldHJ5LCBjaGFyYWN0ZXJzIGxpa2UgYD5gIGFuZCBgL2BcclxuICAgICAgICAgKiBkb24ndCByZXF1aXJlIGVzY2FwaW5nIGluIEhUTUwgYW5kIGhhdmUgbm8gc3BlY2lhbCBtZWFuaW5nIHVubGVzcyB0aGV5J3JlIHBhcnRcclxuICAgICAgICAgKiBvZiBhIHRhZyBvciBhbiB1bnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWUuXHJcbiAgICAgICAgICogaHR0cDovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvYW1iaWd1b3VzLWFtcGVyc2FuZHMgKHVuZGVyIFwic2VtaS1yZWxhdGVkIGZ1biBmYWN0XCIpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGh0bWxFc2NhcGVzID0ge1xyXG4gICAgICAgICAgICAnJic6ICcmYW1wOycsXHJcbiAgICAgICAgICAgICc8JzogJyZsdDsnLFxyXG4gICAgICAgICAgICAnPic6ICcmZ3Q7JyxcclxuICAgICAgICAgICAgJ1wiJzogJyZxdW90OycsXHJcbiAgICAgICAgICAgIFwiJ1wiOiAnJiMzOTsnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqIFVzZWQgdG8gY29udmVydCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMgKi9cclxuICAgICAgICB2YXIgaHRtbFVuZXNjYXBlcyA9IGludmVydChodG1sRXNjYXBlcyk7XHJcblxyXG4gICAgICAgIC8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycyAqL1xyXG4gICAgICAgIHZhciByZUVzY2FwZWRIdG1sID0gUmVnRXhwKCcoJyArIGtleXMoaHRtbFVuZXNjYXBlcykuam9pbignfCcpICsgJyknLCAnZycpLFxyXG4gICAgICAgICAgICByZVVuZXNjYXBlZEh0bWwgPSBSZWdFeHAoJ1snICsga2V5cyhodG1sRXNjYXBlcykuam9pbignJykgKyAnXScsICdnJyk7XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdChzKSB0byB0aGUgZGVzdGluYXRpb25cclxuICAgICAgICAgKiBvYmplY3QuIFN1YnNlcXVlbnQgc291cmNlcyB3aWxsIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91c1xyXG4gICAgICAgICAqIHNvdXJjZXMuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCB0byBwcm9kdWNlIHRoZVxyXG4gICAgICAgICAqIGFzc2lnbmVkIHZhbHVlcy4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHR3b1xyXG4gICAgICAgICAqIGFyZ3VtZW50czsgKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxyXG4gICAgICAgICAqIEBhbGlhcyBleHRlbmRcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZV0gVGhlIHNvdXJjZSBvYmplY3RzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25pbmcgdmFsdWVzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5hc3NpZ24oeyAnbmFtZSc6ICdmcmVkJyB9LCB7ICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZGVmYXVsdHMgPSBfLnBhcnRpYWxSaWdodChfLmFzc2lnbiwgZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAqICAgcmV0dXJuIHR5cGVvZiBhID09ICd1bmRlZmluZWQnID8gYiA6IGE7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdiYXJuZXknIH07XHJcbiAgICAgICAgICogZGVmYXVsdHMob2JqZWN0LCB7ICduYW1lJzogJ2ZyZWQnLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGFzc2lnbiA9IGZ1bmN0aW9uIChvYmplY3QsIHNvdXJjZSwgZ3VhcmQpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IG9iamVjdCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGl0ZXJhYmxlO1xyXG4gICAgICAgICAgICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcclxuICAgICAgICAgICAgICAgIGFyZ3NJbmRleCA9IDAsXHJcbiAgICAgICAgICAgICAgICBhcmdzTGVuZ3RoID0gdHlwZW9mIGd1YXJkID09ICdudW1iZXInID8gMiA6IGFyZ3MubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoYXJnc0xlbmd0aCA+IDMgJiYgdHlwZW9mIGFyZ3NbYXJnc0xlbmd0aCAtIDJdID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhhcmdzWy0tYXJnc0xlbmd0aCAtIDFdLCBhcmdzW2FyZ3NMZW5ndGgtLV0sIDIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3NMZW5ndGggPiAyICYmIHR5cGVvZiBhcmdzW2FyZ3NMZW5ndGggLSAxXSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3NbLS1hcmdzTGVuZ3RoXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVyYWJsZSA9IGFyZ3NbYXJnc0luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVyYWJsZSAmJiBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG93bkluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG93blByb3BzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSAmJiBrZXlzKGl0ZXJhYmxlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gb3duUHJvcHMgPyBvd25Qcm9wcy5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKytvd25JbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IG93blByb3BzW293bkluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGNhbGxiYWNrID8gY2FsbGJhY2socmVzdWx0W2luZGV4XSwgaXRlcmFibGVbaW5kZXhdKSA6IGl0ZXJhYmxlW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiBgdmFsdWVgLiBJZiBgaXNEZWVwYCBpcyBgdHJ1ZWAgbmVzdGVkIG9iamVjdHMgd2lsbCBhbHNvXHJcbiAgICAgICAgICogYmUgY2xvbmVkLCBvdGhlcndpc2UgdGhleSB3aWxsIGJlIGFzc2lnbmVkIGJ5IHJlZmVyZW5jZS4gSWYgYSBjYWxsYmFja1xyXG4gICAgICAgICAqIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGUgY2xvbmVkIHZhbHVlcy4gSWYgdGhlXHJcbiAgICAgICAgICogY2FsbGJhY2sgcmV0dXJucyBgdW5kZWZpbmVkYCBjbG9uaW5nIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuXHJcbiAgICAgICAgICogVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2xvbmUuXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwPWZhbHNlXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgc2hhbGxvdyA9IF8uY2xvbmUoY2hhcmFjdGVycyk7XHJcbiAgICAgICAgICogc2hhbGxvd1swXSA9PT0gY2hhcmFjdGVyc1swXTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZGVlcCA9IF8uY2xvbmUoY2hhcmFjdGVycywgdHJ1ZSk7XHJcbiAgICAgICAgICogZGVlcFswXSA9PT0gY2hhcmFjdGVyc1swXTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5taXhpbih7XHJcbiAgICAgICAgICogICAnY2xvbmUnOiBfLnBhcnRpYWxSaWdodChfLmNsb25lLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAqICAgICByZXR1cm4gXy5pc0VsZW1lbnQodmFsdWUpID8gdmFsdWUuY2xvbmVOb2RlKGZhbHNlKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgKiAgIH0pXHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2xvbmUgPSBfLmNsb25lKGRvY3VtZW50LmJvZHkpO1xyXG4gICAgICAgICAqIGNsb25lLmNoaWxkTm9kZXMubGVuZ3RoO1xyXG4gICAgICAgICAqIC8vID0+IDBcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xvbmUodmFsdWUsIGlzRGVlcCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgLy8gYWxsb3dzIHdvcmtpbmcgd2l0aCBcIkNvbGxlY3Rpb25zXCIgbWV0aG9kcyB3aXRob3V0IHVzaW5nIHRoZWlyIGBpbmRleGBcclxuICAgICAgICAgICAgLy8gYW5kIGBjb2xsZWN0aW9uYCBhcmd1bWVudHMgZm9yIGBpc0RlZXBgIGFuZCBgY2FsbGJhY2tgXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNEZWVwICE9ICdib29sZWFuJyAmJiBpc0RlZXAgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpc0FyZyA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBpc0RlZXA7XHJcbiAgICAgICAgICAgICAgICBpc0RlZXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZUNsb25lKHZhbHVlLCBpc0RlZXAsIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nICYmIGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGRlZXAgY2xvbmUgb2YgYHZhbHVlYC4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlXHJcbiAgICAgICAgICogZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGUgY2xvbmVkIHZhbHVlcy4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYHVuZGVmaW5lZGBcclxuICAgICAgICAgKiBjbG9uaW5nIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0b1xyXG4gICAgICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb24gdGhlIHN0cnVjdHVyZWQgY2xvbmUgYWxnb3JpdGhtLiBGdW5jdGlvbnNcclxuICAgICAgICAgKiBhbmQgRE9NIG5vZGVzIGFyZSAqKm5vdCoqIGNsb25lZC4gVGhlIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBgYXJndW1lbnRzYCBvYmplY3RzIGFuZFxyXG4gICAgICAgICAqIG9iamVjdHMgY3JlYXRlZCBieSBjb25zdHJ1Y3RvcnMgb3RoZXIgdGhhbiBgT2JqZWN0YCBhcmUgY2xvbmVkIHRvIHBsYWluIGBPYmplY3RgIG9iamVjdHMuXHJcbiAgICAgICAgICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2luZnJhc3RydWN0dXJlLmh0bWwjaW50ZXJuYWwtc3RydWN0dXJlZC1jbG9uaW5nLWFsZ29yaXRobS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZGVlcCBjbG9uZS5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGRlZXAgY2xvbmVkIHZhbHVlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBkZWVwID0gXy5jbG9uZURlZXAoY2hhcmFjdGVycyk7XHJcbiAgICAgICAgICogZGVlcFswXSA9PT0gY2hhcmFjdGVyc1swXTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIHZpZXcgPSB7XHJcbiAgICAgICAgICogICAnbGFiZWwnOiAnZG9jcycsXHJcbiAgICAgICAgICogICAnbm9kZSc6IGVsZW1lbnRcclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNsb25lID0gXy5jbG9uZURlZXAodmlldywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBfLmlzRWxlbWVudCh2YWx1ZSkgPyB2YWx1ZS5jbG9uZU5vZGUodHJ1ZSkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBjbG9uZS5ub2RlID09IHZpZXcubm9kZTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbG9uZURlZXAodmFsdWUsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlQ2xvbmUodmFsdWUsIHRydWUsIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nICYmIGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBnaXZlbiBgcHJvdG90eXBlYCBvYmplY3QuIElmIGFcclxuICAgICAgICAgKiBgcHJvcGVydGllc2Agb2JqZWN0IGlzIHByb3ZpZGVkIGl0cyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGFyZSBhc3NpZ25lZFxyXG4gICAgICAgICAqIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvdHlwZSBUaGUgb2JqZWN0IHRvIGluaGVyaXQgZnJvbS5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXNdIFRoZSBwcm9wZXJ0aWVzIHRvIGFzc2lnbiB0byB0aGUgb2JqZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGZ1bmN0aW9uIFNoYXBlKCkge1xyXG4gICAgICAgICAqICAgdGhpcy54ID0gMDtcclxuICAgICAgICAgKiAgIHRoaXMueSA9IDA7XHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZnVuY3Rpb24gQ2lyY2xlKCkge1xyXG4gICAgICAgICAqICAgU2hhcGUuY2FsbCh0aGlzKTtcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBDaXJjbGUucHJvdG90eXBlID0gXy5jcmVhdGUoU2hhcGUucHJvdG90eXBlLCB7ICdjb25zdHJ1Y3Rvcic6IENpcmNsZSB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaXJjbGUgPSBuZXcgQ2lyY2xlO1xyXG4gICAgICAgICAqIGNpcmNsZSBpbnN0YW5jZW9mIENpcmNsZTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBjaXJjbGUgaW5zdGFuY2VvZiBTaGFwZTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZShwcm90b3R5cGUsIHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGJhc2VDcmVhdGUocHJvdG90eXBlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXMgPyBhc3NpZ24ocmVzdWx0LCBwcm9wZXJ0aWVzKSA6IHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFzc2lnbnMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0KHMpIHRvIHRoZSBkZXN0aW5hdGlvblxyXG4gICAgICAgICAqIG9iamVjdCBmb3IgYWxsIGRlc3RpbmF0aW9uIHByb3BlcnRpZXMgdGhhdCByZXNvbHZlIHRvIGB1bmRlZmluZWRgLiBPbmNlIGFcclxuICAgICAgICAgKiBwcm9wZXJ0eSBpcyBzZXQsIGFkZGl0aW9uYWwgZGVmYXVsdHMgb2YgdGhlIHNhbWUgcHJvcGVydHkgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZV0gVGhlIHNvdXJjZSBvYmplY3RzLlxyXG4gICAgICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBBbGxvd3Mgd29ya2luZyB3aXRoIGBfLnJlZHVjZWAgd2l0aG91dCB1c2luZyBpdHNcclxuICAgICAgICAgKiAgYGtleWAgYW5kIGBvYmplY3RgIGFyZ3VtZW50cyBhcyBzb3VyY2VzLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnYmFybmV5JyB9O1xyXG4gICAgICAgICAqIF8uZGVmYXVsdHMob2JqZWN0LCB7ICduYW1lJzogJ2ZyZWQnLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGRlZmF1bHRzID0gZnVuY3Rpb24gKG9iamVjdCwgc291cmNlLCBndWFyZCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXgsIGl0ZXJhYmxlID0gb2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlcmFibGU7XHJcbiAgICAgICAgICAgIGlmICghaXRlcmFibGUpIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgYXJnc0luZGV4ID0gMCxcclxuICAgICAgICAgICAgICAgIGFyZ3NMZW5ndGggPSB0eXBlb2YgZ3VhcmQgPT0gJ251bWJlcicgPyAyIDogYXJncy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGl0ZXJhYmxlID0gYXJnc1thcmdzSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZXJhYmxlICYmIG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3duSW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3duUHJvcHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdICYmIGtleXMoaXRlcmFibGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBvd25Qcm9wcyA/IG93blByb3BzLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgrK293bkluZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gb3duUHJvcHNbb3duSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdFtpbmRleF0gPT0gJ3VuZGVmaW5lZCcpIHJlc3VsdFtpbmRleF0gPSBpdGVyYWJsZVtpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRJbmRleGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUga2V5IG9mIHRoZVxyXG4gICAgICAgICAqIGZpcnN0IGVsZW1lbnQgdGhhdCBwYXNzZXMgdGhlIGNhbGxiYWNrIGNoZWNrLCBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gc2VhcmNoLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlclxyXG4gICAgICAgICAqICBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvXHJcbiAgICAgICAgICogIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IFJldHVybnMgdGhlIGtleSBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSB7XHJcbiAgICAgICAgICogICAnYmFybmV5JzogeyAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXHJcbiAgICAgICAgICogICAnZnJlZCc6IHsgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfSxcclxuICAgICAgICAgKiAgICdwZWJibGVzJzogeyAnYWdlJzogMSwgICdibG9ja2VkJzogZmFsc2UgfVxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZpbmRLZXkoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gY2hyLmFnZSA8IDQwO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+ICdiYXJuZXknIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5maW5kS2V5KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDEgfSk7XHJcbiAgICAgICAgICogLy8gPT4gJ3BlYmJsZXMnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbmRLZXkoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcclxuICAgICAgICAgKiAvLyA9PiAnZnJlZCdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZEtleShvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgZm9yT3duKG9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXksIG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZEtleWAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xyXG4gICAgICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gc2VhcmNoLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlclxyXG4gICAgICAgICAqICBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvXHJcbiAgICAgICAgICogIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IFJldHVybnMgdGhlIGtleSBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSB7XHJcbiAgICAgICAgICogICAnYmFybmV5JzogeyAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IHRydWUgfSxcclxuICAgICAgICAgKiAgICdmcmVkJzogeyAgICAnYWdlJzogNDAsICdibG9ja2VkJzogZmFsc2UgfSxcclxuICAgICAgICAgKiAgICdwZWJibGVzJzogeyAnYWdlJzogMSwgICdibG9ja2VkJzogdHJ1ZSB9XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZmluZExhc3RLZXkoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gY2hyLmFnZSA8IDQwO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IHJldHVybnMgYHBlYmJsZXNgLCBhc3N1bWluZyBgXy5maW5kS2V5YCByZXR1cm5zIGBiYXJuZXlgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbmRMYXN0S2V5KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDQwIH0pO1xyXG4gICAgICAgICAqIC8vID0+ICdmcmVkJ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5maW5kTGFzdEtleShjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+ICdwZWJibGVzJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaW5kTGFzdEtleShvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgZm9yT3duUmlnaHQob2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSwgb2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGtleSwgb2JqZWN0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSXRlcmF0ZXMgb3ZlciBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGV4ZWN1dGluZyB0aGUgY2FsbGJhY2sgZm9yIGVhY2ggcHJvcGVydHkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2BcclxuICAgICAgICAgKiBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBrZXksIG9iamVjdCkuIENhbGxiYWNrcyBtYXkgZXhpdFxyXG4gICAgICAgICAqIGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XHJcbiAgICAgICAgICogICB0aGlzLnggPSAwO1xyXG4gICAgICAgICAqICAgdGhpcy55ID0gMDtcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBTaGFwZS5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgICAgICAgKiAgIHRoaXMueCArPSB4O1xyXG4gICAgICAgICAqICAgdGhpcy55ICs9IHk7XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZm9ySW4obmV3IFNoYXBlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IGxvZ3MgJ3gnLCAneScsIGFuZCAnbW92ZScgKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGZvckluID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCwgaXRlcmFibGUgPSBjb2xsZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlcmFibGU7XHJcbiAgICAgICAgICAgIGlmICghaXRlcmFibGUpIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmICghb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayAmJiB0eXBlb2YgdGhpc0FyZyA9PSAndW5kZWZpbmVkJyA/IGNhbGxiYWNrIDogYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgZm9yIChpbmRleCBpbiBpdGVyYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JJbmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xyXG4gICAgICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmdW5jdGlvbiBTaGFwZSgpIHtcclxuICAgICAgICAgKiAgIHRoaXMueCA9IDA7XHJcbiAgICAgICAgICogICB0aGlzLnkgPSAwO1xyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFNoYXBlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgICAgICAqICAgdGhpcy54ICs9IHg7XHJcbiAgICAgICAgICogICB0aGlzLnkgKz0geTtcclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5mb3JJblJpZ2h0KG5ldyBTaGFwZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBsb2dzICdtb3ZlJywgJ3knLCBhbmQgJ3gnIGFzc3VtaW5nIGBfLmZvckluIGAgbG9ncyAneCcsICd5JywgYW5kICdtb3ZlJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmb3JJblJpZ2h0KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHBhaXJzID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICBwYWlycy5wdXNoKGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBwYWlycy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2socGFpcnNbbGVuZ3RoLS1dLCBwYWlyc1tsZW5ndGhdLCBvYmplY3QpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJdGVyYXRlcyBvdmVyIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0LCBleGVjdXRpbmcgdGhlIGNhbGxiYWNrXHJcbiAgICAgICAgICogZm9yIGVhY2ggcHJvcGVydHkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxyXG4gICAgICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBrZXksIG9iamVjdCkuIENhbGxiYWNrcyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnlcclxuICAgICAgICAgKiBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5mb3JPd24oeyAnMCc6ICd6ZXJvJywgJzEnOiAnb25lJywgJ2xlbmd0aCc6IDIgfSwgZnVuY3Rpb24obnVtLCBrZXkpIHtcclxuICAgICAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyAnMCcsICcxJywgYW5kICdsZW5ndGgnIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBmb3JPd24gPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IGNvbGxlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpdGVyYWJsZTtcclxuICAgICAgICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKCFvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICB2YXIgb3duSW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIG93blByb3BzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSAmJiBrZXlzKGl0ZXJhYmxlKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IG93blByb3BzID8gb3duUHJvcHMubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICgrK293bkluZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IG93blByb3BzW293bkluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhpdGVyYWJsZVtpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSA9PT0gZmFsc2UpIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9yT3duYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXHJcbiAgICAgICAgICogb2YgYSBgY29sbGVjdGlvbmAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZm9yT3duUmlnaHQoeyAnMCc6ICd6ZXJvJywgJzEnOiAnb25lJywgJ2xlbmd0aCc6IDIgfSwgZnVuY3Rpb24obnVtLCBrZXkpIHtcclxuICAgICAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyAnbGVuZ3RoJywgJzEnLCBhbmQgJzAnIGFzc3VtaW5nIGBfLmZvck93bmAgbG9ncyAnMCcsICcxJywgYW5kICdsZW5ndGgnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZvck93blJpZ2h0KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHByb3BzID0ga2V5cyhvYmplY3QpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBwcm9wc1tsZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKG9iamVjdFtrZXldLCBrZXksIG9iamVjdCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBzb3J0ZWQgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgb2YgYWxsIGVudW1lcmFibGUgcHJvcGVydGllcyxcclxuICAgICAgICAgKiBvd24gYW5kIGluaGVyaXRlZCwgb2YgYG9iamVjdGAgdGhhdCBoYXZlIGZ1bmN0aW9uIHZhbHVlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBhbGlhcyBtZXRob2RzXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgdGhhdCBoYXZlIGZ1bmN0aW9uIHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5mdW5jdGlvbnMoXyk7XHJcbiAgICAgICAgICogLy8gPT4gWydhbGwnLCAnYW55JywgJ2JpbmQnLCAnYmluZEFsbCcsICdjbG9uZScsICdjb21wYWN0JywgJ2NvbXBvc2UnLCAuLi5dXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bmN0aW9ucyhvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5zb3J0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBuYW1lIGV4aXN0cyBhcyBhIGRpcmVjdCBwcm9wZXJ0eSBvZiBgb2JqZWN0YCxcclxuICAgICAgICAgKiBpbnN0ZWFkIG9mIGFuIGluaGVyaXRlZCBwcm9wZXJ0eS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGtleSBpcyBhIGRpcmVjdCBwcm9wZXJ0eSwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmhhcyh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfSwgJ2InKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGhhcyhvYmplY3QsIGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0ID8gaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgOiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBpbnZlcnRlZCBrZXlzIGFuZCB2YWx1ZXMgb2YgdGhlIGdpdmVuIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGludmVydC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjcmVhdGVkIGludmVydGVkIG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbnZlcnQoeyAnZmlyc3QnOiAnZnJlZCcsICdzZWNvbmQnOiAnYmFybmV5JyB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICdmcmVkJzogJ2ZpcnN0JywgJ2Jhcm5leSc6ICdzZWNvbmQnIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW52ZXJ0KG9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIHByb3BzID0ga2V5cyhvYmplY3QpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0ge307XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtvYmplY3Rba2V5XV0gPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgYm9vbGVhbiB2YWx1ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgYm9vbGVhbiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzQm9vbGVhbihudWxsKTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZSB8fFxyXG4gICAgICAgICAgICAgICAgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IGJvb2xDbGFzcyB8fCBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZGF0ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgZGF0ZSwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRGF0ZShuZXcgRGF0ZSk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBkYXRlQ2xhc3MgfHwgZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudCwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRWxlbWVudChkb2N1bWVudC5ib2R5KTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzRWxlbWVudCh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUubm9kZVR5cGUgPT09IDEgfHwgZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBlbXB0eS4gQXJyYXlzLCBzdHJpbmdzLCBvciBgYXJndW1lbnRzYCBvYmplY3RzIHdpdGggYVxyXG4gICAgICAgICAqIGxlbmd0aCBvZiBgMGAgYW5kIG9iamVjdHMgd2l0aCBubyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGFyZSBjb25zaWRlcmVkXHJcbiAgICAgICAgICogXCJlbXB0eVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBlbXB0eSwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRW1wdHkoWzEsIDIsIDNdKTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0VtcHR5KHt9KTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRW1wdHkoJycpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbCh2YWx1ZSksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBpZiAoKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzIHx8IGNsYXNzTmFtZSA9PSBzdHJpbmdDbGFzcyB8fCBjbGFzc05hbWUgPT0gYXJnc0NsYXNzKSB8fFxyXG4gICAgICAgICAgICAgICAgKGNsYXNzTmFtZSA9PSBvYmplY3RDbGFzcyAmJiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGlzRnVuY3Rpb24odmFsdWUuc3BsaWNlKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhbGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvck93bih2YWx1ZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQgPSBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZVxyXG4gICAgICAgICAqIGVxdWl2YWxlbnQgdG8gZWFjaCBvdGhlci4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkXHJcbiAgICAgICAgICogdG8gY29tcGFyZSB2YWx1ZXMuIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGB1bmRlZmluZWRgIGNvbXBhcmlzb25zIHdpbGxcclxuICAgICAgICAgKiBiZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcclxuICAgICAgICAgKiBpbnZva2VkIHdpdGggdHdvIGFyZ3VtZW50czsgKGEsIGIpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IGEgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBiIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2ZyZWQnIH07XHJcbiAgICAgICAgICogdmFyIGNvcHkgPSB7ICduYW1lJzogJ2ZyZWQnIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBvYmplY3QgPT0gY29weTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0VxdWFsKG9iamVjdCwgY29weSk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIHdvcmRzID0gWydoZWxsbycsICdnb29kYnllJ107XHJcbiAgICAgICAgICogdmFyIG90aGVyV29yZHMgPSBbJ2hpJywgJ2dvb2RieWUnXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNFcXVhbCh3b3Jkcywgb3RoZXJXb3JkcywgZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAqICAgdmFyIHJlR3JlZXQgPSAvXig/OmhlbGxvfGhpKSQvaSxcclxuICAgICAgICAgKiAgICAgICBhR3JlZXQgPSBfLmlzU3RyaW5nKGEpICYmIHJlR3JlZXQudGVzdChhKSxcclxuICAgICAgICAgKiAgICAgICBiR3JlZXQgPSBfLmlzU3RyaW5nKGIpICYmIHJlR3JlZXQudGVzdChiKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgcmV0dXJuIChhR3JlZXQgfHwgYkdyZWV0KSA/IChhR3JlZXQgPT0gYkdyZWV0KSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzRXF1YWwoYSwgYiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VJc0VxdWFsKGEsIGIsIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nICYmIGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMsIG9yIGNhbiBiZSBjb2VyY2VkIHRvLCBhIGZpbml0ZSBudW1iZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3RlOiBUaGlzIGlzIG5vdCB0aGUgc2FtZSBhcyBuYXRpdmUgYGlzRmluaXRlYCB3aGljaCB3aWxsIHJldHVybiB0cnVlIGZvclxyXG4gICAgICAgICAqIGJvb2xlYW5zIGFuZCBlbXB0eSBzdHJpbmdzLiBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4xLjIuNS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGZpbml0ZSwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzRmluaXRlKC0xMDEpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNGaW5pdGUoJzEwJyk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0Zpbml0ZSh0cnVlKTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc0Zpbml0ZSgnJyk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNGaW5pdGUoSW5maW5pdHkpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzRmluaXRlKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuYXRpdmVJc0Zpbml0ZSh2YWx1ZSkgJiYgIW5hdGl2ZUlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNGdW5jdGlvbihfKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIGxhbmd1YWdlIHR5cGUgb2YgT2JqZWN0LlxyXG4gICAgICAgICAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNPYmplY3Qoe30pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzT2JqZWN0KDEpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSB2YWx1ZSBpcyB0aGUgRUNNQVNjcmlwdCBsYW5ndWFnZSB0eXBlIG9mIE9iamVjdFxyXG4gICAgICAgICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDhcclxuICAgICAgICAgICAgLy8gYW5kIGF2b2lkIGEgVjggYnVnXHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTFcclxuICAgICAgICAgICAgcmV0dXJuICEhKHZhbHVlICYmIG9iamVjdFR5cGVzW3R5cGVvZiB2YWx1ZV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYE5hTmAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3RlOiBUaGlzIGlzIG5vdCB0aGUgc2FtZSBhcyBuYXRpdmUgYGlzTmFOYCB3aGljaCB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yXHJcbiAgICAgICAgICogYHVuZGVmaW5lZGAgYW5kIG90aGVyIG5vbi1udW1lcmljIHZhbHVlcy4gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMS4yLjQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBgTmFOYCwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzTmFOKE5hTik7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc05hTihuZXcgTnVtYmVyKE5hTikpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGlzTmFOKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc05hTih1bmRlZmluZWQpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzTmFOKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIGBOYU5gIGFzIGEgcHJpbWl0aXZlIGlzIHRoZSBvbmx5IHZhbHVlIHRoYXQgaXMgbm90IGVxdWFsIHRvIGl0c2VsZlxyXG4gICAgICAgICAgICAvLyAocGVyZm9ybSB0aGUgW1tDbGFzc11dIGNoZWNrIGZpcnN0IHRvIGF2b2lkIGVycm9ycyB3aXRoIHNvbWUgaG9zdCBvYmplY3RzIGluIElFKVxyXG4gICAgICAgICAgICByZXR1cm4gaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlICE9ICt2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGBudWxsYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGBudWxsYCwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzTnVsbChudWxsKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzTnVsbCh1bmRlZmluZWQpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzTnVsbCh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG51bWJlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IGBOYU5gIGlzIGNvbnNpZGVyZWQgYSBudW1iZXIuIFNlZSBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDguNS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgbnVtYmVyLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNOdW1iZXIoOC40ICogNSk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc051bWJlcih2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gbnVtYmVyQ2xhc3MgfHwgZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGZ1bmN0aW9uIFNoYXBlKCkge1xyXG4gICAgICAgICAqICAgdGhpcy54ID0gMDtcclxuICAgICAgICAgKiAgIHRoaXMueSA9IDA7XHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc1BsYWluT2JqZWN0KG5ldyBTaGFwZSk7XHJcbiAgICAgICAgICogLy8gPT4gZmFsc2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGlzUGxhaW5PYmplY3QgPSAhZ2V0UHJvdG90eXBlT2YgPyBzaGltSXNQbGFpbk9iamVjdCA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoISh2YWx1ZSAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBvYmplY3RDbGFzcykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdmFsdWVPZiA9IHZhbHVlLnZhbHVlT2YsXHJcbiAgICAgICAgICAgICAgICBvYmpQcm90byA9IGlzTmF0aXZlKHZhbHVlT2YpICYmIChvYmpQcm90byA9IGdldFByb3RvdHlwZU9mKHZhbHVlT2YpKSAmJiBnZXRQcm90b3R5cGVPZihvYmpQcm90byk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb2JqUHJvdG8gPyAodmFsdWUgPT0gb2JqUHJvdG8gfHwgZ2V0UHJvdG90eXBlT2YodmFsdWUpID09IG9ialByb3RvKSA6IHNoaW1Jc1BsYWluT2JqZWN0KHZhbHVlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgcmVndWxhciBleHByZXNzaW9uLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNSZWdFeHAoL2ZyZWQvKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzUmVnRXhwKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gcmVnZXhwQ2xhc3MgfHwgZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgc3RyaW5nLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaXNTdHJpbmcoJ2ZyZWQnKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgICAgIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdDbGFzcyB8fCBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGB1bmRlZmluZWRgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYHVuZGVmaW5lZGAsIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pc1VuZGVmaW5lZCh2b2lkIDApO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUga2V5cyBhcyBgb2JqZWN0YCBhbmQgdmFsdWVzIGdlbmVyYXRlZCBieVxyXG4gICAgICAgICAqIHJ1bm5pbmcgZWFjaCBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBvZiBgb2JqZWN0YCB0aHJvdWdoIHRoZSBjYWxsYmFjay5cclxuICAgICAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xyXG4gICAgICAgICAqICh2YWx1ZSwga2V5LCBvYmplY3QpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggdmFsdWVzIG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggYGNhbGxiYWNrYCBleGVjdXRpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubWFwVmFsdWVzKHsgJ2EnOiAxLCAnYic6IDIsICdjJzogM30gLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAqIDM7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2EnOiAzLCAnYic6IDYsICdjJzogOSB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IHtcclxuICAgICAgICAgKiAgICdmcmVkJzogeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH0sXHJcbiAgICAgICAgICogICAncGViYmxlcyc6IHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxIH1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5tYXBWYWx1ZXMoY2hhcmFjdGVycywgJ2FnZScpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2ZyZWQnOiA0MCwgJ3BlYmJsZXMnOiAxIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWFwVmFsdWVzKG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcblxyXG4gICAgICAgICAgICBmb3JPd24ob2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSwgb2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVjdXJzaXZlbHkgbWVyZ2VzIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgdGhlIHNvdXJjZSBvYmplY3QocyksIHRoYXRcclxuICAgICAgICAgKiBkb24ndCByZXNvbHZlIHRvIGB1bmRlZmluZWRgIGludG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC4gU3Vic2VxdWVudCBzb3VyY2VzXHJcbiAgICAgICAgICogd2lsbCBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy4gSWYgYSBjYWxsYmFjayBpc1xyXG4gICAgICAgICAqIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGUgbWVyZ2VkIHZhbHVlcyBvZiB0aGUgZGVzdGluYXRpb25cclxuICAgICAgICAgKiBhbmQgc291cmNlIHByb3BlcnRpZXMuIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGB1bmRlZmluZWRgIG1lcmdpbmcgd2lsbFxyXG4gICAgICAgICAqIGJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxyXG4gICAgICAgICAqIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnRzOyAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlXSBUaGUgc291cmNlIG9iamVjdHMuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIG1lcmdpbmcgcHJvcGVydGllcy5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBuYW1lcyA9IHtcclxuICAgICAgICAgKiAgICdjaGFyYWN0ZXJzJzogW1xyXG4gICAgICAgICAqICAgICB7ICduYW1lJzogJ2Jhcm5leScgfSxcclxuICAgICAgICAgKiAgICAgeyAnbmFtZSc6ICdmcmVkJyB9XHJcbiAgICAgICAgICogICBdXHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBhZ2VzID0ge1xyXG4gICAgICAgICAqICAgJ2NoYXJhY3RlcnMnOiBbXHJcbiAgICAgICAgICogICAgIHsgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICAgIHsgJ2FnZSc6IDQwIH1cclxuICAgICAgICAgKiAgIF1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5tZXJnZShuYW1lcywgYWdlcyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnY2hhcmFjdGVycyc6IFt7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LCB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfV0gfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGZvb2QgPSB7XHJcbiAgICAgICAgICogICAnZnJ1aXRzJzogWydhcHBsZSddLFxyXG4gICAgICAgICAqICAgJ3ZlZ2V0YWJsZXMnOiBbJ2JlZXQnXVxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb3RoZXJGb29kID0ge1xyXG4gICAgICAgICAqICAgJ2ZydWl0cyc6IFsnYmFuYW5hJ10sXHJcbiAgICAgICAgICogICAndmVnZXRhYmxlcyc6IFsnY2Fycm90J11cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5tZXJnZShmb29kLCBvdGhlckZvb2QsIGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBfLmlzQXJyYXkoYSkgPyBhLmNvbmNhdChiKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICdmcnVpdHMnOiBbJ2FwcGxlJywgJ2JhbmFuYSddLCAndmVnZXRhYmxlcyc6IFsnYmVldCcsICdjYXJyb3RdIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWVyZ2Uob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gMjtcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhbGxvd3Mgd29ya2luZyB3aXRoIGBfLnJlZHVjZWAgYW5kIGBfLnJlZHVjZVJpZ2h0YCB3aXRob3V0IHVzaW5nXHJcbiAgICAgICAgICAgIC8vIHRoZWlyIGBpbmRleGAgYW5kIGBjb2xsZWN0aW9uYCBhcmd1bWVudHNcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzJdICE9ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcmdzLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGVuZ3RoID4gMyAmJiB0eXBlb2YgYXJnc1tsZW5ndGggLSAyXSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soYXJnc1stLWxlbmd0aCAtIDFdLCBhcmdzW2xlbmd0aC0tXSwgMik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID4gMiAmJiB0eXBlb2YgYXJnc1tsZW5ndGggLSAxXSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3NbLS1sZW5ndGhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2VzID0gc2xpY2UoYXJndW1lbnRzLCAxLCBsZW5ndGgpLFxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIHN0YWNrQSA9IGdldEFycmF5KCksXHJcbiAgICAgICAgICAgICAgICBzdGFja0IgPSBnZXRBcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZXNbaW5kZXhdLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlbGVhc2VBcnJheShzdGFja0EpO1xyXG4gICAgICAgICAgICByZWxlYXNlQXJyYXkoc3RhY2tCKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBzaGFsbG93IGNsb25lIG9mIGBvYmplY3RgIGV4Y2x1ZGluZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICogUHJvcGVydHkgbmFtZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXMgb2ZcclxuICAgICAgICAgKiBwcm9wZXJ0eSBuYW1lcy4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkIGZvciBlYWNoXHJcbiAgICAgICAgICogcHJvcGVydHkgb2YgYG9iamVjdGAgb21pdHRpbmcgdGhlIHByb3BlcnRpZXMgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXlcclxuICAgICAgICAgKiBmb3IuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XHJcbiAgICAgICAgICogKHZhbHVlLCBrZXksIG9iamVjdCkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnwuLi5zdHJpbmd8c3RyaW5nW119IFtjYWxsYmFja10gVGhlIHByb3BlcnRpZXMgdG8gb21pdCBvciB0aGVcclxuICAgICAgICAgKiAgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aG91dCB0aGUgb21pdHRlZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm9taXQoeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH0sICdhZ2UnKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ub21pdCh7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSwgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgKiAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcic7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJyB9XHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9taXQob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb3BzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBwcm9wcyA9IGJhc2VEaWZmZXJlbmNlKHByb3BzLCBiYXNlRmxhdHRlbihhcmd1bWVudHMsIHRydWUsIGZhbHNlLCAxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IG9iamVjdFtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICAgICAgZm9ySW4ob2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSwgb2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFjayh2YWx1ZSwga2V5LCBvYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSB0d28gZGltZW5zaW9uYWwgYXJyYXkgb2YgYW4gb2JqZWN0J3Mga2V5LXZhbHVlIHBhaXJzLFxyXG4gICAgICAgICAqIGkuZS4gYFtba2V5MSwgdmFsdWUxXSwgW2tleTIsIHZhbHVlMl1dYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIG5ldyBhcnJheSBvZiBrZXktdmFsdWUgcGFpcnMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucGFpcnMoeyAnYmFybmV5JzogMzYsICdmcmVkJzogNDAgfSk7XHJcbiAgICAgICAgICogLy8gPT4gW1snYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCA0MF1dIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBwYWlycyhvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBwcm9wcyA9IGtleXMob2JqZWN0KSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBba2V5LCBvYmplY3Rba2V5XV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBzaGFsbG93IGNsb25lIG9mIGBvYmplY3RgIGNvbXBvc2VkIG9mIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgKiBQcm9wZXJ0eSBuYW1lcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5cyBvZlxyXG4gICAgICAgICAqIHByb3BlcnR5IG5hbWVzLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2hcclxuICAgICAgICAgKiBwcm9wZXJ0eSBvZiBgb2JqZWN0YCBwaWNraW5nIHRoZSBwcm9wZXJ0aWVzIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5XHJcbiAgICAgICAgICogZm9yLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xyXG4gICAgICAgICAqICh2YWx1ZSwga2V5LCBvYmplY3QpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IE9iamVjdHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258Li4uc3RyaW5nfHN0cmluZ1tdfSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyXHJcbiAgICAgICAgICogIGl0ZXJhdGlvbiBvciBwcm9wZXJ0eSBuYW1lcyB0byBwaWNrLCBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBwcm9wZXJ0eVxyXG4gICAgICAgICAqICBuYW1lcyBvciBhcnJheXMgb2YgcHJvcGVydHkgbmFtZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlIHBpY2tlZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnBpY2soeyAnbmFtZSc6ICdmcmVkJywgJ191c2VyaWQnOiAnZnJlZDEnIH0sICduYW1lJyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJyB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnBpY2soeyAnbmFtZSc6ICdmcmVkJywgJ191c2VyaWQnOiAnZnJlZDEnIH0sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBrZXkuY2hhckF0KDApICE9ICdfJztcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcGljayhvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcyA9IGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgZmFsc2UsIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGlzT2JqZWN0KG9iamVjdCkgPyBwcm9wcy5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IG9iamVjdFtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXksIG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwga2V5LCBvYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFsdGVybmF0aXZlIHRvIGBfLnJlZHVjZWAgdGhpcyBtZXRob2QgdHJhbnNmb3JtcyBgb2JqZWN0YCB0byBhIG5ld1xyXG4gICAgICAgICAqIGBhY2N1bXVsYXRvcmAgb2JqZWN0IHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgcnVubmluZyBlYWNoIG9mIGl0cyBvd25cclxuICAgICAgICAgKiBlbnVtZXJhYmxlIHByb3BlcnRpZXMgdGhyb3VnaCBhIGNhbGxiYWNrLCB3aXRoIGVhY2ggY2FsbGJhY2sgZXhlY3V0aW9uXHJcbiAgICAgICAgICogcG90ZW50aWFsbHkgbXV0YXRpbmcgdGhlIGBhY2N1bXVsYXRvcmAgb2JqZWN0LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG9cclxuICAgICAgICAgKiBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czsgKGFjY3VtdWxhdG9yLCB2YWx1ZSwga2V5LCBvYmplY3QpLlxyXG4gICAgICAgICAqIENhbGxiYWNrcyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGN1c3RvbSBhY2N1bXVsYXRvciB2YWx1ZS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBzcXVhcmVzID0gXy50cmFuc2Zvcm0oWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwXSwgZnVuY3Rpb24ocmVzdWx0LCBudW0pIHtcclxuICAgICAgICAgKiAgIG51bSAqPSBudW07XHJcbiAgICAgICAgICogICBpZiAobnVtICUgMikge1xyXG4gICAgICAgICAqICAgICByZXR1cm4gcmVzdWx0LnB1c2gobnVtKSA8IDM7XHJcbiAgICAgICAgICogICB9XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDksIDI1XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIG1hcHBlZCA9IF8udHJhbnNmb3JtKHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9LCBmdW5jdGlvbihyZXN1bHQsIG51bSwga2V5KSB7XHJcbiAgICAgICAgICogICByZXN1bHRba2V5XSA9IG51bSAqIDM7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiwgJ2MnOiA5IH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdHJhbnNmb3JtKG9iamVjdCwgY2FsbGJhY2ssIGFjY3VtdWxhdG9yLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkob2JqZWN0KTtcclxuICAgICAgICAgICAgaWYgKGFjY3VtdWxhdG9yID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc0Fycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gW107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdG9yID0gb2JqZWN0ICYmIG9iamVjdC5jb25zdHJ1Y3RvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG8gPSBjdG9yICYmIGN0b3IucHJvdG90eXBlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IGJhc2VDcmVhdGUocHJvdG8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDQpO1xyXG4gICAgICAgICAgICAgICAgKGlzQXJyID8gZm9yRWFjaCA6IGZvck93bikob2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgb2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgY29tcG9zZWQgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IHZhbHVlcyBvZiBgb2JqZWN0YC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy52YWx1ZXMoeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDIsIDNdIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB2YWx1ZXMob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBvYmplY3RbcHJvcHNbaW5kZXhdXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZWxlbWVudHMgZnJvbSB0aGUgc3BlY2lmaWVkIGluZGV4ZXMsIG9yIGtleXMsIG9mIHRoZVxyXG4gICAgICAgICAqIGBjb2xsZWN0aW9uYC4gSW5kZXhlcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5c1xyXG4gICAgICAgICAqIG9mIGluZGV4ZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKG51bWJlcnxudW1iZXJbXXxzdHJpbmd8c3RyaW5nW10pfSBbaW5kZXhdIFRoZSBpbmRleGVzIG9mIGBjb2xsZWN0aW9uYFxyXG4gICAgICAgICAqICAgdG8gcmV0cmlldmUsIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGluZGV4ZXMgb3IgYXJyYXlzIG9mIGluZGV4ZXMuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIGNvcnJlc3BvbmRpbmcgdG8gdGhlXHJcbiAgICAgICAgICogIHByb3ZpZGVkIGluZGV4ZXMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uYXQoWydhJywgJ2InLCAnYycsICdkJywgJ2UnXSwgWzAsIDIsIDRdKTtcclxuICAgICAgICAgKiAvLyA9PiBbJ2EnLCAnYycsICdlJ11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uYXQoWydmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJ10sIDAsIDIpO1xyXG4gICAgICAgICAqIC8vID0+IFsnZnJlZCcsICdwZWJibGVzJ11cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYXQoY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBwcm9wcyA9IGJhc2VGbGF0dGVuKGFyZ3MsIHRydWUsIGZhbHNlLCAxKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IChhcmdzWzJdICYmIGFyZ3NbMl1bYXJnc1sxXV0gPT09IGNvbGxlY3Rpb24pID8gMSA6IHByb3BzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGNvbGxlY3Rpb25bcHJvcHNbaW5kZXhdXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgcHJlc2VudCBpbiBhIGNvbGxlY3Rpb24gdXNpbmcgc3RyaWN0IGVxdWFsaXR5XHJcbiAgICAgICAgICogZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQgaXMgdXNlZCBhcyB0aGVcclxuICAgICAgICAgKiBvZmZzZXQgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGluY2x1ZGVcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdGFyZ2V0IFRoZSB2YWx1ZSB0byBjaGVjayBmb3IuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHRhcmdldGAgZWxlbWVudCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmNvbnRhaW5zKFsxLCAyLCAzXSwgMSk7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5jb250YWlucyhbMSwgMiwgM10sIDEsIDIpO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmNvbnRhaW5zKHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9LCAnZnJlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uY29udGFpbnMoJ3BlYmJsZXMnLCAnZWInKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnRhaW5zKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZyb21JbmRleCA9IChmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KDAsIGxlbmd0aCArIGZyb21JbmRleCkgOiBmcm9tSW5kZXgpIHx8IDA7XHJcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpbmRleE9mKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSA+IC0xO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IChpc1N0cmluZyhjb2xsZWN0aW9uKSA/IGNvbGxlY3Rpb24uaW5kZXhPZih0YXJnZXQsIGZyb21JbmRleCkgOiBpbmRleE9mKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSkgPiAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKytpbmRleCA+PSBmcm9tSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEocmVzdWx0ID0gdmFsdWUgPT09IHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xyXG4gICAgICAgICAqIGVhY2ggZWxlbWVudCBvZiBgY29sbGVjdGlvbmAgdGhyb3VnaCB0aGUgY2FsbGJhY2suIFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlXHJcbiAgICAgICAgICogb2YgZWFjaCBrZXkgaXMgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUga2V5IHdhcyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2suXHJcbiAgICAgICAgICogVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcclxuICAgICAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmNvdW50QnkoWzQuMywgNi4xLCA2LjRdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIE1hdGguZmxvb3IobnVtKTsgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnNCc6IDEsICc2JzogMiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmNvdW50QnkoWzQuMywgNi4xLCA2LjRdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIHRoaXMuZmxvb3IobnVtKTsgfSwgTWF0aCk7XHJcbiAgICAgICAgICogLy8gPT4geyAnNCc6IDEsICc2JzogMiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmNvdW50QnkoWydvbmUnLCAndHdvJywgJ3RocmVlJ10sICdsZW5ndGgnKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICczJzogMiwgJzUnOiAxIH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgY291bnRCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24gKHJlc3VsdCwgdmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAoaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIGtleSkgPyByZXN1bHRba2V5XSsrIDogcmVzdWx0W2tleV0gPSAxKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBjYWxsYmFjayByZXR1cm5zIHRydWV5IHZhbHVlIGZvciAqKmFsbCoqIGVsZW1lbnRzIG9mXHJcbiAgICAgICAgICogYSBjb2xsZWN0aW9uLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcclxuICAgICAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGFsbFxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYWxsIGVsZW1lbnRzIHBhc3NlZCB0aGUgY2FsbGJhY2sgY2hlY2ssXHJcbiAgICAgICAgICogIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5ldmVyeShbdHJ1ZSwgMSwgbnVsbCwgJ3llcyddKTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmV2ZXJ5KGNoYXJhY3RlcnMsICdhZ2UnKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmV2ZXJ5KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xyXG4gICAgICAgICAqIC8vID0+IGZhbHNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV2ZXJ5KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXN1bHQgPSAhIWNhbGxiYWNrKGNvbGxlY3Rpb25baW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQgPSAhIWNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgYWxsIGVsZW1lbnRzXHJcbiAgICAgICAgICogdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkgZm9yLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxyXG4gICAgICAgICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIHNlbGVjdFxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBwYXNzZWQgdGhlIGNhbGxiYWNrIGNoZWNrLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZXZlbnMgPSBfLmZpbHRlcihbMSwgMiwgMywgNCwgNSwgNl0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICUgMiA9PSAwOyB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMiwgNCwgNl1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbHRlcihjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5maWx0ZXIoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH1dXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbHRlcihjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0XHJcbiAgICAgICAgICogdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkgZm9yLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxyXG4gICAgICAgICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGRldGVjdCwgZmluZFdoZXJlXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiBmYWxzZSB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZmluZChjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5maW5kKGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDEgfSk7XHJcbiAgICAgICAgICogLy8gPT4gIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxLCAnYmxvY2tlZCc6IGZhbHNlIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZmluZChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xyXG4gICAgICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5maW5kTGFzdChbMSwgMiwgMywgNF0sIGZ1bmN0aW9uKG51bSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIG51bSAlIDIgPT0gMTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiAzXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRMYXN0KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgZm9yRWFjaFJpZ2h0KGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYSBjb2xsZWN0aW9uLCBleGVjdXRpbmcgdGhlIGNhbGxiYWNrIGZvciBlYWNoXHJcbiAgICAgICAgICogZWxlbWVudC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcclxuICAgICAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuIENhbGxiYWNrcyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnlcclxuICAgICAgICAgKiBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogQXMgd2l0aCBvdGhlciBcIkNvbGxlY3Rpb25zXCIgbWV0aG9kcywgb2JqZWN0cyB3aXRoIGEgYGxlbmd0aGAgcHJvcGVydHlcclxuICAgICAgICAgKiBhcmUgaXRlcmF0ZWQgbGlrZSBhcnJheXMuIFRvIGF2b2lkIHRoaXMgYmVoYXZpb3IgYF8uZm9ySW5gIG9yIGBfLmZvck93bmBcclxuICAgICAgICAgKiBtYXkgYmUgdXNlZCBmb3Igb2JqZWN0IGl0ZXJhdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBhbGlhcyBlYWNoXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8oWzEsIDIsIDNdKS5mb3JFYWNoKGZ1bmN0aW9uKG51bSkgeyBjb25zb2xlLmxvZyhudW0pOyB9KS5qb2luKCcsJyk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyBlYWNoIG51bWJlciBhbmQgcmV0dXJucyAnMSwyLDMnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZvckVhY2goeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSwgZnVuY3Rpb24obnVtKSB7IGNvbnNvbGUubG9nKG51bSk7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IGxvZ3MgZWFjaCBudW1iZXIgYW5kIHJldHVybnMgdGhlIG9iamVjdCAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZm9yRWFjaChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9yRWFjaGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xyXG4gICAgICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBhbGlhcyBlYWNoUmlnaHRcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXyhbMSwgMiwgM10pLmZvckVhY2hSaWdodChmdW5jdGlvbihudW0pIHsgY29uc29sZS5sb2cobnVtKTsgfSkuam9pbignLCcpO1xyXG4gICAgICAgICAqIC8vID0+IGxvZ3MgZWFjaCBudW1iZXIgZnJvbSByaWdodCB0byBsZWZ0IGFuZCByZXR1cm5zICczLDIsMSdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZm9yRWFjaFJpZ2h0KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGNvbGxlY3Rpb25bbGVuZ3RoXSwgbGVuZ3RoLCBjb2xsZWN0aW9uKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb3BzID0ga2V5cyhjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IHByb3BzID8gcHJvcHNbLS1sZW5ndGhdIDogLS1sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGNvbGxlY3Rpb25ba2V5XSwga2V5LCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXHJcbiAgICAgICAgICogZWFjaCBlbGVtZW50IG9mIGEgY29sbGVjdGlvbiB0aHJvdWdoIHRoZSBjYWxsYmFjay4gVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVcclxuICAgICAgICAgKiBvZiBlYWNoIGtleSBpcyBhbiBhcnJheSBvZiB0aGUgZWxlbWVudHMgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgdGhlIGtleS5cclxuICAgICAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xyXG4gICAgICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29tcG9zZWQgYWdncmVnYXRlIG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5ncm91cEJ5KFs0LjIsIDYuMSwgNi40XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBNYXRoLmZsb29yKG51bSk7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJzQnOiBbNC4yXSwgJzYnOiBbNi4xLCA2LjRdIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZ3JvdXBCeShbNC4yLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gdGhpcy5mbG9vcihudW0pOyB9LCBNYXRoKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICc0JzogWzQuMl0sICc2JzogWzYuMSwgNi40XSB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmdyb3VwQnkoWydvbmUnLCAndHdvJywgJ3RocmVlJ10sICdsZW5ndGgnKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICczJzogWydvbmUnLCAndHdvJ10sICc1JzogWyd0aHJlZSddIH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgZ3JvdXBCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24gKHJlc3VsdCwgdmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAoaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIGtleSkgPyByZXN1bHRba2V5XSA6IHJlc3VsdFtrZXldID0gW10pLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcclxuICAgICAgICAgKiBlYWNoIGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gdGhyb3VnaCB0aGUgZ2l2ZW4gY2FsbGJhY2suIFRoZSBjb3JyZXNwb25kaW5nXHJcbiAgICAgICAgICogdmFsdWUgb2YgZWFjaCBrZXkgaXMgdGhlIGxhc3QgZWxlbWVudCByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGUga2V5LlxyXG4gICAgICAgICAqIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XHJcbiAgICAgICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29tcG9zZWQgYWdncmVnYXRlIG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGtleXMgPSBbXHJcbiAgICAgICAgICogICB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSxcclxuICAgICAgICAgKiAgIHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbmRleEJ5KGtleXMsICdkaXInKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICdsZWZ0JzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdyaWdodCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbmRleEJ5KGtleXMsIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShrZXkuY29kZSk7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2EnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ2QnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaW5kZXhCeShjaGFyYWN0ZXJzLCBmdW5jdGlvbihrZXkpIHsgdGhpcy5mcm9tQ2hhckNvZGUoa2V5LmNvZGUpOyB9LCBTdHJpbmcpO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2EnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ2QnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgaW5kZXhCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24gKHJlc3VsdCwgdmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbnZva2VzIHRoZSBtZXRob2QgbmFtZWQgYnkgYG1ldGhvZE5hbWVgIG9uIGVhY2ggZWxlbWVudCBpbiB0aGUgYGNvbGxlY3Rpb25gXHJcbiAgICAgICAgICogcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggaW52b2tlZCBtZXRob2QuIEFkZGl0aW9uYWwgYXJndW1lbnRzXHJcbiAgICAgICAgICogd2lsbCBiZSBwcm92aWRlZCB0byBlYWNoIGludm9rZWQgbWV0aG9kLiBJZiBgbWV0aG9kTmFtZWAgaXMgYSBmdW5jdGlvbiBpdFxyXG4gICAgICAgICAqIHdpbGwgYmUgaW52b2tlZCBmb3IsIGFuZCBgdGhpc2AgYm91bmQgdG8sIGVhY2ggZWxlbWVudCBpbiB0aGUgYGNvbGxlY3Rpb25gLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gbWV0aG9kTmFtZSBUaGUgbmFtZSBvZiB0aGUgbWV0aG9kIHRvIGludm9rZSBvclxyXG4gICAgICAgICAqICB0aGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGludm9rZSB0aGUgbWV0aG9kIHdpdGguXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggaW52b2tlZCBtZXRob2QuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaW52b2tlKFtbNSwgMSwgN10sIFszLCAyLCAxXV0sICdzb3J0Jyk7XHJcbiAgICAgICAgICogLy8gPT4gW1sxLCA1LCA3XSwgWzEsIDIsIDNdXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbnZva2UoWzEyMywgNDU2XSwgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCwgJycpO1xyXG4gICAgICAgICAqIC8vID0+IFtbJzEnLCAnMicsICczJ10sIFsnNCcsICc1JywgJzYnXV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW52b2tlKGNvbGxlY3Rpb24sIG1ldGhvZE5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShhcmd1bWVudHMsIDIpLFxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGlzRnVuYyA9IHR5cGVvZiBtZXRob2ROYW1lID09ICdmdW5jdGlvbicsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyA/IGxlbmd0aCA6IDApO1xyXG5cclxuICAgICAgICAgICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFsrK2luZGV4XSA9IChpc0Z1bmMgPyBtZXRob2ROYW1lIDogdmFsdWVbbWV0aG9kTmFtZV0pLmFwcGx5KHZhbHVlLCBhcmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHZhbHVlcyBieSBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiB0aGUgY29sbGVjdGlvblxyXG4gICAgICAgICAqIHRocm91Z2ggdGhlIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGhcclxuICAgICAgICAgKiB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGNvbGxlY3RcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggYGNhbGxiYWNrYCBleGVjdXRpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubWFwKFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gKiAzOyB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMywgNiwgOV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubWFwKHsgJ29uZSc6IDEsICd0d28nOiAyLCAndGhyZWUnOiAzIH0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICogMzsgfSk7XHJcbiAgICAgICAgICogLy8gPT4gWzMsIDYsIDldIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLm1hcChjaGFyYWN0ZXJzLCAnbmFtZScpO1xyXG4gICAgICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBtYXAoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBjYWxsYmFjayhjb2xsZWN0aW9uW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbKytpbmRleF0gPSBjYWxsYmFjayh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXRyaWV2ZXMgdGhlIG1heGltdW0gdmFsdWUgb2YgYSBjb2xsZWN0aW9uLiBJZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eSBvclxyXG4gICAgICAgICAqIGZhbHNleSBgLUluZmluaXR5YCBpcyByZXR1cm5lZC4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkXHJcbiAgICAgICAgICogZm9yIGVhY2ggdmFsdWUgaW4gdGhlIGNvbGxlY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaCB0aGUgdmFsdWVcclxuICAgICAgICAgKiBpcyByYW5rZWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxyXG4gICAgICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF4aW11bSB2YWx1ZS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5tYXgoWzQsIDIsIDgsIDZdKTtcclxuICAgICAgICAgKiAvLyA9PiA4XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubWF4KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikgeyByZXR1cm4gY2hyLmFnZTsgfSk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLm1heChjaGFyYWN0ZXJzLCAnYWdlJyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH07XHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1heChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgY29tcHV0ZWQgPSAtSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjb21wdXRlZDtcclxuXHJcbiAgICAgICAgICAgIC8vIGFsbG93cyB3b3JraW5nIHdpdGggZnVuY3Rpb25zIGxpa2UgYF8ubWFwYCB3aXRob3V0IHVzaW5nXHJcbiAgICAgICAgICAgIC8vIHRoZWlyIGBpbmRleGAgYXJndW1lbnQgYXMgYSBjYWxsYmFja1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicgJiYgdGhpc0FyZyAmJiB0aGlzQXJnW2NhbGxiYWNrXSA9PT0gY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsICYmIGlzQXJyYXkoY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gKGNhbGxiYWNrID09IG51bGwgJiYgaXNTdHJpbmcoY29sbGVjdGlvbikpID8gY2hhckF0Q2FsbGJhY2sgOiBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA+IGNvbXB1dGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkID0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHJpZXZlcyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhIGNvbGxlY3Rpb24uIElmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5IG9yXHJcbiAgICAgICAgICogZmFsc2V5IGBJbmZpbml0eWAgaXMgcmV0dXJuZWQuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZFxyXG4gICAgICAgICAqIGZvciBlYWNoIHZhbHVlIGluIHRoZSBjb2xsZWN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnkgd2hpY2ggdGhlIHZhbHVlXHJcbiAgICAgICAgICogaXMgcmFua2VkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcclxuICAgICAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1pbmltdW0gdmFsdWUuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubWluKFs0LCAyLCA4LCA2XSk7XHJcbiAgICAgICAgICogLy8gPT4gMlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm1pbihjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHsgcmV0dXJuIGNoci5hZ2U7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLm1pbihjaGFyYWN0ZXJzLCAnYWdlJyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfTtcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWluKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wdXRlZCA9IEluZmluaXR5LFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY29tcHV0ZWQ7XHJcblxyXG4gICAgICAgICAgICAvLyBhbGxvd3Mgd29ya2luZyB3aXRoIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAgd2l0aG91dCB1c2luZ1xyXG4gICAgICAgICAgICAvLyB0aGVpciBgaW5kZXhgIGFyZ3VtZW50IGFzIGEgY2FsbGJhY2tcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgJiYgdGhpc0FyZ1tjYWxsYmFja10gPT09IGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbCAmJiBpc0FycmF5KGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IChjYWxsYmFjayA9PSBudWxsICYmIGlzU3RyaW5nKGNvbGxlY3Rpb24pKSA/IGNoYXJBdENhbGxiYWNrIDogbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPCBjb21wdXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZCA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWVkIHByb3BlcnR5IGZyb20gYWxsIGVsZW1lbnRzIGluIHRoZSBjb2xsZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcGx1Y2suXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnBsdWNrKGNoYXJhY3RlcnMsICduYW1lJyk7XHJcbiAgICAgICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHBsdWNrID0gbWFwO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWR1Y2VzIGEgY29sbGVjdGlvbiB0byBhIHZhbHVlIHdoaWNoIGlzIHRoZSBhY2N1bXVsYXRlZCByZXN1bHQgb2YgcnVubmluZ1xyXG4gICAgICAgICAqIGVhY2ggZWxlbWVudCBpbiB0aGUgY29sbGVjdGlvbiB0aHJvdWdoIHRoZSBjYWxsYmFjaywgd2hlcmUgZWFjaCBzdWNjZXNzaXZlXHJcbiAgICAgICAgICogY2FsbGJhY2sgZXhlY3V0aW9uIGNvbnN1bWVzIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHByZXZpb3VzIGV4ZWN1dGlvbi4gSWZcclxuICAgICAgICAgKiBgYWNjdW11bGF0b3JgIGlzIG5vdCBwcm92aWRlZCB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgY29sbGVjdGlvbiB3aWxsIGJlXHJcbiAgICAgICAgICogdXNlZCBhcyB0aGUgaW5pdGlhbCBgYWNjdW11bGF0b3JgIHZhbHVlLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgXHJcbiAgICAgICAgICogYW5kIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czsgKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBhbGlhcyBmb2xkbCwgaW5qZWN0XHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gSW5pdGlhbCB2YWx1ZSBvZiB0aGUgYWNjdW11bGF0b3IuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgc3VtID0gXy5yZWR1Y2UoWzEsIDIsIDNdLCBmdW5jdGlvbihzdW0sIG51bSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIHN1bSArIG51bTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiA2XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgbWFwcGVkID0gXy5yZWR1Y2UoeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH0sIGZ1bmN0aW9uKHJlc3VsdCwgbnVtLCBrZXkpIHtcclxuICAgICAgICAgKiAgIHJlc3VsdFtrZXldID0gbnVtICogMztcclxuICAgICAgICAgKiAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICogfSwge30pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2EnOiAzLCAnYic6IDYsICdjJzogOSB9XHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlZHVjZShjb2xsZWN0aW9uLCBjYWxsYmFjaywgYWNjdW11bGF0b3IsIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgaWYgKCFjb2xsZWN0aW9uKSByZXR1cm4gYWNjdW11bGF0b3I7XHJcbiAgICAgICAgICAgIHZhciBub2FjY3VtID0gYXJndW1lbnRzLmxlbmd0aCA8IDM7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCA0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vYWNjdW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IGNvbGxlY3Rpb25bKytpbmRleF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gY2FsbGJhY2soYWNjdW11bGF0b3IsIGNvbGxlY3Rpb25baW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gbm9hY2N1bSA/IChub2FjY3VtID0gZmFsc2UsIHZhbHVlKSA6IGNhbGxiYWNrKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnJlZHVjZWAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xyXG4gICAgICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBhbGlhcyBmb2xkclxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIEluaXRpYWwgdmFsdWUgb2YgdGhlIGFjY3VtdWxhdG9yLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGxpc3QgPSBbWzAsIDFdLCBbMiwgM10sIFs0LCA1XV07XHJcbiAgICAgICAgICogdmFyIGZsYXQgPSBfLnJlZHVjZVJpZ2h0KGxpc3QsIGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEuY29uY2F0KGIpOyB9LCBbXSk7XHJcbiAgICAgICAgICogLy8gPT4gWzQsIDUsIDIsIDMsIDAsIDFdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlZHVjZVJpZ2h0KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCBhY2N1bXVsYXRvciwgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgbm9hY2N1bSA9IGFyZ3VtZW50cy5sZW5ndGggPCAzO1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgNCk7XHJcbiAgICAgICAgICAgIGZvckVhY2hSaWdodChjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IG5vYWNjdW0gPyAobm9hY2N1bSA9IGZhbHNlLCB2YWx1ZSkgOiBjYWxsYmFjayhhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5maWx0ZXJgIHRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIGFcclxuICAgICAgICAgKiBjb2xsZWN0aW9uIHRoYXQgdGhlIGNhbGxiYWNrIGRvZXMgKipub3QqKiByZXR1cm4gdHJ1ZXkgZm9yLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgZmFpbGVkIHRoZSBjYWxsYmFjayBjaGVjay5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIG9kZHMgPSBfLnJlamVjdChbMSwgMiwgMywgNCwgNSwgNl0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICUgMiA9PSAwOyB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMywgNV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnJlamVjdChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5yZWplY3QoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1dXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXIoY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHJpZXZlcyBhIHJhbmRvbSBlbGVtZW50IG9yIGBuYCByYW5kb20gZWxlbWVudHMgZnJvbSBhIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2FtcGxlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBzYW1wbGUuXHJcbiAgICAgICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEFsbG93cyB3b3JraW5nIHdpdGggZnVuY3Rpb25zIGxpa2UgYF8ubWFwYFxyXG4gICAgICAgICAqICB3aXRob3V0IHVzaW5nIHRoZWlyIGBpbmRleGAgYXJndW1lbnRzIGFzIGBuYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHJhbmRvbSBzYW1wbGUocykgb2YgYGNvbGxlY3Rpb25gLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNhbXBsZShbMSwgMiwgMywgNF0pO1xyXG4gICAgICAgICAqIC8vID0+IDJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc2FtcGxlKFsxLCAyLCAzLCA0XSwgMik7XHJcbiAgICAgICAgICogLy8gPT4gWzMsIDFdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhbXBsZShjb2xsZWN0aW9uLCBuLCBndWFyZCkge1xyXG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbiAmJiB0eXBlb2YgY29sbGVjdGlvbi5sZW5ndGggIT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSB2YWx1ZXMoY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uW2Jhc2VSYW5kb20oMCwgY29sbGVjdGlvbi5sZW5ndGggLSAxKV0gOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHNodWZmbGUoY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgIHJlc3VsdC5sZW5ndGggPSBuYXRpdmVNaW4obmF0aXZlTWF4KDAsIG4pLCByZXN1bHQubGVuZ3RoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2Ygc2h1ZmZsZWQgdmFsdWVzLCB1c2luZyBhIHZlcnNpb24gb2YgdGhlIEZpc2hlci1ZYXRlc1xyXG4gICAgICAgICAqIHNodWZmbGUuIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlci1ZYXRlc19zaHVmZmxlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNodWZmbGUuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IHNodWZmbGVkIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc2h1ZmZsZShbMSwgMiwgMywgNCwgNSwgNl0pO1xyXG4gICAgICAgICAqIC8vID0+IFs0LCAxLCA2LCAzLCA1LCAyXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzaHVmZmxlKGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyA/IGxlbmd0aCA6IDApO1xyXG5cclxuICAgICAgICAgICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciByYW5kID0gYmFzZVJhbmRvbSgwLCArK2luZGV4KTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSByZXN1bHRbcmFuZF07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbcmFuZF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBzaXplIG9mIHRoZSBgY29sbGVjdGlvbmAgYnkgcmV0dXJuaW5nIGBjb2xsZWN0aW9uLmxlbmd0aGAgZm9yIGFycmF5c1xyXG4gICAgICAgICAqIGFuZCBhcnJheS1saWtlIG9iamVjdHMgb3IgdGhlIG51bWJlciBvZiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGZvciBvYmplY3RzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgY29sbGVjdGlvbi5sZW5ndGhgIG9yIG51bWJlciBvZiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNpemUoWzEsIDJdKTtcclxuICAgICAgICAgKiAvLyA9PiAyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNpemUoeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSk7XHJcbiAgICAgICAgICogLy8gPT4gM1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5zaXplKCdwZWJibGVzJyk7XHJcbiAgICAgICAgICogLy8gPT4gN1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzaXplKGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInID8gbGVuZ3RoIDoga2V5cyhjb2xsZWN0aW9uKS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSB0cnVleSB2YWx1ZSBmb3IgKiphbnkqKiBlbGVtZW50IG9mIGFcclxuICAgICAgICAgKiBjb2xsZWN0aW9uLiBUaGUgZnVuY3Rpb24gcmV0dXJucyBhcyBzb29uIGFzIGl0IGZpbmRzIGEgcGFzc2luZyB2YWx1ZSBhbmRcclxuICAgICAgICAgKiBkb2VzIG5vdCBpdGVyYXRlIG92ZXIgdGhlIGVudGlyZSBjb2xsZWN0aW9uLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG9cclxuICAgICAgICAgKiBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGFueVxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VkIHRoZSBjYWxsYmFjayBjaGVjayxcclxuICAgICAgICAgKiAgZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNvbWUoW251bGwsIDAsICd5ZXMnLCBmYWxzZV0sIEJvb2xlYW4pO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnNvbWUoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcclxuICAgICAgICAgKiAvLyA9PiB0cnVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnNvbWUoY2hhcmFjdGVycywgeyAnYWdlJzogMSB9KTtcclxuICAgICAgICAgKiAvLyA9PiBmYWxzZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzb21lKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocmVzdWx0ID0gY2FsbGJhY2soY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShyZXN1bHQgPSBjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAhIXJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZWxlbWVudHMsIHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIgYnkgdGhlIHJlc3VsdHMgb2ZcclxuICAgICAgICAgKiBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24gdGhyb3VnaCB0aGUgY2FsbGJhY2suIFRoaXMgbWV0aG9kXHJcbiAgICAgICAgICogcGVyZm9ybXMgYSBzdGFibGUgc29ydCwgdGhhdCBpcywgaXQgd2lsbCBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgc29ydCBvcmRlclxyXG4gICAgICAgICAqIG9mIGVxdWFsIGVsZW1lbnRzLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGhcclxuICAgICAgICAgKiB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgICogd2lsbCBiZSBzb3J0ZWQgYnkgZWFjaCBwcm9wZXJ0eSB2YWx1ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxyXG4gICAgICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBzb3J0ZWQgZWxlbWVudHMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc29ydEJ5KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBNYXRoLnNpbihudW0pOyB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMywgMSwgMl1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uc29ydEJ5KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiB0aGlzLnNpbihudW0pOyB9LCBNYXRoKTtcclxuICAgICAgICAgKiAvLyA9PiBbMywgMSwgMl1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAyNiB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDMwIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5tYXAoXy5zb3J0QnkoY2hhcmFjdGVycywgJ2FnZScpLCBfLnZhbHVlcyk7XHJcbiAgICAgICAgICogLy8gPT4gW1snYmFybmV5JywgMjZdLCBbJ2ZyZWQnLCAzMF0sIFsnYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCA0MF1dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyBzb3J0aW5nIGJ5IG11bHRpcGxlIHByb3BlcnRpZXNcclxuICAgICAgICAgKiBfLm1hcChfLnNvcnRCeShjaGFyYWN0ZXJzLCBbJ25hbWUnLCAnYWdlJ10pLCBfLnZhbHVlcyk7XHJcbiAgICAgICAgICogLy8gPSA+IFtbJ2Jhcm5leScsIDI2XSwgWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDMwXSwgWydmcmVkJywgNDBdXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzb3J0QnkoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBpc0FyciA9IGlzQXJyYXkoY2FsbGJhY2spLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEFycmF5KHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgPyBsZW5ndGggOiAwKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNBcnIpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gcmVzdWx0WysraW5kZXhdID0gZ2V0T2JqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuY3JpdGVyaWEgPSBtYXAoY2FsbGJhY2ssIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIChvYmplY3QuY3JpdGVyaWEgPSBnZXRBcnJheSgpKVswXSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXN1bHQuc29ydChjb21wYXJlQXNjZW5kaW5nKTtcclxuICAgICAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gcmVzdWx0W2xlbmd0aF07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbbGVuZ3RoXSA9IG9iamVjdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmICghaXNBcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWxlYXNlQXJyYXkob2JqZWN0LmNyaXRlcmlhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlbGVhc2VPYmplY3Qob2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udmVydHMgdGhlIGBjb2xsZWN0aW9uYCB0byBhbiBhcnJheS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBjb252ZXJ0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGNvbnZlcnRlZCBhcnJheS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogKGZ1bmN0aW9uKCkgeyByZXR1cm4gXy50b0FycmF5KGFyZ3VtZW50cykuc2xpY2UoMSk7IH0pKDEsIDIsIDMsIDQpO1xyXG4gICAgICAgICAqIC8vID0+IFsyLCAzLCA0XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB0b0FycmF5KGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb24gJiYgdHlwZW9mIGNvbGxlY3Rpb24ubGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2UoY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcyhjb2xsZWN0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIG9mIGVhY2ggZWxlbWVudCBpbiBhIGBjb2xsZWN0aW9uYCB0byB0aGUgZ2l2ZW5cclxuICAgICAgICAgKiBgcHJvcGVydGllc2Agb2JqZWN0LCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgYWxsIGVsZW1lbnRzIHRoYXQgaGF2ZSBlcXVpdmFsZW50XHJcbiAgICAgICAgICogcHJvcGVydHkgdmFsdWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBmaWx0ZXIgYnkuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgZ2l2ZW4gcHJvcGVydGllcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ3BldHMnOiBbJ2hvcHB5J10gfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAncGV0cyc6IFsnYmFieSBwdXNzJywgJ2Rpbm8nXSB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ud2hlcmUoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAncGV0cyc6IFsnaG9wcHknXSB9XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy53aGVyZShjaGFyYWN0ZXJzLCB7ICdwZXRzJzogWydkaW5vJ10gfSk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ3BldHMnOiBbJ2JhYnkgcHVzcycsICdkaW5vJ10gfV1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgd2hlcmUgPSBmaWx0ZXI7XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGZhbHNleSB2YWx1ZXMgcmVtb3ZlZC4gVGhlIHZhbHVlcyBgZmFsc2VgLCBgbnVsbGAsXHJcbiAgICAgICAgICogYDBgLCBgXCJcImAsIGB1bmRlZmluZWRgLCBhbmQgYE5hTmAgYXJlIGFsbCBmYWxzZXkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5jb21wYWN0KFswLCAxLCBmYWxzZSwgMiwgJycsIDNdKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMiwgM11cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY29tcGFjdChhcnJheSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBleGNsdWRpbmcgYWxsIHZhbHVlcyBvZiB0aGUgcHJvdmlkZWQgYXJyYXlzIHVzaW5nIHN0cmljdFxyXG4gICAgICAgICAqIGVxdWFsaXR5IGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbdmFsdWVzXSBUaGUgYXJyYXlzIG9mIHZhbHVlcyB0byBleGNsdWRlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZGlmZmVyZW5jZShbMSwgMiwgMywgNCwgNV0sIFs1LCAyLCAxMF0pO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAzLCA0XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkaWZmZXJlbmNlKGFycmF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlRGlmZmVyZW5jZShhcnJheSwgYmFzZUZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlLCAxKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdFxyXG4gICAgICAgICAqIGVsZW1lbnQgdGhhdCBwYXNzZXMgdGhlIGNhbGxiYWNrIGNoZWNrLCBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgLTFgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiBmYWxzZSB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZmluZEluZGV4KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikge1xyXG4gICAgICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCAyMDtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiAyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbmRJbmRleChjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcclxuICAgICAgICAgKiAvLyA9PiAwXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpbmRJbmRleChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IDFcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kSW5kZXhgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcclxuICAgICAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMzYsICdibG9ja2VkJzogdHJ1ZSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IGZhbHNlIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSwgICdibG9ja2VkJzogdHJ1ZSB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZmluZExhc3RJbmRleChjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBjaHIuYWdlID4gMzA7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gMVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5maW5kTGFzdEluZGV4KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xyXG4gICAgICAgICAqIC8vID0+IDBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uZmluZExhc3RJbmRleChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IDJcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZExhc3RJbmRleChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhhcnJheVtsZW5ndGhdLCBsZW5ndGgsIGFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgZmlyc3QgZWxlbWVudCBvciBmaXJzdCBgbmAgZWxlbWVudHMgb2YgYW4gYXJyYXkuIElmIGEgY2FsbGJhY2tcclxuICAgICAgICAgKiBpcyBwcm92aWRlZCBlbGVtZW50cyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheSBhcmUgcmV0dXJuZWQgYXMgbG9uZ1xyXG4gICAgICAgICAqIGFzIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxyXG4gICAgICAgICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIGhlYWQsIHRha2VcclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fG51bWJlcnxzdHJpbmd9IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIGNhbGxlZFxyXG4gICAgICAgICAqICBwZXIgZWxlbWVudCBvciB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yXHJcbiAgICAgICAgICogIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCJcclxuICAgICAgICAgKiAgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudChzKSBvZiBgYXJyYXlgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZpcnN0KFsxLCAyLCAzXSk7XHJcbiAgICAgICAgICogLy8gPT4gMVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5maXJzdChbMSwgMiwgM10sIDIpO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5maXJzdChbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIG51bSA8IDM7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDJdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICdzbGF0ZScgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdibG9ja2VkJzogZmFsc2UsICdlbXBsb3llcic6ICdzbGF0ZScgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICduYScgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLmZpcnN0KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2Jsb2NrZWQnOiB0cnVlLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnBsdWNrKF8uZmlyc3QoY2hhcmFjdGVycywgeyAnZW1wbG95ZXInOiAnc2xhdGUnIH0pLCAnbmFtZScpO1xyXG4gICAgICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaXJzdChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSAwLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnbnVtYmVyJyAmJiBjYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAtMTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIGNhbGxiYWNrKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4rKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG4gPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgIGlmIChuID09IG51bGwgfHwgdGhpc0FyZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheSA/IGFycmF5WzBdIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzbGljZShhcnJheSwgMCwgbmF0aXZlTWluKG5hdGl2ZU1heCgwLCBuKSwgbGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGbGF0dGVucyBhIG5lc3RlZCBhcnJheSAodGhlIG5lc3RpbmcgY2FuIGJlIHRvIGFueSBkZXB0aCkuIElmIGBpc1NoYWxsb3dgXHJcbiAgICAgICAgICogaXMgdHJ1ZXksIHRoZSBhcnJheSB3aWxsIG9ubHkgYmUgZmxhdHRlbmVkIGEgc2luZ2xlIGxldmVsLiBJZiBhIGNhbGxiYWNrXHJcbiAgICAgICAgICogaXMgcHJvdmlkZWQgZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBpcyBwYXNzZWQgdGhyb3VnaCB0aGUgY2FsbGJhY2sgYmVmb3JlXHJcbiAgICAgICAgICogZmxhdHRlbmluZy4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXHJcbiAgICAgICAgICogYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmxhdHRlbi5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NoYWxsb3c9ZmFsc2VdIEEgZmxhZyB0byByZXN0cmljdCBmbGF0dGVuaW5nIHRvIGEgc2luZ2xlIGxldmVsLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGZsYXR0ZW5lZCBhcnJheS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5mbGF0dGVuKFsxLCBbMl0sIFszLCBbWzRdXV1dKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMiwgMywgNF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZsYXR0ZW4oWzEsIFsyXSwgWzMsIFtbNF1dXV0sIHRydWUpO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyLCAzLCBbWzRdXV07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDMwLCAncGV0cyc6IFsnaG9wcHknXSB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdwZXRzJzogWydiYWJ5IHB1c3MnLCAnZGlubyddIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5mbGF0dGVuKGNoYXJhY3RlcnMsICdwZXRzJyk7XHJcbiAgICAgICAgICogLy8gPT4gWydob3BweScsICdiYWJ5IHB1c3MnLCAnZGlubyddXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXksIGlzU2hhbGxvdywgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgLy8ganVnZ2xlIGFyZ3VtZW50c1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzU2hhbGxvdyAhPSAnYm9vbGVhbicgJiYgaXNTaGFsbG93ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNBcmcgPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gKHR5cGVvZiBpc1NoYWxsb3cgIT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnICYmIHRoaXNBcmdbaXNTaGFsbG93XSA9PT0gYXJyYXkpID8gbnVsbCA6IGlzU2hhbGxvdztcclxuICAgICAgICAgICAgICAgIGlzU2hhbGxvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheSA9IG1hcChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlRmxhdHRlbihhcnJheSwgaXNTaGFsbG93KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGB2YWx1ZWAgaXMgZm91bmQgdXNpbmdcclxuICAgICAgICAgKiBzdHJpY3QgZXF1YWxpdHkgZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLiBJZiB0aGUgYXJyYXkgaXMgYWxyZWFkeSBzb3J0ZWRcclxuICAgICAgICAgKiBwcm92aWRpbmcgYHRydWVgIGZvciBgZnJvbUluZGV4YCB3aWxsIHJ1biBhIGZhc3RlciBiaW5hcnkgc2VhcmNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbSBvciBgdHJ1ZWBcclxuICAgICAgICAgKiAgdG8gcGVyZm9ybSBhIGJpbmFyeSBzZWFyY2ggb24gYSBzb3J0ZWQgYXJyYXkuXHJcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUgb3IgYC0xYC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbmRleE9mKFsxLCAyLCAzLCAxLCAyLCAzXSwgMik7XHJcbiAgICAgICAgICogLy8gPT4gMVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbmRleE9mKFsxLCAyLCAzLCAxLCAyLCAzXSwgMiwgMyk7XHJcbiAgICAgICAgICogLy8gPT4gNFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbmRleE9mKFsxLCAxLCAyLCAyLCAzLCAzXSwgMiwgdHJ1ZSk7XHJcbiAgICAgICAgICogLy8gPT4gMlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xyXG4gICAgICAgICAgICAgICAgZnJvbUluZGV4ID0gKGZyb21JbmRleCA8IDAgPyBuYXRpdmVNYXgoMCwgbGVuZ3RoICsgZnJvbUluZGV4KSA6IGZyb21JbmRleCB8fCAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmcm9tSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHNvcnRlZEluZGV4KGFycmF5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlbaW5kZXhdID09PSB2YWx1ZSA/IGluZGV4IDogLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgYWxsIGJ1dCB0aGUgbGFzdCBlbGVtZW50IG9yIGxhc3QgYG5gIGVsZW1lbnRzIG9mIGFuIGFycmF5LiBJZiBhXHJcbiAgICAgICAgICogY2FsbGJhY2sgaXMgcHJvdmlkZWQgZWxlbWVudHMgYXQgdGhlIGVuZCBvZiB0aGUgYXJyYXkgYXJlIGV4Y2x1ZGVkIGZyb21cclxuICAgICAgICAgKiB0aGUgcmVzdWx0IGFzIGxvbmcgYXMgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkuIFRoZSBjYWxsYmFjayBpcyBib3VuZFxyXG4gICAgICAgICAqIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fG51bWJlcnxzdHJpbmd9IFtjYWxsYmFjaz0xXSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBlbGVtZW50IG9yIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZXhjbHVkZS4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yXHJcbiAgICAgICAgICogIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCJcclxuICAgICAgICAgKiAgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBzbGljZSBvZiBgYXJyYXlgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmluaXRpYWwoWzEsIDIsIDNdKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMl1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uaW5pdGlhbChbMSwgMiwgM10sIDIpO1xyXG4gICAgICAgICAqIC8vID0+IFsxXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5pbml0aWFsKFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gbnVtID4gMTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiBbMV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2Jsb2NrZWQnOiBmYWxzZSwgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ25hJyB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uaW5pdGlhbChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICAnYmxvY2tlZCc6IGZhbHNlLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnBsdWNrKF8uaW5pdGlhbChjaGFyYWN0ZXJzLCB7ICdlbXBsb3llcic6ICduYScgfSksICduYW1lJyk7XHJcbiAgICAgICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWwoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBuID0gMCxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ251bWJlcicgJiYgY2FsbGJhY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGluZGV4LS0gJiYgY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbiA9IChjYWxsYmFjayA9PSBudWxsIHx8IHRoaXNBcmcpID8gMSA6IGNhbGxiYWNrIHx8IG47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNsaWNlKGFycmF5LCAwLCBuYXRpdmVNaW4obmF0aXZlTWF4KDAsIGxlbmd0aCAtIG4pLCBsZW5ndGgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdW5pcXVlIHZhbHVlcyBwcmVzZW50IGluIGFsbCBwcm92aWRlZCBhcnJheXMgdXNpbmdcclxuICAgICAgICAgKiBzdHJpY3QgZXF1YWxpdHkgZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheV0gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBzaGFyZWQgdmFsdWVzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmludGVyc2VjdGlvbihbMSwgMiwgM10sIFs1LCAyLCAxLCA0XSwgWzIsIDFdKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMl1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW50ZXJzZWN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdLFxyXG4gICAgICAgICAgICAgICAgYXJnc0luZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGNhY2hlcyA9IGdldEFycmF5KCksXHJcbiAgICAgICAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxyXG4gICAgICAgICAgICAgICAgdHJ1c3RJbmRleE9mID0gaW5kZXhPZiA9PT0gYmFzZUluZGV4T2YsXHJcbiAgICAgICAgICAgICAgICBzZWVuID0gZ2V0QXJyYXkoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1thcmdzSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVzLnB1c2godHJ1c3RJbmRleE9mICYmIHZhbHVlLmxlbmd0aCA+PSBsYXJnZUFycmF5U2l6ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVDYWNoZShhcmdzSW5kZXggPyBhcmdzW2FyZ3NJbmRleF0gOiBzZWVuKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGFycmF5ID0gYXJnc1swXSxcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIG91dGVyOiB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlID0gY2FjaGVzWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBhcnJheVtpbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKChjYWNoZSA/IGNhY2hlSW5kZXhPZihjYWNoZSwgdmFsdWUpIDogaW5kZXhPZihzZWVuLCB2YWx1ZSkpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NJbmRleCA9IGFyZ3NMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgKGNhY2hlIHx8IHNlZW4pLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgtLWFyZ3NJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZSA9IGNhY2hlc1thcmdzSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNhY2hlID8gY2FjaGVJbmRleE9mKGNhY2hlLCB2YWx1ZSkgOiBpbmRleE9mKGFyZ3NbYXJnc0luZGV4XSwgdmFsdWUpKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoYXJnc0xlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICBjYWNoZSA9IGNhY2hlc1thcmdzTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbGVhc2VPYmplY3QoY2FjaGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlbGVhc2VBcnJheShjYWNoZXMpO1xyXG4gICAgICAgICAgICByZWxlYXNlQXJyYXkoc2Vlbik7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBsYXN0IGVsZW1lbnQgb3IgbGFzdCBgbmAgZWxlbWVudHMgb2YgYW4gYXJyYXkuIElmIGEgY2FsbGJhY2sgaXNcclxuICAgICAgICAgKiBwcm92aWRlZCBlbGVtZW50cyBhdCB0aGUgZW5kIG9mIHRoZSBhcnJheSBhcmUgcmV0dXJuZWQgYXMgbG9uZyBhcyB0aGVcclxuICAgICAgICAgKiBjYWxsYmFjayByZXR1cm5zIHRydWV5LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXHJcbiAgICAgICAgICogd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxudW1iZXJ8c3RyaW5nfSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGVsZW1lbnQgb3IgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0byByZXR1cm4uIElmIGEgcHJvcGVydHkgbmFtZSBvclxyXG4gICAgICAgICAqICBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiXHJcbiAgICAgICAgICogIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGxhc3QgZWxlbWVudChzKSBvZiBgYXJyYXlgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmxhc3QoWzEsIDIsIDNdKTtcclxuICAgICAgICAgKiAvLyA9PiAzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmxhc3QoWzEsIDIsIDNdLCAyKTtcclxuICAgICAgICAgKiAvLyA9PiBbMiwgM11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ubGFzdChbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIG51bSA+IDE7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gWzIsIDNdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogZmFsc2UsICdlbXBsb3llcic6ICdzbGF0ZScgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICdzbGF0ZScgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICduYScgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnBsdWNrKF8ubGFzdChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpLCAnbmFtZScpO1xyXG4gICAgICAgICAqIC8vID0+IFsnZnJlZCcsICdwZWJibGVzJ11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8ubGFzdChjaGFyYWN0ZXJzLCB7ICdlbXBsb3llcic6ICduYScgfSk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgJ2VtcGxveWVyJzogJ25hJyB9XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsYXN0KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgbiA9IDAsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdudW1iZXInICYmIGNhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChpbmRleC0tICYmIGNhbGxiYWNrKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4rKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG4gPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgIGlmIChuID09IG51bGwgfHwgdGhpc0FyZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheSA/IGFycmF5W2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzbGljZShhcnJheSwgbmF0aXZlTWF4KDAsIGxlbmd0aCAtIG4pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBsYXN0IG9jY3VycmVuY2Ugb2YgYHZhbHVlYCBpcyBmb3VuZCB1c2luZyBzdHJpY3RcclxuICAgICAgICAgKiBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuIElmIGBmcm9tSW5kZXhgIGlzIG5lZ2F0aXZlLCBpdCBpcyB1c2VkXHJcbiAgICAgICAgICogYXMgdGhlIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9YXJyYXkubGVuZ3RoLTFdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSBvciBgLTFgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmxhc3RJbmRleE9mKFsxLCAyLCAzLCAxLCAyLCAzXSwgMik7XHJcbiAgICAgICAgICogLy8gPT4gNFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5sYXN0SW5kZXhPZihbMSwgMiwgMywgMSwgMiwgM10sIDIsIDMpO1xyXG4gICAgICAgICAqIC8vID0+IDFcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbGFzdEluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGZyb21JbmRleCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAoZnJvbUluZGV4IDwgMCA/IG5hdGl2ZU1heCgwLCBpbmRleCArIGZyb21JbmRleCkgOiBuYXRpdmVNaW4oZnJvbUluZGV4LCBpbmRleCAtIDEpKSArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcnJheVtpbmRleF0gPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZXMgYWxsIHByb3ZpZGVkIHZhbHVlcyBmcm9tIHRoZSBnaXZlbiBhcnJheSB1c2luZyBzdHJpY3QgZXF1YWxpdHkgZm9yXHJcbiAgICAgICAgICogY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZV0gVGhlIHZhbHVlcyB0byByZW1vdmUuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBhcnJheSA9IFsxLCAyLCAzLCAxLCAyLCAzXTtcclxuICAgICAgICAgKiBfLnB1bGwoYXJyYXksIDIsIDMpO1xyXG4gICAgICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHVsbChhcnJheSkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcclxuICAgICAgICAgICAgICAgIGFyZ3NJbmRleCA9IDAsXHJcbiAgICAgICAgICAgICAgICBhcmdzTGVuZ3RoID0gYXJncy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGFyZ3NbYXJnc0luZGV4XTtcclxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BsaWNlLmNhbGwoYXJyYXksIGluZGV4LS0sIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGgtLTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBudW1iZXJzIChwb3NpdGl2ZSBhbmQvb3IgbmVnYXRpdmUpIHByb2dyZXNzaW5nIGZyb21cclxuICAgICAgICAgKiBgc3RhcnRgIHVwIHRvIGJ1dCBub3QgaW5jbHVkaW5nIGBlbmRgLiBJZiBgc3RhcnRgIGlzIGxlc3MgdGhhbiBgc3RvcGAgYVxyXG4gICAgICAgICAqIHplcm8tbGVuZ3RoIHJhbmdlIGlzIGNyZWF0ZWQgdW5sZXNzIGEgbmVnYXRpdmUgYHN0ZXBgIGlzIHNwZWNpZmllZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBvZiB0aGUgcmFuZ2UuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSByYW5nZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0ZXA9MV0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBvciBkZWNyZW1lbnQgYnkuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IHJhbmdlIGFycmF5LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmdlKDQpO1xyXG4gICAgICAgICAqIC8vID0+IFswLCAxLCAyLCAzXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yYW5nZSgxLCA1KTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMiwgMywgNF1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmFuZ2UoMCwgMjAsIDUpO1xyXG4gICAgICAgICAqIC8vID0+IFswLCA1LCAxMCwgMTVdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmdlKDAsIC00LCAtMSk7XHJcbiAgICAgICAgICogLy8gPT4gWzAsIC0xLCAtMiwgLTNdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmdlKDEsIDQsIDApO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAxLCAxXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yYW5nZSgwKTtcclxuICAgICAgICAgKiAvLyA9PiBbXVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByYW5nZShzdGFydCwgZW5kLCBzdGVwKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gK3N0YXJ0IHx8IDA7XHJcbiAgICAgICAgICAgIHN0ZXAgPSB0eXBlb2Ygc3RlcCA9PSAnbnVtYmVyJyA/IHN0ZXAgOiAoK3N0ZXAgfHwgMSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZW5kID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGVuZCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHVzZSBgQXJyYXkobGVuZ3RoKWAgc28gZW5naW5lcyBsaWtlIENoYWtyYSBhbmQgVjggYXZvaWQgc2xvd2VyIG1vZGVzXHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly95b3V0dS5iZS9YQXFJcEdVOFpaayN0PTE3bTI1c1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heCgwLCBjZWlsKChlbmQgLSBzdGFydCkgLyAoc3RlcCB8fCAxKSkpLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICBzdGFydCArPSBzdGVwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmVzIGFsbCBlbGVtZW50cyBmcm9tIGFuIGFycmF5IHRoYXQgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkgZm9yXHJcbiAgICAgICAgICogYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgcmVtb3ZlZCBlbGVtZW50cy4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxyXG4gICAgICAgICAqIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcclxuICAgICAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcclxuICAgICAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxyXG4gICAgICAgICAqIGVsc2UgYGZhbHNlYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHJlbW92ZWQgZWxlbWVudHMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBhcnJheSA9IFsxLCAyLCAzLCA0LCA1LCA2XTtcclxuICAgICAgICAgKiB2YXIgZXZlbnMgPSBfLnJlbW92ZShhcnJheSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gJSAyID09IDA7IH0pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogY29uc29sZS5sb2coYXJyYXkpO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAzLCA1XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogY29uc29sZS5sb2coZXZlbnMpO1xyXG4gICAgICAgICAqIC8vID0+IFsyLCA0LCA2XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBhcnJheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsaWNlLmNhbGwoYXJyYXksIGluZGV4LS0sIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aC0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8uaW5pdGlhbGAgdGhpcyBtZXRob2QgZ2V0cyBhbGwgYnV0IHRoZSBmaXJzdCBlbGVtZW50IG9yXHJcbiAgICAgICAgICogZmlyc3QgYG5gIGVsZW1lbnRzIG9mIGFuIGFycmF5LiBJZiBhIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIGVsZW1lbnRzXHJcbiAgICAgICAgICogYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXkgYXJlIGV4Y2x1ZGVkIGZyb20gdGhlIHJlc3VsdCBhcyBsb25nIGFzIHRoZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcclxuICAgICAgICAgKiB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXHJcbiAgICAgICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXHJcbiAgICAgICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcclxuICAgICAgICAgKiBlbHNlIGBmYWxzZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgZHJvcCwgdGFpbFxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8bnVtYmVyfHN0cmluZ30gW2NhbGxiYWNrPTFdIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGVsZW1lbnQgb3IgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBleGNsdWRlLiBJZiBhIHByb3BlcnR5IG5hbWUgb3JcclxuICAgICAgICAgKiAgb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIlxyXG4gICAgICAgICAqICBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIHNsaWNlIG9mIGBhcnJheWAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmVzdChbMSwgMiwgM10pO1xyXG4gICAgICAgICAqIC8vID0+IFsyLCAzXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yZXN0KFsxLCAyLCAzXSwgMik7XHJcbiAgICAgICAgICogLy8gPT4gWzNdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJlc3QoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHtcclxuICAgICAgICAgKiAgIHJldHVybiBudW0gPCAzO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIC8vID0+IFszXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYmxvY2tlZCc6IGZhbHNlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAnZW1wbG95ZXInOiAnbmEnIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXHJcbiAgICAgICAgICogXy5wbHVjayhfLnJlc3QoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKSwgJ25hbWUnKTtcclxuICAgICAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAncGViYmxlcyddXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnJlc3QoY2hhcmFjdGVycywgeyAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xyXG4gICAgICAgICAqIC8vID0+IFt7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICdlbXBsb3llcic6ICduYScgfV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzdChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnbnVtYmVyJyAmJiBjYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbiA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbiA9IChjYWxsYmFjayA9PSBudWxsIHx8IHRoaXNBcmcpID8gMSA6IG5hdGl2ZU1heCgwLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNsaWNlKGFycmF5LCBuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVzZXMgYSBiaW5hcnkgc2VhcmNoIHRvIGRldGVybWluZSB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2ggYSB2YWx1ZVxyXG4gICAgICAgICAqIHNob3VsZCBiZSBpbnNlcnRlZCBpbnRvIGEgZ2l2ZW4gc29ydGVkIGFycmF5IGluIG9yZGVyIHRvIG1haW50YWluIHRoZSBzb3J0XHJcbiAgICAgICAgICogb3JkZXIgb2YgdGhlIGFycmF5LiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgZm9yXHJcbiAgICAgICAgICogYHZhbHVlYCBhbmQgZWFjaCBlbGVtZW50IG9mIGBhcnJheWAgdG8gY29tcHV0ZSB0aGVpciBzb3J0IHJhbmtpbmcuIFRoZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXHJcbiAgICAgICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcclxuICAgICAgICAgKiAgaW50byBgYXJyYXlgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNvcnRlZEluZGV4KFsyMCwgMzAsIDUwXSwgNDApO1xyXG4gICAgICAgICAqIC8vID0+IDJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxyXG4gICAgICAgICAqIF8uc29ydGVkSW5kZXgoW3sgJ3gnOiAyMCB9LCB7ICd4JzogMzAgfSwgeyAneCc6IDUwIH1dLCB7ICd4JzogNDAgfSwgJ3gnKTtcclxuICAgICAgICAgKiAvLyA9PiAyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZGljdCA9IHtcclxuICAgICAgICAgKiAgICd3b3JkVG9OdW1iZXInOiB7ICd0d2VudHknOiAyMCwgJ3RoaXJ0eSc6IDMwLCAnZm91cnR5JzogNDAsICdmaWZ0eSc6IDUwIH1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5zb3J0ZWRJbmRleChbJ3R3ZW50eScsICd0aGlydHknLCAnZmlmdHknXSwgJ2ZvdXJ0eScsIGZ1bmN0aW9uKHdvcmQpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBkaWN0LndvcmRUb051bWJlclt3b3JkXTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiAvLyA9PiAyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNvcnRlZEluZGV4KFsndHdlbnR5JywgJ3RoaXJ0eScsICdmaWZ0eSddLCAnZm91cnR5JywgZnVuY3Rpb24od29yZCkge1xyXG4gICAgICAgICAqICAgcmV0dXJuIHRoaXMud29yZFRvTnVtYmVyW3dvcmRdO1xyXG4gICAgICAgICAqIH0sIGRpY3QpO1xyXG4gICAgICAgICAqIC8vID0+IDJcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc29ydGVkSW5kZXgoYXJyYXksIHZhbHVlLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgbG93ID0gMCxcclxuICAgICAgICAgICAgICAgIGhpZ2ggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IGxvdztcclxuXHJcbiAgICAgICAgICAgIC8vIGV4cGxpY2l0bHkgcmVmZXJlbmNlIGBpZGVudGl0eWAgZm9yIGJldHRlciBpbmxpbmluZyBpbiBGaXJlZm94XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgPyBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDEpIDogaWRlbnRpdHk7XHJcbiAgICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2sodmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtaWQgPSAobG93ICsgaGlnaCkgPj4+IDE7XHJcbiAgICAgICAgICAgICAgICAoY2FsbGJhY2soYXJyYXlbbWlkXSkgPCB2YWx1ZSkgPyBsb3cgPSBtaWQgKyAxIDogaGlnaCA9IG1pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbG93O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB1bmlxdWUgdmFsdWVzLCBpbiBvcmRlciwgb2YgdGhlIHByb3ZpZGVkIGFycmF5cyB1c2luZ1xyXG4gICAgICAgICAqIHN0cmljdCBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5XSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIGNvbWJpbmVkIHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy51bmlvbihbMSwgMiwgM10sIFs1LCAyLCAxLCA0XSwgWzIsIDFdKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMiwgMywgNSwgNF1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdW5pb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlVW5pcShiYXNlRmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBkdXBsaWNhdGUtdmFsdWUtZnJlZSB2ZXJzaW9uIG9mIGFuIGFycmF5IHVzaW5nIHN0cmljdCBlcXVhbGl0eVxyXG4gICAgICAgICAqIGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC4gSWYgdGhlIGFycmF5IGlzIHNvcnRlZCwgcHJvdmlkaW5nXHJcbiAgICAgICAgICogYHRydWVgIGZvciBgaXNTb3J0ZWRgIHdpbGwgdXNlIGEgZmFzdGVyIGFsZ29yaXRobS4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZFxyXG4gICAgICAgICAqIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgIGlzIHBhc3NlZCB0aHJvdWdoIHRoZSBjYWxsYmFjayBiZWZvcmUgdW5pcXVlbmVzc1xyXG4gICAgICAgICAqIGlzIGNvbXB1dGVkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcclxuICAgICAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxyXG4gICAgICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xyXG4gICAgICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXHJcbiAgICAgICAgICogZWxzZSBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIHVuaXF1ZVxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NvcnRlZD1mYWxzZV0gQSBmbGFnIHRvIGluZGljYXRlIHRoYXQgYGFycmF5YCBpcyBzb3J0ZWQuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcclxuICAgICAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBkdXBsaWNhdGUtdmFsdWUtZnJlZSBhcnJheS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy51bmlxKFsxLCAyLCAxLCAzLCAxXSk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDIsIDNdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnVuaXEoWzEsIDEsIDIsIDIsIDNdLCB0cnVlKTtcclxuICAgICAgICAgKiAvLyA9PiBbMSwgMiwgM11cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8udW5pcShbJ0EnLCAnYicsICdDJywgJ2EnLCAnQicsICdjJ10sIGZ1bmN0aW9uKGxldHRlcikgeyByZXR1cm4gbGV0dGVyLnRvTG93ZXJDYXNlKCk7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IFsnQScsICdiJywgJ0MnXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy51bmlxKFsxLCAyLjUsIDMsIDEuNSwgMiwgMy41XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiB0aGlzLmZsb29yKG51bSk7IH0sIE1hdGgpO1xyXG4gICAgICAgICAqIC8vID0+IFsxLCAyLjUsIDNdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcclxuICAgICAgICAgKiBfLnVuaXEoW3sgJ3gnOiAxIH0sIHsgJ3gnOiAyIH0sIHsgJ3gnOiAxIH1dLCAneCcpO1xyXG4gICAgICAgICAqIC8vID0+IFt7ICd4JzogMSB9LCB7ICd4JzogMiB9XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB1bmlxKGFycmF5LCBpc1NvcnRlZCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgLy8ganVnZ2xlIGFyZ3VtZW50c1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzU29ydGVkICE9ICdib29sZWFuJyAmJiBpc1NvcnRlZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQXJnID0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9ICh0eXBlb2YgaXNTb3J0ZWQgIT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnICYmIHRoaXNBcmdbaXNTb3J0ZWRdID09PSBhcnJheSkgPyBudWxsIDogaXNTb3J0ZWQ7XHJcbiAgICAgICAgICAgICAgICBpc1NvcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VVbmlxKGFycmF5LCBpc1NvcnRlZCwgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhbiBhcnJheSBleGNsdWRpbmcgYWxsIHByb3ZpZGVkIHZhbHVlcyB1c2luZyBzdHJpY3QgZXF1YWxpdHkgZm9yXHJcbiAgICAgICAgICogY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZpbHRlci5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZV0gVGhlIHZhbHVlcyB0byBleGNsdWRlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ud2l0aG91dChbMSwgMiwgMSwgMCwgMywgMSwgNF0sIDAsIDEpO1xyXG4gICAgICAgICAqIC8vID0+IFsyLCAzLCA0XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB3aXRob3V0KGFycmF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlRGlmZmVyZW5jZShhcnJheSwgc2xpY2UoYXJndW1lbnRzLCAxKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIGFycmF5IHRoYXQgaXMgdGhlIHN5bW1ldHJpYyBkaWZmZXJlbmNlIG9mIHRoZSBwcm92aWRlZCBhcnJheXMuXHJcbiAgICAgICAgICogU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3ltbWV0cmljX2RpZmZlcmVuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5XSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHZhbHVlcy5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy54b3IoWzEsIDIsIDNdLCBbNSwgMiwgMSwgNF0pO1xyXG4gICAgICAgICAqIC8vID0+IFszLCA1LCA0XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy54b3IoWzEsIDIsIDVdLCBbMiwgMywgNV0sIFszLCA0LCA1XSk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDQsIDVdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHhvcigpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTEsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IGFyZ3VtZW50c1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShhcnJheSkgfHwgaXNBcmd1bWVudHMoYXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdCA/IGJhc2VVbmlxKGJhc2VEaWZmZXJlbmNlKHJlc3VsdCwgYXJyYXkpLmNvbmNhdChiYXNlRGlmZmVyZW5jZShhcnJheSwgcmVzdWx0KSkpIDogYXJyYXk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cywgdGhlIGZpcnN0IG9mIHdoaWNoIGNvbnRhaW5zIHRoZSBmaXJzdFxyXG4gICAgICAgICAqIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBhcnJheXMsIHRoZSBzZWNvbmQgb2Ygd2hpY2ggY29udGFpbnMgdGhlIHNlY29uZFxyXG4gICAgICAgICAqIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBhcnJheXMsIGFuZCBzbyBvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBhbGlhcyB1bnppcFxyXG4gICAgICAgICAqIEBjYXRlZ29yeSBBcnJheXNcclxuICAgICAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXldIEFycmF5cyB0byBwcm9jZXNzLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnppcChbJ2ZyZWQnLCAnYmFybmV5J10sIFszMCwgNDBdLCBbdHJ1ZSwgZmFsc2VdKTtcclxuICAgICAgICAgKiAvLyA9PiBbWydmcmVkJywgMzAsIHRydWVdLCBbJ2Jhcm5leScsIDQwLCBmYWxzZV1dXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHppcCgpIHtcclxuICAgICAgICAgICAgdmFyIGFycmF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHMgOiBhcmd1bWVudHNbMF0sXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBtYXgocGx1Y2soYXJyYXksICdsZW5ndGgnKSkgOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoIDwgMCA/IDAgOiBsZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBwbHVjayhhcnJheSwgaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBmcm9tIGFycmF5cyBvZiBga2V5c2AgYW5kIGB2YWx1ZXNgLiBQcm92aWRlXHJcbiAgICAgICAgICogZWl0aGVyIGEgc2luZ2xlIHR3byBkaW1lbnNpb25hbCBhcnJheSwgaS5lLiBgW1trZXkxLCB2YWx1ZTFdLCBba2V5MiwgdmFsdWUyXV1gXHJcbiAgICAgICAgICogb3IgdHdvIGFycmF5cywgb25lIG9mIGBrZXlzYCBhbmQgb25lIG9mIGNvcnJlc3BvbmRpbmcgYHZhbHVlc2AuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAYWxpYXMgb2JqZWN0XHJcbiAgICAgICAgICogQGNhdGVnb3J5IEFycmF5c1xyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGtleXMgVGhlIGFycmF5IG9mIGtleXMuXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlcz1bXV0gVGhlIGFycmF5IG9mIHZhbHVlcy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgZ2l2ZW4ga2V5cyBhbmRcclxuICAgICAgICAgKiAgY29ycmVzcG9uZGluZyB2YWx1ZXMuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uemlwT2JqZWN0KFsnZnJlZCcsICdiYXJuZXknXSwgWzMwLCA0MF0pO1xyXG4gICAgICAgICAqIC8vID0+IHsgJ2ZyZWQnOiAzMCwgJ2Jhcm5leSc6IDQwIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gemlwT2JqZWN0KGtleXMsIHZhbHVlcykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGtleXMgPyBrZXlzLmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdmFsdWVzICYmIGxlbmd0aCAmJiAhaXNBcnJheShrZXlzWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXlbMF1dID0ga2V5WzFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgZXhlY3V0ZXMgYGZ1bmNgLCB3aXRoICB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kXHJcbiAgICAgICAgICogYXJndW1lbnRzIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLCBvbmx5IGFmdGVyIGJlaW5nIGNhbGxlZCBgbmAgdGltZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0aGUgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgYmVmb3JlXHJcbiAgICAgICAgICogIGBmdW5jYCBpcyBleGVjdXRlZC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgc2F2ZXMgPSBbJ3Byb2ZpbGUnLCAnc2V0dGluZ3MnXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBkb25lID0gXy5hZnRlcihzYXZlcy5sZW5ndGgsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAqICAgY29uc29sZS5sb2coJ0RvbmUgc2F2aW5nIScpO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5mb3JFYWNoKHNhdmVzLCBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgICAgICogICBhc3luY1NhdmUoeyAndHlwZSc6IHR5cGUsICdjb21wbGV0ZSc6IGRvbmUgfSk7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyAnRG9uZSBzYXZpbmchJywgYWZ0ZXIgYWxsIHNhdmVzIGhhdmUgY29tcGxldGVkXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFmdGVyKG4sIGZ1bmMpIHtcclxuICAgICAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoLS1uIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYFxyXG4gICAgICAgICAqIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCBwcmVwZW5kcyBhbnkgYWRkaXRpb25hbCBgYmluZGAgYXJndW1lbnRzIHRvIHRob3NlXHJcbiAgICAgICAgICogcHJvdmlkZWQgdG8gdGhlIGJvdW5kIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGZ1bmMgPSBmdW5jdGlvbihncmVldGluZykge1xyXG4gICAgICAgICAqICAgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgdGhpcy5uYW1lO1xyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmdW5jID0gXy5iaW5kKGZ1bmMsIHsgJ25hbWUnOiAnZnJlZCcgfSwgJ2hpJyk7XHJcbiAgICAgICAgICogZnVuYygpO1xyXG4gICAgICAgICAqIC8vID0+ICdoaSBmcmVkJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiaW5kKGZ1bmMsIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gY3JlYXRlV3JhcHBlcihmdW5jLCAxNywgc2xpY2UoYXJndW1lbnRzLCAyKSwgbnVsbCwgdGhpc0FyZykgOiBjcmVhdGVXcmFwcGVyKGZ1bmMsIDEsIG51bGwsIG51bGwsIHRoaXNBcmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmluZHMgbWV0aG9kcyBvZiBhbiBvYmplY3QgdG8gdGhlIG9iamVjdCBpdHNlbGYsIG92ZXJ3cml0aW5nIHRoZSBleGlzdGluZ1xyXG4gICAgICAgICAqIG1ldGhvZC4gTWV0aG9kIG5hbWVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzXHJcbiAgICAgICAgICogb2YgbWV0aG9kIG5hbWVzLiBJZiBubyBtZXRob2QgbmFtZXMgYXJlIHByb3ZpZGVkIGFsbCB0aGUgZnVuY3Rpb24gcHJvcGVydGllc1xyXG4gICAgICAgICAqIG9mIGBvYmplY3RgIHdpbGwgYmUgYm91bmQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGJpbmQgYW5kIGFzc2lnbiB0aGUgYm91bmQgbWV0aG9kcyB0by5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLnN0cmluZ30gW21ldGhvZE5hbWVdIFRoZSBvYmplY3QgbWV0aG9kIG5hbWVzIHRvXHJcbiAgICAgICAgICogIGJpbmQsIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIG1ldGhvZCBuYW1lcyBvciBhcnJheXMgb2YgbWV0aG9kIG5hbWVzLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciB2aWV3ID0ge1xyXG4gICAgICAgICAqICAgJ2xhYmVsJzogJ2RvY3MnLFxyXG4gICAgICAgICAqICAgJ29uQ2xpY2snOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2NsaWNrZWQgJyArIHRoaXMubGFiZWwpOyB9XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uYmluZEFsbCh2aWV3KTtcclxuICAgICAgICAgKiBqUXVlcnkoJyNkb2NzJykub24oJ2NsaWNrJywgdmlldy5vbkNsaWNrKTtcclxuICAgICAgICAgKiAvLyA9PiBsb2dzICdjbGlja2VkIGRvY3MnLCB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZFxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBiaW5kQWxsKG9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgZnVuY3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgZmFsc2UsIDEpIDogZnVuY3Rpb25zKG9iamVjdCksXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gZnVuY3MubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBmdW5jc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICBvYmplY3Rba2V5XSA9IGNyZWF0ZVdyYXBwZXIob2JqZWN0W2tleV0sIDEsIG51bGwsIG51bGwsIG9iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgaW52b2tlcyB0aGUgbWV0aG9kIGF0IGBvYmplY3Rba2V5XWBcclxuICAgICAgICAgKiBhbmQgcHJlcGVuZHMgYW55IGFkZGl0aW9uYWwgYGJpbmRLZXlgIGFyZ3VtZW50cyB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgYm91bmRcclxuICAgICAgICAgKiBmdW5jdGlvbi4gVGhpcyBtZXRob2QgZGlmZmVycyBmcm9tIGBfLmJpbmRgIGJ5IGFsbG93aW5nIGJvdW5kIGZ1bmN0aW9ucyB0b1xyXG4gICAgICAgICAqIHJlZmVyZW5jZSBtZXRob2RzIHRoYXQgd2lsbCBiZSByZWRlZmluZWQgb3IgZG9uJ3QgeWV0IGV4aXN0LlxyXG4gICAgICAgICAqIFNlZSBodHRwOi8vbWljaGF1eC5jYS9hcnRpY2xlcy9sYXp5LWZ1bmN0aW9uLWRlZmluaXRpb24tcGF0dGVybi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdGhlIG1ldGhvZCBiZWxvbmdzIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb2JqZWN0ID0ge1xyXG4gICAgICAgICAqICAgJ25hbWUnOiAnZnJlZCcsXHJcbiAgICAgICAgICogICAnZ3JlZXQnOiBmdW5jdGlvbihncmVldGluZykge1xyXG4gICAgICAgICAqICAgICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyB0aGlzLm5hbWU7XHJcbiAgICAgICAgICogICB9XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBmdW5jID0gXy5iaW5kS2V5KG9iamVjdCwgJ2dyZWV0JywgJ2hpJyk7XHJcbiAgICAgICAgICogZnVuYygpO1xyXG4gICAgICAgICAqIC8vID0+ICdoaSBmcmVkJ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogb2JqZWN0LmdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBncmVldGluZyArICd5YSAnICsgdGhpcy5uYW1lICsgJyEnO1xyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmdW5jKCk7XHJcbiAgICAgICAgICogLy8gPT4gJ2hpeWEgZnJlZCEnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJpbmRLZXkob2JqZWN0LCBrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gY3JlYXRlV3JhcHBlcihrZXksIDE5LCBzbGljZShhcmd1bWVudHMsIDIpLCBudWxsLCBvYmplY3QpIDogY3JlYXRlV3JhcHBlcihrZXksIDMsIG51bGwsIG51bGwsIG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgdGhlIHByb3ZpZGVkIGZ1bmN0aW9ucyxcclxuICAgICAgICAgKiB3aGVyZSBlYWNoIGZ1bmN0aW9uIGNvbnN1bWVzIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cy5cclxuICAgICAgICAgKiBGb3IgZXhhbXBsZSwgY29tcG9zaW5nIHRoZSBmdW5jdGlvbnMgYGYoKWAsIGBnKClgLCBhbmQgYGgoKWAgcHJvZHVjZXMgYGYoZyhoKCkpKWAuXHJcbiAgICAgICAgICogRWFjaCBmdW5jdGlvbiBpcyBleGVjdXRlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY29tcG9zZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gW2Z1bmNdIEZ1bmN0aW9ucyB0byBjb21wb3NlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNvbXBvc2VkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgcmVhbE5hbWVNYXAgPSB7XHJcbiAgICAgICAgICogICAncGViYmxlcyc6ICdwZW5lbG9wZSdcclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGZvcm1hdCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAgKiAgIG5hbWUgPSByZWFsTmFtZU1hcFtuYW1lLnRvTG93ZXJDYXNlKCldIHx8IG5hbWU7XHJcbiAgICAgICAgICogICByZXR1cm4gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGdyZWV0ID0gZnVuY3Rpb24oZm9ybWF0dGVkKSB7XHJcbiAgICAgICAgICogICByZXR1cm4gJ0hpeWEgJyArIGZvcm1hdHRlZCArICchJztcclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIHdlbGNvbWUgPSBfLmNvbXBvc2UoZ3JlZXQsIGZvcm1hdCk7XHJcbiAgICAgICAgICogd2VsY29tZSgncGViYmxlcycpO1xyXG4gICAgICAgICAqIC8vID0+ICdIaXlhIFBlbmVsb3BlISdcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY29tcG9zZSgpIHtcclxuICAgICAgICAgICAgdmFyIGZ1bmNzID0gYXJndW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gZnVuY3MubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuY3NbbGVuZ3RoXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBmdW5jcy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IFtmdW5jc1tsZW5ndGhdLmFwcGx5KHRoaXMsIGFyZ3MpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBhcmdzWzBdO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHdoaWNoIGFjY2VwdHMgb25lIG9yIG1vcmUgYXJndW1lbnRzIG9mIGBmdW5jYCB0aGF0IHdoZW5cclxuICAgICAgICAgKiBpbnZva2VkIGVpdGhlciBleGVjdXRlcyBgZnVuY2AgcmV0dXJuaW5nIGl0cyByZXN1bHQsIGlmIGFsbCBgZnVuY2AgYXJndW1lbnRzXHJcbiAgICAgICAgICogaGF2ZSBiZWVuIHByb3ZpZGVkLCBvciByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIG9uZSBvciBtb3JlIG9mIHRoZVxyXG4gICAgICAgICAqIHJlbWFpbmluZyBgZnVuY2AgYXJndW1lbnRzLCBhbmQgc28gb24uIFRoZSBhcml0eSBvZiBgZnVuY2AgY2FuIGJlIHNwZWNpZmllZFxyXG4gICAgICAgICAqIGlmIGBmdW5jLmxlbmd0aGAgaXMgbm90IHN1ZmZpY2llbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eT1mdW5jLmxlbmd0aF0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjdXJyaWVkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY3VycmllZCA9IF8uY3VycnkoZnVuY3Rpb24oYSwgYiwgYykge1xyXG4gICAgICAgICAqICAgY29uc29sZS5sb2coYSArIGIgKyBjKTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGN1cnJpZWQoMSkoMikoMyk7XHJcbiAgICAgICAgICogLy8gPT4gNlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogY3VycmllZCgxLCAyKSgzKTtcclxuICAgICAgICAgKiAvLyA9PiA2XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBjdXJyaWVkKDEsIDIsIDMpO1xyXG4gICAgICAgICAqIC8vID0+IDZcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3VycnkoZnVuYywgYXJpdHkpIHtcclxuICAgICAgICAgICAgYXJpdHkgPSB0eXBlb2YgYXJpdHkgPT0gJ251bWJlcicgPyBhcml0eSA6ICgrYXJpdHkgfHwgZnVuYy5sZW5ndGgpO1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCA0LCBudWxsLCBudWxsLCBudWxsLCBhcml0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGRlbGF5IHRoZSBleGVjdXRpb24gb2YgYGZ1bmNgIHVudGlsIGFmdGVyXHJcbiAgICAgICAgICogYHdhaXRgIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSBpdCB3YXMgaW52b2tlZC5cclxuICAgICAgICAgKiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlIHRoYXQgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uXHJcbiAgICAgICAgICogdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBTdWJzZXF1ZW50IGNhbGxzXHJcbiAgICAgICAgICogdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBjYWxsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCBgZnVuY2Agd2lsbCBiZSBjYWxsZWRcclxuICAgICAgICAgKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXHJcbiAgICAgICAgICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV0gU3BlY2lmeSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF0gVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGNhbGxlZC5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gYXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eFxyXG4gICAgICAgICAqIHZhciBsYXp5TGF5b3V0ID0gXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCk7XHJcbiAgICAgICAgICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIGxhenlMYXlvdXQpO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gZXhlY3V0ZSBgc2VuZE1haWxgIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHNcclxuICAgICAgICAgKiBqUXVlcnkoJyNwb3N0Ym94Jykub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XHJcbiAgICAgICAgICogICAnbGVhZGluZyc6IHRydWUsXHJcbiAgICAgICAgICogICAndHJhaWxpbmcnOiBmYWxzZVxyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gZW5zdXJlIGBiYXRjaExvZ2AgaXMgZXhlY3V0ZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHNcclxuICAgICAgICAgKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XHJcbiAgICAgICAgICogc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHtcclxuICAgICAgICAgKiAgICdtYXhXYWl0JzogMTAwMFxyXG4gICAgICAgICAqIH0sIGZhbHNlKTtcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YXIgYXJncyxcclxuICAgICAgICAgICAgICAgIG1heFRpbWVvdXRJZCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCxcclxuICAgICAgICAgICAgICAgIHN0YW1wLFxyXG4gICAgICAgICAgICAgICAgdGhpc0FyZyxcclxuICAgICAgICAgICAgICAgIHRpbWVvdXRJZCxcclxuICAgICAgICAgICAgICAgIHRyYWlsaW5nQ2FsbCxcclxuICAgICAgICAgICAgICAgIGxhc3RDYWxsZWQgPSAwLFxyXG4gICAgICAgICAgICAgICAgbWF4V2FpdCA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdHJhaWxpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdhaXQgPSBuYXRpdmVNYXgoMCwgd2FpdCkgfHwgMDtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsZWFkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRyYWlsaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIGxlYWRpbmcgPSBvcHRpb25zLmxlYWRpbmc7XHJcbiAgICAgICAgICAgICAgICBtYXhXYWl0ID0gJ21heFdhaXQnIGluIG9wdGlvbnMgJiYgKG5hdGl2ZU1heCh3YWl0LCBvcHRpb25zLm1heFdhaXQpIHx8IDApO1xyXG4gICAgICAgICAgICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyBvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGRlbGF5ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3coKSAtIHN0YW1wKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1heFRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0NhbGxlZCA9IHRyYWlsaW5nQ2FsbDtcclxuICAgICAgICAgICAgICAgICAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ2FsbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDYWxsZWQgPSBub3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXNBcmcgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHJlbWFpbmluZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgbWF4RGVsYXllZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGlmICh0cmFpbGluZyB8fCAobWF4V2FpdCAhPT0gd2FpdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0Q2FsbGVkID0gbm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgICAgIHN0YW1wID0gbm93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzQXJnID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHRyYWlsaW5nQ2FsbCA9IHRyYWlsaW5nICYmICh0aW1lb3V0SWQgfHwgIWxlYWRpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXhXYWl0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZWFkaW5nQ2FsbCA9IGxlYWRpbmcgJiYgIXRpbWVvdXRJZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXhUaW1lb3V0SWQgJiYgIWxlYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENhbGxlZCA9IHN0YW1wO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gbWF4V2FpdCAtIChzdGFtcCAtIGxhc3RDYWxsZWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0NhbGxlZCA9IHJlbWFpbmluZyA8PSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4VGltZW91dElkID0gY2xlYXJUaW1lb3V0KG1heFRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENhbGxlZCA9IHN0YW1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW1heFRpbWVvdXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KG1heERlbGF5ZWQsIHJlbWFpbmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzQ2FsbGVkICYmIHRpbWVvdXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRJZCA9IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGltZW91dElkICYmIHdhaXQgIT09IG1heFdhaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHdhaXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxlYWRpbmdDYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNDYWxsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNDYWxsZWQgJiYgIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXNBcmcgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlZmVycyBleGVjdXRpbmcgdGhlIGBmdW5jYCBmdW5jdGlvbiB1bnRpbCB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcyBjbGVhcmVkLlxyXG4gICAgICAgICAqIEFkZGl0aW9uYWwgYXJndW1lbnRzIHdpbGwgYmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQgaXMgaW52b2tlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWZlci5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGguXHJcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZGVmZXIoZnVuY3Rpb24odGV4dCkgeyBjb25zb2xlLmxvZyh0ZXh0KTsgfSwgJ2RlZmVycmVkJyk7XHJcbiAgICAgICAgICogLy8gbG9ncyAnZGVmZXJyZWQnIGFmdGVyIG9uZSBvciBtb3JlIG1pbGxpc2Vjb25kc1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZWZlcihmdW5jKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFeGVjdXRlcyB0aGUgYGZ1bmNgIGZ1bmN0aW9uIGFmdGVyIGB3YWl0YCBtaWxsaXNlY29uZHMuIEFkZGl0aW9uYWwgYXJndW1lbnRzXHJcbiAgICAgICAgICogd2lsbCBiZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCBpcyBpbnZva2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGV4ZWN1dGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGguXHJcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8uZGVsYXkoZnVuY3Rpb24odGV4dCkgeyBjb25zb2xlLmxvZyh0ZXh0KTsgfSwgMTAwMCwgJ2xhdGVyJyk7XHJcbiAgICAgICAgICogLy8gPT4gbG9ncyAnbGF0ZXInIGFmdGVyIG9uZSBzZWNvbmRcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsYXkoZnVuYywgd2FpdCkge1xyXG4gICAgICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShhcmd1bWVudHMsIDIpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XHJcbiAgICAgICAgICAgIH0sIHdhaXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbWVtb2l6ZXMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuIElmIGByZXNvbHZlcmAgaXNcclxuICAgICAgICAgKiBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBjYWNoZSBrZXkgZm9yIHN0b3JpbmcgdGhlIHJlc3VsdFxyXG4gICAgICAgICAqIGJhc2VkIG9uIHRoZSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLiBCeSBkZWZhdWx0LCB0aGVcclxuICAgICAgICAgKiBmaXJzdCBhcmd1bWVudCBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgY2FjaGUga2V5LlxyXG4gICAgICAgICAqIFRoZSBgZnVuY2AgaXMgZXhlY3V0ZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIFRoZSByZXN1bHQgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgYGNhY2hlYCBwcm9wZXJ0eSBvbiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gQSBmdW5jdGlvbiB1c2VkIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXppbmcgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBmaWJvbmFjY2kgPSBfLm1lbW9pemUoZnVuY3Rpb24obikge1xyXG4gICAgICAgICAqICAgcmV0dXJuIG4gPCAyID8gbiA6IGZpYm9uYWNjaShuIC0gMSkgKyBmaWJvbmFjY2kobiAtIDIpO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZmlib25hY2NpKDkpXHJcbiAgICAgICAgICogLy8gPT4gMzRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAqICAgJ2ZyZWQnOiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSxcclxuICAgICAgICAgKiAgICdwZWJibGVzJzogeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxyXG4gICAgICAgICAqIH07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyBtb2RpZnlpbmcgdGhlIHJlc3VsdCBjYWNoZVxyXG4gICAgICAgICAqIHZhciBnZXQgPSBfLm1lbW9pemUoZnVuY3Rpb24obmFtZSkgeyByZXR1cm4gZGF0YVtuYW1lXTsgfSwgXy5pZGVudGl0eSk7XHJcbiAgICAgICAgICogZ2V0KCdwZWJibGVzJyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZ2V0LmNhY2hlLnBlYmJsZXMubmFtZSA9ICdwZW5lbG9wZSc7XHJcbiAgICAgICAgICogZ2V0KCdwZWJibGVzJyk7XHJcbiAgICAgICAgICogLy8gPT4geyAnbmFtZSc6ICdwZW5lbG9wZScsICdhZ2UnOiAxIH1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xyXG4gICAgICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGUsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5UHJlZml4ICsgYXJndW1lbnRzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGNhY2hlLCBrZXkpID8gY2FjaGVba2V5XSA6IChjYWNoZVtrZXldID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZW1vaXplZC5jYWNoZSA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gbWVtb2l6ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpcyByZXN0cmljdGVkIHRvIGV4ZWN1dGUgYGZ1bmNgIG9uY2UuIFJlcGVhdCBjYWxscyB0b1xyXG4gICAgICAgICAqIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGNhbGwuIFRoZSBgZnVuY2AgaXMgZXhlY3V0ZWRcclxuICAgICAgICAgKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgaW5pdGlhbGl6ZSA9IF8ub25jZShjcmVhdGVBcHBsaWNhdGlvbik7XHJcbiAgICAgICAgICogaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAqIGluaXRpYWxpemUoKTtcclxuICAgICAgICAgKiAvLyBgaW5pdGlhbGl6ZWAgZXhlY3V0ZXMgYGNyZWF0ZUFwcGxpY2F0aW9uYCBvbmNlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uY2UoZnVuYykge1xyXG4gICAgICAgICAgICB2YXIgcmFuLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJhbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIGBmdW5jYCB2YXJpYWJsZSBzbyB0aGUgZnVuY3Rpb24gbWF5IGJlIGdhcmJhZ2UgY29sbGVjdGVkXHJcbiAgICAgICAgICAgICAgICBmdW5jID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIGludm9rZXMgYGZ1bmNgIHdpdGggYW55IGFkZGl0aW9uYWxcclxuICAgICAgICAgKiBgcGFydGlhbGAgYXJndW1lbnRzIHByZXBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLiBUaGlzXHJcbiAgICAgICAgICogbWV0aG9kIGlzIHNpbWlsYXIgdG8gYF8uYmluZGAgZXhjZXB0IGl0IGRvZXMgKipub3QqKiBhbHRlciB0aGUgYHRoaXNgIGJpbmRpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cclxuICAgICAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcsIG5hbWUpIHsgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgbmFtZTsgfTtcclxuICAgICAgICAgKiB2YXIgaGkgPSBfLnBhcnRpYWwoZ3JlZXQsICdoaScpO1xyXG4gICAgICAgICAqIGhpKCdmcmVkJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ2hpIGZyZWQnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHBhcnRpYWwoZnVuYykge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCAxNiwgc2xpY2UoYXJndW1lbnRzLCAxKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnBhcnRpYWxgIGV4Y2VwdCB0aGF0IGBwYXJ0aWFsYCBhcmd1bWVudHMgYXJlXHJcbiAgICAgICAgICogYXBwZW5kZWQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwYXJ0aWFsbHkgYXBwbHkgYXJndW1lbnRzIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgZGVmYXVsdHNEZWVwID0gXy5wYXJ0aWFsUmlnaHQoXy5tZXJnZSwgXy5kZWZhdWx0cyk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgKiAgICd2YXJpYWJsZSc6ICdkYXRhJyxcclxuICAgICAgICAgKiAgICdpbXBvcnRzJzogeyAnanEnOiAkIH1cclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZGVmYXVsdHNEZWVwKG9wdGlvbnMsIF8udGVtcGxhdGVTZXR0aW5ncyk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBvcHRpb25zLnZhcmlhYmxlXHJcbiAgICAgICAgICogLy8gPT4gJ2RhdGEnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBvcHRpb25zLmltcG9ydHNcclxuICAgICAgICAgKiAvLyA9PiB7ICdfJzogXywgJ2pxJzogJCB9XHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHBhcnRpYWxSaWdodChmdW5jKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIDMyLCBudWxsLCBzbGljZShhcmd1bWVudHMsIDEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGV4ZWN1dGVkLCB3aWxsIG9ubHkgY2FsbCB0aGUgYGZ1bmNgIGZ1bmN0aW9uXHJcbiAgICAgICAgICogYXQgbW9zdCBvbmNlIHBlciBldmVyeSBgd2FpdGAgbWlsbGlzZWNvbmRzLiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvXHJcbiAgICAgICAgICogaW5kaWNhdGUgdGhhdCBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2VcclxuICAgICAgICAgKiBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFN1YnNlcXVlbnQgY2FsbHMgdG8gdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsXHJcbiAgICAgICAgICogcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGNhbGwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3RlOiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgIGBmdW5jYCB3aWxsIGJlIGNhbGxlZFxyXG4gICAgICAgICAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gaXNcclxuICAgICAgICAgKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgZXhlY3V0aW9ucyB0by5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9dHJ1ZV0gU3BlY2lmeSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gYXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZ1xyXG4gICAgICAgICAqIHZhciB0aHJvdHRsZWQgPSBfLnRocm90dGxlKHVwZGF0ZVBvc2l0aW9uLCAxMDApO1xyXG4gICAgICAgICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdzY3JvbGwnLCB0aHJvdHRsZWQpO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gZXhlY3V0ZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzXHJcbiAgICAgICAgICogalF1ZXJ5KCcuaW50ZXJhY3RpdmUnKS5vbignY2xpY2snLCBfLnRocm90dGxlKHJlbmV3VG9rZW4sIDMwMDAwMCwge1xyXG4gICAgICAgICAqICAgJ3RyYWlsaW5nJzogZmFsc2VcclxuICAgICAgICAgKiB9KSk7XHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIGxlYWRpbmcgPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdHJhaWxpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgbGVhZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICBsZWFkaW5nID0gJ2xlYWRpbmcnIGluIG9wdGlvbnMgPyBvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xyXG4gICAgICAgICAgICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyBvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVib3VuY2VPcHRpb25zLmxlYWRpbmcgPSBsZWFkaW5nO1xyXG4gICAgICAgICAgICBkZWJvdW5jZU9wdGlvbnMubWF4V2FpdCA9IHdhaXQ7XHJcbiAgICAgICAgICAgIGRlYm91bmNlT3B0aW9ucy50cmFpbGluZyA9IHRyYWlsaW5nO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGRlYm91bmNlT3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBwcm92aWRlcyBgdmFsdWVgIHRvIHRoZSB3cmFwcGVyIGZ1bmN0aW9uIGFzIGl0c1xyXG4gICAgICAgICAqIGZpcnN0IGFyZ3VtZW50LiBBZGRpdGlvbmFsIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZnVuY3Rpb24gYXJlIGFwcGVuZGVkXHJcbiAgICAgICAgICogdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24uIFRoZSB3cmFwcGVyIGlzIGV4ZWN1dGVkIHdpdGhcclxuICAgICAgICAgKiB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB3cmFwcGVyIFRoZSB3cmFwcGVyIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgcCA9IF8ud3JhcChfLmVzY2FwZSwgZnVuY3Rpb24oZnVuYywgdGV4dCkge1xyXG4gICAgICAgICAqICAgcmV0dXJuICc8cD4nICsgZnVuYyh0ZXh0KSArICc8L3A+JztcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHAoJ0ZyZWQsIFdpbG1hLCAmIFBlYmJsZXMnKTtcclxuICAgICAgICAgKiAvLyA9PiAnPHA+RnJlZCwgV2lsbWEsICZhbXA7IFBlYmJsZXM8L3A+J1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB3cmFwKHZhbHVlLCB3cmFwcGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKHdyYXBwZXIsIDE2LCBbdmFsdWVdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGB2YWx1ZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcmV0dXJuIGZyb20gdGhlIG5ldyBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcclxuICAgICAgICAgKiB2YXIgZ2V0dGVyID0gXy5jb25zdGFudChvYmplY3QpO1xyXG4gICAgICAgICAqIGdldHRlcigpID09PSBvYmplY3Q7XHJcbiAgICAgICAgICogLy8gPT4gdHJ1ZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb25zdGFudCh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvZHVjZXMgYSBjYWxsYmFjayBib3VuZCB0byBhbiBvcHRpb25hbCBgdGhpc0FyZ2AuIElmIGBmdW5jYCBpcyBhIHByb3BlcnR5XHJcbiAgICAgICAgICogbmFtZSB0aGUgY3JlYXRlZCBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgZm9yIGEgZ2l2ZW4gZWxlbWVudC5cclxuICAgICAgICAgKiBJZiBgZnVuY2AgaXMgYW4gb2JqZWN0IHRoZSBjcmVhdGVkIGNhbGxiYWNrIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHNcclxuICAgICAgICAgKiB0aGF0IGNvbnRhaW4gdGhlIGVxdWl2YWxlbnQgb2JqZWN0IHByb3BlcnRpZXMsIG90aGVyd2lzZSBpdCB3aWxsIHJldHVybiBgZmFsc2VgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW2Z1bmM9aWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGEgY2FsbGJhY2suXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGNhbGxiYWNrLlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRoZSBjYWxsYmFjayBhY2NlcHRzLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBhIGNhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHdyYXAgdG8gY3JlYXRlIGN1c3RvbSBjYWxsYmFjayBzaG9ydGhhbmRzXHJcbiAgICAgICAgICogXy5jcmVhdGVDYWxsYmFjayA9IF8ud3JhcChfLmNyZWF0ZUNhbGxiYWNrLCBmdW5jdGlvbihmdW5jLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAqICAgdmFyIG1hdGNoID0gL14oLis/KV9fKFtnbF10KSguKykkLy5leGVjKGNhbGxiYWNrKTtcclxuICAgICAgICAgKiAgIHJldHVybiAhbWF0Y2ggPyBmdW5jKGNhbGxiYWNrLCB0aGlzQXJnKSA6IGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAqICAgICByZXR1cm4gbWF0Y2hbMl0gPT0gJ2d0JyA/IG9iamVjdFttYXRjaFsxXV0gPiBtYXRjaFszXSA6IG9iamVjdFttYXRjaFsxXV0gPCBtYXRjaFszXTtcclxuICAgICAgICAgKiAgIH07XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmZpbHRlcihjaGFyYWN0ZXJzLCAnYWdlX19ndDM4Jyk7XHJcbiAgICAgICAgICogLy8gPT4gW3sgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9XVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBmdW5jO1xyXG4gICAgICAgICAgICBpZiAoZnVuYyA9PSBudWxsIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhc2VDcmVhdGVDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaGFuZGxlIFwiXy5wbHVja1wiIHN0eWxlIGNhbGxiYWNrIHNob3J0aGFuZHNcclxuICAgICAgICAgICAgaWYgKHR5cGUgIT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eShmdW5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBrZXlzKGZ1bmMpLFxyXG4gICAgICAgICAgICAgICAga2V5ID0gcHJvcHNbMF0sXHJcbiAgICAgICAgICAgICAgICBhID0gZnVuY1trZXldO1xyXG5cclxuICAgICAgICAgICAgLy8gaGFuZGxlIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrIHNob3J0aGFuZHNcclxuICAgICAgICAgICAgaWYgKHByb3BzLmxlbmd0aCA9PSAxICYmIGEgPT09IGEgJiYgIWlzT2JqZWN0KGEpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmYXN0IHBhdGggdGhlIGNvbW1vbiBjYXNlIG9mIHByb3ZpZGluZyBhbiBvYmplY3Qgd2l0aCBhIHNpbmdsZVxyXG4gICAgICAgICAgICAgICAgLy8gcHJvcGVydHkgY29udGFpbmluZyBhIHByaW1pdGl2ZSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IG9iamVjdFtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhID09PSBiICYmIChhICE9PSAwIHx8ICgxIC8gYSA9PSAxIC8gYikpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXN1bHQgPSBiYXNlSXNFcXVhbChvYmplY3RbcHJvcHNbbGVuZ3RoXV0sIGZ1bmNbcHJvcHNbbGVuZ3RoXV0sIG51bGwsIHRydWUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udmVydHMgdGhlIGNoYXJhY3RlcnMgYCZgLCBgPGAsIGA+YCwgYFwiYCwgYW5kIGAnYCBpbiBgc3RyaW5nYCB0byB0aGVpclxyXG4gICAgICAgICAqIGNvcnJlc3BvbmRpbmcgSFRNTCBlbnRpdGllcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLmVzY2FwZSgnRnJlZCwgV2lsbWEsICYgUGViYmxlcycpO1xyXG4gICAgICAgICAqIC8vID0+ICdGcmVkLCBXaWxtYSwgJmFtcDsgUGViYmxlcydcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID09IG51bGwgPyAnJyA6IFN0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVVbmVzY2FwZWRIdG1sLCBlc2NhcGVIdG1sQ2hhcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBwcm92aWRlZCB0byBpdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdmcmVkJyB9O1xyXG4gICAgICAgICAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkcyBmdW5jdGlvbiBwcm9wZXJ0aWVzIG9mIGEgc291cmNlIG9iamVjdCB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAqIElmIGBvYmplY3RgIGlzIGEgZnVuY3Rpb24gbWV0aG9kcyB3aWxsIGJlIGFkZGVkIHRvIGl0cyBwcm90b3R5cGUgYXMgd2VsbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdH0gW29iamVjdD1sb2Rhc2hdIG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBmdW5jdGlvbnMgdG8gYWRkLlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2hhaW49dHJ1ZV0gU3BlY2lmeSB3aGV0aGVyIHRoZSBmdW5jdGlvbnMgYWRkZWQgYXJlIGNoYWluYWJsZS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHJpbmcpIHtcclxuICAgICAgICAgKiAgIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLm1peGluKHsgJ2NhcGl0YWxpemUnOiBjYXBpdGFsaXplIH0pO1xyXG4gICAgICAgICAqIF8uY2FwaXRhbGl6ZSgnZnJlZCcpO1xyXG4gICAgICAgICAqIC8vID0+ICdGcmVkJ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXygnZnJlZCcpLmNhcGl0YWxpemUoKS52YWx1ZSgpO1xyXG4gICAgICAgICAqIC8vID0+ICdGcmVkJ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5taXhpbih7ICdjYXBpdGFsaXplJzogY2FwaXRhbGl6ZSB9LCB7ICdjaGFpbic6IGZhbHNlIH0pO1xyXG4gICAgICAgICAqIF8oJ2ZyZWQnKS5jYXBpdGFsaXplKCk7XHJcbiAgICAgICAgICogLy8gPT4gJ0ZyZWQnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1peGluKG9iamVjdCwgc291cmNlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFpbiA9IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZXRob2ROYW1lcyA9IHNvdXJjZSAmJiBmdW5jdGlvbnMoc291cmNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc291cmNlIHx8ICghb3B0aW9ucyAmJiAhbWV0aG9kTmFtZXMubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdG9yID0gbG9kYXNoV3JhcHBlcjtcclxuICAgICAgICAgICAgICAgIHNvdXJjZSA9IG9iamVjdDtcclxuICAgICAgICAgICAgICAgIG9iamVjdCA9IGxvZGFzaDtcclxuICAgICAgICAgICAgICAgIG1ldGhvZE5hbWVzID0gZnVuY3Rpb25zKHNvdXJjZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpICYmICdjaGFpbicgaW4gb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY2hhaW4gPSBvcHRpb25zLmNoYWluO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjdG9yID0gb2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgaXNGdW5jID0gaXNGdW5jdGlvbihjdG9yKTtcclxuXHJcbiAgICAgICAgICAgIGZvckVhY2gobWV0aG9kTmFtZXMsIGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnVuYyA9IG9iamVjdFttZXRob2ROYW1lXSA9IHNvdXJjZVttZXRob2ROYW1lXTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX18sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX193cmFwcGVkX18sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gW3ZhbHVlXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkob2JqZWN0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYWluIHx8IGNoYWluQWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHJlc3VsdCAmJiBpc09iamVjdChyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgY3RvcihyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9fY2hhaW5fXyA9IGNoYWluQWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXZlcnRzIHRoZSAnXycgdmFyaWFibGUgdG8gaXRzIHByZXZpb3VzIHZhbHVlIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvXHJcbiAgICAgICAgICogdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBsb2Rhc2ggPSBfLm5vQ29uZmxpY3QoKTtcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcclxuICAgICAgICAgICAgY29udGV4dC5fID0gb2xkRGFzaDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIG5vLW9wZXJhdGlvbiBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcclxuICAgICAgICAgKiBfLm5vb3Aob2JqZWN0KSA9PT0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAqIC8vID0+IHRydWVcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgICAgICAgICAgLy8gbm8gb3BlcmF0aW9uIHBlcmZvcm1lZFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgVW5peCBlcG9jaFxyXG4gICAgICAgICAqICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgc3RhbXAgPSBfLm5vdygpO1xyXG4gICAgICAgICAqIF8uZGVmZXIoZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7IH0pO1xyXG4gICAgICAgICAqIC8vID0+IGxvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBub3cgPSBpc05hdGl2ZShub3cgPSBEYXRlLm5vdykgJiYgbm93IHx8IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnZlcnRzIHRoZSBnaXZlbiB2YWx1ZSBpbnRvIGFuIGludGVnZXIgb2YgdGhlIHNwZWNpZmllZCByYWRpeC5cclxuICAgICAgICAgKiBJZiBgcmFkaXhgIGlzIGB1bmRlZmluZWRgIG9yIGAwYCBhIGByYWRpeGAgb2YgYDEwYCBpcyB1c2VkIHVubGVzcyB0aGVcclxuICAgICAgICAgKiBgdmFsdWVgIGlzIGEgaGV4YWRlY2ltYWwsIGluIHdoaWNoIGNhc2UgYSBgcmFkaXhgIG9mIGAxNmAgaXMgdXNlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IFRoaXMgbWV0aG9kIGF2b2lkcyBkaWZmZXJlbmNlcyBpbiBuYXRpdmUgRVMzIGFuZCBFUzUgYHBhcnNlSW50YFxyXG4gICAgICAgICAqIGltcGxlbWVudGF0aW9ucy4gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyNFLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFyc2UuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtyYWRpeF0gVGhlIHJhZGl4IHVzZWQgdG8gaW50ZXJwcmV0IHRoZSB2YWx1ZSB0byBwYXJzZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBuZXcgaW50ZWdlciB2YWx1ZS5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5wYXJzZUludCgnMDgnKTtcclxuICAgICAgICAgKiAvLyA9PiA4XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHBhcnNlSW50ID0gbmF0aXZlUGFyc2VJbnQod2hpdGVzcGFjZSArICcwOCcpID09IDggPyBuYXRpdmVQYXJzZUludCA6IGZ1bmN0aW9uICh2YWx1ZSwgcmFkaXgpIHtcclxuICAgICAgICAgICAgLy8gRmlyZWZveCA8IDIxIGFuZCBPcGVyYSA8IDE1IGZvbGxvdyB0aGUgRVMzIHNwZWNpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiBgcGFyc2VJbnRgXHJcbiAgICAgICAgICAgIHJldHVybiBuYXRpdmVQYXJzZUludChpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZS5yZXBsYWNlKHJlTGVhZGluZ1NwYWNlc0FuZFplcm9zLCAnJykgOiB2YWx1ZSwgcmFkaXggfHwgMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIFwiXy5wbHVja1wiIHN0eWxlIGZ1bmN0aW9uLCB3aGljaCByZXR1cm5zIHRoZSBga2V5YCB2YWx1ZSBvZiBhXHJcbiAgICAgICAgICogZ2l2ZW4gb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHJldHJpZXZlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH0sXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XHJcbiAgICAgICAgICogXTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBnZXROYW1lID0gXy5wcm9wZXJ0eSgnbmFtZScpO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5tYXAoY2hhcmFjdGVycywgZ2V0TmFtZSk7XHJcbiAgICAgICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnNvcnRCeShjaGFyYWN0ZXJzLCBnZXROYW1lKTtcclxuICAgICAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSwgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJvcGVydHkoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0W2tleV07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9kdWNlcyBhIHJhbmRvbSBudW1iZXIgYmV0d2VlbiBgbWluYCBhbmQgYG1heGAgKGluY2x1c2l2ZSkuIElmIG9ubHkgb25lXHJcbiAgICAgICAgICogYXJndW1lbnQgaXMgcHJvdmlkZWQgYSBudW1iZXIgYmV0d2VlbiBgMGAgYW5kIHRoZSBnaXZlbiBudW1iZXIgd2lsbCBiZVxyXG4gICAgICAgICAqIHJldHVybmVkLiBJZiBgZmxvYXRpbmdgIGlzIHRydWV5IG9yIGVpdGhlciBgbWluYCBvciBgbWF4YCBhcmUgZmxvYXRzIGFcclxuICAgICAgICAgKiBmbG9hdGluZy1wb2ludCBudW1iZXIgd2lsbCBiZSByZXR1cm5lZCBpbnN0ZWFkIG9mIGFuIGludGVnZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFttaW49MF0gVGhlIG1pbmltdW0gcG9zc2libGUgdmFsdWUuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFttYXg9MV0gVGhlIG1heGltdW0gcG9zc2libGUgdmFsdWUuXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbZmxvYXRpbmc9ZmFsc2VdIFNwZWNpZnkgcmV0dXJuaW5nIGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYSByYW5kb20gbnVtYmVyLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmRvbSgwLCA1KTtcclxuICAgICAgICAgKiAvLyA9PiBhbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yYW5kb20oNSk7XHJcbiAgICAgICAgICogLy8gPT4gYWxzbyBhbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy5yYW5kb20oNSwgdHJ1ZSk7XHJcbiAgICAgICAgICogLy8gPT4gYSBmbG9hdGluZy1wb2ludCBudW1iZXIgYmV0d2VlbiAwIGFuZCA1XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnJhbmRvbSgxLjIsIDUuMik7XHJcbiAgICAgICAgICogLy8gPT4gYSBmbG9hdGluZy1wb2ludCBudW1iZXIgYmV0d2VlbiAxLjIgYW5kIDUuMlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByYW5kb20obWluLCBtYXgsIGZsb2F0aW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBub01pbiA9IG1pbiA9PSBudWxsLFxyXG4gICAgICAgICAgICAgICAgbm9NYXggPSBtYXggPT0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmIChmbG9hdGluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pbiA9PSAnYm9vbGVhbicgJiYgbm9NYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdGluZyA9IG1pbjtcclxuICAgICAgICAgICAgICAgICAgICBtaW4gPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghbm9NYXggJiYgdHlwZW9mIG1heCA9PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdGluZyA9IG1heDtcclxuICAgICAgICAgICAgICAgICAgICBub01heCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5vTWluICYmIG5vTWF4KSB7XHJcbiAgICAgICAgICAgICAgICBtYXggPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1pbiA9ICttaW4gfHwgMDtcclxuICAgICAgICAgICAgaWYgKG5vTWF4KSB7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBtaW47XHJcbiAgICAgICAgICAgICAgICBtaW4gPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWF4ID0gK21heCB8fCAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmbG9hdGluZyB8fCBtaW4gJSAxIHx8IG1heCAlIDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciByYW5kID0gbmF0aXZlUmFuZG9tKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlTWluKG1pbiArIChyYW5kICogKG1heCAtIG1pbiArIHBhcnNlRmxvYXQoJzFlLScgKyAoKHJhbmQgKyAnJykubGVuZ3RoIC0gMSkpKSksIG1heCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VSYW5kb20obWluLCBtYXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVzb2x2ZXMgdGhlIHZhbHVlIG9mIHByb3BlcnR5IGBrZXlgIG9uIGBvYmplY3RgLiBJZiBga2V5YCBpcyBhIGZ1bmN0aW9uXHJcbiAgICAgICAgICogaXQgd2lsbCBiZSBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBvYmplY3RgIGFuZCBpdHMgcmVzdWx0IHJldHVybmVkLFxyXG4gICAgICAgICAqIGVsc2UgdGhlIHByb3BlcnR5IHZhbHVlIGlzIHJldHVybmVkLiBJZiBgb2JqZWN0YCBpcyBmYWxzZXkgdGhlbiBgdW5kZWZpbmVkYFxyXG4gICAgICAgICAqIGlzIHJldHVybmVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHJlc29sdmUuXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgb2JqZWN0ID0ge1xyXG4gICAgICAgICAqICAgJ2NoZWVzZSc6ICdjcnVtcGV0cycsXHJcbiAgICAgICAgICogICAnc3R1ZmYnOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgKiAgICAgcmV0dXJuICdub25zZW5zZSc7XHJcbiAgICAgICAgICogICB9XHJcbiAgICAgICAgICogfTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmVzdWx0KG9iamVjdCwgJ2NoZWVzZScpO1xyXG4gICAgICAgICAqIC8vID0+ICdjcnVtcGV0cydcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8ucmVzdWx0KG9iamVjdCwgJ3N0dWZmJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ25vbnNlbnNlJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXN1bHQob2JqZWN0LCBrZXkpIHtcclxuICAgICAgICAgICAgaWYgKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNGdW5jdGlvbih2YWx1ZSkgPyBvYmplY3Rba2V5XSgpIDogdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbWljcm8tdGVtcGxhdGluZyBtZXRob2QgdGhhdCBoYW5kbGVzIGFyYml0cmFyeSBkZWxpbWl0ZXJzLCBwcmVzZXJ2ZXNcclxuICAgICAgICAgKiB3aGl0ZXNwYWNlLCBhbmQgY29ycmVjdGx5IGVzY2FwZXMgcXVvdGVzIHdpdGhpbiBpbnRlcnBvbGF0ZWQgY29kZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IEluIHRoZSBkZXZlbG9wbWVudCBidWlsZCwgYF8udGVtcGxhdGVgIHV0aWxpemVzIHNvdXJjZVVSTHMgZm9yIGVhc2llclxyXG4gICAgICAgICAqIGRlYnVnZ2luZy4gU2VlIGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL2RldmVsb3BlcnRvb2xzL3NvdXJjZW1hcHMvI3RvYy1zb3VyY2V1cmxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHByZWNvbXBpbGluZyB0ZW1wbGF0ZXMgc2VlOlxyXG4gICAgICAgICAqIGh0dHA6Ly9sb2Rhc2guY29tL2N1c3RvbS1idWlsZHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIENocm9tZSBleHRlbnNpb24gc2FuZGJveGVzIHNlZTpcclxuICAgICAgICAgKiBodHRwOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vc3RhYmxlL2V4dGVuc2lvbnMvc2FuZGJveGluZ0V2YWwuaHRtbFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZW1wbGF0ZSB0ZXh0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFRoZSBkYXRhIG9iamVjdCB1c2VkIHRvIHBvcHVsYXRlIHRoZSB0ZXh0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5lc2NhcGVdIFRoZSBcImVzY2FwZVwiIGRlbGltaXRlci5cclxuICAgICAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXZhbHVhdGVdIFRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5pbXBvcnRzXSBBbiBvYmplY3QgdG8gaW1wb3J0IGludG8gdGhlIHRlbXBsYXRlIGFzIGxvY2FsIHZhcmlhYmxlcy5cclxuICAgICAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuaW50ZXJwb2xhdGVdIFRoZSBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc291cmNlVVJMXSBUaGUgc291cmNlVVJMIG9mIHRoZSB0ZW1wbGF0ZSdzIGNvbXBpbGVkIHNvdXJjZS5cclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZhcmlhYmxlXSBUaGUgZGF0YSBvYmplY3QgdmFyaWFibGUgbmFtZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb258c3RyaW5nfSBSZXR1cm5zIGEgY29tcGlsZWQgZnVuY3Rpb24gd2hlbiBubyBgZGF0YWAgb2JqZWN0XHJcbiAgICAgICAgICogIGlzIGdpdmVuLCBlbHNlIGl0IHJldHVybnMgdGhlIGludGVycG9sYXRlZCB0ZXh0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyB0aGUgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlciB0byBjcmVhdGUgYSBjb21waWxlZCB0ZW1wbGF0ZVxyXG4gICAgICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSBuYW1lICU+Jyk7XHJcbiAgICAgICAgICogY29tcGlsZWQoeyAnbmFtZSc6ICdmcmVkJyB9KTtcclxuICAgICAgICAgKiAvLyA9PiAnaGVsbG8gZnJlZCdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIHRoZSBcImVzY2FwZVwiIGRlbGltaXRlciB0byBlc2NhcGUgSFRNTCBpbiBkYXRhIHByb3BlcnR5IHZhbHVlc1xyXG4gICAgICAgICAqIF8udGVtcGxhdGUoJzxiPjwlLSB2YWx1ZSAlPjwvYj4nLCB7ICd2YWx1ZSc6ICc8c2NyaXB0PicgfSk7XHJcbiAgICAgICAgICogLy8gPT4gJzxiPiZsdDtzY3JpcHQmZ3Q7PC9iPidcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIHVzaW5nIHRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyIHRvIGdlbmVyYXRlIEhUTUxcclxuICAgICAgICAgKiB2YXIgbGlzdCA9ICc8JSBfLmZvckVhY2gocGVvcGxlLCBmdW5jdGlvbihuYW1lKSB7ICU+PGxpPjwlLSBuYW1lICU+PC9saT48JSB9KTsgJT4nO1xyXG4gICAgICAgICAqIF8udGVtcGxhdGUobGlzdCwgeyAncGVvcGxlJzogWydmcmVkJywgJ2Jhcm5leSddIH0pO1xyXG4gICAgICAgICAqIC8vID0+ICc8bGk+ZnJlZDwvbGk+PGxpPmJhcm5leTwvbGk+J1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgdGhlIEVTNiBkZWxpbWl0ZXIgYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIGRlZmF1bHQgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlclxyXG4gICAgICAgICAqIF8udGVtcGxhdGUoJ2hlbGxvICR7IG5hbWUgfScsIHsgJ25hbWUnOiAncGViYmxlcycgfSk7XHJcbiAgICAgICAgICogLy8gPT4gJ2hlbGxvIHBlYmJsZXMnXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyB0aGUgaW50ZXJuYWwgYHByaW50YCBmdW5jdGlvbiBpbiBcImV2YWx1YXRlXCIgZGVsaW1pdGVyc1xyXG4gICAgICAgICAqIF8udGVtcGxhdGUoJzwlIHByaW50KFwiaGVsbG8gXCIgKyBuYW1lKTsgJT4hJywgeyAnbmFtZSc6ICdiYXJuZXknIH0pO1xyXG4gICAgICAgICAqIC8vID0+ICdoZWxsbyBiYXJuZXkhJ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgYSBjdXN0b20gdGVtcGxhdGUgZGVsaW1pdGVyc1xyXG4gICAgICAgICAqIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcclxuICAgICAgICAgKiAgICdpbnRlcnBvbGF0ZSc6IC97eyhbXFxzXFxTXSs/KX19L2dcclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy50ZW1wbGF0ZSgnaGVsbG8ge3sgbmFtZSB9fSEnLCB7ICduYW1lJzogJ211c3RhY2hlJyB9KTtcclxuICAgICAgICAgKiAvLyA9PiAnaGVsbG8gbXVzdGFjaGUhJ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgdGhlIGBpbXBvcnRzYCBvcHRpb24gdG8gaW1wb3J0IGpRdWVyeVxyXG4gICAgICAgICAqIHZhciBsaXN0ID0gJzwlIGpxLmVhY2gocGVvcGxlLCBmdW5jdGlvbihuYW1lKSB7ICU+PGxpPjwlLSBuYW1lICU+PC9saT48JSB9KTsgJT4nO1xyXG4gICAgICAgICAqIF8udGVtcGxhdGUobGlzdCwgeyAncGVvcGxlJzogWydmcmVkJywgJ2Jhcm5leSddIH0sIHsgJ2ltcG9ydHMnOiB7ICdqcSc6IGpRdWVyeSB9IH0pO1xyXG4gICAgICAgICAqIC8vID0+ICc8bGk+ZnJlZDwvbGk+PGxpPmJhcm5leTwvbGk+J1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgdGhlIGBzb3VyY2VVUkxgIG9wdGlvbiB0byBzcGVjaWZ5IGEgY3VzdG9tIHNvdXJjZVVSTCBmb3IgdGhlIHRlbXBsYXRlXHJcbiAgICAgICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gPCU9IG5hbWUgJT4nLCBudWxsLCB7ICdzb3VyY2VVUkwnOiAnL2Jhc2ljL2dyZWV0aW5nLmpzdCcgfSk7XHJcbiAgICAgICAgICogY29tcGlsZWQoZGF0YSk7XHJcbiAgICAgICAgICogLy8gPT4gZmluZCB0aGUgc291cmNlIG9mIFwiZ3JlZXRpbmcuanN0XCIgdW5kZXIgdGhlIFNvdXJjZXMgdGFiIG9yIFJlc291cmNlcyBwYW5lbCBvZiB0aGUgd2ViIGluc3BlY3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gdXNpbmcgdGhlIGB2YXJpYWJsZWAgb3B0aW9uIHRvIGVuc3VyZSBhIHdpdGgtc3RhdGVtZW50IGlzbid0IHVzZWQgaW4gdGhlIGNvbXBpbGVkIHRlbXBsYXRlXHJcbiAgICAgICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGkgPCU9IGRhdGEubmFtZSAlPiEnLCBudWxsLCB7ICd2YXJpYWJsZSc6ICdkYXRhJyB9KTtcclxuICAgICAgICAgKiBjb21waWxlZC5zb3VyY2U7XHJcbiAgICAgICAgICogLy8gPT4gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAqICAgdmFyIF9fdCwgX19wID0gJycsIF9fZSA9IF8uZXNjYXBlO1xyXG4gICAgICAgICAqICAgX19wICs9ICdoaSAnICsgKChfX3QgPSAoIGRhdGEubmFtZSApKSA9PSBudWxsID8gJycgOiBfX3QpICsgJyEnO1xyXG4gICAgICAgICAqICAgcmV0dXJuIF9fcDtcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB1c2luZyB0aGUgYHNvdXJjZWAgcHJvcGVydHkgdG8gaW5saW5lIGNvbXBpbGVkIHRlbXBsYXRlcyBmb3IgbWVhbmluZ2Z1bFxyXG4gICAgICAgICAqIC8vIGxpbmUgbnVtYmVycyBpbiBlcnJvciBtZXNzYWdlcyBhbmQgYSBzdGFjayB0cmFjZVxyXG4gICAgICAgICAqIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKGN3ZCwgJ2pzdC5qcycpLCAnXFxcclxuICAgICAgICAgKiAgIHZhciBKU1QgPSB7XFxcclxuICAgICAgICAgKiAgICAgXCJtYWluXCI6ICcgKyBfLnRlbXBsYXRlKG1haW5UZXh0KS5zb3VyY2UgKyAnXFxcclxuICAgICAgICAgKiAgIH07XFxcclxuICAgICAgICAgKiAnKTtcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdGVtcGxhdGUodGV4dCwgZGF0YSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAvLyBiYXNlZCBvbiBKb2huIFJlc2lnJ3MgYHRtcGxgIGltcGxlbWVudGF0aW9uXHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9lam9obi5vcmcvYmxvZy9qYXZhc2NyaXB0LW1pY3JvLXRlbXBsYXRpbmcvXHJcbiAgICAgICAgICAgIC8vIGFuZCBMYXVyYSBEb2t0b3JvdmEncyBkb1QuanNcclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL29sYWRvL2RvVFxyXG4gICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSBsb2Rhc2gudGVtcGxhdGVTZXR0aW5ncztcclxuICAgICAgICAgICAgdGV4dCA9IFN0cmluZyh0ZXh0IHx8ICcnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGF2b2lkIG1pc3NpbmcgZGVwZW5kZW5jaWVzIHdoZW4gYGl0ZXJhdG9yVGVtcGxhdGVgIGlzIG5vdCBkZWZpbmVkXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBkZWZhdWx0cyh7fSwgb3B0aW9ucywgc2V0dGluZ3MpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGltcG9ydHMgPSBkZWZhdWx0cyh7fSwgb3B0aW9ucy5pbXBvcnRzLCBzZXR0aW5ncy5pbXBvcnRzKSxcclxuICAgICAgICAgICAgICAgIGltcG9ydHNLZXlzID0ga2V5cyhpbXBvcnRzKSxcclxuICAgICAgICAgICAgICAgIGltcG9ydHNWYWx1ZXMgPSB2YWx1ZXMoaW1wb3J0cyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaXNFdmFsdWF0aW5nLFxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAwLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGUgPSBvcHRpb25zLmludGVycG9sYXRlIHx8IHJlTm9NYXRjaCxcclxuICAgICAgICAgICAgICAgIHNvdXJjZSA9IFwiX19wICs9ICdcIjtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbXBpbGUgdGhlIHJlZ2V4cCB0byBtYXRjaCBlYWNoIGRlbGltaXRlclxyXG4gICAgICAgICAgICB2YXIgcmVEZWxpbWl0ZXJzID0gUmVnRXhwKFxyXG4gICAgICAgICAgICAgICAgKG9wdGlvbnMuZXNjYXBlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgJ3wnICtcclxuICAgICAgICAgICAgICAgIGludGVycG9sYXRlLnNvdXJjZSArICd8JyArXHJcbiAgICAgICAgICAgICAgICAoaW50ZXJwb2xhdGUgPT09IHJlSW50ZXJwb2xhdGUgPyByZUVzVGVtcGxhdGUgOiByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXHJcbiAgICAgICAgICAgICAgICAob3B0aW9ucy5ldmFsdWF0ZSB8fCByZU5vTWF0Y2gpLnNvdXJjZSArICd8JCcsICdnJyk7XHJcblxyXG4gICAgICAgICAgICB0ZXh0LnJlcGxhY2UocmVEZWxpbWl0ZXJzLCBmdW5jdGlvbiAobWF0Y2gsIGVzY2FwZVZhbHVlLCBpbnRlcnBvbGF0ZVZhbHVlLCBlc1RlbXBsYXRlVmFsdWUsIGV2YWx1YXRlVmFsdWUsIG9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVWYWx1ZSB8fCAoaW50ZXJwb2xhdGVWYWx1ZSA9IGVzVGVtcGxhdGVWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZXNjYXBlIGNoYXJhY3RlcnMgdGhhdCBjYW5ub3QgYmUgaW5jbHVkZWQgaW4gc3RyaW5nIGxpdGVyYWxzXHJcbiAgICAgICAgICAgICAgICBzb3VyY2UgKz0gdGV4dC5zbGljZShpbmRleCwgb2Zmc2V0KS5yZXBsYWNlKHJlVW5lc2NhcGVkU3RyaW5nLCBlc2NhcGVTdHJpbmdDaGFyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyByZXBsYWNlIGRlbGltaXRlcnMgd2l0aCBzbmlwcGV0c1xyXG4gICAgICAgICAgICAgICAgaWYgKGVzY2FwZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlICs9IFwiJyArXFxuX19lKFwiICsgZXNjYXBlVmFsdWUgKyBcIikgK1xcbidcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChldmFsdWF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNFdmFsdWF0aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGVWYWx1ZSArIFwiO1xcbl9fcCArPSAnXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJwb2xhdGVWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSArPSBcIicgK1xcbigoX190ID0gKFwiICsgaW50ZXJwb2xhdGVWYWx1ZSArIFwiKSkgPT0gbnVsbCA/ICcnIDogX190KSArXFxuJ1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIEpTIGVuZ2luZSBlbWJlZGRlZCBpbiBBZG9iZSBwcm9kdWN0cyByZXF1aXJlcyByZXR1cm5pbmcgdGhlIGBtYXRjaGBcclxuICAgICAgICAgICAgICAgIC8vIHN0cmluZyBpbiBvcmRlciB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGBvZmZzZXRgIHZhbHVlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc291cmNlICs9IFwiJztcXG5cIjtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIGB2YXJpYWJsZWAgaXMgbm90IHNwZWNpZmllZCwgd3JhcCBhIHdpdGgtc3RhdGVtZW50IGFyb3VuZCB0aGUgZ2VuZXJhdGVkXHJcbiAgICAgICAgICAgIC8vIGNvZGUgdG8gYWRkIHRoZSBkYXRhIG9iamVjdCB0byB0aGUgdG9wIG9mIHRoZSBzY29wZSBjaGFpblxyXG4gICAgICAgICAgICB2YXIgdmFyaWFibGUgPSBvcHRpb25zLnZhcmlhYmxlLFxyXG4gICAgICAgICAgICAgICAgaGFzVmFyaWFibGUgPSB2YXJpYWJsZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghaGFzVmFyaWFibGUpIHtcclxuICAgICAgICAgICAgICAgIHZhcmlhYmxlID0gJ29iaic7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSAnd2l0aCAoJyArIHZhcmlhYmxlICsgJykge1xcbicgKyBzb3VyY2UgKyAnXFxufVxcbic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY2xlYW51cCBjb2RlIGJ5IHN0cmlwcGluZyBlbXB0eSBzdHJpbmdzXHJcbiAgICAgICAgICAgIHNvdXJjZSA9IChpc0V2YWx1YXRpbmcgPyBzb3VyY2UucmVwbGFjZShyZUVtcHR5U3RyaW5nTGVhZGluZywgJycpIDogc291cmNlKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ01pZGRsZSwgJyQxJylcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKHJlRW1wdHlTdHJpbmdUcmFpbGluZywgJyQxOycpO1xyXG5cclxuICAgICAgICAgICAgLy8gZnJhbWUgY29kZSBhcyB0aGUgZnVuY3Rpb24gYm9keVxyXG4gICAgICAgICAgICBzb3VyY2UgPSAnZnVuY3Rpb24oJyArIHZhcmlhYmxlICsgJykge1xcbicgK1xyXG4gICAgICAgICAgICAgICAgKGhhc1ZhcmlhYmxlID8gJycgOiB2YXJpYWJsZSArICcgfHwgKCcgKyB2YXJpYWJsZSArICcgPSB7fSk7XFxuJykgK1xyXG4gICAgICAgICAgICAgICAgXCJ2YXIgX190LCBfX3AgPSAnJywgX19lID0gXy5lc2NhcGVcIiArXHJcbiAgICAgICAgICAgICAgICAoaXNFdmFsdWF0aW5nID8gJywgX19qID0gQXJyYXkucHJvdG90eXBlLmpvaW47XFxuJyArXHJcbiAgICAgICAgICAgICAgICBcImZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxcblwiIDogJztcXG4nXHJcbiAgICAgICAgICAgICkgK1xyXG4gICAgICAgICAgICAgICAgc291cmNlICtcclxuICAgICAgICAgICAgICAgICdyZXR1cm4gX19wXFxufSc7XHJcblxyXG4gICAgICAgICAgICAvLyBVc2UgYSBzb3VyY2VVUkwgZm9yIGVhc2llciBkZWJ1Z2dpbmcuXHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL2RldmVsb3BlcnRvb2xzL3NvdXJjZW1hcHMvI3RvYy1zb3VyY2V1cmxcclxuICAgICAgICAgICAgdmFyIHNvdXJjZVVSTCA9ICdcXG4vKlxcbi8vIyBzb3VyY2VVUkw9JyArIChvcHRpb25zLnNvdXJjZVVSTCB8fCAnL2xvZGFzaC90ZW1wbGF0ZS9zb3VyY2VbJyArICh0ZW1wbGF0ZUNvdW50ZXIrKykgKyAnXScpICsgJ1xcbiovJztcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gRnVuY3Rpb24oaW1wb3J0c0tleXMsICdyZXR1cm4gJyArIHNvdXJjZSArIHNvdXJjZVVSTCkuYXBwbHkodW5kZWZpbmVkLCBpbXBvcnRzVmFsdWVzKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0KGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHByb3ZpZGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uJ3Mgc291cmNlIGJ5IGl0cyBgdG9TdHJpbmdgIG1ldGhvZCwgaW5cclxuICAgICAgICAgICAgLy8gc3VwcG9ydGVkIGVudmlyb25tZW50cywgb3IgdGhlIGBzb3VyY2VgIHByb3BlcnR5IGFzIGEgY29udmVuaWVuY2UgZm9yXHJcbiAgICAgICAgICAgIC8vIGlubGluaW5nIGNvbXBpbGVkIHRlbXBsYXRlcyBkdXJpbmcgdGhlIGJ1aWxkIHByb2Nlc3NcclxuICAgICAgICAgICAgcmVzdWx0LnNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV4ZWN1dGVzIHRoZSBjYWxsYmFjayBgbmAgdGltZXMsIHJldHVybmluZyBhbiBhcnJheSBvZiB0aGUgcmVzdWx0c1xyXG4gICAgICAgICAqIG9mIGVhY2ggY2FsbGJhY2sgZXhlY3V0aW9uLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXHJcbiAgICAgICAgICogd2l0aCBvbmUgYXJndW1lbnQ7IChpbmRleCkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBleGVjdXRlIHRoZSBjYWxsYmFjay5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggYGNhbGxiYWNrYCBleGVjdXRpb24uXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBkaWNlUm9sbHMgPSBfLnRpbWVzKDMsIF8ucGFydGlhbChfLnJhbmRvbSwgMSwgNikpO1xyXG4gICAgICAgICAqIC8vID0+IFszLCA2LCA0XVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy50aW1lcygzLCBmdW5jdGlvbihuKSB7IG1hZ2UuY2FzdFNwZWxsKG4pOyB9KTtcclxuICAgICAgICAgKiAvLyA9PiBjYWxscyBgbWFnZS5jYXN0U3BlbGwobilgIHRocmVlIHRpbWVzLCBwYXNzaW5nIGBuYCBvZiBgMGAsIGAxYCwgYW5kIGAyYCByZXNwZWN0aXZlbHlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8udGltZXMoMywgZnVuY3Rpb24obikgeyB0aGlzLmNhc3Qobik7IH0sIG1hZ2UpO1xyXG4gICAgICAgICAqIC8vID0+IGFsc28gY2FsbHMgYG1hZ2UuY2FzdFNwZWxsKG4pYCB0aHJlZSB0aW1lc1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB0aW1lcyhuLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICBuID0gKG4gPSArbikgPiAtMSA/IG4gOiAwO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEFycmF5KG4pO1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDEpO1xyXG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IG4pIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBjYWxsYmFjayhpbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBpbnZlcnNlIG9mIGBfLmVzY2FwZWAgdGhpcyBtZXRob2QgY29udmVydHMgdGhlIEhUTUwgZW50aXRpZXNcclxuICAgICAgICAgKiBgJmFtcDtgLCBgJmx0O2AsIGAmZ3Q7YCwgYCZxdW90O2AsIGFuZCBgJiMzOTtgIGluIGBzdHJpbmdgIHRvIHRoZWlyXHJcbiAgICAgICAgICogY29ycmVzcG9uZGluZyBjaGFyYWN0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byB1bmVzY2FwZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgc3RyaW5nLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfLnVuZXNjYXBlKCdGcmVkLCBCYXJuZXkgJmFtcDsgUGViYmxlcycpO1xyXG4gICAgICAgICAqIC8vID0+ICdGcmVkLCBCYXJuZXkgJiBQZWJibGVzJ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB1bmVzY2FwZShzdHJpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA9PSBudWxsID8gJycgOiBTdHJpbmcoc3RyaW5nKS5yZXBsYWNlKHJlRXNjYXBlZEh0bWwsIHVuZXNjYXBlSHRtbENoYXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2VuZXJhdGVzIGEgdW5pcXVlIElELiBJZiBgcHJlZml4YCBpcyBwcm92aWRlZCB0aGUgSUQgd2lsbCBiZSBhcHBlbmRlZCB0byBpdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3ByZWZpeF0gVGhlIHZhbHVlIHRvIHByZWZpeCB0aGUgSUQgd2l0aC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmlxdWUgSUQuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8udW5pcXVlSWQoJ2NvbnRhY3RfJyk7XHJcbiAgICAgICAgICogLy8gPT4gJ2NvbnRhY3RfMTA0J1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXy51bmlxdWVJZCgpO1xyXG4gICAgICAgICAqIC8vID0+ICcxMDUnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCkge1xyXG4gICAgICAgICAgICB2YXIgaWQgPSArK2lkQ291bnRlcjtcclxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhwcmVmaXggPT0gbnVsbCA/ICcnIDogcHJlZml4KSArIGlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBgbG9kYXNoYCBvYmplY3QgdGhhdCB3cmFwcyB0aGUgZ2l2ZW4gdmFsdWUgd2l0aCBleHBsaWNpdFxyXG4gICAgICAgICAqIG1ldGhvZCBjaGFpbmluZyBlbmFibGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENoYWluaW5nXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSB3cmFwcGVyIG9iamVjdC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXHJcbiAgICAgICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMzYgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdhZ2UnOiA0MCB9LFxyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxyXG4gICAgICAgICAqIF07XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB2YXIgeW91bmdlc3QgPSBfLmNoYWluKGNoYXJhY3RlcnMpXHJcbiAgICAgICAgICogICAgIC5zb3J0QnkoJ2FnZScpXHJcbiAgICAgICAgICogICAgIC5tYXAoZnVuY3Rpb24oY2hyKSB7IHJldHVybiBjaHIubmFtZSArICcgaXMgJyArIGNoci5hZ2U7IH0pXHJcbiAgICAgICAgICogICAgIC5maXJzdCgpXHJcbiAgICAgICAgICogICAgIC52YWx1ZSgpO1xyXG4gICAgICAgICAqIC8vID0+ICdwZWJibGVzIGlzIDEnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNoYWluKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IGxvZGFzaFdyYXBwZXIodmFsdWUpO1xyXG4gICAgICAgICAgICB2YWx1ZS5fX2NoYWluX18gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbnZva2VzIGBpbnRlcmNlcHRvcmAgd2l0aCB0aGUgYHZhbHVlYCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgYW5kIHRoZW5cclxuICAgICAgICAgKiByZXR1cm5zIGB2YWx1ZWAuIFRoZSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZFxyXG4gICAgICAgICAqIGNoYWluIGluIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9ucyBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW5cclxuICAgICAgICAgKiB0aGUgY2hhaW4uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm92aWRlIHRvIGBpbnRlcmNlcHRvcmAuXHJcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW50ZXJjZXB0b3IgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfKFsxLCAyLCAzLCA0XSlcclxuICAgICAgICAgKiAgLnRhcChmdW5jdGlvbihhcnJheSkgeyBhcnJheS5wb3AoKTsgfSlcclxuICAgICAgICAgKiAgLnJldmVyc2UoKVxyXG4gICAgICAgICAqICAudmFsdWUoKTtcclxuICAgICAgICAgKiAvLyA9PiBbMywgMiwgMV1cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdGFwKHZhbHVlLCBpbnRlcmNlcHRvcikge1xyXG4gICAgICAgICAgICBpbnRlcmNlcHRvcih2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZXMgZXhwbGljaXQgbWV0aG9kIGNoYWluaW5nIG9uIHRoZSB3cmFwcGVyIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBuYW1lIGNoYWluXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgd3JhcHBlciBvYmplY3QuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xyXG4gICAgICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcclxuICAgICAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cclxuICAgICAgICAgKiBdO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gd2l0aG91dCBleHBsaWNpdCBjaGFpbmluZ1xyXG4gICAgICAgICAqIF8oY2hhcmFjdGVycykuZmlyc3QoKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyB3aXRoIGV4cGxpY2l0IGNoYWluaW5nXHJcbiAgICAgICAgICogXyhjaGFyYWN0ZXJzKS5jaGFpbigpXHJcbiAgICAgICAgICogICAuZmlyc3QoKVxyXG4gICAgICAgICAqICAgLnBpY2soJ2FnZScpXHJcbiAgICAgICAgICogICAudmFsdWUoKTtcclxuICAgICAgICAgKiAvLyA9PiB7ICdhZ2UnOiAzNiB9XHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyYXBwZXJDaGFpbigpIHtcclxuICAgICAgICAgICAgdGhpcy5fX2NoYWluX18gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb2R1Y2VzIHRoZSBgdG9TdHJpbmdgIHJlc3VsdCBvZiB0aGUgd3JhcHBlZCB2YWx1ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBuYW1lIHRvU3RyaW5nXHJcbiAgICAgICAgICogQG1lbWJlck9mIF9cclxuICAgICAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcgcmVzdWx0LlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBfKFsxLCAyLCAzXSkudG9TdHJpbmcoKTtcclxuICAgICAgICAgKiAvLyA9PiAnMSwyLDMnXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyYXBwZXJUb1N0cmluZygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh0aGlzLl9fd3JhcHBlZF9fKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV4dHJhY3RzIHRoZSB3cmFwcGVkIHZhbHVlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQG5hbWUgdmFsdWVPZlxyXG4gICAgICAgICAqIEBtZW1iZXJPZiBfXHJcbiAgICAgICAgICogQGFsaWFzIHZhbHVlXHJcbiAgICAgICAgICogQGNhdGVnb3J5IENoYWluaW5nXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHdyYXBwZWQgdmFsdWUuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIF8oWzEsIDIsIDNdKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICogLy8gPT4gWzEsIDIsIDNdXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyYXBwZXJWYWx1ZU9mKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fX3dyYXBwZWRfXztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICAvLyBhZGQgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHdyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmdcclxuICAgICAgICBsb2Rhc2guYWZ0ZXIgPSBhZnRlcjtcclxuICAgICAgICBsb2Rhc2guYXNzaWduID0gYXNzaWduO1xyXG4gICAgICAgIGxvZGFzaC5hdCA9IGF0O1xyXG4gICAgICAgIGxvZGFzaC5iaW5kID0gYmluZDtcclxuICAgICAgICBsb2Rhc2guYmluZEFsbCA9IGJpbmRBbGw7XHJcbiAgICAgICAgbG9kYXNoLmJpbmRLZXkgPSBiaW5kS2V5O1xyXG4gICAgICAgIGxvZGFzaC5jaGFpbiA9IGNoYWluO1xyXG4gICAgICAgIGxvZGFzaC5jb21wYWN0ID0gY29tcGFjdDtcclxuICAgICAgICBsb2Rhc2guY29tcG9zZSA9IGNvbXBvc2U7XHJcbiAgICAgICAgbG9kYXNoLmNvbnN0YW50ID0gY29uc3RhbnQ7XHJcbiAgICAgICAgbG9kYXNoLmNvdW50QnkgPSBjb3VudEJ5O1xyXG4gICAgICAgIGxvZGFzaC5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgICAgICAgbG9kYXNoLmNyZWF0ZUNhbGxiYWNrID0gY3JlYXRlQ2FsbGJhY2s7XHJcbiAgICAgICAgbG9kYXNoLmN1cnJ5ID0gY3Vycnk7XHJcbiAgICAgICAgbG9kYXNoLmRlYm91bmNlID0gZGVib3VuY2U7XHJcbiAgICAgICAgbG9kYXNoLmRlZmF1bHRzID0gZGVmYXVsdHM7XHJcbiAgICAgICAgbG9kYXNoLmRlZmVyID0gZGVmZXI7XHJcbiAgICAgICAgbG9kYXNoLmRlbGF5ID0gZGVsYXk7XHJcbiAgICAgICAgbG9kYXNoLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO1xyXG4gICAgICAgIGxvZGFzaC5maWx0ZXIgPSBmaWx0ZXI7XHJcbiAgICAgICAgbG9kYXNoLmZsYXR0ZW4gPSBmbGF0dGVuO1xyXG4gICAgICAgIGxvZGFzaC5mb3JFYWNoID0gZm9yRWFjaDtcclxuICAgICAgICBsb2Rhc2guZm9yRWFjaFJpZ2h0ID0gZm9yRWFjaFJpZ2h0O1xyXG4gICAgICAgIGxvZGFzaC5mb3JJbiA9IGZvckluO1xyXG4gICAgICAgIGxvZGFzaC5mb3JJblJpZ2h0ID0gZm9ySW5SaWdodDtcclxuICAgICAgICBsb2Rhc2guZm9yT3duID0gZm9yT3duO1xyXG4gICAgICAgIGxvZGFzaC5mb3JPd25SaWdodCA9IGZvck93blJpZ2h0O1xyXG4gICAgICAgIGxvZGFzaC5mdW5jdGlvbnMgPSBmdW5jdGlvbnM7XHJcbiAgICAgICAgbG9kYXNoLmdyb3VwQnkgPSBncm91cEJ5O1xyXG4gICAgICAgIGxvZGFzaC5pbmRleEJ5ID0gaW5kZXhCeTtcclxuICAgICAgICBsb2Rhc2guaW5pdGlhbCA9IGluaXRpYWw7XHJcbiAgICAgICAgbG9kYXNoLmludGVyc2VjdGlvbiA9IGludGVyc2VjdGlvbjtcclxuICAgICAgICBsb2Rhc2guaW52ZXJ0ID0gaW52ZXJ0O1xyXG4gICAgICAgIGxvZGFzaC5pbnZva2UgPSBpbnZva2U7XHJcbiAgICAgICAgbG9kYXNoLmtleXMgPSBrZXlzO1xyXG4gICAgICAgIGxvZGFzaC5tYXAgPSBtYXA7XHJcbiAgICAgICAgbG9kYXNoLm1hcFZhbHVlcyA9IG1hcFZhbHVlcztcclxuICAgICAgICBsb2Rhc2gubWF4ID0gbWF4O1xyXG4gICAgICAgIGxvZGFzaC5tZW1vaXplID0gbWVtb2l6ZTtcclxuICAgICAgICBsb2Rhc2gubWVyZ2UgPSBtZXJnZTtcclxuICAgICAgICBsb2Rhc2gubWluID0gbWluO1xyXG4gICAgICAgIGxvZGFzaC5vbWl0ID0gb21pdDtcclxuICAgICAgICBsb2Rhc2gub25jZSA9IG9uY2U7XHJcbiAgICAgICAgbG9kYXNoLnBhaXJzID0gcGFpcnM7XHJcbiAgICAgICAgbG9kYXNoLnBhcnRpYWwgPSBwYXJ0aWFsO1xyXG4gICAgICAgIGxvZGFzaC5wYXJ0aWFsUmlnaHQgPSBwYXJ0aWFsUmlnaHQ7XHJcbiAgICAgICAgbG9kYXNoLnBpY2sgPSBwaWNrO1xyXG4gICAgICAgIGxvZGFzaC5wbHVjayA9IHBsdWNrO1xyXG4gICAgICAgIGxvZGFzaC5wcm9wZXJ0eSA9IHByb3BlcnR5O1xyXG4gICAgICAgIGxvZGFzaC5wdWxsID0gcHVsbDtcclxuICAgICAgICBsb2Rhc2gucmFuZ2UgPSByYW5nZTtcclxuICAgICAgICBsb2Rhc2gucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIGxvZGFzaC5yZW1vdmUgPSByZW1vdmU7XHJcbiAgICAgICAgbG9kYXNoLnJlc3QgPSByZXN0O1xyXG4gICAgICAgIGxvZGFzaC5zaHVmZmxlID0gc2h1ZmZsZTtcclxuICAgICAgICBsb2Rhc2guc29ydEJ5ID0gc29ydEJ5O1xyXG4gICAgICAgIGxvZGFzaC50YXAgPSB0YXA7XHJcbiAgICAgICAgbG9kYXNoLnRocm90dGxlID0gdGhyb3R0bGU7XHJcbiAgICAgICAgbG9kYXNoLnRpbWVzID0gdGltZXM7XHJcbiAgICAgICAgbG9kYXNoLnRvQXJyYXkgPSB0b0FycmF5O1xyXG4gICAgICAgIGxvZGFzaC50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgICAgICAgbG9kYXNoLnVuaW9uID0gdW5pb247XHJcbiAgICAgICAgbG9kYXNoLnVuaXEgPSB1bmlxO1xyXG4gICAgICAgIGxvZGFzaC52YWx1ZXMgPSB2YWx1ZXM7XHJcbiAgICAgICAgbG9kYXNoLndoZXJlID0gd2hlcmU7XHJcbiAgICAgICAgbG9kYXNoLndpdGhvdXQgPSB3aXRob3V0O1xyXG4gICAgICAgIGxvZGFzaC53cmFwID0gd3JhcDtcclxuICAgICAgICBsb2Rhc2gueG9yID0geG9yO1xyXG4gICAgICAgIGxvZGFzaC56aXAgPSB6aXA7XHJcbiAgICAgICAgbG9kYXNoLnppcE9iamVjdCA9IHppcE9iamVjdDtcclxuXHJcbiAgICAgICAgLy8gYWRkIGFsaWFzZXNcclxuICAgICAgICBsb2Rhc2guY29sbGVjdCA9IG1hcDtcclxuICAgICAgICBsb2Rhc2guZHJvcCA9IHJlc3Q7XHJcbiAgICAgICAgbG9kYXNoLmVhY2ggPSBmb3JFYWNoO1xyXG4gICAgICAgIGxvZGFzaC5lYWNoUmlnaHQgPSBmb3JFYWNoUmlnaHQ7XHJcbiAgICAgICAgbG9kYXNoLmV4dGVuZCA9IGFzc2lnbjtcclxuICAgICAgICBsb2Rhc2gubWV0aG9kcyA9IGZ1bmN0aW9ucztcclxuICAgICAgICBsb2Rhc2gub2JqZWN0ID0gemlwT2JqZWN0O1xyXG4gICAgICAgIGxvZGFzaC5zZWxlY3QgPSBmaWx0ZXI7XHJcbiAgICAgICAgbG9kYXNoLnRhaWwgPSByZXN0O1xyXG4gICAgICAgIGxvZGFzaC51bmlxdWUgPSB1bmlxO1xyXG4gICAgICAgIGxvZGFzaC51bnppcCA9IHppcDtcclxuXHJcbiAgICAgICAgLy8gYWRkIGZ1bmN0aW9ucyB0byBgbG9kYXNoLnByb3RvdHlwZWBcclxuICAgICAgICBtaXhpbihsb2Rhc2gpO1xyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLy8gYWRkIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB1bndyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmdcclxuICAgICAgICBsb2Rhc2guY2xvbmUgPSBjbG9uZTtcclxuICAgICAgICBsb2Rhc2guY2xvbmVEZWVwID0gY2xvbmVEZWVwO1xyXG4gICAgICAgIGxvZGFzaC5jb250YWlucyA9IGNvbnRhaW5zO1xyXG4gICAgICAgIGxvZGFzaC5lc2NhcGUgPSBlc2NhcGU7XHJcbiAgICAgICAgbG9kYXNoLmV2ZXJ5ID0gZXZlcnk7XHJcbiAgICAgICAgbG9kYXNoLmZpbmQgPSBmaW5kO1xyXG4gICAgICAgIGxvZGFzaC5maW5kSW5kZXggPSBmaW5kSW5kZXg7XHJcbiAgICAgICAgbG9kYXNoLmZpbmRLZXkgPSBmaW5kS2V5O1xyXG4gICAgICAgIGxvZGFzaC5maW5kTGFzdCA9IGZpbmRMYXN0O1xyXG4gICAgICAgIGxvZGFzaC5maW5kTGFzdEluZGV4ID0gZmluZExhc3RJbmRleDtcclxuICAgICAgICBsb2Rhc2guZmluZExhc3RLZXkgPSBmaW5kTGFzdEtleTtcclxuICAgICAgICBsb2Rhc2guaGFzID0gaGFzO1xyXG4gICAgICAgIGxvZGFzaC5pZGVudGl0eSA9IGlkZW50aXR5O1xyXG4gICAgICAgIGxvZGFzaC5pbmRleE9mID0gaW5kZXhPZjtcclxuICAgICAgICBsb2Rhc2guaXNBcmd1bWVudHMgPSBpc0FyZ3VtZW50cztcclxuICAgICAgICBsb2Rhc2guaXNBcnJheSA9IGlzQXJyYXk7XHJcbiAgICAgICAgbG9kYXNoLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcclxuICAgICAgICBsb2Rhc2guaXNEYXRlID0gaXNEYXRlO1xyXG4gICAgICAgIGxvZGFzaC5pc0VsZW1lbnQgPSBpc0VsZW1lbnQ7XHJcbiAgICAgICAgbG9kYXNoLmlzRW1wdHkgPSBpc0VtcHR5O1xyXG4gICAgICAgIGxvZGFzaC5pc0VxdWFsID0gaXNFcXVhbDtcclxuICAgICAgICBsb2Rhc2guaXNGaW5pdGUgPSBpc0Zpbml0ZTtcclxuICAgICAgICBsb2Rhc2guaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XHJcbiAgICAgICAgbG9kYXNoLmlzTmFOID0gaXNOYU47XHJcbiAgICAgICAgbG9kYXNoLmlzTnVsbCA9IGlzTnVsbDtcclxuICAgICAgICBsb2Rhc2guaXNOdW1iZXIgPSBpc051bWJlcjtcclxuICAgICAgICBsb2Rhc2guaXNPYmplY3QgPSBpc09iamVjdDtcclxuICAgICAgICBsb2Rhc2guaXNQbGFpbk9iamVjdCA9IGlzUGxhaW5PYmplY3Q7XHJcbiAgICAgICAgbG9kYXNoLmlzUmVnRXhwID0gaXNSZWdFeHA7XHJcbiAgICAgICAgbG9kYXNoLmlzU3RyaW5nID0gaXNTdHJpbmc7XHJcbiAgICAgICAgbG9kYXNoLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XHJcbiAgICAgICAgbG9kYXNoLmxhc3RJbmRleE9mID0gbGFzdEluZGV4T2Y7XHJcbiAgICAgICAgbG9kYXNoLm1peGluID0gbWl4aW47XHJcbiAgICAgICAgbG9kYXNoLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O1xyXG4gICAgICAgIGxvZGFzaC5ub29wID0gbm9vcDtcclxuICAgICAgICBsb2Rhc2gubm93ID0gbm93O1xyXG4gICAgICAgIGxvZGFzaC5wYXJzZUludCA9IHBhcnNlSW50O1xyXG4gICAgICAgIGxvZGFzaC5yYW5kb20gPSByYW5kb207XHJcbiAgICAgICAgbG9kYXNoLnJlZHVjZSA9IHJlZHVjZTtcclxuICAgICAgICBsb2Rhc2gucmVkdWNlUmlnaHQgPSByZWR1Y2VSaWdodDtcclxuICAgICAgICBsb2Rhc2gucmVzdWx0ID0gcmVzdWx0O1xyXG4gICAgICAgIGxvZGFzaC5ydW5JbkNvbnRleHQgPSBydW5JbkNvbnRleHQ7XHJcbiAgICAgICAgbG9kYXNoLnNpemUgPSBzaXplO1xyXG4gICAgICAgIGxvZGFzaC5zb21lID0gc29tZTtcclxuICAgICAgICBsb2Rhc2guc29ydGVkSW5kZXggPSBzb3J0ZWRJbmRleDtcclxuICAgICAgICBsb2Rhc2gudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgICAgICBsb2Rhc2gudW5lc2NhcGUgPSB1bmVzY2FwZTtcclxuICAgICAgICBsb2Rhc2gudW5pcXVlSWQgPSB1bmlxdWVJZDtcclxuXHJcbiAgICAgICAgLy8gYWRkIGFsaWFzZXNcclxuICAgICAgICBsb2Rhc2guYWxsID0gZXZlcnk7XHJcbiAgICAgICAgbG9kYXNoLmFueSA9IHNvbWU7XHJcbiAgICAgICAgbG9kYXNoLmRldGVjdCA9IGZpbmQ7XHJcbiAgICAgICAgbG9kYXNoLmZpbmRXaGVyZSA9IGZpbmQ7XHJcbiAgICAgICAgbG9kYXNoLmZvbGRsID0gcmVkdWNlO1xyXG4gICAgICAgIGxvZGFzaC5mb2xkciA9IHJlZHVjZVJpZ2h0O1xyXG4gICAgICAgIGxvZGFzaC5pbmNsdWRlID0gY29udGFpbnM7XHJcbiAgICAgICAgbG9kYXNoLmluamVjdCA9IHJlZHVjZTtcclxuXHJcbiAgICAgICAgbWl4aW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0ge31cclxuICAgICAgICAgICAgZm9yT3duKGxvZGFzaCwgZnVuY3Rpb24gKGZ1bmMsIG1ldGhvZE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVttZXRob2ROYW1lXSA9IGZ1bmM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgICAgIH0oKSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAgICAgLy8gYWRkIGZ1bmN0aW9ucyBjYXBhYmxlIG9mIHJldHVybmluZyB3cmFwcGVkIGFuZCB1bndyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmdcclxuICAgICAgICBsb2Rhc2guZmlyc3QgPSBmaXJzdDtcclxuICAgICAgICBsb2Rhc2gubGFzdCA9IGxhc3Q7XHJcbiAgICAgICAgbG9kYXNoLnNhbXBsZSA9IHNhbXBsZTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGFsaWFzZXNcclxuICAgICAgICBsb2Rhc2gudGFrZSA9IGZpcnN0O1xyXG4gICAgICAgIGxvZGFzaC5oZWFkID0gZmlyc3Q7XHJcblxyXG4gICAgICAgIGZvck93bihsb2Rhc2gsIGZ1bmN0aW9uIChmdW5jLCBtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFja2FibGUgPSBtZXRob2ROYW1lICE9PSAnc2FtcGxlJztcclxuICAgICAgICAgICAgaWYgKCFsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKG4sIGd1YXJkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX18sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmModGhpcy5fX3dyYXBwZWRfXywgbiwgZ3VhcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWNoYWluQWxsICYmIChuID09IG51bGwgfHwgKGd1YXJkICYmICEoY2FsbGJhY2thYmxlICYmIHR5cGVvZiBuID09ICdmdW5jdGlvbicpKSkgPyByZXN1bHQgOiBuZXcgbG9kYXNoV3JhcHBlcihyZXN1bHQsIGNoYWluQWxsKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBzZW1hbnRpYyB2ZXJzaW9uIG51bWJlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAbWVtYmVyT2YgX1xyXG4gICAgICAgICAqIEB0eXBlIHN0cmluZ1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxvZGFzaC5WRVJTSU9OID0gJzIuNC4xJztcclxuXHJcbiAgICAgICAgLy8gYWRkIFwiQ2hhaW5pbmdcIiBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXJcclxuICAgICAgICBsb2Rhc2gucHJvdG90eXBlLmNoYWluID0gd3JhcHBlckNoYWluO1xyXG4gICAgICAgIGxvZGFzaC5wcm90b3R5cGUudG9TdHJpbmcgPSB3cmFwcGVyVG9TdHJpbmc7XHJcbiAgICAgICAgbG9kYXNoLnByb3RvdHlwZS52YWx1ZSA9IHdyYXBwZXJWYWx1ZU9mO1xyXG4gICAgICAgIGxvZGFzaC5wcm90b3R5cGUudmFsdWVPZiA9IHdyYXBwZXJWYWx1ZU9mO1xyXG5cclxuICAgICAgICAvLyBhZGQgYEFycmF5YCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdW53cmFwcGVkIHZhbHVlc1xyXG4gICAgICAgIGZvckVhY2goWydqb2luJywgJ3BvcCcsICdzaGlmdCddLCBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgZnVuYyA9IGFycmF5UmVmW21ldGhvZE5hbWVdO1xyXG4gICAgICAgICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX18sXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLl9fd3JhcHBlZF9fLCBhcmd1bWVudHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGFpbkFsbCA/IG5ldyBsb2Rhc2hXcmFwcGVyKHJlc3VsdCwgY2hhaW5BbGwpIDogcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBhZGQgYEFycmF5YCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdGhlIGV4aXN0aW5nIHdyYXBwZWQgdmFsdWVcclxuICAgICAgICBmb3JFYWNoKFsncHVzaCcsICdyZXZlcnNlJywgJ3NvcnQnLCAndW5zaGlmdCddLCBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgZnVuYyA9IGFycmF5UmVmW21ldGhvZE5hbWVdO1xyXG4gICAgICAgICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZnVuYy5hcHBseSh0aGlzLl9fd3JhcHBlZF9fLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBgQXJyYXlgIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBuZXcgd3JhcHBlZCB2YWx1ZXNcclxuICAgICAgICBmb3JFYWNoKFsnY29uY2F0JywgJ3NsaWNlJywgJ3NwbGljZSddLCBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgZnVuYyA9IGFycmF5UmVmW21ldGhvZE5hbWVdO1xyXG4gICAgICAgICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBsb2Rhc2hXcmFwcGVyKGZ1bmMuYXBwbHkodGhpcy5fX3dyYXBwZWRfXywgYXJndW1lbnRzKSwgdGhpcy5fX2NoYWluX18pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbG9kYXNoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgIC8vIGV4cG9zZSBMby1EYXNoXHJcbiAgICB2YXIgXyA9IHJ1bkluQ29udGV4dCgpO1xyXG5cclxuICAgIC8vIHNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMgbGlrZSByLmpzIGNoZWNrIGZvciBjb25kaXRpb24gcGF0dGVybnMgbGlrZSB0aGUgZm9sbG93aW5nOlxyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgLy8gRXhwb3NlIExvLURhc2ggdG8gdGhlIGdsb2JhbCBvYmplY3QgZXZlbiB3aGVuIGFuIEFNRCBsb2FkZXIgaXMgcHJlc2VudCBpblxyXG4gICAgICAgIC8vIGNhc2UgTG8tRGFzaCBpcyBsb2FkZWQgd2l0aCBhIFJlcXVpcmVKUyBzaGltIGNvbmZpZy5cclxuICAgICAgICAvLyBTZWUgaHR0cDovL3JlcXVpcmVqcy5vcmcvZG9jcy9hcGkuaHRtbCNjb25maWctc2hpbVxyXG4gICAgICAgIHJvb3QuXyA9IF87XHJcblxyXG4gICAgICAgIC8vIGRlZmluZSBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlIHNvLCB0aHJvdWdoIHBhdGggbWFwcGluZywgaXQgY2FuIGJlXHJcbiAgICAgICAgLy8gcmVmZXJlbmNlZCBhcyB0aGUgXCJ1bmRlcnNjb3JlXCIgbW9kdWxlXHJcbiAgICAgICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF87XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIGBleHBvcnRzYCBhZnRlciBgZGVmaW5lYCBpbiBjYXNlIGEgYnVpbGQgb3B0aW1pemVyIGFkZHMgYW4gYGV4cG9ydHNgIG9iamVjdFxyXG4gICAgZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xyXG4gICAgICAgIC8vIGluIE5vZGUuanMgb3IgUmluZ29KU1xyXG4gICAgICAgIGlmIChtb2R1bGVFeHBvcnRzKSB7XHJcbiAgICAgICAgICAgIChmcmVlTW9kdWxlLmV4cG9ydHMgPSBfKS5fID0gXztcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGluIE5hcndoYWwgb3IgUmhpbm8gLXJlcXVpcmVcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZnJlZUV4cG9ydHMuXyA9IF87XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBpbiBhIGJyb3dzZXIgb3IgUmhpbm9cclxuICAgICAgICByb290Ll8gPSBfO1xyXG4gICAgfVxyXG59LmNhbGwodGhpcykpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==