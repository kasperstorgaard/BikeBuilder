!function(){"use strict";angular.module("bikeBuilder",["mgcrea.ngStrap"]).value("version","0.1")}(),function(){"use strict";angular.module("bikeBuilder").controller("FlowCtrl",["$scope","Parts","SvgParts",function($scope,Parts,SvgParts){function partDataFetched(data){ctrl.partData=data}function updateSvgPart(event,part,selectedVariant){selectedVariant.colors&&_.forEach(selectedVariant.colors,function(value,key){SvgParts.updateOne(key,{color:value})})}var ctrl=this;$scope.$on("part:clicked",updateSvgPart),Parts.fetchData().then(partDataFetched)}])}(),function(){"use strict";angular.module("bikeBuilder").controller("PreviewCtrl",["SvgParts","$scope",function(SvgParts,$scope){function getPart(key){return ctrl.SvgDataReady?SvgParts.getOne(key):{}}function dataFetched(){ctrl.SvgDataReady=!0}function updateActiveSvgPart(event,key){SvgParts.updateAll({active:!1}),SvgParts.updateOne(key,{active:!0})}var ctrl=this;ctrl.getPart=getPart,$scope.$on("svgPart:clicked",updateActiveSvgPart),SvgParts.fetchData().then(dataFetched)}])}(),function(){"use strict";angular.module("bikeBuilder").directive("part",function(){return{restrict:"A",scope:{model:"=part"},replace:!0,templateUrl:"part.tpl.html",link:function(scope){function handleClicked(){scope.$emit("part:clicked",scope.model,scope.selectedVariant)}function setSelectedVariant(variant){scope.selectedVariant=variant}scope.handleClicked=handleClicked,scope.selectedVariant=angular.copy(scope.model.variants[0]),scope.setSelectedVariant=setSelectedVariant}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("partSection",function(){return{restrict:"A",scope:{name:"=partSection",type:"=partType",parts:"="},replace:!0,templateUrl:"part.section.tpl.html",link:function(scope){function getParts(){return scope.parts}scope.getParts=getParts}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("selectPartButton",function(){return{restrict:"A",scope:!0,link:function(scope){function selectPart(){}scope.selectPart=selectPart}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("scrollBind",["$q","scroll",function($q,scroll){return{restrict:"A",scope:!0,link:function(scope,element,attrs){function bindValuesToScroll(scopeKeysToUpdate){0!==scopeKeysToUpdate.length&&scroll.bind(getUpdateValuesFn(scopeKeysToUpdate))}function getUpdateValuesFn(scopeKeysToUpdate){return function(scrollTop){_.forEach(scopeKeysToUpdate,function(scopeKey){scope[scopeKey]=scrollTop}),scope.$apply()}}var callback;if(_.isFunction(attrs.scollBind))return callback=attrs.scrollBind,void scroll.bind(callback);if(attrs.updateScopeVals){var updateScopeVals=attrs.updateScopeVals.replace(/'/gi,'"');try{var json=JSON.parse(updateScopeVals);bindValuesToScroll(json)}catch(e){bindValuesToScroll([updateScopeVals])}}}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("showSpinner",["$templateCache","$compile",function($templateCache,$compile){var idPostFix=0;return{restrict:"A",scope:!0,priority:1,link:function(scope,element,attrs){function getBool(attr){return!_.isUndefined(attr)&&"true"===attr.toString().toLowerCase()}function getSpinnerElement(){var tpl=$templateCache.get("spinner.tpl.html"),linkFn=$compile(tpl);return linkFn(scope)}function insertBeforeElement(insertEl,siblingEl){var parentEl=siblingEl.parentNode;parentEl.insertBefore(insertEl,siblingEl)}function removeElement(el){el.remove()}var showSpinner=getBool(attrs.showSpinner);if(showSpinner!==!1){scope.spinnerKeyPostFix=idPostFix,idPostFix++;var spinnerElement=getSpinnerElement();insertBeforeElement(spinnerElement[0],element[0]);var removeObserve=attrs.$observe("showSpinner",function(val){getBool(val)||(removeElement(spinnerElement),removeObserve())})}}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("variantPicker",function(){return{restrict:"A",replace:!0,scope:{variants:"=variantPicker",selectedVariant:"=",basePartImgUrl:"@"},templateUrl:"variant.picker.tpl.html"}})}(),function(){"use strict";angular.module("bikeBuilder").directive("svgLine",["SvgAnimationDirective",function(SvgAnimationDirective){return{restrict:"A",replace:!0,scope:{color:"=",data:"=lineData"},templateNamespace:"svg",templateUrl:"line.tpl.html",link:function(scope,element){function loadAnimation(){scope.pathLength=base.getLength(),scope.style=base.getStyle(scope.color,!0),scope.$apply()}function updateColor(){scope.style=base.getStyle(scope.color,!1)}var el=element[0],base=new SvgAnimationDirective(el,"line",{msPrUnit:20,data:scope.data});scope.$on("svgRootLoaded",loadAnimation),scope.$watch("color",updateColor)}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("svgLineGroup",function(){return{restrict:"A",replace:!0,scope:{model:"="},templateNamespace:"svg",templateUrl:"line.group.tpl.html",link:function(scope){function handleClicked(key){scope.$emit("svgPart:clicked",key)}scope.handleClicked=handleClicked}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("svgPath",["SvgAnimationDirective",function(SvgAnimationDirective){return{restrict:"A",replace:!0,scope:{model:"="},templateNamespace:"svg",templateUrl:"path.tpl.html",link:function(scope,element){function handleClicked(key){scope.$emit("svgPart:clicked",key)}function loadAnimation(){scope.pathLength=base.getLength(),scope.style=base.getStyle(scope.model.color,!0),scope.$apply()}function updateColor(){scope.style=base.getStyle(scope.model.color,!1)}var el=element[0],base=new SvgAnimationDirective(el,"path",{data:scope.model.data});scope.$on("svgRootLoaded",loadAnimation),scope.handleClicked=handleClicked,scope.$watch("model.color",updateColor)}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("svgRoot",function(){return{restrict:"A",scope:!0,link:function(scope,element){var el=element[0];el.addEventListener("load",function(){scope.$broadcast("svgRootLoaded"),scope.svgRootLoaded=!0,scope.$apply()})}}})}(),function(){"use strict";angular.module("bikeBuilder").service("catalog",function(){function getAll(){}return{getAll:getAll}})}(),function(){"use strict";angular.module("bikeBuilder").service("Bindable",function(){return function(){function bind(callback){self._callbacks.push(callback);var index=self._callbacks.length-1;return 0===index&&self.onAttach(),self.onBound(),function(){self._callbacks.splice(index,1),self.onUnBound(),0===self._callbacks.length&&self.onDetach()}}function invoke(){var args=arguments;_.forEach(self._callbacks,function(callback){callback.apply(null,args)})}var self=this;this.onAttach=angular.noop,this.onBound=angular.noop,this.onUnBound=angular.noop,this.onDetach=angular.noop,this._callbacks=[],this.bind=bind,this.invoke=invoke}})}(),function(){"use strict";angular.module("bikeBuilder").service("SvgAnimationDirective",function(){return function(el,type,options){function getLength(){switch(self.type){case"path":return getPathLength();case"line":return getLineLength();default:return null}}function getDuration(length){return _.isUndefined(length)&&(length=getLength()),Math.min(length*self.msPrUnit,self.maxMs)+"ms"}function getAnimation(duration,shouldRepeat){_.isUndefined(duration)&&(duration=getDuration());var repeat=shouldRepeat?"infinite":"";return"dash "+duration+" linear forwards "+repeat}function getPathLength(){return self.el.getTotalLength()}function getLineLength(){var x=Math.abs(self.data[0]-self.data[2]),y=Math.abs(self.data[1]-self.data[3]);return Math.sqrt(Math.pow(x,2)+Math.pow(y,2))}function getStyle(color,shouldAnimate){var style={},colorAttr="line"==type?"stroke":"fill";if(style[colorAttr]=color,shouldAnimate){var animation=getAnimation(getDuration(getLength()),!1);style["-webkit-animation"]=animation,style.animation=animation}return style}var self=this;options=options||{},this.el=el,this.type=type,this.data=options.data||{},this.msPrUnit=options.msPrUnit||4.16,this.maxMs=options.maxMs||1e4,this.getAnimation=getAnimation,this.getDuration=getDuration,this.getLength=getLength,this.getStyle=getStyle}})}(),function(){"use strict";angular.module("bikeBuilder").service("LineGroup",function(){function Line(lineData){this.data=lineData.split(",")}function LineGroup(){this.callSuperConstructor(this,arguments);var linesDataArr=this.data.split("|");this.lines=[];var self=this;_.forEach(linesDataArr,function(lineData){self.lines.push(new Line(lineData))})}return LineGroup})}(),function(){"use strict";angular.module("bikeBuilder").service("Path",function(){return function(){this.callSuperConstructor(this,arguments)}})}(),function(){"use strict";angular.module("bikeBuilder").service("SvgPart",function(){return function(key,props){props=props||{},props.key=key,_.assign(this,props)}})}(),function(){"use strict";angular.module("bikeBuilder").service("Parts",["$q","$http",function($q,$http){function fetchData(){var dfd=$q.defer();return $http.get(JSON_FILE_PATH).success(function(data){dataFetched=!0,processData(data),dfd.resolve(parts)}),dfd.promise}function processData(data){parts=data}var dataFetched,JSON_FILE_PATH="scripts/partdata.json",parts={},exports={fetchData:fetchData};return exports}])}(),function(){"use strict";angular.module("bikeBuilder").service("scroll",["Bindable",function(Bindable){function attachScroll(){throttledHandleScroll=_.throttle(handleScroll,100),window.addEventListener("scroll",throttledHandleScroll)}function detachScroll(){window.removeEventListener("scroll",throttledHandleScroll)}function getScrollTop(){var scrollTop=window.document.documentElement.scrollTop;return 0===scrollTop&&(scrollTop=window.document.body.scrollTop),scrollTop}function handleScroll(){var scrollTop=getScrollTop();self.invoke(scrollTop)}var self=this;_.assign(self,_.assign(new Bindable,{onAttach:attachScroll,onDetach:detachScroll}));var throttledHandleScroll;return{bind:self.bind}}])}(),function(){"use strict";angular.module("bikeBuilder").service("SvgParts",["$q","$timeout","$http","utils","SvgPart","Path","LineGroup",function($q,$timeout,$http,utils,SvgPart,Path,LineGroup){function fetchData(){var dfd=$q.defer();return $timeout(function(){$http.get(JSON_FILE_PATH).success(function(data){dataFetched=!0,processData(data),dfd.resolve(parts)})},30),dfd.promise}function processData(data){_.forEach(data,function(dataInstance,key){add(key,dataInstance)})}function add(key,props){if(!dataFetched)return null;if(!key||!props.type||!props.data)return null;var existingPart=getOne(key);if(existingPart)return null;var Class=getClass(props.type);return Class?(parts[key]=new Class(key,props),parts):null}function getClass(key){return classes[key]||null}function getOne(key){if(!dataFetched)return null;var part=parts[key];return part?part:null}function getAll(){return dataFetched?parts:null}function updateOne(key,props){if(!dataFetched)return null;var part=getOne(key);return part?_.assign(part,props):null}function updateAll(props){return dataFetched?(_.each(parts,function(part){_.assign(part,props)}),parts):null}var JSON_FILE_PATH="scripts/svgdata.json",parts={},dataFetched=!1;utils.inherit(Path,SvgPart),utils.inherit(LineGroup,SvgPart);var classes={Path:Path,LineGroup:LineGroup},exports={fetchData:fetchData,getOne:getOne,getAll:getAll,updateOne:updateOne,updateAll:updateAll,add:add};return exports}])}(),function(){"use strict";angular.module("bikeBuilder").service("utils",function(){function inherit(child,base,props){return child.prototype=_.create(base.prototype,_.assign({_super:base.prototype,callSuperConstructor:function(ctx,args){base.apply(ctx,args)},constructor:child},props)),child}return{inherit:inherit}})}(),angular.module("bikeBuilder").run(["$templateCache",function($templateCache){$templateCache.put("line.group.tpl.html",'<g id={{model.key}} ng-click="handleClicked(model.key)" ng-class="[model.key, model.active ? \'active\' : \'\', model.color ? \'has-color\' : \'\']">\r\n    <line svg-line ng-repeat="line in model.lines" color="model.color" line-data="line.data"></line>\r\n</g>'),$templateCache.put("line.tpl.html",'<line fill="none" ng-style="style"\r\n      ng-attr-x1="{{data[0]}}" ng-attr-y1="{{data[1]}}" ng-attr-x2="{{data[2]}}" ng-attr-y2="{{data[3]}}"\r\n      ng-attr-stroke-dasharray="{{pathLength}}" ng-attr-stroke-dashoffset="{{pathLength}}" />\r\n'),$templateCache.put("part.section.tpl.html",'<div class="part-section">\r\n    <h2 class="part-section-name">{{name}}</h2>\r\n    <div part="part" ng-repeat="part in getParts()">\r\n    </div>\r\n</div>'),$templateCache.put("part.tpl.html",'<div class="part">\r\n    <h3 class="part-name">{{model.name}}</h3>\r\n    <div class="btn-group variant-buttons">\r\n        <a class="btn btn-default variant-button" ng-class="{\'active\': variant.name == selectedVariant.name }" ng-click="setSelectedVariant(variant)" ng-repeat="variant in model.variants">{{variant.name}}</a>\r\n    </div>\r\n    <div variant-picker="model.variants" selected-variant="selectedVariant" base-part-img-url="content/images/parts"></div>\r\n    <a class="btn part-select-btn btn-lg btn-default" ng-click="handleClicked()">Select this part</a>\r\n</div>'),$templateCache.put("path.tpl.html",'<path id={{model.key}} fill="none" ng-click="handleClicked(model.key)" ng-class="[model.type, model.active ? \'active\' : \'\', model.color ? \'has-color\':\'\']"\r\n      ng-style="style" ng-attr-stroke-dasharray="{{pathLength}}" ng-attr-stroke-dashoffset="{{pathLength}}" ng-attr-d="{{model.data}}" />'),$templateCache.put("spinner.tpl.html",'<div class="spinner">\r\n    <h3 class="load-text">Loading...</h3>\r\n    <?xml version="1.0" encoding="utf-8" ?>\r\n    <svg id="spinner-svg{{spinnerKeyPostFix}}" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n         viewBox="204 89.3 243.3 243.3" enable-background="new 204 89.3 243.3 243.3" xml:space="preserve">\r\n    <g id="spinner-wrapper{{spinnerKeyPostFix}}"><g id="spinner-wheel{{spinnerKeyPostFix}}">\r\n    <path id="spinner-rim{{spinnerKeyPostFix}}" fill="none" d="M259.6,125.2c50.2-39,119.1-27.8,155.4,20.8c36.2,48.5,22.1,114.4-24.1,153.6\r\n		c-29.5,25-108.9,36.5-153.5-20.9C206.1,238.4,213.9,160.7,259.6,125.2z M248.2,270.7c38.3,49.2,90.8,49.7,133.1,18\r\n		s53.2-92.4,22.1-134c-31.1-41.7-86.4-55.7-134.8-16.8C224,173.7,221.3,236.1,248.2,270.7z" />\r\n    <g id="spinner-spokes{{spinnerKeyPostFix}}">\r\n    <line fill="none" x1="416.9" y1="180.9" x2="338.7" y2="203.9" />\r\n    <line fill="none" x1="338.7" y1="203.9" x2="386" y2="136.3" />\r\n    <line fill="none" x1="398.7" y1="150.7" x2="343.2" y2="215.1" />\r\n    <line fill="none" x1="409.6" y1="164.1" x2="329.2" y2="199.8" />\r\n    <line fill="none" x1="420.1" y1="199.8" x2="343.2" y2="215.1" />\r\n    <line fill="none" x1="420.9" y1="217.9" x2="339.8" y2="221.9" />\r\n    <line fill="none" x1="416.9" y1="236.4" x2="340.9" y2="207.4" />\r\n    <line fill="none" x1="410.5" y1="253.9" x2="342.3" y2="211" />\r\n    <line fill="none" x1="401" y1="269.3" x2="334.2" y2="226.4" />\r\n    <line fill="none" x1="388.3" y1="282.9" x2="332" y2="227.6" />\r\n    <line fill="none" x1="356.1" y1="303.2" x2="339.8" y2="221.9" />\r\n    <line fill="none" x1="340.9" y1="221.9" x2="373.8" y2="293.9" />\r\n    <line fill="none" x1="320.9" y1="310.5" x2="322.2" y2="226.4" />\r\n    <line fill="none" x1="300.7" y1="307.8" x2="327" y2="227.6" />\r\n    <line fill="none" x1="282.3" y1="300.4" x2="332" y2="227.6" />\r\n    <line fill="none" x1="268.1" y1="291.1" x2="315.4" y2="211" />\r\n    <line fill="none" x1="254.2" y1="277.8" x2="315.4" y2="220.5" />\r\n    <line fill="none" x1="244.1" y1="264.8" x2="319" y2="224" />\r\n    <line fill="none" x1="319" y1="224" x2="338.7" y2="308.6" />\r\n    <line fill="none" x1="235.5" y1="246.3" x2="319.5" y2="226.4" />\r\n    <line fill="none" x1="231.8" y1="229.5" x2="319" y2="204.3" />\r\n    <line fill="none" x1="231.1" y1="209.4" x2="316.8" y2="207.4" />\r\n    <line fill="none" x1="234.3" y1="190.7" x2="316" y2="217.9" />\r\n    <line fill="none" x1="241" y1="172.5" x2="315.5" y2="215.1" />\r\n    <line fill="none" x1="252.2" y1="154.4" x2="319" y2="204.3" />\r\n    <line fill="none" x1="264.8" y1="141.1" x2="323.8" y2="200.8" />\r\n    <line fill="none" x1="296.2" y1="121.4" x2="319.5" y2="204.1" />\r\n    <line fill="none" x1="315.4" y1="116" x2="330.3" y2="199.3" />\r\n    <line fill="none" x1="334.7" y1="116" x2="338.7" y2="203.9" />\r\n    <line fill="none" x1="352.3" y1="118.2" x2="319" y2="204.3" />\r\n    <line fill="none" x1="370.2" y1="125.5" x2="330.3" y2="199.3" />\r\n            </g>\r\n    <path id="spinner-tire{{spinnerKeyPostFix}}" fill="none" d="M259.6,125.2c50.2-39,119.1-27.8,155.4,20.8c36.2,48.5,22.1,114.4-24.1,153.6\r\n		c-29.5,25-108.9,36.5-153.5-20.9C206.1,238.4,213.9,160.7,259.6,125.2z M231.1,285.9c35.4,52.1,115,53.5,162.8,19.5\r\n		c48.2-34.3,65.4-116.9,26.1-164.1C378.8,91.6,318,73.1,252.2,121.5C208.4,153.6,191.6,227.6,231.1,285.9z" />\r\n    <path id="spinner-hub{{spinnerKeyPostFix}}" fill="none" d="M315.4,213.7c0-2.3,0.7-13.9,13.5-13.9c7.4,0,13.5,6.2,13.5,13.9s-6.1,13.9-13.6,13.9\r\n		C321.4,227.6,315.4,221.5,315.4,213.7z M323,218l-4.1,0.6l3.4,3.2L323,218z M333.8,216.9l0.7,4.1l3.1-3.5L333.8,216.9z M328,219.9\r\n		l-1.3,4l4.3-0.7L328,219.9z M318.7,211.2l-0.4,4.1l3.9-2.5L318.7,211.2z M323.9,208.3l1.3-3.9l-4.4,1.6L323.9,208.3z M334.5,205.7\r\n		l-5.3-2.9l1.7,4.3L334.5,205.7z M334.8,211.3l4,1.1l-1.8-4.3L334.8,211.3z" />\r\n        </g>\r\n        </g>\r\n    </svg>\r\n</div>'),$templateCache.put("variant.picker.tpl.html",'<div class="variant-picker">\r\n    <div class="images-stack">\r\n        <img class="variant-image" ng-src="{{basePartImgUrl + \'/\' + variant.imageUrl}}" ng-class="{\'selected\': variant.name == selectedVariant.name }" ng-repeat="variant in variants" />\r\n    </div>\r\n</div>')}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJmbG93LmpzIiwicHJldmlldy5qcyIsInBhcnQuanMiLCJwYXJ0LnNlY3Rpb24uanMiLCJzZWxlY3QucGFydC5idXR0b24uanMiLCJzY3JvbGwuYmluZC5qcyIsInNob3cuc3Bpbm5lci5qcyIsInZhcmlhbnQucGlja2VyLmpzIiwibGluZS5qcyIsImxpbmUuZ3JvdXAuanMiLCJwYXRoLmpzIiwic3ZnLnJvb3QuanMiLCJjYXRhbG9nLmpzIiwiQmluZGFibGUuanMiLCJTdmdBbmltYXRpb25EaXJlY3RpdmUuanMiLCJMaW5lR3JvdXAuanMiLCJQYXRoLmpzIiwiU3ZnUGFydC5qcyIsInBhcnRzLmpzIiwic2Nyb2xsLmpzIiwic3ZnLnBhcnRzLmpzIiwidXRpbHMuanMiLCJ0ZW1wbGF0ZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUFBLG1CQUNBLE1BQUEsVUFBQSxVQ0hBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxXQUFBLFlBQUEsU0FBQSxRQUFBLFdBQUEsU0FBQSxPQUFBLE1BQUEsVUFVQSxRQUFBLGlCQUFBLE1BQ0EsS0FBQSxTQUFBLEtBR0EsUUFBQSxlQUFBLE1BQUEsS0FBQSxpQkFDQSxnQkFBQSxRQUNBLEVBQUEsUUFBQSxnQkFBQSxPQUFBLFNBQUEsTUFBQSxLQUNBLFNBQUEsVUFBQSxLQUFBLE1BQUEsVUFoQkEsR0FDQSxNQUFBLElBRUEsUUFBQSxJQUFBLGVBQUEsZUFFQSxNQUFBLFlBQUEsS0FBQSx1QkNUQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsV0FBQSxlQUFBLFdBQUEsU0FBQSxTQUFBLFNBQUEsUUFVQSxRQUFBLFNBQUEsS0FDQSxNQUFBLE1BQUEsYUFHQSxTQUFBLE9BQUEsUUFHQSxRQUFBLGVBQ0EsS0FBQSxjQUFBLEVBR0EsUUFBQSxxQkFBQSxNQUFBLEtBQ0EsU0FBQSxXQUFBLFFBQUEsSUFDQSxTQUFBLFVBQUEsS0FBQSxRQUFBLElBdEJBLEdBQUEsTUFBQSxJQUNBLE1BQUEsUUFBQSxRQUVBLE9BQUEsSUFBQSxrQkFBQSxxQkFFQSxTQUFBLFlBQUEsS0FBQSxtQkNUQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxPQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsT0FDQSxNQUFBLFNBRUEsU0FBQSxFQUNBLFlBQUEsZ0JBQ0EsS0FBQSxTQUFBLE9BTUEsUUFBQSxpQkFDQSxNQUFBLE1BQUEsZUFBQSxNQUFBLE1BQUEsTUFBQSxpQkFHQSxRQUFBLG9CQUFBLFNBQ0EsTUFBQSxnQkFBQSxRQVZBLE1BQUEsY0FBQSxjQUNBLE1BQUEsZ0JBQUEsUUFBQSxLQUFBLE1BQUEsTUFBQSxTQUFBLElBQ0EsTUFBQSxtQkFBQSwwQkNkQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxjQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsT0FDQSxLQUFBLGVBQ0EsS0FBQSxZQUNBLE1BQUEsS0FFQSxTQUFBLEVBQ0EsWUFBQSx3QkFDQSxLQUFBLFNBQUEsT0FHQSxRQUFBLFlBQ0EsTUFBQSxPQUFBLE1BSEEsTUFBQSxTQUFBLGdCQ2RBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLG1CQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxPQUtBLFFBQUEsZUFIQSxNQUFBLFdBQUEsa0JDVEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsY0FBQSxLQUFBLFNBQUEsU0FBQSxHQUFBLFFBQ0EsT0FDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsT0FvQkEsUUFBQSxvQkFBQSxtQkFDQSxJQUFBLGtCQUFBLFFBR0EsT0FBQSxLQUFBLGtCQUFBLG9CQUdBLFFBQUEsbUJBQUEsbUJBQ0EsTUFBQSxVQUFBLFdBQ0EsRUFBQSxRQUFBLGtCQUFBLFNBQUEsVUFDQSxNQUFBLFVBQUEsWUFFQSxNQUFBLFVBL0JBLEdBQUEsU0FDQSxJQUFBLEVBQUEsV0FBQSxNQUFBLFdBR0EsTUFGQSxVQUFBLE1BQUEsZUFDQSxRQUFBLEtBQUEsU0FJQSxJQUFBLE1BQUEsZ0JBQUEsQ0FHQSxHQUFBLGlCQUFBLE1BQUEsZ0JBQUEsUUFBQSxNQUFBLElBRUEsS0FDQSxHQUFBLE1BQUEsS0FBQSxNQUFBLGdCQUNBLG9CQUFBLE1BQ0EsTUFBQSxHQUNBLG9CQUFBLDRCQ3hCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxlQUFBLGlCQUFBLFdBQUEsU0FBQSxlQUFBLFVBQ0EsR0FBQSxXQUFBLENBRUEsUUFDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLFNBQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxRQUFBLE9BcUJBLFFBQUEsU0FBQSxNQUNBLE9BQUEsRUFBQSxZQUFBLE9BQUEsU0FBQSxLQUFBLFdBQUEsY0FHQSxRQUFBLHFCQUNBLEdBQUEsS0FBQSxlQUFBLElBQUEsb0JBQ0EsT0FBQSxTQUFBLElBQ0EsT0FBQSxRQUFBLE9BR0EsUUFBQSxxQkFBQSxTQUFBLFdBQ0EsR0FBQSxVQUFBLFVBQUEsVUFDQSxVQUFBLGFBQUEsU0FBQSxXQUdBLFFBQUEsZUFBQSxJQUNBLEdBQUEsU0FwQ0EsR0FBQSxhQUFBLFFBQUEsTUFBQSxZQUNBLElBQUEsZUFBQSxFQUFBLENBSUEsTUFBQSxrQkFBQSxVQUNBLFdBRUEsSUFBQSxnQkFBQSxtQkFDQSxxQkFBQSxlQUFBLEdBQUEsUUFBQSxHQUVBLElBQUEsZUFBQSxNQUFBLFNBQUEsY0FBQSxTQUFBLEtBQ0EsUUFBQSxPQUNBLGNBQUEsZ0JBQ0EsNEJDekJBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLGdCQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsU0FBQSxFQUNBLE9BQ0EsU0FBQSxpQkFDQSxnQkFBQSxJQUNBLGVBQUEsS0FFQSxZQUFBLGdDQ1pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLFdBQUEsd0JBQUEsU0FBQSx1QkFDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLEVBQ0EsT0FDQSxNQUFBLElBQ0EsS0FBQSxhQUVBLGtCQUFBLE1BQ0EsWUFBQSxnQkFDQSxLQUFBLFNBQUEsTUFBQSxTQVNBLFFBQUEsaUJBQ0EsTUFBQSxXQUFBLEtBQUEsWUFDQSxNQUFBLE1BQUEsS0FBQSxTQUFBLE1BQUEsT0FBQSxHQUNBLE1BQUEsU0FHQSxRQUFBLGVBQ0EsTUFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBLE9BQUEsR0FmQSxHQUFBLElBQUEsUUFBQSxHQUNBLEtBQUEsR0FBQSx1QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUFBLEtBQUEsTUFBQSxNQUVBLE9BQUEsSUFBQSxnQkFBQSxlQUNBLE1BQUEsT0FBQSxRQUFBLHFCQ2xCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxlQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsU0FBQSxFQUNBLE9BQ0EsTUFBQSxLQUVBLGtCQUFBLE1BQ0EsWUFBQSxzQkFDQSxLQUFBLFNBQUEsT0FLQSxRQUFBLGVBQUEsS0FDQSxNQUFBLE1BQUEsa0JBQUEsS0FMQSxNQUFBLGNBQUEscUJDYkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsV0FBQSx3QkFBQSxTQUFBLHVCQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsRUFDQSxPQUNBLE1BQUEsS0FFQSxrQkFBQSxNQUNBLFlBQUEsZ0JBQ0EsS0FBQSxTQUFBLE1BQUEsU0FXQSxRQUFBLGVBQUEsS0FDQSxNQUFBLE1BQUEsa0JBQUEsS0FHQSxRQUFBLGlCQUNBLE1BQUEsV0FBQSxLQUFBLFlBQ0EsTUFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBLE1BQUEsT0FBQSxHQUNBLE1BQUEsU0FHQSxRQUFBLGVBQ0EsTUFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBLE1BQUEsT0FBQSxHQXBCQSxHQUFBLElBQUEsUUFBQSxHQUNBLEtBQUEsR0FBQSx1QkFBQSxHQUFBLFFBQUEsS0FBQSxNQUFBLE1BQUEsTUFFQSxPQUFBLElBQUEsZ0JBQUEsZUFDQSxNQUFBLGNBQUEsY0FDQSxNQUFBLE9BQUEsY0FBQSxxQkNuQkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsVUFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxTQUNBLEdBQUEsSUFBQSxRQUFBLEVBQ0EsSUFBQSxpQkFBQSxPQUFBLFdBQ0EsTUFBQSxXQUFBLGlCQUNBLE1BQUEsZUFBQSxFQUNBLE1BQUEsa0JDWkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsVUFBQSxXQU9BLFFBQUEsV0FOQSxPQUNBLE9BQUEsYUNMQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxXQUFBLFdBQ0EsTUFBQSxZQWNBLFFBQUEsTUFBQSxVQUNBLEtBQUEsV0FBQSxLQUFBLFNBQ0EsSUFBQSxPQUFBLEtBQUEsV0FBQSxPQUFBLENBT0EsT0FMQSxLQUFBLE9BQ0EsS0FBQSxXQUVBLEtBQUEsVUFFQSxXQUNBLEtBQUEsV0FBQSxPQUFBLE1BQUEsR0FFQSxLQUFBLFlBRUEsSUFBQSxLQUFBLFdBQUEsUUFDQSxLQUFBLFlBS0EsUUFBQSxVQUNBLEdBQUEsTUFBQSxTQUNBLEdBQUEsUUFBQSxLQUFBLFdBQUEsU0FBQSxVQUNBLFNBQUEsTUFBQSxLQUFBLFFBcENBLEdBQUEsTUFBQSxJQUVBLE1BQUEsU0FBQSxRQUFBLEtBQ0EsS0FBQSxRQUFBLFFBQUEsS0FDQSxLQUFBLFVBQUEsUUFBQSxLQUNBLEtBQUEsU0FBQSxRQUFBLEtBRUEsS0FBQSxjQUNBLEtBQUEsS0FBQSxLQUNBLEtBQUEsT0FBQSxhQ2RBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLHdCQUFBLFdBQ0EsTUFBQSxVQUFBLEdBQUEsS0FBQSxTQWtCQSxRQUFBLGFBQ0EsT0FBQSxLQUFBLE1BQ0EsSUFBQSxPQUNBLE1BQUEsZ0JBQ0EsS0FBQSxPQUNBLE1BQUEsZ0JBQ0EsU0FDQSxNQUFBLE9BSUEsUUFBQSxhQUFBLFFBS0EsTUFKQSxHQUFBLFlBQUEsVUFDQSxPQUFBLGFBR0EsS0FBQSxJQUFBLE9BQUEsS0FBQSxTQUFBLEtBQUEsT0FBQSxLQUdBLFFBQUEsY0FBQSxTQUFBLGNBQ0EsRUFBQSxZQUFBLFlBQ0EsU0FBQSxjQUdBLElBQUEsUUFBQSxhQUFBLFdBQUEsRUFDQSxPQUFBLFFBQUEsU0FBQSxvQkFBQSxPQUdBLFFBQUEsaUJBQ0EsTUFBQSxNQUFBLEdBQUEsaUJBR0EsUUFBQSxpQkFDQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUEsS0FBQSxJQUNBLEVBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUEsS0FBQSxHQUNBLE9BQUEsTUFBQSxLQUFBLEtBQUEsSUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsSUFHQSxRQUFBLFVBQUEsTUFBQSxlQUNBLEdBQUEsVUFDQSxVQUFBLFFBQUEsS0FBQSxTQUFBLE1BR0EsSUFGQSxNQUFBLFdBQUEsTUFFQSxjQUFBLENBQ0EsR0FBQSxXQUFBLGFBQUEsWUFBQSxjQUFBLEVBQ0EsT0FBQSxxQkFBQSxVQUNBLE1BQUEsVUFBQSxVQUdBLE1BQUEsT0FsRUEsR0FBQSxNQUFBLElBQ0EsU0FBQSxZQUVBLEtBQUEsR0FBQSxHQUNBLEtBQUEsS0FBQSxLQUNBLEtBQUEsS0FBQSxRQUFBLFNBRUEsS0FBQSxTQUFBLFFBQUEsVUFBQSxLQUNBLEtBQUEsTUFBQSxRQUFBLE9BQUEsSUFFQSxLQUFBLGFBQUEsYUFDQSxLQUFBLFlBQUEsWUFDQSxLQUFBLFVBQUEsVUFDQSxLQUFBLFNBQUEsZUNsQkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsWUFBQSxXQUdBLFFBQUEsTUFBQSxVQUNBLEtBQUEsS0FBQSxTQUFBLE1BQUEsS0FHQSxRQUFBLGFBQ0EsS0FBQSxxQkFBQSxLQUFBLFVBRUEsSUFBQSxjQUFBLEtBQUEsS0FBQSxNQUFBLElBQ0EsTUFBQSxRQUVBLElBQUEsTUFBQSxJQUNBLEdBQUEsUUFBQSxhQUFBLFNBQUEsVUFDQSxLQUFBLE1BQUEsS0FBQSxHQUFBLE1BQUEsYUFkQSxNQUFBLGdCQ0pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLE9BQUEsV0FDQSxNQUFBLFlBQ0EsS0FBQSxxQkFBQSxLQUFBLGlCQ0xBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFVBQUEsV0FDQSxNQUFBLFVBQUEsSUFBQSxPQUNBLE1BQUEsVUFDQSxNQUFBLElBQUEsSUFDQSxFQUFBLE9BQUEsS0FBQSxhQ1BBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFNBQUEsS0FBQSxRQUFBLFNBQUEsR0FBQSxPQVlBLFFBQUEsYUFDQSxHQUFBLEtBQUEsR0FBQSxPQU1BLE9BTEEsT0FBQSxJQUFBLGdCQUFBLFFBQUEsU0FBQSxNQUNBLGFBQUEsRUFDQSxZQUFBLE1BQ0EsSUFBQSxRQUFBLFNBRUEsSUFBQSxRQUdBLFFBQUEsYUFBQSxNQUNBLE1BQUEsS0F0QkEsR0FFQSxhQUZBLGVBQUEsd0JBQ0EsU0FHQSxTQUNBLFVBQUEsVUFFQSxPQUFBLGVDWEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsVUFBQSxXQUFBLFNBQUEsVUFnQkEsUUFBQSxnQkFDQSxzQkFBQSxFQUFBLFNBQUEsYUFBQSxLQUNBLE9BQUEsaUJBQUEsU0FBQSx1QkFHQSxRQUFBLGdCQUNBLE9BQUEsb0JBQUEsU0FBQSx1QkFHQSxRQUFBLGdCQUNBLEdBQUEsV0FBQSxPQUFBLFNBQUEsZ0JBQUEsU0FJQSxPQUhBLEtBQUEsWUFDQSxVQUFBLE9BQUEsU0FBQSxLQUFBLFdBRUEsVUFHQSxRQUFBLGdCQUNBLEdBQUEsV0FBQSxjQUVBLE1BQUEsT0FBQSxXQW5DQSxHQUFBLE1BQUEsSUFFQSxHQUFBLE9BQUEsS0FBQSxFQUFBLE9BQUEsR0FBQSxXQUNBLFNBQUEsYUFDQSxTQUFBLGVBR0EsSUFBQSxzQkFFQSxRQUNBLEtBQUEsS0FBQSxZQ2RBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFlBQUEsS0FBQSxXQUFBLFFBQUEsUUFBQSxVQUFBLE9BQUEsWUFBQSxTQUFBLEdBQUEsU0FBQSxNQUFBLE1BQUEsUUFBQSxLQUFBLFdBc0JBLFFBQUEsYUFDQSxHQUFBLEtBQUEsR0FBQSxPQVFBLE9BUEEsVUFBQSxXQUNBLE1BQUEsSUFBQSxnQkFBQSxRQUFBLFNBQUEsTUFDQSxhQUFBLEVBQ0EsWUFBQSxNQUNBLElBQUEsUUFBQSxVQUVBLElBQ0EsSUFBQSxRQUdBLFFBQUEsYUFBQSxNQUNBLEVBQUEsUUFBQSxLQUFBLFNBQUEsYUFBQSxLQUNBLElBQUEsSUFBQSxnQkFJQSxRQUFBLEtBQUEsSUFBQSxPQUNBLElBQUEsWUFDQSxNQUFBLEtBR0EsS0FBQSxNQUFBLE1BQUEsT0FBQSxNQUFBLEtBQ0EsTUFBQSxLQUVBLElBQUEsY0FBQSxPQUFBLElBQ0EsSUFBQSxhQUNBLE1BQUEsS0FHQSxJQUFBLE9BQUEsU0FBQSxNQUFBLEtBQ0EsT0FBQSxRQUlBLE1BQUEsS0FBQSxHQUFBLE9BQUEsSUFBQSxPQUNBLE9BSkEsS0FPQSxRQUFBLFVBQUEsS0FDQSxNQUFBLFNBQUEsTUFBQSxLQUdBLFFBQUEsUUFBQSxLQUNBLElBQUEsWUFDQSxNQUFBLEtBRUEsSUFBQSxNQUFBLE1BQUEsSUFDQSxPQUFBLE1BQ0EsS0FFQSxLQUdBLFFBQUEsVUFDQSxNQUFBLGFBR0EsTUFGQSxLQUtBLFFBQUEsV0FBQSxJQUFBLE9BQ0EsSUFBQSxZQUNBLE1BQUEsS0FFQSxJQUFBLE1BQUEsT0FBQSxJQUNBLE9BQUEsTUFJQSxFQUFBLE9BQUEsS0FBQSxPQUhBLEtBTUEsUUFBQSxXQUFBLE9BQ0EsTUFBQSxjQUdBLEVBQUEsS0FBQSxNQUFBLFNBQUEsTUFDQSxFQUFBLE9BQUEsS0FBQSxTQUVBLE9BTEEsS0FqR0EsR0FBQSxnQkFBQSx1QkFDQSxTQUNBLGFBQUEsQ0FFQSxPQUFBLFFBQUEsS0FBQSxTQUNBLE1BQUEsUUFBQSxVQUFBLFFBRUEsSUFBQSxVQUFBLEtBQUEsS0FBQSxVQUFBLFdBRUEsU0FDQSxVQUFBLFVBQ0EsT0FBQSxPQUNBLE9BQUEsT0FDQSxVQUFBLFVBQ0EsVUFBQSxVQUNBLElBQUEsSUFFQSxPQUFBLGVDckJBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFFBQUEsV0FPQSxRQUFBLFNBQUEsTUFBQSxLQUFBLE9BU0EsTUFSQSxPQUFBLFVBQUEsRUFBQSxPQUFBLEtBQUEsVUFBQSxFQUFBLFFBQ0EsT0FBQSxLQUFBLFVBQ0EscUJBQUEsU0FBQSxJQUFBLE1BQ0EsS0FBQSxNQUFBLElBQUEsT0FFQSxZQUFBLE9BQ0EsUUFFQSxNQWZBLE9BQ0EsUUFBQSxjQ0xBLFFBQUEsT0FBQSxlQUFBLEtBQUEsaUJBQUEsU0FBQSxnQkFBQSxlQUFBLElBQUEsc0JBQUEseVFBQ0EsZUFBQSxJQUFBLGdCQUFBLHdQQUNBLGVBQUEsSUFBQSx3QkFBQSxpS0FDQSxlQUFBLElBQUEsZ0JBQUEsNGtCQUNBLGVBQUEsSUFBQSxnQkFBQSxtVEFDQSxlQUFBLElBQUEsbUJBQUEsaThIQUNBLGVBQUEsSUFBQSwwQkFBQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicsIFsnbWdjcmVhLm5nU3RyYXAnXSlcclxuICAgICAgICAudmFsdWUoJ3ZlcnNpb24nLCAnMC4xJyk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuY29udHJvbGxlcignRmxvd0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBQYXJ0cywgU3ZnUGFydHMpIHtcclxuICAgICAgICAgICAgdmFyIElNQUdFX1JPT1QgPSAnY29udGVudC9pbWFnZXMvJztcclxuICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLiRvbigncGFydDpjbGlja2VkJywgdXBkYXRlU3ZnUGFydCk7XHJcblxyXG4gICAgICAgICAgICBQYXJ0cy5mZXRjaERhdGEoKS50aGVuKHBhcnREYXRhRmV0Y2hlZCk7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnREYXRhRmV0Y2hlZChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjdHJsLnBhcnREYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3ZnUGFydChldmVudCwgcGFydCwgc2VsZWN0ZWRWYXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRWYXJpYW50LmNvbG9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChzZWxlY3RlZFZhcmlhbnQuY29sb3JzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTdmdQYXJ0cy51cGRhdGVPbmUoa2V5LCB7IGNvbG9yOiB2YWx1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1ByZXZpZXdDdHJsJywgZnVuY3Rpb24gKFN2Z1BhcnRzLCAkc2NvcGUpIHtcclxuICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzO1xyXG4gICAgICAgICAgICBjdHJsLmdldFBhcnQgPSBnZXRQYXJ0O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLiRvbignc3ZnUGFydDpjbGlja2VkJywgdXBkYXRlQWN0aXZlU3ZnUGFydCk7XHJcblxyXG4gICAgICAgICAgICBTdmdQYXJ0cy5mZXRjaERhdGEoKS50aGVuKGRhdGFGZXRjaGVkKTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UGFydChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY3RybC5TdmdEYXRhUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3ZnUGFydHMuZ2V0T25lKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRhdGFGZXRjaGVkKCkge1xyXG4gICAgICAgICAgICAgICAgY3RybC5TdmdEYXRhUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVBY3RpdmVTdmdQYXJ0KGV2ZW50LCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIFN2Z1BhcnRzLnVwZGF0ZUFsbCh7IGFjdGl2ZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICBTdmdQYXJ0cy51cGRhdGVPbmUoa2V5LCB7IGFjdGl2ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgncGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgICdtb2RlbCc6ICc9cGFydCdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0LnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuaGFuZGxlQ2xpY2tlZCA9IGhhbmRsZUNsaWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0ZWRWYXJpYW50ID0gYW5ndWxhci5jb3B5KHNjb3BlLm1vZGVsLnZhcmlhbnRzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5zZXRTZWxlY3RlZFZhcmlhbnQgPSBzZXRTZWxlY3RlZFZhcmlhbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2tlZCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3BhcnQ6Y2xpY2tlZCcsIHNjb3BlLm1vZGVsLCBzY29wZS5zZWxlY3RlZFZhcmlhbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWRWYXJpYW50KHZhcmlhbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0ZWRWYXJpYW50ID0gdmFyaWFudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7XHJcblxyXG4iLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3BhcnRTZWN0aW9uJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAnPXBhcnRTZWN0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICc9cGFydFR5cGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICdwYXJ0cyc6ICc9J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnQuc2VjdGlvbi50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5nZXRQYXJ0cyA9IGdldFBhcnRzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRQYXJ0cygpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLnBhcnRzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2VsZWN0UGFydEJ1dHRvbicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5zZWxlY3RQYXJ0ID0gc2VsZWN0UGFydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNlbGVjdFBhcnQgKClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2Nyb2xsQmluZCcsIGZ1bmN0aW9uICgkcSwgc2Nyb2xsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oYXR0cnMuc2NvbGxCaW5kKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGF0dHJzLnNjcm9sbEJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbC5iaW5kKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdHRycy51cGRhdGVTY29wZVZhbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlU2NvcGVWYWxzID0gYXR0cnMudXBkYXRlU2NvcGVWYWxzLnJlcGxhY2UoLycvZ2ksICdcIicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UodXBkYXRlU2NvcGVWYWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZFZhbHVlc1RvU2Nyb2xsKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZFZhbHVlc1RvU2Nyb2xsKFt1cGRhdGVTY29wZVZhbHNdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJpbmRWYWx1ZXNUb1Njcm9sbChzY29wZUtleXNUb1VwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGVLZXlzVG9VcGRhdGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsLmJpbmQoZ2V0VXBkYXRlVmFsdWVzRm4oc2NvcGVLZXlzVG9VcGRhdGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFVwZGF0ZVZhbHVlc0ZuKHNjb3BlS2V5c1RvVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiB1cGRhdGVWYWx1ZXMoc2Nyb2xsVG9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goc2NvcGVLZXlzVG9VcGRhdGUsIGZ1bmN0aW9uIChzY29wZUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlW3Njb3BlS2V5XSA9IHNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7XHJcblxyXG4iLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3Nob3dTcGlubmVyJywgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlLCAkY29tcGlsZSkge1xyXG4gICAgICAgICAgICB2YXIgaWRQb3N0Rml4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogMSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd1NwaW5uZXIgPSBnZXRCb29sKGF0dHJzLnNob3dTcGlubmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd1NwaW5uZXIgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnNwaW5uZXJLZXlQb3N0Rml4ID0gaWRQb3N0Rml4O1xyXG4gICAgICAgICAgICAgICAgICAgIGlkUG9zdEZpeCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3Bpbm5lckVsZW1lbnQgPSBnZXRTcGlubmVyRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydEJlZm9yZUVsZW1lbnQoc3Bpbm5lckVsZW1lbnRbMF0sIGVsZW1lbnRbMF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlT2JzZXJ2ZSA9IGF0dHJzLiRvYnNlcnZlKCdzaG93U3Bpbm5lcicsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldEJvb2wodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudChzcGlubmVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVPYnNlcnZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRCb29sKGF0dHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFfLmlzVW5kZWZpbmVkKGF0dHIpICYmIGF0dHIudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRTcGlubmVyRWxlbWVudCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9ICR0ZW1wbGF0ZUNhY2hlLmdldCgnc3Bpbm5lci50cGwuaHRtbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlua0ZuID0gJGNvbXBpbGUodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtGbihzY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbnNlcnRCZWZvcmVFbGVtZW50KGluc2VydEVsLCBzaWJsaW5nRWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudEVsID0gc2libGluZ0VsLnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShpbnNlcnRFbCwgc2libGluZ0VsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgndmFyaWFudFBpY2tlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50czogJz12YXJpYW50UGlja2VyJyxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFZhcmlhbnQ6ICc9JyxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlUGFydEltZ1VybDogJ0AnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2YXJpYW50LnBpY2tlci50cGwuaHRtbCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3ZnTGluZScsIGZ1bmN0aW9uIChTdmdBbmltYXRpb25EaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnY29sb3InOiAnPScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAnPWxpbmVEYXRhJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlOiAnc3ZnJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbGluZS50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBlbGVtZW50WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXNlID0gbmV3IFN2Z0FuaW1hdGlvbkRpcmVjdGl2ZShlbCwgJ2xpbmUnLCB7IG1zUHJVbml0OiAyMCwgZGF0YTogc2NvcGUuZGF0YX0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJ3N2Z1Jvb3RMb2FkZWQnLCBsb2FkQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goJ2NvbG9yJywgdXBkYXRlQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb2FkQW5pbWF0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5wYXRoTGVuZ3RoID0gYmFzZS5nZXRMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3R5bGUgPSBiYXNlLmdldFN0eWxlKHNjb3BlLmNvbG9yLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVDb2xvcigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3R5bGUgPSBiYXNlLmdldFN0eWxlKHNjb3BlLmNvbG9yLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdzdmdMaW5lR3JvdXAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ21vZGVsJzogJz0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lc3BhY2U6ICdzdmcnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdsaW5lLmdyb3VwLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmhhbmRsZUNsaWNrZWQgPSBoYW5kbGVDbGlja2VkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2tlZChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3N2Z1BhcnQ6Y2xpY2tlZCcsIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3ZnUGF0aCcsIGZ1bmN0aW9uIChTdmdBbmltYXRpb25EaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnbW9kZWwnOiAnPSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVzcGFjZTogJ3N2ZycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhdGgudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2UgPSBuZXcgU3ZnQW5pbWF0aW9uRGlyZWN0aXZlKGVsLCAncGF0aCcsIHsgZGF0YTogc2NvcGUubW9kZWwuZGF0YSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdzdmdSb290TG9hZGVkJywgbG9hZEFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuaGFuZGxlQ2xpY2tlZCA9IGhhbmRsZUNsaWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCdtb2RlbC5jb2xvcicsIHVwZGF0ZUNvbG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVDbGlja2VkKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc3ZnUGFydDpjbGlja2VkJywga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRBbmltYXRpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnBhdGhMZW5ndGggPSBiYXNlLmdldExlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdHlsZSA9IGJhc2UuZ2V0U3R5bGUoc2NvcGUubW9kZWwuY29sb3IsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbG9yKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdHlsZSA9IGJhc2UuZ2V0U3R5bGUoc2NvcGUubW9kZWwuY29sb3IsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdzdmdSb290JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcclxuICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYnJvYWRjYXN0KCdzdmdSb290TG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN2Z1Jvb3RMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ2NhdGFsb2cnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBnZXRBbGw6IGdldEFsbFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnQmluZGFibGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBCaW5kYWJsZSgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQXR0YWNoID0gYW5ndWxhci5ub29wO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkJvdW5kID0gYW5ndWxhci5ub29wO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblVuQm91bmQgPSBhbmd1bGFyLm5vb3A7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGV0YWNoID0gYW5ndWxhci5ub29wO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXNbJ19jYWxsYmFja3MnXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iaW5kID0gYmluZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW52b2tlID0gaW52b2tlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJpbmQoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmWydfY2FsbGJhY2tzJ10ucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gc2VsZlsnX2NhbGxiYWNrcyddLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uQXR0YWNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25Cb3VuZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmWydfY2FsbGJhY2tzJ10uc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25VbkJvdW5kKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZlsnX2NhbGxiYWNrcyddLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkRldGFjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbnZva2UoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHNlbGZbJ19jYWxsYmFja3MnXSwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnU3ZnQW5pbWF0aW9uRGlyZWN0aXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gQW5pbWF0aW9uUGFydChlbCwgdHlwZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbCA9IGVsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IG9wdGlvbnMuZGF0YSB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1zUHJVbml0ID0gb3B0aW9ucy5tc1ByVW5pdCB8fCA0LjE2O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhNcyA9IG9wdGlvbnMubWF4TXMgfHwgMTAwMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBbmltYXRpb24gPSBnZXRBbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldER1cmF0aW9uID0gZ2V0RHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldExlbmd0aCA9IGdldExlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3R5bGUgPSBnZXRTdHlsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldExlbmd0aCgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNlbGYudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXRoJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRQYXRoTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldExpbmVMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXREdXJhdGlvbihsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChsZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGdldExlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGxlbmd0aCAqIHNlbGYubXNQclVuaXQsIHNlbGYubWF4TXMpICsgJ21zJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRBbmltYXRpb24oZHVyYXRpb24sIHNob3VsZFJlcGVhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKGR1cmF0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IGdldER1cmF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVwZWF0ID0gc2hvdWxkUmVwZWF0ID8gJ2luZmluaXRlJyA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnZGFzaCAnICsgZHVyYXRpb24gKyAnIGxpbmVhciBmb3J3YXJkcyAnICsgcmVwZWF0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFBhdGhMZW5ndGgoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZWwuZ2V0VG90YWxMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRMaW5lTGVuZ3RoKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5hYnMoc2VsZi5kYXRhWzBdIC0gc2VsZi5kYXRhWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IE1hdGguYWJzKHNlbGYuZGF0YVsxXSAtIHNlbGYuZGF0YVszXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh4LCAyKSArIE1hdGgucG93KHksIDIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRTdHlsZShjb2xvciwgc2hvdWxkQW5pbWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckF0dHIgPSB0eXBlID09ICdsaW5lJyA/ICdzdHJva2UnIDogJ2ZpbGwnO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlW2NvbG9yQXR0cl0gPSBjb2xvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IGdldEFuaW1hdGlvbihnZXREdXJhdGlvbihnZXRMZW5ndGgoKSksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVbJy13ZWJraXQtYW5pbWF0aW9uJ10gPSBhbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlWydhbmltYXRpb24nXSA9IGFuaW1hdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ0xpbmVHcm91cCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpbmVHcm91cDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIExpbmUobGluZURhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IGxpbmVEYXRhLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIExpbmVHcm91cCgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbFN1cGVyQ29uc3RydWN0b3IodGhpcywgYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZXNEYXRhQXJyID0gdGhpcy5kYXRhLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmVzRGF0YUFyciwgZnVuY3Rpb24gKGxpbmVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5saW5lcy5wdXNoKG5ldyBMaW5lKGxpbmVEYXRhKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1BhdGgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBQYXRoKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsU3VwZXJDb25zdHJ1Y3Rvcih0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnU3ZnUGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIFNWR1BhcnQoa2V5LCBwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTtcclxuICAgICAgICAgICAgICAgIHByb3BzLmtleSA9IGtleTtcclxuICAgICAgICAgICAgICAgIF8uYXNzaWduKHRoaXMsIHByb3BzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1BhcnRzJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG4gICAgICAgICAgICB2YXIgSlNPTl9GSUxFX1BBVEggPSAnc2NyaXB0cy9wYXJ0ZGF0YS5qc29uJztcclxuICAgICAgICAgICAgdmFyIHBhcnRzID0ge30sXHJcbiAgICAgICAgICAgICAgICBkYXRhRmV0Y2hlZDtcclxuXHJcbiAgICAgICAgICAgIHZhciBleHBvcnRzID0ge1xyXG4gICAgICAgICAgICAgICAgZmV0Y2hEYXRhOiBmZXRjaERhdGFcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHM7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBmZXRjaERhdGEoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldChKU09OX0ZJTEVfUEFUSCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFGZXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBkZmQucmVzb2x2ZShwYXJ0cyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnc2Nyb2xsJywgZnVuY3Rpb24gKEJpbmRhYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIF8uYXNzaWduKHNlbGYsIF8uYXNzaWduKG5ldyBCaW5kYWJsZSgpLCB7XHJcbiAgICAgICAgICAgICAgICBvbkF0dGFjaDogYXR0YWNoU2Nyb2xsLFxyXG4gICAgICAgICAgICAgICAgb25EZXRhY2g6IGRldGFjaFNjcm9sbFxyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGhyb3R0bGVkSGFuZGxlU2Nyb2xsO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICdiaW5kJzogc2VsZi5iaW5kXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhdHRhY2hTY3JvbGwoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdHRsZWRIYW5kbGVTY3JvbGwgPSBfLnRocm90dGxlKGhhbmRsZVNjcm9sbCwgMTAwKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aHJvdHRsZWRIYW5kbGVTY3JvbGwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZXRhY2hTY3JvbGwoKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhyb3R0bGVkSGFuZGxlU2Nyb2xsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U2Nyb2xsVG9wKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbFRvcCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxUb3A7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVNjcm9sbCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBnZXRTY3JvbGxUb3AoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLmludm9rZShzY3JvbGxUb3ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnU3ZnUGFydHMnLCBmdW5jdGlvbiAoJHEsICR0aW1lb3V0LCAkaHR0cCwgdXRpbHMsIFN2Z1BhcnQsIFBhdGgsIExpbmVHcm91cCkge1xyXG4gICAgICAgICAgICB2YXIgSlNPTl9GSUxFX1BBVEggPSAnc2NyaXB0cy9zdmdkYXRhLmpzb24nO1xyXG4gICAgICAgICAgICB2YXIgcGFydHMgPSB7fSxcclxuICAgICAgICAgICAgZGF0YUZldGNoZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHV0aWxzLmluaGVyaXQoUGF0aCwgU3ZnUGFydCk7XHJcbiAgICAgICAgICAgIHV0aWxzLmluaGVyaXQoTGluZUdyb3VwLCBTdmdQYXJ0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0geyBQYXRoOiBQYXRoLCBMaW5lR3JvdXA6IExpbmVHcm91cCB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGV4cG9ydHMgPSB7XHJcbiAgICAgICAgICAgICAgICBmZXRjaERhdGE6IGZldGNoRGF0YSxcclxuICAgICAgICAgICAgICAgIGdldE9uZTogZ2V0T25lLFxyXG4gICAgICAgICAgICAgICAgZ2V0QWxsOiBnZXRBbGwsXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVPbmU6IHVwZGF0ZU9uZSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUFsbDogdXBkYXRlQWxsLFxyXG4gICAgICAgICAgICAgICAgYWRkOiBhZGRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHM7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBmZXRjaERhdGEoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkaHR0cC5nZXQoSlNPTl9GSUxFX1BBVEgpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUZldGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGZkLnJlc29sdmUocGFydHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMzApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBwcm9jZXNzRGF0YShkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gKGRhdGFJbnN0YW5jZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkKGtleSwgZGF0YUluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGQoa2V5LCBwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhRmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICgha2V5IHx8ICFwcm9wcy50eXBlIHx8ICFwcm9wcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdQYXJ0ID0gZ2V0T25lKGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdQYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIENsYXNzID0gZ2V0Q2xhc3MocHJvcHMudHlwZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUNsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcGFydHNba2V5XSA9IG5ldyBDbGFzcyhrZXksIHByb3BzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q2xhc3Moa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3Nlc1trZXldIHx8IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE9uZShrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YUZldGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHNba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhRmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVPbmUoa2V5LCBwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhRmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBnZXRPbmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmICghcGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBfLmFzc2lnbihwYXJ0LCBwcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFsbChwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhRmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHBhcnRzLCBmdW5jdGlvbiAocGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uYXNzaWduKHBhcnQsIHByb3BzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgndXRpbHMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAnaW5oZXJpdCc6IGluaGVyaXRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaGVyaXQoY2hpbGQsIGJhc2UsIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5wcm90b3R5cGUgPSBfLmNyZWF0ZShiYXNlLnByb3RvdHlwZSwgXy5hc3NpZ24oe1xyXG4gICAgICAgICAgICAgICAgICAgICdfc3VwZXInOiBiYXNlLnByb3RvdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAnY2FsbFN1cGVyQ29uc3RydWN0b3InOiBmdW5jdGlvbiAoY3R4LCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UuYXBwbHkoY3R4LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICdjb25zdHJ1Y3Rvcic6IGNoaWxkXHJcbiAgICAgICAgICAgICAgICB9LCBwcm9wcykpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsImFuZ3VsYXIubW9kdWxlKFwiYmlrZUJ1aWxkZXJcIikucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7JHRlbXBsYXRlQ2FjaGUucHV0KFwibGluZS5ncm91cC50cGwuaHRtbFwiLFwiPGcgaWQ9e3ttb2RlbC5rZXl9fSBuZy1jbGljaz1cXFwiaGFuZGxlQ2xpY2tlZChtb2RlbC5rZXkpXFxcIiBuZy1jbGFzcz1cXFwiW21vZGVsLmtleSwgbW9kZWwuYWN0aXZlID8gXFwnYWN0aXZlXFwnIDogXFwnXFwnLCBtb2RlbC5jb2xvciA/IFxcJ2hhcy1jb2xvclxcJyA6IFxcJ1xcJ11cXFwiPlxcclxcbiAgICA8bGluZSBzdmctbGluZSBuZy1yZXBlYXQ9XFxcImxpbmUgaW4gbW9kZWwubGluZXNcXFwiIGNvbG9yPVxcXCJtb2RlbC5jb2xvclxcXCIgbGluZS1kYXRhPVxcXCJsaW5lLmRhdGFcXFwiPjwvbGluZT5cXHJcXG48L2c+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwibGluZS50cGwuaHRtbFwiLFwiPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgbmctc3R5bGU9XFxcInN0eWxlXFxcIlxcclxcbiAgICAgIG5nLWF0dHIteDE9XFxcInt7ZGF0YVswXX19XFxcIiBuZy1hdHRyLXkxPVxcXCJ7e2RhdGFbMV19fVxcXCIgbmctYXR0ci14Mj1cXFwie3tkYXRhWzJdfX1cXFwiIG5nLWF0dHIteTI9XFxcInt7ZGF0YVszXX19XFxcIlxcclxcbiAgICAgIG5nLWF0dHItc3Ryb2tlLWRhc2hhcnJheT1cXFwie3twYXRoTGVuZ3RofX1cXFwiIG5nLWF0dHItc3Ryb2tlLWRhc2hvZmZzZXQ9XFxcInt7cGF0aExlbmd0aH19XFxcIiAvPlxcclxcblwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInBhcnQuc2VjdGlvbi50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwicGFydC1zZWN0aW9uXFxcIj5cXHJcXG4gICAgPGgyIGNsYXNzPVxcXCJwYXJ0LXNlY3Rpb24tbmFtZVxcXCI+e3tuYW1lfX08L2gyPlxcclxcbiAgICA8ZGl2IHBhcnQ9XFxcInBhcnRcXFwiIG5nLXJlcGVhdD1cXFwicGFydCBpbiBnZXRQYXJ0cygpXFxcIj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwicGFydC50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwicGFydFxcXCI+XFxyXFxuICAgIDxoMyBjbGFzcz1cXFwicGFydC1uYW1lXFxcIj57e21vZGVsLm5hbWV9fTwvaDM+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImJ0bi1ncm91cCB2YXJpYW50LWJ1dHRvbnNcXFwiPlxcclxcbiAgICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCB2YXJpYW50LWJ1dHRvblxcXCIgbmctY2xhc3M9XFxcIntcXCdhY3RpdmVcXCc6IHZhcmlhbnQubmFtZSA9PSBzZWxlY3RlZFZhcmlhbnQubmFtZSB9XFxcIiBuZy1jbGljaz1cXFwic2V0U2VsZWN0ZWRWYXJpYW50KHZhcmlhbnQpXFxcIiBuZy1yZXBlYXQ9XFxcInZhcmlhbnQgaW4gbW9kZWwudmFyaWFudHNcXFwiPnt7dmFyaWFudC5uYW1lfX08L2E+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IHZhcmlhbnQtcGlja2VyPVxcXCJtb2RlbC52YXJpYW50c1xcXCIgc2VsZWN0ZWQtdmFyaWFudD1cXFwic2VsZWN0ZWRWYXJpYW50XFxcIiBiYXNlLXBhcnQtaW1nLXVybD1cXFwiY29udGVudC9pbWFnZXMvcGFydHNcXFwiPjwvZGl2PlxcclxcbiAgICA8YSBjbGFzcz1cXFwiYnRuIHBhcnQtc2VsZWN0LWJ0biBidG4tbGcgYnRuLWRlZmF1bHRcXFwiIG5nLWNsaWNrPVxcXCJoYW5kbGVDbGlja2VkKClcXFwiPlNlbGVjdCB0aGlzIHBhcnQ8L2E+XFxyXFxuPC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwicGF0aC50cGwuaHRtbFwiLFwiPHBhdGggaWQ9e3ttb2RlbC5rZXl9fSBmaWxsPVxcXCJub25lXFxcIiBuZy1jbGljaz1cXFwiaGFuZGxlQ2xpY2tlZChtb2RlbC5rZXkpXFxcIiBuZy1jbGFzcz1cXFwiW21vZGVsLnR5cGUsIG1vZGVsLmFjdGl2ZSA/IFxcJ2FjdGl2ZVxcJyA6IFxcJ1xcJywgbW9kZWwuY29sb3IgPyBcXCdoYXMtY29sb3JcXCc6XFwnXFwnXVxcXCJcXHJcXG4gICAgICBuZy1zdHlsZT1cXFwic3R5bGVcXFwiIG5nLWF0dHItc3Ryb2tlLWRhc2hhcnJheT1cXFwie3twYXRoTGVuZ3RofX1cXFwiIG5nLWF0dHItc3Ryb2tlLWRhc2hvZmZzZXQ9XFxcInt7cGF0aExlbmd0aH19XFxcIiBuZy1hdHRyLWQ9XFxcInt7bW9kZWwuZGF0YX19XFxcIiAvPlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInNwaW5uZXIudHBsLmh0bWxcIixcIjxkaXYgY2xhc3M9XFxcInNwaW5uZXJcXFwiPlxcclxcbiAgICA8aDMgY2xhc3M9XFxcImxvYWQtdGV4dFxcXCI+TG9hZGluZy4uLjwvaDM+XFxyXFxuICAgIDw/eG1sIHZlcnNpb249XFxcIjEuMFxcXCIgZW5jb2Rpbmc9XFxcInV0Zi04XFxcIiA/PlxcclxcbiAgICA8c3ZnIGlkPVxcXCJzcGlubmVyLXN2Z3t7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCIgdmVyc2lvbj1cXFwiMS4xXFxcIiBpZD1cXFwiTGF5ZXJfMVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB4bWxuczp4bGluaz1cXFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1xcXCIgeD1cXFwiMHB4XFxcIiB5PVxcXCIwcHhcXFwiXFxyXFxuICAgICAgICAgdmlld0JveD1cXFwiMjA0IDg5LjMgMjQzLjMgMjQzLjNcXFwiIGVuYWJsZS1iYWNrZ3JvdW5kPVxcXCJuZXcgMjA0IDg5LjMgMjQzLjMgMjQzLjNcXFwiIHhtbDpzcGFjZT1cXFwicHJlc2VydmVcXFwiPlxcclxcbiAgICA8ZyBpZD1cXFwic3Bpbm5lci13cmFwcGVye3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIj48ZyBpZD1cXFwic3Bpbm5lci13aGVlbHt7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCI+XFxyXFxuICAgIDxwYXRoIGlkPVxcXCJzcGlubmVyLXJpbXt7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCIgZmlsbD1cXFwibm9uZVxcXCIgZD1cXFwiTTI1OS42LDEyNS4yYzUwLjItMzksMTE5LjEtMjcuOCwxNTUuNCwyMC44YzM2LjIsNDguNSwyMi4xLDExNC40LTI0LjEsMTUzLjZcXHJcXG5cdFx0Yy0yOS41LDI1LTEwOC45LDM2LjUtMTUzLjUtMjAuOUMyMDYuMSwyMzguNCwyMTMuOSwxNjAuNywyNTkuNiwxMjUuMnogTTI0OC4yLDI3MC43YzM4LjMsNDkuMiw5MC44LDQ5LjcsMTMzLjEsMThcXHJcXG5cdFx0czUzLjItOTIuNCwyMi4xLTEzNGMtMzEuMS00MS43LTg2LjQtNTUuNy0xMzQuOC0xNi44QzIyNCwxNzMuNywyMjEuMywyMzYuMSwyNDguMiwyNzAuN3pcXFwiIC8+XFxyXFxuICAgIDxnIGlkPVxcXCJzcGlubmVyLXNwb2tlc3t7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCI+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MTYuOVxcXCIgeTE9XFxcIjE4MC45XFxcIiB4Mj1cXFwiMzM4LjdcXFwiIHkyPVxcXCIyMDMuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjMzOC43XFxcIiB5MT1cXFwiMjAzLjlcXFwiIHgyPVxcXCIzODZcXFwiIHkyPVxcXCIxMzYuM1xcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjM5OC43XFxcIiB5MT1cXFwiMTUwLjdcXFwiIHgyPVxcXCIzNDMuMlxcXCIgeTI9XFxcIjIxNS4xXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDA5LjZcXFwiIHkxPVxcXCIxNjQuMVxcXCIgeDI9XFxcIjMyOS4yXFxcIiB5Mj1cXFwiMTk5LjhcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MjAuMVxcXCIgeTE9XFxcIjE5OS44XFxcIiB4Mj1cXFwiMzQzLjJcXFwiIHkyPVxcXCIyMTUuMVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjQyMC45XFxcIiB5MT1cXFwiMjE3LjlcXFwiIHgyPVxcXCIzMzkuOFxcXCIgeTI9XFxcIjIyMS45XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDE2LjlcXFwiIHkxPVxcXCIyMzYuNFxcXCIgeDI9XFxcIjM0MC45XFxcIiB5Mj1cXFwiMjA3LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MTAuNVxcXCIgeTE9XFxcIjI1My45XFxcIiB4Mj1cXFwiMzQyLjNcXFwiIHkyPVxcXCIyMTFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MDFcXFwiIHkxPVxcXCIyNjkuM1xcXCIgeDI9XFxcIjMzNC4yXFxcIiB5Mj1cXFwiMjI2LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzODguM1xcXCIgeTE9XFxcIjI4Mi45XFxcIiB4Mj1cXFwiMzMyXFxcIiB5Mj1cXFwiMjI3LjZcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzNTYuMVxcXCIgeTE9XFxcIjMwMy4yXFxcIiB4Mj1cXFwiMzM5LjhcXFwiIHkyPVxcXCIyMjEuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjM0MC45XFxcIiB5MT1cXFwiMjIxLjlcXFwiIHgyPVxcXCIzNzMuOFxcXCIgeTI9XFxcIjI5My45XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzIwLjlcXFwiIHkxPVxcXCIzMTAuNVxcXCIgeDI9XFxcIjMyMi4yXFxcIiB5Mj1cXFwiMjI2LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMDAuN1xcXCIgeTE9XFxcIjMwNy44XFxcIiB4Mj1cXFwiMzI3XFxcIiB5Mj1cXFwiMjI3LjZcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyODIuM1xcXCIgeTE9XFxcIjMwMC40XFxcIiB4Mj1cXFwiMzMyXFxcIiB5Mj1cXFwiMjI3LjZcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyNjguMVxcXCIgeTE9XFxcIjI5MS4xXFxcIiB4Mj1cXFwiMzE1LjRcXFwiIHkyPVxcXCIyMTFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyNTQuMlxcXCIgeTE9XFxcIjI3Ny44XFxcIiB4Mj1cXFwiMzE1LjRcXFwiIHkyPVxcXCIyMjAuNVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI0NC4xXFxcIiB5MT1cXFwiMjY0LjhcXFwiIHgyPVxcXCIzMTlcXFwiIHkyPVxcXCIyMjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMTlcXFwiIHkxPVxcXCIyMjRcXFwiIHgyPVxcXCIzMzguN1xcXCIgeTI9XFxcIjMwOC42XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjM1LjVcXFwiIHkxPVxcXCIyNDYuM1xcXCIgeDI9XFxcIjMxOS41XFxcIiB5Mj1cXFwiMjI2LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyMzEuOFxcXCIgeTE9XFxcIjIyOS41XFxcIiB4Mj1cXFwiMzE5XFxcIiB5Mj1cXFwiMjA0LjNcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyMzEuMVxcXCIgeTE9XFxcIjIwOS40XFxcIiB4Mj1cXFwiMzE2LjhcXFwiIHkyPVxcXCIyMDcuNFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjIzNC4zXFxcIiB5MT1cXFwiMTkwLjdcXFwiIHgyPVxcXCIzMTZcXFwiIHkyPVxcXCIyMTcuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI0MVxcXCIgeTE9XFxcIjE3Mi41XFxcIiB4Mj1cXFwiMzE1LjVcXFwiIHkyPVxcXCIyMTUuMVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI1Mi4yXFxcIiB5MT1cXFwiMTU0LjRcXFwiIHgyPVxcXCIzMTlcXFwiIHkyPVxcXCIyMDQuM1xcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI2NC44XFxcIiB5MT1cXFwiMTQxLjFcXFwiIHgyPVxcXCIzMjMuOFxcXCIgeTI9XFxcIjIwMC44XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjk2LjJcXFwiIHkxPVxcXCIxMjEuNFxcXCIgeDI9XFxcIjMxOS41XFxcIiB5Mj1cXFwiMjA0LjFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMTUuNFxcXCIgeTE9XFxcIjExNlxcXCIgeDI9XFxcIjMzMC4zXFxcIiB5Mj1cXFwiMTk5LjNcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMzQuN1xcXCIgeTE9XFxcIjExNlxcXCIgeDI9XFxcIjMzOC43XFxcIiB5Mj1cXFwiMjAzLjlcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzNTIuM1xcXCIgeTE9XFxcIjExOC4yXFxcIiB4Mj1cXFwiMzE5XFxcIiB5Mj1cXFwiMjA0LjNcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzNzAuMlxcXCIgeTE9XFxcIjEyNS41XFxcIiB4Mj1cXFwiMzMwLjNcXFwiIHkyPVxcXCIxOTkuM1xcXCIgLz5cXHJcXG4gICAgICAgICAgICA8L2c+XFxyXFxuICAgIDxwYXRoIGlkPVxcXCJzcGlubmVyLXRpcmV7e3NwaW5uZXJLZXlQb3N0Rml4fX1cXFwiIGZpbGw9XFxcIm5vbmVcXFwiIGQ9XFxcIk0yNTkuNiwxMjUuMmM1MC4yLTM5LDExOS4xLTI3LjgsMTU1LjQsMjAuOGMzNi4yLDQ4LjUsMjIuMSwxMTQuNC0yNC4xLDE1My42XFxyXFxuXHRcdGMtMjkuNSwyNS0xMDguOSwzNi41LTE1My41LTIwLjlDMjA2LjEsMjM4LjQsMjEzLjksMTYwLjcsMjU5LjYsMTI1LjJ6IE0yMzEuMSwyODUuOWMzNS40LDUyLjEsMTE1LDUzLjUsMTYyLjgsMTkuNVxcclxcblx0XHRjNDguMi0zNC4zLDY1LjQtMTE2LjksMjYuMS0xNjQuMUMzNzguOCw5MS42LDMxOCw3My4xLDI1Mi4yLDEyMS41QzIwOC40LDE1My42LDE5MS42LDIyNy42LDIzMS4xLDI4NS45elxcXCIgLz5cXHJcXG4gICAgPHBhdGggaWQ9XFxcInNwaW5uZXItaHVie3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIiBmaWxsPVxcXCJub25lXFxcIiBkPVxcXCJNMzE1LjQsMjEzLjdjMC0yLjMsMC43LTEzLjksMTMuNS0xMy45YzcuNCwwLDEzLjUsNi4yLDEzLjUsMTMuOXMtNi4xLDEzLjktMTMuNiwxMy45XFxyXFxuXHRcdEMzMjEuNCwyMjcuNiwzMTUuNCwyMjEuNSwzMTUuNCwyMTMuN3ogTTMyMywyMThsLTQuMSwwLjZsMy40LDMuMkwzMjMsMjE4eiBNMzMzLjgsMjE2LjlsMC43LDQuMWwzLjEtMy41TDMzMy44LDIxNi45eiBNMzI4LDIxOS45XFxyXFxuXHRcdGwtMS4zLDRsNC4zLTAuN0wzMjgsMjE5Ljl6IE0zMTguNywyMTEuMmwtMC40LDQuMWwzLjktMi41TDMxOC43LDIxMS4yeiBNMzIzLjksMjA4LjNsMS4zLTMuOWwtNC40LDEuNkwzMjMuOSwyMDguM3ogTTMzNC41LDIwNS43XFxyXFxuXHRcdGwtNS4zLTIuOWwxLjcsNC4zTDMzNC41LDIwNS43eiBNMzM0LjgsMjExLjNsNCwxLjFsLTEuOC00LjNMMzM0LjgsMjExLjN6XFxcIiAvPlxcclxcbiAgICAgICAgPC9nPlxcclxcbiAgICAgICAgPC9nPlxcclxcbiAgICA8L3N2Zz5cXHJcXG48L2Rpdj5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJ2YXJpYW50LnBpY2tlci50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwidmFyaWFudC1waWNrZXJcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJpbWFnZXMtc3RhY2tcXFwiPlxcclxcbiAgICAgICAgPGltZyBjbGFzcz1cXFwidmFyaWFudC1pbWFnZVxcXCIgbmctc3JjPVxcXCJ7e2Jhc2VQYXJ0SW1nVXJsICsgXFwnL1xcJyArIHZhcmlhbnQuaW1hZ2VVcmx9fVxcXCIgbmctY2xhc3M9XFxcIntcXCdzZWxlY3RlZFxcJzogdmFyaWFudC5uYW1lID09IHNlbGVjdGVkVmFyaWFudC5uYW1lIH1cXFwiIG5nLXJlcGVhdD1cXFwidmFyaWFudCBpbiB2YXJpYW50c1xcXCIgLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XCIpO31dKTsiXSwic291cmNlUm9vdCI6Ii4vd2Vic2l0ZSJ9