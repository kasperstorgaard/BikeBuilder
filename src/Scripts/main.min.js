!function(){"use strict";angular.module("bikeBuilder",["mgcrea.ngStrap"]).value("version","0.1")}(),function(){"use strict";angular.module("bikeBuilder").controller("FlowCtrl",["$scope","$rootScope","Parts","SvgParts",function($scope,$rootScope,Parts,SvgParts){function partDataFetched(data){return ctrl.partSections=data,ctrl}function partSelected(event,sectionName,selectedPart,selectedVariant){return event&&sectionName&&selectedPart&&selectedVariant?(ctrl.updateSvgPart(selectedVariant),Parts.updateSelectedPart(sectionName,selectedPart),$rootScope.$broadcast("update:selected",sectionName,selectedPart,selectedVariant),ctrl):null}function updateSvgPart(selectedVariant){return selectedVariant&&selectedVariant.colors?(_.each(selectedVariant.colors,function(value,key){SvgParts.updateOne(key,{color:value})}),ctrl):null}var ctrl=this;ctrl.partSelected=partSelected,ctrl.updateSvgPart=updateSvgPart,ctrl.partDataFetched=partDataFetched,$scope.$on("part:selected",ctrl.partSelected),Parts.fetch().then(ctrl.partDataFetched)}])}(),function(){"use strict";angular.module("bikeBuilder").controller("PreviewCtrl",["SvgParts","DataCollection","$scope",function(SvgParts,DataCollection,$scope){function getPart(key){return ctrl.SvgDataReady?SvgParts.getOne(key):{}}function dataFetched(){_.forEach(ctrl.dataCollection.getAll(),function(svgDataPart,key){SvgParts.add(key,svgDataPart)}),ctrl.SvgDataReady=!0}function updateActiveSvgPart(event,key){SvgParts.updateAll({selected:!1}),SvgParts.updateOne(key,{selected:!0})}var ctrl=this;ctrl.getPart=getPart,ctrl.dataFetched=dataFetched,ctrl.updateActiveSvgPart=updateActiveSvgPart,$scope.$on("svgPart:clicked",updateActiveSvgPart),ctrl.dataCollection=new DataCollection({filePath:"scripts/svgdata.json",isAsync:!0}),ctrl.dataCollection.fetch().then(dataFetched)}])}(),function(){"use strict";angular.module("bikeBuilder").controller("ScrollBindCtrl",["$q","$scope","scroll",function($q,$scope,scroll){function bindToScroll(callback){scroll.bind(callback)}function bindUpdateValsToScroll(updateScopeVals){if(!_.isString(updateScopeVals))return null;try{var json=JSON.parse(updateScopeVals);bindValuesToScroll(json)}catch(e){bindValuesToScroll([updateScopeVals])}}function bindValuesToScroll(scopeKeysToUpdate){if(0!==scopeKeysToUpdate.length){var updateValuesFn=getUpdateValuesFn(scopeKeysToUpdate);scroll.bind(updateValuesFn)}}function getUpdateValuesFn(scopeKeysToUpdate){return function(scrollTop){_.each(scopeKeysToUpdate,function(scopeKey){$scope[scopeKey]=scrollTop}),$scope.$apply()}}var ctrl=this;ctrl.bindToScroll=bindToScroll,ctrl.bindUpdateValsToScroll=bindUpdateValsToScroll}])}(),function(){"use strict";angular.module("bikeBuilder").controller("ShowSpinnerCtrl",["$compile","$scope","$templateCache",function(){}])}(),function(){"use strict";angular.module("bikeBuilder").controller("SummaryCtrl",["$scope","Parts",function($scope,Parts){function partDataFetched(data){ctrl.partSections=data}function updateSelectedParts(event,sectionName,selectedPart,selectedVariant){ctrl.selectedPartSections[sectionName]={selectedPart:selectedPart,selectedVariant:selectedVariant}}var ctrl=this;ctrl.selectedPartSections={},Parts.fetch().then(partDataFetched),$scope.$on("update:selected",updateSelectedParts)}])}(),function(){"use strict";angular.module("bikeBuilder").directive("part",function(){return{restrict:"A",scope:{model:"=part",sectionName:"="},replace:!0,templateUrl:"part.tpl.html",link:function(scope){function updateSelectedPart(){scope.$emit("part:selected",scope.sectionName,scope.model,scope.selectedVariant)}function setSelectedVariant(variant){scope.selectedVariant=variant,scope.model.selected&&updateSelectedPart()}scope.updateSelectedPart=updateSelectedPart,scope.selectedVariant=angular.copy(scope.model.variants[0]),scope.setSelectedVariant=setSelectedVariant}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("partSection",function(){return{restrict:"A",scope:{name:"=partSection",type:"=partType",parts:"="},replace:!0,templateUrl:"part.section.tpl.html"}})}(),function(){"use strict";angular.module("bikeBuilder").directive("scrollBind",function(){return{restrict:"A",scope:!0,controller:"ScrollBindCtrl",link:function(scope,element,attrs,ctrl){var callback;if(_.isFunction(attrs.scollBind))return callback=attrs.scrollBind,void ctrl.bindToScroll(callback);if(attrs.updateScopeVals){var updateScopeVals=attrs.updateScopeVals.replace(/'/gi,'"');updateScopeVals&&ctrl.bindUpdateValsToScroll(updateScopeVals)}}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("selectPartButton",function(){return{restrict:"A",scope:!0,link:function(scope){function selectPart(){}scope.selectPart=selectPart}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("showSpinner",function(){var idPostFix=0;return{restrict:"A",scope:!0,priority:1,controller:"ShowSpinnerCtrl",link:function(scope){scope.spinnerKeyPostFix=idPostFix,idPostFix++}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("summaryItem",function(){return{restrict:"A",scope:{selectedPart:"=summaryItem",sectionName:"=",selectedVariant:"="},replace:!0,templateUrl:"summary.item.tpl.html"}})}(),function(){"use strict";angular.module("bikeBuilder").directive("variantPicker",function(){return{restrict:"A",replace:!0,scope:{variants:"=variantPicker",selectedVariant:"=",basePartImgUrl:"@"},templateUrl:"variant.picker.tpl.html"}})}(),function(){"use strict";angular.module("bikeBuilder").service("Parts",["DataCollection",function(DataCollection){function Parts(){DataCollection.apply(this,arguments)}function updateSelectedPart(sectionName,selectedPart){if(!sectionName||!selectedPart)return null;var section=this.items[sectionName];return section?(_.each(section.parts,function(part){part.selected=part.name==selectedPart.name}),this.items):null}return Parts.prototype=new DataCollection,Parts.prototype.updateSelectedPart=updateSelectedPart,new Parts({filePath:"scripts/partdata.json",isAsync:!0})}])}(),function(){"use strict";angular.module("bikeBuilder").service("scroll",["Bindable",function(){}])}(),function(){"use strict";angular.module("bikeBuilder").service("SvgParts",["DataCollection","utils","SvgPart","Path","LineGroup",function(DataCollection,utils,SvgPart,Path,LineGroup){function SVGParts(){DataCollection.apply(this,arguments)}function addSvgClass(key,props){if(!props.data)return null;var Class=getSvgClass(props.type);return Class?base.add.apply(this,[key,new Class(key,props)]):null}function getSvgClass(key){return classes[key]||null}var base=DataCollection.prototype;SVGParts.prototype=new DataCollection,SVGParts.prototype.add=addSvgClass,utils.inherit(Path,SvgPart),utils.inherit(LineGroup,SvgPart);var classes={Path:Path,LineGroup:LineGroup};return new SVGParts({items:{},isAsync:!1})}])}(),function(){"use strict";angular.module("bikeBuilder").service("utils",function(){function inherit(child,base,props){return child.prototype=_.create(base.prototype,_.assign({_super:base.prototype,callSuperConstructor:function(ctx,args){base.apply(ctx,args)},constructor:child},props)),child}return{inherit:inherit}})}(),angular.module("bikeBuilder").run(["$templateCache",function($templateCache){$templateCache.put("line.group.tpl.html",'<g id={{model.key}} ng-click="handleClicked(model.key)" ng-class="[model.key, model.active ? \'active\' : \'\', model.color ? \'has-color\' : \'\']">\r\n    <line svg-line ng-repeat="line in model.lines" color="model.color" line-data="line.data"></line>\r\n</g>'),$templateCache.put("line.tpl.html",'<line fill="none" ng-style="style"\r\n      ng-attr-x1="{{data[0]}}" ng-attr-y1="{{data[1]}}" ng-attr-x2="{{data[2]}}" ng-attr-y2="{{data[3]}}"\r\n      ng-attr-stroke-dasharray="{{pathLength}}" ng-attr-stroke-dashoffset="{{pathLength}}" />\r\n'),$templateCache.put("part.section.tpl.html",'<div class="part-section">\r\n    <h2 class="part-section-name">{{name}}</h2>\r\n    <div part="part" section-name="name" ng-repeat="part in parts">\r\n    </div>\r\n</div>'),$templateCache.put("part.tpl.html",'<div class="part">\r\n    <h3 class="part-name">{{model.name}}</h3>\r\n    <div class="btn-group variant-buttons">\r\n        <a class="btn btn-default variant-button" ng-class="{\'active\': variant.name == selectedVariant.name }" ng-click="setSelectedVariant(variant)" ng-repeat="variant in model.variants">{{variant.name}}</a>\r\n    </div>\r\n    <div variant-picker="model.variants" data-selected-variant="selectedVariant" data-base-part-img-url="content/images/parts"></div>\r\n    <a class="btn part-select-btn btn-lg btn-default" ng-click="updateSelectedPart()" ng-class="{\'active\': model.selected}">{{model.selected ? \'Selected\' : \'Select this part\'}}</a>\r\n</div>'),$templateCache.put("path.tpl.html",'<path id={{model.key}} fill="none" ng-click="handleClicked(model.key)" ng-class="[model.type, model.selected ? \'selected\':\'\', model.color ? \'has-color\':\'\']"\r\n      ng-style="style" ng-attr-stroke-dasharray="{{pathLength}}" ng-attr-stroke-dashoffset="{{pathLength}}" ng-attr-d="{{model.data}}" />'),$templateCache.put("spinner.tpl.html",'<div class="spinner">\r\n    <h3 class="load-text">Loading...</h3>\r\n    <?xml version="1.0" encoding="utf-8" ?>\r\n    <svg id="spinner-svg{{spinnerKeyPostFix}}" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n         viewBox="204 89.3 243.3 243.3" enable-background="new 204 89.3 243.3 243.3" xml:space="preserve">\r\n    <g id="spinner-wrapper{{spinnerKeyPostFix}}"><g id="spinner-wheel{{spinnerKeyPostFix}}">\r\n    <path id="spinner-rim{{spinnerKeyPostFix}}" fill="none" d="M259.6,125.2c50.2-39,119.1-27.8,155.4,20.8c36.2,48.5,22.1,114.4-24.1,153.6\r\n		c-29.5,25-108.9,36.5-153.5-20.9C206.1,238.4,213.9,160.7,259.6,125.2z M248.2,270.7c38.3,49.2,90.8,49.7,133.1,18\r\n		s53.2-92.4,22.1-134c-31.1-41.7-86.4-55.7-134.8-16.8C224,173.7,221.3,236.1,248.2,270.7z" />\r\n    <g id="spinner-spokes{{spinnerKeyPostFix}}">\r\n    <line fill="none" x1="416.9" y1="180.9" x2="338.7" y2="203.9" />\r\n    <line fill="none" x1="338.7" y1="203.9" x2="386" y2="136.3" />\r\n    <line fill="none" x1="398.7" y1="150.7" x2="343.2" y2="215.1" />\r\n    <line fill="none" x1="409.6" y1="164.1" x2="329.2" y2="199.8" />\r\n    <line fill="none" x1="420.1" y1="199.8" x2="343.2" y2="215.1" />\r\n    <line fill="none" x1="420.9" y1="217.9" x2="339.8" y2="221.9" />\r\n    <line fill="none" x1="416.9" y1="236.4" x2="340.9" y2="207.4" />\r\n    <line fill="none" x1="410.5" y1="253.9" x2="342.3" y2="211" />\r\n    <line fill="none" x1="401" y1="269.3" x2="334.2" y2="226.4" />\r\n    <line fill="none" x1="388.3" y1="282.9" x2="332" y2="227.6" />\r\n    <line fill="none" x1="356.1" y1="303.2" x2="339.8" y2="221.9" />\r\n    <line fill="none" x1="340.9" y1="221.9" x2="373.8" y2="293.9" />\r\n    <line fill="none" x1="320.9" y1="310.5" x2="322.2" y2="226.4" />\r\n    <line fill="none" x1="300.7" y1="307.8" x2="327" y2="227.6" />\r\n    <line fill="none" x1="282.3" y1="300.4" x2="332" y2="227.6" />\r\n    <line fill="none" x1="268.1" y1="291.1" x2="315.4" y2="211" />\r\n    <line fill="none" x1="254.2" y1="277.8" x2="315.4" y2="220.5" />\r\n    <line fill="none" x1="244.1" y1="264.8" x2="319" y2="224" />\r\n    <line fill="none" x1="319" y1="224" x2="338.7" y2="308.6" />\r\n    <line fill="none" x1="235.5" y1="246.3" x2="319.5" y2="226.4" />\r\n    <line fill="none" x1="231.8" y1="229.5" x2="319" y2="204.3" />\r\n    <line fill="none" x1="231.1" y1="209.4" x2="316.8" y2="207.4" />\r\n    <line fill="none" x1="234.3" y1="190.7" x2="316" y2="217.9" />\r\n    <line fill="none" x1="241" y1="172.5" x2="315.5" y2="215.1" />\r\n    <line fill="none" x1="252.2" y1="154.4" x2="319" y2="204.3" />\r\n    <line fill="none" x1="264.8" y1="141.1" x2="323.8" y2="200.8" />\r\n    <line fill="none" x1="296.2" y1="121.4" x2="319.5" y2="204.1" />\r\n    <line fill="none" x1="315.4" y1="116" x2="330.3" y2="199.3" />\r\n    <line fill="none" x1="334.7" y1="116" x2="338.7" y2="203.9" />\r\n    <line fill="none" x1="352.3" y1="118.2" x2="319" y2="204.3" />\r\n    <line fill="none" x1="370.2" y1="125.5" x2="330.3" y2="199.3" />\r\n            </g>\r\n    <path id="spinner-tire{{spinnerKeyPostFix}}" fill="none" d="M259.6,125.2c50.2-39,119.1-27.8,155.4,20.8c36.2,48.5,22.1,114.4-24.1,153.6\r\n		c-29.5,25-108.9,36.5-153.5-20.9C206.1,238.4,213.9,160.7,259.6,125.2z M231.1,285.9c35.4,52.1,115,53.5,162.8,19.5\r\n		c48.2-34.3,65.4-116.9,26.1-164.1C378.8,91.6,318,73.1,252.2,121.5C208.4,153.6,191.6,227.6,231.1,285.9z" />\r\n    <path id="spinner-hub{{spinnerKeyPostFix}}" fill="none" d="M315.4,213.7c0-2.3,0.7-13.9,13.5-13.9c7.4,0,13.5,6.2,13.5,13.9s-6.1,13.9-13.6,13.9\r\n		C321.4,227.6,315.4,221.5,315.4,213.7z M323,218l-4.1,0.6l3.4,3.2L323,218z M333.8,216.9l0.7,4.1l3.1-3.5L333.8,216.9z M328,219.9\r\n		l-1.3,4l4.3-0.7L328,219.9z M318.7,211.2l-0.4,4.1l3.9-2.5L318.7,211.2z M323.9,208.3l1.3-3.9l-4.4,1.6L323.9,208.3z M334.5,205.7\r\n		l-5.3-2.9l1.7,4.3L334.5,205.7z M334.8,211.3l4,1.1l-1.8-4.3L334.8,211.3z" />\r\n        </g>\r\n        </g>\r\n    </svg>\r\n</div>'),$templateCache.put("summary.item.tpl.html",'<li ng-show="selectedPart" class="summary-item">\r\n    <span class="summary-section-name">{{sectionName}}:&nbsp;</span>\r\n    <span class="summary-part-name">{{selectedPart.name}}</span>\r\n    <span class="summary-variant-color" ng-repeat="color in selectedVariant.colors" ng-style="{\'background\':color}">&nbsp;</span>\r\n</li>'),$templateCache.put("variant.picker.tpl.html",'<div class="variant-picker">\r\n    <div class="images-stack">\r\n        <img class="variant-image" /> <!-- set class "selected" to pull image to front of stack -->\r\n    </div>\r\n</div>')}]),function(){"use strict";angular.module("bikeBuilder").directive("svgLineGroup",function(){return{restrict:"A",replace:!0,scope:{model:"="},templateNamespace:"svg",templateUrl:"line.group.tpl.html",link:function(scope){function handleClicked(key){scope.$emit("svgPart:clicked",key)}scope.handleClicked=handleClicked}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("svgLine",["SvgAnimationDirective",function(SvgAnimationDirective){return{restrict:"A",replace:!0,scope:{color:"=",data:"=lineData"},templateNamespace:"svg",templateUrl:"line.tpl.html",link:function(scope,element){function loadAnimation(){scope.pathLength=base.getLength(),scope.style=base.getStyle(scope.color,!0),scope.$apply()}function updateColor(){scope.style=base.getStyle(scope.color,!1)}var el=element[0],base=new SvgAnimationDirective(el,"line",{msPrUnit:20,data:scope.data});scope.$on("svgRootLoaded",loadAnimation),scope.$watch("color",updateColor)}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("svgPath",["SvgAnimationDirective",function(SvgAnimationDirective){return{restrict:"A",replace:!0,scope:{model:"="},templateNamespace:"svg",templateUrl:"path.tpl.html",link:function(scope,element){function handleClicked(key){scope.$emit("svgPart:clicked",key)}function loadAnimation(){scope.pathLength=base.getLength(),scope.style=base.getStyle(scope.model.color,!0),scope.$apply()}function updateColor(){scope.style=base.getStyle(scope.model.color,!1)}var el=element[0],base=new SvgAnimationDirective(el,"path",{data:scope.model.data});scope.$on("svgRootLoaded",loadAnimation),scope.handleClicked=handleClicked,scope.$watch("model.color",updateColor)}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("svgRoot",function(){return{restrict:"A",scope:!0,link:function(scope,element){var el=element[0];el.addEventListener("load",function(){scope.$broadcast("svgRootLoaded"),scope.svgRootLoaded=!0,scope.$apply()})}}})}(),function(){"use strict";angular.module("bikeBuilder").factory("Bindable",function(){function Bindable(){this._callbacks=[]}function bind(callback){var self=this;this._callbacks.push(callback);var index=this._callbacks.length-1;return 0===index&&this.onAttach(),this.onBound(),function(){self._callbacks.splice(index,1),self.onUnBound(),0===self._callbacks.length&&self.onDetach()}}function invoke(){var args=arguments;_.each(this._callbacks,function(callback){callback.apply(null,args)})}return Bindable.prototype.onAttach=angular.noop,Bindable.prototype.onBound=angular.noop,Bindable.prototype.onUnBound=angular.noop,Bindable.prototype.onDetach=angular.noop,Bindable.prototype.bind=bind,Bindable.prototype.invoke=invoke,Bindable})}(),function(){"use strict";angular.module("bikeBuilder").factory("DataCollection",["$q","$timeout","$http",function(){function DataCollection(options){options=options||{},this.isAsync=_.isUndefined(options.isAsync)?!1:options.isAsync,this.items=options.items||{},this.fetched=!1,this.fetching=!1,this.filePath=options.filePath}function fetch(){}function processData(data){return data}function add(key,item){if(this.isAsync&&!this.fetched)return null;if(!key)return null;var existing=this.getOne(key);return existing?null:(this.items[key]=item,this.items)}function addAll(collection){var self=this;return this.isAsync&&!this.fetched?null:collection&&0!==_.size(collection)?(_.forEach(collection,function(item,key){self.add(key,item)}),this.items):null}function getOne(key){if(this.isAsync&&!this.fetched)return null;var item=this.items[key];return item?item:null}function getAll(){return this.isAsync&&!this.fetched?null:this.items}function updateOne(key,props){if(this.isAsync&&!this.fetched)return null;var item=this.getOne(key);return item?_.assign(item,props):null}function updateAll(props){return this.isAsync&&!this.fetched?null:(_.each(this.items,function(item){_.assign(item,props)}),this.items)}return DataCollection.prototype.fetch=fetch,DataCollection.prototype.getOne=getOne,DataCollection.prototype.getAll=getAll,DataCollection.prototype.updateOne=updateOne,DataCollection.prototype.updateAll=updateAll,DataCollection.prototype.processData=processData,DataCollection.prototype.add=add,DataCollection.prototype.addAll=addAll,DataCollection}])}(),function(){"use strict";angular.module("bikeBuilder").factory("SvgAnimationDirective",function(){return function(el,type,options){function getLength(){switch(self.type){case"path":return getPathLength();case"line":return getLineLength();default:return null}}function getDuration(length){return _.isUndefined(length)&&(length=getLength()),Math.min(length*self.msPrUnit,self.maxMs)+"ms"}function getAnimation(duration,shouldRepeat){_.isUndefined(duration)&&(duration=getDuration());var repeat=shouldRepeat?"infinite":"";return"dash "+duration+" linear forwards "+repeat}function getPathLength(){return self.el.getTotalLength()}function getLineLength(){var x=Math.abs(self.data[0]-self.data[2]),y=Math.abs(self.data[1]-self.data[3]);return Math.sqrt(Math.pow(x,2)+Math.pow(y,2))}function getStyle(color,shouldAnimate){var style={},colorAttr="line"==type?"stroke":"fill";if(style[colorAttr]=color,shouldAnimate){var animation=getAnimation(getDuration(getLength()),!1);style["-webkit-animation"]=animation,style.animation=animation}return style}var self=this;options=options||{},this.el=el,this.type=type,this.data=options.data||{},this.msPrUnit=options.msPrUnit||4.16,this.maxMs=options.maxMs||1e4,this.getAnimation=getAnimation,this.getDuration=getDuration,this.getLength=getLength,this.getStyle=getStyle}})}(),function(){"use strict";angular.module("bikeBuilder").service("LineGroup",function(){function Line(lineData){this.data=lineData.split(",")}function LineGroup(){this.callSuperConstructor(this,arguments);var linesDataArr=this.data.split("|");this.lines=[];var self=this;_.each(linesDataArr,function(lineData){self.lines.push(new Line(lineData))})}return LineGroup})}(),function(){"use strict";angular.module("bikeBuilder").service("Path",function(){return function(){this.callSuperConstructor(this,arguments)}})}(),function(){"use strict";angular.module("bikeBuilder").service("SvgPart",function(){return function(key,props){props=props||{},props.key=key,_.assign(this,props)}})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb250cm9sbGVycy9mbG93LmN0cmwuanMiLCJjb250cm9sbGVycy9wcmV2aWV3LmN0cmwuanMiLCJjb250cm9sbGVycy9zY3JvbGwuYmluZC5jdHJsLmpzIiwiY29udHJvbGxlcnMvc2hvdy5zcGlubmVyLmN0cmwuanMiLCJjb250cm9sbGVycy9zdW1tYXJ5LmN0cmwuanMiLCJkaXJlY3RpdmVzL3BhcnQuanMiLCJkaXJlY3RpdmVzL3BhcnQuc2VjdGlvbi5qcyIsImRpcmVjdGl2ZXMvc2Nyb2xsLmJpbmQuanMiLCJkaXJlY3RpdmVzL3NlbGVjdC5wYXJ0LmJ1dHRvbi5qcyIsImRpcmVjdGl2ZXMvc2hvdy5zcGlubmVyLmpzIiwiZGlyZWN0aXZlcy9zdW1tYXJ5Lml0ZW0uanMiLCJkaXJlY3RpdmVzL3ZhcmlhbnQucGlja2VyLmpzIiwic2VydmljZXMvcGFydHMuanMiLCJzZXJ2aWNlcy9zY3JvbGwuanMiLCJzZXJ2aWNlcy9zdmcucGFydHMuanMiLCJzZXJ2aWNlcy91dGlscy5qcyIsInRlbXBsYXRlcy90ZW1wbGF0ZXMuanMiLCJkaXJlY3RpdmVzL3N2Zy9saW5lLmdyb3VwLmpzIiwiZGlyZWN0aXZlcy9zdmcvbGluZS5qcyIsImRpcmVjdGl2ZXMvc3ZnL3BhdGguanMiLCJkaXJlY3RpdmVzL3N2Zy9zdmcucm9vdC5qcyIsInNlcnZpY2VzL2Jhc2UvQmluZGFibGUuanMiLCJzZXJ2aWNlcy9iYXNlL0RhdGFDb2xsZWN0aW9uLmpzIiwic2VydmljZXMvYmFzZS9TdmdBbmltYXRpb25EaXJlY3RpdmUuanMiLCJzZXJ2aWNlcy9iYXNlL3N2Zy9MaW5lR3JvdXAuanMiLCJzZXJ2aWNlcy9iYXNlL3N2Zy9QYXRoLmpzIiwic2VydmljZXMvYmFzZS9zdmcvU3ZnUGFydC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQUEsbUJBQ0EsTUFBQSxVQUFBLFVDSEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFdBQUEsWUFBQSxTQUFBLGFBQUEsUUFBQSxXQUFBLFNBQUEsT0FBQSxXQUFBLE1BQUEsVUFZQSxRQUFBLGlCQUFBLE1BRUEsTUFEQSxNQUFBLGFBQUEsS0FDQSxLQUdBLFFBQUEsY0FBQSxNQUFBLFlBQUEsYUFBQSxpQkFDQSxNQUFBLFFBQUEsYUFBQSxjQUFBLGlCQUlBLEtBQUEsY0FBQSxpQkFDQSxNQUFBLG1CQUFBLFlBQUEsY0FDQSxXQUFBLFdBQUEsa0JBQUEsWUFBQSxhQUFBLGlCQUNBLE1BTkEsS0FTQSxRQUFBLGVBQUEsaUJBQ0EsTUFBQSxrQkFBQSxnQkFBQSxRQUlBLEVBQUEsS0FBQSxnQkFBQSxPQUFBLFNBQUEsTUFBQSxLQUNBLFNBQUEsVUFBQSxLQUFBLE1BQUEsVUFHQSxNQVBBLEtBN0JBLEdBQUEsTUFBQSxJQUVBLE1BQUEsYUFBQSxhQUNBLEtBQUEsY0FBQSxjQUNBLEtBQUEsZ0JBQUEsZ0JBRUEsT0FBQSxJQUFBLGdCQUFBLEtBQUEsY0FDQSxNQUFBLFFBQUEsS0FBQSxLQUFBLHVCQ1hBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxXQUFBLGVBQUEsV0FBQSxpQkFBQSxTQUFBLFNBQUEsU0FBQSxlQUFBLFFBY0EsUUFBQSxTQUFBLEtBQ0EsTUFBQSxNQUFBLGFBR0EsU0FBQSxPQUFBLFFBR0EsUUFBQSxlQUNBLEVBQUEsUUFBQSxLQUFBLGVBQUEsU0FBQSxTQUFBLFlBQUEsS0FDQSxTQUFBLElBQUEsSUFBQSxlQUVBLEtBQUEsY0FBQSxFQUdBLFFBQUEscUJBQUEsTUFBQSxLQUNBLFNBQUEsV0FBQSxVQUFBLElBQ0EsU0FBQSxVQUFBLEtBQUEsVUFBQSxJQTdCQSxHQUFBLE1BQUEsSUFDQSxNQUFBLFFBQUEsUUFDQSxLQUFBLFlBQUEsWUFDQSxLQUFBLG9CQUFBLG9CQUVBLE9BQUEsSUFBQSxrQkFBQSxxQkFFQSxLQUFBLGVBQUEsR0FBQSxpQkFBQSxTQUFBLHVCQUFBLFNBQUEsSUFFQSxLQUFBLGVBQUEsUUFBQSxLQUFBLG1CQ2JBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxXQUFBLGtCQUFBLEtBQUEsU0FBQSxTQUFBLFNBQUEsR0FBQSxPQUFBLFFBUUEsUUFBQSxjQUFBLFVBQ0EsT0FBQSxLQUFBLFVBR0EsUUFBQSx3QkFBQSxpQkFDQSxJQUFBLEVBQUEsU0FBQSxpQkFDQSxNQUFBLEtBRUEsS0FDQSxHQUFBLE1BQUEsS0FBQSxNQUFBLGdCQUNBLG9CQUFBLE1BQ0EsTUFBQSxHQUNBLG9CQUFBLG1CQUlBLFFBQUEsb0JBQUEsbUJBQ0EsR0FBQSxJQUFBLGtCQUFBLE9BQUEsQ0FHQSxHQUFBLGdCQUFBLGtCQUFBLGtCQUNBLFFBQUEsS0FBQSxpQkFHQSxRQUFBLG1CQUFBLG1CQUNBLE1BQUEsVUFBQSxXQUNBLEVBQUEsS0FBQSxrQkFBQSxTQUFBLFVBQ0EsT0FBQSxVQUFBLFlBRUEsT0FBQSxVQXBDQSxHQUFBLE1BQUEsSUFFQSxNQUFBLGFBQUEsYUFDQSxLQUFBLHVCQUFBLDZCQ1BBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxXQUFBLG1CQUFBLFdBQUEsU0FBQSxpQkFBQSxrQkNIQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsV0FBQSxlQUFBLFNBQUEsUUFBQSxTQUFBLE9BQUEsT0FXQSxRQUFBLGlCQUFBLE1BQ0EsS0FBQSxhQUFBLEtBR0EsUUFBQSxxQkFBQSxNQUFBLFlBQUEsYUFBQSxpQkFDQSxLQUFBLHFCQUFBLGNBQUEsYUFBQSxhQUFBLGdCQUFBLGlCQWZBLEdBQUEsTUFBQSxJQUVBLE1BQUEsd0JBRUEsTUFBQSxRQUFBLEtBQUEsaUJBRUEsT0FBQSxJQUFBLGtCQUFBLDJCQ1ZBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLE9BQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxPQUNBLE1BQUEsUUFDQSxZQUFBLEtBRUEsU0FBQSxFQUNBLFlBQUEsZ0JBQ0EsS0FBQSxTQUFBLE9BTUEsUUFBQSxzQkFDQSxNQUFBLE1BQUEsZ0JBQUEsTUFBQSxZQUFBLE1BQUEsTUFBQSxNQUFBLGlCQUdBLFFBQUEsb0JBQUEsU0FDQSxNQUFBLGdCQUFBLFFBQ0EsTUFBQSxNQUFBLFVBQ0EscUJBWkEsTUFBQSxtQkFBQSxtQkFDQSxNQUFBLGdCQUFBLFFBQUEsS0FBQSxNQUFBLE1BQUEsU0FBQSxJQUNBLE1BQUEsbUJBQUEsMEJDZkEsV0FDQSxZQUVBLFNBQUEsT0FBQSxlQUNBLFVBQUEsY0FBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQ0EsS0FBQSxlQUNBLEtBQUEsWUFDQSxNQUFBLEtBRUEsU0FBQSxFQUNBLFlBQUEsOEJDYkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsYUFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQUEsRUFDQSxXQUFBLGlCQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsTUFBQSxNQUNBLEdBQUEsU0FDQSxJQUFBLEVBQUEsV0FBQSxNQUFBLFdBR0EsTUFGQSxVQUFBLE1BQUEsZUFDQSxNQUFBLGFBQUEsU0FJQSxJQUFBLE1BQUEsZ0JBQUEsQ0FHQSxHQUFBLGlCQUFBLE1BQUEsZ0JBQUEsUUFBQSxNQUFBLElBQ0Esa0JBQ0EsS0FBQSx1QkFBQSx5QkNyQkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsbUJBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxPQUFBLEVBQ0EsS0FBQSxTQUFBLE9BS0EsUUFBQSxlQUhBLE1BQUEsV0FBQSxrQkNUQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxjQUFBLFdBQ0EsR0FBQSxXQUFBLENBRUEsUUFDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLFNBQUEsRUFDQSxXQUFBLGtCQUNBLEtBQUEsU0FBQSxPQUVBLE1BQUEsa0JBQUEsVUFDQSxtQkNkQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxjQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsT0FDQSxhQUFBLGVBQ0EsWUFBQSxJQUNBLGdCQUFBLEtBRUEsU0FBQSxFQUNBLFlBQUEsOEJDWkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsZ0JBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLEVBQ0EsT0FDQSxTQUFBLGlCQUNBLGdCQUFBLElBQ0EsZUFBQSxLQUVBLFlBQUEsZ0NDWkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsU0FBQSxpQkFBQSxTQUFBLGdCQUNBLFFBQUEsU0FDQSxlQUFBLE1BQUEsS0FBQSxXQVNBLFFBQUEsb0JBQUEsWUFBQSxjQUNBLElBQUEsY0FBQSxhQUNBLE1BQUEsS0FHQSxJQUFBLFNBQUEsS0FBQSxNQUFBLFlBQ0EsT0FBQSxVQUlBLEVBQUEsS0FBQSxRQUFBLE1BQUEsU0FBQSxNQUNBLEtBQUEsU0FBQSxLQUFBLE1BQUEsYUFBQSxPQUdBLEtBQUEsT0FQQSxLQVhBLE1BSEEsT0FBQSxVQUFBLEdBQUEsZ0JBQ0EsTUFBQSxVQUFBLG1CQUFBLG1CQUVBLEdBQUEsUUFBQSxTQUFBLHdCQUFBLFNBQUEsVUNWQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxVQUFBLFdBQUEsa0JDSEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsWUFBQSxpQkFBQSxRQUFBLFVBQUEsT0FBQSxZQUFBLFNBQUEsZUFBQSxNQUFBLFFBQUEsS0FBQSxXQUNBLFFBQUEsWUFDQSxlQUFBLE1BQUEsS0FBQSxXQWdCQSxRQUFBLGFBQUEsSUFBQSxPQUNBLElBQUEsTUFBQSxLQUNBLE1BQUEsS0FHQSxJQUFBLE9BQUEsWUFBQSxNQUFBLEtBQ0EsT0FBQSxPQUlBLEtBQUEsSUFBQSxNQUFBLE1BQUEsSUFBQSxHQUFBLE9BQUEsSUFBQSxTQUhBLEtBTUEsUUFBQSxhQUFBLEtBQ0EsTUFBQSxTQUFBLE1BQUEsS0EzQkEsR0FBQSxNQUFBLGVBQUEsU0FDQSxVQUFBLFVBQUEsR0FBQSxnQkFDQSxTQUFBLFVBQUEsSUFBQSxZQUVBLE1BQUEsUUFBQSxLQUFBLFNBQ0EsTUFBQSxRQUFBLFVBQUEsUUFFQSxJQUFBLFVBQUEsS0FBQSxLQUFBLFVBQUEsVUFFQSxPQUFBLElBQUEsV0FBQSxTQUFBLFNBQUEsVUNqQkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsUUFBQSxXQU9BLFFBQUEsU0FBQSxNQUFBLEtBQUEsT0FTQSxNQVJBLE9BQUEsVUFBQSxFQUFBLE9BQUEsS0FBQSxVQUFBLEVBQUEsUUFDQSxPQUFBLEtBQUEsVUFDQSxxQkFBQSxTQUFBLElBQUEsTUFDQSxLQUFBLE1BQUEsSUFBQSxPQUVBLFlBQUEsT0FDQSxRQUVBLE1BZkEsT0FDQSxRQUFBLGNDTEEsUUFBQSxPQUFBLGVBQUEsS0FBQSxpQkFBQSxTQUFBLGdCQUFBLGVBQUEsSUFBQSxzQkFBQSx5UUFDQSxlQUFBLElBQUEsZ0JBQUEsd1BBQ0EsZUFBQSxJQUFBLHdCQUFBLGdMQUNBLGVBQUEsSUFBQSxnQkFBQSwycUJBQ0EsZUFBQSxJQUFBLGdCQUFBLHFUQUNBLGVBQUEsSUFBQSxtQkFBQSxpOEhBQ0EsZUFBQSxJQUFBLHdCQUFBLGdWQUNBLGVBQUEsSUFBQSwwQkFBQSxvTUNQQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxlQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsU0FBQSxFQUNBLE9BQ0EsTUFBQSxLQUVBLGtCQUFBLE1BQ0EsWUFBQSxzQkFDQSxLQUFBLFNBQUEsT0FLQSxRQUFBLGVBQUEsS0FDQSxNQUFBLE1BQUEsa0JBQUEsS0FMQSxNQUFBLGNBQUEscUJDYkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsV0FBQSx3QkFBQSxTQUFBLHVCQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsRUFDQSxPQUNBLE1BQUEsSUFDQSxLQUFBLGFBRUEsa0JBQUEsTUFDQSxZQUFBLGdCQUNBLEtBQUEsU0FBQSxNQUFBLFNBU0EsUUFBQSxpQkFDQSxNQUFBLFdBQUEsS0FBQSxZQUNBLE1BQUEsTUFBQSxLQUFBLFNBQUEsTUFBQSxPQUFBLEdBQ0EsTUFBQSxTQUdBLFFBQUEsZUFDQSxNQUFBLE1BQUEsS0FBQSxTQUFBLE1BQUEsT0FBQSxHQWZBLEdBQUEsSUFBQSxRQUFBLEdBQ0EsS0FBQSxHQUFBLHVCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQUEsS0FBQSxNQUFBLE1BRUEsT0FBQSxJQUFBLGdCQUFBLGVBQ0EsTUFBQSxPQUFBLFFBQUEscUJDbEJBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLFdBQUEsd0JBQUEsU0FBQSx1QkFDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLEVBQ0EsT0FDQSxNQUFBLEtBRUEsa0JBQUEsTUFDQSxZQUFBLGdCQUNBLEtBQUEsU0FBQSxNQUFBLFNBV0EsUUFBQSxlQUFBLEtBQ0EsTUFBQSxNQUFBLGtCQUFBLEtBR0EsUUFBQSxpQkFDQSxNQUFBLFdBQUEsS0FBQSxZQUNBLE1BQUEsTUFBQSxLQUFBLFNBQUEsTUFBQSxNQUFBLE9BQUEsR0FDQSxNQUFBLFNBR0EsUUFBQSxlQUNBLE1BQUEsTUFBQSxLQUFBLFNBQUEsTUFBQSxNQUFBLE9BQUEsR0FwQkEsR0FBQSxJQUFBLFFBQUEsR0FDQSxLQUFBLEdBQUEsdUJBQUEsR0FBQSxRQUFBLEtBQUEsTUFBQSxNQUFBLE1BRUEsT0FBQSxJQUFBLGdCQUFBLGVBQ0EsTUFBQSxjQUFBLGNBQ0EsTUFBQSxPQUFBLGNBQUEscUJDbkJBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLFVBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxPQUFBLEVBQ0EsS0FBQSxTQUFBLE1BQUEsU0FDQSxHQUFBLElBQUEsUUFBQSxFQUNBLElBQUEsaUJBQUEsT0FBQSxXQUNBLE1BQUEsV0FBQSxpQkFDQSxNQUFBLGVBQUEsRUFDQSxNQUFBLGtCQ1pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFdBQUEsV0FDQSxRQUFBLFlBQ0EsS0FBQSxjQWVBLFFBQUEsTUFBQSxVQUNBLEdBQUEsTUFBQSxJQUVBLE1BQUEsV0FBQSxLQUFBLFNBQ0EsSUFBQSxPQUFBLEtBQUEsV0FBQSxPQUFBLENBUUEsT0FOQSxLQUFBLE9BQ0EsS0FBQSxXQUdBLEtBQUEsVUFFQSxXQUNBLEtBQUEsV0FBQSxPQUFBLE1BQUEsR0FFQSxLQUFBLFlBRUEsSUFBQSxLQUFBLFdBQUEsUUFDQSxLQUFBLFlBS0EsUUFBQSxVQUNBLEdBQUEsTUFBQSxTQUNBLEdBQUEsS0FBQSxLQUFBLFdBQUEsU0FBQSxVQUNBLFNBQUEsTUFBQSxLQUFBLFFBOUJBLE1BUkEsVUFBQSxVQUFBLFNBQUEsUUFBQSxLQUNBLFNBQUEsVUFBQSxRQUFBLFFBQUEsS0FDQSxTQUFBLFVBQUEsVUFBQSxRQUFBLEtBQ0EsU0FBQSxVQUFBLFNBQUEsUUFBQSxLQUVBLFNBQUEsVUFBQSxLQUFBLEtBQ0EsU0FBQSxVQUFBLE9BQUEsT0FFQSxjQ2hCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxrQkFBQSxLQUFBLFdBQUEsUUFBQSxXQUNBLFFBQUEsZ0JBQUEsU0FDQSxRQUFBLFlBRUEsS0FBQSxRQUFBLEVBQUEsWUFBQSxRQUFBLFVBQUEsRUFBQSxRQUFBLFFBQ0EsS0FBQSxNQUFBLFFBQUEsVUFDQSxLQUFBLFNBQUEsRUFDQSxLQUFBLFVBQUEsRUFDQSxLQUFBLFNBQUEsUUFBQSxTQWdCQSxRQUFBLFVBSUEsUUFBQSxhQUFBLE1BQ0EsTUFBQSxNQUdBLFFBQUEsS0FBQSxJQUFBLE1BQ0EsR0FBQSxLQUFBLFVBQUEsS0FBQSxRQUNBLE1BQUEsS0FHQSxLQUFBLElBQ0EsTUFBQSxLQUVBLElBQUEsVUFBQSxLQUFBLE9BQUEsSUFDQSxPQUFBLFVBQ0EsTUFHQSxLQUFBLE1BQUEsS0FBQSxLQUNBLEtBQUEsT0FHQSxRQUFBLFFBQUEsWUFDQSxHQUFBLE1BQUEsSUFDQSxPQUFBLE1BQUEsVUFBQSxLQUFBLFFBQ0EsS0FHQSxZQUFBLElBQUEsRUFBQSxLQUFBLGFBSUEsRUFBQSxRQUFBLFdBQUEsU0FBQSxLQUFBLEtBQ0EsS0FBQSxJQUFBLElBQUEsUUFFQSxLQUFBLE9BTkEsS0FTQSxRQUFBLFFBQUEsS0FDQSxHQUFBLEtBQUEsVUFBQSxLQUFBLFFBQ0EsTUFBQSxLQUVBLElBQUEsTUFBQSxLQUFBLE1BQUEsSUFDQSxPQUFBLE1BQ0EsS0FFQSxLQUdBLFFBQUEsVUFDQSxNQUFBLE1BQUEsVUFBQSxLQUFBLFFBQ0EsS0FFQSxLQUFBLE1BR0EsUUFBQSxXQUFBLElBQUEsT0FDQSxHQUFBLEtBQUEsVUFBQSxLQUFBLFFBQ0EsTUFBQSxLQUVBLElBQUEsTUFBQSxLQUFBLE9BQUEsSUFDQSxPQUFBLE1BSUEsRUFBQSxPQUFBLEtBQUEsT0FIQSxLQU1BLFFBQUEsV0FBQSxPQUNBLE1BQUEsTUFBQSxVQUFBLEtBQUEsUUFDQSxNQUVBLEVBQUEsS0FBQSxLQUFBLE1BQUEsU0FBQSxNQUNBLEVBQUEsT0FBQSxLQUFBLFNBRUEsS0FBQSxPQWxGQSxNQVRBLGdCQUFBLFVBQUEsTUFBQSxNQUNBLGVBQUEsVUFBQSxPQUFBLE9BQ0EsZUFBQSxVQUFBLE9BQUEsT0FDQSxlQUFBLFVBQUEsVUFBQSxVQUNBLGVBQUEsVUFBQSxVQUFBLFVBQ0EsZUFBQSxVQUFBLFlBQUEsWUFDQSxlQUFBLFVBQUEsSUFBQSxJQUNBLGVBQUEsVUFBQSxPQUFBLE9BRUEscUJDdkJBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLHdCQUFBLFdBQ0EsTUFBQSxVQUFBLEdBQUEsS0FBQSxTQWtCQSxRQUFBLGFBQ0EsT0FBQSxLQUFBLE1BQ0EsSUFBQSxPQUNBLE1BQUEsZ0JBQ0EsS0FBQSxPQUNBLE1BQUEsZ0JBQ0EsU0FDQSxNQUFBLE9BSUEsUUFBQSxhQUFBLFFBS0EsTUFKQSxHQUFBLFlBQUEsVUFDQSxPQUFBLGFBR0EsS0FBQSxJQUFBLE9BQUEsS0FBQSxTQUFBLEtBQUEsT0FBQSxLQUdBLFFBQUEsY0FBQSxTQUFBLGNBQ0EsRUFBQSxZQUFBLFlBQ0EsU0FBQSxjQUdBLElBQUEsUUFBQSxhQUFBLFdBQUEsRUFDQSxPQUFBLFFBQUEsU0FBQSxvQkFBQSxPQUdBLFFBQUEsaUJBQ0EsTUFBQSxNQUFBLEdBQUEsaUJBR0EsUUFBQSxpQkFDQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUEsS0FBQSxJQUNBLEVBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUEsS0FBQSxHQUNBLE9BQUEsTUFBQSxLQUFBLEtBQUEsSUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsSUFHQSxRQUFBLFVBQUEsTUFBQSxlQUNBLEdBQUEsVUFDQSxVQUFBLFFBQUEsS0FBQSxTQUFBLE1BR0EsSUFGQSxNQUFBLFdBQUEsTUFFQSxjQUFBLENBQ0EsR0FBQSxXQUFBLGFBQUEsWUFBQSxjQUFBLEVBQ0EsT0FBQSxxQkFBQSxVQUNBLE1BQUEsVUFBQSxVQUdBLE1BQUEsT0FsRUEsR0FBQSxNQUFBLElBQ0EsU0FBQSxZQUVBLEtBQUEsR0FBQSxHQUNBLEtBQUEsS0FBQSxLQUNBLEtBQUEsS0FBQSxRQUFBLFNBRUEsS0FBQSxTQUFBLFFBQUEsVUFBQSxLQUNBLEtBQUEsTUFBQSxRQUFBLE9BQUEsSUFFQSxLQUFBLGFBQUEsYUFDQSxLQUFBLFlBQUEsWUFDQSxLQUFBLFVBQUEsVUFDQSxLQUFBLFNBQUEsZUNsQkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsWUFBQSxXQUdBLFFBQUEsTUFBQSxVQUNBLEtBQUEsS0FBQSxTQUFBLE1BQUEsS0FHQSxRQUFBLGFBQ0EsS0FBQSxxQkFBQSxLQUFBLFVBRUEsSUFBQSxjQUFBLEtBQUEsS0FBQSxNQUFBLElBQ0EsTUFBQSxRQUVBLElBQUEsTUFBQSxJQUNBLEdBQUEsS0FBQSxhQUFBLFNBQUEsVUFDQSxLQUFBLE1BQUEsS0FBQSxHQUFBLE1BQUEsYUFkQSxNQUFBLGdCQ0pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLE9BQUEsV0FDQSxNQUFBLFlBQ0EsS0FBQSxxQkFBQSxLQUFBLGlCQ0xBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFVBQUEsV0FDQSxNQUFBLFVBQUEsSUFBQSxPQUNBLE1BQUEsVUFDQSxNQUFBLElBQUEsSUFDQSxFQUFBLE9BQUEsS0FBQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicsIFsnbWdjcmVhLm5nU3RyYXAnXSlcclxuICAgICAgICAudmFsdWUoJ3ZlcnNpb24nLCAnMC4xJyk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuY29udHJvbGxlcignRmxvd0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm9vdFNjb3BlLCBQYXJ0cywgU3ZnUGFydHMpIHtcclxuICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgY3RybC5wYXJ0U2VsZWN0ZWQgPSBwYXJ0U2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgIGN0cmwudXBkYXRlU3ZnUGFydCA9IHVwZGF0ZVN2Z1BhcnQ7XHJcbiAgICAgICAgICAgIGN0cmwucGFydERhdGFGZXRjaGVkID0gcGFydERhdGFGZXRjaGVkO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLiRvbigncGFydDpzZWxlY3RlZCcsIGN0cmwucGFydFNlbGVjdGVkKTtcclxuICAgICAgICAgICAgUGFydHMuZmV0Y2goKS50aGVuKGN0cmwucGFydERhdGFGZXRjaGVkKTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcGFydERhdGFGZXRjaGVkKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGN0cmwucGFydFNlY3Rpb25zID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdHJsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJ0U2VsZWN0ZWQoZXZlbnQsIHNlY3Rpb25OYW1lLCBzZWxlY3RlZFBhcnQsIHNlbGVjdGVkVmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFldmVudCB8fCAhc2VjdGlvbk5hbWUgfHwgIXNlbGVjdGVkUGFydCB8fCAhc2VsZWN0ZWRWYXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY3RybC51cGRhdGVTdmdQYXJ0KHNlbGVjdGVkVmFyaWFudCk7XHJcbiAgICAgICAgICAgICAgICBQYXJ0cy51cGRhdGVTZWxlY3RlZFBhcnQoc2VjdGlvbk5hbWUsIHNlbGVjdGVkUGFydCk7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3VwZGF0ZTpzZWxlY3RlZCcsIHNlY3Rpb25OYW1lLCBzZWxlY3RlZFBhcnQsIHNlbGVjdGVkVmFyaWFudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3RybDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3ZnUGFydChzZWxlY3RlZFZhcmlhbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRWYXJpYW50IHx8ICFzZWxlY3RlZFZhcmlhbnQuY29sb3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHNlbGVjdGVkVmFyaWFudC5jb2xvcnMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgU3ZnUGFydHMudXBkYXRlT25lKGtleSwgeyBjb2xvcjogdmFsdWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3RybDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1ByZXZpZXdDdHJsJywgZnVuY3Rpb24gKFN2Z1BhcnRzLCBEYXRhQ29sbGVjdGlvbiwgJHNjb3BlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdHJsID0gdGhpcztcclxuICAgICAgICAgICAgY3RybC5nZXRQYXJ0ID0gZ2V0UGFydDtcclxuICAgICAgICAgICAgY3RybC5kYXRhRmV0Y2hlZCA9IGRhdGFGZXRjaGVkO1xyXG4gICAgICAgICAgICBjdHJsLnVwZGF0ZUFjdGl2ZVN2Z1BhcnQgPSB1cGRhdGVBY3RpdmVTdmdQYXJ0O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLiRvbignc3ZnUGFydDpjbGlja2VkJywgdXBkYXRlQWN0aXZlU3ZnUGFydCk7XHJcblxyXG4gICAgICAgICAgICBjdHJsLmRhdGFDb2xsZWN0aW9uID0gbmV3IERhdGFDb2xsZWN0aW9uKHsgZmlsZVBhdGg6ICdzY3JpcHRzL3N2Z2RhdGEuanNvbicsIGlzQXN5bmM6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICBjdHJsLmRhdGFDb2xsZWN0aW9uLmZldGNoKCkudGhlbihkYXRhRmV0Y2hlZCk7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFBhcnQoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN0cmwuU3ZnRGF0YVJlYWR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN2Z1BhcnRzLmdldE9uZShrZXkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkYXRhRmV0Y2hlZCgpIHtcclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChjdHJsLmRhdGFDb2xsZWN0aW9uLmdldEFsbCgpLCBmdW5jdGlvbiAoc3ZnRGF0YVBhcnQsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIFN2Z1BhcnRzLmFkZChrZXksIHN2Z0RhdGFQYXJ0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY3RybC5TdmdEYXRhUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVBY3RpdmVTdmdQYXJ0KGV2ZW50LCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIFN2Z1BhcnRzLnVwZGF0ZUFsbCh7IHNlbGVjdGVkOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgIFN2Z1BhcnRzLnVwZGF0ZU9uZShrZXksIHsgc2VsZWN0ZWQ6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdTY3JvbGxCaW5kQ3RybCcsIGZ1bmN0aW9uICgkcSwgJHNjb3BlLCBzY3JvbGwpIHtcclxuICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgY3RybC5iaW5kVG9TY3JvbGwgPSBiaW5kVG9TY3JvbGw7XHJcbiAgICAgICAgICAgIGN0cmwuYmluZFVwZGF0ZVZhbHNUb1Njcm9sbCA9IGJpbmRVcGRhdGVWYWxzVG9TY3JvbGw7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBiaW5kVG9TY3JvbGwoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbC5iaW5kKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYmluZFVwZGF0ZVZhbHNUb1Njcm9sbCh1cGRhdGVTY29wZVZhbHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghXy5pc1N0cmluZyh1cGRhdGVTY29wZVZhbHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZSh1cGRhdGVTY29wZVZhbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpbmRWYWx1ZXNUb1Njcm9sbChqc29uKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBiaW5kVmFsdWVzVG9TY3JvbGwoW3VwZGF0ZVNjb3BlVmFsc10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBiaW5kVmFsdWVzVG9TY3JvbGwoc2NvcGVLZXlzVG9VcGRhdGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzY29wZUtleXNUb1VwZGF0ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdXBkYXRlVmFsdWVzRm4gPSBnZXRVcGRhdGVWYWx1ZXNGbihzY29wZUtleXNUb1VwZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGwuYmluZCh1cGRhdGVWYWx1ZXNGbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFVwZGF0ZVZhbHVlc0ZuKHNjb3BlS2V5c1RvVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlVmFsdWVzKHNjcm9sbFRvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChzY29wZUtleXNUb1VwZGF0ZSwgZnVuY3Rpb24gKHNjb3BlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZVtzY29wZUtleV0gPSBzY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuY29udHJvbGxlcignU2hvd1NwaW5uZXJDdHJsJywgZnVuY3Rpb24gKCRjb21waWxlLCAkc2NvcGUsICR0ZW1wbGF0ZUNhY2hlKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1N1bW1hcnlDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgUGFydHMpIHtcclxuICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgY3RybC5zZWxlY3RlZFBhcnRTZWN0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgUGFydHMuZmV0Y2goKS50aGVuKHBhcnREYXRhRmV0Y2hlZCk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd1cGRhdGU6c2VsZWN0ZWQnLCB1cGRhdGVTZWxlY3RlZFBhcnRzKTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcGFydERhdGFGZXRjaGVkKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGN0cmwucGFydFNlY3Rpb25zID0gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRQYXJ0cyhldmVudCwgc2VjdGlvbk5hbWUsIHNlbGVjdGVkUGFydCwgc2VsZWN0ZWRWYXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBjdHJsLnNlbGVjdGVkUGFydFNlY3Rpb25zW3NlY3Rpb25OYW1lXSA9IHsgc2VsZWN0ZWRQYXJ0OiBzZWxlY3RlZFBhcnQsIHNlbGVjdGVkVmFyaWFudDogc2VsZWN0ZWRWYXJpYW50IH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3BhcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnbW9kZWwnOiAnPXBhcnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICdzZWN0aW9uTmFtZSc6ICc9J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnQudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudXBkYXRlU2VsZWN0ZWRQYXJ0ID0gdXBkYXRlU2VsZWN0ZWRQYXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdGVkVmFyaWFudCA9IGFuZ3VsYXIuY29weShzY29wZS5tb2RlbC52YXJpYW50c1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2V0U2VsZWN0ZWRWYXJpYW50ID0gc2V0U2VsZWN0ZWRWYXJpYW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFBhcnQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdwYXJ0OnNlbGVjdGVkJywgc2NvcGUuc2VjdGlvbk5hbWUsIHNjb3BlLm1vZGVsLCBzY29wZS5zZWxlY3RlZFZhcmlhbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWRWYXJpYW50KHZhcmlhbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0ZWRWYXJpYW50ID0gdmFyaWFudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlLm1vZGVsLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFBhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgncGFydFNlY3Rpb24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICc9cGFydFNlY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICd0eXBlJzogJz1wYXJ0VHlwZScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BhcnRzJzogJz0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydC5zZWN0aW9uLnRwbC5odG1sJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdzY3JvbGxCaW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1Njcm9sbEJpbmRDdHJsJyxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihhdHRycy5zY29sbEJpbmQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXR0cnMuc2Nyb2xsQmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5iaW5kVG9TY3JvbGwoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJzLnVwZGF0ZVNjb3BlVmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVTY29wZVZhbHMgPSBhdHRycy51cGRhdGVTY29wZVZhbHMucmVwbGFjZSgvJy9naSwgJ1wiJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVNjb3BlVmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmJpbmRVcGRhdGVWYWxzVG9TY3JvbGwodXBkYXRlU2NvcGVWYWxzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7XHJcblxyXG4iLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3NlbGVjdFBhcnRCdXR0b24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0UGFydCA9IHNlbGVjdFBhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RQYXJ0ICgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7XHJcblxyXG4iLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3Nob3dTcGlubmVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaWRQb3N0Rml4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogMSxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTaG93U3Bpbm5lckN0cmwnLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc3ZnJ3MgbmVlZCB1bmlxdWUgaWRzLCBzbyB3ZSBuZWVkIHRvIGdpdmUgaSBhbiBpbmRleCBiYXNlIHBvc3RmaXhcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5zcGlubmVyS2V5UG9zdEZpeCA9IGlkUG9zdEZpeDtcclxuICAgICAgICAgICAgICAgICAgICBpZFBvc3RGaXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3N1bW1hcnlJdGVtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3NlbGVjdGVkUGFydCc6ICc9c3VtbWFyeUl0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgICdzZWN0aW9uTmFtZSc6ICc9JyxcclxuICAgICAgICAgICAgICAgICAgICAnc2VsZWN0ZWRWYXJpYW50JzogJz0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VtbWFyeS5pdGVtLnRwbC5odG1sJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCd2YXJpYW50UGlja2VyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnRzOiAnPXZhcmlhbnRQaWNrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFyaWFudDogJz0nLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VQYXJ0SW1nVXJsOiAnQCdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZhcmlhbnQucGlja2VyLnRwbC5odG1sJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnUGFydHMnLCBmdW5jdGlvbiAoRGF0YUNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gUGFydHMoKSB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFBhcnRzLnByb3RvdHlwZSA9IG5ldyBEYXRhQ29sbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBQYXJ0cy5wcm90b3R5cGUudXBkYXRlU2VsZWN0ZWRQYXJ0ID0gdXBkYXRlU2VsZWN0ZWRQYXJ0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJ0cyh7IGZpbGVQYXRoOiAnc2NyaXB0cy9wYXJ0ZGF0YS5qc29uJywgaXNBc3luYzogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRQYXJ0KHNlY3Rpb25OYW1lLCBzZWxlY3RlZFBhcnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2VjdGlvbk5hbWUgfHwgIXNlbGVjdGVkUGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzZWN0aW9uID0gdGhpcy5pdGVtc1tzZWN0aW9uTmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfLmVhY2goc2VjdGlvbi5wYXJ0cywgZnVuY3Rpb24gKHBhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0LnNlbGVjdGVkID0gcGFydC5uYW1lID09IHNlbGVjdGVkUGFydC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdzY3JvbGwnLCBmdW5jdGlvbiAoQmluZGFibGUpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnU3ZnUGFydHMnLCBmdW5jdGlvbiAoRGF0YUNvbGxlY3Rpb24sIHV0aWxzLCBTdmdQYXJ0LCBQYXRoLCBMaW5lR3JvdXApIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gU1ZHUGFydHMoKSB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYmFzZSA9IERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZTtcclxuICAgICAgICAgICAgU1ZHUGFydHMucHJvdG90eXBlID0gbmV3IERhdGFDb2xsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIFNWR1BhcnRzLnByb3RvdHlwZS5hZGQgPSBhZGRTdmdDbGFzcztcclxuXHJcbiAgICAgICAgICAgIHV0aWxzLmluaGVyaXQoUGF0aCwgU3ZnUGFydCk7XHJcbiAgICAgICAgICAgIHV0aWxzLmluaGVyaXQoTGluZUdyb3VwLCBTdmdQYXJ0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0geyBQYXRoOiBQYXRoLCBMaW5lR3JvdXA6IExpbmVHcm91cCB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTVkdQYXJ0cyh7IGl0ZW1zOiB7fSwgaXNBc3luYzogZmFsc2UgfSk7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRTdmdDbGFzcyhrZXksIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByb3BzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgQ2xhc3MgPSBnZXRTdmdDbGFzcyhwcm9wcy50eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmICghQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZS5hZGQuYXBwbHkodGhpcywgW2tleSwgbmV3IENsYXNzKGtleSwgcHJvcHMpXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFN2Z0NsYXNzKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzZXNba2V5XSB8fCBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgndXRpbHMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAnaW5oZXJpdCc6IGluaGVyaXRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaGVyaXQoY2hpbGQsIGJhc2UsIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5wcm90b3R5cGUgPSBfLmNyZWF0ZShiYXNlLnByb3RvdHlwZSwgXy5hc3NpZ24oe1xyXG4gICAgICAgICAgICAgICAgICAgICdfc3VwZXInOiBiYXNlLnByb3RvdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAnY2FsbFN1cGVyQ29uc3RydWN0b3InOiBmdW5jdGlvbiAoY3R4LCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UuYXBwbHkoY3R4LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICdjb25zdHJ1Y3Rvcic6IGNoaWxkXHJcbiAgICAgICAgICAgICAgICB9LCBwcm9wcykpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsImFuZ3VsYXIubW9kdWxlKFwiYmlrZUJ1aWxkZXJcIikucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7JHRlbXBsYXRlQ2FjaGUucHV0KFwibGluZS5ncm91cC50cGwuaHRtbFwiLFwiPGcgaWQ9e3ttb2RlbC5rZXl9fSBuZy1jbGljaz1cXFwiaGFuZGxlQ2xpY2tlZChtb2RlbC5rZXkpXFxcIiBuZy1jbGFzcz1cXFwiW21vZGVsLmtleSwgbW9kZWwuYWN0aXZlID8gXFwnYWN0aXZlXFwnIDogXFwnXFwnLCBtb2RlbC5jb2xvciA/IFxcJ2hhcy1jb2xvclxcJyA6IFxcJ1xcJ11cXFwiPlxcclxcbiAgICA8bGluZSBzdmctbGluZSBuZy1yZXBlYXQ9XFxcImxpbmUgaW4gbW9kZWwubGluZXNcXFwiIGNvbG9yPVxcXCJtb2RlbC5jb2xvclxcXCIgbGluZS1kYXRhPVxcXCJsaW5lLmRhdGFcXFwiPjwvbGluZT5cXHJcXG48L2c+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwibGluZS50cGwuaHRtbFwiLFwiPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgbmctc3R5bGU9XFxcInN0eWxlXFxcIlxcclxcbiAgICAgIG5nLWF0dHIteDE9XFxcInt7ZGF0YVswXX19XFxcIiBuZy1hdHRyLXkxPVxcXCJ7e2RhdGFbMV19fVxcXCIgbmctYXR0ci14Mj1cXFwie3tkYXRhWzJdfX1cXFwiIG5nLWF0dHIteTI9XFxcInt7ZGF0YVszXX19XFxcIlxcclxcbiAgICAgIG5nLWF0dHItc3Ryb2tlLWRhc2hhcnJheT1cXFwie3twYXRoTGVuZ3RofX1cXFwiIG5nLWF0dHItc3Ryb2tlLWRhc2hvZmZzZXQ9XFxcInt7cGF0aExlbmd0aH19XFxcIiAvPlxcclxcblwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInBhcnQuc2VjdGlvbi50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwicGFydC1zZWN0aW9uXFxcIj5cXHJcXG4gICAgPGgyIGNsYXNzPVxcXCJwYXJ0LXNlY3Rpb24tbmFtZVxcXCI+e3tuYW1lfX08L2gyPlxcclxcbiAgICA8ZGl2IHBhcnQ9XFxcInBhcnRcXFwiIHNlY3Rpb24tbmFtZT1cXFwibmFtZVxcXCIgbmctcmVwZWF0PVxcXCJwYXJ0IGluIHBhcnRzXFxcIj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwicGFydC50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwicGFydFxcXCI+XFxyXFxuICAgIDxoMyBjbGFzcz1cXFwicGFydC1uYW1lXFxcIj57e21vZGVsLm5hbWV9fTwvaDM+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImJ0bi1ncm91cCB2YXJpYW50LWJ1dHRvbnNcXFwiPlxcclxcbiAgICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCB2YXJpYW50LWJ1dHRvblxcXCIgbmctY2xhc3M9XFxcIntcXCdhY3RpdmVcXCc6IHZhcmlhbnQubmFtZSA9PSBzZWxlY3RlZFZhcmlhbnQubmFtZSB9XFxcIiBuZy1jbGljaz1cXFwic2V0U2VsZWN0ZWRWYXJpYW50KHZhcmlhbnQpXFxcIiBuZy1yZXBlYXQ9XFxcInZhcmlhbnQgaW4gbW9kZWwudmFyaWFudHNcXFwiPnt7dmFyaWFudC5uYW1lfX08L2E+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IHZhcmlhbnQtcGlja2VyPVxcXCJtb2RlbC52YXJpYW50c1xcXCIgZGF0YS1zZWxlY3RlZC12YXJpYW50PVxcXCJzZWxlY3RlZFZhcmlhbnRcXFwiIGRhdGEtYmFzZS1wYXJ0LWltZy11cmw9XFxcImNvbnRlbnQvaW1hZ2VzL3BhcnRzXFxcIj48L2Rpdj5cXHJcXG4gICAgPGEgY2xhc3M9XFxcImJ0biBwYXJ0LXNlbGVjdC1idG4gYnRuLWxnIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGljaz1cXFwidXBkYXRlU2VsZWN0ZWRQYXJ0KClcXFwiIG5nLWNsYXNzPVxcXCJ7XFwnYWN0aXZlXFwnOiBtb2RlbC5zZWxlY3RlZH1cXFwiPnt7bW9kZWwuc2VsZWN0ZWQgPyBcXCdTZWxlY3RlZFxcJyA6IFxcJ1NlbGVjdCB0aGlzIHBhcnRcXCd9fTwvYT5cXHJcXG48L2Rpdj5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJwYXRoLnRwbC5odG1sXCIsXCI8cGF0aCBpZD17e21vZGVsLmtleX19IGZpbGw9XFxcIm5vbmVcXFwiIG5nLWNsaWNrPVxcXCJoYW5kbGVDbGlja2VkKG1vZGVsLmtleSlcXFwiIG5nLWNsYXNzPVxcXCJbbW9kZWwudHlwZSwgbW9kZWwuc2VsZWN0ZWQgPyBcXCdzZWxlY3RlZFxcJzpcXCdcXCcsIG1vZGVsLmNvbG9yID8gXFwnaGFzLWNvbG9yXFwnOlxcJ1xcJ11cXFwiXFxyXFxuICAgICAgbmctc3R5bGU9XFxcInN0eWxlXFxcIiBuZy1hdHRyLXN0cm9rZS1kYXNoYXJyYXk9XFxcInt7cGF0aExlbmd0aH19XFxcIiBuZy1hdHRyLXN0cm9rZS1kYXNob2Zmc2V0PVxcXCJ7e3BhdGhMZW5ndGh9fVxcXCIgbmctYXR0ci1kPVxcXCJ7e21vZGVsLmRhdGF9fVxcXCIgLz5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJzcGlubmVyLnRwbC5odG1sXCIsXCI8ZGl2IGNsYXNzPVxcXCJzcGlubmVyXFxcIj5cXHJcXG4gICAgPGgzIGNsYXNzPVxcXCJsb2FkLXRleHRcXFwiPkxvYWRpbmcuLi48L2gzPlxcclxcbiAgICA8P3htbCB2ZXJzaW9uPVxcXCIxLjBcXFwiIGVuY29kaW5nPVxcXCJ1dGYtOFxcXCIgPz5cXHJcXG4gICAgPHN2ZyBpZD1cXFwic3Bpbm5lci1zdmd7e3NwaW5uZXJLZXlQb3N0Rml4fX1cXFwiIHZlcnNpb249XFxcIjEuMVxcXCIgaWQ9XFxcIkxheWVyXzFcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgeG1sbnM6eGxpbms9XFxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcXFwiIHg9XFxcIjBweFxcXCIgeT1cXFwiMHB4XFxcIlxcclxcbiAgICAgICAgIHZpZXdCb3g9XFxcIjIwNCA4OS4zIDI0My4zIDI0My4zXFxcIiBlbmFibGUtYmFja2dyb3VuZD1cXFwibmV3IDIwNCA4OS4zIDI0My4zIDI0My4zXFxcIiB4bWw6c3BhY2U9XFxcInByZXNlcnZlXFxcIj5cXHJcXG4gICAgPGcgaWQ9XFxcInNwaW5uZXItd3JhcHBlcnt7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCI+PGcgaWQ9XFxcInNwaW5uZXItd2hlZWx7e3NwaW5uZXJLZXlQb3N0Rml4fX1cXFwiPlxcclxcbiAgICA8cGF0aCBpZD1cXFwic3Bpbm5lci1yaW17e3NwaW5uZXJLZXlQb3N0Rml4fX1cXFwiIGZpbGw9XFxcIm5vbmVcXFwiIGQ9XFxcIk0yNTkuNiwxMjUuMmM1MC4yLTM5LDExOS4xLTI3LjgsMTU1LjQsMjAuOGMzNi4yLDQ4LjUsMjIuMSwxMTQuNC0yNC4xLDE1My42XFxyXFxuXHRcdGMtMjkuNSwyNS0xMDguOSwzNi41LTE1My41LTIwLjlDMjA2LjEsMjM4LjQsMjEzLjksMTYwLjcsMjU5LjYsMTI1LjJ6IE0yNDguMiwyNzAuN2MzOC4zLDQ5LjIsOTAuOCw0OS43LDEzMy4xLDE4XFxyXFxuXHRcdHM1My4yLTkyLjQsMjIuMS0xMzRjLTMxLjEtNDEuNy04Ni40LTU1LjctMTM0LjgtMTYuOEMyMjQsMTczLjcsMjIxLjMsMjM2LjEsMjQ4LjIsMjcwLjd6XFxcIiAvPlxcclxcbiAgICA8ZyBpZD1cXFwic3Bpbm5lci1zcG9rZXN7e3NwaW5uZXJLZXlQb3N0Rml4fX1cXFwiPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDE2LjlcXFwiIHkxPVxcXCIxODAuOVxcXCIgeDI9XFxcIjMzOC43XFxcIiB5Mj1cXFwiMjAzLjlcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMzguN1xcXCIgeTE9XFxcIjIwMy45XFxcIiB4Mj1cXFwiMzg2XFxcIiB5Mj1cXFwiMTM2LjNcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzOTguN1xcXCIgeTE9XFxcIjE1MC43XFxcIiB4Mj1cXFwiMzQzLjJcXFwiIHkyPVxcXCIyMTUuMVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjQwOS42XFxcIiB5MT1cXFwiMTY0LjFcXFwiIHgyPVxcXCIzMjkuMlxcXCIgeTI9XFxcIjE5OS44XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDIwLjFcXFwiIHkxPVxcXCIxOTkuOFxcXCIgeDI9XFxcIjM0My4yXFxcIiB5Mj1cXFwiMjE1LjFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MjAuOVxcXCIgeTE9XFxcIjIxNy45XFxcIiB4Mj1cXFwiMzM5LjhcXFwiIHkyPVxcXCIyMjEuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjQxNi45XFxcIiB5MT1cXFwiMjM2LjRcXFwiIHgyPVxcXCIzNDAuOVxcXCIgeTI9XFxcIjIwNy40XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDEwLjVcXFwiIHkxPVxcXCIyNTMuOVxcXCIgeDI9XFxcIjM0Mi4zXFxcIiB5Mj1cXFwiMjExXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDAxXFxcIiB5MT1cXFwiMjY5LjNcXFwiIHgyPVxcXCIzMzQuMlxcXCIgeTI9XFxcIjIyNi40XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzg4LjNcXFwiIHkxPVxcXCIyODIuOVxcXCIgeDI9XFxcIjMzMlxcXCIgeTI9XFxcIjIyNy42XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzU2LjFcXFwiIHkxPVxcXCIzMDMuMlxcXCIgeDI9XFxcIjMzOS44XFxcIiB5Mj1cXFwiMjIxLjlcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzNDAuOVxcXCIgeTE9XFxcIjIyMS45XFxcIiB4Mj1cXFwiMzczLjhcXFwiIHkyPVxcXCIyOTMuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjMyMC45XFxcIiB5MT1cXFwiMzEwLjVcXFwiIHgyPVxcXCIzMjIuMlxcXCIgeTI9XFxcIjIyNi40XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzAwLjdcXFwiIHkxPVxcXCIzMDcuOFxcXCIgeDI9XFxcIjMyN1xcXCIgeTI9XFxcIjIyNy42XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjgyLjNcXFwiIHkxPVxcXCIzMDAuNFxcXCIgeDI9XFxcIjMzMlxcXCIgeTI9XFxcIjIyNy42XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjY4LjFcXFwiIHkxPVxcXCIyOTEuMVxcXCIgeDI9XFxcIjMxNS40XFxcIiB5Mj1cXFwiMjExXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjU0LjJcXFwiIHkxPVxcXCIyNzcuOFxcXCIgeDI9XFxcIjMxNS40XFxcIiB5Mj1cXFwiMjIwLjVcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyNDQuMVxcXCIgeTE9XFxcIjI2NC44XFxcIiB4Mj1cXFwiMzE5XFxcIiB5Mj1cXFwiMjI0XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzE5XFxcIiB5MT1cXFwiMjI0XFxcIiB4Mj1cXFwiMzM4LjdcXFwiIHkyPVxcXCIzMDguNlxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjIzNS41XFxcIiB5MT1cXFwiMjQ2LjNcXFwiIHgyPVxcXCIzMTkuNVxcXCIgeTI9XFxcIjIyNi40XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjMxLjhcXFwiIHkxPVxcXCIyMjkuNVxcXCIgeDI9XFxcIjMxOVxcXCIgeTI9XFxcIjIwNC4zXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjMxLjFcXFwiIHkxPVxcXCIyMDkuNFxcXCIgeDI9XFxcIjMxNi44XFxcIiB5Mj1cXFwiMjA3LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyMzQuM1xcXCIgeTE9XFxcIjE5MC43XFxcIiB4Mj1cXFwiMzE2XFxcIiB5Mj1cXFwiMjE3LjlcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyNDFcXFwiIHkxPVxcXCIxNzIuNVxcXCIgeDI9XFxcIjMxNS41XFxcIiB5Mj1cXFwiMjE1LjFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyNTIuMlxcXCIgeTE9XFxcIjE1NC40XFxcIiB4Mj1cXFwiMzE5XFxcIiB5Mj1cXFwiMjA0LjNcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyNjQuOFxcXCIgeTE9XFxcIjE0MS4xXFxcIiB4Mj1cXFwiMzIzLjhcXFwiIHkyPVxcXCIyMDAuOFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI5Ni4yXFxcIiB5MT1cXFwiMTIxLjRcXFwiIHgyPVxcXCIzMTkuNVxcXCIgeTI9XFxcIjIwNC4xXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzE1LjRcXFwiIHkxPVxcXCIxMTZcXFwiIHgyPVxcXCIzMzAuM1xcXCIgeTI9XFxcIjE5OS4zXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzM0LjdcXFwiIHkxPVxcXCIxMTZcXFwiIHgyPVxcXCIzMzguN1xcXCIgeTI9XFxcIjIwMy45XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzUyLjNcXFwiIHkxPVxcXCIxMTguMlxcXCIgeDI9XFxcIjMxOVxcXCIgeTI9XFxcIjIwNC4zXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzcwLjJcXFwiIHkxPVxcXCIxMjUuNVxcXCIgeDI9XFxcIjMzMC4zXFxcIiB5Mj1cXFwiMTk5LjNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgPC9nPlxcclxcbiAgICA8cGF0aCBpZD1cXFwic3Bpbm5lci10aXJle3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIiBmaWxsPVxcXCJub25lXFxcIiBkPVxcXCJNMjU5LjYsMTI1LjJjNTAuMi0zOSwxMTkuMS0yNy44LDE1NS40LDIwLjhjMzYuMiw0OC41LDIyLjEsMTE0LjQtMjQuMSwxNTMuNlxcclxcblx0XHRjLTI5LjUsMjUtMTA4LjksMzYuNS0xNTMuNS0yMC45QzIwNi4xLDIzOC40LDIxMy45LDE2MC43LDI1OS42LDEyNS4yeiBNMjMxLjEsMjg1LjljMzUuNCw1Mi4xLDExNSw1My41LDE2Mi44LDE5LjVcXHJcXG5cdFx0YzQ4LjItMzQuMyw2NS40LTExNi45LDI2LjEtMTY0LjFDMzc4LjgsOTEuNiwzMTgsNzMuMSwyNTIuMiwxMjEuNUMyMDguNCwxNTMuNiwxOTEuNiwyMjcuNiwyMzEuMSwyODUuOXpcXFwiIC8+XFxyXFxuICAgIDxwYXRoIGlkPVxcXCJzcGlubmVyLWh1Ynt7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCIgZmlsbD1cXFwibm9uZVxcXCIgZD1cXFwiTTMxNS40LDIxMy43YzAtMi4zLDAuNy0xMy45LDEzLjUtMTMuOWM3LjQsMCwxMy41LDYuMiwxMy41LDEzLjlzLTYuMSwxMy45LTEzLjYsMTMuOVxcclxcblx0XHRDMzIxLjQsMjI3LjYsMzE1LjQsMjIxLjUsMzE1LjQsMjEzLjd6IE0zMjMsMjE4bC00LjEsMC42bDMuNCwzLjJMMzIzLDIxOHogTTMzMy44LDIxNi45bDAuNyw0LjFsMy4xLTMuNUwzMzMuOCwyMTYuOXogTTMyOCwyMTkuOVxcclxcblx0XHRsLTEuMyw0bDQuMy0wLjdMMzI4LDIxOS45eiBNMzE4LjcsMjExLjJsLTAuNCw0LjFsMy45LTIuNUwzMTguNywyMTEuMnogTTMyMy45LDIwOC4zbDEuMy0zLjlsLTQuNCwxLjZMMzIzLjksMjA4LjN6IE0zMzQuNSwyMDUuN1xcclxcblx0XHRsLTUuMy0yLjlsMS43LDQuM0wzMzQuNSwyMDUuN3ogTTMzNC44LDIxMS4zbDQsMS4xbC0xLjgtNC4zTDMzNC44LDIxMS4zelxcXCIgLz5cXHJcXG4gICAgICAgIDwvZz5cXHJcXG4gICAgICAgIDwvZz5cXHJcXG4gICAgPC9zdmc+XFxyXFxuPC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwic3VtbWFyeS5pdGVtLnRwbC5odG1sXCIsXCI8bGkgbmctc2hvdz1cXFwic2VsZWN0ZWRQYXJ0XFxcIiBjbGFzcz1cXFwic3VtbWFyeS1pdGVtXFxcIj5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcInN1bW1hcnktc2VjdGlvbi1uYW1lXFxcIj57e3NlY3Rpb25OYW1lfX06Jm5ic3A7PC9zcGFuPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwic3VtbWFyeS1wYXJ0LW5hbWVcXFwiPnt7c2VsZWN0ZWRQYXJ0Lm5hbWV9fTwvc3Bhbj5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcInN1bW1hcnktdmFyaWFudC1jb2xvclxcXCIgbmctcmVwZWF0PVxcXCJjb2xvciBpbiBzZWxlY3RlZFZhcmlhbnQuY29sb3JzXFxcIiBuZy1zdHlsZT1cXFwie1xcJ2JhY2tncm91bmRcXCc6Y29sb3J9XFxcIj4mbmJzcDs8L3NwYW4+XFxyXFxuPC9saT5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJ2YXJpYW50LnBpY2tlci50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwidmFyaWFudC1waWNrZXJcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJpbWFnZXMtc3RhY2tcXFwiPlxcclxcbiAgICAgICAgPGltZyBjbGFzcz1cXFwidmFyaWFudC1pbWFnZVxcXCIgLz4gPCEtLSBzZXQgY2xhc3MgXFxcInNlbGVjdGVkXFxcIiB0byBwdWxsIGltYWdlIHRvIGZyb250IG9mIHN0YWNrIC0tPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cIik7fV0pOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3ZnTGluZUdyb3VwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgICdtb2RlbCc6ICc9J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlOiAnc3ZnJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbGluZS5ncm91cC50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5oYW5kbGVDbGlja2VkID0gaGFuZGxlQ2xpY2tlZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrZWQoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzdmdQYXJ0OmNsaWNrZWQnLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3N2Z0xpbmUnLCBmdW5jdGlvbiAoU3ZnQW5pbWF0aW9uRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbG9yJzogJz0nLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogJz1saW5lRGF0YSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVzcGFjZTogJ3N2ZycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2xpbmUudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZSA9IG5ldyBTdmdBbmltYXRpb25EaXJlY3RpdmUoZWwsICdsaW5lJywgeyBtc1ByVW5pdDogMjAsIGRhdGE6IHNjb3BlLmRhdGF9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdzdmdSb290TG9hZGVkJywgbG9hZEFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCdjb2xvcicsIHVwZGF0ZUNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbG9hZEFuaW1hdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucGF0aExlbmd0aCA9IGJhc2UuZ2V0TGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0eWxlID0gYmFzZS5nZXRTdHlsZShzY29wZS5jb2xvciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ29sb3IoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0eWxlID0gYmFzZS5nZXRTdHlsZShzY29wZS5jb2xvciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3ZnUGF0aCcsIGZ1bmN0aW9uIChTdmdBbmltYXRpb25EaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnbW9kZWwnOiAnPSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVzcGFjZTogJ3N2ZycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhdGgudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2UgPSBuZXcgU3ZnQW5pbWF0aW9uRGlyZWN0aXZlKGVsLCAncGF0aCcsIHsgZGF0YTogc2NvcGUubW9kZWwuZGF0YSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdzdmdSb290TG9hZGVkJywgbG9hZEFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuaGFuZGxlQ2xpY2tlZCA9IGhhbmRsZUNsaWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCdtb2RlbC5jb2xvcicsIHVwZGF0ZUNvbG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVDbGlja2VkKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc3ZnUGFydDpjbGlja2VkJywga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRBbmltYXRpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnBhdGhMZW5ndGggPSBiYXNlLmdldExlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdHlsZSA9IGJhc2UuZ2V0U3R5bGUoc2NvcGUubW9kZWwuY29sb3IsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbG9yKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdHlsZSA9IGJhc2UuZ2V0U3R5bGUoc2NvcGUubW9kZWwuY29sb3IsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdzdmdSb290JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcclxuICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYnJvYWRjYXN0KCdzdmdSb290TG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN2Z1Jvb3RMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmZhY3RvcnkoJ0JpbmRhYmxlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBCaW5kYWJsZSgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNbJ19jYWxsYmFja3MnXSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBCaW5kYWJsZS5wcm90b3R5cGUub25BdHRhY2ggPSBhbmd1bGFyLm5vb3A7XHJcbiAgICAgICAgICAgIEJpbmRhYmxlLnByb3RvdHlwZS5vbkJvdW5kID0gYW5ndWxhci5ub29wO1xyXG4gICAgICAgICAgICBCaW5kYWJsZS5wcm90b3R5cGUub25VbkJvdW5kID0gYW5ndWxhci5ub29wO1xyXG4gICAgICAgICAgICBCaW5kYWJsZS5wcm90b3R5cGUub25EZXRhY2ggPSBhbmd1bGFyLm5vb3A7XHJcblxyXG4gICAgICAgICAgICBCaW5kYWJsZS5wcm90b3R5cGUuYmluZCA9IGJpbmQ7XHJcbiAgICAgICAgICAgIEJpbmRhYmxlLnByb3RvdHlwZS5pbnZva2UgPSBpbnZva2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQmluZGFibGU7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJpbmQoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzWydfY2FsbGJhY2tzJ10ucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzWydfY2FsbGJhY2tzJ10ubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQXR0YWNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkJvdW5kKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmWydfY2FsbGJhY2tzJ10uc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vblVuQm91bmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGZbJ19jYWxsYmFja3MnXS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkRldGFjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGludm9rZSgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHRoaXNbJ19jYWxsYmFja3MnXSwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmZhY3RvcnkoJ0RhdGFDb2xsZWN0aW9uJywgZnVuY3Rpb24gKCRxLCAkdGltZW91dCwgJGh0dHApIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gRGF0YUNvbGxlY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0FzeW5jID0gIV8uaXNVbmRlZmluZWQob3B0aW9ucy5pc0FzeW5jKSA/IG9wdGlvbnMuaXNBc3luYyA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IG9wdGlvbnMuaXRlbXMgfHwge307XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZVBhdGggPSBvcHRpb25zLmZpbGVQYXRoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGUuZmV0Y2ggPSBmZXRjaDtcclxuICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldE9uZSA9IGdldE9uZTtcclxuICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldEFsbCA9IGdldEFsbDtcclxuICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZU9uZSA9IHVwZGF0ZU9uZTtcclxuICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUFsbCA9IHVwZGF0ZUFsbDtcclxuICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlLnByb2Nlc3NEYXRhID0gcHJvY2Vzc0RhdGE7XHJcbiAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZS5hZGQgPSBhZGQ7XHJcbiAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZS5hZGRBbGwgPSBhZGRBbGw7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRGF0YUNvbGxlY3Rpb247XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBmZXRjaCgpIHtcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGQoa2V5LCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FzeW5jICYmICF0aGlzLmZldGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXRPbmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNba2V5XSA9IGl0ZW07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkQWxsKGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQXN5bmMgJiYgIXRoaXMuZmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghY29sbGVjdGlvbiB8fCBfLnNpemUoY29sbGVjdGlvbikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24oaXRlbSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoa2V5LCBpdGVtKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE9uZShrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQXN5bmMgJiYgIXRoaXMuZmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLml0ZW1zW2tleV07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQXN5bmMgJiYgIXRoaXMuZmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZU9uZShrZXksIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FzeW5jICYmICF0aGlzLmZldGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5nZXRPbmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBfLmFzc2lnbihpdGVtLCBwcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFsbChwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBc3luYyAmJiAhdGhpcy5mZXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfLmVhY2godGhpcy5pdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmFzc2lnbihpdGVtLCBwcm9wcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZmFjdG9yeSgnU3ZnQW5pbWF0aW9uRGlyZWN0aXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gQW5pbWF0aW9uUGFydChlbCwgdHlwZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbCA9IGVsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IG9wdGlvbnMuZGF0YSB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1zUHJVbml0ID0gb3B0aW9ucy5tc1ByVW5pdCB8fCA0LjE2O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhNcyA9IG9wdGlvbnMubWF4TXMgfHwgMTAwMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBbmltYXRpb24gPSBnZXRBbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldER1cmF0aW9uID0gZ2V0RHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldExlbmd0aCA9IGdldExlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3R5bGUgPSBnZXRTdHlsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldExlbmd0aCgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNlbGYudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXRoJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRQYXRoTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldExpbmVMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXREdXJhdGlvbihsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChsZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGdldExlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGxlbmd0aCAqIHNlbGYubXNQclVuaXQsIHNlbGYubWF4TXMpICsgJ21zJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRBbmltYXRpb24oZHVyYXRpb24sIHNob3VsZFJlcGVhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKGR1cmF0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IGdldER1cmF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVwZWF0ID0gc2hvdWxkUmVwZWF0ID8gJ2luZmluaXRlJyA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnZGFzaCAnICsgZHVyYXRpb24gKyAnIGxpbmVhciBmb3J3YXJkcyAnICsgcmVwZWF0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFBhdGhMZW5ndGgoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZWwuZ2V0VG90YWxMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRMaW5lTGVuZ3RoKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5hYnMoc2VsZi5kYXRhWzBdIC0gc2VsZi5kYXRhWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IE1hdGguYWJzKHNlbGYuZGF0YVsxXSAtIHNlbGYuZGF0YVszXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh4LCAyKSArIE1hdGgucG93KHksIDIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRTdHlsZShjb2xvciwgc2hvdWxkQW5pbWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckF0dHIgPSB0eXBlID09ICdsaW5lJyA/ICdzdHJva2UnIDogJ2ZpbGwnO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlW2NvbG9yQXR0cl0gPSBjb2xvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IGdldEFuaW1hdGlvbihnZXREdXJhdGlvbihnZXRMZW5ndGgoKSksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVbJy13ZWJraXQtYW5pbWF0aW9uJ10gPSBhbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlWydhbmltYXRpb24nXSA9IGFuaW1hdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ0xpbmVHcm91cCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpbmVHcm91cDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIExpbmUobGluZURhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IGxpbmVEYXRhLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIExpbmVHcm91cCgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbFN1cGVyQ29uc3RydWN0b3IodGhpcywgYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZXNEYXRhQXJyID0gdGhpcy5kYXRhLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKGxpbmVzRGF0YUFyciwgZnVuY3Rpb24gKGxpbmVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5saW5lcy5wdXNoKG5ldyBMaW5lKGxpbmVEYXRhKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1BhdGgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBQYXRoKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsU3VwZXJDb25zdHJ1Y3Rvcih0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnU3ZnUGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIFNWR1BhcnQoa2V5LCBwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTtcclxuICAgICAgICAgICAgICAgIHByb3BzLmtleSA9IGtleTtcclxuICAgICAgICAgICAgICAgIF8uYXNzaWduKHRoaXMsIHByb3BzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==