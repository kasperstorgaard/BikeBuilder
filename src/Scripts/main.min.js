!function(){"use strict";angular.module("bikeBuilder",["mgcrea.ngStrap"]).value("version","0.1")}(),function(){"use strict";angular.module("bikeBuilder").controller("FlowCtrl",["$scope","$rootScope","Parts","SvgParts",function($scope,$rootScope,Parts,SvgParts){function partDataFetched(data){ctrl.partSections=data}function partSelected(event,sectionName,selectedPart,selectedVariant){updateSvgPart(selectedVariant),Parts.updateSelectedPart(sectionName,selectedPart),$rootScope.$broadcast("update:selected",sectionName,selectedPart,selectedVariant)}function updateSvgPart(selectedVariant){selectedVariant.colors&&_.each(selectedVariant.colors,function(value,key){SvgParts.updateOne(key,{color:value})})}var ctrl=this;$scope.$on("part:selected",partSelected),Parts.fetch().then(partDataFetched)}])}(),function(){"use strict";angular.module("bikeBuilder").controller("PreviewCtrl",["SvgParts","DataCollection","$scope",function(SvgParts,DataCollection,$scope){function getPart(key){return ctrl.SvgDataReady?SvgParts.getOne(key):{}}function dataFetched(){_.forEach(svgData.getAll(),function(svgDataPart,key){SvgParts.add(key,svgDataPart)}),ctrl.SvgDataReady=!0}function updateActiveSvgPart(event,key){SvgParts.updateAll({selected:!1}),SvgParts.updateOne(key,{selected:!0})}var ctrl=this;ctrl.getPart=getPart,$scope.$on("svgPart:clicked",updateActiveSvgPart);var svgData=new DataCollection({filePath:"scripts/svgdata.json",isAsync:!0});svgData.fetch().then(dataFetched)}])}(),function(){"use strict";angular.module("bikeBuilder").controller("SummaryCtrl",["$scope","Parts",function($scope,Parts){function partDataFetched(data){ctrl.partSections=data}function updateSelectedParts(event,sectionName,selectedPart,selectedVariant){ctrl.selectedPartSections[sectionName]={selectedPart:selectedPart,selectedVariant:selectedVariant}}var ctrl=this;ctrl.selectedPartSections={},Parts.fetch().then(partDataFetched),$scope.$on("update:selected",updateSelectedParts)}])}(),function(){"use strict";angular.module("bikeBuilder").directive("part",function(){return{restrict:"A",scope:{model:"=part",sectionName:"="},replace:!0,templateUrl:"part.tpl.html",link:function(scope){function updateSelectedPart(){scope.$emit("part:selected",scope.sectionName,scope.model,scope.selectedVariant)}function setSelectedVariant(variant){scope.selectedVariant=variant,scope.model.selected&&updateSelectedPart()}scope.updateSelectedPart=updateSelectedPart,scope.selectedVariant=angular.copy(scope.model.variants[0]),scope.setSelectedVariant=setSelectedVariant}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("partSection",["$rootScope",function(){return{restrict:"A",scope:{name:"=partSection",type:"=partType",parts:"="},replace:!0,templateUrl:"part.section.tpl.html",link:function(){}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("scrollBind",["$q","scroll",function($q,scroll){return{restrict:"A",scope:!0,link:function(scope,element,attrs){function bindValuesToScroll(scopeKeysToUpdate){0!==scopeKeysToUpdate.length&&scroll.bind(getUpdateValuesFn(scopeKeysToUpdate))}function getUpdateValuesFn(scopeKeysToUpdate){return function(scrollTop){_.each(scopeKeysToUpdate,function(scopeKey){scope[scopeKey]=scrollTop}),scope.$apply()}}var callback;if(_.isFunction(attrs.scollBind))return callback=attrs.scrollBind,void scroll.bind(callback);if(attrs.updateScopeVals){var updateScopeVals=attrs.updateScopeVals.replace(/'/gi,'"');try{var json=JSON.parse(updateScopeVals);bindValuesToScroll(json)}catch(e){bindValuesToScroll([updateScopeVals])}}}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("selectPartButton",function(){return{restrict:"A",scope:!0,link:function(scope){function selectPart(){}scope.selectPart=selectPart}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("showSpinner",["$templateCache","$compile",function($templateCache,$compile){var idPostFix=0;return{restrict:"A",scope:!0,priority:1,link:function(scope,element,attrs){function getBool(attr){return!_.isUndefined(attr)&&"true"===attr.toString().toLowerCase()}function getSpinnerElement(){var tpl=$templateCache.get("spinner.tpl.html"),linkFn=$compile(tpl);return linkFn(scope)}function insertBeforeElement(insertEl,siblingEl){var parentEl=siblingEl.parentNode;parentEl.insertBefore(insertEl,siblingEl)}function removeElement(el){el.remove()}var showSpinner=getBool(attrs.showSpinner);if(showSpinner!==!1){scope.spinnerKeyPostFix=idPostFix,idPostFix++;var spinnerElement=getSpinnerElement();insertBeforeElement(spinnerElement[0],element[0]);var removeObserve=attrs.$observe("showSpinner",function(val){getBool(val)||(removeElement(spinnerElement),removeObserve())})}}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("summaryItem",function(){return{restrict:"A",scope:{selectedPart:"=summaryItem",sectionName:"=",selectedVariant:"="},replace:!0,templateUrl:"summary.item.tpl.html"}})}(),function(){"use strict";angular.module("bikeBuilder").directive("variantPicker",function(){return{restrict:"A",replace:!0,scope:{variants:"=variantPicker",selectedVariant:"=",basePartImgUrl:"@"},templateUrl:"variant.picker.tpl.html"}})}(),function(){"use strict";angular.module("bikeBuilder").service("Parts",["DataCollection",function(DataCollection){function Parts(){DataCollection.apply(this,arguments)}function updateSelectedPart(sectionName,selectedPart){var section=this.items[sectionName];section&&_.each(section.parts,function(part){part.selected=part.name==selectedPart.name})}return Parts.prototype=new DataCollection,Parts.prototype.updateSelectedPart=updateSelectedPart,new Parts({filePath:"scripts/partdata.json",isAsync:!0})}])}(),function(){"use strict";angular.module("bikeBuilder").service("scroll",["Bindable",function(Bindable){function Scroll(){Bindable.apply(this,arguments)}function attachScroll(){var self=this;throttledHandleScroll=_.throttle(function(){self.handleScroll()},SCROLL_THROTTLE),window.addEventListener("scroll",throttledHandleScroll)}function detachScroll(){window.removeEventListener("scroll",throttledHandleScroll)}function getScrollTop(){var scrollTop=window.document.documentElement.scrollTop;return 0===scrollTop&&(scrollTop=window.document.body.scrollTop),scrollTop}function handleScroll(){this.invoke(this.getScrollTop())}Scroll.prototype=new Bindable,Scroll.prototype.onAttach=attachScroll,Scroll.prototype.onDetach=detachScroll,Scroll.prototype.getScrollTop=getScrollTop,Scroll.prototype.handleScroll=handleScroll;var throttledHandleScroll,SCROLL_THROTTLE=100;return new Scroll}])}(),function(){"use strict";angular.module("bikeBuilder").service("SvgParts",["DataCollection","utils","SvgPart","Path","LineGroup",function(DataCollection,utils,SvgPart,Path,LineGroup){function SVGParts(){DataCollection.apply(this,arguments)}function addSvgClass(key,props){if(!props.data)return null;var Class=getSvgClass(props.type);return Class?base.add.apply(this,[key,new Class(key,props)]):null}function getSvgClass(key){return classes[key]||null}var base=DataCollection.prototype;SVGParts.prototype=new DataCollection,SVGParts.prototype.add=addSvgClass,utils.inherit(Path,SvgPart),utils.inherit(LineGroup,SvgPart);var classes={Path:Path,LineGroup:LineGroup};return new SVGParts({items:{},isAsync:!1})}])}(),function(){"use strict";angular.module("bikeBuilder").service("utils",function(){function inherit(child,base,props){return child.prototype=_.create(base.prototype,_.assign({_super:base.prototype,callSuperConstructor:function(ctx,args){base.apply(ctx,args)},constructor:child},props)),child}return{inherit:inherit}})}(),angular.module("bikeBuilder").run(["$templateCache",function($templateCache){$templateCache.put("line.group.tpl.html",'<g id={{model.key}} ng-click="handleClicked(model.key)" ng-class="[model.key, model.active ? \'active\' : \'\', model.color ? \'has-color\' : \'\']">\r\n    <line svg-line ng-repeat="line in model.lines" color="model.color" line-data="line.data"></line>\r\n</g>'),$templateCache.put("line.tpl.html",'<line fill="none" ng-style="style"\r\n      ng-attr-x1="{{data[0]}}" ng-attr-y1="{{data[1]}}" ng-attr-x2="{{data[2]}}" ng-attr-y2="{{data[3]}}"\r\n      ng-attr-stroke-dasharray="{{pathLength}}" ng-attr-stroke-dashoffset="{{pathLength}}" />\r\n'),$templateCache.put("part.section.tpl.html",'<div class="part-section">\r\n    <h2 class="part-section-name">{{name}}</h2>\r\n    <div part="part" section-name="name" ng-repeat="part in parts">\r\n    </div>\r\n</div>'),$templateCache.put("part.tpl.html",'<div class="part">\r\n    <h3 class="part-name">{{model.name}}</h3>\r\n    <div class="btn-group variant-buttons">\r\n        <a class="btn btn-default variant-button" ng-class="{\'active\': variant.name == selectedVariant.name }" ng-click="setSelectedVariant(variant)" ng-repeat="variant in model.variants">{{variant.name}}</a>\r\n    </div>\r\n    <div variant-picker="model.variants" data-selected-variant="selectedVariant" data-base-part-img-url="content/images/parts"></div>\r\n    <a class="btn part-select-btn btn-lg btn-default" ng-click="updateSelectedPart()" ng-class="{\'active\': model.selected}">{{model.selected ? \'Selected\' : \'Select this part\'}}</a>\r\n</div>'),$templateCache.put("path.tpl.html",'<path id={{model.key}} fill="none" ng-click="handleClicked(model.key)" ng-class="[model.type, model.selected ? \'selected\':\'\', model.color ? \'has-color\':\'\']"\r\n      ng-style="style" ng-attr-stroke-dasharray="{{pathLength}}" ng-attr-stroke-dashoffset="{{pathLength}}" ng-attr-d="{{model.data}}" />'),$templateCache.put("spinner.tpl.html",'<div class="spinner">\r\n    <h3 class="load-text">Loading...</h3>\r\n    <?xml version="1.0" encoding="utf-8" ?>\r\n    <svg id="spinner-svg{{spinnerKeyPostFix}}" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n         viewBox="204 89.3 243.3 243.3" enable-background="new 204 89.3 243.3 243.3" xml:space="preserve">\r\n    <g id="spinner-wrapper{{spinnerKeyPostFix}}"><g id="spinner-wheel{{spinnerKeyPostFix}}">\r\n    <path id="spinner-rim{{spinnerKeyPostFix}}" fill="none" d="M259.6,125.2c50.2-39,119.1-27.8,155.4,20.8c36.2,48.5,22.1,114.4-24.1,153.6\r\n		c-29.5,25-108.9,36.5-153.5-20.9C206.1,238.4,213.9,160.7,259.6,125.2z M248.2,270.7c38.3,49.2,90.8,49.7,133.1,18\r\n		s53.2-92.4,22.1-134c-31.1-41.7-86.4-55.7-134.8-16.8C224,173.7,221.3,236.1,248.2,270.7z" />\r\n    <g id="spinner-spokes{{spinnerKeyPostFix}}">\r\n    <line fill="none" x1="416.9" y1="180.9" x2="338.7" y2="203.9" />\r\n    <line fill="none" x1="338.7" y1="203.9" x2="386" y2="136.3" />\r\n    <line fill="none" x1="398.7" y1="150.7" x2="343.2" y2="215.1" />\r\n    <line fill="none" x1="409.6" y1="164.1" x2="329.2" y2="199.8" />\r\n    <line fill="none" x1="420.1" y1="199.8" x2="343.2" y2="215.1" />\r\n    <line fill="none" x1="420.9" y1="217.9" x2="339.8" y2="221.9" />\r\n    <line fill="none" x1="416.9" y1="236.4" x2="340.9" y2="207.4" />\r\n    <line fill="none" x1="410.5" y1="253.9" x2="342.3" y2="211" />\r\n    <line fill="none" x1="401" y1="269.3" x2="334.2" y2="226.4" />\r\n    <line fill="none" x1="388.3" y1="282.9" x2="332" y2="227.6" />\r\n    <line fill="none" x1="356.1" y1="303.2" x2="339.8" y2="221.9" />\r\n    <line fill="none" x1="340.9" y1="221.9" x2="373.8" y2="293.9" />\r\n    <line fill="none" x1="320.9" y1="310.5" x2="322.2" y2="226.4" />\r\n    <line fill="none" x1="300.7" y1="307.8" x2="327" y2="227.6" />\r\n    <line fill="none" x1="282.3" y1="300.4" x2="332" y2="227.6" />\r\n    <line fill="none" x1="268.1" y1="291.1" x2="315.4" y2="211" />\r\n    <line fill="none" x1="254.2" y1="277.8" x2="315.4" y2="220.5" />\r\n    <line fill="none" x1="244.1" y1="264.8" x2="319" y2="224" />\r\n    <line fill="none" x1="319" y1="224" x2="338.7" y2="308.6" />\r\n    <line fill="none" x1="235.5" y1="246.3" x2="319.5" y2="226.4" />\r\n    <line fill="none" x1="231.8" y1="229.5" x2="319" y2="204.3" />\r\n    <line fill="none" x1="231.1" y1="209.4" x2="316.8" y2="207.4" />\r\n    <line fill="none" x1="234.3" y1="190.7" x2="316" y2="217.9" />\r\n    <line fill="none" x1="241" y1="172.5" x2="315.5" y2="215.1" />\r\n    <line fill="none" x1="252.2" y1="154.4" x2="319" y2="204.3" />\r\n    <line fill="none" x1="264.8" y1="141.1" x2="323.8" y2="200.8" />\r\n    <line fill="none" x1="296.2" y1="121.4" x2="319.5" y2="204.1" />\r\n    <line fill="none" x1="315.4" y1="116" x2="330.3" y2="199.3" />\r\n    <line fill="none" x1="334.7" y1="116" x2="338.7" y2="203.9" />\r\n    <line fill="none" x1="352.3" y1="118.2" x2="319" y2="204.3" />\r\n    <line fill="none" x1="370.2" y1="125.5" x2="330.3" y2="199.3" />\r\n            </g>\r\n    <path id="spinner-tire{{spinnerKeyPostFix}}" fill="none" d="M259.6,125.2c50.2-39,119.1-27.8,155.4,20.8c36.2,48.5,22.1,114.4-24.1,153.6\r\n		c-29.5,25-108.9,36.5-153.5-20.9C206.1,238.4,213.9,160.7,259.6,125.2z M231.1,285.9c35.4,52.1,115,53.5,162.8,19.5\r\n		c48.2-34.3,65.4-116.9,26.1-164.1C378.8,91.6,318,73.1,252.2,121.5C208.4,153.6,191.6,227.6,231.1,285.9z" />\r\n    <path id="spinner-hub{{spinnerKeyPostFix}}" fill="none" d="M315.4,213.7c0-2.3,0.7-13.9,13.5-13.9c7.4,0,13.5,6.2,13.5,13.9s-6.1,13.9-13.6,13.9\r\n		C321.4,227.6,315.4,221.5,315.4,213.7z M323,218l-4.1,0.6l3.4,3.2L323,218z M333.8,216.9l0.7,4.1l3.1-3.5L333.8,216.9z M328,219.9\r\n		l-1.3,4l4.3-0.7L328,219.9z M318.7,211.2l-0.4,4.1l3.9-2.5L318.7,211.2z M323.9,208.3l1.3-3.9l-4.4,1.6L323.9,208.3z M334.5,205.7\r\n		l-5.3-2.9l1.7,4.3L334.5,205.7z M334.8,211.3l4,1.1l-1.8-4.3L334.8,211.3z" />\r\n        </g>\r\n        </g>\r\n    </svg>\r\n</div>'),$templateCache.put("summary.item.tpl.html",'<li ng-show="selectedPart" class="summary-item">\r\n    <span class="summary-section-name">{{sectionName}}:&nbsp;</span>\r\n    <span class="summary-part-name">{{selectedPart.name}}</span>\r\n    <span class="summary-variant-color" ng-repeat="color in selectedVariant.colors" ng-style="{\'background\':color}">&nbsp;</span>\r\n</li>'),$templateCache.put("variant.picker.tpl.html",'<div class="variant-picker">\r\n    <div class="images-stack">\r\n        <img class="variant-image" ng-src="{{basePartImgUrl + \'/\' + variant.imageUrl}}" ng-class="{\'selected\': variant.name == selectedVariant.name }" ng-repeat="variant in variants" />\r\n    </div>\r\n</div>')}]),function(){"use strict";angular.module("bikeBuilder").directive("svgLineGroup",function(){return{restrict:"A",replace:!0,scope:{model:"="},templateNamespace:"svg",templateUrl:"line.group.tpl.html",link:function(scope){function handleClicked(key){scope.$emit("svgPart:clicked",key)}scope.handleClicked=handleClicked}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("svgLine",["SvgAnimationDirective",function(SvgAnimationDirective){return{restrict:"A",replace:!0,scope:{color:"=",data:"=lineData"},templateNamespace:"svg",templateUrl:"line.tpl.html",link:function(scope,element){function loadAnimation(){scope.pathLength=base.getLength(),scope.style=base.getStyle(scope.color,!0),scope.$apply()}function updateColor(){scope.style=base.getStyle(scope.color,!1)}var el=element[0],base=new SvgAnimationDirective(el,"line",{msPrUnit:20,data:scope.data});scope.$on("svgRootLoaded",loadAnimation),scope.$watch("color",updateColor)}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("svgPath",["SvgAnimationDirective",function(SvgAnimationDirective){return{restrict:"A",replace:!0,scope:{model:"="},templateNamespace:"svg",templateUrl:"path.tpl.html",link:function(scope,element){function handleClicked(key){scope.$emit("svgPart:clicked",key)}function loadAnimation(){scope.pathLength=base.getLength(),scope.style=base.getStyle(scope.model.color,!0),scope.$apply()}function updateColor(){scope.style=base.getStyle(scope.model.color,!1)}var el=element[0],base=new SvgAnimationDirective(el,"path",{data:scope.model.data});scope.$on("svgRootLoaded",loadAnimation),scope.handleClicked=handleClicked,scope.$watch("model.color",updateColor)}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("svgRoot",function(){return{restrict:"A",scope:!0,link:function(scope,element){var el=element[0];el.addEventListener("load",function(){scope.$broadcast("svgRootLoaded"),scope.svgRootLoaded=!0,scope.$apply()})}}})}(),function(){"use strict";angular.module("bikeBuilder").factory("Bindable",function(){function Bindable(){this._callbacks=[]}function bind(callback){var self=this;this._callbacks.push(callback);var index=this._callbacks.length-1;return 0===index&&this.onAttach(),this.onBound(),function(){self._callbacks.splice(index,1),self.onUnBound(),0===self._callbacks.length&&self.onDetach()}}function invoke(){var args=arguments;_.each(this._callbacks,function(callback){callback.apply(null,args)})}return Bindable.prototype.onAttach=angular.noop,Bindable.prototype.onBound=angular.noop,Bindable.prototype.onUnBound=angular.noop,Bindable.prototype.onDetach=angular.noop,Bindable.prototype.bind=bind,Bindable.prototype.invoke=invoke,Bindable})}(),function(){"use strict";angular.module("bikeBuilder").factory("DataCollection",["$q","$timeout","$http",function($q,$timeout,$http){function fetch(){if(!this.isAsync)return null;var self=this;return this.fetchedDfd=this.fetchedDfd||$q.defer(),this.fetched?(this.fetchedDfd=$q.defer(),this.fetchedDfd.resolve()):this.fetching||(this.fetching=!0,$http.get(this.filePath).success(function(data){self.fetching=!1,self.fetched=!0,self.items=self.processData(data),self.fetchedDfd.resolve(self.items)})),this.fetchedDfd.promise}function processData(data){return data}function add(key,item){if(this.isAsync&&!this.fetched)return null;if(!key)return null;var existing=this.getOne(key);return existing?null:(this.items[key]=item,this.items)}function addAll(collection){var self=this;return this.isAsync&&!this.fetched?null:collection&&0!==_.size(collection)?(_.forEach(collection,function(item,key){self.add(key,item)}),this.items):null}function getOne(key){if(this.isAsync&&!this.fetched)return null;var item=this.items[key];return item?item:null}function getAll(){return this.isAsync&&!this.fetched?null:this.items}function updateOne(key,props){if(this.isAsync&&!this.fetched)return null;var item=this.getOne(key);return item?_.assign(item,props):null}function updateAll(props){return this.isAsync&&!this.fetched?null:(_.each(this.items,function(item){_.assign(item,props)}),this.items)}var DataCollection=function(options){options=options||{},this.isAsync=_.isUndefined(options.isAsync)?!1:options.isAsync,this.items=options.items||{},this.fetched=!1,this.fetching=!1,this.filePath=options.filePath};return DataCollection.prototype.fetch=fetch,DataCollection.prototype.getOne=getOne,DataCollection.prototype.getAll=getAll,DataCollection.prototype.updateOne=updateOne,DataCollection.prototype.updateAll=updateAll,DataCollection.prototype.processData=processData,DataCollection.prototype.add=add,DataCollection.prototype.addAll=addAll,DataCollection}])}(),function(){"use strict";angular.module("bikeBuilder").service("SvgAnimationDirective",function(){return function(el,type,options){function getLength(){switch(self.type){case"path":return getPathLength();case"line":return getLineLength();default:return null}}function getDuration(length){return _.isUndefined(length)&&(length=getLength()),Math.min(length*self.msPrUnit,self.maxMs)+"ms"}function getAnimation(duration,shouldRepeat){_.isUndefined(duration)&&(duration=getDuration());var repeat=shouldRepeat?"infinite":"";return"dash "+duration+" linear forwards "+repeat}function getPathLength(){return self.el.getTotalLength()}function getLineLength(){var x=Math.abs(self.data[0]-self.data[2]),y=Math.abs(self.data[1]-self.data[3]);return Math.sqrt(Math.pow(x,2)+Math.pow(y,2))}function getStyle(color,shouldAnimate){var style={},colorAttr="line"==type?"stroke":"fill";if(style[colorAttr]=color,shouldAnimate){var animation=getAnimation(getDuration(getLength()),!1);style["-webkit-animation"]=animation,style.animation=animation}return style}var self=this;options=options||{},this.el=el,this.type=type,this.data=options.data||{},this.msPrUnit=options.msPrUnit||4.16,this.maxMs=options.maxMs||1e4,this.getAnimation=getAnimation,this.getDuration=getDuration,this.getLength=getLength,this.getStyle=getStyle}})}(),function(){"use strict";angular.module("bikeBuilder").service("LineGroup",function(){function Line(lineData){this.data=lineData.split(",")}function LineGroup(){this.callSuperConstructor(this,arguments);var linesDataArr=this.data.split("|");this.lines=[];var self=this;_.each(linesDataArr,function(lineData){self.lines.push(new Line(lineData))})}return LineGroup})}(),function(){"use strict";angular.module("bikeBuilder").service("Path",function(){return function(){this.callSuperConstructor(this,arguments)}})}(),function(){"use strict";angular.module("bikeBuilder").service("SvgPart",function(){return function(key,props){props=props||{},props.key=key,_.assign(this,props)}})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb250cm9sbGVycy9mbG93LmN0cmwuanMiLCJjb250cm9sbGVycy9wcmV2aWV3LmN0cmwuanMiLCJjb250cm9sbGVycy9zdW1tYXJ5LmN0cmwuanMiLCJkaXJlY3RpdmVzL3BhcnQuanMiLCJkaXJlY3RpdmVzL3BhcnQuc2VjdGlvbi5qcyIsImRpcmVjdGl2ZXMvc2Nyb2xsLmJpbmQuanMiLCJkaXJlY3RpdmVzL3NlbGVjdC5wYXJ0LmJ1dHRvbi5qcyIsImRpcmVjdGl2ZXMvc2hvdy5zcGlubmVyLmpzIiwiZGlyZWN0aXZlcy9zdW1tYXJ5Lml0ZW0uanMiLCJkaXJlY3RpdmVzL3ZhcmlhbnQucGlja2VyLmpzIiwic2VydmljZXMvcGFydHMuanMiLCJzZXJ2aWNlcy9zY3JvbGwuanMiLCJzZXJ2aWNlcy9zdmcucGFydHMuanMiLCJzZXJ2aWNlcy91dGlscy5qcyIsInRlbXBsYXRlcy90ZW1wbGF0ZXMuanMiLCJkaXJlY3RpdmVzL3N2Zy9saW5lLmdyb3VwLmpzIiwiZGlyZWN0aXZlcy9zdmcvbGluZS5qcyIsImRpcmVjdGl2ZXMvc3ZnL3BhdGguanMiLCJkaXJlY3RpdmVzL3N2Zy9zdmcucm9vdC5qcyIsInNlcnZpY2VzL2Jhc2UvQmluZGFibGUuanMiLCJzZXJ2aWNlcy9iYXNlL0RhdGFDb2xsZWN0aW9uLmpzIiwic2VydmljZXMvYmFzZS9TdmdBbmltYXRpb25EaXJlY3RpdmUuanMiLCJzZXJ2aWNlcy9iYXNlL3N2Zy9MaW5lR3JvdXAuanMiLCJzZXJ2aWNlcy9iYXNlL3N2Zy9QYXRoLmpzIiwic2VydmljZXMvYmFzZS9zdmcvU3ZnUGFydC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQUEsbUJBQ0EsTUFBQSxVQUFBLFVDSEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFdBQUEsWUFBQSxTQUFBLGFBQUEsUUFBQSxXQUFBLFNBQUEsT0FBQSxXQUFBLE1BQUEsVUFTQSxRQUFBLGlCQUFBLE1BQ0EsS0FBQSxhQUFBLEtBR0EsUUFBQSxjQUFBLE1BQUEsWUFBQSxhQUFBLGlCQUNBLGNBQUEsaUJBQ0EsTUFBQSxtQkFBQSxZQUFBLGNBQ0EsV0FBQSxXQUFBLGtCQUFBLFlBQUEsYUFBQSxpQkFHQSxRQUFBLGVBQUEsaUJBQ0EsZ0JBQUEsUUFDQSxFQUFBLEtBQUEsZ0JBQUEsT0FBQSxTQUFBLE1BQUEsS0FDQSxTQUFBLFVBQUEsS0FBQSxNQUFBLFVBckJBLEdBQUEsTUFBQSxJQUVBLFFBQUEsSUFBQSxnQkFBQSxjQUVBLE1BQUEsUUFBQSxLQUFBLHVCQ1JBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxXQUFBLGVBQUEsV0FBQSxpQkFBQSxTQUFBLFNBQUEsU0FBQSxlQUFBLFFBWUEsUUFBQSxTQUFBLEtBQ0EsTUFBQSxNQUFBLGFBR0EsU0FBQSxPQUFBLFFBR0EsUUFBQSxlQUNBLEVBQUEsUUFBQSxRQUFBLFNBQUEsU0FBQSxZQUFBLEtBQ0EsU0FBQSxJQUFBLElBQUEsZUFFQSxLQUFBLGNBQUEsRUFHQSxRQUFBLHFCQUFBLE1BQUEsS0FDQSxTQUFBLFdBQUEsVUFBQSxJQUNBLFNBQUEsVUFBQSxLQUFBLFVBQUEsSUEzQkEsR0FBQSxNQUFBLElBQ0EsTUFBQSxRQUFBLFFBRUEsT0FBQSxJQUFBLGtCQUFBLG9CQUVBLElBQUEsU0FBQSxHQUFBLGlCQUFBLFNBQUEsdUJBQUEsU0FBQSxHQUVBLFNBQUEsUUFBQSxLQUFBLG1CQ1hBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxXQUFBLGVBQUEsU0FBQSxRQUFBLFNBQUEsT0FBQSxPQVdBLFFBQUEsaUJBQUEsTUFDQSxLQUFBLGFBQUEsS0FHQSxRQUFBLHFCQUFBLE1BQUEsWUFBQSxhQUFBLGlCQUNBLEtBQUEscUJBQUEsY0FBQSxhQUFBLGFBQUEsZ0JBQUEsaUJBZkEsR0FBQSxNQUFBLElBRUEsTUFBQSx3QkFFQSxNQUFBLFFBQUEsS0FBQSxpQkFFQSxPQUFBLElBQUEsa0JBQUEsMkJDVkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsT0FBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQ0EsTUFBQSxRQUNBLFlBQUEsS0FFQSxTQUFBLEVBQ0EsWUFBQSxnQkFDQSxLQUFBLFNBQUEsT0FNQSxRQUFBLHNCQUNBLE1BQUEsTUFBQSxnQkFBQSxNQUFBLFlBQUEsTUFBQSxNQUFBLE1BQUEsaUJBR0EsUUFBQSxvQkFBQSxTQUNBLE1BQUEsZ0JBQUEsUUFDQSxNQUFBLE1BQUEsVUFDQSxxQkFaQSxNQUFBLG1CQUFBLG1CQUNBLE1BQUEsZ0JBQUEsUUFBQSxLQUFBLE1BQUEsTUFBQSxTQUFBLElBQ0EsTUFBQSxtQkFBQSwwQkNmQSxXQUNBLFlBRUEsU0FBQSxPQUFBLGVBQ0EsVUFBQSxlQUFBLGFBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxPQUNBLEtBQUEsZUFDQSxLQUFBLFlBQ0EsTUFBQSxLQUVBLFNBQUEsRUFDQSxZQUFBLHdCQUNBLEtBQUEsb0JDZEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsY0FBQSxLQUFBLFNBQUEsU0FBQSxHQUFBLFFBQ0EsT0FDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsT0FvQkEsUUFBQSxvQkFBQSxtQkFDQSxJQUFBLGtCQUFBLFFBR0EsT0FBQSxLQUFBLGtCQUFBLG9CQUdBLFFBQUEsbUJBQUEsbUJBQ0EsTUFBQSxVQUFBLFdBQ0EsRUFBQSxLQUFBLGtCQUFBLFNBQUEsVUFDQSxNQUFBLFVBQUEsWUFFQSxNQUFBLFVBL0JBLEdBQUEsU0FDQSxJQUFBLEVBQUEsV0FBQSxNQUFBLFdBR0EsTUFGQSxVQUFBLE1BQUEsZUFDQSxRQUFBLEtBQUEsU0FJQSxJQUFBLE1BQUEsZ0JBQUEsQ0FHQSxHQUFBLGlCQUFBLE1BQUEsZ0JBQUEsUUFBQSxNQUFBLElBRUEsS0FDQSxHQUFBLE1BQUEsS0FBQSxNQUFBLGdCQUNBLG9CQUFBLE1BQ0EsTUFBQSxHQUNBLG9CQUFBLDRCQ3hCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxtQkFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsT0FLQSxRQUFBLGVBSEEsTUFBQSxXQUFBLGtCQ1RBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLGVBQUEsaUJBQUEsV0FBQSxTQUFBLGVBQUEsVUFDQSxHQUFBLFdBQUEsQ0FFQSxRQUNBLFNBQUEsSUFDQSxPQUFBLEVBQ0EsU0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsT0FxQkEsUUFBQSxTQUFBLE1BQ0EsT0FBQSxFQUFBLFlBQUEsT0FBQSxTQUFBLEtBQUEsV0FBQSxjQUdBLFFBQUEscUJBQ0EsR0FBQSxLQUFBLGVBQUEsSUFBQSxvQkFDQSxPQUFBLFNBQUEsSUFDQSxPQUFBLFFBQUEsT0FHQSxRQUFBLHFCQUFBLFNBQUEsV0FDQSxHQUFBLFVBQUEsVUFBQSxVQUNBLFVBQUEsYUFBQSxTQUFBLFdBR0EsUUFBQSxlQUFBLElBQ0EsR0FBQSxTQXBDQSxHQUFBLGFBQUEsUUFBQSxNQUFBLFlBQ0EsSUFBQSxlQUFBLEVBQUEsQ0FJQSxNQUFBLGtCQUFBLFVBQ0EsV0FFQSxJQUFBLGdCQUFBLG1CQUNBLHFCQUFBLGVBQUEsR0FBQSxRQUFBLEdBRUEsSUFBQSxlQUFBLE1BQUEsU0FBQSxjQUFBLFNBQUEsS0FDQSxRQUFBLE9BQ0EsY0FBQSxnQkFDQSw0QkN6QkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsY0FBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQ0EsYUFBQSxlQUNBLFlBQUEsSUFDQSxnQkFBQSxLQUVBLFNBQUEsRUFDQSxZQUFBLDhCQ1pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLGdCQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsU0FBQSxFQUNBLE9BQ0EsU0FBQSxpQkFDQSxnQkFBQSxJQUNBLGVBQUEsS0FFQSxZQUFBLGdDQ1pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFNBQUEsaUJBQUEsU0FBQSxnQkFDQSxRQUFBLFNBQ0EsZUFBQSxNQUFBLEtBQUEsV0FTQSxRQUFBLG9CQUFBLFlBQUEsY0FDQSxHQUFBLFNBQUEsS0FBQSxNQUFBLFlBQ0EsVUFJQSxFQUFBLEtBQUEsUUFBQSxNQUFBLFNBQUEsTUFDQSxLQUFBLFNBQUEsS0FBQSxNQUFBLGFBQUEsT0FYQSxNQUhBLE9BQUEsVUFBQSxHQUFBLGdCQUNBLE1BQUEsVUFBQSxtQkFBQSxtQkFFQSxHQUFBLFFBQUEsU0FBQSx3QkFBQSxTQUFBLFVDVkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsVUFBQSxXQUFBLFNBQUEsVUFDQSxRQUFBLFVBQ0EsU0FBQSxNQUFBLEtBQUEsV0FpQkEsUUFBQSxnQkFDQSxHQUFBLE1BQUEsSUFDQSx1QkFBQSxFQUFBLFNBQUEsV0FDQSxLQUFBLGdCQUNBLGlCQUNBLE9BQUEsaUJBQUEsU0FBQSx1QkFHQSxRQUFBLGdCQUNBLE9BQUEsb0JBQUEsU0FBQSx1QkFHQSxRQUFBLGdCQUNBLEdBQUEsV0FBQSxPQUFBLFNBQUEsZ0JBQUEsU0FJQSxPQUhBLEtBQUEsWUFDQSxVQUFBLE9BQUEsU0FBQSxLQUFBLFdBRUEsVUFHQSxRQUFBLGdCQUNBLEtBQUEsT0FBQSxLQUFBLGdCQXBDQSxPQUFBLFVBQUEsR0FBQSxVQUVBLE9BQUEsVUFBQSxTQUFBLGFBQ0EsT0FBQSxVQUFBLFNBQUEsYUFDQSxPQUFBLFVBQUEsYUFBQSxhQUNBLE9BQUEsVUFBQSxhQUFBLFlBR0EsSUFDQSx1QkFEQSxnQkFBQSxHQUdBLE9BQUEsSUFBQSxjQ2xCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxZQUFBLGlCQUFBLFFBQUEsVUFBQSxPQUFBLFlBQUEsU0FBQSxlQUFBLE1BQUEsUUFBQSxLQUFBLFdBQ0EsUUFBQSxZQUNBLGVBQUEsTUFBQSxLQUFBLFdBZ0JBLFFBQUEsYUFBQSxJQUFBLE9BQ0EsSUFBQSxNQUFBLEtBQ0EsTUFBQSxLQUdBLElBQUEsT0FBQSxZQUFBLE1BQUEsS0FDQSxPQUFBLE9BSUEsS0FBQSxJQUFBLE1BQUEsTUFBQSxJQUFBLEdBQUEsT0FBQSxJQUFBLFNBSEEsS0FNQSxRQUFBLGFBQUEsS0FDQSxNQUFBLFNBQUEsTUFBQSxLQTNCQSxHQUFBLE1BQUEsZUFBQSxTQUNBLFVBQUEsVUFBQSxHQUFBLGdCQUNBLFNBQUEsVUFBQSxJQUFBLFlBRUEsTUFBQSxRQUFBLEtBQUEsU0FDQSxNQUFBLFFBQUEsVUFBQSxRQUVBLElBQUEsVUFBQSxLQUFBLEtBQUEsVUFBQSxVQUVBLE9BQUEsSUFBQSxXQUFBLFNBQUEsU0FBQSxVQ2pCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxRQUFBLFdBT0EsUUFBQSxTQUFBLE1BQUEsS0FBQSxPQVNBLE1BUkEsT0FBQSxVQUFBLEVBQUEsT0FBQSxLQUFBLFVBQUEsRUFBQSxRQUNBLE9BQUEsS0FBQSxVQUNBLHFCQUFBLFNBQUEsSUFBQSxNQUNBLEtBQUEsTUFBQSxJQUFBLE9BRUEsWUFBQSxPQUNBLFFBRUEsTUFmQSxPQUNBLFFBQUEsY0NMQSxRQUFBLE9BQUEsZUFBQSxLQUFBLGlCQUFBLFNBQUEsZ0JBQUEsZUFBQSxJQUFBLHNCQUFBLHlRQUNBLGVBQUEsSUFBQSxnQkFBQSx3UEFDQSxlQUFBLElBQUEsd0JBQUEsZ0xBQ0EsZUFBQSxJQUFBLGdCQUFBLDJxQkFDQSxlQUFBLElBQUEsZ0JBQUEscVRBQ0EsZUFBQSxJQUFBLG1CQUFBLGk4SEFDQSxlQUFBLElBQUEsd0JBQUEsZ1ZBQ0EsZUFBQSxJQUFBLDBCQUFBLDhSQ1BBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLGVBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLEVBQ0EsT0FDQSxNQUFBLEtBRUEsa0JBQUEsTUFDQSxZQUFBLHNCQUNBLEtBQUEsU0FBQSxPQUtBLFFBQUEsZUFBQSxLQUNBLE1BQUEsTUFBQSxrQkFBQSxLQUxBLE1BQUEsY0FBQSxxQkNiQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxXQUFBLHdCQUFBLFNBQUEsdUJBQ0EsT0FDQSxTQUFBLElBQ0EsU0FBQSxFQUNBLE9BQ0EsTUFBQSxJQUNBLEtBQUEsYUFFQSxrQkFBQSxNQUNBLFlBQUEsZ0JBQ0EsS0FBQSxTQUFBLE1BQUEsU0FTQSxRQUFBLGlCQUNBLE1BQUEsV0FBQSxLQUFBLFlBQ0EsTUFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBLE9BQUEsR0FDQSxNQUFBLFNBR0EsUUFBQSxlQUNBLE1BQUEsTUFBQSxLQUFBLFNBQUEsTUFBQSxPQUFBLEdBZkEsR0FBQSxJQUFBLFFBQUEsR0FDQSxLQUFBLEdBQUEsdUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FBQSxLQUFBLE1BQUEsTUFFQSxPQUFBLElBQUEsZ0JBQUEsZUFDQSxNQUFBLE9BQUEsUUFBQSxxQkNsQkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsV0FBQSx3QkFBQSxTQUFBLHVCQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsRUFDQSxPQUNBLE1BQUEsS0FFQSxrQkFBQSxNQUNBLFlBQUEsZ0JBQ0EsS0FBQSxTQUFBLE1BQUEsU0FXQSxRQUFBLGVBQUEsS0FDQSxNQUFBLE1BQUEsa0JBQUEsS0FHQSxRQUFBLGlCQUNBLE1BQUEsV0FBQSxLQUFBLFlBQ0EsTUFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBLE1BQUEsT0FBQSxHQUNBLE1BQUEsU0FHQSxRQUFBLGVBQ0EsTUFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBLE1BQUEsT0FBQSxHQXBCQSxHQUFBLElBQUEsUUFBQSxHQUNBLEtBQUEsR0FBQSx1QkFBQSxHQUFBLFFBQUEsS0FBQSxNQUFBLE1BQUEsTUFFQSxPQUFBLElBQUEsZ0JBQUEsZUFDQSxNQUFBLGNBQUEsY0FDQSxNQUFBLE9BQUEsY0FBQSxxQkNuQkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsVUFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsTUFBQSxTQUNBLEdBQUEsSUFBQSxRQUFBLEVBQ0EsSUFBQSxpQkFBQSxPQUFBLFdBQ0EsTUFBQSxXQUFBLGlCQUNBLE1BQUEsZUFBQSxFQUNBLE1BQUEsa0JDWkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsV0FBQSxXQUNBLFFBQUEsWUFDQSxLQUFBLGNBZUEsUUFBQSxNQUFBLFVBQ0EsR0FBQSxNQUFBLElBRUEsTUFBQSxXQUFBLEtBQUEsU0FDQSxJQUFBLE9BQUEsS0FBQSxXQUFBLE9BQUEsQ0FRQSxPQU5BLEtBQUEsT0FDQSxLQUFBLFdBR0EsS0FBQSxVQUVBLFdBQ0EsS0FBQSxXQUFBLE9BQUEsTUFBQSxHQUVBLEtBQUEsWUFFQSxJQUFBLEtBQUEsV0FBQSxRQUNBLEtBQUEsWUFLQSxRQUFBLFVBQ0EsR0FBQSxNQUFBLFNBQ0EsR0FBQSxLQUFBLEtBQUEsV0FBQSxTQUFBLFVBQ0EsU0FBQSxNQUFBLEtBQUEsUUE5QkEsTUFSQSxVQUFBLFVBQUEsU0FBQSxRQUFBLEtBQ0EsU0FBQSxVQUFBLFFBQUEsUUFBQSxLQUNBLFNBQUEsVUFBQSxVQUFBLFFBQUEsS0FDQSxTQUFBLFVBQUEsU0FBQSxRQUFBLEtBRUEsU0FBQSxVQUFBLEtBQUEsS0FDQSxTQUFBLFVBQUEsT0FBQSxPQUVBLGNDaEJBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLGtCQUFBLEtBQUEsV0FBQSxRQUFBLFNBQUEsR0FBQSxTQUFBLE9Bd0JBLFFBQUEsU0FDQSxJQUFBLEtBQUEsUUFDQSxNQUFBLEtBR0EsSUFBQSxNQUFBLElBZ0JBLE9BZkEsTUFBQSxXQUFBLEtBQUEsWUFBQSxHQUFBLFFBRUEsS0FBQSxTQUNBLEtBQUEsV0FBQSxHQUFBLFFBQ0EsS0FBQSxXQUFBLFdBQ0EsS0FBQSxXQUNBLEtBQUEsVUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxTQUFBLE1BQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxTQUFBLEVBQ0EsS0FBQSxNQUFBLEtBQUEsWUFBQSxNQUNBLEtBQUEsV0FBQSxRQUFBLEtBQUEsVUFJQSxLQUFBLFdBQUEsUUFHQSxRQUFBLGFBQUEsTUFDQSxNQUFBLE1BR0EsUUFBQSxLQUFBLElBQUEsTUFDQSxHQUFBLEtBQUEsVUFBQSxLQUFBLFFBQ0EsTUFBQSxLQUdBLEtBQUEsSUFDQSxNQUFBLEtBRUEsSUFBQSxVQUFBLEtBQUEsT0FBQSxJQUNBLE9BQUEsVUFDQSxNQUdBLEtBQUEsTUFBQSxLQUFBLEtBQ0EsS0FBQSxPQUdBLFFBQUEsUUFBQSxZQUNBLEdBQUEsTUFBQSxJQUNBLE9BQUEsTUFBQSxVQUFBLEtBQUEsUUFDQSxLQUdBLFlBQUEsSUFBQSxFQUFBLEtBQUEsYUFJQSxFQUFBLFFBQUEsV0FBQSxTQUFBLEtBQUEsS0FDQSxLQUFBLElBQUEsSUFBQSxRQUVBLEtBQUEsT0FOQSxLQVNBLFFBQUEsUUFBQSxLQUNBLEdBQUEsS0FBQSxVQUFBLEtBQUEsUUFDQSxNQUFBLEtBRUEsSUFBQSxNQUFBLEtBQUEsTUFBQSxJQUNBLE9BQUEsTUFDQSxLQUVBLEtBR0EsUUFBQSxVQUNBLE1BQUEsTUFBQSxVQUFBLEtBQUEsUUFDQSxLQUVBLEtBQUEsTUFHQSxRQUFBLFdBQUEsSUFBQSxPQUNBLEdBQUEsS0FBQSxVQUFBLEtBQUEsUUFDQSxNQUFBLEtBRUEsSUFBQSxNQUFBLEtBQUEsT0FBQSxJQUNBLE9BQUEsTUFJQSxFQUFBLE9BQUEsS0FBQSxPQUhBLEtBTUEsUUFBQSxXQUFBLE9BQ0EsTUFBQSxNQUFBLFVBQUEsS0FBQSxRQUNBLE1BRUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxTQUFBLE1BQ0EsRUFBQSxPQUFBLEtBQUEsU0FFQSxLQUFBLE9BekhBLEdBQUEsZ0JBQUEsU0FBQSxTQUNBLFFBQUEsWUFFQSxLQUFBLFFBQUEsRUFBQSxZQUFBLFFBQUEsVUFBQSxFQUFBLFFBQUEsUUFDQSxLQUFBLE1BQUEsUUFBQSxVQUNBLEtBQUEsU0FBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsU0FBQSxRQUFBLFNBWUEsT0FUQSxnQkFBQSxVQUFBLE1BQUEsTUFDQSxlQUFBLFVBQUEsT0FBQSxPQUNBLGVBQUEsVUFBQSxPQUFBLE9BQ0EsZUFBQSxVQUFBLFVBQUEsVUFDQSxlQUFBLFVBQUEsVUFBQSxVQUNBLGVBQUEsVUFBQSxZQUFBLFlBQ0EsZUFBQSxVQUFBLElBQUEsSUFDQSxlQUFBLFVBQUEsT0FBQSxPQUVBLHFCQ3ZCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSx3QkFBQSxXQUNBLE1BQUEsVUFBQSxHQUFBLEtBQUEsU0FrQkEsUUFBQSxhQUNBLE9BQUEsS0FBQSxNQUNBLElBQUEsT0FDQSxNQUFBLGdCQUNBLEtBQUEsT0FDQSxNQUFBLGdCQUNBLFNBQ0EsTUFBQSxPQUlBLFFBQUEsYUFBQSxRQUtBLE1BSkEsR0FBQSxZQUFBLFVBQ0EsT0FBQSxhQUdBLEtBQUEsSUFBQSxPQUFBLEtBQUEsU0FBQSxLQUFBLE9BQUEsS0FHQSxRQUFBLGNBQUEsU0FBQSxjQUNBLEVBQUEsWUFBQSxZQUNBLFNBQUEsY0FHQSxJQUFBLFFBQUEsYUFBQSxXQUFBLEVBQ0EsT0FBQSxRQUFBLFNBQUEsb0JBQUEsT0FHQSxRQUFBLGlCQUNBLE1BQUEsTUFBQSxHQUFBLGlCQUdBLFFBQUEsaUJBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLEtBQUEsSUFDQSxFQUFBLEtBQUEsSUFBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLEtBQUEsR0FDQSxPQUFBLE1BQUEsS0FBQSxLQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLElBR0EsUUFBQSxVQUFBLE1BQUEsZUFDQSxHQUFBLFVBQ0EsVUFBQSxRQUFBLEtBQUEsU0FBQSxNQUdBLElBRkEsTUFBQSxXQUFBLE1BRUEsY0FBQSxDQUNBLEdBQUEsV0FBQSxhQUFBLFlBQUEsY0FBQSxFQUNBLE9BQUEscUJBQUEsVUFDQSxNQUFBLFVBQUEsVUFHQSxNQUFBLE9BbEVBLEdBQUEsTUFBQSxJQUNBLFNBQUEsWUFFQSxLQUFBLEdBQUEsR0FDQSxLQUFBLEtBQUEsS0FDQSxLQUFBLEtBQUEsUUFBQSxTQUVBLEtBQUEsU0FBQSxRQUFBLFVBQUEsS0FDQSxLQUFBLE1BQUEsUUFBQSxPQUFBLElBRUEsS0FBQSxhQUFBLGFBQ0EsS0FBQSxZQUFBLFlBQ0EsS0FBQSxVQUFBLFVBQ0EsS0FBQSxTQUFBLGVDbEJBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFlBQUEsV0FHQSxRQUFBLE1BQUEsVUFDQSxLQUFBLEtBQUEsU0FBQSxNQUFBLEtBR0EsUUFBQSxhQUNBLEtBQUEscUJBQUEsS0FBQSxVQUVBLElBQUEsY0FBQSxLQUFBLEtBQUEsTUFBQSxJQUNBLE1BQUEsUUFFQSxJQUFBLE1BQUEsSUFDQSxHQUFBLEtBQUEsYUFBQSxTQUFBLFVBQ0EsS0FBQSxNQUFBLEtBQUEsR0FBQSxNQUFBLGFBZEEsTUFBQSxnQkNKQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxPQUFBLFdBQ0EsTUFBQSxZQUNBLEtBQUEscUJBQUEsS0FBQSxpQkNMQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxVQUFBLFdBQ0EsTUFBQSxVQUFBLElBQUEsT0FDQSxNQUFBLFVBQ0EsTUFBQSxJQUFBLElBQ0EsRUFBQSxPQUFBLEtBQUEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInLCBbJ21nY3JlYS5uZ1N0cmFwJ10pXHJcbiAgICAgICAgLnZhbHVlKCd2ZXJzaW9uJywgJzAuMScpO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0Zsb3dDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgUGFydHMsIFN2Z1BhcnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3BhcnQ6c2VsZWN0ZWQnLCBwYXJ0U2VsZWN0ZWQpO1xyXG5cclxuICAgICAgICAgICAgUGFydHMuZmV0Y2goKS50aGVuKHBhcnREYXRhRmV0Y2hlZCk7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnREYXRhRmV0Y2hlZChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjdHJsLnBhcnRTZWN0aW9ucyA9IGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnRTZWxlY3RlZChldmVudCwgc2VjdGlvbk5hbWUsIHNlbGVjdGVkUGFydCwgc2VsZWN0ZWRWYXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTdmdQYXJ0KHNlbGVjdGVkVmFyaWFudCk7XHJcbiAgICAgICAgICAgICAgICBQYXJ0cy51cGRhdGVTZWxlY3RlZFBhcnQoc2VjdGlvbk5hbWUsIHNlbGVjdGVkUGFydCk7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3VwZGF0ZTpzZWxlY3RlZCcsIHNlY3Rpb25OYW1lLCBzZWxlY3RlZFBhcnQsIHNlbGVjdGVkVmFyaWFudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN2Z1BhcnQoc2VsZWN0ZWRWYXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRWYXJpYW50LmNvbG9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChzZWxlY3RlZFZhcmlhbnQuY29sb3JzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTdmdQYXJ0cy51cGRhdGVPbmUoa2V5LCB7IGNvbG9yOiB2YWx1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1ByZXZpZXdDdHJsJywgZnVuY3Rpb24gKFN2Z1BhcnRzLCBEYXRhQ29sbGVjdGlvbiwgJHNjb3BlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdHJsID0gdGhpcztcclxuICAgICAgICAgICAgY3RybC5nZXRQYXJ0ID0gZ2V0UGFydDtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3N2Z1BhcnQ6Y2xpY2tlZCcsIHVwZGF0ZUFjdGl2ZVN2Z1BhcnQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN2Z0RhdGEgPSBuZXcgRGF0YUNvbGxlY3Rpb24oeyBmaWxlUGF0aDogJ3NjcmlwdHMvc3ZnZGF0YS5qc29uJywgaXNBc3luYzogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgICAgIHN2Z0RhdGEuZmV0Y2goKS50aGVuKGRhdGFGZXRjaGVkKTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UGFydChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY3RybC5TdmdEYXRhUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3ZnUGFydHMuZ2V0T25lKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRhdGFGZXRjaGVkKCkge1xyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKHN2Z0RhdGEuZ2V0QWxsKCksIGZ1bmN0aW9uKHN2Z0RhdGFQYXJ0LCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBTdmdQYXJ0cy5hZGQoa2V5LCBzdmdEYXRhUGFydCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGN0cmwuU3ZnRGF0YVJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQWN0aXZlU3ZnUGFydChldmVudCwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICBTdmdQYXJ0cy51cGRhdGVBbGwoeyBzZWxlY3RlZDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICBTdmdQYXJ0cy51cGRhdGVPbmUoa2V5LCB7IHNlbGVjdGVkOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuY29udHJvbGxlcignU3VtbWFyeUN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBQYXJ0cykge1xyXG4gICAgICAgICAgICB2YXIgY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBjdHJsLnNlbGVjdGVkUGFydFNlY3Rpb25zID0ge307XHJcblxyXG4gICAgICAgICAgICBQYXJ0cy5mZXRjaCgpLnRoZW4ocGFydERhdGFGZXRjaGVkKTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3VwZGF0ZTpzZWxlY3RlZCcsIHVwZGF0ZVNlbGVjdGVkUGFydHMpO1xyXG5cclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJ0RGF0YUZldGNoZWQoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY3RybC5wYXJ0U2VjdGlvbnMgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFBhcnRzKGV2ZW50LCBzZWN0aW9uTmFtZSwgc2VsZWN0ZWRQYXJ0LCBzZWxlY3RlZFZhcmlhbnQpIHtcclxuICAgICAgICAgICAgICAgIGN0cmwuc2VsZWN0ZWRQYXJ0U2VjdGlvbnNbc2VjdGlvbk5hbWVdID0geyBzZWxlY3RlZFBhcnQ6IHNlbGVjdGVkUGFydCwgc2VsZWN0ZWRWYXJpYW50OiBzZWxlY3RlZFZhcmlhbnQgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgncGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgICdtb2RlbCc6ICc9cGFydCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3NlY3Rpb25OYW1lJzogJz0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydC50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS51cGRhdGVTZWxlY3RlZFBhcnQgPSB1cGRhdGVTZWxlY3RlZFBhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0ZWRWYXJpYW50ID0gYW5ndWxhci5jb3B5KHNjb3BlLm1vZGVsLnZhcmlhbnRzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5zZXRTZWxlY3RlZFZhcmlhbnQgPSBzZXRTZWxlY3RlZFZhcmlhbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkUGFydCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3BhcnQ6c2VsZWN0ZWQnLCBzY29wZS5zZWN0aW9uTmFtZSwgc2NvcGUubW9kZWwsIHNjb3BlLnNlbGVjdGVkVmFyaWFudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZFZhcmlhbnQodmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zZWxlY3RlZFZhcmlhbnQgPSB2YXJpYW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGUubW9kZWwuc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkUGFydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyhmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdwYXJ0U2VjdGlvbicsIGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICc9cGFydFNlY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICd0eXBlJzogJz1wYXJ0VHlwZScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BhcnRzJzogJz0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydC5zZWN0aW9uLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc2NvcGUuJG9uKCdwYXJ0OnNlbGVjdGVkJywgdXBkYXRlU2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2Z1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkKGV2ZW50LCBzZWxlY3RlZFBhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3VwZGF0ZTpzZWxlY3RlZCcsIHNlbGVjdGVkUGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgXy5lYWNoKHNjb3BlLnBhcnRzLCBmdW5jdGlvbiAocGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICBwYXJ0LnNlbGVjdGVkID0gcGFydC5uYW1lID09IHNlbGVjdGVkUGFydC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdzY3JvbGxCaW5kJywgZnVuY3Rpb24gKCRxLCBzY3JvbGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihhdHRycy5zY29sbEJpbmQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXR0cnMuc2Nyb2xsQmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsLmJpbmQoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJzLnVwZGF0ZVNjb3BlVmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVTY29wZVZhbHMgPSBhdHRycy51cGRhdGVTY29wZVZhbHMucmVwbGFjZSgvJy9naSwgJ1wiJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZSh1cGRhdGVTY29wZVZhbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kVmFsdWVzVG9TY3JvbGwoanNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kVmFsdWVzVG9TY3JvbGwoW3VwZGF0ZVNjb3BlVmFsc10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYmluZFZhbHVlc1RvU2Nyb2xsKHNjb3BlS2V5c1RvVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUtleXNUb1VwZGF0ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGwuYmluZChnZXRVcGRhdGVWYWx1ZXNGbihzY29wZUtleXNUb1VwZGF0ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VXBkYXRlVmFsdWVzRm4oc2NvcGVLZXlzVG9VcGRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlcyhzY3JvbGxUb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaChzY29wZUtleXNUb1VwZGF0ZSwgZnVuY3Rpb24gKHNjb3BlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVbc2NvcGVLZXldID0gc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2VsZWN0UGFydEJ1dHRvbicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5zZWxlY3RQYXJ0ID0gc2VsZWN0UGFydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNlbGVjdFBhcnQgKClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2hvd1NwaW5uZXInLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRjb21waWxlKSB7XHJcbiAgICAgICAgICAgIHZhciBpZFBvc3RGaXggPSAwO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG93U3Bpbm5lciA9IGdldEJvb2woYXR0cnMuc2hvd1NwaW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG93U3Bpbm5lciA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Bpbm5lcktleVBvc3RGaXggPSBpZFBvc3RGaXg7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRQb3N0Rml4Kys7IFxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3Bpbm5lckVsZW1lbnQgPSBnZXRTcGlubmVyRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydEJlZm9yZUVsZW1lbnQoc3Bpbm5lckVsZW1lbnRbMF0sIGVsZW1lbnRbMF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlT2JzZXJ2ZSA9IGF0dHJzLiRvYnNlcnZlKCdzaG93U3Bpbm5lcicsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldEJvb2wodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudChzcGlubmVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVPYnNlcnZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRCb29sKGF0dHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFfLmlzVW5kZWZpbmVkKGF0dHIpICYmIGF0dHIudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRTcGlubmVyRWxlbWVudCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9ICR0ZW1wbGF0ZUNhY2hlLmdldCgnc3Bpbm5lci50cGwuaHRtbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlua0ZuID0gJGNvbXBpbGUodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtGbihzY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbnNlcnRCZWZvcmVFbGVtZW50KGluc2VydEVsLCBzaWJsaW5nRWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudEVsID0gc2libGluZ0VsLnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShpbnNlcnRFbCwgc2libGluZ0VsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3VtbWFyeUl0ZW0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnc2VsZWN0ZWRQYXJ0JzogJz1zdW1tYXJ5SXRlbScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3NlY3Rpb25OYW1lJzogJz0nLFxyXG4gICAgICAgICAgICAgICAgICAgICdzZWxlY3RlZFZhcmlhbnQnOiAnPSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdW1tYXJ5Lml0ZW0udHBsLmh0bWwnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7XHJcblxyXG4iLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3ZhcmlhbnRQaWNrZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudHM6ICc9dmFyaWFudFBpY2tlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRWYXJpYW50OiAnPScsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVBhcnRJbWdVcmw6ICdAJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmFyaWFudC5waWNrZXIudHBsLmh0bWwnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7XHJcblxyXG4iLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdQYXJ0cycsIGZ1bmN0aW9uIChEYXRhQ29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBQYXJ0cygpIHtcclxuICAgICAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgUGFydHMucHJvdG90eXBlID0gbmV3IERhdGFDb2xsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIFBhcnRzLnByb3RvdHlwZS51cGRhdGVTZWxlY3RlZFBhcnQgPSB1cGRhdGVTZWxlY3RlZFBhcnQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcnRzKHsgZmlsZVBhdGg6ICdzY3JpcHRzL3BhcnRkYXRhLmpzb24nLCBpc0FzeW5jOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFBhcnQoc2VjdGlvbk5hbWUsIHNlbGVjdGVkUGFydCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSB0aGlzLml0ZW1zW3NlY3Rpb25OYW1lXTtcclxuICAgICAgICAgICAgICAgIGlmICghc2VjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfLmVhY2goc2VjdGlvbi5wYXJ0cywgZnVuY3Rpb24gKHBhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0LnNlbGVjdGVkID0gcGFydC5uYW1lID09IHNlbGVjdGVkUGFydC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdzY3JvbGwnLCBmdW5jdGlvbiAoQmluZGFibGUpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gU2Nyb2xsKCkge1xyXG4gICAgICAgICAgICAgICAgQmluZGFibGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBTY3JvbGwucHJvdG90eXBlID0gbmV3IEJpbmRhYmxlKCk7XHJcblxyXG4gICAgICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uQXR0YWNoID0gYXR0YWNoU2Nyb2xsO1xyXG4gICAgICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uRGV0YWNoID0gZGV0YWNoU2Nyb2xsO1xyXG4gICAgICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldFNjcm9sbFRvcCA9IGdldFNjcm9sbFRvcDtcclxuICAgICAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5oYW5kbGVTY3JvbGwgPSBoYW5kbGVTY3JvbGw7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIFNDUk9MTF9USFJPVFRMRSA9IDEwMDtcclxuICAgICAgICAgICAgdmFyIHRocm90dGxlZEhhbmRsZVNjcm9sbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2Nyb2xsKCk7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhdHRhY2hTY3JvbGwoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB0aHJvdHRsZWRIYW5kbGVTY3JvbGwgPSBfLnRocm90dGxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBTQ1JPTExfVEhST1RUTEUpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRocm90dGxlZEhhbmRsZVNjcm9sbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRldGFjaFNjcm9sbCgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aHJvdHRsZWRIYW5kbGVTY3JvbGwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTY3JvbGxUb3AoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVG9wID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wID0gd2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbFRvcDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnZva2UodGhpcy5nZXRTY3JvbGxUb3AoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdTdmdQYXJ0cycsIGZ1bmN0aW9uIChEYXRhQ29sbGVjdGlvbiwgdXRpbHMsIFN2Z1BhcnQsIFBhdGgsIExpbmVHcm91cCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBTVkdQYXJ0cygpIHtcclxuICAgICAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBiYXNlID0gRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlO1xyXG4gICAgICAgICAgICBTVkdQYXJ0cy5wcm90b3R5cGUgPSBuZXcgRGF0YUNvbGxlY3Rpb24oKTtcclxuICAgICAgICAgICAgU1ZHUGFydHMucHJvdG90eXBlLmFkZCA9IGFkZFN2Z0NsYXNzO1xyXG5cclxuICAgICAgICAgICAgdXRpbHMuaW5oZXJpdChQYXRoLCBTdmdQYXJ0KTtcclxuICAgICAgICAgICAgdXRpbHMuaW5oZXJpdChMaW5lR3JvdXAsIFN2Z1BhcnQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSB7IFBhdGg6IFBhdGgsIExpbmVHcm91cDogTGluZUdyb3VwIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhcnRzKHsgaXRlbXM6IHt9LCBpc0FzeW5jOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFN2Z0NsYXNzKGtleSwgcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghcHJvcHMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBDbGFzcyA9IGdldFN2Z0NsYXNzKHByb3BzLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFDbGFzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBiYXNlLmFkZC5hcHBseSh0aGlzLCBba2V5LCBuZXcgQ2xhc3Moa2V5LCBwcm9wcyldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U3ZnQ2xhc3Moa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3Nlc1trZXldIHx8IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCd1dGlscycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICdpbmhlcml0JzogaW5oZXJpdFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gaW5oZXJpdChjaGlsZCwgYmFzZSwgcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLnByb3RvdHlwZSA9IF8uY3JlYXRlKGJhc2UucHJvdG90eXBlLCBfLmFzc2lnbih7XHJcbiAgICAgICAgICAgICAgICAgICAgJ19zdXBlcic6IGJhc2UucHJvdG90eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICdjYWxsU3VwZXJDb25zdHJ1Y3Rvcic6IGZ1bmN0aW9uIChjdHgsIGFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZS5hcHBseShjdHgsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnN0cnVjdG9yJzogY2hpbGRcclxuICAgICAgICAgICAgICAgIH0sIHByb3BzKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiYW5ndWxhci5tb2R1bGUoXCJiaWtlQnVpbGRlclwiKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHskdGVtcGxhdGVDYWNoZS5wdXQoXCJsaW5lLmdyb3VwLnRwbC5odG1sXCIsXCI8ZyBpZD17e21vZGVsLmtleX19IG5nLWNsaWNrPVxcXCJoYW5kbGVDbGlja2VkKG1vZGVsLmtleSlcXFwiIG5nLWNsYXNzPVxcXCJbbW9kZWwua2V5LCBtb2RlbC5hY3RpdmUgPyBcXCdhY3RpdmVcXCcgOiBcXCdcXCcsIG1vZGVsLmNvbG9yID8gXFwnaGFzLWNvbG9yXFwnIDogXFwnXFwnXVxcXCI+XFxyXFxuICAgIDxsaW5lIHN2Zy1saW5lIG5nLXJlcGVhdD1cXFwibGluZSBpbiBtb2RlbC5saW5lc1xcXCIgY29sb3I9XFxcIm1vZGVsLmNvbG9yXFxcIiBsaW5lLWRhdGE9XFxcImxpbmUuZGF0YVxcXCI+PC9saW5lPlxcclxcbjwvZz5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJsaW5lLnRwbC5odG1sXCIsXCI8bGluZSBmaWxsPVxcXCJub25lXFxcIiBuZy1zdHlsZT1cXFwic3R5bGVcXFwiXFxyXFxuICAgICAgbmctYXR0ci14MT1cXFwie3tkYXRhWzBdfX1cXFwiIG5nLWF0dHIteTE9XFxcInt7ZGF0YVsxXX19XFxcIiBuZy1hdHRyLXgyPVxcXCJ7e2RhdGFbMl19fVxcXCIgbmctYXR0ci15Mj1cXFwie3tkYXRhWzNdfX1cXFwiXFxyXFxuICAgICAgbmctYXR0ci1zdHJva2UtZGFzaGFycmF5PVxcXCJ7e3BhdGhMZW5ndGh9fVxcXCIgbmctYXR0ci1zdHJva2UtZGFzaG9mZnNldD1cXFwie3twYXRoTGVuZ3RofX1cXFwiIC8+XFxyXFxuXCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwicGFydC5zZWN0aW9uLnRwbC5odG1sXCIsXCI8ZGl2IGNsYXNzPVxcXCJwYXJ0LXNlY3Rpb25cXFwiPlxcclxcbiAgICA8aDIgY2xhc3M9XFxcInBhcnQtc2VjdGlvbi1uYW1lXFxcIj57e25hbWV9fTwvaDI+XFxyXFxuICAgIDxkaXYgcGFydD1cXFwicGFydFxcXCIgc2VjdGlvbi1uYW1lPVxcXCJuYW1lXFxcIiBuZy1yZXBlYXQ9XFxcInBhcnQgaW4gcGFydHNcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJwYXJ0LnRwbC5odG1sXCIsXCI8ZGl2IGNsYXNzPVxcXCJwYXJ0XFxcIj5cXHJcXG4gICAgPGgzIGNsYXNzPVxcXCJwYXJ0LW5hbWVcXFwiPnt7bW9kZWwubmFtZX19PC9oMz5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiYnRuLWdyb3VwIHZhcmlhbnQtYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICA8YSBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0IHZhcmlhbnQtYnV0dG9uXFxcIiBuZy1jbGFzcz1cXFwie1xcJ2FjdGl2ZVxcJzogdmFyaWFudC5uYW1lID09IHNlbGVjdGVkVmFyaWFudC5uYW1lIH1cXFwiIG5nLWNsaWNrPVxcXCJzZXRTZWxlY3RlZFZhcmlhbnQodmFyaWFudClcXFwiIG5nLXJlcGVhdD1cXFwidmFyaWFudCBpbiBtb2RlbC52YXJpYW50c1xcXCI+e3t2YXJpYW50Lm5hbWV9fTwvYT5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXYgdmFyaWFudC1waWNrZXI9XFxcIm1vZGVsLnZhcmlhbnRzXFxcIiBkYXRhLXNlbGVjdGVkLXZhcmlhbnQ9XFxcInNlbGVjdGVkVmFyaWFudFxcXCIgZGF0YS1iYXNlLXBhcnQtaW1nLXVybD1cXFwiY29udGVudC9pbWFnZXMvcGFydHNcXFwiPjwvZGl2PlxcclxcbiAgICA8YSBjbGFzcz1cXFwiYnRuIHBhcnQtc2VsZWN0LWJ0biBidG4tbGcgYnRuLWRlZmF1bHRcXFwiIG5nLWNsaWNrPVxcXCJ1cGRhdGVTZWxlY3RlZFBhcnQoKVxcXCIgbmctY2xhc3M9XFxcIntcXCdhY3RpdmVcXCc6IG1vZGVsLnNlbGVjdGVkfVxcXCI+e3ttb2RlbC5zZWxlY3RlZCA/IFxcJ1NlbGVjdGVkXFwnIDogXFwnU2VsZWN0IHRoaXMgcGFydFxcJ319PC9hPlxcclxcbjwvZGl2PlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInBhdGgudHBsLmh0bWxcIixcIjxwYXRoIGlkPXt7bW9kZWwua2V5fX0gZmlsbD1cXFwibm9uZVxcXCIgbmctY2xpY2s9XFxcImhhbmRsZUNsaWNrZWQobW9kZWwua2V5KVxcXCIgbmctY2xhc3M9XFxcIlttb2RlbC50eXBlLCBtb2RlbC5zZWxlY3RlZCA/IFxcJ3NlbGVjdGVkXFwnOlxcJ1xcJywgbW9kZWwuY29sb3IgPyBcXCdoYXMtY29sb3JcXCc6XFwnXFwnXVxcXCJcXHJcXG4gICAgICBuZy1zdHlsZT1cXFwic3R5bGVcXFwiIG5nLWF0dHItc3Ryb2tlLWRhc2hhcnJheT1cXFwie3twYXRoTGVuZ3RofX1cXFwiIG5nLWF0dHItc3Ryb2tlLWRhc2hvZmZzZXQ9XFxcInt7cGF0aExlbmd0aH19XFxcIiBuZy1hdHRyLWQ9XFxcInt7bW9kZWwuZGF0YX19XFxcIiAvPlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInNwaW5uZXIudHBsLmh0bWxcIixcIjxkaXYgY2xhc3M9XFxcInNwaW5uZXJcXFwiPlxcclxcbiAgICA8aDMgY2xhc3M9XFxcImxvYWQtdGV4dFxcXCI+TG9hZGluZy4uLjwvaDM+XFxyXFxuICAgIDw/eG1sIHZlcnNpb249XFxcIjEuMFxcXCIgZW5jb2Rpbmc9XFxcInV0Zi04XFxcIiA/PlxcclxcbiAgICA8c3ZnIGlkPVxcXCJzcGlubmVyLXN2Z3t7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCIgdmVyc2lvbj1cXFwiMS4xXFxcIiBpZD1cXFwiTGF5ZXJfMVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB4bWxuczp4bGluaz1cXFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1xcXCIgeD1cXFwiMHB4XFxcIiB5PVxcXCIwcHhcXFwiXFxyXFxuICAgICAgICAgdmlld0JveD1cXFwiMjA0IDg5LjMgMjQzLjMgMjQzLjNcXFwiIGVuYWJsZS1iYWNrZ3JvdW5kPVxcXCJuZXcgMjA0IDg5LjMgMjQzLjMgMjQzLjNcXFwiIHhtbDpzcGFjZT1cXFwicHJlc2VydmVcXFwiPlxcclxcbiAgICA8ZyBpZD1cXFwic3Bpbm5lci13cmFwcGVye3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIj48ZyBpZD1cXFwic3Bpbm5lci13aGVlbHt7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCI+XFxyXFxuICAgIDxwYXRoIGlkPVxcXCJzcGlubmVyLXJpbXt7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCIgZmlsbD1cXFwibm9uZVxcXCIgZD1cXFwiTTI1OS42LDEyNS4yYzUwLjItMzksMTE5LjEtMjcuOCwxNTUuNCwyMC44YzM2LjIsNDguNSwyMi4xLDExNC40LTI0LjEsMTUzLjZcXHJcXG5cdFx0Yy0yOS41LDI1LTEwOC45LDM2LjUtMTUzLjUtMjAuOUMyMDYuMSwyMzguNCwyMTMuOSwxNjAuNywyNTkuNiwxMjUuMnogTTI0OC4yLDI3MC43YzM4LjMsNDkuMiw5MC44LDQ5LjcsMTMzLjEsMThcXHJcXG5cdFx0czUzLjItOTIuNCwyMi4xLTEzNGMtMzEuMS00MS43LTg2LjQtNTUuNy0xMzQuOC0xNi44QzIyNCwxNzMuNywyMjEuMywyMzYuMSwyNDguMiwyNzAuN3pcXFwiIC8+XFxyXFxuICAgIDxnIGlkPVxcXCJzcGlubmVyLXNwb2tlc3t7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCI+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MTYuOVxcXCIgeTE9XFxcIjE4MC45XFxcIiB4Mj1cXFwiMzM4LjdcXFwiIHkyPVxcXCIyMDMuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjMzOC43XFxcIiB5MT1cXFwiMjAzLjlcXFwiIHgyPVxcXCIzODZcXFwiIHkyPVxcXCIxMzYuM1xcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjM5OC43XFxcIiB5MT1cXFwiMTUwLjdcXFwiIHgyPVxcXCIzNDMuMlxcXCIgeTI9XFxcIjIxNS4xXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDA5LjZcXFwiIHkxPVxcXCIxNjQuMVxcXCIgeDI9XFxcIjMyOS4yXFxcIiB5Mj1cXFwiMTk5LjhcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MjAuMVxcXCIgeTE9XFxcIjE5OS44XFxcIiB4Mj1cXFwiMzQzLjJcXFwiIHkyPVxcXCIyMTUuMVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjQyMC45XFxcIiB5MT1cXFwiMjE3LjlcXFwiIHgyPVxcXCIzMzkuOFxcXCIgeTI9XFxcIjIyMS45XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDE2LjlcXFwiIHkxPVxcXCIyMzYuNFxcXCIgeDI9XFxcIjM0MC45XFxcIiB5Mj1cXFwiMjA3LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MTAuNVxcXCIgeTE9XFxcIjI1My45XFxcIiB4Mj1cXFwiMzQyLjNcXFwiIHkyPVxcXCIyMTFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MDFcXFwiIHkxPVxcXCIyNjkuM1xcXCIgeDI9XFxcIjMzNC4yXFxcIiB5Mj1cXFwiMjI2LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzODguM1xcXCIgeTE9XFxcIjI4Mi45XFxcIiB4Mj1cXFwiMzMyXFxcIiB5Mj1cXFwiMjI3LjZcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzNTYuMVxcXCIgeTE9XFxcIjMwMy4yXFxcIiB4Mj1cXFwiMzM5LjhcXFwiIHkyPVxcXCIyMjEuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjM0MC45XFxcIiB5MT1cXFwiMjIxLjlcXFwiIHgyPVxcXCIzNzMuOFxcXCIgeTI9XFxcIjI5My45XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzIwLjlcXFwiIHkxPVxcXCIzMTAuNVxcXCIgeDI9XFxcIjMyMi4yXFxcIiB5Mj1cXFwiMjI2LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMDAuN1xcXCIgeTE9XFxcIjMwNy44XFxcIiB4Mj1cXFwiMzI3XFxcIiB5Mj1cXFwiMjI3LjZcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyODIuM1xcXCIgeTE9XFxcIjMwMC40XFxcIiB4Mj1cXFwiMzMyXFxcIiB5Mj1cXFwiMjI3LjZcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyNjguMVxcXCIgeTE9XFxcIjI5MS4xXFxcIiB4Mj1cXFwiMzE1LjRcXFwiIHkyPVxcXCIyMTFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyNTQuMlxcXCIgeTE9XFxcIjI3Ny44XFxcIiB4Mj1cXFwiMzE1LjRcXFwiIHkyPVxcXCIyMjAuNVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI0NC4xXFxcIiB5MT1cXFwiMjY0LjhcXFwiIHgyPVxcXCIzMTlcXFwiIHkyPVxcXCIyMjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMTlcXFwiIHkxPVxcXCIyMjRcXFwiIHgyPVxcXCIzMzguN1xcXCIgeTI9XFxcIjMwOC42XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjM1LjVcXFwiIHkxPVxcXCIyNDYuM1xcXCIgeDI9XFxcIjMxOS41XFxcIiB5Mj1cXFwiMjI2LjRcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyMzEuOFxcXCIgeTE9XFxcIjIyOS41XFxcIiB4Mj1cXFwiMzE5XFxcIiB5Mj1cXFwiMjA0LjNcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyMzEuMVxcXCIgeTE9XFxcIjIwOS40XFxcIiB4Mj1cXFwiMzE2LjhcXFwiIHkyPVxcXCIyMDcuNFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjIzNC4zXFxcIiB5MT1cXFwiMTkwLjdcXFwiIHgyPVxcXCIzMTZcXFwiIHkyPVxcXCIyMTcuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI0MVxcXCIgeTE9XFxcIjE3Mi41XFxcIiB4Mj1cXFwiMzE1LjVcXFwiIHkyPVxcXCIyMTUuMVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI1Mi4yXFxcIiB5MT1cXFwiMTU0LjRcXFwiIHgyPVxcXCIzMTlcXFwiIHkyPVxcXCIyMDQuM1xcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI2NC44XFxcIiB5MT1cXFwiMTQxLjFcXFwiIHgyPVxcXCIzMjMuOFxcXCIgeTI9XFxcIjIwMC44XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjk2LjJcXFwiIHkxPVxcXCIxMjEuNFxcXCIgeDI9XFxcIjMxOS41XFxcIiB5Mj1cXFwiMjA0LjFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMTUuNFxcXCIgeTE9XFxcIjExNlxcXCIgeDI9XFxcIjMzMC4zXFxcIiB5Mj1cXFwiMTk5LjNcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMzQuN1xcXCIgeTE9XFxcIjExNlxcXCIgeDI9XFxcIjMzOC43XFxcIiB5Mj1cXFwiMjAzLjlcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzNTIuM1xcXCIgeTE9XFxcIjExOC4yXFxcIiB4Mj1cXFwiMzE5XFxcIiB5Mj1cXFwiMjA0LjNcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzNzAuMlxcXCIgeTE9XFxcIjEyNS41XFxcIiB4Mj1cXFwiMzMwLjNcXFwiIHkyPVxcXCIxOTkuM1xcXCIgLz5cXHJcXG4gICAgICAgICAgICA8L2c+XFxyXFxuICAgIDxwYXRoIGlkPVxcXCJzcGlubmVyLXRpcmV7e3NwaW5uZXJLZXlQb3N0Rml4fX1cXFwiIGZpbGw9XFxcIm5vbmVcXFwiIGQ9XFxcIk0yNTkuNiwxMjUuMmM1MC4yLTM5LDExOS4xLTI3LjgsMTU1LjQsMjAuOGMzNi4yLDQ4LjUsMjIuMSwxMTQuNC0yNC4xLDE1My42XFxyXFxuXHRcdGMtMjkuNSwyNS0xMDguOSwzNi41LTE1My41LTIwLjlDMjA2LjEsMjM4LjQsMjEzLjksMTYwLjcsMjU5LjYsMTI1LjJ6IE0yMzEuMSwyODUuOWMzNS40LDUyLjEsMTE1LDUzLjUsMTYyLjgsMTkuNVxcclxcblx0XHRjNDguMi0zNC4zLDY1LjQtMTE2LjksMjYuMS0xNjQuMUMzNzguOCw5MS42LDMxOCw3My4xLDI1Mi4yLDEyMS41QzIwOC40LDE1My42LDE5MS42LDIyNy42LDIzMS4xLDI4NS45elxcXCIgLz5cXHJcXG4gICAgPHBhdGggaWQ9XFxcInNwaW5uZXItaHVie3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIiBmaWxsPVxcXCJub25lXFxcIiBkPVxcXCJNMzE1LjQsMjEzLjdjMC0yLjMsMC43LTEzLjksMTMuNS0xMy45YzcuNCwwLDEzLjUsNi4yLDEzLjUsMTMuOXMtNi4xLDEzLjktMTMuNiwxMy45XFxyXFxuXHRcdEMzMjEuNCwyMjcuNiwzMTUuNCwyMjEuNSwzMTUuNCwyMTMuN3ogTTMyMywyMThsLTQuMSwwLjZsMy40LDMuMkwzMjMsMjE4eiBNMzMzLjgsMjE2LjlsMC43LDQuMWwzLjEtMy41TDMzMy44LDIxNi45eiBNMzI4LDIxOS45XFxyXFxuXHRcdGwtMS4zLDRsNC4zLTAuN0wzMjgsMjE5Ljl6IE0zMTguNywyMTEuMmwtMC40LDQuMWwzLjktMi41TDMxOC43LDIxMS4yeiBNMzIzLjksMjA4LjNsMS4zLTMuOWwtNC40LDEuNkwzMjMuOSwyMDguM3ogTTMzNC41LDIwNS43XFxyXFxuXHRcdGwtNS4zLTIuOWwxLjcsNC4zTDMzNC41LDIwNS43eiBNMzM0LjgsMjExLjNsNCwxLjFsLTEuOC00LjNMMzM0LjgsMjExLjN6XFxcIiAvPlxcclxcbiAgICAgICAgPC9nPlxcclxcbiAgICAgICAgPC9nPlxcclxcbiAgICA8L3N2Zz5cXHJcXG48L2Rpdj5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJzdW1tYXJ5Lml0ZW0udHBsLmh0bWxcIixcIjxsaSBuZy1zaG93PVxcXCJzZWxlY3RlZFBhcnRcXFwiIGNsYXNzPVxcXCJzdW1tYXJ5LWl0ZW1cXFwiPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwic3VtbWFyeS1zZWN0aW9uLW5hbWVcXFwiPnt7c2VjdGlvbk5hbWV9fTombmJzcDs8L3NwYW4+XFxyXFxuICAgIDxzcGFuIGNsYXNzPVxcXCJzdW1tYXJ5LXBhcnQtbmFtZVxcXCI+e3tzZWxlY3RlZFBhcnQubmFtZX19PC9zcGFuPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwic3VtbWFyeS12YXJpYW50LWNvbG9yXFxcIiBuZy1yZXBlYXQ9XFxcImNvbG9yIGluIHNlbGVjdGVkVmFyaWFudC5jb2xvcnNcXFwiIG5nLXN0eWxlPVxcXCJ7XFwnYmFja2dyb3VuZFxcJzpjb2xvcn1cXFwiPiZuYnNwOzwvc3Bhbj5cXHJcXG48L2xpPlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInZhcmlhbnQucGlja2VyLnRwbC5odG1sXCIsXCI8ZGl2IGNsYXNzPVxcXCJ2YXJpYW50LXBpY2tlclxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImltYWdlcy1zdGFja1xcXCI+XFxyXFxuICAgICAgICA8aW1nIGNsYXNzPVxcXCJ2YXJpYW50LWltYWdlXFxcIiBuZy1zcmM9XFxcInt7YmFzZVBhcnRJbWdVcmwgKyBcXCcvXFwnICsgdmFyaWFudC5pbWFnZVVybH19XFxcIiBuZy1jbGFzcz1cXFwie1xcJ3NlbGVjdGVkXFwnOiB2YXJpYW50Lm5hbWUgPT0gc2VsZWN0ZWRWYXJpYW50Lm5hbWUgfVxcXCIgbmctcmVwZWF0PVxcXCJ2YXJpYW50IGluIHZhcmlhbnRzXFxcIiAvPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cIik7fV0pOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3ZnTGluZUdyb3VwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgICdtb2RlbCc6ICc9J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlOiAnc3ZnJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbGluZS5ncm91cC50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5oYW5kbGVDbGlja2VkID0gaGFuZGxlQ2xpY2tlZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrZWQoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzdmdQYXJ0OmNsaWNrZWQnLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3N2Z0xpbmUnLCBmdW5jdGlvbiAoU3ZnQW5pbWF0aW9uRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbG9yJzogJz0nLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogJz1saW5lRGF0YSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVzcGFjZTogJ3N2ZycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2xpbmUudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZSA9IG5ldyBTdmdBbmltYXRpb25EaXJlY3RpdmUoZWwsICdsaW5lJywgeyBtc1ByVW5pdDogMjAsIGRhdGE6IHNjb3BlLmRhdGF9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdzdmdSb290TG9hZGVkJywgbG9hZEFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCdjb2xvcicsIHVwZGF0ZUNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbG9hZEFuaW1hdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucGF0aExlbmd0aCA9IGJhc2UuZ2V0TGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0eWxlID0gYmFzZS5nZXRTdHlsZShzY29wZS5jb2xvciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ29sb3IoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0eWxlID0gYmFzZS5nZXRTdHlsZShzY29wZS5jb2xvciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3ZnUGF0aCcsIGZ1bmN0aW9uIChTdmdBbmltYXRpb25EaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnbW9kZWwnOiAnPSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVzcGFjZTogJ3N2ZycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhdGgudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2UgPSBuZXcgU3ZnQW5pbWF0aW9uRGlyZWN0aXZlKGVsLCAncGF0aCcsIHsgZGF0YTogc2NvcGUubW9kZWwuZGF0YSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdzdmdSb290TG9hZGVkJywgbG9hZEFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuaGFuZGxlQ2xpY2tlZCA9IGhhbmRsZUNsaWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCdtb2RlbC5jb2xvcicsIHVwZGF0ZUNvbG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVDbGlja2VkKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc3ZnUGFydDpjbGlja2VkJywga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRBbmltYXRpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnBhdGhMZW5ndGggPSBiYXNlLmdldExlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdHlsZSA9IGJhc2UuZ2V0U3R5bGUoc2NvcGUubW9kZWwuY29sb3IsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbG9yKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdHlsZSA9IGJhc2UuZ2V0U3R5bGUoc2NvcGUubW9kZWwuY29sb3IsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdzdmdSb290JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcclxuICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYnJvYWRjYXN0KCdzdmdSb290TG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN2Z1Jvb3RMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmZhY3RvcnkoJ0JpbmRhYmxlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBCaW5kYWJsZSgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNbJ19jYWxsYmFja3MnXSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBCaW5kYWJsZS5wcm90b3R5cGUub25BdHRhY2ggPSBhbmd1bGFyLm5vb3A7XHJcbiAgICAgICAgICAgIEJpbmRhYmxlLnByb3RvdHlwZS5vbkJvdW5kID0gYW5ndWxhci5ub29wO1xyXG4gICAgICAgICAgICBCaW5kYWJsZS5wcm90b3R5cGUub25VbkJvdW5kID0gYW5ndWxhci5ub29wO1xyXG4gICAgICAgICAgICBCaW5kYWJsZS5wcm90b3R5cGUub25EZXRhY2ggPSBhbmd1bGFyLm5vb3A7XHJcblxyXG4gICAgICAgICAgICBCaW5kYWJsZS5wcm90b3R5cGUuYmluZCA9IGJpbmQ7XHJcbiAgICAgICAgICAgIEJpbmRhYmxlLnByb3RvdHlwZS5pbnZva2UgPSBpbnZva2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQmluZGFibGU7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJpbmQoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzWydfY2FsbGJhY2tzJ10ucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzWydfY2FsbGJhY2tzJ10ubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQXR0YWNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkJvdW5kKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmWydfY2FsbGJhY2tzJ10uc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vblVuQm91bmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGZbJ19jYWxsYmFja3MnXS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkRldGFjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGludm9rZSgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHRoaXNbJ19jYWxsYmFja3MnXSwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmZhY3RvcnkoJ0RhdGFDb2xsZWN0aW9uJywgZnVuY3Rpb24gKCRxLCAkdGltZW91dCwgJGh0dHApIHtcclxuICAgICAgICAgICAgdmFyIERhdGFDb2xsZWN0aW9uID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaXNBc3luYyA9ICFfLmlzVW5kZWZpbmVkKG9wdGlvbnMuaXNBc3luYykgPyBvcHRpb25zLmlzQXN5bmMgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSBvcHRpb25zLml0ZW1zIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mZXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVQYXRoID0gb3B0aW9ucy5maWxlUGF0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlLmZldGNoID0gZmV0Y2g7XHJcbiAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRPbmUgPSBnZXRPbmU7XHJcbiAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRBbGwgPSBnZXRBbGw7XHJcbiAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVPbmUgPSB1cGRhdGVPbmU7XHJcbiAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVBbGwgPSB1cGRhdGVBbGw7XHJcbiAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZS5wcm9jZXNzRGF0YSA9IHByb2Nlc3NEYXRhO1xyXG4gICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkID0gYWRkO1xyXG4gICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQWxsID0gYWRkQWxsO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIERhdGFDb2xsZWN0aW9uO1xyXG5cclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZmV0Y2goKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNBc3luYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hlZERmZCA9IHRoaXMuZmV0Y2hlZERmZCB8fCAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZldGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZldGNoZWREZmQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hlZERmZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZldGNoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJGh0dHAuZ2V0KHRoaXMuZmlsZVBhdGgpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mZXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZldGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLml0ZW1zID0gc2VsZi5wcm9jZXNzRGF0YShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mZXRjaGVkRGZkLnJlc29sdmUoc2VsZi5pdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hlZERmZC5wcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBwcm9jZXNzRGF0YShkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkKGtleSwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBc3luYyAmJiAhdGhpcy5mZXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZyA9IHRoaXMuZ2V0T25lKGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW2tleV0gPSBpdGVtO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEFsbChjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FzeW5jICYmICF0aGlzLmZldGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbGxlY3Rpb24gfHwgXy5zaXplKGNvbGxlY3Rpb24pID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKGl0ZW0sIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkKGtleSwgaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRPbmUoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FzeW5jICYmICF0aGlzLmZldGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5pdGVtc1trZXldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FzeW5jICYmICF0aGlzLmZldGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVPbmUoa2V5LCBwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBc3luYyAmJiAhdGhpcy5mZXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0T25lKGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5hc3NpZ24oaXRlbSwgcHJvcHMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbGwocHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQXN5bmMgJiYgIXRoaXMuZmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHRoaXMuaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5hc3NpZ24oaXRlbSwgcHJvcHMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1N2Z0FuaW1hdGlvbkRpcmVjdGl2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIEFuaW1hdGlvblBhcnQoZWwsIHR5cGUsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZWwgPSBlbDtcclxuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBvcHRpb25zLmRhdGEgfHwge307XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5tc1ByVW5pdCA9IG9wdGlvbnMubXNQclVuaXQgfHwgNC4xNjtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF4TXMgPSBvcHRpb25zLm1heE1zIHx8IDEwMDAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0QW5pbWF0aW9uID0gZ2V0QW5pbWF0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXREdXJhdGlvbiA9IGdldER1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRMZW5ndGggPSBnZXRMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldFN0eWxlID0gZ2V0U3R5bGU7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRMZW5ndGgoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzZWxmLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0aCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UGF0aExlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5lJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRMaW5lTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RHVyYXRpb24obGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQobGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBnZXRMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihsZW5ndGggKiBzZWxmLm1zUHJVbml0LCBzZWxmLm1heE1zKSArICdtcyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QW5pbWF0aW9uKGR1cmF0aW9uLCBzaG91bGRSZXBlYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChkdXJhdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSBnZXREdXJhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGVhdCA9IHNob3VsZFJlcGVhdCA/ICdpbmZpbml0ZScgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2Rhc2ggJyArIGR1cmF0aW9uICsgJyBsaW5lYXIgZm9yd2FyZHMgJyArIHJlcGVhdDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRQYXRoTGVuZ3RoKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmVsLmdldFRvdGFsTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TGluZUxlbmd0aCgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IE1hdGguYWJzKHNlbGYuZGF0YVswXSAtIHNlbGYuZGF0YVsyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBNYXRoLmFicyhzZWxmLmRhdGFbMV0gLSBzZWxmLmRhdGFbM10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coeCwgMikgKyBNYXRoLnBvdyh5LCAyKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U3R5bGUoY29sb3IsIHNob3VsZEFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JBdHRyID0gdHlwZSA9PSAnbGluZScgPyAnc3Ryb2tlJyA6ICdmaWxsJztcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZVtjb2xvckF0dHJdID0gY29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBbmltYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBnZXRBbmltYXRpb24oZ2V0RHVyYXRpb24oZ2V0TGVuZ3RoKCkpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlWyctd2Via2l0LWFuaW1hdGlvbiddID0gYW5pbWF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZVsnYW5pbWF0aW9uJ10gPSBhbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdMaW5lR3JvdXAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaW5lR3JvdXA7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBMaW5lKGxpbmVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBsaW5lRGF0YS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBMaW5lR3JvdXAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxTdXBlckNvbnN0cnVjdG9yKHRoaXMsIGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmVzRGF0YUFyciA9IHRoaXMuZGF0YS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIF8uZWFjaChsaW5lc0RhdGFBcnIsIGZ1bmN0aW9uIChsaW5lRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubGluZXMucHVzaChuZXcgTGluZShsaW5lRGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdQYXRoJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gUGF0aCgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbFN1cGVyQ29uc3RydWN0b3IodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1N2Z1BhcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBTVkdQYXJ0KGtleSwgcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIHByb3BzID0gcHJvcHMgfHwge307XHJcbiAgICAgICAgICAgICAgICBwcm9wcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBfLmFzc2lnbih0aGlzLCBwcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=