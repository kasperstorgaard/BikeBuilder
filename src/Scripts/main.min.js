!function(){"use strict";angular.module("bikeBuilder",["mgcrea.ngStrap"]).value("version","0.1")}(),function(){"use strict";angular.module("bikeBuilder").controller("FlowCtrl",["$scope","$rootScope","Parts","SvgParts",function($scope,$rootScope,Parts,SvgParts){function partDataFetched(data){ctrl.partSections=data}function partSelected(event,sectionName,selectedPart,selectedVariant){updateSvgPart(selectedVariant),Parts.updateSelectedPart(sectionName,selectedPart),$rootScope.$broadcast("update:selected",sectionName,selectedPart,selectedVariant)}function updateSvgPart(selectedVariant){selectedVariant.colors&&_.each(selectedVariant.colors,function(value,key){SvgParts.updateOne(key,{color:value})})}var ctrl=this;$scope.$on("part:selected",partSelected),Parts.fetch().then(partDataFetched)}])}(),function(){"use strict";angular.module("bikeBuilder").controller("PreviewCtrl",["SvgParts","DataCollection","$scope",function(SvgParts,DataCollection,$scope){function getPart(key){return ctrl.SvgDataReady?SvgParts.getOne(key):{}}function dataFetched(){_.forEach(svgData.getAll(),function(svgDataPart,key){SvgParts.add(key,svgDataPart)}),ctrl.SvgDataReady=!0}function updateActiveSvgPart(event,key){SvgParts.updateAll({selected:!1}),SvgParts.updateOne(key,{selected:!0})}var ctrl=this;ctrl.getPart=getPart,$scope.$on("svgPart:clicked",updateActiveSvgPart);var svgData=new DataCollection({filePath:"scripts/svgdata.json",isAsync:!0});svgData.fetch().then(dataFetched)}])}(),function(){"use strict";angular.module("bikeBuilder").controller("SummaryCtrl",["$scope","Parts",function($scope,Parts){function partDataFetched(data){ctrl.partSections=data}function updateSelectedParts(event,sectionName,selectedPart,selectedVariant){ctrl.selectedPartSections[sectionName]={selectedPart:selectedPart,selectedVariant:selectedVariant}}var ctrl=this;ctrl.selectedPartSections={},Parts.fetch().then(partDataFetched),$scope.$on("update:selected",updateSelectedParts)}])}(),function(){"use strict";angular.module("bikeBuilder").directive("part",function(){return{restrict:"A",scope:{model:"=part",sectionName:"="},replace:!0,templateUrl:"part.tpl.html",link:function(scope){function updateSelectedPart(){scope.$emit("part:selected",scope.sectionName,scope.model,scope.selectedVariant)}function setSelectedVariant(variant){scope.selectedVariant=variant,scope.model.selected&&updateSelectedPart()}scope.updateSelectedPart=updateSelectedPart,scope.selectedVariant=angular.copy(scope.model.variants[0]),scope.setSelectedVariant=setSelectedVariant}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("partSection",["$rootScope",function(){return{restrict:"A",scope:{name:"=partSection",type:"=partType",parts:"="},replace:!0,templateUrl:"part.section.tpl.html",link:function(){}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("scrollBind",["$q","scroll",function($q,scroll){return{restrict:"A",scope:!0,link:function(scope,element,attrs){function bindValuesToScroll(scopeKeysToUpdate){0!==scopeKeysToUpdate.length&&scroll.bind(getUpdateValuesFn(scopeKeysToUpdate))}function getUpdateValuesFn(scopeKeysToUpdate){return function(scrollTop){_.each(scopeKeysToUpdate,function(scopeKey){scope[scopeKey]=scrollTop}),scope.$apply()}}var callback;if(_.isFunction(attrs.scollBind))return callback=attrs.scrollBind,void scroll.bind(callback);if(attrs.updateScopeVals){var updateScopeVals=attrs.updateScopeVals.replace(/'/gi,'"');try{var json=JSON.parse(updateScopeVals);bindValuesToScroll(json)}catch(e){bindValuesToScroll([updateScopeVals])}}}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("selectPartButton",function(){return{restrict:"A",scope:!0,link:function(scope){function selectPart(){}scope.selectPart=selectPart}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("showSpinner",["$templateCache","$compile",function($templateCache,$compile){var idPostFix=0;return{restrict:"A",scope:!0,priority:1,link:function(scope,element,attrs){function getBool(attr){return!_.isUndefined(attr)&&"true"===attr.toString().toLowerCase()}function getSpinnerElement(){var tpl=$templateCache.get("spinner.tpl.html"),linkFn=$compile(tpl);return linkFn(scope)}function insertBeforeElement(insertEl,siblingEl){var parentEl=siblingEl.parentNode;parentEl.insertBefore(insertEl,siblingEl)}function removeElement(el){el.remove()}var showSpinner=getBool(attrs.showSpinner);if(showSpinner!==!1){scope.spinnerKeyPostFix=idPostFix,idPostFix++;var spinnerElement=getSpinnerElement();insertBeforeElement(spinnerElement[0],element[0]);var removeObserve=attrs.$observe("showSpinner",function(val){getBool(val)||(removeElement(spinnerElement),removeObserve())})}}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("summaryItem",function(){return{restrict:"A",scope:{selectedPart:"=summaryItem",sectionName:"=",selectedVariant:"="},replace:!0,templateUrl:"summary.item.tpl.html"}})}(),function(){"use strict";angular.module("bikeBuilder").directive("variantPicker",function(){return{restrict:"A",replace:!0,scope:{variants:"=variantPicker",selectedVariant:"=",basePartImgUrl:"@"},templateUrl:"variant.picker.tpl.html"}})}(),function(){"use strict";angular.module("bikeBuilder").service("Parts",["DataCollection",function(DataCollection){function Parts(){DataCollection.apply(this,arguments)}function processData(data){return data}function updateSelectedPart(sectionName,selectedPart){if(!sectionName||!selectedPart)return null;var section=this.items[sectionName];return section?(_.each(section.parts,function(part){part.selected=part.name==selectedPart.name}),this.items):null}return Parts.prototype=new DataCollection,Parts.prototype.processData=processData,Parts.prototype.updateSelectedPart=updateSelectedPart,new Parts({filePath:"scripts/partdata.json",isAsync:!0})}])}(),function(){"use strict";angular.module("bikeBuilder").service("scroll",["Bindable",function(Bindable){function attachScroll(){throttledHandleScroll=_.throttle(handleScroll,SCROLL_THROTTLE),window.addEventListener("scroll",throttledHandleScroll)}function detachScroll(){window.removeEventListener("scroll",throttledHandleScroll)}function getScrollTop(){var scrollTop=window.document.documentElement.scrollTop;return 0===scrollTop&&(scrollTop=window.document.body.scrollTop),scrollTop}function handleScroll(){var scrollTop=getScrollTop();base.invoke(scrollTop)}var base=new Bindable;base.onAttach=attachScroll,base.onDetach=detachScroll;var throttledHandleScroll,SCROLL_THROTTLE=100;return{bind:base.bind}}])}(),function(){"use strict";angular.module("bikeBuilder").service("SvgParts",["DataCollection","utils","SvgPart","Path","LineGroup",function(DataCollection,utils,SvgPart,Path,LineGroup){function SVGParts(){DataCollection.apply(this,arguments)}function addSvgClass(key,props){if(!props.data)return null;var Class=getSvgClass(props.type);return Class?base.add.apply(this,[key,new Class(key,props)]):null}function getSvgClass(key){return classes[key]||null}var base=DataCollection.prototype;SVGParts.prototype=new DataCollection,SVGParts.prototype.add=addSvgClass,utils.inherit(Path,SvgPart),utils.inherit(LineGroup,SvgPart);var classes={Path:Path,LineGroup:LineGroup};return new SVGParts({items:{},isAsync:!1})}])}(),function(){"use strict";angular.module("bikeBuilder").service("utils",function(){function inherit(child,base,props){return child.prototype=_.create(base.prototype,_.assign({_super:base.prototype,callSuperConstructor:function(ctx,args){base.apply(ctx,args)},constructor:child},props)),child}return{inherit:inherit}})}(),angular.module("bikeBuilder").run(["$templateCache",function($templateCache){$templateCache.put("line.group.tpl.html",'<g id={{model.key}} ng-click="handleClicked(model.key)" ng-class="[model.key, model.active ? \'active\' : \'\', model.color ? \'has-color\' : \'\']">\r\n    <line svg-line ng-repeat="line in model.lines" color="model.color" line-data="line.data"></line>\r\n</g>'),$templateCache.put("line.tpl.html",'<line fill="none" ng-style="style"\r\n      ng-attr-x1="{{data[0]}}" ng-attr-y1="{{data[1]}}" ng-attr-x2="{{data[2]}}" ng-attr-y2="{{data[3]}}"\r\n      ng-attr-stroke-dasharray="{{pathLength}}" ng-attr-stroke-dashoffset="{{pathLength}}" />\r\n'),$templateCache.put("part.section.tpl.html",'<div class="part-section">\r\n    <h2 class="part-section-name">{{name}}</h2>\r\n    <div part="part" section-name="name" ng-repeat="part in parts">\r\n    </div>\r\n</div>'),$templateCache.put("part.tpl.html",'<div class="part">\r\n    <h3 class="part-name">{{model.name}}</h3>\r\n    <div class="btn-group variant-buttons">\r\n        <a class="btn btn-default variant-button" ng-class="{\'active\': variant.name == selectedVariant.name }" ng-click="setSelectedVariant(variant)" ng-repeat="variant in model.variants">{{variant.name}}</a>\r\n    </div>\r\n    <div variant-picker="model.variants" data-selected-variant="selectedVariant" data-base-part-img-url="content/images/parts"></div>\r\n    <a class="btn part-select-btn btn-lg btn-default" ng-click="updateSelectedPart()" ng-class="{\'active\': model.selected}">{{model.selected ? \'Selected\' : \'Select this part\'}}</a>\r\n</div>'),$templateCache.put("path.tpl.html",'<path id={{model.key}} fill="none" ng-click="handleClicked(model.key)" ng-class="[model.type, model.selected ? \'selected\':\'\', model.color ? \'has-color\':\'\']"\r\n      ng-style="style" ng-attr-stroke-dasharray="{{pathLength}}" ng-attr-stroke-dashoffset="{{pathLength}}" ng-attr-d="{{model.data}}" />'),$templateCache.put("spinner.tpl.html",'<div class="spinner">\r\n    <h3 class="load-text">Loading...</h3>\r\n    <?xml version="1.0" encoding="utf-8" ?>\r\n    <svg id="spinner-svg{{spinnerKeyPostFix}}" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n         viewBox="204 89.3 243.3 243.3" enable-background="new 204 89.3 243.3 243.3" xml:space="preserve">\r\n    <g id="spinner-wrapper{{spinnerKeyPostFix}}"><g id="spinner-wheel{{spinnerKeyPostFix}}">\r\n    <path id="spinner-rim{{spinnerKeyPostFix}}" fill="none" d="M259.6,125.2c50.2-39,119.1-27.8,155.4,20.8c36.2,48.5,22.1,114.4-24.1,153.6\r\n		c-29.5,25-108.9,36.5-153.5-20.9C206.1,238.4,213.9,160.7,259.6,125.2z M248.2,270.7c38.3,49.2,90.8,49.7,133.1,18\r\n		s53.2-92.4,22.1-134c-31.1-41.7-86.4-55.7-134.8-16.8C224,173.7,221.3,236.1,248.2,270.7z" />\r\n    <g id="spinner-spokes{{spinnerKeyPostFix}}">\r\n    <line fill="none" x1="416.9" y1="180.9" x2="338.7" y2="203.9" />\r\n    <line fill="none" x1="338.7" y1="203.9" x2="386" y2="136.3" />\r\n    <line fill="none" x1="398.7" y1="150.7" x2="343.2" y2="215.1" />\r\n    <line fill="none" x1="409.6" y1="164.1" x2="329.2" y2="199.8" />\r\n    <line fill="none" x1="420.1" y1="199.8" x2="343.2" y2="215.1" />\r\n    <line fill="none" x1="420.9" y1="217.9" x2="339.8" y2="221.9" />\r\n    <line fill="none" x1="416.9" y1="236.4" x2="340.9" y2="207.4" />\r\n    <line fill="none" x1="410.5" y1="253.9" x2="342.3" y2="211" />\r\n    <line fill="none" x1="401" y1="269.3" x2="334.2" y2="226.4" />\r\n    <line fill="none" x1="388.3" y1="282.9" x2="332" y2="227.6" />\r\n    <line fill="none" x1="356.1" y1="303.2" x2="339.8" y2="221.9" />\r\n    <line fill="none" x1="340.9" y1="221.9" x2="373.8" y2="293.9" />\r\n    <line fill="none" x1="320.9" y1="310.5" x2="322.2" y2="226.4" />\r\n    <line fill="none" x1="300.7" y1="307.8" x2="327" y2="227.6" />\r\n    <line fill="none" x1="282.3" y1="300.4" x2="332" y2="227.6" />\r\n    <line fill="none" x1="268.1" y1="291.1" x2="315.4" y2="211" />\r\n    <line fill="none" x1="254.2" y1="277.8" x2="315.4" y2="220.5" />\r\n    <line fill="none" x1="244.1" y1="264.8" x2="319" y2="224" />\r\n    <line fill="none" x1="319" y1="224" x2="338.7" y2="308.6" />\r\n    <line fill="none" x1="235.5" y1="246.3" x2="319.5" y2="226.4" />\r\n    <line fill="none" x1="231.8" y1="229.5" x2="319" y2="204.3" />\r\n    <line fill="none" x1="231.1" y1="209.4" x2="316.8" y2="207.4" />\r\n    <line fill="none" x1="234.3" y1="190.7" x2="316" y2="217.9" />\r\n    <line fill="none" x1="241" y1="172.5" x2="315.5" y2="215.1" />\r\n    <line fill="none" x1="252.2" y1="154.4" x2="319" y2="204.3" />\r\n    <line fill="none" x1="264.8" y1="141.1" x2="323.8" y2="200.8" />\r\n    <line fill="none" x1="296.2" y1="121.4" x2="319.5" y2="204.1" />\r\n    <line fill="none" x1="315.4" y1="116" x2="330.3" y2="199.3" />\r\n    <line fill="none" x1="334.7" y1="116" x2="338.7" y2="203.9" />\r\n    <line fill="none" x1="352.3" y1="118.2" x2="319" y2="204.3" />\r\n    <line fill="none" x1="370.2" y1="125.5" x2="330.3" y2="199.3" />\r\n            </g>\r\n    <path id="spinner-tire{{spinnerKeyPostFix}}" fill="none" d="M259.6,125.2c50.2-39,119.1-27.8,155.4,20.8c36.2,48.5,22.1,114.4-24.1,153.6\r\n		c-29.5,25-108.9,36.5-153.5-20.9C206.1,238.4,213.9,160.7,259.6,125.2z M231.1,285.9c35.4,52.1,115,53.5,162.8,19.5\r\n		c48.2-34.3,65.4-116.9,26.1-164.1C378.8,91.6,318,73.1,252.2,121.5C208.4,153.6,191.6,227.6,231.1,285.9z" />\r\n    <path id="spinner-hub{{spinnerKeyPostFix}}" fill="none" d="M315.4,213.7c0-2.3,0.7-13.9,13.5-13.9c7.4,0,13.5,6.2,13.5,13.9s-6.1,13.9-13.6,13.9\r\n		C321.4,227.6,315.4,221.5,315.4,213.7z M323,218l-4.1,0.6l3.4,3.2L323,218z M333.8,216.9l0.7,4.1l3.1-3.5L333.8,216.9z M328,219.9\r\n		l-1.3,4l4.3-0.7L328,219.9z M318.7,211.2l-0.4,4.1l3.9-2.5L318.7,211.2z M323.9,208.3l1.3-3.9l-4.4,1.6L323.9,208.3z M334.5,205.7\r\n		l-5.3-2.9l1.7,4.3L334.5,205.7z M334.8,211.3l4,1.1l-1.8-4.3L334.8,211.3z" />\r\n        </g>\r\n        </g>\r\n    </svg>\r\n</div>'),$templateCache.put("summary.item.tpl.html",'<li ng-show="selectedPart" class="summary-item">\r\n    <span class="summary-section-name">{{sectionName}}:&nbsp;</span>\r\n    <span class="summary-part-name">{{selectedPart.name}}</span>\r\n    <span class="summary-variant-color" ng-repeat="color in selectedVariant.colors" ng-style="{\'background\':color}">&nbsp;</span>\r\n</li>'),$templateCache.put("variant.picker.tpl.html",'<div class="variant-picker">\r\n    <div class="images-stack">\r\n        <img class="variant-image" ng-src="{{basePartImgUrl + \'/\' + variant.imageUrl}}" ng-class="{\'selected\': variant.name == selectedVariant.name }" ng-repeat="variant in variants" />\r\n    </div>\r\n</div>')}]),function(){"use strict";angular.module("bikeBuilder").directive("svgLineGroup",function(){return{restrict:"A",replace:!0,scope:{model:"="},templateNamespace:"svg",templateUrl:"line.group.tpl.html",link:function(scope){function handleClicked(key){scope.$emit("svgPart:clicked",key)}scope.handleClicked=handleClicked}}})}(),function(){"use strict";angular.module("bikeBuilder").directive("svgLine",["SvgAnimationDirective",function(SvgAnimationDirective){return{restrict:"A",replace:!0,scope:{color:"=",data:"=lineData"},templateNamespace:"svg",templateUrl:"line.tpl.html",link:function(scope,element){function loadAnimation(){scope.pathLength=base.getLength(),scope.style=base.getStyle(scope.color,!0),scope.$apply()}function updateColor(){scope.style=base.getStyle(scope.color,!1)}var el=element[0],base=new SvgAnimationDirective(el,"line",{msPrUnit:20,data:scope.data});scope.$on("svgRootLoaded",loadAnimation),scope.$watch("color",updateColor)}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("svgPath",["SvgAnimationDirective",function(SvgAnimationDirective){return{restrict:"A",replace:!0,scope:{model:"="},templateNamespace:"svg",templateUrl:"path.tpl.html",link:function(scope,element){function handleClicked(key){scope.$emit("svgPart:clicked",key)}function loadAnimation(){scope.pathLength=base.getLength(),scope.style=base.getStyle(scope.model.color,!0),scope.$apply()}function updateColor(){scope.style=base.getStyle(scope.model.color,!1)}var el=element[0],base=new SvgAnimationDirective(el,"path",{data:scope.model.data});scope.$on("svgRootLoaded",loadAnimation),scope.handleClicked=handleClicked,scope.$watch("model.color",updateColor)}}}])}(),function(){"use strict";angular.module("bikeBuilder").directive("svgRoot",function(){return{restrict:"A",scope:!0,link:function(scope,element){var el=element[0];el.addEventListener("load",function(){scope.$broadcast("svgRootLoaded"),scope.svgRootLoaded=!0,scope.$apply()})}}})}(),function(){"use strict";angular.module("bikeBuilder").service("Bindable",function(){return function(){function bind(callback){self._callbacks.push(callback);var index=self._callbacks.length-1;return 0===index&&self.onAttach(),self.onBound(),function(){self._callbacks.splice(index,1),self.onUnBound(),0===self._callbacks.length&&self.onDetach()}}function invoke(){var args=arguments;_.each(self._callbacks,function(callback){callback.apply(null,args)})}var self=this;this.onAttach=angular.noop,this.onBound=angular.noop,this.onUnBound=angular.noop,this.onDetach=angular.noop,this._callbacks=[],this.bind=bind,this.invoke=invoke}})}(),function(){"use strict";angular.module("bikeBuilder").factory("DataCollection",["$q","$timeout","$http",function($q,$timeout,$http){function DataCollection(options){options=options||{},this.isAsync=_.isUndefined(options.isAsync)?!1:options.isAsync,this.items=options.items||{},this.fetched=!1,this.fetching=!1,this.filePath=options.filePath}function fetch(){if(!this.isAsync)return null;var self=this;return this.fetchedDfd=this.fetchedDfd||$q.defer(),this.fetched?(this.fetchedDfd=$q.defer(),this.fetchedDfd.resolve()):this.fetching||(this.fetching=!0,$http.get(this.filePath).success(function(data){self.fetching=!1,self.fetched=!0,self.items=self.processData(data),self.fetchedDfd.resolve(self.items)})),this.fetchedDfd.promise}function processData(data){return data}function add(key,item){if(this.isAsync&&!this.fetched)return null;if(!key)return null;var existing=this.getOne(key);return existing?null:(this.items[key]=item,this.items)}function addAll(collection){var self=this;return this.isAsync&&!this.fetched?null:collection&&0!==_.size(collection)?(_.forEach(collection,function(item,key){self.add(key,item)}),this.items):null}function getOne(key){if(this.isAsync&&!this.fetched)return null;var item=this.items[key];return item?item:null}function getAll(){return this.isAsync&&!this.fetched?null:this.items}function updateOne(key,props){if(this.isAsync&&!this.fetched)return null;var item=this.getOne(key);return item?_.assign(item,props):null}function updateAll(props){return this.isAsync&&!this.fetched?null:(_.each(this.items,function(item){_.assign(item,props)}),this.items)}return DataCollection.prototype.fetch=fetch,DataCollection.prototype.getOne=getOne,DataCollection.prototype.getAll=getAll,DataCollection.prototype.updateOne=updateOne,DataCollection.prototype.updateAll=updateAll,DataCollection.prototype.processData=processData,DataCollection.prototype.add=add,DataCollection.prototype.addAll=addAll,DataCollection}])}(),function(){"use strict";angular.module("bikeBuilder").factory("SvgAnimationDirective",function(){return function(el,type,options){function getLength(){switch(self.type){case"path":return getPathLength();case"line":return getLineLength();default:return null}}function getDuration(length){return _.isUndefined(length)&&(length=getLength()),Math.min(length*self.msPrUnit,self.maxMs)+"ms"}function getAnimation(duration,shouldRepeat){_.isUndefined(duration)&&(duration=getDuration());var repeat=shouldRepeat?"infinite":"";return"dash "+duration+" linear forwards "+repeat}function getPathLength(){return self.el.getTotalLength()}function getLineLength(){var x=Math.abs(self.data[0]-self.data[2]),y=Math.abs(self.data[1]-self.data[3]);return Math.sqrt(Math.pow(x,2)+Math.pow(y,2))}function getStyle(color,shouldAnimate){var style={},colorAttr="line"==type?"stroke":"fill";if(style[colorAttr]=color,shouldAnimate){var animation=getAnimation(getDuration(getLength()),!1);style["-webkit-animation"]=animation,style.animation=animation}return style}var self=this;options=options||{},this.el=el,this.type=type,this.data=options.data||{},this.msPrUnit=options.msPrUnit||4.16,this.maxMs=options.maxMs||1e4,this.getAnimation=getAnimation,this.getDuration=getDuration,this.getLength=getLength,this.getStyle=getStyle}})}(),function(){"use strict";angular.module("bikeBuilder").service("LineGroup",function(){function Line(lineData){this.data=lineData.split(",")}function LineGroup(){this.callSuperConstructor(this,arguments);var linesDataArr=this.data.split("|");this.lines=[];var self=this;_.each(linesDataArr,function(lineData){self.lines.push(new Line(lineData))})}return LineGroup})}(),function(){"use strict";angular.module("bikeBuilder").service("Path",function(){return function(){this.callSuperConstructor(this,arguments)}})}(),function(){"use strict";angular.module("bikeBuilder").service("SvgPart",function(){return function(key,props){props=props||{},props.key=key,_.assign(this,props)}})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb250cm9sbGVycy9mbG93LmN0cmwuanMiLCJjb250cm9sbGVycy9wcmV2aWV3LmN0cmwuanMiLCJjb250cm9sbGVycy9zdW1tYXJ5LmN0cmwuanMiLCJkaXJlY3RpdmVzL3BhcnQuanMiLCJkaXJlY3RpdmVzL3BhcnQuc2VjdGlvbi5qcyIsImRpcmVjdGl2ZXMvc2Nyb2xsLmJpbmQuanMiLCJkaXJlY3RpdmVzL3NlbGVjdC5wYXJ0LmJ1dHRvbi5qcyIsImRpcmVjdGl2ZXMvc2hvdy5zcGlubmVyLmpzIiwiZGlyZWN0aXZlcy9zdW1tYXJ5Lml0ZW0uanMiLCJkaXJlY3RpdmVzL3ZhcmlhbnQucGlja2VyLmpzIiwic2VydmljZXMvcGFydHMuanMiLCJzZXJ2aWNlcy9zY3JvbGwuanMiLCJzZXJ2aWNlcy9zdmcucGFydHMuanMiLCJzZXJ2aWNlcy91dGlscy5qcyIsInRlbXBsYXRlcy90ZW1wbGF0ZXMuanMiLCJkaXJlY3RpdmVzL3N2Zy9saW5lLmdyb3VwLmpzIiwiZGlyZWN0aXZlcy9zdmcvbGluZS5qcyIsImRpcmVjdGl2ZXMvc3ZnL3BhdGguanMiLCJkaXJlY3RpdmVzL3N2Zy9zdmcucm9vdC5qcyIsInNlcnZpY2VzL2Jhc2UvQmluZGFibGUuanMiLCJzZXJ2aWNlcy9iYXNlL0RhdGFDb2xsZWN0aW9uLmpzIiwic2VydmljZXMvYmFzZS9TdmdBbmltYXRpb25EaXJlY3RpdmUuanMiLCJzZXJ2aWNlcy9iYXNlL3N2Zy9MaW5lR3JvdXAuanMiLCJzZXJ2aWNlcy9iYXNlL3N2Zy9QYXRoLmpzIiwic2VydmljZXMvYmFzZS9zdmcvU3ZnUGFydC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQUEsbUJBQ0EsTUFBQSxVQUFBLFVDSEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFdBQUEsWUFBQSxTQUFBLGFBQUEsUUFBQSxXQUFBLFNBQUEsT0FBQSxXQUFBLE1BQUEsVUFTQSxRQUFBLGlCQUFBLE1BQ0EsS0FBQSxhQUFBLEtBR0EsUUFBQSxjQUFBLE1BQUEsWUFBQSxhQUFBLGlCQUNBLGNBQUEsaUJBQ0EsTUFBQSxtQkFBQSxZQUFBLGNBQ0EsV0FBQSxXQUFBLGtCQUFBLFlBQUEsYUFBQSxpQkFHQSxRQUFBLGVBQUEsaUJBQ0EsZ0JBQUEsUUFDQSxFQUFBLEtBQUEsZ0JBQUEsT0FBQSxTQUFBLE1BQUEsS0FDQSxTQUFBLFVBQUEsS0FBQSxNQUFBLFVBckJBLEdBQUEsTUFBQSxJQUVBLFFBQUEsSUFBQSxnQkFBQSxjQUVBLE1BQUEsUUFBQSxLQUFBLHVCQ1JBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxXQUFBLGVBQUEsV0FBQSxpQkFBQSxTQUFBLFNBQUEsU0FBQSxlQUFBLFFBWUEsUUFBQSxTQUFBLEtBQ0EsTUFBQSxNQUFBLGFBR0EsU0FBQSxPQUFBLFFBR0EsUUFBQSxlQUNBLEVBQUEsUUFBQSxRQUFBLFNBQUEsU0FBQSxZQUFBLEtBQ0EsU0FBQSxJQUFBLElBQUEsZUFFQSxLQUFBLGNBQUEsRUFHQSxRQUFBLHFCQUFBLE1BQUEsS0FDQSxTQUFBLFdBQUEsVUFBQSxJQUNBLFNBQUEsVUFBQSxLQUFBLFVBQUEsSUEzQkEsR0FBQSxNQUFBLElBQ0EsTUFBQSxRQUFBLFFBRUEsT0FBQSxJQUFBLGtCQUFBLG9CQUVBLElBQUEsU0FBQSxHQUFBLGlCQUFBLFNBQUEsdUJBQUEsU0FBQSxHQUVBLFNBQUEsUUFBQSxLQUFBLG1CQ1hBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxXQUFBLGVBQUEsU0FBQSxRQUFBLFNBQUEsT0FBQSxPQVdBLFFBQUEsaUJBQUEsTUFDQSxLQUFBLGFBQUEsS0FHQSxRQUFBLHFCQUFBLE1BQUEsWUFBQSxhQUFBLGlCQUNBLEtBQUEscUJBQUEsY0FBQSxhQUFBLGFBQUEsZ0JBQUEsaUJBZkEsR0FBQSxNQUFBLElBRUEsTUFBQSx3QkFFQSxNQUFBLFFBQUEsS0FBQSxpQkFFQSxPQUFBLElBQUEsa0JBQUEsMkJDVkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsT0FBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQ0EsTUFBQSxRQUNBLFlBQUEsS0FFQSxTQUFBLEVBQ0EsWUFBQSxnQkFDQSxLQUFBLFNBQUEsT0FNQSxRQUFBLHNCQUNBLE1BQUEsTUFBQSxnQkFBQSxNQUFBLFlBQUEsTUFBQSxNQUFBLE1BQUEsaUJBR0EsUUFBQSxvQkFBQSxTQUNBLE1BQUEsZ0JBQUEsUUFDQSxNQUFBLE1BQUEsVUFDQSxxQkFaQSxNQUFBLG1CQUFBLG1CQUNBLE1BQUEsZ0JBQUEsUUFBQSxLQUFBLE1BQUEsTUFBQSxTQUFBLElBQ0EsTUFBQSxtQkFBQSwwQkNmQSxXQUNBLFlBRUEsU0FBQSxPQUFBLGVBQ0EsVUFBQSxlQUFBLGFBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxPQUNBLEtBQUEsZUFDQSxLQUFBLFlBQ0EsTUFBQSxLQUVBLFNBQUEsRUFDQSxZQUFBLHdCQUNBLEtBQUEsb0JDZEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsY0FBQSxLQUFBLFNBQUEsU0FBQSxHQUFBLFFBQ0EsT0FDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsT0FvQkEsUUFBQSxvQkFBQSxtQkFDQSxJQUFBLGtCQUFBLFFBR0EsT0FBQSxLQUFBLGtCQUFBLG9CQUdBLFFBQUEsbUJBQUEsbUJBQ0EsTUFBQSxVQUFBLFdBQ0EsRUFBQSxLQUFBLGtCQUFBLFNBQUEsVUFDQSxNQUFBLFVBQUEsWUFFQSxNQUFBLFVBL0JBLEdBQUEsU0FDQSxJQUFBLEVBQUEsV0FBQSxNQUFBLFdBR0EsTUFGQSxVQUFBLE1BQUEsZUFDQSxRQUFBLEtBQUEsU0FJQSxJQUFBLE1BQUEsZ0JBQUEsQ0FHQSxHQUFBLGlCQUFBLE1BQUEsZ0JBQUEsUUFBQSxNQUFBLElBRUEsS0FDQSxHQUFBLE1BQUEsS0FBQSxNQUFBLGdCQUNBLG9CQUFBLE1BQ0EsTUFBQSxHQUNBLG9CQUFBLDRCQ3hCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxtQkFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQUEsRUFDQSxLQUFBLFNBQUEsT0FLQSxRQUFBLGVBSEEsTUFBQSxXQUFBLGtCQ1RBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLGVBQUEsaUJBQUEsV0FBQSxTQUFBLGVBQUEsVUFDQSxHQUFBLFdBQUEsQ0FFQSxRQUNBLFNBQUEsSUFDQSxPQUFBLEVBQ0EsU0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUEsT0FxQkEsUUFBQSxTQUFBLE1BQ0EsT0FBQSxFQUFBLFlBQUEsT0FBQSxTQUFBLEtBQUEsV0FBQSxjQUdBLFFBQUEscUJBQ0EsR0FBQSxLQUFBLGVBQUEsSUFBQSxvQkFDQSxPQUFBLFNBQUEsSUFDQSxPQUFBLFFBQUEsT0FHQSxRQUFBLHFCQUFBLFNBQUEsV0FDQSxHQUFBLFVBQUEsVUFBQSxVQUNBLFVBQUEsYUFBQSxTQUFBLFdBR0EsUUFBQSxlQUFBLElBQ0EsR0FBQSxTQXBDQSxHQUFBLGFBQUEsUUFBQSxNQUFBLFlBQ0EsSUFBQSxlQUFBLEVBQUEsQ0FJQSxNQUFBLGtCQUFBLFVBQ0EsV0FFQSxJQUFBLGdCQUFBLG1CQUNBLHFCQUFBLGVBQUEsR0FBQSxRQUFBLEdBRUEsSUFBQSxlQUFBLE1BQUEsU0FBQSxjQUFBLFNBQUEsS0FDQSxRQUFBLE9BQ0EsY0FBQSxnQkFDQSw0QkN6QkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsY0FBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLE9BQ0EsYUFBQSxlQUNBLFlBQUEsSUFDQSxnQkFBQSxLQUVBLFNBQUEsRUFDQSxZQUFBLDhCQ1pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLGdCQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsU0FBQSxFQUNBLE9BQ0EsU0FBQSxpQkFDQSxnQkFBQSxJQUNBLGVBQUEsS0FFQSxZQUFBLGdDQ1pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFNBQUEsaUJBQUEsU0FBQSxnQkFDQSxRQUFBLFNBQ0EsZUFBQSxNQUFBLEtBQUEsV0FVQSxRQUFBLGFBQUEsTUFDQSxNQUFBLE1BR0EsUUFBQSxvQkFBQSxZQUFBLGNBQ0EsSUFBQSxjQUFBLGFBQ0EsTUFBQSxLQUdBLElBQUEsU0FBQSxLQUFBLE1BQUEsWUFDQSxPQUFBLFVBSUEsRUFBQSxLQUFBLFFBQUEsTUFBQSxTQUFBLE1BQ0EsS0FBQSxTQUFBLEtBQUEsTUFBQSxhQUFBLE9BR0EsS0FBQSxPQVBBLEtBZkEsTUFKQSxPQUFBLFVBQUEsR0FBQSxnQkFDQSxNQUFBLFVBQUEsWUFBQSxZQUNBLE1BQUEsVUFBQSxtQkFBQSxtQkFFQSxHQUFBLFFBQUEsU0FBQSx3QkFBQSxTQUFBLFVDWEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsVUFBQSxXQUFBLFNBQUEsVUFjQSxRQUFBLGdCQUNBLHNCQUFBLEVBQUEsU0FBQSxhQUFBLGlCQUNBLE9BQUEsaUJBQUEsU0FBQSx1QkFHQSxRQUFBLGdCQUNBLE9BQUEsb0JBQUEsU0FBQSx1QkFHQSxRQUFBLGdCQUNBLEdBQUEsV0FBQSxPQUFBLFNBQUEsZ0JBQUEsU0FJQSxPQUhBLEtBQUEsWUFDQSxVQUFBLE9BQUEsU0FBQSxLQUFBLFdBRUEsVUFHQSxRQUFBLGdCQUNBLEdBQUEsV0FBQSxjQUVBLE1BQUEsT0FBQSxXQWpDQSxHQUFBLE1BQUEsR0FBQSxTQUNBLE1BQUEsU0FBQSxhQUNBLEtBQUEsU0FBQSxZQUVBLElBQ0EsdUJBREEsZ0JBQUEsR0FHQSxRQUNBLEtBQUEsS0FBQSxZQ1pBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFlBQUEsaUJBQUEsUUFBQSxVQUFBLE9BQUEsWUFBQSxTQUFBLGVBQUEsTUFBQSxRQUFBLEtBQUEsV0FDQSxRQUFBLFlBQ0EsZUFBQSxNQUFBLEtBQUEsV0FnQkEsUUFBQSxhQUFBLElBQUEsT0FDQSxJQUFBLE1BQUEsS0FDQSxNQUFBLEtBR0EsSUFBQSxPQUFBLFlBQUEsTUFBQSxLQUNBLE9BQUEsT0FJQSxLQUFBLElBQUEsTUFBQSxNQUFBLElBQUEsR0FBQSxPQUFBLElBQUEsU0FIQSxLQU1BLFFBQUEsYUFBQSxLQUNBLE1BQUEsU0FBQSxNQUFBLEtBM0JBLEdBQUEsTUFBQSxlQUFBLFNBQ0EsVUFBQSxVQUFBLEdBQUEsZ0JBQ0EsU0FBQSxVQUFBLElBQUEsWUFFQSxNQUFBLFFBQUEsS0FBQSxTQUNBLE1BQUEsUUFBQSxVQUFBLFFBRUEsSUFBQSxVQUFBLEtBQUEsS0FBQSxVQUFBLFVBRUEsT0FBQSxJQUFBLFdBQUEsU0FBQSxTQUFBLFVDakJBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLFFBQUEsV0FPQSxRQUFBLFNBQUEsTUFBQSxLQUFBLE9BU0EsTUFSQSxPQUFBLFVBQUEsRUFBQSxPQUFBLEtBQUEsVUFBQSxFQUFBLFFBQ0EsT0FBQSxLQUFBLFVBQ0EscUJBQUEsU0FBQSxJQUFBLE1BQ0EsS0FBQSxNQUFBLElBQUEsT0FFQSxZQUFBLE9BQ0EsUUFFQSxNQWZBLE9BQ0EsUUFBQSxjQ0xBLFFBQUEsT0FBQSxlQUFBLEtBQUEsaUJBQUEsU0FBQSxnQkFBQSxlQUFBLElBQUEsc0JBQUEseVFBQ0EsZUFBQSxJQUFBLGdCQUFBLHdQQUNBLGVBQUEsSUFBQSx3QkFBQSxnTEFDQSxlQUFBLElBQUEsZ0JBQUEsMnFCQUNBLGVBQUEsSUFBQSxnQkFBQSxxVEFDQSxlQUFBLElBQUEsbUJBQUEsaThIQUNBLGVBQUEsSUFBQSx3QkFBQSxnVkFDQSxlQUFBLElBQUEsMEJBQUEsOFJDUEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFVBQUEsZUFBQSxXQUNBLE9BQ0EsU0FBQSxJQUNBLFNBQUEsRUFDQSxPQUNBLE1BQUEsS0FFQSxrQkFBQSxNQUNBLFlBQUEsc0JBQ0EsS0FBQSxTQUFBLE9BS0EsUUFBQSxlQUFBLEtBQ0EsTUFBQSxNQUFBLGtCQUFBLEtBTEEsTUFBQSxjQUFBLHFCQ2JBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxVQUFBLFdBQUEsd0JBQUEsU0FBQSx1QkFDQSxPQUNBLFNBQUEsSUFDQSxTQUFBLEVBQ0EsT0FDQSxNQUFBLElBQ0EsS0FBQSxhQUVBLGtCQUFBLE1BQ0EsWUFBQSxnQkFDQSxLQUFBLFNBQUEsTUFBQSxTQVNBLFFBQUEsaUJBQ0EsTUFBQSxXQUFBLEtBQUEsWUFDQSxNQUFBLE1BQUEsS0FBQSxTQUFBLE1BQUEsT0FBQSxHQUNBLE1BQUEsU0FHQSxRQUFBLGVBQ0EsTUFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBLE9BQUEsR0FmQSxHQUFBLElBQUEsUUFBQSxHQUNBLEtBQUEsR0FBQSx1QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUFBLEtBQUEsTUFBQSxNQUVBLE9BQUEsSUFBQSxnQkFBQSxlQUNBLE1BQUEsT0FBQSxRQUFBLHFCQ2xCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxXQUFBLHdCQUFBLFNBQUEsdUJBQ0EsT0FDQSxTQUFBLElBQ0EsU0FBQSxFQUNBLE9BQ0EsTUFBQSxLQUVBLGtCQUFBLE1BQ0EsWUFBQSxnQkFDQSxLQUFBLFNBQUEsTUFBQSxTQVdBLFFBQUEsZUFBQSxLQUNBLE1BQUEsTUFBQSxrQkFBQSxLQUdBLFFBQUEsaUJBQ0EsTUFBQSxXQUFBLEtBQUEsWUFDQSxNQUFBLE1BQUEsS0FBQSxTQUFBLE1BQUEsTUFBQSxPQUFBLEdBQ0EsTUFBQSxTQUdBLFFBQUEsZUFDQSxNQUFBLE1BQUEsS0FBQSxTQUFBLE1BQUEsTUFBQSxPQUFBLEdBcEJBLEdBQUEsSUFBQSxRQUFBLEdBQ0EsS0FBQSxHQUFBLHVCQUFBLEdBQUEsUUFBQSxLQUFBLE1BQUEsTUFBQSxNQUVBLE9BQUEsSUFBQSxnQkFBQSxlQUNBLE1BQUEsY0FBQSxjQUNBLE1BQUEsT0FBQSxjQUFBLHFCQ25CQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsVUFBQSxVQUFBLFdBQ0EsT0FDQSxTQUFBLElBQ0EsT0FBQSxFQUNBLEtBQUEsU0FBQSxNQUFBLFNBQ0EsR0FBQSxJQUFBLFFBQUEsRUFDQSxJQUFBLGlCQUFBLE9BQUEsV0FDQSxNQUFBLFdBQUEsaUJBQ0EsTUFBQSxlQUFBLEVBQ0EsTUFBQSxrQkNaQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxXQUFBLFdBQ0EsTUFBQSxZQWNBLFFBQUEsTUFBQSxVQUNBLEtBQUEsV0FBQSxLQUFBLFNBQ0EsSUFBQSxPQUFBLEtBQUEsV0FBQSxPQUFBLENBT0EsT0FMQSxLQUFBLE9BQ0EsS0FBQSxXQUVBLEtBQUEsVUFFQSxXQUNBLEtBQUEsV0FBQSxPQUFBLE1BQUEsR0FFQSxLQUFBLFlBRUEsSUFBQSxLQUFBLFdBQUEsUUFDQSxLQUFBLFlBS0EsUUFBQSxVQUNBLEdBQUEsTUFBQSxTQUNBLEdBQUEsS0FBQSxLQUFBLFdBQUEsU0FBQSxVQUNBLFNBQUEsTUFBQSxLQUFBLFFBcENBLEdBQUEsTUFBQSxJQUVBLE1BQUEsU0FBQSxRQUFBLEtBQ0EsS0FBQSxRQUFBLFFBQUEsS0FDQSxLQUFBLFVBQUEsUUFBQSxLQUNBLEtBQUEsU0FBQSxRQUFBLEtBRUEsS0FBQSxjQUNBLEtBQUEsS0FBQSxLQUNBLEtBQUEsT0FBQSxhQ2RBLFdBQ0EsWUFDQSxTQUFBLE9BQUEsZUFDQSxRQUFBLGtCQUFBLEtBQUEsV0FBQSxRQUFBLFNBQUEsR0FBQSxTQUFBLE9BQ0EsUUFBQSxnQkFBQSxTQUNBLFFBQUEsWUFFQSxLQUFBLFFBQUEsRUFBQSxZQUFBLFFBQUEsVUFBQSxFQUFBLFFBQUEsUUFDQSxLQUFBLE1BQUEsUUFBQSxVQUNBLEtBQUEsU0FBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsU0FBQSxRQUFBLFNBZ0JBLFFBQUEsU0FDQSxJQUFBLEtBQUEsUUFDQSxNQUFBLEtBR0EsSUFBQSxNQUFBLElBZ0JBLE9BZkEsTUFBQSxXQUFBLEtBQUEsWUFBQSxHQUFBLFFBRUEsS0FBQSxTQUNBLEtBQUEsV0FBQSxHQUFBLFFBQ0EsS0FBQSxXQUFBLFdBQ0EsS0FBQSxXQUNBLEtBQUEsVUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxTQUFBLE1BQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxTQUFBLEVBQ0EsS0FBQSxNQUFBLEtBQUEsWUFBQSxNQUNBLEtBQUEsV0FBQSxRQUFBLEtBQUEsVUFJQSxLQUFBLFdBQUEsUUFHQSxRQUFBLGFBQUEsTUFDQSxNQUFBLE1BR0EsUUFBQSxLQUFBLElBQUEsTUFDQSxHQUFBLEtBQUEsVUFBQSxLQUFBLFFBQ0EsTUFBQSxLQUdBLEtBQUEsSUFDQSxNQUFBLEtBRUEsSUFBQSxVQUFBLEtBQUEsT0FBQSxJQUNBLE9BQUEsVUFDQSxNQUdBLEtBQUEsTUFBQSxLQUFBLEtBQ0EsS0FBQSxPQUdBLFFBQUEsUUFBQSxZQUNBLEdBQUEsTUFBQSxJQUNBLE9BQUEsTUFBQSxVQUFBLEtBQUEsUUFDQSxLQUdBLFlBQUEsSUFBQSxFQUFBLEtBQUEsYUFJQSxFQUFBLFFBQUEsV0FBQSxTQUFBLEtBQUEsS0FDQSxLQUFBLElBQUEsSUFBQSxRQUVBLEtBQUEsT0FOQSxLQVNBLFFBQUEsUUFBQSxLQUNBLEdBQUEsS0FBQSxVQUFBLEtBQUEsUUFDQSxNQUFBLEtBRUEsSUFBQSxNQUFBLEtBQUEsTUFBQSxJQUNBLE9BQUEsTUFDQSxLQUVBLEtBR0EsUUFBQSxVQUNBLE1BQUEsTUFBQSxVQUFBLEtBQUEsUUFDQSxLQUVBLEtBQUEsTUFHQSxRQUFBLFdBQUEsSUFBQSxPQUNBLEdBQUEsS0FBQSxVQUFBLEtBQUEsUUFDQSxNQUFBLEtBRUEsSUFBQSxNQUFBLEtBQUEsT0FBQSxJQUNBLE9BQUEsTUFJQSxFQUFBLE9BQUEsS0FBQSxPQUhBLEtBTUEsUUFBQSxXQUFBLE9BQ0EsTUFBQSxNQUFBLFVBQUEsS0FBQSxRQUNBLE1BRUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxTQUFBLE1BQ0EsRUFBQSxPQUFBLEtBQUEsU0FFQSxLQUFBLE9BdEdBLE1BVEEsZ0JBQUEsVUFBQSxNQUFBLE1BQ0EsZUFBQSxVQUFBLE9BQUEsT0FDQSxlQUFBLFVBQUEsT0FBQSxPQUNBLGVBQUEsVUFBQSxVQUFBLFVBQ0EsZUFBQSxVQUFBLFVBQUEsVUFDQSxlQUFBLFVBQUEsWUFBQSxZQUNBLGVBQUEsVUFBQSxJQUFBLElBQ0EsZUFBQSxVQUFBLE9BQUEsT0FFQSxxQkN2QkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsd0JBQUEsV0FDQSxNQUFBLFVBQUEsR0FBQSxLQUFBLFNBa0JBLFFBQUEsYUFDQSxPQUFBLEtBQUEsTUFDQSxJQUFBLE9BQ0EsTUFBQSxnQkFDQSxLQUFBLE9BQ0EsTUFBQSxnQkFDQSxTQUNBLE1BQUEsT0FJQSxRQUFBLGFBQUEsUUFLQSxNQUpBLEdBQUEsWUFBQSxVQUNBLE9BQUEsYUFHQSxLQUFBLElBQUEsT0FBQSxLQUFBLFNBQUEsS0FBQSxPQUFBLEtBR0EsUUFBQSxjQUFBLFNBQUEsY0FDQSxFQUFBLFlBQUEsWUFDQSxTQUFBLGNBR0EsSUFBQSxRQUFBLGFBQUEsV0FBQSxFQUNBLE9BQUEsUUFBQSxTQUFBLG9CQUFBLE9BR0EsUUFBQSxpQkFDQSxNQUFBLE1BQUEsR0FBQSxpQkFHQSxRQUFBLGlCQUNBLEdBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxLQUFBLEdBQUEsS0FBQSxLQUFBLElBQ0EsRUFBQSxLQUFBLElBQUEsS0FBQSxLQUFBLEdBQUEsS0FBQSxLQUFBLEdBQ0EsT0FBQSxNQUFBLEtBQUEsS0FBQSxJQUFBLEVBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxJQUdBLFFBQUEsVUFBQSxNQUFBLGVBQ0EsR0FBQSxVQUNBLFVBQUEsUUFBQSxLQUFBLFNBQUEsTUFHQSxJQUZBLE1BQUEsV0FBQSxNQUVBLGNBQUEsQ0FDQSxHQUFBLFdBQUEsYUFBQSxZQUFBLGNBQUEsRUFDQSxPQUFBLHFCQUFBLFVBQ0EsTUFBQSxVQUFBLFVBR0EsTUFBQSxPQWxFQSxHQUFBLE1BQUEsSUFDQSxTQUFBLFlBRUEsS0FBQSxHQUFBLEdBQ0EsS0FBQSxLQUFBLEtBQ0EsS0FBQSxLQUFBLFFBQUEsU0FFQSxLQUFBLFNBQUEsUUFBQSxVQUFBLEtBQ0EsS0FBQSxNQUFBLFFBQUEsT0FBQSxJQUVBLEtBQUEsYUFBQSxhQUNBLEtBQUEsWUFBQSxZQUNBLEtBQUEsVUFBQSxVQUNBLEtBQUEsU0FBQSxlQ2xCQSxXQUNBLFlBQ0EsU0FBQSxPQUFBLGVBQ0EsUUFBQSxZQUFBLFdBR0EsUUFBQSxNQUFBLFVBQ0EsS0FBQSxLQUFBLFNBQUEsTUFBQSxLQUdBLFFBQUEsYUFDQSxLQUFBLHFCQUFBLEtBQUEsVUFFQSxJQUFBLGNBQUEsS0FBQSxLQUFBLE1BQUEsSUFDQSxNQUFBLFFBRUEsSUFBQSxNQUFBLElBQ0EsR0FBQSxLQUFBLGFBQUEsU0FBQSxVQUNBLEtBQUEsTUFBQSxLQUFBLEdBQUEsTUFBQSxhQWRBLE1BQUEsZ0JDSkEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsT0FBQSxXQUNBLE1BQUEsWUFDQSxLQUFBLHFCQUFBLEtBQUEsaUJDTEEsV0FDQSxZQUNBLFNBQUEsT0FBQSxlQUNBLFFBQUEsVUFBQSxXQUNBLE1BQUEsVUFBQSxJQUFBLE9BQ0EsTUFBQSxVQUNBLE1BQUEsSUFBQSxJQUNBLEVBQUEsT0FBQSxLQUFBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJywgWydtZ2NyZWEubmdTdHJhcCddKVxyXG4gICAgICAgIC52YWx1ZSgndmVyc2lvbicsICcwLjEnKTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGbG93Q3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb290U2NvcGUsIFBhcnRzLCBTdmdQYXJ0cykge1xyXG4gICAgICAgICAgICB2YXIgY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCdwYXJ0OnNlbGVjdGVkJywgcGFydFNlbGVjdGVkKTtcclxuXHJcbiAgICAgICAgICAgIFBhcnRzLmZldGNoKCkudGhlbihwYXJ0RGF0YUZldGNoZWQpO1xyXG5cclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJ0RGF0YUZldGNoZWQoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY3RybC5wYXJ0U2VjdGlvbnMgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJ0U2VsZWN0ZWQoZXZlbnQsIHNlY3Rpb25OYW1lLCBzZWxlY3RlZFBhcnQsIHNlbGVjdGVkVmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlU3ZnUGFydChzZWxlY3RlZFZhcmlhbnQpO1xyXG4gICAgICAgICAgICAgICAgUGFydHMudXBkYXRlU2VsZWN0ZWRQYXJ0KHNlY3Rpb25OYW1lLCBzZWxlY3RlZFBhcnQpO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd1cGRhdGU6c2VsZWN0ZWQnLCBzZWN0aW9uTmFtZSwgc2VsZWN0ZWRQYXJ0LCBzZWxlY3RlZFZhcmlhbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdmdQYXJ0KHNlbGVjdGVkVmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVmFyaWFudC5jb2xvcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmVhY2goc2VsZWN0ZWRWYXJpYW50LmNvbG9ycywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3ZnUGFydHMudXBkYXRlT25lKGtleSwgeyBjb2xvcjogdmFsdWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdQcmV2aWV3Q3RybCcsIGZ1bmN0aW9uIChTdmdQYXJ0cywgRGF0YUNvbGxlY3Rpb24sICRzY29wZSkge1xyXG4gICAgICAgICAgICB2YXIgY3RybCA9IHRoaXM7XHJcbiAgICAgICAgICAgIGN0cmwuZ2V0UGFydCA9IGdldFBhcnQ7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCdzdmdQYXJ0OmNsaWNrZWQnLCB1cGRhdGVBY3RpdmVTdmdQYXJ0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdmdEYXRhID0gbmV3IERhdGFDb2xsZWN0aW9uKHsgZmlsZVBhdGg6ICdzY3JpcHRzL3N2Z2RhdGEuanNvbicsIGlzQXN5bmM6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICBzdmdEYXRhLmZldGNoKCkudGhlbihkYXRhRmV0Y2hlZCk7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFBhcnQoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN0cmwuU3ZnRGF0YVJlYWR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN2Z1BhcnRzLmdldE9uZShrZXkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkYXRhRmV0Y2hlZCgpIHtcclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChzdmdEYXRhLmdldEFsbCgpLCBmdW5jdGlvbihzdmdEYXRhUGFydCwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgU3ZnUGFydHMuYWRkKGtleSwgc3ZnRGF0YVBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjdHJsLlN2Z0RhdGFSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZVN2Z1BhcnQoZXZlbnQsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgU3ZnUGFydHMudXBkYXRlQWxsKHsgc2VsZWN0ZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgU3ZnUGFydHMudXBkYXRlT25lKGtleSwgeyBzZWxlY3RlZDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1N1bW1hcnlDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgUGFydHMpIHtcclxuICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgY3RybC5zZWxlY3RlZFBhcnRTZWN0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgUGFydHMuZmV0Y2goKS50aGVuKHBhcnREYXRhRmV0Y2hlZCk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd1cGRhdGU6c2VsZWN0ZWQnLCB1cGRhdGVTZWxlY3RlZFBhcnRzKTtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcGFydERhdGFGZXRjaGVkKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGN0cmwucGFydFNlY3Rpb25zID0gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRQYXJ0cyhldmVudCwgc2VjdGlvbk5hbWUsIHNlbGVjdGVkUGFydCwgc2VsZWN0ZWRWYXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBjdHJsLnNlbGVjdGVkUGFydFNlY3Rpb25zW3NlY3Rpb25OYW1lXSA9IHsgc2VsZWN0ZWRQYXJ0OiBzZWxlY3RlZFBhcnQsIHNlbGVjdGVkVmFyaWFudDogc2VsZWN0ZWRWYXJpYW50IH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3BhcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnbW9kZWwnOiAnPXBhcnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICdzZWN0aW9uTmFtZSc6ICc9J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnQudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudXBkYXRlU2VsZWN0ZWRQYXJ0ID0gdXBkYXRlU2VsZWN0ZWRQYXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdGVkVmFyaWFudCA9IGFuZ3VsYXIuY29weShzY29wZS5tb2RlbC52YXJpYW50c1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2V0U2VsZWN0ZWRWYXJpYW50ID0gc2V0U2VsZWN0ZWRWYXJpYW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFBhcnQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdwYXJ0OnNlbGVjdGVkJywgc2NvcGUuc2VjdGlvbk5hbWUsIHNjb3BlLm1vZGVsLCBzY29wZS5zZWxlY3RlZFZhcmlhbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWRWYXJpYW50KHZhcmlhbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0ZWRWYXJpYW50ID0gdmFyaWFudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlLm1vZGVsLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFBhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgncGFydFNlY3Rpb24nLCBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAnPXBhcnRTZWN0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICc9cGFydFR5cGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICdwYXJ0cyc6ICc9J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnQuc2VjdGlvbi50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3Njb3BlLiRvbigncGFydDpzZWxlY3RlZCcsIHVwZGF0ZVNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9mdW5jdGlvbiB1cGRhdGVTZWxlY3RlZChldmVudCwgc2VsZWN0ZWRQYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd1cGRhdGU6c2VsZWN0ZWQnLCBzZWxlY3RlZFBhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIF8uZWFjaChzY29wZS5wYXJ0cywgZnVuY3Rpb24gKHBhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgcGFydC5zZWxlY3RlZCA9IHBhcnQubmFtZSA9PSBzZWxlY3RlZFBhcnQubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTtcclxuXHJcbiIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2Nyb2xsQmluZCcsIGZ1bmN0aW9uICgkcSwgc2Nyb2xsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oYXR0cnMuc2NvbGxCaW5kKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGF0dHJzLnNjcm9sbEJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbC5iaW5kKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdHRycy51cGRhdGVTY29wZVZhbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlU2NvcGVWYWxzID0gYXR0cnMudXBkYXRlU2NvcGVWYWxzLnJlcGxhY2UoLycvZ2ksICdcIicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UodXBkYXRlU2NvcGVWYWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZFZhbHVlc1RvU2Nyb2xsKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZFZhbHVlc1RvU2Nyb2xsKFt1cGRhdGVTY29wZVZhbHNdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJpbmRWYWx1ZXNUb1Njcm9sbChzY29wZUtleXNUb1VwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGVLZXlzVG9VcGRhdGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsLmJpbmQoZ2V0VXBkYXRlVmFsdWVzRm4oc2NvcGVLZXlzVG9VcGRhdGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFVwZGF0ZVZhbHVlc0ZuKHNjb3BlS2V5c1RvVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiB1cGRhdGVWYWx1ZXMoc2Nyb2xsVG9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmVhY2goc2NvcGVLZXlzVG9VcGRhdGUsIGZ1bmN0aW9uIChzY29wZUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlW3Njb3BlS2V5XSA9IHNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7XHJcblxyXG4iLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3NlbGVjdFBhcnRCdXR0b24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0UGFydCA9IHNlbGVjdFBhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RQYXJ0ICgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7XHJcblxyXG4iLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3Nob3dTcGlubmVyJywgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlLCAkY29tcGlsZSkge1xyXG4gICAgICAgICAgICB2YXIgaWRQb3N0Rml4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogMSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd1NwaW5uZXIgPSBnZXRCb29sKGF0dHJzLnNob3dTcGlubmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd1NwaW5uZXIgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnNwaW5uZXJLZXlQb3N0Rml4ID0gaWRQb3N0Rml4O1xyXG4gICAgICAgICAgICAgICAgICAgIGlkUG9zdEZpeCsrOyBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwaW5uZXJFbGVtZW50ID0gZ2V0U3Bpbm5lckVsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRCZWZvcmVFbGVtZW50KHNwaW5uZXJFbGVtZW50WzBdLCBlbGVtZW50WzBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZU9ic2VydmUgPSBhdHRycy4kb2JzZXJ2ZSgnc2hvd1NwaW5uZXInLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRCb29sKHZhbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnQoc3Bpbm5lckVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlT2JzZXJ2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Qm9vbChhdHRyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhXy5pc1VuZGVmaW5lZChhdHRyKSAmJiBhdHRyLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U3Bpbm5lckVsZW1lbnQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSAkdGVtcGxhdGVDYWNoZS5nZXQoJ3NwaW5uZXIudHBsLmh0bWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmtGbiA9ICRjb21waWxlKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5rRm4oc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5zZXJ0QmVmb3JlRWxlbWVudChpbnNlcnRFbCwgc2libGluZ0VsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRFbCA9IHNpYmxpbmdFbC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUoaW5zZXJ0RWwsIHNpYmxpbmdFbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3N1bW1hcnlJdGVtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3NlbGVjdGVkUGFydCc6ICc9c3VtbWFyeUl0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgICdzZWN0aW9uTmFtZSc6ICc9JyxcclxuICAgICAgICAgICAgICAgICAgICAnc2VsZWN0ZWRWYXJpYW50JzogJz0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VtbWFyeS5pdGVtLnRwbC5odG1sJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCd2YXJpYW50UGlja2VyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnRzOiAnPXZhcmlhbnRQaWNrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFyaWFudDogJz0nLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VQYXJ0SW1nVXJsOiAnQCdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZhcmlhbnQucGlja2VyLnRwbC5odG1sJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnUGFydHMnLCBmdW5jdGlvbiAoRGF0YUNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gUGFydHMoKSB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFBhcnRzLnByb3RvdHlwZSA9IG5ldyBEYXRhQ29sbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBQYXJ0cy5wcm90b3R5cGUucHJvY2Vzc0RhdGEgPSBwcm9jZXNzRGF0YTtcclxuICAgICAgICAgICAgUGFydHMucHJvdG90eXBlLnVwZGF0ZVNlbGVjdGVkUGFydCA9IHVwZGF0ZVNlbGVjdGVkUGFydDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFydHMoeyBmaWxlUGF0aDogJ3NjcmlwdHMvcGFydGRhdGEuanNvbicsIGlzQXN5bmM6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFBhcnQoc2VjdGlvbk5hbWUsIHNlbGVjdGVkUGFydCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWN0aW9uTmFtZSB8fCAhc2VsZWN0ZWRQYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSB0aGlzLml0ZW1zW3NlY3Rpb25OYW1lXTtcclxuICAgICAgICAgICAgICAgIGlmICghc2VjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF8uZWFjaChzZWN0aW9uLnBhcnRzLCBmdW5jdGlvbiAocGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnQuc2VsZWN0ZWQgPSBwYXJ0Lm5hbWUgPT0gc2VsZWN0ZWRQYXJ0Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ3Njcm9sbCcsIGZ1bmN0aW9uIChCaW5kYWJsZSkge1xyXG4gICAgICAgICAgICB2YXIgYmFzZSA9IG5ldyBCaW5kYWJsZSgpO1xyXG4gICAgICAgICAgICBiYXNlLm9uQXR0YWNoID0gYXR0YWNoU2Nyb2xsO1xyXG4gICAgICAgICAgICBiYXNlLm9uRGV0YWNoID0gZGV0YWNoU2Nyb2xsO1xyXG5cclxuICAgICAgICAgICAgdmFyIFNDUk9MTF9USFJPVFRMRSA9IDEwMDtcclxuICAgICAgICAgICAgdmFyIHRocm90dGxlZEhhbmRsZVNjcm9sbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAnYmluZCc6IGJhc2UuYmluZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYXR0YWNoU2Nyb2xsKCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3R0bGVkSGFuZGxlU2Nyb2xsID0gXy50aHJvdHRsZShoYW5kbGVTY3JvbGwsIFNDUk9MTF9USFJPVFRMRSk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhyb3R0bGVkSGFuZGxlU2Nyb2xsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZGV0YWNoU2Nyb2xsKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRocm90dGxlZEhhbmRsZVNjcm9sbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNjcm9sbFRvcCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUb3AgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3AgPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gZ2V0U2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgYmFzZS5pbnZva2Uoc2Nyb2xsVG9wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1N2Z1BhcnRzJywgZnVuY3Rpb24gKERhdGFDb2xsZWN0aW9uLCB1dGlscywgU3ZnUGFydCwgUGF0aCwgTGluZUdyb3VwKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIFNWR1BhcnRzKCkge1xyXG4gICAgICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJhc2UgPSBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGU7XHJcbiAgICAgICAgICAgIFNWR1BhcnRzLnByb3RvdHlwZSA9IG5ldyBEYXRhQ29sbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBTVkdQYXJ0cy5wcm90b3R5cGUuYWRkID0gYWRkU3ZnQ2xhc3M7XHJcblxyXG4gICAgICAgICAgICB1dGlscy5pbmhlcml0KFBhdGgsIFN2Z1BhcnQpO1xyXG4gICAgICAgICAgICB1dGlscy5pbmhlcml0KExpbmVHcm91cCwgU3ZnUGFydCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2xhc3NlcyA9IHsgUGF0aDogUGF0aCwgTGluZUdyb3VwOiBMaW5lR3JvdXAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU1ZHUGFydHMoeyBpdGVtczoge30sIGlzQXN5bmM6IGZhbHNlIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkU3ZnQ2xhc3Moa2V5LCBwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwcm9wcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIENsYXNzID0gZ2V0U3ZnQ2xhc3MocHJvcHMudHlwZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUNsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhc2UuYWRkLmFwcGx5KHRoaXMsIFtrZXksIG5ldyBDbGFzcyhrZXksIHByb3BzKV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTdmdDbGFzcyhrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc2VzW2tleV0gfHwgbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ3V0aWxzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgJ2luaGVyaXQnOiBpbmhlcml0XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBpbmhlcml0KGNoaWxkLCBiYXNlLCBwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQucHJvdG90eXBlID0gXy5jcmVhdGUoYmFzZS5wcm90b3R5cGUsIF8uYXNzaWduKHtcclxuICAgICAgICAgICAgICAgICAgICAnX3N1cGVyJzogYmFzZS5wcm90b3R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NhbGxTdXBlckNvbnN0cnVjdG9yJzogZnVuY3Rpb24gKGN0eCwgYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlLmFwcGx5KGN0eCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnY29uc3RydWN0b3InOiBjaGlsZFxyXG4gICAgICAgICAgICAgICAgfSwgcHJvcHMpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCJhbmd1bGFyLm1vZHVsZShcImJpa2VCdWlsZGVyXCIpLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkgeyR0ZW1wbGF0ZUNhY2hlLnB1dChcImxpbmUuZ3JvdXAudHBsLmh0bWxcIixcIjxnIGlkPXt7bW9kZWwua2V5fX0gbmctY2xpY2s9XFxcImhhbmRsZUNsaWNrZWQobW9kZWwua2V5KVxcXCIgbmctY2xhc3M9XFxcIlttb2RlbC5rZXksIG1vZGVsLmFjdGl2ZSA/IFxcJ2FjdGl2ZVxcJyA6IFxcJ1xcJywgbW9kZWwuY29sb3IgPyBcXCdoYXMtY29sb3JcXCcgOiBcXCdcXCddXFxcIj5cXHJcXG4gICAgPGxpbmUgc3ZnLWxpbmUgbmctcmVwZWF0PVxcXCJsaW5lIGluIG1vZGVsLmxpbmVzXFxcIiBjb2xvcj1cXFwibW9kZWwuY29sb3JcXFwiIGxpbmUtZGF0YT1cXFwibGluZS5kYXRhXFxcIj48L2xpbmU+XFxyXFxuPC9nPlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcImxpbmUudHBsLmh0bWxcIixcIjxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIG5nLXN0eWxlPVxcXCJzdHlsZVxcXCJcXHJcXG4gICAgICBuZy1hdHRyLXgxPVxcXCJ7e2RhdGFbMF19fVxcXCIgbmctYXR0ci15MT1cXFwie3tkYXRhWzFdfX1cXFwiIG5nLWF0dHIteDI9XFxcInt7ZGF0YVsyXX19XFxcIiBuZy1hdHRyLXkyPVxcXCJ7e2RhdGFbM119fVxcXCJcXHJcXG4gICAgICBuZy1hdHRyLXN0cm9rZS1kYXNoYXJyYXk9XFxcInt7cGF0aExlbmd0aH19XFxcIiBuZy1hdHRyLXN0cm9rZS1kYXNob2Zmc2V0PVxcXCJ7e3BhdGhMZW5ndGh9fVxcXCIgLz5cXHJcXG5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJwYXJ0LnNlY3Rpb24udHBsLmh0bWxcIixcIjxkaXYgY2xhc3M9XFxcInBhcnQtc2VjdGlvblxcXCI+XFxyXFxuICAgIDxoMiBjbGFzcz1cXFwicGFydC1zZWN0aW9uLW5hbWVcXFwiPnt7bmFtZX19PC9oMj5cXHJcXG4gICAgPGRpdiBwYXJ0PVxcXCJwYXJ0XFxcIiBzZWN0aW9uLW5hbWU9XFxcIm5hbWVcXFwiIG5nLXJlcGVhdD1cXFwicGFydCBpbiBwYXJ0c1xcXCI+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInBhcnQudHBsLmh0bWxcIixcIjxkaXYgY2xhc3M9XFxcInBhcnRcXFwiPlxcclxcbiAgICA8aDMgY2xhc3M9XFxcInBhcnQtbmFtZVxcXCI+e3ttb2RlbC5uYW1lfX08L2gzPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJidG4tZ3JvdXAgdmFyaWFudC1idXR0b25zXFxcIj5cXHJcXG4gICAgICAgIDxhIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgdmFyaWFudC1idXR0b25cXFwiIG5nLWNsYXNzPVxcXCJ7XFwnYWN0aXZlXFwnOiB2YXJpYW50Lm5hbWUgPT0gc2VsZWN0ZWRWYXJpYW50Lm5hbWUgfVxcXCIgbmctY2xpY2s9XFxcInNldFNlbGVjdGVkVmFyaWFudCh2YXJpYW50KVxcXCIgbmctcmVwZWF0PVxcXCJ2YXJpYW50IGluIG1vZGVsLnZhcmlhbnRzXFxcIj57e3ZhcmlhbnQubmFtZX19PC9hPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiB2YXJpYW50LXBpY2tlcj1cXFwibW9kZWwudmFyaWFudHNcXFwiIGRhdGEtc2VsZWN0ZWQtdmFyaWFudD1cXFwic2VsZWN0ZWRWYXJpYW50XFxcIiBkYXRhLWJhc2UtcGFydC1pbWctdXJsPVxcXCJjb250ZW50L2ltYWdlcy9wYXJ0c1xcXCI+PC9kaXY+XFxyXFxuICAgIDxhIGNsYXNzPVxcXCJidG4gcGFydC1zZWxlY3QtYnRuIGJ0bi1sZyBidG4tZGVmYXVsdFxcXCIgbmctY2xpY2s9XFxcInVwZGF0ZVNlbGVjdGVkUGFydCgpXFxcIiBuZy1jbGFzcz1cXFwie1xcJ2FjdGl2ZVxcJzogbW9kZWwuc2VsZWN0ZWR9XFxcIj57e21vZGVsLnNlbGVjdGVkID8gXFwnU2VsZWN0ZWRcXCcgOiBcXCdTZWxlY3QgdGhpcyBwYXJ0XFwnfX08L2E+XFxyXFxuPC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwicGF0aC50cGwuaHRtbFwiLFwiPHBhdGggaWQ9e3ttb2RlbC5rZXl9fSBmaWxsPVxcXCJub25lXFxcIiBuZy1jbGljaz1cXFwiaGFuZGxlQ2xpY2tlZChtb2RlbC5rZXkpXFxcIiBuZy1jbGFzcz1cXFwiW21vZGVsLnR5cGUsIG1vZGVsLnNlbGVjdGVkID8gXFwnc2VsZWN0ZWRcXCc6XFwnXFwnLCBtb2RlbC5jb2xvciA/IFxcJ2hhcy1jb2xvclxcJzpcXCdcXCddXFxcIlxcclxcbiAgICAgIG5nLXN0eWxlPVxcXCJzdHlsZVxcXCIgbmctYXR0ci1zdHJva2UtZGFzaGFycmF5PVxcXCJ7e3BhdGhMZW5ndGh9fVxcXCIgbmctYXR0ci1zdHJva2UtZGFzaG9mZnNldD1cXFwie3twYXRoTGVuZ3RofX1cXFwiIG5nLWF0dHItZD1cXFwie3ttb2RlbC5kYXRhfX1cXFwiIC8+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwic3Bpbm5lci50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwic3Bpbm5lclxcXCI+XFxyXFxuICAgIDxoMyBjbGFzcz1cXFwibG9hZC10ZXh0XFxcIj5Mb2FkaW5nLi4uPC9oMz5cXHJcXG4gICAgPD94bWwgdmVyc2lvbj1cXFwiMS4wXFxcIiBlbmNvZGluZz1cXFwidXRmLThcXFwiID8+XFxyXFxuICAgIDxzdmcgaWQ9XFxcInNwaW5uZXItc3Zne3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIiB2ZXJzaW9uPVxcXCIxLjFcXFwiIGlkPVxcXCJMYXllcl8xXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHhtbG5zOnhsaW5rPVxcXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXFxcIiB4PVxcXCIwcHhcXFwiIHk9XFxcIjBweFxcXCJcXHJcXG4gICAgICAgICB2aWV3Qm94PVxcXCIyMDQgODkuMyAyNDMuMyAyNDMuM1xcXCIgZW5hYmxlLWJhY2tncm91bmQ9XFxcIm5ldyAyMDQgODkuMyAyNDMuMyAyNDMuM1xcXCIgeG1sOnNwYWNlPVxcXCJwcmVzZXJ2ZVxcXCI+XFxyXFxuICAgIDxnIGlkPVxcXCJzcGlubmVyLXdyYXBwZXJ7e3NwaW5uZXJLZXlQb3N0Rml4fX1cXFwiPjxnIGlkPVxcXCJzcGlubmVyLXdoZWVse3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIj5cXHJcXG4gICAgPHBhdGggaWQ9XFxcInNwaW5uZXItcmlte3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIiBmaWxsPVxcXCJub25lXFxcIiBkPVxcXCJNMjU5LjYsMTI1LjJjNTAuMi0zOSwxMTkuMS0yNy44LDE1NS40LDIwLjhjMzYuMiw0OC41LDIyLjEsMTE0LjQtMjQuMSwxNTMuNlxcclxcblx0XHRjLTI5LjUsMjUtMTA4LjksMzYuNS0xNTMuNS0yMC45QzIwNi4xLDIzOC40LDIxMy45LDE2MC43LDI1OS42LDEyNS4yeiBNMjQ4LjIsMjcwLjdjMzguMyw0OS4yLDkwLjgsNDkuNywxMzMuMSwxOFxcclxcblx0XHRzNTMuMi05Mi40LDIyLjEtMTM0Yy0zMS4xLTQxLjctODYuNC01NS43LTEzNC44LTE2LjhDMjI0LDE3My43LDIyMS4zLDIzNi4xLDI0OC4yLDI3MC43elxcXCIgLz5cXHJcXG4gICAgPGcgaWQ9XFxcInNwaW5uZXItc3Bva2Vze3tzcGlubmVyS2V5UG9zdEZpeH19XFxcIj5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjQxNi45XFxcIiB5MT1cXFwiMTgwLjlcXFwiIHgyPVxcXCIzMzguN1xcXCIgeTI9XFxcIjIwMy45XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzM4LjdcXFwiIHkxPVxcXCIyMDMuOVxcXCIgeDI9XFxcIjM4NlxcXCIgeTI9XFxcIjEzNi4zXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzk4LjdcXFwiIHkxPVxcXCIxNTAuN1xcXCIgeDI9XFxcIjM0My4yXFxcIiB5Mj1cXFwiMjE1LjFcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MDkuNlxcXCIgeTE9XFxcIjE2NC4xXFxcIiB4Mj1cXFwiMzI5LjJcXFwiIHkyPVxcXCIxOTkuOFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjQyMC4xXFxcIiB5MT1cXFwiMTk5LjhcXFwiIHgyPVxcXCIzNDMuMlxcXCIgeTI9XFxcIjIxNS4xXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiNDIwLjlcXFwiIHkxPVxcXCIyMTcuOVxcXCIgeDI9XFxcIjMzOS44XFxcIiB5Mj1cXFwiMjIxLjlcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCI0MTYuOVxcXCIgeTE9XFxcIjIzNi40XFxcIiB4Mj1cXFwiMzQwLjlcXFwiIHkyPVxcXCIyMDcuNFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjQxMC41XFxcIiB5MT1cXFwiMjUzLjlcXFwiIHgyPVxcXCIzNDIuM1xcXCIgeTI9XFxcIjIxMVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjQwMVxcXCIgeTE9XFxcIjI2OS4zXFxcIiB4Mj1cXFwiMzM0LjJcXFwiIHkyPVxcXCIyMjYuNFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjM4OC4zXFxcIiB5MT1cXFwiMjgyLjlcXFwiIHgyPVxcXCIzMzJcXFwiIHkyPVxcXCIyMjcuNlxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjM1Ni4xXFxcIiB5MT1cXFwiMzAzLjJcXFwiIHgyPVxcXCIzMzkuOFxcXCIgeTI9XFxcIjIyMS45XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMzQwLjlcXFwiIHkxPVxcXCIyMjEuOVxcXCIgeDI9XFxcIjM3My44XFxcIiB5Mj1cXFwiMjkzLjlcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIzMjAuOVxcXCIgeTE9XFxcIjMxMC41XFxcIiB4Mj1cXFwiMzIyLjJcXFwiIHkyPVxcXCIyMjYuNFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjMwMC43XFxcIiB5MT1cXFwiMzA3LjhcXFwiIHgyPVxcXCIzMjdcXFwiIHkyPVxcXCIyMjcuNlxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI4Mi4zXFxcIiB5MT1cXFwiMzAwLjRcXFwiIHgyPVxcXCIzMzJcXFwiIHkyPVxcXCIyMjcuNlxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI2OC4xXFxcIiB5MT1cXFwiMjkxLjFcXFwiIHgyPVxcXCIzMTUuNFxcXCIgeTI9XFxcIjIxMVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjI1NC4yXFxcIiB5MT1cXFwiMjc3LjhcXFwiIHgyPVxcXCIzMTUuNFxcXCIgeTI9XFxcIjIyMC41XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjQ0LjFcXFwiIHkxPVxcXCIyNjQuOFxcXCIgeDI9XFxcIjMxOVxcXCIgeTI9XFxcIjIyNFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjMxOVxcXCIgeTE9XFxcIjIyNFxcXCIgeDI9XFxcIjMzOC43XFxcIiB5Mj1cXFwiMzA4LjZcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyMzUuNVxcXCIgeTE9XFxcIjI0Ni4zXFxcIiB4Mj1cXFwiMzE5LjVcXFwiIHkyPVxcXCIyMjYuNFxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjIzMS44XFxcIiB5MT1cXFwiMjI5LjVcXFwiIHgyPVxcXCIzMTlcXFwiIHkyPVxcXCIyMDQuM1xcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjIzMS4xXFxcIiB5MT1cXFwiMjA5LjRcXFwiIHgyPVxcXCIzMTYuOFxcXCIgeTI9XFxcIjIwNy40XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjM0LjNcXFwiIHkxPVxcXCIxOTAuN1xcXCIgeDI9XFxcIjMxNlxcXCIgeTI9XFxcIjIxNy45XFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjQxXFxcIiB5MT1cXFwiMTcyLjVcXFwiIHgyPVxcXCIzMTUuNVxcXCIgeTI9XFxcIjIxNS4xXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjUyLjJcXFwiIHkxPVxcXCIxNTQuNFxcXCIgeDI9XFxcIjMxOVxcXCIgeTI9XFxcIjIwNC4zXFxcIiAvPlxcclxcbiAgICA8bGluZSBmaWxsPVxcXCJub25lXFxcIiB4MT1cXFwiMjY0LjhcXFwiIHkxPVxcXCIxNDEuMVxcXCIgeDI9XFxcIjMyMy44XFxcIiB5Mj1cXFwiMjAwLjhcXFwiIC8+XFxyXFxuICAgIDxsaW5lIGZpbGw9XFxcIm5vbmVcXFwiIHgxPVxcXCIyOTYuMlxcXCIgeTE9XFxcIjEyMS40XFxcIiB4Mj1cXFwiMzE5LjVcXFwiIHkyPVxcXCIyMDQuMVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjMxNS40XFxcIiB5MT1cXFwiMTE2XFxcIiB4Mj1cXFwiMzMwLjNcXFwiIHkyPVxcXCIxOTkuM1xcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjMzNC43XFxcIiB5MT1cXFwiMTE2XFxcIiB4Mj1cXFwiMzM4LjdcXFwiIHkyPVxcXCIyMDMuOVxcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjM1Mi4zXFxcIiB5MT1cXFwiMTE4LjJcXFwiIHgyPVxcXCIzMTlcXFwiIHkyPVxcXCIyMDQuM1xcXCIgLz5cXHJcXG4gICAgPGxpbmUgZmlsbD1cXFwibm9uZVxcXCIgeDE9XFxcIjM3MC4yXFxcIiB5MT1cXFwiMTI1LjVcXFwiIHgyPVxcXCIzMzAuM1xcXCIgeTI9XFxcIjE5OS4zXFxcIiAvPlxcclxcbiAgICAgICAgICAgIDwvZz5cXHJcXG4gICAgPHBhdGggaWQ9XFxcInNwaW5uZXItdGlyZXt7c3Bpbm5lcktleVBvc3RGaXh9fVxcXCIgZmlsbD1cXFwibm9uZVxcXCIgZD1cXFwiTTI1OS42LDEyNS4yYzUwLjItMzksMTE5LjEtMjcuOCwxNTUuNCwyMC44YzM2LjIsNDguNSwyMi4xLDExNC40LTI0LjEsMTUzLjZcXHJcXG5cdFx0Yy0yOS41LDI1LTEwOC45LDM2LjUtMTUzLjUtMjAuOUMyMDYuMSwyMzguNCwyMTMuOSwxNjAuNywyNTkuNiwxMjUuMnogTTIzMS4xLDI4NS45YzM1LjQsNTIuMSwxMTUsNTMuNSwxNjIuOCwxOS41XFxyXFxuXHRcdGM0OC4yLTM0LjMsNjUuNC0xMTYuOSwyNi4xLTE2NC4xQzM3OC44LDkxLjYsMzE4LDczLjEsMjUyLjIsMTIxLjVDMjA4LjQsMTUzLjYsMTkxLjYsMjI3LjYsMjMxLjEsMjg1Ljl6XFxcIiAvPlxcclxcbiAgICA8cGF0aCBpZD1cXFwic3Bpbm5lci1odWJ7e3NwaW5uZXJLZXlQb3N0Rml4fX1cXFwiIGZpbGw9XFxcIm5vbmVcXFwiIGQ9XFxcIk0zMTUuNCwyMTMuN2MwLTIuMywwLjctMTMuOSwxMy41LTEzLjljNy40LDAsMTMuNSw2LjIsMTMuNSwxMy45cy02LjEsMTMuOS0xMy42LDEzLjlcXHJcXG5cdFx0QzMyMS40LDIyNy42LDMxNS40LDIyMS41LDMxNS40LDIxMy43eiBNMzIzLDIxOGwtNC4xLDAuNmwzLjQsMy4yTDMyMywyMTh6IE0zMzMuOCwyMTYuOWwwLjcsNC4xbDMuMS0zLjVMMzMzLjgsMjE2Ljl6IE0zMjgsMjE5LjlcXHJcXG5cdFx0bC0xLjMsNGw0LjMtMC43TDMyOCwyMTkuOXogTTMxOC43LDIxMS4ybC0wLjQsNC4xbDMuOS0yLjVMMzE4LjcsMjExLjJ6IE0zMjMuOSwyMDguM2wxLjMtMy45bC00LjQsMS42TDMyMy45LDIwOC4zeiBNMzM0LjUsMjA1LjdcXHJcXG5cdFx0bC01LjMtMi45bDEuNyw0LjNMMzM0LjUsMjA1Ljd6IE0zMzQuOCwyMTEuM2w0LDEuMWwtMS44LTQuM0wzMzQuOCwyMTEuM3pcXFwiIC8+XFxyXFxuICAgICAgICA8L2c+XFxyXFxuICAgICAgICA8L2c+XFxyXFxuICAgIDwvc3ZnPlxcclxcbjwvZGl2PlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInN1bW1hcnkuaXRlbS50cGwuaHRtbFwiLFwiPGxpIG5nLXNob3c9XFxcInNlbGVjdGVkUGFydFxcXCIgY2xhc3M9XFxcInN1bW1hcnktaXRlbVxcXCI+XFxyXFxuICAgIDxzcGFuIGNsYXNzPVxcXCJzdW1tYXJ5LXNlY3Rpb24tbmFtZVxcXCI+e3tzZWN0aW9uTmFtZX19OiZuYnNwOzwvc3Bhbj5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcInN1bW1hcnktcGFydC1uYW1lXFxcIj57e3NlbGVjdGVkUGFydC5uYW1lfX08L3NwYW4+XFxyXFxuICAgIDxzcGFuIGNsYXNzPVxcXCJzdW1tYXJ5LXZhcmlhbnQtY29sb3JcXFwiIG5nLXJlcGVhdD1cXFwiY29sb3IgaW4gc2VsZWN0ZWRWYXJpYW50LmNvbG9yc1xcXCIgbmctc3R5bGU9XFxcIntcXCdiYWNrZ3JvdW5kXFwnOmNvbG9yfVxcXCI+Jm5ic3A7PC9zcGFuPlxcclxcbjwvbGk+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwidmFyaWFudC5waWNrZXIudHBsLmh0bWxcIixcIjxkaXYgY2xhc3M9XFxcInZhcmlhbnQtcGlja2VyXFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiaW1hZ2VzLXN0YWNrXFxcIj5cXHJcXG4gICAgICAgIDxpbWcgY2xhc3M9XFxcInZhcmlhbnQtaW1hZ2VcXFwiIG5nLXNyYz1cXFwie3tiYXNlUGFydEltZ1VybCArIFxcJy9cXCcgKyB2YXJpYW50LmltYWdlVXJsfX1cXFwiIG5nLWNsYXNzPVxcXCJ7XFwnc2VsZWN0ZWRcXCc6IHZhcmlhbnQubmFtZSA9PSBzZWxlY3RlZFZhcmlhbnQubmFtZSB9XFxcIiBuZy1yZXBlYXQ9XFxcInZhcmlhbnQgaW4gdmFyaWFudHNcXFwiIC8+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlwiKTt9XSk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdzdmdMaW5lR3JvdXAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ21vZGVsJzogJz0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lc3BhY2U6ICdzdmcnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdsaW5lLmdyb3VwLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmhhbmRsZUNsaWNrZWQgPSBoYW5kbGVDbGlja2VkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2tlZChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3N2Z1BhcnQ6Y2xpY2tlZCcsIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpOyIsIjsgKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdiaWtlQnVpbGRlcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3ZnTGluZScsIGZ1bmN0aW9uIChTdmdBbmltYXRpb25EaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAnY29sb3InOiAnPScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiAnPWxpbmVEYXRhJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlOiAnc3ZnJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbGluZS50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBlbGVtZW50WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXNlID0gbmV3IFN2Z0FuaW1hdGlvbkRpcmVjdGl2ZShlbCwgJ2xpbmUnLCB7IG1zUHJVbml0OiAyMCwgZGF0YTogc2NvcGUuZGF0YX0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJ3N2Z1Jvb3RMb2FkZWQnLCBsb2FkQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goJ2NvbG9yJywgdXBkYXRlQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb2FkQW5pbWF0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5wYXRoTGVuZ3RoID0gYmFzZS5nZXRMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3R5bGUgPSBiYXNlLmdldFN0eWxlKHNjb3BlLmNvbG9yLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVDb2xvcigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3R5bGUgPSBiYXNlLmdldFN0eWxlKHNjb3BlLmNvbG9yLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG5cclxuIiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdzdmdQYXRoJywgZnVuY3Rpb24gKFN2Z0FuaW1hdGlvbkRpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgICdtb2RlbCc6ICc9J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlOiAnc3ZnJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGF0aC50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZSA9IG5ldyBTdmdBbmltYXRpb25EaXJlY3RpdmUoZWwsICdwYXRoJywgeyBkYXRhOiBzY29wZS5tb2RlbC5kYXRhIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJ3N2Z1Jvb3RMb2FkZWQnLCBsb2FkQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5oYW5kbGVDbGlja2VkID0gaGFuZGxlQ2xpY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goJ21vZGVsLmNvbG9yJywgdXBkYXRlQ29sb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrZWQoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzdmdQYXJ0OmNsaWNrZWQnLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbG9hZEFuaW1hdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucGF0aExlbmd0aCA9IGJhc2UuZ2V0TGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0eWxlID0gYmFzZS5nZXRTdHlsZShzY29wZS5tb2RlbC5jb2xvciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ29sb3IoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0eWxlID0gYmFzZS5nZXRTdHlsZShzY29wZS5tb2RlbC5jb2xvciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3N2Z1Jvb3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBlbGVtZW50WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRicm9hZGNhc3QoJ3N2Z1Jvb3RMb2FkZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3ZnUm9vdExvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnQmluZGFibGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBCaW5kYWJsZSgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQXR0YWNoID0gYW5ndWxhci5ub29wO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkJvdW5kID0gYW5ndWxhci5ub29wO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblVuQm91bmQgPSBhbmd1bGFyLm5vb3A7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGV0YWNoID0gYW5ndWxhci5ub29wO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXNbJ19jYWxsYmFja3MnXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iaW5kID0gYmluZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW52b2tlID0gaW52b2tlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJpbmQoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmWydfY2FsbGJhY2tzJ10ucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gc2VsZlsnX2NhbGxiYWNrcyddLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uQXR0YWNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25Cb3VuZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmWydfY2FsbGJhY2tzJ10uc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25VbkJvdW5kKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZlsnX2NhbGxiYWNrcyddLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkRldGFjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbnZva2UoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHNlbGZbJ19jYWxsYmFja3MnXSwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuZmFjdG9yeSgnRGF0YUNvbGxlY3Rpb24nLCBmdW5jdGlvbiAoJHEsICR0aW1lb3V0LCAkaHR0cCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBEYXRhQ29sbGVjdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQXN5bmMgPSAhXy5pc1VuZGVmaW5lZChvcHRpb25zLmlzQXN5bmMpID8gb3B0aW9ucy5pc0FzeW5jIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gb3B0aW9ucy5pdGVtcyB8fCB7fTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mZXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWxlUGF0aCA9IG9wdGlvbnMuZmlsZVBhdGg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIERhdGFDb2xsZWN0aW9uLnByb3RvdHlwZS5mZXRjaCA9IGZldGNoO1xyXG4gICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0T25lID0gZ2V0T25lO1xyXG4gICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0QWxsID0gZ2V0QWxsO1xyXG4gICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlT25lID0gdXBkYXRlT25lO1xyXG4gICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlQWxsID0gdXBkYXRlQWxsO1xyXG4gICAgICAgICAgICBEYXRhQ29sbGVjdGlvbi5wcm90b3R5cGUucHJvY2Vzc0RhdGEgPSBwcm9jZXNzRGF0YTtcclxuICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlLmFkZCA9IGFkZDtcclxuICAgICAgICAgICAgRGF0YUNvbGxlY3Rpb24ucHJvdG90eXBlLmFkZEFsbCA9IGFkZEFsbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBEYXRhQ29sbGVjdGlvbjtcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZldGNoKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQXN5bmMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoZWREZmQgPSB0aGlzLmZldGNoZWREZmQgfHwgJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mZXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaGVkRGZkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZldGNoZWREZmQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5mZXRjaGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRodHRwLmdldCh0aGlzLmZpbGVQYXRoKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmV0Y2hpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mZXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pdGVtcyA9IHNlbGYucHJvY2Vzc0RhdGEoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmV0Y2hlZERmZC5yZXNvbHZlKHNlbGYuaXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoZWREZmQucHJvbWlzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZChrZXksIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQXN5bmMgJiYgIXRoaXMuZmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICgha2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldE9uZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc1trZXldID0gaXRlbTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRBbGwoY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBc3luYyAmJiAhdGhpcy5mZXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjb2xsZWN0aW9uIHx8IF8uc2l6ZShjb2xsZWN0aW9uKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZChrZXksIGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0T25lKGtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBc3luYyAmJiAhdGhpcy5mZXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuaXRlbXNba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBc3luYyAmJiAhdGhpcy5mZXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlT25lKGtleSwgcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQXN5bmMgJiYgIXRoaXMuZmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmdldE9uZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uYXNzaWduKGl0ZW0sIHByb3BzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQWxsKHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FzeW5jICYmICF0aGlzLmZldGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF8uZWFjaCh0aGlzLml0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uYXNzaWduKGl0ZW0sIHByb3BzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5mYWN0b3J5KCdTdmdBbmltYXRpb25EaXJlY3RpdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBBbmltYXRpb25QYXJ0KGVsLCB0eXBlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsID0gZWw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gb3B0aW9ucy5kYXRhIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubXNQclVuaXQgPSBvcHRpb25zLm1zUHJVbml0IHx8IDQuMTY7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heE1zID0gb3B0aW9ucy5tYXhNcyB8fCAxMDAwMDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEFuaW1hdGlvbiA9IGdldEFuaW1hdGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RHVyYXRpb24gPSBnZXREdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGVuZ3RoID0gZ2V0TGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTdHlsZSA9IGdldFN0eWxlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TGVuZ3RoKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc2VsZi50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdGgnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldFBhdGhMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGluZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TGluZUxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldER1cmF0aW9uKGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKGxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gZ2V0TGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4obGVuZ3RoICogc2VsZi5tc1ByVW5pdCwgc2VsZi5tYXhNcykgKyAnbXMnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFuaW1hdGlvbihkdXJhdGlvbiwgc2hvdWxkUmVwZWF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQoZHVyYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gZ2V0RHVyYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXBlYXQgPSBzaG91bGRSZXBlYXQgPyAnaW5maW5pdGUnIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdkYXNoICcgKyBkdXJhdGlvbiArICcgbGluZWFyIGZvcndhcmRzICcgKyByZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UGF0aExlbmd0aCgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5lbC5nZXRUb3RhbExlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldExpbmVMZW5ndGgoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBNYXRoLmFicyhzZWxmLmRhdGFbMF0gLSBzZWxmLmRhdGFbMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5hYnMoc2VsZi5kYXRhWzFdIC0gc2VsZi5kYXRhWzNdKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHgsIDIpICsgTWF0aC5wb3coeSwgMikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFN0eWxlKGNvbG9yLCBzaG91bGRBbmltYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yQXR0ciA9IHR5cGUgPT0gJ2xpbmUnID8gJ3N0cm9rZScgOiAnZmlsbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVbY29sb3JBdHRyXSA9IGNvbG9yO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQW5pbWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gZ2V0QW5pbWF0aW9uKGdldER1cmF0aW9uKGdldExlbmd0aCgpKSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZVsnLXdlYmtpdC1hbmltYXRpb24nXSA9IGFuaW1hdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVbJ2FuaW1hdGlvbiddID0gYW5pbWF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnTGluZUdyb3VwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTGluZUdyb3VwO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gTGluZShsaW5lRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gbGluZURhdGEuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gTGluZUdyb3VwKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsU3VwZXJDb25zdHJ1Y3Rvcih0aGlzLCBhcmd1bWVudHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsaW5lc0RhdGFBcnIgPSB0aGlzLmRhdGEuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBfLmVhY2gobGluZXNEYXRhQXJyLCBmdW5jdGlvbiAobGluZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpbmVzLnB1c2gobmV3IExpbmUobGluZURhdGEpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiOyAoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jpa2VCdWlsZGVyJylcclxuICAgICAgICAuc2VydmljZSgnUGF0aCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIFBhdGgoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxTdXBlckNvbnN0cnVjdG9yKHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSkoKTsiLCI7IChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmlrZUJ1aWxkZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdTdmdQYXJ0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gU1ZHUGFydChrZXksIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wcyA9IHByb3BzIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgcHJvcHMua2V5ID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgXy5hc3NpZ24odGhpcywgcHJvcHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9